{"file":"ir-widget.entry.cjs.js","mappings":"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","names":["Token","CommonService","PropertyService","axios","app_store","format","addYears","h","Fragment","localizedWords","addDays","localization_store"],"sources":["src/components/ir-booking-widget/ir-booking-widget.css?tag=ir-widget&encapsulation=shadow","src/components/ir-booking-widget/ir-booking-widget.tsx"],"sourcesContent":[":host {\r\n  display: flex;\r\n  padding: 0 1rem;\r\n  width: 100%;\r\n  box-sizing: border-box !important;\r\n  pointer-events: none;\r\n  --spread: 90deg;\r\n  --shimmer-color: white;\r\n  --speed: 3s;\r\n}\r\n\r\n:host([position='fixed']) {\r\n  position: fixed;\r\n  bottom: 1rem;\r\n  left: 50%;\r\n  width: 100%;\r\n  transform: translateX(-50%);\r\n  z-index: 9999999999;\r\n}\r\n.popup-container {\r\n  box-shadow:\r\n    0 20px 25px -5px rgb(0 0 0 / 0.1),\r\n    0 8px 10px -6px rgb(0 0 0 / 0.1);\r\n}\r\n.hovered-container {\r\n  inset: -0.05rem;\r\n  position: absolute;\r\n  z-index: -1;\r\n  pointer-events: none;\r\n  overflow: hidden;\r\n  border-radius: inherit;\r\n}\r\n.booking-widget-container {\r\n  pointer-events: all;\r\n  position: relative;\r\n  display: flex;\r\n  background-color: rgba(55, 65, 81, 1);\r\n  color: white;\r\n  border-radius: var(--radius, 0.5rem);\r\n  z-index: 2;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  transition: all 0.3s ease-in-out;\r\n}\r\n.booking-widget-container::after {\r\n  position: absolute;\r\n  background-color: rgba(55, 65, 81, 1);\r\n  border-radius: var(--radius, 0.5rem);\r\n  content: '';\r\n  inset: 0;\r\n}\r\n\r\n.popup-container {\r\n  border-radius: var(--radius);\r\n}\r\n.date-trigger,\r\n.guests-trigger {\r\n  display: none;\r\n}\r\n\r\n.book-now {\r\n  background: hsla(var(--brand-600, 215, 87%, 51%), 1);\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  gap: 0.5rem;\r\n  transition: all 0.3s ease-in-out;\r\n  text-align: center;\r\n}\r\n.book-now:hover {\r\n  background: hsl(var(--brand-700, 218, 80%, 46%));\r\n}\r\n\r\n.date-trigger ir-icons,\r\n.guests-trigger ir-icons {\r\n  position: absolute;\r\n  left: 14px;\r\n}\r\n.book-now {\r\n  border-bottom-right-radius: var(--radius, 0.5rem);\r\n  border-bottom-left-radius: var(--radius, 0.5rem);\r\n}\r\n.date-trigger {\r\n  border-top-right-radius: var(--radius, 0.5rem);\r\n  border-top-left-radius: var(--radius, 0.5rem);\r\n}\r\n\r\n.btn-flip {\r\n  opacity: 1;\r\n  outline: 0;\r\n  color: #fff;\r\n  position: relative;\r\n  text-align: center;\r\n  letter-spacing: 1px;\r\n  display: inline-block;\r\n  text-decoration: none;\r\n  text-transform: uppercase;\r\n  background: hsla(var(--brand-600, 215, 87%, 51%), 1);\r\n  border-radius: var(--radius, 0.5rem);\r\n  height: 3rem;\r\n  padding: 0 1.875rem;\r\n  overflow: hidden;\r\n  z-index: 1;\r\n  transition: all 0.3s;\r\n}\r\n.btn-flip:after {\r\n  content: '';\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: hsla(var(--brand-600, 215, 87%, 51%), 1);\r\n  padding: 0 1.875rem;\r\n  z-index: -2;\r\n}\r\n\r\n.btn-flip:before {\r\n  content: '';\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 0%;\r\n  height: 100%;\r\n  background-color: hsla(var(--brand-800, 215, 87%, 51%), 1);\r\n  transition: all 0.3s;\r\n  z-index: -1;\r\n}\r\n.btn-flip::before:dir(ltr) {\r\n  border-bottom-left-radius: 0;\r\n  border-top-left-radius: 0;\r\n}\r\n.btn-flip::before:dir(rtl) {\r\n  border-bottom-right-radius: 0;\r\n  border-top-right-radius: 0;\r\n}\r\n.btn-flip:hover {\r\n  color: #fff;\r\n}\r\n\r\n.btn-flip:hover:before {\r\n  width: 100%;\r\n}\r\n\r\n/* sm */\r\n@media only screen and (min-width: 640px) {\r\n  :host {\r\n    width: fit-content;\r\n    justify-content: center;\r\n    margin-inline: auto;\r\n  }\r\n  .hovered-container::before {\r\n    content: '';\r\n    position: absolute;\r\n    inset: 0;\r\n    background: conic-gradient(from calc(270deg - (var(--spread) * 0.5)), transparent 0, var(--shimmer-color) var(--spread), transparent var(--spread));\r\n    border-radius: inherit;\r\n    overflow: hidden;\r\n    display: none;\r\n  }\r\n  .booking-widget-container:hover .hovered-container::before {\r\n    animation: rotate var(--speed) linear infinite;\r\n    display: block;\r\n  }\r\n  @keyframes rotate {\r\n    0% {\r\n      transform: rotate(0);\r\n    }\r\n    100% {\r\n      transform: rotate(360deg);\r\n    }\r\n  }\r\n  .booking-widget-container {\r\n    flex-direction: row;\r\n    align-items: center;\r\n    width: fit-content;\r\n    opacity: 0;\r\n    transition: opacity 0.3s ease-in-out;\r\n  }\r\n  .date-trigger,\r\n  .guests-trigger {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    gap: 1rem;\r\n    padding: 0.625rem 14px;\r\n    font-size: 14px;\r\n    position: relative;\r\n    z-index: 1;\r\n    cursor: pointer;\r\n    padding-inline-end: 1rem;\r\n    min-width: 200px;\r\n  }\r\n  .guests-trigger {\r\n    min-width: 200px;\r\n  }\r\n  .date-trigger,\r\n  .guests-trigger {\r\n    border-bottom: 0;\r\n  }\r\n  .date-trigger {\r\n    border-right: 1px solid var(--ir-widget-border-color);\r\n  }\r\n  .ir-popover {\r\n    width: fit-content;\r\n  }\r\n  .date-trigger {\r\n    border-top-right-radius: 0;\r\n    border-top-left-radius: 0;\r\n  }\r\n  .date-trigger ir-icons,\r\n  .guests-trigger ir-icons {\r\n    position: initial;\r\n    left: auto;\r\n  }\r\n  .btn-flip:dir(ltr) {\r\n    border-bottom-left-radius: 0;\r\n    border-top-left-radius: 0;\r\n  }\r\n  .btn-flip:dir(rtl) {\r\n    border-bottom-right-radius: 0;\r\n    border-top-right-radius: 0;\r\n  }\r\n}\r\n\r\n.popup-container {\r\n  height: 21.25rem;\r\n}\r\n\r\n@media (min-width: 1200px) {\r\n  .popup-container {\r\n    height: 24.5rem;\r\n  }\r\n}\r\n","import { Component, h, Element, Prop, Watch, Fragment, State } from '@stencil/core';\r\nimport { TContainerStyle } from './types';\r\nimport localization_store from '@/stores/app.store';\r\nimport { CommonService } from '@/services/api/common.service';\r\nimport { PropertyService } from '@/services/api/property.service';\r\nimport axios from 'axios';\r\nimport app_store from '@/stores/app.store';\r\nimport { addDays, addYears, format } from 'date-fns';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport Token from '@/models/Token';\r\n@Component({\r\n  tag: 'ir-widget',\r\n  styleUrl: 'ir-booking-widget.css',\r\n  shadow: true,\r\n})\r\nexport class IrBookingWidget {\r\n  @Element() el: HTMLIrWidgetElement;\r\n\r\n  @Prop({ reflect: true }) position: 'fixed' | 'block' = 'fixed';\r\n  @Prop() contentContainerStyle: TContainerStyle;\r\n  @Prop() propertyId: number = 42;\r\n  @Prop() perma_link: string = null;\r\n  @Prop() p: string = null;\r\n  @Prop() language: string = 'en';\r\n  @Prop() roomTypeId: string | null = null;\r\n  @Prop() aff: string = null;\r\n  @Prop() delay: number = 200;\r\n\r\n  @State() isPopoverOpen: boolean;\r\n  @State() dateModifiers: any;\r\n  @State() isLoading: boolean;\r\n  @State() isGuestPopoverOpen: boolean;\r\n  @State() dates: { from_date: Date | null; to_date: Date | null } = {\r\n    from_date: null,\r\n    to_date: null,\r\n  };\r\n  @State() guests: { adultCount: number; childrenCount: number; infants: number; childrenAges: string[] } = {\r\n    adultCount: 2,\r\n    childrenCount: 0,\r\n    infants: 0,\r\n    childrenAges: [],\r\n  };\r\n\r\n  private baseUrl: string = 'https://gateway.igloorooms.com/IRBE';\r\n  private popover: HTMLIrPopoverElement;\r\n  private token = new Token();\r\n\r\n  private commonService = new CommonService();\r\n  private propertyService = new PropertyService();\r\n  private guestPopover: HTMLIrPopoverElement;\r\n  private containerRef: HTMLDivElement;\r\n  private elTimout: NodeJS.Timeout;\r\n  error: boolean;\r\n\r\n  private initApp() {\r\n    this.modifyContainerStyle();\r\n    axios.defaults.withCredentials = true;\r\n    axios.defaults.baseURL = this.baseUrl;\r\n  }\r\n  async componentWillLoad() {\r\n    this.initApp();\r\n    const token = await this.commonService.getBEToken();\r\n    app_store.userPreferences = {\r\n      language_id: this.language,\r\n      currency_id: 'usd',\r\n    };\r\n    this.token.setToken(token);\r\n    this.initProperty();\r\n  }\r\n  componentDidLoad() {\r\n    console.log('the widget is loaded');\r\n    if (this.position === 'fixed') {\r\n      console.log('widget appended to body');\r\n      document.body.appendChild(this.el);\r\n    }\r\n  }\r\n  async initProperty() {\r\n    try {\r\n      this.isLoading = true;\r\n\r\n      await Promise.all([\r\n        this.propertyService.getExposedProperty({\r\n          id: this.propertyId,\r\n          language: this.language,\r\n          aname: this.p,\r\n          perma_link: this.perma_link,\r\n        }),\r\n        this.commonService.getExposedLanguage(),\r\n        this.propertyService.getExposedNonBookableNights({\r\n          porperty_id: this.propertyId,\r\n          from_date: format(new Date(), 'yyyy-MM-dd'),\r\n          to_date: format(addYears(new Date(), 1), 'yyyy-MM-dd'),\r\n          perma_link: this.perma_link,\r\n          aname: this.p,\r\n        }),\r\n      ]);\r\n      this.dateModifiers = this.getDateModifiers();\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      this.isLoading = false;\r\n      this.elTimout = setTimeout(() => {\r\n        this.containerRef.style.opacity = '1';\r\n      }, this.delay);\r\n    }\r\n  }\r\n\r\n  @Watch('contentContainerStyle')\r\n  handleContentContainerStyle() {\r\n    this.modifyContainerStyle();\r\n  }\r\n\r\n  private modifyContainerStyle() {\r\n    if (this.contentContainerStyle && this.contentContainerStyle.borderColor) {\r\n      this.el.style.setProperty('--ir-widget-border-color', this.contentContainerStyle.borderColor);\r\n    }\r\n  }\r\n  handleBooknow() {\r\n    if (!this.validateChildrenAges()) return;\r\n    let subdomainURL = `bookingmystay.com`;\r\n    const currentDomain = `${app_store.property.perma_link}.${subdomainURL}`;\r\n    const { from_date, to_date } = this.dates;\r\n    const { adultCount, childrenCount } = this.guests;\r\n    const fromDate = from_date ? `checkin=${format(from_date, 'yyyy-MM-dd')}` : '';\r\n    const toDate = to_date ? `checkout=${format(to_date, 'yyyy-MM-dd')}` : '';\r\n    const adults = adultCount > 0 ? `adults=${adultCount}` : '';\r\n    const children = childrenCount > 0 ? `children=${childrenCount}` : '';\r\n    const roomTypeId = this.roomTypeId ? `rtid=${this.roomTypeId}` : '';\r\n    const affiliate = this.aff ? `aff=${this.aff}` : '';\r\n    const ages = this.guests.childrenCount > 0 && this.guests.childrenAges.length > 0 ? `ages=${this.guests.childrenAges.join('_')}` : '';\r\n    const queryParams = [fromDate, toDate, adults, children, roomTypeId, affiliate, ages];\r\n    const queryString = queryParams.filter(param => param !== '').join('&');\r\n    window.open(`https://${currentDomain}?${queryString}`, '_blank');\r\n  }\r\n  private getDateModifiers() {\r\n    if (!Object.keys(app_store.nonBookableNights).length) {\r\n      return undefined;\r\n    }\r\n    const nights = {};\r\n    Object.keys(app_store?.nonBookableNights)?.forEach(nbn => {\r\n      nights[nbn] = {\r\n        disabled: true,\r\n      };\r\n    });\r\n    return nights;\r\n  }\r\n  private renderDateTrigger() {\r\n    return (\r\n      <div class=\"date-trigger\" slot=\"trigger\">\r\n        <ir-icons name=\"calendar\" svgClassName=\"size-4\"></ir-icons>\r\n        {this.dates && this.dates.from_date && this.dates.to_date ? (\r\n          <div>\r\n            <p>\r\n              <span>{format(this.dates.from_date, 'MMM dd')}</span>\r\n              <span> - </span>\r\n              <span>{format(this.dates.to_date, 'MMM dd')}</span>\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <p>Your dates</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n  private renderAdultChildTrigger() {\r\n    const { adultCount, childrenCount } = this.guests;\r\n    return (\r\n      <div class=\"guests-trigger\" slot=\"trigger\">\r\n        <ir-icons name=\"user\" svgClassName=\"size-4\"></ir-icons>\r\n        <p class={'guests'}>\r\n          {adultCount > 0 ? (\r\n            <Fragment>\r\n              <span class=\"lowercase\">\r\n                {adultCount} {adultCount === 1 ? localizedWords.entries.Lcz_Adult : localizedWords.entries.Lcz_Adults}\r\n              </span>\r\n              {app_store.property.adult_child_constraints.child_max_age > 0 && (\r\n                <span class=\"lowercase\">\r\n                  , {childrenCount} {childrenCount === 1 ? localizedWords.entries.Lcz_Child : localizedWords.entries.Lcz_Children}\r\n                </span>\r\n              )}\r\n            </Fragment>\r\n          ) : (\r\n            <span>Guests</span>\r\n          )}\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n  disconnectedCallback() {\r\n    if (this.elTimout) {\r\n      clearTimeout(this.elTimout);\r\n    }\r\n  }\r\n  private handlePopoverToggle(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    this.isGuestPopoverOpen = e.detail;\r\n    console.log('here');\r\n\r\n    if (!this.isGuestPopoverOpen) {\r\n      if (this.guests.childrenCount === 0) {\r\n        this.guestPopover.forceClose();\r\n      } else {\r\n        this.validateChildrenAges();\r\n      }\r\n    }\r\n  }\r\n  private validateChildrenAges() {\r\n    if (this.guests.childrenAges.some(c => c === '')) {\r\n      this.error = true;\r\n      return false;\r\n    }\r\n    this.guestPopover.forceClose();\r\n    return true;\r\n  }\r\n  render() {\r\n    if (this.isLoading) {\r\n      return null;\r\n    }\r\n    return (\r\n      <Fragment>\r\n        <div class=\"booking-widget-container\" ref={el => (this.containerRef = el)} style={this.contentContainerStyle}>\r\n          <div class={'hovered-container'}></div>\r\n          <ir-popover\r\n            autoAdjust={false}\r\n            allowFlip={false}\r\n            class={'ir-popover'}\r\n            showCloseButton={false}\r\n            placement={this.position === 'fixed' ? 'top-start' : 'auto'}\r\n            ref={el => (this.popover = el)}\r\n            onOpenChange={e => {\r\n              this.isPopoverOpen = e.detail;\r\n              if (!this.isPopoverOpen) {\r\n                if (!this.dates.to_date && this.dates.from_date) {\r\n                  this.dates = {\r\n                    ...this.dates,\r\n                    to_date: addDays(this.dates.from_date, 1),\r\n                  };\r\n                }\r\n              }\r\n            }}\r\n          >\r\n            {this.renderDateTrigger()}\r\n            <div slot=\"popover-content\" class=\"popup-container w-full border-0 bg-white p-4  shadow-none sm:w-auto sm:border  \">\r\n              <ir-date-range\r\n                dateModifiers={this.dateModifiers}\r\n                minDate={addDays(new Date(), -1)}\r\n                style={{ '--radius': 'var(--ir-widget-radius)' }}\r\n                fromDate={this.dates?.from_date}\r\n                toDate={this.dates?.to_date}\r\n                locale={localization_store.selectedLocale}\r\n                maxSpanDays={app_store.property.max_nights}\r\n                onDateChange={e => {\r\n                  e.stopImmediatePropagation();\r\n                  e.stopPropagation();\r\n                  const { end, start } = e.detail;\r\n                  if (end && this.isPopoverOpen) {\r\n                    this.popover.toggleVisibility();\r\n                  }\r\n                  this.dates = {\r\n                    from_date: start,\r\n                    to_date: end,\r\n                  };\r\n                }}\r\n              ></ir-date-range>\r\n            </div>\r\n          </ir-popover>\r\n          <ir-popover\r\n            outsideEvents=\"none\"\r\n            autoAdjust={false}\r\n            allowFlip={false}\r\n            ref={el => (this.guestPopover = el)}\r\n            class={'ir-popover'}\r\n            showCloseButton={false}\r\n            placement={this.position === 'fixed' ? 'top-start' : 'auto'}\r\n            onOpenChange={this.handlePopoverToggle.bind(this)}\r\n          >\r\n            {this.renderAdultChildTrigger()}\r\n\r\n            <ir-guest-counter\r\n              slot=\"popover-content\"\r\n              error={this.error}\r\n              adults={this.guests?.adultCount}\r\n              child={this.guests?.childrenCount}\r\n              minAdultCount={0}\r\n              maxAdultCount={app_store?.property?.adult_child_constraints.adult_max_nbr}\r\n              maxChildrenCount={app_store?.property?.adult_child_constraints.child_max_nbr}\r\n              childMaxAge={app_store.property?.adult_child_constraints.child_max_age}\r\n              onUpdateCounts={e => (this.guests = { ...e.detail })}\r\n              class={'h-full'}\r\n              onCloseGuestCounter={() => this.guestPopover.forceClose()}\r\n            ></ir-guest-counter>\r\n          </ir-popover>\r\n          <button class=\"btn-flip\" onClick={this.handleBooknow.bind(this)}>\r\n            Book now\r\n          </button>\r\n        </div>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n"],"version":3}