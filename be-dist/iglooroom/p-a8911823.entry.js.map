{"version":3,"names":["irAccomodationsCss","IrAccomodationsStyle0","IrAccomodations","checkAmenity","code","this","amenities","find","a","renderAmeneties","wifi","climatecontrol","balcony","h","class","name","svgClassName","description","render","key","_a","bookingAttributes","bedding_setup","length","_c","_b","map","bed_setup","index","irAdultChildCounterCss","IrAdultChildCounterStyle0","IrAdultChildCounter","componentWillLoad","childrenAges","baseChildrenAges","handleBaseChildrenAgesChange","newValue","open","isPopoverOpen","popover","toggleVisibility","addChildrenAndAdult","error","updateGuestInformation","validateChildrenAges","incrementAdultCount","adultCount","maxAdultCount","decrementAdultCount","minAdultCount","incrementChildrenCount","childrenCount","maxChildrenCount","push","decrementChildrenCount","minChildrenCount","pop","handlePopoverToggle","e","stopImmediatePropagation","stopPropagation","detail","forceClose","infant_nbr","calculateInfantNumber","config","adult_nbr","child_nbr","console","log","addAdultsAndChildren","emit","some","c","guestTrigger","slot","localizedWords","entries","Lcz_Guests","Fragment","Lcz_Adult","Lcz_Adults","childMaxAge","Lcz_Child","Lcz_Children","Lcz_Select","ref","el","allowFlip","placement","autoAdjust","outsideEvents","onOpenChange","bind","Lcz_Age","role","iconName","disabled","variants","onButtonClick","v","i","addDummyOption","value","variant","label","onValueChange","prev","toString","data","Array","_","id","Lcz_enterchildage","size","Lcz_Done","ExposedBookingAvailability","z","object","propertyid","coerce","number","from_date","string","min","to_date","room_type_ids","array","optional","default","language","currency_ref","is_in_loyalty_mode","boolean","promo_key","is_in_agent_mode","agent_id","is_in_affiliate_mode","affiliate_id","QueryStringValidator","constructor","errors","dateSchema","regex","message","validateCheckin","checkinStr","parse","checkinDate","parseISO","today","Date","isValid","isBefore","isSameDay","app_store","nonBookableNights","validateAges","str","test","validateCheckout","checkoutStr","checkoutDate","isAfter","format","validateAdultCount","isNaN","Number","validateChildrenCount","children","getErrors","irAvailibilityHeaderCss","IrAvailibilityHeaderStyle0","IrAvailibilityHeader","errorCause","popoverInstance","propertyService","PropertyService","availabiltyService","AvailabiltyService","validator","booking_store","bookingAvailabilityParams","loyalty","coupon","agent","property_id","app_data","subscribe","disableLoading","validatedFromDate","fromDate","exposedBookingAvailabiltyParams","Object","assign","setDefaultAdultCount","setDefaultChildCount","toDate","fill","proccessAges","changeExposedAvailabilityParams","userPreferences","language_id","currency_id","onAppDataChange","async","currentPage","resetBooking","recheckAvailability","handleAgesChange","oldValue","handleFromDateChange","checkAvailability","handleToDateChange","handleChildrenCountChange","handleAdultCountChange","handleDateChange","start","end","modifyQueryParam","handleAdultChildChange","encodeURIComponent","join","adCountNumber","property","adult_child_constraints","adult_max_nbr","childCountNumber","child_max_nbr","isLoading","isValidFromDate","isValidToDate","isValidAdultCount","ages","split","slice","forEach","age","setTimeout","personCounter","params","injected","adults","affiliate","afname","currency","every","queryParams","queryString","filter","param","location","href","perma_link","identifier","v4","initSocket","scrollToRoomType","getExposedBookingAvailability","mode","fetchedBooking","handleCheckAvailability","ZodError","err","error_cause","path","includes","shouldRenderErrorToast","undefined","_d","_e","disconnectedCallback","destroy","toast_timeout","clearTimeout","unsubscribe","disconnectSocket","show_loyalty","promotions","p","is_loyalty","show_coupon","showPromotions","_f","dates","_g","_h","_j","_k","child_max_age","Lcz_Search","buttonStyles","width","_l","irCouponDialogCss","IrCouponDialogStyle0","IrCouponDialog","activateCoupon","validationMessage","validateCoupon","Lcz_InvalidAgentCode","dialogRef","closeModal","removeCoupon","modifyBookingStore","showCoupon","onClick","Lcz_DiscountApplied","cn","openModal","Lcz_HaveCoupon","haveLeftIcon","onSubmit","preventDefault","onTextChanged","autofocus","inputId","placeholder","Lcz_EnterYourCouponCode","Lcz_Cancel","type","Lcz_Apply","irDatePopupCss","IrDatePopupStyle0","IrDatePopup","minDate","addDays","handleDatesChange","setHours","dateTrigger","Lcz_Dates","locale","localization_store","selectedLocale","Lcz_CheckIn","Lcz_CheckOut","Host","showCloseButton","dateChange","dateModifiers","getDateModifiers","maxSpanDays","max_nights","keys","nights","nbn","irFacilitiesCss","IrFacilitiesStyle0","IrFacilities","getTotalAmenities","set","Set","amenity_type","add","time_constraints","check_in_from","check_in_till","Lcz_CheckInFromUntil","replace","check_out_till","internet_offering","public_internet_statement","Lcz_PublicAreas","is_room_internet_free","Lcz_Rooms","Lcz_FreeInternet","parking_offering","title","pricing","Lcz_At","formatAmount","_m","_o","pets_acceptance","_p","_q","baby_cot_offering","_r","_s","_t","Lcz_PropertyFacilities","_u","aminity","_v","Lcz_Activities","_w","_x","Lcz_Services","_y","_z","food_and_beverage","innerHTML","_0","_2","_1","allowed_cards","Lcz_AcceptedCreditCards","_3","card","_4","important_info","_5","_6","non_standard_conditions","irLoyaltyCss","IrLoyaltyStyle0","IrLoyalty","toggleLoyalty","Lcz_LoyaltyApplied","Lcz_GetLoyaltyDiscount","irPropertyGalleryCss","IrPropertyGalleryStyle0","IrPropertyGallery","handleOpenGallery","window","innerWidth","activeIndex","irDialog","handleOpenCarouselGallery","showPlanLimitations","withRoomSize","showMoreTag","roomType","children_nbr","occupancy_max","maxNumber","renderOccupancy","renderRoomSize","Lcz_Maximum","Lcz_MoreDetails","images","property_state","totalImages","url","alt","formatImageAlt","tooltip","maxLength","disableCarouselClick","enableCarouselSwipe","display","src","carouselClasses","onCarouselImageIndexChange","slides","img","image_uri","closeButton","dir","onCarouselImageClicked","aminities","irRateplanCss","IrRateplanStyle0","IrRateplan","availabilityService","paymentService","PaymentService","handleRTICHange","isRatePlanAvailable","roomTypeInventory","ratePlan","variations","is_calculated","amount","handleVariationChange","rateplanId","roomTypeId","selectedVariation","updateVariation","rp_id","rt_id","adultChildConstraint","adult_child_offering","roomTypes","rt","rateplans","rp","updateRoomParams","selected_variation","variation","state","ratePlanId","fetchCancelationMessage","cancelationMessage","visibleInventory","is_targeting_travel_agency","isAgentMode","isInventoryFull","values","ratePlanSelections","f","reserved","short_name","is_non_refundable","style","color","Lcz_NonRefundable","labelColors","isInFreeCancelationZone","open_behavior","Lcz_FreeCancellation","Lcz_IfICancel","cancelation","guarantee","onTooltipOpenChange","IS_MLS_VIOLATED","discount_pct","total_before_discount","Lcz_NotAvailable","custom_text","findIndex","_7","_10","_9","_8","_13","_12","_11","_16","_15","_14","_19","_18","_17","_22","_21","_20","getDateDifference","_23","_24","_27","_26","_25","amount_per_night","Lcz_night","_28","reserveRooms","animateBookingButton","_29","_30","html","containerStyle","customStyles","background","opacity","Lcz_MLS_Alert","_32","_31","MLS_ALERT_VALUE","irRoomtypeCss","IrRoomtypeStyle0","IrRoomtype","roomtype","max_occupancy","enableBooking","r","is_closed","inventory","is_active","is_booking_engine_enabled","getVisibleInventory"],"sources":["src/components/ir-booking-engine/ir-booking-page/ir-accomodations/ir-accomodations.css?tag=ir-accomodations&encapsulation=shadow","src/components/ir-booking-engine/ir-booking-page/ir-accomodations/ir-accomodations.tsx","src/components/ir-booking-engine/ir-booking-page/ir-adult-child-counter/ir-adult-child-counter.css?tag=ir-adult-child-counter&encapsulation=shadow","src/components/ir-booking-engine/ir-booking-page/ir-adult-child-counter/ir-adult-child-counter.tsx","src/components/ir-booking-engine/ir-booking-page/ir-availibility-header/availability.ts","src/validators/querystring.validator.ts","src/components/ir-booking-engine/ir-booking-page/ir-availibility-header/ir-availibility-header.css?tag=ir-availibility-header&encapsulation=shadow","src/components/ir-booking-engine/ir-booking-page/ir-availibility-header/ir-availibility-header.tsx","src/components/ir-booking-engine/ir-booking-page/ir-availibility-header/ir-coupon-dialog/ir-coupon-dialog.css?tag=ir-coupon-dialog&encapsulation=shadow","src/components/ir-booking-engine/ir-booking-page/ir-availibility-header/ir-coupon-dialog/ir-coupon-dialog.tsx","src/components/ir-booking-engine/ir-booking-page/ir-availibility-header/ir-date-popup/ir-date-popup.css?tag=ir-date-popup&encapsulation=shadow","src/components/ir-booking-engine/ir-booking-page/ir-availibility-header/ir-date-popup/ir-date-popup.tsx","src/components/ir-booking-engine/ir-booking-page/ir-facilities/ir-facilities.css?tag=ir-facilities&encapsulation=shadow","src/components/ir-booking-engine/ir-booking-page/ir-facilities/ir-facilities.tsx","src/components/ir-booking-engine/ir-booking-page/ir-availibility-header/ir-loyalty/ir-loyalty.css?tag=ir-loyalty&encapsulation=shadow","src/components/ir-booking-engine/ir-booking-page/ir-availibility-header/ir-loyalty/ir-loyalty.tsx","src/components/ir-booking-engine/ir-booking-page/ir-property-gallery/ir-property-gallery.css?tag=ir-property-gallery&encapsulation=shadow","src/components/ir-booking-engine/ir-booking-page/ir-property-gallery/ir-property-gallery.tsx","src/components/ir-booking-engine/ir-booking-page/ir-rateplan/ir-rateplan.css?tag=ir-rateplan&encapsulation=shadow","src/components/ir-booking-engine/ir-booking-page/ir-rateplan/ir-rateplan.tsx","src/components/ir-booking-engine/ir-booking-page/ir-roomtype/ir-roomtype.css?tag=ir-roomtype&encapsulation=shadow","src/components/ir-booking-engine/ir-booking-page/ir-roomtype/ir-roomtype.tsx"],"sourcesContent":[":host {\r\n  display: block;\r\n}\r\n","import { Component, Prop, h } from '@stencil/core';\r\nimport { Amenity, BeddingSetup } from '@/models/property';\r\n@Component({\r\n  tag: 'ir-accomodations',\r\n  styleUrl: 'ir-accomodations.css',\r\n  shadow: true,\r\n})\r\nexport class IrAccomodations {\r\n  @Prop() amenities: Amenity[];\r\n  @Prop() bookingAttributes: {\r\n    max_occupancy: number;\r\n    bedding_setup: BeddingSetup[];\r\n  };\r\n\r\n  private checkAmenity(code: string) {\r\n    return this.amenities.find(a => a.code === code);\r\n  }\r\n  renderAmeneties() {\r\n    const wifi = this.checkAmenity('freewifi');\r\n    const climatecontrol = this.checkAmenity('climatecontrol');\r\n    const balcony = this.checkAmenity('balcony');\r\n    return (\r\n      <ul class=\"flex flex-wrap items-center  gap-3 text-xs\">\r\n        {wifi && (\r\n          <li class=\"flex items-center gap-1\">\r\n            <ir-icons name=\"wifi\" svgClassName=\"size-4\"></ir-icons> <span>{wifi.description}</span>\r\n          </li>\r\n        )}\r\n        {climatecontrol && (\r\n          <li class=\"flex items-center gap-1\">\r\n            <ir-icons name=\"snowflake\" svgClassName=\"size-4\"></ir-icons> <span>{climatecontrol.description}</span>\r\n          </li>\r\n        )}\r\n        {balcony && (\r\n          <li class=\"flex items-center gap-1\">\r\n            <ir-icons name=\"sun\" svgClassName=\"size-4\"></ir-icons> <span>{balcony.description}</span>\r\n          </li>\r\n        )}\r\n      </ul>\r\n    );\r\n  }\r\n  render() {\r\n    return (\r\n      <div class=\"space-y-2 pb-2 text-xs font-normal text-gray-700\">\r\n        {this.bookingAttributes?.bedding_setup.length > 0 && (\r\n          <div class=\"flex  items-center gap-2.5\">\r\n            <ir-icons name=\"bed\"></ir-icons>\r\n            <div class=\"flex flex-wrap items-center\">\r\n              {this.bookingAttributes?.bedding_setup?.map((bed_setup, index) => (\r\n                <p key={bed_setup.code}>\r\n                  {bed_setup.name} {index < this.bookingAttributes.bedding_setup.length - 1 && <span>-&nbsp;</span>}\r\n                </p>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {this.renderAmeneties()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",".counter-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n  box-sizing: border-box;\r\n  padding: 10px;\r\n  border-radius: min(var(--radius, 0.5rem), 0.5rem);\r\n  border: 1px solid var(--gray-100, #f2f4f7);\r\n  background: white;\r\n  box-shadow:\r\n    0 12px 16px -4px rgba(16, 24, 40, 0.08),\r\n    0 4px 6px -2px rgba(16, 24, 40, 0.03);\r\n}\r\n:host([data-state='error']) .popover-trigger {\r\n  border-color: var(--error-500, #f04438);\r\n  border-color: var(--error-500, #f04438);\r\n  transition: all 300ms ease-in-out;\r\n  color: var(--error-500, #f04438);\r\n}\r\n:host([data-state='error']) .popover-trigger p,\r\n:host([data-state='error']) .popover-trigger span {\r\n  transition: all 300ms ease-in-out;\r\n  color: var(--error-500, #f04438);\r\n}\r\n.counter-item {\r\n  display: flex;\r\n  align-items: center;\r\n  color: var(--gray-800, #1d2939);\r\n  justify-content: space-between;\r\n  gap: 32px;\r\n}\r\n\r\n.counter-item p {\r\n  margin: 0;\r\n}\r\n\r\n.counter-buttons-group {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.counter-buttons-group p {\r\n  width: 35px;\r\n  text-align: center;\r\n}\r\n\r\n.main-text {\r\n  font-size: 1rem !important;\r\n  line-height: 1.25rem !important;\r\n  padding-bottom: 4px !important;\r\n  font-weight: 400;\r\n  text-transform: capitalize;\r\n}\r\n\r\n.secondary-text {\r\n  font-size: 12px;\r\n  line-height: 16px;\r\n}\r\n\r\n.done-button {\r\n  margin-top: 10px;\r\n  width: 100%;\r\n}\r\n\r\n.popover-trigger p {\r\n  margin: 0;\r\n  padding: 0;\r\n  font-size: 0.75rem;\r\n}\r\n.guests {\r\n  color: var(--gray-600, #475467);\r\n  font-size: 0.875rem !important;\r\n  font-weight: 400;\r\n}\r\n.counter-container {\r\n  box-sizing: border-box;\r\n  border-radius: min(var(--radius, 0.5rem), 0.5rem);\r\n  background: white;\r\n  border: 1px solid var(--gray-100, #f2f4f7);\r\n  box-shadow:\r\n    0 16px 12px -4px rgba(16, 24, 40, 0.08),\r\n    0 6px 4px -2px rgba(16, 24, 40, 0.03);\r\n}\r\n@media (min-width: 640px) {\r\n  .counter-container {\r\n    width: 250px !important;\r\n  }\r\n}\r\n.popover-trigger {\r\n  box-sizing: border-box;\r\n  gap: 0.875rem;\r\n  background: white;\r\n  border-radius: min(var(--radius, 0.5rem), 0.5rem);\r\n  border: 1px solid var(--gray-300, #d0d5dd);\r\n  display: inline-flex;\r\n  align-items: center;\r\n  padding: 0px 0.875rem;\r\n  width: 100% !important;\r\n  min-width: 13.5rem;\r\n  line-height: 1;\r\n  color: var(--gray-700, #344054);\r\n  cursor: pointer;\r\n  /* height: 3rem; */\r\n}\r\n:host([data-state='error']) .popover-trigger[data-state='opened'],\r\n:host([data-state='error']) .popover-trigger:active,\r\n:host([data-state='error']) .popover-trigger:focus-visible,\r\n:host([data-state='error']) .popover-trigger[data-state='opened'] p,\r\n:host([data-state='error']) .popover-trigger:active p,\r\n:host([data-state='error']) .popover-trigger:focus-visible p,\r\n:host([data-state='error']) .popover-trigger[data-state='opened'] span,\r\n:host([data-state='error']) .popover-trigger:active span,\r\n:host([data-state='error']) .popover-trigger:focus-visible span,\r\n.popover-trigger[data-state='opened'],\r\n.popover-trigger:active,\r\n.popover-trigger:focus-visible {\r\n  border-color: var(--gray-700, #344054);\r\n  color: var(--gray-700, #344054);\r\n}\r\n.popover-trigger p {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.guests {\r\n  width: 100%;\r\n  border-radius: min(var(--radius, 8px), 8px);\r\n  outline: none;\r\n  font-size: 14px;\r\n  line-height: 1.25rem;\r\n  padding-inline-end: 0.75rem;\r\n  color: hsl(215, 16%, 47%);\r\n  text-align: start;\r\n}\r\n.label {\r\n  padding: 0px 14px;\r\n  pointer-events: none;\r\n  transition: all 0.3s ease-in-out;\r\n  color: var(--gray-600, #475467);\r\n  font-size: 0.75rem;\r\n  line-height: 1rem;\r\n  text-align: start;\r\n}\r\n","import localizedWords from '@/stores/localization.store';\r\nimport { calculateInfantNumber } from '@/utils/utils';\r\nimport { Component, Prop, h, Event, EventEmitter, State, Fragment, Method, Watch } from '@stencil/core';\r\nexport type AddAdultsAndChildrenEvent = { adult_nbr: number; child_nbr: number; infant_nbr: number; childrenAges: string[] };\r\n@Component({\r\n  tag: 'ir-adult-child-counter',\r\n  styleUrl: 'ir-adult-child-counter.css',\r\n  shadow: true,\r\n})\r\nexport class IrAdultChildCounter {\r\n  @Prop({ mutable: true }) adultCount = 2;\r\n  @Prop({ mutable: true }) childrenCount = 0;\r\n  @Prop({ mutable: true }) infant_nbr = 0;\r\n  @Prop({ mutable: true }) error: boolean;\r\n  @Prop() minAdultCount = 0;\r\n  @Prop() minChildrenCount = 0;\r\n  @Prop() maxAdultCount = 10;\r\n  @Prop() maxChildrenCount = 10;\r\n  @Prop() childMaxAge: number = 0;\r\n  @Prop() baseChildrenAges: string[] = [];\r\n\r\n  @State() isPopoverOpen: boolean = false;\r\n  @State() childrenAges: string[] = [];\r\n\r\n  @Event()\r\n  addAdultsAndChildren: EventEmitter<AddAdultsAndChildrenEvent>;\r\n\r\n  private popover: HTMLIrPopoverElement;\r\n\r\n  componentWillLoad() {\r\n    this.childrenAges = [...this.baseChildrenAges];\r\n  }\r\n\r\n  @Watch('baseChildrenAges')\r\n  handleBaseChildrenAgesChange(newValue: string[]) {\r\n    this.childrenAges = [...newValue];\r\n  }\r\n  @Method()\r\n  async open() {\r\n    if (this.isPopoverOpen) {\r\n      return;\r\n    }\r\n    this.popover.toggleVisibility();\r\n  }\r\n\r\n  private addChildrenAndAdult() {\r\n    this.error = false;\r\n    this.updateGuestInformation();\r\n    this.validateChildrenAges();\r\n  }\r\n\r\n  private incrementAdultCount() {\r\n    const newValue = this.adultCount + 1;\r\n    if (newValue > this.maxAdultCount) {\r\n      return;\r\n    }\r\n    this.adultCount = newValue;\r\n  }\r\n\r\n  private decrementAdultCount() {\r\n    const newValue = this.adultCount - 1;\r\n    if (newValue < this.minAdultCount) {\r\n      return;\r\n    }\r\n    this.adultCount = newValue;\r\n  }\r\n\r\n  private incrementChildrenCount() {\r\n    const newValue = this.childrenCount + 1;\r\n    if (newValue > this.maxChildrenCount) {\r\n      return;\r\n    }\r\n\r\n    this.childrenAges.push('');\r\n    this.childrenCount = newValue;\r\n  }\r\n\r\n  private decrementChildrenCount() {\r\n    const newValue = this.childrenCount - 1;\r\n    if (newValue < this.minChildrenCount) {\r\n      return;\r\n    }\r\n    this.childrenAges.pop();\r\n    this.childrenCount = newValue;\r\n  }\r\n\r\n  private handlePopoverToggle(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    this.isPopoverOpen = e.detail;\r\n    if (!this.isPopoverOpen) {\r\n      if (this.childrenCount === 0) {\r\n        this.popover.forceClose();\r\n      } else {\r\n        this.validateChildrenAges();\r\n      }\r\n      this.updateGuestInformation();\r\n    }\r\n  }\r\n\r\n  private updateGuestInformation() {\r\n    const infant_nbr = calculateInfantNumber(this.childrenAges);\r\n    const config = {\r\n      adult_nbr: this.adultCount,\r\n      child_nbr: this.childrenCount,\r\n      infant_nbr,\r\n      childrenAges: this.childrenAges,\r\n    };\r\n    console.log(config);\r\n    this.addAdultsAndChildren.emit(config);\r\n  }\r\n  private validateChildrenAges() {\r\n    if (this.childrenAges.some(c => c === '')) {\r\n      this.error = true;\r\n      return;\r\n    }\r\n    this.popover.forceClose();\r\n  }\r\n  private guestTrigger() {\r\n    return (\r\n      <div class=\"popover-trigger w-full sm:w-fit\" slot=\"trigger\" data-state={this.isPopoverOpen ? 'opened' : 'closed'}>\r\n        <ir-icons name=\"user\" svgClassName=\"size-[1.125rem]\"></ir-icons>\r\n        <div class=\"flex h-[3rem] flex-1 flex-col justify-center gap-0.5\">\r\n          <p class=\"label\">{localizedWords.entries.Lcz_Guests}</p>\r\n          <p class={'guests'}>\r\n            {this.adultCount > 0 ? (\r\n              <Fragment>\r\n                <span class={'lowercase'}>\r\n                  {this.adultCount} {this.adultCount === 1 ? localizedWords.entries.Lcz_Adult : localizedWords.entries.Lcz_Adults}\r\n                </span>\r\n                {this.childMaxAge > 0 && (\r\n                  <span class={'lowercase'}>\r\n                    , {this.childrenCount} {this.childrenCount === 1 ? localizedWords.entries.Lcz_Child : localizedWords.entries.Lcz_Children}\r\n                  </span>\r\n                )}\r\n              </Fragment>\r\n            ) : (\r\n              <span class=\"\">{localizedWords.entries.Lcz_Select}...</span>\r\n            )}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  render() {\r\n    console.log(this.childrenAges);\r\n    return (\r\n      <ir-popover\r\n        ref={el => (this.popover = el)}\r\n        allowFlip={false}\r\n        placement=\"bottom-end\"\r\n        autoAdjust={false}\r\n        outsideEvents=\"none\"\r\n        onOpenChange={this.handlePopoverToggle.bind(this)}\r\n      >\r\n        {this.guestTrigger()}\r\n        <div class=\"counter-container  w-full border-0 p-4 pt-14 shadow-none sm:w-auto sm:border sm:pt-4 sm:shadow-sm\" slot=\"popover-content\">\r\n          <div class=\"counter-item\">\r\n            <div>\r\n              <p class=\"main-text\">{localizedWords.entries.Lcz_Adults}</p>\r\n              <p class=\"secondary-text\">\r\n                {localizedWords.entries.Lcz_Age} {this.childMaxAge + 1}+\r\n              </p>\r\n            </div>\r\n            <div class=\"counter-buttons-group\" role=\"group\">\r\n              <ir-button\r\n                iconName=\"minus\"\r\n                disabled={this.adultCount === this.minAdultCount}\r\n                variants=\"icon\"\r\n                onButtonClick={this.decrementAdultCount.bind(this)}\r\n                aria-label=\"Decrease adult count\"\r\n                svgClassName=\"h-[14px] w-[12.25px]\"\r\n              >\r\n                {/* <svg slot=\"btn-icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\r\n                  <path fill=\"currentColor\" d=\"M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z\" />\r\n                </svg> */}\r\n              </ir-button>\r\n              <p class={'text-base'}>{this.adultCount}</p>\r\n              <ir-button\r\n                iconName=\"plus\"\r\n                disabled={this.adultCount === this.maxAdultCount}\r\n                variants=\"icon\"\r\n                onButtonClick={this.incrementAdultCount.bind(this)}\r\n                aria-label=\"Increase adult count\"\r\n                svgClassName=\"h-[14px] w-[12.25px]\"\r\n              >\r\n                {/* <svg slot=\"btn-icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\r\n                  <path\r\n                    fill=\"currentColor\"\r\n                    d=\"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z\"\r\n                  />\r\n                </svg> */}\r\n              </ir-button>\r\n            </div>\r\n          </div>\r\n          {this.childMaxAge > 0 && (\r\n            <div class=\"counter-item\">\r\n              <div>\r\n                <p class=\"main-text\">{localizedWords.entries.Lcz_Children}</p>\r\n                <p class=\"secondary-text\">\r\n                  {localizedWords.entries.Lcz_Age} 0-{this.childMaxAge}\r\n                </p>\r\n              </div>\r\n              <div class=\"counter-buttons-group\" role=\"group\">\r\n                <ir-button\r\n                  disabled={this.childrenCount === this.minChildrenCount}\r\n                  variants=\"icon\"\r\n                  onButtonClick={this.decrementChildrenCount.bind(this)}\r\n                  aria-label=\"Decrease child count\"\r\n                  iconName=\"minus\"\r\n                  svgClassName=\"h-[14px] w-[12.25px]\"\r\n                >\r\n                  {/* <svg slot=\"btn-icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\r\n                  <path fill=\"currentColor\" d=\"M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z\" />\r\n                </svg> */}\r\n                </ir-button>\r\n                <p class={'text-base'}>{this.childrenCount}</p>\r\n                <ir-button\r\n                  disabled={this.childrenCount === this.maxChildrenCount}\r\n                  variants=\"icon\"\r\n                  onButtonClick={this.incrementChildrenCount.bind(this)}\r\n                  aria-label=\"Increase child count\"\r\n                  iconName=\"plus\"\r\n                  svgClassName=\"h-[14px] w-[12.25px]\"\r\n                >\r\n                  {/* <svg slot=\"btn-icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\r\n                  <path\r\n                    fill=\"currentColor\"\r\n                    d=\"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z\"\r\n                  />\r\n                </svg> */}\r\n                </ir-button>\r\n              </div>\r\n            </div>\r\n          )}\r\n          {this.childrenAges?.map((v, i) => (\r\n            <div>\r\n              <ir-select\r\n                addDummyOption\r\n                value={v}\r\n                key={`child_${i}_age`}\r\n                data-state={this.error && v === '' ? 'error' : ''}\r\n                variant=\"double-line\"\r\n                label={`Child ${i + 1} age`}\r\n                onValueChange={e => {\r\n                  const prev = [...this.childrenAges];\r\n                  prev[i] = e.detail.toString();\r\n                  this.childrenAges = [...prev];\r\n                }}\r\n                data={[...Array(this.childMaxAge)].map((_, index) => ({\r\n                  id: index.toString(),\r\n                  value: index === 0 ? localizedWords.entries['Lcz_under1'] : index.toString(),\r\n                }))}\r\n              ></ir-select>\r\n              {this.error && v === '' && <p class={'m-0 p-0 text-xs text-red-500'}>{localizedWords.entries.Lcz_enterchildage}</p>}\r\n            </div>\r\n          ))}\r\n          <ir-button\r\n            onButtonClick={this.addChildrenAndAdult.bind(this)}\r\n            size=\"md\"\r\n            class=\"done-button\"\r\n            label={localizedWords.entries.Lcz_Done}\r\n            aria-label=\"Confirm selection\"\r\n          ></ir-button>\r\n        </div>\r\n      </ir-popover>\r\n    );\r\n  }\r\n}\r\n","import { z } from 'zod';\r\n\r\nexport const ExposedBookingAvailability = z.object({\r\n  propertyid: z.coerce.number(),\r\n  from_date: z.string().min(2),\r\n  to_date: z.string().min(2),\r\n  room_type_ids: z.string().array().optional().default([]),\r\n  adult_nbr: z.number().min(1),\r\n  child_nbr: z.number().min(0),\r\n  infant_nbr: z.number().min(0),\r\n  language: z.string().default('en'),\r\n  currency_ref: z.string(),\r\n  is_in_loyalty_mode: z.boolean().default(false),\r\n  promo_key: z.string(),\r\n  is_in_agent_mode: z.boolean().default(false),\r\n  agent_id: z.number().default(0).optional(),\r\n  is_in_affiliate_mode: z.boolean().default(false),\r\n  affiliate_id: z.number().default(0).optional(),\r\n});\r\n\r\nexport type TExposedBookingAvailability = z.infer<typeof ExposedBookingAvailability>;\r\n","import app_store from '@/stores/app.store';\r\nimport { parseISO, isValid, isAfter, isSameDay, isBefore, format } from 'date-fns';\r\nimport { z } from 'zod';\r\n\r\nexport class QueryStringValidator {\r\n  private errors: string[] = [];\r\n\r\n  private dateSchema = z.string().regex(/^\\d{4}-\\d{2}-\\d{2}$/, {\r\n    message: 'Date must be in YYYY-MM-DD format.',\r\n  });\r\n\r\n  public validateCheckin(checkinStr: string): Date | null {\r\n    this.errors = [];\r\n    try {\r\n      this.dateSchema.parse(checkinStr);\r\n    } catch (e) {\r\n      this.errors.push('Checkin date must be in YYYY-MM-DD format.');\r\n      return null;\r\n    }\r\n\r\n    const checkinDate = parseISO(checkinStr);\r\n    const today = new Date();\r\n\r\n    if (!isValid(checkinDate)) {\r\n      this.errors.push('Checkin date is not a valid date.');\r\n      return null;\r\n    }\r\n    if (isBefore(checkinDate, today) && !isSameDay(checkinDate, today)) {\r\n      this.errors.push('Checkin date must be today or in the future.');\r\n      return null;\r\n    }\r\n    if (app_store.nonBookableNights[checkinStr]) {\r\n      this.errors.push('Checkin date is unavailable.');\r\n      return null;\r\n    }\r\n    return checkinDate;\r\n  }\r\n  public validateAges(str: string) {\r\n    const regex = /^(\\d+_)+\\d+$/;\r\n    return regex.test(str);\r\n  }\r\n  public validateCheckout(checkoutStr: string, checkinDate: Date): Date | null {\r\n    try {\r\n      this.dateSchema.parse(checkoutStr);\r\n    } catch (e) {\r\n      this.errors.push('Checkout date must be in YYYY-MM-DD format.');\r\n      return null;\r\n    }\r\n\r\n    const checkoutDate = parseISO(checkoutStr);\r\n\r\n    if (!isValid(checkoutDate)) {\r\n      this.errors.push('Checkout date is not a valid date.');\r\n      return null;\r\n    }\r\n\r\n    if (!isAfter(checkoutDate, checkinDate)) {\r\n      this.errors.push('Checkout date must be at least one day after checkin date.');\r\n      return null;\r\n    }\r\n\r\n    if (app_store.nonBookableNights[checkoutStr] && app_store.nonBookableNights[format(checkinDate, 'yyyy-MM-dd')]) {\r\n      this.errors.push('Checkout date is unavailable.');\r\n      return null;\r\n    }\r\n    return checkoutDate;\r\n  }\r\n\r\n  public validateAdultCount(adultCount: string) {\r\n    return isNaN(Number(adultCount));\r\n  }\r\n\r\n  public validateChildrenCount(children: string) {\r\n    return isNaN(Number(children));\r\n  }\r\n\r\n  public getErrors(): string[] {\r\n    return this.errors;\r\n  }\r\n}\r\n",".availability-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  background-color: #f3f4f6;\r\n  padding: 1rem;\r\n  border-radius: min(var(--radius, 0.5rem), 0.75rem);\r\n}\r\n.full-width-on-mobile {\r\n  width: 100%;\r\n}\r\n.availability-inputs {\r\n  display: flex;\r\n  width: 100%;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 1rem;\r\n}\r\n\r\n.date-popup,\r\n.adult-child-counter,\r\n.button-container {\r\n  width: 100%;\r\n}\r\n.availability-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  width: 100%;\r\n}\r\n.availability-controls ir-adult-child-counter {\r\n  flex: 1 1 0%;\r\n  width: 100%;\r\n}\r\n\r\n.date-toast .toast-message {\r\n  background-color: #ef4444;\r\n  color: white;\r\n  border-radius: 0.375rem;\r\n  padding: 0.25rem 1.25rem;\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.button-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.hidden-on-mobile {\r\n  display: none;\r\n}\r\n\r\n.full-width-on-mobile {\r\n  display: block;\r\n  width: 100%;\r\n}\r\n\r\n.promotions-container {\r\n  display: flex;\r\n  width: 100%;\r\n  flex-wrap: wrap;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 1rem;\r\n}\r\n.arrow-up {\r\n  width: 0;\r\n  height: 0;\r\n  border-left: 0.6rem solid transparent;\r\n  border-right: 0.6rem solid transparent;\r\n  border-bottom: 0.4rem solid #ef4444;\r\n  position: absolute;\r\n  top: -3.2px;\r\n  animation: tooltipAnimation 300ms ease-out;\r\n}\r\n.arrow-up:dir(rtl) {\r\n  right: 0.625rem;\r\n}\r\n.arrow-up:dir(ltr) {\r\n  left: 0.625rem;\r\n}\r\n.date-toast {\r\n  position: relative;\r\n  animation: tooltipAnimation 300ms ease-out;\r\n}\r\n.availability-inputs.promotions,\r\n.availability-inputs.promotions .adult-child-counter,\r\n.availability-inputs.promotions .date-popup {\r\n  flex: 1 1 0%;\r\n}\r\n@keyframes tooltipAnimation {\r\n  from {\r\n    transform: translateY(4px);\r\n    opacity: 0.6;\r\n  }\r\n}\r\n\r\n/* Media Queries */\r\n@media (min-width: 640px) {\r\n  .availability-container {\r\n    flex-direction: row;\r\n    flex-wrap: wrap;\r\n    justify-content: center;\r\n    gap: 1rem;\r\n  }\r\n\r\n  .availability-inputs {\r\n    flex-direction: row;\r\n    width: auto;\r\n  }\r\n\r\n  .date-popup {\r\n    width: 100%;\r\n  }\r\n  .adult-child-counter,\r\n  .button-container {\r\n    width: auto;\r\n  }\r\n\r\n  .hidden-on-mobile {\r\n    display: block;\r\n  }\r\n\r\n  .full-width-on-mobile {\r\n    display: none;\r\n  }\r\n\r\n  .promotions-container {\r\n    width: auto;\r\n    justify-content: flex-start;\r\n  }\r\n}\r\n@media (min-width: 1024px) {\r\n  .availability-container {\r\n    flex-direction: row;\r\n    flex-wrap: wrap;\r\n    gap: 2rem;\r\n  }\r\n  .availability-container.promotions {\r\n    justify-content: flex-start;\r\n  }\r\n}\r\n@media (min-width: 1280px) {\r\n  .availability-container {\r\n    gap: 4rem;\r\n  }\r\n}\r\n","import { Component, Event, EventEmitter, h, Listen, Prop, State, Watch } from '@stencil/core';\r\nimport { ExposedBookingAvailability, TExposedBookingAvailability } from './availability';\r\nimport { format } from 'date-fns';\r\nimport { ZodError } from 'zod';\r\nimport { onAppDataChange } from '@/stores/app.store';\r\nimport { PropertyService } from '@/services/api/property.service';\r\nimport app_store from '@/stores/app.store';\r\nimport booking_store from '@/stores/booking';\r\nimport { v4 } from 'uuid';\r\nimport { AvailabiltyService } from '@/services/app/availability.service';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport { QueryStringValidator } from '@/validators/querystring.validator';\r\nimport { calculateInfantNumber, modifyQueryParam } from '@/utils/utils';\r\nimport { AddAdultsAndChildrenEvent } from '../ir-adult-child-counter/ir-adult-child-counter';\r\n\r\n@Component({\r\n  tag: 'ir-availibility-header',\r\n  styleUrl: 'ir-availibility-header.css',\r\n  shadow: true,\r\n})\r\nexport class IrAvailibilityHeader {\r\n  @Prop() fromDate: string;\r\n  @Prop() toDate: string;\r\n  @Prop() adultCount: string;\r\n  @Prop() childrenCount: string;\r\n  @Prop() ages: string = '';\r\n\r\n  @State() target: HTMLElement = null;\r\n  @State() isLoading = false;\r\n  @State() childrenAges: string[] = [];\r\n  @State() exposedBookingAvailabiltyParams: TExposedBookingAvailability = {\r\n    adult_nbr: 2,\r\n    child_nbr: 0,\r\n    infant_nbr: 0,\r\n    currency_ref: 'USD',\r\n    language: 'en',\r\n    room_type_ids: [],\r\n    propertyid: 42,\r\n    is_in_loyalty_mode: booking_store.bookingAvailabilityParams.loyalty ? true : !!booking_store.bookingAvailabilityParams.coupon,\r\n    promo_key: booking_store.bookingAvailabilityParams.coupon || '',\r\n    is_in_agent_mode: !!booking_store.bookingAvailabilityParams.agent || false,\r\n    agent_id: booking_store.bookingAvailabilityParams.agent || 0,\r\n  };\r\n\r\n  @Event() resetBooking: EventEmitter<null>;\r\n  @Event() scrollToRoomType: EventEmitter<null>;\r\n\r\n  private errorCause: ('date' | 'adult_child')[] | null = null;\r\n  private popoverInstance = null;\r\n  private toast_timeout: NodeJS.Timeout;\r\n  private identifier: string;\r\n  private personCounter: HTMLIrAdultChildCounterElement;\r\n\r\n  private propertyService = new PropertyService();\r\n  private availabiltyService = new AvailabiltyService();\r\n  private validator = new QueryStringValidator();\r\n\r\n  componentWillLoad() {\r\n    const { property_id } = app_store.app_data;\r\n    this.availabiltyService.subscribe(() => this.disableLoading());\r\n    const validatedFromDate = this.validator.validateCheckin(this.fromDate);\r\n    this.exposedBookingAvailabiltyParams = {\r\n      ...this.exposedBookingAvailabiltyParams,\r\n      adult_nbr: this.setDefaultAdultCount(),\r\n      child_nbr: this.setDefaultChildCount(),\r\n      from_date: validatedFromDate ? this.fromDate : null,\r\n      to_date: this.validator.validateCheckout(this.toDate, validatedFromDate) ? this.toDate : null,\r\n    };\r\n    this.childrenAges = [...Array(this.exposedBookingAvailabiltyParams.child_nbr)].fill('');\r\n\r\n    this.proccessAges();\r\n\r\n    if (booking_store.bookingAvailabilityParams.from_date) {\r\n      this.exposedBookingAvailabiltyParams.from_date = format(booking_store.bookingAvailabilityParams.from_date, 'yyyy-MM-dd');\r\n      this.exposedBookingAvailabiltyParams.to_date = format(booking_store.bookingAvailabilityParams.to_date, 'yyyy-MM-dd');\r\n    }\r\n    if (booking_store.bookingAvailabilityParams.adult_nbr) {\r\n      this.exposedBookingAvailabiltyParams.adult_nbr = booking_store.bookingAvailabilityParams.adult_nbr;\r\n      this.exposedBookingAvailabiltyParams.child_nbr = booking_store.bookingAvailabilityParams.child_nbr;\r\n    }\r\n    console.log(this.validator.getErrors());\r\n    this.changeExposedAvailabilityParams({\r\n      propertyid: property_id,\r\n      language: app_store.userPreferences.language_id,\r\n      currency_ref: app_store.userPreferences.currency_id,\r\n    });\r\n    onAppDataChange('userPreferences', async newValue => {\r\n      this.changeExposedAvailabilityParams({\r\n        language: newValue.language_id,\r\n        currency_ref: newValue.currency_id,\r\n      });\r\n      try {\r\n        if (app_store.currentPage === 'booking') {\r\n          this.resetBooking.emit(null);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    });\r\n    this.recheckAvailability();\r\n  }\r\n\r\n  @Watch('ages')\r\n  handleAgesChange(newValue: string, oldValue: string) {\r\n    if (newValue !== oldValue) {\r\n      this.proccessAges();\r\n    }\r\n  }\r\n\r\n  @Watch('fromDate')\r\n  handleFromDateChange(newValue: string, oldValue: string) {\r\n    if (newValue !== oldValue) {\r\n      if (this.validator.validateCheckin(newValue)) {\r\n        this.exposedBookingAvailabiltyParams = {\r\n          ...this.exposedBookingAvailabiltyParams,\r\n          from_date: newValue,\r\n        };\r\n        if (this.fromDate && this.toDate && !this.validator.validateAdultCount(this.adultCount)) {\r\n          this.checkAvailability();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  @Watch('toDate')\r\n  handleToDateChange(newValue: string, oldValue: string) {\r\n    if (newValue !== oldValue) {\r\n      const validatedFromDate = this.validator.validateCheckin(this.fromDate);\r\n      if (validatedFromDate) {\r\n        if (this.validator.validateCheckout(newValue, validatedFromDate)) {\r\n          this.exposedBookingAvailabiltyParams = {\r\n            ...this.exposedBookingAvailabiltyParams,\r\n            to_date: newValue,\r\n          };\r\n          this.recheckAvailability();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  @Watch('childrenCount')\r\n  handleChildrenCountChange(newValue: string, oldValue: string) {\r\n    if (newValue !== oldValue) {\r\n      if (!this.validator.validateChildrenCount(newValue)) {\r\n        this.exposedBookingAvailabiltyParams = {\r\n          ...this.exposedBookingAvailabiltyParams,\r\n          child_nbr: +newValue,\r\n        };\r\n        this.childrenAges = [...Array(this.exposedBookingAvailabiltyParams.child_nbr)].fill('');\r\n        this.recheckAvailability();\r\n      }\r\n    }\r\n  }\r\n\r\n  @Watch('adultCount')\r\n  handleAdultCountChange(newValue: string, oldValue: string) {\r\n    if (newValue !== oldValue) {\r\n      if (!this.validator.validateAdultCount(newValue)) {\r\n        this.exposedBookingAvailabiltyParams = {\r\n          ...this.exposedBookingAvailabiltyParams,\r\n          adult_nbr: +newValue,\r\n        };\r\n        this.recheckAvailability();\r\n      }\r\n    }\r\n  }\r\n\r\n  @Listen('dateChange')\r\n  handleDateChange(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    const { start, end } = e.detail;\r\n    if (end) {\r\n      this.changeExposedAvailabilityParams({\r\n        from_date: format(start, 'yyyy-MM-dd').toString(),\r\n        to_date: format(end, 'yyyy-MM-dd').toString(),\r\n      });\r\n    } else if (this.exposedBookingAvailabiltyParams.to_date && !end) {\r\n      this.changeExposedAvailabilityParams({\r\n        from_date: format(start, 'yyyy-MM-dd').toString(),\r\n        to_date: null,\r\n      });\r\n    } else {\r\n      this.changeExposedAvailabilityParams({ from_date: format(start, 'yyyy-MM-dd') });\r\n    }\r\n    modifyQueryParam('checkin', this.exposedBookingAvailabiltyParams.from_date);\r\n    modifyQueryParam('checkout', this.exposedBookingAvailabiltyParams.to_date);\r\n  }\r\n\r\n  @Listen('addAdultsAndChildren')\r\n  handleAdultChildChange(e: CustomEvent<AddAdultsAndChildrenEvent>) {\r\n    e.stopPropagation();\r\n    e.stopImmediatePropagation();\r\n    const { adult_nbr, child_nbr, childrenAges, infant_nbr } = e.detail;\r\n    this.childrenAges = [...childrenAges];\r\n    this.changeExposedAvailabilityParams({ adult_nbr, child_nbr, infant_nbr });\r\n    modifyQueryParam('adults', this.exposedBookingAvailabiltyParams.adult_nbr?.toString());\r\n    modifyQueryParam('children', this.exposedBookingAvailabiltyParams.child_nbr?.toString());\r\n    if (infant_nbr) {\r\n      modifyQueryParam('ages', encodeURIComponent(childrenAges.join('_')));\r\n    }\r\n  }\r\n\r\n  private setDefaultAdultCount() {\r\n    if (this.validator.validateAdultCount(this.adultCount)) {\r\n      return 2;\r\n    }\r\n    const adCountNumber = Number(this.adultCount);\r\n    return adCountNumber > app_store.property.adult_child_constraints.adult_max_nbr ? app_store.property.adult_child_constraints.adult_max_nbr : adCountNumber;\r\n  }\r\n\r\n  private setDefaultChildCount() {\r\n    if (this.validator.validateChildrenCount(this.childrenCount)) {\r\n      return 0;\r\n    }\r\n    const childCountNumber = Number(this.childrenCount);\r\n    return childCountNumber > app_store.property.adult_child_constraints.child_max_nbr ? app_store.property.adult_child_constraints.child_max_nbr : childCountNumber;\r\n  }\r\n\r\n  private disableLoading() {\r\n    if (this.isLoading) {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n\r\n  private recheckAvailability() {\r\n    if (!this.fromDate || !this.toDate || !this.adultCount) {\r\n      return;\r\n    }\r\n    const isValidFromDate = this.validator.validateCheckin(this.fromDate);\r\n    const isValidToDate = this.validator.validateCheckout(this.toDate, isValidFromDate);\r\n    const isValidAdultCount = this.validator.validateAdultCount(this.adultCount);\r\n    if (!isValidAdultCount && isValidFromDate && isValidToDate) {\r\n      this.checkAvailability();\r\n    }\r\n  }\r\n\r\n  private proccessAges() {\r\n    if (this.exposedBookingAvailabiltyParams.child_nbr === 0) {\r\n      return;\r\n    }\r\n    if (this.validator.validateAges(this.ages)) {\r\n      const ages = this.ages.split('_');\r\n      ages.slice(0, this.adultCount.length + 1).forEach((age, index) => {\r\n        this.childrenAges[index] = age.toString();\r\n      });\r\n      const infant_nbr = calculateInfantNumber(this.childrenAges);\r\n      this.exposedBookingAvailabiltyParams = {\r\n        ...this.exposedBookingAvailabiltyParams,\r\n        infant_nbr,\r\n      };\r\n    }\r\n    if (this.exposedBookingAvailabiltyParams.child_nbr > 0 && this.childrenAges.some(c => c === '')) {\r\n      setTimeout(() => {\r\n        this.personCounter?.open();\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  private async checkAvailability() {\r\n    const params = ExposedBookingAvailability.parse(this.exposedBookingAvailabiltyParams);\r\n    if (app_store.app_data.injected) {\r\n      const { from_date, to_date, adult_nbr, child_nbr, infant_nbr } = params;\r\n      const fromDate = `checkin=${from_date}`;\r\n      const toDate = `checkout=${to_date}`;\r\n      const adults = `adults=${adult_nbr}`;\r\n      const children = child_nbr > 0 ? `children=${child_nbr}` : '';\r\n      const affiliate = app_store.app_data.affiliate ? `aff=${app_store.app_data.affiliate.afname}` : '';\r\n      const currency = `cur=${app_store.userPreferences.currency_id}`;\r\n      const language = `lang=${app_store.userPreferences.language_id}`;\r\n      const loyalty = booking_store.bookingAvailabilityParams.loyalty ? 'loyalty=true' : '';\r\n      const promo_key = booking_store.bookingAvailabilityParams.coupon ? `promo=${booking_store.bookingAvailabilityParams.coupon}` : '';\r\n      const agent = booking_store.bookingAvailabilityParams.agent ? `agent=${booking_store.bookingAvailabilityParams.agent}` : '';\r\n      const ages = infant_nbr > 0 && !this.childrenAges.every(c => c === '') ? `ages=${this.childrenAges.join('_')}` : '';\r\n      const queryParams = [fromDate, toDate, adults, ages, children, affiliate, language, currency, loyalty, promo_key, agent];\r\n      const queryString = queryParams.filter(param => param !== '').join('&');\r\n\r\n      return (location.href = `https://${app_store.property.perma_link}.bookingmystay.com?${queryString}`);\r\n    }\r\n\r\n    if (this.childrenAges.length > 0 && this.childrenAges.some(c => c === '') && this.exposedBookingAvailabiltyParams.child_nbr > 0) {\r\n      if (!this.errorCause) {\r\n        this.errorCause = [];\r\n      }\r\n      console.log('error');\r\n      this.errorCause.push('adult_child');\r\n      return;\r\n    }\r\n    this.identifier = v4();\r\n    this.availabiltyService.initSocket(this.identifier);\r\n    booking_store.bookingAvailabilityParams = {\r\n      ...booking_store.bookingAvailabilityParams,\r\n      from_date: new Date(params.from_date),\r\n      to_date: new Date(params.to_date),\r\n      adult_nbr: params.adult_nbr,\r\n      child_nbr: params.child_nbr - params.infant_nbr,\r\n      infant_nbr: params.infant_nbr,\r\n    };\r\n    this.scrollToRoomType.emit(null);\r\n    await this.propertyService.getExposedBookingAvailability({\r\n      params: {\r\n        ...this.exposedBookingAvailabiltyParams,\r\n        child_nbr: this.exposedBookingAvailabiltyParams.child_nbr - this.exposedBookingAvailabiltyParams.infant_nbr,\r\n        promo_key: booking_store.bookingAvailabilityParams.coupon || '',\r\n        is_in_agent_mode: !!booking_store.bookingAvailabilityParams.agent || false,\r\n        agent_id: booking_store.bookingAvailabilityParams.agent || 0,\r\n        is_in_loyalty_mode: booking_store.bookingAvailabilityParams.loyalty ? true : !!booking_store.bookingAvailabilityParams.coupon,\r\n        is_in_affiliate_mode: !!app_store.app_data.affiliate,\r\n        affiliate_id: app_store.app_data.affiliate ? app_store.app_data.affiliate.id : null,\r\n      },\r\n      identifier: this.identifier,\r\n      mode: 'default',\r\n    });\r\n    app_store.fetchedBooking = true;\r\n  }\r\n\r\n  private async handleCheckAvailability() {\r\n    try {\r\n      this.isLoading = true;\r\n      await this.checkAvailability();\r\n    } catch (error) {\r\n      if (error instanceof ZodError) {\r\n        console.log(error.errors);\r\n        for (const err of error.errors) {\r\n          if (!this.errorCause) {\r\n            this.errorCause = [];\r\n          }\r\n          const error_cause = err.path[0].toString();\r\n\r\n          if (error_cause.includes('date') && !this.errorCause.find(c => c === 'date')) {\r\n            this.errorCause.push('date');\r\n          }\r\n          if (error_cause.includes('nbr')) {\r\n            this.errorCause.push('adult_child');\r\n          }\r\n        }\r\n      }\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n\r\n  private changeExposedAvailabilityParams(params: Partial<TExposedBookingAvailability>) {\r\n    this.exposedBookingAvailabiltyParams = {\r\n      ...this.exposedBookingAvailabiltyParams,\r\n      ...params,\r\n    };\r\n  }\r\n\r\n  private shouldRenderErrorToast() {\r\n    // Check for date-related errors\r\n    if (this.errorCause?.find(c => c === 'date') !== undefined) {\r\n      // Both dates must be present to clear the error\r\n      if (this.exposedBookingAvailabiltyParams.from_date && this.exposedBookingAvailabiltyParams.to_date) {\r\n        this.errorCause = this.errorCause?.filter(c => c !== 'date');\r\n      }\r\n    }\r\n\r\n    // Check for adult/child count related errors\r\n    if (this.errorCause?.find(c => c === 'adult_child')) {\r\n      // There must be at least one adult to clear the error\r\n      if (this.exposedBookingAvailabiltyParams.adult_nbr > 0 && this.childrenAges.every(c => c !== '')) {\r\n        this.errorCause = this.errorCause?.filter(c => c !== 'adult_child');\r\n      }\r\n    }\r\n    return this.errorCause?.length > 0;\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    if (this.popoverInstance) {\r\n      this.popoverInstance.destroy();\r\n    }\r\n    if (this.toast_timeout) {\r\n      clearTimeout(this.toast_timeout);\r\n    }\r\n    this.availabiltyService.unsubscribe(() => this.disableLoading());\r\n    this.availabiltyService.disconnectSocket();\r\n  }\r\n\r\n  render() {\r\n    this.shouldRenderErrorToast();\r\n    const show_loyalty = app_store.property?.promotions?.some(p => p.is_loyalty);\r\n    const show_coupon = app_store.property?.promotions?.some(p => p.is_loyalty);\r\n    const showPromotions = app_store?.property?.promotions && (show_coupon || show_loyalty);\r\n    return (\r\n      <div class={`availability-container ${showPromotions ? 'promotions' : ''} xl:text-cyan-50`}>\r\n        <div class={`availability-inputs ${showPromotions ? 'promotions' : ''}`}>\r\n          <ir-date-popup\r\n            data-state={this.errorCause?.find(c => c === 'date') ? 'error' : ''}\r\n            dates={{\r\n              start: this.exposedBookingAvailabiltyParams?.from_date ? new Date(this.exposedBookingAvailabiltyParams.from_date) : null,\r\n              end: this.exposedBookingAvailabiltyParams?.to_date ? new Date(this.exposedBookingAvailabiltyParams.to_date) : null,\r\n            }}\r\n            class=\"date-popup\"\r\n          ></ir-date-popup>\r\n          {/* <div class=\"availability-controls\"> */}\r\n          <ir-adult-child-counter\r\n            infant_nbr={this.exposedBookingAvailabiltyParams.infant_nbr}\r\n            error={!!this.errorCause?.find(c => c === 'adult_child')}\r\n            data-state={this.errorCause?.find(c => c === 'adult_child') ? 'error' : ''}\r\n            adultCount={this.exposedBookingAvailabiltyParams.adult_nbr}\r\n            childrenCount={this.exposedBookingAvailabiltyParams.child_nbr}\r\n            minAdultCount={0}\r\n            maxAdultCount={app_store.property.adult_child_constraints.adult_max_nbr}\r\n            maxChildrenCount={app_store.property.adult_child_constraints.child_max_nbr}\r\n            childMaxAge={app_store.property.adult_child_constraints.child_max_age}\r\n            class=\"adult-child-counter\"\r\n            ref={el => (this.personCounter = el)}\r\n            baseChildrenAges={this.childrenAges}\r\n          ></ir-adult-child-counter>\r\n          <div class={'hidden sm:block'}>\r\n            <ir-button\r\n              isLoading={this.isLoading}\r\n              onButtonClick={e => {\r\n                e.stopImmediatePropagation();\r\n                e.stopPropagation();\r\n                this.handleCheckAvailability();\r\n              }}\r\n              size=\"pill\"\r\n              variants=\"icon-primary\"\r\n              iconName=\"search\"\r\n              label=\"Check availability\"\r\n            ></ir-button>\r\n          </div>\r\n          {/* </div> */}\r\n          <div class=\"full-width-on-mobile sm:hidden\">\r\n            <ir-button\r\n              isLoading={this.isLoading}\r\n              onButtonClick={e => {\r\n                e.stopImmediatePropagation();\r\n                e.stopPropagation();\r\n                this.handleCheckAvailability();\r\n              }}\r\n              size=\"md\"\r\n              label={localizedWords.entries.Lcz_Search}\r\n              buttonStyles={{ width: '100%' }}\r\n            ></ir-button>\r\n          </div>\r\n        </div>\r\n\r\n        {app_store?.property?.promotions && (\r\n          <div class=\"promotions-container\">\r\n            <ir-coupon-dialog class=\"coupon-dialog\"></ir-coupon-dialog>\r\n            <ir-loyalty class=\"loyalty\"></ir-loyalty>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  --ir-dialog-max-width: 27rem;\r\n}\r\n.title {\r\n  height: 32px;\r\n  flex-grow: 0;\r\n  font-size: 16px;\r\n  font-stretch: normal;\r\n  font-style: normal;\r\n  line-height: 1.33;\r\n  letter-spacing: normal;\r\n  color: #101828;\r\n}\r\n.Supporting-text {\r\n  height: 24px;\r\n  align-self: stretch;\r\n  flex-grow: 0;\r\n  font-size: 14px;\r\n  font-weight: normal;\r\n  font-stretch: normal;\r\n  font-style: normal;\r\n  line-height: 1.5;\r\n  letter-spacing: normal;\r\n  color: #475467;\r\n}\r\n.coupon-container {\r\n  display: flex;\r\n  width: 100%;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 1rem;\r\n}\r\n\r\n.coupon-button {\r\n  width: 100%;\r\n}\r\n\r\n.coupon-button-wide {\r\n  width: fit-content;\r\n}\r\n\r\n.coupon-applied {\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 0.875rem;\r\n  color: hsl(var(--brand-600));\r\n}\r\n\r\n.icon-remove {\r\n  color: hsl(var(--brand-600));\r\n}\r\n\r\n.coupon-form {\r\n  padding: 1rem 1rem 0;\r\n}\r\n\r\n@media (min-width: 640px) {\r\n  .coupon-form {\r\n    padding: 1.5rem 1.5rem 0;\r\n  }\r\n}\r\n\r\n.error-message {\r\n  color: #f56565;\r\n}\r\n\r\n.footer-buttons {\r\n  padding: 1.5rem 0;\r\n  display: flex;\r\n  flex-direction: column-reverse;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.button-cancel {\r\n  width: 100%;\r\n}\r\n\r\n.button-apply {\r\n  width: 100%;\r\n}\r\n\r\n@media (min-width: 768px) {\r\n  .footer-buttons {\r\n    padding: 1.5rem 0;\r\n    flex-direction: row;\r\n    justify-content: flex-end;\r\n  }\r\n  .button-cancel {\r\n    width: fit-content;\r\n  }\r\n}\r\n\r\n@media (min-width: 768px) {\r\n  .button-apply {\r\n    width: fit-content;\r\n  }\r\n}\r\n","import app_store from '@/stores/app.store';\r\nimport booking_store, { modifyBookingStore } from '@/stores/booking';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport { cn, validateCoupon } from '@/utils/utils';\r\nimport { Component, Fragment, h, State, Event, EventEmitter } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-coupon-dialog',\r\n  styleUrl: 'ir-coupon-dialog.css',\r\n  shadow: true,\r\n})\r\nexport class IrCouponDialog {\r\n  @State() coupon: string;\r\n  @State() validationMessage: { error: boolean; message: string };\r\n  @State() isValid = false;\r\n\r\n  @Event() resetBooking: EventEmitter<string>;\r\n\r\n  dialogRef: HTMLIrDialogElement;\r\n\r\n  activateCoupon() {\r\n    this.validationMessage = null;\r\n    if (!validateCoupon(this.coupon)) {\r\n      return (this.validationMessage = { error: true, message: localizedWords.entries.Lcz_InvalidAgentCode });\r\n    }\r\n    this.isValid = true;\r\n    this.validationMessage = { error: false, message: this.coupon };\r\n    this.resetBooking.emit('partialReset');\r\n    this.coupon = null;\r\n    this.dialogRef.closeModal();\r\n  }\r\n\r\n  removeCoupon() {\r\n    this.isValid = false;\r\n    this.validationMessage = null;\r\n    modifyBookingStore('bookingAvailabilityParams', {\r\n      ...booking_store.bookingAvailabilityParams,\r\n      coupon: null,\r\n      loyalty: false,\r\n    });\r\n    this.resetBooking.emit('partialReset');\r\n  }\r\n\r\n  render() {\r\n    const showCoupon = app_store.property?.promotions?.some(p => p.key !== '');\r\n    if (!showCoupon || booking_store.bookingAvailabilityParams.loyalty) {\r\n      return null;\r\n    }\r\n    if (!!booking_store.bookingAvailabilityParams.coupon) {\r\n      return (\r\n        <div class=\"coupon-applied\">\r\n          <p onClick={this.removeCoupon.bind(this)}>{localizedWords.entries.Lcz_DiscountApplied}</p>\r\n          <ir-button\r\n            aria-label=\"remove coupon\"\r\n            iconName=\"xmark\"\r\n            variants=\"icon\"\r\n            class=\"icon-remove\"\r\n            svgClassName=\"text-[hsl(var(--brand-600))]\"\r\n            onButtonClick={this.removeCoupon.bind(this)}\r\n          >\r\n            {/* <ir-icons slot=\"btn-icon\" title=\"remove coupon\" name=\"xmark\" ></ir-icons> */}\r\n          </ir-button>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <Fragment>\r\n        <ir-button\r\n          class={cn('coupon-button', {\r\n            'coupon-button-wide': !!booking_store.bookingAvailabilityParams.coupon,\r\n          })}\r\n          onButtonClick={() => this.dialogRef.openModal()}\r\n          variants=\"outline\"\r\n          label={localizedWords.entries.Lcz_HaveCoupon}\r\n          haveLeftIcon\r\n        >\r\n          <ir-icons slot=\"left-icon\" name=\"coupon\"></ir-icons>\r\n        </ir-button>\r\n        <ir-dialog\r\n          ref={el => (this.dialogRef = el)}\r\n          onOpenChange={e => {\r\n            e.stopImmediatePropagation();\r\n            e.stopPropagation();\r\n            if (!e.detail) {\r\n              this.coupon = '';\r\n              this.validationMessage = null;\r\n            }\r\n          }}\r\n        >\r\n          <form\r\n            onSubmit={e => {\r\n              e.preventDefault();\r\n              this.activateCoupon();\r\n            }}\r\n            class=\"coupon-form\"\r\n            slot=\"modal-body\"\r\n          >\r\n            <h1 class=\"title\">{localizedWords.entries.Lcz_HaveCoupon}</h1>\r\n            <ir-input\r\n              error={this.validationMessage?.error}\r\n              onTextChanged={e => (this.coupon = e.detail)}\r\n              autofocus\r\n              inputId=\"booking_code\"\r\n              placeholder={localizedWords.entries.Lcz_EnterYourCouponCode}\r\n              value={this.coupon}\r\n              mode=\"default\"\r\n            ></ir-input>\r\n            {this.validationMessage?.error && <p class=\"error-message\">{this.validationMessage.message}</p>}\r\n            <div class=\"footer-buttons\">\r\n              <ir-button\r\n                size=\"md\"\r\n                onButtonClick={() => {\r\n                  this.dialogRef.closeModal();\r\n                  this.coupon = '';\r\n                }}\r\n                variants=\"outline\"\r\n                label={localizedWords.entries.Lcz_Cancel}\r\n                class=\"button-cancel\"\r\n                type=\"button\"\r\n              ></ir-button>\r\n              <ir-button type=\"submit\" size=\"md\" label={localizedWords.entries.Lcz_Apply} class=\"button-apply\"></ir-button>\r\n            </div>\r\n          </form>\r\n        </ir-dialog>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n:host([data-state='error']) .popover-trigger {\r\n  border-color: var(--error-500, #f04438);\r\n  transition: all 300ms ease-in-out;\r\n  color: var(--error-500, #f04438);\r\n}\r\n:host([data-state='error']) .popover-trigger .label,\r\n:host([data-state='error']) .popover-trigger .dates span {\r\n  transition: all 300ms ease-in-out;\r\n  color: var(--error-500, #f04438);\r\n}\r\n.date-range-container {\r\n  box-sizing: border-box;\r\n  border-radius: 0.5rem;\r\n  z-index: 99999999;\r\n  background: white;\r\n  height: 78vh;\r\n  border: 1px solid var(--gray-100, #f2f4f7);\r\n  box-shadow:\r\n    0 16px 12px -4px rgba(16, 24, 40, 0.08),\r\n    0 6px 4px -2px rgba(16, 24, 40, 0.03);\r\n}\r\n.popover-trigger {\r\n  box-sizing: border-box;\r\n  gap: 0.875rem;\r\n  background: white;\r\n  border-radius: min(var(--radius, 8px), 8px);\r\n  border: 1px solid var(--gray-300, #d0d5dd);\r\n  display: inline-flex;\r\n  align-items: center;\r\n  padding: 0px 0.875rem;\r\n  /* min-width: max-content; */\r\n  min-width: 13.8rem;\r\n  line-height: 1;\r\n  color: var(--gray-700, #344054);\r\n  cursor: pointer;\r\n  /* width: fit-content; */\r\n  width: 100% !important;\r\n  /* height: 3rem; */\r\n}\r\n:host([data-state='error']) .popover-trigger[data-state='opened'],\r\n:host([data-state='error']) .popover-trigger:active,\r\n:host([data-state='error']) .popover-trigger:focus-visible,\r\n:host([data-state='error']) .popover-trigger[data-state='opened'] .label,\r\n:host([data-state='error']) .popover-trigger:active .label,\r\n:host([data-state='error']) .popover-trigger:focus-visible .label,\r\n:host([data-state='error']) .popover-trigger[data-state='opened'] .dates span,\r\n:host([data-state='error']) .popover-trigger:active .dates span,\r\n:host([data-state='error']) .popover-trigger:focus-visible .dates span,\r\n.popover-trigger[data-state='opened'],\r\n.popover-trigger:active,\r\n.popover-trigger:focus-visible {\r\n  border-color: var(--gray-700, 206, 100%, 76%);\r\n  color: var(--gray-700, #344054);\r\n}\r\n\r\n.popover-trigger p {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.date {\r\n  padding-top: 6px !important;\r\n  color: var(--gray-600);\r\n  font-size: 0.875rem !important;\r\n  font-weight: 400;\r\n}\r\n.label {\r\n  padding: 0px 14px;\r\n  pointer-events: none;\r\n  transition: all 0.3s ease-in-out;\r\n  color: var(--gray-600, #475467);\r\n  font-size: 0.75rem;\r\n  line-height: 1rem;\r\n  text-align: start;\r\n}\r\n.dates {\r\n  width: 100%;\r\n  border-radius: min(var(--radius, 8px), 8px);\r\n  outline: none;\r\n  font-size: 14px;\r\n  line-height: 1.25rem;\r\n  padding-inline-end: 0.75rem;\r\n  text-align: start;\r\n}\r\n@media (min-width: 640px) {\r\n  .date-range-container {\r\n    height: 21.25rem;\r\n  }\r\n}\r\n@media (min-width: 1200px) {\r\n  .date-range-container {\r\n    height: 24.5rem;\r\n  }\r\n}\r\n","import app_store from '@/stores/app.store';\r\nimport localization_store from '@/stores/app.store';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport { Component, Host, h, Element, Prop, Watch, State, Event, EventEmitter } from '@stencil/core';\r\nimport { addDays, format } from 'date-fns';\r\n@Component({\r\n  tag: 'ir-date-popup',\r\n  styleUrl: 'ir-date-popup.css',\r\n  shadow: true,\r\n})\r\nexport class IrDatePopup {\r\n  @Prop() dates: { start: Date | null; end: Date | null } = {\r\n    start: null,\r\n    end: null,\r\n  };\r\n  @State() isPopoverOpen = false;\r\n  @Element() el: HTMLIrDatePopupElement;\r\n\r\n  private popover: HTMLIrPopoverElement;\r\n  private minDate: Date = addDays(new Date(), 0);\r\n  @Event() dateChange: EventEmitter<{ start: Date | null; end: Date | null }>;\r\n\r\n  @Watch('dates')\r\n  handleDatesChange() {\r\n    if (this.dates.end && this.isPopoverOpen) {\r\n      this.popover.toggleVisibility();\r\n    }\r\n  }\r\n  componentWillLoad() {\r\n    this.minDate.setHours(0, 0, 0, 0);\r\n  }\r\n  dateTrigger() {\r\n    return (\r\n      <div class=\"popover-trigger relative w-full sm:w-fit\" slot=\"trigger\" data-state={this.isPopoverOpen ? 'opened' : 'closed'}>\r\n        <ir-icons name=\"calendar\" svgClassName=\"size-[18px]\"></ir-icons>\r\n        <div class=\"flex h-[3rem] flex-1 flex-col justify-center gap-0.5\">\r\n          {/* <div>\r\n            <p class=\"text-xs\">Check in</p>\r\n            <p class={'date'}>\r\n              {this.dates.start ? format(this.dates.start, 'MMM dd', { locale: localization_store.selectedLocale }) : <span class=\"text-slate-500\">Add date</span>}\r\n            </p>\r\n          </div>\r\n          <div class=\"flex items-end  h-full\">\r\n            <ir-icons name=\"minus\" svgClassName=\"h-3 w-5 md:w-3\"></ir-icons>\r\n          </div>\r\n          <div>\r\n            <p class=\"text-xs\">Check out</p>\r\n            <p class=\"date\">{this.dates.end ? format(this.dates.end, 'MMM dd', { locale: localization_store.selectedLocale }) : <span class=\"text-slate-500\">Add date</span>}</p>\r\n          </div> */}\r\n          <p class=\"label\">{localizedWords.entries.Lcz_Dates}</p>\r\n          <div class=\"dates\">\r\n            {this.dates.start ? (\r\n              format(this.dates.start, 'MMM dd', { locale: localization_store.selectedLocale })\r\n            ) : (\r\n              <span class=\"text-slate-500\">{localizedWords.entries.Lcz_CheckIn}</span>\r\n            )}\r\n            <span> - </span>\r\n            {this.dates.end ? (\r\n              format(this.dates.end, 'MMM dd', { locale: localization_store.selectedLocale })\r\n            ) : (\r\n              <span class=\"text-slate-500\">{localizedWords.entries.Lcz_CheckOut}</span>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <ir-popover\r\n          showCloseButton={false}\r\n          placement=\"bottom-start\"\r\n          ref={el => (this.popover = el)}\r\n          onOpenChange={e => {\r\n            this.isPopoverOpen = e.detail;\r\n            if (!this.isPopoverOpen && !this.dates.end && this.dates.start) {\r\n              this.dateChange.emit({ ...this.dates, end: addDays(this.dates.start, 1) });\r\n            }\r\n          }}\r\n        >\r\n          {this.dateTrigger()}\r\n          <div slot=\"popover-content\" class=\"date-range-container w-full border-0 p-4 pb-6 shadow-none sm:w-auto sm:border sm:p-4 sm:shadow-sm  \">\r\n            <ir-date-range\r\n              dateModifiers={this.getDateModifiers()}\r\n              fromDate={this.dates.start}\r\n              toDate={this.dates.end}\r\n              locale={localization_store.selectedLocale}\r\n              maxSpanDays={app_store.property.max_nights}\r\n              minDate={this.minDate}\r\n            ></ir-date-range>\r\n          </div>\r\n        </ir-popover>\r\n      </Host>\r\n    );\r\n  }\r\n  private getDateModifiers() {\r\n    if (!Object.keys(app_store.nonBookableNights).length) {\r\n      return undefined;\r\n    }\r\n    const nights = {};\r\n    Object.keys(app_store?.nonBookableNights)?.forEach(nbn => {\r\n      nights[nbn] = {\r\n        disabled: true,\r\n      };\r\n    });\r\n    return nights;\r\n  }\r\n}\r\n","@import url('../../../gloabls.css');\r\n:host {\r\n  display: block;\r\n}\r\n.facilities-container {\r\n  border-radius: min(var(--radius, 0.5rem), 0.75rem);\r\n}\r\n.property_amenities {\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-wrap: wrap;\r\n  gap: 1rem;\r\n}\r\n@media (min-width: 768px) {\r\n  .property_amenities {\r\n    flex-direction: row;\r\n    align-items: flex-start;\r\n    justify-content: space-between;\r\n    gap: 2rem;\r\n  }\r\n  .property_amenities[data-total='2'] {\r\n    justify-content: flex-start;\r\n  }\r\n}\r\n@media (min-width: 1024px) {\r\n  .property_amenities {\r\n    gap: 2.5rem /* 40px */;\r\n  }\r\n}\r\n","import app_store from '@/stores/app.store';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport { formatAmount } from '@/utils/utils';\r\nimport { Component, Host, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-facilities',\r\n  styleUrl: 'ir-facilities.css',\r\n  shadow: true,\r\n})\r\nexport class IrFacilities {\r\n  private getTotalAmenities() {\r\n    const set = new Set<string>();\r\n    app_store.property?.amenities?.forEach(a => {\r\n      if (a.amenity_type !== 'room') {\r\n        set.add(a.amenity_type);\r\n      }\r\n    });\r\n    return set.size;\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"facilities-container space-y-5 bg-gray-100 p-6\">\r\n          <div class=\"flex  items-center gap-4\">\r\n            <ir-icons name=\"clock\"></ir-icons>\r\n            {app_store.property?.time_constraints.check_in_from && app_store.property?.time_constraints.check_in_till && (\r\n              <p>\r\n                {localizedWords.entries.Lcz_CheckInFromUntil.replace('%1', app_store.property?.time_constraints.check_in_from).replace(\r\n                  '%2',\r\n                  app_store.property?.time_constraints.check_in_till,\r\n                )}\r\n                {/* Check-in: from {app_store.property?.time_constraints.check_in_from} until {app_store.property?.time_constraints.check_in_till} */}\r\n              </p>\r\n            )}\r\n            <p>\r\n              {localizedWords.entries.Lcz_CheckOut}:{app_store.property?.time_constraints.check_out_till}\r\n            </p>\r\n          </div>\r\n          {app_store.property?.internet_offering.public_internet_statement && (\r\n            <div class=\"flex items-center gap-4\">\r\n              <ir-icons name=\"wifi\"></ir-icons>\r\n              <p>\r\n                {localizedWords.entries.Lcz_PublicAreas}: <span class=\"text-[var(--ir-green)]\">{app_store.property?.internet_offering.public_internet_statement}</span>\r\n              </p>\r\n              {app_store.property?.internet_offering.is_room_internet_free && (\r\n                <p>\r\n                  {localizedWords.entries.Lcz_Rooms}: <span class=\"text-[var(--ir-green)]\">{localizedWords.entries.Lcz_FreeInternet}</span>\r\n                </p>\r\n              )}\r\n            </div>\r\n          )}\r\n          {app_store.property?.parking_offering.title && (\r\n            <div class=\"flex items-center gap-4\">\r\n              <ir-icons name=\"car\"></ir-icons>\r\n              <p>\r\n                {app_store.property?.parking_offering.title}{' '}\r\n                {Number(app_store.property?.parking_offering.pricing) > 0 && (\r\n                  <span>\r\n                    {localizedWords.entries.Lcz_At} {formatAmount(app_store.property?.parking_offering.pricing, app_store.userPreferences.currency_id)}\r\n                  </span>\r\n                )}\r\n              </p>\r\n            </div>\r\n          )}\r\n          {app_store.property?.pets_acceptance.title && (\r\n            <div class=\"flex items-center gap-4\">\r\n              <ir-icons name=\"pets\"></ir-icons>\r\n              <p>{app_store.property?.pets_acceptance.title}</p>\r\n            </div>\r\n          )}\r\n          {app_store.property?.baby_cot_offering.title && (\r\n            <div class=\"flex items-center gap-4\">\r\n              <ir-icons name=\"bed\"></ir-icons>\r\n              <p>{app_store.property?.baby_cot_offering.title}</p>\r\n            </div>\r\n          )}\r\n          {app_store.property?.amenities.some(a => !['property', 'activity', 'service'].includes(a.amenity_type)) && (\r\n            <div class=\"property_amenities\" data-total={this.getTotalAmenities()}>\r\n              {/* hotel */}\r\n              {app_store.property?.amenities.some(a => a.amenity_type === 'property') && (\r\n                <div class=\"flex gap-4 \">\r\n                  <ir-icons name=\"home\"></ir-icons>\r\n                  <ul>\r\n                    <li class=\"text-start font-medium\">{localizedWords.entries.Lcz_PropertyFacilities}</li>\r\n                    {app_store.property?.amenities.map(aminity => {\r\n                      if (aminity.amenity_type !== 'property') {\r\n                        return null;\r\n                      }\r\n                      return (\r\n                        <li key={aminity.code} class=\"text-start\">\r\n                          {aminity.description}\r\n                        </li>\r\n                      );\r\n                    })}\r\n                  </ul>\r\n                </div>\r\n              )}\r\n              {app_store.property?.amenities.some(a => a.amenity_type === 'activity') && (\r\n                <div class=\"flex gap-4\">\r\n                  <ir-icons name=\"football\"></ir-icons>\r\n                  <ul>\r\n                    <li class=\"text-start font-medium\">{localizedWords.entries.Lcz_Activities}</li>\r\n                    {app_store.property?.amenities.map(aminity => {\r\n                      if (aminity.amenity_type !== 'activity') {\r\n                        return null;\r\n                      }\r\n                      return (\r\n                        <li class=\"text-start\" key={aminity.code}>\r\n                          {aminity.description}\r\n                        </li>\r\n                      );\r\n                    })}\r\n                  </ul>\r\n                </div>\r\n              )}\r\n              {app_store.property?.amenities.some(a => a.amenity_type === 'service') && (\r\n                <div class=\"flex gap-4 \">\r\n                  <ir-icons name=\"bell\"></ir-icons>\r\n                  <ul>\r\n                    <li class=\"text-start font-medium\">{localizedWords.entries.Lcz_Services}</li>\r\n                    {app_store.property?.amenities.map(aminity => {\r\n                      if (aminity.amenity_type !== 'service') {\r\n                        return null;\r\n                      }\r\n                      return (\r\n                        <li class=\"text-start\" key={aminity.code}>\r\n                          {aminity.description}\r\n                        </li>\r\n                      );\r\n                    })}\r\n                  </ul>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n          {app_store.property?.description.food_and_beverage && (\r\n            <div class=\"flex items-center gap-4\">\r\n              {/* utencils */}\r\n              <ir-icons name=\"utencils\"></ir-icons>\r\n              <p>\r\n                <span class=\"font-medium\">{localizedWords.entries['Lcz_FoodAndbeverage:']} </span>\r\n                <span innerHTML={app_store.property?.description.food_and_beverage}></span>\r\n              </p>\r\n            </div>\r\n          )}\r\n          {app_store.property?.allowed_cards?.length > 0 && (\r\n            <div class=\"flex items-center gap-4\">\r\n              {/* credit card */}\r\n              <ir-icons name=\"credit_card\"></ir-icons>\r\n              <p>\r\n                <span class=\"font-medium\">{localizedWords.entries.Lcz_AcceptedCreditCards} </span>\r\n                {app_store.property?.allowed_cards.map((card, index) => {\r\n                  return (\r\n                    <span key={card.id}>\r\n                      {card.name}\r\n                      {index < app_store.property?.allowed_cards.length - 1 && <span> - </span>}\r\n                    </span>\r\n                  );\r\n                })}\r\n              </p>\r\n            </div>\r\n          )}\r\n          {/* TODO: add the cancelation and guarentee */}\r\n          {/* <div class=\"flex items-center gap-4\">\r\n           \r\n            <ir-icons name=\"check\"></ir-icons>\r\n            <div>\r\n             <p innerHTML=''></p>\r\n            </div>\r\n          </div> */}\r\n          {app_store.property?.description.important_info && (\r\n            <div class=\"flex items-center gap-4\">\r\n              {/* danger */}\r\n              <ir-icons name=\"danger\" svgClassName=\"text-red-500\"></ir-icons>\r\n              <div>\r\n                <p innerHTML={app_store.property?.description.important_info}></p>\r\n                <p innerHTML={app_store.property?.description.non_standard_conditions}></p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n","import app_store from '@/stores/app.store';\r\nimport booking_store, { modifyBookingStore } from '@/stores/booking';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport { cn } from '@/utils/utils';\r\nimport { Component, Host, h, Event, EventEmitter } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-loyalty',\r\n  styleUrl: 'ir-loyalty.css',\r\n  shadow: true,\r\n})\r\nexport class IrLoyalty {\r\n  @Event({ bubbles: true, composed: true }) resetBooking: EventEmitter<string>;\r\n  toggleLoyalty(value: boolean) {\r\n    modifyBookingStore('bookingAvailabilityParams', {\r\n      ...booking_store.bookingAvailabilityParams,\r\n      coupon: null,\r\n      loyalty: value,\r\n    });\r\n    this.resetBooking.emit('partialReset');\r\n  }\r\n  render() {\r\n    const show_loyalty = app_store.property?.promotions?.some(p => p.is_loyalty);\r\n    if (!show_loyalty || booking_store.bookingAvailabilityParams.coupon) {\r\n      return null;\r\n    }\r\n    if (booking_store.bookingAvailabilityParams.loyalty) {\r\n      return (\r\n        <div class=\"flex items-center  text-sm text-[hsl(var(--brand-600))]\">\r\n          <p onClick={() => this.toggleLoyalty(false)}>{localizedWords.entries.Lcz_LoyaltyApplied}</p>\r\n          <ir-button\r\n            aria-label={'remove loyalty'}\r\n            variants=\"icon\"\r\n            iconName=\"xmark\"\r\n            svgClassName=\"text-[hsl(var(--brand-600))]\"\r\n            onButtonClick={() => this.toggleLoyalty(false)}\r\n          ></ir-button>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <Host>\r\n        <ir-button class={cn('w-full')} onButtonClick={() => this.toggleLoyalty(true)} variants=\"outline\" label={localizedWords.entries.Lcz_GetLoyaltyDiscount} haveLeftIcon>\r\n          <ir-icons slot=\"left-icon\" name=\"heart\"></ir-icons>\r\n        </ir-button>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  --ir-dialog-max-width: 50rem;\r\n}\r\n.modal-container {\r\n  /* padding: 16px; */\r\n  background: #ffffff;\r\n}\r\n.carousel-container {\r\n  aspect-ratio: 4/3;\r\n}\r\n.coursel_gallery_container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  width: 100%;\r\n  aspect-ratio: 16/9;\r\n}\r\n\r\n.more-details-button {\r\n  margin: 0 0.5rem;\r\n}\r\n.gallery-img {\r\n  display: flex;\r\n  border-radius: min(var(--radius, 0.5rem), 1rem);\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  object-fit: cover;\r\n  height: 100%;\r\n  width: 100%;\r\n  aspect-ratio: 16/9;\r\n  border-bottom-left-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n}\r\n.single-image {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n  object-position: center;\r\n  border-radius: min(var(--radius, 0.5rem), 1rem);\r\n  border-bottom-left-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n}\r\n.pg_carousel {\r\n  border-bottom-left-radius: 0 !important;\r\n  border-bottom-right-radius: 0 !important;\r\n}\r\n\r\n@media (min-width: 768px) {\r\n  :host([display='default']) .gallery-img {\r\n    min-height: 200px;\r\n  }\r\n  :host([display='default']) .gallery-img,\r\n  :host([display='default']) .single-image {\r\n    border-bottom-left-radius: min(var(--radius, 0.5rem), 1rem);\r\n    border-bottom-right-radius: min(var(--radius, 0.5rem), 1rem);\r\n  }\r\n  :host([display='default']) .gallery-img.icon {\r\n    max-height: 200px;\r\n    color: white;\r\n    background-color: rgb(209 213 219);\r\n  }\r\n  :host([display='default']) .capacity-container {\r\n    border-bottom-right-radius: min(var(--radius, 8px), 1rem);\r\n    border-bottom-left-radius: min(var(--radius, 8px), 1rem);\r\n  }\r\n}\r\n@media (min-width: 1280px) {\r\n  :host([display='default']) .gallery-img {\r\n    min-height: 250px;\r\n  }\r\n  :host([display='default']) .gallery-img.icon {\r\n    max-height: 250px;\r\n  }\r\n}\r\n","import { RoomType } from '@/models/property';\r\nimport app_store from '@/stores/app.store';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport { formatImageAlt } from '@/utils/utils';\r\nimport { Component, Fragment, h, Listen, Prop, State } from '@stencil/core';\r\nimport { v4 } from 'uuid';\r\n\r\n@Component({\r\n  tag: 'ir-property-gallery',\r\n  styleUrl: 'ir-property-gallery.css',\r\n  shadow: true,\r\n})\r\nexport class IrPropertyGallery {\r\n  @Prop({ reflect: true }) display: 'grid' | 'default' = 'default';\r\n  @Prop() property_state: 'carousel' | 'gallery' = 'gallery';\r\n  @Prop() roomType: RoomType;\r\n\r\n  @State() activeIndex = 0;\r\n\r\n  private irDialog: HTMLIrDialogElement;\r\n\r\n  @Listen('openGallery')\r\n  handleOpenGallery(e: CustomEvent) {\r\n    if (window.innerWidth > 650) {\r\n      this.activeIndex = e.detail;\r\n      this.irDialog.openModal();\r\n    }\r\n  }\r\n  @Listen('carouselImageClicked')\r\n  handleOpenCarouselGallery() {\r\n    this.irDialog.openModal();\r\n  }\r\n  showPlanLimitations({ withRoomSize = true, showMoreTag = false }: { withRoomSize: boolean; showMoreTag: boolean }) {\r\n    if (!this.roomType) {\r\n      return null;\r\n    }\r\n\r\n    const { adult_nbr, children_nbr } = this.roomType.occupancy_max;\r\n    const maxNumber = adult_nbr + children_nbr;\r\n\r\n    const renderOccupancy = () => (\r\n      <div class=\"flex items-end gap-1\">\r\n        <div class=\"flex items-center\">\r\n          <ir-icons svgClassName=\"size-3\" name=\"user\"></ir-icons>\r\n          <p>{adult_nbr}</p>\r\n        </div>\r\n        {children_nbr > 0 && (\r\n          <div class=\"flex items-center\">\r\n            <ir-icons svgClassName=\"size-3\" name=\"child\"></ir-icons>\r\n            <p>{children_nbr}</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n\r\n    const renderRoomSize = () =>\r\n      withRoomSize &&\r\n      this.roomType.size > 0 && (\r\n        <p>\r\n          {this.roomType.size}\r\n          <span class=\"ordinal\">\r\n            m<sup>2</sup>\r\n          </span>\r\n        </p>\r\n      );\r\n\r\n    if (maxNumber > 4) {\r\n      return (\r\n        <div class=\"capacity-container pointer-events-none absolute -bottom-0 z-10 flex w-full items-center justify-between bg-white/80 px-2 py-2 text-sm\">\r\n          <div class=\"flex items-center gap-2\">\r\n            <p>{localizedWords.entries.Lcz_Maximum}</p>\r\n            {renderOccupancy()}\r\n          </div>\r\n          {renderRoomSize()}\r\n          {showMoreTag && (\r\n            <div class=\"flex items-center gap-1.5\">\r\n              <span>{localizedWords.entries.Lcz_MoreDetails}</span>\r\n              <span>\r\n                <ir-icons name=\"arrow-up-right-from-square\" svgClassName=\"size-3\"></ir-icons>\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div class=\"capacity-container pointer-events-none absolute -bottom-0 z-10 flex w-full items-center justify-between bg-white/80 px-2 py-2 text-sm\">\r\n        <div class=\"flex items-center gap-2\">\r\n          <p>{localizedWords.entries.Lcz_Maximum}</p>\r\n          <div class=\"flex items-center\">\r\n            {[...Array(adult_nbr)].map((_, i) => (\r\n              <ir-icons svgClassName=\"size-3\" key={i} name=\"user\"></ir-icons>\r\n            ))}\r\n            {[...Array(children_nbr)].map((_, i) => (\r\n              <ir-icons key={i} svgClassName=\"size-3\" name=\"child\"></ir-icons>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        {renderRoomSize()}\r\n        {showMoreTag && (\r\n          <div class=\"flex items-center gap-1.5\">\r\n            <span>{localizedWords.entries.Lcz_MoreDetails}</span>\r\n            <span>\r\n              <ir-icons name=\"arrow-up-right-from-square\" svgClassName=\"size-3\"></ir-icons>\r\n            </span>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const images = this.property_state === 'carousel' ? this.roomType.images : app_store.property?.images;\r\n    return (\r\n      <div>\r\n        {this.property_state === 'gallery' ? (\r\n          <ir-gallery\r\n            totalImages={app_store.property?.images.length}\r\n            images={app_store.property?.images?.map(i => ({ url: i.url, alt: formatImageAlt(i.tooltip) }))}\r\n            maxLength={5}\r\n            disableCarouselClick={true}\r\n            enableCarouselSwipe={true}\r\n          ></ir-gallery>\r\n        ) : (\r\n          <Fragment>\r\n            <div class={`carousel-container relative aspect-[16/9] w-full overflow-hidden  ${this.display === 'default' ? 'md:hidden' : ''}`}>\r\n              {this.roomType.images.length === 0 ? (\r\n                <Fragment>\r\n                  <div onClick={() => this.irDialog.openModal()} class=\"gallery-img icon  bg-gray-300 text-white\">\r\n                    <ir-icons name=\"image\" svgClassName=\"size-10 mb-4\"></ir-icons>\r\n                  </div>\r\n                  {this.showPlanLimitations({ showMoreTag: true, withRoomSize: true })}\r\n                </Fragment>\r\n              ) : this.roomType.images.length === 1 ? (\r\n                <img\r\n                  onClick={() => this.irDialog.openModal()}\r\n                  class=\"gallery-img object-cover \"\r\n                  src={this.roomType.images[0].url}\r\n                  alt={formatImageAlt(this.roomType.images[0].tooltip, this.roomType?.name)}\r\n                />\r\n              ) : (\r\n                <ir-carousel\r\n                  carouselClasses=\"pg_carousel\"\r\n                  onCarouselImageIndexChange={e => (this.activeIndex = e.detail)}\r\n                  slides={this.roomType?.images?.map(img => ({\r\n                    alt: formatImageAlt(img.tooltip, this.roomType?.name),\r\n                    id: v4(),\r\n                    image_uri: img.url,\r\n                  }))}\r\n                ></ir-carousel>\r\n              )}\r\n              {this.showPlanLimitations({ showMoreTag: true, withRoomSize: true })}\r\n            </div>\r\n            {this.display === 'default' && (\r\n              <div class=\"hidden  md:block\">\r\n                <div class=\"carousel-container relative mb-1 w-full rounded-md md:max-h-[200px] md:w-auto xl:max-h-[250px] \">\r\n                  {this.roomType.images.length === 0 ? (\r\n                    <Fragment>\r\n                      <div onClick={() => this.irDialog.openModal()} class=\"gallery-img icon hover:bg-gray-400\">\r\n                        <ir-icons name=\"image\" svgClassName=\"size-10 mb-4\"></ir-icons>\r\n                      </div>\r\n                      {this.showPlanLimitations({ showMoreTag: true, withRoomSize: true })}\r\n                    </Fragment>\r\n                  ) : this.roomType.images?.length === 1 ? (\r\n                    <Fragment>\r\n                      <div onClick={() => this.irDialog.openModal()} class=\"gallery-img icon hover:bg-gray-400\">\r\n                        {/* <ir-icons name=\"image\" svgClassName=\"size-10 mb-4\"></ir-icons> */}\r\n                        <img\r\n                          // onClick={() => this.irDialog.openModal()}\r\n                          src={this.roomType.images[0].url}\r\n                          alt={formatImageAlt(this.roomType.images[0].tooltip, this.roomType?.name)}\r\n                          class=\"single-image h-full w-full cursor-pointer\r\n                           object-cover \"\r\n                        />\r\n                      </div>\r\n                      {this.showPlanLimitations({ showMoreTag: true, withRoomSize: true })}\r\n                    </Fragment>\r\n                  ) : (\r\n                    <Fragment>\r\n                      <ir-carousel\r\n                        onCarouselImageIndexChange={e => (this.activeIndex = e.detail)}\r\n                        slides={this.roomType.images?.map(img => ({\r\n                          alt: formatImageAlt(img.tooltip, this.roomType?.name),\r\n                          id: v4(),\r\n                          image_uri: img.url,\r\n                        }))}\r\n                      ></ir-carousel>\r\n                      {this.showPlanLimitations({ showMoreTag: true, withRoomSize: true })}\r\n                    </Fragment>\r\n                  )}\r\n                  {/* <div class=\"lg:hidden\">\r\n                  <ir-accomodations\r\n                    bookingAttributes={{\r\n                      max_occupancy: this.roomType.occupancy_max.adult_nbr,\r\n                      bedding_setup: this.roomType.bedding_setup,\r\n                    }}\r\n                    amenities={this.exposed_property.amenities}\r\n                  ></ir-accomodations>\r\n                </div> */}\r\n                </div>\r\n                {/* <ir-button\r\n                onButtonClick={() => this.irDialog.openModal()}\r\n                variants=\"link\"\r\n                label={localizedWords.entries.Lcz_MoreDetails}\r\n                class=\"more-details-button\"\r\n                buttonStyles={{ paddingLeft: '0', paddingBottom: '0', background: 'transparent', fontSize: '12px' }}\r\n              ></ir-button> */}\r\n              </div>\r\n            )}\r\n          </Fragment>\r\n        )}\r\n        <ir-dialog ref={el => (this.irDialog = el)} closeButton={false}>\r\n          <div slot=\"modal-body\" class=\"modal-container max-h-[80vh] overflow-y-auto px-4 pb-4  pt-0 md:p-4 md:pt-0\" dir=\"ltr\">\r\n            <div class=\" sticky top-0 z-50 mb-2 flex w-full  items-center justify-between bg-white py-2 md:pt-4\" dir={app_store.dir}>\r\n              <h2 class=\"text-lg font-semibold md:text-xl\">{this.property_state === 'carousel' ? this.roomType.name : app_store.property?.name}</h2>\r\n              <ir-button iconName=\"xmark\" variants=\"icon\" onButtonClick={() => this.irDialog.closeModal()}></ir-button>\r\n            </div>\r\n            <section class=\"max-h-[80vh]\">\r\n              {images.length > 0 && (\r\n                <div class=\"coursel_gallery_container hidden sm:block\">\r\n                  <ir-carousel\r\n                    enableCarouselSwipe\r\n                    activeIndex={this.activeIndex}\r\n                    dir={app_store.dir}\r\n                    key={this.roomType?.id + '_' + app_store.dir}\r\n                    slides={images?.map(img => ({\r\n                      alt: formatImageAlt(img.tooltip, this.roomType?.name),\r\n                      id: v4(),\r\n                      image_uri: img.url,\r\n                    }))}\r\n                    onCarouselImageClicked={e => {\r\n                      e.preventDefault();\r\n                      e.stopImmediatePropagation();\r\n                      e.stopPropagation();\r\n                    }}\r\n                  ></ir-carousel>\r\n                  {/* {this.showPlanLimitations({ showMoreTag: false, withRoomSize: false })} */}\r\n                </div>\r\n              )}\r\n              {this.property_state === 'carousel' && (\r\n                <section class={'z-0 py-4 text-sm'} dir={app_store.dir}>\r\n                  <ir-room-type-amenities aminities={app_store.property?.amenities} roomType={this.roomType}></ir-room-type-amenities>\r\n                </section>\r\n              )}\r\n            </section>\r\n          </div>\r\n        </ir-dialog>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",".rateplan-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.25rem;\r\n  padding: 0.5rem 0rem;\r\n  font-size: 0.875rem;\r\n}\r\n.rateplan-short-name {\r\n  font-weight: 500;\r\n  font-size: 1rem;\r\n}\r\n.rateplan-name {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n.rateplan-tooltip {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #98a2b3;\r\n}\r\n.rateplan-name .rateplan-tooltip {\r\n  display: none;\r\n}\r\n.rateplan-details-wrapper {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  gap: 0.25rem;\r\n}\r\n.rateplan-header {\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  /* align-items: center;\r\n  justify-content: space-between; */\r\n}\r\n.rateplan-pricing-mobile {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.25rem;\r\n}\r\n.rateplan-discounted-amount {\r\n  font-weight: 400;\r\n  text-decoration: line-through;\r\n  color: var(--gray-600, #475467);\r\n}\r\n.rateplan-amount {\r\n  font-size: 1.125rem;\r\n  line-height: 1.75rem;\r\n}\r\n.rateplan-description {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.25rem;\r\n}\r\n.rateplan-description .rateplan-tooltip {\r\n  justify-content: flex-start;\r\n}\r\n.rateplan-custom-text {\r\n  font-size: 0.75rem;\r\n  color: #64748b;\r\n}\r\n.rateplan-details {\r\n  display: flex;\r\n  /* align-items: center; */\r\n  gap: 1rem;\r\n}\r\n.rateplan-details .rateplan-travelers,\r\n.rateplan-details .rateplan-select-rooms {\r\n  flex: 1 1 0%;\r\n}\r\n:host([display='grid']) .rateplan-select-rooms-btn {\r\n  flex: 0;\r\n}\r\n:host([display='default']) .rateplan-select-rooms-btn {\r\n  flex: 1 1 0%;\r\n}\r\n.rateplan-details .rateplan-pricing,\r\n.rateplan-details .rateplan-final-pricing {\r\n  display: none;\r\n}\r\n.rateplan-discount,\r\n.no-availability,\r\n.mls_alert {\r\n  font-weight: 400;\r\n  color: #ef4444;\r\n}\r\n.rateplan-container .no-availability {\r\n  flex: 1 1 0%;\r\n  text-align: end;\r\n  width: 100%;\r\n}\r\n.rateplan-header.not-available {\r\n  width: 100% !important;\r\n}\r\n.rateplan-header.not-available .rateplan-details-wrapper {\r\n  width: 100% !important;\r\n}\r\n.rateplan-amount-per-night {\r\n  font-size: 0.75rem;\r\n  font-weight: 400;\r\n}\r\n.rateplan-final-pricing .rateplan-amount {\r\n  font-size: 1.25rem;\r\n  line-height: 1.2rem;\r\n  padding-bottom: 0.28rem;\r\n}\r\n\r\n/* sm\t640px\t */\r\n@media (min-width: 640px) {\r\n  :host([display='default']) .rateplan-pricing-mobile,\r\n  :host([display='default']) .rateplan-description .rateplan-tooltip {\r\n    display: none;\r\n  }\r\n  :host([display='default']) .rateplan-name .rateplan-tooltip {\r\n    display: block;\r\n  }\r\n  :host([display='default']) .rateplan-details .rateplan-pricing,\r\n  :host([display='default']) .rateplan-details .rateplan-final-pricing {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n}\r\n/* md\t768px\t */\r\n@media (min-width: 768px) {\r\n}\r\n/* lg\t1024px */\r\n@media (min-width: 1024px) {\r\n  :host([display='default']) .rateplan-travelers {\r\n    max-width: 300px;\r\n  }\r\n\r\n  /* .rateplan-container {\r\n    display: grid;\r\n    grid-template-columns: repeat(12, 1fr);\r\n    gap: 1rem;\r\n  } */\r\n  :host([display='default']) .rateplan-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    width: 40%;\r\n    /* grid-column: span 5 / span 5; */\r\n  }\r\n  :host([display='default']) .rateplan-container {\r\n    flex-direction: row;\r\n  }\r\n  :host([display='default']) .rateplan-details {\r\n    gap: 2rem;\r\n    justify-content: space-between;\r\n    flex: 1 1 0%;\r\n    /* \r\n    display: grid;\r\n    grid-column: span 7 / span 7; \r\n    grid-template-columns: repeat(12, 1fr); */\r\n  }\r\n  :host([display='default']) .rateplan-details .rateplan-travelers {\r\n    /* grid-column: span 5 / span 5; */\r\n    max-width: 40%;\r\n  }\r\n  :host([display='default']) .rateplan-details .rateplan-select-rooms {\r\n    flex: 0;\r\n    /* grid-column: span 2 / span 2; */\r\n  }\r\n  :host([display='default']) .rateplan-details .rateplan-pricing,\r\n  :host([display='default']) .rateplan-details .rateplan-final-pricing {\r\n    grid-column: span 2 / span 2;\r\n  }\r\n  :host([display='default']) .rateplan-details .rateplan-final-pricing[data-style='full-width'] {\r\n    grid-column: span 4 / span 4;\r\n  }\r\n  :host([display='default']) .triggerStyle {\r\n    width: fit-content !important;\r\n  }\r\n  :host([display='default']) .selectStyle {\r\n    width: 3.5rem !important;\r\n    padding-inline-end: 1.75rem !important;\r\n  }\r\n}\r\n/* xl\t1280px */\r\n@media (min-width: 1280px) {\r\n}\r\n/* 2xl\t1536px */\r\n@media (min-width: 1536px) {\r\n}\r\n","import { Component, Event, EventEmitter, Fragment, Prop, State, Watch, h } from '@stencil/core';\r\nimport { RatePlan, Variation } from '@/models/property';\r\nimport app_store from '@/stores/app.store';\r\nimport booking_store, { IRatePlanSelection, reserveRooms, updateRoomParams } from '@/stores/booking';\r\nimport { formatAmount, getDateDifference } from '@/utils/utils';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport { v4 } from 'uuid';\r\nimport { PropertyService } from '@/services/api/property.service';\r\nimport { format } from 'date-fns';\r\nimport { AvailabiltyService } from '@/services/app/availability.service';\r\nimport { PaymentService } from '@/services/api/payment.service';\r\n@Component({\r\n  tag: 'ir-rateplan',\r\n  styleUrl: 'ir-rateplan.css',\r\n  shadow: true,\r\n})\r\nexport class IrRateplan {\r\n  @Prop({ reflect: true }) display: 'grid' | 'default' = 'default';\r\n  @Prop() ratePlan: RatePlan;\r\n  @Prop() visibleInventory?:\r\n    | IRatePlanSelection\r\n    | {\r\n        reserved: number;\r\n        visibleInventory?: number;\r\n        selected_variation: any;\r\n      };\r\n  @Prop() roomTypeInventory: number;\r\n  @Prop() roomTypeId: number;\r\n\r\n  @State() isLoading = false;\r\n  @State() cancelationMessage = '';\r\n  @State() isRatePlanAvailable: boolean = true;\r\n\r\n  @Event() animateBookingButton: EventEmitter<null>;\r\n\r\n  private propertyService = new PropertyService();\r\n  private availabilityService = new AvailabiltyService();\r\n  private paymentService = new PaymentService();\r\n\r\n  componentWillLoad() {\r\n    this.checkAvailability();\r\n  }\r\n  @Watch('roomTypeInventory')\r\n  handleRTICHange(newValue: number, oldValue: number) {\r\n    if (newValue === oldValue) {\r\n      return null;\r\n    }\r\n    this.checkAvailability();\r\n  }\r\n  private checkAvailability() {\r\n    this.isRatePlanAvailable = this.roomTypeInventory > 0 && !this.ratePlan.variations.some(v => v.is_calculated && (v.amount === 0 || v.amount === null));\r\n    // this.isRatePlanAvailable = this.roomTypeInventory > 0;\r\n  }\r\n  private async handleVariationChange(e: CustomEvent, variations: Variation[], rateplanId: number, roomTypeId: number) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    const value = e.detail;\r\n    let selectedVariation = variations[value];\r\n    console.log(selectedVariation);\r\n    if (!selectedVariation) {\r\n      return;\r\n    }\r\n    if (!selectedVariation.amount) {\r\n      this.isLoading = true;\r\n      await this.updateVariation({\r\n        adult_nbr: selectedVariation.adult_nbr,\r\n        child_nbr: selectedVariation.child_nbr,\r\n        rp_id: rateplanId,\r\n        rt_id: roomTypeId,\r\n        adultChildConstraint: selectedVariation.adult_child_offering,\r\n      });\r\n      this.isLoading = false;\r\n    }\r\n    selectedVariation = booking_store.roomTypes.find(rt => rt.id === roomTypeId).rateplans.find(rp => rp.id === rateplanId).variations[value];\r\n    updateRoomParams({ params: { selected_variation: { variation: selectedVariation, state: 'modified' } }, ratePlanId: rateplanId, roomTypeId });\r\n  }\r\n  private async updateVariation(params: { adult_nbr: number; child_nbr: number; rt_id: number; rp_id: number; adultChildConstraint: string }) {\r\n    const identifier = v4();\r\n    this.availabilityService.initSocket(identifier, true);\r\n    await this.propertyService.getExposedBookingAvailability({\r\n      params: {\r\n        propertyid: app_store.app_data.property_id,\r\n        from_date: format(booking_store.bookingAvailabilityParams.from_date, 'yyyy-MM-dd'),\r\n        to_date: format(booking_store.bookingAvailabilityParams.to_date, 'yyyy-MM-dd'),\r\n        room_type_ids: [],\r\n        adult_nbr: params.adult_nbr,\r\n        child_nbr: params.child_nbr,\r\n        language: app_store.userPreferences.language_id,\r\n        currency_ref: app_store.userPreferences.currency_id,\r\n        is_in_loyalty_mode: booking_store.bookingAvailabilityParams.loyalty ? true : !!booking_store.bookingAvailabilityParams.coupon,\r\n        promo_key: booking_store.bookingAvailabilityParams.coupon || '',\r\n        is_in_agent_mode: !!booking_store.bookingAvailabilityParams.agent || false,\r\n        agent_id: booking_store.bookingAvailabilityParams.agent || 0,\r\n      },\r\n      identifier,\r\n      mode: 'modify_rt',\r\n      rp_id: params.rp_id,\r\n      rt_id: params.rt_id,\r\n      adultChildConstraint: params.adultChildConstraint,\r\n    });\r\n  }\r\n  private async fetchCancelationMessage(id: number, roomTypeId: number) {\r\n    this.cancelationMessage = (await this.paymentService.fetchCancelationMessage({ id, roomTypeId })).message;\r\n  }\r\n  render() {\r\n    // if (!this.ratePlan.is_targeting_travel_agency && booking_store.bookingAvailabilityParams.agent) {\r\n    //   return null;\r\n    // }\r\n    console.log('visible inventory', this.visibleInventory?.selected_variation?.variation.adult_child_offering);\r\n    if (this.ratePlan.is_targeting_travel_agency && !app_store.app_data.isAgentMode) {\r\n      return null;\r\n    }\r\n    const isInventoryFull =\r\n      this.visibleInventory?.visibleInventory === 0 ||\r\n      !this.visibleInventory?.selected_variation?.variation?.amount ||\r\n      Object.values(booking_store.ratePlanSelections[this.roomTypeId]).some(f => f.visibleInventory === f.reserved);\r\n    return (\r\n      <div class=\"rateplan-container\">\r\n        <div class={`rateplan-header ${this.isRatePlanAvailable ? 'available' : 'not-available'}`}>\r\n          <div class=\"rateplan-details-wrapper\">\r\n            <p class=\"rateplan-name\">\r\n              <span class=\"rateplan-short-name\">{this.ratePlan.short_name}</span>\r\n              {this.ratePlan.is_non_refundable ? (\r\n                <p class=\"rateplan-tooltip text-xs\" style={{ color: 'var(--ir-green)' }}>\r\n                  {localizedWords.entries.Lcz_NonRefundable}\r\n                </p>\r\n              ) : (\r\n                <ir-tooltip\r\n                  labelColors={booking_store.isInFreeCancelationZone ? 'green' : 'default'}\r\n                  class={`rateplan-tooltip`}\r\n                  open_behavior=\"click\"\r\n                  label={booking_store.isInFreeCancelationZone ? localizedWords.entries.Lcz_FreeCancellation : localizedWords.entries.Lcz_IfICancel}\r\n                  message={`${this.cancelationMessage || this.ratePlan.cancelation} ${this.ratePlan.guarantee ?? ''}`}\r\n                  onTooltipOpenChange={e => {\r\n                    if (e.detail) {\r\n                      this.fetchCancelationMessage(this.ratePlan.id, this.roomTypeId);\r\n                    }\r\n                  }}\r\n                ></ir-tooltip>\r\n              )}\r\n            </p>\r\n            {this.isLoading ? (\r\n              <div class=\"grid place-items-center md:hidden\">\r\n                <ir-skeleton class=\"h-4 w-12\"></ir-skeleton>\r\n              </div>\r\n            ) : (\r\n              <Fragment>\r\n                {this.isRatePlanAvailable ? (\r\n                  !this.visibleInventory?.selected_variation?.variation?.IS_MLS_VIOLATED &&\r\n                  this.visibleInventory?.selected_variation?.variation?.amount && (\r\n                    <div class=\"rateplan-pricing-mobile\">\r\n                      {this.visibleInventory?.selected_variation?.variation?.discount_pct > 0 && (\r\n                        <p class=\"rateplan-discounted-amount\">\r\n                          {formatAmount(this.visibleInventory?.selected_variation?.variation?.total_before_discount, app_store.userPreferences.currency_id, 0)}\r\n                        </p>\r\n                      )}\r\n                      <p class=\"rateplan-amount\">{formatAmount(this.visibleInventory?.selected_variation?.variation?.amount, app_store.userPreferences.currency_id, 0)}</p>\r\n                    </div>\r\n                  )\r\n                ) : (\r\n                  <p class=\"no-availability\">{localizedWords.entries.Lcz_NotAvailable}</p>\r\n                )}\r\n              </Fragment>\r\n            )}\r\n          </div>\r\n          <div class=\"rateplan-description\">\r\n            {this.ratePlan.is_non_refundable ? (\r\n              <p class=\"rateplan-tooltip text-xs\" style={{ color: 'var(--ir-green)' }}>\r\n                {localizedWords.entries.Lcz_NonRefundable}\r\n              </p>\r\n            ) : (\r\n              <ir-tooltip\r\n                labelColors={booking_store.isInFreeCancelationZone ? 'green' : 'default'}\r\n                class={`rateplan-tooltip`}\r\n                open_behavior=\"click\"\r\n                label={booking_store.isInFreeCancelationZone ? localizedWords.entries.Lcz_FreeCancellation : localizedWords.entries.Lcz_IfICancel}\r\n                message={`${(this.cancelationMessage ?? '') || (this.ratePlan.cancelation ?? '')} ${this.ratePlan.guarantee ?? ''}`}\r\n                onTooltipOpenChange={e => {\r\n                  if (e.detail) {\r\n                    this.fetchCancelationMessage(this.ratePlan.id, this.roomTypeId);\r\n                  }\r\n                }}\r\n              ></ir-tooltip>\r\n            )}\r\n            <p class=\"rateplan-custom-text\" innerHTML={this.ratePlan.custom_text}></p>\r\n          </div>\r\n        </div>\r\n        {this.isRatePlanAvailable && (\r\n          <div class={`rateplan-details ${this.ratePlan.custom_text ? 'rateplan-details-no-custom-text' : ''}`}>\r\n            {this.isLoading || this.ratePlan.variations?.length === 0 ? (\r\n              <div class=\"col-span-6 w-full \">\r\n                <ir-skeleton class=\"block h-12 w-full\"></ir-skeleton>\r\n              </div>\r\n            ) : (\r\n              <Fragment>\r\n                <div class=\"rateplan-travelers\">\r\n                  {this.ratePlan.variations && (\r\n                    <ir-select\r\n                      class=\"rateplan-select-travelers\"\r\n                      label={'Travelers'}\r\n                      value={this.ratePlan.variations\r\n                        .findIndex(f => f.adult_child_offering === this.visibleInventory?.selected_variation?.variation.adult_child_offering)\r\n                        .toString()}\r\n                      onValueChange={e => {\r\n                        this.handleVariationChange(e, this.ratePlan.variations, this.ratePlan.id, this.roomTypeId);\r\n                      }}\r\n                      data={this.ratePlan.variations.map((v, i) => ({\r\n                        id: i.toString(),\r\n                        value: v.adult_child_offering,\r\n                      }))}\r\n                    ></ir-select>\r\n                  )}\r\n                </div>\r\n                {!this.visibleInventory?.selected_variation?.variation?.IS_MLS_VIOLATED ? (\r\n                  <Fragment>\r\n                    {this.visibleInventory?.selected_variation?.variation?.amount && (\r\n                      <Fragment>\r\n                        {this.visibleInventory?.selected_variation?.variation?.discount_pct > 0 && (\r\n                          <div class=\"rateplan-pricing\">\r\n                            <p class=\"rateplan-discounted-amount\">\r\n                              {formatAmount(this.visibleInventory?.selected_variation?.variation?.total_before_discount, app_store.userPreferences.currency_id, 0)}\r\n                            </p>\r\n                            <p class=\"rateplan-discount\">{`-${this.visibleInventory?.selected_variation?.variation?.discount_pct}%`}</p>\r\n                          </div>\r\n                        )}\r\n                        <div class=\"rateplan-final-pricing\" data-style={this.visibleInventory?.selected_variation?.variation?.discount_pct > 0 ? '' : 'full-width'}>\r\n                          <p class=\"rateplan-amount\">{formatAmount(this.visibleInventory?.selected_variation?.variation?.amount, app_store.userPreferences.currency_id, 0)}</p>\r\n                          {getDateDifference(booking_store.bookingAvailabilityParams.from_date ?? new Date(), booking_store.bookingAvailabilityParams.to_date ?? new Date()) >\r\n                            1 && (\r\n                            <p class=\"rateplan-amount-per-night\">{`${formatAmount(this.visibleInventory?.selected_variation?.variation?.amount_per_night, app_store.userPreferences.currency_id, 0)}/${localizedWords.entries.Lcz_night}`}</p>\r\n                          )}\r\n                        </div>\r\n                      </Fragment>\r\n                    )}\r\n                    {this.visibleInventory?.reserved > 0 ? (\r\n                      <ir-select\r\n                        onValueChange={e => {\r\n                          reserveRooms(this.roomTypeId, this.ratePlan.id, Number(e.detail));\r\n                          this.animateBookingButton.emit(null);\r\n                        }}\r\n                        label={localizedWords.entries.Lcz_Rooms}\r\n                        value={this.visibleInventory?.reserved}\r\n                        class=\"rateplan-select-rooms\"\r\n                        data={[...new Array(this.roomTypeInventory + 1)]?.map((_, i) => ({\r\n                          id: i,\r\n                          value:\r\n                            i === 0\r\n                              ? `0`\r\n                              : `${i}&nbsp;&nbsp;&nbsp;${i === 0 ? '' : formatAmount(this.visibleInventory?.selected_variation?.variation?.amount * i, app_store.userPreferences.currency_id, 0)}`,\r\n                          disabled: i >= this.visibleInventory?.visibleInventory + 1,\r\n                          html: true,\r\n                        }))}\r\n                        containerStyle={'triggerStyle'}\r\n                        customStyles={'selectStyle'}\r\n                      ></ir-select>\r\n                    ) : (\r\n                      <ir-button\r\n                        disabled={isInventoryFull}\r\n                        class=\"rateplan-select-rooms-btn\"\r\n                        buttonStyles={{ background: 'white', width: '100%', opacity: isInventoryFull ? '0.5' : '1' }}\r\n                        label={localizedWords.entries.Lcz_Select}\r\n                        variants=\"outline-primary\"\r\n                        onButtonClick={() => {\r\n                          reserveRooms(this.roomTypeId, this.ratePlan.id, 1);\r\n                          this.animateBookingButton.emit(null);\r\n                        }}\r\n                      ></ir-button>\r\n                    )}\r\n                  </Fragment>\r\n                ) : (\r\n                  <p class=\"mls_alert\">{localizedWords.entries.Lcz_MLS_Alert.replace('{0}', this.visibleInventory.selected_variation?.variation?.MLS_ALERT_VALUE)}</p>\r\n                )}\r\n              </Fragment>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n.room-type-container {\r\n  border-radius: min(var(--radius, 8px), 12px);\r\n  margin-bottom: 1rem;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: flex-start;\r\n  gap: 1rem;\r\n  background-color: hsl(220, 14%, 96%);\r\n  padding: 1rem;\r\n}\r\n.unavailable-roomtype {\r\n  text-align: center;\r\n  color: #ef4444;\r\n  font-weight: 400;\r\n}\r\n.rp-container-grid {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  /* justify-content: space-between; */\r\n  /* flex: 1 1 0%; */\r\n}\r\n@media (min-width: 768px) {\r\n  :host([display='default']) .room-type-container {\r\n    flex-direction: row;\r\n  }\r\n}\r\n","import { RoomType } from '@/models/property';\r\nimport app_store from '@/stores/app.store';\r\nimport booking_store, { getVisibleInventory } from '@/stores/booking';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport { Component, Prop, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-roomtype',\r\n  styleUrl: 'ir-roomtype.css',\r\n  shadow: true,\r\n})\r\nexport class IrRoomtype {\r\n  @Prop({ reflect: true }) display: 'grid' | 'default' = 'default';\r\n  @Prop() roomtype: RoomType;\r\n\r\n  render() {\r\n    return (\r\n      <section class={`room-type-container p-0 ${this.display === 'default' ? 'md:p-4' : 'h-full'}`}>\r\n        {this.display === 'default' && (\r\n          <aside class=\"hidden md:block\">\r\n            <ir-property-gallery property_state=\"carousel\" roomType={this.roomtype}></ir-property-gallery>\r\n          </aside>\r\n        )}\r\n        <div class={`w-full  ${this.display === 'default' ? 'md:space-y-2' : 'rp-container-grid '}`}>\r\n          {/* <div class={'flex flex-1 flex-col'}> */}\r\n          {this.display === 'default' && <h3 class=\"hidden text-start  text-lg font-medium text-slate-900 md:block \">{this.roomtype.name}</h3>}\r\n          {/* Mobile view for carousel */}\r\n          <div class={this.display === 'default' ? 'md:hidden' : ''}>\r\n            <ir-property-gallery display={this.display} property_state=\"carousel\" roomType={this.roomtype}></ir-property-gallery>\r\n          </div>\r\n          <div class={`p-4 pt-2 ${this.display === 'default' ? 'md:p-0' : 'rp-container-grid '}`}>\r\n            <div>\r\n              <h3 class={`text-start  text-lg font-medium text-slate-900 ${this.display === 'default' ? 'md:hidden' : ''} `}>{this.roomtype.name}</h3>\r\n              <div class={`flex  flex-wrap  gap-2 py-2 text-sm font-normal text-gray-700 ${this.display === 'default' ? 'md:hidden' : '  '}`}>\r\n                <ir-accomodations\r\n                  bookingAttributes={{\r\n                    max_occupancy: this.roomtype.occupancy_max.adult_nbr,\r\n                    bedding_setup: this.roomtype.bedding_setup,\r\n                  }}\r\n                  amenities={app_store.property.amenities}\r\n                ></ir-accomodations>\r\n              </div>\r\n              {this.display === 'default' && (\r\n                <div class={'hidden md:block'}>\r\n                  <ir-accomodations\r\n                    bookingAttributes={{\r\n                      max_occupancy: this.roomtype.occupancy_max.adult_nbr,\r\n                      bedding_setup: this.roomtype.bedding_setup,\r\n                    }}\r\n                    amenities={app_store.property.amenities}\r\n                  ></ir-accomodations>\r\n                </div>\r\n              )}\r\n            </div>\r\n            {/* </div> */}\r\n            {booking_store.enableBooking &&\r\n            (this.roomtype.rateplans.every(r => r.is_closed) ||\r\n              this.roomtype.rateplans.every(\r\n                ratePlan => !(this.roomtype.inventory > 0 && !ratePlan.variations.some(v => v.is_calculated && (v.amount === 0 || v.amount === null))),\r\n              )) ? (\r\n              <p class={`unavailable-roomtype text-base ${this.display === 'default' ? '' : 'pt-4'}`}>{localizedWords.entries.Lcz_NotAvailable}</p>\r\n            ) : (\r\n              <div>\r\n                {booking_store.enableBooking ? (\r\n                  this.roomtype.rateplans.map(ratePlan => {\r\n                    if (\r\n                      !ratePlan.is_active ||\r\n                      ratePlan.is_closed ||\r\n                      !(this.roomtype.inventory > 0 && !ratePlan.variations.some(v => v.is_calculated && (v.amount === 0 || v.amount === null))) ||\r\n                      !ratePlan.is_booking_engine_enabled ||\r\n                      !ratePlan.variations\r\n                    ) {\r\n                      return null;\r\n                    }\r\n                    const visibleInventory = getVisibleInventory(this.roomtype.id, ratePlan.id);\r\n                    return (\r\n                      <ir-rateplan\r\n                        display={this.display}\r\n                        key={ratePlan.id}\r\n                        ratePlan={ratePlan}\r\n                        visibleInventory={visibleInventory}\r\n                        roomTypeId={this.roomtype.id}\r\n                        roomTypeInventory={this.roomtype.inventory}\r\n                      ></ir-rateplan>\r\n                    );\r\n                  })\r\n                ) : (\r\n                  <div class=\"app_container flex w-full  flex-col justify-between space-y-1 rounded-md bg-gray-100  text-sm md:flex-row\">\r\n                    <p>{this.roomtype.description}</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}