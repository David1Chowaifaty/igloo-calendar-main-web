import{T as o,M as t,a as e,P as n}from"./p-fff8f3e6.js";import{a as i}from"./p-4a0a2b37.js";var c=undefined&&undefined.__rest||function(o,t){var e={};for(var n in o)if(Object.prototype.hasOwnProperty.call(o,n)&&t.indexOf(n)<0)e[n]=o[n];if(o!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,n=Object.getOwnPropertySymbols(o);i<n.length;i++){if(t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(o,n[i]))e[n[i]]=o[n[i]]}return e};class s extends o{async login(o,s=true){const r=this.getToken();const{option:a}=o,l=c(o,["option"]);if(!r){throw new t}const{data:u}=await e.post(`/Exposed_Guest_SignIn?Ticket=${r}`,a==="direct"?l.params:Object.assign({},l));if(u["ExceptionMsg"]!==""){throw new Error(u["ExceptionMsg"])}if(s){localStorage.setItem("ir-token",u["My_Result"]);i.app_data.token=u["My_Result"];i.is_signed_in=true}const d=new n;d.setToken(u["My_Result"]);d.getExposedGuest();return u["My_Result"]}async signUp(o){const n=this.getToken();if(!n){throw new t}const{data:c}=await e.post(`/Exposed_Guest_SignUp?Ticket=${n}`,o);if(c["ExceptionMsg"]!==""){throw new Error(c["ExceptionMsg"])}localStorage.setItem("ir-token",c["My_Result"]);i.app_data.token=c["My_Result"]}initializeFacebookSignIn(){window.fbAsyncInit=()=>{FB.init({appId:"1630011277802654",cookie:true,xfbml:true,version:"v19.0"});FB.AppEvents.logPageView()};(function(o,t,e){var n,i=o.getElementsByTagName(t)[0];if(o.getElementById(e)){return}n=o.createElement(t);n.id=e;n.src="https://connect.facebook.net/en_US/sdk.js";i.parentNode.insertBefore(n,i)})(document,"script","facebook-jssdk")}async handleCredentialResponse(o){try{const t=await this.login({option:"google",token:o.credential});return{state:"success",token:t}}catch(o){console.error("Error during Google Sign-In:",o);return{state:"failed",token:""}}}async loginWithFacebook(){FB.login((function(o){if(o.authResponse){console.log("Welcome!  Fetching your information.... ");FB.api("/me",{fields:"name, email, id"},(function(o){console.log(o)}))}else{console.log("User cancelled login or did not fully authorize.")}}));FB.getLoginStatus((o=>{console.log("login status",o)}))}createFakeGoogleWrapper(){const o=document.createElement("div");o.style.display="none";o.classList.add("custom-google-button");document.body.appendChild(o);window.google.accounts.id.renderButton(o,{type:"icon",width:"200"});const t=o.querySelector("div[role=button]");return{click:()=>{t.click()}}}loadGoogleSignInScript(o){const t=document.createElement("script");t.src="https://accounts.google.com/gsi/client";t.async=true;t.defer=true;t.onload=()=>this.initializeGoogleSignIn(o);document.head.appendChild(t)}initializeGoogleSignIn(o){window.google.accounts.id.initialize({client_id:"1035240403483-60urt17notg4vmvjbq739p0soqup0o87.apps.googleusercontent.com",callback:async o=>{this.handleCredentialResponse(o)},auto_select:true,ux_mode:"popup"});o=this.createFakeGoogleWrapper();window.handleGoogleLogin=()=>{o.click()}}}export{s as A};
//# sourceMappingURL=p-5c4efe44.js.map