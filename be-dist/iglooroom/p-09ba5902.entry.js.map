{"version":3,"names":["irBookingCardCss","IrBookingCardStyle0","IrBookingCard","this","bookingListingAppService","BookingListingAppService","componentWillLoad","booking","init","handleBookingChange","newValue","getBadgeVariant","code","totalNights","differenceInCalendarDays","Date","to_date","from_date","render","cancel","payment","view","getBookingActions","h","class","key","booking_nbr","aff","property","name","formatFullLocation","formatAmount","total","currency","format","booked_on","date","backgroundShown","label","status","description","variant","show","onButtonClick","optionClicked","emit","tag","id","variants","irBookingHeaderCss","IrBookingHeaderStyle0","IrBookingHeader","handleButtonClick","link","linkChanged","Host","mode","type","activeLink","onClick","bookingNumber","BookingListingService","Token","getExposedGuestBookings","params","token","getToken","MissingTokenError","data","axios","post","Object","assign","extras","value","Error","bookings","total_count","irBookingOverviewCss","IrBookingOverviewStyle0","IrBookingOverview","bookingListingService","commonService","CommonService","propertyService","PropertyService","paymentService","PaymentService","propertyid","initializeServices","initializeApp","setToken","showAllBookings","page_mode","isLoading","requests","unshift","getExposedBooking","language","getBookings","Promise","all","undefined","error","console","start_row","currentPage","maxPages","end_row","property_id","newIds","forEach","b","selectedMenuIds","modifyCancelBooking","selectedBookingIdx","findIndex","handlePageChange","e","stopImmediatePropagation","stopPropagation","detail","handleLinkChanged","handleBookingCancelation","bookingCancelation","openDialog","handleMenuItemChange","v","handleBlEvents","selectedBooking","bl_routing","route","processPayment","paymentCode","find","prePaymentAmount","paymentMethod","app_store","allowed_payment_methods","apm","amount","GetExposedApplicablePolicies","book_date","app_data","room_type_id","rate_plan_id","currency_id","userPreferences","language_id","Number","GeneratePaymentCaller","_a","email","guest","pgw_id","toString","onRedirect","url","window","location","href","onScriptRun","script","runScriptAndRemove","renderMenuTrigger","slot","width","height","viewBox","fill","xmlns","d","Array","map","p","totalPages","Math","round","be","menuItems","prepayment_amount","push","item","Fragment","onMouseEnter","hoveredBooking","onMouseLeave","colSpan","_b","onMenuItemClick","current","cn","onOptionClicked","log","ref","el","_c","cancelation","_d","rooms","rateplan","onCancelationResult","state","BeLogoFooter","props","__rest","irFooterCss","IrFooterStyle0","IrFooter","socials","renderLocationField","field","withComma","renderPropertyEmail","contacts","c","contactDialog","openModal","buttonStyles","padding","social_media","media","target","title","version","closeButton","style","city","area","_e","postal","_f","country","_g","phone","_j","_h","phone_prefix","_k","irInterceptorCss","IrInterceptorStyle0","IrInterceptor","ignoredErrorRoutes","setupAxiosInterceptors","interceptors","request","use","handleRequest","bind","handleError","response","handleResponse","extractEndpoint","split","isHandledEndpoint","handledEndpoints","includes","config","extractedUrl","interceptor_requests","ExceptionMsg","trim","lastFailedRequest","errorMessage","alertRef","reject","retryLastRequest","closeModal","svgClassName","irInvoiceCss","IrInvoiceStyle0","IrInvoice","authService","AuthService","payment_option","baseUrl","defaults","baseURL","withCredentials","isAuthenticated","checkUserAuthState","getBEToken","fetchData","detectPaymentOrigin","handleBookingNumberChange","oldValue","bookingNbr","login","option","getExposedLanguage","getExposedProperty","propertyId","aname","aName","perma_link","results","setHours","hour","setMinutes","minute","setAmountAndCancelationPolicy","isBefore","cancelation_message","t","combined_statement","guarantee_message","renderBookingDetailHeader","total_nights","getDateDifference","nbr_of_persons","occupancy","adult_nbr","children_nbr","total_rooms","length","localizedWords","entries","Lcz_Nights","Lcz_night","Lcz_Persons","Lcz_Person","Lcz_Rooms","Lcz_Room","getPropertyEmail","subject","encodedSubject","encodeURIComponent","renderPaymentText","paymentOption","is_payment_gateway","Lcz_YouHavePaid","Lcz_DueAmountNow","financial","due_amount","Lcz_YourCardWillBeCharged","gross_total","_","i","google_maps_url","latitude","longitude","headerShown","showBookingCode","website","space_theme","logo","menuShown","locationShown","Lcz_GetDirections","Lcz_CancelBooking","alertDialog","Lcz_BookingPreference","Lcz_BookedBy","first_name","last_name","Lcz_CheckIn","Lcz_From","time_constraints","check_in_from","Lcz_CheckOut","Lcz_Before","check_out_till","Lcz_ArrivalTime","arrival","remark","tax_statement","room","identifier","roomtype","Lcz_GuestName","selected_variation","adult_child_offering","Lcz_MealPlan","innerHTML","Lcz_PaymentDetails","Lcz_Total","Lcz_ImportantInformation","important_info","parking_offering","Lcz_At","pricing","pets_acceptance","_l","baby_cot_offering","_m","background_image","src","_o","alt","_p","_q","loading","htmlFor","Lcz_Phone","_r","_t","_s","_u","footerShown","isRequestPending","async","RequestBookingCancelation","irNavCss","IrNavStyle0","IrNav","page","setTimeout","dialogRef","handleCloseDialog","renderDialogBody","currencies","languages","user_data","checkout_store","userFormData","firstName","lastName","country_id","mobile","mobile_number","country_phone_prefix","renderLocation","affiliate","filter","f","join","renderLanguageTrigger","isBookingListing","toLowerCase","l","toLocaleString","minimumFractionDigits","maximumFractionDigits","replace","handleSignIn","injected","modalRef","handleItemSelect","screenChanged","routing","signOut","isInjected","sites","is_signed_in","showCurrency","iconName","sheetRef","openSheet","haveLeftIcon","open","Lcz_BookingCode","Lcz_SignIn","buttonClassName","irPaginationCss","IrPaginationStyle0","IrPagination","getPages","wingSize","pages","minPageShown","disabled","pageChange","haveRightIcon"],"sources":["src/components/ir-booking-engine/ir-booking-listing/ir-booking-card/ir-booking-card.css?tag=ir-booking-card&encapsulation=shadow","src/components/ir-booking-engine/ir-booking-listing/ir-booking-card/ir-booking-card.tsx","src/components/ir-booking-engine/ir-booking-listing/ir-booking-header/ir-booking-header.css?tag=ir-booking-header&encapsulation=shadow","src/components/ir-booking-engine/ir-booking-listing/ir-booking-header/ir-booking-header.tsx","src/services/api/booking_listing.service.ts","src/components/ir-booking-engine/ir-booking-listing/ir-booking-overview/ir-booking-overview.css?tag=ir-booking-overview&encapsulation=scoped","src/components/ir-booking-engine/ir-booking-listing/ir-booking-overview/ir-booking-overview.tsx","src/assets/be_logo_footer.tsx","src/components/ir-booking-engine/ir-footer/ir-footer.css?tag=ir-footer&encapsulation=shadow","src/components/ir-booking-engine/ir-footer/ir-footer.tsx","src/components/ir-interceptor/ir-interceptor.css?tag=ir-interceptor&encapsulation=shadow","src/components/ir-interceptor/ir-interceptor.tsx","src/components/ir-invoice/ir-invoice.css?tag=ir-invoice&encapsulation=scoped","src/components/ir-invoice/ir-invoice.tsx","src/components/ir-booking-engine/ir-nav/ir-nav.css?tag=ir-nav&encapsulation=scoped","src/components/ir-booking-engine/ir-nav/ir-nav.tsx","src/components/ir-booking-engine/ir-booking-listing/ir-pagination/ir-pagination.css?tag=ir-pagination&encapsulation=shadow","src/components/ir-booking-engine/ir-booking-listing/ir-pagination/ir-pagination.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n","import { Booking } from '@/models/booking.dto';\r\nimport { BookingListingAppService } from '@/services/app/booking-listing.service';\r\nimport { formatAmount, formatFullLocation } from '@/utils/utils';\r\nimport { Component, Event, EventEmitter, Prop, Watch, h } from '@stencil/core';\r\nimport { differenceInCalendarDays, format } from 'date-fns';\r\n\r\n@Component({\r\n  tag: 'ir-booking-card',\r\n  styleUrl: 'ir-booking-card.css',\r\n  shadow: true,\r\n})\r\nexport class IrBookingCard {\r\n  @Prop() booking: Booking;\r\n  @Prop() aff: boolean = false;\r\n\r\n  @Event() optionClicked: EventEmitter<{ tag: string; id: number }>;\r\n\r\n  private totalNights: number;\r\n  private bookingListingAppService = new BookingListingAppService();\r\n\r\n  componentWillLoad() {\r\n    if (!this.booking) {\r\n      return;\r\n    }\r\n    this.init();\r\n  }\r\n  @Watch('booking')\r\n  handleBookingChange(newValue) {\r\n    if (newValue) {\r\n      this.init();\r\n    }\r\n  }\r\n  getBadgeVariant(code: string) {\r\n    if (code === '001') {\r\n      return 'pending';\r\n    } else if (code === '002') {\r\n      return 'success';\r\n    }\r\n    return 'error';\r\n  }\r\n\r\n  private init() {\r\n    this.totalNights = differenceInCalendarDays(new Date(this.booking.to_date), new Date(this.booking.from_date));\r\n  }\r\n\r\n  render() {\r\n    const { cancel, payment, view } = this.bookingListingAppService.getBookingActions(this.booking);\r\n    return (\r\n      <div class=\"relative flex flex-col space-y-1.5 rounded-xl  bg-gray-100 p-6 text-sm \" key={this.booking.booking_nbr}>\r\n        {this.aff && (\r\n          <div class=\"\">\r\n            <span class=\"font-medium\">{this.booking.property.name}</span>\r\n            <span class=\"mx-2 text-xs text-gray-700\">{formatFullLocation(this.booking.property)}</span>\r\n          </div>\r\n        )}\r\n        <div class=\"flex items-center justify-between text-base\">\r\n          <h3 class=\" font-semibold leading-none tracking-tight\">Booking reference: {this.booking.booking_nbr}</h3>\r\n          <p class={'font-semibold'}>{formatAmount(this.booking.total, this.booking.currency.code)}</p>\r\n        </div>\r\n        <p>\r\n          <span class=\"font-medium\">Booked on: </span>\r\n          {format(new Date(this.booking.booked_on.date), 'dd-MMM-yyyy')}\r\n        </p>\r\n        <p>\r\n          <span class=\"font-medium\">Check-in: </span>\r\n          {format(new Date(this.booking.from_date), 'EEE, dd MMM yyyy')}\r\n        </p>\r\n        <p>\r\n          <span class=\"font-medium\">Duration: </span>\r\n          {this.totalNights} {this.totalNights > 1 ? 'nights' : 'night'}\r\n        </p>\r\n        <p class=\"flex items-center\">\r\n          {<ir-badge backgroundShown={false} label={this.booking.status.description} variant={this.getBadgeVariant(this.booking.status.code)}></ir-badge>}\r\n        </p>\r\n\r\n        {(view.show || payment.show || cancel.show) && (\r\n          <div class=\"mt-2.5 flex flex-col items-center justify-end gap-2.5 pt-2\">\r\n            {payment.show && <ir-button class={'w-full'} label={payment.label} onButtonClick={() => this.optionClicked.emit({ tag: 'pay', id: 2 })}></ir-button>}\r\n            {cancel.show && <ir-button class=\"w-full\" variants=\"outline\" label={cancel.label} onButtonClick={() => this.optionClicked.emit({ tag: 'cancel', id: 3 })}></ir-button>}\r\n            {view.show && <ir-button class=\"w-full\" variants=\"outline\" label={view.label} onButtonClick={() => this.optionClicked.emit({ tag: 'view', id: 1 })}></ir-button>}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n.link {\r\n  font-size: 0.875rem;\r\n  font-weight: 500;\r\n  color: #344054;\r\n}\r\n.link:hover {\r\n  text-decoration: underline;\r\n}\r\n.link.active {\r\n  color: hsl(var(--brand-600, 215, 87%, 51%));\r\n}\r\n","import { Component, Event, EventEmitter, Host, Prop, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-booking-header',\r\n  styleUrl: 'ir-booking-header.css',\r\n  shadow: true,\r\n})\r\nexport class IrBookingHeader {\r\n  @Prop() mode: 'single' | 'multi' = 'multi';\r\n  @Prop() bookingNumber: number | null = null;\r\n  @Prop() activeLink: 'single_booking' | 'all_booking' = 'single_booking';\r\n\r\n  @Event() linkChanged: EventEmitter<'single_booking' | 'all_booking'>;\r\n  handleButtonClick(link: 'single_booking' | 'all_booking') {\r\n    this.linkChanged.emit(link);\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"flex  items-center  justify-between gap-2.5 py-4\">\r\n          <h2 class=\"text-lg font-semibold leading-none tracking-tight\">Bookings</h2>\r\n          {this.mode === 'multi' && (\r\n            <div class=\"flex items-center gap-2.5\">\r\n              <button\r\n                type=\"button\"\r\n                class={`link leading-none tracking-tight ${this.activeLink === 'single_booking' ? 'active' : ''}`}\r\n                onClick={() => this.handleButtonClick('single_booking')}\r\n              >\r\n                Booking #{this.bookingNumber}\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                class={`link leading-none tracking-tight ${this.activeLink === 'all_booking' ? 'active' : ''}`}\r\n                onClick={() => this.handleButtonClick('all_booking')}\r\n              >\r\n                All Bookings\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","import { MissingTokenError, Token } from '@/models/Token';\r\nimport axios from 'axios';\r\n\r\nexport class BookingListingService extends Token {\r\n  public async getExposedGuestBookings(params: { property_id: string | number; start_row: number; end_row: number; total_count: number }) {\r\n    const token = this.getToken();\r\n    if (!token) {\r\n      throw new MissingTokenError();\r\n    }\r\n    const { data } = await axios.post(`/Get_Exposed_Guest_Bookings?Ticket=${token}`, {\r\n      ...params,\r\n      extras: [\r\n        {\r\n          key: 'payment_code',\r\n          value: '',\r\n        },\r\n        {\r\n          key: 'prepayment_amount',\r\n          value: '',\r\n        },\r\n      ],\r\n    });\r\n    if (data['ExceptionMsg'] !== '') {\r\n      throw new Error(data['ExceptionMsg']);\r\n    }\r\n    return { bookings: data['My_Result'], total_count: data['My_Params_Get_Exposed_Guest_Bookings'].total_count };\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n.ct-menu-container {\r\n  border-radius: min(var(--radius, 0.5rem), 0.5rem);\r\n  border: 1px solid var(--gray-300, #d0d5dd);\r\n  padding: 0 0rem;\r\n  display: flex;\r\n  align-items: center;\r\n  width: fit-content;\r\n}\r\n.ct-menu-trigger {\r\n  padding: 0.25rem 0.5rem;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.ct-menu-button {\r\n  padding: 0.25rem 0.5rem;\r\n}\r\n.ct-menu-button:dir(rtl) {\r\n  border-left: 1px solid var(--gray-300, #d0d5dd);\r\n}\r\n.ct-menu-button:dir(ltr) {\r\n  border-right: 1px solid var(--gray-300, #d0d5dd);\r\n}\r\n.booking-details-btn {\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: min(var(--radius, 0.5rem), 0.5rem);\r\n  border: 1px solid var(--gray-300, #d0d5dd);\r\n}\r\n.group-hover[data-state='hovered'] {\r\n  background: var(--gray-100, #f2f4f7) !important; /* Example hover color */\r\n}\r\n.ir-table-cell[data-state='affiliate'] {\r\n  padding-bottom: 0;\r\n}\r\n.ir-table-cell[data-state='booking-affiliate'] {\r\n  padding-top: 0.5rem;\r\n}\r\n.property-location {\r\n  font-weight: 500;\r\n  font-size: small;\r\n  color: #475467;\r\n}\r\n","import { Component, Host, Listen, Prop, State, h, Event, EventEmitter, Fragment } from '@stencil/core';\r\nimport { Booking } from '@/models/booking.dto';\r\nimport { BookingListingService } from '@/services/api/booking_listing.service';\r\nimport { CommonService } from '@/services/api/common.service';\r\nimport { PropertyService } from '@/services/api/property.service';\r\nimport { BookingListingAppService } from '@/services/app/booking-listing.service';\r\nimport { cn, formatAmount, formatFullLocation, runScriptAndRemove } from '@/utils/utils';\r\nimport { differenceInCalendarDays, format } from 'date-fns';\r\nimport app_store from '@/stores/app.store';\r\nimport { PaymentService } from '@/services/api/payment.service';\r\n\r\n@Component({\r\n  tag: 'ir-booking-overview',\r\n  styleUrl: 'ir-booking-overview.css',\r\n  scoped: true,\r\n})\r\nexport class IrBookingOverview {\r\n  @Prop() token: string;\r\n  @Prop() propertyid: number;\r\n  @Prop() language: string;\r\n  @Prop() maxPages: number = 10;\r\n  @Prop() showAllBookings: boolean = true;\r\n  @Prop() be: boolean = false;\r\n  @Prop() aff: boolean = false;\r\n\r\n  @State() isLoading = false;\r\n  @State() bookings: Booking[] = [];\r\n  @State() currentPage = 1;\r\n  @State() total_count = 1;\r\n  @State() bookingNumber = null;\r\n  @State() page_mode: 'single' | 'multi' = 'multi';\r\n  @State() activeLink: 'single_booking' | 'all_booking' = 'single_booking';\r\n  @State() selectedBooking: Booking | null;\r\n  @State() selectedMenuIds: Record<string, number> = {};\r\n  @State() hoveredBooking = null;\r\n\r\n  @Event() bl_routing: EventEmitter<{\r\n    route: 'booking' | 'booking-details';\r\n    params?: unknown;\r\n  }>;\r\n\r\n  private bookingListingService = new BookingListingService();\r\n  private commonService = new CommonService();\r\n  private propertyService = new PropertyService();\r\n  private bookingListingAppService = new BookingListingAppService();\r\n  private paymentService = new PaymentService();\r\n\r\n  private booking: Booking;\r\n  private bookingCancelation: HTMLIrBookingCancelationElement;\r\n  async componentWillLoad() {\r\n    if (!this.propertyid) {\r\n      throw new Error('missing property id');\r\n    }\r\n    this.initializeServices();\r\n    this.initializeApp();\r\n  }\r\n  initializeServices() {\r\n    this.bookingListingService.setToken(this.token);\r\n    this.propertyService.setToken(this.token);\r\n    this.commonService.setToken(this.token);\r\n    if (!this.showAllBookings) {\r\n      this.page_mode = 'multi';\r\n    }\r\n  }\r\n  async initializeApp() {\r\n    try {\r\n      this.isLoading = true;\r\n      let requests = [];\r\n      if (this.bookingNumber && this.page_mode === 'single') {\r\n        requests.unshift(this.propertyService.getExposedBooking({ booking_nbr: this.bookingNumber, language: this.language }, false));\r\n      } else if (this.page_mode === 'multi') {\r\n        requests.unshift(this.getBookings());\r\n      }\r\n      const [bookings] = await Promise.all(requests);\r\n      this.booking = this.page_mode === 'single' ? bookings : undefined;\r\n      this.bookings = this.page_mode === 'single' ? [bookings] : bookings;\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n  async getBookings() {\r\n    try {\r\n      this.isLoading = true;\r\n      const start_row = (this.currentPage - 1) * this.maxPages;\r\n      const end_row = start_row + this.maxPages;\r\n      const { bookings, total_count } = await this.bookingListingService.getExposedGuestBookings({ property_id: this.propertyid, start_row, end_row, total_count: 0 });\r\n      this.total_count = total_count;\r\n      const newIds = {};\r\n      bookings.forEach(b => {\r\n        newIds[b.booking_nbr] = 1;\r\n      });\r\n      this.selectedMenuIds = { ...newIds };\r\n\r\n      return bookings;\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n  modifyCancelBooking(booking_nbr: string) {\r\n    const bookings = [...this.bookings];\r\n    const selectedBookingIdx = bookings.findIndex(b => b.booking_nbr === booking_nbr);\r\n    if (selectedBookingIdx === -1) {\r\n      return;\r\n    }\r\n    bookings[selectedBookingIdx] = {\r\n      ...bookings[selectedBookingIdx],\r\n      status: {\r\n        code: '003',\r\n        description: 'Cancelled',\r\n      },\r\n    };\r\n    this.bookings = [...bookings];\r\n  }\r\n  getBadgeVariant(code: string) {\r\n    if (code === '001') {\r\n      return 'pending';\r\n    } else if (code === '002') {\r\n      return 'success';\r\n    }\r\n    return 'error';\r\n  }\r\n\r\n  @Listen('pageChange')\r\n  async handlePageChange(e: CustomEvent<number>) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    this.currentPage = e.detail;\r\n    this.bookings = await this.getBookings();\r\n  }\r\n  @Listen('linkChanged')\r\n  async handleLinkChanged(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    this.activeLink = e.detail;\r\n    if (this.activeLink === 'all_booking') {\r\n      this.page_mode = 'multi';\r\n      this.bookings = await this.getBookings();\r\n    } else {\r\n      if (this.booking) {\r\n        this.page_mode = 'single';\r\n        this.bookings = [this.booking];\r\n      }\r\n    }\r\n  }\r\n  private handleBookingCancelation() {\r\n    this.bookingCancelation.openDialog();\r\n  }\r\n  private handleMenuItemChange(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    const v = e.detail;\r\n    this.handleBlEvents(v);\r\n    this.selectedMenuIds[this.selectedBooking.booking_nbr] = v;\r\n  }\r\n  private handleBlEvents(id: number) {\r\n    switch (id) {\r\n      case 1:\r\n        return this.bl_routing.emit({ route: 'booking-details', params: { booking: this.selectedBooking } });\r\n      case 2:\r\n        return this.processPayment();\r\n      case 3:\r\n        return this.handleBookingCancelation();\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n  private async processPayment() {\r\n    const paymentCode = this.selectedBooking.extras.find(e => e.key === 'payment_code');\r\n    if (!paymentCode) {\r\n      console.error('missing paymentcode');\r\n      return;\r\n    }\r\n    const prePaymentAmount = this.selectedBooking.extras.find(e => e.key === 'prepayment_amount');\r\n    if (!prePaymentAmount) {\r\n      console.error('missing prepayment amount');\r\n      return;\r\n    }\r\n    const paymentMethod = app_store.property.allowed_payment_methods.find(apm => apm.code === paymentCode.value);\r\n    if (!paymentMethod) {\r\n      console.error('Invalid payment method');\r\n      return;\r\n    }\r\n    const { amount } = await this.paymentService.GetExposedApplicablePolicies({\r\n      book_date: new Date(this.selectedBooking.booked_on.date),\r\n      token: app_store.app_data.token,\r\n      params: {\r\n        booking_nbr: this.selectedBooking.booking_nbr,\r\n        property_id: app_store.app_data.property_id,\r\n        room_type_id: 0,\r\n        rate_plan_id: 0,\r\n        currency_id: this.selectedBooking.currency.id,\r\n        language: app_store.userPreferences.language_id,\r\n      },\r\n    });\r\n    if (amount || Number(prePaymentAmount.value) > 0) {\r\n      await this.paymentService.GeneratePaymentCaller({\r\n        token: app_store.app_data.token,\r\n        params: {\r\n          booking_nbr: this.selectedBooking.booking_nbr,\r\n          amount: Number(amount || prePaymentAmount.value) ?? 0,\r\n          currency_id: this.selectedBooking.currency.id,\r\n          email: this.selectedBooking.guest.email,\r\n          pgw_id: paymentMethod.id.toString(),\r\n        },\r\n        onRedirect: url => (window.location.href = url),\r\n        onScriptRun: script => runScriptAndRemove(script),\r\n      });\r\n    }\r\n  }\r\n  renderMenuTrigger() {\r\n    return (\r\n      <div slot=\"menu-trigger\" class=\"ct-menu-trigger\">\r\n        {' '}\r\n        <svg width=\"15\" height=\"15\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <path\r\n            d=\"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z\"\r\n            fill=\"currentColor\"\r\n            fill-rule=\"evenodd\"\r\n            clip-rule=\"evenodd\"\r\n          ></path>\r\n        </svg>\r\n      </div>\r\n    );\r\n  }\r\n  // private handlePayment() {\r\n\r\n  // }\r\n  render() {\r\n    if (this.isLoading) {\r\n      return (\r\n        <div class=\"flex h-screen w-full flex-col place-content-center\">\r\n          <div class=\" flex h-screen flex-col gap-4 md:hidden\">\r\n            {[...Array(5)].map(p => (\r\n              <div key={p} class=\"block h-64 w-full animate-pulse rounded-md bg-gray-200\"></div>\r\n            ))}\r\n          </div>\r\n          <div class=\"hidden h-screen flex-col  md:flex\">\r\n            <div class=\"block h-[50vh] w-full animate-pulse rounded-md  bg-gray-200\"></div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    const totalPages = Math.round(this.total_count / this.maxPages);\r\n    return (\r\n      <Host>\r\n        <section class={`main-container ${!this.be ? 'main-container-padding' : ''}`}>\r\n          <div class=\"ir-table-container mx-auto hidden max-w-6xl flex-1 overflow-x-hidden p-4 shadow-md md:block\">\r\n            {this.showAllBookings && (\r\n              <ir-booking-header bookingNumber={this.bookingNumber} activeLink={this.activeLink} mode={this.bookingNumber ? 'multi' : 'single'}></ir-booking-header>\r\n            )}\r\n            <div class=\"max-w-full overflow-x-auto\">\r\n              <table class=\"ir-table\">\r\n                <thead>\r\n                  <tr class=\"ir-table-header\">\r\n                    <th class=\"ir-table-head\">Status</th>\r\n                    <th class=\"ir-table-head\">Booking reference</th>\r\n                    <th class=\"ir-table-head md:hidden lg:table-cell\">Booking date</th>\r\n                    <th class=\"ir-table-head\">Check-in</th>\r\n                    <th class=\"ir-table-head\">Duration</th>\r\n                    <th class=\"ir-table-head\">Total price</th>\r\n                    <th class=\"ir-table-head sr-only\">pay now</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody class=\" \">\r\n                  {this.bookings?.map(booking => {\r\n                    const totalNights = differenceInCalendarDays(new Date(booking.to_date), new Date(booking.from_date));\r\n                    const { cancel, payment, view } = this.bookingListingAppService.getBookingActions(booking);\r\n                    const menuItems = [];\r\n                    if (payment.show) {\r\n                      const prepayment_amount = booking.extras.find(e => e.key === 'prepayment_amount');\r\n                      if (prepayment_amount) {\r\n                        menuItems.push({ id: 2, item: payment.label });\r\n                      }\r\n                    }\r\n                    if (cancel.show) {\r\n                      menuItems.push({ id: 3, item: cancel.label });\r\n                    }\r\n                    if (view.show) {\r\n                      menuItems.push({ id: 1, item: view.label });\r\n                    }\r\n                    this.selectedMenuIds[booking.booking_nbr] = menuItems[0]?.id;\r\n                    return (\r\n                      <Fragment>\r\n                        {this.aff && (\r\n                          <tr\r\n                            class=\"ir-table-row group-hover\"\r\n                            onMouseEnter={() => {\r\n                              this.hoveredBooking = booking.booking_nbr;\r\n                            }}\r\n                            onMouseLeave={() => (this.hoveredBooking = null)}\r\n                            key={booking.booking_nbr}\r\n                            data-state={this.hoveredBooking === booking.booking_nbr ? 'hovered' : ''}\r\n                          >\r\n                            <th class=\"ir-table-cell\" data-state=\"affiliate\" colSpan={7}>\r\n                              {booking.property.name} <span class={'property-location'}>{formatFullLocation(booking.property)}</span>\r\n                            </th>\r\n                          </tr>\r\n                        )}\r\n                        <tr\r\n                          class=\"ir-table-row group-hover\"\r\n                          onMouseEnter={() => {\r\n                            this.hoveredBooking = booking.booking_nbr;\r\n                          }}\r\n                          onMouseLeave={() => (this.hoveredBooking = null)}\r\n                          key={booking.booking_nbr}\r\n                          data-state={this.hoveredBooking === booking.booking_nbr ? 'hovered' : ''}\r\n                        >\r\n                          <td class=\"ir-table-cell\" data-state={this.aff ? 'booking-affiliate' : ''}>\r\n                            {<ir-badge label={booking.status.description} variant={this.getBadgeVariant(booking.status.code)}></ir-badge>}\r\n                          </td>\r\n                          <td class=\"ir-table-cell\" data-state={this.aff ? 'booking-affiliate' : ''}>\r\n                            {booking.booking_nbr}\r\n                          </td>\r\n                          <td class=\"ir-table-cell  md:hidden lg:table-cell\" data-state={this.aff ? 'booking-affiliate' : ''}>\r\n                            {format(new Date(booking.booked_on.date), 'dd-MMM-yyyy')}\r\n                          </td>\r\n                          <td class=\"ir-table-cell\" data-state={this.aff ? 'booking-affiliate' : ''}>\r\n                            {format(new Date(booking.from_date), 'dd-MMM-yyyy')}\r\n                          </td>\r\n                          <td class=\"ir-table-cell\" data-state={this.aff ? 'booking-affiliate' : ''}>\r\n                            {totalNights} {totalNights > 1 ? 'nights' : 'night'}\r\n                          </td>\r\n                          <td class=\"ir-table-cell\" data-state={this.aff ? 'booking-affiliate' : ''}>\r\n                            {formatAmount(booking.total, booking.currency.code)}\r\n                          </td>\r\n                          <td class=\"ir-table-cell\" data-state={this.aff ? 'booking-affiliate' : ''}>\r\n                            {payment.show || cancel.show ? (\r\n                              <div class={'ct-menu-container'}>\r\n                                <button\r\n                                  onClick={() => {\r\n                                    this.selectedBooking = booking;\r\n                                    this.handleBlEvents(this.selectedMenuIds[booking.booking_nbr] ?? menuItems[0].id);\r\n                                  }}\r\n                                  class=\"ct-menu-button\"\r\n                                >\r\n                                  {menuItems.find(p => p.id === this.selectedMenuIds[booking.booking_nbr])?.item}\r\n                                </button>\r\n                                <ir-menu\r\n                                  onMenuItemClick={e => {\r\n                                    this.selectedBooking = booking;\r\n                                    this.handleMenuItemChange(e);\r\n                                  }}\r\n                                  data={menuItems}\r\n                                >\r\n                                  {this.renderMenuTrigger()}\r\n                                </ir-menu>\r\n                              </div>\r\n                            ) : (\r\n                              view.show && (\r\n                                <button\r\n                                  class=\"booking-details-btn\"\r\n                                  onClick={() => {\r\n                                    this.bl_routing.emit({\r\n                                      route: 'booking-details',\r\n                                      params: {\r\n                                        booking,\r\n                                      },\r\n                                    });\r\n                                  }}\r\n                                >\r\n                                  Booking details\r\n                                </button>\r\n                              )\r\n                            )}\r\n                          </td>\r\n                        </tr>\r\n                      </Fragment>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            {this.page_mode === 'multi' && (\r\n              <div class=\"px-[1.25rem] pt-[1rem] \">\r\n                <ir-pagination total={totalPages} current={this.currentPage}></ir-pagination>\r\n              </div>\r\n            )}\r\n          </div>\r\n          <section\r\n            class={cn('flex-1 space-y-4  md:hidden', {\r\n              'px-4': !this.be,\r\n            })}\r\n          >\r\n            {this.showAllBookings && <ir-booking-header bookingNumber={this.bookingNumber} mode={this.bookingNumber ? 'multi' : 'single'}></ir-booking-header>}\r\n            {this.bookings?.map(booking => (\r\n              <ir-booking-card\r\n                aff={this.aff}\r\n                booking={booking}\r\n                key={booking.booking_nbr}\r\n                onOptionClicked={(e: CustomEvent) => {\r\n                  this.selectedBooking = booking;\r\n                  const { id } = e.detail;\r\n                  console.log(id);\r\n                  this.handleBlEvents(id);\r\n                }}\r\n              ></ir-booking-card>\r\n            ))}\r\n            {this.page_mode === 'multi' && <ir-pagination total={totalPages} current={this.currentPage}></ir-pagination>}\r\n          </section>\r\n\r\n          <ir-booking-cancelation\r\n            ref={el => (this.bookingCancelation = el)}\r\n            booking_nbr={this.selectedBooking?.booking_nbr}\r\n            cancelation={this.selectedBooking?.rooms[0].rateplan.cancelation}\r\n            onCancelationResult={e => {\r\n              e.stopImmediatePropagation();\r\n              e.stopPropagation();\r\n              const { state, booking_nbr } = e.detail;\r\n              if (state === 'success') {\r\n                this.modifyCancelBooking(booking_nbr);\r\n              }\r\n            }}\r\n          ></ir-booking-cancelation>\r\n        </section>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","import { FunctionalComponent, h } from '@stencil/core';\r\nimport { JSXBase } from '@stencil/core/internal';\r\ninterface BeLogoFooterProps extends JSXBase.SVGAttributes<SVGElement> {}\r\nconst BeLogoFooter: FunctionalComponent<BeLogoFooterProps> = ({ width, height, ...props }) => {\r\n  return (\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 707 146\" width={width || 200} height={height || 70} {...props}>\r\n      <path\r\n        fill=\"#99C6D5\"\r\n        d=\"M13.826 4.14703C15.5665 3.74774 17.5649 4.2011 19.2061 4.83638C21.865 5.86563 23.8223 8.09319 24.9458 10.6672Q25.2406 11.3282 25.4684 12.0152Q25.6962 12.7022 25.8548 13.4083Q26.0134 14.1145 26.1012 14.8329Q26.1889 15.5513 26.2051 16.2749Q26.2212 16.9985 26.1655 17.7201Q26.1098 18.4417 25.9828 19.1542Q25.8558 19.8667 25.6589 20.5632Q25.4619 21.2596 25.1968 21.9331C23.702 25.7053 21.3456 27.402 17.7058 28.9729C16.0158 28.8817 14.2942 28.7758 12.6841 28.2106Q12.1697 28.0282 11.6758 27.7959Q11.182 27.5637 10.7134 27.2839Q10.2448 27.0042 9.80608 26.6796Q9.36735 26.355 8.96276 25.9888Q8.55817 25.6225 8.19166 25.2182Q7.82514 24.8139 7.50026 24.3754Q7.17539 23.937 6.89532 23.4686Q6.61525 23.0003 6.38271 22.5066C4.83287 19.2235 4.92288 15.2273 6.15013 11.8558C7.60255 7.86566 10.0975 5.89332 13.826 4.14703Z\"\r\n      />\r\n      <path\r\n        fill=\"#99C6D5\"\r\n        d=\"M211.108 96.47L215.387 96.3868L215.63 97.0364C215.326 98.4208 214.519 99.6605 213.75 100.831C208.224 109.241 199.998 115.657 190.01 117.712C178.243 120.134 169.343 117.055 159.623 110.662C159.612 110.581 159.597 110.488 159.565 110.413C158.817 108.653 154.619 105.077 152.91 104.249C159.213 103.557 165.351 102.06 171.708 101.515C176.048 102.665 179.076 105.982 183.687 106.992C192.815 108.99 193.2 102.557 199.713 99.1293C203.163 97.3138 207.299 96.974 211.108 96.47Z\"\r\n      />\r\n      <path\r\n        fill=\"#99C6D5\"\r\n        d=\"M287.367 90.2577Q294.351 89.7717 301.325 90.3908C301.374 90.5708 301.397 90.7439 301.424 90.9275C301.434 90.9939 301.447 91.0599 301.454 91.1266C301.792 94.0194 296.383 101.8 294.473 104.181C288.274 111.909 279.88 117.204 269.925 118.267C257.991 119.543 250.486 116.301 241.428 108.974C241.295 107.617 235.45 101.826 234.288 100.014C233.073 98.1197 232.521 96.521 233.013 94.2951C235.374 92.6346 246.911 92.8109 250.004 93.2879C253.232 95.2459 255.731 102.006 260.534 104.883C263.749 106.808 269.349 107.729 272.967 106.82C280.236 104.993 281.987 96.6217 285.41 91.2324C285.922 90.4268 286.514 90.4366 287.367 90.2577Z\"\r\n      />\r\n      <path\r\n        fill=\"#104267\"\r\n        d=\"M451.787 88.8768C456.159 88.2686 466.593 88.2707 470.796 89.6712C472.221 90.9453 474.064 95.4076 475.268 97.303C478.027 101.647 481.848 105.245 486.988 106.375C497.511 108.688 500.388 104.362 505.203 96.1009C506.104 94.5555 507.233 92.6599 508.787 91.7021C510.558 90.6109 520.658 91.4187 522.896 91.9936Q522.898 92.2136 522.889 92.4334C522.785 94.81 521.153 97.6371 519.431 99.23C519.457 99.3718 519.478 99.53 519.451 99.6732C518.661 103.959 511.149 110.282 507.723 112.615C500.045 117.847 489.841 119.631 480.749 117.904C469.622 115.79 461.005 108.684 456.179 98.5449C454.757 95.5589 453.668 91.6066 451.837 88.948L451.787 88.8768Z\"\r\n      />\r\n      <path\r\n        fill=\"#104267\"\r\n        d=\"M375.552 87.8385C378.152 87.6472 381.42 87.213 383.968 87.7134C385.06 87.9281 386.188 88.3018 387.023 89.0677C390.716 92.4547 391.549 98.9142 397.729 103.664C402.099 107.023 407.235 107.347 412.527 106.654Q412.639 106.614 412.749 106.57C417.053 104.874 421.826 97.9571 423.577 93.8219C424.344 92.0092 425.013 90.1879 424.237 88.262C429.658 88.2083 435.157 88.0106 440.566 88.3864C440.767 88.8854 440.84 89.3825 440.758 89.9167C440.221 93.4227 437.671 99.4951 434.801 101.648C434.89 102.576 433.24 104.6 432.647 105.343C426.834 112.628 417.745 117.201 408.576 118.226C394.354 119.817 380.081 113.353 373.632 100.204C372.246 97.3798 370.004 90.1023 367.743 88.3362C367.72 88.3187 367.697 88.3019 367.675 88.2847Q371.626 88.2815 375.552 87.8385Z\"\r\n      />\r\n      <path\r\n        fill=\"#104267\"\r\n        d=\"M402.65 35.7234C408.822 35.066 415.477 35.7122 421.223 38.1463C429.733 41.7513 436.441 49.1628 439.875 57.6589C441.163 60.8442 443.772 68.2532 442.423 71.4432C437.753 72.5876 429.764 71.4785 424.682 71.4705C425.338 67.697 423.934 64.2077 422.122 60.9604C418.702 54.8313 413.942 49.9098 407.063 47.9571C407.044 47.941 407.025 47.9239 407.006 47.9088C405.724 46.936 403.041 47.098 401.479 47.2522C392.801 48.1093 388.231 55.2389 386.271 63.1103C385.674 65.5066 385.292 69.516 383.732 71.3885C383.712 71.4127 383.691 71.4363 383.671 71.4601Q375.432 71.4629 367.193 71.5601C369.844 68.935 370.252 63.4994 371.476 60.0952Q372.846 56.3598 375.049 53.0465C381.78 42.7897 390.92 38.1669 402.65 35.7234Z\"\r\n      />\r\n      <path\r\n        fill=\"#99C6D5\"\r\n        d=\"M5.45016 37.2851L27.1258 37.3286C23.7661 49.5505 23.7566 61.472 23.7569 74.044C23.7572 89.1124 24.1294 102.033 26.8514 116.93C25.5373 117.4 8.147 116.917 5.22098 116.922C5.61452 111.796 7.08224 106.817 7.47922 101.705C8.03634 94.5314 7.88823 87.3251 7.94007 80.1364C8.00714 70.8352 8.1655 61.5037 7.72741 52.2099C7.48949 47.1629 5.70061 42.3316 5.45016 37.2851Z\"\r\n      />\r\n      <path\r\n        fill=\"#104267\"\r\n        d=\"M486.213 35.7235C494.603 35.1278 502.734 36.3555 509.848 41.0635C518.706 46.9255 523.686 56.4008 525.747 66.626C526.173 68.7399 526.896 72.1049 525.627 74.0108C522.988 75.4667 511.867 73.7231 508.579 73.3446C508.905 69.4507 507.638 65.9258 505.921 62.4889C502.771 56.1826 498.207 50.3346 491.309 48.0346C491.257 47.9755 491.197 47.911 491.131 47.8669C489.43 46.7212 486.027 46.9172 484.087 47.2632C475.848 48.732 471.23 55.2211 469.506 63.0854C468.861 66.0296 468.735 69.6297 466.992 72.1395C461.546 72.3425 456.099 72.0093 450.656 71.8658C452.897 68.954 453.472 63.9624 454.686 60.4916C455.863 57.1264 457.634 53.8539 459.713 50.9617C466.024 42.1834 475.731 37.4502 486.213 35.7235Z\"\r\n      />\r\n      <path\r\n        fill=\"#99C6D5\"\r\n        d=\"M265.382 35.7232Q266.773 35.6406 268.166 35.6031C276.412 35.4005 285.978 38.3984 292.017 44.1899C297.815 49.7505 304.189 62.3077 304.307 70.4424C304.321 71.371 304.177 72.2649 303.498 72.9416C301.968 74.4661 288.854 73.8172 285.926 73.8543C285.938 73.8332 285.95 73.8125 285.961 73.7911C285.979 73.7554 285.995 73.7186 286.013 73.6829C286.492 72.7324 286.571 71.9423 286.545 70.8795C286.385 64.4165 281.958 57.5148 277.41 53.1823C272.948 48.9318 267.728 47.0805 261.615 47.2388C260.243 47.5929 258.848 47.9402 257.591 48.6115C250.836 52.2188 246.983 60.3978 246.398 67.7936C246.18 70.5469 246.579 73.9445 245.781 76.5556C245.204 76.8963 228.633 77.9077 227.107 78.0573C230.588 75.3345 230.574 67.3573 231.91 63.2736C233.502 58.4062 235.675 53.7042 238.881 49.6835C245.366 41.5528 255.144 36.8664 265.382 35.7232Z\"\r\n      />\r\n      <path\r\n        fill=\"#99C6D5\"\r\n        d=\"M183.293 35.7232C190.419 35.4672 197.506 36.7236 203.622 40.5478C212.376 46.0214 217.405 54.7753 219.682 64.6343C220.497 68.1628 222.536 76.663 220.561 79.8281C214.901 79.7282 209.227 79.8109 203.566 79.8135C204.732 77.664 203.753 72.1825 203.27 69.7785C201.824 62.5848 197.401 54.7543 191.19 50.6474C186.599 47.6119 181.539 46.7058 176.173 47.8034C174.661 48.8393 172.842 49.4378 171.329 50.5505C165.21 55.0484 162.4 65.596 162.605 72.8033C162.711 76.5605 163.688 80.4783 163.132 84.2146C160.828 86.2081 149.488 86.3939 146.026 86.5126C146.599 72.5748 147.012 59.348 156.908 48.3184Q157.531 47.616 158.188 46.9457Q158.845 46.2753 159.534 45.6386Q160.224 45.0019 160.945 44.4005Q161.665 43.7991 162.415 43.2345Q163.165 42.6698 163.942 42.1434Q164.719 41.6169 165.522 41.13Q166.324 40.643 167.15 40.1968Q167.976 39.7506 168.823 39.3462Q169.67 38.9418 170.537 38.5803Q171.403 38.2188 172.286 37.901Q173.17 37.5832 174.068 37.3099Q174.966 37.0367 175.876 36.8087Q176.787 36.5807 177.708 36.3985Q178.629 36.2163 179.557 36.0804Q180.486 35.9444 181.421 35.8551Q182.355 35.7657 183.293 35.7232Z\"\r\n      />\r\n      <path\r\n        fill=\"#104267\"\r\n        d=\"M353.969 35.7232Q354.848 35.6148 355.732 35.5715C358.386 35.4421 362.924 35.2682 365.019 37.1728Q365.156 37.6379 365.207 38.1199C365.432 40.3968 362.899 52.8812 361.592 54.4731C361.004 53.8 360.163 53.2139 359.412 52.7288C350.479 46.9602 342.709 54.1248 334.101 55.9513L334.144 56.0599C336.151 61.1401 334.61 91.1919 335.249 99.9019C335.575 104.354 338.455 112.094 337.502 116.065Q337.478 116.164 337.45 116.262Q337.349 116.621 337.199 116.963Q326.889 116.76 316.58 116.973L316.25 116.768C315.755 115.77 318.442 104.074 318.554 101.938C318.969 93.9906 318.788 85.9745 318.782 78.0166C318.776 70.6575 318.96 63.2402 318.614 55.8902C318.382 50.9695 318.261 40.6909 314.552 37.3181Q324.462 37.1328 334.372 37.3204C334.612 37.6818 334.812 38.078 334.904 38.5041C335.514 41.3145 335.78 48.3837 334.205 50.7607C342.589 47.1364 341.014 39.0944 353.969 35.7232Z\"\r\n      />\r\n      <path\r\n        fill=\"#99C6D5\"\r\n        d=\"M132.059 3.5738L133.843 3.44921C135.955 4.73544 133.973 11.0415 133.699 13.2294C131.697 29.1994 131.895 45.2986 131.916 61.3597C131.926 69.4694 131.561 77.7911 132.006 85.8786C132.158 88.6307 133.151 91.2873 133.299 94.0708C133.711 101.781 133.068 109.437 135.213 116.979L117.459 116.937C116.305 116.974 115.166 117.023 114.016 116.878C113.492 116.291 113.43 116.049 113.453 115.254C113.528 112.673 114.284 109.844 114.667 107.272C115.253 103.334 115.586 99.4104 115.811 95.4363C116.379 85.4323 116.121 75.2696 116.139 65.2479C116.173 45.936 116.638 26.4993 112.713 7.49278C119.212 6.40986 125.496 4.43756 132.059 3.5738Z\"\r\n      />\r\n      <path\r\n        fill=\"#104267\"\r\n        d=\"M682.628 35.7233C687.749 35.3564 695.581 35.2221 700.228 37.7401C701.285 38.313 701.965 38.9367 702.296 40.1079C703.273 43.5646 703.373 51.3012 701.599 54.4227C701.248 53.2333 699.383 51.8985 698.392 51.1667C694.702 48.4396 689.544 46.7482 684.949 47.4438C679.928 48.2039 678.8 51.3941 676.153 54.9645C677.426 56.7788 677.75 60.5103 680.101 63.6254C684.885 69.9612 692.363 73.9845 697.73 79.8083C702.005 84.4469 705.076 90.1683 704.8 96.6233C704.569 102.018 701.55 107.685 697.601 111.301C690.906 117.433 681.801 118.707 673.082 118.34C667.947 117.802 662.809 116.776 657.704 115.974C658.042 115.467 658.263 114.846 658.365 114.246C658.927 110.94 658.922 98.2451 657.15 95.7317C664.473 98.5284 668.385 107.707 677.423 107.041C680.621 106.805 684.152 104.951 686.203 102.513C686.981 101.588 687.693 100.507 687.582 99.2537C691.073 92.4285 670.276 78.1098 666.215 73.5041C663.721 70.6744 661.797 67.378 660.861 63.7052C659.529 58.4747 660.293 52.4878 663.059 47.8376C667.228 40.83 675.066 37.6286 682.628 35.7233Z\"\r\n      />\r\n      <path\r\n        fill=\"#104267\"\r\n        d=\"M577.246 35.7234C580.426 35.4052 583.778 35.4771 586.887 36.2644C591.472 37.4258 595.065 40.1527 597.473 44.2145C598.747 46.3652 600.585 50.0454 599.935 52.5927C607.729 48.28 609.93 38.82 621.327 36.1187C626.09 34.9898 632.697 35.4478 636.911 38.0906C641.221 40.7939 643.522 45.5313 644.619 50.3435C646.55 58.8216 646.027 68.0119 645.889 76.6545C645.706 88.1737 645.609 99.5763 647.721 110.962C648.048 112.726 648.918 115.232 647.901 116.85C645.338 117.406 642.041 116.915 639.379 116.899Q632.571 116.91 625.763 116.995C626.47 116.473 626.782 115.689 627.088 114.893C630.592 105.777 631.51 63.9123 627.786 55.6523C626.794 53.4514 624.677 51.9069 622.45 51.0835C614.926 48.3014 607.136 53.9421 600.579 56.923C602.637 63.342 600.935 83.312 600.927 91.5551C600.924 94.645 600.764 97.8919 601.058 100.958C601.327 103.765 602.024 106.585 602.467 109.375C602.651 110.533 603.079 111.925 602.56 113.031C602.757 113.351 602.946 113.678 603.103 114.02C603.536 114.963 603.514 115.942 603.154 116.895C595.852 117.279 588.333 116.928 581.005 117.007C581.319 116.722 581.605 116.401 581.827 116.039C586.521 108.367 586.023 67.1228 583.637 57.9092C583.194 56.2 582.421 53.4364 580.814 52.513C570.59 46.636 564.663 54.2376 555.542 56.6802Q555.725 57.0001 555.844 57.3488C557.475 62.2331 556.356 87.7876 556.384 94.7174C556.395 97.4533 556.296 100.285 556.568 103.005C556.911 106.447 559.76 114.176 558.347 116.985Q547.349 116.826 536.351 116.955C537.108 116.126 537.561 115.046 537.905 113.991C541.691 102.382 541.992 47.4494 536.753 37.1634Q546.297 37.1723 555.839 37.3062C556.058 37.6197 556.261 37.9808 556.363 38.3517C557.168 41.2768 557.299 48.5079 555.863 51.0918C557.487 50.3939 558.829 49.0019 560.077 47.782C566.5 41.5085 568.394 38.5013 577.246 35.7234Z\"\r\n      />\r\n      <path\r\n        fill=\"#99C6D5\"\r\n        d=\"M66.741 35.6631C72.782 34.6729 78.9973 39.1085 84.8869 40.0516C92.5073 41.2719 100.734 40.1106 108.271 38.7539C107.765 43.0023 107.26 47.2365 106.51 51.4499L93.6315 51.4659C95.6752 57.8598 97.1585 63.7856 95.3496 70.4519Q95.1723 71.1065 94.9633 71.7516Q94.7544 72.3968 94.5143 73.031Q94.2742 73.6652 94.0035 74.287Q93.7328 74.9088 93.4322 75.5167Q93.1316 76.1246 92.8017 76.7171Q92.4718 77.3097 92.1135 77.8855Q91.7552 78.4613 91.3693 79.0189Q90.9834 79.5766 90.5708 80.1149Q90.1582 80.6531 89.7199 81.1706Q89.2816 81.6881 88.8186 82.1837Q88.3556 82.6793 87.869 83.1518Q87.3825 83.6242 86.8735 84.0725Q86.3645 84.5207 85.8344 84.9436Q85.3042 85.3666 84.754 85.7632Q84.2039 86.1599 83.6351 86.5293Q83.0663 86.8987 82.4802 87.24Q81.9034 87.5648 81.3116 87.8611Q80.7197 88.1575 80.1141 88.4247Q79.5086 88.6919 78.8907 88.9294Q78.2729 89.1669 77.6442 89.3741Q77.0156 89.5813 76.3776 89.7577Q75.7396 89.9341 75.0938 90.0793Q74.448 90.2245 73.7959 90.3382Q73.1438 90.4518 72.4869 90.5337Q71.8301 90.6155 71.17 90.6653Q70.5099 90.7151 69.8483 90.7328Q69.1866 90.7505 68.5248 90.736Q67.863 90.7216 67.2027 90.6749Q66.5424 90.6283 65.8852 90.5497Q65.2279 90.471 64.5753 90.3605Q63.9226 90.2501 63.2761 90.108Q62.6296 89.9659 61.9908 89.7926C59.9858 91.6015 58.2702 93.5817 56.756 95.8142L60.2226 99.4906C67.9094 101.637 75.4292 100.429 83.2586 100.512C88.7784 100.57 94.8681 101.383 98.9129 105.533C102.166 108.87 102.966 113.537 102.91 118.03C102.831 124.419 100.168 129.691 95.6342 134.098Q94.4635 135.037 93.2482 135.918C90.2458 138.065 86.6669 139.589 83.0928 140.47C75.5048 142.34 60.3859 142.606 52.6416 141.293C48.542 140.598 43.6486 138.683 41.1779 135.148C40.0084 133.475 39.5912 131.574 39.948 129.565C41.1537 122.776 49.3177 116.854 54.6451 113.162C51.4123 112.493 47.9741 112.251 44.9294 110.898C42.9505 110.019 40.7589 108.55 39.9736 106.45C39.3578 104.803 39.7176 103.059 40.4527 101.517C43.0577 96.0496 50.7522 90.5498 56.282 88.5609C54.3269 87.2513 52.3592 85.9414 50.4923 84.5078C44.9804 80.2752 41.8591 75.2206 40.9679 68.3296C39.9914 60.7794 41.3902 52.892 46.122 46.7771C51.3442 40.0286 58.431 36.7226 66.741 35.6631ZM66.7577 47.053C62.943 47.6801 59.9982 48.8428 57.669 52.1044C55.0586 55.7598 54.7307 60.6112 55.4625 64.9183C56.2452 69.525 58.5009 74.0905 62.3925 76.8312C64.842 78.5563 67.3931 79.1053 70.3292 79.1625C73.7001 78.7555 76.4328 77.5018 78.5705 74.7885C81.3198 71.299 81.9185 66.2686 81.3893 61.9805C80.8096 57.2819 78.6311 52.6744 74.8447 49.7211C72.3701 47.7909 69.8548 47.1665 66.7577 47.053ZM63.9403 113.404L60.1713 113.543C58.2071 116.118 55.4815 119.437 55.9321 122.911C56.1527 124.613 57.2336 126.056 58.5762 127.068C63.1871 130.544 71.2904 130.273 76.7515 129.468Q77.0825 129.422 77.4122 129.368C81.255 128.623 83.8398 127.276 86.0879 123.978Q86.1628 123.868 86.234 123.756C86.549 121.088 86.8415 119.065 85.0629 116.798C83.2567 114.495 80.2835 113.679 77.4984 113.365C73.2375 112.885 68.2073 112.923 63.9403 113.404Z\"\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport default BeLogoFooter;\r\n",".footer {\r\n  display: flex;\r\n  align-items: center;\r\n  border-top: 1px solid #e5e7eb;\r\n  padding: 0.5rem 1rem;\r\n  padding-left: 1.5rem;\r\n  padding-right: 1.5rem;\r\n}\r\n\r\n.footer-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  width: 100%;\r\n  max-width: 72rem;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.footer-item {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.375rem;\r\n  flex-wrap: wrap;\r\n  text-align: center;\r\n}\r\n\r\n.footer-text {\r\n  font-weight: 500;\r\n}\r\n\r\n.social-media {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.25rem;\r\n}\r\n\r\n.social-link {\r\n  all: unset;\r\n  border-radius: var(--radius, 0.5rem);\r\n  color: white;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  gap: 0.5rem;\r\n  transition: all 0.3s ease-in-out;\r\n  width: var(--ir-btn-width, inherit);\r\n  box-sizing: border-box;\r\n  color: var(--gray-600, #475467);\r\n  padding: 0.5rem;\r\n}\r\n\r\n.social-link:focus-visible {\r\n  box-shadow:\r\n    0 0.0625rem 0.125rem 0 rgba(0, 0, 0, 0.1),\r\n    0 0 0 0.25rem var(--gray-200, #eaecf0);\r\n}\r\n.social-link:hover {\r\n  background: var(--gray-100, #fcfcfd);\r\n  color: var(--gray-700, #344054);\r\n}\r\n.social-link:disabled {\r\n  user-select: none;\r\n  pointer-events: none;\r\n  color: var(--gray-300, #d0d5dd);\r\n}\r\n\r\n.dialog-body {\r\n  max-height: 83vh;\r\n  padding: 1rem;\r\n  overflow-y: auto;\r\n  color: var(--gray-600, #475467);\r\n}\r\n\r\n.dialog-title {\r\n  margin-bottom: 1rem;\r\n  font-size: 1.25rem;\r\n  font-weight: 600;\r\n  color: var(--gray-700, #344054);\r\n}\r\n\r\n.contact-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.25rem;\r\n  font-size: 0.875rem;\r\n  margin-bottom: 0.625rem;\r\n}\r\n\r\n.contact-link {\r\n  color: inherit;\r\n  text-decoration: none;\r\n  transition: color 0.2s;\r\n}\r\n\r\n.contact-link:hover {\r\n  color: #334155;\r\n  text-decoration: underline;\r\n}\r\n\r\n@media (min-width: 768px) {\r\n  .footer-list {\r\n    flex-direction: row;\r\n    gap: 0;\r\n  }\r\n\r\n  .footer-item {\r\n    width: auto;\r\n    text-align: left;\r\n  }\r\n\r\n  .social-media {\r\n    gap: 0.25rem;\r\n  }\r\n}\r\n@media (min-width: 1024px) {\r\n  .footer-list {\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n  }\r\n}\r\n","import BeLogoFooter from '@/assets/be_logo_footer';\r\nimport app_store from '@/stores/app.store';\r\nimport { Component, h, Prop } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-footer',\r\n  styleUrl: 'ir-footer.css',\r\n  shadow: true,\r\n})\r\nexport class IrFooter {\r\n  @Prop() version: string;\r\n  private socials = {\r\n    '006': 'whatsapp',\r\n    '002': 'instagram',\r\n    '001': 'facebook',\r\n    '005': 'skype',\r\n    '004': 'youtube',\r\n    '003': 'twitter',\r\n  };\r\n\r\n  contactDialog: HTMLIrDialogElement;\r\n\r\n  renderLocationField(field: string | null, withComma: boolean = true) {\r\n    if (!field) {\r\n      return '';\r\n    }\r\n    return withComma ? `, ${field}` : field;\r\n  }\r\n\r\n  renderPropertyEmail() {\r\n    const { email } = app_store.property?.contacts?.find(c => c.type === 'booking');\r\n    if (!email) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div class=\"contact-info\">\r\n        <label>Email:</label>\r\n        <a href={`mailto:${email}`} class=\"contact-link\">\r\n          {email}\r\n        </a>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <footer class=\"footer\">\r\n        <ul class=\"footer-list\">\r\n          <li class=\"footer-item\">\r\n            <p class=\"footer-text\">{app_store.property?.name}</p>\r\n            <span>-</span>\r\n            <ir-button onButtonClick={() => this.contactDialog.openModal()} buttonStyles={{ padding: '0' }} variants=\"link\" label=\"Contact\"></ir-button>\r\n            <span>-</span>\r\n            <ir-privacy-policy label=\"Policy\"></ir-privacy-policy>\r\n          </li>\r\n          <li class=\"social-media\">\r\n            {app_store.property?.social_media.map(media => {\r\n              if (media.link === '') {\r\n                return null;\r\n              }\r\n              const href = media.code === '006' ? `https://api.whatsapp.com/send/?phone=${media.link}` : media.link;\r\n              if (!this.socials[media.code]) {\r\n                return null;\r\n              }\r\n              return (\r\n                <a target=\"_blank\" href={href} title={media?.name} class=\"social-link\">\r\n                  <ir-icons name={this.socials[media.code] as any}></ir-icons>\r\n                </a>\r\n              );\r\n            })}\r\n          </li>\r\n          <li>\r\n            <p class=\"text-end text-xs text-gray-400\">V{this.version} - Powered by</p>\r\n            <a href=\"https://info.igloorooms.com/\" target=\"_blank\" title=\"igloorooms cloud booking solutions for hotels\">\r\n              <BeLogoFooter width={120} height={30} />\r\n            </a>\r\n          </li>\r\n        </ul>\r\n        <ir-dialog closeButton ref={el => (this.contactDialog = el)} style={{ '--ir-dialog-max-width': '25rem' }}>\r\n          <div class=\"dialog-body\" slot=\"modal-body\">\r\n            <h1 class=\"dialog-title\">Contact information</h1>\r\n            <div class=\"contact-info\">\r\n              <span>\r\n                <label>Address:</label>\r\n              </span>\r\n              <div>\r\n                {this.renderLocationField(app_store.property?.city.name, false)}\r\n                {this.renderLocationField(app_store.property?.area)}\r\n                {this.renderLocationField(app_store.property?.postal)}\r\n                {this.renderLocationField(app_store.property?.country.name)}\r\n              </div>\r\n            </div>\r\n            <div class=\"contact-info\">\r\n              <span>\r\n                <label>Phone:</label>\r\n              </span>\r\n              <a class=\"contact-link\" href={`tel:${app_store.property?.phone}`}>\r\n                {app_store.property?.country?.phone_prefix || ''} {app_store.property?.phone}\r\n              </a>\r\n            </div>\r\n            {this.renderPropertyEmail()}\r\n          </div>\r\n        </ir-dialog>\r\n      </footer>\r\n    );\r\n  }\r\n}\r\n",".loader {\r\n  width: 1.25rem;\r\n  height: 1.25rem;\r\n  border: 2.5px solid #3f3f3f;\r\n  border-bottom-color: transparent;\r\n  border-radius: 50%;\r\n  display: inline-block;\r\n  box-sizing: border-box;\r\n  animation: rotation 1s linear infinite;\r\n}\r\n.loaderContainer {\r\n  padding: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 5px;\r\n  background: white;\r\n}\r\n.loadingScreenContainer {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100vh;\r\n  width: 100vw;\r\n  z-index: 100000;\r\n  background: rgba(0, 0, 0, 0.2);\r\n  pointer-events: all;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n@keyframes rotation {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n","import { Component, Host, Prop, State, h } from '@stencil/core';\r\nimport axios, { AxiosRequestConfig, AxiosResponse } from 'axios';\r\n// import { IToast } from '../ir-toast/toast';\r\nimport interceptor_requests from '@/stores/ir-interceptor.store';\r\n\r\n@Component({\r\n  tag: 'ir-interceptor',\r\n  styleUrl: 'ir-interceptor.css',\r\n  shadow: true,\r\n})\r\nexport class IrInterceptor {\r\n  @State() isShown = false;\r\n  @State() isLoading = false;\r\n  @State() isUnassignedUnit = false;\r\n  @State() errorMessage: string | null = null;\r\n  @State() lastFailedRequest: AxiosRequestConfig | null = null;\r\n\r\n  @Prop({ reflect: true }) handledEndpoints = [];\r\n  alertRef: HTMLIrAlertDialogElement;\r\n  private ignoredErrorRoutes = ['/Exposed_Guest_SignIn', '/Exposed_Guest_SignUp'];\r\n  //@Event({ bubbles: true, composed: true }) toast: EventEmitter<IToast>;\r\n  componentWillLoad() {\r\n    this.setupAxiosInterceptors();\r\n  }\r\n\r\n  setupAxiosInterceptors() {\r\n    axios.interceptors.request.use(this.handleRequest.bind(this), this.handleError.bind(this));\r\n    axios.interceptors.response.use(this.handleResponse.bind(this), this.handleError.bind(this));\r\n  }\r\n\r\n  extractEndpoint(url: string): string {\r\n    return url.split('?')[0];\r\n  }\r\n\r\n  isHandledEndpoint(url: string): boolean {\r\n    return this.handledEndpoints.includes(url);\r\n  }\r\n\r\n  handleRequest(config: AxiosRequestConfig) {\r\n    const extractedUrl = this.extractEndpoint(config.url);\r\n    interceptor_requests[extractedUrl] = 'pending';\r\n    if (this.isHandledEndpoint(extractedUrl)) {\r\n      this.isLoading = true;\r\n    }\r\n    return config;\r\n  }\r\n\r\n  handleResponse(response: AxiosResponse) {\r\n    console.log('handleResponse');\r\n    const extractedUrl = this.extractEndpoint(response.config.url);\r\n    if (this.isHandledEndpoint(extractedUrl)) {\r\n      this.isLoading = false;\r\n    }\r\n    interceptor_requests[extractedUrl] = 'done';\r\n    if (response.data.ExceptionMsg?.trim()) {\r\n      if (!this.ignoredErrorRoutes.includes(extractedUrl)) {\r\n        this.handleError(response.data.ExceptionMsg);\r\n        this.lastFailedRequest = response.config;\r\n      }\r\n      throw new Error(response.data.ExceptionMsg);\r\n    }\r\n    return response;\r\n  }\r\n\r\n  handleError(error: string) {\r\n    console.log('error', error);\r\n    this.errorMessage = error;\r\n    this.alertRef.openModal();\r\n    return Promise.reject(error);\r\n  }\r\n  retryLastRequest() {\r\n    this.alertRef.closeModal();\r\n    this.errorMessage = null;\r\n    if (this.lastFailedRequest) {\r\n      return axios(this.lastFailedRequest);\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <ir-alert-dialog ref={el => (this.alertRef = el)}>\r\n          <div slot=\"modal-title\" class={'flex items-center gap-4 pb-2'}>\r\n            <ir-icons name=\"danger\" class={'text-red-500'} svgClassName=\"size-6\"></ir-icons>\r\n            <h1 class={'text-lg font-semibold'}>Something went wrong!</h1>\r\n          </div>\r\n          <p slot=\"modal-body\">{this.errorMessage}</p>\r\n          <div slot=\"modal-footer\">\r\n            <ir-button label=\"Cancel\" variants=\"outline\" onButtonClick={() => this.alertRef.closeModal()}></ir-button>\r\n            <ir-button label=\"Try again\" onButtonClick={() => this.retryLastRequest()}></ir-button>\r\n          </div>\r\n        </ir-alert-dialog>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url('../ui/ir-button/ir-button.css');\r\n:host {\r\n  display: block;\r\n}\r\n\r\n.booking-info {\r\n  border-bottom: 1px solid var(--gray-300, hsl(217, 16%, 84%));\r\n}\r\n\r\n.booking-info-text,\r\n.room-info-text {\r\n  font-size: 0.875rem;\r\n  font-weight: 500;\r\n  color: var(--gray-800, hsl(214, 33%, 17%));\r\n}\r\n\r\n.booking-info-text span,\r\n.room-info-text span {\r\n  font-weight: 400;\r\n  color: var(--gray-600, hsl(218, 24%, 27%));\r\n}\r\n\r\nsection,\r\n.room-info {\r\n  padding: 1rem 0;\r\n}\r\n\r\n.booking-details-header {\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n}\r\n\r\n.room-type {\r\n  font-size: 1rem;\r\n  font-weight: 600;\r\n  margin-bottom: 0.3rem;\r\n}\r\n\r\np {\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.total-payment {\r\n  font-size: 1rem;\r\n}\r\n\r\n.mapLink {\r\n  background: #000;\r\n  position: relative;\r\n  width: 100%;\r\n  overflow: hidden; /* This ensures no part of the image spills out */\r\n}\r\n\r\n.mapLink img {\r\n  object-fit: cover;\r\n}\r\n\r\n.mapLink:hover img {\r\n  filter: brightness(0.9);\r\n}\r\n\r\n.property_info {\r\n  display: none;\r\n  background-color: hsl(220, 14%, 96%);\r\n  border-radius: min(var(--radius, 0.5rem), 1rem);\r\n  height: fit-content;\r\n  width: 800px;\r\n}\r\n\r\n.property_img {\r\n  border-top-left-radius: min(var(--radius, 0.5rem), 1rem);\r\n  border-top-right-radius: min(var(--radius, 0.5rem), 1rem);\r\n}\r\n.contact-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.25rem;\r\n  font-size: 0.875rem;\r\n  padding: 1rem;\r\n  justify-content: center;\r\n}\r\n\r\n.contact-link {\r\n  color: inherit;\r\n  text-decoration: none;\r\n  transition: color 0.2s;\r\n}\r\n\r\n.contact-link:hover {\r\n  color: #334155;\r\n  text-decoration: underline;\r\n}\r\na:hover {\r\n  text-decoration: none;\r\n}\r\n.button-outline {\r\n  align-items: center;\r\n  text-align: center;\r\n}\r\n@media (min-width: 768px) {\r\n  .mapLink img {\r\n    height: 200px;\r\n    aspect-ratio: 16/9;\r\n  }\r\n\r\n  .property_info {\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n}\r\n","import { Component, Host, Prop, State, Watch, h } from '@stencil/core';\r\nimport { format, isBefore } from 'date-fns';\r\nimport { cn, formatAmount, getDateDifference, runScriptAndRemove } from '@/utils/utils';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport app_store from '@/stores/app.store';\r\nimport { Booking } from '@/models/booking.dto';\r\nimport { PropertyService } from '@/services/api/property.service';\r\nimport { CommonService } from '@/services/api/common.service';\r\nimport axios from 'axios';\r\nimport { AuthService } from '@/services/api/auth.service';\r\nimport { PaymentService } from '@/services/api/payment.service';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\nimport { AllowedPaymentMethod } from '@/models/property';\r\nimport { BookingListingAppService } from '@/services/app/booking-listing.service';\r\n\r\n@Component({\r\n  tag: 'ir-invoice',\r\n  styleUrl: 'ir-invoice.css',\r\n  scoped: true,\r\n})\r\nexport class IrInvoice {\r\n  @Prop({ mutable: true }) email: string;\r\n  @Prop() propertyId: number;\r\n  @Prop() baseUrl: string;\r\n  @Prop() language: string = 'en';\r\n  @Prop() bookingNbr: string;\r\n  @Prop() status: 0 | 1 = 1;\r\n  @Prop() perma_link: string = null;\r\n  @Prop() aName: string = null;\r\n  @Prop() headerShown: boolean = true;\r\n  @Prop() footerShown: boolean = true;\r\n  @Prop() locationShown: boolean = true;\r\n  @Prop() be: boolean = false;\r\n  @Prop() version: string = '2.0';\r\n\r\n  @State() booking: Booking;\r\n  @State() token: string;\r\n  @State() isAuthenticated = false;\r\n  @State() isLoading = false;\r\n  @State() cancelation_message: string = null;\r\n  @State() guarantee_message: string = null;\r\n\r\n  private propertyService = new PropertyService();\r\n  private commonService = new CommonService();\r\n  private authService = new AuthService();\r\n  private paymentService = new PaymentService();\r\n  private bookingListingAppService = new BookingListingAppService();\r\n  private payment_option: AllowedPaymentMethod = null;\r\n  private amount: number = null;\r\n\r\n  private alertDialog: HTMLIrAlertDialogElement;\r\n\r\n  async componentWillLoad() {\r\n    if (!this.baseUrl) {\r\n      throw new Error('Missing base url');\r\n    }\r\n    axios.defaults.baseURL = this.baseUrl;\r\n    axios.defaults.withCredentials = true;\r\n    this.isLoading = true;\r\n    const isAuthenticated = this.commonService.checkUserAuthState();\r\n    console.log(isAuthenticated);\r\n    if (isAuthenticated) {\r\n      this.token = isAuthenticated.token;\r\n      this.isAuthenticated = true;\r\n    } else {\r\n      this.token = await this.commonService.getBEToken();\r\n    }\r\n\r\n    this.init();\r\n    this.fetchData();\r\n  }\r\n  private detectPaymentOrigin() {\r\n    if (!this.booking.extras) {\r\n      return null;\r\n    }\r\n    const code = this.booking.extras.find(e => e.key === 'payment_code').value;\r\n    if (!code) {\r\n      return null;\r\n    }\r\n    return app_store.property.allowed_payment_methods.find(apm => apm.code === code) ?? null;\r\n  }\r\n\r\n  @Watch('bookingNbr')\r\n  async handleBookingNumberChange(newValue, oldValue) {\r\n    if (newValue !== oldValue) {\r\n      this.booking = await this.propertyService.getExposedBooking({ booking_nbr: this.bookingNbr, language: this.language }, true);\r\n    }\r\n  }\r\n  async init() {\r\n    this.propertyService.setToken(this.token);\r\n    this.commonService.setToken(this.token);\r\n    this.authService.setToken(this.token);\r\n    this.paymentService.setToken(this.token);\r\n  }\r\n  async fetchData() {\r\n    if (!this.isAuthenticated) {\r\n      this.token = await this.authService.login({ option: 'direct', params: { email: this.email, booking_nbr: this.bookingNbr } }, false);\r\n      this.init();\r\n    }\r\n    const requests: any[] = [this.propertyService.getExposedBooking({ booking_nbr: this.bookingNbr, language: this.language })];\r\n\r\n    if (!this.be) {\r\n      requests.push(this.commonService.getExposedLanguage());\r\n      requests.push(\r\n        this.propertyService.getExposedProperty({\r\n          id: this.propertyId,\r\n          language: this.language,\r\n          aname: this.aName,\r\n          perma_link: this.perma_link,\r\n        }),\r\n      );\r\n    }\r\n\r\n    const results = await Promise.all(requests);\r\n    this.booking = results[0];\r\n    this.payment_option = this.detectPaymentOrigin();\r\n    const book_date = new Date(this.booking.booked_on.date);\r\n    book_date.setHours(this.booking.booked_on.hour + 1);\r\n    book_date.setMinutes(this.booking.booked_on.minute);\r\n    await this.setAmountAndCancelationPolicy();\r\n    this.isLoading = false;\r\n  }\r\n  async setAmountAndCancelationPolicy() {\r\n    if (this.amount || isBefore(new Date(this.booking.to_date), new Date())) {\r\n      return;\r\n    }\r\n    const { amount, data } = await this.paymentService.GetExposedApplicablePolicies({\r\n      book_date: new Date(this.booking.booked_on.date),\r\n      token: this.token,\r\n      params: {\r\n        booking_nbr: this.bookingNbr,\r\n        property_id: this.booking.property.id,\r\n        room_type_id: 0,\r\n        rate_plan_id: 0,\r\n        currency_id: this.booking.currency.id,\r\n        language: this.language,\r\n      },\r\n    });\r\n    this.cancelation_message = data.find(t => t.type === 'cancelation')?.combined_statement;\r\n    this.guarantee_message = data.find(t => t.type === 'guarantee')?.combined_statement;\r\n    this.amount = amount;\r\n  }\r\n\r\n  renderBookingDetailHeader() {\r\n    const total_nights = getDateDifference(new Date(this.booking.from_date), new Date(this.booking.to_date));\r\n    const nbr_of_persons = this.booking.occupancy.adult_nbr + this.booking.occupancy.children_nbr;\r\n    const total_rooms = this.booking.rooms.length;\r\n    return `${total_nights} ${total_nights > 1 ? localizedWords.entries.Lcz_Nights : localizedWords.entries.Lcz_night} - ${nbr_of_persons}\r\n    ${nbr_of_persons > 1 ? localizedWords.entries.Lcz_Persons : localizedWords.entries.Lcz_Person} - ${total_rooms}\r\n    ${total_rooms > 1 ? localizedWords.entries.Lcz_Rooms : localizedWords.entries.Lcz_Room}`;\r\n  }\r\n  getPropertyEmail() {\r\n    const { email } = app_store.property?.contacts?.find(c => c.type === 'booking');\r\n    if (!email) {\r\n      return null;\r\n    }\r\n    const subject = `Ref Booking#${this.bookingNbr}`;\r\n    const encodedSubject = encodeURIComponent(subject);\r\n    return `mailto:${email}?subject=${encodedSubject}`;\r\n  }\r\n  renderPaymentText(paymentOption: AllowedPaymentMethod) {\r\n    if (paymentOption.is_payment_gateway) {\r\n      return (\r\n        <p class=\"total-payment text-sm\">\r\n          {localizedWords.entries.Lcz_YouHavePaid} <span>{formatAmount(this.amount, this.booking.currency.code)}</span>\r\n        </p>\r\n      );\r\n    }\r\n    if (paymentOption.code === '005') {\r\n      return (\r\n        <div>\r\n          <p class=\"total-payment text-sm\">\r\n            {localizedWords.entries.Lcz_DueAmountNow} <span>{formatAmount(this.booking.financial.due_amount, this.booking.currency.code)}</span>\r\n          </p>\r\n          <p>{paymentOption.description}</p>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <p class=\"total-payment text-sm\">\r\n        {localizedWords.entries.Lcz_YourCardWillBeCharged} <span>{formatAmount(this.booking.financial.gross_total, this.booking.currency.code)}</span>\r\n      </p>\r\n    );\r\n  }\r\n  private async processPayment() {\r\n    const paymentCode = this.booking.extras.find(e => e.key === 'payment_code');\r\n    if (!paymentCode) {\r\n      console.error('missing paymentcode');\r\n      return;\r\n    }\r\n    const prePaymentAmount = this.booking.extras.find(e => e.key === 'prepayment_amount');\r\n    if (!prePaymentAmount) {\r\n      console.error('missing prepayment amount');\r\n      return;\r\n    }\r\n    const paymentMethod = app_store.property.allowed_payment_methods.find(apm => apm.code === paymentCode.value);\r\n    if (!paymentMethod) {\r\n      console.error('Invalid payment method');\r\n      return;\r\n    }\r\n    if (this.amount || Number(prePaymentAmount.value) > 0) {\r\n      await this.paymentService.GeneratePaymentCaller({\r\n        token: app_store.app_data.token,\r\n        params: {\r\n          booking_nbr: this.booking.booking_nbr,\r\n          amount: Number(this.amount || prePaymentAmount.value) ?? 0,\r\n          currency_id: this.booking.currency.id,\r\n          email: this.booking.guest.email,\r\n          pgw_id: paymentMethod.id.toString(),\r\n        },\r\n        onRedirect: url => (window.location.href = url),\r\n        onScriptRun: script => runScriptAndRemove(script),\r\n      });\r\n    }\r\n  }\r\n  render() {\r\n    if (!this.booking) {\r\n      return null;\r\n    }\r\n    if (this.isLoading) {\r\n      return (\r\n        <div class=\"flex h-[80vh] flex-col gap-4 \">\r\n          {[...Array(10)].map((_, i) => (\r\n            <div key={i} class=\"max-h-52 w-full animate-pulse bg-gray-200\"></div>\r\n          ))}\r\n        </div>\r\n      );\r\n    }\r\n    const google_maps_url = `http://maps.google.com/maps?q=${app_store.property.location.latitude},${app_store.property.location.longitude}`;\r\n\r\n    const { cancel } = this.bookingListingAppService.getBookingActions(this.booking);\r\n    return (\r\n      <Host>\r\n        <ir-interceptor></ir-interceptor>\r\n        <main class=\"relative flex w-full flex-col space-y-5\">\r\n          {this.headerShown && (\r\n            <section class=\"sticky top-0 z-50 m-0  w-full  p-0\">\r\n              <ir-nav\r\n                class={'m-0 p-0'}\r\n                showBookingCode={false}\r\n                website={app_store.property?.space_theme.website}\r\n                logo={app_store.property?.space_theme?.logo}\r\n                menuShown={this.be}\r\n              ></ir-nav>\r\n            </section>\r\n          )}\r\n          <section class={`flex-1 ${this.be ? '' : 'mx-auto px-4 lg:px-6'}`}>\r\n            <div class={`flex  ${this.locationShown ? 'max-w-6xl' : 'w-full'} gap-16`}>\r\n              <div class={`invoice-container ${this.locationShown ? '' : 'w-full'}`}>\r\n                <section class=\"flex flex-col gap-4 md:flex-row md:items-center\">\r\n                  {this.status === 1 ? (\r\n                    <a href={google_maps_url} target=\"_blank\" class={cn(`button-outline`, 'flex items-center justify-center')} data-size=\"sm\">\r\n                      {localizedWords.entries.Lcz_GetDirections}\r\n                    </a>\r\n                  ) : (\r\n                    this.payment_option.is_payment_gateway && <ir-button variants=\"outline\" label=\"Retry Payment\" onButtonClick={() => this.processPayment()}></ir-button>\r\n                  )}\r\n                  <a href={this.getPropertyEmail()} target=\"_blank\" class={cn(`button-outline`, 'flex items-center justify-center')} data-size=\"sm\">\r\n                    Message property\r\n                  </a>\r\n                  {cancel.show && (\r\n                    <ir-button\r\n                      class={'w-full md:w-fit'}\r\n                      variants=\"outline\"\r\n                      label={localizedWords.entries.Lcz_CancelBooking}\r\n                      onButtonClick={() => {\r\n                        this.alertDialog.openModal();\r\n                      }}\r\n                    ></ir-button>\r\n                  )}\r\n                </section>\r\n                <section class=\"booking-info\">\r\n                  <p class=\"booking-info-text\">\r\n                    {localizedWords.entries.Lcz_BookingPreference} <span>{this.booking.booking_nbr}</span>\r\n                  </p>\r\n                  <p class=\"booking-info-text\">\r\n                    {localizedWords.entries.Lcz_BookedBy}{' '}\r\n                    <span>\r\n                      {this.booking.guest.first_name} {this.booking.guest.last_name}\r\n                    </span>\r\n                  </p>\r\n                  <p class=\"booking-info-text\">\r\n                    {localizedWords.entries.Lcz_CheckIn}: <span>{format(this.booking.from_date, 'eee, dd MMM yyyy')} </span>\r\n                    <span>\r\n                      {localizedWords.entries.Lcz_From} {app_store.property?.time_constraints.check_in_from}\r\n                    </span>\r\n                  </p>\r\n                  <p class=\"booking-info-text\">\r\n                    {localizedWords.entries.Lcz_CheckOut}: <span>{format(this.booking.to_date, 'eee, dd MMM yyyy')} </span>\r\n                    <span>\r\n                      {localizedWords.entries.Lcz_Before} {app_store.property?.time_constraints.check_out_till}\r\n                    </span>\r\n                  </p>\r\n                  <p class=\"booking-info-text\">\r\n                    {localizedWords.entries.Lcz_ArrivalTime} <span>{this.booking.arrival.description}</span>\r\n                  </p>\r\n                  {this.booking.remark && (\r\n                    <p class=\"booking-info-text\">\r\n                      Special request: <span>{this.booking.remark}</span>\r\n                    </p>\r\n                  )}\r\n                </section>\r\n                <section class=\"booking-details space-y-2\">\r\n                  <div class=\"flex flex-wrap items-center justify-between gap-1 text-center md:text-right\">\r\n                    <div class=\"flex items-center gap-4\">\r\n                      <ir-icons name=\"bed\"></ir-icons>\r\n                      <h3 class=\"booking-details-header\">{this.renderBookingDetailHeader()}</h3>\r\n                    </div>\r\n                    <p class=\"text-xs\">{app_store.property?.tax_statement}</p>\r\n                  </div>\r\n                  <div>\r\n                    {this.booking.rooms?.map(room => (\r\n                      <div class=\"room-info\" key={room.identifier}>\r\n                        <div class=\"flex w-full items-center justify-between\">\r\n                          <h4 class=\"room-type\">{room.roomtype.name}</h4>\r\n                          <p class=\"text-lg font-medium text-green-500\"> {formatAmount(room.gross_total, this.booking.currency.code)}</p>\r\n                        </div>\r\n                        <p class=\"room-info-text\">\r\n                          {localizedWords.entries.Lcz_GuestName}{' '}\r\n                          <span>\r\n                            {room.guest.first_name} {room.guest.last_name} ({room.rateplan.selected_variation.adult_child_offering})\r\n                          </span>\r\n                        </p>\r\n                        <p class=\"room-info-text\">\r\n                          {localizedWords.entries.Lcz_MealPlan}{' '}\r\n                          <span>\r\n                            {room.rateplan.name}\r\n                            {/* <span>{\"- Non-smoking\"}</span> */}\r\n                          </span>\r\n                        </p>\r\n                        {this.cancelation_message && <p class=\"room-info-text\" innerHTML={`<b><u>Cancelation:</u></b>${this.cancelation_message}`}></p>}\r\n                        {this.guarantee_message && <p class=\"room-info-text\" innerHTML={`<b><u>Guarantee:</u></b>${this.guarantee_message}`}></p>}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </section>\r\n\r\n                {this.payment_option && (\r\n                  <section class=\"space-y-2\">\r\n                    <div class={'flex items-center gap-4'}>\r\n                      <ir-icons name=\"credit_card\"></ir-icons>\r\n                      <h3>{localizedWords.entries.Lcz_PaymentDetails}</h3>\r\n                    </div>\r\n                    <p class=\"total-payment\">\r\n                      {localizedWords.entries.Lcz_Total} <span class=\"text-green-500\">{formatAmount(this.booking.financial.gross_total, this.booking.currency.code)}</span>\r\n                    </p>\r\n                    {this.renderPaymentText(this.payment_option)}\r\n                  </section>\r\n                )}\r\n\r\n                <section class=\"space-y-2\">\r\n                  <div class=\"flex items-center gap-4\">\r\n                    <ir-icons name=\"danger\"></ir-icons>\r\n                    <h3>{localizedWords.entries.Lcz_ImportantInformation}</h3>\r\n                  </div>\r\n                  <p>{app_store.property.description.important_info}</p>\r\n                </section>\r\n                <section class={'space-y-2'}>\r\n                  <div class=\"flex items-center gap-4\">\r\n                    <ir-icons name=\"car\"></ir-icons>\r\n                    <p>\r\n                      {app_store.property?.parking_offering.title} {localizedWords.entries.Lcz_At}{' '}\r\n                      {formatAmount(app_store.property?.parking_offering.pricing, app_store.userPreferences.currency_id)}\r\n                    </p>\r\n                  </div>\r\n                  <div class=\"flex items-center gap-4\">\r\n                    <ir-icons name=\"pets\"></ir-icons>\r\n                    <p>{app_store.property?.pets_acceptance.title}</p>\r\n                  </div>\r\n                  <div class=\"flex items-center gap-4 \">\r\n                    <ir-icons name=\"bed\"></ir-icons>\r\n                    <p>{app_store.property?.baby_cot_offering.title}</p>\r\n                  </div>\r\n                </section>\r\n              </div>\r\n              {this.locationShown && (\r\n                <div class=\"property_info sticky top-[20%]\">\r\n                  {app_store.property?.space_theme.background_image && (\r\n                    <div class=\"lg:aspect9-[16/9] aspect-[1/1] max-h-32 w-full\">\r\n                      <img class=\"property_img h-full w-full object-cover\" src={app_store.property?.space_theme.background_image} alt=\"\" />\r\n                    </div>\r\n                  )}\r\n                  <a class=\"mapLink\" target=\"_blank\" href={google_maps_url}>\r\n                    <img\r\n                      src={`https://maps.googleapis.com/maps/api/staticmap?center=${app_store.property?.location.latitude || 34.022},${app_store.property?.location.longitude || 35.628}&zoom=15&size=1024x768&maptype=roadmap&markers=color:red%7Clabel:${app_store.property.name}%7C34.022,35.628&key=AIzaSyCJ5P4SraJdZzcBi9Ue16hyg_iWJv-aHpk`}\r\n                      loading=\"lazy\"\r\n                    ></img>\r\n                  </a>\r\n                  <div class=\"contact-info\">\r\n                    <span>\r\n                      <label class=\"m-0 p-0\" htmlFor=\"phone\">\r\n                        {localizedWords.entries.Lcz_Phone}\r\n                      </label>\r\n                    </span>\r\n                    <a id=\"phone\" class=\"contact-link p-0\" href={`tel:${app_store.property?.phone}`}>\r\n                      {app_store.property?.country?.phone_prefix || ''} {app_store.property?.phone}\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </section>\r\n          {this.footerShown && <ir-footer version={this.version}></ir-footer>}\r\n          <ir-alert-dialog ref={el => (this.alertDialog = el)}>\r\n            <h2 slot=\"modal-title\">Booking Cancellation</h2>\r\n            <p slot=\"modal-body\" class=\"pt-2\" innerHTML={this.booking.rooms[0].rateplan.cancelation}></p>\r\n            <div slot=\"modal-footer\">\r\n              <ir-button\r\n                label=\"Cancel\"\r\n                variants=\"outline\"\r\n                onButtonClick={() => {\r\n                  this.alertDialog.closeModal();\r\n                }}\r\n              ></ir-button>\r\n              <ir-button\r\n                label=\"Accept & Confirm\"\r\n                isLoading={isRequestPending('/Request_Booking_Cancelation')}\r\n                onButtonClick={async () => {\r\n                  await this.paymentService.RequestBookingCancelation(this.bookingNbr);\r\n                  this.alertDialog.closeModal();\r\n                }}\r\n              ></ir-button>\r\n            </div>\r\n          </ir-alert-dialog>\r\n        </main>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  --ir-dialog-max-width: 32rem;\r\n}\r\n.ir-logo {\r\n  height: 20px;\r\n  width: 10px !important;\r\n}\r\n\r\n.ir-button-link {\r\n  padding: 8px 14px;\r\n  font-size: 14px;\r\n  line-height: 14px;\r\n  background: white;\r\n  color: var(--gray-600, #475467);\r\n}\r\n.ir-button-link:hover {\r\n  text-decoration: underline;\r\n}\r\n.ir-button-link:disabled {\r\n  background: white;\r\n  color: var(--gray-300, #d0d5dd);\r\n}\r\n\r\n.ir-language-trigger {\r\n  all: unset;\r\n  border-radius: var(--radius, 8px);\r\n  color: white;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  gap: 8px;\r\n  transition: all 0.3s ease-in-out;\r\n  box-sizing: border-box;\r\n  background: white;\r\n  color: var(--gray-700, #344054);\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 8px 14px;\r\n  font-size: 14px;\r\n  line-height: 14px;\r\n  width: 100%;\r\n}\r\n.ir-language-trigger .loader {\r\n  background-color: var(--gray-700, #344054);\r\n}\r\n.ir-language-trigger:hover {\r\n  background: var(--gray-100, #fcfcfd);\r\n  color: var(--gray-700, #344054);\r\n}\r\n.ir-language-trigger:disabled {\r\n  background: var(--gray-200, #eaecf0);\r\n  color: var(--gray-300, #d0d5dd);\r\n}\r\n\r\n.ir-nav {\r\n  width: 100%;\r\n  background-color: white;\r\n}\r\n\r\n.ir-nav-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  max-width: 72rem;\r\n  height: 3.5rem;\r\n  padding: 0 1rem;\r\n  margin: 0 auto;\r\n}\r\n\r\n.ir-nav-left {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n}\r\n\r\n.ir-nav-logo {\r\n  height: 2.5rem;\r\n  width: auto;\r\n  object-fit: fill;\r\n}\r\n\r\n.ir-nav-property-details {\r\n  display: none;\r\n}\r\n\r\n.ir-property-name {\r\n  font-size: 1.125rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.ir-property-location {\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 0.875rem;\r\n  color: #475467;\r\n}\r\n\r\n.ir-burger-menu {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n}\r\n\r\n.ir-nav-links {\r\n  display: none;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.ir-nav-links-injected {\r\n  display: flex;\r\n  flex: 1;\r\n  justify-content: flex-end;\r\n}\r\n\r\n/* .ir-language-trigger {\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  background-color: transparent;\r\n  border: none;\r\n  cursor: pointer;\r\n} */\r\n\r\n/* .ir-language-trigger ir-icons {\r\n  margin-right: 0.5rem;\r\n} */\r\n.ir-nav-injected {\r\n  display: none;\r\n}\r\n.ir-icon-size {\r\n  height: 1rem;\r\n  width: 1rem;\r\n}\r\n\r\n.ir-sheet-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n  padding: 1rem 1.5rem;\r\n}\r\n\r\n.ir-sheet-button {\r\n  width: 100%;\r\n  justify-content: start;\r\n}\r\n@media only screen and (min-width: 640px) {\r\n  .ir-language-trigger {\r\n    margin-top: 0;\r\n    width: var(--ir-btn-width, inherit);\r\n  }\r\n}\r\n\r\n@media (min-width: 768px) {\r\n  .ir-nav-property-details {\r\n    display: block;\r\n  }\r\n\r\n  .ir-nav-links {\r\n    display: inline-flex;\r\n  }\r\n\r\n  .ir-burger-menu {\r\n    display: none;\r\n  }\r\n}\r\n@media (min-width: 1190px) {\r\n  .ir-nav-container {\r\n    padding: 0;\r\n  }\r\n}\r\n","import { Component, Event, EventEmitter, Fragment, h, Listen, Prop, State } from '@stencil/core';\r\nimport { TTabsState } from './nav-types';\r\nimport { ICurrency, IExposedLanguages, pages } from '@/models/common';\r\nimport app_store from '@/stores/app.store';\r\nimport { cn } from '@/utils/utils';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport { AuthService } from '@/services/api/auth.service';\r\nimport { checkout_store } from '@/stores/checkout.store';\r\n\r\n@Component({\r\n  tag: 'ir-nav',\r\n  styleUrl: 'ir-nav.css',\r\n  scoped: true,\r\n})\r\nexport class IrNav {\r\n  @Prop() currencies: ICurrency[];\r\n  @Prop() languages: IExposedLanguages[];\r\n  @Prop() logo: string;\r\n  @Prop() website: string;\r\n  @Prop() isBookingListing = false;\r\n  @Prop() showBookingCode: boolean = true;\r\n  @Prop() showCurrency: boolean = true;\r\n  @Prop() menuShown: boolean = true;\r\n\r\n  @Event() routing: EventEmitter<pages>;\r\n  @Event({ bubbles: true, composed: true }) signOut: EventEmitter<null>;\r\n  @Event({ bubbles: true, composed: true }) screenChanged: EventEmitter<pages>;\r\n  @State() currentPage: TTabsState = null;\r\n\r\n  private dialogRef: HTMLIrDialogElement;\r\n  private sheetRef: HTMLIrSheetElement;\r\n  modalRef: HTMLIrModalElement;\r\n\r\n  handleButtonClick(e: CustomEvent = undefined, page: TTabsState) {\r\n    if (e) {\r\n      e.stopImmediatePropagation();\r\n      e.stopPropagation();\r\n    }\r\n    this.currentPage = page;\r\n    setTimeout(() => {\r\n      this.dialogRef.openModal();\r\n    }, 50);\r\n  }\r\n  @Listen('closeDialog')\r\n  handleCloseDialog(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    this.dialogRef.closeModal();\r\n  }\r\n  renderDialogBody() {\r\n    switch (this.currentPage) {\r\n      case 'language':\r\n        return <ir-language-picker slot=\"modal-body\" currencies={this.currencies} languages={this.languages}></ir-language-picker>;\r\n      case 'booking_code':\r\n        return <ir-booking-code slot=\"modal-body\"></ir-booking-code>;\r\n      case 'map':\r\n        return <ir-google-maps slot=\"modal-body\"></ir-google-maps>;\r\n      case 'profile':\r\n        return (\r\n          <ir-user-profile\r\n            class={'flex-1'}\r\n            user_data={{\r\n              email: checkout_store.userFormData.email,\r\n              first_name: checkout_store.userFormData.firstName,\r\n              last_name: checkout_store.userFormData.lastName,\r\n              country_id: checkout_store.userFormData.country_id,\r\n              mobile: checkout_store.userFormData.mobile_number,\r\n              country_phone_prefix: checkout_store.userFormData.country_phone_prefix.toString(),\r\n            }}\r\n            slot=\"modal-body\"\r\n          ></ir-user-profile>\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n  renderLocationField(field: string | null, withComma: boolean = true) {\r\n    if (!field) {\r\n      return '';\r\n    }\r\n    return withComma ? `, ${field}` : field;\r\n  }\r\n  renderLocation() {\r\n    const affiliate = app_store.app_data.affiliate;\r\n    if (affiliate) {\r\n      return [app_store.property?.city.name ?? null, app_store.property?.country.name ?? null].filter(f => f !== null).join(', ');\r\n    }\r\n    return [app_store.property?.area ?? null, app_store.property?.city.name ?? null, app_store.property?.country.name ?? null].filter(f => f !== null).join(', ');\r\n  }\r\n  renderLanguageTrigger() {\r\n    if (this.isBookingListing) {\r\n      return;\r\n    }\r\n    const currency = app_store.currencies.find(currency => currency.code.toString().toLowerCase() === app_store.userPreferences.currency_id.toLowerCase());\r\n    const country = app_store.languages.find(l => l.code.toLowerCase() === app_store.userPreferences.language_id.toLowerCase());\r\n    if (!currency || !country) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div class=\"flex\">\r\n        <button type=\"button\" class=\"ir-language-trigger\" onClick={() => this.handleButtonClick(undefined, 'language')}>\r\n          <p>{(0).toLocaleString('en-US', { style: 'currency', currency: currency.code, minimumFractionDigits: 0, maximumFractionDigits: 0 }).replace(/\\d/g, '').trim()}</p>\r\n        </button>\r\n        <button type=\"button\" class=\"ir-language-trigger\" onClick={() => this.handleButtonClick(undefined, 'language')}>\r\n          {/* <ir-icons name=\"globe\"></ir-icons> */}\r\n          <p>{country?.description}</p>\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n  private handleSignIn(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    if (app_store.app_data.injected) {\r\n      return (window.location.href = `https://${app_store.property.perma_link}.bookingmystay.com/bookings`);\r\n    }\r\n    this.currentPage = 'auth';\r\n    this.modalRef.openModal();\r\n  }\r\n  async handleItemSelect(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    const id = e.detail;\r\n    switch (id) {\r\n      case 1:\r\n        this.screenChanged.emit('booking-listing');\r\n        return this.routing.emit('booking-listing');\r\n      case 2:\r\n        await new AuthService().signOut();\r\n        this.signOut.emit(null);\r\n        return;\r\n      case 3: {\r\n        this.screenChanged.emit('user-profile');\r\n        this.routing.emit('user-profile');\r\n      }\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const currentPage = app_store.currentPage;\r\n    const isInjected = app_store.app_data.injected && currentPage === 'booking';\r\n    return (\r\n      <Fragment>\r\n        <nav class=\"ir-nav\">\r\n          <div class=\"ir-nav-container\">\r\n            {!isInjected && (\r\n              <div class=\"ir-nav-left\">\r\n                <a aria-label=\"home\" target=\"_blank\" href={`https://${this.website}`}>\r\n                  <img\r\n                    src={app_store.app_data?.affiliate ? app_store.app_data?.affiliate.sites[0]?.logo : this.logo}\r\n                    alt={`${app_store.property?.name}, ${app_store.property?.country.name}`}\r\n                    class=\"ir-nav-logo\"\r\n                  ></img>\r\n                </a>\r\n                <div class=\"ir-nav-property-details\">\r\n                  <h3 class=\"ir-property-name\">{app_store.property?.name}</h3>\r\n                  <button onClick={() => this.handleButtonClick(undefined, 'map')} class=\"ir-property-location\">\r\n                    {this.renderLocation()}\r\n                    <span class={'mx-1'}></span>\r\n                    <svg slot=\"btn-icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"12\" width=\"12\" viewBox=\"0 0 384 512\">\r\n                      <path\r\n                        fill=\"currentColor\"\r\n                        d=\"M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z\"\r\n                      />\r\n                      <title>Location</title>\r\n                    </svg>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div class={`ir-burger-menu ${isInjected ? 'ir-nav-injected' : ''}`}>\r\n              {!app_store.is_signed_in ? (\r\n                <ir-button class=\"ir-sheet-button\" variants=\"ghost\" label=\"Sign in\" name=\"auth\" onButtonClick={this.handleSignIn.bind(this)}></ir-button>\r\n              ) : (\r\n                this.menuShown && (\r\n                  <ir-menu\r\n                    data={[\r\n                      { id: 1, item: 'My bookings' },\r\n                      { id: 3, item: 'Personal profile' },\r\n                      { id: 2, item: 'Sign out' },\r\n                    ]}\r\n                    onMenuItemClick={this.handleItemSelect.bind(this)}\r\n                  >\r\n                    <ir-user-avatar slot=\"menu-trigger\"></ir-user-avatar>\r\n                  </ir-menu>\r\n                )\r\n              )}\r\n              {this.showBookingCode && this.showCurrency && <ir-button variants=\"icon\" iconName=\"burger_menu\" onClick={() => this.sheetRef.openSheet()}></ir-button>}\r\n            </div>\r\n\r\n            <ul class={cn('ir-nav-links', { 'ir-nav-links-injected': isInjected })}>\r\n              {!isInjected && currentPage !== 'checkout' && (\r\n                <li>\r\n                  <ir-button variants=\"ghost\" haveLeftIcon title=\"home\" onButtonClick={() => window.open(`https://${this.website}`, '_blank')}>\r\n                    <p slot=\"left-icon\" class=\"sr-only\">\r\n                      home\r\n                    </p>\r\n                    <ir-icons slot=\"left-icon\" name=\"home\" svgClassName=\"ir-icon-size\"></ir-icons>\r\n                  </ir-button>\r\n                </li>\r\n              )}\r\n              {currentPage === 'booking' && this.showBookingCode && (\r\n                <li>\r\n                  <ir-button\r\n                    variants=\"ghost\"\r\n                    label={localizedWords.entries.Lcz_BookingCode}\r\n                    name=\"booking_code\"\r\n                    onButtonClick={e => this.handleButtonClick(e, 'booking_code')}\r\n                  ></ir-button>\r\n                </li>\r\n              )}\r\n              {this.showCurrency && <li>{this.renderLanguageTrigger()}</li>}\r\n              {!app_store.is_signed_in ? (\r\n                <li>\r\n                  <ir-button variants=\"ghost\" label={localizedWords.entries.Lcz_SignIn} name=\"auth\" onButtonClick={this.handleSignIn.bind(this)}></ir-button>\r\n                </li>\r\n              ) : (\r\n                this.menuShown && (\r\n                  <li>\r\n                    <ir-menu\r\n                      data={[\r\n                        { id: 1, item: 'My bookings' },\r\n                        { id: 3, item: 'Personal profile' },\r\n                        { id: 2, item: 'Sign out' },\r\n                      ]}\r\n                      onMenuItemClick={this.handleItemSelect.bind(this)}\r\n                    >\r\n                      <ir-user-avatar slot=\"menu-trigger\"></ir-user-avatar>\r\n                    </ir-menu>\r\n                  </li>\r\n                )\r\n              )}\r\n            </ul>\r\n          </div>\r\n        </nav>\r\n\r\n        <ir-sheet ref={el => (this.sheetRef = el)}>\r\n          <ul slot=\"sheet-content\" class=\"ir-sheet-content\">\r\n            <li>{this.renderLanguageTrigger()}</li>\r\n            {!isInjected && (\r\n              <li>\r\n                <ir-button class=\"ir-sheet-button\" buttonClassName=\"justify-start\" variants=\"ghost\" label=\"Home\" name=\"home\"></ir-button>\r\n              </li>\r\n            )}\r\n            <li>\r\n              <ir-button\r\n                class=\"ir-sheet-button\"\r\n                buttonClassName=\"justify-start\"\r\n                variants=\"ghost\"\r\n                label=\"Booking code\"\r\n                name=\"booking_code\"\r\n                onButtonClick={e => this.handleButtonClick(e, 'booking_code')}\r\n              ></ir-button>\r\n            </li>\r\n          </ul>\r\n        </ir-sheet>\r\n        {!app_store.is_signed_in && <ir-modal ref={el => (this.modalRef = el)} style={{ '--ir-modal-max-width': '32rem' }}></ir-modal>}\r\n        <ir-dialog ref={el => (this.dialogRef = el)} style={{ '--ir-dialog-max-width': this.currentPage === 'map' ? '80%' : '32rem' }}>\r\n          {this.renderDialogBody()}\r\n        </ir-dialog>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n",":host {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\nul {\n  list-style-type: none;\n  padding: 1rem 0;\n  display: none;\n}\n.current-page-info {\n  color: var(--gray-700, #344054);\n  font-size: 0.875rem;\n  line-height: 1.25rem;\n  font-weight: 500;\n}\n@media (min-width: 768px) {\n  .current-page-info {\n    display: none;\n  }\n  ul {\n    display: block;\n  }\n}\nli {\n  display: inline-flex;\n  margin-right: 5px;\n  height: 2.5rem;\n  width: 2.5rem;\n  cursor: pointer;\n  align-items: center;\n  justify-content: center;\n  border-radius: min(var(--radius, 0.5rem), 1rem);\n  font-size: 0.875rem;\n  line-height: 1.25rem;\n  font-weight: 500;\n}\n\nli button {\n  all: unset;\n  text-decoration: none;\n  height: 100%;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: min(var(--radius, 0.5rem), 0.5rem);\n  color: var(--gray-500, #667085);\n}\nli button:hover {\n  background: hsla(var(--brand-100, 206, 100%, 85%), 0.3);\n  color: hsla(var(--brand-600, 215, 87%, 51%));\n}\n\nli.active button {\n  background: hsla(var(--brand-100, 206, 100%, 85%), 0.3);\n  color: hsla(var(--brand-600, 215, 87%, 51%));\n}\n\n.ellipsis {\n  color: var(--gray-500, #667085);\n  pointer-events: none;\n}\n","import { Component, Event, EventEmitter, Host, Prop, h } from '@stencil/core';\n\n@Component({\n  tag: 'ir-pagination',\n  styleUrl: 'ir-pagination.css',\n  shadow: true,\n})\nexport class IrPagination {\n  @Prop() total: number;\n  @Prop() current: number;\n  @Prop() minPageShown: number = 7;\n\n  @Event() pageChange: EventEmitter<number>;\n  private getPages(): Array<number | string> {\n    const wingSize = 2;\n    let pages = [];\n\n    for (let i = 1; i <= this.total; i++) {\n      if (this.total <= this.minPageShown) {\n        pages.push(i);\n      } else {\n        if (i === 1) {\n          pages.push(i);\n        } else if (i === this.total) {\n          pages.push(i);\n        } else if (i >= this.current - wingSize && i <= this.current + wingSize) {\n          pages.push(i);\n        } else if ((i === 2 && this.current > wingSize + 1) || (i === this.total - 1 && this.current < this.total - wingSize)) {\n          pages.push('...');\n        }\n      }\n    }\n\n    return pages;\n  }\n  render() {\n    if (this.total <= 1) {\n      return;\n    }\n    const pages = this.getPages();\n\n    return (\n      <Host>\n        <ir-button disabled={this.current === 1} onButtonClick={() => this.pageChange.emit(this.current - 1)} variants=\"outline\" label=\"Previous\" haveLeftIcon>\n          <ir-icons name=\"arrow_left\" slot=\"left-icon\" svgClassName=\"size-3\"></ir-icons>\n        </ir-button>\n        <p class=\"current-page-info\">\n          Page {this.current} of {this.total}\n        </p>\n        <ul>\n          {pages.map(page =>\n            typeof page === 'number' ? (\n              <li class={this.current === page ? 'active' : ''}>\n                <button onClick={() => this.pageChange.emit(page)} type=\"button\">\n                  {page}\n                </button>\n              </li>\n            ) : (\n              <li class=\"ellipsis\">{page}</li>\n            ),\n          )}\n        </ul>\n        <ir-button disabled={this.current === this.total} onButtonClick={() => this.pageChange.emit(this.current + 1)} variants=\"outline\" label=\"Next\" haveRightIcon>\n          <ir-icons name=\"arrow_right\" slot=\"right-icon\" svgClassName=\"size-3\"></ir-icons>\n        </ir-button>\n      </Host>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}