{"version":3,"names":["irCreditCardInputCss","IrCreditCardInputStyle0","IrCreditCardInput","this","value","handleInput","event","index","inputs","input","target","replace","detectCardType","key","length","maxLength","focus","startsWith","cardType","getMaxLength","render","h","Host","class","htmlFor","Array","map","_","id","type","onKeyDown","currentTarget","parentElement","querySelectorAll","onInput","creditCardChange","emit","join"],"sources":["src/components/ir-booking-engine/ir-checkout-page/ir-credit-card-input/ir-credit-card-input.css?tag=ir-credit-card-input&encapsulation=shadow","src/components/ir-booking-engine/ir-checkout-page/ir-credit-card-input/ir-credit-card-input.tsx"],"sourcesContent":[":host {\r\n  display: block;\r\n}\r\n","import { Component, Host, h, Event, EventEmitter, State } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-credit-card-input',\r\n  styleUrl: 'ir-credit-card-input.css',\r\n  shadow: true,\r\n})\r\nexport class IrCreditCardInput {\r\n  @State() cardType: '' | 'AMEX' | 'VISA' | 'Mastercard' = '';\r\n\r\n  @Event() creditCardChange: EventEmitter<string>;\r\n\r\n  private value: string[] = [];\r\n\r\n  private handleInput = (event: KeyboardEvent, index: number, inputs: NodeListOf<HTMLInputElement>) => {\r\n    const input = event.target as HTMLInputElement;\r\n    let value = input.value;\r\n    value = value.replace(/\\D/g, '');\r\n    input.value = value;\r\n    if (index === 0) {\r\n      this.detectCardType(value);\r\n    }\r\n    if (event.key !== 'Backspace') {\r\n      if (value.length >= input.maxLength && index < inputs.length - 1) {\r\n        inputs[index + 1].focus();\r\n      }\r\n    } else {\r\n      if (value.length === 0 && index > 0) {\r\n        inputs[index - 1].focus();\r\n      }\r\n    }\r\n  };\r\n\r\n  private detectCardType(value: string) {\r\n    if (value.startsWith('4')) {\r\n      this.cardType = 'VISA';\r\n    } else if (value.startsWith('5') || value.startsWith('2')) {\r\n      this.cardType = 'Mastercard';\r\n    } else if (value.startsWith('34') || value.startsWith('37')) {\r\n      this.cardType = 'AMEX';\r\n    } else {\r\n      this.cardType = '';\r\n    }\r\n  }\r\n\r\n  getMaxLength(index: number) {\r\n    return this.cardType === 'AMEX' && index === 3 ? 3 : 4;\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"flex flex-col p-2 md:p-4 rounded-md border max-w-xs overflow-hidden\">\r\n          <label htmlFor=\"first_input\">Card number</label>\r\n          <div class=\"flex items-center gap-4 justify-between\">\r\n            {[...Array(this.cardType === 'AMEX' ? 4 : 4)].map((_, index) => (\r\n              <input\r\n                id={index === 0 ? 'first_input' : 'credit_card' + index}\r\n                type=\"text\"\r\n                class=\"appearance-none border-b w-full outline-none\"\r\n                maxLength={this.getMaxLength(index)}\r\n                onKeyDown={event => this.handleInput(event, index, (event.currentTarget as HTMLInputElement).parentElement!.querySelectorAll('input'))}\r\n                onInput={event => {\r\n                  const input = event.target as HTMLInputElement;\r\n                  input.value = input.value.replace(/\\D/g, '');\r\n                  this.value[index] = input.value;\r\n                  this.creditCardChange.emit(this.value.join(''));\r\n                  if (input.value.length >= input.maxLength && index < 3) {\r\n                    ((event.currentTarget as HTMLInputElement).parentElement!.querySelectorAll('input')[index + 1] as HTMLInputElement).focus();\r\n                  }\r\n                }}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"yDAAA,MAAMA,EAAuB,ixHAC7B,MAAAC,EAAeD,E,MCMFE,EAAiB,M,4EAKpBC,KAAAC,MAAkB,GAElBD,KAAAE,YAAc,CAACC,EAAsBC,EAAeC,KAC1D,MAAMC,EAAQH,EAAMI,OACpB,IAAIN,EAAQK,EAAML,MAClBA,EAAQA,EAAMO,QAAQ,MAAO,IAC7BF,EAAML,MAAQA,EACd,GAAIG,IAAU,EAAG,CACfJ,KAAKS,eAAeR,E,CAEtB,GAAIE,EAAMO,MAAQ,YAAa,CAC7B,GAAIT,EAAMU,QAAUL,EAAMM,WAAaR,EAAQC,EAAOM,OAAS,EAAG,CAChEN,EAAOD,EAAQ,GAAGS,O,MAEf,CACL,GAAIZ,EAAMU,SAAW,GAAKP,EAAQ,EAAG,CACnCC,EAAOD,EAAQ,GAAGS,O,kBApBiC,E,CAyBjD,cAAAJ,CAAeR,GACrB,GAAIA,EAAMa,WAAW,KAAM,CACzBd,KAAKe,SAAW,M,MACX,GAAId,EAAMa,WAAW,MAAQb,EAAMa,WAAW,KAAM,CACzDd,KAAKe,SAAW,Y,MACX,GAAId,EAAMa,WAAW,OAASb,EAAMa,WAAW,MAAO,CAC3Dd,KAAKe,SAAW,M,KACX,CACLf,KAAKe,SAAW,E,EAIpB,YAAAC,CAAaZ,GACX,OAAOJ,KAAKe,WAAa,QAAUX,IAAU,EAAI,EAAI,C,CAEvD,MAAAa,GACE,OACEC,EAACC,EAAI,CAAAT,IAAA,4CACHQ,EAAA,OAAAR,IAAA,2CAAKU,MAAM,uEACTF,EAAA,SAAAR,IAAA,2CAAOW,QAAQ,eAAa,eAC5BH,EAAA,OAAAR,IAAA,2CAAKU,MAAM,2CACR,IAAIE,MAAMtB,KAAKe,WAAa,OAAS,EAAI,IAAIQ,KAAI,CAACC,EAAGpB,IACpDc,EAAA,SACEO,GAAIrB,IAAU,EAAI,cAAgB,cAAgBA,EAClDsB,KAAK,OACLN,MAAM,+CACNR,UAAWZ,KAAKgB,aAAaZ,GAC7BuB,UAAWxB,GAASH,KAAKE,YAAYC,EAAOC,EAAQD,EAAMyB,cAAmCC,cAAeC,iBAAiB,UAC7HC,QAAS5B,IACP,MAAMG,EAAQH,EAAMI,OACpBD,EAAML,MAAQK,EAAML,MAAMO,QAAQ,MAAO,IACzCR,KAAKC,MAAMG,GAASE,EAAML,MAC1BD,KAAKgC,iBAAiBC,KAAKjC,KAAKC,MAAMiC,KAAK,KAC3C,GAAI5B,EAAML,MAAMU,QAAUL,EAAMM,WAAaR,EAAQ,EAAG,CACpDD,EAAMyB,cAAmCC,cAAeC,iBAAiB,SAAS1B,EAAQ,GAAwBS,O"}