{"version":3,"names":["irAccomodationsCss","IrAccomodationsStyle0","IrAccomodations","checkAmenity","code","this","amenities","find","a","renderAmeneties","wifi","climatecontrol","balcony","h","class","name","svgClassName","description","render","key","_a","bookingAttributes","bedding_setup","length","_c","_b","map","bed_setup","index","count","irAdultChildCounterCss","IrAdultChildCounterStyle0","IrAdultChildCounter","componentWillLoad","childrenAges","baseChildrenAges","handleBaseChildrenAgesChange","newValue","open","isPopoverOpen","popover","toggleVisibility","addChildrenAndAdult","error","updateGuestInformation","validateChildrenAges","checkAvailability","emit","incrementAdultCount","adultCount","maxAdultCount","decrementAdultCount","minAdultCount","incrementChildrenCount","childrenCount","maxChildrenCount","push","decrementChildrenCount","minChildrenCount","pop","handlePopoverToggle","e","stopImmediatePropagation","stopPropagation","detail","forceClose","infant_nbr","calculateInfantNumber","config","adult_nbr","child_nbr","console","log","addAdultsAndChildren","some","c","guestTrigger","slot","localizedWords","entries","Lcz_Guests","Fragment","Lcz_Adult","Lcz_Adults","childMaxAge","Lcz_Child","Lcz_Children","Lcz_Select","ref","el","allowFlip","placement","autoAdjust","outsideEvents","onOpenChange","bind","Lcz_Age","role","iconName","disabled","variants","onButtonClick","v","i","addDummyOption","value","toString","variant","label","onValueChange","prev","data","Array","_","id","Lcz_enterchildage","size","Lcz_Done","ExposedBookingAvailability","z","object","propertyid","coerce","number","from_date","string","min","to_date","room_type_ids","array","optional","default","language","currency_ref","is_in_loyalty_mode","boolean","promo_key","is_in_agent_mode","agent_id","is_in_affiliate_mode","affiliate_id","QueryStringValidator","constructor","errors","dateSchema","regex","message","validateCheckin","checkinStr","parse","checkinDate","parseISO","today","Date","isValid","isBefore","isSameDay","app_store","nonBookableNights","validateAges","str","isNaN","Number","test","validateCheckout","checkoutStr","checkoutDate","isAfter","format","validateAdultCount","validateChildrenCount","children","getErrors","irAvailabilityHeaderCss","IrAvailabilityHeaderStyle0","IrAvailabilityHeader","errorCause","popoverInstance","propertyService","PropertyService","validator","booking_store","bookingAvailabilityParams","loyalty","coupon","agent","property_id","app_data","validatedFromDate","fromDate","exposedBookingAvailabilityParams","Object","assign","setDefaultAdultCount","setDefaultChildCount","toDate","changeExposedAvailabilityParams","userPreferences","language_id","currency_id","fill","processAges","onAppDataChange","async","currentPage","resetBooking","recheckAvailability","handleAgesChange","oldValue","handleFromDateChange","handleToDateChange","handleChildrenCountChange","handleAdultCountChange","handleDateChange","start","end","modifyQueryParam","fetchedBooking","handleAdultChildChange","encodeURIComponent","join","adCountNumber","property","adult_child_constraints","adult_max_nbr","childCountNumber","child_max_nbr","isValidFromDate","isValidToDate","isValidAdultCount","ages","split","slice","forEach","age","setTimeout","personCounter","params","injected","adults","affiliate","afname","currency","every","queryParams","queryString","filter","param","location","href","perma_link","scrollToRoomType","rest","__rest","getExposedBookingAvailability","handleCheckAvailability","isLoading","ZodError","err","error_cause","path","includes","shouldRenderErrorToast","undefined","_d","_e","disconnectedCallback","destroy","toast_timeout","clearTimeout","show_loyalty","promotions","p","is_loyalty","show_coupon","showPromotions","_f","dates","_g","_h","_j","child_max_age","onCheckAvailability","Lcz_Search","buttonStyles","width","_k","irCouponDialogCss","IrCouponDialogStyle0","IrCouponDialog","activateCoupon","validationMessage","validateCoupon","Lcz_InvalidAgentCode","dialogRef","closeModal","removeCoupon","modifyBookingStore","showCoupon","onClick","Lcz_DiscountApplied","cn","openModal","Lcz_HaveCoupon","haveLeftIcon","onSubmit","preventDefault","onTextChanged","autofocus","inputId","placeholder","Lcz_EnterYourCouponCode","mode","Lcz_Cancel","type","Lcz_Apply","irDatePopupCss","IrDatePopupStyle0","IrDatePopup","minDate","addDays","handleDatesChange","setHours","dateTrigger","Lcz_Dates","locale","localization_store","selectedLocale","Lcz_CheckIn","Lcz_CheckOut","Host","showCloseButton","dateChange","dateModifiers","getDateModifiers","maxSpanDays","max_nights","keys","nights","nbn","irFacilitiesCss","IrFacilitiesStyle0","IrFacilities","getTotalAmenities","set","Set","amenity_type","add","time_constraints","check_in_from","check_in_till","Lcz_CheckInFromUntil","replace","check_out_till","internet_offering","public_internet_statement","Lcz_PublicAreas","is_room_internet_free","Lcz_Rooms","Lcz_FreeInternet","_l","parking_offering","title","_m","_o","pricing","Lcz_At","formatAmount","_p","_q","schedule","_r","pets_acceptance","_s","_t","baby_cot_offering","_u","_v","_w","Lcz_PropertyFacilities","_x","aminity","_y","Lcz_Activities","_z","_0","Lcz_Services","_1","_2","food_and_beverage","innerHTML","_3","_5","_4","allowed_cards","Lcz_AcceptedCreditCards","_6","card","_7","important_info","_8","_9","non_standard_conditions","irLoyaltyCss","IrLoyaltyStyle0","IrLoyalty","toggleLoyalty","Lcz_LoyaltyApplied","Lcz_GetLoyaltyDiscount","irPropertyGalleryCss","IrPropertyGalleryStyle0","IrPropertyGallery","handleOpenGallery","window","innerWidth","activeIndex","irDialog","handleOpenCarouselGallery","showPlanLimitations","withRoomSize","showMoreTag","roomType","children_nbr","occupancy_max","maxNumber","renderOccupancy","renderRoomSize","Lcz_Maximum","Lcz_MoreDetails","renderRoomtypeImages","display","images","src","url","alt","formatImageAlt","tooltip","carouselClasses","onCarouselImageIndexChange","slides","img","v4","image_uri","thumbnail","property_state","totalImages","maxLength","disableCarouselClick","enableCarouselSwipe","closeButton","dir","style","background","padding","onCarouselImageClicked","aminities","irRateplanCss","IrRateplanStyle0","IrRateplan","paymentService","PaymentService","handleRTICHange","isRatePlanAvailable","roomTypeInventory","ratePlan","is_available_to_book","not_available_reason","handleVariationChange","variations","rateplanId","roomTypeId","selectedVariation","roomTypes","rt","rateplans","rp","updateRoomParams","selected_variation","ratePlanId","fetchCancelationMessage","cancelationMessage","getCancelationMessage","visibleInventory","applicable_policies","is_targeting_travel_agency","isAgentMode","isInFreeCancelationZone","checkFreeCancelationZone","isInventoryFull","discounted_amount","values","ratePlanSelections","f","reserved","short_name","is_non_refundable","color","Lcz_NonRefundable","labelColors","open_behavior","Lcz_FreeCancellation","Lcz_IfICancel","cancelation","guarantee","onTooltipOpenChange","discount_pct","amount","Lcz_NotAvailable","alignItems","custom_text","getDateDifference","amount_per_night","Lcz_night","Lcz_MLS_Alert","findIndex","formatVariation","html","toPrecision","_10","_11","_12","_14","_13","_15","reserveRooms","animateBookingButton","_16","_17","containerStyle","customStyles","isRequestPending","opacity","_18","toLowerCase","irRoomtypeCss","IrRoomtypeStyle0","IrRoomtype","checkRateplans","handleRoomTypeChange","shouldHideMlsRateplans","roomtype","max_occupancy","enableBooking","getVisibleInventory","inventory"],"sources":["src/components/ir-booking-engine/ir-booking-page/ir-accomodations/ir-accomodations.css?tag=ir-accomodations&encapsulation=shadow","src/components/ir-booking-engine/ir-booking-page/ir-accomodations/ir-accomodations.tsx","src/components/ir-booking-engine/ir-booking-page/ir-adult-child-counter/ir-adult-child-counter.css?tag=ir-adult-child-counter&encapsulation=shadow","src/components/ir-booking-engine/ir-booking-page/ir-adult-child-counter/ir-adult-child-counter.tsx","src/components/ir-booking-engine/ir-booking-page/ir-availability-header/availability.ts","src/validators/querystring.validator.ts","src/components/ir-booking-engine/ir-booking-page/ir-availability-header/ir-availability-header.css?tag=ir-availability-header&encapsulation=shadow","src/components/ir-booking-engine/ir-booking-page/ir-availability-header/ir-availability-header.tsx","src/components/ir-booking-engine/ir-booking-page/ir-availability-header/ir-coupon-dialog/ir-coupon-dialog.css?tag=ir-coupon-dialog&encapsulation=shadow","src/components/ir-booking-engine/ir-booking-page/ir-availability-header/ir-coupon-dialog/ir-coupon-dialog.tsx","src/components/ir-booking-engine/ir-booking-page/ir-availability-header/ir-date-popup/ir-date-popup.css?tag=ir-date-popup&encapsulation=shadow","src/components/ir-booking-engine/ir-booking-page/ir-availability-header/ir-date-popup/ir-date-popup.tsx","src/components/ir-booking-engine/ir-booking-page/ir-facilities/ir-facilities.css?tag=ir-facilities&encapsulation=shadow","src/components/ir-booking-engine/ir-booking-page/ir-facilities/ir-facilities.tsx","src/components/ir-booking-engine/ir-booking-page/ir-availability-header/ir-loyalty/ir-loyalty.css?tag=ir-loyalty&encapsulation=shadow","src/components/ir-booking-engine/ir-booking-page/ir-availability-header/ir-loyalty/ir-loyalty.tsx","src/components/ir-booking-engine/ir-booking-page/ir-property-gallery/ir-property-gallery.css?tag=ir-property-gallery&encapsulation=shadow","src/components/ir-booking-engine/ir-booking-page/ir-property-gallery/ir-property-gallery.tsx","src/components/ir-booking-engine/ir-booking-page/ir-rateplan/ir-rateplan.css?tag=ir-rateplan&encapsulation=shadow","src/components/ir-booking-engine/ir-booking-page/ir-rateplan/ir-rateplan.tsx","src/components/ir-booking-engine/ir-booking-page/ir-roomtype/ir-roomtype.css?tag=ir-roomtype&encapsulation=shadow","src/components/ir-booking-engine/ir-booking-page/ir-roomtype/ir-roomtype.tsx"],"sourcesContent":[":host {\r\n  display: block;\r\n}\r\n","import { Component, Prop, h } from '@stencil/core';\r\nimport { Amenity, BeddingSetup } from '@/models/property';\r\n@Component({\r\n  tag: 'ir-accomodations',\r\n  styleUrl: 'ir-accomodations.css',\r\n  shadow: true,\r\n})\r\nexport class IrAccomodations {\r\n  @Prop() amenities: Amenity[];\r\n  @Prop() bookingAttributes: {\r\n    max_occupancy: number;\r\n    bedding_setup: BeddingSetup[];\r\n  };\r\n\r\n  private checkAmenity(code: string) {\r\n    return this.amenities.find(a => a.code === code);\r\n  }\r\n  renderAmeneties() {\r\n    const wifi = this.checkAmenity('freewifi');\r\n    const climatecontrol = this.checkAmenity('climatecontrol');\r\n    const balcony = this.checkAmenity('balcony');\r\n    return (\r\n      <ul class=\"flex flex-wrap items-center  gap-3 text-xs\">\r\n        {wifi && (\r\n          <li class=\"flex items-center gap-1\">\r\n            <ir-icons name=\"wifi\" svgClassName=\"size-4\"></ir-icons> <span>{wifi.description}</span>\r\n          </li>\r\n        )}\r\n        {climatecontrol && (\r\n          <li class=\"flex items-center gap-1\">\r\n            <ir-icons name=\"snowflake\" svgClassName=\"size-4\"></ir-icons> <span>{climatecontrol.description}</span>\r\n          </li>\r\n        )}\r\n        {balcony && (\r\n          <li class=\"flex items-center gap-1\">\r\n            <ir-icons name=\"sun\" svgClassName=\"size-4\"></ir-icons> <span>{balcony.description}</span>\r\n          </li>\r\n        )}\r\n      </ul>\r\n    );\r\n  }\r\n  render() {\r\n    return (\r\n      <div class=\"space-y-2 pb-2 text-xs font-normal text-gray-700\">\r\n        {this.bookingAttributes?.bedding_setup.length > 0 && (\r\n          <div class=\"flex  items-center gap-2.5\">\r\n            <ir-icons name=\"bed\"></ir-icons>\r\n            <div class=\"flex flex-wrap items-center\">\r\n              {this.bookingAttributes?.bedding_setup?.map((bed_setup, index) => (\r\n                <p key={bed_setup.code}>\r\n                  {bed_setup.count > 0 ? `${bed_setup.count} ` : ''}\r\n                  {bed_setup.name} {index < this.bookingAttributes.bedding_setup.length - 1 && <span>-&nbsp;</span>}\r\n                </p>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {this.renderAmeneties()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",".counter-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n  box-sizing: border-box;\r\n  padding: 10px;\r\n  border-radius: min(var(--radius, 0.5rem), 0.5rem);\r\n  border: 1px solid var(--gray-100, #f2f4f7);\r\n  background: white;\r\n  box-shadow:\r\n    0 12px 16px -4px rgba(16, 24, 40, 0.08),\r\n    0 4px 6px -2px rgba(16, 24, 40, 0.03);\r\n}\r\n:host([data-state='error']) .popover-trigger {\r\n  border-color: var(--error-500, #f04438);\r\n  border-color: var(--error-500, #f04438);\r\n  transition: all 300ms ease-in-out;\r\n  color: var(--error-500, #f04438);\r\n}\r\n:host([data-state='error']) .popover-trigger p,\r\n:host([data-state='error']) .popover-trigger span {\r\n  transition: all 300ms ease-in-out;\r\n  color: var(--error-500, #f04438);\r\n}\r\n.counter-item {\r\n  display: flex;\r\n  align-items: center;\r\n  color: var(--gray-800, #1d2939);\r\n  justify-content: space-between;\r\n  gap: 32px;\r\n}\r\n\r\n.counter-item p {\r\n  margin: 0;\r\n}\r\n\r\n.counter-buttons-group {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.counter-buttons-group p {\r\n  width: 35px;\r\n  text-align: center;\r\n}\r\n\r\n.main-text {\r\n  font-size: 1rem !important;\r\n  line-height: 1.25rem !important;\r\n  padding-bottom: 4px !important;\r\n  font-weight: 400;\r\n  text-transform: capitalize;\r\n}\r\n\r\n.secondary-text {\r\n  font-size: 12px;\r\n  line-height: 16px;\r\n}\r\n\r\n.done-button {\r\n  margin-top: 10px;\r\n  width: 100%;\r\n}\r\n\r\n.popover-trigger p {\r\n  margin: 0;\r\n  padding: 0;\r\n  font-size: 0.75rem;\r\n}\r\n.guests {\r\n  color: var(--gray-600, #475467);\r\n  font-size: 0.875rem !important;\r\n  font-weight: 400;\r\n}\r\n.counter-container {\r\n  box-sizing: border-box;\r\n  border-radius: min(var(--radius, 0.5rem), 0.5rem);\r\n  background: white;\r\n  border: 1px solid var(--gray-100, #f2f4f7);\r\n  box-shadow:\r\n    0 16px 12px -4px rgba(16, 24, 40, 0.08),\r\n    0 6px 4px -2px rgba(16, 24, 40, 0.03);\r\n}\r\n@media (min-width: 640px) {\r\n  .counter-container {\r\n    width: 250px !important;\r\n  }\r\n}\r\n.popover-trigger {\r\n  box-sizing: border-box;\r\n  gap: 0.875rem;\r\n  background: white;\r\n  border-radius: min(var(--radius, 0.5rem), 0.5rem);\r\n  border: 1px solid var(--gray-300, #d0d5dd);\r\n  display: inline-flex;\r\n  align-items: center;\r\n  padding: 0px 0.875rem;\r\n  width: 100% !important;\r\n  min-width: 13.5rem;\r\n  line-height: 1;\r\n  color: var(--gray-700, #344054);\r\n  cursor: pointer;\r\n  /* height: 3rem; */\r\n}\r\n:host([data-state='error']) .popover-trigger[data-state='opened'],\r\n:host([data-state='error']) .popover-trigger:active,\r\n:host([data-state='error']) .popover-trigger:focus-visible,\r\n:host([data-state='error']) .popover-trigger[data-state='opened'] p,\r\n:host([data-state='error']) .popover-trigger:active p,\r\n:host([data-state='error']) .popover-trigger:focus-visible p,\r\n:host([data-state='error']) .popover-trigger[data-state='opened'] span,\r\n:host([data-state='error']) .popover-trigger:active span,\r\n:host([data-state='error']) .popover-trigger:focus-visible span,\r\n.popover-trigger[data-state='opened'],\r\n.popover-trigger:active,\r\n.popover-trigger:focus-visible {\r\n  border-color: var(--gray-700, #344054);\r\n  color: var(--gray-700, #344054);\r\n}\r\n.popover-trigger p {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.guests {\r\n  width: 100%;\r\n  border-radius: min(var(--radius, 8px), 8px);\r\n  outline: none;\r\n  font-size: 14px;\r\n  line-height: 1.25rem;\r\n  padding-inline-end: 0.75rem;\r\n  color: hsl(215, 16%, 47%);\r\n  text-align: start;\r\n}\r\n.label {\r\n  padding: 0px 14px;\r\n  pointer-events: none;\r\n  transition: all 0.3s ease-in-out;\r\n  color: var(--gray-600, #475467);\r\n  font-size: 0.75rem;\r\n  line-height: 1rem;\r\n  text-align: start;\r\n}\r\n","import localizedWords from '@/stores/localization.store';\r\nimport { calculateInfantNumber } from '@/utils/utils';\r\nimport { Component, Prop, h, Event, EventEmitter, State, Fragment, Method, Watch } from '@stencil/core';\r\nexport type AddAdultsAndChildrenEvent = { adult_nbr: number; child_nbr: number; infant_nbr: number; childrenAges: string[] };\r\n@Component({\r\n  tag: 'ir-adult-child-counter',\r\n  styleUrl: 'ir-adult-child-counter.css',\r\n  shadow: true,\r\n})\r\nexport class IrAdultChildCounter {\r\n  @Prop({ mutable: true }) adultCount = 2;\r\n  @Prop({ mutable: true }) childrenCount = 0;\r\n  @Prop({ mutable: true }) infant_nbr = 0;\r\n  @Prop({ mutable: true }) error: boolean;\r\n  @Prop() minAdultCount = 0;\r\n  @Prop() minChildrenCount = 0;\r\n  @Prop() maxAdultCount = 10;\r\n  @Prop() maxChildrenCount = 10;\r\n  @Prop() childMaxAge: number = 0;\r\n  @Prop() baseChildrenAges: string[] = [];\r\n\r\n  @State() isPopoverOpen: boolean = false;\r\n  @State() childrenAges: string[] = [];\r\n\r\n  @Event()\r\n  addAdultsAndChildren: EventEmitter<AddAdultsAndChildrenEvent>;\r\n  @Event() checkAvailability: EventEmitter<null>;\r\n\r\n  private popover: HTMLIrPopoverElement;\r\n\r\n  componentWillLoad() {\r\n    this.childrenAges = [...this.baseChildrenAges];\r\n  }\r\n\r\n  @Watch('baseChildrenAges')\r\n  handleBaseChildrenAgesChange(newValue: string[]) {\r\n    this.childrenAges = [...newValue];\r\n  }\r\n  @Method()\r\n  async open() {\r\n    if (this.isPopoverOpen) {\r\n      return;\r\n    }\r\n    this.popover.toggleVisibility();\r\n  }\r\n\r\n  private addChildrenAndAdult() {\r\n    this.error = false;\r\n    this.updateGuestInformation();\r\n    this.validateChildrenAges();\r\n    this.checkAvailability.emit(null);\r\n  }\r\n\r\n  private incrementAdultCount() {\r\n    const newValue = this.adultCount + 1;\r\n    if (newValue > this.maxAdultCount) {\r\n      return;\r\n    }\r\n    this.adultCount = newValue;\r\n  }\r\n\r\n  private decrementAdultCount() {\r\n    const newValue = this.adultCount - 1;\r\n    if (newValue < this.minAdultCount) {\r\n      return;\r\n    }\r\n    this.adultCount = newValue;\r\n  }\r\n\r\n  private incrementChildrenCount() {\r\n    const newValue = this.childrenCount + 1;\r\n    if (newValue > this.maxChildrenCount) {\r\n      return;\r\n    }\r\n\r\n    this.childrenAges.push('');\r\n    this.childrenCount = newValue;\r\n  }\r\n\r\n  private decrementChildrenCount() {\r\n    const newValue = this.childrenCount - 1;\r\n    if (newValue < this.minChildrenCount) {\r\n      return;\r\n    }\r\n    this.childrenAges.pop();\r\n    this.childrenCount = newValue;\r\n  }\r\n\r\n  private handlePopoverToggle(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    this.isPopoverOpen = e.detail;\r\n    if (!this.isPopoverOpen) {\r\n      if (this.childrenCount === 0) {\r\n        this.popover.forceClose();\r\n      } else {\r\n        this.validateChildrenAges();\r\n      }\r\n      this.updateGuestInformation();\r\n    }\r\n  }\r\n\r\n  private updateGuestInformation() {\r\n    const infant_nbr = calculateInfantNumber(this.childrenAges);\r\n    const config = {\r\n      adult_nbr: this.adultCount,\r\n      child_nbr: this.childrenCount,\r\n      infant_nbr,\r\n      childrenAges: this.childrenAges,\r\n    };\r\n    console.log(config);\r\n    this.addAdultsAndChildren.emit(config);\r\n  }\r\n  private validateChildrenAges() {\r\n    if (this.childrenAges.some(c => c === '')) {\r\n      this.error = true;\r\n      return;\r\n    }\r\n    this.popover.forceClose();\r\n  }\r\n  private guestTrigger() {\r\n    return (\r\n      <div class=\"popover-trigger w-full sm:w-fit\" slot=\"trigger\" data-state={this.isPopoverOpen ? 'opened' : 'closed'}>\r\n        <ir-icons name=\"user\" svgClassName=\"size-[1.125rem]\"></ir-icons>\r\n        <div class=\"flex h-[3rem] flex-1 flex-col justify-center gap-0.5\">\r\n          <p class=\"label\">{localizedWords.entries.Lcz_Guests}</p>\r\n          <p class={'guests'}>\r\n            {this.adultCount > 0 ? (\r\n              <Fragment>\r\n                <span class={'lowercase'}>\r\n                  {this.adultCount} {this.adultCount === 1 ? localizedWords.entries.Lcz_Adult : localizedWords.entries.Lcz_Adults}\r\n                </span>\r\n                {this.childMaxAge > 0 && (\r\n                  <span class={'lowercase'}>\r\n                    , {this.childrenCount} {this.childrenCount === 1 ? localizedWords.entries.Lcz_Child : localizedWords.entries.Lcz_Children}\r\n                  </span>\r\n                )}\r\n              </Fragment>\r\n            ) : (\r\n              <span class=\"\">{localizedWords.entries.Lcz_Select}...</span>\r\n            )}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  render() {\r\n    return (\r\n      <ir-popover\r\n        ref={el => (this.popover = el)}\r\n        allowFlip={false}\r\n        placement=\"bottom-end\"\r\n        autoAdjust={false}\r\n        outsideEvents=\"none\"\r\n        onOpenChange={this.handlePopoverToggle.bind(this)}\r\n      >\r\n        {this.guestTrigger()}\r\n        <div class=\"counter-container  w-full border-0 p-4 pt-14 shadow-none sm:w-auto sm:border sm:pt-4 sm:shadow-sm\" slot=\"popover-content\">\r\n          <div class=\"counter-item\">\r\n            <div>\r\n              <p class=\"main-text\">{localizedWords.entries.Lcz_Adults}</p>\r\n              <p class=\"secondary-text\">\r\n                {localizedWords.entries.Lcz_Age} {this.childMaxAge + 1}+\r\n              </p>\r\n            </div>\r\n            <div class=\"counter-buttons-group\" role=\"group\">\r\n              <ir-button\r\n                iconName=\"minus\"\r\n                disabled={this.adultCount === this.minAdultCount}\r\n                variants=\"icon\"\r\n                onButtonClick={this.decrementAdultCount.bind(this)}\r\n                aria-label=\"Decrease adult count\"\r\n                svgClassName=\"h-[14px] w-[12.25px]\"\r\n              >\r\n                {/* <svg slot=\"btn-icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\r\n                  <path fill=\"currentColor\" d=\"M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z\" />\r\n                </svg> */}\r\n              </ir-button>\r\n              <p class={'text-base'}>{this.adultCount}</p>\r\n              <ir-button\r\n                iconName=\"plus\"\r\n                disabled={this.adultCount === this.maxAdultCount}\r\n                variants=\"icon\"\r\n                onButtonClick={this.incrementAdultCount.bind(this)}\r\n                aria-label=\"Increase adult count\"\r\n                svgClassName=\"h-[14px] w-[12.25px]\"\r\n              >\r\n                {/* <svg slot=\"btn-icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\r\n                  <path\r\n                    fill=\"currentColor\"\r\n                    d=\"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z\"\r\n                  />\r\n                </svg> */}\r\n              </ir-button>\r\n            </div>\r\n          </div>\r\n          {this.childMaxAge > 0 && (\r\n            <div class=\"counter-item\">\r\n              <div>\r\n                <p class=\"main-text\">{localizedWords.entries.Lcz_Children}</p>\r\n                <p class=\"secondary-text\">\r\n                  {localizedWords.entries.Lcz_Age} 0-{this.childMaxAge}\r\n                </p>\r\n              </div>\r\n              <div class=\"counter-buttons-group\" role=\"group\">\r\n                <ir-button\r\n                  disabled={this.childrenCount === this.minChildrenCount}\r\n                  variants=\"icon\"\r\n                  onButtonClick={this.decrementChildrenCount.bind(this)}\r\n                  aria-label=\"Decrease child count\"\r\n                  iconName=\"minus\"\r\n                  svgClassName=\"h-[14px] w-[12.25px]\"\r\n                >\r\n                  {/* <svg slot=\"btn-icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\r\n                  <path fill=\"currentColor\" d=\"M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z\" />\r\n                </svg> */}\r\n                </ir-button>\r\n                <p class={'text-base'}>{this.childrenCount}</p>\r\n                <ir-button\r\n                  disabled={this.childrenCount === this.maxChildrenCount}\r\n                  variants=\"icon\"\r\n                  onButtonClick={this.incrementChildrenCount.bind(this)}\r\n                  aria-label=\"Increase child count\"\r\n                  iconName=\"plus\"\r\n                  svgClassName=\"h-[14px] w-[12.25px]\"\r\n                >\r\n                  {/* <svg slot=\"btn-icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\r\n                  <path\r\n                    fill=\"currentColor\"\r\n                    d=\"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z\"\r\n                  />\r\n                </svg> */}\r\n                </ir-button>\r\n              </div>\r\n            </div>\r\n          )}\r\n          {this.childrenAges?.map((v, i) => (\r\n            <div>\r\n              <ir-select\r\n                addDummyOption\r\n                value={v.toString()}\r\n                key={`child_${i}_age`}\r\n                data-state={this.error && v === '' ? 'error' : ''}\r\n                variant=\"double-line\"\r\n                label={`Child ${i + 1} age`}\r\n                onValueChange={e => {\r\n                  const prev = [...this.childrenAges];\r\n                  prev[i] = e.detail.toString();\r\n                  this.childrenAges = [...prev];\r\n                }}\r\n                data={[...Array(this.childMaxAge + 1)].map((_, index) => ({\r\n                  id: index.toString(),\r\n                  value: index === 0 ? localizedWords.entries['Lcz_under1'] : index.toString(),\r\n                }))}\r\n              ></ir-select>\r\n              {this.error && v === '' && <p class={'m-0 p-0 text-xs text-red-500'}>{localizedWords.entries.Lcz_enterchildage}</p>}\r\n            </div>\r\n          ))}\r\n          <ir-button\r\n            onButtonClick={this.addChildrenAndAdult.bind(this)}\r\n            size=\"md\"\r\n            class=\"done-button\"\r\n            label={localizedWords.entries.Lcz_Done}\r\n            aria-label=\"Confirm selection\"\r\n          ></ir-button>\r\n        </div>\r\n      </ir-popover>\r\n    );\r\n  }\r\n}\r\n","import { z } from 'zod';\r\n\r\nexport const ExposedBookingAvailability = z.object({\r\n  propertyid: z.coerce.number(),\r\n  from_date: z.string().min(2),\r\n  to_date: z.string().min(2),\r\n  room_type_ids: z.string().array().optional().default([]),\r\n  adult_nbr: z.number().min(1),\r\n  child_nbr: z.number().min(0),\r\n  infant_nbr: z.number().min(0),\r\n  language: z.string().default('en'),\r\n  currency_ref: z.string(),\r\n  is_in_loyalty_mode: z.boolean().default(false),\r\n  promo_key: z.string(),\r\n  is_in_agent_mode: z.boolean().default(false),\r\n  agent_id: z.number().default(0).optional(),\r\n  is_in_affiliate_mode: z.boolean().default(false),\r\n  affiliate_id: z.number().default(0).optional(),\r\n});\r\n\r\nexport type TExposedBookingAvailability = z.infer<typeof ExposedBookingAvailability>;\r\n","import app_store from '@/stores/app.store';\r\nimport { parseISO, isValid, isAfter, isSameDay, isBefore, format } from 'date-fns';\r\nimport { z } from 'zod';\r\n\r\nexport class QueryStringValidator {\r\n  private errors: string[] = [];\r\n\r\n  private dateSchema = z.string().regex(/^\\d{4}-\\d{2}-\\d{2}$/, {\r\n    message: 'Date must be in YYYY-MM-DD format.',\r\n  });\r\n\r\n  public validateCheckin(checkinStr: string): Date | null {\r\n    this.errors = [];\r\n    try {\r\n      this.dateSchema.parse(checkinStr);\r\n    } catch (e) {\r\n      this.errors.push('Checkin date must be in YYYY-MM-DD format.');\r\n      return null;\r\n    }\r\n\r\n    const checkinDate = parseISO(checkinStr);\r\n    const today = new Date();\r\n\r\n    if (!isValid(checkinDate)) {\r\n      this.errors.push('Checkin date is not a valid date.');\r\n      return null;\r\n    }\r\n    if (isBefore(checkinDate, today) && !isSameDay(checkinDate, today)) {\r\n      this.errors.push('Checkin date must be today or in the future.');\r\n      return null;\r\n    }\r\n    if (app_store.nonBookableNights[checkinStr]) {\r\n      this.errors.push('Checkin date is unavailable.');\r\n      return null;\r\n    }\r\n    return checkinDate;\r\n  }\r\n  public validateAges(str: string) {\r\n    if (str.length === 1 && !isNaN(Number(str))) {\r\n      return true;\r\n    }\r\n    const regex = /^(\\d+_)+\\d+$/;\r\n    return regex.test(str);\r\n  }\r\n  public validateCheckout(checkoutStr: string, checkinDate: Date): Date | null {\r\n    try {\r\n      this.dateSchema.parse(checkoutStr);\r\n    } catch (e) {\r\n      this.errors.push('Checkout date must be in YYYY-MM-DD format.');\r\n      return null;\r\n    }\r\n\r\n    const checkoutDate = parseISO(checkoutStr);\r\n\r\n    if (!isValid(checkoutDate)) {\r\n      this.errors.push('Checkout date is not a valid date.');\r\n      return null;\r\n    }\r\n\r\n    if (!isAfter(checkoutDate, checkinDate)) {\r\n      this.errors.push('Checkout date must be at least one day after checkin date.');\r\n      return null;\r\n    }\r\n\r\n    if (app_store.nonBookableNights[checkoutStr] && app_store.nonBookableNights[format(checkinDate, 'yyyy-MM-dd')]) {\r\n      this.errors.push('Checkout date is unavailable.');\r\n      return null;\r\n    }\r\n    return checkoutDate;\r\n  }\r\n\r\n  public validateAdultCount(adultCount: string) {\r\n    return isNaN(Number(adultCount));\r\n  }\r\n\r\n  public validateChildrenCount(children: string) {\r\n    return isNaN(Number(children));\r\n  }\r\n\r\n  public getErrors(): string[] {\r\n    return this.errors;\r\n  }\r\n}\r\n",".availability-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  background-color: #f3f4f6;\r\n  padding: 1rem;\r\n  border-radius: min(var(--radius, 0.5rem), 0.75rem);\r\n}\r\n.full-width-on-mobile {\r\n  width: 100%;\r\n}\r\n.availability-inputs {\r\n  display: flex;\r\n  width: 100%;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 1rem;\r\n}\r\n\r\n.date-popup,\r\n.adult-child-counter,\r\n.button-container {\r\n  width: 100%;\r\n}\r\n.availability-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  width: 100%;\r\n}\r\n.availability-controls ir-adult-child-counter {\r\n  flex: 1 1 0%;\r\n  width: 100%;\r\n}\r\n\r\n.date-toast .toast-message {\r\n  background-color: #ef4444;\r\n  color: white;\r\n  border-radius: 0.375rem;\r\n  padding: 0.25rem 1.25rem;\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.button-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.hidden-on-mobile {\r\n  display: none;\r\n}\r\n\r\n.full-width-on-mobile {\r\n  display: block;\r\n  width: 100%;\r\n}\r\n\r\n.promotions-container {\r\n  display: flex;\r\n  width: 100%;\r\n  flex-wrap: wrap;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 1rem;\r\n}\r\n.arrow-up {\r\n  width: 0;\r\n  height: 0;\r\n  border-left: 0.6rem solid transparent;\r\n  border-right: 0.6rem solid transparent;\r\n  border-bottom: 0.4rem solid #ef4444;\r\n  position: absolute;\r\n  top: -3.2px;\r\n  animation: tooltipAnimation 300ms ease-out;\r\n}\r\n.arrow-up:dir(rtl) {\r\n  right: 0.625rem;\r\n}\r\n.arrow-up:dir(ltr) {\r\n  left: 0.625rem;\r\n}\r\n.date-toast {\r\n  position: relative;\r\n  animation: tooltipAnimation 300ms ease-out;\r\n}\r\n.availability-inputs.promotions,\r\n.availability-inputs.promotions .adult-child-counter,\r\n.availability-inputs.promotions .date-popup {\r\n  flex: 1 1 0%;\r\n}\r\n@keyframes tooltipAnimation {\r\n  from {\r\n    transform: translateY(4px);\r\n    opacity: 0.6;\r\n  }\r\n}\r\n\r\n/* Media Queries */\r\n@media (min-width: 640px) {\r\n  .availability-container {\r\n    flex-direction: row;\r\n    flex-wrap: wrap;\r\n    justify-content: center;\r\n    gap: 1rem;\r\n  }\r\n\r\n  .availability-inputs {\r\n    flex-direction: row;\r\n    width: auto;\r\n  }\r\n\r\n  .date-popup {\r\n    width: 100%;\r\n  }\r\n  .adult-child-counter,\r\n  .button-container {\r\n    width: auto;\r\n  }\r\n\r\n  .hidden-on-mobile {\r\n    display: block;\r\n  }\r\n\r\n  .full-width-on-mobile {\r\n    display: none;\r\n  }\r\n\r\n  .promotions-container {\r\n    width: auto;\r\n    justify-content: flex-start;\r\n  }\r\n}\r\n@media (min-width: 1024px) {\r\n  .availability-container {\r\n    flex-direction: row;\r\n    flex-wrap: wrap;\r\n    gap: 2rem;\r\n  }\r\n  .availability-container.promotions {\r\n    justify-content: flex-start;\r\n  }\r\n}\r\n@media (min-width: 1280px) {\r\n  .availability-container {\r\n    gap: 4rem;\r\n  }\r\n}\r\n","import { Component, Event, EventEmitter, h, Listen, Prop, State, Watch } from '@stencil/core';\r\nimport { ExposedBookingAvailability, TExposedBookingAvailability } from './availability';\r\nimport { format } from 'date-fns';\r\nimport { ZodError } from 'zod';\r\nimport { onAppDataChange } from '@/stores/app.store';\r\nimport { PropertyService } from '@/services/api/property.service';\r\nimport app_store from '@/stores/app.store';\r\nimport booking_store from '@/stores/booking';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport { QueryStringValidator } from '@/validators/querystring.validator';\r\nimport { calculateInfantNumber, modifyQueryParam } from '@/utils/utils';\r\nimport { AddAdultsAndChildrenEvent } from '../ir-adult-child-counter/ir-adult-child-counter';\r\n\r\n@Component({\r\n  tag: 'ir-availability-header',\r\n  styleUrl: 'ir-availability-header.css',\r\n  shadow: true,\r\n})\r\nexport class IrAvailabilityHeader {\r\n  @Prop() fromDate: string;\r\n  @Prop() toDate: string;\r\n  @Prop() adultCount: string;\r\n  @Prop() childrenCount: string;\r\n  @Prop() ages: string = '';\r\n\r\n  @State() target: HTMLElement = null;\r\n  @State() isLoading = false;\r\n  @State() exposedBookingAvailabilityParams: TExposedBookingAvailability = {\r\n    adult_nbr: 2,\r\n    child_nbr: 0,\r\n    currency_ref: 'USD',\r\n    infant_nbr: 0,\r\n    language: 'en',\r\n    room_type_ids: [],\r\n    propertyid: 42,\r\n    is_in_loyalty_mode: booking_store.bookingAvailabilityParams.loyalty ? true : !!booking_store.bookingAvailabilityParams.coupon,\r\n    promo_key: booking_store.bookingAvailabilityParams.coupon || '',\r\n    is_in_agent_mode: !!booking_store.bookingAvailabilityParams.agent || false,\r\n    agent_id: booking_store.bookingAvailabilityParams.agent?.id || 0,\r\n  };\r\n\r\n  @Event() resetBooking: EventEmitter<null>;\r\n  @Event() scrollToRoomType: EventEmitter<null>;\r\n\r\n  private errorCause: ('date' | 'adult_child')[] | null = null;\r\n  private popoverInstance = null;\r\n  private toast_timeout: NodeJS.Timeout;\r\n  private personCounter: HTMLIrAdultChildCounterElement;\r\n\r\n  private propertyService = new PropertyService();\r\n  private validator = new QueryStringValidator();\r\n\r\n  componentWillLoad() {\r\n    const { property_id } = app_store.app_data;\r\n    const validatedFromDate = this.validator.validateCheckin(this.fromDate);\r\n    this.exposedBookingAvailabilityParams = {\r\n      ...this.exposedBookingAvailabilityParams,\r\n      adult_nbr: this.setDefaultAdultCount(),\r\n      child_nbr: this.setDefaultChildCount(),\r\n      from_date: validatedFromDate ? this.fromDate : null,\r\n      to_date: this.validator.validateCheckout(this.toDate, validatedFromDate) ? this.toDate : null,\r\n    };\r\n\r\n    if (booking_store.bookingAvailabilityParams.from_date) {\r\n      this.exposedBookingAvailabilityParams.from_date = format(booking_store.bookingAvailabilityParams.from_date, 'yyyy-MM-dd');\r\n      this.exposedBookingAvailabilityParams.to_date = format(booking_store.bookingAvailabilityParams.to_date, 'yyyy-MM-dd');\r\n    }\r\n    if (booking_store.bookingAvailabilityParams.adult_nbr) {\r\n      this.exposedBookingAvailabilityParams.adult_nbr = booking_store.bookingAvailabilityParams.adult_nbr;\r\n      this.exposedBookingAvailabilityParams.child_nbr = booking_store.bookingAvailabilityParams.child_nbr;\r\n    }\r\n    this.changeExposedAvailabilityParams({\r\n      propertyid: property_id,\r\n      language: app_store.userPreferences.language_id,\r\n      currency_ref: app_store.userPreferences.currency_id,\r\n    });\r\n    if (booking_store.childrenAges.length == 0) {\r\n      booking_store.childrenAges = [...Array(this.exposedBookingAvailabilityParams.child_nbr)].fill('');\r\n    }\r\n\r\n    this.processAges();\r\n    onAppDataChange('userPreferences', async newValue => {\r\n      this.changeExposedAvailabilityParams({\r\n        language: newValue.language_id,\r\n        currency_ref: newValue.currency_id,\r\n      });\r\n      try {\r\n        if (app_store.currentPage === 'booking') {\r\n          this.resetBooking.emit(null);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    });\r\n    this.recheckAvailability();\r\n  }\r\n\r\n  @Watch('ages')\r\n  handleAgesChange(newValue: string, oldValue: string) {\r\n    if (newValue !== oldValue) {\r\n      this.processAges();\r\n    }\r\n  }\r\n\r\n  @Watch('fromDate')\r\n  handleFromDateChange(newValue: string, oldValue: string) {\r\n    if (newValue !== oldValue) {\r\n      if (this.validator.validateCheckin(newValue)) {\r\n        this.exposedBookingAvailabilityParams = {\r\n          ...this.exposedBookingAvailabilityParams,\r\n          from_date: newValue,\r\n        };\r\n        if (this.fromDate && this.toDate && !this.validator.validateAdultCount(this.adultCount)) {\r\n          this.checkAvailability();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  @Watch('toDate')\r\n  handleToDateChange(newValue: string, oldValue: string) {\r\n    if (newValue !== oldValue) {\r\n      const validatedFromDate = this.validator.validateCheckin(this.fromDate);\r\n      if (validatedFromDate) {\r\n        if (this.validator.validateCheckout(newValue, validatedFromDate)) {\r\n          this.exposedBookingAvailabilityParams = {\r\n            ...this.exposedBookingAvailabilityParams,\r\n            to_date: newValue,\r\n          };\r\n          this.recheckAvailability();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  @Watch('childrenCount')\r\n  handleChildrenCountChange(newValue: string, oldValue: string) {\r\n    if (newValue !== oldValue) {\r\n      if (!this.validator.validateChildrenCount(newValue)) {\r\n        this.exposedBookingAvailabilityParams = {\r\n          ...this.exposedBookingAvailabilityParams,\r\n          child_nbr: +newValue,\r\n        };\r\n        booking_store.childrenAges = [...Array(this.exposedBookingAvailabilityParams.child_nbr)].fill('');\r\n        this.recheckAvailability();\r\n      }\r\n    }\r\n  }\r\n\r\n  @Watch('adultCount')\r\n  handleAdultCountChange(newValue: string, oldValue: string) {\r\n    if (newValue !== oldValue) {\r\n      if (!this.validator.validateAdultCount(newValue)) {\r\n        this.exposedBookingAvailabilityParams = {\r\n          ...this.exposedBookingAvailabilityParams,\r\n          adult_nbr: +newValue,\r\n        };\r\n        this.recheckAvailability();\r\n      }\r\n    }\r\n  }\r\n\r\n  @Listen('dateChange')\r\n  handleDateChange(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    const { start, end } = e.detail;\r\n    if (end) {\r\n      this.changeExposedAvailabilityParams({\r\n        from_date: format(start, 'yyyy-MM-dd').toString(),\r\n        to_date: format(end, 'yyyy-MM-dd').toString(),\r\n      });\r\n    } else if (this.exposedBookingAvailabilityParams.to_date && !end) {\r\n      this.changeExposedAvailabilityParams({\r\n        from_date: format(start, 'yyyy-MM-dd').toString(),\r\n        to_date: null,\r\n      });\r\n    } else {\r\n      this.changeExposedAvailabilityParams({ from_date: format(start, 'yyyy-MM-dd') });\r\n    }\r\n    modifyQueryParam('checkin', this.exposedBookingAvailabilityParams.from_date);\r\n    modifyQueryParam('checkout', this.exposedBookingAvailabilityParams.to_date);\r\n    if (\r\n      !!this.exposedBookingAvailabilityParams.adult_nbr &&\r\n      !!this.exposedBookingAvailabilityParams.from_date &&\r\n      !!this.exposedBookingAvailabilityParams.to_date &&\r\n      app_store.fetchedBooking\r\n    ) {\r\n      this.checkAvailability();\r\n    }\r\n  }\r\n\r\n  @Listen('addAdultsAndChildren')\r\n  handleAdultChildChange(e: CustomEvent<AddAdultsAndChildrenEvent>) {\r\n    e.stopPropagation();\r\n    e.stopImmediatePropagation();\r\n    const { adult_nbr, child_nbr, childrenAges, infant_nbr } = e.detail;\r\n    booking_store.childrenAges = [...childrenAges];\r\n    this.changeExposedAvailabilityParams({ adult_nbr, child_nbr, infant_nbr });\r\n    modifyQueryParam('adults', this.exposedBookingAvailabilityParams.adult_nbr?.toString());\r\n    modifyQueryParam('children', this.exposedBookingAvailabilityParams.child_nbr?.toString());\r\n    if (infant_nbr) {\r\n      modifyQueryParam('ages', encodeURIComponent(childrenAges.join('_')));\r\n    }\r\n  }\r\n\r\n  private setDefaultAdultCount() {\r\n    if (this.validator.validateAdultCount(this.adultCount)) {\r\n      return 2;\r\n    }\r\n    const adCountNumber = Number(this.adultCount);\r\n    return adCountNumber > app_store.property.adult_child_constraints.adult_max_nbr ? app_store.property.adult_child_constraints.adult_max_nbr : adCountNumber;\r\n  }\r\n\r\n  private setDefaultChildCount() {\r\n    if (this.validator.validateChildrenCount(this.childrenCount)) {\r\n      return 0;\r\n    }\r\n    const childCountNumber = Number(this.childrenCount);\r\n    return childCountNumber > app_store.property.adult_child_constraints.child_max_nbr ? app_store.property.adult_child_constraints.child_max_nbr : childCountNumber;\r\n  }\r\n\r\n  private recheckAvailability() {\r\n    if (!this.fromDate || !this.toDate || !this.adultCount) {\r\n      return;\r\n    }\r\n    const isValidFromDate = this.validator.validateCheckin(this.fromDate);\r\n    const isValidToDate = this.validator.validateCheckout(this.toDate, isValidFromDate);\r\n    const isValidAdultCount = this.validator.validateAdultCount(this.adultCount);\r\n    if (!isValidAdultCount && isValidFromDate && isValidToDate) {\r\n      this.checkAvailability();\r\n    }\r\n  }\r\n\r\n  private processAges() {\r\n    if (this.exposedBookingAvailabilityParams.child_nbr === 0) {\r\n      return;\r\n    }\r\n    if (this.validator.validateAges(this.ages)) {\r\n      const ages = this.ages.split('_');\r\n      ages.slice(0, this.exposedBookingAvailabilityParams.child_nbr + 1).forEach((age, index) => {\r\n        booking_store.childrenAges[index] = age.toString();\r\n      });\r\n      const infant_nbr = calculateInfantNumber(booking_store.childrenAges);\r\n      this.exposedBookingAvailabilityParams = {\r\n        ...this.exposedBookingAvailabilityParams,\r\n        infant_nbr,\r\n      };\r\n    }\r\n    if (this.exposedBookingAvailabilityParams.child_nbr > 0 && booking_store.childrenAges.some(c => c === '')) {\r\n      setTimeout(() => {\r\n        this.personCounter?.open();\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  private async checkAvailability() {\r\n    const params = ExposedBookingAvailability.parse(this.exposedBookingAvailabilityParams);\r\n    if (app_store.app_data.injected) {\r\n      const { from_date, to_date, adult_nbr, child_nbr, infant_nbr } = params;\r\n      const fromDate = `checkin=${from_date}`;\r\n      const toDate = `checkout=${to_date}`;\r\n      const adults = `adults=${adult_nbr}`;\r\n      const children = child_nbr > 0 ? `children=${child_nbr}` : '';\r\n      const affiliate = app_store.app_data.affiliate ? `aff=${app_store.app_data.affiliate.afname}` : '';\r\n      const currency = `cur=${app_store.userPreferences.currency_id}`;\r\n      const language = `lang=${app_store.userPreferences.language_id}`;\r\n      const loyalty = booking_store.bookingAvailabilityParams.loyalty ? 'loyalty=true' : '';\r\n      const promo_key = booking_store.bookingAvailabilityParams.coupon ? `promo=${booking_store.bookingAvailabilityParams.coupon}` : '';\r\n      const agent = booking_store.bookingAvailabilityParams.agent ? `agent=${booking_store.bookingAvailabilityParams.agent}` : '';\r\n      const ages = infant_nbr > 0 && !booking_store.childrenAges.every(c => c === '') ? `ages=${booking_store.childrenAges.join('_')}` : '';\r\n      // const queryParams = [fromDate, toDate, adults, children, affiliate, language, currency, loyalty, promo_key, agent];\r\n      const queryParams = [fromDate, toDate, adults, ages, children, affiliate, language, currency, loyalty, promo_key, agent];\r\n      const queryString = queryParams.filter(param => param !== '').join('&');\r\n\r\n      return (location.href = `https://${app_store.property.perma_link}.bookingmystay.com?${queryString}`);\r\n    }\r\n\r\n    if (booking_store.childrenAges.length > 0 && booking_store.childrenAges.some(c => c === '') && this.exposedBookingAvailabilityParams.child_nbr > 0) {\r\n      if (!this.errorCause) {\r\n        this.errorCause = [];\r\n      }\r\n      console.log('error');\r\n      this.errorCause.push('adult_child');\r\n      return;\r\n    }\r\n    booking_store.bookingAvailabilityParams = {\r\n      ...booking_store.bookingAvailabilityParams,\r\n      from_date: new Date(params.from_date),\r\n      to_date: new Date(params.to_date),\r\n      adult_nbr: params.adult_nbr,\r\n      child_nbr: params.child_nbr,\r\n    };\r\n    this.scrollToRoomType.emit(null);\r\n    booking_store.resetBooking = true;\r\n    const { infant_nbr, ...rest } = this.exposedBookingAvailabilityParams;\r\n    await this.propertyService.getExposedBookingAvailability({\r\n      ...rest,\r\n      child_nbr: this.exposedBookingAvailabilityParams.child_nbr,\r\n      // child_nbr: this.exposedBookingAvailabilityParams.child_nbr - this.exposedBookingAvailabilityParams.infant_nbr,\r\n      promo_key: booking_store.bookingAvailabilityParams.coupon || '',\r\n      is_in_agent_mode: !!booking_store.bookingAvailabilityParams.agent || false,\r\n      agent_id: booking_store.bookingAvailabilityParams.agent?.id || 0,\r\n      is_in_loyalty_mode: booking_store.bookingAvailabilityParams.loyalty ? true : !!booking_store.bookingAvailabilityParams.coupon,\r\n      is_in_affiliate_mode: !!app_store.app_data.affiliate,\r\n      affiliate_id: app_store.app_data.affiliate ? app_store.app_data.affiliate.id : null,\r\n    });\r\n    app_store.fetchedBooking = true;\r\n  }\r\n\r\n  private async handleCheckAvailability() {\r\n    try {\r\n      this.isLoading = true;\r\n      await this.checkAvailability();\r\n    } catch (error) {\r\n      if (error instanceof ZodError) {\r\n        console.error(error.errors);\r\n        for (const err of error.errors) {\r\n          if (!this.errorCause) {\r\n            this.errorCause = [];\r\n          }\r\n          const error_cause = err.path[0].toString();\r\n\r\n          if (error_cause.includes('date') && !this.errorCause.find(c => c === 'date')) {\r\n            this.errorCause.push('date');\r\n          }\r\n          if (error_cause.includes('nbr')) {\r\n            this.errorCause.push('adult_child');\r\n          }\r\n        }\r\n      }\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n\r\n  private changeExposedAvailabilityParams(params: Partial<TExposedBookingAvailability>) {\r\n    this.exposedBookingAvailabilityParams = {\r\n      ...this.exposedBookingAvailabilityParams,\r\n      ...params,\r\n    };\r\n  }\r\n\r\n  private shouldRenderErrorToast() {\r\n    // Check for date-related errors\r\n    if (this.errorCause?.find(c => c === 'date') !== undefined) {\r\n      // Both dates must be present to clear the error\r\n      if (this.exposedBookingAvailabilityParams.from_date && this.exposedBookingAvailabilityParams.to_date) {\r\n        this.errorCause = this.errorCause?.filter(c => c !== 'date');\r\n      }\r\n    }\r\n\r\n    // Check for adult/child count related errors\r\n    if (this.errorCause?.find(c => c === 'adult_child')) {\r\n      // There must be at least one adult to clear the error\r\n      if (this.exposedBookingAvailabilityParams.adult_nbr > 0) {\r\n        this.errorCause = this.errorCause?.filter(c => c !== 'adult_child');\r\n      }\r\n    }\r\n    return this.errorCause?.length > 0;\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    if (this.popoverInstance) {\r\n      this.popoverInstance.destroy();\r\n    }\r\n    if (this.toast_timeout) {\r\n      clearTimeout(this.toast_timeout);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    this.shouldRenderErrorToast();\r\n    const show_loyalty = app_store.property?.promotions?.some(p => p.is_loyalty);\r\n    const show_coupon = app_store.property?.promotions?.some(p => p.is_loyalty);\r\n    const showPromotions = app_store?.property?.promotions && (show_coupon || show_loyalty);\r\n    return (\r\n      <div class={`availability-container ${showPromotions ? 'promotions' : ''} xl:text-cyan-50`}>\r\n        <div class={`availability-inputs ${showPromotions ? 'promotions' : ''}`}>\r\n          <ir-date-popup\r\n            data-state={this.errorCause?.find(c => c === 'date') ? 'error' : ''}\r\n            dates={{\r\n              start: this.exposedBookingAvailabilityParams?.from_date ? new Date(this.exposedBookingAvailabilityParams.from_date) : null,\r\n              end: this.exposedBookingAvailabilityParams?.to_date ? new Date(this.exposedBookingAvailabilityParams.to_date) : null,\r\n            }}\r\n            class=\"date-popup\"\r\n          ></ir-date-popup>\r\n          <ir-adult-child-counter\r\n            data-state={this.errorCause?.find(c => c === 'adult_child') ? 'error' : ''}\r\n            adultCount={this.exposedBookingAvailabilityParams.adult_nbr}\r\n            childrenCount={this.exposedBookingAvailabilityParams.child_nbr}\r\n            minAdultCount={0}\r\n            maxAdultCount={app_store.property.adult_child_constraints.adult_max_nbr}\r\n            maxChildrenCount={app_store.property.adult_child_constraints.child_max_nbr}\r\n            childMaxAge={app_store.property.adult_child_constraints.child_max_age}\r\n            class=\"adult-child-counter\"\r\n            ref={el => (this.personCounter = el)}\r\n            baseChildrenAges={booking_store.childrenAges}\r\n            onCheckAvailability={() => this.handleCheckAvailability()}\r\n          ></ir-adult-child-counter>\r\n          <div class={'hidden sm:block'}>\r\n            <ir-button\r\n              isLoading={this.isLoading}\r\n              onButtonClick={e => {\r\n                e.stopImmediatePropagation();\r\n                e.stopPropagation();\r\n                this.handleCheckAvailability();\r\n              }}\r\n              size=\"pill\"\r\n              variants=\"icon-primary\"\r\n              iconName=\"search\"\r\n              label=\"Check availability\"\r\n            ></ir-button>\r\n          </div>\r\n          {/* </div> */}\r\n          <div class=\"full-width-on-mobile sm:hidden\">\r\n            <ir-button\r\n              isLoading={this.isLoading}\r\n              onButtonClick={e => {\r\n                e.stopImmediatePropagation();\r\n                e.stopPropagation();\r\n                this.handleCheckAvailability();\r\n              }}\r\n              size=\"md\"\r\n              label={localizedWords.entries.Lcz_Search}\r\n              buttonStyles={{ width: '100%' }}\r\n            ></ir-button>\r\n          </div>\r\n        </div>\r\n\r\n        {app_store?.property?.promotions && (\r\n          <div class=\"promotions-container\">\r\n            <ir-coupon-dialog class=\"coupon-dialog\"></ir-coupon-dialog>\r\n            <ir-loyalty class=\"loyalty\"></ir-loyalty>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  --ir-dialog-max-width: 27rem;\r\n}\r\n.title {\r\n  height: 32px;\r\n  flex-grow: 0;\r\n  font-size: 16px;\r\n  font-stretch: normal;\r\n  font-style: normal;\r\n  line-height: 1.33;\r\n  letter-spacing: normal;\r\n  color: #101828;\r\n}\r\n.Supporting-text {\r\n  height: 24px;\r\n  align-self: stretch;\r\n  flex-grow: 0;\r\n  font-size: 14px;\r\n  font-weight: normal;\r\n  font-stretch: normal;\r\n  font-style: normal;\r\n  line-height: 1.5;\r\n  letter-spacing: normal;\r\n  color: #475467;\r\n}\r\n.coupon-container {\r\n  display: flex;\r\n  width: 100%;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 1rem;\r\n}\r\n\r\n.coupon-button {\r\n  width: 100%;\r\n}\r\n\r\n.coupon-button-wide {\r\n  width: fit-content;\r\n}\r\n\r\n.coupon-applied {\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 0.875rem;\r\n  color: hsl(var(--brand-600));\r\n}\r\n\r\n.icon-remove {\r\n  color: hsl(var(--brand-600));\r\n}\r\n\r\n.coupon-form {\r\n  padding: 1rem 1rem 0;\r\n}\r\n\r\n@media (min-width: 640px) {\r\n  .coupon-form {\r\n    padding: 1.5rem 1.5rem 0;\r\n  }\r\n}\r\n\r\n.error-message {\r\n  color: #f56565;\r\n}\r\n\r\n.footer-buttons {\r\n  padding: 1.5rem 0;\r\n  display: flex;\r\n  flex-direction: column-reverse;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.button-cancel {\r\n  width: 100%;\r\n}\r\n\r\n.button-apply {\r\n  width: 100%;\r\n}\r\n\r\n@media (min-width: 768px) {\r\n  .footer-buttons {\r\n    padding: 1.5rem 0;\r\n    flex-direction: row;\r\n    justify-content: flex-end;\r\n  }\r\n  .button-cancel {\r\n    width: fit-content;\r\n  }\r\n}\r\n\r\n@media (min-width: 768px) {\r\n  .button-apply {\r\n    width: fit-content;\r\n  }\r\n}\r\n","import app_store from '@/stores/app.store';\r\nimport booking_store, { modifyBookingStore } from '@/stores/booking';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport { cn, validateCoupon } from '@/utils/utils';\r\nimport { Component, Fragment, h, State, Event, EventEmitter } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-coupon-dialog',\r\n  styleUrl: 'ir-coupon-dialog.css',\r\n  shadow: true,\r\n})\r\nexport class IrCouponDialog {\r\n  @State() coupon: string;\r\n  @State() validationMessage: { error: boolean; message: string };\r\n  @State() isValid = false;\r\n\r\n  @Event() resetBooking: EventEmitter<string>;\r\n\r\n  dialogRef: HTMLIrDialogElement;\r\n\r\n  activateCoupon() {\r\n    this.validationMessage = null;\r\n    if (!validateCoupon(this.coupon)) {\r\n      return (this.validationMessage = { error: true, message: localizedWords.entries.Lcz_InvalidAgentCode });\r\n    }\r\n    this.isValid = true;\r\n    this.validationMessage = { error: false, message: this.coupon };\r\n    this.resetBooking.emit('partialReset');\r\n    this.coupon = null;\r\n    this.dialogRef.closeModal();\r\n  }\r\n\r\n  removeCoupon() {\r\n    this.isValid = false;\r\n    this.validationMessage = null;\r\n    modifyBookingStore('bookingAvailabilityParams', {\r\n      ...booking_store.bookingAvailabilityParams,\r\n      coupon: null,\r\n      loyalty: false,\r\n    });\r\n    this.resetBooking.emit('partialReset');\r\n  }\r\n\r\n  render() {\r\n    const showCoupon = app_store.property?.promotions?.some(p => p.key !== '');\r\n    if (!showCoupon || booking_store.bookingAvailabilityParams.loyalty) {\r\n      return null;\r\n    }\r\n    if (!!booking_store.bookingAvailabilityParams.coupon) {\r\n      return (\r\n        <div class=\"coupon-applied\">\r\n          <p onClick={this.removeCoupon.bind(this)}>{localizedWords.entries.Lcz_DiscountApplied}</p>\r\n          <ir-button\r\n            aria-label=\"remove coupon\"\r\n            iconName=\"xmark\"\r\n            variants=\"icon\"\r\n            class=\"icon-remove\"\r\n            svgClassName=\"text-[hsl(var(--brand-600))]\"\r\n            onButtonClick={this.removeCoupon.bind(this)}\r\n          >\r\n            {/* <ir-icons slot=\"btn-icon\" title=\"remove coupon\" name=\"xmark\" ></ir-icons> */}\r\n          </ir-button>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <Fragment>\r\n        <ir-button\r\n          class={cn('coupon-button', {\r\n            'coupon-button-wide': !!booking_store.bookingAvailabilityParams.coupon,\r\n          })}\r\n          onButtonClick={() => this.dialogRef.openModal()}\r\n          variants=\"outline\"\r\n          label={localizedWords.entries.Lcz_HaveCoupon}\r\n          haveLeftIcon\r\n        >\r\n          <ir-icons slot=\"left-icon\" name=\"coupon\"></ir-icons>\r\n        </ir-button>\r\n        <ir-dialog\r\n          ref={el => (this.dialogRef = el)}\r\n          onOpenChange={e => {\r\n            e.stopImmediatePropagation();\r\n            e.stopPropagation();\r\n            if (!e.detail) {\r\n              this.coupon = '';\r\n              this.validationMessage = null;\r\n            }\r\n          }}\r\n        >\r\n          <form\r\n            onSubmit={e => {\r\n              e.preventDefault();\r\n              this.activateCoupon();\r\n            }}\r\n            class=\"coupon-form\"\r\n            slot=\"modal-body\"\r\n          >\r\n            <h1 class=\"title\">{localizedWords.entries.Lcz_HaveCoupon}</h1>\r\n            <ir-input\r\n              error={this.validationMessage?.error}\r\n              onTextChanged={e => (this.coupon = e.detail)}\r\n              autofocus\r\n              inputId=\"booking_code\"\r\n              placeholder={localizedWords.entries.Lcz_EnterYourCouponCode}\r\n              value={this.coupon}\r\n              mode=\"default\"\r\n            ></ir-input>\r\n            {this.validationMessage?.error && <p class=\"error-message\">{this.validationMessage.message}</p>}\r\n            <div class=\"footer-buttons\">\r\n              <ir-button\r\n                size=\"md\"\r\n                onButtonClick={() => {\r\n                  this.dialogRef.closeModal();\r\n                  this.coupon = '';\r\n                }}\r\n                variants=\"outline\"\r\n                label={localizedWords.entries.Lcz_Cancel}\r\n                class=\"button-cancel\"\r\n                type=\"button\"\r\n              ></ir-button>\r\n              <ir-button type=\"submit\" size=\"md\" label={localizedWords.entries.Lcz_Apply} class=\"button-apply\"></ir-button>\r\n            </div>\r\n          </form>\r\n        </ir-dialog>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n:host([data-state='error']) .popover-trigger {\r\n  border-color: var(--error-500, #f04438);\r\n  transition: all 300ms ease-in-out;\r\n  color: var(--error-500, #f04438);\r\n}\r\n:host([data-state='error']) .popover-trigger .label,\r\n:host([data-state='error']) .popover-trigger .dates span {\r\n  transition: all 300ms ease-in-out;\r\n  color: var(--error-500, #f04438);\r\n}\r\n.date-range-container {\r\n  box-sizing: border-box;\r\n  border-radius: 0.5rem;\r\n  z-index: 99999999;\r\n  background: white;\r\n  height: 78vh;\r\n  border: 1px solid var(--gray-100, #f2f4f7);\r\n  box-shadow:\r\n    0 16px 12px -4px rgba(16, 24, 40, 0.08),\r\n    0 6px 4px -2px rgba(16, 24, 40, 0.03);\r\n}\r\n.popover-trigger {\r\n  box-sizing: border-box;\r\n  gap: 0.875rem;\r\n  background: white;\r\n  border-radius: min(var(--radius, 8px), 8px);\r\n  border: 1px solid var(--gray-300, #d0d5dd);\r\n  display: inline-flex;\r\n  align-items: center;\r\n  padding: 0px 0.875rem;\r\n  /* min-width: max-content; */\r\n  min-width: 13.8rem;\r\n  line-height: 1;\r\n  color: var(--gray-700, #344054);\r\n  cursor: pointer;\r\n  /* width: fit-content; */\r\n  width: 100% !important;\r\n  /* height: 3rem; */\r\n}\r\n:host([data-state='error']) .popover-trigger[data-state='opened'],\r\n:host([data-state='error']) .popover-trigger:active,\r\n:host([data-state='error']) .popover-trigger:focus-visible,\r\n:host([data-state='error']) .popover-trigger[data-state='opened'] .label,\r\n:host([data-state='error']) .popover-trigger:active .label,\r\n:host([data-state='error']) .popover-trigger:focus-visible .label,\r\n:host([data-state='error']) .popover-trigger[data-state='opened'] .dates span,\r\n:host([data-state='error']) .popover-trigger:active .dates span,\r\n:host([data-state='error']) .popover-trigger:focus-visible .dates span,\r\n.popover-trigger[data-state='opened'],\r\n.popover-trigger:active,\r\n.popover-trigger:focus-visible {\r\n  border-color: var(--gray-700, 206, 100%, 76%);\r\n  color: var(--gray-700, #344054);\r\n}\r\n\r\n.popover-trigger p {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.date {\r\n  padding-top: 6px !important;\r\n  color: var(--gray-600);\r\n  font-size: 0.875rem !important;\r\n  font-weight: 400;\r\n}\r\n.label {\r\n  padding: 0px 14px;\r\n  pointer-events: none;\r\n  transition: all 0.3s ease-in-out;\r\n  color: var(--gray-600, #475467);\r\n  font-size: 0.75rem;\r\n  line-height: 1rem;\r\n  text-align: start;\r\n}\r\n.dates {\r\n  width: 100%;\r\n  border-radius: min(var(--radius, 8px), 8px);\r\n  outline: none;\r\n  font-size: 14px;\r\n  line-height: 1.25rem;\r\n  padding-inline-end: 0.75rem;\r\n  text-align: start;\r\n}\r\n@media (min-width: 640px) {\r\n  .date-range-container {\r\n    height: 21.25rem;\r\n  }\r\n}\r\n@media (min-width: 1200px) {\r\n  .date-range-container {\r\n    height: 24.5rem;\r\n  }\r\n}\r\n","import app_store from '@/stores/app.store';\r\nimport localization_store from '@/stores/app.store';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport { Component, Host, h, Element, Prop, Watch, State, Event, EventEmitter } from '@stencil/core';\r\nimport { addDays, format } from 'date-fns';\r\n@Component({\r\n  tag: 'ir-date-popup',\r\n  styleUrl: 'ir-date-popup.css',\r\n  shadow: true,\r\n})\r\nexport class IrDatePopup {\r\n  @Prop() dates: { start: Date | null; end: Date | null } = {\r\n    start: null,\r\n    end: null,\r\n  };\r\n  @State() isPopoverOpen = false;\r\n  @Element() el: HTMLIrDatePopupElement;\r\n\r\n  private popover: HTMLIrPopoverElement;\r\n  private minDate: Date = addDays(new Date(), 0);\r\n  @Event() dateChange: EventEmitter<{ start: Date | null; end: Date | null }>;\r\n\r\n  @Watch('dates')\r\n  handleDatesChange() {\r\n    if (this.dates.end && this.isPopoverOpen) {\r\n      this.popover.toggleVisibility();\r\n    }\r\n  }\r\n  componentWillLoad() {\r\n    this.minDate.setHours(0, 0, 0, 0);\r\n  }\r\n  dateTrigger() {\r\n    return (\r\n      <div class=\"popover-trigger relative w-full sm:w-fit\" slot=\"trigger\" data-state={this.isPopoverOpen ? 'opened' : 'closed'}>\r\n        <ir-icons name=\"calendar\" svgClassName=\"size-[18px]\"></ir-icons>\r\n        <div class=\"flex h-[3rem] flex-1 flex-col justify-center gap-0.5\">\r\n          {/* <div>\r\n            <p class=\"text-xs\">Check in</p>\r\n            <p class={'date'}>\r\n              {this.dates.start ? format(this.dates.start, 'MMM dd', { locale: localization_store.selectedLocale }) : <span class=\"text-slate-500\">Add date</span>}\r\n            </p>\r\n          </div>\r\n          <div class=\"flex items-end  h-full\">\r\n            <ir-icons name=\"minus\" svgClassName=\"h-3 w-5 md:w-3\"></ir-icons>\r\n          </div>\r\n          <div>\r\n            <p class=\"text-xs\">Check out</p>\r\n            <p class=\"date\">{this.dates.end ? format(this.dates.end, 'MMM dd', { locale: localization_store.selectedLocale }) : <span class=\"text-slate-500\">Add date</span>}</p>\r\n          </div> */}\r\n          <p class=\"label\">{localizedWords.entries.Lcz_Dates}</p>\r\n          <div class=\"dates\">\r\n            {this.dates.start ? (\r\n              format(this.dates.start, 'MMM dd', { locale: localization_store.selectedLocale })\r\n            ) : (\r\n              <span class=\"text-slate-500\">{localizedWords.entries.Lcz_CheckIn}</span>\r\n            )}\r\n            <span> - </span>\r\n            {this.dates.end ? (\r\n              format(this.dates.end, 'MMM dd', { locale: localization_store.selectedLocale })\r\n            ) : (\r\n              <span class=\"text-slate-500\">{localizedWords.entries.Lcz_CheckOut}</span>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <ir-popover\r\n          showCloseButton={false}\r\n          placement=\"bottom-start\"\r\n          ref={el => (this.popover = el)}\r\n          onOpenChange={e => {\r\n            this.isPopoverOpen = e.detail;\r\n            if (!this.isPopoverOpen && !this.dates.end && this.dates.start) {\r\n              this.dateChange.emit({ ...this.dates, end: addDays(this.dates.start, 1) });\r\n            }\r\n          }}\r\n        >\r\n          {this.dateTrigger()}\r\n          <div slot=\"popover-content\" class=\"date-range-container w-full border-0 p-4 pb-6 shadow-none sm:w-auto sm:border sm:p-4 sm:shadow-sm  \">\r\n            <ir-date-range\r\n              dateModifiers={this.getDateModifiers()}\r\n              fromDate={this.dates.start}\r\n              toDate={this.dates.end}\r\n              locale={localization_store.selectedLocale}\r\n              maxSpanDays={app_store.property.max_nights}\r\n              minDate={this.minDate}\r\n            ></ir-date-range>\r\n          </div>\r\n        </ir-popover>\r\n      </Host>\r\n    );\r\n  }\r\n  private getDateModifiers() {\r\n    if (!Object.keys(app_store.nonBookableNights).length) {\r\n      return undefined;\r\n    }\r\n    const nights = {};\r\n    Object.keys(app_store?.nonBookableNights)?.forEach(nbn => {\r\n      nights[nbn] = {\r\n        disabled: true,\r\n      };\r\n    });\r\n    return nights;\r\n  }\r\n}\r\n","@import url('../../../gloabls.css');\r\n:host {\r\n  display: block;\r\n}\r\n.facilities-container {\r\n  border-radius: min(var(--radius, 0.5rem), 0.75rem);\r\n}\r\n.property_amenities {\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-wrap: wrap;\r\n  gap: 1rem;\r\n}\r\n@media (min-width: 768px) {\r\n  .property_amenities {\r\n    flex-direction: row;\r\n    align-items: flex-start;\r\n    justify-content: space-between;\r\n    gap: 2rem;\r\n  }\r\n  .property_amenities[data-total='2'] {\r\n    justify-content: flex-start;\r\n  }\r\n}\r\n@media (min-width: 1024px) {\r\n  .property_amenities {\r\n    gap: 2.5rem /* 40px */;\r\n  }\r\n}\r\n","import app_store from '@/stores/app.store';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport { formatAmount } from '@/utils/utils';\r\nimport { Component, Host, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-facilities',\r\n  styleUrl: 'ir-facilities.css',\r\n  shadow: true,\r\n})\r\nexport class IrFacilities {\r\n  private getTotalAmenities() {\r\n    const set = new Set<string>();\r\n    app_store.property?.amenities?.forEach(a => {\r\n      if (a.amenity_type !== 'room') {\r\n        set.add(a.amenity_type);\r\n      }\r\n    });\r\n    return set.size;\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"facilities-container space-y-5 bg-gray-100 p-6\">\r\n          <div class=\"flex  items-center gap-4\">\r\n            <ir-icons name=\"clock\"></ir-icons>\r\n            {app_store.property?.time_constraints.check_in_from && app_store.property?.time_constraints.check_in_till ? (\r\n              <p>\r\n                {localizedWords.entries.Lcz_CheckInFromUntil.replace('%1', app_store.property?.time_constraints.check_in_from).replace(\r\n                  '%2',\r\n                  app_store.property?.time_constraints.check_in_till,\r\n                )}\r\n                {/* Check-in: from {app_store.property?.time_constraints.check_in_from} until {app_store.property?.time_constraints.check_in_till} */}\r\n              </p>\r\n            ) : app_store.property?.time_constraints.check_in_from ? (\r\n              <p>\r\n                {localizedWords.entries.Lcz_CheckIn}:{app_store.property?.time_constraints.check_in_from}\r\n              </p>\r\n            ) : null}\r\n            <p>\r\n              {localizedWords.entries.Lcz_CheckOut}:{app_store.property?.time_constraints.check_out_till}\r\n            </p>\r\n          </div>\r\n          {app_store.property?.internet_offering.public_internet_statement && (\r\n            <div class=\"flex items-center gap-4\">\r\n              <ir-icons name=\"wifi\"></ir-icons>\r\n              <p>\r\n                {localizedWords.entries.Lcz_PublicAreas}: <span class=\"text-[var(--ir-green)]\">{app_store.property?.internet_offering.public_internet_statement}</span>\r\n              </p>\r\n              {app_store.property?.internet_offering.is_room_internet_free && (\r\n                <p>\r\n                  {localizedWords.entries.Lcz_Rooms}: <span class=\"text-[var(--ir-green)]\">{localizedWords.entries.Lcz_FreeInternet}</span>\r\n                </p>\r\n              )}\r\n            </div>\r\n          )}\r\n          {app_store.property?.parking_offering.title && (\r\n            <div class=\"flex items-center gap-4\">\r\n              <ir-icons name=\"car\"></ir-icons>\r\n              <p>\r\n                {app_store.property?.parking_offering.title}{' '}\r\n                {Number(app_store.property?.parking_offering.pricing) > 0 && (\r\n                  <span>\r\n                    {localizedWords.entries.Lcz_At} {formatAmount(app_store.property?.parking_offering.pricing, app_store.userPreferences.currency_id)}/\r\n                    {app_store.property?.parking_offering.schedule}\r\n                  </span>\r\n                )}\r\n              </p>\r\n            </div>\r\n          )}\r\n          {app_store.property?.pets_acceptance.title && (\r\n            <div class=\"flex items-center gap-4\">\r\n              <ir-icons name=\"pets\"></ir-icons>\r\n              <p>{app_store.property?.pets_acceptance.title}</p>\r\n            </div>\r\n          )}\r\n          {app_store.property?.baby_cot_offering.title && (\r\n            <div class=\"flex items-center gap-4\">\r\n              <ir-icons name=\"baby\"></ir-icons>\r\n              <p>{app_store.property?.baby_cot_offering.title}</p>\r\n            </div>\r\n          )}\r\n          {app_store.property?.amenities.some(a => !['property', 'activity', 'service'].includes(a.amenity_type)) && (\r\n            <div class=\"property_amenities\" data-total={this.getTotalAmenities()}>\r\n              {/* hotel */}\r\n              {app_store.property?.amenities.some(a => a.amenity_type === 'property') && (\r\n                <div class=\"flex gap-4 \">\r\n                  <ir-icons name=\"home\"></ir-icons>\r\n                  <ul>\r\n                    <li class=\"text-start font-medium\">{localizedWords.entries.Lcz_PropertyFacilities}</li>\r\n                    {app_store.property?.amenities.map(aminity => {\r\n                      if (aminity.amenity_type !== 'property') {\r\n                        return null;\r\n                      }\r\n                      return (\r\n                        <li key={aminity.code} class=\"text-start\">\r\n                          {aminity.description}\r\n                        </li>\r\n                      );\r\n                    })}\r\n                  </ul>\r\n                </div>\r\n              )}\r\n              {app_store.property?.amenities.some(a => a.amenity_type === 'activity') && (\r\n                <div class=\"flex gap-4\">\r\n                  <ir-icons name=\"football\"></ir-icons>\r\n                  <ul>\r\n                    <li class=\"text-start font-medium\">{localizedWords.entries.Lcz_Activities}</li>\r\n                    {app_store.property?.amenities.map(aminity => {\r\n                      if (aminity.amenity_type !== 'activity') {\r\n                        return null;\r\n                      }\r\n                      return (\r\n                        <li class=\"text-start\" key={aminity.code}>\r\n                          {aminity.description}\r\n                        </li>\r\n                      );\r\n                    })}\r\n                  </ul>\r\n                </div>\r\n              )}\r\n              {app_store.property?.amenities.some(a => a.amenity_type === 'service') && (\r\n                <div class=\"flex gap-4 \">\r\n                  <ir-icons name=\"bell\"></ir-icons>\r\n                  <ul>\r\n                    <li class=\"text-start font-medium\">{localizedWords.entries.Lcz_Services}</li>\r\n                    {app_store.property?.amenities.map(aminity => {\r\n                      if (aminity.amenity_type !== 'service') {\r\n                        return null;\r\n                      }\r\n                      return (\r\n                        <li class=\"text-start\" key={aminity.code}>\r\n                          {aminity.description}\r\n                        </li>\r\n                      );\r\n                    })}\r\n                  </ul>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n          {app_store.property?.description.food_and_beverage && (\r\n            <div class=\"flex items-center gap-4\">\r\n              {/* utencils */}\r\n              <ir-icons name=\"utencils\"></ir-icons>\r\n              <p>\r\n                <span class=\"font-medium\">{localizedWords.entries['Lcz_FoodAndbeverage:']} </span>\r\n                <span innerHTML={app_store.property?.description.food_and_beverage}></span>\r\n              </p>\r\n            </div>\r\n          )}\r\n          {app_store.property?.allowed_cards?.length > 0 && (\r\n            <div class=\"flex items-center gap-4\">\r\n              {/* credit card */}\r\n              <ir-icons name=\"credit_card\"></ir-icons>\r\n              <p>\r\n                <span class=\"font-medium\">{localizedWords.entries.Lcz_AcceptedCreditCards} </span>\r\n                {app_store.property?.allowed_cards.map((card, index) => {\r\n                  return (\r\n                    <span key={card.id}>\r\n                      {card.name}\r\n                      {index < app_store.property?.allowed_cards.length - 1 && <span> - </span>}\r\n                    </span>\r\n                  );\r\n                })}\r\n              </p>\r\n            </div>\r\n          )}\r\n          {/* TODO: add the cancelation and guarentee */}\r\n          {/* <div class=\"flex items-center gap-4\">\r\n           \r\n            <ir-icons name=\"check\"></ir-icons>\r\n            <div>\r\n             <p innerHTML=''></p>\r\n            </div>\r\n          </div> */}\r\n          {app_store.property?.description.important_info && (\r\n            <div class=\"flex items-center gap-4\">\r\n              {/* danger */}\r\n              <ir-icons name=\"danger\" svgClassName=\"text-red-500\"></ir-icons>\r\n              <div>\r\n                <p innerHTML={app_store.property?.description.important_info}></p>\r\n                <p innerHTML={app_store.property?.description.non_standard_conditions}></p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n","import app_store from '@/stores/app.store';\r\nimport booking_store, { modifyBookingStore } from '@/stores/booking';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport { cn } from '@/utils/utils';\r\nimport { Component, Host, h, Event, EventEmitter } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-loyalty',\r\n  styleUrl: 'ir-loyalty.css',\r\n  shadow: true,\r\n})\r\nexport class IrLoyalty {\r\n  @Event({ bubbles: true, composed: true }) resetBooking: EventEmitter<string>;\r\n  toggleLoyalty(value: boolean) {\r\n    modifyBookingStore('bookingAvailabilityParams', {\r\n      ...booking_store.bookingAvailabilityParams,\r\n      coupon: null,\r\n      loyalty: value,\r\n    });\r\n    this.resetBooking.emit('partialReset');\r\n  }\r\n  render() {\r\n    const show_loyalty = app_store.property?.promotions?.some(p => p.is_loyalty);\r\n    if (!show_loyalty || booking_store.bookingAvailabilityParams.coupon) {\r\n      return null;\r\n    }\r\n    if (booking_store.bookingAvailabilityParams.loyalty) {\r\n      return (\r\n        <div class=\"flex items-center  text-sm text-[hsl(var(--brand-600))]\">\r\n          <p onClick={() => this.toggleLoyalty(false)}>{localizedWords.entries.Lcz_LoyaltyApplied}</p>\r\n          <ir-button\r\n            aria-label={'remove loyalty'}\r\n            variants=\"icon\"\r\n            iconName=\"xmark\"\r\n            svgClassName=\"text-[hsl(var(--brand-600))]\"\r\n            onButtonClick={() => this.toggleLoyalty(false)}\r\n          ></ir-button>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <Host>\r\n        <ir-button class={cn('w-full')} onButtonClick={() => this.toggleLoyalty(true)} variants=\"outline\" label={localizedWords.entries.Lcz_GetLoyaltyDiscount} haveLeftIcon>\r\n          <ir-icons slot=\"left-icon\" name=\"heart\"></ir-icons>\r\n        </ir-button>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  --ir-dialog-max-width: 50rem;\r\n}\r\n.modal-container {\r\n  /* padding: 16px; */\r\n  background: #ffffff;\r\n}\r\n.carousel-container {\r\n  aspect-ratio: 1.5;\r\n  width: 100%;\r\n}\r\n.carousel_gallery_container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  width: 100%;\r\n  aspect-ratio: 1.5;\r\n}\r\n\r\n.more-details-button {\r\n  margin: 0 0.5rem;\r\n}\r\n.gallery-img {\r\n  display: flex;\r\n  border-radius: min(var(--radius, 0.5rem), 1rem);\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  object-fit: cover;\r\n  height: 100%;\r\n  width: 100%;\r\n  aspect-ratio: 16/9;\r\n  border-bottom-left-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n}\r\n.single-image {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n  object-position: center;\r\n  border-radius: min(var(--radius, 0.5rem), 1rem);\r\n  border-bottom-left-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n}\r\n.pg_carousel {\r\n  border-bottom-left-radius: 0 !important;\r\n  border-bottom-right-radius: 0 !important;\r\n}\r\n\r\n@media (min-width: 768px) {\r\n  :host([display='default']) .gallery-img {\r\n    min-height: 200px;\r\n  }\r\n  :host([display='default']) .gallery-img,\r\n  :host([display='default']) .single-image {\r\n    border-bottom-left-radius: min(var(--radius, 0.5rem), 1rem);\r\n    border-bottom-right-radius: min(var(--radius, 0.5rem), 1rem);\r\n  }\r\n  :host([display='default']) .gallery-img.icon {\r\n    max-height: 200px;\r\n    color: white;\r\n    background-color: rgb(209 213 219);\r\n  }\r\n  :host([display='default']) .capacity-container {\r\n    border-bottom-right-radius: min(var(--radius, 8px), 1rem);\r\n    border-bottom-left-radius: min(var(--radius, 8px), 1rem);\r\n  }\r\n  :host([display='default']) .carousel-container {\r\n    aspect-ratio: 16/12;\r\n    width: 18.75rem;\r\n  }\r\n}\r\n@media (min-width: 1280px) {\r\n  :host([display='default']) .carousel-container {\r\n    max-height: 15.625rem;\r\n  }\r\n  :host([display='default']) .gallery-img {\r\n    min-height: 250px;\r\n  }\r\n  :host([display='default']) .gallery-img.icon {\r\n    max-height: 250px;\r\n  }\r\n}\r\n","import { RoomType } from '@/models/property';\r\nimport app_store from '@/stores/app.store';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport { formatImageAlt } from '@/utils/utils';\r\nimport { Component, Fragment, h, Listen, Prop, State } from '@stencil/core';\r\nimport { v4 } from 'uuid';\r\n\r\n@Component({\r\n  tag: 'ir-property-gallery',\r\n  styleUrl: 'ir-property-gallery.css',\r\n  shadow: true,\r\n})\r\nexport class IrPropertyGallery {\r\n  @Prop({ reflect: true }) display: 'grid' | 'default' = 'default';\r\n  @Prop() property_state: 'carousel' | 'gallery' = 'gallery';\r\n  @Prop() roomType: RoomType;\r\n\r\n  @State() activeIndex = 0;\r\n\r\n  private irDialog: HTMLIrDialogElement;\r\n\r\n  @Listen('openGallery')\r\n  handleOpenGallery(e: CustomEvent) {\r\n    if (window.innerWidth > 650) {\r\n      this.activeIndex = e.detail;\r\n      this.irDialog.openModal();\r\n    }\r\n  }\r\n  @Listen('carouselImageClicked')\r\n  handleOpenCarouselGallery() {\r\n    this.irDialog.openModal();\r\n  }\r\n\r\n  private showPlanLimitations({ withRoomSize = true, showMoreTag = false }: { withRoomSize: boolean; showMoreTag: boolean }) {\r\n    if (!this.roomType) {\r\n      return null;\r\n    }\r\n\r\n    const { adult_nbr, children_nbr } = this.roomType.occupancy_max;\r\n    const maxNumber = adult_nbr + children_nbr;\r\n\r\n    const renderOccupancy = () => (\r\n      <div class=\"flex items-end gap-1\">\r\n        <div class=\"flex items-center\">\r\n          <ir-icons svgClassName=\"size-3\" name=\"user\"></ir-icons>\r\n          <p>{adult_nbr}</p>\r\n        </div>\r\n        {children_nbr > 0 && (\r\n          <div class=\"flex items-center\">\r\n            <ir-icons svgClassName=\"size-3\" name=\"child\"></ir-icons>\r\n            <p>{children_nbr}</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n\r\n    const renderRoomSize = () =>\r\n      withRoomSize &&\r\n      this.roomType.size > 0 && (\r\n        <p>\r\n          {this.roomType.size}\r\n          <span class=\"ordinal\">\r\n            m<sup>2</sup>\r\n          </span>\r\n        </p>\r\n      );\r\n\r\n    if (maxNumber > 4) {\r\n      return (\r\n        <div class=\"capacity-container pointer-events-none absolute -bottom-0 z-10 flex w-full items-center justify-between bg-white/80 px-2 py-2 text-sm\">\r\n          <div class=\"flex items-center gap-2\">\r\n            <p>{localizedWords.entries.Lcz_Maximum}</p>\r\n            {renderOccupancy()}\r\n          </div>\r\n          {renderRoomSize()}\r\n          {showMoreTag && (\r\n            <div class=\"flex items-center gap-1.5\">\r\n              <span>{localizedWords.entries.Lcz_MoreDetails}</span>\r\n              <span>\r\n                <ir-icons name=\"arrow-up-right-from-square\" svgClassName=\"size-3\"></ir-icons>\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div class=\"capacity-container pointer-events-none absolute -bottom-0 z-10 flex w-full items-center justify-between bg-white/80 px-2 py-2 text-sm\">\r\n        <div class=\"flex items-center gap-2\">\r\n          <p>{localizedWords.entries.Lcz_Maximum}</p>\r\n          <div class=\"flex items-center\">\r\n            {[...Array(adult_nbr)].map((_, i) => (\r\n              <ir-icons svgClassName=\"size-3\" key={i} name=\"user\"></ir-icons>\r\n            ))}\r\n            {[...Array(children_nbr)].map((_, i) => (\r\n              <ir-icons key={i} svgClassName=\"size-3\" name=\"child\"></ir-icons>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        {renderRoomSize()}\r\n        {showMoreTag && (\r\n          <div class=\"flex items-center gap-1.5\">\r\n            <span>{localizedWords.entries.Lcz_MoreDetails}</span>\r\n            <span>\r\n              <ir-icons name=\"arrow-up-right-from-square\" svgClassName=\"size-3\"></ir-icons>\r\n            </span>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n  private renderRoomtypeImages() {\r\n    return (\r\n      <Fragment>\r\n        <div class={`carousel-container relative  overflow-hidden  ${this.display === 'default' ? 'md:hidden' : ''}`}>\r\n          {this.roomType.images.length === 0 ? (\r\n            <Fragment>\r\n              <div onClick={() => this.irDialog.openModal()} class=\"gallery-img icon  bg-gray-300 text-white\">\r\n                <ir-icons name=\"image\" svgClassName=\"size-10 mb-4\"></ir-icons>\r\n              </div>\r\n              {this.showPlanLimitations({ showMoreTag: true, withRoomSize: true })}\r\n            </Fragment>\r\n          ) : this.roomType.images.length === 1 ? (\r\n            <img\r\n              onClick={() => this.irDialog.openModal()}\r\n              class=\"gallery-img object-cover \"\r\n              src={this.roomType.images[0].url}\r\n              alt={formatImageAlt(this.roomType.images[0].tooltip, this.roomType?.name)}\r\n            />\r\n          ) : (\r\n            <ir-carousel\r\n              carouselClasses=\"pg_carousel\"\r\n              onCarouselImageIndexChange={e => (this.activeIndex = e.detail)}\r\n              slides={this.roomType?.images?.map(img => ({\r\n                alt: formatImageAlt(img.tooltip, this.roomType?.name),\r\n                id: v4(),\r\n                image_uri: img.url,\r\n                thumbnail: img.thumbnail,\r\n              }))}\r\n            ></ir-carousel>\r\n          )}\r\n          {this.showPlanLimitations({ showMoreTag: true, withRoomSize: true })}\r\n        </div>\r\n        {this.display === 'default' && (\r\n          <div class=\"hidden  md:block\">\r\n            <div class=\"carousel-container relative mb-1 w-full rounded-md  md:w-auto  \">\r\n              {this.roomType.images.length === 0 ? (\r\n                <Fragment>\r\n                  <div onClick={() => this.irDialog.openModal()} class=\"gallery-img icon hover:bg-gray-400\">\r\n                    <ir-icons name=\"image\" svgClassName=\"size-10 mb-4\"></ir-icons>\r\n                  </div>\r\n                  {this.showPlanLimitations({ showMoreTag: true, withRoomSize: true })}\r\n                </Fragment>\r\n              ) : this.roomType.images?.length === 1 ? (\r\n                <Fragment>\r\n                  <div onClick={() => this.irDialog.openModal()} class=\"gallery-img icon hover:bg-gray-400\">\r\n                    {/* <ir-icons name=\"image\" svgClassName=\"size-10 mb-4\"></ir-icons> */}\r\n                    <img\r\n                      // onClick={() => this.irDialog.openModal()}\r\n                      src={this.roomType.images[0].url}\r\n                      alt={formatImageAlt(this.roomType.images[0].tooltip, this.roomType?.name)}\r\n                      class=\"single-image h-full w-full cursor-pointer\r\n                   object-cover \"\r\n                    />\r\n                  </div>\r\n                  {this.showPlanLimitations({ showMoreTag: true, withRoomSize: true })}\r\n                </Fragment>\r\n              ) : (\r\n                <Fragment>\r\n                  <ir-carousel\r\n                    onCarouselImageIndexChange={e => (this.activeIndex = e.detail)}\r\n                    slides={this.roomType.images?.map(img => ({\r\n                      alt: formatImageAlt(img.tooltip, this.roomType?.name),\r\n                      id: v4(),\r\n                      image_uri: img.url,\r\n                      thumbnail: img.thumbnail,\r\n                    }))}\r\n                  ></ir-carousel>\r\n                  {this.showPlanLimitations({ showMoreTag: true, withRoomSize: true })}\r\n                </Fragment>\r\n              )}\r\n              {/* <div class=\"lg:hidden\">\r\n          <ir-accomodations\r\n            bookingAttributes={{\r\n              max_occupancy: this.roomType.occupancy_max.adult_nbr,\r\n              bedding_setup: this.roomType.bedding_setup,\r\n            }}\r\n            amenities={this.exposed_property.amenities}\r\n          ></ir-accomodations>\r\n        </div> */}\r\n            </div>\r\n            {/* <ir-button\r\n        onButtonClick={() => this.irDialog.openModal()}\r\n        variants=\"link\"\r\n        label={localizedWords.entries.Lcz_MoreDetails}\r\n        class=\"more-details-button\"\r\n        buttonStyles={{ paddingLeft: '0', paddingBottom: '0', background: 'transparent', fontSize: '12px' }}\r\n      ></ir-button> */}\r\n          </div>\r\n        )}\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const images = this.property_state === 'carousel' ? this.roomType.images?.slice(0, 16) : app_store.property?.images?.slice(0, 24);\r\n    return (\r\n      <div>\r\n        {this.property_state === 'gallery' ? (\r\n          <ir-gallery\r\n            totalImages={images?.length}\r\n            images={images?.map(i => ({ url: i.url, alt: formatImageAlt(i.tooltip), thumbnail: i?.thumbnail }))}\r\n            maxLength={5}\r\n            disableCarouselClick={true}\r\n            enableCarouselSwipe={true}\r\n          ></ir-gallery>\r\n        ) : (\r\n          this.renderRoomtypeImages()\r\n        )}\r\n        <ir-dialog ref={el => (this.irDialog = el)} closeButton={false}>\r\n          <div\r\n            slot=\"modal-body\"\r\n            class={\r\n              this.property_state !== 'carousel'\r\n                ? 'modal-container relative max-h-[80vh] overflow-y-auto px-4 pb-4  pt-0 md:p-4'\r\n                : 'modal-container max-h-[90vh] overflow-y-auto px-4 pb-4  pt-0 md:p-4 md:pt-0'\r\n            }\r\n            dir=\"ltr\"\r\n          >\r\n            <div\r\n              style={{ width: this.property_state !== 'carousel' ? '720px' : '100%' }}\r\n              class={\r\n                this.property_state !== 'carousel'\r\n                  ? 'absolute left-8  top-8 z-50 flex w-72 items-center justify-between text-white '\r\n                  : 'sticky top-0 z-50 mb-2 flex w-full  items-center justify-between bg-white py-2 md:pt-4'\r\n              }\r\n              dir={app_store.dir}\r\n            >\r\n              <h2 class=\"text-lg font-semibold md:text-xl\">{this.property_state === 'carousel' ? this.roomType.name : app_store.property?.name}</h2>\r\n              <ir-button\r\n                buttonStyles={{ background: 'var(--gray-200, #eaecf0)', padding: '5px' }}\r\n                iconName=\"xmark\"\r\n                variants=\"icon\"\r\n                onButtonClick={() => this.irDialog.closeModal()}\r\n              ></ir-button>\r\n            </div>\r\n            <section class=\"max-h-[80vh]\">\r\n              {images.length > 0 && (\r\n                <div class=\"carousel_gallery_container hidden sm:block\">\r\n                  <ir-carousel\r\n                    enableCarouselSwipe\r\n                    activeIndex={this.activeIndex}\r\n                    dir={app_store.dir}\r\n                    key={this.roomType?.id + '_' + app_store.dir}\r\n                    slides={images?.map(img => ({\r\n                      alt: formatImageAlt(img.tooltip, this.roomType?.name),\r\n                      id: v4(),\r\n                      image_uri: img.url,\r\n                      thumbnail: img.thumbnail,\r\n                    }))}\r\n                    onCarouselImageClicked={e => {\r\n                      e.preventDefault();\r\n                      e.stopImmediatePropagation();\r\n                      e.stopPropagation();\r\n                    }}\r\n                  ></ir-carousel>\r\n                  {/* {this.showPlanLimitations({ showMoreTag: false, withRoomSize: false })} */}\r\n                </div>\r\n              )}\r\n              {this.property_state === 'carousel' && (\r\n                <section class={'z-0 py-4 text-sm'} dir={app_store.dir}>\r\n                  <ir-room-type-amenities aminities={app_store.property?.amenities} roomType={this.roomType}></ir-room-type-amenities>\r\n                </section>\r\n              )}\r\n            </section>\r\n          </div>\r\n        </ir-dialog>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",".rateplan-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.25rem;\r\n  padding: 0.5rem 0rem;\r\n  font-size: 0.875rem;\r\n}\r\n.rateplan-short-name {\r\n  font-weight: 500;\r\n  font-size: 1rem;\r\n}\r\n.rateplan-name {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n.rateplan-tooltip {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #98a2b3;\r\n}\r\n.rateplan-name .rateplan-tooltip {\r\n  display: none;\r\n}\r\n.rateplan-details-wrapper {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  gap: 0.25rem;\r\n}\r\n.rateplan-header {\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  /* align-items: center;\r\n  justify-content: space-between; */\r\n}\r\n.rateplan-pricing-mobile {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.25rem;\r\n}\r\n.rateplan-discounted-amount {\r\n  font-weight: 400;\r\n  text-decoration: line-through;\r\n  color: var(--gray-600, #475467);\r\n}\r\n.rateplan-amount {\r\n  font-size: 1.125rem;\r\n  line-height: 1.75rem;\r\n}\r\n.rateplan-description {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.25rem;\r\n}\r\n.rateplan-description .rateplan-tooltip {\r\n  justify-content: flex-start;\r\n}\r\n.rateplan-custom-text {\r\n  font-size: 0.75rem;\r\n  color: #64748b;\r\n}\r\n.rateplan-details {\r\n  display: flex;\r\n  /* align-items: center; */\r\n  gap: 1rem;\r\n}\r\n.rateplan-details .rateplan-travelers,\r\n.rateplan-details .rateplan-select-rooms {\r\n  flex: 1 1 0%;\r\n}\r\n:host([display='grid']) .rateplan-select-rooms-btn {\r\n  flex: 0;\r\n}\r\n\r\n:host([display='default']) .rateplan-custom-text {\r\n  display: none;\r\n}\r\n:host([display='default']) .rateplan-custom-text.grid-view {\r\n  display: block;\r\n}\r\n:host([display='default']) .rateplan-select-rooms-btn {\r\n  flex: 1 1 0%;\r\n}\r\n.rateplan-details .rateplan-pricing,\r\n.rateplan-details .rateplan-final-pricing {\r\n  display: none;\r\n}\r\n.rateplan-discount,\r\n.no-availability,\r\n.mls_alert,\r\n.mls_alert_grid {\r\n  font-weight: 400;\r\n  color: #ef4444;\r\n  display: inline-flex;\r\n  padding: 0;\r\n  /* width: 100%; */\r\n  margin: 0;\r\n}\r\n.rateplan-container .no-availability {\r\n  flex: 1 1 0%;\r\n  text-align: end;\r\n  width: 100%;\r\n}\r\n.rateplan-header.not-available {\r\n  width: 100% !important;\r\n}\r\n.rateplan-header.not-available .rateplan-details-wrapper {\r\n  width: 100% !important;\r\n}\r\n.rateplan-amount-per-night {\r\n  font-size: 0.75rem;\r\n  font-weight: 400;\r\n}\r\n.rateplan-final-pricing .rateplan-amount {\r\n  font-size: 1.25rem;\r\n  line-height: 1.2rem;\r\n  padding-bottom: 0.28rem;\r\n}\r\n.mls_alert {\r\n  display: none;\r\n}\r\n\r\n/* sm\t640px\t */\r\n@media (min-width: 640px) {\r\n  :host([display='default']) .rateplan-pricing-mobile,\r\n  :host([display='default']) .rateplan-description .rateplan-tooltip,\r\n  :host([display='default']) .rateplan-custom-text.grid-view,\r\n  :host([display='default']) .rateplan-amount-per-night.grid-view {\r\n    display: none;\r\n  }\r\n  :host([display='default']) .rateplan-custom-text,\r\n  :host([display='default']) .rateplan-name .rateplan-tooltip {\r\n    display: block;\r\n  }\r\n  :host([display='default']) .rateplan-details .rateplan-pricing,\r\n  :host([display='default']) .rateplan-details .rateplan-final-pricing {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n}\r\n/* md\t768px\t */\r\n@media (min-width: 768px) {\r\n}\r\n/* lg\t1024px */\r\n@media (min-width: 1024px) {\r\n  :host([display='default']) .rateplan-travelers {\r\n    max-width: 300px;\r\n  }\r\n\r\n  /* .rateplan-container {\r\n    display: grid;\r\n    grid-template-columns: repeat(12, 1fr);\r\n    gap: 1rem;\r\n  } */\r\n  :host([display='default']) .rateplan-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    width: 40%;\r\n    /* grid-column: span 5 / span 5; */\r\n  }\r\n  :host([display='default']) .rateplan-container {\r\n    flex-direction: row;\r\n  }\r\n  :host([display='default']) .rateplan-details {\r\n    gap: 2rem;\r\n    justify-content: space-between;\r\n    flex: 1 1 0%;\r\n    /* \r\n    display: grid;\r\n    grid-column: span 7 / span 7; \r\n    grid-template-columns: repeat(12, 1fr); */\r\n  }\r\n  :host([display='default']) .rateplan-details .rateplan-travelers {\r\n    /* grid-column: span 5 / span 5; */\r\n    max-width: 40%;\r\n  }\r\n  :host([display='default']) .rateplan-details .rateplan-select-rooms {\r\n    flex: 0;\r\n    /* grid-column: span 2 / span 2; */\r\n  }\r\n  :host([display='default']) .rateplan-details .rateplan-pricing,\r\n  :host([display='default']) .rateplan-details .rateplan-final-pricing {\r\n    grid-column: span 2 / span 2;\r\n  }\r\n  :host([display='default']) .rateplan-details .rateplan-final-pricing[data-style='full-width'] {\r\n    grid-column: span 4 / span 4;\r\n  }\r\n  :host([display='default']) .triggerStyle {\r\n    width: fit-content !important;\r\n  }\r\n  :host([display='default']) .selectStyle {\r\n    width: 3.5rem !important;\r\n    padding-inline-end: 1.75rem !important;\r\n  }\r\n  :host([display='default']) .mls_alert {\r\n    display: inline-flex;\r\n    align-items: center;\r\n  }\r\n  :host([display='default']) .mls_alert_grid {\r\n    display: none;\r\n  }\r\n}\r\n/* xl\t1280px */\r\n@media (min-width: 1280px) {\r\n}\r\n/* 2xl\t1536px */\r\n@media (min-width: 1536px) {\r\n}\r\n","import { Component, Event, EventEmitter, Fragment, Prop, State, Watch, h } from '@stencil/core';\r\nimport { RatePlan, Variation } from '@/models/property';\r\nimport app_store from '@/stores/app.store';\r\nimport booking_store, { IRatePlanSelection, reserveRooms, updateRoomParams } from '@/stores/booking';\r\nimport { formatAmount, getDateDifference } from '@/utils/utils';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport { PaymentService } from '@/services/api/payment.service';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\n@Component({\r\n  tag: 'ir-rateplan',\r\n  styleUrl: 'ir-rateplan.css',\r\n  shadow: true,\r\n})\r\nexport class IrRateplan {\r\n  @Prop({ reflect: true }) display: 'grid' | 'default' = 'default';\r\n  @Prop() ratePlan: RatePlan;\r\n  @Prop() visibleInventory?:\r\n    | IRatePlanSelection\r\n    | {\r\n        reserved: number;\r\n        visibleInventory?: number;\r\n        selected_variation: Variation;\r\n      };\r\n  @Prop() roomTypeInventory: number;\r\n  @Prop() roomTypeId: number;\r\n\r\n  @State() isLoading = false;\r\n  @State() cancelationMessage = '';\r\n  @State() isRatePlanAvailable: boolean = true;\r\n\r\n  @Event() animateBookingButton: EventEmitter<null>;\r\n\r\n  private paymentService = new PaymentService();\r\n\r\n  componentWillLoad() {\r\n    this.checkAvailability();\r\n  }\r\n  @Watch('roomTypeInventory')\r\n  handleRTICHange(newValue: number, oldValue: number) {\r\n    if (newValue === oldValue) {\r\n      return null;\r\n    }\r\n    this.checkAvailability();\r\n  }\r\n  private checkAvailability() {\r\n    this.isRatePlanAvailable =\r\n      this.roomTypeInventory > 0 && (this.ratePlan.is_available_to_book || (!this.ratePlan.is_available_to_book && this.ratePlan.not_available_reason?.includes('MLS')));\r\n  }\r\n  private async handleVariationChange(e: CustomEvent, variations: Variation[], rateplanId: number, roomTypeId: number) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    const value = e.detail;\r\n    let selectedVariation = variations[value];\r\n    if (!selectedVariation) {\r\n      return;\r\n    }\r\n    selectedVariation = booking_store.roomTypes.find(rt => rt.id === roomTypeId).rateplans.find(rp => rp.id === rateplanId).variations[value];\r\n    updateRoomParams({ params: { selected_variation: selectedVariation }, ratePlanId: rateplanId, roomTypeId });\r\n  }\r\n  private async fetchCancelationMessage() {\r\n    this.cancelationMessage = this.paymentService.getCancelationMessage(this.visibleInventory.selected_variation?.applicable_policies, true)?.message;\r\n  }\r\n  render() {\r\n    if (!this.ratePlan.is_targeting_travel_agency && booking_store.bookingAvailabilityParams.agent) {\r\n      return null;\r\n    }\r\n    if (this.ratePlan.is_targeting_travel_agency && !app_store.app_data.isAgentMode) {\r\n      return null;\r\n    }\r\n    const isInFreeCancelationZone = this.paymentService.checkFreeCancelationZone(this.visibleInventory?.selected_variation?.applicable_policies);\r\n    const isInventoryFull =\r\n      this.visibleInventory?.visibleInventory === 0 ||\r\n      !this.visibleInventory?.selected_variation?.discounted_amount ||\r\n      Object.values(booking_store.ratePlanSelections[this.roomTypeId]).some(f => f.visibleInventory === f.reserved);\r\n    return (\r\n      <div class=\"rateplan-container\">\r\n        <div class={`rateplan-header ${this.isRatePlanAvailable ? 'available' : 'not-available'}`}>\r\n          <div class=\"rateplan-details-wrapper\">\r\n            <p class=\"rateplan-name\">\r\n              <span class=\"rateplan-short-name\">{this.ratePlan.short_name}</span>\r\n              {this.ratePlan.is_non_refundable ? (\r\n                <p class=\"rateplan-tooltip text-xs\" style={{ color: 'var(--ir-green)' }}>\r\n                  {localizedWords.entries.Lcz_NonRefundable}\r\n                </p>\r\n              ) : (\r\n                this.ratePlan.is_available_to_book && (\r\n                  <ir-tooltip\r\n                    labelColors={isInFreeCancelationZone ? 'green' : 'default'}\r\n                    class={`rateplan-tooltip`}\r\n                    open_behavior=\"click\"\r\n                    label={isInFreeCancelationZone ? localizedWords.entries.Lcz_FreeCancellation : localizedWords.entries.Lcz_IfICancel}\r\n                    message={`${this.cancelationMessage || this.ratePlan.cancelation} ${this.ratePlan.guarantee ?? ''}`}\r\n                    onTooltipOpenChange={e => {\r\n                      if (e.detail) {\r\n                        this.fetchCancelationMessage();\r\n                      }\r\n                    }}\r\n                  ></ir-tooltip>\r\n                )\r\n              )}\r\n            </p>\r\n            {this.isLoading ? (\r\n              <div class=\"grid place-items-center md:hidden\">\r\n                <ir-skeleton class=\"h-4 w-12\"></ir-skeleton>\r\n              </div>\r\n            ) : (\r\n              <Fragment>\r\n                {this.isRatePlanAvailable ? (\r\n                  this.visibleInventory?.selected_variation?.discounted_amount && (\r\n                    <div class=\"rateplan-pricing-mobile\">\r\n                      {this.visibleInventory?.selected_variation?.discount_pct > 0 && (\r\n                        <p class=\"rateplan-discounted-amount\">{formatAmount(this.visibleInventory?.selected_variation?.amount, app_store.userPreferences.currency_id, 0)}</p>\r\n                      )}\r\n                      <p class=\"rateplan-amount\">{formatAmount(this.visibleInventory?.selected_variation?.discounted_amount, app_store.userPreferences.currency_id, 0)}</p>\r\n                    </div>\r\n                  )\r\n                ) : (\r\n                  <p class=\"no-availability\">{localizedWords.entries.Lcz_NotAvailable}</p>\r\n                )}\r\n              </Fragment>\r\n            )}\r\n          </div>\r\n          <div class={'flex items-center'} style={{ alignItems: 'center' }}>\r\n            <div class=\"rateplan-description flex-1\">\r\n              <p class=\"rateplan-custom-text grid-view\" innerHTML={this.ratePlan.custom_text}></p>\r\n              <div class=\"flex items-center justify-between\">\r\n                {this.ratePlan.is_non_refundable ? (\r\n                  <p class=\"rateplan-tooltip text-xs\" style={{ color: 'var(--ir-green)' }}>\r\n                    {localizedWords.entries.Lcz_NonRefundable}\r\n                  </p>\r\n                ) : (\r\n                  this.ratePlan.is_available_to_book && (\r\n                    <ir-tooltip\r\n                      labelColors={isInFreeCancelationZone ? 'green' : 'default'}\r\n                      class={`rateplan-tooltip`}\r\n                      open_behavior=\"click\"\r\n                      label={isInFreeCancelationZone ? localizedWords.entries.Lcz_FreeCancellation : localizedWords.entries.Lcz_IfICancel}\r\n                      message={`${(this.cancelationMessage ?? '') || (this.ratePlan.cancelation ?? '')} ${this.ratePlan.guarantee ?? ''}`}\r\n                      onTooltipOpenChange={e => {\r\n                        if (e.detail) {\r\n                          this.fetchCancelationMessage();\r\n                        }\r\n                      }}\r\n                    ></ir-tooltip>\r\n                  )\r\n                )}\r\n                {getDateDifference(booking_store.bookingAvailabilityParams.from_date ?? new Date(), booking_store.bookingAvailabilityParams.to_date ?? new Date()) > 1 && (\r\n                  <p class=\"rateplan-amount-per-night grid-view\">{`${formatAmount(this.visibleInventory?.selected_variation?.amount_per_night, app_store.userPreferences.currency_id, 0)}/${localizedWords.entries.Lcz_night}`}</p>\r\n                )}\r\n              </div>\r\n              {this.display === 'default' && <p class=\"rateplan-custom-text\" innerHTML={this.ratePlan.custom_text}></p>}\r\n            </div>\r\n          </div>\r\n          {!this.ratePlan.is_available_to_book && this.ratePlan.not_available_reason.includes('MLS') && (\r\n            <p class=\"mls_alert_grid\">{localizedWords.entries.Lcz_MLS_Alert.replace('{0}', this.ratePlan.not_available_reason?.replace('MLS-', ''))}</p>\r\n          )}\r\n        </div>\r\n        {this.isRatePlanAvailable && (\r\n          <div class={`rateplan-details ${this.ratePlan.custom_text ? 'rateplan-details-no-custom-text' : ''}`}>\r\n            {this.isLoading ? (\r\n              <div class=\"col-span-6 w-full \">\r\n                <ir-skeleton class=\"block h-12 w-full\"></ir-skeleton>\r\n              </div>\r\n            ) : (\r\n              <Fragment>\r\n                <div class=\"rateplan-travelers\">\r\n                  {this.ratePlan.variations && this.ratePlan.is_available_to_book && (\r\n                    <ir-select\r\n                      class=\"rateplan-select-travelers\"\r\n                      label={'Travelers'}\r\n                      value={this.ratePlan.variations\r\n                        .findIndex(\r\n                          f =>\r\n                            `${f.adult_nbr}_a_${f.child_nbr}_c` ===\r\n                            `${this.visibleInventory?.selected_variation?.adult_nbr}_a_${this.visibleInventory?.selected_variation?.child_nbr}_c`,\r\n                        )\r\n                        .toString()}\r\n                      onValueChange={e => {\r\n                        this.handleVariationChange(e, this.ratePlan.variations, this.ratePlan.id, this.roomTypeId);\r\n                      }}\r\n                      data={this.ratePlan.variations.map((v, i) => ({\r\n                        id: i.toString(),\r\n                        value: this.formatVariation(v),\r\n                        html: true,\r\n                      }))}\r\n                    ></ir-select>\r\n                  )}\r\n                </div>\r\n\r\n                {!this.ratePlan.not_available_reason?.includes('MLS') ? (\r\n                  <Fragment>\r\n                    {this.visibleInventory?.selected_variation?.discounted_amount && (\r\n                      <Fragment>\r\n                        {this.visibleInventory?.selected_variation?.discount_pct > 0 && (\r\n                          <div class=\"rateplan-pricing\">\r\n                            <p class=\"rateplan-discounted-amount\">{formatAmount(this.visibleInventory?.selected_variation?.amount, app_store.userPreferences.currency_id, 0)}</p>\r\n                            <p class=\"rateplan-discount\">{`-${Number(this.visibleInventory?.selected_variation?.discount_pct).toPrecision(2)}%`}</p>\r\n                          </div>\r\n                        )}\r\n                        <div class=\"rateplan-final-pricing\" data-style={this.visibleInventory?.selected_variation?.discount_pct > 0 ? '' : 'full-width'}>\r\n                          <p class=\"rateplan-amount\">{formatAmount(this.visibleInventory?.selected_variation?.discounted_amount, app_store.userPreferences.currency_id, 0)}</p>\r\n                          {getDateDifference(booking_store.bookingAvailabilityParams.from_date ?? new Date(), booking_store.bookingAvailabilityParams.to_date ?? new Date()) >\r\n                            1 && (\r\n                            <p class=\"rateplan-amount-per-night\">{`${formatAmount(this.visibleInventory?.selected_variation?.amount_per_night, app_store.userPreferences.currency_id, 0)}/${localizedWords.entries.Lcz_night}`}</p>\r\n                          )}\r\n                        </div>\r\n                      </Fragment>\r\n                    )}\r\n                    {this.visibleInventory?.reserved > 0 ? (\r\n                      <ir-select\r\n                        onValueChange={e => {\r\n                          reserveRooms(this.roomTypeId, this.ratePlan.id, Number(e.detail));\r\n                          this.animateBookingButton.emit(null);\r\n                        }}\r\n                        label={localizedWords.entries.Lcz_Rooms}\r\n                        value={this.visibleInventory?.reserved}\r\n                        class=\"rateplan-select-rooms\"\r\n                        data={[...new Array(this.roomTypeInventory + 1)]?.map((_, i) => ({\r\n                          id: i,\r\n                          value:\r\n                            i === 0\r\n                              ? `0`\r\n                              : `${i}&nbsp;&nbsp;&nbsp;${i === 0 ? '' : formatAmount(this.visibleInventory?.selected_variation?.discounted_amount * i, app_store.userPreferences.currency_id, 0)}`,\r\n                          disabled: i >= this.visibleInventory?.visibleInventory + 1,\r\n                          html: true,\r\n                        }))}\r\n                        containerStyle={'triggerStyle'}\r\n                        customStyles={'selectStyle'}\r\n                      ></ir-select>\r\n                    ) : (\r\n                      <ir-button\r\n                        disabled={isInventoryFull || isRequestPending('/Check_Availability')}\r\n                        class=\"rateplan-select-rooms w-full\"\r\n                        buttonStyles={{ background: 'white', opacity: isInventoryFull ? '0.5' : '1' }}\r\n                        label={localizedWords.entries.Lcz_Select}\r\n                        variants=\"outline-primary\"\r\n                        onButtonClick={() => {\r\n                          reserveRooms(this.roomTypeId, this.ratePlan.id, 1);\r\n                          this.animateBookingButton.emit(null);\r\n                        }}\r\n                      ></ir-button>\r\n                    )}\r\n                  </Fragment>\r\n                ) : (\r\n                  <p class=\"mls_alert\">{localizedWords.entries.Lcz_MLS_Alert.replace('{0}', this.ratePlan.not_available_reason?.replace('MLS-', ''))}</p>\r\n                )}\r\n              </Fragment>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n  formatVariation(v: Variation): any {\r\n    const adults = `${v.adult_nbr} ${v.adult_nbr === 1 ? localizedWords.entries.Lcz_Adult.toLowerCase() : localizedWords.entries.Lcz_Adults.toLowerCase()}`;\r\n    const children =\r\n      v.child_nbr > 0 ? `${v.child_nbr}  ${v.child_nbr > 1 ? localizedWords.entries.Lcz_Children.toLowerCase() : localizedWords.entries.Lcz_Child.toLowerCase()}` : null;\r\n    return children ? `${adults}&nbsp&nbsp&nbsp${children}` : adults;\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n.room-type-container {\r\n  border-radius: min(var(--radius, 8px), 12px);\r\n  margin-bottom: 1rem;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: flex-start;\r\n  gap: 1rem;\r\n  background-color: hsl(220, 14%, 96%);\r\n  padding: 1rem;\r\n}\r\n.unavailable-roomtype {\r\n  text-align: center;\r\n  color: #ef4444;\r\n  font-weight: 400;\r\n}\r\n.rp-container-grid {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  /* justify-content: space-between; */\r\n  /* flex: 1 1 0%; */\r\n}\r\n@media (min-width: 768px) {\r\n  :host([display='default']) .room-type-container {\r\n    flex-direction: row;\r\n  }\r\n}\r\n","import { RoomType } from '@/models/property';\r\nimport app_store from '@/stores/app.store';\r\nimport booking_store, { getVisibleInventory } from '@/stores/booking';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport { Component, Prop, State, Watch, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-roomtype',\r\n  styleUrl: 'ir-roomtype.css',\r\n  shadow: true,\r\n})\r\nexport class IrRoomtype {\r\n  @Prop({ reflect: true }) display: 'grid' | 'default' = 'default';\r\n  @Prop() roomtype: RoomType;\r\n\r\n  @State() shouldHideMlsRateplans: boolean;\r\n\r\n  componentWillLoad() {\r\n    this.checkRateplans();\r\n  }\r\n\r\n  @Watch('roomtype')\r\n  handleRoomTypeChange() {\r\n    this.checkRateplans();\r\n  }\r\n\r\n  private checkRateplans() {\r\n    this.shouldHideMlsRateplans =\r\n      this.roomtype.rateplans.some(rp => rp.not_available_reason?.includes('MLS')) && // Check for MLS issues\r\n      this.roomtype.rateplans.some(rp => rp.is_available_to_book); // Check for available rate plans\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <section class={`room-type-container p-0 ${this.display === 'default' ? 'md:p-4' : 'h-full'}`}>\r\n        {this.display === 'default' && (\r\n          <aside class=\"hidden md:block\">\r\n            <ir-property-gallery property_state=\"carousel\" roomType={this.roomtype}></ir-property-gallery>\r\n          </aside>\r\n        )}\r\n        <div class={`w-full  ${this.display === 'default' ? 'md:space-y-2' : 'rp-container-grid '}`}>\r\n          {/* <div class={'flex flex-1 flex-col'}> */}\r\n          {this.display === 'default' && <h3 class=\"hidden text-start  text-lg font-medium text-slate-900 md:block \">{this.roomtype.name}</h3>}\r\n          {/* Mobile view for carousel */}\r\n          <div class={this.display === 'default' ? 'md:hidden' : ''}>\r\n            <ir-property-gallery display={this.display} property_state=\"carousel\" roomType={this.roomtype}></ir-property-gallery>\r\n          </div>\r\n          <div class={`p-4 pt-2 ${this.display === 'default' ? 'md:p-0' : 'rp-container-grid '}`}>\r\n            <div>\r\n              <h3 class={`text-start  text-lg font-medium text-slate-900 ${this.display === 'default' ? 'md:hidden' : ''} `}>{this.roomtype.name}</h3>\r\n              <div class={`flex  flex-wrap  gap-2 py-2 text-sm font-normal text-gray-700 ${this.display === 'default' ? 'md:hidden' : '  '}`}>\r\n                <ir-accomodations\r\n                  bookingAttributes={{\r\n                    max_occupancy: this.roomtype.occupancy_max.adult_nbr,\r\n                    bedding_setup: this.roomtype.bedding_setup,\r\n                  }}\r\n                  amenities={app_store.property.amenities}\r\n                ></ir-accomodations>\r\n              </div>\r\n              {this.display === 'default' && (\r\n                <div class={'hidden md:block'}>\r\n                  <ir-accomodations\r\n                    bookingAttributes={{\r\n                      max_occupancy: this.roomtype.occupancy_max.adult_nbr,\r\n                      bedding_setup: this.roomtype.bedding_setup,\r\n                    }}\r\n                    amenities={app_store.property.amenities}\r\n                  ></ir-accomodations>\r\n                </div>\r\n              )}\r\n            </div>\r\n            {/* </div> */}\r\n            {booking_store.enableBooking ? (\r\n              this.roomtype.is_available_to_book ||\r\n              (!this.roomtype.is_available_to_book && this.roomtype?.rateplans?.some(rp => !rp.is_available_to_book && rp.not_available_reason?.includes('MLS'))) ? (\r\n                <div>\r\n                  {this.roomtype?.rateplans?.map(ratePlan => {\r\n                    if (!ratePlan.is_available_to_book && !ratePlan.not_available_reason?.includes('MLS')) {\r\n                      return null;\r\n                    }\r\n                    if (ratePlan.not_available_reason?.includes('MLS') && this.shouldHideMlsRateplans) {\r\n                      return null;\r\n                    }\r\n                    const visibleInventory = getVisibleInventory(this.roomtype.id, ratePlan.id);\r\n                    return (\r\n                      <ir-rateplan\r\n                        display={this.display}\r\n                        key={ratePlan.id}\r\n                        ratePlan={ratePlan}\r\n                        visibleInventory={visibleInventory}\r\n                        roomTypeId={this.roomtype.id}\r\n                        roomTypeInventory={this.roomtype.inventory}\r\n                      ></ir-rateplan>\r\n                    );\r\n                  })}\r\n                </div>\r\n              ) : (\r\n                <p class={`unavailable-roomtype text-base ${this.display === 'default' ? '' : 'pt-4'}`}>{localizedWords.entries.Lcz_NotAvailable}</p>\r\n              )\r\n            ) : (\r\n              <div class=\"app_container flex w-full  flex-col justify-between space-y-1 rounded-md bg-gray-100  text-sm md:flex-row\">\r\n                <p>{this.roomtype.description}</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}