{"version":3,"names":["Token","constructor","this","baseUrl","axios","defaults","baseURL","initialize","isInterceptorAdded","interceptors","request","use","config","token","MissingTokenError","prevHeaders","headers","hasOwnProperty","Authorization","setToken","Error","message","super","name"],"sources":["src/models/Token.ts"],"sourcesContent":["import axios from 'axios';\r\nclass Token {\r\n  private baseUrl = 'https://gateway.igloorooms.com/IRBE';\r\n  private static token: string | null = '';\r\n\r\n  private static isInterceptorAdded = false;\r\n  constructor() {\r\n    axios.defaults.baseURL = this.baseUrl;\r\n  }\r\n  private initialize() {\r\n    if (Token.isInterceptorAdded) {\r\n      return;\r\n    }\r\n\r\n    axios.interceptors.request.use(config => {\r\n      if (!Token.token) {\r\n        throw new MissingTokenError();\r\n      }\r\n      const prevHeaders = config.headers || {};\r\n      if (!prevHeaders.hasOwnProperty('Authorization') || !prevHeaders['Authorization']) {\r\n        config.headers.Authorization = Token.token;\r\n      }\r\n      // config.params = config.params || {};\r\n      // config.params.Ticket = Token.token;\r\n      return config;\r\n    });\r\n\r\n    Token.isInterceptorAdded = true;\r\n  }\r\n\r\n  public setToken(token: string) {\r\n    if (token === Token.token) {\r\n      return;\r\n    }\r\n    Token.token = token;\r\n\r\n    this.initialize();\r\n  }\r\n}\r\nexport default Token;\r\nexport class MissingTokenError extends Error {\r\n  constructor(message = 'Missing token!!') {\r\n    super(message);\r\n    this.name = 'MissingTokenError';\r\n  }\r\n}\r\n"],"mappings":"oCACA,MAAMA,EAKJ,WAAAC,GAJQC,KAAAC,QAAU,sCAKhBC,EAAMC,SAASC,QAAUJ,KAAKC,O,CAExB,UAAAI,GACN,GAAIP,EAAMQ,mBAAoB,CAC5B,M,CAGFJ,EAAMK,aAAaC,QAAQC,KAAIC,IAC7B,IAAKZ,EAAMa,MAAO,CAChB,MAAM,IAAIC,C,CAEZ,MAAMC,EAAcH,EAAOI,SAAW,GACtC,IAAKD,EAAYE,eAAe,mBAAqBF,EAAY,iBAAkB,CACjFH,EAAOI,QAAQE,cAAgBlB,EAAMa,K,CAIvC,OAAOD,CAAM,IAGfZ,EAAMQ,mBAAqB,I,CAGtB,QAAAW,CAASN,GACd,GAAIA,IAAUb,EAAMa,MAAO,CACzB,M,CAEFb,EAAMa,MAAQA,EAEdX,KAAKK,Y,EAjCQP,EAAAa,MAAuB,GAEvBb,EAAAQ,mBAAqB,M,MAmCzBM,UAA0BM,MACrC,WAAAnB,CAAYoB,EAAU,mBACpBC,MAAMD,GACNnB,KAAKqB,KAAO,mB","ignoreList":[]}