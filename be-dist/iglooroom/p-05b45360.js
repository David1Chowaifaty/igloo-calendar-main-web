import{T as o,M as t,a as e}from"./p-cc90ae84.js";import{a as n}from"./p-eefd0188.js";var i=undefined&&undefined.__rest||function(o,t){var e={};for(var n in o)if(Object.prototype.hasOwnProperty.call(o,n)&&t.indexOf(n)<0)e[n]=o[n];if(o!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,n=Object.getOwnPropertySymbols(o);i<n.length;i++){if(t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(o,n[i]))e[n[i]]=o[n[i]]}return e};class c extends o{async login(o){const c=this.getToken();const s=i(o,["option"]);if(!c){throw new t}const{data:r}=await e.post(`/Exposed_Guest_SignIn?Ticket=${c}`,Object.assign({},s));if(r["ExceptionMsg"]!==""){throw new Error(r["ExceptionMsg"])}localStorage.setItem("ir-token",r["My_Result"]);n.app_data.token=r["My_Result"];n.is_signed_in=true;return r["My_Result"]}async signUp(o){const i=this.getToken();if(!i){throw new t}const{data:c}=await e.post(`/Exposed_Guest_SignUp?Ticket=${i}`,o);if(c["ExceptionMsg"]!==""){throw new Error(c["ExceptionMsg"])}localStorage.setItem("ir-token",c["My_Result"]);n.app_data.token=c["My_Result"]}initializeFacebookSignIn(){window.fbAsyncInit=()=>{FB.init({appId:"1630011277802654",cookie:true,xfbml:true,version:"v19.0"});FB.AppEvents.logPageView()};(function(o,t,e){var n,i=o.getElementsByTagName(t)[0];if(o.getElementById(e)){return}n=o.createElement(t);n.id=e;n.src="https://connect.facebook.net/en_US/sdk.js";i.parentNode.insertBefore(n,i)})(document,"script","facebook-jssdk")}async handleCredentialResponse(o){try{const t=await this.login({option:"google",token:o.credential});return{state:"success",token:t}}catch(o){console.error("Error during Google Sign-In:",o);return{state:"failed",token:""}}}async loginWithFacebook(){FB.login((function(o){if(o.authResponse){console.log("Welcome!  Fetching your information.... ");FB.api("/me",{fields:"name, email, id"},(function(o){console.log(o)}))}else{console.log("User cancelled login or did not fully authorize.")}}));FB.getLoginStatus((o=>{console.log("login status",o)}))}createFakeGoogleWrapper(){const o=document.createElement("div");o.style.display="none";o.classList.add("custom-google-button");document.body.appendChild(o);window.google.accounts.id.renderButton(o,{type:"icon",width:"200"});const t=o.querySelector("div[role=button]");return{click:()=>{t.click()}}}loadGoogleSignInScript(o){const t=document.createElement("script");t.src="https://accounts.google.com/gsi/client";t.async=true;t.defer=true;t.onload=()=>this.initializeGoogleSignIn(o);document.head.appendChild(t)}initializeGoogleSignIn(o){window.google.accounts.id.initialize({client_id:"1035240403483-60urt17notg4vmvjbq739p0soqup0o87.apps.googleusercontent.com",callback:async o=>{this.handleCredentialResponse(o)},auto_select:true,ux_mode:"popup"});o=this.createFakeGoogleWrapper();window.handleGoogleLogin=()=>{o.click()}}}export{c as A};
//# sourceMappingURL=p-05b45360.js.map