{"file":"ir-signin2.js","mappings":"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","names":[],"sources":["src/components/ir-booking-engine/ir-nav/ir-auth/ir-signin/ir-signin.css?tag=ir-signin&encapsulation=scoped","src/components/ir-booking-engine/ir-nav/ir-auth/ir-signin/ir-signin.tsx"],"sourcesContent":[":host {\r\n  display: block;\r\n}\r\n.title {\r\n  height: 32px;\r\n  align-self: stretch;\r\n  flex-grow: 0;\r\n  font-size: 24px;\r\n  font-weight: 600;\r\n  font-stretch: normal;\r\n  font-style: normal;\r\n  line-height: 1.33;\r\n  letter-spacing: normal;\r\n  text-align: center;\r\n  color: #101828;\r\n  margin-bottom: 2rem;\r\n}\r\n.Supporting-text {\r\n  height: 24px;\r\n  align-self: stretch;\r\n  flex-grow: 0;\r\n  font-size: 16px;\r\n  font-weight: normal;\r\n  font-stretch: normal;\r\n  font-style: normal;\r\n  line-height: 1.5;\r\n  letter-spacing: normal;\r\n  text-align: center;\r\n  color: #475467;\r\n}\r\n.dont-have-an-account {\r\n  width: 155px;\r\n  height: 20px;\r\n  flex-grow: 0;\r\n  font-size: 14px;\r\n  font-weight: normal;\r\n  font-stretch: normal;\r\n  font-style: normal;\r\n  line-height: 1.43;\r\n  letter-spacing: normal;\r\n  text-align: left;\r\n  color: #475467;\r\n}\r\n\r\nform {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n}\r\n\r\nfieldset {\r\n  border: none;\r\n  padding: 0;\r\n}\r\n\r\n.ir-input {\r\n  display: block;\r\n  width: 100%;\r\n}\r\n\r\n.ir-button {\r\n  margin-top: 1rem;\r\n  width: 100%;\r\n}\r\n.error {\r\n  color: var(--error-color, #dc3545);\r\n  text-align: center;\r\n  margin-bottom: 1rem;\r\n}\r\n.divider {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 1rem;\r\n  margin: 0.75rem 0;\r\n}\r\n.divider-line {\r\n  flex: 1;\r\n  height: 1px;\r\n  background-color: var(--divider-color, #ccc);\r\n}\r\n\r\n.divider-text {\r\n  color: var(--divider-text-color, #6c757d);\r\n}\r\n\r\n.dont-have-an-account {\r\n  font-size: 0.875rem;\r\n  color: var(--text-color, #333);\r\n}\r\n\r\n.sign-up-button {\r\n  background-color: transparent;\r\n  border: none;\r\n  color: var(--primary-color, #007bff);\r\n  cursor: pointer;\r\n  padding: 0;\r\n}\r\n\r\n.sign-up-button:hover {\r\n  text-decoration: underline;\r\n}\r\n","import { Component, Event, EventEmitter, Host, Prop, State, h } from '@stencil/core';\r\nimport { SignInValidtor, TSignInAuthTrigger, TSignInValidator } from '@/validators/auth.validator';\r\nimport { ZodError } from 'zod';\r\nimport { AuthService } from '@/services/api/auth.service';\r\nimport app_store from '@/stores/app.store';\r\nimport { TAuthNavigation } from '../auth.types';\r\n\r\n@Component({\r\n  tag: 'ir-signin',\r\n  styleUrl: 'ir-signin.css',\r\n  scoped: true,\r\n})\r\nexport class IrSignin {\r\n  @Prop() enableSignUp: boolean = false;\r\n  @State() signInParams: TSignInValidator = {};\r\n  @State() formState: {\r\n    cause: 'zod' | 'auth' | null;\r\n    status: 'empty' | 'valid' | 'invalid';\r\n    errors: Record<keyof TSignInValidator, string> | null;\r\n  } = { cause: null, errors: null, status: 'empty' };\r\n  @Event() authFinish: EventEmitter<{ state: 'success' | 'failed'; token: string }>;\r\n  @Event() navigate: EventEmitter<TAuthNavigation>;\r\n  @Event() signIn: EventEmitter<TSignInAuthTrigger>;\r\n\r\n  private authService = new AuthService();\r\n\r\n  componentWillLoad() {\r\n    this.authService.setToken(app_store.app_data.token);\r\n  }\r\n\r\n  modifySignInParams(params: Partial<TSignInValidator>) {\r\n    if (!this.signInParams) {\r\n      this.signInParams = {};\r\n    }\r\n    this.signInParams = { ...this.signInParams, ...params };\r\n  }\r\n\r\n  async login(params: { email?: string; password?: string }) {\r\n    try {\r\n      const token = await this.authService.login({ option: 'direct', bookingNumber: params.password, params });\r\n      this.authFinish.emit({ state: 'success', token });\r\n    } catch (error) {\r\n      this.authFinish.emit({ state: 'failed', token: null });\r\n      this.formState = {\r\n        cause: 'auth',\r\n        status: 'invalid',\r\n        errors: { email: error.message, password: error.message },\r\n      };\r\n    }\r\n  }\r\n  async handleSignIn(e: Event) {\r\n    e.preventDefault();\r\n    try {\r\n      this.formState.errors = null;\r\n      const params = SignInValidtor.parse(this.signInParams);\r\n      this.signIn.emit({ trigger: 'be', params });\r\n      await this.login(params);\r\n    } catch (error) {\r\n      let newErrors: Record<keyof TSignInValidator, string> = {\r\n        email: null,\r\n        password: null,\r\n      };\r\n      if (error instanceof ZodError) {\r\n        error.issues.map(e => {\r\n          newErrors[e.path[0]] = e.message;\r\n        });\r\n        this.formState = {\r\n          cause: 'zod',\r\n          status: 'invalid',\r\n          errors: { ...newErrors },\r\n        };\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <h1 class=\"title\">Sign in to your booking</h1>\r\n        <form onSubmit={this.handleSignIn.bind(this)}>\r\n          {this.formState?.cause === 'auth' && this.formState?.errors && (\r\n            <div class=\"error\">\r\n              <ir-badge-group variant=\"error\" badge=\"Error\" message={this.formState?.errors?.email ?? ''}></ir-badge-group>\r\n            </div>\r\n          )}\r\n          <fieldset>\r\n            <ir-input\r\n              error={!!this.formState?.errors?.email}\r\n              onTextChanged={e => this.modifySignInParams({ email: e.detail })}\r\n              autofocus\r\n              inputId=\"email\"\r\n              label=\"Enter your email\"\r\n            ></ir-input>\r\n          </fieldset>\r\n          <fieldset>\r\n            <ir-input\r\n              error={!!this.formState?.errors?.password}\r\n              onTextChanged={e => this.modifySignInParams({ password: e.detail })}\r\n              inputId=\"password\"\r\n              type=\"password\"\r\n              label=\"Enter your booking number\"\r\n            ></ir-input>\r\n          </fieldset>\r\n          <ir-button type=\"submit\" class=\"ir-button\" label=\"Sign in\" size=\"md\"></ir-button>\r\n          <div class=\"divider\">\r\n            <div class=\"divider-line\"></div>\r\n            <span class=\"divider-text\">OR</span>\r\n            <div class=\"divider-line\"></div>\r\n          </div>\r\n        </form>\r\n        {/* {this.enableSignUp && (\r\n          <div class=\"flex items-center justify-center\">\r\n            <p class=\"dont-have-an-account\">Don't have an account?</p>\r\n            <button class=\"sign-up-button\" onClick={() => this.navigate.emit('register')}>\r\n              Sign up\r\n            </button>\r\n          </div>\r\n        )} */}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"version":3}