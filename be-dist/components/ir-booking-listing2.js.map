{"file":"ir-booking-listing2.js","mappings":"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","names":[],"sources":["src/components/ir-booking-engine/ir-booking-listing/ir-booking-listing.css?tag=ir-booking-listing","src/components/ir-booking-engine/ir-booking-listing/ir-booking-listing.tsx"],"sourcesContent":["@import url('../../gloabls.css');\r\n:host {\r\n  display: block;\r\n}\r\n.page-loader {\r\n  width: 30px;\r\n  aspect-ratio: 1;\r\n  border-radius: 50%;\r\n  background:\r\n    radial-gradient(farthest-side, #000000 94%, #0000) top/4px 4px no-repeat,\r\n    conic-gradient(#0000 30%, #000000);\r\n  mask: radial-gradient(farthest-side, #0000 calc(100% - 4px), #000 0);\r\n  -webkit-mask: radial-gradient(farthest-side, #0000 calc(100% - 4px), #000 0);\r\n  animation: l13 1s infinite linear;\r\n}\r\n.ir-auth-nav {\r\n  width: 100%;\r\n  background-color: white;\r\n}\r\n\r\n.ir-auth-nav-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  max-width: 72rem;\r\n  min-height: 3.5rem;\r\n  padding: 0 1rem;\r\n  margin: 0 auto;\r\n}\r\n.ir-table-cell,\r\n.ir-table-head {\r\n  padding: 0.75rem 0.2rem;\r\n  width: max-content !important;\r\n}\r\n.bl-back-btn:dir(rtl) {\r\n  transform: rotate(180deg);\r\n}\r\n.ir-nav-logo {\r\n  /* height: 2.5rem;\r\n  width: auto;\r\n  */\r\n  /* width: 40px; */\r\n  /* max-height: 5rem; */\r\n  max-height: 4.2rem;\r\n  padding: 0.5rem;\r\n  object-fit: contain;\r\n}\r\n.main-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 100vh;\r\n  gap: 1rem;\r\n}\r\n.header-left {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.625rem;\r\n}\r\n\r\n.header-title {\r\n  font-size: 1.125rem;\r\n  font-weight: 600;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\n@media (min-width: 768px) {\r\n  .main-container.main-container-padding {\r\n    padding-left: 1rem;\r\n    padding-right: 1rem;\r\n  }\r\n}\r\n@media (min-width: 1024px) {\r\n  .main-container.main-container-padding {\r\n    padding-left: 1.5rem;\r\n    padding-right: 1.5rem;\r\n  }\r\n}\r\n@media (min-width: 1280px) {\r\n  .main-container.main-container-padding {\r\n    padding-left: 0px;\r\n    padding-right: 0px;\r\n  }\r\n}\r\n@keyframes l13 {\r\n  100% {\r\n    transform: rotate(1turn);\r\n  }\r\n}\r\n","import { pages } from '@/components';\r\nimport Token from '@/models/Token';\r\nimport { CommonService } from '@/services/api/common.service';\r\nimport { PropertyService } from '@/services/api/property.service';\r\nimport app_store from '@/stores/app.store';\r\nimport { checkout_store } from '@/stores/checkout.store';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport { checkAffiliate, getUserPreference } from '@/utils/utils';\r\nimport { Component, Fragment, Host, Listen, Prop, State, Watch, h } from '@stencil/core';\r\nimport axios from 'axios';\r\n\r\n@Component({\r\n  tag: 'ir-booking-listing',\r\n  styleUrl: 'ir-booking-listing.css',\r\n  scoped: false,\r\n})\r\nexport class IrBookingListing {\r\n  @Prop() propertyid: number;\r\n  @Prop() baseUrl: string = 'https://gateway.igloorooms.com/IRBE';\r\n  @Prop() language: string;\r\n  @Prop() headerShown: boolean = true;\r\n  @Prop() footerShown: boolean = true;\r\n  @Prop() maxPages: number = 10;\r\n  @Prop() perma_link: string = null;\r\n  @Prop() aName: string = null;\r\n  @Prop() showAllBookings: boolean = true;\r\n  @Prop() be: boolean = false;\r\n  @Prop() startScreen: { screen: 'bookings' | 'booking-details'; params: unknown } = { screen: 'bookings', params: null };\r\n  @Prop() aff: string = null;\r\n  @Prop() version: string = '2.0';\r\n  @Prop() hideGoogleSignIn: boolean = true;\r\n\r\n  @State() isLoading = false;\r\n  @State() bookingNumber = null;\r\n  @State() currentPage: 'bookings' | 'booking-details' | 'user-profile' = 'bookings';\r\n  @State() selectedBooking: { email: string; booking_nbr: string } | null = null;\r\n  @State() isAffiliate: boolean = false;\r\n  @State() isSignedIn: boolean = false;\r\n\r\n  private commonService = new CommonService();\r\n  private propertyService = new PropertyService();\r\n  private token = new Token();\r\n\r\n  private privacyPolicyRef: HTMLIrPrivacyPolicyElement;\r\n\r\n  async componentWillLoad() {\r\n    axios.defaults.baseURL = this.baseUrl;\r\n    app_store.app_data.hideGoogleSignIn = this.hideGoogleSignIn;\r\n    this.currentPage = this.startScreen.screen;\r\n    this.selectedBooking = (this.startScreen.params as any) ?? null;\r\n    getUserPreference(this.language);\r\n    const isAuthenticated = this.commonService.checkUserAuthState();\r\n    if (isAuthenticated) {\r\n      this.bookingNumber = isAuthenticated.params ? isAuthenticated.params.booking_nbr : null;\r\n      this.token.setToken(isAuthenticated.token);\r\n      this.isSignedIn = true;\r\n    } else {\r\n      const token = await this.commonService.getBEToken();\r\n      if (token) {\r\n        this.token.setToken(token);\r\n      }\r\n    }\r\n    if (!this.be) {\r\n      this.initializeApp();\r\n    }\r\n  }\r\n\r\n  @Watch('aff')\r\n  handleAffiliateChange(newValue: string, oldValue: string) {\r\n    if (newValue !== oldValue) {\r\n      this.isAffiliate = checkAffiliate(this.aff.toLowerCase().trim()) !== null;\r\n    }\r\n  }\r\n\r\n  @Listen('screenChanged', { target: 'body' })\r\n  handleScreenChanged(e: CustomEvent<pages>) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    const screen = e.detail;\r\n    if (!['booking-listing', 'user-profile'].includes(screen) || (this.currentPage === 'bookings' && screen === 'booking-listing')) {\r\n      return;\r\n    }\r\n    this.currentPage = screen === 'booking-listing' ? 'bookings' : 'user-profile';\r\n  }\r\n  private async fetchGuest() {\r\n    try {\r\n      this.isLoading = true;\r\n      await this.propertyService.getExposedGuest();\r\n    } catch (error) {\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n\r\n  async initializeApp() {\r\n    try {\r\n      this.isLoading = true;\r\n      let requests: any = [];\r\n      app_store.app_data.aName = this.aName;\r\n      app_store.app_data.perma_link = this.perma_link;\r\n      app_store.app_data.property_id = this.propertyid;\r\n      if (!this.be) {\r\n        requests = [\r\n          ...requests,\r\n          this.commonService.getExposedLanguage(),\r\n          this.commonService.getCurrencies(),\r\n          this.propertyService.getExposedProperty({\r\n            id: this.propertyid,\r\n            language: app_store.userPreferences?.language_id || this.language || 'en',\r\n            aname: this.aName,\r\n            perma_link: this.perma_link,\r\n          }),\r\n        ];\r\n      }\r\n      if (this.isSignedIn) {\r\n        requests = [...requests, this.propertyService.getExposedGuest()];\r\n      }\r\n      await Promise.all(requests);\r\n      this.isAffiliate = checkAffiliate(this.aff?.toLowerCase().trim()) !== null;\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n\r\n  @Listen('authFinish')\r\n  handleAuthFinish(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    if (this.be) {\r\n      return;\r\n    }\r\n    const { token, state, payload } = e.detail;\r\n    if (state === 'success') {\r\n      if (payload.method === 'direct') {\r\n        this.selectedBooking = { email: payload.email, booking_nbr: payload.booking_nbr };\r\n        this.bookingNumber = payload.booking_nbr;\r\n        this.currentPage = 'booking-details';\r\n      }\r\n      this.token.setToken(token);\r\n      this.isSignedIn = true;\r\n      this.fetchGuest();\r\n    }\r\n  }\r\n  @Listen('signOut')\r\n  handleSignout() {\r\n    if (this.be) {\r\n      return;\r\n    }\r\n    this.token.setToken('');\r\n    this.isSignedIn = false;\r\n  }\r\n\r\n  @Listen('bl_routing')\r\n  handleRouting(e: CustomEvent) {\r\n    e.stopPropagation();\r\n    e.stopImmediatePropagation();\r\n    const { params, route } = e.detail;\r\n    this.currentPage = route;\r\n    this.selectedBooking = params.booking ? { email: params?.booking.guest.email, booking_nbr: params.booking.booking_nbr } : null;\r\n  }\r\n  @Listen('openPrivacyPolicy')\r\n  async openPrivacyPolicy(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    if (this.privacyPolicyRef) {\r\n      this.privacyPolicyRef.openModal();\r\n    }\r\n  }\r\n  private renderPages() {\r\n    switch (this.currentPage) {\r\n      case 'bookings':\r\n        return (\r\n          <ir-booking-overview\r\n            aff={this.isAffiliate}\r\n            propertyid={app_store.app_data.property_id}\r\n            language={this.language}\r\n            maxPages={this.maxPages}\r\n            showAllBookings={this.showAllBookings}\r\n            be={this.be}\r\n          ></ir-booking-overview>\r\n        );\r\n      case 'booking-details':\r\n        return (\r\n          <div class={this.be ? '' : 'mx-auto px-4 lg:px-6'}>\r\n            <div class=\"header-left\">\r\n              <ir-button\r\n                variants=\"icon\"\r\n                onButtonClick={e => {\r\n                  e.stopPropagation();\r\n                  e.stopImmediatePropagation();\r\n                  this.currentPage = 'bookings';\r\n                  this.selectedBooking = null;\r\n                  // this.bl_routing.emit({ route: 'booking' });\r\n                }}\r\n                iconName={app_store.dir === 'RTL' ? 'angle_right' : ('angle_left' as any)}\r\n              ></ir-button>\r\n              <p class=\"header-title\">{localizedWords.entries.Lcz_MyBookings}</p>\r\n            </div>\r\n            <ir-invoice\r\n              locationShown={false}\r\n              headerShown={false}\r\n              headerMessageShown={false}\r\n              footerShown={false}\r\n              propertyId={app_store.app_data.property_id}\r\n              perma_link={this.perma_link}\r\n              aName={this.aName}\r\n              language={this.language}\r\n              baseUrl={this.baseUrl}\r\n              email={this.selectedBooking.email}\r\n              bookingNbr={this.selectedBooking.booking_nbr}\r\n              status={1}\r\n              be={true}\r\n            ></ir-invoice>\r\n          </div>\r\n        );\r\n      case 'user-profile':\r\n        if (this.be) {\r\n          return;\r\n        }\r\n        return (\r\n          <ir-user-profile\r\n            be={this.be}\r\n            user_data={{\r\n              id: checkout_store.userFormData.id,\r\n              email: checkout_store.userFormData.email,\r\n              first_name: checkout_store.userFormData.firstName,\r\n              last_name: checkout_store.userFormData.lastName,\r\n              country_id: checkout_store.userFormData.country_id,\r\n              mobile: checkout_store.userFormData.mobile_number,\r\n              country_phone_prefix: checkout_store.userFormData.country_phone_prefix.toString(),\r\n            }}\r\n          ></ir-user-profile>\r\n        );\r\n      default:\r\n        return (\r\n          <ir-booking-overview\r\n            aff={this.isAffiliate}\r\n            propertyid={app_store.app_data.property_id}\r\n            language={this.language}\r\n            maxPages={this.maxPages}\r\n            showAllBookings={this.showAllBookings}\r\n            be={this.be}\r\n          ></ir-booking-overview>\r\n        );\r\n    }\r\n  }\r\n  private renderAuthScreen() {\r\n    if (this.isLoading) {\r\n      return (\r\n        <main class=\"flex min-h-screen flex-col\">\r\n          <div class=\"flex h-14 p-4\">\r\n            <ir-skeleton class=\" mx-auto h-10 w-80 \"></ir-skeleton>\r\n          </div>\r\n          <div class=\"mx-auto flex h-full w-full max-w-md flex-1 flex-col gap-4 px-4 py-4 \">\r\n            <ir-skeleton class=\"mb-2 h-6 w-56 self-center\"></ir-skeleton>\r\n            <ir-skeleton class=\"h-12 w-full\"></ir-skeleton>\r\n            <ir-skeleton class=\"h-12 w-full\"></ir-skeleton>\r\n            <ir-skeleton class=\"h-10 w-full rounded-full\"></ir-skeleton>\r\n          </div>\r\n        </main>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <main class=\"flex min-h-screen flex-col\">\r\n        <nav class=\"ir-auth-nav\">\r\n          <div class=\"ir-auth-nav-container relative\">\r\n            <div class={'flex w-full items-center gap-4'}>\r\n              <ir-button\r\n                class={'bl-back-btn absolute'}\r\n                variants=\"icon\"\r\n                iconName=\"angle_left\"\r\n                onButtonClick={() => (window.location.href = `https://${app_store.property.perma_link}.bookingmystay.com`)}\r\n              ></ir-button>\r\n              <div class={'flex w-full flex-1 justify-center '}>\r\n                <a\r\n                  aria-label=\"home\"\r\n                  target=\"_blank\"\r\n                  href={`https://${app_store.app_data.affiliate ? app_store.app_data.affiliate.sites[0]?.url : app_store.property?.space_theme.website}`}\r\n                >\r\n                  <img\r\n                    loading=\"lazy\"\r\n                    src={app_store.app_data?.affiliate ? app_store.app_data?.affiliate.sites[0]?.logo : app_store.property?.space_theme?.logo}\r\n                    alt={`${app_store.property?.name}, ${app_store.property?.country.name}`}\r\n                    class=\"ir-nav-logo aspect-1\"\r\n                  ></img>\r\n                </a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </nav>\r\n        <div class=\"mx-auto flex h-full  w-full max-w-md flex-1 flex-col px-4 py-4 \">\r\n          <ir-auth enableSignUp={false}></ir-auth>\r\n        </div>\r\n      </main>\r\n    );\r\n  }\r\n  private renderBookingsScreen() {\r\n    if (this.isLoading) {\r\n      return (\r\n        <div class=\"grid h-screen w-full place-content-center\">\r\n          {!this.be && <ir-interceptor></ir-interceptor>}\r\n          <div class=\" flex h-screen flex-col gap-4 md:hidden\">\r\n            {[...Array(5)].map(p => (\r\n              <div key={p} class=\"block h-64 w-full animate-pulse rounded-md bg-gray-200\"></div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <Fragment>\r\n        {this.headerShown && (\r\n          <ir-nav\r\n            isBookingListing\r\n            showBookingCode={false}\r\n            showCurrency={false}\r\n            website={app_store.property?.space_theme.website}\r\n            logo={app_store.property?.space_theme?.logo}\r\n          ></ir-nav>\r\n        )}\r\n        <div class={`mx-auto max-w-6xl `}>{this.renderPages()}</div>\r\n        {this.footerShown && <ir-footer version={this.version}></ir-footer>}\r\n        {this.footerShown && <ir-privacy-policy hideTrigger ref={el => (this.privacyPolicyRef = el)}></ir-privacy-policy>}\r\n      </Fragment>\r\n    );\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        {!this.be && <ir-interceptor></ir-interceptor>}\r\n        {!this.isSignedIn ? this.renderAuthScreen() : this.renderBookingsScreen()}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"version":3}