{"file":"ir-user-profile2.js","mappings":"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","names":[],"sources":["src/components/ir-booking-engine/ir-nav/ir-user-profile/ir-user-profile.css?tag=ir-user-profile&encapsulation=shadow","src/components/ir-booking-engine/ir-nav/ir-user-profile/ir-user-profile.tsx"],"sourcesContent":[":host {\n  display: block;\n  position: relative;\n  overflow: hidden;\n}\n","import { IrGuest, TGuest } from '@/models/user_form';\nimport { Component, h, Prop, State } from '@stencil/core';\nimport phone_input_store from '../../../ui/ir-phone-input/phone.store';\nimport { checkout_store } from '@/stores/checkout.store';\nimport { ZodError } from 'zod';\nimport { PropertyService } from '@/services/api/property.service';\nimport app_store from '@/stores/app.store';\n\n@Component({\n  tag: 'ir-user-profile',\n  styleUrl: 'ir-user-profile.css',\n  shadow: true,\n})\nexport class IrUserProfile {\n  @Prop() user_data: TGuest = {};\n\n  @State() user: TGuest = {};\n\n  private propertyService = new PropertyService();\n\n  componentWillLoad() {\n    this.propertyService.setToken(app_store.app_data.token);\n    this.user = { ...this.user_data };\n  }\n\n  updateUserData(key: keyof TGuest, value: unknown) {\n    this.user = {\n      ...this.user,\n      [key]: value,\n    };\n  }\n\n  async handleSubmit(e: Event) {\n    e.preventDefault();\n    try {\n      IrGuest.parse(this.user);\n      await this.propertyService.editExposedGuest(this.user, '');\n      const { email, country_id, first_name, last_name, mobile } = this.user;\n      checkout_store.userFormData = {\n        ...checkout_store.userFormData,\n        country_code: country_id,\n        email,\n        firstName: first_name,\n        lastName: last_name,\n        mobile_number: mobile,\n        country_id,\n      };\n    } catch (error) {\n      if (error instanceof ZodError) {\n      }\n    }\n  }\n\n  render() {\n    return (\n      <section class=\"p-4\">\n        <h1 class=\"mb-6 text-lg font-medium\">Personal profile</h1>\n        <form onSubmit={this.handleSubmit.bind(this)}>\n          <div class=\"relative grid gap-4 md:grid-cols-2\">\n            <ir-input\n              label=\"Email\"\n              placeholder=\"\"\n              value={this.user.email}\n              onInputBlur={e => {\n                const emailSchema = IrGuest.pick({ email: true });\n                const schemaValidation = emailSchema.safeParse({ email: this.user?.email });\n                const target: HTMLIrInputElement = e.target;\n                if (!schemaValidation.success) {\n                  target.setAttribute('data-state', 'error');\n                  target.setAttribute('aria-invalid', 'true');\n                } else {\n                  if (target.hasAttribute('aria-invalid')) {\n                    target.setAttribute('aria-invalid', 'false');\n                  }\n                }\n              }}\n              onInputFocus={e => {\n                const target: HTMLIrInputElement = e.target;\n                if (target.hasAttribute('data-state')) target.removeAttribute('data-state');\n              }}\n              onTextChanged={e => this.updateUserData('email', e.detail)}\n            ></ir-input>\n            <ir-input\n              label=\"First name\"\n              onTextChanged={e => this.updateUserData('first_name', e.detail)}\n              value={this.user.first_name}\n              placeholder=\"\"\n              onInputBlur={e => {\n                const emailSchema = IrGuest.pick({ first_name: true });\n                const schemaValidation = emailSchema.safeParse({ first_name: this.user?.first_name });\n                const target: HTMLIrInputElement = e.target;\n                if (!schemaValidation.success) {\n                  target.setAttribute('data-state', 'error');\n                  target.setAttribute('aria-invalid', 'true');\n                } else {\n                  if (target.hasAttribute('aria-invalid')) {\n                    target.setAttribute('aria-invalid', 'false');\n                  }\n                }\n              }}\n              onInputFocus={e => {\n                const target: HTMLIrInputElement = e.target;\n                if (target.hasAttribute('data-state')) target.removeAttribute('data-state');\n              }}\n            ></ir-input>\n            <ir-input\n              value={this.user.last_name}\n              label=\"Last name\"\n              placeholder=\"\"\n              onTextChanged={e => this.updateUserData('last_name', e.detail)}\n              onInputBlur={e => {\n                const emailSchema = IrGuest.pick({ last_name: true });\n                const schemaValidation = emailSchema.safeParse({ last_name: this.user?.last_name });\n                const target: HTMLIrInputElement = e.target;\n                if (!schemaValidation.success) {\n                  target.setAttribute('data-state', 'error');\n                  target.setAttribute('aria-invalid', 'true');\n                } else {\n                  if (target.hasAttribute('aria-invalid')) {\n                    target.setAttribute('aria-invalid', 'false');\n                  }\n                }\n              }}\n              onInputFocus={e => {\n                const target: HTMLIrInputElement = e.target;\n                if (target.hasAttribute('data-state')) target.removeAttribute('data-state');\n              }}\n            ></ir-input>\n            <ir-select\n              value={2}\n              label=\"Country\"\n              variant=\"double-line\"\n              data={phone_input_store.countries?.map(country => ({\n                id: country.id,\n                value: country.name,\n              }))}\n              onValueChange={e => this.updateUserData('country_id', e.detail)}\n            ></ir-select>\n\n            <ir-phone-input\n              class=\"col-span-2 w-full\"\n              country_code={this.user.country_id || null}\n              onTextChange={e => {\n                this.updateUserData('mobile', e.detail.mobile);\n                this.updateUserData('country_id', e.detail.phone_prefix);\n              }}\n              mobile_number={(this.user.mobile || '').toString()}\n              onPhoneInputBlur={e => {\n                const schema = IrGuest.pick({ mobile: true });\n                const schemaValidation = schema.safeParse({ mobile: this.user.mobile });\n                const target: HTMLIrPhoneInputElement = e.target;\n                if (!schemaValidation.success) {\n                  target.setAttribute('data-state', 'error');\n                  target.setAttribute('aria-invalid', 'true');\n                } else {\n                  if (target.hasAttribute('aria-invalid')) {\n                    target.setAttribute('aria-invalid', 'false');\n                  }\n                }\n              }}\n              onPhoneInputFocus={e => {\n                const target: HTMLIrPhoneInputElement = e.target;\n                if (target.hasAttribute('data-state')) target.removeAttribute('data-state');\n              }}\n            ></ir-phone-input>\n          </div>\n          <div class=\"mt-4\">\n            <ir-checkbox onCheckChange={e => this.updateUserData('subscribe_to_news_letter', e.detail)} label=\"Register for exclusive deals\"></ir-checkbox>\n          </div>\n          <div class=\"flex items-center justify-end\">\n            <ir-button type=\"submit\" label=\"Save\" class=\"mt-6 w-full md:w-fit\"></ir-button>\n          </div>\n        </form>\n      </section>\n    );\n  }\n}\n"],"version":3}