{"file":"ir-payment-view2.js","mappings":"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","names":[],"sources":["src/components/ir-booking-engine/ir-checkout-page/ir-booking-summary/ir-payment-view/ir-payment-view.css?tag=ir-payment-view&encapsulation=shadow","src/components/ir-booking-engine/ir-checkout-page/ir-booking-summary/ir-payment-view/ir-payment-view.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n","import app_store from '@/stores/app.store';\nimport { checkout_store, ICardProcessingWithCVC } from '@/stores/checkout.store';\nimport localizedWords from '@/stores/localization.store';\nimport { Component, State, h } from '@stencil/core';\nimport IMask from 'imask';\n@Component({\n  tag: 'ir-payment-view',\n  styleUrl: 'ir-payment-view.css',\n  shadow: true,\n})\nexport class IrPaymentView {\n  @State() selectedPaymentMethod: string;\n\n  componentWillLoad() {\n    this.selectedPaymentMethod = app_store.property?.allowed_payment_methods[0].code;\n  }\n  private getExpiryMask() {\n    const currentYear = new Date().getFullYear() % 100;\n    return {\n      mask: 'MM/YY',\n      blocks: {\n        MM: {\n          mask: IMask.MaskedRange,\n          from: 1,\n          to: 12,\n          maxLength: 2,\n          placeholderChar: 'M',\n        },\n        YY: {\n          mask: IMask.MaskedRange,\n          from: currentYear,\n          to: 99,\n          maxLength: 2,\n          placeholderChar: 'Y',\n        },\n      },\n      lazy: false,\n      placeholderChar: '_',\n    };\n  }\n  renderPaymentMethod() {\n    const method = app_store.property?.allowed_payment_methods.find(apm => apm.code === this.selectedPaymentMethod);\n    if (this.selectedPaymentMethod === '001' || this.selectedPaymentMethod === '004')\n      return (\n        <div class=\"flex w-full gap-4\" key={method.code}>\n          <div class={'flex-1 space-y-4'}>\n            <fieldset>\n              <ir-input\n                placeholder=\"\"\n                onTextChanged={e => {\n                  checkout_store.payment = { ...checkout_store.payment, cardHolderName: e.detail };\n                }}\n                label={localizedWords.entries.Lcz_NameOnCard}\n                class=\"w-full\"\n              ></ir-input>\n            </fieldset>\n            <ir-credit-card-input\n              onCreditCardChange={e => {\n                checkout_store.payment = { ...checkout_store.payment, cardNumber: e.detail };\n              }}\n            ></ir-credit-card-input>\n            <div class=\"flex flex-col gap-2.5 sm:flex-row sm:items-center\">\n              <fieldset class=\"w-full\">\n                <ir-input\n                  type=\"text\"\n                  value=\"\"\n                  placeholder=\"MM/YY\"\n                  mask={this.getExpiryMask()}\n                  label={localizedWords.entries.Lcz_ExpirationDate}\n                  class=\"w-full\"\n                  rightIcon\n                  onTextChanged={e => {\n                    checkout_store.payment = { ...checkout_store.payment, expiry_month: e.detail, expiry_year: e.detail };\n                  }}\n                >\n                  <svg slot=\"right-icon\" width=\"20\" height=\"16\" viewBox=\"0 0 20 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M0 3C0 1.34315 1.34315 0 3 0H17C18.6569 0 20 1.34315 20 3V13C20 14.6569 18.6569 16 17 16H3C1.34315 16 0 14.6569 0 13V3Z\" fill=\"#EAECF0\" />\n                    <path d=\"M2 8C2 7.44772 2.44772 7 3 7H17C17.5523 7 18 7.44772 18 8C18 8.55228 17.5523 9 17 9H3C2.44772 9 2 8.55228 2 8Z\" fill=\"#8B8B8B\" />\n                    <path d=\"M2 4C2 3.44772 2.44772 3 3 3H5C5.55228 3 6 3.44772 6 4C6 4.55228 5.55228 5 5 5H3C2.44772 5 2 4.55228 2 4Z\" fill=\"white\" />\n                    <path d=\"M10 11C10 10.4477 10.4477 10 11 10H15C15.5523 10 16 10.4477 16 11V13C16 13.5523 15.5523 14 15 14H11C10.4477 14 10 13.5523 10 13V11Z\" fill=\"#FE4F42\" />\n                    <path d=\"M11 11H15V13H11V11Z\" fill=\"#EAECF0\" />\n                  </svg>\n                </ir-input>\n              </fieldset>\n              {this.selectedPaymentMethod === '001' && (\n                <fieldset class=\"w-full\">\n                  <ir-input\n                    label=\"Security code\"\n                    maxlength={4}\n                    placeholder=\"XXXX\"\n                    onTextChanged={e => {\n                      checkout_store.payment = { ...checkout_store.payment, cvc: e.detail } as ICardProcessingWithCVC;\n                    }}\n                    class=\"w-full\"\n                    rightIcon\n                  >\n                    <svg slot=\"right-icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                      <path\n                        fill-rule=\"evenodd\"\n                        clip-rule=\"evenodd\"\n                        d=\"M2 7C2 6.20435 2.31607 5.44129 2.87868 4.87868C3.44129 4.31607 4.20435 4 5 4H19C19.7956 4 20.5587 4.31607 21.1213 4.87868C21.6839 5.44129 22 6.20435 22 7V8H2V7ZM2 10V17C2 17.7956 2.31607 18.5587 2.87868 19.1213C3.44129 19.6839 4.20435 20 5 20H19C19.7956 20 20.5587 19.6839 21.1213 19.1213C21.6839 18.5587 22 17.7956 22 17V10H2ZM7 12C6.73478 12 6.48043 12.1054 6.29289 12.2929C6.10536 12.4804 6 12.7348 6 13C6 13.2652 6.10536 13.5196 6.29289 13.7071C6.48043 13.8946 6.73478 14 7 14H12C12.2652 14 12.5196 13.8946 12.7071 13.7071C12.8946 13.5196 13 13.2652 13 13C13 12.7348 12.8946 12.4804 12.7071 12.2929C12.5196 12.1054 12.2652 12 12 12H7Z\"\n                        fill=\"#EAECF0\"\n                      />\n                      <rect x=\"14.5\" y=\"11.5\" width=\"6\" height=\"3\" rx=\"0.5\" stroke=\"#FE4F42\" />\n                    </svg>\n                  </ir-input>\n                </fieldset>\n              )}\n            </div>\n          </div>\n        </div>\n      );\n    if (this.selectedPaymentMethod === '005') {\n      return (\n        <div class=\"flex w-full gap-4\">\n          <div class=\"flex-1 space-y-1.5\">\n            <p>{method.description}</p>\n            <p class=\"text-xs text-gray-700\">{method.data?.map(d => <span key={d.key}>{d.value}</span>)}</p>\n          </div>\n        </div>\n      );\n    }\n  }\n  handlePaymentSelectionChange(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    const payment_code = e.detail;\n    this.selectedPaymentMethod = payment_code;\n    checkout_store.payment.code = payment_code;\n  }\n  render() {\n    return (\n      <div class=\"w-full space-y-4 rounded-md border border-solid bg-white  p-4\">\n        {app_store.property?.allowed_payment_methods.length > 1 && (\n          <ir-select\n            variant=\"double-line\"\n            label=\"Select your payment method\"\n            data={app_store.property?.allowed_payment_methods.map(apm => ({\n              id: apm.code,\n              value: apm.description,\n            }))}\n            onValueChange={this.handlePaymentSelectionChange.bind(this)}\n          ></ir-select>\n        )}\n        {this.renderPaymentMethod()}\n      </div>\n    );\n  }\n}\n"],"version":3}