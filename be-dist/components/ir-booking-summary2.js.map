{"file":"ir-booking-summary2.js","mappings":"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","names":["format"],"sources":["src/components/ir-booking-engine/ir-checkout-page/ir-booking-summary/ir-booking-summary.css?tag=ir-booking-summary&encapsulation=shadow","src/components/ir-booking-engine/ir-checkout-page/ir-booking-summary/ir-booking-summary.tsx"],"sourcesContent":[":host {\r\n  display: block;\r\n}\r\n.image-container {\r\n  aspect-ratio: 16/9;\r\n}\r\n","import { pages } from '@/models/common';\r\nimport { IExposedProperty } from '@/models/property';\r\nimport app_store, { onAppDataChange } from '@/stores/app.store';\r\nimport booking_store, { calculateTotalCost } from '@/stores/booking';\r\nimport { checkout_store } from '@/stores/checkout.store';\r\nimport { formatAmount, getDateDifference } from '@/utils/utils';\r\nimport { Component, Host, State, h, Event, EventEmitter, Prop } from '@stencil/core';\r\nimport { format } from 'date-fns';\r\nimport IMask from 'imask';\r\n\r\n@Component({\r\n  tag: 'ir-booking-summary',\r\n  styleUrl: 'ir-booking-summary.css',\r\n  shadow: true,\r\n})\r\nexport class IrBookingSummary {\r\n  @Prop() isLoading = false;\r\n\r\n  @State() property: IExposedProperty;\r\n\r\n  componentWillLoad() {\r\n    this.property = { ...app_store.property };\r\n    onAppDataChange('property', (newValue: IExposedProperty) => {\r\n      this.property = { ...newValue };\r\n    });\r\n  }\r\n\r\n  @Event() routing: EventEmitter<pages>;\r\n  @Event() bookingClicked: EventEmitter<null>;\r\n  handleBooking() {\r\n    this.bookingClicked.emit(null);\r\n  }\r\n  private expiry_mask = {\r\n    mask: 'MM/YY',\r\n    blocks: {\r\n      MM: {\r\n        mask: IMask.MaskedRange,\r\n        from: 1,\r\n        to: 12,\r\n        maxLength: 2,\r\n        placeholderChar: 'M',\r\n      },\r\n      YY: {\r\n        mask: IMask.MaskedRange,\r\n        from: 0,\r\n        to: 99,\r\n        maxLength: 2,\r\n        placeholderChar: 'Y',\r\n      },\r\n    },\r\n    lazy: false,\r\n    placeholderChar: '_',\r\n  };\r\n\r\n  render() {\r\n    const total_nights = getDateDifference(booking_store.bookingAvailabilityParams.from_date ?? new Date(), booking_store.bookingAvailabilityParams.to_date ?? new Date());\r\n    const { prePaymentAmount, totalAmount } = calculateTotalCost();\r\n    return (\r\n      <Host>\r\n        <div class=\"w-full rounded-md bg-gray-100  text-sm lg:max-w-sm\">\r\n          <div class=\"aspect-[1/1] max-h-32 w-full lg:aspect-[16/9]\">\r\n            <img class=\"h-full w-full rounded-t-md object-cover\" src={this.property.space_theme.background_image} alt=\"\" />\r\n          </div>\r\n          <section class=\"flex flex-col items-center space-y-4 p-4 lg:p-6\">\r\n            {/* <h3 class=\"text-center  text-lg font-medium\">{this.property.name}</h3> */}\r\n            <div class=\"flex w-full flex-1 items-center \">\r\n              <div class=\"w-56 rounded-md border border-gray-300 bg-white p-2 text-center text-xs\">\r\n                <p>Check-in</p>\r\n                <p class=\"text-sm font-semibold\">\r\n                  {format(booking_store.bookingAvailabilityParams?.from_date ? new Date(booking_store.bookingAvailabilityParams?.from_date) : new Date(), 'eee, dd MMM yyyy')}\r\n                </p>\r\n                <p>From {app_store.property?.time_constraints.check_in_from}</p>\r\n              </div>\r\n              <div class=\"h-[1px] w-full min-w-[50px] flex-1 bg-gray-300 \"></div>\r\n              <div class=\"w-56 rounded-md border border-gray-300 bg-white p-2 text-center text-xs\">\r\n                <p>Check-out</p>\r\n                <p class=\"text-sm font-semibold\">\r\n                  {format(booking_store.bookingAvailabilityParams?.to_date ? new Date(booking_store.bookingAvailabilityParams?.to_date) : new Date(), 'eee, dd MMM yyyy')}\r\n                </p>\r\n                <p>Before {app_store.property?.time_constraints.check_out_till}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <ir-button onButtonClick={() => this.routing.emit('booking')} label=\"Change details\" variants=\"outline-primary\" class=\"w-full\"></ir-button>\r\n            <div class={'mt-4  w-full'}>\r\n              <ul class={'w-full space-y-2'}>\r\n                <li class={'flex w-full items-center justify-between'}>\r\n                  <span>\r\n                    {total_nights} {total_nights > 1 ? 'Nights' : 'Night'}\r\n                  </span>\r\n                  <span>{formatAmount(totalAmount, app_store.userPreferences.currency_id)}</span>\r\n                </li>\r\n                {checkout_store.pickup?.location && (\r\n                  <li class={'flex w-full items-center justify-between'}>\r\n                    <span>Pickup fee</span>\r\n                    <span>{formatAmount(checkout_store.pickup.location ? Number(checkout_store.pickup.due_upon_booking) : 0, app_store.userPreferences.currency_id)}</span>\r\n                  </li>\r\n                )}\r\n                <li class={'flex w-full items-center justify-between'}>\r\n                  <span>Total</span>\r\n                  <span class=\"text-lg font-medium\">\r\n                    {formatAmount(totalAmount + (checkout_store.pickup.location ? Number(checkout_store.pickup.due_upon_booking) : 0), app_store.userPreferences.currency_id)}\r\n                  </span>\r\n                </li>\r\n                {prePaymentAmount > 0 && (\r\n                  <li class={'flex w-full items-center justify-between pt-1'}>\r\n                    <span>Pay now</span>\r\n                    <span class=\"text-base\">{formatAmount(prePaymentAmount, app_store.userPreferences.currency_id)}</span>\r\n                  </li>\r\n                )}\r\n              </ul>\r\n            </div>\r\n            <div class=\"divide-y rounded-md  border border-solid bg-white\">\r\n              {this.property?.allowed_payment_methods?.map(method => {\r\n                if (method.code === '004')\r\n                  return (\r\n                    <div class=\"flex w-full gap-4 p-4\" key={method.code}>\r\n                      <ir-radio></ir-radio>\r\n                      <div class={'flex-1 space-y-4'}>\r\n                        <fieldset>\r\n                          <ir-input placeholder=\"\" label=\"Name on card\" class=\"w-full\"></ir-input>\r\n                        </fieldset>\r\n                        <ir-credit-card-input></ir-credit-card-input>\r\n                        <div class=\"flex flex-col gap-2.5 sm:flex-row sm:items-center\">\r\n                          <fieldset class=\"w-full\">\r\n                            <ir-input type=\"text\" placeholder=\"MM/YY\" mask={this.expiry_mask} label=\"Expiration date\" class=\"w-full\" rightIcon>\r\n                              <svg slot=\"right-icon\" width=\"20\" height=\"16\" viewBox=\"0 0 20 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                                <path d=\"M0 3C0 1.34315 1.34315 0 3 0H17C18.6569 0 20 1.34315 20 3V13C20 14.6569 18.6569 16 17 16H3C1.34315 16 0 14.6569 0 13V3Z\" fill=\"#EAECF0\" />\r\n                                <path d=\"M2 8C2 7.44772 2.44772 7 3 7H17C17.5523 7 18 7.44772 18 8C18 8.55228 17.5523 9 17 9H3C2.44772 9 2 8.55228 2 8Z\" fill=\"#8B8B8B\" />\r\n                                <path d=\"M2 4C2 3.44772 2.44772 3 3 3H5C5.55228 3 6 3.44772 6 4C6 4.55228 5.55228 5 5 5H3C2.44772 5 2 4.55228 2 4Z\" fill=\"white\" />\r\n                                <path\r\n                                  d=\"M10 11C10 10.4477 10.4477 10 11 10H15C15.5523 10 16 10.4477 16 11V13C16 13.5523 15.5523 14 15 14H11C10.4477 14 10 13.5523 10 13V11Z\"\r\n                                  fill=\"#FE4F42\"\r\n                                />\r\n                                <path d=\"M11 11H15V13H11V11Z\" fill=\"#EAECF0\" />\r\n                              </svg>\r\n                            </ir-input>\r\n                          </fieldset>\r\n                          <fieldset class=\"w-full\">\r\n                            <ir-input label=\"Security code\" maxlength={4} placeholder=\"\" class=\"w-full\" rightIcon>\r\n                              <svg slot=\"right-icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                                <path\r\n                                  fill-rule=\"evenodd\"\r\n                                  clip-rule=\"evenodd\"\r\n                                  d=\"M2 7C2 6.20435 2.31607 5.44129 2.87868 4.87868C3.44129 4.31607 4.20435 4 5 4H19C19.7956 4 20.5587 4.31607 21.1213 4.87868C21.6839 5.44129 22 6.20435 22 7V8H2V7ZM2 10V17C2 17.7956 2.31607 18.5587 2.87868 19.1213C3.44129 19.6839 4.20435 20 5 20H19C19.7956 20 20.5587 19.6839 21.1213 19.1213C21.6839 18.5587 22 17.7956 22 17V10H2ZM7 12C6.73478 12 6.48043 12.1054 6.29289 12.2929C6.10536 12.4804 6 12.7348 6 13C6 13.2652 6.10536 13.5196 6.29289 13.7071C6.48043 13.8946 6.73478 14 7 14H12C12.2652 14 12.5196 13.8946 12.7071 13.7071C12.8946 13.5196 13 13.2652 13 13C13 12.7348 12.8946 12.4804 12.7071 12.2929C12.5196 12.1054 12.2652 12 12 12H7Z\"\r\n                                  fill=\"#EAECF0\"\r\n                                />\r\n                                <rect x=\"14.5\" y=\"11.5\" width=\"6\" height=\"3\" rx=\"0.5\" stroke=\"#FE4F42\" />\r\n                              </svg>\r\n                            </ir-input>\r\n                          </fieldset>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                if (method.code === '005') {\r\n                  return (\r\n                    <div class=\"flex w-full gap-4  p-4\">\r\n                      <ir-radio></ir-radio>\r\n                      <div class=\"flex-1 space-y-1.5\">\r\n                        <p>{method.description}</p>\r\n                        <p class=\"text-xs text-gray-700\">{method.data?.map(d => <span key={d.key}>{d.value}</span>)}</p>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                }\r\n              })}\r\n            </div>\r\n            <div class={'w-full'}>\r\n              <ir-checkbox label=\"I agree to the privacy policy.\"></ir-checkbox>\r\n            </div>\r\n            <ir-button isLoading={this.isLoading} size=\"md\" class=\"w-full\" label=\"CONFIRM BOOKING\" onButtonClick={this.handleBooking.bind(this)}></ir-button>\r\n          </section>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"version":3}