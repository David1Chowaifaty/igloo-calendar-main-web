{"file":"ir-menu2.js","mappings":"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","names":[],"sources":["src/components/ui/ir-menu/ir-menu.css?tag=ir-menu&encapsulation=shadow","src/components/ui/ir-menu/ir-menu.tsx"],"sourcesContent":[":host {\r\n  display: block;\r\n  position: relative;\r\n}\r\nul,\r\nli,\r\ndiv,\r\nbutton {\r\n  all: unset;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.SelectTrigger {\r\n  width: 100%;\r\n  border-radius: 0.5rem;\r\n  border: 0.0625rem solid var(--gray-300, #d0d5dd);\r\n  display: inline-flex;\r\n  align-items: center;\r\n  padding: 0.625rem 0.875rem;\r\n  justify-content: space-between;\r\n  font-size: 0.875rem;\r\n  line-height: 1;\r\n}\r\n.SelectContent {\r\n  max-height: 15.625rem;\r\n  background: white;\r\n  border-radius: 0.5rem;\r\n  z-index: 99999;\r\n  overflow-y: auto;\r\n  min-width: 10rem;\r\n  width: max-content;\r\n}\r\n.SelectContent[data-state='open'] {\r\n  padding: 0.625rem 0;\r\n  border: 0.0625rem solid var(--gray-100, #f2f4f7);\r\n  box-shadow:\r\n    0 1rem 0.75rem -0.25rem rgba(16, 24, 40, 0.08),\r\n    0 0.375rem 0.25rem -0.125rem rgba(16, 24, 40, 0.03);\r\n  animation: fadeIn 300ms cubic-bezier(0.25, 0.8, 0.25, 1);\r\n}\r\n.menu-item {\r\n  line-height: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  padding: 0.625rem 1rem;\r\n  width: 100%;\r\n  cursor: pointer;\r\n  font-size: 0.875rem;\r\n  color: var(--gray-700, #344054);\r\n  line-height: 1.25rem;\r\n}\r\n\r\n.menu-item[data-highlighted='true'] {\r\n  background-color: var(--gray-50, #f9fafb);\r\n  color: var(--gray-900, #101828);\r\n}\r\n.menu-item[data-disabled] {\r\n  color: var(--gray-300, #d0d5dd);\r\n}\r\n@keyframes fadeIn {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n@keyframes fadeOut {\r\n  from {\r\n    opacity: 1;\r\n  }\r\n  to {\r\n    opacity: 0;\r\n  }\r\n}\r\n","import { createPopper } from '@popperjs/core';\r\nimport { Component, h, Prop, State, Element, EventEmitter, Event, Listen, Fragment } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-menu',\r\n  styleUrl: 'ir-menu.css',\r\n  shadow: true,\r\n})\r\nexport class IrMenu {\r\n  @Prop({ reflect: true }) data: IItems[] = [];\r\n  @Prop({ reflect: true }) menuItem: string = 'Toggle Menu';\r\n\r\n  @State() isDropdownVisible: boolean = false;\r\n  @State() searchQuery: string = '';\r\n  @State() selectedItemName: string = '';\r\n  @State() currentHighlightedIndex: number = -1;\r\n  @State() usingKeyboard: boolean = false;\r\n\r\n  @Element() el: HTMLElement;\r\n\r\n  @Event({ bubbles: true, composed: true }) menuItemClick: EventEmitter<string | number>;\r\n\r\n  private buttonRef: HTMLButtonElement;\r\n  private listRef: HTMLUListElement;\r\n  private popoverInstance: any;\r\n  private contentElement: HTMLDivElement;\r\n  componentWillLoad() {\r\n    this.selectedItemName = this.data[0].item ?? '';\r\n  }\r\n  @Listen('keydown', { target: 'body' })\r\n  handleKeyDown(event: KeyboardEvent) {\r\n    if (!this.isDropdownVisible) {\r\n      return;\r\n    }\r\n    switch (event.key) {\r\n      case 'ArrowDown':\r\n        event.preventDefault();\r\n        this.moveHighlight(1);\r\n        break;\r\n      case 'ArrowUp':\r\n        event.preventDefault();\r\n        this.moveHighlight(-1);\r\n        break;\r\n      case 'Enter':\r\n        event.preventDefault();\r\n        if (this.currentHighlightedIndex !== -1) {\r\n          this.selectItem(this.currentHighlightedIndex);\r\n        }\r\n        break;\r\n      case 'Escape':\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        event.stopImmediatePropagation();\r\n        this.closeDropdown();\r\n        break;\r\n      case 'Tab':\r\n        this.closeDropdown();\r\n        break;\r\n    }\r\n  }\r\n  componentDidLoad() {\r\n    this.popoverInstance = createPopper(this.buttonRef, this.contentElement, {\r\n      placement: 'bottom-end',\r\n      strategy: 'fixed',\r\n      modifiers: [\r\n        {\r\n          name: 'offset',\r\n          options: {\r\n            offset: [0, 4],\r\n          },\r\n        },\r\n        {\r\n          name: 'preventOverflow',\r\n          options: {\r\n            boundary: 'viewport',\r\n            padding: 10,\r\n          },\r\n        },\r\n      ],\r\n    });\r\n  }\r\n  @Listen('click', { target: 'document' })\r\n  handleDocumentClick(event: MouseEvent) {\r\n    // const target = event.target as HTMLElement;\r\n    // if (!this.el.contains(target)) {\r\n    //   this.isDropdownVisible = false;\r\n    // }\r\n    const outsideClick = typeof event.composedPath === 'function' && !event.composedPath().includes(this.el);\r\n    if (outsideClick && this.isDropdownVisible) {\r\n      this.isDropdownVisible = false;\r\n    }\r\n  }\r\n  @Listen('mousemove')\r\n  handleMouseMove() {\r\n    if (this.usingKeyboard) this.disableKeyboardPriority();\r\n  }\r\n  moveHighlight(delta: number) {\r\n    let newIndex = this.currentHighlightedIndex;\r\n    do {\r\n      newIndex = (newIndex + delta + this.data.length) % this.data.length;\r\n    } while (this.data[newIndex].disabled);\r\n    this.currentHighlightedIndex = newIndex;\r\n    this.scrollToItem(newIndex);\r\n  }\r\n\r\n  selectItem(index: number) {\r\n    const item = this.data[index];\r\n    if (item && !item.disabled) {\r\n      this.selectedItemName = item.item;\r\n      console.log(item);\r\n      this.menuItemClick.emit(item.id);\r\n      this.closeDropdown();\r\n    }\r\n  }\r\n\r\n  closeDropdown() {\r\n    this.isDropdownVisible = false;\r\n    this.buttonRef.focus();\r\n  }\r\n\r\n  toggleDropdown() {\r\n    this.isDropdownVisible = !this.isDropdownVisible;\r\n    console.log(this.isDropdownVisible)\r\n    if (this.isDropdownVisible) {\r\n      this.currentHighlightedIndex = -1;\r\n      this.adjustPopoverPlacement();\r\n    }\r\n  }\r\n  adjustPopoverPlacement() {\r\n    requestAnimationFrame(() => {\r\n      const rect = this.contentElement.getBoundingClientRect();\r\n      if (rect.bottom > window.innerHeight) {\r\n        this.popoverInstance.setOptions({\r\n          placement: 'top-end',\r\n        });\r\n      } else if (rect.top < 0) {\r\n        this.popoverInstance.setOptions({\r\n          placement: 'bottom-end',\r\n        });\r\n      }\r\n      this.popoverInstance.update();\r\n    });\r\n  }\r\n  scrollToItem(index: number) {\r\n    const item = this.listRef?.querySelector(`li:nth-of-type(${index + 1})`) as HTMLLIElement;\r\n    item?.scrollIntoView({ block: 'center' });\r\n  }\r\n  disableKeyboardPriority() {\r\n    this.usingKeyboard = false;\r\n  }\r\n  disconnectedCallback() {\r\n    if (this.popoverInstance) {\r\n      this.popoverInstance.destroy();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <button ref={el => (this.buttonRef = el)}  type=\"button\" aria-haspopup=\"listbox\" aria-expanded={this.isDropdownVisible?\"true\":\"false\"}\r\n          onClick={() => {\r\n           this.toggleDropdown()\r\n        }}>\r\n          <slot name=\"menu-trigger\">\r\n            <div class=\"SelectTrigger\">\r\n              {this.selectedItemName || this.menuItem}\r\n              <svg width=\"15\" height=\"15\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path\r\n                  d=\"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z\"\r\n                  fill=\"currentColor\"\r\n                  fill-rule=\"evenodd\"\r\n                  clip-rule=\"evenodd\"\r\n                ></path>\r\n              </svg>\r\n            </div>\r\n          </slot>\r\n          \r\n        </button>\r\n        <div ref={el => (this.contentElement = el)} class=\"SelectContent\" data-state={this.isDropdownVisible ? 'open' : 'closed'}>\r\n          {this.isDropdownVisible && (\r\n            <ul role=\"menu\" ref={el => (this.listRef = el as HTMLUListElement)} tabindex=\"-1\">\r\n              {this.data.map((item, index) => (\r\n                <li\r\n                  data-disabled={item.disabled}\r\n                  data-state={this.currentHighlightedIndex === index ? 'checked' : 'unchecked'}\r\n                  data-highlighted={this.currentHighlightedIndex === index ? 'true' : 'false'}\r\n                  class={'menu-item'}\r\n                  tabindex={-1}\r\n                  role=\"menuitem\"\r\n                  aria-disabled={item.disabled ? 'true' : 'false'}\r\n                  aria-selected={this.selectedItemName === item.item ? 'true' : 'false'}\r\n                  onClick={() => {\r\n                    this.selectItem(index);\r\n                    this.disableKeyboardPriority();\r\n                  }}\r\n                  onMouseOver={() => {\r\n                    if (item.disabled) {\r\n                      return;\r\n                    }\r\n                    this.currentHighlightedIndex = index;\r\n                  }}\r\n                >\r\n                  {item.item}\r\n                  {this.selectedItemName === item.item && (\r\n                    <svg width=\"20\" height=\"20\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                      <path\r\n                        d=\"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z\"\r\n                        fill=\"var(--brand-600)\"\r\n                        fill-rule=\"evenodd\"\r\n                        clip-rule=\"evenodd\"\r\n                      ></path>\r\n                    </svg>\r\n                  )}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n"],"version":3}