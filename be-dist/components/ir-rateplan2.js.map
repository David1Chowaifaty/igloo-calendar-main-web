{"file":"ir-rateplan2.js","mappings":"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","names":[],"sources":["src/components/ir-booking-engine/ir-booking-page/ir-rateplan/ir-rateplan.css?tag=ir-rateplan&encapsulation=shadow","src/components/ir-booking-engine/ir-booking-page/ir-rateplan/ir-rateplan.tsx"],"sourcesContent":[".rateplan-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  background-color: #f3f4f6;\r\n  padding: 0.5rem;\r\n  font-size: 0.875rem;\r\n  border-radius: 0.375rem;\r\n  gap: 0.25rem;\r\n  margin: 0.5rem 0;\r\n}\r\n\r\n.rateplan-header {\r\n  display: flex;\r\n  width: 100%;\r\n  justify-content: space-between;\r\n}\r\n\r\n.rateplan-header-no-custom-text {\r\n  grid-column: span 2;\r\n}\r\n.rateplan-pricing {\r\n  display: none;\r\n}\r\n\r\n.rateplan-name {\r\n  display: flex;\r\n  flex-direction: column;\r\n  font-weight: 600;\r\n  overflow: hidden;\r\n  display: -webkit-box;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-line-clamp: 3;\r\n}\r\n\r\n.rateplan-short-name {\r\n  font-size: 1rem;\r\n}\r\n\r\n.rateplan-custom-text-hidden {\r\n  display: none;\r\n  font-size: 0.875rem;\r\n  color: #64748b;\r\n}\r\n\r\n.rateplan-pricing-mobile {\r\n  display: flex;\r\n  gap: 0.25rem;\r\n}\r\n\r\n.rateplan-amount {\r\n  font-weight: 500;\r\n}\r\n\r\n.rateplan-discounted-amount {\r\n  font-weight: 500;\r\n  color: #ef4444;\r\n  text-decoration: line-through;\r\n}\r\n\r\n.rateplan-custom-text-mobile {\r\n  display: none;\r\n  font-size: 0.75rem;\r\n  color: #64748b;\r\n}\r\n\r\n.rateplan-details {\r\n  display: flex;\r\n  flex-direction: row;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.rateplan-details-no-custom-text {\r\n  grid-column: span 5;\r\n}\r\n\r\n.rateplan-travelers {\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex: 1 1 0%;\r\n}\r\n\r\n.rateplan-select-travelers {\r\n  width: 100%;\r\n  flex: 1 1 0%;\r\n}\r\n.rateplan-select-rooms {\r\n  flex: 1 1 0%;\r\n}\r\n\r\n.rateplan-cancellation {\r\n  margin-top: 0.125rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.25rem;\r\n  margin-left: 1.3rem;\r\n  margin-right: 1.3rem;\r\n}\r\n\r\n.rateplan-cancellation-text {\r\n  font-size: 0.75rem;\r\n}\r\n\r\n.rateplan-tooltip {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #98a2b3;\r\n}\r\n\r\n.rateplan-pricing {\r\n  display: none;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.rateplan-discount {\r\n  font-weight: 500;\r\n  color: #ef4444;\r\n}\r\n\r\n.rateplan-final-pricing {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.rateplan-amount-per-night {\r\n  font-size: 0.75rem; /* Equivalent to Tailwind's text-xs */\r\n  font-weight: 500; /* Equivalent to Tailwind's font-medium */\r\n}\r\n\r\n.rateplan-select-rooms {\r\n  width: 100%;\r\n}\r\n.rateplan-custom-text {\r\n  font-size: 0.75rem;\r\n}\r\n.rateplan-cancellation,\r\n.rateplan-pricing,\r\n.rateplan-final-pricing {\r\n  display: none;\r\n}\r\n/* Media Query for medium and larger screens */\r\n@media (min-width: 768px) {\r\n  .rateplan-cancellation,\r\n  .rateplan-pricing,\r\n  .rateplan-final-pricing {\r\n    display: flex;\r\n  }\r\n  .rateplan-custom-text-hidden {\r\n    display: inline;\r\n  }\r\n\r\n  .rateplan-custom-text-mobile {\r\n    display: none;\r\n  }\r\n\r\n  .rateplan-details {\r\n    flex-direction: row;\r\n    width: 100%;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    gap: 1rem; /* Equivalent to Tailwind's gap-4 */\r\n  }\r\n\r\n  .rateplan-select-travelers {\r\n    width: auto;\r\n  }\r\n\r\n  .rateplan-select-rooms {\r\n    width: auto;\r\n  }\r\n\r\n  .rateplan-pricing-mobile {\r\n    display: none;\r\n  }\r\n\r\n  .rateplan-pricing,\r\n  .rateplan-final-pricing {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n  }\r\n}\r\n.rateplan-custom-text {\r\n  margin-left: 4px;\r\n}\r\n@media (min-width: 1024px) {\r\n  .rateplan-container {\r\n    display: grid;\r\n    grid-template-columns: repeat(7, 1fr);\r\n    gap: 1rem;\r\n  }\r\n\r\n  .rateplan-header {\r\n    display: flex;\r\n    gap: 4px;\r\n    grid-column: span 2;\r\n  }\r\n\r\n  .rateplan-header-no-custom-text {\r\n    grid-column: span 2;\r\n  }\r\n\r\n  .rateplan-details {\r\n    grid-column: span 5;\r\n  }\r\n\r\n  .rateplan-details-no-custom-text {\r\n    grid-column: span 5;\r\n  }\r\n\r\n  .rateplan-travelers {\r\n    grid-column: span 2;\r\n  }\r\n\r\n  .rateplan-cancellation {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 0.25rem; /* Equivalent to Tailwind's gap-1 */\r\n  }\r\n\r\n  .rateplan-pricing,\r\n  .rateplan-final-pricing {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n  }\r\n}\r\n\r\n/* Media Query for extra-large screens */\r\n@media (min-width: 1280px) {\r\n  .rateplan-container {\r\n    display: grid;\r\n    grid-template-columns: repeat(7, 1fr);\r\n    gap: 1rem;\r\n  }\r\n\r\n  .rateplan-details {\r\n    grid-column: span 5;\r\n  }\r\n\r\n  .rateplan-details-no-custom-text {\r\n    grid-column: span 5;\r\n  }\r\n\r\n  .rateplan-travelers {\r\n    grid-column: span 2;\r\n  }\r\n\r\n  .rateplan-cancellation {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 0.25rem;\r\n  }\r\n\r\n  .rateplan-pricing,\r\n  .rateplan-final-pricing {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n  }\r\n}\r\n","import { Component, Event, EventEmitter, Prop, h } from '@stencil/core';\r\nimport { RatePlan, Variation } from '@/models/property';\r\nimport app_store from '@/stores/app.store';\r\nimport { IRatePlanSelection, reserveRooms, updateRoomParams } from '@/stores/booking';\r\nimport { formatAmount } from '@/utils/utils';\r\nimport localizedWords from '@/stores/localization.store';\r\n\r\n@Component({\r\n  tag: 'ir-rateplan',\r\n  styleUrl: 'ir-rateplan.css',\r\n  shadow: true,\r\n})\r\nexport class IrRateplan {\r\n  @Prop() ratePlan: RatePlan;\r\n  @Prop() visibleInventory?:\r\n    | IRatePlanSelection\r\n    | {\r\n        reserved: number;\r\n        visibleInventory?: number;\r\n        selected_variation: any;\r\n      };\r\n  @Prop() roomTypeInventory: number;\r\n  @Prop() roomTypeId: number;\r\n\r\n  @Event() animateBookingButton: EventEmitter<null>;\r\n\r\n  handleVariationChange(e: CustomEvent, variations: Variation[], rateplanId: number, roomTypeId: number) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    const value = e.detail;\r\n    const selectedVariation = variations.find(v => (v.adult_nbr + v.child_nbr).toString() === value);\r\n    console.log(selectedVariation);\r\n    if (!selectedVariation) {\r\n      return;\r\n    }\r\n    updateRoomParams({ params: { selected_variation: selectedVariation }, ratePlanId: rateplanId, roomTypeId });\r\n  }\r\n  render() {\r\n    return (\r\n      <div class=\"rateplan-container\">\r\n        <div class=\"rateplan-header\">\r\n          <p class=\"rateplan-name\">\r\n            <span class=\"rateplan-short-name\">{this.ratePlan.short_name}</span>\r\n            <span class=\"rateplan-custom-text rateplan-custom-text-hidden\">{this.ratePlan.custom_text}</span>\r\n          </p>\r\n          <div class=\"rateplan-pricing-mobile\">\r\n            <p class=\"rateplan-amount\">{formatAmount(this.visibleInventory?.selected_variation?.amount, app_store.userPreferences.currency_id)}</p>\r\n            <p class=\"rateplan-discounted-amount\">{formatAmount(this.visibleInventory?.selected_variation?.total_before_discount, app_store.userPreferences.currency_id)}</p>\r\n          </div>\r\n        </div>\r\n\r\n        <p class=\"rateplan-custom-text rateplan-custom-text-mobile\">{this.ratePlan.custom_text}</p>\r\n\r\n        <div class={`rateplan-details ${this.ratePlan.custom_text ? 'rateplan-details-no-custom-text' : ''}`}>\r\n          <div class=\"rateplan-travelers\">\r\n            <ir-select\r\n              class=\"rateplan-select-travelers\"\r\n              label=\"Travelers\"\r\n              value={(this.visibleInventory?.selected_variation?.adult_nbr + this.visibleInventory?.selected_variation?.child_nbr).toString()}\r\n              onValueChange={e => {\r\n                this.handleVariationChange(e, this.ratePlan.variations, this.ratePlan.id, this.roomTypeId);\r\n              }}\r\n              data={this.ratePlan.variations.map(v => ({\r\n                id: (v.adult_nbr + v.child_nbr).toString(),\r\n                value: v.adult_child_offering,\r\n              }))}\r\n            ></ir-select>\r\n            <div class=\"rateplan-cancellation \">\r\n              <p class=\"rateplan-cancellation-text\">If I cancel?</p>\r\n              <ir-tooltip class=\"rateplan-tooltip\" message={this.ratePlan.cancelation + '<br>' + this.ratePlan.guarantee}></ir-tooltip>\r\n            </div>\r\n          </div>\r\n          <div class=\"rateplan-pricing\">\r\n            <p class=\"rateplan-discounted-amount\">{formatAmount(this.visibleInventory?.selected_variation?.total_before_discount, app_store.userPreferences.currency_id)}</p>\r\n            <p class=\"rateplan-discount\">{`-${this.visibleInventory?.selected_variation?.discount_pct}%`}</p>\r\n          </div>\r\n          <div class=\"rateplan-final-pricing\">\r\n            <p class=\"rateplan-amount\">{formatAmount(this.visibleInventory?.selected_variation?.amount, app_store.userPreferences.currency_id)}</p>\r\n            <p class=\"rateplan-amount-per-night\">{`${formatAmount(this.visibleInventory?.selected_variation?.amount_per_night, app_store.userPreferences.currency_id)}/${localizedWords.entries.Lcz_night}`}</p>\r\n          </div>\r\n\r\n          <ir-select\r\n            onValueChange={e => {\r\n              reserveRooms(this.roomTypeId, this.ratePlan.id, Number(e.detail));\r\n              this.animateBookingButton.emit(null);\r\n            }}\r\n            label={localizedWords.entries.Lcz_Rooms}\r\n            value={this.visibleInventory?.reserved}\r\n            class=\"rateplan-select-rooms\"\r\n            data={[...new Array(this.roomTypeInventory + 1)]?.map((_, i) => ({\r\n              id: i,\r\n              value:\r\n                i === 0\r\n                  ? 'Select...'\r\n                  : `${i}&nbsp;&nbsp;&nbsp;${i === 0 ? '' : formatAmount(this.visibleInventory?.selected_variation?.amount * i, app_store.userPreferences.currency_id)}`,\r\n              disabled: i >= this.visibleInventory?.visibleInventory + 1,\r\n              html: true,\r\n            }))}\r\n          ></ir-select>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"version":3}