{"file":"ir-invoice2.js","mappings":"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","names":["format"],"sources":["src/components/ir-invoice/ir-invoice.css?tag=ir-invoice&encapsulation=scoped","src/components/ir-invoice/ir-invoice.tsx"],"sourcesContent":["@import url('../ui/ir-button/ir-button.css');\r\n:host {\r\n  display: block;\r\n}\r\n\r\n.booking-info {\r\n  border-bottom: 1px solid var(--gray-300, hsl(217, 16%, 84%));\r\n}\r\n\r\n.booking-info-text,\r\n.room-info-text {\r\n  font-size: 0.875rem;\r\n  font-weight: 500;\r\n  color: var(--gray-800, hsl(214, 33%, 17%));\r\n}\r\n\r\n.booking-info-text span,\r\n.room-info-text span {\r\n  font-weight: 400;\r\n  color: var(--gray-600, hsl(218, 24%, 27%));\r\n}\r\n\r\nsection,\r\n.room-info {\r\n  padding: 1rem 0;\r\n}\r\n\r\n.booking-details-header {\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n}\r\n\r\n.room-type {\r\n  font-size: 1rem;\r\n  font-weight: 600;\r\n  margin-bottom: 0.3rem;\r\n}\r\n\r\np {\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.total-payment {\r\n  font-size: 1rem;\r\n}\r\n\r\n.mapLink {\r\n  background: #000;\r\n  position: relative;\r\n  width: 100%;\r\n  overflow: hidden; /* This ensures no part of the image spills out */\r\n}\r\n\r\n.mapLink img {\r\n  object-fit: cover;\r\n}\r\n\r\n.mapLink:hover img {\r\n  filter: brightness(0.9);\r\n}\r\n\r\n.property_info {\r\n  display: none;\r\n  background-color: hsl(220, 14%, 96%);\r\n  border-radius: min(var(--radius, 0.5rem), 1rem);\r\n  height: fit-content;\r\n  width: 800px;\r\n}\r\n\r\n.property_img {\r\n  border-top-left-radius: min(var(--radius, 0.5rem), 1rem);\r\n  border-top-right-radius: min(var(--radius, 0.5rem), 1rem);\r\n}\r\n.contact-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.25rem;\r\n  font-size: 0.875rem;\r\n  padding: 1rem;\r\n  justify-content: center;\r\n}\r\n\r\n.contact-link {\r\n  color: inherit;\r\n  text-decoration: none;\r\n  transition: color 0.2s;\r\n}\r\n\r\n.contact-link:hover {\r\n  color: #334155;\r\n  text-decoration: underline;\r\n}\r\na:hover {\r\n  text-decoration: none;\r\n}\r\n@media (min-width: 768px) {\r\n  .mapLink img {\r\n    height: 200px;\r\n    aspect-ratio: 16/9;\r\n  }\r\n\r\n  .property_info {\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n}\r\n","import { Component, Host, Prop, State, Watch, h } from '@stencil/core';\r\nimport { format } from 'date-fns';\r\nimport { cn, formatAmount, getDateDifference } from '@/utils/utils';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport app_store from '@/stores/app.store';\r\nimport { Booking } from '@/models/booking.dto';\r\nimport { PropertyService } from '@/services/api/property.service';\r\nimport { CommonService } from '@/services/api/common.service';\r\nimport axios from 'axios';\r\nimport { AuthService } from '@/services/api/auth.service';\r\nimport { PaymentService } from '@/services/api/payment.service';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\n\r\n@Component({\r\n  tag: 'ir-invoice',\r\n  styleUrl: 'ir-invoice.css',\r\n  scoped: true,\r\n})\r\nexport class IrInvoice {\r\n  @Prop({ mutable: true }) email: string;\r\n  @Prop() propertyId: number;\r\n  @Prop() baseUrl: string;\r\n  @Prop() language: string = 'en';\r\n  @Prop() bookingNbr: string;\r\n  @Prop() status: 0 | 1 = 1;\r\n  @Prop() perma_link: string = null;\r\n  @Prop() aName: string = null;\r\n\r\n  @State() booking: Booking;\r\n  @State() token: string;\r\n\r\n  private propertyService = new PropertyService();\r\n  private commonService = new CommonService();\r\n  private authService = new AuthService();\r\n  private paymentService = new PaymentService();\r\n  alertDialog: HTMLIrAlertDialogElement;\r\n\r\n  async componentWillLoad() {\r\n    if (!this.baseUrl) {\r\n      throw new Error('Missing base url');\r\n    }\r\n    axios.defaults.baseURL = this.baseUrl;\r\n    axios.defaults.withCredentials = true;\r\n    if (!this.token) {\r\n      this.token = await this.commonService.getBEToken();\r\n    }\r\n    this.init();\r\n    this.fetchData();\r\n  }\r\n  // @Watch('token')\r\n  // handleTokenChange() {\r\n  //   this.init();\r\n  // }\r\n  @Watch('bookingNbr')\r\n  async handleBookingNumberChange(newValue, oldValue) {\r\n    if (newValue !== oldValue) {\r\n      this.booking = await this.propertyService.getExposedBooking({ booking_nbr: this.bookingNbr, language: this.language });\r\n    }\r\n  }\r\n  async init() {\r\n    this.propertyService.setToken(this.token);\r\n    this.commonService.setToken(this.token);\r\n    this.authService.setToken(this.token);\r\n    this.paymentService.setToken(this.token);\r\n  }\r\n  async fetchData() {\r\n    this.token = await this.authService.login({ option: 'direct', params: { email: this.email, booking_nbr: this.bookingNbr } }, true);\r\n    this.init();\r\n    const [booking] = await Promise.all([\r\n      this.propertyService.getExposedBooking({ booking_nbr: this.bookingNbr, language: this.language }, false),\r\n      this.commonService.getExposedLanguage(),\r\n      this.propertyService.getExposedProperty({\r\n        id: this.propertyId,\r\n        language: this.language,\r\n        aname: this.aName,\r\n        perma_link: this.perma_link,\r\n      }),\r\n    ]);\r\n    this.booking = booking;\r\n  }\r\n\r\n  renderBookingDetailHeader() {\r\n    const total_nights = getDateDifference(new Date(this.booking.from_date), new Date(this.booking.to_date));\r\n    const nbr_of_persons = this.booking.occupancy.adult_nbr + this.booking.occupancy.children_nbr;\r\n    const total_rooms = this.booking.rooms.length;\r\n    return `${total_nights} ${total_nights > 1 ? localizedWords.entries.Lcz_Nights : localizedWords.entries.Lcz_night} - ${nbr_of_persons}\r\n    ${nbr_of_persons > 1 ? localizedWords.entries.Lcz_Persons : localizedWords.entries.Lcz_Person} - ${total_rooms}\r\n    ${total_rooms > 1 ? localizedWords.entries.Lcz_Rooms : localizedWords.entries.Lcz_Room}`;\r\n  }\r\n  getPropertyEmail() {\r\n    const { email } = app_store.property?.contacts?.find(c => c.type === 'booking');\r\n    if (!email) {\r\n      return null;\r\n    }\r\n    const subject = `Ref Booking#${this.bookingNbr}`;\r\n    const encodedSubject = encodeURIComponent(subject);\r\n    return `mailto:${email}?subject=${encodedSubject}`;\r\n  }\r\n\r\n  render() {\r\n    if (!this.booking) {\r\n      return null;\r\n    }\r\n    const google_maps_url = `http://maps.google.com/maps?q=${app_store.property.location.latitude},${app_store.property.location.longitude}`;\r\n    return (\r\n      <Host>\r\n        <ir-interceptor></ir-interceptor>\r\n        <main class=\"relative flex w-full flex-col space-y-5\">\r\n          <section class=\"sticky top-0 z-50 m-0  w-full  p-0\">\r\n            <ir-nav class={'m-0 p-0'} showBookingCode={false} website={app_store.property?.space_theme.website} logo={app_store.property?.space_theme?.logo}></ir-nav>\r\n          </section>\r\n          <section class=\"flex-1 px-4 lg:px-6\">\r\n            <div class=\"mx-auto flex max-w-6xl gap-16\">\r\n              <div class=\"invoice-container\">\r\n                <section class=\"flex items-center gap-4\">\r\n                  {this.status === 1 ? (\r\n                    <a href={google_maps_url} target=\"_blank\" class={cn(`button-outline`, 'flex items-center justify-center')} data-size=\"sm\">\r\n                      {localizedWords.entries.Lcz_GetDirections}\r\n                    </a>\r\n                  ) : (\r\n                    <ir-button variants=\"outline\" label=\"Retry Payment\"></ir-button>\r\n                  )}\r\n                  <a href={this.getPropertyEmail()} target=\"_blank\" class={cn(`button-outline`, 'flex items-center justify-center')} data-size=\"sm\">\r\n                    Message property\r\n                  </a>\r\n                  <ir-button\r\n                    variants=\"outline\"\r\n                    label={localizedWords.entries.Lcz_CancelBooking}\r\n                    onButtonClick={() => {\r\n                      this.alertDialog.openModal();\r\n                    }}\r\n                  ></ir-button>\r\n                </section>\r\n                <section class=\"booking-info\">\r\n                  <p class=\"booking-info-text\">\r\n                    {localizedWords.entries.Lcz_BookingPreference} <span>{this.booking.booking_nbr}</span>\r\n                  </p>\r\n                  <p class=\"booking-info-text\">\r\n                    {localizedWords.entries.Lcz_BookedBy}:{' '}\r\n                    <span>\r\n                      {this.booking.guest.first_name} {this.booking.guest.last_name}\r\n                    </span>\r\n                  </p>\r\n                  <p class=\"booking-info-text\">\r\n                    {localizedWords.entries.Lcz_CheckIn}: <span>{format(this.booking.from_date, 'eee, dd MMM yyyy')} </span>\r\n                    <span>\r\n                      {localizedWords.entries.Lcz_From} {app_store.property?.time_constraints.check_in_from}\r\n                    </span>\r\n                  </p>\r\n                  <p class=\"booking-info-text\">\r\n                    {localizedWords.entries.Lcz_CheckOut}: <span>{format(this.booking.to_date, 'eee, dd MMM yyyy')} </span>\r\n                    <span>\r\n                      {localizedWords.entries.Lcz_Before} {app_store.property?.time_constraints.check_out_till}\r\n                    </span>\r\n                  </p>\r\n                  <p class=\"booking-info-text\">\r\n                    {localizedWords.entries.Lcz_ArrivalTime} <span>{this.booking.arrival.description}</span>\r\n                  </p>\r\n                  {this.booking.remark && (\r\n                    <p class=\"booking-info-text\">\r\n                      Special request: <span>{this.booking.remark}</span>\r\n                    </p>\r\n                  )}\r\n                </section>\r\n                <section class=\"booking-details space-y-2\">\r\n                  <div class=\"flex flex-wrap items-center justify-between gap-1 text-center md:text-right\">\r\n                    <div class=\"flex items-center gap-4\">\r\n                      <ir-icons name=\"bed\"></ir-icons>\r\n                      <h3 class=\"booking-details-header\">{this.renderBookingDetailHeader()}</h3>\r\n                    </div>\r\n                    <p>{app_store.property?.tax_statement}</p>\r\n                  </div>\r\n                  <div>\r\n                    {this.booking.rooms?.map(room => (\r\n                      <div class=\"room-info\" key={room.identifier}>\r\n                        <div class=\"flex w-full items-center justify-between\">\r\n                          <h4 class=\"room-type\">{room.roomtype.name}</h4>\r\n                          <p class=\"text-lg font-medium text-green-500\"> {formatAmount(room.gross_total, this.booking.currency.code)}</p>\r\n                        </div>\r\n                        <p class=\"room-info-text\">\r\n                          {localizedWords.entries.Lcz_GuestName}{' '}\r\n                          <span>\r\n                            {room.guest.first_name} {room.guest.last_name} ({room.rateplan.selected_variation.adult_child_offering})\r\n                          </span>\r\n                        </p>\r\n                        <p class=\"room-info-text\">\r\n                          {localizedWords.entries.Lcz_MealPlan}{' '}\r\n                          <span>\r\n                            {room.rateplan.name}\r\n                            {/* <span>{\"- Non-smoking\"}</span> */}\r\n                          </span>\r\n                        </p>\r\n                        <p class=\"room-info-text\" innerHTML={room.rateplan.cancelation}></p>\r\n                        <p class=\"room-info-text\" innerHTML={room.rateplan.guarantee}></p>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </section>\r\n                <section class=\"space-y-2\">\r\n                  <div class={'flex items-center gap-4'}>\r\n                    <ir-icons name=\"credit_card\"></ir-icons>\r\n                    <h3>{localizedWords.entries.Lcz_PaymentDetails}</h3>\r\n                  </div>\r\n                  <p class=\"total-payment\">\r\n                    {localizedWords.entries.Lcz_Total} <span class=\"text-green-500\">{formatAmount(this.booking.financial.gross_total, this.booking.currency.code)}</span>\r\n                  </p>\r\n                </section>\r\n                <section class=\"space-y-2\">\r\n                  <div class=\"flex items-center gap-4\">\r\n                    <ir-icons name=\"danger\"></ir-icons>\r\n                    <h3>{localizedWords.entries.Lcz_ImportantInformation}</h3>\r\n                  </div>\r\n                  <p>{app_store.property.description.important_info}</p>\r\n                </section>\r\n                <section class={'space-y-2'}>\r\n                  <div class=\"flex items-center gap-4\">\r\n                    <ir-icons name=\"car\"></ir-icons>\r\n                    <p>\r\n                      {app_store.property?.parking_offering.title} {localizedWords.entries.Lcz_At}{' '}\r\n                      {formatAmount(app_store.property?.parking_offering.pricing, app_store.userPreferences.currency_id)}\r\n                    </p>\r\n                  </div>\r\n                  <div class=\"flex items-center gap-4\">\r\n                    <ir-icons name=\"pets\"></ir-icons>\r\n                    <p>{app_store.property?.pets_acceptance.title}</p>\r\n                  </div>\r\n                  <div class=\"flex items-center gap-4 \">\r\n                    <ir-icons name=\"bed\"></ir-icons>\r\n                    <p>{app_store.property?.baby_cot_offering.title}</p>\r\n                  </div>\r\n                </section>\r\n              </div>\r\n              <div class=\"property_info sticky top-[20%]\">\r\n                {app_store.property?.space_theme.background_image && (\r\n                  <div class=\"lg:aspect9-[16/9] aspect-[1/1] max-h-32 w-full\">\r\n                    <img class=\"property_img h-full w-full object-cover\" src={app_store.property?.space_theme.background_image} alt=\"\" />\r\n                  </div>\r\n                )}\r\n                <a class=\"mapLink\" target=\"_blank\" href={google_maps_url}>\r\n                  <img\r\n                    src={`https://maps.googleapis.com/maps/api/staticmap?center=${app_store.property?.location.latitude || 34.022},${app_store.property?.location.longitude || 35.628}&zoom=15&size=1024x768&maptype=roadmap&markers=color:red%7Clabel:${app_store.property.name}%7C34.022,35.628&key=AIzaSyCrNcuQfXO55D0I5CLaWAx7U6pBCvru8rk`}\r\n                    loading=\"lazy\"\r\n                  ></img>\r\n                </a>\r\n                <div class=\"contact-info\">\r\n                  <span>\r\n                    <label class=\"m-0 p-0\" htmlFor=\"phone\">\r\n                      {localizedWords.entries.Lcz_Phone}\r\n                    </label>\r\n                  </span>\r\n                  <a id=\"phone\" class=\"contact-link p-0\" href={`tel:${app_store.property?.phone}`}>\r\n                    {app_store.property?.country?.phone_prefix || ''} {app_store.property?.phone}\r\n                  </a>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n          <ir-footer></ir-footer>\r\n          <ir-alert-dialog ref={el => (this.alertDialog = el)}>\r\n            <h2 slot=\"modal-title\">Are you sure?</h2>\r\n            <p slot=\"modal-body\" class=\"pt-2\">\r\n              Please be aware that once you cancel your booking, this action cannot be reversed.\r\n            </p>\r\n            <div slot=\"modal-footer\">\r\n              <ir-button\r\n                label=\"Cancel\"\r\n                variants=\"outline\"\r\n                onButtonClick={() => {\r\n                  this.alertDialog.closeModal();\r\n                }}\r\n              ></ir-button>\r\n              <ir-button\r\n                label=\"Confirm\"\r\n                isLoading={isRequestPending('/Request_Booking_Cancelation')}\r\n                onButtonClick={async () => {\r\n                  await this.paymentService.RequestBookingCancelation(this.bookingNbr);\r\n                  this.alertDialog.closeModal();\r\n                }}\r\n              ></ir-button>\r\n            </div>\r\n          </ir-alert-dialog>\r\n        </main>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"version":3}