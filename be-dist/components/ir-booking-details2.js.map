{"file":"ir-booking-details2.js","mappings":"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","names":[],"sources":["src/components/ir-booking-engine/ir-checkout-page/ir-booking-details/ir-booking-details.css?tag=ir-booking-details&encapsulation=shadow","src/components/ir-booking-engine/ir-checkout-page/ir-booking-details/ir-booking-details.tsx"],"sourcesContent":["/* Styles for the ir-booking-details component */\r\n@import url('../../../gloabls.css');\r\n.container {\r\n  width: 100%;\r\n}\r\n\r\n.section-header {\r\n  margin-bottom: 20px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-wrap: wrap;\r\n  align-items: center;\r\n  gap: 8px;\r\n  border-radius: 6px;\r\n  background-color: #f3f4f6;\r\n  padding: 10px 16px;\r\n}\r\n\r\n.section-header-row {\r\n  display: flex;\r\n  flex: 1;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.section-header-text {\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.section-header-note {\r\n  text-align: right;\r\n  font-size: 0.75rem;\r\n  color: #6b7280;\r\n}\r\n\r\n.section-content {\r\n  margin-top: 24px;\r\n  margin-bottom: 24px;\r\n  width: 100%;\r\n}\r\n\r\n.section-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  gap: 8px;\r\n  margin-bottom: 20px;\r\n  width: 100%;\r\n}\r\n\r\n.section-item-header {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  gap: 12px;\r\n  width: 100%;\r\n}\r\n\r\n.section-item-header h3 {\r\n  font-weight: 600;\r\n}\r\n\r\n.section-item-header-right {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  align-items: center;\r\n  flex: 1;\r\n}\r\n\r\n.section-item-header-amount {\r\n  text-align: right;\r\n  font-size: 1rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.section-item-header-note {\r\n  max-width: 60%;\r\n  text-align: right;\r\n  font-size: 0.75rem;\r\n  color: #6b7280;\r\n}\r\n\r\n.section-item-details {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n  width: 100%;\r\n}\r\n\r\n.section-item-input-group {\r\n  display: flex;\r\n  gap: 10px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.section-item-footer {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n}\r\n\r\n.section-item-footer-text {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.ir-dialog-body {\r\n  padding: 16px 24px;\r\n}\r\n\r\n.ir-dialog-title {\r\n  margin-bottom: 16px;\r\n  font-size: 1.25rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.ir-button-link {\r\n  padding-left: 0;\r\n  font-size: 12px;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n}\r\n","import { ISmokingOption, RatePlan, RoomType, Variation } from '@/models/property';\r\nimport { PaymentService } from '@/services/api/payment.service';\r\n// import { PropertyService } from '@/services/api/property.service';\r\nimport app_store from '@/stores/app.store';\r\nimport booking_store, { calculateTotalRooms, IRatePlanSelection } from '@/stores/booking';\r\nimport { checkout_store, onCheckoutDataChange } from '@/stores/checkout.store';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport { formatAmount, getDateDifference } from '@/utils/utils';\r\nimport { Component, Event, EventEmitter, Host, Prop, State, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-booking-details',\r\n  styleUrl: 'ir-booking-details.css',\r\n  shadow: true,\r\n})\r\nexport class IrBookingDetails {\r\n  @Prop() errors: string;\r\n  @State() currentRatePlan: RatePlan | null = null;\r\n  @State() isLoading: number = null;\r\n  @State() cancelationMessage: string;\r\n  @State() prepaymentAmount: number = 0;\r\n\r\n  private dialogRef: HTMLIrDialogElement;\r\n  private firstRoom: { roomtypeId: string; ratePlanId: string };\r\n  // private propertyService = new PropertyService();\r\n  private paymentService = new PaymentService();\r\n\r\n  @Event() prepaymentChange: EventEmitter<number>;\r\n\r\n  componentWillLoad() {\r\n    this.modifyBookings();\r\n    onCheckoutDataChange('userFormData', newValue => {\r\n      if (!checkout_store.modifiedGuestName) {\r\n        this.updateGuestNames(newValue.bookingForSomeoneElse, newValue?.firstName, newValue?.lastName);\r\n      }\r\n    });\r\n  }\r\n  private calculatePrepaymentAmount() {\r\n    let total = 0;\r\n    for (const roomtypeId in booking_store.ratePlanSelections) {\r\n      for (const rateplanId in booking_store.ratePlanSelections[roomtypeId]) {\r\n        const rateplan = booking_store.ratePlanSelections[roomtypeId][rateplanId];\r\n        rateplan.checkoutVariations.map(v => {\r\n          total += this.paymentService.processAlicablePolicies(v.applicable_policies, new Date()).amount;\r\n        });\r\n      }\r\n    }\r\n\r\n    this.prepaymentChange.emit(total);\r\n  }\r\n  private modifyBookings() {\r\n    try {\r\n      const result: any = {};\r\n      for (const roomtypeId in booking_store.ratePlanSelections) {\r\n        if (booking_store.ratePlanSelections.hasOwnProperty(roomtypeId)) {\r\n          const roomtype = booking_store.ratePlanSelections[roomtypeId];\r\n          result[roomtypeId] = {};\r\n          for (const ratePlanId in roomtype) {\r\n            if (roomtype.hasOwnProperty(ratePlanId)) {\r\n              const ratePlan = roomtype[ratePlanId];\r\n              if (ratePlan.reserved === 0) {\r\n                result[roomtypeId][ratePlanId] = ratePlan;\r\n              } else {\r\n                if (!this.firstRoom) {\r\n                  this.firstRoom = {\r\n                    roomtypeId,\r\n                    ratePlanId,\r\n                  };\r\n                }\r\n                result[roomtypeId][ratePlanId] = {\r\n                  ...ratePlan,\r\n                  checkoutVariations: Array(ratePlan.reserved).fill(ratePlan.selected_variation),\r\n                  checkoutBedSelection: ratePlan.is_bed_configuration_enabled ? Array(ratePlan.reserved).fill(ratePlan.roomtype.bedding_setup[0].code) : [],\r\n                  checkoutSmokingSelection: Array(ratePlan.reserved).fill(ratePlan.roomtype.smoking_option[0]),\r\n                };\r\n              }\r\n              if (!checkout_store.modifiedGuestName && ratePlan.guestName?.length === 0) {\r\n                const name = [...new Array(ratePlan.reserved)].map((_, i) => {\r\n                  if (i === 0 && !checkout_store.userFormData.bookingForSomeoneElse && this.firstRoom.roomtypeId === roomtypeId && this.firstRoom.ratePlanId === ratePlanId) {\r\n                    return (checkout_store.userFormData?.firstName || '') + ' ' + (checkout_store.userFormData?.lastName || '') || '';\r\n                  }\r\n                  return '';\r\n                });\r\n                result[roomtypeId][ratePlanId] = {\r\n                  ...result[roomtypeId][ratePlanId],\r\n                  guestName: name,\r\n                };\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      booking_store.ratePlanSelections = { ...result };\r\n      this.calculatePrepaymentAmount();\r\n    } catch (error) {\r\n      console.error('modify Booking error', error);\r\n    }\r\n  }\r\n\r\n  updateGuestNames(isBookingForSomeoneElse: boolean, firstName: string, lastName: string) {\r\n    const result: any = {};\r\n\r\n    Object.keys(booking_store.ratePlanSelections).forEach(roomTypeId => {\r\n      result[roomTypeId] = {};\r\n      Object.keys(booking_store.ratePlanSelections[roomTypeId]).forEach(ratePlanId => {\r\n        const ratePlanSelection: IRatePlanSelection = booking_store.ratePlanSelections[roomTypeId][ratePlanId];\r\n        if (this.firstRoom && this.firstRoom.ratePlanId === ratePlanId && this.firstRoom.roomtypeId === roomTypeId) {\r\n          let updatedGuestNames = [...ratePlanSelection.guestName];\r\n          updatedGuestNames[0] = isBookingForSomeoneElse ? '' : `${firstName || ''} ${lastName || ''}`.trim();\r\n          result[roomTypeId][ratePlanId] = { ...ratePlanSelection, guestName: updatedGuestNames };\r\n        } else {\r\n          result[roomTypeId][ratePlanId] = ratePlanSelection;\r\n        }\r\n      });\r\n    });\r\n\r\n    booking_store.ratePlanSelections = { ...result };\r\n  }\r\n\r\n  handleGuestNameChange(index: number, e: InputEvent, rateplanId: number, roomTypeId: number): void {\r\n    const oldVariations = [...booking_store.ratePlanSelections[roomTypeId][rateplanId]?.guestName];\r\n    oldVariations[index] = (e.target as HTMLInputElement).value;\r\n    booking_store.ratePlanSelections = {\r\n      ...booking_store.ratePlanSelections,\r\n      [roomTypeId]: {\r\n        ...booking_store.ratePlanSelections[roomTypeId],\r\n        [rateplanId]: {\r\n          ...booking_store.ratePlanSelections[roomTypeId][rateplanId],\r\n          guestName: oldVariations,\r\n        },\r\n      },\r\n    };\r\n  }\r\n\r\n  async handleVariationChange(index: number, e: CustomEvent, variations: Variation[], rateplanId: number, roomTypeId: number) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    const value = e.detail;\r\n    let selectedVariation = variations[value];\r\n    if (!selectedVariation) {\r\n      return;\r\n    }\r\n    if (!selectedVariation.discounted_amount) {\r\n      this.isLoading = rateplanId;\r\n      // selectedVariation = this.getNewSelectedVariation(res.roomtypes, selectedVariation, roomTypeId, rateplanId);\r\n      this.isLoading = null;\r\n    }\r\n    const oldVariations = [...booking_store.ratePlanSelections[roomTypeId][rateplanId]?.checkoutVariations];\r\n    oldVariations[index] = selectedVariation;\r\n    booking_store.ratePlanSelections = {\r\n      ...booking_store.ratePlanSelections,\r\n      [roomTypeId]: {\r\n        ...booking_store.ratePlanSelections[roomTypeId],\r\n        [rateplanId]: {\r\n          ...booking_store.ratePlanSelections[roomTypeId][rateplanId],\r\n          selected_variation: selectedVariation,\r\n          checkoutVariations: oldVariations,\r\n        },\r\n      },\r\n    };\r\n    this.calculatePrepaymentAmount();\r\n  }\r\n  getNewSelectedVariation(roomtypes: RoomType[], oldVariation: Variation, roomTypeId: number, rateplanId: number) {\r\n    const roomType = roomtypes.find(rt => rt.id === roomTypeId);\r\n    if (!roomType) {\r\n      throw new Error('Invalid room type');\r\n    }\r\n    const rateplan = roomType.rateplans.find(rp => rp.id === rateplanId);\r\n    if (!rateplan) {\r\n      throw new Error('Invalid room type');\r\n    }\r\n    return rateplan.variations.find(v => v.adult_child_offering === oldVariation.adult_child_offering);\r\n  }\r\n\r\n  handleBedConfiguration(roomTypeId: string, rateplanId: string, detail: string | number, index: number): void {\r\n    let oldBedConfiguration = [];\r\n    if (booking_store.ratePlanSelections[roomTypeId][rateplanId]?.bed_configuration) {\r\n      oldBedConfiguration = [...booking_store.ratePlanSelections[roomTypeId][rateplanId]?.checkoutBedSelection];\r\n    }\r\n    oldBedConfiguration[index] = detail;\r\n    booking_store.ratePlanSelections = {\r\n      ...booking_store.ratePlanSelections,\r\n      [roomTypeId]: {\r\n        ...booking_store.ratePlanSelections[roomTypeId],\r\n        [rateplanId]: {\r\n          ...booking_store.ratePlanSelections[roomTypeId][rateplanId],\r\n          checkoutBedSelection: oldBedConfiguration,\r\n        },\r\n      },\r\n    };\r\n  }\r\n  private formatVariation(v: Variation): any {\r\n    const adults = `${v.adult_nbr} ${v.adult_nbr === 1 ? localizedWords.entries.Lcz_Adult.toLowerCase() : localizedWords.entries.Lcz_Adults.toLowerCase()}`;\r\n    const children =\r\n      v.child_nbr > 0 ? `${v.child_nbr}  ${v.child_nbr > 1 ? localizedWords.entries.Lcz_Children.toLowerCase() : localizedWords.entries.Lcz_Child.toLowerCase()}` : null;\r\n    return children ? `${adults} ${children}` : adults;\r\n  }\r\n  handleSmokeConfiguration(roomTypeId: string, rateplanId: string, detail: string | number, index: number): void {\r\n    let oldSmokingConfiguration = [...booking_store.ratePlanSelections[roomTypeId][rateplanId]?.checkoutSmokingSelection];\r\n    oldSmokingConfiguration[index] = detail;\r\n    booking_store.ratePlanSelections = {\r\n      ...booking_store.ratePlanSelections,\r\n      [roomTypeId]: {\r\n        ...booking_store.ratePlanSelections[roomTypeId],\r\n        [rateplanId]: {\r\n          ...booking_store.ratePlanSelections[roomTypeId][rateplanId],\r\n          checkoutSmokingSelection: oldSmokingConfiguration,\r\n        },\r\n      },\r\n    };\r\n  }\r\n  async fetchCancelationMessage(applicable_policies) {\r\n    this.cancelationMessage = this.cancelationMessage = this.paymentService.getCancelationMessage(applicable_policies, true)?.message;\r\n  }\r\n  renderSmokingView(smoking_option: ISmokingOption, index: number, ratePlanId: string, roomTypeId: string, checkoutSmokingSelection: string[]) {\r\n    if (smoking_option.code === '002') {\r\n      return null;\r\n    }\r\n    if (smoking_option.code === '003') {\r\n      return (\r\n        <div class=\"section-item-footer-text\">\r\n          <ir-icons name={'ban_smoking'} svgClassName=\"size-4\"></ir-icons>\r\n          <p>{smoking_option.description}</p>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <ir-select\r\n        icon\r\n        onValueChange={e => this.handleSmokeConfiguration(roomTypeId, ratePlanId, e.detail, index)}\r\n        value={checkoutSmokingSelection[index]}\r\n        data={smoking_option.allowed_smoking_options.map(s => ({ id: s.code, value: s.description }))}\r\n        class=\"hidden md:block\"\r\n      >\r\n        <ir-icons name={checkoutSmokingSelection[index] !== '002' ? 'smoking' : 'ban_smoking'} slot=\"icon\"></ir-icons>\r\n      </ir-select>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const total_nights = getDateDifference(booking_store.bookingAvailabilityParams.from_date ?? new Date(), booking_store.bookingAvailabilityParams.to_date ?? new Date());\r\n    const total_rooms = calculateTotalRooms();\r\n    const total_persons = this.calculateTotalPersons();\r\n    return (\r\n      <Host>\r\n        <div class=\"w-full\">\r\n          <section class=\"mb-5 flex flex-col flex-wrap items-center gap-2 rounded-md bg-gray-100 px-4 py-2 lg:flex-row\">\r\n            <div class=\"flex flex-1 items-center gap-2\">\r\n              <ir-icons name=\"bed\"></ir-icons>\r\n              <p>\r\n                {total_nights} {total_nights > 1 ? localizedWords.entries.Lcz_Nights : localizedWords.entries.Lcz_night} - {total_persons}{' '}\r\n                {total_persons > 1 ? localizedWords.entries.Lcz_Persons : localizedWords.entries.Lcz_Person} - {total_rooms}{' '}\r\n                {total_rooms > 1 ? localizedWords.entries.Lcz_Rooms : localizedWords.entries.Lcz_Room}\r\n              </p>\r\n            </div>\r\n            <p class=\" text-right text-xs text-gray-500\">{booking_store.tax_statement?.message}</p>\r\n          </section>\r\n          <section class={'space-y-14'}>\r\n            {Object.keys(booking_store.ratePlanSelections).map(roomTypeId => {\r\n              return Object.keys(booking_store.ratePlanSelections[roomTypeId]).map(ratePlanId => {\r\n                const r: IRatePlanSelection = booking_store.ratePlanSelections[roomTypeId][ratePlanId];\r\n                if (r.reserved === 0) {\r\n                  return null;\r\n                }\r\n                return [...new Array(r.reserved)].map((_, index) => {\r\n                  if (this.isLoading === r.ratePlan.id) {\r\n                    return <div class=\"h-16 animate-pulse rounded-md bg-gray-200\"></div>;\r\n                  }\r\n                  return (\r\n                    <div class=\"flex items-center justify-between\">\r\n                      <div class=\"flex-1 space-y-2\">\r\n                        <div>\r\n                          <div class=\"flex items-center gap-3\">\r\n                            <div class=\"flex flex-row items-center gap-3 \">\r\n                              <h3 class=\"font-semibold\">{r.roomtype.name}</h3>\r\n                              {r.ratePlan.is_non_refundable ? (\r\n                                <p class=\"text-xs text-[var(--ir-green)]\">{localizedWords.entries.Lcz_NonRefundable}</p>\r\n                              ) : (\r\n                                <div class={'inline-flex  h-6 items-center justify-center pt-0.5'}>\r\n                                  <ir-button\r\n                                    haveRightIcon\r\n                                    variants=\"link\"\r\n                                    class=\"text-sm\"\r\n                                    buttonClassName=\"pl-0\"\r\n                                    buttonStyles={{ paddingLeft: '0', fontSize: '12px', paddingTop: '0', paddingBottom: '0' }}\r\n                                    onButtonClick={async () => {\r\n                                      this.currentRatePlan = r.ratePlan;\r\n                                      await this.fetchCancelationMessage(r.checkoutVariations[index].applicable_policies);\r\n                                      this.dialogRef.openModal();\r\n                                    }}\r\n                                    label={localizedWords.entries.Lcz_IfICancel}\r\n                                  >\r\n                                    <ir-icons svgClassName=\"size-4\" slot=\"right-icon\" name=\"circle_info\" />\r\n                                  </ir-button>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                            <div class=\"ml-1 flex-1 \">\r\n                              <p class=\"text-end text-base font-medium xl:text-xl\">\r\n                                {formatAmount(r.checkoutVariations[index].discounted_amount, app_store.userPreferences.currency_id)}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div class=\"flex items-center gap-2.5\">\r\n                          <ir-input\r\n                            onInput={e => {\r\n                              if (index === 0 && !checkout_store.modifiedGuestName && this.firstRoom.ratePlanId === ratePlanId && this.firstRoom.roomtypeId === roomTypeId) {\r\n                                checkout_store.modifiedGuestName = true;\r\n                              }\r\n                              this.handleGuestNameChange(index, e, Number(ratePlanId), Number(roomTypeId));\r\n                            }}\r\n                            value={r.guestName[index]}\r\n                            label={localizedWords.entries.Lcz_GuestFullName}\r\n                            leftIcon\r\n                            class=\"w-full\"\r\n                            placeholder=\"\"\r\n                            maxlength={50}\r\n                            error={this.errors && r.guestName[index] === ''}\r\n                            onInputBlur={e => {\r\n                              if (!checkout_store.modifiedGuestName) {\r\n                                return;\r\n                              }\r\n                              const target = e.target as HTMLIrInputElement;\r\n                              if (r.guestName[index].length < 2) {\r\n                                target.setAttribute('data-state', 'error');\r\n                                target.setAttribute('aria-invalid', 'true');\r\n                              } else {\r\n                                if (target.hasAttribute('aria-invalid')) {\r\n                                  target.setAttribute('aria-invalid', 'false');\r\n                                }\r\n                              }\r\n                            }}\r\n                            onInputFocus={e => {\r\n                              const target = e.target as HTMLIrInputElement;\r\n                              if (target.hasAttribute('data-state')) {\r\n                                target.removeAttribute('data-state');\r\n                              }\r\n                            }}\r\n                          >\r\n                            <ir-icons name=\"user\" slot=\"left-icon\" svgClassName=\"size-4\"></ir-icons>\r\n                          </ir-input>\r\n                          <ir-select\r\n                            variant=\"double-line\"\r\n                            value={r.ratePlan.variations\r\n                              .findIndex(v => `${v.adult_nbr}_a_${v.child_nbr}_c` === `${r.checkoutVariations[index].adult_nbr}_a_${r.checkoutVariations[index].child_nbr}_c`)\r\n                              .toString()}\r\n                            label={localizedWords.entries.Lcz_RequiredCapacity}\r\n                            data={r.ratePlan.variations.map((v, i) => ({\r\n                              id: i.toString(),\r\n                              value: this.formatVariation(v),\r\n                            }))}\r\n                            class=\"hidden w-full sm:block\"\r\n                            onValueChange={e => this.handleVariationChange(index, e, r.ratePlan.variations, Number(ratePlanId), Number(roomTypeId))}\r\n                          ></ir-select>\r\n                        </div>\r\n\r\n                        {/* Infants row */}\r\n                        {r.selected_variation.child_nbr > 0 && (\r\n                          <div class=\"flex items-center gap-4\">\r\n                            <div class=\"flex items-center gap-1 text-xs\">\r\n                              <ir-icons name=\"baby\" svgClassName=\"size-4\"></ir-icons>\r\n                              <p class=\"line-clamp-3\">{localizedWords.entries?.Lcz_AnyInfant}</p>\r\n                            </div>\r\n\r\n                            <ir-select\r\n                              class={'w-16'}\r\n                              value={r.infant_nbr}\r\n                              onValueChange={e => this.handleInfantNumberChange(roomTypeId, ratePlanId, e.detail, index)}\r\n                              data={[\r\n                                { id: 0, value: localizedWords.entries?.Lcz_No },\r\n                                ...[...Array(r.selected_variation.child_nbr)].map((_, i) => ({ id: i + 1, value: (i + 1).toString() })),\r\n                              ]}\r\n                            ></ir-select>\r\n                          </div>\r\n                        )}\r\n\r\n                        <div class=\"flex items-center gap-4\">\r\n                          <div class=\"flex items-center gap-1 text-xs\">\r\n                            <ir-icons name=\"utencils\" svgClassName=\"size-4\"></ir-icons>\r\n                            <p class=\"line-clamp-3\">\r\n                              <span>{r.ratePlan.short_name}</span>\r\n                              {r.ratePlan.custom_text && <span class=\"mx-1 max-w-[60%] text-right text-xs text-gray-500 md:w-full md:max-w-full\">{r.ratePlan.custom_text}</span>}\r\n                            </p>\r\n                          </div>\r\n\r\n                          {this.renderSmokingView(r.roomtype.smoking_option, index, ratePlanId, roomTypeId, r.checkoutSmokingSelection)}\r\n\r\n                          {r.is_bed_configuration_enabled && (\r\n                            <ir-select\r\n                              value={r.checkoutBedSelection[index]}\r\n                              onValueChange={e => this.handleBedConfiguration(roomTypeId, ratePlanId, e.detail, index)}\r\n                              data={r.roomtype.bedding_setup.map(b => ({ id: b.code, value: b.name }))}\r\n                              icon\r\n                            >\r\n                              <ir-icons name={r.checkoutBedSelection[index] === 'kingsizebed' ? 'double_bed' : 'bed'} slot=\"icon\"></ir-icons>\r\n                            </ir-select>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                });\r\n              });\r\n            })}\r\n          </section>\r\n        </div>\r\n        <ir-dialog\r\n          ref={el => (this.dialogRef = el)}\r\n          onOpenChange={e => {\r\n            if (!e.detail) {\r\n              this.currentRatePlan = null;\r\n            }\r\n          }}\r\n        >\r\n          <div slot=\"modal-body\" class=\"p-6 \">\r\n            <p class={'px-6'} innerHTML={this.cancelationMessage || this.currentRatePlan?.cancelation}></p>\r\n            <p class={'px-6'} innerHTML={this.currentRatePlan?.guarantee}></p>\r\n          </div>\r\n        </ir-dialog>\r\n      </Host>\r\n    );\r\n  }\r\n  handleInfantNumberChange(roomTypeId: string, rateplanId: string, detail: string | number, index: number): void {\r\n    let oldBedConfiguration = [];\r\n    if (booking_store.ratePlanSelections[roomTypeId][rateplanId]?.bed_configuration) {\r\n      oldBedConfiguration = [...booking_store.ratePlanSelections[roomTypeId][rateplanId]?.checkoutBedSelection];\r\n    }\r\n    oldBedConfiguration[index] = detail;\r\n    booking_store.ratePlanSelections = {\r\n      ...booking_store.ratePlanSelections,\r\n      [roomTypeId]: {\r\n        ...booking_store.ratePlanSelections[roomTypeId],\r\n        [rateplanId]: {\r\n          ...booking_store.ratePlanSelections[roomTypeId][rateplanId],\r\n          infant_nbr: Number(detail),\r\n        },\r\n      },\r\n    };\r\n  }\r\n  calculateTotalPersons() {\r\n    let count = 0;\r\n    Object.keys(booking_store.ratePlanSelections).map(roomTypeId => {\r\n      return Object.keys(booking_store.ratePlanSelections[roomTypeId]).map(ratePlanId => {\r\n        const r: IRatePlanSelection = booking_store.ratePlanSelections[roomTypeId][ratePlanId];\r\n        if (r.reserved !== 0) {\r\n          count += r.selected_variation.adult_nbr + r.selected_variation.child_nbr;\r\n        }\r\n      });\r\n    });\r\n    return count;\r\n  }\r\n}\r\n"],"version":3}