{"file":"Token.js","mappings":";;AACA,MAAM,KAAK;IAKT;QAJQ,YAAO,GAAG,qCAAqC,CAAC;QAKtD,KAAK,CAAC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;KACvC;IACO,UAAU;QAChB,IAAI,KAAK,CAAC,kBAAkB,EAAE;YAC5B,OAAO;SACR;QAED,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM;YACnC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE;gBAChB,MAAM,IAAI,iBAAiB,EAAE,CAAC;aAC/B;YACD,MAAM,WAAW,GAAG,MAAM,CAAC,OAAO,IAAI,EAAE,CAAC;YACzC,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,eAAe,CAAC,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,EAAE;gBACjF,MAAM,CAAC,OAAO,CAAC,aAAa,GAAG,KAAK,CAAC,KAAK,CAAC;aAC5C;;;YAGD,OAAO,MAAM,CAAC;SACf,CAAC,CAAC;QAEH,KAAK,CAAC,kBAAkB,GAAG,IAAI,CAAC;KACjC;IAEM,QAAQ,CAAC,KAAa;QAC3B,IAAI,KAAK,KAAK,KAAK,CAAC,KAAK,EAAE;YACzB,OAAO;SACR;QACD,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;QAEpB,IAAI,CAAC,UAAU,EAAE,CAAC;KACnB;;AAlCc,WAAK,GAAkB,EAAlB,CAAqB;AAE1B,wBAAkB,GAAG,KAAH,CAAS;MAmC/B,iBAAkB,SAAQ,KAAK;IAC1C,YAAY,OAAO,GAAG,iBAAiB;QACrC,KAAK,CAAC,OAAO,CAAC,CAAC;QACf,IAAI,CAAC,IAAI,GAAG,mBAAmB,CAAC;KACjC;;;;;","names":[],"sources":["src/models/Token.ts"],"sourcesContent":["import axios from 'axios';\r\nclass Token {\r\n  private baseUrl = 'https://gateway.igloorooms.com/IRBE';\r\n  private static token: string | null = '';\r\n\r\n  private static isInterceptorAdded = false;\r\n  constructor() {\r\n    axios.defaults.baseURL = this.baseUrl;\r\n  }\r\n  private initialize() {\r\n    if (Token.isInterceptorAdded) {\r\n      return;\r\n    }\r\n\r\n    axios.interceptors.request.use(config => {\r\n      if (!Token.token) {\r\n        throw new MissingTokenError();\r\n      }\r\n      const prevHeaders = config.headers || {};\r\n      if (!prevHeaders.hasOwnProperty('Authorization') || !prevHeaders['Authorization']) {\r\n        config.headers.Authorization = Token.token;\r\n      }\r\n      // config.params = config.params || {};\r\n      // config.params.Ticket = Token.token;\r\n      return config;\r\n    });\r\n\r\n    Token.isInterceptorAdded = true;\r\n  }\r\n\r\n  public setToken(token: string) {\r\n    if (token === Token.token) {\r\n      return;\r\n    }\r\n    Token.token = token;\r\n\r\n    this.initialize();\r\n  }\r\n}\r\nexport default Token;\r\nexport class MissingTokenError extends Error {\r\n  constructor(message = 'Missing token!!') {\r\n    super(message);\r\n    this.name = 'MissingTokenError';\r\n  }\r\n}\r\n"],"version":3}