{"version":3,"file":"countdown.js","sourceRoot":"","sources":["../../src/models/countdown.ts"],"names":[],"mappings":"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","sourcesContent":["export class Countdown {\r\n  private seconds: number;\r\n  private isActive: boolean;\r\n  private intervalRef: number | null = null;\r\n  private onFinish: () => void;\r\n  private format: 'days' | 'hours' | 'minutes';\r\n  private subscribers: ((formattedTime: string) => void)[] = [];\r\n\r\n  constructor(initialSeconds: number, onFinish?: () => void, autoStart: boolean = true, format: 'days' | 'hours' | 'minutes' = 'minutes') {\r\n    this.seconds = initialSeconds;\r\n    this.isActive = autoStart;\r\n    this.onFinish = onFinish || (() => {});\r\n    this.format = format;\r\n\r\n    if (this.isActive) {\r\n      this.start();\r\n    }\r\n  }\r\n\r\n  private clearInterval() {\r\n    if (this.intervalRef !== null) {\r\n      clearInterval(this.intervalRef);\r\n      this.intervalRef = null;\r\n    }\r\n  }\r\n\r\n  start() {\r\n    this.clearInterval();\r\n    this.isActive = true;\r\n    this.intervalRef = window.setInterval(() => {\r\n      if (this.seconds > 0) {\r\n        this.seconds -= 1;\r\n        this.notifySubscribers();\r\n      } else {\r\n        this.clearInterval();\r\n        this.isActive = false;\r\n        this.notifySubscribers();\r\n        this.onFinish();\r\n      }\r\n    }, 1000);\r\n  }\r\n\r\n  pause() {\r\n    this.isActive = false;\r\n    this.clearInterval();\r\n  }\r\n\r\n  reset(newSeconds: number = this.seconds) {\r\n    this.pause();\r\n    this.seconds = newSeconds;\r\n    this.isActive = false;\r\n    this.notifySubscribers();\r\n  }\r\n\r\n  private notifySubscribers() {\r\n    const formattedTime = this.getFormattedTime();\r\n    this.subscribers.forEach(callback => callback(formattedTime));\r\n  }\r\n\r\n  subscribe(callback: (formattedTime: string) => void) {\r\n    this.subscribers.push(callback);\r\n  }\r\n\r\n  unsubscribe(callback: (formattedTime: string) => void) {\r\n    this.subscribers = this.subscribers.filter(sub => sub !== callback);\r\n  }\r\n\r\n  getFormattedTime() {\r\n    const d = Math.floor(this.seconds / (3600 * 24));\r\n    const h = Math.floor((this.seconds % (3600 * 24)) / 3600);\r\n    const m = Math.floor((this.seconds % 3600) / 60);\r\n    const s = this.seconds % 60;\r\n\r\n    switch (this.format) {\r\n      case 'days':\r\n        return `${String(d).padStart(2, '0')}:${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;\r\n      case 'hours':\r\n        return `${String(h + d * 24).padStart(2, '0')}:${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;\r\n      case 'minutes':\r\n      default:\r\n        return `${String(m + h * 60 + d * 1440).padStart(2, '0')}:${String(s).padStart(2, '0')}`;\r\n    }\r\n  }\r\n\r\n  getSeconds() {\r\n    return this.seconds;\r\n  }\r\n\r\n  isRunning() {\r\n    return this.isActive;\r\n  }\r\n}\r\nexport function getDateDifference(date1: Date, date2: Date) {\r\n  const diff = date2.getTime() - date1.getTime();\r\n  return Math.floor(diff / (1000 * 60 * 60 * 24));\r\n}\r\nexport function daysToSeconds(days: number) {\r\n  return days * 86400;\r\n}\r\n"]}