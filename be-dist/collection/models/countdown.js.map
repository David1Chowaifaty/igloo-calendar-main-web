{"version":3,"file":"countdown.js","sourceRoot":"","sources":["../../src/models/countdown.ts"],"names":[],"mappings":"AAAA,MAAM,OAAO,SAAS;IAQpB,YAAY,cAAsB,EAAE,QAAqB,EAAE,YAAqB,IAAI,EAAE,SAAuC,SAAS;QAL9H,gBAAW,GAAkB,IAAI,CAAC;QAGlC,gBAAW,GAAwC,EAAE,CAAC;QAG5D,IAAI,CAAC,OAAO,GAAG,cAAc,CAAC;QAC9B,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC;QAC1B,IAAI,CAAC,QAAQ,GAAG,QAAQ,IAAI,CAAC,GAAG,EAAE,GAAE,CAAC,CAAC,CAAC;QACvC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QAErB,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;YAClB,IAAI,CAAC,KAAK,EAAE,CAAC;QACf,CAAC;IACH,CAAC;IAEO,aAAa;QACnB,IAAI,IAAI,CAAC,WAAW,KAAK,IAAI,EAAE,CAAC;YAC9B,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAChC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QAC1B,CAAC;IACH,CAAC;IAED,KAAK;QACH,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE;YACzC,IAAI,IAAI,CAAC,OAAO,GAAG,CAAC,EAAE,CAAC;gBACrB,IAAI,CAAC,OAAO,IAAI,CAAC,CAAC;gBAClB,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAC3B,CAAC;iBAAM,CAAC;gBACN,IAAI,CAAC,aAAa,EAAE,CAAC;gBACrB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;gBACtB,IAAI,CAAC,iBAAiB,EAAE,CAAC;gBACzB,IAAI,CAAC,QAAQ,EAAE,CAAC;YAClB,CAAC;QACH,CAAC,EAAE,IAAI,CAAC,CAAC;IACX,CAAC;IAED,KAAK;QACH,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,KAAK,CAAC,aAAqB,IAAI,CAAC,OAAO;QACrC,IAAI,CAAC,KAAK,EAAE,CAAC;QACb,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC;QAC1B,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,IAAI,CAAC,iBAAiB,EAAE,CAAC;IAC3B,CAAC;IAEO,iBAAiB;QACvB,MAAM,aAAa,GAAG,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAC9C,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC;IAChE,CAAC;IAED,SAAS,CAAC,QAAyC;QACjD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAClC,CAAC;IAED,WAAW,CAAC,QAAyC;QACnD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,QAAQ,CAAC,CAAC;IACtE,CAAC;IAED,gBAAgB;QACd,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC;QACjD,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;QAC1D,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;QACjD,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QAE5B,QAAQ,IAAI,CAAC,MAAM,EAAE,CAAC;YACpB,KAAK,MAAM;gBACT,OAAO,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC;YACnI,KAAK,OAAO;gBACV,OAAO,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC;YAC9G,KAAK,SAAS,CAAC;YACf;gBACE,OAAO,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,IAAI,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC;QAC7F,CAAC;IACH,CAAC;IAED,UAAU;QACR,OAAO,IAAI,CAAC,OAAO,CAAC;IACtB,CAAC;IAED,SAAS;QACP,OAAO,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;CACF;AACD,MAAM,UAAU,iBAAiB,CAAC,KAAW,EAAE,KAAW;IACxD,MAAM,IAAI,GAAG,KAAK,CAAC,OAAO,EAAE,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;IAC/C,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;AAClD,CAAC;AACD,MAAM,UAAU,aAAa,CAAC,IAAY;IACxC,OAAO,IAAI,GAAG,KAAK,CAAC;AACtB,CAAC","sourcesContent":["export class Countdown {\n  private seconds: number;\n  private isActive: boolean;\n  private intervalRef: number | null = null;\n  private onFinish: () => void;\n  private format: 'days' | 'hours' | 'minutes';\n  private subscribers: ((formattedTime: string) => void)[] = [];\n\n  constructor(initialSeconds: number, onFinish?: () => void, autoStart: boolean = true, format: 'days' | 'hours' | 'minutes' = 'minutes') {\n    this.seconds = initialSeconds;\n    this.isActive = autoStart;\n    this.onFinish = onFinish || (() => {});\n    this.format = format;\n\n    if (this.isActive) {\n      this.start();\n    }\n  }\n\n  private clearInterval() {\n    if (this.intervalRef !== null) {\n      clearInterval(this.intervalRef);\n      this.intervalRef = null;\n    }\n  }\n\n  start() {\n    this.clearInterval();\n    this.isActive = true;\n    this.intervalRef = window.setInterval(() => {\n      if (this.seconds > 0) {\n        this.seconds -= 1;\n        this.notifySubscribers();\n      } else {\n        this.clearInterval();\n        this.isActive = false;\n        this.notifySubscribers();\n        this.onFinish();\n      }\n    }, 1000);\n  }\n\n  pause() {\n    this.isActive = false;\n    this.clearInterval();\n  }\n\n  reset(newSeconds: number = this.seconds) {\n    this.pause();\n    this.seconds = newSeconds;\n    this.isActive = false;\n    this.notifySubscribers();\n  }\n\n  private notifySubscribers() {\n    const formattedTime = this.getFormattedTime();\n    this.subscribers.forEach(callback => callback(formattedTime));\n  }\n\n  subscribe(callback: (formattedTime: string) => void) {\n    this.subscribers.push(callback);\n  }\n\n  unsubscribe(callback: (formattedTime: string) => void) {\n    this.subscribers = this.subscribers.filter(sub => sub !== callback);\n  }\n\n  getFormattedTime() {\n    const d = Math.floor(this.seconds / (3600 * 24));\n    const h = Math.floor((this.seconds % (3600 * 24)) / 3600);\n    const m = Math.floor((this.seconds % 3600) / 60);\n    const s = this.seconds % 60;\n\n    switch (this.format) {\n      case 'days':\n        return `${String(d).padStart(2, '0')}:${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;\n      case 'hours':\n        return `${String(h + d * 24).padStart(2, '0')}:${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;\n      case 'minutes':\n      default:\n        return `${String(m + h * 60 + d * 1440).padStart(2, '0')}:${String(s).padStart(2, '0')}`;\n    }\n  }\n\n  getSeconds() {\n    return this.seconds;\n  }\n\n  isRunning() {\n    return this.isActive;\n  }\n}\nexport function getDateDifference(date1: Date, date2: Date) {\n  const diff = date2.getTime() - date1.getTime();\n  return Math.floor(diff / (1000 * 60 * 60 * 24));\n}\nexport function daysToSeconds(days: number) {\n  return days * 86400;\n}\n"]}