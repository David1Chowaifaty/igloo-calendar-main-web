{"version":3,"file":"ir-user-profile.js","sourceRoot":"","sources":["../../../src/components/ir-user-profile/ir-user-profile.tsx"],"names":[],"mappings":"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","sourcesContent":["import { IrGuest, TGuest } from '@/models/user_form';\nimport { Component, h, Prop, State } from '@stencil/core';\nimport phone_input_store from '../ui/ir-phone-input/phone.store';\nimport { checkout_store } from '@/stores/checkout.store';\nimport { ZodError } from 'zod';\n\n@Component({\n  tag: 'ir-user-profile',\n  styleUrl: 'ir-user-profile.css',\n  shadow: true,\n})\nexport class IrUserProfile {\n  @Prop() user_data: TGuest = {};\n\n  @State() user: TGuest = {};\n\n  componentWillLoad() {\n    this.user = { ...this.user_data };\n  }\n\n  updateUserData(key: keyof TGuest, value: unknown) {\n    this.user = {\n      ...this.user,\n      [key]: value,\n    };\n  }\n\n  handleSubmit(e: Event) {\n    e.preventDefault();\n    try {\n      IrGuest.parse(this.user);\n      const { email, country_id, first_name, last_name, mobile } = this.user;\n      checkout_store.userFormData = {\n        ...checkout_store.userFormData,\n        country_code: country_id,\n        email,\n        firstName: first_name,\n        lastName: last_name,\n        mobile_number: mobile,\n        country_id,\n      };\n    } catch (error) {\n      if (error instanceof ZodError) {\n      }\n    }\n  }\n\n  render() {\n    return (\n      <section class=\"p-4\">\n        <h1 class=\"mb-6 text-lg font-medium\">Personal profile</h1>\n        <form onSubmit={this.handleSubmit.bind(this)}>\n          <div class=\"grid gap-4 md:grid-cols-2\">\n            <ir-input\n              label=\"Email\"\n              placeholder=\"\"\n              value={this.user.email}\n              onInputBlur={e => {\n                const emailSchema = IrGuest.pick({ email: true });\n                const schemaValidation = emailSchema.safeParse({ email: this.user?.email });\n                const target: HTMLIrInputElement = e.target;\n                if (!schemaValidation.success) {\n                  target.setAttribute('data-state', 'error');\n                  target.setAttribute('aria-invalid', 'true');\n                } else {\n                  if (target.hasAttribute('aria-invalid')) {\n                    target.setAttribute('aria-invalid', 'false');\n                  }\n                }\n              }}\n              onInputFocus={e => {\n                const target: HTMLIrInputElement = e.target;\n                if (target.hasAttribute('data-state')) target.removeAttribute('data-state');\n              }}\n              onTextChanged={e => this.updateUserData('email', e.detail)}\n            ></ir-input>\n            <ir-input\n              label=\"Password\"\n              type=\"password\"\n              value={this.user.password}\n              placeholder=\"\"\n              onInputBlur={e => {\n                const emailSchema = IrGuest.pick({ password: true });\n                const schemaValidation = emailSchema.safeParse({ password: this.user?.password });\n                const target: HTMLIrInputElement = e.target;\n                if (!schemaValidation.success) {\n                  target.setAttribute('data-state', 'error');\n                  target.setAttribute('aria-invalid', 'true');\n                } else {\n                  if (target.hasAttribute('aria-invalid')) {\n                    target.setAttribute('aria-invalid', 'false');\n                  }\n                }\n              }}\n              onInputFocus={e => {\n                const target: HTMLIrInputElement = e.target;\n                if (target.hasAttribute('data-state')) target.removeAttribute('data-state');\n              }}\n              onTextChanged={e => this.updateUserData('password', e.detail)}\n            ></ir-input>\n            <ir-input\n              label=\"First name\"\n              onTextChanged={e => this.updateUserData('first_name', e.detail)}\n              value={this.user.first_name}\n              placeholder=\"\"\n              onInputBlur={e => {\n                const emailSchema = IrGuest.pick({ first_name: true });\n                const schemaValidation = emailSchema.safeParse({ first_name: this.user?.first_name });\n                const target: HTMLIrInputElement = e.target;\n                if (!schemaValidation.success) {\n                  target.setAttribute('data-state', 'error');\n                  target.setAttribute('aria-invalid', 'true');\n                } else {\n                  if (target.hasAttribute('aria-invalid')) {\n                    target.setAttribute('aria-invalid', 'false');\n                  }\n                }\n              }}\n              onInputFocus={e => {\n                const target: HTMLIrInputElement = e.target;\n                if (target.hasAttribute('data-state')) target.removeAttribute('data-state');\n              }}\n            ></ir-input>\n            <ir-input\n              value={this.user.last_name}\n              label=\"Last name\"\n              placeholder=\"\"\n              onTextChanged={e => this.updateUserData('last_name', e.detail)}\n              onInputBlur={e => {\n                const emailSchema = IrGuest.pick({ last_name: true });\n                const schemaValidation = emailSchema.safeParse({ last_name: this.user?.last_name });\n                const target: HTMLIrInputElement = e.target;\n                if (!schemaValidation.success) {\n                  target.setAttribute('data-state', 'error');\n                  target.setAttribute('aria-invalid', 'true');\n                } else {\n                  if (target.hasAttribute('aria-invalid')) {\n                    target.setAttribute('aria-invalid', 'false');\n                  }\n                }\n              }}\n              onInputFocus={e => {\n                const target: HTMLIrInputElement = e.target;\n                if (target.hasAttribute('data-state')) target.removeAttribute('data-state');\n              }}\n            ></ir-input>\n            <ir-select\n              value={2}\n              label=\"Country\"\n              variant=\"double-line\"\n              data={phone_input_store.countries?.map(country => ({\n                id: country.id,\n                value: country.name,\n              }))}\n              onValueChange={e => this.updateUserData('country_id', e.detail)}\n            ></ir-select>\n            <ir-input label=\"City\" placeholder=\"\" value={this.user.city} onTextChanged={e => this.updateUserData('city', e.detail)}></ir-input>\n            <ir-input label=\"Address\" placeholder=\"\" value={this.user.address} onTextChanged={e => this.updateUserData('address', e.detail)}></ir-input>\n            <ir-phone-input\n              country_code={this.user.country_id || null}\n              onTextChange={e => {\n                this.updateUserData('mobile', e.detail.mobile);\n                this.updateUserData('country_id', e.detail.phone_prefix);\n              }}\n              mobile_number={(this.user.mobile || '').toString()}\n              onPhoneInputBlur={e => {\n                const schema = IrGuest.pick({ mobile: true });\n                const schemaValidation = schema.safeParse({ mobile: this.user.mobile });\n                const target: HTMLIrPhoneInputElement = e.target;\n                if (!schemaValidation.success) {\n                  target.setAttribute('data-state', 'error');\n                  target.setAttribute('aria-invalid', 'true');\n                } else {\n                  if (target.hasAttribute('aria-invalid')) {\n                    target.setAttribute('aria-invalid', 'false');\n                  }\n                }\n              }}\n              onPhoneInputFocus={e => {\n                const target: HTMLIrPhoneInputElement = e.target;\n                if (target.hasAttribute('data-state')) target.removeAttribute('data-state');\n              }}\n            ></ir-phone-input>\n            <ir-checkbox onCheckChange={e => this.updateUserData('subscribe_to_news_letter', e.detail)} label=\"Register for exclusive deals\"></ir-checkbox>\n          </div>\n          <div class=\"flex items-center justify-end\">\n            <ir-button type=\"submit\" label=\"Save\" class=\"mt-6 w-full md:w-fit\"></ir-button>\n          </div>\n        </form>\n      </section>\n    );\n  }\n}\n"]}