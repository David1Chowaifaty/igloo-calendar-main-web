{"version":3,"file":"ir-booking-details.js","sourceRoot":"","sources":["../../../../src/components/ir-checkout-page/ir-booking-details/ir-booking-details.tsx"],"names":[],"mappings":"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","sourcesContent":["import { ISmokingOption, RatePlan, Variation } from '@/models/property';\r\nimport app_store from '@/stores/app.store';\r\nimport booking_store, { IRatePlanSelection } from '@/stores/booking';\r\nimport { checkout_store } from '@/stores/checkout.store';\r\nimport { formatAmount, getDateDifference } from '@/utils/utils';\r\nimport { Component, Host, State, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-booking-details',\r\n  styleUrl: 'ir-booking-details.css',\r\n  shadow: true,\r\n})\r\nexport class IrBookingDetails {\r\n  @State() currentRatePlan: RatePlan | null = null;\r\n\r\n  dialogRef: HTMLIrDialogElement;\r\n\r\n  componentWillLoad() {\r\n    const result: any = {};\r\n\r\n    Object.keys(booking_store.ratePlanSelections).map(roomTypeId => {\r\n      result[roomTypeId] = {};\r\n      return Object.keys(booking_store.ratePlanSelections[roomTypeId]).map(ratePlanId => {\r\n        const r: IRatePlanSelection = booking_store.ratePlanSelections[roomTypeId][ratePlanId];\r\n        if (r.reserved === 0) {\r\n          result[roomTypeId][ratePlanId] = r;\r\n        } else {\r\n          result[roomTypeId][ratePlanId] = {\r\n            ...r,\r\n            checkoutVariations: Array(r.reserved).fill(r.selected_variation),\r\n            guestName: Array(r.reserved).fill(''),\r\n            checkoutBedSelection: r.is_bed_configuration_enabled ? Array(r.reserved).fill(r.roomtype.bedding_setup[0].code) : [],\r\n            checkoutSmokingSelection: Array(r.reserved).fill(r.roomtype.smoking_option[0]),\r\n          };\r\n        }\r\n      });\r\n    });\r\n    booking_store.ratePlanSelections = { ...result };\r\n    console.log(booking_store.ratePlanSelections);\r\n  }\r\n\r\n  calculateTotalRooms() {\r\n    return Object.values(booking_store.ratePlanSelections).reduce((total, value) => {\r\n      return (\r\n        total +\r\n        Object.values(value).reduce((innerTotal, ratePlan) => {\r\n          if (ratePlan.reserved === 0) {\r\n            return innerTotal;\r\n          }\r\n          return innerTotal + ratePlan.reserved;\r\n        }, 0)\r\n      );\r\n    }, 0);\r\n  }\r\n  handleGuestNameChange(index: number, e: InputEvent, rateplanId: number, roomTypeId: number): void {\r\n    const oldVariations = [...booking_store.ratePlanSelections[roomTypeId][rateplanId]?.guestName];\r\n    oldVariations[index] = (e.target as HTMLInputElement).value;\r\n    booking_store.ratePlanSelections = {\r\n      ...booking_store.ratePlanSelections,\r\n      [roomTypeId]: {\r\n        ...booking_store.ratePlanSelections[roomTypeId],\r\n        [rateplanId]: {\r\n          ...booking_store.ratePlanSelections[roomTypeId][rateplanId],\r\n          guestName: oldVariations,\r\n        },\r\n      },\r\n    };\r\n  }\r\n  handleVariationChange(index: number, e: CustomEvent, variations: Variation[], rateplanId: number, roomTypeId: number) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    const value = e.detail;\r\n    const selectedVariation = variations.find(variation => variation.adult_child_offering === value);\r\n    if (!selectedVariation) {\r\n      return;\r\n    }\r\n    const oldVariations = [...booking_store.ratePlanSelections[roomTypeId][rateplanId]?.checkoutVariations];\r\n    oldVariations[index] = selectedVariation;\r\n    booking_store.ratePlanSelections = {\r\n      ...booking_store.ratePlanSelections,\r\n      [roomTypeId]: {\r\n        ...booking_store.ratePlanSelections[roomTypeId],\r\n        [rateplanId]: {\r\n          ...booking_store.ratePlanSelections[roomTypeId][rateplanId],\r\n          checkoutVariations: oldVariations,\r\n        },\r\n      },\r\n    };\r\n  }\r\n  handleBedConfiguration(roomTypeId: string, rateplanId: string, detail: string | number, index: number): void {\r\n    let oldBedConfiguration = [];\r\n    if (booking_store.ratePlanSelections[roomTypeId][rateplanId]?.bed_configuration) {\r\n      oldBedConfiguration = [...booking_store.ratePlanSelections[roomTypeId][rateplanId]?.checkoutBedSelection];\r\n    }\r\n    oldBedConfiguration[index] = detail;\r\n    booking_store.ratePlanSelections = {\r\n      ...booking_store.ratePlanSelections,\r\n      [roomTypeId]: {\r\n        ...booking_store.ratePlanSelections[roomTypeId],\r\n        [rateplanId]: {\r\n          ...booking_store.ratePlanSelections[roomTypeId][rateplanId],\r\n          checkoutBedSelection: oldBedConfiguration,\r\n        },\r\n      },\r\n    };\r\n  }\r\n  handleSmokeConfiguration(roomTypeId: string, rateplanId: string, detail: string | number, index: number): void {\r\n    let oldSmokingConfiguration = [...booking_store.ratePlanSelections[roomTypeId][rateplanId]?.checkoutSmokingSelection];\r\n    oldSmokingConfiguration[index] = detail;\r\n    booking_store.ratePlanSelections = {\r\n      ...booking_store.ratePlanSelections,\r\n      [roomTypeId]: {\r\n        ...booking_store.ratePlanSelections[roomTypeId],\r\n        [rateplanId]: {\r\n          ...booking_store.ratePlanSelections[roomTypeId][rateplanId],\r\n          checkoutSmokingSelection: oldSmokingConfiguration,\r\n        },\r\n      },\r\n    };\r\n  }\r\n  renderSmokingView(smoking_option: ISmokingOption, index: number, ratePlanId: string, roomTypeId: string, checkoutSmokingSelection: string[]) {\r\n    if (smoking_option.code === '002') {\r\n      return null;\r\n    }\r\n    if (smoking_option.code === '003') {\r\n      return (\r\n        <div class=\"flex items-center gap-2.5\">\r\n          <ir-icons name={'ban_smoking'}></ir-icons>\r\n          <p>{smoking_option.description}</p>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <ir-select\r\n        icon\r\n        onValueChange={e => this.handleSmokeConfiguration(roomTypeId, ratePlanId, e.detail, index)}\r\n        value={checkoutSmokingSelection[index]}\r\n        data={smoking_option.allowed_smoking_options.map(s => ({ id: s.code, value: s.description }))}\r\n        class=\"hidden md:block\"\r\n      >\r\n        <ir-icons name={checkoutSmokingSelection[index] !== '002' ? 'smoking' : 'ban_smoking'} slot=\"icon\"></ir-icons>\r\n      </ir-select>\r\n    );\r\n  }\r\n  render() {\r\n    const total_nights = getDateDifference(booking_store.bookingAvailabilityParams.from_date ?? new Date(), booking_store.bookingAvailabilityParams.to_date ?? new Date());\r\n    const total_rooms = this.calculateTotalRooms();\r\n    return (\r\n      <Host>\r\n        <div class=\"w-full\">\r\n          <section class=\"bg-gray-100 py-2 px-4 rounded-md flex items-center gap-2 mb-5\">\r\n            <ir-icons name=\"bed\"></ir-icons>\r\n            <p>\r\n              {total_nights} {total_nights > 1 ? 'nights' : 'night'} - {booking_store.bookingAvailabilityParams.adult_nbr}{' '}\r\n              {booking_store.bookingAvailabilityParams.adult_nbr > 1 ? 'persons' : 'person'} - {total_rooms} {total_rooms > 1 ? 'rooms' : 'room'}\r\n            </p>\r\n          </section>\r\n          <section class={'space-y-2'}>\r\n            {Object.keys(booking_store.ratePlanSelections).map(roomTypeId => {\r\n              return Object.keys(booking_store.ratePlanSelections[roomTypeId]).map(ratePlanId => {\r\n                const r: IRatePlanSelection = booking_store.ratePlanSelections[roomTypeId][ratePlanId];\r\n                if (r.reserved === 0) {\r\n                  return null;\r\n                }\r\n                return [...new Array(r.reserved)].map((_, index) => {\r\n                  return (\r\n                    <div class=\"flex items-center justify-between\">\r\n                      <div class=\"space-y-4 flex-1 xl:max-w-[65%]\">\r\n                        <div>\r\n                          <div class=\"flex md:items-center gap-3\">\r\n                            <div class=\"flex flex-col md:flex-row gap-3 md:items-center\">\r\n                              <h3 class=\"font-semibold\">{r.roomtype.name}</h3>\r\n                              <ir-button\r\n                                haveRightIcon\r\n                                variants=\"link\"\r\n                                class=\"text-sm\"\r\n                                buttonClassName=\"pl-0\"\r\n                                buttonStyles={{ paddingLeft: '0' }}\r\n                                onButtonClick={() => {\r\n                                  this.currentRatePlan = r.ratePlan;\r\n                                  this.dialogRef.openModal();\r\n                                }}\r\n                                label=\"View conditions\"\r\n                              >\r\n                                <ir-icons svgClassName=\"size-4\" slot=\"right-icon\" name=\"circle_info\" />\r\n                              </ir-button>\r\n                            </div>\r\n                            <div class=\"text-right flex-1 ml-1 xl:hidden\">\r\n                              <p class=\"font-medium text-base\">{formatAmount(r.checkoutVariations[index].amount, app_store.userPreferences.currency_id)}</p>\r\n                              {/* <p class=\"text-gray-300 \">+taxes AED 31.95</p> */}\r\n                            </div>\r\n                          </div>\r\n                          <p class=\"text-gray-500 text-xs text-right xl:hidden\">{booking_store.tax_statement?.message}</p>\r\n                        </div>\r\n                        <div class=\"flex items-center gap-2.5\">\r\n                          <ir-input\r\n                            readonly={!checkout_store.userFormData?.bookingForSomeoneElse}\r\n                            onInput={e => this.handleGuestNameChange(index, e, Number(ratePlanId), Number(roomTypeId))}\r\n                            value={\r\n                              checkout_store.userFormData?.bookingForSomeoneElse\r\n                                ? r.guestName[index]\r\n                                : (checkout_store.userFormData?.firstName || '') + ' ' + (checkout_store.userFormData?.lastName || '') ?? ''\r\n                            }\r\n                            label=\"Guest full name\"\r\n                            leftIcon\r\n                            class=\"w-full\"\r\n                            placeholder=\"\"\r\n                          >\r\n                            <ir-icons name=\"user\" slot=\"left-icon\"></ir-icons>\r\n                          </ir-input>\r\n                          <ir-select\r\n                            variant=\"double-line\"\r\n                            value={r.checkoutVariations[index]?.adult_child_offering}\r\n                            label=\"Required capacity\"\r\n                            data={r.ratePlan?.variations?.map(v => ({\r\n                              value: v.adult_child_offering,\r\n                              id: v.adult_child_offering,\r\n                            }))}\r\n                            class=\"hidden md:block w-full\"\r\n                            onValueChange={e => this.handleVariationChange(index, e, r.ratePlan.variations, Number(ratePlanId), Number(roomTypeId))}\r\n                          ></ir-select>\r\n                        </div>\r\n                        <div class=\"flex items-center gap-4\">\r\n                          <div class=\"flex items-center gap-2.5 text-sm\">\r\n                            <ir-icons name=\"utencils\"></ir-icons>\r\n                            <span>{r.ratePlan.short_name}</span>\r\n                          </div>\r\n\r\n                          {this.renderSmokingView(r.roomtype.smoking_option, index, ratePlanId, roomTypeId, r.checkoutSmokingSelection)}\r\n\r\n                          {r.is_bed_configuration_enabled && (\r\n                            <ir-select\r\n                              value={r.checkoutBedSelection[index]}\r\n                              onValueChange={e => this.handleBedConfiguration(roomTypeId, ratePlanId, e.detail, index)}\r\n                              data={r.roomtype.bedding_setup.map(b => ({ id: b.code, value: b.name }))}\r\n                              icon\r\n                            >\r\n                              <ir-icons name={r.checkoutBedSelection[index] === 'kingsizebed' ? 'double_bed' : 'bed'} slot=\"icon\"></ir-icons>\r\n                            </ir-select>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                      <div class=\" hidden text-right text-xs ml-1 xl:block\">\r\n                        <p class=\"font-medium text-xl\">{formatAmount(r.checkoutVariations[index].amount, app_store.userPreferences.currency_id)}</p>\r\n                        {/* <p class=\"text-gray-300 \">+taxes AED 31.95</p> */}\r\n                        <p class=\"text-gray-500 line-clamp-2\">{booking_store.tax_statement?.message}</p>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                });\r\n              });\r\n            })}\r\n          </section>\r\n        </div>\r\n        <ir-dialog\r\n          ref={el => (this.dialogRef = el)}\r\n          onOpenChange={e => {\r\n            if (!e.detail) {\r\n              this.currentRatePlan = null;\r\n            }\r\n          }}\r\n        >\r\n          <div slot=\"modal-body\" class=\"p-4 md:p-6\">\r\n            <h3 class={'text-xl font-medium mb-4'}>{this.currentRatePlan?.name} Conditions</h3>\r\n            <p innerHTML={this.currentRatePlan?.guarantee}></p>\r\n            <p innerHTML={this.currentRatePlan?.cancelation}></p>\r\n          </div>\r\n        </ir-dialog>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}