{"version":3,"file":"ir-booking-summary.js","sourceRoot":"","sources":["../../../../src/components/ir-checkout-page/ir-booking-summary/ir-booking-summary.tsx"],"names":[],"mappings":"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","sourcesContent":["import { pages } from '@/models/common';\nimport { IExposedProperty } from '@/models/property';\nimport app_store, { onAppDataChange } from '@/stores/app.store';\nimport booking_store, { calculateTotalCost } from '@/stores/booking';\nimport { checkout_store } from '@/stores/checkout.store';\nimport { formatAmount, getDateDifference } from '@/utils/utils';\nimport { Component, Host, State, h, Event, EventEmitter, Prop } from '@stencil/core';\nimport { format } from 'date-fns';\n\n@Component({\n  tag: 'ir-booking-summary',\n  styleUrl: 'ir-booking-summary.css',\n  shadow: true,\n})\nexport class IrBookingSummary {\n  @Prop() isLoading = false;\n\n  @State() property: IExposedProperty;\n\n  componentWillLoad() {\n    this.property = { ...app_store.property };\n    onAppDataChange('property', (newValue: IExposedProperty) => {\n      this.property = { ...newValue };\n    });\n  }\n\n  @Event() routing: EventEmitter<pages>;\n  @Event() bookingClicked: EventEmitter<null>;\n  handleBooking() {\n    this.bookingClicked.emit(null);\n  }\n  render() {\n    const total_nights = getDateDifference(booking_store.bookingAvailabilityParams.from_date ?? new Date(), booking_store.bookingAvailabilityParams.to_date ?? new Date());\n    return (\n      <Host>\n        <div class=\"bg-gray-200 rounded-md text-sm pb-4\">\n          <div class=\"image-container\">\n            <img class=\"object-cover h-full w-full rounded-t-md\" src={this.property.space_theme.background_image} alt=\"\" />\n          </div>\n          <section class=\"flex items-center flex-col mt-4 px-4 space-y-4\">\n            <h3 class=\"text-center font-medium text-lg\">{this.property.name}</h3>\n            <div class=\"flex items-center w-full max-w-xs\">\n              <div class=\"rounded-md w-56 border text-xs p-2 border-gray-300 text-center\">\n                <p>Check-in</p>\n                <p>{format(booking_store.bookingAvailabilityParams?.from_date ? new Date(booking_store.bookingAvailabilityParams?.from_date) : new Date(), 'eee, dd MMM yyyy')}</p>\n                <p>From {app_store.property?.time_constraints.check_in_from}</p>\n              </div>\n              <div class=\"h-[1px] bg-gray-300 w-full max-w-[30px]\"></div>\n              <div class=\"rounded-md w-56 border text-xs p-2 border-gray-300 text-center\">\n                <p>Check-out</p>\n                <p>{format(booking_store.bookingAvailabilityParams?.to_date ? new Date(booking_store.bookingAvailabilityParams?.to_date) : new Date(), 'eee, dd MMM yyyy')}</p>\n                <p>Before {app_store.property?.time_constraints.check_out_till}</p>\n              </div>\n            </div>\n\n            <ir-button onButtonClick={() => this.routing.emit('booking')} label=\"Change details\" variants=\"outline-primary\" class=\"w-full\"></ir-button>\n            <div class={'w-full max-w-[60%] mt-4'}>\n              <ul class={'w-full space-y-2'}>\n                <li class={'flex items-center justify-between w-full'}>\n                  <span>\n                    {total_nights} {total_nights > 1 ? 'Nights' : 'Night'}\n                  </span>\n                  <span>{formatAmount(calculateTotalCost(), app_store.userPreferences.currency_id)}</span>\n                </li>\n                {checkout_store.pickup?.location && (\n                  <li class={'flex items-center justify-between w-full'}>\n                    <span>Pickup fee</span>\n                    <span>{formatAmount(checkout_store.pickup.location ? Number(checkout_store.pickup.due_upon_booking) : 0, app_store.userPreferences.currency_id)}</span>\n                  </li>\n                )}\n                <li class={'flex items-center text-base font-medium justify-between w-full'}>\n                  <span>Total</span>\n                  <span>\n                    {formatAmount(\n                      calculateTotalCost() + (checkout_store.pickup.location ? Number(checkout_store.pickup.due_upon_booking) : 0),\n                      app_store.userPreferences.currency_id,\n                    )}\n                  </span>\n                </li>\n              </ul>\n            </div>\n            <div class={'w-full'}>\n              <ir-checkbox label=\"I agree to the privacy policy.\"></ir-checkbox>\n            </div>\n            <ir-button isLoading={this.isLoading} size=\"md\" class=\"w-full\" label=\"CONFIRM BOOKING\" onButtonClick={this.handleBooking.bind(this)}></ir-button>\n          </section>\n        </div>\n      </Host>\n    );\n  }\n}\n"]}