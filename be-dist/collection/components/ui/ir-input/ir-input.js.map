{"version":3,"file":"ir-input.js","sourceRoot":"","sources":["../../../../src/components/ui/ir-input/ir-input.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Prop, h, Event, EventEmitter, Element, Watch } from '@stencil/core';\r\nimport { v4 } from 'uuid';\r\nimport IMask, { InputMask } from 'imask';\r\n@Component({\r\n  tag: 'ir-input',\r\n  styleUrl: 'ir-input.css',\r\n  scoped: true,\r\n})\r\nexport class IrInput {\r\n  @Element() el: HTMLIrInputElement;\r\n  @Prop() inputId: string = v4();\r\n  @Prop({ reflect: true }) leftIcon: boolean = false;\r\n  @Prop({ reflect: true }) rightIcon: boolean = false;\r\n  @Prop() inputStyles: Partial<CSSStyleDeclaration>;\r\n  @Prop() value: string;\r\n  @Prop() type:\r\n    | 'button'\r\n    | 'checkbox'\r\n    | 'color'\r\n    | 'date'\r\n    | 'datetime-local'\r\n    | 'email'\r\n    | 'file'\r\n    | 'hidden'\r\n    | 'image'\r\n    | 'month'\r\n    | 'number'\r\n    | 'password'\r\n    | 'radio'\r\n    | 'range'\r\n    | 'reset'\r\n    | 'search'\r\n    | 'submit'\r\n    | 'tel'\r\n    | 'text'\r\n    | 'time'\r\n    | 'url'\r\n    | 'week' = 'text';\r\n  @Prop({ reflect: true }) name: string;\r\n  @Prop({ reflect: true }) placeholder: string;\r\n  @Prop({ reflect: true }) inputid: string;\r\n  @Prop({ reflect: true }) class: string;\r\n  @Prop({ reflect: true }) required: boolean;\r\n  @Prop({ reflect: true }) disabled: boolean;\r\n  @Prop({ reflect: true }) readonly: boolean;\r\n  @Prop({ reflect: true }) maxlength: number;\r\n  @Prop({ reflect: true }) min: string | number;\r\n  @Prop({ reflect: true }) max: string | number;\r\n  @Prop({ reflect: true }) step: string | number;\r\n  @Prop({ reflect: true }) pattern: string;\r\n  @Prop({ reflect: true }) autocomplete: string;\r\n  @Prop({ reflect: true }) autofocus: boolean;\r\n  @Prop({ reflect: true }) size: number;\r\n  @Prop({ reflect: true }) multiple: boolean;\r\n  @Prop() label: string;\r\n  @Prop() error: boolean = false;\r\n  @Prop() mask: Record<string, unknown>;\r\n  @Prop() labelBackground: string;\r\n\r\n  @Event({ bubbles: true, composed: true }) textChanged: EventEmitter<string>;\r\n  @Event({ bubbles: true, composed: true }) inputFocus: EventEmitter<FocusEvent>;\r\n  @Event({ bubbles: true, composed: true }) inputBlur: EventEmitter<FocusEvent>;\r\n\r\n  private inputEl: HTMLDivElement;\r\n  private maskInstance: InputMask<any>;\r\n  input: HTMLInputElement;\r\n\r\n  applyStyles(style: Partial<CSSStyleDeclaration>) {\r\n    for (const property in style) {\r\n      if (style.hasOwnProperty(property)) {\r\n        this.inputEl.style[property] = style[property];\r\n      }\r\n    }\r\n  }\r\n  private initializeOrUpdateMask() {\r\n    const input = this.el.querySelector('input') as HTMLInputElement;\r\n    if (this.mask) {\r\n      if (this.maskInstance) {\r\n        this.maskInstance.updateOptions(this.mask);\r\n        if (this.value) this.maskInstance.updateValue();\r\n      } else {\r\n        this.maskInstance = IMask(input, this.mask);\r\n        this.maskInstance.on('accept', () => {\r\n          this.textChanged.emit(this.maskInstance.value);\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidLoad() {\r\n    if (this.inputStyles) {\r\n      this.applyStyles(this.inputStyles);\r\n    }\r\n    if (this.mask) {\r\n      console.log('first');\r\n      this.initializeOrUpdateMask();\r\n      this.input = this.el.querySelector(`input`) as HTMLInputElement;\r\n      const mask = IMask(this.input, this.mask);\r\n\r\n      mask.on('accept', () => {\r\n        this.textChanged.emit(mask.value);\r\n      });\r\n      mask.updateValue();\r\n    }\r\n  }\r\n  @Watch('mask')\r\n  maskPropChanged(newValue: Record<string, unknown>, oldValue: Record<string, unknown>) {\r\n    if (newValue !== oldValue) {\r\n      if (this.maskInstance) {\r\n        this.maskInstance.destroy();\r\n      }\r\n      this.initializeOrUpdateMask();\r\n    }\r\n  }\r\n\r\n  @Watch('value')\r\n  valueChanged(newValue: string, oldValue: string) {\r\n    if (newValue !== oldValue) {\r\n      if (this.maskInstance && newValue !== '') {\r\n        this.maskInstance.value = newValue;\r\n        this.maskInstance.updateValue();\r\n      }\r\n    }\r\n  }\r\n  @Watch('error')\r\n  onErrorChange(newValue: boolean, oldValue: boolean) {\r\n    if (newValue !== oldValue) {\r\n      if (newValue) {\r\n        this.el.setAttribute('data-state', 'error');\r\n      } else {\r\n        if (this.el.hasAttribute('data-state')) {\r\n          this.el.removeAttribute('data-state');\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  handleBlur(event: FocusEvent) {\r\n    this.inputEl.classList.remove('focused');\r\n    if ((event.target as HTMLInputElement).value) {\r\n      this.inputEl.classList.add('has-value');\r\n    } else {\r\n      this.inputEl.classList.remove('has-value');\r\n    }\r\n    this.inputBlur.emit(event);\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    if (this.maskInstance) {\r\n      this.maskInstance.destroy();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div ref={el => (this.inputEl = el)} class={`input-container  ${this.disabled ? 'disabled' : ''}`} data-context={this.leftIcon ? 'icon' : ''}>\r\n        {this.leftIcon && (\r\n          <label htmlFor={this.inputId} class=\"left-icon\">\r\n            <slot name=\"left-icon\"></slot>\r\n          </label>\r\n        )}\r\n        <input\r\n          type={this.type}\r\n          name={this.name}\r\n          placeholder={this.placeholder}\r\n          id={this.inputId}\r\n          class={this.class}\r\n          required={this.required}\r\n          disabled={this.disabled}\r\n          readonly={this.readonly}\r\n          maxlength={this.maxlength}\r\n          min={this.min}\r\n          max={this.max}\r\n          step={this.step}\r\n          pattern={this.pattern}\r\n          autocomplete={this.autocomplete}\r\n          autofocus={this.autofocus}\r\n          size={this.size}\r\n          multiple={this.multiple}\r\n          value={this.value}\r\n          onInput={e => this.textChanged.emit((e.target as HTMLInputElement).value)}\r\n          onBlur={this.handleBlur.bind(this)}\r\n          onFocus={e => this.inputFocus.emit(e)}\r\n        />\r\n        <p class=\"placeholder\" style={{ '--label-background': this.labelBackground }}>\r\n          {this.label}\r\n        </p>\r\n        {this.rightIcon && (\r\n          <label htmlFor={this.inputId} class=\"right-icon\">\r\n            <slot name=\"right-icon\"></slot>\r\n          </label>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]}