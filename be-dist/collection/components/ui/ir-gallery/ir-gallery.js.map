{"version":3,"file":"ir-gallery.js","sourceRoot":"","sources":["../../../../src/components/ui/ir-gallery/ir-gallery.tsx"],"names":[],"mappings":"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","sourcesContent":["import { onAppDataChange } from '@/stores/app.store';\r\nimport { Component, Event, EventEmitter, Prop, Watch, h } from '@stencil/core';\r\nimport Swiper from 'swiper';\r\nimport { Navigation } from 'swiper/modules';\r\n\r\n@Component({\r\n  tag: 'ir-gallery',\r\n  styleUrl: 'ir-gallery.css',\r\n  shadow: true,\r\n})\r\nexport class IrGallery {\r\n  @Prop() images: { url: string; alt: string }[] = [];\r\n  @Prop() totalImages: number = 0;\r\n  @Prop() maxLength: number;\r\n  @Prop() disableCarouselClick: boolean = false;\r\n  @Prop() enableCarouselSwipe: boolean = false;\r\n  @Prop() carouselStyles: Partial<CSSStyleDeclaration>;\r\n  @Prop() carouselClasses: string;\r\n  @Event() openGallery: EventEmitter<number>;\r\n  private swiperInstance: Swiper;\r\n\r\n  carouselEl: HTMLDivElement;\r\n  nextEl: HTMLElement;\r\n  prevEl: HTMLElement;\r\n\r\n  componentWillLoad() {\r\n    if (!this.maxLength) {\r\n      this.maxLength = this.totalImages;\r\n    }\r\n    onAppDataChange('dir', () => {\r\n      this.reinitializeSwiper();\r\n    });\r\n  }\r\n  componentDidLoad() {\r\n    this.initializeSwiper();\r\n    setTimeout(() => {\r\n      this.applyStyles();\r\n    }, 10);\r\n  }\r\n  @Watch('carouselStyles')\r\n  handleStylesChange() {\r\n    this.applyStyles();\r\n  }\r\n  applyStyles() {\r\n    if (!this.carouselStyles || !this.carouselEl) {\r\n      return;\r\n    }\r\n    for (const property in this.carouselStyles) {\r\n      if (this.carouselStyles.hasOwnProperty(property)) {\r\n        this.carouselEl.style[property] = this.carouselStyles[property];\r\n      }\r\n    }\r\n  }\r\n  initializeSwiper() {\r\n    if (this.swiperInstance) {\r\n      return;\r\n    }\r\n    this.swiperInstance = new Swiper(this.carouselEl, {\r\n      modules: [Navigation],\r\n      simulateTouch: this.enableCarouselSwipe,\r\n      allowTouchMove: this.enableCarouselSwipe,\r\n      direction: 'horizontal',\r\n      touchMoveStopPropagation: this.enableCarouselSwipe,\r\n      navigation: {\r\n        nextEl: this.nextEl,\r\n        prevEl: this.prevEl,\r\n      },\r\n    });\r\n  }\r\n  reinitializeSwiper() {\r\n    if (this.swiperInstance) {\r\n      this.swiperInstance.destroy(true, true);\r\n      this.swiperInstance = null;\r\n    }\r\n    this.initializeSwiper();\r\n  }\r\n  private handleOpenGallery(index = 0) {\r\n    if (this.totalImages <= 1) {\r\n      return;\r\n    }\r\n    this.openGallery.emit(index);\r\n  }\r\n  render() {\r\n    return (\r\n      <div class=\"gallery-container\">\r\n        {this.totalImages > 1 && (\r\n          <button onClick={() => this.handleOpenGallery()} class=\"total-images-number\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"15.75\" viewBox=\"0 0 576 512\">\r\n              <path\r\n                fill=\"currentColor\"\r\n                d=\"M160 80H512c8.8 0 16 7.2 16 16V320c0 8.8-7.2 16-16 16H490.8L388.1 178.9c-4.4-6.8-12-10.9-20.1-10.9s-15.7 4.1-20.1 10.9l-52.2 79.8-12.4-16.9c-4.5-6.2-11.7-9.8-19.4-9.8s-14.8 3.6-19.4 9.8L175.6 336H160c-8.8 0-16-7.2-16-16V96c0-8.8 7.2-16 16-16zM96 96V320c0 35.3 28.7 64 64 64H512c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H160c-35.3 0-64 28.7-64 64zM48 120c0-13.3-10.7-24-24-24S0 106.7 0 120V344c0 75.1 60.9 136 136 136H456c13.3 0 24-10.7 24-24s-10.7-24-24-24H136c-48.6 0-88-39.4-88-88V120zm208 24a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z\"\r\n              />\r\n            </svg>\r\n            <span>{this.totalImages} +</span>\r\n          </button>\r\n        )}\r\n        <div class={`swiper ${this.carouselClasses ?? ''}`} ref={el => (this.carouselEl = el)}>\r\n          <div class=\"swiper-wrapper\">\r\n            {this.images.map(image => (\r\n              <div class=\"swiper-slide\" data-swipable={this.enableCarouselSwipe}>\r\n                {!this.disableCarouselClick && (\r\n                  <button class=\"absolute\">\r\n                    <p class=\"sr-only\">open gallery</p>\r\n                  </button>\r\n                )}\r\n                <img\r\n                  data-disabled={this.disableCarouselClick}\r\n                  onClick={() => {\r\n                    if (this.disableCarouselClick) {\r\n                      return;\r\n                    }\r\n                    this.handleOpenGallery();\r\n                  }}\r\n                  importance=\"high\"\r\n                  draggable={false}\r\n                  src={image.url}\r\n                  alt={image.alt}\r\n                />\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div class=\"swiper-button-prev\" ref={el => (this.prevEl = el)}>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"10\" width=\"6.25\" viewBox=\"0 0 320 512\">\r\n              <path d=\"M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z\" />\r\n            </svg>\r\n          </div>\r\n          <div class=\"swiper-button-next\" ref={el => (this.nextEl = el)}>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"10\" width=\"6.25\" viewBox=\"0 0 320 512\">\r\n              <path d=\"M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z\" />\r\n            </svg>\r\n          </div>\r\n        </div>\r\n        <div class={'gallery'} data-images={this.images.length}>\r\n          {this.images.slice(0, this.maxLength).map((image, idx) => (\r\n            <figure class=\"gallery-item\">\r\n              <button class=\"absolute\">\r\n                <p class=\"sr-only\">open gallery</p>\r\n              </button>\r\n              <img loading=\"lazy\" onClick={() => this.handleOpenGallery(idx)} src={image.url} alt={image.alt} />\r\n            </figure>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]}