{"version":3,"file":"ir-phone-input.js","sourceRoot":"","sources":["../../../../src/components/ui/ir-phone-input/ir-phone-input.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE,QAAQ,EAAE,KAAK,EAAgB,IAAI,EAAE,MAAM,eAAe,CAAC;AAClG,OAAO,EAAE,YAAY,EAAE,MAAM,gBAAgB,CAAC;AAC9C,OAAO,kBAAkB,MAAM,oBAAoB,CAAC;AACpD,OAAO,EAAE,aAAa,EAAE,MAAM,+BAA+B,CAAC;AAC9D,OAAO,SAAS,MAAM,oBAAoB,CAAC;AAE3C,OAAO,EAAE,kBAAkB,EAAE,MAAM,yBAAyB,CAAC;AAC7D,OAAO,cAAc,MAAM,6BAA6B,CAAC;AAOzD,MAAM,OAAO,YAAY;;QAYf,oBAAe,GAAG,IAAI,CAAC;QAKvB,kBAAa,GAAG,IAAI,aAAa,EAAE,CAAC;QAMpC,cAAS,GAAe,EAAE,CAAC;QAwCnC,uBAAkB,GAAG,CAAC,KAAiB,EAAE,EAAE;YACzC,MAAM,YAAY,GAAG,OAAO,KAAK,CAAC,YAAY,KAAK,UAAU,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YACzG,IAAI,YAAY,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;gBACnC,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAC1B,CAAC;QACH,CAAC,CAAC;QACF,wBAAmB,GAAG,CAAC,CAAgB,EAAE,EAAE;YACzC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;gBACpB,OAAO;YACT,CAAC;YACD,IAAI,CAAC,CAAC,GAAG,KAAK,QAAQ,EAAE,CAAC;gBACvB,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAC1B,CAAC;YACD,OAAO;QACT,CAAC,CAAC;;6BA3E8B,EAAE;yBAEJ,KAAK;uCACQ,CAAC,CAAC;;iCAEJ,EAAE;0BACb,EAAE;;IAmBhC,KAAK,CAAC,iBAAiB;QACrB,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACtD,MAAM,IAAI,CAAC,mBAAmB,EAAE,CAAC;QACjC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,aAAa,CAAC;IACvC,CAAC;IACD,gBAAgB;QACd,IAAI,CAAC,iBAAiB,EAAE,CAAC;IAC3B,CAAC;IACD,KAAK,CAAC,mBAAmB;QACvB,MAAM,CAAC,YAAY,EAAE,SAAS,CAAC,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,qBAAqB,EAAE,EAAE,MAAM,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,SAAS,CAAC,eAAe,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;QAChL,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAC3B,IAAI,YAAY,EAAE,CAAC;YACjB,MAAM,eAAe,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,YAAY,CAAC,UAAU,CAAC,CAAC;YACnF,IAAI,eAAe,EAAE,CAAC;gBACpB,kBAAkB,CAAC,YAAY,EAAE,eAAe,CAAC,EAAE,CAAC,CAAC;gBACrD,IAAI,CAAC,YAAY,GAAG,eAAe,CAAC;gBACpC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,YAAY,EAAE,IAAI,CAAC,YAAY,CAAC,YAAY,EAAE,MAAM,EAAE,EAAE,EAAE,CAAC,CAAC;YACrF,CAAC;QACH,CAAC;QACD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,SAAS,CAAC;IAC1C,CAAC;IACD,iBAAiB;QACf,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,EAAE,CAAC;YAC/C,IAAI,CAAC,eAAe,GAAG,YAAY,CAAC,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,cAAc,EAAE;gBAC5E,SAAS,EAAE,kBAAkB,CAAC,GAAG,KAAK,KAAK,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,YAAY;gBAC3E,SAAS,EAAE;oBACT;wBACE,IAAI,EAAE,QAAQ;wBACd,OAAO,EAAE;4BACP,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;yBACf;qBACF;iBACF;aACF,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IAgBD,KAAK,CAAC,gBAAgB;QACpB,IAAI,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;QACjC,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,SAAS,CAAC;QACxC,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,eAAe,EAAE,CAAC;YAC3C,UAAU,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,EAAE,EAAE,CAAC,CAAC;YAC/C,MAAM,UAAU,GAAG,kBAAkB,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,KAAK,CAAC;YACjE,IACE,CAAC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,KAAK,cAAc,IAAI,UAAU,KAAK,KAAK,CAAC;gBACzF,CAAC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,KAAK,YAAY,IAAI,UAAU,KAAK,KAAK,CAAC,EACvF,CAAC;gBACD,IAAI,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC;gBAChE,IAAI,UAAU,KAAK,KAAK,EAAE,CAAC;oBACzB,YAAY,GAAG,YAAY,CAAC,OAAO,CAAC,cAAc,EAAE,YAAY,CAAC,CAAC;gBACpE,CAAC;qBAAM,CAAC;oBACN,YAAY,GAAG,YAAY,CAAC,OAAO,CAAC,YAAY,EAAE,cAAc,CAAC,CAAC;gBACpE,CAAC;gBACD,IAAI,CAAC,eAAe;qBACjB,UAAU,CAAC;oBACV,SAAS,EAAE,YAAY;iBACxB,CAAC;qBACD,IAAI,CAAC,GAAG,EAAE;oBACT,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,CAAC;gBAChC,CAAC,CAAC,CAAC;YACP,CAAC;iBAAM,CAAC;gBACN,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,CAAC;YAChC,CAAC;QACH,CAAC;QACD,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;YACnB,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,QAAQ,CAAC;YACxC,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;YAClE,QAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;QACvE,CAAC;aAAM,CAAC;YACN,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,SAAS,CAAC;YACzC,QAAQ,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;YACrE,QAAQ,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;QAC1E,CAAC;IACH,CAAC;IACD,oBAAoB;QAClB,QAAQ,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;QACrE,QAAQ,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;QACxE,IAAI,IAAI,CAAC,eAAe,EAAE,CAAC;YACzB,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,CAAC;QACjC,CAAC;IACH,CAAC;IACD,yBAAyB;;QACvB,MAAM,IAAI,GAAG,MAAA,IAAI,CAAC,EAAE,CAAC,UAAU,0CAAE,aAAa,CAAC,kBAAkB,IAAI,CAAC,uBAAuB,GAAG,CAAC,GAAG,CAAkB,CAAC;QACvH,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,cAAc,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,CAAC,CAAC;IAC5C,CAAC;IACD,yBAAyB,CAAC,CAAgB;QACxC,IAAI,CAAC,CAAC,GAAG,KAAK,WAAW,EAAE,CAAC;YAC1B,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,IAAI,CAAC,uBAAuB,GAAG,CAAC,IAAI,CAAC,uBAAuB,GAAG,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;YAClI,IAAI,CAAC,yBAAyB,EAAE,CAAC;QACnC,CAAC;aAAM,IAAI,CAAC,CAAC,GAAG,KAAK,SAAS,EAAE,CAAC;YAC/B,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,IAAI,CAAC,uBAAuB,GAAG,CAAC,IAAI,CAAC,uBAAuB,GAAG,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;YAClI,IAAI,CAAC,yBAAyB,EAAE,CAAC;QACnC,CAAC;aAAM,IAAI,CAAC,CAAC,GAAG,KAAK,OAAO,EAAE,CAAC;YAC7B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;QAChD,CAAC;IACH,CAAC;IACD,UAAU,CAAC,KAAa;QACtB,IAAI,CAAC,uBAAuB,GAAG,KAAK,CAAC;QACrC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;QAClD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,SAAS,CAAC;QACxC,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;QACxB,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC1B,CAAC;IACD,UAAU,CAAC,GAAW;QACpB,IAAI,GAAG,KAAK,EAAE,EAAE,CAAC;YACf,OAAO,CAAC,IAAI,CAAC,iBAAiB,GAAG,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;QACxD,CAAC;QACD,IAAI,CAAC,iBAAiB,GAAG,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;IACxG,CAAC;IACD,uBAAuB,CAAC,CAAa;QACnC,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,MAAM,KAAK,GAAI,CAAC,CAAC,MAA2B,CAAC,KAAK,CAAC;QACnD,IAAI,IAAI,CAAC,eAAe,EAAE,CAAC;YACzB,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QACrC,CAAC;QACD,IAAI,CAAC,eAAe,GAAG,UAAU,CAAC,GAAG,EAAE;YACrC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QACzB,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IACD,iBAAiB,CAAC,CAAa;;QAC7B,IAAI,YAAY,GAAG,CAAC,CAAC,MAA0B,CAAC;QAChD,IAAI,UAAU,GAAG,YAAY,CAAC,KAAK,CAAC;QACpC,UAAU,GAAG,UAAU,CAAC,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;QAChD,YAAY,CAAC,KAAK,GAAG,UAAU,CAAC;QAChC,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,YAAY,EAAE,MAAA,IAAI,CAAC,YAAY,0CAAE,YAAY,EAAE,MAAM,EAAE,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;IACnG,CAAC;IACD,MAAM;;QACJ,OAAO,CACL,4DAAK,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC,EAAE,KAAK,EAAC,uBAAuB;YACvE,4DAAK,KAAK,EAAE,iBAAiB,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE;gBACtD,4DAAK,KAAK,EAAC,eAAe;oBACxB,8DAAO,OAAO,EAAC,gBAAgB,IAAE,cAAc,CAAC,OAAO,CAAC,WAAW,CAAS;oBAC5E,4DACE,EAAE,EAAC,gBAAgB,EACnB,OAAO,EAAE,GAAG,EAAE;4BACZ,IAAI,CAAC,gBAAgB,EAAE,CAAC;wBAC1B,CAAC,EACD,KAAK,EAAC,kBAAkB;wBAEvB,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CACnB,EAAC,QAAQ;4BACP,WAAK,GAAG,EAAE,MAAA,IAAI,CAAC,YAAY,0CAAE,IAAI,EAAE,GAAG,EAAE,MAAA,IAAI,CAAC,YAAY,0CAAE,IAAI,EAAE,KAAK,EAAC,WAAW,GAAG;4BACrF,gBAAO,MAAA,IAAI,CAAC,YAAY,0CAAE,YAAY,CAAQ,CACrC,CACZ,CAAC,CAAC,CAAC,CACF,yBAAmB,CACpB;wBAED,4DAAK,KAAK,EAAC,IAAI,EAAC,MAAM,EAAC,IAAI,EAAC,OAAO,EAAC,WAAW,EAAC,IAAI,EAAC,MAAM,EAAC,KAAK,EAAC,4BAA4B;4BAC5F,6DACE,CAAC,EAAC,krBAAkrB,EACprB,IAAI,EAAC,cAAc,eACT,SAAS,eACT,SAAS,GACb,CACJ,CACF,CACF;gBACN,4DAAK,KAAK,EAAC,eAAe;oBACxB,8DAAO,OAAO,EAAC,cAAc,IAAE,cAAc,CAAC,OAAO,CAAC,gBAAgB,CAAS;oBAC/E,8DACE,IAAI,EAAC,OAAO,EACZ,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC,EACjC,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,EACxC,OAAO,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC,EAC1C,OAAO,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,EACvC,EAAE,EAAC,cAAc,EACjB,KAAK,EAAE,IAAI,CAAC,UAAU,EACtB,KAAK,EAAC,kBAAkB,GACxB,CACE,CACF;YAEN,4DAAK,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC,EAAE,KAAK,EAAC,oBAAoB,IACnE,IAAI,CAAC,SAAS,IAAI,CACjB,UAAI,KAAK,EAAC,kBAAkB;gBAC1B,UAAI,KAAK,EAAC,kBAAkB;oBAC1B,gBAAU,IAAI,EAAC,QAAQ,EAAC,YAAY,EAAC,aAAa,GAAY;oBAC9D,aACE,WAAW,EAAE,cAAc,CAAC,OAAO,CAAC,UAAU,EAC9C,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC,EAClC,IAAI,EAAC,MAAM,EACX,OAAO,EAAE,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,IAAI,CAAC,EAChD,KAAK,EAAC,cAAc,EACpB,SAAS,EAAE,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,IAAI,CAAC,GACpD,CACC;gBACJ,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE,CAAC,CAC5C,wBACc,IAAI,CAAC,uBAAuB,KAAK,KAAK,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,WAAW,sBAC1D,IAAI,CAAC,uBAAuB,KAAK,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,EAC3E,KAAK,EAAC,eAAe,EACrB,GAAG,EAAE,KAAK,EACV,IAAI,EAAC,QAAQ,EACb,OAAO,EAAE,GAAG,EAAE;wBACZ,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;oBACzB,CAAC,EACD,WAAW,EAAE,GAAG,EAAE;wBAChB,IAAI,CAAC,uBAAuB,GAAG,KAAK,CAAC;oBACvC,CAAC;oBAED,WAAK,KAAK,EAAC,uBAAuB;wBAChC,WAAK,GAAG,EAAE,KAAK,CAAC,IAAI,EAAE,GAAG,EAAE,KAAK,CAAC,IAAI,EAAE,KAAK,EAAC,WAAW,GAAG;wBAC3D,gBAAO,KAAK,CAAC,IAAI,CAAQ;wBACzB;;4BAAQ,KAAK,CAAC,YAAY;gCAAS,CAC/B;oBACL,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC,EAAE,KAAK,KAAK,CAAC,EAAE,IAAI,gBAAU,IAAI,EAAC,OAAO,EAAC,YAAY,EAAC,YAAY,GAAY,CACpH,CACN,CAAC,CACC,CACN,CACG,CACF,CACP,CAAC;IACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import { Component, h, State, Element, Fragment, Event, EventEmitter, Prop } from '@stencil/core';\r\nimport { createPopper } from '@popperjs/core';\r\nimport localization_store from '@/stores/app.store';\r\nimport { CommonService } from '@/services/api/common.service';\r\nimport app_store from '@/stores/app.store';\r\nimport { ICountry } from '@/models/common';\r\nimport { updateUserFormData } from '@/stores/checkout.store';\r\nimport localizedWords from '@/stores/localization.store';\r\n\r\n@Component({\r\n  tag: 'ir-phone-input',\r\n  styleUrl: 'ir-phone-input.css',\r\n  shadow: true,\r\n})\r\nexport class IrPhoneInput {\r\n  @Prop() error: boolean;\r\n  @Prop() mobile_number: string = '';\r\n\r\n  @State() isVisible: boolean = false;\r\n  @State() currentHighlightedIndex: number = -1;\r\n  @State() selectedItem: ICountry;\r\n  @State() filteredCountries: ICountry[] = [];\r\n  @State() inputValue: string = '';\r\n\r\n  @Element() el: HTMLElement;\r\n\r\n  private popoverInstance = null;\r\n  private triggerElement: HTMLElement;\r\n  private contentElement: HTMLElement;\r\n  private debounceTimeout: NodeJS.Timeout;\r\n\r\n  private commonService = new CommonService();\r\n\r\n  @Event() textChange: EventEmitter<{ phone_prefix: string; mobile: string }>;\r\n  @Event() phoneInputBlur: EventEmitter<FocusEvent>;\r\n  @Event() phoneInputFocus: EventEmitter<FocusEvent>;\r\n\r\n  private countries: ICountry[] = [];\r\n  searchInput: HTMLInputElement;\r\n  phoneInput: HTMLInputElement;\r\n\r\n  async componentWillLoad() {\r\n    this.commonService.setToken(app_store.app_data.token);\r\n    await this.initializeCountries();\r\n    this.inputValue = this.mobile_number;\r\n  }\r\n  componentDidLoad() {\r\n    this.initializePopover();\r\n  }\r\n  async initializeCountries() {\r\n    const [user_country, countries] = await Promise.all([this.commonService.getUserDefaultCountry(), await this.commonService.getCountries(app_store.userPreferences.language_id)]);\r\n    this.countries = countries;\r\n    if (user_country) {\r\n      const selectedCountry = this.countries.find(c => c.id === user_country.COUNTRY_ID);\r\n      if (selectedCountry) {\r\n        updateUserFormData('country_id', selectedCountry.id);\r\n        this.selectedItem = selectedCountry;\r\n        this.textChange.emit({ phone_prefix: this.selectedItem.phone_prefix, mobile: '' });\r\n      }\r\n    }\r\n    this.filteredCountries = this.countries;\r\n  }\r\n  initializePopover() {\r\n    if (this.triggerElement && this.contentElement) {\r\n      this.popoverInstance = createPopper(this.triggerElement, this.contentElement, {\r\n        placement: localization_store.dir === 'LTR' ? 'bottom-start' : 'bottom-end',\r\n        modifiers: [\r\n          {\r\n            name: 'offset',\r\n            options: {\r\n              offset: [0, 3],\r\n            },\r\n          },\r\n        ],\r\n      });\r\n    }\r\n  }\r\n  handleOutsideClick = (event: MouseEvent) => {\r\n    const outsideClick = typeof event.composedPath === 'function' && !event.composedPath().includes(this.el);\r\n    if (outsideClick && this.isVisible) {\r\n      this.toggleVisibility();\r\n    }\r\n  };\r\n  handleKeyboardPress = (e: KeyboardEvent) => {\r\n    if (!this.isVisible) {\r\n      return;\r\n    }\r\n    if (e.key === 'Escape') {\r\n      this.toggleVisibility();\r\n    }\r\n    return;\r\n  };\r\n  async toggleVisibility() {\r\n    this.isVisible = !this.isVisible;\r\n    this.filteredCountries = this.countries;\r\n    if (this.isVisible && this.popoverInstance) {\r\n      setTimeout(() => this.searchInput.focus(), 20);\r\n      const currentDir = localization_store.dir.toLowerCase() || 'ltr';\r\n      if (\r\n        (this.popoverInstance.state.options.placement === 'bottom-start' && currentDir === 'rtl') ||\r\n        (this.popoverInstance.state.options.placement === 'bottom-end' && currentDir === 'ltr')\r\n      ) {\r\n        let newPlacement = this.popoverInstance.state.options.placement;\r\n        if (currentDir === 'rtl') {\r\n          newPlacement = newPlacement.replace('bottom-start', 'bottom-end');\r\n        } else {\r\n          newPlacement = newPlacement.replace('bottom-end', 'bottom-start');\r\n        }\r\n        this.popoverInstance\r\n          .setOptions({\r\n            placement: newPlacement,\r\n          })\r\n          .then(() => {\r\n            this.popoverInstance.update();\r\n          });\r\n      } else {\r\n        this.popoverInstance.update();\r\n      }\r\n    }\r\n    if (this.isVisible) {\r\n      document.body.style.overflow = 'hidden';\r\n      document.addEventListener('click', this.handleOutsideClick, true);\r\n      document.addEventListener('keydown', this.handleKeyboardPress, true);\r\n    } else {\r\n      document.body.style.overflow = 'visible';\r\n      document.removeEventListener('click', this.handleOutsideClick, true);\r\n      document.removeEventListener('keydown', this.handleKeyboardPress, true);\r\n    }\r\n  }\r\n  disconnectedCallback() {\r\n    document.removeEventListener('click', this.handleOutsideClick, true);\r\n    document.removeEventListener('keydown', this.handleKeyboardPress, true);\r\n    if (this.popoverInstance) {\r\n      this.popoverInstance.destroy();\r\n    }\r\n  }\r\n  synchroniseSuggestionsBox() {\r\n    const item = this.el.shadowRoot?.querySelector(`li:nth-of-type(${this.currentHighlightedIndex + 1})`) as HTMLLIElement;\r\n    item?.scrollIntoView({ block: 'center' });\r\n  }\r\n  handleAutoCompleteKeyDown(e: KeyboardEvent) {\r\n    if (e.key === 'ArrowDown') {\r\n      e.preventDefault();\r\n      this.currentHighlightedIndex = (this.currentHighlightedIndex + 1 + this.filteredCountries.length) % this.filteredCountries.length;\r\n      this.synchroniseSuggestionsBox();\r\n    } else if (e.key === 'ArrowUp') {\r\n      e.preventDefault();\r\n      this.currentHighlightedIndex = (this.currentHighlightedIndex - 1 + this.filteredCountries.length) % this.filteredCountries.length;\r\n      this.synchroniseSuggestionsBox();\r\n    } else if (e.key === 'Enter') {\r\n      this.selectItem(this.currentHighlightedIndex);\r\n    }\r\n  }\r\n  selectItem(index: number) {\r\n    this.currentHighlightedIndex = index;\r\n    this.selectedItem = this.filteredCountries[index];\r\n    this.filteredCountries = this.countries;\r\n    this.phoneInput.focus();\r\n    this.toggleVisibility();\r\n  }\r\n  filterData(str: string) {\r\n    if (str === '') {\r\n      return (this.filteredCountries = [...this.countries]);\r\n    }\r\n    this.filteredCountries = [...this.countries.filter(d => d.name.toLowerCase().startsWith(str.trim()))];\r\n  }\r\n  handleFilterInputChange(e: InputEvent) {\r\n    e.stopPropagation();\r\n    const value = (e.target as HTMLInputElement).value;\r\n    if (this.debounceTimeout) {\r\n      clearTimeout(this.debounceTimeout);\r\n    }\r\n    this.debounceTimeout = setTimeout(() => {\r\n      this.filterData(value);\r\n    }, 300);\r\n  }\r\n  handleInputChange(e: InputEvent) {\r\n    let inputElement = e.target as HTMLInputElement;\r\n    let inputValue = inputElement.value;\r\n    inputValue = inputValue.replace(/[^+\\d]+/g, '');\r\n    inputElement.value = inputValue;\r\n    this.inputValue = inputValue;\r\n    this.textChange.emit({ phone_prefix: this.selectedItem?.phone_prefix, mobile: this.inputValue });\r\n  }\r\n  render() {\r\n    return (\r\n      <div ref={el => (this.triggerElement = el)} class=\"phone-input-container\">\r\n        <div class={`input-trigger ${this.error ? 'error' : ''}`}>\r\n          <div class=\"input-section\">\r\n            <label htmlFor=\"country_picker\">{localizedWords.entries.Lcz_Country}</label>\r\n            <div\r\n              id=\"country_picker\"\r\n              onClick={() => {\r\n                this.toggleVisibility();\r\n              }}\r\n              class=\"input-subtrigger\"\r\n            >\r\n              {this.selectedItem ? (\r\n                <Fragment>\r\n                  <img src={this.selectedItem?.flag} alt={this.selectedItem?.name} class=\"flag-icon\" />\r\n                  <span>{this.selectedItem?.phone_prefix}</span>\r\n                </Fragment>\r\n              ) : (\r\n                <span>Select</span>\r\n              )}\r\n\r\n              <svg width=\"15\" height=\"15\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path\r\n                  d=\"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z\"\r\n                  fill=\"currentColor\"\r\n                  fill-rule=\"evenodd\"\r\n                  clip-rule=\"evenodd\"\r\n                ></path>\r\n              </svg>\r\n            </div>\r\n          </div>\r\n          <div class=\"input-section\">\r\n            <label htmlFor=\"phone_number\">{localizedWords.entries.Lcz_MobileNumber}</label>\r\n            <input\r\n              type=\"phone\"\r\n              ref={el => (this.phoneInput = el)}\r\n              onBlur={e => this.phoneInputBlur.emit(e)}\r\n              onFocus={e => this.phoneInputFocus.emit(e)}\r\n              onInput={e => this.handleInputChange(e)}\r\n              id=\"phone_number\"\r\n              value={this.inputValue}\r\n              class=\"input-subtrigger\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div ref={el => (this.contentElement = el)} class=\"dropdown-container\">\r\n          {this.isVisible && (\r\n            <ul class=\"dropdown-content\">\r\n              <li class=\"filter-container\">\r\n                <ir-icons name=\"search\" svgClassName=\"filter-icon\"></ir-icons>\r\n                <input\r\n                  placeholder={localizedWords.entries.Lcz_Search}\r\n                  ref={el => (this.searchInput = el)}\r\n                  type=\"text\"\r\n                  onInput={this.handleFilterInputChange.bind(this)}\r\n                  class=\"filter-input\"\r\n                  onKeyDown={this.handleAutoCompleteKeyDown.bind(this)}\r\n                />\r\n              </li>\r\n              {this.filteredCountries.map((value, index) => (\r\n                <li\r\n                  data-state={this.currentHighlightedIndex === index ? 'checked' : 'unchecked'}\r\n                  data-highlighted={this.currentHighlightedIndex === index ? 'true' : 'false'}\r\n                  class=\"combobox-item\"\r\n                  key={index}\r\n                  role=\"option\"\r\n                  onClick={() => {\r\n                    this.selectItem(index);\r\n                  }}\r\n                  onMouseOver={() => {\r\n                    this.currentHighlightedIndex = index;\r\n                  }}\r\n                >\r\n                  <div class=\"combobox-item-content\">\r\n                    <img src={value.flag} alt={value.name} class=\"flag-icon\" />\r\n                    <span>{value.name}</span>\r\n                    <span>({value.phone_prefix})</span>\r\n                  </div>\r\n                  {this.selectedItem && this.selectedItem.id === value.id && <ir-icons name=\"check\" svgClassName=\"check-icon\"></ir-icons>}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]}