{"version":3,"file":"ir-booking-cancelation.js","sourceRoot":"","sources":["../../../src/components/ir-booking-cancelation/ir-booking-cancelation.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,KAAK,EAAgB,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,eAAe,CAAC;AAChF,OAAO,EAAE,gBAAgB,EAAE,MAAM,+BAA+B,CAAC;AACjE,OAAO,EAAE,cAAc,EAAE,MAAM,gCAAgC,CAAC;AAChE,OAAO,SAAS,MAAM,oBAAoB,CAAC;AAO3C,MAAM,OAAO,oBAAoB;;QAQvB,mBAAc,GAAG,IAAI,cAAc,EAAE,CAAC;;;;IAE9C,iBAAiB;QACf,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;IACzD,CAAC;IAGD,KAAK,CAAC,UAAU;QACd,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC3B,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC;IAC/B,CAAC;IAEO,gBAAgB;QACtB,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;QAC9B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC9B,CAAC;IAED,MAAM;QACJ,OAAO,CACL;YACE,wEAAiB,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;gBACjD,2DAAI,IAAI,EAAC,aAAa,2BAA0B;gBAChD,0DAAG,IAAI,EAAC,YAAY,EAAC,KAAK,EAAC,MAAM,EAAC,SAAS,EAAE,IAAI,CAAC,WAAW,GAAM;gBACnE,4DAAK,IAAI,EAAC,cAAc;oBACtB,kEACE,KAAK,EAAC,QAAQ,EACd,QAAQ,EAAC,SAAS,EAClB,aAAa,EAAE,GAAG,EAAE;4BAClB,IAAI,CAAC,gBAAgB,EAAE,CAAC;wBAC1B,CAAC,GACU;oBACb,kEACE,KAAK,EAAC,kBAAkB,EACxB,SAAS,EAAE,gBAAgB,CAAC,8BAA8B,CAAC,EAC3D,aAAa,EAAE,KAAK,IAAI,EAAE;4BACxB,IAAI,CAAC;gCACH,MAAM,IAAI,CAAC,cAAc,CAAC,yBAAyB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;gCACtE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,SAAS,EAAE,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;gCACjF,IAAI,CAAC,gBAAgB,EAAE,CAAC;4BAC1B,CAAC;4BAAC,OAAO,KAAK,EAAE,CAAC;gCACf,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;gCACrB,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;4BAClF,CAAC;wBACH,CAAC,GACU,CACT,CACU,CACd,CACP,CAAC;IACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import { Component, Event, EventEmitter, h, Method, Prop } from '@stencil/core';\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\nimport { PaymentService } from '@/services/api/payment.service';\nimport app_store from '@/stores/app.store';\n\n@Component({\n  tag: 'ir-booking-cancelation',\n  styleUrl: 'ir-booking-cancelation.css',\n  shadow: true,\n})\nexport class IrBookingCancelation {\n  @Prop() booking_nbr: string;\n  @Prop() cancelation: string;\n\n  @Event() openChange: EventEmitter<boolean>;\n  @Event() cancelationResult: EventEmitter<{ state: 'failed' | 'success'; booking_nbr: string }>;\n\n  private alertDialog: HTMLIrAlertDialogElement;\n  private paymentService = new PaymentService();\n\n  componentWillLoad() {\n    this.paymentService.setToken(app_store.app_data.token);\n  }\n\n  @Method()\n  async openDialog() {\n    this.openChange.emit(true);\n    this.alertDialog.openModal();\n  }\n\n  private closeAlertDialog() {\n    this.alertDialog.closeModal();\n    this.openChange.emit(false);\n  }\n\n  render() {\n    return (\n      <div>\n        <ir-alert-dialog ref={el => (this.alertDialog = el)}>\n          <h2 slot=\"modal-title\">Booking Cancellation</h2>\n          <p slot=\"modal-body\" class=\"pt-2\" innerHTML={this.cancelation}></p>\n          <div slot=\"modal-footer\">\n            <ir-button\n              label=\"Cancel\"\n              variants=\"outline\"\n              onButtonClick={() => {\n                this.closeAlertDialog();\n              }}\n            ></ir-button>\n            <ir-button\n              label=\"Accept & Confirm\"\n              isLoading={isRequestPending('/Request_Booking_Cancelation')}\n              onButtonClick={async () => {\n                try {\n                  await this.paymentService.RequestBookingCancelation(this.booking_nbr);\n                  this.cancelationResult.emit({ state: 'success', booking_nbr: this.booking_nbr });\n                  this.closeAlertDialog();\n                } catch (error) {\n                  console.error(error);\n                  this.cancelationResult.emit({ state: 'failed', booking_nbr: this.booking_nbr });\n                }\n              }}\n            ></ir-button>\n          </div>\n        </ir-alert-dialog>\n      </div>\n    );\n  }\n}\n"]}