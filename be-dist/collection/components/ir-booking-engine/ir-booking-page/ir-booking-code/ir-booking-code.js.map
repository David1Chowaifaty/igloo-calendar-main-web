{"version":3,"file":"ir-booking-code.js","sourceRoot":"","sources":["../../../../../src/components/ir-booking-engine/ir-booking-page/ir-booking-code/ir-booking-code.tsx"],"names":[],"mappings":"AAAA,OAAO,SAAS,MAAM,oBAAoB,CAAC;AAC3C,OAAO,aAAa,MAAM,kBAAkB,CAAC;AAC7C,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,EAAE,KAAK,EAAgB,KAAK,EAAE,MAAM,eAAe,CAAC;AAO/E,MAAM,OAAO,aAAa;;;;;IAIxB,YAAY,CAAC,CAAQ;;QACnB,CAAC,CAAC,cAAc,EAAE,CAAC;QACnB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAC9B,MAAM,KAAK,GAAG,MAAA,SAAS,CAAC,QAAQ,0CAAE,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;QAChF,IAAI,CAAC,KAAK,EAAE,CAAC;YACX,OAAO,CAAC,IAAI,CAAC,iBAAiB,GAAG,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,oBAAoB,EAAE,CAAC,CAAC;QACnF,CAAC;QACD,aAAa,CAAC,yBAAyB,mCAClC,aAAa,CAAC,yBAAyB,KAC1C,KAAK,EAAE,KAAK,CAAC,EAAE,GAChB,CAAC;QACF,IAAI,CAAC,iBAAiB,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC;QAC9D,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC9B,CAAC;IACD,MAAM;;QACJ,OAAO,CACL,EAAC,IAAI;YACH,6DAAM,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,EAAC,YAAY;gBAC9D,2DAAI,KAAK,EAAC,OAAO,wCAAuC;gBACxD,0DAAG,KAAK,EAAC,sBAAsB,iHAA+G;gBAC9I,iEAAU,KAAK,EAAE,MAAA,IAAI,CAAC,iBAAiB,0CAAE,KAAK,EAAE,aAAa,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,MAAM,CAAC,EAAE,SAAS,QAAC,OAAO,EAAC,cAAc,EAAC,KAAK,EAAC,iBAAiB,GAAY;gBAC/J,CAAA,MAAA,IAAI,CAAC,iBAAiB,0CAAE,KAAK,KAAI,SAAG,KAAK,EAAC,cAAc,IAAE,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAK;gBAC9F,4DAAK,KAAK,EAAC,uEAAuE;oBAChF,kEAAW,IAAI,EAAC,IAAI,EAAC,aAAa,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,QAAQ,EAAC,SAAS,EAAC,KAAK,EAAC,QAAQ,EAAC,KAAK,EAAE,iBAAiB,GAAc;oBAC/I,kEAAW,IAAI,EAAC,IAAI,EAAC,KAAK,EAAC,OAAO,EAAC,KAAK,EAAC,iBAAiB,GAAa,CACnE,CACD,CACF,CACR,CAAC;IACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import app_store from '@/stores/app.store';\r\nimport booking_store from '@/stores/booking';\r\nimport { Component, Host, h, Event, EventEmitter, State } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-booking-code',\r\n  styleUrl: 'ir-booking-code.css',\r\n  shadow: true,\r\n})\r\nexport class IrBookingCode {\r\n  @State() code: string;\r\n  @State() validationMessage: { error: boolean; message: string };\r\n  @Event() closeDialog: EventEmitter<null>;\r\n  handleSubmit(e: Event) {\r\n    e.preventDefault();\r\n    this.validationMessage = null;\r\n    const agent = app_store.property?.agents.find(a => a.code === this.code.trim());\r\n    if (!agent) {\r\n      return (this.validationMessage = { error: true, message: 'Invalid agent code' });\r\n    }\r\n    booking_store.bookingAvailabilityParams = {\r\n      ...booking_store.bookingAvailabilityParams,\r\n      agent: agent.id,\r\n    };\r\n    this.validationMessage = { error: false, message: this.code };\r\n    this.closeDialog.emit(null);\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <form onSubmit={this.handleSubmit.bind(this)} class=\"p-4 sm:p-6\">\r\n          <h1 class=\"title\">Have an agent or corporate code? </h1>\r\n          <p class=\"Supporting-text mb-8\">If you have a private or corporate booking code available, you can enter it below to unlock special rates:</p>\r\n          <ir-input error={this.validationMessage?.error} onTextChanged={e => (this.code = e.detail)} autofocus inputId=\"booking_code\" label=\"Enter your code\"></ir-input>\r\n          {this.validationMessage?.error && <p class=\"text-red-500\">{this.validationMessage.message}</p>}\r\n          <div class=\"flex flex-col-reverse items-center justify-end mt-8 gap-4 sm:flex-row\">\r\n            <ir-button size=\"md\" onButtonClick={() => this.closeDialog.emit(null)} variants=\"outline\" label=\"Cancel\" class={'w-full sm:w-fit'}></ir-button>\r\n            <ir-button size=\"md\" label=\"Apply\" class=\"w-full sm:w-fit\"></ir-button>\r\n          </div>\r\n        </form>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}