{"version":3,"file":"ir-booking-code.js","sourceRoot":"","sources":["../../../../../src/components/ir-booking-engine/ir-booking-page/ir-booking-code/ir-booking-code.tsx"],"names":[],"mappings":"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","sourcesContent":["import app_store from '@/stores/app.store';\r\nimport booking_store from '@/stores/booking';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport { validateAgentCode } from '@/utils/utils';\r\nimport { Component, Host, h, Event, EventEmitter, State, Method } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-booking-code',\r\n  styleUrl: 'ir-booking-code.css',\r\n  shadow: true,\r\n})\r\nexport class IrBookingCode {\r\n  @State() code: string;\r\n  @State() validationMessage: { error: boolean; message: string };\r\n  @Event() closeDialog: EventEmitter<null>;\r\n  @Event() resetBooking: EventEmitter<string>;\r\n\r\n  handleSubmit(e: Event) {\r\n    e.preventDefault();\r\n    if (app_store.app_data.isAgentMode) {\r\n      return this.clearAgent();\r\n    }\r\n    this.validationMessage = null;\r\n    if (!validateAgentCode(this.code)) {\r\n      return (this.validationMessage = { error: true, message: localizedWords.entries.Lcz_InvalidAgentCode });\r\n    }\r\n    this.validationMessage = { error: false, message: this.code };\r\n    this.code = '';\r\n    this.closeDialog.emit(null);\r\n    this.resetBooking.emit('partialReset');\r\n  }\r\n  @Method()\r\n  async clearAgent() {\r\n    if (!app_store.app_data.isAgentMode) {\r\n      return;\r\n    }\r\n    app_store.app_data = {\r\n      ...app_store.app_data,\r\n      isAgentMode: false,\r\n    };\r\n    booking_store.bookingAvailabilityParams = {\r\n      ...booking_store.bookingAvailabilityParams,\r\n      agent: null,\r\n      agent_code: null,\r\n    };\r\n    this.closeDialog.emit(null);\r\n    this.resetBooking.emit('partialReset');\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <form onSubmit={this.handleSubmit.bind(this)} class=\"p-4 sm:p-6\">\r\n          <h1 class=\"title\">{localizedWords.entries.Lcz_HaveAgentorCoporate} </h1>\r\n          {/* <p class=\"Supporting-text mb-8\">If you have a private or corporate booking code available, you can enter it below to unlock special rates:</p> */}\r\n\r\n          <ir-input\r\n            value={this.code}\r\n            error={this.validationMessage?.error}\r\n            onTextChanged={e => (this.code = e.detail)}\r\n            autofocus\r\n            inputId=\"booking_code\"\r\n            placeholder={localizedWords.entries.Lcz_BookingCode}\r\n            mode=\"default\"\r\n          ></ir-input>\r\n\r\n          {this.validationMessage?.error && <p class=\"text-red-500\">{this.validationMessage.message}</p>}\r\n          <div class=\"mt-8 flex w-full flex-col items-center gap-4 md:flex-row-reverse\">\r\n            <ir-button type=\"submit\" size=\"md\" label={localizedWords.entries.Lcz_Apply} class=\"w-full md:w-fit\"></ir-button>\r\n            <ir-button\r\n              size=\"md\"\r\n              onButtonClick={() => this.closeDialog.emit(null)}\r\n              variants=\"outline\"\r\n              type=\"button\"\r\n              label={localizedWords.entries.Lcz_Cancel}\r\n              class={'w-full md:w-fit'}\r\n            ></ir-button>\r\n          </div>\r\n        </form>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}