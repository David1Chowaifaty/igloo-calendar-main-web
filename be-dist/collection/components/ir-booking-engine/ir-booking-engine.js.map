{"version":3,"file":"ir-booking-engine.js","sourceRoot":"","sources":["../../../src/components/ir-booking-engine/ir-booking-engine.tsx"],"names":[],"mappings":"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","sourcesContent":["import { CommonService } from '@/services/api/common.service';\r\nimport { PropertyService } from '@/services/api/property.service';\r\nimport { Component, Listen, Prop, State, Watch, h } from '@stencil/core';\r\nimport { addYears, format, Locale } from 'date-fns';\r\nimport { IExposedProperty } from '@/models/property';\r\nimport booking_store, { modifyBookingStore } from '@/stores/booking';\r\nimport app_store, { changeLocale, TSource, updateUserPreference } from '@/stores/app.store';\r\nimport { checkAffiliate, checkGhs, getUserPreference, matchLocale, setDefaultLocale, validateAgentCode, validateCoupon } from '@/utils/utils';\r\nimport Stack from '@/models/stack';\r\nimport { checkout_store } from '@/stores/checkout.store';\r\nimport Token from '@/models/Token';\r\nimport { ICurrency, IExposedLanguages } from '@/models/common';\r\n\r\n@Component({ tag: 'ir-be', styleUrl: 'ir-booking-engine.css', shadow: true })\r\nexport class IrBookingEngine {\r\n  @Prop() propertyId: number;\r\n  @Prop() injected: boolean;\r\n  @Prop() rt_id: number = null;\r\n  @Prop() rp_id: number = null;\r\n\r\n  //extra props\r\n  @Prop() perma_link: string = null;\r\n  @Prop() p: string = null;\r\n  @Prop() checkin: string;\r\n  @Prop() checkout: string;\r\n  @Prop() language: string;\r\n  @Prop() adults: string = '2';\r\n  @Prop() child: string;\r\n  @Prop() ages: string;\r\n  @Prop() cur: string;\r\n  @Prop() aff: string;\r\n  @Prop() stag: string | null;\r\n  @Prop() property: IExposedProperty | null = null;\r\n  @Prop() source: TSource | null = null;\r\n  @Prop() hideGoogleSignIn: boolean = true;\r\n  @Prop() origin: string | null = null;\r\n  @Prop() view: 'extended' | 'default' = 'default';\r\n\r\n  //discount properties\r\n  @Prop() coupon: string;\r\n  @Prop() loyalty: boolean;\r\n  @Prop() agent_code: string;\r\n\r\n  @State() selectedLocale: Locale;\r\n  @State() currencies: ICurrency[];\r\n  @State() languages: IExposedLanguages[];\r\n  @State() isLoading: boolean = false;\r\n  @State() router = new Stack<HTMLElement>();\r\n  @State() bookingListingScreenOptions: { screen: 'bookings' | 'booking-details'; params: unknown } = { params: null, screen: 'bookings' };\r\n\r\n  private version: string = '2.732';\r\n  private baseUrl: string = 'https://gateway.igloorooms.com/IRBE';\r\n\r\n  private commonService = new CommonService();\r\n  private propertyService = new PropertyService();\r\n  private token = new Token();\r\n  privacyPolicyRef: any;\r\n\r\n  async componentWillLoad() {\r\n    console.log(`version:${this.version}`);\r\n    getUserPreference(this.language);\r\n    if (this.property) {\r\n      app_store.property = { ...this.property };\r\n    }\r\n\r\n    const isAuthenticated = this.commonService.checkUserAuthState();\r\n    if (isAuthenticated) {\r\n      app_store.is_signed_in = true;\r\n      this.token.setToken(isAuthenticated.token);\r\n    } else {\r\n      const token = await this.commonService.getBEToken();\r\n      this.token.setToken(token);\r\n    }\r\n    this.initializeApp();\r\n  }\r\n\r\n  @Watch('source')\r\n  handleSourceChange(newSource: TSource, oldSource: TSource) {\r\n    if (newSource && (!oldSource || oldSource.code !== newSource.code)) {\r\n      this.setSource(newSource);\r\n    }\r\n  }\r\n\r\n  @Watch('cur')\r\n  handleCurrencyChange(newValue: string, oldValue: string) {\r\n    if (newValue !== oldValue) {\r\n      updateUserPreference({ currency_id: newValue });\r\n    }\r\n  }\r\n  @Watch('coupon')\r\n  handleCouponChange(newValue: string, oldValue: string) {\r\n    if (newValue !== oldValue) {\r\n      validateCoupon(newValue);\r\n    }\r\n  }\r\n  @Watch('loyalty')\r\n  handleLoyaltyChange(newValue: boolean, oldValue: boolean) {\r\n    if (newValue !== oldValue) {\r\n      this.modifyLoyalty();\r\n    }\r\n  }\r\n\r\n  @Watch('agent_code')\r\n  handleAgentCodeChange(newValue: string, oldValue: string) {\r\n    if (newValue !== oldValue) {\r\n      validateAgentCode(newValue);\r\n    }\r\n  }\r\n  @Watch('view')\r\n  handleAppViewChange(newValue: string, oldValue: string) {\r\n    if (newValue !== oldValue) {\r\n      app_store.app_data.view = newValue as any;\r\n    }\r\n  }\r\n\r\n  private setSource(newSource: TSource) {\r\n    app_store.app_data = { ...app_store.app_data, source: newSource };\r\n  }\r\n\r\n  private modifyLanguage(code: string) {\r\n    if (!this.languages) {\r\n      return;\r\n    }\r\n    changeLocale(this.languages.find(l => l.code.toLowerCase() === code)?.direction || 'LTR', matchLocale(code));\r\n    updateUserPreference({ language_id: code });\r\n  }\r\n\r\n  private initializeApp() {\r\n    app_store.app_data = {\r\n      view: this.view,\r\n      aName: this.p,\r\n      origin: this.origin,\r\n      perma_link: this.perma_link,\r\n      displayMode: 'default',\r\n      isFromGhs: checkGhs(this.source?.code, this.stag),\r\n      token: '',\r\n      property_id: this.propertyId,\r\n      injected: this.injected,\r\n      roomtype_id: this.rt_id,\r\n      affiliate: null,\r\n      tag: this.stag,\r\n      source: this.source,\r\n      hideGoogleSignIn: this.hideGoogleSignIn,\r\n      stag: this.stag,\r\n    };\r\n    this.initRequest();\r\n  }\r\n\r\n  private async initRequest() {\r\n    this.isLoading = true;\r\n    const p = JSON.parse(localStorage.getItem('user_preference'));\r\n    let requests = [\r\n      this.commonService.getCurrencies(),\r\n      this.commonService.getExposedLanguages(),\r\n      this.commonService.getExposedCountryByIp({ id: this.propertyId?.toString(), perma_link: this.perma_link, aname: this.p }),\r\n      this.commonService.getExposedLanguage(),\r\n      this.propertyService.getExposedProperty({ id: this.propertyId, language: app_store.userPreferences?.language_id || 'en', aname: this.p, perma_link: this.perma_link }),\r\n      this.propertyService.getExposedNonBookableNights({\r\n        porperty_id: this.propertyId,\r\n        from_date: format(new Date(), 'yyyy-MM-dd'),\r\n        to_date: format(addYears(new Date(), 1), 'yyyy-MM-dd'),\r\n        perma_link: this.perma_link,\r\n        aname: this.p,\r\n      }),\r\n    ];\r\n    if (app_store.is_signed_in) {\r\n      requests.push(this.propertyService.getExposedGuest());\r\n    }\r\n    const [currencies, languages] = await Promise.all(requests);\r\n    this.currencies = currencies;\r\n    this.languages = languages;\r\n    if (!p) {\r\n      if (this.language) {\r\n        this.modifyLanguage(this.language.toLowerCase());\r\n      }\r\n      let currency = app_store.userDefaultCountry.currency;\r\n      if (this.cur) {\r\n        const newCurr = this.currencies.find(c => c.code.toLowerCase() === this.cur.toLowerCase());\r\n        if (newCurr) {\r\n          currency = newCurr;\r\n        }\r\n      }\r\n      setDefaultLocale({ currency });\r\n    }\r\n    this.checkAndApplyDiscounts();\r\n\r\n    app_store.app_data = { ...app_store.app_data, affiliate: checkAffiliate(this.aff?.toLowerCase().trim()) };\r\n    this.isLoading = false;\r\n  }\r\n  private checkAndApplyDiscounts() {\r\n    if (this.coupon) {\r\n      validateCoupon(this.coupon);\r\n    }\r\n    if (this.loyalty) {\r\n      this.modifyLoyalty();\r\n    }\r\n    if (this.agent_code) {\r\n      validateAgentCode(this.agent_code);\r\n    }\r\n  }\r\n  // private handleVariationChange(e: CustomEvent, variations: Variation[], rateplanId: number, roomTypeId: number) {\r\n  //   e.stopImmediatePropagation();\r\n  //   e.stopPropagation();\r\n  //   const value = e.detail;\r\n  //   const selectedVariation = variations.find(variation => variation.adult_child_offering === value);\r\n  //   if (!selectedVariation) {\r\n  //     return;\r\n  //   }\r\n  //   updateRoomParams({ params: { selected_variation: { variation: selectedVariation, state: 'modified' } }, ratePlanId: rateplanId, roomTypeId });\r\n  // }\r\n  private modifyLoyalty() {\r\n    modifyBookingStore('bookingAvailabilityParams', { ...booking_store.bookingAvailabilityParams, coupon: null, loyalty: this.loyalty });\r\n  }\r\n\r\n  @Listen('routing')\r\n  handleNavigation(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    app_store.currentPage = e.detail;\r\n  }\r\n  @Listen('resetBooking')\r\n  async handleResetBooking(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    await this.resetBooking(e.detail ?? 'completeReset');\r\n  }\r\n  @Listen('openPrivacyPolicy')\r\n  async openPrivacyPolicy(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    this.privacyPolicyRef.openModal();\r\n  }\r\n  @Listen('authStatus')\r\n  handleAuthFinish(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    const { state, payload } = e.detail;\r\n    if (state === 'success') {\r\n      if (payload.method === 'direct') {\r\n        this.bookingListingScreenOptions = { screen: 'booking-details', params: { booking_nbr: payload.booking_nbr, email: payload.email } };\r\n        app_store.currentPage = 'booking-listing';\r\n      }\r\n    }\r\n  }\r\n\r\n  private async resetBooking(resetType: 'partialReset' | 'completeReset' = 'completeReset') {\r\n    let queries = [];\r\n    if (resetType === 'partialReset' && app_store.fetchedBooking) {\r\n      queries.push(this.checkAvailability());\r\n    } else if (resetType === 'completeReset') {\r\n      queries = [\r\n        ...queries,\r\n        ...[\r\n          this.commonService.getExposedLanguage(),\r\n          this.propertyService.getExposedProperty(\r\n            { id: app_store.app_data.property_id, language: app_store.userPreferences?.language_id || 'en', aname: this.p, perma_link: this.perma_link },\r\n            false,\r\n          ),\r\n        ],\r\n      ];\r\n      if (app_store.fetchedBooking) {\r\n        queries.push(this.checkAvailability());\r\n      }\r\n    }\r\n    await Promise.all(queries);\r\n  }\r\n\r\n  private async checkAvailability() {\r\n    console.warn('here');\r\n    booking_store.resetBooking = false;\r\n    await this.propertyService.getExposedBookingAvailability({\r\n      propertyid: app_store.app_data.property_id,\r\n      from_date: booking_store.bookingAvailabilityParams.from_date,\r\n      to_date: booking_store.bookingAvailabilityParams.to_date,\r\n      room_type_ids: [],\r\n      adult_nbr: booking_store.bookingAvailabilityParams.adult_nbr,\r\n      child_nbr: booking_store.bookingAvailabilityParams.child_nbr,\r\n      language: app_store.userPreferences.language_id,\r\n      currency_ref: app_store.userPreferences.currency_id,\r\n      is_in_loyalty_mode: booking_store.bookingAvailabilityParams.loyalty ? true : !!booking_store.bookingAvailabilityParams.coupon,\r\n      promo_key: booking_store.bookingAvailabilityParams.coupon || '',\r\n      is_in_agent_mode: !!booking_store.bookingAvailabilityParams.agent || false,\r\n      agent_id: booking_store.bookingAvailabilityParams.agent?.id || 0,\r\n      is_in_affiliate_mode: !!app_store.app_data.affiliate,\r\n      affiliate_id: app_store.app_data.affiliate ? app_store.app_data.affiliate.id : null,\r\n    });\r\n  }\r\n\r\n  private renderScreens() {\r\n    switch (app_store.currentPage) {\r\n      case 'booking':\r\n        return <ir-booking-page adultCount={this.adults} childrenCount={this.child} ages={this.ages} fromDate={this.checkin} toDate={this.checkout}></ir-booking-page>;\r\n      case 'checkout':\r\n        return <ir-checkout-page></ir-checkout-page>;\r\n      case 'invoice':\r\n        return (\r\n          <ir-invoice\r\n            version={this.version}\r\n            headerShown={false}\r\n            footerShown={false}\r\n            propertyId={this.propertyId}\r\n            perma_link={this.perma_link}\r\n            aName={this.p}\r\n            language={this.language?.toLowerCase()}\r\n            baseUrl={this.baseUrl}\r\n            email={app_store.invoice.email}\r\n            bookingNbr={app_store.invoice.booking_number}\r\n            status={1}\r\n            be={true}\r\n          ></ir-invoice>\r\n        );\r\n      case 'booking-listing':\r\n        return (\r\n          <ir-booking-listing\r\n            version={this.version}\r\n            startScreen={this.bookingListingScreenOptions}\r\n            showAllBookings={false}\r\n            headerShown={false}\r\n            footerShown={false}\r\n            propertyid={app_store.app_data.property_id}\r\n            perma_link={this.perma_link}\r\n            aName={this.p}\r\n            be={true}\r\n            baseUrl={this.baseUrl}\r\n            aff={this.aff}\r\n          ></ir-booking-listing>\r\n        );\r\n      case 'user-profile':\r\n        return (\r\n          <ir-user-profile\r\n            user_data={{\r\n              id: checkout_store.userFormData.id,\r\n              email: checkout_store.userFormData.email,\r\n              first_name: checkout_store.userFormData.firstName,\r\n              last_name: checkout_store.userFormData.lastName,\r\n              country_id: checkout_store.userFormData.country_id,\r\n              mobile: checkout_store.userFormData.mobile_number,\r\n              country_phone_prefix: checkout_store.userFormData.country_phone_prefix.toString(),\r\n            }}\r\n          ></ir-user-profile>\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (this.isLoading) {\r\n      return <ir-home-loader></ir-home-loader>;\r\n    }\r\n    return (\r\n      <main class=\"relative  flex w-full flex-col space-y-5 \">\r\n        <ir-interceptor></ir-interceptor>\r\n        <section class={`${this.injected ? '' : 'sticky top-0 z-20'}  m-0 w-full p-0 `}>\r\n          <ir-nav\r\n            class={'m-0 p-0'}\r\n            website={app_store.property?.space_theme.website}\r\n            logo={app_store.property?.space_theme?.logo}\r\n            currencies={this.currencies}\r\n            languages={this.languages}\r\n          ></ir-nav>\r\n        </section>\r\n        <section class=\"flex-1 px-4 lg:px-6\">\r\n          <div class=\"mx-auto max-w-6xl\">{this.renderScreens()}</div>\r\n        </section>\r\n        <ir-privacy-policy ref={el => (this.privacyPolicyRef = el)} hideTrigger={true}></ir-privacy-policy>\r\n        {!this.injected && <ir-footer version={this.version}></ir-footer>}\r\n      </main>\r\n    );\r\n  }\r\n}\r\n"]}