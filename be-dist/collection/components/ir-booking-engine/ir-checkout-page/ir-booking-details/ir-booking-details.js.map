{"version":3,"file":"ir-booking-details.js","sourceRoot":"","sources":["../../../../../src/components/ir-booking-engine/ir-checkout-page/ir-booking-details/ir-booking-details.tsx"],"names":[],"mappings":"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","sourcesContent":["import { ISmokingOption, RatePlan } from '@/models/property';\r\nimport { PaymentService } from '@/services/api/payment.service';\r\nimport VariationService from '@/services/app/variation.service';\r\n// import { PropertyService } from '@/services/api/property.service';\r\nimport app_store from '@/stores/app.store';\r\nimport booking_store, { calculateTotalRooms, IRatePlanSelection } from '@/stores/booking';\r\nimport { checkout_store, onCheckoutDataChange } from '@/stores/checkout.store';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport { formatAmount, getDateDifference } from '@/utils/utils';\r\nimport { Component, Event, EventEmitter, Host, Prop, State, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-booking-details',\r\n  styleUrl: 'ir-booking-details.css',\r\n  shadow: true,\r\n})\r\nexport class IrBookingDetails {\r\n  @Prop() errors: string;\r\n  @State() currentRatePlan: RatePlan | null = null;\r\n  @State() isLoading: number = null;\r\n  @State() cancelationMessage: string;\r\n  @State() prepaymentAmount: number = 0;\r\n\r\n  private dialogRef: HTMLIrDialogElement;\r\n  private firstRoom: { roomtypeId: string; ratePlanId: string };\r\n  // private propertyService = new PropertyService();\r\n  private paymentService = new PaymentService();\r\n  private variationService = new VariationService();\r\n  private total_rooms: number;\r\n  private totalPersons: number;\r\n\r\n  @Event() prepaymentChange: EventEmitter<number>;\r\n\r\n  componentWillLoad() {\r\n    this.total_rooms = calculateTotalRooms();\r\n    this.totalPersons = this.getTotalPersons();\r\n    this.modifyBookings();\r\n    onCheckoutDataChange('userFormData', newValue => {\r\n      if (!checkout_store.modifiedGuestName) {\r\n        this.updateGuestNames(newValue.bookingForSomeoneElse, newValue?.firstName, newValue?.lastName);\r\n      }\r\n    });\r\n  }\r\n  private calculatePrepaymentAmount() {\r\n    const agent = booking_store.bookingAvailabilityParams.agent;\r\n    if (agent && agent.payment_mode.code === '001') {\r\n      return this.prepaymentChange.emit(0);\r\n    }\r\n    let total = 0;\r\n    for (const roomtypeId in booking_store.ratePlanSelections) {\r\n      for (const rateplanId in booking_store.ratePlanSelections[roomtypeId]) {\r\n        const rateplan = booking_store.ratePlanSelections[roomtypeId][rateplanId];\r\n        console.log(rateplan.checkoutVariations);\r\n        rateplan.checkoutVariations.map((v, index) => {\r\n          const variation = this.variationService.getVariationBasedOnInfants({ baseVariation: v, variations: rateplan.ratePlan.variations, infants: rateplan.infant_nbr[index] });\r\n          total += variation.prepayment_amount_gross;\r\n        });\r\n      }\r\n    }\r\n\r\n    this.prepaymentChange.emit(total);\r\n  }\r\n  private getTotalPersons() {\r\n    const { adult_nbr, child_nbr } = booking_store.bookingAvailabilityParams;\r\n    return Number(adult_nbr) + Number(child_nbr);\r\n  }\r\n  private modifyBookings() {\r\n    try {\r\n      let isInfantNumberSet = false;\r\n      const result: any = {};\r\n      const totalPersons = this.getTotalPersons();\r\n      const setInfantNumber = (child_nbr: number, adult_nbr: number) => {\r\n        if (isInfantNumberSet || child_nbr === 0 || this.total_rooms > 1 || totalPersons > child_nbr + adult_nbr) {\r\n          return -1;\r\n        }\r\n        isInfantNumberSet = true;\r\n        return Math.min(\r\n          booking_store.childrenAges.reduce((prev, cur) => {\r\n            if (Number(cur) < app_store.childrenStartAge) {\r\n              return prev + 1;\r\n            }\r\n            return prev;\r\n          }, 0),\r\n          child_nbr,\r\n        );\r\n      };\r\n      for (const roomtypeId in booking_store.ratePlanSelections) {\r\n        if (booking_store.ratePlanSelections.hasOwnProperty(roomtypeId)) {\r\n          const roomtype = booking_store.ratePlanSelections[roomtypeId];\r\n          result[roomtypeId] = {};\r\n          for (const ratePlanId in roomtype) {\r\n            if (roomtype.hasOwnProperty(ratePlanId)) {\r\n              const ratePlan = roomtype[ratePlanId];\r\n              if (ratePlan.reserved === 0) {\r\n                result[roomtypeId][ratePlanId] = ratePlan;\r\n              } else {\r\n                if (!this.firstRoom) {\r\n                  this.firstRoom = {\r\n                    roomtypeId,\r\n                    ratePlanId,\r\n                  };\r\n                }\r\n                result[roomtypeId][ratePlanId] = {\r\n                  ...ratePlan,\r\n                  checkoutVariations: Array(ratePlan.reserved).fill(ratePlan.selected_variation),\r\n                  checkoutBedSelection: ratePlan.is_bed_configuration_enabled ? Array(ratePlan.reserved).fill('-1') : [],\r\n                  checkoutSmokingSelection: Array(ratePlan.reserved).fill(ratePlan.roomtype.smoking_option[0]),\r\n                  infant_nbr: Array(ratePlan.reserved).fill(\r\n                    ratePlan.selected_variation.child_nbr > 0 ? setInfantNumber(ratePlan.selected_variation.child_nbr, ratePlan.selected_variation.adult_nbr) : 0,\r\n                  ),\r\n                };\r\n              }\r\n              if (!checkout_store.modifiedGuestName && ratePlan.guestName?.length === 0) {\r\n                const name = [...new Array(ratePlan.reserved)].map((_, i) => {\r\n                  if (i === 0 && !checkout_store.userFormData.bookingForSomeoneElse && this.firstRoom.roomtypeId === roomtypeId && this.firstRoom.ratePlanId === ratePlanId) {\r\n                    return (checkout_store.userFormData?.firstName || '') + ' ' + (checkout_store.userFormData?.lastName || '') || '';\r\n                  }\r\n                  return '';\r\n                });\r\n                result[roomtypeId][ratePlanId] = {\r\n                  ...result[roomtypeId][ratePlanId],\r\n                  guestName: name,\r\n                };\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      booking_store.ratePlanSelections = { ...result };\r\n      this.calculatePrepaymentAmount();\r\n    } catch (error) {\r\n      console.error('modify Booking error', error);\r\n    }\r\n  }\r\n  private updateGuestNames(isBookingForSomeoneElse: boolean, firstName: string, lastName: string) {\r\n    const result: any = {};\r\n\r\n    Object.keys(booking_store.ratePlanSelections).forEach(roomTypeId => {\r\n      result[roomTypeId] = {};\r\n      Object.keys(booking_store.ratePlanSelections[roomTypeId]).forEach(ratePlanId => {\r\n        const ratePlanSelection: IRatePlanSelection = booking_store.ratePlanSelections[roomTypeId][ratePlanId];\r\n        if (this.firstRoom && this.firstRoom.ratePlanId === ratePlanId && this.firstRoom.roomtypeId === roomTypeId) {\r\n          let updatedGuestNames = [...ratePlanSelection.guestName];\r\n          updatedGuestNames[0] = isBookingForSomeoneElse ? '' : `${firstName || ''} ${lastName || ''}`.trim();\r\n          result[roomTypeId][ratePlanId] = { ...ratePlanSelection, guestName: updatedGuestNames };\r\n        } else {\r\n          result[roomTypeId][ratePlanId] = ratePlanSelection;\r\n        }\r\n      });\r\n    });\r\n\r\n    booking_store.ratePlanSelections = { ...result };\r\n  }\r\n\r\n  private handleGuestNameChange(index: number, e: InputEvent, rateplanId: number, roomTypeId: number): void {\r\n    const oldVariations = [...booking_store.ratePlanSelections[roomTypeId][rateplanId]?.guestName];\r\n    oldVariations[index] = (e.target as HTMLInputElement).value;\r\n    booking_store.ratePlanSelections = {\r\n      ...booking_store.ratePlanSelections,\r\n      [roomTypeId]: {\r\n        ...booking_store.ratePlanSelections[roomTypeId],\r\n        [rateplanId]: {\r\n          ...booking_store.ratePlanSelections[roomTypeId][rateplanId],\r\n          guestName: oldVariations,\r\n        },\r\n      },\r\n    };\r\n  }\r\n\r\n  private handleBedConfiguration(roomTypeId: string, rateplanId: string, detail: string | number, index: number): void {\r\n    let oldBedConfiguration = [];\r\n    if (booking_store.ratePlanSelections[roomTypeId][rateplanId]?.bed_configuration) {\r\n      oldBedConfiguration = [...booking_store.ratePlanSelections[roomTypeId][rateplanId]?.checkoutBedSelection];\r\n    }\r\n    oldBedConfiguration[index] = detail;\r\n    booking_store.ratePlanSelections = {\r\n      ...booking_store.ratePlanSelections,\r\n      [roomTypeId]: {\r\n        ...booking_store.ratePlanSelections[roomTypeId],\r\n        [rateplanId]: {\r\n          ...booking_store.ratePlanSelections[roomTypeId][rateplanId],\r\n          checkoutBedSelection: oldBedConfiguration,\r\n        },\r\n      },\r\n    };\r\n  }\r\n\r\n  private handleSmokeConfiguration(roomTypeId: string, rateplanId: string, detail: string | number, index: number): void {\r\n    let oldSmokingConfiguration = [...booking_store.ratePlanSelections[roomTypeId][rateplanId]?.checkoutSmokingSelection];\r\n    oldSmokingConfiguration[index] = detail;\r\n    booking_store.ratePlanSelections = {\r\n      ...booking_store.ratePlanSelections,\r\n      [roomTypeId]: {\r\n        ...booking_store.ratePlanSelections[roomTypeId],\r\n        [rateplanId]: {\r\n          ...booking_store.ratePlanSelections[roomTypeId][rateplanId],\r\n          checkoutSmokingSelection: oldSmokingConfiguration,\r\n        },\r\n      },\r\n    };\r\n  }\r\n  private async fetchCancelationMessage(applicable_policies) {\r\n    this.cancelationMessage = this.cancelationMessage = this.paymentService.getCancelationMessage(applicable_policies, true)?.message;\r\n  }\r\n  private renderSmokingView(smoking_option: ISmokingOption, index: number, ratePlanId: string, roomTypeId: string, checkoutSmokingSelection: string[]) {\r\n    if (smoking_option.code === '002') {\r\n      return null;\r\n    }\r\n    if (smoking_option.code === '003') {\r\n      return (\r\n        <div class=\"section-item-footer-text\">\r\n          <ir-icons name={'ban_smoking'} svgClassName=\"size-4\"></ir-icons>\r\n          <p>{smoking_option.description}</p>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <ir-select\r\n        icon\r\n        onValueChange={e => this.handleSmokeConfiguration(roomTypeId, ratePlanId, e.detail, index)}\r\n        value={checkoutSmokingSelection[index]}\r\n        data={smoking_option.allowed_smoking_options.map(s => ({ id: s.code, value: s.description }))}\r\n        class=\"hidden md:block\"\r\n      >\r\n        <ir-icons name={checkoutSmokingSelection[index] !== '002' ? 'smoking' : 'ban_smoking'} slot=\"icon\"></ir-icons>\r\n      </ir-select>\r\n    );\r\n  }\r\n  private handleInfantNumberChange(roomTypeId: string, rateplanId: string, detail: string | number, index: number): void {\r\n    let oldBedConfiguration = [];\r\n    if (booking_store.ratePlanSelections[roomTypeId][rateplanId]?.bed_configuration) {\r\n      oldBedConfiguration = [...booking_store.ratePlanSelections[roomTypeId][rateplanId]?.checkoutBedSelection];\r\n    }\r\n    oldBedConfiguration[index] = detail;\r\n    booking_store.ratePlanSelections = {\r\n      ...booking_store.ratePlanSelections,\r\n      [roomTypeId]: {\r\n        ...booking_store.ratePlanSelections[roomTypeId],\r\n        [rateplanId]: {\r\n          ...booking_store.ratePlanSelections[roomTypeId][rateplanId],\r\n          infant_nbr: (() => {\r\n            const infants = [...booking_store.ratePlanSelections[roomTypeId][rateplanId].infant_nbr];\r\n            infants[index] = Number(detail);\r\n            return infants;\r\n          })(),\r\n        },\r\n      },\r\n    };\r\n    this.calculatePrepaymentAmount();\r\n  }\r\n  private calculateTotalPersons() {\r\n    let count = 0;\r\n    Object.keys(booking_store.ratePlanSelections).map(roomTypeId => {\r\n      return Object.keys(booking_store.ratePlanSelections[roomTypeId]).map(ratePlanId => {\r\n        const r: IRatePlanSelection = booking_store.ratePlanSelections[roomTypeId][ratePlanId];\r\n        if (r.reserved !== 0) {\r\n          count += r.selected_variation.adult_nbr + r.selected_variation.child_nbr;\r\n        }\r\n      });\r\n    });\r\n    return count;\r\n  }\r\n  render() {\r\n    const total_nights = getDateDifference(booking_store.bookingAvailabilityParams.from_date, booking_store.bookingAvailabilityParams.to_date);\r\n    // const this.total_rooms = calculateTotalRooms();\r\n    const total_persons = this.calculateTotalPersons();\r\n    return (\r\n      <Host>\r\n        <div class=\"w-full\">\r\n          <section class=\"mb-5 flex flex-col flex-wrap items-center gap-2 rounded-md bg-gray-100 px-4 py-2 lg:flex-row\">\r\n            <div class=\"flex flex-1 items-center gap-2\">\r\n              <ir-icons name=\"bed\"></ir-icons>\r\n              <p>\r\n                {total_nights} {total_nights > 1 ? localizedWords.entries.Lcz_Nights : localizedWords.entries.Lcz_night} - {total_persons}{' '}\r\n                {total_persons > 1 ? localizedWords.entries.Lcz_Persons : localizedWords.entries.Lcz_Person} - {this.total_rooms}{' '}\r\n                {this.total_rooms > 1 ? localizedWords.entries.Lcz_Rooms : localizedWords.entries.Lcz_Room}\r\n              </p>\r\n            </div>\r\n            <p class=\" text-right text-xs text-gray-500\">{booking_store.tax_statement?.message}</p>\r\n          </section>\r\n          <section class={'space-y-9'}>\r\n            {Object.keys(booking_store.ratePlanSelections).map(roomTypeId => {\r\n              return Object.keys(booking_store.ratePlanSelections[roomTypeId]).map(ratePlanId => {\r\n                const r: IRatePlanSelection = booking_store.ratePlanSelections[roomTypeId][ratePlanId];\r\n                if (r.reserved === 0) {\r\n                  return null;\r\n                }\r\n                return [...new Array(r.reserved)].map((_, index) => {\r\n                  if (this.isLoading === r.ratePlan.id) {\r\n                    return <div class=\"h-16 animate-pulse rounded-md bg-gray-200\"></div>;\r\n                  }\r\n                  return (\r\n                    <div class=\"flex items-center justify-between\">\r\n                      <div class=\"flex-1 space-y-2\">\r\n                        <div>\r\n                          <div class=\"flex items-center gap-3\">\r\n                            <div class=\"flex flex-row items-center gap-3 \">\r\n                              <h3 class=\"font-semibold\">{r.roomtype.name}</h3>\r\n                              {r.ratePlan.is_non_refundable ? (\r\n                                <p class=\"text-xs text-[var(--ir-green)]\">{localizedWords.entries.Lcz_NonRefundable}</p>\r\n                              ) : (\r\n                                <div class={'inline-flex  h-6 items-center justify-center pt-0.5'}>\r\n                                  <ir-button\r\n                                    haveRightIcon\r\n                                    variants=\"link\"\r\n                                    class=\"text-sm\"\r\n                                    buttonClassName=\"pl-0\"\r\n                                    buttonStyles={{ paddingLeft: '0', fontSize: '12px', paddingTop: '0', paddingBottom: '0' }}\r\n                                    onButtonClick={async () => {\r\n                                      this.currentRatePlan = r.ratePlan;\r\n                                      await this.fetchCancelationMessage(r.checkoutVariations[index].applicable_policies);\r\n                                      this.dialogRef.openModal();\r\n                                    }}\r\n                                    label={localizedWords.entries.Lcz_IfICancel}\r\n                                  >\r\n                                    <ir-icons svgClassName=\"size-4\" slot=\"right-icon\" name=\"circle_info\" />\r\n                                  </ir-button>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                            <div class=\"ml-1 flex-1 \">\r\n                              <p class=\"text-end text-base font-medium xl:text-xl\">\r\n                                {formatAmount(\r\n                                  this.variationService.calculateVariationAmount({\r\n                                    baseVariation: r.checkoutVariations[index],\r\n                                    variations: r.ratePlan.variations,\r\n                                    infants: r.infant_nbr[index],\r\n                                  }),\r\n                                  app_store.userPreferences.currency_id,\r\n                                )}\r\n                                {/* {formatAmount(r.checkoutVariations[index].discounted_amount, app_store.userPreferences.currency_id)} */}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div class=\"flex items-center gap-1 pb-2 text-sm\">\r\n                          <ir-icons name=\"utencils\" svgClassName=\"size-4\"></ir-icons>\r\n                          <p class=\"line-clamp-3\">\r\n                            <span>{r.ratePlan.short_name}</span>\r\n                            {r.ratePlan.custom_text && <span class=\"mx-1 max-w-[60%] text-right  text-gray-500 md:w-full md:max-w-full\">{r.ratePlan.custom_text}</span>}\r\n                          </p>\r\n                        </div>\r\n                        <div class=\"flex items-center gap-2.5 pb-1.5\">\r\n                          <ir-input\r\n                            onInput={e => {\r\n                              if (index === 0 && !checkout_store.modifiedGuestName && this.firstRoom.ratePlanId === ratePlanId && this.firstRoom.roomtypeId === roomTypeId) {\r\n                                checkout_store.modifiedGuestName = true;\r\n                              }\r\n                              this.handleGuestNameChange(index, e, Number(ratePlanId), Number(roomTypeId));\r\n                            }}\r\n                            value={r.guestName[index]}\r\n                            label={localizedWords.entries.Lcz_GuestFullName}\r\n                            leftIcon\r\n                            class=\"w-full\"\r\n                            placeholder=\"\"\r\n                            maxlength={50}\r\n                            error={this.errors && r.guestName[index] === ''}\r\n                            onInputBlur={e => {\r\n                              if (!checkout_store.modifiedGuestName) {\r\n                                return;\r\n                              }\r\n                              const target = e.target as HTMLIrInputElement;\r\n                              if (r.guestName[index].length < 2) {\r\n                                target.setAttribute('data-state', 'error');\r\n                                target.setAttribute('aria-invalid', 'true');\r\n                              } else {\r\n                                if (target.hasAttribute('aria-invalid')) {\r\n                                  target.setAttribute('aria-invalid', 'false');\r\n                                }\r\n                              }\r\n                            }}\r\n                            onInputFocus={e => {\r\n                              const target = e.target as HTMLIrInputElement;\r\n                              if (target.hasAttribute('data-state')) {\r\n                                target.removeAttribute('data-state');\r\n                              }\r\n                            }}\r\n                          >\r\n                            <ir-icons name=\"user\" slot=\"left-icon\" svgClassName=\"size-4\"></ir-icons>\r\n                          </ir-input>\r\n                          {/* <ir-select\r\n                            variant=\"double-line\"\r\n                            value={r.ratePlan.variations\r\n                              .findIndex(v => `${v.adult_nbr}_a_${v.child_nbr}_c` === `${r.checkoutVariations[index].adult_nbr}_a_${r.checkoutVariations[index].child_nbr}_c`)\r\n                              .toString()}\r\n                            label={localizedWords.entries.Lcz_RequiredCapacity}\r\n                            data={r.ratePlan.variations.map((v, i) => ({\r\n                              id: i.toString(),\r\n                              value: this.formatVariation(v),\r\n                            }))}\r\n                            class=\"w-full\"\r\n                            onValueChange={e => {\r\n                              this.handleVariationChange(index, e, r.ratePlan.variations, Number(ratePlanId), Number(roomTypeId));\r\n                            }}\r\n                          ></ir-select> */}\r\n                          <p\r\n                            class={'w-full'}\r\n                            innerHTML={this.variationService.formatVariationBasedOnInfants({\r\n                              baseVariation: r.checkoutVariations[index],\r\n                              variations: r.ratePlan.variations,\r\n                              infants: r.infant_nbr[index],\r\n                            })}\r\n                          ></p>\r\n                        </div>\r\n\r\n                        {/* Infants row */}\r\n                        {r.selected_variation.child_nbr > 0 &&\r\n                          booking_store.childrenAges.some(age => Number(age) < app_store.childrenStartAge) &&\r\n                          (this.totalPersons > r.checkoutVariations[index].adult_nbr + r.checkoutVariations[index].child_nbr || this.total_rooms > 1) && (\r\n                            <div class=\"flex items-center gap-4\">\r\n                              <div class=\"flex items-center gap-1 text-sm\">\r\n                                <ir-icons name=\"baby\" svgClassName=\"size-4\"></ir-icons>\r\n                                <p class=\"line-clamp-3\">{localizedWords.entries?.Lcz_AnyInfant}</p>\r\n                              </div>\r\n\r\n                              <ir-select\r\n                                data-state={this.errors && Number(r.infant_nbr) === -1 ? 'error' : ''}\r\n                                class={'w-16'}\r\n                                value={r.infant_nbr[index]}\r\n                                onValueChange={e => this.handleInfantNumberChange(roomTypeId, ratePlanId, e.detail, index)}\r\n                                data={[\r\n                                  { id: -1, value: '...' },\r\n                                  { id: 0, value: localizedWords.entries?.Lcz_No },\r\n                                  ...[...Array(Math.min(r.selected_variation.child_nbr, 3))].map((_, i) => ({ id: i + 1, value: (i + 1).toString() })),\r\n                                ]}\r\n                              ></ir-select>\r\n                            </div>\r\n                          )}\r\n\r\n                        <div class=\"flex items-center gap-4\">\r\n                          {this.renderSmokingView(r.roomtype.smoking_option, index, ratePlanId, roomTypeId, r.checkoutSmokingSelection)}\r\n                          {r.is_bed_configuration_enabled && app_store.setup_entries?.bedPreferenceType.length > 0 && (\r\n                            <ir-select\r\n                              data-state={this.errors && r.checkoutBedSelection[index] === '-1' ? 'error' : ''}\r\n                              value={r.checkoutBedSelection[index]}\r\n                              onValueChange={e => this.handleBedConfiguration(roomTypeId, ratePlanId, e.detail, index)}\r\n                              data={[\r\n                                { id: '-1', value: `${localizedWords.entries.Lcz_Bedconfiguration}...` },\r\n                                ...app_store.setup_entries?.bedPreferenceType?.map(b => ({\r\n                                  id: b.CODE_NAME,\r\n                                  value: b[`CODE_VALUE_${(app_store.userPreferences.language_id ?? 'en').toUpperCase()}`],\r\n                                })),\r\n                              ]}\r\n                              icon\r\n                            >\r\n                              <ir-icons name={r.checkoutBedSelection[index] === 'kingsizebed' ? 'double_bed' : 'bed'} slot=\"icon\"></ir-icons>\r\n                            </ir-select>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                });\r\n              });\r\n            })}\r\n          </section>\r\n        </div>\r\n        <ir-dialog\r\n          ref={el => (this.dialogRef = el)}\r\n          onOpenChange={e => {\r\n            if (!e.detail) {\r\n              this.currentRatePlan = null;\r\n            }\r\n          }}\r\n        >\r\n          <div slot=\"modal-body\" class=\"p-6 \">\r\n            <p class={'px-6'} innerHTML={this.cancelationMessage || this.currentRatePlan?.cancelation}></p>\r\n            <p class={'px-6'} innerHTML={this.currentRatePlan?.guarantee}></p>\r\n          </div>\r\n        </ir-dialog>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}