{"version":3,"file":"ir-user-form.js","sourceRoot":"","sources":["../../../../../src/components/ir-booking-engine/ir-checkout-page/ir-user-form/ir-user-form.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,cAAc,EAAE,MAAM,oBAAoB,CAAC;AACpD,OAAO,EAAE,eAAe,EAAE,MAAM,iCAAiC,CAAC;AAClE,OAAO,SAAS,MAAM,oBAAoB,CAAC;AAC3C,OAAO,EAAE,cAAc,EAAE,kBAAkB,EAAE,MAAM,yBAAyB,CAAC;AAC7E,OAAO,cAAc,MAAM,6BAA6B,CAAC;AACzD,OAAO,EAAE,SAAS,EAAE,KAAK,EAAgB,QAAQ,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,eAAe,CAAC;AAQlF,MAAM,OAAO,UAAU;;QAEb,oBAAe,GAAG,IAAI,eAAe,EAAE,CAAC;;;IAEhD,KAAK,CAAC,iBAAiB;QACrB,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACxD,MAAM,IAAI,CAAC,eAAe,CAAC,iBAAiB,EAAE,CAAC;IACjD,CAAC;IACD,MAAM;;QACJ,IAAI,CAAC,SAAS,CAAC,aAAa,EAAE,CAAC;YAC7B,OAAO,IAAI,CAAC;QACd,CAAC;QACD,OAAO,CACL,EAAC,QAAQ;YACP,eAAS,KAAK,EAAC,mBAAmB;gBAChC,WAAK,KAAK,EAAC,mBAAmB;oBAC5B,WAAK,KAAK,EAAC,eAAe;wBACxB,gBACE,WAAW,EAAC,EAAE,EACd,KAAK,EAAE,MAAA,cAAc,CAAC,YAAY,0CAAE,SAAS,gBACjC,CAAA,MAAA,IAAI,CAAC,MAAM,0CAAE,SAAS,EAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EACjD,KAAK,EAAE,cAAc,CAAC,OAAO,CAAC,aAAa,EAC3C,aAAa,EAAE,CAAC,CAAC,EAAE,CAAC,kBAAkB,CAAC,WAAW,EAAE,CAAC,CAAC,MAAM,CAAC,EAC7D,KAAK,EAAC,iBAAiB,EACvB,WAAW,EAAE,CAAC,CAAC,EAAE;;gCACf,MAAM,eAAe,GAAG,cAAc,CAAC,IAAI,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;gCACjE,MAAM,mBAAmB,GAAG,eAAe,CAAC,SAAS,CAAC,EAAE,SAAS,EAAE,MAAA,cAAc,CAAC,YAAY,0CAAE,SAAS,EAAE,CAAC,CAAC;gCAC7G,MAAM,MAAM,GAAuB,CAAC,CAAC,MAAM,CAAC;gCAC5C,IAAI,CAAC,mBAAmB,CAAC,OAAO,EAAE,CAAC;oCACjC,MAAM,CAAC,YAAY,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;oCAC3C,MAAM,CAAC,YAAY,CAAC,cAAc,EAAE,MAAM,CAAC,CAAC;gCAC9C,CAAC;qCAAM,CAAC;oCACN,IAAI,MAAM,CAAC,YAAY,CAAC,cAAc,CAAC,EAAE,CAAC;wCACxC,MAAM,CAAC,YAAY,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;oCAC/C,CAAC;gCACH,CAAC;4BACH,CAAC,EACD,YAAY,EAAE,CAAC,CAAC,EAAE;gCAChB,MAAM,MAAM,GAAuB,CAAC,CAAC,MAAM,CAAC;gCAC5C,IAAI,MAAM,CAAC,YAAY,CAAC,YAAY,CAAC;oCAAE,MAAM,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;4BAC9E,CAAC,GACD;wBACF,gBACE,WAAW,EAAC,EAAE,EACd,KAAK,EAAE,MAAA,cAAc,CAAC,YAAY,0CAAE,QAAQ,EAC5C,KAAK,EAAE,cAAc,CAAC,OAAO,CAAC,YAAY,EAC1C,aAAa,EAAE,CAAC,CAAC,EAAE,CAAC,kBAAkB,CAAC,UAAU,EAAE,CAAC,CAAC,MAAM,CAAC,EAC5D,KAAK,EAAC,iBAAiB,gBACX,CAAA,MAAA,IAAI,CAAC,MAAM,0CAAE,QAAQ,EAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAChD,WAAW,EAAE,CAAC,CAAC,EAAE;;gCACf,MAAM,cAAc,GAAG,cAAc,CAAC,IAAI,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC;gCAC/D,MAAM,kBAAkB,GAAG,cAAc,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAA,cAAc,CAAC,YAAY,0CAAE,QAAQ,EAAE,CAAC,CAAC;gCACzG,IAAI,CAAC,kBAAkB,CAAC,OAAO,EAAE,CAAC;oCAChC,MAAM,MAAM,GAAuB,CAAC,CAAC,MAAM,CAAC;oCAC5C,MAAM,CAAC,YAAY,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;gCAC7C,CAAC;4BACH,CAAC,EACD,YAAY,EAAE,CAAC,CAAC,EAAE;gCAChB,MAAM,MAAM,GAAuB,CAAC,CAAC,MAAM,CAAC;gCAC5C,IAAI,MAAM,CAAC,YAAY,CAAC,YAAY,CAAC;oCAAE,MAAM,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;4BAC9E,CAAC,GACD,CACE;oBACN,WAAK,KAAK,EAAC,eAAe;wBACxB,gBACE,WAAW,EAAC,EAAE,EACd,KAAK,EAAE,MAAA,cAAc,CAAC,YAAY,0CAAE,KAAK,EACzC,KAAK,EAAE,cAAc,CAAC,OAAO,CAAC,gBAAgB,EAC9C,aAAa,EAAE,CAAC,CAAC,EAAE,CAAC,kBAAkB,CAAC,OAAO,EAAE,CAAC,CAAC,MAAM,CAAC,gBAC7C,CAAA,MAAA,IAAI,CAAC,MAAM,0CAAE,KAAK,EAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAC7C,KAAK,EAAC,iBAAiB,EACvB,WAAW,EAAE,CAAC,CAAC,EAAE;;gCACf,MAAM,WAAW,GAAG,cAAc,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;gCACzD,MAAM,eAAe,GAAG,WAAW,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,MAAA,cAAc,CAAC,YAAY,0CAAE,KAAK,EAAE,CAAC,CAAC;gCAC7F,MAAM,MAAM,GAAuB,CAAC,CAAC,MAAM,CAAC;gCAC5C,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,CAAC;oCAC7B,MAAM,CAAC,YAAY,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;oCAC3C,MAAM,CAAC,YAAY,CAAC,cAAc,EAAE,MAAM,CAAC,CAAC;gCAC9C,CAAC;qCAAM,CAAC;oCACN,IAAI,MAAM,CAAC,YAAY,CAAC,cAAc,CAAC,EAAE,CAAC;wCACxC,MAAM,CAAC,YAAY,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;oCAC/C,CAAC;gCACH,CAAC;4BACH,CAAC,EACD,YAAY,EAAE,CAAC,CAAC,EAAE;gCAChB,MAAM,MAAM,GAAuB,CAAC,CAAC,MAAM,CAAC;gCAC5C,IAAI,MAAM,CAAC,YAAY,CAAC,YAAY,CAAC;oCAAE,MAAM,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;4BAC9E,CAAC,GACD;wBAEF,sBACE,aAAa,EAAE,CAAC,CAAA,MAAA,cAAc,CAAC,YAAY,0CAAE,aAAa,KAAI,EAAE,CAAC,CAAC,QAAQ,EAAE,gBAChE,CAAA,MAAA,IAAI,CAAC,MAAM,0CAAE,aAAa,EAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EACrD,KAAK,EAAC,iBAAiB,EACvB,YAAY,EAAE,CAAC,CAAC,EAAE;gCAChB,kBAAkB,CAAC,eAAe,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;gCACrD,kBAAkB,CAAC,cAAc,EAAE,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;4BAC5D,CAAC,EACD,gBAAgB,EAAE,CAAC,CAAC,EAAE;;gCACpB,MAAM,WAAW,GAAG,cAAc,CAAC,IAAI,CAAC,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC,CAAC;gCACjE,MAAM,eAAe,GAAG,WAAW,CAAC,SAAS,CAAC,EAAE,aAAa,EAAE,MAAA,cAAc,CAAC,YAAY,0CAAE,aAAa,EAAE,CAAC,CAAC;gCAC7G,MAAM,MAAM,GAA4B,CAAC,CAAC,MAAM,CAAC;gCACjD,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,CAAC;oCAC7B,MAAM,CAAC,YAAY,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;oCAC3C,MAAM,CAAC,YAAY,CAAC,cAAc,EAAE,MAAM,CAAC,CAAC;gCAC9C,CAAC;qCAAM,CAAC;oCACN,IAAI,MAAM,CAAC,YAAY,CAAC,cAAc,CAAC,EAAE,CAAC;wCACxC,MAAM,CAAC,YAAY,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;oCAC/C,CAAC;gCACH,CAAC;4BACH,CAAC,EACD,iBAAiB,EAAE,CAAC,CAAC,EAAE;gCACrB,MAAM,MAAM,GAA4B,CAAC,CAAC,MAAM,CAAC;gCACjD,IAAI,MAAM,CAAC,YAAY,CAAC,YAAY,CAAC;oCAAE,MAAM,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;4BAC9E,CAAC,GACe,CACd;oBACN,WAAK,KAAK,EAAC,eAAe;wBACxB,iBACE,KAAK,EAAE,cAAc,CAAC,OAAO,CAAC,mBAAmB,CAAC,OAAO,CAAC,IAAI,EAAE,MAAA,SAAS,CAAC,QAAQ,0CAAE,gBAAgB,CAAC,aAAa,CAAC,EACnH,OAAO,EAAC,aAAa,EACrB,KAAK,EAAE,MAAA,cAAc,CAAC,YAAY,0CAAE,YAAY,EAChD,aAAa,EAAE,CAAC,CAAC,EAAE,CAAC,kBAAkB,CAAC,cAAc,EAAE,CAAC,CAAC,MAAM,CAAC,EAChE,IAAI,EAAE,SAAS,CAAC,aAAa,CAAC,WAAW,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;gCACtD,EAAE,EAAE,KAAK,CAAC,SAAS;gCACnB,KAAK,EAAE,KAAK,CAAC,aAAa;6BAC3B,CAAC,CAAC,EACH,KAAK,EAAC,iBAAiB,GACZ,CAET;oBACN,mBACE,KAAK,EAAE,MAAA,cAAc,CAAC,YAAY,0CAAE,OAAO,EAC3C,WAAW,EAAC,EAAE,EACd,KAAK,EAAE,cAAc,CAAC,OAAO,CAAC,mBAAmB,EACjD,SAAS,EAAE,GAAG,EACd,aAAa,EAAE,CAAC,CAAC,EAAE,CAAC,kBAAkB,CAAC,SAAS,EAAE,CAAC,CAAC,MAAM,CAAC,EAC3D,KAAK,EAAC,QAAQ,GACd,CACE;gBACN,mBACE,OAAO,EAAE,MAAA,cAAc,CAAC,YAAY,0CAAE,qBAAqB,EAC3D,KAAK,EAAE,cAAc,CAAC,OAAO,CAAC,6BAA6B,EAC3D,KAAK,EAAC,oBAAoB,EAC1B,aAAa,EAAE,CAAC,CAAC,EAAE,CAAC,kBAAkB,CAAC,uBAAuB,EAAE,CAAC,CAAC,MAAM,CAAC,GACzE,CACM,CACD,CACZ,CAAC;IACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import { IrUserFormData } from '@/models/user_form';\r\nimport { PropertyService } from '@/services/api/property.service';\r\nimport app_store from '@/stores/app.store';\r\nimport { checkout_store, updateUserFormData } from '@/stores/checkout.store';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport { Component, Event, EventEmitter, Fragment, h, Prop } from '@stencil/core';\r\nimport { ZodIssue } from 'zod';\r\n\r\n@Component({\r\n  tag: 'ir-user-form',\r\n  styleUrl: 'ir-user-form.css',\r\n  shadow: true,\r\n})\r\nexport class IrUserForm {\r\n  @Prop() errors: Record<string, ZodIssue>;\r\n  private propertyService = new PropertyService();\r\n  @Event() changePageLoading: EventEmitter<'remove' | 'add'>;\r\n  async componentWillLoad() {\r\n    this.propertyService.setToken(app_store.app_data.token);\r\n    await this.propertyService.fetchSetupEntries();\r\n  }\r\n  render() {\r\n    if (!app_store.setup_entries) {\r\n      return null;\r\n    }\r\n    return (\r\n      <Fragment>\r\n        <section class=\"user-form-section\">\r\n          <div class=\"user-form-content\">\r\n            <div class=\"user-form-row\">\r\n              <ir-input\r\n                placeholder=\"\"\r\n                value={checkout_store.userFormData?.firstName}\r\n                data-state={this.errors?.firstName ? 'error' : ''}\r\n                label={localizedWords.entries.Lcz_FirstName}\r\n                onTextChanged={e => updateUserFormData('firstName', e.detail)}\r\n                class=\"user-form-input\"\r\n                onInputBlur={e => {\r\n                  const firstNameSchema = IrUserFormData.pick({ firstName: true });\r\n                  const firstNameValidation = firstNameSchema.safeParse({ firstName: checkout_store.userFormData?.firstName });\r\n                  const target: HTMLIrInputElement = e.target;\r\n                  if (!firstNameValidation.success) {\r\n                    target.setAttribute('data-state', 'error');\r\n                    target.setAttribute('aria-invalid', 'true');\r\n                  } else {\r\n                    if (target.hasAttribute('aria-invalid')) {\r\n                      target.setAttribute('aria-invalid', 'false');\r\n                    }\r\n                  }\r\n                }}\r\n                onInputFocus={e => {\r\n                  const target: HTMLIrInputElement = e.target;\r\n                  if (target.hasAttribute('data-state')) target.removeAttribute('data-state');\r\n                }}\r\n              />\r\n              <ir-input\r\n                placeholder=\"\"\r\n                value={checkout_store.userFormData?.lastName}\r\n                label={localizedWords.entries.Lcz_LastName}\r\n                onTextChanged={e => updateUserFormData('lastName', e.detail)}\r\n                class=\"user-form-input\"\r\n                data-state={this.errors?.lastName ? 'error' : ''}\r\n                onInputBlur={e => {\r\n                  const lastNameSchema = IrUserFormData.pick({ lastName: true });\r\n                  const lastNameValidation = lastNameSchema.safeParse({ lastName: checkout_store.userFormData?.lastName });\r\n                  if (!lastNameValidation.success) {\r\n                    const target: HTMLIrInputElement = e.target;\r\n                    target.setAttribute('data-state', 'error');\r\n                  }\r\n                }}\r\n                onInputFocus={e => {\r\n                  const target: HTMLIrInputElement = e.target;\r\n                  if (target.hasAttribute('data-state')) target.removeAttribute('data-state');\r\n                }}\r\n              />\r\n            </div>\r\n            <div class=\"user-form-row\">\r\n              <ir-input\r\n                placeholder=\"\"\r\n                value={checkout_store.userFormData?.email}\r\n                label={localizedWords.entries.Lcz_EmailAddress}\r\n                onTextChanged={e => updateUserFormData('email', e.detail)}\r\n                data-state={this.errors?.email ? 'error' : ''}\r\n                class=\"user-form-input\"\r\n                onInputBlur={e => {\r\n                  const emailSchema = IrUserFormData.pick({ email: true });\r\n                  const emailValidation = emailSchema.safeParse({ email: checkout_store.userFormData?.email });\r\n                  const target: HTMLIrInputElement = e.target;\r\n                  if (!emailValidation.success) {\r\n                    target.setAttribute('data-state', 'error');\r\n                    target.setAttribute('aria-invalid', 'true');\r\n                  } else {\r\n                    if (target.hasAttribute('aria-invalid')) {\r\n                      target.setAttribute('aria-invalid', 'false');\r\n                    }\r\n                  }\r\n                }}\r\n                onInputFocus={e => {\r\n                  const target: HTMLIrInputElement = e.target;\r\n                  if (target.hasAttribute('data-state')) target.removeAttribute('data-state');\r\n                }}\r\n              />\r\n              {/* <ir-input onTextChanged={e => updateUserFormData('mobile_number', e.detail)} class=\"w-full\" /> */}\r\n              <ir-phone-input\r\n                mobile_number={(checkout_store.userFormData?.mobile_number || '').toString()}\r\n                data-state={this.errors?.mobile_number ? 'error' : ''}\r\n                class=\"user-form-input\"\r\n                onTextChange={e => {\r\n                  updateUserFormData('mobile_number', e.detail.mobile);\r\n                  updateUserFormData('country_code', e.detail.phone_prefix);\r\n                }}\r\n                onPhoneInputBlur={e => {\r\n                  const emailSchema = IrUserFormData.pick({ mobile_number: true });\r\n                  const emailValidation = emailSchema.safeParse({ mobile_number: checkout_store.userFormData?.mobile_number });\r\n                  const target: HTMLIrPhoneInputElement = e.target;\r\n                  if (!emailValidation.success) {\r\n                    target.setAttribute('data-state', 'error');\r\n                    target.setAttribute('aria-invalid', 'true');\r\n                  } else {\r\n                    if (target.hasAttribute('aria-invalid')) {\r\n                      target.setAttribute('aria-invalid', 'false');\r\n                    }\r\n                  }\r\n                }}\r\n                onPhoneInputFocus={e => {\r\n                  const target: HTMLIrPhoneInputElement = e.target;\r\n                  if (target.hasAttribute('data-state')) target.removeAttribute('data-state');\r\n                }}\r\n              ></ir-phone-input>\r\n            </div>\r\n            <div class=\"user-form-row\">\r\n              <ir-select\r\n                label={localizedWords.entries.Lcz_YourArrivalTime.replace('%1', app_store.property?.time_constraints.check_in_from)}\r\n                variant=\"double-line\"\r\n                value={checkout_store.userFormData?.arrival_time}\r\n                onValueChange={e => updateUserFormData('arrival_time', e.detail)}\r\n                data={app_store.setup_entries.arrivalTime.map(entry => ({\r\n                  id: entry.CODE_NAME,\r\n                  value: entry.CODE_VALUE_EN,\r\n                }))}\r\n                class=\"user-form-input\"\r\n              ></ir-select>\r\n              {/* <ir-input label=\"Your arrival time(check-in from 14:00)\" onTextChanged={e => updateUserFormData('arrival_time', e.detail)} class=\"w-full\" /> */}\r\n            </div>\r\n            <ir-textarea\r\n              value={checkout_store.userFormData?.message}\r\n              placeholder=\"\"\r\n              label={localizedWords.entries.Lcz_AnyMessageForUs}\r\n              maxlength={555}\r\n              onTextChanged={e => updateUserFormData('message', e.detail)}\r\n              class=\"w-full\"\r\n            />\r\n          </div>\r\n          <ir-checkbox\r\n            checked={checkout_store.userFormData?.bookingForSomeoneElse}\r\n            label={localizedWords.entries.Lcz_IAmBooklingForSomeoneElse}\r\n            class=\"user-form-checkbox\"\r\n            onCheckChange={e => updateUserFormData('bookingForSomeoneElse', e.detail)}\r\n          />\r\n        </section>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n"]}