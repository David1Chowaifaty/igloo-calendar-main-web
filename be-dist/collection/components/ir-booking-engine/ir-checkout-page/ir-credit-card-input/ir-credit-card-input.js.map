{"version":3,"file":"ir-credit-card-input.js","sourceRoot":"","sources":["../../../../../src/components/ir-booking-engine/ir-checkout-page/ir-credit-card-input/ir-credit-card-input.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Host, h, Event, EventEmitter, State } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-credit-card-input',\r\n  styleUrl: 'ir-credit-card-input.css',\r\n  shadow: true,\r\n})\r\nexport class IrCreditCardInput {\r\n  @State() cardType: '' | 'AMEX' | 'VISA' | 'Mastercard' = '';\r\n\r\n  @Event() creditCardChange: EventEmitter<string>;\r\n\r\n  private value: string[] = [];\r\n\r\n  private handleInput = (event: KeyboardEvent, index: number, inputs: NodeListOf<HTMLInputElement>) => {\r\n    const input = event.target as HTMLInputElement;\r\n    let value = input.value;\r\n    value = value.replace(/\\D/g, '');\r\n    input.value = value;\r\n    if (index === 0) {\r\n      this.detectCardType(value);\r\n    }\r\n    if (event.key !== 'Backspace') {\r\n      if (value.length >= input.maxLength && index < inputs.length - 1) {\r\n        inputs[index + 1].focus();\r\n      }\r\n    } else {\r\n      if (value.length === 0 && index > 0) {\r\n        inputs[index - 1].focus();\r\n      }\r\n    }\r\n  };\r\n\r\n  private detectCardType(value: string) {\r\n    if (value.startsWith('4')) {\r\n      this.cardType = 'VISA';\r\n    } else if (value.startsWith('5') || value.startsWith('2')) {\r\n      this.cardType = 'Mastercard';\r\n    } else if (value.startsWith('34') || value.startsWith('37')) {\r\n      this.cardType = 'AMEX';\r\n    } else {\r\n      this.cardType = '';\r\n    }\r\n  }\r\n\r\n  getMaxLength(index: number) {\r\n    return this.cardType === 'AMEX' && index === 3 ? 3 : 4;\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"flex flex-col p-2 md:p-4 rounded-md border max-w-xs overflow-hidden\">\r\n          <label htmlFor=\"first_input\">Card number</label>\r\n          <div class=\"flex items-center gap-4 justify-between\">\r\n            {[...Array(this.cardType === 'AMEX' ? 4 : 4)].map((_, index) => (\r\n              <input\r\n                id={index === 0 ? 'first_input' : 'credit_card' + index}\r\n                type=\"text\"\r\n                class=\"appearance-none border-b w-full outline-none\"\r\n                maxLength={this.getMaxLength(index)}\r\n                onKeyDown={event => this.handleInput(event, index, (event.currentTarget as HTMLInputElement).parentElement!.querySelectorAll('input'))}\r\n                onInput={event => {\r\n                  const input = event.target as HTMLInputElement;\r\n                  input.value = input.value.replace(/\\D/g, '');\r\n                  this.value[index] = input.value;\r\n                  this.creditCardChange.emit(this.value.join(''));\r\n                  if (input.value.length >= input.maxLength && index < 3) {\r\n                    ((event.currentTarget as HTMLInputElement).parentElement!.querySelectorAll('input')[index + 1] as HTMLInputElement).focus();\r\n                  }\r\n                }}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}