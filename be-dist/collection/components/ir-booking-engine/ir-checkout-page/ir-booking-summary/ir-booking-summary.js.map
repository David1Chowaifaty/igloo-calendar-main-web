{"version":3,"file":"ir-booking-summary.js","sourceRoot":"","sources":["../../../../../src/components/ir-booking-engine/ir-checkout-page/ir-booking-summary/ir-booking-summary.tsx"],"names":[],"mappings":"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","sourcesContent":["import { CheckoutErrors, pages } from '@/models/commun';\r\nimport app_store from '@/stores/app.store';\r\nimport booking_store, { calculateTotalCost } from '@/stores/booking';\r\nimport { checkout_store } from '@/stores/checkout.store';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport { formatAmount, getDateDifference } from '@/utils/utils';\r\nimport { Component, Host, h, Event, EventEmitter, Prop } from '@stencil/core';\r\nimport { format } from 'date-fns';\r\nimport localization_store from '@/stores/app.store';\r\n@Component({\r\n  tag: 'ir-booking-summary',\r\n  styleUrl: 'ir-booking-summary.css',\r\n  shadow: true,\r\n})\r\nexport class IrBookingSummary {\r\n  @Prop() prepaymentAmount = null;\r\n  @Prop() isBookingConfirmed = false;\r\n  @Event() routing: EventEmitter<pages>;\r\n  @Event() bookingClicked: EventEmitter<null>;\r\n  @Event() openPrivacyPolicy: EventEmitter<null>;\r\n\r\n  @Prop() error: CheckoutErrors;\r\n  handleBooking() {\r\n    this.bookingClicked.emit(null);\r\n  }\r\n\r\n  render() {\r\n    const total_nights = getDateDifference(booking_store.bookingAvailabilityParams.from_date ?? new Date(), booking_store.bookingAvailabilityParams.to_date ?? new Date());\r\n    const { totalAmount } = calculateTotalCost(true);\r\n    if (isRequestPending('/Get_Setup_Entries_By_TBL_NAME_MULTI')) {\r\n      return (\r\n        <div>\r\n          <p>Loading</p>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <Host>\r\n        <div class=\"w-full rounded-md bg-gray-100  text-sm md:max-w-sm\">\r\n          {app_store.property?.space_theme.background_image && (\r\n            <div class=\"aspect-[1/1] max-h-32 w-full lg:aspect-[16/9]\">\r\n              <img\r\n                loading=\"lazy\"\r\n                class=\"h-full w-full rounded-t-md object-cover\"\r\n                src={app_store.property?.images.length === 0 ? app_store.property.space_theme.background_image : app_store.property?.images[0].url}\r\n                alt={app_store.property?.images.length === 0 ? app_store.property.name : app_store.property.images[0].tooltip}\r\n              />\r\n            </div>\r\n          )}\r\n          <section class=\"flex flex-col items-center space-y-4 p-4 lg:p-6\">\r\n            {/* <h3 class=\"text-center  text-lg font-medium\">{app_store.property?.name}</h3> */}\r\n            <div class=\"flex w-full flex-1 items-center \">\r\n              <div class=\"w-56 rounded-md border border-gray-300 bg-white p-2 text-center text-xs\">\r\n                <p>{localizedWords.entries.Lcz_CheckIn}</p>\r\n                <p class=\"text-sm font-semibold\">\r\n                  {format(booking_store.bookingAvailabilityParams?.from_date ? new Date(booking_store.bookingAvailabilityParams?.from_date) : new Date(), 'eee, dd MMM yyyy', {\r\n                    locale: localization_store.selectedLocale,\r\n                  })}\r\n                </p>\r\n                <p>\r\n                  {localizedWords.entries.Lcz_From} {app_store.property?.time_constraints.check_in_from}\r\n                </p>\r\n              </div>\r\n              <div class=\"h-[1px] w-full min-w-[1rem] flex-1 bg-gray-300 \"></div>\r\n              <div class=\"w-56 rounded-md border border-gray-300 bg-white p-2 text-center text-xs\">\r\n                <p>{localizedWords.entries.Lcz_CheckOut}</p>\r\n                <p class=\"text-sm font-semibold\">\r\n                  {format(booking_store.bookingAvailabilityParams?.to_date ? new Date(booking_store.bookingAvailabilityParams?.to_date) : new Date(), 'eee, dd MMM yyyy', {\r\n                    locale: localization_store.selectedLocale,\r\n                  })}\r\n                </p>\r\n                <p>\r\n                  {localizedWords.entries.Lcz_Before} {app_store.property?.time_constraints.check_out_till}\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <ir-button onButtonClick={() => this.routing.emit('booking')} label={localizedWords.entries.Lcz_ChangeDetails} variants=\"outline\" class=\"w-full\"></ir-button>\r\n            <div class={'mt-4  w-full'}>\r\n              <ul class={'w-full space-y-2'}>\r\n                <li class={'flex w-full items-center justify-between'}>\r\n                  <span>\r\n                    {total_nights} {total_nights > 1 ? localizedWords.entries.Lcz_Nights : localizedWords.entries.Lcz_night}\r\n                  </span>\r\n                  <span>{formatAmount(totalAmount, app_store.userPreferences.currency_id)}</span>\r\n                </li>\r\n                {checkout_store.pickup?.location && (\r\n                  <li class={'flex w-full items-center justify-between'}>\r\n                    <span>{localizedWords.entries.Lcz_PickupFee}</span>\r\n                    <span>{formatAmount(checkout_store.pickup.location ? Number(checkout_store.pickup.due_upon_booking) : 0, app_store.userPreferences.currency_id)}</span>\r\n                  </li>\r\n                )}\r\n                <li class={'flex w-full items-center justify-between'}>\r\n                  <span>{localizedWords.entries.Lcz_Total}</span>\r\n                  <span class=\"text-lg font-medium\">\r\n                    {formatAmount(totalAmount + (checkout_store.pickup.location ? Number(checkout_store.pickup.due_upon_booking) : 0), app_store.userPreferences.currency_id)}\r\n                  </span>\r\n                </li>\r\n                <li class={'flex w-full items-center justify-between pt-1'}>\r\n                  <span>{localizedWords.entries.Lcz_PayNow}</span>\r\n                  <span class=\"text-base\">{formatAmount(this.prepaymentAmount, app_store.userPreferences.currency_id)}</span>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <ir-payment-view\r\n              class=\"w-full\"\r\n              prepaymentAmount={this.prepaymentAmount}\r\n              errors={this.error && this.error.cause === 'payment' ? this.error.issues : undefined}\r\n            ></ir-payment-view>\r\n            <div class=\"w-full space-y-1\">\r\n              <div class={'flex w-full items-center gap-1'}>\r\n                <ir-checkbox\r\n                  label={localizedWords.entries.Lcz_IAgreeToThe}\r\n                  checked={checkout_store.agreed_to_services}\r\n                  onCheckChange={e => (checkout_store.agreed_to_services = e.detail)}\r\n                ></ir-checkbox>\r\n\r\n                {/* <ir-privacy-policy\r\n                  class=\" flex-1\"\r\n                  label={`${localizedWords.entries.Lcz_PrivacyPolicy}.`}\r\n                  policyTriggerStyle={{ color: 'inherit', textDecoration: 'underline' }}\r\n                  id=\"checkout-policy\"\r\n                ></ir-privacy-policy> */}\r\n                <span class={'flex-1 cursor-pointer underline'} onClick={() => this.openPrivacyPolicy.emit(null)}>\r\n                  {localizedWords.entries.Lcz_PrivacyPolicy}\r\n                </span>\r\n              </div>\r\n              {this.error?.cause === 'booking-summary' && !checkout_store.agreed_to_services && (\r\n                <p class=\"text-sm text-red-500\">{localizedWords.entries.Lcz_YouMustAcceptPrivacyPolicy}</p>\r\n              )}\r\n            </div>\r\n            <ir-button\r\n              disabled={isRequestPending('/DoReservation') || this.isBookingConfirmed}\r\n              isLoading={isRequestPending('/DoReservation')}\r\n              size=\"md\"\r\n              class=\"w-full\"\r\n              label={localizedWords.entries.Lcz_ConfirmBooking}\r\n              onButtonClick={this.handleBooking.bind(this)}\r\n            ></ir-button>\r\n          </section>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}