{"version":3,"file":"ir-invoice.js","sourceRoot":"","sources":["../../../src/components/ir-invoice/ir-invoice.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Host, Prop, State, Watch, h } from '@stencil/core';\r\nimport { format, isBefore } from 'date-fns';\r\nimport { cn, formatAmount, getDateDifference, runScriptAndRemove } from '@/utils/utils';\r\nimport localizedWords from '@/stores/localization.store';\r\nimport app_store from '@/stores/app.store';\r\nimport { Booking } from '@/models/booking.dto';\r\nimport { PropertyService } from '@/services/api/property.service';\r\nimport { CommonService } from '@/services/api/common.service';\r\nimport axios from 'axios';\r\nimport { AuthService } from '@/services/api/auth.service';\r\nimport { PaymentService } from '@/services/api/payment.service';\r\nimport { AllowedPaymentMethod } from '@/models/property';\r\nimport { BookingListingAppService } from '@/services/app/booking-listing.service';\r\nimport InvoiceSkeleton from './InvoiceSkeleton';\r\n\r\n@Component({\r\n  tag: 'ir-invoice',\r\n  styleUrl: 'ir-invoice.css',\r\n  scoped: true,\r\n})\r\nexport class IrInvoice {\r\n  @Prop({ mutable: true }) email: string;\r\n  @Prop() propertyId: number;\r\n  @Prop() baseUrl: string;\r\n  @Prop() language: string = 'en';\r\n  @Prop() bookingNbr: string;\r\n  @Prop() status: 0 | 1 = 1;\r\n  @Prop() perma_link: string = null;\r\n  @Prop() aName: string = null;\r\n  @Prop() headerShown: boolean = true;\r\n  @Prop() footerShown: boolean = true;\r\n  @Prop() headerMessageShown: boolean = true;\r\n  @Prop() locationShown: boolean = true;\r\n  @Prop() be: boolean = false;\r\n  @Prop() version: string = '2.0';\r\n\r\n  @State() booking: Booking;\r\n  @State() token: string;\r\n  @State() isAuthenticated = false;\r\n  @State() isLoading = false;\r\n  @State() cancelation_message: string = null;\r\n  @State() guarantee_message: string = null;\r\n  @State() cancelationMessage: string;\r\n  @State() amountToBePayed: number;\r\n\r\n  private propertyService = new PropertyService();\r\n  private commonService = new CommonService();\r\n  private authService = new AuthService();\r\n  private paymentService = new PaymentService();\r\n  private bookingListingAppService = new BookingListingAppService();\r\n  private payment_option: AllowedPaymentMethod = null;\r\n  private amount: number = null;\r\n  bookingCancelation: HTMLIrBookingCancelationElement;\r\n\r\n  async componentWillLoad() {\r\n    if (!this.baseUrl) {\r\n      throw new Error('Missing base url');\r\n    }\r\n    axios.defaults.baseURL = this.baseUrl;\r\n    axios.defaults.withCredentials = true;\r\n    this.isLoading = true;\r\n    const isAuthenticated = this.commonService.checkUserAuthState();\r\n    console.log(isAuthenticated);\r\n    if (isAuthenticated) {\r\n      this.token = isAuthenticated.token;\r\n      this.isAuthenticated = true;\r\n    } else {\r\n      this.token = await this.commonService.getBEToken();\r\n    }\r\n\r\n    this.init();\r\n    this.fetchData();\r\n  }\r\n  private detectPaymentOrigin() {\r\n    if (!this.booking.extras) {\r\n      return null;\r\n    }\r\n    const code = this.booking.extras.find(e => e.key === 'payment_code').value;\r\n    if (!code) {\r\n      return null;\r\n    }\r\n    return app_store.property.allowed_payment_methods.find(apm => apm.code === code) ?? null;\r\n  }\r\n\r\n  @Watch('bookingNbr')\r\n  async handleBookingNumberChange(newValue, oldValue) {\r\n    if (newValue !== oldValue) {\r\n      this.booking = await this.propertyService.getExposedBooking({ booking_nbr: this.bookingNbr, language: this.language }, true);\r\n    }\r\n  }\r\n  async init() {\r\n    this.propertyService.setToken(this.token);\r\n    this.commonService.setToken(this.token);\r\n    this.authService.setToken(this.token);\r\n    this.paymentService.setToken(this.token);\r\n  }\r\n  async fetchData() {\r\n    if (!this.isAuthenticated) {\r\n      this.token = await this.authService.login({ option: 'direct', params: { email: this.email, booking_nbr: this.bookingNbr } }, false);\r\n      this.init();\r\n    }\r\n    const requests: any[] = [this.propertyService.getExposedBooking({ booking_nbr: this.bookingNbr, language: this.language })];\r\n\r\n    if (!this.be) {\r\n      requests.push(this.commonService.getExposedLanguage());\r\n      requests.push(\r\n        this.propertyService.getExposedProperty({\r\n          id: this.propertyId,\r\n          language: this.language,\r\n          aname: this.aName,\r\n          perma_link: this.perma_link,\r\n        }),\r\n      );\r\n    }\r\n\r\n    const results = await Promise.all(requests);\r\n    this.booking = results[0];\r\n    this.payment_option = this.detectPaymentOrigin();\r\n    const book_date = new Date(this.booking.booked_on.date);\r\n    book_date.setHours(this.booking.booked_on.hour + 1);\r\n    book_date.setMinutes(this.booking.booked_on.minute);\r\n    await this.setAmountAndCancelationPolicy();\r\n    this.isLoading = false;\r\n  }\r\n\r\n  async setAmountAndCancelationPolicy() {\r\n    if (this.amount || isBefore(new Date(this.booking.to_date), new Date())) {\r\n      return;\r\n    }\r\n    const [bookings_by_amount, newPrepayment] = await Promise.all([\r\n      this.paymentService.getBookingPrepaymentAmount(this.booking),\r\n      await this.paymentService.GetExposedApplicablePolicies({\r\n        book_date: new Date(this.booking.booked_on.date),\r\n        token: this.token,\r\n        params: {\r\n          booking_nbr: this.bookingNbr,\r\n          property_id: this.booking.property.id,\r\n          room_type_id: 0,\r\n          rate_plan_id: 0,\r\n          currency_id: this.booking.currency.id,\r\n          language: this.language,\r\n        },\r\n      }),\r\n    ]);\r\n    const { amount, cancelation_message, guarantee_message } = bookings_by_amount;\r\n    this.cancelation_message = cancelation_message;\r\n    this.guarantee_message = guarantee_message;\r\n    this.amount = amount;\r\n    let cancelation = null;\r\n    let guarantee = null;\r\n    const { message } = await this.paymentService.fetchCancelationMessage(0, 0, '', false, newPrepayment.data);\r\n    this.cancelationMessage = message;\r\n    const cancelationBrackets = newPrepayment.data.find(t => t.type === 'cancelation');\r\n    if (cancelationBrackets?.brackets) {\r\n      cancelation = this.paymentService.findClosestDate(cancelationBrackets?.brackets);\r\n    }\r\n    const guaranteeBrackets = newPrepayment.data.find(t => t.type === 'guarantee');\r\n    if (guaranteeBrackets?.brackets) {\r\n      guarantee = this.paymentService.findClosestDate(guaranteeBrackets?.brackets);\r\n    }\r\n    if (guarantee && cancelation) {\r\n      console.log(guarantee, cancelation);\r\n      if (isBefore(new Date(guarantee.due_on), new Date(cancelation.due_on))) {\r\n        this.amountToBePayed = cancelation.gross_amount;\r\n      }\r\n    }\r\n  }\r\n\r\n  renderBookingDetailHeader() {\r\n    const total_nights = getDateDifference(new Date(this.booking.from_date), new Date(this.booking.to_date));\r\n    const nbr_of_persons = this.booking.occupancy.adult_nbr + this.booking.occupancy.children_nbr;\r\n    const total_rooms = this.booking.rooms.length;\r\n    return `${total_nights} ${total_nights > 1 ? localizedWords.entries.Lcz_Nights : localizedWords.entries.Lcz_night} - ${nbr_of_persons}\r\n    ${nbr_of_persons > 1 ? localizedWords.entries.Lcz_Persons : localizedWords.entries.Lcz_Person} - ${total_rooms}\r\n    ${total_rooms > 1 ? localizedWords.entries.Lcz_Rooms : localizedWords.entries.Lcz_Room}`;\r\n  }\r\n  getPropertyEmail() {\r\n    const { email } = app_store.property?.contacts?.find(c => c.type === 'booking');\r\n    if (!email) {\r\n      return null;\r\n    }\r\n    const subject = `Ref Booking#${this.bookingNbr}`;\r\n    const encodedSubject = encodeURIComponent(subject);\r\n    return `mailto:${email}?subject=${encodedSubject}`;\r\n  }\r\n  renderPaymentText(paymentOption: AllowedPaymentMethod) {\r\n    if (paymentOption.is_payment_gateway) {\r\n      return (\r\n        <p class=\"total-payment text-sm\">\r\n          {localizedWords.entries.Lcz_YouHavePaid} <span>{formatAmount(this.amount, this.booking.currency.code)}</span>\r\n        </p>\r\n      );\r\n    }\r\n    if (paymentOption.code === '005') {\r\n      return (\r\n        <div>\r\n          <p class=\"total-payment text-sm\">\r\n            {localizedWords.entries.Lcz_DueAmountNow} <span>{formatAmount(this.booking.financial.due_amount, this.booking.currency.code)}</span>\r\n          </p>\r\n          <p>{paymentOption.description}</p>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <p class=\"total-payment text-sm\">\r\n        {localizedWords.entries.Lcz_YourCardWillBeCharged} <span>{formatAmount(this.booking.financial.gross_total, this.booking.currency.code)}</span>\r\n      </p>\r\n    );\r\n  }\r\n  private async processPayment() {\r\n    const paymentCode = this.booking.extras.find(e => e.key === 'payment_code');\r\n    if (!paymentCode) {\r\n      console.error('missing paymentcode');\r\n      return;\r\n    }\r\n    const prePaymentAmount = this.booking.extras.find(e => e.key === 'prepayment_amount');\r\n    if (!prePaymentAmount) {\r\n      console.error('missing prepayment amount');\r\n      return;\r\n    }\r\n    const paymentMethod = app_store.property.allowed_payment_methods.find(apm => apm.code === paymentCode.value);\r\n    if (!paymentMethod) {\r\n      console.error('Invalid payment method');\r\n      return;\r\n    }\r\n    if (this.amount || Number(prePaymentAmount.value) > 0) {\r\n      await this.paymentService.GeneratePaymentCaller({\r\n        token: app_store.app_data.token,\r\n        params: {\r\n          booking_nbr: this.booking.booking_nbr,\r\n          amount: Number(this.amount || prePaymentAmount.value) ?? 0,\r\n          currency_id: this.booking.currency.id,\r\n          email: this.booking.guest.email,\r\n          pgw_id: paymentMethod.id.toString(),\r\n        },\r\n        onRedirect: url => (window.location.href = url),\r\n        onScriptRun: script => runScriptAndRemove(script),\r\n      });\r\n    }\r\n  }\r\n  render() {\r\n    if (!this.booking && !this.isLoading) {\r\n      return null;\r\n    }\r\n    if (this.isLoading) {\r\n      return (\r\n        // <div >\r\n        //   {[...new Array(10)].map((_, i) => (\r\n        //     <div key={i} class=\"h-72 w-full animate-pulse rounded-md bg-gray-200\"></div>\r\n        //   ))}\r\n        // </div>\r\n        <div class=\"flex  flex-col gap-4 \">\r\n          <InvoiceSkeleton />\r\n        </div>\r\n      );\r\n    }\r\n    const google_maps_url = `http://maps.google.com/maps?q=${app_store.property.location.latitude},${app_store.property.location.longitude}`;\r\n\r\n    const { cancel } = this.bookingListingAppService.getBookingActions(this.booking);\r\n\r\n    return (\r\n      <Host>\r\n        <ir-interceptor></ir-interceptor>\r\n        <main class=\"relative flex w-full flex-col space-y-5\">\r\n          {this.headerShown && (\r\n            <section class=\"sticky top-0 z-50 m-0  w-full  p-0\">\r\n              <ir-nav\r\n                class={'m-0 p-0'}\r\n                showBookingCode={false}\r\n                website={app_store.property?.space_theme.website}\r\n                logo={app_store.property?.space_theme?.logo}\r\n                menuShown={this.be}\r\n              ></ir-nav>\r\n            </section>\r\n          )}\r\n          <section class={`flex-1 ${this.be ? '' : 'invoice-container mx-auto w-full max-w-6xl'}`}>\r\n            {this.headerMessageShown && isBefore(new Date(), new Date(this.booking.to_date)) ? (\r\n              <div class={this.be ? '' : 'invoice-container'}>\r\n                <p class={`flex items-center gap-4 text-xl font-medium ${this.status === 1 ? 'text-green-600' : 'text-red-500'} ${this.be ? '' : ''}`}>\r\n                  <ir-icons name={this.status === 1 ? 'check' : 'xmark'} />\r\n                  <span> {this.status === 1 ? 'Your booking is now confirmed' : 'Payment unsuccessful'}</span>\r\n                </p>\r\n                {this.status === 1 && <p>An email has been sent to {this.booking.guest.email}</p>}\r\n              </div>\r\n            ) : (\r\n              <div class={this.be ? '' : 'invoice-container'}>\r\n                <p class={'text-xl font-medium '}>This booking is {this.booking.status.description}</p>\r\n              </div>\r\n            )}\r\n            <div class={`flex  ${this.locationShown ? 'w-full' : 'w-full'} gap-16 `}>\r\n              <div class={`invoice-container ${this.locationShown ? 'w-full' : 'w-full'}`}>\r\n                <section class=\"flex flex-col gap-4 md:flex-row md:items-center\">\r\n                  {this.status === 1 ? (\r\n                    <a href={google_maps_url} target=\"_blank\" class={cn(`button-outline`, 'flex items-center justify-center')} data-size=\"sm\">\r\n                      {localizedWords.entries.Lcz_GetDirections}\r\n                    </a>\r\n                  ) : (\r\n                    this.payment_option.is_payment_gateway && <ir-button variants=\"outline\" label=\"Retry Payment\" onButtonClick={() => this.processPayment()}></ir-button>\r\n                  )}\r\n                  <a href={this.getPropertyEmail()} target=\"_blank\" class={cn(`button-outline`, 'flex items-center justify-center')} data-size=\"sm\">\r\n                    Message property\r\n                  </a>\r\n                  {cancel.show && (\r\n                    <ir-button\r\n                      class={'w-full md:w-fit'}\r\n                      variants=\"outline\"\r\n                      label={localizedWords.entries.Lcz_CancelBooking}\r\n                      onButtonClick={async () => {\r\n                        this.bookingCancelation.openDialog();\r\n                      }}\r\n                    ></ir-button>\r\n                  )}\r\n                </section>\r\n                <section class=\"booking-info\">\r\n                  <p class=\"booking-info-text\">\r\n                    {localizedWords.entries.Lcz_BookingPreference} <span>{this.booking.booking_nbr}</span>\r\n                  </p>\r\n                  <p class=\"booking-info-text\">\r\n                    {localizedWords.entries.Lcz_BookedBy}{' '}\r\n                    <span>\r\n                      {this.booking.guest.first_name} {this.booking.guest.last_name}\r\n                    </span>\r\n                  </p>\r\n                  <p class=\"booking-info-text\">\r\n                    {localizedWords.entries.Lcz_CheckIn}: <span>{format(this.booking.from_date, 'eee, dd MMM yyyy')} </span>\r\n                    <span>\r\n                      {localizedWords.entries.Lcz_From} {app_store.property?.time_constraints.check_in_from}\r\n                    </span>\r\n                  </p>\r\n                  <p class=\"booking-info-text\">\r\n                    {localizedWords.entries.Lcz_CheckOut}: <span>{format(this.booking.to_date, 'eee, dd MMM yyyy')} </span>\r\n                    <span>\r\n                      {localizedWords.entries.Lcz_Before} {app_store.property?.time_constraints.check_out_till}\r\n                    </span>\r\n                  </p>\r\n                  <p class=\"booking-info-text\">\r\n                    {localizedWords.entries.Lcz_ArrivalTime} <span>{this.booking.arrival.description}</span>\r\n                  </p>\r\n                  {this.booking.remark && (\r\n                    <p class=\"booking-info-text\">\r\n                      Special request: <span>{this.booking.remark}</span>\r\n                    </p>\r\n                  )}\r\n                </section>\r\n                <section class=\"booking-details space-y-2\">\r\n                  <div class=\"flex flex-wrap items-center justify-between gap-1 text-center md:text-right\">\r\n                    <div class=\"flex items-center gap-4\">\r\n                      <ir-icons name=\"bed\"></ir-icons>\r\n                      <h3 class=\"booking-details-header\">{this.renderBookingDetailHeader()}</h3>\r\n                    </div>\r\n                    <p class=\"text-xs\">{app_store.property?.tax_statement}</p>\r\n                  </div>\r\n                  <div>\r\n                    {this.booking.rooms?.map(room => (\r\n                      <div class=\"room-info\" key={room.identifier}>\r\n                        <div class=\"flex w-full items-center justify-between\">\r\n                          <h4 class=\"room-type\">{room.roomtype.name}</h4>\r\n                          <p class=\"text-lg font-medium text-green-600\"> {formatAmount(room.gross_total, this.booking.currency.code)}</p>\r\n                        </div>\r\n                        <p class=\"room-info-text\">\r\n                          {localizedWords.entries.Lcz_GuestName}{' '}\r\n                          <span>\r\n                            {room.guest.first_name} {room.guest.last_name} ({room.rateplan.selected_variation.adult_child_offering})\r\n                          </span>\r\n                        </p>\r\n                        <p class=\"room-info-text\">\r\n                          {localizedWords.entries.Lcz_MealPlan}{' '}\r\n                          <span>\r\n                            {room.rateplan.name}\r\n                            {/* <span>{\"- Non-smoking\"}</span> */}\r\n                          </span>\r\n                        </p>\r\n                        {this.cancelation_message && <p class=\"room-info-text\" innerHTML={`<b><u>Cancelation:</u></b>${this.cancelation_message}`}></p>}\r\n                        {this.guarantee_message && <p class=\"room-info-text\" innerHTML={`<b><u>Guarantee:</u></b>${this.guarantee_message}`}></p>}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </section>\r\n                {this.booking.pickup_info && (\r\n                  <section class=\"space-y-2\">\r\n                    <div class={'flex items-center gap-4'}>\r\n                      <ir-icons name=\"taxi\"></ir-icons>\r\n                      <h3 class={'booking-details-header'}>Pickup</h3>\r\n                    </div>\r\n                    <div class=\"room-info\">\r\n                      <div class=\"flex w-full items-center justify-between\">\r\n                        <p class=\"flex items-center gap-4\">\r\n                          <p class=\"room-info-text\">\r\n                            {'Date:'} <span>{format(new Date(this.booking.pickup_info.date), 'eee, dd MMM yyyy')}</span>\r\n                          </p>\r\n                          <p class=\"room-info-text\">\r\n                            {'Time:'}{' '}\r\n                            <span>\r\n                              {this.booking.pickup_info.hour}:{this.booking.pickup_info.minute}\r\n                            </span>\r\n                          </p>\r\n                        </p>\r\n                        <p class=\"text-lg font-medium text-green-600\">{formatAmount(this.booking.pickup_info.total, this.booking.pickup_info.currency.code)}</p>\r\n                      </div>\r\n                      <p class=\"room-info-text\">\r\n                        {'Flight details:'} <span>{this.booking.pickup_info.details}</span>\r\n                      </p>\r\n                      <p class=\"room-info-text\">\r\n                        {'No. of vehicles:'} <span>{this.booking.pickup_info.nbr_of_units}</span>\r\n                      </p>\r\n                      <p class={'room-info-text text-xs'}>\r\n                        {app_store.property.pickup_service.pickup_instruction.description}\r\n                        {app_store.property.pickup_service.pickup_cancelation_prepayment.description}\r\n                      </p>\r\n                    </div>\r\n                  </section>\r\n                )}\r\n                {this.payment_option && (\r\n                  <section class=\"space-y-2\">\r\n                    <div class={'flex items-center gap-4'}>\r\n                      <ir-icons name=\"credit_card\"></ir-icons>\r\n                      <h3 class={'booking-details-header'}>{localizedWords.entries.Lcz_PaymentDetails}</h3>\r\n                    </div>\r\n                    <p class=\"total-payment\">\r\n                      {localizedWords.entries.Lcz_Total}{' '}\r\n                      <span class=\"payment_amount text-green-600\">{formatAmount(this.booking.financial.gross_total, this.booking.currency.code)}</span>\r\n                    </p>\r\n                    {this.renderPaymentText(this.payment_option)}\r\n                  </section>\r\n                )}\r\n\r\n                <section class=\"space-y-2\">\r\n                  <div class=\"flex items-center gap-4\">\r\n                    <ir-icons name=\"danger\"></ir-icons>\r\n                    <h3 class={'booking-details-header'}>{localizedWords.entries.Lcz_ImportantInformation}</h3>\r\n                  </div>\r\n                  <p>{app_store.property.description.important_info}</p>\r\n                </section>\r\n                <section class={'space-y-2'}>\r\n                  <div class=\"flex items-center gap-4\">\r\n                    <ir-icons name=\"car\"></ir-icons>\r\n                    <p>\r\n                      {app_store.property?.parking_offering.title} {localizedWords.entries.Lcz_At}{' '}\r\n                      {formatAmount(app_store.property?.parking_offering.pricing, app_store.userPreferences.currency_id)}\r\n                    </p>\r\n                  </div>\r\n                  <div class=\"flex items-center gap-4\">\r\n                    <ir-icons name=\"pets\"></ir-icons>\r\n                    <p>{app_store.property?.pets_acceptance.title}</p>\r\n                  </div>\r\n                  <div class=\"flex items-center gap-4 \">\r\n                    <ir-icons name=\"bed\"></ir-icons>\r\n                    <p>{app_store.property?.baby_cot_offering.title}</p>\r\n                  </div>\r\n                </section>\r\n              </div>\r\n              {this.locationShown && (\r\n                <div class=\"property_info sticky top-[20%]\">\r\n                  {app_store.property?.space_theme.background_image && (\r\n                    <div class=\"lg:aspect9-[16/9] aspect-[1/1] max-h-32 w-full\">\r\n                      <img class=\"property_img h-full w-full object-cover\" src={app_store.property?.space_theme.background_image} alt=\"\" />\r\n                    </div>\r\n                  )}\r\n                  <a class=\"mapLink\" target=\"_blank\" href={google_maps_url}>\r\n                    <img\r\n                      src={`https://maps.googleapis.com/maps/api/staticmap?center=${app_store.property?.location.latitude || 34.022},${app_store.property?.location.longitude || 35.628}&zoom=15&size=1024x768&maptype=roadmap&markers=color:red%7Clabel:${app_store.property.name}%7C34.022,35.628&key=AIzaSyCJ5P4SraJdZzcBi9Ue16hyg_iWJv-aHpk`}\r\n                      loading=\"lazy\"\r\n                    ></img>\r\n                  </a>\r\n                  <div class=\"contact-info\">\r\n                    <span>\r\n                      <label class=\"m-0 p-0\" htmlFor=\"phone\">\r\n                        {localizedWords.entries.Lcz_Phone}\r\n                      </label>\r\n                    </span>\r\n                    <a id=\"phone\" class=\"contact-link p-0\" href={`tel:${app_store.property?.phone}`}>\r\n                      {app_store.property?.country?.phone_prefix || ''} {app_store.property?.phone}\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </section>\r\n          {this.footerShown && <ir-footer version={this.version}></ir-footer>}\r\n          <ir-booking-cancelation\r\n            ref={el => (this.bookingCancelation = el)}\r\n            booking_nbr={this.booking?.booking_nbr}\r\n            paymentMessage={this.amountToBePayed ? `If you cancel now, the penalty will be ${formatAmount(this.amountToBePayed, this.booking.currency.code)}` : null}\r\n            cancelation={this.cancelationMessage || this.booking?.rooms[0].rateplan.cancelation}\r\n          ></ir-booking-cancelation>\r\n        </main>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}