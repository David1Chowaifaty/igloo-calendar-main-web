{"file":"ir-room-nights2.js","mappings":"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","names":["__stencil_proxyCustomElement","moment"],"sources":["src/components/igloo-calendar/ir-room-nights/ir-room-nights.css?tag=ir-room-nights&encapsulation=scoped","src/components/igloo-calendar/ir-room-nights/ir-room-nights.tsx"],"sourcesContent":[":host {\r\n  display: block;\r\n  box-sizing: border-box;\r\n  margin: 0;\r\n  position: relative;\r\n}\r\n.loading-container {\r\n  position: relative;\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.close-icon {\r\n  position: absolute;\r\n  top: 18px;\r\n  right: 33px;\r\n  outline: none;\r\n}\r\n.close {\r\n  float: right;\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n  line-height: 1;\r\n  color: #000;\r\n  text-shadow: 0 1px 0 #fff;\r\n  opacity: 0.5;\r\n\r\n  padding: 0;\r\n  background-color: transparent;\r\n  border: 0;\r\n  appearance: none;\r\n}\r\n.card {\r\n  top: 0;\r\n  z-index: 1000;\r\n}\r\n.card-title {\r\n  border-bottom: 1px solid #e4e5ec;\r\n  width: 100%;\r\n}\r\n.irfontgreen {\r\n  color: #0e930e;\r\n}\r\n.currency {\r\n  display: block;\r\n  position: absolute;\r\n  margin: 0;\r\n  padding: 0;\r\n  height: auto;\r\n  left: 10px;\r\n}\r\n.rate-input {\r\n  font-size: 14px;\r\n  line-height: 0;\r\n  padding: 0;\r\n  height: 0;\r\n  border-left: 0;\r\n  border-radius: 0.25rem !important;\r\n}\r\n.rate-input-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  box-sizing: border-box;\r\n  flex: 1;\r\n}\r\n.new-currency {\r\n  color: #3b4781;\r\n  border: 1px solid #cacfe7;\r\n  font-size: 0.975rem;\r\n  height: 2rem;\r\n  background: rgb(255, 255, 255);\r\n  padding-right: 0 !important;\r\n  border-right: 0;\r\n  border-top-right-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n  transition: border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n}\r\n.input-group-prepend span[data-state='focus'] {\r\n  border-color: var(--blue);\r\n}\r\n.input-group-prepend span[data-disabled] {\r\n  background-color: #eceff1;\r\n  border-color: rgba(118, 118, 118, 0.3);\r\n}\r\n.rateInputBorder {\r\n  padding-left: 5px !important;\r\n  padding-right: 5px !important;\r\n  border-top-left-radius: 0 !important;\r\n  border-bottom-left-radius: 0 !important;\r\n}\r\n","import { Component, Host, Prop, State, h, Event, EventEmitter, Fragment } from '@stencil/core';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport { convertDatePrice, formatDate, getDaysArray } from '@/utils/utils';\r\nimport { Booking, Day, IUnit, Room } from '@/models/booking.dto';\r\nimport { IRoomNightsDataEventPayload } from '@/models/property-types';\r\nimport moment from 'moment';\r\nimport locales from '@/stores/locales.store';\r\nimport { Variation } from '@/models/property';\r\n\r\n@Component({\r\n  tag: 'ir-room-nights',\r\n  styleUrl: 'ir-room-nights.css',\r\n  scoped: true,\r\n})\r\nexport class IrRoomNights {\r\n  @Prop() bookingNumber: string;\r\n  @Prop() propertyId: number;\r\n  @Prop() language: string;\r\n  @Prop() identifier: string;\r\n  @Prop() toDate: string;\r\n  @Prop() fromDate: string;\r\n  @Prop() pool: string;\r\n  @Prop() ticket: string;\r\n  @Prop() defaultDates: { from_date: string; to_date: string };\r\n\r\n  @State() bookingEvent: Booking;\r\n  @State() selectedRoom: Room;\r\n  @State() rates: Day[] = [];\r\n  @State() isLoading = false;\r\n  @State() initialLoading = false;\r\n  @State() inventory: number | null = null;\r\n  @State() isEndDateBeforeFromDate: boolean = false;\r\n  @State() defaultTotalNights = 0;\r\n  @State() isInputFocused = -1;\r\n  @State() dates: { from_date: Date; to_date: Date } = { from_date: new Date(), to_date: new Date() };\r\n\r\n  @Event() closeRoomNightsDialog: EventEmitter<IRoomNightsDataEventPayload>;\r\n\r\n  private bookingService = new BookingService();\r\n\r\n  componentWillLoad() {\r\n    this.dates = { from_date: new Date(this.fromDate), to_date: new Date(this.toDate) };\r\n    this.init();\r\n  }\r\n\r\n  isButtonDisabled() {\r\n    return this.isLoading || this.rates.some(rate => rate.amount === -1) || this.inventory === 0 || this.inventory === null;\r\n  }\r\n  async init() {\r\n    try {\r\n      const { from_date } = this.defaultDates;\r\n      if (moment(from_date, 'YYYY-MM-DD').isBefore(moment(this.fromDate, 'YYYY-MM-DD'))) {\r\n        this.dates.from_date = new Date(from_date);\r\n      } else {\r\n        this.dates.from_date = new Date(this.fromDate);\r\n      }\r\n      this.dates.to_date = new Date(this.toDate);\r\n      this.bookingEvent = await this.bookingService.getExposedBooking(this.bookingNumber, this.language);\r\n      if (this.bookingEvent) {\r\n        const filteredRooms = this.bookingEvent.rooms.filter(room => room.identifier === this.identifier);\r\n        this.selectedRoom = filteredRooms[0];\r\n        const lastDay = this.selectedRoom?.days[this.selectedRoom.days.length - 1];\r\n        //let first_rate = this.selectedRoom.days[0].amount;\r\n        if (moment(this.toDate).add(-1, 'days').isSame(moment(lastDay.date))) {\r\n          console.log('here1');\r\n          const amount = await this.fetchBookingAvailability(this.fromDate, this.selectedRoom.days[0].date, this.selectedRoom.rateplan.id);\r\n          const newDatesArr = getDaysArray(this.selectedRoom.days[0].date, this.fromDate);\r\n          this.isEndDateBeforeFromDate = true;\r\n          this.rates;\r\n          this.rates = [\r\n            ...newDatesArr.map(day => ({\r\n              amount: amount / newDatesArr.length,\r\n              date: day,\r\n              cost: null,\r\n            })),\r\n            ...this.selectedRoom.days,\r\n          ];\r\n          this.defaultTotalNights = this.rates.length - this.selectedRoom.days.length;\r\n        } else {\r\n          console.log('here2');\r\n          console.log(lastDay);\r\n          const amount = await this.fetchBookingAvailability(this.bookingEvent.to_date, moment(this.toDate, 'YYYY-MM-DD').format('YYYY-MM-DD'), this.selectedRoom.rateplan.id);\r\n          const newDatesArr = getDaysArray(lastDay.date, this.toDate);\r\n          this.rates = [\r\n            ...this.selectedRoom.days,\r\n            ...newDatesArr.map(day => ({\r\n              amount: amount / newDatesArr.length,\r\n              date: day,\r\n              cost: null,\r\n            })),\r\n          ];\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  private handleInput(event: string, index: number) {\r\n    let inputValue = event;\r\n    let days = [...this.rates];\r\n    inputValue = inputValue.replace(/[^0-9.]/g, '');\r\n    if (inputValue === '') {\r\n      days[index].amount = -1;\r\n    } else {\r\n      if (!isNaN(Number(inputValue))) {\r\n        days[index].amount = Number(inputValue);\r\n      }\r\n    }\r\n    this.rates = days;\r\n  }\r\n  async fetchBookingAvailability(from_date: string, to_date: string, rate_plan_id: number) {\r\n    try {\r\n      this.initialLoading = true;\r\n      const bookingAvailability = await this.bookingService.getBookingAvailability({\r\n        from_date,\r\n        to_date,\r\n        propertyid: this.propertyId,\r\n        adultChildCount: {\r\n          adult: this.selectedRoom.rateplan.selected_variation.adult_nbr,\r\n          child: this.selectedRoom.rateplan.selected_variation.child_nbr,\r\n        },\r\n        language: this.language,\r\n        currency: this.bookingEvent.currency,\r\n        room_type_ids: [this.selectedRoom.roomtype.id],\r\n        rate_plan_ids: [rate_plan_id],\r\n      });\r\n      console.log(bookingAvailability[0], rate_plan_id);\r\n      this.inventory = bookingAvailability[0].inventory;\r\n      const rate_plan = bookingAvailability[0].rateplans.find(rate => rate.id === rate_plan_id);\r\n      if (!rate_plan || !rate_plan.variations) {\r\n        this.inventory = null;\r\n        return null;\r\n      }\r\n      const selected_variation: Variation = rate_plan.variations?.find(\r\n        variation =>\r\n          variation.adult_nbr === this.selectedRoom.rateplan.selected_variation.adult_nbr && variation.child_nbr === this.selectedRoom.rateplan.selected_variation.child_nbr,\r\n      );\r\n      if (!selected_variation) {\r\n        return null;\r\n      }\r\n      return selected_variation.discounted_gross_amount;\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      this.initialLoading = false;\r\n    }\r\n  }\r\n\r\n  private renderInputField(index: number, currency_symbol: string, day: Day) {\r\n    return (\r\n      <div class=\"col-3 ml-1 position-relative  m-0 p-0 rate-input-container\">\r\n        <ir-price-input\r\n          value={day.amount > 0 ? day.amount.toString() : ''}\r\n          disabled={this.inventory === 0 || this.inventory === null}\r\n          currency={currency_symbol}\r\n          aria-label=\"rate\"\r\n          aria-describedby=\"rate cost\"\r\n          onTextChange={e => this.handleInput(e.detail, index)}\r\n        ></ir-price-input>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private renderReadOnlyField(currency_symbol: string, day: Day) {\r\n    return <p class=\"col-9 ml-1 m-0 p-0\">{`${currency_symbol}${Number(day.amount).toFixed(2)}`}</p>;\r\n  }\r\n  private renderRateFields(index: number, currency_symbol: string, day: Day) {\r\n    if (this.isEndDateBeforeFromDate) {\r\n      if (index < this.defaultTotalNights) {\r\n        return this.renderInputField(index, currency_symbol, day);\r\n      } else {\r\n        return this.renderReadOnlyField(currency_symbol, day);\r\n      }\r\n    } else {\r\n      return index < this.selectedRoom.days.length ? this.renderReadOnlyField(currency_symbol, day) : this.renderInputField(index, currency_symbol, day);\r\n    }\r\n  }\r\n  renderDates() {\r\n    const currency_symbol = this.bookingEvent.currency.symbol;\r\n    // const currency_symbol = getCurrencySymbol(this.bookingEvent.currency.code);\r\n    return (\r\n      <div class={'mt-2 m-0'}>\r\n        {this.rates?.map((day, index) => (\r\n          <div class={'row m-0 mt-1 align-items-center'}>\r\n            <p class={'col-2 m-0 p-0'}>{convertDatePrice(day.date)}</p>\r\n            {this.renderRateFields(index, currency_symbol, day)}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n  async handleRoomConfirmation() {\r\n    try {\r\n      this.isLoading = true;\r\n      let oldRooms = [...this.bookingEvent.rooms];\r\n      let selectedRoomIndex = oldRooms.findIndex(room => room.identifier === this.identifier);\r\n      if (selectedRoomIndex === -1) {\r\n        throw new Error('Invalid Pool');\r\n      }\r\n      oldRooms[selectedRoomIndex] = {\r\n        ...oldRooms[selectedRoomIndex],\r\n        days: this.rates,\r\n        to_date: moment(this.dates.to_date).format('YYYY-MM-DD'),\r\n        from_date: moment(this.dates.from_date).format('YYYY-MM-DD'),\r\n      };\r\n      const body = {\r\n        assign_units: true,\r\n        check_in: true,\r\n        is_pms: true,\r\n        is_direct: true,\r\n        pickup_info: this.bookingEvent.pickup_info,\r\n        extra_services: this.bookingEvent.extra_services,\r\n        booking: {\r\n          booking_nbr: this.bookingNumber,\r\n          from_date: moment(this.dates.from_date).format('YYYY-MM-DD'),\r\n          to_date: moment(this.dates.to_date).format('YYYY-MM-DD'),\r\n          remark: this.bookingEvent.remark,\r\n          property: this.bookingEvent.property,\r\n          source: this.bookingEvent.source,\r\n          currency: this.bookingEvent.currency,\r\n          arrival: this.bookingEvent.arrival,\r\n          guest: this.bookingEvent.guest,\r\n          rooms: oldRooms,\r\n        },\r\n      };\r\n      await this.bookingService.doReservation(body);\r\n      this.closeRoomNightsDialog.emit({ type: 'confirm', pool: this.pool });\r\n    } catch (error) {\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n  render() {\r\n    if (!this.bookingEvent) {\r\n      return (\r\n        <div class=\"loading-container\">\r\n          <ir-loading-screen></ir-loading-screen>\r\n        </div>\r\n      );\r\n    }\r\n    console.log(this.inventory);\r\n    return (\r\n      <Host>\r\n        <div class=\"card position-sticky mb-0 shadow-none p-0 \">\r\n          <div class=\"d-flex mt-2 align-items-center justify-content-between \">\r\n            <h3 class=\"card-title text-left pb-1 font-medium-2 px-2\">\r\n              {locales.entries.Lcz_AddingRoomNightsTo} {this.selectedRoom?.roomtype?.name} {(this.selectedRoom?.unit as IUnit).name}\r\n            </h3>\r\n            <button type=\"button\" class=\"close close-icon\" onClick={() => this.closeRoomNightsDialog.emit({ type: 'cancel', pool: this.pool })}>\r\n              <ir-icon icon=\"ft-x\" class={'m-0'}></ir-icon>\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <section class={'text-left px-2'}>\r\n          <p class={'font-medium-1'}>\r\n            {`${locales.entries.Lcz_Booking}#`} {this.bookingNumber}\r\n          </p>\r\n          {this.initialLoading ? (\r\n            <p class={'mt-2 text-secondary'}>{locales.entries['Lcz_CheckingRoomAvailability ']}</p>\r\n          ) : (\r\n            <Fragment>\r\n              <p class={'font-weight-bold font-medium-1'}>{`${formatDate(moment(this.dates.from_date).format('YYYY-MM-DD'), 'YYYY-MM-DD')} - ${formatDate(\r\n                moment(this.dates.to_date).format('YYYY-MM-DD'),\r\n                'YYYY-MM-DD',\r\n              )}`}</p>\r\n              <p class={'font-medium-1 mb-0'}>\r\n                {`${this.selectedRoom.rateplan.name}`} {this.selectedRoom.rateplan.is_non_refundable && <span class={'irfontgreen'}>{locales.entries.Lcz_NonRefundable}</span>}\r\n              </p>\r\n              {(this.inventory === 0 || this.inventory === null) && <p class=\"font-medium-1 text danger\">{locales.entries.Lcz_NoAvailabilityForAdditionalNights}</p>}\r\n\r\n              {this.selectedRoom.rateplan.custom_text && <p class={'text-secondary mt-0'}>{this.selectedRoom.rateplan.custom_text}</p>}\r\n              {this.renderDates()}\r\n            </Fragment>\r\n          )}\r\n        </section>\r\n        <section class={'d-flex align-items-center mt-2 px-2'}>\r\n          <ir-button\r\n            btn_color=\"secondary\"\r\n            btn_disabled={this.isLoading}\r\n            text={locales?.entries.Lcz_Cancel}\r\n            class=\"full-width\"\r\n            btn_styles=\"justify-content-center\"\r\n            onClickHandler={() => this.closeRoomNightsDialog.emit({ type: 'cancel', pool: this.pool })}\r\n          ></ir-button>\r\n\r\n          {this.inventory > 0 && this.inventory !== null && (\r\n            <ir-button\r\n              isLoading={this.isLoading}\r\n              text={locales?.entries.Lcz_Confirm}\r\n              btn_disabled={this.isButtonDisabled()}\r\n              class=\"ml-1 full-width\"\r\n              btn_styles=\"justify-content-center\"\r\n              onClickHandler={this.handleRoomConfirmation.bind(this)}\r\n            ></ir-button>\r\n          )}\r\n        </section>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"version":3}