{"file":"ir-monthly-bookings-report-table2.js","mappings":"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","names":["moment"],"sources":["src/components/ir-monthly-bookings-report/ir-monthly-bookings-report-table/ir-monthly-bookings-report-table.css?tag=ir-monthly-bookings-report-table&encapsulation=scoped","src/common/table.css?tag=ir-monthly-bookings-report-table&encapsulation=scoped","src/components/ir-monthly-bookings-report/ir-monthly-bookings-report-table/ir-monthly-bookings-report-table.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n.future-report td {\n  background-color: hsla(210, 16%, 85.2%, 0.25) !important;\n}\n.legend {\n  height: 12px;\n  aspect-ratio: 1;\n  background: #000;\n  border-radius: 4px;\n}\n.secondary {\n  background: #6692b3;\n}\n.progress-main {\n  width: 450px !important;\n}\n","/* Base styles */\n.ir-table-row td {\n  padding: 0.5rem 1rem !important;\n  text-align: left;\n  z-index: 2;\n  background-color: var(--wa-color-surface-default);\n  white-space: nowrap;\n  color: var(--wa-color-text-normal);\n  box-sizing: border-box;\n  /* width: max-content;\n  max-width: max-content; */\n}\n/* .ir-table-row td:last-child {\n  width: 100%; \n}*/\n/* .ir-table-row td:first-child,\n.table thead th:first-child {\n  position: sticky;\n  left: var(--ir-table-sticky-padding,-1rem);\n} */\n.table--container {\n  flex: 1 1 0%;\n}\n.table--container {\n  overflow-x: auto;\n}\n.table td {\n  border-top: 0;\n  border-bottom: 1px solid var(--wa-color-neutral-border-quiet, #abaeb9);\n  /* border-bottom: 1px solid var(--wa-color-gray-80); */\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n}\n.table tbody tr:last-child > td {\n  border-bottom: 0 !important;\n}\n.table thead th {\n  border: none !important;\n  background: #ececec;\n  background: color-mix(in oklab, var(--wa-color-neutral-fill-quiet, #f1f2f3) 60%, transparent);\n  color: #374151;\n  padding: 0.5rem 1rem !important;\n  text-align: left;\n}\n.data-table thead th {\n  box-sizing: border-box;\n  background: var(--wa-color-surface-default) !important;\n  padding-top: 0.5rem !important;\n  padding-bottom: 0.5rem !important;\n  border-bottom: 1px solid var(--wa-color-neutral-90) !important;\n  color: var(--wa-color-text-normal);\n}\n.data-table .empty-row {\n  height: 50vh !important;\n  text-align: center;\n  color: var(--wa-color-gray-60);\n}\n\n.data-table--pagination {\n  padding: 0.5rem 1rem;\n  position: sticky;\n  bottom: 0;\n  background: var(--wa-color-surface-default);\n  border-top: 1px solid var(--wa-color-neutral-90);\n}\n\n/* Selected Rows Styles */\n\n.selected td {\n  background: #e3f3fa !important;\n}\n.selected td {\n  color: var(--gray-dark) !important;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n}\n\n/* Sorting styles */\n.sortable,\n.ir-table-row {\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n}\n.sortable {\n  text-transform: capitalize;\n}\n.sortable:hover {\n  color: #212529;\n  background-color: #e2e8f0 !important;\n  border-color: #dae0e5;\n  cursor: pointer;\n}\n.ir-table-row:hover td {\n  background: #e2e6ea3f !important;\n  background: var(--wa-color-neutral-fill-quiet, #f1f2f3) !important;\n}\n.sortable:active {\n  color: #212529;\n  background-color: #e2e8f0;\n  border-color: #d3d9df;\n}\n.sortable svg {\n  color: var(--blue);\n}\n/* .action-row {\n  position: sticky;\n  right:var(--ir-table-sticky-padding,-1rem);\n} */\n.sticky-column {\n  position: sticky !important;\n  right: 0;\n  background-color: white;\n}\n","import { Component, Host, Prop, h } from '@stencil/core';\nimport { DailyReport } from '../types';\nimport moment from 'moment';\nimport { formatAmount } from '@/utils/utils';\nimport calendar_data from '@/stores/calendar-data';\n\n@Component({\n  tag: 'ir-monthly-bookings-report-table',\n  styleUrls: ['ir-monthly-bookings-report-table.css', '../../../common/table.css'],\n  scoped: true,\n})\nexport class IrMonthlyBookingsReportTable {\n  @Prop() reports: DailyReport[] = [];\n  render() {\n    // const totalUnits = this.reports?.reduce((prev, curr) => prev + curr.units_booked, 0) ?? 0;\n    return (\n      <Host class={'card p-1  table-container table-responsive'}>\n        <table class=\"table\">\n          <thead class=\"table-header\">\n            <tr>\n              <th class=\"text-center\">Date</th>\n              <th class=\"text-center\">Units booked</th>\n              <th class=\"text-center\">Total guests</th>\n              <th class=\"text-right\">\n                <ir-tooltip customSlot message=\"Average Daily Rate\" alignment=\"end\">\n                  <span slot=\"tooltip-trigger\">ADR</span>\n                </ir-tooltip>\n              </th>\n              <th class=\"text-right\">Rooms revenue</th>\n              <th class=\"\">Occupancy</th>\n            </tr>\n          </thead>\n          <tbody>\n            {this.reports.length === 0 && (\n              <tr>\n                <td colSpan={3} class={'text-center'} style={{ height: '30vh' }}>\n                  No data found\n                </td>\n              </tr>\n            )}\n            {this.reports.map(report => {\n              const mainPercentage = `${parseFloat(report.occupancy_percent.toString()).toFixed(2)}%`;\n              const secondaryPercentage = report.last_year ? `${parseFloat(report.last_year.occupancy_percent.toString()).toFixed(2)}%` : null;\n              const reportDate = moment(report.day, 'YYYY-MM-DD');\n              const isFutureDate = moment().isBefore(reportDate, 'dates');\n              return (\n                <tr key={report.day} class={`ir-table-row ${isFutureDate ? 'future-report' : ''}`}>\n                  <td class={'text-center'}>{reportDate.format('D')}</td>\n                  <td class=\"text-center\">\n                    <div class={'d-flex flex-column'} style={{ gap: '0.5rem' }}>\n                      <p class={`p-0 m-0 ${report.last_year?.units_booked ? 'font-weight-bold' : ''}`}>{report.units_booked}</p>\n                      {report.last_year?.units_booked > 0 && <p class=\"p-0 m-0\">{report.last_year?.units_booked}</p>}\n                    </div>\n                  </td>\n                  <td class=\"text-center\">\n                    <div class={'d-flex flex-column'} style={{ gap: '0.5rem' }}>\n                      <p class={`p-0 m-0 ${report.last_year?.total_guests ? 'font-weight-bold' : ''}`}>{report.total_guests}</p>\n                      {report.last_year?.total_guests > 0 && <p class=\"p-0 m-0\">{report.last_year?.total_guests}</p>}\n                    </div>\n                  </td>\n                  <td class=\"text-right\">\n                    <div class={'d-flex flex-column'} style={{ gap: '0.5rem' }}>\n                      <p class={`p-0 m-0 ${report.last_year?.adr ? 'font-weight-bold' : ''}`}>{formatAmount(calendar_data.currency.symbol, report.adr)}</p>\n                      {report.last_year?.adr > 0 && <p class=\"p-0 m-0\">{formatAmount(calendar_data.currency.symbol, report.last_year.adr)}</p>}\n                    </div>\n                  </td>\n                  <td class=\"text-right\">\n                    <div class={'d-flex flex-column'} style={{ gap: '0.5rem' }}>\n                      <p class={`p-0 m-0 ${report.last_year?.rooms_revenue ? 'font-weight-bold' : ''}`}>{formatAmount(calendar_data.currency.symbol, report.rooms_revenue)}</p>\n                      {report.last_year?.rooms_revenue > 0 && <p class=\"p-0 m-0\">{formatAmount(calendar_data.currency.symbol, report.last_year.rooms_revenue)}</p>}\n                    </div>\n                  </td>\n                  <td>\n                    <div class={'d-flex flex-column'} style={{ gap: '0.5rem' }}>\n                      <ir-progress-indicator percentage={mainPercentage}></ir-progress-indicator>\n                      {report.last_year?.occupancy_percent > 0 && <ir-progress-indicator percentage={secondaryPercentage} color=\"secondary\"></ir-progress-indicator>}\n                    </div>\n                  </td>\n                </tr>\n              );\n            })}\n          </tbody>\n          <tfoot>\n            <tr>\n              <td colSpan={5}></td>\n              {/* <td>\n                {' '}\n                <b style={{ whiteSpace: 'nowrap' }}>Total: {totalUnits}</b>\n              </td> */}\n              {/* <td colSpan={2}></td> */}\n              <td colSpan={1} class=\"text-right\" style={{ whiteSpace: 'nowrap' }}>\n                <div class={'d-flex align-items-center justify-content-end'} style={{ gap: '1rem', paddingTop: '0.5rem' }}>\n                  <div class=\"d-flex align-items-center\" style={{ gap: '0.5rem' }}>\n                    <div class=\"legend bg-primary\"></div>\n                    <p class=\"p-0 m-0\">Selected period </p>\n                  </div>\n                  <div class=\"d-flex align-items-center\" style={{ gap: '0.5rem' }}>\n                    <div class=\"legend secondary\"></div>\n                    <p class=\"p-0 m-0\">Previous year</p>\n                  </div>\n                </div>\n              </td>\n            </tr>\n          </tfoot>\n        </table>\n      </Host>\n    );\n  }\n}\n"],"version":3}