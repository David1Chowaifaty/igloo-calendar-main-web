{"file":"ir-phone-input2.js","mappings":"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","names":["__stencil_proxyCustomElement"],"sources":["src/components/ui/ir-phone-input/ir-phone-input.css?tag=ir-phone-input&encapsulation=scoped","src/components/ui/ir-phone-input/ir-phone-input.tsx"],"sourcesContent":[":host {\r\n  display: block;\r\n}\r\n\r\n.input-container {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 0 !important;\r\n}\r\n.input-container:focus-within {\r\n  border-color: #1e9ff2;\r\n}\r\n.border-theme {\r\n  border-color: #cacfe7;\r\n}\r\n.input-container input {\r\n  flex: 1;\r\n  border: 0;\r\n}\r\n.input-container input:focus {\r\n  outline: none;\r\n}\r\n.dropdown-trigger {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  background: white;\r\n  border: 0;\r\n  border-right: 1px solid #cacfe7;\r\n}\r\n.ir-dropdown-container {\r\n  position: absolute;\r\n  z-index: 1000;\r\n  bottom: -30px;\r\n  width: 100%;\r\n  left: 0;\r\n  background: white;\r\n}\r\n.input-container label {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin: 0;\r\n  padding: 0 5px;\r\n}\r\n.flag {\r\n  height: 1rem;\r\n  aspect-ratio: 4/3;\r\n  border-radius: 3px;\r\n}\r\n.is-invalid {\r\n  border-color: #ff4961;\r\n}\r\n.phone_prefix_label {\r\n  padding: 0 0.5rem;\r\n  margin: 0;\r\n}\r\n","import { ICountry } from '@/components';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport locales from '@/stores/locales.store';\r\nimport { Component, Element, Event, EventEmitter, Host, Listen, Prop, State, Watch, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-phone-input',\r\n  styleUrl: 'ir-phone-input.css',\r\n  scoped: true,\r\n})\r\nexport class IrPhoneInput {\r\n  @Element() el: HTMLElement;\r\n  @Prop() label: string;\r\n  @Prop() value: string = '';\r\n  @Prop() disabled: boolean = false;\r\n  @Prop() error: boolean = false;\r\n  @Prop() token: string;\r\n  @Prop() language: string;\r\n  @Prop() default_country: number = null;\r\n  @Prop() phone_prefix: string | null = null;\r\n  @Prop() placeholder: string;\r\n  @Prop({ mutable: true }) countries: ICountry[] = [];\r\n  @Prop() testId: string;\r\n\r\n  @Event() textChange: EventEmitter<{ phone_prefix: string; mobile: string }>;\r\n  @State() inputValue: string = '';\r\n  @State() isDropdownVisible: boolean = false;\r\n  @State() currentCountry: ICountry;\r\n\r\n  // private cmp_countries: ICountry[] = [];\r\n\r\n  private bookingService: BookingService = new BookingService();\r\n\r\n  async componentWillLoad() {\r\n    if (this.countries.length === 0) {\r\n      const countries = await this.bookingService.getCountries(this.language);\r\n      this.countries = countries;\r\n    }\r\n    if (this.phone_prefix) {\r\n      this.setCountryFromPhonePrefix();\r\n    } else {\r\n      if (this.default_country) {\r\n        this.setCurrentCountry(this.default_country);\r\n      }\r\n    }\r\n    this.inputValue = this.value;\r\n  }\r\n  @Watch('value')\r\n  handleValueChange(newValue, oldValue) {\r\n    if (newValue !== oldValue) {\r\n      this.inputValue = newValue;\r\n    }\r\n  }\r\n  @Watch('phone_prefix')\r\n  handlePhoneChange(newValue, oldValue) {\r\n    if (newValue !== oldValue) {\r\n      this.setCountryFromPhonePrefix();\r\n    }\r\n  }\r\n  @Listen('click', { target: 'document' })\r\n  handleDocumentClick(event: MouseEvent) {\r\n    const target = event.target as HTMLElement;\r\n    if (!this.el.contains(target)) {\r\n      this.isDropdownVisible = false;\r\n    }\r\n  }\r\n  handleInputChange(e: InputEvent) {\r\n    let inputElement = e.target as HTMLInputElement;\r\n    let inputValue = inputElement.value;\r\n    inputValue = inputValue.replace(/[^+\\d]+/g, '');\r\n    inputElement.value = inputValue;\r\n    this.inputValue = inputValue;\r\n    this.textChange.emit({ phone_prefix: this.currentCountry?.phone_prefix, mobile: this.inputValue });\r\n  }\r\n  private setCountryFromPhonePrefix() {\r\n    let country = this.countries.find(country => country.phone_prefix === this.phone_prefix);\r\n    if (!country) {\r\n      country = this.countries.find(c => c.id.toString() === this.phone_prefix);\r\n      if (!country) {\r\n        return;\r\n      }\r\n    }\r\n    this.currentCountry = { ...country };\r\n    this.textChange.emit({ phone_prefix: this.currentCountry?.phone_prefix, mobile: this.value });\r\n  }\r\n  setCurrentCountry(id: number) {\r\n    const country = this.countries.find(country => country.id === id);\r\n    if (!country) {\r\n      throw new Error('Invalid country id');\r\n    }\r\n    this.currentCountry = { ...country };\r\n    this.textChange.emit({ phone_prefix: this.currentCountry?.phone_prefix, mobile: this.value });\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"form-group mr-0\">\r\n          {/* <p class=\"mb-0\">Phone</p> */}\r\n          <div class=\"input-group row m-0 p-0 position-relative\">\r\n            {this.label && (\r\n              <div class={`input-group-prepend col-3 p-0 text-dark border-none`}>\r\n                <label class={`input-group-text  border-theme flex-grow-1 text-dark  `}>{this.label}</label>\r\n              </div>\r\n            )}\r\n            <div class={'form-control  input-container  flex-fill' + (this.error ? ' is-invalid' : '')}>\r\n              <button onClick={() => (this.isDropdownVisible = !this.isDropdownVisible)} class=\"dropdown-trigger\">\r\n                {this.currentCountry ? <img src={this.currentCountry?.flag} class=\"flag\" /> : <p class=\"p-0 m-0 \">{locales.entries.Lcz_Select}</p>}\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\r\n                  <path d=\"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z\" />\r\n                </svg>\r\n              </button>\r\n\r\n              <p class={'phone_prefix_label'}>{this.currentCountry?.phone_prefix}</p>\r\n              <input\r\n                data-testid={this.testId}\r\n                maxLength={14}\r\n                type=\"text\"\r\n                placeholder={this.placeholder}\r\n                required\r\n                value={this.inputValue}\r\n                disabled={this.disabled}\r\n                onInput={e => this.handleInputChange(e)}\r\n              />\r\n            </div>\r\n            {this.isDropdownVisible && (\r\n              <div class=\"ir-dropdown-container\">\r\n                <ir-combobox\r\n                  onComboboxValueChange={e => {\r\n                    this.setCurrentCountry(+e.detail.data);\r\n                    this.isDropdownVisible = false;\r\n                  }}\r\n                  class=\"bg-white\"\r\n                  autoFocus\r\n                  placeholder=\"Search country\"\r\n                  data={this.countries.map(c => ({\r\n                    id: c.id.toString(),\r\n                    name: `${c.name} (${c.phone_prefix})`,\r\n                    image: c.flag,\r\n                  }))}\r\n                ></ir-combobox>\r\n              </div>\r\n            )}\r\n          </div>\r\n          {/* {this.error && <div class=\"invalid-feedback\">Please enter a valid phone number.</div>} */}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"version":3}