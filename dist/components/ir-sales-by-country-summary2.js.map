{"file":"ir-sales-by-country-summary2.js","mappings":";;;;;;AAAA,MAAM,0BAA0B,GAAG,gUAAgU,CAAC;AACpW,sCAAe,0BAA0B;;MCa5B,uBAAuB;;;;;IAG1B,oBAAoB,CAAC,KAA+B,EAAE,WAAoB,KAAK;;QACrF,OAAO,MAAA,IAAI,CAAC,YAAY,0CAAE,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI;YAC1C,MAAM,KAAK,GAAG,QAAQ,IAAI,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC;YACpF,OAAO,IAAI,GAAG,KAAK,CAAC;SACrB,EAAE,CAAC,CAAC,CAAC;KACP;IAEO,OAAO,CAAC,IAAY,EAAE,IAAY;;QACxC,IAAI,CAAA,MAAA,IAAI,CAAC,YAAY,0CAAE,MAAM,KAAI,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE;YAC/D,OAAO,IAAI,GAAG,IAAI,GAAG,gBAAgB,GAAG,kBAAkB,CAAC;SAC5D;QACD,OAAO;KACR;IAED,MAAM;QACJ,MAAM,eAAe,GAAG,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC;QAC5D,MAAM,WAAW,GAAG,IAAI,CAAC,oBAAoB,CAAC,kBAAkB,CAAC,CAAC;QAClE,MAAM,YAAY,GAAG,IAAI,CAAC,oBAAoB,CAAC,SAAS,CAAC,CAAC;QAE1D,MAAM,uBAAuB,GAAG,IAAI,CAAC,oBAAoB,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QAC1E,MAAM,mBAAmB,GAAG,IAAI,CAAC,oBAAoB,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;QAChF,MAAM,oBAAoB,GAAG,IAAI,CAAC,oBAAoB,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;QAExE,QACE,4DAAK,KAAK,EAAC,qCAAqC,IAC9C,sEACE,SAAS,EAAC,mBAAmB,EAC7B,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,uBAAuB,CAAC,EAC5D,KAAK,EAAE,eAAe,CAAC,QAAQ,EAAE,EACjC,QAAQ,EAAE,uBAAuB,GAAG,aAAa,uBAAuB,EAAE,GAAG,SAAS,GACvE,EACjB,sEACE,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,mBAAmB,CAAC,EACpD,SAAS,EAAC,cAAc,EACxB,KAAK,EAAE,WAAW,CAAC,QAAQ,EAAE,EAC7B,QAAQ,EAAE,mBAAmB,GAAG,aAAa,mBAAmB,EAAE,GAAG,SAAS,GAC/D,EACjB,sEACE,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,YAAY,EAAE,oBAAoB,CAAC,EACtD,SAAS,EAAC,eAAe,EACzB,KAAK,EAAE,YAAY,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,EAAE,YAAY,CAAC,EAChE,QAAQ,EAAE,oBAAoB,GAAG,aAAa,YAAY,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,EAAE,oBAAoB,CAAC,EAAE,GAAG,SAAS,GAC9G,CACb,EACN;KACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":[],"sources":["src/components/ir-sales-by-country/ir-sales-by-country-summary/ir-sales-by-country-summary.css?tag=ir-sales-by-country-summary&encapsulation=scoped","src/components/ir-sales-by-country/ir-sales-by-country-summary/ir-sales-by-country-summary.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n.sales-by-country-summary__container {\n  display: grid;\n  grid-template-columns: repeat(1, 1fr);\n  gap: 0.5rem;\n}\n/*sm*/\n@media (min-width: 640px) {\n  .sales-by-country-summary__container {\n    grid-template-columns: repeat(3, 1fr);\n    gap: 1rem;\n  }\n}\n","import { Component, h, Prop } from '@stencil/core';\nimport { SalesRecord } from '../types';\nimport { formatAmount } from '@/utils/utils';\nimport calendar_data from '@/stores/calendar-data';\n\nexport type NumericKeys<T> = {\n  [K in keyof T]: T[K] extends number ? K : never;\n}[keyof T];\n\n@Component({\n  tag: 'ir-sales-by-country-summary',\n  styleUrl: 'ir-sales-by-country-summary.css',\n  scoped: true,\n})\nexport class IrSalesByCountrySummary {\n  @Prop() salesReports: SalesRecord[];\n\n  private calculateTotalValues(field: NumericKeys<SalesRecord>, lastYear: boolean = false) {\n    return this.salesReports?.reduce((prev, curr) => {\n      const value = lastYear ? (curr.last_year ? curr.last_year[field] : 0) : curr[field];\n      return prev + value;\n    }, 0);\n  }\n\n  private getIcon(val1: number, val2: number): 'arrow-trend-up' | 'arrow-trend-down' | undefined {\n    if (this.salesReports?.length && this.salesReports[0].last_year) {\n      return val1 > val2 ? 'arrow-trend-up' : 'arrow-trend-down';\n    }\n    return;\n  }\n\n  render() {\n    const totalRoomNights = this.calculateTotalValues('nights');\n    const totalGuests = this.calculateTotalValues('number_of_guests');\n    const totalRevenue = this.calculateTotalValues('revenue');\n\n    const lastYearTotalRoomNights = this.calculateTotalValues('nights', true);\n    const lastYearTotalGuests = this.calculateTotalValues('number_of_guests', true);\n    const lastYearTotalRevenue = this.calculateTotalValues('revenue', true);\n\n    return (\n      <div class=\"sales-by-country-summary__container\">\n        <ir-stats-card\n          cardTitle=\"Total Room Nights\"\n          icon={this.getIcon(totalRoomNights, lastYearTotalRoomNights)}\n          value={totalRoomNights.toString()}\n          subtitle={lastYearTotalRoomNights ? `Last year ${lastYearTotalRoomNights}` : undefined}\n        ></ir-stats-card>\n        <ir-stats-card\n          icon={this.getIcon(totalGuests, lastYearTotalGuests)}\n          cardTitle=\"Total Guests\"\n          value={totalGuests.toString()}\n          subtitle={lastYearTotalGuests ? `Last year ${lastYearTotalGuests}` : undefined}\n        ></ir-stats-card>\n        <ir-stats-card\n          icon={this.getIcon(totalRevenue, lastYearTotalRevenue)}\n          cardTitle=\"Total Revenue\"\n          value={formatAmount(calendar_data.currency.symbol, totalRevenue)}\n          subtitle={lastYearTotalRevenue ? `Last year ${formatAmount(calendar_data.currency.symbol, lastYearTotalRevenue)}` : undefined}\n        ></ir-stats-card>\n      </div>\n    );\n  }\n}\n"],"version":3}