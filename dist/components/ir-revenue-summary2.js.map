{"file":"ir-revenue-summary2.js","mappings":"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","names":[],"sources":["src/components/ir-daily-revenue/ir-revenue-summary/ir-revenue-summary.css?tag=ir-revenue-summary&encapsulation=scoped","src/components/ir-daily-revenue/ir-revenue-summary/ir-revenue-summary.tsx"],"sourcesContent":[":host {\n  display: grid;\n  grid-template-columns: repeat(1, 1fr);\n  gap: 1rem;\n}\n/*md*/\n@media (min-width: 768px) {\n  :host {\n    grid-template-columns: repeat(3, 1fr);\n  }\n}\n\n/*lg*/\n@media (min-width: 1024px) {\n}\n","import { IEntries } from '@/models/IBooking';\nimport { Component, Host, Prop, h } from '@stencil/core';\nimport { FolioPayment, GroupedFolioPayment } from '../types';\nimport { formatAmount } from '@/utils/utils';\nimport calendar_data from '@/stores/calendar-data';\n\n@Component({\n  tag: 'ir-revenue-summary',\n  styleUrl: 'ir-revenue-summary.css',\n  scoped: true,\n})\nexport class IrRevenueSummary {\n  @Prop() groupedPayments: GroupedFolioPayment = new Map();\n  @Prop() previousDateGroupedPayments: GroupedFolioPayment = new Map();\n  @Prop() payTypesGroup: IEntries[];\n\n  private calculateTotalPayments(groupedPayments: GroupedFolioPayment) {\n    let total = 0;\n    groupedPayments.forEach((value, key) => {\n      if (this.payTypesGroup.find(p => p.CODE_NAME === key)) {\n        total += this.calculateTotalValue(value);\n      }\n    });\n    return total;\n  }\n\n  private calculateTotalAmount(groupedPayments: GroupedFolioPayment) {\n    return Array.from(groupedPayments.entries()).reduce((prev, curr) => prev + this.calculateTotalValue(curr[1]), 0);\n  }\n\n  private calculateTotalRefunds(groupedPayments: GroupedFolioPayment) {\n    const refundKeyCode = '010';\n    if (!groupedPayments.has(refundKeyCode)) {\n      return 0;\n    }\n    return this.calculateTotalValue(groupedPayments.get(refundKeyCode));\n  }\n\n  private calculateTotalValue(payments: FolioPayment[]) {\n    return payments.reduce((p, c) => p + c.amount, 0);\n  }\n\n  private getTrendIcon(val1: number, val2: number) {\n    if (val1 === val2) {\n      return undefined;\n    }\n    return val1 > val2 ? 'arrow-trend-up' : 'arrow-trend-down';\n  }\n  render() {\n    const paymentsTotal = this.calculateTotalPayments(this.groupedPayments);\n    const totalAmount = this.calculateTotalAmount(this.groupedPayments);\n    const refundAmount = this.calculateTotalRefunds(this.groupedPayments);\n\n    const previousDatePaymentsTotal = this.calculateTotalPayments(this.previousDateGroupedPayments);\n    const previousDateTotalAmount = this.calculateTotalAmount(this.previousDateGroupedPayments);\n    const previousDateRefundAmount = this.calculateTotalRefunds(this.previousDateGroupedPayments);\n\n    return (\n      <Host>\n        <ir-stats-card\n          icon={this.getTrendIcon(paymentsTotal, previousDatePaymentsTotal)}\n          value={formatAmount(calendar_data.currency.symbol, paymentsTotal)}\n          cardTitle=\"Payments\"\n          subtitle={`Previous day payments ${formatAmount(calendar_data.currency.symbol, previousDatePaymentsTotal)}`}\n        ></ir-stats-card>\n        <ir-stats-card\n          value=\"123$\"\n          class=\"refunds-card\"\n          icon={this.getTrendIcon(refundAmount, previousDateRefundAmount)}\n          cardTitle=\"Refunds\"\n          subtitle={`Previous day refunds ${formatAmount(calendar_data.currency.symbol, previousDateRefundAmount)}`}\n        >\n          <p class=\"p-0 m-0 text-danger\" slot=\"value\">\n            {formatAmount(calendar_data.currency.symbol, refundAmount)}\n          </p>\n        </ir-stats-card>\n        <ir-stats-card\n          icon={this.getTrendIcon(totalAmount, previousDateTotalAmount)}\n          value={formatAmount(calendar_data.currency.symbol, totalAmount)}\n          cardTitle=\"Total\"\n          subtitle={`Previous day total ${formatAmount(calendar_data.currency.symbol, previousDateTotalAmount)}`}\n        ></ir-stats-card>\n      </Host>\n    );\n  }\n}\n"],"version":3}