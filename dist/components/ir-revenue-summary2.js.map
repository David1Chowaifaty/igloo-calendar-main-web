{"file":"ir-revenue-summary2.js","mappings":";;;;;;AAAA,MAAM,mBAAmB,GAAG,ieAAie,CAAC;AAC9f,+BAAe,mBAAmB;;MCUrB,gBAAgB;IAL7B;;;QAMU,oBAAe,GAAwB,IAAI,GAAG,EAAE,CAAC;QACjD,gCAA2B,GAAwB,IAAI,GAAG,EAAE,CAAC;KA8FtE;IA3FS,sBAAsB,CAAC,eAAoC;QACjE,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,eAAe,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,GAAG;YACjC,IAAI,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,KAAK,EAAE;gBAC/B,KAAK,IAAI,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC;aAC1C;SACF,CAAC,CAAC;QACH,OAAO,KAAK,CAAC;KACd;;;;IAMO,qBAAqB,CAAC,eAAoC;QAChE,MAAM,aAAa,GAAG,KAAK,CAAC;QAC5B,MAAM,QAAQ,GAAQ,EAAE,CAAC;QACzB,eAAe,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,GAAG;YACjC,IAAI,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,aAAa,EAAE;gBACvC,QAAQ,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,CAAC;aACzB;SACF,CAAC,CAAC;QAEH,OAAO,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,CAAC;KAC3C;IAEO,mBAAmB,CAAC,QAAwB;QAClD,OAAO,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;KACnD;IAEO,YAAY,CAAC,IAAY,EAAE,IAAY;QAC7C,IAAI,IAAI,KAAK,IAAI,EAAE;YACjB,OAAO,SAAS,CAAC;SAClB;QACD,OAAO,IAAI,GAAG,IAAI,GAAG,gBAAgB,GAAG,kBAAkB,CAAC;KAC5D;IACD,MAAM;QACJ,MAAM,aAAa,GAAG,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QACxE,MAAM,YAAY,GAAG,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QACtE,MAAM,WAAW,GAAG,aAAa,GAAG,YAAY,CAAC;QAEjD,MAAM,yBAAyB,GAAG,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC;QAChG,MAAM,wBAAwB,GAAG,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC;QAC9F,MAAM,uBAAuB,GAAG,yBAAyB,GAAG,wBAAwB,CAAC;QAErF,QACE,EAAC,IAAI,uDACH,4DAAK,KAAK,EAAC,4BAA4B,IACrC,sEAAe,IAAI,EAAE,gBAAgB,EAAE,KAAK,EAAE,YAAY,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,EAAE,aAAa,CAAC,EAAE,SAAS,EAAC,UAAU,IAC5H,0DAAG,KAAK,EAAC,4BAA4B,EAAC,IAAI,EAAC,OAAO,IAC/C,YAAY,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,EAAE,aAAa,CAAC,CACzD,CACU,EAChB,sEAAe,KAAK,EAAC,MAAM,EAAC,KAAK,EAAC,cAAc,EAAC,IAAI,EAAE,kBAAkB,EAAE,SAAS,EAAC,SAAS,IAC5F,0DAAG,KAAK,EAAC,0BAA0B,EAAC,IAAI,EAAC,OAAO,IAC7C,YAAY,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,EAAE,YAAY,CAAC,CACxD,CACU,CACZ,EACN,4DAAK,KAAK,EAAC,4BAA4B,IACrC,sEACE,IAAI,EAAE,gBAAgB,EACtB,KAAK,EAAE,YAAY,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,EAAE,aAAa,CAAC,EACjE,SAAS,EAAC,UAAU,EACpB,QAAQ,EAAE,iBAAiB,YAAY,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,EAAE,yBAAyB,CAAC,EAAE,IAEnG,0DAAG,KAAK,EAAC,4BAA4B,EAAC,IAAI,EAAC,OAAO,IAC/C,YAAY,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,EAAE,aAAa,CAAC,CACzD,CACU,EAChB,sEACE,KAAK,EAAC,MAAM,EACZ,KAAK,EAAC,cAAc,EACpB,IAAI,EAAE,kBAAkB,EACxB,SAAS,EAAC,SAAS,EACnB,QAAQ,EAAE,iBAAiB,YAAY,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,EAAE,wBAAwB,CAAC,EAAE,IAElG,0DAAG,KAAK,EAAC,0BAA0B,EAAC,IAAI,EAAC,OAAO,IAC7C,YAAY,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,EAAE,YAAY,CAAC,CACxD,CACU,EAChB,sEACE,IAAI,EAAE,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,uBAAuB,CAAC,EAC7D,KAAK,EAAE,YAAY,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,EAAE,WAAW,CAAC,EAC/D,SAAS,EAAC,YAAY,EACtB,QAAQ,EAAE,iBAAiB,YAAY,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,EAAE,uBAAuB,CAAC,EAAE,GAClF,CACb,CACD,EACP;KACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":[],"sources":["src/components/ir-daily-revenue/ir-revenue-summary/ir-revenue-summary.css?tag=ir-revenue-summary&encapsulation=scoped","src/components/ir-daily-revenue/ir-revenue-summary/ir-revenue-summary.tsx"],"sourcesContent":[".ir-revenue-summary__mobile {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n.ir-revenue-summary__tablet {\n  display: none;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 1rem;\n}\n.stats-card__payments-value {\n  color: #629a4c;\n}\n.stats-card__refund-value {\n  color: #ff4961;\n}\n/*md*/\n@media (min-width: 768px) {\n  .ir-revenue-summary__tablet {\n    display: grid;\n  }\n  .ir-revenue-summary__mobile {\n    display: none;\n  }\n}\n\n/*lg*/\n@media (min-width: 1024px) {\n}\n","import { Component, Host, Prop, h } from '@stencil/core';\nimport { FolioPayment, GroupedFolioPayment } from '../types';\nimport { formatAmount } from '@/utils/utils';\nimport calendar_data from '@/stores/calendar-data';\nimport { PaymentEntries } from '@/components/ir-booking-details/types';\n\n@Component({\n  tag: 'ir-revenue-summary',\n  styleUrl: 'ir-revenue-summary.css',\n  scoped: true,\n})\nexport class IrRevenueSummary {\n  @Prop() groupedPayments: GroupedFolioPayment = new Map();\n  @Prop() previousDateGroupedPayments: GroupedFolioPayment = new Map();\n  @Prop() paymentEntries: PaymentEntries;\n\n  private calculateTotalPayments(groupedPayments: GroupedFolioPayment) {\n    let total = 0;\n    groupedPayments.forEach((value, key) => {\n      if (key.split('_')[0] === '001') {\n        total += this.calculateTotalValue(value);\n      }\n    });\n    return total;\n  }\n\n  // private calculateTotalAmount(groupedPayments: GroupedFolioPayment) {\n  //   return Array.from(groupedPayments.entries()).reduce((prev, curr) => prev + this.calculateTotalValue(curr[1]), 0);\n  // }\n\n  private calculateTotalRefunds(groupedPayments: GroupedFolioPayment) {\n    const refundKeyCode = '010';\n    const payments: any = [];\n    groupedPayments.forEach((value, key) => {\n      if (key.split('_')[0] === refundKeyCode) {\n        payments.push(...value);\n      }\n    });\n\n    return this.calculateTotalValue(payments);\n  }\n\n  private calculateTotalValue(payments: FolioPayment[]) {\n    return payments.reduce((p, c) => p + c.amount, 0);\n  }\n\n  private getTrendIcon(val1: number, val2: number) {\n    if (val1 === val2) {\n      return undefined;\n    }\n    return val1 > val2 ? 'arrow-trend-up' : 'arrow-trend-down';\n  }\n  render() {\n    const paymentsTotal = this.calculateTotalPayments(this.groupedPayments);\n    const refundAmount = this.calculateTotalRefunds(this.groupedPayments);\n    const totalAmount = paymentsTotal - refundAmount;\n\n    const previousDatePaymentsTotal = this.calculateTotalPayments(this.previousDateGroupedPayments);\n    const previousDateRefundAmount = this.calculateTotalRefunds(this.previousDateGroupedPayments);\n    const previousDateTotalAmount = previousDatePaymentsTotal - previousDateRefundAmount;\n\n    return (\n      <Host>\n        <div class=\"ir-revenue-summary__mobile\">\n          <ir-stats-card icon={'arrow-trend-up'} value={formatAmount(calendar_data.currency.symbol, paymentsTotal)} cardTitle=\"Payments\">\n            <p class=\"stats-card__payments-value\" slot=\"value\">\n              {formatAmount(calendar_data.currency.symbol, paymentsTotal)}\n            </p>\n          </ir-stats-card>\n          <ir-stats-card value=\"123$\" class=\"refunds-card\" icon={'arrow-trend-down'} cardTitle=\"Refunds\">\n            <p class=\"stats-card__refund-value\" slot=\"value\">\n              {formatAmount(calendar_data.currency.symbol, refundAmount)}\n            </p>\n          </ir-stats-card>\n        </div>\n        <div class=\"ir-revenue-summary__tablet\">\n          <ir-stats-card\n            icon={'arrow-trend-up'}\n            value={formatAmount(calendar_data.currency.symbol, paymentsTotal)}\n            cardTitle=\"Payments\"\n            subtitle={`Previous day  ${formatAmount(calendar_data.currency.symbol, previousDatePaymentsTotal)}`}\n          >\n            <p class=\"stats-card__payments-value\" slot=\"value\">\n              {formatAmount(calendar_data.currency.symbol, paymentsTotal)}\n            </p>\n          </ir-stats-card>\n          <ir-stats-card\n            value=\"123$\"\n            class=\"refunds-card\"\n            icon={'arrow-trend-down'}\n            cardTitle=\"Refunds\"\n            subtitle={`Previous day  ${formatAmount(calendar_data.currency.symbol, previousDateRefundAmount)}`}\n          >\n            <p class=\"stats-card__refund-value\" slot=\"value\">\n              {formatAmount(calendar_data.currency.symbol, refundAmount)}\n            </p>\n          </ir-stats-card>\n          <ir-stats-card\n            icon={this.getTrendIcon(totalAmount, previousDateTotalAmount)}\n            value={formatAmount(calendar_data.currency.symbol, totalAmount)}\n            cardTitle=\"Difference\"\n            subtitle={`Previous day  ${formatAmount(calendar_data.currency.symbol, previousDateTotalAmount)}`}\n          ></ir-stats-card>\n        </div>\n      </Host>\n    );\n  }\n}\n"],"version":3}