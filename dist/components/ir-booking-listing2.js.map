{"file":"ir-booking-listing2.js","mappings":"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","names":[],"sources":["src/utils/browserHistory.ts","src/components/ir-booking-listing/ir-booking-listing.css?tag=ir-booking-listing&encapsulation=scoped","src/components/ir-booking-listing/ir-booking-listing.tsx"],"sourcesContent":["// src/utils/browserHistory.ts\n\n/**\n * A small utility for reading and writing browser history\n * and manipulating URL search params in a type-safe way.\n */\n\ntype Parser<T> = (value: string | null) => T;\n\n// Common parsers/serializers\nexport const ParamTypes = {\n  string: {\n    parse: (v: string | null): string => v ?? '',\n    serialize: (v: string): string => v,\n  },\n  number: {\n    parse: (v: string | null): number => {\n      if (v == null || v === '') return NaN;\n      const n = Number(v);\n      return isNaN(n) ? NaN : n;\n    },\n    serialize: (v: number): string => String(v),\n  },\n  boolean: {\n    parse: (v: string | null): boolean => v === 'true',\n    serialize: (v: boolean): string => (v ? 'true' : 'false'),\n  },\n} as const;\n\n/**\n * Read a single search‑param, parse it, and return a typed value.\n * Falls back to defaultValue if missing or parse fails.\n */\nexport function getParam<T>(key: string, { parse }: { parse: Parser<T> }, defaultValue: T): T {\n  const params = new URLSearchParams(window.location.search);\n  const raw = params.get(key);\n  try {\n    if (raw == null) return defaultValue;\n    return parse(raw);\n  } catch {\n    return defaultValue;\n  }\n}\n\n/** Helpers for the three built‑in types */\nexport function getStringParam(key: string, defaultValue = ''): string {\n  return getParam(key, ParamTypes.string, defaultValue);\n}\n\nexport function getNumberParam(key: string, defaultValue = NaN): number {\n  return getParam(key, ParamTypes.number, defaultValue);\n}\n\nexport function getBooleanParam(key: string, defaultValue = false): boolean {\n  return getParam(key, ParamTypes.boolean, defaultValue);\n}\n\n/**\n * Read all current search params into a Record<string, string>\n */\nexport function getAllParams(): Record<string, string> {\n  const params = new URLSearchParams(window.location.search);\n  const out: Record<string, string> = {};\n  for (const [key, value] of params.entries()) {\n    out[key] = value;\n  }\n  return out;\n}\n\ninterface SetParamsOptions {\n  /** if true, uses replaceState instead of pushState */\n  replace?: boolean;\n}\n\n/**\n * Update one or more search params.\n * Pass null to delete a param.\n * By default uses history.pushState; set replace: true to call replaceState.\n */\nexport function setParams(updates: Record<string, string | number | boolean | null>, options: SetParamsOptions = {}): void {\n  const params = new URLSearchParams(window.location.search);\n\n  for (const [key, value] of Object.entries(updates)) {\n    if (!value) {\n      params.delete(key);\n    } else {\n      params.set(key, String(value));\n    }\n  }\n\n  const newSearch = params.toString();\n  const newUrl = window.location.pathname + (newSearch ? `?${newSearch}` : '') + window.location.hash;\n\n  if (options.replace) {\n    window.history.replaceState(window.history.state, '', newUrl);\n  } else {\n    window.history.pushState(window.history.state, '', newUrl);\n  }\n}\n\n/**\n * Push a new history entry.\n * `path` may include search or hash.\n * `state` is the history state object.\n */\nexport function pushHistory(path: string, state: any = {}): void {\n  window.history.pushState(state, '', path);\n}\n\n/**\n * Replace the current history entry.\n * `path` may include search or hash.\n * `state` is the history state object.\n */\nexport function replaceHistory(path: string, state: any = {}): void {\n  window.history.replaceState(state, '', path);\n}\n",":host {\n  display: block;\n  padding: var(--wa-space-l);\n  position: relative;\n}\n","import { Booking } from '@/models/booking.dto';\nimport { BookingListingService } from '@/services/booking_listing.service';\nimport { RoomService } from '@/services/room.service';\nimport booking_listing, {\n  updateUserSelection,\n  onBookingListingChange,\n  updateUserSelections,\n  ExposedBookingsParams,\n  setPaginationPage,\n  setPaginationPageSize,\n  updatePaginationFromSelection,\n} from '@/stores/booking_listing.store';\nimport { isPrivilegedUser } from '@/utils/utils';\nimport { Component, Host, Prop, State, Watch, h, Element, Listen } from '@stencil/core';\nimport Token from '@/models/Token';\nimport { getAllParams } from '@/utils/browserHistory';\nimport { BookingService } from '@/services/booking-service/booking.service';\nimport { Payment, PaymentEntries } from '../ir-booking-details/types';\nimport { AllowedProperties, PropertyService } from '@/services/property.service';\nimport type { PaginationChangeEvent } from '@/components/ir-pagination/ir-pagination';\n\n@Component({\n  tag: 'ir-booking-listing',\n  styleUrls: ['ir-booking-listing.css'],\n  scoped: true,\n})\nexport class IrBookingListing {\n  @Element() el: HTMLElement;\n\n  @Prop() language: string = '';\n  @Prop() ticket: string = '';\n  @Prop() propertyid: number;\n  @Prop() rowCount: number = 20;\n  @Prop() p: string;\n  @Prop() baseUrl: string;\n  @Prop() userType: number;\n\n  @State() isLoading = false;\n  @State() editBookingItem: { booking: Booking; cause: 'edit' | 'payment' | 'delete' | 'guest' } | null = null;\n  @State() showCost = false;\n  @State() paymentEntries: PaymentEntries;\n  @State() payment: Payment;\n  @State() booking: Booking;\n\n  private bookingListingService = new BookingListingService();\n  private bookingService = new BookingService();\n  private roomService = new RoomService();\n  private propertyService = new PropertyService();\n  private token = new Token();\n\n  private listingModal: HTMLIrListingModalElement;\n  private listingModalTimeout: NodeJS.Timeout;\n  private allowedProperties: number[];\n  private havePrivilege: boolean;\n  private paymentFolioRef: HTMLIrPaymentFolioElement;\n\n  componentWillLoad() {\n    if (this.baseUrl) {\n      this.token.setBaseUrl(this.baseUrl);\n    }\n    updateUserSelection('end_row', this.rowCount);\n    booking_listing.rowCount = this.rowCount;\n    setPaginationPageSize(this.rowCount);\n    if (this.ticket !== '') {\n      booking_listing.token = this.ticket;\n      this.token.setToken(this.ticket);\n      this.initializeApp();\n    }\n    onBookingListingChange('userSelection', newValue => {\n      updatePaginationFromSelection(newValue);\n    });\n    onBookingListingChange('bookings', newValue => {\n      this.showCost = newValue.some(booking => booking.financial.gross_cost !== null && booking.financial.gross_cost > 0);\n    });\n  }\n  @Watch('ticket')\n  ticketChanged(newValue: string, oldValue: string) {\n    if (newValue === oldValue) {\n      return;\n    }\n    this.token.setToken(this.ticket);\n    booking_listing.token = this.ticket;\n    this.initializeApp();\n  }\n\n  private async fetchBookings() {\n    await this.bookingListingService.getExposedBookings({\n      ...booking_listing.userSelection,\n      is_to_export: false,\n    });\n  }\n\n  private async initializeApp() {\n    try {\n      this.isLoading = true;\n      this.havePrivilege = isPrivilegedUser(this.userType);\n\n      let propertyId = this.propertyid;\n      if (!this.havePrivilege) {\n        if (!this.propertyid && !this.p) {\n          throw new Error('Property ID or username is required');\n        }\n\n        if (!propertyId) {\n          const propertyData = await this.roomService.getExposedProperty({\n            id: 0,\n            aname: this.p,\n            language: this.language,\n            is_backend: true,\n          });\n          propertyId = propertyData.My_Result.id;\n        }\n      }\n\n      const parallelRequests: Promise<unknown>[] = [\n        this.bookingService.getSetupEntriesByTableNameMulti(['_PAY_TYPE', '_PAY_TYPE_GROUP', '_PAY_METHOD']),\n        this.bookingListingService.getExposedBookingsCriteria(this.havePrivilege ? null : propertyId),\n        this.roomService.fetchLanguage(this.language, ['_BOOKING_LIST_FRONT']),\n      ];\n\n      // let propertyDataIndex: number | null = null;\n      let allowedPropertiesIndex: number | null = null;\n\n      if (this.propertyid && !this.havePrivilege) {\n        // propertyDataIndex = parallelRequests.length;\n        parallelRequests.push(\n          this.roomService.getExposedProperty({\n            id: this.propertyid,\n            language: this.language,\n            is_backend: true,\n          }),\n        );\n      }\n\n      if (this.havePrivilege) {\n        allowedPropertiesIndex = parallelRequests.length;\n        parallelRequests.push(this.propertyService.getExposedAllowedProperties());\n      }\n\n      const results = await Promise.all(parallelRequests);\n\n      const [setupEntries] = results;\n      const { pay_type, pay_type_group, pay_method } = this.bookingService.groupEntryTablesResult(setupEntries as any);\n\n      this.paymentEntries = {\n        groups: pay_type_group,\n        methods: pay_method,\n        types: pay_type,\n      };\n\n      this.allowedProperties = allowedPropertiesIndex !== null ? (results[allowedPropertiesIndex] as AllowedProperties)?.map(p => p.id) : null;\n\n      updateUserSelection('property_id', propertyId);\n\n      updateUserSelections({\n        property_ids: this.allowedProperties,\n        userTypeCode: this.userType,\n      });\n\n      await this.fetchBookings();\n    } catch (error) {\n      console.error('Error initializing app:', error);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  handleSideBarToggle(e: CustomEvent<boolean>) {\n    if (e.detail) {\n      this.editBookingItem = null;\n    }\n  }\n  geSearchFiltersFromParams() {\n    //e=10&status=002&from=2025-04-15&to=2025-04-22&filter=2&c=Alitalia+Cabin+Crew\n    const params = getAllParams();\n    if (params) {\n      console.log('update params');\n      let obj: Partial<ExposedBookingsParams> = {};\n      if (params.e) {\n        obj['end_row'] = Number(params.e);\n      }\n      if (params.s) {\n        obj['start_row'] = Number(params.s);\n      }\n      if (params.status) {\n        obj['booking_status'] = params.status;\n      }\n      if (params.filter) {\n        obj['filter_type'] = params.filter;\n      }\n      if (params.from) {\n        obj['from'] = params.from;\n      }\n      if (params.to) {\n        obj['to'] = params.to;\n      }\n      updateUserSelections(obj);\n    }\n    console.log('params=>', params);\n  }\n  openModal() {\n    this.listingModalTimeout = setTimeout(() => {\n      this.listingModal = this.el.querySelector('ir-listing-modal');\n      this.listingModal.editBooking = this.editBookingItem;\n      this.listingModal.openModal();\n    }, 100);\n  }\n  disconnectedCallback() {\n    clearTimeout(this.listingModalTimeout);\n  }\n\n  @Listen('requestPageChange')\n  async handlePaginationChange(event: CustomEvent<PaginationChangeEvent>) {\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n    if (!event.detail) {\n      return;\n    }\n    setPaginationPage(event.detail.currentPage);\n    await this.fetchBookings();\n  }\n\n  @Listen('requestPageSizeChange')\n  async handlePaginationPageSizeChange(event: CustomEvent<PaginationChangeEvent>) {\n    if (!event.detail || !event.detail.pageSize) {\n      return;\n    }\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n    setPaginationPageSize(event.detail.pageSize);\n    await this.fetchBookings();\n  }\n\n  @Listen('resetData')\n  async handleResetData(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    await this.fetchBookings();\n  }\n\n  @Listen('resetBookingData')\n  async handleResetStoreData(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    await this.fetchBookings();\n  }\n\n  @Listen('bookingChanged')\n  handleBookingChanged(e: CustomEvent<Booking>) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    booking_listing.bookings = [\n      ...booking_listing.bookings.map(b => {\n        if (b.booking_nbr === e.detail.booking_nbr) {\n          return e.detail;\n        }\n        return b;\n      }),\n    ];\n  }\n  @Listen('payBookingBalance')\n  handleBookingPayment(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    const { booking_nbr, payment } = e.detail;\n    this.booking = this.findBooking(booking_nbr);\n    const paymentType = this.paymentEntries.types.find(p => p.CODE_NAME === payment.payment_type.code);\n    this.payment = {\n      ...payment,\n      payment_type: {\n        code: paymentType.CODE_NAME,\n        description: paymentType.CODE_VALUE_EN,\n        operation: paymentType.NOTES,\n      },\n    };\n    this.paymentFolioRef.openFolio();\n  }\n  @Listen('guestSelected')\n  handleSelectGuestEvent(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    const booking = this.findBooking(e.detail);\n    if (!booking) {\n      return;\n    }\n    this.editBookingItem = {\n      booking,\n      cause: 'guest',\n    };\n  }\n  @Listen('openBookingDetails')\n  handleOpen(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation;\n    const booking = this.findBooking(e.detail);\n    if (!booking) {\n      return;\n    }\n    this.editBookingItem = {\n      booking,\n      cause: 'edit',\n    };\n  }\n\n  private findBooking(bookingNumber: Booking['booking_nbr']) {\n    return booking_listing.bookings.find(b => b.booking_nbr === bookingNumber);\n  }\n  render() {\n    if (this.isLoading || this.ticket === '') {\n      return <ir-loading-screen></ir-loading-screen>;\n    }\n    return (\n      <Host>\n        <ir-interceptor></ir-interceptor>\n        <ir-toast></ir-toast>\n        <div class=\"main-container\">\n          <ir-listing-header propertyId={this.propertyid} p={this.p} language={this.language}></ir-listing-header>\n          <section class=\"mt-2\">\n            <ir-booking-listing-table></ir-booking-listing-table>\n          </section>\n        </div>\n        <ir-drawer\n          style={{\n            '--ir-drawer-width': '80rem',\n            '--ir-drawer-background-color': '#F2F3F8',\n            '--ir-drawer-padding-left': '0',\n            '--ir-drawer-padding-top': '0',\n            '--ir-drawer-padding-bottom': '0',\n            '--ir-drawer-padding-right': '0',\n          }}\n          onDrawerHide={e => {\n            e.stopImmediatePropagation();\n            e.stopPropagation();\n            this.editBookingItem = null;\n          }}\n          withoutHeader\n          open={this.editBookingItem?.cause === 'edit'}\n        >\n          {this.editBookingItem?.booking && (\n            <ir-booking-details\n              hasPrint\n              hasReceipt\n              hasCloseButton\n              onCloseSidebar={() => (this.editBookingItem = null)}\n              is_from_front_desk\n              propertyid={this.propertyid as any}\n              hasRoomEdit\n              hasRoomDelete\n              bookingNumber={this.editBookingItem.booking?.booking_nbr.toString()}\n              ticket={this.ticket}\n              language={this.language}\n              hasRoomAdd\n            ></ir-booking-details>\n          )}\n        </ir-drawer>\n        <ir-guest-info-drawer\n          onGuestInfoDrawerClosed={() => {\n            this.editBookingItem = null;\n          }}\n          booking_nbr={this.editBookingItem?.booking?.booking_nbr}\n          email={this.editBookingItem?.booking?.guest.email}\n          language={this.language}\n          open={this.editBookingItem?.cause === 'guest'}\n        ></ir-guest-info-drawer>\n        <ir-payment-folio\n          style={{ height: 'auto' }}\n          bookingNumber={this.booking?.booking_nbr}\n          paymentEntries={this.paymentEntries}\n          payment={this.payment}\n          mode={'payment-action'}\n          ref={el => (this.paymentFolioRef = el)}\n          onCloseModal={() => {\n            this.booking = null;\n            this.payment = null;\n          }}\n        ></ir-payment-folio>\n      </Host>\n    );\n  }\n}\n"],"version":3}