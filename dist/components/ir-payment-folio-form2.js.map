{"file":"ir-payment-folio-form2.js","mappings":"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","names":["moment"],"sources":["src/services/booking-service/utils.ts","src/components/ir-booking-details/ir-payment-details/ir-payment-folio/ir-payment-folio-form/ir-payment-folio-form.css?tag=ir-payment-folio-form&encapsulation=scoped","src/components/ir-booking-details/ir-payment-details/ir-payment-folio/ir-payment-folio-form/ir-payment-folio-form.tsx"],"sourcesContent":["import { PaymentEntries } from '@/components/ir-booking-details/types';\nimport { z } from 'zod';\nimport { IEntries, ZIEntrySchema } from '../../models/IBooking';\n/**\n * Builds a grouped payment types record from raw entries and groups.\n *\n * @param paymentEntries - The flat list of all available payment  entries.\n * @returns A record where each key is a group CODE_NAME and the value is the\n *          ordered array of payment type entries belonging to that group.\n *\n * @example\n * const result = buildPaymentTypes(paymentEntries);\n * // {\n * //   PAYMENTS: [ { CODE_NAME: \"001\", CODE_VALUE_EN: \"Cash\", ... }, ... ],\n * //   ADJUSTMENTS: [ ... ],\n * //   ...\n * // }\n */\nexport function buildPaymentTypes(paymentEntries: PaymentEntries): Record<string, IEntries[]> {\n  try {\n    const { groups, types } = z\n      .object({\n        types: ZIEntrySchema.array().min(1),\n        groups: ZIEntrySchema.array().min(1),\n        methods: ZIEntrySchema.array().min(1),\n      })\n      .parse(paymentEntries);\n    const items = [...types];\n\n    const byCodes = (codes: string[]) => codes.map(code => items.find(i => i.CODE_NAME === code)).filter((x): x is IEntries => Boolean(x));\n\n    const extractGroupCodes = (code: string) => {\n      const paymentGroup = groups.find(pt => pt.CODE_NAME === code);\n      return paymentGroup ? paymentGroup.CODE_VALUE_EN.split(',') : [];\n    };\n    let rec: Record<string, IEntries[]> = {};\n    groups.forEach(group => {\n      // if (group.CODE_NAME === 'PAYMENTS') {\n      //   rec[group.CODE_NAME] = methods.map(entry => ({\n      //     ...entry,\n      //     CODE_VALUE_EN: `Payment: ${entry.CODE_VALUE_EN}`,\n      //   })) as IEntries[];\n      // } else if (group.CODE_NAME === 'REFUND') {\n      //   rec[group.CODE_NAME] = methods.map(entry => ({\n      //     ...entry,\n      //     CODE_VALUE_EN: `Refund: ${entry.CODE_VALUE_EN}`,\n      //   })) as IEntries[];\n      rec[group.CODE_NAME] = byCodes(extractGroupCodes(group.CODE_NAME));\n    });\n    return rec;\n  } catch (error) {\n    console.log(error);\n    return {};\n  }\n}\n",":host {\n  display: block;\n  --payment-type-badge-bg: #ff4961;\n  text-align: start;\n}\n.payment-type-badge {\n  background: var(--payment-type-badge-bg);\n  color: white;\n  padding: 0.2rem 0.3rem !important;\n  font-size: 12px;\n  border-radius: 4px;\n  margin: 0;\n  text-transform: capitalize;\n}\n.credit-badge {\n  --payment-type-badge-bg: #629a4c;\n}\n.debit-badge {\n  --payment-type-badge-bg: #ff4961;\n}\n.dropdown-item-payment {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  box-sizing: border-box;\n  justify-content: space-between;\n}\n\n.input-group-text {\n  border-color: #cacfe7 !important;\n}\n.payment-folio__payment-type-option {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.payment-folio__form {\n  display: grid;\n  gap: var(--wa-space-m, 1rem);\n}\n","import calendar_data from '@/stores/calendar-data';\nimport { Component, Event, EventEmitter, Fragment, Prop, State, Watch, h } from '@stencil/core';\nimport moment from 'moment';\nimport { z, ZodError } from 'zod';\nimport { IEntries } from '@/models/IBooking';\nimport { PaymentService } from '@/services/payment.service';\nimport { FolioEntryMode, Payment, PaymentEntries } from '../../../types';\nimport { buildPaymentTypes } from '@/services/booking-service/utils';\nimport { PAYMENT_TYPES_WITH_METHOD } from '../../global.variables';\nimport { Booking } from '@/models/booking.dto';\n\nconst DATE_FORMAT = 'YYYY-MM-DD';\n\nconst requiresPaymentMethodCode = (code?: string) => {\n  if (!code) {\n    return false;\n  }\n  return PAYMENT_TYPES_WITH_METHOD.includes(code);\n};\n\nconst paymentTypeSchema = z.object({\n  code: z.string().min(3).max(4),\n  description: z.string(),\n  operation: z.union([z.literal('CR'), z.literal('DB')]),\n});\n\nconst paymentMethodSchema = z.object({\n  code: z.string().min(3).max(4),\n  description: z.string(),\n  operation: z.string().optional().nullable(),\n});\n\nconst folioBaseSchema = z.object({\n  id: z.number().nullable().optional(),\n  date: z\n    .string()\n    .regex(/^\\d{4}-\\d{2}-\\d{2}$/)\n    .refine(\n      dateStr => {\n        const date = moment(dateStr, DATE_FORMAT, true);\n        return date.isValid();\n      },\n      { message: `Invalid date` },\n    ),\n  amount: z.coerce.number().min(0),\n  reference: z.string().optional().nullable(),\n  payment_type: paymentTypeSchema,\n  payment_method: paymentMethodSchema.nullable().optional(),\n});\n\ntype FolioFormData = z.infer<typeof folioBaseSchema>;\n\nconst folioValidationSchema = folioBaseSchema.superRefine((data, ctx) => {\n  if (requiresPaymentMethodCode(data.payment_type?.code) && !data.payment_method?.code) {\n    ctx.addIssue({\n      code: z.ZodIssueCode.custom,\n      path: ['payment_method'],\n      message: 'Payment method is required for this transaction type.',\n    });\n  }\n});\n\nlet folioFormInstanceCounter = 0;\n@Component({\n  tag: 'ir-payment-folio-form',\n  styleUrl: 'ir-payment-folio-form.css',\n  scoped: true,\n})\nexport class IrPaymentFolioForm {\n  @Prop() paymentEntries: PaymentEntries;\n  @Prop() bookingNumber: string;\n  @Prop() formId: string;\n  @Prop() payment: Payment = {\n    date: moment().format(DATE_FORMAT),\n    amount: 0,\n    designation: undefined,\n    currency: null,\n    reference: null,\n    id: -1,\n  };\n\n  @Prop() mode: FolioEntryMode;\n\n  @State() isLoading: 'save' | 'save-print' = null;\n  @State() errors: Record<string, boolean> = {};\n  @State() autoValidate: boolean = false;\n  @State() folioData: Payment;\n  @State() _paymentTypes: Record<string, IEntries[]> = {};\n\n  @Event() closeModal: EventEmitter<null>;\n  @Event() resetBookingEvt: EventEmitter<null>;\n  @Event() resetExposedCancellationDueAmount: EventEmitter<Pick<Booking, 'booking_nbr'>>;\n  @Event() loadingChanged: EventEmitter<'save' | 'save-print' | null>;\n\n  private readonly today = moment().format(DATE_FORMAT);\n\n  private paymentService = new PaymentService();\n  private readonly componentId = `ir-payment-folio-form-${++folioFormInstanceCounter}`;\n  private readonly controlIds = {\n    date: `${this.componentId}-date`,\n    transactionType: `${this.componentId}-transaction-type`,\n    paymentMethod: `${this.componentId}-payment-method`,\n    amount: `${this.componentId}-amount`,\n    reference: `${this.componentId}-reference`,\n  } as const;\n\n  componentWillLoad() {\n    if (this.payment) {\n      this.folioData = { ...this.payment };\n    }\n    this.syncPaymentTypes();\n  }\n\n  @Watch('payment')\n  handlePaymentChange(newValue: Payment, oldValue: Payment) {\n    if (newValue !== oldValue && newValue) {\n      this.folioData = { ...newValue };\n      this.syncPaymentTypes();\n    }\n  }\n\n  @Watch('paymentEntries')\n  handlePaymentEntriesChange(newValue: PaymentEntries, oldValue: PaymentEntries) {\n    if (newValue !== oldValue) {\n      this.syncPaymentTypes();\n    }\n  }\n\n  private updateFolioData(params: Partial<Payment>): void {\n    this.folioData = { ...(this.folioData ?? {}), ...params } as Payment;\n  }\n\n  private requiresPaymentMethod(code?: string) {\n    return requiresPaymentMethodCode(code);\n  }\n\n  private getDefaultPaymentMethod() {\n    const method = this.paymentEntries?.methods?.[0];\n    if (!method) {\n      return null;\n    }\n    return {\n      code: method.CODE_NAME,\n      description: method.CODE_VALUE_EN,\n      operation: method.NOTES,\n    };\n  }\n\n  private stopEventPropagation(event: Event) {\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n  }\n\n  private syncPaymentTypes() {\n    if (!this.paymentEntries) {\n      this._paymentTypes = {};\n      return;\n    }\n    const mappedTypes = buildPaymentTypes(this.paymentEntries);\n    if (this.mode === 'payment-action' && this.payment?.payment_type?.code === '001') {\n      const { PAYMENTS, CANCELLATION } = mappedTypes;\n      this._paymentTypes = { PAYMENTS, CANCELLATION };\n      return;\n    }\n    this._paymentTypes = mappedTypes;\n  }\n\n  private async savePayment(print: boolean = false) {\n    try {\n      this.isLoading = print ? 'save-print' : 'save';\n      this.loadingChanged.emit(this.isLoading);\n      this.autoValidate = true;\n      this.errors = {};\n      const parsedData: FolioFormData = folioValidationSchema.parse({ ...(this.folioData ?? {}), amount: this.folioData?.amount ?? undefined });\n      const { payment_type, payment_method, ...rest } = parsedData;\n      const payload: Payment = {\n        ...rest,\n        payment_type: payment_type as Payment['payment_type'],\n        payment_method: payment_method ? (payment_method as Payment['payment_method']) : undefined,\n        id: rest.id ?? this.payment?.id ?? -1,\n        date: rest.date ?? this.payment?.date ?? this.today,\n        amount: rest.amount ?? 0,\n        currency: calendar_data.currency,\n        reference: rest.reference ?? '',\n        designation: payment_type?.description || '',\n      };\n      await this.paymentService.AddPayment(payload, this.bookingNumber);\n      this.resetBookingEvt.emit(null);\n      this.resetExposedCancellationDueAmount.emit({ booking_nbr: this.bookingNumber });\n      this.closeModal.emit();\n    } catch (error) {\n      const err: Record<string, boolean> = {};\n      if (error instanceof ZodError) {\n        error.issues.forEach(e => {\n          const field = e.path[0]?.toString();\n          if (field) {\n            err[field] = true;\n          }\n        });\n      }\n      console.error('Failed to save payment folio entry', error);\n      this.errors = err;\n    } finally {\n      this.isLoading = null;\n      this.loadingChanged.emit(null);\n    }\n  }\n\n  private handleDropdownChange(value: string) {\n    this.updateFolioData({ designation: value });\n    if (!value) {\n      this.updateFolioData({\n        payment_type: null,\n        payment_method: null,\n      });\n      return;\n    }\n    const selectedType = this.paymentEntries?.types?.find(pt => pt.CODE_NAME === value);\n    if (!selectedType) {\n      console.warn(`Invalid payment type ${value}`);\n      this.updateFolioData({\n        payment_type: null,\n        payment_method: null,\n      });\n      return;\n    }\n\n    this.updateFolioData({\n      payment_type: {\n        code: selectedType.CODE_NAME,\n        description: selectedType.CODE_VALUE_EN,\n        operation: selectedType.NOTES,\n      },\n      payment_method: this.requiresPaymentMethod(selectedType.CODE_NAME) ? null : this.getDefaultPaymentMethod(),\n    });\n  }\n  private handlePaymentMethodDropdownChange(value: string) {\n    const payment_method = this.paymentEntries?.methods?.find(pt => pt.CODE_NAME === value);\n    if (!payment_method) {\n      console.warn(`Invalid payment method ${value}`);\n      this.updateFolioData({ payment_method: null });\n      return;\n    }\n    this.updateFolioData({\n      payment_method: {\n        code: payment_method.CODE_NAME,\n        description: payment_method.CODE_VALUE_EN,\n        operation: payment_method.NOTES,\n      },\n    });\n  }\n\n  private renderDropdownItems() {\n    const groups = Object.values(this._paymentTypes ?? {});\n    if (!groups.length) {\n      return null;\n    }\n    return groups.map((p, idx) => (\n      <Fragment>\n        {p.map(pt => (\n          <wa-option key={pt.CODE_NAME} value={pt.CODE_NAME} label={pt.CODE_VALUE_EN}>\n            <div class={'payment-folio__payment-type-option'}>\n              <span>{pt.CODE_VALUE_EN}</span>\n              <wa-badge variant={pt.NOTES === 'CR' ? 'success' : 'danger'} style={{ fontSize: 'var(--wa-font-size-s)' }}>\n                {pt.NOTES === 'CR' ? 'credit' : 'debit'}\n              </wa-badge>\n            </div>\n          </wa-option>\n        ))}\n        {idx !== Object.values(this._paymentTypes).length - 1 && <wa-divider></wa-divider>}\n      </Fragment>\n    ));\n  }\n  render() {\n    // const isNewPayment = this.folioData?.payment_type?.code === '001' && this.folioData.id === -1;\n    return (\n      <form\n        onSubmit={e => {\n          e.preventDefault();\n          const submitter = (e as SubmitEvent).submitter as any | null;\n          if (submitter?.value === 'save') {\n            this.savePayment();\n          } else if (submitter?.value === 'saveAndPrint') {\n            // this.savePayment(true);\n          }\n        }}\n        class=\"payment-folio__form\"\n        id={this.formId}\n      >\n        <ir-custom-date-picker\n          id={this.controlIds.date}\n          label=\"Date\"\n          aria-invalid={this.errors?.date && !this.folioData?.date ? 'true' : 'false'}\n          data-testid=\"pickup_date\"\n          onDateChanged={evt => {\n            this.updateFolioData({ date: evt.detail.start?.format(DATE_FORMAT) });\n          }}\n          minDate={moment().add(-2, 'months').format('YYYY-MM-DD')}\n          emitEmptyDate={true}\n          maxDate={this.today}\n          date={this.folioData?.date}\n        ></ir-custom-date-picker>\n        <ir-validator\n          value={this.folioData?.payment_type?.code}\n          autovalidate={this.autoValidate}\n          schema={paymentTypeSchema.shape.code}\n          valueEvent=\"change wa-change select-change\"\n          blurEvent=\"wa-hide\"\n        >\n          <wa-select\n            id={this.controlIds.transactionType}\n            size=\"small\"\n            onwa-hide={event => this.stopEventPropagation(event)}\n            onwa-show={event => this.stopEventPropagation(event)}\n            placeholder=\"Select...\"\n            label=\"Transaction type\"\n            defaultValue={this.folioData?.payment_type?.code}\n            value={this.folioData?.payment_type?.code}\n            disabled={this.mode === 'payment-action'}\n            onchange={event => {\n              this.stopEventPropagation(event);\n              this.handleDropdownChange((event.target as HTMLSelectElement).value);\n            }}\n          >\n            <wa-option value=\"\">Select...</wa-option>\n            {this.renderDropdownItems()}\n          </wa-select>\n        </ir-validator>\n\n        {this.requiresPaymentMethod(this.folioData?.payment_type?.code) && (\n          <ir-validator\n            value={this.folioData?.payment_method?.code ?? ''}\n            autovalidate={this.autoValidate}\n            schema={paymentMethodSchema.shape.code}\n            valueEvent=\"change wa-change select-change\"\n            blurEvent=\"wa-hide\"\n          >\n            <wa-select\n              id={this.controlIds.paymentMethod}\n              size=\"small\"\n              label={`${this.folioData.payment_type?.code === '001' ? 'Payment' : 'Refund'} method`}\n              onwa-show={event => this.stopEventPropagation(event)}\n              onwa-hide={event => this.stopEventPropagation(event)}\n              defaultValue={this.folioData?.payment_method?.code}\n              value={this.folioData?.payment_method?.code ?? ''}\n              onchange={event => {\n                this.stopEventPropagation(event);\n                this.handlePaymentMethodDropdownChange((event.target as HTMLSelectElement).value);\n              }}\n              // aria-invalid={String(this.errors?.payment_method && !this.folioData?.payment_method?.code)}\n            >\n              <wa-option value=\"\">Select...</wa-option>\n              {this.paymentEntries?.methods?.map(pt => {\n                return (\n                  <wa-option key={pt.CODE_NAME} label={pt.CODE_VALUE_EN} value={pt.CODE_NAME}>\n                    {pt.CODE_VALUE_EN}\n                  </wa-option>\n                );\n              })}\n            </wa-select>\n          </ir-validator>\n        )}\n        <ir-validator\n          value={this.folioData?.amount?.toString() ?? undefined}\n          autovalidate={this.autoValidate}\n          schema={folioBaseSchema.shape.amount}\n          valueEvent=\"text-change input input-change\"\n          blurEvent=\"input-blur\"\n        >\n          <ir-input\n            id={this.controlIds.amount}\n            aria-invalid={String(!!this.errors?.amount)}\n            value={this.folioData?.amount?.toString() ?? ''}\n            label=\"Amount\"\n            mask=\"price\"\n            min={0}\n            onText-change={e => this.updateFolioData({ amount: !e.detail ? undefined : Number(e.detail) })}\n          >\n            <span slot=\"start\">{calendar_data.currency.symbol}</span>\n          </ir-input>\n        </ir-validator>\n        <ir-validator\n          value={this.folioData?.reference ?? ''}\n          autovalidate={this.autoValidate}\n          schema={folioBaseSchema.shape.reference}\n          valueEvent=\"text-change input input-change\"\n          blurEvent=\"input-blur\"\n        >\n          <ir-input\n            id={this.controlIds.reference}\n            value={this.folioData?.reference ?? ''}\n            label=\"Reference\"\n            maxlength={50}\n            onText-change={e => this.updateFolioData({ reference: e.detail ?? '' })}\n          ></ir-input>\n        </ir-validator>\n      </form>\n    );\n  }\n}\n"],"version":3}