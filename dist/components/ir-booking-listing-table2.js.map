{"file":"ir-booking-listing-table2.js","mappings":"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","names":[],"sources":["src/components/ir-booking-listing/ir-booking-listing-table/ir-booking-listing-table.css?tag=ir-booking-listing-table&encapsulation=scoped","src/common/table.css?tag=ir-booking-listing-table&encapsulation=scoped","src/components/ir-booking-listing/ir-booking-listing-table/ir-booking-listing-table.tsx"],"sourcesContent":[":host {\n  box-sizing: border-box !important;\n}\n\n:host *,\n:host *::before,\n:host *::after {\n  box-sizing: inherit !important;\n  padding: 0;\n  margin: 0;\n}\n\n[hidden] {\n  display: none !important;\n}\n/* .table--container {\n  flex: 1 1 0%;\n} */\n.arrivals-table__actions-cell {\n  display: flex;\n  min-width: 100px;\n  justify-content: flex-end;\n}\n.table--container {\n  display: none;\n  overflow-x: auto;\n}\n.card--container {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n.data-table--pagination {\n  display: none;\n}\n.booking-listing__load-more {\n  margin-top: 1rem;\n}\n@media (min-width: 768px) {\n  :host {\n    display: flex;\n    flex-direction: column;\n    border-radius: 0.5rem;\n    overflow-x: auto;\n    min-height: 60vh;\n    max-width: 1920px;\n    border: 1px solid var(--wa-color-neutral-border-quiet, #abaeb9);\n    background-color: white;\n    /* border-bottom: 0; */\n  }\n  .table--container,\n  .data-table--pagination {\n    display: block;\n  }\n  .booking-listing__load-more,\n  .card--container {\n    display: none;\n  }\n  .arrivals-table__actions-cell {\n    min-width: 250px;\n  }\n}\n","/* Base styles */\n.ir-table-row td {\n  padding: 0.5rem 1rem !important;\n  text-align: left;\n  z-index: 2;\n  background-color: var(--wa-color-surface-default);\n  white-space: nowrap;\n  color: var(--wa-color-text-normal);\n  box-sizing: border-box;\n  /* width: max-content;\n  max-width: max-content; */\n}\n/* .ir-table-row td:last-child {\n  width: 100%; \n}*/\n/* .ir-table-row td:first-child,\n.table thead th:first-child {\n  position: sticky;\n  left: var(--ir-table-sticky-padding,-1rem);\n} */\n/* .table--container {\n  flex: 1 1 0%;\n} */\n.table--container {\n  overflow-x: auto;\n}\n.table td {\n  border-top: 0;\n  border-bottom: 1px solid var(--wa-color-neutral-border-quiet, #abaeb9);\n  /* border-bottom: 1px solid var(--wa-color-gray-80); */\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n}\n.table tbody tr:last-child > td {\n  border-bottom: 0 !important;\n}\n.table thead th {\n  border: none !important;\n  background: #ececec;\n  background: color-mix(in oklab, var(--wa-color-neutral-fill-quiet, #f1f2f3) 60%, transparent);\n  color: #374151;\n  padding: 0.5rem 1rem !important;\n  text-align: left;\n}\n.data-table thead th {\n  box-sizing: border-box;\n  background: var(--wa-color-surface-default) !important;\n  padding-top: 0.5rem !important;\n  padding-bottom: 0.5rem !important;\n  border-bottom: 1px solid var(--wa-color-neutral-90) !important;\n  color: var(--wa-color-text-normal);\n  /* position: sticky;\n  top: 0;\n  z-index: 99; */\n}\n\n.data-table .empty-row {\n  height: 50vh !important;\n  text-align: center;\n  color: var(--wa-color-gray-60);\n}\n\n.data-table--pagination {\n  padding: 0.5rem 1rem;\n  position: sticky;\n  bottom: 0;\n  background: var(--wa-color-surface-default);\n  border-top: 1px solid var(--wa-color-neutral-90);\n}\n\n/* Selected Rows Styles */\n\n.selected td {\n  background: #e3f3fa !important;\n}\n.selected td {\n  color: var(--gray-dark) !important;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n}\n\n/* Sorting styles */\n.sortable,\n.ir-table-row {\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n}\n.sortable {\n  text-transform: capitalize;\n}\n.sortable:hover {\n  color: #212529;\n  background-color: #e2e8f0 !important;\n  border-color: #dae0e5;\n  cursor: pointer;\n}\n.ir-table-row:hover td {\n  background: #e2e6ea3f !important;\n  background: var(--wa-color-neutral-fill-quiet, #f1f2f3) !important;\n}\n.sortable:active {\n  color: #212529;\n  background-color: #e2e8f0;\n  border-color: #d3d9df;\n}\n.sortable svg {\n  color: var(--blue);\n}\n/* .action-row {\n  position: sticky;\n  right:var(--ir-table-sticky-padding,-1rem);\n} */\n.sticky-column {\n  position: sticky !important;\n  right: 0;\n  background-color: white;\n}\n.table--container,\n.data-table {\n  height: 100%;\n}\n","import { IrActionButton } from '@/components/table-cells/booking/ir-actions-cell/ir-actions-cell';\nimport { Booking, Occupancy } from '@/models/booking.dto';\nimport booking_listing from '@/stores/booking_listing.store';\nimport locales from '@/stores/locales.store';\nimport { getPrivateNote } from '@/utils/booking';\nimport type { PaginationChangeEvent } from '@/components/ir-pagination/ir-pagination';\nimport { Component, Event, EventEmitter, Host, State, h } from '@stencil/core';\nimport { BookingListingService } from '@/services/booking_listing.service';\nimport { isPrivilegedUser } from '@/utils/utils';\n\n@Component({\n  tag: 'ir-booking-listing-table',\n  styleUrls: ['ir-booking-listing-table.css', '../../../common/table.css'],\n  scoped: true,\n})\nexport class IrBookingListingTable {\n  @State() booking_nbr: string;\n  @State() isLoading: boolean;\n  @State() isLoadMoreLoading: boolean = false;\n\n  @Event() openBookingDetails: EventEmitter<string>;\n  @Event() requestPageChange: EventEmitter<PaginationChangeEvent>;\n  @Event() requestPageSizeChange: EventEmitter<PaginationChangeEvent>;\n\n  private bookingListingsService = new BookingListingService();\n\n  private async deleteBooking() {\n    if (!this.booking_nbr) {\n      return;\n    }\n    try {\n      this.isLoading = true;\n      await this.bookingListingsService.removeExposedBooking(this.booking_nbr, true);\n      booking_listing.bookings = [...booking_listing.bookings.filter(b => b.booking_nbr?.toString() !== this.booking_nbr)];\n      this.booking_nbr = null;\n    } catch (error) {\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  private calculateTotalPersons(booking: Booking) {\n    const sumOfOccupancy = ({ adult_nbr, children_nbr, infant_nbr }: Occupancy) => {\n      return (adult_nbr ?? 0) + (children_nbr ?? 0) + (infant_nbr ?? 0);\n    };\n    return booking.rooms.reduce((prev, cur) => {\n      return sumOfOccupancy(cur.occupancy) + prev;\n    }, 0);\n  }\n  private handleIrActions({ action, booking }: { action: IrActionButton; booking: Booking }) {\n    switch (action) {\n      case 'edit':\n        this.openBookingDetails.emit(booking.booking_nbr);\n        break;\n      case 'delete':\n        this.booking_nbr = booking.booking_nbr;\n        break;\n      default:\n        console.warn(`${action} not handled`);\n    }\n  }\n  private handlePageChange(event: CustomEvent<PaginationChangeEvent>) {\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n    this.requestPageChange.emit(event.detail);\n  }\n  private handlePageSizeChange(event: CustomEvent<PaginationChangeEvent>) {\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n    this.requestPageSizeChange.emit(event.detail);\n  }\n  private async loadMoreBookings() {\n    if (this.isLoadMoreLoading) {\n      return;\n    }\n    const totalRecords = booking_listing.pagination.totalRecords;\n    const currentCount = booking_listing.bookings.length;\n    if (!totalRecords || currentCount >= totalRecords) {\n      return;\n    }\n    const pageSize = booking_listing.pagination.pageSize || booking_listing.rowCount || 20;\n    const nextStartRow = Math.ceil(currentCount / pageSize) * pageSize;\n    const nextEndRow = Math.min(nextStartRow + pageSize, totalRecords);\n    this.isLoadMoreLoading = true;\n    try {\n      await this.bookingListingsService.getExposedBookings(\n        {\n          ...booking_listing.userSelection,\n          start_row: nextStartRow,\n          end_row: nextEndRow,\n          is_to_export: false,\n        },\n        { append: true },\n      );\n    } catch (error) {\n      console.error('Failed to load more bookings', error);\n    } finally {\n      this.isLoadMoreLoading = false;\n    }\n  }\n  private renderRow(booking: Booking) {\n    const rowKey = `${booking.booking_nbr}`;\n    const totalPersons = this.calculateTotalPersons(booking);\n    const lastManipulation = booking.ota_manipulations ? booking.ota_manipulations[booking.ota_manipulations.length - 1] : null;\n\n    return (\n      <tr class=\"ir-table-row\" key={rowKey}>\n        {isPrivilegedUser(booking_listing.userSelection.userTypeCode) && <td>{booking.property.name}</td>}\n        <td>\n          <ir-booking-number-cell\n            origin={booking.origin}\n            source={booking.source}\n            channelBookingNumber={booking.channel_booking_nbr}\n            bookingNumber={booking.booking_nbr}\n          ></ir-booking-number-cell>\n        </td>\n        <td>\n          <ir-booked-on-cell bookedOn={booking.booked_on}></ir-booked-on-cell>\n        </td>\n        <td class=\"text-center\">\n          <ir-booked-by-cell\n            class=\"text-center\"\n            clickableGuest\n            showRepeatGuestBadge={booking.guest.nbr_confirmed_bookings > 1 && !booking.agent}\n            guest={booking.guest}\n            identifier={booking.booking_nbr}\n            showPersons\n            showPrivateNoteDot={getPrivateNote(booking.extras)}\n            totalPersons={totalPersons?.toString()}\n            showPromoIcon={!!booking.promo_key}\n            promoKey={booking.promo_key}\n            showLoyaltyIcon={booking.is_in_loyalty_mode && !booking.promo_key}\n          ></ir-booked-by-cell>\n        </td>\n        <td>\n          <ir-dates-cell checkIn={booking.from_date} checkOut={booking.to_date}></ir-dates-cell>\n        </td>\n        <td>\n          <div style={{ display: 'flex', flexDirection: 'column', gap: '0.25rem' }}>\n            {booking.rooms.map(room => (\n              <ir-unit-cell key={room.identifier} room={room}></ir-unit-cell>\n            ))}\n            {booking.extra_services && <p style={{ fontSize: '0.93rem' }}>{locales.entries.Lcz_ExtraServices}</p>}\n          </div>\n        </td>\n        <td class=\"text-center\">\n          <ir-balance-cell\n            data-css=\"center\"\n            bookingNumber={booking.booking_nbr}\n            isDirect={booking.is_direct}\n            statusCode={booking.status.code}\n            currencySymbol={booking.currency.symbol}\n            financial={booking.financial}\n          ></ir-balance-cell>\n        </td>\n        <td class=\"text-center\">\n          <ir-status-activity-cell\n            lastManipulation={lastManipulation}\n            showManipulationBadge={!!lastManipulation}\n            showModifiedBadge={!lastManipulation && booking.events?.length > 0 && booking.events[0].type.toLowerCase() === 'modified'}\n            status={booking.status}\n            isRequestToCancel={booking.is_requested_to_cancel}\n            bookingNumber={booking.booking_nbr}\n          ></ir-status-activity-cell>\n        </td>\n        <td>\n          <div class=\"\">\n            <ir-actions-cell\n              onIrAction={e => {\n                e.stopImmediatePropagation();\n                e.stopPropagation();\n                this.handleIrActions({ action: e.detail.action, booking });\n              }}\n              buttons={['edit', 'delete']}\n            ></ir-actions-cell>\n          </div>\n        </td>\n      </tr>\n    );\n  }\n  render() {\n    const pagination = booking_listing.pagination;\n    const canLoadMore = booking_listing.bookings.length > 0 && booking_listing.bookings.length < pagination.totalRecords;\n    return (\n      <Host>\n        <div class=\"table--container\">\n          <table class=\"table data-table\">\n            <thead>\n              <tr>\n                {isPrivilegedUser(booking_listing.userSelection.userTypeCode) && <th class=\"text-left\">Property</th>}\n                <th>\n                  <span class={'arrivals-table__departure__cell'}>Booking#</span>\n                </th>\n                <th>Booked on</th>\n                <th>\n                  <div>\n                    <p>Booked by</p>\n                  </div>\n                </th>\n                <th>Dates</th>\n                <th>Services</th>\n                <th class=\"text-center\">\n                  <p>Amount </p>\n                  <wa-tooltip for=\"balance-info\">Booking balance click to settle.</wa-tooltip>\n                  <div style={{ width: 'fit-content', marginLeft: 'auto', marginRight: 'auto' }}>\n                    <ir-custom-button\n                      id=\"balance-info\"\n                      style={{ '--ir-c-btn-height': 'fit-content', '--ir-c-btn-padding': '0.25rem', '--ir-c-btn-font-size': '0.725rem' }}\n                      size=\"small\"\n                      variant=\"danger\"\n                      appearance=\"outlined\"\n                    >\n                      Balance\n                    </ir-custom-button>\n                  </div>\n                </th>\n                <th class=\"text-center\">Status</th>\n                <th></th>\n              </tr>\n            </thead>\n            <tbody>\n              {booking_listing.bookings.length === 0 && (\n                <tr>\n                  <td colSpan={isPrivilegedUser(booking_listing.userSelection.userTypeCode) ? 9 : 8} class=\"empty-row\">\n                    No bookings found\n                  </td>\n                </tr>\n              )}\n              {booking_listing.bookings?.map(booking => this.renderRow(booking))}\n            </tbody>\n          </table>\n        </div>\n        <div class=\"card--container\">\n          {booking_listing.bookings.map(booking => {\n            const rowKey = `mobile--${booking.booking_nbr}`;\n            const totalPersons = this.calculateTotalPersons(booking);\n            const lastManipulation = booking.ota_manipulations ? booking.ota_manipulations[booking.ota_manipulations.length - 1] : null;\n            return (\n              <ir-booking-listing-mobile-card\n                key={rowKey}\n                booking={booking}\n                totalPersons={totalPersons}\n                lastManipulation={lastManipulation}\n                extraServicesLabel={locales.entries.Lcz_ExtraServices}\n                onIrBookingCardAction={event => {\n                  event.stopImmediatePropagation();\n                  event.stopPropagation();\n                  this.handleIrActions({ action: event.detail.action, booking: event.detail.booking });\n                }}\n              ></ir-booking-listing-mobile-card>\n            );\n          })}\n        </div>\n        {pagination.totalRecords > 0 && (\n          <ir-pagination\n            class=\"data-table--pagination\"\n            showing={pagination.showing}\n            total={pagination.totalRecords}\n            pages={pagination.totalPages}\n            pageSize={pagination.pageSize}\n            currentPage={pagination.currentPage}\n            allowPageSizeChange={false}\n            pageSizes={[pagination.pageSize]}\n            recordLabel={locales.entries?.Lcz_Bookings ?? 'bookings'}\n            onPageChange={event => this.handlePageChange(event as CustomEvent<PaginationChangeEvent>)}\n            onPageSizeChange={event => this.handlePageSizeChange(event as CustomEvent<PaginationChangeEvent>)}\n          ></ir-pagination>\n        )}\n        {canLoadMore && (\n          <ir-custom-button\n            class=\"booking-listing__load-more\"\n            variant=\"brand\"\n            appearance=\"outlined\"\n            loading={this.isLoadMoreLoading}\n            disabled={this.isLoadMoreLoading}\n            onClickHandler={e => {\n              e.stopImmediatePropagation();\n              e.stopPropagation();\n              this.loadMoreBookings();\n            }}\n          >\n            Load more\n          </ir-custom-button>\n        )}\n        <ir-dialog\n          label=\"Delete\"\n          open={!!this.booking_nbr}\n          onIrDialogHide={e => {\n            e.stopImmediatePropagation();\n            e.stopPropagation();\n          }}\n          onIrDialogAfterHide={e => {\n            e.stopImmediatePropagation();\n            e.stopPropagation();\n            this.booking_nbr = null;\n          }}\n          lightDismiss={false}\n        >\n          <span>{locales.entries.Lcz_SureYouWantToDeleteBookingNbr + this.booking_nbr}</span>\n          <div slot=\"footer\" class=\"ir-dialog__footer\">\n            <ir-custom-button data-dialog=\"close\" size=\"medium\" variant=\"neutral\" appearance=\"filled\">\n              Cancel\n            </ir-custom-button>\n            <ir-custom-button\n              onClickHandler={e => {\n                e.stopImmediatePropagation();\n                e.stopPropagation();\n                this.deleteBooking();\n              }}\n              loading={this.isLoading}\n              size=\"medium\"\n              variant=\"danger\"\n            >\n              Confirm\n            </ir-custom-button>\n          </div>\n        </ir-dialog>\n      </Host>\n    );\n  }\n}\n"],"version":3}