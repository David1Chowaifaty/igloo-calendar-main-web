{"file":"igl-blocked-date-drawer2.js","mappings":"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","names":[],"sources":["src/components/igloo-calendar/igl-blocked-date-drawer/igl-blocked-date-drawer.css?tag=igl-blocked-date-drawer&encapsulation=scoped","src/components/igloo-calendar/igl-blocked-date-drawer/igl-blocked-date-drawer.tsx"],"sourcesContent":[":host {\n  display: block;\n  text-align: start;\n}\n","import { BookingService } from '@/services/booking-service/booking.service';\nimport { getReleaseHoursString } from '@/utils/utils';\nimport { Component, Event, EventEmitter, h, Prop, State } from '@stencil/core';\n\n@Component({\n  tag: 'igl-blocked-date-drawer',\n  styleUrl: 'igl-blocked-date-drawer.css',\n  scoped: true,\n})\nexport class IglBlockedDateDrawer {\n  /**\n   * Controls whether the blocked date drawer is open or closed.\n   * Reflected to the DOM so it can be styled or toggled externally.\n   */\n  @Prop({ reflect: true }) open: boolean;\n\n  /**\n   * Label text displayed at the top of the drawer.\n   * Typically used as the drawer title.\n   */\n  @Prop() label: string;\n\n  /**\n   * Start date of the blocked date range.\n   * Expected to be an ISO date string (YYYY-MM-DD).\n   */\n  @Prop() fromDate: string;\n\n  /**\n   * End date of the blocked date range.\n   * Expected to be an ISO date string (YYYY-MM-DD).\n   */\n  @Prop() toDate: string;\n\n  /**\n   * Identifier of the unit being blocked.\n   * Used when sending block requests to the booking service.\n   */\n  @Prop() unitId: number;\n\n  @State() isLoading = false;\n  @State() blockDatesData: any = {\n    from_date: '',\n    to_date: '',\n    NOTES: '',\n    pr_id: null,\n    STAY_STATUS_CODE: null,\n    DESCRIPTION: null,\n    BLOCKED_TILL_DATE: null,\n    BLOCKED_TILL_HOUR: null,\n    BLOCKED_TILL_MINUTE: null,\n  };\n\n  @Event() blockedDateDrawerClosed: EventEmitter<void>;\n\n  private bookingService = new BookingService();\n\n  private async handleBlockDate() {\n    try {\n      this.isLoading = true;\n      const props: any = (() => {\n        const releaseData = getReleaseHoursString(this.blockDatesData.RELEASE_AFTER_HOURS !== null ? Number(this.blockDatesData.RELEASE_AFTER_HOURS) : null);\n        return {\n          from_date: this.fromDate,\n          to_date: this.toDate,\n          NOTES: this.blockDatesData.OPTIONAL_REASON || '',\n          pr_id: this.unitId.toString(),\n          STAY_STATUS_CODE: this.blockDatesData.OUT_OF_SERVICE ? '004' : this.blockDatesData.RELEASE_AFTER_HOURS === 0 ? '002' : '003',\n          DESCRIPTION: this.blockDatesData.RELEASE_AFTER_HOURS || '',\n          ...releaseData,\n        };\n      })();\n      await this.bookingService.blockUnit(props);\n      this.closeDrawer();\n    } catch (error) {\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  private closeDrawer() {\n    this.blockedDateDrawerClosed.emit();\n    this.blockDatesData = {\n      from_date: '',\n      to_date: '',\n      NOTES: '',\n      pr_id: null,\n      STAY_STATUS_CODE: null,\n      DESCRIPTION: null,\n      BLOCKED_TILL_DATE: null,\n      BLOCKED_TILL_HOUR: null,\n      BLOCKED_TILL_MINUTE: null,\n    };\n  }\n\n  render() {\n    return (\n      <ir-drawer\n        label={this.label}\n        onDrawerHide={e => {\n          e.stopImmediatePropagation();\n          e.stopPropagation();\n          this.closeDrawer();\n        }}\n        open={this.open}\n      >\n        {this.open && (\n          <igl-block-dates-view onDataUpdateEvent={e => (this.blockDatesData = { ...e.detail.data })} fromDate={this.fromDate} toDate={this.toDate}></igl-block-dates-view>\n        )}\n        <div slot=\"footer\" class=\"ir__drawer-footer\">\n          <ir-custom-button data-drawer=\"close\" size=\"medium\" appearance=\"filled\" variant=\"neutral\">\n            Cancel\n          </ir-custom-button>\n          <ir-custom-button\n            loading={this.isLoading}\n            onClickHandler={() => {\n              this.handleBlockDate();\n            }}\n            size=\"medium\"\n            appearance=\"accent\"\n            variant=\"brand\"\n          >\n            Save\n          </ir-custom-button>\n        </div>\n      </ir-drawer>\n    );\n  }\n}\n"],"version":3}