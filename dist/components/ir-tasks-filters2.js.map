{"file":"ir-tasks-filters2.js","mappings":"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","names":[],"sources":["src/components/ir-housekeeping/ir-hk-tasks/ir-tasks-filters/ir-tasks-filters.css?tag=ir-tasks-filters&encapsulation=scoped","src/components/ir-housekeeping/ir-hk-tasks/ir-tasks-filters/ir-tasks-filters.tsx"],"sourcesContent":[":host {\n  display: block;\n  min-width: 20vw;\n  height: 100%;\n  flex: 1;\n}\n@media (min-width: 1024px) {\n  .collapse-btn {\n    display: none;\n  }\n  #hkTasksFiltersCollapse.collapse:not(.show) {\n    display: block;\n    /* height: 75vh; */\n  }\n}\n","import { Component, Event, EventEmitter, h, Prop, State } from '@stencil/core';\nimport { TaskFilters } from '../types';\nimport housekeeping_store from '@/stores/housekeeping.store';\nimport locales from '@/stores/locales.store';\nimport calendar_data from '@/stores/calendar-data';\nexport type ModifiedTaskFilters = Omit<TaskFilters, 'housekeepers'> & { housekeepers: string };\n@Component({\n  tag: 'ir-tasks-filters',\n  styleUrl: 'ir-tasks-filters.css',\n  scoped: true,\n})\nexport class IrTasksFilters {\n  @Prop() isLoading: boolean;\n\n  @State() filters: ModifiedTaskFilters = {\n    cleaning_periods: {\n      code: '',\n    },\n    housekeepers: '000',\n    cleaning_frequencies: { code: '' },\n    dusty_units: { code: '' },\n    highlight_check_ins: { code: '' },\n  };\n\n  @State() collapsed: boolean = false;\n\n  @Event() applyFilters: EventEmitter<TaskFilters>;\n\n  private baseFilters: TaskFilters;\n\n  componentWillLoad() {\n    this.baseFilters = {\n      cleaning_periods: housekeeping_store?.hk_criteria?.cleaning_periods[0],\n      housekeepers: housekeeping_store.hk_criteria.housekeepers?.map(h => ({ id: h.id })),\n      cleaning_frequencies: calendar_data.cleaning_frequency ?? housekeeping_store?.hk_criteria?.cleaning_frequencies[0],\n      dusty_units: housekeeping_store?.hk_criteria?.dusty_periods[0],\n      highlight_check_ins: housekeeping_store?.hk_criteria?.highlight_checkin_options[0],\n    };\n    this.filters = { ...this.baseFilters, housekeepers: '000' };\n  }\n\n  private updateFilter(params: Partial<ModifiedTaskFilters>) {\n    this.filters = { ...this.filters, ...params };\n  }\n  private applyFiltersEvt(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.applyFilters.emit({\n      ...this.filters,\n      housekeepers: this.filters.housekeepers === '000' ? this.baseFilters.housekeepers : [{ id: Number(this.filters.housekeepers) }],\n    });\n  }\n  private resetFilters(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.filters = { ...this.baseFilters, housekeepers: '000' };\n    this.applyFilters.emit({\n      ...this.filters,\n      housekeepers: this.filters.housekeepers === '000' ? this.baseFilters.housekeepers : [{ id: Number(this.filters.housekeepers) }],\n    });\n  }\n  render() {\n    return (\n      <div class=\"card mb-0 p-1 d-flex flex-column\">\n        <div class=\"d-flex align-items-center justify-content-between\">\n          <div class={'d-flex align-items-center'} style={{ gap: '0.5rem' }}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" height={18} width={18}>\n              <path\n                fill=\"currentColor\"\n                d=\"M3.9 54.9C10.5 40.9 24.5 32 40 32l432 0c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9 320 448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6l0-79.1L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z\"\n              />\n            </svg>\n            <h4 class=\"m-0 p-0 flex-grow-1\">{locales.entries.Lcz_Filters}</h4>\n          </div>\n          <ir-button\n            variant=\"icon\"\n            id=\"drawer-icon\"\n            data-toggle=\"collapse\"\n            data-target=\"#hkTasksFiltersCollapse\"\n            aria-expanded={this.collapsed ? 'true' : 'false'}\n            aria-controls=\"hkTasksFiltersCollapse\"\n            class=\"mr-1 collapse-btn\"\n            icon_name={this.collapsed ? 'closed_eye' : 'open_eye'}\n            onClickHandler={() => {\n              this.collapsed = !this.collapsed;\n            }}\n            style={{ '--icon-size': '1.6rem' }}\n          ></ir-button>\n        </div>\n        <div class=\"m-0 p-0 collapse\" id=\"hkTasksFiltersCollapse\">\n          <div class=\"d-flex flex-column\" style={{ gap: '0.5rem' }}>\n            <fieldset class=\"pt-1\">\n              <p class=\"m-0 pt-0 px-0\" style={{ paddingBottom: '0.25rem' }}>\n                {locales.entries.Lcz_Period}\n              </p>\n              <ir-select\n                testId=\"period\"\n                selectedValue={this.filters?.cleaning_periods?.code}\n                LabelAvailable={false}\n                showFirstOption={false}\n                data={housekeeping_store?.hk_criteria?.cleaning_periods.map(v => ({\n                  text: v.description,\n                  value: v.code,\n                }))}\n                onSelectChange={e => {\n                  this.updateFilter({ cleaning_periods: { code: e.detail } });\n                }}\n              ></ir-select>\n            </fieldset>\n            {housekeeping_store?.hk_criteria?.housekeepers.length > 1 && (\n              <fieldset>\n                <p class=\"m-0 pt-0 px-0\" style={{ paddingBottom: '0.25rem' }}>\n                  {locales.entries.Lcz_Housekeepers}\n                </p>\n                <ir-select\n                  testId=\"housekeepers\"\n                  selectedValue={this.filters?.housekeepers}\n                  LabelAvailable={false}\n                  showFirstOption={false}\n                  data={[\n                    { text: locales.entries.Lcz_Allhousekeepers, value: '000' },\n                    ...housekeeping_store?.hk_criteria?.housekeepers\n                      .map(v => ({\n                        text: v.name,\n                        value: v.id.toString(),\n                      }))\n                      .sort((a, b) => a.text.toLowerCase().localeCompare(b.text.toLowerCase())),\n                  ]}\n                  onSelectChange={e => {\n                    // if (e.detail === '000') {\n                    //   this.updateFilter({ housekeepers: { ids: this.baseFilters?.housekeepers?.ids } });\n                    // } else {\n                    //   this.updateFilter({ housekeepers: { ids: [e.detail] } });\n                    // }\n                    this.updateFilter({ housekeepers: e.detail });\n                  }}\n                ></ir-select>\n              </fieldset>\n            )}\n            <fieldset>\n              <p class=\"m-0 pt-0 px-0\" style={{ paddingBottom: '0.25rem' }}>\n                {locales.entries.Lcz_CleaningFrequency}\n              </p>\n              <ir-select\n                testId=\"cleaning_frequency\"\n                selectedValue={this.filters?.cleaning_frequencies?.code}\n                LabelAvailable={false}\n                showFirstOption={false}\n                data={housekeeping_store?.hk_criteria?.cleaning_frequencies.map(v => ({\n                  text: v.description,\n                  value: v.code,\n                }))}\n                onSelectChange={e => {\n                  this.updateFilter({ cleaning_frequencies: { code: e.detail } });\n                }}\n              ></ir-select>\n            </fieldset>\n            <fieldset>\n              <p class=\"m-0 pt-0 px-0\" style={{ paddingBottom: '0.25rem' }}>\n                Include dusty units\n              </p>\n              <ir-select\n                testId=\"dusty_units\"\n                showFirstOption={false}\n                LabelAvailable={false}\n                selectedValue={this.filters?.dusty_units?.code}\n                data={housekeeping_store.hk_criteria?.dusty_periods?.map(v => ({\n                  text: v.description,\n                  value: v.code,\n                }))}\n                onSelectChange={e => {\n                  e.stopImmediatePropagation();\n                  e.stopPropagation();\n                  this.updateFilter({ dusty_units: { code: e.detail } });\n                }}\n              ></ir-select>\n            </fieldset>\n            <fieldset class=\"mb-1\">\n              <p class=\"m-0 pt-0 px-0\" style={{ paddingBottom: '0.25rem' }}>\n                {locales.entries['Lcz_HighlightCheck-insFrom']}\n              </p>\n              <ir-select\n                testId=\"highlight_check_ins\"\n                selectedValue={this.filters?.highlight_check_ins?.code}\n                LabelAvailable={false}\n                showFirstOption={false}\n                onSelectChange={e => {\n                  this.updateFilter({ highlight_check_ins: { code: e.detail } });\n                }}\n                data={housekeeping_store.hk_criteria?.highlight_checkin_options?.map(v => ({\n                  text: v.description,\n                  value: v.code,\n                }))}\n              ></ir-select>\n            </fieldset>\n            <div class=\"d-flex align-items-center justify-content-end\" style={{ gap: '1rem' }}>\n              <ir-button\n                btn_type=\"button\"\n                data-testid=\"reset\"\n                text={locales.entries.Lcz_Reset}\n                size=\"sm\"\n                btn_color=\"secondary\"\n                onClickHandler={e => this.resetFilters(e)}\n              ></ir-button>\n              <ir-button\n                btn_type=\"button\"\n                data-testid=\"apply\"\n                isLoading={this.isLoading}\n                text={locales.entries.Lcz_Apply}\n                size=\"sm\"\n                onClickHandler={e => this.applyFiltersEvt(e)}\n              ></ir-button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n"],"version":3}