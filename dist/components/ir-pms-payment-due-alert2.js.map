{"file":"ir-pms-payment-due-alert2.js","mappings":";;;;AAAA,MAAM,uBAAuB,GAAG,+NAA+N,CAAC;AAChQ,mCAAe,uBAAuB;;MCQzB,oBAAoB;;;;;IACvB,UAAU,CAAS;IACnB,MAAM,CAAS;IACf,OAAO,CAAS;IAEf,aAAa,GAAkB,EAAE,CAAC;IAEnC,YAAY,GAAG,IAAI,KAAK,EAAE,CAAC;IAC3B,eAAe,GAAG,IAAI,eAAe,EAAE,CAAC;IAEhD,iBAAiB;QACf,IAAI,IAAI,CAAC,OAAO,EAAE;YAChB,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SAC5C;QACD,IAAI,IAAI,CAAC,MAAM,EAAE;YACf,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACxC,IAAI,CAAC,kBAAkB,EAAE,CAAC;SAC3B;KACF;IAGD,kBAAkB,CAAC,QAAgB,EAAE,QAAgB;QACnD,IAAI,QAAQ,KAAK,QAAQ,IAAI,CAAC,QAAQ,EAAE;YACtC,OAAO;SACR;QACD,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;QACrC,IAAI,CAAC,kBAAkB,EAAE,CAAC;KAC3B;IAEO,MAAM,kBAAkB;QAC9B,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YACpB,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;YACxB,OAAO;SACR;QACD,IAAI;YACF,IAAI,CAAC,aAAa,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,kBAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;SACrF;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACnB,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;SACzB;KACF;IAED,MAAM;QACJ,MAAM,eAAe,GAAG,IAAI,CAAC,aAAa;cACtC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,WAAW,CAAC;cACnC,GAAG,CAAC,YAAY,IAAI,YAAY,CAAC,OAAO,CAAC;cACzC,MAAM,CAAC,OAAO,CAAC;cACf,IAAI,CAAC,GAAG,CAAC,CAAC;QACd,IAAI,CAAC,eAAe,EAAE;YACpB,OAAO,EAAC,IAAI,OAAQ,CAAC;SACtB;QACD,QACE,EAAC,IAAI,QACH,kBAAY,KAAK,EAAC,gCAAgC,EAAC,IAAI,EAAC,OAAO,EAAC,UAAU,EAAC,QAAQ,EAAC,OAAO,EAAC,QAAQ,IAClG,WAAK,KAAK,EAAC,wCAAwC,IACjD,eAAS,KAAK,EAAE,EAAE,KAAK,EAAE,kCAAkC,EAAE,QAAQ,EAAE,MAAM,EAAE,EAAE,IAAI,EAAC,MAAM,EAAC,IAAI,EAAC,sBAAsB,GAAW,EACnI,gBAAO,eAAe,CAAQ,CAC1B,CACK,CACR,EACP;KACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":[],"sources":["src/components/pms-header/ir-pms-payment-due-alert/ir-pms-payment-due-alert.css?tag=ir-pms-payment-due-alert&encapsulation=scoped","src/components/pms-header/ir-pms-payment-due-alert/ir-pms-payment-due-alert.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n.pms-payment-due-alert__callout-message {\n  width: 100%;\n  display: flex;\n  text-align: center;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-items: center;\n  gap: 1rem;\n}\n","import { FetchNotificationsResult as Notifications, PropertyService } from '@/services/property.service';\nimport Token from '@/models/Token';\nimport { Component, Host, Prop, State, Watch, h } from '@stencil/core';\n\n@Component({\n  tag: 'ir-pms-payment-due-alert',\n  styleUrl: 'ir-pms-payment-due-alert.css',\n  scoped: true,\n})\nexport class IrPmsPaymentDueAlert {\n  @Prop() propertyid: number;\n  @Prop() ticket: string;\n  @Prop() baseUrl: string;\n\n  @State() notifications: Notifications = [];\n\n  private tokenService = new Token();\n  private propertyService = new PropertyService();\n\n  componentWillLoad() {\n    if (this.baseUrl) {\n      this.tokenService.setBaseUrl(this.baseUrl);\n    }\n    if (this.ticket) {\n      this.tokenService.setToken(this.ticket);\n      this.fetchNotifications();\n    }\n  }\n\n  @Watch('ticket')\n  handleTicketChange(newValue: string, oldValue: string) {\n    if (newValue === oldValue || !newValue) {\n      return;\n    }\n    this.tokenService.setToken(newValue);\n    this.fetchNotifications();\n  }\n\n  private async fetchNotifications() {\n    if (!this.propertyid) {\n      this.notifications = [];\n      return;\n    }\n    try {\n      this.notifications = await this.propertyService.fetchNotifications(this.propertyid);\n    } catch (error) {\n      console.log(error);\n      this.notifications = [];\n    }\n  }\n\n  render() {\n    const combinedMessage = this.notifications\n      ?.filter(n => n.type === 'financial')\n      ?.map(notification => notification.message)\n      ?.filter(Boolean)\n      ?.join(' ');\n    if (!combinedMessage) {\n      return <Host></Host>;\n    }\n    return (\n      <Host>\n        <wa-callout class=\"pms-payment-due-alert__callout\" size=\"small\" appearance=\"filled\" variant=\"danger\">\n          <div class=\"pms-payment-due-alert__callout-message\">\n            <wa-icon style={{ color: 'var(--wa-color-danger-fill-loud)', fontSize: '1rem' }} slot=\"icon\" name=\"triangle-exclamation\"></wa-icon>\n            <span>{combinedMessage}</span>\n          </div>\n        </wa-callout>\n      </Host>\n    );\n  }\n}\n"],"version":3}