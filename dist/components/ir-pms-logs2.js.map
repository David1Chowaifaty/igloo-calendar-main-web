{"file":"ir-pms-logs2.js","mappings":"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","names":[],"sources":["src/components/ir-booking-details/ir-booking-header/ir-pms-logs/ir-pms-logs.css?tag=ir-pms-logs&encapsulation=scoped","src/components/ir-booking-details/ir-booking-header/ir-pms-logs/ir-pms-logs.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n.dialog-container-height {\n  height: 4rem;\n}\n.list-title {\n  margin: 0;\n  padding: 0;\n  font-weight: 600;\n  white-space: nowrap;\n  display: inline;\n}\n.list-item {\n  margin: 0;\n  padding: 0;\n  font-size: 14px;\n  margin-left: 5px;\n  width: fit-content;\n}\n.list-item.green {\n  color: #629a4c;\n  font-weight: 600;\n}\n.list-item.red {\n  color: #ff4961;\n  font-weight: 600;\n}\n","import { Component, h, Prop, State } from '@stencil/core';\nimport { _formatTime } from '../../functions';\nimport locales from '@/stores/locales.store';\nimport { IPmsLog } from '@/models/booking.dto';\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\nimport { BookingService } from '@/services/booking-service/booking.service';\n\n@Component({\n  tag: 'ir-pms-logs',\n  styleUrl: 'ir-pms-logs.css',\n  scoped: true,\n})\nexport class IrPmsLogs {\n  @Prop() bookingNumber: string;\n\n  @State() pmsLogs: IPmsLog;\n  @State() error: string;\n\n  private bookingService = new BookingService();\n  private userTypeCode;\n\n  componentWillLoad() {\n    this.init();\n    const UserInfo_b = JSON.parse(localStorage.getItem('UserInfo_b'));\n    if (UserInfo_b) {\n      this.userTypeCode = UserInfo_b.USER_TYPE_CODE;\n    }\n  }\n\n  private async init() {\n    try {\n      this.pmsLogs = await this.bookingService.fetchPMSLogs(this.bookingNumber);\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  render() {\n    return (\n      <div class=\"\">\n        {isRequestPending('/Get_Exposed_PMS_Logs') ? (\n          <div class={'d-flex align-items-center justify-content-center dialog-container-height'}>\n            <ir-spinner></ir-spinner>\n          </div>\n        ) : (\n          <div class={'dialog-container-height'}>\n            <div class=\"d-flex align-items-center \" style={{ paddingBottom: '0.5rem' }}>\n              <p class=\"list-title p-0 m-0\">{locales.entries.Lcz_SentAt}:</p>\n              {this.pmsLogs?.sent_date ? (\n                <p class=\"list-item\">\n                  {this.pmsLogs?.sent_date} {_formatTime(this.pmsLogs?.sent_hour.toString(), this.pmsLogs?.sent_minute.toString())}\n                </p>\n              ) : (\n                <p class={`list-item ${this.pmsLogs?.sent_date ? 'green' : 'red'}`}>{this.pmsLogs?.is_acknowledged ? locales.entries.Lcz_YES : locales.entries.Lcz_NO}</p>\n              )}\n            </div>\n            <div class=\"d-flex align-items-center p-0 m-0\">\n              <p class=\"list-title p-0 m-0\">{locales.entries.Lcz_Acknowledged}</p>\n              <div class=\"d-flex align-items-center\" style={{ gap: '1rem' }}>\n                <p class={`list-item  ${this.pmsLogs?.is_acknowledged ? 'green' : 'red'}`}>{this.pmsLogs?.is_acknowledged ? locales.entries.Lcz_YES : locales.entries.Lcz_NO}</p>\n                {!this.pmsLogs?.is_acknowledged && this.pmsLogs?.revision_id && this.userTypeCode === '1' && (\n                  <ir-custom-button\n                    variant=\"brand\"\n                    loading={isRequestPending('/Ack_Exposed_Revision')}\n                    onClickHandler={async e => {\n                      e.stopImmediatePropagation();\n                      e.stopPropagation();\n                      const data = await this.bookingService.ackExposedRevision({\n                        revision_id: this.pmsLogs?.revision_id,\n                      });\n                      this.error = data.ExceptionMsg;\n                    }}\n                  >\n                    Acknowledge\n                  </ir-custom-button>\n                )}\n              </div>\n            </div>\n            {this.error && (\n              <wa-callout size=\"small\" appearance=\"filled-outlined\" variant=\"danger\">\n                {this.error}\n              </wa-callout>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n"],"version":3}