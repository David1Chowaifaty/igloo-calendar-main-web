{"file":"booking.store.js","mappings":"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","names":["moment"],"sources":["src/stores/booking.store.ts"],"sourcesContent":["import { Booking, Guest } from '@/models/booking.dto';\nimport { ICountry, ISetupEntries } from '@/models/IBooking';\nimport { BookingSource, TEventType } from '@/models/igl-book-property';\nimport { BeddingSetup, ISmokingOption, RatePlan, RoomType, Variation } from '@/models/property';\nimport { calculateDaysBetweenDates } from '@/utils/booking';\nimport { createStore } from '@stencil/store';\nimport moment, { Moment } from 'moment';\n\n// -----------------------------------------------------------------------------\n// Type Definitions\n// -----------------------------------------------------------------------------\n\n/**\n * Shape of a single rate plan selection for a specific room type.\n */\nexport interface IRatePlanSelection {\n  reserved: number;\n  visibleInventory: number;\n  selected_variation: Variation | null;\n  ratePlan: RatePlan;\n  guest: RatePlanGuest[] | null;\n  guestName: string[];\n  is_bed_configuration_enabled: boolean;\n  checkoutVariations: Variation[];\n  checkoutBedSelection: string[];\n  is_amount_modified?: boolean;\n  view_mode: '002' | '001';\n  rp_amount: number;\n  checkoutSmokingSelection: string[];\n  roomtype: {\n    id: number;\n    name: string;\n    physicalrooms: null;\n    rateplans: null;\n    availabilities: null;\n    inventory: number;\n    rate: number;\n    smoking_option: ISmokingOption;\n    bedding_setup: BeddingSetup[];\n    is_bed_configuration_enabled: boolean;\n  };\n}\nexport interface RatePlanGuest {\n  first_name: string;\n  last_name: string;\n  unit: string | null;\n  bed_preference: string | null;\n  infant_nbr: number | null;\n  roomtype_id?: number;\n}\n\nexport interface IRoomTypeSelection {\n  [ratePlanId: number]: IRatePlanSelection;\n}\nexport interface ISelectedVariation {\n  variation: Variation;\n  state: 'default' | 'modified';\n}\nexport interface IBookingAvailabilityParams {\n  from_date: Date | null;\n  to_date: Date | null;\n  adult_nbr: number;\n  child_nbr: number;\n  infant_nbr: number;\n  coupon?: string;\n  agent?: number;\n  loyalty?: boolean;\n  agent_code?: string;\n}\n\n/**\n * Temporary booking info captured across the booking wizard.\n */\nexport interface BookingDraft {\n  dates: {\n    checkIn: Moment;\n    checkOut: Moment;\n  };\n  occupancy: {\n    adults: number;\n    children: number;\n  };\n  source: BookingSource;\n  guest?: any;\n}\n\n/**\n * Lookup datasets used by dropdowns across the booking experience.\n */\nexport interface BookingSelects {\n  sources: BookingSource[];\n  ratePricingMode: ISetupEntries['ratePricingMode'];\n  arrivalTime: ISetupEntries['arrivalTime'];\n  bedPreferences: ISetupEntries['bedPreferenceType'];\n  countries: ICountry[];\n}\n\n/**\n * Snapshot of the guest that pays for or books the reservation.\n */\nexport interface BookedByGuest {\n  id: number | null;\n  email: string;\n  firstName: string;\n  lastName: string;\n  company: string;\n  countryId: string;\n  phone_prefix: string;\n  mobile: string;\n  selectedArrivalTime: string;\n  emailGuest: boolean;\n  note: string;\n  cardNumber: string;\n  cardHolderName: string;\n  expiryMonth: string;\n  expiryYear: string;\n}\n/**\n * Root state shared across the booking experience.\n */\nexport interface BookingStore {\n  tax_statement: { message: string } | null;\n  checkout_guest: Guest | null;\n  selectedPaymentMethod: { code: string };\n  roomTypes: RoomType[];\n  enableBooking: boolean;\n  ratePlanSelections: { [roomTypeId: number]: IRoomTypeSelection };\n  event_type: { type: TEventType };\n  guest: RatePlanGuest;\n  bookingAvailabilityParams: IBookingAvailabilityParams;\n  booking: Booking;\n  resetBooking: boolean;\n  isInFreeCancelationZone: boolean;\n  fictus_booking_nbr: { nbr: string | null };\n  bookingDraft: BookingDraft;\n  selects: BookingSelects;\n  bookedByGuest: BookedByGuest;\n  bookedByGuestManuallyEdited: boolean;\n}\n\nexport interface ReservedRoomSelection {\n  roomTypeId: number;\n  ratePlanId: number;\n  reservationIndex: number;\n  guest: RatePlanGuest | null;\n  ratePlanSelection: IRatePlanSelection;\n}\nexport const bookedByGuestBaseData = {\n  id: -1,\n  email: '',\n  company: '',\n  firstName: '',\n  lastName: '',\n  countryId: '',\n  phone_prefix: '',\n  mobile: '',\n  selectedArrivalTime: '',\n  emailGuest: true,\n  note: '',\n  cardNumber: '',\n  cardHolderName: '',\n  expiryMonth: '',\n  expiryYear: '',\n};\n\n// -----------------------------------------------------------------------------\n// Store Initialization\n// -----------------------------------------------------------------------------\nconst initialState: BookingStore = {\n  bookedByGuest: bookedByGuestBaseData,\n  bookedByGuestManuallyEdited: false,\n  bookingDraft: {\n    dates: {\n      checkIn: moment().startOf('day'),\n      checkOut: moment().add(1, 'day'),\n    },\n    occupancy: {\n      adults: null,\n      children: null,\n    },\n    source: null,\n  },\n  selects: {\n    sources: [],\n    ratePricingMode: [],\n    arrivalTime: [],\n    bedPreferences: [],\n    countries: [],\n  },\n  checkout_guest: null,\n  guest: null,\n  tax_statement: null,\n  roomTypes: [],\n  enableBooking: false,\n  resetBooking: false,\n  ratePlanSelections: {},\n  selectedPaymentMethod: null,\n  isInFreeCancelationZone: false,\n  bookingAvailabilityParams: {\n    from_date: null,\n    to_date: null,\n    adult_nbr: 0,\n    child_nbr: 0,\n    infant_nbr: 0,\n  },\n  booking: null,\n  fictus_booking_nbr: null,\n  event_type: { type: 'PLUS_BOOKING' },\n};\n\nexport let { state: booking_store, onChange: onRoomTypeChange, reset } = createStore<BookingStore>(initialState);\n\n// -----------------------------------------------------------------------------\n// Helpers\n// -----------------------------------------------------------------------------\n\n/**\n * Clears the booking store. Optionally rehydrates dropdowns and guest info when keeping the modal open.\n */\nexport function resetBookingStore(closeModal: boolean) {\n  const { bookingDraft, selects, bookedByGuest } = booking_store;\n  reset();\n  if (!closeModal) {\n    setBookingDraft(bookingDraft);\n    updateBookedByGuest(bookedByGuest);\n    setBookingSelectOptions(selects);\n  }\n}\n/**\n * Convenience helper that resets shared state while keeping the modal visible.\n */\nexport function resetAvailability(): void {\n  resetBookingStore(false);\n}\n\n/**\n * Updates booking draft pieces (dates, occupancy, source) while keeping unrelated keys intact.\n */\nexport function setBookingDraft(params: Partial<BookingDraft>) {\n  booking_store.bookingDraft = {\n    ...booking_store.bookingDraft,\n    ...params,\n    dates: {\n      ...booking_store.bookingDraft.dates,\n      ...params.dates,\n    },\n    occupancy: {\n      ...booking_store.bookingDraft.occupancy,\n      ...params.occupancy,\n    },\n  };\n}\n/**\n * Updates dropdown lookup datasets (sources, bed preferences, etc.).\n */\nexport function setBookingSelectOptions(params: Partial<BookingSelects>) {\n  booking_store.selects = {\n    ...booking_store.selects,\n    ...params,\n  };\n}\n/**\n * Ensures the selected variation still exists on the server payload.\n */\nfunction resolveSelectedVariation(variations: Variation[], selected_variation: Variation): Variation {\n  if (!variations) {\n    return null;\n  }\n  if (!selected_variation || booking_store.resetBooking) {\n    return variations[0];\n  }\n  return variations?.find(v => v.adult_nbr === selected_variation.adult_nbr && v.child_nbr === selected_variation.child_nbr) ?? null;\n}\n\n/**\n * Keeps `ratePlanSelections` in sync when backend refreshes available room types.\n */\nonRoomTypeChange('roomTypes', (newValue: RoomType[]) => {\n  const currentSelections = booking_store.ratePlanSelections;\n  const ratePlanSelections: { [roomTypeId: number]: IRoomTypeSelection } = {};\n  newValue.forEach(roomType => {\n    if (!roomType.is_active) return;\n    ratePlanSelections[roomType.id] = ratePlanSelections[roomType.id] || {};\n\n    roomType.rateplans.forEach(ratePlan => {\n      if (!ratePlan.is_active || !ratePlan?.variations?.length) return;\n      let lastVariation = ratePlan.variations[ratePlan.variations.length - 1];\n      lastVariation = ratePlan.selected_variation ?? lastVariation;\n      const currentRatePlanSelection = currentSelections[roomType.id]?.[ratePlan.id];\n      ratePlanSelections[roomType.id][ratePlan.id] =\n        currentRatePlanSelection && Object.keys(currentRatePlanSelection).length > 0\n          ? {\n              ...currentRatePlanSelection,\n              ratePlan,\n              selected_variation: resolveSelectedVariation(ratePlan.variations, currentRatePlanSelection.selected_variation) ?? null,\n              visibleInventory: roomType.inventory,\n              reserved: roomType.inventory === 0 ? 0 : booking_store.resetBooking ? 0 : currentRatePlanSelection.reserved,\n              checkoutVariations: roomType.inventory === 0 ? [] : currentRatePlanSelection.checkoutVariations,\n              checkoutBedSelection: roomType.inventory === 0 ? [] : currentRatePlanSelection.checkoutBedSelection,\n              checkoutSmokingSelection: roomType.inventory === 0 ? [] : currentRatePlanSelection.checkoutSmokingSelection,\n              guestName: roomType.inventory === 0 ? [] : currentRatePlanSelection.guestName,\n              roomtype: {\n                ...currentRatePlanSelection.roomtype,\n              },\n            }\n          : {\n              reserved: 0,\n              rp_amount: 0,\n              view_mode: '001',\n              guest: null,\n              visibleInventory: roomType.inventory,\n              selected_variation: ratePlan?.variations[0] ?? null,\n              ratePlan,\n              guestName: [],\n              is_bed_configuration_enabled: roomType.is_bed_configuration_enabled,\n              roomtype: {\n                ...roomType,\n                physicalrooms: null,\n                rateplans: null,\n                availabilities: null,\n              },\n              checkoutVariations: [],\n              checkoutBedSelection: [],\n              checkoutSmokingSelection: [],\n            };\n    });\n  });\n  booking_store.ratePlanSelections = ratePlanSelections;\n  booking_store.resetBooking = false;\n});\n\n// -----------------------------------------------------------------------------\n// State Mutators\n// -----------------------------------------------------------------------------\n/**\n * Partially updates the booked-by guest snapshot, preserving other properties.\n */\nexport function updateBookedByGuest(params: Partial<BookedByGuest>) {\n  booking_store.bookedByGuest = {\n    ...booking_store.bookedByGuest,\n    ...params,\n  };\n}\n/**\n * Updates the guest list assigned to a specific rate plan selection.\n */\nexport function updateRoomGuest({\n  guest,\n  ratePlanId,\n  roomTypeId,\n  ratePlanSelection,\n}: {\n  roomTypeId: number;\n  ratePlanId: number;\n  guest: IRatePlanSelection['guest'];\n  ratePlanSelection: IRatePlanSelection;\n}) {\n  booking_store.ratePlanSelections = {\n    ...booking_store.ratePlanSelections,\n    [roomTypeId]: {\n      ...booking_store.ratePlanSelections[roomTypeId],\n      [ratePlanId]: { ...ratePlanSelection, guest: [...guest] },\n    },\n  };\n}\n/**\n * Recomputes remaining visible inventory for a room type whenever selections change.\n */\nexport function updateInventory(roomTypeId: number) {\n  const roomTypeSelection = booking_store.ratePlanSelections[roomTypeId];\n  if (!roomTypeSelection) {\n    return;\n  }\n  const roomTypeData = booking_store.roomTypes.find(rt => rt.id === roomTypeId);\n  if (!roomTypeData) {\n    return;\n  }\n  const totalReserved = Object.values(roomTypeSelection).reduce((acc, ratePlan) => acc + ratePlan.reserved, 0);\n  let hasChanges = false;\n\n  const newRatePlans = Object.entries(roomTypeSelection).reduce((acc, [ratePlanId, ratePlan]) => {\n    const roomsExcludingCurrent = totalReserved - ratePlan.reserved;\n    const availableRooms = Math.max(roomTypeData.inventory - roomsExcludingCurrent, 0);\n    if (ratePlan.visibleInventory !== availableRooms) {\n      hasChanges = true;\n      acc[ratePlanId] = { ...ratePlan, visibleInventory: availableRooms };\n    } else {\n      acc[ratePlanId] = ratePlan;\n    }\n    return acc;\n  }, {} as IRoomTypeSelection);\n\n  if (hasChanges) {\n    booking_store.ratePlanSelections = {\n      ...booking_store.ratePlanSelections,\n      [roomTypeId]: newRatePlans,\n    };\n  }\n}\n/**\n * Returns true when any room type currently has at least one reservation selected.\n */\nexport function hasAtLeastOneRoomSelected(): boolean {\n  return Object.values(booking_store.ratePlanSelections).some(roomTypeSelection => Object.values(roomTypeSelection).some(ratePlan => ratePlan.reserved > 0));\n}\n/**\n * Applies a patch of values to the given room type & rate plan combination.\n */\nexport function updateRoomParams({ ratePlanId, roomTypeId, params }: { roomTypeId: number; ratePlanId: number; params: Partial<IRatePlanSelection> }) {\n  booking_store.ratePlanSelections = {\n    ...booking_store.ratePlanSelections,\n    [Number(roomTypeId)]: {\n      ...booking_store.ratePlanSelections[Number(roomTypeId)],\n      [ratePlanId]: {\n        ...booking_store.ratePlanSelections[roomTypeId][ratePlanId],\n        ...params,\n      },\n    },\n  };\n}\n\n/**\n * Reserves a number of rooms for a rate plan and bootstraps its selection entry if needed.\n */\nexport function reserveRooms({ ratePlanId, roomTypeId, rooms, guest }: { roomTypeId: number; ratePlanId: number; rooms: number; guest?: RatePlanGuest[] }) {\n  if (!booking_store.ratePlanSelections[roomTypeId]) {\n    booking_store.ratePlanSelections[roomTypeId] = {};\n  }\n  const roomType = booking_store.roomTypes?.find(r => r.id === roomTypeId);\n  if (!roomType) {\n    throw new Error('Invalid room type id');\n  }\n  const ratePlan = roomType.rateplans.find(r => r.id === ratePlanId);\n  if (!ratePlan) {\n    throw new Error('Invalid rate plan');\n  }\n  let newGuest = Array.from({ length: rooms }, () => ({ first_name: '', last_name: '', unit: null, bed_preference: null, infant_nbr: null }));\n  if (guest) {\n    newGuest = guest;\n  }\n  if (!booking_store.ratePlanSelections[roomTypeId][ratePlanId]) {\n    booking_store.ratePlanSelections[roomTypeId][ratePlanId] = {\n      guestName: [],\n      reserved: 0,\n      view_mode: '001',\n      rp_amount: 0,\n      guest: newGuest,\n      is_bed_configuration_enabled: roomType.is_bed_configuration_enabled,\n      visibleInventory: 0,\n      selected_variation: null,\n      ratePlan,\n      checkoutVariations: [],\n      checkoutBedSelection: [],\n      checkoutSmokingSelection: [],\n      roomtype: {\n        id: roomType.id,\n        name: roomType.name,\n        physicalrooms: null,\n        rateplans: null,\n        availabilities: null,\n        inventory: roomType.inventory,\n        rate: roomType.rate,\n        bedding_setup: roomType.bedding_setup,\n        smoking_option: roomType.smoking_option,\n        is_bed_configuration_enabled: roomType.is_bed_configuration_enabled,\n      },\n    };\n  }\n\n  booking_store.ratePlanSelections = {\n    ...booking_store.ratePlanSelections,\n    [Number(roomTypeId)]: {\n      ...booking_store.ratePlanSelections[Number(roomTypeId)],\n      [ratePlanId]: {\n        ...booking_store.ratePlanSelections[roomTypeId][ratePlanId],\n        reserved: rooms,\n        checkoutVariations: [],\n        guest: newGuest,\n      },\n    },\n  };\n  updateInventory(roomTypeId);\n}\n\n// -----------------------------------------------------------------------------\n// Selectors & Derived Data\n// -----------------------------------------------------------------------------\n/**\n * Safely retrieves the selection payload for a specific room type/rate plan pair.\n */\nexport function getVisibleInventory(roomTypeId: number, ratePlanId: number): IRatePlanSelection {\n  if (!booking_store.ratePlanSelections || !booking_store.ratePlanSelections[roomTypeId]) {\n    return {\n      reserved: 0,\n      guest: null,\n      visibleInventory: 0,\n      selected_variation: null,\n      ratePlan: null,\n      guestName: [],\n      is_bed_configuration_enabled: false,\n      checkoutVariations: [],\n      checkoutBedSelection: [],\n      checkoutSmokingSelection: [],\n      rp_amount: 0,\n      view_mode: '001',\n      roomtype: null,\n    };\n  }\n  return booking_store.ratePlanSelections[roomTypeId][ratePlanId];\n}\n\n/**\n * Generic setter for store keys when more specific helpers are unnecessary.\n */\nexport function modifyBookingStore(key: keyof BookingStore, value: any) {\n  booking_store[key] = value;\n}\n\n// -----------------------------------------------------------------------------\n// Pricing & Validation\n// -----------------------------------------------------------------------------\n/**\n * Computes total and prepayment amounts with an option to force gross calculation.\n */\nexport function calculateTotalCost(gross: boolean = false): { totalAmount: number; prePaymentAmount: number } {\n  let prePaymentAmount = 0;\n  let totalAmount = 0;\n  const calculateCost = (ratePlan: IRatePlanSelection, isPrePayment: boolean = false) => {\n    if (ratePlan.checkoutVariations.length > 0 && ratePlan.reserved > 0) {\n      if (isPrePayment) {\n        return ratePlan.reserved * ratePlan.ratePlan.pre_payment_amount || 0;\n      }\n      return ratePlan.checkoutVariations.reduce((sum, variation) => {\n        return sum + Number(variation[gross ? 'discounted_gross_amount' : 'discounted_amount']);\n      }, 0);\n    } else if (ratePlan.reserved > 0) {\n      const amount = isPrePayment ? ratePlan.ratePlan.pre_payment_amount ?? 0 : ratePlan.selected_variation[gross ? 'discounted_gross_amount' : 'discounted_amount'];\n      return ratePlan.reserved * (amount ?? 0);\n    }\n    return 0;\n  };\n  Object.values(booking_store.ratePlanSelections).forEach(value => {\n    Object.values(value).forEach(ratePlan => {\n      totalAmount += calculateCost(ratePlan);\n      prePaymentAmount += calculateCost(ratePlan, true);\n    });\n  });\n  return { totalAmount, prePaymentAmount };\n}\n\n/**\n * Returns the amount displayed for a rate plan, honoring overrides and nightly view.\n */\nfunction getRatePlanDisplayAmount(rateplanSelection: IRatePlanSelection, totalNights: number) {\n  if (rateplanSelection.is_amount_modified) {\n    return rateplanSelection.view_mode === '001' ? rateplanSelection.rp_amount : rateplanSelection.rp_amount * totalNights;\n  }\n  return rateplanSelection.selected_variation?.discounted_gross_amount ?? 0;\n}\n/**\n * Aggregates the total booking price combining all selected rate plans.\n */\nexport function getBookingTotalPrice(): number {\n  const dateDiff = calculateDaysBetweenDates(booking_store.bookingDraft.dates.checkIn.format('YYYY-MM-DD'), booking_store.bookingDraft.dates.checkOut.format('YYYY-MM-DD'));\n\n  let totalPrice = 0;\n\n  Object.values(booking_store.ratePlanSelections).forEach(roomTypeSelection => {\n    Object.values(roomTypeSelection).forEach(ratePlan => {\n      if (ratePlan.reserved === 0) {\n        return;\n      }\n      const rateAmount = getRatePlanDisplayAmount(ratePlan, dateDiff);\n      totalPrice += rateAmount;\n    });\n  });\n\n  return totalPrice;\n}\n/**\n * Validates that every reserved guest entry contains a non-empty name.\n */\nexport function validateBooking() {\n  return Object.values(booking_store.ratePlanSelections).every(roomTypeSelection =>\n    Object.values(roomTypeSelection).every(ratePlan => ratePlan.guestName.every(name => name.trim() !== '')),\n  );\n}\n/**\n * Counts the number of reserved rooms across all rate plans.\n */\nexport function calculateTotalRooms() {\n  return Object.values(booking_store.ratePlanSelections).reduce((total, value) => {\n    return (\n      total +\n      Object.values(value).reduce((innerTotal, ratePlan) => {\n        if (ratePlan.reserved === 0) {\n          return innerTotal;\n        }\n        return innerTotal + ratePlan.reserved;\n      }, 0)\n    );\n  }, 0);\n}\n\n/**\n * Clears all reserved rooms and resets per-rate-plan metadata.\n */\nexport function resetReserved(): void {\n  const updatedSelections = Object.entries(booking_store.ratePlanSelections).reduce((acc, [roomTypeId, ratePlans]) => {\n    const roomType = booking_store.roomTypes.find(rt => rt.id.toString() === roomTypeId.toString());\n    acc[roomTypeId] = Object.entries(ratePlans).reduce((rpAcc, [ratePlanId, ratePlan]) => {\n      const initialInventory = roomType?.inventory ?? ratePlan.roomtype?.inventory ?? ratePlan.visibleInventory;\n      rpAcc[ratePlanId] = {\n        ...ratePlan,\n        reserved: 0,\n        guest: null,\n        guestName: [],\n        checkoutVariations: [],\n        checkoutBedSelection: [],\n        checkoutSmokingSelection: [],\n        visibleInventory: initialInventory ?? 0,\n      };\n      return rpAcc;\n    }, {} as any);\n    return acc;\n  }, {} as any);\n  booking_store.ratePlanSelections = { ...updatedSelections };\n}\n\n/**\n * Flags whether the booked-by guest fields were manually edited (for UX hints elsewhere).\n */\nexport function setBookedByGuestManualEditState(isEdited: boolean) {\n  booking_store.bookedByGuestManuallyEdited = isEdited;\n}\n\n/**\n * Returns a flat array of each reserved room along with its guest/context.\n */\nexport function getReservedRooms(): ReservedRoomSelection[] {\n  const reservedRooms: ReservedRoomSelection[] = [];\n  Object.entries(booking_store.ratePlanSelections).forEach(([roomTypeId, ratePlans]) => {\n    Object.entries(ratePlans).forEach(([ratePlanId, ratePlanSelection]) => {\n      if (!ratePlanSelection.reserved) {\n        return;\n      }\n      const guests = ratePlanSelection.guest ?? [];\n      for (let reservationIndex = 0; reservationIndex < ratePlanSelection.reserved; reservationIndex++) {\n        reservedRooms.push({\n          roomTypeId: Number(roomTypeId),\n          ratePlanId: Number(ratePlanId),\n          reservationIndex,\n          guest: guests[reservationIndex] ?? null,\n          ratePlanSelection,\n        });\n      }\n    });\n  });\n  return reservedRooms;\n}\n\nexport default booking_store;\n"],"version":3}