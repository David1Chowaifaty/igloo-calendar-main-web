{"file":"igl-bulk-block2.js","mappings":"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","names":["moment"],"sources":["src/components/igloo-calendar/igl-bulk-operations/igl-bulk-block/igl-bulk-block.css?tag=igl-bulk-block&encapsulation=scoped","src/components/igloo-calendar/igl-bulk-operations/igl-bulk-block/igl-bulk-block.tsx"],"sourcesContent":[":host {\n  display: flex;\n  flex-direction: column;\n  flex: 1 1 0%;\n  height: 100%;\n}\n\n.igl-bulk-block__form {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  min-height: 0;\n  gap: 1rem;\n  padding: 0 1.5rem;\n}\n\n.igl-bulk-block__action-row {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding-top: 0;\n  padding-bottom: 0.25rem;\n  color: var(--wa-color-neutral-60);\n}\n\n.igl-bulk-block__action-label {\n  margin: 0;\n  padding: 0;\n  color: inherit;\n}\n\n.igl-bulk-block__error {\n  margin: 0 0 0.5rem 0;\n  padding: 0;\n  color: var(--wa-color-danger-60, #d64545);\n  font-size: 0.85rem;\n  text-align: left;\n}\n\n.igl-bulk-block__roomtype-row,\n.igl-bulk-block__unit-row {\n  list-style: none;\n}\n.igl-bulk-block__roomtype-name {\n  margin-block: 0.5rem;\n}\n\n.igl-bulk-block__roomtype-choice,\n.igl-bulk-block__unit-choice {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.igl-bulk-block__roomtype-name {\n  text-align: left;\n}\n\n.igl-bulk-block__unit-row {\n  margin-left: 1rem;\n  /* padding-top: 0.5rem; */\n}\n\n.igl-bulk-block__unit-row--last {\n  padding-bottom: 0.25rem;\n}\n\n.igl-bulk-block__dates-table {\n  width: 100%;\n  border-collapse: collapse;\n}\n\n.igl-bulk-block__dates-header {\n  text-align: left;\n  font-weight: 600;\n}\n\n.igl-bulk-block__date-cell {\n  padding: 0 0.5rem 0.5rem 0;\n}\n\n.igl-bulk-block__date-action-cell {\n  padding-bottom: 0.5rem;\n}\n","import { BookingService } from '@/services/booking-service/booking.service';\nimport calendar_data from '@/stores/calendar-data';\nimport { ReloadInterceptor } from '@/utils/ReloadInterceptor';\nimport { Component, Event, EventEmitter, Fragment, h, Prop, State } from '@stencil/core';\nimport moment, { Moment } from 'moment';\nimport { z, ZodError } from 'zod';\nimport { IToast } from '@components/ui/ir-toast/toast';\n// import calendar_dates from '@/stores/calendar-dates.store';\nimport locales from '@/stores/locales.store';\nexport type RoomStatus = 'open' | 'closed';\nexport type SelectedRooms = {\n  id: string | number;\n  result: RoomStatus;\n};\n\n@Component({\n  tag: 'igl-bulk-block',\n  styleUrls: ['igl-bulk-block.css'],\n  scoped: true,\n})\nexport class IglBulkBlock {\n  @Prop() formId: string;\n  @Prop() maxDatesLength = 8;\n  @Prop() property_id: number;\n\n  @State() selectedRoomTypes: Map<string | number, SelectedRooms[]> = new Map();\n  @State() selectedUnit: {\n    roomtype_id: number;\n    unit_id: number;\n  } | null = null;\n  @State() errors: 'dates' | 'rooms';\n  @State() blockState: 'block' | 'unblock' = 'block';\n  @State() dates: {\n    from: Moment | null;\n    to: Moment | null;\n  }[] = [{ from: null, to: null }];\n\n  @Event() closeDrawer: EventEmitter<null>;\n  @Event() toast: EventEmitter<IToast>;\n  @Event() loadingChanged: EventEmitter<boolean>;\n\n  private sidebar: HTMLIrSidebarElement;\n  private dateRefs: { from?: HTMLIrDatePickerElement; to?: HTMLIrDatePickerElement }[] = [];\n  private reloadInterceptor: ReloadInterceptor;\n  private minDate = moment().format('YYYY-MM-DD');\n  private bookingService = new BookingService();\n\n  private datesSchema = z.array(\n    z.object({\n      from: z\n        .any()\n        .refine((val): val is Moment => moment.isMoment(val), {\n          message: \"Invalid 'from' date; expected a Moment object.\",\n        })\n        .transform((val: Moment) => val.format('YYYY-MM-DD')),\n      to: z\n        .any()\n        .refine((val): val is Moment => moment.isMoment(val), {\n          message: \"Invalid 'to' date; expected a Moment object.\",\n        })\n        .transform((val: Moment) => val.format('YYYY-MM-DD')),\n    }),\n  );\n\n  private unitSections: HTMLElement;\n  private datesSections: HTMLTableElement;\n\n  componentDidLoad() {\n    this.reloadInterceptor = new ReloadInterceptor({ autoActivate: false });\n    this.sidebar = document.querySelector('ir-sidebar') as HTMLIrSidebarElement;\n  }\n\n  disconnectedCallback() {\n    this.reloadInterceptor.deactivate();\n  }\n\n  private async addBlockDates() {\n    try {\n      this.errors = null;\n      this.loadingChanged.emit(true);\n      const periods = this.datesSchema.parse(this.dates);\n      if (!this.selectedUnit) {\n        this.unitSections.scrollIntoView({ behavior: 'smooth', block: 'center' });\n        this.errors = 'rooms';\n        return;\n      }\n      if (this.blockState === 'block') {\n        await this.bookingService.blockAvailabilityForBrackets({\n          unit_id: this.selectedUnit?.unit_id,\n          description: '',\n          property_id: calendar_data.property.id,\n          block_status_code: '002',\n          brackets: periods.map(p => ({\n            from_date: p.from,\n            to_date: p.to,\n          })),\n        });\n      } else {\n        await this.bookingService.unBlockUnitByPeriod({\n          unit_id: this.selectedUnit?.unit_id,\n          from_date: periods[0].from,\n          to_date: periods[0].to,\n        });\n      }\n      this.activate();\n      this.deactivate();\n      this.toast.emit({\n        type: 'success',\n        title: locales.entries.Lcz_RequestSubmittedSuccessfully,\n        description: '',\n      });\n      this.loadingChanged.emit(false);\n      this.closeDrawer.emit();\n    } catch (error) {\n      console.log(error);\n      if (error instanceof ZodError) {\n        this.datesSections.scrollIntoView({ behavior: 'smooth', block: 'center' });\n        this.errors = 'dates';\n      }\n    } finally {\n      this.loadingChanged.emit(false);\n    }\n  }\n\n  private activate() {\n    this.reloadInterceptor.activate();\n    if (this.sidebar) this.sidebar.preventClose = true;\n  }\n\n  private deactivate() {\n    this.reloadInterceptor.deactivate();\n    if (this.sidebar) this.sidebar.preventClose = false;\n  }\n\n  private handleDateChange({ index, date, key }: { index: number; date: Moment; key: 'from' | 'to' }) {\n    // 1) clone and set the new date\n    const dates = [...this.dates];\n    dates[index] = { ...dates[index], [key]: date };\n\n    // 1a) if they just changed the \"from\", always clear that row's \"to\"\n    if (key === 'from' && dates[index].to?.isBefore(date, 'dates')) {\n      dates[index].to = null;\n    }\n\n    // 2) clear any subsequent rows whose \"from\" is on or before the changed date\n    for (let i = index + 1; i < dates.length; i++) {\n      const rowFrom = dates[i]?.from;\n      if (rowFrom && rowFrom.isSameOrBefore(date, 'day')) {\n        dates[i] = { from: null, to: null };\n      }\n    }\n\n    // 3) commit\n    this.dates = dates;\n\n    // 4) open the appropriate picker\n    setTimeout(() => {\n      if (key === 'from') {\n        this.dateRefs[index]?.to.openDatePicker();\n      } else {\n        const nextFrom = dates.findIndex(d => d.from === null);\n        if (nextFrom > -1) {\n          this.dateRefs[nextFrom]?.from.openDatePicker();\n        }\n      }\n    }, 100);\n  }\n\n  private addDateRow() {\n    const last_dates = this.dates[this.dates.length - 1];\n    if (!last_dates.from || !last_dates.to) {\n      this.errors = 'dates';\n      return;\n    }\n    this.errors = null;\n    this.dates = [...this.dates, { from: null, to: null }];\n    setTimeout(() => {\n      this.dateRefs[this.dates.length - 1].to?.scrollIntoView({ behavior: 'smooth', block: 'center' });\n    }, 100);\n  }\n\n  render() {\n    return (\n      <form\n        id={this.formId}\n        class=\"igl-bulk-block__form\"\n        onSubmit={e => {\n          e.preventDefault();\n          this.addBlockDates();\n        }}\n      >\n        {/* <div class=\"igl-bulk-block__action-row\">\n          <p class=\"igl-bulk-block__action-label\">Select the unit to</p>\n          <ir-select\n            showFirstOption={false}\n            selectedValue={this.blockState}\n            data={[\n              { text: 'Block', value: 'block' },\n              { text: 'Unblock', value: 'unblock' },\n            ]}\n            onSelectChange={e => {\n              this.blockState = e.detail;\n            }}\n          ></ir-select>\n        </div> */}\n        <wa-radio-group size=\"small\" label=\"Block or unblock a unit\" orientation=\"horizontal\" name=\"action\">\n          <wa-radio style={{ flex: '1 1 0%' }} appearance=\"button\" value=\"block\">\n            Block\n          </wa-radio>\n          <wa-radio style={{ flex: '1 1 0%' }} appearance=\"button\" value=\"unblock\">\n            Unblock\n          </wa-radio>\n        </wa-radio-group>\n        <div>\n          {this.errors === 'rooms' && (\n            <p class=\"igl-bulk-block__error\">{calendar_data.is_vacation_rental ? locales.entries.Lcz_PlzSelectOneListing : locales.entries.Lcz_PlzSelectOneUnit}</p>\n          )}\n          <wa-radio-group\n            name=\"unit\"\n            ref={el => (this.unitSections = el)}\n            onchange={e => {\n              const [roomtypeId, unitId] = (e.target as any).value?.toString().split('-');\n              this.selectedUnit = {\n                roomtype_id: roomtypeId,\n                unit_id: unitId,\n              };\n            }}\n          >\n            {calendar_data.roomsInfo.map(roomType => {\n              return (\n                <Fragment>\n                  <div key={`roomTypeRow-${roomType.id}`} class=\"igl-bulk-block__roomtype-row\">\n                    <div class=\"igl-bulk-block__roomtype-choice\">\n                      <span class=\"igl-bulk-block__roomtype-name\">{roomType.name}</span>\n                    </div>\n                  </div>\n                  {roomType.physicalrooms.map((room, j) => {\n                    const rowStyle = j === roomType.physicalrooms.length - 1 ? 'igl-bulk-block__unit-row--last' : '';\n                    return (\n                      <div key={`physicalRoom-${room.id}-${j}`} class={`igl-bulk-block__unit-row ${rowStyle}`}>\n                        <div class=\"igl-bulk-block__unit-choice\">\n                          <wa-radio value={`${roomType.id}-${room.id}`} data-roomtype={roomType.id} checked={this.selectedUnit?.unit_id === room.id}>\n                            {room.name}\n                          </wa-radio>\n                        </div>\n                      </div>\n                    );\n                  })}\n                </Fragment>\n              );\n            })}\n          </wa-radio-group>\n        </div>\n        {/* Dates */}\n        <table class=\"igl-bulk-block__dates-table\" ref={el => (this.datesSections = el)}>\n          <thead>\n            <tr>\n              <th class=\"igl-bulk-block__dates-header\">{locales.entries.Lcz_From}</th>\n              <th class=\"igl-bulk-block__dates-header\">{locales.entries.Lcz_ToExclusive}</th>\n              <td>\n                {this.dates.length !== this.maxDatesLength && this.blockState === 'block' && (\n                  <ir-custom-button\n                    appearance=\"plain\"\n                    variant=\"neutral\"\n                    onClickHandler={() => {\n                      this.addDateRow();\n                    }}\n                  >\n                    <wa-icon name=\"plus\" style={{ fontSize: '1.2rem' }}></wa-icon>\n                  </ir-custom-button>\n                )}\n              </td>\n            </tr>\n          </thead>\n          <tbody>\n            {this.dates.map((d, i) => {\n              if (!this.dateRefs[i]) {\n                this.dateRefs[i] = {};\n              }\n              const fromDateMinDate = i > 0 ? this.dates[i - 1]?.to.clone().add(1, 'days')?.format('YYYY-MM-DD') ?? this.minDate : this.minDate;\n              const toDateMinDate = this.dates[i].from ? this.dates[i]?.from.clone().add(1, 'days')?.format('YYYY-MM-DD') : this.minDate;\n              return (\n                <tr key={`date_${i}`}>\n                  <td class=\"igl-bulk-block__date-cell\">\n                    <ir-custom-date-picker\n                      ref={el => {\n                        this.dateRefs[i].from = el;\n                      }}\n                      forceDestroyOnUpdate\n                      minDate={fromDateMinDate}\n                      data-testid=\"pickup_arrival_date\"\n                      date={d.from?.format('YYYY-MM-DD')}\n                      emitEmptyDate={true}\n                      aria-invalid={String(this.errors === 'dates' && !d.from)}\n                      onDateChanged={evt => {\n                        evt.stopImmediatePropagation();\n                        evt.stopPropagation();\n                        this.handleDateChange({ index: i, date: evt.detail.start, key: 'from' });\n                      }}\n                      onDatePickerFocus={e => {\n                        e.stopImmediatePropagation();\n                        e.stopPropagation();\n                        if (i === 0) {\n                          return;\n                        }\n                        const index = this.dates.findIndex(d => !d.from || !d.to);\n\n                        if (!this.dates[index]?.from) {\n                          this.dateRefs[index]?.from.openDatePicker();\n                          return;\n                        }\n                        if (!this.dates[index]?.to) {\n                          this.dateRefs[index].to.openDatePicker();\n                        }\n                      }}\n                    ></ir-custom-date-picker>\n                  </td>\n                  <td class=\"igl-bulk-block__date-cell\">\n                    <ir-custom-date-picker\n                      forceDestroyOnUpdate\n                      disabled={!d.from}\n                      ref={el => {\n                        this.dateRefs[i].to = el;\n                      }}\n                      data-testid=\"pickup_arrival_date\"\n                      date={d.to?.format('YYYY-MM-DD')}\n                      emitEmptyDate={true}\n                      minDate={toDateMinDate}\n                      aria-invalid={String(this.errors === 'dates' && !d.to)}\n                      onDateChanged={evt => {\n                        evt.stopImmediatePropagation();\n                        evt.stopPropagation();\n                        this.handleDateChange({ index: i, date: evt.detail.start, key: 'to' });\n                      }}\n                      maxDate={d.from ? moment(d.from).add(3, 'months').format('YYYY-MM-DD') : undefined}\n                      onDatePickerFocus={e => {\n                        e.stopImmediatePropagation();\n                        e.stopPropagation();\n                        const index = this.dates.findIndex(d => !d.from || !d.to);\n\n                        if (!this.dates[index]?.from) {\n                          this.dateRefs[index]?.from?.openDatePicker();\n                          return;\n                        }\n                        if (!this.dates[index]?.to) {\n                          this.dateRefs[index].to.openDatePicker();\n                        }\n                      }}\n                    ></ir-custom-date-picker>\n                  </td>\n                  {i > 0 && (\n                    <td class=\"igl-bulk-block__date-action-cell\">\n                      <ir-custom-button\n                        appearance=\"plain\"\n                        variant=\"neutral\"\n                        onClickHandler={() => {\n                          this.dates = this.dates.filter((_, j) => j !== i);\n                        }}\n                      >\n                        <wa-icon name=\"minus\" style={{ fontSize: '1.2rem' }}></wa-icon>\n                      </ir-custom-button>\n                    </td>\n                  )}\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n\n        {/*  <div class={'sheet-footer'}>\n           <ir-button text={locales.entries.Lcz_Cancel} btn_color=\"secondary\" class={'flex-fill'} onClickHandler={() => this.closeDrawer.emit(null)}></ir-button>\n          <ir-button isLoading={this.isLoading} text={locales.entries.Lcz_Confirm} btn_type=\"submit\" class=\"flex-fill\"></ir-button>\n        </div> */}\n      </form>\n    );\n  }\n}\n"],"version":3}