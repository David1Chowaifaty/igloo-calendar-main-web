{"file":"ir-unit-tag2.js","mappings":"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","names":[],"sources":["src/components/ir-unit-tag/ir-unit-tag.css?tag=ir-unit-tag&encapsulation=scoped","src/components/ir-unit-tag/ir-unit-tag.tsx"],"sourcesContent":[":host {\n  display: inline-flex;\n  box-sizing: border-box;\n  height: fit-content;\n  width: fit-content;\n  padding: 0;\n  margin: 0;\n}\n.unit-tag__content {\n  max-width: 50px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  box-sizing: border-box;\n}\n.unit-tag__el {\n  height: 1.4rem;\n  overflow: hidden;\n}\n.unit-tag__el::part(base) {\n  padding-top: 0;\n  padding-bottom: 0;\n  height: fit-content;\n  box-sizing: border-box;\n  height: fit-content;\n}\n","import { Component, Fragment, Prop, State, Watch, h } from '@stencil/core';\nimport { v4 } from 'uuid';\n\n@Component({\n  tag: 'ir-unit-tag',\n  styleUrls: ['ir-unit-tag.css'],\n  scoped: true,\n})\nexport class IrUnitTag {\n  @Prop() unit: string;\n\n  @State() showTooltip = false;\n\n  private _id = v4();\n  private resizeObserver?: ResizeObserver;\n  private contentElement?: HTMLSpanElement;\n  private measurementFrame?: number;\n  private setContentRef = (el?: Element | null) => {\n    if (this.resizeObserver) {\n      this.resizeObserver.disconnect();\n    }\n\n    this.contentElement = (el as HTMLSpanElement) || undefined;\n\n    if (!this.contentElement) {\n      return;\n    }\n\n    this.attachResizeObserver();\n    this.scheduleTooltipUpdate();\n  };\n\n  componentDidLoad() {\n    this.attachResizeObserver();\n    this.scheduleTooltipUpdate();\n  }\n\n  disconnectedCallback() {\n    this.resizeObserver?.disconnect();\n    if (this.measurementFrame) {\n      cancelAnimationFrame(this.measurementFrame);\n      this.measurementFrame = undefined;\n    }\n  }\n\n  @Watch('unit')\n  onUnitChange() {\n    this.scheduleTooltipUpdate();\n  }\n\n  private attachResizeObserver() {\n    if (typeof window === 'undefined' || !this.contentElement || typeof ResizeObserver === 'undefined') {\n      return;\n    }\n\n    if (!this.resizeObserver) {\n      this.resizeObserver = new ResizeObserver(() => this.scheduleTooltipUpdate());\n    }\n\n    this.resizeObserver.observe(this.contentElement);\n  }\n\n  private scheduleTooltipUpdate() {\n    if (typeof window === 'undefined') {\n      return;\n    }\n\n    if (this.measurementFrame) {\n      cancelAnimationFrame(this.measurementFrame);\n    }\n\n    this.measurementFrame = requestAnimationFrame(() => {\n      this.measurementFrame = undefined;\n      this.updateTooltipState();\n    });\n  }\n\n  private updateTooltipState() {\n    if (typeof window === 'undefined') {\n      return;\n    }\n\n    const content = this.contentElement;\n\n    if (!content || !this.unit) {\n      if (this.showTooltip) {\n        this.showTooltip = false;\n      }\n      return;\n    }\n\n    const shouldShow = content.scrollWidth > content.clientWidth;\n    if (shouldShow !== this.showTooltip) {\n      this.showTooltip = shouldShow;\n    }\n  }\n\n  render() {\n    return (\n      <Fragment>\n        {this.showTooltip && <wa-tooltip for={this._id}>{this.unit}</wa-tooltip>}\n        <wa-tag id={this._id} class=\"unit-tag__el\" size=\"small\" appearance=\"filled\" variant=\"brand\">\n          <span class=\"unit-tag__content\" ref={this.setContentRef}>\n            {this.unit}\n          </span>\n        </wa-tag>\n      </Fragment>\n    );\n  }\n}\n"],"version":3}