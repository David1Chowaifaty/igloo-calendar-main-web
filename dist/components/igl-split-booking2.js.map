{"file":"igl-split-booking2.js","mappings":"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","names":["moment"],"sources":["src/components/igloo-calendar/igl-split-booking/types.ts","src/components/igloo-calendar/igl-split-booking/igl-split-booking.css?tag=igl-split-booking&encapsulation=scoped","src/common/sheet.css?tag=igl-split-booking&encapsulation=scoped","src/components/igloo-calendar/igl-split-booking/igl-split-booking.tsx"],"sourcesContent":["import { Moment } from 'moment';\nimport { z } from 'zod';\n\nexport type RoomDates = { from_date: Moment; to_date: Moment };\n\nexport const SelectedUnitSchema = z.object({\n  roomtype_id: z.coerce.number(),\n  unit_id: z.coerce.number(),\n  rateplan_id: z.coerce.number(),\n});\n\nexport type SelectedUnit = z.infer<typeof SelectedUnitSchema>;\n",":host {\n  display: block;\n}\n:host {\n  display: flex;\n  flex-direction: column;\n  flex: 1 1 0%;\n  height: 100%;\n}\n.bulk-sheet-container {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  min-height: 0;\n  gap: 1rem;\n}\n.animated-container {\n  transition: all 0.5s ease;\n}\n.physical-room {\n  margin-left: 1rem !important;\n  /* padding-top: 0.5rem; */\n}\n/* target only the last <td> in each .physical-room row */\n.physical-room > td:last-child {\n  padding-left: 1rem; /* or whatever indent you like */\n}\n.room-type-list {\n  padding: 0;\n  margin: 0;\n}\n\n.room-type-list > li,\n.physical-room,\n.room-type-row {\n  list-style: none;\n}\n",":host {\n  height: 100%;\n}\n.sheet-container {\n  display: flex !important;\n  flex-direction: column !important;\n  background: white;\n  height: 100vh;\n  gap: 1rem;\n  z-index: 1000;\n}\n.sheet-container {\n  height: -webkit-fill-available;\n  height: 100vh;\n  height: 100dvh;\n}\n\n/* @supports (height: 100svh) {\n  .sheet-container {\n    height: 100svh;\n  }\n} */\n.sheet-footer {\n  position: sticky;\n  bottom: 0;\n  z-index: 20;\n  background: white;\n  border-top: 1px solid #e4e5ec;\n  display: flex;\n  flex-direction: column;\n  padding: 1rem;\n  gap: 0.5rem;\n}\n.sheet-header {\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  background: white;\n}\n.sheet-body {\n  flex: 1 1 0%;\n}\n/* @media (max-width: 767px) {\n  .sheet-footer {\n    bottom: env(safe-area-inset-bottom);\n  }\n} */\n@media (min-width: 768px) {\n  .sheet-footer {\n    flex-direction: row;\n    align-items: center;\n  }\n}\n","import { Booking, Room } from '@/models/booking.dto';\nimport { PropertyRoomType } from '@/models/IBooking';\nimport { BookingService } from '@/services/booking-service/booking.service';\nimport { resetBookingStore } from '@/stores/booking.store';\nimport calendar_data from '@/stores/calendar-data';\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\nimport locales from '@/stores/locales.store';\nimport { checkMealPlan, SelectOption } from '@/utils/utils';\nimport { Component, Event, EventEmitter, Fragment, Prop, State, h } from '@stencil/core';\nimport moment from 'moment';\nimport { ZodError } from 'zod';\nimport { RoomDates, SelectedUnit, SelectedUnitSchema } from './types';\n\n@Component({\n  tag: 'igl-split-booking',\n  styleUrls: ['igl-split-booking.css', '../../../common/sheet.css'],\n  scoped: true,\n})\nexport class IglSplitBooking {\n  @Prop() booking: Booking;\n  @Prop() identifier: Room['identifier'];\n\n  @State() selectedDates: RoomDates;\n  @State() room: Room;\n  @State() roomTypes: PropertyRoomType[] = [];\n  @State() selectedUnit: Partial<SelectedUnit> = {};\n  @State() isLoading: boolean;\n  @State() errors: Record<string, boolean> | null;\n  @State() mealPlanOptions: SelectOption[] | null = null;\n\n  @Event() closeModal: EventEmitter<null>;\n\n  private defaultDates: RoomDates;\n  private bookingService = new BookingService();\n\n  componentWillLoad() {\n    this.room = this.getRoom();\n    this.defaultDates = { ...this.generateDates(this.room) };\n    this.selectedDates = { ...this.defaultDates };\n    console.log(this.booking);\n  }\n\n  private getRoom() {\n    if (!this.booking) {\n      throw new Error('Missing booking');\n    }\n    if (!this.identifier) {\n      throw new Error('Missing Identifier');\n    }\n    const room = this.booking.rooms.find(r => r.identifier === this.identifier);\n    if (!room) {\n      throw new Error(`Couldn't find room with identifier ${this.identifier}`);\n    }\n    return room;\n  }\n\n  private generateDates(room: Room): RoomDates {\n    let MFromDate = moment(room.from_date, 'YYYY-MM-DD');\n    const MToDate = moment(room.to_date, 'YYYY-MM-DD').add(-1, 'days');\n    const today = moment();\n    if (MFromDate.isBefore(today)) {\n      MFromDate = today.clone();\n    }\n    if (MFromDate.isSame(today)) {\n      return { from_date: MFromDate, to_date: MToDate };\n    }\n    if (MFromDate.isSameOrAfter(today)) {\n      return { from_date: MFromDate.clone().add(1, 'days'), to_date: MToDate };\n    }\n    return { from_date: today.clone().add(1, 'days'), to_date: MToDate };\n  }\n\n  private async checkBookingAvailability() {\n    resetBookingStore();\n    const from_date = this.selectedDates.from_date.format('YYYY-MM-DD');\n    const to_date = this.selectedDates.to_date.format('YYYY-MM-DD');\n\n    const is_in_agent_mode = this.booking.agent !== null;\n    try {\n      const data = await this.bookingService.getBookingAvailability({\n        from_date,\n        to_date,\n        propertyid: this.booking.property.id,\n        adultChildCount: {\n          adult: 1,\n          child: 0,\n        },\n        language: 'en',\n        room_type_ids: [],\n        currency: this.booking.currency,\n        agent_id: is_in_agent_mode ? this.booking.agent.id : null,\n        is_in_agent_mode,\n        room_type_ids_to_update: [],\n      });\n      this.roomTypes = data as any as PropertyRoomType[];\n    } catch (error) {\n      console.error('Error initializing booking availability:', error);\n    }\n  }\n\n  private async doReservation() {\n    try {\n      this.isLoading = true;\n      this.errors = null;\n      const selectedUnit = SelectedUnitSchema.parse(this.selectedUnit);\n      const oldRooms = this.booking.rooms.filter(r => r.identifier !== this.identifier);\n      const canCheckIn = this.room.in_out?.code === '001' ? (moment().isBefore(this.selectedDates.from_date) ? false : true) : false;\n      let rooms = [\n        ...oldRooms,\n        {\n          ...this.room,\n          from_date: this.room.from_date,\n          to_date: this.selectedDates.from_date.format('YYYY-MM-DD'),\n          days: this.room.days.filter(r => moment(r.date, 'YYYY-MM-DD').isBefore(this.selectedDates.from_date, 'dates')),\n          departure_time: null,\n        },\n        {\n          ...this.room,\n          identifier: null,\n          in_out: canCheckIn\n            ? this.room.in_out\n            : {\n                code: '000',\n              },\n          check_in: canCheckIn,\n          assigned_units_pool: null,\n          parent_room_identifier: this.room.identifier,\n          is_split: true,\n          roomtype: {\n            id: selectedUnit.roomtype_id,\n          },\n          rateplan: {\n            id: selectedUnit.rateplan_id || this.room.rateplan.id,\n          },\n          departure_time: this.room.departure_time,\n          unit: { id: selectedUnit.unit_id },\n          from_date: this.selectedDates.from_date.format('YYYY-MM-DD'),\n          // to_date: this.selectedDates.to_date.format('YYYY-MM-DD'),\n          days: this.room.days.filter(r => moment(r.date, 'YYYY-MM-DD').isSameOrAfter(this.selectedDates.from_date, 'dates')),\n        },\n      ];\n      const booking = {\n        assign_units: true,\n        is_pms: true,\n        is_direct: this.booking.is_direct,\n        is_backend: true,\n        is_in_loyalty_mode: this.booking.is_in_loyalty_mode,\n        promo_key: this.booking.promo_key,\n        extras: this.booking.extras,\n        agent: this.booking.agent,\n        booking: {\n          from_date: this.booking.from_date,\n          to_date: this.booking.to_date,\n          remark: this.booking.remark,\n          booking_nbr: this.booking.booking_nbr,\n          property: this.booking.property,\n          booked_on: this.booking.booked_on,\n          source: this.booking.source,\n          rooms,\n          currency: this.booking.currency,\n          arrival: this.booking.arrival,\n          guest: this.booking.guest,\n        },\n        pickup_info: this.booking.pickup_info,\n      };\n      console.log(booking);\n      await this.bookingService.doReservation(booking);\n      this.closeModal.emit(null);\n    } catch (error) {\n      const err: Record<string, boolean> = {};\n      if (error instanceof ZodError) {\n        console.error(error);\n        error.issues.forEach(i => {\n          err[i.path[0]] = true;\n        });\n        this.errors = { ...err };\n      }\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  private updateSelectedUnit(params: Partial<SelectedUnit>) {\n    const merged: Partial<SelectedUnit> = { ...this.selectedUnit, ...params };\n    const roomTypesSource = calendar_data?.property?.roomtypes;\n    const mealPlanResult = checkMealPlan({\n      rateplan_id: this.room.rateplan.id.toString(),\n      roomTypeId: merged?.roomtype_id,\n      roomTypes: roomTypesSource,\n    });\n\n    const hasExplicitRateplanUpdate = Object.prototype.hasOwnProperty.call(params, 'rateplan_id');\n\n    if (Array.isArray(mealPlanResult)) {\n      this.mealPlanOptions = mealPlanResult;\n      if (!hasExplicitRateplanUpdate) {\n        delete merged.rateplan_id;\n      }\n    } else {\n      this.mealPlanOptions = null;\n      if (!hasExplicitRateplanUpdate) {\n        if (mealPlanResult) {\n          merged.rateplan_id = Number(mealPlanResult.value);\n        } else {\n          delete merged.rateplan_id;\n        }\n      }\n    }\n\n    this.selectedUnit = merged;\n  }\n\n  render() {\n    return (\n      <form\n        onSubmit={e => {\n          e.preventDefault();\n          this.doReservation();\n        }}\n        class=\"sheet-container\"\n      >\n        <ir-title class=\"px-1 sheet-header mb-0\" displayContext=\"sidebar\" onCloseSideBar={() => this.closeModal.emit()} label={`Split unit ${this.room?.unit['name']}`}></ir-title>\n        <section class=\"px-1 sheet-body\">\n          <div class=\"d-flex align-items-center\" style={{ gap: '0.5rem' }}>\n            <div>\n              <ir-date-view from_date={this.room.from_date} to_date={this.room.to_date} showDateDifference={false}></ir-date-view>\n            </div>\n            <p class=\"m-0 p-0\">\n              {this.room.rateplan.short_name} {this.room.rateplan.is_non_refundable ? locales.entries.Lcz_NonRefundable : ''}\n            </p>\n          </div>\n          <div class={'d-flex align-items-center mt-1'} style={{ gap: '0.5rem' }}>\n            <span>From:</span>\n            <ir-date-picker\n              data-testid=\"pickup_arrival_date\"\n              date={this.selectedDates?.from_date?.format('YYYY-MM-DD')}\n              maxDate={this.defaultDates?.to_date.format('YYYY-MM-DD')}\n              minDate={this.defaultDates?.from_date.format('YYYY-MM-DD')}\n              emitEmptyDate={true}\n              // aria-invalid={this.errors?.arrival_date && !this.pickupData.arrival_date ? 'true' : 'false'}\n              onDateChanged={evt => {\n                this.selectedDates = {\n                  ...this.selectedDates,\n                  from_date: evt.detail.start,\n                };\n              }}\n            >\n              <input\n                type=\"text\"\n                slot=\"trigger\"\n                value={this.selectedDates.from_date ? this.selectedDates.from_date.format('MMM DD, YYYY') : null}\n                class={`form-control input-sm  text-center`}\n                style={{ width: '120px' }}\n              ></input>\n            </ir-date-picker>\n            <ir-button isLoading={isRequestPending('/Check_Availability')} text=\"Check available units\" size=\"sm\" onClick={() => this.checkBookingAvailability()}></ir-button>\n          </div>\n          {this.errors?.roomtype_id && <p class=\"text-danger text-left mt-2\">Please select a room</p>}\n          <ul class=\"room-type-list mt-2\">\n            {this.roomTypes?.map(roomType => {\n              if (!roomType.is_available_to_book) {\n                return null;\n              }\n              const units = (() => {\n                const unitMap = new Map<number, string>();\n                for (const rateplan of roomType.rateplans ?? []) {\n                  for (const unit of rateplan.assignable_units ?? []) {\n                    if (unit.Is_Fully_Available) {\n                      unitMap.set(unit.pr_id, unit.name);\n                    }\n                  }\n                }\n\n                return Array.from(unitMap, ([id, name]) => ({ id, name }));\n              })();\n              return (\n                <Fragment>\n                  <li key={`roomTypeRow-${roomType.id}`} class={`room-type-row`}>\n                    <div class={'d-flex choice-row'}>\n                      <span class=\"text-left room-type-name\">{roomType.name}</span>\n                    </div>\n                  </li>\n                  {units.map((room, j) => {\n                    const row_style = j === roomType.physicalrooms.length - 1 ? 'pb-1' : '';\n                    const showMealPlanSelect = this.selectedUnit?.unit_id === room.id && Array.isArray(this.mealPlanOptions) && this.mealPlanOptions.length > 0;\n                    return (\n                      <li key={`physicalRoom-${room.id}-${j}`} class={`physical-room ${row_style}`}>\n                        <div class={'d-flex choice-row align-items-center'} style={{ gap: '0.5rem' }}>\n                          <ir-radio\n                            class=\"pl-1\"\n                            name=\"unit\"\n                            checked={this.selectedUnit?.unit_id === room.id}\n                            onCheckChange={() =>\n                              this.updateSelectedUnit({\n                                roomtype_id: roomType.id,\n                                unit_id: room.id,\n                              })\n                            }\n                            label={room.name}\n                          ></ir-radio>\n                          {showMealPlanSelect && (\n                            <ir-select\n                              firstOption=\"Select a new rateplan...\"\n                              error={this.errors?.rateplan_id && !this.selectedUnit?.rateplan_id}\n                              onSelectChange={e => {\n                                const value = e.detail === null || e.detail === undefined || e.detail === '' ? undefined : Number(e.detail);\n                                this.updateSelectedUnit({\n                                  rateplan_id: value,\n                                });\n                              }}\n                              data={this.mealPlanOptions.map(e => ({ ...e, text: e.text + `${e.custom_text ? ' | ' : ''}${e.custom_text}` }))}\n                            ></ir-select>\n                            // <ir-dropdown\n                            //   onOptionChange={e => {\n                            //     this.updateSelectedUnit({\n                            //       rateplan_id: Number(e.detail.toString()),\n                            //     });\n                            //   }}\n                            //   style={{ '--ir-dropdown-menu-min-width': 'max-content' }}\n                            // >\n                            //   <button type=\"button\" class=\"btn btn-sm form-control pr-2 d-flex align-items-center\" style={{ minWidth: '200px' }} slot=\"trigger\">\n                            //     {this.selectedUnit?.rateplan_id ? this.mealPlanOptions.find(r => r.value === this.selectedUnit.rateplan_id.toString()).text : 'Choose a meal plan'}\n                            //   </button>\n                            //   {this.mealPlanOptions.map(o => (\n                            //     <ir-dropdown-item value={o.value}>\n                            //       <p class=\"m-0 p-0\">\n                            //         {o.text} {o.custom_text && <span class=\"m-0 p-0\">| {o.custom_text}</span>}\n                            //       </p>\n                            //     </ir-dropdown-item>\n                            //   ))}\n                            // </ir-dropdown>\n                          )}\n                        </div>\n                      </li>\n                    );\n                  })}\n                </Fragment>\n              );\n            })}\n          </ul>\n        </section>\n        <div class={'sheet-footer'}>\n          <ir-button text={locales.entries.Lcz_Cancel} btn_color=\"secondary\" class={'flex-fill'} onClickHandler={() => this.closeModal.emit(null)}></ir-button>\n          <ir-button isLoading={this.isLoading} text={locales.entries.Lcz_Confirm} btn_type=\"submit\" class=\"flex-fill\"></ir-button>\n        </div>\n      </form>\n    );\n  }\n}\n"],"version":3}