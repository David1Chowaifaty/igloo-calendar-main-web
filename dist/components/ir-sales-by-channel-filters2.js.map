{"file":"ir-sales-by-channel-filters2.js","mappings":";;;;;;;;;;;AAAA,MAAM,0BAA0B,GAAG,kDAAkD,CAAC;AACtF,sCAAe,0BAA0B;;MCS5B,uBAAuB;;;;;;IAUlC,iBAAiB;QACf,IAAI,CAAC,OAAO,qBAAQ,IAAI,CAAC,WAAW,CAAE,CAAC;QACvC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;KACvC;IAEO,YAAY,CAAC,MAAkC;QACrD,IAAI,CAAC,OAAO,mCAAQ,IAAI,CAAC,OAAO,GAAK,MAAM,CAAE,CAAC;KAC/C;IAED,MAAM;;QACJ,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC1B,QACE,yEACE,cAAc,EAAE,IAAI,CAAC,SAAS,EAC9B,eAAe,EAAE;gBACf,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aACtC,EACD,eAAe,EAAE;gBACf,IAAI,CAAC,OAAO,qBAAQ,IAAI,CAAC,WAAW,CAAE,CAAC;gBACvC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aACtC,IAED,iEAAU,KAAK,EAAC,mBAAmB,IACjC,8DAAO,OAAO,EAAC,OAAO,EAAC,KAAK,EAAC,UAAU,EAAC,KAAK,EAAE,EAAE,aAAa,EAAE,SAAS,EAAE,YAEnE,EACR,kEACE,aAAa,EAAE,MAAA,IAAI,CAAC,OAAO,0CAAE,SAAS,EACtC,QAAQ,EAAC,OAAO,EAChB,eAAe,EAAE,KAAK,EACtB,cAAc,EAAE,CAAC,IACf,IAAI,CAAC,YAAY,CAAC;gBAChB,SAAS,EAAE,CAAC,CAAC,MAAM;aACpB,CAAC,EAEJ,IAAI,EAAE;gBACJ,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAE;gBAChC,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAE;aACjC,GACU,CACJ,EACV,IAAI,CAAC,iBAAiB,CAAC,MAAM,GAAG,CAAC,KAChC,iEAAU,KAAK,EAAC,cAAc,IAC5B,8DAAO,OAAO,EAAC,OAAO,EAAC,KAAK,EAAC,UAAU,EAAC,KAAK,EAAE,EAAE,aAAa,EAAE,SAAS,EAAE,iBAEnE,EACR,sEACE,aAAa,EAAE,CAAA,MAAA,MAAA,IAAI,CAAC,OAAO,0CAAE,UAAU,0CAAE,MAAM,OAAK,MAAA,IAAI,CAAC,iBAAiB,0CAAE,MAAM,CAAA,GAAG,KAAK,GAAG,MAAA,MAAA,IAAI,CAAC,OAAO,0CAAE,UAAU,CAAC,CAAC,CAAC,0CAAE,QAAQ,EAAE,EACpI,cAAc,EAAE,CAAC;gBACf,MAAM,KAAK,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;gBAC7B,IAAI,KAAK,KAAK,KAAK,EAAE;oBACnB,IAAI,CAAC,YAAY,CAAC;wBAChB,UAAU,EAAE,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC;qBAClD,CAAC,CAAC;iBACJ;;oBACC,IAAI,CAAC,YAAY,CAAC;wBAChB,UAAU,EAAE,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC;qBACtF,CAAC,CAAC;aACN,EACD,OAAO,EAAE;gBACP,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE;gBAC9B,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,KAAK;oBAClC,KAAK,EAAE,CAAC,CAAC,IAAI;oBACb,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,QAAQ,EAAE;iBACvB,CAAC,CAAC;aACJ,GACc,CACR,CACZ,EACD,iEAAU,KAAK,EAAC,cAAc,IAC5B,8DAAO,OAAO,EAAC,QAAQ,EAAC,KAAK,EAAC,UAAU,EAAC,KAAK,EAAE,EAAE,aAAa,EAAE,SAAS,EAAE,sBAEpE,EACR,4DAAK,KAAK,EAAC,sCAAsC,EAAC,KAAK,EAAE,EAAE,GAAG,EAAE,QAAQ,EAAE,IACxE,kEACE,aAAa,EAAE,IAAI,CAAC,MAAM,EAC1B,cAAc,EAAE,CAAC;gBACf,MAAM,QAAQ,GAAG,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;gBAClC,MAAM,KAAK,GAAGA,KAAM,EAAE,CAAC;gBACvB,IAAI,CAAC,YAAY,CAAC;oBAChB,MAAM,EAAE,QAAQ;oBAChB,OAAO,EAAE,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC;oBACnC,SAAS,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC;iBAC7D,CAAC,CAAC;gBACH,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC;aACxB,EACD,QAAQ,EAAC,QAAQ;;YAEjB,WAAW,EAAC,KAAK,EACjB,IAAI,EAAE;gBACJ,EAAE,IAAI,EAAE,qBAAqB,EAAE,KAAK,EAAE,GAAG,EAAE;gBAC3C,EAAE,IAAI,EAAE,sBAAsB,EAAE,KAAK,EAAE,IAAI,EAAE;gBAC7C,EAAE,IAAI,EAAE,sBAAsB,EAAE,KAAK,EAAE,IAAI,EAAE;gBAC7C,EAAE,IAAI,EAAE,sBAAsB,EAAE,KAAK,EAAE,IAAI,EAAE;gBAC7C,EAAE,IAAI,EAAE,sBAAsB,EAAE,KAAK,EAAE,IAAI,EAAE;gBAC7C,EAAE,IAAI,EAAE,uBAAuB,EAAE,KAAK,EAAE,KAAK,EAAE;aAChD,GACU,EACb,0DAAG,KAAK,EAAC,qBAAqB,SAAO,EACrC,wEACE,kBAAkB,EAAE,CAAC;gBACnB,CAAC,CAAC,wBAAwB,EAAE,CAAC;gBAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,UAAU,EAAE,GAAG,CAAC,CAAC,MAAM,CAAC;gBAClD,IAAI,CAAC,YAAY,CAAC;oBAChB,SAAS,EAAE,QAAQ,CAAC,MAAM,CAAC,YAAY,CAAC;oBACxC,OAAO,EAAE,MAAM,CAAC,MAAM,CAAC,YAAY,CAAC;iBACrC,CAAC,CAAC;gBACH,IAAI,UAAU;oBAAE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;;aAEpC,EACD,QAAQ,EAAEA,KAAM,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,YAAY,CAAC,EACtD,MAAM,EAAEA,KAAM,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,YAAY,CAAC,EAClD,OAAO,EAAEA,KAAM,EAAE,CAAC,MAAM,CAAC,YAAY,CAAC,EACtC,WAAW,EAAE,KAAK,GACD,CACf,CACG,EACX,4DAAK,KAAK,EAAC,yDAAyD,EAAC,KAAK,EAAE,EAAE,GAAG,EAAE,QAAQ,EAAE,IAC3F,8DAAO,OAAO,EAAC,mBAAmB,EAAC,KAAK,EAAE,EAAE,aAAa,EAAE,SAAS,EAAE,iCAE9D,EACR,oEACE,OAAO,EAAE,MAAA,IAAI,CAAC,OAAO,0CAAE,qBAAqB,EAC5C,UAAU,EAAC,mBAAmB,EAC9B,aAAa,EAAE,CAAC;gBACd,CAAC,CAAC,wBAAwB,EAAE,CAAC;gBAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,IAAI,CAAC,YAAY,CAAC,EAAE,qBAAqB,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC;aACxD,GACY,CACX,CACW,EACnB;KACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":["moment"],"sources":["src/components/ir-sales-by-channel/ir-sales-by-channel-filters/ir-sales-by-channel-filters.css?tag=ir-sales-by-channel-filters&encapsulation=scoped","src/components/ir-sales-by-channel/ir-sales-by-channel-filters/ir-sales-by-channel-filters.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n","import { Component, Event, EventEmitter, h, Prop, State } from '@stencil/core';\nimport moment from 'moment';\nimport { ChannelSaleFilter } from '../types';\nimport { AllowedProperties } from '@/services/property.service';\n\n@Component({\n  tag: 'ir-sales-by-channel-filters',\n  styleUrl: 'ir-sales-by-channel-filters.css',\n  scoped: true,\n})\nexport class IrSalesByChannelFilters {\n  @Prop() isLoading: boolean;\n  @Prop() baseFilters: ChannelSaleFilter;\n  @Prop() allowedProperties: AllowedProperties;\n\n  @State() filters: ChannelSaleFilter;\n  @State() window: number;\n\n  @Event() applyFilters: EventEmitter<ChannelSaleFilter>;\n\n  componentWillLoad() {\n    this.filters = { ...this.baseFilters };\n    this.window = this.baseFilters.WINDOW;\n  }\n\n  private updateFilter(params: Partial<ChannelSaleFilter>) {\n    this.filters = { ...this.filters, ...params };\n  }\n\n  render() {\n    console.log(this.filters);\n    return (\n      <ir-filters-panel\n        isApplyLoading={this.isLoading}\n        onIrFilterApply={() => {\n          this.applyFilters.emit(this.filters);\n        }}\n        onIrFilterReset={() => {\n          this.filters = { ...this.baseFilters };\n          this.applyFilters.emit(this.filters);\n        }}\n      >\n        <fieldset class=\"pt-1 filter-group\">\n          <label htmlFor=\"rooms\" class=\"m-0 px-0\" style={{ paddingBottom: '0.25rem' }}>\n            Rooms\n          </label>\n          <ir-select\n            selectedValue={this.filters?.BOOK_CASE}\n            selectId=\"rooms\"\n            showFirstOption={false}\n            onSelectChange={e =>\n              this.updateFilter({\n                BOOK_CASE: e.detail,\n              })\n            }\n            data={[\n              { text: 'Booked', value: '001' },\n              { text: 'Stayed', value: '002' },\n            ]}\n          ></ir-select>\n        </fieldset>\n        {this.allowedProperties.length > 1 && (\n          <fieldset class=\"filter-group\">\n            <label htmlFor=\"rooms\" class=\"m-0 px-0\" style={{ paddingBottom: '0.25rem' }}>\n              Properties\n            </label>\n            <ir-m-combobox\n              defaultOption={this.filters?.LIST_AC_ID?.length === this.allowedProperties?.length ? 'all' : this.filters?.LIST_AC_ID[0]?.toString()}\n              onOptionChange={e => {\n                const value = e.detail.value;\n                if (value === 'all') {\n                  this.updateFilter({\n                    LIST_AC_ID: this.allowedProperties.map(p => p.id),\n                  });\n                } else\n                  this.updateFilter({\n                    LIST_AC_ID: this.allowedProperties.filter(e => e.id === Number(value)).map(p => p.id),\n                  });\n              }}\n              options={[\n                { label: 'All', value: 'all' },\n                ...this.allowedProperties.map(p => ({\n                  label: p.name,\n                  value: p.id.toString(),\n                })),\n              ]}\n            ></ir-m-combobox>\n          </fieldset>\n        )}\n        <fieldset class=\"filter-group\">\n          <label htmlFor=\"period\" class=\"px-0 m-0\" style={{ paddingBottom: '0.25rem' }}>\n            Selected period\n          </label>\n          <div class=\"d-flex flex-column date-filter-group\" style={{ gap: '0.5rem' }}>\n            <ir-select\n              selectedValue={this.window}\n              onSelectChange={e => {\n                const dateDiff = Number(e.detail);\n                const today = moment();\n                this.updateFilter({\n                  WINDOW: dateDiff,\n                  TO_DATE: today.format('YYYY-MM-DD'),\n                  FROM_DATE: today.add(-dateDiff, 'days').format('YYYY-MM-DD'),\n                });\n                this.window = e.detail;\n              }}\n              selectId=\"period\"\n              // showFirstOption={false}\n              firstOption=\"...\"\n              data={[\n                { text: 'For the past 7 days', value: '7' },\n                { text: 'For the past 14 days', value: '14' },\n                { text: 'For the past 30 days', value: '30' },\n                { text: 'For the past 60 days', value: '60' },\n                { text: 'For the past 90 days', value: '90' },\n                { text: 'For the past 365 days', value: '365' },\n              ]}\n            ></ir-select>\n            <p class=\"m-0 p-0 text-center\">Or</p>\n            <ir-range-picker\n              onDateRangeChanged={e => {\n                e.stopImmediatePropagation();\n                e.stopPropagation();\n                const { fromDate, toDate, wasFocused } = e.detail;\n                this.updateFilter({\n                  FROM_DATE: fromDate.format('YYYY-MM-DD'),\n                  TO_DATE: toDate.format('YYYY-MM-DD'),\n                });\n                if (wasFocused) this.window = null;\n                // this.dates = { from: fromDate, to: toDate };\n              }}\n              fromDate={moment(this.filters.FROM_DATE, 'YYYY-MM-DD')}\n              toDate={moment(this.filters.TO_DATE, 'YYYY-MM-DD')}\n              maxDate={moment().format('YYYY-MM-DD')}\n              withOverlay={false}\n            ></ir-range-picker>\n          </div>\n        </fieldset>\n        <div class=\"d-flex align-items-center mt-1 mb-2 compare-year-toggle\" style={{ gap: '0.5rem' }}>\n          <label htmlFor=\"compare-prev-year\" style={{ paddingBottom: '0.25rem' }}>\n            Compare with previous year\n          </label>\n          <ir-checkbox\n            checked={this.filters?.include_previous_year}\n            checkboxId=\"compare-prev-year\"\n            onCheckChange={e => {\n              e.stopImmediatePropagation();\n              e.stopPropagation();\n              this.updateFilter({ include_previous_year: e.detail });\n            }}\n          ></ir-checkbox>\n        </div>\n      </ir-filters-panel>\n    );\n  }\n}\n"],"version":3}