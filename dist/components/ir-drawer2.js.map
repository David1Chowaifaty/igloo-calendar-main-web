{"file":"ir-drawer2.js","mappings":"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","names":[],"sources":["src/utils/slot.ts","src/components/ir-drawer/ir-drawer.css?tag=ir-drawer&encapsulation=shadow","src/components/ir-drawer/ir-drawer.tsx"],"sourcesContent":["/**\n * SlotManager - A reusable service for managing slot state in Stencil components\n *\n * Usage:\n * 1. Create an instance in your component\n * 2. Initialize in componentWillLoad()\n * 3. Setup observers in componentDidLoad()\n * 4. Cleanup in disconnectedCallback()\n * 5. Check slot state using hasSlot()\n */\nexport class SlotManager {\n  private slotState = new Map<string, boolean>();\n  private slotObserver: MutationObserver | null = null;\n  private isInitialized = false;\n\n  constructor(private readonly hostElement: HTMLElement, private readonly slotNames: readonly string[], private readonly onStateChange?: () => void) {}\n\n  /**\n   * Initialize the slot state. Call this in componentWillLoad()\n   */\n  initialize(): void {\n    this.updateSlotState();\n    this.isInitialized = true;\n  }\n\n  /**\n   * Setup slot listeners and observers. Call this in componentDidLoad()\n   */\n  setupListeners(): void {\n    if (!this.isInitialized) {\n      console.warn('SlotManager: initialize() must be called before setupListeners()');\n      return;\n    }\n\n    // Listen to slotchange events\n    this.hostElement.addEventListener('slotchange', this.handleSlotChange);\n\n    // Use MutationObserver as a fallback for browsers that don't fire slotchange reliably\n    this.slotObserver = new MutationObserver(this.handleSlotChange);\n    this.slotObserver.observe(this.hostElement, {\n      childList: true,\n      subtree: true,\n      attributes: true,\n      attributeFilter: ['slot'],\n    });\n  }\n\n  /**\n   * Remove all listeners and cleanup. Call this in disconnectedCallback()\n   */\n  destroy(): void {\n    this.hostElement.removeEventListener('slotchange', this.handleSlotChange);\n    this.slotObserver?.disconnect();\n    this.slotObserver = null;\n    this.slotState.clear();\n    this.isInitialized = false;\n  }\n\n  /**\n   * Check if a specific slot has content\n   */\n  hasSlot(name: string): boolean {\n    return this.slotState.get(name) ?? false;\n  }\n\n  /**\n   * Get all slot states as a Map\n   */\n  getSlotState(): ReadonlyMap<string, boolean> {\n    return this.slotState;\n  }\n\n  /**\n   * Get all slot names that have content\n   */\n  getActiveSlots(): string[] {\n    return Array.from(this.slotState.entries())\n      .filter(([_, hasContent]) => hasContent)\n      .map(([name]) => name);\n  }\n\n  /**\n   * Manually trigger a slot state update\n   */\n  refresh(): void {\n    this.updateSlotState();\n  }\n\n  private handleSlotChange = (): void => {\n    this.updateSlotState();\n    this.onStateChange?.();\n  };\n\n  private updateSlotState(): void {\n    const newState = new Map<string, boolean>();\n\n    this.slotNames.forEach(name => {\n      newState.set(name, this.checkSlotHasContent(name));\n    });\n\n    this.slotState = newState;\n  }\n\n  private checkSlotHasContent(name: string): boolean {\n    return Array.from(this.hostElement.children).some(child => child.getAttribute('slot') === name);\n  }\n}\n\n/**\n * Convenience function to create a SlotManager with automatic lifecycle management\n * Returns helper methods that can be called directly in lifecycle hooks\n */\nexport function createSlotManager(hostElement: HTMLElement, slotNames: readonly string[], onStateChange?: () => void) {\n  const manager = new SlotManager(hostElement, slotNames, onStateChange);\n\n  return {\n    manager,\n    // Lifecycle hooks\n    initialize: () => manager.initialize(),\n    setupListeners: () => manager.setupListeners(),\n    destroy: () => manager.destroy(),\n    // Query methods\n    hasSlot: (name: string) => manager.hasSlot(name),\n    getSlotState: () => manager.getSlotState(),\n    getActiveSlots: () => manager.getActiveSlots(),\n    refresh: () => manager.refresh(),\n  };\n}\n",".ir__drawer {\n  text-align: left !important;\n}\n\n.ir__drawer::part(header) {\n  border-bottom: 1px solid var(--wa-color-surface-border);\n  padding-bottom: calc(var(--spacing) / 2);\n  background-color: var(--ir-drawer-background-color, var(--wa-color-surface-default));\n}\n.ir__drawer::part(body) {\n  background-color: var(--ir-drawer-background-color, var(--wa-color-surface-default));\n  padding: 0;\n  padding-left: var(--ir-drawer-padding-left, var(--spacing));\n  padding-right: var(--ir-drawer-padding-right, var(--spacing));\n  padding-top: var(--ir-drawer-padding-top, var(--spacing));\n  padding-bottom: var(--ir-drawer-padding-bottom, var(--spacing));\n}\n.ir__drawer::part(footer) {\n  background-color: var(--ir-drawer-background-color, var(--wa-color-surface-default));\n  padding-top: calc(var(--spacing) / 2);\n  border-top: 1px solid var(--wa-color-surface-border);\n}\n.ir__drawer-footer {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  width: 100%;\n}\n.ir__drawer-footer > * {\n  flex: 1 1 0%;\n}\n.drawer__loader-container {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 100%;\n}\n","import { OverflowAdd, OverflowRelease } from '@/decorators/OverflowLock';\nimport { createSlotManager } from '@/utils/slot';\nimport WaDrawer from '@awesome.me/webawesome/dist/components/drawer/drawer';\nimport { Component, Element, Event, EventEmitter, h, Prop, State } from '@stencil/core';\n\nexport type NativeDrawer = WaDrawer;\n\n@Component({\n  tag: 'ir-drawer',\n  styleUrl: 'ir-drawer.css',\n  shadow: true,\n})\nexport class IrDrawer {\n  @Element() el: HTMLIrDrawerElement;\n\n  /** Indicates whether or not the drawer is open. Toggle this attribute to show and hide the drawer. */\n  @Prop({ reflect: true }) open: NativeDrawer['open'];\n  /**\n   * The drawer's label as displayed in the header. You should always include a relevant label, as it is required for\n   * proper accessibility. If you need to display HTML, use the `label` slot instead.\n   */\n  @Prop({ reflect: true }) label: NativeDrawer['label'];\n  /** The direction from which the drawer will open. */\n  @Prop({ reflect: true }) placement: NativeDrawer['placement'];\n  /** Disables the header. This will also remove the default close button. */\n  @Prop({ reflect: true }) withoutHeader: NativeDrawer['withoutHeader'];\n  /** When enabled, the drawer will be closed when the user clicks outside of it. */\n  @Prop({ reflect: true }) lightDismiss: NativeDrawer['lightDismiss'] = true;\n\n  @State() private slotStateVersion = 0; // Trigger re-renders when slots change\n\n  /** Emitted when the drawer opens. */\n  @Event() drawerShow: EventEmitter<void>;\n  /**Emitted when the drawer is requesting to close. Calling event.preventDefault() will prevent the drawer from closing. You can inspect event.detail.source to see which element caused the drawer to close. If the source is the drawer element itself, the user has pressed Escape or the drawer has been closed programmatically. Avoid using this unless closing the drawer will result in destructive behavior such as data loss. */\n  @Event() drawerHide: EventEmitter<{ source: Element }>;\n\n  private readonly SLOT_NAMES = ['label', 'header-actions', 'footer'] as const;\n\n  // Create slot manager with state change callback\n  private slotManager = createSlotManager(\n    null as any, // Will be set in componentWillLoad\n    this.SLOT_NAMES,\n    () => {\n      // Trigger re-render when slot state changes\n      this.slotStateVersion++;\n    },\n  );\n\n  private readonly onDrawerShow = (event: CustomEvent<void>) => {\n    this.emitDrawerShow(event);\n  };\n\n  private readonly onDrawerHide = (event: CustomEvent<{ source: Element }>) => {\n    this.emitDrawerHide(event);\n  };\n\n  componentWillLoad() {\n    // Initialize slot manager with host element\n    this.slotManager = createSlotManager(this.el, this.SLOT_NAMES, () => {\n      this.slotStateVersion++;\n    });\n    this.slotManager.initialize();\n  }\n\n  componentDidLoad() {\n    this.slotManager.setupListeners();\n  }\n\n  disconnectedCallback() {\n    this.slotManager.destroy();\n  }\n\n  @OverflowAdd()\n  private emitDrawerShow(e: CustomEvent<void>) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.drawerShow.emit();\n  }\n\n  @OverflowRelease()\n  private emitDrawerHide(e: CustomEvent<{ source: Element }>) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    if (!e.detail) {\n      return;\n    }\n    this.drawerHide.emit(e.detail);\n  }\n\n  render() {\n    return (\n      <wa-drawer\n        onwa-show={this.onDrawerShow}\n        onwa-hide={this.onDrawerHide}\n        class=\"ir__drawer\"\n        style={{ '--size': 'var(--ir-drawer-width,40rem)' }}\n        open={this.open}\n        label={this.label}\n        placement={this.placement}\n        withoutHeader={this.withoutHeader}\n        lightDismiss={this.lightDismiss}\n        exportparts=\"dialog, header, header-actions, title, close-button, close-button__base, body, footer\"\n      >\n        {this.slotManager.hasSlot('header-actions') && <slot name=\"header-actions\" slot=\"header-actions\"></slot>}\n        {this.slotManager.hasSlot('label') && <slot name=\"label\" slot=\"label\"></slot>}\n        <slot></slot>\n        {this.slotManager.hasSlot('footer') && <slot name=\"footer\" slot=\"footer\"></slot>}\n      </wa-drawer>\n    );\n  }\n}\n"],"version":3}