{"file":"ir-guest-info-form2.js","mappings":"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","names":[],"sources":["src/components/ir-guest-info/ir-guest-info-form/types.ts","src/components/ir-guest-info/ir-guest-info-form/ir-guest-info-form.css?tag=ir-guest-info-form&encapsulation=scoped","src/components/ir-guest-info/ir-guest-info-form/ir-guest-info-form.tsx"],"sourcesContent":["import { z } from 'zod';\n\nconst nonEmptyString = (message: string) => z.string().trim().min(1, message);\n\nconst optionalEmailSchema = z.string().trim().email('Enter a valid email address').or(z.literal('')).optional().nullable();\n\nexport const guestInfoFormSchema = z.object({\n  first_name: nonEmptyString('First name is required'),\n  last_name: nonEmptyString('Last name is required'),\n  email: nonEmptyString('Email is required').email('Enter a valid email address'),\n  alternative_email: optionalEmailSchema,\n  country_id: z.number({ required_error: 'Country is required' }).int('Country is required').positive('Country is required'),\n  mobile: nonEmptyString('Mobile number is required').min(5, 'Mobile number is too short'),\n  country_phone_prefix: nonEmptyString('Country code is required'),\n  notes: z.string().max(2000, 'Private note cannot exceed 2000 characters').optional(),\n});\n\nexport type GuestInfoFormValues = z.infer<typeof guestInfoFormSchema>;\n",":host {\n  display: flex;\n  flex-direction: column;\n  gap: var(--wa-space-l, 1rem);\n}\n","import { Component, Event, EventEmitter, Host, Prop, h } from '@stencil/core';\nimport { Guest } from '@/models/booking.dto';\nimport locales from '@/stores/locales.store';\nimport { ICountry } from '@/models/IBooking';\nimport { guestInfoFormSchema } from './types';\n\n@Component({\n  tag: 'ir-guest-info-form',\n  styleUrl: 'ir-guest-info-form.css',\n  scoped: true,\n})\nexport class IrGuestInfoForm {\n  @Prop({ mutable: true }) guest: Guest;\n  @Prop() language: string;\n  @Prop() countries: ICountry[];\n  @Prop() autoValidate: boolean = false;\n\n  @Event() guestChanged: EventEmitter<Guest>;\n\n  private handleInputChange(params: Partial<Guest>) {\n    this.guestChanged.emit({ ...this.guest, ...params });\n    this.guest = { ...this.guest, ...params };\n  }\n  render() {\n    return (\n      <Host>\n        <ir-validator\n          schema={guestInfoFormSchema.shape.first_name}\n          value={this.guest?.first_name ?? ''}\n          autovalidate={this.autoValidate}\n          valueEvent=\"text-change input input-change\"\n          blurEvent=\"input-blur blur\"\n        >\n          <ir-custom-input\n            id={'firstName'}\n            value={this.guest?.first_name}\n            required\n            onText-change={e => this.handleInputChange({ first_name: e.detail })}\n            label={locales.entries?.Lcz_FirstName}\n          ></ir-custom-input>\n        </ir-validator>\n        <ir-validator\n          schema={guestInfoFormSchema.shape.last_name}\n          value={this.guest?.last_name ?? ''}\n          autovalidate={this.autoValidate}\n          valueEvent=\"text-change input input-change\"\n          blurEvent=\"input-blur blur\"\n        >\n          <ir-custom-input\n            value={this.guest?.last_name}\n            required\n            id=\"lastName\"\n            onText-change={e => this.handleInputChange({ last_name: e.detail })}\n            label={locales.entries?.Lcz_LastName}\n          ></ir-custom-input>\n        </ir-validator>\n        <ir-validator\n          schema={guestInfoFormSchema.shape.email}\n          value={this.guest?.email ?? ''}\n          autovalidate={this.autoValidate}\n          valueEvent=\"text-change input input-change\"\n          blurEvent=\"input-blur blur\"\n        >\n          <ir-custom-input\n            label={locales.entries?.Lcz_Email}\n            id=\"email\"\n            value={this.guest?.email}\n            required\n            onText-change={e => this.handleInputChange({ email: e.detail })}\n          ></ir-custom-input>\n        </ir-validator>\n        <ir-validator\n          schema={guestInfoFormSchema.shape.alternative_email}\n          value={this.guest?.alternative_email ?? ''}\n          autovalidate={this.autoValidate}\n          valueEvent=\"text-change input input-change\"\n          blurEvent=\"input-blur blur\"\n        >\n          <ir-custom-input\n            label={locales.entries?.Lcz_AlternativeEmail}\n            id=\"altEmail\"\n            value={this.guest?.alternative_email}\n            onText-change={e => this.handleInputChange({ alternative_email: e.detail })}\n          ></ir-custom-input>\n        </ir-validator>\n\n        <ir-validator\n          schema={guestInfoFormSchema.shape.country_id}\n          value={this.guest?.country_id ?? undefined}\n          autovalidate={this.autoValidate}\n          valueEvent=\"countryChange\"\n        >\n          <ir-country-picker\n            variant=\"modern\"\n            country={this.countries.find(c => c.id === this.guest?.country_id)}\n            label={locales.entries?.Lcz_Country}\n            onCountryChange={e => this.handleInputChange({ country_id: e.detail.id })}\n            countries={this.countries}\n          ></ir-country-picker>\n        </ir-validator>\n\n        {/* <ir-phone-input\n          mode=\"modern\"\n          onTextChange={e => {\n            e.stopImmediatePropagation();\n            e.stopPropagation();\n            const { mobile, phone_prefix } = e.detail;\n            if (mobile !== this.guest.mobile) {\n              this.handleInputChange({ mobile });\n            }\n            if (phone_prefix !== this.guest.country_phone_prefix) this.handleInputChange({ country_phone_prefix: phone_prefix });\n          }}\n          phone_prefix={this.guest.country_phone_prefix}\n          value={this.guest.mobile}\n          language={this.language}\n          label={locales.entries?.Lcz_MobilePhone}\n          countries={this.countries}\n        /> */}\n        <ir-validator\n          schema={guestInfoFormSchema.shape.mobile}\n          value={this.guest?.mobile ?? ''}\n          autovalidate={this.autoValidate}\n          valueEvent=\"mobile-input-change\"\n        >\n          <ir-mobile-input\n            onMobile-input-change={e => {\n              this.handleInputChange({ mobile: e.detail.formattedValue });\n            }}\n            onMobile-input-country-change={e => this.handleInputChange({ country_phone_prefix: e.detail.phone_prefix })}\n            value={this.guest?.mobile ?? ''}\n            required\n            countryCode={this.countries.find(c => c.phone_prefix === this.guest?.country_phone_prefix)?.code}\n            countries={this.countries}\n          ></ir-mobile-input>\n        </ir-validator>\n\n        <ir-validator\n          schema={guestInfoFormSchema.shape.notes}\n          value={this.guest?.notes ?? ''}\n          autovalidate={this.autoValidate}\n          valueEvent=\"wa-change change input\"\n          blurEvent=\"wa-blur blur\"\n        >\n          <wa-textarea onchange={e => this.handleInputChange({ notes: (e.target as any).value })} value={this.guest?.notes ?? ''} label={locales.entries?.Lcz_PrivateNote}></wa-textarea>\n        </ir-validator>\n      </Host>\n    );\n  }\n}\n"],"version":3}