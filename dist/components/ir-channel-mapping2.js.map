{"file":"ir-channel-mapping2.js","mappings":"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","names":["__stencil_proxyCustomElement"],"sources":["src/components/ir-channel/ir-channel-mapping/ir-mapping.service.ts","src/components/ir-channel/ir-channel-mapping/ir-channel-mapping.css?tag=ir-channel-mapping&encapsulation=scoped","src/components/ir-channel/ir-channel-mapping/ir-channel-mapping.tsx"],"sourcesContent":["import calendar_data from '@/stores/calendar-data';\r\nimport channels_data from '@/stores/channel.store';\r\n\r\nexport class IrMappingService {\r\n  public removedMapping(ir_id: string, isRoomType: boolean) {\r\n    let selectedChannels = [...channels_data.mappedChannels];\r\n    if (isRoomType) {\r\n      const toBeRemovedRoomType = calendar_data.roomsInfo.find(room => room.id.toString() === ir_id);\r\n      selectedChannels = selectedChannels.filter(c => toBeRemovedRoomType.rateplans.find(rate_plan => rate_plan.id.toString() === c.ir_id) === undefined);\r\n    }\r\n    channels_data.mappedChannels = selectedChannels.filter(c => c.ir_id !== ir_id);\r\n  }\r\n  public checkMappingExists(id: string, isRoomType: boolean, roomTypeId?: string) {\r\n    const mapped_id = channels_data.mappedChannels.find(m => m.channel_id === id);\r\n    if (!mapped_id) {\r\n      if (!isRoomType) {\r\n        const matchingRoomType = channels_data.mappedChannels.find(m => m.channel_id.toString() === roomTypeId);\r\n        if (!matchingRoomType) {\r\n          return { hide: true, result: undefined, occupancy: undefined };\r\n        }\r\n      }\r\n      return { hide: false, result: undefined, occupancy: undefined };\r\n    }\r\n    if (isRoomType) {\r\n      const room_type = calendar_data.roomsInfo.find(room => room.id.toString() === mapped_id.ir_id);\r\n      return { hide: false, occupancy: room_type.occupancy_default.adult_nbr, result: room_type };\r\n    }\r\n    if (!roomTypeId) {\r\n      throw new Error('Missing room type id');\r\n    }\r\n    const matchingRoomType = channels_data.mappedChannels.find(m => m.channel_id.toString() === roomTypeId);\r\n    const room_type = calendar_data.roomsInfo.find(room => room.id.toString() === matchingRoomType.ir_id);\r\n    if (!room_type) {\r\n      throw new Error('Invalid Room type');\r\n    }\r\n    return { hide: false, occupancy: room_type.occupancy_default.adult_nbr, result: room_type.rateplans.find(r => r.id.toString() === mapped_id.ir_id) };\r\n  }\r\n  public getAppropriateRooms(isRoomType: boolean, roomTypeId?: string) {\r\n    if (isRoomType) {\r\n      const filteredRoomTypes = calendar_data.roomsInfo.filter(\r\n        room => channels_data.mappedChannels.find(m => m.ir_id.toString() === room.id.toString()) === undefined && room.is_active,\r\n      );\r\n      return filteredRoomTypes.map(room => ({ id: room.id.toString(), name: room.name, occupancy: room.occupancy_default.adult_nbr }));\r\n    }\r\n    if (!roomTypeId) {\r\n      throw new Error('Missing roomType id');\r\n    }\r\n    const matchingRoomType = channels_data.mappedChannels.find(m => m.channel_id.toString() === roomTypeId);\r\n    if (!matchingRoomType) {\r\n      throw new Error('Invalid room type id');\r\n    }\r\n    const selectedRoomType = calendar_data.roomsInfo.find(room => room.id.toString() === matchingRoomType.ir_id);\r\n    return selectedRoomType.rateplans\r\n      .filter(rate_plan => channels_data.mappedChannels.find(r => rate_plan.id.toString() === r.ir_id) === undefined && rate_plan['is_active'])\r\n      .map(rate_plan => ({\r\n        id: rate_plan.id.toString(),\r\n        name: rate_plan['short_name'],\r\n        occupancy: selectedRoomType.occupancy_default.adult_nbr,\r\n      }));\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  box-sizing: border-box;\r\n  font-size: 12px !important;\r\n  line-height: 14px !important;\r\n}\r\n* {\r\n  padding: 0;\r\n  margin: 0;\r\n  box-sizing: border-box;\r\n}\r\n/* .map-row {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n.map-row span {\r\n  width: 49%;\r\n} */\r\n.submap-text {\r\n  padding-left: 10px;\r\n}\r\n.text-blue {\r\n  color: var(--blue);\r\n}\r\n.text-red {\r\n  color: var(--red);\r\n}\r\n.not_mapped_btn {\r\n  color: #ff4961;\r\n}\r\n.not_mapped_btn:hover {\r\n  color: #ff1635;\r\n}\r\nli {\r\n  list-style: none !important;\r\n}\r\n.refresh-btn {\r\n  all: unset;\r\n  color: var(--blue);\r\n  cursor: pointer;\r\n}\r\n.refresh-btn:hover {\r\n  color: #104064;\r\n}\r\n/* .selected-map svg {\r\n  margin: 0 10px !important;\r\n  flex-wrap: wrap;\r\n} */\r\n.selected-map {\r\n  flex: 1;\r\n}\r\n.selected-map-title {\r\n  flex: 1;\r\n  /* background: #000; */\r\n}\r\n/* lg */\r\n\r\n.mapped_row {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.mapped_item + svg {\r\n  display: block;\r\n  flex: 0 0 4.166666666666666%;\r\n  max-width: 4.166666666666666%;\r\n  margin: 0;\r\n}\r\n.mapped_row .mapped_item {\r\n  flex: 0 0 45.83333333333333%;\r\n  display: block;\r\n  max-width: 45.83333333333333%;\r\n}\r\n.mapped_item {\r\n  margin: 0;\r\n  padding: 0;\r\n  line-height: 22px;\r\n}\r\n.mapped_name {\r\n  margin-right: 5px;\r\n}\r\n.gap-3 {\r\n  gap: 5px;\r\n}\r\n.channel_name {\r\n  color: rgba(0, 0, 0, 0.88);\r\n  font-size: 14px;\r\n  font-weight: 700;\r\n}\r\n.mapped_row.rate_plan,\r\n.mapped_row.room_type {\r\n  margin-bottom: 0px;\r\n}\r\n","import { Component, Fragment, Host, State, h } from '@stencil/core';\r\nimport { IrMappingService } from './ir-mapping.service';\r\nimport channels_data, { addMapping, setMappedChannel } from '@/stores/channel.store';\r\nimport { RoomDetail, RatePlanDetail } from '@/models/IBooking';\r\nimport locales from '@/stores/locales.store';\r\n\r\n@Component({\r\n  tag: 'ir-channel-mapping',\r\n  styleUrl: 'ir-channel-mapping.css',\r\n  scoped: true,\r\n})\r\nexport class IrChannelMapping {\r\n  @State() activeMapField = '';\r\n  @State() availableRooms: { id: string; name: string }[] = [];\r\n\r\n  private mappingService = new IrMappingService();\r\n\r\n  setActiveField(id: string, isRoomType: boolean, roomTypeId?: string) {\r\n    const availableRooms = this.mappingService.getAppropriateRooms(isRoomType, roomTypeId);\r\n    if (availableRooms) {\r\n      this.availableRooms = availableRooms;\r\n    }\r\n    this.activeMapField = id;\r\n  }\r\n\r\n  renderMappingStatus(\r\n    mappedField:\r\n      | {\r\n          hide: boolean;\r\n          result: RoomDetail;\r\n          occupancy?: number;\r\n        }\r\n      | {\r\n          hide: boolean;\r\n          result: RatePlanDetail;\r\n          occupancy?: number;\r\n        },\r\n    id: string,\r\n    isRoomType: boolean,\r\n    roomTypeId?: string,\r\n  ) {\r\n    if (mappedField.hide) {\r\n      return <div></div>;\r\n    }\r\n    if (mappedField.result) {\r\n      return (\r\n        <Fragment>\r\n          <div class=\"pl-2 flex-fill d-sm-none mapped_item text-blue d-flex align-items-center\">\r\n            <span class=\"m-0 p-0 d-flex align-items-center selected-map\">\r\n              <span class=\"selected-map-title\">{isRoomType ? mappedField.result.name : mappedField.result['short_name']}</span>\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\r\n                <path\r\n                  fill={'var(--blue)'}\r\n                  d=\"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z\"\r\n                />\r\n              </svg>\r\n              {mappedField.occupancy}\r\n            </span>\r\n            <ir-icon class=\"ml-1 p-0\" onIconClickHandler={() => this.mappingService.removedMapping(mappedField.result.id.toString(), isRoomType)}>\r\n              <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\r\n                <path\r\n                  fill={'var(--blue)'}\r\n                  d=\"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z\"\r\n                />\r\n              </svg>\r\n            </ir-icon>\r\n          </div>\r\n          <div class=\"pl-2 flex-fill d-none mapped_item text-blue d-sm-flex align-items-center\">\r\n            <span class=\"mapped_name\">{isRoomType ? mappedField.result.name : mappedField.result['short_name']}</span>\r\n            <div class=\"d-flex align-items-center gap-3 flex-fill\">\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\r\n                <path\r\n                  fill={'var(--blue)'}\r\n                  d=\"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z\"\r\n                />\r\n              </svg>\r\n              <span>{mappedField.occupancy}</span>\r\n            </div>\r\n            <ir-button\r\n              variant=\"icon\"\r\n              onClickHandler={() => this.mappingService.removedMapping(mappedField.result.id.toString(), isRoomType)}\r\n              icon_name=\"trash\"\r\n              style={{ '--icon-size': '1rem', '--icon-button-color': '#1e9ff2', '--icon-button-hover-color': '#104064 ' }}\r\n            ></ir-button>\r\n          </div>\r\n        </Fragment>\r\n      );\r\n    }\r\n    return (\r\n      <div class=\"pl-2  flex-fill mapped_item\">\r\n        {this.activeMapField === id ? (\r\n          <ir-combobox\r\n            autoFocus\r\n            placeholder={locales.entries?.Lcz_NotMapped}\r\n            data={this.availableRooms}\r\n            onComboboxValueChange={e => {\r\n              addMapping(e.detail.data as string, this.activeMapField, isRoomType);\r\n              this.activeMapField = '';\r\n            }}\r\n          ></ir-combobox>\r\n        ) : (\r\n          <span class=\"cursor-pointer  not_mapped_btn\" onClick={() => this.setActiveField(id, isRoomType, roomTypeId)}>\r\n            {locales.entries.Lcz_NotMapped}\r\n          </span>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host class=\"py-md-2 px-md-2\">\r\n        <div class=\"d-flex p-0 m-0 w-100 justify-content-end\">\r\n          <button\r\n            onClick={() => {\r\n              setMappedChannel();\r\n            }}\r\n            class=\"btn refresh-btn\"\r\n          >\r\n            {locales.entries?.Lcz_Refresh}\r\n          </button>\r\n        </div>\r\n        <section class=\"w-100\">\r\n          <div class=\"pt-1 mapped_row\">\r\n            <p class=\"mapped_item channel_name\">{channels_data.selectedChannel?.name}</p>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\r\n              <path d=\"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z\" />\r\n            </svg>\r\n            <p class=\"pl-2 mapped_item channel_name\">igloorooms</p>\r\n          </div>\r\n          <div>\r\n            {channels_data.selectedChannel?.property?.room_types?.map(room_type => {\r\n              const mappedRoomType = this.mappingService.checkMappingExists(room_type.id, true);\r\n              return (\r\n                <Fragment>\r\n                  <div key={room_type.id} class=\"mapped_row room_type pt-1\">\r\n                    <p class=\"mapped_item\">{room_type.name}</p>\r\n\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\r\n                      <path d=\"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z\" />\r\n                    </svg>\r\n\r\n                    {this.renderMappingStatus(mappedRoomType, room_type.id, true)}\r\n                  </div>\r\n\r\n                  {room_type.rate_plans.map(rate_plan => {\r\n                    const mappedRatePlan = this.mappingService.checkMappingExists(rate_plan.id, false, room_type.id);\r\n                    // console.log(mappedRatePlan);\r\n                    return (\r\n                      <div key={rate_plan.id} class=\" mapped_row rate_plan\">\r\n                        <p class=\"pl-1 submap-text mapped_item\">{rate_plan.name}</p>\r\n\r\n                        {!mappedRatePlan.hide && (\r\n                          <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\r\n                            <path\r\n                              fill=\"currentColor\"\r\n                              d=\"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z\"\r\n                            />\r\n                          </svg>\r\n                        )}\r\n\r\n                        {this.renderMappingStatus(mappedRatePlan, rate_plan.id, false, room_type.id)}\r\n                      </div>\r\n                    );\r\n                  })}\r\n                  {/* <tdivr>\r\n                    <td class=\"py-1\"></td>\r\n                    <td></td>\r\n                    <td></td>\r\n                  </tdivr> */}\r\n                </Fragment>\r\n              );\r\n            })}\r\n          </div>\r\n        </section>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"version":3}