{"file":"ir-extra-service-config2.js","mappings":"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","names":[],"sources":["src/models/booking.dto.ts","src/components/ir-booking-details/ir-extra-services/ir-extra-service-config/ir-extra-service-config.css?tag=ir-extra-service-config&encapsulation=scoped","src/components/ir-booking-details/ir-extra-services/ir-extra-service-config/ir-extra-service-config.tsx"],"sourcesContent":["import { z } from 'zod';\r\nimport { IAllowedOptions, ICurrency, IPickupCurrency } from './calendarData';\r\nimport { TSourceOption } from './igl-book-property';\r\n\r\nexport interface Booking {\r\n  agent: {\r\n    code: string;\r\n    id: number;\r\n    name: string;\r\n    verification_mode: null;\r\n  } | null;\r\n  arrival: Arrival;\r\n  allowed_actions: IAllowedActions[];\r\n  system_id: number;\r\n  booked_on: DateTime;\r\n  booking_nbr: string;\r\n  currency: Currency;\r\n  extra_services: ExtraService[] | null;\r\n  from_date: string;\r\n  guest: Guest;\r\n  extras: Extras[] | null;\r\n  occupancy: Occupancy;\r\n  origin: Origin;\r\n  property: Property;\r\n  remark: string;\r\n  ota_notes: IOtaNotes[];\r\n  rooms: Room[];\r\n  source: Source;\r\n  status: Status;\r\n  to_date: string;\r\n  total: number;\r\n  is_editable: boolean;\r\n  format: IFormat;\r\n  channel_booking_nbr: string | null;\r\n  is_direct: boolean;\r\n  financial: IFinancials;\r\n  pickup_info: IBookingPickupInfo | null;\r\n  cost: number | null;\r\n  is_pms_enabled: boolean;\r\n  promo_key: string | null;\r\n  is_in_loyalty_mode: boolean;\r\n}\r\n\r\nexport const ExtraServiceSchema = z.object({\r\n  booking_system_id: z.number().optional(),\r\n  cost: z.coerce.number().nullable(),\r\n  currency_id: z.number().min(1),\r\n  description: z.string().min(1),\r\n  end_date: z.string().nullable(),\r\n  price: z.coerce.number(),\r\n  start_date: z.string().nullable(),\r\n  system_id: z.number().optional(),\r\n});\r\n\r\nexport type ExtraService = z.infer<typeof ExtraServiceSchema>;\r\nexport interface Extras {\r\n  key: string;\r\n  value: any;\r\n}\r\nexport interface IOtaNotes {\r\n  statement: string;\r\n}\r\nexport interface IBookingPickupInfo {\r\n  currency: IPickupCurrency;\r\n  date: string;\r\n  details: string;\r\n  hour: number;\r\n  minute: number;\r\n  nbr_of_units: number;\r\n  selected_option: IAllowedOptions;\r\n  total: number;\r\n}\r\nexport interface IAllowedActions {\r\n  code: string;\r\n  description: string;\r\n}\r\nexport interface IFinancials {\r\n  due_amount: number;\r\n  due_dates: IDueDate[];\r\n  payments: IPayment[] | null;\r\n  total_amount: number;\r\n  gross_total: number;\r\n  gross_cost: number;\r\n  invoice_nbr: string;\r\n}\r\nexport interface IPayment {\r\n  id: number | null;\r\n  date: string;\r\n  amount: number;\r\n  currency: ICurrency;\r\n  designation: string;\r\n  reference: string;\r\n}\r\nexport interface IDueDate {\r\n  amount: number;\r\n  currencysymbol: string;\r\n  date: string;\r\n  description: string;\r\n  room: string;\r\n}\r\nexport interface IFormat {\r\n  from_date: string;\r\n  to_date: string;\r\n}\r\nexport interface Arrival {\r\n  code: string;\r\n  description: string;\r\n}\r\n\r\nexport interface DateTime {\r\n  date: string;\r\n  hour: number;\r\n  minute: number;\r\n}\r\n\r\nexport interface Currency {\r\n  code: string;\r\n  id: number;\r\n  symbol: string;\r\n}\r\n\r\nexport interface Guest {\r\n  address: string | null;\r\n  city: string | null;\r\n  country_id: number | null;\r\n  dob: string | null;\r\n  email: string | null;\r\n  first_name: string;\r\n  id: number;\r\n  last_name: string | null;\r\n  mobile: string | null;\r\n  country_phone_prefix: string | null;\r\n  subscribe_to_news_letter: boolean | null;\r\n  cci?: ICCI | null;\r\n  alternative_email?: string;\r\n  nbr_confirmed_bookings: number;\r\n  notes: string;\r\n}\r\nexport interface ICCI {\r\n  nbr: string | number;\r\n  holder_name: string | number;\r\n  expiry_month: string | number;\r\n  expiry_year: string | number;\r\n  cvc?: string | null;\r\n}\r\nexport interface Occupancy {\r\n  adult_nbr: number;\r\n  children_nbr: number;\r\n  infant_nbr: number | null;\r\n}\r\nexport interface DoReservationProps {\r\n  assign_units: boolean;\r\n  check_in: boolean;\r\n  is_pms: boolean;\r\n  is_direct: boolean;\r\n  is_in_loyalty_mode: boolean;\r\n  promo_key: string | null;\r\n  extras: any; // Assuming extras can have any structure, replace with a specific type if known\r\n  booking: {\r\n    from_date: string; // Format 'YYYY-MM-DD'\r\n    to_date: string; // Format 'YYYY-MM-DD'\r\n    remark: string | null;\r\n    booking_nbr: string;\r\n    property: {\r\n      id: string | number;\r\n    };\r\n    booked_on: {\r\n      date: string; // Format 'YYYY-MM-DD'\r\n      hour: number;\r\n      minute: number;\r\n    };\r\n    source: TSourceOption;\r\n    rooms: Room[]; // Assuming rooms are defined in the imported `Room` type\r\n    currency: string;\r\n    arrival: {\r\n      code: string;\r\n    };\r\n    guest: {\r\n      email: string | null;\r\n      first_name: string;\r\n      last_name: string;\r\n      country_id: string | number | null;\r\n      city: string | null;\r\n      mobile: string;\r\n      phone_prefix: string | null;\r\n      address: string;\r\n      dob: string | null;\r\n      subscribe_to_news_letter: boolean;\r\n      cci: {\r\n        nbr: string;\r\n        holder_name: string;\r\n        expiry_month: string;\r\n        expiry_year: string;\r\n      } | null;\r\n    };\r\n  };\r\n  pickup_info: any | null; // Assuming it can be any structure, replace if specific type is available\r\n}\r\nexport interface Origin {\r\n  Icon: string;\r\n  Label: string;\r\n}\r\n\r\nexport interface Property {\r\n  calendar_legends: null;\r\n  currency: null;\r\n  id: number;\r\n  name: string;\r\n  roomtypes: null;\r\n}\r\n\r\nexport interface Room {\r\n  days: Day[];\r\n  from_date: string;\r\n  guest: Guest;\r\n  occupancy_default: number;\r\n  notes: string | null;\r\n  occupancy: Occupancy;\r\n  physicalroom: null;\r\n  bed_preference: number | null;\r\n  rateplan: RatePlan;\r\n  roomtype: RoomType;\r\n  to_date: string;\r\n  total: number;\r\n  identifier: string;\r\n  unit: string | number | IUnit | null;\r\n  ota_taxes: IOtaTax[];\r\n  cost: number | null;\r\n  gross_cost: number;\r\n  gross_total: number;\r\n  guarantee: number;\r\n  gross_guarantee: number;\r\n}\r\nexport interface IOtaTax {\r\n  amount: number;\r\n  currency: IOtaTaxCurrency;\r\n  is_exlusive: boolean;\r\n  name: string;\r\n}\r\nexport interface IOtaTaxCurrency {\r\n  code: string;\r\n  id: number;\r\n  symbol: string;\r\n}\r\nexport interface IUnit {\r\n  calendar_cell: null;\r\n  id: 2;\r\n  name: '402';\r\n}\r\nexport interface Day {\r\n  amount: number;\r\n  date: string;\r\n  cost: number | null;\r\n}\r\n\r\nexport interface RatePlan {\r\n  cancelation: string | null;\r\n  guarantee: null;\r\n  id: number;\r\n  name: string;\r\n  rate_restrictions: null;\r\n  variations: null;\r\n  selected_variation: IVariations;\r\n  is_non_refundable: boolean;\r\n  custom_text: string | null;\r\n  is_active: boolean;\r\n}\r\nexport interface IVariations {\r\n  adult_child_offering: string;\r\n  adult_nbr: number;\r\n  amount: number | null;\r\n  child_nbr: number;\r\n}\r\nexport interface RoomType {\r\n  availabilities: null;\r\n  id: number;\r\n  inventory: number;\r\n  name: string;\r\n  physicalrooms: null;\r\n  rate: number;\r\n  rateplans: null;\r\n  is_active: boolean;\r\n}\r\n\r\nexport interface Source {\r\n  code: string | null;\r\n  description: string;\r\n  tag: string | null;\r\n}\r\n\r\nexport interface Status {\r\n  code: string;\r\n  description: string;\r\n}\r\n\r\nexport interface IPmsLog {\r\n  is_acknowledged: boolean;\r\n  is_sent: boolean;\r\n  sent_date: string;\r\n  sent_hour: number;\r\n  sent_minute: number;\r\n}\r\n",":host {\r\n  display: block;\r\n  --ir-input-border-color: #cacfe7;\r\n}\r\n\r\n:host .input-group-text {\r\n  border-color: var(--ir-input-border-color);\r\n}\r\n.hidden-date-picker.hidden-dates .date-range-input {\r\n  opacity: 0;\r\n}\r\n.currency-ph {\r\n  padding: 0;\r\n  margin: 0;\r\n  color: #3b4781;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 0 0 0 0.25rem;\r\n  border-top: 1px solid var(--ir-input-border-color);\r\n  border-bottom: 1px solid var(--ir-input-border-color);\r\n  border-left: 1px solid transparent;\r\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\r\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n}\r\n\r\n.service-description-input {\r\n  height: 70px !important;\r\n}\r\n\r\n.service-description .input-group-prepend {\r\n  background-color: #f4f5fa;\r\n  border: 1px solid var(--ir-input-border-color);\r\n  border-top-left-radius: 0.25rem;\r\n  border-bottom-left-radius: 0.25rem;\r\n}\r\n.service-date-container {\r\n  padding: 0;\r\n  margin: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  position: relative;\r\n  width: 100%;\r\n  justify-content: center;\r\n}\r\n.service-date-container .btn-container {\r\n  position: absolute;\r\n  right: 5px;\r\n  margin: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 0;\r\n}\r\n.service-description .input-group-text {\r\n  height: fit-content;\r\n  border: 0;\r\n  padding-top: 0.75rem !important;\r\n}\r\n\r\n.price-input-group:focus-within .currency-ph,\r\n.cost-input-group:focus-within .currency-ph {\r\n  border-top: 1px solid #1e9ff2;\r\n  border-bottom: 1px solid #1e9ff2;\r\n  border-left: 1px solid #1e9ff2;\r\n}\r\n.currency-ph[data-state='error'] {\r\n  border-color: var(--red, #ff4961);\r\n}\r\n.price-input:focus {\r\n  border-right-width: 1px !important;\r\n}\r\n\r\n.is-invalid {\r\n  background-image: none !important;\r\n}\r\n.price-input,\r\n.cost-input {\r\n  border-left: 0;\r\n}\r\n\r\n.row-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n}\r\n\r\n@media (min-width: 640px) {\r\n  .row-group {\r\n    flex-direction: row;\r\n    align-items: center;\r\n    gap: 0;\r\n  }\r\n  .cost-label {\r\n    border-top-left-radius: 0;\r\n    border-bottom-left-radius: 0;\r\n    border-left: 0;\r\n  }\r\n  .until-prepend,\r\n  .cost-input-placeholder {\r\n    border-top-left-radius: 0 !important;\r\n    border-bottom-left-radius: 0 !important;\r\n  }\r\n  .date-from,\r\n  .price-input {\r\n    border-right-width: 0 !important;\r\n    border-top-right-radius: 0 !important;\r\n    border-bottom-right-radius: 0 !important;\r\n  }\r\n}\r\n","import { Booking, ExtraService, ExtraServiceSchema } from '@/models/booking.dto';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\nimport locales from '@/stores/locales.store';\r\nimport { Component, Event, EventEmitter, Host, Prop, State, h } from '@stencil/core';\r\nimport { ZodError } from 'zod';\r\n\r\n@Component({\r\n  tag: 'ir-extra-service-config',\r\n  styleUrl: 'ir-extra-service-config.css',\r\n  scoped: true,\r\n})\r\nexport class IrExtraServiceConfig {\r\n  @Prop() booking: Pick<Booking, 'from_date' | 'to_date' | 'currency' | 'booking_nbr'>;\r\n  @Prop() service: ExtraService;\r\n\r\n  @State() s_service: ExtraService;\r\n  @State() error: boolean;\r\n  @State() fromDateClicked: boolean;\r\n  @State() toDateClicked: boolean;\r\n\r\n  @Event() closeModal: EventEmitter<null>;\r\n  @Event() resetBookingData: EventEmitter<null>;\r\n\r\n  private bookingService = new BookingService();\r\n\r\n  componentWillLoad() {\r\n    if (this.service) {\r\n      this.s_service = { ...this.service };\r\n    }\r\n  }\r\n\r\n  private async saveAmenity() {\r\n    try {\r\n      ExtraServiceSchema.parse(this.s_service);\r\n      await this.bookingService.doBookingExtraService({\r\n        service: this.s_service,\r\n        booking_nbr: this.booking.booking_nbr,\r\n        is_remove: false,\r\n      });\r\n      this.resetBookingData.emit(null);\r\n      this.closeModal.emit(null);\r\n    } catch (error) {\r\n      if (error instanceof ZodError) {\r\n        this.error = true;\r\n      }\r\n      console.error(error);\r\n    }\r\n  }\r\n  private updateService(params: Partial<ExtraService>) {\r\n    let prevService: ExtraService = this.s_service;\r\n    if (!prevService) {\r\n      prevService = {\r\n        cost: null,\r\n        description: null,\r\n        end_date: null,\r\n        start_date: null,\r\n        price: null,\r\n        currency_id: this.booking.currency.id,\r\n      };\r\n    }\r\n    this.s_service = { ...prevService, ...params };\r\n  }\r\n  private validatePrice(): boolean {\r\n    if (this.s_service?.price === undefined || this.s_service?.price?.toString() === '') {\r\n      return false;\r\n    }\r\n    const priceSchema = ExtraServiceSchema.pick({ price: true });\r\n    const result = priceSchema.safeParse({ price: this.s_service?.price });\r\n    return result.success;\r\n  }\r\n  render() {\r\n    return (\r\n      <Host class={'p-0'}>\r\n        <ir-title class=\"px-1\" onCloseSideBar={() => this.closeModal.emit(null)} label={locales.entries.Lcz_ExtraServices} displayContext=\"sidebar\"></ir-title>\r\n        <section class={'px-1'}>\r\n          {/* Description */}\r\n          <fieldset class=\"input-group mb-1 mt-3 service-description\">\r\n            <div class=\"input-group-prepend\">\r\n              <span class=\"input-group-text\">{locales.entries.Lcz_Description}</span>\r\n            </div>\r\n            <textarea\r\n              value={this.s_service?.description}\r\n              class={`form-control service-description-input ${this.error && !this.s_service?.description ? 'is-invalid' : ''}`}\r\n              style={{ height: '7rem' }}\r\n              maxLength={250}\r\n              onChange={e => this.updateService({ description: (e.target as HTMLTextAreaElement).value })}\r\n              aria-label=\"Amenity description\"\r\n            ></textarea>\r\n          </fieldset>\r\n          {/* Dates */}\r\n          <div class={'row-group mb-1'}>\r\n            <div class=\"input-group\">\r\n              <div class=\"input-group-prepend\">\r\n                <span class=\"input-group-text\" id=\"basic-addon1\">\r\n                  {locales.entries.Lcz_DatesOn}\r\n                </span>\r\n              </div>\r\n              <div class=\"form-control p-0 m-0 d-flex align-items-center justify-content-center date-from\">\r\n                <div class=\"service-date-container\">\r\n                  <ir-date-picker\r\n                    date={this.s_service?.start_date ? new Date(this.s_service?.start_date) : new Date(this.booking.from_date)}\r\n                    class={`hidden-date-picker ${!this.s_service?.start_date ? 'hidden-dates' : ''}`}\r\n                    autoApply\r\n                    singleDatePicker\r\n                    minDate={this.booking.from_date}\r\n                    maxDate={this.booking.to_date}\r\n                    onDateChanged={e => this.updateService({ start_date: e.detail.start.format('YYYY-MM-DD') })}\r\n                  ></ir-date-picker>\r\n                  {this.s_service?.start_date && (\r\n                    <div class=\"btn-container\">\r\n                      <ir-button\r\n                        title=\"clear\"\r\n                        id=\"close\"\r\n                        variant=\"icon\"\r\n                        style={{ '--icon-size': '0.875rem' }}\r\n                        icon_name=\"xmark-fill\"\r\n                        class=\"ml-2\"\r\n                        onClickHandler={e => {\r\n                          e.stopImmediatePropagation();\r\n                          e.stopPropagation();\r\n                          this.updateService({ start_date: null });\r\n                        }}\r\n                      ></ir-button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"input-group\">\r\n              <div class=\"input-group-prepend \">\r\n                <span class=\"input-group-text until-prepend\" id=\"basic-addon1\">\r\n                  {locales.entries.Lcz_TillAndIncluding}\r\n                </span>\r\n              </div>\r\n              <div class=\"form-control p-0 m-0 d-flex align-items-center justify-content-center\">\r\n                <div class=\"service-date-container\">\r\n                  <ir-date-picker\r\n                    date={this.s_service?.end_date ? new Date(this.s_service?.end_date) : new Date(this.booking.to_date)}\r\n                    class={`hidden-date-picker ${!this.s_service?.end_date ? 'hidden-dates' : ''}`}\r\n                    autoApply\r\n                    singleDatePicker\r\n                    minDate={this.booking.from_date}\r\n                    maxDate={this.booking.to_date}\r\n                    onDateChanged={e => {\r\n                      e.stopImmediatePropagation();\r\n                      e.stopPropagation();\r\n                      this.updateService({ end_date: e.detail.start.format('YYYY-MM-DD') });\r\n                    }}\r\n                  ></ir-date-picker>\r\n\r\n                  {this.s_service?.end_date && (\r\n                    <div class=\"btn-container\">\r\n                      <ir-button\r\n                        title=\"clear\"\r\n                        id=\"close\"\r\n                        variant=\"icon\"\r\n                        style={{ '--icon-size': '0.875rem' }}\r\n                        icon_name=\"xmark-fill\"\r\n                        class=\"ml-2\"\r\n                        onClickHandler={e => {\r\n                          e.stopImmediatePropagation();\r\n                          e.stopPropagation();\r\n                          this.updateService({ end_date: null });\r\n                        }}\r\n                      ></ir-button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {/* Prices and cost */}\r\n          <div class={'row-group'}>\r\n            <ir-price-input\r\n              label=\"Price\"\r\n              currency={this.booking.currency.symbol}\r\n              class=\"ir-br-input-none\"\r\n              value={this.s_service?.price?.toString()}\r\n              zod={ExtraServiceSchema.pick({ price: true })}\r\n              aria-label={locales.entries.Lcz_Price}\r\n              wrapKey=\"price\"\r\n              aria-describedby=\"service price\"\r\n              autoValidate={false}\r\n              data-state={this.error && !this.validatePrice() ? 'error' : ''}\r\n              onTextChange={e => this.updateService({ price: parseFloat(e.detail) })}\r\n            ></ir-price-input>\r\n            <ir-price-input\r\n              autoValidate={false}\r\n              label={locales.entries.Lcz_Cost}\r\n              labelStyle=\"cost-label\"\r\n              currency={this.booking.currency.symbol}\r\n              // class=\"ir-bl-lbl-none ir-bl-none\"\r\n              value={this.s_service?.cost?.toString()}\r\n              zod={ExtraServiceSchema.pick({ cost: true })}\r\n              onTextChange={e => this.updateService({ cost: parseFloat(e.detail) })}\r\n              wrapKey=\"cost\"\r\n              aria-label=\"Cost\"\r\n              aria-describedby=\"service cost\"\r\n            ></ir-price-input>\r\n          </div>\r\n          <div class={'d-flex flex-column flex-sm-row mt-3'}>\r\n            <ir-button\r\n              onClick={() => this.closeModal.emit(null)}\r\n              btn_styles=\"justify-content-center\"\r\n              class={`mb-1 mb-sm-0 flex-fill mr-sm-1`}\r\n              icon=\"\"\r\n              text={locales.entries.Lcz_Cancel}\r\n              btn_color=\"secondary\"\r\n            ></ir-button>\r\n\r\n            <ir-button\r\n              btn_styles=\"justify-content-center align-items-center\"\r\n              class={'m-0 flex-fill text-center'}\r\n              icon=\"\"\r\n              isLoading={isRequestPending('/Do_Booking_Extra_Service')}\r\n              text={locales.entries.Lcz_Save}\r\n              btn_color=\"primary\"\r\n              onClick={this.saveAmenity.bind(this)}\r\n            ></ir-button>\r\n          </div>\r\n        </section>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"version":3}