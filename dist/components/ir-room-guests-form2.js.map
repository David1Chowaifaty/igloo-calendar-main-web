{"file":"ir-room-guests-form2.js","mappings":";;;;;;;;;;;;;;;AAIO,MAAM,YAAY,GAAiB;IACxC,EAAE,EAAE,CAAC,CAAC;IACN,SAAS,EAAE,EAAE;IACb,UAAU,EAAE,IAAI;IAChB,GAAG,EAAE,EAAE;IACP,OAAO,EAAE;QACP,IAAI,EAAE;YACJ,IAAI,EAAE,IAAI;YACV,WAAW,EAAE,IAAI;SAClB;QACD,MAAM,EAAE,EAAE;KACX;IACD,OAAO,EAAE,IAAI;IACb,iBAAiB,EAAE,IAAI;IACvB,GAAG,EAAE,IAAI;IACT,IAAI,EAAE,IAAI;IACV,OAAO,EAAE,SAAS;IAClB,oBAAoB,EAAE,IAAI;IAC1B,KAAK,EAAE,IAAI;IACX,UAAU,EAAE,EAAE;IACd,SAAS,EAAE,EAAE;IACb,MAAM,EAAE,IAAI;IACZ,sBAAsB,EAAE,CAAC;IACzB,KAAK,EAAE,IAAI;IACX,QAAQ,EAAE,IAAI;IACd,wBAAwB,EAAE,IAAI;CAC/B,CAAC;AACF;AACO,MAAM,QAAQ,GAAe;IAClC,IAAI,EAAE,IAAI;IACV,OAAO,EAAE,YAAY;IACrB,IAAI,EAAE,KAAK;IACX,GAAG,EAAEA,KAAM,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC,MAAM,EAAE;IAChD,GAAG,EAAE,IAAI,IAAI,EAAE;IACf,MAAM,EAAE,IAAI,IAAIA,KAAM,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC;IACjD,KAAK,EAAE,GAAG,IAAIA,KAAM,CAAC,GAAG,EAAE,YAAY,CAAC,CAAC,MAAM,EAAE;IAChD,OAAO,EAAE,IAAI;IACb,eAAe,EAAE,GAAG;IACpB,MAAM,EAAE;QACN,IAAI,EAAE;YACJ,IAAI,EAAE,WAAW;YACjB,IAAI,EAAE,IAAI;YACV,EAAE,EAAE,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE;YAC5B,eAAe,EAAE,GAAG;SACrB;QACD,EAAE,EAAE;YACF,IAAI,EAAE,WAAW;YACjB,IAAI,EAAE,CAAC;YACP,EAAE,EAAE,EAAE;YACN,eAAe,EAAE,GAAG;SACrB;QACD,EAAE,EAAE;YACF,IAAI,EAAE,WAAW;YACjB,IAAI,EAAE,CAAC;YACP,EAAE,EAAE,EAAE;YACN,eAAe,EAAE,GAAG;SACrB;KACF;CACF;;AC9DD,MAAM,mBAAmB,GAAG,upFAAupF,CAAC;AACprF,+BAAe,mBAAmB;;MCarB,gBAAgB;;;;;;;;;;;;IAKnB,QAAQ,CAAS;;;;;IAMjB,UAAU,CAAS;;;;;IAMnB,aAAa,GAAmB,EAAE,CAAC;;;;;IAMnC,WAAW,GAAW,CAAC,CAAC;;;;;IAMxB,SAAS,CAAa;;;;;IAMtB,OAAO,CAAU;;;;;IAMjB,QAAQ,GAAW,IAAI,CAAC;;;;;IAMxB,aAAa,CAAS;IAErB,MAAM,GAAmB,EAAE,CAAC;IAC5B,OAAO,GAAe,EAAE,CAAC;IACzB,KAAK,GAA4B,EAAE,CAAC;IACpC,SAAS,CAAU;IACnB,eAAe,CAAW;IAC1B,YAAY,GAAG,KAAK,CAAC;IAEY,UAAU,CAAqB;IAC/B,eAAe,CAAqB;IACpC,gBAAgB,CAA+D;IAEjH,cAAc,GAAG,IAAI,cAAc,EAAE,CAAC;IAE9C,iBAAiB;QACf,IAAI,CAAC,IAAI,EAAE,CAAC;QACZ,IAAI,CAAC,gBAAgB,EAAE,CAAC;KACzB;IAEO,MAAM,IAAI;QAChB,IAAI;YACF,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,MAAM,CAAC,OAAO,EAAE,OAAO,CAAC,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,qBAAqB,EAAE,EAAE,IAAI,CAAC,cAAc,CAAC,0BAA0B,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YACxJ,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;YACvB,IAAI,OAAO,EAAE;gBACX,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,OAAO,CAAC,UAAU,CAAC,CAAC;aAC9E;SACF;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;SACtB;gBAAS;YACR,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;SACxB;KACF;IAEO,gBAAgB;QACtB,IAAI,MAAM,GAAG,EAAE,CAAC;QAChB,IAAI,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE;YAChD,MAAM,kBAAkB,GAAG,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC;YACxE,MAAM,GAAG;gBACP,GAAG,IAAI,CAAC,aAAa;gBACrB,GAAG,KAAK,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAAC;oBAChC,GAAG,YAAY;oBACf,OAAO,EAAE;wBACP,GAAG,YAAY,CAAC,OAAO;wBACvB,IAAI,EAAE;4BACJ,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,SAAS,IAAI,KAAK;4BACzC,WAAW,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,aAAa,IAAI,EAAE;yBAClD;wBACD,MAAM,EAAE,EAAE;qBACX;iBACF,CAAC;aACH,CAAC;SACH;aAAM;YACL,MAAM,GAAG,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC;SAClC;QACD,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,GAAG,CAAC,EAAE,GAAG,EAAE,IAAI,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,WAAW,EAAE,KAAK,IAAI,GAAG,IAAI,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;QACjG,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,GAAG,GAAGA,KAAM,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,GAAG,EAAE,EAAE,UAAU,EAAE,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC,OAAO,CAAC,EAAE,GAAG,IAAI,EAAE,CAAC,CAAC,CAAC;KACxJ;IAEO,eAAe,CAAC,KAAa,EAAE,MAA6B;QAClE,MAAM,UAAU,GAAG,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC;QACpC,IAAI,SAAS,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC;QAClC,SAAS,GAAG,EAAE,GAAG,SAAS,EAAE,GAAG,MAAM,EAAE,CAAC;QACxC,UAAU,CAAC,KAAK,CAAC,GAAG,SAAS,CAAC;QAC9B,IAAI,CAAC,MAAM,GAAG,CAAC,GAAG,UAAU,CAAC,CAAC;KAC/B;IAEO,MAAM,UAAU;QACtB,IAAI;YACF,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;YAChB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;YACzB,OAAO,CAAC,GAAG,CAAC;gBACV,aAAa,EAAE,IAAI,CAAC,aAAa;gBACjC,MAAM,EAAE,IAAI,CAAC,MAAM;aACpB,CAAC,CAAC;;YAEH,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,MAAM,EAAE;gBAC/B,oBAAoB,CAAC,KAAK,CAAC,CAAC;aAC7B;YACD,MAAM,IAAI,CAAC,cAAc,CAAC,uBAAuB,CAAC;gBAChD,WAAW,EAAE,IAAI,CAAC,aAAa;gBAC/B,UAAU,EAAE,IAAI,CAAC,UAAU;gBAC3B,MAAM,EAAE,IAAI,CAAC,MAAM;qBAChB,GAAG,CAAC,CAAC;oBACJ,IAAI,CAAC,CAAC,CAAC,UAAU,IAAI,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE;wBAChC,OAAO,IAAI,CAAC;qBACb;oBACD,OAAO,EAAE,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,GAAG,GAAGA,KAAM,CAAC,CAAC,CAAC,GAAG,EAAE,YAAY,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,GAAG,IAAI,EAAE,CAAC;iBACvF,CAAC;qBACD,MAAM,CAAC,OAAO,CAAC;aACnB,CAAC,CAAC;YACH,IAAI,IAAI,CAAC,OAAO,EAAE;gBAChB,MAAM,IAAI,CAAC,cAAc,CAAC,sBAAsB,CAAC;oBAC/C,WAAW,EAAE,IAAI,CAAC,aAAa;oBAC/B,eAAe,EAAE,IAAI,CAAC,UAAU;oBAChC,MAAM,EAAE,KAAK;iBACd,CAAC,CAAC;aACJ;YACD,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC3B,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,EAAE,UAAU,EAAE,IAAI,CAAC,UAAU,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;YACjF,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,CAAC;SAC7B;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACnB,IAAI,KAAK,YAAY,QAAQ,EAAE;gBAC7B,IAAI,MAAM,GAAG,EAAE,CAAC;gBAChB,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;oBACpB,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;iBAC1C,CAAC,CAAC;gBACH,IAAI,CAAC,KAAK,GAAG,EAAE,GAAG,MAAM,EAAE,CAAC;aAC5B;SACF;KACF;IAED,MAAM;QACJ,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,QACE,WAAK,KAAK,EAAE,mBAAmB,IAC7B,qBAAyB,CACrB,EACN;SACH;QACD,QACE,YACE,EAAE,EAAE,gBAAgB,IAAI,CAAC,UAAU,EAAE,EACrC,KAAK,EAAC,iBAAiB,EACvB,KAAK,EAAE,EAAE,QAAQ,EAAE,OAAO,EAAE,EAC5B,QAAQ,EAAE,CAAC;gBACT,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,IAAI,CAAC,UAAU,EAAE,CAAC;aACnB,IAED,eAAS,KAAK,EAAE,YAAY,IAC1B,WAAK,KAAK,EAAC,EAAE,IACX,WAAK,KAAK,EAAC,0BAA0B,IACnC,SAAG,KAAK,EAAC,EAAE,IAAE,OAAO,CAAC,OAAO,CAAC,aAAa,CAAK,EAC/C,SAAG,KAAK,EAAC,EAAE,GAAK,EAChB,SAAG,KAAK,EAAC,GAAG,IAAE,OAAO,CAAC,OAAO,CAAC,OAAO,CAAK,EAC1C,SAAG,KAAK,EAAC,EAAE,IAAE,OAAO,CAAC,OAAO,CAAC,eAAe,CAAK,EACjD,SAAG,KAAK,EAAC,GAAG,IAAE,OAAO,CAAC,OAAO,CAAC,aAAa,CAAK,CAC5C,EACN,UAAI,KAAK,EAAC,oBAAoB,IAAE,OAAO,CAAC,OAAO,CAAC,aAAa,CAAM,EAClE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,GAAG;YAC1B,IAAI,UAAU,GAAG,IAAI,CAAC;YACtB,IAAI;gBACF,oBAAoB,CAAC,KAAK,CAAC,CAAC;aAC7B;YAAC,OAAO,KAAK,EAAE;gBACd,UAAU,GAAG,KAAK,CAAC;aACpB;;YAED,QACE,EAAC,QAAQ,QACN,GAAG,KAAK,CAAC,KACR,WAAK,KAAK,EAAC,kBAAkB,IAC3B,UAAI,KAAK,EAAC,mCAAmC,IAAE,OAAO,CAAC,OAAO,CAAC,sBAAsB,CAAM,EAC3F,SAAG,KAAK,EAAC,iCAAiC,IAAE,OAAO,CAAC,OAAO,CAAC,sBAAsB,CAAK,CACnF,CACP,EACD,WAAK,GAAG,EAAE,GAAG,EAAE,KAAK,EAAC,YAAY,IAC/B,WAAK,KAAK,EAAC,qBAAqB,IAC9B,aAAO,OAAO,EAAE,cAAc,GAAG,EAAE,EAAE,KAAK,EAAC,aAAa,iBAEhD,EACR,oBAAc,KAAK,EAAC,aAAa,EAAC,MAAM,EAAE,aAAa,CAAC,KAAK,CAAC,UAAU,IACtE,uCACgB,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,EAC/D,IAAI,EAAC,OAAO,EACZ,EAAE,EAAE,cAAc,GAAG,EAAE,EACvB,WAAW,EAAC,YAAY,mBACT,CAAC,IAAI,IAAI,CAAC,eAAe,CAAC,GAAG,EAAE,EAAE,UAAU,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,EACvE,KAAK,EAAE,KAAK,CAAC,UAAU,EACvB,SAAS,EAAE,EAAE,GACI,CACN,CACX,EACN,WAAK,KAAK,EAAC,qBAAqB,IAC9B,aAAO,KAAK,EAAC,aAAa,gBAAkB,EAC5C,oBAAc,KAAK,EAAC,aAAa,EAAC,MAAM,EAAE,aAAa,CAAC,KAAK,CAAC,SAAS,IACrE,uCACgB,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,EAC9D,IAAI,EAAC,OAAO,EACZ,EAAE,EAAE,aAAa,GAAG,EAAE,EACtB,WAAW,EAAC,WAAW,mBACR,CAAC,IAAI,IAAI,CAAC,eAAe,CAAC,GAAG,EAAE,EAAE,UAAU,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,EACvE,KAAK,EAAE,KAAK,CAAC,SAAS,EACtB,SAAS,EAAE,EAAE,GACI,CACN,CACX,EACN,WAAK,KAAK,EAAC,qBAAqB,IAC9B,SAAG,KAAK,EAAC,aAAa,IAAE,OAAO,CAAC,OAAO,CAAC,OAAO,CAAK,EACpD,oBAAc,KAAK,EAAC,aAAa,EAAC,MAAM,EAAE,aAAa,CAAC,KAAK,CAAC,GAAG,IAC/D,uCACgB,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,EACxD,EAAE,EAAE,OAAO,GAAG,EAAE,EAChB,IAAI,EAAE,QAAQ,EACd,IAAI,EAAC,OAAO,EACZ,WAAW,EAAC,EAAE,mBACC,CAAC;oBACd,IAAI,CAAC,eAAe,CAAC,GAAG,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC;iBAC9C,EACD,KAAK,EAAE,KAAK,CAAC,GAAG,GACC,CACN,CACX,EACN,WAAK,KAAK,EAAC,qBAAqB,IAC9B,SAAG,KAAK,EAAC,aAAa,IAAE,OAAO,CAAC,OAAO,CAAC,eAAe,CAAK,EAC5D,WAAK,KAAK,EAAC,aAAa,IACtB,yBACE,IAAI,EAAC,OAAO,EACZ,OAAO,EAAC,QAAQ,kBACF,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,EACrE,eAAe,EAAE,IAAI,CAAC,eAAe,EACrC,EAAE,EAAE,qCAAqC,GAAG,EAAE,EAC9C,KAAK,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EACtD,OAAO,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,EAAE,QAAQ,EAAE,KAAK,KAAK,CAAC,OAAO,EAAE,EAAE,EAAE,QAAQ,EAAE,CAAC,EACtF,eAAe,EAAE,CAAC,IAAI,IAAI,CAAC,eAAe,CAAC,GAAG,EAAE,EAAE,UAAU,EAAE,CAAC,CAAC,MAAM,EAAE,EAAE,EAAE,QAAQ,EAAE,IAAI,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,EACpH,SAAS,EAAE,IAAI,CAAC,SAAS,GACN,CACjB,CACF,EACN,WAAK,KAAK,EAAC,qBAAqB,IAC9B,SAAG,KAAK,EAAC,aAAa,IAAE,OAAO,CAAC,OAAO,CAAC,aAAa,CAAK,EAC1D,WAAK,KAAK,EAAE,wCAAwC,IAClD,iBACE,KAAK,EAAC,qBAAqB,EAC3B,YAAY,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,SAAS,EACxC,KAAK,EAAE,KAAK,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAChC,QAAQ,EAAE,CAAC;oBACT,IAAI,CAAC,eAAe,CAAC,GAAG,EAAE;wBACxB,OAAO,EAAE;4BACP,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO;4BAC3B,IAAI,EAAE;gCACJ,IAAI,EAAG,CAAC,CAAC,MAAc,CAAC,KAAK;gCAC7B,WAAW,EAAE,EAAE;6BAChB;yBACF;qBACF,CAAC,CAAC;iBACJ,EACD,IAAI,EAAC,OAAO,IAEX,IAAI,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;gBAClB,MAAM,KAAK,GAAG,CAAC,CAAC,cAAc,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,EAAE,CAAC,IAAI,CAAC,CAAC,eAAe,CAAC,CAAC;gBACnF,QACE,iBAAW,KAAK,EAAE,CAAC,CAAC,WAAW,CAAC,EAAE,KAAK,EAAE,KAAK,IAC3C,KAAK,CACI,EACZ;aACH,CAAC,CACQ,EACZ,gBACE,IAAI,EAAC,OAAO,kBACE,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,EAC3D,KAAK,EAAC,sBAAsB,EAC5B,YAAY,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,EACpC,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,EAC7B,SAAS,EAAE,EAAE,EACb,WAAW,EAAC,OAAO,EACnB,QAAQ,EAAE,CAAC,IACT,IAAI,CAAC,eAAe,CAAC,GAAG,EAAE;oBACxB,OAAO,EAAE;wBACP,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO;wBAC3B,MAAM,EAAG,CAAC,CAAC,MAAc,CAAC,KAAK;qBAChC;iBACF,CAAC,GAEM,CACR,CACF,CACF,CACG,EACX;SACH,CAAC,CACE,CACE,CACL,EACP;KACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":["moment"],"sources":["src/components/ir-booking-details/ir-room-guests/data.ts","src/components/ir-booking-details/ir-room-guests/ir-room-guests-form/ir-room-guests-form.css?tag=ir-room-guests-form&encapsulation=scoped","src/components/ir-booking-details/ir-room-guests/ir-room-guests-form/ir-room-guests-form.tsx"],"sourcesContent":["import { SharedPerson } from '@/models/booking.dto';\nimport moment from 'moment';\nimport { FactoryArg, MaskedRange } from 'imask';\n\nexport const defaultGuest: SharedPerson = {\n  id: -1,\n  full_name: '',\n  country_id: null,\n  dob: '',\n  id_info: {\n    type: {\n      code: null,\n      description: null,\n    },\n    number: '',\n  },\n  address: null,\n  alternative_email: null,\n  cci: null,\n  city: null,\n  country: undefined,\n  country_phone_prefix: null,\n  email: null,\n  first_name: '',\n  last_name: '',\n  mobile: null,\n  nbr_confirmed_bookings: 0,\n  notes: null,\n  password: null,\n  subscribe_to_news_letter: null,\n};\n/**Date of birth mask for room guests  with min */\nexport const dateMask: FactoryArg = {\n  mask: Date,\n  pattern: 'DD/MM/YYYY',\n  lazy: false,\n  min: moment('1900-01-01', 'YYYY-MM-DD').toDate(),\n  max: new Date(),\n  format: date => moment(date).format('DD/MM/YYYY'),\n  parse: str => moment(str, 'DD/MM/YYYY').toDate(),\n  autofix: true,\n  placeholderChar: '_',\n  blocks: {\n    YYYY: {\n      mask: MaskedRange,\n      from: 1900,\n      to: new Date().getFullYear(),\n      placeholderChar: 'Y',\n    },\n    MM: {\n      mask: MaskedRange,\n      from: 1,\n      to: 12,\n      placeholderChar: 'M',\n    },\n    DD: {\n      mask: MaskedRange,\n      from: 1,\n      to: 31,\n      placeholderChar: 'D',\n    },\n  },\n};\n",":host {\n  display: block;\n  height: 100%;\n  position: relative;\n  text-align: start !important;\n  padding-bottom: 1rem !important;\n}\n.id-select {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  border-right-width: 0;\n}\n:host {\n  display: block;\n  width: 100%;\n}\n\n/* .guest-grid > * {\n  height: 100%;\n} */\n\n.guests-labels {\n  display: none;\n}\n\n.sharing_persons_label {\n  display: none;\n}\n.loading-container {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 0;\n  padding: 0;\n}\n.guest_document input {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.guests-labels *,\n.sharing_persons_label {\n  margin-bottom: 0.5rem;\n  padding-bottom: 0;\n}\n.room-guest__info-container {\n  display: flex;\n  flex: 1 1 0%;\n  align-items: center;\n}\n.room-guest__document::part(base):dir(ltr),\n.room-guest__id-info::part(combobox):dir(rtl) {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.room-guest__document {\n  flex: 1 1 0%;\n}\n\n.room-guest__id-info::part(combobox):dir(ltr),\n.room-guest__document::part(base):dir(rtl) {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n}\n\n.room-guest__id-info::part(combobox):dir(ltr) {\n  border-right-width: 0;\n}\n\n.room-guest__id-info::part(combobox):dir(rtl) {\n  border-left-width: 0;\n}\n\n.room-guest__id-info[open],\n.room-guest__id-info:focus-visible,\n.room-guest__id-info:focus-within {\n  z-index: 2;\n}\n\n.room-guest__section {\n  display: flex;\n  /* align-items: center; */\n  flex-direction: column;\n  margin-bottom: 1rem;\n  /* width: 100%; */\n}\n.room-guest__section p {\n  margin: 0;\n  padding: 0;\n}\n.guest_label {\n  width: 100px;\n  display: inline-block;\n  position: relative;\n\n  color: var(--wa-form-control-label-color);\n  font-weight: var(--wa-form-control-label-font-weight);\n  line-height: var(--wa-form-control-label-line-height);\n  margin-bottom: 0.5em !important;\n}\n/*sm*/\n@media (min-width: 640px) {\n}\n\n/*md*/\n@media (min-width: 768px) {\n  .sharing_persons_label {\n    display: block;\n  }\n  .guest_country_picker {\n    margin-bottom: 3px;\n  }\n  .room-guest__section {\n    display: block;\n  }\n  .guest-grid {\n    display: grid;\n    grid-template-columns:\n      minmax(0, 120px) /* First name */\n      minmax(0, 120px) /* Last name */\n      minmax(0, 120px) /* DOB */\n      minmax(0, 120px) /* Nationality */\n      minmax(0, 1fr);\n    gap: 0.5rem;\n    align-items: flex-start;\n  }\n\n  .guest_label,\n  .sharing_persons_heading,\n  .main_guest_heading {\n    display: none;\n  }\n}\n\n/*lg*/\n@media (min-width: 1024px) {\n}\n\n/*xl*/\n@media (min-width: 1280px) {\n}\n\n/*2xl*/\n@media (min-width: 1536px) {\n}\n","import { SharedPerson, validateSharedPerson, ZSharedPerson } from '@/models/booking.dto';\n\nimport locales from '@/stores/locales.store';\nimport { Component, Event, EventEmitter, Fragment, Prop, State, h } from '@stencil/core';\nimport moment from 'moment';\nimport { dateMask, defaultGuest } from '../data';\nimport { BookingService } from '@/services/booking.service';\nimport { ICountry, IEntries } from '@/models/IBooking';\nimport { ZodError } from 'zod';\n@Component({\n  tag: 'ir-room-guests-form',\n  styleUrl: 'ir-room-guests-form.css',\n  scoped: true,\n})\nexport class IrRoomGuestsForm {\n  /**\n   * The name of the room currently being displayed.\n   * Used to label the room in the user interface for clarity.\n   */\n  @Prop() roomName: string;\n\n  /**\n   * A unique identifier for the room.\n   * This is used to distinguish between rooms, especially when performing operations like saving or checking in guests.\n   */\n  @Prop() identifier: string;\n\n  /**\n   * An array of people sharing the room.\n   * Contains information about the {locales.entries.Lcz_MainGuest} and additional guests, such as their name, date of birth, {locales.entries.Lcz_Nationality}, and ID details.\n   */\n  @Prop() sharedPersons: SharedPerson[] = [];\n\n  /**\n   * The total number of guests for the room.\n   * Determines how many guest input forms to display in the UI.\n   */\n  @Prop() totalGuests: number = 0;\n\n  /**\n   * A list of available countries.\n   * Used to populate dropdowns for selecting the {locales.entries.Lcz_Nationality} of guests.\n   */\n  @Prop() countries: ICountry[];\n\n  /**\n   * A boolean indicating whether the room is in the process of being checked in.\n   * If true, additional actions like saving the room state as \"checked in\" are performed.\n   */\n  @Prop() checkIn: boolean;\n\n  /**\n   * The language used for displaying text content in the component.\n   * Defaults to English ('en'), but can be set to other supported languages.\n   */\n  @Prop() language: string = 'en';\n\n  /**\n   * A unique booking number associated with the room.\n   * This is used for backend operations like saving guest information or checking in the room.\n   */\n  @Prop() bookingNumber: string;\n\n  @State() guests: SharedPerson[] = [];\n  @State() idTypes: IEntries[] = [];\n  @State() error: Record<string, boolean> = {};\n  @State() isLoading: boolean;\n  @State() propertyCountry: ICountry;\n  @State() autoValidate = false;\n\n  @Event({ composed: true, bubbles: true }) closeModal: EventEmitter<null>;\n  @Event({ composed: true, bubbles: true }) resetBookingEvt: EventEmitter<null>;\n  @Event({ composed: true, bubbles: true }) updateRoomGuests: EventEmitter<{ identifier: string; guests: SharedPerson[] }>;\n\n  private bookingService = new BookingService();\n\n  componentWillLoad() {\n    this.init();\n    this.initializeGuests();\n  }\n\n  private async init() {\n    try {\n      this.isLoading = true;\n      const [country, idTypes] = await Promise.all([this.bookingService.getUserDefaultCountry(), this.bookingService.getSetupEntriesByTableName('_ID_TYPE')]);\n      this.idTypes = idTypes;\n      if (country) {\n        this.propertyCountry = this.countries.find(c => c.id === country.COUNTRY_ID);\n      }\n    } catch (error) {\n      console.error(error);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  private initializeGuests(): void {\n    let guests = [];\n    if (this.totalGuests > this.sharedPersons.length) {\n      const defaultGuestsCount = this.totalGuests - this.sharedPersons.length;\n      guests = [\n        ...this.sharedPersons,\n        ...Array(defaultGuestsCount).fill({\n          ...defaultGuest,\n          id_info: {\n            ...defaultGuest.id_info,\n            type: {\n              code: this.idTypes[0]?.CODE_NAME || '001',\n              description: this.idTypes[0]?.CODE_VALUE_EN || '',\n            },\n            number: '',\n          },\n        }),\n      ];\n    } else {\n      guests = [...this.sharedPersons];\n    }\n    guests = guests.map(g => ({ ...g, dob: new Date(g.dob).getFullYear() === 1900 ? null : g.dob }));\n    this.guests = guests.map(g => ({ ...g, dob: g.dob ? moment(new Date(g.dob)).format('DD/MM/YYYY') : '', country_id: g.country ? g.country.id : null }));\n  }\n\n  private updateGuestInfo(index: number, params: Partial<SharedPerson>) {\n    const tempGuests = [...this.guests];\n    let tempGuest = tempGuests[index];\n    tempGuest = { ...tempGuest, ...params };\n    tempGuests[index] = tempGuest;\n    this.guests = [...tempGuests];\n  }\n\n  private async saveGuests() {\n    try {\n      this.error = {};\n      this.autoValidate = true;\n      console.log({\n        sharedPersons: this.sharedPersons,\n        guests: this.guests,\n      });\n      // ZSharedPersons.parse(this.guests);\n      for (const guest of this.guests) {\n        validateSharedPerson(guest);\n      }\n      await this.bookingService.handleExposedRoomGuests({\n        booking_nbr: this.bookingNumber,\n        identifier: this.identifier,\n        guests: this.guests\n          .map(g => {\n            if (!g.first_name && g.id === -1) {\n              return null;\n            }\n            return { ...g, dob: g.dob ? moment(g.dob, 'DD/MM/YYYY').format('YYYY-MM-DD') : null };\n          })\n          .filter(Boolean),\n      });\n      if (this.checkIn) {\n        await this.bookingService.handleExposedRoomInOut({\n          booking_nbr: this.bookingNumber,\n          room_identifier: this.identifier,\n          status: '001',\n        });\n      }\n      this.closeModal.emit(null);\n      this.updateRoomGuests.emit({ identifier: this.identifier, guests: this.guests });\n      this.resetBookingEvt.emit();\n    } catch (error) {\n      console.log(error);\n      if (error instanceof ZodError) {\n        let errors = {};\n        error.issues.forEach(e => {\n          errors[e.path[e.path.length - 1]] = true;\n        });\n        this.error = { ...errors };\n      }\n    }\n  }\n\n  render() {\n    if (this.isLoading) {\n      return (\n        <div class={'loading-container'}>\n          <ir-spinner></ir-spinner>\n        </div>\n      );\n    }\n    return (\n      <form\n        id={`room-guests__${this.identifier}`}\n        class=\"sheet-container\"\n        style={{ minWidth: '300px' }}\n        onSubmit={e => {\n          e.preventDefault();\n          this.saveGuests();\n        }}\n      >\n        <section class={'sheet-body'}>\n          <div class=\"\">\n            <div class=\"guest-grid guests-labels\">\n              <p class=\"\">{locales.entries.Lcz_MainGuest}</p>\n              <p class=\"\"></p>\n              <p class=\" \">{locales.entries.Lcz_DOB}</p>\n              <p class=\"\">{locales.entries.Lcz_Nationality}</p>\n              <p class=\" \">{locales.entries.Lcz_Documents}</p>\n            </div>\n            <h5 class=\"main_guest_heading\">{locales.entries.Lcz_MainGuest}</h5>\n            {this.guests.map((guest, idx) => {\n              let isRowValid = true;\n              try {\n                validateSharedPerson(guest);\n              } catch (error) {\n                isRowValid = false;\n              }\n              // console.log(`row ${idx}=>${isRowValid}`);\n              return (\n                <Fragment>\n                  {idx === 1 && (\n                    <div class=\"d-flex mx-0 px-0\">\n                      <h5 class=\"mx-0 px-0 sharing_persons_heading\">{locales.entries.Lcz_PersonsSharingRoom}</h5>\n                      <p class=\"mx-0 px-0 sharing_persons_label\">{locales.entries.Lcz_PersonsSharingRoom}</p>\n                    </div>\n                  )}\n                  <div key={idx} class=\"guest-grid\">\n                    <div class=\"room-guest__section\">\n                      <label htmlFor={`first_name_${idx}`} class=\"guest_label\">\n                        First name\n                      </label>\n                      <ir-validator class=\"flex-grow-1\" schema={ZSharedPerson.shape.first_name}>\n                        <ir-custom-input\n                          aria-invalid={String(!!this.error['first_name'] && !isRowValid)}\n                          size=\"small\"\n                          id={`first_name_${idx}`}\n                          placeholder=\"First name\"\n                          onText-change={e => this.updateGuestInfo(idx, { first_name: e.detail })}\n                          value={guest.first_name}\n                          maxlength={40}\n                        ></ir-custom-input>\n                      </ir-validator>\n                    </div>\n                    <div class=\"room-guest__section\">\n                      <label class=\"guest_label\">Last name</label>\n                      <ir-validator class=\"flex-grow-1\" schema={ZSharedPerson.shape.last_name}>\n                        <ir-custom-input\n                          aria-invalid={String(!!this.error['last_name'] && !isRowValid)}\n                          size=\"small\"\n                          id={`last_name_${idx}`}\n                          placeholder=\"Last name\"\n                          onText-change={e => this.updateGuestInfo(idx, { first_name: e.detail })}\n                          value={guest.last_name}\n                          maxlength={40}\n                        ></ir-custom-input>\n                      </ir-validator>\n                    </div>\n                    <div class=\"room-guest__section\">\n                      <p class=\"guest_label\">{locales.entries.Lcz_DOB}</p>\n                      <ir-validator class=\"flex-grow-1\" schema={ZSharedPerson.shape.dob}>\n                        <ir-custom-input\n                          aria-invalid={String(!!this.error['dob'] && !isRowValid)}\n                          id={`dob_${idx}`}\n                          mask={dateMask}\n                          size=\"small\"\n                          placeholder=\"\"\n                          onText-change={e => {\n                            this.updateGuestInfo(idx, { dob: e.detail });\n                          }}\n                          value={guest.dob}\n                        ></ir-custom-input>\n                      </ir-validator>\n                    </div>\n                    <div class=\"room-guest__section\">\n                      <p class=\"guest_label\">{locales.entries.Lcz_Nationality}</p>\n                      <div class=\"flex-grow-1\">\n                        <ir-country-picker\n                          size=\"small\"\n                          variant=\"modern\"\n                          aria-invalid={String(!!this.error['country_id'] && !guest.country_id)}\n                          propertyCountry={this.propertyCountry}\n                          id={`{locales.entries.Lcz_Nationality}_${idx}`}\n                          error={!!this.error['country_id'] && !guest.country_id}\n                          country={this.countries?.find(c => c.id?.toString() === guest.country?.id?.toString())}\n                          onCountryChange={e => this.updateGuestInfo(idx, { country_id: e.detail?.id?.toString() ?? null, country: e.detail })}\n                          countries={this.countries}\n                        ></ir-country-picker>\n                      </div>\n                    </div>\n                    <div class=\"room-guest__section\">\n                      <p class=\"guest_label\">{locales.entries.Lcz_Documents}</p>\n                      <div class={'room-guest__info-container flex-grow-1'}>\n                        <wa-select\n                          class=\"room-guest__id-info\"\n                          defaultValue={this.idTypes[0]?.CODE_NAME}\n                          value={guest.id_info?.type?.code}\n                          onchange={e => {\n                            this.updateGuestInfo(idx, {\n                              id_info: {\n                                ...this.guests[idx].id_info,\n                                type: {\n                                  code: (e.target as any).value,\n                                  description: '',\n                                },\n                              },\n                            });\n                          }}\n                          size=\"small\"\n                        >\n                          {this.idTypes?.map(t => {\n                            const label = t[`CODE_VALUE_${this.language.toUpperCase()}`] ?? t[`CODE_VALUE_EN`];\n                            return (\n                              <wa-option value={t['CODE_NAME']} label={label}>\n                                {label}\n                              </wa-option>\n                            );\n                          })}\n                        </wa-select>\n                        <wa-input\n                          size=\"small\"\n                          aria-invalid={String(!!this.error['number'] && !isRowValid)}\n                          class=\"room-guest__document\"\n                          defaultValue={guest?.id_info?.number}\n                          value={guest?.id_info?.number}\n                          maxlength={18}\n                          placeholder=\"12345\"\n                          onchange={e =>\n                            this.updateGuestInfo(idx, {\n                              id_info: {\n                                ...this.guests[idx].id_info,\n                                number: (e.target as any).value,\n                              },\n                            })\n                          }\n                        ></wa-input>\n                      </div>\n                    </div>\n                  </div>\n                </Fragment>\n              );\n            })}\n          </div>\n        </section>\n      </form>\n    );\n  }\n}\n"],"version":3}