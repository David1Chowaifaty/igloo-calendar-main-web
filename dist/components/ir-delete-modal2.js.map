{"file":"ir-delete-modal2.js","mappings":"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","names":[],"sources":["src/components/ir-housekeeping/ir-delete-modal/ir-delete-modal.css?tag=ir-delete-modal","src/components/ir-housekeeping/ir-delete-modal/ir-delete-modal.tsx"],"sourcesContent":["/* .backdropModal {\n  background-color: rgba(0, 0, 0, 0.5);\n  z-index: 1000;\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 100%;\n  opacity: 0;\n  transition: opacity 0.3s ease-in-out;\n  pointer-events: none;\n}\n.backdropModal.active {\n  cursor: pointer;\n  opacity: 1 !important;\n  pointer-events: all;\n}\n\n.ir-modal[data-state='opened'] {\n  opacity: 1;\n  \n  visibility: visible; \n  pointer-events: all; \n  transition: all 0.3s ease-in-out;\n}\n.ir-alert-content {\n  padding: 10px;\n  background: white;\n  border-radius: 5px;\n}\n.modal {\n  z-index: 1001 !important;\n}\n\n.modal-dialog {\n  height: 100vh;\n  display: flex;\n  align-items: center;\n}\n.ir-alert-footer {\n  gap: 10px;\n}\n.ir-modal {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 1050;\n  width: 90%;\n  max-width: 32rem;\n  overflow: hidden;\n  outline: 0;\n  opacity: 0;\n  transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;\n  visibility: hidden;\n  pointer-events: none;\n  }\n  \n  .ir-modal.active {\n    opacity: 1;\n    transform: translate(-50%, 0);\n    visibility: visible; \n    pointer-events: all; \n    transition: all 0.3s ease-in-out;\n    } */\n:host {\n  font-size: 1rem;\n  font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n}\n.modal-backdrop {\n  background-color: rgba(0, 0, 0, 0.5) !important;\n}\n\n.ir-alert-footer {\n  gap: 10px;\n}\n\n.exit-icon {\n  position: absolute;\n  right: 10px;\n  top: 5px;\n  margin: 0;\n}\n","import { Component, EventEmitter, Listen, Method, Prop, State, h, Event } from '@stencil/core';\nimport housekeeping_store from '@/stores/housekeeping.store';\nimport { HouseKeepingService } from '@/services/housekeeping.service';\nimport { IHouseKeepers } from '@/models/housekeeping';\nimport locales from '@/stores/locales.store';\n\n@Component({\n  tag: 'ir-delete-modal',\n  styleUrl: 'ir-delete-modal.css',\n  shadow: false,\n})\nexport class IrDeleteModal {\n  @Prop() user: IHouseKeepers;\n\n  @State() isOpen: boolean = false;\n  @State() selectedId: string = '';\n  @State() loadingBtn: 'confirm' | null = null;\n\n  @Event() modalClosed: EventEmitter<null>;\n  @Event() resetData: EventEmitter<string>;\n\n  private housekeepingService = new HouseKeepingService();\n  private modalEl: HTMLDivElement;\n\n  @Method()\n  async closeModal() {\n    if (this.modalEl) {\n      $(this.modalEl).modal('hide');\n      this.isOpen = false;\n      this.modalClosed.emit(null);\n    }\n  }\n  @Method()\n  async openModal() {\n    if (this.modalEl) {\n      $(this.modalEl).modal({\n        focus: true,\n        backdrop: true,\n        keyboard: true,\n      });\n      $(this.modalEl).modal('show');\n      this.isOpen = true;\n    }\n  }\n\n  @Listen('clickHandler')\n  async btnClickHandler(event: CustomEvent) {\n    let target = event.target as HTMLInputElement;\n    let name = target.name;\n    try {\n      if (name === 'confirm') {\n        this.loadingBtn = 'confirm';\n        if (this.selectedId === '') {\n          await this.housekeepingService.editExposedHKM(this.user, true);\n        } else {\n          const newAssignedUnits = this.user.assigned_units.map(u => ({ hkm_id: +this.selectedId, is_to_assign: true, unit_id: u.id }));\n          await this.housekeepingService.manageExposedAssignedUnitToHKM(housekeeping_store.default_properties.property_id, newAssignedUnits);\n          const { assigned_units, is_soft_deleted, is_active, ...user } = this.user;\n          await this.housekeepingService.editExposedHKM(user, true);\n        }\n        this.resetData.emit(null);\n      }\n      if (name === 'cancel') {\n        this.closeModal();\n      }\n    } catch (error) {\n      console.error(error);\n    } finally {\n      if (this.loadingBtn) {\n        this.loadingBtn = null;\n        this.closeModal();\n      }\n    }\n  }\n  render() {\n    if (!this.user) {\n      return;\n    }\n    return (\n      <div aria-modal={this.isOpen ? 'true' : 'false'} class=\"modal fade\" ref={el => (this.modalEl = el)} tabindex=\"-1\">\n        <div class=\"modal-dialog modal-dialog-centered\">\n          <div class=\"modal-content\">\n            <div class=\"modal-body\">\n              <div class={`ir-alert-header mb-1 d-flex align-items-center justify-content-between border-0 py-0 m-0 `}>\n                <p class=\"p-0 my-0 modal-title\">{this.user.assigned_units.length > 0 ? locales.entries.Lcz_AssignUnitsTo : locales.entries.Lcz_ConfirmDeletion}</p>\n                <ir-button class=\"exit-icon\" variant=\"icon\" icon_name=\"xmark\" onClickHandler={() => this.closeModal()}></ir-button>\n              </div>\n              {this.user.assigned_units.length > 0 && (\n                <div class=\"modal-body text-left p-0 mb-2\">\n                  <ir-select\n                    firstOption={locales.entries.Lcz_nobody}\n                    selectedValue={this.selectedId}\n                    onSelectChange={e => (this.selectedId = e.detail)}\n                    LabelAvailable={false}\n                    data={housekeeping_store.hk_criteria.housekeepers\n                      .filter(hk => hk.id !== this.user.id)\n                      .map(m => ({\n                        value: m.id.toString(),\n                        text: m.name,\n                      }))\n                      .sort((a, b) => a.text.toLowerCase().localeCompare(b.text.toLowerCase()))}\n                  ></ir-select>\n                </div>\n              )}\n\n              <div class={`ir-alert-footer border-0 d-flex justify-content-end`}>\n                <ir-button icon={''} btn_color={'secondary'} btn_block text={locales.entries.Lcz_Cancel} name={'cancel'}></ir-button>\n                <ir-button isLoading={this.loadingBtn === 'confirm'} icon={''} btn_color={'primary'} btn_block text={locales.entries.Lcz_Confirm} name={'confirm'}></ir-button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n"],"version":3}