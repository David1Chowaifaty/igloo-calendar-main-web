{"file":"ir-country-picker2.js","mappings":"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","names":["__stencil_proxyCustomElement"],"sources":["src/components/ui/ir-country-picker/ir-country-picker.css?tag=ir-country-picker&encapsulation=scoped","src/components/ui/ir-country-picker/ir-country-picker.tsx"],"sourcesContent":[":host {\r\n  display: block;\r\n  margin: 0;\r\n  padding: 0;\r\n  box-sizing: border-box;\r\n}\r\n.combobox-menu {\r\n  max-height: 200px;\r\n  overflow: auto;\r\n}\r\n","import { ICountry } from '@/models/IBooking';\r\nimport { Component, Event, EventEmitter, Fragment, Prop, State, Watch, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-country-picker',\r\n  styleUrl: 'ir-country-picker.css',\r\n  scoped: true,\r\n})\r\nexport class IrCountryPicker {\r\n  @Prop() countries: ICountry[] = [];\r\n  @Prop() country: ICountry;\r\n  @Prop({ mutable: true }) error: boolean;\r\n  @Prop() propertyCountry: ICountry;\r\n  @Prop() label: string;\r\n  @Prop() testId: string;\r\n  @Prop() autoValidate: boolean = false;\r\n\r\n  @State() inputValue: string;\r\n  @State() selectedCountry: ICountry;\r\n  @State() filteredCountries: ICountry[] = [];\r\n  @State() searching: boolean = false;\r\n\r\n  @Event() countryChange: EventEmitter<ICountry>;\r\n\r\n  private debounceTimeout: NodeJS.Timeout;\r\n\r\n  componentWillLoad() {\r\n    this.filteredCountries = [...this.countries];\r\n    if (this.country) {\r\n      this.inputValue = this.country.name;\r\n      this.selectedCountry = this.country;\r\n    }\r\n  }\r\n\r\n  @Watch('country')\r\n  handleCountryChange(newCountry: ICountry, oldCountry: ICountry) {\r\n    if (newCountry?.id !== oldCountry?.id) {\r\n      this.inputValue = this.country?.name;\r\n      this.selectedCountry = newCountry;\r\n    }\r\n  }\r\n\r\n  private filterCountries() {\r\n    if (this.inputValue === '' && this.country) {\r\n      this.selectCountry(null);\r\n    }\r\n    clearTimeout(this.debounceTimeout);\r\n    this.debounceTimeout = setTimeout(() => {\r\n      if (!this.inputValue) {\r\n        this.filteredCountries = [...this.countries];\r\n      } else {\r\n        this.filteredCountries = this.countries.filter(c => c.name.toLowerCase().includes(this.inputValue.toLowerCase()));\r\n      }\r\n    }, 300);\r\n  }\r\n\r\n  private selectCountry(c: ICountry | null) {\r\n    this.selectedCountry = c;\r\n    this.inputValue = c?.name;\r\n    this.filteredCountries = [...this.countries];\r\n    this.countryChange.emit(c);\r\n  }\r\n  private scrollToSelected() {\r\n    setTimeout(() => {\r\n      const dropdownItem = document.querySelector(`.dropdown-item.active`);\r\n      if (dropdownItem) {\r\n        dropdownItem.scrollIntoView({ behavior: 'instant', block: 'center' });\r\n      }\r\n    }, 100);\r\n  }\r\n  render() {\r\n    const shouldShowPropertyCountry = this.filteredCountries.length > 0 && this.propertyCountry && (!this.searching || (this.searching && this.inputValue === ''));\r\n    return (\r\n      <form class=\"dropdown m-0 p-0\">\r\n        <ir-input-text\r\n          onTextChange={e => {\r\n            if (!this.searching) {\r\n              this.searching = true;\r\n            }\r\n            this.inputValue = e.detail;\r\n            this.filterCountries();\r\n          }}\r\n          testId={this.testId}\r\n          autoValidate={this.autoValidate}\r\n          label={this.label}\r\n          error={this.error}\r\n          placeholder=\"\"\r\n          class=\"m-0 p-0\"\r\n          value={this.inputValue}\r\n          id=\"dropdownMenuCombobox\"\r\n          data-toggle=\"dropdown\"\r\n          aria-haspopup=\"true\"\r\n          aria-expanded=\"false\"\r\n          onInputFocus={() => this.scrollToSelected()}\r\n          onInputBlur={() => {\r\n            this.searching = false;\r\n            if (this.filteredCountries.length > 0 && this.inputValue && this.inputValue.trim() !== '') {\r\n              this.selectCountry(this.filteredCountries[0]);\r\n            }\r\n          }}\r\n        ></ir-input-text>\r\n\r\n        <div class=\"dropdown-menu combobox-menu\" aria-labelledby=\"dropdownMenuCombobox\">\r\n          {shouldShowPropertyCountry && (\r\n            <Fragment>\r\n              <button\r\n                type=\"button\"\r\n                class={`dropdown-item d-flex align-items-center ${this.selectedCountry?.id === this.propertyCountry.id ? 'active' : ''}`}\r\n                onClick={() => {\r\n                  this.selectCountry(this.propertyCountry);\r\n                }}\r\n              >\r\n                <img src={this.propertyCountry.flag} alt={this.propertyCountry.name} style={{ aspectRatio: '1', height: '15px', borderRadius: '4px' }} />\r\n                <p class=\"pl-1 m-0\">{this.propertyCountry.name}</p>\r\n              </button>\r\n              <div class=\"dropdown-divider\"></div>\r\n            </Fragment>\r\n          )}\r\n          {this.filteredCountries?.map(c => (\r\n            <button\r\n              key={c.id}\r\n              type=\"button\"\r\n              class={`dropdown-item d-flex align-items-center ${this.selectedCountry?.id === c.id ? 'active' : ''}`}\r\n              onClick={() => {\r\n                this.selectCountry(c);\r\n              }}\r\n            >\r\n              <img src={c.flag} alt={c.name} style={{ aspectRatio: '1', height: '15px', borderRadius: '4px' }} />\r\n              <p class=\"pl-1 m-0\">{c.name}</p>\r\n            </button>\r\n          ))}\r\n          {this.filteredCountries?.length === 0 && <p class=\"dropdown-item-text\">Invalid Country</p>}\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n"],"version":3}