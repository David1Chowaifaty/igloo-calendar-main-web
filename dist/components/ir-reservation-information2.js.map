{"file":"ir-reservation-information2.js","mappings":"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","names":[],"sources":["src/components/ir-booking-details/ir-reservation-information/ir-reservation-information.css?tag=ir-reservation-information&encapsulation=scoped","src/components/ir-booking-details/ir-reservation-information/ir-reservation-information.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n","import { colorVariants } from '@/components/ui/ir-icons/icons';\nimport { Booking } from '@/models/booking.dto';\nimport locales from '@/stores/locales.store';\nimport { getPrivateNote } from '@/utils/booking';\nimport { Component, Event, EventEmitter, Prop, State, h } from '@stencil/core';\nimport { ICountry } from '@/models/IBooking';\nimport { _formatDate, _formatTime } from '../functions';\nimport { BookingDetailsSidebarEvents, OpenSidebarEvent } from '../types';\n\n@Component({\n  tag: 'ir-reservation-information',\n  styleUrl: 'ir-reservation-information.css',\n  scoped: true,\n})\nexport class IrReservationInformation {\n  @Prop() booking: Booking;\n  @Prop() countries: ICountry[];\n\n  @State() userCountry: ICountry | null = null;\n  @Event() openSidebar: EventEmitter<OpenSidebarEvent<any>>;\n  componentWillLoad() {\n    const guestCountryId = this.booking?.guest?.country_id;\n    this.userCountry = guestCountryId ? this.countries?.find(country => country.id === guestCountryId) || null : null;\n  }\n  private handleEditClick(e: CustomEvent, type: BookingDetailsSidebarEvents) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.openSidebar.emit({ type });\n  }\n\n  private renderPhoneNumber() {\n    const { mobile_without_prefix, country_phone_prefix, country_id } = this.booking.guest;\n    if (!mobile_without_prefix) {\n      return null;\n    }\n    if (country_phone_prefix) {\n      return country_phone_prefix + ' ' + mobile_without_prefix;\n    }\n    if (country_id) {\n      const selectedCountry = this.countries.find(c => c.id === country_id);\n      if (!selectedCountry) {\n        throw new Error('Invalid country id');\n      }\n      return selectedCountry.phone_prefix + ' ' + mobile_without_prefix;\n    }\n    return mobile_without_prefix;\n    // const { mobile, country_phone_prefix, country_id } = this.booking.guest;\n    // if (!mobile) {\n    //   return null;\n    // }\n    // if (this.booking.is_direct) {\n    //   if (country_phone_prefix) {\n    //     return country_phone_prefix + ' ' + mobile;\n    //   }\n    //   if (country_id) {\n    //     const selectedCountry = this.countries.find(c => c.id === country_id);\n    //     if (!selectedCountry) {\n    //       throw new Error('Invalid country id');\n    //     }\n    //     return selectedCountry.phone_prefix + ' ' + mobile;\n    //   }\n    // }\n    // return mobile;\n  }\n  render() {\n    const privateNote = getPrivateNote(this.booking.extras);\n    return (\n      <div class=\"card\">\n        <div class=\"p-1\">\n          <p>{this.booking.property.name || ''}</p>\n          <ir-label\n            labelText={`${locales.entries.Lcz_Source}:`}\n            content={this.booking.origin.Label}\n            image={{ src: this.booking.origin.Icon, alt: this.booking.origin.Label }}\n          ></ir-label>\n          <ir-label\n            renderContentAsHtml\n            labelText={`${locales.entries.Lcz_BookedOn}:`}\n            content={`${_formatDate(this.booking.booked_on.date)}&nbsp&nbsp&nbsp&nbsp${_formatTime(\n              this.booking.booked_on.hour.toString(),\n              this.booking.booked_on.minute.toString(),\n            )}`}\n          ></ir-label>\n          <ir-label labelText={`${locales.entries.Lcz_BookedBy}:`} content={`${this.booking.guest.first_name} ${this.booking.guest.last_name}`}>\n            {this.booking.guest?.nbr_confirmed_bookings > 1 && !this.booking.agent && (\n              <div class={'m-0 p-0'} slot=\"prefix\">\n                <ir-tooltip message={`${locales.entries.Lcz_BookingsNbr}`.replace('%1', this.booking.guest.nbr_confirmed_bookings.toString())} customSlot>\n                  <div class=\"d-flex align-items-center m-0 p-0\" slot=\"tooltip-trigger\" style={{ gap: '0.25rem' }}>\n                    <p class={'p-0 m-0'} style={{ color: '#FB0AAD' }}>\n                      {this.booking.guest.nbr_confirmed_bookings}\n                    </p>\n                    <ir-icons style={{ '--icon-size': '1rem' }} color=\"#FB0AAD\" name=\"heart-fill\"></ir-icons>\n                  </div>\n                </ir-tooltip>\n              </div>\n            )}\n            <ir-button\n              slot=\"suffix\"\n              variant=\"icon\"\n              icon_name={'edit'}\n              style={{ ...colorVariants.secondary, '--icon-size': '1.1rem' }}\n              onClickHandler={e => this.handleEditClick(e, 'guest')}\n            ></ir-button>\n          </ir-label>\n          {this.booking.guest.mobile && <ir-label labelText={`${locales.entries.Lcz_Phone}:`} content={this.renderPhoneNumber()}></ir-label>}\n          {!this.booking.agent && <ir-label labelText={`${locales.entries.Lcz_Email}:`} content={this.booking.guest.email}></ir-label>}\n          {this.booking.guest.alternative_email && <ir-label labelText={`${locales.entries.Lcz_AlternativeEmail}:`} content={this.booking.guest.alternative_email}></ir-label>}\n          {this.booking?.guest?.address && <ir-label labelText={`${locales.entries.Lcz_Address}:`} content={this.booking.guest.address}></ir-label>}\n          {this.userCountry && (\n            <ir-label\n              labelText={`${locales.entries.Lcz_Country}:`}\n              isCountryImage\n              content={this.userCountry.name}\n              image={{ src: this.userCountry.flag, alt: this.userCountry.name }}\n            ></ir-label>\n          )}\n          {this.booking.guest?.notes && <ir-label display=\"inline\" labelText={`${locales.entries.Lcz_GuestPrivateNote}:`} content={this.booking.guest?.notes}></ir-label>}\n          {this.booking.is_direct && <ir-label labelText={`${locales.entries.Lcz_ArrivalTime}:`} content={this.booking.arrival.description}></ir-label>}\n          {this.booking.promo_key && <ir-label labelText={`${locales.entries.Lcz_Coupon}:`} content={this.booking.promo_key}></ir-label>}\n          {/* {this.booking.agent && <ir-label labelText={`${locales.entries.Lcz_AgentCode?.split(':')[0]}:`} content={this.booking.agent.name}></ir-label>} */}\n          {this.booking.is_in_loyalty_mode && !this.booking.promo_key && (\n            <div class=\"d-flex align-items-center\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" height={18} width={18}>\n                <path\n                  fill=\"#fc6c85\"\n                  d=\"M225.8 468.2l-2.5-2.3L48.1 303.2C17.4 274.7 0 234.7 0 192.8v-3.3c0-70.4 50-130.8 119.2-144C158.6 37.9 198.9 47 231 69.6c9 6.4 17.4 13.8 25 22.3c4.2-4.8 8.7-9.2 13.5-13.3c3.7-3.2 7.5-6.2 11.5-9c0 0 0 0 0 0C313.1 47 353.4 37.9 392.8 45.4C462 58.6 512 119.1 512 189.5v3.3c0 41.9-17.4 81.9-48.1 110.4L288.7 465.9l-2.5 2.3c-8.2 7.6-19 11.9-30.2 11.9s-22-4.2-30.2-11.9zM239.1 145c-.4-.3-.7-.7-1-1.1l-17.8-20c0 0-.1-.1-.1-.1c0 0 0 0 0 0c-23.1-25.9-58-37.7-92-31.2C81.6 101.5 48 142.1 48 189.5v3.3c0 28.5 11.9 55.8 32.8 75.2L256 430.7 431.2 268c20.9-19.4 32.8-46.7 32.8-75.2v-3.3c0-47.3-33.6-88-80.1-96.9c-34-6.5-69 5.4-92 31.2c0 0 0 0-.1 .1s0 0-.1 .1l-17.8 20c-.3 .4-.7 .7-1 1.1c-4.5 4.5-10.6 7-16.9 7s-12.4-2.5-16.9-7z\"\n                />\n              </svg>\n              <p class=\"m-0 p-0 ml-1\">{locales.entries.Lcz_LoyaltyDiscountApplied}</p>\n            </div>\n          )}\n          {this.booking.is_direct ? (\n            <ir-label labelText={`${locales.entries.Lcz_GuestRemark}:`} display=\"inline\" content={this.booking.remark}></ir-label>\n          ) : (\n            <ota-label\n              class={'m-0 p-0'}\n              label={`${locales.entries.Lcz_ChannelNotes || 'Channel notes'}:`}\n              remarks={this.booking.ota_notes}\n              maxVisibleItems={this.booking.ota_notes?.length}\n            ></ota-label>\n          )}\n          <div class=\"d-flex align-items-center justify-content-between\">\n            <ir-label\n              labelText={`${locales.entries.Lcz_BookingPrivateNote}:`}\n              placeholder={locales.entries.Lcz_VisibleToHotelOnly}\n              content={privateNote}\n              display={privateNote ? 'inline' : 'flex'}\n              // ignore_content\n            ></ir-label>\n            <ir-button variant=\"icon\" icon_name=\"edit\" style={colorVariants.secondary} onClickHandler={e => this.handleEditClick(e, 'extra_note')}></ir-button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n"],"version":3}