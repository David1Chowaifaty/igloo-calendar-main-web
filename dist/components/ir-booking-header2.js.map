{"file":"ir-booking-header2.js","mappings":"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","names":["__stencil_proxyCustomElement"],"sources":["src/components/ir-booking-details/ir-booking-header/ir-booking-header.css?tag=ir-booking-header&encapsulation=scoped","src/components/ir-booking-details/ir-booking-header/ir-booking-header.tsx"],"sourcesContent":[":host {\r\n  display: block;\r\n}\r\n.confirmed {\r\n  color: #fff;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.bg-ir-green {\r\n  background: #629a4c;\r\n  padding: 0.2rem 0.3rem;\r\n  /* height: 28px; */\r\n  /* padding-top: 0 !important;\r\n  padding-bottom: 0 !important ; */\r\n}\r\n.bg-ir-red {\r\n  background: #ff4961;\r\n  padding: 0.2rem 0.3rem;\r\n  /* height: 28px; */\r\n  /* padding-top: 0 !important;\r\n  padding-bottom: 0 !important ; */\r\n}\r\n.bg-ir-orange {\r\n  background: #ff9149;\r\n  padding: 0.2rem 0.3rem;\r\n  /* height: 28px; */\r\n  /* padding-top: 0 !important;\r\n  padding-bottom: 0 !important ; */\r\n}\r\n","import { IToast } from '@/components/ui/ir-toast/toast';\r\nimport { colorVariants } from '@/components/ui/ir-icons/icons';\r\nimport { Booking } from '@/models/booking.dto';\r\nimport calendar_data from '@/stores/calendar-data';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\nimport locales from '@/stores/locales.store';\r\nimport { Component, Event, EventEmitter, h, Listen, Prop, State } from '@stencil/core';\r\nimport { BookingDetailsDialogEvents, OpenDialogEvent, OpenSidebarEvent } from '../types';\r\nimport { BookingService } from '@/services/booking.service';\r\n\r\n@Component({\r\n  tag: 'ir-booking-header',\r\n  styleUrl: 'ir-booking-header.css',\r\n  scoped: true,\r\n})\r\nexport class IrBookingHeader {\r\n  @Prop() booking: Booking;\r\n  @Prop() hasReceipt: boolean;\r\n  @Prop() hasPrint: boolean;\r\n  @Prop() hasDelete: boolean;\r\n  @Prop() hasMenu: boolean;\r\n  @Prop() hasCloseButton: boolean;\r\n  @Prop() hasEmail: boolean = true;\r\n\r\n  @State() bookingStatus: string | null = null;\r\n  @State() currentDialogStatus: BookingDetailsDialogEvents;\r\n\r\n  @Event() toast: EventEmitter<IToast>;\r\n  @Event() closeSidebar: EventEmitter<null>;\r\n  @Event() resetBookingEvt: EventEmitter<null>;\r\n  @Event() openSidebar: EventEmitter<OpenSidebarEvent<any>>;\r\n\r\n  private confirmationBG = {\r\n    '001': 'bg-ir-orange',\r\n    '002': 'bg-ir-green',\r\n    '003': 'bg-ir-red',\r\n    '004': 'bg-ir-red',\r\n  };\r\n  private dialogRef: HTMLIrDialogElement;\r\n\r\n  private bookingService = new BookingService();\r\n\r\n  @Listen('selectChange')\r\n  handleSelectChange(e: CustomEvent<any>) {\r\n    e.stopPropagation();\r\n    e.stopImmediatePropagation();\r\n    const target = e.target;\r\n    this.bookingStatus = (target as any).selectedValue;\r\n  }\r\n  private async updateStatus() {\r\n    if (!this.bookingStatus || this.bookingStatus === '-1') {\r\n      this.toast.emit({\r\n        type: 'error',\r\n        description: '',\r\n        title: locales.entries.Lcz_SelectStatus,\r\n        position: 'top-right',\r\n      });\r\n      return;\r\n    }\r\n    try {\r\n      await this.bookingService.changeExposedBookingStatus({\r\n        book_nbr: this.booking.booking_nbr,\r\n        status: this.bookingStatus,\r\n      });\r\n      this.toast.emit({\r\n        type: 'success',\r\n        description: '',\r\n        title: locales.entries.Lcz_StatusUpdatedSuccessfully,\r\n        position: 'top-right',\r\n      });\r\n      this.bookingStatus = null;\r\n      this.resetBookingEvt.emit(null);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  private openDialog(e: OpenDialogEvent) {\r\n    const { type } = e;\r\n    this.currentDialogStatus = type;\r\n    this.dialogRef.openModal();\r\n  }\r\n  private renderDialogBody() {\r\n    switch (this.currentDialogStatus) {\r\n      case 'pms':\r\n        return <ir-pms-logs slot=\"modal-body\" bookingNumber={this.booking.booking_nbr}></ir-pms-logs>;\r\n      case 'events-log':\r\n        return <ir-events-log slot=\"modal-body\" bookingNumber={this.booking.booking_nbr}></ir-events-log>;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div class=\"fluid-container px-1\">\r\n        <div class=\"d-flex flex-column p-0 mx-0 flex-lg-row align-items-md-center justify-content-between mt-1\">\r\n          <div class=\"m-0 p-0 mb-1 mb-lg-0 mt-md-0\">\r\n            <p class=\"font-size-large m-0 p-0\">{`${locales.entries.Lcz_Booking}#${this.booking.booking_nbr}`}</p>\r\n            <p class=\"m-0 p-0\">{!this.booking.is_direct && <span class=\"mr-1 m-0\">{this.booking.channel_booking_nbr}</span>}</p>\r\n          </div>\r\n\r\n          <div class=\"d-flex justify-content-end align-items-center\" style={{ gap: '1rem', flexWrap: 'wrap' }}>\r\n            <span class={`confirmed btn-sm m-0  ${this.confirmationBG[this.booking.status.code]}`}>{this.booking.status.description}</span>\r\n            {this.booking.allowed_actions.length > 0 && this.booking.is_editable && (\r\n              <div class=\"m-0 p-0 d-flex align-items-center\" style={{ gap: '0.25rem' }}>\r\n                <ir-select\r\n                  selectContainerStyle=\"h-28\"\r\n                  selectStyles=\"d-flex status-select align-items-center h-28\"\r\n                  firstOption={locales.entries.Lcz_Select}\r\n                  id=\"update-status\"\r\n                  size=\"sm\"\r\n                  label-available=\"false\"\r\n                  data={this.booking.allowed_actions.map(b => ({ text: b.description, value: b.code }))}\r\n                  textSize=\"sm\"\r\n                  class=\"sm-padding-right m-0 \"\r\n                  selectedValue={this.bookingStatus}\r\n                ></ir-select>\r\n                <ir-button\r\n                  onClickHandler={this.updateStatus.bind(this)}\r\n                  btn_styles=\"h-28\"\r\n                  isLoading={isRequestPending('/Change_Exposed_Booking_Status')}\r\n                  btn_disabled={isRequestPending('/Change_Exposed_Booking_Status')}\r\n                  id=\"update-status-btn\"\r\n                  size=\"sm\"\r\n                  text=\"Update\"\r\n                ></ir-button>\r\n              </div>\r\n            )}\r\n            <ir-button\r\n              size=\"sm\"\r\n              btn_color=\"outline\"\r\n              text={locales.entries.Lcz_EventsLog}\r\n              onClickHandler={e => {\r\n                e.stopImmediatePropagation();\r\n                e.stopPropagation();\r\n                this.openDialog({ type: 'events-log' });\r\n              }}\r\n            ></ir-button>\r\n            {calendar_data.is_pms_enabled && (\r\n              <ir-button\r\n                size=\"sm\"\r\n                btn_color=\"outline\"\r\n                text={locales.entries.Lcz_pms}\r\n                onClick={e => {\r\n                  e.stopImmediatePropagation();\r\n                  e.stopPropagation();\r\n                  this.openDialog({ type: 'pms' });\r\n                }}\r\n              ></ir-button>\r\n            )}\r\n            {this.hasReceipt && <ir-button variant=\"icon\" id=\"receipt\" icon_name=\"reciept\" class=\"\" style={{ '--icon-size': '1.65rem' }}></ir-button>}\r\n            {this.hasPrint && <ir-button variant=\"icon\" id=\"print\" icon_name=\"print\" class=\"\" style={{ '--icon-size': '1.65rem' }}></ir-button>}\r\n            {this.hasEmail && <ir-button variant=\"icon\" id=\"email\" title=\"Email this booking\" icon_name=\"email\" class=\"\" style={{ '--icon-size': '1.65rem' }}></ir-button>}\r\n            {this.hasDelete && <ir-button variant=\"icon\" id=\"book-delete\" icon_name=\"trash\" class=\"\" style={{ ...colorVariants.danger, '--icon-size': '1.65rem' }}></ir-button>}\r\n            {this.hasMenu && <ir-button variant=\"icon\" class=\"mr-1\" id=\"menu\" icon_name=\"menu_list\" style={{ '--icon-size': '1.65rem' }}></ir-button>}\r\n\r\n            {this.hasCloseButton && (\r\n              <ir-button\r\n                id=\"close\"\r\n                variant=\"icon\"\r\n                style={{ '--icon-size': '1.65rem' }}\r\n                icon_name=\"xmark\"\r\n                class=\"ml-2\"\r\n                onClickHandler={e => {\r\n                  e.stopPropagation();\r\n                  e.stopImmediatePropagation();\r\n                  this.closeSidebar.emit(null);\r\n                }}\r\n              ></ir-button>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <ir-dialog\r\n          onOpenChange={e => {\r\n            if (!e.detail) {\r\n              this.currentDialogStatus = null;\r\n            }\r\n          }}\r\n          style={this.currentDialogStatus === 'events-log' && { '--ir-dialog-max-width': '400px' }}\r\n          ref={el => (this.dialogRef = el)}\r\n        >\r\n          {this.renderDialogBody()}\r\n        </ir-dialog>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"version":3}