{"file":"igl-application-info.igl-book-property.igl-book-property-footer.igl-book-property-header.igl-booking-form.igl-booking-overview-page.igl-property-booked-by.igl-room-type.ir-applicable-policies.ir-booking-details.ir-booking-extra-note.ir-booking-guarantee.ir-booking-header.ir-dialog.ir-dropdown.ir-dropdown-item.ir-events-log.ir-extra-service.ir-extra-service-config.ir-extra-services.ir-guest-info.ir-payment-details.ir-payment-folio.ir-payment-item.ir-payment-summary.ir-payments-folio.ir-pickup.ir-pickup-view.ir-pms-logs.ir-reservation-information.ir-room.ir-room-guests.ota-label.entry.js","mappings":"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","names":["moment","sheetCss"],"sources":["src/services/variation.service.ts","src/components/igloo-calendar/igl-book-property/igl-booking-form/igl-application-info/igl-application-info.css?tag=igl-application-info&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-booking-form/igl-application-info/igl-application-info.tsx","src/components/igloo-calendar/igl-book-property/igl-book-property.service.ts","src/components/igloo-calendar/igl-book-property/igl-book-property.css?tag=igl-book-property&encapsulation=scoped","src/common/sheet.css?tag=igl-book-property&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-book-property.tsx","src/components/igloo-calendar/igl-book-property/igl-book-property-footer/igl-book-property-footer.css?tag=igl-book-property-footer&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-book-property-footer/igl-book-property-footer.tsx","src/components/igloo-calendar/igl-book-property/igl-book-property-header/igl-book-property-header.css?tag=igl-book-property-header&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-book-property-header/igl-book-property-header.tsx","src/components/igloo-calendar/igl-book-property/igl-booking-form/igl-booking-form.css?tag=igl-booking-form&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-booking-form/igl-booking-form.tsx","src/components/igloo-calendar/igl-book-property/igl-booking-overview-page/igl-booking-overview-page.css?tag=igl-booking-overview-page&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-booking-overview-page/igl-booking-overview-page.tsx","src/components/igloo-calendar/igl-book-property/igl-booking-form/igl-property-booked-by/igl-property-booked-by.css?tag=igl-property-booked-by&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-booking-form/igl-property-booked-by/igl-property-booked-by.tsx","src/components/igloo-calendar/igl-book-property/igl-booking-overview-page/igl-room-type/igl-room-type.css?tag=igl-room-type&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-booking-overview-page/igl-room-type/igl-room-type.tsx","src/components/HelpButton.tsx","src/components/ir-booking-details/ir-payment-details/ir-applicable-policies/ir-applicable-policies.css?tag=ir-applicable-policies&encapsulation=scoped","src/components/ir-booking-details/ir-payment-details/ir-applicable-policies/ir-applicable-policies.tsx","src/components/ir-booking-details/ir-booking-details.css?tag=ir-booking-details&encapsulation=scoped","src/components/ir-booking-details/ir-booking-details.tsx","src/components/ir-booking-details/ir-booking-extra-note/ir-booking-extra-note.css?tag=ir-booking-extra-note&encapsulation=scoped","src/common/sheet.css?tag=ir-booking-extra-note&encapsulation=scoped","src/components/ir-booking-details/ir-booking-extra-note/ir-booking-extra-note.tsx","src/components/ir-booking-details/ir-payment-details/ir-booking-guarantee/ir-booking-guarantee.css?tag=ir-booking-guarantee&encapsulation=scoped","src/components/ir-booking-details/ir-payment-details/ir-booking-guarantee/ir-booking-guarantee.tsx","src/components/ir-booking-details/ir-booking-header/ir-booking-header.css?tag=ir-booking-header&encapsulation=scoped","src/components/ir-booking-details/ir-booking-header/ir-booking-header.tsx","src/components/ui/ir-dialog/ir-dialog.css?tag=ir-dialog&encapsulation=shadow","src/components/ui/ir-dialog/ir-dialog.tsx","src/components/ui/ir-dropdown/ir-dropdown.css?tag=ir-dropdown&encapsulation=scoped","src/components/ui/ir-dropdown/ir-dropdown.tsx","src/components/ui/ir-dropdown-item/ir-dropdown-item.css?tag=ir-dropdown-item&encapsulation=scoped","src/components/ui/ir-dropdown-item/ir-dropdown-item.tsx","src/components/ir-booking-details/ir-booking-header/events-log/ir-events-log.css?tag=ir-events-log&encapsulation=scoped","src/components/ir-booking-details/ir-booking-header/events-log/ir-events-log.tsx","src/components/ir-booking-details/ir-extra-services/ir-extra-service/ir-extra-service.css?tag=ir-extra-service&encapsulation=scoped","src/components/ir-booking-details/ir-extra-services/ir-extra-service/ir-extra-service.tsx","src/models/booking.dto.ts","src/components/ir-booking-details/ir-extra-services/ir-extra-service-config/ir-extra-service-config.css?tag=ir-extra-service-config&encapsulation=scoped","src/common/sheet.css?tag=ir-extra-service-config&encapsulation=scoped","src/components/ir-booking-details/ir-extra-services/ir-extra-service-config/ir-extra-service-config.tsx","src/components/ir-booking-details/ir-extra-services/ir-extra-services.css?tag=ir-extra-services&encapsulation=scoped","src/components/ir-booking-details/ir-extra-services/ir-extra-services.tsx","src/components/ir-guest-info/ir-guest-info.css?tag=ir-guest-info&encapsulation=scoped","src/common/sheet.css?tag=ir-guest-info&encapsulation=scoped","src/components/ir-guest-info/ir-guest-info.tsx","src/components/ir-booking-details/ir-payment-details/ir-payment-details.css?tag=ir-payment-details&encapsulation=scoped","src/components/ir-booking-details/ir-payment-details/ir-payment-details.tsx","src/components/ir-booking-details/ir-payment-details/ir-payment-folio/ir-payment-folio.css?tag=ir-payment-folio&encapsulation=scoped","src/common/sheet.css?tag=ir-payment-folio&encapsulation=scoped","src/components/ir-booking-details/ir-payment-details/ir-payment-folio/ir-payment-folio.tsx","src/components/ir-booking-details/ir-payment-details/ir-payment-item/ir-payment-item.css?tag=ir-payment-item&encapsulation=scoped","src/components/ir-booking-details/ir-payment-details/ir-payment-item/ir-payment-item.tsx","src/components/ir-booking-details/ir-payment-details/ir-payment-summary/ir-payment-summary.css?tag=ir-payment-summary&encapsulation=scoped","src/components/ir-booking-details/ir-payment-details/ir-payment-summary/ir-payment-summary.tsx","src/components/ir-booking-details/ir-payment-details/ir-payments-folio/ir-payments-folio.css?tag=ir-payments-folio&encapsulation=scoped","src/components/ir-booking-details/ir-payment-details/ir-payments-folio/ir-payments-folio.tsx","src/components/ir-booking-details/ir-pickup/pickup.service.ts","src/components/ir-booking-details/ir-pickup/ir-pickup.css?tag=ir-pickup&encapsulation=scoped","src/common/sheet.css?tag=ir-pickup&encapsulation=scoped","src/components/ir-booking-details/ir-pickup/ir-pickup.tsx","src/components/ir-booking-details/ir-pickup-view/ir-pickup-view.css?tag=ir-pickup-view&encapsulation=scoped","src/components/ir-booking-details/ir-pickup-view/ir-pickup-view.tsx","src/components/ir-booking-details/ir-booking-header/ir-pms-logs/ir-pms-logs.css?tag=ir-pms-logs&encapsulation=scoped","src/components/ir-booking-details/ir-booking-header/ir-pms-logs/ir-pms-logs.tsx","src/components/ir-booking-details/ir-reservation-information/ir-reservation-information.css?tag=ir-reservation-information&encapsulation=scoped","src/components/ir-booking-details/ir-reservation-information/ir-reservation-information.tsx","src/components/ir-booking-details/ir-room/ir-room.css?tag=ir-room&encapsulation=scoped","src/components/ir-booking-details/ir-room/ir-room.tsx","src/components/ir-booking-details/ir-room-guests/data.ts","src/components/ir-booking-details/ir-room-guests/ir-room-guests.css?tag=ir-room-guests&encapsulation=scoped","src/common/sheet.css?tag=ir-room-guests&encapsulation=scoped","src/components/ir-booking-details/ir-room-guests/ir-room-guests.tsx","src/components/ui/ota-label/ota-label.css?tag=ota-label&encapsulation=scoped","src/components/ui/ota-label/ota-label.tsx"],"sourcesContent":["import { Variation } from '@/models/property';\nimport locales from '@/stores/locales.store';\n\nexport default class VariationService {\n  /**\n   * Formats a variation based on the number of infants and returns a formatted string.\n   * @param {Object} params - The input parameters.\n   * @param {Variation} params.baseVariation - The base variation object.\n   * @param {Variation[]} params.variations - A list of available variations.\n   * @param {number} params.infants - The number of infants to adjust the variation for.\n   * @returns {string} A formatted string describing the variation adjusted for infants.\n   */\n  public formatVariationBasedOnInfants(params: { baseVariation: Variation; variations: Variation[]; infants: number }): string {\n    const variation = this.getVariationBasedOnInfants(params);\n    return this.formatVariation(variation, params.infants);\n  }\n\n  /**\n   * Calculates the discounted amount for a variation adjusted for the number of infants.\n   * @param {Object} params - The input parameters.\n   * @param {Variation} params.baseVariation - The base variation object.\n   * @param {Variation[]} params.variations - A list of available variations.\n   * @param {number} params.infants - The number of infants to consider for adjustments.\n   * @returns {number} The discounted amount for the selected variation, or 0 if no discounted amount is available.\n   */\n  public calculateVariationAmount(params: { baseVariation: Variation; variations: Variation[]; infants: number }): number {\n    return this.getVariationBasedOnInfants(params)?.discounted_amount || 0;\n  }\n\n  /**\n   * Finds the appropriate variation from a list of variations based on the number of infants.\n   * @param {Object} params - The input parameters.\n   * @param {Variation} params.baseVariation - The base variation object.\n   * @param {Variation[]} params.variations - A list of available variations.\n   * @param {number} params.infants - The number of infants to adjust for.\n   * @returns {Variation} The matching variation or the base variation if no match is found.\n   */\n  public getVariationBasedOnInfants({ variations, baseVariation, infants }: { baseVariation: Variation; variations: Variation[]; infants: number }): Variation {\n    const { adult_nbr, child_nbr } = baseVariation;\n    return variations.find(v => v.adult_nbr === adult_nbr && v.child_nbr === Math.max(0, child_nbr - Math.max(0, infants))) || baseVariation;\n  }\n\n  /**\n   * Formats a variation object into a human-readable string, adjusted for the number of infants.\n   * @param {Variation} variation - The variation object to format.\n   * @param {number} infant_nbr - The number of infants to adjust for.\n   * @returns {string} A formatted string representing the variation.\n   * @private\n   */\n  private formatVariation({ child_nbr, adult_nbr }: Variation, infant_nbr: number): string {\n    const adultNumber = Number(adult_nbr) || 0;\n    const infantNumber = Math.max(Number(infant_nbr) || 0, 0);\n    const adultLabel = adultNumber > 1 ? locales.entries.Lcz_Adults.toLowerCase() : locales.entries.Lcz_Adult.toLowerCase();\n    const childLabel = child_nbr > 1 ? locales.entries.Lcz_Children.toLowerCase() : locales.entries.Lcz_Child.toLowerCase();\n    const infantLabel = infantNumber > 1 ? (locales.entries['Lcz_Infants'] ?? 'infants')?.toLowerCase() : (locales?.entries['Lcz_Infant'] ?? 'infant')?.toLowerCase();\n    const parts = [`${adultNumber} ${adultLabel}`, child_nbr ? `${child_nbr} ${childLabel}` : '', infantNumber ? `${infantNumber} ${infantLabel}` : ''];\n    return parts.filter(Boolean).join('&nbsp&nbsp&nbsp&nbsp');\n  }\n}\n",":host {\n  display: block;\n}\n.rate_amount {\n  display: none;\n  padding: 0;\n  margin: 0;\n}\n\n.booking-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 0.5rem;\n  gap: 0.5rem;\n}\n.non-ref-span {\n  font-size: 12px;\n  color: var(--green);\n}\n.booking-roomtype-title {\n  font-size: 1.25rem;\n  margin-right: 0.5rem;\n  margin: 0;\n  padding: 0;\n}\n\n.booking-details-container {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0;\n  margin: 0;\n}\n\n.booking-rateplan {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin: 0;\n  padding: 0;\n}\n\n.booking-rateplan-name {\n  font-weight: bold;\n  margin: 0;\n  padding: 0;\n}\n\n.booking-tooltip {\n  margin-right: 0.5rem;\n  margin: 0;\n  padding: 0;\n}\n\n.booking-variation {\n  margin: 0;\n  padding: 0;\n}\n\n.booking-price {\n  margin: 0;\n  padding: 0;\n}\n\n.booking-footer {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0;\n  margin-bottom: 0.5rem;\n}\n\n.booking-details-container {\n  display: none;\n}\n\n/*md*/\n@media (min-width: 768px) {\n  .booking-header {\n    justify-content: flex-start;\n  }\n  .booking-footer,\n  .booking-price {\n    display: none;\n  }\n  .booking-details-container,\n  .rate_amount {\n    display: inline-flex;\n    gap: 0.5rem;\n  }\n}\n\n@media only screen and (min-width: 908px) {\n  .aplicationInfoContainer {\n    max-width: 100%;\n  }\n  .guest-info-container,\n  .bed-preference-container,\n  .unit-select-container {\n    max-width: 250px;\n  }\n  /* .preference-select-container {\n    max-width: 250px;\n  } */\n}\n","import { Component, Host, h, Prop, State, Listen } from '@stencil/core';\nimport { TPropertyButtonsTypes } from '@/components';\nimport { ICurrency } from '@/models/calendarData';\nimport booking_store, { IRatePlanSelection, modifyBookingStore, RatePlanGuest } from '@/stores/booking.store';\nimport locales from '@/stores/locales.store';\nimport { v4 } from 'uuid';\nimport calendar_data, { isSingleUnit } from '@/stores/calendar-data';\nimport { formatAmount } from '@/utils/utils';\nimport VariationService from '@/services/variation.service';\n\n@Component({\n  tag: 'igl-application-info',\n  styleUrl: 'igl-application-info.css',\n  scoped: true,\n})\nexport class IglApplicationInfo {\n  @Prop() rateplanSelection: IRatePlanSelection;\n  @Prop() guestInfo: RatePlanGuest | null;\n  @Prop() currency: ICurrency;\n  @Prop() bedPreferenceType = [];\n  @Prop() bookingType: string = 'PLUS_BOOKING';\n  @Prop() roomIndex: number;\n  @Prop() totalNights: number = 1;\n  @Prop() baseData: { unit: { id: string; name: string }; roomtypeId: number };\n\n  @State() isButtonPressed = false;\n\n  private variationService = new VariationService();\n\n  componentWillLoad() {\n    if (isSingleUnit(this.rateplanSelection.roomtype.id)) {\n      const filteredRooms = this.filterRooms();\n      if (filteredRooms.length > 0) this.updateGuest({ unit: filteredRooms[0]?.id?.toString() });\n    }\n  }\n\n  private updateGuest(params: Partial<RatePlanGuest>) {\n    const roomTypeId = this.rateplanSelection.roomtype.id;\n    const ratePlanId = this.rateplanSelection.ratePlan.id;\n    let prevGuest = [...this.rateplanSelection.guest];\n    prevGuest[this.roomIndex] = {\n      ...prevGuest[this.roomIndex],\n      ...params,\n    };\n    booking_store.ratePlanSelections = {\n      ...booking_store.ratePlanSelections,\n      [roomTypeId]: {\n        ...booking_store.ratePlanSelections[roomTypeId],\n        [ratePlanId]: { ...this.rateplanSelection, guest: [...prevGuest] },\n      },\n    };\n  }\n\n  @Listen('buttonClicked', { target: 'body' })\n  handleButtonClicked(\n    event: CustomEvent<{\n      key: TPropertyButtonsTypes;\n      data?: CustomEvent;\n    }>,\n  ) {\n    switch (event.detail.key) {\n      case 'book':\n      case 'bookAndCheckIn':\n      case 'save':\n        this.isButtonPressed = true;\n        break;\n    }\n  }\n\n  private getTooltipMessages(): string | undefined {\n    const { ratePlan, selected_variation } = this.rateplanSelection;\n    let selectedVariation = selected_variation;\n    if (this.guestInfo?.infant_nbr) {\n      selectedVariation = this.variationService.getVariationBasedOnInfants({\n        variations: ratePlan.variations,\n        baseVariation: selected_variation,\n        infants: this.guestInfo?.infant_nbr,\n      });\n    }\n\n    if (!selectedVariation) return;\n\n    const matchingVariation = ratePlan.variations?.find(variation => variation.adult_nbr === selectedVariation.adult_nbr && variation.child_nbr === selectedVariation.child_nbr);\n\n    if (!matchingVariation) return;\n\n    const cancellationPolicy = matchingVariation.applicable_policies?.find(p => p.type === 'cancelation')?.combined_statement;\n    const guaranteePolicy = matchingVariation.applicable_policies?.find(p => p.type === 'guarantee')?.combined_statement;\n\n    let tooltip = '';\n    if (cancellationPolicy) {\n      tooltip += `<b><u>Cancellation:</u></b> ${cancellationPolicy}<br/>`;\n    }\n    if (guaranteePolicy) {\n      tooltip += `<b><u>Guarantee:</u></b> ${guaranteePolicy}`;\n    }\n    return tooltip || undefined;\n  }\n\n  private getAmount(): number {\n    if (this.rateplanSelection.is_amount_modified) {\n      return this.rateplanSelection.view_mode === '001' ? this.rateplanSelection.rp_amount : this.rateplanSelection.rp_amount * this.totalNights;\n    }\n    let variation = this.rateplanSelection.selected_variation;\n    if (this.guestInfo?.infant_nbr) {\n      variation = this.variationService.getVariationBasedOnInfants({\n        variations: this.rateplanSelection.ratePlan.variations,\n        baseVariation: this.rateplanSelection.selected_variation,\n        infants: this.guestInfo?.infant_nbr,\n      });\n    }\n    return variation.discounted_gross_amount;\n  }\n\n  private filterRooms(): { name: string; id: number }[] {\n    const result = [];\n    if (!calendar_data.is_frontdesk_enabled) {\n      return result;\n    }\n    this.rateplanSelection.ratePlan?.assignable_units?.forEach(unit => {\n      if (unit.Is_Fully_Available) {\n        result.push({ name: unit.name, id: unit.pr_id });\n      }\n    });\n    const filteredGuestsRoom = this.rateplanSelection.guest.filter((_, i) => i !== this.roomIndex).map(r => r.unit);\n    const filteredResults = result.filter(r => !filteredGuestsRoom.includes(r.id.toString()));\n    return this.bookingType === 'EDIT_BOOKING'\n      ? [...filteredResults, this.rateplanSelection.roomtype.id === this.baseData?.roomtypeId ? this.baseData?.unit : null]\n          .filter(f => !!f)\n          .sort((a, b) => a.name.localeCompare(b.name))\n      : filteredResults;\n  }\n\n  render() {\n    const filteredRoomList = this.filterRooms();\n    const formattedVariation = this.variationService.formatVariationBasedOnInfants({\n      baseVariation: this.rateplanSelection.selected_variation,\n      infants: this.guestInfo.infant_nbr,\n      variations: this.rateplanSelection.ratePlan.variations,\n    });\n    return (\n      <Host class={'my-2'} data-testid={`room_info_${this.rateplanSelection.ratePlan.id}`}>\n        <div class=\"booking-header\">\n          {(this.bookingType === 'PLUS_BOOKING' || this.bookingType === 'ADD_ROOM' || this.bookingType === 'EDIT_BOOKING') && (\n            <span class=\"booking-roomtype-title\">{this.rateplanSelection.roomtype.name}</span>\n          )}\n          <div class=\"booking-details-container\">\n            <div class=\"booking-rateplan\">\n              <p class=\"booking-rateplan-name\">\n                {this.rateplanSelection.ratePlan.short_name} {this.rateplanSelection.ratePlan.is_non_refundable && <span class={'non-ref-span'}>Non Refundable</span>}\n              </p>\n              <ir-tooltip class=\"booking-tooltip\" message={this.getTooltipMessages()}></ir-tooltip>\n            </div>\n            <p class=\"booking-variation\" innerHTML={formattedVariation}></p>\n          </div>\n          <p class=\"booking-price\">\n            {formatAmount(this.currency?.symbol, this.getAmount())}/{locales.entries.Lcz_Stay}\n          </p>\n        </div>\n        <div class=\"booking-footer\">\n          <div class=\"booking-rateplan\">\n            <p class=\"booking-rateplan-name\">{this.rateplanSelection.ratePlan.short_name}</p>\n            <ir-tooltip class=\"booking-tooltip\" message={this.getTooltipMessages()}></ir-tooltip>\n          </div>\n          <p class=\"booking-variation\" innerHTML={formattedVariation}></p>\n        </div>\n        <div class=\"d-flex flex-column flex-md-row  p-0 align-items-md-center aplicationInfoContainer\">\n          <div class=\"mr-md-1 mb-1 mb-md-0 flex-fill guest-info-container\">\n            <input\n              id={v4()}\n              type=\"text\"\n              data-testid=\"guest_first_name\"\n              class={`form-control ${this.isButtonPressed && this.guestInfo?.first_name === '' && 'border-danger'}`}\n              placeholder={locales.entries['Lcz_GuestFirstname'] ?? 'Guest first name'}\n              name=\"guestFirstName\"\n              onInput={event => {\n                const name = (event.target as HTMLInputElement).value;\n                this.updateGuest({ first_name: name });\n                if (booking_store.event_type.type === 'EDIT_BOOKING') {\n                  modifyBookingStore('guest', {\n                    ...booking_store.guest,\n                    name,\n                  });\n                }\n              }}\n              required\n              value={this.guestInfo?.first_name}\n            />\n          </div>\n          <div class=\"mr-md-1 flex-fill guest-info-container\">\n            <input\n              id={v4()}\n              type=\"text\"\n              class={`form-control ${this.isButtonPressed && this.guestInfo?.last_name === '' && 'border-danger'}`}\n              placeholder={locales.entries['Lcz_GuestLastname'] ?? 'Guest last name'}\n              name=\"guestLastName\"\n              data-testid=\"guest_last_name\"\n              onInput={event => {\n                const name = (event.target as HTMLInputElement).value;\n                this.updateGuest({ last_name: name });\n                if (booking_store.event_type.type === 'EDIT_BOOKING') {\n                  modifyBookingStore('guest', {\n                    ...booking_store.guest,\n                    name,\n                  });\n                }\n              }}\n              required\n              value={this.guestInfo?.last_name}\n            />\n          </div>\n          {calendar_data.is_frontdesk_enabled &&\n            !isSingleUnit(this.rateplanSelection.roomtype.id) &&\n            (this.bookingType === 'PLUS_BOOKING' || this.bookingType === 'ADD_ROOM' || this.bookingType === 'EDIT_BOOKING') && (\n              <div class=\"mt-1 mt-md-0 d-flex align-items-center flex-fill\">\n                <div class=\"mr-md-1 p-0 flex-fill preference-select-container\">\n                  <select data-testid=\"unit\" class=\"form-control input-sm pr-0\" id={v4()} onChange={event => this.updateGuest({ unit: (event.target as HTMLInputElement).value })}>\n                    <option value=\"\" selected={this.guestInfo?.unit === ''}>\n                      {locales.entries.Lcz_Assignunits}\n                    </option>\n                    {filteredRoomList?.map(room => (\n                      <option value={room.id} selected={this.guestInfo?.unit === room.id.toString()}>\n                        {room.name}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n              </div>\n            )}\n          {this.rateplanSelection.roomtype.is_bed_configuration_enabled && (\n            <div class=\"mt-1 mt-md-0 mr-md-1 flex-fill\">\n              <select\n                data-testid=\"bed_configuration\"\n                class={`form-control input-sm ${this.isButtonPressed && this.guestInfo?.bed_preference === '' && 'border-danger'}`}\n                id={v4()}\n                onChange={event => this.updateGuest({ bed_preference: (event.target as HTMLInputElement).value })}\n              >\n                <option value=\"\" selected={this.guestInfo?.bed_preference === ''}>\n                  {locales.entries.Lcz_BedConfiguration}\n                </option>\n                {this.bedPreferenceType.map(data => (\n                  <option value={data.CODE_NAME} selected={this.guestInfo?.bed_preference === data.CODE_NAME}>\n                    {data.CODE_VALUE_EN}\n                  </option>\n                ))}\n              </select>\n            </div>\n          )}\n          <p class=\"rate_amount\">\n            {formatAmount(this.currency?.symbol, this.getAmount())}/{locales.entries.Lcz_Stay}\n          </p>\n        </div>\n        {this.rateplanSelection.selected_variation.child_nbr > 0 && (\n          <div style={{ gap: '0.5rem', marginTop: '0.5rem' }} class=\"d-flex  flex-row  p-0 align-items-center aplicationInfoContainer\">\n            <p class={'m-0 p-0 text-danger'}>Any of the children below 3 years?</p>\n            <div class=\"mr-1 flex-fill\">\n              <select\n                class={`form-control input-sm ${this.isButtonPressed && this.guestInfo?.bed_preference === '' && 'border-danger'}`}\n                id={v4()}\n                style={{ width: 'max-content' }}\n                onChange={event => this.updateGuest({ infant_nbr: Number((event.target as HTMLInputElement).value) })}\n              >\n                <option value=\"\" selected={Number(this.guestInfo?.infant_nbr) === 0}>\n                  {locales.entries['No'] || 'No'}\n                </option>\n                {Array.from({ length: this.rateplanSelection.selected_variation.child_nbr }, (_, i) => i + 1).map(item => (\n                  <option value={item} selected={this.guestInfo?.infant_nbr === item}>\n                    {item}\n                  </option>\n                ))}\n              </select>\n            </div>\n          </div>\n        )}\n      </Host>\n    );\n  }\n}\n","import { Booking, Room } from '@/models/booking.dto';\nimport { TSourceOption } from '@/models/igl-book-property';\nimport VariationService from '@/services/variation.service';\nimport booking_store, { IRatePlanSelection } from '@/stores/booking.store';\nimport { extras } from '@/utils/utils';\nimport moment from 'moment';\n\nexport class IglBookPropertyService {\n  private variationService: VariationService;\n  public setBookingInfoFromAutoComplete(context, res) {\n    context.bookedByInfoData = {\n      id: res.guest.id,\n      email: res.guest.email,\n      firstName: res.guest.first_name,\n      lastName: res.guest.last_name,\n      countryId: res.guest.country_id,\n      isdCode: res.guest?.country_phone_prefix ?? res.guest?.country_id.toString(),\n      contactNumber: res.guest.mobile,\n      selectedArrivalTime: res.arrival,\n      emailGuest: res.guest.subscribe_to_news_letter,\n      message: res.remark,\n      cardNumber: '',\n      cardHolderName: '',\n      expiryMonth: '',\n      expiryYear: '',\n      bookingNumber: res.booking_nbr,\n      rooms: res.rooms,\n      from_date: res.from_date,\n      to_date: res.to_date,\n    };\n  }\n\n  public resetRoomsInfoAndMessage(context) {\n    context.defaultData.roomsInfo = [];\n    context.message = '';\n  }\n\n  public onDataRoomUpdate(event: CustomEvent, selectedUnits: Map<string, Map<string, any>>, isEdit: boolean, isEditBooking: boolean, name: string) {\n    let units = selectedUnits;\n    const { data, key, changedKey } = event.detail;\n    const roomCategoryKey = `c_${data.roomCategoryId}`;\n    const ratePlanKey = `p_${data.ratePlanId}`;\n\n    if (this.shouldClearData(key)) {\n      units = new Map();\n    }\n\n    this.initializeRoomCategoryIfNeeded(roomCategoryKey, units);\n\n    if (isEditBooking) {\n      if (changedKey === 'rate') {\n        if (units.has(roomCategoryKey) && units.get(roomCategoryKey).has(ratePlanKey)) {\n          this.applyBookingEditToSelectedRoom(roomCategoryKey, ratePlanKey, data, units, name, isEdit);\n        }\n      } else {\n        if (changedKey !== 'rateType') {\n          if (changedKey === 'adult_child_offering') {\n            if (units.has(roomCategoryKey) && selectedUnits.get(roomCategoryKey).has(ratePlanKey)) {\n              this.applyBookingEditToSelectedRoom(roomCategoryKey, ratePlanKey, data, units, name, isEdit);\n            }\n          } else {\n            this.applyBookingEditToSelectedRoom(roomCategoryKey, ratePlanKey, data, units, name, isEdit);\n          }\n        }\n      }\n    } else {\n      this.setSelectedRoomData(roomCategoryKey, ratePlanKey, data, units);\n    }\n    this.cleanupEmptyData(roomCategoryKey, units);\n    return units;\n  }\n\n  private shouldClearData(key: string | undefined): boolean {\n    return key === 'clearData' || key === 'EDIT_BOOKING';\n  }\n\n  private initializeRoomCategoryIfNeeded(roomCategoryKey: string, selectedUnits: Map<string, Map<string, any>>) {\n    if (!selectedUnits.has(roomCategoryKey)) {\n      selectedUnits.set(roomCategoryKey, new Map());\n    }\n  }\n  private setSelectedRoomData(roomCategoryKey: string, ratePlanKey: string, data: any, selectedUnits: Map<string, Map<string, any>>) {\n    let selectedRatePlans = selectedUnits.get(roomCategoryKey);\n    if (data.totalRooms === 0 || data.inventory === 0) {\n      selectedRatePlans.delete(ratePlanKey);\n    } else {\n      selectedUnits.set(roomCategoryKey, selectedRatePlans.set(ratePlanKey, { ...data, selectedUnits: Array(data.totalRooms).fill(-1) }));\n    }\n  }\n\n  private cleanupEmptyData(roomCategoryKey: string, selectedUnits: Map<string, Map<string, any>>) {\n    if (selectedUnits.has(roomCategoryKey)) {\n      let selectedRatePlans = selectedUnits.get(roomCategoryKey);\n      if (selectedRatePlans.size === 0) {\n        selectedUnits.delete(roomCategoryKey);\n      }\n    }\n  }\n  private applyBookingEditToSelectedRoom(roomCategoryKey: string, ratePlanKey: string, data, selectedUnits: Map<string, Map<string, any>>, name: string, isEdit: boolean) {\n    selectedUnits.clear();\n    let res = {};\n    if (isEdit) {\n      res = { ...data, guestName: name || '', roomId: '' };\n    } else {\n      res = { ...data };\n    }\n    selectedUnits.set(roomCategoryKey, new Map().set(ratePlanKey, res));\n  }\n\n  private calculateAmount({ is_amount_modified, selected_variation, view_mode, rp_amount }: IRatePlanSelection) {\n    const total_days = selected_variation.nights.length;\n    if (is_amount_modified) {\n      return view_mode === '002' ? rp_amount : rp_amount / total_days;\n    }\n  }\n\n  private generateDailyRates(rate_plan: IRatePlanSelection, i: number) {\n    let variation = rate_plan.selected_variation;\n    const amount = rate_plan.is_amount_modified ? this.calculateAmount(rate_plan) : null;\n    if (rate_plan.guest[i].infant_nbr > 0 && !rate_plan.is_amount_modified) {\n      if (!this.variationService) {\n        this.variationService = new VariationService();\n      }\n      variation = this.variationService.getVariationBasedOnInfants({\n        variations: rate_plan.ratePlan.variations,\n        baseVariation: rate_plan.selected_variation,\n        infants: rate_plan.guest[i].infant_nbr,\n      });\n    }\n    return variation.nights.map(n => ({\n      date: n.night,\n      amount: amount ?? n.discounted_amount,\n      cost: null,\n    }));\n  }\n\n  // private extractFirstNameAndLastName(name: string) {\n  //   const names = name.split(' ');\n  //   return { first_name: names[0] || null, last_name: names[1] || null };\n  // }\n\n  private getBookedRooms({\n    check_in,\n    check_out,\n    notes,\n    identifier,\n    override_unit,\n    unit,\n    auto_check_in,\n  }: {\n    identifier: string | null;\n    check_in: Date;\n    check_out: Date;\n    override_unit: boolean;\n    unit: string;\n    notes: string | null;\n    auto_check_in: boolean;\n  }) {\n    const rooms = [];\n\n    for (const roomTypeId in booking_store.ratePlanSelections) {\n      const roomtype = booking_store.ratePlanSelections[roomTypeId];\n      for (const rateplanId in roomtype) {\n        const rateplan = roomtype[rateplanId];\n        if (rateplan.reserved > 0) {\n          for (let i = 0; i < rateplan.reserved; i++) {\n            const { first_name, last_name } = rateplan.guest[i];\n            rooms.push({\n              identifier,\n              roomtype: rateplan.roomtype,\n              rateplan: rateplan.ratePlan,\n              prepayment_amount_gross: 0,\n              unit: override_unit ? { id: unit } : rateplan.guest[i].unit ? { id: rateplan.guest[i].unit } : null,\n              occupancy: {\n                adult_nbr: rateplan.selected_variation.adult_nbr,\n                children_nbr: Number(rateplan.selected_variation.child_nbr ?? 0) - Math.max(Number(rateplan.guest[i].infant_nbr ?? 0), 0),\n                infant_nbr: rateplan.guest[i].infant_nbr,\n              },\n              bed_preference: rateplan.guest[i].bed_preference,\n              from_date: moment(check_in).format('YYYY-MM-DD'),\n              to_date: moment(check_out).format('YYYY-MM-DD'),\n              notes,\n              check_in: auto_check_in,\n              days: this.generateDailyRates(rateplan, i),\n              guest: {\n                email: null,\n                first_name,\n                last_name,\n                country_id: null,\n                city: null,\n                mobile: null,\n                address: null,\n                dob: null,\n                subscribe_to_news_letter: null,\n                cci: null,\n              },\n            });\n          }\n        }\n      }\n    }\n    return rooms;\n  }\n\n  async prepareBookUserServiceParams({ context, sourceOption, check_in }: { context: any; sourceOption: TSourceOption; check_in: boolean }) {\n    try {\n      // Validate context structure\n      if (!context || !context.dateRangeData) {\n        throw new Error('Invalid context: Missing date range data.');\n      }\n\n      const fromDate = new Date(context.dateRangeData.fromDate);\n      const toDate = new Date(context.dateRangeData.toDate);\n\n      const generateNewRooms = (identifier = null, check_in: boolean = false) => {\n        return this.getBookedRooms({\n          check_in: fromDate,\n          check_out: toDate,\n          identifier,\n          notes: '',\n          override_unit: context.isEventType('BAR_BOOKING') ? true : false,\n          unit: context.isEventType('BAR_BOOKING') ? context.bookingData.PR_ID : null,\n          auto_check_in: check_in,\n        });\n      };\n\n      const modifyBookingDetails = ({ pickup_info, extra_services, is_direct, is_in_loyalty_mode, promo_key, extras, ...rest }: Booking, rooms: Room[]) => {\n        return {\n          assign_units: true,\n          is_pms: true,\n          is_direct,\n          is_backend: true,\n          is_in_loyalty_mode,\n          promo_key,\n          extras,\n          booking: {\n            ...rest,\n            rooms,\n          },\n          extra_services,\n          pickup_info,\n        };\n      };\n\n      let newBooking = null;\n\n      switch (context.defaultData.event_type) {\n        case 'EDIT_BOOKING': {\n          const { booking, currentRoomType } = context.defaultData;\n\n          const filteredRooms = booking.rooms.filter(r => r.identifier !== currentRoomType.identifier);\n          console.log('currentRoomType', currentRoomType);\n          const newRooms = generateNewRooms(currentRoomType.identifier, currentRoomType.in_out?.code === '001');\n          newBooking = modifyBookingDetails(booking, [...filteredRooms, ...newRooms]);\n          break;\n        }\n        case 'ADD_ROOM':\n        case 'SPLIT_BOOKING': {\n          const { booking, ROOMS } = context.defaultData;\n          // console.log(booking);\n          if (!booking) {\n            throw new Error('Missing booking');\n          }\n          const newRooms = generateNewRooms();\n          const previousRooms = context.defaultData.event_type === 'ADD_ROOM' ? ROOMS ?? [] : booking?.rooms;\n          newBooking = modifyBookingDetails(booking, [...previousRooms, ...newRooms]);\n          break;\n        }\n        default: {\n          const newRooms = generateNewRooms(null, check_in);\n          const { bookedByInfoData } = context;\n          const isAgent = sourceOption.type === 'TRAVEL_AGENCY';\n          newBooking = {\n            assign_units: true,\n            is_pms: true,\n            is_direct: true,\n            is_backend: true,\n            is_in_loyalty_mode: false,\n            promo_key: null,\n            extras,\n            agent: isAgent ? { id: sourceOption.tag } : null,\n            booking: {\n              from_date: moment(fromDate).format('YYYY-MM-DD'),\n              to_date: moment(toDate).format('YYYY-MM-DD'),\n              remark: bookedByInfoData.message || null,\n              booking_nbr: '',\n              property: {\n                id: context.propertyid,\n              },\n              booked_on: {\n                date: moment().format('YYYY-MM-DD'),\n                hour: new Date().getHours(),\n                minute: new Date().getMinutes(),\n              },\n              source: isAgent ? '' : sourceOption,\n              rooms: newRooms,\n              currency: context.currency,\n              arrival: { code: bookedByInfoData.selectedArrivalTime },\n              guest: {\n                email: bookedByInfoData.email === '' ? null : bookedByInfoData.email || null,\n                first_name: bookedByInfoData.firstName,\n                last_name: bookedByInfoData.lastName,\n                country_id: bookedByInfoData.countryId === '' ? null : bookedByInfoData.countryId,\n                city: null,\n                mobile: bookedByInfoData.contactNumber === null ? '' : bookedByInfoData.contactNumber,\n                country_phone_prefix: bookedByInfoData?.isdCode ?? null,\n                address: '',\n                dob: null,\n                subscribe_to_news_letter: bookedByInfoData.emailGuest || false,\n                cci: bookedByInfoData.cardNumber\n                  ? {\n                      nbr: bookedByInfoData.cardNumber,\n                      holder_name: bookedByInfoData.cardHolderName,\n                      expiry_month: bookedByInfoData.expiryMonth,\n                      expiry_year: bookedByInfoData.expiryYear,\n                    }\n                  : null,\n              },\n            },\n            pickup_info: null,\n          };\n          break;\n        }\n      }\n      return newBooking;\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  private getRoomCategoryByRoomId(bookingData) {\n    return bookingData.roomsInfo?.find(roomCategory => {\n      return roomCategory.id === bookingData.RATE_TYPE;\n    });\n  }\n  public setEditingRoomInfo(bookingData, selectedUnits) {\n    const category = this.getRoomCategoryByRoomId(bookingData);\n    const room_id = !category ? '' : `c_${category?.id}`;\n    const ratePlanId = `p_${bookingData.RATE_PLAN_ID}`;\n    const data = {\n      adultCount: bookingData.ADULTS_COUNT,\n      rate: bookingData.RATE,\n      rateType: bookingData.RATE_TYPE,\n      ratePlanId: bookingData.RATE_PLAN_ID,\n      roomCategoryId: category ? category.id : '',\n      roomCategoryName: category ? category.name : '',\n      totalRooms: 1,\n      ratePlanName: bookingData.RATE_PLAN,\n      roomId: bookingData.PR_ID,\n      guestName: bookingData.NAME,\n      cancelation: bookingData.cancelation,\n      guarantee: bookingData.guarantee,\n      adult_child_offering: bookingData.adult_child_offering,\n    };\n    selectedUnits.set(room_id, new Map().set(ratePlanId, data));\n  }\n}\n",":host {\n  position: fixed;\n  top: 0;\n  right: 0;\n  width: 100vw;\n  min-height: 100vh;\n  z-index: 99;\n  overflow: hidden;\n  /* min-width: 450px; */\n}\n\n.card-title {\n  border-bottom: 1px solid #e4e5ec;\n  width: 100%;\n}\n.card-header-container {\n  border-bottom: 1px solid #e4e5ec;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n  padding: 1rem 0;\n  justify-content: space-between;\n}\n.loading-container {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 0;\n  padding: 0;\n}\n.card-header-container h3 {\n  padding: 0;\n  margin: 0;\n}\n\n.background-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.25);\n}\n\n.formContainer {\n  height: calc(100% - 79px);\n  overflow: auto;\n}\n.gap-30 {\n  gap: 30px;\n}\n.block-date {\n  width: 100%;\n}\n.sideWindow {\n  position: absolute;\n  inset: 0;\n  left: unset;\n  background-color: #ffffff;\n  width: 100%;\n  overflow: auto;\n  animation: slideInFromRight 0.5s;\n}\n.card {\n  top: 0;\n  z-index: 1000;\n}\n\n.close {\n  float: right;\n  font-size: 1.5rem;\n  font-weight: 700;\n  line-height: 1;\n  color: #000;\n  text-shadow: 0 1px 0 #fff;\n  opacity: 0.5;\n  padding: 0;\n  background-color: transparent;\n  border: 0;\n  appearance: none;\n}\n\n.close-icon {\n  position: absolute;\n  top: 18px;\n  right: 33px;\n  outline: none;\n}\n\nbutton:not(:disabled),\n[type='button']:not(:disabled) {\n  cursor: pointer;\n}\n.sheet-footer {\n  width: 100%;\n}\n\n/* .row {\n  padding: 0 0 0 15px;\n  margin: 0;\n} */\n@media only screen and (min-width: 1200px) {\n  .sideWindow {\n    max-width: 70%;\n  }\n}\n@media only screen and (min-width: 2000px) {\n  .sideWindow {\n    max-width: 40%;\n  }\n}\n@media only screen and (min-width: 768px) and (max-width: 1200px) {\n  .sideWindow {\n    max-width: 90%;\n  }\n}\n@media only screen and (min-width: 600px) and (max-width: 768px) {\n  .sideWindow {\n    max-width: 75%;\n  }\n}\n@media only screen and (min-width: 641px) {\n  .block-date {\n    max-width: 450px;\n    padding-bottom: 0 !important;\n  }\n}\n@keyframes slideInFromRight {\n  from {\n    transform: translateX(120%);\n  }\n  to {\n    transform: translateX(0);\n  }\n}\n@keyframes slideOutToRight {\n  from {\n    transform: translateX(0);\n  }\n  to {\n    transform: translateX(120%);\n  }\n}\n\n.sideWindow--exit {\n  animation: slideOutToRight 0.5s forwards;\n}\n",":host {\n  height: 100%;\n}\n.sheet-container {\n  display: flex !important;\n  flex-direction: column !important;\n  background: white;\n  height: 100vh;\n  gap: 1rem;\n  z-index: 1000;\n}\n.sheet-container {\n  height: -webkit-fill-available;\n  height: 100vh;\n  height: 100dvh;\n}\n\n/* @supports (height: 100svh) {\n  .sheet-container {\n    height: 100svh;\n  }\n} */\n.sheet-footer {\n  position: sticky;\n  bottom: 0;\n  z-index: 20;\n  background: white;\n  border-top: 1px solid #e4e5ec;\n  display: flex;\n  flex-direction: column;\n  padding: 1rem;\n  gap: 0.5rem;\n}\n.sheet-header {\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  background: white;\n}\n.sheet-body {\n  flex: 1 1 0%;\n}\n/* @media (max-width: 767px) {\n  .sheet-footer {\n    bottom: env(safe-area-inset-bottom);\n  }\n} */\n@media (min-width: 768px) {\n  .sheet-footer {\n    flex-direction: row;\n    align-items: center;\n  }\n}\n","import { Component, Event, EventEmitter, Host, Prop, State, h, Listen, Fragment } from '@stencil/core';\nimport { BookingService } from '@/services/booking.service';\nimport { dateToFormattedString, getReleaseHoursString, handleBodyOverflow } from '@/utils/utils';\nimport { ICountry, IEntries, RoomBlockDetails } from '@/models/IBooking';\nimport { IPageTwoDataUpdateProps } from '@/models/models';\nimport { IglBookPropertyService } from './igl-book-property.service';\nimport { IglBookPropertyPayloadEditBooking, TAdultChildConstraints, TEventType, TPropertyButtonsTypes, TSourceOption, TSourceOptions } from '@/models/igl-book-property';\nimport locales from '@/stores/locales.store';\nimport { IToast } from '@/components/ui/ir-toast/toast';\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\nimport { ICurrency } from '@/models/calendarData';\nimport booking_store, { calculateTotalRooms, modifyBookingStore, reserveRooms, resetBookingStore, resetReserved } from '@/stores/booking.store';\nimport moment from 'moment';\nexport type IHistoryEntry = {\n  dates: { checkIn: Date; checkOut: Date };\n  adults: number;\n  children: number;\n};\n@Component({\n  tag: 'igl-book-property',\n  styleUrls: ['igl-book-property.css', '../../../common/sheet.css'],\n  scoped: true,\n})\nexport class IglBookProperty {\n  @Prop() propertyid: number;\n  @Prop() allowedBookingSources: any;\n  @Prop() language: string;\n  @Prop() countries: ICountry[];\n  @Prop() showPaymentDetails: boolean = false;\n  @Prop() currency: ICurrency;\n  @Prop({ reflect: true, mutable: true }) bookingData: { [key: string]: any };\n  @Prop() adultChildConstraints: TAdultChildConstraints;\n\n  @State() adultChildCount: { adult: number; child: number } = { adult: 0, child: 0 };\n  @State() renderAgain: boolean = false;\n  @State() dateRangeData: { [key: string]: any };\n  @State() defaultData: any;\n  @State() isLoading: string;\n  @State() bookingHistory: Array<{\n    dates: { checkIn: Date; checkOut: Date };\n    adults: number;\n    children: number;\n  }> = [];\n\n  @Event() closeBookingWindow: EventEmitter<{ [key: string]: any }>;\n  @Event() blockedCreated: EventEmitter<RoomBlockDetails>;\n  @Event() resetBookingEvt: EventEmitter<null>;\n  @Event({ bubbles: true, composed: true }) animateIrButton: EventEmitter<string>;\n  @Event({ bubbles: true, composed: true }) animateIrSelect: EventEmitter<string>;\n  @Event({ bubbles: true, composed: true }) toast: EventEmitter<IToast>;\n\n  private initialRoomIds: { roomName: string; ratePlanId: number; roomId: string; roomTypeId: string } | null = null;\n  private sourceOption: TSourceOption;\n  private page: string;\n  private showSplitBookingOption: boolean = false;\n  private sourceOptions: TSourceOptions[] = [];\n  private guestData: { [key: string]: any }[] = [];\n  private bookedByInfoData: { [key: string]: any } = {};\n  private blockDatesData: { [key: string]: any } = {};\n  private ratePricingMode: IEntries[] = [];\n  private selectedUnits: Map<string, Map<string, any>> = new Map();\n  private bedPreferenceType: IEntries[] = [];\n  private bookingService: BookingService = new BookingService();\n  private bookPropertyService = new IglBookPropertyService();\n  private defaultDateRange: { from_date: string; to_date: string };\n  private updatedBooking: boolean = false;\n  private MAX_HISTORY_LENGTH: number = 2;\n  private didReservation: boolean;\n  private wasBlockedUnit: boolean;\n  private _sourceOptions: TSourceOptions[];\n\n  async componentWillLoad() {\n    console.log('<==>roomtypes<==>', booking_store?.roomTypes);\n    if (booking_store.roomTypes) {\n      modifyBookingStore('roomTypes', []);\n      modifyBookingStore('ratePlanSelections', {});\n    }\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.initializeDefaultDateRange();\n\n    if (!this.bookingData.defaultDateRange) {\n      return;\n    }\n    // console.log(this.bookingData);\n    this.initializeDefaultData();\n    this.wasBlockedUnit = this.defaultData.hasOwnProperty('block_exposed_unit_props');\n    modifyBookingStore('event_type', { type: this.defaultData.event_type });\n    this.fetchSetupEntriesAndInitialize();\n  }\n\n  componentDidLoad() {\n    document.addEventListener('keydown', this.handleKeyDown);\n    handleBodyOverflow(true);\n  }\n\n  disconnectedCallback() {\n    document.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  @Listen('inputCleared')\n  clearBooking(e: CustomEvent) {\n    if (this.isEventType('SPLIT_BOOKING')) {\n      e.stopImmediatePropagation();\n      e.stopPropagation();\n      this.bookedByInfoData = {};\n      this.bookPropertyService.resetRoomsInfoAndMessage(this);\n      this.renderPage();\n    }\n  }\n\n  @Listen('spiltBookingSelected')\n  async handleSpiltBookingSelected(e: CustomEvent<{ key: string; data: unknown }>) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    const { key, data } = e.detail;\n    if (key === 'select' || (key === 'blur' && data !== '')) {\n      const res = await this.bookingService.getExposedBooking((data as any).booking_nbr || (data as string), this.language);\n      this.defaultData = { ...this.defaultData, booking: res };\n      this.bookPropertyService.setBookingInfoFromAutoComplete(this, res);\n      this.sourceOption = res.source;\n      this.renderPage();\n    }\n  }\n\n  // @Listen('adultChild')\n  // handleAdultChildChange(event: CustomEvent) {\n  //   if (this.isEventType('ADD_ROOM') || this.isEventType('SPLIT_BOOKING')) {\n  //     this.bookPropertyService.resetRoomsInfoAndMessage(this);\n  //   }\n  //   const { adult, child } = event.detail;\n  //   this.adultChildCount = { ...event.detail };\n  //   this.updateBookingHistory({ adults: adult, children: child });\n  // }\n  @Listen('adultChild')\n  handleAdultChildChange(event: CustomEvent) {\n    if (this.isEventType('ADD_ROOM') || this.isEventType('SPLIT_BOOKING')) {\n      this.bookPropertyService.resetRoomsInfoAndMessage(this);\n    }\n    const { adult, child } = event.detail;\n    this.adultChildCount = { ...event.detail };\n\n    // Update the booking history\n    this.updateBookingHistory({ adults: Number(adult), children: Number(child) });\n  }\n\n  @Listen('dateSelectEvent')\n  onDateRangeSelect(event: CustomEvent<{ [key: string]: any }>) {\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n    const opt: { [key: string]: any } = event.detail;\n    this.updateBookingHistory({\n      dates: {\n        checkIn: new Date(this.dateRangeData.fromDate),\n        checkOut: new Date(new Date(opt.data.toDate)),\n      },\n    });\n    console.log('date changed', opt);\n    if (opt.key === 'selectedDateRange') {\n      this.dateRangeData = opt.data;\n      if (this.isEventType('ADD_ROOM') || this.isEventType('SPLIT_BOOKING')) {\n        this.defaultData.roomsInfo = [];\n      } else if (this.adultChildCount.adult !== 0) {\n        this.checkBookingAvailability();\n        // this.checkBookingAvailability(dateToFormattedString(new Date(this.dateRangeData.fromDate)), dateToFormattedString(new Date(this.dateRangeData.toDate)));\n      }\n    }\n  }\n  @Listen('sourceDropDownChange')\n  handleSourceDropDown(event: CustomEvent) {\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n    const value = event.detail;\n    const selectedSource = this.sourceOptions.find(opt => opt.id === value.toString());\n    this.sourceOption = {\n      code: value,\n      description: selectedSource.value || '',\n      tag: selectedSource.tag,\n      id: selectedSource.id,\n      type: selectedSource.type,\n    };\n  }\n\n  @Listen('gotoSplitPageTwoEvent', { target: 'window' })\n  gotoSplitPageTwo() {\n    this.gotoPage('page_two');\n  }\n\n  @Listen('buttonClicked')\n  handleButtonClicked(event: CustomEvent<{ key: TPropertyButtonsTypes; data?: CustomEvent }>) {\n    switch (event.detail.key) {\n      case 'save':\n        this.bookUser(false);\n        break;\n      case 'cancel':\n        event.stopImmediatePropagation();\n        event.stopPropagation();\n        this.closeWindow();\n        break;\n      case 'back':\n        event.stopImmediatePropagation();\n        event.stopPropagation();\n        if (this.isEventType('BAR_BOOKING')) {\n          resetReserved();\n        }\n        this.gotoPage('page_one');\n        break;\n      case 'book':\n        this.bookUser(false);\n        break;\n      case 'bookAndCheckIn':\n        this.bookUser(true);\n        break;\n      case 'next':\n        event.stopImmediatePropagation();\n        event.stopPropagation();\n        if (!this.adultChildCount?.adult) {\n          this.animateIrSelect.emit('adult_child_select');\n          break;\n        }\n        if (calculateTotalRooms() > 0) {\n          this.gotoPage('page_two');\n          break;\n        } else if (this.defaultData?.roomsInfo.length === 0) {\n          this.animateIrButton.emit('check_availability');\n          break;\n        }\n        this.toast.emit({\n          type: 'error',\n          description: locales.entries.Lcz_SelectRatePlan,\n          title: locales.entries.Lcz_SelectRatePlan,\n        });\n        break;\n      case 'check':\n        this.checkBookingAvailability();\n        break;\n      default:\n        break;\n    }\n  }\n\n  private updateBookingHistory(partialData: Partial<IHistoryEntry>) {\n    const lastEntry = this.bookingHistory[this.bookingHistory.length - 1];\n\n    const newEntry: IHistoryEntry = {\n      dates: {\n        checkIn: partialData.dates?.checkIn || lastEntry?.dates?.checkIn || new Date(this.dateRangeData.fromDate),\n        checkOut: partialData.dates?.checkOut || lastEntry?.dates?.checkOut || new Date(this.dateRangeData.toDate),\n      },\n      adults: partialData.adults ?? lastEntry?.adults ?? this.adultChildCount.adult,\n      children: partialData.children ?? lastEntry?.children ?? this.adultChildCount.child,\n    };\n\n    // Update the booking history\n    this.bookingHistory.push(newEntry);\n    if (this.bookingHistory.length > this.MAX_HISTORY_LENGTH) {\n      this.bookingHistory.shift();\n    }\n  }\n\n  private handleKeyDown(e: KeyboardEvent) {\n    if (e.key === 'Escape') {\n      this.closeWindow();\n    }\n  }\n\n  private initializeDefaultDateRange() {\n    this.defaultDateRange = {\n      from_date: this.bookingData.FROM_DATE,\n      to_date: this.bookingData.TO_DATE,\n    };\n  }\n\n  private initializeDefaultData() {\n    this.defaultData = this.bookingData;\n    this.dateRangeData = { ...this.defaultData.defaultDateRange };\n  }\n\n  private async fetchSetupEntriesAndInitialize() {\n    try {\n      const setupEntries = await this.fetchSetupEntries();\n      this.setSourceOptions(this.allowedBookingSources);\n      this.setOtherProperties(setupEntries);\n      this.initializeEventData();\n    } catch (error) {\n      console.error('Error fetching setup entries:', error);\n    }\n  }\n\n  private initializeEventData() {\n    if (this.isEventType('EDIT_BOOKING')) {\n      this.initializeEditBookingData();\n    }\n\n    if (!this.isEventType('BAR_BOOKING')) {\n      this.bookPropertyService.resetRoomsInfoAndMessage(this);\n    }\n\n    this.initializePage();\n  }\n\n  private initializeEditBookingData() {\n    this.adultChildCount = {\n      adult: this.defaultData.ADULTS_COUNT,\n      child: this.defaultData.CHILDREN_COUNT,\n    };\n\n    this.initialRoomIds = {\n      roomName: this.defaultData.roomName,\n      ratePlanId: this.defaultData.RATE_PLAN_ID,\n      roomId: this.defaultData.PR_ID,\n      roomTypeId: this.defaultData.RATE_TYPE,\n    };\n    const { currentRoomType, GUEST } = this.defaultData as IglBookPropertyPayloadEditBooking;\n    console.log(GUEST);\n    modifyBookingStore('guest', {\n      bed_preference: currentRoomType.bed_preference?.toString(),\n      infant_nbr: currentRoomType.occupancy.infant_nbr,\n      first_name: GUEST.first_name ?? '',\n      last_name: GUEST.last_name ?? '',\n      // name: currentRoomType.guest.last_name ? currentRoomType.guest.first_name + ' ' + currentRoomType.guest.last_name : currentRoomType.guest.first_name,\n      unit: (currentRoomType.unit as any)?.id?.toString(),\n    });\n    this.checkBookingAvailability();\n    this.bookPropertyService.setEditingRoomInfo(this.defaultData, this.selectedUnits);\n  }\n\n  private initializePage() {\n    switch (this.defaultData.event_type) {\n      case 'SPLIT_BOOKING':\n        this.showSplitBookingOption = true;\n        this.page = 'page_one';\n        break;\n      case 'BLOCK_DATES':\n        this.page = 'page_block_date';\n        break;\n      default:\n        this.page = 'page_one';\n        break;\n    }\n  }\n\n  async fetchSetupEntries() {\n    return await this.bookingService.fetchSetupEntries();\n  }\n\n  private isGuestDataIncomplete() {\n    for (const roomtypeId in booking_store.ratePlanSelections) {\n      const roomtype = booking_store.ratePlanSelections[roomtypeId];\n      for (const rateplanId in roomtype) {\n        const rateplan = roomtype[rateplanId];\n        if (rateplan.reserved > 0) {\n          for (const guest of rateplan.guest) {\n            if (guest.first_name === '' || guest.last_name === '') {\n              return true;\n            }\n          }\n        }\n      }\n    }\n    return false;\n  }\n\n  private isButtonDisabled() {\n    const isValidProperty = (property, key, comparedBy) => {\n      if (!property) {\n        return true;\n      }\n      if (property === this.guestData) {\n        return this.isGuestDataIncomplete();\n      }\n      if (key === 'selectedArrivalTime') {\n        if (property[key] !== undefined) {\n          return property[key].code === '';\n        } else {\n          return true;\n        }\n      }\n      return property[key] === comparedBy || property[key] === undefined;\n    };\n    return (\n      isValidProperty(this.guestData, 'guestName', '') ||\n      isValidProperty(this.bookedByInfoData, 'firstName', '') ||\n      isValidProperty(this.bookedByInfoData, 'lastName', '') ||\n      isValidProperty(this.bookedByInfoData, 'selectedArrivalTime', '')\n    );\n  }\n\n  private setSourceOptions(bookingSource: any[]) {\n    this.sourceOptions = bookingSource.map(source => ({\n      id: source.id,\n      value: source.description,\n      tag: source.tag,\n      type: source.type,\n    }));\n    this._sourceOptions = this.isEventType('BAR_BOOKING') ? this.getFilteredSourceOptions() : this.sourceOptions;\n    if (this.isEventType('EDIT_BOOKING')) {\n      this.sourceOption = { ...this.defaultData.SOURCE };\n    } else {\n      //get first source option not tag\n      let option: TSourceOptions & { code: string; description: string } = this._sourceOptions.find(o => o.type !== 'LABEL') as any;\n      console.log({ option });\n      this.sourceOption = {\n        code: option.code,\n        description: option.description,\n        tag: option.tag,\n        type: option.type,\n        id: option.id,\n      };\n    }\n  }\n  private getFilteredSourceOptions(): TSourceOptions[] {\n    const agentIds = new Set<string>();\n    const hasAgentOnlyRoomType =\n      this.bookingData?.roomsInfo?.some((rt: any) => {\n        const rps = rt?.rateplans ?? [];\n        if (rps.length === 0) return false;\n\n        const isForAgentOnly = rps.every((rp: any) => (rp?.agents?.length ?? 0) > 0);\n        if (isForAgentOnly) {\n          rps.forEach((rp: any) => {\n            (rp?.agents ?? []).forEach((ag: any) => agentIds.add(ag?.id?.toString()));\n          });\n        }\n        return isForAgentOnly;\n      }) ?? false;\n    if (!hasAgentOnlyRoomType) {\n      return this.sourceOptions;\n    }\n    return (this.sourceOptions ?? []).filter((opt: any) => {\n      if (opt?.type === 'LABEL') return true;\n      const candidate = opt?.tag;\n      const matchesId = candidate != null && agentIds.has(candidate);\n      return matchesId;\n    });\n  }\n  private setOtherProperties(res: any) {\n    this.ratePricingMode = res?.ratePricingMode;\n    this.bookedByInfoData.arrivalTime = res.arrivalTime;\n    this.bedPreferenceType = res.bedPreferenceType;\n  }\n\n  private async checkBookingAvailability() {\n    resetBookingStore();\n    const from_date = moment(this.dateRangeData.fromDate).format('YYYY-MM-DD');\n    const to_date = moment(this.dateRangeData.toDate).format('YYYY-MM-DD');\n    console.log({ sourceOption: this.sourceOption });\n    const is_in_agent_mode = this.sourceOption['type'] === 'TRAVEL_AGENCY';\n    try {\n      const room_type_ids_to_update = this.isEventType('EDIT_BOOKING') ? [this.defaultData.RATE_TYPE] : [];\n      const room_type_ids = this.isEventType('BAR_BOOKING') ? this.defaultData.roomsInfo.map(room => room.id) : [];\n      const data = await this.bookingService.getBookingAvailability({\n        from_date,\n        to_date,\n        propertyid: this.propertyid,\n        adultChildCount: this.adultChildCount,\n        language: this.language,\n        room_type_ids,\n        currency: this.currency,\n        agent_id: is_in_agent_mode ? this.sourceOption['tag'] : null,\n        is_in_agent_mode,\n        room_type_ids_to_update,\n      });\n      if (!this.isEventType('EDIT_BOOKING')) {\n        this.defaultData.defaultDateRange.fromDate = new Date(this.dateRangeData.fromDate);\n        this.defaultData.defaultDateRange.toDate = new Date(this.dateRangeData.toDate);\n      }\n      this.defaultData = { ...this.defaultData, roomsInfo: data };\n      if (this.isEventType('EDIT_BOOKING') && !this.updatedBooking) {\n        this.updateBooking();\n      }\n    } catch (error) {\n      console.error('Error initializing booking availability:', error);\n    }\n  }\n\n  private updateBooking() {\n    try {\n      const { currentRoomType, GUEST } = this.defaultData as IglBookPropertyPayloadEditBooking;\n      const roomtypeId = currentRoomType.roomtype.id;\n      const rateplanId = currentRoomType.rateplan.id;\n      const guest = {\n        bed_preference: currentRoomType.bed_preference?.toString(),\n        infant_nbr: currentRoomType.occupancy.infant_nbr,\n        last_name: GUEST.last_name,\n        first_name: GUEST.first_name,\n        unit: (currentRoomType.unit as any)?.id?.toString(),\n        roomtype_id: currentRoomType.roomtype.id,\n      };\n      modifyBookingStore('guest', guest);\n      reserveRooms({\n        roomTypeId: roomtypeId,\n        ratePlanId: rateplanId,\n        rooms: 1,\n        guest: [guest],\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  }\n  private async checkAndBlockDate() {\n    try {\n      const { block_exposed_unit_props } = this.defaultData;\n      await this.bookingService.getBookingAvailability({\n        from_date: block_exposed_unit_props.from_date,\n        to_date: block_exposed_unit_props.to_date,\n        propertyid: this.propertyid,\n        adultChildCount: {\n          adult: 2,\n          child: 0,\n        },\n        language: this.language,\n        room_type_ids: this.defaultData.roomsInfo.map(room => room.id),\n        currency: this.currency,\n      });\n      const isAvailable = booking_store.roomTypes.every(rt => {\n        if (rt.is_available_to_book) {\n          return true;\n        }\n        return rt.inventory > 0 && rt['not_available_reason'] === 'ALL-RATES-PLAN-NOT-BOOKABLE';\n      });\n      if (isAvailable) {\n        await this.handleBlockDate(false);\n      } else {\n        console.log('Blocked date is unavailable. Continuing...');\n      }\n    } catch (error) {\n      console.error('Error checking and blocking date:', error);\n    }\n  }\n  private async closeWindow() {\n    resetBookingStore();\n    handleBodyOverflow(false);\n\n    if (this.wasBlockedUnit && !this.didReservation) {\n      await this.checkAndBlockDate();\n    }\n    const el = document.querySelector('.sideWindow');\n    if (!el) return;\n\n    el.classList.add('sideWindow--exit');\n\n    setTimeout(() => {\n      this.closeBookingWindow.emit();\n      document.removeEventListener('keydown', this.handleKeyDown);\n    }, 300);\n  }\n\n  private isEventType(key: TEventType) {\n    return this.defaultData.event_type === key;\n  }\n\n  private handleBlockDateUpdate(event: CustomEvent<{ [key: string]: any }>) {\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n    const opt: { [key: string]: any } = event.detail;\n    this.blockDatesData = opt.data;\n  }\n\n  private handleGuestInfoUpdate(event: CustomEvent<{ [key: string]: any }>) {\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n    const opt = event.detail;\n    if (opt.guestRefKey) {\n      if (this.isEventType('BAR_BOOKING') || this.wasBlockedUnit || this.isEventType('SPLIT_BOOKING')) {\n        this.guestData[opt.guestRefKey] = {\n          ...opt.data,\n          roomId: this.defaultData.PR_ID,\n        };\n      } else this.guestData[opt.guestRefKey] = opt.data;\n    }\n  }\n\n  private handleBookedByInfoUpdate(event: CustomEvent<{ [key: string]: any }>) {\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n    const opt: { [key: string]: any } = event.detail;\n    this.bookedByInfoData = opt.value.data;\n  }\n\n  private renderPage() {\n    this.renderAgain = !this.renderAgain;\n  }\n\n  private gotoPage(gotoPage: string) {\n    this.page = gotoPage;\n    this.renderPage();\n  }\n\n  private getPageBlockDatesView() {\n    return (\n      <Fragment>\n        <igl-block-dates-view\n          fromDate={this.defaultData.FROM_DATE}\n          toDate={this.defaultData.TO_DATE}\n          entryDate={this.defaultData.ENTRY_DATE}\n          onDataUpdateEvent={event => this.handleBlockDateUpdate(event)}\n        ></igl-block-dates-view>\n      </Fragment>\n    );\n  }\n\n  private handlePageTwoDataUpdateEvent(event: CustomEvent<IPageTwoDataUpdateProps>) {\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n    if (event.detail.key === 'propertyBookedBy') {\n      this.handleBookedByInfoUpdate(event);\n    } else {\n      this.handleGuestInfoUpdate(event);\n    }\n  }\n\n  private async handleBlockDate(auto_close = true) {\n    const props = this.wasBlockedUnit\n      ? this.defaultData.block_exposed_unit_props\n      : (() => {\n          const releaseData = getReleaseHoursString(+this.blockDatesData.RELEASE_AFTER_HOURS);\n          return {\n            from_date: dateToFormattedString(this.defaultData.defaultDateRange.fromDate),\n            to_date: dateToFormattedString(this.defaultData.defaultDateRange.toDate),\n            NOTES: this.blockDatesData.OPTIONAL_REASON || '',\n            pr_id: this.defaultData.PR_ID.toString(),\n            STAY_STATUS_CODE: this.blockDatesData.OUT_OF_SERVICE ? '004' : this.blockDatesData.RELEASE_AFTER_HOURS === 0 ? '002' : '003',\n            DESCRIPTION: this.blockDatesData.RELEASE_AFTER_HOURS || '',\n            ...releaseData,\n          };\n        })();\n    // const blockedUnit = await transformNewBLockedRooms(result);\n    await this.bookingService.blockUnit(props);\n    // this.blockedCreated.emit(blockedUnit);\n    if (auto_close) this.closeWindow();\n  }\n\n  private async bookUser(check_in: boolean) {\n    this.setLoadingState(check_in);\n\n    if (this.isEventType('EDIT_BOOKING') || this.isEventType('ADD_ROOM')) {\n      if (this.isGuestDataIncomplete()) {\n        this.isLoading = '';\n        return;\n      }\n    } else if (this.isButtonDisabled()) {\n      this.isLoading = '';\n      return;\n    }\n\n    try {\n      if (this.isEventType('EDIT_BOOKING') || this.isEventType('ADD_ROOM')) {\n        this.bookedByInfoData.message = this.defaultData.NOTES;\n      }\n      this.didReservation = true;\n      const serviceParams = await this.bookPropertyService.prepareBookUserServiceParams({\n        context: this,\n        sourceOption: this.sourceOption,\n        check_in,\n      });\n      await this.bookingService.doReservation(serviceParams);\n      await this.adjustBlockedDatesAfterReservation(serviceParams);\n      this.resetBookingEvt.emit(null);\n    } catch (error) {\n      console.error('Error booking user:', error);\n    } finally {\n      // this.isLoading = null;\n      this.resetLoadingState();\n    }\n  }\n  private async adjustBlockedDatesAfterReservation(serviceParams: any) {\n    if (!this.wasBlockedUnit) {\n      return;\n    }\n    const original_from_date = moment(this.defaultData.block_exposed_unit_props.from_date, 'YYYY-MM-DD');\n    const current_from_date = moment(serviceParams.booking.from_date, 'YYYY-MM-DD');\n    const original_to_date = moment(this.defaultData.block_exposed_unit_props.to_date, 'YYYY-MM-DD');\n    const current_to_date = moment(serviceParams.booking.to_date, 'YYYY-MM-DD');\n    if (current_to_date.isBefore(original_to_date, 'days')) {\n      const props = { ...this.defaultData.block_exposed_unit_props, from_date: current_to_date.format('YYYY-MM-DD') };\n      await this.bookingService.blockUnit(props);\n    }\n    if (current_from_date.isAfter(original_from_date, 'days')) {\n      const props = { ...this.defaultData.block_exposed_unit_props, to_date: current_from_date.format('YYYY-MM-DD') };\n      await this.bookingService.blockUnit(props);\n    }\n    return;\n  }\n\n  private setLoadingState(assign_units: boolean) {\n    if (this.isEventType('EDIT_BOOKING') || this.isEventType('ADD_ROOM')) {\n      this.isLoading = 'save';\n    } else {\n      this.isLoading = assign_units ? 'bookAndCheckIn' : 'book';\n    }\n  }\n\n  private resetLoadingState() {\n    this.isLoading = '';\n    setTimeout(() => {\n      this.closeWindow();\n    }, 100);\n  }\n\n  private getCurrentPage(name: string) {\n    return this.page === name;\n  }\n\n  render() {\n    return (\n      <Host data-testid=\"book_property_sheet h-100\">\n        <div class=\"background-overlay\" onClick={() => this.closeWindow()}></div>\n        <div class={'sideWindow sheet-container ' + (this.getCurrentPage('page_block_date') ? 'block-date' : '')}>\n          {isRequestPending('/Get_Setup_Entries_By_TBL_NAME_MULTI') ? (\n            <div class={'loading-container'}>\n              <ir-spinner></ir-spinner>\n            </div>\n          ) : (\n            <Fragment>\n              <div class=\"sheet-header\">\n                <div class=\"card-header-container mb-2\">\n                  <h3 class=\"text-left font-medium-2 px-2\">{this.getCurrentPage('page_block_date') ? this.defaultData.BLOCK_DATES_TITLE : this.defaultData.TITLE}</h3>\n                  <ir-icon\n                    class={'px-2'}\n                    onIconClickHandler={() => {\n                      this.closeWindow();\n                    }}\n                  >\n                    <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 384 512\" height={20} width={20}>\n                      <path\n                        fill=\"currentColor\"\n                        d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\"\n                      />\n                    </svg>\n                  </ir-icon>\n                </div>\n              </div>\n              <div class=\"px-2 sheet-body\">\n                {this.getCurrentPage('page_one') && (\n                  <igl-booking-overview-page\n                    wasBlockedUnit={this.wasBlockedUnit}\n                    initialRoomIds={this.initialRoomIds}\n                    defaultDaterange={this.defaultDateRange}\n                    eventType={this.defaultData.event_type}\n                    selectedRooms={this.selectedUnits}\n                    currency={this.currency}\n                    showSplitBookingOption={this.showSplitBookingOption}\n                    ratePricingMode={this.ratePricingMode}\n                    dateRangeData={this.dateRangeData}\n                    bookingData={this.defaultData}\n                    adultChildCount={this.adultChildCount}\n                    bookedByInfoData={this.bookedByInfoData}\n                    adultChildConstraints={this.adultChildConstraints}\n                    sourceOptions={this._sourceOptions}\n                    propertyId={this.propertyid}\n                  ></igl-booking-overview-page>\n                )}\n\n                {this.getCurrentPage('page_two') && (\n                  <igl-booking-form\n                    currency={this.currency}\n                    propertyId={this.propertyid}\n                    showPaymentDetails={this.showPaymentDetails}\n                    selectedGuestData={this.guestData}\n                    countries={this.countries}\n                    isLoading={this.isLoading}\n                    selectedRooms={this.selectedUnits}\n                    bedPreferenceType={this.bedPreferenceType}\n                    dateRangeData={this.dateRangeData}\n                    bookingData={this.defaultData}\n                    showSplitBookingOption={this.showSplitBookingOption}\n                    language={this.language}\n                    bookedByInfoData={this.bookedByInfoData}\n                    defaultGuestData={this.defaultData}\n                    isEditOrAddRoomEvent={this.isEventType('EDIT_BOOKING') || this.isEventType('ADD_ROOM')}\n                    onDataUpdateEvent={event => this.handlePageTwoDataUpdateEvent(event)}\n                  ></igl-booking-form>\n                )}\n                {this.getCurrentPage('page_block_date') ? this.getPageBlockDatesView() : null}\n              </div>\n              {this.getCurrentPage('page_block_date') ? (\n                <div class=\"sheet-footer\">\n                  <ir-button text={locales.entries.Lcz_Cancel} btn_color=\"secondary\" class=\"flex-fill\" onClick={() => this.closeWindow()}></ir-button>\n                  <ir-button\n                    text={locales.entries.Lcz_Blockdates}\n                    isLoading={isRequestPending('/Block_Exposed_Unit')}\n                    class=\"flex-fill\"\n                    onClick={() => this.handleBlockDate()}\n                  ></ir-button>\n                </div>\n              ) : (\n                <igl-book-property-footer\n                  page={this.page}\n                  dateRangeData={this.dateRangeData}\n                  isEditOrAddRoomEvent={this.isEventType('EDIT_BOOKING') || this.isEventType('ADD_ROOM')}\n                  isLoading={this.isLoading}\n                  class={'sheet-footer'}\n                  eventType={this.bookingData.event_type}\n                ></igl-book-property-footer>\n              )}\n            </Fragment>\n          )}\n        </div>\n      </Host>\n    );\n  }\n}\n",":host {\n  width: 100% !important;\n  background: #000;\n}\n","import { Component, Event, EventEmitter, Fragment, Host, Prop, h } from '@stencil/core';\nimport { TPropertyButtonsTypes } from '../../../../models/igl-book-property';\nimport locales from '@/stores/locales.store';\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\nimport { TIcons } from '@/components/ui/ir-icons/icons';\nimport calendar_data from '@/stores/calendar-data';\nimport moment from 'moment';\n\n@Component({\n  tag: 'igl-book-property-footer',\n  styleUrl: 'igl-book-property-footer.css',\n  scoped: true,\n})\nexport class IglBookPropertyFooter {\n  @Prop() eventType: string;\n  @Prop() disabled: boolean = true;\n  @Prop() page: string;\n  @Prop({ reflect: true }) isEditOrAddRoomEvent: boolean;\n  @Prop() dateRangeData: { [key: string]: any };\n  @Prop() isLoading: string;\n\n  @Event() buttonClicked: EventEmitter<{ key: TPropertyButtonsTypes }>;\n\n  private isEventType(event: string) {\n    return event === this.eventType;\n  }\n  private editNext(label) {\n    if (this.isEventType('EDIT_BOOKING')) {\n      if (label === 'Cancel') {\n        return 'flex-fill';\n      } else {\n        return 'd-none d-md-block  flex-fill';\n      }\n    }\n    return 'flex-fill';\n  }\n\n  private renderButton({\n    label,\n    type,\n    disabled,\n    icon_name,\n    isLoading,\n    icon_position = 'right',\n  }: {\n    type: TPropertyButtonsTypes;\n    label: string;\n    disabled?: boolean;\n    icon_name?: TIcons;\n    isLoading?: boolean;\n    icon_position?: 'right' | 'left';\n  }) {\n    return (\n      <div class={this.shouldRenderTwoButtons() ? ` ${this.editNext(label)}` : 'flex-fill'}>\n        {/* <button class={`btn btn-${type === 'cancel' ? 'secondary' : 'primary'} full-width`} onClick={() => this.buttonClicked.emit({ key: type })} disabled={disabled}>\n          {label}\n        </button> */}\n        <ir-button\n          isLoading={isLoading}\n          btn_color={type === 'cancel' || type === 'back' ? 'secondary' : 'primary'}\n          text={label}\n          btn_disabled={disabled}\n          onClickHandler={() => {\n            this.buttonClicked.emit({ key: type });\n          }}\n          class=\"full-width\"\n          btn_styles=\"justify-content-center\"\n          icon_name={icon_name}\n          iconPosition={icon_position}\n          style={{ '--icon-size': '1rem' }}\n          icon_style={{ paddingBottom: '1.9px' }}\n        ></ir-button>\n      </div>\n    );\n  }\n\n  private shouldRenderTwoButtons() {\n    return this.isEventType('PLUS_BOOKING') || this.isEventType('ADD_ROOM') || this.isEventType('EDIT_BOOKING');\n  }\n\n  render() {\n    if (this.page === 'page_one') {\n      return (\n        <Host>\n          {/* <div class=\"d-flex justify-content-between gap-30 align-items-center full-width\"> */}\n          {this.isEventType('EDIT_BOOKING') ? (\n            <Fragment>\n              {this.renderButton({ type: 'cancel', label: locales.entries.Lcz_Cancel })}\n              {this.shouldRenderTwoButtons() &&\n                this.renderButton({\n                  type: 'next',\n                  label: `${locales.entries.Lcz_Next}`,\n                  disabled: isRequestPending('/Get_Exposed_Booking_Availability'),\n                  icon_name: 'angles_right',\n                })}\n            </Fragment>\n          ) : (\n            <Fragment>\n              {this.renderButton({ type: 'cancel', label: locales.entries.Lcz_Cancel })}\n              {this.shouldRenderTwoButtons() && this.renderButton({ type: 'next', label: `${locales.entries.Lcz_Next}`, icon_name: 'angles_right' })}\n            </Fragment>\n          )}\n          {/* </div> */}\n        </Host>\n      );\n    }\n    const showBookAndCheckin = calendar_data.checkin_enabled && moment(new Date(this.dateRangeData?.fromDate)).isSame(new Date(), 'day');\n    return (\n      <Fragment>\n        {this.isEditOrAddRoomEvent ? (\n          <Fragment>\n            {this.renderButton({ type: 'back', icon_position: 'left', label: locales.entries.Lcz_Back, icon_name: 'angles_left' })}\n            {this.renderButton({ type: 'save', label: locales.entries.Lcz_Save, isLoading: this.isLoading === 'save' })}\n          </Fragment>\n        ) : (\n          <Fragment>\n            {this.renderButton({ type: 'back', icon_position: 'left', label: locales.entries.Lcz_Back, icon_name: 'angles_left' })}\n            {this.renderButton({ type: 'book', label: locales.entries.Lcz_Book, isLoading: this.isLoading === 'book' })}\n            {showBookAndCheckin && this.renderButton({ type: 'bookAndCheckIn', label: locales.entries.Lcz_BookAndChekcIn, isLoading: this.isLoading === 'bookAndCheckIn' })}\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n\n.sourceContainer {\n  max-width: 350px;\n}\n.message-label {\n  font-size: 80%;\n}\n","import { Component, Host, Prop, h, Event, EventEmitter } from '@stencil/core';\nimport { TAdultChildConstraints, TPropertyButtonsTypes, TSourceOption, TSourceOptions } from '../../../../models/igl-book-property';\n\nimport moment from 'moment';\nimport locales from '@/stores/locales.store';\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\nimport calendar_data from '@/stores/calendar-data';\nimport { IToast } from '@/components/ui/ir-toast/toast';\nimport { modifyBookingStore } from '@/stores/booking.store';\n\n@Component({\n  tag: 'igl-book-property-header',\n  styleUrl: 'igl-book-property-header.css',\n  scoped: true,\n})\nexport class IglBookPropertyHeader {\n  @Prop() splitBookingId: any = '';\n  @Prop() bookingData: any = '';\n  @Prop() minDate: string;\n  @Prop() sourceOptions: TSourceOptions[] = [];\n  @Prop() message: string;\n  @Prop() bookingDataDefaultDateRange: { [key: string]: any };\n  @Prop() showSplitBookingOption: boolean = false;\n  @Prop() adultChildConstraints: TAdultChildConstraints;\n  @Prop() splitBookings: any[];\n  @Prop() adultChildCount: { adult: number; child: number };\n  @Prop() dateRangeData: any;\n  @Prop() bookedByInfoData: any;\n  @Prop() defaultDaterange: { from_date: string; to_date: string };\n  @Prop() propertyId: number;\n  @Prop() wasBlockedUnit: boolean;\n\n  @Event() splitBookingDropDownChange: EventEmitter<any>;\n  @Event() sourceDropDownChange: EventEmitter<string>;\n  @Event() adultChild: EventEmitter<any>;\n  @Event() checkClicked: EventEmitter<any>;\n  @Event() buttonClicked: EventEmitter<{ key: TPropertyButtonsTypes }>;\n  @Event() toast: EventEmitter<IToast>;\n  @Event() spiltBookingSelected: EventEmitter<{ key: string; data: unknown }>;\n\n  @Event({ bubbles: true, composed: true }) animateIrButton: EventEmitter<string>;\n  @Event({ bubbles: true, composed: true }) animateIrSelect: EventEmitter<string>;\n\n  private sourceOption: TSourceOption = {\n    code: '',\n    description: '',\n    tag: '',\n    id: '',\n    type: '',\n  };\n\n  getSplitBookingList() {\n    return (\n      <fieldset class=\"d-flex flex-column text-left mb-1  flex-lg-row align-items-lg-center\">\n        <label class=\"mr-lg-1\">{locales.entries.Lcz_Tobooking}# </label>\n        <div class=\"btn-group mt-1 mt-lg-0 sourceContainer\">\n          <ir-autocomplete\n            value={\n              Object.keys(this.bookedByInfoData).length > 1 ? `${this.bookedByInfoData.bookingNumber} ${this.bookedByInfoData.firstName} ${this.bookedByInfoData.lastName}` : ''\n            }\n            from_date={moment(this.bookingDataDefaultDateRange.fromDate).format('YYYY-MM-DD')}\n            to_date={moment(this.bookingDataDefaultDateRange.toDate).format('YYYY-MM-DD')}\n            propertyId={this.propertyId}\n            placeholder={locales.entries.Lcz_BookingNumber}\n            onComboboxValue={e => {\n              e.stopImmediatePropagation();\n              e.stopPropagation;\n              this.spiltBookingSelected.emit(e.detail);\n            }}\n            isSplitBooking\n          ></ir-autocomplete>\n        </div>\n      </fieldset>\n    );\n  }\n  getSourceNode() {\n    return (\n      <fieldset class=\"d-flex text-left  align-items-center\">\n        <label class=\"mr-1\">{locales.entries.Lcz_Source} </label>\n        <div class=\"btn-group mt-0 flex-fill sourceContainer\">\n          <select class=\"form-control input-sm\" id=\"xSmallSelect\" onChange={evt => this.sourceDropDownChange.emit((evt.target as HTMLSelectElement).value)}>\n            {this.sourceOptions.map(option => {\n              if (option.type === 'LABEL') {\n                return <optgroup label={option.value}></optgroup>;\n              }\n              return (\n                <option value={option.id} selected={this.sourceOption.code === option.id}>\n                  {option.value}\n                </option>\n              );\n            })}\n          </select>\n        </div>\n      </fieldset>\n    );\n  }\n  handleAdultChildChange(key: string, value: string) {\n    //const value = (event.target as HTMLSelectElement).value;\n    let obj = {};\n    if (value === '') {\n      obj = {\n        ...this.adultChildCount,\n        [key]: 0,\n      };\n    } else {\n      obj = {\n        ...this.adultChildCount,\n        [key]: value,\n      };\n    }\n    modifyBookingStore('bookingAvailabilityParams', {\n      from_date: this.bookingDataDefaultDateRange.fromDate,\n      to_date: this.bookingDataDefaultDateRange.toDate,\n      adult_nbr: obj?.['adult'] ?? 0,\n      child_nbr: obj?.['child'] ?? 0,\n    });\n    this.adultChild.emit(obj);\n  }\n\n  getAdultChildConstraints() {\n    return (\n      <div class={'mt-1 mt-lg-0 d-flex flex-column text-left'}>\n        {/* <label class=\"mb-1 d-lg-none\">{locales.entries.Lcz_NumberOfGuests} </label> */}\n        <div class=\"form-group  my-lg-0 text-left d-flex align-items-center justify-content-between justify-content-sm-start\">\n          <fieldset>\n            <div class=\"btn-group ml-0\">\n              <ir-select\n                testId=\"adult_number\"\n                class={'m-0'}\n                selectedValue={this.adultChildCount?.adult?.toString()}\n                onSelectChange={e => this.handleAdultChildChange('adult', e.detail)}\n                selectId=\"adult_select\"\n                firstOption={locales.entries.Lcz_AdultsCaption}\n                data={Array.from(Array(this.adultChildConstraints.adult_max_nbr), (_, i) => i + 1).map(option => ({\n                  text: option.toString(),\n                  value: option.toString(),\n                }))}\n              ></ir-select>\n            </div>\n          </fieldset>\n          {this.adultChildConstraints.child_max_nbr > 0 && (\n            <fieldset>\n              <div class=\"btn-group ml-1 p-0\">\n                {/* <select class=\"form-control input-sm\" id=\"xChildrenSmallSelect\" onChange={evt => this.handleAdultChildChange('child', evt)}>\n                  <option value={''}>{this.renderChildCaption()}</option>\n                  {Array.from(Array(this.adultChildConstraints.child_max_nbr), (_, i) => i + 1).map(option => (\n                    <option value={option}>{option}</option>\n                  ))}\n                </select> */}\n                <ir-select\n                  selectedValue={this.adultChildCount?.child?.toString()}\n                  testId=\"child_number\"\n                  onSelectChange={e => this.handleAdultChildChange('child', e.detail)}\n                  selectId=\"child_select\"\n                  firstOption={this.renderChildCaption()}\n                  data={Array.from(Array(this.adultChildConstraints.child_max_nbr), (_, i) => i + 1).map(option => ({\n                    text: option.toString(),\n                    value: option.toString(),\n                  }))}\n                ></ir-select>\n              </div>\n            </fieldset>\n          )}\n          <ir-button\n            btn_id=\"check_availability\"\n            isLoading={isRequestPending('/Check_Availability')}\n            size=\"sm\"\n            class=\"ml-2\"\n            text={locales.entries.Lcz_Check}\n            onClickHandler={() => this.handleButtonClicked()}\n          ></ir-button>\n          {/* <button class={'btn btn-primary btn-sm  ml-2'} onClick={() => this.handleButtonClicked()}>\n            {locales.entries.Lcz_Check}\n          </button> */}\n        </div>\n      </div>\n    );\n  }\n  renderChildCaption() {\n    const maxAge = this.adultChildConstraints.child_max_age;\n    let years = locales.entries.Lcz_Years;\n\n    if (maxAge === 1) {\n      years = locales.entries.Lcz_Year;\n    }\n    return `${locales.entries.Lcz_ChildCaption} 0 - ${this.adultChildConstraints.child_max_age} ${years}`;\n  }\n  handleButtonClicked() {\n    if (this.isEventType('SPLIT_BOOKING') && Object.keys(this.bookedByInfoData).length <= 1) {\n      this.toast.emit({\n        type: 'error',\n        title: locales.entries.Lcz_ChooseBookingNumber,\n        description: '',\n        position: 'top-right',\n      });\n    } else if (this.isEventType('ADD_ROOM') || this.isEventType('SPLIT_BOOKING')) {\n      const initialToDate = moment(new Date(this.bookedByInfoData.to_date || this.defaultDaterange.to_date));\n      const initialFromDate = moment(new Date(this.bookedByInfoData.from_date || this.defaultDaterange.from_date));\n      const selectedFromDate = moment(new Date(this.dateRangeData.fromDate));\n      const selectedToDate = moment(new Date(this.dateRangeData.toDate));\n      if (selectedToDate.isBefore(initialFromDate) || selectedFromDate.isAfter(initialToDate)) {\n        this.toast.emit({\n          type: 'error',\n          title: `${locales.entries.Lcz_CheckInDateShouldBeMAx.replace(\n            '%1',\n            moment(new Date(this.bookedByInfoData.from_date || this.defaultDaterange.from_date)).format('ddd, DD MMM YYYY'),\n          ).replace('%2', moment(new Date(this.bookedByInfoData.to_date || this.defaultDaterange.to_date)).format('ddd, DD MMM YYYY'))}  `,\n          description: '',\n          position: 'top-right',\n        });\n        return;\n      } else if (this.adultChildCount.adult === 0) {\n        this.toast.emit({ type: 'error', title: locales.entries.Lcz_PlzSelectNumberOfGuests, description: '', position: 'top-right' });\n        this.animateIrSelect.emit('adult_child_select');\n      } else {\n        this.buttonClicked.emit({ key: 'check' });\n      }\n    } else if (this.minDate && new Date(this.dateRangeData.fromDate).getTime() > new Date(this.bookedByInfoData.to_date || this.defaultDaterange.to_date).getTime()) {\n      this.toast.emit({\n        type: 'error',\n        title: `${locales.entries.Lcz_CheckInDateShouldBeMAx.replace(\n          '%1',\n          moment(new Date(this.bookedByInfoData.from_date || this.defaultDaterange.from_date)).format('ddd, DD MMM YYYY'),\n        ).replace('%2', moment(new Date(this.bookedByInfoData.to_date || this.defaultDaterange.to_date)).format('ddd, DD MMM YYYY'))}  `,\n        description: '',\n        position: 'top-right',\n      });\n    } else if (this.adultChildCount.adult === 0) {\n      this.animateIrSelect.emit('adult_child_select');\n      this.toast.emit({ type: 'error', title: locales.entries.Lcz_PlzSelectNumberOfGuests, description: '', position: 'top-right' });\n    } else {\n      this.buttonClicked.emit({ key: 'check' });\n    }\n  }\n  isEventType(key: string) {\n    return this.bookingData.event_type === key;\n  }\n  private getMinDate() {\n    if (this.isEventType('PLUS_BOOKING')) {\n      return moment().add(-1, 'months').startOf('month').format('YYYY-MM-DD');\n    }\n    if (this.wasBlockedUnit) {\n      return this.bookingData?.block_exposed_unit_props.from_date;\n    }\n    return this.minDate;\n  }\n  private getMaxDate() {\n    if (!this.bookingData?.block_exposed_unit_props) {\n      return undefined;\n    }\n    return this.bookingData?.block_exposed_unit_props.to_date;\n  }\n  render() {\n    const showSourceNode = this.showSplitBookingOption ? this.getSplitBookingList() : this.isEventType('EDIT_BOOKING') || this.isEventType('ADD_ROOM') ? false : true;\n    return (\n      <Host>\n        {this.isEventType('SPLIT_BOOKING') && this.getSplitBookingList()}\n        {showSourceNode && this.getSourceNode()}\n        <div class={`d-flex flex-column flex-lg-row align-items-lg-center ${showSourceNode ? 'mt-1' : ''}`}>\n          <fieldset class=\"mt-lg-0 mr-1 \">\n            <igl-date-range\n              data-testid=\"date_picker\"\n              variant=\"booking\"\n              dateLabel={locales.entries.Lcz_Dates}\n              maxDate={this.getMaxDate()}\n              minDate={this.getMinDate()}\n              disabled={(this.isEventType('BAR_BOOKING') && !this.wasBlockedUnit) || this.isEventType('SPLIT_BOOKING')}\n              defaultData={this.bookingDataDefaultDateRange}\n            ></igl-date-range>\n          </fieldset>\n          {!this.isEventType('EDIT_BOOKING') && this.getAdultChildConstraints()}\n        </div>\n        <p class=\"text-right mt-1 message-label\">{calendar_data.tax_statement}</p>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: flex;\n  flex-direction: column;\n}\n","import { Component, Prop, h, Event, EventEmitter, State } from '@stencil/core';\nimport { IPageTwoDataUpdateProps } from '@/models/models';\nimport { IglBookPropertyPayloadEditBooking, TPropertyButtonsTypes } from '../../../../models/igl-book-property';\nimport { formatAmount } from '@/utils/utils';\nimport locales from '@/stores/locales.store';\nimport { ICurrency } from '@/models/calendarData';\nimport booking_store, { IRatePlanSelection } from '@/stores/booking.store';\nimport { ICountry } from '@/models/IBooking';\n@Component({\n  tag: 'igl-booking-form',\n  styleUrl: 'igl-booking-form.css',\n  scoped: true,\n})\nexport class IglBookingForm {\n  @Prop() showPaymentDetails: boolean;\n  @Prop() currency: ICurrency;\n  @Prop({ reflect: true }) isEditOrAddRoomEvent: boolean;\n  @Prop() dateRangeData: { [key: string]: any };\n  @Prop() bookingData: { [key: string]: any };\n  @Prop() showSplitBookingOption: boolean;\n  @Prop() language: string;\n  @Prop() bookedByInfoData: { [key: string]: any };\n  @Prop() propertyId: number;\n  @Prop() bedPreferenceType: any;\n  @Prop() selectedRooms: Map<string, Map<string, any>>;\n  @Prop({ reflect: true }) isLoading: string;\n  @Prop() countries: ICountry[];\n  @Prop() selectedGuestData;\n  @Prop() defaultGuestData: IglBookPropertyPayloadEditBooking;\n\n  @State() selectedBookedByData;\n  @State() guestData: any;\n  @State() selectedUnits: { [key: string]: any } = {};\n\n  @Event() dataUpdateEvent: EventEmitter<IPageTwoDataUpdateProps>;\n  @Event() buttonClicked: EventEmitter<{\n    key: TPropertyButtonsTypes;\n    data?: CustomEvent;\n  }>;\n\n  componentWillLoad() {\n    this.initializeGuestData();\n    this.selectedBookedByData = this.bookedByInfoData;\n  }\n\n  initializeGuestData() {\n    let total = 0;\n    const newSelectedUnits = { ...this.selectedUnits };\n    const getRate = (rate: number, totalNights: number, isRateModified: boolean, preference: number) => {\n      if (isRateModified && preference === 2) {\n        return rate * totalNights;\n      }\n      return rate;\n    };\n    this.selectedUnits = newSelectedUnits;\n    this.guestData = [];\n    this.selectedRooms.forEach((room, key) => {\n      room.forEach(rate_plan => {\n        newSelectedUnits[key] = rate_plan.selectedUnits;\n        total += rate_plan.totalRooms * getRate(rate_plan.rate, this.dateRangeData.dateDifference, rate_plan.isRateModified, rate_plan.rateType);\n        for (let i = 1; i <= rate_plan.totalRooms; i++) {\n          this.guestData.push({\n            guestName: '',\n            roomId: '',\n            preference: '',\n            ...rate_plan,\n          });\n        }\n      });\n    });\n    this.bookingData.TOTAL_PRICE = total;\n  }\n  handleOnApplicationInfoDataUpdateEvent(event: CustomEvent, index: number) {\n    const opt = event.detail;\n    const categoryIdKey = `c_${opt.data.roomCategoryId}`;\n    const updatedUnits = [...(this.selectedUnits[categoryIdKey] || [])];\n    updatedUnits[index] = opt.data.roomId;\n    this.selectedUnits = {\n      ...this.selectedUnits,\n      [categoryIdKey]: updatedUnits,\n    };\n    this.dataUpdateEvent.emit({\n      key: 'applicationInfoUpdateEvent',\n      value: event.detail,\n    });\n  }\n\n  handleEventData(event: any, key: string, index: number) {\n    if (key === 'application-info') {\n      this.handleOnApplicationInfoDataUpdateEvent(event, index);\n    } else {\n      this.selectedBookedByData = event.detail.data;\n      this.dataUpdateEvent.emit({\n        key: 'propertyBookedBy',\n        value: event.detail,\n      });\n    }\n  }\n  isGuestDataIncomplete() {\n    if (this.selectedGuestData.length !== this.guestData.length) {\n      return true;\n    }\n    for (const data of this.selectedGuestData) {\n      if (data.guestName === '' || data.preference === '' || data.roomId === '') {\n        return true;\n      }\n    }\n    return false;\n  }\n  isButtonDisabled(key: string) {\n    const isValidProperty = (property, key, comparedBy) => {\n      if (!property) {\n        return true;\n      }\n      if (property === this.selectedGuestData) {\n        return this.isGuestDataIncomplete();\n      }\n      if (key === 'selectedArrivalTime') {\n        if (property[key] !== undefined) {\n          return property[key].code === '';\n        } else {\n          return true;\n        }\n      }\n      return property[key] === comparedBy || property[key] === undefined;\n    };\n    return (\n      this.isLoading === key ||\n      isValidProperty(this.selectedGuestData, 'guestName', '') ||\n      isValidProperty(this.selectedBookedByData, 'isdCode', '') ||\n      isValidProperty(this.selectedBookedByData, 'contactNumber', '') ||\n      isValidProperty(this.selectedBookedByData, 'firstName', '') ||\n      isValidProperty(this.selectedBookedByData, 'lastName', '') ||\n      isValidProperty(this.selectedBookedByData, 'countryId', -1) ||\n      isValidProperty(this.selectedBookedByData, 'selectedArrivalTime', '') ||\n      isValidProperty(this.selectedBookedByData, 'email', '')\n    );\n  }\n\n  render() {\n    return (\n      <div class=\"d-flex flex-column h-100\">\n        <div class=\"d-flex flex-wrap\">\n          <ir-date-view\n            class=\"mr-1 flex-fill font-weight-bold font-medium-1\"\n            from_date={new Date(this.dateRangeData.fromDate)}\n            to_date={new Date(this.dateRangeData.toDate)}\n            dateOption=\"DD MMM YYYY\"\n          ></ir-date-view>\n          {this.guestData.length > 1 && (\n            <div class=\"mt-1 mt-md-0 text-right\">\n              {locales.entries.Lcz_TotalPrice} <span class=\"font-weight-bold font-medium-1\">{formatAmount(this.currency.symbol, this.bookingData.TOTAL_PRICE || '0')}</span>\n            </div>\n          )}\n        </div>\n        {Object.values(booking_store.ratePlanSelections).map(val =>\n          Object.values(val).map(ratePlan => {\n            const rp = ratePlan as IRatePlanSelection;\n            if (rp.reserved === 0) {\n              return null;\n            }\n\n            return [...new Array(rp.reserved)].map((_, i) => (\n              <igl-application-info\n                totalNights={Number(this.dateRangeData.dateDifference)}\n                bedPreferenceType={this.bedPreferenceType}\n                currency={this.currency}\n                guestInfo={rp.guest ? rp.guest[i] : null}\n                bookingType={this.bookingData.event_type}\n                rateplanSelection={rp}\n                key={`${rp.ratePlan.id}_${i}`}\n                roomIndex={i}\n                baseData={\n                  this.bookingData.event_type === 'EDIT_BOOKING'\n                    ? {\n                        roomtypeId: this.bookingData.currentRoomType.roomtype.id,\n                        unit: this.bookingData.currentRoomType.unit,\n                      }\n                    : undefined\n                }\n              ></igl-application-info>\n            ));\n          }),\n        )}\n\n        {this.isEditOrAddRoomEvent || this.showSplitBookingOption ? null : (\n          <igl-property-booked-by\n            propertyId={this.propertyId}\n            countries={this.countries}\n            language={this.language}\n            showPaymentDetails={this.showPaymentDetails}\n            defaultData={this.bookedByInfoData}\n            onDataUpdateEvent={event => {\n              this.handleEventData(event, 'propertyBookedBy', 0);\n            }}\n          ></igl-property-booked-by>\n        )}\n      </div>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n:host > * {\n  margin: 0;\n  padding: auto;\n}\n.scrollContent {\n  height: calc(100% - 79px);\n  overflow: auto;\n  position: relative;\n}\n.loading-container {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  background: white;\n  position: absolute;\n  inset: 0;\n  z-index: 100;\n}\n.loader {\n  width: 1.25rem;\n  height: 1.25rem;\n  border: 2.5px solid #3f3f3f;\n  border-bottom-color: transparent;\n  border-radius: 50%;\n  display: inline-block;\n  box-sizing: border-box;\n  animation: rotation 1s linear infinite;\n}\n","import { Component, Event, EventEmitter, Fragment, Host, Prop, h } from '@stencil/core';\nimport { TAdultChildConstraints, TSourceOptions } from '../../../../models/igl-book-property';\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\nimport moment from 'moment';\nimport booking_store from '@/stores/booking.store';\n@Component({\n  tag: 'igl-booking-overview-page',\n  styleUrl: 'igl-booking-overview-page.css',\n  scoped: true,\n})\nexport class IglBookingOverviewPage {\n  @Prop() bookingData: any;\n  @Prop() propertyId: number;\n  @Prop() message: string;\n  @Prop() showSplitBookingOption: boolean;\n  @Prop() eventType: string;\n  @Prop() currency: any;\n  @Prop() adultChildConstraints: TAdultChildConstraints;\n  @Prop() ratePricingMode: any;\n  @Prop() dateRangeData: any;\n  @Prop() defaultDaterange: { from_date: string; to_date: string };\n  @Prop() selectedRooms: Map<string, Map<string, any>>;\n  @Prop() adultChildCount: { adult: number; child: number };\n  @Prop() sourceOptions: TSourceOptions[];\n  @Prop() bookedByInfoData: any;\n  @Prop() initialRoomIds: any;\n  @Prop() wasBlockedUnit: boolean;\n\n  @Event() roomsDataUpdate: EventEmitter;\n\n  getSplitBookings() {\n    return (this.bookingData.hasOwnProperty('splitBookingEvents') && this.bookingData.splitBookingEvents) || [];\n  }\n  isEventType(event: string) {\n    return event === this.eventType;\n  }\n  setMinDate() {\n    if (!this.isEventType('EDIT_BOOKING')) {\n      return;\n    }\n    const from_date = moment(this.bookingData.FROM_DATE, 'YYYY-MM-DD');\n    const today = moment();\n    if (from_date.isAfter(today)) {\n      return today.add(-2, 'weeks').format('YYYY-MM-DD');\n    }\n    return from_date.add(-2, 'weeks').format('YYYY-MM-DD');\n  }\n  render() {\n    return (\n      <Host>\n        <igl-book-property-header\n          wasBlockedUnit={this.wasBlockedUnit}\n          bookedByInfoData={this.bookedByInfoData}\n          defaultDaterange={this.defaultDaterange}\n          dateRangeData={this.dateRangeData}\n          minDate={this.setMinDate()}\n          // minDate={this.isEventType('ADD_ROOM') || this.isEventType('SPLIT_BOOKING') ? this.bookedByInfoData.from_date || this.bookingData.FROM_DATE : undefined}\n          adultChildCount={this.adultChildCount}\n          splitBookingId={this.showSplitBookingOption}\n          bookingData={this.bookingData}\n          sourceOptions={this.sourceOptions}\n          message={this.message}\n          bookingDataDefaultDateRange={this.bookingData.defaultDateRange}\n          showSplitBookingOption={this.showSplitBookingOption}\n          adultChildConstraints={this.adultChildConstraints}\n          splitBookings={this.getSplitBookings()}\n          propertyId={this.propertyId}\n        ></igl-book-property-header>\n        {/* {this.adultChildCount.adult === 0 && <p class={'col text-left'}>Please select the number of guests</p>} */}\n        <div class=\" text-left\">\n          {isRequestPending('/Check_Availability') && this.isEventType('EDIT_BOOKING') ? (\n            <div class=\"loading-container\">\n              <div class=\"loader\"></div>\n            </div>\n          ) : (\n            <Fragment>\n              {booking_store.roomTypes?.map(roomType => (\n                <igl-room-type\n                  initialRoomIds={this.initialRoomIds}\n                  isBookDisabled={Object.keys(this.bookedByInfoData).length <= 1}\n                  key={`room-type-${roomType.id}`}\n                  currency={this.currency}\n                  ratePricingMode={this.ratePricingMode}\n                  dateDifference={this.dateRangeData.dateDifference}\n                  bookingType={this.bookingData.event_type}\n                  roomType={roomType}\n                  class=\"mt-2 mb-1 p-0\"\n                  data-testid={`room_type_${roomType.id}`}\n                  id={roomType.id.toString()}\n                  roomInfoId={this.selectedRooms.has(`c_${roomType.id}`) ? roomType.id : null}\n                  onDataUpdateEvent={evt => this.roomsDataUpdate.emit(evt.detail)}\n                ></igl-room-type>\n              ))}\n            </Fragment>\n          )}\n        </div>\n\n        {/* <igl-book-property-footer class={'p-0 mb-1 mt-3'} eventType={this.bookingData.event_type}></igl-book-property-footer> */}\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n.bookedByEmailContainer {\n  flex: auto;\n  max-width: 350px;\n}\n\n.bookedDetailsForm label {\n  min-width: 125px;\n  max-width: 125px;\n}\n.row.sc-igl-booking-form {\n  padding: 0 !important;\n}\n.bookedDetailsForm .form-group {\n  margin-bottom: 10px !important;\n}\n\n.bookedDetailsForm .checkBoxContainer input {\n  height: 1.2rem !important;\n  width: 30px;\n}\n/* .controlContainer1 .textarea-container {\n  border: 1px solid #ced4da; \n  border-radius: 0.25rem; \n  height: 60px; \n  width: 100%;\n} */\n.controlContainer textarea {\n  height: 60px !important;\n}\n.margin3 {\n  margin-bottom: 5px !important;\n}\n@media (min-width: 768px) {\n  .bookedByEmailContainer {\n    margin-left: 37px;\n  }\n}\n","import { Component, Host, h, Prop, Event, EventEmitter, State, Fragment, Listen } from '@stencil/core';\nimport { BookingService } from '@/services/booking.service';\nimport { IEntries, ICountry } from '@/models/IBooking';\nimport { v4 } from 'uuid';\nimport locales from '@/stores/locales.store';\nimport { TPropertyButtonsTypes } from '@/components';\nimport { z } from 'zod';\nimport { validateEmail } from '@/utils/utils';\nimport booking_store, { BookingStore, modifyBookingStore } from '@/stores/booking.store';\n\n@Component({\n  tag: 'igl-property-booked-by',\n  styleUrl: 'igl-property-booked-by.css',\n  scoped: true,\n})\nexport class IglPropertyBookedBy {\n  @Prop() language: string;\n  @Prop() showPaymentDetails: boolean = false;\n  @Prop() defaultData: { [key: string]: any };\n  @Event() dataUpdateEvent: EventEmitter<{ [key: string]: any }>;\n  @Prop() countries: ICountry[] = [];\n  @Prop() propertyId: number;\n  @State() isButtonPressed: boolean = false;\n  private bookingService: BookingService = new BookingService();\n  private arrivalTimeList: IEntries[] = [];\n  private expiryMonths: string[] = ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12'];\n  private expiryYears: string[] = [];\n  private currentMonth: string = '01';\n  private country;\n  @State() bookedByData: { [key: string]: any } = {\n    id: undefined,\n    email: '',\n    firstName: '',\n    lastName: '',\n    countryId: '',\n    isdCode: '',\n    contactNumber: '',\n    selectedArrivalTime: '',\n    emailGuest: false,\n    message: '',\n    cardNumber: '',\n    cardHolderName: '',\n    expiryMonth: '',\n    expiryYear: '',\n  };\n\n  async componentWillLoad() {\n    this.assignCountryCode();\n    this.initializeExpiryYears();\n    this.initializeDateData();\n    this.populateBookedByData();\n  }\n\n  private initializeExpiryYears() {\n    const currentYear = new Date().getFullYear();\n    this.expiryYears = Array.from({ length: 12 }, (_, index) => (currentYear + index).toString());\n  }\n  private async assignCountryCode() {\n    const country = await this.bookingService.getUserDefaultCountry();\n\n    const countryId = country['COUNTRY_ID'];\n    this.country = countryId;\n    this.bookedByData = { ...this.bookedByData, isdCode: countryId.toString(), countryId };\n  }\n  private initializeDateData() {\n    const dt = new Date();\n    const month = dt.getMonth() + 1;\n    this.currentMonth = month < 10 ? `0${month}` : month.toString();\n  }\n\n  private populateBookedByData() {\n    this.bookedByData = this.defaultData ? { ...this.bookedByData, ...this.defaultData } : {};\n    this.arrivalTimeList = this.defaultData?.arrivalTime || [];\n    this.bookedByData = { ...this.bookedByData, selectedArrivalTime: this.arrivalTimeList[0].CODE_NAME };\n    if (!this.bookedByData.expiryMonth) {\n      this.bookedByData.expiryMonth = this.currentMonth;\n    }\n    if (!this.bookedByData.expiryYear) {\n      this.bookedByData.expiryYear = new Date().getFullYear();\n    }\n    console.log('initial bookedby data', this.bookedByData);\n  }\n\n  private handleDataChange(key, event) {\n    this.bookedByData[key] = key === 'emailGuest' ? event.target.checked : event.target.value;\n    this.dataUpdateEvent.emit({\n      key: 'bookedByInfoUpdated',\n      data: { ...this.bookedByData },\n    });\n    if (key === 'countryId') {\n      this.bookedByData = {\n        ...this.bookedByData,\n        isdCode: event.target.value,\n      };\n    }\n    // console.log(this.bookedByData);\n  }\n  private handleCountryChange(value) {\n    this.bookedByData = {\n      ...this.bookedByData,\n      isdCode: value,\n      countryId: value,\n    };\n    this.dataUpdateEvent.emit({\n      key: 'bookedByInfoUpdated',\n      data: { ...this.bookedByData },\n    });\n    // console.log(this.bookedByData);\n  }\n\n  private handleNumberInput(key, event: InputEvent) {\n    const inputElement = event.target as HTMLInputElement;\n    const inputValue = inputElement.value;\n\n    // Regular expression to match only numeric characters (0-9)\n    const numericRegex = /^[0-9]+$/;\n\n    if (!numericRegex.test(inputValue)) {\n      // If the input is not numeric, prevent it from being entered\n      inputElement.value = inputValue.replace(/[^0-9]/g, '');\n    }\n    if (inputValue === inputElement.value) {\n      this.handleDataChange(key, event);\n    }\n  }\n\n  // async handleEmailInput(key, event: InputEvent) {\n  //   const inputElement = event.target as HTMLInputElement;\n  //   const inputValue = inputElement.value;\n  //   if (z.string().email().safeParse(inputValue).success) {\n  //     this.handleDataChange(key, event);\n  //   }\n  // }\n  async checkUser() {\n    try {\n      const email = this.bookedByData.email;\n      if (z.string().email().safeParse(email).success) {\n        const res = await this.bookingService.getUserInfo(email);\n        if (res !== null) {\n          this.bookedByData = {\n            ...this.bookedByData,\n            id: res.id,\n            firstName: res.first_name,\n            lastName: res.last_name,\n            contactNumber: res.mobile_without_prefix,\n            countryId: res.country_id,\n            isdCode: res?.country_phone_prefix ?? res.isdCode.toString(),\n          };\n          console.log(this.bookedByData);\n        } else {\n          let prevBookedByData = { ...this.bookedByData };\n          prevBookedByData = { ...prevBookedByData, email };\n          this.bookedByData = { ...prevBookedByData };\n        }\n      } else {\n        let prevBookedByData = { ...this.bookedByData };\n        prevBookedByData = { ...prevBookedByData, email: '' };\n        this.bookedByData = { ...prevBookedByData };\n      }\n      this.dataUpdateEvent.emit({\n        key: 'bookedByInfoUpdated',\n        data: { ...this.bookedByData },\n      });\n    } catch (error) {\n      //   toastr.error(error);\n    }\n  }\n  private updateGuest(props: Partial<BookingStore['checkout_guest']>) {\n    modifyBookingStore('checkout_guest', { ...(booking_store.checkout_guest ?? {}), ...props });\n  }\n  handleComboboxChange(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    const { key, data } = e.detail;\n    console.log(key, data);\n    if (key === 'blur') {\n      if (z.string().email().safeParse(data).success) {\n        this.bookedByData.email = data;\n        this.checkUser();\n      } else if (this.bookedByData.email !== '' && data == '') {\n        this.bookedByData.email = '';\n      }\n      this.dataUpdateEvent.emit({\n        key: 'bookedByInfoUpdated',\n        data: this.bookedByData,\n      });\n    }\n    if (key === 'select') {\n      this.bookedByData.email = data.email;\n      this.bookedByData = {\n        ...this.bookedByData,\n        id: data.id,\n        firstName: data.first_name,\n        lastName: data.last_name,\n        contactNumber: data.mobile_without_prefix,\n        countryId: data.country_id,\n        isdCode: data['country_phone_prefix'] ?? data?.country_id,\n      };\n      this.dataUpdateEvent.emit({\n        key: 'bookedByInfoUpdated',\n        data: this.bookedByData,\n      });\n    }\n\n    // console.log('data', data, 'key', key);\n    // switch (key) {\n    //   case 'blur':\n    //     if (data !== '') {\n    //       this.bookedByData.email = data;\n    //       this.checkUser();\n    //     } else {\n    //       let prevBookedByData = { ...this.bookedByData };\n    //       prevBookedByData = { ...prevBookedByData, email: '' };\n    //       this.bookedByData = { ...prevBookedByData };\n    //       this.dataUpdateEvent.emit({\n    //         key: 'bookedByInfoUpdated',\n    //         data: { ...this.bookedByData },\n    //       });\n    //     }\n\n    //     break;\n    //   case 'select':\n    //     this.bookedByData.email = data.email;\n    //     this.bookedByData = {\n    //       ...this.bookedByData,\n    //       id: data.id,\n    //       firstName: data.first_name,\n    //       lastName: data.last_name,\n    //       contactNumber: data.mobile,\n    //       countryId: data.country_id,\n    //       isdCode: data.country_id.toString(),\n    //     };\n    //     this.dataUpdateEvent.emit({\n    //       key: 'bookedByInfoUpdated',\n    //       data: this.bookedByData,\n    //     });\n    //     break;\n    //   default:\n    //     break;\n    // }\n  }\n  clearEvent() {\n    this.bookedByData = {\n      ...this.bookedByData,\n      id: '',\n      firstName: '',\n      lastName: '',\n      contactNumber: '',\n      isdCode: this.country.toString(),\n      countryId: this.country,\n    };\n    this.dataUpdateEvent.emit({\n      key: 'bookedByInfoUpdated',\n      data: { ...this.bookedByData },\n    });\n  }\n  @Listen('buttonClicked', { target: 'body' })\n  handleButtonClicked(\n    event: CustomEvent<{\n      key: TPropertyButtonsTypes;\n      data?: CustomEvent;\n    }>,\n  ) {\n    switch (event.detail.key) {\n      case 'book':\n      case 'bookAndCheckIn':\n        this.isButtonPressed = true;\n        break;\n    }\n  }\n  render() {\n    return (\n      <Host>\n        <div class=\"text-left mt-3\">\n          <div class=\"form-group d-flex flex-column flex-md-row align-items-md-center text-left \">\n            <label class=\"p-0 m-0 label-control mr-1 font-weight-bold\">{locales.entries.Lcz_BookedBy}</label>\n            <div class=\"bookedByEmailContainer mt-1 mt-md-0 d-flex align-items-center\">\n              {/* <input\n                id={v4()}\n                type=\"email\"\n                class=\"form-control\"\n                placeholder=\"Email address\"\n                name=\"bookeyByEmail\"\n                value={this.bookedByData.email}\n                onInput={event => this.handleEmailInput('email', event)}\n                required\n                onBlur={() => this.checkUser()}\n              /> */}\n              <ir-autocomplete\n                testId={'main_guest_email'}\n                onComboboxValue={this.handleComboboxChange.bind(this)}\n                propertyId={this.propertyId}\n                type=\"text\"\n                value={this.bookedByData.email}\n                required\n                class={'flex-fill'}\n                placeholder={locales.entries.Lcz_FindEmailAddress}\n                onInputCleared={() => this.clearEvent()}\n                danger_border={this.isButtonPressed && this.bookedByData.email !== '' && validateEmail(this.bookedByData.email)}\n              ></ir-autocomplete>\n              <ir-tooltip class={'ml-1'} message=\"Leave empty if email is unavailable\"></ir-tooltip>\n            </div>\n          </div>\n        </div>\n        <div class=\"bookedDetailsForm text-left mt-2 font-small-3 \">\n          <div class=\"d-flex flex-column flex-md-row  justify-content-md-between \">\n            <div class=\"p-0 flex-fill \">\n              <div class=\"form-group d-flex flex-column flex-md-row align-items-md-center p-0 flex-fill \">\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_FirstName}</label>\n                <div class=\"p-0 m-0  controlContainer flex-fill  \">\n                  <input\n                    data-testid=\"main_guest_first_name\"\n                    class={`form-control flex-fill ${this.isButtonPressed && this.bookedByData.firstName === '' && 'border-danger'}`}\n                    type=\"text\"\n                    placeholder={locales.entries.Lcz_FirstName}\n                    id={v4()}\n                    value={this.bookedByData.firstName}\n                    onInput={event => {\n                      this.updateGuest({ first_name: (event.target as HTMLInputElement).value });\n                      this.handleDataChange('firstName', event);\n                    }}\n                    required\n                  />\n                </div>\n              </div>\n\n              <div class=\"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center\">\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_LastName}</label>\n                <div class=\"p-0 m-0  controlContainer flex-fill\">\n                  <input\n                    data-testid=\"main_guest_last_name\"\n                    class={`form-control ${this.isButtonPressed && this.bookedByData.lastName === '' && 'border-danger'}`}\n                    type=\"text\"\n                    placeholder={locales.entries.Lcz_LastName}\n                    id={v4()}\n                    value={this.bookedByData.lastName}\n                    onInput={event => this.handleDataChange('lastName', event)}\n                  />\n                </div>\n              </div>\n\n              <div class=\"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center\">\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_Country}</label>\n                {/* <div class=\"p-0 m-0  controlContainer flex-fill\"> */}\n                <ir-country-picker\n                  testId=\"main_guest_country\"\n                  class=\"flex-grow-1 m-0\"\n                  onCountryChange={e => this.handleCountryChange(e.detail.id)}\n                  countries={this.countries}\n                  country={this.countries.find(c => c.id === this.bookedByData.countryId)}\n                ></ir-country-picker>\n                {/* <select class={`form-control input-sm pr-0`} id={v4()} onChange={event => this.handleDataChange('countryId', event)}>\n                    <option value=\"\" selected={this.bookedByData.countryId === ''}>\n                      {locales.entries.Lcz_Select}\n                    </option>\n                    {this.countries.map(countryNode => (\n                      <option value={countryNode.id} selected={this.bookedByData.countryId === countryNode.id}>\n                        {countryNode.name}\n                      </option>\n                    ))}\n                  </select> */}\n                {/* </div> */}\n              </div>\n\n              {/* <div class=\"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center\">\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_MobilePhone}</label>\n                <div class=\"p-0 m-0  d-flex  controlContainer flex-fill\">\n                  <div class=\" p-0 m-0\">\n                    <select class={`form-control input-sm pr-0`} id={v4()} onChange={event => this.handleDataChange('isdCode', event)}>\n                      <option value=\"\" selected={this.bookedByData.isdCode === ''}>\n                        {locales.entries.Lcz_Isd}\n                      </option>\n                      {this.countries.map(country => (\n                        <option value={country.id} selected={this.bookedByData.isdCode === country.id.toString()}>\n                          {country.phone_prefix}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                  <div class=\"flex-fill p-0 m-0\">\n                    <input\n                      class={`form-control\n                     \n                      `}\n                      type=\"tel\"\n                      placeholder={locales.entries.Lcz_ContactNumber}\n                      id={v4()}\n                      value={this.bookedByData.contactNumber}\n                      onInput={event => this.handleNumberInput('contactNumber', event)}\n                    />\n                  </div>\n                </div>\n              </div> */}\n              <div class=\"form-group p-0 d-flex flex-column flex-md-row align-items-md-center\">\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_MobilePhone}</label>\n                <div class=\"p-0 m-0 controlContainer flex-fill\">\n                  <ir-phone-input\n                    testId=\"main_guest_phone\"\n                    language={this.language}\n                    // label={locales.entries.Lcz_MobilePhone}\n                    value={this.bookedByData.contactNumber}\n                    phone_prefix={this.bookedByData.isdCode}\n                    default_country={this.bookedByData.countryId}\n                    onTextChange={e => {\n                      this.handleDataChange('isdCode', { target: { value: e.detail.phone_prefix } });\n                      this.handleDataChange('contactNumber', { target: { value: e.detail.mobile } });\n                    }}\n                  ></ir-phone-input>\n                </div>\n              </div>\n              <div class=\"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center\">\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_YourArrivalTime}</label>\n                <div class=\"p-0 m-0  controlContainer flex-fill\">\n                  <select\n                    data-testid=\"arrival_time\"\n                    class={`form-control input-sm pr-0 ${this.isButtonPressed && this.bookedByData.selectedArrivalTime.code === '' && 'border-danger'}`}\n                    id={v4()}\n                    onChange={event => this.handleDataChange('selectedArrivalTime', event)}\n                  >\n                    {/* <option value=\"\" selected={this.bookedByData.selectedArrivalTime.code === ''}>\n                      -\n                    </option> */}\n                    {this.arrivalTimeList.map(time => (\n                      <option value={time.CODE_NAME} selected={this.bookedByData.selectedArrivalTime.code === time.CODE_NAME}>\n                        {time.CODE_VALUE_EN}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n              </div>\n            </div>\n            <div class=\"p-0 flex-fill  ml-md-3\">\n              <div class=\"  p-0 d-flex flex-column flex-md-row align-items-md-center \">\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_AnyMessageForUs}</label>\n                <div class=\"p-0 m-0  controlContainer flex-fill \">\n                  <textarea\n                    data-testid=\"note\"\n                    id={v4()}\n                    rows={4}\n                    class=\"form-control \"\n                    name=\"message\"\n                    value={this.bookedByData.message}\n                    onInput={event => this.handleDataChange('message', event)}\n                  ></textarea>\n                </div>\n              </div>\n              {this.showPaymentDetails && (\n                <Fragment>\n                  <div class=\"form-group mt-md-1  p-0 d-flex flex-column flex-md-row align-items-md-center\">\n                    <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_CardNumber}</label>\n                    <div class=\"p-0 m-0  controlContainer flex-fill\">\n                      <input\n                        class=\"form-control\"\n                        type=\"text\"\n                        placeholder=\"\"\n                        pattern=\"0-9 \"\n                        id={v4()}\n                        value={this.bookedByData.cardNumber}\n                        onInput={event => this.handleNumberInput('cardNumber', event)}\n                      />\n                    </div>\n                  </div>\n                  <div class=\"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center\">\n                    <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_CardHolderName}</label>\n                    <div class=\"p-0 m-0  controlContainer flex-fill\">\n                      <input\n                        class=\"form-control\"\n                        type=\"text\"\n                        placeholder=\"\"\n                        pattern=\"0-9 \"\n                        id={v4()}\n                        value={this.bookedByData.cardHolderName}\n                        onInput={event => this.handleDataChange('cardHolderName', event)}\n                      />\n                    </div>\n                  </div>\n                  <div class=\"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center\">\n                    <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_ExpiryDate}</label>\n                    <div class=\"p-0 m-0 row  controlContainer flex-fill\">\n                      <div class=\"p-0 m-0\">\n                        <select class=\"form-control input-sm pr-0\" id={v4()} onChange={event => this.handleDataChange('expiryMonth', event)}>\n                          {this.expiryMonths.map(month => (\n                            <option value={month} selected={month === this.bookedByData.expiryMonth}>\n                              {month}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n                      <div class=\"p-0 m-0 ml-1\">\n                        <select class=\"form-control input-sm pr-0\" id={v4()} onChange={event => this.handleDataChange('expiryYear', event)}>\n                          {this.expiryYears.map((year, index) => (\n                            <option value={year} selected={index === this.bookedByData.expiryYear}>\n                              {year}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n                    </div>\n                  </div>\n                </Fragment>\n              )}\n              <div class=\"form-group mt-1 p-0 d-flex flex-row align-items-center\">\n                <label class=\"p-0 m-0\" htmlFor={'emailTheGuestId'}>\n                  {locales.entries.Lcz_EmailTheGuest}\n                </label>\n                <div class=\"p-0 m-0  controlContainer flex-fill checkBoxContainer\">\n                  <input\n                    class=\"form-control\"\n                    type=\"checkbox\"\n                    checked={this.bookedByData.emailGuest}\n                    id={'emailTheGuestId'}\n                    onChange={event => this.handleDataChange('emailGuest', event)}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n.margin-bottom-8 {\n  margin-bottom: 8px !important;\n}\n","import { RoomType } from '@/models/property';\nimport { getVisibleInventory } from '@/stores/booking.store';\nimport { Component, Host, h, Prop, Event, EventEmitter, State } from '@stencil/core';\n\n@Component({\n  tag: 'igl-room-type',\n  styleUrl: 'igl-room-type.css',\n  scoped: true,\n})\nexport class IglRoomType {\n  @Prop() roomType: RoomType;\n  @Prop() bookingType = 'PLUS_BOOKING';\n  @Prop() dateDifference: number;\n  @Prop() ratePricingMode = [];\n  @Prop() roomInfoId: number | null = null;\n  @Prop() currency;\n  @Prop() initialRoomIds: any;\n  @Prop() isBookDisabled: boolean;\n\n  @State() selectedRooms: number[] = [];\n  @State() totalRooms: number;\n  @State() roomsDistributions: number[] = [];\n\n  @Event() dataUpdateEvent: EventEmitter<{ [key: string]: any }>;\n\n  private validBookingTypes = ['PLUS_BOOKING', 'ADD_ROOM', 'EDIT_BOOKING', 'SPLIT_BOOKING'];\n\n  render() {\n    const isValidBookingType = this.validBookingTypes.includes(this.bookingType);\n\n    return (\n      <Host>\n        {isValidBookingType && this.roomType.rateplans?.length > 0 && <div class=\"font-weight-bold font-medium-1 margin-bottom-8 \">{this.roomType.name}</div>}\n        {this.roomType.rateplans?.map(ratePlan => {\n          if (!!ratePlan.variations) {\n            let shouldBeDisabled = this.roomInfoId && this.roomInfoId === this.roomType.id;\n            // let roomId = -1;\n            // if (shouldBeDisabled && this.initialRoomIds) {\n            //   roomId = this.initialRoomIds.roomId;\n            // }\n            const visibleInventory = getVisibleInventory(this.roomType.id, ratePlan.id);\n            return (\n              <igl-rate-plan\n                // is_bed_configuration_enabled={this.roomType.is_bed_configuration_enabled}\n                // index={index}\n                isBookDisabled={this.isBookDisabled}\n                visibleInventory={visibleInventory}\n                key={`rate-plan-${ratePlan.id}`}\n                ratePricingMode={this.ratePricingMode}\n                class={isValidBookingType ? '' : ''}\n                currency={this.currency}\n                // dateDifference={this.dateDifference}\n                ratePlan={ratePlan}\n                roomTypeId={this.roomType.id}\n                // totalAvailableRooms={this.roomsDistributions[index]}\n                bookingType={this.bookingType}\n                shouldBeDisabled={shouldBeDisabled}\n                // physicalrooms={this.roomType.physicalrooms}\n                // defaultRoomId={roomId}\n              ></igl-rate-plan>\n            );\n          }\n          return null;\n        })}\n      </Host>\n    );\n  }\n}\n","// HelpDocButton.tsx\nimport { FunctionalComponent, h } from '@stencil/core';\n\ntype HelpDocButtonProps = {\n  /** Tooltip message */\n  message?: string;\n  /** Link to open in a new tab */\n  href?: string;\n  /** Optional wrapper class for layout tweaks */\n  class?: string;\n};\n\nexport const HelpDocButton: FunctionalComponent<HelpDocButtonProps> = ({ message, href, class: wrapperClass }) => (\n  <div class={wrapperClass}>\n    <style>\n      {`.documentation-btn{\n          display:flex;\n          align-items:center;\n          justify-content:center;\n          height:1rem;\n          width:1rem;\n          border:1px solid #6b6f82;\n          color:#6b6f82;\n          padding:0.1rem;\n          border-radius:0.5rem;\n          background:transparent;\n        }\n        .documentation-btn:hover{\n          border-color:#104064;\n          background:transparent;\n          color:#104064 !important;\n        }`}\n    </style>\n\n    <ir-tooltip customSlot message={message}>\n      <a slot=\"tooltip-trigger\" class=\"documentation-btn\" target=\"_blank\" rel=\"noopener\" href={href} aria-label={message}>\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 640 640\">\n          <path\n            fill=\"currentColor\"\n            d=\"M224 224C224 171 267 128 320 128C373 128 416 171 416 224C416 266.7 388.1 302.9 349.5 315.4C321.1 324.6 288 350.7 288 392L288 416C288 433.7 302.3 448 320 448C337.7 448 352 433.7 352 416L352 392C352 390.3 352.6 387.9 355.5 384.7C358.5 381.4 363.4 378.2 369.2 376.3C433.5 355.6 480 295.3 480 224C480 135.6 408.4 64 320 64C231.6 64 160 135.6 160 224C160 241.7 174.3 256 192 256C209.7 256 224 241.7 224 224zM320 576C342.1 576 360 558.1 360 536C360 513.9 342.1 496 320 496C297.9 496 280 513.9 280 536C280 558.1 297.9 576 320 576z\"\n          />\n        </svg>\n      </a>\n    </ir-tooltip>\n  </div>\n);\n",":host {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n.applicable-policies__container {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  flex-wrap: wrap;\n  margin-bottom: 1rem;\n}\n\n.applicable-policies__title {\n  font-size: 1rem;\n  font-weight: 700;\n  padding: 0;\n  margin: 0;\n}\n\n.applicable-policies__no-penalty {\n  padding: 0;\n  margin: 0;\n  font-size: 0.875rem;\n}\n\n.applicable-policies__statements {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  background: rgb(30, 159, 242, 5%);\n  padding: 0.5rem 1rem;\n  border: 1px solid rgba(30, 159, 242, 40%);\n  border-radius: 0.25rem;\n  max-height: 200px;\n  overflow-y: auto;\n}\n.applicable-policies__highlighted-bracket {\n  color: rgba(30, 159, 242, 100%);\n}\n.applicable-policies__statement {\n  display: flex;\n  flex-direction: column;\n  /* gap: 0.5rem; */\n  border-bottom: 1px solid #e5e7eb;\n  padding-bottom: 0.5rem;\n}\n.applicable-policies__statement:last-child {\n  border-bottom: 0;\n  padding-bottom: 0;\n}\n\n.applicable-policies__room {\n  padding: 0;\n  margin: 0;\n  padding-bottom: 0.5rem;\n}\n\n.applicable-policies__bracket {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 0.25rem;\n  font-size: 0.875rem;\n  padding-bottom: 0.5rem;\n}\n\n.applicable-policies__bracket-dates {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0;\n  margin: 0;\n}\n\n/* .applicable-policies__icon {\n} */\n\n.applicable-policies__amount {\n  text-align: right;\n  padding: 0;\n  margin: 0;\n  font-weight: 600;\n}\n\n.applicable-policies__statement-text {\n  padding: 0;\n  margin: 0;\n}\n.applicable-policies__brackets-table {\n  display: none;\n}\n\n/* Container */\n.applicable-policies__guarantee {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.5rem 1rem;\n  border: 1px solid rgba(255, 73, 97, 40%);\n  border-radius: 6px;\n  background-color: rgba(255, 73, 97, 10%);\n  margin-bottom: 0.5rem;\n  font-size: 0.875rem;\n}\n\n/* Left info section */\n.applicable-policies__guarantee-info {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n/* Text styles */\n.applicable-policies__guarantee-date {\n  color: var(--text-muted, #666);\n  padding: 0;\n  margin: 0;\n}\n\n.applicable-policies__guarantee-amount {\n  font-weight: 600;\n  color: var(--text-strong, #222);\n  padding: 0;\n  margin: 0;\n}\n\n.applicable-policies__guarantee-label {\n  color: red;\n  font-weight: 700;\n  padding: 0;\n  margin: 0;\n}\n\n/* Action (button container) */\n.applicable-policies__guarantee-action {\n  width: fit-content;\n}\n\n/*sm*/\n@media (min-width: 640px) {\n}\n\n/*md*/\n@media (min-width: 768px) {\n  .applicable-policies__brackets {\n    display: none;\n  }\n  .applicable-policies__brackets-table {\n    display: block;\n    width: 100%;\n    font-size: 0.875rem;\n  }\n  .applicable-policies__brackets-table table {\n    width: 100%;\n  }\n  .applicable-policies__amount,\n  .applicable-policies__bracket-dates {\n    white-space: nowrap;\n  }\n  .applicable-policies__statement-text {\n    width: 100%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n}\n\n/*lg*/\n@media (min-width: 1024px) {\n}\n\n/*xl*/\n@media (min-width: 1280px) {\n}\n\n/*2xl*/\n@media (min-width: 1536px) {\n}\n","import { Booking, Bracket, ExposedApplicablePolicy } from '@/models/booking.dto';\nimport { Component, Event, EventEmitter, Host, Prop, State, Watch, h } from '@stencil/core';\nimport { CancellationStatement } from '../../types';\nimport moment, { Moment } from 'moment';\nimport { formatAmount } from '@/utils/utils';\nimport calendar_data from '@/stores/calendar-data';\nimport { IPaymentAction } from '@/services/payment.service';\nimport locales from '@/stores/locales.store';\nimport { HelpDocButton } from '@/components/HelpButton';\n\n@Component({\n  tag: 'ir-applicable-policies',\n  styleUrl: 'ir-applicable-policies.css',\n  scoped: true,\n})\nexport class IrApplicablePolicies {\n  @Prop() booking: Booking;\n  @Prop() propertyId: number;\n  @Prop() language: string = 'en';\n\n  @State() cancellationStatements: CancellationStatement[] = [];\n  @State() isLoading: boolean = false;\n  @State() guaranteeAmount: number;\n\n  @Event() generatePayment: EventEmitter<IPaymentAction>;\n  private shouldShowCancellationBrackets: boolean = false;\n\n  componentWillLoad() {\n    this.loadApplicablePolicies();\n  }\n\n  @Watch('booking')\n  handleBookingChange() {\n    this.loadApplicablePolicies();\n  }\n  private async loadApplicablePolicies() {\n    this.isLoading = true;\n    try {\n      const getPoliciesByType = (policies: ExposedApplicablePolicy[], type: ExposedApplicablePolicy['type']) => {\n        return policies.find(p => p.type === type);\n      };\n      const statements: CancellationStatement[] = [];\n      let total = 0;\n      this.booking.rooms.forEach(room => {\n        const cancellationPolicy = getPoliciesByType(room.applicable_policies, 'cancelation');\n        const guaranteePolicy = getPoliciesByType(room.applicable_policies, 'guarantee');\n        if (cancellationPolicy) {\n          let brackets = [\n            ...cancellationPolicy.brackets\n              .map((bracket, index) => {\n                if (bracket.amount > 0) {\n                  return bracket;\n                }\n                if (index < cancellationPolicy?.brackets.length - 1 && cancellationPolicy.brackets[index + 1]?.amount > 0) {\n                  return bracket;\n                }\n              })\n              .filter(Boolean),\n          ];\n          // if (moment(room.from_date, 'YYYY-MM-DD').add(1, 'days').isSameOrBefore(moment())) {\n          //   brackets.push({\n          //     amount: room['gross_total'],\n          //     amount_formatted: '',\n          //     code: '',\n          //     currency_id: 0,\n          //     due_on: moment().add(1, 'days').format('YYYY-MM-DD'),\n          //     due_on_formatted: '',\n          //     gross_amount: room['gross_total'],\n          //     gross_amount_formatted: '',\n          //     statement: '100% of the total price',\n          //   });\n          // }\n          statements.push({\n            ...cancellationPolicy,\n            roomType: room.roomtype,\n            ratePlan: room.rateplan,\n            brackets,\n            checkInDate: room.from_date,\n            grossTotal: room.gross_total,\n          });\n        }\n        if (guaranteePolicy) {\n          total += this.getCurrentBracket(guaranteePolicy.brackets)?.gross_amount ?? 0;\n        }\n      });\n\n      this.guaranteeAmount = total;\n      this.cancellationStatements = [...statements];\n    } catch (error) {\n      console.error(error);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n  private formatPreviousBracketDueOn(d1: Moment, d2: Moment) {\n    if (d1.isSame(d2, 'year')) {\n      return d1.format('MMM DD');\n    }\n\n    return d1.format('MMM DD, YYYY');\n  }\n\n  private getBracketLabelsAndArrowState({ bracket, index, brackets, checkInDate }: { index: number; bracket: Bracket; brackets: Bracket[]; checkInDate: string }): {\n    leftLabel: string | null;\n    showArrow: boolean;\n    rightLabel: string | null;\n  } {\n    // Validate inputs\n    if (!bracket || !brackets || index < 0 || index >= brackets.length) {\n      return { leftLabel: null, rightLabel: null, showArrow: false };\n    }\n\n    // Parse dates with validation\n    const bookedOnDate = moment(this.booking.booked_on.date, 'YYYY-MM-DD');\n    const bracketDueDate = moment(bracket.due_on, 'YYYY-MM-DD');\n\n    if (!bookedOnDate.isValid() || !bracketDueDate.isValid()) {\n      console.warn('Invalid date encountered in getBracketLabelsAndArrowState');\n      return { leftLabel: null, rightLabel: null, showArrow: false };\n    }\n\n    // Single bracket case\n    if (brackets.length === 1) {\n      return this.handleSingleBracket(bracketDueDate, checkInDate);\n    }\n\n    // Multiple brackets case\n    return this.handleMultipleBrackets(bracket, index, brackets, checkInDate);\n  }\n\n  private handleSingleBracket(\n    bracketDueDate: moment.Moment,\n    checkInDate: string,\n  ): {\n    leftLabel: string | null;\n    showArrow: boolean;\n    rightLabel: string | null;\n  } {\n    return {\n      leftLabel: bracketDueDate.format('MMM DD'),\n      showArrow: true,\n      rightLabel: moment(checkInDate, 'YYYY-MM-DD').format('MMM DD, YYYY'),\n    };\n  }\n\n  private handleMultipleBrackets(\n    bracket: Bracket,\n    index: number,\n    brackets: Bracket[],\n    checkInDate: string,\n  ): {\n    leftLabel: string | null;\n    showArrow: boolean;\n    rightLabel: string | null;\n  } {\n    const bracketDueDate = moment(bracket.due_on, 'YYYY-MM-DD');\n\n    // First bracket\n    if (index === 0) {\n      const nextBracket = brackets[index + 1];\n      if (!nextBracket) {\n        return { leftLabel: null, rightLabel: null, showArrow: false };\n      }\n\n      let nextBracketDueDate = moment(nextBracket.due_on, 'YYYY-MM-DD');\n      if (!nextBracketDueDate.isValid()) {\n        return { leftLabel: null, rightLabel: null, showArrow: false };\n      }\n      if (bracket.amount === 0) {\n        nextBracketDueDate = nextBracketDueDate.clone().add(-1, 'days');\n      }\n\n      return {\n        leftLabel: 'Until',\n        showArrow: false,\n        rightLabel: nextBracketDueDate.format('MMM DD, YYYY'),\n      };\n    }\n\n    // Last bracket\n    if (index === brackets.length - 1) {\n      return {\n        leftLabel: bracketDueDate.clone().format('MMM DD'),\n        showArrow: true,\n        rightLabel: moment(checkInDate).format('MMM DD, YYYY'),\n      };\n    }\n\n    // Middle brackets\n    const nextBracket = brackets[index + 1];\n    if (!nextBracket) {\n      return { leftLabel: null, rightLabel: null, showArrow: false };\n    }\n\n    const nextBracketDueDate = moment(nextBracket.due_on, 'YYYY-MM-DD');\n    if (!nextBracketDueDate.isValid()) {\n      return { leftLabel: null, rightLabel: null, showArrow: false };\n    }\n\n    // Calculate the end of current bracket period (day before next bracket starts)\n    const periodEndDate = nextBracketDueDate.clone();\n\n    return {\n      leftLabel: this.formatPreviousBracketDueOn(bracketDueDate, periodEndDate),\n      showArrow: true,\n      rightLabel: periodEndDate.format('MMM DD, YYYY'),\n    };\n  }\n  private getCurrentBracket(brackets: Bracket[]) {\n    const today = moment();\n    for (const bracket of brackets) {\n      if (today.isSameOrAfter(moment(bracket.due_on, 'YYYY-MM-DD'), 'days')) {\n        return bracket;\n      }\n    }\n    return null;\n  }\n\n  private generateCancellationStatement() {\n    const label = 'if cancelled today';\n    const { cancelation_penality_as_if_today } = this.booking.financial;\n    if (cancelation_penality_as_if_today === 0) {\n      if (this.booking.financial.collected > 0) {\n        return `No refund ${label}`;\n      }\n      return `No payment required ${label}`;\n    }\n    return `${cancelation_penality_as_if_today < 0 ? 'Refund' : 'Charge'} ${formatAmount(calendar_data.currency.symbol, Math.abs(cancelation_penality_as_if_today))} ${label}`;\n  }\n\n  private _getCurrentBracket(brackets: Bracket[]): moment.Moment | null {\n    if (!Array.isArray(brackets) || brackets.length === 0) return null;\n\n    const today = moment().startOf('day');\n\n    // Parse + validate + sort ascending by due_on\n    const parsed = brackets\n      .map(b => ({ b, date: moment(b.due_on, 'YYYY-MM-DD', true).startOf('day') }))\n      .filter(x => x.date.isValid())\n      .sort((a, b) => a.date.valueOf() - b.date.valueOf());\n\n    if (parsed.length === 0) return null;\n\n    // If today is before the first due date → return first bracket (closest upcoming)\n    if (today.isBefore(parsed[0].date, 'day')) {\n      return parsed[0].date;\n    }\n\n    // Find i such that date[i] <= today < date[i+1] → return date[i]\n    for (let i = 0; i < parsed.length - 1; i++) {\n      const cur = parsed[i].date;\n      const next = parsed[i + 1].date;\n      if (today.isSameOrAfter(cur, 'day') && today.isBefore(next, 'day')) {\n        return cur;\n      }\n    }\n\n    // If today is on/after the last due date → return last bracket\n    return parsed[parsed.length - 1].date;\n  }\n\n  render() {\n    if (this.isLoading) {\n      return null;\n    }\n    const remainingGuaranteeAmount = this.booking.financial.collected - this.guaranteeAmount;\n    return (\n      <Host>\n        {this.guaranteeAmount !== 0 && (\n          <section>\n            <div class=\"applicable-policies__guarantee\">\n              <div class=\"applicable-policies__guarantee-info\">\n                <p class=\"applicable-policies__guarantee-date\">{moment(this.booking.booked_on.date, 'YYYY-MM-DD').format('MMM DD, YYYY')}</p>\n                <p class=\"applicable-policies__guarantee-amount\">\n                  <span class=\"px-1\">{formatAmount(calendar_data.currency.symbol, remainingGuaranteeAmount < 0 ? Math.abs(remainingGuaranteeAmount) : this.guaranteeAmount)}</span>\n                </p>\n                <p class=\"applicable-policies__guarantee-label\">Guarantee {remainingGuaranteeAmount < 0 ? 'balance' : ''}</p>\n              </div>\n              {remainingGuaranteeAmount < 0 && (\n                <div class=\"applicable-policies__guarantee-action\">\n                  <ir-button\n                    btn_color=\"dark\"\n                    text=\"Pay\"\n                    size=\"sm\"\n                    onClickHandler={() => {\n                      this.generatePayment.emit({\n                        amount: Math.abs(remainingGuaranteeAmount),\n\n                        currency: calendar_data.currency,\n                        due_on: moment().format('YYYY-MM-DD'),\n                        pay_type_code: null,\n                        reason: '',\n                        type: 'OVERDUE',\n                      });\n                    }}\n                  ></ir-button>\n                </div>\n              )}\n            </div>\n          </section>\n        )}\n        <section>\n          <div class=\"applicable-policies__container\">\n            <div class=\"d-flex align-items-center\" style={{ gap: '0.5rem' }}>\n              <p class=\"applicable-policies__title font-size-large p-0 m-0\">Cancellation Schedule</p>\n              <HelpDocButton message=\"Help\" href=\"https://help.igloorooms.com/extranet/booking-details/guarantee-and-cancellation\" />\n            </div>\n            <p class=\"applicable-policies__no-penalty\">{this.generateCancellationStatement()}</p>\n          </div>\n\n          {this.cancellationStatements?.length > 0 && this.shouldShowCancellationBrackets && (\n            <div class=\"applicable-policies__statements\">\n              {this.cancellationStatements?.map(statement => {\n                const currentBracket = this._getCurrentBracket(statement.brackets);\n                const isTodaySameOrAfterCheckInDate = moment().isSameOrAfter(moment(statement.checkInDate, 'YYYY-MM-DD').add(1, 'days'));\n                return (\n                  <div class=\"applicable-policies__statement\">\n                    {this.cancellationStatements.length > 1 && (\n                      <p class=\"applicable-policies__room\">\n                        <b>{statement.roomType.name}</b> {statement.ratePlan['short_name']} {statement.ratePlan.is_non_refundable ? ` - ${locales.entries.Lcz_NonRefundable}` : ''}\n                      </p>\n                    )}\n                    <div class=\"applicable-policies__brackets\">\n                      {statement.brackets.map((bracket, idx) => {\n                        const { leftLabel, rightLabel, showArrow } = this.getBracketLabelsAndArrowState({\n                          index: idx,\n                          bracket,\n                          brackets: statement.brackets,\n                          checkInDate: statement.checkInDate,\n                        });\n                        const isInCurrentBracket = moment(bracket.due_on, 'YYYY-MM-DD').isSame(currentBracket, 'date');\n\n                        return (\n                          <div class={{ 'applicable-policies__bracket': true, 'applicable-policies__highlighted-bracket': isInCurrentBracket }}>\n                            <p class=\"applicable-policies__bracket-dates\">\n                              {leftLabel} {showArrow && <ir-icons name=\"arrow_right\" class=\"applicable-policies__icon\" style={{ '--icon-size': '0.875rem' }}></ir-icons>}{' '}\n                              {rightLabel}\n                            </p>\n                            <p class=\"applicable-policies__amount\">{formatAmount(calendar_data.currency.symbol, bracket.gross_amount)}</p>\n\n                            <p class=\"applicable-policies__statement-text\">{bracket.amount === 0 ? 'No penalty' : bracket.statement}</p>\n                          </div>\n                        );\n                      })}\n                    </div>\n                    <div class=\"applicable-policies__brackets-table\">\n                      <table>\n                        <tbody>\n                          {statement.brackets.map((bracket, idx) => {\n                            const { leftLabel, rightLabel, showArrow } = this.getBracketLabelsAndArrowState({\n                              index: idx,\n                              bracket,\n                              brackets: statement.brackets,\n                              checkInDate: statement.checkInDate,\n                            });\n\n                            const isInCurrentBracket = isTodaySameOrAfterCheckInDate ? false : moment(bracket.due_on, 'YYYY-MM-DD').isSame(currentBracket, 'date');\n\n                            return (\n                              <tr class={{ 'applicable-policies__highlighted-bracket': isInCurrentBracket }}>\n                                <td class=\"applicable-policies__bracket-dates\">\n                                  {leftLabel} {showArrow && <ir-icons name=\"arrow_right\" class=\"applicable-policies__icon\" style={{ '--icon-size': '0.875rem' }}></ir-icons>}{' '}\n                                  {rightLabel}\n                                </td>\n\n                                <td class=\"applicable-policies__amount px-1\">{formatAmount(calendar_data.currency.symbol, bracket.gross_amount)}</td>\n\n                                <td class=\"applicable-policies__statement-text\">{bracket.amount === 0 ? 'No penalty' : bracket.statement}</td>\n                              </tr>\n                            );\n                          })}\n                          {isTodaySameOrAfterCheckInDate && (\n                            <tr class={{ 'applicable-policies__highlighted-bracket': true }}>\n                              <td class=\"applicable-policies__bracket-dates\">{moment(statement.checkInDate, 'YYYY-MM-DD').add(1, 'days').format('MMM DD')} onwards</td>\n\n                              <td class=\"applicable-policies__amount px-1\">{formatAmount(calendar_data.currency.symbol, statement.grossTotal)}</td>\n\n                              <td class=\"applicable-policies__statement-text\">100% of the total price</td>\n                            </tr>\n                          )}\n                        </tbody>\n                      </table>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </section>\n      </Host>\n    );\n  }\n}\n",":host {\n  overflow-x: hidden;\n  --ir-dialog-max-width: 20rem;\n  font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;\n}\n:host * {\n  font-family: inherit !important;\n  font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;\n}\n\n.font-medium {\n  font-weight: 600;\n}\n\n:host th {\n  font-weight: 600;\n}\n.h-28 {\n  height: 2rem;\n}\n.mx-01 {\n  --m: 5px;\n  margin-right: var(--m) !important;\n  margin-left: var(--m) !important;\n}\n\n.date-margin {\n  margin-right: 5px;\n}\n.pickup-margin {\n  margin-bottom: 7px !important;\n}\n.header-date {\n  padding-left: 5px !important;\n}\n\n.pointer {\n  cursor: pointer;\n}\n\n:root {\n  --sidebar-width: 50rem;\n}\n.loading-container {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 0;\n  padding: 0;\n}\n.sm-padding-right {\n  padding-right: 0.2rem;\n}\n.sm-padding-left {\n  padding-left: 0.2rem;\n}\n.sm-padding-top {\n  padding-top: 0.2rem;\n}\n.sm-padding-bottom {\n  padding-bottom: 0.2rem;\n}\n\n.info-notes {\n  list-style: none;\n  padding-left: 0;\n}\n.light-blue-bg {\n  background-color: #acecff;\n  padding: 0.2rem 0.3rem;\n}\n.iframeHeight {\n  height: 17.5rem;\n}\n\n.dialog-title {\n  width: fit-content;\n}\n","import { Component, Listen, h, Prop, Watch, State, Event, EventEmitter, Element, Fragment } from '@stencil/core';\nimport { Booking, ExtraService, Guest, IPmsLog, Room, SharedPerson } from '@/models/booking.dto';\nimport axios from 'axios';\nimport { BookingService } from '@/services/booking.service';\nimport { IglBookPropertyPayloadAddRoom, TIglBookPropertyPayload } from '@/models/igl-book-property';\nimport { RoomService } from '@/services/room.service';\nimport locales from '@/stores/locales.store';\nimport { IToast } from '@components/ui/ir-toast/toast';\nimport { ICountry, IEntries } from '@/models/IBooking';\nimport { IPaymentAction, PaymentService } from '@/services/payment.service';\nimport Token from '@/models/Token';\nimport { BookingDetailsSidebarEvents, OpenSidebarEvent, PaymentEntries } from './types';\nimport calendar_data from '@/stores/calendar-data';\nimport moment from 'moment';\nimport { IrModalCustomEvent } from '@/components';\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\n\n@Component({\n  tag: 'ir-booking-details',\n  styleUrl: 'ir-booking-details.css',\n  scoped: true,\n})\nexport class IrBookingDetails {\n  @Element() element: HTMLElement;\n  // Setup Data\n  @Prop() language: string = 'en';\n  @Prop() ticket: string = '';\n  @Prop() bookingNumber: string = '';\n  @Prop() propertyid: number;\n  @Prop() is_from_front_desk = false;\n  @Prop() p: string;\n  // Booleans Conditions\n  @Prop() hasPrint: boolean = false;\n  @Prop() hasReceipt: boolean = false;\n  @Prop() hasDelete: boolean = false;\n  @Prop() hasMenu: boolean = false;\n\n  // Room Booleans\n  @Prop() hasRoomEdit: boolean = false;\n  @Prop() hasRoomDelete: boolean = false;\n  @Prop() hasRoomAdd: boolean = false;\n  @Prop() hasCheckIn: boolean = false;\n  @Prop() hasCheckOut: boolean = false;\n  @Prop() hasCloseButton = false;\n\n  @State() bookingItem: TIglBookPropertyPayload | null = null;\n  @State() statusData = [];\n\n  @State() showPaymentDetails: any;\n  @State() booking: Booking;\n  @State() countries: ICountry[];\n  @State() calendarData: any = {};\n  // Guest Data\n  @State() guestData: Guest = null;\n  // Rerender Flag\n  @State() rerenderFlag = false;\n  @State() sidebarState: BookingDetailsSidebarEvents | null = null;\n  @State() sidebarPayload: any;\n  @State() isUpdateClicked = false;\n\n  @State() pms_status: IPmsLog;\n  @State() isPMSLogLoading: boolean = false;\n  @State() paymentActions: IPaymentAction[];\n  @State() property_id: number;\n  @State() selectedService: ExtraService;\n  @State() bedPreference: IEntries[];\n  @State() roomGuest: any;\n  @State() modalState: { type: 'email' | (string & {}); message: string; loading: boolean } = null;\n  @State() departureTime: IEntries[];\n\n  @State() paymentEntries: PaymentEntries;\n\n  // Payment Event\n  @Event() toast: EventEmitter<IToast>;\n  @Event() bookingChanged: EventEmitter<Booking>;\n  @Event() closeSidebar: EventEmitter<null>;\n\n  private bookingService = new BookingService();\n  private roomService = new RoomService();\n  private paymentService = new PaymentService();\n  private token = new Token();\n\n  private printingBaseUrl = 'https://gateway.igloorooms.com/PrintBooking/%1/printing?id=%2';\n  private modalRef: HTMLIrModalElement;\n\n  componentWillLoad() {\n    if (this.ticket !== '') {\n      this.token.setToken(this.ticket);\n      this.initializeApp();\n    }\n  }\n\n  @Watch('ticket')\n  ticketChanged(newValue: string, oldValue: string) {\n    if (newValue === oldValue) {\n      return;\n    }\n    this.token.setToken(this.ticket);\n    this.initializeApp();\n  }\n\n  @Listen('openSidebar')\n  handleSideBarEvents(e: CustomEvent<OpenSidebarEvent<unknown>>) {\n    this.sidebarState = e.detail.type;\n    this.sidebarPayload = e.detail.payload;\n  }\n\n  @Listen('clickHandler')\n  handleIconClick(e: CustomEvent) {\n    const target = e.target as HTMLIrButtonElement;\n    switch (target.id) {\n      case 'pickup':\n        this.sidebarState = 'pickup';\n        return;\n      case 'close':\n        this.closeSidebar.emit(null);\n        return;\n      case 'email':\n        this.modalState = {\n          type: 'email',\n          message: locales.entries.Lcz_EmailBookingto.replace('%1', this.booking.guest.email),\n          loading: isRequestPending('/Send_Booking_Confirmation_Email'),\n        };\n        this.modalRef.openModal();\n        return;\n      case 'print':\n        this.openPrintingScreen();\n        return;\n      case 'receipt':\n        this.openPrintingScreen('invoice');\n        return;\n      case 'book-delete':\n        return;\n      case 'menu':\n        window.location.href = 'https://x.igloorooms.com/manage/acbookinglist.aspx';\n        return;\n      case 'room-add':\n        (this.bookingItem as IglBookPropertyPayloadAddRoom) = {\n          ID: '',\n          NAME: this.booking.guest.last_name,\n          EMAIL: this.booking.guest.email,\n          PHONE: this.booking.guest.mobile,\n          REFERENCE_TYPE: '',\n          FROM_DATE: this.booking.from_date,\n          ARRIVAL: this.booking.arrival,\n          TO_DATE: this.booking.to_date,\n          TITLE: `${locales.entries.Lcz_AddingUnitToBooking}# ${this.booking.booking_nbr}`,\n          defaultDateRange: {\n            fromDate: new Date(this.booking.from_date),\n            fromDateStr: '',\n            toDate: new Date(this.booking.to_date),\n            toDateStr: '',\n            dateDifference: 0,\n            message: '',\n          },\n          event_type: 'ADD_ROOM',\n          booking: this.booking,\n          BOOKING_NUMBER: this.booking.booking_nbr,\n          ADD_ROOM_TO_BOOKING: this.booking.booking_nbr,\n          GUEST: this.booking.guest,\n          message: this.booking.remark,\n          SOURCE: this.booking.source,\n          ROOMS: this.booking.rooms,\n        };\n        return;\n      case 'extra_service_btn':\n        this.sidebarState = 'extra_service';\n        return;\n      case 'add-payment':\n        return;\n    }\n  }\n\n  @Listen('resetExposedCancellationDueAmount')\n  async handleResetExposedCancellationDueAmount(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    //TODO: Payment action\n    const paymentActions = await this.paymentService.GetExposedCancellationDueAmount({ booking_nbr: this.booking.booking_nbr, currency_id: this.booking.currency.id });\n    this.paymentActions = [...paymentActions];\n  }\n  @Listen('editInitiated')\n  handleEditInitiated(e: CustomEvent<TIglBookPropertyPayload>) {\n    this.bookingItem = e.detail;\n  }\n  @Listen('updateRoomGuests')\n  handleRoomGuestsUpdate(e: CustomEvent<{ identifier: string; guests: SharedPerson[] }>) {\n    const { identifier, guests } = e.detail;\n    const rooms = [...this.booking.rooms];\n    let currentRoomIndex = rooms.findIndex(r => r.identifier === identifier);\n    if (currentRoomIndex === -1) {\n      return;\n    }\n    const currentRoom = rooms[currentRoomIndex];\n    const updatedRoom = { ...currentRoom, sharing_persons: guests };\n    rooms[currentRoomIndex] = updatedRoom;\n    this.booking = { ...this.booking, rooms: [...rooms] };\n  }\n\n  @Listen('resetBookingEvt')\n  async handleResetBooking(e: CustomEvent<Booking | null>) {\n    // e.stopPropagation();\n    // e.stopImmediatePropagation();\n    if (e.detail) {\n      return (this.booking = e.detail);\n    }\n    await this.resetBooking();\n  }\n  @Listen('editExtraService')\n  handleEditExtraService(e: CustomEvent) {\n    this.selectedService = e.detail;\n    this.sidebarState = 'extra_service';\n  }\n\n  private setRoomsData(roomServiceResp) {\n    let roomsData: { [key: string]: any }[] = new Array();\n    if (roomServiceResp.My_Result?.roomtypes?.length) {\n      roomsData = roomServiceResp.My_Result.roomtypes;\n      roomServiceResp.My_Result.roomtypes.forEach(roomCategory => {\n        roomCategory.expanded = true;\n      });\n    }\n    this.calendarData.roomsInfo = roomsData;\n  }\n  // private shouldFetchCancellationPenalty(): boolean {\n  //   return this.booking.is_requested_to_cancel || this.booking.status.code === '003';\n  // }\n  private async initializeApp() {\n    try {\n      const [roomResponse, languageTexts, countriesList, bookingDetails, setupEntries] = await Promise.all([\n        this.roomService.getExposedProperty({ id: this.propertyid || 0, language: this.language, aname: this.p }),\n        this.roomService.fetchLanguage(this.language),\n        this.bookingService.getCountries(this.language),\n        this.bookingService.getExposedBooking(this.bookingNumber, this.language),\n        this.bookingService.getSetupEntriesByTableNameMulti(['_BED_PREFERENCE_TYPE', '_DEPARTURE_TIME', '_PAY_TYPE', '_PAY_TYPE_GROUP', '_PAY_METHOD']),\n      ]);\n      this.property_id = roomResponse?.My_Result?.id;\n      const { bed_preference_type, departure_time, pay_type, pay_type_group, pay_method } = this.bookingService.groupEntryTablesResult(setupEntries);\n      this.bedPreference = bed_preference_type;\n      this.departureTime = departure_time;\n      this.paymentEntries = { types: pay_type, groups: pay_type_group, methods: pay_method };\n      if (bookingDetails?.booking_nbr && bookingDetails?.currency?.id && bookingDetails.is_direct) {\n        this.paymentService\n          .GetExposedCancellationDueAmount({\n            booking_nbr: bookingDetails.booking_nbr,\n            currency_id: bookingDetails.currency.id,\n          })\n          .then(res => {\n            this.paymentActions = res;\n          });\n      }\n      if (!locales?.entries) {\n        locales.entries = languageTexts.entries;\n        locales.direction = languageTexts.direction;\n      }\n      this.countries = countriesList;\n      const myResult = roomResponse?.My_Result;\n      if (myResult) {\n        const { allowed_payment_methods: paymentMethods, currency, allowed_booking_sources, adult_child_constraints, calendar_legends, aname } = myResult;\n        this.printingBaseUrl = this.printingBaseUrl.replace('%1', aname).replace('%2', this.bookingNumber);\n        this.calendarData = {\n          currency,\n          allowed_booking_sources,\n          adult_child_constraints,\n          legendData: calendar_legends,\n        };\n        this.setRoomsData(roomResponse);\n        const paymentCodesToShow = ['001', '004'];\n        this.showPaymentDetails = paymentMethods?.some(method => paymentCodesToShow.includes(method.code));\n      } else {\n        console.warn(\"Room response is missing 'My_Result'.\");\n      }\n\n      // Set guest and booking data\n      this.guestData = bookingDetails.guest;\n      this.booking = bookingDetails;\n    } catch (error) {\n      console.error('Error initializing app:', error);\n    }\n  }\n\n  private async openPrintingScreen(mode: 'invoice' | 'print' = 'print', version: 'old' | 'new' = 'new') {\n    if (version === 'old') {\n      if (mode === 'invoice') {\n        return window.open(`https://x.igloorooms.com/manage/AcBookingEdit.aspx?IRID=${this.booking.system_id}&&PM=I&TK=${this.ticket}`);\n      }\n      return window.open(`https://x.igloorooms.com/manage/AcBookingEdit.aspx?IRID=${this.booking.system_id}&&PM=B&TK=${this.ticket}`);\n    }\n    let url = this.printingBaseUrl;\n    if (mode === 'invoice') {\n      url = url + '&mode=invoice';\n    }\n    const { data } = await axios.post(`Get_ShortLiving_Token`);\n    if (!data.ExceptionMsg) {\n      url = url + `&token=${data.My_Result}`;\n    }\n    window.open(url);\n  }\n\n  private handleCloseBookingWindow() {\n    this.bookingItem = null;\n  }\n\n  private handleDeleteFinish(e: CustomEvent) {\n    this.booking = { ...this.booking, rooms: this.booking.rooms.filter(room => room.identifier !== e.detail) };\n  }\n\n  private async resetBooking() {\n    try {\n      const booking = await this.bookingService.getExposedBooking(this.bookingNumber, this.language);\n      this.booking = { ...booking };\n      this.bookingChanged.emit(this.booking);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  private async handleModalConfirm(e: IrModalCustomEvent<any>) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    switch (this.modalState.type) {\n      case 'email':\n        await this.bookingService.sendBookingConfirmationEmail(this.booking.booking_nbr, this.language);\n        break;\n    }\n    this.modalState = null;\n    this.modalRef.closeModal();\n  }\n  private renderSidebarContent() {\n    const handleClose = () => {\n      this.sidebarState = null;\n    };\n    switch (this.sidebarState) {\n      case 'guest':\n        return (\n          <ir-guest-info\n            isInSideBar\n            headerShown\n            slot=\"sidebar-body\"\n            booking_nbr={this.bookingNumber}\n            email={this.booking?.guest.email}\n            language={this.language}\n            onCloseSideBar={handleClose}\n          ></ir-guest-info>\n        );\n      case 'pickup':\n        return (\n          <ir-pickup\n            bookingDates={{ from: this.booking.from_date, to: this.booking.to_date }}\n            slot=\"sidebar-body\"\n            defaultPickupData={this.booking.pickup_info}\n            bookingNumber={this.booking.booking_nbr}\n            numberOfPersons={this.booking.occupancy.adult_nbr + this.booking.occupancy.children_nbr}\n            onCloseModal={handleClose}\n          ></ir-pickup>\n        );\n      case 'extra_note':\n        return <ir-booking-extra-note slot=\"sidebar-body\" booking={this.booking} onCloseModal={() => (this.sidebarState = null)}></ir-booking-extra-note>;\n      case 'extra_service':\n        return (\n          <ir-extra-service-config\n            service={this.selectedService}\n            booking={{ from_date: this.booking.from_date, to_date: this.booking.to_date, booking_nbr: this.booking.booking_nbr, currency: this.booking.currency }}\n            slot=\"sidebar-body\"\n            onCloseModal={() => {\n              handleClose();\n              if (this.selectedService) {\n                this.selectedService = null;\n              }\n            }}\n          ></ir-extra-service-config>\n        );\n      case 'room-guest':\n        return (\n          <ir-room-guests\n            countries={this.countries}\n            language={this.language}\n            identifier={this.sidebarPayload?.identifier}\n            bookingNumber={this.booking.booking_nbr}\n            roomName={this.sidebarPayload?.roomName}\n            totalGuests={this.sidebarPayload?.totalGuests}\n            sharedPersons={this.sidebarPayload?.sharing_persons}\n            slot=\"sidebar-body\"\n            checkIn={this.sidebarPayload?.checkin}\n            onCloseModal={handleClose}\n          ></ir-room-guests>\n        );\n      case 'payment-folio':\n        return (\n          <ir-payment-folio\n            bookingNumber={this.booking.booking_nbr}\n            paymentEntries={this.paymentEntries}\n            slot=\"sidebar-body\"\n            payment={this.sidebarPayload.payment}\n            mode={this.sidebarPayload.mode}\n            onCloseModal={handleClose}\n          ></ir-payment-folio>\n        );\n      default:\n        return null;\n    }\n  }\n  render() {\n    console.log(this.booking?.financial?.gross_total_with_extras);\n    if (!this.booking) {\n      return (\n        <div class={'loading-container'}>\n          <ir-spinner></ir-spinner>\n        </div>\n      );\n    }\n    return [\n      <Fragment>\n        {!this.is_from_front_desk && (\n          <Fragment>\n            <ir-toast></ir-toast>\n            <ir-interceptor></ir-interceptor>\n          </Fragment>\n        )}\n      </Fragment>,\n      <ir-booking-header\n        booking={this.booking}\n        hasCloseButton={this.hasCloseButton}\n        hasDelete={this.hasDelete}\n        hasMenu={this.hasMenu}\n        hasPrint={this.hasPrint}\n        hasReceipt={this.hasReceipt}\n        hasEmail={['001', '002'].includes(this.booking?.status?.code)}\n      ></ir-booking-header>,\n      <div class=\"fluid-container p-1 text-left mx-0\">\n        <div class=\"row m-0\">\n          <div class=\"col-12 p-0 mx-0 pr-lg-1 col-lg-6\">\n            <ir-reservation-information countries={this.countries} booking={this.booking}></ir-reservation-information>\n            <div class=\"font-size-large d-flex justify-content-between align-items-center mb-1\">\n              <ir-date-view from_date={this.booking.from_date} to_date={this.booking.to_date}></ir-date-view>\n              {\n                // this.hasRoomAdd && this.booking.is_direct && this.booking.is_editable && (\n                this.hasRoomAdd && this.booking.is_editable && <ir-button id=\"room-add\" icon_name=\"square_plus\" variant=\"icon\" style={{ '--icon-size': '1.5rem' }}></ir-button>\n              }\n            </div>\n            <div class=\"card p-0 mx-0\">\n              {this.booking.rooms.map((room: Room, index: number) => {\n                const showCheckin = this.handleRoomCheckin(room);\n                const showCheckout = this.handleRoomCheckout(room);\n                return [\n                  <ir-room\n                    room={room}\n                    property_id={this.property_id}\n                    language={this.language}\n                    departureTime={this.departureTime}\n                    bedPreferences={this.bedPreference}\n                    isEditable={this.booking.is_editable}\n                    legendData={this.calendarData.legendData}\n                    roomsInfo={this.calendarData.roomsInfo}\n                    myRoomTypeFoodCat={room.roomtype.name}\n                    mealCodeName={room.rateplan.short_name}\n                    currency={this.booking.currency.symbol}\n                    hasRoomEdit={this.hasRoomEdit && this.booking.status.code !== '003' && this.booking.is_direct}\n                    hasRoomDelete={this.hasRoomDelete && this.booking.status.code !== '003' && this.booking.is_direct}\n                    hasCheckIn={showCheckin}\n                    hasCheckOut={showCheckout}\n                    booking={this.booking}\n                    bookingIndex={index}\n                    onDeleteFinished={this.handleDeleteFinish.bind(this)}\n                  />,\n                  index !== this.booking.rooms.length - 1 && <hr class=\"mr-2 ml-2 my-0 p-0\" />,\n                ];\n              })}\n            </div>\n            {/* <ir-ota-services services={this.booking.ota_services}></ir-ota-services> */}\n            <ir-pickup-view booking={this.booking}></ir-pickup-view>\n            <section>\n              <div class=\"font-size-large d-flex justify-content-between align-items-center mb-1\">\n                <p class={'font-size-large p-0 m-0 '}>{locales.entries.Lcz_ExtraServices}</p>\n                <ir-button id=\"extra_service_btn\" icon_name=\"square_plus\" variant=\"icon\" style={{ '--icon-size': '1.5rem' }}></ir-button>\n              </div>\n              <ir-extra-services\n                booking={{ booking_nbr: this.booking.booking_nbr, currency: this.booking.currency, extra_services: this.booking.extra_services }}\n              ></ir-extra-services>\n            </section>\n          </div>\n          <div class=\"col-12 p-0 m-0 pl-lg-1 col-lg-6\">\n            <ir-payment-details propertyId={this.property_id} paymentEntries={this.paymentEntries} paymentActions={this.paymentActions} booking={this.booking}></ir-payment-details>\n          </div>\n        </div>\n      </div>,\n      <ir-modal\n        modalBody={this.modalState?.message}\n        leftBtnText={locales.entries.Lcz_Cancel}\n        rightBtnText={locales.entries.Lcz_Confirm}\n        autoClose={false}\n        isLoading={isRequestPending('/Send_Booking_Confirmation_Email')}\n        ref={el => (this.modalRef = el)}\n        onConfirmModal={e => {\n          this.handleModalConfirm(e);\n        }}\n        onCancelModal={() => {\n          this.modalRef.closeModal();\n        }}\n      ></ir-modal>,\n      <ir-sidebar\n        open={this.sidebarState !== null && this.sidebarState !== 'payment-folio'}\n        side={'right'}\n        id=\"editGuestInfo\"\n        style={{ '--sidebar-width': this.sidebarState === 'room-guest' ? '60rem' : undefined }}\n        onIrSidebarToggle={e => {\n          e.stopImmediatePropagation();\n          e.stopPropagation();\n          this.sidebarState = null;\n        }}\n        showCloseButton={false}\n      >\n        {this.renderSidebarContent()}\n      </ir-sidebar>,\n      <ir-sidebar\n        open={this.sidebarState === 'payment-folio'}\n        side={'left'}\n        id=\"folioSidebar\"\n        onIrSidebarToggle={e => {\n          e.stopImmediatePropagation();\n          e.stopPropagation();\n          this.sidebarState = null;\n        }}\n        showCloseButton={false}\n      >\n        {this.renderSidebarContent()}\n      </ir-sidebar>,\n      <Fragment>\n        {this.bookingItem && (\n          <igl-book-property\n            allowedBookingSources={this.calendarData.allowed_booking_sources}\n            adultChildConstraints={this.calendarData.adult_child_constraints}\n            showPaymentDetails={this.showPaymentDetails}\n            countries={this.countries}\n            currency={this.calendarData.currency}\n            language={this.language}\n            propertyid={this.property_id}\n            bookingData={this.bookingItem}\n            onCloseBookingWindow={() => this.handleCloseBookingWindow()}\n          ></igl-book-property>\n        )}\n      </Fragment>,\n    ];\n  }\n  private handleRoomCheckout(room: Room): boolean {\n    if (!calendar_data.checkin_enabled || calendar_data.is_automatic_check_in_out) {\n      return false;\n    }\n    return room.in_out.code === '001';\n  }\n  private handleRoomCheckin(room: Room): boolean {\n    if (!calendar_data.checkin_enabled || calendar_data.is_automatic_check_in_out) {\n      return false;\n    }\n    if (!room.unit) {\n      return false;\n    }\n    if (room.in_out && room.in_out.code !== '000') {\n      return false;\n    }\n    if (moment().isSameOrAfter(moment(room.from_date, 'YYYY-MM-DD'), 'days') && moment().isBefore(moment(room.to_date, 'YYYY-MM-DD'), 'days')) {\n      return true;\n    }\n    return false;\n  }\n}\n",":host {\n  display: block;\n}\n",":host {\n  height: 100%;\n}\n.sheet-container {\n  display: flex !important;\n  flex-direction: column !important;\n  background: white;\n  height: 100vh;\n  gap: 1rem;\n  z-index: 1000;\n}\n.sheet-container {\n  height: -webkit-fill-available;\n  height: 100vh;\n  height: 100dvh;\n}\n\n/* @supports (height: 100svh) {\n  .sheet-container {\n    height: 100svh;\n  }\n} */\n.sheet-footer {\n  position: sticky;\n  bottom: 0;\n  z-index: 20;\n  background: white;\n  border-top: 1px solid #e4e5ec;\n  display: flex;\n  flex-direction: column;\n  padding: 1rem;\n  gap: 0.5rem;\n}\n.sheet-header {\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  background: white;\n}\n.sheet-body {\n  flex: 1 1 0%;\n}\n/* @media (max-width: 767px) {\n  .sheet-footer {\n    bottom: env(safe-area-inset-bottom);\n  }\n} */\n@media (min-width: 768px) {\n  .sheet-footer {\n    flex-direction: row;\n    align-items: center;\n  }\n}\n","import locales from '@/stores/locales.store';\nimport { Component, Event, EventEmitter, Prop, State, h } from '@stencil/core';\nimport { Booking } from '@/models/booking.dto';\nimport { BookingService } from '@/services/booking.service';\nimport { getPrivateNote } from '@/utils/booking';\n@Component({\n  tag: 'ir-booking-extra-note',\n  styleUrls: ['ir-booking-extra-note.css', '../../../common/sheet.css'],\n  scoped: true,\n})\nexport class IrBookingExtraNote {\n  @Prop() booking: Booking;\n\n  @State() isLoading = false;\n  @State() note = '';\n\n  @Event() closeModal: EventEmitter<null>;\n  @Event() resetBookingEvt: EventEmitter<Booking | null>;\n\n  private bookingService = new BookingService();\n  componentWillLoad() {\n    if (this.booking.extras) {\n      this.setNote(getPrivateNote(this.booking.extras));\n    }\n  }\n\n  private setNote(value: string) {\n    this.note = value;\n  }\n  private async savePrivateNote() {\n    try {\n      this.isLoading = true;\n      let prevExtras = this.booking.extras || [];\n      const newExtraObj = { key: 'private_note', value: this.note };\n      if (prevExtras.length === 0) {\n        prevExtras.push(newExtraObj);\n      } else {\n        const oldPrivateNoteIndex = prevExtras.findIndex(e => e.key === 'private_note');\n        if (oldPrivateNoteIndex === -1) {\n          prevExtras.push(newExtraObj);\n        } else {\n          prevExtras[oldPrivateNoteIndex] = newExtraObj;\n        }\n      }\n      const res = await this.bookingService.doReservation({\n        assign_units: true,\n        is_pms: true,\n        is_direct: true,\n        is_in_loyalty_mode: false,\n        promo_key: null,\n        booking: this.booking,\n        Is_Non_Technical_Change: true,\n        extras: prevExtras,\n      });\n      this.resetBookingEvt.emit(res);\n      this.closeModal.emit(null);\n    } catch (error) {\n      console.error(error);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n  render() {\n    return (\n      <form\n        class={'sheet-container h-100'}\n        onSubmit={e => {\n          e.preventDefault();\n          this.savePrivateNote();\n        }}\n      >\n        <ir-title class=\"px-1 sheet-header\" onCloseSideBar={() => this.closeModal.emit(null)} label={locales.entries.Lcz_PrivateNote} displayContext=\"sidebar\"></ir-title>\n        <div class=\"sheet-body px-1\">\n          <ir-textarea placeholder={locales.entries.Lcz_PrivateNote_MaxChar} label=\"\" value={this.note} maxLength={150} onTextChange={e => this.setNote(e.detail)}></ir-textarea>\n        </div>\n        <div class={'sheet-footer'}>\n          <ir-button\n            onClickHandler={() => this.closeModal.emit(null)}\n            btn_styles=\"justify-content-center\"\n            class={`mb-1 mb-sm-0 flex-fill  mr-sm-1'}`}\n            text={locales.entries.Lcz_Cancel}\n            btn_color=\"secondary\"\n          ></ir-button>\n\n          <ir-button\n            btn_styles=\"justify-content-center align-items-center\"\n            class={'m-0 flex-fill text-center ml-sm-1'}\n            isLoading={this.isLoading}\n            text={locales.entries.Lcz_Save}\n            btn_color=\"primary\"\n            btn_type=\"submit\"\n          ></ir-button>\n        </div>\n      </form>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n:host {\n  font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;\n}\n:host * {\n  font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;\n}\n.iframeHeight {\n  height: max-content;\n  height: 22.5rem;\n}\n","import { Component, h, Prop, State } from '@stencil/core';\nimport { Booking } from '@/models/booking.dto';\nimport { BookingService } from '@/services/booking.service';\nimport { toFloat } from '@/utils/utils';\nimport locales from '@/stores/locales.store';\nimport calendar_data from '@/stores/calendar-data';\n\n@Component({\n  styleUrl: 'ir-booking-guarantee.css',\n  tag: 'ir-booking-guarantee',\n  scoped: true,\n})\nexport class IrBookingGuarantee {\n  @Prop() booking: Booking;\n  @Prop() bookingService: BookingService;\n\n  @State() collapsed: boolean = false;\n  @State() paymentDetailsUrl: string = '';\n  @State() paymentExceptionMessage: string = '';\n\n  async componentWillLoad() {\n    try {\n      // Initialize any required data\n    } catch (error) {\n      if (this.booking.guest.cci) {\n        return;\n      }\n      if (!this.booking.is_direct && this.booking.channel_booking_nbr) {\n        this.paymentExceptionMessage = error;\n      }\n    }\n  }\n\n  private formatCurrency(amount: number, currency: string, locale: string = 'en-US'): string {\n    if (!currency || amount < 0) {\n      return '';\n    }\n\n    return new Intl.NumberFormat(locale, {\n      style: 'currency',\n      currency,\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2,\n    }).format(amount);\n  }\n\n  private checkPaymentCode(value: string): string | null {\n    return calendar_data.allowed_payment_methods?.find(pm => pm.code === value)?.description ?? null;\n  }\n\n  private getPaymentMethod(): string | null {\n    let paymentMethod = null;\n    const payment_code = this.booking?.extras?.find(e => e.key === 'payment_code');\n\n    if (this.booking.agent) {\n      const code = this.booking?.extras?.find(e => e.key === 'agent_payment_mode');\n      if (code) {\n        paymentMethod = code.value === '001' ? locales.entries.Lcz_OnCredit : payment_code ? this.checkPaymentCode(payment_code.value) : null;\n      }\n    } else if (payment_code) {\n      paymentMethod = payment_code.value === '000' ? 'No card info required upon booking' : this.checkPaymentCode(payment_code.value);\n    }\n\n    return paymentMethod;\n  }\n\n  private async handleToggleCollapse() {\n    if (!this.booking.is_direct && this.booking.channel_booking_nbr && !this.booking.guest.cci && !this.collapsed) {\n      this.paymentDetailsUrl = await this.bookingService.getPCICardInfoURL(this.booking.booking_nbr);\n    }\n    this.collapsed = !this.collapsed;\n  }\n\n  private shouldShowGuarantee(): boolean {\n    const paymentMethod = this.booking.is_direct ? this.getPaymentMethod() : null;\n    return this.booking.is_direct ? Boolean(paymentMethod || this.booking.guest.cci) : true;\n  }\n\n  private shouldShowToggleButton() {\n    return !this.booking.is_direct || (this.booking.is_direct && this.booking.guest.cci);\n  }\n\n  private renderCreditCardInfo() {\n    const { cci } = this.booking.guest;\n    if (!cci) return null;\n\n    return [\n      <div>\n        {cci && 'Card:'} <span>{cci.nbr || ''}</span>\n        {cci.expiry_month && ' Expiry: '}\n        <span>\n          {cci.expiry_month || ''}\n          {cci.expiry_year && '/' + cci.expiry_year}\n        </span>\n      </div>,\n      <div>\n        {cci.holder_name && 'Name:'} <span>{cci.holder_name || ''}</span>\n        {cci.cvc && ' - CVC:'} <span>{cci.cvc || ''}</span>\n      </div>,\n    ];\n  }\n\n  private renderCollapsedContent() {\n    if (this.booking.guest.cci) {\n      return this.renderCreditCardInfo();\n    }\n\n    if (this.paymentDetailsUrl) {\n      return <iframe src={this.paymentDetailsUrl} width=\"100%\" class=\"iframeHeight\" frameborder=\"0\" name=\"payment\" />;\n    }\n\n    return <div class=\"text-center\">{this.paymentExceptionMessage}</div>;\n  }\n\n  private renderOtaGuarantee() {\n    const { ota_guarante } = this.booking;\n    if (!ota_guarante || this.booking.is_direct) return null;\n\n    return (\n      <div>\n        <ir-label content={ota_guarante.card_type + `${ota_guarante.is_virtual ? ' (virtual)' : ''}`} labelText={`${locales.entries.Lcz_CardType}:`} />\n        <ir-label content={ota_guarante.cardholder_name} labelText={`${locales.entries.Lcz_CardHolderName}:`} />\n        <ir-label content={ota_guarante.card_number} labelText={`${locales.entries.Lcz_CardNumber}:`} />\n        <ir-label\n          content={this.formatCurrency(\n            toFloat(Number(ota_guarante.meta?.virtual_card_current_balance), Number(ota_guarante.meta?.virtual_card_decimal_places)),\n            ota_guarante.meta?.virtual_card_currency_code,\n          )}\n          labelText={`${locales.entries.Lcz_CardBalance}:`}\n        />\n      </div>\n    );\n  }\n\n  render() {\n    if (!this.shouldShowGuarantee()) {\n      return null;\n    }\n\n    const paymentMethod = this.booking.is_direct ? this.getPaymentMethod() : null;\n\n    return (\n      <div class=\"mb-1\">\n        <div class=\"d-flex align-items-center\">\n          <span class=\"mr-1 font-medium\">\n            {locales.entries.Lcz_BookingGuarantee}\n            {paymentMethod && <span>: {paymentMethod}</span>}\n          </span>\n\n          {this.shouldShowToggleButton() && (\n            <ir-button\n              id=\"drawer-icon\"\n              data-toggle=\"collapse\"\n              data-target=\".guarrantee\"\n              aria-expanded={this.collapsed ? 'true' : 'false'}\n              aria-controls=\"myCollapse\"\n              class=\"sm-padding-right pointer\"\n              variant=\"icon\"\n              icon_name=\"credit_card\"\n              onClickHandler={this.handleToggleCollapse.bind(this)}\n            />\n          )}\n        </div>\n\n        <div class=\"collapse guarrantee\">{this.renderCollapsedContent()}</div>\n\n        {this.renderOtaGuarantee()}\n      </div>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n.confirmed {\n  color: #fff;\n  display: flex;\n  align-items: center;\n}\n.bg-ir-green {\n  background: #629a4c;\n  padding: 0.2rem 0.3rem;\n  /* height: 28px; */\n  /* padding-top: 0 !important;\n  padding-bottom: 0 !important ; */\n}\n.bg-ir-red {\n  background: #ff4961;\n  padding: 0.2rem 0.3rem;\n  /* height: 28px; */\n  /* padding-top: 0 !important;\n  padding-bottom: 0 !important ; */\n}\n.bg-ir-orange {\n  background: #ff9149;\n  padding: 0.2rem 0.3rem;\n  /* height: 28px; */\n  /* padding-top: 0 !important;\n  padding-bottom: 0 !important ; */\n}\n","import { IToast } from '@/components/ui/ir-toast/toast';\nimport { colorVariants } from '@/components/ui/ir-icons/icons';\nimport { Booking } from '@/models/booking.dto';\nimport calendar_data from '@/stores/calendar-data';\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\nimport locales from '@/stores/locales.store';\nimport { Component, Event, EventEmitter, h, Listen, Prop, State } from '@stencil/core';\nimport { BookingDetailsDialogEvents, OpenDialogEvent, OpenSidebarEvent } from '../types';\nimport { BookingService } from '@/services/booking.service';\n\n@Component({\n  tag: 'ir-booking-header',\n  styleUrl: 'ir-booking-header.css',\n  scoped: true,\n})\nexport class IrBookingHeader {\n  @Prop() booking: Booking;\n  @Prop() hasReceipt: boolean;\n  @Prop() hasPrint: boolean;\n  @Prop() hasDelete: boolean;\n  @Prop() hasMenu: boolean;\n  @Prop() hasCloseButton: boolean;\n  @Prop() hasEmail: boolean = true;\n\n  @State() bookingStatus: string | null = null;\n  @State() currentDialogStatus: BookingDetailsDialogEvents;\n\n  @Event() toast: EventEmitter<IToast>;\n  @Event() closeSidebar: EventEmitter<null>;\n  @Event() resetBookingEvt: EventEmitter<null>;\n  @Event() openSidebar: EventEmitter<OpenSidebarEvent<any>>;\n\n  private confirmationBG = {\n    '001': 'bg-ir-orange',\n    '002': 'bg-ir-green',\n    '003': 'bg-ir-red',\n    '004': 'bg-ir-red',\n  };\n  private dialogRef: HTMLIrDialogElement;\n\n  private bookingService = new BookingService();\n  private alertMessage = `ALERT! Modifying an OTA booking will create a discrepancy between igloorooms and the source. Future guest modifications on the OTA may require manual adjustments of the booking.`;\n  modalEl: HTMLIrModalElement;\n\n  @Listen('selectChange')\n  handleSelectChange(e: CustomEvent<any>) {\n    e.stopPropagation();\n    e.stopImmediatePropagation();\n    const target = e.target;\n    this.bookingStatus = (target as any).selectedValue;\n  }\n  private async updateStatus() {\n    if (!this.bookingStatus || this.bookingStatus === '-1') {\n      this.toast.emit({\n        type: 'error',\n        description: '',\n        title: locales.entries.Lcz_SelectStatus,\n        position: 'top-right',\n      });\n      return;\n    }\n    try {\n      await this.bookingService.changeExposedBookingStatus({\n        book_nbr: this.booking.booking_nbr,\n        status: this.bookingStatus,\n      });\n      this.toast.emit({\n        type: 'success',\n        description: '',\n        title: locales.entries.Lcz_StatusUpdatedSuccessfully,\n        position: 'top-right',\n      });\n      this.bookingStatus = null;\n      this.resetBookingEvt.emit(null);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  private openDialog(e: OpenDialogEvent) {\n    const { type } = e;\n    this.currentDialogStatus = type;\n    this.dialogRef.openModal();\n  }\n  private renderDialogBody() {\n    switch (this.currentDialogStatus) {\n      case 'pms':\n        return <ir-pms-logs slot=\"modal-body\" bookingNumber={this.booking.booking_nbr}></ir-pms-logs>;\n      case 'events-log':\n        return <ir-events-log booking={this.booking} slot=\"modal-body\" bookingNumber={this.booking.booking_nbr}></ir-events-log>;\n    }\n  }\n\n  render() {\n    const lastManipulation = this.booking.ota_manipulations ? this.booking.ota_manipulations[this.booking.ota_manipulations.length - 1] : null;\n    return (\n      <div class=\"fluid-container px-1\">\n        <div class=\"d-flex flex-column p-0 mx-0 flex-lg-row align-items-md-center justify-content-between mt-1\">\n          <div class=\"m-0 p-0 mb-1 mb-lg-0 mt-md-0\">\n            <p class=\"font-size-large m-0 p-0\">{`${locales.entries.Lcz_Booking}#${this.booking.booking_nbr}`}</p>\n            <p class=\"m-0 p-0\">{!this.booking.is_direct && <span class=\"mr-1 m-0\">{this.booking.channel_booking_nbr}</span>}</p>\n          </div>\n\n          <div class=\"d-flex justify-content-end align-items-center\" style={{ gap: '1rem', flexWrap: 'wrap' }}>\n            <div class=\"d-flex flex-column align-items-center\">\n              <span class={`confirmed btn-sm m-0  ${this.confirmationBG[this.booking.is_requested_to_cancel ? '003' : this.booking.status.code]}`}>\n                {this.booking.is_requested_to_cancel ? locales.entries.Lcz_CancellationRequested : this.booking.status.description}\n              </span>\n              {lastManipulation && (\n                <ir-popover\n                  trigger=\"hover\"\n                  renderContentAsHtml\n                  content={`<div><p>Modified by ${lastManipulation.user} at ${lastManipulation.date} ${lastManipulation.hour}:${lastManipulation.minute}.</p>\n                <p>${this.alertMessage}</p></div>`}\n                >\n                  <p class=\"mx-0 p-0 small text-danger\" style={{ marginTop: '0.25rem', marginBottom: '0' }}>\n                    <b>Modified</b>\n                  </p>\n                </ir-popover>\n              )}\n            </div>\n            {this.booking.allowed_actions.length > 0 && this.booking.is_editable && (\n              <div class=\"m-0 p-0 d-flex align-items-center\" style={{ gap: '0.25rem' }}>\n                <ir-select\n                  selectContainerStyle=\"h-28\"\n                  selectStyles=\"d-flex status-select align-items-center h-28\"\n                  firstOption={locales.entries.Lcz_Select}\n                  id=\"update-status\"\n                  size=\"sm\"\n                  label-available=\"false\"\n                  data={this.booking.allowed_actions.map(b => ({ text: b.description, value: b.code }))}\n                  textSize=\"sm\"\n                  class=\"sm-padding-right m-0 \"\n                  selectedValue={this.bookingStatus}\n                ></ir-select>\n                <ir-button\n                  onClickHandler={() => {\n                    if (!this.booking.is_direct) {\n                      this.modalEl.openModal();\n                      return;\n                    }\n                    this.updateStatus();\n                  }}\n                  btn_styles=\"h-28\"\n                  isLoading={isRequestPending('/Change_Exposed_Booking_Status')}\n                  btn_disabled={isRequestPending('/Change_Exposed_Booking_Status')}\n                  id=\"update-status-btn\"\n                  size=\"sm\"\n                  text=\"Update\"\n                ></ir-button>\n              </div>\n            )}\n            <ir-button\n              size=\"sm\"\n              btn_color=\"outline\"\n              text={locales.entries.Lcz_EventsLog}\n              onClickHandler={e => {\n                e.stopImmediatePropagation();\n                e.stopPropagation();\n                this.openDialog({ type: 'events-log' });\n              }}\n            ></ir-button>\n            {calendar_data.is_pms_enabled && (\n              <ir-button\n                size=\"sm\"\n                btn_color=\"outline\"\n                text={locales.entries.Lcz_pms}\n                onClick={e => {\n                  e.stopImmediatePropagation();\n                  e.stopPropagation();\n                  this.openDialog({ type: 'pms' });\n                }}\n              ></ir-button>\n            )}\n            {this.hasReceipt && <ir-button variant=\"icon\" id=\"receipt\" icon_name=\"reciept\" class=\"\" style={{ '--icon-size': '1.65rem' }}></ir-button>}\n            {this.hasPrint && <ir-button variant=\"icon\" id=\"print\" icon_name=\"print\" class=\"\" style={{ '--icon-size': '1.65rem' }}></ir-button>}\n            {this.hasEmail && <ir-button variant=\"icon\" id=\"email\" title=\"Email this booking\" icon_name=\"email\" class=\"\" style={{ '--icon-size': '1.65rem' }}></ir-button>}\n            {this.hasDelete && <ir-button variant=\"icon\" id=\"book-delete\" icon_name=\"trash\" class=\"\" style={{ ...colorVariants.danger, '--icon-size': '1.65rem' }}></ir-button>}\n            {this.hasMenu && <ir-button variant=\"icon\" class=\"mr-1\" id=\"menu\" icon_name=\"menu_list\" style={{ '--icon-size': '1.65rem' }}></ir-button>}\n\n            {this.hasCloseButton && (\n              <ir-button\n                id=\"close\"\n                variant=\"icon\"\n                style={{ '--icon-size': '1.65rem' }}\n                icon_name=\"xmark\"\n                class=\"ml-2\"\n                onClickHandler={e => {\n                  e.stopPropagation();\n                  e.stopImmediatePropagation();\n                  this.closeSidebar.emit(null);\n                }}\n              ></ir-button>\n            )}\n          </div>\n        </div>\n        <ir-dialog\n          onOpenChange={e => {\n            if (!e.detail) {\n              this.currentDialogStatus = null;\n            }\n          }}\n          style={this.currentDialogStatus === 'events-log' && { '--ir-dialog-max-width': 'max-content' }}\n          ref={el => (this.dialogRef = el)}\n        >\n          {this.renderDialogBody()}\n        </ir-dialog>\n        <ir-modal\n          ref={el => (this.modalEl = el)}\n          modalTitle={''}\n          leftBtnText={locales?.entries?.Lcz_Cancel}\n          rightBtnText={locales?.entries?.Lcz_Confirm}\n          modalBody={locales.entries.Lcz_OTA_Modification_Alter}\n          isLoading={isRequestPending('/Change_Exposed_Booking_Status')}\n          onConfirmModal={this.updateStatus.bind(this)}\n        ></ir-modal>\n      </div>\n    );\n  }\n}\n",":host {\n  display: block;\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n.backdrop {\n  opacity: 0;\n  background: rgba(0, 0, 0, 0.2);\n  position: fixed;\n  inset: 0;\n  z-index: 99999998;\n}\n.backdrop[data-state='opened'] {\n  animation: overlayShow 150ms cubic-bezier(0.16, 1, 0.3, 1) forwards;\n}\n.backdrop[data-state='closed'] {\n  opacity: 0;\n  pointer-events: none;\n}\n\n.modal-container {\n  box-sizing: border-box;\n  margin: 0;\n  box-shadow: hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px;\n  position: fixed;\n  z-index: 99999999;\n  overflow-y: auto;\n  top: 50%;\n  left: 50%;\n  background: white;\n  transform: translate(-50%, -50%);\n  width: 90%;\n  min-height: fit-content;\n  height: fit-content;\n  max-width: var(--ir-dialog-max-width, 40rem);\n  min-width: var(--ir-dialog-min-width);\n  max-height: 85vh;\n  border-radius: 8px;\n  padding: 0;\n  animation: contentShow 300ms cubic-bezier(0.16, 1, 0.3, 1);\n}\n\n.modal-footer ::slotted(*) {\n  flex-direction: row;\n  align-items: center;\n  justify-content: end;\n  gap: 8px;\n  --ir-btn-width: inherit;\n}\n.modal-footer {\n  --ir-btn-width: 100%;\n}\n.modal-title ::slotted(*) {\n  font-size: 18px;\n  font-weight: 600;\n  color: #101828;\n  margin-bottom: 8px;\n}\n.modal-body ::slotted(*) {\n  font-size: 14px;\n  font-weight: 400;\n  color: #475467;\n  padding: 0;\n  margin: 0;\n}\n\n@keyframes overlayShow {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n@keyframes contentShow {\n  from {\n    opacity: 0;\n    transform: translate(-50%, -48%) scale(0.96);\n  }\n  to {\n    opacity: 1;\n    transform: translate(-50%, -50%) scale(1);\n  }\n}\n.dialog-close-button {\n  position: absolute;\n  top: 15px;\n  right: 15px;\n}\n/* md */\n","import { Component, Host, h, Element, Method, Listen, State, Event, EventEmitter, Prop, Watch } from '@stencil/core';\n\n@Component({\n  tag: 'ir-dialog',\n  styleUrl: 'ir-dialog.css',\n  shadow: true,\n})\nexport class IrDialog {\n  @Element() el: HTMLElement;\n\n  /**\n   * Controls whether the dialog should be opened.\n   * Can be updated externally and watched internally.\n   */\n  @Prop() open: boolean = false;\n\n  /**\n   * Internal open state, driven by `open` prop or internal logic.\n   */\n  @State() isOpen = false;\n\n  /**\n   * Emits the open/close state of the modal.\n   *\n   * Example:\n   * ```tsx\n   * <ir-dialog onOpenChange={(e) => console.log(e.detail)} />\n   * ```\n   */\n  @Event() openChange: EventEmitter<boolean>;\n\n  private firstFocusableElement: HTMLElement;\n  private lastFocusableElement: HTMLElement;\n\n  componentWillLoad() {\n    if (this.open) {\n      this.openModal();\n    }\n  }\n  componentDidLoad() {\n    this.prepareFocusTrap();\n  }\n  /**\n   * Opens the modal dialog programmatically.\n   * Applies `overflow: hidden` to the `body`.\n   *\n   * Example:\n   * ```ts\n   * const dialog = document.querySelector('ir-dialog');\n   * await dialog.openModal();\n   * ```\n   */\n  @Method()\n  async openModal() {\n    this.isOpen = true;\n    document.body.style.overflow = 'hidden';\n    setTimeout(() => {\n      this.prepareFocusTrap();\n    }, 10);\n    this.openChange.emit(this.isOpen);\n  }\n  /**\n   * Closes the modal dialog programmatically.\n   * Reverts body scroll and emits `openChange`.\n   */\n  @Method()\n  async closeModal() {\n    console.log('close');\n    if (!this.isOpen) {\n      return;\n    }\n    document.body.style.overflow = 'visible';\n    this.isOpen = false;\n    this.openChange.emit(this.isOpen);\n  }\n\n  @Watch('open')\n  handleOpenChange() {\n    if (this.open) {\n      this.openModal();\n    } else {\n      this.closeModal();\n    }\n  }\n\n  @Listen('keydown', { target: 'window' })\n  handleKeyDown(ev: KeyboardEvent) {\n    if (!this.isOpen) {\n      return;\n    }\n\n    let isTabPressed = ev.key === 'Tab';\n    if (ev.key === 'Escape' && this.isOpen) {\n      this.closeModal();\n    }\n    if (!isTabPressed) {\n      return;\n    }\n\n    // If focus is about to leave the last focusable element, redirect it to the first.\n    if (!ev.shiftKey && document.activeElement === this.lastFocusableElement) {\n      this.firstFocusableElement.focus();\n      ev.preventDefault();\n    }\n\n    // If focus is about to leave the first focusable element, redirect it to the last.\n    if (ev.shiftKey && document.activeElement === this.firstFocusableElement) {\n      this.lastFocusableElement.focus();\n      ev.preventDefault();\n    }\n  }\n\n  disconnectedCallback() {\n    document.body.style.overflow = 'visible';\n  }\n  /**\n   * Finds and traps focus within modal content for accessibility.\n   */\n  private prepareFocusTrap() {\n    const focusableElements = 'button,ir-dropdown ,[href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])';\n    const focusableContent: NodeListOf<HTMLElement> = this.el.shadowRoot.querySelectorAll(focusableElements);\n    // console.log(focusableContent);\n    if (focusableContent.length === 0) return;\n    this.firstFocusableElement = focusableContent[0];\n    this.lastFocusableElement = focusableContent[focusableContent.length - 1];\n    this.firstFocusableElement.focus();\n  }\n  render() {\n    return (\n      <Host>\n        <div class=\"backdrop\" data-state={this.isOpen ? 'opened' : 'closed'} onClick={() => this.closeModal()}></div>\n        {this.isOpen && (\n          <div class=\"modal-container\" tabIndex={-1} role=\"dialog\" aria-labelledby=\"dialog1Title\" aria-describedby=\"dialog1Desc\">\n            <ir-icon id=\"close\" class=\"dialog-close-button\" onIconClickHandler={() => this.closeModal()}>\n              <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 384 512\" height={18} width={18}>\n                <path\n                  fill=\"#104064\"\n                  class=\"currentColor\"\n                  d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\"\n                />\n              </svg>\n            </ir-icon>\n            <div class={'modal-title'} id=\"dialog1Title\">\n              <slot name=\"modal-title\"></slot>\n            </div>\n            <div class=\"modal-body\" id=\"dialog1Desc\">\n              <slot name=\"modal-body\"></slot>\n            </div>\n            <div class=\"modal-footer\">\n              <slot name=\"modal-footer\"></slot>\n            </div>\n          </div>\n        )}\n      </Host>\n    );\n  }\n}\n","/* Existing styles */\n\n/* New styles for the overlay dropdown */\n.dropdown-menu {\n  z-index: 1000;\n  width: 100%;\n  max-height: 300px;\n  overflow-y: auto;\n}\n\n.dropdown.nav-item.show .dropdown-menu {\n  display: block; /* display the dropdown when the parent has the \"show\" class */\n}\n.caret-icon {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-55%);\n  right: 0.25rem;\n  z-index: 99999;\n}\n.dropdown-trigger {\n  position: relative;\n}\n.caret-icon.disabled {\n  opacity: 0.5 !important;\n  pointer-events: none !important;\n  cursor: not-allowed !important;\n}\n","import { Component, Prop, State, h, Event, EventEmitter, Host, Element, Listen, Watch } from '@stencil/core';\n\nexport type DropdownItem = {\n  value: string | number;\n};\n\n@Component({\n  tag: 'ir-dropdown',\n  styleUrl: 'ir-dropdown.css',\n  scoped: true,\n})\nexport class IrDropdown {\n  @Element() el: HTMLIrDropdownElement;\n\n  @Prop({ reflect: true, mutable: true }) value: DropdownItem['value'];\n\n  @Prop({ reflect: true, mutable: true }) disabled: boolean = false;\n\n  @State() isOpen: boolean = false;\n  @State() selectedOption: DropdownItem['value'];\n  @State() focusedIndex: number = -1;\n  @State() itemChildren: HTMLIrDropdownItemElement[] = [];\n\n  private mo: MutationObserver | null = null;\n  private documentClickHandler: (event: Event) => void;\n  private isComponentConnected: boolean = true;\n  private updateQueued: boolean = false;\n\n  /**\n   * Emitted when a user selects an option from the combobox.\n   * The event payload contains the selected `DropdownItem` object.\n   */\n  @Event() optionChange: EventEmitter<DropdownItem['value']>;\n\n  componentWillLoad() {\n    this.selectedOption = this.value;\n    this.documentClickHandler = this.handleDocumentClick.bind(this);\n    this.collectItemChildren();\n\n    // Optimized mutation observer with debouncing\n    this.mo = new MutationObserver(() => {\n      if (!this.updateQueued) {\n        this.updateQueued = true;\n        requestAnimationFrame(() => {\n          if (this.isComponentConnected) {\n            this.collectItemChildren();\n            this.updateQueued = false;\n          }\n        });\n      }\n    });\n    this.mo.observe(this.el, { childList: true, subtree: true });\n  }\n\n  componentDidLoad() {\n    document.addEventListener('click', this.documentClickHandler, { passive: true });\n\n    // Single RAF call instead of multiple setTimeouts\n    requestAnimationFrame(() => {\n      if (this.isComponentConnected) {\n        this.updateItemElements();\n        if (this.value) {\n          this.updateDropdownItemValue(this.value);\n        }\n      }\n    });\n  }\n\n  disconnectedCallback() {\n    this.isComponentConnected = false;\n    document.removeEventListener('click', this.documentClickHandler);\n    this.mo?.disconnect();\n    this.mo = null;\n  }\n\n  @Listen('keydown', { target: 'document' })\n  handleDocumentKeyDown(event: KeyboardEvent) {\n    if (!this.isOpen || !this.isComponentConnected) return;\n\n    if (event.key === 'Escape') {\n      this.closeDropdown();\n    }\n  }\n\n  @Listen('dropdownItemSelect')\n  handleDropdownItemSelect(ev: CustomEvent<DropdownItem['value']>) {\n    if (!this.isComponentConnected) return;\n\n    ev.stopPropagation();\n    this.selectOption(ev.detail);\n    (ev.target as HTMLIrDropdownItemElement).setAttribute('aria-selected', 'true');\n  }\n\n  @Listen('dropdownItemRegister')\n  handleDropdownItemRegister() {\n    if (!this.isComponentConnected) return;\n    this.collectItemChildren();\n  }\n\n  @Listen('dropdownItemUnregister')\n  handleDropdownItemUnregister() {\n    if (!this.isComponentConnected) return;\n    this.collectItemChildren();\n  }\n\n  @Watch('value')\n  handleValueChange(newValue: DropdownItem['value'], oldValue: DropdownItem['value']) {\n    if (newValue !== oldValue && this.isComponentConnected) {\n      this.updateDropdownItemValue(newValue);\n    }\n  }\n\n  private updateDropdownItemValue(value: DropdownItem['value']) {\n    // Clear previous selections immediately\n    this.itemChildren.forEach(el => el.removeAttribute('aria-selected'));\n\n    // Set new selection\n    const el = this.itemChildren.find(el => el.value === value);\n    if (el) {\n      el.setAttribute('aria-selected', 'true');\n    }\n  }\n\n  private getSelectedItemIndex(): number {\n    if (!this.value) return -1;\n    return this.itemChildren.findIndex(item => item.value === this.value);\n  }\n\n  private openDropdown() {\n    try {\n      this.isOpen = true;\n      // Initialize focus to the currently selected item\n      this.focusedIndex = this.getSelectedItemIndex();\n      // Immediate update instead of setTimeout\n      this.updateItemElements();\n\n      // Auto-scroll to selected item if it exists\n      if (this.focusedIndex >= 0) {\n        requestAnimationFrame(() => {\n          this.scrollToSelectedItem();\n        });\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  private closeDropdown() {\n    this.isOpen = false;\n    this.focusedIndex = -1;\n    this.removeItemFocus();\n  }\n\n  private handleDocumentClick = (event: Event) => {\n    if (!this.isComponentConnected || !this.el.contains(event.target as Node)) {\n      this.closeDropdown();\n    }\n  };\n\n  private collectItemChildren() {\n    if (!this.isComponentConnected) return;\n\n    const items = Array.from(this.el.querySelectorAll('ir-dropdown-item')) as HTMLIrDropdownItemElement[];\n    this.itemChildren = items;\n\n    // Immediate update instead of setTimeout\n    this.updateItemElements();\n  }\n\n  private updateItemElements() {\n    if (!this.isComponentConnected) return;\n\n    // Use the collected item children directly\n    this.itemChildren.forEach((el, index) => {\n      el.setAttribute('data-slot-index', String(index));\n      el.setAttribute('role', 'option');\n      el.setAttribute('tabindex', '-1');\n    });\n  }\n\n  private removeItemFocus() {\n    this.itemChildren.forEach(element => {\n      element.classList.remove('focused', 'active');\n      // Don't remove aria-selected as it indicates selection, not focus\n    });\n  }\n\n  private focusItemElement(index: number) {\n    this.removeItemFocus();\n    if (index >= 0 && index < this.itemChildren.length) {\n      const element = this.itemChildren[index];\n      element.classList.add('focused');\n      element.scrollIntoView({ block: 'nearest', behavior: 'smooth' });\n    }\n  }\n\n  private selectItemElement(index: number) {\n    if (index >= 0 && index < this.itemChildren.length) {\n      const element = this.itemChildren[index];\n      element.click();\n    }\n  }\n\n  private scrollToSelectedItem() {\n    if (this.focusedIndex >= 0 && this.focusedIndex < this.itemChildren.length) {\n      const selectedElement = this.itemChildren[this.focusedIndex];\n      if (selectedElement) {\n        selectedElement.scrollIntoView({\n          block: 'nearest',\n          behavior: 'smooth',\n          inline: 'nearest',\n        });\n      }\n    }\n  }\n\n  private handleKeyDown = (event: KeyboardEvent) => {\n    if (!this.isComponentConnected || this.disabled) return;\n\n    const maxIndex = this.itemChildren.length - 1;\n\n    switch (event.key) {\n      case 'ArrowDown':\n        event.preventDefault();\n        if (!this.isOpen) {\n          this.openDropdown();\n          // After opening, if we have a selection, start from next item\n          if (this.focusedIndex >= 0 && this.focusedIndex < maxIndex) {\n            this.focusedIndex++;\n            this.focusItemElement(this.focusedIndex);\n          } else if (this.focusedIndex === -1) {\n            // No selection, start from first item\n            this.focusedIndex = 0;\n            this.focusItemElement(this.focusedIndex);\n          } else if (this.focusedIndex === maxIndex) {\n            // At last item, wrap to first\n            this.focusedIndex = 0;\n            this.focusItemElement(this.focusedIndex);\n          }\n        } else if (maxIndex >= 0) {\n          this.focusedIndex = this.focusedIndex < maxIndex ? this.focusedIndex + 1 : 0;\n          this.focusItemElement(this.focusedIndex);\n        }\n        break;\n\n      case 'ArrowUp':\n        event.preventDefault();\n        if (!this.isOpen) {\n          this.openDropdown();\n          // After opening, if we have a selection, start from previous item\n          if (this.focusedIndex > 0) {\n            this.focusedIndex--;\n            this.focusItemElement(this.focusedIndex);\n          } else if (this.focusedIndex === -1) {\n            // No selection, start from last item\n            this.focusedIndex = maxIndex;\n            this.focusItemElement(this.focusedIndex);\n          } else if (this.focusedIndex === 0) {\n            // At first item, wrap to last\n            this.focusedIndex = maxIndex;\n            this.focusItemElement(this.focusedIndex);\n          }\n        } else if (maxIndex >= 0) {\n          this.focusedIndex = this.focusedIndex > 0 ? this.focusedIndex - 1 : maxIndex;\n          this.focusItemElement(this.focusedIndex);\n        }\n        break;\n\n      case 'Enter':\n        event.preventDefault();\n        if (this.isOpen && this.focusedIndex >= 0) {\n          this.selectItemElement(this.focusedIndex);\n        } else if (!this.isOpen) {\n          this.openDropdown();\n        }\n        break;\n\n      case 'Escape':\n        event.preventDefault();\n        this.closeDropdown();\n        break;\n\n      case 'Tab':\n        if (this.isOpen) {\n          this.closeDropdown();\n        }\n        break;\n    }\n  };\n\n  private selectOption(option: DropdownItem['value']) {\n    this.selectedOption = option;\n    this.value = option;\n    this.optionChange.emit(option);\n    this.closeDropdown();\n  }\n\n  render() {\n    return (\n      <Host class={`dropdown ${this.isOpen ? 'show' : ''}`}>\n        <div\n          onClick={() => {\n            if (this.disabled) return;\n            if (this.isOpen) {\n              this.closeDropdown();\n            } else {\n              this.openDropdown();\n            }\n          }}\n          aria-disabled={String(this.disabled)}\n          class={`dropdown-trigger ${this.disabled ? 'disabled' : ''}`}\n          onKeyDown={this.handleKeyDown}\n          tabindex=\"0\"\n        >\n          <slot name=\"trigger\"></slot>\n          <div class={`caret-icon ${this.disabled ? 'disabled' : ''}`}>\n            <ir-icons name={!this.isOpen ? 'angle-down' : 'angle-up'}></ir-icons>\n          </div>\n        </div>\n        <div class=\"dropdown-menu\" role=\"listbox\" aria-expanded={this.isOpen.toString()}>\n          <slot></slot>\n        </div>\n      </Host>\n    );\n  }\n}\n","/* ir-m-combobox-item.css */\n:host {\n  display: block;\n  cursor: pointer;\n}\n:host([hidden]) {\n  display: none !important;\n}\n:host(.focused) {\n  background: #f4f5fa !important;\n}\n:host(.active),\n:host([aria-selected='true']),\n:host:active {\n  /* keep in sync with your combobox .dropdown-item.active styles */\n  outline: none;\n  background-color: var(--blue, #1e9ff2) !important;\n  color: white !important;\n}\n:host(.dropdown-item) {\n  padding: 0.25rem 1rem !important;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n","import { Component, Element, Event, EventEmitter, Host, Method, Prop, h } from '@stencil/core';\nimport { DropdownItem } from '../ir-dropdown/ir-dropdown';\n\n@Component({\n  tag: 'ir-dropdown-item',\n  styleUrl: 'ir-dropdown-item.css',\n  scoped: true,\n})\nexport class IrDropdownItem {\n  @Element() el: HTMLIrDropdownItemElement;\n\n  private isComponentConnected: boolean = true;\n  private hasRegistered: boolean = false;\n\n  /**\n   * Required value for the option\n   */\n  @Prop() value!: string;\n\n  /**\n   * Optional label (falls back to textContent)\n   */\n  @Prop() label?: string;\n\n  /**\n   * Optional html_content (when you want rich content);\n   * If omitted, the component will render its own slot content.\n   */\n  @Prop() html_content?: string;\n\n  /**\n   * When true, visually hide the item (used for filtering).\n   */\n  @Prop({ mutable: true, reflect: true }) hidden: boolean = false;\n\n  /**\n   * Emit when this item is chosen. Parent listens and closes dropdown.\n   */\n  @Event({ eventName: 'dropdownItemSelect' }) dropdownItemSelect: EventEmitter<DropdownItem['value']>;\n\n  /**\n   * Inform the parent this item exists (parent will index and manage focus)\n   */\n  @Event({ eventName: 'dropdownItemRegister' }) dropdownItemRegister: EventEmitter<void>;\n\n  /**\n   * Inform the parent this item is gone\n   */\n  @Event({ eventName: 'dropdownItemUnregister' }) dropdownItemUnregister: EventEmitter<void>;\n\n  componentDidLoad() {\n    if (this.isComponentConnected && !this.hasRegistered) {\n      this.hasRegistered = true;\n      // Use RAF to ensure parent is ready\n      requestAnimationFrame(() => {\n        if (this.isComponentConnected) {\n          this.dropdownItemRegister.emit();\n        }\n      });\n    }\n  }\n\n  disconnectedCallback() {\n    this.isComponentConnected = false;\n\n    // Only emit unregister if we previously registered and parent might still be connected\n    if (this.hasRegistered && this.el.parentElement) {\n      // Check if parent dropdown still exists in DOM\n      const parentDropdown = this.el.closest('ir-dropdown');\n      if (parentDropdown && document.contains(parentDropdown)) {\n        this.dropdownItemUnregister.emit();\n      }\n    }\n    this.hasRegistered = false;\n  }\n\n  @Method()\n  async matchesQuery(query: string): Promise<boolean> {\n    if (!this.isComponentConnected) return false;\n\n    const q = query.toLowerCase();\n    const hay = (this.label ?? this.el.textContent ?? '').toLowerCase();\n    return hay.includes(q);\n  }\n\n  @Method()\n  async setHidden(next: boolean) {\n    if (this.isComponentConnected) {\n      this.hidden = next;\n    }\n  }\n\n  private handleClick = (event: Event) => {\n    event.stopPropagation();\n\n    if (!this.isComponentConnected) return;\n\n    this.dropdownItemSelect.emit(this.value);\n  };\n\n  render() {\n    return (\n      <Host role=\"option\" tabindex=\"-1\" aria-selected=\"false\" class={{ 'dropdown-item': true, 'hidden': this.hidden }} onClick={this.handleClick} data-value={this.value}>\n        {this.html_content ? <span innerHTML={this.html_content}></span> : <slot></slot>}\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n\n.beta {\n  background: var(--red);\n  color: white;\n  padding: 0.2rem 0.3rem;\n  font-size: 12px;\n  border-radius: 4px;\n  margin: 0;\n}\n.event-row {\n  padding-bottom: 0.5rem;\n}\n.list-title {\n  margin: 0;\n  padding: 0;\n  font-size: 14px;\n  font-weight: bold;\n  width: fit-content;\n}\n.list-item {\n  margin: 0;\n  padding: 0;\n  font-size: 14px;\n  margin-left: 5px;\n  width: fit-content;\n}\n.list-item.green {\n  color: #629a4c;\n  font-weight: 600;\n}\n.list-item.red {\n  color: #ff4961;\n  font-weight: 600;\n}\n.dates-row {\n  display: flex;\n  align-items: center;\n  gap: 0.875rem;\n}\n","import { isRequestPending } from '@/stores/ir-interceptor.store';\nimport { Component, Fragment, Prop, State, h } from '@stencil/core';\nimport locales from '@/stores/locales.store';\nimport { Booking, ExposedBookingEvent } from '@/models/booking.dto';\n\n@Component({\n  tag: 'ir-events-log',\n  styleUrl: 'ir-events-log.css',\n  scoped: true,\n})\nexport class IrEventsLog {\n  @Prop() bookingNumber: string;\n  @Prop() booking: Booking;\n\n  @State() bookingEvents: ExposedBookingEvent[];\n\n  componentWillLoad() {\n    this.init();\n  }\n\n  private async init() {\n    try {\n      this.bookingEvents = this.booking.events;\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  render() {\n    return (\n      <div class=\"p-1\">\n        <div class=\"d-flex  align-items-center\" style={{ gap: '0.5rem' }}>\n          <h3 class=\" text-left p-0 m-0  dialog-title \">{locales.entries.Lcz_EventsLog}</h3>\n          {/* <span class=\"m-0 beta\">Beta</span> */}\n        </div>\n\n        {isRequestPending('/Get_Exposed_Booking_Events') ? (\n          <div class={'d-flex align-items-center justify-content-center dialog-container-height'}>\n            <ir-spinner></ir-spinner>\n          </div>\n        ) : (\n          <Fragment>\n            <table class=\" dialog-container-height\">\n              <thead style={{ opacity: '0' }}>\n                <tr>\n                  <th>date</th>\n                  <th>user</th>\n                  <th>status</th>\n                </tr>\n              </thead>\n              <tbody>\n                {this.bookingEvents?.map(e => (\n                  <tr key={e.id} class=\"pb-1\">\n                    <td class=\"event-row dates-row\">\n                      <span>{e.date}</span>\n                      <span>\n                        {String(e.hour).padStart(2, '0')}:{String(e.minute).padStart(2, '0')}:{String(e.second).padStart(2, '0')}\n                      </span>\n                    </td>\n                    <td class=\"pl-3 event-row \">{e.type}</td>\n                    <td class=\"pl-1 event-row \">{e.user}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </Fragment>\n        )}\n      </div>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n.extra-service-container {\n  display: flex;\n  align-items: start;\n  justify-content: space-between;\n  gap: 0.5rem;\n}\n.extra-service-container * {\n  padding: 0;\n  margin: 0;\n  box-sizing: border-box;\n}\n.extra-service-actions {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.extra-service-conditional-date {\n  margin-top: 0.5rem;\n}\n.extra-service-price {\n  white-space: nowrap;\n}\n.extra-service-description {\n  word-break: break-all;\n}\n","import { Component, Event, EventEmitter, Host, Prop, h } from '@stencil/core';\nimport { ExtraService } from '@/models/booking.dto';\nimport { formatAmount } from '@/utils/utils';\nimport { colorVariants } from '@/components/ui/ir-icons/icons';\nimport locales from '@/stores/locales.store';\nimport moment from 'moment';\nimport { BookingService } from '@/services/booking.service';\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\n\n@Component({\n  tag: 'ir-extra-service',\n  styleUrl: 'ir-extra-service.css',\n  scoped: true,\n})\nexport class IrExtraService {\n  @Prop() service: ExtraService;\n  @Prop() bookingNumber: string;\n  @Prop() currencySymbol: string;\n\n  @Event() editExtraService: EventEmitter<ExtraService>;\n  @Event() resetBookingEvt: EventEmitter<null>;\n\n  private irModalRef: HTMLIrModalElement;\n  private bookingService = new BookingService();\n\n  private async deleteService() {\n    try {\n      await this.bookingService.doBookingExtraService({\n        service: this.service,\n        is_remove: true,\n        booking_nbr: this.bookingNumber,\n      });\n      this.resetBookingEvt.emit(null);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  render() {\n    return (\n      <Host>\n        <div class=\"p-1\">\n          <div class={'extra-service-container'}>\n            <p class=\"extra-service-description\">{this.service.description}</p>\n            <div class=\"extra-service-actions\">\n              {!!this.service.price && this.service.price > 0 && (\n                <p class=\"extra-service-price p-0 m-0 font-weight-bold\">{formatAmount(this.currencySymbol, this.service.price)}</p>\n              )}\n              <ir-button\n                id={`serviceEdit-${this.service.booking_system_id}`}\n                class=\"extra-service-edit-btn m-0 p-0\"\n                variant=\"icon\"\n                icon_name=\"edit\"\n                style={colorVariants.secondary}\n                onClickHandler={() => this.editExtraService.emit(this.service)}\n              ></ir-button>\n              <ir-button\n                class=\"extra-service-delete-btn m-0 p-0\"\n                variant=\"icon\"\n                onClickHandler={() => this.irModalRef.openModal()}\n                id={`roomDelete-${this.service.booking_system_id}`}\n                icon_name=\"trash\"\n                style={colorVariants.danger}\n              ></ir-button>\n            </div>\n          </div>\n          <div class=\"extra-service-conditional-date\">\n            {this.service.start_date && this.service.end_date ? (\n              <ir-date-view class=\"extra-service-date-view mr-1\" from_date={this.service.start_date} to_date={this.service.end_date} showDateDifference={false}></ir-date-view>\n            ) : (\n              this.service.start_date && <p class=\"extra-service-date-view\">{moment(new Date(this.service.start_date)).format('MMM DD, YYYY')}</p>\n            )}\n          </div>\n        </div>\n        <ir-modal\n          autoClose={false}\n          ref={el => (this.irModalRef = el)}\n          isLoading={isRequestPending('/Do_Booking_Extra_Service')}\n          onConfirmModal={this.deleteService.bind(this)}\n          iconAvailable={true}\n          icon=\"ft-alert-triangle danger h1\"\n          leftBtnText={locales.entries.Lcz_Cancel}\n          rightBtnText={locales.entries.Lcz_Delete}\n          leftBtnColor=\"secondary\"\n          rightBtnColor=\"danger\"\n          modalTitle={locales.entries.Lcz_Confirmation}\n          modalBody={`${locales.entries['Lcz_AreYouSureDoYouWantToRemove ']} ${locales.entries.Lcz_ThisService} ${locales.entries.Lcz_FromThisBooking}`}\n        ></ir-modal>\n      </Host>\n    );\n  }\n}\n","import { z, ZodError, ZodIssueCode } from 'zod';\nimport { IAllowedOptions, ICurrency, IPickupCurrency } from './calendarData';\nimport { TSourceOption } from './igl-book-property';\nimport { ICountry } from './IBooking';\nimport moment from 'moment';\nimport { IHouseKeepers } from './housekeeping';\n\ninterface IDType {\n  code: string;\n  description: string;\n}\n\ninterface IDInfo {\n  type: IDType;\n  number: string;\n}\n\nexport interface SharedPerson {\n  address: null;\n  alternative_email: null;\n  cci: null;\n  city: null;\n  country: ICountry;\n  country_id: string;\n  country_phone_prefix: null;\n  dob: string;\n  email: null;\n  first_name: string;\n  full_name: string;\n  id: number;\n  id_info: IDInfo;\n  is_main?: boolean;\n  last_name: string;\n  mobile: null;\n  nbr_confirmed_bookings: number;\n  notes: null;\n  password: null;\n  subscribe_to_news_letter: null;\n}\n// export const ZIdInfo = z.object({\n//   type: z.object({\n//     code: z.string().min(3),\n//     description: z.string(),\n//   }),\n//   number: z.string().min(2),\n// });\n// export const ZSharedPerson = z.object({\n//   id: z.number(),\n//   full_name: z.string().min(2),\n//   country_id: z.coerce.number().min(0),\n//   dob: z.coerce.date().transform(date => moment(date).format('YYYY-MM-DD')),\n//   id_info: ZIdInfo,\n// });\n\n/**\n * ZIdInfo schema:\n * - `type.code`: Validates a non-empty string must be at least 3 chars.\n *   If empty string or not provided, validation is skipped.\n * - `type.description`: Same pattern for description (but no min length).\n * - `number`: Validates if non-empty string it should be at least 2 chars.\n */\nexport const ZIdInfo = z.object({\n  type: z.object({\n    code: z\n      .union([\n        // If provided and non-empty, must have at least 3 chars\n        z.string().min(3),\n        // or it can be an empty string\n        z.literal(''),\n      ])\n      .optional(), // or undefined\n    description: z\n      .union([\n        // If provided and non-empty, no special min\n        z.string(),\n        // or it can be empty string\n        z.literal(''),\n      ])\n      .optional(),\n  }),\n  number: z\n    .union([\n      // If provided and non-empty, must have at least 2 chars\n      z.string().min(2),\n      // or it can be empty string\n      z.literal(''),\n    ])\n    .optional()\n    .nullable(),\n});\n\n/**\n * ZSharedPerson schema:\n * - `id`: Optional numeric field.\n * - `full_name`: If provided and non-empty, must be at least 2 chars.\n * - `country_id`: If provided, coerced to number, must be >= 0.\n * - `dob`: If provided, coerced to Date and formatted. Otherwise skipped.\n * - `id_info`: The nested object above; can also be omitted entirely.\n */\nexport const ZSharedPerson = z.object({\n  id: z.number().optional(),\n  // full_name: z\n  //   .union([\n  //     z.string().min(2), // if provided and non-empty, must have min length 2\n  //     z.literal(''), // or it can be empty string\n  //   ])\n  //   .optional(),\n  first_name: z\n    .union([\n      z.string().min(2), // if provided and non-empty, must have min length 2\n      z.literal(''), // or it can be empty string\n    ])\n    .optional(),\n  // .nullable(),\n  last_name: z\n    .union([\n      z.string().min(2), // if provided and non-empty, must have min length 2\n      z.literal(''), // or it can be empty string\n    ])\n    .optional(),\n  // .nullable(),\n  country_id: z.coerce\n    .number()\n    .min(0) // if provided, must be >= 0\n    .optional(),\n  dob: z\n    .string()\n    .nullable()\n    .optional()\n    .refine(value => value === undefined || moment(value, 'DD/MM/YYYY', true).isValid() || value === '' || value === null, 'Invalid date format')\n    .transform(value => {\n      if (value === undefined || value === '' || value === null) return null;\n      const isDDMMYYYY = moment(value, 'DD/MM/YYYY', true).isValid();\n      return isDDMMYYYY ? null : moment(value, 'DD/MM/YYYY').format('YYYY-MM-DD');\n    }),\n  id_info: ZIdInfo.optional(),\n  is_main: z.boolean().default(false),\n});\n\n// export const ZSharedPersons = z.array(ZSharedPerson).superRefine((data, ctx) => {\n//   for (const d of data) {\n//     validateSharedPerson(d, ctx);\n//   }\n// });\n\nexport function validateSharedPerson(data: any) {\n  ZSharedPerson.parse(data);\n  const hasValue = (field: string | null | undefined): boolean => {\n    return field !== null && field !== undefined && field.trim() !== '';\n  };\n  const ctx = [];\n  if (data.is_main) {\n    if (!hasValue(data.first_name)) {\n      ctx.push({\n        path: ['first_name'],\n        code: ZodIssueCode.custom,\n        message: 'First name is required for main guest',\n      });\n    }\n\n    if (!hasValue(data.last_name)) {\n      ctx.push({\n        path: ['last_name'],\n        code: ZodIssueCode.custom,\n        message: 'Last name is required for main guest',\n      });\n    }\n  }\n\n  // For non-main guests: check if ANY field has data\n  const hasAnyFieldData =\n    hasValue(data.first_name) ||\n    hasValue(data.last_name) ||\n    hasValue(data.dob) ||\n    (data.country_id !== null && data.country_id !== undefined && data.country_id > 0) ||\n    hasValue(data.id_info?.number);\n\n  // If any field has data, then first_name and last_name become required\n  if (hasAnyFieldData) {\n    if (!hasValue(data.first_name)) {\n      ctx.push({\n        path: ['first_name'],\n        code: ZodIssueCode.custom,\n        message: 'First name is required when other guest information is provided',\n      });\n    }\n\n    if (!hasValue(data.last_name)) {\n      ctx.push({\n        path: ['last_name'],\n        code: ZodIssueCode.custom,\n        message: 'Last name is required when other guest information is provided',\n      });\n    }\n  }\n  if (ctx.length >= 1) {\n    throw new ZodError(ctx);\n  }\n}\nexport interface HandleExposedRoomGuestsRequest {\n  booking_nbr: string;\n  identifier: string;\n  guests: SharedPerson[];\n}\nexport interface OtaGuarantee {\n  card_number: string;\n  card_type: string;\n  cardholder_name: string;\n  cvv: string;\n  expiration_date: string;\n  is_virtual: boolean;\n  meta: Meta;\n  token: string;\n}\n\ninterface Meta {\n  virtual_card_currency_code: string;\n  virtual_card_current_balance: string;\n  virtual_card_decimal_places: string;\n  virtual_card_effective_date: string;\n  virtual_card_expiration_date: string;\n}\nexport interface OtaService {\n  name: string;\n  nights: number;\n  persons: number;\n  price_mode: string;\n  price_per_unit: number;\n  total_price: number;\n}\nexport interface ExposedBookingEvent {\n  date: string;\n  hour: number;\n  id: number;\n  minute: number;\n  second: number;\n  user: string;\n  type: string;\n}\n\nexport type OTAManipulations = {\n  user: string;\n  date: string;\n  hour: string;\n  minute: string;\n};\n\nexport type BypassedOtaRevisions = {\n  revision_nbr: number;\n  date: string;\n  revision_type: string;\n};\nexport interface Booking {\n  agent: {\n    code: string;\n    id: number;\n    name: string;\n    verification_mode: null;\n  } | null;\n  events: ExposedBookingEvent[];\n  ota_manipulations: OTAManipulations[];\n  bypassed_ota_revisions: BypassedOtaRevisions[];\n  ota_services: OtaService[];\n  is_requested_to_cancel: boolean;\n  arrival: Arrival;\n  allowed_actions: IAllowedActions[];\n  system_id: number;\n  booked_on: DateTime;\n  booking_nbr: string;\n  currency: Currency;\n  extra_services: ExtraService[] | null;\n  from_date: string;\n  guest: Guest;\n  extras: Extras[] | null;\n  occupancy: Occupancy;\n  origin: Origin;\n  ota_guarante: OtaGuarantee;\n  property: Property;\n  remark: string;\n  ota_notes: IOtaNotes[];\n  rooms: Room[];\n  source: Source;\n  status: Status;\n  to_date: string;\n  total: number;\n  is_editable: boolean;\n  format: IFormat;\n  channel_booking_nbr: string | null;\n  is_direct: boolean;\n  financial: IFinancial;\n  pickup_info: IBookingPickupInfo | null;\n  cost: number | null;\n  is_pms_enabled: boolean;\n  promo_key: string | null;\n  is_in_loyalty_mode: boolean;\n}\n\nexport const ExtraServiceSchema = z.object({\n  booking_system_id: z.number().optional(),\n  cost: z.coerce.number().nullable(),\n  currency_id: z.number().min(1),\n  description: z.string().min(1),\n  end_date: z.string().nullable(),\n  price: z.coerce.number(),\n  start_date: z.string().nullable(),\n  system_id: z.number().optional(),\n});\n\nexport type ExtraService = z.infer<typeof ExtraServiceSchema>;\nexport interface Extras {\n  key: string;\n  value: any;\n}\nexport interface IOtaNotes {\n  statement: string;\n}\nexport interface IBookingPickupInfo {\n  currency: IPickupCurrency;\n  date: string;\n  details: string;\n  hour: number;\n  minute: number;\n  nbr_of_units: number;\n  selected_option: IAllowedOptions;\n  total: number;\n}\nexport interface IAllowedActions {\n  code: string;\n  description: string;\n}\nexport interface IFinancial {\n  cancelation_penality_as_if_today: number;\n  due_amount: number;\n  due_dates: IDueDate[];\n  payments: IPayment[] | null;\n  total_amount: number;\n  collected: number;\n  gross_total: number;\n  gross_cost: number;\n  invoice_nbr: string;\n  gross_total_with_extras: number;\n}\nexport interface IPayment {\n  id: number | null;\n  date: string;\n  amount: number;\n  currency: ICurrency;\n  designation: string;\n  reference: string;\n  book_nbr?: string;\n  payment_gateway_code?: number;\n  payment_type?: PaymentType;\n  payment_method?: PaymentType;\n  time_stamp: {\n    date: string;\n    hour: number;\n    minute: number;\n    second: number;\n    user: string;\n  };\n}\n\ninterface PaymentType {\n  code: string;\n  description: string;\n  operation: string;\n}\n\nexport interface IDueDate {\n  amount: number;\n  currencysymbol: string;\n  date: string;\n  description: string;\n  room: string;\n}\nexport interface IFormat {\n  from_date: string;\n  to_date: string;\n}\nexport interface Arrival {\n  code: string;\n  description: string;\n}\n\nexport interface DateTime {\n  date: string;\n  hour: number;\n  minute: number;\n}\n\nexport interface Currency {\n  code: string;\n  id: number;\n  symbol: string;\n}\n\nexport interface Guest {\n  address: string | null;\n  city: string | null;\n  country_id: number | null;\n  dob: string | null;\n  email: string | null;\n  first_name: string;\n  id: number;\n  last_name: string | null;\n  mobile: string | null;\n  country_phone_prefix: string | null;\n  subscribe_to_news_letter: boolean | null;\n  cci?: ICCI | null;\n  alternative_email?: string;\n  nbr_confirmed_bookings: number;\n  notes: string;\n  mobile_without_prefix: string;\n}\nexport interface ICCI {\n  nbr: string | number;\n  holder_name: string | number;\n  expiry_month: string | number;\n  expiry_year: string | number;\n  cvc?: string | null;\n}\nexport interface Occupancy {\n  adult_nbr: number;\n  children_nbr: number;\n  infant_nbr: number | null;\n}\nexport interface DoReservationProps {\n  assign_units: boolean;\n  check_in: boolean;\n  is_pms: boolean;\n  is_direct: boolean;\n  is_in_loyalty_mode: boolean;\n  promo_key: string | null;\n  extras: any; // Assuming extras can have any structure, replace with a specific type if known\n  booking: {\n    from_date: string; // Format 'YYYY-MM-DD'\n    to_date: string; // Format 'YYYY-MM-DD'\n    remark: string | null;\n    booking_nbr: string;\n    property: {\n      id: string | number;\n    };\n    booked_on: {\n      date: string; // Format 'YYYY-MM-DD'\n      hour: number;\n      minute: number;\n    };\n    source: TSourceOption;\n    rooms: Room[]; // Assuming rooms are defined in the imported `Room` type\n    currency: string;\n    arrival: {\n      code: string;\n    };\n    guest: {\n      email: string | null;\n      first_name: string;\n      last_name: string;\n      country_id: string | number | null;\n      city: string | null;\n      mobile: string;\n      phone_prefix: string | null;\n      address: string;\n      dob: string | null;\n      subscribe_to_news_letter: boolean;\n      cci: {\n        nbr: string;\n        holder_name: string;\n        expiry_month: string;\n        expiry_year: string;\n      } | null;\n    };\n  };\n  pickup_info: any | null; // Assuming it can be any structure, replace if specific type is available\n}\nexport interface Origin {\n  Icon: string;\n  Label: string;\n}\n\nexport interface Property {\n  calendar_legends: null;\n  currency: null;\n  id: number;\n  name: string;\n  roomtypes: null;\n}\nexport type DepartureTime = {\n  code: string;\n  description: string;\n};\nexport interface ExposedApplicablePolicy {\n  brackets: Bracket[];\n  combined_statement: string;\n  type: 'cancelation' | 'guarantee';\n}\n\nexport interface Bracket {\n  amount: number;\n  amount_formatted: string;\n  code: string;\n  currency_id: number;\n  due_on: string;\n  due_on_formatted: null | string;\n  gross_amount: number;\n  gross_amount_formatted: string;\n  statement: string;\n}\nexport type RoomInOut = { code: '001' | '002' | '000'; description: string };\nexport interface Room {\n  days: Day[];\n  applicable_policies: ExposedApplicablePolicy[];\n  from_date: string;\n  guest: Guest;\n  occupancy_default: number;\n  notes: string | null;\n  occupancy: Occupancy;\n  physicalroom: null;\n  in_out: RoomInOut | null;\n  sharing_persons: SharedPerson[] | null;\n  bed_preference: number | null;\n  rateplan: RatePlan;\n  roomtype: RoomType;\n  departure_time: DepartureTime;\n  to_date: string;\n  total: number;\n  smoking_option: string;\n  identifier: string;\n  unit: string | number | IUnit | null;\n  ota_taxes: IOtaTax[];\n  ota_meta: OtaMeta;\n\n  cost: number | null;\n  gross_cost: number;\n  gross_total: number;\n  guarantee: number;\n  gross_guarantee: number;\n}\ninterface OtaMeta {\n  bed_preferences: string | null;\n  meal_plan: string | null;\n  parent_rate_plan_id: string | null;\n  policies: string | null;\n  smoking_preferences: string | null;\n}\nexport interface IOtaTax {\n  amount: number;\n  currency: IOtaTaxCurrency;\n  is_exlusive: boolean;\n  name: string;\n}\nexport interface IOtaTaxCurrency {\n  code: string;\n  id: number;\n  symbol: string;\n}\nexport interface IUnit {\n  calendar_cell: null;\n  id: 2;\n  name: '402';\n}\nexport interface Day {\n  amount: number;\n  date: string;\n  cost: number | null;\n}\n\nexport interface RatePlan {\n  cancelation: string | null;\n  guarantee: null;\n  id: number;\n  name: string;\n  rate_restrictions: null;\n  variations: null;\n  selected_variation: IVariations;\n  is_non_refundable: boolean;\n  custom_text: string | null;\n  is_active: boolean;\n  short_name: string;\n}\nexport interface IVariations {\n  adult_child_offering: string;\n  adult_nbr: number;\n  amount: number | null;\n  child_nbr: number;\n}\nexport interface RoomType {\n  availabilities: null;\n  id: number;\n  inventory: number;\n  name: string;\n  physicalrooms: PhysicalRoom[];\n  rate: number;\n  rateplans: null;\n  is_active: boolean;\n}\nexport type RoomHkStatus = '001' | '002' | '003' | '004';\nexport interface PhysicalRoom {\n  calendar_cell: null;\n  housekeeper: IHouseKeepers;\n  id: number;\n  is_active: boolean;\n  name: string;\n  hk_status: RoomHkStatus;\n}\n\nexport interface Source {\n  code: string | null;\n  description: string;\n  tag: string | null;\n}\n\nexport interface Status {\n  code: string;\n  description: string;\n}\n\nexport interface IPmsLog {\n  is_acknowledged: boolean;\n  is_sent: boolean;\n  sent_date: string;\n  sent_hour: number;\n  sent_minute: number;\n}\n",":host {\n  display: block;\n  --ir-input-border-color: #cacfe7;\n}\n\n:host .input-group-text {\n  border-color: var(--ir-input-border-color);\n}\n/* .hidden-date-picker.hidden-dates .date-range-input {\n  opacity: 0;\n} */\n.currency-ph {\n  padding: 0;\n  margin: 0;\n  color: #3b4781;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0 0 0 0.25rem;\n  border-top: 1px solid var(--ir-input-border-color);\n  border-bottom: 1px solid var(--ir-input-border-color);\n  border-left: 1px solid transparent;\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\n}\n\n.service-description-input {\n  height: 70px !important;\n}\n\n.service-description .input-group-prepend {\n  background-color: #f4f5fa;\n  border: 1px solid var(--ir-input-border-color);\n  border-top-left-radius: 0.25rem;\n  border-bottom-left-radius: 0.25rem;\n}\n.service-date-container {\n  padding: 0;\n  margin: 0;\n  display: flex;\n  align-items: center;\n  position: relative;\n  width: 100%;\n  justify-content: center;\n}\n.service-date-container .btn-container {\n  position: absolute;\n  right: 5px;\n  margin: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0;\n}\n.service-description .input-group-text {\n  height: fit-content;\n  border: 0;\n  padding-top: 0.75rem !important;\n}\n\n.price-input-group:focus-within .currency-ph,\n.cost-input-group:focus-within .currency-ph {\n  border-top: 1px solid #1e9ff2;\n  border-bottom: 1px solid #1e9ff2;\n  border-left: 1px solid #1e9ff2;\n}\n.currency-ph[data-state='error'] {\n  border-color: var(--red, #ff4961);\n}\n.price-input:focus {\n  border-right-width: 1px !important;\n}\n\n.is-invalid {\n  background-image: none !important;\n}\n.price-input,\n.cost-input {\n  border-left: 0;\n}\n\n.row-group {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\n@media (min-width: 640px) {\n  .row-group {\n    flex-direction: row;\n    align-items: center;\n    gap: 0;\n  }\n  .cost-label {\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n    border-left: 0;\n  }\n  .until-prepend,\n  .cost-input-placeholder {\n    border-top-left-radius: 0 !important;\n    border-bottom-left-radius: 0 !important;\n  }\n  .date-from,\n  .price-input {\n    border-right-width: 0 !important;\n    border-top-right-radius: 0 !important;\n    border-bottom-right-radius: 0 !important;\n  }\n}\n\n.date-focused {\n  border-color: #1e9ff2;\n}\n",":host {\n  height: 100%;\n}\n.sheet-container {\n  display: flex !important;\n  flex-direction: column !important;\n  background: white;\n  height: 100vh;\n  gap: 1rem;\n  z-index: 1000;\n}\n.sheet-container {\n  height: -webkit-fill-available;\n  height: 100vh;\n  height: 100dvh;\n}\n\n/* @supports (height: 100svh) {\n  .sheet-container {\n    height: 100svh;\n  }\n} */\n.sheet-footer {\n  position: sticky;\n  bottom: 0;\n  z-index: 20;\n  background: white;\n  border-top: 1px solid #e4e5ec;\n  display: flex;\n  flex-direction: column;\n  padding: 1rem;\n  gap: 0.5rem;\n}\n.sheet-header {\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  background: white;\n}\n.sheet-body {\n  flex: 1 1 0%;\n}\n/* @media (max-width: 767px) {\n  .sheet-footer {\n    bottom: env(safe-area-inset-bottom);\n  }\n} */\n@media (min-width: 768px) {\n  .sheet-footer {\n    flex-direction: row;\n    align-items: center;\n  }\n}\n","import { Booking, ExtraService, ExtraServiceSchema } from '@/models/booking.dto';\nimport { BookingService } from '@/services/booking.service';\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\nimport locales from '@/stores/locales.store';\nimport { Component, Event, EventEmitter, Prop, State, h } from '@stencil/core';\nimport { ZodError } from 'zod';\nimport { _formatDate } from '../../functions';\n\n@Component({\n  tag: 'ir-extra-service-config',\n  styleUrls: ['ir-extra-service-config.css', '../../../../common/sheet.css'],\n  scoped: true,\n})\nexport class IrExtraServiceConfig {\n  @Prop() booking: Pick<Booking, 'from_date' | 'to_date' | 'currency' | 'booking_nbr'>;\n  @Prop() service: ExtraService;\n\n  @State() s_service: ExtraService;\n  @State() error: boolean;\n  @State() fromDateClicked: boolean;\n  @State() toDateClicked: boolean;\n\n  @Event() closeModal: EventEmitter<null>;\n  @Event() resetBookingEvt: EventEmitter<null>;\n\n  private bookingService = new BookingService();\n  // private d1: HTMLDivElement;\n  // private d1_0: HTMLDivElement;\n  // private d2_0: HTMLDivElement;\n  // private d2: HTMLInputElement;\n\n  componentWillLoad() {\n    if (this.service) {\n      this.s_service = { ...this.service };\n    }\n  }\n\n  private async saveAmenity() {\n    try {\n      ExtraServiceSchema.parse(this.s_service);\n      await this.bookingService.doBookingExtraService({\n        service: this.s_service,\n        booking_nbr: this.booking.booking_nbr,\n        is_remove: false,\n      });\n      this.resetBookingEvt.emit(null);\n      this.closeModal.emit(null);\n    } catch (error) {\n      if (error instanceof ZodError) {\n        this.error = true;\n      }\n      console.error(error);\n    }\n  }\n  private updateService(params: Partial<ExtraService>) {\n    let prevService: ExtraService = this.s_service;\n    if (!prevService) {\n      prevService = {\n        cost: null,\n        description: null,\n        end_date: null,\n        start_date: null,\n        price: null,\n        currency_id: this.booking.currency.id,\n      };\n    }\n    this.s_service = { ...prevService, ...params };\n  }\n  private validatePrice(): boolean {\n    if (this.s_service?.price === undefined || this.s_service?.price?.toString() === '') {\n      return false;\n    }\n    const priceSchema = ExtraServiceSchema.pick({ price: true });\n    const result = priceSchema.safeParse({ price: this.s_service?.price });\n    return result.success;\n  }\n  render() {\n    return (\n      <form\n        class={'sheet-container'}\n        onSubmit={async e => {\n          e.preventDefault();\n          await this.saveAmenity();\n        }}\n      >\n        <ir-title class=\"px-1 sheet-header\" onCloseSideBar={() => this.closeModal.emit(null)} label={locales.entries.Lcz_ExtraServices} displayContext=\"sidebar\"></ir-title>\n        <section class={'px-1 sheet-body'}>\n          {/* Description */}\n          <fieldset class=\"input-group mb-1 service-description\">\n            <div class=\"input-group-prepend\">\n              <span class=\"input-group-text\">{locales.entries.Lcz_Description}</span>\n            </div>\n            <textarea\n              value={this.s_service?.description}\n              class={`form-control service-description-input ${this.error && !this.s_service?.description ? 'is-invalid' : ''}`}\n              style={{ height: '7rem' }}\n              maxLength={250}\n              onChange={e => this.updateService({ description: (e.target as HTMLTextAreaElement).value })}\n              aria-label=\"Amenity description\"\n            ></textarea>\n          </fieldset>\n          {/* Dates */}\n          <div class={'row-group mb-1'}>\n            <div class=\"input-group\">\n              <div class=\"input-group-prepend\">\n                <span class=\"input-group-text\" id=\"basic-addon1\">\n                  {locales.entries.Lcz_DatesOn}\n                </span>\n              </div>\n              <div\n                // ref={el => (this.d1_0 = el)}\n                class=\"form-control p-0 m-0 d-flex align-items-center justify-content-center date-from\"\n              >\n                <div class=\"service-date-container\">\n                  <ir-date-picker\n                    // onDatePickerFocus={() => {\n                    //   this.d1?.classList.add('date-focused');\n                    //   this.d1_0?.classList.add('date-focused');\n                    // }}\n                    // onDatePickerBlur={() => {\n                    //   this.d1?.classList.remove('date-focused');\n                    //   this.d1_0?.classList.remove('date-focused');\n                    // }}\n                    // customPicker\n                    emitEmptyDate\n                    date={this.s_service?.start_date}\n                    minDate={this.booking.from_date}\n                    maxDate={this.booking.to_date}\n                    onDateChanged={e => this.updateService({ start_date: e.detail.start?.format('YYYY-MM-DD') })}\n                  >\n                    <input\n                      // ref={el => (this.d1 = el)}\n                      type=\"text\"\n                      slot=\"trigger\"\n                      value={this.s_service?.start_date ? _formatDate(this.s_service.start_date) : null}\n                      style={{ borderLeftWidth: '0', borderRightWidth: '0', width: '100%', borderRadius: '0' }}\n                      class=\"text-center w-100 form-control input-sm\"\n                    ></input>\n                  </ir-date-picker>\n                  {this.s_service?.start_date && (\n                    <div class=\"btn-container\">\n                      <ir-button\n                        title=\"clear\"\n                        id=\"close\"\n                        variant=\"icon\"\n                        style={{ '--icon-size': '0.875rem' }}\n                        icon_name=\"xmark-fill\"\n                        class=\"ml-2\"\n                        onClickHandler={e => {\n                          e.stopImmediatePropagation();\n                          e.stopPropagation();\n                          this.updateService({ start_date: null });\n                        }}\n                      ></ir-button>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n            <div class=\"input-group\">\n              <div class=\"input-group-prepend \">\n                <span class=\"input-group-text until-prepend\" id=\"basic-addon1\">\n                  {locales.entries.Lcz_TillAndIncluding}\n                </span>\n              </div>\n              <div\n                // ref={el => (this.d2_0 = el)}\n                class=\"form-control p-0 m-0 d-flex align-items-center justify-content-center\"\n              >\n                <div class=\"service-date-container\">\n                  <ir-date-picker\n                    // onDatePickerFocus={() => {\n                    //   this.d2?.classList.add('date-focused');\n                    //   this.d2_0?.classList.add('date-focused');\n                    // }}\n                    // onDatePickerBlur={() => {\n                    //   this.d2?.classList.remove('date-focused');\n                    //   this.d2_0?.classList.remove('date-focused');\n                    // }}\n                    emitEmptyDate\n                    date={this.s_service?.end_date}\n                    minDate={this.s_service?.start_date ?? this.booking.from_date}\n                    maxDate={this.booking.to_date}\n                    onDateChanged={e => {\n                      e.stopImmediatePropagation();\n                      e.stopPropagation();\n                      this.updateService({ end_date: e.detail.start?.format('YYYY-MM-DD') });\n                    }}\n                  >\n                    <input\n                      // ref={el => (this.d2 = el)}\n                      slot=\"trigger\"\n                      value={this.s_service?.end_date ? _formatDate(this.s_service.end_date) : null}\n                      style={{ borderLeftWidth: '0', borderRightWidth: '0', width: '100%' }}\n                      class=\"text-center form-control input-sm\"\n                    ></input>\n                  </ir-date-picker>\n\n                  {this.s_service?.end_date && (\n                    <div class=\"btn-container\">\n                      <ir-button\n                        title=\"clear\"\n                        id=\"close\"\n                        variant=\"icon\"\n                        style={{ '--icon-size': '0.875rem' }}\n                        icon_name=\"xmark-fill\"\n                        class=\"ml-2\"\n                        onClickHandler={e => {\n                          e.stopImmediatePropagation();\n                          e.stopPropagation();\n                          this.updateService({ end_date: null });\n                        }}\n                      ></ir-button>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n          {/* Prices and cost */}\n          <div class={'row-group'}>\n            <ir-price-input\n              label=\"Price\"\n              currency={this.booking.currency.symbol}\n              class=\"ir-br-input-none\"\n              value={this.s_service?.price?.toString()}\n              zod={ExtraServiceSchema.pick({ price: true })}\n              aria-label={locales.entries.Lcz_Price}\n              wrapKey=\"price\"\n              aria-describedby=\"service price\"\n              autoValidate={false}\n              data-state={this.error && !this.validatePrice() ? 'error' : ''}\n              onTextChange={e => this.updateService({ price: parseFloat(e.detail) })}\n            ></ir-price-input>\n            <ir-price-input\n              autoValidate={false}\n              label={locales.entries.Lcz_Cost}\n              labelStyle=\"rounded-0 border-left-0\"\n              currency={this.booking.currency.symbol}\n              // class=\"ir-bl-lbl-none ir-bl-none\"\n              value={this.s_service?.cost?.toString()}\n              zod={ExtraServiceSchema.pick({ cost: true })}\n              onTextChange={e => this.updateService({ cost: parseFloat(e.detail) })}\n              wrapKey=\"cost\"\n              aria-label=\"Cost\"\n              aria-describedby=\"service cost\"\n            ></ir-price-input>\n          </div>\n        </section>\n        <div class={'sheet-footer'}>\n          <ir-button\n            onClick={() => this.closeModal.emit(null)}\n            btn_styles=\"justify-content-center\"\n            class={`flex-fill`}\n            text={locales.entries.Lcz_Cancel}\n            btn_color=\"secondary\"\n          ></ir-button>\n\n          <ir-button\n            btn_styles=\"justify-content-center align-items-center\"\n            class={'flex-fill'}\n            btn_type=\"submit\"\n            isLoading={isRequestPending('/Do_Booking_Extra_Service')}\n            text={locales.entries.Lcz_Save}\n            btn_color=\"primary\"\n          ></ir-button>\n        </div>\n      </form>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n","import { Component, Fragment, Host, Prop, h } from '@stencil/core';\nimport { Booking } from '@/models/booking.dto';\n@Component({\n  tag: 'ir-extra-services',\n  styleUrl: 'ir-extra-services.css',\n  scoped: true,\n})\nexport class IrExtraServices {\n  @Prop() booking: Pick<Booking, 'currency' | 'extra_services' | 'booking_nbr'>;\n\n  render() {\n    return (\n      <Host class={'card p-0 '}>\n        {this.booking.extra_services?.map((service, index) => (\n          <Fragment>\n            <ir-extra-service\n              bookingNumber={this.booking.booking_nbr}\n              currencySymbol={this.booking.currency.symbol}\n              key={service.booking_system_id}\n              service={service}\n            ></ir-extra-service>\n            {index !== this.booking.extra_services.length - 1 && <hr class=\"mr-2 ml-2 my-0 p-0\" />}\n          </Fragment>\n        ))}\n      </Host>\n    );\n  }\n}\n",".input-group-text {\n  min-width: 10rem;\n  text-align: left;\n}\n.mobilePrefixSelect {\n  border-right-width: 0;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n}\n.mobilePrefixInput {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n\n/* custome checkbox */\n.check-container {\n  position: relative;\n  /* padding-left: 30px; */\n  cursor: pointer;\n  font-size: 14px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  display: flex;\n  align-items: center;\n}\n.check-container input {\n  position: relative;\n  opacity: 0;\n  cursor: pointer;\n  height: 0;\n  width: 0;\n}\n.check-container .checkmark {\n  position: relative;\n  top: 0;\n  left: 0;\n  height: 20px;\n  width: 20px;\n  border: 1px solid #cacfe7;\n  border-radius: 4px;\n  transition: all 0.3s ease;\n}\n.check-container input:checked ~ .checkmark {\n  background-color: #1e9ff2;\n  border-color: #1e9ff2;\n}\n.checkmark:after {\n  content: '';\n  position: absolute;\n  display: none;\n}\n.check-container input:checked ~ .checkmark:after {\n  display: block;\n}\n.check-label {\n  margin-left: 10px !important;\n}\n.check-container .checkmark:after {\n  left: 6px;\n  top: 3px;\n  width: 6px;\n  height: 10px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  -webkit-transform: rotate(45deg);\n  -ms-transform: rotate(45deg);\n  transform: rotate(45deg);\n}\n.ir-card-header {\n  width: 100%;\n  border-bottom: 1px solid #e4e5ec;\n}\n.close-icon {\n  margin: 0;\n}\n.border-theme {\n  border: 1px solid #cacfe7;\n}\n.loading-container {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 0;\n  padding: 0;\n}\n",":host {\n  height: 100%;\n}\n.sheet-container {\n  display: flex !important;\n  flex-direction: column !important;\n  background: white;\n  height: 100vh;\n  gap: 1rem;\n  z-index: 1000;\n}\n.sheet-container {\n  height: -webkit-fill-available;\n  height: 100vh;\n  height: 100dvh;\n}\n\n/* @supports (height: 100svh) {\n  .sheet-container {\n    height: 100svh;\n  }\n} */\n.sheet-footer {\n  position: sticky;\n  bottom: 0;\n  z-index: 20;\n  background: white;\n  border-top: 1px solid #e4e5ec;\n  display: flex;\n  flex-direction: column;\n  padding: 1rem;\n  gap: 0.5rem;\n}\n.sheet-header {\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  background: white;\n}\n.sheet-body {\n  flex: 1 1 0%;\n}\n/* @media (max-width: 767px) {\n  .sheet-footer {\n    bottom: env(safe-area-inset-bottom);\n  }\n} */\n@media (min-width: 768px) {\n  .sheet-footer {\n    flex-direction: row;\n    align-items: center;\n  }\n}\n","import { Component, State, h, Prop, EventEmitter, Event, Watch, Fragment } from '@stencil/core';\nimport { Guest } from '@/models/booking.dto';\nimport { BookingService } from '@/services/booking.service';\nimport { ICountry } from '@/components';\nimport { RoomService } from '@/services/room.service';\nimport locales from '@/stores/locales.store';\nimport Token from '@/models/Token';\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\nimport { IToast } from '@components/ui/ir-toast/toast';\n\n@Component({\n  tag: 'ir-guest-info',\n  styleUrls: ['ir-guest-info.css', '../../common/sheet.css'],\n  scoped: true,\n})\nexport class GuestInfo {\n  @Prop() language: string;\n  @Prop() headerShown: boolean;\n  @Prop() email: string;\n  @Prop() booking_nbr: string;\n  @Prop() ticket: string;\n  @Prop() isInSideBar: boolean;\n\n  @State() countries: ICountry[];\n  // @State() submit: boolean = false;\n  @State() guest: Guest | null = null;\n  @State() isLoading: boolean = true;\n  @State() autoValidate = false;\n\n  @Event() closeSideBar: EventEmitter<null>;\n  @Event({ bubbles: true }) resetBookingEvt: EventEmitter<null>;\n  @Event() toast: EventEmitter<IToast>;\n\n  private bookingService = new BookingService();\n  private roomService = new RoomService();\n  private token: Token = new Token();\n\n  async componentWillLoad() {\n    if (this.ticket) {\n      this.token.setToken(this.ticket);\n    }\n    if (!!this.token.getToken()) this.init();\n  }\n\n  @Watch('ticket')\n  ticketChanged(newValue: string, oldValue: string) {\n    if (newValue === oldValue) {\n      return;\n    }\n    this.token.setToken(this.ticket);\n    this.init();\n  }\n\n  async init() {\n    try {\n      console.log('first');\n      this.isLoading = true;\n      const [guest, countries, fetchedLocales] = await Promise.all([\n        this.bookingService.fetchGuest(this.email),\n        this.bookingService.getCountries(this.language),\n        !locales || !locales.entries || Object.keys(locales.entries).length === 0 ? this.roomService.fetchLanguage(this.language) : Promise.resolve(null), // Skip fetching if locales are already set\n      ]);\n\n      // Set the fetched locales if they were fetched\n      if (fetchedLocales) {\n        locales.entries = fetchedLocales.entries;\n        locales.direction = fetchedLocales.direction;\n      }\n\n      // Assign the fetched guest and countries\n      this.countries = countries;\n      this.guest = { ...guest, mobile: guest.mobile_without_prefix };\n    } catch (error) {\n      console.log(error);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n  private handleInputChange(params: Partial<Guest>) {\n    this.guest = { ...this.guest, ...params };\n  }\n\n  private async editGuest() {\n    try {\n      this.autoValidate = true;\n\n      await this.bookingService.editExposedGuest(this.guest, this.booking_nbr ?? null);\n      this.toast.emit({\n        type: 'success',\n        description: '',\n        title: 'Saved Successfully',\n        position: 'top-right',\n      });\n      this.closeSideBar.emit(null);\n      this.resetBookingEvt.emit(null);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  render() {\n    if (this.isLoading && this.isInSideBar) {\n      <div class={'loading-container'}>\n        <ir-spinner></ir-spinner>\n      </div>;\n    }\n    if (this.isLoading) {\n      return null;\n    }\n    return (\n      <form\n        class={'p-0 sheet-container'}\n        onSubmit={async e => {\n          e.preventDefault();\n          await this.editGuest();\n        }}\n      >\n        {!this.isInSideBar && [<ir-toast></ir-toast>, <ir-interceptor></ir-interceptor>]}\n        {this.headerShown && <ir-title class=\"px-1 sheet-header\" displayContext=\"sidebar\" label={locales.entries.Lcz_GuestDetails}></ir-title>}\n        <div class={this.isInSideBar ? 'sheet-body' : 'card-content collapse show '}>\n          <div class={this.headerShown ? 'card-body px-1 pt-0' : 'pt-0'}>\n            <ir-input-text\n              autoValidate={this.autoValidate}\n              label={locales.entries?.Lcz_FirstName}\n              name=\"firstName\"\n              // submitted={this.submit}\n              value={this.guest?.first_name}\n              required\n              onTextChange={e => this.handleInputChange({ first_name: e.detail })}\n            ></ir-input-text>\n            <ir-input-text\n              autoValidate={this.autoValidate}\n              label={locales.entries?.Lcz_LastName}\n              name=\"lastName\"\n              // submitted={this.submit}\n              value={this.guest?.last_name}\n              required\n              onTextChange={e => this.handleInputChange({ last_name: e.detail })}\n            ></ir-input-text>\n            <ir-input-text\n              label={locales.entries?.Lcz_Email}\n              name=\"email\"\n              // submitted={this.submit}\n              value={this.guest?.email}\n              required\n              onTextChange={e => this.handleInputChange({ email: e.detail })}\n            ></ir-input-text>\n            <ir-input-text\n              label={locales.entries?.Lcz_AlternativeEmail}\n              name=\"altEmail\"\n              value={this.guest?.alternative_email}\n              onTextChange={e => this.handleInputChange({ alternative_email: e.detail })}\n            ></ir-input-text>\n            {/* <ir-input-text label=\"Password\" placeholder=\"\" name=\"password\" submited={this.submit} type=\"password\" value={this.Model.password} required></ir-input-text> */}\n            {/* <ir-select\n              selectContainerStyle=\"mb-1\"\n              required\n              name=\"country\"\n              submited={this.submit}\n              label={locales.entries.Lcz_Country}\n              selectedValue={this.guest?.country_id?.toString() ?? ''}\n              data={this.countries?.map(item => {\n                return {\n                  value: item.id.toString(),\n                  text: item.name,\n                };\n              })}\n              firstOption={'...'}\n              onSelectChange={e => this.handleInputChange({ country_id: e.detail })}\n            ></ir-select> */}\n            <ir-country-picker\n              // error={this.submit && !this.guest.country_id}\n              country={this.countries.find(c => c.id === this.guest.country_id)}\n              label={locales.entries?.Lcz_Country}\n              onCountryChange={e => this.handleInputChange({ country_id: e.detail.id })}\n              countries={this.countries}\n            ></ir-country-picker>\n\n            <ir-phone-input\n              onTextChange={e => {\n                e.stopImmediatePropagation();\n                e.stopPropagation();\n                const { mobile, phone_prefix } = e.detail;\n                if (mobile !== this.guest.mobile) {\n                  this.handleInputChange({ mobile });\n                }\n                if (phone_prefix !== this.guest.country_phone_prefix) this.handleInputChange({ country_phone_prefix: phone_prefix });\n              }}\n              phone_prefix={this.guest.country_phone_prefix}\n              value={this.guest.mobile}\n              language={this.language}\n              label={locales.entries?.Lcz_MobilePhone}\n              countries={this.countries}\n            />\n            <div class=\"mb-2\">\n              <ir-textarea\n                variant=\"prepend\"\n                onTextChange={e => this.handleInputChange({ notes: e.detail })}\n                value={this.guest?.notes}\n                label={locales.entries?.Lcz_PrivateNote}\n              ></ir-textarea>\n            </div>\n            <div class={'p-0 m-0'}>\n              <label class={`check-container m-0 p-0`}>\n                <input\n                  class={'m-0 p-0'}\n                  type=\"checkbox\"\n                  name=\"newsletter\"\n                  checked={this.guest.subscribe_to_news_letter}\n                  onInput={e => this.handleInputChange({ subscribe_to_news_letter: (e.target as HTMLInputElement).checked })}\n                />\n                <span class=\"checkmark m-0 p-0\"></span>\n                <span class={'m-0 p-0  check-label'}>{locales.entries.Lcz_Newsletter}</span>\n              </label>\n              {!this.isInSideBar && (\n                <Fragment>\n                  <hr />\n                  <ir-button\n                    btn_styles=\"d-flex align-items-center justify-content-center\"\n                    text={locales.entries.Lcz_Save}\n                    onClickHandler={this.editGuest.bind(this)}\n                    isLoading={isRequestPending('/Edit_Exposed_Guest')}\n                    color=\"btn-primary\"\n                  ></ir-button>\n                </Fragment>\n              )}\n            </div>\n          </div>\n        </div>\n        {this.isInSideBar && (\n          <div class={'sheet-footer'}>\n            <ir-button\n              data-testid=\"cancel\"\n              onClickHandler={() => this.closeSideBar.emit(null)}\n              class=\"flex-fill m-0 p-0\"\n              btn_styles=\"w-100 m-0  justify-content-center align-items-center\"\n              btn_color=\"secondary\"\n              text={locales.entries.Lcz_Cancel}\n            ></ir-button>\n            <ir-button\n              data-testid=\"save\"\n              isLoading={isRequestPending('/Edit_Exposed_Guest')}\n              btn_disabled={this.isLoading}\n              class=\"flex-fill m-0\"\n              btn_type=\"submit\"\n              btn_styles=\"w-100 m-0  justify-content-center align-items-center\"\n              text={locales.entries.Lcz_Save}\n            ></ir-button>\n          </div>\n        )}\n      </form>\n    );\n  }\n}\n",":host {\n  font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;\n}\n:host * {\n  font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;\n}\n\n.sm-margin-right {\n  margin-right: 5px !important;\n  background: #000;\n}\n.action_icons {\n  width: 60px;\n}\n.w-60 {\n  width: 100px;\n  padding: 0 5px;\n}\n.payments-height {\n  height: 30px;\n}\n.payment_date {\n  width: 100px;\n}\n.iframeHeight {\n  height: max-content;\n  height: 22.5rem;\n}\n.designation {\n  width: 120px;\n}\n.total-cost-container {\n  background: #7cbebe;\n  color: white;\n  padding: 0.5rem;\n  border-radius: 5px;\n}\n","import { Component, h, Prop, State, Event, EventEmitter, Listen } from '@stencil/core';\nimport { Booking, IPayment } from '@/models/booking.dto';\nimport { BookingService } from '@/services/booking.service';\nimport { PaymentService, IPaymentAction } from '@/services/payment.service';\nimport locales from '@/stores/locales.store';\nimport { IToast } from '@/components/ui/ir-toast/toast';\nimport { Payment, PaymentEntries, PaymentSidebarEvent } from '../types';\nimport moment from 'moment';\nimport { formatAmount } from '@/utils/utils';\nimport calendar_data from '@/stores/calendar-data';\n\n@Component({\n  styleUrl: 'ir-payment-details.css',\n  tag: 'ir-payment-details',\n  scoped: true,\n})\nexport class IrPaymentDetails {\n  @Prop({ mutable: true }) booking: Booking;\n  @Prop() paymentActions: IPaymentAction[];\n  @Prop() propertyId: number;\n  @Prop() paymentEntries: PaymentEntries;\n\n  @State() confirmModal: boolean = false;\n  @State() toBeDeletedItem: IPayment | null = null;\n  @State() modalMode: 'delete' | 'save' | null = null;\n\n  @Event({ bubbles: true }) resetBookingEvt: EventEmitter<null>;\n  @Event({ bubbles: true }) resetExposedCancellationDueAmount: EventEmitter<null>;\n  @Event({ bubbles: true }) toast: EventEmitter<IToast>;\n  @Event({ bubbles: true }) openSidebar: EventEmitter<PaymentSidebarEvent>;\n\n  private paymentService = new PaymentService();\n  private bookingService = new BookingService();\n\n  @Listen('generatePayment')\n  handlePaymentGeneration(e: CustomEvent) {\n    const value = e.detail;\n    const paymentType = this.paymentEntries?.types?.find(p => p.CODE_NAME === (this.booking.status.code === '003' ? value.pay_type_code : '001'));\n    this.openSidebar.emit({\n      type: 'payment-folio',\n      payload: {\n        payment: {\n          ...value,\n          date: moment().format('YYYY-MM-DD'),\n          id: -1,\n          amount: value.amount,\n          payment_type: paymentType\n            ? {\n                code: paymentType.CODE_NAME,\n                description: paymentType.CODE_VALUE_EN,\n                operation: paymentType.NOTES,\n              }\n            : null,\n          designation: paymentType?.CODE_VALUE_EN ?? null,\n        },\n        mode: 'payment-action',\n      },\n    });\n  }\n\n  private handleAddPayment = (props?: { type: 'cancellation-penalty' | 'refund'; amount: number }) => {\n    let payment: Payment = {\n      id: -1,\n      date: moment().format('YYYY-MM-DD'),\n      amount: null,\n      currency: calendar_data.currency,\n      designation: null,\n      reference: null,\n    };\n    if (props) {\n      const { amount, type } = props;\n      const cashMethod = this.paymentEntries.methods.find(pt => pt.CODE_NAME === '001');\n      const payment_method = {\n        code: cashMethod.CODE_NAME,\n        description: cashMethod.CODE_VALUE_EN,\n        operation: cashMethod.NOTES,\n      };\n      const paymentType = this.paymentEntries.types.find(pt => pt.CODE_NAME === (type === 'cancellation-penalty' ? '001' : '010'));\n      payment = {\n        ...payment,\n        amount: amount,\n        designation: paymentType.CODE_VALUE_EN,\n        payment_type: {\n          code: paymentType.CODE_NAME,\n          description: paymentType.CODE_VALUE_EN,\n          operation: paymentType.NOTES,\n        },\n        payment_method: type === 'refund' ? undefined : payment_method,\n      };\n      this.openSidebar.emit({\n        type: 'payment-folio',\n        payload: {\n          payment,\n          mode: 'payment-action',\n        },\n      });\n      return;\n    }\n    this.openSidebar.emit({\n      type: 'payment-folio',\n      payload: {\n        payment,\n        mode: 'new',\n      },\n    });\n  };\n\n  private handleEditPayment = (payment: IPayment) => {\n    this.openSidebar.emit({\n      type: 'payment-folio',\n      payload: { payment, mode: 'edit' },\n    });\n  };\n\n  private handleDeletePayment = (payment: IPayment) => {\n    this.modalMode = 'delete';\n    this.toBeDeletedItem = payment;\n    this.openModal();\n  };\n\n  private async cancelPayment() {\n    try {\n      await this.paymentService.CancelPayment(this.toBeDeletedItem.id);\n      const newPaymentArray = this.booking.financial.payments.filter((item: IPayment) => item.id !== this.toBeDeletedItem.id);\n\n      this.booking = {\n        ...this.booking,\n        financial: { ...this.booking.financial, payments: newPaymentArray },\n      };\n\n      this.confirmModal = false;\n      this.resetBookingEvt.emit(null);\n      this.resetExposedCancellationDueAmount.emit(null);\n      this.toBeDeletedItem = null;\n      this.modalMode = null;\n    } catch (error) {\n      console.error('Error canceling payment:', error);\n      this.toast.emit({\n        type: 'error',\n        title: 'Error',\n        description: 'Failed to cancel payment. Please try again.',\n        position: 'top-right',\n      });\n    }\n  }\n\n  private handleConfirmModal = async (e: CustomEvent) => {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n\n    if (this.modalMode === 'delete') {\n      await this.cancelPayment();\n    }\n  };\n\n  private handleCancelModal = (e: CustomEvent) => {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.modalMode = null;\n    this.toBeDeletedItem = null;\n  };\n\n  private openModal() {\n    const modal: any = document.querySelector('.delete-record-modal');\n    modal?.openModal();\n  }\n\n  private hasValidFinancialData(): boolean {\n    return Boolean(this.booking?.financial);\n  }\n\n  // private shouldShowPaymentActions(): boolean {\n  //   return Boolean(this.paymentActions?.filter(pa => pa.amount !== 0).length > 0 && this.booking.is_direct);\n  // }\n  private shouldShowRefundButton(): boolean {\n    if (this.booking.financial.due_amount === 0) {\n      return false;\n    }\n    if (this.booking.is_requested_to_cancel || ['003', '004'].includes(this.booking.status.code)) {\n      return this.booking.financial.cancelation_penality_as_if_today < 0;\n    }\n    return false;\n  }\n  private shouldCancellationButton(): boolean {\n    if (this.booking.financial.due_amount === 0) {\n      return false;\n    }\n    if (['003', '004'].includes(this.booking.status.code) && this.booking.financial.cancelation_penality_as_if_today > 0) {\n      return true;\n    }\n    return false;\n  }\n\n  render() {\n    if (!this.hasValidFinancialData()) {\n      return null;\n    }\n\n    const { financial, currency } = this.booking;\n\n    return [\n      <div class=\"card p-1\">\n        <ir-payment-summary\n          isBookingCancelled={['003', '004'].includes(this.booking.status.code)}\n          totalCost={financial.gross_cost}\n          balance={financial.due_amount}\n          collected={this.booking.financial.collected}\n          currency={currency}\n        />\n        <ir-booking-guarantee booking={this.booking} bookingService={this.bookingService} />\n        {/* {this.shouldShowPaymentActions() && <ir-payment-actions paymentAction={this.paymentActions} booking={this.booking} />} */}\n        {!['003', '004'].includes(this.booking.status.code) && this.booking.is_direct && (\n          <ir-applicable-policies propertyId={this.propertyId} booking={this.booking}></ir-applicable-policies>\n        )}\n\n        {this.shouldShowRefundButton() && (\n          <div class=\"d-flex mt-1\">\n            <ir-button\n              btn_color=\"outline\"\n              text={`Refund ${formatAmount(currency.symbol, Math.abs(this.booking.financial.cancelation_penality_as_if_today))}`}\n              size=\"sm\"\n              onClickHandler={() => {\n                this.handleAddPayment({ type: 'refund', amount: Math.abs(this.booking.financial.cancelation_penality_as_if_today) });\n              }}\n            ></ir-button>\n          </div>\n        )}\n        {this.shouldCancellationButton() && (\n          <div class=\"d-flex mt-1\">\n            <ir-button\n              btn_color=\"outline\"\n              text={`Charge cancellation penalty ${formatAmount(currency.symbol, this.booking.financial.cancelation_penality_as_if_today)}`}\n              size=\"sm\"\n              onClickHandler={() => {\n                this.handleAddPayment({ type: 'cancellation-penalty', amount: Math.abs(this.booking.financial.cancelation_penality_as_if_today) });\n              }}\n            ></ir-button>\n          </div>\n        )}\n      </div>,\n      <ir-payments-folio\n        payments={financial.payments || []}\n        onAddPayment={() => this.handleAddPayment()}\n        onEditPayment={e => this.handleEditPayment(e.detail)}\n        onDeletePayment={e => this.handleDeletePayment(e.detail)}\n      />,\n      <ir-modal\n        item={this.toBeDeletedItem}\n        class=\"delete-record-modal\"\n        modalTitle={locales.entries.Lcz_Confirmation}\n        modalBody={this.modalMode === 'delete' ? locales.entries.Lcz_IfDeletedPermantlyLost : locales.entries.Lcz_EnteringAmountGreaterThanDue}\n        iconAvailable={true}\n        icon=\"ft-alert-triangle danger h1\"\n        leftBtnText={locales.entries.Lcz_Cancel}\n        rightBtnText={this.modalMode === 'delete' ? locales.entries.Lcz_Delete : locales.entries.Lcz_Confirm}\n        leftBtnColor=\"secondary\"\n        rightBtnColor={this.modalMode === 'delete' ? 'danger' : 'primary'}\n        onConfirmModal={this.handleConfirmModal}\n        onCancelModal={this.handleCancelModal}\n      />,\n    ];\n  }\n}\n",":host {\n  display: block;\n  --payment-type-badge-bg: #ff4961;\n}\n.payment-type-badge {\n  background: var(--payment-type-badge-bg);\n  color: white;\n  padding: 0.2rem 0.3rem !important;\n  font-size: 12px;\n  border-radius: 4px;\n  margin: 0;\n  text-transform: capitalize;\n}\n.credit-badge {\n  --payment-type-badge-bg: #629a4c;\n}\n.debit-badge {\n  --payment-type-badge-bg: #ff4961;\n}\n.dropdown-item-payment {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  box-sizing: border-box;\n  justify-content: space-between;\n}\n\n.input-group-text {\n  border-color: #cacfe7 !important;\n}\n",":host {\n  height: 100%;\n}\n.sheet-container {\n  display: flex !important;\n  flex-direction: column !important;\n  background: white;\n  height: 100vh;\n  gap: 1rem;\n  z-index: 1000;\n}\n.sheet-container {\n  height: -webkit-fill-available;\n  height: 100vh;\n  height: 100dvh;\n}\n\n/* @supports (height: 100svh) {\n  .sheet-container {\n    height: 100svh;\n  }\n} */\n.sheet-footer {\n  position: sticky;\n  bottom: 0;\n  z-index: 20;\n  background: white;\n  border-top: 1px solid #e4e5ec;\n  display: flex;\n  flex-direction: column;\n  padding: 1rem;\n  gap: 0.5rem;\n}\n.sheet-header {\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  background: white;\n}\n.sheet-body {\n  flex: 1 1 0%;\n}\n/* @media (max-width: 767px) {\n  .sheet-footer {\n    bottom: env(safe-area-inset-bottom);\n  }\n} */\n@media (min-width: 768px) {\n  .sheet-footer {\n    flex-direction: row;\n    align-items: center;\n  }\n}\n","import calendar_data from '@/stores/calendar-data';\nimport { Component, Event, EventEmitter, Fragment, Prop, State, Watch, h } from '@stencil/core';\nimport moment from 'moment';\nimport { z, ZodError } from 'zod';\nimport { IEntries } from '@/models/IBooking';\nimport { PaymentService } from '@/services/payment.service';\nimport { FolioEntryMode, Payment, PaymentEntries } from '../../types';\nimport { buildPaymentTypes } from '@/services/booking.service';\nimport { PAYMENT_TYPES_WITH_METHOD } from '../global.variables';\n@Component({\n  tag: 'ir-payment-folio',\n  styleUrls: ['ir-payment-folio.css', '../../../../common/sheet.css'],\n  scoped: true,\n})\nexport class IrPaymentFolio {\n  @Prop() paymentEntries: PaymentEntries;\n  @Prop() bookingNumber: string;\n  @Prop() payment: Payment = {\n    date: moment().format('YYYY-MM-DD'),\n    amount: 0,\n    designation: undefined,\n    currency: null,\n    reference: null,\n    id: -1,\n  };\n\n  @Prop() mode: FolioEntryMode;\n\n  @State() isLoading: boolean;\n  @State() errors: any;\n  @State() autoValidate: boolean = false;\n  @State() folioData: Payment;\n  @State() _paymentTypes: Record<string, IEntries[]> = {};\n\n  @Event() closeModal: EventEmitter<null>;\n  @Event() resetBookingEvt: EventEmitter<null>;\n  @Event() resetExposedCancellationDueAmount: EventEmitter<null>;\n\n  private folioSchema: any;\n  private paymentService = new PaymentService();\n\n  componentWillLoad() {\n    this.folioSchema = z.object({\n      date: z\n        .string()\n        .regex(/^\\d{4}-\\d{2}-\\d{2}$/)\n        .refine(\n          dateStr => {\n            const date = moment(dateStr, 'YYYY-MM-DD', true);\n            return date.isValid();\n          },\n          { message: `Invalid date` },\n        ),\n      amount: z.coerce.number().refine(a => a >= 0),\n      reference: z.string().optional().nullable(),\n      // designation: z.string().min(1),\n      payment_type: z.object({\n        code: z.string().min(3).max(4),\n        description: z.string().min(1),\n        operation: z.union([z.literal('CR'), z.literal('DB')]),\n      }),\n      payment_method: z.object({\n        code: z.string().min(3).max(4),\n        description: z.string().min(1),\n      }),\n    });\n    if (this.payment) {\n      this.folioData = { ...this.payment };\n    }\n    this.getPaymentTypes();\n  }\n\n  @Watch('payment')\n  handlePaymentChange(newValue: Payment, oldValue: Payment) {\n    if (newValue !== oldValue && newValue) {\n      this.folioData = { ...newValue };\n      this.getPaymentTypes();\n    }\n  }\n  @Watch('paymentTypes')\n  handlePaymentTypesChange(newValue: IEntries[], oldValue: IEntries[]) {\n    if (newValue !== oldValue && newValue) {\n      this.getPaymentTypes();\n    }\n  }\n\n  private updateFolioData(params: Partial<Payment>): void {\n    this.folioData = { ...this.folioData, ...params };\n  }\n\n  private async savePayment() {\n    try {\n      this.isLoading = true;\n      this.autoValidate = true;\n      if (this.errors) {\n        this.errors = null;\n      }\n      this.folioSchema.parse(this.folioData ?? {});\n      await this.paymentService.AddPayment(\n        {\n          ...this.folioData,\n          currency: calendar_data.currency,\n          reference: this.folioData.reference ?? '',\n          designation: this.folioData.payment_type?.description || '',\n        },\n        this.bookingNumber,\n      );\n      this.resetBookingEvt.emit(null);\n      this.resetExposedCancellationDueAmount.emit(null);\n      this.closeModal.emit(null);\n    } catch (error) {\n      const err = {};\n      if (error instanceof ZodError) {\n        error.issues.forEach(e => {\n          err[e.path[0]] = true;\n        });\n      }\n      console.error(error);\n      this.errors = err;\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  private handleDropdownChange(e: CustomEvent<string | number>) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    const value = e.detail.toString();\n    console.log(value);\n    this.updateFolioData({ designation: value });\n    if (!e.detail) {\n      this.updateFolioData({\n        payment_type: null,\n      });\n    } else {\n      const payment_type = this.paymentEntries?.types.find(pt => pt.CODE_NAME === value);\n      if (!payment_type) {\n        console.warn(`Invalid payment type ${e.detail}`);\n        this.updateFolioData({\n          payment_type: null,\n        });\n        return;\n      }\n\n      this.updateFolioData({\n        payment_type: {\n          code: payment_type.CODE_NAME,\n          description: payment_type.CODE_VALUE_EN,\n          operation: payment_type.NOTES,\n        },\n        payment_method: PAYMENT_TYPES_WITH_METHOD.includes(payment_type.CODE_NAME)\n          ? undefined\n          : {\n              code: this.paymentEntries.methods[0].CODE_NAME,\n              description: this.paymentEntries.methods[0].CODE_VALUE_EN,\n              operation: this.paymentEntries.methods[0].NOTES,\n            },\n      });\n    }\n  }\n  private handlePaymentMethodDropdownChange(e: CustomEvent<string | number>) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    const value = e.detail.toString();\n    const payment_method = this.paymentEntries?.methods.find(pt => pt.CODE_NAME === value);\n    if (!payment_method) {\n      console.warn(`Invalid payment method ${e.detail}`);\n      this.updateFolioData({\n        payment_type: null,\n      });\n      return;\n    }\n    this.updateFolioData({\n      payment_method: {\n        code: payment_method.CODE_NAME,\n        description: payment_method.CODE_VALUE_EN,\n        operation: payment_method.NOTES,\n      },\n    });\n  }\n\n  private async getPaymentTypes() {\n    const rec = buildPaymentTypes(this.paymentEntries);\n    if (this.mode === 'payment-action' && this.payment.payment_type?.code === '001') {\n      const { PAYMENTS, CANCELLATION } = rec;\n      return (this._paymentTypes = {\n        PAYMENTS,\n        CANCELLATION,\n      });\n    }\n    this._paymentTypes = rec;\n  }\n\n  private renderDropdownItems() {\n    return Object.values(this._paymentTypes).map((p, idx) => (\n      <Fragment>\n        {p.map(pt => (\n          <ir-dropdown-item value={pt.CODE_NAME} class=\"dropdown-item-payment\">\n            <span>{pt.CODE_VALUE_EN}</span>\n            <span class={`payment-type-badge ${pt.NOTES === 'CR' ? 'credit-badge' : 'debit-badge'}`}>{pt.NOTES === 'CR' ? 'credit' : 'debit'}</span>\n          </ir-dropdown-item>\n        ))}\n        {idx !== Object.values(this._paymentTypes).length - 1 && <div class=\"dropdown-divider\"></div>}\n      </Fragment>\n    ));\n  }\n  render() {\n    return (\n      <form\n        class={'sheet-container'}\n        onSubmit={async e => {\n          e.preventDefault();\n          this.savePayment();\n        }}\n      >\n        <ir-title\n          class=\"px-1 sheet-header\"\n          onCloseSideBar={() => this.closeModal.emit(null)}\n          label={this.mode === 'edit' ? 'Edit Folio Entry' : 'New Folio Entry'}\n          displayContext=\"sidebar\"\n        ></ir-title>\n        <section class={'px-1 sheet-body d-flex flex-column'} style={{ gap: '1rem' }}>\n          <div class={'d-flex w-fill'} style={{ gap: '0.5rem' }}>\n            {/*Date Picker */}\n            <div class=\"form-group  mb-0 flex-grow-1\">\n              <div class=\"input-group row m-0 flex-grow-1\">\n                <div class={`input-group-prepend col-4 col-md-3 p-0 text-dark border-0`}>\n                  <label class={`input-group-text flex-grow-1 text-dark border-theme `}>Date</label>\n                </div>\n                <div class=\"form-control  form-control-md col-10 flex-grow-1 d-flex align-items-center px-0 mx-0\" style={{ border: '0' }}>\n                  <style>\n                    {`.ir-date-picker-trigger{\n                    width:100%;}`}\n                  </style>\n                  <ir-date-picker\n                    data-testid=\"pickup_date\"\n                    date={this.folioData?.date}\n                    class=\"w-100\"\n                    emitEmptyDate={true}\n                    maxDate={moment().format('YYYY-MM-DD')}\n                    aria-invalid={this.errors?.date && !this.folioData?.date ? 'true' : 'false'}\n                    onDateChanged={evt => {\n                      this.updateFolioData({ date: evt.detail.start?.format('YYYY-MM-DD') });\n                    }}\n                  >\n                    <input\n                      type=\"text\"\n                      slot=\"trigger\"\n                      value={this.folioData?.date ? moment(this.folioData?.date).format('MMM DD, YYYY') : null}\n                      class={`form-control w-100 input-sm ${this.errors?.date && !this.folioData?.date ? 'border-danger' : ''} text-left`}\n                      style={{ borderTopLeftRadius: '0', borderBottomLeftRadius: '0', width: '100%' }}\n                    ></input>\n                  </ir-date-picker>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div>\n            <ir-price-input\n              containerClassname=\"row\"\n              labelContainerClassname=\"col-4 col-md-3 p-0 text-dark border-0\"\n              minValue={0}\n              autoValidate={this.autoValidate}\n              zod={this.folioSchema.pick({ amount: true })}\n              wrapKey=\"amount\"\n              label=\"Amount\"\n              labelStyle={'flex-grow-1 text-dark  border-theme'}\n              error={this.errors?.amount && !this.folioData?.amount}\n              value={this.folioData?.amount?.toString()}\n              currency={calendar_data.currency.symbol}\n              onTextChange={e => this.updateFolioData({ amount: Number(e.detail) })}\n            ></ir-price-input>\n          </div>\n          <div>\n            <ir-dropdown value={this.folioData?.payment_type?.code} disabled={this.mode === 'payment-action'} onOptionChange={this.handleDropdownChange.bind(this)}>\n              <div slot=\"trigger\" class={'input-group row m-0 '}>\n                <div class={`input-group-prepend col-4 col-md-3 p-0 text-dark border-0`}>\n                  <label class={`input-group-text flex-grow-1 text-dark  border-theme`}>Transaction type</label>\n                </div>\n                <button\n                  type=\"button\"\n                  disabled={this.mode === 'payment-action'}\n                  class={`form-control  d-flex align-items-center cursor-pointer ${this.errors?.payment_type && !this.folioData?.payment_type?.code ? 'border-danger' : ''}`}\n                >\n                  {this.folioData?.payment_type ? <span>{this.folioData.payment_type?.description}</span> : <span>Select...</span>}\n                </button>\n              </div>\n              <ir-dropdown-item value=\"\">Select...</ir-dropdown-item>\n              {this.renderDropdownItems()}\n            </ir-dropdown>\n          </div>\n          {PAYMENT_TYPES_WITH_METHOD.includes(this.folioData?.payment_type?.code) && (\n            <div>\n              <ir-dropdown value={this.folioData?.payment_method?.code} onOptionChange={this.handlePaymentMethodDropdownChange.bind(this)}>\n                <button\n                  slot=\"trigger\"\n                  type=\"button\"\n                  class={`form-control d-flex align-items-center cursor-pointer ${this.errors?.payment_method && !this.folioData?.payment_method?.code ? 'border-danger' : ''}`}\n                >\n                  {this.folioData?.payment_method ? (\n                    <span>{this.folioData.payment_method?.description}</span>\n                  ) : (\n                    <span>Select {this.folioData?.payment_type?.code === '001' ? 'payment' : 'refund'} method...</span>\n                  )}\n                </button>\n\n                <ir-dropdown-item value=\"\">Select {this.folioData.payment_type?.code === '001' ? 'payment' : 'refund'} method...</ir-dropdown-item>\n                {this.paymentEntries?.methods?.map(pt => {\n                  return (\n                    <ir-dropdown-item value={pt.CODE_NAME} class=\"dropdown-item-payment\">\n                      <span>{pt.CODE_VALUE_EN}</span>\n                    </ir-dropdown-item>\n                  );\n                })}\n              </ir-dropdown>\n            </div>\n          )}\n          <div>\n            <ir-input-text\n              value={this.folioData?.reference}\n              error={this.errors?.reference_number}\n              autoValidate={this.autoValidate}\n              zod={this.folioSchema.pick({ reference: true })}\n              label=\"Reference\"\n              maxLength={50}\n              inputContainerStyle={{\n                margin: '0',\n              }}\n              onTextChange={e => this.updateFolioData({ reference: e.detail })}\n              labelWidth={3}\n              labelContainerClassname={'col-4 col-md-3'}\n            ></ir-input-text>\n          </div>\n        </section>\n        <div class={'sheet-footer'}>\n          <ir-button onClick={() => this.closeModal.emit(null)} btn_styles=\"justify-content-center\" class={`flex-fill`} text={'Cancel'} btn_color=\"secondary\"></ir-button>\n          <ir-button\n            btn_styles=\"justify-content-center align-items-center\"\n            class={'flex-fill'}\n            isLoading={this.isLoading}\n            text={'Save'}\n            btn_color=\"primary\"\n            btn_type=\"submit\"\n          ></ir-button>\n        </div>\n      </form>\n    );\n  }\n}\n","/* .payment-item {\n  position: relative;\n  width: 100%;\n  display: flex;\n  padding: 0.5rem;\n  align-items: center;\n  min-height: 3rem;\n  gap: 1rem;\n  box-sizing: border-box;\n}\n.payment-item:hover {\n  background: #f4f5fa;\n}\n.payment-item:hover .payment-actions {\n  display: flex;\n}\n\n.payment-item p {\n  padding: 0;\n  margin: 0;\n  box-sizing: border-box;\n}\n\n.payment-item .payment-actions {\n  display: none;\n  background: #f4f5fa;\n  gap: 0.5rem;\n  justify-content: flex-end;\n  align-items: center;\n}\n.payment-body {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  flex: 1 1 0%;\n}\n\n.payment-fields {\n  display: flex;\n  flex-direction: column;\n}\n\n.payment-amount {\n  font-weight: 700;\n  white-space: nowrap;\n}\n\n\n.payment-reference {\n  font-size: 12px;\n}\n.payment-toolbar {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n@media (min-width: 768px) {\n  .payment-fields {\n    flex-direction: row;\n    align-items: center;\n    gap: 1rem;\n  }\n} */\n.payment-item__payment-item {\n  display: flex;\n  flex-direction: column;\n  /* gap: 0.25rem; */\n  padding: 0.25rem 0.5rem;\n  min-height: 2.5rem;\n}\n.payment-item__payment-item p {\n  padding: 0;\n  margin: 0;\n  box-sizing: border-box;\n}\n.payment-item__payment-body {\n  display: flex;\n  flex-direction: column;\n}\n.payment-item__payment-fields {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.payment-item__payment-body .payment-item__payment-reference,\n.payment-item__payment-body .payment-item__payment-description {\n  display: none;\n}\n.payment-item__payment-toolbar {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.payment-item__payment-toolbar .payment-item__payment-amount {\n  display: none;\n}\n.payment-item__action-button {\n  cursor: pointer;\n}\n.payment-item__payment-amount {\n  font-weight: 700;\n  white-space: nowrap;\n}\n.payment-item__payment-amount.is-credit {\n  color: #629a4c;\n}\n.payment-item__payment-amount.is-debit {\n  color: #ff4961;\n}\n.payment-item__payment-reference {\n  font-size: 12px;\n}\n/*md*/\n@media (min-width: 640px) {\n  .payment-item__payment-item {\n    flex-direction: row;\n    align-items: center;\n    gap: 1rem;\n  }\n\n  .payment-item__payment-item:hover {\n    background: #f4f5fa;\n  }\n  .payment-item__payment-item:hover .payment-item__payment-actions {\n    display: inline-flex;\n  }\n  .payment-item__payment-body .payment-item__payment-reference,\n  .payment-item__payment-body .payment-item__payment-description,\n  .payment-item__payment-item .payment-item__payment-amount {\n    display: inline-flex;\n  }\n  .payment-item__payment-fields .payment-item__payment-amount,\n  .payment-item__payment-toolbar .payment-item__payment-description,\n  .payment-item__payment-item .payment-item__payment-reference,\n  .payment-item__payment-actions {\n    display: none;\n  }\n  .payment-item__payment-description {\n    padding: 0 0.5rem !important;\n  }\n  .payment-item__payment-body .payment-item__payment-reference {\n    display: inline-flex;\n    align-items: center;\n  }\n  .payment-item__payment-body {\n    flex: 1 1 0%;\n    justify-content: flex-start;\n    /* gap: 0.5rem; */\n  }\n  .payment-item__payment-fields {\n    justify-content: flex-start;\n    gap: 0.5rem;\n  }\n  .payment-item__payment-toolbar {\n    gap: 0.5rem;\n    align-items: center;\n  }\n}\n","import { colorVariants } from '@/components/ui/ir-icons/icons';\nimport { Component, Event, EventEmitter, Prop, h } from '@stencil/core';\nimport { IPayment } from '@/models/booking.dto';\nimport { formatAmount } from '@/utils/utils';\nimport { PAYMENT_TYPES_WITH_METHOD } from '../global.variables';\nimport moment from 'moment';\n\n@Component({\n  tag: 'ir-payment-item',\n  styleUrl: 'ir-payment-item.css',\n  scoped: true,\n})\nexport class IrPaymentItem {\n  @Prop() payment: IPayment;\n\n  @Event() editPayment: EventEmitter<IPayment>;\n  @Event() deletePayment: EventEmitter<IPayment>;\n\n  render() {\n    const isCredit = this.payment.payment_type.operation === 'CR';\n\n    const paymentDescription =\n      (PAYMENT_TYPES_WITH_METHOD.includes(this.payment.payment_type?.code)\n        ? `${this.payment.payment_type?.description}: ${this.payment.payment_method.description}`\n        : this.payment.payment_type.description) ?? this.payment.designation;\n    return (\n      <div class=\"payment-item__payment-item\">\n        <div class=\"payment-item__payment-body\" part=\"payment-body\">\n          <div class=\"payment-item__payment-fields\" part=\"payment-fields\">\n            <p class=\"payment-item__payment-date\">{moment(this.payment.date, 'YYYY-MM-DD').format('MMM DD, YYYY')}</p>\n            <p class={`payment-item__payment-amount ${isCredit ? 'is-credit' : 'is-debit'}`}>{formatAmount(this.payment.currency.symbol, this.payment.amount)}</p>\n            <p class=\"payment-item__payment-description\">{paymentDescription}</p>\n          </div>\n          {this.payment.reference && <p class=\"payment-item__payment-reference\">{this.payment?.reference}</p>}\n        </div>\n        <div class=\"payment-item__payment-toolbar\">\n          <p class={`payment-item__payment-amount ${isCredit ? 'is-credit' : 'is-debit'}`}>{formatAmount(this.payment.currency.symbol, this.payment.amount)}</p>\n          <p class=\"payment-item__payment-description\">{paymentDescription}</p>\n          <div class=\"payment-item__payment-actions\">\n            <div class=\"d-flex align-items-center\">\n              <ir-popover trigger=\"hover\" content={`User: ${this.payment.time_stamp.user}`}>\n                <ir-button variant=\"icon\" style={{ 'color': colorVariants.secondary['--icon-button-color'], '--icon-size': '1.1rem' }} icon_name=\"user\"></ir-button>\n                {/* <ir-icons name=\"user\" style={{ '--icon-size': '1rem', 'color': colorVariants.secondary['--icon-button-color'] }}></ir-icons> */}\n              </ir-popover>\n            </div>\n            <ir-button\n              class=\"payment-item__action-button\"\n              variant=\"icon\"\n              onClickHandler={() => {\n                this.editPayment.emit(this.payment);\n              }}\n              icon_name=\"edit\"\n              style={colorVariants.secondary}\n            ></ir-button>\n            <ir-button\n              class=\"payment-item__action-button\"\n              onClickHandler={() => {\n                this.deletePayment.emit(this.payment);\n              }}\n              variant=\"icon\"\n              style={colorVariants.danger}\n              icon_name=\"trash\"\n            ></ir-button>\n          </div>\n        </div>\n\n        {this.payment.reference && <p class=\"payment-item__payment-reference\">{this.payment?.reference}</p>}\n      </div>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n:host {\n  font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;\n}\n:host * {\n  font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;\n}\n","import { Currency } from '@/models/property';\nimport locales from '@/stores/locales.store';\nimport { formatAmount } from '@/utils/utils';\nimport { Component, Prop, h } from '@stencil/core';\n\n@Component({\n  tag: 'ir-payment-summary',\n  styleUrl: 'ir-payment-summary.css',\n  scoped: true,\n})\nexport class IrPaymentSummary {\n  @Prop() totalCost: number;\n  @Prop() balance: number;\n  @Prop() collected: number;\n  @Prop() currency: Currency;\n  @Prop() isBookingCancelled: boolean;\n\n  private shouldShowTotalCost(): boolean {\n    return this.totalCost > 0 && this.totalCost !== null;\n  }\n\n  render() {\n    return (\n      <div class=\" m-0\">\n        {this.shouldShowTotalCost() && (\n          <div class=\"mb-2 h4 total-cost-container\">\n            {locales.entries.Lcz_TotalCost}:<span>{formatAmount(this.currency.symbol, this.totalCost)}</span>\n          </div>\n        )}\n\n        <div class=\"h4 d-flex align-items-center justify-content-between\">\n          <span>{locales.entries.Lcz_Balance}: </span>\n          <span class=\"danger font-weight-bold\">{formatAmount(this.currency.symbol, this.balance)}</span>\n        </div>\n\n        {!this.isBookingCancelled && (\n          <div class=\"mb-2 h4 d-flex align-items-center justify-content-between\">\n            <span>{locales.entries.Lcz_Collected}: </span>\n            <span>{formatAmount(this.currency.symbol, this.collected)}</span>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n","import { Component, h, Prop, Event, EventEmitter } from '@stencil/core';\nimport { IPayment } from '@/models/booking.dto';\nimport { HelpDocButton } from '@/components/HelpButton';\n\n@Component({\n  styleUrl: 'ir-payments-folio.css',\n  tag: 'ir-payments-folio',\n  scoped: true,\n})\nexport class IrPaymentsFolio {\n  @Prop() payments: IPayment[] = [];\n\n  @Event({ bubbles: true }) addPayment: EventEmitter<void>;\n  @Event({ bubbles: true }) editPayment: EventEmitter<IPayment>;\n  @Event({ bubbles: true }) deletePayment: EventEmitter<IPayment>;\n\n  private handleAddPayment = () => {\n    this.addPayment.emit();\n  };\n\n  private handleEditPayment = (payment: IPayment) => {\n    this.editPayment.emit(payment);\n  };\n\n  private handleDeletePayment = (payment: IPayment) => {\n    this.deletePayment.emit(payment);\n  };\n\n  private hasPayments(): boolean {\n    return this.payments && this.payments.length > 0;\n  }\n\n  private renderPaymentItem(payment: IPayment, index: number) {\n    return [\n      <ir-payment-item\n        key={payment.id}\n        payment={payment}\n        onDeletePayment={e => {\n          e.stopImmediatePropagation();\n          e.stopPropagation();\n          this.handleDeletePayment(e.detail);\n        }}\n        onEditPayment={e => {\n          e.stopImmediatePropagation();\n          e.stopPropagation();\n          this.handleEditPayment(e.detail);\n        }}\n      />,\n      index < this.payments.length - 1 && <hr class=\"p-0 m-0\" />,\n    ];\n  }\n\n  private renderEmptyState() {\n    return (\n      <div class=\"text-center p-3\">\n        <p class=\"text-muted\">No payments recorded yet</p>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div class=\"mt-1\">\n        <div class=\"d-flex flex-column rounded payment-container\">\n          <div class=\"d-flex align-items-center justify-content-between\">\n            <div class={'d-flex align-items-center'} style={{ gap: '0.5rem' }}>\n              <p class=\"font-size-large p-0 m-0\">Guest Folio</p>\n              <HelpDocButton message=\"Help\" href=\"https://help.igloorooms.com/extranet/booking-details/guest-folio\" />\n            </div>\n            <ir-button id=\"add-payment\" variant=\"icon\" icon_name=\"square_plus\" style={{ '--icon-size': '1.5rem' }} onClickHandler={this.handleAddPayment} />\n          </div>\n\n          <div class=\"mt-1 card p-1 payments-container\">\n            {this.hasPayments() ? this.payments.map((payment, index) => this.renderPaymentItem(payment, index)) : this.renderEmptyState()}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import axios from 'axios';\nimport { TDueParams, TPickupData } from './types';\nimport calendar_data from '@/stores/calendar-data';\nimport { IBookingPickupInfo } from '@/components';\nimport { z, ZodError } from 'zod';\nimport { renderTime } from '@/utils/utils';\nimport moment from 'moment';\n\nexport class PickupService {\n  public async savePickup(params: TPickupData, booking_nbr: string, is_remove: boolean) {\n    try {\n      const splitTime = params.arrival_time.split(':');\n      await axios.post(`/Do_Pickup`, {\n        booking_nbr,\n        is_remove,\n        currency: params.currency,\n        date: params.arrival_date,\n        details: params.flight_details,\n        hour: splitTime[0],\n        minute: splitTime[1],\n        nbr_of_units: params.number_of_vehicles,\n        selected_option: params.selected_option,\n        total: +params.due_upon_booking,\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  public transformDefaultPickupData(data: IBookingPickupInfo): TPickupData {\n    const arrival_time = data.hour && data.minute ? renderTime(data.hour) + ':' + renderTime(data.minute) : '';\n    return {\n      arrival_date: data.date,\n      arrival_time,\n      currency: data.currency,\n      due_upon_booking: data.total.toFixed(2),\n      flight_details: data.details,\n      location: data.selected_option.location.id,\n      number_of_vehicles: data.nbr_of_units,\n      selected_option: data.selected_option,\n      vehicle_type_code: data.selected_option.vehicle.code,\n    };\n  }\n  public getAvailableLocations(message: string) {\n    let locations: { value: number; text: string }[] = [];\n    calendar_data.pickup_service.allowed_options.forEach(option => {\n      if (locations.filter(location => location.value === option.location.id).length === 0) {\n        locations.push({\n          text: message + ' ' + option.location.description,\n          value: option.location.id,\n        });\n      }\n    });\n    return locations;\n  }\n  public createPickupSchema(minDate: string, maxDate: string) {\n    return z.object({\n      arrival_date: z\n        .string()\n        .regex(/^\\d{4}-\\d{2}-\\d{2}$/, { message: 'Invalid date format, expected YYYY-MM-DD' })\n        .refine(\n          dateStr => {\n            const date = moment(dateStr, 'YYYY-MM-DD', true);\n            const min = moment(minDate, 'YYYY-MM-DD', true);\n            const max = moment(maxDate, 'YYYY-MM-DD', true);\n            return date.isValid() && min.isValid() && max.isValid() && date.isBetween(min, max, undefined, '[]');\n          },\n          { message: `arrival_date must be between ${minDate} and ${maxDate}` },\n        ),\n\n      arrival_time: z\n        .string()\n        .regex(/^\\d{2}:\\d{2}$/, { message: 'Invalid time format. Expected HH:MM' })\n        .refine(\n          time => {\n            const [hours, minutes] = time.split(':').map(Number);\n            return hours >= 0 && hours <= 23 && minutes >= 0 && minutes <= 59;\n          },\n          { message: 'Time values are out of range' },\n        ),\n      flight_details: z.string().nonempty({ message: 'Flight details cannot be empty' }),\n      vehicle_type_code: z.string().nonempty({ message: 'Vehicle type code cannot be empty' }),\n      number_of_vehicles: z.coerce.number().min(1, { message: 'At least one vehicle is required' }),\n    });\n  }\n  public validateForm(\n    params: TPickupData,\n    schema: any, // : { error: boolean; cause?: keyof TPickupData }\n  ) {\n    try {\n      schema.parse(params);\n      return null;\n    } catch (error) {\n      console.log(error);\n      const err = {};\n      if (error instanceof ZodError) {\n        error.issues.forEach(e => {\n          err[e.path[0]] = true;\n        });\n        return err;\n      }\n    }\n    // if (params.arrival_time.split(':').length !== 2) {\n    //   return {\n    //     error: true,\n    //     cause: 'arrival_time',\n    //   };\n    // }\n    // if (params.flight_details === '') {\n    //   return {\n    //     error: true,\n    //     cause: 'flight_details',\n    //   };\n    // }\n    // if (params.vehicle_type_code === '') {\n    //   return {\n    //     error: true,\n    //     cause: 'vehicle_type_code',\n    //   };\n    // }\n    // if (params.number_of_vehicles === 0) {\n    //   return {\n    //     error: true,\n    //     cause: 'number_of_vehicles',\n    //   };\n    // }\n    // return { error: false };\n  }\n  public getNumberOfVehicles(capacity: number, numberOfPersons: number) {\n    let total_number_of_vehicles = Math.ceil(numberOfPersons / capacity);\n    let startNumber = total_number_of_vehicles > 1 ? total_number_of_vehicles : 1;\n    let bonus_number = total_number_of_vehicles > 1 ? 2 : 3;\n    return Array.from({ length: total_number_of_vehicles + bonus_number }, (_, i) => startNumber + i);\n  }\n  private getPickUpPersonStatus(code: string) {\n    const getCodeDescription = calendar_data.pickup_service.allowed_pricing_models.find(model => model.code === code);\n    if (!getCodeDescription) {\n      return null;\n    }\n    return getCodeDescription.description;\n  }\n  public updateDue(params: TDueParams) {\n    const getCodeDescription = this.getPickUpPersonStatus(params.code);\n    if (!getCodeDescription) {\n      return;\n    }\n    if (getCodeDescription === 'Person') {\n      return params.amount * params.numberOfPersons;\n    } else {\n      return params.amount * params.number_of_vehicles;\n    }\n  }\n}\n",":host {\n  display: block;\n}\n.custom-card-container {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid #e4e5ec;\n}\n.card-title {\n  flex: 1;\n}\n.border-theme {\n  border: 1px solid #cacfe7;\n}\n@media (min-width: 768px) {\n  .price-input-container {\n    max-width: 290px;\n  }\n}\n",":host {\n  height: 100%;\n}\n.sheet-container {\n  display: flex !important;\n  flex-direction: column !important;\n  background: white;\n  height: 100vh;\n  gap: 1rem;\n  z-index: 1000;\n}\n.sheet-container {\n  height: -webkit-fill-available;\n  height: 100vh;\n  height: 100dvh;\n}\n\n/* @supports (height: 100svh) {\n  .sheet-container {\n    height: 100svh;\n  }\n} */\n.sheet-footer {\n  position: sticky;\n  bottom: 0;\n  z-index: 20;\n  background: white;\n  border-top: 1px solid #e4e5ec;\n  display: flex;\n  flex-direction: column;\n  padding: 1rem;\n  gap: 0.5rem;\n}\n.sheet-header {\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  background: white;\n}\n.sheet-body {\n  flex: 1 1 0%;\n}\n/* @media (max-width: 767px) {\n  .sheet-footer {\n    bottom: env(safe-area-inset-bottom);\n  }\n} */\n@media (min-width: 768px) {\n  .sheet-footer {\n    flex-direction: row;\n    align-items: center;\n  }\n}\n","import calendar_data from '@/stores/calendar-data';\nimport locales from '@/stores/locales.store';\nimport { Component, Element, Event, EventEmitter, Prop, State, h } from '@stencil/core';\nimport { TPickupData } from './types';\nimport moment from 'moment';\nimport { IAllowedOptions } from '@/models/calendarData';\nimport { PickupService } from './pickup.service';\nimport { IBookingPickupInfo } from '@/models/booking.dto';\nimport { MaskedRange } from 'imask';\n\n@Component({\n  tag: 'ir-pickup',\n  styleUrls: ['ir-pickup.css', '../../../common/sheet.css'],\n  scoped: true,\n})\nexport class IrPickup {\n  @Element() el: HTMLElement;\n\n  @Prop() defaultPickupData: IBookingPickupInfo | null;\n  @Prop() numberOfPersons: number = 0;\n  @Prop() bookingNumber: string;\n  @Prop() bookingDates: { from: string; to: string };\n\n  @State() isLoading = false;\n  @State() allowedOptionsByLocation: IAllowedOptions[] = [];\n  @State() pickupData: TPickupData = {\n    location: -1,\n    flight_details: '',\n    due_upon_booking: '',\n    number_of_vehicles: 1,\n    vehicle_type_code: '',\n    currency: undefined,\n    arrival_time: '',\n    arrival_date: null,\n    selected_option: undefined,\n  };\n  @State() vehicleCapacity: number[] = [];\n  @State() cause: keyof TPickupData | null = null;\n  @State() errors: Record<string, boolean>;\n  @State() autoValidate = false;\n\n  @Event() closeModal: EventEmitter<null>;\n  @Event() resetBookingEvt: EventEmitter<null>;\n\n  private pickupService = new PickupService();\n  private pickupSchema;\n\n  private arrival_time_mask = {\n    mask: 'HH:mm',\n    blocks: {\n      HH: {\n        mask: MaskedRange,\n        from: 0,\n        to: 23,\n        placeholderChar: 'H',\n      },\n      mm: {\n        mask: MaskedRange,\n        from: 0,\n        to: 59,\n        placeholderChar: 'm',\n      },\n    },\n    lazy: false,\n    placeholderChar: '_',\n  };\n\n  componentWillLoad() {\n    if (this.defaultPickupData) {\n      const transformedData = this.pickupService.transformDefaultPickupData(this.defaultPickupData);\n      this.vehicleCapacity = this.pickupService.getNumberOfVehicles(transformedData.selected_option.vehicle.capacity, this.numberOfPersons);\n      this.allowedOptionsByLocation = calendar_data.pickup_service.allowed_options.filter(option => option.location.id === transformedData.location);\n      this.pickupData = { ...transformedData };\n    }\n    this.pickupSchema = this.pickupService.createPickupSchema(this.bookingDates.from, this.bookingDates.to);\n  }\n  private handleLocationChange(event: CustomEvent) {\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n    const value = event.detail;\n    if (value === '') {\n      this.updatePickupData('location', -1);\n    }\n    if (value !== '') {\n      this.allowedOptionsByLocation = calendar_data.pickup_service.allowed_options.filter(option => option.location.id.toString() === value);\n      let locationChoice = this.allowedOptionsByLocation[0];\n      if (!locationChoice) {\n        return;\n      }\n      locationChoice.currency;\n      this.vehicleCapacity = this.pickupService.getNumberOfVehicles(locationChoice.vehicle.capacity, this.numberOfPersons);\n      this.pickupData = {\n        ...this.pickupData,\n        location: value,\n        selected_option: locationChoice,\n        number_of_vehicles: this.vehicleCapacity[0],\n        due_upon_booking: this.pickupService\n          .updateDue({\n            amount: locationChoice.amount,\n            code: locationChoice.pricing_model.code,\n            numberOfPersons: this.numberOfPersons,\n            number_of_vehicles: this.vehicleCapacity[0],\n          })\n          .toFixed(2),\n        vehicle_type_code: locationChoice.vehicle.code,\n        currency: locationChoice.currency,\n        // number_of_vehicles:this.pickupService\n      };\n    }\n  }\n\n  private handleVehicleQuantityChange(e: CustomEvent) {\n    if (e.detail === '') {\n      return;\n    }\n    const value = +e.detail;\n    this.pickupData = {\n      ...this.pickupData,\n      number_of_vehicles: value,\n      due_upon_booking: this.pickupService\n        .updateDue({\n          amount: this.pickupData.selected_option.amount,\n          code: this.pickupData.selected_option.pricing_model.code,\n          numberOfPersons: this.numberOfPersons,\n          number_of_vehicles: value,\n        })\n        .toFixed(2),\n    };\n  }\n\n  private handleVehicleTypeChange(e: CustomEvent) {\n    if (e.detail === '') {\n      this.pickupData = {\n        ...this.pickupData,\n        due_upon_booking: '',\n        vehicle_type_code: '',\n      };\n      return;\n    }\n    let locationChoice = calendar_data.pickup_service.allowed_options.find(option => option.location.id === +this.pickupData.location && option.vehicle.code === e.detail);\n    if (!locationChoice) {\n      return;\n    }\n    this.vehicleCapacity = [...this.pickupService.getNumberOfVehicles(locationChoice.vehicle.capacity, this.numberOfPersons)];\n    this.pickupData = {\n      ...this.pickupData,\n      selected_option: locationChoice,\n      number_of_vehicles: this.vehicleCapacity[0],\n      due_upon_booking: this.pickupService\n        .updateDue({\n          amount: locationChoice.amount,\n          code: locationChoice.pricing_model.code,\n          numberOfPersons: this.numberOfPersons,\n          number_of_vehicles: this.vehicleCapacity[0],\n        })\n        .toFixed(2),\n      vehicle_type_code: locationChoice.vehicle.code,\n    };\n  }\n\n  private updatePickupData(key: keyof TPickupData, value: any) {\n    this.pickupData = { ...this.pickupData, [key]: value };\n  }\n  private async savePickup() {\n    try {\n      this.isLoading = true;\n      this.autoValidate = true;\n      if (this.errors) {\n        this.errors = null;\n      }\n      this.errors = this.pickupService.validateForm(this.pickupData, this.pickupSchema);\n      if (this.errors) {\n        return;\n      }\n      await this.pickupService.savePickup(this.pickupData, this.bookingNumber, this.defaultPickupData !== null && this.pickupData.location === -1);\n      this.resetBookingEvt.emit(null);\n      this.closeModal.emit(null);\n    } catch (error) {\n      console.error(error);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n  render() {\n    return (\n      <form\n        class={'sheet-container'}\n        onSubmit={async e => {\n          e.preventDefault();\n          await this.savePickup();\n        }}\n      >\n        <ir-title class=\"px-1 sheet-header\" onCloseSideBar={() => this.closeModal.emit(null)} label={locales.entries.Lcz_Pickup} displayContext=\"sidebar\"></ir-title>\n        <section class={'px-1 sheet-body'}>\n          <ir-select\n            testId=\"pickup_location\"\n            selectedValue={this.pickupData.location}\n            selectContainerStyle=\"mb-1\"\n            onSelectChange={this.handleLocationChange.bind(this)}\n            firstOption={locales.entries.Lcz_Pickup_NoThankYou}\n            class={'m-0 mb-1'}\n            data={this.pickupService.getAvailableLocations(locales.entries.Lcz_Pickup_YesFrom) as any}\n          ></ir-select>\n          {this.pickupData.location > 0 && (\n            <div class=\"m-0 p-0\" data-testid=\"pickup_body\">\n              {/*Date and Time Picker container */}\n              <div class={'d-flex'}>\n                {/*Date Picker */}\n                <div class=\"form-group  mr-1\">\n                  <div class=\"input-group row m-0\">\n                    <div class={`input-group-prepend col-5 p-0 text-dark border-0`}>\n                      <label class={`input-group-text  flex-grow-1 text-dark border-theme `}>{locales.entries.Lcz_ArrivalDate}</label>\n                    </div>\n                    <div class=\"form-control  form-control-md col-7 d-flex align-items-center px-0 mx-0\" style={{ border: '0' }}>\n                      <ir-date-picker\n                        data-testid=\"pickup_arrival_date\"\n                        date={this.pickupData.arrival_date}\n                        minDate={this.bookingDates.from}\n                        maxDate={this.bookingDates?.to}\n                        emitEmptyDate={true}\n                        aria-invalid={this.errors?.arrival_date && !this.pickupData.arrival_date ? 'true' : 'false'}\n                        onDateChanged={evt => {\n                          this.updatePickupData('arrival_date', evt.detail.start?.format('YYYY-MM-DD'));\n                        }}\n                      >\n                        <input\n                          type=\"text\"\n                          slot=\"trigger\"\n                          value={this.pickupData.arrival_date ? moment(this.pickupData.arrival_date).format('MMM DD, YYYY') : null}\n                          class={`form-control input-sm ${this.errors?.arrival_date && !this.pickupData.arrival_date ? 'border-danger' : ''} text-center`}\n                          style={{ borderTopLeftRadius: '0', borderBottomLeftRadius: '0', width: '100%' }}\n                        ></input>\n                      </ir-date-picker>\n                    </div>\n                  </div>\n                </div>\n                {/*Time Picker */}\n                <ir-input-text\n                  autoValidate={this.autoValidate}\n                  wrapKey=\"arrival_time\"\n                  testId=\"pickup_arrival_time\"\n                  error={this.errors?.arrival_time}\n                  value={this.pickupData.arrival_time}\n                  zod={this.pickupSchema.pick({ arrival_time: true })}\n                  label={locales.entries.Lcz_Time}\n                  inputStyles=\"col-sm-4\"\n                  data-state={this.cause === 'arrival_time' ? 'error' : ''}\n                  mask={this.arrival_time_mask}\n                  onTextChange={e => this.updatePickupData('arrival_time', e.detail)}\n                ></ir-input-text>\n              </div>\n              <ir-input-text\n                wrapKey=\"flight_details\"\n                zod={this.pickupSchema.pick({ flight_details: true })}\n                autoValidate={this.autoValidate}\n                testId=\"pickup_flight_details\"\n                value={this.pickupData.flight_details}\n                label={locales.entries.Lcz_FlightDetails}\n                onTextChange={e => this.updatePickupData('flight_details', e.detail)}\n                placeholder=\"\"\n                error={this.errors?.flight_details}\n              ></ir-input-text>\n              <ir-select\n                testId=\"pickup_vehicle_type_code\"\n                selectContainerStyle=\"mb-1\"\n                error={this.cause === 'vehicle_type_code'}\n                onSelectChange={this.handleVehicleTypeChange.bind(this)}\n                firstOption={locales.entries.Lcz_Select}\n                selectedValue={this.pickupData.vehicle_type_code}\n                class={'m-0'}\n                data={\n                  this.allowedOptionsByLocation.map(option => ({\n                    text: option.vehicle.description,\n                    value: option.vehicle.code,\n                  })) as any\n                }\n              ></ir-select>\n              <div class={'d-flex flex-column flex-md-row'}>\n                <ir-select\n                  showFirstOption={false}\n                  testId=\"pickup_number_of_vehicles\"\n                  labelBorder=\"theme\"\n                  selectContainerStyle=\"mb-1\"\n                  onSelectChange={this.handleVehicleQuantityChange.bind(this)}\n                  selectedValue={this.pickupData.number_of_vehicles}\n                  error={this.cause === 'number_of_vehicles'}\n                  labelWidth={7}\n                  class={'m-0  mb-md-0 mr-md-1 flex-fill'}\n                  label={locales.entries.Lcz_NbrOfVehicles}\n                  data={\n                    this.vehicleCapacity.map(i => ({\n                      text: i,\n                      value: i,\n                    })) as any\n                  }\n                ></ir-select>\n                {/* <ir-input-text\n                  labelBorder=\"theme\"\n                  readonly\n                  value={this.pickupData.due_upon_booking}\n                  labelWidth={7}\n                  label={`${locales.entries.Lcz_DueUponBooking}  ${this.pickupData.currency.symbol}`}\n                  placeholder=\"\"\n                  class=\"\"\n                ></ir-input-text> */}\n                <div class=\"price-input-container\">\n                  <ir-price-input readOnly label={`${locales.entries.Lcz_DueUponBooking}`} value={this.pickupData.due_upon_booking} currency={this.pickupData.currency.symbol} />\n                </div>\n              </div>\n            </div>\n          )}\n        </section>\n        <div class={'sheet-footer'}>\n          <ir-button\n            onClick={() => this.closeModal.emit(null)}\n            btn_styles=\"justify-content-center\"\n            class={`flex-fill`}\n            text={locales.entries.Lcz_Cancel}\n            btn_color=\"secondary\"\n          ></ir-button>\n          {(this.defaultPickupData || this.pickupData.location !== -1) && (\n            <ir-button\n              btn_styles=\"justify-content-center align-items-center\"\n              class={'flex-fill'}\n              isLoading={this.isLoading}\n              text={locales.entries.Lcz_Save}\n              btn_color=\"primary\"\n              btn_type=\"submit\"\n            ></ir-button>\n          )}\n        </div>\n      </form>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n","import calendar_data from '@/stores/calendar-data';\nimport locales from '@/stores/locales.store';\nimport { Component, Host, Prop, h } from '@stencil/core';\nimport { _formatTime } from '../functions';\nimport moment from 'moment';\nimport { colorVariants } from '@/components/ui/ir-icons/icons';\nimport { Booking } from '@/models/booking.dto';\n@Component({\n  tag: 'ir-pickup-view',\n  styleUrl: 'ir-pickup-view.css',\n  scoped: true,\n})\nexport class IrPickupView {\n  @Prop() booking: Booking;\n  render() {\n    if (!calendar_data.pickup_service.is_enabled || !this.booking.is_editable) {\n      return null;\n    }\n    return (\n      <Host>\n        <div class=\"mb-1\">\n          <div class={'d-flex w-100 mb-1 align-items-center justify-content-between'}>\n            <p class={'font-size-large p-0 m-0 '}>{locales.entries.Lcz_Pickup}</p>\n            <ir-button id=\"pickup\" data-testid=\"new_pickup_btn\" variant=\"icon\" icon_name=\"edit\" style={{ ...colorVariants.secondary, '--icon-size': '1.5rem' }}></ir-button>\n          </div>\n          {this.booking.pickup_info && (\n            <div class={'card'}>\n              <div class={'p-1'}>\n                <div class={'d-flex align-items-center py-0 my-0 pickup-margin'}>\n                  <p class={'font-weight-bold mr-1 py-0 my-0'}>\n                    {locales.entries.Lcz_Date}: <span class={'font-weight-normal'}>{moment(this.booking.pickup_info.date, 'YYYY-MM-DD').format('MMM DD, YYYY')}</span>\n                  </p>\n                  {this.booking.pickup_info.hour && this.booking.pickup_info.minute && (\n                    <p class={'font-weight-bold flex-fill py-0 my-0'}>\n                      {locales.entries.Lcz_Time}:\n                      <span class={'font-weight-normal'}> {_formatTime(this.booking.pickup_info.hour.toString(), this.booking.pickup_info.minute.toString())}</span>\n                    </p>\n                  )}\n                  <p class={'font-weight-bold py-0 my-0'}>\n                    {locales.entries.Lcz_DueUponBooking}:{' '}\n                    <span class={'font-weight-normal'}>\n                      {this.booking.pickup_info.currency.symbol}\n                      {this.booking.pickup_info.total}\n                    </span>\n                  </p>\n                </div>\n                <p class={'font-weight-bold py-0 my-0'}>\n                  {locales.entries.Lcz_FlightDetails}:<span class={'font-weight-normal'}> {`${this.booking.pickup_info.details}`}</span>\n                </p>\n                <p class={'py-0 my-0 pickup-margin'}>{`${this.booking.pickup_info.selected_option.vehicle.description}`}</p>\n                <p class={'font-weight-bold py-0 my-0 pickup-margin'}>\n                  {locales.entries.Lcz_NbrOfVehicles}:<span class={'font-weight-normal'}> {`${this.booking.pickup_info.nbr_of_units}`}</span>\n                </p>\n                <p class={'small py-0 my-0 pickup-margin'}>\n                  {calendar_data.pickup_service.pickup_instruction.description}\n                  {calendar_data.pickup_service.pickup_cancelation_prepayment.description}\n                </p>\n              </div>\n            </div>\n          )}\n        </div>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n.dialog-container-height {\n  height: 4rem;\n}\n.list-title {\n  margin: 0;\n  padding: 0;\n  font-size: 14px;\n  font-weight: bold;\n  width: fit-content;\n}\n.list-item {\n  margin: 0;\n  padding: 0;\n  font-size: 14px;\n  margin-left: 5px;\n  width: fit-content;\n}\n.list-item.green {\n  color: #629a4c;\n  font-weight: 600;\n}\n.list-item.red {\n  color: #ff4961;\n  font-weight: 600;\n}\n","import { Component, h, Prop, State } from '@stencil/core';\nimport { _formatTime } from '../../functions';\nimport locales from '@/stores/locales.store';\nimport { IPmsLog } from '@/models/booking.dto';\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\nimport { BookingService } from '@/services/booking.service';\n\n@Component({\n  tag: 'ir-pms-logs',\n  styleUrl: 'ir-pms-logs.css',\n  scoped: true,\n})\nexport class IrPmsLogs {\n  @Prop() bookingNumber: string;\n\n  @State() pmsLogs: IPmsLog;\n\n  private bookingService = new BookingService();\n\n  componentWillLoad() {\n    this.init();\n  }\n\n  private async init() {\n    try {\n      this.pmsLogs = await this.bookingService.fetchPMSLogs(this.bookingNumber);\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  render() {\n    return (\n      <div class=\"p-1\">\n        <h3 class=\" text-left mb-1 dialog-title \">{locales.entries.Lcz_PMS_Logs}</h3>\n\n        {isRequestPending('/Get_Exposed_PMS_Logs') ? (\n          <div class={'d-flex align-items-center justify-content-center dialog-container-height'}>\n            <ir-spinner></ir-spinner>\n          </div>\n        ) : (\n          <div class={'dialog-container-height'}>\n            <div class=\"d-flex align-items-center \" style={{ paddingBottom: '0.5rem' }}>\n              <p class=\"list-title p-0 m-0\">{locales.entries.Lcz_SentAt}</p>\n              {this.pmsLogs?.sent_date ? (\n                <p class=\"list-item\">\n                  {this.pmsLogs?.sent_date} {_formatTime(this.pmsLogs?.sent_hour.toString(), this.pmsLogs?.sent_minute.toString())}\n                </p>\n              ) : (\n                <p class={`list-item ${this.pmsLogs?.sent_date ? 'green' : 'red'}`}>{this.pmsLogs?.is_acknowledged ? locales.entries.Lcz_YES : locales.entries.Lcz_NO}</p>\n              )}\n            </div>\n            <div class=\"d-flex align-items-center p-0 m-0\">\n              <h4 class=\"list-title p-0 m-0\">{locales.entries.Lcz_Acknowledged}</h4>\n              <p class={`list-item  ${this.pmsLogs?.is_acknowledged ? 'green' : 'red'}`}>{this.pmsLogs?.is_acknowledged ? locales.entries.Lcz_YES : locales.entries.Lcz_NO}</p>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n","import { colorVariants } from '@/components/ui/ir-icons/icons';\nimport { Booking } from '@/models/booking.dto';\nimport locales from '@/stores/locales.store';\nimport { getPrivateNote } from '@/utils/booking';\nimport { Component, Event, EventEmitter, Prop, State, h } from '@stencil/core';\nimport { ICountry } from '@/models/IBooking';\nimport { _formatDate, _formatTime } from '../functions';\nimport { BookingDetailsSidebarEvents, OpenSidebarEvent } from '../types';\n\n@Component({\n  tag: 'ir-reservation-information',\n  styleUrl: 'ir-reservation-information.css',\n  scoped: true,\n})\nexport class IrReservationInformation {\n  @Prop() booking: Booking;\n  @Prop() countries: ICountry[];\n\n  @State() userCountry: ICountry | null = null;\n  @Event() openSidebar: EventEmitter<OpenSidebarEvent<any>>;\n  componentWillLoad() {\n    const guestCountryId = this.booking?.guest?.country_id;\n    this.userCountry = guestCountryId ? this.countries?.find(country => country.id === guestCountryId) || null : null;\n  }\n  private handleEditClick(e: CustomEvent, type: BookingDetailsSidebarEvents) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.openSidebar.emit({ type });\n  }\n\n  private renderPhoneNumber() {\n    const { mobile_without_prefix, country_phone_prefix, country_id } = this.booking.guest;\n    if (!mobile_without_prefix) {\n      return null;\n    }\n    if (country_phone_prefix) {\n      return country_phone_prefix + ' ' + mobile_without_prefix;\n    }\n    if (country_id) {\n      const selectedCountry = this.countries.find(c => c.id === country_id);\n      if (!selectedCountry) {\n        throw new Error('Invalid country id');\n      }\n      return selectedCountry.phone_prefix + ' ' + mobile_without_prefix;\n    }\n    return mobile_without_prefix;\n    // const { mobile, country_phone_prefix, country_id } = this.booking.guest;\n    // if (!mobile) {\n    //   return null;\n    // }\n    // if (this.booking.is_direct) {\n    //   if (country_phone_prefix) {\n    //     return country_phone_prefix + ' ' + mobile;\n    //   }\n    //   if (country_id) {\n    //     const selectedCountry = this.countries.find(c => c.id === country_id);\n    //     if (!selectedCountry) {\n    //       throw new Error('Invalid country id');\n    //     }\n    //     return selectedCountry.phone_prefix + ' ' + mobile;\n    //   }\n    // }\n    // return mobile;\n  }\n  render() {\n    const privateNote = getPrivateNote(this.booking.extras);\n    return (\n      <div class=\"card\">\n        <div class=\"p-1\">\n          <p>{this.booking.property.name || ''}</p>\n          <ir-label\n            labelText={`${locales.entries.Lcz_Source}:`}\n            content={this.booking.origin.Label}\n            image={{ src: this.booking.origin.Icon, alt: this.booking.origin.Label }}\n          ></ir-label>\n          <ir-label\n            renderContentAsHtml\n            labelText={`${locales.entries.Lcz_BookedOn}:`}\n            content={`${_formatDate(this.booking.booked_on.date)}&nbsp&nbsp&nbsp&nbsp${_formatTime(\n              this.booking.booked_on.hour.toString(),\n              this.booking.booked_on.minute.toString(),\n            )}`}\n          ></ir-label>\n          <ir-label labelText={`${locales.entries.Lcz_BookedBy}:`} content={`${this.booking.guest.first_name} ${this.booking.guest.last_name}`}>\n            {this.booking.guest?.nbr_confirmed_bookings > 1 && !this.booking.agent && (\n              <div class={'m-0 p-0'} slot=\"prefix\">\n                <ir-tooltip message={`${locales.entries.Lcz_BookingsNbr}`.replace('%1', this.booking.guest.nbr_confirmed_bookings.toString())} customSlot>\n                  <div class=\"d-flex align-items-center m-0 p-0\" slot=\"tooltip-trigger\" style={{ gap: '0.25rem' }}>\n                    <p class={'p-0 m-0'} style={{ color: '#FB0AAD' }}>\n                      {this.booking.guest.nbr_confirmed_bookings}\n                    </p>\n                    <ir-icons style={{ '--icon-size': '1rem' }} color=\"#FB0AAD\" name=\"heart-fill\"></ir-icons>\n                  </div>\n                </ir-tooltip>\n              </div>\n            )}\n            <ir-button\n              slot=\"suffix\"\n              variant=\"icon\"\n              icon_name={'edit'}\n              style={{ ...colorVariants.secondary, '--icon-size': '1.1rem' }}\n              onClickHandler={e => this.handleEditClick(e, 'guest')}\n            ></ir-button>\n          </ir-label>\n          {this.booking.guest.mobile && <ir-label labelText={`${locales.entries.Lcz_Phone}:`} content={this.renderPhoneNumber()}></ir-label>}\n          {!this.booking.agent && <ir-label labelText={`${locales.entries.Lcz_Email}:`} content={this.booking.guest.email}></ir-label>}\n          {this.booking.guest.alternative_email && <ir-label labelText={`${locales.entries.Lcz_AlternativeEmail}:`} content={this.booking.guest.alternative_email}></ir-label>}\n          {this.booking?.guest?.address && <ir-label labelText={`${locales.entries.Lcz_Address}:`} content={this.booking.guest.address}></ir-label>}\n          {this.userCountry && (\n            <ir-label\n              labelText={`${locales.entries.Lcz_Country}:`}\n              isCountryImage\n              content={this.userCountry.name}\n              image={{ src: this.userCountry.flag, alt: this.userCountry.name }}\n            ></ir-label>\n          )}\n          {this.booking.guest?.notes && <ir-label display=\"inline\" labelText={`${locales.entries.Lcz_GuestPrivateNote}:`} content={this.booking.guest?.notes}></ir-label>}\n          {this.booking.is_direct && <ir-label labelText={`${locales.entries.Lcz_ArrivalTime}:`} content={this.booking.arrival.description}></ir-label>}\n          {this.booking.promo_key && <ir-label labelText={`${locales.entries.Lcz_Coupon}:`} content={this.booking.promo_key}></ir-label>}\n          {/* {this.booking.agent && <ir-label labelText={`${locales.entries.Lcz_AgentCode?.split(':')[0]}:`} content={this.booking.agent.name}></ir-label>} */}\n          {this.booking.is_in_loyalty_mode && !this.booking.promo_key && (\n            <div class=\"d-flex align-items-center\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" height={18} width={18}>\n                <path\n                  fill=\"#fc6c85\"\n                  d=\"M225.8 468.2l-2.5-2.3L48.1 303.2C17.4 274.7 0 234.7 0 192.8v-3.3c0-70.4 50-130.8 119.2-144C158.6 37.9 198.9 47 231 69.6c9 6.4 17.4 13.8 25 22.3c4.2-4.8 8.7-9.2 13.5-13.3c3.7-3.2 7.5-6.2 11.5-9c0 0 0 0 0 0C313.1 47 353.4 37.9 392.8 45.4C462 58.6 512 119.1 512 189.5v3.3c0 41.9-17.4 81.9-48.1 110.4L288.7 465.9l-2.5 2.3c-8.2 7.6-19 11.9-30.2 11.9s-22-4.2-30.2-11.9zM239.1 145c-.4-.3-.7-.7-1-1.1l-17.8-20c0 0-.1-.1-.1-.1c0 0 0 0 0 0c-23.1-25.9-58-37.7-92-31.2C81.6 101.5 48 142.1 48 189.5v3.3c0 28.5 11.9 55.8 32.8 75.2L256 430.7 431.2 268c20.9-19.4 32.8-46.7 32.8-75.2v-3.3c0-47.3-33.6-88-80.1-96.9c-34-6.5-69 5.4-92 31.2c0 0 0 0-.1 .1s0 0-.1 .1l-17.8 20c-.3 .4-.7 .7-1 1.1c-4.5 4.5-10.6 7-16.9 7s-12.4-2.5-16.9-7z\"\n                />\n              </svg>\n              <p class=\"m-0 p-0 ml-1\">{locales.entries.Lcz_LoyaltyDiscountApplied}</p>\n            </div>\n          )}\n          {this.booking.is_direct ? (\n            <ir-label labelText={`${locales.entries.Lcz_GuestRemark}:`} display=\"inline\" content={this.booking.remark}></ir-label>\n          ) : (\n            <ota-label\n              class={'m-0 p-0'}\n              label={`${locales.entries.Lcz_ChannelNotes || 'Channel notes'}:`}\n              remarks={this.booking.ota_notes}\n              maxVisibleItems={this.booking.ota_notes?.length}\n            ></ota-label>\n          )}\n          <div class=\"d-flex align-items-center justify-content-between\">\n            <ir-label\n              labelText={`${locales.entries.Lcz_BookingPrivateNote}:`}\n              placeholder={locales.entries.Lcz_VisibleToHotelOnly}\n              content={privateNote}\n              display={privateNote ? 'inline' : 'flex'}\n              // ignore_content\n            ></ir-label>\n            <ir-button variant=\"icon\" icon_name=\"edit\" style={colorVariants.secondary} onClickHandler={e => this.handleEditClick(e, 'extra_note')}></ir-button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n",".light-blue-bg {\n  background: #acecff;\n  padding: 0.1rem 0.3rem;\n  border-radius: 5px;\n  display: block;\n  max-width: 100px;\n  box-sizing: border-box;\n  display: inline-block;\n  overflow: hidden;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  cursor: default;\n}\n\n.room_statements {\n  display: block;\n  width: 100%; /* Ensure the container uses the full width */\n}\n.room_statements {\n  display: block;\n  width: 100%;\n}\n.room_statements span {\n  display: inline;\n  white-space: normal;\n  line-height: 1.5;\n  word-break: break-word;\n}\n\n.room_statements b {\n  display: inline;\n  margin-right: 5px;\n}\n.payment-container {\n  position: absolute;\n  right: 1rem;\n  height: fit-content;\n}\n:host {\n  position: relative;\n}\n.sm-mr {\n  margin-right: 3px;\n}\n.subtotal_row {\n  padding-top: 8px;\n  font-weight: 600;\n}\n.room_actions_btns {\n  gap: 0.5rem;\n}\n.night-cost {\n  color: #7cbebe;\n}\n.room_actions_btns {\n  /* max-width: 50%; */\n  white-space: nowrap;\n  width: max-content;\n}\n.room_actions_btns {\n  flex: 1 1 0%;\n  display: flex;\n  justify-content: flex-end;\n}\n/* .cancelation {\n  max-width: 30%;\n} */\n.mx-0-5 {\n  margin-left: 2px !important;\n  margin-right: 2px !important;\n}\n.tax-width {\n  font-size: 10px;\n  /* flex-wrap: wrap; */\n}\n.sm-mb-1 {\n  margin-bottom: 5px !important;\n}\n.sm-mt-1 {\n  margin-top: 5px !important;\n}\n.mx-01 {\n  --m: 5px;\n  margin-right: var(--m) !important;\n  margin-left: var(--m) !important;\n}\n","import { Component, h, Prop, EventEmitter, Event, Listen, State, Element, Host, Fragment, Watch } from '@stencil/core';\nimport { _getDay } from '../functions';\nimport { Booking, IUnit, Occupancy, Room, SharedPerson } from '@/models/booking.dto';\nimport { TIglBookPropertyPayload } from '@/models/igl-book-property';\nimport { formatName } from '@/utils/booking';\nimport locales from '@/stores/locales.store';\nimport calendar_data, { isSingleUnit } from '@/stores/calendar-data';\nimport { colorVariants } from '@/components/ui/ir-icons/icons';\nimport { formatAmount } from '@/utils/utils';\nimport { IEntries } from '@/models/IBooking';\nimport { BookingService } from '@/services/booking.service';\nimport { OpenSidebarEvent, RoomGuestsPayload } from '../types';\nimport { IToast } from '@/components/ui/ir-toast/toast';\nexport type RoomModalReason = 'delete' | 'checkin' | 'checkout' | null;\n@Component({\n  tag: 'ir-room',\n  styleUrl: 'ir-room.css',\n  scoped: true,\n})\nexport class IrRoom {\n  @Element() element: HTMLIrRoomElement;\n  // Room Data\n  @Prop() booking: Booking;\n  @Prop() bookingIndex: number;\n  @Prop() isEditable: boolean;\n  @Prop() room: Room;\n  @Prop() property_id: number;\n  // Meal Code names\n  @Prop() mealCodeName: string;\n  @Prop() myRoomTypeFoodCat: string;\n  // Currency\n  @Prop() currency: string = 'USD';\n  @Prop() language: string = 'en';\n  @Prop() legendData;\n  @Prop() roomsInfo;\n  @Prop() bedPreferences: IEntries[];\n  @Prop() departureTime: IEntries[];\n  // Booleans Conditions\n  @Prop() hasRoomEdit: boolean = false;\n  @Prop() hasRoomDelete: boolean = false;\n  @Prop() hasRoomAdd: boolean = false;\n  @Prop() hasCheckIn: boolean = false;\n  @Prop() hasCheckOut: boolean = false;\n\n  @State() collapsed: boolean = false;\n  @State() isLoading: boolean = false;\n  @State() modalReason: RoomModalReason = null;\n  @State() mainGuest: SharedPerson;\n  @State() isModelOpen: boolean = false;\n\n  // Event Emitters\n  @Event({ bubbles: true, composed: true }) deleteFinished: EventEmitter<string>;\n  @Event({ bubbles: true, composed: true }) toast: EventEmitter<IToast>;\n  @Event({ bubbles: true, composed: true }) pressCheckIn: EventEmitter;\n  @Event({ bubbles: true, composed: true }) pressCheckOut: EventEmitter;\n  @Event({ bubbles: true, composed: true }) editInitiated: EventEmitter<TIglBookPropertyPayload>;\n  @Event() resetbooking: EventEmitter<null>;\n  @Event() openSidebar: EventEmitter<OpenSidebarEvent<RoomGuestsPayload>>;\n\n  private modal: HTMLIrModalElement;\n  private bookingService = new BookingService();\n\n  componentWillLoad() {\n    this.mainGuest = this.getMainGuest();\n  }\n  @Listen('clickHandler')\n  handleClick(e) {\n    let target = e.target;\n    if (target.id == 'checkin') {\n      this.pressCheckIn.emit(this.room);\n    } else if (target.id == 'checkout') {\n      this.pressCheckOut.emit(this.room);\n    }\n  }\n  @Watch('room')\n  handleRoomDataChange() {\n    this.mainGuest = this.getMainGuest();\n  }\n\n  private getDateStr(date, locale = 'default') {\n    return date.getDate() + ' ' + date.toLocaleString(locale, { month: 'short' }) + ' ' + date.getFullYear();\n  }\n  private handleEditClick() {\n    this.editInitiated.emit({\n      event_type: 'EDIT_BOOKING',\n      ID: this.room['assigned_units_pool'],\n      NAME: formatName(this.mainGuest?.first_name, this.mainGuest?.last_name),\n      EMAIL: this.booking.guest.email,\n      PHONE: this.booking.guest.mobile,\n      REFERENCE_TYPE: '',\n      FROM_DATE: this.booking.from_date,\n      TO_DATE: this.booking.to_date,\n      TITLE: `${locales.entries.Lcz_EditBookingFor} ${this.room?.roomtype?.name} ${(this.room?.unit as IUnit)?.name || ''}`,\n      defaultDateRange: {\n        dateDifference: this.room.days.length,\n        fromDate: new Date(this.room.from_date + 'T00:00:00'),\n        fromDateStr: this.getDateStr(new Date(this.room.from_date + 'T00:00:00')),\n        toDate: new Date(this.room.to_date + 'T00:00:00'),\n        toDateStr: this.getDateStr(new Date(this.room.to_date + 'T00:00:00')),\n        message: '',\n      },\n      bed_preference: this.room.bed_preference,\n      adult_child_offering: this.room.rateplan.selected_variation.adult_child_offering,\n      ADULTS_COUNT: this.room.rateplan.selected_variation.adult_nbr,\n      ARRIVAL: this.booking.arrival,\n      ARRIVAL_TIME: this.booking.arrival.description,\n      BOOKING_NUMBER: this.booking.booking_nbr,\n      cancelation: this.room.rateplan.cancelation,\n      channel_booking_nbr: this.booking.channel_booking_nbr,\n      CHILDREN_COUNT: this.room.rateplan.selected_variation.child_nbr,\n      COUNTRY: this.booking.guest.country_id,\n      ENTRY_DATE: this.booking.from_date,\n      FROM_DATE_STR: this.booking.format.from_date,\n      guarantee: this.room.rateplan.guarantee,\n      GUEST: this.mainGuest,\n      IDENTIFIER: this.room.identifier,\n      is_direct: this.booking.is_direct,\n      IS_EDITABLE: this.booking.is_editable,\n      NO_OF_DAYS: this.room.days.length,\n      NOTES: this.booking.remark,\n      origin: this.booking.origin,\n      POOL: this.room['assigned_units_pool'],\n      PR_ID: (this.room.unit as IUnit)?.id,\n      RATE: this.room.total,\n      RATE_PLAN: this.room.rateplan.name,\n      RATE_PLAN_ID: this.room.rateplan.id,\n      RATE_TYPE: this.room.roomtype.id,\n      ROOMS: this.booking.rooms,\n      SOURCE: this.booking.source,\n      SPLIT_BOOKING: false,\n      STATUS: 'IN-HOUSE',\n      TO_DATE_STR: this.booking.format.to_date,\n      TOTAL_PRICE: this.booking.total,\n      legendData: this.legendData,\n      roomsInfo: this.roomsInfo,\n      roomName: (this.room.unit as IUnit)?.name || '',\n      PICKUP_INFO: this.booking.pickup_info,\n      booking: this.booking,\n      currentRoomType: this.room,\n    });\n  }\n  private openModal(reason: RoomModalReason) {\n    if (!reason) {\n      return;\n    }\n    this.modalReason = reason;\n    this.modal.openModal();\n  }\n  private async handleModalConfirmation(e: CustomEvent) {\n    try {\n      e.stopImmediatePropagation();\n      e.stopPropagation();\n      if (!this.modalReason) {\n        return;\n      }\n      this.isLoading = true;\n      switch (this.modalReason) {\n        case 'delete':\n          await this.deleteRoom();\n          break;\n        case 'checkin':\n        case 'checkout':\n          await this.bookingService.handleExposedRoomInOut({\n            booking_nbr: this.booking.booking_nbr,\n            room_identifier: this.room.identifier,\n            status: this.modalReason === 'checkin' ? '001' : '002',\n          });\n          this.resetbooking.emit(null);\n          break;\n        default:\n          break;\n      }\n    } catch (error) {\n      console.log(error);\n    } finally {\n      this.isLoading = false;\n      this.modalReason = null;\n      this.modal.closeModal();\n    }\n  }\n  private async deleteRoom() {\n    let oldRooms = [...this.booking.rooms];\n    oldRooms = oldRooms.filter(room => room.identifier !== this.room.identifier);\n\n    const body = {\n      assign_units: true,\n      check_in: true,\n      is_pms: true,\n      is_direct: true,\n      booking: {\n        booking_nbr: this.booking.booking_nbr,\n        from_date: this.booking.from_date,\n        to_date: this.booking.to_date,\n        remark: this.booking.remark,\n        property: this.booking.property,\n        source: this.booking.source,\n        currency: this.booking.currency,\n        arrival: this.booking.arrival,\n        guest: this.booking.guest,\n        rooms: oldRooms,\n      },\n      extras: this.booking.extras,\n      pickup_info: this.booking.pickup_info,\n    };\n    await this.bookingService.doReservation(body);\n    this.deleteFinished.emit(this.room.identifier);\n  }\n  private async updateDepartureTime(code: string) {\n    try {\n      await this.bookingService.setDepartureTime({\n        property_id: this.property_id,\n        code,\n        room_identifier: this.room.identifier,\n      });\n      this.toast.emit({\n        type: 'success',\n        description: '',\n        title: 'Saved Successfully',\n        position: 'top-right',\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  private formatVariation({ infant_nbr, adult_nbr, children_nbr }: Occupancy) {\n    const adultCount = adult_nbr > 0 ? adult_nbr : 0;\n    const childCount = children_nbr > 0 ? children_nbr : 0;\n    const infantCount = infant_nbr > 0 ? infant_nbr : 0;\n\n    const adultLabel = adultCount > 1 ? locales.entries.Lcz_Adults.toLowerCase() : locales.entries.Lcz_Adult.toLowerCase();\n    const childLabel = childCount > 1 ? locales.entries.Lcz_Children.toLowerCase() : locales.entries.Lcz_Child.toLowerCase();\n    const infantLabel = infantCount > 1 ? locales.entries.Lcz_Infants.toLowerCase() : locales.entries.Lcz_Infant.toLowerCase();\n\n    const parts = [];\n    if (adultCount > 0) {\n      parts.push(`${adultCount} ${adultLabel}`);\n    }\n    if (childCount > 0) {\n      parts.push(`${childCount} ${childLabel}`);\n    }\n    if (infantCount > 0) {\n      parts.push(`${infantCount} ${infantLabel}`);\n    }\n\n    return parts.join('&nbsp&nbsp&nbsp&nbsp');\n  }\n  private getSmokingLabel() {\n    if (this.booking.is_direct) {\n      if (!this.room.smoking_option) {\n        return null;\n      }\n      const currRT = calendar_data.roomsInfo.find(rt => rt.id === this.room.roomtype.id);\n      if (currRT) {\n        const smoking_option = currRT['smoking_option']?.allowed_smoking_options;\n        if (smoking_option) {\n          return smoking_option.find(s => s.code === this.room.smoking_option)?.description;\n        }\n        return null;\n      }\n      return null;\n    }\n    return this.room.ota_meta?.smoking_preferences;\n  }\n\n  private getBedName() {\n    if (this.booking.is_direct) {\n      const bed = this.bedPreferences.find(p => p.CODE_NAME === this.room?.bed_preference?.toString());\n      if (!bed) {\n        return;\n      }\n      return bed[`CODE_VALUE_${this.language}`] ?? bed.CODE_VALUE_EN;\n    }\n    return this.room.ota_meta?.bed_preferences;\n  }\n  private renderModalMessage() {\n    switch (this.modalReason) {\n      case 'delete':\n        return `${locales.entries['Lcz_AreYouSureDoYouWantToRemove ']} ${this.room.roomtype.name} ${this.room.unit ? (this.room.unit as IUnit).name : ''} ${\n          locales.entries.Lcz_FromThisBooking\n        }`;\n      case 'checkin':\n        return `Are you sure you want to Check In this unit?\n`;\n      case 'checkout':\n        return `Are you sure you want to Check Out this unit?`;\n      default:\n        return '';\n    }\n  }\n  private handleCheckIn() {\n    const { adult_nbr, children_nbr, infant_nbr } = this.room.occupancy;\n    if (this.room.sharing_persons.length < adult_nbr + children_nbr + infant_nbr) {\n      return this.showGuestModal();\n    }\n    return this.renderModalMessage();\n  }\n  private getMainGuest() {\n    return this.room.sharing_persons?.find(p => p.is_main);\n  }\n\n  render() {\n    const bed = this.getBedName();\n    return (\n      <Host class=\"p-1 d-flex m-0\">\n        <ir-button\n          variant=\"icon\"\n          id=\"drawer-icon\"\n          data-toggle=\"collapse\"\n          data-target={`#roomCollapse-${this.room.identifier?.split(' ').join('')}`}\n          aria-expanded={this.collapsed ? 'true' : 'false'}\n          aria-controls=\"myCollapse\"\n          class=\"mr-1\"\n          icon_name={this.collapsed ? 'closed_eye' : 'open_eye'}\n          onClickHandler={() => {\n            this.collapsed = !this.collapsed;\n          }}\n          style={{ '--icon-size': '1.6rem' }}\n        ></ir-button>\n        <div class=\"flex-fill m-0 \">\n          <div class=\"d-flex align-items-start justify-content-between sm-mb-1\">\n            <p class=\"m-0 p-0\">\n              <span class=\"m-0 p-0\" style={{ fontWeight: '600' }}>\n                {this.myRoomTypeFoodCat || ''}{' '}\n              </span>{' '}\n              {this.mealCodeName} {this.room.rateplan.is_non_refundable && ` - ${locales.entries.Lcz_NonRefundable}`}{' '}\n            </p>\n            {/*this.room.My_Room_type.My_Room_type_desc[0].CUSTOM_TXT || ''*/}\n            <div class=\"d-flex m-0 p-0 align-items-center room_actions_btns\">\n              <span class=\"p-0 m-0 font-weight-bold\">{formatAmount(this.currency, this.room['gross_total'])}</span>\n              {this.hasRoomEdit && this.isEditable && (\n                <ir-button\n                  id={`roomEdit-${this.room.identifier}`}\n                  variant=\"icon\"\n                  icon_name=\"edit\"\n                  // class=\"mx-1\"\n                  style={colorVariants.secondary}\n                  onClickHandler={this.handleEditClick.bind(this)}\n                ></ir-button>\n              )}\n              {this.hasRoomDelete && this.isEditable && (\n                <ir-button\n                  variant=\"icon\"\n                  onClickHandler={this.openModal.bind(this, 'delete')}\n                  id={`roomDelete-${this.room.identifier}`}\n                  icon_name=\"trash\"\n                  style={colorVariants.danger}\n                ></ir-button>\n              )}\n            </div>\n          </div>\n          <div class=\"d-flex align-items-center sm-mb-1\">\n            <ir-date-view\n              class=\"mr-1  flex-grow-1\"\n              style={{ width: 'fit-content' }}\n              from_date={this.room.from_date}\n              to_date={this.room.to_date}\n              showDateDifference={false}\n            ></ir-date-view>\n            {!isSingleUnit(this.room.roomtype.id) && calendar_data.is_frontdesk_enabled && this.room.unit && (\n              <div class={'d-flex justify-content-center align-items-center'}>\n                <ir-tooltip message={(this.room.unit as IUnit).name} customSlot>\n                  <span slot=\"tooltip-trigger\" class={`light-blue-bg  ${this.hasCheckIn || this.hasCheckOut ? 'mr-2' : ''} `}>\n                    {(this.room.unit as IUnit).name}\n                  </span>\n                </ir-tooltip>\n              </div>\n            )}\n            {this.hasCheckIn && (\n              <ir-button onClickHandler={this.handleCheckIn.bind(this)} id=\"checkin\" btn_color=\"outline\" size=\"sm\" text={locales.entries.Lcz_CheckIn}></ir-button>\n            )}\n            {this.hasCheckOut && (\n              <ir-button onClickHandler={this.openModal.bind(this, 'checkout')} id=\"checkout\" btn_color=\"outline\" size=\"sm\" text={locales.entries.Lcz_CheckOut}></ir-button>\n            )}\n          </div>\n          <div class={'d-flex align-items-center'} style={{ gap: '0.5rem' }}>\n            <p class=\"m-0 p-0\">{`${this.mainGuest.first_name || ''} ${this.mainGuest.last_name || ''}`}</p>\n            {this.room.rateplan.selected_variation.adult_nbr > 0 &&\n              (this.room.unit ? (\n                <ir-tooltip message={'View guests'} class=\"m-0 p-0\" customSlot>\n                  <ir-button\n                    class=\"m-0 p-0\"\n                    slot=\"tooltip-trigger\"\n                    btn_color=\"link\"\n                    renderContentAsHtml\n                    onClickHandler={() => this.showGuestModal()}\n                    size=\"sm\"\n                    btnStyle={{ width: 'fit-content', margin: '0', padding: '0', fontSize: 'inherit', textAlign: 'center', lineHeight: '1.2' }}\n                    text={this.formatVariation(this.room.occupancy)}\n                  ></ir-button>\n                </ir-tooltip>\n              ) : (\n                <span innerHTML={this.formatVariation(this.room.occupancy)}></span>\n              ))}\n            {bed && <p class=\"m-0 p-0\">({bed})</p>}\n          </div>\n          <div class=\"d-flex align-items-center\" style={{ marginTop: '0.5rem', marginBottom: '0.875rem', gap: '0.5rem' }}>\n            <p class=\"m-0 p-0\">Expected departure time:</p>\n            <ir-select\n              selectedValue={this.room.departure_time?.code}\n              showFirstOption={false}\n              onSelectChange={e => {\n                this.updateDepartureTime(e.detail);\n              }}\n              data={this.departureTime?.map(d => ({\n                text: d[`CODE_VALUE_${this.language?.toUpperCase()}`] ?? d[`CODE_VALUE_EN`],\n                value: d.CODE_NAME,\n              }))}\n            ></ir-select>\n          </div>\n          <div class=\"collapse\" id={`roomCollapse-${this.room.identifier?.split(' ').join('')}`}>\n            <div class=\"d-flex sm-mb-1 sm-mt-1\">\n              <div class=\" sm-padding-top\">\n                <p class=\"sm-padding-right\" style={{ fontWeight: '600' }}>{`${locales.entries.Lcz_Breakdown}:`}</p>\n              </div>\n              <div class={'flex-fill'}>\n                <table>\n                  {this.room.days.length > 0 &&\n                    this.room.days.map(room => {\n                      return (\n                        <tr>\n                          <td class={'pr-2 text-right'}>{_getDay(room.date)}</td>\n                          <td class=\"text-right\">{formatAmount(this.currency, room.amount)}</td>\n                          {room.cost > 0 && room.cost !== null && <td class=\"pl-2 text-left night-cost\">{formatAmount(this.currency, room.cost)}</td>}\n                        </tr>\n                      );\n                    })}\n                  <tr class={''}>\n                    <th class=\"text-right pr-2 subtotal_row\">{locales.entries.Lcz_SubTotal}</th>\n                    <th class=\"text-right subtotal_row\">{formatAmount(this.currency, this.room.total)}</th>\n                    {this.room.gross_cost > 0 && this.room.gross_cost !== null && <th class=\"pl-2 text-right night-cost\">{formatAmount(this.currency, this.room.cost)}</th>}\n                  </tr>\n                  {this.booking.is_direct ? (\n                    <Fragment>\n                      {(() => {\n                        const filtered_data = calendar_data.taxes.filter(tx => tx.pct > 0);\n                        return filtered_data.map(d => {\n                          return (\n                            <tr>\n                              <td class=\"text-right pr-2\">\n                                {d.is_exlusive ? locales.entries.Lcz_Excluding : locales.entries.Lcz_Including} {d.name} ({d.pct}%)\n                              </td>\n                              <td class=\"text-right\">{formatAmount(this.currency, (this.room.total * d.pct) / 100)}</td>\n                              {this.room.gross_cost > 0 && this.room.gross_cost !== null && (\n                                <td class=\"pl-2 text-right night-cost\">{formatAmount(this.currency, (this.room.cost * d.pct) / 100)}</td>\n                              )}\n                            </tr>\n                          );\n                        });\n                      })()}\n                    </Fragment>\n                  ) : (\n                    <Fragment>\n                      {(() => {\n                        const filtered_data = this.room.ota_taxes.filter(tx => tx.amount > 0);\n                        return filtered_data.map(d => {\n                          return (\n                            <tr>\n                              <td class=\"text-right pr-2\">\n                                {d.is_exlusive ? locales.entries.Lcz_Excluding : locales.entries.Lcz_Including} {d.name}\n                              </td>\n                              <td class=\"text-right\">\n                                {d.currency.symbol}\n                                {d.amount}\n                              </td>\n                            </tr>\n                          );\n                        });\n                      })()}\n                    </Fragment>\n                  )}\n                </table>\n              </div>\n            </div>\n            <ir-label labelText={`${locales.entries.Lcz_SmokingOptions}:`} display=\"inline\" content={this.getSmokingLabel()}></ir-label>\n            {this.booking.is_direct && (\n              <Fragment>\n                {this.room.rateplan.cancelation && (\n                  <ir-label labelText={`${locales.entries.Lcz_Cancellation}:`} display=\"inline\" content={this.room.rateplan.cancelation || ''} renderContentAsHtml></ir-label>\n                )}\n                {this.room.rateplan.guarantee && (\n                  <ir-label labelText={`${locales.entries.Lcz_Guarantee}:`} display=\"inline\" content={this.room.rateplan.guarantee || ''} renderContentAsHtml></ir-label>\n                )}\n              </Fragment>\n            )}\n            {this.room.ota_meta && (\n              <div>\n                <ir-label labelText={`${locales.entries.Lcz_MealPlan}:`} display=\"inline\" content={this.room.ota_meta.meal_plan}></ir-label>\n                <ir-label labelText={`${locales.entries.Lcz_Policies}:`} display=\"inline\" content={this.room.ota_meta.policies}></ir-label>\n              </div>\n            )}\n            {/* {this.bookingEvent.is_direct && <ir-label labelText={`${locales.entries.Lcz_MealPlan}:`} content={this.mealCodeName}></ir-label>} */}\n          </div>\n        </div>\n        <ir-modal\n          autoClose={false}\n          ref={el => (this.modal = el)}\n          isLoading={this.isLoading}\n          onConfirmModal={this.handleModalConfirmation.bind(this)}\n          iconAvailable={true}\n          icon=\"ft-alert-triangle danger h1\"\n          leftBtnText={locales.entries.Lcz_Cancel}\n          rightBtnText={this.modalReason === 'delete' ? locales.entries.Lcz_Delete : locales.entries.Lcz_Confirm}\n          leftBtnColor=\"secondary\"\n          rightBtnColor={this.modalReason === 'delete' ? 'danger' : 'primary'}\n          modalTitle={locales.entries.Lcz_Confirmation}\n          modalBody={this.renderModalMessage()}\n        ></ir-modal>\n      </Host>\n    );\n  }\n  private showGuestModal(): void {\n    const { adult_nbr, children_nbr, infant_nbr } = this.room.occupancy;\n    this.openSidebar.emit({\n      type: 'room-guest',\n      payload: {\n        roomName: (this.room.unit as IUnit)?.name,\n        sharing_persons: this.room.sharing_persons,\n        totalGuests: adult_nbr + children_nbr + infant_nbr,\n        checkin: this.hasCheckIn,\n        identifier: this.room.identifier,\n      },\n    });\n  }\n}\n","import { SharedPerson } from '@/models/booking.dto';\nimport moment from 'moment';\nimport { FactoryArg, MaskedRange } from 'imask';\n\nexport const defaultGuest: SharedPerson = {\n  id: -1,\n  full_name: '',\n  country_id: null,\n  dob: '',\n  id_info: {\n    type: {\n      code: null,\n      description: null,\n    },\n    number: '',\n  },\n  address: null,\n  alternative_email: null,\n  cci: null,\n  city: null,\n  country: undefined,\n  country_phone_prefix: null,\n  email: null,\n  first_name: '',\n  last_name: '',\n  mobile: null,\n  nbr_confirmed_bookings: 0,\n  notes: null,\n  password: null,\n  subscribe_to_news_letter: null,\n};\n/**Date of birth mask for room guests  with min */\nexport const dateMask: FactoryArg = {\n  mask: Date,\n  pattern: 'DD/MM/YYYY',\n  lazy: false,\n  min: new Date(1900, 0, 1),\n  max: new Date(),\n  format: date => moment(date).format('DD/MM/YYYY'),\n  parse: str => moment(str, 'DD/MM/YYYY').toDate(),\n  autofix: true,\n  placeholderChar: '_',\n  blocks: {\n    YYYY: {\n      mask: MaskedRange,\n      from: 1970,\n      to: new Date().getFullYear(),\n      placeholderChar: 'Y',\n    },\n    MM: {\n      mask: MaskedRange,\n      from: 1,\n      to: 12,\n      placeholderChar: 'M',\n    },\n    DD: {\n      mask: MaskedRange,\n      from: 1,\n      to: 31,\n      placeholderChar: 'D',\n    },\n  },\n};\n",":host {\n  display: block;\n  height: 100%;\n  position: relative;\n  text-align: start !important;\n}\n.id-select {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  border-right-width: 0;\n}\n:host {\n  display: block;\n  width: 100%;\n}\n\n.guest-grid > * {\n  height: 100%;\n}\n\n.guests-labels {\n  display: none;\n}\n.guest_label {\n  width: 100px;\n  color: #6b6f82;\n}\n.sharing_persons_label {\n  display: none;\n}\n.loading-container {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 0;\n  padding: 0;\n}\n.guest_document input {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.guests-labels *,\n.sharing_persons_label {\n  margin-bottom: 0.5rem;\n  padding-bottom: 0;\n}\n\n/*sm*/\n@media (min-width: 640px) {\n}\n\n/*md*/\n@media (min-width: 768px) {\n  .sharing_persons_label {\n    display: block;\n  }\n  .guest_country_picker {\n    margin-bottom: 3px;\n  }\n  .guest-grid {\n    display: grid;\n    grid-template-columns: 2fr 2fr 2fr 2fr 5fr;\n    gap: 0.5rem;\n    align-items: flex-start;\n  }\n\n  .guest_label,\n  .sharing_persons_heading,\n  .main_guest_heading {\n    display: none;\n  }\n}\n\n/*lg*/\n@media (min-width: 1024px) {\n}\n\n/*xl*/\n@media (min-width: 1280px) {\n}\n\n/*2xl*/\n@media (min-width: 1536px) {\n}\n",":host {\n  height: 100%;\n}\n.sheet-container {\n  display: flex !important;\n  flex-direction: column !important;\n  background: white;\n  height: 100vh;\n  gap: 1rem;\n  z-index: 1000;\n}\n.sheet-container {\n  height: -webkit-fill-available;\n  height: 100vh;\n  height: 100dvh;\n}\n\n/* @supports (height: 100svh) {\n  .sheet-container {\n    height: 100svh;\n  }\n} */\n.sheet-footer {\n  position: sticky;\n  bottom: 0;\n  z-index: 20;\n  background: white;\n  border-top: 1px solid #e4e5ec;\n  display: flex;\n  flex-direction: column;\n  padding: 1rem;\n  gap: 0.5rem;\n}\n.sheet-header {\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  background: white;\n}\n.sheet-body {\n  flex: 1 1 0%;\n}\n/* @media (max-width: 767px) {\n  .sheet-footer {\n    bottom: env(safe-area-inset-bottom);\n  }\n} */\n@media (min-width: 768px) {\n  .sheet-footer {\n    flex-direction: row;\n    align-items: center;\n  }\n}\n","import { SharedPerson, validateSharedPerson, ZIdInfo, ZSharedPerson } from '@/models/booking.dto';\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\nimport locales from '@/stores/locales.store';\nimport { Component, Event, EventEmitter, Fragment, Prop, State, h } from '@stencil/core';\nimport moment from 'moment';\nimport { dateMask, defaultGuest } from './data';\nimport { BookingService } from '@/services/booking.service';\nimport { ICountry, IEntries } from '@/models/IBooking';\nimport { ZodError } from 'zod';\n@Component({\n  tag: 'ir-room-guests',\n  styleUrls: ['ir-room-guests.css', '../../../common/sheet.css'],\n  scoped: true,\n})\nexport class IrRoomGuests {\n  /**\n   * The name of the room currently being displayed.\n   * Used to label the room in the user interface for clarity.\n   */\n  @Prop() roomName: string;\n\n  /**\n   * A unique identifier for the room.\n   * This is used to distinguish between rooms, especially when performing operations like saving or checking in guests.\n   */\n  @Prop() identifier: string;\n\n  /**\n   * An array of people sharing the room.\n   * Contains information about the {locales.entries.Lcz_MainGuest} and additional guests, such as their name, date of birth, {locales.entries.Lcz_Nationality}, and ID details.\n   */\n  @Prop() sharedPersons: SharedPerson[] = [];\n\n  /**\n   * The total number of guests for the room.\n   * Determines how many guest input forms to display in the UI.\n   */\n  @Prop() totalGuests: number = 0;\n\n  /**\n   * A list of available countries.\n   * Used to populate dropdowns for selecting the {locales.entries.Lcz_Nationality} of guests.\n   */\n  @Prop() countries: ICountry[];\n\n  /**\n   * A boolean indicating whether the room is in the process of being checked in.\n   * If true, additional actions like saving the room state as \"checked in\" are performed.\n   */\n  @Prop() checkIn: boolean;\n\n  /**\n   * The language used for displaying text content in the component.\n   * Defaults to English ('en'), but can be set to other supported languages.\n   */\n  @Prop() language: string = 'en';\n\n  /**\n   * A unique booking number associated with the room.\n   * This is used for backend operations like saving guest information or checking in the room.\n   */\n  @Prop() bookingNumber: string;\n\n  @State() guests: SharedPerson[] = [];\n  @State() idTypes: IEntries[] = [];\n  @State() error: Record<string, boolean> = {};\n  @State() isLoading: boolean;\n  @State() propertyCountry: ICountry;\n  @State() autoValidate = false;\n\n  @Event() closeModal: EventEmitter<null>;\n  @Event() resetBookingEvt: EventEmitter<null>;\n  @Event() updateRoomGuests: EventEmitter<{ identifier: string; guests: SharedPerson[] }>;\n\n  private bookingService = new BookingService();\n\n  componentWillLoad() {\n    this.init();\n    this.initializeGuests();\n  }\n\n  private async init() {\n    try {\n      this.isLoading = true;\n      const [country, idTypes] = await Promise.all([this.bookingService.getUserDefaultCountry(), this.bookingService.getSetupEntriesByTableName('_ID_TYPE')]);\n      this.idTypes = idTypes;\n      if (country) {\n        this.propertyCountry = this.countries.find(c => c.id === country.COUNTRY_ID);\n      }\n    } catch (error) {\n      console.error(error);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  private initializeGuests(): void {\n    let guests = [];\n    if (this.totalGuests > this.sharedPersons.length) {\n      const defaultGuestsCount = this.totalGuests - this.sharedPersons.length;\n      guests = [\n        ...this.sharedPersons,\n        ...Array(defaultGuestsCount).fill({\n          ...defaultGuest,\n          id_info: {\n            ...defaultGuest.id_info,\n            type: {\n              code: this.idTypes[0]?.CODE_NAME || '001',\n              description: this.idTypes[0]?.CODE_VALUE_EN || '',\n            },\n            number: '',\n          },\n        }),\n      ];\n    } else {\n      guests = [...this.sharedPersons];\n    }\n    guests = guests.map(g => ({ ...g, dob: new Date(g.dob).getFullYear() === 1900 ? null : g.dob }));\n    this.guests = guests.map(g => ({ ...g, dob: g.dob ? moment(new Date(g.dob)).format('DD/MM/YYYY') : '', country_id: g.country ? g.country.id : null }));\n  }\n\n  private updateGuestInfo(index: number, params: Partial<SharedPerson>) {\n    const tempGuests = [...this.guests];\n    let tempGuest = tempGuests[index];\n    tempGuest = { ...tempGuest, ...params };\n    tempGuests[index] = tempGuest;\n    this.guests = [...tempGuests];\n  }\n\n  private async saveGuests() {\n    try {\n      this.error = {};\n      this.autoValidate = true;\n      // ZSharedPersons.parse(this.guests);\n      for (const guest of this.guests) {\n        validateSharedPerson(guest);\n      }\n      await this.bookingService.handleExposedRoomGuests({\n        booking_nbr: this.bookingNumber,\n        identifier: this.identifier,\n        guests: this.guests\n          .map(g => {\n            if (!g.first_name && g.id === -1) {\n              return null;\n            }\n            return { ...g, dob: g.dob ? moment(g.dob, 'DD/MM/YYYY').format('YYYY-MM-DD') : null };\n          })\n          .filter(Boolean),\n      });\n      if (this.checkIn) {\n        await this.bookingService.handleExposedRoomInOut({\n          booking_nbr: this.bookingNumber,\n          room_identifier: this.identifier,\n          status: '001',\n        });\n      }\n      this.closeModal.emit(null);\n      this.updateRoomGuests.emit({ identifier: this.identifier, guests: this.guests });\n      this.resetBookingEvt.emit();\n    } catch (error) {\n      console.log(error);\n      if (error instanceof ZodError) {\n        let errors = {};\n        error.issues.forEach(e => {\n          errors[e.path[e.path.length - 1]] = true;\n        });\n        this.error = { ...errors };\n      }\n    }\n  }\n\n  render() {\n    if (this.isLoading) {\n      return (\n        <div class={'loading-container'}>\n          <ir-spinner></ir-spinner>\n        </div>\n      );\n    }\n    return (\n      <form\n        class=\"sheet-container\"\n        style={{ minWidth: '300px' }}\n        onSubmit={e => {\n          e.preventDefault();\n          this.saveGuests();\n        }}\n      >\n        <ir-title class=\"px-1 sheet-header\" onCloseSideBar={() => this.closeModal.emit(null)} label={`Room ${this.roomName}`} displayContext=\"sidebar\"></ir-title>\n        <section class={'sheet-body px-1'}>\n          <div class=\"\">\n            <div class=\"guest-grid guests-labels\">\n              <p class=\"\">{locales.entries.Lcz_MainGuest}</p>\n              <p class=\"\"></p>\n              <p class=\" \">{locales.entries.Lcz_DOB}</p>\n              <p class=\"\">{locales.entries.Lcz_Nationality}</p>\n              <p class=\" \">{locales.entries.Lcz_Documents}</p>\n            </div>\n            <h5 class=\"main_guest_heading\">{locales.entries.Lcz_MainGuest}</h5>\n            {this.guests.map((guest, idx) => {\n              let isRowValid = true;\n              try {\n                validateSharedPerson(guest);\n              } catch (error) {\n                isRowValid = false;\n              }\n              console.log(`row ${idx}=>${isRowValid}`);\n              return (\n                <Fragment>\n                  {idx === 1 && (\n                    <div class=\"d-flex mx-0 px-0\">\n                      <h5 class=\"mx-0 px-0 sharing_persons_heading\">{locales.entries.Lcz_PersonsSharingRoom}</h5>\n                      <p class=\"mx-0 px-0 sharing_persons_label\">{locales.entries.Lcz_PersonsSharingRoom}</p>\n                    </div>\n                  )}\n                  <div key={idx} class=\"guest-grid\">\n                    <div class={'m-0 p-0 d-flex align-items-center h-100'}>\n                      <p class=\"guest_label\">First name</p>\n                      <ir-input-text\n                        class=\"flex-grow-1 h-100\"\n                        id={`first_name_${idx}`}\n                        zod={ZSharedPerson.pick({ first_name: true })}\n                        error={!!this.error['first_name'] && !isRowValid}\n                        autoValidate={this.autoValidate}\n                        wrapKey=\"first_name\"\n                        placeholder=\"First name\"\n                        onTextChange={e => this.updateGuestInfo(idx, { first_name: e.detail })}\n                        value={guest.first_name}\n                        maxLength={40}\n                      ></ir-input-text>\n                    </div>\n                    <div class={'m-0 p-0 d-flex align-items-center h-100'}>\n                      <p class=\"guest_label\">Last name</p>\n                      <ir-input-text\n                        maxLength={40}\n                        class=\"flex-grow-1 h-100\"\n                        id={`last_name_${idx}`}\n                        zod={ZSharedPerson.pick({ last_name: true })}\n                        error={!!this.error['last_name'] && !isRowValid}\n                        autoValidate={this.autoValidate}\n                        wrapKey=\"last_name\"\n                        placeholder=\"Last name\"\n                        onTextChange={e => this.updateGuestInfo(idx, { last_name: e.detail })}\n                        value={guest.last_name}\n                      ></ir-input-text>\n                    </div>\n                    <div class=\"flex-grow-0 m-0 p-0 h-100 d-flex align-items-center\">\n                      <p class=\"guest_label\">{locales.entries.Lcz_DOB}</p>\n                      <ir-input-text\n                        class=\"flex-grow-1 h-100\"\n                        id={`dob_${idx}`}\n                        zod={ZSharedPerson.pick({ dob: true })}\n                        error={!!this.error['dob'] && !isRowValid}\n                        autoValidate={this.autoValidate}\n                        wrapKey=\"dob\"\n                        mask={dateMask}\n                        placeholder=\"\"\n                        onTextChange={e => {\n                          this.updateGuestInfo(idx, { dob: e.detail });\n                        }}\n                        value={guest.dob}\n                      ></ir-input-text>\n                    </div>\n                    <div class=\" m-0 p-0 d-flex align-items-center\">\n                      <p class=\"guest_label\">{locales.entries.Lcz_Nationality}</p>\n                      <div class=\"mx-0 flex-grow-1  h-100\">\n                        <ir-country-picker\n                          class=\"h-100\"\n                          propertyCountry={this.propertyCountry}\n                          id={`{locales.entries.Lcz_Nationality}_${idx}`}\n                          error={!!this.error['country_id'] && !guest.country_id}\n                          country={this.countries?.find(c => c.id?.toString() === guest.country?.id?.toString())}\n                          onCountryChange={e => this.updateGuestInfo(idx, { country_id: e.detail?.id?.toString() ?? null, country: e.detail })}\n                          countries={this.countries}\n                        ></ir-country-picker>\n                      </div>\n                    </div>\n                    <div class=\"flex-grow-1 m-0 p-0 d-flex align-items-center\">\n                      <p class=\"guest_label\">{locales.entries.Lcz_Documents}</p>\n                      <div class={' d-flex m-0 flex-grow-1 h-100'}>\n                        <ir-select\n                          selectForcedStyles={{\n                            borderTopRightRadius: '0px',\n                            borderBottomRightRadius: '0px',\n                            borderRight: '0',\n                          }}\n                          selectStyles={'rounded-top-0 rounded-bottom-0'}\n                          onSelectChange={e => {\n                            this.updateGuestInfo(idx, {\n                              id_info: {\n                                ...this.guests[idx].id_info,\n                                type: {\n                                  code: e.detail,\n                                  description: '',\n                                },\n                              },\n                            });\n                          }}\n                          selectedValue={guest.id_info.type.code}\n                          showFirstOption={false}\n                          data={this.idTypes?.map(t => ({ text: t[`CODE_VALUE_${this.language.toUpperCase()}`] ?? t[`CODE_VALUE_EN`], value: t.CODE_NAME }))}\n                        ></ir-select>\n                        <ir-input-text\n                          autoValidate={this.autoValidate}\n                          maxLength={18}\n                          placeholder=\"12345\"\n                          class=\"flex-grow-1 guest_document\"\n                          type=\"text\"\n                          inputForcedStyle={{ borderTopLeftRadius: '0px', borderBottomLeftRadius: '0px' }}\n                          value={guest.id_info.number}\n                          zod={ZIdInfo.pick({ number: true })}\n                          error={!!this.error['number'] && !isRowValid}\n                          wrapKey=\"number\"\n                          inputStyles=\"form-control\"\n                          onTextChange={e =>\n                            this.updateGuestInfo(idx, {\n                              id_info: {\n                                ...this.guests[idx].id_info,\n                                number: e.detail,\n                              },\n                            })\n                          }\n                        ></ir-input-text>\n                      </div>\n                    </div>\n                  </div>\n                </Fragment>\n              );\n            })}\n          </div>\n        </section>\n        <div class={'sheet-footer'}>\n          <ir-button onClick={() => this.closeModal.emit(null)} class={`flex-fill`} text={locales.entries.Lcz_Cancel} btn_color=\"secondary\"></ir-button>\n          <ir-button\n            btn_type=\"submit\"\n            class={'flex-fill'}\n            isLoading={isRequestPending('/Handle_Exposed_Room_Guests')}\n            text={this.checkIn ? locales.entries.Lcz_CheckIn : locales.entries.Lcz_Save}\n            btn_color=\"primary\"\n          ></ir-button>\n        </div>\n      </form>\n    );\n  }\n}\n","* {\n  margin: 0;\n  padding: 0;\n}\n:host {\n  display: flex;\n  margin-bottom: 5px;\n  gap: 5px;\n}\n.label_title {\n  min-width: max-content;\n  padding: 0;\n  margin: 0;\n  font-weight: 600;\n}\n.ota-message-list {\n  margin: 0 3px;\n  padding: 0;\n  overflow: hidden;\n  width: 100%;\n  word-wrap: break-word !important;\n  overflow-wrap: break-word !important;\n  /* list-style: circle !important; */\n}\n.ota-message-item {\n  width: 100%;\n  line-height: 1.5;\n  margin: 0;\n  padding: 0;\n  word-wrap: break-word !important;\n  overflow-wrap: break-word !important;\n}\n.ota-message-item::before {\n  content: '- ';\n  margin-right: 0.25rem;\n}\n\n.ota-visibility-toggle {\n  background: white;\n  color: var(--blue);\n  padding: 0;\n  margin: 0;\n  margin-left: 3px;\n  font-size: 12px;\n  border: 0;\n}\n.ota-visibility-toggle:hover {\n  color: #355270;\n}\n.ota-message-list {\n  margin: 0 3px;\n  padding: 0;\n  overflow: hidden;\n  width: 100%;\n  word-wrap: break-word !important;\n  overflow-wrap: break-word !important;\n  white-space: normal;\n  list-style: none;\n}\n.ota-message-item {\n  width: 100%;\n  line-height: 1.5;\n  margin: 0 0 0 1.2em; /* indent for dash */\n  padding: 0;\n  word-wrap: break-word !important;\n  overflow-wrap: break-word !important;\n  white-space: normal;\n  position: relative;\n}\n/* .ota-message-item::before {\n  content: '-';\n  position: absolute;\n  left: 0;\n} */\n","import { Component, Host, Prop, State, h } from '@stencil/core';\nimport { v4 } from 'uuid';\nimport { IOtaNotes } from '@/models/booking.dto';\nimport locales from '@/stores/locales.store';\n@Component({\n  tag: 'ota-label',\n  styleUrl: 'ota-label.css',\n  scoped: true,\n})\nexport class OtaLabel {\n  /**\n   * Label displayed as the section title.\n   */\n  @Prop() label: string;\n\n  /**\n   * Array of OTA notes to display in the list.\n   */\n  @Prop() remarks: IOtaNotes[];\n\n  /**\n   * Maximum number of remarks to display before showing the \"Show More\" button.\n   */\n  @Prop() maxVisibleItems: number = 3;\n\n  /**\n   * Internal state that determines whether all remarks are shown or only the limited number.\n   */\n  @State() showAll: boolean = false;\n\n  /**\n   * Toggles between showing all remarks or only a limited number.\n   *\n   * Example:\n   * ```ts\n   * this.toggleShowAll(); // flips showAll state\n   * ```\n   */\n  private toggleShowAll = () => {\n    this.showAll = !this.showAll;\n  };\n\n  render() {\n    if (!this.remarks) {\n      return null;\n    }\n\n    const displayedRemarks = this.showAll ? this.remarks : this.remarks.slice(0, this.maxVisibleItems);\n\n    return (\n      <Host>\n        <p class={'label_title'}>{this.label}</p>\n        <ul class=\"ota-message-list\">\n          {displayedRemarks.map((remark, index) => (\n            <li key={v4()} class=\"ota-message-item\">\n              {remark.statement}{' '}\n              {this.remarks.length > this.maxVisibleItems && index === displayedRemarks.length - 1 && (\n                <button class=\"ota-visibility-toggle\" onClick={this.toggleShowAll}>\n                  {this.showAll ? locales.entries.Lcz_ShowLess : locales.entries.Lcz_ShowMore}\n                </button>\n              )}\n            </li>\n          ))}\n        </ul>\n        {/* Show toggle button if there are more remarks than `maxVisibleItems` */}\n      </Host>\n    );\n  }\n}\n"],"version":3}