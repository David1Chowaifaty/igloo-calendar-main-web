{"version":3,"file":"unassigned_dates.store-DWc8UyAH.js","sources":["src/stores/unassigned_dates.store.ts"],"sourcesContent":["import { createStore } from '@stencil/store';\r\n\r\ntype EventCategories = {};\r\n\r\ntype EventInfo = {\r\n  categories: EventCategories;\r\n  dateStr: string;\r\n};\r\n\r\ntype UnassignedDates = {\r\n  [timestamp: string]: EventInfo;\r\n};\r\ninterface IUnassignedDatesStore {\r\n  unassigned_dates: UnassignedDates;\r\n}\r\n\r\nconst initialState: IUnassignedDatesStore = {\r\n  unassigned_dates: {},\r\n};\r\nexport let { state: unassigned_dates, onChange: handleUnAssignedDatesChange } = createStore<IUnassignedDatesStore>(initialState);\r\n\r\nexport function addUnassignedDates(data: UnassignedDates) {\r\n  unassigned_dates.unassigned_dates = { ...unassigned_dates.unassigned_dates, ...data };\r\n  /*\r\n   try {\r\n      //console.log(\"called\")\r\n      let categorisedRooms = {};\r\n      const result = await this.toBeAssignedService.getUnassignedRooms(\r\n        this.propertyid,\r\n        dateToFormattedString(new Date(+key)),\r\n        calendarData.roomsInfo,\r\n        calendarData.formattedLegendData,\r\n      );\r\n      result.forEach(room => {\r\n        if (!categorisedRooms.hasOwnProperty(room.RT_ID)) {\r\n          categorisedRooms[room.RT_ID] = [room];\r\n        } else {\r\n          categorisedRooms[room.RT_ID].push(room);\r\n        }\r\n      });\r\n      this.unassignedDates[key].categories = categorisedRooms;\r\n    } catch (error) {\r\n      //  toastr.error(error);\r\n    }\r\n  */\r\n  // console.log(unassigned_dates.unassigned_dates);\r\n}\r\nexport function getUnassignedDates() {\r\n  return unassigned_dates.unassigned_dates;\r\n}\r\nexport function removeUnassignedDates(from_date: string, to_date: string) {\r\n  const fromTimestamp = convertToDateTimestamp(from_date);\r\n  const toTimestamp = convertToDateTimestamp(to_date);\r\n  Object.keys(unassigned_dates.unassigned_dates).forEach(key => {\r\n    const keyTimestamp = parseInt(key);\r\n    if (fromTimestamp <= keyTimestamp && keyTimestamp <= toTimestamp) {\r\n      delete unassigned_dates.unassigned_dates[key];\r\n    }\r\n  });\r\n}\r\nfunction convertToDateTimestamp(dateStr: string) {\r\n  const date = new Date(dateStr);\r\n  date.setHours(0, 0, 0, 0);\r\n  return date.getTime();\r\n}\r\n\r\nexport default unassigned_dates;\r\n"],"names":[],"mappings":";;AAgBA,MAAM,YAAY,GAA0B;AAC1C,IAAA,gBAAgB,EAAE,EAAE;CACrB;AACU,IAAA,EAAE,KAAK,EAAE,gBAAgB,EAAE,QAAQ,EAAE,2BAA2B,EAAE,GAAG,WAAW,CAAwB,YAAY;AAEzH,SAAU,kBAAkB,CAAC,IAAqB,EAAA;IACtD,gBAAgB,CAAC,gBAAgB,GAAQ,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA,gBAAgB,CAAC,gBAAgB,CAAA,EAAK,IAAI,CAAE;AACrF;;;;;;;;;;;;;;;;;;;;;AAqBE;;AAEJ;SACgB,kBAAkB,GAAA;IAChC,OAAO,gBAAgB,CAAC,gBAAgB;AAC1C;AACgB,SAAA,qBAAqB,CAAC,SAAiB,EAAE,OAAe,EAAA;AACtE,IAAA,MAAM,aAAa,GAAG,sBAAsB,CAAC,SAAS,CAAC;AACvD,IAAA,MAAM,WAAW,GAAG,sBAAsB,CAAC,OAAO,CAAC;AACnD,IAAA,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,CAAC,OAAO,CAAC,GAAG,IAAG;AAC3D,QAAA,MAAM,YAAY,GAAG,QAAQ,CAAC,GAAG,CAAC;QAClC,IAAI,aAAa,IAAI,YAAY,IAAI,YAAY,IAAI,WAAW,EAAE;AAChE,YAAA,OAAO,gBAAgB,CAAC,gBAAgB,CAAC,GAAG,CAAC;;AAEjD,KAAC,CAAC;AACJ;AACA,SAAS,sBAAsB,CAAC,OAAe,EAAA;AAC7C,IAAA,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC;IAC9B,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AACzB,IAAA,OAAO,IAAI,CAAC,OAAO,EAAE;AACvB;;;;"}