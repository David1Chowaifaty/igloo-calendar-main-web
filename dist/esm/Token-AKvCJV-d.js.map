{"version":3,"file":"Token-AKvCJV-d.js","sources":["src/models/Auth.ts","src/models/Token.ts"],"sourcesContent":["// import axios from 'axios';\r\n\r\nclass Auth {\r\n  private static isAuthUsed = false;\r\n  private static _isAuthenticated = false;\r\n  private static subscribers: Array<(isAuthenticated: boolean) => void> = [];\r\n\r\n  constructor() {\r\n    if (!Auth.isAuthUsed) {\r\n      this.init();\r\n    }\r\n  }\r\n  public async init() {\r\n    // axios.defaults.withCredentials = true;\r\n    // Auth.isAuthUsed = true;\r\n    // const { data } = await axios.post('/Is_Already_Athenticated');\r\n    // this.setIsAuthenticated(data.My_Result);\r\n  }\r\n  public subscribe(callback: (isAuthenticated: boolean) => void) {\r\n    Auth.subscribers.push(callback);\r\n  }\r\n  public unsubscribe(callback: (isAuthenticated: boolean) => void) {\r\n    Auth.subscribers = Auth.subscribers.filter(sub => sub !== callback);\r\n  }\r\n  public setIsAuthenticated(value: boolean) {\r\n    Auth._isAuthenticated = value;\r\n    Auth.notifySubscribers(value);\r\n  }\r\n\r\n  private static notifySubscribers(isAuthenticated: boolean) {\r\n    Auth.subscribers.forEach(callback => callback(isAuthenticated));\r\n  }\r\n  public isAuthenticated() {\r\n    return Auth._isAuthenticated;\r\n  }\r\n}\r\n\r\nexport default Auth;\r\n","import axios from 'axios';\r\nimport Auth from './Auth';\r\n\r\nclass Token extends Auth {\r\n  private baseUrl = 'https://gateway.igloorooms.com/IR';\r\n  private static token: string | null = '';\r\n  private static modifiedBaseUrl: boolean = false;\r\n  private static isInterceptorAdded = false;\r\n\r\n  constructor() {\r\n    super();\r\n    if (Token.modifiedBaseUrl) {\r\n      return;\r\n    }\r\n    Token.modifiedBaseUrl = true;\r\n    axios.defaults.baseURL = this.baseUrl;\r\n  }\r\n  public getToken() {\r\n    return Token.token;\r\n  }\r\n  private initialize() {\r\n    if (Token.isInterceptorAdded) {\r\n      return;\r\n    }\r\n\r\n    axios.interceptors.request.use(config => {\r\n      if (!Token.token) {\r\n        throw new MissingTokenError();\r\n      }\r\n      config.headers.Authorization = Token.token;\r\n      // config.params = config.params || {};\r\n      // config.params.Ticket = Token.token;\r\n      return config;\r\n    });\r\n\r\n    Token.isInterceptorAdded = true;\r\n  }\r\n\r\n  public setToken(token: string) {\r\n    Token.token = token;\r\n    this.initialize();\r\n  }\r\n}\r\nexport default Token;\r\nexport class MissingTokenError extends Error {\r\n  constructor(message = 'Missing token!!') {\r\n    super(message);\r\n    this.name = 'MissingTokenError';\r\n  }\r\n}\r\n"],"names":[],"mappings":";;AAAA;AAEA,MAAM,IAAI,CAAA;AAKR,IAAA,WAAA,GAAA;AACE,QAAA,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YACpB,IAAI,CAAC,IAAI,EAAE;;;AAGR,IAAA,MAAM,IAAI,GAAA;;;;;;AAMV,IAAA,SAAS,CAAC,QAA4C,EAAA;AAC3D,QAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC;;AAE1B,IAAA,WAAW,CAAC,QAA4C,EAAA;AAC7D,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,IAAI,GAAG,KAAK,QAAQ,CAAC;;AAE9D,IAAA,kBAAkB,CAAC,KAAc,EAAA;AACtC,QAAA,IAAI,CAAC,gBAAgB,GAAG,KAAK;AAC7B,QAAA,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC;;IAGvB,OAAO,iBAAiB,CAAC,eAAwB,EAAA;AACvD,QAAA,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,QAAQ,IAAI,QAAQ,CAAC,eAAe,CAAC,CAAC;;IAE1D,eAAe,GAAA;QACpB,OAAO,IAAI,CAAC,gBAAgB;;;AA9Bf,IAAU,CAAA,UAAA,GAAG,KAAK;AAClB,IAAgB,CAAA,gBAAA,GAAG,KAAK;AACxB,IAAW,CAAA,WAAA,GAA8C,EAAE;;ACF5E,MAAM,KAAM,SAAQ,IAAI,CAAA;AAMtB,IAAA,WAAA,GAAA;AACE,QAAA,KAAK,EAAE;QAND,IAAO,CAAA,OAAA,GAAG,mCAAmC;AAOnD,QAAA,IAAI,KAAK,CAAC,eAAe,EAAE;YACzB;;AAEF,QAAA,KAAK,CAAC,eAAe,GAAG,IAAI;QAC5B,KAAK,CAAC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO;;IAEhC,QAAQ,GAAA;QACb,OAAO,KAAK,CAAC,KAAK;;IAEZ,UAAU,GAAA;AAChB,QAAA,IAAI,KAAK,CAAC,kBAAkB,EAAE;YAC5B;;QAGF,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,IAAG;AACtC,YAAA,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE;gBAChB,MAAM,IAAI,iBAAiB,EAAE;;YAE/B,MAAM,CAAC,OAAO,CAAC,aAAa,GAAG,KAAK,CAAC,KAAK;;;AAG1C,YAAA,OAAO,MAAM;AACf,SAAC,CAAC;AAEF,QAAA,KAAK,CAAC,kBAAkB,GAAG,IAAI;;AAG1B,IAAA,QAAQ,CAAC,KAAa,EAAA;AAC3B,QAAA,KAAK,CAAC,KAAK,GAAG,KAAK;QACnB,IAAI,CAAC,UAAU,EAAE;;;AAnCJ,KAAK,CAAA,KAAA,GAAkB,EAAlB;AACL,KAAe,CAAA,eAAA,GAAY,KAAZ;AACf,KAAkB,CAAA,kBAAA,GAAG,KAAH;AAqC7B,MAAO,iBAAkB,SAAQ,KAAK,CAAA;IAC1C,WAAY,CAAA,OAAO,GAAG,iBAAiB,EAAA;QACrC,KAAK,CAAC,OAAO,CAAC;AACd,QAAA,IAAI,CAAC,IAAI,GAAG,mBAAmB;;AAElC;;;;"}