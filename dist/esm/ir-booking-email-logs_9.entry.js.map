{"file":"ir-booking-email-logs.ir-booking-listing.ir-daily-revenue.ir-hk-tasks.ir-housekeeping.ir-monthly-bookings-report.ir-sales-by-channel.ir-sales-by-country.ir-user-management.entry.js","mappings":";;;;;;;;;;;;;;;;;;;;AAAA,MAAM,qBAAqB,GAAG,4CAA4C,CAAC;AAC3E,iCAAe,qBAAqB;;MCQvB,kBAAkB;IAL/B;;QAWU,UAAK,GAAG,IAAI,KAAK,EAAE,CAAC;KA8C7B;IA5CC,iBAAiB;QACf,IAAI,IAAI,CAAC,MAAM,EAAE;YACf,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SAClC;KACF;IAGD,kBAAkB;QAChB,IAAI,IAAI,CAAC,MAAM,EAAE;YACf,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SAClC;KACF;IAED,MAAM;QACJ,QACE,EAAC,IAAI,qDAAC,KAAK,EAAC,KAAK,IACf,uEAAgB,gBAAgB,EAAE,CAAC,4BAA4B,CAAC,GAAmB,EACnF,kEAAqB,EACrB,4DAAK,KAAK,EAAC,gCAAgC,EAAC,KAAK,EAAE,EAAE,GAAG,EAAE,QAAQ,EAAE,IAClE,sEACE,KAAK,EAAC,KAAK,EACX,mBAAmB,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,EACpC,KAAK,EAAE,IAAI,CAAC,aAAa,EACzB,YAAY,EAAE,CAAC,KAAK,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,MAAM,CAAC,EAClD,WAAW,EAAC,gBAAgB,GACb,EACjB,kEACE,IAAI,EAAC,IAAI,EACT,IAAI,EAAC,QAAQ,EACb,cAAc,EAAE;gBACd,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,KAAK,CAAC,IAAI,CAAC,4BAA4B,EAAE;oBAC9D,QAAQ,EAAE,IAAI,CAAC,aAAa;iBAC7B,CAAC,CAAC;gBACH,IAAI,IAAI,CAAC,YAAY,EAAE;oBACrB,OAAO;iBACR;gBACD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC;aAC5B,GACU,CACT,EACN,4DAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAK,CACtC,EACP;KACH;;;;;;;AC5DH;AAyDA;;;SAGgB,YAAY;IAC1B,MAAM,MAAM,GAAG,IAAI,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;IAC3D,MAAM,GAAG,GAA2B,EAAE,CAAC;IACvC,KAAK,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,EAAE,EAAE;QAC3C,GAAG,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;KAClB;IACD,OAAO,GAAG,CAAC;AACb;;ACnEA,MAAM,mBAAmB,GAAG,w+DAAw+D,CAAC;AACrgE,+BAAe,mBAAmB;;MCqBrB,gBAAgB;IAL7B;;QAQU,aAAQ,GAAW,EAAE,CAAC;QACtB,WAAM,GAAW,EAAE,CAAC;QAEpB,aAAQ,GAAW,EAAE,CAAC;QAKrB,cAAS,GAAG,KAAK,CAAC;QAClB,gBAAW,GAAG,CAAC,CAAC;QAChB,eAAU,GAAG,CAAC,CAAC;QACf,kBAAa,GAAG,CAAC,CAAC;QAClB,oBAAe,GAAgF,IAAI,CAAC;QACpG,aAAQ,GAAG,KAAK,CAAC;QAGlB,0BAAqB,GAAG,IAAI,qBAAqB,EAAE,CAAC;QACpD,mBAAc,GAAG,IAAI,cAAc,EAAE,CAAC;QACtC,gBAAW,GAAG,IAAI,WAAW,EAAE,CAAC;QAChC,oBAAe,GAAG,IAAI,eAAe,EAAE,CAAC;QACxC,UAAK,GAAG,IAAI,KAAK,EAAE,CAAC;QAIpB,iBAAY,GAAG;YACrB,KAAK,EAAE,eAAe;YACtB,KAAK,EAAE,eAAe;YACtB,KAAK,EAAE,cAAc;YACrB,KAAK,EAAE,cAAc;SACtB,CAAC;KA8jBH;IA1jBC,iBAAiB;QACf,IAAI,IAAI,CAAC,OAAO,EAAE;YAChB,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SACrC;QACD,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC9C,eAAe,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;QACzC,IAAI,IAAI,CAAC,MAAM,KAAK,EAAE,EAAE;YACtB,eAAe,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;YACpC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACjC,IAAI,CAAC,aAAa,EAAE,CAAC;SACtB;QACD,sBAAsB,CAAC,eAAe,EAAE,OAAM,QAAQ;YACpD,MAAM,QAAQ,GAAG,QAAQ,CAAC,WAAW,CAAC;YACtC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;SACvD,CAAC,CAAC;QACH,sBAAsB,CAAC,UAAU,EAAE,OAAM,QAAQ;YAC/C,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,IAAI,CAAC,OAAO,IAAI,OAAO,CAAC,SAAS,CAAC,UAAU,KAAK,IAAI,IAAI,OAAO,CAAC,SAAS,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;SACrH,CAAC,CAAC;KACJ;IAED,aAAa,CAAC,QAAgB,EAAE,QAAgB;QAC9C,IAAI,QAAQ,KAAK,QAAQ,EAAE;YACzB,OAAO;SACR;QACD,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACjC,eAAe,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QACpC,IAAI,CAAC,aAAa,EAAE,CAAC;KACtB;IAEO,MAAM,aAAa;;QACzB,IAAI;YACF,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,IAAI,CAAC,aAAa,GAAG,gBAAgB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAErD,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;YACjC,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;gBACvB,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE;oBAC/B,MAAM,IAAI,KAAK,CAAC,qCAAqC,CAAC,CAAC;iBACxD;gBAED,IAAI,CAAC,UAAU,EAAE;oBACf,MAAM,YAAY,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC;wBAC7D,EAAE,EAAE,CAAC;wBACL,KAAK,EAAE,IAAI,CAAC,CAAC;wBACb,QAAQ,EAAE,IAAI,CAAC,QAAQ;wBACvB,UAAU,EAAE,IAAI;qBACjB,CAAC,CAAC;oBACH,UAAU,GAAG,YAAY,CAAC,SAAS,CAAC,EAAE,CAAC;iBACxC;aACF;YAED,MAAM,gBAAgB,GAAuB;gBAC3C,IAAI,CAAC,cAAc,CAAC,+BAA+B,CAAC,CAAC,WAAW,EAAE,iBAAiB,EAAE,aAAa,CAAC,CAAC;gBACpG,IAAI,CAAC,qBAAqB,CAAC,0BAA0B,CAAC,IAAI,CAAC,aAAa,GAAG,IAAI,GAAG,UAAU,CAAC;gBAC7F,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,qBAAqB,CAAC,CAAC;aACvE,CAAC;;YAGF,IAAI,sBAAsB,GAAkB,IAAI,CAAC;YAEjD,IAAI,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;;gBAE1C,gBAAgB,CAAC,IAAI,CACnB,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC;oBAClC,EAAE,EAAE,IAAI,CAAC,UAAU;oBACnB,QAAQ,EAAE,IAAI,CAAC,QAAQ;oBACvB,UAAU,EAAE,IAAI;iBACjB,CAAC,CACH,CAAC;aACH;YAED,IAAI,IAAI,CAAC,aAAa,EAAE;gBACtB,sBAAsB,GAAG,gBAAgB,CAAC,MAAM,CAAC;gBACjD,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,2BAA2B,EAAE,CAAC,CAAC;aAC3E;YAED,MAAM,OAAO,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;YAEpD,MAAM,CAAC,YAAY,CAAC,GAAG,OAAO,CAAC;YAC/B,MAAM,EAAE,QAAQ,EAAE,cAAc,EAAE,UAAU,EAAE,GAAG,IAAI,CAAC,cAAc,CAAC,sBAAsB,CAAC,YAAmB,CAAC,CAAC;YAEjH,IAAI,CAAC,cAAc,GAAG;gBACpB,MAAM,EAAE,cAAc;gBACtB,OAAO,EAAE,UAAU;gBACnB,KAAK,EAAE,QAAQ;aAChB,CAAC;YAEF,IAAI,CAAC,iBAAiB,GAAG,sBAAsB,KAAK,IAAI,GAAG,MAAC,OAAO,CAAC,sBAAsB,CAAuB,0CAAE,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;YAEzI,mBAAmB,CAAC,aAAa,EAAE,UAAU,CAAC,CAAC;YAE/C,oBAAoB,CAAC;gBACnB,YAAY,EAAE,IAAI,CAAC,iBAAiB;gBACpC,YAAY,EAAE,IAAI,CAAC,QAAQ;aAC5B,CAAC,CAAC;YAEH,MAAM,IAAI,CAAC,qBAAqB,CAAC,kBAAkB,iCAC9C,eAAe,CAAC,aAAa,KAChC,YAAY,EAAE,KAAK,IACnB,CAAC;SACJ;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,KAAK,CAAC,yBAAyB,EAAE,KAAK,CAAC,CAAC;SACjD;gBAAS;YACR,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;SACxB;KACF;IAED,mBAAmB,CAAC,CAAuB;QACzC,IAAI,CAAC,CAAC,MAAM,EAAE;YACZ,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;SAC7B;KACF;IACD,yBAAyB;;QAEvB,MAAM,MAAM,GAAG,YAAY,EAAE,CAAC;QAC9B,IAAI,MAAM,EAAE;YACV,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;YAC7B,IAAI,GAAG,GAAmC,EAAE,CAAC;YAC7C,IAAI,MAAM,CAAC,CAAC,EAAE;gBACZ,GAAG,CAAC,SAAS,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;aACnC;YACD,IAAI,MAAM,CAAC,CAAC,EAAE;gBACZ,GAAG,CAAC,WAAW,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;aACrC;YACD,IAAI,MAAM,CAAC,MAAM,EAAE;gBACjB,GAAG,CAAC,gBAAgB,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC;aACvC;YACD,IAAI,MAAM,CAAC,MAAM,EAAE;gBACjB,GAAG,CAAC,aAAa,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC;aACpC;YACD,IAAI,MAAM,CAAC,IAAI,EAAE;gBACf,GAAG,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC;aAC3B;YACD,IAAI,MAAM,CAAC,EAAE,EAAE;gBACb,GAAG,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,EAAE,CAAC;aACvB;YACD,oBAAoB,CAAC,GAAG,CAAC,CAAC;SAC3B;QACD,OAAO,CAAC,GAAG,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;KACjC;IACD,mBAAmB;QACjB,MAAM,UAAU,GAAG,eAAe,CAAC,aAAa,CAAC,WAAW,CAAC;QAC7D,MAAM,SAAS,GAAG,CAAC,IAAI,CAAC,WAAW,GAAG,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC;QACzD,IAAI,OAAO,GAAG,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC/C,OAAO,GAAG,OAAO,GAAG,UAAU,GAAG,UAAU,GAAG,OAAO,CAAC;QACtD,OAAO,EAAE,SAAS,EAAE,OAAO,EAAE,UAAU,EAAE,CAAC;KAC3C;IAED,SAAS;QACP,IAAI,CAAC,mBAAmB,GAAG,UAAU,CAAC;YACpC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAC;YAC9D,IAAI,CAAC,YAAY,CAAC,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC;YACrD,IAAI,CAAC,YAAY,CAAC,SAAS,EAAE,CAAC;SAC/B,EAAE,GAAG,CAAC,CAAC;KACT;IACD,oBAAoB;QAClB,YAAY,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;KACxC;IAGD,MAAM,eAAe,CAAC,CAAc;QAClC,CAAC,CAAC,wBAAwB,EAAE,CAAC;QAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,MAAM,IAAI,CAAC,qBAAqB,CAAC,kBAAkB,iCAAM,eAAe,CAAC,aAAa,KAAE,YAAY,EAAE,KAAK,IAAG,CAAC;KAChH;IAGD,MAAM,oBAAoB,CAAC,CAAc;QACvC,CAAC,CAAC,wBAAwB,EAAE,CAAC;QAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,MAAM,IAAI,CAAC,qBAAqB,CAAC,kBAAkB,iCAAM,eAAe,CAAC,aAAa,KAAE,YAAY,EAAE,KAAK,IAAG,CAAC;KAChH;IAED,oBAAoB,CAAC,CAAuB;QAC1C,CAAC,CAAC,wBAAwB,EAAE,CAAC;QAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,eAAe,CAAC,QAAQ,GAAG;YACzB,GAAG,eAAe,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;gBAC/B,IAAI,CAAC,CAAC,WAAW,KAAK,CAAC,CAAC,MAAM,CAAC,WAAW,EAAE;oBAC1C,OAAO,CAAC,CAAC,MAAM,CAAC;iBACjB;gBACD,OAAO,CAAC,CAAC;aACV,CAAC;SACH,CAAC;KACH;IAED,eAAe;QACb,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE,UAAU,EAAE,GAAG,IAAI,CAAC,mBAAmB,EAAE,CAAC;QACtE,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC,QAAQ,IAAI,SAAS,GAAG,CAAC,MAAM,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,MAAM,IAAI,UAAU,EAAE,CAAC;KAC5G;IAED,MAAM,UAAU;QACd,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC,mBAAmB,EAAE,CAAC;;;;;QAK1D,MAAM,IAAI,CAAC,qBAAqB,CAAC,kBAAkB,iCAC9C,eAAe,CAAC,aAAa,KAChC,YAAY,EAAE,KAAK,EACnB,SAAS,EAAE,SAAS,EACpB,OAAO,EAAE,OAAO,IAChB,CAAC;KACJ;IACO,qBAAqB,CAAC,OAAgB;QAC5C,MAAM,cAAc,GAAG,CAAC,EAAE,SAAS,EAAE,YAAY,EAAE,UAAU,EAAa;YACxE,OAAO,CAAC,SAAS,aAAT,SAAS,cAAT,SAAS,GAAI,CAAC,KAAK,YAAY,aAAZ,YAAY,cAAZ,YAAY,GAAI,CAAC,CAAC,IAAI,UAAU,aAAV,UAAU,cAAV,UAAU,GAAI,CAAC,CAAC,CAAC;SACnE,CAAC;QACF,OAAO,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,GAAG;YACpC,OAAO,cAAc,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;SAC7C,EAAE,CAAC,CAAC,CAAC;KACP;IACD,MAAM;;QACJ,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,MAAM,KAAK,EAAE,EAAE;YACxC,OAAO,4BAAuC,CAAC;SAChD;QACD,QACE,EAAC,IAAI,QACH,yBAAiC,EACjC,mBAAqB,EACrB,WAAK,KAAK,EAAC,oBAAoB,IAC7B,yBAAmB,UAAU,EAAE,IAAI,CAAC,UAAU,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,GAAsB,EACxG,mBACE,WAAK,KAAK,EAAC,6BAA6B,IACtC,aAAO,KAAK,EAAC,wDAAwD,IACnE,iBACE,cACG,IAAI,CAAC,aAAa,IAAI,UAAI,KAAK,EAAC,WAAW,eAAc,EAC1D,UAAI,KAAK,EAAC,KAAK,EAAC,KAAK,EAAC,aAAa,IAChC,MAAA,OAAO,CAAC,OAAO;eAAE,WAAW,MAC1B,EACL,UAAI,KAAK,EAAC,KAAK,IAAE,MAAA,OAAO,CAAC,OAAO,0CAAE,YAAY,CAAM,EACpD,UAAI,KAAK,EAAC,KAAK,IAAE,MAAA,OAAO,CAAC,OAAO,0CAAE,eAAe,CAAM,EACvD,UAAI,KAAK,EAAC,KAAK,EAAC,KAAK,EAAC,yBAAyB,IAC5C,MAAA,OAAO,CAAC,OAAO,0CAAE,YAAY,CAC3B,EACL,UAAI,KAAK,EAAC,KAAK,EAAC,KAAK,EAAC,QAAQ,IAC3B,MAAA,OAAO,CAAC,OAAO,0CAAE,SAAS,CACxB,EACL,UAAI,KAAK,EAAC,KAAK,IACb,YAAM,KAAK,EAAC,YAAY,IAAE,MAAA,OAAO,CAAC,OAAO,0CAAE,UAAU,CAAQ,EAE7D,kBACE,UAAU,QACV,OAAO,EAAE,2CAA2C,MAAA,OAAO,CAAC,OAAO,0CAAE,kBAAkB,gBAAgB,MAAA,OAAO,CAAC,OAAO,0CAAE,iBAAiB,SAAS,IAElJ,YAAM,IAAI,EAAC,iBAAiB,EAAC,KAAK,EAAE,iBAAiB,IAClD,MAAA,OAAO,CAAC,OAAO,0CAAE,WAAW,CACxB,CACI,CACV,EACJ,IAAI,CAAC,QAAQ,KACZ,UAAI,KAAK,EAAC,KAAK,EAAC,KAAK,EAAC,eAAe,IAClC,MAAA,OAAO,CAAC,OAAO,0CAAE,QAAQ,CACvB,CACN,EACD,UAAI,KAAK,EAAC,KAAK,IAAE,MAAA,OAAO,CAAC,OAAO,0CAAE,UAAU,CAAM,EAClD,UAAI,KAAK,EAAC,KAAK,IACb,SAAG,KAAK,EAAC,SAAS,cAAY,CAC3B,CACF,CACC,EACR,aAAO,KAAK,EAAC,EAAE,IACZ,eAAe,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,KACpC,cACE,UAAI,OAAO,EAAE,IAAI,CAAC,aAAa,GAAG,CAAC,GAAG,CAAC,IAAG,MAAA,OAAO,CAAC,OAAO,0CAAE,mBAAmB,CAAM,CACjF,CACN,EACA,MAAA,eAAe,CAAC,QAAQ;eAAE,GAAG,CAAC,OAAO;;gBACpC,IAAI,cAAc,GAAW,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,sBAAsB,GAAG,KAAK,GAAG,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;gBAC7G,MAAM,gBAAgB,GAAG,OAAO,CAAC,iBAAiB,GAAG,OAAO,CAAC,iBAAiB,CAAC,OAAO,CAAC,iBAAiB,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;gBAC5H,MAAM,YAAY,GAAG,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,CAAC;gBACzD,QACE,UAAI,GAAG,EAAE,OAAO,CAAC,WAAW,IACzB,IAAI,CAAC,aAAa,IAAI,UAAI,KAAK,EAAC,WAAW,IAAE,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAM,EACzE,UAAI,KAAK,EAAC,WAAW,IACnB,iBACE,SAAS,EAAC,MAAM,EAChB,QAAQ,EAAE,EAAE,OAAO,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAE,EACvC,cAAc,EAAE,OAAO,IAAI,CAAC,eAAe,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC,EACzE,IAAI,EAAE,OAAO,CAAC,WAAW,GACd,EACZ,OAAO,CAAC,mBAAmB,IAAI,SAAG,KAAK,EAAC,iCAAiC,IAAE,OAAO,CAAC,mBAAmB,CAAK,CACzG,EACL,cACE,SAAG,KAAK,EAAC,gBAAgB,IAAEA,KAAM,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAK,EAClG,SAAG,KAAK,EAAC,qBAAqB,IAAE,WAAW,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAK,CACrH,EACL,cACE,WAAK,KAAK,EAAC,kCAAkC,EAAC,KAAK,EAAE,EAAE,KAAK,EAAE,aAAa,EAAE,IAC3E,WAAK,KAAK,EAAC,WAAW,EAAC,GAAG,EAAE,OAAO,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,GAAI,EAC9E,WAAK,KAAK,EAAC,WAAW,IACpB,WAAK,KAAK,EAAC,2BAA2B,IACpC,WAAK,KAAK,EAAC,sBAAsB,IAC/B,iBACE,SAAS,EAAC,MAAM,EAChB,cAAc,EAAE,OAAO,IAAI,CAAC,eAAe,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,EAC1E,IAAI,EAAE,GAAG,OAAO,CAAC,KAAK,CAAC,UAAU,IAAI,MAAA,OAAO,CAAC,KAAK,CAAC,SAAS,mCAAI,EAAE,EAAE,EACpE,QAAQ,EAAE;wBACR,KAAK,EAAE,aAAa;wBACpB,OAAO,EAAE,GAAG;wBACZ,MAAM,EAAE,GAAG;qBACZ,EACD,UAAU,EAAE;wBACV,OAAO,EAAE,GAAG;qBACb,GACU,EACZ,OAAO,CAAC,KAAK,CAAC,sBAAsB,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,KACzD,WAAK,KAAK,EAAC,SAAS,IAClB,kBAAY,OAAO,EAAE,GAAG,OAAO,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,KAAK,CAAC,sBAAsB,CAAC,QAAQ,EAAE,CAAC,EAAE,UAAU,UAClI,WAAK,KAAK,EAAC,oCAAoC,EAAC,IAAI,EAAC,iBAAiB,IACpE,gBAAU,KAAK,EAAE,EAAE,aAAa,EAAE,UAAU,EAAE,EAAE,KAAK,EAAC,SAAS,EAAC,IAAI,EAAC,YAAY,GAAY,CACzF,CACK,CACT,CACP,EAOD,YAAM,KAAK,EAAE,SAAS,IAEnB,YAAY,EACZ,OAAO,CAAC,OAAO,CAAC,KAAK,CACjB,EACN,cAAc,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,YAAM,KAAK,EAAC,YAAY,GAAQ,CAC/D,CACF,EACN,WAAK,KAAK,EAAE,6CAA6C,IACvD,SAAG,KAAK,EAAC,qBAAqB,IAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAK,EACxD,OAAO,CAAC,kBAAkB,IAAI,CAAC,OAAO,CAAC,SAAS,KAC/C,WAAK,KAAK,EAAC,4BAA4B,EAAC,OAAO,EAAC,aAAa,EAAC,MAAM,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,IACjF,iBAAQ,OAAO,CAAC,OAAO,CAAC,0BAA0B,CAAS,EAC3D,YACE,IAAI,EAAC,SAAS,EACd,CAAC,EAAC,0sBAA0sB,GAC5sB,CACE,CACP,EACA,OAAO,CAAC,SAAS,KAChB,WAAK,KAAK,EAAC,4BAA4B,EAAC,IAAI,EAAC,MAAM,EAAC,OAAO,EAAC,WAAW,kBAAc,KAAK,EAAC,MAAM,EAAC,cAAc,EAAC,MAAM,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,IACpI,iBAAQ,OAAO,CAAC,OAAO,CAAC,UAAU,GAAG,GAAG,GAAG,OAAO,CAAC,SAAS,CAAS,EACrE,8BACiB,OAAO,qBACN,OAAO,EACvB,CAAC,EAAC,sRAAsR,GACxR,CACE,CACP,CACG,CAEF,CACF,CACH,EAEL,cACE,cACG,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI;;oBAAI,QACzB,cACE,WAAK,KAAK,EAAE,cAAc,IACxB,SAAG,KAAK,EAAE,SAAS,IAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAK,EAC5C,IAAI,CAAC,IAAI;wBACR,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC;yBAC9B,CAAA,MAAA,MAAC,IAAI,CAAC,IAAc,0CAAE,IAAI,0CAAE,MAAM,IAAG,CAAC,IACrC,kBAAY,UAAU,QAAC,OAAO,EAAE,MAAC,IAAI,CAAC,IAAc,0CAAE,IAAI,IACxD,SAAG,KAAK,EAAE,wCAAwC,EAAE,IAAI,EAAC,iBAAiB,IACvE,MAAA,MAAC,IAAI,CAAC,IAAc,0CAAE,IAAI,0CAAE,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAC1C,CACO,KAEb,SAAG,KAAK,EAAE,0BAA0B,IAAG,MAAA,MAAC,IAAI,CAAC,IAAc,0CAAE,IAAI,0CAAE,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAK,CACxF,CAAC,CACA,CACH,EACN;iBAAA,CAAC,EACD,OAAO,CAAC,cAAc,IAAI,cAAK,OAAO,CAAC,OAAO,CAAC,iBAAiB,CAAM,CACpE,CACF,EACL,cACE,SAAG,KAAK,EAAC,gBAAgB,IAAEA,KAAM,CAAC,OAAO,CAAC,SAAS,EAAE,YAAY,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAK,EAC7F,SAAG,KAAK,EAAC,gBAAgB,IAAEA,KAAM,CAAC,OAAO,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAK,CACxF,EACL,cACE,SAAG,KAAK,EAAC,SAAS,EAAC,KAAK,EAAE,EAAE,UAAU,EAAE,QAAQ,EAAE,IAC/C,YAAY,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,EAAE,MAAA,MAAA,OAAO,CAAC,SAAS,0CAAE,WAAW,mCAAI,CAAC,CAAC,CACzE,EACJ,EAAC,QAAQ,QACN,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC;sBACzC,OAAO,CAAC,SAAS,CAAC,gCAAgC,KAAK,CAAC,KACtD,cACE,OAAO,EAAE;4BACP,IAAI,CAAC,eAAe,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE,SAAS,EAAE,CAAC;4BACrD,IAAI,CAAC,SAAS,EAAE,CAAC;yBAClB,EACD,KAAK,EAAE,EAAE,UAAU,EAAE,QAAQ,EAAE,EAC/B,KAAK,EAAC,qBAAqB,IAE3B,gBAAO,OAAO,CAAC,SAAS,CAAC,gCAAgC,GAAG,CAAC,GAAG,QAAQ,GAAG,QAAQ,MAAS,EAC3F,YAAY,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,SAAS,CAAC,gCAAgC,CAAC,CAAC,CAC7F,CACV;sBACD,OAAO,CAAC,SAAS,CAAC,UAAU,KAAK,CAAC,KAChC,cACE,OAAO,EAAE;4BACP,IAAI,CAAC,eAAe,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE,SAAS,EAAE,CAAC;4BACrD,IAAI,CAAC,SAAS,EAAE,CAAC;yBAClB,EACD,KAAK,EAAE,EAAE,UAAU,EAAE,QAAQ,EAAE,EAC/B,KAAK,EAAC,qBAAqB,IAE1B,YAAY,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,EAAE,OAAO,CAAC,SAAS,CAAC,UAAU,CAAC,CAC7D,CACV,CACI,CACR,EACJ,IAAI,CAAC,QAAQ,KACZ,cACG,OAAO,CAAC,SAAS,CAAC,UAAU,KAAK,IAAI,IAAI,OAAO,CAAC,SAAS,CAAC,UAAU,KAAK,CAAC;sBACxE,GAAG;sBACH,YAAY,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,EAAE,OAAO,CAAC,SAAS,CAAC,UAAU,CAAC,CACpE,CACN,EAED,cACE,SAAG,KAAK,EAAE,aAAa,cAAc,cAAc,IAChD,OAAO,CAAC,sBAAsB,GAAG,MAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,OAAO,0CAAE,yBAAyB,GAAG,OAAO,CAAC,MAAM,CAAC,WAAW,CACxG,EACH,CAAC,gBAAgB,IAAI,CAAA,MAAA,OAAO,CAAC,MAAM,0CAAE,MAAM,IAAG,CAAC,IAAI,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,UAAU,KACrG,SAAG,KAAK,EAAC,gBAAgB,EAAC,KAAK,EAAE,EAAE,SAAS,EAAE,SAAS,EAAE,YAAY,EAAE,GAAG,EAAE,eAExE,CACL,EACA,gBAAgB,KACf,kBACE,OAAO,EAAC,OAAO,EACf,OAAO,EAAE,eAAe,gBAAgB,CAAC,IAAI,OAAO,gBAAgB,CAAC,IAAI,IAAI,gBAAgB,CAAC,IAAI,IAAI,gBAAgB,CAAC,MAAM,EAAE,IAE/H,SAAG,KAAK,EAAC,4BAA4B,EAAC,KAAK,EAAE,EAAE,SAAS,EAAE,SAAS,EAAE,YAAY,EAAE,GAAG,EAAE,IACtF,wBAAe,CACb,CACO,CACd,CACE,EACL,cACE,WAAK,KAAK,EAAC,kDAAkD,EAAC,KAAK,EAAE,EAAE,GAAG,EAAE,KAAK,EAAE,IACjF,iBAAW,KAAK,EAAC,cAAc,EAAC,OAAO,EAAC,MAAM,EAAC,SAAS,EAAC,MAAM,EAAC,cAAc,EAAE,OAAO,IAAI,CAAC,eAAe,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC,GAAc,EACvJ,iBACE,KAAK,EAAC,gBAAgB,EACtB,KAAK,EAAE,EAAE,qBAAqB,EAAE,SAAS,EAAE,2BAA2B,EAAE,SAAS,EAAE,EACnF,OAAO,EAAC,MAAM,EACd,SAAS,EAAC,OAAO,EACjB,cAAc,EAAE;wBACd,IAAI,CAAC,eAAe,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE,QAAQ,EAAE,CAAC;wBACpD,IAAI,CAAC,SAAS,EAAE,CAAC;qBAClB,GACU,CACT,CACH,CACF,EACL;aACH,CAAC,CACI,CACF,EACP,IAAI,CAAC,UAAU,GAAG,CAAC,KAClB,eAAS,KAAK,EAAE,gGAAgG,IAC9G,SAAG,KAAK,EAAC,kBAAkB,IAAE,IAAI,CAAC,eAAe,EAAE,CAAK,EACxD,WAAK,KAAK,EAAE,6CAA6C,IACvD,iBACE,IAAI,EAAC,IAAI,EACT,YAAY,EAAE,IAAI,CAAC,WAAW,KAAK,CAAC,EACpC,cAAc,EAAE;gBACd,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;gBACrB,MAAM,IAAI,CAAC,UAAU,EAAE,CAAC;aACzB,EACD,SAAS,EAAC,aAAa,EACvB,KAAK,EAAE,EAAE,aAAa,EAAE,UAAU,EAAE,GACzB,EACb,iBACE,IAAI,EAAC,IAAI,EACT,YAAY,EAAE,IAAI,CAAC,WAAW,KAAK,CAAC,EACpC,cAAc,EAAE;gBACd,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;gBACxC,MAAM,IAAI,CAAC,UAAU,EAAE,CAAC;aACzB,EACD,SAAS,EAAC,YAAY,EACtB,KAAK,EAAE,EAAE,aAAa,EAAE,UAAU,EAAE,GACzB,EACb,iBACE,aAAa,EAAE,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,EAC1C,eAAe,EAAE,KAAK,EACtB,cAAc,EAAE,OAAM,CAAC;gBACrB,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC;gBAC7B,MAAM,IAAI,CAAC,UAAU,EAAE,CAAC;aACzB,EACD,IAAI,EAAE,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK;gBAClE,IAAI,EAAE,CAAC,CAAC,QAAQ,EAAE;gBAClB,KAAK,EAAE,CAAC,CAAC,QAAQ,EAAE;aACpB,CAAC,CAAC,GACQ,EACb,iBACE,IAAI,EAAC,IAAI,EACT,YAAY,EAAE,IAAI,CAAC,WAAW,KAAK,IAAI,CAAC,UAAU,EAClD,cAAc,EAAE;gBACd,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;gBACxC,MAAM,IAAI,CAAC,UAAU,EAAE,CAAC;aACzB,EACD,SAAS,EAAC,aAAa,EACvB,KAAK,EAAE,EAAE,aAAa,EAAE,UAAU,EAAE,GACzB,EACb,iBACE,IAAI,EAAC,IAAI,EACT,YAAY,EAAE,IAAI,CAAC,WAAW,KAAK,IAAI,CAAC,UAAU,EAClD,cAAc,EAAE;gBACd,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC;gBACnC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;gBAC9B,MAAM,IAAI,CAAC,UAAU,EAAE,CAAC;aACzB,EACD,SAAS,EAAC,cAAc,EACxB,KAAK,EAAE,EAAE,aAAa,EAAE,UAAU,EAAE,GACzB,CACT,CACE,CACX,CACG,CACE,CACN,EACL,IAAI,CAAC,eAAe,IAAI,wBAAkB,cAAc,EAAE,IAAI,CAAC,cAAc,EAAE,aAAa,EAAE,OAAO,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,GAAqB,EACvJ,kBACE,iBAAiB,EAAE,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,EACtD,IAAI,EAAE,IAAI,CAAC,eAAe,KAAK,IAAI,IAAI,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,EAC7F,eAAe,EAAE,KAAK,EACtB,aAAa,EACX,CAAA,MAAA,IAAI,CAAC,eAAe,0CAAE,KAAK,MAAK,OAAO,GAAG,EAAE,UAAU,EAAE,OAAO,EAAE,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,eAAe,GAAG,OAAO,GAAG,4BAA4B,EAAE,UAAU,EAAE,SAAS,EAAE,IAGpK,CAAA,MAAA,IAAI,CAAC,eAAe,0CAAE,KAAK,MAAK,MAAM,KACrC,0BACE,IAAI,EAAC,cAAc,EACnB,CAAC,EAAE,IAAI,CAAC,CAAC,EACT,QAAQ,QACR,UAAU,QACV,kBAAkB,QAClB,UAAU,EAAE,MAAA,MAAA,MAAA,IAAI,CAAC,eAAe,0CAAE,OAAO,0CAAE,QAAQ,0CAAE,EAAE,EACvD,WAAW,QACX,aAAa,QACb,cAAc,QACd,cAAc,EAAE,OAAO,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,EACnD,aAAa,EAAE,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,WAAW,EACvD,MAAM,EAAE,IAAI,CAAC,MAAM,EACnB,QAAQ,EAAE,IAAI,CAAC,QAAQ,EACvB,UAAU,SACU,CACvB,EACA,CAAA,MAAA,IAAI,CAAC,eAAe,0CAAE,KAAK,MAAK,OAAO,KACtC,qBACE,IAAI,EAAC,cAAc,EACnB,WAAW,EAAE,IAAI,EACjB,WAAW,QACX,WAAW,EAAE,MAAA,MAAA,IAAI,CAAC,eAAe,0CAAE,OAAO,0CAAE,WAAW,EACvD,KAAK,EAAE,MAAA,MAAA,IAAI,CAAC,eAAe,0CAAE,OAAO,0CAAE,KAAK,CAAC,KAAK,EACjD,QAAQ,EAAE,IAAI,CAAC,QAAQ,EACvB,cAAc,EAAE,OAAO,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,GACpC,CAClB,CACU,CACR,EACP;KACH;;;;;;;;ACnnBH,MAAM,iBAAiB,GAAG,yQAAyQ,CAAC;AACpS,6BAAe,iBAAiB;;MCenB,cAAc;IAL3B;;;QAMU,aAAQ,GAAW,EAAE,CAAC;QACtB,WAAM,GAAW,EAAE,CAAC;QASnB,YAAO,GAAuB,EAAE,IAAI,EAAEA,KAAM,EAAE,CAAC,MAAM,CAAC,YAAY,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;QAGpF,iBAAY,GAAG,IAAI,KAAK,EAAE,CAAC;QAC3B,gBAAW,GAAG,IAAI,WAAW,EAAE,CAAC;QAChC,oBAAe,GAAG,IAAI,eAAe,EAAE,CAAC;QACxC,mBAAc,GAAG,IAAI,cAAc,EAAE,CAAC;QAyCtC,uBAAkB,GAAG,CAAC,CAAc;YAC1C,CAAC,CAAC,wBAAwB,EAAE,CAAC;YAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;YACpB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;SAC1B,CAAC;KA2MH;IAnPC,iBAAiB;QACf,IAAI,IAAI,CAAC,MAAM,EAAE;YACf,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACxC,IAAI,CAAC,aAAa,EAAE,CAAC;SACtB;KACF;IAGD,aAAa,CAAC,QAAgB,EAAE,QAAgB;QAC9C,IAAI,QAAQ,KAAK,QAAQ,EAAE;YACzB,OAAO;SACR;QACD,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACxC,IAAI,CAAC,aAAa,EAAE,CAAC;KACtB;IAGD,iBAAiB,CAAC,CAAgC;QAChD,CAAC,CAAC,wBAAwB,EAAE,CAAC;QAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,MAAM,CAAC;KAC9B;IAED,qBAAqB,CAAC,CAAkC;QACtD,CAAC,CAAC,wBAAwB,EAAE,CAAC;QAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,IAAI,CAAC,OAAO,qBAAQ,CAAC,CAAC,MAAM,CAAE,CAAC;QAC/B,IAAI,CAAC,iBAAiB,EAAE,CAAC;KAC1B;IAED,MAAM,kBAAkB,CAAC,CAAc;QACrC,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,CAAC,CAAC,wBAAwB,EAAE,CAAC;QAC7B,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;KACrC;IAQO,iBAAiB;QACvB,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACtB,OAAO;SACR;QACD,QAAQ,IAAI,CAAC,YAAY,CAAC,IAAI;YAC5B,KAAK,SAAS;gBACZ,QACE,0BACE,IAAI,EAAC,cAAc,EACnB,QAAQ,QACR,UAAU,QACV,cAAc,QACd,cAAc,EAAE,IAAI,CAAC,kBAAkB,EACvC,kBAAkB,QAClB,UAAU,EAAE,IAAI,CAAC,WAAW,EAC5B,WAAW,QACX,aAAa,QACb,aAAa,EAAE,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,QAAQ,EAAE,EACjE,MAAM,EAAE,IAAI,CAAC,MAAM,EACnB,QAAQ,EAAE,IAAI,CAAC,QAAQ,EACvB,UAAU,SACU,EACtB;YACJ;gBACE,OAAO,IAAI,CAAC;SACf;KACF;IAEO,MAAM,aAAa;QACzB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAE1B,IAAI;YACF,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;YACjC,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE;gBAC1B,MAAM,IAAI,KAAK,CAAC,qCAAqC,CAAC,CAAC;aACxD;YACD,IAAI,CAAC,UAAU,EAAE;gBACf,MAAM,YAAY,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC;oBAC7D,EAAE,EAAE,CAAC;oBACL,KAAK,EAAE,IAAI,CAAC,CAAC;oBACb,QAAQ,EAAE,IAAI,CAAC,QAAQ;oBACvB,UAAU,EAAE,IAAI;oBAChB,uBAAuB,EAAE,IAAI;iBAC9B,CAAC,CAAC;gBACH,UAAU,GAAG,YAAY,CAAC,SAAS,CAAC,EAAE,CAAC;aACxC;YAED,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;YAE9B,MAAM,QAAQ,GAAmB;gBAC/B,IAAI,CAAC,cAAc,CAAC,+BAA+B,CAAC,CAAC,WAAW,EAAE,iBAAiB,EAAE,aAAa,CAAC,CAAC;gBACpG,IAAI,CAAC,iBAAiB,EAAE;gBACxB,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC;aAC9C,CAAC;YACF,IAAI,UAAU,EAAE;gBACd,QAAQ,CAAC,IAAI,CACX,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC;oBAClC,EAAE,EAAE,UAAU;oBACd,QAAQ,EAAE,IAAI,CAAC,QAAQ;oBACvB,UAAU,EAAE,IAAI;oBAChB,uBAAuB,EAAE,IAAI;iBAC9B,CAAC,CACH,CAAC;aACH;YAED,MAAM,CAAC,YAAY,CAAC,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YACnD,MAAM,EAAE,QAAQ,EAAE,cAAc,EAAE,UAAU,EAAE,GAAG,IAAI,CAAC,cAAc,CAAC,sBAAsB,CAAC,YAAY,CAAC,CAAC;YAC1G,IAAI,CAAC,cAAc,GAAG;gBACpB,MAAM,EAAE,cAAc;gBACtB,OAAO,EAAE,UAAU;gBACnB,KAAK,EAAE,QAAQ;aAChB,CAAC;SACH;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;SACpB;gBAAS;YACR,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;SAC5B;KACF;IACO,mBAAmB,CAAC,QAAwB;;QAClD,MAAM,cAAc,GAAwB,IAAI,GAAG,EAAE,CAAC;QAEtD,KAAK,MAAM,OAAO,IAAI,QAAQ,EAAE;YAC9B,MAAM,GAAG,GAAG,GAAG,OAAO,CAAC,WAAW,IAAI,OAAO,CAAC,aAAa,EAAE,CAAC;YAC9D,MAAM,CAAC,GAAG,MAAA,cAAc,CAAC,GAAG,CAAC,GAAG,CAAC,mCAAI,EAAE,CAAC;YACxC,cAAc,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC;SAC1C;QACD,OAAO,IAAI,GAAG,CACZ,CAAC,GAAG,cAAc,CAAC,OAAO,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAC1C,MAAM,IAAI,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;YACvB,MAAM,IAAI,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;gBAChC,OAAO,IAAI,GAAG,IAAI,CAAC;aACpB;YACD,OAAO,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;SAC3B,CAAC,CACH,CAAC;KACH;IAEO,MAAM,iBAAiB,CAAC,eAAe,GAAG,KAAK,EAAE,gBAAgB,GAAG,KAAK;;QAC/E,IAAI;YACF,MAAM,YAAY,GAAG,CAAC,MAAM;gBAC1B,OAAO;oBACL,MAAM,EAAE,MAAM,CAAC,MAAM;oBACrB,WAAW,EAAE,MAAM,CAAC,aAAa;oBACjC,aAAa,EAAE,MAAM,CAAC,eAAe;oBACrC,MAAM,EAAE,MAAM,CAAC,MAAM;oBACrB,IAAI,EAAE,MAAM,CAAC,IAAI;oBACjB,IAAI,EAAE,MAAM,CAAC,IAAI;oBACjB,MAAM,EAAE,MAAM,CAAC,MAAM;oBACrB,IAAI,EAAE,MAAM,CAAC,IAAI;oBACjB,QAAQ,EAAE,MAAM,CAAC,QAAQ;oBACzB,UAAU,EAAE,MAAM,CAAC,WAAW;oBAC9B,EAAE,EAAE,EAAE,EAAE;iBACT,CAAC;aACH,CAAC;YACF,IAAI,CAAC,SAAS,GAAG,eAAe,GAAG,QAAQ,GAAG,QAAQ,CAAC;YAEvD,MAAM,QAAQ,GAAG;gBACf,IAAI,CAAC,eAAe,CAAC,qBAAqB,CAAC;oBACzC,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI;oBACvB,WAAW,EAAE,MAAA,IAAI,CAAC,WAAW,0CAAE,QAAQ,EAAE;oBACzC,kBAAkB,EAAE,eAAe;iBACpC,CAAC;aACH,CAAC;YACF,IAAI,CAAC,eAAe,IAAI,CAAC,gBAAgB,EAAE;gBACzC,QAAQ,CAAC,IAAI,CACX,IAAI,CAAC,eAAe,CAAC,qBAAqB,CAAC;oBACzC,IAAI,EAAEA,KAAM,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC;oBAClF,WAAW,EAAE,MAAA,IAAI,CAAC,WAAW,0CAAE,QAAQ,EAAE;oBACzC,kBAAkB,EAAE,eAAe;iBACpC,CAAC,CACH,CAAC;aACH;YAED,MAAM,OAAO,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAC5C,IAAI,CAAC,eAAe,EAAE;gBACpB,IAAI,OAAO,CAAC,CAAC,CAAC,EAAE;oBACd,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,mBAAmB,CAAC,MAAA,OAAO,CAAC,CAAC,CAAC,0CAAE,GAAG,CAAC,YAAY,CAAC,CAAC,CAAC;iBAC/E;qBAAM;oBACL,IAAI,CAAC,cAAc,GAAG,IAAI,GAAG,EAAE,CAAC;iBACjC;gBACD,IAAI,OAAO,CAAC,CAAC,CAAC;oBAAE,IAAI,CAAC,2BAA2B,GAAG,IAAI,CAAC,mBAAmB,CAAC,MAAA,OAAO,CAAC,CAAC,CAAC,0CAAE,GAAG,CAAC,YAAY,CAAC,CAAC,CAAC;aAC5G;SACF;QAAC,OAAO,CAAC,EAAE;YACV,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;SAChB;gBAAS;YACR,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;SACvB;KACF;IAED,MAAM;;QACJ,IAAI,IAAI,CAAC,aAAa,EAAE;YACtB,OAAO,4BAAuC,CAAC;SAChD;QACD,QACE,EAAC,IAAI,QACH,mBAAqB,EACrB,yBAAiC,EACjC,eAAS,KAAK,EAAC,wBAAwB,EAAC,KAAK,EAAE,EAAE,GAAG,EAAE,MAAM,EAAE,IAC5D,WAAK,KAAK,EAAC,mDAAmD,IAC5D,UAAI,KAAK,EAAC,cAAc,oBAAmB,EAC3C,iBACE,IAAI,EAAC,IAAI,EACT,SAAS,EAAC,SAAS,EACnB,SAAS,EAAE,IAAI,CAAC,SAAS,KAAK,QAAQ,EACtC,IAAI,EAAE,MAAA,OAAO,CAAC,OAAO,0CAAE,UAAU,EACjC,cAAc,EAAE,OAAM,CAAC;gBACrB,CAAC,CAAC,wBAAwB,EAAE,CAAC;gBAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,MAAM,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;aACpC,EACD,QAAQ,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,EAC5B,YAAY,EAAC,OAAO,EACpB,SAAS,EAAC,MAAM,EAChB,UAAU,EAAE,EAAE,aAAa,EAAE,MAAM,EAAE,GAC1B,CACT,EACN,0BACE,2BAA2B,EAAE,IAAI,CAAC,2BAA2B,EAC7D,eAAe,EAAE,IAAI,CAAC,cAAc,EACpC,cAAc,EAAE,IAAI,CAAC,cAAc,GACf,EACtB,WAAK,KAAK,EAAC,qBAAqB,IAC9B,gCAA0B,SAAS,EAAE,IAAI,CAAC,SAAS,KAAK,QAAQ,EAAE,QAAQ,EAAE,IAAI,CAAC,cAAc,GAA6B,EAC5H,wBAAkB,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,KAAK,EAAE,sBAAsB,EAAE,cAAc,EAAE,IAAI,CAAC,cAAc,EAAE,QAAQ,EAAE,IAAI,CAAC,cAAc,GAAqB,CAC3J,CACE,EACV,kBACE,aAAa,EAAE;gBACb,KAAK,EAAE,CAAA,MAAA,IAAI,CAAC,YAAY,0CAAE,IAAI,MAAK,SAAS,GAAG,OAAO,GAAG,4BAA4B;gBACrF,UAAU,EAAE,CAAA,MAAA,IAAI,CAAC,YAAY,0CAAE,IAAI,MAAK,SAAS,GAAG,SAAS,GAAG,OAAO;aACxE,EACD,IAAI,EAAE,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,EAChC,eAAe,EAAE,KAAK,EACtB,iBAAiB,EAAE,IAAI,CAAC,kBAAkB,IAEzC,IAAI,CAAC,iBAAiB,EAAE,CACd,CACR,EACP;KACH;;;;;;;ACxRH,MAAM,YAAY,GAAG,yPAAyP,CAAC;AAC/Q,wBAAe,YAAY;;MCmBd,SAAS;IALtB;;;QAQU,aAAQ,GAAW,EAAE,CAAC;QACtB,WAAM,GAAW,EAAE,CAAC;QAKnB,cAAS,GAAG,KAAK,CAAC;QAClB,sBAAiB,GAAG,KAAK,CAAC;QAC1B,qBAAgB,GAAG,EAAE,CAAC;QACtB,wBAAmB,GAAG,GAAG,CAAC;QAC1B,iBAAY,GAA2B,IAAI,CAAC;QAC5C,kBAAa,GAAG,KAAK,CAAC;QASvB,gBAAW,GAA2B,EAAE,CAAC;QACzC,gBAAW,GAAG,IAAI,WAAW,EAAE,CAAC;QAChC,wBAAmB,GAAG,IAAI,mBAAmB,EAAE,CAAC;QAChD,UAAK,GAAG,IAAI,KAAK,EAAE,CAAC;QACpB,kBAAa,GAAgC,IAAI,GAAG,EAAE,CAAC;KAkUhE;IA/TC,iBAAiB;QACf,IAAI,IAAI,CAAC,OAAO,EAAE;YAChB,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SACrC;QACD,IAAI,IAAI,CAAC,MAAM,KAAK,EAAE,EAAE;YACtB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACjC,IAAI,CAAC,IAAI,EAAE,CAAC;SACb;KACF;IAGD,aAAa,CAAC,QAAgB,EAAE,QAAgB;QAC9C,IAAI,QAAQ,KAAK,QAAQ,EAAE;YACzB,OAAO;SACR;QACD,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACjC,IAAI,CAAC,IAAI,EAAE,CAAC;KACb;IAGD,kBAAkB,CAAC,CAAc;QAC/B,CAAC,CAAC,wBAAwB,EAAE,CAAC;QAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;KAC5B;IAED,oBAAoB,CAAC,CAAc;QACjC,CAAC,CAAC,wBAAwB,EAAE,CAAC;QAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,MAAM,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG,CAAC,CAAC,MAAM,CAAC;QACtC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;QACtB,IAAI,KAAK,KAAK,MAAM,EAAE;YACpB,OAAO;SACR;QACD,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;KAC1C;IAED,sBAAsB,CAAC,CAAc;;QACnC,CAAC,CAAC,wBAAwB,EAAE,CAAC;QAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,IAAI,CAAC,WAAW,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC;QACrD,MAAA,IAAI,CAAC,KAAK,0CAAE,SAAS,EAAE,CAAC;KACzB;IAEO,MAAM,IAAI;;QAChB,IAAI;YACF,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,UAAU,CAAC,IAAI,CAAC,CAAC;YACjB,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;YACjC,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE;gBAC/B,MAAM,IAAI,KAAK,CAAC,qCAAqC,CAAC,CAAC;aACxD;;YAED,IAAI,CAAC,UAAU,EAAE;gBACf,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;gBACxB,MAAM,YAAY,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC;oBAC7D,EAAE,EAAE,CAAC;oBACL,KAAK,EAAE,IAAI,CAAC,CAAC;oBACb,QAAQ,EAAE,IAAI,CAAC,QAAQ;oBACvB,UAAU,EAAE,IAAI;oBAChB,uBAAuB,EAAE,IAAI;iBAC9B,CAAC,CAAC;;gBAEH,UAAU,GAAG,YAAY,CAAC,SAAS,CAAC,EAAE,CAAC;aACxC;YACD,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;YAC9B,MAAM,QAAQ,GAAG,CAAC,IAAI,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YAC/H,IAAI,IAAI,CAAC,UAAU,EAAE;gBACnB,QAAQ,CAAC,IAAI,CACX,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC;oBAClC,EAAE,EAAE,IAAI,CAAC,UAAU;oBACnB,QAAQ,EAAE,IAAI,CAAC,QAAQ;oBACvB,UAAU,EAAE,IAAI;oBAChB,uBAAuB,EAAE,IAAI;iBAC9B,CAAC,CACH,CAAC;aACH;YAED,MAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAC5B,MAAM,WAAW,GAAG,MAAM,IAAI,CAAC,mBAAmB,CAAC,UAAU,CAAC;gBAC5D,WAAW,EAAE,IAAI,CAAC,WAAW;gBAC7B,SAAS,EAAEA,KAAM,EAAE,CAAC,MAAM,CAAC,YAAY,CAAC;gBACxC,OAAO,EAAEA,KAAM,EAAE,CAAC,MAAM,CAAC,YAAY,CAAC;gBACtC,YAAY,EAAE,EAAE;gBAChB,kBAAkB,EAAE,OAAC,MAAA,aAAa,CAAC,kBAAkB,mCAAI,MAAA,kBAAkB,aAAlB,kBAAkB,uBAAlB,kBAAkB,CAAE,WAAW,0CAAE,oBAAoB,CAAC,CAAC,CAAC,CAAC,0CAAE,IAAI;gBACxH,YAAY,EAAE,MAAA,MAAA,kBAAkB,aAAlB,kBAAkB,uBAAlB,kBAAkB,CAAE,WAAW,0CAAE,aAAa,CAAC,CAAC,CAAC,0CAAE,IAAI;gBACrE,gBAAgB,EAAE,MAAA,MAAA,kBAAkB,aAAlB,kBAAkB,uBAAlB,kBAAkB,CAAE,WAAW,0CAAE,yBAAyB,CAAC,CAAC,CAAC,0CAAE,IAAI;aACtF,CAAC,CAAC;;YAGH,IAAI,WAAW,aAAX,WAAW,uBAAX,WAAW,CAAE,KAAK,EAAE;gBACtB,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;aACrC;SACF;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;SACpB;gBAAS;YACR,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,UAAU,CAAC,KAAK,CAAC,CAAC;SACnB;KACF;IAEO,yBAAyB;;QAC/B,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,MAAA,MAAA,kBAAkB,CAAC,WAAW,0CAAE,YAAY,0CAAE,OAAO,CAAC,EAAE;YACtD,IAAI,EAAE,CAAC,EAAE,IAAI,IAAI,IAAI,EAAE,CAAC,IAAI,IAAI,IAAI,EAAE;gBACpC,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC;aACnC;SACF,CAAC,CAAC;KACJ;IAEO,WAAW,CAAC,KAAY;QAC9B,IAAI,CAAC,yBAAyB,EAAE,CAAC;QACjCC,WAAgB,CACd,KAAK,CAAC,GAAG,CAAC,CAAC,qCACN,CAAC,KACJ,EAAE,EAAE,EAAE,EAAE,EACR,WAAW,EAAE,CAAC;;gBACZ,MAAM,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;gBACxC,IAAI,IAAI,EAAE;oBACR,OAAO,IAAI,CAAC;iBACb;gBACD,MAAM,MAAM,GAAG,MAAA,MAAA,MAAA,kBAAkB,CAAC,WAAW,0CAAE,YAAY,0CAAE,IAAI,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC,MAAM,CAAC,0CAAE,IAAI,CAAC;gBAClG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC;gBACpC,OAAO,MAAM,CAAC;aACf,GAAG,IACJ,CAAC,CACJ,CAAC;KACH;IAED,MAAM,uBAAuB,CAAC,CAAc;;QAC1C,CAAC,CAAC,wBAAwB,EAAE,CAAC;QAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,MAAM,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC,MAAM,CAAC;QAC1B,QAAQ,IAAI;YACV,KAAK,SAAS,CAAC;YACf,KAAK,eAAe;gBAClB,MAAA,IAAI,CAAC,KAAK,0CAAE,SAAS,EAAE,CAAC;gBACxB,IAAI,CAAC,WAAW,GAAG;oBACjB,IAAI,EAAE,IAAI;oBACV,KAAK,EAAE,OAAO;oBACd,MAAM,EAAE,IAAI,KAAK,eAAe,GAAG,KAAK,GAAG,KAAK;iBACjD,CAAC;gBACF,MAAM;YACR,KAAK,QAAQ;gBACX,MAAM,YAAY,GAAqC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,KAAK,CAAC,MAAM;oBACrH,GAAG;oBACH,KAAK;iBACN,CAAC,CAAC,CAAC;gBACJ,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;gBAC1B,MAAM,EAAE,GAAG,EAAE,GAAG,MAAM,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;gBACvD,YAAY,CAAC,GAAG,CAAC,CAAC;gBAClB,MAAM;YACR,KAAK,SAAS;gBACZ,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;gBAC1B,MAAM;SACT;KACF;IAED,+BAA+B,CAAC,CAA8B;;QAC5D,CAAC,CAAC,wBAAwB,EAAE,CAAC;QAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,IAAI,CAAC,WAAW,mCAAQ,CAAC,CAAC,MAAM,KAAE,KAAK,EAAE,OAAO,GAAE,CAAC;QACnD,MAAA,IAAI,CAAC,KAAK,0CAAE,SAAS,EAAE,CAAC;KACzB;IAEO,MAAM,uBAAuB,CAAC,CAAc;;QAClD,IAAI;YACF,CAAC,CAAC,wBAAwB,EAAE,CAAC;YAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;YACpB,IAAI,YAAY,CAAC,aAAa,CAAC,MAAM,KAAK,CAAC,EAAE;gBAC3C,OAAO;aACR;YACD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;YAC9B,IAAI,CAAA,MAAA,IAAI,CAAC,WAAW,0CAAE,KAAK,MAAK,MAAM,EAAE;gBACtC,MAAM,EAAE,WAAW,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC;gBAC1D,MAAM,IAAI,CAAC,mBAAmB,CAAC,UAAU,CAAC;oBACxC,QAAQ,EAAE,WAAW;oBACrB,IAAI,EAAE,IAAI;oBACV,OAAO,EAAE,EAAE;oBACX,UAAU,EAAE,CAAC,CAAC;oBACd,mBAAmB,EAAE,KAAK;oBAC1B,KAAK,EAAE,IAAI,CAAC,EAAE;iBACf,CAAC,CAAC;aACJ;iBAAM;gBACL,MAAM,IAAI,CAAC,mBAAmB,CAAC,eAAe,CAAC;oBAC7C,OAAO,EAAE,YAAY,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;;wBAAI,QAAC;4BAC5C,WAAW,EAAE,SAAS;4BACtB,MAAM,EAAE,CAAC,CAAC,MAAM,KAAK,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,MAAM;4BACxC,OAAO,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE;4BAClB,WAAW,EAAE,CAAC,CAAC,WAAW;4BAC1B,MAAM,EAAE,MAAA,MAAA,IAAI,CAAC,WAAW,0CAAE,MAAM,mCAAI,KAAK;yBAC1C,EAAC;qBAAA,CAAC;iBACJ,CAAC,CAAC;aACJ;YACD,MAAM,IAAI,CAAC,qBAAqB,EAAE,CAAC;SACpC;gBAAS;YACR,kBAAkB,EAAE,CAAC;YACrB,IAAI,IAAI,CAAC,WAAW,EAAE;gBACpB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;aACzB;YACD,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;;YAE/B,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC;SACzB;KACF;IAEO,MAAM,YAAY,CAAC,CAAc;QACvC,IAAI;YACF,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;YAClC,CAAC,CAAC,wBAAwB,EAAE,CAAC;YAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;YACpB,IAAI,CAAC,OAAO,qBAAQ,CAAC,CAAC,MAAM,CAAE,CAAC;YAC/B,MAAM,IAAI,CAAC,qBAAqB,EAAE,CAAC;SACpC;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;SACpB;gBAAS;YACR,IAAI,CAAC,qBAAqB,GAAG,KAAK,CAAC;SACpC;KACF;IAEO,MAAM,qBAAqB,CAAC,kBAA2B,KAAK;;QAClE,MAAM,EAAE,gBAAgB,EAAE,YAAY,EAAE,oBAAoB,EAAE,WAAW,EAAE,mBAAmB,EAAE,GAAG,MAAA,IAAI,CAAC,OAAO,mCAAI,EAAE,CAAC;QAEtH,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,MAAM,IAAI,CAAC,mBAAmB,CAAC,UAAU,CAAC;YAC/D,YAAY;YACZ,kBAAkB,EAAE,oBAAoB,aAApB,oBAAoB,uBAApB,oBAAoB,CAAE,IAAI;YAC9C,YAAY,EAAE,WAAW,aAAX,WAAW,uBAAX,WAAW,CAAE,IAAI;YAC/B,gBAAgB,EAAE,mBAAmB,aAAnB,mBAAmB,uBAAnB,mBAAmB,CAAE,IAAI;YAC3C,WAAW,EAAE,IAAI,CAAC,WAAW;YAC7B,SAAS,EAAED,KAAM,EAAE,CAAC,MAAM,CAAC,YAAY,CAAC;YACxC,OAAO,EAAE,CAAA,gBAAgB,aAAhB,gBAAgB,uBAAhB,gBAAgB,CAAE,IAAI,KAAIA,KAAM,EAAE,CAAC,MAAM,CAAC,YAAY,CAAC;YAChE,kBAAkB,EAAE,eAAe;SACpC,CAAC,CAAC;QACH,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACnB,IAAI,KAAK,EAAE;YACT,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;SACzB;QACD,OAAO,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC;KACvB;IAED,MAAM;;QACJ,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,OAAO,4BAAuC,CAAC;SAChD;QACD,QACE,EAAC,IAAI,mBAAa,eAAe,IAC/B,mBAAqB,EACrB,yBAAiC,EACjC,eAAS,KAAK,EAAC,wBAAwB,EAAC,KAAK,EAAE,EAAE,GAAG,EAAE,MAAM,EAAE,IAC5D,mCAA2B,EAC3B,WAAK,KAAK,EAAC,aAAa,EAAC,KAAK,EAAE,EAAE,GAAG,EAAE,MAAM,EAAE,IAC7C,wBACE,SAAS,EAAE,IAAI,CAAC,qBAAqB,EACrC,cAAc,EAAE,CAAC;gBACf,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;aACtB,GACiB,EACpB,WAAK,KAAK,EAAC,0BAA0B,EAAC,KAAK,EAAE,EAAE,GAAG,EAAE,MAAM,EAAE,IAC1D,sBACE,iBAAiB,EAAE,CAAC;gBAClB,CAAC,CAAC,wBAAwB,EAAE,CAAC;gBAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,mBAAmB,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;aAC/B,EACD,KAAK,EAAC,mBAAmB,GACT,CAEd,CACF,CACE,EACV,gBACE,SAAS,EAAE,KAAK,EAChB,GAAG,EAAE,EAAE,KAAK,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC,EAC5B,SAAS,EAAE,IAAI,CAAC,iBAAiB,EACjC,cAAc,EAAE,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,IAAI,CAAC,EACvD,aAAa,EAAE;gBACb,IAAI,IAAI,CAAC,WAAW,EAAE;oBACpB,kBAAkB,EAAE,CAAC;oBACrB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;iBACzB;aACF,EACD,aAAa,EAAE,IAAI,EACnB,IAAI,EAAC,6BAA6B,EAClC,WAAW,EAAE,OAAO,CAAC,OAAO,CAAC,UAAU,EACvC,YAAY,EAAE,OAAO,CAAC,OAAO,CAAC,WAAW,EACzC,YAAY,EAAC,WAAW,EACxB,aAAa,EAAE,SAAS,EACxB,UAAU,EAAE,OAAO,CAAC,OAAO,CAAC,gBAAgB,EAC5C,SAAS,EACP,IAAI,CAAC,WAAW;kBACZ,CAAA,MAAA,IAAI,CAAC,WAAW,0CAAE,KAAK,MAAK,OAAO;sBACjC,IAAI,CAAC,WAAW,CAAC,IAAI;0BACnB,UAAU,MAAA,MAAA,MAAA,IAAI,CAAC,WAAW,0CAAE,IAAI,0CAAE,IAAI,0CAAE,IAAI,WAAW;0BACvD,kCAAkC;sBACpC,4CAA4C;kBAC9C,kCAAkC,GAE9B,EACZ,kBACE,IAAI,EAAE,IAAI,CAAC,aAAa,EACxB,EAAE,EAAC,eAAe,EAClB,iBAAiB,EAAE,CAAC;gBAClB,CAAC,CAAC,wBAAwB,EAAE,CAAC;gBAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;aAC5B;;;;YAID,eAAe,EAAE,KAAK,IAErB,IAAI,CAAC,aAAa,IAAI,qBAAe,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,UAAU,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,EAAC,cAAc,GAAiB,CAC5H,CAIR,EACP;KACH;;;;;;;;AChXH,MAAM,iBAAiB,GAAG,sCAAsC,CAAC;AACjE,6BAAe,iBAAiB;;MCcnB,cAAc;IAL3B;;;QAMU,aAAQ,GAAW,EAAE,CAAC;QACtB,WAAM,GAAW,EAAE,CAAC;QAMnB,cAAS,GAAG,KAAK,CAAC;QAInB,gBAAW,GAAG,IAAI,WAAW,EAAE,CAAC;QAChC,wBAAmB,GAAG,IAAI,mBAAmB,EAAE,CAAC;QAChD,oBAAe,GAAG,IAAI,eAAe,EAAE,CAAC;QACxC,UAAK,GAAG,IAAI,KAAK,EAAE,CAAC;KA2K7B;IAvKC,iBAAiB;QACf,IAAI,IAAI,CAAC,OAAO,EAAE;YAChB,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SACrC;QACD,IAAI,IAAI,CAAC,MAAM,KAAK,EAAE,EAAE;YACtB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACjC,IAAI,CAAC,aAAa,EAAE,CAAC;SACtB;KACF;IAED,MAAM,eAAe,CAAC,CAAc;QAClC,CAAC,CAAC,wBAAwB,EAAE,CAAC;QAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,MAAM,IAAI,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;KACnE;IAED,aAAa,CAAC,QAAgB,EAAE,QAAgB;QAC9C,IAAI,QAAQ,KAAK,QAAQ,EAAE;YACzB,OAAO;SACR;QACD,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACjC,IAAI,CAAC,aAAa,EAAE,CAAC;KACtB;IAED,MAAM,aAAa;;QACjB,IAAI;YACF,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;YACjC,IAAI,CAAC,UAAU,EAAE;gBACf,MAAM,YAAY,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC;oBAC7D,EAAE,EAAE,CAAC;oBACL,KAAK,EAAE,IAAI,CAAC,CAAC;oBACb,QAAQ,EAAE,IAAI,CAAC,QAAQ;oBACvB,UAAU,EAAE,IAAI;oBAChB,wBAAwB,EAAE,IAAI;iBAC/B,CAAC,CAAC;gBACH,UAAU,GAAG,YAAY,CAAC,SAAS,CAAC,EAAE,CAAC;aACxC;YACD,aAAa,CAAC,oBAAoB,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,MAAM,EAAE,WAAW,EAAE,UAAU,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;YAC9G,MAAM,QAAQ,GAAwB,EAAE,CAAC;YACzC,IAAI,aAAa,CAAC,oBAAoB,EAAE;gBACtC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC,CAAC;aACvE;YACD,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,WAAW,EAAE,YAAY,CAAC,CAAC,CAAC,CAAC;YAC1F,IAAI,IAAI,CAAC,UAAU,EAAE;gBACnB,QAAQ,CAAC,IAAI,CACX,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC;oBAClC,EAAE,EAAE,UAAU;oBACd,QAAQ,EAAE,IAAI,CAAC,QAAQ;oBACvB,UAAU,EAAE,IAAI;oBAChB,wBAAwB,EAAE,IAAI;iBAC/B,CAAC,CACH,CAAC;aACH;YAED,MAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAC5B,IAAI,CAAC,yBAAyB,GAAG,MAAA,aAAa,CAAC,kBAAkB,0CAAE,IAAI,CAAC;SACzE;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;SACtB;gBAAS;YACR,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;SACxB;KACF;IACO,MAAM,4BAA4B,CAAC,CAAc;QACvD,CAAC,CAAC,wBAAwB,EAAE,CAAC;QAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,IAAI;YACF,MAAM,IAAI,CAAC,WAAW,CAAC,sBAAsB,CAAC;gBAC5C,WAAW,EAAE,kBAAkB,CAAC,kBAAkB,CAAC,WAAW;gBAC9D,IAAI,EAAE,CAAC,CAAC,MAAM,KAAK,MAAM;aAC1B,CAAC,CAAC;YACH,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;gBACd,QAAQ,EAAE,WAAW;gBACrB,KAAK,EAAE,oBAAoB;gBAC3B,WAAW,EAAE,EAAE;gBACf,IAAI,EAAE,SAAS;aAChB,CAAC,CAAC;SACJ;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;SACpB;KACF;IACO,MAAM,qBAAqB,CAAC,CAAc;QAChD,CAAC,CAAC,wBAAwB,EAAE,CAAC;QAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,IAAI;YACF,MAAM,IAAI,CAAC,eAAe,CAAC,2BAA2B,CAAC;gBACrD,WAAW,EAAE,kBAAkB,CAAC,kBAAkB,CAAC,WAAW;gBAC9D,IAAI,EAAE,IAAI,CAAC,yBAAyB;aACrC,CAAC,CAAC;YACH,aAAa,CAAC,kBAAkB,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,yBAAyB,EAAE,WAAW,EAAE,EAAE,EAAE,CAAC;YAC7F,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;gBACd,QAAQ,EAAE,WAAW;gBACrB,KAAK,EAAE,oBAAoB;gBAC3B,WAAW,EAAE,EAAE;gBACf,IAAI,EAAE,SAAS;aAChB,CAAC,CAAC;YACH,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC;SACzB;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;SACpB;KACF;IACD,MAAM;;QACJ,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,OAAO,4BAAuC,CAAC;SAChD;QACD,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAC;QAC9C,QACE,EAAC,IAAI,QACH,yBAAiC,EACjC,mBAAqB,EACrB,eAAS,KAAK,EAAC,KAAK,IAClB,UAAI,KAAK,EAAC,MAAM,IAAE,OAAO,CAAC,OAAO,CAAC,+BAA+B,CAAM,EACvE,WAAK,KAAK,EAAC,UAAU,IACnB,gBAAU,WAAW,QAAC,KAAK,EAAC,qBAAqB,GAAY,EAC7D,WAAK,KAAK,EAAE,gCAAgC,IAC1C,SAAG,KAAK,EAAC,gBAAgB,IAAE,OAAO,CAAC,OAAO,CAAC,iCAAiC,CAAK,EACjF,iBACE,eAAe,EAAE,KAAK,EACtB,aAAa,EAAE,aAAa,CAAC,yBAAyB,GAAG,MAAM,GAAG,QAAQ,EAC1E,cAAc,EAAE,CAAC,IAAI,IAAI,CAAC,4BAA4B,CAAC,CAAC,CAAC,EACzD,IAAI,EAAE;gBACJ,EAAE,IAAI,EAAE,OAAO,CAAC,OAAO,CAAC,0BAA0B,EAAE,KAAK,EAAE,MAAM,EAAE;gBACnE,EAAE,IAAI,EAAE,OAAO,CAAC,OAAO,CAAC,uBAAuB,EAAE,KAAK,EAAE,QAAQ,EAAE;aACnE,GACU,CACT,EACN,WAAK,KAAK,EAAE,2BAA2B,IACrC,SAAG,KAAK,EAAC,gBAAgB,IAAE,OAAO,CAAC,OAAO,CAAC,qBAAqB,MAAM,EACtE,iBACE,eAAe,EAAE,KAAK,EACtB,aAAa,EAAE,IAAI,CAAC,yBAAyB,EAC7C,cAAc,EAAE,CAAC;gBACf,CAAC,CAAC,wBAAwB,EAAE,CAAC;gBAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,IAAI,CAAC,yBAAyB,GAAG,CAAC,CAAC,MAAM,CAAC;gBAC1C,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC;aACxB,EACD,IAAI,EAAE,MAAA,kBAAkB,aAAlB,kBAAkB,uBAAlB,kBAAkB,CAAE,WAAW,0CAAE,oBAAoB,CAAC,GAAG,CAAC,CAAC,KAAK;gBACpE,IAAI,EAAE,CAAC,CAAC,WAAW;gBACnB,KAAK,EAAE,CAAC,CAAC,IAAI;aACd,CAAC,CAAC,GACQ,CACT,CACF,EAEL,aAAa,CAAC,oBAAoB,IAAI,kBAAY,KAAK,EAAC,MAAM,GAAc,EAC7E,gBACE,SAAS,EAAE,KAAK,EAChB,GAAG,EAAE,EAAE,KAAK,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC,EAC5B,SAAS,EAAE,gBAAgB,CAAC,iCAAiC,CAAC,EAC9D,cAAc,EAAE,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,EACrD,aAAa,EAAE,IAAI,EACnB,aAAa,EAAE;;gBACb,IAAI,CAAC,yBAAyB,GAAG,MAAA,aAAa,CAAC,kBAAkB,0CAAE,IAAI,CAAC;aACzE,EACD,IAAI,EAAC,6BAA6B,EAClC,WAAW,EAAE,OAAO,CAAC,OAAO,CAAC,UAAU,EACvC,YAAY,EAAE,OAAO,CAAC,OAAO,CAAC,WAAW,EACzC,YAAY,EAAC,WAAW,EACxB,aAAa,EAAE,SAAS,EACxB,UAAU,EAAE,OAAO,CAAC,OAAO,CAAC,gBAAgB,EAC5C,SAAS,EAAE,0EAA0E,GAC3E,CACJ,CACL,EACP;KACH;;;;;;;ACxMH,MAAM,0BAA0B,GAAG,iDAAiD,CAAC;AACrF,sCAAe,0BAA0B;;;;;;;;;;;;;;MCY5B,uBAAuB;IALpC;;QAMU,aAAQ,GAAW,EAAE,CAAC;QACtB,WAAM,GAAW,EAAE,CAAC;QAInB,kBAAa,GAAG,IAAI,CAAC;QACrB,cAAS,GAA+B,IAAI,CAAC;QAE7C,YAAO,GAAkB,EAAE,CAAC;QAO7B,iBAAY,GAAG,IAAI,KAAK,EAAE,CAAC;QAC3B,gBAAW,GAAG,IAAI,WAAW,EAAE,CAAC;QAChC,oBAAe,GAAG,IAAI,eAAe,EAAE,CAAC;KAoMjD;IAlMC,iBAAiB;QACf,IAAI,CAAC,WAAW,GAAG;YACjB,IAAI,EAAE;gBACJ,WAAW,EAAEA,KAAM,EAAE,CAAC,MAAM,CAAC,WAAW,CAAC;gBACzC,YAAY,EAAEA,KAAM,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC;gBAC5D,WAAW,EAAEA,KAAM,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC;aAC1D;YACD,qBAAqB,EAAE,KAAK;SAC7B,CAAC;QACF,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC;QAChC,IAAI,IAAI,CAAC,MAAM,EAAE;YACf,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACxC,IAAI,CAAC,IAAI,EAAE,CAAC;SACb;KACF;IAED,kBAAkB,CAAC,QAAgB,EAAE,QAAgB;QACnD,IAAI,QAAQ,KAAK,QAAQ,EAAE;YACzB,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACxC,IAAI,CAAC,IAAI,EAAE,CAAC;SACb;KACF;IAED,wBAAwB,CAAC,CAAiC;QACxD,CAAC,CAAC,wBAAwB,EAAE,CAAC;QAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,MAAM,CAAC;QACxB,IAAI,CAAC,UAAU,EAAE,CAAC;KACnB;IAEO,MAAM,IAAI;QAChB,IAAI;YACF,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;YACjC,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE;gBAC/B,MAAM,IAAI,KAAK,CAAC,qCAAqC,CAAC,CAAC;aACxD;;YAED,IAAI,CAAC,UAAU,EAAE;gBACf,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;gBACxB,MAAM,YAAY,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC;oBAC7D,EAAE,EAAE,CAAC;oBACL,KAAK,EAAE,IAAI,CAAC,CAAC;oBACb,QAAQ,EAAE,IAAI,CAAC,QAAQ;oBACvB,UAAU,EAAE,IAAI;oBAChB,uBAAuB,EAAE,IAAI;iBAC9B,CAAC,CAAC;;gBAEH,UAAU,GAAG,YAAY,CAAC,SAAS,CAAC,EAAE,CAAC;aACxC;YACD,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;YAC9B,MAAM,QAAQ,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;YACpF,IAAI,IAAI,CAAC,UAAU,EAAE;gBACnB,QAAQ,CAAC,IAAI,CACX,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC;oBAClC,EAAE,EAAE,IAAI,CAAC,UAAU;oBACnB,QAAQ,EAAE,IAAI,CAAC,QAAQ;oBACvB,UAAU,EAAE,IAAI;oBAChB,uBAAuB,EAAE,IAAI;iBAC9B,CAAC,CACH,CAAC;aACH;YAED,MAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;SAC7B;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;SACpB;gBAAS;YACR,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;SAC5B;KACF;IAEO,MAAM,UAAU,CAAC,eAAe,GAAG,KAAK;QAC9C,IAAI;YACF,MAAM,YAAY,GAAG,CAAC,MAAiB;gBACrC,OAAO;oBACL,GAAG,EAAE,MAAM,CAAC,IAAI;oBAChB,YAAY,EAAE,MAAM,CAAC,YAAY;oBACjC,iBAAiB,EAAE,MAAM,CAAC,SAAS;oBACnC,GAAG,EAAE,MAAM,CAAC,GAAG;oBACf,aAAa,EAAE,MAAM,CAAC,aAAa;oBACnC,YAAY,EAAE,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,YAAY;iBACnC,CAAC;aACH,CAAC;YACF,IAAI,CAAC,SAAS,GAAG,eAAe,GAAG,QAAQ,GAAG,QAAQ,CAAC;YACvD,MAAM,EAAE,IAAI,EAAE,qBAAqB,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC;YAErD,MAAM,QAAQ,GAAG;gBACf,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC;oBACnC,SAAS,EAAE,IAAI,CAAC,YAAY;oBAC5B,OAAO,EAAE,IAAI,CAAC,WAAW;oBACzB,WAAW,EAAE,IAAI,CAAC,WAAW;oBAC7B,kBAAkB,EAAE,eAAe;iBACpC,CAAC;aACH,CAAC;YAEF,IAAI,qBAAqB,EAAE;gBACzB,QAAQ,CAAC,IAAI,CACX,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC;oBACnC,SAAS,EAAEA,KAAM,CAAC,IAAI,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC;oBACvF,OAAO,EAAEA,KAAM,CAAC,IAAI,CAAC,WAAW,EAAE,YAAY,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC;oBACrF,WAAW,EAAE,IAAI,CAAC,WAAW;iBAC9B,CAAC,CACH,CAAC;aACH;YAED,MAAM,OAAO,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAC5C,MAAM,cAAc,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;YAClC,IAAI,eAAe,GAAkB,EAAE,CAAC;YACxC,MAAM,EAAE,UAAU,KAAc,cAAc,EAAvB,IAAI,YAAK,cAAc,EAAxC,cAAuB,CAAiB,CAAC;YAE/C,IAAI,CAAC,KAAK,qBAAQ,IAAI,CAAE,CAAC;YAEzB,IAAI,qBAAqB,IAAI,OAAO,CAAC,eAAe,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE;gBAC7D,MAAM,mBAAmB,GAAG,OAAO,CAAC,eAAe,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;gBAC7D,IAAI,gBAAgB,GAAG,mBAAmB,CAAC,UAAU,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;gBACxE,eAAe,GAAG,UAAU,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,OAAO;oBACxD,MAAM,QAAQ,GAAG,gBAAgB,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,GAAG,KAAKA,KAAM,CAAC,OAAO,CAAC,GAAG,EAAE,YAAY,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC;oBACrI,uCACK,OAAO,KACV,SAAS,EAAE,QAAQ,aAAR,QAAQ,cAAR,QAAQ,GAAI,IAAI,IAC3B;iBACH,CAAC,CAAC;aACJ;iBAAM;gBACL,eAAe,GAAG,UAAU,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;aAChD;YACD,IAAI,CAAC,OAAO,GAAG,CAAC,GAAG,eAAe,CAAC,CAAC;SACrC;QAAC,OAAO,CAAC,EAAE;YACV,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;SAChB;gBAAS;YACR,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;SACvB;KACF;IACD,MAAM;;QACJ,IAAI,IAAI,CAAC,aAAa,EAAE;YACtB,OAAO,4BAAuC,CAAC;SAChD;QACD,QACE,EAAC,IAAI,QACH,mBAAqB,EACrB,yBAAiC,EACjC,eAAS,KAAK,EAAC,wBAAwB,EAAC,KAAK,EAAE,EAAE,GAAG,EAAE,MAAM,EAAE,IAC5D,WAAK,KAAK,EAAC,mDAAmD,IAC5D,UAAI,KAAK,EAAC,cAAc,sBAAqB,EAC7C,iBACE,IAAI,EAAC,IAAI,EACT,SAAS,EAAC,SAAS,EACnB,SAAS,EAAE,IAAI,CAAC,SAAS,KAAK,QAAQ,EACtC,IAAI,EAAE,MAAA,OAAO,CAAC,OAAO,0CAAE,UAAU,EACjC,cAAc,EAAE,OAAM,CAAC;gBACrB,CAAC,CAAC,wBAAwB,EAAE,CAAC;gBAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,MAAM,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;aAC7B,EACD,QAAQ,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,EAC5B,YAAY,EAAC,OAAO,EACpB,SAAS,EAAC,MAAM,EAChB,UAAU,EAAE,EAAE,aAAa,EAAE,MAAM,EAAE,GAC1B,CACT,EACN,mBACE,WAAK,KAAK,EAAC,sCAAsC,EAAC,KAAK,EAAE,EAAE,GAAG,EAAE,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,IAC7F,qBACE,IAAI,EAAE,CAAA,MAAA,IAAI,CAAC,KAAK,0CAAE,wCAAwC,IAAG,CAAC,GAAG,kBAAkB,GAAG,gBAAgB,EACtG,SAAS,EAAC,mBAAmB,EAC7B,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,gBAAgB,GAAG,CAAA,MAAA,IAAI,CAAC,KAAK,0CAAE,gBAAgB,CAAC,OAAO,CAAC,CAAC,CAAC,IAAG,GAAG,GAAG,IAAI,EACzF,QAAQ,EAAE,GAAG,CAAA,MAAA,IAAI,CAAC,KAAK,0CAAE,wCAAwC,IAAG,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,MAAA,IAAI,CAAC,KAAK,0CAAE,wCAAwC,CAAC,OAAO,CAC7I,CAAC,CACF,mBAAmB,GACL,EAEjB,qBACE,IAAI,EAAC,OAAO,EACZ,SAAS,EAAC,aAAa,EACvB,KAAK,EAAE,CAAA,MAAA,IAAI,CAAC,KAAK,0CAAE,gBAAgB,IAAG,MAAA,IAAI,CAAC,KAAK,0CAAE,gBAAgB,CAAC,QAAQ,EAAE,GAAG,IAAI,EACpF,QAAQ,EAAC,QAAQ,GACF,EAEjB,qBAAe,IAAI,EAAC,YAAY,EAAC,SAAS,EAAC,cAAc,EAAC,KAAK,EAAE,MAAA,MAAA,IAAI,CAAC,KAAK,0CAAE,YAAY,0CAAE,QAAQ,EAAE,EAAE,QAAQ,EAAC,QAAQ,GAAiB,EAEzI,qBACE,IAAI,EAAC,UAAU,EACf,SAAS,EAAC,WAAW,EACrB,KAAK,EAAE,CAAA,MAAA,IAAI,CAAC,KAAK,0CAAE,QAAQ,CAAC,MAAM,MAAK,CAAC,GAAG,IAAI,GAAG,MAAA,MAAA,IAAI,CAAC,KAAK,0CAAE,QAAQ,0CAAE,GAAG,CAAC,EAAE,IAAIA,KAAM,CAAC,EAAE,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,EACrJ,QAAQ,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAA,MAAA,IAAI,CAAC,KAAK,CAAC,QAAQ,0CAAE,GAAG,CAAC,EAAE,IAAI,EAAE,CAAC,gBAAgB,CAAC,KAAI,EAAE,CAAC,CAAC,aAAa,GACnF,CACb,EACN,WAAK,KAAK,EAAC,sCAAsC,EAAC,KAAK,EAAE,EAAE,GAAG,EAAE,MAAM,EAAE,IACtE,yCAAmC,SAAS,EAAE,IAAI,CAAC,SAAS,KAAK,QAAQ,EAAE,KAAK,EAAC,cAAc,EAAC,WAAW,EAAE,IAAI,CAAC,WAAW,GAAsC,EACnK,wCAAkC,OAAO,EAAE,IAAI,CAAC,OAAO,GAAqC,CACxF,CACE,CACF,CACL,EACP;KACH;;;;;;;AClOH,MAAM,mBAAmB,GAAG,0CAA0C,CAAC;AACvE,+BAAe,mBAAmB;;;;;;;;;;;;;;MCWrB,gBAAgB;IAL7B;;QAMU,aAAQ,GAAW,EAAE,CAAC;QACtB,WAAM,GAAW,EAAE,CAAC;QAKnB,cAAS,GAA+B,IAAI,CAAC;QAC7C,kBAAa,GAAG,IAAI,CAAC;QAIrB,sBAAiB,GAAsB,EAAE,CAAC;QAG3C,UAAK,GAAG,IAAI,KAAK,EAAE,CAAC;QACpB,gBAAW,GAAG,IAAI,WAAW,EAAE,CAAC;QAChC,oBAAe,GAAG,IAAI,eAAe,EAAE,CAAC;QAExC,gBAAW,GAAsB;YACvC,SAAS,EAAEA,KAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC;YACxD,OAAO,EAAEA,KAAM,EAAE,CAAC,MAAM,CAAC,YAAY,CAAC;YACtC,SAAS,EAAE,KAAK;YAChB,MAAM,EAAE,CAAC;YACT,qBAAqB,EAAE,KAAK;YAC5B,kBAAkB,EAAE,KAAK;SAC1B,CAAC;KAoOH;IAlOC,iBAAiB;QACf,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,WAAW,CAAC;QAC5C,IAAI,IAAI,CAAC,MAAM,EAAE;YACf,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACjC,IAAI,CAAC,aAAa,EAAE,CAAC;SACtB;KACF;IAGD,aAAa,CAAC,QAAgB,EAAE,QAAgB;QAC9C,IAAI,QAAQ,KAAK,QAAQ,EAAE;YACzB,OAAO;SACR;QACD,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACjC,IAAI,CAAC,aAAa,EAAE,CAAC;KACtB;IAEO,MAAM,aAAa;;QACzB,IAAI;YACF,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;gBACd,MAAM,IAAI,KAAK,CAAC,uEAAuE,CAAC,CAAC;aAC1F;YACD,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,IAAI,KAAK,UAAU,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE;gBAC3D,MAAM,IAAI,KAAK,CAAC,8BAA8B,CAAC,CAAC;aACjD;YACD,IAAI,IAAI,CAAC,IAAI,KAAK,UAAU,EAAE;gBAC5B,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,kBAAkB,CAAC;oBAC7D,EAAE,EAAE,MAAM,CAAC,MAAA,IAAI,CAAC,UAAU,mCAAI,CAAC,CAAC;oBAChC,KAAK,EAAE,IAAI,CAAC,CAAC;oBACb,QAAQ,EAAE,IAAI,CAAC,QAAQ;oBACvB,UAAU,EAAE,IAAI;iBACjB,CAAC,CAAC;gBACH,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC,SAAS,CAAC,EAAE,CAAC;aACzC;YACD,MAAM,QAAQ,GAAuB,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YACvF,IAAI,IAAI,CAAC,IAAI,KAAK,KAAK,EAAE;gBACvB,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,eAAe,CAAC,2BAA2B,EAAE,CAAC,CAAC;gBACrE,MAAM,CAAC,UAAU,CAAC,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;gBACjD,IAAI,CAAC,iBAAiB,GAAG,CAAC,GAAI,UAAkB,CAAC,CAAC;aACnD;YAED,IAAI,CAAC,WAAW,mCAAQ,IAAI,CAAC,WAAW,KAAE,UAAU,EAAE,MAAA,IAAI,CAAC,iBAAiB,0CAAE,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,GAAE,CAAC;YAC/F,IAAI,CAAC,mBAAmB,qBAAQ,IAAI,CAAC,WAAW,CAAE,CAAC;YAEnD,MAAM,IAAI,CAAC,eAAe,EAAE,CAAC;SAC9B;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;SACpB;gBAAS;YACR,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;SAC5B;KACF;IAEO,MAAM,eAAe,CAAC,eAAe,GAAG,KAAK;QACnD,IAAI;YACF,MAAM,KAAyD,IAAI,CAAC,mBAAmB,EAAjF,EAAE,qBAAqB,EAAE,UAAU,OAA8C,EAAzC,YAAY,gBAApD,uCAAsD,CAA2B,CAAC;YACxF,IAAI,CAAC,SAAS,GAAG,eAAe,GAAG,QAAQ,GAAG,QAAQ,CAAC;YACvD,MAAM,YAAY,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,eAAe,2DAC7D,kBAAkB,EAAE,eAAe,IAChC,YAAY,KACf,KAAK,EAAE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,GAAG,SAAS,KAC5D,YAAY,KACf,UAAU,EAAE,IAAI,CAAC,UAAU,GAAG,IAAI,GAAG,UAAU,IAC/C,CAAC;YACH,MAAM,uBAAuB,GAAG,CAAC,eAAe,IAAI,qBAAqB,CAAC;YAC1E,IAAI,aAAa,GAAwB,EAAE,CAAC;YAC5C,IAAI,uBAAuB,EAAE;gBAC3B,MAAM,iBAAiB,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,eAAe,+BAClE,KAAK,EAAE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,GAAG,SAAS,IAC5D,YAAY,KACf,UAAU,EAAE,IAAI,CAAC,UAAU,GAAG,IAAI,GAAG,UAAU,EAC/C,SAAS,EAAEA,KAAM,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,EAClF,OAAO,EAAEA,KAAM,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,IAC9E,CAAC;gBAEH,aAAa,GAAG,YAAY,CAAC,GAAG,CAAC,OAAO;oBACtC,MAAM,QAAQ,GAAG,iBAAiB,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,KAAK,OAAO,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC;oBAC5G,uCACK,OAAO,KACV,SAAS,EAAE,QAAQ,GAAG,QAAQ,GAAG,IAAI,IACrC;iBACH,CAAC,CAAC;aACJ;iBAAM;gBACL,aAAa,GAAG,YAAY,CAAC,GAAG,CAAC,MAAM,qCAClC,MAAM,KACT,SAAS,EAAE,IAAI,IACf,CAAC,CAAC;aACL;;;;;YAKD,MAAM,yBAAyB,GAAG,CAAC,OAA4B;gBAC7D,IAAI,CAAC,OAAO,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC;oBAAE,OAAO,OAAO,CAAC;;gBAGrD,MAAM,aAAa,GAAG,CAAC,CAAgB;;oBACrC,OAAO,MAAA,CAAC,aAAD,CAAC,uBAAD,CAAC,CAAE,QAAQ,mCAAI,IAAI,CAAC;iBAC5B,CAAC;;gBAGF,MAAM,SAAS,GAAG,CAAC,CAAgB;oBACjC,MAAM,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,CAAC;oBACxD,MAAM,UAAU,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC;oBACpC,OAAO,GAAG,MAAM,KAAK,UAAU,aAAV,UAAU,cAAV,UAAU,GAAI,MAAM,EAAE,CAAC;iBAC7C,CAAC;;gBAGF,MAAM,SAAS,GAAG,CAAC,CAAqB,EAAE,CAAqB;oBAC7D,OAAO,CAAC,CAAC,aAAD,CAAC,cAAD,CAAC,GAAI,CAAC,KAAK,CAAC,aAAD,CAAC,cAAD,CAAC,GAAI,CAAC,CAAC,CAAC;iBAC5B,CAAC;;gBAGF,MAAM,aAAa,GAAG,CAAC,IAAgC,EAAE,QAAoC;oBAC3F,IAAI,CAAC,QAAQ;wBAAE,OAAO,IAAI,CAAC;oBAC3B,IAAI,CAAC,IAAI;wBAAE,yBAAY,QAAQ,EAAG;oBAElC,OAAO;wBACL,MAAM,EAAE,SAAS,CAAC,IAAI,CAAC,MAAM,EAAE,QAAQ,CAAC,MAAM,CAAC;wBAC/C,GAAG,EAAE,SAAS,CAAC,IAAI,CAAC,GAAG,EAAE,QAAQ,CAAC,GAAG,CAAC;wBACtC,OAAO,EAAE,SAAS,CAAC,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,OAAO,CAAC;wBAClD,MAAM,EAAE,IAAI,CAAC,MAAM;wBACnB,WAAW,EAAE,IAAI,CAAC,WAAW;wBAC7B,aAAa,EAAE,IAAI,CAAC,aAAa;wBACjC,QAAQ,EAAE,IAAI,CAAC,QAAQ;qBACxB,CAAC;iBACH,CAAC;;gBAGF,MAAM,OAAO,GAAG,IAAI,GAAG,EAAyB,CAAC;gBAEjD,KAAK,MAAM,MAAM,IAAI,OAAO,EAAE;oBAC5B,MAAM,GAAG,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC;oBAC9B,MAAM,QAAQ,GAAG,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;oBAElC,IAAI,CAAC,QAAQ,EAAE;;wBAEb,OAAO,CAAC,GAAG,CAAC,GAAG,oBAAO,MAAM,EAAG,CAAC;qBACjC;yBAAM;;wBAEL,MAAM,MAAM,mCACP,QAAQ,KACX,MAAM,EAAE,SAAS,CAAC,QAAQ,CAAC,MAAM,EAAE,MAAM,CAAC,MAAM,CAAC,EACjD,GAAG,EAAE,CAAC,EACN,OAAO,EAAE,SAAS,CAAC,QAAQ,CAAC,OAAO,EAAE,MAAM,CAAC,OAAO,CAAC,EACpD,SAAS,EAAE,aAAa,CAAC,QAAQ,CAAC,SAAS,EAAE,MAAM,CAAC,SAAS,CAAC,GAC/D,CAAC;wBACF,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;qBAC1B;iBACF;;gBAGD,MAAM,MAAM,GAAG,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,CAAC;;gBAG5C,MAAM,YAAY,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,eAAK,OAAA,GAAG,IAAI,MAAA,CAAC,CAAC,OAAO,mCAAI,CAAC,CAAC,CAAA,EAAA,EAAE,CAAC,CAAC,CAAC;gBAE1E,IAAI,YAAY,GAAG,CAAC,EAAE;oBACpB,KAAK,MAAM,MAAM,IAAI,MAAM,EAAE;wBAC3B,MAAM,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,OAAO,GAAG,YAAY,IAAI,GAAG,CAAC;;wBAGnD,IAAI,MAAM,CAAC,SAAS,EAAE;4BACpB,MAAM,aAAa,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,mBAAK,OAAA,GAAG,IAAI,MAAA,MAAA,CAAC,CAAC,SAAS,0CAAE,OAAO,mCAAI,CAAC,CAAC,CAAA,EAAA,EAAE,CAAC,CAAC,CAAC;4BACtF,IAAI,aAAa,GAAG,CAAC,EAAE;gCACrB,MAAM,CAAC,SAAS,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,OAAO,GAAG,aAAa,IAAI,GAAG,CAAC;6BACzE;yBACF;qBACF;iBACF;gBAED,OAAO,MAAM,CAAC;aACf,CAAC;YAEF,IAAI,CAAC,SAAS,GAAG,CAAC,GAAG,yBAAyB,CAAC,aAAa,CAAC,CAAC,CAAC;SAChE;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,KAAK,CAAC,6BAA6B,EAAE,KAAK,CAAC,CAAC;SACrD;gBAAS;YACR,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;SACvB;KACF;IACD,MAAM;QACJ,IAAI,IAAI,CAAC,aAAa,EAAE;YACtB,OAAO,4BAAuC,CAAC;SAChD;QACD,QACE,EAAC,IAAI,QACH,mBAAqB,EACrB,yBAAiC,EACjC,eAAS,KAAK,EAAC,wBAAwB,EAAC,KAAK,EAAE,EAAE,GAAG,EAAE,MAAM,EAAE,IAC5D,WAAK,KAAK,EAAC,mDAAmD,IAC5D,UAAI,KAAK,EAAC,cAAc,uBAAsB,EAC9C,iBACE,IAAI,EAAC,IAAI,EACT,SAAS,EAAC,SAAS,EACnB,SAAS,EAAE,IAAI,CAAC,SAAS,KAAK,QAAQ,EACtC,IAAI,EAAE,OAAO,CAAC,OAAO,CAAC,UAAU,EAChC,cAAc,EAAE,OAAM,CAAC;gBACrB,CAAC,CAAC,wBAAwB,EAAE,CAAC;gBAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;aAClC,EACD,QAAQ,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,EAC5B,YAAY,EAAC,OAAO,EACpB,SAAS,EAAC,MAAM,EAChB,UAAU,EAAE,EAAE,aAAa,EAAE,MAAM,EAAE,GAC1B,CACT,EAEN,WAAK,KAAK,EAAC,sCAAsC,EAAC,KAAK,EAAE,EAAE,GAAG,EAAE,MAAM,EAAE,IACtE,mCACE,SAAS,EAAE,IAAI,CAAC,SAAS,KAAK,QAAQ,EACtC,cAAc,EAAE,CAAC;gBACf,CAAC,CAAC,wBAAwB,EAAE,CAAC;gBAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,IAAI,CAAC,mBAAmB,qBAAQ,CAAC,CAAC,MAAM,CAAE,CAAC;gBAC3C,IAAI,CAAC,eAAe,EAAE,CAAC;aACxB,EACD,iBAAiB,EAAE,IAAI,CAAC,iBAAiB,EACzC,WAAW,EAAE,IAAI,CAAC,WAAW,GACA,EAC/B,iCAA2B,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,iBAAiB,EAAE,IAAI,CAAC,iBAAiB,EAAE,KAAK,EAAC,WAAW,EAAC,OAAO,EAAE,IAAI,CAAC,SAAS,GAA8B,CAC1J,CACE,CACL,EACP;KACH;;;;;;;ACzQH,MAAM,mBAAmB,GAAG,0CAA0C,CAAC;AACvE,+BAAe,mBAAmB;;;;;;;;;;;;;;MCerB,gBAAgB;IAL7B;;QAMU,aAAQ,GAAW,EAAE,CAAC;QACtB,WAAM,GAAW,EAAE,CAAC;QAInB,cAAS,GAA+B,IAAI,CAAC;QAC7C,kBAAa,GAAG,IAAI,CAAC;QAIrB,cAAS,GAAoB,IAAI,GAAG,EAAE,CAAC;QAExC,UAAK,GAAG,IAAI,KAAK,EAAE,CAAC;QACpB,gBAAW,GAAG,IAAI,WAAW,EAAE,CAAC;QAChC,oBAAe,GAAG,IAAI,eAAe,EAAE,CAAC;QACxC,mBAAc,GAAG,IAAI,cAAc,EAAE,CAAC;QAEtC,gBAAW,GAAG;YACpB,SAAS,EAAEA,KAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC;YACxD,OAAO,EAAEA,KAAM,EAAE,CAAC,MAAM,CAAC,YAAY,CAAC;YACtC,SAAS,EAAE,KAAK;YAChB,MAAM,EAAE,CAAC;YACT,qBAAqB,EAAE,KAAK;SAC7B,CAAC;KA6KH;IA3KC,iBAAiB;QACf,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC;QACrC,IAAI,IAAI,CAAC,MAAM,EAAE;YACf,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACjC,IAAI,CAAC,aAAa,EAAE,CAAC;SACtB;KACF;IAED,aAAa,CAAC,QAAgB,EAAE,QAAgB;QAC9C,IAAI,QAAQ,KAAK,QAAQ,EAAE;YACzB,OAAO;SACR;QACD,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACjC,IAAI,CAAC,aAAa,EAAE,CAAC;KACtB;IACO,MAAM,aAAa;QACzB,IAAI;YACF,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;YACjC,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE;gBAC/B,MAAM,IAAI,KAAK,CAAC,qCAAqC,CAAC,CAAC;aACxD;;YAED,IAAI,CAAC,UAAU,EAAE;gBACf,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;gBACxB,MAAM,YAAY,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC;oBAC7D,EAAE,EAAE,CAAC;oBACL,KAAK,EAAE,IAAI,CAAC,CAAC;oBACb,QAAQ,EAAE,IAAI,CAAC,QAAQ;oBACvB,UAAU,EAAE,IAAI;oBAChB,uBAAuB,EAAE,IAAI;iBAC9B,CAAC,CAAC;;gBAEH,UAAU,GAAG,YAAY,CAAC,SAAS,CAAC,EAAE,CAAC;aACxC;YACD,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;YAC9B,MAAM,QAAQ,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC;YAC1I,IAAI,IAAI,CAAC,UAAU,EAAE;gBACnB,QAAQ,CAAC,IAAI,CACX,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC;oBAClC,EAAE,EAAE,IAAI,CAAC,UAAU;oBACnB,QAAQ,EAAE,IAAI,CAAC,QAAQ;oBACvB,UAAU,EAAE,IAAI;oBAChB,uBAAuB,EAAE,IAAI;iBAC9B,CAAC,CACH,CAAC;aACH;YAED,MAAM,CAAC,SAAS,CAAC,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAChD,MAAM,eAAe,GAAG,IAAI,GAAG,EAAE,CAAC;YACjC,SAAwB,CAAC,GAAG,CAAC,OAAO;gBACnC,eAAe,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,EAAE;oBAC9B,IAAI,EAAE,OAAO,CAAC,IAAI;oBAClB,IAAI,EAAE,OAAO,CAAC,IAAI;iBACnB,CAAC,CAAC;aACJ,CAAC,CAAC;YACH,IAAI,CAAC,SAAS,GAAG,eAAe,CAAC;SAClC;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;SACpB;gBAAS;YACR,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;SAC5B;KACF;IAEO,MAAM,eAAe,CAAC,eAAe,GAAG,KAAK;QACnD,MAAM,eAAe,GAAG,CAAC,IAAI;YAC3B,OAAO;gBACL,OAAO,EAAE,IAAI,CAAC,OAAO;gBACrB,UAAU,EAAE,IAAI,CAAC,UAAU;gBAC3B,MAAM,EAAE,IAAI,CAAC,MAAM;gBACnB,UAAU,EAAE,IAAI,CAAC,GAAG;gBACpB,OAAO,EAAE,IAAI,CAAC,OAAO;gBACrB,gBAAgB,EAAE,IAAI,CAAC,YAAY;aACpC,CAAC;SACH,CAAC;QACF,IAAI;YACF,MAAM,KAA6C,IAAI,CAAC,YAAY,EAA9D,EAAE,qBAAqB,OAAuC,EAAlC,YAAY,cAAxC,yBAA0C,CAAoB,CAAC;YACrE,IAAI,CAAC,SAAS,GAAG,eAAe,GAAG,QAAQ,GAAG,QAAQ,CAAC;YAEvD,MAAM,YAAY,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,eAAe,iBAC7D,KAAK,EAAE,IAAI,CAAC,WAAW,EACvB,kBAAkB,EAAE,eAAe,IAChC,YAAY,EACf,CAAC;YAEH,MAAM,uBAAuB,GAAG,CAAC,eAAe,IAAI,qBAAqB,CAAC;YAE1E,IAAI,aAAa,GAAkB,EAAE,CAAC;YAEtC,IAAI,uBAAuB,EAAE;gBAC3B,MAAM,iBAAiB,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,eAAe,+BAClE,KAAK,EAAE,IAAI,CAAC,WAAW,EACvB,kBAAkB,EAAE,KAAK,IACtB,YAAY,KACf,SAAS,EAAEA,KAAM,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,EAClF,OAAO,EAAEA,KAAM,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,IAC9E,CAAC;gBAEH,aAAa,GAAG,YAAY,CAAC,GAAG,CAAC,OAAO;oBACtC,MAAM,QAAQ,GAAG,iBAAiB,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,KAAK,OAAO,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,CAAC;oBAC9G,qCACE,EAAE,EAAE,EAAE,EAAE,IACL,eAAe,CAAC,OAAO,CAAC,KAC3B,SAAS,EAAE,QAAQ,GAAG,eAAe,CAAC,QAAQ,CAAC,GAAG,IAAI,IACtD;iBACH,CAAC,CAAC;aACJ;iBAAM;gBACL,aAAa,GAAG,YAAY,CAAC,GAAG,CAAC,MAAM,mCACrC,EAAE,EAAE,EAAE,EAAE,IACL,eAAe,CAAC,MAAM,CAAC,KAC1B,SAAS,EAAE,IAAI,IACf,CAAC,CAAC;aACL;;;;;;YAOD,IAAI,CAAC,SAAS,GAAG,CAAC,GAAG,aAAa,CAAC,CAAC;SACrC;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,KAAK,CAAC,6BAA6B,EAAE,KAAK,CAAC,CAAC;SACrD;gBAAS;YACR,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;SACvB;KACF;IACD,MAAM;QACJ,IAAI,IAAI,CAAC,aAAa,EAAE;YACtB,OAAO,4BAAuC,CAAC;SAChD;QACD,QACE,EAAC,IAAI,QACH,mBAAqB,EACrB,yBAAiC,EACjC,eAAS,KAAK,EAAC,wBAAwB,EAAC,KAAK,EAAE,EAAE,GAAG,EAAE,MAAM,EAAE,IAC5D,WAAK,KAAK,EAAC,mDAAmD,IAC5D,UAAI,KAAK,EAAC,cAAc,uBAAsB,EAC9C,iBACE,IAAI,EAAC,IAAI,EACT,SAAS,EAAC,SAAS,EACnB,SAAS,EAAE,IAAI,CAAC,SAAS,KAAK,QAAQ,EACtC,IAAI,EAAE,OAAO,CAAC,OAAO,CAAC,UAAU,EAChC,cAAc,EAAE,OAAM,CAAC;gBACrB,CAAC,CAAC,wBAAwB,EAAE,CAAC;gBAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;aAClC,EACD,QAAQ,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,EAC5B,YAAY,EAAC,OAAO,EACpB,SAAS,EAAC,MAAM,EAChB,UAAU,EAAE,EAAE,aAAa,EAAE,MAAM,EAAE,GAC1B,CACT,EACN,mCAA6B,YAAY,EAAE,IAAI,CAAC,SAAS,GAAgC,EACzF,WAAK,KAAK,EAAC,sCAAsC,EAAC,KAAK,EAAE,EAAE,GAAG,EAAE,MAAM,EAAE,IACtE,wBACE,SAAS,EAAE,IAAI,CAAC,SAAS,KAAK,QAAQ,EACtC,cAAc,EAAE,CAAC;gBACf,CAAC,CAAC,wBAAwB,EAAE,CAAC;gBAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,MAAM,CAAC;gBAC7B,IAAI,CAAC,eAAe,EAAE,CAAC;aACxB,EACD,KAAK,EAAC,cAAc,EACpB,WAAW,EAAE,IAAI,CAAC,WAAW,GACX,EACpB,sBAAgB,eAAe,EAAE,IAAI,CAAC,SAAS,EAAE,KAAK,EAAC,WAAW,EAAC,OAAO,EAAE,IAAI,CAAC,SAAS,GAAmB,CACzG,CACE,CACL,EACP;KACH;;;;;;;ACpNH,MAAM,mBAAmB,GAAG,qDAAqD,CAAC;AAClF,+BAAe,mBAAmB;;MCerB,gBAAgB;IAL7B;;QAMU,aAAQ,GAAW,EAAE,CAAC;QAKtB,iBAAY,GAAY,IAAI,CAAC;QAK5B,cAAS,GAAG,IAAI,CAAC;QACjB,UAAK,GAAW,EAAE,CAAC;QAEnB,sBAAiB,GAAkB,EAAE,CAAC;QAEvC,UAAK,GAAG,IAAI,KAAK,EAAE,CAAC;QACpB,gBAAW,GAAG,IAAI,WAAW,EAAE,CAAC;QAChC,gBAAW,GAAG,IAAI,WAAW,EAAE,CAAC;QAChC,mBAAc,GAAG,IAAI,cAAc,EAAE,CAAC;QAEtC,cAAS,GAAiC,IAAI,GAAG,EAAE,CAAC;QAGpD,iBAAY,GAAG,GAAG,CAAC;KAoM5B;IAlMC,iBAAiB;QACf,IAAI,IAAI,CAAC,OAAO,EAAE;YAChB,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SACrC;QACD,IAAI,IAAI,CAAC,MAAM,EAAE;YACf,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACjC,IAAI,CAAC,aAAa,EAAE,CAAC;SACtB;KACF;IAGD,aAAa,CAAC,QAAgB,EAAE,QAAgB;QAC9C,IAAI,QAAQ,KAAK,QAAQ,EAAE;YACzB,OAAO;SACR;QACD,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACjC,IAAI,CAAC,aAAa,EAAE,CAAC;KACtB;IAGD,MAAM,eAAe,CAAC,CAAc;QAClC,CAAC,CAAC,wBAAwB,EAAE,CAAC;QAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,MAAM,IAAI,CAAC,UAAU,EAAE,CAAC;KACzB;IAEO,MAAM,aAAa;QACzB,IAAI;YACF,IAAI,IAAI,CAAC,OAAO,EAAE;gBAChB,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aACrC;YACD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;YACjC,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE;gBAC/B,MAAM,IAAI,KAAK,CAAC,qCAAqC,CAAC,CAAC;aACxD;;YAED,IAAI,CAAC,UAAU,EAAE;gBACf,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;gBACxB,MAAM,YAAY,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC;oBAC7D,EAAE,EAAE,CAAC;oBACL,KAAK,EAAE,IAAI,CAAC,CAAC;oBACb,QAAQ,EAAE,IAAI,CAAC,QAAQ;oBACvB,UAAU,EAAE,IAAI;oBAChB,uBAAuB,EAAE,IAAI;iBAC9B,CAAC,CAAC;;gBAEH,UAAU,GAAG,YAAY,CAAC,SAAS,CAAC,EAAE,CAAC;aACxC;YACD,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;YAC9B,MAAM,QAAQ,GAAG,CAAC,IAAI,CAAC,cAAc,EAAE,EAAE,IAAI,CAAC,UAAU,EAAE,EAAE,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;YAC1H,IAAI,IAAI,CAAC,UAAU,EAAE;gBACnB,QAAQ,CAAC,IAAI,CACX,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC;oBAClC,EAAE,EAAE,IAAI,CAAC,UAAU;oBACnB,QAAQ,EAAE,IAAI,CAAC,QAAQ;oBACvB,UAAU,EAAE,IAAI;oBAChB,uBAAuB,EAAE,IAAI;iBAC9B,CAAC,CACH,CAAC;aACH;YAED,MAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAC5B,IAAI,CAAC,MAAM,GAAGE,MAAE,CAAC,kCAAkC,CAAC,CAAC;YACrD,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE,OAAM,GAAG;gBAC7B,MAAM,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC;aACrC,CAAC,CAAC;SACJ;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;SACpB;gBAAS;YACR,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;SACxB;KACF;IAEO,MAAM,mBAAmB,CAAC,GAAW;QAC3C,MAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACpC,IAAI,CAAC,WAAW,EAAE;YAChB,OAAO;SACR;QAED,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,OAAO,EAAE,GAAuD,WAAW,CAAC;QAEjG,IAAI,GAAG,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,EAAE;YAClD,OAAO;SACR;QAED,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QACjC,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;;;;QAIzB,MAAM,cAAc,GAA8C;YAChE,cAAc,EAAE,IAAI,CAAC,4BAA4B;SAClD,CAAC;QACF,MAAM,OAAO,GAAG,cAAc,CAAC,MAAM,CAAC,CAAC;QACvC,IAAI,OAAO,EAAE;YACX,MAAM,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;SAClC;aAAM;YACL,OAAO,CAAC,IAAI,CAAC,qBAAqB,MAAM,EAAE,CAAC,CAAC;SAC7C;KACF;IAEM,4BAA4B,CAAC,MAA+B;QACjE,MAAM,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC;QAC9B,MAAM,GAAG,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,MAAM,CAAC,EAAE,CAAC,CAAC;QACrD,IAAI,GAAG,KAAK,CAAC,CAAC,EAAE;YACd,OAAO,CAAC,IAAI,CAAC,QAAQ,MAAM,CAAC,EAAE,YAAY,CAAC,CAAC;YAC5C,OAAO;SACR;QACD,KAAK,CAAC,GAAG,CAAC,mCACL,KAAK,CAAC,GAAG,CAAC,KACb,iBAAiB,EAAE,IAAI,GACxB,CAAC;QACF,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;KACpB;IAEO,MAAM,UAAU;QACtB,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,uBAAuB,CAAC,EAAE,WAAW,EAAE,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;QAC/F,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,EAAQ,EAAE,EAAQ;YAC9C,MAAM,QAAQ,GAAG,CAAC,CAAO;gBACvB,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;gBAC5B,IAAI,CAAC,KAAK,IAAI,CAAC,YAAY;oBAAE,OAAO,CAAC,CAAC;gBACtC,IAAI,CAAC,KAAK,IAAI;oBAAE,OAAO,CAAC,CAAC;gBACzB,OAAO,CAAC,CAAC;aACV,CAAC;;YAEF,MAAM,EAAE,GAAG,QAAQ,CAAC,EAAE,CAAC,EACrB,EAAE,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAC;YACpB,IAAI,EAAE,KAAK,EAAE,EAAE;gBACb,OAAO,EAAE,GAAG,EAAE,CAAC;aAChB;;;;;;;;;;YAWD,OAAO,EAAE,CAAC,QAAQ,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;SAC/C,CAAC,CAAC;KACJ;IACO,MAAM,cAAc;;QAC1B,MAAM,GAAG,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,0BAA0B,CAAC,YAAY,CAAC,EAAE,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAC5H,MAAM,YAAY,GAAG,MAAA,MAAA,GAAG,CAAC,CAAC,CAAC,0CAAE,SAAS,0CAAE,kBAAkB,CAAC;QAC3D,KAAK,MAAM,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,EAAE;YACtB,MAAM,KAAK,GAAG,CAAC,CAAC,cAAc,MAAA,MAAA,IAAI,CAAC,QAAQ,0CAAE,WAAW,EAAE,mCAAI,IAAI,EAAE,CAAC,CAAC;YACtE,IAAI,YAAY,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,SAAS,CAAC,EAAE;gBAClD,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,SAAS,EAAE,KAAK,EAAE,CAAC,CAAC;aAC3D;YACD,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAE,KAAK,CAAC,CAAC;SACnD;KACF;IACD,oBAAoB;QAClB,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC;KAC1B;IACD,MAAM;;QACJ,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,QACE,EAAC,IAAI,QACH,mBAAqB,EACrB,yBAAiC,EACjC,4BAAuC,CAClC,EACP;SACH;QACD,QACE,EAAC,IAAI,QACH,mBAAqB,EACrB,sBAAgB,sBAAsB,EAAE,CAAC,kBAAkB,EAAE,sBAAsB,CAAC,GAAmB,EACvG,eAAS,KAAK,EAAC,wBAAwB,EAAC,KAAK,EAAE,EAAE,GAAG,EAAE,MAAM,EAAE,IAC5D,WAAK,KAAK,EAAC,yDAAyD,IAClE,UAAI,KAAK,EAAC,cAAc,IAAE,OAAO,CAAC,OAAO,CAAC,iBAAiB,CAAM,CAC7D,EAEN,WAAK,KAAK,EAAC,EAAE,EAAC,KAAK,EAAE,EAAE,GAAG,EAAE,MAAM,EAAE,IAClC,gCACE,WAAW,EAAE,IAAI,CAAC,WAAW,EAC7B,gBAAgB,EAAE,IAAI,CAAC,gBAAgB,EACvC,iBAAiB,EAAE,IAAI,CAAC,iBAAiB,EACzC,YAAY,EAAE,IAAI,CAAC,YAAY,EAC/B,mBAAmB,EAAE,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC,QAAQ,CAAC,MAAA,IAAI,CAAC,YAAY,0CAAE,QAAQ,EAAE,CAAC,EACtF,SAAS,EAAE,IAAI,CAAC,SAAS,EACzB,KAAK,EAAC,MAAM,EACZ,YAAY,EAAE,CAAA,MAAA,IAAI,CAAC,YAAY,0CAAE,QAAQ,EAAE,MAAK,IAAI,CAAC,YAAY,EACjE,KAAK,EAAE,IAAI,CAAC,KAAK,GACS,CACxB,CACE,CACL,EACP;KACH;;;;;;;;;","names":["moment","updateTasksStore","io"],"sources":["src/components/ir-booking-email-logs/ir-booking-email-logs.css?tag=ir-booking-email-logs&encapsulation=scoped","src/components/ir-booking-email-logs/ir-booking-email-logs.tsx","src/utils/browserHistory.ts","src/components/ir-booking-listing/ir-booking-listing.css?tag=ir-booking-listing&encapsulation=scoped","src/components/ir-booking-listing/ir-booking-listing.tsx","src/components/ir-daily-revenue/ir-daily-revenue.css?tag=ir-daily-revenue&encapsulation=scoped","src/components/ir-daily-revenue/ir-daily-revenue.tsx","src/components/ir-housekeeping/ir-hk-tasks/ir-hk-tasks.css?tag=ir-hk-tasks&encapsulation=scoped","src/components/ir-housekeeping/ir-hk-tasks/ir-hk-tasks.tsx","src/components/ir-housekeeping/ir-housekeeping.css?tag=ir-housekeeping&encapsulation=scoped","src/components/ir-housekeeping/ir-housekeeping.tsx","src/components/ir-monthly-bookings-report/ir-monthly-bookings-report.css?tag=ir-monthly-bookings-report&encapsulation=scoped","src/components/ir-monthly-bookings-report/ir-monthly-bookings-report.tsx","src/components/ir-sales-by-channel/ir-sales-by-channel.css?tag=ir-sales-by-channel&encapsulation=scoped","src/components/ir-sales-by-channel/ir-sales-by-channel.tsx","src/components/ir-sales-by-country/ir-sales-by-country.css?tag=ir-sales-by-country&encapsulation=scoped","src/components/ir-sales-by-country/ir-sales-by-country.tsx","src/components/ir-user-management/ir-user-management.css?tag=ir-user-management&encapsulation=scoped","src/components/ir-user-management/ir-user-management.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n","import Token from '@/models/Token';\nimport { Component, Host, Prop, State, Watch, h } from '@stencil/core';\nimport axios from 'axios';\n\n@Component({\n  tag: 'ir-booking-email-logs',\n  styleUrl: 'ir-booking-email-logs.css',\n  scoped: true,\n})\nexport class IrBookingEmailLogs {\n  @Prop() ticket: string;\n\n  @State() data: any[];\n  @State() bookingNumber: string;\n\n  private token = new Token();\n\n  componentWillLoad() {\n    if (this.ticket) {\n      this.token.setToken(this.ticket);\n    }\n  }\n\n  @Watch('ticket')\n  handleTicketChange() {\n    if (this.ticket) {\n      this.token.setToken(this.ticket);\n    }\n  }\n\n  render() {\n    return (\n      <Host class=\"p-1\">\n        <ir-interceptor handledEndpoints={['/Get_Email_log_By_BOOK_NBR']}></ir-interceptor>\n        <ir-toast></ir-toast>\n        <div class=\"d-flex align-items-center mb-1\" style={{ gap: '0.5rem' }}>\n          <ir-input-text\n            class=\"m-0\"\n            inputContainerStyle={{ margin: '0' }}\n            value={this.bookingNumber}\n            onTextChange={e => (this.bookingNumber = e.detail)}\n            placeholder=\"booking number\"\n          ></ir-input-text>\n          <ir-button\n            size=\"sm\"\n            text=\"search\"\n            onClickHandler={async () => {\n              const { data } = await axios.post('/Get_Email_log_By_BOOK_NBR', {\n                BOOK_NBR: this.bookingNumber,\n              });\n              if (data.ExceptionMsg) {\n                return;\n              }\n              this.data = data.My_Result;\n            }}\n          ></ir-button>\n        </div>\n        <p>{JSON.stringify(this.data, null, 2)}</p>\n      </Host>\n    );\n  }\n}\n","// src/utils/browserHistory.ts\n\n/**\n * A small utility for reading and writing browser history\n * and manipulating URL search params in a type-safe way.\n */\n\ntype Parser<T> = (value: string | null) => T;\n\n// Common parsers/serializers\nexport const ParamTypes = {\n  string: {\n    parse: (v: string | null): string => v ?? '',\n    serialize: (v: string): string => v,\n  },\n  number: {\n    parse: (v: string | null): number => {\n      if (v == null || v === '') return NaN;\n      const n = Number(v);\n      return isNaN(n) ? NaN : n;\n    },\n    serialize: (v: number): string => String(v),\n  },\n  boolean: {\n    parse: (v: string | null): boolean => v === 'true',\n    serialize: (v: boolean): string => (v ? 'true' : 'false'),\n  },\n} as const;\n\n/**\n * Read a single searchparam, parse it, and return a typed value.\n * Falls back to defaultValue if missing or parse fails.\n */\nexport function getParam<T>(key: string, { parse }: { parse: Parser<T> }, defaultValue: T): T {\n  const params = new URLSearchParams(window.location.search);\n  const raw = params.get(key);\n  try {\n    if (raw == null) return defaultValue;\n    return parse(raw);\n  } catch {\n    return defaultValue;\n  }\n}\n\n/** Helpers for the three builtin types */\nexport function getStringParam(key: string, defaultValue = ''): string {\n  return getParam(key, ParamTypes.string, defaultValue);\n}\n\nexport function getNumberParam(key: string, defaultValue = NaN): number {\n  return getParam(key, ParamTypes.number, defaultValue);\n}\n\nexport function getBooleanParam(key: string, defaultValue = false): boolean {\n  return getParam(key, ParamTypes.boolean, defaultValue);\n}\n\n/**\n * Read all current search params into a Record<string, string>\n */\nexport function getAllParams(): Record<string, string> {\n  const params = new URLSearchParams(window.location.search);\n  const out: Record<string, string> = {};\n  for (const [key, value] of params.entries()) {\n    out[key] = value;\n  }\n  return out;\n}\n\ninterface SetParamsOptions {\n  /** if true, uses replaceState instead of pushState */\n  replace?: boolean;\n}\n\n/**\n * Update one or more search params.\n * Pass null to delete a param.\n * By default uses history.pushState; set replace: true to call replaceState.\n */\nexport function setParams(updates: Record<string, string | number | boolean | null>, options: SetParamsOptions = {}): void {\n  const params = new URLSearchParams(window.location.search);\n\n  for (const [key, value] of Object.entries(updates)) {\n    if (!value) {\n      params.delete(key);\n    } else {\n      params.set(key, String(value));\n    }\n  }\n\n  const newSearch = params.toString();\n  const newUrl = window.location.pathname + (newSearch ? `?${newSearch}` : '') + window.location.hash;\n\n  if (options.replace) {\n    window.history.replaceState(window.history.state, '', newUrl);\n  } else {\n    window.history.pushState(window.history.state, '', newUrl);\n  }\n}\n\n/**\n * Push a new history entry.\n * `path` may include search or hash.\n * `state` is the history state object.\n */\nexport function pushHistory(path: string, state: any = {}): void {\n  window.history.pushState(state, '', path);\n}\n\n/**\n * Replace the current history entry.\n * `path` may include search or hash.\n * `state` is the history state object.\n */\nexport function replaceHistory(path: string, state: any = {}): void {\n  window.history.replaceState(state, '', path);\n}\n",":host {\n  display: block;\n  height: 100%;\n}\n.logo {\n  height: 2rem;\n  width: 2rem;\n}\n.card {\n  overflow-x: auto;\n}\n.secondary-p {\n  font-size: 12px !important;\n}\n.room-service {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.5rem;\n  width: 100%;\n  padding: 0.25rem 0;\n}\n.room-name-container {\n  background: #acecff;\n  padding: 0.1rem 0.3rem;\n  border-radius: 5px;\n  /* cursor: pointer; */\n\n  /* max-width: max-content; */\n}\n.h-screen {\n  height: 100%;\n}\n.price-span {\n  margin: 0;\n  margin-right: 5px;\n}\n.main-container {\n  height: 100%;\n  overflow-y: auto;\n}\n.badge.ct_ir_badge {\n  padding: 0.2rem 0.3rem;\n}\n.yellow_dot {\n  height: 0.5rem;\n  width: 0.5rem;\n  height: 0.5rem;\n  width: 0.8rem;\n  border-radius: 50%;\n  background: rgb(244, 213, 82);\n  margin-left: 0.5rem;\n  display: inline-flex;\n  padding: 0;\n  margin: 0;\n}\n.booking_name {\n  display: flex;\n  align-items: center;\n  gap: 0.4rem;\n}\n.bg-ir-red {\n  background: #ff4961;\n  padding: 0.2rem 0.3rem;\n}\n.due-btn {\n  border: 1px solid #ff4961;\n  color: #ff4961;\n  cursor: pointer;\n  padding: 1px 0.25rem !important;\n  font-size: 12px !important;\n}\n.due-btn:hover {\n  background: #ff4961;\n  color: white;\n}\n.booking_number {\n  all: unset;\n  cursor: pointer;\n}\n.booking_number:hover {\n  color: #1e9ff2;\n}\n.in-out {\n  width: 150px !important;\n}\n.booking_guest_name {\n  width: fit-content;\n  padding: 0 !important;\n  margin: 0;\n}\n.booking_guest_name .button-text {\n  padding: 0 !important;\n}\n.buttons-container {\n  gap: 10px;\n}\ntd ul {\n  width: max-content !important;\n}\ntd {\n  width: max-content !important ;\n}\n.date-p {\n  width: max-content !important;\n  min-width: 100%;\n  text-align: center !important;\n}\n.booking-label-gap {\n  gap: 5px;\n}\n@media (min-width: 1024px) {\n  .yellow_dot {\n    height: 0.5rem;\n    width: 0.5rem;\n  }\n}\n","import { Booking, IUnit, Occupancy } from '@/models/booking.dto';\nimport { BookingListingService } from '@/services/booking_listing.service';\nimport { RoomService } from '@/services/room.service';\nimport booking_listing, { updateUserSelection, onBookingListingChange, updateUserSelections, ExposedBookingsParams } from '@/stores/booking_listing.store';\nimport locales from '@/stores/locales.store';\nimport { formatAmount, isPrivilegedUser } from '@/utils/utils';\nimport { Component, Host, Prop, State, Watch, h, Element, Listen, Fragment } from '@stencil/core';\nimport moment from 'moment';\nimport { _formatTime } from '../ir-booking-details/functions';\nimport { getPrivateNote } from '@/utils/booking';\nimport Token from '@/models/Token';\nimport { isSingleUnit } from '@/stores/calendar-data';\nimport { getAllParams } from '@/utils/browserHistory';\nimport { BookingService } from '@/services/booking.service';\nimport { PaymentEntries } from '../ir-booking-details/types';\nimport { AllowedProperties, PropertyService } from '@/services/property.service';\n\n@Component({\n  tag: 'ir-booking-listing',\n  styleUrl: 'ir-booking-listing.css',\n  scoped: true,\n})\nexport class IrBookingListing {\n  @Element() el: HTMLElement;\n\n  @Prop() language: string = '';\n  @Prop() ticket: string = '';\n  @Prop() propertyid: number;\n  @Prop() rowCount: number = 10;\n  @Prop() p: string;\n  @Prop() baseUrl: string;\n  @Prop() userType: number;\n\n  @State() isLoading = false;\n  @State() currentPage = 1;\n  @State() totalPages = 1;\n  @State() oldStartValue = 0;\n  @State() editBookingItem: { booking: Booking; cause: 'edit' | 'payment' | 'delete' | 'guest' } | null = null;\n  @State() showCost = false;\n  @State() paymentEntries: PaymentEntries;\n\n  private bookingListingService = new BookingListingService();\n  private bookingService = new BookingService();\n  private roomService = new RoomService();\n  private propertyService = new PropertyService();\n  private token = new Token();\n\n  private listingModal: HTMLIrListingModalElement;\n  private listingModalTimeout: NodeJS.Timeout;\n  private statusColors = {\n    '001': 'badge-warning',\n    '002': 'badge-success',\n    '003': 'badge-danger',\n    '004': 'badge-danger',\n  };\n  private allowedProperties: number[];\n  private havePrivilege: boolean;\n\n  componentWillLoad() {\n    if (this.baseUrl) {\n      this.token.setBaseUrl(this.baseUrl);\n    }\n    updateUserSelection('end_row', this.rowCount);\n    booking_listing.rowCount = this.rowCount;\n    if (this.ticket !== '') {\n      booking_listing.token = this.ticket;\n      this.token.setToken(this.ticket);\n      this.initializeApp();\n    }\n    onBookingListingChange('userSelection', async newValue => {\n      const newTotal = newValue.total_count;\n      this.totalPages = Math.ceil(newTotal / this.rowCount);\n    });\n    onBookingListingChange('bookings', async newValue => {\n      this.showCost = newValue.some(booking => booking.financial.gross_cost !== null && booking.financial.gross_cost > 0);\n    });\n  }\n  @Watch('ticket')\n  ticketChanged(newValue: string, oldValue: string) {\n    if (newValue === oldValue) {\n      return;\n    }\n    this.token.setToken(this.ticket);\n    booking_listing.token = this.ticket;\n    this.initializeApp();\n  }\n\n  private async initializeApp() {\n    try {\n      this.isLoading = true;\n      this.havePrivilege = isPrivilegedUser(this.userType);\n\n      let propertyId = this.propertyid;\n      if (!this.havePrivilege) {\n        if (!this.propertyid && !this.p) {\n          throw new Error('Property ID or username is required');\n        }\n\n        if (!propertyId) {\n          const propertyData = await this.roomService.getExposedProperty({\n            id: 0,\n            aname: this.p,\n            language: this.language,\n            is_backend: true,\n          });\n          propertyId = propertyData.My_Result.id;\n        }\n      }\n\n      const parallelRequests: Promise<unknown>[] = [\n        this.bookingService.getSetupEntriesByTableNameMulti(['_PAY_TYPE', '_PAY_TYPE_GROUP', '_PAY_METHOD']),\n        this.bookingListingService.getExposedBookingsCriteria(this.havePrivilege ? null : propertyId),\n        this.roomService.fetchLanguage(this.language, ['_BOOKING_LIST_FRONT']),\n      ];\n\n      // let propertyDataIndex: number | null = null;\n      let allowedPropertiesIndex: number | null = null;\n\n      if (this.propertyid && !this.havePrivilege) {\n        // propertyDataIndex = parallelRequests.length;\n        parallelRequests.push(\n          this.roomService.getExposedProperty({\n            id: this.propertyid,\n            language: this.language,\n            is_backend: true,\n          }),\n        );\n      }\n\n      if (this.havePrivilege) {\n        allowedPropertiesIndex = parallelRequests.length;\n        parallelRequests.push(this.propertyService.getExposedAllowedProperties());\n      }\n\n      const results = await Promise.all(parallelRequests);\n\n      const [setupEntries] = results;\n      const { pay_type, pay_type_group, pay_method } = this.bookingService.groupEntryTablesResult(setupEntries as any);\n\n      this.paymentEntries = {\n        groups: pay_type_group,\n        methods: pay_method,\n        types: pay_type,\n      };\n\n      this.allowedProperties = allowedPropertiesIndex !== null ? (results[allowedPropertiesIndex] as AllowedProperties)?.map(p => p.id) : null;\n\n      updateUserSelection('property_id', propertyId);\n\n      updateUserSelections({\n        property_ids: this.allowedProperties,\n        userTypeCode: this.userType,\n      });\n\n      await this.bookingListingService.getExposedBookings({\n        ...booking_listing.userSelection,\n        is_to_export: false,\n      });\n    } catch (error) {\n      console.error('Error initializing app:', error);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  handleSideBarToggle(e: CustomEvent<boolean>) {\n    if (e.detail) {\n      this.editBookingItem = null;\n    }\n  }\n  geSearchFiltersFromParams() {\n    //e=10&status=002&from=2025-04-15&to=2025-04-22&filter=2&c=Alitalia+Cabin+Crew\n    const params = getAllParams();\n    if (params) {\n      console.log('update params');\n      let obj: Partial<ExposedBookingsParams> = {};\n      if (params.e) {\n        obj['end_row'] = Number(params.e);\n      }\n      if (params.s) {\n        obj['start_row'] = Number(params.s);\n      }\n      if (params.status) {\n        obj['booking_status'] = params.status;\n      }\n      if (params.filter) {\n        obj['filter_type'] = params.filter;\n      }\n      if (params.from) {\n        obj['from'] = params.from;\n      }\n      if (params.to) {\n        obj['to'] = params.to;\n      }\n      updateUserSelections(obj);\n    }\n    console.log('params=>', params);\n  }\n  getPaginationBounds() {\n    const totalCount = booking_listing.userSelection.total_count;\n    const startItem = (this.currentPage - 1) * this.rowCount;\n    let endItem = this.currentPage * this.rowCount;\n    endItem = endItem > totalCount ? totalCount : endItem;\n    return { startItem, endItem, totalCount };\n  }\n\n  openModal() {\n    this.listingModalTimeout = setTimeout(() => {\n      this.listingModal = this.el.querySelector('ir-listing-modal');\n      this.listingModal.editBooking = this.editBookingItem;\n      this.listingModal.openModal();\n    }, 100);\n  }\n  disconnectedCallback() {\n    clearTimeout(this.listingModalTimeout);\n  }\n\n  @Listen('resetData')\n  async handleResetData(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    await this.bookingListingService.getExposedBookings({ ...booking_listing.userSelection, is_to_export: false });\n  }\n\n  @Listen('resetBookingData')\n  async handleResetStoreData(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    await this.bookingListingService.getExposedBookings({ ...booking_listing.userSelection, is_to_export: false });\n  }\n  @Listen('bookingChanged')\n  handleBookingChanged(e: CustomEvent<Booking>) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    booking_listing.bookings = [\n      ...booking_listing.bookings.map(b => {\n        if (b.booking_nbr === e.detail.booking_nbr) {\n          return e.detail;\n        }\n        return b;\n      }),\n    ];\n  }\n\n  renderItemRange() {\n    const { endItem, startItem, totalCount } = this.getPaginationBounds();\n    return `${locales.entries.Lcz_View} ${startItem + 1} - ${endItem} ${locales.entries.Lcz_Of} ${totalCount}`;\n  }\n\n  async updateData() {\n    const { endItem, startItem } = this.getPaginationBounds();\n    // setParams({\n    //   s: startItem,\n    //   e: endItem,\n    // });\n    await this.bookingListingService.getExposedBookings({\n      ...booking_listing.userSelection,\n      is_to_export: false,\n      start_row: startItem,\n      end_row: endItem,\n    });\n  }\n  private calculateTotalPersons(booking: Booking) {\n    const sumOfOccupancy = ({ adult_nbr, children_nbr, infant_nbr }: Occupancy) => {\n      return (adult_nbr ?? 0) + (children_nbr ?? 0) + (infant_nbr ?? 0);\n    };\n    return booking.rooms.reduce((prev, cur) => {\n      return sumOfOccupancy(cur.occupancy) + prev;\n    }, 0);\n  }\n  render() {\n    if (this.isLoading || this.ticket === '') {\n      return <ir-loading-screen></ir-loading-screen>;\n    }\n    return (\n      <Host>\n        <ir-interceptor></ir-interceptor>\n        <ir-toast></ir-toast>\n        <div class=\"p-1 main-container\">\n          <ir-listing-header propertyId={this.propertyid} p={this.p} language={this.language}></ir-listing-header>\n          <section>\n            <div class=\"card p-1 flex-fill m-0 mt-2\">\n              <table class=\"table table-striped table-bordered no-footer dataTable\">\n                <thead>\n                  <tr>\n                    {this.havePrivilege && <th class=\"text-left\">Property</th>}\n                    <th scope=\"col\" class=\"text-center\">\n                      {locales.entries?.Lcz_Booking}#\n                    </th>\n                    <th scope=\"col\">{locales.entries?.Lcz_BookedOn}</th>\n                    <th scope=\"col\">{locales.entries?.Lcz_GuestSource}</th>\n                    <th scope=\"col\" class=\"text-left services-cell\">\n                      {locales.entries?.Lcz_Services}\n                    </th>\n                    <th scope=\"col\" class=\"in-out\">\n                      {locales.entries?.Lcz_Dates}\n                    </th>\n                    <th scope=\"col\">\n                      <span class=\"price-span\">{locales.entries?.Lcz_Amount}</span>\n\n                      <ir-tooltip\n                        customSlot\n                        message={`<span style=\"width:100%;display:block;\">${locales.entries?.Lcz_BookingBalance}</span><span>${locales.entries?.Lcz_ClickToSettle}</span>`}\n                      >\n                        <span slot=\"tooltip-trigger\" class={'m-0 btn due-btn'}>\n                          {locales.entries?.Lcz_Balance}\n                        </span>\n                      </ir-tooltip>\n                    </th>\n                    {this.showCost && (\n                      <th scope=\"col\" class=\"services-cell\">\n                        {locales.entries?.Lcz_Cost}\n                      </th>\n                    )}\n                    <th scope=\"col\">{locales.entries?.Lcz_Status}</th>\n                    <th scope=\"col\">\n                      <p class=\"sr-only\">actions</p>\n                    </th>\n                  </tr>\n                </thead>\n                <tbody class=\"\">\n                  {booking_listing.bookings.length === 0 && (\n                    <tr>\n                      <td colSpan={this.havePrivilege ? 9 : 8}>{locales.entries?.Lcz_NoDataAvailable}</td>\n                    </tr>\n                  )}\n                  {booking_listing.bookings?.map(booking => {\n                    let confirmationBG: string = this.statusColors[booking.is_requested_to_cancel ? '003' : booking.status.code];\n                    const lastManipulation = booking.ota_manipulations ? booking.ota_manipulations[booking.ota_manipulations.length - 1] : null;\n                    const totalPersons = this.calculateTotalPersons(booking);\n                    return (\n                      <tr key={booking.booking_nbr}>\n                        {this.havePrivilege && <td class=\"text-left\">{booking.property.name}</td>}\n                        <td class=\"text-left\">\n                          <ir-button\n                            btn_color=\"link\"\n                            btnStyle={{ padding: '0', margin: '0' }}\n                            onClickHandler={() => (this.editBookingItem = { booking, cause: 'edit' })}\n                            text={booking.booking_nbr}\n                          ></ir-button>\n                          {booking.channel_booking_nbr && <p class=\"p-0 m-0 text-center secondary-p\">{booking.channel_booking_nbr}</p>}\n                        </td>\n                        <td>\n                          <p class=\"p-0 m-0 date-p\">{moment(booking.booked_on.date, 'YYYY-MM-DD').format('DD-MMM-YYYY')}</p>\n                          <p class=\"p-0 m-0 secondary-p\">{_formatTime(booking.booked_on.hour.toString(), booking.booked_on.minute.toString())}</p>\n                        </td>\n                        <td>\n                          <div class=\"h-100 d-flex align-items-center \" style={{ width: 'max-content' }}>\n                            <img class=\"mr-2 logo\" src={booking.origin.Icon} alt={booking.origin.Label} />\n                            <div class=\"text-left\">\n                              <div class=\"d-flex align-items-center\">\n                                <div class=\"booking_name m-0 p-0\">\n                                  <ir-button\n                                    btn_color=\"link\"\n                                    onClickHandler={() => (this.editBookingItem = { booking, cause: 'guest' })}\n                                    text={`${booking.guest.first_name} ${booking.guest.last_name ?? ''}`}\n                                    btnStyle={{\n                                      width: 'fit-content',\n                                      padding: '0',\n                                      margin: '0',\n                                    }}\n                                    labelStyle={{\n                                      padding: '0',\n                                    }}\n                                  ></ir-button>\n                                  {booking.guest.nbr_confirmed_bookings > 1 && !booking.agent && (\n                                    <div class=\"m-0 p-0\">\n                                      <ir-tooltip message={`${locales.entries.Lcz_BookingsNbr}`.replace('%1', booking.guest.nbr_confirmed_bookings.toString())} customSlot>\n                                        <div class=\"d-flex align-items-center my-0 p-0\" slot=\"tooltip-trigger\">\n                                          <ir-icons style={{ '--icon-size': '0.875rem' }} color=\"#FB0AAD\" name=\"heart-fill\"></ir-icons>\n                                        </div>\n                                      </ir-tooltip>\n                                    </div>\n                                  )}\n                                  {/* <button\n                                    class=\"booking_number p-0 m-0 \"\n                                    onClick={() => {\n                                      this.editBookingItem = { booking, cause: 'guest' };\n                                    }}\n                                  ></button> */}\n                                  <span class={'p-0 m-0'}>\n                                    {/* {booking.occupancy.adult_nbr} */}\n                                    {totalPersons}\n                                    {locales.entries.Lcz_P}\n                                  </span>\n                                  {getPrivateNote(booking.extras) && <span class=\"yellow_dot\"></span>}\n                                </div>\n                              </div>\n                              <div class={'d-flex align-items-center booking-label-gap'}>\n                                <p class=\"p-0 m-0 secondary-p\">{booking.origin.Label}</p>\n                                {booking.is_in_loyalty_mode && !booking.promo_key && (\n                                  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" height={18} width={18}>\n                                    <title>{locales.entries.Lcz_LoyaltyDiscountApplied}</title>\n                                    <path\n                                      fill=\"#fc6c85\"\n                                      d=\"M225.8 468.2l-2.5-2.3L48.1 303.2C17.4 274.7 0 234.7 0 192.8v-3.3c0-70.4 50-130.8 119.2-144C158.6 37.9 198.9 47 231 69.6c9 6.4 17.4 13.8 25 22.3c4.2-4.8 8.7-9.2 13.5-13.3c3.7-3.2 7.5-6.2 11.5-9c0 0 0 0 0 0C313.1 47 353.4 37.9 392.8 45.4C462 58.6 512 119.1 512 189.5v3.3c0 41.9-17.4 81.9-48.1 110.4L288.7 465.9l-2.5 2.3c-8.2 7.6-19 11.9-30.2 11.9s-22-4.2-30.2-11.9zM239.1 145c-.4-.3-.7-.7-1-1.1l-17.8-20c0 0-.1-.1-.1-.1c0 0 0 0 0 0c-23.1-25.9-58-37.7-92-31.2C81.6 101.5 48 142.1 48 189.5v3.3c0 28.5 11.9 55.8 32.8 75.2L256 430.7 431.2 268c20.9-19.4 32.8-46.7 32.8-75.2v-3.3c0-47.3-33.6-88-80.1-96.9c-34-6.5-69 5.4-92 31.2c0 0 0 0-.1 .1s0 0-.1 .1l-17.8 20c-.3 .4-.7 .7-1 1.1c-4.5 4.5-10.6 7-16.9 7s-12.4-2.5-16.9-7z\"\n                                    />\n                                  </svg>\n                                )}\n                                {booking.promo_key && (\n                                  <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" height={18} width={18}>\n                                    <title>{locales.entries.Lcz_Coupon + ':' + booking.promo_key}</title>\n                                    <path\n                                      stroke-linecap=\"round\"\n                                      stroke-linejoin=\"round\"\n                                      d=\"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 0 1 0 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 0 1 0-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375Z\"\n                                    />\n                                  </svg>\n                                )}\n                              </div>\n                              {/* {booking.agent && <p class=\"m-0 secondary-p\">{locales.entries.Lcz_AgentCode.replace('%1', booking.agent.name)}</p>} */}\n                            </div>\n                          </div>\n                        </td>\n\n                        <td>\n                          <ul>\n                            {booking.rooms.map(room => (\n                              <li>\n                                <div class={'room-service'}>\n                                  <p class={'m-0 p-0'}>{room.roomtype.name}</p>\n                                  {room.unit &&\n                                    !isSingleUnit(room.roomtype.id) &&\n                                    ((room.unit as IUnit)?.name?.length > 4 ? (\n                                      <ir-tooltip customSlot message={(room.unit as IUnit)?.name}>\n                                        <p class={'room-name-container cursor-pointer m-0'} slot=\"tooltip-trigger\">\n                                          {(room.unit as IUnit)?.name?.substring(0, 4)}\n                                        </p>\n                                      </ir-tooltip>\n                                    ) : (\n                                      <p class={'room-name-container  m-0'}>{(room.unit as IUnit)?.name?.substring(0, 4)}</p>\n                                    ))}\n                                </div>\n                              </li>\n                            ))}\n                            {booking.extra_services && <li>{locales.entries.Lcz_ExtraServices}</li>}\n                          </ul>\n                        </td>\n                        <td>\n                          <p class=\"p-0 m-0 date-p\">{moment(booking.from_date, 'YYYY-MM-DD').format('DD-MMM-YYYY')}</p>\n                          <p class=\"p-0 m-0 date-p\">{moment(booking.to_date, 'YYYY-MM-DD').format('DD-MMM-YYYY')}</p>\n                        </td>\n                        <td>\n                          <p class=\"p-0 m-0\" style={{ whiteSpace: 'nowrap' }}>\n                            {formatAmount(booking.currency.symbol, booking.financial?.gross_total ?? 0)}\n                          </p>\n                          <Fragment>\n                            {['003', '004'].includes(booking.status.code)\n                              ? booking.financial.cancelation_penality_as_if_today !== 0 && (\n                                  <button\n                                    onClick={() => {\n                                      this.editBookingItem = { booking, cause: 'payment' };\n                                      this.openModal();\n                                    }}\n                                    style={{ whiteSpace: 'nowrap' }}\n                                    class=\"btn p-0 m-0 due-btn\"\n                                  >\n                                    <span>{booking.financial.cancelation_penality_as_if_today < 0 ? 'Refund' : 'Charge'} </span>\n                                    {formatAmount(booking.currency.symbol, Math.abs(booking.financial.cancelation_penality_as_if_today))}\n                                  </button>\n                                )\n                              : booking.financial.due_amount !== 0 && (\n                                  <button\n                                    onClick={() => {\n                                      this.editBookingItem = { booking, cause: 'payment' };\n                                      this.openModal();\n                                    }}\n                                    style={{ whiteSpace: 'nowrap' }}\n                                    class=\"btn p-0 m-0 due-btn\"\n                                  >\n                                    {formatAmount(booking.currency.symbol, booking.financial.due_amount)}\n                                  </button>\n                                )}\n                          </Fragment>\n                        </td>\n                        {this.showCost && (\n                          <td>\n                            {booking.financial.gross_cost !== null && booking.financial.gross_cost === 0\n                              ? '_'\n                              : formatAmount(booking.currency.symbol, booking.financial.gross_cost)}\n                          </td>\n                        )}\n\n                        <td>\n                          <p class={`m-0 badge ${confirmationBG} ct_ir_badge`}>\n                            {booking.is_requested_to_cancel ? locales?.entries?.Lcz_CancellationRequested : booking.status.description}\n                          </p>\n                          {!lastManipulation && booking.events?.length > 0 && booking.events[0].type.toLowerCase() === 'modified' && (\n                            <p class=\"mx-0 p-0 small\" style={{ marginTop: '0.25rem', marginBottom: '0' }}>\n                              Modified\n                            </p>\n                          )}\n                          {lastManipulation && (\n                            <ir-popover\n                              trigger=\"hover\"\n                              content={`Modified by ${lastManipulation.user} at ${lastManipulation.date} ${lastManipulation.hour}:${lastManipulation.minute}`}\n                            >\n                              <p class=\"mx-0 p-0 small text-danger\" style={{ marginTop: '0.25rem', marginBottom: '0' }}>\n                                <b>Modified</b>\n                              </p>\n                            </ir-popover>\n                          )}\n                        </td>\n                        <td>\n                          <div class=\"d-flex justify-content-center align-items-center\" style={{ gap: '8px' }}>\n                            <ir-button title=\"Edit booking\" variant=\"icon\" icon_name=\"edit\" onClickHandler={() => (this.editBookingItem = { booking, cause: 'edit' })}></ir-button>\n                            <ir-button\n                              title=\"Delete booking\"\n                              style={{ '--icon-button-color': '#ff4961', '--icon-button-hover-color': '#FF1635' }}\n                              variant=\"icon\"\n                              icon_name=\"trash\"\n                              onClickHandler={() => {\n                                this.editBookingItem = { booking, cause: 'delete' };\n                                this.openModal();\n                              }}\n                            ></ir-button>\n                          </div>\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n              {this.totalPages > 1 && (\n                <section class={'d-flex flex-column flex-md-row align-items-center justify-content-between pagination-container'}>\n                  <p class=\"m-0 mb-1 mb-md-0\">{this.renderItemRange()}</p>\n                  <div class={'d-flex align-items-center buttons-container'}>\n                    <ir-button\n                      size=\"sm\"\n                      btn_disabled={this.currentPage === 1}\n                      onClickHandler={async () => {\n                        this.currentPage = 1;\n                        await this.updateData();\n                      }}\n                      icon_name=\"angles_left\"\n                      style={{ '--icon-size': '0.875rem' }}\n                    ></ir-button>\n                    <ir-button\n                      size=\"sm\"\n                      btn_disabled={this.currentPage === 1}\n                      onClickHandler={async () => {\n                        this.currentPage = this.currentPage - 1;\n                        await this.updateData();\n                      }}\n                      icon_name=\"angle_left\"\n                      style={{ '--icon-size': '0.875rem' }}\n                    ></ir-button>\n                    <ir-select\n                      selectedValue={this.currentPage.toString()}\n                      showFirstOption={false}\n                      onSelectChange={async e => {\n                        this.currentPage = +e.detail;\n                        await this.updateData();\n                      }}\n                      data={Array.from(Array(this.totalPages), (_, i) => i + 1).map(i => ({\n                        text: i.toString(),\n                        value: i.toString(),\n                      }))}\n                    ></ir-select>\n                    <ir-button\n                      size=\"sm\"\n                      btn_disabled={this.currentPage === this.totalPages}\n                      onClickHandler={async () => {\n                        this.currentPage = this.currentPage + 1;\n                        await this.updateData();\n                      }}\n                      icon_name=\"angle_right\"\n                      style={{ '--icon-size': '0.875rem' }}\n                    ></ir-button>\n                    <ir-button\n                      size=\"sm\"\n                      btn_disabled={this.currentPage === this.totalPages}\n                      onClickHandler={async () => {\n                        this.currentPage = this.totalPages;\n                        console.log(this.currentPage);\n                        await this.updateData();\n                      }}\n                      icon_name=\"angles_right\"\n                      style={{ '--icon-size': '0.875rem' }}\n                    ></ir-button>\n                  </div>\n                </section>\n              )}\n            </div>\n          </section>\n        </div>\n        {this.editBookingItem && <ir-listing-modal paymentEntries={this.paymentEntries} onModalClosed={() => (this.editBookingItem = null)}></ir-listing-modal>}\n        <ir-sidebar\n          onIrSidebarToggle={this.handleSideBarToggle.bind(this)}\n          open={this.editBookingItem !== null && ['edit', 'guest'].includes(this.editBookingItem.cause)}\n          showCloseButton={false}\n          sidebarStyles={\n            this.editBookingItem?.cause === 'guest' ? { background: 'white' } : { width: this.editBookingItem ? '80rem' : 'var(--sidebar-width,40rem)', background: '#F2F3F8' }\n          }\n        >\n          {this.editBookingItem?.cause === 'edit' && (\n            <ir-booking-details\n              slot=\"sidebar-body\"\n              p={this.p}\n              hasPrint\n              hasReceipt\n              is_from_front_desk\n              propertyid={this.editBookingItem?.booking?.property?.id}\n              hasRoomEdit\n              hasRoomDelete\n              hasCloseButton\n              onCloseSidebar={() => (this.editBookingItem = null)}\n              bookingNumber={this.editBookingItem.booking.booking_nbr}\n              ticket={this.ticket}\n              language={this.language}\n              hasRoomAdd\n            ></ir-booking-details>\n          )}\n          {this.editBookingItem?.cause === 'guest' && (\n            <ir-guest-info\n              slot=\"sidebar-body\"\n              isInSideBar={true}\n              headerShown\n              booking_nbr={this.editBookingItem?.booking?.booking_nbr}\n              email={this.editBookingItem?.booking?.guest.email}\n              language={this.language}\n              onCloseSideBar={() => (this.editBookingItem = null)}\n            ></ir-guest-info>\n          )}\n        </ir-sidebar>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n.daily-revenue__meta {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n.daily-revenue__table {\n  flex: 1 1 0%;\n}\n\n/*sm*/\n@media (min-width: 768px) {\n  .daily-revenue__meta {\n    flex-direction: row;\n  }\n}\n","import Token from '@/models/Token';\nimport { BookingService } from '@/services/booking.service';\nimport { PropertyService } from '@/services/property.service';\nimport { RoomService } from '@/services/room.service';\nimport locales from '@/stores/locales.store';\nimport { Component, Event, EventEmitter, Host, Listen, Prop, State, Watch, h } from '@stencil/core';\nimport { DailyPaymentFilter, FolioPayment, GroupedFolioPayment, SidebarOpenEvent } from './types';\nimport { v4 } from 'uuid';\nimport moment from 'moment';\nimport { PaymentEntries } from '../ir-booking-details/types';\n\n@Component({\n  tag: 'ir-daily-revenue',\n  styleUrl: 'ir-daily-revenue.css',\n  scoped: true,\n})\nexport class IrDailyRevenue {\n  @Prop() language: string = '';\n  @Prop() ticket: string = '';\n  @Prop() propertyid: number;\n  @Prop() p: string;\n\n  @State() isPageLoading: boolean;\n  @State() property_id: number;\n  @State() groupedPayment: GroupedFolioPayment;\n  @State() previousDateGroupedPayments: GroupedFolioPayment;\n  @State() isLoading: string;\n  @State() filters: DailyPaymentFilter = { date: moment().format('YYYY-MM-DD'), users: null };\n  @State() sideBarEvent: SidebarOpenEvent | null;\n\n  private tokenService = new Token();\n  private roomService = new RoomService();\n  private propertyService = new PropertyService();\n  private bookingService = new BookingService();\n  private paymentEntries: PaymentEntries;\n\n  @Event() preventPageLoad: EventEmitter<null>;\n\n  componentWillLoad() {\n    if (this.ticket) {\n      this.tokenService.setToken(this.ticket);\n      this.initializeApp();\n    }\n  }\n\n  @Watch('ticket')\n  ticketChanged(newValue: string, oldValue: string) {\n    if (newValue === oldValue) {\n      return;\n    }\n    this.tokenService.setToken(this.ticket);\n    this.initializeApp();\n  }\n\n  @Listen('revenueOpenSidebar')\n  handleOpenSidebar(e: CustomEvent<SidebarOpenEvent>) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.sideBarEvent = e.detail;\n  }\n  @Listen('fetchNewReports')\n  handleFetchNewReports(e: CustomEvent<DailyPaymentFilter>) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.filters = { ...e.detail };\n    this.getPaymentReports();\n  }\n  @Listen('resetBookingEvt')\n  async handleResetBooking(e: CustomEvent) {\n    e.stopPropagation();\n    e.stopImmediatePropagation();\n    this.getPaymentReports(false, true);\n  }\n\n  private handleSidebarClose = (e: CustomEvent) => {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.sideBarEvent = null;\n  };\n\n  private renderSidebarBody() {\n    if (!this.sideBarEvent) {\n      return;\n    }\n    switch (this.sideBarEvent.type) {\n      case 'booking':\n        return (\n          <ir-booking-details\n            slot=\"sidebar-body\"\n            hasPrint\n            hasReceipt\n            hasCloseButton\n            onCloseSidebar={this.handleSidebarClose}\n            is_from_front_desk\n            propertyid={this.property_id}\n            hasRoomEdit\n            hasRoomDelete\n            bookingNumber={this.sideBarEvent.payload.bookingNumber.toString()}\n            ticket={this.ticket}\n            language={this.language}\n            hasRoomAdd\n          ></ir-booking-details>\n        );\n      default:\n        return null;\n    }\n  }\n\n  private async initializeApp() {\n    this.isPageLoading = true;\n\n    try {\n      let propertyId = this.propertyid;\n      if (!propertyId && !this.p) {\n        throw new Error('Property ID or username is required');\n      }\n      if (!propertyId) {\n        const propertyData = await this.roomService.getExposedProperty({\n          id: 0,\n          aname: this.p,\n          language: this.language,\n          is_backend: true,\n          include_units_hk_status: true,\n        });\n        propertyId = propertyData.My_Result.id;\n      }\n\n      this.property_id = propertyId;\n\n      const requests: Promise<any>[] = [\n        this.bookingService.getSetupEntriesByTableNameMulti(['_PAY_TYPE', '_PAY_TYPE_GROUP', '_PAY_METHOD']),\n        this.getPaymentReports(),\n        this.roomService.fetchLanguage(this.language),\n      ];\n      if (propertyId) {\n        requests.push(\n          this.roomService.getExposedProperty({\n            id: propertyId,\n            language: this.language,\n            is_backend: true,\n            include_units_hk_status: true,\n          }),\n        );\n      }\n\n      const [setupEntries] = await Promise.all(requests);\n      const { pay_type, pay_type_group, pay_method } = this.bookingService.groupEntryTablesResult(setupEntries);\n      this.paymentEntries = {\n        groups: pay_type_group,\n        methods: pay_method,\n        types: pay_type,\n      };\n    } catch (error) {\n      console.log(error);\n    } finally {\n      this.isPageLoading = false;\n    }\n  }\n  private groupPaymentsByName(payments: FolioPayment[]): GroupedFolioPayment {\n    const groupedPayment: GroupedFolioPayment = new Map();\n\n    for (const payment of payments) {\n      const key = `${payment.payTypeCode}_${payment.payMethodCode}`;\n      const p = groupedPayment.get(key) ?? [];\n      groupedPayment.set(key, [...p, payment]);\n    }\n    return new Map(\n      [...groupedPayment.entries()].sort(([a], [b]) => {\n        const aNum = Number(a);\n        const bNum = Number(b);\n        if (!isNaN(aNum) && !isNaN(bNum)) {\n          return aNum - bNum;\n        }\n        return a.localeCompare(b);\n      }),\n    );\n  }\n\n  private async getPaymentReports(isExportToExcel = false, excludeYesterday = false) {\n    try {\n      const getReportObj = (report): FolioPayment => {\n        return {\n          method: report.METHOD,\n          payTypeCode: report.PAY_TYPE_CODE,\n          payMethodCode: report.PAY_METHOD_CODE,\n          amount: report.AMOUNT,\n          date: report.DATE,\n          hour: report.HOUR,\n          minute: report.MINUTE,\n          user: report.USER,\n          currency: report.CURRENCY,\n          bookingNbr: report.BOOKING_NBR,\n          id: v4(),\n        };\n      };\n      this.isLoading = isExportToExcel ? 'export' : 'filter';\n\n      const requests = [\n        this.propertyService.getDailyRevenueReport({\n          date: this.filters.date,\n          property_id: this.property_id?.toString(),\n          is_export_to_excel: isExportToExcel,\n        }),\n      ];\n      if (!isExportToExcel && !excludeYesterday) {\n        requests.push(\n          this.propertyService.getDailyRevenueReport({\n            date: moment(this.filters.date, 'YYYY-MM-DD').add(-1, 'days').format('YYYY-MM-DD'),\n            property_id: this.property_id?.toString(),\n            is_export_to_excel: isExportToExcel,\n          }),\n        );\n      }\n\n      const results = await Promise.all(requests);\n      if (!isExportToExcel) {\n        if (results[0]) {\n          this.groupedPayment = this.groupPaymentsByName(results[0]?.map(getReportObj));\n        } else {\n          this.groupedPayment = new Map();\n        }\n        if (results[1]) this.previousDateGroupedPayments = this.groupPaymentsByName(results[1]?.map(getReportObj));\n      }\n    } catch (e) {\n      console.log(e);\n    } finally {\n      this.isLoading = null;\n    }\n  }\n\n  render() {\n    if (this.isPageLoading) {\n      return <ir-loading-screen></ir-loading-screen>;\n    }\n    return (\n      <Host>\n        <ir-toast></ir-toast>\n        <ir-interceptor></ir-interceptor>\n        <section class=\"p-2 d-flex flex-column\" style={{ gap: '1rem' }}>\n          <div class=\"d-flex align-items-center justify-content-between\">\n            <h3 class=\"mb-1 mb-md-0\">Daily Revenue</h3>\n            <ir-button\n              size=\"sm\"\n              btn_color=\"outline\"\n              isLoading={this.isLoading === 'export'}\n              text={locales.entries?.Lcz_Export}\n              onClickHandler={async e => {\n                e.stopImmediatePropagation();\n                e.stopPropagation();\n                await this.getPaymentReports(true);\n              }}\n              btnStyle={{ height: '100%' }}\n              iconPosition=\"right\"\n              icon_name=\"file\"\n              icon_style={{ '--icon-size': '14px' }}\n            ></ir-button>\n          </div>\n          <ir-revenue-summary\n            previousDateGroupedPayments={this.previousDateGroupedPayments}\n            groupedPayments={this.groupedPayment}\n            paymentEntries={this.paymentEntries}\n          ></ir-revenue-summary>\n          <div class=\"daily-revenue__meta\">\n            <ir-daily-revenue-filters isLoading={this.isLoading === 'filter'} payments={this.groupedPayment}></ir-daily-revenue-filters>\n            <ir-revenue-table filters={this.filters} class={'daily-revenue__table'} paymentEntries={this.paymentEntries} payments={this.groupedPayment}></ir-revenue-table>\n          </div>\n        </section>\n        <ir-sidebar\n          sidebarStyles={{\n            width: this.sideBarEvent?.type === 'booking' ? '80rem' : 'var(--sidebar-width,40rem)',\n            background: this.sideBarEvent?.type === 'booking' ? '#F2F3F8' : 'white',\n          }}\n          open={Boolean(this.sideBarEvent)}\n          showCloseButton={false}\n          onIrSidebarToggle={this.handleSidebarClose}\n        >\n          {this.renderSidebarBody()}\n        </ir-sidebar>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n  box-sizing: border-box;\n}\n:host * {\n  box-sizing: border-box;\n}\n\n@media only screen and (min-width: 900px) {\n  /* td {\n    min-width: 140px !important;\n    width: max-content !important;\n  } */\n}\n@media only screen and (max-width: 900px) {\n  /* td {\n    min-width: 100px !important;\n  } */\n  /* .table-container {\n    width: max-content !important;\n  } */\n}\n/*sm*/\n@media (min-width: 640px) {\n}\n\n/*md*/\n@media (min-width: 768px) {\n}\n\n.tasks-view {\n  display: flex;\n  flex-direction: column;\n}\n/*lg*/\n@media (min-width: 1024px) {\n  .tasks-view {\n    flex-direction: row;\n  }\n}\n\n/*xl*/\n@media (min-width: 1280px) {\n}\n\n/*2xl*/\n@media (min-width: 1536px) {\n}\n","import { CleanTaskEvent, IPendingActions } from '@/models/housekeeping';\nimport Token from '@/models/Token';\nimport { HouseKeepingService } from '@/services/housekeeping.service';\nimport { RoomService } from '@/services/room.service';\nimport housekeeping_store from '@/stores/housekeeping.store';\n// import { isRequestPending } from '@/stores/ir-interceptor.store';\nimport locales from '@/stores/locales.store';\nimport { Component, Host, Prop, State, h, Element, Watch, Event, EventEmitter, Listen } from '@stencil/core';\nimport moment from 'moment';\nimport { v4 } from 'uuid';\nimport { TaskFilters } from './types';\nimport { downloadFile } from '@/utils/utils';\nimport { updateTasks as updateTasksStore, updateSelectedTasks, clearSelectedTasks, hkTasksStore, setLoading } from '@/stores/hk-tasks.store';\nimport calendar_data from '@/stores/calendar-data';\n\n@Component({\n  tag: 'ir-hk-tasks',\n  styleUrl: 'ir-hk-tasks.css',\n  scoped: true,\n})\nexport class IrHkTasks {\n  @Element() el: HTMLElement;\n\n  @Prop() language: string = '';\n  @Prop() ticket: string = '';\n  @Prop() propertyid: number;\n  @Prop() p: string;\n  @Prop() baseUrl: string;\n\n  @State() isLoading = false;\n  @State() isCleaningLoading = false;\n  @State() selectedDuration = '';\n  @State() selectedHouseKeeper = '0';\n  @State() selectedRoom: IPendingActions | null = null;\n  @State() archiveOpened = false;\n  @State() property_id: number;\n  @State() isSidebarOpen: boolean;\n  @State() isApplyFiltersLoading: boolean;\n  @State() filters: TaskFilters;\n  @State() modalCauses: CleanTaskEvent & { cause: 'skip' | 'clean' };\n\n  @Event({ bubbles: true, composed: true }) clearSelectedHkTasks: EventEmitter<void>;\n\n  private hkNameCache: Record<number, string> = {};\n  private roomService = new RoomService();\n  private houseKeepingService = new HouseKeepingService();\n  private token = new Token();\n  private table_sorting: Map<string, 'ASC' | 'DESC'> = new Map();\n  private modal: HTMLIrModalElement;\n\n  componentWillLoad() {\n    if (this.baseUrl) {\n      this.token.setBaseUrl(this.baseUrl);\n    }\n    if (this.ticket !== '') {\n      this.token.setToken(this.ticket);\n      this.init();\n    }\n  }\n\n  @Watch('ticket')\n  ticketChanged(newValue: string, oldValue: string) {\n    if (newValue === oldValue) {\n      return;\n    }\n    this.token.setToken(this.ticket);\n    this.init();\n  }\n\n  @Listen('closeSideBar')\n  handleCloseSidebar(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.isSidebarOpen = false;\n  }\n  @Listen('sortingChanged')\n  handleSortingChanged(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    const { field, direction } = e.detail;\n    console.log(e.detail);\n    if (field === 'date') {\n      return;\n    }\n    this.table_sorting.set(field, direction);\n  }\n  @Listen('skipSelectedTask')\n  handleSkipSelectedTask(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.modalCauses = { task: e.detail, cause: 'skip' };\n    this.modal?.openModal();\n  }\n\n  private async init() {\n    try {\n      this.isLoading = true;\n      setLoading(true);\n      let propertyId = this.propertyid;\n      if (!this.propertyid && !this.p) {\n        throw new Error('Property ID or username is required');\n      }\n      // let roomResp = null;\n      if (!propertyId) {\n        console.log(propertyId);\n        const propertyData = await this.roomService.getExposedProperty({\n          id: 0,\n          aname: this.p,\n          language: this.language,\n          is_backend: true,\n          include_units_hk_status: true,\n        });\n        // roomResp = propertyData;\n        propertyId = propertyData.My_Result.id;\n      }\n      this.property_id = propertyId;\n      const requests = [this.houseKeepingService.getExposedHKSetup(this.property_id), this.roomService.fetchLanguage(this.language)];\n      if (this.propertyid) {\n        requests.push(\n          this.roomService.getExposedProperty({\n            id: this.propertyid,\n            language: this.language,\n            is_backend: true,\n            include_units_hk_status: true,\n          }),\n        );\n      }\n\n      await Promise.all(requests);\n      const tasksResult = await this.houseKeepingService.getHkTasks({\n        property_id: this.property_id,\n        from_date: moment().format('YYYY-MM-DD'),\n        to_date: moment().format('YYYY-MM-DD'),\n        housekeepers: [],\n        cleaning_frequency: (calendar_data.cleaning_frequency ?? housekeeping_store?.hk_criteria?.cleaning_frequencies[0])?.code,\n        dusty_window: housekeeping_store?.hk_criteria?.dusty_periods[0]?.code,\n        highlight_window: housekeeping_store?.hk_criteria?.highlight_checkin_options[0]?.code,\n      });\n\n      // updateTaskList();\n      if (tasksResult?.tasks) {\n        this.updateTasks(tasksResult.tasks);\n      }\n    } catch (error) {\n      console.log(error);\n    } finally {\n      this.isLoading = false;\n      setLoading(false);\n    }\n  }\n\n  private buildHousekeeperNameCache() {\n    this.hkNameCache = {};\n    housekeeping_store.hk_criteria?.housekeepers?.forEach(hk => {\n      if (hk.id != null && hk.name != null) {\n        this.hkNameCache[hk.id] = hk.name;\n      }\n    });\n  }\n\n  private updateTasks(tasks: any[]) {\n    this.buildHousekeeperNameCache();\n    updateTasksStore(\n      tasks.map(t => ({\n        ...t,\n        id: v4(),\n        housekeeper: (() => {\n          const name = this.hkNameCache[t.hkm_id];\n          if (name) {\n            return name;\n          }\n          const hkName = housekeeping_store.hk_criteria?.housekeepers?.find(hk => hk.id === t.hkm_id)?.name;\n          this.hkNameCache[t.hkm_id] = hkName;\n          return hkName;\n        })(),\n      })),\n    );\n  }\n  @Listen('headerButtonPress')\n  async handleHeaderButtonPress(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    const { name } = e.detail;\n    switch (name) {\n      case 'cleaned':\n      case 'clean-inspect':\n        this.modal?.openModal();\n        this.modalCauses = {\n          task: null,\n          cause: 'clean',\n          status: name === 'clean-inspect' ? '004' : '001',\n        };\n        break;\n      case 'export':\n        const sortingArray: { key: string; value: string }[] = Array.from(this.table_sorting.entries()).map(([key, value]) => ({\n          key,\n          value,\n        }));\n        console.log(sortingArray);\n        const { url } = await this.fetchTasksWithFilters(true);\n        downloadFile(url);\n        break;\n      case 'archive':\n        this.isSidebarOpen = true;\n        break;\n    }\n  }\n  @Listen('cleanSelectedTask')\n  handleSelectedTaskCleaningEvent(e: CustomEvent<CleanTaskEvent>) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.modalCauses = { ...e.detail, cause: 'clean' };\n    this.modal?.openModal();\n  }\n\n  private async handleModalConfirmation(e: CustomEvent) {\n    try {\n      e.stopImmediatePropagation();\n      e.stopPropagation();\n      if (hkTasksStore.selectedTasks.length === 0) {\n        return;\n      }\n      this.isCleaningLoading = true;\n      if (this.modalCauses?.cause === 'skip') {\n        const { booking_nbr, date, unit } = this.modalCauses.task;\n        await this.houseKeepingService.editHkSkip({\n          BOOK_NBR: booking_nbr,\n          DATE: date,\n          COMMENT: '',\n          HK_SKIP_ID: -1,\n          HK_SKIP_REASON_CODE: '001',\n          PR_ID: unit.id,\n        });\n      } else {\n        await this.houseKeepingService.executeHKAction({\n          actions: hkTasksStore.selectedTasks.map(t => ({\n            description: 'Cleaned',\n            hkm_id: t.hkm_id === 0 ? null : t.hkm_id,\n            unit_id: t.unit.id,\n            booking_nbr: t.booking_nbr,\n            status: this.modalCauses?.status ?? '001',\n          })),\n        });\n      }\n      await this.fetchTasksWithFilters();\n    } finally {\n      clearSelectedTasks();\n      if (this.modalCauses) {\n        this.modalCauses = null;\n      }\n      this.isCleaningLoading = false;\n      // this.clearSelectedTasks.emit();\n      this.modal.closeModal();\n    }\n  }\n\n  private async applyFilters(e: CustomEvent) {\n    try {\n      this.isApplyFiltersLoading = true;\n      e.stopImmediatePropagation();\n      e.stopPropagation();\n      this.filters = { ...e.detail };\n      await this.fetchTasksWithFilters();\n    } catch (error) {\n      console.log(error);\n    } finally {\n      this.isApplyFiltersLoading = false;\n    }\n  }\n\n  private async fetchTasksWithFilters(export_to_excel: boolean = false) {\n    const { cleaning_periods, housekeepers, cleaning_frequencies, dusty_units, highlight_check_ins } = this.filters ?? {};\n\n    const { tasks, url } = await this.houseKeepingService.getHkTasks({\n      housekeepers,\n      cleaning_frequency: cleaning_frequencies?.code,\n      dusty_window: dusty_units?.code,\n      highlight_window: highlight_check_ins?.code,\n      property_id: this.property_id,\n      from_date: moment().format('YYYY-MM-DD'),\n      to_date: cleaning_periods?.code || moment().format('YYYY-MM-DD'),\n      is_export_to_excel: export_to_excel,\n    });\n    console.log(tasks);\n    if (tasks) {\n      this.updateTasks(tasks);\n    }\n    return { tasks, url };\n  }\n\n  render() {\n    if (this.isLoading) {\n      return <ir-loading-screen></ir-loading-screen>;\n    }\n    return (\n      <Host data-testid=\"hk_tasks_base\">\n        <ir-toast></ir-toast>\n        <ir-interceptor></ir-interceptor>\n        <section class=\"p-1 d-flex flex-column\" style={{ gap: '1rem' }}>\n          <h3>Housekeeping Tasks</h3>\n          <div class=\"tasks-view \" style={{ gap: '1rem' }}>\n            <ir-tasks-filters\n              isLoading={this.isApplyFiltersLoading}\n              onApplyFilters={e => {\n                this.applyFilters(e);\n              }}\n            ></ir-tasks-filters>\n            <div class=\"d-flex w-100 flex-column\" style={{ gap: '1rem' }}>\n              <ir-tasks-table\n                onRowSelectChange={e => {\n                  e.stopImmediatePropagation();\n                  e.stopPropagation();\n                  updateSelectedTasks(e.detail);\n                }}\n                class=\"flex-grow-1 w-100\"\n              ></ir-tasks-table>\n              {/* <ir-tasks-table-pagination></ir-tasks-table-pagination> */}\n            </div>\n          </div>\n        </section>\n        <ir-modal\n          autoClose={false}\n          ref={el => (this.modal = el)}\n          isLoading={this.isCleaningLoading}\n          onConfirmModal={this.handleModalConfirmation.bind(this)}\n          onCancelModal={() => {\n            if (this.modalCauses) {\n              clearSelectedTasks();\n              this.modalCauses = null;\n            }\n          }}\n          iconAvailable={true}\n          icon=\"ft-alert-triangle danger h1\"\n          leftBtnText={locales.entries.Lcz_Cancel}\n          rightBtnText={locales.entries.Lcz_Confirm}\n          leftBtnColor=\"secondary\"\n          rightBtnColor={'primary'}\n          modalTitle={locales.entries.Lcz_Confirmation}\n          modalBody={\n            this.modalCauses\n              ? this.modalCauses?.cause === 'clean'\n                ? this.modalCauses.task\n                  ? `Update ${this.modalCauses?.task?.unit?.name} to Clean`\n                  : 'Update selected unit(s) to Clean'\n                : 'Skip cleaning and reschedule for tomorrow.'\n              : 'Update selected unit(s) to Clean'\n          }\n        ></ir-modal>\n        <ir-sidebar\n          open={this.isSidebarOpen}\n          id=\"editGuestInfo\"\n          onIrSidebarToggle={e => {\n            e.stopImmediatePropagation();\n            e.stopPropagation();\n            this.isSidebarOpen = false;\n          }}\n          // sidebarStyles={{\n          //   width: '80vw',\n          // }}\n          showCloseButton={false}\n        >\n          {this.isSidebarOpen && <ir-hk-archive ticket={this.token.getToken()} propertyId={this.property_id} slot=\"sidebar-body\"></ir-hk-archive>}\n        </ir-sidebar>\n        {/* <ir-title class=\"d-none d-md-flex\" label={locales.entries.Lcz_HousekeepingTasks} justifyContent=\"space-between\">\n            <ir-button slot=\"title-body\" text={locales.entries.Lcz_Archive} size=\"sm\"></ir-button>\n          </ir-title> */}\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n","import Token from '@/models/Token';\nimport { HouseKeepingService } from '@/services/housekeeping.service';\nimport { RoomService } from '@/services/room.service';\nimport calendar_data from '@/stores/calendar-data';\nimport housekeeping_store, { updateHKStore } from '@/stores/housekeeping.store';\nimport { Component, Event, EventEmitter, Host, Listen, Prop, State, Watch, h } from '@stencil/core';\nimport { IToast } from '@components/ui/ir-toast/toast';\nimport locales from '@/stores/locales.store';\nimport { PropertyService } from '@/services/property.service';\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\n@Component({\n  tag: 'ir-housekeeping',\n  styleUrl: 'ir-housekeeping.css',\n  scoped: true,\n})\nexport class IrHousekeeping {\n  @Prop() language: string = '';\n  @Prop() ticket: string = '';\n\n  @Prop() propertyid: number;\n  @Prop() p: string;\n  @Prop() baseUrl: string;\n\n  @State() isLoading = false;\n\n  @Event() toast: EventEmitter<IToast>;\n\n  private roomService = new RoomService();\n  private houseKeepingService = new HouseKeepingService();\n  private propertyService = new PropertyService();\n  private token = new Token();\n  modal: HTMLIrModalElement;\n  selectedCleaningFrequency: any;\n\n  componentWillLoad() {\n    if (this.baseUrl) {\n      this.token.setBaseUrl(this.baseUrl);\n    }\n    if (this.ticket !== '') {\n      this.token.setToken(this.ticket);\n      this.initializeApp();\n    }\n  }\n  @Listen('resetData')\n  async handleResetData(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    await this.houseKeepingService.getExposedHKSetup(this.propertyid);\n  }\n  @Watch('ticket')\n  ticketChanged(newValue: string, oldValue: string) {\n    if (newValue === oldValue) {\n      return;\n    }\n    this.token.setToken(this.ticket);\n    this.initializeApp();\n  }\n\n  async initializeApp() {\n    try {\n      this.isLoading = true;\n      let propertyId = this.propertyid;\n      if (!propertyId) {\n        const propertyData = await this.roomService.getExposedProperty({\n          id: 0,\n          aname: this.p,\n          language: this.language,\n          is_backend: true,\n          include_sales_rate_plans: true,\n        });\n        propertyId = propertyData.My_Result.id;\n      }\n      updateHKStore('default_properties', { token: this.ticket, property_id: propertyId, language: this.language });\n      const requests: Array<Promise<any>> = [];\n      if (calendar_data.housekeeping_enabled) {\n        requests.push(this.houseKeepingService.getExposedHKSetup(propertyId));\n      }\n      requests.push(this.roomService.fetchLanguage(this.language, ['_HK_FRONT', '_PMS_FRONT']));\n      if (this.propertyid) {\n        requests.push(\n          this.roomService.getExposedProperty({\n            id: propertyId,\n            language: this.language,\n            is_backend: true,\n            include_sales_rate_plans: true,\n          }),\n        );\n      }\n\n      await Promise.all(requests);\n      this.selectedCleaningFrequency = calendar_data.cleaning_frequency?.code;\n    } catch (error) {\n      console.error(error);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n  private async saveAutomaticCheckInCheckout(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    try {\n      await this.roomService.SetAutomaticCheckInOut({\n        property_id: housekeeping_store.default_properties.property_id,\n        flag: e.detail === 'auto',\n      });\n      this.toast.emit({\n        position: 'top-right',\n        title: 'Saved Successfully',\n        description: '',\n        type: 'success',\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  private async saveCleaningFrequency(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    try {\n      await this.propertyService.setExposedCleaningFrequency({\n        property_id: housekeeping_store.default_properties.property_id,\n        code: this.selectedCleaningFrequency,\n      });\n      calendar_data.cleaning_frequency = { code: this.selectedCleaningFrequency, description: '' };\n      this.toast.emit({\n        position: 'top-right',\n        title: 'Saved Successfully',\n        description: '',\n        type: 'success',\n      });\n      this.modal.closeModal();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  render() {\n    if (this.isLoading) {\n      return <ir-loading-screen></ir-loading-screen>;\n    }\n    console.log(calendar_data.cleaning_frequency);\n    return (\n      <Host>\n        <ir-interceptor></ir-interceptor>\n        <ir-toast></ir-toast>\n        <section class=\"p-1\">\n          <h3 class=\"mb-2\">{locales.entries.Lcz_HouseKeepingAndCheckInSetup}</h3>\n          <div class=\"card p-1\">\n            <ir-title borderShown label=\"Operations Settings\"></ir-title>\n            <div class={'d-flex align-items-center mb-1'}>\n              <p class=\"my-0 py-0 mr-1\">{locales.entries.Lcz_CheckInOutGuestsAutomatically}</p>\n              <ir-select\n                showFirstOption={false}\n                selectedValue={calendar_data.is_automatic_check_in_out ? 'auto' : 'manual'}\n                onSelectChange={e => this.saveAutomaticCheckInCheckout(e)}\n                data={[\n                  { text: locales.entries.Lcz_YesAsPerPropertyPolicy, value: 'auto' },\n                  { text: locales.entries.Lcz_NoIWillDoItManually, value: 'manual' },\n                ]}\n              ></ir-select>\n            </div>\n            <div class={'d-flex align-items-center'}>\n              <p class=\"my-0 py-0 mr-1\">{locales.entries.Lcz_CleaningFrequency}:</p>\n              <ir-select\n                showFirstOption={false}\n                selectedValue={this.selectedCleaningFrequency}\n                onSelectChange={e => {\n                  e.stopImmediatePropagation();\n                  e.stopPropagation();\n                  this.selectedCleaningFrequency = e.detail;\n                  this.modal.openModal();\n                }}\n                data={housekeeping_store?.hk_criteria?.cleaning_frequencies.map(v => ({\n                  text: v.description,\n                  value: v.code,\n                }))}\n              ></ir-select>\n            </div>\n          </div>\n          {/*<ir-unit-status class=\"mb-1\"></ir-unit-status>*/}\n          {calendar_data.housekeeping_enabled && <ir-hk-team class=\"mb-1\"></ir-hk-team>}\n          <ir-modal\n            autoClose={false}\n            ref={el => (this.modal = el)}\n            isLoading={isRequestPending('/Set_Exposed_Cleaning_Frequency')}\n            onConfirmModal={this.saveCleaningFrequency.bind(this)}\n            iconAvailable={true}\n            onCancelModal={() => {\n              this.selectedCleaningFrequency = calendar_data.cleaning_frequency?.code;\n            }}\n            icon=\"ft-alert-triangle danger h1\"\n            leftBtnText={locales.entries.Lcz_Cancel}\n            rightBtnText={locales.entries.Lcz_Confirm}\n            leftBtnColor=\"secondary\"\n            rightBtnColor={'primary'}\n            modalTitle={locales.entries.Lcz_Confirmation}\n            modalBody={'This action will reschedule all cleaning tasks. Do you want to continue?'}\n          ></ir-modal>\n        </section>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n","import Token from '@/models/Token';\nimport { Component, Host, Listen, Prop, State, Watch, h } from '@stencil/core';\nimport { DailyReport, DailyReportFilter } from './types';\nimport moment from 'moment';\nimport locales from '@/stores/locales.store';\nimport { RoomService } from '@/services/room.service';\nimport { DailyStat, MonthlyStatsResults, PropertyService } from '@/services/property.service';\n\n@Component({\n  tag: 'ir-monthly-bookings-report',\n  styleUrl: 'ir-monthly-bookings-report.css',\n  scoped: true,\n})\nexport class IrMonthlyBookingsReport {\n  @Prop() language: string = '';\n  @Prop() ticket: string = '';\n  @Prop() propertyid: number;\n  @Prop() p: string;\n\n  @State() isPageLoading = true;\n  @State() isLoading: 'export' | 'filter' | null = null;\n\n  @State() reports: DailyReport[] = [];\n  @State() filters: DailyReportFilter;\n  @State() property_id: number;\n  @State() stats: Omit<MonthlyStatsResults, 'DailyStats'>;\n\n  private baseFilters: DailyReportFilter;\n\n  private tokenService = new Token();\n  private roomService = new RoomService();\n  private propertyService = new PropertyService();\n\n  componentWillLoad() {\n    this.baseFilters = {\n      date: {\n        description: moment().format('MMMM YYYY'),\n        firstOfMonth: moment().startOf('month').format('YYYY-MM-DD'),\n        lastOfMonth: moment().endOf('month').format('YYYY-MM-DD'),\n      },\n      include_previous_year: false,\n    };\n    this.filters = this.baseFilters;\n    if (this.ticket) {\n      this.tokenService.setToken(this.ticket);\n      this.init();\n    }\n  }\n  @Watch('ticket')\n  handleTicketChange(newValue: string, oldValue: string) {\n    if (newValue !== oldValue) {\n      this.tokenService.setToken(this.ticket);\n      this.init();\n    }\n  }\n  @Listen('applyFilters')\n  handleApplyFiltersChange(e: CustomEvent<DailyReportFilter>) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.filters = e.detail;\n    this.getReports();\n  }\n\n  private async init() {\n    try {\n      let propertyId = this.propertyid;\n      if (!this.propertyid && !this.p) {\n        throw new Error('Property ID or username is required');\n      }\n      // let roomResp = null;\n      if (!propertyId) {\n        console.log(propertyId);\n        const propertyData = await this.roomService.getExposedProperty({\n          id: 0,\n          aname: this.p,\n          language: this.language,\n          is_backend: true,\n          include_units_hk_status: true,\n        });\n        // roomResp = propertyData;\n        propertyId = propertyData.My_Result.id;\n      }\n      this.property_id = propertyId;\n      const requests = [this.roomService.fetchLanguage(this.language), this.getReports()];\n      if (this.propertyid) {\n        requests.push(\n          this.roomService.getExposedProperty({\n            id: this.propertyid,\n            language: this.language,\n            is_backend: true,\n            include_units_hk_status: true,\n          }),\n        );\n      }\n\n      await Promise.all(requests);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      this.isPageLoading = false;\n    }\n  }\n\n  private async getReports(isExportToExcel = false) {\n    try {\n      const getReportObj = (report: DailyStat): DailyReport => {\n        return {\n          day: report.Date,\n          units_booked: report.Units_booked,\n          occupancy_percent: report.Occupancy,\n          adr: report.ADR,\n          rooms_revenue: report.Rooms_Revenue,\n          total_guests: report?.Total_Guests,\n        };\n      };\n      this.isLoading = isExportToExcel ? 'export' : 'filter';\n      const { date, include_previous_year } = this.filters;\n\n      const requests = [\n        this.propertyService.getMonthlyStats({\n          from_date: date.firstOfMonth,\n          to_date: date.lastOfMonth,\n          property_id: this.property_id,\n          is_export_to_excel: isExportToExcel,\n        }),\n      ];\n\n      if (include_previous_year) {\n        requests.push(\n          this.propertyService.getMonthlyStats({\n            from_date: moment(date.firstOfMonth, 'YYYY-MM-DD').add(-1, 'year').format('YYYY-MM-DD'),\n            to_date: moment(date.lastOfMonth, 'YYYY-MM-DD').add(-1, 'years').format('YYYY-MM-DD'),\n            property_id: this.property_id,\n          }),\n        );\n      }\n\n      const results = await Promise.all(requests);\n      const currentReports = results[0];\n      let enrichedReports: DailyReport[] = [];\n      const { DailyStats, ...rest } = currentReports;\n\n      this.stats = { ...rest };\n\n      if (include_previous_year && results[isExportToExcel ? 0 : 1]) {\n        const previousYearReports = results[isExportToExcel ? 0 : 1];\n        let formattedReports = previousYearReports.DailyStats.map(getReportObj);\n        enrichedReports = DailyStats.map(getReportObj).map(current => {\n          const previous = formattedReports.find(prev => prev.day === moment(current.day, 'YYYY-MM-DD').add(-1, 'years').format('YYYY-MM-DD'));\n          return {\n            ...current,\n            last_year: previous ?? null,\n          };\n        });\n      } else {\n        enrichedReports = DailyStats.map(getReportObj);\n      }\n      this.reports = [...enrichedReports];\n    } catch (e) {\n      console.log(e);\n    } finally {\n      this.isLoading = null;\n    }\n  }\n  render() {\n    if (this.isPageLoading) {\n      return <ir-loading-screen></ir-loading-screen>;\n    }\n    return (\n      <Host>\n        <ir-toast></ir-toast>\n        <ir-interceptor></ir-interceptor>\n        <section class=\"p-2 d-flex flex-column\" style={{ gap: '1rem' }}>\n          <div class=\"d-flex align-items-center justify-content-between\">\n            <h3 class=\"mb-1 mb-md-0\">Daily Occupancy</h3>\n            <ir-button\n              size=\"sm\"\n              btn_color=\"outline\"\n              isLoading={this.isLoading === 'export'}\n              text={locales.entries?.Lcz_Export}\n              onClickHandler={async e => {\n                e.stopImmediatePropagation();\n                e.stopPropagation();\n                await this.getReports(true);\n              }}\n              btnStyle={{ height: '100%' }}\n              iconPosition=\"right\"\n              icon_name=\"file\"\n              icon_style={{ '--icon-size': '14px' }}\n            ></ir-button>\n          </div>\n          <section>\n            <div class=\"d-flex flex-column flex-md-row w-100\" style={{ gap: '1rem', alignItems: 'stretch' }}>\n              <ir-stats-card\n                icon={this.stats?.Occupancy_Difference_From_Previous_Month < 0 ? 'arrow-trend-down' : 'arrow-trend-up'}\n                cardTitle=\"Average Occupancy\"\n                value={this.stats.AverageOccupancy ? this.stats?.AverageOccupancy.toFixed(2) + '%' : null}\n                subtitle={`${this.stats?.Occupancy_Difference_From_Previous_Month < 0 ? '' : '+'}${this.stats?.Occupancy_Difference_From_Previous_Month.toFixed(\n                  2,\n                )}% from last month`}\n              ></ir-stats-card>\n\n              <ir-stats-card\n                icon=\"hotel\"\n                cardTitle=\"Total Units\"\n                value={this.stats?.TotalUnitsBooked ? this.stats?.TotalUnitsBooked.toString() : null}\n                subtitle=\"Booked\"\n              ></ir-stats-card>\n\n              <ir-stats-card icon=\"user_group\" cardTitle=\"Total Guests\" value={this.stats?.Total_Guests?.toString()} subtitle=\"Stayed\"></ir-stats-card>\n\n              <ir-stats-card\n                icon=\"calendar\"\n                cardTitle=\"Peak Days\"\n                value={this.stats?.PeakDays.length === 0 ? null : this.stats?.PeakDays?.map(pd => moment(pd.Date, 'YYYY-MM-DD').format('D').concat('th')).join(' - ')}\n                subtitle={`${Math.max(...(this.stats.PeakDays?.map(pd => pd.OccupancyPercent) || []))}% occupancy`}\n              ></ir-stats-card>\n            </div>\n            <div class=\"d-flex flex-column flex-lg-row mt-1 \" style={{ gap: '1rem' }}>\n              <ir-monthly-bookings-report-filter isLoading={this.isLoading === 'filter'} class=\"filters-card\" baseFilters={this.baseFilters}></ir-monthly-bookings-report-filter>\n              <ir-monthly-bookings-report-table reports={this.reports}></ir-monthly-bookings-report-table>\n            </div>\n          </section>\n        </section>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n","import { Component, Host, Prop, State, Watch, h } from '@stencil/core';\nimport Token from '@/models/Token';\nimport { AllowedProperties, PropertyService } from '@/services/property.service';\nimport { RoomService } from '@/services/room.service';\nimport locales from '@/stores/locales.store';\nimport moment from 'moment';\nimport { ChannelReport, ChannelReportResult, ChannelSaleFilter, SalesByChannelMode } from './types';\n@Component({\n  tag: 'ir-sales-by-channel',\n  styleUrl: 'ir-sales-by-channel.css',\n  scoped: true,\n})\nexport class IrSalesByChannel {\n  @Prop() language: string = '';\n  @Prop() ticket: string = '';\n  @Prop() propertyid: string;\n  @Prop() p: string;\n  @Prop() mode!: SalesByChannelMode;\n\n  @State() isLoading: 'filter' | 'export' | null = null;\n  @State() isPageLoading = true;\n\n  @State() salesData: ChannelReportResult;\n  @State() channelSalesFilters: ChannelSaleFilter;\n  @State() allowedProperties: AllowedProperties = [];\n  @State() propertyID: number;\n\n  private token = new Token();\n  private roomService = new RoomService();\n  private propertyService = new PropertyService();\n\n  private baseFilters: ChannelSaleFilter = {\n    FROM_DATE: moment().add(-7, 'days').format('YYYY-MM-DD'),\n    TO_DATE: moment().format('YYYY-MM-DD'),\n    BOOK_CASE: '001',\n    WINDOW: 7,\n    include_previous_year: false,\n    is_export_to_excel: false,\n  };\n\n  componentWillLoad() {\n    this.channelSalesFilters = this.baseFilters;\n    if (this.ticket) {\n      this.token.setToken(this.ticket);\n      this.initializeApp();\n    }\n  }\n\n  @Watch('ticket')\n  ticketChanged(newValue: string, oldValue: string) {\n    if (newValue === oldValue) {\n      return;\n    }\n    this.token.setToken(this.ticket);\n    this.initializeApp();\n  }\n\n  private async initializeApp() {\n    try {\n      if (!this.mode) {\n        throw new Error(\"Missing required 'mode'. Please set it to either 'property' or 'mpo'.\");\n      }\n      if (!this.propertyid && this.mode === 'property' && !this.p) {\n        throw new Error('Missing Property ID or aname');\n      }\n      if (this.mode === 'property') {\n        const property = await this.propertyService.getExposedProperty({\n          id: Number(this.propertyid ?? 0),\n          aname: this.p,\n          language: this.language,\n          is_backend: true,\n        });\n        this.propertyID = property.My_Result.id;\n      }\n      const requests: Promise<unknown>[] = [, this.roomService.fetchLanguage(this.language)];\n      if (this.mode === 'mpo') {\n        requests.unshift(this.propertyService.getExposedAllowedProperties());\n        const [properties] = await Promise.all(requests);\n        this.allowedProperties = [...(properties as any)];\n      }\n\n      this.baseFilters = { ...this.baseFilters, LIST_AC_ID: this.allowedProperties?.map(p => p.id) };\n      this.channelSalesFilters = { ...this.baseFilters };\n\n      await this.getChannelSales();\n    } catch (error) {\n      console.log(error);\n    } finally {\n      this.isPageLoading = false;\n    }\n  }\n\n  private async getChannelSales(isExportToExcel = false) {\n    try {\n      const { include_previous_year, LIST_AC_ID, ...filterParams } = this.channelSalesFilters;\n      this.isLoading = isExportToExcel ? 'export' : 'filter';\n      const currentSales = await this.propertyService.getChannelSales({\n        is_export_to_excel: isExportToExcel,\n        ...filterParams,\n        AC_ID: this.propertyID ? this.propertyID.toString() : undefined,\n        ...filterParams,\n        LIST_AC_ID: this.propertyID ? null : LIST_AC_ID,\n      });\n      const shouldFetchPreviousYear = !isExportToExcel && include_previous_year;\n      let enrichedSales: ChannelReportResult = [];\n      if (shouldFetchPreviousYear) {\n        const previousYearSales = await this.propertyService.getChannelSales({\n          AC_ID: this.propertyID ? this.propertyID.toString() : undefined,\n          ...filterParams,\n          LIST_AC_ID: this.propertyID ? null : LIST_AC_ID,\n          FROM_DATE: moment(filterParams.FROM_DATE).subtract(1, 'year').format('YYYY-MM-DD'),\n          TO_DATE: moment(filterParams.TO_DATE).subtract(1, 'year').format('YYYY-MM-DD'),\n        });\n\n        enrichedSales = currentSales.map(current => {\n          const previous = previousYearSales.find(prev => prev.SOURCE.toLowerCase() === current.SOURCE.toLowerCase());\n          return {\n            ...current,\n            last_year: previous ? previous : null,\n          };\n        });\n      } else {\n        enrichedSales = currentSales.map(record => ({\n          ...record,\n          last_year: null,\n        }));\n      }\n      /**\n       * Groups sales records by SOURCE and currency.id, summing numeric fields\n       * and recalculating PCT based on the total REVENUE.\n       */\n      const groupSalesRecordsBySource = (records: ChannelReportResult): ChannelReportResult => {\n        if (!records || records.length === 0) return records;\n\n        // Helper to extract currency ID from various possible formats\n        const getCurrencyId = (r: ChannelReport): string | null => {\n          return r?.currency ?? null;\n        };\n\n        // Create unique key for grouping\n        const createKey = (r: ChannelReport): string => {\n          const source = r.SOURCE.toString().toLowerCase().trim();\n          const currencyId = getCurrencyId(r);\n          return `${source}__${currencyId ?? 'null'}`;\n        };\n\n        // Sum two values safely\n        const sumValues = (a: number | undefined, b: number | undefined): number => {\n          return (a ?? 0) + (b ?? 0);\n        };\n\n        // Merge numeric fields from last_year objects\n        const mergeLastYear = (base: ChannelReport['last_year'], incoming: ChannelReport['last_year']): ChannelReport['last_year'] => {\n          if (!incoming) return base;\n          if (!base) return { ...incoming };\n\n          return {\n            NIGHTS: sumValues(base.NIGHTS, incoming.NIGHTS),\n            PCT: sumValues(base.PCT, incoming.PCT), // Will recalculate later\n            REVENUE: sumValues(base.REVENUE, incoming.REVENUE),\n            SOURCE: base.SOURCE,\n            PROPERTY_ID: base.PROPERTY_ID,\n            PROPERTY_NAME: base.PROPERTY_NAME,\n            currency: base.currency,\n          };\n        };\n\n        // Group records by key\n        const grouped = new Map<string, ChannelReport>();\n\n        for (const record of records) {\n          const key = createKey(record);\n          const existing = grouped.get(key);\n\n          if (!existing) {\n            // First record for this key - clone it\n            grouped.set(key, { ...record });\n          } else {\n            // Merge with existing record\n            const merged: ChannelReport = {\n              ...existing,\n              NIGHTS: sumValues(existing.NIGHTS, record.NIGHTS),\n              PCT: 0, // Will recalculate after summing all REVENUE\n              REVENUE: sumValues(existing.REVENUE, record.REVENUE),\n              last_year: mergeLastYear(existing.last_year, record.last_year),\n            };\n            grouped.set(key, merged);\n          }\n        }\n\n        // Convert to array\n        const result = Array.from(grouped.values());\n\n        // Recalculate PCT based on total REVENUE\n        const totalRevenue = result.reduce((sum, r) => sum + (r.REVENUE ?? 0), 0);\n\n        if (totalRevenue > 0) {\n          for (const record of result) {\n            record.PCT = (record.REVENUE / totalRevenue) * 100;\n\n            // Also recalculate last_year PCT if it exists\n            if (record.last_year) {\n              const lastYearTotal = result.reduce((sum, r) => sum + (r.last_year?.REVENUE ?? 0), 0);\n              if (lastYearTotal > 0) {\n                record.last_year.PCT = (record.last_year.REVENUE / lastYearTotal) * 100;\n              }\n            }\n          }\n        }\n\n        return result;\n      };\n\n      this.salesData = [...groupSalesRecordsBySource(enrichedSales)];\n    } catch (error) {\n      console.error('Failed to fetch sales data:', error);\n    } finally {\n      this.isLoading = null;\n    }\n  }\n  render() {\n    if (this.isPageLoading) {\n      return <ir-loading-screen></ir-loading-screen>;\n    }\n    return (\n      <Host>\n        <ir-toast></ir-toast>\n        <ir-interceptor></ir-interceptor>\n        <section class=\"p-2 d-flex flex-column\" style={{ gap: '1rem' }}>\n          <div class=\"d-flex align-items-center justify-content-between\">\n            <h3 class=\"mb-1 mb-md-0\">Sales by Channel</h3>\n            <ir-button\n              size=\"sm\"\n              btn_color=\"outline\"\n              isLoading={this.isLoading === 'export'}\n              text={locales.entries.Lcz_Export}\n              onClickHandler={async e => {\n                e.stopImmediatePropagation();\n                e.stopPropagation();\n                await this.getChannelSales(true);\n              }}\n              btnStyle={{ height: '100%' }}\n              iconPosition=\"right\"\n              icon_name=\"file\"\n              icon_style={{ '--icon-size': '14px' }}\n            ></ir-button>\n          </div>\n          {/* <ir-sales-by-country-summary salesReports={this.salesData}></ir-sales-by-country-summary> */}\n          <div class=\"d-flex flex-column flex-lg-row mt-1 \" style={{ gap: '1rem' }}>\n            <ir-sales-by-channel-filters\n              isLoading={this.isLoading === 'filter'}\n              onApplyFilters={e => {\n                e.stopImmediatePropagation();\n                e.stopPropagation();\n                this.channelSalesFilters = { ...e.detail };\n                this.getChannelSales();\n              }}\n              allowedProperties={this.allowedProperties}\n              baseFilters={this.baseFilters}\n            ></ir-sales-by-channel-filters>\n            <ir-sales-by-channel-table mode={this.mode} allowedProperties={this.allowedProperties} class=\"card mb-0\" records={this.salesData}></ir-sales-by-channel-table>\n          </div>\n        </section>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n","import Token from '@/models/Token';\nimport { PropertyService } from '@/services/property.service';\nimport { RoomService } from '@/services/room.service';\nimport locales from '@/stores/locales.store';\nimport { Component, Host, Prop, State, Watch, h } from '@stencil/core';\nimport { BaseSalesRecord, CountrySalesFilter, MappedCountries, SalesRecord } from './types';\nimport moment from 'moment';\nimport { v4 } from 'uuid';\nimport { BookingService } from '@/services/booking.service';\nimport { ICountry } from '@/models/IBooking';\n\n@Component({\n  tag: 'ir-sales-by-country',\n  styleUrl: 'ir-sales-by-country.css',\n  scoped: true,\n})\nexport class IrSalesByCountry {\n  @Prop() language: string = '';\n  @Prop() ticket: string = '';\n  @Prop() propertyid: number;\n  @Prop() p: string;\n\n  @State() isLoading: 'filter' | 'export' | null = null;\n  @State() isPageLoading = true;\n  @State() property_id: number;\n  @State() salesData: SalesRecord[];\n  @State() salesFilters: CountrySalesFilter;\n  @State() countries: MappedCountries = new Map();\n\n  private token = new Token();\n  private roomService = new RoomService();\n  private propertyService = new PropertyService();\n  private bookingService = new BookingService();\n\n  private baseFilters = {\n    FROM_DATE: moment().add(-7, 'days').format('YYYY-MM-DD'),\n    TO_DATE: moment().format('YYYY-MM-DD'),\n    BOOK_CASE: '001',\n    WINDOW: 7,\n    include_previous_year: false,\n  };\n\n  componentWillLoad() {\n    this.salesFilters = this.baseFilters;\n    if (this.ticket) {\n      this.token.setToken(this.ticket);\n      this.initializeApp();\n    }\n  }\n  @Watch('ticket')\n  ticketChanged(newValue: string, oldValue: string) {\n    if (newValue === oldValue) {\n      return;\n    }\n    this.token.setToken(this.ticket);\n    this.initializeApp();\n  }\n  private async initializeApp() {\n    try {\n      let propertyId = this.propertyid;\n      if (!this.propertyid && !this.p) {\n        throw new Error('Property ID or username is required');\n      }\n      // let roomResp = null;\n      if (!propertyId) {\n        console.log(propertyId);\n        const propertyData = await this.roomService.getExposedProperty({\n          id: 0,\n          aname: this.p,\n          language: this.language,\n          is_backend: true,\n          include_units_hk_status: true,\n        });\n        // roomResp = propertyData;\n        propertyId = propertyData.My_Result.id;\n      }\n      this.property_id = propertyId;\n      const requests = [this.bookingService.getCountries(this.language), this.roomService.fetchLanguage(this.language), this.getCountrySales()];\n      if (this.propertyid) {\n        requests.push(\n          this.roomService.getExposedProperty({\n            id: this.propertyid,\n            language: this.language,\n            is_backend: true,\n            include_units_hk_status: true,\n          }),\n        );\n      }\n\n      const [countries] = await Promise.all(requests);\n      const mappedCountries = new Map();\n      (countries as ICountry[]).map(country => {\n        mappedCountries.set(country.id, {\n          flag: country.flag,\n          name: country.name,\n        });\n      });\n      this.countries = mappedCountries;\n    } catch (error) {\n      console.log(error);\n    } finally {\n      this.isPageLoading = false;\n    }\n  }\n\n  private async getCountrySales(isExportToExcel = false) {\n    const formatSalesData = (data): Omit<BaseSalesRecord, 'id'> => {\n      return {\n        country: data.COUNTRY,\n        country_id: data.COUNTRY_ID,\n        nights: data.NIGHTS,\n        percentage: data.PCT,\n        revenue: data.REVENUE,\n        number_of_guests: data.Total_Guests,\n      };\n    };\n    try {\n      const { include_previous_year, ...filterParams } = this.salesFilters;\n      this.isLoading = isExportToExcel ? 'export' : 'filter';\n\n      const currentSales = await this.propertyService.getCountrySales({\n        AC_ID: this.property_id,\n        is_export_to_excel: isExportToExcel,\n        ...filterParams,\n      });\n\n      const shouldFetchPreviousYear = !isExportToExcel && include_previous_year;\n\n      let enrichedSales: SalesRecord[] = [];\n\n      if (shouldFetchPreviousYear) {\n        const previousYearSales = await this.propertyService.getCountrySales({\n          AC_ID: this.property_id,\n          is_export_to_excel: false,\n          ...filterParams,\n          FROM_DATE: moment(filterParams.FROM_DATE).subtract(1, 'year').format('YYYY-MM-DD'),\n          TO_DATE: moment(filterParams.TO_DATE).subtract(1, 'year').format('YYYY-MM-DD'),\n        });\n\n        enrichedSales = currentSales.map(current => {\n          const previous = previousYearSales.find(prev => prev.COUNTRY.toLowerCase() === current.COUNTRY.toLowerCase());\n          return {\n            id: v4(),\n            ...formatSalesData(current),\n            last_year: previous ? formatSalesData(previous) : null,\n          };\n        });\n      } else {\n        enrichedSales = currentSales.map(record => ({\n          id: v4(),\n          ...formatSalesData(record),\n          last_year: null,\n        }));\n      }\n\n      // this.salesData = enrichedSales.sort((a, b) => {\n      //   if (a.country_id === 0) return -1;\n      //   if (b.country_id === 0) return 1;\n      //   return 0;\n      // });\n      this.salesData = [...enrichedSales];\n    } catch (error) {\n      console.error('Failed to fetch sales data:', error);\n    } finally {\n      this.isLoading = null;\n    }\n  }\n  render() {\n    if (this.isPageLoading) {\n      return <ir-loading-screen></ir-loading-screen>;\n    }\n    return (\n      <Host>\n        <ir-toast></ir-toast>\n        <ir-interceptor></ir-interceptor>\n        <section class=\"p-2 d-flex flex-column\" style={{ gap: '1rem' }}>\n          <div class=\"d-flex align-items-center justify-content-between\">\n            <h3 class=\"mb-1 mb-md-0\">Sales by Country</h3>\n            <ir-button\n              size=\"sm\"\n              btn_color=\"outline\"\n              isLoading={this.isLoading === 'export'}\n              text={locales.entries.Lcz_Export}\n              onClickHandler={async e => {\n                e.stopImmediatePropagation();\n                e.stopPropagation();\n                await this.getCountrySales(true);\n              }}\n              btnStyle={{ height: '100%' }}\n              iconPosition=\"right\"\n              icon_name=\"file\"\n              icon_style={{ '--icon-size': '14px' }}\n            ></ir-button>\n          </div>\n          <ir-sales-by-country-summary salesReports={this.salesData}></ir-sales-by-country-summary>\n          <div class=\"d-flex flex-column flex-lg-row mt-1 \" style={{ gap: '1rem' }}>\n            <ir-sales-filters\n              isLoading={this.isLoading === 'filter'}\n              onApplyFilters={e => {\n                e.stopImmediatePropagation();\n                e.stopPropagation();\n                this.salesFilters = e.detail;\n                this.getCountrySales();\n              }}\n              class=\"filters-card\"\n              baseFilters={this.baseFilters}\n            ></ir-sales-filters>\n            <ir-sales-table mappedCountries={this.countries} class=\"card mb-0\" records={this.salesData}></ir-sales-table>\n          </div>\n        </section>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n  height: 100%;\n}\n","import Token from '@/models/Token';\nimport { User } from '@/models/Users';\nimport { BookingService } from '@/services/booking.service';\nimport { RoomService } from '@/services/room.service';\nimport { UserService } from '@/services/user.service';\nimport { Component, Host, Listen, Prop, State, Watch, h } from '@stencil/core';\nimport { AllowedUser } from './types';\nimport { bookingReasons } from '@/models/IBooking';\nimport { io, Socket } from 'socket.io-client';\nimport locales from '@/stores/locales.store';\n\n@Component({\n  tag: 'ir-user-management',\n  styleUrl: 'ir-user-management.css',\n  scoped: true,\n})\nexport class IrUserManagement {\n  @Prop() language: string = '';\n  @Prop() baseUrl: string;\n  @Prop() ticket: string;\n  @Prop() propertyid: number;\n  @Prop() p: string;\n  @Prop() isSuperAdmin: boolean = true;\n  @Prop() userTypeCode: string | number;\n  @Prop() baseUserTypeCode: string | number;\n  @Prop() userId: string | number;\n\n  @State() isLoading = true;\n  @State() users: User[] = [];\n  @State() property_id: number;\n  @State() allowedUsersTypes: AllowedUser[] = [];\n\n  private token = new Token();\n  private roomService = new RoomService();\n  private userService = new UserService();\n  private bookingService = new BookingService();\n\n  private userTypes: Map<number | string, string> = new Map();\n  private socket: Socket;\n\n  private superAdminId = '5';\n\n  componentWillLoad() {\n    if (this.baseUrl) {\n      this.token.setBaseUrl(this.baseUrl);\n    }\n    if (this.ticket) {\n      this.token.setToken(this.ticket);\n      this.initializeApp();\n    }\n  }\n\n  @Watch('ticket')\n  ticketChanged(newValue: string, oldValue: string) {\n    if (newValue === oldValue) {\n      return;\n    }\n    this.token.setToken(this.ticket);\n    this.initializeApp();\n  }\n\n  @Listen('resetData')\n  async handleResetData(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    await this.fetchUsers();\n  }\n\n  private async initializeApp() {\n    try {\n      if (this.baseUrl) {\n        this.token.setBaseUrl(this.baseUrl);\n      }\n      this.isLoading = true;\n      let propertyId = this.propertyid;\n      if (!this.propertyid && !this.p) {\n        throw new Error('Property ID or username is required');\n      }\n      // let roomResp = null;\n      if (!propertyId) {\n        console.log(propertyId);\n        const propertyData = await this.roomService.getExposedProperty({\n          id: 0,\n          aname: this.p,\n          language: this.language,\n          is_backend: true,\n          include_units_hk_status: true,\n        });\n        // roomResp = propertyData;\n        propertyId = propertyData.My_Result.id;\n      }\n      this.property_id = propertyId;\n      const requests = [this.fetchUserTypes(), this.fetchUsers(), this.roomService.fetchLanguage(this.language, ['_USER_MGT'])];\n      if (this.propertyid) {\n        requests.push(\n          this.roomService.getExposedProperty({\n            id: this.propertyid,\n            language: this.language,\n            is_backend: true,\n            include_units_hk_status: true,\n          }),\n        );\n      }\n\n      await Promise.all(requests);\n      this.socket = io('https://realtime.igloorooms.com/');\n      this.socket.on('MSG', async msg => {\n        await this.handleSocketMessage(msg);\n      });\n    } catch (error) {\n      console.log(error);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  private async handleSocketMessage(msg: string) {\n    const msgAsObject = JSON.parse(msg);\n    if (!msgAsObject) {\n      return;\n    }\n\n    const { REASON, KEY, PAYLOAD }: { REASON: bookingReasons; KEY: any; PAYLOAD: any } = msgAsObject;\n\n    if (KEY.toString() !== this.property_id.toString()) {\n      return;\n    }\n\n    let result = JSON.parse(PAYLOAD);\n    console.log(KEY, result);\n    // const reasonHandlers: Partial<Record<bookingReasons, Function>> = {\n    //   DORESERVATION: this.updateUserVerificationStatus,\n    // };\n    const reasonHandlers: Partial<Record<bookingReasons, Function>> = {\n      EMAIL_VERIFIED: this.updateUserVerificationStatus,\n    };\n    const handler = reasonHandlers[REASON];\n    if (handler) {\n      await handler.call(this, result);\n    } else {\n      console.warn(`Unhandled REASON: ${REASON}`);\n    }\n  }\n\n  public updateUserVerificationStatus(result: { id: string | number }) {\n    const users = [...this.users];\n    const idx = users.findIndex(u => u.id === result.id);\n    if (idx === -1) {\n      console.warn(`User ${result.id} not found`);\n      return;\n    }\n    users[idx] = {\n      ...users[idx],\n      is_email_verified: true,\n    };\n    this.users = users;\n  }\n\n  private async fetchUsers() {\n    const users = await this.userService.getExposedPropertyUsers({ property_id: this.propertyid });\n    this.users = [...users].sort((u1: User, u2: User) => {\n      const priority = (u: User) => {\n        const t = u.type.toString();\n        if (t === this.superAdminId) return 0;\n        if (t === '17') return 1;\n        return 2;\n      };\n      //sort by priority\n      const p1 = priority(u1),\n        p2 = priority(u2);\n      if (p1 !== p2) {\n        return p1 - p2;\n      }\n      // //sort by user id\n      // if (p1 === 1) {\n      //   const id1 = u1.id.toString(),\n      //     id2 = u2.id.toString(),\n      //     me = this.userId.toString();\n      //   if (id1 === me) return -1; // u1 is me  goes before u2\n      //   if (id2 === me) return 1; // u2 is me  u1 goes after\n      // }\n\n      // 3) sort by username\n      return u1.username.localeCompare(u2.username);\n    });\n  }\n  private async fetchUserTypes() {\n    const res = await Promise.all([this.bookingService.getSetupEntriesByTableName('_USER_TYPE'), this.bookingService.getLov()]);\n    const allowedUsers = res[1]?.My_Result?.allowed_user_types;\n    for (const e of res[0]) {\n      const value = e[`CODE_VALUE_${this.language?.toUpperCase() ?? 'EN'}`];\n      if (allowedUsers.find(f => f.code === e.CODE_NAME)) {\n        this.allowedUsersTypes.push({ code: e.CODE_NAME, value });\n      }\n      this.userTypes.set(e.CODE_NAME.toString(), value);\n    }\n  }\n  disconnectedCallback() {\n    this.socket.disconnect();\n  }\n  render() {\n    if (this.isLoading) {\n      return (\n        <Host>\n          <ir-toast></ir-toast>\n          <ir-interceptor></ir-interceptor>\n          <ir-loading-screen></ir-loading-screen>\n        </Host>\n      );\n    }\n    return (\n      <Host>\n        <ir-toast></ir-toast>\n        <ir-interceptor suppressToastEndpoints={['/Change_User_Pwd', '/Handle_Exposed_User']}></ir-interceptor>\n        <section class=\"p-2 d-flex flex-column\" style={{ gap: '1rem' }}>\n          <div class=\"d-flex  pb-2 align-items-center justify-content-between\">\n            <h3 class=\"mb-1 mb-md-0\">{locales.entries.Lcz_ExtranetUsers}</h3>\n          </div>\n\n          <div class=\"\" style={{ gap: '1rem' }}>\n            <ir-user-management-table\n              property_id={this.property_id}\n              baseUserTypeCode={this.baseUserTypeCode}\n              allowedUsersTypes={this.allowedUsersTypes}\n              userTypeCode={this.userTypeCode}\n              haveAdminPrivileges={[this.superAdminId, '17'].includes(this.userTypeCode?.toString())}\n              userTypes={this.userTypes}\n              class=\"card\"\n              isSuperAdmin={this.userTypeCode?.toString() === this.superAdminId}\n              users={this.users}\n            ></ir-user-management-table>\n          </div>\n        </section>\n      </Host>\n    );\n  }\n}\n"],"version":3}