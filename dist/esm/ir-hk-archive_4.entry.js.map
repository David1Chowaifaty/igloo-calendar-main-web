{"file":"ir-hk-archive.ir-tasks-filters.ir-tasks-header.ir-tasks-table.entry.js","mappings":"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","names":["moment"],"sources":["src/components/ir-housekeeping/ir-hk-tasks/ir-hk-archive/ir-hk-archive.css?tag=ir-hk-archive&encapsulation=scoped","src/components/ir-housekeeping/ir-hk-tasks/ir-hk-archive/ir-hk-archive.tsx","src/components/ir-housekeeping/ir-hk-tasks/ir-tasks-filters/ir-tasks-filters.css?tag=ir-tasks-filters&encapsulation=scoped","src/components/ir-housekeeping/ir-hk-tasks/ir-tasks-filters/ir-tasks-filters.tsx","src/components/ir-housekeeping/ir-hk-tasks/ir-tasks-header/ir-tasks-header.css?tag=ir-tasks-header&encapsulation=scoped","src/components/ir-housekeeping/ir-hk-tasks/ir-tasks-header/ir-tasks-header.tsx","src/components/ir-housekeeping/ir-hk-tasks/ir-tasks-table/ir-tasks-table.css?tag=ir-tasks-table&encapsulation=scoped","src/components/ir-housekeeping/ir-hk-tasks/ir-tasks-table/ir-tasks-table.tsx"],"sourcesContent":[":host {\r\n  display: block;\r\n}\r\n.unit-name {\r\n  max-width: 100px;\r\n  display: inline-block;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n  padding: 0 !important;\r\n  margin: 0 !important;\r\n  text-align: start;\r\n}\r\n.table th,\r\n.table td {\r\n  white-space: nowrap;\r\n  width: fit-content;\r\n  max-width: max-content !important;\r\n  /* background: white; */\r\n  border: 0;\r\n  text-align: start;\r\n  background-color: white;\r\n  padding: 0.25rem !important;\r\n}\r\n.table th:first-child,\r\n.table td:first-child {\r\n  padding-left: 0 !important;\r\n}\r\n","// import { HouseKeepingService } from '@/services/housekeeping.service';\r\n// import housekeeping_store from '@/stores/housekeeping.store';\r\nimport { ArchivedTask } from '@/models/housekeeping';\r\nimport { HouseKeepingService } from '@/services/housekeeping.service';\r\nimport calendar_data from '@/stores/calendar-data';\r\nimport housekeeping_store from '@/stores/housekeeping.store';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\nimport locales from '@/stores/locales.store';\r\nimport { downloadFile } from '@/utils/utils';\r\nimport { Component, Fragment, Host, Listen, Prop, State, h } from '@stencil/core';\r\nimport moment from 'moment';\r\nimport { v4 } from 'uuid';\r\nexport type ArchivesFilters = {\r\n  from_date: string;\r\n  to_date: string;\r\n  filtered_by_hkm?: number[];\r\n  filtered_by_unit?: number[];\r\n};\r\n@Component({\r\n  tag: 'ir-hk-archive',\r\n  styleUrl: 'ir-hk-archive.css',\r\n  scoped: true,\r\n})\r\nexport class IrHkArchive {\r\n  @Prop() propertyId: string | number;\r\n  @Prop() language: string = 'en';\r\n  @Prop() ticket: string;\r\n\r\n  @State() filters: ArchivesFilters = {\r\n    from_date: null,\r\n    to_date: null,\r\n    filtered_by_hkm: [],\r\n    filtered_by_unit: [],\r\n  };\r\n  @State() data: (ArchivedTask & { id: string })[] = [];\r\n  @State() isLoading: 'search' | 'excel' | null = null;\r\n  @State() fetchedData: boolean = false;\r\n  @State() selectedBooking: number | string | null;\r\n  private minSelectableDate = moment().subtract(90, 'days').toDate();\r\n  private houseKeepingService = new HouseKeepingService();\r\n  private units: { id: number; name: string }[] = [];\r\n  private handleSideBarToggle(e) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    this.selectedBooking = null;\r\n  }\r\n\r\n  componentWillLoad() {\r\n    this.setUpUnits();\r\n  }\r\n  private setUpUnits() {\r\n    const units = [];\r\n    calendar_data.roomsInfo.forEach(r => {\r\n      r.physicalrooms.forEach(room => {\r\n        units.push({ id: room.id, name: room.name });\r\n      });\r\n    });\r\n    this.units = units;\r\n  }\r\n\r\n  private async getArchivedTasks(export_to_excel: boolean = false) {\r\n    const res = await this.houseKeepingService.getArchivedHKTasks({ property_id: Number(this.propertyId), ...this.filters, is_export_to_excel: export_to_excel });\r\n    this.data = [...(res?.tasks || [])]?.map(t => ({ ...t, id: v4() }));\r\n    this.fetchedData = true;\r\n    return { tasks: res?.tasks, url: res?.url };\r\n  }\r\n\r\n  @Listen('dateRangeChanged')\r\n  handleDateRangeChange(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    const { fromDate, toDate } = e.detail;\r\n    this.updateFilters({\r\n      from_date: fromDate ? fromDate.format('YYYY-MM-DD') : null,\r\n      to_date: toDate ? toDate.format('YYYY-MM-DD') : null,\r\n    });\r\n  }\r\n\r\n  private updateFilters(props: Partial<ArchivesFilters>) {\r\n    this.filters = { ...this.filters, ...props };\r\n  }\r\n  async searchArchive(e: CustomEvent) {\r\n    try {\r\n      e.stopImmediatePropagation();\r\n      e.stopPropagation();\r\n      this.isLoading = 'search';\r\n      await this.getArchivedTasks();\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      this.isLoading = null;\r\n    }\r\n  }\r\n\r\n  async exportArchive(e: CustomEvent) {\r\n    try {\r\n      e.stopImmediatePropagation();\r\n      e.stopPropagation();\r\n      this.isLoading = 'excel';\r\n      const { url } = await this.getArchivedTasks(true);\r\n      downloadFile(url);\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      this.isLoading = null;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <ir-title class=\"px-1\" label=\"Cleaning Archives (90 days)\" displayContext=\"sidebar\"></ir-title>\r\n        <section class=\"px-1\">\r\n          <div class=\"d-flex\">\r\n            <ir-select\r\n              class=\"w-100\"\r\n              showFirstOption={false}\r\n              LabelAvailable={false}\r\n              data={[\r\n                { text: 'All units', value: '000' },\r\n                ,\r\n                ...this.units\r\n                  ?.map(v => ({\r\n                    text: v.name,\r\n                    value: v.id.toString(),\r\n                  }))\r\n                  .sort((a, b) => a.text.toLowerCase().localeCompare(b.text.toLowerCase())),\r\n              ]}\r\n              onSelectChange={e => {\r\n                e.stopImmediatePropagation();\r\n                e.stopPropagation();\r\n                if (e.detail === '000') {\r\n                  this.updateFilters({ filtered_by_unit: [] });\r\n                } else {\r\n                  this.updateFilters({ filtered_by_unit: [e.detail] });\r\n                }\r\n              }}\r\n            ></ir-select>\r\n            {housekeeping_store?.hk_criteria?.housekeepers.length > 1 && (\r\n              <ir-select\r\n                class=\"ml-1 w-100\"\r\n                selectedValue={this.filters?.filtered_by_hkm?.length === housekeeping_store.hk_criteria.housekeepers.length ? '000' : this.filters?.filtered_by_hkm[0]?.toString()}\r\n                LabelAvailable={false}\r\n                showFirstOption={false}\r\n                data={[\r\n                  { text: 'All housekeepers', value: '000' },\r\n                  ...housekeeping_store?.hk_criteria?.housekeepers\r\n                    .map(v => ({\r\n                      text: v.name,\r\n                      value: v.id.toString(),\r\n                    }))\r\n                    .sort((a, b) => a.text.toLowerCase().localeCompare(b.text.toLowerCase())),\r\n                ]}\r\n                onSelectChange={e => {\r\n                  if (e.detail === '000') {\r\n                    this.updateFilters({ filtered_by_hkm: [] });\r\n                  } else {\r\n                    this.updateFilters({ filtered_by_hkm: [e.detail] });\r\n                  }\r\n                }}\r\n              ></ir-select>\r\n            )}\r\n          </div>\r\n          <div class=\"d-flex mt-1 align-items-center\">\r\n            {/* <igl-date-range\r\n              class=\"mr-1\"\r\n              dateLabel={locales.entries.Lcz_Dates}\r\n              minDate={moment().add(-90, 'days').format('YYYY-MM-DD')}\r\n              defaultData={{\r\n                fromDate: this.filters.from_date,\r\n                toDate: this.filters.to_date,\r\n              }}\r\n            ></igl-date-range> */}\r\n            <ir-range-picker\r\n              minDate={this.minSelectableDate}\r\n              class=\"mr-1\"\r\n              fromDate={this.filters.from_date ? moment(this.filters.from_date, 'YYYY-MM-DD') : null}\r\n              toDate={this.filters.to_date ? moment(this.filters.to_date, 'YYYY-MM-DD') : null}\r\n            ></ir-range-picker>\r\n            <ir-button\r\n              title={locales.entries?.Lcz_Search}\r\n              variant=\"icon\"\r\n              icon_name=\"search\"\r\n              class=\"mr-1\"\r\n              isLoading={this.isLoading === 'search'}\r\n              onClickHandler={e => this.searchArchive(e)}\r\n            ></ir-button>\r\n            <ir-button\r\n              title={locales.entries?.Lcz_ExportToExcel}\r\n              variant=\"icon\"\r\n              icon_name=\"file\"\r\n              isLoading={this.isLoading === 'excel'}\r\n              onClickHandler={e => this.exportArchive(e)}\r\n            ></ir-button>\r\n          </div>\r\n          {this.fetchedData && (\r\n            <Fragment>\r\n              {this.data?.length === 0 && !isRequestPending('/Get_Archived_HK_Tasks') ? (\r\n                <p class={'text-center mt-2'}>{locales.entries.Lcz_NoResultsFound}</p>\r\n              ) : (\r\n                <table class=\"mt-2 table\">\r\n                  <thead>\r\n                    <th class=\"pl-0\">{locales.entries.Lcz_Period}</th>\r\n                    <th>{locales.entries.Lcz_Housekeeper}</th>\r\n                    <th>{locales.entries.Lcz_Unit}</th>\r\n                    <th>{locales.entries.Lcz_BookingNumber}</th>\r\n                  </thead>\r\n                  <tbody>\r\n                    {this.data?.map(d => (\r\n                      <tr key={d.id}>\r\n                        <td class=\"pl-0\">{d.date}</td>\r\n                        <td>{d.house_keeper}</td>\r\n                        <td>\r\n                          <ir-tooltip message={d.unit} customSlot containerStyle={{ width: 'fit-content' }}>\r\n                            <span slot=\"tooltip-trigger\" class={`unit-name`}>\r\n                              {d.unit}\r\n                            </span>\r\n                          </ir-tooltip>\r\n                        </td>\r\n                        <td>\r\n                          {d.booking_nbr ? (\r\n                            <ir-button\r\n                              btn_color=\"link\"\r\n                              btnStyle={{\r\n                                width: 'fit-content',\r\n                                padding: '0',\r\n                                margin: '0',\r\n                              }}\r\n                              labelStyle={{\r\n                                padding: '0',\r\n                              }}\r\n                              text={d.booking_nbr.toString()}\r\n                              onClick={() => {\r\n                                this.selectedBooking = d.booking_nbr;\r\n                                // window.open(`https://x.igloorooms.com/manage/acbookingeditV2.aspx?BN=${d.booking_nbr}`, '_blank');\r\n                              }}\r\n                            ></ir-button>\r\n                          ) : (\r\n                            locales.entries.Lcz_WasVacant\r\n                          )}\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              )}\r\n            </Fragment>\r\n          )}\r\n        </section>\r\n        <ir-sidebar\r\n          onIrSidebarToggle={this.handleSideBarToggle.bind(this)}\r\n          open={!!this.selectedBooking}\r\n          showCloseButton={false}\r\n          sidebarStyles={{\r\n            width: '80rem',\r\n            background: '#F2F3F8',\r\n          }}\r\n        >\r\n          {this.selectedBooking && (\r\n            <ir-booking-details\r\n              slot=\"sidebar-body\"\r\n              hasPrint\r\n              hasReceipt\r\n              hasCloseButton\r\n              onCloseSidebar={() => (this.selectedBooking = null)}\r\n              is_from_front_desk\r\n              propertyid={Number(this.propertyId)}\r\n              hasRoomEdit\r\n              hasRoomDelete\r\n              bookingNumber={this.selectedBooking?.toString()}\r\n              language={this.language}\r\n              hasRoomAdd\r\n              ticket={this.ticket}\r\n            ></ir-booking-details>\r\n          )}\r\n        </ir-sidebar>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  min-width: 20vw;\r\n  height: 100%;\r\n}\r\n@media (min-width: 768px) {\r\n  .collapse-btn {\r\n    display: none;\r\n  }\r\n  #hkTasksFiltersCollapse.collapse:not(.show) {\r\n    display: block;\r\n  }\r\n}\r\n","import { Component, Event, EventEmitter, h, Prop, State } from '@stencil/core';\r\nimport { TaskFilters } from '../types';\r\nimport housekeeping_store from '@/stores/housekeeping.store';\r\nimport locales from '@/stores/locales.store';\r\nexport type ModifiedTaskFilters = Omit<TaskFilters, 'housekeepers'> & { housekeepers: string };\r\n@Component({\r\n  tag: 'ir-tasks-filters',\r\n  styleUrl: 'ir-tasks-filters.css',\r\n  scoped: true,\r\n})\r\nexport class IrTasksFilters {\r\n  @Prop() isLoading: boolean;\r\n\r\n  @State() filters: ModifiedTaskFilters = {\r\n    cleaning_periods: {\r\n      code: '',\r\n    },\r\n    housekeepers: '000',\r\n    cleaning_frequencies: { code: '' },\r\n    dusty_units: { code: '' },\r\n    highlight_check_ins: { code: '' },\r\n  };\r\n\r\n  @State() collapsed: boolean = false;\r\n\r\n  @Event() applyFilters: EventEmitter<TaskFilters>;\r\n\r\n  private baseFilters: TaskFilters;\r\n\r\n  componentWillLoad() {\r\n    this.baseFilters = {\r\n      cleaning_periods: housekeeping_store?.hk_criteria?.cleaning_periods[0],\r\n      housekeepers: housekeeping_store.hk_criteria.housekeepers?.map(h => ({ id: h.id })),\r\n      cleaning_frequencies: housekeeping_store?.hk_criteria?.cleaning_frequencies[0],\r\n      dusty_units: housekeeping_store?.hk_criteria?.dusty_periods[0],\r\n      highlight_check_ins: housekeeping_store?.hk_criteria?.highlight_checkin_options[0],\r\n    };\r\n    this.filters = { ...this.baseFilters, housekeepers: '000' };\r\n  }\r\n\r\n  private updateFilter(params: Partial<ModifiedTaskFilters>) {\r\n    this.filters = { ...this.filters, ...params };\r\n  }\r\n  private applyFiltersEvt(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    this.applyFilters.emit({\r\n      ...this.filters,\r\n      housekeepers: this.filters.housekeepers === '000' ? this.baseFilters.housekeepers : [{ id: Number(this.filters.housekeepers) }],\r\n    });\r\n  }\r\n  private resetFilters(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    this.filters = { ...this.baseFilters, housekeepers: '000' };\r\n    this.applyFilters.emit({\r\n      ...this.filters,\r\n      housekeepers: this.filters.housekeepers === '000' ? this.baseFilters.housekeepers : [{ id: Number(this.filters.housekeepers) }],\r\n    });\r\n  }\r\n  render() {\r\n    return (\r\n      <div class=\"card mb-0 p-1 d-flex flex-column\">\r\n        <div class=\"d-flex align-items-center justify-content-between\">\r\n          <div class={'d-flex align-items-center'} style={{ gap: '0.5rem' }}>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" height={18} width={18}>\r\n              <path\r\n                fill=\"currentColor\"\r\n                d=\"M3.9 54.9C10.5 40.9 24.5 32 40 32l432 0c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9 320 448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6l0-79.1L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z\"\r\n              />\r\n            </svg>\r\n            <h4 class=\"m-0 p-0 flex-grow-1\">{locales.entries.Lcz_Filters}</h4>\r\n          </div>\r\n          <ir-button\r\n            variant=\"icon\"\r\n            id=\"drawer-icon\"\r\n            data-toggle=\"collapse\"\r\n            data-target=\"#hkTasksFiltersCollapse\"\r\n            aria-expanded={this.collapsed ? 'true' : 'false'}\r\n            aria-controls=\"hkTasksFiltersCollapse\"\r\n            class=\"mr-1 collapse-btn\"\r\n            icon_name={this.collapsed ? 'closed_eye' : 'open_eye'}\r\n            onClickHandler={() => {\r\n              this.collapsed = !this.collapsed;\r\n            }}\r\n            style={{ '--icon-size': '1.6rem' }}\r\n          ></ir-button>\r\n        </div>\r\n        <div class=\"m-0 p-0 collapse\" id=\"hkTasksFiltersCollapse\">\r\n          <div class=\"d-flex flex-column\" style={{ gap: '0.5rem' }}>\r\n            <fieldset class=\"pt-1\">\r\n              <p class=\"m-0 p-0\">{locales.entries.Lcz_Period}</p>\r\n              <ir-select\r\n                testId=\"period\"\r\n                selectedValue={this.filters?.cleaning_periods?.code}\r\n                LabelAvailable={false}\r\n                showFirstOption={false}\r\n                data={housekeeping_store?.hk_criteria?.cleaning_periods.map(v => ({\r\n                  text: v.description,\r\n                  value: v.code,\r\n                }))}\r\n                onSelectChange={e => {\r\n                  this.updateFilter({ cleaning_periods: { code: e.detail } });\r\n                }}\r\n              ></ir-select>\r\n            </fieldset>\r\n            {housekeeping_store?.hk_criteria?.housekeepers.length > 1 && (\r\n              <fieldset>\r\n                <p class=\"m-0 p-0\">{locales.entries.Lcz_Housekeepers}</p>\r\n                <ir-select\r\n                  testId=\"housekeepers\"\r\n                  selectedValue={this.filters?.housekeepers}\r\n                  LabelAvailable={false}\r\n                  showFirstOption={false}\r\n                  data={[\r\n                    { text: locales.entries.Lcz_Allhousekeepers, value: '000' },\r\n                    ...housekeeping_store?.hk_criteria?.housekeepers\r\n                      .map(v => ({\r\n                        text: v.name,\r\n                        value: v.id.toString(),\r\n                      }))\r\n                      .sort((a, b) => a.text.toLowerCase().localeCompare(b.text.toLowerCase())),\r\n                  ]}\r\n                  onSelectChange={e => {\r\n                    // if (e.detail === '000') {\r\n                    //   this.updateFilter({ housekeepers: { ids: this.baseFilters?.housekeepers?.ids } });\r\n                    // } else {\r\n                    //   this.updateFilter({ housekeepers: { ids: [e.detail] } });\r\n                    // }\r\n                    this.updateFilter({ housekeepers: e.detail });\r\n                  }}\r\n                ></ir-select>\r\n              </fieldset>\r\n            )}\r\n            <fieldset>\r\n              <p class=\"m-0 p-0\">{locales.entries.Lcz_CleaningFrequency}</p>\r\n              <ir-select\r\n                testId=\"cleaning_frequency\"\r\n                selectedValue={this.filters?.cleaning_frequencies?.code}\r\n                LabelAvailable={false}\r\n                showFirstOption={false}\r\n                data={housekeeping_store?.hk_criteria?.cleaning_frequencies.map(v => ({\r\n                  text: v.description,\r\n                  value: v.code,\r\n                }))}\r\n                onSelectChange={e => {\r\n                  this.updateFilter({ cleaning_frequencies: { code: e.detail } });\r\n                }}\r\n              ></ir-select>\r\n            </fieldset>\r\n            <fieldset>\r\n              <p class=\"m-0 p-0\">Include dusty units</p>\r\n              <ir-select\r\n                testId=\"dusty_units\"\r\n                showFirstOption={false}\r\n                LabelAvailable={false}\r\n                selectedValue={this.filters?.dusty_units?.code}\r\n                data={housekeeping_store.hk_criteria?.dusty_periods?.map(v => ({\r\n                  text: v.description,\r\n                  value: v.code,\r\n                }))}\r\n                onSelectChange={e => {\r\n                  e.stopImmediatePropagation();\r\n                  e.stopPropagation();\r\n                  this.updateFilter({ dusty_units: { code: e.detail } });\r\n                }}\r\n              ></ir-select>\r\n            </fieldset>\r\n            <fieldset class=\"mb-1\">\r\n              <p class=\"m-0 p-0\">{locales.entries['Lcz_HighlightCheck-insFrom']}</p>\r\n              <ir-select\r\n                testId=\"highlight_check_ins\"\r\n                selectedValue={this.filters?.highlight_check_ins?.code}\r\n                LabelAvailable={false}\r\n                showFirstOption={false}\r\n                onSelectChange={e => {\r\n                  this.updateFilter({ highlight_check_ins: { code: e.detail } });\r\n                }}\r\n                data={housekeeping_store.hk_criteria?.highlight_checkin_options?.map(v => ({\r\n                  text: v.description,\r\n                  value: v.code,\r\n                }))}\r\n              ></ir-select>\r\n            </fieldset>\r\n            <div class=\"d-flex align-items-center justify-content-end\" style={{ gap: '1rem' }}>\r\n              <ir-button\r\n                btn_type=\"button\"\r\n                data-testid=\"reset\"\r\n                text={locales.entries.Lcz_Reset}\r\n                size=\"sm\"\r\n                btn_color=\"secondary\"\r\n                onClickHandler={e => this.resetFilters(e)}\r\n              ></ir-button>\r\n              <ir-button\r\n                btn_type=\"button\"\r\n                data-testid=\"apply\"\r\n                isLoading={this.isLoading}\r\n                text={locales.entries.Lcz_Apply}\r\n                size=\"sm\"\r\n                onClickHandler={e => this.applyFiltersEvt(e)}\r\n              ></ir-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n","import locales from '@/stores/locales.store';\r\nimport { Component, Event, EventEmitter, h, Listen, Prop } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-tasks-header',\r\n  styleUrl: 'ir-tasks-header.css',\r\n  scoped: true,\r\n})\r\nexport class IrTasksHeader {\r\n  @Prop() isCleanedEnabled: boolean = false;\r\n\r\n  private btnRef: HTMLIrButtonElement;\r\n\r\n  @Event() headerButtonPress: EventEmitter<{ name: 'cleaned' | 'export' | 'archive' }>;\r\n\r\n  @Listen('animateCleanedButton', { target: 'body' })\r\n  handleCleanedButtonAnimation(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    this.btnRef.bounce();\r\n  }\r\n  render() {\r\n    return (\r\n      <div class=\"d-flex flex-column flex-md-row align-items-md-center justify-content-between\">\r\n        <h3 class=\"mb-1 mb-md-0\">Housekeeping Tasks</h3>\r\n        <div class=\"d-flex\" style={{ gap: '1rem' }}>\r\n          <ir-button\r\n            size=\"sm\"\r\n            btn_color=\"outline\"\r\n            text={locales.entries.Lcz_Export}\r\n            onClickHandler={e => {\r\n              e.stopImmediatePropagation();\r\n              e.stopPropagation();\r\n              this.headerButtonPress.emit({ name: 'export' });\r\n            }}\r\n            btnStyle={{ height: '100%' }}\r\n            iconPosition=\"right\"\r\n            icon_name=\"file\"\r\n            icon_style={{ '--icon-size': '14px' }}\r\n          ></ir-button>\r\n          <ir-button\r\n            size=\"sm\"\r\n            btn_color=\"outline\"\r\n            text={locales.entries.Lcz_Archives}\r\n            btnStyle={{ height: '100%' }}\r\n            onClickHandler={e => {\r\n              e.stopImmediatePropagation();\r\n              e.stopPropagation();\r\n              this.headerButtonPress.emit({ name: 'archive' });\r\n            }}\r\n          ></ir-button>\r\n          <ir-button\r\n            onClickHandler={e => {\r\n              e.stopImmediatePropagation();\r\n              e.stopPropagation();\r\n              this.headerButtonPress.emit({ name: 'cleaned' });\r\n            }}\r\n            btnStyle={{ height: '100%' }}\r\n            size=\"sm\"\r\n            btn_disabled={!this.isCleanedEnabled}\r\n            text={'Cleaned'}\r\n            ref={el => (this.btnRef = el)}\r\n          ></ir-button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.selected-row {\r\n  background-color: rgba(0, 0, 255, 0.1);\r\n}\r\n.selected-row:hover {\r\n  background-color: rgba(0, 0, 255, 0.15);\r\n}\r\n.header-content {\r\n  height: 100%;\r\n}\r\n.sortable {\r\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\r\n}\r\n.sortable svg {\r\n  color: var(--blue);\r\n}\r\n.task-row,\r\n.table th,\r\n.table td {\r\n  white-space: nowrap;\r\n  max-width: max-content !important;\r\n  /* background: white; */\r\n  border: 0;\r\n}\r\n.task-row {\r\n  padding: 0.25rem 0.5rem !important;\r\n}\r\n.extra-padding {\r\n  padding: 0.25rem 1rem !important;\r\n}\r\n.highlighted-unit {\r\n  background: #000;\r\n  color: white;\r\n  padding: 0.2rem 0.3rem;\r\n  border-radius: 4px;\r\n}\r\n.table th,\r\n.table td {\r\n  text-align: start;\r\n}\r\n.table-container {\r\n  max-height: 80vh;\r\n}\r\n/* td,\r\nth {\r\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\r\n  max-width: max-content !important;\r\n \r\n  text-align: start;\r\n}\r\ntr {\r\n  border-bottom: 1px solid #e0e0e0;\r\n} */\r\n.task-table-row {\r\n  background: white !important;\r\n}\r\n.task-table-row:hover {\r\n  background: #e2e6ea3f !important;\r\n}\r\n.selected {\r\n  background: #e3f3fa !important;\r\n}\r\n.sortable:hover {\r\n  color: #212529;\r\n  background-color: #e2e6ea;\r\n  border-color: #dae0e5;\r\n  cursor: pointer;\r\n}\r\n.sortable:active {\r\n  color: #212529;\r\n  background-color: #dae0e5;\r\n  border-color: #d3d9df;\r\n}\r\n","import { Component, Event, EventEmitter, Listen, Prop, State, Watch, h } from '@stencil/core';\r\nimport { Task } from '@/models/housekeeping';\r\nimport moment from 'moment';\r\nimport housekeeping_store from '@/stores/housekeeping.store';\r\nimport locales from '@/stores/locales.store';\r\n\r\n@Component({\r\n  tag: 'ir-tasks-table',\r\n  styleUrl: 'ir-tasks-table.css',\r\n  scoped: true,\r\n})\r\nexport class IrTasksTable {\r\n  @Prop({ mutable: true }) tasks: Task[] = [];\r\n\r\n  /**\r\n   * Tracks which task IDs are currently selected via checkboxes.\r\n   */\r\n  @State() selectedIds: Task['id'][] = [];\r\n\r\n  /**\r\n   * Controls whether the \"Confirm Clean\" modal is shown.\r\n   */\r\n  @State() showConfirmModal: boolean = false;\r\n\r\n  /**\r\n   * The key we are sorting by (e.g., \"date\", \"unit\", \"status\", \"housekeeper\").\r\n   */\r\n  @State() sortKey: string = 'date';\r\n\r\n  /**\r\n   * The sort direction: ASC or DESC.\r\n   */\r\n  @State() sortDirection: 'ASC' | 'DESC' = 'ASC';\r\n  @State() checkableTasks: Task[] = [];\r\n\r\n  @Event({ bubbles: true, composed: true }) animateCleanedButton: EventEmitter<null>;\r\n  @Event({ bubbles: true, composed: true }) rowSelectChange: EventEmitter<Task[]>;\r\n  @Event({ bubbles: true, composed: true }) sortingChanged: EventEmitter<{ field: string; direction: 'ASC' | 'DESC' }>;\r\n\r\n  componentWillLoad() {\r\n    this.sortTasks('date', 'ASC');\r\n    if (this.tasks) {\r\n      this.assignCheckableTasks();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sorts the tasks by the given key. If no direction is provided,\r\n   * it toggles between ascending and descending.\r\n   */\r\n  private handleSort(key: string) {\r\n    let newDirection = this.sortDirection;\r\n    // If we're clicking the same column, flip the direction. If a new column, default to ASC.\r\n    if (this.sortKey === key) {\r\n      newDirection = this.sortDirection === 'ASC' ? 'DESC' : 'ASC';\r\n    } else {\r\n      newDirection = 'ASC';\r\n    }\r\n    this.sortingChanged.emit({ field: key, direction: newDirection });\r\n    this.sortTasks(key, newDirection);\r\n  }\r\n\r\n  @Listen('clearSelectedHkTasks', { target: 'body' })\r\n  handleClearSelectedHkTasks(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    this.selectedIds = [];\r\n  }\r\n\r\n  @Watch('tasks')\r\n  handleTasksChange(newTasks: Task[]) {\r\n    if (newTasks?.length) {\r\n      this.selectedIds = [];\r\n      this.assignCheckableTasks();\r\n    }\r\n  }\r\n  /**\r\n   * Helper to sort tasks array in state.\r\n   */\r\n  /**\r\n   * Sorts the tasks by the given key in ASC or DESC order.\r\n   * If values for `key` are duplicates, it sorts by `date` ascending.\r\n   * If `date` is also the same, it finally sorts by `unit.name` ascending.\r\n   */\r\n  private sortTasks(key: string, direction: 'ASC' | 'DESC') {\r\n    const sorted = [...this.tasks].sort((a, b) => {\r\n      // Primary comparison: a[key] vs b[key]\r\n      let aPrimary = a[key];\r\n      let bPrimary = b[key];\r\n      if (key === 'status') {\r\n        aPrimary = a[key].description;\r\n        bPrimary = b[key].description;\r\n      }\r\n\r\n      if (aPrimary < bPrimary) {\r\n        return direction === 'ASC' ? -1 : 1;\r\n      }\r\n      if (aPrimary > bPrimary) {\r\n        return direction === 'ASC' ? 1 : -1;\r\n      }\r\n\r\n      // First tiebreaker: compare by date (always ascending)\r\n      if (a.date < b.date) return -1;\r\n      if (a.date > b.date) return 1;\r\n\r\n      // Second tiebreaker: compare by unit.name (always ascending)\r\n      if (a.unit?.name < b.unit?.name) return -1;\r\n      if (a.unit?.name > b.unit?.name) return 1;\r\n\r\n      return 0;\r\n    });\r\n\r\n    // Update component state\r\n    this.tasks = sorted;\r\n    this.sortKey = key;\r\n    this.sortDirection = direction;\r\n  }\r\n\r\n  /**\r\n   * Helper to toggle selection for a single row.\r\n   */\r\n  private toggleSelection(id: Task['id']) {\r\n    if (this.selectedIds.includes(id)) {\r\n      this.selectedIds = this.selectedIds.filter(item => item !== id);\r\n    } else {\r\n      this.selectedIds = [...this.selectedIds, id];\r\n      this.animateCleanedButton.emit(null);\r\n    }\r\n    this.emitSelectedTasks();\r\n  }\r\n\r\n  private emitSelectedTasks() {\r\n    if (this.tasks.length === 0) {\r\n      return;\r\n    }\r\n    const filteredTasks = this.tasks.filter(t => this.selectedIds.includes(t.id));\r\n    this.rowSelectChange.emit(filteredTasks);\r\n  }\r\n\r\n  /**\r\n   * Checks if every row is selected.\r\n   */\r\n  private get allSelected(): boolean {\r\n    return this.checkableTasks.length > 0 && this.selectedIds.length === this.checkableTasks.length;\r\n  }\r\n\r\n  /**\r\n   * Toggles selection on all visible tasks at once.\r\n   */\r\n  private toggleSelectAll() {\r\n    if (this.allSelected) {\r\n      this.selectedIds = [];\r\n    } else {\r\n      this.selectedIds = this.checkableTasks.map(t => t.id);\r\n      this.animateCleanedButton.emit(null);\r\n    }\r\n    this.emitSelectedTasks();\r\n  }\r\n\r\n  /**\r\n   * Assigns checkable tasks based on predefined criteria.\r\n   *\r\n   * This method filters tasks and determines which ones are eligible\r\n   * to be selected using checkboxes. A task is considered \"checkable\"\r\n   * if its date is today or earlier.\r\n   *\r\n   * The filtered tasks are stored in `this.checkableTasks`, ensuring\r\n   * only relevant tasks can be interacted with by users.\r\n   */\r\n  private assignCheckableTasks() {\r\n    const tasks = [];\r\n    this.tasks.forEach(task => {\r\n      if (this.isCheckable(task)) {\r\n        tasks.push(task);\r\n      }\r\n    });\r\n    this.checkableTasks = [...tasks];\r\n  }\r\n\r\n  /**\r\n   * Determines if a task is checkable.\r\n   *\r\n   * A task is considered checkable if its date is today or any day before.\r\n   * This prevents users from selecting tasks with future dates.\r\n   *\r\n   * @param {string} date - The task's date in 'YYYY-MM-DD' format.\r\n   * @returns {boolean} - Returns `true` if the task's date is today or earlier, otherwise `false`.\r\n   */\r\n  private isCheckable(task: Task): boolean {\r\n    // if (!task.hkm_id) {\r\n    //   return false;\r\n    // }\r\n    return moment(task.date, 'YYYY-MM-DD').isSameOrBefore(moment(), 'days');\r\n  }\r\n\r\n  render() {\r\n    const haveManyHousekeepers = housekeeping_store?.hk_criteria?.housekeepers?.length > 1;\r\n    return (\r\n      <div class=\"card table-container h-100 p-1 m-0 table-responsive\">\r\n        <table class=\"table\" data-testid=\"hk_tasks_table\">\r\n          <thead class=\"table-header\">\r\n            <tr>\r\n              <th class={'task-row'}>\r\n                <ir-checkbox\r\n                  indeterminate={this.selectedIds.length > 0 && this.selectedIds.length < this.checkableTasks.length}\r\n                  checked={this.allSelected}\r\n                  onCheckChange={() => this.toggleSelectAll()}\r\n                ></ir-checkbox>\r\n              </th>\r\n              <th class=\"extra-padding\">{locales.entries.Lcz_Period}</th>\r\n              <th class=\"extra-padding\">{locales.entries.Lcz_Unit}</th>\r\n              <th class={'sortable extra-padding'} onClick={() => this.handleSort('status')}>\r\n                <div class={'d-flex align-items-center'} style={{ gap: '0.5rem' }}>\r\n                  <span>{locales.entries.Lcz_Status}</span>\r\n                  <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    width=\"16\"\r\n                    height=\"16\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    stroke-width=\"2\"\r\n                    stroke-linecap=\"round\"\r\n                    stroke-linejoin=\"round\"\r\n                    class=\"lucide lucide-arrow-up-down\"\r\n                  >\r\n                    <path d=\"m21 16-4 4-4-4\" />\r\n                    <path d=\"M17 20V4\" />\r\n                    <path d=\"m3 8 4-4 4 4\" />\r\n                    <path d=\"M7 4v16\" />\r\n                  </svg>\r\n                </div>\r\n              </th>\r\n              <th class=\"extra-padding\">{locales.entries.Lcz_Hint}</th>\r\n              <th>{locales.entries.Lcz_A}</th>\r\n              <th>{locales.entries.Lcz_C}</th>\r\n              <th>{locales.entries.Lcz_I}</th>\r\n              {haveManyHousekeepers && (\r\n                <th style={{ textAlign: 'start' }} class={'sortable extra-padding'} onClick={() => this.handleSort('housekeeper')}>\r\n                  <div class={'d-flex align-items-center'} style={{ gap: '0.5rem' }}>\r\n                    <span>{locales.entries.Lcz_Housekeeper}</span>\r\n                    <svg\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                      width=\"16\"\r\n                      height=\"16\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      stroke-width=\"2\"\r\n                      stroke-linecap=\"round\"\r\n                      stroke-linejoin=\"round\"\r\n                      class=\"lucide lucide-arrow-up-down\"\r\n                    >\r\n                      <path d=\"m21 16-4 4-4-4\" />\r\n                      <path d=\"M17 20V4\" />\r\n                      <path d=\"m3 8 4-4 4 4\" />\r\n                      <path d=\"M7 4v16\" />\r\n                    </svg>\r\n                  </div>\r\n                </th>\r\n              )}\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n            {this.tasks.length === 0 && (\r\n              <tr>\r\n                <td colSpan={9} class=\"text-center\">\r\n                  <div style={{ height: '300px' }} class=\"d-flex align-items-center justify-content-center\">\r\n                    <span> {locales.entries.Lcz_NoTasksFound}</span>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            )}\r\n            {this.tasks.map(task => {\r\n              const isSelected = this.selectedIds.includes(task.id);\r\n              const isCheckable = this.isCheckable(task);\r\n              return (\r\n                <tr\r\n                  data-date={task.date}\r\n                  data-testid={`hk_task_row`}\r\n                  data-assigned={task.housekeeper ? 'true' : 'false'}\r\n                  style={isCheckable && { cursor: 'pointer' }}\r\n                  onClick={() => {\r\n                    if (!isCheckable) {\r\n                      return;\r\n                    }\r\n                    this.toggleSelection(task.id);\r\n                  }}\r\n                  class={{ 'selected': isSelected, 'task-table-row': true }}\r\n                  key={task.id}\r\n                >\r\n                  <td class=\"task-row \">{isCheckable && <ir-checkbox checked={isSelected}></ir-checkbox>}</td>\r\n                  <td class=\"task-row extra-padding\">{task.formatted_date}</td>\r\n                  <td class=\"task-row extra-padding\">\r\n                    <span class={{ 'highlighted-unit': task.is_highlight }}>{task.unit.name}</span>\r\n                  </td>\r\n                  <td class=\"task-row extra-padding\">{task.status.description}</td>\r\n                  <td class=\"task-row extra-padding\">{task.hint}</td>\r\n                  <td class=\"task-row\">{task.adult}</td>\r\n                  <td class=\"task-row\">{task.child}</td>\r\n                  <td class=\"task-row\">{task.infant}</td>\r\n                  {haveManyHousekeepers && (\r\n                    <td class=\"w-50 task-row extra-padding\" style={{ textAlign: 'start' }}>\r\n                      {task.housekeeper ?? locales.entries.Lcz_Unassigned}\r\n                    </td>\r\n                  )}\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"version":3}