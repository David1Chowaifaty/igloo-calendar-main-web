{"file":"booking-877e88b0.js","mappings":"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","names":["moment"],"sources":["src/stores/calendar-dates.store.ts","src/utils/booking.ts"],"sourcesContent":["import { DayData } from '@/models/DayType';\nimport { createStore } from '@stencil/store';\nimport { Task } from '@/models/housekeeping';\nexport interface ICalendarDates {\n  days: DayData[];\n  disabled_cells: Map<\n    string,\n    {\n      disabled: boolean;\n      reason: 'inventory' | 'stop_sale';\n    }\n  >;\n  months: { daysCount: number; monthName: string }[];\n  fromDate: string;\n  toDate: string;\n  cleaningTasks: Map<number, Map<string, Task>>;\n}\nconst initialState: ICalendarDates = {\n  days: [],\n  months: [],\n  fromDate: '',\n  toDate: '',\n  disabled_cells: new Map(),\n  cleaningTasks: new Map(),\n};\nexport const { state: calendar_dates, onChange: onCalendarDatesChange } = createStore<ICalendarDates>(initialState);\n\nexport default calendar_dates;\n\nexport function addCleaningTasks(tasks: Task[]) {\n  const tasksMap = new Map();\n  for (const task of tasks) {\n    const taskMap = new Map(tasksMap.get(task.unit.id) ?? new Map());\n    taskMap.set(task.date, task);\n    tasksMap.set(task.unit.id, taskMap);\n  }\n  calendar_dates.cleaningTasks = new Map(tasksMap);\n}\n\nexport function cleanRoom({ unitId, date }: { unitId: Task['unit']['id']; date: Task['date'] }) {\n  const tasksMap = new Map(calendar_dates.cleaningTasks);\n  if (!tasksMap.has(unitId)) {\n    return;\n  }\n  const taskMap = new Map(tasksMap.get(unitId));\n  taskMap.delete(date);\n  tasksMap.set(unitId, taskMap);\n  calendar_dates.cleaningTasks = new Map(tasksMap);\n}\n\nexport function addRoomForCleaning({ unitId, date, task }: { unitId: Task['unit']['id']; date: Task['date']; task?: Task }) {\n  const tasksMap = new Map(calendar_dates.cleaningTasks);\n  const taskMap = new Map(tasksMap.get(unitId) ?? new Map());\n  taskMap.set(date, task ?? date);\n  tasksMap.set(unitId, taskMap);\n  calendar_dates.cleaningTasks = new Map(tasksMap);\n}\n","import { Extras, Room } from './../models/booking.dto';\nimport moment from 'moment';\nimport { PhysicalRoomType, MonthType, CellType, STATUS, RoomBookingDetails, RoomBlockDetails } from '../models/IBooking';\nimport { dateDifference, isBlockUnit } from './utils';\nimport axios from 'axios';\nimport locales from '@/stores/locales.store';\nimport calendar_dates from '@/stores/calendar-dates.store';\nimport calendar_data from '@/stores/calendar-data';\n\nexport type SplitRole = 'fullSplit' | 'leftSplit' | 'rightSplit' | null;\n\nexport type SplitIndex = {\n  // fast lookups\n  parentOf: Map<string, string | null>; // child -> parent\n  childrenOf: Map<string, string[]>; // parent -> ordered children\n  roleOf: Map<string, SplitRole>; // node -> role\n  chainOf: Map<string, string[]>; // any node -> full chain (head..tail)\n  heads: string[]; // all chain heads\n};\n\n/**\n * Builds an index of split chains for a booking's rooms.\n * @param rooms - The booking's rooms array.\n * @returns A {@link SplitIndex} with constant-time lookups, or `null` if no rooms are provided.\n */\nexport function buildSplitIndex(rooms: Room[]): SplitIndex | null {\n  if (!rooms) {\n    return;\n  }\n  const parentOf = new Map<string, string | null>();\n  const childrenOf = new Map<string, string[]>();\n\n  // 1) index parents/children\n  for (const r of rooms) {\n    if (!r?.identifier) continue;\n    const id = r.identifier;\n    const parent = r.parent_room_identifier ?? null;\n    parentOf.set(id, parent);\n    if (parent) {\n      if (!childrenOf.has(parent)) childrenOf.set(parent, []);\n      childrenOf.get(parent)!.push(id);\n    } else {\n      if (!childrenOf.has(id)) childrenOf.set(id, []); // ensure every head exists in map\n    }\n  }\n\n  // 2) deterministic child order\n  const byId = new Map(rooms.map(r => [r.identifier, r]));\n  for (const [_, kids] of childrenOf) {\n    kids.sort((a, b) => {\n      const ad = byId.get(a)?.from_date ?? '';\n      const bd = byId.get(b)?.from_date ?? '';\n      if (ad < bd) return -1;\n      if (ad > bd) return 1;\n      return a.localeCompare(b);\n    });\n  }\n\n  // 3) find heads (nodes with no parent in map or parent missing)\n  const heads: string[] = [];\n  for (const id of parentOf.keys()) {\n    const parent = parentOf.get(id);\n    if (!parent || !parentOf.has(parent)) heads.push(id);\n  }\n\n  // 4) build chains, roles, and guard against cycles\n  const roleOf = new Map<string, SplitRole>();\n  const chainOf = new Map<string, string[]>();\n\n  const visitChain = (head: string) => {\n    const chain: string[] = [];\n    const seen = new Set<string>();\n    let cur: string | undefined = head;\n\n    while (cur && !seen.has(cur)) {\n      seen.add(cur);\n      chain.push(cur);\n      const kids = childrenOf.get(cur) ?? [];\n      // if data branches, we follow the earliest child and treat the rest as separate heads\n      cur = kids[0];\n    }\n\n    // assign roles\n    for (let i = 0; i < chain.length; i++) {\n      const id = chain[i];\n      const hasParent = i > 0;\n      const hasChild = i < chain.length - 1;\n      const role: SplitRole = hasParent && hasChild ? 'fullSplit' : hasParent ? 'leftSplit' : hasChild ? 'rightSplit' : null;\n      roleOf.set(id, role);\n      chainOf.set(id, chain);\n    }\n  };\n\n  // visit each head\n  for (const h of heads) visitChain(h);\n\n  // handle orphans/cycles that weren’t reachable from heads\n  for (const id of parentOf.keys()) {\n    if (!chainOf.has(id)) visitChain(id);\n  }\n\n  return { parentOf, childrenOf, roleOf, chainOf, heads };\n}\n\n/**\n * Returns the split role of a given room identifier.\n *\n * Roles:\n * - `\"fullSplit\"`: node has a parent and a child (middle of a chain)\n * - `\"leftSplit\"`: node has a parent only (tail)\n * - `\"rightSplit\"`: node has a child only (head that splits)\n * - `null`: singleton (no parent & no child) or not part of any chain in the index\n *\n * @param index - A previously built {@link SplitIndex}.\n * @param identifier - The room identifier to query.\n * @returns The role of the identifier, or `null` if not present.\n */\nexport function getSplitRole(index: SplitIndex, identifier: string): SplitRole {\n  return index.roleOf.get(identifier) ?? null;\n}\n\n/**\n * Returns the full ordered chain (head → … → tail) containing the identifier.\n * If the identifier is unknown to the index, returns a single-element array with the identifier.\n *\n * @param index - A previously built {@link SplitIndex}.\n * @param identifier - The room identifier to query.\n * @returns An array of identifiers representing the chain.\n */\nexport function getSplitChain(index: SplitIndex, identifier: string): string[] {\n  return index.chainOf.get(identifier) ?? [identifier];\n}\n\nexport async function getMyBookings(months: MonthType[]): Promise<any[]> {\n  if (!months?.length) {\n    return [];\n  }\n\n  const stayStatus = await getStayStatus();\n  const stayStatusLookup = new Map<string, string>(stayStatus.map(item => [item.code, item.value]));\n  const bookingsByPool = new Map<string, any>();\n\n  for (const month of months) {\n    for (const day of month.days) {\n      for (const room of day.room_types) {\n        assignBooking(room.physicalrooms, bookingsByPool, stayStatusLookup);\n      }\n    }\n  }\n\n  return Array.from(bookingsByPool.values());\n}\n\nfunction assignBooking(physicalRoom: PhysicalRoomType[], bookingsByPool: Map<string, any>, stayStatusLookup: Map<string, string>): void {\n  if (!physicalRoom?.length) {\n    return;\n  }\n\n  for (const room of physicalRoom) {\n    const calendarCells = room?.calendar_cell ? Object.values(room.calendar_cell) : [];\n    for (const cell of calendarCells) {\n      if (cell?.Is_Available === false) {\n        addOrUpdateBooking(cell, bookingsByPool, stayStatusLookup);\n      }\n    }\n  }\n}\nconst status: Record<string, STATUS> = {\n  '004': 'BLOCKED',\n  '003': 'BLOCKED-WITH-DATES',\n  '002': 'BLOCKED',\n};\nexport const bookingStatus: Record<string, STATUS> = {\n  '000': 'IN-HOUSE',\n  '001': 'PENDING-CONFIRMATION',\n  '002': 'CONFIRMED',\n  '003': 'CHECKED-OUT',\n};\n\ntype StayStatusEntry = { code: string; value: string };\n\nexport function formatName(firstName: string | null, lastName: string | null) {\n  if ((firstName === null && lastName === null) || !firstName) return '';\n  if (!!lastName) {\n    return `${firstName ?? ''} ${lastName ?? ''}`;\n  }\n  return firstName;\n}\nasync function getStayStatus(): Promise<StayStatusEntry[]> {\n  try {\n    const { data } = await axios.post(`/Get_Setup_Entries_By_TBL_NAME_Multi`, {\n      TBL_NAMES: ['_STAY_STATUS'],\n    });\n    return data.My_Result.map(d => ({\n      code: d.CODE_NAME,\n      value: d.CODE_VALUE_EN,\n    }));\n  } catch (error) {\n    console.log(error);\n    return [];\n  }\n}\nfunction renderBlock003Date(date, hour, minute) {\n  const dt = new Date(date);\n  dt.setHours(hour);\n  dt.setMinutes(minute);\n  return `${locales.entries.Lcz_BlockedTill} ${moment(dt).format('MMM DD, HH:mm')}`;\n}\nfunction getDefaultData(cell: CellType, stayStatusLookup: Map<string, string>): any {\n  if (isBlockUnit(cell.STAY_STATUS_CODE)) {\n    const blockedFromDate = moment(cell.My_Block_Info.from_date, 'YYYY-MM-DD').isAfter(cell.DATE) ? cell.My_Block_Info.from_date : cell.DATE;\n    const blockedToDate = moment(cell.My_Block_Info.to_date, 'YYYY-MM-DD').isAfter(cell.DATE) ? cell.My_Block_Info.to_date : cell.DATE;\n    return {\n      ID: cell.POOL,\n      NOTES: '',\n      BALANCE: '',\n      NAME:\n        cell.My_Block_Info.NOTES !== '' && cell.My_Block_Info.NOTES !== null\n          ? cell.My_Block_Info.NOTES\n          : cell.STAY_STATUS_CODE === '003'\n          ? renderBlock003Date(cell.My_Block_Info.BLOCKED_TILL_DATE, cell.My_Block_Info.BLOCKED_TILL_HOUR, cell.My_Block_Info.BLOCKED_TILL_MINUTE)\n          : stayStatusLookup.get(cell.STAY_STATUS_CODE) || '',\n      RELEASE_AFTER_HOURS: cell.My_Block_Info.DESCRIPTION,\n      PR_ID: cell.My_Block_Info.pr_id,\n      ENTRY_DATE: cell.My_Block_Info.BLOCKED_TILL_DATE,\n      ENTRY_HOUR: cell.My_Block_Info.BLOCKED_TILL_HOUR,\n      ENTRY_MINUTE: cell.My_Block_Info.BLOCKED_TILL_MINUTE,\n      OPTIONAL_REASON: cell.My_Block_Info.NOTES,\n      FROM_DATE: blockedFromDate,\n      TO_DATE: blockedToDate,\n      NO_OF_DAYS: dateDifference(blockedFromDate, blockedToDate),\n      STATUS: status[cell.STAY_STATUS_CODE],\n      POOL: cell.POOL,\n      STATUS_CODE: cell.STAY_STATUS_CODE,\n      OUT_OF_SERVICE: cell.STAY_STATUS_CODE === '004',\n      FROM_DATE_STR: cell.My_Block_Info.format.from_date,\n      TO_DATE_STR: cell.My_Block_Info.format.to_date,\n      defaultDates: {\n        from_date: cell.My_Block_Info.from_date,\n        to_date: cell.My_Block_Info.to_date,\n      },\n    };\n  }\n  // if (cell.booking.booking_nbr === '61249849') {\n  //   console.log('cell');\n  //   console.log(moment(cell.room.from_date, 'YYYY-MM-DD').isAfter(cell.DATE) ? cell.room.from_date : cell.DATE);\n  //   console.log(cell);\n  // }\n  // if (cell.booking.booking_nbr.toString() === '00553011358') {\n  //   console.log(cell);\n  // }\n  try {\n    const bookingFromDate = moment(cell.room.from_date, 'YYYY-MM-DD').isAfter(cell.DATE) ? cell.room.from_date : cell.DATE;\n    const bookingToDate = moment(cell.room.to_date, 'YYYY-MM-DD').isAfter(cell.DATE) ? cell.room.to_date : cell.DATE;\n    const mainGuest = cell.room.sharing_persons?.find(p => p.is_main);\n    return {\n      ID: cell.POOL,\n      FROM_DATE: bookingFromDate,\n      TO_DATE: bookingToDate,\n      NO_OF_DAYS: dateDifference(bookingFromDate, bookingToDate),\n      STATUS: bookingStatus[cell.booking?.status.code],\n      // NAME: formatName(mainGuest?.first_name, mainGuest?.last_name),\n      NAME: formatName(mainGuest?.first_name, mainGuest?.last_name) || formatName(cell?.booking.guest?.first_name, cell?.booking?.guest?.last_name),\n      IDENTIFIER: cell.room.identifier,\n      PR_ID: cell.pr_id,\n      POOL: cell.POOL,\n      BOOKING_NUMBER: cell.booking.booking_nbr,\n      NOTES: cell.booking.is_direct ? cell.booking.remark : null,\n      PRIVATE_NOTE: getPrivateNote(cell.booking.extras),\n      is_direct: cell.booking.is_direct,\n      BALANCE: cell.booking.financial?.due_amount,\n      channel_booking_nbr: cell.booking.channel_booking_nbr,\n      ARRIVAL_TIME: cell.booking.arrival.description,\n      defaultDates: {\n        from_date: cell.room.from_date,\n        to_date: cell.room.to_date,\n      },\n      DEPARTURE_TIME: cell.room.departure_time,\n      ///from here\n      ENTRY_DATE: cell.booking.booked_on.date,\n      PHONE_PREFIX: cell.booking.guest.country_phone_prefix,\n      IS_EDITABLE: cell.booking.is_editable,\n      ARRIVAL: cell.booking.arrival,\n      PHONE: cell.booking.guest.mobile_without_prefix ?? '',\n      RATE: cell.room.total,\n      RATE_PLAN: cell.room.rateplan.name,\n      SPLIT_BOOKING: false,\n      RATE_PLAN_ID: cell.room.rateplan.id,\n      RATE_TYPE: cell.room?.roomtype?.id,\n      ADULTS_COUNT: cell.room.occupancy.adult_nbr,\n      CHILDREN_COUNT: cell.room.occupancy.children_nbr,\n      origin: cell.booking.origin,\n      GUEST: cell.booking.guest,\n      ROOMS: cell.booking.rooms,\n      cancelation: cell.room.rateplan.cancelation,\n      guarantee: cell.room.rateplan.guarantee,\n      TOTAL_PRICE: cell.booking.financial?.gross_total,\n      COUNTRY: cell.booking.guest.country_id,\n      FROM_DATE_STR: cell.booking.format.from_date,\n      TO_DATE_STR: cell.booking.format.to_date,\n      adult_child_offering: cell.room.rateplan.selected_variation.adult_child_offering,\n      SOURCE: { code: cell.booking.source.code, description: cell.booking.source.description, tag: cell.booking.source.tag },\n      //TODO:Implement checkin-checkout\n      CHECKIN: cell.room.in_out?.code === '001',\n      CHECKOUT: cell.room.in_out?.code === '002',\n      ROOM_INFO: {\n        occupancy: cell.room.occupancy,\n        sharing_persons: cell.room.sharing_persons,\n        unit: cell.room.unit,\n        in_out: cell.room.in_out,\n        calendar_extra: cell.room.calendar_extra ? JSON.parse(cell.room.calendar_extra) : null,\n        parent_room_identifier: cell.room.parent_room_identifier,\n      },\n      BASE_STATUS_CODE: cell.booking.status?.code,\n    };\n  } catch (error) {\n    console.error(`Something went wrong in cell`);\n    console.log(cell);\n    console.error(error);\n  }\n}\n\n// function updateBookingWithStayData(data: any, cell: CellType): any {\n//   data.NO_OF_DAYS = dateDifference(data.FROM_DATE, cell.DATE);\n//   data.TO_DATE = cell.DATE;\n//   if (cell.booking) {\n//     const { arrival } = cell.booking;\n//     if (cell.booking.booking_nbr === '88231897') {\n//       console.log(data.NO_OF_DAYS, data.TO_DATE);\n//     }\n//     Object.assign(data, {\n//       ARRIVAL_TIME: arrival.description,\n//     });\n//   }\n//   return data;\n// }\nexport function getRoomStatus(params: Pick<Room, 'in_out' | 'from_date' | 'to_date'> & { status_code: string }) {\n  const { in_out, status_code, from_date, to_date } = params;\n  if (calendar_data.checkin_enabled) {\n    if (in_out?.code === '001') {\n      return bookingStatus['000'];\n    } else if (in_out?.code === '002') {\n      if (!calendar_data.is_automatic_check_in_out) {\n        const now = moment();\n        const toDate = moment(to_date, 'YYYY-MM-DD');\n        const fromDate = moment(from_date, 'YYYY-MM-DD');\n        const isNowAfterOrSameAsHotelHour = compareTime(\n          now.toDate(),\n          createDateWithOffsetAndHour(calendar_data.checkin_checkout_hours?.offset, calendar_data.checkin_checkout_hours?.hour),\n        );\n        if ((now.isSame(toDate, 'days') && now.isAfter(fromDate, 'days') && isNowAfterOrSameAsHotelHour) || now.isAfter(toDate, 'days')) {\n          return bookingStatus['003'];\n        } else {\n          return bookingStatus['002'];\n        }\n      }\n    }\n    return bookingStatus[status_code || '001'];\n  } else {\n    const now = moment();\n    // const toDate = moment(to_date, 'YYYY-MM-DD');\n    // const fromDate = moment(from_date, 'YYYY-MM-DD');\n    // const isNowAfterOrSameAsHotelHour = compareTime(\n    //   now.toDate(),\n    //   createDateWithOffsetAndHour(calendar_data.checkin_checkout_hours?.offset, calendar_data.checkin_checkout_hours?.hour),\n    // );\n    // if (fromDate.isSame(now, 'day') && isNowAfterOrSameAsHotelHour) {\n    //   return bookingStatus['000'];\n    // } else if (now.isAfter(fromDate, 'day') && now.isBefore(toDate, 'day')) {\n    //   return bookingStatus['000'];\n    // } else if (toDate.isSame(now, 'day') && isNowAfterOrSameAsHotelHour) {\n    //   return bookingStatus['000'];\n    // } else if ((toDate.isSame(now, 'day') && isNowAfterOrSameAsHotelHour) || toDate.isBefore(now, 'day')) {\n    //   return bookingStatus['003'];\n    // } else {\n    //   return bookingStatus[status_code || '001'];\n    // }\n    const toDate = moment(to_date, 'YYYY-MM-DD');\n    const fromDate = moment(from_date, 'YYYY-MM-DD');\n    if (status_code !== 'PENDING') {\n      if (fromDate.isSame(now, 'day') && now.hour() >= 12) {\n        return bookingStatus['000'];\n      } else if (now.isAfter(fromDate, 'day') && now.isBefore(toDate, 'day')) {\n        return bookingStatus['000'];\n      } else if (toDate.isSame(now, 'day') && now.hour() < 12) {\n        return bookingStatus['000'];\n      } else if ((toDate.isSame(now, 'day') && now.hour() >= 12) || toDate.isBefore(now, 'day')) {\n        return bookingStatus['003'];\n      } else {\n        return bookingStatus[status_code || '001'];\n      }\n    }\n  }\n}\n\nfunction addOrUpdateBooking(cell: CellType, bookingsByPool: Map<string, any>, stayStatusLookup: Map<string, string>): void {\n  if (!cell?.POOL || bookingsByPool.has(cell.POOL)) {\n    return;\n  }\n\n  const newData = getDefaultData(cell, stayStatusLookup);\n  if (newData) {\n    bookingsByPool.set(cell.POOL, newData);\n  }\n}\nexport function getPrivateNote(extras: Extras[] | null) {\n  if (!extras) {\n    return null;\n  }\n  return extras.find(e => e.key === 'private_note')?.value || null;\n}\n\nexport function transformNewBooking(data: any): RoomBookingDetails[] {\n  let bookings: RoomBookingDetails[] = [];\n  const rooms = data.rooms.filter(room => !!room['assigned_units_pool']);\n  rooms.forEach(room => {\n    const bookingFromDate = moment(room.from_date, 'YYYY-MM-DD').isAfter(moment(calendar_dates.fromDate, 'YYYY-MM-DD')) ? room.from_date : calendar_dates.fromDate;\n    const bookingToDate = room.to_date;\n    if (moment(room.to_date, 'YYYY-MM-DD').isBefore(moment(calendar_dates.fromDate, 'YYYY-MM-DD'))) {\n      return;\n    }\n    const mainGuest = room.sharing_persons?.find(p => p.is_main);\n    // console.log('bookingToDate:', bookingToDate, 'bookingFromDate:', bookingFromDate, 'room from date:', room.from_date, 'room to date', room.to_date);\n    bookings.push({\n      CHECKIN: false,\n      CHECKOUT: false,\n      ID: room['assigned_units_pool'],\n      TO_DATE: bookingToDate,\n      FROM_DATE: bookingFromDate,\n      PRIVATE_NOTE: getPrivateNote(data.extras),\n      NO_OF_DAYS: dateDifference(bookingFromDate, bookingToDate),\n      ARRIVAL: data.arrival,\n      IS_EDITABLE: true,\n      BALANCE: data.financial?.due_amount,\n      STATUS: getRoomStatus({\n        in_out: room.in_out,\n        from_date: room.from_date,\n        to_date: room.to_date,\n        status_code: data.status?.code,\n      }),\n      // NAME: formatName(mainGuest?.first_name, mainGuest.last_name),\n      NAME: formatName(mainGuest?.first_name, mainGuest.last_name) || formatName(room.guest.first_name, room.guest.last_name),\n      PHONE: data.guest.mobile_without_prefix ?? '',\n      ENTRY_DATE: '12-12-2023',\n      PHONE_PREFIX: data.guest.country_phone_prefix,\n      RATE: room.total,\n      RATE_PLAN: room.rateplan.name,\n      SPLIT_BOOKING: false,\n      RATE_PLAN_ID: room.rateplan.id,\n      IDENTIFIER: room.identifier,\n      RATE_TYPE: room.roomtype.id,\n      ADULTS_COUNT: room.occupancy.adult_nbr,\n      CHILDREN_COUNT: room.occupancy.children_nbr,\n      PR_ID: +room.unit.id,\n      POOL: room['assigned_units_pool'],\n      GUEST: data.guest,\n      ROOMS: data.rooms,\n      BOOKING_NUMBER: data.booking_nbr,\n      cancelation: room.rateplan.cancelation,\n      guarantee: room.rateplan.guarantee,\n      TOTAL_PRICE: data.financial?.gross_total,\n      COUNTRY: data.guest.country_id,\n      FROM_DATE_STR: data.format.from_date,\n      TO_DATE_STR: data.format.to_date,\n      adult_child_offering: room.rateplan.selected_variation.adult_child_offering,\n      ARRIVAL_TIME: data.arrival.description,\n      origin: data.origin,\n      channel_booking_nbr: data.channel_booking_nbr,\n      is_direct: data.is_direct,\n      NOTES: data.is_direct ? data.remark : null,\n      DEPARTURE_TIME: room.departure_time,\n      SOURCE: { code: data.source.code, description: data.source.description, tag: data.source.tag },\n      ota_notes: data.ota_notes,\n      defaultDates: {\n        from_date: room.from_date,\n        to_date: room.to_date,\n      },\n      ROOM_INFO: {\n        occupancy: room.occupancy,\n        sharing_persons: room.sharing_persons,\n        unit: room.unit,\n        in_out: room.in_out,\n        parent_room_identifier: room.parent_room_identifier,\n        calendar_extra: room.calendar_extra ? JSON.parse(room.calendar_extra) : null,\n      },\n      BASE_STATUS_CODE: data.status?.code,\n    });\n  });\n  return bookings;\n}\n\nexport async function transformNewBLockedRooms(data: any): Promise<RoomBlockDetails> {\n  const stayStatus = await getStayStatus();\n  return {\n    ID: data.POOL,\n    NOTES: '',\n    BALANCE: '',\n    NAME:\n      data.NOTES !== '' && data.NOTES !== null\n        ? data.NOTES\n        : data.STAY_STATUS_CODE === '003'\n        ? renderBlock003Date(data.BLOCKED_TILL_DATE, data.BLOCKED_TILL_HOUR, data.BLOCKED_TILL_MINUTE)\n        : stayStatus.find(st => st.code === data.STAY_STATUS_CODE).value || '',\n    RELEASE_AFTER_HOURS: data.DESCRIPTION,\n    PR_ID: data.pr_id,\n    ENTRY_DATE: data.BLOCKED_TILL_DATE,\n    ENTRY_HOUR: data.BLOCKED_TILL_HOUR,\n    ENTRY_MINUTE: data.BLOCKED_TILL_MINUTE,\n    OPTIONAL_REASON: data.NOTES,\n    FROM_DATE: data.from_date,\n    TO_DATE: data.to_date,\n    NO_OF_DAYS: calculateDaysBetweenDates(data.from_date, data.to_date),\n    STATUS: status[data.STAY_STATUS_CODE],\n    POOL: data.POOL,\n    STATUS_CODE: data.STAY_STATUS_CODE,\n    OUT_OF_SERVICE: data.STAY_STATUS_CODE === '004',\n    FROM_DATE_STR: data.format.from_date,\n    TO_DATE_STR: data.format.to_date,\n    defaultDates: {\n      from_date: data.from_date,\n      to_date: data.to_date,\n    },\n  };\n}\n\nexport function calculateDaysBetweenDates(from_date: string, to_date: string) {\n  const startDate = moment(from_date, 'YYYY-MM-DD').startOf('day');\n  const endDate = moment(to_date, 'YYYY-MM-DD').endOf('day');\n  const daysDiff = endDate.diff(startDate, 'days');\n  return daysDiff || 1;\n}\n\nexport function compareTime(date1: Date, date2: Date) {\n  return date1.getHours() >= date2.getHours() && date1.getMinutes() >= date2.getMinutes();\n}\n\n/**\n * Creates a Date object for today at the specified hour in a given time zone.\n * The offset is the number of hours that the target time zone is ahead of UTC.\n *\n * For example, if offset = 3 and hour = 9, then the function returns a Date\n * which, when converted to the target time zone, represents 9:00.\n *\n * @param offset - The timezone offset in hours (e.g., 2, 3, etc.)\n * @param hour - The desired hour in the target time zone (0-23)\n * @returns Date object representing the target time (in UTC)\n */\nexport function createDateWithOffsetAndHour(offset: number, hour: number): Date {\n  const now = new Date();\n  const offsetMs = offset * 60 * 60 * 1000;\n  const targetTzDate = new Date(now.getTime() + offsetMs);\n  const year = targetTzDate.getUTCFullYear();\n  const month = targetTzDate.getUTCMonth();\n  const day = targetTzDate.getUTCDate();\n  const utcHour = hour - offset;\n  return new Date(Date.UTC(year, month, day, utcHour));\n}\n"],"version":3}