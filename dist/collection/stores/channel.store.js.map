{"version":3,"file":"channel.store.js","sourceRoot":"","sources":["../../src/stores/channel.store.ts"],"names":[],"mappings":"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","sourcesContent":["import { IChannel, IExposedChannel, IMap } from '@/models/calendarData';\nimport { createStore } from '@stencil/store';\nexport interface IChannelSettings {\n  hotel_id: string;\n  hotel_title: string;\n}\nexport interface IChannelStore {\n  channels: IExposedChannel[];\n  connected_channels: IChannel[];\n  selectedChannel: IExposedChannel | null;\n  mappedChannels: IMap[];\n  isConnectedToChannel: boolean;\n  channel_settings: IChannelSettings | null;\n  property_id: number | null;\n  channel_id: number;\n  is_active: boolean;\n}\nconst initialState: IChannelStore = {\n  channels: [],\n  selectedChannel: null,\n  mappedChannels: [],\n  connected_channels: [],\n  isConnectedToChannel: false,\n  channel_settings: null,\n  property_id: null,\n  channel_id: -1,\n  is_active: false,\n};\nexport const { state: channels_data, onChange: onChannelChange, dispose } = createStore<IChannelStore>(initialState);\nexport function setChannelIdAndActiveState(id: number, is_active: boolean) {\n  channels_data.channel_id = id;\n  channels_data.is_active = is_active;\n}\nexport function selectChannel(channel_id: string) {\n  if (channel_id === '') {\n    channels_data.selectedChannel = null;\n    return;\n  }\n  const selectedChannel = channels_data.channels.find(c => c.id.toString() === channel_id);\n  if (selectedChannel) {\n    channels_data.selectedChannel = selectedChannel;\n  } else {\n    channels_data.selectedChannel = {\n      id: channel_id,\n      name: '',\n      properties: [],\n    };\n  }\n  setMappedChannel();\n}\nexport function updateChannelSettings(key: keyof IChannelSettings, value: string) {\n  if (!channels_data.channel_settings) {\n    channels_data.channel_settings = {\n      hotel_id: '',\n      hotel_title: '',\n    };\n  }\n  channels_data.channel_settings[key] = value;\n}\nexport function setMappedChannel() {\n  let selectedChannelMap = channels_data.connected_channels.find(c => c.channel.id.toString() === channels_data.selectedChannel.id.toString());\n  if (!selectedChannelMap) {\n    channels_data.mappedChannels = [];\n    return;\n  }\n  channels_data.mappedChannels = [...selectedChannelMap.map];\n}\nexport function resetStore() {\n  channels_data.selectedChannel = null;\n  channels_data.mappedChannels = [];\n  channels_data.isConnectedToChannel = false;\n  channels_data.channel_settings = null;\n}\nexport function addMapping(ir_id: string, fr_id: string, isRoomType: boolean) {\n  channels_data.mappedChannels.push({\n    channel_id: fr_id,\n    ir_id,\n    type: isRoomType ? 'room_type' : 'rate_plan',\n  });\n}\nexport function testConnection() {\n  // const hotelConnection = channels_data.selectedChannel.properties.find(property => property.id === 'd09e6374-1ebf-45e0-a130-64c8c9930987');\n  const hotelConnection = channels_data.selectedChannel.properties.find(property => property.id === channels_data.channel_settings.hotel_id);\n  if (!hotelConnection) {\n    if (channels_data.isConnectedToChannel) {\n      channels_data.isConnectedToChannel = false;\n    }\n    return false;\n  }\n  channels_data.selectedChannel.property = hotelConnection;\n  if (channels_data.mappedChannels.length === 0) {\n    channels_data.mappedChannels.push({ ir_id: (channels_data.property_id ?? -1).toString(), channel_id: channels_data.channel_settings.hotel_id, type: 'property' });\n  }\n  channels_data.isConnectedToChannel = true;\n  return true;\n}\n\nexport function saveChannel() {\n  console.log(channels_data.channel_settings, channels_data.mappedChannels, channels_data.selectedChannel);\n}\nexport default channels_data;\n"]}