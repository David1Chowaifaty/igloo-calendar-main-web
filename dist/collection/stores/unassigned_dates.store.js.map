{"version":3,"file":"unassigned_dates.store.js","sourceRoot":"","sources":["../../src/stores/unassigned_dates.store.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,WAAW,EAAE,MAAM,gBAAgB,CAAC;AAgB7C,MAAM,YAAY,GAA0B;IAC1C,gBAAgB,EAAE,EAAE;CACrB,CAAC;AACF,MAAM,CAAC,IAAI,EAAE,KAAK,EAAE,gBAAgB,EAAE,QAAQ,EAAE,2BAA2B,EAAE,GAAG,WAAW,CAAwB,YAAY,CAAC,CAAC;AAEjI,MAAM,UAAU,kBAAkB,CAAC,IAAqB;IACtD,gBAAgB,CAAC,gBAAgB,GAAG,EAAE,GAAG,gBAAgB,CAAC,gBAAgB,EAAE,GAAG,IAAI,EAAE,CAAC;IACtF;;;;;;;;;;;;;;;;;;;;;MAqBE;IACF,kDAAkD;AACpD,CAAC;AACD,MAAM,UAAU,kBAAkB;IAChC,OAAO,gBAAgB,CAAC,gBAAgB,CAAC;AAC3C,CAAC;AACD,MAAM,UAAU,qBAAqB,CAAC,SAAiB,EAAE,OAAe;IACtE,MAAM,aAAa,GAAG,sBAAsB,CAAC,SAAS,CAAC,CAAC;IACxD,MAAM,WAAW,GAAG,sBAAsB,CAAC,OAAO,CAAC,CAAC;IACpD,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;QAC3D,MAAM,YAAY,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC;QACnC,IAAI,aAAa,IAAI,YAAY,IAAI,YAAY,IAAI,WAAW,EAAE,CAAC;YACjE,OAAO,gBAAgB,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;QAChD,CAAC;IACH,CAAC,CAAC,CAAC;AACL,CAAC;AACD,SAAS,sBAAsB,CAAC,OAAe;IAC7C,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC;IAC/B,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAC1B,OAAO,IAAI,CAAC,OAAO,EAAE,CAAC;AACxB,CAAC;AAED,eAAe,gBAAgB,CAAC","sourcesContent":["import { createStore } from '@stencil/store';\n\ntype EventCategories = {};\n\ntype EventInfo = {\n  categories: EventCategories;\n  dateStr: string;\n};\n\ntype UnassignedDates = {\n  [timestamp: string]: EventInfo;\n};\ninterface IUnassignedDatesStore {\n  unassigned_dates: UnassignedDates;\n}\n\nconst initialState: IUnassignedDatesStore = {\n  unassigned_dates: {},\n};\nexport let { state: unassigned_dates, onChange: handleUnAssignedDatesChange } = createStore<IUnassignedDatesStore>(initialState);\n\nexport function addUnassignedDates(data: UnassignedDates) {\n  unassigned_dates.unassigned_dates = { ...unassigned_dates.unassigned_dates, ...data };\n  /*\n   try {\n      //console.log(\"called\")\n      let categorisedRooms = {};\n      const result = await this.toBeAssignedService.getUnassignedRooms(\n        this.propertyid,\n        dateToFormattedString(new Date(+key)),\n        calendarData.roomsInfo,\n        calendarData.formattedLegendData,\n      );\n      result.forEach(room => {\n        if (!categorisedRooms.hasOwnProperty(room.RT_ID)) {\n          categorisedRooms[room.RT_ID] = [room];\n        } else {\n          categorisedRooms[room.RT_ID].push(room);\n        }\n      });\n      this.unassignedDates[key].categories = categorisedRooms;\n    } catch (error) {\n      //  toastr.error(error);\n    }\n  */\n  // console.log(unassigned_dates.unassigned_dates);\n}\nexport function getUnassignedDates() {\n  return unassigned_dates.unassigned_dates;\n}\nexport function removeUnassignedDates(from_date: string, to_date: string) {\n  const fromTimestamp = convertToDateTimestamp(from_date);\n  const toTimestamp = convertToDateTimestamp(to_date);\n  Object.keys(unassigned_dates.unassigned_dates).forEach(key => {\n    const keyTimestamp = parseInt(key);\n    if (fromTimestamp <= keyTimestamp && keyTimestamp <= toTimestamp) {\n      delete unassigned_dates.unassigned_dates[key];\n    }\n  });\n}\nfunction convertToDateTimestamp(dateStr: string) {\n  const date = new Date(dateStr);\n  date.setHours(0, 0, 0, 0);\n  return date.getTime();\n}\n\nexport default unassigned_dates;\n"]}