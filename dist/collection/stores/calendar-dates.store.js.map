{"version":3,"file":"calendar-dates.store.js","sourceRoot":"","sources":["../../src/stores/calendar-dates.store.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,WAAW,EAAE,MAAM,gBAAgB,CAAC;AAgB7C,MAAM,YAAY,GAAmB;IACnC,IAAI,EAAE,EAAE;IACR,MAAM,EAAE,EAAE;IACV,QAAQ,EAAE,EAAE;IACZ,MAAM,EAAE,EAAE;IACV,cAAc,EAAE,IAAI,GAAG,EAAE;IACzB,aAAa,EAAE,IAAI,GAAG,EAAE;CACzB,CAAC;AACF,MAAM,CAAC,MAAM,EAAE,KAAK,EAAE,cAAc,EAAE,QAAQ,EAAE,qBAAqB,EAAE,GAAG,WAAW,CAAiB,YAAY,CAAC,CAAC;AAEpH,eAAe,cAAc,CAAC;AAE9B,MAAM,UAAU,gBAAgB,CAAC,KAAa;;IAC5C,MAAM,QAAQ,GAAG,IAAI,GAAG,EAAE,CAAC;IAC3B,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE,CAAC;QACzB,MAAM,OAAO,GAAG,IAAI,GAAG,CAAC,MAAA,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,mCAAI,IAAI,GAAG,EAAE,CAAC,CAAC;QACjE,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QAC7B,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;IACtC,CAAC;IACD,cAAc,CAAC,aAAa,GAAG,IAAI,GAAG,CAAC,QAAQ,CAAC,CAAC;AACnD,CAAC;AAED,MAAM,UAAU,SAAS,CAAC,EAAE,MAAM,EAAE,IAAI,EAAsD;IAC5F,MAAM,QAAQ,GAAG,IAAI,GAAG,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC;IACvD,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC;QAC1B,OAAO;IACT,CAAC;IACD,MAAM,OAAO,GAAG,IAAI,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC;IAC9C,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IACrB,QAAQ,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;IAC9B,cAAc,CAAC,aAAa,GAAG,IAAI,GAAG,CAAC,QAAQ,CAAC,CAAC;AACnD,CAAC;AAED,MAAM,UAAU,kBAAkB,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAmE;;IACxH,MAAM,QAAQ,GAAG,IAAI,GAAG,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC;IACvD,MAAM,OAAO,GAAG,IAAI,GAAG,CAAC,MAAA,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,mCAAI,IAAI,GAAG,EAAE,CAAC,CAAC;IAC3D,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,aAAJ,IAAI,cAAJ,IAAI,GAAI,IAAI,CAAC,CAAC;IAChC,QAAQ,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;IAC9B,cAAc,CAAC,aAAa,GAAG,IAAI,GAAG,CAAC,QAAQ,CAAC,CAAC;AACnD,CAAC","sourcesContent":["import { DayData } from '@/models/DayType';\nimport { createStore } from '@stencil/store';\nimport { Task } from '@/models/housekeeping';\nexport interface ICalendarDates {\n  days: DayData[];\n  disabled_cells: Map<\n    string,\n    {\n      disabled: boolean;\n      reason: 'inventory' | 'stop_sale';\n    }\n  >;\n  months: { daysCount: number; monthName: string }[];\n  fromDate: string;\n  toDate: string;\n  cleaningTasks: Map<number, Map<string, Task>>;\n}\nconst initialState: ICalendarDates = {\n  days: [],\n  months: [],\n  fromDate: '',\n  toDate: '',\n  disabled_cells: new Map(),\n  cleaningTasks: new Map(),\n};\nexport const { state: calendar_dates, onChange: onCalendarDatesChange } = createStore<ICalendarDates>(initialState);\n\nexport default calendar_dates;\n\nexport function addCleaningTasks(tasks: Task[]) {\n  const tasksMap = new Map();\n  for (const task of tasks) {\n    const taskMap = new Map(tasksMap.get(task.unit.id) ?? new Map());\n    taskMap.set(task.date, task);\n    tasksMap.set(task.unit.id, taskMap);\n  }\n  calendar_dates.cleaningTasks = new Map(tasksMap);\n}\n\nexport function cleanRoom({ unitId, date }: { unitId: Task['unit']['id']; date: Task['date'] }) {\n  const tasksMap = new Map(calendar_dates.cleaningTasks);\n  if (!tasksMap.has(unitId)) {\n    return;\n  }\n  const taskMap = new Map(tasksMap.get(unitId));\n  taskMap.delete(date);\n  tasksMap.set(unitId, taskMap);\n  calendar_dates.cleaningTasks = new Map(tasksMap);\n}\n\nexport function addRoomForCleaning({ unitId, date, task }: { unitId: Task['unit']['id']; date: Task['date']; task?: Task }) {\n  const tasksMap = new Map(calendar_dates.cleaningTasks);\n  const taskMap = new Map(tasksMap.get(unitId) ?? new Map());\n  taskMap.set(date, task ?? date);\n  tasksMap.set(unitId, taskMap);\n  calendar_dates.cleaningTasks = new Map(tasksMap);\n}\n"]}