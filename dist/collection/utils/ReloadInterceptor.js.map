{"version":3,"file":"ReloadInterceptor.js","sourceRoot":"","sources":["../../src/utils/ReloadInterceptor.ts"],"names":[],"mappings":"AAAA,MAAM,OAAO,iBAAiB;IACpB,QAAQ,GAAG,KAAK,CAAC;IACR,WAAW,CAAa;IAEzC;;;;;OAKG;IACH,YAAY,OAA4D;QACtE,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,IAAI,CAAC,GAAG,EAAE,GAAE,CAAC,CAAC,CAAC;QACrD,IAAI,OAAO,CAAC,YAAY,EAAE,CAAC;YACzB,IAAI,CAAC,QAAQ,EAAE,CAAC;QAClB,CAAC;IACH,CAAC;IAED,+CAA+C;IACxC,QAAQ;QACb,IAAI,IAAI,CAAC,QAAQ;YAAE,OAAO;QAC1B,MAAM,CAAC,gBAAgB,CAAC,cAAc,EAAE,IAAI,CAAC,kBAAkB,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;QACpF,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;IACvB,CAAC;IAED,8CAA8C;IACvC,UAAU;QACf,IAAI,CAAC,IAAI,CAAC,QAAQ;YAAE,OAAO;QAC3B,MAAM,CAAC,mBAAmB,CAAC,cAAc,EAAE,IAAI,CAAC,kBAAkB,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;QACvF,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;IACxB,CAAC;IAED,sDAAsD;IAC9C,kBAAkB,GAAG,CAAC,CAAoB,EAAQ,EAAE;QAC1D,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,CAAC,CAAC,cAAc,EAAE,CAAC;QACnB,CAAC,CAAC,WAAW,GAAG,EAAE,CAAC;IACrB,CAAC,CAAC;CACH","sourcesContent":["export class ReloadInterceptor {\n  private isActive = false;\n  private readonly onIntercept: () => void;\n\n  /**\n   * @param onIntercept\n   *   Called whenever a reload is intercepted (F5/Ctrl+R or beforeunload).\n   * @param autoActivate\n   *   If true, will immediately attach listeners.\n   */\n  constructor(options: { onIntercept?: () => void; autoActivate: boolean }) {\n    this.onIntercept = options.onIntercept ?? (() => {});\n    if (options.autoActivate) {\n      this.activate();\n    }\n  }\n\n  /** Begin intercepting reloads & navigations */\n  public activate(): void {\n    if (this.isActive) return;\n    window.addEventListener('beforeunload', this.handleBeforeUnload, { capture: true });\n    this.isActive = true;\n  }\n\n  /** Stop intercepting reloads & navigations */\n  public deactivate(): void {\n    if (!this.isActive) return;\n    window.removeEventListener('beforeunload', this.handleBeforeUnload, { capture: true });\n    this.isActive = false;\n  }\n\n  /** Native “Are you sure you want to leave?” dialog */\n  private handleBeforeUnload = (e: BeforeUnloadEvent): void => {\n    this.onIntercept();\n    e.preventDefault();\n    e.returnValue = '';\n  };\n}\n"]}