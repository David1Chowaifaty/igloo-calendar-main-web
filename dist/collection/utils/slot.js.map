{"version":3,"file":"slot.js","sourceRoot":"","sources":["../../src/utils/slot.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * SlotManager - A reusable service for managing slot state in Stencil components\n *\n * Usage:\n * 1. Create an instance in your component\n * 2. Initialize in componentWillLoad()\n * 3. Setup observers in componentDidLoad()\n * 4. Cleanup in disconnectedCallback()\n * 5. Check slot state using hasSlot()\n */\nexport class SlotManager {\n  private slotState = new Map<string, boolean>();\n  private slotObserver: MutationObserver | null = null;\n  private isInitialized = false;\n\n  constructor(private readonly hostElement: HTMLElement, private readonly slotNames: readonly string[], private readonly onStateChange?: () => void) {}\n\n  /**\n   * Initialize the slot state. Call this in componentWillLoad()\n   */\n  initialize(): void {\n    this.updateSlotState();\n    this.isInitialized = true;\n  }\n\n  /**\n   * Setup slot listeners and observers. Call this in componentDidLoad()\n   */\n  setupListeners(): void {\n    if (!this.isInitialized) {\n      console.warn('SlotManager: initialize() must be called before setupListeners()');\n      return;\n    }\n\n    // Listen to slotchange events\n    this.hostElement.addEventListener('slotchange', this.handleSlotChange);\n\n    // Use MutationObserver as a fallback for browsers that don't fire slotchange reliably\n    this.slotObserver = new MutationObserver(this.handleSlotChange);\n    this.slotObserver.observe(this.hostElement, {\n      childList: true,\n      subtree: true,\n      attributes: true,\n      attributeFilter: ['slot'],\n    });\n  }\n\n  /**\n   * Remove all listeners and cleanup. Call this in disconnectedCallback()\n   */\n  destroy(): void {\n    this.hostElement.removeEventListener('slotchange', this.handleSlotChange);\n    this.slotObserver?.disconnect();\n    this.slotObserver = null;\n    this.slotState.clear();\n    this.isInitialized = false;\n  }\n\n  /**\n   * Check if a specific slot has content\n   */\n  hasSlot(name: string): boolean {\n    return this.slotState.get(name) ?? false;\n  }\n\n  /**\n   * Get all slot states as a Map\n   */\n  getSlotState(): ReadonlyMap<string, boolean> {\n    return this.slotState;\n  }\n\n  /**\n   * Get all slot names that have content\n   */\n  getActiveSlots(): string[] {\n    return Array.from(this.slotState.entries())\n      .filter(([_, hasContent]) => hasContent)\n      .map(([name]) => name);\n  }\n\n  /**\n   * Manually trigger a slot state update\n   */\n  refresh(): void {\n    this.updateSlotState();\n  }\n\n  private handleSlotChange = (): void => {\n    this.updateSlotState();\n    this.onStateChange?.();\n  };\n\n  private updateSlotState(): void {\n    const newState = new Map<string, boolean>();\n\n    this.slotNames.forEach(name => {\n      newState.set(name, this.checkSlotHasContent(name));\n    });\n\n    this.slotState = newState;\n  }\n\n  private checkSlotHasContent(name: string): boolean {\n    return Array.from(this.hostElement.children).some(child => child.getAttribute('slot') === name);\n  }\n}\n\n/**\n * Convenience function to create a SlotManager with automatic lifecycle management\n * Returns helper methods that can be called directly in lifecycle hooks\n */\nexport function createSlotManager(hostElement: HTMLElement, slotNames: readonly string[], onStateChange?: () => void) {\n  const manager = new SlotManager(hostElement, slotNames, onStateChange);\n\n  return {\n    manager,\n    // Lifecycle hooks\n    initialize: () => manager.initialize(),\n    setupListeners: () => manager.setupListeners(),\n    destroy: () => manager.destroy(),\n    // Query methods\n    hasSlot: (name: string) => manager.hasSlot(name),\n    getSlotState: () => manager.getSlotState(),\n    getActiveSlots: () => manager.getActiveSlots(),\n    refresh: () => manager.refresh(),\n  };\n}\n"]}