{"version":3,"file":"ir-channel-mapping.js","sourceRoot":"","sources":["../../../../src/components/ir-channel/ir-channel-mapping/ir-channel-mapping.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Fragment, Host, State, h } from '@stencil/core';\nimport { IrMappingService } from './ir-mapping.service';\nimport channels_data, { addMapping, setMappedChannel } from '@/stores/channel.store';\nimport { RoomDetail, RatePlanDetail } from '@/models/IBooking';\nimport locales from '@/stores/locales.store';\n\n@Component({\n  tag: 'ir-channel-mapping',\n  styleUrl: 'ir-channel-mapping.css',\n  scoped: true,\n})\nexport class IrChannelMapping {\n  @State() activeMapField = '';\n  @State() availableRooms: { id: string; name: string }[] = [];\n\n  private mappingService = new IrMappingService();\n\n  setActiveField(id: string, isRoomType: boolean, roomTypeId?: string) {\n    const parentChannelId = roomTypeId?.toString();\n    const availableRooms = this.mappingService.getAppropriateRooms(isRoomType, parentChannelId);\n    if (availableRooms) {\n      this.availableRooms = availableRooms;\n    }\n    this.activeMapField = id.toString();\n  }\n\n  renderMappingStatus(\n    mappedField:\n      | {\n          hide: boolean;\n          result: RoomDetail;\n          occupancy?: number;\n        }\n      | {\n          hide: boolean;\n          result: RatePlanDetail;\n          occupancy?: number;\n        },\n    id: string,\n    isRoomType: boolean,\n    roomTypeId?: string,\n  ) {\n    if (mappedField.hide) {\n      return <div></div>;\n    }\n    if (mappedField.result) {\n      return (\n        <Fragment>\n          <div class=\"pl-2 flex-fill d-sm-none mapped_item text-blue d-flex align-items-center\">\n            <span class=\"m-0 p-0 d-flex align-items-center selected-map\">\n              <span class=\"selected-map-title\">{isRoomType ? mappedField.result.name : mappedField.result['short_name']}</span>\n              <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\n                <path\n                  fill={'var(--blue)'}\n                  d=\"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z\"\n                />\n              </svg>\n              {mappedField.occupancy}\n            </span>\n            <ir-icon class=\"ml-1 p-0\" onIconClickHandler={() => this.mappingService.removedMapping(mappedField.result.id.toString(), isRoomType)}>\n              <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\n                <path\n                  fill={'var(--blue)'}\n                  d=\"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z\"\n                />\n              </svg>\n            </ir-icon>\n          </div>\n          <div class=\"pl-2 flex-fill d-none mapped_item text-blue d-sm-flex align-items-center\">\n            <span class=\"mapped_name\">{isRoomType ? mappedField.result.name : mappedField.result['short_name']}</span>\n            <div class=\"d-flex align-items-center gap-3 flex-fill\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\n                <path\n                  fill={'var(--blue)'}\n                  d=\"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z\"\n                />\n              </svg>\n              <span>{mappedField.occupancy}</span>\n            </div>\n            <ir-button\n              variant=\"icon\"\n              onClickHandler={() => this.mappingService.removedMapping(mappedField.result.id.toString(), isRoomType)}\n              icon_name=\"trash\"\n              style={{ '--icon-size': '1rem', '--icon-button-color': '#1e9ff2', '--icon-button-hover-color': '#104064 ' }}\n            ></ir-button>\n          </div>\n        </Fragment>\n      );\n    }\n    return (\n      <div class=\"pl-2  flex-fill mapped_item\">\n        {this.activeMapField === id ? (\n          <ir-combobox\n            autoFocus\n            placeholder={locales.entries?.Lcz_NotMapped}\n            data={this.availableRooms}\n            onComboboxValueChange={e => {\n              addMapping(e.detail.data as string, this.activeMapField, isRoomType);\n              this.activeMapField = '';\n            }}\n          ></ir-combobox>\n        ) : (\n          <span class=\"cursor-pointer  not_mapped_btn\" onClick={() => this.setActiveField(id, isRoomType, roomTypeId)}>\n            {locales.entries.Lcz_NotMapped}\n          </span>\n        )}\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <Host class=\"py-md-2 px-md-2\">\n        <div class=\"d-flex p-0 m-0 w-100 justify-content-end\">\n          <button\n            onClick={() => {\n              setMappedChannel();\n            }}\n            class=\"btn refresh-btn\"\n          >\n            {locales.entries?.Lcz_Refresh}\n          </button>\n        </div>\n        <section class=\"w-100\">\n          <div class=\"pt-1 mapped_row\">\n            <p class=\"mapped_item channel_name\">{channels_data.selectedChannel?.name}</p>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\n              <path d=\"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z\" />\n            </svg>\n            <p class=\"pl-2 mapped_item channel_name\">igloorooms</p>\n          </div>\n          <div>\n            {channels_data.selectedChannel?.property?.room_types?.map(room_type => {\n              const mappedRoomType = this.mappingService.checkMappingExists(room_type.id.toString(), true);\n              return (\n                <Fragment>\n                  <div key={room_type.id} class=\"mapped_row room_type pt-1\">\n                    <p class=\"mapped_item\">{room_type.name}</p>\n\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\n                      <path d=\"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z\" />\n                    </svg>\n\n                    {this.renderMappingStatus(mappedRoomType, room_type.id, true)}\n                  </div>\n\n                  {room_type.rate_plans.map(rate_plan => {\n                    const mappedRatePlan = this.mappingService.checkMappingExists(rate_plan.id.toString(), false, room_type.id.toString());\n                    // console.log(mappedRatePlan);\n                    return (\n                      <div key={rate_plan.id} class=\" mapped_row rate_plan\">\n                        <p class=\"pl-1 submap-text mapped_item\">{rate_plan.name}</p>\n\n                        {!mappedRatePlan.hide && (\n                          <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\n                            <path\n                              fill=\"currentColor\"\n                              d=\"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z\"\n                            />\n                          </svg>\n                        )}\n\n                        {this.renderMappingStatus(mappedRatePlan, rate_plan.id, false, room_type.id)}\n                      </div>\n                    );\n                  })}\n                  {/* <tdivr>\n                    <td class=\"py-1\"></td>\n                    <td></td>\n                    <td></td>\n                  </tdivr> */}\n                </Fragment>\n              );\n            })}\n          </div>\n        </section>\n      </Host>\n    );\n  }\n}\n"]}