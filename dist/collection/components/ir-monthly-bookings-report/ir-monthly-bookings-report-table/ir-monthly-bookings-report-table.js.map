{"version":3,"file":"ir-monthly-bookings-report-table.js","sourceRoot":"","sources":["../../../../src/components/ir-monthly-bookings-report/ir-monthly-bookings-report-table/ir-monthly-bookings-report-table.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Host, Prop, h } from '@stencil/core';\nimport { DailyReport } from '../types';\nimport moment from 'moment';\n\n@Component({\n  tag: 'ir-monthly-bookings-report-table',\n  styleUrls: ['ir-monthly-bookings-report-table.css', '../../../common/table.css'],\n  scoped: true,\n})\nexport class IrMonthlyBookingsReportTable {\n  @Prop() reports: DailyReport[] = [];\n  render() {\n    const totalUnits = this.reports?.reduce((prev, curr) => prev + curr.units_booked, 0) ?? 0;\n    return (\n      <Host class={'card p-1  table-container table-responsive'}>\n        <table class=\"table\">\n          <thead class=\"table-header\">\n            <tr>\n              <th class=\"text-center\">Date</th>\n              <th class=\"text-center\">Units booked</th>\n              <th>Occupancy</th>\n            </tr>\n          </thead>\n          <tbody>\n            {this.reports.length === 0 && (\n              <tr>\n                <td colSpan={3} class={'text-center'} style={{ height: '30vh' }}>\n                  No data found\n                </td>\n              </tr>\n            )}\n            {this.reports.map(report => {\n              const mainPercentage = `${parseFloat(report.occupancy_percent.toString()).toFixed(2)}%`;\n              const secondaryPercentage = report.last_year ? `${parseFloat(report.last_year.occupancy_percent.toString()).toFixed(2)}%` : null;\n              const reportDate = moment(report.day, 'YYYY-MM-DD');\n              const isFutureDate = moment().isBefore(reportDate, 'dates');\n              return (\n                <tr key={report.day} class={`ir-table-row ${isFutureDate ? 'future-report' : ''}`}>\n                  <td class={'text-center'}>{reportDate.format('D')}</td>\n                  <td class=\"text-center\">\n                    <div class={'d-flex flex-column'} style={{ gap: '0.5rem' }}>\n                      <p class={`p-0 m-0 ${report.last_year?.units_booked ? 'font-weight-bold' : ''}`}>{report.units_booked}</p>\n                      {report.last_year?.units_booked > 0 && <p class=\"p-0 m-0\">{report.last_year?.units_booked}</p>}\n                    </div>\n                  </td>\n                  <td>\n                    <div class={'d-flex flex-column'} style={{ gap: '0.5rem' }}>\n                      <ir-progress-indicator percentage={mainPercentage}></ir-progress-indicator>\n                      {report.last_year?.occupancy_percent > 0 && <ir-progress-indicator percentage={secondaryPercentage} color=\"secondary\"></ir-progress-indicator>}\n                    </div>\n                  </td>\n                </tr>\n              );\n            })}\n          </tbody>\n          <tfoot>\n            <tr>\n              <td></td>\n              <td>\n                {' '}\n                <b style={{ whiteSpace: 'nowrap' }}>Total: {totalUnits}</b>\n              </td>\n              <td colSpan={1} class=\"text-right\" style={{ whiteSpace: 'nowrap' }}>\n                <div class={'d-flex align-items-center justify-content-end'} style={{ gap: '1rem', paddingTop: '0.5rem' }}>\n                  <div class=\"d-flex align-items-center\" style={{ gap: '0.5rem' }}>\n                    <div class=\"legend bg-primary\"></div>\n                    <p class=\"p-0 m-0\">Selected period </p>\n                  </div>\n                  <div class=\"d-flex align-items-center\" style={{ gap: '0.5rem' }}>\n                    <div class=\"legend secondary\"></div>\n                    <p class=\"p-0 m-0\">Previous year</p>\n                  </div>\n                </div>\n              </td>\n            </tr>\n          </tfoot>\n        </table>\n      </Host>\n    );\n  }\n}\n"]}