{"version":3,"file":"ir-monthly-bookings-report-table.js","sourceRoot":"","sources":["../../../../src/components/ir-monthly-bookings-report/ir-monthly-bookings-report-table/ir-monthly-bookings-report-table.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,MAAM,eAAe,CAAC;AAEzD,OAAO,MAAM,MAAM,QAAQ,CAAC;AAO5B,MAAM,OAAO,4BAA4B;IALzC;QAMU,YAAO,GAAkB,EAAE,CAAC;KAkDrC;IAjDC,MAAM;;QACJ,MAAM,UAAU,GAAG,MAAA,MAAA,IAAI,CAAC,OAAO,0CAAE,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,EAAE,CAAC,IAAI,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,mCAAI,CAAC,CAAC;QAC1F,OAAO,CACL,EAAC,IAAI,qDAAC,KAAK,EAAE,4CAA4C;YACvD,8DAAO,KAAK,EAAC,OAAO;gBAClB,8DAAO,KAAK,EAAC,cAAc;oBACzB;wBACE,2DAAI,KAAK,EAAC,aAAa,WAAU;wBACjC,2DAAI,KAAK,EAAC,aAAa,mBAAkB;wBACzC,yEAAkB,CACf,CACC;gBACR,gEACG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;;oBACzB,MAAM,cAAc,GAAG,GAAG,UAAU,CAAC,MAAM,CAAC,iBAAiB,CAAC,QAAQ,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC;oBACxF,MAAM,mBAAmB,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,SAAS,CAAC,iBAAiB,CAAC,QAAQ,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC;oBACjI,MAAM,UAAU,GAAG,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,YAAY,CAAC,CAAC;oBACpD,MAAM,YAAY,GAAG,MAAM,EAAE,CAAC,QAAQ,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;oBAC5D,OAAO,CACL,UAAI,GAAG,EAAE,MAAM,CAAC,GAAG,EAAE,KAAK,EAAE,gBAAgB,YAAY,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE,EAAE;wBAC/E,UAAI,KAAK,EAAE,aAAa,IAAG,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,CAAM;wBACxD,UAAI,KAAK,EAAC,aAAa;4BACrB,WAAK,KAAK,EAAE,oBAAoB,EAAE,KAAK,EAAE,EAAE,GAAG,EAAE,QAAQ,EAAE;gCACxD,SAAG,KAAK,EAAE,WAAW,CAAA,MAAA,MAAM,CAAC,SAAS,0CAAE,YAAY,EAAC,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC,EAAE,EAAE,IAAG,MAAM,CAAC,YAAY,CAAK;gCACzG,CAAA,MAAA,MAAM,CAAC,SAAS,0CAAE,YAAY,KAAI,SAAG,KAAK,EAAC,SAAS,IAAE,MAAA,MAAM,CAAC,SAAS,0CAAE,YAAY,CAAK,CACtF,CACH;wBACL;4BACE,WAAK,KAAK,EAAE,oBAAoB,EAAE,KAAK,EAAE,EAAE,GAAG,EAAE,QAAQ,EAAE;gCACxD,6BAAuB,UAAU,EAAE,cAAc,GAA0B;gCAC1E,CAAA,MAAA,MAAM,CAAC,SAAS,0CAAE,iBAAiB,KAAI,6BAAuB,UAAU,EAAE,mBAAmB,EAAE,KAAK,EAAC,WAAW,GAAyB,CACtI,CACH,CACF,CACN,CAAC;gBACJ,CAAC,CAAC,CACI;gBACR;oBACE;wBACE,2DAAI,OAAO,EAAE,CAAC,GAAO;wBACrB,2DAAI,KAAK,EAAC,YAAY;4BACpB;;gCAAW,UAAU,CAAK,CACvB,CACF,CACC,CACF,CACH,CACR,CAAC;IACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import { Component, Host, Prop, h } from '@stencil/core';\nimport { DailyReport } from '../types';\nimport moment from 'moment';\n\n@Component({\n  tag: 'ir-monthly-bookings-report-table',\n  styleUrls: ['ir-monthly-bookings-report-table.css', '../../../common/table.css'],\n  scoped: true,\n})\nexport class IrMonthlyBookingsReportTable {\n  @Prop() reports: DailyReport[] = [];\n  render() {\n    const totalUnits = this.reports?.reduce((prev, curr) => prev + curr.units_booked, 0) ?? 0;\n    return (\n      <Host class={'card p-1  table-container table-responsive'}>\n        <table class=\"table\">\n          <thead class=\"table-header\">\n            <tr>\n              <th class=\"text-center\">Date</th>\n              <th class=\"text-center\">Units booked</th>\n              <th>Occupancy</th>\n            </tr>\n          </thead>\n          <tbody>\n            {this.reports.map(report => {\n              const mainPercentage = `${parseFloat(report.occupancy_percent.toString()).toFixed(2)}%`;\n              const secondaryPercentage = report.last_year ? `${parseFloat(report.last_year.occupancy_percent.toString()).toFixed(2)}%` : null;\n              const reportDate = moment(report.day, 'YYYY-MM-DD');\n              const isFutureDate = moment().isBefore(reportDate, 'dates');\n              return (\n                <tr key={report.day} class={`ir-table-row ${isFutureDate ? 'future-report' : ''}`}>\n                  <td class={'text-center'}>{reportDate.format('DD')}</td>\n                  <td class=\"text-center\">\n                    <div class={'d-flex flex-column'} style={{ gap: '0.5rem' }}>\n                      <p class={`p-0 m-0 ${report.last_year?.units_booked ? 'font-weight-bold' : ''}`}>{report.units_booked}</p>\n                      {report.last_year?.units_booked && <p class=\"p-0 m-0\">{report.last_year?.units_booked}</p>}\n                    </div>\n                  </td>\n                  <td>\n                    <div class={'d-flex flex-column'} style={{ gap: '0.5rem' }}>\n                      <ir-progress-indicator percentage={mainPercentage}></ir-progress-indicator>\n                      {report.last_year?.occupancy_percent && <ir-progress-indicator percentage={secondaryPercentage} color=\"secondary\"></ir-progress-indicator>}\n                    </div>\n                  </td>\n                </tr>\n              );\n            })}\n          </tbody>\n          <tfoot>\n            <tr>\n              <td colSpan={2}></td>\n              <td class=\"text-right\">\n                <b>Total: {totalUnits}</b>\n              </td>\n            </tr>\n          </tfoot>\n        </table>\n      </Host>\n    );\n  }\n}\n"]}