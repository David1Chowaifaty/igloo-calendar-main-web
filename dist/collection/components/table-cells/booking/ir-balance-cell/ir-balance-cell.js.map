{"version":3,"file":"ir-balance-cell.js","sourceRoot":"","sources":["../../../../../src/components/table-cells/booking/ir-balance-cell/ir-balance-cell.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Payment } from '@/components/ir-booking-details/types';\nimport { Booking } from '@/models/booking.dto';\nimport calendar_data from '@/stores/calendar-data';\nimport { formatAmount } from '@/utils/utils';\nimport { Component, Event, EventEmitter, Host, Prop, h } from '@stencil/core';\nimport moment from 'moment';\n\n@Component({\n  tag: 'ir-balance-cell',\n  styleUrl: 'ir-balance-cell.css',\n  scoped: true,\n})\nexport class IrBalanceCell {\n  @Prop() label: string;\n  @Prop({ reflect: true }) display: 'inline' | 'block' = 'block';\n  @Prop() financial!: Booking['financial'];\n  @Prop() statusCode!: string;\n  @Prop() isDirect!: boolean;\n  @Prop() bookingNumber!: string;\n  @Prop() currencySymbol!: string;\n  @Prop() removeBalance: boolean;\n\n  @Event({ composed: true, bubbles: true }) payBookingBalance: EventEmitter<{ booking_nbr: string; payment: Payment }>;\n\n  render() {\n    return (\n      <Host>\n        {this.label && <p class=\"cell-label\">{this.label}:</p>}\n        {this.removeBalance && this.isDirect && this.financial.due_amount !== 0 ? null : (\n          <p class=\"ir-price\" style={{ fontWeight: '400' }}>\n            {formatAmount(this.currencySymbol, this.removeBalance ? 0 : this.financial.gross_total)}\n          </p>\n        )}\n        <div class=\"balance_button-container\">\n          {['003', '004'].includes(this.statusCode) && this.isDirect\n            ? this.financial.cancelation_penality_as_if_today !== 0 &&\n              this.financial.due_amount !== 0 && (\n                <ir-custom-button\n                  onClickHandler={() => {\n                    this.payBookingBalance.emit({\n                      booking_nbr: this.bookingNumber,\n                      payment: {\n                        amount: Math.abs(this.financial.cancelation_penality_as_if_today),\n                        currency: calendar_data.property.currency,\n                        date: moment().format('YYYY-MM-DD'),\n                        designation: null,\n                        payment_method: null,\n                        payment_type: { code: this.financial.cancelation_penality_as_if_today < 0 ? '010' : '001', description: null, operation: null },\n                        id: -1,\n                        reference: '',\n                      },\n                    });\n                  }}\n                  style={{ '--ir-c-btn-height': 'fit-content', '--ir-c-btn-padding': '0.25rem', '--ir-c-btn-font-size': '0.725rem' }}\n                  size=\"small\"\n                  variant=\"danger\"\n                  appearance=\"outlined\"\n                >\n                  <span>{this.financial.cancelation_penality_as_if_today < 0 ? 'Refund' : 'Charge'} </span>\n                  {formatAmount(this.currencySymbol, Math.abs(this.financial.cancelation_penality_as_if_today))}\n                </ir-custom-button>\n              )\n            : this.financial.due_amount !== 0 && (\n                <ir-custom-button\n                  onClickHandler={() => {\n                    this.payBookingBalance.emit({\n                      booking_nbr: this.bookingNumber,\n                      payment: {\n                        amount: this.financial.due_amount,\n                        currency: calendar_data.property.currency,\n                        date: moment().format('YYYY-MM-DD'),\n                        designation: null,\n                        payment_method: null,\n                        payment_type: { code: '001', description: null, operation: null },\n                        id: -1,\n                        reference: '',\n                      },\n                    });\n                  }}\n                  style={{ '--ir-c-btn-height': 'fit-content', '--ir-c-btn-padding': '0.25rem', '--ir-c-btn-font-size': '0.725rem' }}\n                  size=\"small\"\n                  variant=\"danger\"\n                  appearance=\"outlined\"\n                >\n                  {formatAmount(this.currencySymbol, this.financial.due_amount)}\n                </ir-custom-button>\n              )}\n        </div>\n      </Host>\n    );\n  }\n}\n"]}