{"version":3,"file":"ir-booking-listing-mobile-card.js","sourceRoot":"","sources":["../../../../src/components/ir-booking-listing/ir-booking-listing-mobile-card/ir-booking-listing-mobile-card.tsx"],"names":[],"mappings":"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","sourcesContent":["import { IrActionButton } from '@/components/table-cells/booking/ir-actions-cell/ir-actions-cell';\nimport { Booking } from '@/models/booking.dto';\nimport { getPrivateNote } from '@/utils/booking';\nimport { Component, Event, EventEmitter, Prop, h } from '@stencil/core';\n\n@Component({\n  tag: 'ir-booking-listing-mobile-card',\n  styleUrl: 'ir-booking-listing-mobile-card.css',\n  scoped: true,\n})\nexport class IrBookingListingMobileCard {\n  @Prop() booking: Booking;\n  @Prop() totalPersons?: number;\n  @Prop() lastManipulation?: Booking['ota_manipulations'] extends Array<infer T> ? T : never;\n  @Prop() extraServicesLabel?: string;\n\n  @Event() irBookingCardAction: EventEmitter<{ action: IrActionButton; booking: Booking }>;\n\n  private emitAction(action: IrActionButton) {\n    if (!this.booking) {\n      return;\n    }\n    this.irBookingCardAction.emit({ action, booking: this.booking });\n  }\n\n  private renderRooms() {\n    if (!this.booking?.rooms?.length) {\n      return null;\n    }\n\n    return this.booking.rooms.map((room, idx) => (\n      <div class=\"mobile-card__room\" key={room.identifier ?? idx}>\n        <ir-unit-cell room={room}></ir-unit-cell>\n        {idx < this.booking.rooms.length - 1 && <span class=\"mobile-card__room-divider\">,</span>}\n      </div>\n    ));\n  }\n\n  render() {\n    if (!this.booking) {\n      return null;\n    }\n\n    const identifier = `${this.booking.booking_nbr}`;\n\n    return (\n      <wa-card>\n        <div slot=\"header\" class=\"mobile-card__header\">\n          <ir-booking-number-cell\n            origin={this.booking.origin}\n            source={this.booking.source}\n            channelBookingNumber={this.booking.channel_booking_nbr}\n            bookingNumber={this.booking.booking_nbr}\n          ></ir-booking-number-cell>\n          <ir-status-activity-cell\n            lastManipulation={this.lastManipulation}\n            showManipulationBadge={!!this.lastManipulation}\n            showModifiedBadge={!this.lastManipulation && this.booking.events?.length > 0 && this.booking.events[0].type.toLowerCase() === 'modified'}\n            status={this.booking.status}\n            isRequestToCancel={this.booking.is_requested_to_cancel}\n            bookingNumber={this.booking.booking_nbr}\n          ></ir-status-activity-cell>\n        </div>\n        <div class=\"mobile-card__body\">\n          <ir-booked-by-cell\n            display=\"inline\"\n            class=\"mobile-card__text-center\"\n            label=\"Booked by\"\n            clickableGuest\n            showRepeatGuestBadge={this.booking.guest.nbr_confirmed_bookings > 1 && !this.booking.agent}\n            guest={this.booking.guest}\n            identifier={identifier}\n            cellId={`mobile-${identifier}`}\n            showPersons\n            showPrivateNoteDot={getPrivateNote(this.booking.extras)}\n            totalPersons={this.totalPersons?.toString()}\n            showPromoIcon={!!this.booking.promo_key}\n            promoKey={this.booking.promo_key}\n            showLoyaltyIcon={this.booking.is_in_loyalty_mode && !this.booking.promo_key}\n          ></ir-booked-by-cell>\n\n          <div class=\"mobile-card__rooms\">\n            {this.renderRooms()}\n            {this.booking.extra_services && this.extraServicesLabel && <p class=\"mobile-card__extra-services\">{this.extraServicesLabel}</p>}\n          </div>\n\n          <ir-booked-on-cell display=\"inline\" label=\"Booked on\" bookedOn={this.booking.booked_on}></ir-booked-on-cell>\n\n          <div class=\"mobile-card__dates\">\n            <ir-dates-cell display=\"inline\" checkInLabel=\"Check-in\" checkoutLabel=\"Check-out\" checkIn={this.booking.from_date} checkOut={this.booking.to_date}></ir-dates-cell>\n          </div>\n\n          <ir-balance-cell\n            display=\"inline\"\n            label=\"Amount\"\n            bookingNumber={this.booking.booking_nbr}\n            isDirect={this.booking.is_direct}\n            statusCode={this.booking.status.code}\n            currencySymbol={this.booking.currency.symbol}\n            financial={this.booking.financial}\n          ></ir-balance-cell>\n        </div>\n        <div slot=\"footer\" class=\"mobile-card__actions\">\n          <ir-custom-button class=\"mobile-card__action-button\" onClickHandler={() => this.emitAction('edit')} appearance=\"outlined\">\n            Edit\n          </ir-custom-button>\n          <ir-custom-button class=\"mobile-card__action-button\" onClickHandler={() => this.emitAction('delete')} variant=\"danger\">\n            Delete\n          </ir-custom-button>\n        </div>\n      </wa-card>\n    );\n  }\n}\n"]}