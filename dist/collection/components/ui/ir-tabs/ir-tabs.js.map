{"version":3,"file":"ir-tabs.js","sourceRoot":"","sources":["../../../../src/components/ui/ir-tabs/ir-tabs.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Element, Event, EventEmitter, Host, Prop, State, h } from '@stencil/core';\n\nexport type Tab = { id: string; label: string };\n\n@Component({\n  tag: 'ir-tabs',\n  styleUrl: 'ir-tabs.css',\n  scoped: true,\n})\nexport class IrTabs {\n  @Element() el: HTMLElement;\n\n  /**\n   * Array of tab objects containing id and label\n   * @type {Tab[]}\n   * @default []\n   */\n  @Prop() tabs: Tab[] = [];\n\n  /**\n   * ID of the tab that should be selected initially\n   * @type {string}\n   * @default undefined\n   */\n  @Prop() initialTab: string;\n\n  /**\n   * Whether the tabs are disabled\n   * @type {boolean}\n   * @default false\n   */\n  @Prop() disabled: boolean = false;\n\n  /**\n   * Aria label for the tab list\n   * @type {string}\n   * @default 'Tabs'\n   */\n  @Prop() ariaLabel: string = 'Tabs';\n\n  @State() _selectedTab: Tab;\n\n  /**\n   * Emitted when a tab is selected\n   * @event tabChanged\n   * @type {CustomEvent<Tab>}\n   */\n  @Event() tabChanged: EventEmitter<Tab>;\n\n  private activeIndicator: HTMLSpanElement;\n  private animationFrameId: number;\n\n  componentWillLoad() {\n    const tab = this.tabs?.find(t => t.id === this.initialTab);\n    if (tab) {\n      this.selectTab(tab);\n    } else if (this.tabs?.length > 0) {\n      // Select first tab if no initial tab is specified\n      this.selectTab(this.tabs[0]);\n    }\n  }\n\n  // componentDidLoad() {\n  //   this.updateActiveIndicator();\n  // }\n\n  disconnectedCallback() {\n    if (this.animationFrameId) {\n      cancelAnimationFrame(this.animationFrameId);\n    }\n  }\n\n  private updateActiveIndicator() {\n    // if (this.animationFrameId) {\n    //   cancelAnimationFrame(this.animationFrameId);\n    // }\n    // this.animationFrameId = requestAnimationFrame(() => {\n    //   const selectedTab = this.el.querySelector(`button.tab[data-state=\"selected\"]`);\n    //   if (selectedTab && this.activeIndicator) {\n    //     const { left, width } = selectedTab.getBoundingClientRect();\n    //     const parentLeft = this.el.getBoundingClientRect().left;\n    //     const position = left - parentLeft;\n    //     this.activeIndicator.style.width = `${width}px`;\n    //     this.activeIndicator.style.transform = `translateX(${position}px)`;\n    //   }\n    // });\n    if (this.animationFrameId) {\n      cancelAnimationFrame(this.animationFrameId);\n    }\n    requestAnimationFrame(() => {\n      const selectedTab = this.el.querySelector(`.tab[data-state=\"selected\"]`);\n      if (selectedTab) {\n        const { left, width } = selectedTab.getBoundingClientRect();\n        const parentLeft = this.el.getBoundingClientRect().left;\n        const position = left - parentLeft - this.remSize;\n        this.activeIndicator.style.width = `${width - this.remSize}px`;\n        this.activeIndicator.style.transform = `translateX(${position}px)`;\n      }\n    });\n  }\n  private remSize = (() => {\n    const fontSize = getComputedStyle(document.documentElement).fontSize;\n    return parseFloat(fontSize);\n  })();\n  private selectTab(tab: Tab) {\n    if (this.disabled) return;\n\n    this._selectedTab = tab;\n    this.updateActiveIndicator();\n    this.tabChanged.emit(tab);\n  }\n\n  private handleKeyDown(event: KeyboardEvent, currentTab: Tab) {\n    if (this.disabled) return;\n\n    const currentIndex = this.tabs.findIndex(t => t.id === currentTab.id);\n    let nextIndex = currentIndex;\n\n    switch (event.key) {\n      case 'ArrowRight':\n        event.preventDefault();\n        nextIndex = (currentIndex + 1) % this.tabs.length;\n        break;\n      case 'ArrowLeft':\n        event.preventDefault();\n        nextIndex = currentIndex === 0 ? this.tabs.length - 1 : currentIndex - 1;\n        break;\n      case 'Home':\n        event.preventDefault();\n        nextIndex = 0;\n        break;\n      case 'End':\n        event.preventDefault();\n        nextIndex = this.tabs.length - 1;\n        break;\n      case 'Enter':\n      case ' ':\n        event.preventDefault();\n        this.selectTab(currentTab);\n        return;\n      default:\n        return;\n    }\n\n    const nextTab = this.tabs[nextIndex];\n    if (nextTab) {\n      this.selectTab(nextTab);\n      requestAnimationFrame(() => {\n        const tabButton = this.el.querySelector(`button.tab[data-tab-id=\"${nextTab.id}\"]`) as HTMLButtonElement;\n        if (tabButton) {\n          tabButton.focus();\n        }\n      });\n    }\n  }\n\n  render() {\n    return (\n      <Host role=\"tablist\" aria-label={this.ariaLabel} aria-orientation=\"horizontal\">\n        {this.tabs.map(tab => (\n          <button\n            class=\"tab\"\n            key={tab.id}\n            type=\"button\"\n            data-tab-id={tab.id}\n            role=\"tab\"\n            tabindex={this._selectedTab?.id === tab.id ? 0 : -1}\n            aria-selected={this._selectedTab?.id === tab.id ? 'true' : 'false'}\n            aria-controls={`tabpanel-${tab.id}`}\n            id={`tab-${tab.id}`}\n            disabled={this.disabled}\n            data-state={this._selectedTab?.id === tab.id ? 'selected' : undefined}\n            onClick={() => this.selectTab(tab)}\n            onKeyDown={event => this.handleKeyDown(event, tab)}\n          >\n            {tab.label}\n          </button>\n        ))}\n        <span class=\"active-indicator\" ref={el => (this.activeIndicator = el)}></span>\n      </Host>\n    );\n  }\n}\n"]}