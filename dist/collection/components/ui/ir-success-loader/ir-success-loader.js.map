{"version":3,"file":"ir-success-loader.js","sourceRoot":"","sources":["../../../../src/components/ui/ir-success-loader/ir-success-loader.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Event, EventEmitter, Host, Prop, State, Watch, h } from '@stencil/core';\n\ntype LoaderPhase = 'spinner' | 'success';\n\n@Component({\n  tag: 'ir-success-loader',\n  styleUrl: 'ir-success-loader.css',\n  shadow: true,\n})\nexport class IrSuccessLoader {\n  /**\n   * How long the spinner should be shown before transitioning to the success icon.\n   * Value is expressed in milliseconds.\n   */\n  @Prop() spinnerDuration = 1500;\n\n  /**\n   * How long the success icon should be shown before the loader dispatches the completion event.\n   * Value is expressed in milliseconds.\n   */\n  @Prop() successDuration = 1000;\n\n  /**\n   * Whether the loader should automatically start its cycle when it becomes active.\n   */\n  @Prop() autoStart = true;\n\n  /**\n   * Controls the visibility of the loader. Setting this to `true` starts the spinner/success cycle.\n   */\n  @Prop({ mutable: true, reflect: true }) active = true;\n\n  /**\n   * Emit when the loader finishes the success state and should be hidden by the parent.\n   */\n  @Event({ bubbles: true, composed: true }) loaderComplete: EventEmitter<void>;\n\n  @State() private phase: LoaderPhase = 'spinner';\n\n  private spinnerTimer?: number;\n  private successTimer?: number;\n\n  componentWillLoad() {\n    if (this.autoStart && this.active) {\n      this.startCycle();\n    }\n  }\n\n  disconnectedCallback() {\n    this.clearTimers();\n  }\n\n  @Watch('active')\n  protected onActiveChange(isActive: boolean) {\n    if (isActive) {\n      if (this.autoStart) {\n        this.startCycle();\n      }\n    } else {\n      this.resetCycle();\n    }\n  }\n\n  @Watch('spinnerDuration')\n  @Watch('successDuration')\n  protected onDurationChange() {\n    if (this.active && this.autoStart) {\n      this.startCycle();\n    }\n  }\n\n  private startCycle() {\n    this.clearTimers();\n    this.phase = 'spinner';\n    const spinnerDelay = Math.max(0, Number(this.spinnerDuration) || 0);\n    if (spinnerDelay === 0) {\n      this.showSuccess();\n      return;\n    }\n    this.spinnerTimer = window.setTimeout(() => this.showSuccess(), spinnerDelay);\n  }\n\n  private showSuccess() {\n    this.phase = 'success';\n    const successDelay = Math.max(0, Number(this.successDuration) || 0);\n    if (successDelay === 0) {\n      this.handleCompletion();\n      return;\n    }\n    this.successTimer = window.setTimeout(() => this.handleCompletion(), successDelay);\n  }\n\n  private handleCompletion() {\n    this.loaderComplete.emit();\n    this.active = false;\n  }\n\n  private resetCycle() {\n    this.clearTimers();\n    this.phase = 'spinner';\n  }\n\n  private clearTimers() {\n    if (this.spinnerTimer) {\n      clearTimeout(this.spinnerTimer);\n      this.spinnerTimer = undefined;\n    }\n    if (this.successTimer) {\n      clearTimeout(this.successTimer);\n      this.successTimer = undefined;\n    }\n  }\n\n  render() {\n    return (\n      <Host>\n        {this.phase === 'spinner' ? <wa-spinner></wa-spinner> : <wa-icon part=\"check\" name=\"check\" style={{ color: 'var(--wa-color-success-fill-loud,#45b16d)' }}></wa-icon>}\n      </Host>\n    );\n  }\n}\n"]}