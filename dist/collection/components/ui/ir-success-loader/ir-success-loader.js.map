{"version":3,"file":"ir-success-loader.js","sourceRoot":"","sources":["../../../../src/components/ui/ir-success-loader/ir-success-loader.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Event, EventEmitter, Host, Prop, State, Watch, h } from '@stencil/core';\n\ntype LoaderPhase = 'spinner' | 'success';\n\n@Component({\n  tag: 'ir-success-loader',\n  styleUrl: 'ir-success-loader.css',\n  shadow: true,\n})\nexport class IrSuccessLoader {\n  /**\n   * How long the spinner should be shown before transitioning to the success icon.\n   * Value is expressed in milliseconds.\n   */\n  @Prop() spinnerDuration = 1500;\n\n  /**\n   * How long the success icon should be shown before the loader dispatches the completion event.\n   * Value is expressed in milliseconds.\n   */\n  @Prop() successDuration = 1000;\n\n  /**\n   * Whether the loader should automatically start its cycle when it becomes active.\n   */\n  @Prop() autoStart = true;\n\n  /**\n   * Controls the visibility of the loader. Setting this to `true` starts the spinner/success cycle.\n   */\n  @Prop({ mutable: true, reflect: true }) active = true;\n\n  /**\n   * Emit when the loader finishes the success state and should be hidden by the parent.\n   */\n  @Event({ bubbles: true, composed: true }) loaderComplete: EventEmitter<void>;\n\n  @State() private phase: LoaderPhase = 'spinner';\n\n  private spinnerTimer?: number;\n  private successTimer?: number;\n\n  componentWillLoad() {\n    if (this.autoStart && this.active) {\n      this.startCycle();\n    }\n  }\n\n  disconnectedCallback() {\n    this.clearTimers();\n  }\n\n  @Watch('active')\n  protected onActiveChange(isActive: boolean) {\n    if (isActive) {\n      if (this.autoStart) {\n        this.startCycle();\n      }\n    } else {\n      this.resetCycle();\n    }\n  }\n\n  @Watch('spinnerDuration')\n  @Watch('successDuration')\n  protected onDurationChange() {\n    if (this.active && this.autoStart) {\n      this.startCycle();\n    }\n  }\n\n  private startCycle() {\n    this.clearTimers();\n    this.phase = 'spinner';\n    const spinnerDelay = Math.max(0, Number(this.spinnerDuration) || 0);\n    if (spinnerDelay === 0) {\n      this.showSuccess();\n      return;\n    }\n    this.spinnerTimer = window.setTimeout(() => this.showSuccess(), spinnerDelay);\n  }\n\n  private showSuccess() {\n    this.phase = 'success';\n    const successDelay = Math.max(0, Number(this.successDuration) || 0);\n    if (successDelay === 0) {\n      this.handleCompletion();\n      return;\n    }\n    this.successTimer = window.setTimeout(() => this.handleCompletion(), successDelay);\n  }\n\n  private handleCompletion() {\n    this.loaderComplete.emit();\n    this.active = false;\n  }\n\n  private resetCycle() {\n    this.clearTimers();\n    this.phase = 'spinner';\n  }\n\n  private clearTimers() {\n    if (this.spinnerTimer) {\n      clearTimeout(this.spinnerTimer);\n      this.spinnerTimer = undefined;\n    }\n    if (this.successTimer) {\n      clearTimeout(this.successTimer);\n      this.successTimer = undefined;\n    }\n  }\n\n  render() {\n    return (\n      <Host>\n        {this.phase === 'spinner' ? (\n          <svg part=\"spinner\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n              d=\"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z\"\n              class=\"spinner\"\n            />\n          </svg>\n        ) : (\n          <ir-icons part=\"check\" name=\"check\" style={{ color: '#45b16d' }}></ir-icons>\n        )}\n      </Host>\n    );\n  }\n}\n"]}