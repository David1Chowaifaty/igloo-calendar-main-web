{"version":3,"file":"ir-dialog.js","sourceRoot":"","sources":["../../../../src/components/ui/ir-dialog/ir-dialog.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Host, h, Element, Method, State, Event, EventEmitter, Prop, Watch } from '@stencil/core';\n\n@Component({\n  tag: 'ir-dialog',\n  styleUrl: 'ir-dialog.css',\n  shadow: true,\n})\nexport class IrDialog {\n  private static dialogIds = 0;\n\n  @Element() hostEl!: HTMLElement;\n\n  /**\n   * Controls whether the dialog is open. Reflects to the host attribute for CSS hooks.\n   */\n  @Prop({ mutable: true, reflect: true }) open = false;\n\n  /**\n   * Emits when the open state changes due to user interaction or programmatic control.\n   */\n  @Event() openChange: EventEmitter<boolean>;\n\n  @State() private hasTitleSlot = false;\n  @State() private hasBodySlot = false;\n\n  private dialogEl?: HTMLDialogElement;\n  private previouslyFocused: HTMLElement | null = null;\n  private readonly instanceId = ++IrDialog.dialogIds;\n\n  private get titleId() {\n    return `ir-dialog-title-${this.instanceId}`;\n  }\n\n  private get descriptionId() {\n    return `ir-dialog-description-${this.instanceId}`;\n  }\n\n  componentDidLoad() {\n    if (!this.dialogEl) {\n      return;\n    }\n\n    this.dialogEl.addEventListener('cancel', this.handleCancel);\n    this.dialogEl.addEventListener('close', this.handleNativeClose);\n\n    this.syncSlotState();\n\n    if (this.open) {\n      this.showDialog(false);\n    }\n  }\n\n  disconnectedCallback() {\n    if (this.dialogEl) {\n      this.dialogEl.removeEventListener('cancel', this.handleCancel);\n      this.dialogEl.removeEventListener('close', this.handleNativeClose);\n    }\n    this.restoreFocus();\n  }\n\n  @Watch('open')\n  protected handleOpenChange(open: boolean) {\n    if (open) {\n      this.showDialog();\n    } else {\n      this.hideDialog();\n    }\n  }\n\n  /**\n   * Opens the dialog programmatically using the native `showModal` API.\n   */\n  @Method()\n  async openModal() {\n    this.open = true;\n  }\n\n  /**\n   * Closes the dialog programmatically and restores focus to the previously active element.\n   */\n  @Method()\n  async closeModal() {\n    this.open = false;\n  }\n\n  private showDialog(emit = true) {\n    if (!this.dialogEl || this.dialogEl.open) {\n      return;\n    }\n\n    this.previouslyFocused = document.activeElement as HTMLElement;\n\n    if (typeof this.dialogEl.showModal === 'function') {\n      this.dialogEl.showModal();\n    } else {\n      this.dialogEl.setAttribute('open', '');\n    }\n\n    if (emit) {\n      this.openChange.emit(true);\n    }\n  }\n\n  private hideDialog(emit = true) {\n    if (!this.dialogEl) {\n      return;\n    }\n\n    if (this.dialogEl.open) {\n      this.dialogEl.close();\n    }\n\n    this.restoreFocus();\n\n    if (emit) {\n      this.openChange.emit(false);\n    }\n  }\n\n  private handleCancel = (event: Event) => {\n    event.preventDefault();\n    this.closeModal();\n  };\n\n  private handleNativeClose = () => {\n    if (this.open) {\n      // Ensure the public prop stays in sync when the native dialog closes (e.g. via form submission).\n      this.open = false;\n      return;\n    }\n\n    this.hideDialog(false);\n  };\n\n  private restoreFocus() {\n    if (this.previouslyFocused && typeof this.previouslyFocused.focus === 'function') {\n      this.previouslyFocused.focus({ preventScroll: true });\n    }\n    this.previouslyFocused = null;\n  }\n\n  private onTitleSlotChange = (event: Event) => {\n    const slot = event.target as HTMLSlotElement;\n    this.hasTitleSlot = slot.assignedNodes({ flatten: true }).length > 0;\n  };\n\n  private onBodySlotChange = (event: Event) => {\n    const slot = event.target as HTMLSlotElement;\n    this.hasBodySlot = slot.assignedNodes({ flatten: true }).length > 0;\n  };\n\n  private onCloseButtonClick = () => {\n    this.closeModal();\n  };\n\n  private syncSlotState() {\n    if (!this.dialogEl) {\n      return;\n    }\n\n    const titleSlot = this.dialogEl.querySelector('slot[name=\"modal-title\"]') as HTMLSlotElement | null;\n    const bodySlot = this.dialogEl.querySelector('slot[name=\"modal-body\"]') as HTMLSlotElement | null;\n\n    if (titleSlot) {\n      this.hasTitleSlot = titleSlot.assignedNodes({ flatten: true }).length > 0;\n    }\n\n    if (bodySlot) {\n      this.hasBodySlot = bodySlot.assignedNodes({ flatten: true }).length > 0;\n    }\n  }\n\n  render() {\n    const labelledBy = this.hasTitleSlot ? this.titleId : undefined;\n    const describedBy = this.hasBodySlot ? this.descriptionId : undefined;\n\n    return (\n      <Host>\n        <dialog\n          ref={el => (this.dialogEl = el as HTMLDialogElement)}\n          class=\"dialog\"\n          role=\"dialog\"\n          aria-modal=\"true\"\n          aria-labelledby={labelledBy}\n          aria-describedby={describedBy}\n        >\n          <div class=\"dialog__content\" role=\"document\">\n            <header class=\"dialog__header\" id={labelledBy}>\n              <slot name=\"modal-title\" onSlotchange={this.onTitleSlotChange}></slot>\n              <button type=\"button\" class=\"dialog__close-button\" onClick={this.onCloseButtonClick} aria-label=\"Close dialog\">\n                <slot name=\"close-icon\">\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 384 512\" height={18} width={18} aria-hidden=\"true\" focusable=\"false\">\n                    <path\n                      fill=\"currentColor\"\n                      d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\"\n                    />\n                  </svg>\n                </slot>\n              </button>\n            </header>\n            <section class=\"dialog__body\" id={describedBy}>\n              <slot name=\"modal-body\" onSlotchange={this.onBodySlotChange}></slot>\n            </section>\n            <footer class=\"dialog__footer\">\n              <slot name=\"modal-footer\"></slot>\n            </footer>\n          </div>\n        </dialog>\n      </Host>\n    );\n  }\n}\n"]}