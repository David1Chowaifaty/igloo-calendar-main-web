{"version":3,"file":"ir-dialog.js","sourceRoot":"","sources":["../../../../src/components/ui/ir-dialog/ir-dialog.tsx"],"names":[],"mappings":"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","sourcesContent":["import { OverflowAdd, OverflowRelease } from '@/decorators/OverflowLock';\nimport { Component, Element, Event, EventEmitter, Method, Prop, State, h } from '@stencil/core';\n\n@Component({\n  tag: 'ir-dialog',\n  styleUrl: 'ir-dialog.css',\n  shadow: true,\n})\nexport class IrDialog {\n  @Element() el: HTMLIrDialogElement;\n  /**\n   * The dialog's label as displayed in the header.\n   * You should always include a relevant label, as it is required for proper accessibility.\n   * If you need to display HTML, use the label slot instead.\n   */\n  @Prop({ reflect: true }) label: string;\n\n  /**\n   * Indicates whether or not the dialog is open.\n   * Toggle this attribute to show and hide the dialog.\n   */\n  @Prop({ reflect: true, mutable: true }) open: boolean;\n\n  /**\n   * Disables the header.\n   * This will also remove the default close button.\n   */\n  @Prop({ reflect: true, attribute: 'without-header' }) withoutHeader: boolean;\n\n  /**\n   * When enabled, the dialog will be closed when the user clicks outside of it.\n   */\n  @Prop({ attribute: 'light-dismiss' }) lightDismiss: boolean = true;\n\n  /**\n   * Emitted when the dialog opens.\n   */\n  @Event({ bubbles: true, composed: true }) irDialogShow: EventEmitter<void>;\n\n  /**\n   * Emitted when the dialog is requested to close.\n   * Calling event.preventDefault() will prevent the dialog from closing.\n   * You can inspect event.detail.source to see which element caused the dialog to close.\n   * If the source is the dialog element itself, the user has pressed Escape or the dialog has been closed programmatically.\n   * Avoid using this unless closing the dialog will result in destructive behavior such as data loss.\n   */\n  @Event({ bubbles: true, composed: true }) irDialogHide: EventEmitter<{ source: Element }>;\n\n  /**\n   * Emitted after the dialog opens and all animations are complete.\n   */\n  @Event({ bubbles: true, composed: true }) irDialogAfterShow: EventEmitter<void>;\n\n  /**\n   * Emitted after the dialog closes and all animations are complete.\n   */\n  @Event({ bubbles: true, composed: true }) irDialogAfterHide: EventEmitter<void>;\n\n  @State() private slotState = new Map<string, boolean>();\n\n  private slotObserver: MutationObserver;\n\n  private readonly SLOT_NAMES = ['label', 'header-actions', 'footer'] as const;\n\n  componentWillLoad() {\n    this.updateSlotState();\n  }\n\n  componentDidLoad() {\n    this.setupSlotListeners();\n  }\n\n  disconnectedCallback() {\n    this.removeSlotListeners();\n  }\n  @Method()\n  async openModal() {\n    this.open = true;\n  }\n\n  @Method()\n  async closeModal() {\n    this.open = false;\n  }\n\n  @OverflowRelease()\n  private handleWaHide(e: CustomEvent<{ source: Element }>) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    if (!e.detail) {\n      return;\n    }\n    this.open = false;\n    this.irDialogHide.emit(e.detail);\n  }\n\n  @OverflowAdd()\n  private handleWaShow(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.open = true;\n    this.irDialogShow.emit();\n  }\n\n  private handleWaAfterHide(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.irDialogAfterHide.emit();\n  }\n\n  private handleWaAfterShow(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.irDialogAfterShow.emit();\n  }\n  private setupSlotListeners() {\n    // Listen to slotchange events on the host element\n    this.el.addEventListener('slotchange', this.handleSlotChange);\n\n    // Also use MutationObserver as a fallback for browsers that don't fire slotchange reliably\n    this.slotObserver = new MutationObserver(this.handleSlotChange);\n    this.slotObserver.observe(this.el, {\n      childList: true,\n      subtree: true,\n      attributes: true,\n      attributeFilter: ['slot'],\n    });\n  }\n  private removeSlotListeners() {\n    this.el.removeEventListener('slotchange', this.handleSlotChange);\n    this.slotObserver?.disconnect();\n  }\n\n  private handleSlotChange = () => {\n    this.updateSlotState();\n  };\n\n  private updateSlotState() {\n    const newState = new Map<string, boolean>();\n\n    this.SLOT_NAMES.forEach(name => {\n      newState.set(name, this.hasSlot(name));\n    });\n\n    this.slotState = newState;\n  }\n  private hasSlot(name: string): boolean {\n    return !!this.el.querySelector(`[slot=\"${name}\"]`);\n  }\n  render() {\n    return (\n      <wa-dialog\n        onwa-hide={this.handleWaHide.bind(this)}\n        onwa-show={this.handleWaShow.bind(this)}\n        onwa-after-hide={this.handleWaAfterHide.bind(this)}\n        onwa-after-show={this.handleWaAfterShow.bind(this)}\n        label={this.label}\n        id=\"dialog-overview\"\n        open={this.open}\n        style={{ '--width': 'var(--ir-dialog-width,31rem)' }}\n        without-header={this.withoutHeader}\n        lightDismiss={this.lightDismiss}\n        exportparts=\"dialog, header, header-actions, title, close-button, close-button__base, body, footer\"\n      >\n        {this.slotState.get('header-actions') && <slot name=\"header-actions\" slot=\"header-actions\"></slot>}\n        {this.slotState.get('label') && <slot name=\"label\" slot=\"label\"></slot>}\n        <slot></slot>\n        {this.slotState.get('footer') && <slot name=\"footer\" slot=\"footer\"></slot>}\n      </wa-dialog>\n    );\n  }\n}\n"]}