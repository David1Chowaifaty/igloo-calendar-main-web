{"version":3,"file":"ir-date-picker.js","sourceRoot":"","sources":["../../../../src/components/ui/ir-date-picker/ir-date-picker.tsx"],"names":[],"mappings":"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","sourcesContent":["import { createPopper } from '@popperjs/core';\nimport { Component, h, Prop, Element, Event, EventEmitter, Method, Watch, State } from '@stencil/core';\nimport AirDatepicker from 'air-datepicker';\nimport localeEn from 'air-datepicker/locale/en';\nimport moment from 'moment';\n\n@Component({\n  tag: 'ir-date-picker',\n  styleUrl: 'ir-date-picker.css',\n  shadow: false,\n})\nexport class IrDatePicker {\n  @Element() el: HTMLElement;\n\n  /**\n   * Determines whether the date picker is rendered inline or in a pop-up.\n   * If `true`, the picker is always visible inline.\n   */\n  @Prop() inline: boolean = false;\n\n  /**\n   * The initially selected date; can be a `Date` object or a string recognized by `AirDatepicker`.\n   */\n  @Prop({ mutable: true, reflect: true }) date: string | Date | null = null;\n\n  /**\n   * Enables multiple dates.\n   * If `true`, multiple selection is allowed.\n   * If you pass a number (e.g. 3), that is the maximum number of selectable dates.\n   */\n  @Prop() multipleDates: boolean | number = false;\n\n  /**\n   * Whether the picker should allow range selection (start and end date).\n   */\n  @Prop() range: boolean = false;\n\n  /**\n   * Format for the date as it appears in the input field.\n   * Follows the `AirDatepicker` format rules.\n   */\n  @Prop() dateFormat: string = 'yyyy-MM-dd';\n\n  /**\n   * Enables the timepicker functionality (select hours and minutes).\n   */\n  @Prop() timepicker: boolean = false;\n\n  /**\n   * The earliest date that can be selected.\n   */\n  @Prop() minDate?: string | Date;\n\n  /**\n   * The latest date that can be selected.\n   */\n  @Prop() maxDate?: string | Date;\n\n  /**\n   * Disables the input and prevents interaction.\n   */\n  @Prop() disabled: boolean = false;\n\n  /**\n   * Closes the picker automatically after a date is selected.\n   */\n  @Prop() autoClose: boolean = true;\n\n  /**\n   * Shows days from previous/next month in the current month's calendar.\n   */\n  @Prop() showOtherMonths: boolean = true;\n\n  /**\n   * Allows selecting days from previous/next month shown in the current view.\n   */\n  @Prop() selectOtherMonths: boolean = true;\n\n  /**\n   * Controls how the date picker is triggered.\n   * - **`true`**: The picker can be triggered by custom UI elements (provided via a `<slot name=\"trigger\">`).\n   * - **`false`**: A default button input is used to open the picker.\n   *\n   * Defaults to `true`.\n   */\n  @Prop() customPicker: boolean = true;\n\n  /**\n   * Pass a container element if you need the date picker to be appended to a specific element\n   * for styling or positioning (particularly for arrow rendering).\n   * If not provided, it defaults to `this.el`.\n   */\n  @Prop() container?: HTMLElement;\n\n  /**\n   * If `true`, the date picker instance is destroyed and rebuilt each time the `date` prop changes.\n   * This can be useful if you need the picker to fully re-initialize in response to dynamic changes,\n   * but note that it may affect performance if triggered frequently.\n   * Defaults to `false`.\n   */\n  @Prop() forceDestroyOnUpdate: boolean = false;\n\n  /**\n   * If `true`, the component will emit a `dateChanged` event when the selected date becomes empty (null).\n   * Otherwise, empty-date changes will be ignored (no event emitted).\n   *\n   * Defaults to `false`.\n   */\n  @Prop() emitEmptyDate: boolean = false;\n\n  /**\n   * Styles for the trigger container\n   */\n  @Prop() triggerContainerStyle: string = '';\n\n  @State() currentDate: Date | null = null;\n\n  @Event() dateChanged: EventEmitter<{\n    start: moment.Moment;\n    end: moment.Moment;\n  }>;\n  @Event() datePickerFocus: EventEmitter<void>;\n  @Event() datePickerBlur: EventEmitter<void>;\n\n  private pickerRef!: HTMLInputElement;\n  private datePicker!: AirDatepicker<HTMLElement>;\n  private openDatePickerTimeout?: ReturnType<typeof setTimeout>;\n  private triggerSlot: HTMLElement | null = null;\n\n  componentWillLoad() {\n    // Sync initial @Prop to internal state\n    if (this.date) {\n      this.currentDate = this.toValidDate(this.date);\n    }\n    // this.setPickerStyle();\n  }\n  componentDidLoad() {\n    this.initializeDatepicker();\n    this.setupTriggerFocusHandling();\n  }\n\n  /**\n   * Set up focus handling for the custom trigger slot\n   */\n  private setupTriggerFocusHandling() {\n    if (!this.customPicker) return;\n\n    // Get the slot element\n    const slotEl = this.el.querySelector('[slot=\"trigger\"]') as HTMLSlotElement;\n    if (!slotEl) return;\n\n    // We'll consider the first assigned element as our trigger\n    this.triggerSlot = slotEl as HTMLElement;\n\n    // Add focus event listener to the trigger element\n    this.triggerSlot.addEventListener('focus', this.handleTriggerFocus.bind(this));\n\n    // Also handle click events on the trigger\n    this.triggerSlot.addEventListener('click', this.handleTriggerClick.bind(this));\n  }\n\n  private handleTriggerFocus() {\n    if (this.disabled) return;\n    this.openDatePicker();\n  }\n\n  private handleTriggerClick(event: Event) {\n    if (this.disabled) return;\n    event.preventDefault();\n    this.openDatePicker();\n  }\n\n  @Watch('date')\n  datePropChanged(newDate: string | Date | null, oldDate: string | Date | null) {\n    if (this.isSameDates(newDate, oldDate)) {\n      return;\n    }\n    this.updatePickerDate(newDate);\n  }\n\n  @Watch('minDate')\n  minDatePropChanged(newVal: string | Date, oldVal: string | Date) {\n    if (!this.datePicker) {\n      return;\n    }\n    if (!this.isSameDates(newVal, oldVal)) {\n      this.datePicker?.update({ minDate: this.toValidDate(newVal) });\n    }\n  }\n\n  @Watch('maxDate')\n  maxDatePropChanged(newVal: string | Date, oldVal: string | Date) {\n    if (!this.isSameDates(newVal, oldVal)) {\n      this.datePicker?.update({ maxDate: this.toValidDate(newVal) });\n    }\n  }\n\n  @Method()\n  async openDatePicker() {\n    // small delay to let the input mount if needed\n    this.openDatePickerTimeout = setTimeout(() => {\n      this.pickerRef.focus();\n    }, 20);\n  }\n\n  @Method()\n  async clearDatePicker() {\n    this.datePicker?.clear();\n  }\n\n  private isSameDates(d1: string | Date | null, d2: string | Date | null): boolean {\n    if (!d1 && !d2) return true;\n    if (!d1 || !d2) return false;\n    return moment(d1).isSame(moment(d2), 'day');\n  }\n\n  private toValidDate(value: string | Date | null): Date | null {\n    if (!value) return null;\n    const d = new Date(value);\n    return isNaN(d.getTime()) ? null : d;\n  }\n\n  private updatePickerDate(newDate: string | Date | null) {\n    const valid = this.toValidDate(newDate);\n\n    if (!valid) {\n      // If invalid or null, just clear\n      this.datePicker?.clear();\n      this.currentDate = null;\n      return;\n    }\n\n    // If it's a truly new date, select it\n    if (!this.isSameDates(this.currentDate, valid)) {\n      this.currentDate = valid;\n      if (this.forceDestroyOnUpdate) {\n        this.datePicker.destroy();\n        this.datePicker = null;\n        this.initializeDatepicker();\n      } else {\n        this.datePicker?.selectDate(valid);\n      }\n    }\n  }\n\n  private initializeDatepicker() {\n    if (this.datePicker) return;\n\n    this.datePicker = new AirDatepicker(this.pickerRef, {\n      container: this.container,\n      inline: this.inline,\n      selectedDates: this.date ? [this.date] : [],\n      multipleDates: this.multipleDates,\n      range: this.range,\n      dateFormat: this.dateFormat,\n      timepicker: this.timepicker,\n      minDate: this.minDate,\n      maxDate: this.maxDate,\n      autoClose: this.autoClose,\n      locale: localeEn,\n      showOtherMonths: this.showOtherMonths,\n      selectOtherMonths: this.selectOtherMonths,\n\n      onHide: () => {\n        this.datePickerBlur.emit();\n      },\n      onShow: () => {\n        this.datePickerFocus.emit();\n      },\n      onSelect: ({ date }) => {\n        if (!date || !(date instanceof Date)) {\n          if (this.emitEmptyDate) {\n            this.dateChanged.emit({\n              start: null,\n              end: null,\n            });\n          }\n          return;\n        }\n        this.currentDate = date;\n        this.date = date;\n        this.dateChanged.emit({\n          start: moment(date),\n          end: moment(date),\n        });\n      },\n      position({ $datepicker, $target, $pointer, done }) {\n        let popper = createPopper($target, $datepicker, {\n          placement: 'top',\n          modifiers: [\n            {\n              name: 'flip',\n              options: { padding: { top: 0 } },\n            },\n            {\n              name: 'offset',\n              options: { offset: [0, 10] },\n            },\n            {\n              name: 'arrow',\n              options: { element: $pointer },\n            },\n          ],\n        });\n\n        return function completeHide() {\n          popper.destroy();\n          done();\n        };\n      },\n    });\n    this.datePicker.$datepicker.style.height = '280px';\n    this.datePicker.$datepicker?.classList.add('ir-custom-date-picker__calendar');\n    this.datePicker.$datepicker.style.setProperty('--adp-cell-background-color-selected', 'var(--wa-color-brand-50)');\n    this.datePicker.$datepicker.style.setProperty('--adp-cell-background-color-selected-hover', 'var(--wa-color-brand-50)');\n    this.datePicker.$datepicker.style.setProperty('--adp-accent-color', 'var(--wa-color-brand-50)');\n    this.datePicker.$datepicker.style.setProperty('--adp-day-name-color', 'lab(48.496% 0 0)');\n  }\n\n  disconnectedCallback() {\n    if (this.openDatePickerTimeout) {\n      clearTimeout(this.openDatePickerTimeout);\n    }\n\n    // Clean up event listeners\n    if (this.triggerSlot) {\n      this.triggerSlot.removeEventListener('focus', this.handleTriggerFocus);\n      this.triggerSlot.removeEventListener('click', this.handleTriggerClick);\n    }\n\n    this.datePicker?.destroy?.();\n  }\n\n  render() {\n    return (\n      <div class={`ir-date-picker-trigger ${this.triggerContainerStyle}`}>\n        {this.customPicker && <slot name=\"trigger\"></slot>}\n        <input type=\"text\" disabled={this.disabled} class={this.customPicker ? 'ir-date-picker-element' : 'form-control input-sm'} ref={el => (this.pickerRef = el)} />\n      </div>\n    );\n  }\n}\n"]}