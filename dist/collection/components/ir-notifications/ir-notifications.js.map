{"version":3,"file":"ir-notifications.js","sourceRoot":"","sources":["../../../src/components/ir-notifications/ir-notifications.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAgB,MAAM,eAAe,CAAC;AAQrG,MAAM,OAAO,eAAe;IACf,EAAE,CAAc;IAE3B,+BAA+B;IACN,aAAa,GAAmB,EAAE,CAAC;IAEnD,MAAM,GAAY,KAAK,CAAC;IAExB,mBAAmB,CAA6B;IAEjD,SAAS,CAAsB;IAEvC,gBAAgB;QACd,IAAI,CAAC,uBAAuB,EAAE,CAAC;QAC/B,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;QAC/D,QAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;IACrE,CAAC;IAED,kBAAkB;QAChB,IAAI,CAAC,uBAAuB,EAAE,CAAC;IACjC,CAAC;IAED,oBAAoB;QAClB,QAAQ,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;QAClE,QAAQ,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;IACxE,CAAC;IAGD,6BAA6B,CAAC,QAAwB,EAAE,QAAwB;QAC9E,IAAI,QAAQ,IAAI,QAAQ,CAAC,MAAM,KAAK,QAAQ,CAAC,MAAM,EAAE,CAAC;YACpD,IAAI,CAAC,yBAAyB,EAAE,CAAC;QACnC,CAAC;IACH,CAAC;IAEO,uBAAuB;QAC7B,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;YACnB,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,oBAAoB,EAAE,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC;QAC1F,CAAC;IACH,CAAC;IAEO,yBAAyB;QAC/B,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;YACnB,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;YAC9C,UAAU,CAAC,GAAG,EAAE;gBACd,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;YACnD,CAAC,EAAE,GAAG,CAAC,CAAC;QACV,CAAC;IACH,CAAC;IAEO,mBAAmB,CAAC,YAA0B;QACpD,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAC5C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,YAAY,CAAC,EAAE,CAAC,CAAC;IAChF,CAAC;IAEO,eAAe,GAAG,CAAC,EAAc,EAAE,EAAE;QAC3C,IAAI,CAAC,IAAI,CAAC,MAAM;YAAE,OAAO;QACzB,MAAM,MAAM,GAAG,EAAE,CAAC,MAAqB,CAAC;QACxC,IAAI,MAAM,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC;YACxC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACtB,CAAC;IACH,CAAC,CAAC;IAEM,iBAAiB,GAAG,CAAC,EAAiB,EAAE,EAAE;QAChD,IAAI,CAAC,IAAI,CAAC,MAAM;YAAE,OAAO;QACzB,IAAI,EAAE,CAAC,GAAG,KAAK,QAAQ,IAAI,EAAE,CAAC,GAAG,KAAK,KAAK,EAAE,CAAC;YAC5C,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACnB,IAAI,CAAC,SAAiB,EAAE,KAAK,EAAE,EAAE,CAAC;QACrC,CAAC;IACH,CAAC,CAAC;IAEF,MAAM;QACJ,OAAO,CACL,EAAC,IAAI;YACH,4DAAK,KAAK,EAAE,mCAAmC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE;gBACxE,kEACE,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC,EAChC,OAAO,EAAC,MAAM,EACd,SAAS,EAAC,MAAM,wBACI,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,QAAQ,EAAE,EACxD,KAAK,EAAC,sBAAsB,EAC5B,QAAQ,EAAC,QAAQ,oBACF,QAAQ,mBACR,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,EAClC,cAAc,EAAE,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,GACvC;gBAEb,4DAAK,KAAK,EAAE,oCAAoC,IAC7C,IAAI,CAAC,aAAa,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,CACjC,SAAG,KAAK,EAAC,qBAAqB,qBAAmB,CAClD,CAAC,CAAC,CAAC,CACF,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,YAAY,CAAC,EAAE,CAAC,CACrC,WAAK,KAAK,EAAE,mCAAmC,YAAY,CAAC,IAAI,EAAE,EAAE,GAAG,EAAE,YAAY,CAAC,EAAE;oBACtF,WAAK,KAAK,EAAC,sBAAsB;wBAC/B,kBAAS,YAAY,CAAC,KAAK,CAAU;wBACrC,aAAI,YAAY,CAAC,OAAO,CAAK;wBAC5B,YAAY,CAAC,IAAI,IAAI,CACpB,SAAG,IAAI,EAAE,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,EAAE,YAAY,CAAC,IAAI,CAAC,MAAM,IAAI,OAAO,IACzE,YAAY,CAAC,IAAI,CAAC,IAAI,IAAI,WAAW,CACpC,CACL,CACG;oBACL,YAAY,CAAC,WAAW,IAAI,CAC3B,iBAAW,cAAc,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,YAAY,CAAC,EAAE,OAAO,EAAC,MAAM,EAAC,SAAS,EAAC,OAAO,EAAC,SAAS,EAAC,OAAO,GAAa,CACzI,CACG,CACP,CAAC,CACH,CACG,CAEF,CACD,CACR,CAAC;IACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import { Component, Host, h, Prop, Element, Watch, State, Event, EventEmitter } from '@stencil/core';\nimport { Notification } from './types';\n\n@Component({\n  tag: 'ir-notifications',\n  styleUrl: 'ir-notifications.css',\n  scoped: true,\n})\nexport class IrNotifications {\n  @Element() el: HTMLElement;\n\n  // Make notifications reactive;\n  @Prop({ mutable: true }) notifications: Notification[] = [];\n\n  @State() isOpen: boolean = false;\n\n  @Event() notificationCleared: EventEmitter<Notification>;\n\n  private buttonRef: HTMLIrButtonElement;\n\n  componentDidLoad() {\n    this.updateNotificationBadge();\n    document.addEventListener('click', this.onDocumentClick, true);\n    document.addEventListener('keydown', this.onDocumentKeydown, true);\n  }\n\n  componentDidUpdate() {\n    this.updateNotificationBadge();\n  }\n\n  disconnectedCallback() {\n    document.removeEventListener('click', this.onDocumentClick, true);\n    document.removeEventListener('keydown', this.onDocumentKeydown, true);\n  }\n\n  @Watch('notifications')\n  handleNotificationCountChange(newValue: Notification[], oldValue: Notification[]) {\n    if (oldValue && newValue.length !== oldValue.length) {\n      this.animateNotificationChange();\n    }\n  }\n\n  private updateNotificationBadge() {\n    if (this.buttonRef) {\n      this.buttonRef.setAttribute('data-notifications', this.notifications.length.toString());\n    }\n  }\n\n  private animateNotificationChange() {\n    if (this.buttonRef) {\n      this.buttonRef.classList.add('badge-animate');\n      setTimeout(() => {\n        this.buttonRef.classList.remove('badge-animate');\n      }, 600);\n    }\n  }\n\n  private dismissNotification(notification: Notification) {\n    this.notificationCleared.emit(notification);\n    this.notifications = this.notifications.filter(n => n.id !== notification.id);\n  }\n\n  private onDocumentClick = (ev: MouseEvent) => {\n    if (!this.isOpen) return;\n    const target = ev.target as Node | null;\n    if (target && !this.el.contains(target)) {\n      this.isOpen = false;\n    }\n  };\n\n  private onDocumentKeydown = (ev: KeyboardEvent) => {\n    if (!this.isOpen) return;\n    if (ev.key === 'Escape' || ev.key === 'Esc') {\n      this.isOpen = false;\n      (this.buttonRef as any)?.focus?.();\n    }\n  };\n\n  render() {\n    return (\n      <Host>\n        <div class={`dropdown notifications-dropdown ${this.isOpen ? 'show' : ''}`}>\n          <ir-button\n            ref={el => (this.buttonRef = el)}\n            variant=\"icon\"\n            icon_name=\"bell\"\n            data-notifications={this.notifications.length.toString()}\n            class=\"notification-trigger\"\n            btn_type=\"button\"\n            data-reference=\"parent\"\n            aria-expanded={String(this.isOpen)}\n            onClickHandler={() => (this.isOpen = !this.isOpen)}\n          ></ir-button>\n\n          <div class={`dropdown-menu dropdown-menu-right `}>\n            {this.notifications.length === 0 ? (\n              <p class=\"m-0 dropdown-header\">All caught up.</p>\n            ) : (\n              this.notifications.map(notification => (\n                <div class={`notification-item dropdown-item ${notification.type}`} key={notification.id}>\n                  <div class=\"notification-content\">\n                    <strong>{notification.title}</strong>\n                    <p>{notification.message}</p>\n                    {notification.link && (\n                      <a href={notification.link.href} target={notification.link.target || '_self'}>\n                        {notification.link.text || 'View more'}\n                      </a>\n                    )}\n                  </div>\n                  {notification.dismissible && (\n                    <ir-button onClickHandler={() => this.dismissNotification(notification)} variant=\"icon\" btn_color=\"light\" icon_name=\"xmark\"></ir-button>\n                  )}\n                </div>\n              ))\n            )}\n          </div>\n          {/* </div> */}\n        </div>\n      </Host>\n    );\n  }\n}\n"]}