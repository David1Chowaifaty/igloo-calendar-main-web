{"version":3,"file":"ir-menu-bar-menu.js","sourceRoot":"","sources":["../../../../src/components/ir-menu-bar/ir-menu-bar-menu/ir-menu-bar-menu.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Element, Event, EventEmitter, Host, Prop, State, Watch, h } from '@stencil/core';\nimport { arrow, autoUpdate, computePosition, shift } from '@floating-ui/dom';\nimport { v4 } from 'uuid';\n@Component({\n  tag: 'ir-menu-bar-menu',\n  styleUrl: 'ir-menu-bar-menu.css',\n  shadow: true,\n})\nexport class IrMenuBarMenu {\n  @Element() private hostEl!: HTMLElement;\n\n  /**\n   * Displays an `ir-new-badge` next to the trigger when set.\n   */\n  @Prop({ attribute: 'new', reflect: true, mutable: true }) newBadge = false;\n\n  /**\n   * Controls the open state of the dropdown menu.\n   * Can be toggled programmatically or via user interaction.\n   */\n  @Prop({ attribute: 'open', reflect: true, mutable: true }) open = false;\n\n  @State() private hasDropdown = false;\n  @State() private isAccordionLayout = false;\n\n  /**\n   * Fires whenever the menu's `open` state changes.\n   */\n  @Event() menuBarOpenChange: EventEmitter<boolean>;\n\n  private dropdownContainerRef: HTMLDivElement;\n  private menuTriggerRef: HTMLDivElement;\n\n  private cleanupAutoUpdate?: () => void;\n  private mediaQuery?: MediaQueryList;\n  private mediaQueryCleanup?: () => void;\n  private closeTimeout?: number;\n\n  private get items(): HTMLIrMenuBarItemElement[] {\n    return Array.from(this.hostEl.querySelectorAll('ir-menu-bar-item')).filter(item => item.parentElement === this.hostEl && !item.slot) as HTMLIrMenuBarItemElement[];\n  }\n\n  private updateDropdownState() {\n    const hasDropdown = this.items.length > 1;\n\n    if (hasDropdown !== this.hasDropdown) {\n      this.hasDropdown = hasDropdown;\n    }\n\n    if (!hasDropdown && this.open) {\n      this.open = false;\n    }\n\n    this.hostEl.toggleAttribute('has-submenu', hasDropdown);\n  }\n\n  componentWillLoad() {\n    if (!this.hostEl.id) {\n      this.hostEl.id = `menu-bar-${v4()}`;\n    }\n    this.updateDropdownState();\n    this.setupLayoutMode();\n  }\n\n  @Watch('open')\n  handleMenuBarOpenChange(open: boolean) {\n    if (!this.hasDropdown) return;\n\n    if (this.isAccordionLayout) {\n      this.cleanupAutoUpdate?.();\n      this.cleanupAutoUpdate = undefined;\n      this.updateAccordionHeight(open);\n      this.menuBarOpenChange.emit(open);\n      return;\n    }\n\n    if (open) {\n      const arrowElement = this.hostEl.shadowRoot.querySelector('#arrow');\n\n      requestAnimationFrame(() => {\n        this.cleanupAutoUpdate = autoUpdate(this.menuTriggerRef, this.dropdownContainerRef, () => {\n          computePosition(this.menuTriggerRef, this.dropdownContainerRef, {\n            strategy: 'fixed',\n            placement: 'bottom-start',\n            middleware: [shift(), arrow({ element: arrowElement })],\n          }).then(({ x, y, placement, middlewareData }) => {\n            Object.assign(this.dropdownContainerRef.style, {\n              left: `${x}px`,\n              top: `${y}px`,\n            });\n            const { x: arrowX, y: arrowY } = middlewareData.arrow;\n\n            const staticSide = {\n              top: 'bottom',\n              right: 'left',\n              bottom: 'top',\n              left: 'right',\n            }[placement.split('-')[0]];\n\n            Object.assign((arrowElement as HTMLElement).style, {\n              left: arrowX != null ? `${arrowX}px` : '',\n              top: arrowY != null ? `${arrowY}px` : '',\n              right: '',\n              bottom: '',\n              [staticSide]: '-4px',\n            });\n          });\n        });\n      });\n    } else {\n      this.cleanupAutoUpdate?.();\n      this.cleanupAutoUpdate = undefined;\n      this.cancelDropdownClose();\n    }\n  }\n\n  componentDidLoad() {\n    this.updateDropdownState();\n    if (this.isAccordionLayout) {\n      this.updateAccordionHeight(this.open);\n    }\n  }\n\n  disconnectedCallback() {\n    this.cleanupAutoUpdate?.();\n    this.cleanupAutoUpdate = undefined;\n    this.mediaQueryCleanup?.();\n    this.mediaQueryCleanup = undefined;\n    this.cancelDropdownClose();\n  }\n\n  private handleItemsSlotChange = () => {\n    this.updateDropdownState();\n    if (!this.newBadge && this.items.some(i => i.newBadge)) {\n      this.newBadge = true;\n    }\n    if (this.isAccordionLayout && this.open) {\n      // refresh measured height when slot content changes\n      requestAnimationFrame(() => this.updateAccordionHeight(true));\n    }\n  };\n\n  private setupLayoutMode() {\n    if (typeof window === 'undefined' || typeof matchMedia === 'undefined') {\n      this.isAccordionLayout = false;\n      return;\n    }\n\n    const query = '(min-width: 768px)';\n    this.mediaQuery = window.matchMedia(query);\n\n    const evaluateLayout = (mq: MediaQueryList | MediaQueryListEvent) => {\n      const isDropdownLayout = mq.matches;\n      this.isAccordionLayout = !isDropdownLayout;\n\n      if (isDropdownLayout) {\n        this.cancelDropdownClose();\n        this.dropdownContainerRef?.style.removeProperty('height');\n        this.dropdownContainerRef?.style.removeProperty('display');\n        if (this.open) {\n          this.open = false;\n        }\n      } else if (this.dropdownContainerRef) {\n        this.cancelDropdownClose();\n        if (this.open) {\n          requestAnimationFrame(() => this.updateAccordionHeight(true));\n        } else {\n          this.dropdownContainerRef.style.height = '0px';\n        }\n      }\n\n      if (isDropdownLayout) {\n        // ensure open state recalculates floating UI positioning\n        if (this.open) {\n          this.handleMenuBarOpenChange(true);\n        }\n      } else {\n        this.cleanupAutoUpdate?.();\n        this.cleanupAutoUpdate = undefined;\n      }\n    };\n\n    evaluateLayout(this.mediaQuery);\n\n    const listener = (event: MediaQueryListEvent) => evaluateLayout(event);\n\n    if (typeof this.mediaQuery.addEventListener === 'function') {\n      this.mediaQuery.addEventListener('change', listener);\n      this.mediaQueryCleanup = () => this.mediaQuery.removeEventListener('change', listener);\n    } else {\n      this.mediaQuery.addListener(listener);\n      this.mediaQueryCleanup = () => this.mediaQuery.removeListener(listener);\n    }\n  }\n\n  private updateAccordionHeight(open: boolean) {\n    if (!this.dropdownContainerRef) return;\n\n    const dropdownEl = this.dropdownContainerRef;\n\n    if (open) {\n      const contentHeight = dropdownEl.scrollHeight;\n      dropdownEl.style.height = `${contentHeight}px`;\n    } else {\n      if (dropdownEl.style.height === 'auto') {\n        dropdownEl.style.height = `${dropdownEl.scrollHeight}px`;\n      }\n      requestAnimationFrame(() => {\n        dropdownEl.style.height = '0px';\n      });\n    }\n  }\n\n  private handleAccordionTransitionEnd = (event: TransitionEvent) => {\n    if (!this.isAccordionLayout) return;\n    if (event.target !== this.dropdownContainerRef || event.propertyName !== 'height') return;\n\n    if (this.open) {\n      this.dropdownContainerRef.style.height = 'auto';\n    }\n  };\n\n  private scheduleDropdownClose() {\n    if (!this.hasDropdown || this.isAccordionLayout) return;\n    this.cancelDropdownClose();\n    this.closeTimeout = window.setTimeout(() => {\n      this.closeTimeout = undefined;\n      this.open = false;\n    }, 150);\n  }\n\n  private cancelDropdownClose() {\n    if (this.closeTimeout !== undefined) {\n      clearTimeout(this.closeTimeout);\n      this.closeTimeout = undefined;\n    }\n  }\n\n  render() {\n    const hostClass = {\n      'has-dropdown': this.hasDropdown,\n      'is-open': this.hasDropdown && this.open,\n      'is-accordion': this.isAccordionLayout,\n      'is-dropdown': this.hasDropdown && !this.isAccordionLayout,\n    };\n    const supportsDropdownHover = this.hasDropdown && !this.isAccordionLayout;\n    return (\n      <Host\n        class={hostClass}\n        role=\"none\"\n        onPointerEnter={\n          supportsDropdownHover\n            ? () => {\n                this.cancelDropdownClose();\n                this.open = true;\n              }\n            : undefined\n        }\n        onPointerLeave={supportsDropdownHover ? () => this.scheduleDropdownClose() : undefined}\n      >\n        <div\n          class=\"menu-trigger-wrapper\"\n          part=\"trigger\"\n          role=\"menuitem\"\n          onClick={() => {\n            if (this.hasDropdown) {\n              this.open = !this.open;\n            } else {\n              const item = this.items[0];\n              if (item.href) {\n                window.open(item.href, item.target);\n              }\n            }\n          }}\n          ref={el => (this.menuTriggerRef = el)}\n          tabindex={this.hasDropdown ? '0' : undefined}\n          aria-haspopup={this.hasDropdown ? 'menu' : undefined}\n          aria-expanded={this.hasDropdown ? String(this.open) : undefined}\n        >\n          <div class=\"menu-bar-menu__trigger-container\">\n            <slot name=\"trigger\"></slot>\n            {this.newBadge && <ir-new-badge class=\"menu-new-badge\" part=\"new-indicator\"></ir-new-badge>}\n          </div>\n          {this.hasDropdown &&\n            (!this.open ? (\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"16\"\n                height=\"16\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                stroke-width=\"2\"\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                class=\"menu-bar-menu__accordion_indicator\"\n              >\n                <path d=\"m6 9 6 6 6-6\" />\n              </svg>\n            ) : (\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"16\"\n                height=\"16\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                stroke-width=\"2\"\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                class=\"menu-bar-menu__accordion_indicator\"\n              >\n                <path d=\"m18 15-6-6-6 6\" />\n              </svg>\n            ))}\n        </div>\n        <div\n          class=\"dropdown-menu\"\n          ref={el => (this.dropdownContainerRef = el)}\n          part=\"dropdown\"\n          role={this.hasDropdown ? 'menu' : undefined}\n          data-state={!this.hasDropdown || !this.open ? 'open' : 'closed'}\n          onTransitionEnd={this.handleAccordionTransitionEnd}\n        >\n          <div id=\"arrow\"></div>\n          <slot onSlotchange={this.handleItemsSlotChange}></slot>\n        </div>\n      </Host>\n    );\n  }\n}\n"]}