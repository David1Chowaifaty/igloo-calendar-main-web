{"version":3,"file":"ir-sales-filters.js","sourceRoot":"","sources":["../../../../src/components/ir-sales-by-country/ir-sales-filters/ir-sales-filters.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Event, EventEmitter, h, Prop, State } from '@stencil/core';\n\nimport locales from '@/stores/locales.store';\nimport moment from 'moment';\nimport { CountrySalesFilter } from '../types';\n\n@Component({\n  tag: 'ir-sales-filters',\n  styleUrl: 'ir-sales-filters.css',\n  scoped: true,\n})\nexport class IrSalesFilters {\n  @Prop() isLoading: boolean;\n  @Prop() baseFilters: CountrySalesFilter;\n\n  @State() filters: CountrySalesFilter;\n\n  @State() collapsed: boolean = false;\n  @State() window: string;\n\n  @Event() applyFilters: EventEmitter<CountrySalesFilter>;\n\n  componentWillLoad() {\n    this.filters = this.baseFilters;\n    this.window = this.baseFilters.WINDOW.toString();\n  }\n\n  private updateFilter(params: Partial<CountrySalesFilter>) {\n    this.filters = { ...this.filters, ...params };\n  }\n\n  private applyFiltersEvt(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.applyFilters.emit(this.filters);\n  }\n  private resetFilters(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.filters = this.baseFilters;\n    this.applyFilters.emit(this.filters);\n  }\n  render() {\n    return (\n      <div class=\"card mb-0 p-1 d-flex flex-column sales-filters-card\">\n        <div class=\"d-flex align-items-center justify-content-between sales-filters-header\">\n          <div class={'d-flex align-items-center'} style={{ gap: '0.5rem' }}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" height={18} width={18}>\n              <path\n                fill=\"currentColor\"\n                d=\"M3.9 54.9C10.5 40.9 24.5 32 40 32l432 0c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9 320 448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6l0-79.1L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z\"\n              />\n            </svg>\n            <h4 class=\"m-0 p-0 flex-grow-1\">{locales.entries.Lcz_Filters}</h4>\n          </div>\n          <ir-button\n            variant=\"icon\"\n            id=\"drawer-icon\"\n            data-toggle=\"collapse\"\n            data-target=\"#salesFiltersCollapse\"\n            aria-expanded={this.collapsed ? 'true' : 'false'}\n            aria-controls=\"salesFiltersCollapse\"\n            class=\"mr-1 collapse-btn toggle-collapse-btn\"\n            icon_name={this.collapsed ? 'closed_eye' : 'open_eye'}\n            onClickHandler={() => {\n              this.collapsed = !this.collapsed;\n            }}\n            style={{ '--icon-size': '1.6rem' }}\n          ></ir-button>\n        </div>\n        <div class=\"m-0 p-0 collapse filters-section\" id=\"salesFiltersCollapse\">\n          <div class=\"d-flex flex-column\" style={{ gap: '0.5rem' }}>\n            <fieldset class=\"pt-1 filter-group\">\n              <label htmlFor=\"rooms\" class=\"m-0 px-0\" style={{ paddingBottom: '0.25rem' }}>\n                Rooms\n              </label>\n              <ir-select\n                selectedValue={this.filters?.BOOK_CASE}\n                selectId=\"rooms\"\n                showFirstOption={false}\n                onSelectChange={e =>\n                  this.updateFilter({\n                    BOOK_CASE: e.detail,\n                  })\n                }\n                data={[\n                  { text: 'Booked', value: '001' },\n                  { text: 'Stayed', value: '002' },\n                ]}\n              ></ir-select>\n            </fieldset>\n            <fieldset class=\"pt-1 filter-group\">\n              <label htmlFor=\"period\" class=\"px-0 m-0\" style={{ paddingBottom: '0.25rem' }}>\n                Selected period\n              </label>\n              <div class=\"d-flex flex-column date-filter-group\" style={{ gap: '0.5rem' }}>\n                <ir-select\n                  selectedValue={this.window}\n                  onSelectChange={e => {\n                    const dateDiff = Number(e.detail);\n                    const today = moment();\n                    this.updateFilter({\n                      WINDOW: dateDiff,\n                      TO_DATE: today.format('YYYY-MM-DD'),\n                      FROM_DATE: today.add(-dateDiff, 'days').format('YYYY-MM-DD'),\n                    });\n                    this.window = e.detail;\n                  }}\n                  selectId=\"period\"\n                  // showFirstOption={false}\n                  firstOption=\"...\"\n                  data={[\n                    { text: 'For the past 7 days', value: '7' },\n                    { text: 'For the past 14 days', value: '14' },\n                    { text: 'For the past 30 days', value: '30' },\n                    { text: 'For the past 60 days', value: '60' },\n                    { text: 'For the past 90 days', value: '90' },\n                    { text: 'For the past 365 days', value: '365' },\n                  ]}\n                ></ir-select>\n                <p class=\"m-0 p-0 text-center\">Or</p>\n                <ir-range-picker\n                  onDateRangeChanged={e => {\n                    e.stopImmediatePropagation();\n                    e.stopPropagation();\n                    const { fromDate, toDate, wasFocused } = e.detail;\n                    this.updateFilter({\n                      FROM_DATE: fromDate.format('YYYY-MM-DD'),\n                      TO_DATE: toDate.format('YYYY-MM-DD'),\n                    });\n                    if (wasFocused) this.window = '';\n                    // this.dates = { from: fromDate, to: toDate };\n                  }}\n                  fromDate={moment(this.filters.FROM_DATE, 'YYYY-MM-DD')}\n                  toDate={moment(this.filters.TO_DATE, 'YYYY-MM-DD')}\n                  maxDate={moment().format('YYYY-MM-DD')}\n                  withOverlay={false}\n                ></ir-range-picker>\n              </div>\n            </fieldset>\n            <div class=\"d-flex align-items-center mt-1 mb-2 compare-year-toggle\" style={{ gap: '0.5rem' }}>\n              <label htmlFor=\"compare-prev-year\" style={{ paddingBottom: '0.25rem' }}>\n                Compare with previous year\n              </label>\n              <ir-checkbox\n                checked={this.filters?.include_previous_year}\n                checkboxId=\"compare-prev-year\"\n                onCheckChange={e => {\n                  e.stopImmediatePropagation();\n                  e.stopPropagation();\n                  this.updateFilter({ include_previous_year: e.detail });\n                }}\n              ></ir-checkbox>\n            </div>\n\n            <div class=\"d-flex align-items-center justify-content-end filter-actions\" style={{ gap: '1rem' }}>\n              <ir-button\n                btn_type=\"button\"\n                data-testid=\"reset\"\n                text={locales.entries.Lcz_Reset}\n                size=\"sm\"\n                btn_color=\"secondary\"\n                onClickHandler={e => this.resetFilters(e)}\n              ></ir-button>\n              <ir-button\n                btn_type=\"button\"\n                data-testid=\"apply\"\n                isLoading={this.isLoading}\n                text={locales.entries.Lcz_Apply}\n                size=\"sm\"\n                onClickHandler={e => this.applyFiltersEvt(e)}\n              ></ir-button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n"]}