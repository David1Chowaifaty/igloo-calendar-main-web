{"version":3,"file":"ir-drawer.js","sourceRoot":"","sources":["../../../src/components/ir-drawer/ir-drawer.tsx"],"names":[],"mappings":"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","sourcesContent":["import { OverflowAdd, OverflowRelease } from '@/decorators/OverflowLock';\nimport WaDrawer from '@awesome.me/webawesome/dist/components/drawer/drawer';\nimport { Component, Element, Event, EventEmitter, h, Prop, State } from '@stencil/core';\n\nexport type NativeDrawer = WaDrawer;\n@Component({\n  tag: 'ir-drawer',\n  styleUrl: 'ir-drawer.css',\n  shadow: true,\n})\nexport class IrDrawer {\n  @Element() el: HTMLIrDrawerElement;\n\n  /** Indicates whether or not the drawer is open. Toggle this attribute to show and hide the drawer. */\n  @Prop({ reflect: true }) open: NativeDrawer['open'];\n  /**\n   * The drawer's label as displayed in the header. You should always include a relevant label, as it is required for\n   * proper accessibility. If you need to display HTML, use the `label` slot instead.\n   */\n  @Prop({ reflect: true }) label: NativeDrawer['label'];\n  /** The direction from which the drawer will open. */\n  @Prop({ reflect: true }) placement: NativeDrawer['placement'];\n  /** Disables the header. This will also remove the default close button. */\n  @Prop({ reflect: true }) withoutHeader: NativeDrawer['withoutHeader'];\n  /** When enabled, the drawer will be closed when the user clicks outside of it. */\n  @Prop({ reflect: true }) lightDismiss: NativeDrawer['lightDismiss'] = true;\n\n  @State() private slotState = new Map<string, boolean>();\n\n  /** Emitted when the drawer opens. */\n  @Event() drawerShow: EventEmitter<void>;\n  /**Emitted when the drawer is requesting to close. Calling event.preventDefault() will prevent the drawer from closing. You can inspect event.detail.source to see which element caused the drawer to close. If the source is the drawer element itself, the user has pressed Escape or the drawer has been closed programmatically. Avoid using this unless closing the drawer will result in destructive behavior such as data loss. */\n  @Event() drawerHide: EventEmitter<{ source: Element }>;\n\n  private readonly onDrawerShow = (event: CustomEvent<void>) => {\n    this.emitDrawerShow(event);\n  };\n\n  private readonly onDrawerHide = (event: CustomEvent<{ source: Element }>) => {\n    this.emitDrawerHide(event);\n  };\n\n  private slotObserver: MutationObserver;\n\n  private readonly SLOT_NAMES = ['label', 'header-actions', 'footer'] as const;\n\n  componentWillLoad() {\n    this.updateSlotState();\n  }\n\n  componentDidLoad() {\n    this.setupSlotListeners();\n  }\n\n  disconnectedCallback() {\n    this.removeSlotListeners();\n  }\n  @OverflowAdd()\n  private emitDrawerShow(e: CustomEvent<void>) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.drawerShow.emit();\n  }\n\n  @OverflowRelease()\n  private emitDrawerHide(e: CustomEvent<{ source: Element }>) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    if (!e.detail) {\n      return;\n    }\n    this.drawerHide.emit(e.detail);\n  }\n\n  private setupSlotListeners() {\n    // Listen to slotchange events on the host element\n    this.el.addEventListener('slotchange', this.handleSlotChange);\n\n    // Also use MutationObserver as a fallback for browsers that don't fire slotchange reliably\n    this.slotObserver = new MutationObserver(this.handleSlotChange);\n    this.slotObserver.observe(this.el, {\n      childList: true,\n      subtree: true,\n      attributes: true,\n      attributeFilter: ['slot'],\n    });\n  }\n\n  private removeSlotListeners() {\n    this.el.removeEventListener('slotchange', this.handleSlotChange);\n    this.slotObserver?.disconnect();\n  }\n\n  private handleSlotChange = () => {\n    this.updateSlotState();\n  };\n\n  private updateSlotState() {\n    const newState = new Map<string, boolean>();\n\n    this.SLOT_NAMES.forEach(name => {\n      newState.set(name, this.hasSlot(name));\n    });\n\n    this.slotState = newState;\n  }\n\n  private hasSlot(name: string): boolean {\n    return !!this.el.querySelector(`[slot=\"${name}\"]`);\n  }\n\n  render() {\n    return (\n      <wa-drawer\n        onwa-show={this.onDrawerShow}\n        onwa-hide={this.onDrawerHide}\n        class=\"ir__drawer\"\n        style={{ '--size': 'var(--ir-drawer-width,40rem)' }}\n        open={this.open}\n        label={this.label}\n        placement={this.placement}\n        withoutHeader={this.withoutHeader}\n        lightDismiss={this.lightDismiss}\n        exportparts=\"dialog, header, header-actions, title, close-button, close-button__base, body, footer\"\n      >\n        {this.slotState.get('header-actions') && <slot name=\"header-actions\" slot=\"header-actions\"></slot>}\n        {this.slotState.get('label') && <slot name=\"label\" slot=\"label\"></slot>}\n        <slot></slot>\n        {this.slotState.get('footer') && <slot name=\"footer\" slot=\"footer\"></slot>}\n      </wa-drawer>\n    );\n  }\n}\n"]}