{"version":3,"file":"ir-room-nights.js","sourceRoot":"","sources":["../../../../src/components/igloo-calendar/ir-room-nights/ir-room-nights.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Host, Prop, State, h, Event, EventEmitter, Fragment } from '@stencil/core';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport { convertDatePrice, formatDate, getDaysArray } from '@/utils/utils';\r\nimport { Booking, Day, IUnit, Room } from '@/models/booking.dto';\r\nimport { IRoomNightsDataEventPayload } from '@/models/property-types';\r\nimport moment from 'moment';\r\nimport locales from '@/stores/locales.store';\r\nimport { Variation } from '@/models/property';\r\n\r\n@Component({\r\n  tag: 'ir-room-nights',\r\n  styleUrl: 'ir-room-nights.css',\r\n  scoped: true,\r\n})\r\nexport class IrRoomNights {\r\n  @Prop() bookingNumber: string;\r\n  @Prop() propertyId: number;\r\n  @Prop() language: string;\r\n  @Prop() identifier: string;\r\n  @Prop() toDate: string;\r\n  @Prop() fromDate: string;\r\n  @Prop() pool: string;\r\n  @Prop() ticket: string;\r\n  @Prop() defaultDates: { from_date: string; to_date: string };\r\n\r\n  @State() bookingEvent: Booking;\r\n  @State() selectedRoom: Room;\r\n  @State() rates: Day[] = [];\r\n  @State() isLoading = false;\r\n  @State() initialLoading = false;\r\n  @State() inventory: number | null = null;\r\n  @State() isEndDateBeforeFromDate: boolean = false;\r\n  @State() defaultTotalNights = 0;\r\n  @State() isInputFocused = -1;\r\n  @State() dates: { from_date: Date; to_date: Date } = { from_date: new Date(), to_date: new Date() };\r\n\r\n  @Event() closeRoomNightsDialog: EventEmitter<IRoomNightsDataEventPayload>;\r\n\r\n  private bookingService = new BookingService();\r\n\r\n  componentWillLoad() {\r\n    this.dates = { from_date: new Date(this.fromDate), to_date: new Date(this.toDate) };\r\n    this.init();\r\n  }\r\n\r\n  isButtonDisabled() {\r\n    return this.isLoading || this.rates.some(rate => rate.amount === -1) || this.inventory === 0 || this.inventory === null;\r\n  }\r\n  async init() {\r\n    try {\r\n      const { from_date } = this.defaultDates;\r\n      if (moment(from_date, 'YYYY-MM-DD').isBefore(moment(this.fromDate, 'YYYY-MM-DD'))) {\r\n        this.dates.from_date = new Date(from_date);\r\n      } else {\r\n        this.dates.from_date = new Date(this.fromDate);\r\n      }\r\n      this.dates.to_date = new Date(this.toDate);\r\n      this.bookingEvent = await this.bookingService.getExposedBooking(this.bookingNumber, this.language);\r\n      if (this.bookingEvent) {\r\n        const filteredRooms = this.bookingEvent.rooms.filter(room => room.identifier === this.identifier);\r\n        this.selectedRoom = filteredRooms[0];\r\n        const lastDay = this.selectedRoom?.days[this.selectedRoom.days.length - 1];\r\n        //let first_rate = this.selectedRoom.days[0].amount;\r\n        if (moment(this.toDate).add(-1, 'days').isSame(moment(lastDay.date))) {\r\n          console.log('here1');\r\n          const amount = await this.fetchBookingAvailability(this.fromDate, this.selectedRoom.days[0].date, this.selectedRoom.rateplan.id);\r\n          const newDatesArr = getDaysArray(this.selectedRoom.days[0].date, this.fromDate);\r\n          this.isEndDateBeforeFromDate = true;\r\n          this.rates;\r\n          this.rates = [\r\n            ...newDatesArr.map(day => ({\r\n              amount: amount / newDatesArr.length,\r\n              date: day,\r\n              cost: null,\r\n            })),\r\n            ...this.selectedRoom.days,\r\n          ];\r\n          this.defaultTotalNights = this.rates.length - this.selectedRoom.days.length;\r\n        } else {\r\n          console.log('here2');\r\n          console.log(lastDay);\r\n          const amount = await this.fetchBookingAvailability(this.bookingEvent.to_date, moment(this.toDate, 'YYYY-MM-DD').format('YYYY-MM-DD'), this.selectedRoom.rateplan.id);\r\n          const newDatesArr = getDaysArray(lastDay.date, this.toDate);\r\n          this.rates = [\r\n            ...this.selectedRoom.days,\r\n            ...newDatesArr.map(day => ({\r\n              amount: amount / newDatesArr.length,\r\n              date: day,\r\n              cost: null,\r\n            })),\r\n          ];\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  private handleInput(event: string, index: number) {\r\n    let inputValue = event;\r\n    let days = [...this.rates];\r\n    inputValue = inputValue.replace(/[^0-9.]/g, '');\r\n    if (inputValue === '') {\r\n      days[index].amount = -1;\r\n    } else {\r\n      if (!isNaN(Number(inputValue))) {\r\n        days[index].amount = Number(inputValue);\r\n      }\r\n    }\r\n    this.rates = days;\r\n  }\r\n  async fetchBookingAvailability(from_date: string, to_date: string, rate_plan_id: number) {\r\n    try {\r\n      this.initialLoading = true;\r\n      const bookingAvailability = await this.bookingService.getBookingAvailability({\r\n        from_date,\r\n        to_date,\r\n        propertyid: this.propertyId,\r\n        adultChildCount: {\r\n          adult: this.selectedRoom.rateplan.selected_variation.adult_nbr,\r\n          child: this.selectedRoom.rateplan.selected_variation.child_nbr,\r\n        },\r\n        language: this.language,\r\n        currency: this.bookingEvent.currency,\r\n        room_type_ids: [this.selectedRoom.roomtype.id],\r\n        rate_plan_ids: [rate_plan_id],\r\n      });\r\n      console.log(bookingAvailability[0], rate_plan_id);\r\n      this.inventory = bookingAvailability[0].inventory;\r\n      const rate_plan = bookingAvailability[0].rateplans.find(rate => rate.id === rate_plan_id);\r\n      if (!rate_plan || !rate_plan.variations) {\r\n        this.inventory = null;\r\n        return null;\r\n      }\r\n      const selected_variation: Variation = rate_plan.variations?.find(\r\n        variation =>\r\n          variation.adult_nbr === this.selectedRoom.rateplan.selected_variation.adult_nbr && variation.child_nbr === this.selectedRoom.rateplan.selected_variation.child_nbr,\r\n      );\r\n      if (!selected_variation) {\r\n        return null;\r\n      }\r\n      return selected_variation.discounted_gross_amount;\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      this.initialLoading = false;\r\n    }\r\n  }\r\n\r\n  private renderInputField(index: number, currency_symbol: string, day: Day) {\r\n    return (\r\n      <div class=\"col-3 ml-1 position-relative  m-0 p-0 rate-input-container\">\r\n        <ir-price-input\r\n          value={day.amount > 0 ? day.amount.toString() : ''}\r\n          disabled={this.inventory === 0 || this.inventory === null}\r\n          currency={currency_symbol}\r\n          aria-label=\"rate\"\r\n          aria-describedby=\"rate cost\"\r\n          onTextChange={e => this.handleInput(e.detail, index)}\r\n        ></ir-price-input>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private renderReadOnlyField(currency_symbol: string, day: Day) {\r\n    return <p class=\"col-9 ml-1 m-0 p-0\">{`${currency_symbol}${Number(day.amount).toFixed(2)}`}</p>;\r\n  }\r\n  private renderRateFields(index: number, currency_symbol: string, day: Day) {\r\n    if (this.isEndDateBeforeFromDate) {\r\n      if (index < this.defaultTotalNights) {\r\n        return this.renderInputField(index, currency_symbol, day);\r\n      } else {\r\n        return this.renderReadOnlyField(currency_symbol, day);\r\n      }\r\n    } else {\r\n      return index < this.selectedRoom.days.length ? this.renderReadOnlyField(currency_symbol, day) : this.renderInputField(index, currency_symbol, day);\r\n    }\r\n  }\r\n  renderDates() {\r\n    const currency_symbol = this.bookingEvent.currency.symbol;\r\n    // const currency_symbol = getCurrencySymbol(this.bookingEvent.currency.code);\r\n    return (\r\n      <div class={'mt-2 m-0'}>\r\n        {this.rates?.map((day, index) => (\r\n          <div class={'row m-0 mt-1 align-items-center'}>\r\n            <p class={'col-2 m-0 p-0'}>{convertDatePrice(day.date)}</p>\r\n            {this.renderRateFields(index, currency_symbol, day)}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n  async handleRoomConfirmation() {\r\n    try {\r\n      this.isLoading = true;\r\n      let oldRooms = [...this.bookingEvent.rooms];\r\n      let selectedRoomIndex = oldRooms.findIndex(room => room.identifier === this.identifier);\r\n      if (selectedRoomIndex === -1) {\r\n        throw new Error('Invalid Pool');\r\n      }\r\n      oldRooms[selectedRoomIndex] = {\r\n        ...oldRooms[selectedRoomIndex],\r\n        days: this.rates,\r\n        to_date: moment(this.dates.to_date).format('YYYY-MM-DD'),\r\n        from_date: moment(this.dates.from_date).format('YYYY-MM-DD'),\r\n      };\r\n      const body = {\r\n        assign_units: true,\r\n        check_in: true,\r\n        is_pms: true,\r\n        is_direct: true,\r\n        pickup_info: this.bookingEvent.pickup_info,\r\n        extra_services: this.bookingEvent.extra_services,\r\n        booking: {\r\n          booking_nbr: this.bookingNumber,\r\n          from_date: moment(this.dates.from_date).format('YYYY-MM-DD'),\r\n          to_date: moment(this.dates.to_date).format('YYYY-MM-DD'),\r\n          remark: this.bookingEvent.remark,\r\n          property: this.bookingEvent.property,\r\n          source: this.bookingEvent.source,\r\n          currency: this.bookingEvent.currency,\r\n          arrival: this.bookingEvent.arrival,\r\n          guest: this.bookingEvent.guest,\r\n          rooms: oldRooms,\r\n        },\r\n      };\r\n      await this.bookingService.doReservation(body);\r\n      this.closeRoomNightsDialog.emit({ type: 'confirm', pool: this.pool });\r\n    } catch (error) {\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n  render() {\r\n    if (!this.bookingEvent) {\r\n      return (\r\n        <div class=\"loading-container\">\r\n          <ir-loading-screen></ir-loading-screen>\r\n        </div>\r\n      );\r\n    }\r\n    console.log(this.inventory);\r\n    return (\r\n      <Host>\r\n        <div class=\"card position-sticky mb-0 shadow-none p-0 \">\r\n          <div class=\"d-flex mt-2 align-items-center justify-content-between \">\r\n            <h3 class=\"card-title text-left pb-1 font-medium-2 px-2\">\r\n              {locales.entries.Lcz_AddingRoomNightsTo} {this.selectedRoom?.roomtype?.name} {(this.selectedRoom?.unit as IUnit).name}\r\n            </h3>\r\n            <button type=\"button\" class=\"close close-icon\" onClick={() => this.closeRoomNightsDialog.emit({ type: 'cancel', pool: this.pool })}>\r\n              <ir-icon icon=\"ft-x\" class={'m-0'}></ir-icon>\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <section class={'text-left px-2'}>\r\n          <p class={'font-medium-1'}>\r\n            {`${locales.entries.Lcz_Booking}#`} {this.bookingNumber}\r\n          </p>\r\n          {this.initialLoading ? (\r\n            <p class={'mt-2 text-secondary'}>{locales.entries['Lcz_CheckingRoomAvailability ']}</p>\r\n          ) : (\r\n            <Fragment>\r\n              <p class={'font-weight-bold font-medium-1'}>{`${formatDate(moment(this.dates.from_date).format('YYYY-MM-DD'), 'YYYY-MM-DD')} - ${formatDate(\r\n                moment(this.dates.to_date).format('YYYY-MM-DD'),\r\n                'YYYY-MM-DD',\r\n              )}`}</p>\r\n              <p class={'font-medium-1 mb-0'}>\r\n                {`${this.selectedRoom.rateplan.name}`} {this.selectedRoom.rateplan.is_non_refundable && <span class={'irfontgreen'}>{locales.entries.Lcz_NonRefundable}</span>}\r\n              </p>\r\n              {(this.inventory === 0 || this.inventory === null) && <p class=\"font-medium-1 text danger\">{locales.entries.Lcz_NoAvailabilityForAdditionalNights}</p>}\r\n\r\n              {this.selectedRoom.rateplan.custom_text && <p class={'text-secondary mt-0'}>{this.selectedRoom.rateplan.custom_text}</p>}\r\n              {this.renderDates()}\r\n            </Fragment>\r\n          )}\r\n        </section>\r\n        <section class={'d-flex align-items-center mt-2 px-2'}>\r\n          <ir-button\r\n            btn_color=\"secondary\"\r\n            btn_disabled={this.isLoading}\r\n            text={locales?.entries.Lcz_Cancel}\r\n            class=\"full-width\"\r\n            btn_styles=\"justify-content-center\"\r\n            onClickHandler={() => this.closeRoomNightsDialog.emit({ type: 'cancel', pool: this.pool })}\r\n          ></ir-button>\r\n\r\n          {this.inventory > 0 && this.inventory !== null && (\r\n            <ir-button\r\n              isLoading={this.isLoading}\r\n              text={locales?.entries.Lcz_Confirm}\r\n              btn_disabled={this.isButtonDisabled()}\r\n              class=\"ml-1 full-width\"\r\n              btn_styles=\"justify-content-center\"\r\n              onClickHandler={this.handleRoomConfirmation.bind(this)}\r\n            ></ir-button>\r\n          )}\r\n        </section>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}