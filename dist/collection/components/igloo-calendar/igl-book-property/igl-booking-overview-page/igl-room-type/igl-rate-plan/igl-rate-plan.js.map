{"version":3,"file":"igl-rate-plan.js","sourceRoot":"","sources":["../../../../../../../src/components/igloo-calendar/igl-book-property/igl-booking-overview-page/igl-room-type/igl-rate-plan/igl-rate-plan.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Host, Prop, h, Event, EventEmitter, Fragment } from '@stencil/core';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport locales from '@/stores/locales.store';\r\nimport { RatePlan, Variation } from '@/models/property';\r\nimport booking_store, { IRatePlanSelection, reserveRooms, updateRoomParams } from '@/stores/booking.store';\r\n\r\n@Component({\r\n  tag: 'igl-rate-plan',\r\n  styleUrl: 'igl-rate-plan.css',\r\n  scoped: true,\r\n})\r\nexport class IglRatePlan {\r\n  // Used Props with type annotations\r\n  @Prop() ratePlan: RatePlan;\r\n  @Prop() roomTypeId: number;\r\n  @Prop() ratePricingMode: Array<{ CODE_NAME: string; CODE_VALUE_EN: string }> = [];\r\n  @Prop() currency!: { symbol: string };\r\n  @Prop() shouldBeDisabled!: boolean;\r\n  @Prop() bookingType: string = 'PLUS_BOOKING';\r\n  @Prop() isBookDisabled: boolean = false;\r\n  @Prop() visibleInventory!: IRatePlanSelection;\r\n\r\n  @Event() buttonClicked!: EventEmitter<{ [key: string]: any }>;\r\n\r\n  // Determine if the form inputs should be disabled\r\n  private disableForm(): boolean {\r\n    const { bookingType, shouldBeDisabled, ratePlan, visibleInventory } = this;\r\n    if (bookingType === 'EDIT_BOOKING' && shouldBeDisabled) {\r\n      return false;\r\n    }\r\n    return !ratePlan.is_available_to_book || visibleInventory?.visibleInventory === 0;\r\n  }\r\n\r\n  // Update the rate plan selection in the booking store\r\n  private updateRateplanSelection(props: Partial<IRatePlanSelection>): void {\r\n    const { roomTypeId, ratePlan } = this;\r\n    const currentSelections = booking_store.ratePlanSelections;\r\n\r\n    booking_store.ratePlanSelections = {\r\n      ...currentSelections,\r\n      [roomTypeId]: {\r\n        ...currentSelections[roomTypeId],\r\n        [ratePlan.id]: {\r\n          ...currentSelections[roomTypeId][ratePlan.id],\r\n          ...props,\r\n        },\r\n      },\r\n    };\r\n  }\r\n\r\n  // Handle changes to select inputs\r\n  private handleDataChange(key: 'adult_child_offering' | 'rate' | 'totalRooms', evt: Event): void {\r\n    const value = (evt.target as HTMLInputElement | HTMLSelectElement).value;\r\n    if (key === 'adult_child_offering') {\r\n      this.handleVariationChange(value);\r\n    } else if (key === 'rate') {\r\n      this.updateRateplanSelection({ view_mode: value as any });\r\n    } else if (key === 'totalRooms') {\r\n      reserveRooms({\r\n        roomTypeId: this.roomTypeId,\r\n        ratePlanId: this.ratePlan.id,\r\n        rooms: Number(value),\r\n      });\r\n    }\r\n  }\r\n\r\n  // Navigate to the next page for booking\r\n  private bookProperty(): void {\r\n    this.buttonClicked.emit({ key: 'next' });\r\n  }\r\n\r\n  // Render the rate amount\r\n  private renderRate(): string {\r\n    const { visibleInventory } = this;\r\n    if (!visibleInventory) return '';\r\n    if (visibleInventory.is_amount_modified) {\r\n      return visibleInventory.rp_amount.toString();\r\n    }\r\n    const { selected_variation, view_mode } = visibleInventory;\r\n    const amount = view_mode === '001' ? selected_variation?.discounted_gross_amount : selected_variation?.amount_per_night_gross;\r\n    return amount?.toString() || '';\r\n  }\r\n\r\n  // Format variation for display\r\n  private formatVariation(variation: Variation): string {\r\n    if (!variation) return '';\r\n    const adults = `${variation.adult_nbr} ${variation.adult_nbr === 1 ? locales.entries['Lcz_Adult']?.toLowerCase() : locales.entries['Lcz_Adults']?.toLowerCase()}`;\r\n    const children =\r\n      variation.child_nbr > 0\r\n        ? `${variation.child_nbr} ${variation.child_nbr > 1 ? locales.entries['Lcz_Children']?.toLowerCase() : locales.entries['Lcz_Child']?.toLowerCase()}`\r\n        : '';\r\n    return children ? `${adults} ${children}` : adults;\r\n  }\r\n\r\n  // Get tooltip messages for the rate plan\r\n  private getTooltipMessages(): string | undefined {\r\n    const { ratePlan, visibleInventory } = this;\r\n    const selectedVariation = visibleInventory?.selected_variation;\r\n    if (!selectedVariation) return;\r\n\r\n    const matchingVariation = ratePlan.variations?.find(variation => this.formatVariation(variation) === this.formatVariation(selectedVariation));\r\n\r\n    if (!matchingVariation) return;\r\n\r\n    const cancellationPolicy = matchingVariation.applicable_policies?.find(p => p.type === 'cancelation')?.combined_statement;\r\n    const guaranteePolicy = matchingVariation.applicable_policies?.find(p => p.type === 'guarantee')?.combined_statement;\r\n\r\n    let tooltip = '';\r\n    if (cancellationPolicy) {\r\n      tooltip += `<b><u>Cancellation:</u></b> ${cancellationPolicy}<br/>`;\r\n    }\r\n    if (guaranteePolicy) {\r\n      tooltip += `<b><u>Guarantee:</u></b> ${guaranteePolicy}`;\r\n    }\r\n    return tooltip || undefined;\r\n  }\r\n\r\n  // Handle variation change when a different option is selected\r\n  private async handleVariationChange(value: string): Promise<void> {\r\n    const { ratePlan, roomTypeId } = this;\r\n    const variations = ratePlan.variations || [];\r\n    const selectedVariation = variations.find(v => this.formatVariation(v) === value);\r\n\r\n    if (!selectedVariation) return;\r\n\r\n    updateRoomParams({\r\n      params: { selected_variation: selectedVariation },\r\n      ratePlanId: ratePlan.id,\r\n      roomTypeId,\r\n    });\r\n  }\r\n\r\n  // Reset reserved rooms in the booking store\r\n  private resetReserved(): void {\r\n    const updatedSelections = Object.entries(booking_store.ratePlanSelections).reduce((acc, [roomTypeId, ratePlans]) => {\r\n      acc[roomTypeId] = Object.entries(ratePlans).reduce((rpAcc, [ratePlanId, ratePlan]) => {\r\n        rpAcc[ratePlanId] = { ...ratePlan, reserved: 0 };\r\n        return rpAcc;\r\n      }, {} as any);\r\n      return acc;\r\n    }, {} as any);\r\n    booking_store.ratePlanSelections = updatedSelections;\r\n  }\r\n\r\n  render() {\r\n    const { ratePlan, bookingType, currency, ratePricingMode, visibleInventory } = this;\r\n    const isAvailableToBook = ratePlan.is_available_to_book;\r\n    const disableForm = this.disableForm();\r\n    const selectedVariation = visibleInventory?.selected_variation;\r\n    const formattedVariations = ratePlan.variations?.map(v => this.formatVariation(v));\r\n    console.log(visibleInventory);\r\n    // if (!this.visibleInventory) {\r\n    //   return null;\r\n    // }\r\n    return (\r\n      <Host data-testid={`rp-${this.ratePlan.id}`}>\r\n        <div\r\n          class={`d-flex m-0 p-0 ${isAvailableToBook ? 'flex-column flex-lg-row align-items-lg-center justify-content-lg-between' : 'align-items-center justify-content-between'}`}\r\n        >\r\n          <div class=\"rateplan-name-container d-flex align-items-center\" style={{ gap: '0.5rem' }}>\r\n            {bookingType === 'BAR_BOOKING' ? (\r\n              <Fragment>\r\n                <span class=\"font-weight-bold\">{ratePlan.name.split('/')[0]}</span>\r\n                <span>/{ratePlan.name.split('/')[1]}</span>\r\n              </Fragment>\r\n            ) : (\r\n              <span>\r\n                {ratePlan.short_name} {ratePlan.is_non_refundable && <span class=\"non-ref-span\">Non Refundable</span>}\r\n              </span>\r\n            )}\r\n            {isAvailableToBook && <ir-tooltip message={this.getTooltipMessages()}></ir-tooltip>}\r\n          </div>\r\n\r\n          {isAvailableToBook ? (\r\n            <div class=\"d-md-flex justify-content-md-end align-items-md-center flex-fill rateplan-container\">\r\n              <div class=\"mt-1 mt-md-0 flex-fill max-w-300\">\r\n                <fieldset class=\"position-relative\">\r\n                  <select\r\n                    disabled={disableForm}\r\n                    data-testid=\"adult-child-offering\"\r\n                    class=\"form-control input-sm\"\r\n                    id={uuidv4()}\r\n                    onChange={evt => this.handleDataChange('adult_child_offering', evt)}\r\n                  >\r\n                    {formattedVariations?.map(variation => (\r\n                      <option value={variation} selected={this.formatVariation(selectedVariation) === variation}>\r\n                        {variation}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </fieldset>\r\n              </div>\r\n              <div class=\"m-0 p-0 mt-1 mt-md-0 d-flex justify-content-between align-items-md-center ml-md-1\">\r\n                <div class=\"d-flex m-0 p-0 rate-total-night-view mt-0 flex-grow-1\">\r\n                  <ir-price-input\r\n                    testId={'amount_input'}\r\n                    disabled={disableForm}\r\n                    onTextChange={e =>\r\n                      this.updateRateplanSelection({\r\n                        is_amount_modified: true,\r\n                        rp_amount: Number(e.detail),\r\n                      })\r\n                    }\r\n                    aria-label={`${this.visibleInventory?.roomtype?.name} ${this.ratePlan.short_name}'s rate`}\r\n                    aria-describedby={`${this.ratePlan.short_name}'s rate`}\r\n                    class=\"ir-br-input-none w-100 flex-grow-1\"\r\n                    currency={currency.symbol}\r\n                    value={this.renderRate()}\r\n                    placeholder={locales.entries.Lcz_Rate || 'Rate'}\r\n                  ></ir-price-input>\r\n                  <fieldset class=\"position-relative m-0 total-nights-container p-0\">\r\n                    <select\r\n                      data-testid={'nigh_stay_select'}\r\n                      disabled={disableForm}\r\n                      class=\"form-control input-sm m-0 nightBorder rounded-0 py-0\"\r\n                      id={uuidv4()}\r\n                      onChange={evt =>\r\n                        this.updateRateplanSelection({\r\n                          view_mode: (evt.target as HTMLSelectElement).value as any,\r\n                        })\r\n                      }\r\n                    >\r\n                      {ratePricingMode.map(data => (\r\n                        <option value={data.CODE_NAME} selected={visibleInventory?.view_mode === data.CODE_NAME}>\r\n                          {data.CODE_VALUE_EN}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </fieldset>\r\n                </div>\r\n                {(bookingType === 'PLUS_BOOKING' || bookingType === 'ADD_ROOM') && (\r\n                  <div class=\"flex-fill mt-lg-0 ml-1 m-0 mt-md-0 p-0\">\r\n                    <fieldset class=\"position-relative\">\r\n                      <select\r\n                        data-testid={'inventory_select'}\r\n                        disabled={visibleInventory.visibleInventory === 0}\r\n                        class=\"form-control input-sm\"\r\n                        id={uuidv4()}\r\n                        onChange={evt => this.handleDataChange('totalRooms', evt)}\r\n                      >\r\n                        {Array.from({ length: (visibleInventory.visibleInventory || 0) + 1 }, (_, i) => i).map(i => (\r\n                          <option value={i} selected={visibleInventory.reserved === i}>\r\n                            {i}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                    </fieldset>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              {bookingType === 'EDIT_BOOKING' && (\r\n                <Fragment>\r\n                  <div class=\"m-0 p-0 ml-md-1 mt-md-0 d-none d-md-block\">\r\n                    <fieldset class=\"position-relative\">\r\n                      <input\r\n                        data-testid={'inventory_radio'}\r\n                        disabled={disableForm}\r\n                        type=\"radio\"\r\n                        name=\"ratePlanGroup\"\r\n                        value=\"1\"\r\n                        onChange={() => {\r\n                          this.resetReserved();\r\n                          reserveRooms({\r\n                            roomTypeId: this.roomTypeId,\r\n                            ratePlanId: this.ratePlan.id,\r\n                            rooms: 1,\r\n                            guest: [\r\n                              {\r\n                                last_name: booking_store.guest.last_name,\r\n                                first_name: booking_store.guest.first_name,\r\n                                unit: null,\r\n                                bed_preference: this.visibleInventory.roomtype.is_bed_configuration_enabled ? booking_store.guest.bed_preference : null,\r\n                                infant_nbr: this.visibleInventory.selected_variation.child_nbr > 0 ? booking_store.guest.infant_nbr : null,\r\n                              },\r\n                            ],\r\n                          });\r\n                        }}\r\n                        checked={visibleInventory.reserved === 1}\r\n                      />\r\n                    </fieldset>\r\n                  </div>\r\n                  <button\r\n                    data-testid=\"book_property\"\r\n                    disabled={disableForm}\r\n                    type=\"button\"\r\n                    class=\"btn btn-primary booking-btn mt-lg-0 btn-sm ml-md-1 mt-1 d-md-none\"\r\n                    onClick={() => {\r\n                      this.resetReserved();\r\n                      reserveRooms({\r\n                        roomTypeId: this.roomTypeId,\r\n                        ratePlanId: this.ratePlan.id,\r\n                        rooms: 1,\r\n                        guest: [\r\n                          {\r\n                            last_name: booking_store.guest.last_name,\r\n                            first_name: booking_store.guest.first_name,\r\n                            unit: null,\r\n                            bed_preference: this.visibleInventory.roomtype.is_bed_configuration_enabled ? booking_store.guest.bed_preference : null,\r\n                            infant_nbr: this.visibleInventory.selected_variation.child_nbr > 0 ? booking_store.guest.infant_nbr : null,\r\n                          },\r\n                        ],\r\n                      });\r\n                      this.bookProperty();\r\n                    }}\r\n                  >\r\n                    {visibleInventory.reserved === 1 ? locales.entries.Lcz_Current : locales.entries.Lcz_Select}\r\n                  </button>\r\n                </Fragment>\r\n              )}\r\n\r\n              {(bookingType === 'BAR_BOOKING' || bookingType === 'SPLIT_BOOKING') && (\r\n                <button\r\n                  data-testid=\"book\"\r\n                  disabled={disableForm || (bookingType === 'SPLIT_BOOKING' && this.isBookDisabled)}\r\n                  type=\"button\"\r\n                  class=\"btn btn-primary booking-btn mt-lg-0 btn-sm ml-md-1 mt-1\"\r\n                  onClick={() => this.bookProperty()}\r\n                >\r\n                  {locales.entries.Lcz_Book}\r\n                </button>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <p class=\"text-danger m-0 p-0\">{locales.entries['Lcz_NotAvailable'] || 'Not available'}</p>\r\n          )}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}