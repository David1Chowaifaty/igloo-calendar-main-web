{"version":3,"file":"igl-application-info.js","sourceRoot":"","sources":["../../../../../../src/components/igloo-calendar/igl-book-property/igl-booking-form/igl-application-info/igl-application-info.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,eAAe,CAAC;AAGxE,OAAO,aAAa,EAAE,EAAsB,kBAAkB,EAAiB,MAAM,wBAAwB,CAAC;AAC9G,OAAO,OAAO,MAAM,wBAAwB,CAAC;AAC7C,OAAO,EAAE,EAAE,EAAE,MAAM,MAAM,CAAC;AAC1B,OAAO,aAAa,EAAE,EAAE,YAAY,EAAE,MAAM,wBAAwB,CAAC;AACrE,OAAO,EAAE,YAAY,EAAE,MAAM,eAAe,CAAC;AAC7C,OAAO,gBAAgB,MAAM,8BAA8B,CAAC;AAO5D,MAAM,OAAO,kBAAkB;;QAYrB,qBAAgB,GAAG,IAAI,gBAAgB,EAAE,CAAC;;;;iCARtB,EAAE;2BACA,cAAc;;2BAEd,CAAC;;+BAGJ,KAAK;;IAIhC,iBAAiB;;QACf,IAAI,YAAY,CAAC,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE,CAAC;YACrD,MAAM,aAAa,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;YACzC,IAAI,aAAa,CAAC,MAAM,GAAG,CAAC;gBAAE,IAAI,CAAC,WAAW,CAAC,EAAE,IAAI,EAAE,MAAA,MAAA,aAAa,CAAC,CAAC,CAAC,0CAAE,EAAE,0CAAE,QAAQ,EAAE,EAAE,CAAC,CAAC;QAC7F,CAAC;IACH,CAAC;IAEO,WAAW,CAAC,MAA8B;QAChD,MAAM,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,EAAE,CAAC;QACtD,MAAM,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,EAAE,CAAC;QACtD,IAAI,SAAS,GAAG,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;QAClD,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,mCACpB,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,GACzB,MAAM,CACV,CAAC;QACF,aAAa,CAAC,kBAAkB,mCAC3B,aAAa,CAAC,kBAAkB,KACnC,CAAC,UAAU,CAAC,kCACP,aAAa,CAAC,kBAAkB,CAAC,UAAU,CAAC,KAC/C,CAAC,UAAU,CAAC,kCAAO,IAAI,CAAC,iBAAiB,KAAE,KAAK,EAAE,CAAC,GAAG,SAAS,CAAC,SAEnE,CAAC;IACJ,CAAC;IAGD,mBAAmB,CACjB,KAGE;QAEF,QAAQ,KAAK,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC;YACzB,KAAK,MAAM,CAAC;YACZ,KAAK,gBAAgB,CAAC;YACtB,KAAK,MAAM;gBACT,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;gBAC5B,MAAM;QACV,CAAC;IACH,CAAC;IAEO,kBAAkB;;QACxB,MAAM,EAAE,QAAQ,EAAE,kBAAkB,EAAE,GAAG,IAAI,CAAC,iBAAiB,CAAC;QAChE,IAAI,iBAAiB,GAAG,kBAAkB,CAAC;QAC3C,IAAI,MAAA,IAAI,CAAC,SAAS,0CAAE,UAAU,EAAE,CAAC;YAC/B,iBAAiB,GAAG,IAAI,CAAC,gBAAgB,CAAC,0BAA0B,CAAC;gBACnE,UAAU,EAAE,QAAQ,CAAC,UAAU;gBAC/B,aAAa,EAAE,kBAAkB;gBACjC,OAAO,EAAE,MAAA,IAAI,CAAC,SAAS,0CAAE,UAAU;aACpC,CAAC,CAAC;QACL,CAAC;QAED,IAAI,CAAC,iBAAiB;YAAE,OAAO;QAE/B,MAAM,iBAAiB,GAAG,MAAA,QAAQ,CAAC,UAAU,0CAAE,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,SAAS,CAAC,SAAS,KAAK,iBAAiB,CAAC,SAAS,IAAI,SAAS,CAAC,SAAS,KAAK,iBAAiB,CAAC,SAAS,CAAC,CAAC;QAE7K,IAAI,CAAC,iBAAiB;YAAE,OAAO;QAE/B,MAAM,kBAAkB,GAAG,MAAA,MAAA,iBAAiB,CAAC,mBAAmB,0CAAE,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,KAAK,aAAa,CAAC,0CAAE,kBAAkB,CAAC;QAC1H,MAAM,eAAe,GAAG,MAAA,MAAA,iBAAiB,CAAC,mBAAmB,0CAAE,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,KAAK,WAAW,CAAC,0CAAE,kBAAkB,CAAC;QAErH,IAAI,OAAO,GAAG,EAAE,CAAC;QACjB,IAAI,kBAAkB,EAAE,CAAC;YACvB,OAAO,IAAI,+BAA+B,kBAAkB,OAAO,CAAC;QACtE,CAAC;QACD,IAAI,eAAe,EAAE,CAAC;YACpB,OAAO,IAAI,4BAA4B,eAAe,EAAE,CAAC;QAC3D,CAAC;QACD,OAAO,OAAO,IAAI,SAAS,CAAC;IAC9B,CAAC;IAEO,SAAS;;QACf,IAAI,IAAI,CAAC,iBAAiB,CAAC,kBAAkB,EAAE,CAAC;YAC9C,OAAO,IAAI,CAAC,iBAAiB,CAAC,SAAS,KAAK,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC;QAC7I,CAAC;QACD,IAAI,SAAS,GAAG,IAAI,CAAC,iBAAiB,CAAC,kBAAkB,CAAC;QAC1D,IAAI,MAAA,IAAI,CAAC,SAAS,0CAAE,UAAU,EAAE,CAAC;YAC/B,SAAS,GAAG,IAAI,CAAC,gBAAgB,CAAC,0BAA0B,CAAC;gBAC3D,UAAU,EAAE,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,UAAU;gBACtD,aAAa,EAAE,IAAI,CAAC,iBAAiB,CAAC,kBAAkB;gBACxD,OAAO,EAAE,MAAA,IAAI,CAAC,SAAS,0CAAE,UAAU;aACpC,CAAC,CAAC;QACL,CAAC;QACD,OAAO,SAAS,CAAC,uBAAuB,CAAC;IAC3C,CAAC;IAEO,WAAW;;QACjB,MAAM,MAAM,GAAG,EAAE,CAAC;QAClB,IAAI,CAAC,aAAa,CAAC,oBAAoB,EAAE,CAAC;YACxC,OAAO,MAAM,CAAC;QAChB,CAAC;QACD,MAAA,MAAA,IAAI,CAAC,iBAAiB,CAAC,QAAQ,0CAAE,gBAAgB,0CAAE,OAAO,CAAC,IAAI,CAAC,EAAE;YAChE,IAAI,IAAI,CAAC,kBAAkB,EAAE,CAAC;gBAC5B,MAAM,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,EAAE,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;YACnD,CAAC;QACH,CAAC,CAAC,CAAC;QACH,MAAM,kBAAkB,GAAG,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QAChH,MAAM,eAAe,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;QAC1F,OAAO,IAAI,CAAC,WAAW,KAAK,cAAc;YACxC,CAAC,CAAC,CAAC,GAAG,eAAe,EAAE,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,EAAE,MAAK,MAAA,IAAI,CAAC,QAAQ,0CAAE,UAAU,CAAA,CAAC,CAAC,CAAC,MAAA,IAAI,CAAC,QAAQ,0CAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;iBAChH,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;iBAChB,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;YACjD,CAAC,CAAC,eAAe,CAAC;IACtB,CAAC;IAED,MAAM;;QACJ,MAAM,gBAAgB,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QAC5C,MAAM,kBAAkB,GAAG,IAAI,CAAC,gBAAgB,CAAC,6BAA6B,CAAC;YAC7E,aAAa,EAAE,IAAI,CAAC,iBAAiB,CAAC,kBAAkB;YACxD,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,UAAU;YAClC,UAAU,EAAE,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,UAAU;SACvD,CAAC,CAAC;QACH,OAAO,CACL,EAAC,IAAI,qDAAC,KAAK,EAAE,MAAM;YACjB,4DAAK,KAAK,EAAC,gBAAgB;gBACxB,CAAC,IAAI,CAAC,WAAW,KAAK,cAAc,IAAI,IAAI,CAAC,WAAW,KAAK,UAAU,IAAI,IAAI,CAAC,WAAW,KAAK,cAAc,CAAC,IAAI,CAClH,6DAAM,KAAK,EAAC,wBAAwB,IAAE,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,IAAI,CAAQ,CACnF;gBACD,4DAAK,KAAK,EAAC,2BAA2B;oBACpC,4DAAK,KAAK,EAAC,kBAAkB;wBAC3B,0DAAG,KAAK,EAAC,uBAAuB;4BAC7B,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,UAAU;;4BAAG,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,iBAAiB,IAAI,6DAAM,KAAK,EAAE,cAAc,qBAAuB,CACnJ;wBACJ,mEAAY,KAAK,EAAC,iBAAiB,EAAC,OAAO,EAAE,IAAI,CAAC,kBAAkB,EAAE,GAAe,CACjF;oBACN,0DAAG,KAAK,EAAC,mBAAmB,EAAC,SAAS,EAAE,kBAAkB,GAAM,CAC5D;gBACN,0DAAG,KAAK,EAAC,eAAe;oBACrB,YAAY,CAAC,MAAA,IAAI,CAAC,QAAQ,0CAAE,MAAM,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC;;oBAAG,OAAO,CAAC,OAAO,CAAC,QAAQ,CAC/E,CACA;YACN,4DAAK,KAAK,EAAC,gBAAgB;gBACzB,4DAAK,KAAK,EAAC,kBAAkB;oBAC3B,0DAAG,KAAK,EAAC,uBAAuB,IAAE,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,UAAU,CAAK;oBACjF,mEAAY,KAAK,EAAC,iBAAiB,EAAC,OAAO,EAAE,IAAI,CAAC,kBAAkB,EAAE,GAAe,CACjF;gBACN,0DAAG,KAAK,EAAC,mBAAmB,EAAC,SAAS,EAAE,kBAAkB,GAAM,CAC5D;YACN,4DAAK,KAAK,EAAC,mFAAmF;gBAC5F,4DAAK,KAAK,EAAC,kDAAkD;oBAC3D,8DACE,EAAE,EAAE,EAAE,EAAE,EACR,IAAI,EAAC,OAAO,EACZ,KAAK,EAAE,gBAAgB,IAAI,CAAC,eAAe,IAAI,CAAA,MAAA,IAAI,CAAC,SAAS,0CAAE,UAAU,MAAK,EAAE,IAAI,eAAe,EAAE,EACrG,WAAW,EAAE,MAAA,OAAO,CAAC,OAAO,CAAC,oBAAoB,CAAC,mCAAI,kBAAkB,EACxE,IAAI,EAAC,WAAW,EAChB,OAAO,EAAE,KAAK,CAAC,EAAE;4BACf,MAAM,IAAI,GAAI,KAAK,CAAC,MAA2B,CAAC,KAAK,CAAC;4BACtD,IAAI,CAAC,WAAW,CAAC,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC;4BACvC,IAAI,aAAa,CAAC,UAAU,CAAC,IAAI,KAAK,cAAc,EAAE,CAAC;gCACrD,kBAAkB,CAAC,OAAO,kCACrB,aAAa,CAAC,KAAK,KACtB,IAAI,IACJ,CAAC;4BACL,CAAC;wBACH,CAAC,EACD,QAAQ,QACR,KAAK,EAAE,MAAA,IAAI,CAAC,SAAS,0CAAE,UAAU,GACjC,CACE;gBACN,4DAAK,KAAK,EAAC,qCAAqC;oBAC9C,8DACE,EAAE,EAAE,EAAE,EAAE,EACR,IAAI,EAAC,OAAO,EACZ,KAAK,EAAE,gBAAgB,IAAI,CAAC,eAAe,IAAI,CAAA,MAAA,IAAI,CAAC,SAAS,0CAAE,SAAS,MAAK,EAAE,IAAI,eAAe,EAAE,EACpG,WAAW,EAAE,MAAA,OAAO,CAAC,OAAO,CAAC,mBAAmB,CAAC,mCAAI,iBAAiB,EACtE,IAAI,EAAC,WAAW,EAChB,OAAO,EAAE,KAAK,CAAC,EAAE;4BACf,MAAM,IAAI,GAAI,KAAK,CAAC,MAA2B,CAAC,KAAK,CAAC;4BACtD,IAAI,CAAC,WAAW,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;4BACtC,IAAI,aAAa,CAAC,UAAU,CAAC,IAAI,KAAK,cAAc,EAAE,CAAC;gCACrD,kBAAkB,CAAC,OAAO,kCACrB,aAAa,CAAC,KAAK,KACtB,IAAI,IACJ,CAAC;4BACL,CAAC;wBACH,CAAC,EACD,QAAQ,QACR,KAAK,EAAE,MAAA,IAAI,CAAC,SAAS,0CAAE,SAAS,GAChC,CACE;gBACN,4DAAK,KAAK,EAAC,kDAAkD,IAC1D,aAAa,CAAC,oBAAoB;oBACjC,CAAC,YAAY,CAAC,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,EAAE,CAAC;oBACjD,CAAC,IAAI,CAAC,WAAW,KAAK,cAAc,IAAI,IAAI,CAAC,WAAW,KAAK,UAAU,IAAI,IAAI,CAAC,WAAW,KAAK,cAAc,CAAC,IAAI,CACjH,4DAAK,KAAK,EAAC,gDAAgD;oBACzD,+DAAQ,KAAK,EAAC,4BAA4B,EAAC,EAAE,EAAE,EAAE,EAAE,EAAE,QAAQ,EAAE,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,IAAI,EAAG,KAAK,CAAC,MAA2B,CAAC,KAAK,EAAE,CAAC;wBAC1I,+DAAQ,KAAK,EAAC,EAAE,EAAC,QAAQ,EAAE,CAAA,MAAA,IAAI,CAAC,SAAS,0CAAE,IAAI,MAAK,EAAE,IACnD,OAAO,CAAC,OAAO,CAAC,eAAe,CACzB,EACR,gBAAgB,aAAhB,gBAAgB;wBAAhB,gBAAgB,CAAE,GAAG,CAAC,IAAI,CAAC,EAAE;;4BAAC,OAAA,CAC7B,cAAQ,KAAK,EAAE,IAAI,CAAC,EAAE,EAAE,QAAQ,EAAE,CAAA,MAAA,IAAI,CAAC,SAAS,0CAAE,IAAI,MAAK,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,IAC1E,IAAI,CAAC,IAAI,CACH,CACV,CAAA;yBAAA,CAAC,CACK,CACL,CACP,CACC;gBACL,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,4BAA4B,IAAI,CAC/D,4DAAK,KAAK,EAAC,gBAAgB;oBACzB,+DACE,KAAK,EAAE,yBAAyB,IAAI,CAAC,eAAe,IAAI,CAAA,MAAA,IAAI,CAAC,SAAS,0CAAE,cAAc,MAAK,EAAE,IAAI,eAAe,EAAE,EAClH,EAAE,EAAE,EAAE,EAAE,EACR,QAAQ,EAAE,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,cAAc,EAAG,KAAK,CAAC,MAA2B,CAAC,KAAK,EAAE,CAAC;wBAEjG,+DAAQ,KAAK,EAAC,EAAE,EAAC,QAAQ,EAAE,CAAA,MAAA,IAAI,CAAC,SAAS,0CAAE,cAAc,MAAK,EAAE,IAC7D,OAAO,CAAC,OAAO,CAAC,oBAAoB,CAC9B;wBACR,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;;4BAAC,OAAA,CAClC,cAAQ,KAAK,EAAE,IAAI,CAAC,SAAS,EAAE,QAAQ,EAAE,CAAA,MAAA,IAAI,CAAC,SAAS,0CAAE,cAAc,MAAK,IAAI,CAAC,SAAS,IACvF,IAAI,CAAC,aAAa,CACZ,CACV,CAAA;yBAAA,CAAC,CACK,CACL,CACP;gBACD,0DAAG,KAAK,EAAC,aAAa;oBACnB,YAAY,CAAC,MAAA,IAAI,CAAC,QAAQ,0CAAE,MAAM,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC;;oBAAG,OAAO,CAAC,OAAO,CAAC,QAAQ,CAC/E,CACA;YACL,IAAI,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,SAAS,GAAG,CAAC,IAAI,CAC1D,4DAAK,KAAK,EAAE,EAAE,GAAG,EAAE,QAAQ,EAAE,SAAS,EAAE,QAAQ,EAAE,EAAE,KAAK,EAAC,kEAAkE;gBAC1H,0DAAG,KAAK,EAAE,qBAAqB,yCAAwC;gBACvE,4DAAK,KAAK,EAAC,gBAAgB;oBACzB,+DACE,KAAK,EAAE,yBAAyB,IAAI,CAAC,eAAe,IAAI,CAAA,MAAA,IAAI,CAAC,SAAS,0CAAE,cAAc,MAAK,EAAE,IAAI,eAAe,EAAE,EAClH,EAAE,EAAE,EAAE,EAAE,EACR,KAAK,EAAE,EAAE,KAAK,EAAE,aAAa,EAAE,EAC/B,QAAQ,EAAE,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,UAAU,EAAE,MAAM,CAAE,KAAK,CAAC,MAA2B,CAAC,KAAK,CAAC,EAAE,CAAC;wBAErG,+DAAQ,KAAK,EAAC,EAAE,EAAC,QAAQ,EAAE,MAAM,CAAC,MAAA,IAAI,CAAC,SAAS,0CAAE,UAAU,CAAC,KAAK,CAAC,IAChE,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,IAAI,CACvB;wBACR,KAAK,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;;4BAAC,OAAA,CACxG,cAAQ,KAAK,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAA,MAAA,IAAI,CAAC,SAAS,0CAAE,UAAU,MAAK,IAAI,IAC/D,IAAI,CACE,CACV,CAAA;yBAAA,CAAC,CACK,CACL,CACF,CACP,CACI,CACR,CAAC;IACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import { Component, Host, h, Prop, State, Listen } from '@stencil/core';\r\nimport { TPropertyButtonsTypes } from '@/components';\r\nimport { ICurrency } from '@/models/calendarData';\r\nimport booking_store, { IRatePlanSelection, modifyBookingStore, RatePlanGuest } from '@/stores/booking.store';\r\nimport locales from '@/stores/locales.store';\r\nimport { v4 } from 'uuid';\r\nimport calendar_data, { isSingleUnit } from '@/stores/calendar-data';\r\nimport { formatAmount } from '@/utils/utils';\r\nimport VariationService from '@/services/variation.service';\r\n\r\n@Component({\r\n  tag: 'igl-application-info',\r\n  styleUrl: 'igl-application-info.css',\r\n  scoped: true,\r\n})\r\nexport class IglApplicationInfo {\r\n  @Prop() rateplanSelection: IRatePlanSelection;\r\n  @Prop() guestInfo: RatePlanGuest | null;\r\n  @Prop() currency: ICurrency;\r\n  @Prop() bedPreferenceType = [];\r\n  @Prop() bookingType: string = 'PLUS_BOOKING';\r\n  @Prop() roomIndex: number;\r\n  @Prop() totalNights: number = 1;\r\n  @Prop() baseData: { unit: { id: string; name: string }; roomtypeId: number };\r\n\r\n  @State() isButtonPressed = false;\r\n\r\n  private variationService = new VariationService();\r\n\r\n  componentWillLoad() {\r\n    if (isSingleUnit(this.rateplanSelection.roomtype.id)) {\r\n      const filteredRooms = this.filterRooms();\r\n      if (filteredRooms.length > 0) this.updateGuest({ unit: filteredRooms[0]?.id?.toString() });\r\n    }\r\n  }\r\n\r\n  private updateGuest(params: Partial<RatePlanGuest>) {\r\n    const roomTypeId = this.rateplanSelection.roomtype.id;\r\n    const ratePlanId = this.rateplanSelection.ratePlan.id;\r\n    let prevGuest = [...this.rateplanSelection.guest];\r\n    prevGuest[this.roomIndex] = {\r\n      ...prevGuest[this.roomIndex],\r\n      ...params,\r\n    };\r\n    booking_store.ratePlanSelections = {\r\n      ...booking_store.ratePlanSelections,\r\n      [roomTypeId]: {\r\n        ...booking_store.ratePlanSelections[roomTypeId],\r\n        [ratePlanId]: { ...this.rateplanSelection, guest: [...prevGuest] },\r\n      },\r\n    };\r\n  }\r\n\r\n  @Listen('buttonClicked', { target: 'body' })\r\n  handleButtonClicked(\r\n    event: CustomEvent<{\r\n      key: TPropertyButtonsTypes;\r\n      data?: CustomEvent;\r\n    }>,\r\n  ) {\r\n    switch (event.detail.key) {\r\n      case 'book':\r\n      case 'bookAndCheckIn':\r\n      case 'save':\r\n        this.isButtonPressed = true;\r\n        break;\r\n    }\r\n  }\r\n\r\n  private getTooltipMessages(): string | undefined {\r\n    const { ratePlan, selected_variation } = this.rateplanSelection;\r\n    let selectedVariation = selected_variation;\r\n    if (this.guestInfo?.infant_nbr) {\r\n      selectedVariation = this.variationService.getVariationBasedOnInfants({\r\n        variations: ratePlan.variations,\r\n        baseVariation: selected_variation,\r\n        infants: this.guestInfo?.infant_nbr,\r\n      });\r\n    }\r\n\r\n    if (!selectedVariation) return;\r\n\r\n    const matchingVariation = ratePlan.variations?.find(variation => variation.adult_nbr === selectedVariation.adult_nbr && variation.child_nbr === selectedVariation.child_nbr);\r\n\r\n    if (!matchingVariation) return;\r\n\r\n    const cancellationPolicy = matchingVariation.applicable_policies?.find(p => p.type === 'cancelation')?.combined_statement;\r\n    const guaranteePolicy = matchingVariation.applicable_policies?.find(p => p.type === 'guarantee')?.combined_statement;\r\n\r\n    let tooltip = '';\r\n    if (cancellationPolicy) {\r\n      tooltip += `<b><u>Cancellation:</u></b> ${cancellationPolicy}<br/>`;\r\n    }\r\n    if (guaranteePolicy) {\r\n      tooltip += `<b><u>Guarantee:</u></b> ${guaranteePolicy}`;\r\n    }\r\n    return tooltip || undefined;\r\n  }\r\n\r\n  private getAmount(): number {\r\n    if (this.rateplanSelection.is_amount_modified) {\r\n      return this.rateplanSelection.view_mode === '001' ? this.rateplanSelection.rp_amount : this.rateplanSelection.rp_amount * this.totalNights;\r\n    }\r\n    let variation = this.rateplanSelection.selected_variation;\r\n    if (this.guestInfo?.infant_nbr) {\r\n      variation = this.variationService.getVariationBasedOnInfants({\r\n        variations: this.rateplanSelection.ratePlan.variations,\r\n        baseVariation: this.rateplanSelection.selected_variation,\r\n        infants: this.guestInfo?.infant_nbr,\r\n      });\r\n    }\r\n    return variation.discounted_gross_amount;\r\n  }\r\n\r\n  private filterRooms(): { name: string; id: number }[] {\r\n    const result = [];\r\n    if (!calendar_data.is_frontdesk_enabled) {\r\n      return result;\r\n    }\r\n    this.rateplanSelection.ratePlan?.assignable_units?.forEach(unit => {\r\n      if (unit.Is_Fully_Available) {\r\n        result.push({ name: unit.name, id: unit.pr_id });\r\n      }\r\n    });\r\n    const filteredGuestsRoom = this.rateplanSelection.guest.filter((_, i) => i !== this.roomIndex).map(r => r.unit);\r\n    const filteredResults = result.filter(r => !filteredGuestsRoom.includes(r.id.toString()));\r\n    return this.bookingType === 'EDIT_BOOKING'\r\n      ? [...filteredResults, this.rateplanSelection.roomtype.id === this.baseData?.roomtypeId ? this.baseData?.unit : null]\r\n          .filter(f => !!f)\r\n          .sort((a, b) => a.name.localeCompare(b.name))\r\n      : filteredResults;\r\n  }\r\n\r\n  render() {\r\n    const filteredRoomList = this.filterRooms();\r\n    const formattedVariation = this.variationService.formatVariationBasedOnInfants({\r\n      baseVariation: this.rateplanSelection.selected_variation,\r\n      infants: this.guestInfo.infant_nbr,\r\n      variations: this.rateplanSelection.ratePlan.variations,\r\n    });\r\n    return (\r\n      <Host class={'my-2'}>\r\n        <div class=\"booking-header\">\r\n          {(this.bookingType === 'PLUS_BOOKING' || this.bookingType === 'ADD_ROOM' || this.bookingType === 'EDIT_BOOKING') && (\r\n            <span class=\"booking-roomtype-title\">{this.rateplanSelection.roomtype.name}</span>\r\n          )}\r\n          <div class=\"booking-details-container\">\r\n            <div class=\"booking-rateplan\">\r\n              <p class=\"booking-rateplan-name\">\r\n                {this.rateplanSelection.ratePlan.short_name} {this.rateplanSelection.ratePlan.is_non_refundable && <span class={'non-ref-span'}>Non Refundable</span>}\r\n              </p>\r\n              <ir-tooltip class=\"booking-tooltip\" message={this.getTooltipMessages()}></ir-tooltip>\r\n            </div>\r\n            <p class=\"booking-variation\" innerHTML={formattedVariation}></p>\r\n          </div>\r\n          <p class=\"booking-price\">\r\n            {formatAmount(this.currency?.symbol, this.getAmount())}/{locales.entries.Lcz_Stay}\r\n          </p>\r\n        </div>\r\n        <div class=\"booking-footer\">\r\n          <div class=\"booking-rateplan\">\r\n            <p class=\"booking-rateplan-name\">{this.rateplanSelection.ratePlan.short_name}</p>\r\n            <ir-tooltip class=\"booking-tooltip\" message={this.getTooltipMessages()}></ir-tooltip>\r\n          </div>\r\n          <p class=\"booking-variation\" innerHTML={formattedVariation}></p>\r\n        </div>\r\n        <div class=\"d-flex flex-column flex-md-row  p-0 align-items-md-center aplicationInfoContainer\">\r\n          <div class=\"mr-1 mb-1 mb-md-0 flex-fill guest-info-container\">\r\n            <input\r\n              id={v4()}\r\n              type=\"email\"\r\n              class={`form-control ${this.isButtonPressed && this.guestInfo?.first_name === '' && 'border-danger'}`}\r\n              placeholder={locales.entries['Lcz_GuestFirstname'] ?? 'Guest first name'}\r\n              name=\"guestName\"\r\n              onInput={event => {\r\n                const name = (event.target as HTMLInputElement).value;\r\n                this.updateGuest({ first_name: name });\r\n                if (booking_store.event_type.type === 'EDIT_BOOKING') {\r\n                  modifyBookingStore('guest', {\r\n                    ...booking_store.guest,\r\n                    name,\r\n                  });\r\n                }\r\n              }}\r\n              required\r\n              value={this.guestInfo?.first_name}\r\n            />\r\n          </div>\r\n          <div class=\"mr-1 flex-fill guest-info-container\">\r\n            <input\r\n              id={v4()}\r\n              type=\"email\"\r\n              class={`form-control ${this.isButtonPressed && this.guestInfo?.last_name === '' && 'border-danger'}`}\r\n              placeholder={locales.entries['Lcz_GuestLastname'] ?? 'Guest last name'}\r\n              name=\"guestName\"\r\n              onInput={event => {\r\n                const name = (event.target as HTMLInputElement).value;\r\n                this.updateGuest({ last_name: name });\r\n                if (booking_store.event_type.type === 'EDIT_BOOKING') {\r\n                  modifyBookingStore('guest', {\r\n                    ...booking_store.guest,\r\n                    name,\r\n                  });\r\n                }\r\n              }}\r\n              required\r\n              value={this.guestInfo?.last_name}\r\n            />\r\n          </div>\r\n          <div class=\"mt-1 mt-md-0 d-flex align-items-center flex-fill\">\r\n            {calendar_data.is_frontdesk_enabled &&\r\n              !isSingleUnit(this.rateplanSelection.roomtype.id) &&\r\n              (this.bookingType === 'PLUS_BOOKING' || this.bookingType === 'ADD_ROOM' || this.bookingType === 'EDIT_BOOKING') && (\r\n                <div class=\"mr-1 p-0 flex-fill preference-select-container\">\r\n                  <select class=\"form-control input-sm pr-0\" id={v4()} onChange={event => this.updateGuest({ unit: (event.target as HTMLInputElement).value })}>\r\n                    <option value=\"\" selected={this.guestInfo?.unit === ''}>\r\n                      {locales.entries.Lcz_Assignunits}\r\n                    </option>\r\n                    {filteredRoomList?.map(room => (\r\n                      <option value={room.id} selected={this.guestInfo?.unit === room.id.toString()}>\r\n                        {room.name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              )}\r\n          </div>\r\n          {this.rateplanSelection.roomtype.is_bed_configuration_enabled && (\r\n            <div class=\"mr-1 flex-fill\">\r\n              <select\r\n                class={`form-control input-sm ${this.isButtonPressed && this.guestInfo?.bed_preference === '' && 'border-danger'}`}\r\n                id={v4()}\r\n                onChange={event => this.updateGuest({ bed_preference: (event.target as HTMLInputElement).value })}\r\n              >\r\n                <option value=\"\" selected={this.guestInfo?.bed_preference === ''}>\r\n                  {locales.entries.Lcz_BedConfiguration}\r\n                </option>\r\n                {this.bedPreferenceType.map(data => (\r\n                  <option value={data.CODE_NAME} selected={this.guestInfo?.bed_preference === data.CODE_NAME}>\r\n                    {data.CODE_VALUE_EN}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          )}\r\n          <p class=\"rate_amount\">\r\n            {formatAmount(this.currency?.symbol, this.getAmount())}/{locales.entries.Lcz_Stay}\r\n          </p>\r\n        </div>\r\n        {this.rateplanSelection.selected_variation.child_nbr > 0 && (\r\n          <div style={{ gap: '0.5rem', marginTop: '0.5rem' }} class=\"d-flex  flex-row  p-0 align-items-center aplicationInfoContainer\">\r\n            <p class={'m-0 p-0 text-danger'}>Any of the children below 3 years?</p>\r\n            <div class=\"mr-1 flex-fill\">\r\n              <select\r\n                class={`form-control input-sm ${this.isButtonPressed && this.guestInfo?.bed_preference === '' && 'border-danger'}`}\r\n                id={v4()}\r\n                style={{ width: 'max-content' }}\r\n                onChange={event => this.updateGuest({ infant_nbr: Number((event.target as HTMLInputElement).value) })}\r\n              >\r\n                <option value=\"\" selected={Number(this.guestInfo?.infant_nbr) === 0}>\r\n                  {locales.entries['No'] || 'No'}\r\n                </option>\r\n                {Array.from({ length: this.rateplanSelection.selected_variation.child_nbr }, (_, i) => i + 1).map(item => (\r\n                  <option value={item} selected={this.guestInfo?.infant_nbr === item}>\r\n                    {item}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}