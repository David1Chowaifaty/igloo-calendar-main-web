{"version":3,"file":"igl-cal-body.js","sourceRoot":"","sources":["../../../../src/components/igloo-calendar/igl-cal-body/igl-cal-body.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Host, Listen, Prop, State, h, Event, EventEmitter, Watch } from '@stencil/core';\r\n\r\nimport moment from 'moment';\r\n\r\nimport { HouseKeepingService } from '@/services/housekeeping.service';\r\nimport { compareTime, createDateWithOffsetAndHour } from '@/utils/booking';\r\n\r\nimport calendar_dates from '@/stores/calendar-dates.store';\r\nimport locales from '@/stores/locales.store';\r\nimport calendar_data from '@/stores/calendar-data';\r\n\r\nimport { PhysicalRoom, RoomType } from '@/models/booking.dto';\r\nimport { ICountry } from '@/models/IBooking';\r\n\r\nexport type RoomCategory = RoomType & { expanded: boolean };\r\n\r\n@Component({\r\n  tag: 'igl-cal-body',\r\n  styleUrl: 'igl-cal-body.css',\r\n  scoped: true,\r\n})\r\nexport class IglCalBody {\r\n  @Prop() isScrollViewDragging: boolean;\r\n  @Prop() propertyId: number;\r\n  @Prop() calendarData: { [key: string]: any };\r\n  @Prop() today: String;\r\n  @Prop() currency;\r\n  @Prop() language: string;\r\n  @Prop() countries: ICountry[];\r\n  @Prop() highlightedDate: string;\r\n\r\n  @State() dragOverElement: string = '';\r\n  @State() renderAgain: boolean = false;\r\n  @State() selectedRoom: PhysicalRoom;\r\n  @State() isLoading: boolean;\r\n\r\n  @Event() addBookingDatasEvent: EventEmitter<any[]>;\r\n  @Event() showBookingPopup: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) scrollPageToRoom: EventEmitter;\r\n\r\n  private selectedRooms: { [key: string]: any } = {};\r\n  private fromRoomId: number = -1;\r\n  private newEvent: { [key: string]: any };\r\n  private currentDate = new Date();\r\n  private hkModal: HTMLIrModalElement;\r\n  private housekeepingService = new HouseKeepingService();\r\n  private bookingMap = new Map<string | number, string | number>();\r\n  private interactiveTitle: HTMLIrInteractiveTitleElement[] = [];\r\n  private dayRateMap = new Map<string, (typeof calendar_dates.days)[0]['rate']>();\r\n\r\n  componentWillLoad() {\r\n    this.currentDate.setHours(0, 0, 0, 0);\r\n    this.bookingMap = this.getBookingMap(this.getBookingData());\r\n    console.log(this.bookingMap);\r\n    calendar_dates.days.forEach(day => {\r\n      this.dayRateMap.set(day.day, day.rate);\r\n    });\r\n  }\r\n\r\n  @Watch('calendarData')\r\n  handleCalendarDataChange() {\r\n    this.bookingMap = this.getBookingMap(this.getBookingData());\r\n  }\r\n\r\n  @Listen('dragOverHighlightElement', { target: 'window' })\r\n  dragOverHighlightElementHandler(event: CustomEvent) {\r\n    this.dragOverElement = event.detail.dragOverElement;\r\n  }\r\n\r\n  @Listen('gotoRoomEvent', { target: 'window' })\r\n  gotoRoom(event: CustomEvent) {\r\n    let roomId = event.detail.roomId;\r\n    let category = this.getRoomCategoryByRoomId(roomId);\r\n    if (!category.expanded) {\r\n      this.toggleCategory(category);\r\n      setTimeout(() => {\r\n        this.scrollToRoom(roomId);\r\n      }, 10);\r\n    } else {\r\n      this.scrollToRoom(roomId);\r\n    }\r\n  }\r\n\r\n  @Listen('addToBeAssignedEvent', { target: 'window' })\r\n  addToBeAssignedEvents(event: CustomEvent) {\r\n    // let roomId = event.detail.roomId;\r\n    this.addBookingDatas(event.detail.data);\r\n    this.renderElement();\r\n  }\r\n\r\n  @Listen('closeBookingWindow', { target: 'window' })\r\n  closeWindow() {\r\n    let ind = this.getBookingData().findIndex(ev => ev.ID === 'NEW_TEMP_EVENT');\r\n    if (ind !== -1) {\r\n      this.getBookingData().splice(ind, 1);\r\n      console.log('removed item..');\r\n      this.renderElement();\r\n    }\r\n  }\r\n\r\n  private scrollToRoom(roomId: number) {\r\n    this.scrollPageToRoom.emit({\r\n      key: 'scrollPageToRoom',\r\n      id: roomId,\r\n      refClass: 'room_' + roomId,\r\n    });\r\n  }\r\n\r\n  private getRoomCategoryByRoomId(roomId) {\r\n    return this.calendarData.roomsInfo.find(roomCategory => {\r\n      return this.getCategoryRooms(roomCategory).find(room => this.getRoomId(room) === roomId);\r\n    });\r\n  }\r\n\r\n  private getCategoryName(roomCategory) {\r\n    return roomCategory.name;\r\n  }\r\n\r\n  private getCategoryId(roomCategory) {\r\n    return roomCategory.id;\r\n  }\r\n\r\n  private getTotalPhysicalRooms(roomCategory) {\r\n    return this.getCategoryRooms(roomCategory).length;\r\n  }\r\n\r\n  private getCategoryRooms(roomCategory: RoomCategory) {\r\n    return (roomCategory && roomCategory.physicalrooms) || [];\r\n  }\r\n\r\n  private getRoomName(roomInfo) {\r\n    return roomInfo.name;\r\n  }\r\n\r\n  private getRoomId(roomInfo) {\r\n    return roomInfo.id;\r\n  }\r\n\r\n  private getRoomById(physicalRooms, roomId) {\r\n    return physicalRooms.find(physical_room => this.getRoomId(physical_room) === roomId);\r\n  }\r\n\r\n  private getBookingData() {\r\n    return this.calendarData.bookingEvents;\r\n  }\r\n\r\n  private addBookingDatas(aData) {\r\n    this.addBookingDatasEvent.emit(aData);\r\n  }\r\n\r\n  private getSelectedCellRefName(roomId, selectedDay) {\r\n    return 'room_' + roomId + '_' + selectedDay.currentDate;\r\n  }\r\n\r\n  // getSplitBookingEvents(newEvent) {\r\n  //   return this.getBookingData().some(bookingEvent => !['003', '002', '004'].includes(bookingEvent.STATUS_CODE) && newEvent.FROM_DATE === bookingEvent.FROM_DATE);\r\n  // }\r\n  private getSplitBookingEvents(newEvent) {\r\n    console.log(newEvent.FROM_DATE);\r\n    return this.getBookingData().some(bookingEvent => {\r\n      if (!['003', '002', '004'].includes(bookingEvent.STATUS_CODE)) {\r\n        if (\r\n          new Date(newEvent.FROM_DATE).getTime() >= new Date(bookingEvent.FROM_DATE).getTime() &&\r\n          new Date(newEvent.FROM_DATE).getTime() <= new Date(bookingEvent.TO_DATE).getTime()\r\n        ) {\r\n          return bookingEvent;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  private addNewEvent(roomCategory) {\r\n    let keys = Object.keys(this.selectedRooms);\r\n    let startDate: Date, endDate: Date;\r\n\r\n    if (this.selectedRooms[keys[0]].currentDate < this.selectedRooms[keys[1]].currentDate) {\r\n      startDate = new Date(this.selectedRooms[keys[0]].currentDate);\r\n      endDate = new Date(this.selectedRooms[keys[1]].currentDate);\r\n    } else {\r\n      startDate = new Date(this.selectedRooms[keys[1]].currentDate);\r\n      endDate = new Date(this.selectedRooms[keys[0]].currentDate);\r\n    }\r\n\r\n    const dateDifference = Math.round(Math.abs((endDate.getTime() - startDate.getTime()) / 86_400_000));\r\n    this.newEvent = {\r\n      ID: 'NEW_TEMP_EVENT',\r\n      NAME: <span>&nbsp;</span>,\r\n      EMAIL: '',\r\n      PHONE: '',\r\n      convertBooking: false,\r\n      REFERENCE_TYPE: 'PHONE',\r\n      FROM_DATE: startDate.getFullYear() + '-' + this.getTwoDigitNumStr(startDate.getMonth() + 1) + '-' + this.getTwoDigitNumStr(startDate.getDate()),\r\n      TO_DATE: endDate.getFullYear() + '-' + this.getTwoDigitNumStr(endDate.getMonth() + 1) + '-' + this.getTwoDigitNumStr(endDate.getDate()),\r\n      BALANCE: '',\r\n      NOTES: '',\r\n      RELEASE_AFTER_HOURS: 0,\r\n      PR_ID: this.selectedRooms[keys[0]].roomId,\r\n      ENTRY_DATE: '',\r\n      NO_OF_DAYS: dateDifference,\r\n      ADULTS_COUNT: 1,\r\n      COUNTRY: '',\r\n      INTERNAL_NOTE: '',\r\n      RATE: '',\r\n      TOTAL_PRICE: '',\r\n      RATE_PLAN: '',\r\n      ARRIVAL_TIME: '',\r\n      TITLE: locales.entries.Lcz_NewBookingFor,\r\n      roomsInfo: [roomCategory],\r\n      CATEGORY: roomCategory.name,\r\n      event_type: 'BAR_BOOKING',\r\n      STATUS: 'TEMP-EVENT',\r\n      defaultDateRange: {\r\n        fromDate: null,\r\n        fromDateStr: '',\r\n        toDate: null,\r\n        toDateStr: '',\r\n        dateDifference,\r\n        editable: false,\r\n        message: 'Including 5.00% City Tax - Excluding 11.00% VAT',\r\n      },\r\n    };\r\n\r\n    let popupTitle = roomCategory.name + ' ' + this.getRoomName(this.getRoomById(this.getCategoryRooms(roomCategory), this.selectedRooms[keys[0]].roomId));\r\n    this.newEvent.BLOCK_DATES_TITLE = `${locales.entries.Lcz_BlockDatesFor} ${popupTitle}`;\r\n    this.newEvent.TITLE += popupTitle;\r\n    this.newEvent.defaultDateRange.toDate = new Date(this.newEvent.TO_DATE + 'T00:00:00');\r\n    this.newEvent.defaultDateRange.fromDate = new Date(this.newEvent.FROM_DATE + 'T00:00:00');\r\n    this.newEvent.defaultDateRange.fromDateStr = this.getDateStr(this.newEvent.defaultDateRange.fromDate);\r\n    this.newEvent.defaultDateRange.toDateStr = this.getDateStr(this.newEvent.defaultDateRange.toDate);\r\n    this.newEvent.ENTRY_DATE = new Date().toISOString();\r\n    this.newEvent.legendData = this.calendarData.formattedLegendData;\r\n\r\n    let splitBookingEvents = this.getSplitBookingEvents(this.newEvent);\r\n    if (splitBookingEvents) {\r\n      this.newEvent.splitBookingEvents = splitBookingEvents;\r\n    }\r\n\r\n    this.getBookingData().push(this.newEvent);\r\n    return this.newEvent;\r\n  }\r\n\r\n  private getTwoDigitNumStr(num) {\r\n    return num <= 9 ? '0' + num : num;\r\n  }\r\n\r\n  private getDateStr(date, locale = 'default') {\r\n    return date.getDate() + ' ' + date.toLocaleString(locale, { month: 'short' }) + ' ' + date.getFullYear();\r\n  }\r\n\r\n  private removeNewEvent() {\r\n    this.calendarData.bookingEvents = this.calendarData.bookingEvents.filter(events => events.ID !== 'NEW_TEMP_EVENT');\r\n    this.newEvent = null;\r\n  }\r\n\r\n  private clickCell(roomId, selectedDay, roomCategory) {\r\n    if (!this.isScrollViewDragging && selectedDay.currentDate >= this.currentDate.getTime()) {\r\n      let refKey = this.getSelectedCellRefName(roomId, selectedDay);\r\n      if (this.selectedRooms.hasOwnProperty(refKey)) {\r\n        this.removeNewEvent();\r\n        delete this.selectedRooms[refKey];\r\n        this.renderElement();\r\n        return;\r\n      } else if (Object.keys(this.selectedRooms).length != 1 || this.fromRoomId != roomId) {\r\n        this.removeNewEvent();\r\n        this.selectedRooms = {};\r\n        this.selectedRooms[refKey] = { ...selectedDay, roomId };\r\n        this.fromRoomId = roomId;\r\n        this.renderElement();\r\n      } else {\r\n        // create bar;\r\n        this.selectedRooms[refKey] = { ...selectedDay, roomId };\r\n        this.addNewEvent(roomCategory);\r\n        this.selectedRooms = {};\r\n        this.renderElement();\r\n        this.showNewBookingPopup(this.newEvent);\r\n      }\r\n    }\r\n  }\r\n\r\n  private showNewBookingPopup(data) {\r\n    console.log(data);\r\n    // this.showBookingPopup.emit({key: \"add\", data});\r\n  }\r\n\r\n  private renderElement() {\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n  private getBookingMap(bookings: any[]): Map<string | number, string | number> {\r\n    const bookingMap = new Map<string | number, string | number>();\r\n    const today = moment().startOf('day');\r\n\r\n    for (const booking of bookings) {\r\n      const fromDate = moment(booking.FROM_DATE, 'YYYY-MM-DD').startOf('day');\r\n      const toDate = moment(booking.TO_DATE, 'YYYY-MM-DD').startOf('day');\r\n\r\n      // Check if today is between fromDate and toDate, inclusive.\r\n      if (today.isSameOrAfter(fromDate) && today.isSameOrBefore(toDate)) {\r\n        if (!bookingMap.has(booking.PR_ID)) {\r\n          bookingMap.set(booking.PR_ID, booking.BOOKING_NUMBER);\r\n        } else {\r\n          if (compareTime(moment().toDate(), createDateWithOffsetAndHour(calendar_data.checkin_checkout_hours?.offset, calendar_data.checkin_checkout_hours?.hour))) {\r\n            bookingMap.set(booking.PR_ID, booking.BOOKING_NUMBER);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return bookingMap;\r\n  }\r\n  private getGeneralCategoryDayColumns(addClass: string, isCategory: boolean = false, index: number) {\r\n    return calendar_dates.days.map(dayInfo => {\r\n      return (\r\n        <div\r\n          class={`cellData  font-weight-bold categoryPriceColumn ${addClass + '_' + dayInfo.day} ${\r\n            dayInfo.day === this.today || dayInfo.day === this.highlightedDate ? 'currentDay' : ''\r\n          }`}\r\n        >\r\n          {isCategory ? (\r\n            <span class={'categoryName'}>\r\n              {dayInfo.rate[index].exposed_inventory.rts}\r\n              {/* <br />\r\n              {dayInfo.rate[index].exposed_inventory.offline} */}\r\n            </span>\r\n          ) : (\r\n            ''\r\n          )}\r\n        </div>\r\n      );\r\n    });\r\n  }\r\n\r\n  private getGeneralRoomDayColumns(roomId: string, roomCategory: RoomCategory, roomName: string, index: number) {\r\n    // onDragOver={event => this.handleDragOver(event)} onDrop={event => this.handleDrop(event, addClass+\"_\"+dayInfo.day)}\r\n    return this.calendarData.days.map(dayInfo => {\r\n      const formattedDate = moment(dayInfo.currentDate).format('YYYY-MM-DD');\r\n      const isDisabled = calendar_dates.days.find(e => e.day === formattedDate)?.rate[index].exposed_inventory.rts;\r\n      return (\r\n        <div\r\n          class={`cellData ${isDisabled ? 'disabled' : ''} ${'room_' + roomId + '_' + dayInfo.day} ${\r\n            dayInfo.day === this.today || dayInfo.day === this.highlightedDate ? 'currentDay' : ''\r\n          } ${this.dragOverElement === roomId + '_' + dayInfo.day ? 'dragOverHighlight' : ''} ${\r\n            this.selectedRooms.hasOwnProperty(this.getSelectedCellRefName(roomId, dayInfo)) ? 'selectedDay' : ''\r\n          }`}\r\n          onClick={() => {\r\n            if (isDisabled) {\r\n              return;\r\n            }\r\n            this.clickCell(roomId, dayInfo, roomCategory);\r\n          }}\r\n          data-date={formattedDate}\r\n          data-room-name={roomName}\r\n        ></div>\r\n      );\r\n    });\r\n  }\r\n\r\n  private toggleCategory(roomCategory: RoomCategory) {\r\n    roomCategory.expanded = !roomCategory.expanded;\r\n    this.renderElement();\r\n  }\r\n\r\n  private getRoomCategoryRow(roomCategory: RoomCategory, index: number) {\r\n    if (this.getTotalPhysicalRooms(roomCategory) <= 1 || !roomCategory.is_active) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div class=\"roomRow\">\r\n        <div\r\n          class={`cellData text-left align-items-center roomHeaderCell categoryTitle ${'category_' + this.getCategoryId(roomCategory)}`}\r\n          onClick={() => this.toggleCategory(roomCategory)}\r\n        >\r\n          <div class={'categoryName'}>\r\n            <ir-interactive-title popoverTitle={this.getCategoryName(roomCategory)}></ir-interactive-title>\r\n            {/* <ir-popover popoverTitle={this.getCategoryName(roomCategory)}></ir-popover> */}\r\n          </div>\r\n          {roomCategory.expanded ? (\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\" height={14} width={14}>\r\n              <path\r\n                fill=\"#6b6f82\"\r\n                d=\"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z\"\r\n              />\r\n            </svg>\r\n          ) : (\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\" height={14} width={14}>\r\n              <path\r\n                fill=\"#6b6f82\"\r\n                d=\"M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z\"\r\n              />\r\n            </svg>\r\n          )}\r\n          {/* <i class={`la la-angle-${roomCategory.expanded ? 'down' : 'right'}`}></i> */}\r\n        </div>\r\n        {this.getGeneralCategoryDayColumns('category_' + this.getCategoryId(roomCategory), true, index)}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Renders a list of active rooms for an expanded room category. Returns an array of JSX elements, including headers and day columns, or an empty array if the category is collapsed or contains no active rooms.\r\n   *\r\n   * @param {RoomCategory} roomCategory - The category containing room details.\r\n   * @returns {JSX.Element[]} - JSX elements for the active rooms or an empty array.\r\n   */\r\n  private getRoomsByCategory(roomCategory: RoomCategory, index: number) {\r\n    // Check accordion is expanded.\r\n    if (!roomCategory.expanded) {\r\n      return [];\r\n    }\r\n\r\n    return this.getCategoryRooms(roomCategory)?.map(room => {\r\n      if (!room.is_active) {\r\n        return null;\r\n      }\r\n      return (\r\n        <div class=\"roomRow\">\r\n          <div\r\n            class={`cellData room text-left align-items-center roomHeaderCell  roomTitle ${this.getTotalPhysicalRooms(roomCategory) <= 1 ? 'pl10' : ''} ${\r\n              'room_' + this.getRoomId(room)\r\n            }`}\r\n            data-hk-enabled={String(calendar_data.housekeeping_enabled)}\r\n            data-room={this.getRoomId(room)}\r\n            onClick={() => {\r\n              if (!calendar_data.housekeeping_enabled) {\r\n                return;\r\n              }\r\n              this.selectedRoom = room;\r\n              this.hkModal.openModal();\r\n            }}\r\n            onMouseEnter={() => {\r\n              this.interactiveTitle[room.id]?.style?.setProperty('--ir-interactive-hk-bg', '#e0e0e0');\r\n            }}\r\n            onMouseLeave={() => {\r\n              this.interactiveTitle[room.id]?.style?.removeProperty('--ir-interactive-hk-bg');\r\n            }}\r\n          >\r\n            {/* <div>{this.getTotalPhysicalRooms(roomCategory) <= 1 ? this.getCategoryName(roomCategory) : this.getRoomName(room)}</div> */}\r\n            {/* <ir-popover popoverTitle={this.getTotalPhysicalRooms(roomCategory) <= 1 ? this.getCategoryName(roomCategory) : this.getRoomName(room)}></ir-popover> */}\r\n            <ir-interactive-title\r\n              ref={el => {\r\n                if (el) this.interactiveTitle[room.id] = el;\r\n              }}\r\n              style={room.hk_status === '003' && { '--dot-color': '#999999' }}\r\n              hkStatus={calendar_data.housekeeping_enabled && room.hk_status !== '001'}\r\n              popoverTitle={this.getTotalPhysicalRooms(roomCategory) <= 1 ? this.getCategoryName(roomCategory) : this.getRoomName(room)}\r\n            ></ir-interactive-title>\r\n          </div>\r\n          {this.getGeneralRoomDayColumns(this.getRoomId(room), roomCategory, room.name, index)}\r\n        </div>\r\n      );\r\n    });\r\n  }\r\n\r\n  private getRoomRows() {\r\n    return this.calendarData.roomsInfo?.map((roomCategory, index) => {\r\n      if (roomCategory.is_active) {\r\n        return [this.getRoomCategoryRow(roomCategory, index), this.getRoomsByCategory(roomCategory, index)];\r\n      } else {\r\n        return null;\r\n      }\r\n    });\r\n  }\r\n  private async confirmHousekeepingUpdate(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    try {\r\n      this.isLoading = true;\r\n      const newStatusCode = this.selectedRoom?.hk_status === '001' ? '002' : '001';\r\n      await this.housekeepingService.setExposedUnitHKStatus({\r\n        property_id: this.propertyId,\r\n        // housekeeper: this.selectedRoom?.housekeeper ? { id: this.selectedRoom?.housekeeper?.id } : null,\r\n        status: {\r\n          code: newStatusCode,\r\n        },\r\n        unit: {\r\n          id: this.selectedRoom?.id,\r\n        },\r\n      });\r\n      if (newStatusCode === '001') {\r\n        await this.housekeepingService.executeHKAction({\r\n          actions: [\r\n            {\r\n              description: 'Cleaned',\r\n              hkm_id: this.selectedRoom?.housekeeper.id || null,\r\n              unit_id: this.selectedRoom?.id,\r\n              booking_nbr: this.bookingMap.get(this.selectedRoom?.id) ?? null,\r\n            },\r\n          ],\r\n        });\r\n      }\r\n    } finally {\r\n      this.isLoading = false;\r\n      this.selectedRoom = null;\r\n      this.hkModal.closeModal();\r\n    }\r\n  }\r\n  render() {\r\n    // onDragStart={event => this.handleDragStart(event)} draggable={true}\r\n    return (\r\n      <Host>\r\n        <div class=\"bodyContainer\">\r\n          {this.getRoomRows()}\r\n          <div class=\"bookingEventsContainer preventPageScroll\">\r\n            {this.getBookingData()?.map(bookingEvent => {\r\n              return (\r\n                <igl-booking-event\r\n                  data-testid={`booking_${bookingEvent.BOOKING_NUMBER}`}\r\n                  data-room-name={bookingEvent.roomsInfo?.find(r => r.id === bookingEvent.RATE_TYPE)?.physicalrooms.find(r => r.id === bookingEvent.PR_ID)?.name}\r\n                  language={this.language}\r\n                  is_vacation_rental={this.calendarData.is_vacation_rental}\r\n                  countries={this.countries}\r\n                  currency={this.currency}\r\n                  data-component-id={bookingEvent.ID}\r\n                  bookingEvent={bookingEvent}\r\n                  allBookingEvents={this.getBookingData()}\r\n                ></igl-booking-event>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n        <ir-modal\r\n          ref={el => (this.hkModal = el)}\r\n          leftBtnText={locales?.entries?.Lcz_Cancel}\r\n          rightBtnText={locales?.entries?.Lcz_Update}\r\n          modalBody={this.renderModalBody()}\r\n          onConfirmModal={this.confirmHousekeepingUpdate.bind(this)}\r\n          autoClose={false}\r\n          isLoading={this.isLoading}\r\n          onCancelModal={e => {\r\n            e.stopImmediatePropagation();\r\n            e.stopPropagation();\r\n            this.selectedRoom = null;\r\n            this.hkModal.closeModal();\r\n          }}\r\n        ></ir-modal>\r\n      </Host>\r\n    );\r\n  }\r\n\r\n  private renderModalBody() {\r\n    if (!this.selectedRoom) {\r\n      return null;\r\n    }\r\n    return (\r\n      <p>\r\n        Update unit {this.selectedRoom?.name} to <b>{this.selectedRoom?.hk_status === '001' ? 'Dirty' : 'Clean'}?</b>\r\n      </p>\r\n      // <ir-select\r\n      //   LabelAvailable={false}\r\n      //   showFirstOption={false}\r\n      //   selectedValue={this.selectedRoom?.hk_status === '001' ? '001' : '002'}\r\n      //   data={[\r\n      //     { text: 'Clean', value: '001' },\r\n      //     { text: 'Dirty', value: '002' },\r\n      //   ]}\r\n      //   onSelectChange={e => (this.selectedHKStatus = e.detail)}\r\n      // ></ir-select>\r\n    );\r\n  }\r\n}\r\n"]}