{"version":3,"file":"ir-booking-editor-drawer.js","sourceRoot":"","sources":["../../../../../src/components/igloo-calendar/ir-booking-editor/ir-booking-editor-drawer/ir-booking-editor-drawer.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,KAAK,EAAgB,QAAQ,EAAE,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,eAAe,CAAC;AAIxG,OAAO,KAAK,MAAM,gBAAgB,CAAC;AACnC,OAAO,aAAa,EAAE,EAAE,yBAAyB,EAAE,aAAa,EAAE,MAAM,wBAAwB,CAAC;AACjG,OAAO,aAAa,MAAM,wBAAwB,CAAC;AACnD,OAAO,MAAM,MAAM,QAAQ,CAAC;AAC5B,OAAO,EAAE,qBAAqB,EAAE,MAAM,eAAe,CAAC;AACtD,OAAO,EAAE,cAAc,EAAE,MAAM,4CAA4C,CAAC;AAC5E,OAAO,EAAE,sBAAsB,EAAE,MAAM,8BAA8B,CAAC;AAOtE,MAAM,OAAO,qBAAqB;IAChC,qDAAqD;IAC5B,IAAI,CAAU;IAEvC,wCAAwC;IAChC,MAAM,CAAS;IAEvB,2BAA2B;IACnB,UAAU,CAAS;IAE3B,wCAAwC;IAChC,QAAQ,GAAW,IAAI,CAAC;IAEhC,uCAAuC;IAC/B,OAAO,CAAU;IAEzB,mCAAmC;IAC3B,IAAI,GAAsB,cAAc,CAAC;IAEjD,sCAAsC;IAC9B,KAAK,CAAS;IAEtB,kCAAkC;IAC1B,OAAO,CAAS;IAExB,mCAAmC;IAC3B,QAAQ,CAAS;IAEzB,gCAAgC;IACxB,MAAM,CAAS;IAEvB,sCAAsC;IACb,WAAW,CAAqB;IAEzD,qCAAqC;IAC7B,WAAW,GAAwB,EAAE,CAAC;IAE9C,0CAA0C;IAClC,cAAc,CAAS;IAEtB,IAAI,GAAgB,SAAS,CAAC;IAC9B,SAAS,CAAS;IAE3B,wDAAwD;IAC/C,mBAAmB,CAAqB;IAEzC,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;IAEpB,cAAc,GAAG,IAAI,cAAc,EAAE,CAAC;IACtC,oBAAoB,GAAG,IAAI,sBAAsB,EAAE,CAAC;IAEpD,cAAc,GAAG,KAAK,CAAC;IACvB,oBAAoB,GAAG,KAAK,CAAC;IAC7B,oBAAoB,CAAc;IAE1C,iBAAiB;QACf,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;YACf,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACnC,CAAC;QACD,IAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IACpD,CAAC;IAGD,kBAAkB;QAChB,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;YACf,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACnC,CAAC;IACH,CAAC;IAGD,uBAAuB,CAAC,QAA6B;QACnD,IAAI,CAAC,0BAA0B,CAAC,QAAQ,CAAC,CAAC;IAC5C,CAAC;IAGD,mBAAmB;QACjB,IAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IACpD,CAAC;IAGD,oBAAoB;QAClB,IAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IACpD,CAAC;IAGD,gBAAgB;QACd,IAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IACpD,CAAC;IAEO,0BAA0B,CAAC,WAAgC;QACjE,MAAM,kBAAkB,GAAG,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;QACjD,IAAI,CAAC,WAAW,EAAE,CAAC;YACjB,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;YAC5B,IAAI,CAAC,oBAAoB,GAAG,SAAS,CAAC;YACtC,OAAO;QACT,CAAC;QACD,MAAM,gBAAgB,GAAG,OAAO,CAAC,WAAW,IAAI,kBAAkB,CAAC,QAAQ,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC;QACtG,IAAI,CAAC,gBAAgB,IAAI,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;YACzE,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;YAC5B,IAAI,CAAC,oBAAoB,GAAG,SAAS,CAAC;YACtC,IAAI,CAAC,oBAAoB,GAAG,KAAK,CAAC;YAClC,OAAO;QACT,CAAC;QAED,IAAI,CAAC,oBAAoB,GAAG;YAC1B,SAAS,EAAE,IAAI,CAAC,OAAO;YACvB,OAAO,EAAE,IAAI,CAAC,QAAQ;YACtB,KAAK,EAAE,WAAW,CAAC,eAAe,IAAI,EAAE;YACxC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE;YAC7B,gBAAgB,EAAE,CAAC,WAAW,CAAC,WAAW,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAQ;YAC1J,WAAW,EAAE,WAAW,CAAC,mBAAmB,IAAI,EAAE;YAClD,iBAAiB,EAAE,WAAW,CAAC,UAAU,IAAI,SAAS;YACtD,iBAAiB,EAAE,WAAW,CAAC,UAAU,KAAK,SAAS,IAAI,WAAW,CAAC,UAAU,KAAK,IAAI,CAAC,CAAC,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,SAAS;YAC1I,mBAAmB,EAAE,WAAW,CAAC,YAAY,KAAK,SAAS,IAAI,WAAW,CAAC,YAAY,KAAK,IAAI,CAAC,CAAC,CAAC,WAAW,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,SAAS;SACnJ,CAAC;QACF,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,oBAAoB,GAAG,KAAK,CAAC;IACpC,CAAC;IAGD,uBAAuB,CAAC,CAAc;QACpC,CAAC,CAAC,wBAAwB,EAAE,CAAC;QAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,MAAM,EAAE,SAAS,EAAE,GAAG,CAAC,CAAC,MAAM,CAAC;QAC/B,QAAQ,SAAS,EAAE,CAAC;YAClB,KAAK,MAAM;gBACT,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;gBACtB,MAAM;YACR,KAAK,MAAM;gBACT,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;gBACtB,MAAM;YACR;gBACE,OAAO,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC;QAC5C,CAAC;IACH,CAAC;IAED,IAAY,WAAW;QACrB,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;YACf,OAAO,IAAI,CAAC,KAAK,CAAC;QACpB,CAAC;QACD,QAAQ,IAAI,CAAC,IAAI,EAAE,CAAC;YAClB,KAAK,eAAe,CAAC;YACrB,KAAK,aAAa,CAAC;YACnB,KAAK,UAAU,CAAC;YAChB,KAAK,cAAc,CAAC;YACpB,KAAK,cAAc;gBACjB,OAAO,aAAa,CAAC;QACzB,CAAC;IACH,CAAC;IAEO,WAAW,GAAG,CAAC,CAAe,EAAE,EAAE;QACxC,CAAC,EAAE,eAAe,EAAE,CAAC;QACrB,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;IACxB,CAAC,CAAC;IAEM,WAAW,GAAG,GAAG,EAAE;QACzB,IAAI,IAAI,CAAC,IAAI,KAAK,aAAa,EAAE,CAAC;YAChC,aAAa,EAAE,CAAC;QAClB,CAAC;QACD,IAAI,IAAI,CAAC,IAAI,KAAK,cAAc,EAAE,CAAC;YACjC,aAAa,EAAE,CAAC;YAChB,IAAI,CAAC,oBAAoB,CAAC,aAAa,CAAC,IAAI,CAAC,oBAAoB,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;QAChH,CAAC;QACD,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;IACxB,CAAC,CAAC;IAEM,YAAY;QAClB,QAAQ,IAAI,CAAC,IAAI,EAAE,CAAC;YAClB,KAAK,SAAS;gBACZ,OAAO,IAAI,CAAC,oBAAoB,EAAE,CAAC;YACrC,KAAK,SAAS;gBACZ,OAAO,IAAI,CAAC,oBAAoB,EAAE,CAAC;YACrC;gBACE,OAAO,IAAI,CAAC;QAChB,CAAC;IACH,CAAC;IAEO,oBAAoB;QAC1B,MAAM,EAAE,OAAO,EAAE,GAAG,aAAa,EAAE,YAAY,EAAE,KAAK,CAAC;QACvD,MAAM,UAAU,GAAG,OAAO,CAAC,CAAC,CAAC,OAAO,EAAE,MAAM,CAAC,MAAM,EAAE,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;QACvE,OAAO,CACL,EAAC,QAAQ;YACP,wBAAkB,cAAc,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,EAAC,QAAQ,EAAC,UAAU,EAAC,QAAQ,EAAC,OAAO,EAAC,SAAS,WAEpF;YACnB,wBACE,OAAO,EAAE,IAAI,CAAC,SAAS,KAAK,MAAM,EAClC,KAAK,EAAC,MAAM,EACZ,IAAI,EAAC,kBAAkB,EACvB,QAAQ,EAAE,KAAK,EACf,IAAI,EAAC,QAAQ,EACb,IAAI,EAAC,QAAQ,EACb,UAAU,EAAE,UAAU,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,QAAQ,EAC9C,OAAO,EAAC,OAAO,WAGE;YAClB,UAAU,IAAI,CACb,wBACE,OAAO,EAAE,IAAI,CAAC,SAAS,KAAK,cAAc,EAC1C,KAAK,EAAC,cAAc,EACpB,IAAI,EAAC,kBAAkB,EACvB,IAAI,EAAC,QAAQ,EACb,IAAI,EAAC,QAAQ,EACb,UAAU,EAAC,QAAQ,EACnB,OAAO,EAAC,OAAO,wBAGE,CACpB,CACQ,CACZ,CAAC;IACJ,CAAC;IAEO,oBAAoB;QAC1B,MAAM,gBAAgB,GAAG,yBAAyB,EAAE,CAAC;QACrD,OAAO,CACL,EAAC,QAAQ;YACP,uCAA8B,OAAO,EAAC,IAAI,EAAC,QAAQ,EAAC,UAAU,EAAC,QAAQ,EAAC,OAAO,EAAC,SAAS,aAEtE;YAClB,CAAC,cAAc,EAAE,UAAU,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CACnD,EAAC,QAAQ;gBACN,CAAC,gBAAgB,IAAI,kBAAY,GAAG,EAAC,6BAA6B,mDAA0D;gBAC7H,wBAAkB,EAAE,EAAC,6BAA6B,EAAC,QAAQ,EAAE,CAAC,gBAAgB,EAAE,cAAc,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,EAAC,QAAQ,EAAC,UAAU,EAAC,QAAQ,EAAC,OAAO,EAAC,OAAO,WAEhJ,CACV,CACZ,CACQ,CACZ,CAAC;IACJ,CAAC;IACO,KAAK,CAAC,WAAW;QACvB,IAAI,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,CAAC,oBAAoB,EAAE,CAAC;YACtD,MAAM,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACjC,CAAC;aAAM,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;YAC5D,MAAM,IAAI,CAAC,eAAe,EAAE,CAAC;QAC/B,CAAC;QACD,IAAI,CAAC,mBAAmB,CAAC,IAAI,EAAE,CAAC;QAChC,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;IACxB,CAAC;IAEO,mBAAmB;QACzB,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,oBAAoB,EAAE,CAAC;YACrD,OAAO,IAAI,CAAC,oBAAoB,CAAC;QACnC,CAAC;QACD,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;YACzE,OAAO,SAAS,CAAC;QACnB,CAAC;QACD,MAAM,WAAW,GAAG,qBAAqB,CAAC,IAAI,CAAC,WAAW,CAAC,mBAAmB,KAAK,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QAC/I,OAAO;YACL,SAAS,EAAE,IAAI,CAAC,OAAO;YACvB,OAAO,EAAE,IAAI,CAAC,QAAQ;YACtB,KAAK,EAAE,IAAI,CAAC,WAAW,CAAC,eAAe,IAAI,EAAE;YAC7C,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE;YAC7B,gBAAgB,EAAE,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK;YAC9H,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,mBAAmB,IAAI,EAAE;YACvD,GAAG,WAAW;SACf,CAAC;IACJ,CAAC;IAEO,KAAK,CAAC,eAAe,CAAC,SAAS,GAAG,IAAI,EAAE,eAA4B;QAC1E,IAAI,CAAC;YACH,MAAM,OAAO,GAAG,eAAe,IAAI,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAC9D,IAAI,CAAC,OAAO,EAAE,CAAC;gBACb,OAAO;YACT,CAAC;YACD,MAAM,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;YAC7C,IAAI,SAAS,EAAE,CAAC;gBACd,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC;gBAC7B,IAAI,CAAC,0BAA0B,CAAC,SAAS,CAAC,CAAC;YAC7C,CAAC;QACH,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC,CAAA,CAAC;IACpB,CAAC;IAEO,KAAK,CAAC,4BAA4B,CAAC,KAAuB;QAChE,KAAK,CAAC,wBAAwB,EAAE,CAAC;QACjC,KAAK,CAAC,eAAe,EAAE,CAAC;QACxB,IAAI,CAAC;YACH,MAAM,IAAI,CAAC,kCAAkC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;YAC5D,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;QACnC,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO,CAAC,KAAK,CAAC,+BAA+B,EAAE,KAAK,CAAC,CAAC;QACxD,CAAC;IACH,CAAC;IAEO,KAAK,CAAC,kCAAkC,CAAC,aAAkB;QACjE,IAAI,CAAC,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,CAAC,oBAAoB,EAAE,CAAC;YACvD,OAAO;QACT,CAAC;QAED,MAAM,eAAe,GAAG,EAAE,GAAG,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAEzD,MAAM,gBAAgB,GAAG,MAAM,CAAC,IAAI,CAAC,oBAAoB,CAAC,SAAS,EAAE,YAAY,CAAC,CAAC;QACnF,MAAM,eAAe,GAAG,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,SAAS,EAAE,YAAY,CAAC,CAAC;QAC9E,MAAM,cAAc,GAAG,MAAM,CAAC,IAAI,CAAC,oBAAoB,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;QAC/E,MAAM,aAAa,GAAG,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;QAE1E,IAAI,aAAa,CAAC,QAAQ,CAAC,cAAc,EAAE,MAAM,CAAC,EAAE,CAAC;YACnD,MAAM,oBAAoB,GAAG;gBAC3B,GAAG,eAAe;gBAClB,SAAS,EAAE,aAAa,CAAC,MAAM,CAAC,YAAY,CAAC;aAC9C,CAAC;YACF,MAAM,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,oBAAoB,CAAC,CAAC;QAC5D,CAAC;QAED,IAAI,eAAe,CAAC,OAAO,CAAC,gBAAgB,EAAE,MAAM,CAAC,EAAE,CAAC;YACtD,MAAM,mBAAmB,GAAG;gBAC1B,GAAG,eAAe;gBAClB,OAAO,EAAE,eAAe,CAAC,MAAM,CAAC,YAAY,CAAC;aAC9C,CAAC;YACF,MAAM,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,mBAAmB,CAAC,CAAC;QAC3D,CAAC;QACD,OAAO;IACT,CAAC;IAEO,KAAK,CAAC,iBAAiB;QAC7B,IAAI,CAAC;YACH,IAAI,CAAC,IAAI,CAAC,oBAAoB,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;gBACrF,OAAO;YACT,CAAC;YACD,MAAM,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC;YAC3F,IAAI,WAAW,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;gBAC7B,OAAO;YACT,CAAC;YACD,MAAM,IAAI,CAAC,cAAc,CAAC,sBAAsB,CAAC;gBAC/C,SAAS,EAAE,IAAI,CAAC,oBAAoB,CAAC,SAAS;gBAC9C,OAAO,EAAE,IAAI,CAAC,oBAAoB,CAAC,OAAO;gBAC1C,UAAU,EAAE,aAAa,CAAC,QAAQ,CAAC,EAAE;gBACrC,eAAe,EAAE;oBACf,KAAK,EAAE,CAAC;oBACR,KAAK,EAAE,CAAC;iBACT;gBACD,QAAQ,EAAE,IAAI,CAAC,QAAQ;gBACvB,aAAa,EAAE,WAAW;gBAC1B,QAAQ,EAAE,aAAa,CAAC,QAAQ,EAAE,QAAQ;aAC3C,CAAC,CAAC;YACH,MAAM,WAAW,GAAG,aAAa,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,CAAC,EAAE;gBACrD,IAAI,EAAE,CAAC,oBAAoB,EAAE,CAAC;oBAC5B,OAAO,IAAI,CAAC;gBACd,CAAC;gBACD,OAAO,EAAE,CAAC,SAAS,GAAG,CAAC,IAAI,EAAE,CAAC,sBAAsB,CAAC,KAAK,6BAA6B,CAAC;YAC1F,CAAC,CAAC,CAAC;YACH,IAAI,WAAW,EAAE,CAAC;gBAChB,MAAM,IAAI,CAAC,eAAe,EAAE,CAAC;YAC/B,CAAC;iBAAM,CAAC;gBACN,OAAO,CAAC,IAAI,CAAC,4CAA4C,CAAC,CAAC;YAC7D,CAAC;QACH,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO,CAAC,KAAK,CAAC,mCAAmC,EAAE,KAAK,CAAC,CAAC;QAC5D,CAAC;IACH,CAAC;IACD,MAAM;QACJ,OAAO,CACL,kEACE,YAAY,EAAE,KAAK,EAAC,KAAK,EAAC,EAAE;gBAC1B,KAAK,CAAC,wBAAwB,EAAE,CAAC;gBACjC,KAAK,CAAC,eAAe,EAAE,CAAC;gBACxB,MAAM,IAAI,CAAC,WAAW,EAAE,CAAC;YAC3B,CAAC,EACD,KAAK,EAAE;gBACL,mBAAmB,EAAE,OAAO;gBAC5B,8BAA8B,EAAE,iCAAiC;gBACjE,0BAA0B,EAAE,gBAAgB;gBAC5C,2BAA2B,EAAE,gBAAgB;gBAC7C,yBAAyB,EAAE,gBAAgB;gBAC3C,4BAA4B,EAAE,gBAAgB;aAC/C,EACD,KAAK,EAAC,wBAAwB,EAC9B,KAAK,EAAE,IAAI,CAAC,WAAW,EACvB,IAAI,EAAE,IAAI,CAAC,IAAI;YAEd,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,MAAM,IAAI,CAC3B,0EACE,gBAAgB,EAAE,CAAC,CAAC,EAAE;oBACpB,CAAC,CAAC,wBAAwB,EAAE,CAAC;oBAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;oBACpB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;gBAClC,CAAC,EACD,mBAAmB,EAAE,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,4BAA4B,CAAC,KAAK,CAAC,EACtE,MAAM,EAAE,IAAI,CAAC,MAAM,EACnB,UAAU,EAAE,IAAI,CAAC,UAAU,EAC3B,WAAW,EAAE,IAAI,CAAC,WAAW,EAC7B,iBAAiB,EAAE,KAAK,IAAI,EAAE;oBAC5B,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC;oBAC7B,IAAI,CAAC,0BAA0B,CAAC,SAAS,CAAC,CAAC;oBAC3C,MAAM,IAAI,CAAC,WAAW,EAAE,CAAC;gBAC3B,CAAC,EACD,IAAI,EAAE,IAAI,CAAC,IAAI,EACf,WAAW,EAAE,IAAI,CAAC,WAAW,EAC7B,QAAQ,EAAE,IAAI,CAAC,QAAQ,EACvB,OAAO,EAAE,IAAI,CAAC,OAAO,EACrB,IAAI,EAAE,IAAI,CAAC,IAAI,EACf,OAAO,EAAE,IAAI,CAAC,OAAO,EACrB,QAAQ,EAAE,IAAI,CAAC,QAAQ,EACvB,UAAU,EAAE,IAAI,CAAC,cAAc,GACZ,CACtB;YACD,4DAAK,IAAI,EAAC,QAAQ,EAAC,KAAK,EAAC,mBAAmB,IACzC,IAAI,CAAC,YAAY,EAAE,CAChB,CACI,CACb,CAAC;IACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import { Component, Event, EventEmitter, Fragment, h, Listen, Prop, State, Watch } from '@stencil/core';\nimport { BlockedDatePayload, BookingEditorMode, BookingStep } from '../types';\nimport { Booking } from '@/models/booking.dto';\nimport { IBlockUnit } from '@/models/IBooking';\nimport Token from '@/models/Token';\nimport booking_store, { hasAtLeastOneRoomSelected, resetReserved } from '@/stores/booking.store';\nimport calendar_data from '@/stores/calendar-data';\nimport moment from 'moment';\nimport { getReleaseHoursString } from '@/utils/utils';\nimport { BookingService } from '@/services/booking-service/booking.service';\nimport { IRBookingEditorService } from '../ir-booking-editor.service';\n\n@Component({\n  tag: 'ir-booking-editor-drawer',\n  styleUrl: 'ir-booking-editor-drawer.css',\n  scoped: true,\n})\nexport class IrBookingEditorDrawer {\n  /** Controls drawer visibility (reflected to DOM). */\n  @Prop({ reflect: true }) open: boolean;\n\n  /** Auth token used for API requests. */\n  @Prop() ticket: string;\n\n  /** Property identifier. */\n  @Prop() propertyid: string;\n\n  /** UI language code (default: `en`). */\n  @Prop() language: string = 'en';\n\n  /** Booking being created or edited. */\n  @Prop() booking: Booking;\n\n  /** Current booking editor mode. */\n  @Prop() mode: BookingEditorMode = 'PLUS_BOOKING';\n\n  /** Optional drawer title override. */\n  @Prop() label: string;\n\n  /** Check-in date (ISO string). */\n  @Prop() checkIn: string;\n\n  /** Check-out date (ISO string). */\n  @Prop() checkOut: string;\n\n  /** Selected unit identifier. */\n  @Prop() unitId: string;\n\n  /** Payload for blocked unit dates. */\n  @Prop({ mutable: true }) blockedUnit: BlockedDatePayload;\n\n  /** Allowed room type identifiers. */\n  @Prop() roomTypeIds: (string | number)[] = [];\n\n  /** Room identifier used by the editor. */\n  @Prop() roomIdentifier: string;\n\n  @State() step: BookingStep = 'details';\n  @State() isLoading: string;\n\n  /** Emitted when the booking editor drawer is closed. */\n  @Event() bookingEditorClosed: EventEmitter<void>;\n\n  private token = new Token();\n\n  private bookingService = new BookingService();\n  private bookingEditorService = new IRBookingEditorService();\n\n  private wasBlockedUnit = false;\n  private didAdjustBlockedUnit = false;\n  private originalBlockPayload?: IBlockUnit;\n\n  componentWillLoad() {\n    if (this.token) {\n      this.token.setToken(this.ticket);\n    }\n    this.initializeBlockedUnitState(this.blockedUnit);\n  }\n\n  @Watch('ticket')\n  handleTicketChange() {\n    if (this.token) {\n      this.token.setToken(this.ticket);\n    }\n  }\n\n  @Watch('blockedUnit')\n  handleBlockedUnitChange(newValue?: BlockedDatePayload) {\n    this.initializeBlockedUnitState(newValue);\n  }\n\n  @Watch('checkIn')\n  handleCheckInChange() {\n    this.initializeBlockedUnitState(this.blockedUnit);\n  }\n\n  @Watch('checkOut')\n  handleCheckOutChange() {\n    this.initializeBlockedUnitState(this.blockedUnit);\n  }\n\n  @Watch('unitId')\n  handleUnitChange() {\n    this.initializeBlockedUnitState(this.blockedUnit);\n  }\n\n  private initializeBlockedUnitState(blockedUnit?: BlockedDatePayload) {\n    const allowedStatusCodes = ['002', '003', '004'];\n    if (!blockedUnit) {\n      this.wasBlockedUnit = false;\n      this.originalBlockPayload = undefined;\n      return;\n    }\n    const hasBlockMetadata = Boolean(blockedUnit && allowedStatusCodes.includes(blockedUnit.STATUS_CODE));\n    if (!hasBlockMetadata || !this.checkIn || !this.checkOut || !this.unitId) {\n      this.wasBlockedUnit = false;\n      this.originalBlockPayload = undefined;\n      this.didAdjustBlockedUnit = false;\n      return;\n    }\n\n    this.originalBlockPayload = {\n      from_date: this.checkIn,\n      to_date: this.checkOut,\n      NOTES: blockedUnit.OPTIONAL_REASON || '',\n      pr_id: this.unitId.toString(),\n      STAY_STATUS_CODE: (blockedUnit.STATUS_CODE || (blockedUnit.OUT_OF_SERVICE ? '004' : Number(blockedUnit.RELEASE_AFTER_HOURS) === 0 ? '002' : '003')) as any,\n      DESCRIPTION: blockedUnit.RELEASE_AFTER_HOURS || '',\n      BLOCKED_TILL_DATE: blockedUnit.ENTRY_DATE || undefined,\n      BLOCKED_TILL_HOUR: blockedUnit.ENTRY_HOUR !== undefined && blockedUnit.ENTRY_HOUR !== null ? blockedUnit.ENTRY_HOUR.toString() : undefined,\n      BLOCKED_TILL_MINUTE: blockedUnit.ENTRY_MINUTE !== undefined && blockedUnit.ENTRY_MINUTE !== null ? blockedUnit.ENTRY_MINUTE.toString() : undefined,\n    };\n    this.wasBlockedUnit = true;\n    this.didAdjustBlockedUnit = false;\n  }\n\n  @Listen('bookingStepChange')\n  handleBookingStepChange(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    const { direction } = e.detail;\n    switch (direction) {\n      case 'next':\n        this.step = 'confirm';\n        break;\n      case 'prev':\n        this.step = 'details';\n        break;\n      default:\n        console.warn('Direction not supported');\n    }\n  }\n\n  private get drawerLabel() {\n    if (this.label) {\n      return this.label;\n    }\n    switch (this.mode) {\n      case 'SPLIT_BOOKING':\n      case 'BAR_BOOKING':\n      case 'ADD_ROOM':\n      case 'EDIT_BOOKING':\n      case 'PLUS_BOOKING':\n        return 'New Booking';\n    }\n  }\n\n  private goToConfirm = (e?: CustomEvent) => {\n    e?.stopPropagation();\n    this.step = 'confirm';\n  };\n\n  private goToDetails = () => {\n    if (this.mode === 'BAR_BOOKING') {\n      resetReserved();\n    }\n    if (this.mode === 'EDIT_BOOKING') {\n      resetReserved();\n      this.bookingEditorService.updateBooking(this.bookingEditorService.getRoom(this.booking, this.roomIdentifier));\n    }\n    this.step = 'details';\n  };\n\n  private renderFooter() {\n    switch (this.step) {\n      case 'details':\n        return this.renderDetailsActions();\n      case 'confirm':\n        return this.renderConfirmActions();\n      default:\n        return null;\n    }\n  }\n\n  private renderConfirmActions() {\n    const { checkIn } = booking_store?.bookingDraft?.dates;\n    const hasCheckIn = checkIn ? checkIn?.isSame(moment(), 'date') : false;\n    return (\n      <Fragment>\n        <ir-custom-button onClickHandler={this.goToDetails} size=\"medium\" appearance=\"filled\" variant=\"neutral\">\n          Back\n        </ir-custom-button>\n        <ir-custom-button\n          loading={this.isLoading === 'book'}\n          value=\"book\"\n          form=\"new_booking_form\"\n          disabled={false}\n          type=\"submit\"\n          size=\"medium\"\n          appearance={hasCheckIn ? 'outlined' : 'accent'}\n          variant=\"brand\"\n        >\n          Book\n        </ir-custom-button>\n        {hasCheckIn && (\n          <ir-custom-button\n            loading={this.isLoading === 'book-checkin'}\n            value=\"book-checkin\"\n            form=\"new_booking_form\"\n            type=\"submit\"\n            size=\"medium\"\n            appearance=\"accent\"\n            variant=\"brand\"\n          >\n            Book and check-in\n          </ir-custom-button>\n        )}\n      </Fragment>\n    );\n  }\n\n  private renderDetailsActions() {\n    const haveRoomSelected = hasAtLeastOneRoomSelected();\n    return (\n      <Fragment>\n        <ir-custom-button data-drawer=\"close\" size=\"medium\" appearance=\"filled\" variant=\"neutral\">\n          Cancel\n        </ir-custom-button>\n        {['PLUS_BOOKING', 'ADD_ROOM'].includes(this.mode) && (\n          <Fragment>\n            {!haveRoomSelected && <wa-tooltip for=\"booking_editor__next-button\">Please select at least one unit to continue.</wa-tooltip>}\n            <ir-custom-button id=\"booking_editor__next-button\" disabled={!haveRoomSelected} onClickHandler={this.goToConfirm} size=\"medium\" appearance=\"accent\" variant=\"brand\">\n              Next\n            </ir-custom-button>\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  }\n  private async closeDrawer() {\n    if (this.wasBlockedUnit && !this.didAdjustBlockedUnit) {\n      await this.checkAndBlockDate();\n    } else if (this.blockedUnit && this.blockedUnit.STATUS_CODE) {\n      await this.handleBlockDate();\n    }\n    this.bookingEditorClosed.emit();\n    this.step = 'details';\n  }\n\n  private getBlockUnitPayload(): IBlockUnit | undefined {\n    if (this.wasBlockedUnit && this.originalBlockPayload) {\n      return this.originalBlockPayload;\n    }\n    if (!this.blockedUnit || !this.checkIn || !this.checkOut || !this.unitId) {\n      return undefined;\n    }\n    const releaseData = getReleaseHoursString(this.blockedUnit.RELEASE_AFTER_HOURS !== null ? Number(this.blockedUnit.RELEASE_AFTER_HOURS) : null);\n    return {\n      from_date: this.checkIn,\n      to_date: this.checkOut,\n      NOTES: this.blockedUnit.OPTIONAL_REASON || '',\n      pr_id: this.unitId.toString(),\n      STAY_STATUS_CODE: this.blockedUnit.OUT_OF_SERVICE ? '004' : Number(this.blockedUnit.RELEASE_AFTER_HOURS) === 0 ? '002' : '003',\n      DESCRIPTION: this.blockedUnit.RELEASE_AFTER_HOURS || '',\n      ...releaseData,\n    };\n  }\n\n  private async handleBlockDate(autoReset = true, overridePayload?: IBlockUnit) {\n    try {\n      const payload = overridePayload ?? this.getBlockUnitPayload();\n      if (!payload) {\n        return;\n      }\n      await this.bookingService.blockUnit(payload);\n      if (autoReset) {\n        this.blockedUnit = undefined;\n        this.initializeBlockedUnitState(undefined);\n      }\n    } catch (error) {}\n  }\n\n  private async handleAdjustBlockedUnitEvent(event: CustomEvent<any>) {\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n    try {\n      await this.adjustBlockedDatesAfterReservation(event.detail);\n      this.didAdjustBlockedUnit = true;\n    } catch (error) {\n      console.error('Error adjusting blocked unit:', error);\n    }\n  }\n\n  private async adjustBlockedDatesAfterReservation(serviceParams: any) {\n    if (!this.wasBlockedUnit || !this.originalBlockPayload) {\n      return;\n    }\n\n    const originalPayload = { ...this.originalBlockPayload };\n\n    const originalFromDate = moment(this.originalBlockPayload.from_date, 'YYYY-MM-DD');\n    const currentFromDate = moment(serviceParams.booking.from_date, 'YYYY-MM-DD');\n    const originalToDate = moment(this.originalBlockPayload.to_date, 'YYYY-MM-DD');\n    const currentToDate = moment(serviceParams.booking.to_date, 'YYYY-MM-DD');\n\n    if (currentToDate.isBefore(originalToDate, 'days')) {\n      const trailingBlockPayload = {\n        ...originalPayload,\n        from_date: currentToDate.format('YYYY-MM-DD'),\n      };\n      await this.bookingService.blockUnit(trailingBlockPayload);\n    }\n\n    if (currentFromDate.isAfter(originalFromDate, 'days')) {\n      const leadingBlockPayload = {\n        ...originalPayload,\n        to_date: currentFromDate.format('YYYY-MM-DD'),\n      };\n      await this.bookingService.blockUnit(leadingBlockPayload);\n    }\n    return;\n  }\n\n  private async checkAndBlockDate() {\n    try {\n      if (!this.originalBlockPayload || !this.roomTypeIds || this.roomTypeIds.length === 0) {\n        return;\n      }\n      const roomTypeIds = this.roomTypeIds.map(id => Number(id)).filter(id => !Number.isNaN(id));\n      if (roomTypeIds.length === 0) {\n        return;\n      }\n      await this.bookingService.getBookingAvailability({\n        from_date: this.originalBlockPayload.from_date,\n        to_date: this.originalBlockPayload.to_date,\n        propertyid: calendar_data.property.id,\n        adultChildCount: {\n          adult: 2,\n          child: 0,\n        },\n        language: this.language,\n        room_type_ids: roomTypeIds,\n        currency: calendar_data.property?.currency,\n      });\n      const isAvailable = booking_store.roomTypes.every(rt => {\n        if (rt.is_available_to_book) {\n          return true;\n        }\n        return rt.inventory > 0 && rt['not_available_reason'] === 'ALL-RATES-PLAN-NOT-BOOKABLE';\n      });\n      if (isAvailable) {\n        await this.handleBlockDate();\n      } else {\n        console.warn('Blocked date is unavailable. Continuing...');\n      }\n    } catch (error) {\n      console.error('Error checking and blocking date:', error);\n    }\n  }\n  render() {\n    return (\n      <ir-drawer\n        onDrawerHide={async event => {\n          event.stopImmediatePropagation();\n          event.stopPropagation();\n          await this.closeDrawer();\n        }}\n        style={{\n          '--ir-drawer-width': '70rem',\n          '--ir-drawer-background-color': 'var(--wa-color-surface-default)',\n          '--ir-drawer-padding-left': 'var(--spacing)',\n          '--ir-drawer-padding-right': 'var(--spacing)',\n          '--ir-drawer-padding-top': 'var(--spacing)',\n          '--ir-drawer-padding-bottom': 'var(--spacing)',\n        }}\n        class=\"booking-editor__drawer\"\n        label={this.drawerLabel}\n        open={this.open}\n      >\n        {this.open && this.ticket && (\n          <ir-booking-editor\n            onLoadingChanged={e => {\n              e.stopImmediatePropagation();\n              e.stopPropagation();\n              this.isLoading = e.detail.cause;\n            }}\n            onAdjustBlockedUnit={event => this.handleAdjustBlockedUnitEvent(event)}\n            unitId={this.unitId}\n            propertyId={this.propertyid}\n            roomTypeIds={this.roomTypeIds}\n            onResetBookingEvt={async () => {\n              this.blockedUnit = undefined;\n              this.initializeBlockedUnitState(undefined);\n              await this.closeDrawer();\n            }}\n            step={this.step}\n            blockedUnit={this.blockedUnit}\n            language={this.language}\n            booking={this.booking}\n            mode={this.mode}\n            checkIn={this.checkIn}\n            checkOut={this.checkOut}\n            identifier={this.roomIdentifier}\n          ></ir-booking-editor>\n        )}\n        <div slot=\"footer\" class=\"ir__drawer-footer\">\n          {this.renderFooter()}\n        </div>\n      </ir-drawer>\n    );\n  }\n}\n"]}