{"version":3,"file":"igl-date-range.js","sourceRoot":"","sources":["../../../../src/components/igloo-calendar/igl-date-range/igl-date-range.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Host, h, State, Event, EventEmitter, Prop, Watch } from '@stencil/core';\nimport { IToast } from '@components/ui/ir-toast/toast';\nimport locales from '@/stores/locales.store';\nimport { calculateDaysBetweenDates } from '@/utils/booking';\nimport moment from 'moment';\n\n@Component({\n  tag: 'igl-date-range',\n  styleUrl: 'igl-date-range.css',\n  scoped: true,\n})\nexport class IglDateRange {\n  @Prop() defaultData: { [key: string]: any };\n  @Prop({ reflect: true }) disabled: boolean = false;\n  @Prop() minDate: string;\n  @Prop() dateLabel: string;\n  @Prop() maxDate: string;\n  @Prop() withDateDifference: boolean = true;\n  @Prop() variant: 'booking' | 'default' = 'default';\n\n  @State() renderAgain: boolean = false;\n\n  @Event() dateSelectEvent: EventEmitter<{ [key: string]: any }>;\n  @Event() toast: EventEmitter<IToast>;\n\n  private totalNights: number = 0;\n  private fromDate: Date;\n  private toDate: Date;\n  private fromDateStr: string = 'from';\n  private toDateStr: string = 'to';\n\n  componentWillLoad() {\n    this.initializeDates();\n  }\n\n  @Watch('defaultData')\n  handleDataChange(newValue: any, oldValue: any) {\n    if (JSON.stringify(newValue) !== JSON.stringify(oldValue)) {\n      this.initializeDates();\n    }\n  }\n\n  private initializeDates() {\n    let dt = new Date();\n    dt.setHours(0, 0, 0, 0);\n    dt.setDate(dt.getDate() + 1);\n    if (this.defaultData) {\n      if (this.defaultData.fromDate) {\n        this.fromDate = new Date(this.defaultData.fromDate);\n        this.fromDate.setHours(0, 0, 0, 0);\n        this.fromDateStr = this.getFormattedDateString(this.fromDate);\n      }\n      if (this.defaultData.toDate) {\n        this.toDate = new Date(this.defaultData.toDate);\n        this.toDate.setHours(0, 0, 0, 0);\n        this.toDateStr = this.getFormattedDateString(this.toDate);\n      }\n    }\n    if (this.fromDate && this.toDate) {\n      this.calculateTotalNights();\n      // this.handleDateSelectEvent('selectedDateRange', {\n      //   fromDate: this.fromDate.getTime(),\n      //   toDate: this.toDate.getTime(),\n      //   fromDateStr: this.fromDateStr,\n      //   toDateStr: this.toDateStr,\n      //   dateDifference: this.totalNights,\n      // });\n    }\n    return [this.fromDateStr, this.toDateStr];\n  }\n\n  private calculateTotalNights() {\n    this.totalNights = calculateDaysBetweenDates(moment(this.fromDate).format('YYYY-MM-DD'), moment(this.toDate).format('YYYY-MM-DD'));\n  }\n  private getFormattedDateString(dt) {\n    return dt.getDate() + ' ' + dt.toLocaleString('default', { month: 'short' }).toLowerCase() + ' ' + dt.getFullYear();\n  }\n\n  private handleDateSelectEvent(key, data: any = '') {\n    this.dateSelectEvent.emit({ key, data });\n  }\n  private handleDateChange(evt) {\n    const { start, end } = evt.detail;\n    this.fromDate = start.toDate();\n    this.toDate = end.toDate();\n    this.calculateTotalNights();\n\n    this.handleDateSelectEvent('selectedDateRange', {\n      fromDate: this.fromDate.getTime(),\n      toDate: this.toDate.getTime(),\n      fromDateStr: start.format('DD MMM YYYY'),\n      toDateStr: end.format('DD MMM YYYY'),\n      dateDifference: this.totalNights,\n    });\n\n    this.renderAgain = !this.renderAgain;\n  }\n  render() {\n    if (this.variant === 'booking') {\n      return (\n        <div class={`p-0 m-0 date-range-container-cn`}>\n          <ir-date-range\n            maxDate={this.maxDate}\n            class={'date-range-input'}\n            disabled={this.disabled}\n            fromDate={this.fromDate}\n            toDate={this.toDate}\n            minDate={this.minDate}\n            autoApply\n            data-state={this.disabled ? 'disabled' : 'active'}\n            onDateChanged={evt => {\n              this.handleDateChange(evt);\n            }}\n          ></ir-date-range>\n          <div class={`d-flex align-items-center m-0  date-range-container ${this.disabled ? 'disabled' : ''}`}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"m-0 p-0\" height=\"14\" width=\"14\" viewBox=\"0 0 448 512\">\n              <path\n                fill=\"currentColor\"\n                d=\"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z\"\n              />\n            </svg>\n            <span>{moment(this.fromDate).format('MMM DD, YYYY')}</span>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"m-0 p-0\" height=\"14\" width=\"14\" viewBox=\"0 0 512 512\">\n              <path\n                fill=\"currentColor\"\n                d=\"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z\"\n              />\n            </svg>\n            <span>{moment(this.toDate).format('MMM DD, YYYY')}</span>\n            {this.totalNights && <span class=\"m-0 p-0\">{this.totalNights + (this.totalNights > 1 ? ` ${locales.entries.Lcz_Nights}` : ` ${locales.entries.Lcz_Night}`)}</span>}\n          </div>\n        </div>\n      );\n    }\n    return (\n      <Host>\n        <div class={`p-0 m-0 date-range-container-cn`}>\n          <ir-date-range\n            maxDate={this.maxDate}\n            class={'date-range-input'}\n            disabled={this.disabled}\n            fromDate={this.fromDate}\n            toDate={this.toDate}\n            minDate={this.minDate}\n            autoApply\n            data-state={this.disabled ? 'disabled' : 'active'}\n            onDateChanged={evt => {\n              this.handleDateChange(evt);\n            }}\n          ></ir-date-range>\n          <div class={`d-flex align-items-center m-0  date-range-container ${this.disabled ? 'disabled' : ''}`}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"m-0 p-0\" height=\"14\" width=\"14\" viewBox=\"0 0 448 512\">\n              <path\n                fill=\"currentColor\"\n                d=\"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z\"\n              />\n            </svg>\n            <span>{moment(this.fromDate).format('MMM DD, YYYY')}</span>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"m-0 p-0\" height=\"14\" width=\"14\" viewBox=\"0 0 512 512\">\n              <path\n                fill=\"currentColor\"\n                d=\"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z\"\n              />\n            </svg>\n            <span>{moment(this.toDate).format('MMM DD, YYYY')}</span>\n          </div>\n        </div>\n      </Host>\n    );\n  }\n}\n"]}