{"version":3,"file":"igl-split-booking.js","sourceRoot":"","sources":["../../../../src/components/igloo-calendar/igl-split-booking/igl-split-booking.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Booking, Room } from '@/models/booking.dto';\nimport { PropertyRoomType } from '@/models/IBooking';\nimport { BookingService } from '@/services/booking.service';\nimport { resetBookingStore } from '@/stores/booking.store';\nimport calendar_data from '@/stores/calendar-data';\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\nimport locales from '@/stores/locales.store';\nimport { checkMealPlan, SelectOption } from '@/utils/utils';\nimport { Component, Event, EventEmitter, Fragment, Prop, State, h } from '@stencil/core';\nimport moment from 'moment';\nimport { ZodError } from 'zod';\nimport { RoomDates, SelectedUnit, SelectedUnitSchema } from './types';\n\n@Component({\n  tag: 'igl-split-booking',\n  styleUrls: ['igl-split-booking.css', '../../../common/sheet.css'],\n  scoped: true,\n})\nexport class IglSplitBooking {\n  @Prop() booking: Booking;\n  @Prop() identifier: Room['identifier'];\n\n  @State() selectedDates: RoomDates;\n  @State() room: Room;\n  @State() roomTypes: PropertyRoomType[] = [];\n  @State() selectedUnit: Partial<SelectedUnit> = {};\n  @State() isLoading: boolean;\n  @State() errors: Record<string, boolean> | null;\n  @State() mealPlanOptions: SelectOption[] | null = null;\n\n  @Event() closeModal: EventEmitter<null>;\n\n  private defaultDates: RoomDates;\n  private bookingService = new BookingService();\n\n  componentWillLoad() {\n    this.room = this.getRoom();\n    this.defaultDates = { ...this.generateDates(this.room) };\n    this.selectedDates = { ...this.defaultDates };\n    console.log(this.booking);\n  }\n\n  private getRoom() {\n    if (!this.booking) {\n      throw new Error('Missing booking');\n    }\n    if (!this.identifier) {\n      throw new Error('Missing Identifier');\n    }\n    const room = this.booking.rooms.find(r => r.identifier === this.identifier);\n    if (!room) {\n      throw new Error(`Couldn't find room with identifier ${this.identifier}`);\n    }\n    return room;\n  }\n\n  private generateDates(room: Room): RoomDates {\n    let MFromDate = moment(room.from_date, 'YYYY-MM-DD');\n    const MToDate = moment(room.to_date, 'YYYY-MM-DD').add(-1, 'days');\n    const today = moment();\n    if (MFromDate.isBefore(today)) {\n      MFromDate = today.clone();\n    }\n    if (MFromDate.isSame(today)) {\n      return { from_date: MFromDate, to_date: MToDate };\n    }\n    if (MFromDate.isSameOrAfter(today)) {\n      return { from_date: MFromDate.clone().add(1, 'days'), to_date: MToDate };\n    }\n    return { from_date: today.clone().add(1, 'days'), to_date: MToDate };\n  }\n\n  private async checkBookingAvailability() {\n    resetBookingStore();\n    const from_date = this.selectedDates.from_date.format('YYYY-MM-DD');\n    const to_date = this.selectedDates.to_date.format('YYYY-MM-DD');\n\n    const is_in_agent_mode = this.booking.agent !== null;\n    try {\n      const data = await this.bookingService.getBookingAvailability({\n        from_date,\n        to_date,\n        propertyid: this.booking.property.id,\n        adultChildCount: {\n          adult: 1,\n          child: 0,\n        },\n        language: 'en',\n        room_type_ids: [],\n        currency: this.booking.currency,\n        agent_id: is_in_agent_mode ? this.booking.agent.id : null,\n        is_in_agent_mode,\n        room_type_ids_to_update: [],\n      });\n      this.roomTypes = data as any as PropertyRoomType[];\n    } catch (error) {\n      console.error('Error initializing booking availability:', error);\n    }\n  }\n\n  private async doReservation() {\n    try {\n      this.isLoading = true;\n      this.errors = null;\n      const selectedUnit = SelectedUnitSchema.parse(this.selectedUnit);\n      const oldRooms = this.booking.rooms.filter(r => r.identifier !== this.identifier);\n      let rooms = [\n        ...oldRooms,\n        {\n          ...this.room,\n          from_date: this.room.from_date,\n          to_date: this.selectedDates.from_date.format('YYYY-MM-DD'),\n          days: this.room.days.filter(r => moment(r.date, 'YYYY-MM-DD').isBefore(this.selectedDates.from_date, 'dates')),\n        },\n        {\n          ...this.room,\n          identifier: null,\n          assigned_units_pool: null,\n          parent_room_identifier: this.room.identifier,\n          is_split: true,\n          roomtype: {\n            id: selectedUnit.roomtype_id,\n          },\n          rateplan: {\n            id: selectedUnit.rateplan_id || this.room.rateplan.id,\n          },\n          unit: { id: selectedUnit.unit_id },\n          from_date: this.selectedDates.from_date.format('YYYY-MM-DD'),\n          // to_date: this.selectedDates.to_date.format('YYYY-MM-DD'),\n          days: this.room.days.filter(r => moment(r.date, 'YYYY-MM-DD').isSameOrAfter(this.selectedDates.from_date, 'dates')),\n        },\n      ];\n      const booking = {\n        assign_units: true,\n        is_pms: true,\n        is_direct: this.booking.is_direct,\n        is_backend: true,\n        is_in_loyalty_mode: this.booking.is_in_loyalty_mode,\n        promo_key: this.booking.promo_key,\n        extras: this.booking.extras,\n        agent: this.booking.agent,\n        booking: {\n          from_date: this.booking.from_date,\n          to_date: this.booking.to_date,\n          remark: this.booking.remark,\n          booking_nbr: this.booking.booking_nbr,\n          property: this.booking.property,\n          booked_on: this.booking.booked_on,\n          source: this.booking.source,\n          rooms,\n          currency: this.booking.currency,\n          arrival: this.booking.arrival,\n          guest: this.booking.guest,\n        },\n        pickup_info: this.booking.pickup_info,\n      };\n      await this.bookingService.doReservation(booking);\n      this.closeModal.emit(null);\n    } catch (error) {\n      const err: Record<string, boolean> = {};\n      if (error instanceof ZodError) {\n        console.error(error);\n        error.issues.forEach(i => {\n          err[i.path[0]] = true;\n        });\n        this.errors = { ...err };\n      }\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  private updateSelectedUnit(params: Partial<SelectedUnit>) {\n    const merged: Partial<SelectedUnit> = { ...this.selectedUnit, ...params };\n    const roomTypesSource = calendar_data?.property?.roomtypes;\n    const mealPlanResult = checkMealPlan({\n      rateplan_id: this.room.rateplan.id.toString(),\n      roomTypeId: merged?.roomtype_id,\n      roomTypes: roomTypesSource,\n    });\n\n    const hasExplicitRateplanUpdate = Object.prototype.hasOwnProperty.call(params, 'rateplan_id');\n\n    if (Array.isArray(mealPlanResult)) {\n      this.mealPlanOptions = mealPlanResult;\n      if (!hasExplicitRateplanUpdate) {\n        delete merged.rateplan_id;\n      }\n    } else {\n      this.mealPlanOptions = null;\n      if (!hasExplicitRateplanUpdate) {\n        if (mealPlanResult) {\n          merged.rateplan_id = Number(mealPlanResult.value);\n        } else {\n          delete merged.rateplan_id;\n        }\n      }\n    }\n\n    this.selectedUnit = merged;\n  }\n\n  render() {\n    return (\n      <form\n        onSubmit={e => {\n          e.preventDefault();\n          this.doReservation();\n        }}\n        class=\"sheet-container\"\n      >\n        <ir-title class=\"px-1 sheet-header mb-0\" displayContext=\"sidebar\" onCloseSideBar={() => this.closeModal.emit()} label={`Split unit ${this.room?.unit['name']}`}></ir-title>\n        <section class=\"px-1 sheet-body\">\n          <div class=\"d-flex align-items-center\" style={{ gap: '0.5rem' }}>\n            <div>\n              <ir-date-view from_date={this.room.from_date} to_date={this.room.to_date} showDateDifference={false}></ir-date-view>\n            </div>\n            <p class=\"m-0 p-0\">\n              {this.room.rateplan.short_name} {this.room.rateplan.is_non_refundable ? locales.entries.Lcz_NonRefundable : ''}\n            </p>\n          </div>\n          <div class={'d-flex align-items-center mt-1'} style={{ gap: '0.5rem' }}>\n            <span>From:</span>\n            <ir-date-picker\n              data-testid=\"pickup_arrival_date\"\n              date={this.selectedDates?.from_date?.format('YYYY-MM-DD')}\n              maxDate={this.defaultDates?.to_date.format('YYYY-MM-DD')}\n              minDate={this.defaultDates?.from_date.format('YYYY-MM-DD')}\n              emitEmptyDate={true}\n              // aria-invalid={this.errors?.arrival_date && !this.pickupData.arrival_date ? 'true' : 'false'}\n              onDateChanged={evt => {\n                this.selectedDates = {\n                  ...this.selectedDates,\n                  from_date: evt.detail.start,\n                };\n              }}\n            >\n              <input\n                type=\"text\"\n                slot=\"trigger\"\n                value={this.selectedDates.from_date ? this.selectedDates.from_date.format('MMM DD, YYYY') : null}\n                class={`form-control input-sm  text-center`}\n                style={{ width: '120px' }}\n              ></input>\n            </ir-date-picker>\n            <ir-button isLoading={isRequestPending('/Check_Availability')} text=\"Check available units\" size=\"sm\" onClick={() => this.checkBookingAvailability()}></ir-button>\n          </div>\n          {this.errors?.roomtype_id && <p class=\"text-danger text-left mt-2\">Please select a room</p>}\n          <ul class=\"room-type-list mt-2\">\n            {this.roomTypes?.map(roomType => {\n              if (!roomType.is_available_to_book) {\n                return null;\n              }\n              const units = (() => {\n                const unitMap = new Map<number, string>();\n                for (const rateplan of roomType.rateplans) {\n                  for (const unit of rateplan.assignable_units) {\n                    if (unit.Is_Fully_Available) {\n                      unitMap.set(unit.pr_id, unit.name);\n                    }\n                  }\n                }\n\n                return Array.from(unitMap, ([id, name]) => ({ id, name }));\n              })();\n              return (\n                <Fragment>\n                  <li key={`roomTypeRow-${roomType.id}`} class={`room-type-row`}>\n                    <div class={'d-flex choice-row'}>\n                      <span class=\"text-left room-type-name\">{roomType.name}</span>\n                    </div>\n                  </li>\n                  {units.map((room, j) => {\n                    const row_style = j === roomType.physicalrooms.length - 1 ? 'pb-1' : '';\n                    const showMealPlanSelect = this.selectedUnit?.unit_id === room.id && Array.isArray(this.mealPlanOptions) && this.mealPlanOptions.length > 0;\n                    return (\n                      <li key={`physicalRoom-${room.id}-${j}`} class={`physical-room ${row_style}`}>\n                        <div class={'d-flex choice-row align-items-center'} style={{ gap: '0.5rem' }}>\n                          <ir-radio\n                            class=\"pl-1\"\n                            name=\"unit\"\n                            checked={this.selectedUnit?.unit_id === room.id}\n                            onCheckChange={() =>\n                              this.updateSelectedUnit({\n                                roomtype_id: roomType.id,\n                                unit_id: room.id,\n                              })\n                            }\n                            label={room.name}\n                          ></ir-radio>\n                          {showMealPlanSelect && (\n                            <ir-select\n                              firstOption=\"Select a new rateplan...\"\n                              error={this.errors?.rateplan_id && !this.selectedUnit?.rateplan_id}\n                              onSelectChange={e => {\n                                const value = e.detail === null || e.detail === undefined || e.detail === '' ? undefined : Number(e.detail);\n                                this.updateSelectedUnit({\n                                  rateplan_id: value,\n                                });\n                              }}\n                              data={this.mealPlanOptions.map(e => ({ ...e, text: e.text + ' | ' + e.value }))}\n                            ></ir-select>\n                            // <ir-dropdown\n                            //   onOptionChange={e => {\n                            //     this.updateSelectedUnit({\n                            //       rateplan_id: Number(e.detail.toString()),\n                            //     });\n                            //   }}\n                            //   style={{ '--ir-dropdown-menu-min-width': 'max-content' }}\n                            // >\n                            //   <button type=\"button\" class=\"btn btn-sm form-control pr-2 d-flex align-items-center\" style={{ minWidth: '200px' }} slot=\"trigger\">\n                            //     {this.selectedUnit?.rateplan_id ? this.mealPlanOptions.find(r => r.value === this.selectedUnit.rateplan_id.toString()).text : 'Choose a meal plan'}\n                            //   </button>\n                            //   {this.mealPlanOptions.map(o => (\n                            //     <ir-dropdown-item value={o.value}>\n                            //       <p class=\"m-0 p-0\">\n                            //         {o.text} {o.custom_text && <span class=\"m-0 p-0\">| {o.custom_text}</span>}\n                            //       </p>\n                            //     </ir-dropdown-item>\n                            //   ))}\n                            // </ir-dropdown>\n                          )}\n                        </div>\n                      </li>\n                    );\n                  })}\n                </Fragment>\n              );\n            })}\n          </ul>\n        </section>\n        <div class={'sheet-footer'}>\n          <ir-button text={locales.entries.Lcz_Cancel} btn_color=\"secondary\" class={'flex-fill'} onClickHandler={() => this.closeModal.emit(null)}></ir-button>\n          <ir-button isLoading={this.isLoading} text={locales.entries.Lcz_Confirm} btn_type=\"submit\" class=\"flex-fill\"></ir-button>\n        </div>\n      </form>\n    );\n  }\n}\n"]}