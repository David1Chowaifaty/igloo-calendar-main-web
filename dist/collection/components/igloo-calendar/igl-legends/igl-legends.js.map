{"version":3,"file":"igl-legends.js","sourceRoot":"","sources":["../../../../src/components/igloo-calendar/igl-legends/igl-legends.tsx"],"names":[],"mappings":"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","sourcesContent":["import { BookingColor } from '@/models/booking.dto';\nimport { PropertyService } from '@/services/property.service';\nimport calendar_data from '@/stores/calendar-data';\nimport locales from '@/stores/locales.store';\nimport { Component, Event, EventEmitter, Host, Prop, State, Watch, h } from '@stencil/core';\n\ntype SaveState = 'idle' | 'saving' | 'saved' | 'error';\n\n@Component({\n  tag: 'igl-legends',\n  styleUrl: 'igl-legends.css',\n  scoped: true,\n})\nexport class IglLegends {\n  @Event() optionEvent: EventEmitter<{ [key: string]: any }>;\n  @Prop() legendData: { [key: string]: any };\n  private propertyService = new PropertyService();\n\n  @State() bookingColors: BookingColor[] = [];\n  @State() saveState: SaveState = 'idle';\n  @State() saveError?: string;\n  @State() loadingIndex: number[] = [];\n\n  private saveTimeout?: number;\n\n  disconnectedCallback() {\n    if (this.saveTimeout) {\n      clearTimeout(this.saveTimeout);\n    }\n  }\n\n  @Watch('saveState')\n  handleSaveStateChange(newValue: SaveState) {\n    if (newValue === 'error' || newValue === 'idle') {\n      this.loadingIndex = [];\n    }\n  }\n\n  handleOptionEvent(key, data = '') {\n    this.optionEvent.emit({ key, data });\n  }\n\n  private syncCalendarExtra(colors: BookingColor[]) {\n    const calendarExtra = calendar_data.property.calendar_extra ?? {};\n    calendar_data.property.calendar_extra = {\n      ...calendarExtra,\n      booking_colors: colors.map(color => ({ ...color })),\n    };\n  }\n\n  private get propertyId(): number | null {\n    return calendar_data.property?.id ?? calendar_data.property.id ?? null;\n  }\n\n  private updateBookingColor(index: number, patch: Partial<BookingColor>) {\n    const bookingColors = calendar_data.property.calendar_extra?.booking_colors.map((color, idx) => (idx === index ? { ...color, ...patch } : color));\n    this.syncCalendarExtra(bookingColors);\n    if (this.saveState === 'saved') {\n      this.saveState = 'idle';\n    }\n  }\n\n  private async persistBookingColors() {\n    const propertyId = this.propertyId;\n    if (!propertyId) {\n      return;\n    }\n\n    if (this.saveState === 'saving') {\n      return;\n    }\n    this.saveState = 'saving';\n    this.saveError = undefined;\n\n    try {\n      await this.propertyService.setPropertyCalendarExtra({\n        property_id: propertyId,\n        value: JSON.stringify(calendar_data.property.calendar_extra),\n      });\n      this.saveState = 'saved';\n      if (this.saveTimeout) {\n        clearTimeout(this.saveTimeout);\n      }\n      this.saveTimeout = window.setTimeout(() => {\n        this.saveState = 'idle';\n        this.saveTimeout = undefined;\n      }, 2000);\n    } catch (error) {\n      this.saveState = 'error';\n      this.saveError = error instanceof Error ? error.message : String(error);\n    }\n  }\n\n  private handleNameInput(index: number, value: string) {\n    this.updateBookingColor(index, { name: value });\n  }\n\n  private handleBlur(index: number) {\n    this.persistBookingColors();\n    if (!this.loadingIndex.includes(index)) {\n      this.loadingIndex = [...this.loadingIndex, index];\n    }\n  }\n\n  private handleLoaderComplete(index: number) {\n    this.loadingIndex = this.loadingIndex.filter(currentIndex => currentIndex !== index);\n  }\n\n  render() {\n    return (\n      <Host class=\"legendContainer text-left\">\n        {/* <div class=\"stickyHeader pt-1 \">\n              <p class=\"legendHeader\">{locales.entries.Lcz_Legend}</p>\n              <div class=\"legendCloseBtn\" onClick={() => this.handleOptionEvent('closeSideMenu')}>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" height={18} width={18}>\n                  <path\n                    fill=\"#6b6f82\"\n                    d=\"M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z\"\n                  />\n                </svg>\n              </div>\n              <hr />\n            </div> */}\n        <div class=\"fd-legend__header\">\n          <h2 class=\"fd-legend__title\" id=\"legend-title\">\n            {locales.entries.Lcz_Legend}\n          </h2>\n          <ir-custom-button size=\"medium\" onClickHandler={() => this.handleOptionEvent('closeSideMenu')} appearance=\"plain\" variant=\"neutral\">\n            <wa-icon name=\"xmark\" variant=\"solid\" label=\"Close\" aria-label=\"Close\" role=\"img\"></wa-icon>\n          </ir-custom-button>\n        </div>\n        <section class=\"fd-legend__body\">\n          <div>\n            <table style={{ width: '100%' }}>\n              {(() => {\n                const legendInfo = this.legendData.find(l => l.id === '14');\n                return (\n                  <tr>\n                    <td>\n                      <div class={`legend_${legendInfo.design}`} style={{ '--ir-skew-background': legendInfo.color }}></div>\n                    </td>\n                    <td>\n                      <div class={'d-flex align-items-center'} style={{ gap: '0.5rem' }}>\n                        <span class=\"font-small-3\">{legendInfo.name}</span>\n                        <ir-new-badge></ir-new-badge>\n                      </div>\n                    </td>\n                  </tr>\n                );\n              })()}\n\n              {this.legendData.map(legendInfo => {\n                if (['2', '3', '14'].includes(legendInfo.id)) {\n                  return null;\n                }\n                const stripeColor = calendar_data.colorsForegrounds[legendInfo?.color];\n                return (\n                  <tr key={`legend_${legendInfo.id}`} class=\"legendRow \">\n                    <td>\n                      {legendInfo.design === 'broom' ? (\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"12\" width=\"13.5\" viewBox=\"0 0 576 512\" style={{ display: 'block' }}>\n                          <path\n                            fill=\"black\"\n                            d=\"M566.6 54.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192-34.7-34.7c-4.2-4.2-10-6.6-16-6.6c-12.5 0-22.6 10.1-22.6 22.6l0 29.1L364.3 320l29.1 0c12.5 0 22.6-10.1 22.6-22.6c0-6-2.4-11.8-6.6-16l-34.7-34.7 192-192zM341.1 353.4L222.6 234.9c-42.7-3.7-85.2 11.7-115.8 42.3l-8 8C76.5 307.5 64 337.7 64 369.2c0 6.8 7.1 11.2 13.2 8.2l51.1-25.5c5-2.5 9.5 4.1 5.4 7.9L7.3 473.4C2.7 477.6 0 483.6 0 489.9C0 502.1 9.9 512 22.1 512l173.3 0c38.8 0 75.9-15.4 103.4-42.8c30.6-30.6 45.9-73.1 42.3-115.8z\"\n                          />\n                        </svg>\n                      ) : legendInfo.design === 'check' ? (\n                        <svg height={14} width={14} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 640 640\">\n                          <path\n                            fill=\"green\"\n                            d=\"M530.8 134.1C545.1 144.5 548.3 164.5 537.9 178.8L281.9 530.8C276.4 538.4 267.9 543.1 258.5 543.9C249.1 544.7 240 541.2 233.4 534.6L105.4 406.6C92.9 394.1 92.9 373.8 105.4 361.3C117.9 348.8 138.2 348.8 150.7 361.3L252.2 462.8L486.2 141.1C496.6 126.8 516.6 123.6 530.9 134z\"\n                          />\n                        </svg>\n                      ) : (\n                        <div\n                          class={`legend_${legendInfo.design} ${legendInfo.id === '1' ? 'in-house' : ''} ${\n                            ['1', '7'].includes(legendInfo.id.toString()) ? `striped ${legendInfo.id.toString() === '1' ? 'vertical' : ''}` : ''\n                          }`}\n                          style={{ '--ir-skew-background': legendInfo.color, '--ir-event-bg-stripe-color': stripeColor?.stripe, 'backgroundColor': legendInfo.color }}\n                        >\n                          {legendInfo.id === '1' && '5'}\n                        </div>\n                      )}\n                    </td>\n                    <td>\n                      <div class={'d-flex align-items-center'} style={{ gap: '0.5rem' }}>\n                        <span class=\"font-small-3\">\n                          {legendInfo.name} {legendInfo.id === '1' && '(unit cell in blue)'}\n                        </span>\n                      </div>\n                    </td>\n                  </tr>\n                );\n              })}\n              <tr>\n                <td colSpan={2}>\n                  <wa-divider></wa-divider>\n                </td>\n              </tr>\n              <tr>\n                <th colSpan={2} class=\"\" style={{ paddingBottom: '0.5rem' }}>\n                  <div class=\"d-flex align-items-center\" style={{ gap: '0.5rem' }}>\n                    <span>Default colors</span>\n                  </div>\n                </th>\n              </tr>\n              {this.legendData.map(legendInfo => {\n                if (!['2', '3'].includes(legendInfo.id)) {\n                  return null;\n                }\n                const stripeColor = calendar_data.colorsForegrounds[legendInfo?.color];\n                return (\n                  <tr key={`legend_${legendInfo.id}`} data-id={legendInfo.id} class=\"legendRow \">\n                    <td>\n                      {legendInfo.design === 'broom' ? (\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"12\" width=\"13.5\" viewBox=\"0 0 576 512\" style={{ display: 'block' }}>\n                          <path\n                            fill=\"black\"\n                            d=\"M566.6 54.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192-34.7-34.7c-4.2-4.2-10-6.6-16-6.6c-12.5 0-22.6 10.1-22.6 22.6l0 29.1L364.3 320l29.1 0c12.5 0 22.6-10.1 22.6-22.6c0-6-2.4-11.8-6.6-16l-34.7-34.7 192-192zM341.1 353.4L222.6 234.9c-42.7-3.7-85.2 11.7-115.8 42.3l-8 8C76.5 307.5 64 337.7 64 369.2c0 6.8 7.1 11.2 13.2 8.2l51.1-25.5c5-2.5 9.5 4.1 5.4 7.9L7.3 473.4C2.7 477.6 0 483.6 0 489.9C0 502.1 9.9 512 22.1 512l173.3 0c38.8 0 75.9-15.4 103.4-42.8c30.6-30.6 45.9-73.1 42.3-115.8z\"\n                          />\n                        </svg>\n                      ) : legendInfo.design === 'check' ? (\n                        <svg height={14} width={14} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 640 640\">\n                          <path\n                            fill=\"green\"\n                            d=\"M530.8 134.1C545.1 144.5 548.3 164.5 537.9 178.8L281.9 530.8C276.4 538.4 267.9 543.1 258.5 543.9C249.1 544.7 240 541.2 233.4 534.6L105.4 406.6C92.9 394.1 92.9 373.8 105.4 361.3C117.9 348.8 138.2 348.8 150.7 361.3L252.2 462.8L486.2 141.1C496.6 126.8 516.6 123.6 530.9 134z\"\n                          />\n                        </svg>\n                      ) : (\n                        <div\n                          class={`legend_${legendInfo.design} ${legendInfo.id === '3' ? 'pending' : ''}  ${\n                            ['7'].includes(legendInfo.id.toString()) ? `striped ${legendInfo.id.toString() === '1' ? 'vertical' : ''}` : ''\n                          }`}\n                          style={{ '--ir-skew-background': legendInfo.color, '--ir-event-bg-stripe-color': stripeColor?.stripe, 'backgroundColor': legendInfo.color }}\n                        ></div>\n                      )}\n                    </td>\n                    <td>\n                      <div class={'d-flex align-items-center'} style={{ gap: '0.5rem' }}>\n                        <span class=\"font-small-3\">{legendInfo.name}</span>\n                        {legendInfo.id === '14' && <ir-new-badge></ir-new-badge>}\n                      </div>\n                    </td>\n                  </tr>\n                );\n              })}\n              <tr>\n                <td colSpan={2}>\n                  <wa-divider></wa-divider>\n                </td>\n              </tr>\n              <tr>\n                <th colSpan={2} style={{ paddingBottom: '0.5rem' }}>\n                  <div class=\"d-flex align-items-center\" style={{ gap: '0.5rem' }}>\n                    <span>Use your own colors</span>\n                    <ir-new-badge></ir-new-badge>\n                  </div>\n                </th>\n              </tr>\n              {calendar_data.property.calendar_extra?.booking_colors.map((legendInfo, index) => {\n                const previewClass = `legend_${legendInfo.design}`;\n                return (\n                  <tr key={`legend_${index}`} class=\"legendRow \">\n                    <td>\n                      <div class={previewClass} style={{ backgroundColor: legendInfo.color }}></div>\n                    </td>\n                    <td class=\"legendDetailsCell\">\n                      <div class=\"d-flex align-items-center\" style={{ gap: '0.5rem' }}>\n                        <ir-input-text\n                          class=\"legendTextarea border-0 m-0 p-0\"\n                          value={legendInfo.name}\n                          inputContainerStyle={{ margin: '0' }}\n                          placeholder=\"Reason for this color\"\n                          onTextChange={event => this.handleNameInput(index, event.detail)}\n                          onInputBlur={() => this.handleBlur(index)}\n                        ></ir-input-text>\n                        {this.loadingIndex.includes(index) && (this.saveState === 'saving' || this.saveState === 'saved') ? (\n                          <ir-success-loader onLoaderComplete={() => this.handleLoaderComplete(index)}></ir-success-loader>\n                        ) : null}\n                      </div>\n                    </td>\n                  </tr>\n                );\n              })}\n            </table>\n          </div>\n          <wa-divider></wa-divider>\n          <div>\n            <div class=\"legendCalendar\">\n              <div class=\"legendRow align-items-center\">\n                <div class=\"legendCal br-t br-s br-bt\">\n                  <strong>MAR 2022</strong>\n                </div>\n                <div class=\"highphenLegend\">{locales.entries.Lcz_MonthAndYear}</div>\n              </div>\n              <div class=\"legendRow\">\n                <div class=\"legendCal headerCell align-items-center br-s\">\n                  {/* <span class=\"badge badge-info  badge-pill\">3</span> */}\n                  <wa-badge pill>3</wa-badge>\n                </div>\n                <div class=\"highphenLegend\">\n                  <div>{locales.entries.Lcz_UnassignedUnits}</div>\n                </div>\n              </div>\n              <div class=\"legendRow\">\n                <div class=\"legendCal dayTitle br-s\">Fri 18</div>\n                <div class=\"highphenLegend\">{locales.entries.Lcz_Date}</div>\n              </div>\n              <div class=\"legendRow\">\n                <div class=\"legendCal br-s br-bt dayCapacityPercent\">15%</div>\n                <div class=\"highphenLegend\">{locales.entries.Lcz_Occupancy}</div>\n              </div>\n              <div class=\"legendRow\">\n                <div class=\"legendCal br-s br-bt  font-weight-bold total-availability\">20</div>\n                <div class=\"highphenLegend\">{locales.entries.Lcz_TotalAvailability}</div>\n              </div>\n\n              {/* <div class=\"legendRow align-items-center\">\n                  <div class=\"legendCal br-s br-bt font-small-2\">15</div>\n                  <div class=\"highphenLegend\">\n                    <div>{locales.entries.Lcz_OfflineAvailability}</div>\n                  </div>\n                </div> */}\n            </div>\n          </div>\n        </section>\n      </Host>\n    );\n  }\n}\n"]}