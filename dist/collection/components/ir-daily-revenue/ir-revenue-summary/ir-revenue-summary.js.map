{"version":3,"file":"ir-revenue-summary.js","sourceRoot":"","sources":["../../../../src/components/ir-daily-revenue/ir-revenue-summary/ir-revenue-summary.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,MAAM,eAAe,CAAC;AAEzD,OAAO,EAAE,YAAY,EAAE,MAAM,eAAe,CAAC;AAC7C,OAAO,aAAa,MAAM,wBAAwB,CAAC;AAQnD,MAAM,OAAO,gBAAgB;IAL7B;QAMU,oBAAe,GAAwB,IAAI,GAAG,EAAE,CAAC;QACjD,gCAA2B,GAAwB,IAAI,GAAG,EAAE,CAAC;KA8FtE;IA3FS,sBAAsB,CAAC,eAAoC;QACjE,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,eAAe,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,GAAG,EAAE,EAAE;YACrC,IAAI,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,KAAK,EAAE,CAAC;gBAChC,KAAK,IAAI,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC;YAC3C,CAAC;QACH,CAAC,CAAC,CAAC;QACH,OAAO,KAAK,CAAC;IACf,CAAC;IAED,uEAAuE;IACvE,sHAAsH;IACtH,IAAI;IAEI,qBAAqB,CAAC,eAAoC;QAChE,MAAM,aAAa,GAAG,KAAK,CAAC;QAC5B,MAAM,QAAQ,GAAQ,EAAE,CAAC;QACzB,eAAe,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,GAAG,EAAE,EAAE;YACrC,IAAI,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,aAAa,EAAE,CAAC;gBACxC,QAAQ,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,CAAC;YAC1B,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,OAAO,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,CAAC;IAC5C,CAAC;IAEO,mBAAmB,CAAC,QAAwB;QAClD,OAAO,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;IACpD,CAAC;IAEO,YAAY,CAAC,IAAY,EAAE,IAAY;QAC7C,IAAI,IAAI,KAAK,IAAI,EAAE,CAAC;YAClB,OAAO,SAAS,CAAC;QACnB,CAAC;QACD,OAAO,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,kBAAkB,CAAC;IAC7D,CAAC;IACD,MAAM;QACJ,MAAM,aAAa,GAAG,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QACxE,MAAM,YAAY,GAAG,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QACtE,MAAM,WAAW,GAAG,aAAa,GAAG,YAAY,CAAC;QAEjD,MAAM,yBAAyB,GAAG,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC;QAChG,MAAM,wBAAwB,GAAG,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC;QAC9F,MAAM,uBAAuB,GAAG,yBAAyB,GAAG,wBAAwB,CAAC;QAErF,OAAO,CACL,EAAC,IAAI;YACH,4DAAK,KAAK,EAAC,4BAA4B;gBACrC,sEAAe,IAAI,EAAE,gBAAgB,EAAE,KAAK,EAAE,YAAY,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,EAAE,aAAa,CAAC,EAAE,SAAS,EAAC,UAAU;oBAC5H,0DAAG,KAAK,EAAC,4BAA4B,EAAC,IAAI,EAAC,OAAO,IAC/C,YAAY,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,EAAE,aAAa,CAAC,CACzD,CACU;gBAChB,sEAAe,KAAK,EAAC,MAAM,EAAC,KAAK,EAAC,cAAc,EAAC,IAAI,EAAE,kBAAkB,EAAE,SAAS,EAAC,SAAS;oBAC5F,0DAAG,KAAK,EAAC,0BAA0B,EAAC,IAAI,EAAC,OAAO,IAC7C,YAAY,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,EAAE,YAAY,CAAC,CACxD,CACU,CACZ;YACN,4DAAK,KAAK,EAAC,4BAA4B;gBACrC,sEACE,IAAI,EAAE,gBAAgB,EACtB,KAAK,EAAE,YAAY,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,EAAE,aAAa,CAAC,EACjE,SAAS,EAAC,UAAU,EACpB,QAAQ,EAAE,iBAAiB,YAAY,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,EAAE,yBAAyB,CAAC,EAAE;oBAEnG,0DAAG,KAAK,EAAC,4BAA4B,EAAC,IAAI,EAAC,OAAO,IAC/C,YAAY,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,EAAE,aAAa,CAAC,CACzD,CACU;gBAChB,sEACE,KAAK,EAAC,MAAM,EACZ,KAAK,EAAC,cAAc,EACpB,IAAI,EAAE,kBAAkB,EACxB,SAAS,EAAC,SAAS,EACnB,QAAQ,EAAE,iBAAiB,YAAY,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,EAAE,wBAAwB,CAAC,EAAE;oBAElG,0DAAG,KAAK,EAAC,0BAA0B,EAAC,IAAI,EAAC,OAAO,IAC7C,YAAY,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,EAAE,YAAY,CAAC,CACxD,CACU;gBAChB,sEACE,IAAI,EAAE,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,uBAAuB,CAAC,EAC7D,KAAK,EAAE,YAAY,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,EAAE,WAAW,CAAC,EAC/D,SAAS,EAAC,YAAY,EACtB,QAAQ,EAAE,iBAAiB,YAAY,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,EAAE,uBAAuB,CAAC,EAAE,GAClF,CACb,CACD,CACR,CAAC;IACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import { Component, Host, Prop, h } from '@stencil/core';\nimport { FolioPayment, GroupedFolioPayment } from '../types';\nimport { formatAmount } from '@/utils/utils';\nimport calendar_data from '@/stores/calendar-data';\nimport { PaymentEntries } from '@/components/ir-booking-details/types';\n\n@Component({\n  tag: 'ir-revenue-summary',\n  styleUrl: 'ir-revenue-summary.css',\n  scoped: true,\n})\nexport class IrRevenueSummary {\n  @Prop() groupedPayments: GroupedFolioPayment = new Map();\n  @Prop() previousDateGroupedPayments: GroupedFolioPayment = new Map();\n  @Prop() paymentEntries: PaymentEntries;\n\n  private calculateTotalPayments(groupedPayments: GroupedFolioPayment) {\n    let total = 0;\n    groupedPayments.forEach((value, key) => {\n      if (key.split('_')[0] === '001') {\n        total += this.calculateTotalValue(value);\n      }\n    });\n    return total;\n  }\n\n  // private calculateTotalAmount(groupedPayments: GroupedFolioPayment) {\n  //   return Array.from(groupedPayments.entries()).reduce((prev, curr) => prev + this.calculateTotalValue(curr[1]), 0);\n  // }\n\n  private calculateTotalRefunds(groupedPayments: GroupedFolioPayment) {\n    const refundKeyCode = '010';\n    const payments: any = [];\n    groupedPayments.forEach((value, key) => {\n      if (key.split('_')[0] === refundKeyCode) {\n        payments.push(...value);\n      }\n    });\n\n    return this.calculateTotalValue(payments);\n  }\n\n  private calculateTotalValue(payments: FolioPayment[]) {\n    return payments.reduce((p, c) => p + c.amount, 0);\n  }\n\n  private getTrendIcon(val1: number, val2: number) {\n    if (val1 === val2) {\n      return undefined;\n    }\n    return val1 > val2 ? 'arrow-trend-up' : 'arrow-trend-down';\n  }\n  render() {\n    const paymentsTotal = this.calculateTotalPayments(this.groupedPayments);\n    const refundAmount = this.calculateTotalRefunds(this.groupedPayments);\n    const totalAmount = paymentsTotal - refundAmount;\n\n    const previousDatePaymentsTotal = this.calculateTotalPayments(this.previousDateGroupedPayments);\n    const previousDateRefundAmount = this.calculateTotalRefunds(this.previousDateGroupedPayments);\n    const previousDateTotalAmount = previousDatePaymentsTotal - previousDateRefundAmount;\n\n    return (\n      <Host>\n        <div class=\"ir-revenue-summary__mobile\">\n          <ir-stats-card icon={'arrow-trend-up'} value={formatAmount(calendar_data.currency.symbol, paymentsTotal)} cardTitle=\"Payments\">\n            <p class=\"stats-card__payments-value\" slot=\"value\">\n              {formatAmount(calendar_data.currency.symbol, paymentsTotal)}\n            </p>\n          </ir-stats-card>\n          <ir-stats-card value=\"123$\" class=\"refunds-card\" icon={'arrow-trend-down'} cardTitle=\"Refunds\">\n            <p class=\"stats-card__refund-value\" slot=\"value\">\n              {formatAmount(calendar_data.currency.symbol, refundAmount)}\n            </p>\n          </ir-stats-card>\n        </div>\n        <div class=\"ir-revenue-summary__tablet\">\n          <ir-stats-card\n            icon={'arrow-trend-up'}\n            value={formatAmount(calendar_data.currency.symbol, paymentsTotal)}\n            cardTitle=\"Payments\"\n            subtitle={`Previous day  ${formatAmount(calendar_data.currency.symbol, previousDatePaymentsTotal)}`}\n          >\n            <p class=\"stats-card__payments-value\" slot=\"value\">\n              {formatAmount(calendar_data.currency.symbol, paymentsTotal)}\n            </p>\n          </ir-stats-card>\n          <ir-stats-card\n            value=\"123$\"\n            class=\"refunds-card\"\n            icon={'arrow-trend-down'}\n            cardTitle=\"Refunds\"\n            subtitle={`Previous day  ${formatAmount(calendar_data.currency.symbol, previousDateRefundAmount)}`}\n          >\n            <p class=\"stats-card__refund-value\" slot=\"value\">\n              {formatAmount(calendar_data.currency.symbol, refundAmount)}\n            </p>\n          </ir-stats-card>\n          <ir-stats-card\n            icon={this.getTrendIcon(totalAmount, previousDateTotalAmount)}\n            value={formatAmount(calendar_data.currency.symbol, totalAmount)}\n            cardTitle=\"Difference\"\n            subtitle={`Previous day  ${formatAmount(calendar_data.currency.symbol, previousDateTotalAmount)}`}\n          ></ir-stats-card>\n        </div>\n      </Host>\n    );\n  }\n}\n"]}