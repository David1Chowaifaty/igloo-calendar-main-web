{"version":3,"file":"ir-sales-by-channel-filters.js","sourceRoot":"","sources":["../../../../src/components/ir-sales-by-channel/ir-sales-by-channel-filters/ir-sales-by-channel-filters.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Event, EventEmitter, h, Prop, State } from '@stencil/core';\nimport moment from 'moment';\nimport { ChannelSaleFilter } from '../types';\nimport { AllowedProperties } from '@/services/property.service';\n\n@Component({\n  tag: 'ir-sales-by-channel-filters',\n  styleUrl: 'ir-sales-by-channel-filters.css',\n  scoped: true,\n})\nexport class IrSalesByChannelFilters {\n  @Prop() isLoading: boolean;\n  @Prop() baseFilters: ChannelSaleFilter;\n  @Prop() allowedProperties: AllowedProperties;\n\n  @State() filters: ChannelSaleFilter;\n  @State() window: number;\n\n  @Event() applyFilters: EventEmitter<ChannelSaleFilter>;\n\n  componentWillLoad() {\n    this.filters = { ...this.baseFilters };\n    this.window = this.baseFilters.WINDOW;\n  }\n\n  private updateFilter(params: Partial<ChannelSaleFilter>) {\n    this.filters = { ...this.filters, ...params };\n  }\n\n  render() {\n    console.log(this.filters);\n    return (\n      <ir-filters-panel\n        isApplyLoading={this.isLoading}\n        onIrFilterApply={() => {\n          this.applyFilters.emit(this.filters);\n        }}\n        onIrFilterReset={() => {\n          this.filters = { ...this.baseFilters };\n          this.applyFilters.emit(this.filters);\n        }}\n      >\n        <fieldset class=\"pt-1 filter-group\">\n          <label htmlFor=\"rooms\" class=\"m-0 px-0\" style={{ paddingBottom: '0.25rem' }}>\n            Rooms\n          </label>\n          <ir-select\n            selectedValue={this.filters?.BOOK_CASE}\n            selectId=\"rooms\"\n            showFirstOption={false}\n            onSelectChange={e =>\n              this.updateFilter({\n                BOOK_CASE: e.detail,\n              })\n            }\n            data={[\n              { text: 'Booked', value: '001' },\n              { text: 'Stayed', value: '002' },\n            ]}\n          ></ir-select>\n        </fieldset>\n        {this.allowedProperties.length > 1 && (\n          <fieldset class=\"filter-group\">\n            <label htmlFor=\"rooms\" class=\"m-0 px-0\" style={{ paddingBottom: '0.25rem' }}>\n              Properties\n            </label>\n            <ir-select\n              selectedValue={this.filters?.BOOK_CASE}\n              selectId=\"rooms\"\n              showFirstOption={false}\n              onSelectChange={e => {\n                const value = e.detail;\n                if (value === 'all') {\n                  this.updateFilter({\n                    LIST_AC_ID: this.allowedProperties.map(p => p.id),\n                  });\n                } else\n                  this.updateFilter({\n                    LIST_AC_ID: this.allowedProperties.filter(e => e.id === Number(value)).map(p => p.id),\n                  });\n              }}\n              data={[\n                { text: 'All', value: 'all' },\n                ...this.allowedProperties.map(p => ({\n                  text: p.name,\n                  value: p.id.toString(),\n                })),\n              ]}\n            ></ir-select>\n          </fieldset>\n        )}\n        <fieldset class=\"filter-group\">\n          <label htmlFor=\"period\" class=\"px-0 m-0\" style={{ paddingBottom: '0.25rem' }}>\n            Selected period\n          </label>\n          <div class=\"d-flex flex-column date-filter-group\" style={{ gap: '0.5rem' }}>\n            <ir-select\n              selectedValue={this.window}\n              onSelectChange={e => {\n                const dateDiff = Number(e.detail);\n                const today = moment();\n                this.updateFilter({\n                  WINDOW: dateDiff,\n                  TO_DATE: today.format('YYYY-MM-DD'),\n                  FROM_DATE: today.add(-dateDiff, 'days').format('YYYY-MM-DD'),\n                });\n                this.window = e.detail;\n              }}\n              selectId=\"period\"\n              // showFirstOption={false}\n              firstOption=\"...\"\n              data={[\n                { text: 'For the past 7 days', value: '7' },\n                { text: 'For the past 14 days', value: '14' },\n                { text: 'For the past 30 days', value: '30' },\n                { text: 'For the past 60 days', value: '60' },\n                { text: 'For the past 90 days', value: '90' },\n                { text: 'For the past 365 days', value: '365' },\n              ]}\n            ></ir-select>\n            <p class=\"m-0 p-0 text-center\">Or</p>\n            <ir-range-picker\n              onDateRangeChanged={e => {\n                e.stopImmediatePropagation();\n                e.stopPropagation();\n                const { fromDate, toDate, wasFocused } = e.detail;\n                this.updateFilter({\n                  FROM_DATE: fromDate.format('YYYY-MM-DD'),\n                  TO_DATE: toDate.format('YYYY-MM-DD'),\n                });\n                if (wasFocused) this.window = null;\n                // this.dates = { from: fromDate, to: toDate };\n              }}\n              fromDate={moment(this.filters.FROM_DATE, 'YYYY-MM-DD')}\n              toDate={moment(this.filters.TO_DATE, 'YYYY-MM-DD')}\n              maxDate={moment().format('YYYY-MM-DD')}\n              withOverlay={false}\n            ></ir-range-picker>\n          </div>\n        </fieldset>\n        <div class=\"d-flex align-items-center mt-1 mb-2 compare-year-toggle\" style={{ gap: '0.5rem' }}>\n          <label htmlFor=\"compare-prev-year\" style={{ paddingBottom: '0.25rem' }}>\n            Compare with previous year\n          </label>\n          <ir-checkbox\n            checked={this.filters?.include_previous_year}\n            checkboxId=\"compare-prev-year\"\n            onCheckChange={e => {\n              e.stopImmediatePropagation();\n              e.stopPropagation();\n              this.updateFilter({ include_previous_year: e.detail });\n            }}\n          ></ir-checkbox>\n        </div>\n      </ir-filters-panel>\n    );\n  }\n}\n"]}