{"version":3,"file":"ir-invoice.js","sourceRoot":"","sources":["../../../src/components/ir-invoice/ir-invoice.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Booking } from '@/models/booking.dto';\nimport { Component, Event, EventEmitter, Host, Method, Prop, State, h } from '@stencil/core';\nimport { v4 } from 'uuid';\nimport { BookingInvoiceInfo, ViewMode } from './types';\n\n@Component({\n  tag: 'ir-invoice',\n  styleUrls: ['ir-invoice.css'],\n  scoped: true,\n})\nexport class IrInvoice {\n  /**\n   * Whether the invoice drawer is open.\n   *\n   * This prop is mutable and reflected to the host element,\n   * allowing parent components to control visibility via markup\n   * or via the public `openDrawer()` / `closeDrawer()` methods.\n   */\n  @Prop({ mutable: true, reflect: true }) open: boolean;\n\n  /**\n   * The booking object for which the invoice is being generated.\n   * Should contain room, guest, and pricing information.\n   */\n  @Prop() booking: Booking;\n\n  /**\n   * Specifies what the invoice is for.\n   * - `\"room\"`: invoice for a specific room\n   * - `\"booking\"`: invoice for the entire booking\n   */\n  @Prop() for: 'room' | 'booking' = 'booking';\n\n  /**\n   * The identifier of the room for which the invoice is being generated.\n   * Used when invoicing at room level instead of booking level.\n   */\n  @Prop() roomIdentifier: string;\n\n  /**\n   * When `true`, automatically triggers `window.print()` after an invoice is created.\n   * Useful for setups where the invoice should immediately be sent to a printer.\n   */\n  @Prop() autoPrint: boolean = false;\n  /**\n   * Additional invoice-related metadata used when creating\n   * or rendering the invoice.\n   *\n   * This object can include payment details, discounts,\n   * tax information, or any context needed by the invoice form.\n   *\n   * @type {BookingInvoiceInfo}\n   */\n  @Prop() invoiceInfo: BookingInvoiceInfo;\n\n  /**\n   * Emitted when the invoice drawer is opened.\n   *\n   * Fired when `openDrawer()` is called and the component\n   * transitions into the open state.\n   */\n  @Event() invoiceOpen: EventEmitter<void>;\n\n  /**\n   * Emitted when the invoice drawer is closed.\n   *\n   * Fired when `closeDrawer()` is called, including when the\n   * underlying drawer emits `onDrawerHide`.\n   */\n  @Event() invoiceClose: EventEmitter<void>;\n\n  /**\n   * Opens the invoice drawer.\n   *\n   * This method sets the `open` property to `true`, making the drawer visible.\n   * It can be called programmatically by parent components.\n   *\n   * Also emits the `invoiceOpen` event.\n   *\n   * @returns {Promise<void>} Resolves once the drawer state is updated.\n   */\n  @Method()\n  async openDrawer(): Promise<void> {\n    this.open = true;\n    this.invoiceOpen.emit();\n  }\n\n  /**\n   * Closes the invoice drawer.\n   *\n   * This method sets the `open` property to `false`, hiding the drawer.\n   * Parent components can call this to close the drawer programmatically,\n   * and it is also used internally when the drawer emits `onDrawerHide`.\n   *\n   * Also emits the `invoiceClose` event.\n   *\n   * @returns {Promise<void>} Resolves once the drawer state is updated.\n   */\n  @Method()\n  async closeDrawer(): Promise<void> {\n    this.open = false;\n    this.invoiceClose.emit();\n  }\n\n  @State() viewMode: ViewMode = 'invoice';\n  @State() isLoading: boolean;\n  private _id = `invoice-form__${v4()}`;\n\n  render() {\n    return (\n      <Host>\n        <ir-drawer\n          style={{\n            '--ir-drawer-width': '40rem',\n            '--ir-drawer-background-color': 'var(--wa-color-surface-default)',\n            '--ir-drawer-padding-left': 'var(--spacing)',\n            '--ir-drawer-padding-right': 'var(--spacing)',\n            '--ir-drawer-padding-top': 'var(--spacing)',\n            '--ir-drawer-padding-bottom': 'var(--spacing)',\n          }}\n          label=\"Invoice\"\n          open={this.open}\n          onDrawerHide={e => {\n            e.stopImmediatePropagation();\n            e.stopPropagation();\n            this.closeDrawer();\n          }}\n        >\n          <div class=\"d-flex align-items-center\" slot=\"header-actions\">\n            <wa-switch\n              onchange={e => {\n                if ((e.target as any).checked) {\n                  this.viewMode = 'proforma';\n                } else {\n                  this.viewMode = 'invoice';\n                }\n              }}\n            >\n              Pro-forma\n            </wa-switch>\n          </div>\n\n          {this.open && (\n            <ir-invoice-form\n              viewMode={this.viewMode}\n              for={this.for}\n              roomIdentifier={this.roomIdentifier}\n              booking={this.booking}\n              autoPrint={this.autoPrint}\n              formId={this._id}\n              invoiceInfo={this.invoiceInfo}\n              onLoadingChange={e => (this.isLoading = e.detail)}\n            ></ir-invoice-form>\n          )}\n          <div slot=\"footer\" class=\"ir__drawer-footer\">\n            <ir-custom-button\n              size=\"medium\"\n              appearance=\"filled\"\n              class=\"w-100 flex-fill\"\n              variant=\"neutral\"\n              onClickHandler={() => {\n                this.closeDrawer();\n              }}\n            >\n              Cancel\n            </ir-custom-button>\n            {/* <ir-custom-button value=\"pro-forma\" type=\"submit\" size=\"medium\" class=\"w-100 flex-fill\" appearance=\"outlined\" variant=\"neutral\" form={this._id}>\n              Pro-forma invoice\n            </ir-custom-button> */}\n            <ir-custom-button loading={this.isLoading} value=\"invoice\" type=\"submit\" form={this._id} class=\"w-100 flex-fill\" size=\"medium\" variant=\"brand\">\n              Confirm\n            </ir-custom-button>\n          </div>\n        </ir-drawer>\n      </Host>\n    );\n  }\n}\n"]}