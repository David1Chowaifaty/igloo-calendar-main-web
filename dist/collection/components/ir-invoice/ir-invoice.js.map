{"version":3,"file":"ir-invoice.js","sourceRoot":"","sources":["../../../src/components/ir-invoice/ir-invoice.tsx"],"names":[],"mappings":"AACA,OAAO,EAAE,SAAS,EAAE,KAAK,EAAgB,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,EAAE,MAAM,eAAe,CAAC;AACtF,OAAO,EAAE,EAAE,EAAE,MAAM,MAAM,CAAC;AAO1B,MAAM,OAAO,SAAS;IACpB;;;;;;OAMG;IACqC,IAAI,CAAU;IAEtD;;;OAGG;IACK,OAAO,CAAU;IAEzB;;;;OAIG;IACK,IAAI,GAAiC,QAAQ,CAAC;IAEtD;;;;OAIG;IACK,GAAG,GAAuB,SAAS,CAAC;IAE5C;;;OAGG;IACK,cAAc,CAAS;IAE/B;;;OAGG;IACK,SAAS,GAAY,KAAK,CAAC;IAEnC;;;;;OAKG;IACM,WAAW,CAAqB;IAEzC;;;;;OAKG;IACM,YAAY,CAAqB;IAE1C;;;;;;;;;OASG;IAEH,KAAK,CAAC,UAAU;QACd,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;IAC1B,CAAC;IAED;;;;;;;;;;OAUG;IAEH,KAAK,CAAC,WAAW;QACf,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;QAClB,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;IAC3B,CAAC;IACO,GAAG,GAAG,iBAAiB,EAAE,EAAE,EAAE,CAAC;IACtC,MAAM;QACJ,OAAO,CACL,EAAC,IAAI;YACH,kEACE,KAAK,EAAC,SAAS,EACf,IAAI,EAAE,IAAI,CAAC,IAAI,EACf,YAAY,EAAE,CAAC,CAAC,EAAE;oBAChB,CAAC,CAAC,wBAAwB,EAAE,CAAC;oBAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;oBACpB,IAAI,CAAC,WAAW,EAAE,CAAC;gBACrB,CAAC;gBAEA,IAAI,CAAC,IAAI,IAAI,CACZ,wEACE,GAAG,EAAE,IAAI,CAAC,GAAG,EACb,cAAc,EAAE,IAAI,CAAC,cAAc,EACnC,OAAO,EAAE,IAAI,CAAC,OAAO,EACrB,SAAS,EAAE,IAAI,CAAC,SAAS,EACzB,IAAI,EAAE,IAAI,CAAC,IAAI,EACf,MAAM,EAAE,IAAI,CAAC,GAAG,GACC,CACpB;gBACD,4DAAK,IAAI,EAAC,QAAQ,EAAC,KAAK,EAAC,mBAAmB;oBAC1C,yEACE,IAAI,EAAC,QAAQ,EACb,UAAU,EAAC,QAAQ,EACnB,KAAK,EAAC,iBAAiB,EACvB,OAAO,EAAC,SAAS,EACjB,cAAc,EAAE,GAAG,EAAE;4BACnB,IAAI,CAAC,WAAW,EAAE,CAAC;wBACrB,CAAC,aAGgB;oBACnB,yEAAkB,KAAK,EAAC,WAAW,EAAC,IAAI,EAAC,QAAQ,EAAC,IAAI,EAAC,QAAQ,EAAC,KAAK,EAAC,iBAAiB,EAAC,UAAU,EAAC,UAAU,EAAC,OAAO,EAAC,OAAO,EAAC,IAAI,EAAE,IAAI,CAAC,GAAG,wBAEzH;oBACnB,yEAAkB,IAAI,EAAC,QAAQ,EAAC,IAAI,EAAE,IAAI,CAAC,GAAG,EAAE,KAAK,EAAC,iBAAiB,EAAC,IAAI,EAAC,QAAQ,EAAC,OAAO,EAAC,OAAO,sBAElF,CACf,CACI,CACP,CACR,CAAC;IACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import { Booking } from '@/models/booking.dto';\nimport { Component, Event, EventEmitter, Host, Method, Prop, h } from '@stencil/core';\nimport { v4 } from 'uuid';\n\n@Component({\n  tag: 'ir-invoice',\n  styleUrls: ['ir-invoice.css'],\n  scoped: true,\n})\nexport class IrInvoice {\n  /**\n   * Whether the invoice drawer is open.\n   *\n   * This prop is mutable and reflected to the host element,\n   * allowing parent components to control visibility via markup\n   * or via the public `openDrawer()` / `closeDrawer()` methods.\n   */\n  @Prop({ mutable: true, reflect: true }) open: boolean;\n\n  /**\n   * The booking object for which the invoice is being generated.\n   * Should contain room, guest, and pricing information.\n   */\n  @Prop() booking: Booking;\n\n  /**\n   * Determines what should happen after creating the invoice.\n   * - `\"create\"`: create an invoice normally\n   * - `\"check_in-create\"`: create an invoice as part of the check-in flow\n   */\n  @Prop() mode: 'create' | 'check_in-create' = 'create';\n\n  /**\n   * Specifies what the invoice is for.\n   * - `\"room\"`: invoice for a specific room\n   * - `\"booking\"`: invoice for the entire booking\n   */\n  @Prop() for: 'room' | 'booking' = 'booking';\n\n  /**\n   * The identifier of the room for which the invoice is being generated.\n   * Used when invoicing at room level instead of booking level.\n   */\n  @Prop() roomIdentifier: string;\n\n  /**\n   * When `true`, automatically triggers `window.print()` after an invoice is created.\n   * Useful for setups where the invoice should immediately be sent to a printer.\n   */\n  @Prop() autoPrint: boolean = false;\n\n  /**\n   * Emitted when the invoice drawer is opened.\n   *\n   * Fired when `openDrawer()` is called and the component\n   * transitions into the open state.\n   */\n  @Event() invoiceOpen: EventEmitter<void>;\n\n  /**\n   * Emitted when the invoice drawer is closed.\n   *\n   * Fired when `closeDrawer()` is called, including when the\n   * underlying drawer emits `onDrawerHide`.\n   */\n  @Event() invoiceClose: EventEmitter<void>;\n\n  /**\n   * Opens the invoice drawer.\n   *\n   * This method sets the `open` property to `true`, making the drawer visible.\n   * It can be called programmatically by parent components.\n   *\n   * Also emits the `invoiceOpen` event.\n   *\n   * @returns {Promise<void>} Resolves once the drawer state is updated.\n   */\n  @Method()\n  async openDrawer(): Promise<void> {\n    this.open = true;\n    this.invoiceOpen.emit();\n  }\n\n  /**\n   * Closes the invoice drawer.\n   *\n   * This method sets the `open` property to `false`, hiding the drawer.\n   * Parent components can call this to close the drawer programmatically,\n   * and it is also used internally when the drawer emits `onDrawerHide`.\n   *\n   * Also emits the `invoiceClose` event.\n   *\n   * @returns {Promise<void>} Resolves once the drawer state is updated.\n   */\n  @Method()\n  async closeDrawer(): Promise<void> {\n    this.open = false;\n    this.invoiceClose.emit();\n  }\n  private _id = `invoice-form__${v4()}`;\n  render() {\n    return (\n      <Host>\n        <ir-drawer\n          label=\"Invoice\"\n          open={this.open}\n          onDrawerHide={e => {\n            e.stopImmediatePropagation();\n            e.stopPropagation();\n            this.closeDrawer();\n          }}\n        >\n          {this.open && (\n            <ir-invoice-form\n              for={this.for}\n              roomIdentifier={this.roomIdentifier}\n              booking={this.booking}\n              autoPrint={this.autoPrint}\n              mode={this.mode}\n              formId={this._id}\n            ></ir-invoice-form>\n          )}\n          <div slot=\"footer\" class=\"ir__drawer-footer\">\n            <ir-custom-button\n              size=\"medium\"\n              appearance=\"filled\"\n              class=\"w-100 flex-fill\"\n              variant=\"neutral\"\n              onClickHandler={() => {\n                this.closeDrawer();\n              }}\n            >\n              Cancel\n            </ir-custom-button>\n            <ir-custom-button value=\"pro-forma\" type=\"submit\" size=\"medium\" class=\"w-100 flex-fill\" appearance=\"outlined\" variant=\"brand\" form={this._id}>\n              Pro-forma invoice\n            </ir-custom-button>\n            <ir-custom-button type=\"submit\" form={this._id} class=\"w-100 flex-fill\" size=\"medium\" variant=\"brand\">\n              Confirm invoice\n            </ir-custom-button>\n          </div>\n        </ir-drawer>\n      </Host>\n    );\n  }\n}\n"]}