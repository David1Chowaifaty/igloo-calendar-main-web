{"version":3,"file":"ir-payment-option.js","sourceRoot":"","sources":["../../../src/components/ir-payment-option/ir-payment-option.tsx"],"names":[],"mappings":"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","sourcesContent":["import { ILocalizable, OptionField, PaymentOption } from '@/models/payment-options';\nimport { PaymentOptionService } from '@/services/payment_option.service';\nimport { RoomService } from '@/services/room.service';\nimport locales from '@/stores/locales.store';\nimport payment_option_store from '@/stores/payment-option.store';\nimport { Component, Event, EventEmitter, Host, Listen, Prop, State, Watch, h } from '@stencil/core';\nimport { IToast } from '@components/ui/ir-toast/toast';\nimport Token from '@/models/Token';\n\n@Component({\n  tag: 'ir-payment-option',\n  styleUrl: 'ir-payment-option.css',\n  scoped: true,\n})\nexport class IrPaymentOption {\n  @Prop() propertyid: string;\n  @Prop() ticket: string;\n  @Prop() p: string;\n  @Prop() language: string = 'en';\n  @Prop() defaultStyles: boolean = true;\n  @Prop() hideLogs: boolean = true;\n\n  @State() paymentOptions: PaymentOption[] = [];\n  @State() isLoading: boolean = false;\n  @State() selectedOption: PaymentOption | null = null;\n\n  @Event() toast: EventEmitter<IToast>;\n\n  private paymentOptionService = new PaymentOptionService();\n  private roomService = new RoomService();\n  private token = new Token();\n\n  private propertyOptionsById: Map<string | number, PaymentOption>;\n  private propertyOptionsByCode: Map<string | number, PaymentOption>;\n\n  componentWillLoad() {\n    if (!!this.ticket) {\n      this.token.setToken(this.ticket);\n      this.init();\n    }\n  }\n  @Watch('ticket')\n  ticketChanged(newValue: string, oldValue: string) {\n    if (newValue === oldValue) {\n      return;\n    }\n    this.token.setToken(this.ticket);\n    this.init();\n  }\n\n  init() {\n    this.initServices();\n    this.fetchData();\n  }\n  @Listen('closeModal')\n  handleCloseModal(e: CustomEvent) {\n    e.stopPropagation();\n    e.stopImmediatePropagation();\n    this.closeModal(e.detail);\n  }\n  private closeModal(newOption: PaymentOption | null) {\n    if (newOption) {\n      this.modifyPaymentList(newOption);\n      if (newOption.is_payment_gateway) {\n        this.propertyOptionsById.set(newOption.id, newOption);\n      } else {\n        this.propertyOptionsByCode.set(newOption.code, newOption);\n      }\n    } else {\n      if (!this.propertyOptionsByCode.has(payment_option_store.selectedOption?.code) && !this.propertyOptionsById.has(payment_option_store.selectedOption?.id)) {\n        this.modifyPaymentList({ ...payment_option_store.selectedOption, is_active: false });\n      }\n    }\n    payment_option_store.selectedOption = null;\n    payment_option_store.mode = null;\n  }\n  private async fetchData() {\n    try {\n      if (!this.propertyid && !this.p) {\n        throw new Error('Property ID or username is required');\n      }\n      this.isLoading = true;\n      let propertyId = this.propertyid;\n      if (!propertyId) {\n        console.log('fetching property id');\n        const propertyData = await this.roomService.getExposedProperty({\n          id: 0,\n          aname: this.p,\n          language: this.language,\n        });\n        propertyId = propertyData.My_Result.id;\n      }\n      const [paymentOptions, propertyOptions, languageTexts] = await Promise.all([\n        this.paymentOptionService.GetExposedPaymentMethods(),\n        this.paymentOptionService.GetPropertyPaymentMethods(propertyId),\n        this.roomService.fetchLanguage(this.language, ['_PAYMENT_BACK']),\n      ]);\n      locales.entries = languageTexts.entries;\n      locales.direction = languageTexts.direction;\n      this.propertyOptionsById = new Map(propertyOptions?.map(o => [o.id, o]));\n      this.propertyOptionsByCode = new Map(propertyOptions?.map(o => [o.code, o]));\n      this.paymentOptions = paymentOptions?.map(option => {\n        if (option.is_payment_gateway) {\n          return this.propertyOptionsById.get(option.id) || option;\n        }\n        return this.propertyOptionsByCode.get(option.code) || option;\n      });\n    } catch (error) {\n      console.error(error);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  private initServices() {\n    this.token.setToken(this.ticket);\n  }\n  private modifyPaymentList(paymentOption: PaymentOption) {\n    let prevPaymentOptions = [...this.paymentOptions];\n    console.log(paymentOption);\n    let index = prevPaymentOptions.findIndex(p => p.code === paymentOption.code);\n    if (index === -1) {\n      throw new Error('Invalid code');\n    }\n    prevPaymentOptions[index] = { ...paymentOption };\n    this.paymentOptions = [...prevPaymentOptions];\n  }\n  private async handleCheckChange(e: CustomEvent, po: PaymentOption) {\n    e.stopPropagation();\n    e.stopImmediatePropagation();\n\n    const is_active = e.detail;\n    const newOption = { ...po, is_active, property_id: this.propertyid };\n    if (po.code !== '005' && !po.is_payment_gateway) {\n      await this.changePaymentMethod(newOption);\n      this.modifyPaymentList(newOption);\n      if (po.code === '000' && is_active && this.paymentOptions.filter(p => p.code !== '000').every(p => p.is_active === false || p.is_active === null)) {\n        this.toast.emit({\n          type: 'success',\n          description: '',\n          title: locales.entries['Lcz_YouNeedToSelect'],\n          position: 'top-right',\n        });\n      }\n      return;\n    }\n\n    if (!this.showEditButton(po)) {\n      this.modifyPaymentList(newOption);\n      return;\n    }\n    if (is_active && po.data?.some(d => d.value === null)) {\n      payment_option_store.mode = 'create';\n      payment_option_store.selectedOption = newOption;\n    } else {\n      await this.changePaymentMethod(newOption);\n    }\n    this.modifyPaymentList(newOption);\n  }\n  private async changePaymentMethod(newOption: {\n    is_active: any;\n    property_id: string;\n    code: string;\n    data: OptionField[] | null;\n    description: string;\n    id: null | number;\n    is_payment_gateway: boolean;\n    localizables: ILocalizable[] | null;\n    display_order?: number;\n  }) {\n    try {\n      await this.paymentOptionService.HandlePaymentMethod(newOption);\n      this.toast.emit({\n        position: 'top-right',\n        title: 'Saved Successfully',\n        description: '',\n        type: 'success',\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  private showEditButton(po: PaymentOption) {\n    if (!po.is_payment_gateway && po.code !== '005') {\n      return false;\n    }\n\n    return po.code === '005' || (po.is_payment_gateway && po.data?.length > 0);\n  }\n  render() {\n    if (this.isLoading === true || (this.paymentOptions && this.paymentOptions.length === 0)) {\n      return (\n        <Host class={this.defaultStyles ? 'p-2' : ''}>\n          <div class={`loading-container ${this.defaultStyles ? 'default' : ''}`}>\n            <span class=\"payment-option-loader\"></span>\n          </div>\n        </Host>\n      );\n    }\n    return (\n      <Host class={this.defaultStyles ? 'p-2' : ''}>\n        <ir-toast></ir-toast>\n        <ir-interceptor></ir-interceptor>\n        <div class={`${this.defaultStyles ? 'card ' : ''} p-1 flex-fill m-0`}>\n          <div class=\"d-flex align-items-center mb-2\">\n            <div class=\"p-0 m-0 mr-1\">\n              <ir-icons name=\"credit_card\"></ir-icons>\n            </div>\n            <h3 class={'m-0 p-0'}>{locales?.entries?.Lcz_PaymentOptions}</h3>\n          </div>\n          <div class=\"payment-table-container\">\n            <table class=\"table table-striped table-bordered no-footer dataTable\">\n              <thead>\n                <tr>\n                  <th scope=\"col\" class=\"text-left\">\n                    {locales?.entries?.Lcz_PaymentMethod}\n                  </th>\n                  <th scope=\"col\">{locales?.entries?.Lcz_Status}</th>\n                  <th scope=\"col\" class=\"actions-header\">\n                    {locales?.entries?.Lcz_Action}\n                  </th>\n                </tr>\n              </thead>\n              <tbody class=\"\">\n                {this.paymentOptions?.map(po => {\n                  if (po.code === '004') {\n                    return null;\n                  }\n                  return (\n                    <tr key={po.id}>\n                      <td class={'text-left po-description'}>\n                        <div class=\"po-view\">\n                          <span class={'p-0 m-0'}>{po?.description}</span>\n                          {/* <img src=\"https://www.jccsmart.com/assets/images/app-logo.svg\" alt=\"\" class=\"payment-img\" /> */}\n                        </div>\n                      </td>\n\n                      <td>\n                        <ir-switch checked={po.is_active} onCheckChange={e => this.handleCheckChange(e, po)}></ir-switch>\n                      </td>\n                      <td class=\"payment-action\">\n                        {this.showEditButton(po) && (\n                          <ir-button\n                            title={locales?.entries?.Lcz_Edit}\n                            variant=\"icon\"\n                            icon_name=\"edit\"\n                            onClickHandler={() => {\n                              payment_option_store.selectedOption = po;\n                              payment_option_store.mode = 'edit';\n                            }}\n                          ></ir-button>\n                        )}\n                      </td>\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </table>\n          </div>\n        </div>\n        <ir-sidebar\n          onIrSidebarToggle={() => {\n            this.closeModal(null);\n          }}\n          side={'right'}\n          showCloseButton={false}\n          // label={locales?.entries.Lcz_Information?.replace('%1', payment_option_store.selectedOption?.description)}\n          open={payment_option_store?.selectedOption !== null}\n        >\n          {payment_option_store?.selectedOption && <ir-option-details propertyId={this.propertyid} slot=\"sidebar-body\"></ir-option-details>}\n        </ir-sidebar>\n      </Host>\n    );\n  }\n}\n"]}