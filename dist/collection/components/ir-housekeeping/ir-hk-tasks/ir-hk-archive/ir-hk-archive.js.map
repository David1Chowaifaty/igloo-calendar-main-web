{"version":3,"file":"ir-hk-archive.js","sourceRoot":"","sources":["../../../../../src/components/ir-housekeeping/ir-hk-tasks/ir-hk-archive/ir-hk-archive.tsx"],"names":[],"mappings":"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","sourcesContent":["// import { HouseKeepingService } from '@/services/housekeeping.service';\r\n// import housekeeping_store from '@/stores/housekeeping.store';\r\nimport housekeeping_store from '@/stores/housekeeping.store';\r\nimport { Component, Host, Listen, State, h } from '@stencil/core';\r\nimport moment from 'moment';\r\n\r\n@Component({\r\n  tag: 'ir-hk-archive',\r\n  styleUrl: 'ir-hk-archive.css',\r\n  scoped: true,\r\n})\r\nexport class IrHkArchive {\r\n  @State() selectedDates: {\r\n    start: string;\r\n    end: string;\r\n  } = {\r\n    start: moment().add(-90, 'days').format('YYYY-MM-DD'),\r\n    end: moment().format('YYYY-MM-DD'),\r\n  };\r\n  @State() data = [\r\n    {\r\n      id: 1,\r\n      date: '20 Jun (Mon)',\r\n      hk_id: 2,\r\n      housekeeper: 'Test',\r\n      unit: {\r\n        id: 2,\r\n        name: 'test',\r\n      },\r\n      booking_nbr: 15525610155,\r\n    },\r\n    {\r\n      id: 2,\r\n      date: '20 Jun (Mon)',\r\n      hk_id: 2,\r\n      housekeeper: 'Test aanjhjanjn ajna',\r\n      unit: {\r\n        id: 2,\r\n        name: 'test',\r\n      },\r\n      booking_nbr: 15525610155,\r\n    },\r\n  ];\r\n\r\n  // private houseKeepingService = new HouseKeepingService();\r\n\r\n  componentWillLoad() {\r\n    this.initializeData();\r\n  }\r\n  async initializeData() {}\r\n\r\n  @Listen('dateChanged')\r\n  handleDateRangeChange(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    const { start, end } = e.detail;\r\n    this.selectedDates = {\r\n      start: start.format('YYYY-MM-DD'),\r\n      end: end.format('YYYY-MM-DD'),\r\n    };\r\n  }\r\n  async searchArchive(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n  }\r\n  async exportArchive(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <ir-title class=\"px-1\" label=\"Cleaning Archives (90 days)\" displayContext=\"sidebar\"></ir-title>\r\n        <section class=\"px-1\">\r\n          <div class=\"d-flex\">\r\n            <ir-select class=\"w-100\" LabelAvailable={false} data={[]} firstOption=\"All units\"></ir-select>\r\n            <ir-select\r\n              class=\"ml-1 w-100\"\r\n              LabelAvailable={false}\r\n              data={housekeeping_store.hk_criteria.housekeepers.map(hk => ({ text: hk.name, value: hk.id.toString() }))}\r\n              firstOption=\"All housekeepers\"\r\n            ></ir-select>\r\n          </div>\r\n          <div class=\"d-flex mt-1 align-items-center\">\r\n            <igl-date-range\r\n              class=\"mr-1\"\r\n              withDateDifference={false}\r\n              minDate={moment().add(-90, 'days').format('YYYY-MM-DD')}\r\n              defaultData={{\r\n                fromDate: this.selectedDates.start,\r\n                toDate: this.selectedDates.end,\r\n              }}\r\n            ></igl-date-range>\r\n            <ir-icon onIconClickHandler={this.searchArchive.bind(this)} class=\"mr-1\">\r\n              <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"20\" width=\"20\" viewBox=\"0 0 512 512\">\r\n                <path\r\n                  fill=\"currentColor\"\r\n                  d=\"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z\"\r\n                />\r\n              </svg>\r\n            </ir-icon>\r\n            <ir-icon onIconClickHandler={this.exportArchive.bind(this)}>\r\n              <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"20\" width=\"15\" viewBox=\"0 0 384 512\">\r\n                <path\r\n                  fill=\"currentColor\"\r\n                  d=\"M48 448V64c0-8.8 7.2-16 16-16H224v80c0 17.7 14.3 32 32 32h80V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16zM64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V154.5c0-17-6.7-33.3-18.7-45.3L274.7 18.7C262.7 6.7 246.5 0 229.5 0H64zm90.9 233.3c-8.1-10.5-23.2-12.3-33.7-4.2s-12.3 23.2-4.2 33.7L161.6 320l-44.5 57.3c-8.1 10.5-6.3 25.5 4.2 33.7s25.5 6.3 33.7-4.2L192 359.1l37.1 47.6c8.1 10.5 23.2 12.3 33.7 4.2s12.3-23.2 4.2-33.7L222.4 320l44.5-57.3c8.1-10.5 6.3-25.5-4.2-33.7s-25.5-6.3-33.7 4.2L192 280.9l-37.1-47.6z\"\r\n                />\r\n              </svg>\r\n            </ir-icon>\r\n          </div>\r\n          {/* route to booking details */}\r\n          <table class=\"mt-2\">\r\n            <thead>\r\n              <th class=\"sr-only\">period</th>\r\n              <th class=\"sr-only\">housekeeper name</th>\r\n              <th class=\"sr-only\">unit</th>\r\n              <th class=\"sr-only\">booking number</th>\r\n            </thead>\r\n            <tbody>\r\n              {this.data.map(d => (\r\n                <tr key={d.id}>\r\n                  <td class=\"pr-2\">{d.date}</td>\r\n                  <td class=\"px-2\">{d.housekeeper}</td>\r\n                  <td class=\"px-2\">{d.unit?.name}</td>\r\n                  <td class=\"px-2\">\r\n                    <ir-button\r\n                      btn_color=\"link\"\r\n                      btnStyle={{\r\n                        width: 'fit-content',\r\n                        padding: '0',\r\n                        margin: '0',\r\n                      }}\r\n                      labelStyle={{\r\n                        padding: '0',\r\n                      }}\r\n                      text={d.booking_nbr.toString()}\r\n                      onClick={() => {\r\n                        window.open(`https://x.igloorooms.com/manage/acbookingeditV2.aspx?BN=${d.booking_nbr}`, '_blank');\r\n                      }}\r\n                    ></ir-button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </section>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}