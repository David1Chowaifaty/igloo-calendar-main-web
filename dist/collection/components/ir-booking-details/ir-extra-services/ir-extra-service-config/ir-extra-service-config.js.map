{"version":3,"file":"ir-extra-service-config.js","sourceRoot":"","sources":["../../../../../src/components/ir-booking-details/ir-extra-services/ir-extra-service-config/ir-extra-service-config.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAyB,kBAAkB,EAAE,MAAM,sBAAsB,CAAC;AACjF,OAAO,EAAE,cAAc,EAAE,MAAM,4BAA4B,CAAC;AAC5D,OAAO,EAAE,gBAAgB,EAAE,MAAM,+BAA+B,CAAC;AACjE,OAAO,OAAO,MAAM,wBAAwB,CAAC;AAC7C,OAAO,EAAE,SAAS,EAAE,KAAK,EAAgB,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,MAAM,eAAe,CAAC;AACrF,OAAO,EAAE,QAAQ,EAAE,MAAM,KAAK,CAAC;AAO/B,MAAM,OAAO,oBAAoB;;QAYvB,mBAAc,GAAG,IAAI,cAAc,EAAE,CAAC;;;;;;;;IAE9C,iBAAiB;QACf,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC;YACjB,IAAI,CAAC,SAAS,qBAAQ,IAAI,CAAC,OAAO,CAAE,CAAC;QACvC,CAAC;IACH,CAAC;IAEO,KAAK,CAAC,WAAW;QACvB,IAAI,CAAC;YACH,kBAAkB,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YACzC,MAAM,IAAI,CAAC,cAAc,CAAC,qBAAqB,CAAC;gBAC9C,OAAO,EAAE,IAAI,CAAC,SAAS;gBACvB,WAAW,EAAE,IAAI,CAAC,OAAO,CAAC,WAAW;gBACrC,SAAS,EAAE,KAAK;aACjB,CAAC,CAAC;YACH,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACjC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7B,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,IAAI,KAAK,YAAY,QAAQ,EAAE,CAAC;gBAC9B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YACpB,CAAC;YACD,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QACvB,CAAC;IACH,CAAC;IACO,aAAa,CAAC,MAA6B;QACjD,IAAI,WAAW,GAAiB,IAAI,CAAC,SAAS,CAAC;QAC/C,IAAI,CAAC,WAAW,EAAE,CAAC;YACjB,WAAW,GAAG;gBACZ,IAAI,EAAE,IAAI;gBACV,WAAW,EAAE,IAAI;gBACjB,QAAQ,EAAE,IAAI;gBACd,UAAU,EAAE,IAAI;gBAChB,KAAK,EAAE,IAAI;gBACX,WAAW,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;aACtC,CAAC;QACJ,CAAC;QACD,IAAI,CAAC,SAAS,mCAAQ,WAAW,GAAK,MAAM,CAAE,CAAC;IACjD,CAAC;IACD,MAAM;;QACJ,OAAO,CACL,EAAC,IAAI,qDAAC,KAAK,EAAE,KAAK;YAChB,iEAAU,KAAK,EAAC,MAAM,EAAC,cAAc,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,gBAAgB,EAAE,cAAc,EAAC,SAAS,GAAY;YACtI,gEAAS,KAAK,EAAE,MAAM;gBAEpB,4DAAK,KAAK,EAAC,uBAAuB;oBAChC,4DAAK,KAAK,EAAC,qBAAqB;wBAC9B,6DAAM,KAAK,EAAC,kBAAkB,kBAAmB,CAC7C;oBACN,iEACE,KAAK,EAAE,MAAA,IAAI,CAAC,SAAS,0CAAE,WAAW,EAClC,KAAK,EAAE,gBAAgB,IAAI,CAAC,KAAK,IAAI,CAAC,CAAA,MAAA,IAAI,CAAC,SAAS,0CAAE,WAAW,CAAA,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,EAAE,EACvF,KAAK,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,EACzB,SAAS,EAAE,GAAG,EACd,QAAQ,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE,WAAW,EAAG,CAAC,CAAC,MAA8B,CAAC,KAAK,EAAE,CAAC,gBAChF,qBAAqB,GACtB,CACR;gBAEN,4DAAK,KAAK,EAAE,gBAAgB;oBAC1B,4DAAK,KAAK,EAAC,0BAA0B;wBACnC,4DAAK,KAAK,EAAC,qBAAqB;4BAC9B,6DAAM,KAAK,EAAC,kBAAkB,EAAC,EAAE,EAAC,cAAc,eAEzC,CACH;wBACN,4DAAK,KAAK,EAAC,iFAAiF;4BAC1F,uEACE,IAAI,EAAE,CAAA,MAAA,IAAI,CAAC,SAAS,0CAAE,UAAU,EAAC,CAAC,CAAC,IAAI,IAAI,CAAC,MAAA,IAAI,CAAC,SAAS,0CAAE,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,EAC1G,KAAK,EAAC,oBAAoB,EAC1B,SAAS,QACT,gBAAgB,QAChB,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAC/B,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,EAC7B,aAAa,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE,UAAU,EAAE,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,GAC3E,CACd,CACF;oBACN,4DAAK,KAAK,EAAC,2BAA2B;wBACpC,4DAAK,KAAK,EAAC,sBAAsB;4BAC/B,6DAAM,KAAK,EAAC,gCAAgC,EAAC,EAAE,EAAC,cAAc,gBAEvD,CACH;wBACN,4DAAK,KAAK,EAAC,uEAAuE;4BAChF,uEACE,IAAI,EAAE,CAAA,MAAA,IAAI,CAAC,SAAS,0CAAE,QAAQ,EAAC,CAAC,CAAC,IAAI,IAAI,CAAC,MAAA,IAAI,CAAC,SAAS,0CAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,EACpG,KAAK,EAAC,oBAAoB,EAC1B,SAAS,QACT,gBAAgB,QAChB,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAC/B,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,EAC7B,aAAa,EAAE,CAAC,CAAC,EAAE;oCACjB,IAAI,CAAC,aAAa,CAAC,EAAE,QAAQ,EAAE,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;gCACxE,CAAC,GACe,CACd,CACF,CACF;gBAEN,4DAAK,KAAK,EAAE,WAAW;oBACrB,4DAAK,KAAK,EAAC,6CAA6C;wBACtD,4DAAK,KAAK,EAAC,qBAAqB;4BAC9B,6DAAM,KAAK,EAAC,kBAAkB,YAAa,CACvC;wBACN,6DAAM,KAAK,EAAC,aAAa,gBAAa,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,KAAK,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,IAC7F,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CACxB;wBACP,8DACE,KAAK,EAAE,4BAA4B,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,KAAK,IAAI,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,EAAE,EACpG,OAAO,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE,KAAK,EAAE,MAAM,CAAE,CAAC,CAAC,MAA2B,CAAC,KAAK,CAAC,EAAE,CAAC,EACzF,IAAI,EAAC,QAAQ,gBACF,OAAO,sBACD,eAAe,EAChC,KAAK,EAAE,MAAA,IAAI,CAAC,SAAS,0CAAE,KAAK,GAC5B,CACE;oBACN,4DAAK,KAAK,EAAC,4CAA4C;wBACrD,4DAAK,KAAK,EAAC,sBAAsB;4BAC/B,6DAAM,KAAK,EAAC,yCAAyC,WAAY,CAC7D;wBACN,6DAAM,KAAK,EAAC,aAAa,IAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAQ;wBAC/D,8DACE,IAAI,EAAC,QAAQ,EACb,OAAO,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE,IAAI,EAAE,MAAM,CAAE,CAAC,CAAC,MAA2B,CAAC,KAAK,CAAC,EAAE,CAAC,EACxF,KAAK,EAAC,yBAAyB,gBACpB,MAAM,sBACA,cAAc,EAC/B,KAAK,EAAE,MAAA,IAAI,CAAC,SAAS,0CAAE,IAAI,GAC3B,CACE,CACF;gBACN,4DAAK,KAAK,EAAE,qCAAqC;oBAC/C,kEACE,OAAO,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,EACzC,UAAU,EAAC,wBAAwB,EACnC,KAAK,EAAE,gCAAgC,EACvC,IAAI,EAAC,EAAE,EACP,IAAI,EAAE,OAAO,CAAC,OAAO,CAAC,UAAU,EAChC,SAAS,EAAC,WAAW,GACV;oBAEb,kEACE,UAAU,EAAC,2CAA2C,EACtD,KAAK,EAAE,2BAA2B,EAClC,IAAI,EAAC,EAAE,EACP,SAAS,EAAE,gBAAgB,CAAC,2BAA2B,CAAC,EACxD,IAAI,EAAE,OAAO,CAAC,OAAO,CAAC,QAAQ,EAC9B,SAAS,EAAC,SAAS,EACnB,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,GACzB,CACT,CACE,CACL,CACR,CAAC;IACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import { Booking, ExtraService, ExtraServiceSchema } from '@/models/booking.dto';\nimport { BookingService } from '@/services/booking.service';\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\nimport locales from '@/stores/locales.store';\nimport { Component, Event, EventEmitter, Host, Prop, State, h } from '@stencil/core';\nimport { ZodError } from 'zod';\n\n@Component({\n  tag: 'ir-extra-service-config',\n  styleUrl: 'ir-extra-service-config.css',\n  scoped: true,\n})\nexport class IrExtraServiceConfig {\n  @Prop() booking: Pick<Booking, 'from_date' | 'to_date' | 'currency' | 'booking_nbr'>;\n  @Prop() service: ExtraService;\n\n  @State() s_service: ExtraService;\n  @State() error: boolean;\n  @State() fromDateClicked: boolean;\n  @State() toDateClicked: boolean;\n\n  @Event() closeModal: EventEmitter<null>;\n  @Event() resetBookingData: EventEmitter<null>;\n\n  private bookingService = new BookingService();\n\n  componentWillLoad() {\n    if (this.service) {\n      this.s_service = { ...this.service };\n    }\n  }\n\n  private async saveAmenity() {\n    try {\n      ExtraServiceSchema.parse(this.s_service);\n      await this.bookingService.doBookingExtraService({\n        service: this.s_service,\n        booking_nbr: this.booking.booking_nbr,\n        is_remove: false,\n      });\n      this.resetBookingData.emit(null);\n      this.closeModal.emit(null);\n    } catch (error) {\n      if (error instanceof ZodError) {\n        this.error = true;\n      }\n      console.error(error);\n    }\n  }\n  private updateService(params: Partial<ExtraService>) {\n    let prevService: ExtraService = this.s_service;\n    if (!prevService) {\n      prevService = {\n        cost: null,\n        description: null,\n        end_date: null,\n        start_date: null,\n        price: null,\n        currency_id: this.booking.currency.id,\n      };\n    }\n    this.s_service = { ...prevService, ...params };\n  }\n  render() {\n    return (\n      <Host class={'p-0'}>\n        <ir-title class=\"px-1\" onCloseSideBar={() => this.closeModal.emit(null)} label={'Extra Services'} displayContext=\"sidebar\"></ir-title>\n        <section class={'px-1'}>\n          {/* Description */}\n          <div class=\"input-group mb-1 mt-3\">\n            <div class=\"input-group-prepend\">\n              <span class=\"input-group-text\">Description</span>\n            </div>\n            <textarea\n              value={this.s_service?.description}\n              class={`form-control ${this.error && !this.s_service?.description ? 'is-invalid' : ''}`}\n              style={{ height: '7rem' }}\n              maxLength={250}\n              onChange={e => this.updateService({ description: (e.target as HTMLTextAreaElement).value })}\n              aria-label=\"Amenity description\"\n            ></textarea>\n          </div>\n          {/* Dates */}\n          <div class={'row-group mb-1'}>\n            <div class=\"input-group mb-1 mb-sm-0\">\n              <div class=\"input-group-prepend\">\n                <span class=\"input-group-text\" id=\"basic-addon1\">\n                  Dates on\n                </span>\n              </div>\n              <div class=\"form-control p-0 m-0 d-flex align-items-center justify-content-center date-from\">\n                <ir-date-picker\n                  date={this.s_service?.start_date ? new Date(this.s_service?.start_date) : new Date(this.booking.from_date)}\n                  class=\"hidden-date-picker\"\n                  autoApply\n                  singleDatePicker\n                  minDate={this.booking.from_date}\n                  maxDate={this.booking.to_date}\n                  onDateChanged={e => this.updateService({ start_date: e.detail.start.format('YYYY-MM-DD') })}\n                ></ir-date-picker>\n              </div>\n            </div>\n            <div class=\"input-group mb-1 mb-sm-0 \">\n              <div class=\"input-group-prepend \">\n                <span class=\"input-group-text until-prepend\" id=\"basic-addon1\">\n                  and until\n                </span>\n              </div>\n              <div class=\"form-control p-0 m-0 d-flex align-items-center justify-content-center\">\n                <ir-date-picker\n                  date={this.s_service?.end_date ? new Date(this.s_service?.end_date) : new Date(this.booking.to_date)}\n                  class=\"hidden-date-picker\"\n                  autoApply\n                  singleDatePicker\n                  minDate={this.booking.from_date}\n                  maxDate={this.booking.to_date}\n                  onDateChanged={e => {\n                    this.updateService({ end_date: e.detail.start.format('YYYY-MM-DD') });\n                  }}\n                ></ir-date-picker>\n              </div>\n            </div>\n          </div>\n          {/* Prices and cost */}\n          <div class={'row-group'}>\n            <div class=\"input-group price-input-group  mb-1 mb-sm-0\">\n              <div class=\"input-group-prepend\">\n                <span class=\"input-group-text\">Price</span>\n              </div>\n              <span class=\"currency-ph\" data-state={this.error && this.s_service.price === null ? 'error' : ''}>\n                {this.booking.currency.symbol}\n              </span>\n              <input\n                class={`form-control price-input ${this.error && this.s_service.price === null ? 'is-invalid' : ''}`}\n                onInput={e => this.updateService({ price: Number((e.target as HTMLInputElement).value) })}\n                type=\"number\"\n                aria-label=\"Price\"\n                aria-describedby=\"amenity price\"\n                value={this.s_service?.price}\n              />\n            </div>\n            <div class=\"input-group cost-input-group  mb-1 mb-sm-0\">\n              <div class=\"input-group-prepend \">\n                <span class=\"input-group-text cost-input-placeholder\">Cost</span>\n              </div>\n              <span class=\"currency-ph\">{this.booking.currency.symbol}</span>\n              <input\n                type=\"number\"\n                onInput={e => this.updateService({ cost: Number((e.target as HTMLInputElement).value) })}\n                class=\"form-control cost-input\"\n                aria-label=\"Cost\"\n                aria-describedby=\"amenity cost\"\n                value={this.s_service?.cost}\n              />\n            </div>\n          </div>\n          <div class={'d-flex flex-column flex-sm-row mt-3'}>\n            <ir-button\n              onClick={() => this.closeModal.emit(null)}\n              btn_styles=\"justify-content-center\"\n              class={`mb-1 mb-sm-0 flex-fill mr-sm-1`}\n              icon=\"\"\n              text={locales.entries.Lcz_Cancel}\n              btn_color=\"secondary\"\n            ></ir-button>\n\n            <ir-button\n              btn_styles=\"justify-content-center align-items-center\"\n              class={'m-0 flex-fill text-center'}\n              icon=\"\"\n              isLoading={isRequestPending('/Do_Booking_Extra_Service')}\n              text={locales.entries.Lcz_Save}\n              btn_color=\"primary\"\n              onClick={this.saveAmenity.bind(this)}\n            ></ir-button>\n          </div>\n        </section>\n      </Host>\n    );\n  }\n}\n"]}