{"version":3,"file":"ir-extra-service.js","sourceRoot":"","sources":["../../../../../src/components/ir-booking-details/ir-extra-services/ir-extra-service/ir-extra-service.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Event, EventEmitter, Host, Prop, h } from '@stencil/core';\nimport { ExtraService } from '@/models/booking.dto';\nimport { formatAmount } from '@/utils/utils';\nimport locales from '@/stores/locales.store';\nimport moment from 'moment';\nimport { BookingService } from '@/services/booking-service/booking.service';\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\n\n@Component({\n  tag: 'ir-extra-service',\n  styleUrl: 'ir-extra-service.css',\n  scoped: true,\n})\nexport class IrExtraService {\n  @Prop() service: ExtraService;\n  @Prop() bookingNumber: string;\n  @Prop() currencySymbol: string;\n\n  @Event() editExtraService: EventEmitter<ExtraService>;\n  @Event() resetBookingEvt: EventEmitter<null>;\n\n  private irModalRef: HTMLIrDialogElement;\n  private bookingService = new BookingService();\n\n  private async deleteService() {\n    try {\n      await this.bookingService.doBookingExtraService({\n        service: this.service,\n        is_remove: true,\n        booking_nbr: this.bookingNumber,\n      });\n      this.irModalRef.closeModal();\n      this.resetBookingEvt.emit(null);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  render() {\n    return (\n      <Host>\n        <div>\n          <div class={'extra-service-container'}>\n            <p class=\"extra-service-description\">{this.service.description}</p>\n            <div class=\"extra-service-actions\">\n              {!!this.service.price && this.service.price > 0 && (\n                <p class=\"extra-service-price p-0 m-0 font-weight-bold\">{formatAmount(this.currencySymbol, this.service.price)}</p>\n              )}\n              <div class=\"d-flex align-items-center\">\n                <wa-tooltip for={`edit-extra-service-${this.service.booking_system_id}`}>Edit service</wa-tooltip>\n                <ir-custom-button\n                  id={`edit-extra-service-${this.service.booking_system_id}`}\n                  onClickHandler={e => {\n                    e.stopImmediatePropagation();\n                    e.stopPropagation();\n                    this.editExtraService.emit(this.service);\n                  }}\n                  iconBtn\n                  appearance={'plain'}\n                  variant={'neutral'}\n                >\n                  <wa-icon name=\"edit\" label=\"Edit\" style={{ fontSize: '1rem' }}></wa-icon>\n                </ir-custom-button>\n                <wa-tooltip for={`delete-extra-service-${this.service.booking_system_id}`}>Delete service</wa-tooltip>\n                <ir-custom-button\n                  iconBtn\n                  id={`delete-extra-service-${this.service.booking_system_id}`}\n                  onClickHandler={e => {\n                    e.stopImmediatePropagation();\n                    e.stopPropagation();\n                    this.irModalRef.openModal();\n                  }}\n                  appearance={'plain'}\n                  variant={'danger'}\n                >\n                  <wa-icon name=\"trash-can\" label=\"Edit\" style={{ fontSize: '1rem' }}></wa-icon>\n                </ir-custom-button>\n              </div>\n            </div>\n          </div>\n          <div class=\"extra-service-conditional-date\">\n            {this.service.start_date && this.service.end_date ? (\n              <ir-date-view class=\"extra-service-date-view mr-1\" from_date={this.service.start_date} to_date={this.service.end_date} showDateDifference={false}></ir-date-view>\n            ) : (\n              this.service.start_date && <p class=\"extra-service-date-view\">{moment(new Date(this.service.start_date)).format('MMM DD, YYYY')}</p>\n            )}\n          </div>\n        </div>\n        <ir-dialog\n          onIrDialogHide={e => {\n            e.stopImmediatePropagation();\n            e.stopPropagation();\n          }}\n          label=\"Alert\"\n          ref={el => (this.irModalRef = el)}\n          lightDismiss={false}\n        >\n          {`${locales.entries['Lcz_AreYouSureDoYouWantToRemove ']} ${locales.entries.Lcz_ThisService} ${locales.entries.Lcz_FromThisBooking}`}\n          <div slot=\"footer\" class=\"ir-dialog__footer\">\n            <ir-custom-button appearance=\"filled\" variant=\"neutral\" size=\"medium\" data-dialog=\"close\">\n              {locales.entries.Lcz_Cancel}\n            </ir-custom-button>\n            <ir-custom-button onClickHandler={() => this.deleteService()} loading={isRequestPending('/Do_Booking_Extra_Service')} variant=\"danger\" size=\"medium\">\n              {locales.entries.Lcz_Delete}\n            </ir-custom-button>\n          </div>\n        </ir-dialog>\n      </Host>\n    );\n  }\n}\n"]}