{"version":3,"file":"ir-applicable-policies.js","sourceRoot":"","sources":["../../../../../src/components/ir-booking-details/ir-payment-details/ir-applicable-policies/ir-applicable-policies.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Booking, Bracket, ExposedApplicablePolicy } from '@/models/booking.dto';\nimport { Component, Event, EventEmitter, Host, Prop, State, Watch, h } from '@stencil/core';\nimport { CancellationStatement } from '../../types';\nimport moment, { Moment } from 'moment';\nimport { formatAmount } from '@/utils/utils';\nimport calendar_data from '@/stores/calendar-data';\nimport { IPaymentAction } from '@/services/payment.service';\nimport locales from '@/stores/locales.store';\nimport { HelpDocButton } from '@/components/HelpButton';\n\n@Component({\n  tag: 'ir-applicable-policies',\n  styleUrl: 'ir-applicable-policies.css',\n  scoped: true,\n})\nexport class IrApplicablePolicies {\n  @Prop() booking: Booking;\n  @Prop() propertyId: number;\n  @Prop() language: string = 'en';\n\n  @State() cancellationStatements: CancellationStatement[] = [];\n  @State() isLoading: boolean = false;\n  @State() guaranteeAmount: number;\n\n  @Event() generatePayment: EventEmitter<IPaymentAction>;\n  private shouldShowCancellationBrackets: boolean = false;\n\n  componentWillLoad() {\n    this.loadApplicablePolicies();\n  }\n\n  @Watch('booking')\n  handleBookingChange() {\n    this.loadApplicablePolicies();\n  }\n  private async loadApplicablePolicies() {\n    this.isLoading = true;\n    try {\n      const getPoliciesByType = (policies: ExposedApplicablePolicy[], type: ExposedApplicablePolicy['type']) => {\n        return policies.find(p => p.type === type);\n      };\n      const statements: CancellationStatement[] = [];\n      let total = 0;\n      this.booking.rooms.forEach(room => {\n        const cancellationPolicy = getPoliciesByType(room.applicable_policies, 'cancelation');\n        const guaranteePolicy = getPoliciesByType(room.applicable_policies, 'guarantee');\n        if (cancellationPolicy) {\n          let brackets = [\n            ...cancellationPolicy.brackets\n              .map((bracket, index) => {\n                if (bracket.amount > 0) {\n                  return bracket;\n                }\n                if (index < cancellationPolicy?.brackets.length - 1 && cancellationPolicy.brackets[index + 1]?.amount > 0) {\n                  return bracket;\n                }\n              })\n              .filter(Boolean),\n          ];\n          // if (moment(room.from_date, 'YYYY-MM-DD').add(1, 'days').isSameOrBefore(moment())) {\n          //   brackets.push({\n          //     amount: room['gross_total'],\n          //     amount_formatted: '',\n          //     code: '',\n          //     currency_id: 0,\n          //     due_on: moment().add(1, 'days').format('YYYY-MM-DD'),\n          //     due_on_formatted: '',\n          //     gross_amount: room['gross_total'],\n          //     gross_amount_formatted: '',\n          //     statement: '100% of the total price',\n          //   });\n          // }\n          statements.push({\n            ...cancellationPolicy,\n            roomType: room.roomtype,\n            ratePlan: room.rateplan,\n            brackets,\n            checkInDate: room.from_date,\n            grossTotal: room.gross_total,\n          });\n        }\n        if (guaranteePolicy) {\n          total += this.getCurrentBracket(guaranteePolicy.brackets)?.gross_amount ?? 0;\n        }\n      });\n\n      this.guaranteeAmount = total;\n      this.cancellationStatements = [...statements];\n    } catch (error) {\n      console.error(error);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n  private formatPreviousBracketDueOn(d1: Moment, d2: Moment) {\n    if (d1.isSame(d2, 'year')) {\n      return d1.format('MMM DD');\n    }\n\n    return d1.format('MMM DD, YYYY');\n  }\n\n  private getBracketLabelsAndArrowState({ bracket, index, brackets, checkInDate }: { index: number; bracket: Bracket; brackets: Bracket[]; checkInDate: string }): {\n    leftLabel: string | null;\n    showArrow: boolean;\n    rightLabel: string | null;\n  } {\n    // Validate inputs\n    if (!bracket || !brackets || index < 0 || index >= brackets.length) {\n      return { leftLabel: null, rightLabel: null, showArrow: false };\n    }\n\n    // Parse dates with validation\n    const bookedOnDate = moment(this.booking.booked_on.date, 'YYYY-MM-DD');\n    const bracketDueDate = moment(bracket.due_on, 'YYYY-MM-DD');\n\n    if (!bookedOnDate.isValid() || !bracketDueDate.isValid()) {\n      console.warn('Invalid date encountered in getBracketLabelsAndArrowState');\n      return { leftLabel: null, rightLabel: null, showArrow: false };\n    }\n\n    // Single bracket case\n    if (brackets.length === 1) {\n      return this.handleSingleBracket(bracketDueDate, checkInDate);\n    }\n\n    // Multiple brackets case\n    return this.handleMultipleBrackets(bracket, index, brackets, checkInDate);\n  }\n\n  private handleSingleBracket(\n    bracketDueDate: moment.Moment,\n    checkInDate: string,\n  ): {\n    leftLabel: string | null;\n    showArrow: boolean;\n    rightLabel: string | null;\n  } {\n    return {\n      leftLabel: bracketDueDate.format('MMM DD'),\n      showArrow: true,\n      rightLabel: moment(checkInDate, 'YYYY-MM-DD').format('MMM DD, YYYY'),\n    };\n  }\n\n  private handleMultipleBrackets(\n    bracket: Bracket,\n    index: number,\n    brackets: Bracket[],\n    checkInDate: string,\n  ): {\n    leftLabel: string | null;\n    showArrow: boolean;\n    rightLabel: string | null;\n  } {\n    const bracketDueDate = moment(bracket.due_on, 'YYYY-MM-DD');\n\n    // First bracket\n    if (index === 0) {\n      const nextBracket = brackets[index + 1];\n      if (!nextBracket) {\n        return { leftLabel: null, rightLabel: null, showArrow: false };\n      }\n\n      let nextBracketDueDate = moment(nextBracket.due_on, 'YYYY-MM-DD');\n      if (!nextBracketDueDate.isValid()) {\n        return { leftLabel: null, rightLabel: null, showArrow: false };\n      }\n      if (bracket.amount === 0) {\n        nextBracketDueDate = nextBracketDueDate.clone().add(-1, 'days');\n      }\n\n      return {\n        leftLabel: 'Until',\n        showArrow: false,\n        rightLabel: nextBracketDueDate.format('MMM DD, YYYY'),\n      };\n    }\n\n    // Last bracket\n    if (index === brackets.length - 1) {\n      return {\n        leftLabel: bracketDueDate.clone().format('MMM DD'),\n        showArrow: true,\n        rightLabel: moment(checkInDate).format('MMM DD, YYYY'),\n      };\n    }\n\n    // Middle brackets\n    const nextBracket = brackets[index + 1];\n    if (!nextBracket) {\n      return { leftLabel: null, rightLabel: null, showArrow: false };\n    }\n\n    const nextBracketDueDate = moment(nextBracket.due_on, 'YYYY-MM-DD');\n    if (!nextBracketDueDate.isValid()) {\n      return { leftLabel: null, rightLabel: null, showArrow: false };\n    }\n\n    // Calculate the end of current bracket period (day before next bracket starts)\n    const periodEndDate = nextBracketDueDate.clone();\n\n    return {\n      leftLabel: this.formatPreviousBracketDueOn(bracketDueDate, periodEndDate),\n      showArrow: true,\n      rightLabel: periodEndDate.format('MMM DD, YYYY'),\n    };\n  }\n  private getCurrentBracket(brackets: Bracket[]) {\n    const today = moment();\n    for (const bracket of brackets) {\n      if (today.isSameOrAfter(moment(bracket.due_on, 'YYYY-MM-DD'), 'days')) {\n        return bracket;\n      }\n    }\n    return null;\n  }\n\n  private generateCancellationStatement() {\n    const label = 'if cancelled today';\n    const { cancelation_penality_as_if_today } = this.booking.financial;\n    if (cancelation_penality_as_if_today === 0) {\n      if (this.booking.financial.collected > 0) {\n        return `No refund ${label}`;\n      }\n      return `No payment required ${label}`;\n    }\n    return `${cancelation_penality_as_if_today < 0 ? 'Refund' : 'Charge'} ${formatAmount(calendar_data.currency.symbol, Math.abs(cancelation_penality_as_if_today))} ${label}`;\n  }\n\n  private _getCurrentBracket(brackets: Bracket[]): moment.Moment | null {\n    if (!Array.isArray(brackets) || brackets.length === 0) return null;\n\n    const today = moment().startOf('day');\n\n    // Parse + validate + sort ascending by due_on\n    const parsed = brackets\n      .map(b => ({ b, date: moment(b.due_on, 'YYYY-MM-DD', true).startOf('day') }))\n      .filter(x => x.date.isValid())\n      .sort((a, b) => a.date.valueOf() - b.date.valueOf());\n\n    if (parsed.length === 0) return null;\n\n    // If today is before the first due date → return first bracket (closest upcoming)\n    if (today.isBefore(parsed[0].date, 'day')) {\n      return parsed[0].date;\n    }\n\n    // Find i such that date[i] <= today < date[i+1] → return date[i]\n    for (let i = 0; i < parsed.length - 1; i++) {\n      const cur = parsed[i].date;\n      const next = parsed[i + 1].date;\n      if (today.isSameOrAfter(cur, 'day') && today.isBefore(next, 'day')) {\n        return cur;\n      }\n    }\n\n    // If today is on/after the last due date → return last bracket\n    return parsed[parsed.length - 1].date;\n  }\n\n  render() {\n    if (this.isLoading) {\n      return null;\n    }\n    const remainingGuaranteeAmount = this.booking.financial.collected - this.guaranteeAmount;\n    return (\n      <Host>\n        {this.guaranteeAmount !== 0 && (\n          <section>\n            <div class=\"applicable-policies__guarantee\">\n              <div class=\"applicable-policies__guarantee-info\">\n                <p class=\"applicable-policies__guarantee-date\">{moment(this.booking.booked_on.date, 'YYYY-MM-DD').format('MMM DD, YYYY')}</p>\n                <p class=\"applicable-policies__guarantee-amount\">\n                  <span class=\"px-1\">{formatAmount(calendar_data.currency.symbol, remainingGuaranteeAmount < 0 ? Math.abs(remainingGuaranteeAmount) : this.guaranteeAmount)}</span>\n                </p>\n                <p class=\"applicable-policies__guarantee-label\">Guarantee {remainingGuaranteeAmount < 0 ? 'balance' : ''}</p>\n              </div>\n              {remainingGuaranteeAmount < 0 && (\n                <div class=\"applicable-policies__guarantee-action\">\n                  <ir-button\n                    btn_color=\"dark\"\n                    text=\"Pay\"\n                    size=\"sm\"\n                    onClickHandler={() => {\n                      this.generatePayment.emit({\n                        amount: Math.abs(remainingGuaranteeAmount),\n\n                        currency: calendar_data.currency,\n                        due_on: moment().format('YYYY-MM-DD'),\n                        pay_type_code: null,\n                        reason: '',\n                        type: 'OVERDUE',\n                      });\n                    }}\n                  ></ir-button>\n                </div>\n              )}\n            </div>\n          </section>\n        )}\n        <section>\n          <div class=\"applicable-policies__container\">\n            <div class=\"d-flex align-items-center\" style={{ gap: '0.5rem' }}>\n              <p class=\"applicable-policies__title font-size-large p-0 m-0\">Cancellation Schedule</p>\n              <HelpDocButton message=\"Help\" href=\"https://help.igloorooms.com/extranet/booking-details/guarantee-and-cancellation\" />\n            </div>\n            <p class=\"applicable-policies__no-penalty\">{this.generateCancellationStatement()}</p>\n          </div>\n\n          {this.cancellationStatements?.length > 0 && this.shouldShowCancellationBrackets && (\n            <div class=\"applicable-policies__statements\">\n              {this.cancellationStatements?.map(statement => {\n                const currentBracket = this._getCurrentBracket(statement.brackets);\n                const isTodaySameOrAfterCheckInDate = moment().isSameOrAfter(moment(statement.checkInDate, 'YYYY-MM-DD').add(1, 'days'));\n                return (\n                  <div class=\"applicable-policies__statement\">\n                    {this.cancellationStatements.length > 1 && (\n                      <p class=\"applicable-policies__room\">\n                        <b>{statement.roomType.name}</b> {statement.ratePlan['short_name']} {statement.ratePlan.is_non_refundable ? ` - ${locales.entries.Lcz_NonRefundable}` : ''}\n                      </p>\n                    )}\n                    <div class=\"applicable-policies__brackets\">\n                      {statement.brackets.map((bracket, idx) => {\n                        const { leftLabel, rightLabel, showArrow } = this.getBracketLabelsAndArrowState({\n                          index: idx,\n                          bracket,\n                          brackets: statement.brackets,\n                          checkInDate: statement.checkInDate,\n                        });\n                        const isInCurrentBracket = moment(bracket.due_on, 'YYYY-MM-DD').isSame(currentBracket, 'date');\n\n                        return (\n                          <div class={{ 'applicable-policies__bracket': true, 'applicable-policies__highlighted-bracket': isInCurrentBracket }}>\n                            <p class=\"applicable-policies__bracket-dates\">\n                              {leftLabel} {showArrow && <ir-icons name=\"arrow_right\" class=\"applicable-policies__icon\" style={{ '--icon-size': '0.875rem' }}></ir-icons>}{' '}\n                              {rightLabel}\n                            </p>\n                            <p class=\"applicable-policies__amount\">{formatAmount(calendar_data.currency.symbol, bracket.gross_amount)}</p>\n\n                            <p class=\"applicable-policies__statement-text\">{bracket.amount === 0 ? 'No penalty' : bracket.statement}</p>\n                          </div>\n                        );\n                      })}\n                    </div>\n                    <div class=\"applicable-policies__brackets-table\">\n                      <table>\n                        <tbody>\n                          {statement.brackets.map((bracket, idx) => {\n                            const { leftLabel, rightLabel, showArrow } = this.getBracketLabelsAndArrowState({\n                              index: idx,\n                              bracket,\n                              brackets: statement.brackets,\n                              checkInDate: statement.checkInDate,\n                            });\n\n                            const isInCurrentBracket = isTodaySameOrAfterCheckInDate ? false : moment(bracket.due_on, 'YYYY-MM-DD').isSame(currentBracket, 'date');\n\n                            return (\n                              <tr class={{ 'applicable-policies__highlighted-bracket': isInCurrentBracket }}>\n                                <td class=\"applicable-policies__bracket-dates\">\n                                  {leftLabel} {showArrow && <ir-icons name=\"arrow_right\" class=\"applicable-policies__icon\" style={{ '--icon-size': '0.875rem' }}></ir-icons>}{' '}\n                                  {rightLabel}\n                                </td>\n\n                                <td class=\"applicable-policies__amount px-1\">{formatAmount(calendar_data.currency.symbol, bracket.gross_amount)}</td>\n\n                                <td class=\"applicable-policies__statement-text\">{bracket.amount === 0 ? 'No penalty' : bracket.statement}</td>\n                              </tr>\n                            );\n                          })}\n                          {isTodaySameOrAfterCheckInDate && (\n                            <tr class={{ 'applicable-policies__highlighted-bracket': true }}>\n                              <td class=\"applicable-policies__bracket-dates\">{moment(statement.checkInDate, 'YYYY-MM-DD').add(1, 'days').format('MMM DD')} onwards</td>\n\n                              <td class=\"applicable-policies__amount px-1\">{formatAmount(calendar_data.currency.symbol, statement.grossTotal)}</td>\n\n                              <td class=\"applicable-policies__statement-text\">100% of the total price</td>\n                            </tr>\n                          )}\n                        </tbody>\n                      </table>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </section>\n      </Host>\n    );\n  }\n}\n"]}