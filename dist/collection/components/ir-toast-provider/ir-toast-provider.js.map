{"version":3,"file":"ir-toast-provider.js","sourceRoot":"","sources":["../../../src/components/ir-toast-provider/ir-toast-provider.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, h, State, Method, Element, Prop, Listen } from '@stencil/core';\n\nexport interface Toast {\n  id: string;\n  message: string;\n  type?: 'info' | 'success' | 'warning' | 'error';\n  duration?: number;\n  dismissible?: boolean;\n}\n\n@Component({\n  tag: 'ir-toast-provider',\n  styleUrl: 'ir-toast-provider.css',\n  shadow: true,\n})\nexport class IrToastProvider {\n  @Element() el: HTMLElement;\n\n  @Prop() position: 'top-start' | 'top-center' | 'top-end' | 'bottom-start' | 'bottom-center' | 'bottom-end' = 'top-end';\n  @Prop() rtl: boolean = false;\n\n  @State() toasts: Toast[] = [];\n\n  private dialogRef: any;\n  private toastTimers: Map<string, number> = new Map();\n\n  disconnectedCallback() {\n    // Clear all timers\n    this.toastTimers.forEach(timer => clearTimeout(timer));\n    this.toastTimers.clear();\n  }\n  @Listen('toast', { target: 'body' })\n  handleToast() {\n    this.addToast({\n      message: 'hello',\n    });\n    if (this.dialogRef && !this.dialogRef.open) {\n      this.dialogRef.showPopover();\n    }\n  }\n\n  @Method()\n  async addToast(toast: Omit<Toast, 'id'>): Promise<string> {\n    const id = `toast-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n    const newToast: Toast = {\n      id,\n      type: 'info',\n      duration: 5000,\n      dismissible: true,\n      ...toast,\n    };\n\n    this.toasts = [...this.toasts, newToast];\n\n    // Announce to screen readers\n    this.announceToast(newToast);\n\n    // Auto-dismiss if duration is set\n    if (newToast.duration && newToast.duration > 0) {\n      const timer = window.setTimeout(() => {\n        this.removeToast(id);\n      }, newToast.duration);\n      this.toastTimers.set(id, timer);\n    }\n\n    return id;\n  }\n\n  @Method()\n  async removeToast(id: string): Promise<void> {\n    // Clear timer if exists\n    const timer = this.toastTimers.get(id);\n    if (timer) {\n      clearTimeout(timer);\n      this.toastTimers.delete(id);\n    }\n\n    this.toasts = this.toasts.filter(toast => toast.id !== id);\n    if (this.toasts.length === 0) {\n      // this.dialogRef.close();\n    }\n  }\n\n  @Method()\n  async clearAllToasts(): Promise<void> {\n    this.toastTimers.forEach(timer => clearTimeout(timer));\n    this.toastTimers.clear();\n    this.toasts = [];\n  }\n\n  private announceToast(toast: Toast) {\n    const announcement = document.createElement('div');\n    announcement.setAttribute('role', 'status');\n    announcement.setAttribute('aria-live', toast.type === 'error' ? 'assertive' : 'polite');\n    announcement.setAttribute('aria-atomic', 'true');\n    announcement.className = 'sr-only';\n    announcement.textContent = `${toast.type}: ${toast.message}`;\n\n    this.el.shadowRoot.appendChild(announcement);\n\n    setTimeout(() => {\n      announcement.remove();\n    }, 1000);\n  }\n\n  private handleDismiss(id: string) {\n    this.removeToast(id);\n  }\n\n  private handleKeyDown(e: KeyboardEvent, id: string) {\n    if (e.key === 'Escape' || e.key === 'Enter' || e.key === ' ') {\n      e.preventDefault();\n      this.handleDismiss(id);\n    }\n  }\n\n  private getToastIcon(type: Toast['type']) {\n    switch (type) {\n      case 'success':\n        return '✓';\n      case 'error':\n        return '✕';\n      case 'warning':\n        return '⚠';\n      case 'info':\n      default:\n        return 'ℹ';\n    }\n  }\n\n  private getPositionClass() {\n    const [vertical, horizontal] = this.position.split('-');\n    return `toast-container--${vertical} toast-container--${horizontal}`;\n  }\n\n  render() {\n    return (\n      <div\n        ref={el => (this.dialogRef = el)}\n        class=\"toast-dialog\"\n        aria-label=\"Notifications\"\n        light-dismiss\n        popover=\"notifications\"\n        onClick={e => {\n          // Prevent closing when clicking inside\n          e.stopPropagation();\n        }}\n      >\n        <div class={`toast-container ${this.getPositionClass()} ${this.rtl ? 'rtl' : ''}`} role=\"region\" aria-label=\"Notifications\" dir={this.rtl ? 'rtl' : 'ltr'}>\n          {this.toasts.map(toast => (\n            <div key={toast.id} class={`toast toast--${toast.type}`} role=\"alert\" aria-live={toast.type === 'error' ? 'assertive' : 'polite'} aria-atomic=\"true\">\n              <div class=\"toast__icon\" aria-hidden=\"true\">\n                {this.getToastIcon(toast.type)}\n              </div>\n              <div class=\"toast__message\">{toast.message}</div>\n              {toast.dismissible && (\n                <button\n                  class=\"toast__close\"\n                  onClick={() => this.handleDismiss(toast.id)}\n                  onKeyDown={e => this.handleKeyDown(e, toast.id)}\n                  aria-label={`Dismiss ${toast.type} notification: ${toast.message}`}\n                  type=\"button\"\n                >\n                  <span aria-hidden=\"true\">×</span>\n                </button>\n              )}\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n}\n"]}