{"version":3,"file":"ir-toast-provider.js","sourceRoot":"","sources":["../../../src/components/ir-toast-provider/ir-toast-provider.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, h, State, Method, Element, Prop, Listen } from '@stencil/core';\nimport { TPositions } from '@components/ui/ir-toast/toast';\n\nexport interface Toast {\n  id?: string;\n  title: string;\n  description?: string;\n  type?: 'info' | 'success' | 'warning' | 'error' | 'danger';\n  duration?: number;\n  dismissible?: boolean;\n  actionLabel?: string;\n}\n\ntype ManagedToast = Toast & { id: string; leaving?: boolean };\n\ninterface ToastTimerState {\n  timeoutId?: number;\n  remaining: number;\n  startedAt?: number;\n}\n\n@Component({\n  tag: 'ir-toast-provider',\n  styleUrl: 'ir-toast-provider.css',\n  shadow: true,\n})\nexport class IrToastProvider {\n  @Element() el: HTMLElement;\n\n  @Prop() position: 'top-start' | 'top-center' | 'top-end' | 'bottom-start' | 'bottom-center' | 'bottom-end' = 'top-end';\n  @Prop() rtl: boolean = false;\n  @Prop() duration: number = 5000;\n\n  @State() toasts: ManagedToast[] = [];\n\n  private popoverRef: HTMLElement & { showPopover?: () => void; hidePopover?: () => void };\n  private toastTimers: Map<string, ToastTimerState> = new Map();\n\n  componentDidLoad() {\n    // Ensure popover API is supported\n    if (this.popoverRef && typeof this.popoverRef.showPopover === 'function') {\n      // Initially hide the popover\n      try {\n        this.popoverRef.hidePopover?.();\n      } catch (e) {\n        // Popover might not be shown yet\n      }\n    }\n  }\n\n  disconnectedCallback() {\n    this.toastTimers.forEach(timer => {\n      if (timer.timeoutId) {\n        clearTimeout(timer.timeoutId);\n      }\n    });\n    this.toastTimers.clear();\n  }\n\n  @Listen('toast', { target: 'body' })\n  handleToast(event: CustomEvent<Partial<Toast>>) {\n    const detail = event?.detail || {};\n    const payload: Toast = {\n      ...detail,\n      title: detail.title ?? 'Notification',\n    };\n    this.addToast(payload);\n  }\n\n  @Method()\n  async addToast(toast: Toast): Promise<string> {\n    const id = toast.id ?? this.generateToastId();\n    const newToast: ManagedToast = {\n      id,\n      type: toast.type ?? 'info',\n      duration: toast.duration ?? this.duration,\n      dismissible: toast.dismissible ?? true,\n      leaving: false,\n      ...toast,\n    };\n\n    this.toasts = [...this.toasts, newToast];\n    this.announceToast(newToast);\n\n    // Show popover when first toast is added\n    if (this.toasts.length === 1) {\n      this.showPopover();\n    }\n\n    if (newToast.duration && newToast.duration > 0) {\n      this.startTimer(newToast.id, newToast.duration);\n    }\n\n    return id;\n  }\n\n  @Method()\n  async removeToast(id: string): Promise<void> {\n    // Mark toast as leaving for exit animation\n    this.toasts = this.toasts.map(toast => (toast.id === id ? { ...toast, leaving: true } : toast));\n\n    // Wait for animation to complete, then remove\n    setTimeout(() => {\n      this.clearTimer(id);\n      this.toasts = this.toasts.filter(toast => toast.id !== id);\n\n      // Hide popover when last toast is removed\n      if (this.toasts.length === 0) {\n        this.hidePopover();\n      }\n    }, 200); // Match the exit animation duration\n  }\n\n  @Method()\n  async clearAllToasts(): Promise<void> {\n    this.toastTimers.forEach(timer => {\n      if (timer.timeoutId) {\n        clearTimeout(timer.timeoutId);\n      }\n    });\n    this.toastTimers.clear();\n    this.toasts = [];\n    this.hidePopover();\n  }\n\n  private showPopover() {\n    if (this.popoverRef && typeof this.popoverRef.showPopover === 'function') {\n      try {\n        this.popoverRef.showPopover();\n      } catch (e) {\n        // Popover might already be shown\n      }\n    }\n  }\n\n  private hidePopover() {\n    if (this.popoverRef && typeof this.popoverRef.hidePopover === 'function') {\n      try {\n        this.popoverRef.hidePopover();\n      } catch (e) {\n        // Popover might already be hidden\n      }\n    }\n  }\n\n  private generateToastId() {\n    return `toast-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  private startTimer(id: string, duration: number) {\n    if (typeof window === 'undefined') {\n      return;\n    }\n\n    this.clearTimer(id);\n    const timeoutId = window.setTimeout(() => this.removeToast(id), duration);\n    this.toastTimers.set(id, { timeoutId, remaining: duration, startedAt: Date.now() });\n  }\n\n  private pauseTimer(id: string) {\n    const timer = this.toastTimers.get(id);\n    if (!timer || timer.timeoutId === undefined || timer.startedAt === undefined) {\n      return;\n    }\n\n    clearTimeout(timer.timeoutId);\n    const elapsed = Date.now() - timer.startedAt;\n    const remaining = Math.max(timer.remaining - elapsed, 0);\n    this.toastTimers.set(id, { remaining });\n  }\n\n  private resumeTimer(id: string) {\n    const timer = this.toastTimers.get(id);\n    if (!timer || timer.timeoutId !== undefined) {\n      return;\n    }\n\n    if (timer.remaining <= 0) {\n      this.removeToast(id);\n      return;\n    }\n\n    if (typeof window === 'undefined') {\n      return;\n    }\n\n    const timeoutId = window.setTimeout(() => this.removeToast(id), timer.remaining);\n    this.toastTimers.set(id, { timeoutId, remaining: timer.remaining, startedAt: Date.now() });\n  }\n\n  private clearTimer(id: string) {\n    const timer = this.toastTimers.get(id);\n    if (timer?.timeoutId) {\n      clearTimeout(timer.timeoutId);\n    }\n    this.toastTimers.delete(id);\n  }\n\n  private announceToast(toast: ManagedToast) {\n    if (typeof document === 'undefined' || !this.el?.shadowRoot) {\n      return;\n    }\n\n    const announcement = document.createElement('div');\n    announcement.setAttribute('role', 'status');\n    announcement.setAttribute('aria-live', toast.type === 'error' || toast.type === 'danger' ? 'assertive' : 'polite');\n    announcement.setAttribute('aria-atomic', 'true');\n    announcement.className = 'sr-only';\n    announcement.textContent = `${toast.type}: ${toast.title}${toast.description ? '. ' + toast.description : ''}`;\n\n    this.el.shadowRoot.appendChild(announcement);\n\n    setTimeout(() => {\n      announcement.remove();\n    }, 1000);\n  }\n\n  private getPositionClass() {\n    const [vertical, horizontal] = this.position.split('-');\n    return `toast-container--${vertical} toast-container--${horizontal}`;\n  }\n\n  private getAlertPosition(): TPositions {\n    const [vertical = 'top', horizontal = 'end'] = this.position.split('-');\n    const horizontalMap: Record<string, 'left' | 'right'> = {\n      start: this.rtl ? 'right' : 'left',\n      end: this.rtl ? 'left' : 'right',\n    };\n    const resolvedHorizontal = horizontalMap[horizontal] ?? 'right';\n    const resolvedVertical = vertical === 'bottom' ? 'bottom' : 'top';\n    return `${resolvedVertical}-${resolvedHorizontal}` as TPositions;\n  }\n\n  private mapVariant(type?: Toast['type']): 'info' | 'success' | 'warning' | 'danger' {\n    switch (type) {\n      case 'success':\n        return 'success';\n      case 'warning':\n        return 'warning';\n      case 'error':\n      case 'danger':\n        return 'danger';\n      default:\n        return 'info';\n    }\n  }\n\n  private handleToastDismiss = (event: CustomEvent<{ id: string; reason: 'manual' }>) => {\n    event.stopPropagation();\n    this.removeToast(event.detail.id);\n  };\n\n  private handleInteractionChange = (event: CustomEvent<{ id: string; interacting: boolean }>) => {\n    event.stopPropagation();\n    if (event.detail.interacting) {\n      this.pauseTimer(event.detail.id);\n    } else {\n      this.resumeTimer(event.detail.id);\n    }\n  };\n\n  private handlePopoverToggle = (event: Event) => {\n    // Prevent popover from being closed by user interaction or light dismiss\n    if (this.toasts.length > 0) {\n      event.preventDefault();\n      this.showPopover();\n    }\n  };\n\n  render() {\n    return (\n      <div ref={el => (this.popoverRef = el)} popover=\"manual\" class=\"toast-popover\" onToggle={this.handlePopoverToggle}>\n        <div\n          class={`toast-container ${this.getPositionClass()} ${this.rtl ? 'rtl' : ''}`}\n          role=\"region\"\n          aria-label=\"Notifications\"\n          aria-live=\"polite\"\n          dir={this.rtl ? 'rtl' : 'ltr'}\n        >\n          {this.toasts.map(toast => (\n            <div class=\"toast-item\" key={toast.id}>\n              <ir-toast-alert\n                toastId={toast.id}\n                label={toast.title}\n                description={toast.description}\n                dismissible={toast.dismissible}\n                actionLabel={toast.actionLabel}\n                position={this.getAlertPosition()}\n                variant={this.mapVariant(toast.type)}\n                leaving={toast.leaving}\n                onIrToastDismiss={this.handleToastDismiss}\n                onIrToastInteractionChange={this.handleInteractionChange}\n              ></ir-toast-alert>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n}\n"]}