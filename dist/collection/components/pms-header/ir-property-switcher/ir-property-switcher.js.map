{"version":3,"file":"ir-property-switcher.js","sourceRoot":"","sources":["../../../../src/components/pms-header/ir-property-switcher/ir-property-switcher.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAgB,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,MAAM,eAAe,CAAC;AAU9F,MAAM,OAAO,kBAAkB;IAClB,EAAE,CAAgC;IAErC,IAAI,GAA0B,QAAQ,CAAC;IACvC,MAAM,CAAS;IAEd,IAAI,GAAY,KAAK,CAAC;IACtB,gBAAgB,CAAmB;IAE5C,+EAA+E;IACrC,cAAc,CAAgC;IAEhF,OAAO;QACb,OAAO,CACL,wBACE,cAAc,EAAE,GAAG,EAAE;gBACnB,IAAI,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC;YACzB,CAAC,EACD,SAAS,QACT,OAAO,EAAC,SAAS,EACjB,UAAU,EAAC,OAAO;YAElB,SAAG,KAAK,EAAC,4BAA4B,IAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,IAAI,iBAAiB,CAAK,CAC3E,CACpB,CAAC;IACJ,CAAC;IAEO,sBAAsB,GAAG,CAAC,KAAmC,EAAE,EAAE;QACvE,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC,MAAM,CAAC;QACrC,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;QAClB,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IACzC,CAAC,CAAC;IAEF,MAAM;QACJ,OAAO,CACL,EAAC,IAAI;YACF,IAAI,CAAC,OAAO,EAAE;YACf,kEACE,mBAAmB,EAAE,CAAC,CAAC,EAAE;oBACvB,CAAC,CAAC,wBAAwB,EAAE,CAAC;oBAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;oBAEpB,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;gBACpB,CAAC,EACD,aAAa,QACb,IAAI,EAAE,IAAI,CAAC,IAAI,EACf,KAAK,EAAC,eAAe,EACrB,KAAK,EAAC,2BAA2B,IAEhC,IAAI,CAAC,IAAI,IAAI,CACZ,4FACE,IAAI,EAAE,IAAI,CAAC,IAAI,EACf,kBAAkB,EAAE,IAAI,CAAC,gBAAgB,EAAE,EAAE,EAC7C,kBAAkB,EAAE,IAAI,CAAC,sBAAsB,GACV,CACxC,CACS,CACP,CACR,CAAC;IACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import { Component, Element, Event, EventEmitter, Host, Prop, State, h } from '@stencil/core';\nimport { AllowedProperties } from '@/services/property.service';\n\ntype AllowedProperty = NonNullable<AllowedProperties>[number];\n\n@Component({\n  tag: 'ir-property-switcher',\n  styleUrl: 'ir-property-switcher.css',\n  scoped: true,\n})\nexport class IrPropertySwitcher {\n  @Element() el: HTMLIrPropertySwitcherElement;\n\n  @Prop() mode: 'dropdown' | 'dialog' = 'dialog';\n  @Prop() ticket: string;\n\n  @State() open: boolean = false;\n  @State() selectedProperty?: AllowedProperty;\n\n  /** Emits whenever the user selects a new property from the switcher dialog. */\n  @Event({ bubbles: true, composed: true }) propertyChange: EventEmitter<AllowedProperty>;\n\n  private trigger() {\n    return (\n      <ir-custom-button\n        onClickHandler={() => {\n          this.open = !this.open;\n        }}\n        withCaret\n        variant=\"neutral\"\n        appearance=\"plain\"\n      >\n        <p class=\"property-switcher__trigger\">{this.selectedProperty?.name ?? 'Select property'}</p>\n      </ir-custom-button>\n    );\n  }\n\n  private handlePropertySelected = (event: CustomEvent<AllowedProperty>) => {\n    this.selectedProperty = event.detail;\n    this.open = false;\n    this.propertyChange.emit(event.detail);\n  };\n\n  render() {\n    return (\n      <Host>\n        {this.trigger()}\n        <ir-dialog\n          onIrDialogAfterHide={e => {\n            e.stopImmediatePropagation();\n            e.stopPropagation();\n\n            this.open = false;\n          }}\n          withoutHeader\n          open={this.open}\n          label=\"Find property\"\n          class=\"property-switcher__dialog\"\n        >\n          {this.open && (\n            <ir-property-switcher-dialog-content\n              open={this.open}\n              selectedPropertyId={this.selectedProperty?.id}\n              onPropertySelected={this.handlePropertySelected}\n            ></ir-property-switcher-dialog-content>\n          )}\n        </ir-dialog>\n      </Host>\n    );\n  }\n}\n"]}