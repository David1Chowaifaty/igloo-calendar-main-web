{"version":3,"file":"ir-guest-info-form.js","sourceRoot":"","sources":["../../../../src/components/ir-guest-info/ir-guest-info-form/ir-guest-info-form.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Event, EventEmitter, Prop, State, Watch, h } from '@stencil/core';\nimport { Guest } from '@/models/booking.dto';\nimport locales from '@/stores/locales.store';\nimport { ICountry } from '@/models/IBooking';\nimport { guestInfoFormSchema } from './types';\nimport { IToast } from '@/components/ui/ir-toast/toast';\nimport Token from '@/models/Token';\nimport { BookingService } from '@/services/booking-service/booking.service';\nimport { RoomService } from '@/services/room.service';\nimport { z } from 'zod';\nexport type GuestChangedEvent = Partial<Guest>;\n@Component({\n  tag: 'ir-guest-info-form',\n  styleUrl: 'ir-guest-info-form.css',\n  scoped: true,\n})\nexport class IrGuestInfoForm {\n  @Prop() fromId: string;\n  @Prop() language: string;\n  @Prop() email: string;\n  @Prop() booking_nbr: string;\n  @Prop() ticket: string;\n\n  @State() guest: Guest = null;\n  @State() countries: ICountry[] = [];\n  @State() isLoading: boolean = true;\n  @State() autoValidate = false;\n\n  @Event({ bubbles: true, composed: true }) guestInfoDrawerClosed: EventEmitter<{ source: Element }>;\n  @Event({ bubbles: true, composed: true }) resetBookingEvt: EventEmitter<null>;\n  @Event({ bubbles: true, composed: true }) toast: EventEmitter<IToast>;\n  @Event({ bubbles: true, composed: true }) guestChanged: EventEmitter<GuestChangedEvent>;\n\n  private bookingService = new BookingService();\n  private roomService = new RoomService();\n  private token: Token = new Token();\n\n  componentWillLoad() {\n    if (this.ticket) {\n      this.token.setToken(this.ticket);\n    }\n    if (!!this.token.getToken()) {\n      this.init();\n    }\n  }\n\n  @Watch('ticket')\n  ticketChanged(newValue: string, oldValue: string) {\n    if (newValue === oldValue) {\n      return;\n    }\n    this.token.setToken(this.ticket);\n  }\n\n  private handleInputChange(params: Partial<Guest>) {\n    this.guest = { ...this.guest, ...params };\n  }\n\n  private async init() {\n    try {\n      this.isLoading = true;\n      const [guest, countries, fetchedLocales] = await Promise.all([\n        this.bookingService.fetchGuest(this.email),\n        this.bookingService.getCountries(this.language),\n        !locales || !locales.entries || Object.keys(locales.entries).length === 0 ? this.roomService.fetchLanguage(this.language) : Promise.resolve(null),\n      ]);\n\n      if (fetchedLocales) {\n        locales.entries = fetchedLocales.entries;\n        locales.direction = fetchedLocales.direction;\n      }\n\n      this.countries = countries;\n      let _g = { ...guest, email: guest.email.replace(/\\s+(?=@)/g, '').trim() };\n      if (_g && !_g.country_phone_prefix) {\n        const country = this.countries.find(c => c.id === _g.country_id);\n        console.log({ country });\n        if (country) {\n          _g = { ..._g, country_phone_prefix: country?.phone_prefix };\n        }\n      }\n\n      this.guest = guest ? { ..._g, mobile: guest.mobile_without_prefix } : null;\n    } catch (error) {\n      console.error(error);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  private async editGuest() {\n    try {\n      this.autoValidate = true;\n      guestInfoFormSchema.parse(this.guest);\n      await this.bookingService.editExposedGuest(this.guest, this.booking_nbr ?? null);\n      this.toast.emit({\n        type: 'success',\n        description: '',\n        title: 'Saved Successfully',\n        position: 'top-right',\n      });\n      this.resetBookingEvt.emit(null);\n      this.guestChanged.emit(this.guest);\n      this.guestInfoDrawerClosed.emit({ source: null });\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  render() {\n    if (this.isLoading) {\n      return (\n        <div class={'drawer__loader-container'}>\n          <ir-spinner></ir-spinner>\n        </div>\n      );\n    }\n    return (\n      <form\n        id={this.fromId}\n        onSubmit={e => {\n          e.preventDefault();\n          this.editGuest();\n        }}\n        class=\"guest-form__container\"\n      >\n        <ir-validator\n          schema={guestInfoFormSchema.shape.first_name}\n          value={this.guest?.first_name ?? ''}\n          autovalidate={this.autoValidate}\n          valueEvent=\"text-change input input-change\"\n          blurEvent=\"input-blur blur\"\n        >\n          <ir-input\n            id={'firstName'}\n            value={this.guest?.first_name}\n            defaultValue={this.guest?.first_name}\n            required\n            onText-change={e => this.handleInputChange({ first_name: e.detail.trim() })}\n            label={locales.entries?.Lcz_FirstName}\n          ></ir-input>\n        </ir-validator>\n        <ir-validator\n          schema={guestInfoFormSchema.shape.last_name}\n          value={this.guest?.last_name ?? ''}\n          autovalidate={this.autoValidate}\n          valueEvent=\"text-change input input-change\"\n          blurEvent=\"input-blur blur\"\n        >\n          <ir-input\n            value={this.guest?.last_name}\n            required\n            defaultValue={this.guest?.last_name}\n            id=\"lastName\"\n            onText-change={e => this.handleInputChange({ last_name: e.detail.trim() })}\n            label={locales.entries?.Lcz_LastName}\n          ></ir-input>\n        </ir-validator>\n        <ir-validator\n          schema={guestInfoFormSchema.shape.email}\n          value={this.guest?.email ?? ''}\n          autovalidate={this.autoValidate}\n          valueEvent=\"text-change input input-change\"\n          blurEvent=\"input-blur blur\"\n        >\n          <ir-input\n            label={locales.entries?.Lcz_Email}\n            id=\"email\"\n            defaultValue={this.guest?.email}\n            value={this.guest?.email}\n            required\n            onText-change={e => {\n              const email = e.detail.replace(/(?<=^[^@]*)\\s+(?=[^@]*@noemail\\.com$)/g, '').trim();\n              this.handleInputChange({ email });\n            }}\n          ></ir-input>\n        </ir-validator>\n        <ir-validator\n          schema={guestInfoFormSchema.shape.alternative_email}\n          value={this.guest?.alternative_email ?? ''}\n          autovalidate={this.autoValidate}\n          valueEvent=\"text-change input input-change\"\n          blurEvent=\"input-blur blur\"\n        >\n          <ir-input\n            label={locales.entries?.Lcz_AlternativeEmail}\n            id=\"altEmail\"\n            value={this.guest?.alternative_email}\n            onText-change={e => {\n              const email = e.detail.replace(/(?<=^[^@]*)\\s+(?=[^@]*@noemail\\.com$)/g, '').trim();\n              this.handleInputChange({ alternative_email: email });\n            }}\n          ></ir-input>\n        </ir-validator>\n\n        <ir-validator schema={guestInfoFormSchema.shape.country_id} value={this.guest?.country_id ?? undefined} autovalidate={this.autoValidate} valueEvent=\"countryChange\">\n          <ir-country-picker\n            size=\"small\"\n            variant=\"modern\"\n            country={this.countries.find(c => c.id === this.guest?.country_id)}\n            label={locales.entries?.Lcz_Country}\n            onCountryChange={e => {\n              const country = e.detail;\n              let params: any = { country_id: country.id };\n              if (!this.guest.country_phone_prefix) {\n                params = { ...params, country_phone_prefix: country.phone_prefix };\n              }\n              this.handleInputChange(params);\n            }}\n            countries={this.countries}\n          ></ir-country-picker>\n        </ir-validator>\n        <ir-validator\n          schema={z.object({ mobile: guestInfoFormSchema.shape.mobile, phone_prefix: guestInfoFormSchema.shape.country_phone_prefix })}\n          value={{ mobile: this.guest?.mobile ?? '', phone_prefix: this.guest?.country_phone_prefix }}\n          autovalidate={this.autoValidate}\n          valueEvent=\"mobile-input-change\"\n        >\n          <ir-mobile-input\n            size=\"small\"\n            onMobile-input-change={e => {\n              this.handleInputChange({ mobile: e.detail.formattedValue.trim() });\n            }}\n            aria-invalid={'true'}\n            onMobile-input-country-change={e => this.handleInputChange({ country_phone_prefix: e.detail.phone_prefix })}\n            value={this.guest?.mobile ?? ''}\n            required\n            countryCode={this.countries.find(c => c.phone_prefix?.toString() === this.guest?.country_phone_prefix?.toString())?.code}\n            countries={this.countries}\n          ></ir-mobile-input>\n        </ir-validator>\n\n        <ir-validator\n          schema={guestInfoFormSchema.shape.notes}\n          value={this.guest?.notes ?? ''}\n          autovalidate={this.autoValidate}\n          valueEvent=\"wa-change change input\"\n          blurEvent=\"wa-blur blur\"\n        >\n          <wa-textarea\n            size=\"small\"\n            onchange={e => this.handleInputChange({ notes: (e.target as any).value })}\n            value={this.guest?.notes ?? ''}\n            label={locales.entries?.Lcz_PrivateNote}\n          ></wa-textarea>\n        </ir-validator>\n      </form>\n    );\n  }\n}\n"]}