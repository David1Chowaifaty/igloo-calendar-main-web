{"version":3,"file":"ir-user-management-table.js","sourceRoot":"","sources":["../../../../src/components/ir-user-management/ir-user-management-table/ir-user-management-table.tsx"],"names":[],"mappings":";;;;;;;;;;;AAAA,OAAO,OAAO,MAAM,wBAAwB,CAAC;AAC7C,OAAO,EAAE,SAAS,EAAE,KAAK,EAAgB,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,MAAM,eAAe,CAAC;AAE5F,OAAO,MAAM,MAAM,QAAQ,CAAC;AAG5B,OAAO,EAAE,WAAW,EAAE,MAAM,yBAAyB,CAAC;AACtD,OAAO,EAAE,WAAW,EAAE,MAAM,2CAA2C,CAAC;AACxE,OAAO,EAAE,gBAAgB,EAAE,MAAM,+BAA+B,CAAC;AAEjE,OAAO,EAAE,aAAa,EAAE,MAAM,2BAA2B,CAAC;AAO1D,MAAM,OAAO,qBAAqB;IALlC;QAMU,UAAK,GAAW,EAAE,CAAC;QAEnB,cAAS,GAAiC,IAAI,GAAG,EAAE,CAAC;QAGpD,iBAAY,GAAG,GAAG,CAAC;QACnB,sBAAiB,GAAkB,EAAE,CAAC;QAGrC,mBAAc,GAAQ,IAAI,CAAC;QAC3B,SAAI,GAAS,IAAI,CAAC;QAYnB,gBAAW,GAAG,IAAI,WAAW,EAAE,CAAC;QAChC,kBAAa,GAAG,IAAI,aAAa,EAAE,CAAC;KA6U7C;IA3UC,iBAAiB;QACf,IAAI,CAAC,iBAAiB,EAAE,CAAC;IAC3B,CAAC;IAGD,YAAY,CAAC,CAAU,EAAE,CAAU;QACjC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC;YACZ,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC3B,CAAC;IACH,CAAC;IAEO,iBAAiB;QACvB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,mBAAmB,CAAC;QAC1C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,mBAAmB,CAAC;QAC1C,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;IACtB,CAAC;IAEO,KAAK,CAAC,sBAAsB,CAAC,CAAc,EAAE,IAAU;QAC7D,CAAC,CAAC,wBAAwB,EAAE,CAAC;QAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,iBAAiB,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC;QACjF,IAAI,GAAG,KAAK,WAAW,EAAE,CAAC;YACxB,OAAO;QACT,CAAC;QACD,MAAM,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC;YACvC,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,EAAE,EAAE,IAAI,CAAC,EAAE;YACX,SAAS,EAAE,CAAC,CAAC,MAAM;YACnB,MAAM,EAAE,IAAI,CAAC,MAAM;YACnB,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,mBAAmB,EAAE,IAAI,CAAC,gBAAgB;YAC1C,WAAW,EAAE,IAAI,CAAC,WAAW;SAC9B,CAAC,CAAC;QACH,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;YACd,QAAQ,EAAE,WAAW;YACrB,KAAK,EAAE,oBAAoB;YAC3B,WAAW,EAAE,EAAE;YACf,IAAI,EAAE,SAAS;SAChB,CAAC,CAAC;IACL,CAAC;IACO,KAAK,CAAC,iBAAiB,CAAC,CAAc;QAC5C,IAAI,CAAC;YACH,CAAC,CAAC,wBAAwB,EAAE,CAAC;YAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;YACpB,MAAM,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC;gBACvC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK;gBACtB,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE;gBAChB,SAAS,EAAE,IAAI,CAAC,IAAI,CAAC,SAAS;gBAC9B,iBAAiB,EAAE,IAAI,CAAC,SAAS,KAAK,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB;gBACpF,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM;gBACxB,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ;gBAC5B,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI;gBACpB,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ;gBAC5B,YAAY,EAAE,IAAI,CAAC,SAAS,KAAK,QAAQ;aAC1C,CAAC,CAAC;YACH,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5B,CAAC;gBAAS,CAAC;YACT,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC;QAC7B,CAAC;IACH,CAAC;IACD,oDAAoD;IACpD,UAAU;IACV,yBAAyB;IACzB,sDAAsD;IACtD,wBAAwB;IACxB,+BAA+B;IAC/B,oFAAoF;IACpF,yBAAyB;IACzB,yBAAyB;IACzB,UAAU;IACV,sBAAsB;IACtB,0BAA0B;IAC1B,MAAM;IACN,IAAI;IACI,oBAAoB;;QAC1B,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC;YACzB,OAAO,IAAI,CAAC;QACd,CAAC;QACD,OAAO,CACL,0BACE,WAAW,EAAE,IAAI,CAAC,WAAW,EAC7B,gBAAgB,EAAE,IAAI,CAAC,gBAAgB,EACvC,YAAY,EAAE,IAAI,CAAC,YAAY,EAC/B,iBAAiB,EAAE,IAAI,CAAC,iBAAiB,EACzC,YAAY,EAAE,IAAI,CAAC,YAAY,EAC/B,mBAAmB,EAAE,IAAI,CAAC,mBAAmB,EAC7C,cAAc,EAAE,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,EAClD,IAAI,EAAC,cAAc,EACnB,IAAI,EAAE,MAAA,IAAI,CAAC,cAAc,0CAAE,IAAI,EAC/B,MAAM,EAAE,MAAA,IAAI,CAAC,cAAc,0CAAE,MAAM,GACf,CACvB,CAAC;IACJ,CAAC;IACO,SAAS,CAAC,IAAU,EAAE,IAAyB;QACrD,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,EAAE,CAAC;YAC5B,OAAO;QACT,CAAC;QACD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC;IAC5B,CAAC;IAEO,SAAS,CAAC,KAAa;QAC7B,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC;YAAE,OAAO,EAAE,CAAC;QAE9C,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC7C,MAAM,OAAO,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,6BAA6B;QACpE,MAAM,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,YAAY;QAE1E,OAAO,GAAG,OAAO,GAAG,MAAM,IAAI,MAAM,EAAE,CAAC;IACzC,CAAC;IACO,eAAe;QACrB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;IACxB,CAAC;IACO,KAAK,CAAC,iBAAiB,CAAC,MAA0F;QACxH,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,iBAAiB,CAAC;YACrD,WAAW,EAAE,qBAAqB;SACnC,CAAC,CAAC;QACH,IAAI,GAAG,aAAH,GAAG,uBAAH,GAAG,CAAE,SAAS,EAAE,CAAC;YACnB,OAAO,WAAW,CAAC;QACrB,CAAC;QACD,MAAM,EAAE,IAAI,KAAc,MAAM,EAAf,IAAI,UAAK,MAAM,EAA1B,QAAiB,CAAS,CAAC;QACjC,IAAI,IAAI,KAAK,MAAM,IAAI,IAAI,KAAK,QAAQ,EAAE,CAAC;YACzC,IAAI,CAAC,cAAc,mCACd,IAAI,KACP,MAAM,EAAE,IAAI,KAAK,MAAM,GACxB,CAAC;QACJ,CAAC;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IACD,MAAM;;QACJ,OAAO,CACL,EAAC,IAAI;YACH,gEAAS,KAAK,EAAC,sDAAsD;gBACnE,8DAAO,KAAK,EAAC,OAAO;oBAClB;wBACE;4BACE,2DAAI,KAAK,EAAC,WAAW,IAAE,MAAA,OAAO,CAAC,OAAO,CAAC,YAAY,mCAAI,UAAU,CAAM;4BACvE,2DAAI,KAAK,EAAC,WAAW,IAAE,OAAO,CAAC,OAAO,CAAC,SAAS,CAAM;4BACtD,2DAAI,KAAK,EAAC,WAAW,IAAE,MAAA,OAAO,CAAC,OAAO,CAAC,UAAU,mCAAI,QAAQ,CAAM;4BACnE,2DAAI,KAAK,EAAC,WAAW,WAAU;4BAC/B,2DAAI,KAAK,EAAC,iBAAiB,EAAC,KAAK,EAAE,EAAE,UAAU,EAAE,MAAM,EAAE;gCACvD,0DAAG,KAAK,EAAC,UAAU,iBAAe;gCAClC,0DAAG,KAAK,EAAC,SAAS,qBAAmB,CAClC;4BAEJ,IAAI,CAAC,mBAAmB,IAAI,sEAAe;4BAG5C,2DAAI,KAAK,EAAE,YAAY,IACpB,IAAI,CAAC,SAAS,IAAI,CACjB,gEACE,KAAK,EAAE,EAAE,WAAW,EAAE,UAAU,EAAE,iBACtB,UAAU,EACtB,KAAK,EAAE,OAAO,CAAC,OAAO,CAAC,qBAAqB,EAC5C,kBAAkB,EAAE,GAAG,EAAE;oCACvB,IAAI,CAAC,iBAAiB,CAAC;wCACrB,IAAI,EAAE,MAAM;wCACZ,IAAI,EAAE,QAAQ;wCACd,IAAI,EAAE,IAAI;qCACX,CAAC,CAAC;gCACL,CAAC;gCAED,4DAAK,IAAI,EAAC,MAAM,EAAC,KAAK,EAAC,4BAA4B,EAAC,MAAM,EAAC,IAAI,EAAC,KAAK,EAAC,MAAM,EAAC,OAAO,EAAC,aAAa;oCAChG,6DACE,IAAI,EAAC,cAAc,EACnB,CAAC,EAAC,uLAAuL,GACzL,CACE,CACE,CACX,CACE,CACF,CACC;oBACR,gEACG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;;wBACrB,MAAM,gBAAgB,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,YAAY,CAAC;wBACpE,MAAM,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;wBAC7D,MAAM,gBAAgB,GAAG,YAAY,CAAC,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;wBACvF,MAAM,eAAe,GAAG,gBAAgB,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC;wBAChG,OAAO,CACL,UAAI,GAAG,EAAE,IAAI,CAAC,EAAE,EAAE,KAAK,EAAC,cAAc;4BACpC,cAAK,IAAI,CAAC,QAAQ,CAAM;4BACxB;gCACG,IAAI,CAAC,KAAK;gCAEV,IAAI,CAAC,mBAAmB,IAAI,CAC3B,YAAM,KAAK,EAAE,EAAE,UAAU,EAAE,QAAQ,EAAE,EAAE,KAAK,EAAE,SAAS,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,aAAa,EAAE,IAC7G,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,cAAc,CAChD,CACR,CACE;4BACL,cAAK,MAAA,IAAI,CAAC,MAAM,mCAAI,KAAK,CAAM;4BAC/B,cAAK,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAM;4BAChH,UAAI,KAAK,EAAC,OAAO;gCACf,SAAG,KAAK,EAAC,SAAS,IACf,IAAI,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,WAAW,EAAE,KAAK,IAAI,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE,YAAY,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CACzI;gCACJ,SAAG,KAAK,EAAE,WAAW,eAAe,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,EAAE,IACxD,YAAY,IAAI,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,GAAG,IAAI;oCAC/D,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,GAAG,GAAG,GAAG,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,YAAY,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;oCACjJ,CAAC,CAAC,KAAK,CACP,CACD;4BAEJ,IAAI,CAAC,mBAAmB,IAAI,CAC3B,cACG,IAAI,CAAC,mBAAmB,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,IAAI;gCAC9E,CAAC,CAAC,IAAI;gCACN,CAAC,CAAC,CAAC,gBAAgB,IAAI,iBAAW,aAAa,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,EAAE,IAAI,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,SAAS,GAAc,CAChI,CACN;4BAmCD,UAAI,KAAK,EAAE,YAAY,IACpB,CAAC,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,gBAAgB,CAAC,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,CACvG,WAAK,KAAK,EAAC,4CAA4C,EAAC,KAAK,EAAE,EAAE,GAAG,EAAE,QAAQ,EAAE;gCAC7E,IAAI,CAAC,OAAO,IAAI,CACf,8BACc,MAAM,EAClB,KAAK,EAAE,OAAO,CAAC,OAAO,CAAC,mBAAmB,EAC1C,kBAAkB,EAAE,GAAG,EAAE;wCACvB,IAAI,CAAC,iBAAiB,CAAC;4CACrB,IAAI,EAAE,MAAM;4CACZ,IAAI,EAAE,MAAM;4CACZ,IAAI;yCACL,CAAC,CAAC;oCACL,CAAC,EACD,IAAI,EAAC,8DAA8D;oCAEnE,WAAK,IAAI,EAAC,MAAM,EAAC,KAAK,EAAC,4BAA4B,EAAC,MAAM,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,OAAO,EAAC,aAAa;wCAC9F,YACE,IAAI,EAAC,SAAS,EACd,CAAC,EAAC,sfAAsf,GACxf,CACE,CACE,CACX;gCACA,IAAI,CAAC,SAAS,IAAI,CAAC,gBAAgB,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,IAAI,CAC9F,8BACc,QAAQ,EACpB,KAAK,EAAE,OAAO,CAAC,OAAO,CAAC,qBAAqB,EAC5C,IAAI,EAAC,8BAA8B,EACnC,kBAAkB,EAAE,KAAK,IAAI,EAAE;wCAC7B,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,iBAAiB,CAAC;4CACvC,IAAI,EAAE,MAAM;4CACZ,IAAI,EAAE,QAAQ;4CACd,IAAI;yCACL,CAAC,CAAC;wCACH,IAAI,GAAG,KAAK,WAAW,EAAE,CAAC;4CACxB,OAAO;wCACT,CAAC;wCACD,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;oCACjC,CAAC;oCAED,WAAK,IAAI,EAAC,MAAM,EAAC,IAAI,EAAC,SAAS,EAAC,KAAK,EAAC,4BAA4B,EAAC,MAAM,EAAC,IAAI,EAAC,KAAK,EAAC,OAAO,EAAC,OAAO,EAAC,aAAa;wCAChH,YAAM,CAAC,EAAC,yeAAye,GAAG,CAChf,CACE,CACX,CACG,CACP,CACE,CACF,CACN,CAAC;oBACJ,CAAC,CAAC,CACI,CACF,CACA;YACV,mEACE,IAAI,EAAE,IAAI,CAAC,cAAc,KAAK,IAAI,IAAI,CAAA,MAAA,IAAI,CAAC,cAAc,0CAAE,IAAI,MAAK,QAAQ,EAC5E,iBAAiB,EAAE,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,EACrD,eAAe,EAAE,KAAK,EACtB,KAAK,EAAE;oBACL,yBAAyB,EAAE,GAAG;oBAC9B,iBAAiB,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAA,MAAA,IAAI,CAAC,cAAc,0CAAE,IAAI,MAAK,kBAAkB,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,aAAa;iBACtI,IAEA,IAAI,CAAC,oBAAoB,EAAE,CACjB;YACb,iEACE,SAAS,EAAE,KAAK,EAChB,SAAS,EACP,IAAI,CAAC,SAAS,KAAK,QAAQ,CAAC,CAAC,CAAC,mCAAmC,MAAA,IAAI,CAAC,IAAI,0CAAE,QAAQ,GAAG,CAAC,CAAC,CAAC,qCAAqC,IAAI,CAAC,SAAS,CAAC,MAAA,IAAI,CAAC,IAAI,0CAAE,KAAK,CAAC,EAAE,EAEnK,aAAa,EAAC,QAAQ,EACtB,SAAS,EAAE,gBAAgB,CAAC,sBAAsB,CAAC,EACnD,aAAa,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,EAC9C,YAAY,EAAE,IAAI,CAAC,SAAS,KAAK,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,EACpG,cAAc,EAAE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,EACjD,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,GACrB,CACP,CACR,CAAC;IACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import locales from '@/stores/locales.store';\r\nimport { Component, Event, EventEmitter, Host, Prop, State, Watch, h } from '@stencil/core';\r\n\r\nimport moment from 'moment';\r\nimport { IToast } from '@components/ui/ir-toast/toast';\r\nimport { User } from '@/models/Users';\r\nimport { UserService } from '@/services/user.service';\r\nimport { _formatTime } from '@/components/ir-booking-details/functions';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\nimport { AllowedUser } from '../types';\r\nimport { SystemService } from '@/services/system.service';\r\n\r\n@Component({\r\n  tag: 'ir-user-management-table',\r\n  styleUrls: ['ir-user-management-table.css', '../../../common/table.css'],\r\n  scoped: true,\r\n})\r\nexport class IrUserManagementTable {\r\n  @Prop() users: User[] = [];\r\n  @Prop() isSuperAdmin: boolean;\r\n  @Prop() userTypes: Map<string | number, string> = new Map();\r\n  @Prop() userTypeCode: string | number;\r\n  @Prop() haveAdminPrivileges: boolean;\r\n  @Prop() superAdminId = '5';\r\n  @Prop() allowedUsersTypes: AllowedUser[] = [];\r\n  @Prop() baseUserTypeCode: string | number;\r\n  @Prop() property_id: number;\r\n  @State() currentTrigger: any = null;\r\n  @State() user: User = null;\r\n  @State() modalType: 'verify' | 'delete';\r\n\r\n  //Permissions\r\n  @State() canDelete: boolean;\r\n  @State() canEdit: boolean;\r\n  @State() canCreate: boolean;\r\n\r\n  @Event() toast: EventEmitter<IToast>;\r\n  @Event() resetData: EventEmitter<null>;\r\n\r\n  private modalRef: HTMLIrModalElement;\r\n  private userService = new UserService();\r\n  private systemService = new SystemService();\r\n\r\n  componentWillLoad() {\r\n    this.assignPermissions();\r\n  }\r\n\r\n  @Watch('haveAdminPrivileges')\r\n  handleChange(n: boolean, o: boolean) {\r\n    if (n !== o) {\r\n      this.assignPermissions();\r\n    }\r\n  }\r\n\r\n  private assignPermissions() {\r\n    this.canCreate = this.haveAdminPrivileges;\r\n    this.canDelete = this.haveAdminPrivileges;\r\n    this.canEdit = true;\r\n  }\r\n\r\n  private async handleUserActiveChange(e: CustomEvent, user: User) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    const res = await this.verifyAdminAction({ type: 'user', mode: 'update', user });\r\n    if (res === 'cancelled') {\r\n      return;\r\n    }\r\n    await this.userService.handleExposedUser({\r\n      email: user.email,\r\n      id: user.id,\r\n      is_active: e.detail,\r\n      mobile: user.mobile,\r\n      password: user.password,\r\n      type: user.type,\r\n      username: user.username,\r\n      base_user_type_code: this.baseUserTypeCode,\r\n      property_id: this.property_id,\r\n    });\r\n    this.toast.emit({\r\n      position: 'top-right',\r\n      title: 'Saved Successfully',\r\n      description: '',\r\n      type: 'success',\r\n    });\r\n  }\r\n  private async executeUserAction(e: CustomEvent) {\r\n    try {\r\n      e.stopImmediatePropagation();\r\n      e.stopPropagation();\r\n      await this.userService.handleExposedUser({\r\n        email: this.user.email,\r\n        id: this.user.id,\r\n        is_active: this.user.is_active,\r\n        is_email_verified: this.modalType === 'verify' ? false : this.user.is_email_verified,\r\n        mobile: this.user.mobile,\r\n        password: this.user.password,\r\n        type: this.user.type,\r\n        username: this.user.username,\r\n        is_to_remove: this.modalType === 'delete',\r\n      });\r\n      this.resetData.emit(null);\r\n    } finally {\r\n      this.resetModalState();\r\n      this.modalRef.closeModal();\r\n    }\r\n  }\r\n  // private async sendVerificationEmail(user: User) {\r\n  //   try {\r\n  //     console.log(user);\r\n  //     await this.userService.sendVerificationEmail();\r\n  //     this.toast.emit({\r\n  //       position: 'top-right',\r\n  //       title: `We've sent a verification email to ${this.maskEmail(user.email)}.`,\r\n  //       description: '',\r\n  //       type: 'success',\r\n  //     });\r\n  //   } catch (error) {\r\n  //     console.log(error);\r\n  //   }\r\n  // }\r\n  private renderCurrentTrigger() {\r\n    if (!this.currentTrigger) {\r\n      return null;\r\n    }\r\n    return (\r\n      <ir-user-form-panel\r\n        property_id={this.property_id}\r\n        baseUserTypeCode={this.baseUserTypeCode}\r\n        superAdminId={this.superAdminId}\r\n        allowedUsersTypes={this.allowedUsersTypes}\r\n        userTypeCode={this.userTypeCode}\r\n        haveAdminPrivileges={this.haveAdminPrivileges}\r\n        onCloseSideBar={() => (this.currentTrigger = null)}\r\n        slot=\"sidebar-body\"\r\n        user={this.currentTrigger?.user}\r\n        isEdit={this.currentTrigger?.isEdit}\r\n      ></ir-user-form-panel>\r\n    );\r\n  }\r\n  private openModal(user: User, type: 'verify' | 'delete') {\r\n    if (!this.modalRef || !user) {\r\n      return;\r\n    }\r\n    this.user = user;\r\n    this.modalType = type;\r\n    this.modalRef.openModal();\r\n  }\r\n\r\n  private maskEmail(email: string): string {\r\n    if (!email || !email.includes('@')) return '';\r\n\r\n    const [localPart, domain] = email.split('@');\r\n    const visible = localPart.slice(0, 1); // show only the first letter\r\n    const masked = '*'.repeat(Math.max(localPart.length - 1, 1)); // mask rest\r\n\r\n    return `${visible}${masked}@${domain}`;\r\n  }\r\n  private resetModalState() {\r\n    this.user = null;\r\n    this.modalType = null;\r\n  }\r\n  private async verifyAdminAction(params: { type: 'user'; mode: 'edit' | 'delete' | 'update' | 'create'; user: User | null }) {\r\n    const res = await this.systemService.checkOTPNecessity({\r\n      METHOD_NAME: 'Handle_Exposed_User',\r\n    });\r\n    if (res?.cancelled) {\r\n      return 'cancelled';\r\n    }\r\n    const { mode, ...rest } = params;\r\n    if (mode === 'edit' || mode === 'create') {\r\n      this.currentTrigger = {\r\n        ...rest,\r\n        isEdit: mode === 'edit',\r\n      };\r\n    }\r\n    return 'ok';\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <section class=\"table-container h-100 p-1 w-100 m-0 table-responsive\">\r\n          <table class=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th class=\"text-left\">{locales.entries.Lcz_Username ?? 'Username'}</th>\r\n                <th class=\"text-left\">{locales.entries.Lcz_Email}</th>\r\n                <th class=\"text-left\">{locales.entries.Lcz_Mobile ?? 'Mobile'}</th>\r\n                <th class=\"text-left\">Role</th>\r\n                <th class=\"text-left small\" style={{ fontWeight: 'bold' }}>\r\n                  <p class=\"m-0 p-0 \">Created at</p>\r\n                  <p class=\"m-0 p-0\">Last signed in</p>\r\n                </th>\r\n                {/* <th class=\"text-left\">Created at</th> */}\r\n                {this.haveAdminPrivileges && <th>Active</th>}\r\n                {/* {this.haveAdminPrivileges && <th>Email verified</th>} */}\r\n\r\n                <th class={'action-row'}>\r\n                  {this.canCreate && (\r\n                    <ir-icon\r\n                      style={{ paddingLeft: '0.875rem' }}\r\n                      data-testid=\"new_user\"\r\n                      title={locales.entries.Lcz_CreateHousekeeper}\r\n                      onIconClickHandler={() => {\r\n                        this.verifyAdminAction({\r\n                          type: 'user',\r\n                          mode: 'create',\r\n                          user: null,\r\n                        });\r\n                      }}\r\n                    >\r\n                      <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"20\" width=\"17.5\" viewBox=\"0 0 448 512\">\r\n                        <path\r\n                          fill=\"currentColor\"\r\n                          d=\"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z\"\r\n                        />\r\n                      </svg>\r\n                    </ir-icon>\r\n                  )}\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {this.users.map(user => {\r\n                const isUserSuperAdmin = user.type.toString() === this.superAdminId;\r\n                const latestSignIn = user.sign_ins ? user.sign_ins[0] : null;\r\n                const latestSignInDate = latestSignIn ? moment(latestSignIn.date, 'YYYY-MM-DD') : null;\r\n                const isLastSignInOld = latestSignInDate ? moment().diff(latestSignInDate, 'days') > 30 : false;\r\n                return (\r\n                  <tr key={user.id} class=\"ir-table-row\">\r\n                    <td>{user.username}</td>\r\n                    <td>\r\n                      {user.email}\r\n\r\n                      {this.haveAdminPrivileges && (\r\n                        <span style={{ marginLeft: '0.5rem' }} class={`small ${user.is_email_verified ? 'text-success' : 'text-danger'}`}>\r\n                          {user.is_email_verified ? 'Verified' : 'Not verified'}\r\n                        </span>\r\n                      )}\r\n                    </td>\r\n                    <td>{user.mobile ?? 'N/A'}</td>\r\n                    <td>{user.type.toString() === this.superAdminId ? 'Super admin' : this.userTypes.get(user.type.toString())}</td>\r\n                    <td class=\"small\">\r\n                      <p class=\"m-0 p-0\">\r\n                        {new Date(user.created_on).getFullYear() === 1900 || !user.created_on ? 'N/A' : moment(user.created_on, 'YYYY-MM-DD').format('DD-MMM-YYYY')}\r\n                      </p>\r\n                      <p class={`m-0 p-0 ${isLastSignInOld ? 'text-danger' : ''}`}>\r\n                        {latestSignIn && new Date(latestSignIn.date).getFullYear() > 1900\r\n                          ? moment(latestSignIn.date, 'YYYY-MM-DD').format('DD-MMM-YYYY') + ' ' + _formatTime(latestSignIn.hour.toString(), latestSignIn.minute.toString())\r\n                          : 'N/A'}\r\n                      </p>\r\n                    </td>\r\n                    {/* <td>{new Date(user.created_on).getFullYear() === 1900 || !user.created_on ? 'N/A' : moment(user.created_on, 'YYYY-MM-DD').format('DD-MMM-YYYY')}</td> */}\r\n                    {this.haveAdminPrivileges && (\r\n                      <td>\r\n                        {this.haveAdminPrivileges && !this.isSuperAdmin && user.type.toString() === '17'\r\n                          ? null\r\n                          : !isUserSuperAdmin && <ir-switch onCheckChange={e => this.handleUserActiveChange(e, user)} checked={user.is_active}></ir-switch>}\r\n                      </td>\r\n                    )}\r\n                    {/* {this.haveAdminPrivileges && (\r\n                      <td>\r\n                        {user.is_email_verified ? (\r\n                          <p\r\n                            // data-toggle=\"tooltip\"\r\n                            // data-placement=\"bottom\"\r\n                            data-testid=\"user-verification\"\r\n                            // title={user.is_email_verified ? '' : 'Click to resend verification email.'}\r\n                            class={`m-0 p-0`}\r\n                            //TODO add isRequestPending for when the request is sent the buttons should be disabled\r\n                            // onClick={() => {\r\n                            //   this.openModal(user, 'verify');\r\n                            // }}\r\n                          >\r\n                            {user.is_email_verified ? 'Verified' : 'Not verified'}\r\n                          </p>\r\n                        ) : (\r\n                          <ir-button\r\n                            class=\"m-0 p-0\"\r\n                            onClickHandler={() => this.sendVerificationEmail(user)}\r\n                            btn_styles={'px-0 m-0 text-left'}\r\n                            labelStyle={{ padding: '0' }}\r\n                            btnStyle={{ paddingHorizontal: '0', width: 'fit-content' }}\r\n                            data-toggle=\"tooltip\"\r\n                            data-placement=\"bottom\"\r\n                            data-testid=\"user-verification\"\r\n                            title={user.is_email_verified ? '' : 'Click to resend verification email.'}\r\n                            btn_color=\"link\"\r\n                            size=\"sm\"\r\n                            text=\"Not verified\"\r\n                          ></ir-button>\r\n                        )}\r\n                      </td>\r\n                    )} */}\r\n                    <td class={'action-row'}>\r\n                      {(this.canEdit || this.canDelete) && ((!this.isSuperAdmin && !isUserSuperAdmin) || this.isSuperAdmin) && (\r\n                        <div class=\"icons-container  d-flex align-items-center\" style={{ gap: '0.5rem' }}>\r\n                          {this.canEdit && (\r\n                            <ir-icon\r\n                              data-testid=\"edit\"\r\n                              title={locales.entries.Lcz_EditHousekeeper}\r\n                              onIconClickHandler={() => {\r\n                                this.verifyAdminAction({\r\n                                  type: 'user',\r\n                                  mode: 'edit',\r\n                                  user,\r\n                                });\r\n                              }}\r\n                              icon=\"ft-save color-ir-light-blue-hover h5 pointer sm-margin-right\"\r\n                            >\r\n                              <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"20\" width=\"20\" viewBox=\"0 0 512 512\">\r\n                                <path\r\n                                  fill=\"#6b6f82\"\r\n                                  d=\"M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z\"\r\n                                />\r\n                              </svg>\r\n                            </ir-icon>\r\n                          )}\r\n                          {this.canDelete && !isUserSuperAdmin && (this.isSuperAdmin || user.type.toString() !== '17') && (\r\n                            <ir-icon\r\n                              data-testid=\"delete\"\r\n                              title={locales.entries.Lcz_DeleteHousekeeper}\r\n                              icon=\"ft-trash-2 danger h5 pointer\"\r\n                              onIconClickHandler={async () => {\r\n                                const res = await this.verifyAdminAction({\r\n                                  type: 'user',\r\n                                  mode: 'delete',\r\n                                  user,\r\n                                });\r\n                                if (res === 'cancelled') {\r\n                                  return;\r\n                                }\r\n                                this.openModal(user, 'delete');\r\n                              }}\r\n                            >\r\n                              <svg slot=\"icon\" fill=\"#ff2441\" xmlns=\"http://www.w3.org/2000/svg\" height=\"16\" width=\"14.25\" viewBox=\"0 0 448 512\">\r\n                                <path d=\"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z\" />\r\n                              </svg>\r\n                            </ir-icon>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </section>\r\n        <ir-sidebar\r\n          open={this.currentTrigger !== null && this.currentTrigger?.type !== 'delete'}\r\n          onIrSidebarToggle={() => (this.currentTrigger = null)}\r\n          showCloseButton={false}\r\n          style={{\r\n            '--sidebar-block-padding': '0',\r\n            '--sidebar-width': this.currentTrigger ? (this.currentTrigger?.type === 'unassigned_units' ? 'max-content' : '40rem') : 'max-content',\r\n          }}\r\n        >\r\n          {this.renderCurrentTrigger()}\r\n        </ir-sidebar>\r\n        <ir-modal\r\n          autoClose={false}\r\n          modalBody={\r\n            this.modalType === 'delete' ? `Are you sure you want to delete ${this.user?.username}?` : `Are you sure you want to unverify ${this.maskEmail(this.user?.email)}`\r\n          }\r\n          rightBtnColor=\"danger\"\r\n          isLoading={isRequestPending('/Handle_Exposed_User')}\r\n          onCancelModal={this.resetModalState.bind(this)}\r\n          rightBtnText={this.modalType === 'verify' ? locales.entries.Lcz_Confirm : locales.entries.Lcz_Delete}\r\n          onConfirmModal={this.executeUserAction.bind(this)}\r\n          ref={el => (this.modalRef = el)}\r\n        ></ir-modal>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}