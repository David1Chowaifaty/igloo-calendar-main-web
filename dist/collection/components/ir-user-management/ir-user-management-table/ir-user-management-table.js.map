{"version":3,"file":"ir-user-management-table.js","sourceRoot":"","sources":["../../../../src/components/ir-user-management/ir-user-management-table/ir-user-management-table.tsx"],"names":[],"mappings":"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","sourcesContent":["import locales from '@/stores/locales.store';\nimport { Component, Event, EventEmitter, Fragment, Host, Prop, State, Watch, h } from '@stencil/core';\n\nimport moment from 'moment';\nimport { IToast } from '@components/ui/ir-toast/toast';\nimport { User } from '@/models/Users';\nimport { UserService } from '@/services/user.service';\nimport { _formatTime } from '@/components/ir-booking-details/functions';\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\nimport { AllowedUser } from '../types';\nimport { SystemService } from '@/services/system.service';\n\n@Component({\n  tag: 'ir-user-management-table',\n  styleUrls: ['ir-user-management-table.css', '../../../common/table.css'],\n  scoped: true,\n})\nexport class IrUserManagementTable {\n  @Prop() users: User[] = [];\n  @Prop() isSuperAdmin: boolean;\n  @Prop() userTypes: Map<string | number, string> = new Map();\n  @Prop() userTypeCode: string | number;\n  @Prop() haveAdminPrivileges: boolean;\n  @Prop() superAdminId = '5';\n  @Prop() allowedUsersTypes: AllowedUser[] = [];\n  @Prop() baseUserTypeCode: string | number;\n  @Prop() property_id: number;\n\n  @State() currentTrigger: any = null;\n  @State() user: User = null;\n  @State() modalType: 'verify' | 'delete';\n\n  //Permissions\n  @State() canDelete: boolean;\n  @State() canEdit: boolean;\n  @State() canCreate: boolean;\n\n  @Event() toast: EventEmitter<IToast>;\n  @Event() resetData: EventEmitter<null>;\n\n  private dialogRef: HTMLIrDialogElement;\n  private userService = new UserService();\n  private systemService = new SystemService();\n\n  componentWillLoad() {\n    this.assignPermissions();\n  }\n\n  @Watch('haveAdminPrivileges')\n  handleChange(n: boolean, o: boolean) {\n    if (n !== o) {\n      this.assignPermissions();\n    }\n  }\n\n  private assignPermissions() {\n    this.canCreate = this.haveAdminPrivileges;\n    this.canDelete = this.haveAdminPrivileges;\n    this.canEdit = true;\n  }\n\n  private async handleUserActiveChange(e: CustomEvent, user: User) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    const res = await this.verifyAdminAction({ type: 'user', mode: 'update', user });\n    if (res === 'cancelled') {\n      return;\n    }\n    await this.userService.handleExposedUser({\n      email: user.email,\n      id: user.id,\n      is_active: (e.target as HTMLInputElement).checked,\n      mobile: user.mobile,\n      password: user.password,\n      type: user.type,\n      username: user.username,\n      base_user_type_code: this.baseUserTypeCode,\n      property_id: this.property_id,\n    });\n    this.toast.emit({\n      position: 'top-right',\n      title: 'Saved Successfully',\n      description: '',\n      type: 'success',\n    });\n  }\n  private async executeUserAction(e: CustomEvent) {\n    try {\n      e.stopImmediatePropagation();\n      e.stopPropagation();\n      await this.userService.handleExposedUser({\n        email: this.user.email,\n        id: this.user.id,\n        is_active: this.user.is_active,\n        is_email_verified: this.modalType === 'verify' ? false : this.user.is_email_verified,\n        mobile: this.user.mobile,\n        password: this.user.password,\n        type: this.user.type,\n        username: this.user.username,\n        is_to_remove: this.modalType === 'delete',\n      });\n      this.resetData.emit(null);\n    } finally {\n      this.dialogRef.closeModal();\n    }\n  }\n  // private async sendVerificationEmail(user: User) {\n  //   try {\n  //     console.log(user);\n  //     await this.userService.sendVerificationEmail();\n  //     this.toast.emit({\n  //       position: 'top-right',\n  //       title: `We've sent a verification email to ${this.maskEmail(user.email)}.`,\n  //       description: '',\n  //       type: 'success',\n  //     });\n  //   } catch (error) {\n  //     console.log(error);\n  //   }\n  // }\n\n  private openModal(user: User, type: 'verify' | 'delete') {\n    if (!this.dialogRef || !user) {\n      return;\n    }\n    this.user = user;\n    this.modalType = type;\n    this.dialogRef.openModal();\n  }\n\n  private maskEmail(email: string): string {\n    if (!email || !email.includes('@')) return '';\n\n    const [localPart, domain] = email.split('@');\n    const visible = localPart.slice(0, 1); // show only the first letter\n    const masked = '*'.repeat(Math.max(localPart.length - 1, 1)); // mask rest\n\n    return `${visible}${masked}@${domain}`;\n  }\n\n  private async verifyAdminAction(params: { type: 'user'; mode: 'edit' | 'delete' | 'update' | 'create'; user: User | null }) {\n    const res = await this.systemService.checkOTPNecessity({\n      METHOD_NAME: 'Handle_Exposed_User',\n    });\n    if (res?.cancelled) {\n      return 'cancelled';\n    }\n    const { mode, ...rest } = params;\n    if (mode === 'edit' || mode === 'create') {\n      this.currentTrigger = {\n        ...rest,\n        isEdit: mode === 'edit',\n      };\n    }\n    return 'ok';\n  }\n  render() {\n    return (\n      <Host>\n        <section class=\"table-container h-100  w-100 m-0 table-responsive\">\n          <table class=\"table\">\n            <thead>\n              <tr>\n                <th class=\"text-left\">{locales.entries.Lcz_Username ?? 'Username'}</th>\n                <th class=\"text-left\">{locales.entries.Lcz_Email}</th>\n                <th class=\"text-left\">{locales.entries.Lcz_Mobile ?? 'Mobile'}</th>\n                <th class=\"text-left\">{locales.entries.Lcz_Role}</th>\n                <th class=\"text-left small\" style={{ fontWeight: 'bold' }}>\n                  <p class=\"m-0 p-0 \">{locales.entries.Lcz_CreatedAt}</p>\n                  <p class=\"m-0 p-0\">{locales.entries.Lcz_LastSignedIn}</p>\n                </th>\n                {/* <th class=\"text-left\">Created at</th> */}\n                {this.haveAdminPrivileges && <th>{locales.entries.Lcz_Active}</th>}\n                {/* {this.haveAdminPrivileges && <th>Email verified</th>} */}\n\n                <th class={'action-row'}>\n                  {this.canCreate && (\n                    <Fragment>\n                      <ir-custom-button\n                        appearance=\"plain\"\n                        variant=\"neutral\"\n                        id=\"new-user-btn\"\n                        onClickHandler={() => {\n                          this.verifyAdminAction({\n                            type: 'user',\n                            mode: 'create',\n                            user: null,\n                          });\n                        }}\n                      >\n                        <wa-icon name=\"plus\" style={{ fontSize: '1.2rem' }}></wa-icon>\n                      </ir-custom-button>\n                      <wa-tooltip for=\"new-user-btn\">{locales.entries.Lcz_CreateUser}</wa-tooltip>\n                    </Fragment>\n                  )}\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.users.map(user => {\n                const isUserSuperAdmin = user.type.toString() === this.superAdminId;\n                const latestSignIn = user.sign_ins ? user.sign_ins[0] : null;\n                const latestSignInDate = latestSignIn ? moment(latestSignIn.date, 'YYYY-MM-DD') : null;\n                const isLastSignInOld = latestSignInDate ? moment().diff(latestSignInDate, 'days') > 30 : false;\n                return (\n                  <tr key={user.id} class=\"ir-table-row\">\n                    <td>{user.username}</td>\n                    <td>\n                      {user.email}\n\n                      {this.haveAdminPrivileges && (\n                        <span style={{ marginLeft: '0.5rem', color: `var(--wa-color-${user.is_email_verified ? 'success' : 'danger'}-fill-loud)` }} class={`small`}>\n                          {user.is_email_verified ? locales.entries.Lcz_Verified : locales.entries.Lcz_NotVerified}\n                        </span>\n                      )}\n                    </td>\n                    <td>{user.mobile ?? 'N/A'}</td>\n                    <td>{user.type.toString() === this.superAdminId ? locales.entries.Lcz_SuperAdmin : this.userTypes.get(user.type.toString())}</td>\n                    <td class=\"small\">\n                      <p class=\"m-0 p-0\">\n                        {new Date(user.created_on).getFullYear() === 1900 || !user.created_on ? 'N/A' : moment(user.created_on, 'YYYY-MM-DD').format('DD-MMM-YYYY')}\n                      </p>\n                      <p class={`m-0 p-0`} style={{ color: isLastSignInOld ? 'var(--wa-color-danger-fill-loud)' : '' }}>\n                        {latestSignIn && new Date(latestSignIn.date).getFullYear() > 1900\n                          ? moment(latestSignIn.date, 'YYYY-MM-DD').format('DD-MMM-YYYY') + ' ' + _formatTime(latestSignIn.hour.toString(), latestSignIn.minute.toString())\n                          : 'N/A'}\n                      </p>\n                    </td>\n                    {/* <td>{new Date(user.created_on).getFullYear() === 1900 || !user.created_on ? 'N/A' : moment(user.created_on, 'YYYY-MM-DD').format('DD-MMM-YYYY')}</td> */}\n                    {this.haveAdminPrivileges && (\n                      <td>\n                        {this.haveAdminPrivileges && !this.isSuperAdmin && user.type.toString() === '17'\n                          ? null\n                          : !isUserSuperAdmin && (\n                              <wa-switch onchange={e => this.handleUserActiveChange(e, user)} defaultChecked={user.is_active} checked={user.is_active}></wa-switch>\n                            )}\n                      </td>\n                    )}\n                    {/* {this.haveAdminPrivileges && (\n                      <td>\n                        {user.is_email_verified ? (\n                          <p\n                            // data-toggle=\"tooltip\"\n                            // data-placement=\"bottom\"\n                            data-testid=\"user-verification\"\n                            // title={user.is_email_verified ? '' : 'Click to resend verification email.'}\n                            class={`m-0 p-0`}\n                            //TODO add isRequestPending for when the request is sent the buttons should be disabled\n                            // onClick={() => {\n                            //   this.openModal(user, 'verify');\n                            // }}\n                          >\n                            {user.is_email_verified ? 'Verified' : 'Not verified'}\n                          </p>\n                        ) : (\n                          <ir-button\n                            class=\"m-0 p-0\"\n                            onClickHandler={() => this.sendVerificationEmail(user)}\n                            btn_styles={'px-0 m-0 text-left'}\n                            labelStyle={{ padding: '0' }}\n                            btnStyle={{ paddingHorizontal: '0', width: 'fit-content' }}\n                            data-toggle=\"tooltip\"\n                            data-placement=\"bottom\"\n                            data-testid=\"user-verification\"\n                            title={user.is_email_verified ? '' : 'Click to resend verification email.'}\n                            btn_color=\"link\"\n                            size=\"sm\"\n                            text=\"Not verified\"\n                          ></ir-button>\n                        )}\n                      </td>\n                    )} */}\n                    <td class={'action-row'}>\n                      {(this.canEdit || this.canDelete) && ((!this.isSuperAdmin && !isUserSuperAdmin) || this.isSuperAdmin) && (\n                        <div class=\"icons-container  d-flex align-items-center\">\n                          {this.canEdit && (\n                            <Fragment>\n                              <ir-custom-button\n                                data-testid=\"edit\"\n                                onClickHandler={() => {\n                                  this.verifyAdminAction({\n                                    type: 'user',\n                                    mode: 'edit',\n                                    user,\n                                  });\n                                }}\n                                appearance=\"plain\"\n                                variant=\"neutral\"\n                                id={`edit-user-${user.id}`}\n                              >\n                                <wa-icon name=\"edit\" style={{ fontSize: '1.2rem' }}></wa-icon>\n                              </ir-custom-button>\n                              <wa-tooltip for={`edit-user-${user.id}`}>{locales.entries.Lcz_EditUser}</wa-tooltip>\n                            </Fragment>\n                          )}\n                          {this.canDelete && !isUserSuperAdmin && (this.isSuperAdmin || user.type.toString() !== '17') && (\n                            <Fragment>\n                              <ir-custom-button\n                                onClickHandler={async () => {\n                                  const res = await this.verifyAdminAction({\n                                    type: 'user',\n                                    mode: 'delete',\n                                    user,\n                                  });\n                                  if (res === 'cancelled') {\n                                    return;\n                                  }\n                                  this.openModal(user, 'delete');\n                                }}\n                                data-testid=\"delete\"\n                                variant=\"danger\"\n                                appearance=\"plain\"\n                                id={`delete-user-${user.id}`}\n                              >\n                                <wa-icon name=\"trash-can\" style={{ fontSize: '1.2rem' }}></wa-icon>\n                              </ir-custom-button>\n                              <wa-tooltip for={`delete-user-${user.id}`}>{locales.entries.Lcz_DeleteUser}</wa-tooltip>\n                            </Fragment>\n                          )}\n                        </div>\n                      )}\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </section>\n        <ir-user-form-panel-drawer\n          open={this.currentTrigger !== null && this.currentTrigger?.type !== 'delete'}\n          property_id={this.property_id}\n          baseUserTypeCode={this.baseUserTypeCode}\n          superAdminId={this.superAdminId}\n          allowedUsersTypes={this.allowedUsersTypes}\n          userTypeCode={this.userTypeCode}\n          haveAdminPrivileges={this.haveAdminPrivileges}\n          onCloseSideBar={() => (this.currentTrigger = null)}\n          slot=\"sidebar-body\"\n          user={this.currentTrigger?.user}\n          isEdit={this.currentTrigger?.isEdit}\n        ></ir-user-form-panel-drawer>\n        <ir-dialog\n          label={'Alert'}\n          onIrDialogAfterHide={e => {\n            e.stopImmediatePropagation();\n            e.stopPropagation();\n            this.user = null;\n            this.modalType = null;\n          }}\n          ref={el => (this.dialogRef = el)}\n        >\n          <span>\n            {this.modalType === 'delete'\n              ? `${locales.entries.Lcz_AreYouSureToDelete} ${this.user?.username}?`\n              : `${locales.entries.Lcz_AreYouSureToUnverify} ${this.maskEmail(this.user?.email)}`}\n          </span>\n          <div slot=\"footer\" class=\"ir-dialog__footer\">\n            <ir-custom-button data-dialog=\"close\" size=\"medium\" appearance=\"filled\">\n              Cancel\n            </ir-custom-button>\n            <ir-custom-button\n              size=\"medium\"\n              loading={isRequestPending('/Handle_Exposed_User')}\n              appearance=\"accent\"\n              variant={this.modalType === 'verify' ? 'brand' : 'danger'}\n              onClickHandler={this.executeUserAction.bind(this)}\n            >\n              {this.modalType === 'verify' ? locales.entries.Lcz_Confirm : locales.entries.Lcz_Delete}\n            </ir-custom-button>\n          </div>\n        </ir-dialog>\n      </Host>\n    );\n  }\n}\n"]}