{"version":3,"file":"ir-user-management.js","sourceRoot":"","sources":["../../../src/components/ir-user-management/ir-user-management.tsx"],"names":[],"mappings":"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","sourcesContent":["import Token from '@/models/Token';\nimport { RoomService } from '@/services/room.service';\nimport { Component, Host, Prop, State, Watch, h } from '@stencil/core';\nimport { User } from './types';\n\n@Component({\n  tag: 'ir-user-management',\n  styleUrl: 'ir-user-management.css',\n  scoped: true,\n})\nexport class IrUserManagement {\n  @Prop() language: string = '';\n  @Prop() ticket: string = '';\n  @Prop() propertyid: number;\n  @Prop() p: string;\n  @Prop() isSuperAdmin: boolean = true;\n\n  @State() isLoading = true;\n  @State() users: User[] = [\n    {\n      id: 1,\n      mobile: '1234567890',\n      name: 'Alice Johnson',\n      note: 'Admin user',\n      password: 'securePass1',\n      property_id: 101,\n      phone_prefix: '+1',\n      username: 'alicej',\n      email: 'alice.johnson@example.com',\n      is_active: true,\n      last_signed_in: '2025-04-08',\n      created_at: '2023-09-15',\n      role: 'super admin',\n    },\n    {\n      id: 2,\n      mobile: '2345678901',\n      name: 'Bob Smith',\n      note: 'Temporary access',\n      password: 'securePass2',\n      property_id: 102,\n      phone_prefix: '+44',\n      username: 'bobsmith',\n      email: 'bob.smith@example.com',\n      is_active: false,\n      last_signed_in: '2025-03-27',\n      created_at: '2023-11-20',\n      role: 'admin',\n    },\n    {\n      id: 3,\n      mobile: '3456789012',\n      name: 'Carla Reyes',\n      note: 'Manager account',\n      password: 'securePass3',\n      property_id: 103,\n      phone_prefix: '+61',\n      username: 'carlar',\n      email: 'carla.reyes@example.com',\n      is_active: true,\n      last_signed_in: '2025-02-19',\n      created_at: '2024-01-05',\n      role: 'frontdesk',\n    },\n    {\n      id: 4,\n      mobile: '4567890123',\n      name: 'Daniel Kim',\n      note: 'Viewer only',\n      password: 'securePass4',\n      property_id: 104,\n      phone_prefix: '+81',\n      username: 'danielk',\n      email: 'daniel.kim@example.com',\n      is_active: false,\n      last_signed_in: '2025-01-10',\n      created_at: '2022-08-23',\n      role: 'frontdesk',\n    },\n    {\n      id: 5,\n      mobile: '5678901234',\n      name: 'Eva Liu',\n      note: 'Editor role',\n      password: 'securePass5',\n      property_id: 105,\n      phone_prefix: '+86',\n      username: 'evaliu',\n      email: 'eva.liu@example.com',\n      is_active: true,\n      last_signed_in: '2025-04-01',\n      created_at: '2023-12-12',\n      role: 'admin',\n    },\n  ];\n  @State() property_id: number;\n\n  private token = new Token();\n  private roomService = new RoomService();\n\n  @Watch('ticket')\n  ticketChanged(newValue: string, oldValue: string) {\n    if (newValue === oldValue) {\n      return;\n    }\n    this.token.setToken(this.ticket);\n    this.initializeApp();\n  }\n  private async initializeApp() {\n    try {\n      this.isLoading = true;\n      let propertyId = this.propertyid;\n      if (!this.propertyid && !this.p) {\n        throw new Error('Property ID or username is required');\n      }\n      // let roomResp = null;\n      if (!propertyId) {\n        console.log(propertyId);\n        const propertyData = await this.roomService.getExposedProperty({\n          id: 0,\n          aname: this.p,\n          language: this.language,\n          is_backend: true,\n          include_units_hk_status: true,\n        });\n        // roomResp = propertyData;\n        propertyId = propertyData.My_Result.id;\n      }\n      this.property_id = propertyId;\n      const requests = [this.roomService.fetchLanguage(this.language)];\n      if (this.propertyid) {\n        requests.push(\n          this.roomService.getExposedProperty({\n            id: this.propertyid,\n            language: this.language,\n            is_backend: true,\n            include_units_hk_status: true,\n          }),\n        );\n      }\n\n      await Promise.all(requests);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n  render() {\n    if (this.isLoading) {\n      return <ir-loading-screen></ir-loading-screen>;\n    }\n    return (\n      <Host>\n        <ir-toast></ir-toast>\n        <ir-interceptor></ir-interceptor>\n        <section class=\"p-2 d-flex flex-column\" style={{ gap: '1rem' }}>\n          <div class=\"d-flex px-1 align-items-center justify-content-between\">\n            <h3 class=\"mb-1 mb-md-0\">Extranet Users</h3>\n          </div>\n          <div class=\"\" style={{ gap: '1rem' }}>\n            <ir-user-management-table isSuperAdmin={this.isSuperAdmin} users={this.users}></ir-user-management-table>\n          </div>\n        </section>\n      </Host>\n    );\n  }\n}\n"]}