{"version":3,"file":"ir-user-form-panel.js","sourceRoot":"","sources":["../../../../src/components/ir-user-management/ir-user-form-panel/ir-user-form-panel.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Event, EventEmitter, Fragment, Prop, State, h } from '@stencil/core';\r\n\r\nimport locales from '@/stores/locales.store';\r\nimport { z, ZodError } from 'zod';\r\nimport { HouseKeepingService } from '@/services/housekeeping.service';\r\nimport { CONSTANTS } from '@/utils/constants';\r\nimport { UserService } from '@/services/user.service';\r\nimport calendar_data from '@/stores/calendar-data';\r\nimport { User } from '@/models/Users';\r\nimport { _formatTime } from '@/components/ir-booking-details/functions';\r\nimport moment from 'moment';\r\nimport { UAParser } from 'ua-parser-js';\r\nimport { AllowedUser } from '../types';\r\nimport { InterceptorError } from '@/components/ir-interceptor/InterceptorError';\r\nimport Token from '@/models/Token';\r\n\r\n@Component({\r\n  tag: 'ir-user-form-panel',\r\n  styleUrls: ['ir-user-form-panel.css', '../../../common/sheet.css'],\r\n  scoped: true,\r\n})\r\nexport class IrUserFormPanel {\r\n  @Prop() user: User;\r\n  @Prop() userTypes = Map<number | string, string>;\r\n  @Prop() isEdit: boolean = false;\r\n  @Prop() language: string = 'en';\r\n  @Prop() property_id: number;\r\n  @Prop() haveAdminPrivileges: boolean;\r\n  @Prop() superAdminId: string = '5';\r\n  @Prop() userTypeCode: string | number;\r\n  @Prop() allowedUsersTypes: AllowedUser[] = [];\r\n  @Prop() baseUserTypeCode: string | number;\r\n\r\n  @State() isLoading: boolean = false;\r\n  @State() autoValidate = false;\r\n  @State() showFullHistory = false;\r\n\r\n  @State() userInfo: User = {\r\n    type: '',\r\n    id: -1,\r\n    is_active: true,\r\n    sign_ins: null,\r\n    created_on: null,\r\n    mobile: '',\r\n    name: '',\r\n    note: '',\r\n    password: '',\r\n    email: '',\r\n    property_id: null,\r\n    username: null,\r\n    phone_prefix: null,\r\n  };\r\n\r\n  @State() errors: { [P in keyof User]?: any } | null = null;\r\n  @State() showPasswordValidation: boolean = false;\r\n  @State() isUsernameTaken: boolean;\r\n  @State() isOpen: boolean;\r\n  @State() emailErrorMessage: string;\r\n\r\n  @Event() resetData: EventEmitter<null>;\r\n  @Event() closeSideBar: EventEmitter<null>;\r\n\r\n  private housekeepingService = new HouseKeepingService();\r\n  private userService = new UserService();\r\n  private disableFields = false;\r\n  private isPropertyAdmin = false;\r\n  private token = new Token();\r\n  private mobileMask = {};\r\n  private userSchema = z.object({\r\n    mobile: z.string().min(4).max(20),\r\n    email: z.string().email(),\r\n    password: z\r\n      .string()\r\n      .nullable()\r\n      // .regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[!@#$%^&*()\\-_=+]).{8,16}$/)\r\n      .refine(\r\n        password => {\r\n          if (this.user && !this.userInfo?.password) {\r\n            return true;\r\n          }\r\n          return CONSTANTS.PASSWORD.test(password);\r\n        },\r\n        { message: 'Password must be at least 8 characters long.' },\r\n      ),\r\n    type: z.union([z.literal(1), z.literal(Number(this.superAdminId?.toString() ?? '5')), z.coerce.string().nonempty().min(2)]),\r\n    username: z\r\n      .string()\r\n      .min(3)\r\n      .refine(\r\n        async name => {\r\n          if (this.user && this.user.username) {\r\n            return true;\r\n          }\r\n          if (name.length >= 3) {\r\n            return !(await new UserService().checkUserExistence({ UserName: name }));\r\n          }\r\n          return true;\r\n        },\r\n        { message: 'Username already exists.' },\r\n      ),\r\n  });\r\n  //make user active by default\r\n  async componentWillLoad() {\r\n    if (!this.user) {\r\n      this.userInfo['property_id'] = this.property_id;\r\n      // this.showPasswordValidation = true;\r\n    }\r\n    if (this.user) {\r\n      this.autoValidate = true;\r\n      this.userInfo = { ...this.user, password: '' };\r\n      // this.disableFields = true;\r\n    }\r\n    this.isPropertyAdmin = this.userTypeCode.toString() === '17';\r\n    if (this.isPropertyAdmin) {\r\n      this.updateUserField('type', '17');\r\n    }\r\n    this.mobileMask = {\r\n      mask: `{${calendar_data.country.phone_prefix}} 000000000000`,\r\n      lazy: false,\r\n      autofix: true,\r\n      placeholderChar: '\\u200B',\r\n    };\r\n  }\r\n\r\n  private updateUserField(key: keyof User, value: any) {\r\n    this.userInfo = { ...this.userInfo, [key]: value };\r\n  }\r\n\r\n  private async createOrUpdateUser() {\r\n    try {\r\n      this.isLoading = true;\r\n      this.emailErrorMessage = undefined;\r\n      if (!this.autoValidate) {\r\n        this.autoValidate = true;\r\n      }\r\n      const toValidateUserInfo = {\r\n        ...this.userInfo,\r\n        base_user_type_code: this.baseUserTypeCode,\r\n        property_id: this.property_id,\r\n        password: this.user && this.userInfo.password === '' ? this.user.password : this.userInfo.password,\r\n        type: Number(this.userInfo.type),\r\n      };\r\n      console.log('toValidateUserInfo', { ...toValidateUserInfo, mobile: toValidateUserInfo.mobile.split(' ').join('').replace(calendar_data.country.phone_prefix, '') });\r\n      await this.userSchema.parseAsync({ ...toValidateUserInfo, mobile: toValidateUserInfo.mobile.split(' ').join('').replace(calendar_data.country.phone_prefix, '') });\r\n      if (this.errors) {\r\n        this.errors = null;\r\n      }\r\n      await this.userService.handleExposedUser(toValidateUserInfo);\r\n      this.resetData.emit(null);\r\n      this.closeSideBar.emit(null);\r\n    } catch (error) {\r\n      const e: any = {};\r\n      if (error instanceof ZodError) {\r\n        console.error(error);\r\n        error.issues.map(err => {\r\n          e[err.path[0]] = true;\r\n        });\r\n      } else if (error instanceof InterceptorError && error.code === 'EMAIL_EXISTS') {\r\n        e['email'] = true;\r\n        this.emailErrorMessage = 'This email is already in use. Please create another one.';\r\n      }\r\n      this.errors = e;\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n  private async handleBlur(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    if (this.user || !this.userInfo.name) {\r\n      return;\r\n    }\r\n    const usermame = await this.housekeepingService.generateUserName(this.userInfo.name);\r\n    this.updateUserField('username', usermame);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <form\r\n        class=\"sheet-container\"\r\n        onSubmit={async e => {\r\n          e.preventDefault();\r\n          await this.createOrUpdateUser();\r\n        }}\r\n      >\r\n        <ir-title class=\"px-1 sheet-header\" displayContext=\"sidebar\" label={this.isEdit ? this.user.username : 'Create New User'}></ir-title>\r\n        <section class=\"px-1 sheet-body\">\r\n          <ir-input-text\r\n            testId=\"email\"\r\n            zod={this.userSchema.pick({ email: true })}\r\n            wrapKey=\"email\"\r\n            autoValidate={this.autoValidate}\r\n            error={this.errors?.email}\r\n            label={locales.entries.Lcz_Email}\r\n            placeholder=\"\"\r\n            onTextChange={e => this.updateUserField('email', e.detail)}\r\n            value={this.userInfo.email}\r\n            onInputBlur={this.handleBlur.bind(this)}\r\n            maxLength={40}\r\n            errorMessage={this.emailErrorMessage}\r\n          />\r\n          <ir-input-text\r\n            testId=\"mobile\"\r\n            disabled={this.disableFields}\r\n            zod={this.userSchema.pick({ mobile: true })}\r\n            wrapKey=\"mobile\"\r\n            error={this.errors?.mobile}\r\n            asyncParse\r\n            autoValidate={this.user ? (this.userInfo?.mobile !== this.user.mobile ? true : false) : this.autoValidate}\r\n            label=\"Mobile\"\r\n            mask={this.mobileMask}\r\n            placeholder={''}\r\n            value={this.userInfo.mobile}\r\n            onTextChange={e => this.updateUserField('mobile', e.detail)}\r\n          />\r\n          {(this.user && this.user?.type?.toString() === this.superAdminId) || this.isPropertyAdmin ? null : (\r\n            <div class=\"mb-1\">\r\n              <ir-select\r\n                testId=\"user_type\"\r\n                error={this.errors?.type && !this.userInfo.type}\r\n                disabled={this.disableFields}\r\n                label=\"Role\"\r\n                data={this.allowedUsersTypes.map(t => ({\r\n                  text: t.value,\r\n                  value: t.code,\r\n                }))}\r\n                firstOption={'Select...'}\r\n                selectedValue={this.userInfo.type?.toString()}\r\n                onSelectChange={e => this.updateUserField('type', e.detail)}\r\n              />\r\n            </div>\r\n          )}\r\n          {this.user?.type?.toString() !== '5' && (\r\n            <Fragment>\r\n              <input type=\"text\" name=\"dummy\" style={{ display: 'none' }} />\r\n              <ir-input-text\r\n                testId=\"username\"\r\n                zod={this.userSchema.pick({ username: true })}\r\n                wrapKey=\"username\"\r\n                autoValidate={this.autoValidate}\r\n                error={this.errors?.username}\r\n                label=\"Username\"\r\n                disabled={this.disableFields}\r\n                placeholder=\"\"\r\n                onTextChange={e => this.updateUserField('username', e.detail)}\r\n                value={this.userInfo.username}\r\n                onInputBlur={this.handleBlur.bind(this)}\r\n                maxLength={40}\r\n                autoComplete=\"off\"\r\n              />\r\n            </Fragment>\r\n          )}\r\n          {!this.user ? (\r\n            <Fragment>\r\n              <input type=\"text\" name=\"dummy\" style={{ display: 'none' }} />\r\n              <ir-input-text\r\n                testId=\"password\"\r\n                autoValidate={this.user ? (!this.userInfo?.password ? false : true) : this.autoValidate}\r\n                label={'Password'}\r\n                value={this.userInfo.password}\r\n                autoComplete=\"off\"\r\n                type=\"password\"\r\n                maxLength={16}\r\n                zod={this.userSchema.pick({ password: true })}\r\n                wrapKey=\"password\"\r\n                error={this.errors?.password}\r\n                onInputFocus={() => (this.showPasswordValidation = true)}\r\n                onInputBlur={() => {\r\n                  // if (this.user) this.showPasswordValidation = false;\r\n                }}\r\n                onTextChange={e => this.updateUserField('password', e.detail)}\r\n              ></ir-input-text>\r\n              {this.showPasswordValidation && <ir-password-validator class=\"mb-1\" password={this.userInfo.password}></ir-password-validator>}\r\n            </Fragment>\r\n          ) : (\r\n            this.haveAdminPrivileges &&\r\n            this.user.type.toString() !== this.superAdminId &&\r\n            (this.user?.type.toString() === '17' && this.userTypeCode?.toString() === '17' ? null : (\r\n              <div class=\"d-flex mt-2 align-items-center justify-content-between\">\r\n                <h4 class=\"m-0 p-0 logins-history-title\">Password</h4>\r\n                <ir-button size=\"sm\" btn_styles={'pr-0'} onClickHandler={() => (this.isOpen = true)} text=\"Change password\" btn_color=\"link\"></ir-button>\r\n              </div>\r\n            ))\r\n          )}\r\n          {this.user?.sign_ins?.length > 0 && (\r\n            <section class=\"logins-history-section mt-2\">\r\n              <div class=\"d-flex align-items-center logins-history-title-container justify-content-between\">\r\n                <h4 class=\"logins-history-title m-0 p-0\">Recent sign-ins</h4>\r\n                {this.user.sign_ins.length > 5 && (\r\n                  <ir-button\r\n                    btn_styles={'pr-0'}\r\n                    text={!this.showFullHistory ? 'View all' : 'View less'}\r\n                    btn_color=\"link\"\r\n                    size=\"sm\"\r\n                    onClickHandler={() => (this.showFullHistory = !this.showFullHistory)}\r\n                  ></ir-button>\r\n                )}\r\n              </div>\r\n              <ul class=\"logins-history-list\">\r\n                {this.user.sign_ins.slice(0, this.showFullHistory ? this.user.sign_ins.length : 5).map((s, i) => {\r\n                  const ua = UAParser(s.user_agent);\r\n                  return (\r\n                    <li class=\"login-entry\" key={s.date + '_' + i}>\r\n                      <div class=\"login-meta\">\r\n                        <p class=\"login-datetime\">\r\n                          {moment(s.date, 'YYYY-MM-DD').format('DD-MMM-YYYY')} {_formatTime(s.hour?.toString(), s.minute?.toString())} |\r\n                        </p>\r\n                        <p class=\"login-location\">\r\n                          <span class=\"login-ip\">IP: {s.ip}</span> &nbsp;|&nbsp;\r\n                          <span class=\"login-country\">Location: {s.country}</span> &nbsp;|&nbsp;\r\n                          <span class=\"login-os\">\r\n                            OS: {ua.os.name ?? 'N/A'} {ua.os.version}\r\n                          </span>\r\n                        </p>\r\n                      </div>\r\n                      {/* {ua.device.type && (\r\n                        <div class=\"login-user-agent\">\r\n                          <p class=\"ua-device\">\r\n                            {ua.device.vendor || ''} {ua.device.model} ({ua.device.type})\r\n                          </p>\r\n                        </div>\r\n                      )} */}\r\n                    </li>\r\n                  );\r\n                })}\r\n              </ul>\r\n            </section>\r\n          )}\r\n          <ir-sidebar\r\n            open={this.isOpen}\r\n            showCloseButton={false}\r\n            style={{\r\n              '--sidebar-block-padding': '0',\r\n            }}\r\n            onIrSidebarToggle={e => {\r\n              e.stopImmediatePropagation();\r\n              e.stopPropagation();\r\n              this.isOpen = false;\r\n            }}\r\n          >\r\n            {this.isOpen && (\r\n              <ir-reset-password\r\n                ticket={this.token.getToken()}\r\n                skip2Fa={true}\r\n                username={this.user.username}\r\n                onCloseSideBar={e => {\r\n                  e.stopImmediatePropagation();\r\n                  e.stopPropagation();\r\n                  this.isOpen = false;\r\n                }}\r\n                slot=\"sidebar-body\"\r\n              ></ir-reset-password>\r\n            )}\r\n          </ir-sidebar>\r\n        </section>\r\n        <div class=\"sheet-footer\">\r\n          <ir-button\r\n            data-testid=\"cancel\"\r\n            onClickHandler={() => this.closeSideBar.emit(null)}\r\n            class=\"flex-fill\"\r\n            btn_styles=\"w-100 justify-content-center align-items-center\"\r\n            btn_color=\"secondary\"\r\n            text={locales.entries.Lcz_Cancel}\r\n          ></ir-button>\r\n          <ir-button\r\n            data-testid=\"save\"\r\n            isLoading={this.isLoading}\r\n            class=\"flex-fill\"\r\n            btn_type=\"submit\"\r\n            btn_styles=\"w-100 justify-content-center align-items-center\"\r\n            text={locales.entries.Lcz_Save}\r\n          ></ir-button>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n"]}