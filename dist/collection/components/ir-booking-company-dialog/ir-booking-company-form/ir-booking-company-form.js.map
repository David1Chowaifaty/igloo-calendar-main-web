{"version":3,"file":"ir-booking-company-form.js","sourceRoot":"","sources":["../../../../src/components/ir-booking-company-dialog/ir-booking-company-form/ir-booking-company-form.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Event, EventEmitter, h, Prop, State } from '@stencil/core';\nimport { Booking } from '@/models/booking.dto';\nimport { BookingService } from '@/services/booking-service/booking.service';\n@Component({\n  tag: 'ir-booking-company-form',\n  styleUrl: 'ir-booking-company-form.css',\n  scoped: true,\n})\nexport class IrBookingCompanyForm {\n  @Prop() booking: Booking;\n  @Prop() formId: string;\n  @State() open: boolean;\n  @State() isLoading: boolean;\n  @State() formData: Pick<Booking, 'company_name' | 'company_tax_nbr'>;\n\n  @Event({ composed: true, bubbles: true }) resetBookingEvt: EventEmitter<Booking>;\n\n  private bookingService = new BookingService();\n\n  componentWillLoad() {\n    this.formData = { company_name: this.booking.company_name, company_tax_nbr: this.booking.company_tax_nbr };\n  }\n\n  private updateGuest(params: Partial<Booking['guest']>) {\n    this.formData = { ...this.formData, ...params };\n  }\n\n  private async saveCompany() {\n    try {\n      const booking = {\n        assign_units: true,\n        is_pms: true,\n        is_direct: this.booking.is_direct,\n        is_backend: true,\n        is_in_loyalty_mode: this.booking.is_in_loyalty_mode,\n        promo_key: this.booking.promo_key,\n        extras: this.booking.extras,\n        agent: this.booking.agent,\n        booking: {\n          ...this.formData,\n          from_date: this.booking.from_date,\n          to_date: this.booking.to_date,\n          remark: this.booking.remark,\n          booking_nbr: this.booking.booking_nbr,\n          property: this.booking.property,\n          booked_on: this.booking.booked_on,\n          source: this.booking.source,\n          rooms: this.booking.rooms,\n          currency: this.booking.currency,\n          arrival: this.booking.arrival,\n          guest: this.booking.guest,\n        },\n        pickup_info: this.booking.pickup_info,\n      };\n      await this.bookingService.doReservation(booking);\n      this.resetBookingEvt.emit({ ...this.booking, ...this.formData });\n      this.open = false;\n    } catch (error) {}\n  }\n\n  render() {\n    return (\n      <form\n        id={this.formId}\n        onSubmit={e => {\n          e.preventDefault();\n          this.saveCompany();\n        }}\n        class=\"booking-company__form\"\n      >\n        <ir-input value={this.formData.company_name} onText-change={e => this.updateGuest({ company_name: e.detail })} label=\"Name\" autofocus placeholder=\"XYZ LTD\"></ir-input>\n        <ir-input value={this.formData.company_tax_nbr} onText-change={e => this.updateGuest({ company_tax_nbr: e.detail })} label=\"Tax ID\" placeholder=\"VAT 123456\"></ir-input>\n      </form>\n    );\n  }\n}\n"]}