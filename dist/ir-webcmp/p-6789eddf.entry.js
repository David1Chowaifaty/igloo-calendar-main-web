import{r as e,g as t,h as i,H as r,c as a,F as s}from"./p-d239357b.js";import{P as o}from"./p-c6c41b50.js";import{T as n}from"./p-f8b7c0cd.js";import{D as c}from"./p-367551b0.js";import{B as l}from"./p-bb6f3c4b.js";import{a as d}from"./p-bf44a732.js";import"./p-cc7e2ae6.js";import"./p-6c4ba7c0.js";import"./p-99cb260a.js";import"./p-c5894a47.js";import"./p-4e493fea.js";const h=":host{display:block}";const p=h;const f=class{constructor(t){e(this,t)}get el(){return t(this)}menuGroups=[];menuItems=[];selectedHref;componentWillLoad(){const e=this.selectedHref??this.getCurrentLocation();this.selectedHref=this.normalizeHref(e)}componentDidLoad(){this.handleSlotChange()}handleLocationChange(){this.updateSelectedHref(this.getCurrentLocation())}async setSelectedHref(e){this.updateSelectedHref(e)}handleSelectedHrefChange(e){this.applySelection(e)}handleSlotChange=()=>{this.menuGroups=Array.from(this.el.querySelectorAll("ir-menu-group"));this.menuItems=Array.from(this.el.querySelectorAll("ir-menu-item"));this.applySelection(this.selectedHref)};updateSelectedHref(e){const t=this.normalizeHref(e);if(t!==this.selectedHref){this.selectedHref=t}}getCurrentLocation(){if(typeof window==="undefined")return undefined;const{pathname:e,search:t,hash:i}=window.location;const r=e.replace(/\/+$/,"")||"/";let a=r.split("/").pop()??r;if(a===""){a="/"}return`${a}${t}${i}`}normalizeHref(e){if(!e)return undefined;if(typeof window==="undefined")return e;try{const t=new URL(e,window.location.origin);const i=t.pathname.replace(/\/+$/,"")||"/";return`${i}${t.search}${t.hash}`}catch{return e}}applySelection(e){const t=this.normalizeHref(e);this.menuItems.forEach((e=>{const i=this.normalizeHref(e.href);const r=!!t&&i===t;if(e.selected!==r){e.selected=r}}))}openGroupForSelectedHref(e){const t=this.normalizeHref(e);if(!t)return;for(const e of this.menuItems){const i=this.normalizeHref(e.href);if(i===t){const t=e.closest("ir-menu-group");if(t&&!t.open){t.open=true}break}}}handleItemClick(e){const t=e.composedPath();const i=t.find((e=>{if(!(e instanceof HTMLElement))return false;return e.tagName?.toLowerCase()==="ir-menu-item"}));if(i?.href){this.updateSelectedHref(i.href)}}handleGroupOpen(e){if(!e.detail)return;const t=e.target;const i=t.groupName;for(const e of this.menuGroups){if(e!==t&&e.groupName===i&&e.open){e.open=false}}}handleOpenChange(e){e.stopImmediatePropagation();e.stopPropagation();if(e.detail){const e=this.selectedHref??this.getCurrentLocation();this.openGroupForSelectedHref(e)}}render(){return i(r,{key:"b5a2f92de72a8d87747de1d29c0a8096fec48940"},i("slot",{key:"c9bd9fe07e72cd71f72352216fcbb8bb103e896d",onSlotchange:this.handleSlotChange}))}static get watchers(){return{selectedHref:["handleSelectedHrefChange"]}}};f.style=p;const u=":host{display:block}.menu__drawer::part(header){border-bottom:0}.menu__drawer::part(body){padding:calc(var(--spacing) - 0.5rem)}";const m=u;const _=class{constructor(t){e(this,t);this.menuOpenChanged=a(this,"menuOpenChanged",7)}open;menuOpenChanged;componentWillLoad(){document.addEventListener("keydown",this.handleDocumentKeyDown)}disconnectedCallback(){document.removeEventListener("keydown",this.handleDocumentKeyDown)}handleDocumentKeyDown=e=>{const t=e.ctrlKey||e.metaKey;if(t&&e.key==="b"){e.preventDefault();this.open=!this.open}};async openDrawer(){this.open=true}handleOpenChange(){this.menuOpenChanged.emit(this.open)}render(){return i("ir-drawer",{key:"e9b50beb61bc86b8681e71bf1cdf0b18af23525f",class:"menu__drawer",open:this.open,onDrawerHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.open=false},style:{"--ir-drawer-width":"25rem"},placement:"start"},i("slot",{key:"0129ccfb7eff9f5813f1911cf560f42143f8888f",name:"label",slot:"label"}),i("slot",{key:"c6b278d79f54e940e15bf033b153db4159b09c33"}),i("slot",{key:"8f4f8578301fdd85914050a9ea1e5dae4266b8ac",name:"footer",slot:"footer"}))}static get watchers(){return{open:["handleOpenChange"]}}};_.style=m;const w=":host{display:block}.menu-group__details::part(summary){width:100%}.menu-group__details::part(header){transition:color var(--wa-transition-normal, 150ms ease);transition-property:background, border, box-shadow, color;transition-duration:var(--wa-transition-fast);transition-timing-function:var(--wa-transition-easing)}.menu-group__details::part(header),.menu-group__details::part(content){padding:0;border-radius:0;padding:0 0.5rem}.menu-group__details::part(header):hover{color:var(--wa-color-text-normal);background-color:var(--wa-color-neutral-fill-quiet)}.menu-group__details::part(header):active{color:var(--wa-color-on-quiet, var(--wa-color-neutral-on-quiet));background-color:color-mix(in oklab, var(--wa-color-fill-quiet, var(--wa-color-neutral-fill-quiet)), var(--wa-color-mix-active))}.menu-group__details::part(content){display:flex;flex-direction:column;border-inline-start:1px solid var(--wa-color-surface-border);margin-inline-start:1.5rem}";const g=w;const y=class{constructor(t){e(this,t);this.openChanged=a(this,"openChanged",7)}open;groupName;openChanged;handleHide=e=>{e.stopImmediatePropagation();e.stopPropagation();this.open=false;this.openChanged.emit(false)};handleShow=e=>{e.stopImmediatePropagation();e.stopPropagation();this.open=true;this.openChanged.emit(true)};render(){return i("wa-details",{key:"ad0468cafd8b70a80f91792670d4113afb90ab82",class:"menu-group__details",open:this.open,appearance:"plain",name:this.groupName,"onwa-hide":this.handleHide,"onwa-show":this.handleShow},i("slot",{key:"5816efd64865c1441ae2665e8d833bd023e1a3ef",slot:"summary",name:"summary"}),i("slot",{key:"d3214d70ebb6c594733964d3b2b51a656800071d"}))}};y.style=g;const b=":host{display:block;width:100%}.menu-item__link{all:unset;display:flex;align-items:center;box-sizing:border-box;width:100%;color:var(--wa-color-text-quiet);padding:0.5rem;cursor:pointer;transition:color var(--wa-transition-normal, 150ms ease);transition-property:background, border, box-shadow, color;transition-duration:var(--wa-transition-fast);transition-timing-function:var(--wa-transition-easing)}.menu-item__label{flex:1 1 0%}.menu-item__link:hover{color:var(--wa-color-on-quiet, var(--wa-color-neutral-on-quiet));background-color:var(--wa-color-fill-quiet, var(--wa-color-neutral-fill-quiet))}.menu-item__link:active{color:var(--wa-color-on-quiet, var(--wa-color-neutral-on-quiet));background-color:color-mix(in oklab, var(--wa-color-fill-quiet, var(--wa-color-neutral-fill-quiet)), var(--wa-color-mix-active))}.menu-item__link:focus{outline:none}.menu-item__link:focus-visible{outline:var(--wa-focus-ring);outline-offset:var(--wa-focus-ring-offset)}.menu-item__link--selected{color:var(--wa-color-primary-600, var(--wa-color-primary-text, #2563eb));font-weight:600}.menu-item__link--selected:hover{color:var(--wa-color-primary-600, var(--wa-color-primary-text, #2563eb))}.menu-item__link--clickable{padding-left:1rem;padding-right:1rem}";const k=b;const v=class{constructor(t){e(this,t)}href;selected;badge;render(){const e={"menu-item__link":true,"menu-item__link--selected":!!this.selected,"menu-item__link--clickable":!!this.href};const t=i(s,{key:"fefa8a8832a9cac20772abdcad1c36e450ea196b"},i("span",{key:"12a0926c324d227e002a7747e698290f6c76e448",class:"menu-item__icon"},i("slot",{key:"f18e98842b78b5b94d9198b80bd095d9023a2047",name:"icon"})),i("span",{key:"b49ce14248cb81b33283ddb043db7c36ba45288e",class:"menu-item__label"},i("slot",{key:"731cd2c758c0738515d0d7a8c627865a4a5af145"})),this.badge?i("wa-badge",{variant:"danger",class:"menu-item__badge",appearance:"accent"},this.badge):null);return i(r,{key:"a7c6f03768a8d8f06e70da3b0f1aee0ba6061a3d"},this.href?i("a",{class:e,href:this.href,"aria-current":this.selected?"page":undefined},t):i("div",{class:e},t))}};v.style=k;const x=".sc-ir-pms-payment-due-alert-h{display:block}.pms-payment-due-alert__callout-message.sc-ir-pms-payment-due-alert{width:100%;display:flex;text-align:center;flex-wrap:wrap;justify-content:center;align-items:center;gap:1rem}";const C=x;const S=class{constructor(t){e(this,t)}propertyid;ticket;baseUrl;notifications=[];tokenService=new n;propertyService=new o;componentWillLoad(){if(this.baseUrl){this.tokenService.setBaseUrl(this.baseUrl)}if(this.ticket){this.tokenService.setToken(this.ticket);this.fetchNotifications()}}handleTicketChange(e,t){if(e===t||!e){return}this.tokenService.setToken(e);this.fetchNotifications()}async fetchNotifications(){if(!this.propertyid){this.notifications=[];return}try{this.notifications=await this.propertyService.fetchNotifications(this.propertyid)}catch(e){console.log(e);this.notifications=[]}}render(){const e=this.notifications?.filter((e=>e.type==="financial"))?.map((e=>e.message))?.filter(Boolean)?.join(" ");if(!e){return i(r,null)}return i(r,null,i("wa-callout",{class:"pms-payment-due-alert__callout",size:"small",appearance:"filled",variant:"danger"},i("div",{class:"pms-payment-due-alert__callout-message"},i("wa-icon",{style:{color:"var(--wa-color-danger-fill-loud)",fontSize:"1rem"},slot:"icon",name:"triangle-exclamation"}),i("span",null,e))))}static get watchers(){return{ticket:["handleTicketChange"]}}};S.style=C;const P=":host{display:block}.pms-autocomplete__end-slot{display:flex;align-items:center;gap:0.5rem}.pms-search__autocomplete::part(listbox){max-height:250px;width:max-content;max-width:350px}.pms-search__option{display:flex;align-items:center;justify-content:space-between;gap:0.5rem}.pms-search__option-label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.pms-search__option-status{flex-shrink:0}.pms-search__empty{display:flex;align-items:center;flex-direction:column;gap:0.75rem;padding:0.75rem 0.9rem;border-radius:0.75rem}.pms-search__empty-icon{font-size:1.1rem;opacity:0.7;margin-top:0.15rem}.pms-search__empty-content{display:flex;flex-direction:column;align-items:center;gap:0.15rem;min-width:0}.pms-search__empty-title{font-weight:600;line-height:1.2}.pms-search__empty-subtitle{font-size:0.875rem;opacity:0.8;line-height:1.25}.pms-search__empty-example{font-weight:600;opacity:0.95}.pms-search__option{display:grid;grid-template-columns:120px   \n    1fr           ;align-items:center;gap:1rem}.pms-search__option-icon{width:1.5625rem;flex-shrink:0}.pms-search__option-bookings{margin:0;padding:0;display:flex;flex-direction:column;line-height:1.2}.pms-search__option-booking{font-size:0.875rem;font-weight:500}.pms-search__option-channel-booking{font-size:0.75rem}.pms-search__option-label{font-size:0.875rem;font-weight:500;white-space:nowrap}.pms-search__option-status{margin-left:auto}.pms-search__option-icon{width:1rem}.pms-search__option-status,.pms-search__autocomplete-option::part(checked-icon){display:none}.pms-search__option-label,.pms-search__option-booking{font-size:1rem}@media (width >= 40rem){.pms-search__option-icon{width:1.5625rem;flex-shrink:0}}@media (min-width: 768px){.pms-search__autocomplete::part(listbox){width:auto;max-width:var(--auto-size-available-width)}.pms-search__option-status{display:inline-flex}}";const I=P;var L=undefined&&undefined.__decorate||function(e,t,i,r){var a=arguments.length,s=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(e,t,i,r);else for(var n=e.length-1;n>=0;n--)if(o=e[n])s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s;return a>3&&s&&Object.defineProperty(t,i,s),s};const j=class{constructor(t){e(this,t);this.comboboxSelect=a(this,"combobox-select",7)}propertyid;ticket;shortcutHint=null;bookings=[];isLoading;tokenService=new n;bookingListingService=new l;comboboxSelect;autoCompleteRef;componentWillLoad(){document.addEventListener("keydown",this.focusInput);this.detectShortcutHint();if(this.ticket){this.tokenService.setToken(this.ticket)}}disconnectedCallback(){document.removeEventListener("keydown",this.focusInput)}handleTicketChange(e,t){console.log(this.ticket);if(e!==t&&e){this.tokenService.setToken(this.ticket)}}detectShortcutHint(){const e="ontouchstart"in window||navigator.maxTouchPoints>0;if(e){this.shortcutHint=null;return}const t=/Mac|iPhone|iPad|iPod/.test(navigator.platform);this.shortcutHint=t?"âŒ˜ K":"Ctrl K"}focusInput=e=>{const t=e.key.toLowerCase()==="k";const i=e.metaKey||e.ctrlKey;if(t&&i){e.preventDefault();console.log(this.autoCompleteRef);this.autoCompleteRef.focusInput()}};async fetchBookings(e){e.stopImmediatePropagation();e.stopPropagation();const t=e.detail;this.autoCompleteRef.hide();if(!t){return}const i=/^(?:-?\d+|.{3}-.*)$/.test(t);this.isLoading=true;this.bookings=await this.bookingListingService.getExposedBookings({book_nbr:i?t:null,name:i?null:t,property_id:this.propertyid,filter_type:1,from:"2026-01-01",to:"2026-01-08",balance_filter:"0",start_row:0,end_row:20,total_count:0,booking_status:"",affiliate_id:0,is_mpo_managed:false,is_mpo_used:false,is_for_mobile:false,is_combined_view:false,is_to_export:false,property_ids:null,channel:""},{skipStore:true});this.autoCompleteRef.show();this.isLoading=false}handleComboboxSelect(e){e.stopImmediatePropagation();e.stopPropagation();this.comboboxSelect.emit({item:{label:"",value:e.detail}})}render(){return i(r,{key:"6596213e70b096d32e6948089fd7aca361a3aee3"},i("ir-autocomplete",{key:"5d1163079ab2438df706dd354b5c3f49bd0f7282",class:"pms-search__autocomplete",placeholder:"Search",ref:e=>this.autoCompleteRef=e,"onCombobox-change":e=>this.handleComboboxSelect(e),"onText-change":e=>this.fetchBookings(e),pill:true,appearance:"filled"},i("wa-icon",{key:"ac0de9a316fe6ddaf42d428d1ec15ae713003288",name:"magnifying-glass",slot:"start"}),i("div",{key:"9a36717f64f94ad0e7deca9785d547d046d1b8a3",slot:"end",class:"pms-autocomplete__end-slot"},this.isLoading&&i("wa-spinner",{key:"a45bd8ca5f2ebb7624f1ea761ab61787957090ac"}),this.shortcutHint&&i("span",{key:"5b94dc6431ae6769aeee812e7b1e995af2d9430d"},this.shortcutHint)),this.bookings?.length===0&&!this.isLoading&&i("div",{key:"9f1134ec9dad0fdc4b4fd6b9d77a47b90f761e94",class:"pms-search__empty",role:"status","aria-live":"polite"},i("wa-icon",{key:"3badcfcb9f41150cab42b2c3188d1134ff5d0687",name:"circle-info","aria-hidden":"true"}),i("div",{key:"ea694ddd19353417456df93a777da82132fd49e7",class:"pms-search__empty-content"},i("div",{key:"308c9f9bfe2aefde6a72ef5443c6806a91f4d241",class:"pms-search__empty-title"},"No results found"))),this.bookings.map((e=>{const t=`${e.booking_nbr}  ${e.guest.first_name} ${e.guest.last_name}`;return i("ir-autocomplete-option",{class:"pms-search__autocomplete-option",value:e.booking_nbr,label:t},i("img",{slot:"start",class:"pms-search__option-icon",src:e.origin.Icon,alt:e.origin.Label}),i("div",{class:"pms-search__option"},i("p",{class:"pms-search__option-bookings"},i("span",{class:"pms-search__option-booking"},e.booking_nbr),e.channel_booking_nbr&&i("span",{class:"pms-search__option-channel-booking"},e.channel_booking_nbr)),i("span",{class:"pms-search__option-label"},e.guest.first_name," ",e.guest.last_name)),i("ir-booking-status-tag",{slot:"end",class:"pms-search__option-status",status:e.status}))}))))}static get watchers(){return{ticket:["handleTicketChange"]}}};L([c(300)],j.prototype,"fetchBookings",null);j.style=I;const O=".sc-ir-property-switcher-h{display:block}.property-switcher__trigger.sc-ir-property-switcher{width:200px;padding:0;margin:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-align:start}.property-switcher__dialog.sc-ir-property-switcher::part(dialog){margin:0;max-width:100%;height:100%;max-height:100%;border-radius:0}.property-switcher__dialog.sc-ir-property-switcher::part(body){padding:0}.property-switcher__trigger-btn.sc-ir-property-switcher{width:100%}.property-switcher__trigger-btn.sc-ir-property-switcher::part(start){display:none}.property-switcher__trigger-btn.sc-ir-property-switcher::part(base){justify-content:space-between;width:100%}.property-switcher__loader.sc-ir-property-switcher,.property-switcher__dropdown-loader.sc-ir-property-switcher{display:flex;align-items:center;justify-content:center;gap:8px;padding:12px;min-width:100px}.property-switcher__loader.sc-ir-property-switcher{min-height:150px}@media (min-width: 640px){.property-switcher__dialog.sc-ir-property-switcher::part(dialog){margin:auto;inset:0;max-width:100%;border-radius:var(--wa-panel-border-radius);height:fit-content}.property-switcher__dialog.sc-ir-property-switcher::part(header){display:none}}";const A=O;const $=class{constructor(t){e(this,t);this.propertyChange=a(this,"propertyChange",7)}get el(){return t(this)}mode="dialog";ticket;baseUrl;propertyId;selectedLinkedPropertyId;open=false;isLinkedLoading=false;linkedLoaded=false;hasPool=false;propertyState={selected:null,linked:[],source:"storage"};displayMode="read-only";token=new n;propertyChange;storagePoller;userInfoPoller;lastSelectedAcRaw=null;lastUserInfoRaw=null;isUpdating=false;async componentWillLoad(){if(this.baseUrl)this.token.setBaseUrl(this.baseUrl);if(this.ticket){this.token.setToken(this.ticket);await this.init()}window.addEventListener("storage",this.handleStorageEvent)}disconnectedCallback(){this.stopPolling();window.removeEventListener("storage",this.handleStorageEvent)}async handleTicketChange(e,t){if(e!==t){this.token.setToken(e);await this.init()}}async handlePropertyIdChange(e){if(this.isUpdating)return;if(e&&e!==this.propertyState.selected?.PROPERTY_ID){await this.loadPropertyById(e,"external",undefined,false)}}handleLinkedPropertyIdChange(e){if(e&&!this.propertyState.linked.find((t=>t.property_id===e))){console.warn(`Linked property ${e} not found in available properties`)}}async init(){await this.pollSelectedAcStorage();this.pollUserInfoStorage();if(!this.propertyState.selected){this.startPolling()}}startPolling(){if(this.storagePoller)return;this.storagePoller=window.setInterval((()=>{this.pollSelectedAcStorage();this.pollUserInfoStorage()}),300)}stopPolling(){if(this.storagePoller){clearInterval(this.storagePoller);this.storagePoller=undefined}if(this.userInfoPoller){clearInterval(this.userInfoPoller);this.userInfoPoller=undefined}}handleStorageEvent=()=>{this.startPolling()};pollSelectedAcStorage=async()=>{const e=localStorage.getItem("_Selected_Ac");if(e===this.lastSelectedAcRaw)return;this.lastSelectedAcRaw=e;if(!e)return;let t;try{t=JSON.parse(e)}catch{return}await this.updatePropertyState(t,null,"storage");this.stopPolling()};pollUserInfoStorage=()=>{const e=localStorage.getItem("UserInfo_b");if(e===this.lastUserInfoRaw)return;this.lastUserInfoRaw=e;if(!e)return;this.resolveDisplayMode();if(this.userInfoPoller){clearInterval(this.userInfoPoller);this.userInfoPoller=undefined}};async updatePropertyState(e,t,i,r=false){this.isUpdating=true;const a={A_NAME:e.My_User?.USERNAME??"",COUNTRY_CODE:e.COUNTRY_ID,COUNTRY_NAME:e.My_Country?.L1_NAME_REF??"",PROPERTY_ID:e.AC_ID,PROPERTY_NAME:e.NAME};const s=Boolean(e.POOL);const o=this.propertyState.selected?.PROPERTY_ID===e.AC_ID;const n=o&&this.linkedLoaded&&s;const c=n?this.propertyState.linked:[];this.propertyState={selected:a,linked:c,source:i};this.hasPool=s;this.linkedLoaded=n;if(!n){this.isLinkedLoading=false}this.propertyId=a.PROPERTY_ID;this.selectedLinkedPropertyId=t?.property_id;this.resolveDisplayMode();if(r){this.propertyChange.emit({property:e,linkedProperty:t,allLinkedProperties:c})}if(this.open){this.ensureLinkedPropertiesLoaded()}this.isUpdating=false}async ensureLinkedPropertiesLoaded(){if(!this.hasPool||this.linkedLoaded||this.isLinkedLoading)return;if(!this.propertyState.selected?.PROPERTY_ID)return;this.isLinkedLoading=true;const e=await this.fetchLinkedProperties(this.propertyState.selected.PROPERTY_ID);this.propertyState={...this.propertyState,linked:e};this.linkedLoaded=true;this.isLinkedLoading=false}async fetchLinkedProperties(e){try{const{data:t}=await d.post(`${this.baseUrl??""}/Fetch_Linked_Properties`,{property_id:e});if(t.ExceptionMsg){throw new Error(t.ExceptionMsg)}return Array.isArray(t.My_Result)?t.My_Result:[]}catch(e){console.error("Failed to fetch linked properties",e);return[]}}resolveDisplayMode(){const e=localStorage.getItem("UserInfo_b");let t=null;try{if(e)t=JSON.parse(e)}catch{}const i=String(t?.USER_TYPE_CODE??"");if(i==="1"||i==="4"){this.displayMode="dialog";return}if(!this.propertyState?.selected||!this.hasPool){this.displayMode="read-only";return}this.displayMode="dropdown"}handlePropertySelected=async e=>{e.stopImmediatePropagation();e.stopPropagation();await this.loadPropertyById(e.detail,"user-selection",undefined,true)};handleDropdownSelect=async e=>{const t=Number(e);const i=this.propertyState.linked.find((e=>e.property_id===t));if(!i)return;await this.loadPropertyById(i.property_id,"user-selection",i,true)};async loadPropertyById(e,t,i,r=false){if(this.isUpdating)return;this.open=false;try{const{data:a}=await d.post(`${this.baseUrl??""}/Get_Ac_By_AC_ID_Adv`,{AC_ID:e,Bypass_Caching:true,IS_BACK_OFFICE:true});if(a.ExceptionMsg){throw new Error(a.ExceptionMsg)}await this.updatePropertyState(a.My_Result,i??null,t,r)}catch(e){console.error("Failed to fetch selected property details",e)}}renderReadOnly(){return i("p",{class:"property-switcher__trigger"},this.propertyState.selected?.PROPERTY_NAME??"Property")}trigger(){return i("wa-button",{size:"small",withCaret:true,class:"property-switcher__trigger-btn",variant:"neutral",appearance:"outlined",onClick:()=>{this.open=!this.open;if(this.open){this.ensureLinkedPropertiesLoaded()}}},i("p",{class:"property-switcher__trigger"},this.propertyState.selected?.PROPERTY_NAME??"Select property"))}render(){return i(r,{key:"7619f55053c6373ec0fed6e83787db9943fa5039"},this.displayMode==="read-only"&&this.renderReadOnly(),this.displayMode==="dropdown"&&i("wa-dropdown",{key:"2c3faed09bd5cd1d83c49c220630234badcc1346","onwa-show":()=>{this.ensureLinkedPropertiesLoaded()},"onwa-hide":e=>{e.stopPropagation();e.stopImmediatePropagation()},"onwa-select":e=>{e.stopPropagation();e.stopImmediatePropagation();this.handleDropdownSelect(Number(e.detail.item.value))}},i("wa-button",{key:"df9c71c64f24331a3097665594c36fece466ffe5",size:"small",class:"property-switcher__trigger-btn",slot:"trigger",withCaret:true,variant:"neutral",appearance:"outlined"},i("p",{key:"e7c2c4c27317069c22cc93b7ee635e4890ee72d8",class:"property-switcher__trigger"},this.propertyState.selected?.PROPERTY_NAME)),this.isLinkedLoading&&i("wa-dropdown-item",{key:"8a371ad7195bf244e7319b9026acdf58aaa40c13",disabled:true,class:"property-switcher__dropdown-loader"},i("wa-spinner",{key:"c857b4250387419e195d68071a898e37f82528d2"})),this.propertyState.linked?.map((e=>i("wa-dropdown-item",{value:e.property_id?.toString(),key:`dropdown-item-${e.property_id}`},e.name)))),this.displayMode==="dialog"&&i("div",{key:"78c5515cce7e372f335a5717563521af0ce4f310"},this.trigger(),i("ir-dialog",{key:"87766bd1f3a51d40e69d6ee71e3fc1d4330fc86e",open:this.open,label:"Find property",class:"property-switcher__dialog",style:{"--ir-dialog-width":"40rem"},onIrDialogAfterHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.open=false}},this.open&&(this.isLinkedLoading?i("div",{class:"property-switcher__loader"},i("ir-spinner",null)):i("ir-property-switcher-dialog-content",{onLinkedPropertyChange:e=>{e.stopImmediatePropagation();e.stopPropagation();this.handleDropdownSelect(Number(e.detail.property_id))},open:this.open,selectedPropertyId:this.propertyState.selected?.PROPERTY_ID,properties:this.propertyState.linked,onPropertySelected:this.handlePropertySelected})))))}static get watchers(){return{ticket:["handleTicketChange"],propertyId:["handlePropertyIdChange"],selectedLinkedPropertyId:["handleLinkedPropertyIdChange"]}}};$.style=A;export{f as ir_menu,_ as ir_menu_drawer,y as ir_menu_group,v as ir_menu_item,S as ir_pms_payment_due_alert,j as ir_pms_search,$ as ir_property_switcher};
//# sourceMappingURL=p-6789eddf.entry.js.map