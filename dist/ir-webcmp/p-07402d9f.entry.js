import{r as t,c as i,h as e,F as o,H as s}from"./p-jhiFt_tX.js";import{T as a}from"./p-DXG1YoZP.js";import{B as r}from"./p-ClSzIYoN.js";import{R as n}from"./p-CY1Ud2NS.js";import{l as c}from"./p-DRfRlSCW.js";import"./p-BdhGE_xS.js";import"./p-E-ZsRS8r.js";import"./p-CVpBaZqJ.js";import"./p-Mki5YqAR.js";import"./p-DeW5X45W.js";import"./p-CT3GgrvE.js";import"./p-vROPuQAY.js";const h=".sc-igl-book-property-container-h{display:block;margin:0;padding:0;letter-spacing:0px !important;font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;font-size:1rem !important;font-weight:400 !important;line-height:1.45 !important;color:#6b6f82 !important;text-align:left !important}.book-container.sc-igl-book-property-container{width:min-content;margin:0;padding:0}h3.sc-igl-book-property-container{font-size:1rem}";const l=class{constructor(e){t(this,e);this.resetBookingData=i(this,"resetBookingData");this.language="";this.ticket="";this.withIrToastAndInterceptor=true;this.calendarData={};this.bookingService=new r;this.roomService=new n;this.token=new a}setRoomsData(t){var i,e;let o=new Array;if((e=(i=t.My_Result)===null||i===void 0?void 0:i.roomtypes)===null||e===void 0?void 0:e.length){o=t.My_Result.roomtypes;t.My_Result.roomtypes.forEach((t=>{t.expanded=true}))}this.calendarData.roomsInfo=o}async initializeApp(){try{if(!this.propertyid&&!this.p){throw new Error("Property ID or username is required")}const[t,i,e]=await Promise.all([this.roomService.getExposedProperty({id:this.propertyid,language:this.language,aname:this.p}),this.roomService.fetchLanguage(this.language),this.bookingService.getCountries(this.language)]);if(!c.entries){c.entries=i.entries;c.direction=i.direction}this.countries=e;const{allowed_payment_methods:o,currency:s,allowed_booking_sources:a,adult_child_constraints:r,calendar_legends:n}=t["My_Result"];this.calendarData={currency:s,allowed_booking_sources:a,adult_child_constraints:r,legendData:n};this.setRoomsData(t);const h=["001","004"];this.showPaymentDetails=o.some((t=>h.includes(t.code)))}catch(t){console.error("Error initializing app:",t)}}componentWillLoad(){if(this.ticket!==""){this.token.setToken(this.ticket);this.initializeApp()}}ticketChanged(t,i){if(t===i){return}this.token.setToken(this.ticket);this.initializeApp()}handleCloseBookingWindow(){this.bookingItem=null}handleTriggerClicked(){const t=new Date;t.setDate(t.getDate()+1);this.bookingItem={FROM_DATE:this.from_date,defaultDateRange:{fromDate:new Date,fromDateStr:"",toDate:t,toDateStr:"",dateDifference:0,message:""},TO_DATE:this.to_date,EMAIL:"",event_type:"PLUS_BOOKING",ID:"",NAME:"",PHONE:"",REFERENCE_TYPE:"",TITLE:c.entries.Lcz_NewBooking}}render(){return e(s,{key:"d91de051e528cf974acfe2891d12756230c1b7f2"},this.withIrToastAndInterceptor&&e(o,{key:"e3a9656954c00f326ed623f4d2dbc4e969632f0c"},e("ir-toast",{key:"88a25fe6bf2498d5aa0aa3be2251a6b53860c46e"}),e("ir-interceptor",{key:"cb569a47769a7060ef5cd4c8def67a29e094005d"})),e("div",{key:"17cea78737c93bb7bc5c2da7019ced0c89ab8938",class:"book-container",onClick:this.handleTriggerClicked.bind(this)},e("slot",{key:"98c9568bd9fe6d0d26e8c678626ab187becc8d28",name:"trigger"})),this.bookingItem&&e("igl-book-property",{key:"555302a3a2156e4f190c093bf80d9ce97e0c5a94",allowedBookingSources:this.calendarData.allowed_booking_sources,adultChildConstraints:this.calendarData.adult_child_constraints,showPaymentDetails:this.showPaymentDetails,countries:this.countries,currency:this.calendarData.currency,language:this.language,propertyid:this.propertyid,bookingData:this.bookingItem,onResetBookingEvt:t=>{t.stopImmediatePropagation();t.stopPropagation();this.resetBookingData.emit(null)},onCloseBookingWindow:()=>this.handleCloseBookingWindow()}))}static get watchers(){return{ticket:["ticketChanged"]}}};l.style=h;export{l as igl_book_property_container};
//# sourceMappingURL=p-07402d9f.entry.js.map