{"version":3,"names":["EventsService","bookingService","BookingService","reallocateEvent","pool","destination_pr_id","from_date","to_date","rateplan_id","console","log","data","axios","post","extras","ExceptionMsg","Error","error","deleteEvent","POOL","My_Result","updateBlockedEvent","bookingEvent","releaseData","getReleaseHoursString","RELEASE_AFTER_HOURS","this","result","blockUnit","formatDate","FROM_DATE","TO_DATE","pr_id","PR_ID","STAY_STATUS_CODE","OUT_OF_SERVICE","DESCRIPTION","NOTES","OPTIONAL_REASON","date","split","join"],"sources":["src/services/events.service.ts"],"sourcesContent":["import axios from 'axios';\nimport { BookingService } from './booking.service';\nimport { extras, getReleaseHoursString } from '../utils/utils';\n\nexport class EventsService {\n  private readonly bookingService: BookingService = new BookingService();\n  async reallocateEvent(pool: string, destination_pr_id: number, from_date: string, to_date: string, rateplan_id?: number) {\n    try {\n      console.log(pool, destination_pr_id, from_date, to_date);\n      const { data } = await axios.post(`/ReAllocate_Exposed_Room`, { pool, destination_pr_id, from_date, to_date, extras, rateplan_id });\n      if (data.ExceptionMsg !== '') {\n        throw new Error(data.ExceptionMsg);\n      }\n      console.log(data);\n      return data;\n    } catch (error) {\n      console.error(error);\n      throw new Error(error);\n    }\n  }\n  public async deleteEvent(POOL: string) {\n    try {\n      const { data } = await axios.post(`/UnBlock_Exposed_Unit`, {\n        POOL,\n      });\n      if (data.ExceptionMsg !== '') {\n        throw new Error(data.ExceptionMsg);\n      }\n      return data.My_Result;\n    } catch (error) {\n      console.log(error);\n      throw new Error(error);\n    }\n  }\n\n  public async updateBlockedEvent(bookingEvent: any) {\n    try {\n      const releaseData = getReleaseHoursString(+bookingEvent.RELEASE_AFTER_HOURS);\n      await this.deleteEvent(bookingEvent.POOL);\n      const result = await this.bookingService.blockUnit({\n        from_date: this.formatDate(bookingEvent.FROM_DATE),\n        to_date: this.formatDate(bookingEvent.TO_DATE),\n        pr_id: bookingEvent.PR_ID,\n        STAY_STATUS_CODE: bookingEvent.OUT_OF_SERVICE ? '004' : bookingEvent.RELEASE_AFTER_HOURS === 0 ? '002' : '003',\n        DESCRIPTION: bookingEvent.RELEASE_AFTER_HOURS || '',\n        NOTES: bookingEvent.OPTIONAL_REASON || '',\n        ...releaseData,\n      });\n      return result;\n    } catch (error) {\n      console.error(error);\n      throw new Error(error);\n    }\n  }\n  private formatDate(date: string) {\n    return date.split('/').join('-');\n  }\n}\n"],"mappings":"yHAIaA,EACMC,eAAiC,IAAIC,EACtD,qBAAMC,CAAgBC,EAAcC,EAA2BC,EAAmBC,EAAiBC,GACjG,IACEC,QAAQC,IAAIN,EAAMC,EAAmBC,EAAWC,GAChD,MAAMI,KAAEA,SAAeC,EAAMC,KAAK,2BAA4B,CAAET,OAAMC,oBAAmBC,YAAWC,UAASO,SAAQN,gBACrH,GAAIG,EAAKI,eAAiB,GAAI,CAC5B,MAAM,IAAIC,MAAML,EAAKI,a,CAEvBN,QAAQC,IAAIC,GACZ,OAAOA,C,CACP,MAAOM,GACPR,QAAQQ,MAAMA,GACd,MAAM,IAAID,MAAMC,E,EAGb,iBAAMC,CAAYC,GACvB,IACE,MAAMR,KAAEA,SAAeC,EAAMC,KAAK,wBAAyB,CACzDM,SAEF,GAAIR,EAAKI,eAAiB,GAAI,CAC5B,MAAM,IAAIC,MAAML,EAAKI,a,CAEvB,OAAOJ,EAAKS,S,CACZ,MAAOH,GACPR,QAAQC,IAAIO,GACZ,MAAM,IAAID,MAAMC,E,EAIb,wBAAMI,CAAmBC,GAC9B,IACE,MAAMC,EAAcC,GAAuBF,EAAaG,2BAClDC,KAAKR,YAAYI,EAAaH,MACpC,MAAMQ,QAAeD,KAAKzB,eAAe2B,UAAU,CACjDtB,UAAWoB,KAAKG,WAAWP,EAAaQ,WACxCvB,QAASmB,KAAKG,WAAWP,EAAaS,SACtCC,MAAOV,EAAaW,MACpBC,iBAAkBZ,EAAaa,eAAiB,MAAQb,EAAaG,sBAAwB,EAAI,MAAQ,MACzGW,YAAad,EAAaG,qBAAuB,GACjDY,MAAOf,EAAagB,iBAAmB,MACpCf,IAEL,OAAOI,C,CACP,MAAOV,GACPR,QAAQQ,MAAMA,GACd,MAAM,IAAID,MAAMC,E,EAGZ,UAAAY,CAAWU,GACjB,OAAOA,EAAKC,MAAM,KAAKC,KAAK,I","ignoreList":[]}