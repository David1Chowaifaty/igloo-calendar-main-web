import{r as t,c as e,h as i,F as o,H as a}from"./p-d239357b.js";import{T as s}from"./p-f8b7c0cd.js";import{B as r}from"./p-ae6a57a8.js";import{R as n}from"./p-34b319c3.js";import{l as c}from"./p-4e493fea.js";import"./p-bf44a732.js";import"./p-748cfd41.js";import"./p-ae2f332f.js";import"./p-6c4ba7c0.js";import"./p-99cb260a.js";import"./p-c5894a47.js";import"./p-8af1cf5e.js";const p=".sc-igl-book-property-container-h{display:block;margin:0;padding:0;letter-spacing:0px !important;font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;font-size:1rem !important;font-weight:400 !important;line-height:1.45 !important;color:#6b6f82 !important;text-align:left !important}.book-container.sc-igl-book-property-container{width:min-content;margin:0;padding:0}h3.sc-igl-book-property-container{font-size:1rem}";const h=p;const l=class{constructor(i){t(this,i);this.resetBookingData=e(this,"resetBookingData",7)}language="";ticket="";p;propertyid;from_date;to_date;withIrToastAndInterceptor=true;bookingItem;showPaymentDetails;countries;calendarData={};resetBookingData;bookingService=new r;roomService=new n;token=new s;setRoomsData(t){let e=new Array;if(t.My_Result?.roomtypes?.length){e=t.My_Result.roomtypes;t.My_Result.roomtypes.forEach((t=>{t.expanded=true}))}this.calendarData.roomsInfo=e}async initializeApp(){try{if(!this.propertyid&&!this.p){throw new Error("Property ID or username is required")}const[t,e,i]=await Promise.all([this.roomService.getExposedProperty({id:this.propertyid,language:this.language,aname:this.p}),this.roomService.fetchLanguage(this.language),this.bookingService.getCountries(this.language)]);if(!c.entries){c.entries=e.entries;c.direction=e.direction}this.countries=i;const{allowed_payment_methods:o,currency:a,allowed_booking_sources:s,adult_child_constraints:r,calendar_legends:n}=t["My_Result"];this.calendarData={currency:a,allowed_booking_sources:s,adult_child_constraints:r,legendData:n};this.setRoomsData(t);const p=["001","004"];this.showPaymentDetails=o.some((t=>p.includes(t.code)))}catch(t){console.error("Error initializing app:",t)}}componentWillLoad(){if(this.ticket!==""){this.token.setToken(this.ticket);this.initializeApp()}}ticketChanged(t,e){if(t===e){return}this.token.setToken(this.ticket);this.initializeApp()}handleCloseBookingWindow(){this.bookingItem=null}handleTriggerClicked(){const t=new Date;t.setDate(t.getDate()+1);this.bookingItem={FROM_DATE:this.from_date,defaultDateRange:{fromDate:new Date,fromDateStr:"",toDate:t,toDateStr:"",dateDifference:0,message:""},TO_DATE:this.to_date,EMAIL:"",event_type:"PLUS_BOOKING",ID:"",NAME:"",PHONE:"",REFERENCE_TYPE:"",TITLE:c.entries.Lcz_NewBooking}}render(){return i(a,{key:"d2ce68588eca30f7b3b35750ddf88ef8366034c7"},this.withIrToastAndInterceptor&&i(o,{key:"31459ab6c7f156c65b5a00d93aec9403e71bcef1"},i("ir-toast",{key:"563891766929974bea4ac4b079020b83a959ed8e"}),i("ir-interceptor",{key:"9db47f338555fa05ca15871db3a9367ab3df74c7"})),i("div",{key:"282b7f1a09146faedf5adb561e3cd58f39a2d949",class:"book-container",onClick:this.handleTriggerClicked.bind(this)},i("slot",{key:"4bcb6f22c9bfa6ecece1e426c26fc4f5ecafce22",name:"trigger"})),this.bookingItem&&i("igl-book-property",{key:"fd3690ed7887ec5297925115151d2488d3581e40",allowedBookingSources:this.calendarData.allowed_booking_sources,adultChildConstraints:this.calendarData.adult_child_constraints,showPaymentDetails:this.showPaymentDetails,countries:this.countries,currency:this.calendarData.currency,language:this.language,propertyid:this.propertyid,bookingData:this.bookingItem,onResetBookingEvt:t=>{t.stopImmediatePropagation();t.stopPropagation();this.resetBookingData.emit(null)},onCloseBookingWindow:()=>this.handleCloseBookingWindow()}))}static get watchers(){return{ticket:["ticketChanged"]}}};l.style=h;export{l as igl_book_property_container};
//# sourceMappingURL=p-a9520d26.entry.js.map