{"version":3,"names":["irDeleteModalCss","IrDeleteModalStyle0","IrDeleteModal","constructor","hostRef","this","isOpen","selectedId","loadingBtn","housekeepingService","HouseKeepingService","closeModal","modalClosed","emit","openModal","btnClickHandler","event","target","name","editExposedHKM","user","newAssignedUnits","assigned_units","map","u","hkm_id","is_to_assign","unit_id","id","manageExposedAssignedUnitToHKM","housekeeping_store","default_properties","property_id","_a","__rest$1","resetData","error","console","render","h","class","onClick","tabindex","length","locales","entries","Lcz_AssignUnitsTo","Lcz_ConfirmDeletion","variant","icon_name","onClickHandler","firstOption","Lcz_nobody","selectedValue","onSelectChange","e","detail","data","hk_criteria","housekeepers","filter","hk","m","value","toString","text","sort","a","b","toLowerCase","localeCompare","btn_color","btn_block","Lcz_Cancel","isLoading","Lcz_Confirm","irHkTeamCss","IrHkTeamStyle0","tableCss","IrHkTeamStyle1","IrHkTeam","currentTrigger","renderAssignedUnits","type","Lcz_Assign","renderCurrentTrigger","slot","isEdit","handleCloseSideBar","stopImmediatePropagation","stopPropagation","handleDeletion","deletionTimout","setTimeout","modal","el","querySelector","disconnectedCallback","clearTimeout","assigned","total","un_assigned","units_assignments","Host","label","Lcz_HousekeepingTeam","justifyContent","Lcz_TotalUnits","Lcz_Assigned","Lcz_Unassigned","Lcz_AsAnOption","Lcz_Name","Lcz_Mobile","Lcz_Username","Lcz_UnitsAssigned","title","Lcz_CreateHousekeeper","onIconClickHandler","xmlns","height","width","viewBox","fill","d","key","style","gap","trigger","content","slice","note","phone_prefix","mobile","username","Lcz_EditHousekeeper","__rest","icon","Lcz_DeleteHousekeeper","showCloseButton","open","onIrSidebarToggle","irHkUnassignedUnitsCss","IrHkUnassignedUnitsStyle0","sheetCss","IrHkUnassignedUnitsStyle1","IrHkUnassignedUnits","renderAgain","assignedUnits","Map","assignUnit","hk_id","checked","userUnit","find","unit","delete","set","assignment","has","assignUnits","values","closeSideBar","renderRooms","unassigned_units","calendar_data","roomsInfo","roomType","log","is_active","physicalrooms","physical_room","taken","housekeeper","assignedRoom","get","_b","onCheckChange","_c","displayContext","Lcz_RoomName","Lcz_HousekeeperName","Lcz_Actions","btn_styles","isRequestPending","bind","irHkUserCss","IrHkUserStyle0","IrHkUserStyle1","IrHkUser","autoValidate","userInfo","password","errors","showPasswordValidation","token","language","housekeeperSchema","z","object","string","min","max","nullable","refine","CONSTANTS","PASSWORD","test","message","async","UserService","checkUserExistence","UserName","componentWillLoad","getDefaultProperties","Object","assign","updateUserField","addUser","toValidateUserInfo","parseAsync","ZodError","issues","err","path","handleBlur","usermame","generateUserName","Lcz_EditHousekeeperProfile","Lcz_CreateHousekeeperProfile","testId","zod","pick","wrapKey","placeholder","onTextChange","onInputBlur","maxLength","default_country","country","_d","Lcz_Note","_e","asyncParse","_f","errorMessage","_g","_j","_h","Lcz_UsernameAlreadyExists","undefined","_k","Lcz_Password","_l","onInputFocus","Lcz_Save"],"sources":["src/components/ir-housekeeping/ir-delete-modal/ir-delete-modal.css?tag=ir-delete-modal","src/components/ir-housekeeping/ir-delete-modal/ir-delete-modal.tsx","src/components/ir-housekeeping/ir-hk-team/ir-hk-team.css?tag=ir-hk-team&encapsulation=scoped","src/common/table.css?tag=ir-hk-team&encapsulation=scoped","src/components/ir-housekeeping/ir-hk-team/ir-hk-team.tsx","src/components/ir-housekeeping/ir-hk-unassigned-units/ir-hk-unassigned-units.css?tag=ir-hk-unassigned-units&encapsulation=scoped","src/common/sheet.css?tag=ir-hk-unassigned-units&encapsulation=scoped","src/components/ir-housekeeping/ir-hk-unassigned-units/ir-hk-unassigned-units.tsx","src/components/ir-housekeeping/ir-hk-user/ir-hk-user.css?tag=ir-hk-user&encapsulation=scoped","src/common/sheet.css?tag=ir-hk-user&encapsulation=scoped","src/components/ir-housekeeping/ir-hk-user/ir-hk-user.tsx"],"sourcesContent":[".backdropModal {\n  background-color: rgba(0, 0, 0, 0.5);\n  z-index: 1000;\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 100%;\n  opacity: 0;\n  transition: opacity 0.3s ease-in-out;\n  pointer-events: none;\n}\n.backdropModal.active {\n  cursor: pointer;\n  opacity: 1 !important;\n  pointer-events: all;\n}\n\n.ir-modal[data-state='opened'] {\n  opacity: 1;\n\n  visibility: visible;\n  pointer-events: all;\n  transition: all 0.3s ease-in-out;\n}\n.ir-alert-content {\n  padding: 10px;\n  background: white;\n  border-radius: 5px;\n}\n.modal {\n  z-index: 1001 !important;\n}\n\n.modal-dialog {\n  height: 100vh;\n  display: flex;\n  align-items: center;\n}\n.ir-alert-footer {\n  gap: 10px;\n}\n.ir-modal {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 1050;\n  width: 90%;\n  max-width: 32rem;\n  overflow: hidden;\n  outline: 0;\n  opacity: 0;\n  transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;\n  visibility: hidden;\n  pointer-events: none;\n}\n\n.ir-modal.active {\n  opacity: 1;\n  transform: translate(-50%, 0);\n  visibility: visible;\n  pointer-events: all;\n  transition: all 0.3s ease-in-out;\n}\n","import { Component, EventEmitter, Listen, Method, Prop, State, h, Event } from '@stencil/core';\nimport housekeeping_store from '@/stores/housekeeping.store';\nimport { HouseKeepingService } from '@/services/housekeeping.service';\nimport { IHouseKeepers } from '@/models/housekeeping';\nimport locales from '@/stores/locales.store';\n\n@Component({\n  tag: 'ir-delete-modal',\n  styleUrl: 'ir-delete-modal.css',\n  shadow: false,\n})\nexport class IrDeleteModal {\n  @Prop() user: IHouseKeepers;\n\n  @State() isOpen: boolean = false;\n  @State() selectedId: string = '';\n  @State() loadingBtn: 'confirm' | null = null;\n\n  @Event() modalClosed: EventEmitter<null>;\n  @Event() resetData: EventEmitter<string>;\n\n  private housekeepingService = new HouseKeepingService();\n\n  @Method()\n  async closeModal() {\n    this.isOpen = false;\n    this.modalClosed.emit(null);\n  }\n  @Method()\n  async openModal() {\n    this.isOpen = true;\n  }\n\n  @Listen('clickHandler')\n  async btnClickHandler(event: CustomEvent) {\n    let target = event.target as HTMLInputElement;\n    let name = target.name;\n    try {\n      if (name === 'confirm') {\n        this.loadingBtn = 'confirm';\n        if (this.selectedId === '') {\n          await this.housekeepingService.editExposedHKM(this.user, true);\n        } else {\n          const newAssignedUnits = this.user.assigned_units.map(u => ({ hkm_id: +this.selectedId, is_to_assign: true, unit_id: u.id }));\n          await this.housekeepingService.manageExposedAssignedUnitToHKM(housekeeping_store.default_properties.property_id, newAssignedUnits);\n          const { assigned_units, is_soft_deleted, is_active, ...user } = this.user;\n          await this.housekeepingService.editExposedHKM(user, true);\n        }\n        this.resetData.emit(null);\n      }\n      if (name === 'cancel') {\n        this.closeModal();\n      }\n    } catch (error) {\n      console.error(error);\n    } finally {\n      if (this.loadingBtn) {\n        this.loadingBtn = null;\n        this.closeModal();\n      }\n    }\n  }\n  render() {\n    if (!this.user) {\n      return;\n    }\n    return [\n      <div\n        class={`backdropModal ${this.isOpen ? 'active' : ''}`}\n        onClick={() => {\n          this.closeModal();\n        }}\n      ></div>,\n      <div data-state={this.isOpen ? 'opened' : 'closed'} class={`ir-modal`} tabindex=\"-1\">\n        <div class={`ir-alert-content p-2`}>\n          <div class={`r-alert-header mb-1 d-flex align-items-center justify-content-between border-0 py-0 m-0 `}>\n            <p class={'m-0 p-0'}>{this.user.assigned_units.length > 0 ? locales.entries.Lcz_AssignUnitsTo : locales.entries.Lcz_ConfirmDeletion}</p>\n            <ir-button class=\"exit-icon\" variant=\"icon\" icon_name=\"xmark\" onClickHandler={() => this.closeModal()}></ir-button>\n          </div>\n          <div class=\"modal-body text-left p-0 mb-2\">\n            {this.user.assigned_units.length > 0 && (\n              <div class=\"modal-body text-left p-0 mb-2\">\n                <ir-select\n                  firstOption={locales.entries.Lcz_nobody}\n                  selectedValue={this.selectedId}\n                  onSelectChange={e => (this.selectedId = e.detail)}\n                  data={housekeeping_store.hk_criteria.housekeepers\n                    .filter(hk => hk.id !== this.user.id)\n                    .map(m => ({\n                      value: m.id.toString(),\n                      text: m.name,\n                    }))\n                    .sort((a, b) => a.text.toLowerCase().localeCompare(b.text.toLowerCase()))}\n                ></ir-select>\n              </div>\n            )}\n          </div>\n\n          <div class={`ir-alert-footer border-0  d-flex justify-content-end`}>\n            <ir-button btn_color={'secondary'} btn_block text={locales.entries.Lcz_Cancel} name={'cancel'}></ir-button>\n            <ir-button isLoading={this.loadingBtn === 'confirm'} btn_color={'primary'} btn_block text={locales.entries.Lcz_Confirm} name={'confirm'}></ir-button>\n          </div>\n        </div>\n      </div>,\n    ];\n    // <div aria-modal={this.isOpen ? 'true' : 'false'} class=\"modal fade\" ref={el => (this.modalEl = el)} tabindex=\"-1\">\n    //   <div class=\"modal-dialog modal-dialog-centered\">\n    //     <div class=\"modal-content\">\n    //       <div class=\"modal-body\">\n    //         <div class={`ir-alert-header mb-1 d-flex align-items-center justify-content-between border-0 py-0 m-0 `}>\n    //           <p class=\"p-0 my-0 modal-title\">{this.user.assigned_units.length > 0 ? locales.entries.Lcz_AssignUnitsTo : locales.entries.Lcz_ConfirmDeletion}</p>\n    //           <ir-button class=\"exit-icon\" variant=\"icon\" icon_name=\"xmark\" onClickHandler={() => this.closeModal()}></ir-button>\n    //         </div>\n    //         {this.user.assigned_units.length > 0 && (\n    //           <div class=\"modal-body text-left p-0 mb-2\">\n    //             <ir-select\n    //               firstOption={locales.entries.Lcz_nobody}\n    //               selectedValue={this.selectedId}\n    //               onSelectChange={e => (this.selectedId = e.detail)}\n    //\n    //               data={housekeeping_store.hk_criteria.housekeepers\n    //                 .filter(hk => hk.id !== this.user.id)\n    //                 .map(m => ({\n    //                   value: m.id.toString(),\n    //                   text: m.name,\n    //                 }))\n    //                 .sort((a, b) => a.text.toLowerCase().localeCompare(b.text.toLowerCase()))}\n    //             ></ir-select>\n    //           </div>\n    //         )}\n\n    //         <div class={`ir-alert-footer border-0 d-flex justify-content-end`}>\n    //           <ir-button btn_color={'secondary'} btn_block text={locales.entries.Lcz_Cancel} name={'cancel'}></ir-button>\n    //           <ir-button isLoading={this.loadingBtn === 'confirm'} btn_color={'primary'} btn_block text={locales.entries.Lcz_Confirm} name={'confirm'}></ir-button>\n    //         </div>\n    //       </div>\n    //     </div>\n    //   </div>\n    // </div>\n  }\n}\n",".icons-container {\n  display: flex;\n  align-items: center;\n  justify-content: end;\n  /* justify-content: center; */\n  gap: 4px;\n}\n.text-center {\n  text-align: center !important;\n}\n\n.assignments-container,\n.unassigned-container {\n  display: flex;\n  align-items: center;\n}\n\n.gap-16 {\n  gap: 16px;\n}\n.unassigned-container {\n  gap: 4px;\n}\n.justify-between {\n  justify-content: space-between;\n  margin-bottom: 10px;\n}\n.assignments-container p,\nh4 {\n  margin: 0;\n}\n.outline-btn {\n  background: white;\n  border: 1px solid var(--blue);\n  color: var(--blue);\n  border-radius: 5px;\n  font-size: 12px;\n  padding: 1px 0.25rem !important;\n  margin: 0;\n}\n.outline-btn:hover {\n  color: white;\n  background: var(--blue);\n}\n","/* Base styles */\n.ir-table-row td {\n  padding: 0.5rem 1rem !important;\n  text-align: left;\n  z-index: 2;\n  background-color: white;\n  white-space: nowrap;\n  /* width: max-content;\n  max-width: max-content; */\n}\n/* .ir-table-row td:last-child {\n  width: 100%; \n}*/\n/* .ir-table-row td:first-child,\n.table thead th:first-child {\n  position: sticky;\n  left: var(--ir-table-sticky-padding,-1rem);\n} */\n\n.table td {\n  border-top: 0;\n  border-bottom: 1px solid #e3ebf3;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n}\n/* .table thead th:first-child {\n  border-top-left-radius: 0.5rem;\n  }\n  .table thead th:last-child {\n    border-top-right-radius: 0.5rem;\n    } */\n.table thead th {\n  border: none !important;\n  background: #ececec;\n  color: #374151;\n  padding: 0.5rem 1rem !important;\n  text-align: left;\n}\n\n/* Selected Rows Styles */\n\n.selected td {\n  background: #e3f3fa !important;\n}\n.selected td {\n  color: var(--gray-dark) !important;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n}\n\n/* Sorting styles */\n.sortable,\n.ir-table-row {\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n}\n.sortable {\n  text-transform: capitalize;\n}\n.sortable:hover {\n  color: #212529;\n  background-color: #e2e8f0 !important;\n  border-color: #dae0e5;\n  cursor: pointer;\n}\n.ir-table-row:hover td {\n  background: #e2e6ea3f !important;\n}\n.sortable:active {\n  color: #212529;\n  background-color: #e2e8f0;\n  border-color: #d3d9df;\n}\n.sortable svg {\n  color: var(--blue);\n}\n/* .action-row {\n  position: sticky;\n  right:var(--ir-table-sticky-padding,-1rem);\n} */\n","import { IHouseKeepers, THousekeepingTrigger } from '@/models/housekeeping';\nimport housekeeping_store from '@/stores/housekeeping.store';\nimport locales from '@/stores/locales.store';\nimport { Component, Host, Listen, State, h, Element } from '@stencil/core';\n\n@Component({\n  tag: 'ir-hk-team',\n  styleUrls: ['ir-hk-team.css', '../../../common/table.css'],\n  scoped: true,\n})\nexport class IrHkTeam {\n  @Element() el: HTMLElement;\n  @State() currentTrigger: THousekeepingTrigger | null = null;\n\n  private deletionTimout: NodeJS.Timeout;\n  renderAssignedUnits(hk: IHouseKeepers) {\n    if (hk.assigned_units.length === 0) {\n      return (\n        <span>\n          0 -{' '}\n          <button class=\"outline-btn\" onClick={() => (this.currentTrigger = { type: 'unassigned_units', user: hk })}>\n            {locales.entries.Lcz_Assign}\n          </button>\n        </span>\n      );\n    }\n    return (\n      <span>\n        {hk.assigned_units.length} -{' '}\n        <button onClick={() => (this.currentTrigger = { type: 'unassigned_units', user: hk })} class=\"outline-btn\">\n          {'Edit'}\n        </button>\n      </span>\n    );\n  }\n  renderCurrentTrigger() {\n    switch (this.currentTrigger?.type) {\n      case 'unassigned_units':\n        return <ir-hk-unassigned-units slot=\"sidebar-body\" user={this.currentTrigger.user}></ir-hk-unassigned-units>;\n      case 'user':\n        return <ir-hk-user slot=\"sidebar-body\" user={this.currentTrigger.user} isEdit={this.currentTrigger.isEdit}></ir-hk-user>;\n      default:\n        return null;\n    }\n  }\n\n  @Listen('closeSideBar')\n  handleCloseSideBar(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.currentTrigger = null;\n  }\n  handleDeletion(user) {\n    this.currentTrigger = { type: 'delete', user };\n    this.deletionTimout = setTimeout(() => {\n      const modal = this.el.querySelector('ir-delete-modal');\n      if (!modal) return;\n      modal.openModal();\n    }, 100);\n  }\n  disconnectedCallback() {\n    clearTimeout(this.deletionTimout);\n  }\n  render() {\n    if (!housekeeping_store.hk_criteria) {\n      return null;\n    }\n    const { assigned, total, un_assigned } = housekeeping_store.hk_criteria.units_assignments;\n\n    return (\n      <Host class=\"card p-1\">\n        <section>\n          <ir-title label={locales.entries.Lcz_HousekeepingTeam} justifyContent=\"space-between\">\n            <div slot=\"title-body\" class=\"assignments-container gap-16 m-0\">\n              <p class=\"font-weight-bold m-0 p-0\">\n                {total} {locales.entries.Lcz_TotalUnits}\n              </p>\n              <p class={'m-0 p-0'}>\n                {assigned} <span>{locales.entries.Lcz_Assigned}</span>\n              </p>\n              {un_assigned > 0 && (\n                <button class=\"outline-btn\" onClick={() => (this.currentTrigger = { type: 'unassigned_units', user: null })}>\n                  {un_assigned} {locales.entries.Lcz_Unassigned}\n                </button>\n              )}\n            </div>\n          </ir-title>\n          <p class={'m-0 p-0'}>{locales.entries.Lcz_AsAnOption}</p>\n        </section>\n\n        <section class=\"mt-1 table-responsive\">\n          <table class=\"table\">\n            <thead>\n              <tr>\n                <th class=\"text-left\">{locales.entries.Lcz_Name}</th>\n                <th>{locales.entries.Lcz_Mobile}</th>\n                <th>{locales.entries.Lcz_Username}</th>\n                {/* <th>{locales.entries.Lcz_Note}</th> */}\n                <th>{locales.entries.Lcz_UnitsAssigned}</th>\n                <th>\n                  <ir-icon\n                    class=\"pl-1\"\n                    data-testid=\"new_user\"\n                    title={locales.entries.Lcz_CreateHousekeeper}\n                    onIconClickHandler={() => {\n                      this.currentTrigger = {\n                        type: 'user',\n                        isEdit: false,\n                        user: null,\n                      };\n                    }}\n                  >\n                    <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"20\" width=\"17.5\" viewBox=\"0 0 448 512\">\n                      <path\n                        fill=\"currentColor\"\n                        d=\"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z\"\n                      />\n                    </svg>\n                  </ir-icon>\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {housekeeping_store.hk_criteria.housekeepers.map(hk => (\n                <tr key={hk.id} class=\"ir-table-row\">\n                  <td class=\"text-left\">\n                    <div class={'d-flex align-items-center'} style={{ gap: '0.5rem' }}>\n                      {hk.name?.length > 25 ? (\n                        <ir-popover trigger=\"hover\" content={hk.name}>\n                          <span>{hk.name.slice(0, 25)}...</span>\n                        </ir-popover>\n                      ) : (\n                        hk.name\n                      )}\n                      {hk.note && (\n                        <ir-popover content={hk.note}>\n                          <ir-button variant=\"icon\" icon_name=\"note\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"Click to view note\"></ir-button>\n                        </ir-popover>\n                      )}\n                    </div>\n                  </td>\n                  <td class=\"\">\n                    {hk.phone_prefix} {hk.mobile}\n                  </td>\n                  <td>{hk.username}</td>\n                  <td>{this.renderAssignedUnits(hk)}</td>\n                  <td class=\"\">\n                    <div class=\"icons-container\">\n                      <ir-icon\n                        data-testid=\"edit\"\n                        title={locales.entries.Lcz_EditHousekeeper}\n                        onIconClickHandler={() => {\n                          const { assigned_units, is_soft_deleted, is_active, ...user } = hk;\n                          this.currentTrigger = {\n                            type: 'user',\n                            isEdit: true,\n                            user,\n                          };\n                        }}\n                        icon=\"ft-save color-ir-light-blue-hover h5 pointer sm-margin-right\"\n                      >\n                        <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"20\" width=\"20\" viewBox=\"0 0 512 512\">\n                          <path\n                            fill=\"#6b6f82\"\n                            d=\"M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z\"\n                          />\n                        </svg>\n                      </ir-icon>\n                      <span> &nbsp;</span>\n                      <ir-icon\n                        data-testid=\"delete\"\n                        title={locales.entries.Lcz_DeleteHousekeeper}\n                        icon=\"ft-trash-2 danger h5 pointer\"\n                        onIconClickHandler={() => this.handleDeletion(hk)}\n                      >\n                        <svg slot=\"icon\" fill=\"#ff2441\" xmlns=\"http://www.w3.org/2000/svg\" height=\"16\" width=\"14.25\" viewBox=\"0 0 448 512\">\n                          <path d=\"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z\" />\n                        </svg>\n                      </ir-icon>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </section>\n        <ir-sidebar\n          showCloseButton={false}\n          open={this.currentTrigger !== null && this.currentTrigger.type !== 'delete'}\n          onIrSidebarToggle={() => (this.currentTrigger = null)}\n          style={{\n            '--sidebar-width': this.currentTrigger ? (this.currentTrigger.type === 'unassigned_units' ? 'max-content' : '40rem') : 'max-content',\n          }}\n        >\n          {this.renderCurrentTrigger()}\n        </ir-sidebar>\n        {this.currentTrigger?.type === 'delete' && <ir-delete-modal user={this.currentTrigger.user}></ir-delete-modal>}\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n  --ir-root-active-color: #1e9ff2;\n  --ir-root-inactive-color: #d2d2d2;\n}\ntable {\n  width: 100%;\n}\ntd {\n  padding-top: 3px;\n  padding-bottom: 3px;\n}\ntd:last-child {\n  text-align: end;\n}\n.title {\n  min-width: 230px !important;\n}\n",":host {\n  height: 100%;\n}\n.sheet-container {\n  display: flex !important;\n  flex-direction: column !important;\n  background: white;\n  height: 100vh;\n  gap: 1rem;\n  z-index: 1000;\n}\n.sheet-container {\n  height: -webkit-fill-available;\n  height: 100vh;\n  height: 100dvh;\n}\n\n/* @supports (height: 100svh) {\n  .sheet-container {\n    height: 100svh;\n  }\n} */\n.sheet-footer {\n  position: sticky;\n  bottom: 0;\n  z-index: 20;\n  background: white;\n  border-top: 1px solid #e4e5ec;\n  display: flex;\n  flex-direction: column;\n  padding: 1rem;\n  gap: 0.5rem;\n}\n.sheet-header {\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  background: white;\n}\n.sheet-body {\n  flex: 1 1 0%;\n}\n/* @media (max-width: 767px) {\n  .sheet-footer {\n    bottom: env(safe-area-inset-bottom);\n  }\n} */\n@media (min-width: 768px) {\n  .sheet-footer {\n    flex-direction: row;\n    align-items: center;\n  }\n}\n","import { IHouseKeepers, IPropertyHousekeepingAssignment } from '@/models/housekeeping';\nimport { HouseKeepingService } from '@/services/housekeeping.service';\nimport calendar_data from '@/stores/calendar-data';\nimport housekeeping_store from '@/stores/housekeeping.store';\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\nimport locales from '@/stores/locales.store';\nimport { Component, Event, EventEmitter, Prop, State, h } from '@stencil/core';\n\n@Component({\n  tag: 'ir-hk-unassigned-units',\n  styleUrls: ['ir-hk-unassigned-units.css', '../../../common/sheet.css'],\n  scoped: true,\n})\nexport class IrHkUnassignedUnits {\n  @Prop() user: IHouseKeepers | null = null;\n\n  @State() renderAgain = false;\n\n  @Event() closeSideBar: EventEmitter<null>;\n  @Event() resetData: EventEmitter<null>;\n\n  private assignedUnits: Map<number, IPropertyHousekeepingAssignment> = new Map();\n  private housekeepingService = new HouseKeepingService();\n\n  assignUnit(unit_id: number, hk_id: number | null, checked: boolean) {\n    if (this.user) {\n      const userUnit = this.user.assigned_units.find(unit => unit.id === unit_id);\n      if ((checked && userUnit) || (!checked && !userUnit)) {\n        this.assignedUnits.delete(unit_id);\n      } else if (!checked && userUnit) {\n        this.assignedUnits.set(unit_id, { hkm_id: hk_id, is_to_assign: false, unit_id });\n      } else if (checked) {\n        const assignment: IPropertyHousekeepingAssignment = {\n          hkm_id: hk_id,\n          is_to_assign: true,\n          unit_id,\n        };\n        this.assignedUnits.set(unit_id, assignment);\n      }\n    } else {\n      if (this.assignedUnits.has(unit_id) && !hk_id) {\n        this.assignedUnits.delete(unit_id);\n        return;\n      } else {\n        this.assignedUnits.set(unit_id, {\n          hkm_id: hk_id,\n          is_to_assign: true,\n          unit_id,\n        });\n      }\n    }\n    this.renderAgain = !this.renderAgain;\n  }\n\n  async assignUnits() {\n    try {\n      await this.housekeepingService.manageExposedAssignedUnitToHKM(housekeeping_store.default_properties.property_id, [...this.assignedUnits.values()]);\n      this.resetData.emit(null);\n    } catch (error) {\n      console.error(error);\n    } finally {\n      this.closeSideBar.emit(null);\n    }\n  }\n  renderRooms() {\n    if (!this.user) {\n      return housekeeping_store.hk_criteria.units_assignments.unassigned_units?.map(unit => (\n        <tr key={unit.id}>\n          <td class=\"\">{unit.name}</td>\n          <td class=\"sr-only\"></td>\n          <td class=\"pl-1\">\n            <ir-select\n              onSelectChange={e => {\n                let hk_id = e.detail;\n                if (hk_id === '') {\n                  hk_id = null;\n                } else {\n                  hk_id = +hk_id;\n                }\n                this.assignUnit(unit.id, hk_id, false);\n              }}\n              data={housekeeping_store.hk_criteria.housekeepers.map(hk => ({ text: hk.name, value: hk.id.toString() }))}\n            ></ir-select>\n          </td>\n        </tr>\n      ));\n    }\n    return calendar_data.roomsInfo.map(roomType => {\n      console.log(roomType);\n      if (!roomType.is_active) {\n        return null;\n      }\n      return roomType.physicalrooms?.map(physical_room => {\n        if (!physical_room['is_active']) {\n          return null;\n        }\n        let taken = !housekeeping_store.hk_criteria.units_assignments.unassigned_units?.find(unit => unit.id.toString() === physical_room.id.toString());\n        let housekeeper = [];\n        const assignedRoom = this.assignedUnits.get(physical_room.id);\n        if (assignedRoom && assignedRoom.is_to_assign) {\n          housekeeper = [this.user];\n          taken = true;\n        } else {\n          if (taken) {\n            housekeeper = housekeeping_store.hk_criteria.housekeepers.filter(hk => hk.assigned_units.find(unit => unit.id === physical_room.id));\n          }\n        }\n        return (\n          <tr key={physical_room.id}>\n            <td>{physical_room.name}</td>\n            <td>{taken ? housekeeper[0]?.name : ''}</td>\n            <td>\n              <ir-switch\n                onCheckChange={e => {\n                  const checked = e.detail;\n                  this.assignUnit(physical_room.id, this.user.id, checked);\n                }}\n                checked={taken && housekeeper[0]?.id === this.user.id}\n              ></ir-switch>\n            </td>\n          </tr>\n        );\n      });\n    });\n  }\n  render() {\n    return (\n      <div class=\"sheet-container\">\n        <ir-title class=\"title sheet-header px-1\" displayContext=\"sidebar\" label={!this.user ? 'Assingn Units' : `Assignment for ${this.user.name}`}></ir-title>\n        <section class=\"px-1 sheet-body\">\n          <table>\n            <thead>\n              <th class=\"sr-only\">{locales.entries.Lcz_RoomName}</th>\n              <th class=\"sr-only\">{locales.entries.Lcz_HousekeeperName}</th>\n              <th class=\"sr-only\">{locales.entries.Lcz_Actions}</th>\n            </thead>\n            <tbody>{this.renderRooms()}</tbody>\n          </table>\n        </section>\n        <div class=\"sheet-footer\">\n          <ir-button\n            onClickHandler={() => this.closeSideBar.emit(null)}\n            class=\"flex-fill\"\n            btn_styles=\"w-100 justify-content-center align-items-center\"\n            btn_color=\"secondary\"\n            text={locales.entries.Lcz_Cancel}\n          ></ir-button>\n          <ir-button\n            isLoading={isRequestPending('/Manage_Exposed_Assigned_Unit_To_HKM')}\n            onClickHandler={this.assignUnits.bind(this)}\n            class=\"flex-fill\"\n            btn_styles=\"w-100  justify-content-center align-items-center\"\n            text={locales.entries.Lcz_Confirm}\n          ></ir-button>\n        </div>\n      </div>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n",":host {\n  height: 100%;\n}\n.sheet-container {\n  display: flex !important;\n  flex-direction: column !important;\n  background: white;\n  height: 100vh;\n  gap: 1rem;\n  z-index: 1000;\n}\n.sheet-container {\n  height: -webkit-fill-available;\n  height: 100vh;\n  height: 100dvh;\n}\n\n/* @supports (height: 100svh) {\n  .sheet-container {\n    height: 100svh;\n  }\n} */\n.sheet-footer {\n  position: sticky;\n  bottom: 0;\n  z-index: 20;\n  background: white;\n  border-top: 1px solid #e4e5ec;\n  display: flex;\n  flex-direction: column;\n  padding: 1rem;\n  gap: 0.5rem;\n}\n.sheet-header {\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  background: white;\n}\n.sheet-body {\n  flex: 1 1 0%;\n}\n/* @media (max-width: 767px) {\n  .sheet-footer {\n    bottom: env(safe-area-inset-bottom);\n  }\n} */\n@media (min-width: 768px) {\n  .sheet-footer {\n    flex-direction: row;\n    align-items: center;\n  }\n}\n","import { THKUser } from '@/models/housekeeping';\nimport { HouseKeepingService } from '@/services/housekeeping.service';\nimport { UserService } from '@/services/user.service';\nimport calendar_data from '@/stores/calendar-data';\nimport { getDefaultProperties } from '@/stores/housekeeping.store';\nimport locales from '@/stores/locales.store';\nimport { CONSTANTS } from '@/utils/constants';\nimport { Component, Prop, State, h, Event, EventEmitter } from '@stencil/core';\nimport { z, ZodError } from 'zod';\n\n@Component({\n  tag: 'ir-hk-user',\n  styleUrls: ['ir-hk-user.css', '../../../common/sheet.css'],\n  scoped: true,\n})\nexport class IrHkUser {\n  @Prop() user: THKUser | null = null;\n  @Prop() isEdit: boolean = false;\n\n  @State() isLoading: boolean = false;\n  @State() autoValidate = false;\n\n  @State() userInfo: THKUser = {\n    id: -1,\n    mobile: '',\n    name: '',\n    note: '',\n    password: '',\n    property_id: null,\n    username: null,\n    phone_prefix: null,\n  };\n\n  @State() errors: { [P in keyof THKUser]?: any } | null = null;\n  @State() showPasswordValidation: boolean = false;\n  @State() isUsernameTaken: boolean;\n\n  @Event() resetData: EventEmitter<null>;\n  @Event() closeSideBar: EventEmitter<null>;\n\n  private housekeepingService = new HouseKeepingService();\n  private default_properties = {\n    token: '',\n    language: '',\n  };\n  private housekeeperSchema = z.object({\n    name: z.string().min(2),\n    mobile: z.string().min(1).max(14),\n    password: z\n      .string()\n      .nullable()\n      // .regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[!@#$%^&*()\\-_=+]).{8,16}$/)\n      .refine(\n        password => {\n          if (this.user && !this.userInfo?.password) {\n            return true;\n          }\n          return CONSTANTS.PASSWORD.test(password);\n        },\n        { message: 'Password must be at least 8 characters long.' },\n      ),\n    username: z\n      .string()\n      .min(3)\n      .refine(\n        async name => {\n          if (this.user && this.user.username === name) {\n            return true;\n          }\n          if (name.length >= 3) {\n            return !(await new UserService().checkUserExistence({ UserName: name }));\n          }\n          return true;\n        },\n        { message: 'Username already exists.' },\n      ),\n  });\n\n  async componentWillLoad() {\n    const { token, language, property_id } = getDefaultProperties();\n    this.default_properties = { token, language };\n    if (!this.user) {\n      this.userInfo['property_id'] = property_id;\n      // this.showPasswordValidation = true;\n    }\n    if (this.user) {\n      this.autoValidate = true;\n      this.userInfo = { ...this.user, password: '' };\n    }\n  }\n\n  private updateUserField(key: keyof THKUser, value: any) {\n    this.userInfo = { ...this.userInfo, [key]: value };\n  }\n\n  private async addUser() {\n    try {\n      this.isLoading = true;\n      if (!this.autoValidate) {\n        this.autoValidate = true;\n      }\n      const toValidateUserInfo = { ...this.userInfo, password: this.user && this.userInfo.password === '' ? this.user.password : this.userInfo.password };\n      console.log('toValidateUserInfo', toValidateUserInfo);\n      await this.housekeeperSchema.parseAsync(toValidateUserInfo);\n      if (this.errors) {\n        this.errors = null;\n      }\n      await this.housekeepingService.editExposedHKM(toValidateUserInfo);\n      this.resetData.emit(null);\n      this.closeSideBar.emit(null);\n    } catch (error) {\n      const e: any = {};\n      if (error instanceof ZodError) {\n        error.issues.map(err => {\n          e[err.path[0]] = true;\n        });\n        this.errors = e;\n      }\n      console.error(error);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n  private async handleBlur(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    if (this.user || !this.userInfo.name) {\n      return;\n    }\n    const usermame = await this.housekeepingService.generateUserName(this.userInfo.name);\n    this.updateUserField('username', usermame);\n  }\n\n  render() {\n    return (\n      <div class=\"sheet-container\">\n        <ir-title\n          class=\"px-1 sheet-header\"\n          displayContext=\"sidebar\"\n          label={this.isEdit ? locales.entries.Lcz_EditHousekeeperProfile : locales.entries.Lcz_CreateHousekeeperProfile}\n        ></ir-title>\n        <section class=\"px-1 sheet-body\">\n          <ir-input-text\n            testId=\"name\"\n            zod={this.housekeeperSchema.pick({ name: true })}\n            wrapKey=\"name\"\n            autoValidate={this.autoValidate}\n            error={this.errors?.name}\n            label={locales.entries.Lcz_Name}\n            placeholder={locales.entries.Lcz_Name}\n            onTextChange={e => this.updateUserField('name', e.detail)}\n            value={this.userInfo.name}\n            onInputBlur={this.handleBlur.bind(this)}\n            maxLength={40}\n          ></ir-input-text>\n          <ir-phone-input\n            testId=\"phone\"\n            placeholder={locales.entries.Lcz_Mobile}\n            error={this.errors?.mobile && !this.userInfo?.mobile}\n            language={this.default_properties.language}\n            token={this.default_properties.token}\n            default_country={calendar_data.country.id}\n            phone_prefix={this.user?.phone_prefix}\n            label={locales.entries.Lcz_Mobile}\n            value={this.userInfo.mobile}\n            onTextChange={e => {\n              this.updateUserField('phone_prefix', e.detail.phone_prefix);\n              this.updateUserField('mobile', e.detail.mobile);\n            }}\n          ></ir-phone-input>\n\n          {/* <ir-input-text\n            label={locales.entries.Lcz_Note}\n            placeholder={locales.entries.Lcz_Note}\n            value={this.userInfo.note}\n            onTextChange={e => this.updateUserField('note', e.detail)}\n            ></ir-input-text> */}\n          <div class=\"mb-1\">\n            <ir-textarea\n              testId=\"note\"\n              variant=\"prepend\"\n              maxLength={250}\n              label={locales.entries.Lcz_Note}\n              placeholder={locales.entries.Lcz_Note}\n              value={this.userInfo.note}\n              onTextChange={e => this.updateUserField('note', e.detail)}\n            ></ir-textarea>\n          </div>\n          <ir-input-text\n            testId=\"username\"\n            zod={this.housekeeperSchema.pick({ username: true })}\n            wrapKey=\"username\"\n            error={this.errors?.username}\n            asyncParse\n            autoValidate={this.user ? (this.userInfo?.username !== this.user.username ? true : false) : this.autoValidate}\n            errorMessage={this.errors?.username && this.userInfo?.username?.length >= 3 ? locales.entries.Lcz_UsernameAlreadyExists : undefined}\n            label={locales.entries.Lcz_Username}\n            placeholder={locales.entries.Lcz_Username}\n            value={this.userInfo.username}\n            onTextChange={e => this.updateUserField('username', e.detail)}\n          ></ir-input-text>\n          <ir-input-text\n            testId=\"password\"\n            autoValidate={this.user ? (!this.userInfo?.password ? false : true) : this.autoValidate}\n            label={locales.entries.Lcz_Password}\n            value={this.userInfo.password}\n            type=\"password\"\n            maxLength={16}\n            zod={this.housekeeperSchema.pick({ password: true })}\n            wrapKey=\"password\"\n            error={this.errors?.password}\n            onInputFocus={() => (this.showPasswordValidation = true)}\n            onInputBlur={() => {\n              // if (this.user) this.showPasswordValidation = false;\n            }}\n            onTextChange={e => this.updateUserField('password', e.detail)}\n          ></ir-input-text>\n          {this.showPasswordValidation && <ir-password-validator password={this.userInfo.password}></ir-password-validator>}\n        </section>\n        <div class=\"sheet-footer\">\n          <ir-button\n            data-testid=\"cancel\"\n            onClickHandler={() => this.closeSideBar.emit(null)}\n            class=\"flex-fill\"\n            btn_styles=\"w-100  justify-content-center align-items-center\"\n            btn_color=\"secondary\"\n            text={locales.entries.Lcz_Cancel}\n          ></ir-button>\n          <ir-button\n            data-testid=\"save\"\n            isLoading={this.isLoading}\n            onClickHandler={this.addUser.bind(this)}\n            class=\"flex-fill\"\n            btn_styles=\"w-100 justify-content-center align-items-center\"\n            text={locales.entries.Lcz_Save}\n          ></ir-button>\n        </div>\n      </div>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}