import{c as o}from"./p-99cb260a.js";import{l as e}from"./p-4e493fea.js";import{a as r}from"./p-bf44a732.js";const t=[{color:"#F9A9FE",design:"skew",name:""},{color:"#ffe502",design:"skew",name:""},{color:"#6FF1EF",design:"skew",name:""},{color:"#9BF091",design:"skew",name:""},{color:"#C28D6B",design:"skew",name:""},{color:"#9B84D6",design:"skew",name:""}];const c={"#31bef1":"#85d0ff","#45b16d":"#bbdbc4","#FF9149":"#ffcfbc","#a0a0a0":"#d5d5d5","#f34752":"#f8727b","#f88c91":"#f8727b","#F9A9FE":"#fcd8ff","#ffe502":"#fff2b4","#6FF1EF":"#c5f8f7","#9BF091":"#d3f8cf","#C28D6B":"#e5b08f","#9B84D6":"#beadf0"};const a={"#31bef1":"#76b0cd","#45b16d":"#7ba989","#FF9149":"#d5997c","#a0a0a0":"#a0a0a0","#f34752":"#ce7c7f","#f88c91":"#d19699","#F9A9FE":"#d1a5d4","#ffe502":"#d5c671","#6FF1EF":"#8acdcb","#9BF091":"#9ecc99","#C28D6B":"#b29788","#9B84D6":"#9e93bd"};class n{async SetAutomaticCheckInOut(o){const{data:e}=await r.post(`/Set_Automatic_Check_In_Out`,o);if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}return e}async getExposedProperty(e){try{const{data:t}=await r.post(`/Get_Exposed_Property`,e);if(t.ExceptionMsg!==""){throw new Error(t.ExceptionMsg)}const c=t.My_Result;o.property={...c,calendar_extra:c.calendar_extra?JSON.parse(c.calendar_extra):null};o.adultChildConstraints=c.adult_child_constraints;o.cleaning_frequency=c.cleaning_frequency;o.allowedBookingSources=c.allowed_booking_sources;o.allowed_payment_methods=c.allowed_payment_methods;o.currency=c.currency;o.is_vacation_rental=c.is_vacation_rental;o.pickup_service=c.pickup_service;o.max_nights=c.max_nights;o.roomsInfo=c.roomtypes;o.taxes=c.taxes;o.id=c.id;o.country=c.country;o.name=c.name;o.is_automatic_check_in_out=c.is_automatic_check_in_out;o.tax_statement=c.tax_statement;o.is_frontdesk_enabled=c.is_frontdesk_enabled;o.is_pms_enabled=c.is_pms_enabled;const a=c?.time_constraints?.check_out_till?.split(":");o.checkin_checkout_hours={offset:c.city.gmt_offset,hour:Number(a[0]||0),minute:Number(a[1]||0)};this.initializeBookingColors();this.generateColorForegrounds();return t}catch(o){console.log(o);throw new Error(o)}}generateColorForegrounds(){const e={};if(!o.property?.calendar_legends){return}o.property.calendar_legends.forEach((o=>{if(o.design==="skew"){e[o.color]={foreground:"white",stripe:c[o.color]??"",checkout:a[o.color]??""}}}));t.forEach((o=>{e[o.color]={foreground:["#C28D6B","#9B84D6"].includes(o.color)?"white":"black",stripe:c[o.color]??"",checkout:a[o.color]??""}}));o.colorsForegrounds={...e}}initializeBookingColors(){const e=o.property.calendar_extra??{booking_colors:[]};const r=Array.isArray(e?.booking_colors)&&e.booking_colors.length?e.booking_colors:t;const c=r.map((o=>this.normalizeBookingColor(o)));this.syncCalendarExtra(c)}normalizeBookingColor(o){return{design:o.design||"skew",color:o.color||"#ffffff",name:o.name||""}}syncCalendarExtra(e){const r=o.property.calendar_extra??{};o.property.calendar_extra={...r,booking_colors:e.map((o=>({...o})))}}async fetchLanguage(o,t=["_PMS_FRONT"]){try{const{data:c}=await r.post(`https://gateway.igloorooms.com/IRBE/Get_Exposed_Language`,{code:o,sections:t});if(c.ExceptionMsg!==""){throw new Error(c.ExceptionMsg)}let a=this.transformArrayToObject(c.My_Result.entries);e.entries={...e.entries,...a};e.direction=c.My_Result.direction;return{entries:a,direction:c.My_Result.direction}}catch(o){console.log(o);throw new Error(o)}}transformArrayToObject(o){let e={};for(const r of o){e[r.code]=r.description}return e}}export{n as R};
//# sourceMappingURL=p-34b319c3.js.map