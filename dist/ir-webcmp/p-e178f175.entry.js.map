{"version":3,"names":["iglApplicationInfoCss","IglApplicationInfoStyle0","IglApplicationInfo","updateGuest","params","roomTypeId","this","rateplanSelection","roomtype","id","ratePlanId","ratePlan","prevGuest","guest","roomIndex","Object","assign","booking_store","ratePlanSelections","handleButtonClicked","event","detail","key","isButtonPressed","formatVariation","variation","adults","adult_nbr","_a","locales","entries","toLowerCase","_b","children","child_nbr","_c","_d","getTooltipMessages","selected_variation","selectedVariation","matchingVariation","variations","find","cancellationPolicy","applicable_policies","p","type","combined_statement","guaranteePolicy","_e","tooltip","undefined","getAmount","is_amount_modified","view_mode","rp_amount","totalNights","discounted_gross_amount","filterRooms","result","assignable_units","forEach","unit","Is_Fully_Available","push","name","pr_id","filteredGuestsRoom","filter","_","i","map","r","filteredResults","includes","toString","bookingType","baseData","roomtypeId","f","sort","a","b","localeCompare","render","filteredRoomList","h","Host","class","short_name","message","formatAmount","currency","symbol","Lcz_Stay","v4","guestInfo","placeholder","Lcz_GuestFirstnameAndLastname","onInput","target","value","event_type","modifyBookingStore","required","calendar_data","is_frontdesk_enabled","onChange","selected","Lcz_Assignunits","room","is_bed_configuration_enabled","bed_preference","_f","Lcz_BedConfiguration","bedPreferenceType","data","CODE_NAME","CODE_VALUE_EN","_g","style","gap","marginTop","_h","width","infant_nbr","Number","_j","Array","from","length","item","iglBlockDatesViewCss","IglBlockDatesViewStyle0","IglBlockDatesView","blockDatesData","RELEASE_AFTER_HOURS","OPTIONAL_REASON","OUT_OF_SERVICE","releaseList","bookingService","BookingService","componentWillLoad","getBlockedInfo","defaultData","parseInt","emitData","error","handleOptionalReason","handleReleaseAfterChange","evt","entryDate","renderPage","dataUpdateEvent","emit","getReleaseHoursString","dt","Date","entryHour","entryMinute","setHours","getHours","getMinutes","toLocaleString","month","getDate","formatNumber","handleOutOfService","checked","renderAgain","from_date","fromDate","dateOption","showDateDifference","to_date","toDate","isEventHover","Lcz_Reason","Lcz_OutOfservice","Lcz_Or","Lcz_OptionalReason","Lcz_AutomaticReleaseIn","releaseItem","Lcz_On","IglBookPropertyService","setBookingInfoFromAutoComplete","context","res","bookedByInfoData","email","firstName","first_name","lastName","last_name","countryId","country_id","isdCode","contactNumber","mobile","selectedArrivalTime","arrival","emailGuest","subscribe_to_news_letter","remark","cardNumber","cardHolderName","expiryMonth","expiryYear","bookingNumber","booking_nbr","rooms","resetRoomsInfoAndMessage","roomsInfo","onDataRoomUpdate","selectedUnits","isEdit","isEditBooking","units","changedKey","roomCategoryKey","roomCategoryId","ratePlanKey","shouldClearData","Map","initializeRoomCategoryIfNeeded","has","get","applyBookingEditToSelectedRoom","setSelectedRoomData","cleanupEmptyData","set","selectedRatePlans","totalRooms","inventory","delete","fill","size","clear","guestName","roomId","generateRoomDays","amount","endDate","setDate","currentDate","days","date","moment","format","cost","extractFirstNameAndLastName","names","split","getBookedRooms","check_in","check_out","notes","identifier","override_unit","total_days","calculateDaysBetweenDates","calculateAmount","rateplanId","rateplan","reserved","prepayment_amount_gross","occupancy","children_nbr","city","address","dob","cci","prepareBookUserServiceParams","sourceOption","dateRangeData","Error","generateNewRooms","isEventType","bookingData","PR_ID","modifyBookingDetails","pickup_info","is_direct","is_in_loyalty_mode","promo_key","extras","rest","__rest","assign_units","is_pms","booking","newBooking","currentRoomType","filteredRooms","newRooms","console","log","property","propertyid","booked_on","hour","minute","source","code","phone_prefix","nbr","holder_name","expiry_month","expiry_year","getRoomCategoryByRoomId","roomCategory","RATE_TYPE","setEditingRoomInfo","category","room_id","RATE_PLAN_ID","adultCount","ADULTS_COUNT","rate","RATE","rateType","roomCategoryName","ratePlanName","RATE_PLAN","NAME","cancelation","guarantee","adult_child_offering","iglBookPropertyCss","IglBookPropertyStyle0","IglBookProperty","initialRoomIds","showSplitBookingOption","sourceOptions","guestData","ratePricingMode","bookPropertyService","eventsService","EventsService","updatedBooking","MAX_HISTORY_LENGTH","adult","child","handleKeyDown","bind","initializeDefaultDateRange","defaultDateRange","initializeDefaultData","fetchSetupEntriesAndInitialize","initializeEventData","componentDidLoad","document","addEventListener","disconnectedCallback","removeEventListener","clearBooking","e","stopImmediatePropagation","stopPropagation","handleSpiltBookingSelected","getExposedBooking","language","handleAdultChildChange","adultChildCount","updateBookingHistory","onDateRangeSelect","opt","dates","checkIn","checkOut","checkBookingAvailability","handleSourceDropDown","selectedSource","description","tag","gotoSplitPageTwo","gotoPage","bookUser","closeWindow","animateIrSelect","calculateTotalRooms","animateIrButton","toast","Lcz_SelectRatePlan","title","partialData","lastEntry","bookingHistory","newEntry","shift","FROM_DATE","TO_DATE","setupEntries","fetchSetupEntries","setSourceOptions","allowedBookingSources","setOtherProperties","initializeEditBookingData","initializePage","CHILDREN_COUNT","roomName","page","isGuestDataIncomplete","isButtonDisabled","isValidProperty","comparedBy","bookingSource","SOURCE","arrivalTime","is_in_agent_mode","room_type_ids_to_update","room_type_ids","getBookingAvailability","agent_id","updateBooking","reserveRooms","resetBookingStore","closeBookingWindow","handleBlockDateUpdate","handleGuestInfoUpdate","guestRefKey","handleBookedByInfoUpdate","getPageBlockDatesView","Fragment","fromDateStr","toDateStr","ENTRY_DATE","onDataUpdateEvent","text","Lcz_Cancel","btn_color","onClick","Lcz_Blockdates","isLoading","isRequestPending","handleBlockDate","handlePageTwoDataUpdateEvent","releaseData","blockUnit","dateToFormattedString","NOTES","STAY_STATUS_CODE","DESCRIPTION","blockedUnit","transformNewBLockedRooms","blockedCreated","setLoadingState","STATUS_CODE","deleteEvent","POOL","serviceParams","doReservation","resetBookingData","resetLoadingState","setTimeout","getCurrentPage","BLOCK_DATES_TITLE","TITLE","onIconClickHandler","slot","xmlns","viewBox","height","d","defaultDaterange","eventType","selectedRooms","adultChildConstraints","propertyId","showPaymentDetails","selectedGuestData","countryNodeList","defaultGuestData","isEditOrAddRoomEvent","iglBookPropertyContainerCss","IglBookPropertyContainerStyle0","IglBookPropertyContainer","roomService","RoomService","token","Token","setRoomsData","roomServiceResp","roomsData","My_Result","roomtypes","expanded","calendarData","initializeApp","roomResponse","languageTexts","countriesList","Promise","all","getExposedProperty","aname","fetchLanguage","getCountries","direction","allowed_payment_methods","paymentMethods","allowed_booking_sources","adult_child_constraints","calendar_legends","legendData","paymentCodesToShow","some","method","ticket","setToken","ticketChanged","newValue","oldValue","handleCloseBookingWindow","bookingItem","handleTriggerClicked","tomorrow","dateDifference","EMAIL","ID","PHONE","REFERENCE_TYPE","Lcz_NewBooking","withIrToastAndInterceptor","onResetBookingData","onCloseBookingWindow","iglBookPropertyFooterCss","IglBookPropertyFooterStyle0","IglBookPropertyFooter","editNext","label","renderButton","disabled","icon_name","shouldRenderTwoButtons","btn_disabled","onClickHanlder","buttonClicked","iconPostion","icon_style","paddingBottom","Lcz_Next","iglBookPropertyHeaderCss","IglBookPropertyHeaderStyle0","IglBookPropertyHeader","getSplitBookingList","Lcz_Tobooking","keys","bookingDataDefaultDateRange","Lcz_BookingNumber","onComboboxValue","spiltBookingSelected","isSplitBooking","getSourceNode","Lcz_Source","sourceDropDownChange","option","obj","adultChild","getAdultChildConstraints","onSelectChange","select_id","firstOption","Lcz_AdultsCaption","LabelAvailable","adult_max_nbr","child_max_nbr","renderChildCaption","btn_id","icon","Lcz_Check","maxAge","child_max_age","years","Lcz_Years","Lcz_Year","Lcz_ChildCaption","Lcz_ChooseBookingNumber","position","initialToDate","initialFromDate","selectedFromDate","selectedToDate","isBefore","isAfter","Lcz_CheckInDateShouldBeMAx","replace","Lcz_PlzSelectNumberOfGuests","minDate","getTime","showSourceNode","variant","dateLabel","Lcz_Dates","add","startOf","tax_statement","iglBookingFormCss","IglBookingFormStyle0","IglBookingForm","initializeGuestData","selectedBookedByData","total","newSelectedUnits","getRate","isRateModified","preference","rate_plan","TOTAL_PRICE","handleOnApplicationInfoDataUpdateEvent","index","categoryIdKey","updatedUnits","handleEventData","Lcz_TotalPrice","values","val","rp","Lcz_Back","btn_styles","Lcz_Save","Lcz_Book","iglBookingOverviewPageCss","IglBookingOverviewPageStyle0","IglBookingOverviewPage","getSplitBookings","hasOwnProperty","splitBookingEvents","setMinDate","today","splitBookingId","splitBookings","roomTypes","roomType","isBookDisabled","roomInfoId","roomsDataUpdate","iglDateRangeCss","IglDateRangeStyle0","IglDateRange","initializeDates","handleDataChange","JSON","stringify","getFormattedDateString","calculateTotalNights","getFullYear","handleDateSelectEvent","dateSelectEvent","handleDateChange","start","end","maxDate","autoApply","onDateChanged","Lcz_Nights","Lcz_Night","withDateDifference","iglPropertyBookedByCss","IglPropertyBookedByStyle0","IglPropertyBookedBy","arrivalTimeList","expiryMonths","expiryYears","currentMonth","assignCountryCode","initializeExpiryYears","initializeDateData","populateBookedByData","currentYear","country","getUserDefaultCountry","bookedByData","getMonth","handleNumberInput","inputElement","inputValue","numericRegex","test","checkUser","z","string","safeParse","success","getUserInfo","prevBookedByData","handleComboboxChange","clearEvent","Lcz_BookedBy","Lcz_FindEmailAddress","onInputCleared","danger_border","validateEmail","Lcz_FirstName","Lcz_LastName","Lcz_Country","Lcz_Select","countryNode","Lcz_MobilePhone","Lcz_Isd","Lcz_ContactNumber","Lcz_YourArrivalTime","time","Lcz_AnyMessageForUs","rows","Lcz_CardNumber","pattern","Lcz_CardHolderName","Lcz_ExpiryDate","year","htmlFor","Lcz_EmailTheGuest","iglRatePlanCss","IglRatePlanStyle0","IglRatePlan","disableForm","shouldBeDisabled","visibleInventory","is_available_to_book","handleInput","sanitizedValue","parseFloat","updateRateplanSelection","props","currentSelections","handleVariationChange","bookProperty","gotoSplitPageTwoEvent","renderRate","amount_per_night_gross","v","updateRoomParams","resetReserved","updatedSelections","reduce","acc","ratePlans","rpAcc","isInputFocused","isAvailableToBook","formattedVariations","uuidv4","onFocus","onBlur","Lcz_Rate","Lcz_Current","iglRoomTypeCss","IglRoomTypeStyle0","IglRoomType","validBookingTypes","isValidBookingType","rateplans","getVisibleInventory","irAutocompleteCss","IrAutocompleteStyle0","IrAutocomplete","no_result_found","Lcz_NoResultsFound","dataSize","itemHeight","getHeightOfPElement","preventDefault","selectedIndex","adjustScrollPosition","selectItem","inputRef","blur","isComboBoxVisible","combobox","el","querySelector","pItem","offsetHeight","visibleHeight","margin","itemTotalHeight","selectedPosition","newScrollTop","Math","max","min","scrollHeight","scrollTo","top","behavior","isItemSelected","comboboxValue","resetCombobox","debounceFetchData","clearTimeout","debounceTimer","fetchData","duration","fetchExposedGuest","fetchExposedBookings","handleInputChange","handleDocumentClick","contains","handleBlur","inputFocused","isDropdownItem","activeElement","inputCleared","element","closest","handleFocus","handleItemKeyDown","renderDropdown","role","onKeyDown","tabIndex","clearInput","withblur","inputId","autoComplete","ref","PaymentService","AddPayment","payment","book_nbr","axios","post","ExceptionMsg","CancelPayment","GetExposedCancelationDueAmount","irBookingDetailsCss","IrBookingDetailsStyle0","IrBookingDetails","paymentService","printingBaseUrl","confirmationBG","handleIconClick","sidebarState","closeSidebar","openPrintingScreen","window","location","href","ARRIVAL","Lcz_AddingUnitToBooking","BOOKING_NUMBER","ADD_ROOM_TO_BOOKING","GUEST","ROOMS","handleEditSidebar","handleResetExposedCancelationDueAmount","paymentActions","currency_id","handleSelectChange","tempStatus","selectedValue","handleEditInitiated","handleResetBookingData","handleEditExtraService","selectedService","bookingDetails","property_id","then","warn","defaultTexts","guestCountryId","userCountry","myResult","updateStatus","isUpdateClicked","status","Lcz_StatusUpdatedSuccessfully","Lcz_SelectStatus","openPMSLogsDialog","dialogRef","openModal","pms_status","isPMSLogLoading","fetchPMSLogs","mode","version","open","system_id","url","handleDeleteFinish","bookingChanged","renderPhoneNumber","country_phone_prefix","selectedCountry","c","renderSidbarContent","handleClose","onCloseSideBar","defaultPickupData","numberOfPersons","onCloseModal","service","is_from_front_desk","Lcz_Booking","channel_booking_nbr","_formatDate","_formatTime","allowed_actions","is_editable","selectContainerStyle","selectStyles","textSize","is_pms_enabled","Lcz_pms","hasReceipt","hasPrint","hasDelete","colorVariants","danger","hasMenu","hasCloseButton","origin","Label","image","src","Icon","alt","iconShown","Lcz_Phone","Lcz_Email","alternative_email","Lcz_AlternativeEmail","Lcz_Address","flag","Lcz_ArrivalTime","Lcz_Coupon","agent","Lcz_AgentCode","Lcz_LoyaltyDiscountApplied","Lcz_Note","remarks","ota_notes","maxVisibleItems","Lcz_PrivateNote","Lcz_VisibleToHotelOnly","getPrivateNote","ignore_value","secondary","hasRoomAdd","isEditable","myRoomTypeFoodCat","mealCodeName","hasRoomEdit","hasRoomDelete","hasCheckIn","hasCheckOut","bookingEvent","bookingIndex","onDeleteFinished","extra_services","side","onIrSidebarToggle","showCloseButton","Lcz_PMS_Logs","Lcz_SentAt","sent_date","sent_hour","sent_minute","_k","is_acknowledged","Lcz_YES","Lcz_NO","Lcz_Acknowledged","_l","_m","irBookingExtraNoteCss","IrBookingExtraNoteStyle0","IrBookingExtraNote","setNote","note","savePrivateNote","prevExtras","newExtraObj","oldPrivateNoteIndex","findIndex","Is_Non_Technical_Change","closeModal","displayContext","onSubmit","Lcz_PrivateNote_MaxChar","maxLength","onTextChange","btn_type","initialState","channels","settlement_methods","statuses","types","rowCount","bookings","userSelection","to","channel","start_row","end_row","total_count","filter_type","booking_status","affiliate_id","is_mpo_managed","is_mpo_used","is_for_mobile","is_combined_view","is_to_export","download_url","state","booking_listing","onBookingListingChange","createStore","initializeUserSelection","updateUserSelection","BookingListingService","getExposedBookingsCriteria","getExposedBookings","header","My_Params_Get_Exposed_Bookings","exported_data_url","removeExposedBooking","is_to_revover","irBookingListingCss","IrBookingListingStyle0","IrBookingListing","bookingListingService","roomHistory","statusColors","async","newTotal","totalPages","ceil","showCost","financial","gross_cost","propertyData","is_backend","requests","unshift","handleSideBarToggle","editBookingItem","getPaginationBounds","totalCount","startItem","currentPage","endItem","listingModalTimeout","listingModal","editBooking","handleResetData","handleResetStoreData","handleBookingChanged","renderItemRange","Lcz_View","Lcz_Of","updateData","isSingleUnit","physicalrooms","scope","Lcz_BookedOn","Lcz_GuestSource","Lcz_Services","Lcz_Amount","customSlot","Lcz_BookingBalance","Lcz_ClickToSettle","Lcz_Balance","Lcz_Cost","Lcz_Status","colSpan","Lcz_NoDataAvailable","_o","cause","Lcz_P","stroke","substring","gross_total","due_amount","showFirstOption","onModalClosed","sidebarStyles","background","_p","onCloseSidebar","irButtonCss","IrButtonStyle0","IrButton","handleButtonAnimation","buttonEl","classList","remove","visibleBackgroundOnHover","clickHanlder","blockClass","btn_block","onlineResources","isCSS","link","IrCommon","parseRefs","initializeStyles","hrefsChanged","extraResources","resources","parse","appendTag","tagName","attributes","createElement","selectorParts","attr","setAttribute","selector","join","existingTag","head","appendChild","rel","isJS","irDatePickerCss","IrDatePickerStyle0","IrDatePicker","handleMinDateChange","$","dateRangeInput","initializeDateRangePicker","datePropChanged","updateDateRangePickerDates","openDatePicker","openDatePickerTimeout","click","picker","singleDatePicker","newDate","setStartDate","setEndDate","newStartDate","newEndDate","clone","getElementById","textContent","daterangepicker","opens","startDate","maxSpan","locale","separator","applyLabel","cancelLabel","fromLabel","toLabel","customRangeLabel","weekLabel","daysOfWeek","monthNames","firstDay","dateChanged","irDateViewCss","IrDateViewStyle0","IrDateView","handleFromDateChange","newVal","oldVal","handleToDateChange","convertDate","date_diffrence","isMoment","irDialogCss","IrDialogStyle0","IrDialog","prepareFocusTrap","isOpen","body","overflow","openChange","handleOpenChange","focusableElements","focusableContent","shadowRoot","querySelectorAll","firstFocusableElement","lastFocusableElement","focus","ev","isTabPressed","shiftKey","irExtraServiceCss","IrExtraServiceStyle0","IrExtraService","deleteService","doBookingExtraService","is_remove","price","currencySymbol","booking_system_id","editExtraService","irModalRef","start_date","end_date","autoClose","onConfirmModal","iconAvailable","leftBtnText","rightBtnText","Lcz_Delete","leftBtnColor","rightBtnColor","modalTitle","Lcz_Confirmation","modalBody","Lcz_FromThisBooking","ExtraServiceSchema","object","number","optional","coerce","nullable","irExtraServiceConfigCss","IrExtraServiceConfigStyle0","IrExtraServiceConfig","s_service","saveAmenity","ZodError","updateService","prevService","input","formattedValue","toFixed","step","irExtraServicesCss","IrExtraServicesStyle0","IrExtraServices","irGuestInfoCss","IrGuestInfoStyle0","GuestInfo","init","countries","fetchGuest","editGuest","editExposedGuest","closeSideBar","Lcz_GuestDetails","submited","submit","Lcz_Newsletter","color","irIconCss","IrIconStyle0","IrIcon","iconClickHandler","irIconsCss","IrIconsStyle0","IrIcons","svgPath","icons","svgClassName","irInputTextCss","IrInputTextStyle0","IrInputText","connectedCallback","watchHandler","valid","watchHandler2","initial","handleAriaInvalidChange","isError","checkValidity","textChange","inputBlur","className","labelWidth","labelColor","labelPosition","labelBackground","labelBorder","inputStyle","readOnly","readonly","inputStyles","irInterceptorCss","IrInterceptorStyle0","IrInterceptor","handleStopPageLoading","isPageLoadingStoped","setupAxiosInterceptors","interceptors","request","use","handleRequest","handleError","response","handleResponse","extractEndpoint","isHandledEndpoint","handledEndpoints","config","extractedUrl","interceptor_requests","endpointsCount","trim","reject","irLabelCss","IrLabelStyle0","IrLabel","openEditSidebar","editSidebar","irListingHeaderCss","IrListingHeaderStyle0","IrListingHeader","handleDateRangeChange","handleSearchClicked","preventPageLoad","downloadUrlTag","download","handleClearUserField","toDateRef","Lcz_Bookings","Lcz_CreateNewBooking","Lcz_FindBookNbrorName","t","Lcz_All","Lcz_Channels","Lcz_Search","Lcz_Erase","Lcz_ExportToExcel","irListingModalCss","IrListingModalStyle0","IrListingModal","bookingListingsService","selectedDesignation","deletionStage","modalClosed","filterBookings","btnClickHandler","designation","reference","resetData","loadingBtn","renderTitle","Lcz_MarkBookingAsPaid","Lcz_SureYouWantToDeleteBookingNbr","Lcz_WantToRecoverAllotment","renderConfirmationTitle","Lcz_RecoverAndDelete","Lcz_Confirm","renderCancelationTitle","Lcz_JustDelete","tabindex","cursor","m","irLoadingScreenCss","IrLoadingScreenStyle0","IrLoadingScreen","irModalCss","IrModalStyle0","IrModal","cancelModal","confirmModal","btnPosition","leftBtnActive","rightBtnActive","irPaymentActionsCss","IrPaymentActionsStyle0","IrPaymentActions","paymentAction","pa","due_on","generatePayment","isSame","irPaymentDetailsCss","IrPaymentDetailsStyle0","IrPaymentDetails","paymentBackground","handlePaymentGeneration","newTableRow","itemToBeAdded","initializeItemToBeAdded","paymentExceptionMessage","_processPaymentSave","Lcz_EnterAmount","modal_mode","_handleSave","resetExposedCancelationDueAmount","handlePaymentInputChange","isNaN","cancelPayment","toBeDeletedItem","newPaymentArray","payments","handleConfirmModal","modal","handleCancelModal","handleBookingDetails","_renderTableRow","rowMode","rowSpan","onKeyPress","bookingGuarantee","Lcz_BookingGuarantee","collapsedGuarantee","paymentDetailsUrl","getPCICardInfoURL","_s","_r","_q","_u","_t","_x","_w","_v","_0","_z","_y","cvc","_3","_2","_1","frameborder","_renderDueDate","Lcz_TotalCost","prev","curr","Lcz_Payments","backgroundColor","Lcz_Designation","Lcz_IfDeletedPermantlyLost","Lcz_EnteringAmountGreaterThanDue","onCancelModal","PickupService","savePickup","splitTime","arrival_time","arrival_date","details","flight_details","nbr_of_units","number_of_vehicles","selected_option","due_upon_booking","transformDefaultPickupData","renderTime","vehicle_type_code","vehicle","getAvailableLocations","locations","pickup_service","allowed_options","validateForm","getNumberOfVehicles","capacity","total_number_of_vehicles","startNumber","bonus_number","getPickUpPersonStatus","getCodeDescription","allowed_pricing_models","model","updateDue","irPickupCss","IrPickupStyle0","IrPickup","pickupService","transformedData","vehicleCapacity","allowedOptionsByLocation","pickupData","handleLocationChange","updatePickupData","locationChoice","pricing_model","initializeInputMask","Inputmask","definitions","H","validator","ch","maskset","pos","firstDigit","buffer","M","insertMode","showMaskOnHover","inputmode","alias","oncomplete","oncleared","onincomplete","mask","handleVehicleQuantityChange","handleVehicleTypeChange","isValid","Lcz_Pickup","Lcz_Pickup_NoThankYou","Lcz_Pickup_YesFrom","Lcz_ArrivalDate","Lcz_Time","Lcz_FlightDetails","Lcz_NbrOfVehicles","Lcz_DueUponBooking","irPickupViewCss","IrPickupViewStyle0","IrPickupView","is_enabled","Lcz_Date","pickup_instruction","pickup_cancelation_prepayment","irRoomCss","IrRoomStyle0","IrRoom","handleBookingEventChange","handleClick","pressCheckIn","pressCheckOut","getDateStr","handleEditClick","editInitiated","formatName","Lcz_EditBookingFor","ARRIVAL_TIME","COUNTRY","FROM_DATE_STR","IDENTIFIER","IS_EDITABLE","NO_OF_DAYS","SPLIT_BOOKING","STATUS","TO_DATE_STR","PICKUP_INFO","handleDeleteClick","deleteRoom","oldRooms","deleteFinished","adjustedChildNbr","adultLabel","Lcz_Adults","Lcz_Adult","childLabel","Lcz_Children","Lcz_Child","infantLabel","Lcz_Infants","Lcz_Infant","parts","Boolean","collapsed","is_non_refundable","Lcz_NonRefundable","Lcz_Breakdown","_getDay","Lcz_SubTotal","filtered_data","taxes","tx","pct","is_exlusive","Lcz_Excluding","Lcz_Including","ota_taxes","Lcz_Cancellation","innerHTML","Lcz_Guarantee","Lcz_MealPlan","irSelectCss","IrSelectStyle0","IrSelect","count","selectEl","componentwillload","selectChange","selectStyle","irSidebarCss","IrSidebarStyle0","IrSidebar","applyStyles","sidebarRef","handleSidebarStylesChange","toggleSidebar","irSidebarToggle","irSpinnerCss","IrSpinnerStyle0","IrSpinner","initStyles","handleSpinnerSizeChange","handleSpinnerBorderWidthChange","handleSpinnerUnitChange","handleSpinnerColorChange","applyCssElement","borderWidth","setProperty","IrTextArea","textareaClassname","irTitleCss","IrTitleStyle0","IrTitle","justifyContent","handleJustifyContentChange","irToastCss","IrToastStyle0","IrToast","onToast","showToast","toastrOptions","positionClass","closeButton","timeOut","toastr","irTooltipCss","IrTooltipStyle0","IrTooltip","toggleOpen","shouldOpen","tooltipTimeout","onMouseEnter","onMouseLeave","otaLabelCss","OtaLabelStyle0","OtaLabel","toggleShowAll","showAll","displayedRemarks","slice","statement","Lcz_ShowLess","Lcz_ShowMore"],"sources":["src/components/igloo-calendar/igl-book-property/igl-booking-form/igl-application-info/igl-application-info.css?tag=igl-application-info&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-booking-form/igl-application-info/igl-application-info.tsx","src/components/igloo-calendar/igl-block-dates-view/igl-block-dates-view.css?tag=igl-block-dates-view&encapsulation=scoped","src/components/igloo-calendar/igl-block-dates-view/igl-block-dates-view.tsx","src/components/igloo-calendar/igl-book-property/igl-book-property.service.ts","src/components/igloo-calendar/igl-book-property/igl-book-property.css?tag=igl-book-property&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-book-property.tsx","src/components/igl-book-property-container/igl-book-property-container.css?tag=igl-book-property-container&encapsulation=scoped","src/components/igl-book-property-container/igl-book-property-container.tsx","src/components/igloo-calendar/igl-book-property/igl-book-property-footer/igl-book-property-footer.css?tag=igl-book-property-footer&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-book-property-footer/igl-book-property-footer.tsx","src/components/igloo-calendar/igl-book-property/igl-book-property-header/igl-book-property-header.css?tag=igl-book-property-header&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-book-property-header/igl-book-property-header.tsx","src/components/igloo-calendar/igl-book-property/igl-booking-form/igl-booking-form.css?tag=igl-booking-form&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-booking-form/igl-booking-form.tsx","src/components/igloo-calendar/igl-book-property/igl-booking-overview-page/igl-booking-overview-page.css?tag=igl-booking-overview-page&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-booking-overview-page/igl-booking-overview-page.tsx","src/components/igloo-calendar/igl-date-range/igl-date-range.css?tag=igl-date-range&encapsulation=scoped","src/components/igloo-calendar/igl-date-range/igl-date-range.tsx","src/components/igloo-calendar/igl-book-property/igl-booking-form/igl-property-booked-by/igl-property-booked-by.css?tag=igl-property-booked-by&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-booking-form/igl-property-booked-by/igl-property-booked-by.tsx","src/components/igloo-calendar/igl-book-property/igl-booking-overview-page/igl-room-type/igl-rate-plan/igl-rate-plan.css?tag=igl-rate-plan&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-booking-overview-page/igl-room-type/igl-rate-plan/igl-rate-plan.tsx","src/components/igloo-calendar/igl-book-property/igl-booking-overview-page/igl-room-type/igl-room-type.css?tag=igl-room-type&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-booking-overview-page/igl-room-type/igl-room-type.tsx","src/components/ir-autocomplete/ir-autocomplete.css?tag=ir-autocomplete&encapsulation=scoped","src/components/ir-autocomplete/ir-autocomplete.tsx","src/services/payment.service.ts","src/components/ir-booking-details/ir-booking-details.css?tag=ir-booking-details&encapsulation=scoped","src/components/ir-booking-details/ir-booking-details.tsx","src/components/ir-booking-extra-note/ir-booking-extra-note.css?tag=ir-booking-extra-note&encapsulation=scoped","src/components/ir-booking-extra-note/ir-booking-extra-note.tsx","src/stores/booking_listing.store.ts","src/services/booking_listing.service.ts","src/components/ir-booking-listing/ir-booking-listing.css?tag=ir-booking-listing&encapsulation=scoped","src/components/ir-booking-listing/ir-booking-listing.tsx","src/components/ir-button/ir-button.css?tag=ir-button&encapsulation=scoped","src/components/ir-button/ir-button.tsx","src/common/ir.common.resources.ts","src/components/ir-common/ir-common.tsx","src/components/ir-date-picker/ir-date-picker.css?tag=ir-date-picker&encapsulation=scoped","src/components/ir-date-picker/ir-date-picker.tsx","src/components/ir-date-view/ir-date-view.css?tag=ir-date-view&encapsulation=scoped","src/components/ir-date-view/ir-date-view.tsx","src/components/ir-dialog/ir-dialog.css?tag=ir-dialog&encapsulation=shadow","src/components/ir-dialog/ir-dialog.tsx","src/components/ir-booking-details/ir-extra-services/ir-extra-service/ir-extra-service.css?tag=ir-extra-service&encapsulation=scoped","src/components/ir-booking-details/ir-extra-services/ir-extra-service/ir-extra-service.tsx","src/models/booking.dto.ts","src/components/ir-booking-details/ir-extra-services/ir-extra-service-config/ir-extra-service-config.css?tag=ir-extra-service-config&encapsulation=scoped","src/components/ir-booking-details/ir-extra-services/ir-extra-service-config/ir-extra-service-config.tsx","src/components/ir-booking-details/ir-extra-services/ir-extra-services.css?tag=ir-extra-services&encapsulation=scoped","src/components/ir-booking-details/ir-extra-services/ir-extra-services.tsx","src/components/ir-guest-info/ir-guest-info.css?tag=ir-guest-info&encapsulation=scoped","src/components/ir-guest-info/ir-guest-info.tsx","src/components/ir-icon/ir-icon.css?tag=ir-icon&encapsulation=scoped","src/components/ir-icon/ir-icon.tsx","src/components/ui/ir-icons/ir-icons.css?tag=ir-icons&encapsulation=scoped","src/components/ui/ir-icons/ir-icons.tsx","src/components/ir-input-text/ir-input-text.css?tag=ir-input-text&encapsulation=scoped","src/components/ir-input-text/ir-input-text.tsx","src/components/ir-interceptor/ir-interceptor.css?tag=ir-interceptor&encapsulation=scoped","src/components/ir-interceptor/ir-interceptor.tsx","src/components/ui/ir-label/ir-label.css?tag=ir-label&encapsulation=scoped","src/components/ui/ir-label/ir-label.tsx","src/components/ir-booking-listing/ir-listing-header/ir-listing-header.css?tag=ir-listing-header&encapsulation=scoped","src/components/ir-booking-listing/ir-listing-header/ir-listing-header.tsx","src/components/ir-booking-listing/ir-listing-modal/ir-listing-modal.css?tag=ir-listing-modal&encapsulation=scoped","src/components/ir-booking-listing/ir-listing-modal/ir-listing-modal.tsx","src/components/ir-loading-screen/ir-loading-screen.css?tag=ir-loading-screen&encapsulation=scoped","src/components/ir-loading-screen/ir-loading-screen.tsx","src/components/ir-modal/ir-modal.css?tag=ir-modal&encapsulation=scoped","src/components/ir-modal/ir-modal.tsx","src/components/ir-booking-details/ir-payment-details/ir-payment-actions/ir-payment-actions.css?tag=ir-payment-actions&encapsulation=scoped","src/components/ir-booking-details/ir-payment-details/ir-payment-actions/ir-payment-actions.tsx","src/components/ir-booking-details/ir-payment-details/ir-payment-details.css?tag=ir-payment-details&encapsulation=scoped","src/components/ir-booking-details/ir-payment-details/ir-payment-details.tsx","src/components/ir-booking-details/ir-pickup/pickup.service.ts","src/components/ir-booking-details/ir-pickup/ir-pickup.css?tag=ir-pickup&encapsulation=scoped","src/components/ir-booking-details/ir-pickup/ir-pickup.tsx","src/components/ir-booking-details/ir-pickup-view/ir-pickup-view.css?tag=ir-pickup-view&encapsulation=scoped","src/components/ir-booking-details/ir-pickup-view/ir-pickup-view.tsx","src/components/ir-booking-details/ir-room/ir-room.css?tag=ir-room&encapsulation=scoped","src/components/ir-booking-details/ir-room/ir-room.tsx","src/components/ir-select/ir-select.css?tag=ir-select&encapsulation=scoped","src/components/ir-select/ir-select.tsx","src/components/ir-sidebar/ir-sidebar.css?tag=ir-sidebar&encapsulation=shadow","src/components/ir-sidebar/ir-sidebar.tsx","src/components/ui/ir-spinner/ir-spinner.css?tag=ir-spinner&encapsulation=shadow","src/components/ui/ir-spinner/ir-spinner.tsx","src/components/ir-textarea/ir-textarea.tsx","src/components/ir-title/ir-title.css?tag=ir-title&encapsulation=scoped","src/components/ir-title/ir-title.tsx","src/components/ir-toast/ir-toast.css?tag=ir-toast&encapsulation=scoped","src/components/ir-toast/ir-toast.tsx","src/components/ir-tooltip/ir-tooltip.css?tag=ir-tooltip&encapsulation=scoped","src/components/ir-tooltip/ir-tooltip.tsx","src/components/ota-label/ota-label.css?tag=ota-label&encapsulation=scoped","src/components/ota-label/ota-label.tsx"],"sourcesContent":[":host {\r\n  display: block;\r\n}\r\n.rate_amount {\r\n  display: none;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\n.booking-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-bottom: 0.5rem;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.booking-roomtype-title {\r\n  font-size: 1.25rem;\r\n  margin-right: 0.5rem;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.booking-details-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\n.booking-rateplan {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.booking-rateplan-name {\r\n  font-weight: bold;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.booking-tooltip {\r\n  margin-right: 0.5rem;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.booking-variation {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.booking-price {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.booking-footer {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.booking-details-container {\r\n  display: none;\r\n}\r\n\r\n/*md*/\r\n@media (min-width: 768px) {\r\n  .booking-header {\r\n    justify-content: flex-start;\r\n  }\r\n  .booking-footer,\r\n  .booking-price {\r\n    display: none;\r\n  }\r\n  .booking-details-container,\r\n  .rate_amount {\r\n    display: inline-flex;\r\n    gap: 0.5rem;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 908px) {\r\n  .aplicationInfoContainer {\r\n    max-width: 80%;\r\n  }\r\n  .guest-info-container {\r\n    max-width: 300px;\r\n  }\r\n\r\n  .preference-select-container {\r\n    max-width: 250px;\r\n  }\r\n}\r\n","import { Component, Host, h, Prop, State, Listen } from '@stencil/core';\r\nimport { TPropertyButtonsTypes } from '@/components';\r\nimport { ICurrency } from '@/models/calendarData';\r\nimport booking_store, { IRatePlanSelection, modifyBookingStore, RatePlanGuest } from '@/stores/booking.store';\r\nimport { Variation } from '@/models/property';\r\nimport locales from '@/stores/locales.store';\r\nimport { v4 } from 'uuid';\r\nimport calendar_data from '@/stores/calendar-data';\r\nimport { formatAmount } from '@/utils/utils';\r\n\r\n@Component({\r\n  tag: 'igl-application-info',\r\n  styleUrl: 'igl-application-info.css',\r\n  scoped: true,\r\n})\r\nexport class IglApplicationInfo {\r\n  @Prop() rateplanSelection: IRatePlanSelection;\r\n  @Prop() guestInfo: RatePlanGuest | null;\r\n  @Prop() currency: ICurrency;\r\n  @Prop() bedPreferenceType = [];\r\n  @Prop() bookingType: string = 'PLUS_BOOKING';\r\n  @Prop() roomIndex: number;\r\n  @Prop() totalNights: number = 1;\r\n  @Prop() baseData: { unit: { id: string; name: string }; roomtypeId: number };\r\n\r\n  @State() isButtonPressed = false;\r\n\r\n  private updateGuest(params: Partial<RatePlanGuest>) {\r\n    const roomTypeId = this.rateplanSelection.roomtype.id;\r\n    const ratePlanId = this.rateplanSelection.ratePlan.id;\r\n    let prevGuest = [...this.rateplanSelection.guest];\r\n    prevGuest[this.roomIndex] = {\r\n      ...prevGuest[this.roomIndex],\r\n      ...params,\r\n    };\r\n    booking_store.ratePlanSelections = {\r\n      ...booking_store.ratePlanSelections,\r\n      [roomTypeId]: {\r\n        ...booking_store.ratePlanSelections[roomTypeId],\r\n        [ratePlanId]: { ...this.rateplanSelection, guest: [...prevGuest] },\r\n      },\r\n    };\r\n  }\r\n\r\n  @Listen('buttonClicked', { target: 'body' })\r\n  handleButtonClicked(\r\n    event: CustomEvent<{\r\n      key: TPropertyButtonsTypes;\r\n      data?: CustomEvent;\r\n    }>,\r\n  ) {\r\n    switch (event.detail.key) {\r\n      case 'book':\r\n      case 'bookAndCheckIn':\r\n      case 'save':\r\n        this.isButtonPressed = true;\r\n        break;\r\n    }\r\n  }\r\n\r\n  private formatVariation(variation: Variation): string {\r\n    if (!variation) return '';\r\n    const adults = `${variation.adult_nbr} ${variation.adult_nbr === 1 ? locales.entries['Lcz_Adult']?.toLowerCase() : locales.entries['Lcz_Adults']?.toLowerCase()}`;\r\n    const children =\r\n      variation.child_nbr > 0\r\n        ? `${variation.child_nbr} ${variation.child_nbr > 1 ? locales.entries['Lcz_Children']?.toLowerCase() : locales.entries['Lcz_Child']?.toLowerCase()}`\r\n        : '';\r\n    return children ? `${adults} ${children}` : adults;\r\n  }\r\n\r\n  private getTooltipMessages(): string | undefined {\r\n    const { ratePlan, selected_variation } = this.rateplanSelection;\r\n    const selectedVariation = selected_variation;\r\n    if (!selectedVariation) return;\r\n\r\n    const matchingVariation = ratePlan.variations?.find(variation => this.formatVariation(variation) === this.formatVariation(selectedVariation));\r\n\r\n    if (!matchingVariation) return;\r\n\r\n    const cancellationPolicy = matchingVariation.applicable_policies?.find(p => p.type === 'cancelation')?.combined_statement;\r\n    const guaranteePolicy = matchingVariation.applicable_policies?.find(p => p.type === 'guarantee')?.combined_statement;\r\n\r\n    let tooltip = '';\r\n    if (cancellationPolicy) {\r\n      tooltip += `<b><u>Cancellation:</u></b> ${cancellationPolicy}<br/>`;\r\n    }\r\n    if (guaranteePolicy) {\r\n      tooltip += `<b><u>Guarantee:</u></b> ${guaranteePolicy}`;\r\n    }\r\n    return tooltip || undefined;\r\n  }\r\n\r\n  private getAmount(): number {\r\n    if (this.rateplanSelection.is_amount_modified) {\r\n      return this.rateplanSelection.view_mode === '001' ? this.rateplanSelection.rp_amount : this.rateplanSelection.rp_amount * this.totalNights;\r\n    }\r\n    return this.rateplanSelection.selected_variation.discounted_gross_amount;\r\n  }\r\n\r\n  private filterRooms(): { name: string; id: number }[] {\r\n    const result = [];\r\n    this.rateplanSelection.ratePlan?.assignable_units.forEach(unit => {\r\n      if (unit.Is_Fully_Available) {\r\n        result.push({ name: unit.name, id: unit.pr_id });\r\n      }\r\n    });\r\n    const filteredGuestsRoom = this.rateplanSelection.guest.filter((_, i) => i !== this.roomIndex).map(r => r.unit);\r\n    const filteredResults = result.filter(r => !filteredGuestsRoom.includes(r.id.toString()));\r\n    return this.bookingType === 'EDIT_BOOKING'\r\n      ? [...filteredResults, this.rateplanSelection.roomtype.id === this.baseData?.roomtypeId ? this.baseData?.unit : null]\r\n          .filter(f => !!f)\r\n          .sort((a, b) => a.name.localeCompare(b.name))\r\n      : filteredResults;\r\n  }\r\n\r\n  render() {\r\n    const filteredRoomList = this.filterRooms();\r\n    return (\r\n      <Host class={'my-2'}>\r\n        <div class=\"booking-header\">\r\n          {(this.bookingType === 'PLUS_BOOKING' || this.bookingType === 'ADD_ROOM' || this.bookingType === 'EDIT_BOOKING') && (\r\n            <span class=\"booking-roomtype-title\">{this.rateplanSelection.roomtype.name}</span>\r\n          )}\r\n          <div class=\"booking-details-container\">\r\n            <div class=\"booking-rateplan\">\r\n              <p class=\"booking-rateplan-name\">{this.rateplanSelection.ratePlan.short_name}</p>\r\n              <ir-tooltip class=\"booking-tooltip\" message={this.getTooltipMessages()}></ir-tooltip>\r\n            </div>\r\n            <p class=\"booking-variation\">{this.formatVariation(this.rateplanSelection.selected_variation)}</p>\r\n          </div>\r\n          <p class=\"booking-price\">\r\n            {formatAmount(this.currency?.symbol, this.getAmount())}/{locales.entries.Lcz_Stay}\r\n          </p>\r\n        </div>\r\n        <div class=\"booking-footer\">\r\n          <div class=\"booking-rateplan\">\r\n            <p class=\"booking-rateplan-name\">{this.rateplanSelection.ratePlan.short_name}</p>\r\n            <ir-tooltip class=\"booking-tooltip\" message={this.getTooltipMessages()}></ir-tooltip>\r\n          </div>\r\n          <p class=\"booking-variation\">{this.formatVariation(this.rateplanSelection.selected_variation)}</p>\r\n        </div>\r\n        <div class=\"d-flex flex-column flex-md-row  p-0 align-items-md-center aplicationInfoContainer\">\r\n          <div class=\"mr-1 flex-fill guest-info-container\">\r\n            <input\r\n              id={v4()}\r\n              type=\"email\"\r\n              class={`form-control ${this.isButtonPressed && this.guestInfo?.name === '' && 'border-danger'}`}\r\n              placeholder={locales.entries.Lcz_GuestFirstnameAndLastname}\r\n              name=\"guestName\"\r\n              onInput={event => {\r\n                const name = (event.target as HTMLInputElement).value;\r\n                this.updateGuest({ name });\r\n                if (booking_store.event_type.type === 'EDIT_BOOKING') {\r\n                  modifyBookingStore('guest', {\r\n                    ...booking_store.guest,\r\n                    name,\r\n                  });\r\n                }\r\n              }}\r\n              required\r\n              value={this.guestInfo?.name}\r\n            />\r\n          </div>\r\n          <div class=\"mt-1 mt-md-0 d-flex align-items-center flex-fill\">\r\n            {calendar_data.is_frontdesk_enabled && (this.bookingType === 'PLUS_BOOKING' || this.bookingType === 'ADD_ROOM' || this.bookingType === 'EDIT_BOOKING') && (\r\n              <div class=\"mr-1 p-0 flex-fill preference-select-container\">\r\n                <select class=\"form-control input-sm pr-0\" id={v4()} onChange={event => this.updateGuest({ unit: (event.target as HTMLInputElement).value })}>\r\n                  <option value=\"\" selected={this.guestInfo?.unit === ''}>\r\n                    {locales.entries.Lcz_Assignunits}\r\n                  </option>\r\n                  {filteredRoomList?.map(room => (\r\n                    <option value={room.id} selected={this.guestInfo?.unit === room.id.toString()}>\r\n                      {room.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            )}\r\n          </div>\r\n          {this.rateplanSelection.roomtype.is_bed_configuration_enabled && (\r\n            <div class=\"mr-1 flex-fill\">\r\n              <select\r\n                class={`form-control input-sm ${this.isButtonPressed && this.guestInfo?.bed_preference === '' && 'border-danger'}`}\r\n                id={v4()}\r\n                onChange={event => this.updateGuest({ bed_preference: (event.target as HTMLInputElement).value })}\r\n              >\r\n                <option value=\"\" selected={this.guestInfo?.bed_preference === ''}>\r\n                  {locales.entries.Lcz_BedConfiguration}\r\n                </option>\r\n                {this.bedPreferenceType.map(data => (\r\n                  <option value={data.CODE_NAME} selected={this.guestInfo?.bed_preference === data.CODE_NAME}>\r\n                    {data.CODE_VALUE_EN}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          )}\r\n          <p class=\"rate_amount\">\r\n            {formatAmount(this.currency?.symbol, this.getAmount())}/{locales.entries.Lcz_Stay}\r\n          </p>\r\n        </div>\r\n        {this.rateplanSelection.selected_variation.child_nbr > 0 && (\r\n          <div style={{ gap: '0.5rem', marginTop: '0.5rem' }} class=\"d-flex  flex-row  p-0 align-items-center aplicationInfoContainer\">\r\n            <p class={'m-0 p-0 text-danger'}>Any of the children below 3 years?</p>\r\n            <div class=\"mr-1 flex-fill\">\r\n              <select\r\n                class={`form-control input-sm ${this.isButtonPressed && this.guestInfo?.bed_preference === '' && 'border-danger'}`}\r\n                id={v4()}\r\n                style={{ width: 'max-content' }}\r\n                onChange={event => this.updateGuest({ infant_nbr: Number((event.target as HTMLInputElement).value) })}\r\n              >\r\n                <option value=\"\" selected={Number(this.guestInfo?.infant_nbr) === 0}>\r\n                  {locales.entries['No'] || 'No'}\r\n                </option>\r\n                {Array.from({ length: this.rateplanSelection.selected_variation.child_nbr }, (_, i) => i + 1).map(item => (\r\n                  <option value={item} selected={this.guestInfo?.infant_nbr === item}>\r\n                    {item}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n\r\n:host .controlContainer {\r\n  width: 24px;\r\n}\r\n\r\n:host .checkBoxContainer input {\r\n  height: 1.2rem !important;\r\n  width: 30px;\r\n}\r\n\r\n.releaseTime {\r\n  padding-left: 5px;\r\n}\r\n.out-of-service-label {\r\n  margin-left: 5px !important;\r\n}\r\n","import { Component, Host, h, Prop, State, Event, EventEmitter } from '@stencil/core';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport { IEntries } from '@/models/IBooking';\r\nimport locales from '@/stores/locales.store';\r\n\r\n@Component({\r\n  tag: 'igl-block-dates-view',\r\n  styleUrl: 'igl-block-dates-view.css',\r\n  scoped: true,\r\n})\r\nexport class IglBlockDatesView {\r\n  @Prop() defaultData: { [key: string]: any };\r\n  @Prop() fromDate: string;\r\n  @Prop() toDate: string;\r\n  @Prop({ mutable: true }) entryDate: string;\r\n  @Prop() entryHour: number;\r\n  @Prop() isEventHover: boolean = false;\r\n  @Prop() entryMinute: number;\r\n  @State() renderAgain: boolean = false;\r\n  @Event() dataUpdateEvent: EventEmitter<{ [key: string]: any }>;\r\n\r\n  private blockDatesData: { [key: string]: any } = {\r\n    RELEASE_AFTER_HOURS: 0,\r\n    OPTIONAL_REASON: '',\r\n    OUT_OF_SERVICE: false,\r\n  }; // Change of property name might require updates in booking-event-hover\r\n  private releaseList: IEntries[] = [];\r\n  private bookingService: BookingService = new BookingService();\r\n\r\n  async componentWillLoad() {\r\n    try {\r\n      this.releaseList = await this.bookingService.getBlockedInfo();\r\n      if (this.defaultData) {\r\n        this.blockDatesData = { ...this.defaultData };\r\n      } else {\r\n        this.blockDatesData.RELEASE_AFTER_HOURS = parseInt(this.releaseList[0].CODE_NAME);\r\n        this.emitData();\r\n      }\r\n    } catch (error) {\r\n      // toastr.error(error);\r\n    }\r\n  }\r\n\r\n  handleOptionalReason(event) {\r\n    this.blockDatesData.OPTIONAL_REASON = event.target.value;\r\n    this.emitData();\r\n  }\r\n\r\n  handleReleaseAfterChange(evt) {\r\n    if (this.entryDate) this.entryDate = undefined;\r\n    this.blockDatesData.RELEASE_AFTER_HOURS = parseInt(evt.target.value);\r\n    this.renderPage();\r\n    this.emitData();\r\n  }\r\n\r\n  emitData() {\r\n    this.dataUpdateEvent.emit({\r\n      key: 'blockDatesData',\r\n      data: { ...this.blockDatesData },\r\n    });\r\n  }\r\n\r\n  getReleaseHoursString() {\r\n    // console.log(\"entry date\", this.entryDate);\r\n    // console.log(\"blocked date data\", this.blockDatesData);\r\n    let dt = this.entryDate ? new Date(this.entryDate) : new Date();\r\n    if (this.entryDate && this.entryHour && this.entryMinute) {\r\n      dt.setHours(this.entryHour, this.entryMinute, 0, 0);\r\n    } else {\r\n      dt.setHours(dt.getHours() + this.blockDatesData.RELEASE_AFTER_HOURS, dt.getMinutes(), 0, 0);\r\n    }\r\n\r\n    return dt.toLocaleString('default', { month: 'short' }) + ' ' + dt.getDate() + ', ' + this.formatNumber(dt.getHours()) + ':' + this.formatNumber(dt.getMinutes());\r\n  }\r\n  formatNumber(value: number) {\r\n    return value < 10 ? `0${value}` : value;\r\n  }\r\n  handleOutOfService(evt) {\r\n    this.blockDatesData.OUT_OF_SERVICE = evt.target.checked;\r\n    if (this.blockDatesData.OUT_OF_SERVICE) {\r\n      this.blockDatesData.OPTIONAL_REASON = '';\r\n      this.blockDatesData.RELEASE_AFTER_HOURS = 0;\r\n    }\r\n    this.renderPage();\r\n    this.emitData();\r\n  }\r\n\r\n  renderPage() {\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class={`m-0 p-0 mb-1`}>\r\n          <div class=\"text-left p-0\">\r\n            <ir-date-view from_date={this.fromDate} dateOption=\"DD MMM YYYY\" showDateDifference={false} to_date={this.toDate}></ir-date-view>\r\n          </div>\r\n        </div>\r\n        <div class={` mb-1 text-left ${this.isEventHover && 'p-0'}`}>\r\n          <div class=\"mb-1 \">\r\n            <label class=\"p-0 text-bold-700 font-medium-1 m-0 align-middle\">{locales.entries.Lcz_Reason}:</label>\r\n            <div class=\"p-0 m-0 pr-1  controlContainer checkBoxContainer d-inline-block align-middle\">\r\n              <input class=\"form-control\" type=\"checkbox\" checked={this.blockDatesData.OUT_OF_SERVICE} id=\"userinput6\" onChange={event => this.handleOutOfService(event)} />\r\n            </div>\r\n            <span class=\"align-middle out-of-service-label\">{locales.entries.Lcz_OutOfservice}</span>\r\n          </div>\r\n          {!this.blockDatesData.OUT_OF_SERVICE ? (\r\n            <div>\r\n              <div class=\"mb-1 d-flex  align-items-center\">\r\n                <span class=\"align-middle\">{locales.entries.Lcz_Or} </span>\r\n                <div class=\"d-inline-flex col pr-0 align-middle\">\r\n                  <input\r\n                    class=\"form-control\"\r\n                    type=\"text\"\r\n                    placeholder={locales.entries.Lcz_OptionalReason}\r\n                    id=\"optReason\"\r\n                    value={this.blockDatesData.OPTIONAL_REASON}\r\n                    onInput={event => this.handleOptionalReason(event)}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"mb-1 w-100 pr-0 \">\r\n                <span class=\"text-bold-700 font-medium-1\">{locales.entries.Lcz_AutomaticReleaseIn}: </span>\r\n                <div class=\"d-inline-block\">\r\n                  <select class=\"form-control input-sm\" id=\"zSmallSelect\" onChange={evt => this.handleReleaseAfterChange(evt)}>\r\n                    {this.releaseList.map(releaseItem => (\r\n                      <option value={+releaseItem.CODE_NAME} selected={this.blockDatesData.RELEASE_AFTER_HOURS == +releaseItem.CODE_NAME}>\r\n                        {releaseItem.CODE_VALUE_EN}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n                {this.blockDatesData.RELEASE_AFTER_HOURS ? (\r\n                  <div class=\"d-inline-block releaseTime\">\r\n                    <em>\r\n                      {locales.entries.Lcz_On} {this.getReleaseHoursString()}\r\n                    </em>\r\n                  </div>\r\n                ) : null}\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","import { Booking, Room } from '@/models/booking.dto';\r\nimport { TSourceOption } from '@/models/igl-book-property';\r\nimport booking_store, { IRatePlanSelection } from '@/stores/booking.store';\r\nimport { calculateDaysBetweenDates } from '@/utils/booking';\r\nimport { extras } from '@/utils/utils';\r\nimport moment from 'moment';\r\n\r\nexport class IglBookPropertyService {\r\n  public setBookingInfoFromAutoComplete(context, res) {\r\n    context.bookedByInfoData = {\r\n      id: res.guest.id,\r\n      email: res.guest.email,\r\n      firstName: res.guest.first_name,\r\n      lastName: res.guest.last_name,\r\n      countryId: res.guest.country_id,\r\n      isdCode: res.guest.country_id.toString(),\r\n      contactNumber: res.guest.mobile,\r\n      selectedArrivalTime: res.arrival,\r\n      emailGuest: res.guest.subscribe_to_news_letter,\r\n      message: res.remark,\r\n      cardNumber: '',\r\n      cardHolderName: '',\r\n      expiryMonth: '',\r\n      expiryYear: '',\r\n      bookingNumber: res.booking_nbr,\r\n      rooms: res.rooms,\r\n      from_date: res.from_date,\r\n      to_date: res.to_date,\r\n    };\r\n  }\r\n\r\n  public resetRoomsInfoAndMessage(context) {\r\n    context.defaultData.roomsInfo = [];\r\n    context.message = '';\r\n  }\r\n\r\n  public onDataRoomUpdate(event: CustomEvent, selectedUnits: Map<string, Map<string, any>>, isEdit: boolean, isEditBooking: boolean, name: string) {\r\n    let units = selectedUnits;\r\n    const { data, key, changedKey } = event.detail;\r\n    const roomCategoryKey = `c_${data.roomCategoryId}`;\r\n    const ratePlanKey = `p_${data.ratePlanId}`;\r\n\r\n    if (this.shouldClearData(key)) {\r\n      units = new Map();\r\n    }\r\n\r\n    this.initializeRoomCategoryIfNeeded(roomCategoryKey, units);\r\n\r\n    if (isEditBooking) {\r\n      if (changedKey === 'rate') {\r\n        if (units.has(roomCategoryKey) && units.get(roomCategoryKey).has(ratePlanKey)) {\r\n          this.applyBookingEditToSelectedRoom(roomCategoryKey, ratePlanKey, data, units, name, isEdit);\r\n        }\r\n      } else {\r\n        if (changedKey !== 'rateType') {\r\n          if (changedKey === 'adult_child_offering') {\r\n            if (units.has(roomCategoryKey) && selectedUnits.get(roomCategoryKey).has(ratePlanKey)) {\r\n              this.applyBookingEditToSelectedRoom(roomCategoryKey, ratePlanKey, data, units, name, isEdit);\r\n            }\r\n          } else {\r\n            this.applyBookingEditToSelectedRoom(roomCategoryKey, ratePlanKey, data, units, name, isEdit);\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      this.setSelectedRoomData(roomCategoryKey, ratePlanKey, data, units);\r\n    }\r\n    this.cleanupEmptyData(roomCategoryKey, units);\r\n    return units;\r\n  }\r\n\r\n  private shouldClearData(key: string | undefined): boolean {\r\n    return key === 'clearData' || key === 'EDIT_BOOKING';\r\n  }\r\n\r\n  private initializeRoomCategoryIfNeeded(roomCategoryKey: string, selectedUnits: Map<string, Map<string, any>>) {\r\n    if (!selectedUnits.has(roomCategoryKey)) {\r\n      selectedUnits.set(roomCategoryKey, new Map());\r\n    }\r\n  }\r\n  private setSelectedRoomData(roomCategoryKey: string, ratePlanKey: string, data: any, selectedUnits: Map<string, Map<string, any>>) {\r\n    let selectedRatePlans = selectedUnits.get(roomCategoryKey);\r\n    if (data.totalRooms === 0 || data.inventory === 0) {\r\n      selectedRatePlans.delete(ratePlanKey);\r\n    } else {\r\n      selectedUnits.set(roomCategoryKey, selectedRatePlans.set(ratePlanKey, { ...data, selectedUnits: Array(data.totalRooms).fill(-1) }));\r\n    }\r\n  }\r\n\r\n  private cleanupEmptyData(roomCategoryKey: string, selectedUnits: Map<string, Map<string, any>>) {\r\n    if (selectedUnits.has(roomCategoryKey)) {\r\n      let selectedRatePlans = selectedUnits.get(roomCategoryKey);\r\n      if (selectedRatePlans.size === 0) {\r\n        selectedUnits.delete(roomCategoryKey);\r\n      }\r\n    }\r\n  }\r\n  private applyBookingEditToSelectedRoom(roomCategoryKey: string, ratePlanKey: string, data, selectedUnits: Map<string, Map<string, any>>, name: string, isEdit: boolean) {\r\n    selectedUnits.clear();\r\n    let res = {};\r\n    if (isEdit) {\r\n      res = { ...data, guestName: name || '', roomId: '' };\r\n    } else {\r\n      res = { ...data };\r\n    }\r\n    selectedUnits.set(roomCategoryKey, new Map().set(ratePlanKey, res));\r\n  }\r\n\r\n  private generateRoomDays(from_date: Date, to_date: Date, amount: number) {\r\n    const endDate = new Date(to_date);\r\n    endDate.setDate(endDate.getDate() - 1);\r\n\r\n    let currentDate = new Date(from_date);\r\n    const days: {\r\n      date: string;\r\n      amount: number;\r\n      cost: null;\r\n    }[] = [];\r\n\r\n    while (currentDate <= endDate) {\r\n      days.push({\r\n        date: moment(currentDate).format('YYYY-MM-DD'),\r\n        amount: amount,\r\n        cost: null,\r\n      });\r\n      currentDate.setDate(currentDate.getDate() + 1);\r\n    }\r\n\r\n    return days;\r\n  }\r\n\r\n  private extractFirstNameAndLastName(name: string) {\r\n    const names = name.split(' ');\r\n    return { first_name: names[0] || null, last_name: names[1] || null };\r\n  }\r\n\r\n  private getBookedRooms({\r\n    check_in,\r\n    check_out,\r\n    notes,\r\n    identifier,\r\n    override_unit,\r\n    unit,\r\n  }: {\r\n    identifier: string | null;\r\n    check_in: Date;\r\n    check_out: Date;\r\n    override_unit: boolean;\r\n    unit: string;\r\n    notes: string | null;\r\n  }) {\r\n    const rooms = [];\r\n    const total_days = calculateDaysBetweenDates(moment(check_in).format('YYYY-MM-DD'), moment(check_out).format('YYYY-MM-DD'));\r\n    const calculateAmount = ({ is_amount_modified, selected_variation, view_mode, rp_amount }: IRatePlanSelection) => {\r\n      if (is_amount_modified) {\r\n        return view_mode === '002' ? rp_amount : rp_amount / total_days;\r\n      }\r\n      return Number(selected_variation.discounted_gross_amount) / total_days;\r\n    };\r\n    for (const roomTypeId in booking_store.ratePlanSelections) {\r\n      const roomtype = booking_store.ratePlanSelections[roomTypeId];\r\n      for (const rateplanId in roomtype) {\r\n        const rateplan = roomtype[rateplanId];\r\n        if (rateplan.reserved > 0) {\r\n          for (let i = 0; i < rateplan.reserved; i++) {\r\n            const { first_name, last_name } = this.extractFirstNameAndLastName(rateplan.guest[i].name);\r\n            rooms.push({\r\n              identifier,\r\n              roomtype: rateplan.roomtype,\r\n              rateplan: rateplan.ratePlan,\r\n              prepayment_amount_gross: 0,\r\n              unit: override_unit ? { id: unit } : rateplan.guest[i].unit ? { id: rateplan.guest[i].unit } : null,\r\n              occupancy: {\r\n                adult_nbr: rateplan.selected_variation.adult_nbr,\r\n                children_nbr: rateplan.selected_variation.child_nbr,\r\n                infant_nbr: rateplan.guest[i].infant_nbr,\r\n              },\r\n              bed_preference: rateplan.guest[i].bed_preference,\r\n              from_date: moment(check_in).format('YYYY-MM-DD'),\r\n              to_date: moment(check_out).format('YYYY-MM-DD'),\r\n              notes,\r\n              days: this.generateRoomDays(check_in, check_out, calculateAmount(rateplan)),\r\n              guest: {\r\n                email: null,\r\n                first_name,\r\n                last_name,\r\n                country_id: null,\r\n                city: null,\r\n                mobile: null,\r\n                address: null,\r\n                dob: null,\r\n                subscribe_to_news_letter: null,\r\n                cci: null,\r\n              },\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return rooms;\r\n  }\r\n\r\n  async prepareBookUserServiceParams({ context, sourceOption, check_in }: { context: any; sourceOption: TSourceOption; check_in: boolean }) {\r\n    try {\r\n      // Validate context structure\r\n      if (!context || !context.dateRangeData) {\r\n        throw new Error('Invalid context: Missing date range data.');\r\n      }\r\n\r\n      const fromDate = new Date(context.dateRangeData.fromDate);\r\n      const toDate = new Date(context.dateRangeData.toDate);\r\n\r\n      const generateNewRooms = (identifier = null) => {\r\n        return this.getBookedRooms({\r\n          check_in: fromDate,\r\n          check_out: toDate,\r\n          identifier,\r\n          notes: '',\r\n          override_unit: context.isEventType('BAR_BOOKING') ? true : false,\r\n          unit: context.isEventType('BAR_BOOKING') ? context.bookingData.PR_ID : null,\r\n        });\r\n      };\r\n\r\n      const modifyBookingDetails = ({ pickup_info, is_direct, is_in_loyalty_mode, promo_key, extras, ...rest }: Booking, rooms: Room[]) => {\r\n        return {\r\n          assign_units: true,\r\n          check_in: false,\r\n          is_pms: true,\r\n          is_direct,\r\n          is_in_loyalty_mode,\r\n          promo_key,\r\n          extras,\r\n          booking: {\r\n            ...rest,\r\n            rooms,\r\n          },\r\n          pickup_info,\r\n        };\r\n      };\r\n\r\n      let newBooking = null;\r\n\r\n      switch (context.defaultData.event_type) {\r\n        case 'EDIT_BOOKING': {\r\n          const { booking, currentRoomType } = context.defaultData;\r\n\r\n          const filteredRooms = booking.rooms.filter(r => r.identifier !== currentRoomType.identifier);\r\n\r\n          const newRooms = generateNewRooms(currentRoomType.identifier);\r\n          newBooking = modifyBookingDetails(booking, [...filteredRooms, ...newRooms]);\r\n          break;\r\n        }\r\n        case 'ADD_ROOM':\r\n        case 'SPLIT_BOOKING': {\r\n          const { booking } = context.defaultData;\r\n          if (!booking) {\r\n            throw new Error('Missing booking');\r\n          }\r\n          console.log(booking);\r\n          const newRooms = generateNewRooms();\r\n          newBooking = modifyBookingDetails(booking, [...booking?.rooms, ...newRooms]);\r\n          break;\r\n        }\r\n        default: {\r\n          const newRooms = generateNewRooms();\r\n          const { bookedByInfoData } = context;\r\n          newBooking = {\r\n            assign_units: true,\r\n            check_in,\r\n            is_pms: true,\r\n            is_direct: true,\r\n            is_in_loyalty_mode: false,\r\n            promo_key: null,\r\n            extras,\r\n            booking: {\r\n              from_date: moment(fromDate).format('YYYY-MM-DD'),\r\n              to_date: moment(toDate).format('YYYY-MM-DD'),\r\n              remark: '',\r\n              booking_nbr: '',\r\n              property: {\r\n                id: context.propertyid,\r\n              },\r\n              booked_on: {\r\n                date: moment().format('YYYY-MM-DD'),\r\n                hour: new Date().getHours(),\r\n                minute: new Date().getMinutes(),\r\n              },\r\n              source: sourceOption,\r\n              rooms: newRooms,\r\n              currency: context.currency,\r\n              arrival: { code: bookedByInfoData.selectedArrivalTime },\r\n              guest: {\r\n                email: bookedByInfoData.email === '' ? null : bookedByInfoData.email || null,\r\n                first_name: bookedByInfoData.firstName,\r\n                last_name: bookedByInfoData.lastName,\r\n                country_id: bookedByInfoData.countryId === '' ? null : bookedByInfoData.countryId,\r\n                city: null,\r\n                mobile: bookedByInfoData.contactNumber === null ? '' : bookedByInfoData.contactNumber,\r\n                phone_prefix: null,\r\n                address: '',\r\n                dob: null,\r\n                subscribe_to_news_letter: bookedByInfoData.emailGuest || false,\r\n                cci: bookedByInfoData.cardNumber\r\n                  ? {\r\n                      nbr: bookedByInfoData.cardNumber,\r\n                      holder_name: bookedByInfoData.cardHolderName,\r\n                      expiry_month: bookedByInfoData.expiryMonth,\r\n                      expiry_year: bookedByInfoData.expiryYear,\r\n                    }\r\n                  : null,\r\n              },\r\n            },\r\n            pickup_info: null,\r\n          };\r\n          break;\r\n        }\r\n      }\r\n      return newBooking;\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  private getRoomCategoryByRoomId(bookingData) {\r\n    return bookingData.roomsInfo?.find(roomCategory => {\r\n      return roomCategory.id === bookingData.RATE_TYPE;\r\n    });\r\n  }\r\n  public setEditingRoomInfo(bookingData, selectedUnits) {\r\n    const category = this.getRoomCategoryByRoomId(bookingData);\r\n    const room_id = !category ? '' : `c_${category?.id}`;\r\n    const ratePlanId = `p_${bookingData.RATE_PLAN_ID}`;\r\n    const data = {\r\n      adultCount: bookingData.ADULTS_COUNT,\r\n      rate: bookingData.RATE,\r\n      rateType: bookingData.RATE_TYPE,\r\n      ratePlanId: bookingData.RATE_PLAN_ID,\r\n      roomCategoryId: category ? category.id : '',\r\n      roomCategoryName: category ? category.name : '',\r\n      totalRooms: 1,\r\n      ratePlanName: bookingData.RATE_PLAN,\r\n      roomId: bookingData.PR_ID,\r\n      guestName: bookingData.NAME,\r\n      cancelation: bookingData.cancelation,\r\n      guarantee: bookingData.guarantee,\r\n      adult_child_offering: bookingData.adult_child_offering,\r\n    };\r\n    selectedUnits.set(room_id, new Map().set(ratePlanId, data));\r\n  }\r\n}\r\n",":host {\r\n  position: fixed;\r\n  top: 0;\r\n  right: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  z-index: 99;\r\n  /* min-width: 450px; */\r\n}\r\n\r\n.card-title {\r\n  border-bottom: 1px solid #e4e5ec;\r\n  width: 100%;\r\n}\r\n.card-header-container {\r\n  border-bottom: 1px solid #e4e5ec;\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n  padding: 1rem 0;\r\n  justify-content: space-between;\r\n}\r\n.card-header-container h3 {\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\n.scrollContent {\r\n  height: calc(100% - 79px);\r\n  overflow: auto;\r\n  position: relative;\r\n}\r\n\r\n.background-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0, 0, 0, 0.25);\r\n}\r\n\r\n.formContainer {\r\n  height: calc(100% - 79px);\r\n  overflow: auto;\r\n}\r\n.gap-30 {\r\n  gap: 30px;\r\n}\r\n.block-date {\r\n  width: 100%;\r\n}\r\n.sideWindow {\r\n  /* display: grid; */\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  height: 100%;\r\n  background-color: #ffffff;\r\n  width: 100vw;\r\n  overflow-y: auto;\r\n  padding-bottom: 85px !important;\r\n}\r\n.card {\r\n  top: 0;\r\n  z-index: 1000;\r\n}\r\n\r\n.close {\r\n  float: right;\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n  line-height: 1;\r\n  color: #000;\r\n  text-shadow: 0 1px 0 #fff;\r\n  opacity: 0.5;\r\n\r\n  padding: 0;\r\n  background-color: transparent;\r\n  border: 0;\r\n  appearance: none;\r\n}\r\n\r\n.close-icon {\r\n  position: absolute;\r\n  top: 18px;\r\n  right: 33px;\r\n  outline: none;\r\n}\r\n\r\nbutton:not(:disabled),\r\n[type='button']:not(:disabled) {\r\n  cursor: pointer;\r\n}\r\n\r\n/* .row {\r\n  padding: 0 0 0 15px;\r\n  margin: 0;\r\n} */\r\n@media only screen and (min-width: 1200px) {\r\n  .sideWindow {\r\n    max-width: 70%;\r\n  }\r\n}\r\n@media only screen and (min-width: 2000px) {\r\n  .sideWindow {\r\n    max-width: 40%;\r\n  }\r\n}\r\n@media only screen and (min-width: 768px) and (max-width: 1200px) {\r\n  .sideWindow {\r\n    max-width: 90%;\r\n  }\r\n}\r\n@media only screen and (min-width: 600px) and (max-width: 768px) {\r\n  .sideWindow {\r\n    max-width: 75%;\r\n  }\r\n}\r\n@media only screen and (min-width: 641px) {\r\n  .block-date {\r\n    max-width: 450px;\r\n    padding-bottom: 0 !important;\r\n  }\r\n}\r\n","import { Component, Event, EventEmitter, Host, Prop, State, h, Listen, Fragment } from '@stencil/core';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport { dateToFormattedString, getReleaseHoursString } from '@/utils/utils';\r\nimport { IEntries, RoomBlockDetails } from '@/models/IBooking';\r\nimport { IPageTwoDataUpdateProps } from '@/models/models';\r\nimport { transformNewBLockedRooms } from '@/utils/booking';\r\nimport { IglBookPropertyService } from './igl-book-property.service';\r\nimport { IglBookPropertyPayloadEditBooking, TAdultChildConstraints, TEventType, TPropertyButtonsTypes, TSourceOption, TSourceOptions } from '@/models/igl-book-property';\r\nimport { EventsService } from '@/services/events.service';\r\nimport locales from '@/stores/locales.store';\r\nimport { IToast } from '@/components/ir-toast/toast';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\nimport { ICurrency } from '@/models/calendarData';\r\nimport booking_store, { calculateTotalRooms, modifyBookingStore, reserveRooms, resetBookingStore } from '@/stores/booking.store';\r\nimport moment from 'moment';\r\nexport type IHistoryEntry = {\r\n  dates: { checkIn: Date; checkOut: Date };\r\n  adults: number;\r\n  children: number;\r\n};\r\n@Component({\r\n  tag: 'igl-book-property',\r\n  styleUrls: ['igl-book-property.css'],\r\n  scoped: true,\r\n})\r\nexport class IglBookProperty {\r\n  @Prop() propertyid: number;\r\n  @Prop() allowedBookingSources: any;\r\n  @Prop() language: string;\r\n  @Prop() countryNodeList;\r\n  @Prop() showPaymentDetails: boolean = false;\r\n  @Prop() currency: ICurrency;\r\n  @Prop({ reflect: true, mutable: true }) bookingData: { [key: string]: any };\r\n  @Prop() adultChildConstraints: TAdultChildConstraints;\r\n\r\n  @State() adultChildCount: { adult: number; child: number } = { adult: 0, child: 0 };\r\n  @State() renderAgain: boolean = false;\r\n  @State() dateRangeData: { [key: string]: any };\r\n  @State() defaultData: any;\r\n  @State() isLoading: string;\r\n  @State() bookingHistory: Array<{\r\n    dates: { checkIn: Date; checkOut: Date };\r\n    adults: number;\r\n    children: number;\r\n  }> = [];\r\n\r\n  @Event() closeBookingWindow: EventEmitter<{ [key: string]: any }>;\r\n  @Event() blockedCreated: EventEmitter<RoomBlockDetails>;\r\n  @Event() resetBookingData: EventEmitter<null>;\r\n  @Event({ bubbles: true, composed: true }) animateIrButton: EventEmitter<string>;\r\n  @Event({ bubbles: true, composed: true }) animateIrSelect: EventEmitter<string>;\r\n  @Event({ bubbles: true, composed: true }) toast: EventEmitter<IToast>;\r\n\r\n  private initialRoomIds: { roomName: string; ratePlanId: number; roomId: string; roomTypeId: string } | null = null;\r\n  private sourceOption: TSourceOption;\r\n  private page: string;\r\n  private showSplitBookingOption: boolean = false;\r\n  private sourceOptions: TSourceOptions[] = [];\r\n  private guestData: { [key: string]: any }[] = [];\r\n  private bookedByInfoData: { [key: string]: any } = {};\r\n  private blockDatesData: { [key: string]: any } = {};\r\n  private ratePricingMode: IEntries[] = [];\r\n  private selectedUnits: Map<string, Map<string, any>> = new Map();\r\n  private bedPreferenceType: IEntries[] = [];\r\n  private bookingService: BookingService = new BookingService();\r\n  private bookPropertyService = new IglBookPropertyService();\r\n  private eventsService = new EventsService();\r\n  private defaultDateRange: { from_date: string; to_date: string };\r\n  private updatedBooking: boolean = false;\r\n  private MAX_HISTORY_LENGTH: number = 2;\r\n\r\n  async componentWillLoad() {\r\n    this.handleKeyDown = this.handleKeyDown.bind(this);\r\n    this.initializeDefaultDateRange();\r\n\r\n    if (!this.bookingData.defaultDateRange) {\r\n      return;\r\n    }\r\n\r\n    this.initializeDefaultData();\r\n    modifyBookingStore('event_type', { type: this.defaultData.event_type });\r\n    await this.fetchSetupEntriesAndInitialize();\r\n    this.initializeEventData();\r\n  }\r\n\r\n  componentDidLoad() {\r\n    document.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    document.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  @Listen('inputCleared')\r\n  clearBooking(e: CustomEvent) {\r\n    if (this.isEventType('SPLIT_BOOKING')) {\r\n      e.stopImmediatePropagation();\r\n      e.stopPropagation();\r\n      this.bookedByInfoData = {};\r\n      this.bookPropertyService.resetRoomsInfoAndMessage(this);\r\n      this.renderPage();\r\n    }\r\n  }\r\n\r\n  @Listen('spiltBookingSelected')\r\n  async handleSpiltBookingSelected(e: CustomEvent<{ key: string; data: unknown }>) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    const { key, data } = e.detail;\r\n    if (key === 'select' || (key === 'blur' && data !== '')) {\r\n      const res = await this.bookingService.getExposedBooking((data as any).booking_nbr || (data as string), this.language);\r\n      this.defaultData = { ...this.defaultData, booking: res };\r\n      this.bookPropertyService.setBookingInfoFromAutoComplete(this, res);\r\n      this.sourceOption = res.source;\r\n      this.renderPage();\r\n    }\r\n  }\r\n\r\n  // @Listen('adultChild')\r\n  // handleAdultChildChange(event: CustomEvent) {\r\n  //   if (this.isEventType('ADD_ROOM') || this.isEventType('SPLIT_BOOKING')) {\r\n  //     this.bookPropertyService.resetRoomsInfoAndMessage(this);\r\n  //   }\r\n  //   const { adult, child } = event.detail;\r\n  //   this.adultChildCount = { ...event.detail };\r\n  //   this.updateBookingHistory({ adults: adult, children: child });\r\n  // }\r\n  @Listen('adultChild')\r\n  handleAdultChildChange(event: CustomEvent) {\r\n    if (this.isEventType('ADD_ROOM') || this.isEventType('SPLIT_BOOKING')) {\r\n      this.bookPropertyService.resetRoomsInfoAndMessage(this);\r\n    }\r\n    const { adult, child } = event.detail;\r\n    this.adultChildCount = { ...event.detail };\r\n\r\n    // Update the booking history\r\n    this.updateBookingHistory({ adults: Number(adult), children: Number(child) });\r\n  }\r\n\r\n  @Listen('dateSelectEvent')\r\n  onDateRangeSelect(event: CustomEvent<{ [key: string]: any }>) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    const opt: { [key: string]: any } = event.detail;\r\n    this.updateBookingHistory({\r\n      dates: {\r\n        checkIn: new Date(this.dateRangeData.fromDate),\r\n        checkOut: new Date(new Date(opt.data.toDate)),\r\n      },\r\n    });\r\n    console.log('date changed', opt);\r\n    if (opt.key === 'selectedDateRange') {\r\n      this.dateRangeData = opt.data;\r\n      if (this.isEventType('ADD_ROOM') || this.isEventType('SPLIT_BOOKING')) {\r\n        this.defaultData.roomsInfo = [];\r\n      } else if (this.adultChildCount.adult !== 0) {\r\n        this.checkBookingAvailability();\r\n        // this.checkBookingAvailability(dateToFormattedString(new Date(this.dateRangeData.fromDate)), dateToFormattedString(new Date(this.dateRangeData.toDate)));\r\n      }\r\n    }\r\n  }\r\n  @Listen('sourceDropDownChange')\r\n  handleSourceDropDown(event: CustomEvent) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    const value = event.detail;\r\n    const selectedSource = this.sourceOptions.find(opt => opt.id === value.toString());\r\n    this.sourceOption = {\r\n      code: value,\r\n      description: selectedSource.value || '',\r\n      tag: selectedSource.tag,\r\n      id: selectedSource.id,\r\n      type: selectedSource.type,\r\n    };\r\n  }\r\n\r\n  @Listen('gotoSplitPageTwoEvent', { target: 'window' })\r\n  gotoSplitPageTwo() {\r\n    this.gotoPage('page_two');\r\n  }\r\n\r\n  @Listen('buttonClicked')\r\n  handleButtonClicked(event: CustomEvent<{ key: TPropertyButtonsTypes; data?: CustomEvent }>) {\r\n    switch (event.detail.key) {\r\n      case 'save':\r\n        this.bookUser(false);\r\n        break;\r\n      case 'cancel':\r\n        event.stopImmediatePropagation();\r\n        event.stopPropagation();\r\n        this.closeWindow();\r\n        break;\r\n      case 'back':\r\n        event.stopImmediatePropagation();\r\n        event.stopPropagation();\r\n        this.gotoPage('page_one');\r\n        break;\r\n      case 'book':\r\n        this.bookUser(false);\r\n        break;\r\n      case 'bookAndCheckIn':\r\n        this.bookUser(true);\r\n        break;\r\n      case 'next':\r\n        event.stopImmediatePropagation();\r\n        event.stopPropagation();\r\n        if (!this.adultChildCount?.adult) {\r\n          this.animateIrSelect.emit('adult_child_select');\r\n          break;\r\n        }\r\n        if (calculateTotalRooms() > 0) {\r\n          this.gotoPage('page_two');\r\n          break;\r\n        } else if (this.defaultData?.roomsInfo.length === 0) {\r\n          this.animateIrButton.emit('check_availability');\r\n          break;\r\n        }\r\n        this.toast.emit({\r\n          type: 'error',\r\n          description: locales.entries.Lcz_SelectRatePlan,\r\n          title: locales.entries.Lcz_SelectRatePlan,\r\n        });\r\n        break;\r\n      case 'check':\r\n        this.checkBookingAvailability();\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  private updateBookingHistory(partialData: Partial<IHistoryEntry>) {\r\n    const lastEntry = this.bookingHistory[this.bookingHistory.length - 1];\r\n\r\n    const newEntry: IHistoryEntry = {\r\n      dates: {\r\n        checkIn: partialData.dates?.checkIn || lastEntry?.dates?.checkIn || new Date(this.dateRangeData.fromDate),\r\n        checkOut: partialData.dates?.checkOut || lastEntry?.dates?.checkOut || new Date(this.dateRangeData.toDate),\r\n      },\r\n      adults: partialData.adults ?? lastEntry?.adults ?? this.adultChildCount.adult,\r\n      children: partialData.children ?? lastEntry?.children ?? this.adultChildCount.child,\r\n    };\r\n\r\n    // Update the booking history\r\n    this.bookingHistory.push(newEntry);\r\n    if (this.bookingHistory.length > this.MAX_HISTORY_LENGTH) {\r\n      this.bookingHistory.shift();\r\n    }\r\n  }\r\n\r\n  private handleKeyDown(e: KeyboardEvent) {\r\n    if (e.key === 'Escape') {\r\n      this.closeWindow();\r\n    }\r\n  }\r\n\r\n  private initializeDefaultDateRange() {\r\n    this.defaultDateRange = {\r\n      from_date: this.bookingData.FROM_DATE,\r\n      to_date: this.bookingData.TO_DATE,\r\n    };\r\n  }\r\n\r\n  private initializeDefaultData() {\r\n    this.defaultData = this.bookingData;\r\n    this.dateRangeData = { ...this.defaultData.defaultDateRange };\r\n  }\r\n\r\n  private async fetchSetupEntriesAndInitialize() {\r\n    try {\r\n      const setupEntries = await this.fetchSetupEntries();\r\n      this.setSourceOptions(this.allowedBookingSources);\r\n      this.setOtherProperties(setupEntries);\r\n    } catch (error) {\r\n      console.error('Error fetching setup entries:', error);\r\n    }\r\n  }\r\n\r\n  private initializeEventData() {\r\n    if (this.isEventType('EDIT_BOOKING')) {\r\n      this.initializeEditBookingData();\r\n    }\r\n\r\n    if (!this.isEventType('BAR_BOOKING')) {\r\n      this.bookPropertyService.resetRoomsInfoAndMessage(this);\r\n    }\r\n\r\n    this.initializePage();\r\n  }\r\n\r\n  private initializeEditBookingData() {\r\n    this.adultChildCount = {\r\n      adult: this.defaultData.ADULTS_COUNT,\r\n      child: this.defaultData.CHILDREN_COUNT,\r\n    };\r\n\r\n    this.initialRoomIds = {\r\n      roomName: this.defaultData.roomName,\r\n      ratePlanId: this.defaultData.RATE_PLAN_ID,\r\n      roomId: this.defaultData.PR_ID,\r\n      roomTypeId: this.defaultData.RATE_TYPE,\r\n    };\r\n    const { currentRoomType } = this.defaultData as IglBookPropertyPayloadEditBooking;\r\n\r\n    modifyBookingStore('guest', {\r\n      bed_preference: currentRoomType.bed_preference?.toString(),\r\n      infant_nbr: currentRoomType.occupancy.infant_nbr,\r\n      name: currentRoomType.guest.last_name ? currentRoomType.guest.first_name + ' ' + currentRoomType.guest.last_name : currentRoomType.guest.first_name,\r\n      unit: (currentRoomType.unit as any)?.id?.toString(),\r\n    });\r\n    this.checkBookingAvailability();\r\n    this.bookPropertyService.setEditingRoomInfo(this.defaultData, this.selectedUnits);\r\n  }\r\n\r\n  private initializePage() {\r\n    switch (this.defaultData.event_type) {\r\n      case 'SPLIT_BOOKING':\r\n        this.showSplitBookingOption = true;\r\n        this.page = 'page_one';\r\n        break;\r\n      case 'BLOCK_DATES':\r\n        this.page = 'page_block_date';\r\n        break;\r\n      default:\r\n        this.page = 'page_one';\r\n        break;\r\n    }\r\n  }\r\n\r\n  async fetchSetupEntries() {\r\n    return await this.bookingService.fetchSetupEntries();\r\n  }\r\n\r\n  private isGuestDataIncomplete() {\r\n    for (const roomtypeId in booking_store.ratePlanSelections) {\r\n      const roomtype = booking_store.ratePlanSelections[roomtypeId];\r\n      for (const rateplanId in roomtype) {\r\n        const rateplan = roomtype[rateplanId];\r\n        if (rateplan.reserved > 0) {\r\n          for (const guest of rateplan.guest) {\r\n            if (guest.name === '') {\r\n              return true;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private isButtonDisabled() {\r\n    const isValidProperty = (property, key, comparedBy) => {\r\n      if (!property) {\r\n        return true;\r\n      }\r\n      if (property === this.guestData) {\r\n        return this.isGuestDataIncomplete();\r\n      }\r\n      if (key === 'selectedArrivalTime') {\r\n        if (property[key] !== undefined) {\r\n          return property[key].code === '';\r\n        } else {\r\n          return true;\r\n        }\r\n      }\r\n      return property[key] === comparedBy || property[key] === undefined;\r\n    };\r\n    return (\r\n      isValidProperty(this.guestData, 'guestName', '') ||\r\n      isValidProperty(this.bookedByInfoData, 'firstName', '') ||\r\n      isValidProperty(this.bookedByInfoData, 'lastName', '') ||\r\n      isValidProperty(this.bookedByInfoData, 'selectedArrivalTime', '')\r\n    );\r\n  }\r\n\r\n  private setSourceOptions(bookingSource: any[]) {\r\n    this.sourceOptions = bookingSource.map(source => ({\r\n      id: source.id,\r\n      value: source.description,\r\n      tag: source.tag,\r\n      type: source.type,\r\n    }));\r\n    if (this.isEventType('EDIT_BOOKING')) {\r\n      this.sourceOption = { ...this.defaultData.SOURCE };\r\n    } else {\r\n      this.sourceOption = {\r\n        code: bookingSource[0].code,\r\n        description: bookingSource[0].description,\r\n        tag: bookingSource[0].tag,\r\n        type: bookingSource[0].type,\r\n        id: bookingSource[0].id,\r\n      };\r\n    }\r\n  }\r\n\r\n  private setOtherProperties(res: any) {\r\n    this.ratePricingMode = res?.ratePricingMode;\r\n    this.bookedByInfoData.arrivalTime = res.arrivalTime;\r\n    this.bedPreferenceType = res.bedPreferenceType;\r\n  }\r\n\r\n  private async checkBookingAvailability() {\r\n    const from_date = moment(this.dateRangeData.fromDate).format('YYYY-MM-DD');\r\n    const to_date = moment(this.dateRangeData.toDate).format('YYYY-MM-DD');\r\n    const is_in_agent_mode = this.sourceOption['type'] === 'TRAVEL_AGENCY';\r\n    try {\r\n      const room_type_ids_to_update = this.isEventType('EDIT_BOOKING') ? [this.defaultData.RATE_TYPE] : [];\r\n      const room_type_ids = this.isEventType('BAR_BOOKING') ? this.defaultData.roomsInfo.map(room => room.id) : [];\r\n      const data = await this.bookingService.getBookingAvailability({\r\n        from_date,\r\n        to_date,\r\n        propertyid: this.propertyid,\r\n        adultChildCount: this.adultChildCount,\r\n        language: this.language,\r\n        room_type_ids,\r\n        currency: this.currency,\r\n        agent_id: is_in_agent_mode ? this.sourceOption['tag'] : null,\r\n        is_in_agent_mode,\r\n        room_type_ids_to_update,\r\n      });\r\n      if (!this.isEventType('EDIT_BOOKING')) {\r\n        this.defaultData.defaultDateRange.fromDate = new Date(this.dateRangeData.fromDate);\r\n        this.defaultData.defaultDateRange.toDate = new Date(this.dateRangeData.toDate);\r\n      }\r\n      this.defaultData = { ...this.defaultData, roomsInfo: data };\r\n      if (this.isEventType('EDIT_BOOKING') && !this.updatedBooking) {\r\n        this.updateBooking();\r\n      }\r\n    } catch (error) {\r\n      console.error('Error initializing booking availability:', error);\r\n    }\r\n  }\r\n\r\n  private updateBooking() {\r\n    try {\r\n      const { currentRoomType } = this.defaultData as IglBookPropertyPayloadEditBooking;\r\n      const roomtypeId = currentRoomType.roomtype.id;\r\n      const rateplanId = currentRoomType.rateplan.id;\r\n      reserveRooms({\r\n        roomTypeId: roomtypeId,\r\n        ratePlanId: rateplanId,\r\n        rooms: 1,\r\n        guest: [\r\n          {\r\n            bed_preference: currentRoomType.bed_preference?.toString(),\r\n            infant_nbr: currentRoomType.occupancy.infant_nbr,\r\n            name: currentRoomType.guest.last_name ? currentRoomType.guest.first_name + ' ' + currentRoomType.guest.last_name : currentRoomType.guest.first_name,\r\n            unit: (currentRoomType.unit as any)?.id?.toString(),\r\n          },\r\n        ],\r\n      });\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  private closeWindow() {\r\n    resetBookingStore();\r\n    this.closeBookingWindow.emit();\r\n    document.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  private isEventType(key: TEventType) {\r\n    return this.defaultData.event_type === key;\r\n  }\r\n\r\n  private handleBlockDateUpdate(event: CustomEvent<{ [key: string]: any }>) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    const opt: { [key: string]: any } = event.detail;\r\n    this.blockDatesData = opt.data;\r\n  }\r\n\r\n  private handleGuestInfoUpdate(event: CustomEvent<{ [key: string]: any }>) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    const opt = event.detail;\r\n    if (opt.guestRefKey) {\r\n      if (this.isEventType('BAR_BOOKING') || this.isEventType('SPLIT_BOOKING')) {\r\n        this.guestData[opt.guestRefKey] = {\r\n          ...opt.data,\r\n          roomId: this.defaultData.PR_ID,\r\n        };\r\n      } else this.guestData[opt.guestRefKey] = opt.data;\r\n    }\r\n  }\r\n\r\n  private handleBookedByInfoUpdate(event: CustomEvent<{ [key: string]: any }>) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    const opt: { [key: string]: any } = event.detail;\r\n    this.bookedByInfoData = opt.value.data;\r\n  }\r\n\r\n  private renderPage() {\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n\r\n  private gotoPage(gotoPage: string) {\r\n    this.page = gotoPage;\r\n    this.renderPage();\r\n  }\r\n\r\n  private getPageBlockDatesView() {\r\n    return (\r\n      <Fragment>\r\n        <igl-block-dates-view\r\n          fromDate={this.dateRangeData.fromDateStr}\r\n          toDate={this.dateRangeData.toDateStr}\r\n          entryDate={this.defaultData.ENTRY_DATE}\r\n          onDataUpdateEvent={event => this.handleBlockDateUpdate(event)}\r\n        ></igl-block-dates-view>\r\n        <div class=\"p-0 mb-1 mt-2 gap-30 d-flex align-items-center justify-content-between\">\r\n          <ir-button text={locales.entries.Lcz_Cancel} btn_color=\"secondary\" class=\"flex-fill\" onClick={() => this.closeWindow()}></ir-button>\r\n          <ir-button text={locales.entries.Lcz_Blockdates} isLoading={isRequestPending('/Block_Exposed_Unit')} class=\"flex-fill\" onClick={() => this.handleBlockDate()}></ir-button>\r\n        </div>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  private handlePageTwoDataUpdateEvent(event: CustomEvent<IPageTwoDataUpdateProps>) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    if (event.detail.key === 'propertyBookedBy') {\r\n      this.handleBookedByInfoUpdate(event);\r\n    } else {\r\n      this.handleGuestInfoUpdate(event);\r\n    }\r\n  }\r\n\r\n  private async handleBlockDate() {\r\n    const releaseData = getReleaseHoursString(+this.blockDatesData.RELEASE_AFTER_HOURS);\r\n    const result = await this.bookingService.blockUnit({\r\n      from_date: dateToFormattedString(this.defaultData.defaultDateRange.fromDate),\r\n      to_date: dateToFormattedString(this.defaultData.defaultDateRange.toDate),\r\n      NOTES: this.blockDatesData.OPTIONAL_REASON || '',\r\n      pr_id: this.defaultData.PR_ID.toString(),\r\n      STAY_STATUS_CODE: this.blockDatesData.OUT_OF_SERVICE ? '004' : this.blockDatesData.RELEASE_AFTER_HOURS === 0 ? '002' : '003',\r\n      DESCRIPTION: this.blockDatesData.RELEASE_AFTER_HOURS || '',\r\n      ...releaseData,\r\n    });\r\n    const blockedUnit = await transformNewBLockedRooms(result);\r\n    this.blockedCreated.emit(blockedUnit);\r\n    this.closeWindow();\r\n  }\r\n\r\n  private async bookUser(check_in: boolean) {\r\n    this.setLoadingState(check_in);\r\n\r\n    if (this.isEventType('EDIT_BOOKING') || this.isEventType('ADD_ROOM')) {\r\n      if (this.isGuestDataIncomplete()) {\r\n        this.isLoading = '';\r\n        return;\r\n      }\r\n    } else if (this.isButtonDisabled()) {\r\n      this.isLoading = '';\r\n      return;\r\n    }\r\n\r\n    try {\r\n      if (['003', '002', '004'].includes(this.defaultData.STATUS_CODE)) {\r\n        this.eventsService.deleteEvent(this.defaultData.POOL);\r\n      }\r\n      if (this.isEventType('EDIT_BOOKING') || this.isEventType('ADD_ROOM')) {\r\n        this.bookedByInfoData.message = this.defaultData.NOTES;\r\n      }\r\n      const serviceParams = await this.bookPropertyService.prepareBookUserServiceParams({\r\n        context: this,\r\n        sourceOption: this.sourceOption,\r\n        check_in: this.isEventType('BAR_BOOKING'),\r\n      });\r\n      // console.log(serviceParams);\r\n      await this.bookingService.doReservation(serviceParams);\r\n      this.resetBookingData.emit(null);\r\n    } catch (error) {\r\n      console.error('Error booking user:', error);\r\n    } finally {\r\n      this.resetLoadingState();\r\n    }\r\n  }\r\n\r\n  private setLoadingState(assign_units: boolean) {\r\n    if (this.isEventType('EDIT_BOOKING') || this.isEventType('ADD_ROOM')) {\r\n      this.isLoading = 'save';\r\n    } else {\r\n      this.isLoading = assign_units ? 'bookAndCheckIn' : 'book';\r\n    }\r\n  }\r\n\r\n  private resetLoadingState() {\r\n    this.isLoading = '';\r\n    setTimeout(() => {\r\n      this.closeWindow();\r\n    }, 100);\r\n  }\r\n\r\n  private getCurrentPage(name: string) {\r\n    return this.page === name;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"background-overlay\" onClick={() => this.closeWindow()}></div>\r\n        <div class={'sideWindow pb-5 pb-md-0 ' + (this.getCurrentPage('page_block_date') ? 'block-date' : '')}>\r\n          <div class=\"card position-sticky mb-0 shadow-none p-0 \">\r\n            <div class=\"card-header-container mb-2\">\r\n              <h3 class=\" text-left font-medium-2 px-2 px-md-3\">{this.getCurrentPage('page_block_date') ? this.defaultData.BLOCK_DATES_TITLE : this.defaultData.TITLE}</h3>\r\n              <ir-icon\r\n                class={'px-2'}\r\n                onIconClickHandler={() => {\r\n                  this.closeWindow();\r\n                }}\r\n              >\r\n                <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 384 512\" height={20} width={20}>\r\n                  <path\r\n                    fill=\"currentColor\"\r\n                    d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\"\r\n                  />\r\n                </svg>\r\n              </ir-icon>\r\n            </div>\r\n          </div>\r\n          <div class=\"px-2 px-md-3\">\r\n            {this.getCurrentPage('page_one') && (\r\n              <igl-booking-overview-page\r\n                initialRoomIds={this.initialRoomIds}\r\n                defaultDaterange={this.defaultDateRange}\r\n                class={'p-0 mb-1'}\r\n                eventType={this.defaultData.event_type}\r\n                selectedRooms={this.selectedUnits}\r\n                currency={this.currency}\r\n                showSplitBookingOption={this.showSplitBookingOption}\r\n                ratePricingMode={this.ratePricingMode}\r\n                dateRangeData={this.dateRangeData}\r\n                bookingData={this.defaultData}\r\n                adultChildCount={this.adultChildCount}\r\n                bookedByInfoData={this.bookedByInfoData}\r\n                adultChildConstraints={this.adultChildConstraints}\r\n                sourceOptions={this.sourceOptions}\r\n                propertyId={this.propertyid}\r\n              ></igl-booking-overview-page>\r\n            )}\r\n\r\n            {this.getCurrentPage('page_two') && (\r\n              <igl-booking-form\r\n                currency={this.currency}\r\n                propertyId={this.propertyid}\r\n                showPaymentDetails={this.showPaymentDetails}\r\n                selectedGuestData={this.guestData}\r\n                countryNodeList={this.countryNodeList}\r\n                isLoading={this.isLoading}\r\n                selectedRooms={this.selectedUnits}\r\n                bedPreferenceType={this.bedPreferenceType}\r\n                dateRangeData={this.dateRangeData}\r\n                bookingData={this.defaultData}\r\n                showSplitBookingOption={this.showSplitBookingOption}\r\n                language={this.language}\r\n                bookedByInfoData={this.bookedByInfoData}\r\n                defaultGuestData={this.defaultData}\r\n                isEditOrAddRoomEvent={this.isEventType('EDIT_BOOKING') || this.isEventType('ADD_ROOM')}\r\n                onDataUpdateEvent={event => this.handlePageTwoDataUpdateEvent(event)}\r\n              ></igl-booking-form>\r\n            )}\r\n            {this.getCurrentPage('page_block_date') ? this.getPageBlockDatesView() : null}\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  margin: 0;\r\n  padding: 0;\r\n  letter-spacing: 0px !important;\r\n  font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;\r\n  font-size: 1rem !important;\r\n  font-weight: 400 !important;\r\n  line-height: 1.45 !important;\r\n  color: #6b6f82 !important;\r\n  text-align: left !important;\r\n}\r\n.book-container {\r\n  width: min-content;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\nh3 {\r\n  font-size: 1rem;\r\n}\r\n","import { IglBookPropertyPayloadPlusBooking } from '@/models/igl-book-property';\r\nimport Token from '@/models/Token';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport { RoomService } from '@/services/room.service';\r\nimport locales from '@/stores/locales.store';\r\nimport { Component, Host, State, h, Prop, Watch, Event, EventEmitter, Fragment } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'igl-book-property-container',\r\n  styleUrl: 'igl-book-property-container.css',\r\n  scoped: true,\r\n})\r\nexport class IglBookPropertyContainer {\r\n  @Prop() language: string = '';\r\n  @Prop() ticket: string = '';\r\n  @Prop() p: string;\r\n  @Prop() propertyid: number;\r\n  @Prop() from_date: string;\r\n  @Prop() to_date: string;\r\n  @Prop() withIrToastAndInterceptor: boolean = true;\r\n\r\n  @State() bookingItem: IglBookPropertyPayloadPlusBooking | null;\r\n  @State() showPaymentDetails: any;\r\n  @State() countryNodeList: any;\r\n  @State() calendarData: any = {};\r\n\r\n  @Event() resetBookingData: EventEmitter<null>;\r\n\r\n  private bookingService = new BookingService();\r\n  private roomService = new RoomService();\r\n  private token = new Token();\r\n\r\n  setRoomsData(roomServiceResp) {\r\n    let roomsData: { [key: string]: any }[] = new Array();\r\n    if (roomServiceResp.My_Result?.roomtypes?.length) {\r\n      roomsData = roomServiceResp.My_Result.roomtypes;\r\n      roomServiceResp.My_Result.roomtypes.forEach(roomCategory => {\r\n        roomCategory.expanded = true;\r\n      });\r\n    }\r\n    this.calendarData.roomsInfo = roomsData;\r\n  }\r\n  async initializeApp() {\r\n    try {\r\n      if (!this.propertyid && !this.p) {\r\n        throw new Error('Property ID or username is required');\r\n      }\r\n      const [roomResponse, languageTexts, countriesList] = await Promise.all([\r\n        this.roomService.getExposedProperty({ id: this.propertyid, language: this.language, aname: this.p }),\r\n        this.roomService.fetchLanguage(this.language),\r\n        this.bookingService.getCountries(this.language),\r\n      ]);\r\n      if (!locales.entries) {\r\n        locales.entries = languageTexts.entries;\r\n        locales.direction = languageTexts.direction;\r\n      }\r\n      this.countryNodeList = countriesList;\r\n\r\n      const { allowed_payment_methods: paymentMethods, currency, allowed_booking_sources, adult_child_constraints, calendar_legends } = roomResponse['My_Result'];\r\n      this.calendarData = { currency, allowed_booking_sources, adult_child_constraints, legendData: calendar_legends };\r\n      this.setRoomsData(roomResponse);\r\n      const paymentCodesToShow = ['001', '004'];\r\n      this.showPaymentDetails = paymentMethods.some(method => paymentCodesToShow.includes(method.code));\r\n    } catch (error) {\r\n      console.error('Error initializing app:', error);\r\n    }\r\n  }\r\n  componentWillLoad() {\r\n    if (this.ticket !== '') {\r\n      this.token.setToken(this.ticket);\r\n      this.initializeApp();\r\n    }\r\n  }\r\n  @Watch('ticket')\r\n  ticketChanged(newValue: string, oldValue: string) {\r\n    if (newValue === oldValue) {\r\n      return;\r\n    }\r\n    this.token.setToken(this.ticket);\r\n    this.initializeApp();\r\n  }\r\n  handleCloseBookingWindow() {\r\n    this.bookingItem = null;\r\n  }\r\n  handleTriggerClicked() {\r\n    const tomorrow = new Date();\r\n    tomorrow.setDate(tomorrow.getDate() + 1);\r\n    (this.bookingItem as IglBookPropertyPayloadPlusBooking) = {\r\n      FROM_DATE: this.from_date,\r\n      defaultDateRange: {\r\n        fromDate: new Date(),\r\n        fromDateStr: '',\r\n        toDate: tomorrow,\r\n        toDateStr: '',\r\n        dateDifference: 0,\r\n        message: '',\r\n      },\r\n      TO_DATE: this.to_date,\r\n      EMAIL: '',\r\n      event_type: 'PLUS_BOOKING',\r\n      ID: '',\r\n      NAME: '',\r\n      PHONE: '',\r\n      REFERENCE_TYPE: '',\r\n      TITLE: locales.entries.Lcz_NewBooking,\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        {this.withIrToastAndInterceptor && (\r\n          <Fragment>\r\n            <ir-toast></ir-toast>\r\n            <ir-interceptor></ir-interceptor>\r\n          </Fragment>\r\n        )}\r\n\r\n        <div class=\"book-container\" onClick={this.handleTriggerClicked.bind(this)}>\r\n          <slot name=\"trigger\"></slot>\r\n        </div>\r\n        {this.bookingItem && (\r\n          <igl-book-property\r\n            allowedBookingSources={this.calendarData.allowed_booking_sources}\r\n            adultChildConstraints={this.calendarData.adult_child_constraints}\r\n            showPaymentDetails={this.showPaymentDetails}\r\n            countryNodeList={this.countryNodeList}\r\n            currency={this.calendarData.currency}\r\n            language={this.language}\r\n            propertyid={this.propertyid}\r\n            bookingData={this.bookingItem}\r\n            onResetBookingData={(e: CustomEvent) => {\r\n              e.stopImmediatePropagation();\r\n              e.stopPropagation();\r\n              this.resetBookingData.emit(null);\r\n            }}\r\n            onCloseBookingWindow={() => this.handleCloseBookingWindow()}\r\n          ></igl-book-property>\r\n        )}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n:host > * {\r\n  margin: auto;\r\n  padding: auto;\r\n}\r\n\r\n.gap-30 {\r\n  gap: 30px;\r\n}\r\n","import { Component, Event, EventEmitter, Fragment, Host, Prop, h } from '@stencil/core';\r\nimport { FooterButtonType, TPropertyButtonsTypes } from '../../../../models/igl-book-property';\r\nimport locales from '@/stores/locales.store';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\nimport { TIcons } from '@/components/ui/ir-icons/icons';\r\n\r\n@Component({\r\n  tag: 'igl-book-property-footer',\r\n  styleUrl: 'igl-book-property-footer.css',\r\n  scoped: true,\r\n})\r\nexport class IglBookPropertyFooter {\r\n  @Prop() eventType: string;\r\n  @Prop() disabled: boolean = true;\r\n  @Event() buttonClicked: EventEmitter<{ key: TPropertyButtonsTypes }>;\r\n  private isEventType(event: string) {\r\n    return event === this.eventType;\r\n  }\r\n  editNext(label) {\r\n    if (this.isEventType('EDIT_BOOKING')) {\r\n      if (label === 'Cancel') {\r\n        return 'flex-fill';\r\n      } else {\r\n        return 'd-none d-md-block  flex-fill';\r\n      }\r\n    }\r\n    return 'flex-fill';\r\n  }\r\n\r\n  private renderButton(type: FooterButtonType, label: string, disabled = false, icon_name?: TIcons) {\r\n    return (\r\n      <div class={this.shouldRenderTwoButtons() ? ` ${this.editNext(label)}` : 'flex-fill'}>\r\n        {/* <button class={`btn btn-${type === 'cancel' ? 'secondary' : 'primary'} full-width`} onClick={() => this.buttonClicked.emit({ key: type })} disabled={disabled}>\r\n          {label}\r\n        </button> */}\r\n        <ir-button\r\n          btn_color={type === 'cancel' ? 'secondary' : 'primary'}\r\n          text={label}\r\n          btn_disabled={disabled}\r\n          onClickHanlder={() => {\r\n            this.buttonClicked.emit({ key: type });\r\n          }}\r\n          icon_name={icon_name}\r\n          iconPostion=\"right\"\r\n          style={{ '--icon-size': '1rem' }}\r\n          icon_style={{ paddingBottom: '1.9px' }}\r\n        ></ir-button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private shouldRenderTwoButtons() {\r\n    return this.isEventType('PLUS_BOOKING') || this.isEventType('ADD_ROOM') || this.isEventType('EDIT_BOOKING');\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"d-flex justify-content-between gap-30 align-items-center\">\r\n          {this.isEventType('EDIT_BOOKING') ? (\r\n            <Fragment>\r\n              {this.renderButton('cancel', locales.entries.Lcz_Cancel)}\r\n              {this.shouldRenderTwoButtons() && this.renderButton('next', `${locales.entries.Lcz_Next}`, isRequestPending('/Get_Exposed_Booking_Availability'), 'angles_right')}\r\n            </Fragment>\r\n          ) : (\r\n            <Fragment>\r\n              {this.renderButton('cancel', locales.entries.Lcz_Cancel)}\r\n              {this.shouldRenderTwoButtons() && this.renderButton('next', `${locales.entries.Lcz_Next}`, false, 'angles_right')}\r\n            </Fragment>\r\n          )}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n\r\n.sourceContainer {\r\n  max-width: 350px;\r\n}\r\n.message-label {\r\n  font-size: 80%;\r\n}\r\n","import { Component, Host, Prop, h, Event, EventEmitter } from '@stencil/core';\r\nimport { TAdultChildConstraints, TPropertyButtonsTypes, TSourceOption, TSourceOptions } from '../../../../models/igl-book-property';\r\nimport { IToast } from '../../../ir-toast/toast';\r\nimport moment from 'moment';\r\nimport locales from '@/stores/locales.store';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\nimport calendar_data from '@/stores/calendar-data';\r\n\r\n@Component({\r\n  tag: 'igl-book-property-header',\r\n  styleUrl: 'igl-book-property-header.css',\r\n  scoped: true,\r\n})\r\nexport class IglBookPropertyHeader {\r\n  @Prop() splitBookingId: any = '';\r\n  @Prop() bookingData: any = '';\r\n  @Prop() minDate: string;\r\n  @Prop() sourceOptions: TSourceOptions[] = [];\r\n  @Prop() message: string;\r\n  @Prop() bookingDataDefaultDateRange: { [key: string]: any };\r\n  @Prop() showSplitBookingOption: boolean = false;\r\n  @Prop() adultChildConstraints: TAdultChildConstraints;\r\n  @Prop() splitBookings: any[];\r\n  @Prop() adultChildCount: { adult: number; child: number };\r\n  @Prop() dateRangeData: any;\r\n  @Prop() bookedByInfoData: any;\r\n  @Prop() defaultDaterange: { from_date: string; to_date: string };\r\n  @Prop() propertyId: number;\r\n\r\n  @Event() splitBookingDropDownChange: EventEmitter<any>;\r\n  @Event() sourceDropDownChange: EventEmitter<string>;\r\n  @Event() adultChild: EventEmitter<any>;\r\n  @Event() checkClicked: EventEmitter<any>;\r\n  @Event() buttonClicked: EventEmitter<{ key: TPropertyButtonsTypes }>;\r\n  @Event() toast: EventEmitter<IToast>;\r\n  @Event() spiltBookingSelected: EventEmitter<{ key: string; data: unknown }>;\r\n\r\n  @Event({ bubbles: true, composed: true }) animateIrButton: EventEmitter<string>;\r\n  @Event({ bubbles: true, composed: true }) animateIrSelect: EventEmitter<string>;\r\n\r\n  private sourceOption: TSourceOption = {\r\n    code: '',\r\n    description: '',\r\n    tag: '',\r\n    id: '',\r\n    type: '',\r\n  };\r\n\r\n  getSplitBookingList() {\r\n    return (\r\n      <fieldset class=\"d-flex flex-column text-left mb-1  flex-lg-row align-items-lg-center\">\r\n        <label class=\"mr-lg-1\">{locales.entries.Lcz_Tobooking}# </label>\r\n        <div class=\"btn-group mt-1 mt-lg-0 sourceContainer\">\r\n          <ir-autocomplete\r\n            value={\r\n              Object.keys(this.bookedByInfoData).length > 1 ? `${this.bookedByInfoData.bookingNumber} ${this.bookedByInfoData.firstName} ${this.bookedByInfoData.lastName}` : ''\r\n            }\r\n            from_date={moment(this.bookingDataDefaultDateRange.fromDate).format('YYYY-MM-DD')}\r\n            to_date={moment(this.bookingDataDefaultDateRange.toDate).format('YYYY-MM-DD')}\r\n            propertyId={this.propertyId}\r\n            placeholder={locales.entries.Lcz_BookingNumber}\r\n            onComboboxValue={e => {\r\n              e.stopImmediatePropagation();\r\n              e.stopPropagation;\r\n              this.spiltBookingSelected.emit(e.detail);\r\n            }}\r\n            isSplitBooking\r\n          ></ir-autocomplete>\r\n        </div>\r\n      </fieldset>\r\n    );\r\n  }\r\n  getSourceNode() {\r\n    return (\r\n      <fieldset class=\"d-flex text-left  align-items-center\">\r\n        <label class=\"mr-1\">{locales.entries.Lcz_Source} </label>\r\n        <div class=\"btn-group mt-0 flex-fill sourceContainer\">\r\n          <select class=\"form-control input-sm\" id=\"xSmallSelect\" onChange={evt => this.sourceDropDownChange.emit((evt.target as HTMLSelectElement).value)}>\r\n            {this.sourceOptions.map(option => {\r\n              if (option.type === 'LABEL') {\r\n                return <optgroup label={option.value}></optgroup>;\r\n              }\r\n              return (\r\n                <option value={option.id} selected={this.sourceOption.code === option.id}>\r\n                  {option.value}\r\n                </option>\r\n              );\r\n            })}\r\n          </select>\r\n        </div>\r\n      </fieldset>\r\n    );\r\n  }\r\n  handleAdultChildChange(key: string, value: string) {\r\n    //const value = (event.target as HTMLSelectElement).value;\r\n    let obj = {};\r\n    if (value === '') {\r\n      obj = {\r\n        ...this.adultChildCount,\r\n        [key]: 0,\r\n      };\r\n    } else {\r\n      obj = {\r\n        ...this.adultChildCount,\r\n        [key]: value,\r\n      };\r\n    }\r\n    this.adultChild.emit(obj);\r\n  }\r\n\r\n  getAdultChildConstraints() {\r\n    return (\r\n      <div class={'mt-1 mt-lg-0 d-flex flex-column text-left'}>\r\n        {/* <label class=\"mb-1 d-lg-none\">{locales.entries.Lcz_NumberOfGuests} </label> */}\r\n        <div class=\"form-group  my-lg-0 text-left d-flex align-items-center justify-content-between justify-content-sm-start\">\r\n          <fieldset>\r\n            <div class=\"btn-group ml-0\">\r\n              <ir-select\r\n                class={'m-0'}\r\n                onSelectChange={e => this.handleAdultChildChange('adult', e.detail)}\r\n                select_id=\"adult_child_select\"\r\n                firstOption={locales.entries.Lcz_AdultsCaption}\r\n                LabelAvailable={false}\r\n                data={Array.from(Array(this.adultChildConstraints.adult_max_nbr), (_, i) => i + 1).map(option => ({\r\n                  text: option.toString(),\r\n                  value: option.toString(),\r\n                }))}\r\n              ></ir-select>\r\n            </div>\r\n          </fieldset>\r\n          {this.adultChildConstraints.child_max_nbr > 0 && (\r\n            <fieldset>\r\n              <div class=\"btn-group ml-1 p-0\">\r\n                {/* <select class=\"form-control input-sm\" id=\"xChildrenSmallSelect\" onChange={evt => this.handleAdultChildChange('child', evt)}>\r\n                  <option value={''}>{this.renderChildCaption()}</option>\r\n                  {Array.from(Array(this.adultChildConstraints.child_max_nbr), (_, i) => i + 1).map(option => (\r\n                    <option value={option}>{option}</option>\r\n                  ))}\r\n                </select> */}\r\n                <ir-select\r\n                  onSelectChange={e => this.handleAdultChildChange('child', e.detail)}\r\n                  select_id=\"child_select\"\r\n                  firstOption={this.renderChildCaption()}\r\n                  LabelAvailable={false}\r\n                  data={Array.from(Array(this.adultChildConstraints.child_max_nbr), (_, i) => i + 1).map(option => ({\r\n                    text: option.toString(),\r\n                    value: option.toString(),\r\n                  }))}\r\n                ></ir-select>\r\n              </div>\r\n            </fieldset>\r\n          )}\r\n          <ir-button\r\n            btn_id=\"check_availability\"\r\n            isLoading={isRequestPending('/Check_Availability')}\r\n            icon=\"\"\r\n            size=\"sm\"\r\n            class=\"ml-2\"\r\n            text={locales.entries.Lcz_Check}\r\n            onClickHanlder={() => this.handleButtonClicked()}\r\n          ></ir-button>\r\n          {/* <button class={'btn btn-primary btn-sm  ml-2'} onClick={() => this.handleButtonClicked()}>\r\n            {locales.entries.Lcz_Check}\r\n          </button> */}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  renderChildCaption() {\r\n    const maxAge = this.adultChildConstraints.child_max_age;\r\n    let years = locales.entries.Lcz_Years;\r\n\r\n    if (maxAge === 1) {\r\n      years = locales.entries.Lcz_Year;\r\n    }\r\n    return `${locales.entries.Lcz_ChildCaption} 0 - ${this.adultChildConstraints.child_max_age} ${years}`;\r\n  }\r\n  handleButtonClicked() {\r\n    if (this.isEventType('SPLIT_BOOKING') && Object.keys(this.bookedByInfoData).length <= 1) {\r\n      this.toast.emit({\r\n        type: 'error',\r\n        title: locales.entries.Lcz_ChooseBookingNumber,\r\n        description: '',\r\n        position: 'top-right',\r\n      });\r\n    } else if (this.isEventType('ADD_ROOM') || this.isEventType('SPLIT_BOOKING')) {\r\n      const initialToDate = moment(new Date(this.bookedByInfoData.to_date || this.defaultDaterange.to_date));\r\n      const initialFromDate = moment(new Date(this.bookedByInfoData.from_date || this.defaultDaterange.from_date));\r\n      const selectedFromDate = moment(new Date(this.dateRangeData.fromDate));\r\n      const selectedToDate = moment(new Date(this.dateRangeData.toDate));\r\n      if (selectedToDate.isBefore(initialFromDate) || selectedFromDate.isAfter(initialToDate)) {\r\n        this.toast.emit({\r\n          type: 'error',\r\n          title: `${locales.entries.Lcz_CheckInDateShouldBeMAx.replace(\r\n            '%1',\r\n            moment(new Date(this.bookedByInfoData.from_date || this.defaultDaterange.from_date)).format('ddd, DD MMM YYYY'),\r\n          ).replace('%2', moment(new Date(this.bookedByInfoData.to_date || this.defaultDaterange.to_date)).format('ddd, DD MMM YYYY'))}  `,\r\n          description: '',\r\n          position: 'top-right',\r\n        });\r\n        return;\r\n      } else if (this.adultChildCount.adult === 0) {\r\n        this.toast.emit({ type: 'error', title: locales.entries.Lcz_PlzSelectNumberOfGuests, description: '', position: 'top-right' });\r\n        this.animateIrSelect.emit('adult_child_select');\r\n      } else {\r\n        this.buttonClicked.emit({ key: 'check' });\r\n      }\r\n    } else if (this.minDate && new Date(this.dateRangeData.fromDate).getTime() > new Date(this.bookedByInfoData.to_date || this.defaultDaterange.to_date).getTime()) {\r\n      this.toast.emit({\r\n        type: 'error',\r\n        title: `${locales.entries.Lcz_CheckInDateShouldBeMAx.replace(\r\n          '%1',\r\n          moment(new Date(this.bookedByInfoData.from_date || this.defaultDaterange.from_date)).format('ddd, DD MMM YYYY'),\r\n        ).replace('%2', moment(new Date(this.bookedByInfoData.to_date || this.defaultDaterange.to_date)).format('ddd, DD MMM YYYY'))}  `,\r\n        description: '',\r\n        position: 'top-right',\r\n      });\r\n    } else if (this.adultChildCount.adult === 0) {\r\n      this.animateIrSelect.emit('adult_child_select');\r\n      this.toast.emit({ type: 'error', title: locales.entries.Lcz_PlzSelectNumberOfGuests, description: '', position: 'top-right' });\r\n    } else {\r\n      this.buttonClicked.emit({ key: 'check' });\r\n    }\r\n  }\r\n  isEventType(key: string) {\r\n    return this.bookingData.event_type === key;\r\n  }\r\n\r\n  render() {\r\n    const showSourceNode = this.showSplitBookingOption ? this.getSplitBookingList() : this.isEventType('EDIT_BOOKING') || this.isEventType('ADD_ROOM') ? false : true;\r\n    return (\r\n      <Host>\r\n        {this.isEventType('SPLIT_BOOKING') && this.getSplitBookingList()}\r\n        {showSourceNode && this.getSourceNode()}\r\n        <div class={`d-flex flex-column flex-lg-row align-items-lg-center ${showSourceNode ? 'mt-1' : ''}`}>\r\n          <fieldset class=\"mt-lg-0 mr-1 \">\r\n            <igl-date-range\r\n              variant=\"booking\"\r\n              dateLabel={locales.entries.Lcz_Dates}\r\n              minDate={this.isEventType('PLUS_BOOKING') ? moment().add(-1, 'months').startOf('month').format('YYYY-MM-DD') : this.minDate}\r\n              disabled={this.isEventType('BAR_BOOKING') || this.isEventType('SPLIT_BOOKING')}\r\n              defaultData={this.bookingDataDefaultDateRange}\r\n            ></igl-date-range>\r\n          </fieldset>\r\n          {!this.isEventType('EDIT_BOOKING') && this.getAdultChildConstraints()}\r\n        </div>\r\n        <p class=\"text-right mt-1 message-label\">{calendar_data.tax_statement}</p>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n\r\n.card-title {\r\n  border-bottom: 1px solid #e4e5ec;\r\n}\r\n\r\n.scrollContent {\r\n  height: calc(100% - 79px);\r\n  overflow: auto;\r\n  position: relative;\r\n}\r\n\r\n.background-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0, 0, 0, 0.25);\r\n}\r\n\r\n.formContainer {\r\n  height: calc(100% - 79px);\r\n  overflow: auto;\r\n}\r\n\r\n.sideWindow {\r\n  /* display: grid; */\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  height: 100%;\r\n  background-color: #ffffff;\r\n}\r\n\r\n.close {\r\n  float: right;\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n  line-height: 1;\r\n  color: #000;\r\n  text-shadow: 0 1px 0 #fff;\r\n  opacity: 0.5;\r\n\r\n  padding: 0;\r\n  background-color: transparent;\r\n  border: 0;\r\n  appearance: none;\r\n}\r\n\r\n.close-icon {\r\n  position: absolute;\r\n  top: 18px;\r\n  right: 33px;\r\n  outline: none;\r\n}\r\n\r\nbutton:not(:disabled),\r\n[type='button']:not(:disabled) {\r\n  cursor: pointer;\r\n}\r\n\r\n.row {\r\n  padding: 0 0 0 15px;\r\n  margin: 0;\r\n}\r\n","import { Component, Prop, h, Event, EventEmitter, Host, State } from '@stencil/core';\r\nimport { IPageTwoDataUpdateProps } from '@/models/models';\r\nimport { IglBookPropertyPayloadEditBooking, TPropertyButtonsTypes } from '../../../../models/igl-book-property';\r\nimport { formatAmount } from '@/utils/utils';\r\nimport locales from '@/stores/locales.store';\r\nimport { ICurrency } from '@/models/calendarData';\r\nimport booking_store, { IRatePlanSelection } from '@/stores/booking.store';\r\n@Component({\r\n  tag: 'igl-booking-form',\r\n  styleUrl: 'igl-booking-form.css',\r\n  scoped: true,\r\n})\r\nexport class IglBookingForm {\r\n  @Prop() showPaymentDetails: boolean;\r\n  @Prop() currency: ICurrency;\r\n  @Prop({ reflect: true }) isEditOrAddRoomEvent: boolean;\r\n  @Prop() dateRangeData: { [key: string]: any };\r\n  @Prop() bookingData: { [key: string]: any };\r\n  @Prop() showSplitBookingOption: boolean;\r\n  @Prop() language: string;\r\n  @Prop() bookedByInfoData: { [key: string]: any };\r\n  @Prop() propertyId: number;\r\n  @Prop() bedPreferenceType: any;\r\n  @Prop() selectedRooms: Map<string, Map<string, any>>;\r\n  @Prop({ reflect: true }) isLoading: string;\r\n  @Prop() countryNodeList;\r\n  @Prop() selectedGuestData;\r\n  @Prop() defaultGuestData: IglBookPropertyPayloadEditBooking;\r\n\r\n  @State() selectedBookedByData;\r\n  @State() guestData: any;\r\n  @State() selectedUnits: { [key: string]: any } = {};\r\n\r\n  @Event() dataUpdateEvent: EventEmitter<IPageTwoDataUpdateProps>;\r\n  @Event() buttonClicked: EventEmitter<{\r\n    key: TPropertyButtonsTypes;\r\n    data?: CustomEvent;\r\n  }>;\r\n\r\n  componentWillLoad() {\r\n    this.initializeGuestData();\r\n    this.selectedBookedByData = this.bookedByInfoData;\r\n  }\r\n\r\n  initializeGuestData() {\r\n    let total = 0;\r\n    const newSelectedUnits = { ...this.selectedUnits };\r\n    const getRate = (rate: number, totalNights: number, isRateModified: boolean, preference: number) => {\r\n      if (isRateModified && preference === 2) {\r\n        return rate * totalNights;\r\n      }\r\n      return rate;\r\n    };\r\n    this.selectedUnits = newSelectedUnits;\r\n    this.guestData = [];\r\n    this.selectedRooms.forEach((room, key) => {\r\n      room.forEach(rate_plan => {\r\n        newSelectedUnits[key] = rate_plan.selectedUnits;\r\n        total += rate_plan.totalRooms * getRate(rate_plan.rate, this.dateRangeData.dateDifference, rate_plan.isRateModified, rate_plan.rateType);\r\n        for (let i = 1; i <= rate_plan.totalRooms; i++) {\r\n          this.guestData.push({\r\n            guestName: '',\r\n            roomId: '',\r\n            preference: '',\r\n            ...rate_plan,\r\n          });\r\n        }\r\n      });\r\n    });\r\n    this.bookingData.TOTAL_PRICE = total;\r\n  }\r\n  handleOnApplicationInfoDataUpdateEvent(event: CustomEvent, index: number) {\r\n    const opt = event.detail;\r\n    const categoryIdKey = `c_${opt.data.roomCategoryId}`;\r\n    const updatedUnits = [...(this.selectedUnits[categoryIdKey] || [])];\r\n    updatedUnits[index] = opt.data.roomId;\r\n    this.selectedUnits = {\r\n      ...this.selectedUnits,\r\n      [categoryIdKey]: updatedUnits,\r\n    };\r\n    this.dataUpdateEvent.emit({\r\n      key: 'applicationInfoUpdateEvent',\r\n      value: event.detail,\r\n    });\r\n  }\r\n\r\n  handleEventData(event: any, key: string, index: number) {\r\n    if (key === 'application-info') {\r\n      this.handleOnApplicationInfoDataUpdateEvent(event, index);\r\n    } else {\r\n      this.selectedBookedByData = event.detail.data;\r\n      this.dataUpdateEvent.emit({\r\n        key: 'propertyBookedBy',\r\n        value: event.detail,\r\n      });\r\n    }\r\n  }\r\n  isGuestDataIncomplete() {\r\n    if (this.selectedGuestData.length !== this.guestData.length) {\r\n      return true;\r\n    }\r\n    for (const data of this.selectedGuestData) {\r\n      if (data.guestName === '' || data.preference === '' || data.roomId === '') {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n  isButtonDisabled(key: string) {\r\n    const isValidProperty = (property, key, comparedBy) => {\r\n      if (!property) {\r\n        return true;\r\n      }\r\n      if (property === this.selectedGuestData) {\r\n        return this.isGuestDataIncomplete();\r\n      }\r\n      if (key === 'selectedArrivalTime') {\r\n        if (property[key] !== undefined) {\r\n          return property[key].code === '';\r\n        } else {\r\n          return true;\r\n        }\r\n      }\r\n      return property[key] === comparedBy || property[key] === undefined;\r\n    };\r\n    return (\r\n      this.isLoading === key ||\r\n      isValidProperty(this.selectedGuestData, 'guestName', '') ||\r\n      isValidProperty(this.selectedBookedByData, 'isdCode', '') ||\r\n      isValidProperty(this.selectedBookedByData, 'contactNumber', '') ||\r\n      isValidProperty(this.selectedBookedByData, 'firstName', '') ||\r\n      isValidProperty(this.selectedBookedByData, 'lastName', '') ||\r\n      isValidProperty(this.selectedBookedByData, 'countryId', -1) ||\r\n      isValidProperty(this.selectedBookedByData, 'selectedArrivalTime', '') ||\r\n      isValidProperty(this.selectedBookedByData, 'email', '')\r\n    );\r\n  }\r\n\r\n  render() {\r\n    console.log(this.dateRangeData);\r\n    return (\r\n      <Host>\r\n        <div class=\"d-flex flex-wrap\">\r\n          <ir-date-view\r\n            class=\"mr-1 flex-fill font-weight-bold font-medium-1\"\r\n            from_date={new Date(this.dateRangeData.fromDate)}\r\n            to_date={new Date(this.dateRangeData.toDate)}\r\n            dateOption=\"DD MMM YYYY\"\r\n          ></ir-date-view>\r\n          {this.guestData.length > 1 && (\r\n            <div class=\"mt-1 mt-md-0 text-right\">\r\n              {locales.entries.Lcz_TotalPrice} <span class=\"font-weight-bold font-medium-1\">{formatAmount(this.currency.symbol, this.bookingData.TOTAL_PRICE || '0')}</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n        {Object.values(booking_store.ratePlanSelections).map(val =>\r\n          Object.values(val).map(ratePlan => {\r\n            const rp = ratePlan as IRatePlanSelection;\r\n            if (rp.reserved === 0) {\r\n              return null;\r\n            }\r\n\r\n            return [...new Array(rp.reserved)].map((_, i) => (\r\n              <igl-application-info\r\n                totalNights={Number(this.dateRangeData.dateDifference)}\r\n                bedPreferenceType={this.bedPreferenceType}\r\n                currency={this.currency}\r\n                guestInfo={rp.guest ? rp.guest[i] : null}\r\n                bookingType={this.bookingData.event_type}\r\n                rateplanSelection={rp}\r\n                key={`${rp.ratePlan.id}_${i}`}\r\n                roomIndex={i}\r\n                baseData={\r\n                  this.bookingData.event_type === 'EDIT_BOOKING'\r\n                    ? {\r\n                        roomtypeId: this.bookingData.currentRoomType.roomtype.id,\r\n                        unit: this.bookingData.currentRoomType.unit,\r\n                      }\r\n                    : undefined\r\n                }\r\n              ></igl-application-info>\r\n            ));\r\n          }),\r\n        )}\r\n\r\n        {this.isEditOrAddRoomEvent || this.showSplitBookingOption ? null : (\r\n          <igl-property-booked-by\r\n            propertyId={this.propertyId}\r\n            countryNodeList={this.countryNodeList}\r\n            language={this.language}\r\n            showPaymentDetails={this.showPaymentDetails}\r\n            defaultData={this.bookedByInfoData}\r\n            onDataUpdateEvent={event => {\r\n              this.handleEventData(event, 'propertyBookedBy', 0);\r\n            }}\r\n          ></igl-property-booked-by>\r\n        )}\r\n\r\n        {this.isEditOrAddRoomEvent ? (\r\n          <div class=\"d-flex p-0 mb-1 mt-2\">\r\n            <div class=\"flex-fill mr-2\">\r\n              <ir-button\r\n                icon=\"\"\r\n                text={locales.entries.Lcz_Back}\r\n                class=\"full-width\"\r\n                btn_color=\"secondary\"\r\n                btn_styles=\"justify-content-center\"\r\n                onClickHanlder={() => this.buttonClicked.emit({ key: 'back' })}\r\n              ></ir-button>\r\n            </div>\r\n            <div class=\"flex-fill\">\r\n              <ir-button\r\n                isLoading={this.isLoading === 'save'}\r\n                onClickHanlder={() => this.buttonClicked.emit({ key: 'save' })}\r\n                btn_styles=\"full-width align-items-center justify-content-center\"\r\n                text={locales.entries.Lcz_Save}\r\n              ></ir-button>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div class=\"d-flex flex-column flex-md-row p-0 mb-1 mt-2 justify-content-md-between align-items-md-center\">\r\n            <div class=\"flex-fill mr-md-1\">\r\n              <ir-button\r\n                icon_name=\"angles_left\"\r\n                btn_color=\"secondary\"\r\n                btn_styles=\"full-width align-items-center justify-content-center\"\r\n                onClickHanlder={() => this.buttonClicked.emit({ key: 'back' })}\r\n                text={locales.entries.Lcz_Back}\r\n                style={{ '--icon-size': '1rem' }}\r\n                icon_style={{ paddingBottom: '1.9px' }}\r\n              ></ir-button>\r\n            </div>\r\n            <div class=\"mt-1 mt-md-0 flex-fill\">\r\n              <ir-button\r\n                isLoading={this.isLoading === 'book'}\r\n                btn_styles=\"full-width align-items-center justify-content-center\"\r\n                onClickHanlder={() => this.buttonClicked.emit({ key: 'book' })}\r\n                text={locales.entries.Lcz_Book}\r\n              ></ir-button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n:host > * {\r\n  margin: 0;\r\n  padding: auto;\r\n}\r\n.scrollContent {\r\n  height: calc(100% - 79px);\r\n  overflow: auto;\r\n  position: relative;\r\n}\r\n.loading-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  background: white;\r\n  position: absolute;\r\n  inset: 0;\r\n  z-index: 100;\r\n}\r\n.loader {\r\n  width: 1.25rem;\r\n  height: 1.25rem;\r\n  border: 2.5px solid #3f3f3f;\r\n  border-bottom-color: transparent;\r\n  border-radius: 50%;\r\n  display: inline-block;\r\n  box-sizing: border-box;\r\n  animation: rotation 1s linear infinite;\r\n}\r\n","import { Component, Event, EventEmitter, Fragment, Host, Prop, h } from '@stencil/core';\r\nimport { TAdultChildConstraints, TSourceOptions } from '../../../../models/igl-book-property';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\nimport moment from 'moment';\r\nimport booking_store from '@/stores/booking.store';\r\n@Component({\r\n  tag: 'igl-booking-overview-page',\r\n  styleUrl: 'igl-booking-overview-page.css',\r\n  scoped: true,\r\n})\r\nexport class IglBookingOverviewPage {\r\n  @Prop() bookingData: any;\r\n  @Prop() propertyId: number;\r\n  @Prop() message: string;\r\n  @Prop() showSplitBookingOption: boolean;\r\n  @Prop() eventType: string;\r\n  @Prop() currency: any;\r\n  @Prop() adultChildConstraints: TAdultChildConstraints;\r\n  @Prop() ratePricingMode: any;\r\n  @Prop() dateRangeData: any;\r\n  @Prop() defaultDaterange: { from_date: string; to_date: string };\r\n  @Prop() selectedRooms: Map<string, Map<string, any>>;\r\n  @Prop() adultChildCount: { adult: number; child: number };\r\n  @Prop() sourceOptions: TSourceOptions[];\r\n  @Prop() bookedByInfoData: any;\r\n  @Prop() initialRoomIds: any;\r\n\r\n  @Event() roomsDataUpdate: EventEmitter;\r\n\r\n  getSplitBookings() {\r\n    return (this.bookingData.hasOwnProperty('splitBookingEvents') && this.bookingData.splitBookingEvents) || [];\r\n  }\r\n  isEventType(event: string) {\r\n    return event === this.eventType;\r\n  }\r\n  setMinDate() {\r\n    if (!this.isEventType('EDIT_BOOKING')) {\r\n      return;\r\n    }\r\n    const from_date = moment(this.bookingData.FROM_DATE, 'YYYY-MM-DD');\r\n    const today = moment();\r\n    if (from_date.isAfter(today)) {\r\n      return today.add(-2, 'weeks').format('YYYY-MM-DD');\r\n    }\r\n    return from_date.add(-2, 'weeks').format('YYYY-MM-DD');\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <igl-book-property-header\r\n          bookedByInfoData={this.bookedByInfoData}\r\n          defaultDaterange={this.defaultDaterange}\r\n          dateRangeData={this.dateRangeData}\r\n          minDate={this.setMinDate()}\r\n          // minDate={this.isEventType('ADD_ROOM') || this.isEventType('SPLIT_BOOKING') ? this.bookedByInfoData.from_date || this.bookingData.FROM_DATE : undefined}\r\n          adultChildCount={this.adultChildCount}\r\n          splitBookingId={this.showSplitBookingOption}\r\n          bookingData={this.bookingData}\r\n          sourceOptions={this.sourceOptions}\r\n          message={this.message}\r\n          bookingDataDefaultDateRange={this.bookingData.defaultDateRange}\r\n          showSplitBookingOption={this.showSplitBookingOption}\r\n          adultChildConstraints={this.adultChildConstraints}\r\n          splitBookings={this.getSplitBookings()}\r\n          propertyId={this.propertyId}\r\n        ></igl-book-property-header>\r\n        {/* {this.adultChildCount.adult === 0 && <p class={'col text-left'}>Please select the number of guests</p>} */}\r\n        <div class=\" text-left\">\r\n          {isRequestPending('/Check_Availability') && this.isEventType('EDIT_BOOKING') ? (\r\n            <div class=\"loading-container\">\r\n              <div class=\"loader\"></div>\r\n            </div>\r\n          ) : (\r\n            <Fragment>\r\n              {booking_store.roomTypes?.map(roomType => (\r\n                <igl-room-type\r\n                  initialRoomIds={this.initialRoomIds}\r\n                  isBookDisabled={Object.keys(this.bookedByInfoData).length <= 1}\r\n                  key={`room-info-${roomType.id}`}\r\n                  currency={this.currency}\r\n                  ratePricingMode={this.ratePricingMode}\r\n                  dateDifference={this.dateRangeData.dateDifference}\r\n                  bookingType={this.bookingData.event_type}\r\n                  roomType={roomType}\r\n                  class=\"mt-2 mb-1 p-0\"\r\n                  roomInfoId={this.selectedRooms.has(`c_${roomType.id}`) ? roomType.id : null}\r\n                  onDataUpdateEvent={evt => this.roomsDataUpdate.emit(evt.detail)}\r\n                ></igl-room-type>\r\n              ))}\r\n            </Fragment>\r\n          )}\r\n        </div>\r\n\r\n        <igl-book-property-footer class={'p-0 mb-1 mt-3'} eventType={this.bookingData.event_type}></igl-book-property-footer>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: flex;\r\n  align-items: center !important;\r\n  font-size: 14px !important;\r\n}\r\n.date-range-input {\r\n  margin: 0;\r\n  padding: 0;\r\n  display: flex;\r\n  flex: 1;\r\n  cursor: pointer;\r\n  width: 220px !important;\r\n  opacity: 0;\r\n  user-select: none;\r\n  font-size: 14px !important;\r\n}\r\n.iglRangeNights {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.date-view {\r\n  position: absolute;\r\n  background: white;\r\n  pointer-events: none;\r\n  cursor: pointer;\r\n  display: block;\r\n  margin-left: 14px;\r\n  margin-right: 14px;\r\n  font-size: 13.65px !important;\r\n  display: flex;\r\n  align-items: center;\r\n  inset: 0;\r\n}\r\n.date-view svg {\r\n  padding: 0 !important;\r\n  margin: 0;\r\n  margin-right: 10px;\r\n}\r\n.calendarPickerContainer {\r\n  display: flex !important;\r\n  position: relative !important;\r\n  text-align: left;\r\n  align-items: center !important;\r\n  padding: 0 !important;\r\n  margin: 0;\r\n  border: 1px solid var(--ir-date-range-border, #379ff2);\r\n  width: var(--ir-date-range-width, 245px);\r\n  transition: border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n}\r\n.calendarPickerContainer:focus-within {\r\n  border-color: #379ff2;\r\n}\r\n.calendarPickerContainer[data-state='disabled'] {\r\n  border: 0px;\r\n  width: 280px;\r\n}\r\n.date-view[data-state='disabled'],\r\n.date-range-input[data-state='disabled'] {\r\n  margin: 0;\r\n  cursor: default;\r\n}\r\n.date-range-container-cn {\r\n  position: relative;\r\n  width: fit-content;\r\n}\r\n.date-range-container-cn:focus-within .date-range-container {\r\n  border: 1px solid #379ff2;\r\n}\r\n.date-range-container {\r\n  position: relative;\r\n  gap: 1rem;\r\n  font-size: 0.975rem;\r\n  line-height: 1.45;\r\n  border-radius: 0.21rem;\r\n  border: 1px solid #cacfe7;\r\n  color: #3b4781;\r\n  padding: 0.75rem 1rem;\r\n  box-sizing: border-box !important;\r\n  font-weight: 400;\r\n  background-color: #fff;\r\n  background-clip: padding-box;\r\n  height: 2rem;\r\n  pointer-events: none;\r\n  transition: border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n}\r\n.date-range-container-cn .date-range-input {\r\n  position: absolute;\r\n  width: 100% !important;\r\n}\r\n","import { Component, Host, h, State, Event, EventEmitter, Prop, Watch } from '@stencil/core';\r\nimport { IToast } from '../../ir-toast/toast';\r\nimport locales from '@/stores/locales.store';\r\nimport { calculateDaysBetweenDates } from '@/utils/booking';\r\nimport moment from 'moment';\r\n\r\n@Component({\r\n  tag: 'igl-date-range',\r\n  styleUrl: 'igl-date-range.css',\r\n  scoped: true,\r\n})\r\nexport class IglDateRange {\r\n  @Prop() defaultData: { [key: string]: any };\r\n  @Prop({ reflect: true }) disabled: boolean = false;\r\n  @Prop() minDate: string;\r\n  @Prop() dateLabel: string;\r\n  @Prop() maxDate: string;\r\n  @Prop() withDateDifference: boolean = true;\r\n  @Prop() variant: 'booking' | 'default' = 'default';\r\n\r\n  @State() renderAgain: boolean = false;\r\n\r\n  @Event() dateSelectEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Event() toast: EventEmitter<IToast>;\r\n\r\n  private totalNights: number = 0;\r\n  private fromDate: Date;\r\n  private toDate: Date;\r\n  private fromDateStr: string = 'from';\r\n  private toDateStr: string = 'to';\r\n\r\n  componentWillLoad() {\r\n    this.initializeDates();\r\n  }\r\n\r\n  @Watch('defaultData')\r\n  handleDataChange(newValue: any, oldValue: any) {\r\n    if (JSON.stringify(newValue) !== JSON.stringify(oldValue)) {\r\n      this.initializeDates();\r\n    }\r\n  }\r\n\r\n  private initializeDates() {\r\n    let dt = new Date();\r\n    dt.setHours(0, 0, 0, 0);\r\n    dt.setDate(dt.getDate() + 1);\r\n    if (this.defaultData) {\r\n      if (this.defaultData.fromDate) {\r\n        this.fromDate = new Date(this.defaultData.fromDate);\r\n        this.fromDate.setHours(0, 0, 0, 0);\r\n        this.fromDateStr = this.getFormattedDateString(this.fromDate);\r\n      }\r\n      if (this.defaultData.toDate) {\r\n        this.toDate = new Date(this.defaultData.toDate);\r\n        this.toDate.setHours(0, 0, 0, 0);\r\n        this.toDateStr = this.getFormattedDateString(this.toDate);\r\n      }\r\n    }\r\n    if (this.fromDate && this.toDate) {\r\n      this.calculateTotalNights();\r\n      // this.handleDateSelectEvent('selectedDateRange', {\r\n      //   fromDate: this.fromDate.getTime(),\r\n      //   toDate: this.toDate.getTime(),\r\n      //   fromDateStr: this.fromDateStr,\r\n      //   toDateStr: this.toDateStr,\r\n      //   dateDifference: this.totalNights,\r\n      // });\r\n    }\r\n    return [this.fromDateStr, this.toDateStr];\r\n  }\r\n\r\n  private calculateTotalNights() {\r\n    this.totalNights = calculateDaysBetweenDates(moment(this.fromDate).format('YYYY-MM-DD'), moment(this.toDate).format('YYYY-MM-DD'));\r\n  }\r\n  private getFormattedDateString(dt) {\r\n    return dt.getDate() + ' ' + dt.toLocaleString('default', { month: 'short' }).toLowerCase() + ' ' + dt.getFullYear();\r\n  }\r\n\r\n  private handleDateSelectEvent(key, data: any = '') {\r\n    this.dateSelectEvent.emit({ key, data });\r\n  }\r\n  private handleDateChange(evt) {\r\n    const { start, end } = evt.detail;\r\n    this.fromDate = start.toDate();\r\n    this.toDate = end.toDate();\r\n    this.calculateTotalNights();\r\n\r\n    this.handleDateSelectEvent('selectedDateRange', {\r\n      fromDate: this.fromDate.getTime(),\r\n      toDate: this.toDate.getTime(),\r\n      fromDateStr: start.format('DD MMM YYYY'),\r\n      toDateStr: end.format('DD MMM YYYY'),\r\n      dateDifference: this.totalNights,\r\n    });\r\n\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n  render() {\r\n    if (this.variant === 'booking') {\r\n      return (\r\n        <div class={'p-0 m-0 date-range-container-cn'}>\r\n          <ir-date-picker\r\n            maxDate={this.maxDate}\r\n            class={'date-range-input'}\r\n            disabled={this.disabled}\r\n            fromDate={this.fromDate}\r\n            toDate={this.toDate}\r\n            minDate={this.minDate}\r\n            autoApply\r\n            data-state={this.disabled ? 'disabled' : 'active'}\r\n            onDateChanged={evt => {\r\n              this.handleDateChange(evt);\r\n            }}\r\n          ></ir-date-picker>\r\n          <div class={'d-flex align-items-center m-0  date-range-container'}>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"m-0 p-0\" height=\"14\" width=\"14\" viewBox=\"0 0 448 512\">\r\n              <path\r\n                fill=\"currentColor\"\r\n                d=\"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z\"\r\n              />\r\n            </svg>\r\n            <span>{moment(this.fromDate).format('MMM DD, YYYY')}</span>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"m-0 p-0\" height=\"14\" width=\"14\" viewBox=\"0 0 512 512\">\r\n              <path\r\n                fill=\"currentColor\"\r\n                d=\"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z\"\r\n              />\r\n            </svg>\r\n            <span>{moment(this.toDate).format('MMM DD, YYYY')}</span>\r\n            {this.totalNights && <span class=\"m-0 p-0\">{this.totalNights + (this.totalNights > 1 ? ` ${locales.entries.Lcz_Nights}` : ` ${locales.entries.Lcz_Night}`)}</span>}\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <Host>\r\n        <div class=\"calendarPickerContainer form-control input-sm\" data-state={this.disabled ? 'disabled' : 'active'}>\r\n          <ir-date-picker\r\n            maxDate={this.maxDate}\r\n            class={'date-range-input'}\r\n            disabled={this.disabled}\r\n            fromDate={this.fromDate}\r\n            toDate={this.toDate}\r\n            minDate={this.minDate}\r\n            autoApply\r\n            data-state={this.disabled ? 'disabled' : 'active'}\r\n            onDateChanged={evt => {\r\n              this.handleDateChange(evt);\r\n            }}\r\n          ></ir-date-picker>\r\n          <div data-state={this.disabled ? 'disabled' : 'active'} class=\"date-view\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"12\" width=\"10.5\" viewBox=\"0 0 448 512\">\r\n              <path\r\n                fill=\"currentColor\"\r\n                d=\"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z\"\r\n              />\r\n            </svg>\r\n            <ir-date-view showDateDifference={this.disabled} from_date={this.fromDate} to_date={this.toDate}></ir-date-view>\r\n          </div>\r\n        </div>\r\n        {this.withDateDifference && (\r\n          <span>\r\n            {this.totalNights && !this.disabled ? (\r\n              <span class=\"iglRangeNights mx-1\">{this.totalNights + (this.totalNights > 1 ? ` ${locales.entries.Lcz_Nights}` : ` ${locales.entries.Lcz_Night}`)}</span>\r\n            ) : (\r\n              ''\r\n            )}\r\n          </span>\r\n        )}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n\r\n.row {\r\n  padding: 0 0 0 15px;\r\n  margin: 0;\r\n}\r\n\r\n.bookedByEmailContainer {\r\n  flex: auto;\r\n  max-width: 350px;\r\n}\r\n\r\n.bookedDetailsForm label {\r\n  min-width: 125px;\r\n  max-width: 125px;\r\n}\r\n\r\n.bookedDetailsForm .controlContainer {\r\n  /* width: calc(100% - 127px); */\r\n}\r\n\r\n.bookedDetailsForm .form-group {\r\n  margin-bottom: 10px !important;\r\n}\r\n\r\n.bookedDetailsForm .checkBoxContainer input {\r\n  height: 1.2rem !important;\r\n  width: 30px;\r\n}\r\n/* .controlContainer1 .textarea-container {\r\n  border: 1px solid #ced4da; \r\n  border-radius: 0.25rem; \r\n  height: 60px; \r\n  width: 100%;\r\n} */\r\n.controlContainer textarea {\r\n  height: 60px !important;\r\n}\r\n.margin3 {\r\n  margin-bottom: 5px !important;\r\n}\r\n@media (min-width: 768px) {\r\n  .bookedByEmailContainer {\r\n    margin-left: 37px;\r\n  }\r\n}\r\n","import { Component, Host, h, Prop, Event, EventEmitter, State, Fragment, Listen } from '@stencil/core';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport { IEntries, ICountry } from '@/models/IBooking';\r\nimport { v4 } from 'uuid';\r\nimport locales from '@/stores/locales.store';\r\nimport { TPropertyButtonsTypes } from '@/components';\r\nimport { z } from 'zod';\r\nimport { validateEmail } from '@/utils/utils';\r\n\r\n@Component({\r\n  tag: 'igl-property-booked-by',\r\n  styleUrl: 'igl-property-booked-by.css',\r\n  scoped: true,\r\n})\r\nexport class IglPropertyBookedBy {\r\n  @Prop() language: string;\r\n  @Prop() showPaymentDetails: boolean = false;\r\n  @Prop() defaultData: { [key: string]: any };\r\n  @Event() dataUpdateEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Prop() countryNodeList: ICountry[] = [];\r\n  @Prop() propertyId: number;\r\n  @State() isButtonPressed: boolean = false;\r\n  private bookingService: BookingService = new BookingService();\r\n  private arrivalTimeList: IEntries[] = [];\r\n  private expiryMonths: string[] = ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12'];\r\n  private expiryYears: string[] = [];\r\n  private currentMonth: string = '01';\r\n  private country;\r\n  @State() bookedByData: { [key: string]: any } = {\r\n    id: undefined,\r\n    email: '',\r\n    firstName: '',\r\n    lastName: '',\r\n    countryId: '',\r\n    isdCode: '',\r\n    contactNumber: '',\r\n    selectedArrivalTime: '',\r\n    emailGuest: false,\r\n    message: '',\r\n    cardNumber: '',\r\n    cardHolderName: '',\r\n    expiryMonth: '',\r\n    expiryYear: '',\r\n  };\r\n\r\n  async componentWillLoad() {\r\n    this.assignCountryCode();\r\n    this.initializeExpiryYears();\r\n    this.initializeDateData();\r\n    this.populateBookedByData();\r\n  }\r\n\r\n  private initializeExpiryYears() {\r\n    const currentYear = new Date().getFullYear();\r\n    this.expiryYears = Array.from({ length: 4 }, (_, index) => (currentYear + index).toString());\r\n  }\r\n  private async assignCountryCode() {\r\n    const country = await this.bookingService.getUserDefaultCountry();\r\n\r\n    const countryId = country['COUNTRY_ID'];\r\n    this.country = countryId;\r\n    this.bookedByData = { ...this.bookedByData, isdCode: countryId.toString(), countryId };\r\n  }\r\n  private initializeDateData() {\r\n    const dt = new Date();\r\n    const month = dt.getMonth() + 1;\r\n    this.currentMonth = month < 10 ? `0${month}` : month.toString();\r\n  }\r\n\r\n  private populateBookedByData() {\r\n    this.bookedByData = this.defaultData ? { ...this.bookedByData, ...this.defaultData } : {};\r\n    this.arrivalTimeList = this.defaultData?.arrivalTime || [];\r\n    this.bookedByData = { ...this.bookedByData, selectedArrivalTime: this.arrivalTimeList[0].CODE_NAME };\r\n    if (!this.bookedByData.expiryMonth) {\r\n      this.bookedByData.expiryMonth = this.currentMonth;\r\n    }\r\n    if (!this.bookedByData.expiryYear) {\r\n      this.bookedByData.expiryYear = new Date().getFullYear();\r\n    }\r\n    console.log('initial bookedby data', this.bookedByData);\r\n  }\r\n\r\n  handleDataChange(key, event) {\r\n    this.bookedByData[key] = key === 'emailGuest' ? event.target.checked : event.target.value;\r\n    this.dataUpdateEvent.emit({\r\n      key: 'bookedByInfoUpdated',\r\n      data: { ...this.bookedByData },\r\n    });\r\n    if (key === 'countryId') {\r\n      this.bookedByData = {\r\n        ...this.bookedByData,\r\n        isdCode: event.target.value,\r\n      };\r\n    }\r\n    // console.log(this.bookedByData);\r\n  }\r\n\r\n  handleNumberInput(key, event: InputEvent) {\r\n    const inputElement = event.target as HTMLInputElement;\r\n    const inputValue = inputElement.value;\r\n\r\n    // Regular expression to match only numeric characters (0-9)\r\n    const numericRegex = /^[0-9]+$/;\r\n\r\n    if (!numericRegex.test(inputValue)) {\r\n      // If the input is not numeric, prevent it from being entered\r\n      inputElement.value = inputValue.replace(/[^0-9]/g, '');\r\n    }\r\n    if (inputValue === inputElement.value) {\r\n      this.handleDataChange(key, event);\r\n    }\r\n  }\r\n\r\n  // async handleEmailInput(key, event: InputEvent) {\r\n  //   const inputElement = event.target as HTMLInputElement;\r\n  //   const inputValue = inputElement.value;\r\n  //   if (z.string().email().safeParse(inputValue).success) {\r\n  //     this.handleDataChange(key, event);\r\n  //   }\r\n  // }\r\n  async checkUser() {\r\n    try {\r\n      const email = this.bookedByData.email;\r\n      if (z.string().email().safeParse(email).success) {\r\n        const res = await this.bookingService.getUserInfo(email);\r\n        if (res !== null) {\r\n          this.bookedByData = {\r\n            ...this.bookedByData,\r\n            id: res.id,\r\n            firstName: res.first_name,\r\n            lastName: res.last_name,\r\n            contactNumber: res.mobile,\r\n            countryId: res.country_id,\r\n            isdCode: res.country_id.toString(),\r\n          };\r\n        } else {\r\n          let prevBookedByData = { ...this.bookedByData };\r\n          prevBookedByData = { ...prevBookedByData, email };\r\n          this.bookedByData = { ...prevBookedByData };\r\n        }\r\n      } else {\r\n        let prevBookedByData = { ...this.bookedByData };\r\n        prevBookedByData = { ...prevBookedByData, email: '' };\r\n        this.bookedByData = { ...prevBookedByData };\r\n      }\r\n      this.dataUpdateEvent.emit({\r\n        key: 'bookedByInfoUpdated',\r\n        data: { ...this.bookedByData },\r\n      });\r\n    } catch (error) {\r\n      //   toastr.error(error);\r\n    }\r\n  }\r\n  handleComboboxChange(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    const { key, data } = e.detail;\r\n    console.log('data', data, 'key', key);\r\n    switch (key) {\r\n      case 'blur':\r\n        if (data !== '') {\r\n          this.bookedByData.email = data;\r\n          this.checkUser();\r\n        } else {\r\n          let prevBookedByData = { ...this.bookedByData };\r\n          prevBookedByData = { ...prevBookedByData, email: '' };\r\n          this.bookedByData = { ...prevBookedByData };\r\n          this.dataUpdateEvent.emit({\r\n            key: 'bookedByInfoUpdated',\r\n            data: { ...this.bookedByData },\r\n          });\r\n        }\r\n\r\n        break;\r\n      case 'select':\r\n        this.bookedByData.email = data.email;\r\n        this.bookedByData = {\r\n          ...this.bookedByData,\r\n          id: data.id,\r\n          firstName: data.first_name,\r\n          lastName: data.last_name,\r\n          contactNumber: data.mobile,\r\n          countryId: data.country_id,\r\n          isdCode: data.country_id.toString(),\r\n        };\r\n        this.dataUpdateEvent.emit({\r\n          key: 'bookedByInfoUpdated',\r\n          data: this.bookedByData,\r\n        });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n  clearEvent() {\r\n    this.bookedByData = {\r\n      ...this.bookedByData,\r\n      id: '',\r\n      firstName: '',\r\n      lastName: '',\r\n      contactNumber: '',\r\n      isdCode: this.country.toString(),\r\n      countryId: this.country,\r\n    };\r\n    this.dataUpdateEvent.emit({\r\n      key: 'bookedByInfoUpdated',\r\n      data: { ...this.bookedByData },\r\n    });\r\n  }\r\n  @Listen('buttonClicked', { target: 'body' })\r\n  handleButtonClicked(\r\n    event: CustomEvent<{\r\n      key: TPropertyButtonsTypes;\r\n      data?: CustomEvent;\r\n    }>,\r\n  ) {\r\n    switch (event.detail.key) {\r\n      case 'book':\r\n      case 'bookAndCheckIn':\r\n        this.isButtonPressed = true;\r\n        break;\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"text-left mt-3\">\r\n          <div class=\"form-group d-flex flex-column flex-md-row align-items-md-center text-left \">\r\n            <label class=\"p-0 m-0 label-control mr-1 font-weight-bold\">{locales.entries.Lcz_BookedBy}</label>\r\n            <div class=\"bookedByEmailContainer mt-1 mt-md-0 d-flex align-items-center\">\r\n              {/* <input\r\n                id={v4()}\r\n                type=\"email\"\r\n                class=\"form-control\"\r\n                placeholder=\"Email address\"\r\n                name=\"bookeyByEmail\"\r\n                value={this.bookedByData.email}\r\n                onInput={event => this.handleEmailInput('email', event)}\r\n                required\r\n                onBlur={() => this.checkUser()}\r\n              /> */}\r\n              <ir-autocomplete\r\n                onComboboxValue={this.handleComboboxChange.bind(this)}\r\n                propertyId={this.propertyId}\r\n                type=\"text\"\r\n                value={this.bookedByData.email}\r\n                required\r\n                class={'flex-fill'}\r\n                placeholder={locales.entries.Lcz_FindEmailAddress}\r\n                onInputCleared={() => this.clearEvent()}\r\n                danger_border={this.isButtonPressed && this.bookedByData.email !== '' && validateEmail(this.bookedByData.email)}\r\n              ></ir-autocomplete>\r\n              <ir-tooltip class={'ml-1'} message=\"Leave empty if email is unavailable\"></ir-tooltip>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"bookedDetailsForm text-left mt-2 font-small-3 \">\r\n          <div class=\"d-flex flex-column flex-md-row  justify-content-md-between \">\r\n            <div class=\"p-0 flex-fill \">\r\n              <div class=\"form-group d-flex flex-column flex-md-row align-items-md-center p-0 flex-fill \">\r\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_FirstName}</label>\r\n                <div class=\"p-0 m-0  controlContainer flex-fill  \">\r\n                  <input\r\n                    class={`form-control flex-fill ${this.isButtonPressed && this.bookedByData.firstName === '' && 'border-danger'}`}\r\n                    type=\"text\"\r\n                    placeholder={locales.entries.Lcz_FirstName}\r\n                    id={v4()}\r\n                    value={this.bookedByData.firstName}\r\n                    onInput={event => this.handleDataChange('firstName', event)}\r\n                    required\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center\">\r\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_LastName}</label>\r\n                <div class=\"p-0 m-0  controlContainer flex-fill\">\r\n                  <input\r\n                    class={`form-control ${this.isButtonPressed && this.bookedByData.lastName === '' && 'border-danger'}`}\r\n                    type=\"text\"\r\n                    placeholder={locales.entries.Lcz_LastName}\r\n                    id={v4()}\r\n                    value={this.bookedByData.lastName}\r\n                    onInput={event => this.handleDataChange('lastName', event)}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center\">\r\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_Country}</label>\r\n                <div class=\"p-0 m-0  controlContainer flex-fill\">\r\n                  <select class={`form-control input-sm pr-0`} id={v4()} onChange={event => this.handleDataChange('countryId', event)}>\r\n                    <option value=\"\" selected={this.bookedByData.countryId === ''}>\r\n                      {locales.entries.Lcz_Select}\r\n                    </option>\r\n                    {this.countryNodeList.map(countryNode => (\r\n                      <option value={countryNode.id} selected={this.bookedByData.countryId === countryNode.id}>\r\n                        {countryNode.name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center\">\r\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_MobilePhone}</label>\r\n                <div class=\"p-0 m-0  d-flex  controlContainer flex-fill\">\r\n                  <div class=\" p-0 m-0\">\r\n                    <select class={`form-control input-sm pr-0`} id={v4()} onChange={event => this.handleDataChange('isdCode', event)}>\r\n                      <option value=\"\" selected={this.bookedByData.isdCode === ''}>\r\n                        {locales.entries.Lcz_Isd}\r\n                      </option>\r\n                      {this.countryNodeList.map(country => (\r\n                        <option value={country.id} selected={this.bookedByData.isdCode === country.id.toString()}>\r\n                          {country.phone_prefix}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                  <div class=\"flex-fill p-0 m-0\">\r\n                    <input\r\n                      class={`form-control\r\n                     \r\n                      `}\r\n                      type=\"tel\"\r\n                      placeholder={locales.entries.Lcz_ContactNumber}\r\n                      id={v4()}\r\n                      value={this.bookedByData.contactNumber}\r\n                      onInput={event => this.handleNumberInput('contactNumber', event)}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center\">\r\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_YourArrivalTime}</label>\r\n                <div class=\"p-0 m-0  controlContainer flex-fill\">\r\n                  <select\r\n                    class={`form-control input-sm pr-0 ${this.isButtonPressed && this.bookedByData.selectedArrivalTime.code === '' && 'border-danger'}`}\r\n                    id={v4()}\r\n                    onChange={event => this.handleDataChange('selectedArrivalTime', event)}\r\n                  >\r\n                    {/* <option value=\"\" selected={this.bookedByData.selectedArrivalTime.code === ''}>\r\n                      -\r\n                    </option> */}\r\n                    {this.arrivalTimeList.map(time => (\r\n                      <option value={time.CODE_NAME} selected={this.bookedByData.selectedArrivalTime.code === time.CODE_NAME}>\r\n                        {time.CODE_VALUE_EN}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"p-0 flex-fill  ml-md-3\">\r\n              <div class=\"  p-0 d-flex flex-column flex-md-row align-items-md-center \">\r\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_AnyMessageForUs}</label>\r\n                <div class=\"p-0 m-0  controlContainer flex-fill \">\r\n                  <textarea\r\n                    id={v4()}\r\n                    rows={4}\r\n                    class=\"form-control \"\r\n                    name=\"message\"\r\n                    value={this.bookedByData.message}\r\n                    onInput={event => this.handleDataChange('message', event)}\r\n                  ></textarea>\r\n                </div>\r\n              </div>\r\n              {this.showPaymentDetails && (\r\n                <Fragment>\r\n                  <div class=\"form-group mt-md-1  p-0 d-flex flex-column flex-md-row align-items-md-center\">\r\n                    <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_CardNumber}</label>\r\n                    <div class=\"p-0 m-0  controlContainer flex-fill\">\r\n                      <input\r\n                        class=\"form-control\"\r\n                        type=\"text\"\r\n                        placeholder=\"\"\r\n                        pattern=\"0-9 \"\r\n                        id={v4()}\r\n                        value={this.bookedByData.cardNumber}\r\n                        onInput={event => this.handleNumberInput('cardNumber', event)}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center\">\r\n                    <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_CardHolderName}</label>\r\n                    <div class=\"p-0 m-0  controlContainer flex-fill\">\r\n                      <input\r\n                        class=\"form-control\"\r\n                        type=\"text\"\r\n                        placeholder=\"\"\r\n                        pattern=\"0-9 \"\r\n                        id={v4()}\r\n                        value={this.bookedByData.cardHolderName}\r\n                        onInput={event => this.handleDataChange('cardHolderName', event)}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center\">\r\n                    <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_ExpiryDate}</label>\r\n                    <div class=\"p-0 m-0 row  controlContainer flex-fill\">\r\n                      <div class=\"p-0 m-0\">\r\n                        <select class=\"form-control input-sm pr-0\" id={v4()} onChange={event => this.handleDataChange('expiryMonth', event)}>\r\n                          {this.expiryMonths.map(month => (\r\n                            <option value={month} selected={month === this.bookedByData.expiryMonth}>\r\n                              {month}\r\n                            </option>\r\n                          ))}\r\n                        </select>\r\n                      </div>\r\n                      <div class=\"p-0 m-0 ml-1\">\r\n                        <select class=\"form-control input-sm pr-0\" id={v4()} onChange={event => this.handleDataChange('expiryYear', event)}>\r\n                          {this.expiryYears.map((year, index) => (\r\n                            <option value={year} selected={index === this.bookedByData.expiryYear}>\r\n                              {year}\r\n                            </option>\r\n                          ))}\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </Fragment>\r\n              )}\r\n              <div class=\"form-group mt-1 p-0 d-flex flex-row align-items-center\">\r\n                <label class=\"p-0 m-0\" htmlFor={'emailTheGuestId'}>\r\n                  {locales.entries.Lcz_EmailTheGuest}\r\n                </label>\r\n                <div class=\"p-0 m-0  controlContainer flex-fill checkBoxContainer\">\r\n                  <input\r\n                    class=\"form-control\"\r\n                    type=\"checkbox\"\r\n                    checked={this.bookedByData.emailGuest}\r\n                    id={'emailTheGuestId'}\r\n                    onChange={event => this.handleDataChange('emailGuest', event)}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n}\r\n.currency {\r\n  display: block;\r\n  position: absolute;\r\n  margin: 0;\r\n  padding: 0;\r\n  height: auto;\r\n  left: 10px;\r\n}\r\n.rate-input {\r\n  font-size: 14px;\r\n  line-height: 0;\r\n  padding: 0;\r\n  height: 0;\r\n  border-left: 0;\r\n}\r\n.rate-input-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  box-sizing: border-box;\r\n  flex: 1;\r\n}\r\n.new-currency {\r\n  color: #3b4781;\r\n  border: 1px solid #cacfe7;\r\n  font-size: 0.975rem;\r\n  height: 2rem;\r\n  background: white;\r\n  border-right: 0;\r\n  border-top-right-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n  transition: border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n}\r\n.input-group-prepend span[data-state='focus'] {\r\n  border-color: var(--blue);\r\n}\r\n.input-group-prepend span[data-disabled] {\r\n  background-color: #eceff1;\r\n  border-color: rgba(118, 118, 118, 0.3);\r\n}\r\n@media only screen and (min-width: 1200px) {\r\n  .rateplan-name-container {\r\n    width: 40%;\r\n  }\r\n  .rateplan-container {\r\n    width: 40%;\r\n  }\r\n}\r\n@media only screen and (min-width: 991px) {\r\n  .max-w-300 {\r\n    max-width: 200px;\r\n  }\r\n  .rate-input-container {\r\n    max-width: 150px;\r\n  }\r\n}\r\n@media only screen and (min-width: 991px) and (max-width: 1300px) {\r\n  .rateplan-name-container {\r\n    width: 20%;\r\n  }\r\n}\r\n@media only screen and (max-width: 768px) {\r\n  .booking-btn {\r\n    width: 100%;\r\n  }\r\n}\r\n\r\n.total-nights-container {\r\n  width: max-content;\r\n}\r\n.nightBorder {\r\n  border-left-width: 0;\r\n  border-top-right-radius: 3px !important;\r\n  border-bottom-right-radius: 3px !important;\r\n}\r\n","import { Component, Host, Prop, h, State, Event, EventEmitter, Fragment } from '@stencil/core';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport locales from '@/stores/locales.store';\r\nimport calendar_data from '@/stores/calendar-data';\r\nimport { RatePlan, Variation } from '@/models/property';\r\nimport booking_store, { IRatePlanSelection, reserveRooms, updateRoomParams } from '@/stores/booking.store';\r\n\r\n@Component({\r\n  tag: 'igl-rate-plan',\r\n  styleUrl: 'igl-rate-plan.css',\r\n  scoped: true,\r\n})\r\nexport class IglRatePlan {\r\n  // Used Props with type annotations\r\n  @Prop() ratePlan!: RatePlan;\r\n  @Prop() roomTypeId!: number;\r\n  @Prop() ratePricingMode: Array<{ CODE_NAME: string; CODE_VALUE_EN: string }> = [];\r\n  @Prop() currency!: { symbol: string };\r\n  @Prop() shouldBeDisabled!: boolean;\r\n  @Prop() bookingType: string = 'PLUS_BOOKING';\r\n  @Prop() isBookDisabled: boolean = false;\r\n  @Prop() visibleInventory!: IRatePlanSelection;\r\n\r\n  @State() isInputFocused = false;\r\n\r\n  @Event() gotoSplitPageTwoEvent!: EventEmitter<{ [key: string]: any }>;\r\n\r\n  // Determine if the form inputs should be disabled\r\n  private disableForm(): boolean {\r\n    const { bookingType, shouldBeDisabled, ratePlan, visibleInventory } = this;\r\n    if (bookingType === 'EDIT_BOOKING' && shouldBeDisabled) {\r\n      return false;\r\n    }\r\n    return !ratePlan.is_available_to_book || visibleInventory?.visibleInventory === 0 || !calendar_data.is_frontdesk_enabled;\r\n  }\r\n\r\n  // Handle input change for the rate amount\r\n  private handleInput(event: InputEvent): void {\r\n    const inputElement = event.target as HTMLInputElement;\r\n    const sanitizedValue = inputElement.value.replace(/[^0-9.]/g, '');\r\n    inputElement.value = sanitizedValue;\r\n\r\n    const amount = sanitizedValue ? parseFloat(sanitizedValue) : 0;\r\n    this.updateRateplanSelection({\r\n      is_amount_modified: true,\r\n      rp_amount: amount,\r\n    });\r\n  }\r\n\r\n  // Update the rate plan selection in the booking store\r\n  private updateRateplanSelection(props: Partial<IRatePlanSelection>): void {\r\n    const { roomTypeId, ratePlan } = this;\r\n    const currentSelections = booking_store.ratePlanSelections;\r\n\r\n    booking_store.ratePlanSelections = {\r\n      ...currentSelections,\r\n      [roomTypeId]: {\r\n        ...currentSelections[roomTypeId],\r\n        [ratePlan.id]: {\r\n          ...currentSelections[roomTypeId][ratePlan.id],\r\n          ...props,\r\n        },\r\n      },\r\n    };\r\n  }\r\n\r\n  // Handle changes to select inputs\r\n  private handleDataChange(key: 'adult_child_offering' | 'rate' | 'totalRooms', evt: Event): void {\r\n    const value = (evt.target as HTMLInputElement | HTMLSelectElement).value;\r\n    if (key === 'adult_child_offering') {\r\n      this.handleVariationChange(value);\r\n    } else if (key === 'rate') {\r\n      this.updateRateplanSelection({ view_mode: value as any });\r\n    } else if (key === 'totalRooms') {\r\n      reserveRooms({\r\n        roomTypeId: this.roomTypeId,\r\n        ratePlanId: this.ratePlan.id,\r\n        rooms: Number(value),\r\n      });\r\n    }\r\n  }\r\n\r\n  // Navigate to the next page for booking\r\n  private bookProperty(): void {\r\n    this.handleDataChange('totalRooms', { target: { value: '1' } } as any);\r\n    this.gotoSplitPageTwoEvent.emit({ key: 'gotoSplitPage', data: '' });\r\n  }\r\n\r\n  // Render the rate amount\r\n  private renderRate(): string {\r\n    const { visibleInventory } = this;\r\n    if (!visibleInventory) return '';\r\n    if (visibleInventory.is_amount_modified) {\r\n      return visibleInventory.rp_amount.toString();\r\n    }\r\n    const { selected_variation, view_mode } = visibleInventory;\r\n    const amount = view_mode === '001' ? selected_variation?.discounted_gross_amount : selected_variation?.amount_per_night_gross;\r\n    return amount?.toString() || '';\r\n  }\r\n\r\n  // Format variation for display\r\n  private formatVariation(variation: Variation): string {\r\n    if (!variation) return '';\r\n    const adults = `${variation.adult_nbr} ${variation.adult_nbr === 1 ? locales.entries['Lcz_Adult']?.toLowerCase() : locales.entries['Lcz_Adults']?.toLowerCase()}`;\r\n    const children =\r\n      variation.child_nbr > 0\r\n        ? `${variation.child_nbr} ${variation.child_nbr > 1 ? locales.entries['Lcz_Children']?.toLowerCase() : locales.entries['Lcz_Child']?.toLowerCase()}`\r\n        : '';\r\n    return children ? `${adults} ${children}` : adults;\r\n  }\r\n\r\n  // Get tooltip messages for the rate plan\r\n  private getTooltipMessages(): string | undefined {\r\n    const { ratePlan, visibleInventory } = this;\r\n    const selectedVariation = visibleInventory?.selected_variation;\r\n    if (!selectedVariation) return;\r\n\r\n    const matchingVariation = ratePlan.variations?.find(variation => this.formatVariation(variation) === this.formatVariation(selectedVariation));\r\n\r\n    if (!matchingVariation) return;\r\n\r\n    const cancellationPolicy = matchingVariation.applicable_policies?.find(p => p.type === 'cancelation')?.combined_statement;\r\n    const guaranteePolicy = matchingVariation.applicable_policies?.find(p => p.type === 'guarantee')?.combined_statement;\r\n\r\n    let tooltip = '';\r\n    if (cancellationPolicy) {\r\n      tooltip += `<b><u>Cancellation:</u></b> ${cancellationPolicy}<br/>`;\r\n    }\r\n    if (guaranteePolicy) {\r\n      tooltip += `<b><u>Guarantee:</u></b> ${guaranteePolicy}`;\r\n    }\r\n    return tooltip || undefined;\r\n  }\r\n\r\n  // Handle variation change when a different option is selected\r\n  private async handleVariationChange(value: string): Promise<void> {\r\n    const { ratePlan, roomTypeId } = this;\r\n    const variations = ratePlan.variations || [];\r\n    const selectedVariation = variations.find(v => this.formatVariation(v) === value);\r\n\r\n    if (!selectedVariation) return;\r\n\r\n    updateRoomParams({\r\n      params: { selected_variation: selectedVariation },\r\n      ratePlanId: ratePlan.id,\r\n      roomTypeId,\r\n    });\r\n  }\r\n\r\n  // Reset reserved rooms in the booking store\r\n  private resetReserved(): void {\r\n    const updatedSelections = Object.entries(booking_store.ratePlanSelections).reduce((acc, [roomTypeId, ratePlans]) => {\r\n      acc[roomTypeId] = Object.entries(ratePlans).reduce((rpAcc, [ratePlanId, ratePlan]) => {\r\n        rpAcc[ratePlanId] = { ...ratePlan, reserved: 0 };\r\n        return rpAcc;\r\n      }, {} as any);\r\n      return acc;\r\n    }, {} as any);\r\n    booking_store.ratePlanSelections = updatedSelections;\r\n  }\r\n\r\n  render() {\r\n    const { ratePlan, bookingType, currency, ratePricingMode, visibleInventory, isInputFocused } = this;\r\n    const isAvailableToBook = ratePlan.is_available_to_book;\r\n    const disableForm = this.disableForm();\r\n    const selectedVariation = visibleInventory?.selected_variation;\r\n    const formattedVariations = ratePlan.variations?.map(v => this.formatVariation(v));\r\n\r\n    return (\r\n      <Host>\r\n        <div\r\n          class={`d-flex m-0 p-0 ${isAvailableToBook ? 'flex-column flex-lg-row align-items-lg-center justify-content-lg-between' : 'align-items-center justify-content-between'}`}\r\n        >\r\n          <div class=\"rateplan-name-container d-flex align-items-center\" style={{ gap: '0.5rem' }}>\r\n            {bookingType === 'BAR_BOOKING' ? (\r\n              <Fragment>\r\n                <span class=\"font-weight-bold\">{ratePlan.name.split('/')[0]}</span>\r\n                <span>/{ratePlan.name.split('/')[1]}</span>\r\n              </Fragment>\r\n            ) : (\r\n              <span>{ratePlan.short_name}</span>\r\n            )}\r\n            {isAvailableToBook && <ir-tooltip message={this.getTooltipMessages()}></ir-tooltip>}\r\n          </div>\r\n\r\n          {isAvailableToBook ? (\r\n            <div class=\"d-md-flex justify-content-md-end align-items-md-center flex-fill rateplan-container\">\r\n              <div class=\"mt-1 mt-md-0 flex-fill max-w-300\">\r\n                <fieldset class=\"position-relative\">\r\n                  <select disabled={disableForm} class=\"form-control input-sm\" id={uuidv4()} onChange={evt => this.handleDataChange('adult_child_offering', evt)}>\r\n                    {formattedVariations?.map(variation => (\r\n                      <option value={variation} selected={this.formatVariation(selectedVariation) === variation}>\r\n                        {variation}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </fieldset>\r\n              </div>\r\n              <div class=\"m-0 p-0 mt-1 mt-md-0 d-flex justify-content-between align-items-md-center ml-md-1\">\r\n                <div class=\"d-flex m-0 p-0 rate-total-night-view mt-0\">\r\n                  <fieldset class=\"position-relative has-icon-left m-0 p-0 rate-input-container\">\r\n                    <div class=\"input-group-prepend\">\r\n                      <span data-disabled={disableForm} data-state={isInputFocused ? 'focus' : ''} class=\"input-group-text new-currency\">\r\n                        {currency.symbol}\r\n                      </span>\r\n                    </div>\r\n                    <input\r\n                      onFocus={() => (this.isInputFocused = true)}\r\n                      onBlur={() => (this.isInputFocused = false)}\r\n                      disabled={disableForm}\r\n                      type=\"text\"\r\n                      class=\"form-control pl-0 input-sm rate-input py-0 m-0 rounded-0 rateInputBorder\"\r\n                      value={this.renderRate()}\r\n                      placeholder={locales.entries.Lcz_Rate || 'Rate'}\r\n                      onInput={this.handleInput.bind(this)}\r\n                    />\r\n                  </fieldset>\r\n                  <fieldset class=\"position-relative m-0 total-nights-container p-0\">\r\n                    <select\r\n                      disabled={disableForm}\r\n                      class=\"form-control input-sm m-0 nightBorder rounded-0 py-0\"\r\n                      id={uuidv4()}\r\n                      onChange={evt =>\r\n                        this.updateRateplanSelection({\r\n                          view_mode: (evt.target as HTMLSelectElement).value as any,\r\n                        })\r\n                      }\r\n                    >\r\n                      {ratePricingMode.map(data => (\r\n                        <option value={data.CODE_NAME} selected={visibleInventory.view_mode === data.CODE_NAME}>\r\n                          {data.CODE_VALUE_EN}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </fieldset>\r\n                </div>\r\n\r\n                {(bookingType === 'PLUS_BOOKING' || bookingType === 'ADD_ROOM') && (\r\n                  <div class=\"flex-fill mt-lg-0 ml-1 m-0 mt-md-0 p-0\">\r\n                    <fieldset class=\"position-relative\">\r\n                      <select\r\n                        disabled={visibleInventory.visibleInventory === 0}\r\n                        class=\"form-control input-sm\"\r\n                        id={uuidv4()}\r\n                        onChange={evt => this.handleDataChange('totalRooms', evt)}\r\n                      >\r\n                        {Array.from({ length: (visibleInventory.visibleInventory || 0) + 1 }, (_, i) => i).map(i => (\r\n                          <option value={i} selected={visibleInventory.reserved === i}>\r\n                            {i}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                    </fieldset>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {bookingType === 'EDIT_BOOKING' && (\r\n                <Fragment>\r\n                  <div class=\"m-0 p-0 mt-lg-0 ml-md-1 mt-md-1 d-none d-md-block\">\r\n                    <fieldset class=\"position-relative\">\r\n                      <input\r\n                        disabled={disableForm}\r\n                        type=\"radio\"\r\n                        name=\"ratePlanGroup\"\r\n                        value=\"1\"\r\n                        onChange={() => {\r\n                          this.resetReserved();\r\n                          reserveRooms({\r\n                            roomTypeId: this.roomTypeId,\r\n                            ratePlanId: this.ratePlan.id,\r\n                            rooms: 1,\r\n                            guest: [\r\n                              {\r\n                                name: booking_store.guest.name,\r\n                                unit: null,\r\n                                bed_preference: this.visibleInventory.roomtype.is_bed_configuration_enabled ? booking_store.guest.bed_preference : null,\r\n                                infant_nbr: this.visibleInventory.selected_variation.child_nbr > 0 ? booking_store.guest.infant_nbr : null,\r\n                              },\r\n                            ],\r\n                          });\r\n                        }}\r\n                        checked={visibleInventory.reserved === 1}\r\n                      />\r\n                    </fieldset>\r\n                  </div>\r\n                  <button\r\n                    disabled={disableForm}\r\n                    type=\"button\"\r\n                    class=\"btn btn-primary booking-btn mt-lg-0 btn-sm ml-md-1 mt-1 d-md-none\"\r\n                    onClick={() => {\r\n                      this.resetReserved();\r\n                      reserveRooms({\r\n                        roomTypeId: this.roomTypeId,\r\n                        ratePlanId: this.ratePlan.id,\r\n                        rooms: 1,\r\n                        guest: [\r\n                          {\r\n                            name: booking_store.guest.name,\r\n                            unit: null,\r\n                            bed_preference: this.visibleInventory.roomtype.is_bed_configuration_enabled ? booking_store.guest.bed_preference : null,\r\n                            infant_nbr: this.visibleInventory.selected_variation.child_nbr > 0 ? booking_store.guest.infant_nbr : null,\r\n                          },\r\n                        ],\r\n                      });\r\n                      this.bookProperty();\r\n                    }}\r\n                  >\r\n                    {visibleInventory.reserved === 1 ? locales.entries.Lcz_Current : locales.entries.Lcz_Select}\r\n                  </button>\r\n                </Fragment>\r\n              )}\r\n\r\n              {(bookingType === 'BAR_BOOKING' || bookingType === 'SPLIT_BOOKING') && (\r\n                <button\r\n                  disabled={disableForm || (bookingType === 'SPLIT_BOOKING' && this.isBookDisabled)}\r\n                  type=\"button\"\r\n                  class=\"btn btn-primary booking-btn mt-lg-0 btn-sm ml-md-1 mt-1\"\r\n                  onClick={() => this.bookProperty()}\r\n                >\r\n                  {locales.entries.Lcz_Book}\r\n                </button>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <p class=\"text-danger m-0 p-0\">{locales.entries['Lcz_NotAvailable'] || 'Not available'}</p>\r\n          )}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n.margin-bottom-8 {\r\n  margin-bottom: 8px !important;\r\n}\r\n","import { RoomType } from '@/models/property';\r\nimport { getVisibleInventory } from '@/stores/booking.store';\r\nimport { Component, Host, h, Prop, Event, EventEmitter, State } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'igl-room-type',\r\n  styleUrl: 'igl-room-type.css',\r\n  scoped: true,\r\n})\r\nexport class IglRoomType {\r\n  @Prop() roomType: RoomType;\r\n  @Prop() bookingType = 'PLUS_BOOKING';\r\n  @Prop() dateDifference: number;\r\n  @Prop() ratePricingMode = [];\r\n  @Prop() roomInfoId: number | null = null;\r\n  @Prop() currency;\r\n  @Prop() initialRoomIds: any;\r\n  @Prop() isBookDisabled: boolean;\r\n\r\n  @State() selectedRooms: number[] = [];\r\n  @State() totalRooms: number;\r\n  @State() roomsDistributions: number[] = [];\r\n\r\n  @Event() dataUpdateEvent: EventEmitter<{ [key: string]: any }>;\r\n\r\n  private validBookingTypes = ['PLUS_BOOKING', 'ADD_ROOM', 'EDIT_BOOKING', 'SPLIT_BOOKING'];\r\n\r\n  render() {\r\n    const isValidBookingType = this.validBookingTypes.includes(this.bookingType);\r\n\r\n    return (\r\n      <Host>\r\n        {isValidBookingType && this.roomType.rateplans?.length > 0 && <div class=\"font-weight-bold font-medium-1 margin-bottom-8 \">{this.roomType.name}</div>}\r\n        {this.roomType.rateplans?.map(ratePlan => {\r\n          if (!!ratePlan.variations) {\r\n            let shouldBeDisabled = this.roomInfoId && this.roomInfoId === this.roomType.id;\r\n            // let roomId = -1;\r\n            // if (shouldBeDisabled && this.initialRoomIds) {\r\n            //   roomId = this.initialRoomIds.roomId;\r\n            // }\r\n            const visibleInventory = getVisibleInventory(this.roomType.id, ratePlan.id);\r\n            console.log(visibleInventory);\r\n            return (\r\n              <igl-rate-plan\r\n                // is_bed_configuration_enabled={this.roomType.is_bed_configuration_enabled}\r\n                // index={index}\r\n                isBookDisabled={this.isBookDisabled}\r\n                visibleInventory={visibleInventory}\r\n                key={`rate-plan-${ratePlan.id}`}\r\n                ratePricingMode={this.ratePricingMode}\r\n                class={isValidBookingType ? '' : ''}\r\n                currency={this.currency}\r\n                // dateDifference={this.dateDifference}\r\n                ratePlan={ratePlan}\r\n                roomTypeId={this.roomType.id}\r\n                // totalAvailableRooms={this.roomsDistributions[index]}\r\n                bookingType={this.bookingType}\r\n                shouldBeDisabled={shouldBeDisabled}\r\n                // physicalrooms={this.roomType.physicalrooms}\r\n                // defaultRoomId={roomId}\r\n              ></igl-rate-plan>\r\n            );\r\n          }\r\n          return null;\r\n        })}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  position: relative;\r\n}\r\n.selected {\r\n  color: #fff;\r\n  text-decoration: none;\r\n  background-color: #666ee8;\r\n}\r\ninput {\r\n  width: 100%;\r\n  position: relative;\r\n  border-top-left-radius: 0px !important;\r\n  border-left: 0 !important;\r\n  border-bottom-left-radius: 0px !important;\r\n}\r\nlabel {\r\n  margin: 0;\r\n  border-top-right-radius: 0px !important;\r\n  border-right: 0 !important;\r\n  border-bottom-right-radius: 0px !important;\r\n  width: fit-content;\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  padding-right: 3px !important;\r\n  justify-content: center;\r\n  transition: border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n}\r\nlabel[data-state='focused'] {\r\n  border-color: var(--blue);\r\n}\r\n\r\n.combobox {\r\n  margin: 0;\r\n  top: 30px;\r\n  min-width: 100%;\r\n  width: max-content;\r\n  display: block;\r\n  z-index: 10000;\r\n  padding: 1px;\r\n  background: white;\r\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\r\n  padding: 5px 0;\r\n  max-height: 250px;\r\n  overflow-y: auto;\r\n}\r\n.dropdown-item {\r\n  cursor: pointer;\r\n}\r\nbutton {\r\n  all: unset;\r\n  right: 4px;\r\n}\r\n.combobox p,\r\nspan,\r\nloader-container {\r\n  padding: 5px 16px;\r\n  margin: 0px;\r\n  margin-top: 2px;\r\n  width: 100%;\r\n}\r\n.combobox p {\r\n  cursor: pointer;\r\n}\r\n.combobox p:hover {\r\n  background: #f4f5fa;\r\n}\r\n\r\n.combobox p[data-selected],\r\n.combobox p[data-selected]:hover {\r\n  color: #fff;\r\n  text-decoration: none;\r\n  background-color: #666ee8;\r\n}\r\n.loader {\r\n  width: 14px;\r\n  height: 14px;\r\n  border: 2px solid #0f0f0f;\r\n  border-bottom-color: transparent;\r\n  border-radius: 50%;\r\n  display: inline-block;\r\n  box-sizing: border-box;\r\n  animation: rotation 1s linear infinite;\r\n}\r\n\r\n@keyframes rotation {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n","import { Component, Host, Prop, State, h, Event, EventEmitter, Listen, Element, Fragment } from '@stencil/core';\r\nimport { v4 } from 'uuid';\r\nimport { BookingService } from '../../services/booking.service';\r\nimport { IToast } from '../ir-toast/toast';\r\nimport locales from '@/stores/locales.store';\r\n\r\n@Component({\r\n  tag: 'ir-autocomplete',\r\n  styleUrl: 'ir-autocomplete.css',\r\n  scoped: true,\r\n})\r\nexport class IrAutocomplete {\r\n  @Prop() duration: number = 300;\r\n  @Prop() placeholder: string = '';\r\n  @Prop() propertyId: number;\r\n  @Prop() isSplitBooking: boolean = false;\r\n  @Prop() type: 'email' | 'text' | 'password' | 'number' | 'search' = 'text';\r\n  @Prop() name: string = '';\r\n  @Prop() inputId: string = v4();\r\n  @Prop() required: boolean = false;\r\n  @Prop() disabled: boolean = false;\r\n  @Prop() value: string;\r\n  @Prop() from_date: string = '';\r\n  @Prop() to_date: string = '';\r\n  @Prop() danger_border: boolean;\r\n\r\n  @State() inputValue: string = '';\r\n  @State() data: any[] = [];\r\n  @State() selectedIndex: number = -1;\r\n  @State() isComboBoxVisible: boolean = false;\r\n  @State() isLoading: boolean = true;\r\n  @State() isItemSelected: boolean;\r\n  @State() inputFocused: boolean = false;\r\n\r\n  @Event({ bubbles: true, composed: true }) comboboxValue: EventEmitter<{ key: string; data: unknown }>;\r\n  @Event() inputCleared: EventEmitter<null>;\r\n  @Event({ bubbles: true, composed: true }) toast: EventEmitter<IToast>;\r\n\r\n  @Element() el: HTMLElement;\r\n  private inputRef: HTMLInputElement;\r\n  private debounceTimer: any;\r\n  private bookingService = new BookingService();\r\n  private no_result_found = '';\r\n  componentWillLoad() {\r\n    this.no_result_found = locales.entries.Lcz_NoResultsFound;\r\n  }\r\n\r\n  handleKeyDown(event: KeyboardEvent) {\r\n    const dataSize = this.data.length;\r\n    const itemHeight = this.getHeightOfPElement();\r\n    if (dataSize > 0) {\r\n      switch (event.key) {\r\n        case 'ArrowUp':\r\n          event.preventDefault();\r\n          this.selectedIndex = (this.selectedIndex - 1 + dataSize) % dataSize;\r\n          this.adjustScrollPosition(itemHeight);\r\n          break;\r\n        case 'ArrowDown':\r\n          event.preventDefault();\r\n          this.selectedIndex = (this.selectedIndex + 1) % dataSize;\r\n          this.adjustScrollPosition(itemHeight);\r\n          break;\r\n        case 'Enter':\r\n        case ' ':\r\n        case 'ArrowRight':\r\n          event.preventDefault();\r\n          this.selectItem(this.selectedIndex);\r\n          break;\r\n        case 'Escape':\r\n          this.inputRef?.blur();\r\n          this.isComboBoxVisible = false;\r\n          break;\r\n      }\r\n    }\r\n  }\r\n  getHeightOfPElement() {\r\n    const combobox = this.el.querySelector('.combobox');\r\n    if (combobox) {\r\n      const pItem = combobox.querySelector('p');\r\n      return pItem ? pItem.offsetHeight : 0;\r\n    }\r\n    return 0;\r\n  }\r\n  adjustScrollPosition(itemHeight, visibleHeight = 250) {\r\n    const combobox = this.el.querySelector('.combobox');\r\n    if (combobox) {\r\n      const margin = 2;\r\n      const itemTotalHeight = itemHeight + margin;\r\n      const selectedPosition = itemTotalHeight * this.selectedIndex;\r\n      let newScrollTop = selectedPosition - visibleHeight / 2 + itemHeight / 2;\r\n      newScrollTop = Math.max(0, Math.min(newScrollTop, combobox.scrollHeight - visibleHeight));\r\n      combobox.scrollTo({\r\n        top: newScrollTop,\r\n        behavior: 'auto',\r\n      });\r\n    }\r\n  }\r\n\r\n  selectItem(index) {\r\n    if (this.data[index]) {\r\n      this.isItemSelected = true;\r\n      this.comboboxValue.emit({ key: 'select', data: this.data[index] });\r\n      this.inputValue = '';\r\n      this.resetCombobox();\r\n    }\r\n  }\r\n\r\n  debounceFetchData() {\r\n    clearTimeout(this.debounceTimer);\r\n    this.debounceTimer = setTimeout(() => {\r\n      this.fetchData();\r\n    }, this.duration);\r\n  }\r\n\r\n  async fetchData() {\r\n    try {\r\n      this.isLoading = true;\r\n      let data = [];\r\n      if (!this.isSplitBooking) {\r\n        data = await this.bookingService.fetchExposedGuest(this.inputValue, this.propertyId);\r\n      } else {\r\n        if (this.inputValue.split(' ').length === 1) {\r\n          data = await this.bookingService.fetchExposedBookings(this.inputValue, this.propertyId, this.from_date, this.to_date);\r\n        }\r\n      }\r\n      this.data = data;\r\n      if (!this.isComboBoxVisible) {\r\n        this.isComboBoxVisible = true;\r\n      }\r\n    } catch (error) {\r\n      console.log('error', error);\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n\r\n  handleInputChange(event: Event) {\r\n    this.inputValue = (event.target as HTMLInputElement).value;\r\n    if (this.inputValue) {\r\n      this.debounceFetchData();\r\n    } else {\r\n      clearTimeout(this.debounceTimer);\r\n      this.resetCombobox(false);\r\n    }\r\n  }\r\n\r\n  @Listen('click', { target: 'document' })\r\n  handleDocumentClick(event: MouseEvent) {\r\n    const target = event.target as HTMLElement;\r\n    if (!this.el.contains(target)) {\r\n      this.isComboBoxVisible = false;\r\n    }\r\n  }\r\n  handleBlur() {\r\n    this.inputFocused = false;\r\n    setTimeout(() => {\r\n      if (this.isDropdownItem(document.activeElement)) {\r\n        return;\r\n      }\r\n      if (this.isSplitBooking) {\r\n        if (!this.isItemSelected) {\r\n          if (this.data.length > 0) {\r\n            this.comboboxValue.emit({ key: 'blur', data: this.inputValue });\r\n          } else {\r\n            if (this.inputValue !== '') {\r\n              this.toast.emit({\r\n                type: 'error',\r\n                description: '',\r\n                title: `The Booking #${this.inputValue} is not Available`,\r\n                position: 'top-right',\r\n              });\r\n              this.inputCleared.emit();\r\n            }\r\n          }\r\n          this.inputValue = '';\r\n          this.resetCombobox();\r\n        } else {\r\n          this.isItemSelected = false;\r\n        }\r\n      } else {\r\n        if (!this.isItemSelected) {\r\n          this.comboboxValue.emit({ key: 'blur', data: this.inputValue });\r\n          this.inputValue = '';\r\n          this.resetCombobox();\r\n        } else {\r\n          this.isItemSelected = false;\r\n        }\r\n      }\r\n    }, 200);\r\n  }\r\n  isDropdownItem(element) {\r\n    return element && element.closest('.combobox');\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    clearTimeout(this.debounceTimer);\r\n    this.inputRef?.removeEventListener('blur', this.handleBlur);\r\n    this.inputRef?.removeEventListener('click', this.selectItem);\r\n    this.inputRef?.removeEventListener('keydown', this.handleKeyDown);\r\n    this.inputRef?.removeEventListener('focus', this.handleFocus);\r\n  }\r\n  handleItemKeyDown(event: KeyboardEvent, index: number) {\r\n    if (event.key === 'Enter' || event.key === ' ' || event.key === 'ArrowRight') {\r\n      this.selectItem(index);\r\n      event.preventDefault();\r\n    } else if (event.key === 'Escape') {\r\n      this.isComboBoxVisible = false;\r\n      this.inputRef?.blur();\r\n      event.preventDefault();\r\n    } else {\r\n      return;\r\n    }\r\n  }\r\n  renderDropdown() {\r\n    if (this.inputValue !== '') {\r\n      return (\r\n        <div class={`position-absolute border rounded combobox`}>\r\n          {this.data?.map((d, index) => (\r\n            <p role=\"button\" onKeyDown={e => this.handleItemKeyDown(e, index)} data-selected={this.selectedIndex === index} tabIndex={0} onClick={() => this.selectItem(index)}>\r\n              {this.isSplitBooking ? (\r\n                <Fragment>{`${d.booking_nbr} ${d.guest.first_name} ${d.guest.last_name}`}</Fragment>\r\n              ) : (\r\n                <div class={'d-flex align-items-center flex-fill'}>\r\n                  <p class={'p-0 m-0'}>\r\n                    {`${d.email}`} <span class={'p-0 m-0'}>{` - ${d.first_name} ${d.last_name}`}</span>\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </p>\r\n          ))}\r\n          {this.isLoading && (\r\n            <div class=\"loader-container d-flex align-items-center justify-content-center\">\r\n              <div class=\"loader\"></div>\r\n            </div>\r\n          )}\r\n          {this.data.length === 0 && !this.isLoading && <span class={'text-center'}>{this.no_result_found}</span>}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n  handleFocus() {\r\n    this.isComboBoxVisible = true;\r\n    this.inputFocused = true;\r\n  }\r\n  clearInput() {\r\n    this.inputValue = '';\r\n    this.resetCombobox();\r\n    this.inputCleared.emit(null);\r\n  }\r\n  resetCombobox(withblur: boolean = true) {\r\n    if (withblur) {\r\n      this.inputRef?.blur();\r\n    }\r\n    this.data = [];\r\n    this.selectedIndex = -1;\r\n    this.isComboBoxVisible = false;\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class={'d-flex align-items-center '}>\r\n          <label data-state={this.inputFocused ? 'focused' : 'blured'} htmlFor={this.inputId} class={`form-control input-sm ${this.danger_border && 'border-danger'}`}>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"12\" width=\"12\" viewBox=\"0 0 512 512\">\r\n              <path\r\n                fill=\"currentColor\"\r\n                d=\"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z\"\r\n              />\r\n            </svg>\r\n          </label>\r\n          <input\r\n            required={this.required}\r\n            disabled={this.disabled}\r\n            id={this.inputId}\r\n            onKeyDown={this.handleKeyDown.bind(this)}\r\n            class={`form-control input-sm flex-full ${this.danger_border && 'border-danger'}`}\r\n            type={this.type}\r\n            name={this.name}\r\n            value={this.value || this.inputValue}\r\n            placeholder={this.placeholder}\r\n            onBlur={this.handleBlur.bind(this)}\r\n            autoComplete=\"off\"\r\n            onInput={this.handleInputChange.bind(this)}\r\n            onFocus={this.handleFocus.bind(this)}\r\n            ref={el => (this.inputRef = el)}\r\n          />\r\n          {this.inputValue && (\r\n            <button type=\"button\" class={'position-absolute d-flex align-items-center justify-content-center '} onClick={this.clearInput.bind(this)}>\r\n              <p class={'sr-only'}>clear input</p>\r\n              <svg width=\"15\" height=\"15\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path\r\n                  d=\"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z\"\r\n                  fill=\"currentColor\"\r\n                  fill-rule=\"evenodd\"\r\n                  clip-rule=\"evenodd\"\r\n                ></path>\r\n              </svg>\r\n            </button>\r\n          )}\r\n        </div>\r\n        {this.isComboBoxVisible && this.renderDropdown()}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","import axios from 'axios';\r\nimport { IPayment } from '@/models/booking.dto';\r\nexport interface IPaymentAction {\r\n  amount: number;\r\n  currency: {\r\n    code: string;\r\n    id: number;\r\n    symbol: string;\r\n  };\r\n  due_on: string;\r\n  type: 'overdue' | 'future';\r\n}\r\nexport class PaymentService {\r\n  public async AddPayment(payment: IPayment, book_nbr: string): Promise<any> {\r\n    try {\r\n      const { data } = await axios.post(`/Do_Payment`, { payment: { ...payment, book_nbr } });\r\n      if (data.ExceptionMsg !== '') {\r\n        throw new Error(data.ExceptionMsg);\r\n      }\r\n      return data.My_Result;\r\n    } catch (error) {\r\n      console.log(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n\r\n  public async CancelPayment(id: number): Promise<any> {\r\n    try {\r\n      const { data } = await axios.post(`/Cancel_Payment`, { id });\r\n      if (data.ExceptionMsg !== '') {\r\n        throw new Error(data.ExceptionMsg);\r\n      }\r\n      return data.My_Result;\r\n    } catch (error) {\r\n      console.log(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n  public async GetExposedCancelationDueAmount(params: { booking_nbr: string; currency_id: number }): Promise<IPaymentAction[]> {\r\n    try {\r\n      const { data } = await axios.post(`/Get_Exposed_Cancelation_Due_Amount`, params);\r\n      if (data.ExceptionMsg !== '') {\r\n        throw new Error(data.ExceptionMsg);\r\n      }\r\n      return data.My_Result;\r\n    } catch (error) {\r\n      console.log(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n}\r\n",":host {\r\n  overflow-x: hidden;\r\n  --ir-dialog-max-width: 20rem;\r\n}\r\n.confirmed {\r\n  color: #fff;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.bg-ir-green {\r\n  background: #629a4c;\r\n  padding: 0.2rem 0.3rem;\r\n  /* height: 28px; */\r\n  /* padding-top: 0 !important;\r\n  padding-bottom: 0 !important ; */\r\n}\r\n.h-28 {\r\n  height: 2rem;\r\n}\r\n.mx-01 {\r\n  --m: 5px;\r\n  margin-right: var(--m) !important;\r\n  margin-left: var(--m) !important;\r\n}\r\n.bg-ir-red {\r\n  background: #ff4961;\r\n  padding: 0.2rem 0.3rem;\r\n  /* height: 28px; */\r\n  /* padding-top: 0 !important;\r\n  padding-bottom: 0 !important ; */\r\n}\r\n.bg-ir-orange {\r\n  background: #ff9149;\r\n  padding: 0.2rem 0.3rem;\r\n  /* height: 28px; */\r\n  /* padding-top: 0 !important;\r\n  padding-bottom: 0 !important ; */\r\n}\r\n.date-margin {\r\n  margin-right: 5px;\r\n}\r\n.pickup-margin {\r\n  margin-bottom: 7px !important;\r\n}\r\n.header-date {\r\n  padding-left: 5px !important;\r\n}\r\n\r\n.pointer {\r\n  cursor: pointer;\r\n}\r\n\r\n:root {\r\n  --sidebar-width: 50rem;\r\n}\r\n.loading-container {\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.sm-padding-right {\r\n  padding-right: 0.2rem;\r\n}\r\n.sm-padding-left {\r\n  padding-left: 0.2rem;\r\n}\r\n.sm-padding-top {\r\n  padding-top: 0.2rem;\r\n}\r\n.sm-padding-bottom {\r\n  padding-bottom: 0.2rem;\r\n}\r\n\r\n.info-notes {\r\n  list-style: none;\r\n  padding-left: 0;\r\n}\r\n.light-blue-bg {\r\n  background-color: #acecff;\r\n  padding: 0.2rem 0.3rem;\r\n}\r\n.iframeHeight {\r\n  height: 17.5rem;\r\n}\r\n.btn-outline {\r\n  background: transparent;\r\n  border: 1px solid #104064;\r\n  color: #104064;\r\n}\r\n.btn-outline:hover,\r\n.btn-outline:active {\r\n  background: #104064;\r\n  color: white;\r\n}\r\n.dialog-title {\r\n  width: fit-content;\r\n}\r\n.list-title {\r\n  margin: 0;\r\n  padding: 0;\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n  width: fit-content;\r\n}\r\n.list-item {\r\n  margin: 0;\r\n  padding: 0;\r\n  font-size: 14px;\r\n  margin-left: 5px;\r\n  width: fit-content;\r\n}\r\n.list-item.green {\r\n  color: #629a4c;\r\n  font-weight: 600;\r\n}\r\n.list-item.red {\r\n  color: #ff4961;\r\n  font-weight: 600;\r\n}\r\n","import { Component, Listen, h, Prop, Watch, State, Event, EventEmitter, Element, Fragment } from '@stencil/core';\r\nimport { _formatDate, _formatTime } from './functions';\r\nimport { Booking, ExtraService, Guest, IPmsLog, Room } from '@/models/booking.dto';\r\nimport axios from 'axios';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport { IglBookPropertyPayloadAddRoom, TIglBookPropertyPayload } from '@/models/igl-book-property';\r\nimport { RoomService } from '@/services/room.service';\r\nimport locales, { ILocale } from '@/stores/locales.store';\r\nimport { IToast } from '../ir-toast/toast';\r\nimport calendar_data from '@/stores/calendar-data';\r\nimport { ICountry } from '@/models/IBooking';\r\nimport { colorVariants } from '../ui/ir-icons/icons';\r\nimport { getPrivateNote } from '@/utils/booking';\r\nimport { IPaymentAction, PaymentService } from '@/services/payment.service';\r\nimport Token from '@/models/Token';\r\n@Component({\r\n  tag: 'ir-booking-details',\r\n  styleUrl: 'ir-booking-details.css',\r\n  scoped: true,\r\n})\r\nexport class IrBookingDetails {\r\n  @Element() element: HTMLElement;\r\n  // Setup Data\r\n  @Prop() language: string = '';\r\n  @Prop() ticket: string = '';\r\n  @Prop() bookingNumber: string = '';\r\n  @Prop() propertyid: number;\r\n  @Prop() is_from_front_desk = false;\r\n  @Prop() p: string;\r\n  // Booleans Conditions\r\n  @Prop() hasPrint: boolean = false;\r\n  @Prop() hasReceipt: boolean = false;\r\n  @Prop() hasDelete: boolean = false;\r\n  @Prop() hasMenu: boolean = false;\r\n\r\n  // Room Booleans\r\n  @Prop() hasRoomEdit: boolean = false;\r\n  @Prop() hasRoomDelete: boolean = false;\r\n  @Prop() hasRoomAdd: boolean = false;\r\n  @Prop() hasCheckIn: boolean = false;\r\n  @Prop() hasCheckOut: boolean = false;\r\n  @Prop() hasCloseButton = false;\r\n\r\n  @State() bookingItem: TIglBookPropertyPayload | null = null;\r\n  @State() statusData = [];\r\n  // Temp Status Before Save\r\n  @State() tempStatus: string = null;\r\n\r\n  @State() showPaymentDetails: any;\r\n  @State() bookingData: Booking;\r\n  @State() countryNodeList: ICountry[];\r\n  @State() calendarData: any = {};\r\n  // Guest Data\r\n  @State() guestData: Guest = null;\r\n  @State() defaultTexts: ILocale;\r\n  // Rerender Flag\r\n  @State() rerenderFlag = false;\r\n  @State() sidebarState: 'guest' | 'pickup' | 'extra_note' | 'extra_service' | null = null;\r\n  @State() isUpdateClicked = false;\r\n\r\n  @State() pms_status: IPmsLog;\r\n  @State() isPMSLogLoading: boolean = false;\r\n  @State() userCountry: ICountry | null = null;\r\n  @State() paymentActions: IPaymentAction[];\r\n  @State() property_id: number;\r\n  @State() selectedService: ExtraService;\r\n  // Payment Event\r\n  @Event() toast: EventEmitter<IToast>;\r\n  @Event() bookingChanged: EventEmitter<Booking>;\r\n  @Event() closeSidebar: EventEmitter<null>;\r\n\r\n  private bookingService = new BookingService();\r\n  private roomService = new RoomService();\r\n  private paymentService = new PaymentService();\r\n  private token = new Token();\r\n\r\n  private dialogRef: HTMLIrDialogElement;\r\n  private printingBaseUrl = 'https://gateway.igloorooms.com/PrintBooking/%1/printing?id=%2';\r\n  private confirmationBG = {\r\n    '001': 'bg-ir-orange',\r\n    '002': 'bg-ir-green',\r\n    '003': 'bg-ir-red',\r\n    '004': 'bg-ir-red',\r\n  };\r\n\r\n  componentWillLoad() {\r\n    if (this.ticket !== '') {\r\n      this.token.setToken(this.ticket);\r\n      this.initializeApp();\r\n    }\r\n  }\r\n\r\n  @Watch('ticket')\r\n  ticketChanged(newValue: string, oldValue: string) {\r\n    if (newValue === oldValue) {\r\n      return;\r\n    }\r\n    this.token.setToken(this.ticket);\r\n    this.initializeApp();\r\n  }\r\n\r\n  @Listen('clickHanlder')\r\n  handleIconClick(e: CustomEvent) {\r\n    const target = e.target as HTMLIrButtonElement;\r\n    switch (target.id) {\r\n      case 'pickup':\r\n        this.sidebarState = 'pickup';\r\n        return;\r\n      case 'close':\r\n        this.closeSidebar.emit(null);\r\n        return;\r\n      case 'print':\r\n        this.openPrintingScreen();\r\n        return;\r\n      case 'receipt':\r\n        this.openPrintingScreen('invoice');\r\n        return;\r\n      case 'book-delete':\r\n        return;\r\n      case 'menu':\r\n        window.location.href = 'https://x.igloorooms.com/manage/acbookinglist.aspx';\r\n        return;\r\n      case 'room-add':\r\n        (this.bookingItem as IglBookPropertyPayloadAddRoom) = {\r\n          ID: '',\r\n          NAME: this.bookingData.guest.last_name,\r\n          EMAIL: this.bookingData.guest.email,\r\n          PHONE: this.bookingData.guest.mobile,\r\n          REFERENCE_TYPE: '',\r\n          FROM_DATE: this.bookingData.from_date,\r\n          ARRIVAL: this.bookingData.arrival,\r\n          TO_DATE: this.bookingData.to_date,\r\n          TITLE: `${locales.entries.Lcz_AddingUnitToBooking}# ${this.bookingData.booking_nbr}`,\r\n          defaultDateRange: {\r\n            fromDate: new Date(this.bookingData.from_date),\r\n            fromDateStr: '',\r\n            toDate: new Date(this.bookingData.to_date),\r\n            toDateStr: '',\r\n            dateDifference: 0,\r\n            message: '',\r\n          },\r\n          event_type: 'ADD_ROOM',\r\n          booking: this.bookingData,\r\n          BOOKING_NUMBER: this.bookingData.booking_nbr,\r\n          ADD_ROOM_TO_BOOKING: this.bookingData.booking_nbr,\r\n          GUEST: this.bookingData.guest,\r\n          message: this.bookingData.remark,\r\n          SOURCE: this.bookingData.source,\r\n          ROOMS: this.bookingData.rooms,\r\n        };\r\n        return;\r\n      case 'extra_service_btn':\r\n        this.sidebarState = 'extra_service';\r\n        return;\r\n      case 'add-payment':\r\n        return;\r\n    }\r\n  }\r\n\r\n  @Listen('editSidebar')\r\n  handleEditSidebar() {\r\n    this.sidebarState = 'guest';\r\n  }\r\n  @Listen('resetExposedCancelationDueAmount')\r\n  async handleResetExposedCancelationDueAmount(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    //TODO: Payment action\r\n    const paymentActions = await this.paymentService.GetExposedCancelationDueAmount({ booking_nbr: this.bookingData.booking_nbr, currency_id: this.bookingData.currency.id });\r\n    this.paymentActions = [...paymentActions];\r\n  }\r\n  @Listen('selectChange')\r\n  handleSelectChange(e: CustomEvent<any>) {\r\n    e.stopPropagation();\r\n    e.stopImmediatePropagation();\r\n    const target = e.target;\r\n    this.tempStatus = (target as any).selectedValue;\r\n  }\r\n  @Listen('editInitiated')\r\n  handleEditInitiated(e: CustomEvent<TIglBookPropertyPayload>) {\r\n    this.bookingItem = e.detail;\r\n  }\r\n\r\n  @Listen('resetBookingData')\r\n  async handleResetBookingData(e: CustomEvent<Booking | null>) {\r\n    e.stopPropagation();\r\n    e.stopImmediatePropagation();\r\n    if (e.detail) {\r\n      return (this.bookingData = e.detail);\r\n    }\r\n    await this.resetBookingData();\r\n  }\r\n  @Listen('editExtraService')\r\n  handleEditExtraService(e: CustomEvent) {\r\n    this.selectedService = e.detail;\r\n    this.sidebarState = 'extra_service';\r\n  }\r\n\r\n  private setRoomsData(roomServiceResp) {\r\n    let roomsData: { [key: string]: any }[] = new Array();\r\n    if (roomServiceResp.My_Result?.roomtypes?.length) {\r\n      roomsData = roomServiceResp.My_Result.roomtypes;\r\n      roomServiceResp.My_Result.roomtypes.forEach(roomCategory => {\r\n        roomCategory.expanded = true;\r\n      });\r\n    }\r\n    this.calendarData.roomsInfo = roomsData;\r\n  }\r\n  private async initializeApp() {\r\n    try {\r\n      const [roomResponse, languageTexts, countriesList, bookingDetails] = await Promise.all([\r\n        this.roomService.getExposedProperty({ id: this.propertyid || 0, language: this.language, aname: this.p }),\r\n        this.roomService.fetchLanguage(this.language),\r\n        this.bookingService.getCountries(this.language),\r\n        this.bookingService.getExposedBooking(this.bookingNumber, this.language),\r\n      ]);\r\n      this.property_id = roomResponse?.My_Result?.id;\r\n      //TODO:Reenable payment actions\r\n      if (bookingDetails?.booking_nbr && bookingDetails?.currency?.id) {\r\n        this.paymentService\r\n          .GetExposedCancelationDueAmount({\r\n            booking_nbr: bookingDetails.booking_nbr,\r\n            currency_id: bookingDetails.currency.id,\r\n          })\r\n          .then(res => {\r\n            this.paymentActions = res;\r\n          });\r\n      } else {\r\n        console.warn('Booking details are incomplete for payment actions.');\r\n      }\r\n      if (!locales?.entries) {\r\n        locales.entries = languageTexts.entries;\r\n        locales.direction = languageTexts.direction;\r\n      }\r\n      this.defaultTexts = languageTexts;\r\n      this.countryNodeList = countriesList;\r\n      const guestCountryId = bookingDetails?.guest?.country_id;\r\n      this.userCountry = guestCountryId ? this.countryNodeList.find(country => country.id === guestCountryId) || null : null;\r\n      const myResult = roomResponse?.My_Result;\r\n      if (myResult) {\r\n        const { allowed_payment_methods: paymentMethods, currency, allowed_booking_sources, adult_child_constraints, calendar_legends, aname } = myResult;\r\n        this.printingBaseUrl = this.printingBaseUrl.replace('%1', aname).replace('%2', this.bookingNumber);\r\n        this.calendarData = {\r\n          currency,\r\n          allowed_booking_sources,\r\n          adult_child_constraints,\r\n          legendData: calendar_legends,\r\n        };\r\n        this.setRoomsData(roomResponse);\r\n        const paymentCodesToShow = ['001', '004'];\r\n        this.showPaymentDetails = paymentMethods?.some(method => paymentCodesToShow.includes(method.code));\r\n      } else {\r\n        console.warn(\"Room response is missing 'My_Result'.\");\r\n      }\r\n\r\n      // Set guest and booking data\r\n      this.guestData = bookingDetails.guest;\r\n      this.bookingData = bookingDetails;\r\n    } catch (error) {\r\n      console.error('Error initializing app:', error);\r\n    }\r\n  }\r\n\r\n  private async updateStatus() {\r\n    if (this.tempStatus !== '' && this.tempStatus !== null) {\r\n      try {\r\n        this.isUpdateClicked = true;\r\n        await axios.post(`/Change_Exposed_Booking_Status`, {\r\n          book_nbr: this.bookingNumber,\r\n          status: this.tempStatus,\r\n        });\r\n        this.toast.emit({\r\n          type: 'success',\r\n          description: '',\r\n          title: locales.entries.Lcz_StatusUpdatedSuccessfully,\r\n          position: 'top-right',\r\n        });\r\n        await this.resetBookingData();\r\n      } catch (error) {\r\n        console.log(error);\r\n      } finally {\r\n        this.isUpdateClicked = false;\r\n      }\r\n    } else {\r\n      this.toast.emit({\r\n        type: 'error',\r\n        description: '',\r\n        title: locales.entries.Lcz_SelectStatus,\r\n        position: 'top-right',\r\n      });\r\n    }\r\n  }\r\n  private async openPMSLogsDialog() {\r\n    try {\r\n      this.dialogRef?.openModal();\r\n      if (!this.pms_status) {\r\n        this.isPMSLogLoading = true;\r\n        this.pms_status = await this.bookingService.fetchPMSLogs(this.bookingData.booking_nbr);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      if (this.isPMSLogLoading) {\r\n        this.isPMSLogLoading = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  private async openPrintingScreen(mode: 'invoice' | 'print' = 'print', version: 'old' | 'new' = 'new') {\r\n    if (version === 'old') {\r\n      if (mode === 'invoice') {\r\n        return window.open(`https://x.igloorooms.com/manage/AcBookingEdit.aspx?IRID=${this.bookingData.system_id}&&PM=I&TK=${this.ticket}`);\r\n      }\r\n      return window.open(`https://x.igloorooms.com/manage/AcBookingEdit.aspx?IRID=${this.bookingData.system_id}&&PM=B&TK=${this.ticket}`);\r\n    }\r\n    let url = this.printingBaseUrl;\r\n    if (mode === 'invoice') {\r\n      url = url + '&mode=invoice';\r\n    }\r\n    const { data } = await axios.post(`Get_ShortLiving_Token`);\r\n    if (!data.ExceptionMsg) {\r\n      url = url + `&token=${data.My_Result}`;\r\n    }\r\n    window.open(url);\r\n  }\r\n\r\n  private handleCloseBookingWindow() {\r\n    this.bookingItem = null;\r\n  }\r\n\r\n  private handleDeleteFinish(e: CustomEvent) {\r\n    this.bookingData = { ...this.bookingData, rooms: this.bookingData.rooms.filter(room => room.identifier !== e.detail) };\r\n  }\r\n\r\n  private async resetBookingData() {\r\n    try {\r\n      const booking = await this.bookingService.getExposedBooking(this.bookingNumber, this.language);\r\n      this.bookingData = { ...booking };\r\n      this.bookingChanged.emit(this.bookingData);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  private renderPhoneNumber() {\r\n    const { mobile, country_phone_prefix, country_id } = this.bookingData.guest;\r\n    if (!mobile) {\r\n      return null;\r\n    }\r\n    if (this.bookingData.is_direct) {\r\n      if (country_phone_prefix) {\r\n        return country_phone_prefix + ' ' + mobile;\r\n      }\r\n      if (country_id) {\r\n        const selectedCountry = this.countryNodeList.find(c => c.id === country_id);\r\n        if (!selectedCountry) {\r\n          throw new Error('Invalid country id');\r\n        }\r\n        return selectedCountry.phone_prefix + ' ' + mobile;\r\n      }\r\n    }\r\n    return mobile;\r\n  }\r\n  private renderSidbarContent() {\r\n    const handleClose = () => {\r\n      this.sidebarState = null;\r\n    };\r\n    switch (this.sidebarState) {\r\n      case 'guest':\r\n        return (\r\n          <ir-guest-info\r\n            slot=\"sidebar-body\"\r\n            booking_nbr={this.bookingNumber}\r\n            defaultTexts={this.defaultTexts}\r\n            email={this.bookingData?.guest.email}\r\n            language={this.language}\r\n            onCloseSideBar={handleClose}\r\n          ></ir-guest-info>\r\n        );\r\n      case 'pickup':\r\n        return (\r\n          <ir-pickup\r\n            slot=\"sidebar-body\"\r\n            defaultPickupData={this.bookingData.pickup_info}\r\n            bookingNumber={this.bookingData.booking_nbr}\r\n            numberOfPersons={this.bookingData.occupancy.adult_nbr + this.bookingData.occupancy.children_nbr}\r\n            onCloseModal={handleClose}\r\n          ></ir-pickup>\r\n        );\r\n      case 'extra_note':\r\n        return <ir-booking-extra-note slot=\"sidebar-body\" booking={this.bookingData} onCloseModal={() => (this.sidebarState = null)}></ir-booking-extra-note>;\r\n      case 'extra_service':\r\n        return (\r\n          <ir-extra-service-config\r\n            service={this.selectedService}\r\n            booking={{ from_date: this.bookingData.from_date, to_date: this.bookingData.to_date, booking_nbr: this.bookingData.booking_nbr, currency: this.bookingData.currency }}\r\n            slot=\"sidebar-body\"\r\n            onCloseModal={() => {\r\n              handleClose();\r\n              if (this.selectedService) {\r\n                this.selectedService = null;\r\n              }\r\n            }}\r\n          ></ir-extra-service-config>\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n  render() {\r\n    if (!this.bookingData) {\r\n      return (\r\n        <div class={'loading-container'}>\r\n          <ir-spinner></ir-spinner>\r\n        </div>\r\n      );\r\n    }\r\n    return [\r\n      <Fragment>\r\n        {!this.is_from_front_desk && (\r\n          <Fragment>\r\n            <ir-toast></ir-toast>\r\n            <ir-interceptor></ir-interceptor>\r\n          </Fragment>\r\n        )}\r\n      </Fragment>,\r\n      <div class=\"fluid-container p-1\">\r\n        <div class=\"d-flex flex-column p-0 mx-0 flex-lg-row align-items-md-center justify-content-between mt-1\">\r\n          <div class=\"m-0 p-0 mb-1 mb-lg-0 mt-md-0  d-flex justify-content-start align-items-center\">\r\n            <p class=\"font-size-large m-0 p-0\">{`${this.defaultTexts.entries.Lcz_Booking}#${this.bookingNumber}`}</p>\r\n            <p class=\"m-0 p-0 ml-1\">\r\n              {!this.bookingData.is_direct && (\r\n                <span class=\"mr-1 m-0\">\r\n                  {this.bookingData.channel_booking_nbr} {/* format time */}\r\n                </span>\r\n              )}\r\n              <span class=\"date-margin\">{_formatDate(this.bookingData.booked_on.date)}</span>\r\n\r\n              {_formatTime(this.bookingData.booked_on.hour.toString(), this.bookingData.booked_on.minute.toString())}\r\n            </p>\r\n          </div>\r\n\r\n          <div class=\"d-flex justify-content-end align-items-center\">\r\n            <span class={`confirmed btn-sm m-0 mr-2 ${this.confirmationBG[this.bookingData.status.code]}`}>{this.bookingData.status.description}</span>\r\n            {this.bookingData.allowed_actions.length > 0 && this.bookingData.is_editable && (\r\n              <Fragment>\r\n                <ir-select\r\n                  selectContainerStyle=\"h-28\"\r\n                  selectStyles=\"d-flex status-select align-items-center h-28\"\r\n                  firstOption={locales.entries.Lcz_Select}\r\n                  id=\"update-status\"\r\n                  size=\"sm\"\r\n                  label-available=\"false\"\r\n                  data={this.bookingData.allowed_actions.map(b => ({ text: b.description, value: b.code }))}\r\n                  textSize=\"sm\"\r\n                  class=\"sm-padding-right m-0 \"\r\n                ></ir-select>\r\n                <ir-button\r\n                  onClickHanlder={this.updateStatus.bind(this)}\r\n                  btn_styles=\"h-28\"\r\n                  isLoading={this.isUpdateClicked}\r\n                  btn_disabled={this.isUpdateClicked}\r\n                  id=\"update-status-btn\"\r\n                  size=\"sm\"\r\n                  text=\"Update\"\r\n                ></ir-button>\r\n              </Fragment>\r\n            )}\r\n            {calendar_data.is_pms_enabled && (\r\n              <button type=\"button\" class=\"btn btn-outline btn-sm ml-1\" onClick={this.openPMSLogsDialog.bind(this)}>\r\n                {locales.entries.Lcz_pms}\r\n              </button>\r\n            )}\r\n            {this.hasReceipt && <ir-button variant=\"icon\" id=\"receipt\" icon_name=\"reciept\" class=\"mx-1\" style={{ '--icon-size': '1.65rem' }}></ir-button>}\r\n            {this.hasPrint && <ir-button variant=\"icon\" id=\"print\" icon_name=\"print\" class=\"mr-1\" style={{ '--icon-size': '1.65rem' }}></ir-button>}\r\n            {this.hasDelete && <ir-button variant=\"icon\" id=\"book-delete\" icon_name=\"trash\" class=\"mr-1\" style={{ ...colorVariants.danger, '--icon-size': '1.65rem' }}></ir-button>}\r\n            {this.hasMenu && <ir-button variant=\"icon\" class=\"mr-1\" id=\"menu\" icon_name=\"menu_list\" style={{ '--icon-size': '1.65rem' }}></ir-button>}\r\n\r\n            {this.hasCloseButton && (\r\n              <ir-button\r\n                id=\"close\"\r\n                variant=\"icon\"\r\n                style={{ '--icon-size': '1.65rem' }}\r\n                icon_name=\"xmark\"\r\n                class=\"ml-2\"\r\n                onClickHanlder={e => {\r\n                  e.stopPropagation();\r\n                  e.stopImmediatePropagation();\r\n                  this.closeSidebar.emit(null);\r\n                }}\r\n              ></ir-button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>,\r\n      <div class=\"fluid-container p-1 text-left mx-0\">\r\n        <div class=\"row m-0\">\r\n          <div class=\"col-12 p-0 mx-0 pr-lg-1 col-lg-6\">\r\n            <div class=\"card\">\r\n              <div class=\"p-1\">\r\n                <p>{this.bookingData.property.name || ''}</p>\r\n                <ir-label\r\n                  label={`${this.defaultTexts.entries.Lcz_Source}:`}\r\n                  value={this.bookingData.origin.Label}\r\n                  image={{ src: this.bookingData.origin.Icon, alt: this.bookingData.origin.Label }}\r\n                ></ir-label>\r\n                <ir-label\r\n                  label={`${this.defaultTexts.entries.Lcz_BookedBy}:`}\r\n                  value={`${this.bookingData.guest.first_name} ${this.bookingData.guest.last_name}`}\r\n                  iconShown={true}\r\n                ></ir-label>\r\n                {this.bookingData.guest.mobile && <ir-label label={`${this.defaultTexts.entries.Lcz_Phone}:`} value={this.renderPhoneNumber()}></ir-label>}\r\n                <ir-label label={`${this.defaultTexts.entries.Lcz_Email}:`} value={this.bookingData.guest.email}></ir-label>\r\n                {this.bookingData.guest.alternative_email && (\r\n                  <ir-label label={`${this.defaultTexts.entries.Lcz_AlternativeEmail}:`} value={this.bookingData.guest.alternative_email}></ir-label>\r\n                )}\r\n                {this.bookingData?.guest?.address && <ir-label label={`${this.defaultTexts.entries.Lcz_Address}:`} value={this.bookingData.guest.address}></ir-label>}\r\n                {this.userCountry && (\r\n                  <ir-label\r\n                    label={`${this.defaultTexts.entries.Lcz_Country}:`}\r\n                    value={this.userCountry.name}\r\n                    country\r\n                    image={{ src: this.userCountry.flag, alt: this.userCountry.name }}\r\n                  ></ir-label>\r\n                )}\r\n                {this.bookingData.is_direct && <ir-label label={`${this.defaultTexts.entries.Lcz_ArrivalTime}:`} value={this.bookingData.arrival.description}></ir-label>}\r\n                {this.bookingData.promo_key && <ir-label label={`${this.defaultTexts.entries.Lcz_Coupon}:`} value={this.bookingData.promo_key}></ir-label>}\r\n                {this.bookingData.agent && <ir-label label={`${this.defaultTexts.entries.Lcz_AgentCode?.split(':')[0]}:`} value={this.bookingData.agent.name}></ir-label>}\r\n                {this.bookingData.is_in_loyalty_mode && !this.bookingData.promo_key && (\r\n                  <div class=\"d-flex align-items-center\">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" height={18} width={18}>\r\n                      <path\r\n                        fill=\"#fc6c85\"\r\n                        d=\"M225.8 468.2l-2.5-2.3L48.1 303.2C17.4 274.7 0 234.7 0 192.8v-3.3c0-70.4 50-130.8 119.2-144C158.6 37.9 198.9 47 231 69.6c9 6.4 17.4 13.8 25 22.3c4.2-4.8 8.7-9.2 13.5-13.3c3.7-3.2 7.5-6.2 11.5-9c0 0 0 0 0 0C313.1 47 353.4 37.9 392.8 45.4C462 58.6 512 119.1 512 189.5v3.3c0 41.9-17.4 81.9-48.1 110.4L288.7 465.9l-2.5 2.3c-8.2 7.6-19 11.9-30.2 11.9s-22-4.2-30.2-11.9zM239.1 145c-.4-.3-.7-.7-1-1.1l-17.8-20c0 0-.1-.1-.1-.1c0 0 0 0 0 0c-23.1-25.9-58-37.7-92-31.2C81.6 101.5 48 142.1 48 189.5v3.3c0 28.5 11.9 55.8 32.8 75.2L256 430.7 431.2 268c20.9-19.4 32.8-46.7 32.8-75.2v-3.3c0-47.3-33.6-88-80.1-96.9c-34-6.5-69 5.4-92 31.2c0 0 0 0-.1 .1s0 0-.1 .1l-17.8 20c-.3 .4-.7 .7-1 1.1c-4.5 4.5-10.6 7-16.9 7s-12.4-2.5-16.9-7z\"\r\n                      />\r\n                    </svg>\r\n                    <p class=\"m-0 p-0 ml-1\">{this.defaultTexts.entries.Lcz_LoyaltyDiscountApplied}</p>\r\n                  </div>\r\n                )}\r\n                {this.bookingData.is_direct ? (\r\n                  <ir-label class={'m-0 p-0'} label={`${this.defaultTexts.entries.Lcz_Note}:`} value={this.bookingData.remark}></ir-label>\r\n                ) : (\r\n                  <ota-label\r\n                    class={'m-0 p-0'}\r\n                    label={`${this.defaultTexts.entries.Lcz_Note}:`}\r\n                    remarks={this.bookingData.ota_notes}\r\n                    maxVisibleItems={this.bookingData.ota_notes?.length}\r\n                  ></ota-label>\r\n                )}\r\n                <div class=\"d-flex align-items-center justify-content-between\">\r\n                  <ir-label\r\n                    label={`${locales.entries.Lcz_PrivateNote}:`}\r\n                    placeholder={locales.entries.Lcz_VisibleToHotelOnly}\r\n                    value={getPrivateNote(this.bookingData.extras)}\r\n                    ignore_value\r\n                  ></ir-label>\r\n                  <ir-button\r\n                    variant=\"icon\"\r\n                    icon_name=\"edit\"\r\n                    style={colorVariants.secondary}\r\n                    onClickHanlder={e => {\r\n                      e.stopImmediatePropagation();\r\n                      e.stopPropagation();\r\n                      this.sidebarState = 'extra_note';\r\n                    }}\r\n                  ></ir-button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"font-size-large d-flex justify-content-between align-items-center mb-1\">\r\n              <ir-date-view from_date={this.bookingData.from_date} to_date={this.bookingData.to_date}></ir-date-view>\r\n              {this.hasRoomAdd && this.bookingData.is_direct && this.bookingData.is_editable && (\r\n                <ir-button id=\"room-add\" icon_name=\"square_plus\" variant=\"icon\" style={{ '--icon-size': '1.5rem' }}></ir-button>\r\n              )}\r\n            </div>\r\n            <div class=\"card p-0 mx-0\">\r\n              {this.bookingData.rooms.map((room: Room, index: number) => {\r\n                return [\r\n                  <ir-room\r\n                    isEditable={this.bookingData.is_editable}\r\n                    defaultTexts={this.defaultTexts}\r\n                    legendData={this.calendarData.legendData}\r\n                    roomsInfo={this.calendarData.roomsInfo}\r\n                    myRoomTypeFoodCat={room.roomtype.name}\r\n                    mealCodeName={room.rateplan.name}\r\n                    currency={this.bookingData.currency.symbol}\r\n                    hasRoomEdit={this.hasRoomEdit && this.bookingData.status.code !== '003' && this.bookingData.is_direct}\r\n                    hasRoomDelete={this.hasRoomDelete && this.bookingData.status.code !== '003' && this.bookingData.is_direct}\r\n                    hasCheckIn={this.hasCheckIn}\r\n                    hasCheckOut={this.hasCheckOut}\r\n                    bookingEvent={this.bookingData}\r\n                    bookingIndex={index}\r\n                    ticket={this.ticket}\r\n                    onDeleteFinished={this.handleDeleteFinish.bind(this)}\r\n                  />,\r\n                  index !== this.bookingData.rooms.length - 1 && <hr class=\"mr-2 ml-2 my-0 p-0\" />,\r\n                ];\r\n              })}\r\n            </div>\r\n            <ir-pickup-view booking={this.bookingData}></ir-pickup-view>\r\n            <section>\r\n              <div class=\"font-size-large d-flex justify-content-between align-items-center mb-1\">\r\n                <p class={'font-size-large p-0 m-0 '}>Extra Services</p>\r\n                <ir-button id=\"extra_service_btn\" icon_name=\"square_plus\" variant=\"icon\" style={{ '--icon-size': '1.5rem' }}></ir-button>\r\n              </div>\r\n              <ir-extra-services\r\n                booking={{ booking_nbr: this.bookingData.booking_nbr, currency: this.bookingData.currency, extra_services: this.bookingData.extra_services }}\r\n              ></ir-extra-services>\r\n            </section>\r\n          </div>\r\n          <div class=\"col-12 p-0 m-0 pl-lg-1 col-lg-6\">\r\n            <ir-payment-details paymentActions={this.paymentActions} defaultTexts={this.defaultTexts} bookingDetails={this.bookingData}></ir-payment-details>\r\n          </div>\r\n        </div>\r\n      </div>,\r\n      <ir-sidebar\r\n        open={this.sidebarState !== null}\r\n        side={'right'}\r\n        id=\"editGuestInfo\"\r\n        onIrSidebarToggle={e => {\r\n          e.stopImmediatePropagation();\r\n          e.stopPropagation();\r\n          this.sidebarState = null;\r\n        }}\r\n        showCloseButton={false}\r\n      >\r\n        {this.renderSidbarContent()}\r\n      </ir-sidebar>,\r\n      <Fragment>\r\n        {this.bookingItem && (\r\n          <igl-book-property\r\n            allowedBookingSources={this.calendarData.allowed_booking_sources}\r\n            adultChildConstraints={this.calendarData.adult_child_constraints}\r\n            showPaymentDetails={this.showPaymentDetails}\r\n            countryNodeList={this.countryNodeList}\r\n            currency={this.calendarData.currency}\r\n            language={this.language}\r\n            propertyid={this.property_id}\r\n            bookingData={this.bookingItem}\r\n            onCloseBookingWindow={() => this.handleCloseBookingWindow()}\r\n          ></igl-book-property>\r\n        )}\r\n      </Fragment>,\r\n      <Fragment>\r\n        <ir-dialog ref={el => (this.dialogRef = el)}>\r\n          <div slot=\"modal-body\" class=\"p-1\">\r\n            <h3 class=\" text-left mb-1 dialog-title \">{locales.entries.Lcz_PMS_Logs}</h3>\r\n            {!this.isPMSLogLoading && (\r\n              <Fragment>\r\n                <div class=\"d-flex align-items-center\">\r\n                  <p class=\"list-title\">{locales.entries.Lcz_SentAt}</p>\r\n                  {this.pms_status?.sent_date ? (\r\n                    <p class=\"list-item\">\r\n                      {this.pms_status?.sent_date} {_formatTime(this.pms_status?.sent_hour.toString(), this.pms_status?.sent_minute.toString())}\r\n                    </p>\r\n                  ) : (\r\n                    <p class={`list-item ${this.pms_status?.sent_date ? 'green' : 'red'}`}>{this.pms_status?.is_acknowledged ? locales.entries.Lcz_YES : locales.entries.Lcz_NO}</p>\r\n                  )}\r\n                </div>\r\n                <div class=\"d-flex align-items-center\">\r\n                  <h4 class=\"list-title\">{locales.entries.Lcz_Acknowledged}</h4>\r\n                  <p class={`list-item ${this.pms_status?.is_acknowledged ? 'green' : 'red'}`}>\r\n                    {this.pms_status?.is_acknowledged ? locales.entries.Lcz_YES : locales.entries.Lcz_NO}\r\n                  </p>\r\n                </div>\r\n              </Fragment>\r\n            )}\r\n          </div>\r\n        </ir-dialog>\r\n      </Fragment>,\r\n    ];\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n","import locales from '@/stores/locales.store';\r\nimport { Component, Event, EventEmitter, Host, Prop, State, h } from '@stencil/core';\r\nimport { Booking } from '@/models/booking.dto';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport { getPrivateNote } from '@/utils/booking';\r\n@Component({\r\n  tag: 'ir-booking-extra-note',\r\n  styleUrl: 'ir-booking-extra-note.css',\r\n  scoped: true,\r\n})\r\nexport class IrBookingExtraNote {\r\n  @Prop() booking: Booking;\r\n\r\n  @State() isLoading = false;\r\n  @State() note = '';\r\n\r\n  @Event() closeModal: EventEmitter<null>;\r\n  @Event() resetBookingData: EventEmitter<Booking | null>;\r\n\r\n  private bookingService = new BookingService();\r\n  componentWillLoad() {\r\n    if (this.booking.extras) {\r\n      this.setNote(getPrivateNote(this.booking.extras));\r\n    }\r\n  }\r\n\r\n  private setNote(value: string) {\r\n    this.note = value;\r\n  }\r\n  private async savePrivateNote() {\r\n    try {\r\n      this.isLoading = true;\r\n      let prevExtras = this.booking.extras || [];\r\n      const newExtraObj = { key: 'private_note', value: this.note };\r\n      if (prevExtras.length === 0) {\r\n        prevExtras.push(newExtraObj);\r\n      } else {\r\n        const oldPrivateNoteIndex = prevExtras.findIndex(e => e.key === 'private_note');\r\n        if (oldPrivateNoteIndex === -1) {\r\n          prevExtras.push(newExtraObj);\r\n        } else {\r\n          prevExtras[oldPrivateNoteIndex] = newExtraObj;\r\n        }\r\n      }\r\n      const res = await this.bookingService.doReservation({\r\n        assign_units: true,\r\n        is_pms: true,\r\n        is_direct: true,\r\n        is_in_loyalty_mode: false,\r\n        promo_key: null,\r\n        booking: this.booking,\r\n        Is_Non_Technical_Change: true,\r\n        extras: prevExtras,\r\n      });\r\n      this.resetBookingData.emit(res);\r\n      this.closeModal.emit(null);\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <Host class={'px-0'}>\r\n        <ir-title class=\"px-1\" onCloseSideBar={() => this.closeModal.emit(null)} label={locales.entries.Lcz_PrivateNote} displayContext=\"sidebar\"></ir-title>\r\n        <form\r\n          class={'px-1'}\r\n          onSubmit={e => {\r\n            e.preventDefault();\r\n            this.savePrivateNote();\r\n          }}\r\n        >\r\n          <ir-textarea placeholder={locales.entries.Lcz_PrivateNote_MaxChar} label=\"\" value={this.note} maxLength={150} onTextChange={e => this.setNote(e.detail)}></ir-textarea>\r\n          <div class={'d-flex flex-column flex-sm-row mt-3'}>\r\n            <ir-button\r\n              onClickHanlder={() => this.closeModal.emit(null)}\r\n              btn_styles=\"justify-content-center\"\r\n              class={`mb-1 mb-sm-0 flex-fill  mr-sm-1'}`}\r\n              icon=\"\"\r\n              text={locales.entries.Lcz_Cancel}\r\n              btn_color=\"secondary\"\r\n            ></ir-button>\r\n\r\n            <ir-button\r\n              btn_styles=\"justify-content-center align-items-center\"\r\n              class={'m-0 flex-fill text-center ml-sm-1'}\r\n              icon=\"\"\r\n              isLoading={this.isLoading}\r\n              text={locales.entries.Lcz_Save}\r\n              btn_color=\"primary\"\r\n              btn_type=\"submit\"\r\n            ></ir-button>\r\n          </div>\r\n        </form>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","import { IExposedBookingsCriteria } from '@/models/IrBookingListing';\r\nimport { Booking } from '@/models/booking.dto';\r\nimport { createStore } from '@stencil/store';\r\nimport moment from 'moment';\r\n\r\nexport interface IBookingListingStore extends IExposedBookingsCriteria {\r\n  token: string;\r\n  userSelection: IUserListingSelection;\r\n  bookings: Booking[];\r\n  download_url: string | null;\r\n  rowCount: number;\r\n}\r\nexport interface IUserListingSelection {\r\n  channel: string;\r\n  property_id: number;\r\n  filter_type: number;\r\n  from: string;\r\n  to: string;\r\n  name: string;\r\n  book_nbr: string;\r\n  booking_status: string;\r\n  affiliate_id: 0;\r\n  is_mpo_managed: false;\r\n  is_mpo_used: false;\r\n  is_for_mobile: false;\r\n  is_combined_view: false;\r\n  start_row: number;\r\n  end_row: number;\r\n  total_count: number;\r\n  is_to_export: boolean;\r\n}\r\n\r\nconst initialState: IBookingListingStore = {\r\n  channels: [],\r\n  settlement_methods: [],\r\n  statuses: [],\r\n  types: [],\r\n  token: '',\r\n  rowCount: 10,\r\n  bookings: [],\r\n  userSelection: {\r\n    from: moment().add(-7, 'days').format('YYYY-MM-DD'),\r\n    to: moment().format('YYYY-MM-DD'),\r\n    channel: '',\r\n    property_id: null,\r\n    start_row: 0,\r\n    end_row: 20,\r\n    total_count: 0,\r\n    filter_type: null,\r\n    name: '',\r\n    book_nbr: '',\r\n    booking_status: '',\r\n    affiliate_id: 0,\r\n    is_mpo_managed: false,\r\n    is_mpo_used: false,\r\n    is_for_mobile: false,\r\n    is_combined_view: false,\r\n    is_to_export: false,\r\n  },\r\n  download_url: null,\r\n};\r\n\r\nexport const { state: booking_listing, onChange: onBookingListingChange } = createStore<IBookingListingStore>(initialState);\r\nexport function initializeUserSelection() {\r\n  //booking_listing.channels[0].name\r\n  booking_listing.userSelection = {\r\n    ...booking_listing.userSelection,\r\n    channel: '',\r\n    booking_status: booking_listing.statuses[0].code,\r\n    filter_type: booking_listing.types[0].id,\r\n    book_nbr: '',\r\n    name: '',\r\n    from: moment().add(-7, 'days').format('YYYY-MM-DD'),\r\n    to: moment().format('YYYY-MM-DD'),\r\n    start_row: 0,\r\n    end_row: booking_listing.rowCount,\r\n  };\r\n}\r\nexport function updateUserSelection(key: keyof IUserListingSelection, value: any) {\r\n  booking_listing.userSelection = {\r\n    ...booking_listing.userSelection,\r\n    [key]: value,\r\n  };\r\n}\r\nexport default booking_listing;\r\n","import booking_listing, { IUserListingSelection, initializeUserSelection } from '@/stores/booking_listing.store';\r\nimport { extras } from '@/utils/utils';\r\nimport axios from 'axios';\r\n\r\nexport class BookingListingService {\r\n  public async getExposedBookingsCriteria(property_id: number) {\r\n    const { data } = await axios.post(`/Get_Exposed_Bookings_Criteria`, {\r\n      property_id,\r\n    });\r\n    const result = data.My_Result;\r\n    booking_listing.channels = result.channels;\r\n    booking_listing.settlement_methods = result.settlement_methods;\r\n    booking_listing.statuses = result.statuses;\r\n    booking_listing.types = result.types;\r\n    initializeUserSelection();\r\n  }\r\n\r\n  public async getExposedBookings(params: IUserListingSelection) {\r\n    const { data } = await axios.post(`/Get_Exposed_Bookings`, { ...params, extras });\r\n    const result = data.My_Result;\r\n    const header = data.My_Params_Get_Exposed_Bookings;\r\n    booking_listing.bookings = [...result];\r\n    booking_listing.userSelection = {\r\n      ...booking_listing.userSelection,\r\n      total_count: header.total_count,\r\n    };\r\n    booking_listing.download_url = header.exported_data_url;\r\n  }\r\n  public async removeExposedBooking(booking_nbr: string, is_to_revover: boolean) {\r\n    await axios.post(`/Remove_Exposed_Booking`, {\r\n      booking_nbr,\r\n      is_to_revover,\r\n    });\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  height: 100%;\r\n}\r\n.logo {\r\n  height: 2rem;\r\n  width: 2rem;\r\n}\r\n.card {\r\n  overflow-x: auto;\r\n}\r\n.secondary-p {\r\n  font-size: 12px !important;\r\n}\r\n.room-service {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  gap: 0.5rem;\r\n  width: 100%;\r\n  padding: 0.25rem 0;\r\n}\r\n.room-name-container {\r\n  background: #acecff;\r\n  padding: 0.1rem 0.3rem;\r\n  border-radius: 5px;\r\n  /* cursor: pointer; */\r\n\r\n  /* max-width: max-content; */\r\n}\r\n.h-screen {\r\n  height: 100%;\r\n}\r\n.price-span {\r\n  margin: 0;\r\n  margin-right: 5px;\r\n}\r\n.main-container {\r\n  height: 100%;\r\n  overflow-y: auto;\r\n}\r\n.badge.ct_ir_badge {\r\n  padding: 0.2rem 0.3rem;\r\n}\r\n.yellow_dot {\r\n  height: 0.5rem;\r\n  width: 0.5rem;\r\n  height: 0.5rem;\r\n  width: 0.8rem;\r\n  border-radius: 50%;\r\n  background: rgb(244, 213, 82);\r\n  margin-left: 0.5rem;\r\n  display: inline-flex;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n.booking_name {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.4rem;\r\n}\r\n.bg-ir-red {\r\n  background: #ff4961;\r\n  padding: 0.2rem 0.3rem;\r\n}\r\n.due-btn {\r\n  border: 1px solid #ff4961;\r\n  color: #ff4961;\r\n  cursor: pointer;\r\n  padding: 1px 0.25rem !important;\r\n  font-size: 12px !important;\r\n}\r\n.due-btn:hover {\r\n  background: #ff4961;\r\n  color: white;\r\n}\r\n.booking_number {\r\n  all: unset;\r\n  cursor: pointer;\r\n}\r\n.booking_number:hover {\r\n  color: #1e9ff2;\r\n}\r\n.in-out {\r\n  width: 150px !important;\r\n}\r\n.buttons-container {\r\n  gap: 10px;\r\n}\r\ntd ul {\r\n  width: max-content !important;\r\n}\r\ntd {\r\n  width: max-content !important ;\r\n}\r\n.date-p {\r\n  width: max-content !important;\r\n  min-width: 100%;\r\n  text-align: center !important;\r\n}\r\n.booking-label-gap {\r\n  gap: 5px;\r\n}\r\n@media (min-width: 1024px) {\r\n  .yellow_dot {\r\n    height: 0.5rem;\r\n    width: 0.5rem;\r\n  }\r\n}\r\n","import { Booking, IUnit } from '@/models/booking.dto';\r\nimport { BookingListingService } from '@/services/booking_listing.service';\r\nimport { RoomService } from '@/services/room.service';\r\nimport booking_listing, { updateUserSelection, onBookingListingChange } from '@/stores/booking_listing.store';\r\nimport locales from '@/stores/locales.store';\r\nimport { formatAmount } from '@/utils/utils';\r\nimport { Component, Host, Prop, State, Watch, h, Element, Listen } from '@stencil/core';\r\nimport moment from 'moment';\r\nimport { _formatTime } from '../ir-booking-details/functions';\r\nimport { getPrivateNote } from '@/utils/booking';\r\nimport Token from '@/models/Token';\r\nimport calendar_data from '@/stores/calendar-data';\r\n\r\n@Component({\r\n  tag: 'ir-booking-listing',\r\n  styleUrl: 'ir-booking-listing.css',\r\n  scoped: true,\r\n})\r\nexport class IrBookingListing {\r\n  @Element() el: HTMLElement;\r\n\r\n  @Prop() language: string = '';\r\n  @Prop() ticket: string = '';\r\n  @Prop() propertyid: number;\r\n  @Prop() rowCount: number = 10;\r\n  @Prop() p: string;\r\n\r\n  @State() isLoading = false;\r\n  @State() currentPage = 1;\r\n  @State() totalPages = 1;\r\n  @State() oldStartValue = 0;\r\n  @State() editBookingItem: { booking: Booking; cause: 'edit' | 'payment' | 'delete' } | null = null;\r\n  @State() showCost = false;\r\n\r\n  private bookingListingService = new BookingListingService();\r\n  private roomService = new RoomService();\r\n  private token = new Token();\r\n  private roomHistory: Record<number, boolean> = {};\r\n\r\n  private listingModal: HTMLIrListingModalElement;\r\n  private listingModalTimeout: NodeJS.Timeout;\r\n  private statusColors = {\r\n    '001': 'badge-warning',\r\n    '002': 'badge-success',\r\n    '003': 'badge-danger',\r\n    '004': 'badge-danger',\r\n  };\r\n\r\n  componentWillLoad() {\r\n    updateUserSelection('end_row', this.rowCount);\r\n    booking_listing.rowCount = this.rowCount;\r\n    if (this.ticket !== '') {\r\n      booking_listing.token = this.ticket;\r\n      this.token.setToken(this.ticket);\r\n      this.initializeApp();\r\n    }\r\n    onBookingListingChange('userSelection', async newValue => {\r\n      const newTotal = newValue.total_count;\r\n      this.totalPages = Math.ceil(newTotal / this.rowCount);\r\n    });\r\n    onBookingListingChange('bookings', async newValue => {\r\n      this.showCost = newValue.some(booking => booking.financial.gross_cost !== null && booking.financial.gross_cost > 0);\r\n    });\r\n  }\r\n  @Watch('ticket')\r\n  ticketChanged(newValue: string, oldValue: string) {\r\n    if (newValue === oldValue) {\r\n      return;\r\n    }\r\n    this.token.setToken(this.ticket);\r\n    booking_listing.token = this.ticket;\r\n    this.initializeApp();\r\n  }\r\n\r\n  async initializeApp() {\r\n    try {\r\n      this.isLoading = true;\r\n      if (!this.propertyid && !this.p) {\r\n        throw new Error('Property ID or username is required');\r\n      }\r\n      let propertyId = this.propertyid;\r\n      if (!propertyId) {\r\n        const propertyData = await this.roomService.getExposedProperty({\r\n          id: 0,\r\n          aname: this.p,\r\n          language: this.language,\r\n          is_backend: true,\r\n        });\r\n        propertyId = propertyData.My_Result.id;\r\n      }\r\n\r\n      const requests = [this.bookingListingService.getExposedBookingsCriteria(propertyId), this.roomService.fetchLanguage(this.language, ['_BOOKING_LIST_FRONT'])];\r\n\r\n      if (this.propertyid) {\r\n        requests.unshift(\r\n          this.roomService.getExposedProperty({\r\n            id: this.propertyid,\r\n            language: this.language,\r\n            is_backend: true,\r\n          }),\r\n        );\r\n      }\r\n\r\n      await Promise.all(requests);\r\n      updateUserSelection('property_id', propertyId);\r\n      await this.bookingListingService.getExposedBookings({ ...booking_listing.userSelection, is_to_export: false });\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n\r\n  handleSideBarToggle(e: CustomEvent<boolean>) {\r\n    if (e.detail) {\r\n      this.editBookingItem = null;\r\n    }\r\n  }\r\n\r\n  getPaginationBounds() {\r\n    const totalCount = booking_listing.userSelection.total_count;\r\n    const startItem = (this.currentPage - 1) * this.rowCount;\r\n    let endItem = this.currentPage * this.rowCount;\r\n    endItem = endItem > totalCount ? totalCount : endItem;\r\n    return { startItem, endItem, totalCount };\r\n  }\r\n\r\n  openModal() {\r\n    this.listingModalTimeout = setTimeout(() => {\r\n      this.listingModal = this.el.querySelector('ir-listing-modal');\r\n      this.listingModal.editBooking = this.editBookingItem;\r\n      this.listingModal.openModal();\r\n    }, 100);\r\n  }\r\n  disconnectedCallback() {\r\n    clearTimeout(this.listingModalTimeout);\r\n  }\r\n  @Listen('resetData')\r\n  async handleResetData(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    await this.bookingListingService.getExposedBookings({ ...booking_listing.userSelection, is_to_export: false });\r\n  }\r\n\r\n  @Listen('resetBookingData')\r\n  async handleResetStoreData(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    await this.bookingListingService.getExposedBookings({ ...booking_listing.userSelection, is_to_export: false });\r\n  }\r\n  @Listen('bookingChanged')\r\n  handleBookingChanged(e: CustomEvent<Booking>) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    booking_listing.bookings = [\r\n      ...booking_listing.bookings.map(b => {\r\n        if (b.booking_nbr === e.detail.booking_nbr) {\r\n          return e.detail;\r\n        }\r\n        return b;\r\n      }),\r\n    ];\r\n  }\r\n\r\n  renderItemRange() {\r\n    const { endItem, startItem, totalCount } = this.getPaginationBounds();\r\n    return `${locales.entries.Lcz_View} ${startItem + 1} - ${endItem} ${locales.entries.Lcz_Of} ${totalCount}`;\r\n  }\r\n\r\n  async updateData() {\r\n    const { endItem, startItem } = this.getPaginationBounds();\r\n    await this.bookingListingService.getExposedBookings({\r\n      ...booking_listing.userSelection,\r\n      is_to_export: false,\r\n      start_row: startItem,\r\n      end_row: endItem,\r\n    });\r\n  }\r\n  private isSingleUnit(id: number) {\r\n    if (this.roomHistory[id]) {\r\n      return this.roomHistory[id];\r\n    }\r\n    const roomtype = calendar_data.roomsInfo.find(r => r.id === id);\r\n    if (!roomtype) {\r\n      console.warn(`Room type not found for ID: ${id}`);\r\n      return false;\r\n    }\r\n    const result = roomtype.physicalrooms?.length <= 1;\r\n    this.roomHistory[id] = result;\r\n    return result;\r\n  }\r\n  render() {\r\n    if (this.isLoading || this.ticket === '') {\r\n      return <ir-loading-screen></ir-loading-screen>;\r\n    }\r\n    return (\r\n      <Host>\r\n        <ir-interceptor></ir-interceptor>\r\n        <ir-toast></ir-toast>\r\n        <div class=\"p-1 main-container\">\r\n          <ir-listing-header propertyId={this.propertyid} p={this.p} language={this.language}></ir-listing-header>\r\n          <section>\r\n            <div class=\"card p-1 flex-fill m-0 mt-2\">\r\n              <table class=\"table table-striped table-bordered no-footer dataTable\">\r\n                <thead>\r\n                  <tr>\r\n                    <th scope=\"col\" class=\"text-left\">\r\n                      {locales.entries?.Lcz_Booking}#\r\n                    </th>\r\n                    <th scope=\"col\">{locales.entries?.Lcz_BookedOn}</th>\r\n                    <th scope=\"col\">{locales.entries?.Lcz_GuestSource}</th>\r\n                    <th scope=\"col\" class=\"text-left services-cell\">\r\n                      {locales.entries?.Lcz_Services}\r\n                    </th>\r\n                    <th scope=\"col\" class=\"in-out\">\r\n                      {locales.entries?.Lcz_Dates}\r\n                    </th>\r\n                    <th scope=\"col\">\r\n                      <span class=\"price-span\">{locales.entries?.Lcz_Amount}</span>\r\n\r\n                      <ir-tooltip\r\n                        customSlot\r\n                        message={`<span style=\"width:100%;display:block;\">${locales.entries?.Lcz_BookingBalance}</span><span>${locales.entries?.Lcz_ClickToSettle}</span>`}\r\n                      >\r\n                        <span slot=\"tooltip-trigger\" class={'m-0 btn due-btn'}>\r\n                          {locales.entries?.Lcz_Balance}\r\n                        </span>\r\n                      </ir-tooltip>\r\n                    </th>\r\n                    {this.showCost && (\r\n                      <th scope=\"col\" class=\"services-cell\">\r\n                        {locales.entries?.Lcz_Cost}\r\n                      </th>\r\n                    )}\r\n                    <th scope=\"col\">{locales.entries?.Lcz_Status}</th>\r\n                    <th scope=\"col\">\r\n                      <p class=\"sr-only\">actions</p>\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody class=\"\">\r\n                  {booking_listing.bookings.length === 0 && (\r\n                    <tr>\r\n                      <td colSpan={8}>{locales.entries?.Lcz_NoDataAvailable}</td>\r\n                    </tr>\r\n                  )}\r\n                  {booking_listing.bookings?.map(booking => {\r\n                    let confirmationBG: string = this.statusColors[booking.status.code];\r\n                    return (\r\n                      <tr key={booking.booking_nbr}>\r\n                        <td class=\"text-left\">\r\n                          <button onClick={() => (this.editBookingItem = { booking, cause: 'edit' })} class=\"booking_number\">\r\n                            {booking.booking_nbr}\r\n                          </button>\r\n                        </td>\r\n                        <td>\r\n                          <p class=\"p-0 m-0 date-p\">{moment(booking.booked_on.date, 'YYYY-MM-DD').format('DD-MMM-YYYY')}</p>\r\n                          <p class=\"p-0 m-0 secondary-p\">{_formatTime(booking.booked_on.hour.toString(), booking.booked_on.minute.toString())}</p>\r\n                        </td>\r\n                        <td>\r\n                          <div class=\"h-100 d-flex align-items-center \">\r\n                            <img class=\"mr-2 logo\" src={booking.origin.Icon} alt={booking.origin.Label} />\r\n                            <div class=\"text-left\">\r\n                              <p class=\"p-0 m-0 booking_name\">\r\n                                {booking.guest.first_name} {booking.guest.last_name ?? ''} {booking.occupancy.adult_nbr}\r\n                                {locales.entries.Lcz_P} {getPrivateNote(booking.extras) && <span class=\"yellow_dot\"></span>}\r\n                              </p>\r\n                              <div class={'d-flex align-items-center booking-label-gap'}>\r\n                                <p class=\"p-0 m-0 secondary-p\">{booking.origin.Label}</p>\r\n                                {booking.is_in_loyalty_mode && !booking.promo_key && (\r\n                                  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" height={18} width={18}>\r\n                                    <title>{locales.entries.Lcz_LoyaltyDiscountApplied}</title>\r\n                                    <path\r\n                                      fill=\"#fc6c85\"\r\n                                      d=\"M225.8 468.2l-2.5-2.3L48.1 303.2C17.4 274.7 0 234.7 0 192.8v-3.3c0-70.4 50-130.8 119.2-144C158.6 37.9 198.9 47 231 69.6c9 6.4 17.4 13.8 25 22.3c4.2-4.8 8.7-9.2 13.5-13.3c3.7-3.2 7.5-6.2 11.5-9c0 0 0 0 0 0C313.1 47 353.4 37.9 392.8 45.4C462 58.6 512 119.1 512 189.5v3.3c0 41.9-17.4 81.9-48.1 110.4L288.7 465.9l-2.5 2.3c-8.2 7.6-19 11.9-30.2 11.9s-22-4.2-30.2-11.9zM239.1 145c-.4-.3-.7-.7-1-1.1l-17.8-20c0 0-.1-.1-.1-.1c0 0 0 0 0 0c-23.1-25.9-58-37.7-92-31.2C81.6 101.5 48 142.1 48 189.5v3.3c0 28.5 11.9 55.8 32.8 75.2L256 430.7 431.2 268c20.9-19.4 32.8-46.7 32.8-75.2v-3.3c0-47.3-33.6-88-80.1-96.9c-34-6.5-69 5.4-92 31.2c0 0 0 0-.1 .1s0 0-.1 .1l-17.8 20c-.3 .4-.7 .7-1 1.1c-4.5 4.5-10.6 7-16.9 7s-12.4-2.5-16.9-7z\"\r\n                                    />\r\n                                  </svg>\r\n                                )}\r\n                                {booking.promo_key && (\r\n                                  <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" height={18} width={18}>\r\n                                    <title>{locales.entries.Lcz_Coupon + ':' + booking.promo_key}</title>\r\n                                    <path\r\n                                      stroke-linecap=\"round\"\r\n                                      stroke-linejoin=\"round\"\r\n                                      d=\"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 0 1 0 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 0 1 0-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375Z\"\r\n                                    />\r\n                                  </svg>\r\n                                )}\r\n                              </div>\r\n                              {booking.agent && <p class=\"m-0 secondary-p\">{locales.entries.Lcz_AgentCode.replace('%1', booking.agent.name)}</p>}\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n\r\n                        <td>\r\n                          <ul>\r\n                            {booking.rooms.map(room => (\r\n                              <li>\r\n                                <div class={'room-service'}>\r\n                                  <p class={'m-0 p-0'}>{room.roomtype.name}</p>\r\n                                  {room.unit &&\r\n                                    !this.isSingleUnit(room.roomtype.id) &&\r\n                                    ((room.unit as IUnit)?.name?.length > 4 ? (\r\n                                      <ir-tooltip customSlot message={(room.unit as IUnit)?.name}>\r\n                                        <p class={'room-name-container cursor-pointer m-0'} slot=\"tooltip-trigger\">\r\n                                          {(room.unit as IUnit)?.name?.substring(0, 4)}\r\n                                        </p>\r\n                                      </ir-tooltip>\r\n                                    ) : (\r\n                                      <p class={'room-name-container  m-0'}>{(room.unit as IUnit)?.name?.substring(0, 4)}</p>\r\n                                    ))}\r\n                                </div>\r\n                              </li>\r\n                            ))}\r\n                            {booking.extra_services && <li>Extra services</li>}\r\n                          </ul>\r\n                        </td>\r\n                        <td>\r\n                          <p class=\"p-0 m-0 date-p\">{moment(booking.from_date, 'YYYY-MM-DD').format('DD-MMM-YYYY')}</p>\r\n                          <p class=\"p-0 m-0 date-p\">{moment(booking.to_date, 'YYYY-MM-DD').format('DD-MMM-YYYY')}</p>\r\n                        </td>\r\n                        <td>\r\n                          <p class=\"p-0 m-0\">{formatAmount(booking.currency.symbol, booking.financial?.gross_total ?? 0)}</p>\r\n                          {booking.financial.due_amount > 0 && (\r\n                            <buuton\r\n                              onClick={() => {\r\n                                this.editBookingItem = { booking, cause: 'payment' };\r\n                                this.openModal();\r\n                              }}\r\n                              class=\"btn p-0 m-0 due-btn\"\r\n                            >\r\n                              {formatAmount(booking.currency.symbol, booking.financial.due_amount)}\r\n                            </buuton>\r\n                          )}\r\n                        </td>\r\n                        {this.showCost && (\r\n                          <td>\r\n                            {booking.financial.gross_cost !== null && booking.financial.gross_cost === 0\r\n                              ? '_'\r\n                              : formatAmount(booking.currency.symbol, booking.financial.gross_cost)}\r\n                          </td>\r\n                        )}\r\n\r\n                        <td>\r\n                          <p class={`m-0 badge ${confirmationBG} ct_ir_badge`}>{booking.status.description}</p>\r\n                        </td>\r\n                        <td>\r\n                          <div class=\"d-flex justify-content-center align-items-center\" style={{ gap: '8px' }}>\r\n                            <ir-button title=\"Edit booking\" variant=\"icon\" icon_name=\"edit\" onClickHanlder={() => (this.editBookingItem = { booking, cause: 'edit' })}></ir-button>\r\n                            <ir-button\r\n                              title=\"Delete booking\"\r\n                              style={{ '--icon-button-color': '#ff4961', '--icon-button-hover-color': '#FF1635' }}\r\n                              variant=\"icon\"\r\n                              icon_name=\"trash\"\r\n                              onClickHanlder={() => {\r\n                                this.editBookingItem = { booking, cause: 'delete' };\r\n                                this.openModal();\r\n                              }}\r\n                            ></ir-button>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n              {this.totalPages > 1 && (\r\n                <section class={'d-flex flex-column flex-md-row align-items-center justify-content-between pagination-container'}>\r\n                  <p class=\"m-0 mb-1 mb-md-0\">{this.renderItemRange()}</p>\r\n                  <div class={'d-flex align-items-center buttons-container'}>\r\n                    <ir-button\r\n                      size=\"sm\"\r\n                      btn_disabled={this.currentPage === 1}\r\n                      onClickHanlder={async () => {\r\n                        this.currentPage = 1;\r\n                        await this.updateData();\r\n                      }}\r\n                      icon_name=\"angles_left\"\r\n                      style={{ '--icon-size': '0.875rem' }}\r\n                    ></ir-button>\r\n                    <ir-button\r\n                      size=\"sm\"\r\n                      btn_disabled={this.currentPage === 1}\r\n                      onClickHanlder={async () => {\r\n                        this.currentPage = this.currentPage - 1;\r\n                        console.log(this.currentPage);\r\n                        await this.updateData();\r\n                      }}\r\n                      icon_name=\"angle_left\"\r\n                      style={{ '--icon-size': '0.875rem' }}\r\n                    ></ir-button>\r\n                    <ir-select\r\n                      selectedValue={this.currentPage.toString()}\r\n                      LabelAvailable={false}\r\n                      showFirstOption={false}\r\n                      onSelectChange={async e => {\r\n                        this.currentPage = +e.detail;\r\n                        await this.updateData();\r\n                      }}\r\n                      data={Array.from(Array(this.totalPages), (_, i) => i + 1).map(i => ({\r\n                        text: i.toString(),\r\n                        value: i.toString(),\r\n                      }))}\r\n                    ></ir-select>\r\n                    <ir-button\r\n                      size=\"sm\"\r\n                      btn_disabled={this.currentPage === this.totalPages}\r\n                      onClickHanlder={async () => {\r\n                        this.currentPage = this.currentPage + 1;\r\n                        await this.updateData();\r\n                      }}\r\n                      icon_name=\"angle_right\"\r\n                      style={{ '--icon-size': '0.875rem' }}\r\n                    ></ir-button>\r\n                    <ir-button\r\n                      size=\"sm\"\r\n                      btn_disabled={this.currentPage === this.totalPages}\r\n                      onClickHanlder={async () => {\r\n                        this.currentPage = this.totalPages;\r\n                        console.log(this.currentPage);\r\n                        await this.updateData();\r\n                      }}\r\n                      icon_name=\"angles_right\"\r\n                      style={{ '--icon-size': '0.875rem' }}\r\n                    ></ir-button>\r\n                  </div>\r\n                </section>\r\n              )}\r\n            </div>\r\n          </section>\r\n        </div>\r\n        {this.editBookingItem && <ir-listing-modal onModalClosed={() => (this.editBookingItem = null)}></ir-listing-modal>}\r\n        <ir-sidebar\r\n          onIrSidebarToggle={this.handleSideBarToggle.bind(this)}\r\n          open={this.editBookingItem !== null && this.editBookingItem.cause === 'edit'}\r\n          showCloseButton={false}\r\n          sidebarStyles={{ width: this.editBookingItem ? '80rem' : 'var(--sidebar-width,40rem)', background: '#F2F3F8' }}\r\n        >\r\n          {this.editBookingItem?.cause === 'edit' && (\r\n            <ir-booking-details\r\n              slot=\"sidebar-body\"\r\n              p={this.p}\r\n              hasPrint\r\n              hasReceipt\r\n              is_from_front_desk\r\n              propertyid={this.propertyid}\r\n              hasRoomEdit\r\n              hasRoomDelete\r\n              hasCloseButton\r\n              onCloseSidebar={() => (this.editBookingItem = null)}\r\n              bookingNumber={this.editBookingItem.booking.booking_nbr}\r\n              ticket={this.ticket}\r\n              language={this.language}\r\n              hasRoomAdd\r\n            ></ir-booking-details>\r\n          )}\r\n        </ir-sidebar>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  --icon-button-color: #6b6f82;\r\n  --icon-button-hover-color: #104064;\r\n}\r\n\r\n.button-icon {\r\n  padding: 0;\r\n  margin-top: 0;\r\n}\r\n\r\n.button-icon[data-state='loading'] {\r\n  display: none;\r\n}\r\n\r\n.button-text {\r\n  padding: 0 5px;\r\n}\r\n\r\n.bounce-3 {\r\n  animation: bounce 1s 1;\r\n}\r\n\r\n.ir-button-class {\r\n  display: inline-flex !important;\r\n  justify-content: center;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.icon-button {\r\n  all: unset;\r\n  box-sizing: border-box;\r\n  border-radius: 0.25rem;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: var(--icon-button-color);\r\n  padding: 0.2rem;\r\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n}\r\n.icon-button:hover {\r\n  color: var(--icon-button-hover-color);\r\n}\r\n.icon-button:hover.hovered_bg {\r\n  background: var('--ir-icon-bg-hover', #f6f6f6);\r\n}\r\n.icon-button:disabled {\r\n  pointer-events: none;\r\n}\r\n\r\n.icon-loader {\r\n  margin: 0;\r\n  padding: 0;\r\n  width: var(--icon-size, 1.25rem);\r\n  height: var(--icon-size, 1.25rem);\r\n  border-radius: 50%;\r\n  background: radial-gradient(farthest-side, var(--icon-button-color) 94%, #0000) top/2px 2px no-repeat, conic-gradient(#0000 30%, var(--icon-button-color));\r\n  -webkit-mask: radial-gradient(farthest-side, #0000 calc(100% - 2px), var(--icon-button-color) 0);\r\n  mask: radial-gradient(farthest-side, #0000 calc(100% - 2px), var(--icon-button-color) 0);\r\n  animation: l13 1s infinite linear;\r\n}\r\n\r\n.btn_loader {\r\n  width: 15px;\r\n  height: 10px;\r\n  --c: no-repeat linear-gradient(#ffffff 0 0);\r\n  background: var(--c) 0% 50%, var(--c) 50% 50%, var(--c) 100% 50%;\r\n  background-size: 20% 100%;\r\n  animation: l1 1s infinite linear;\r\n}\r\n\r\n@keyframes l13 {\r\n  100% {\r\n    transform: rotate(1turn);\r\n  }\r\n}\r\n\r\n@keyframes l1 {\r\n  0% {\r\n    background-size: 20% 100%, 20% 100%, 20% 100%;\r\n  }\r\n  33% {\r\n    background-size: 20% 10%, 20% 100%, 20% 100%;\r\n  }\r\n  50% {\r\n    background-size: 20% 100%, 20% 10%, 20% 100%;\r\n  }\r\n  66% {\r\n    background-size: 20% 100%, 20% 100%, 20% 10%;\r\n  }\r\n  100% {\r\n    background-size: 20% 100%, 20% 100%, 20% 100%;\r\n  }\r\n}\r\n@keyframes bounce {\r\n  0%,\r\n  100% {\r\n    transform: scale(1);\r\n    animation-timing-function: cubic-bezier(0.8, 0, 1, 1);\r\n  }\r\n  50% {\r\n    transform: scale(1.2);\r\n    animation-timing-function: cubic-bezier(0, 0, 0.2, 1);\r\n  }\r\n}\r\n@keyframes ping {\r\n  75%,\r\n  100% {\r\n    transform: scale(1.2);\r\n  }\r\n}\r\n@keyframes rotation {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n","import { Component, Prop, Event, EventEmitter, h, Listen } from '@stencil/core';\r\nimport { v4 } from 'uuid';\r\nimport { TIcons } from '../ui/ir-icons/icons';\r\n\r\n@Component({\r\n  tag: 'ir-button',\r\n  styleUrl: 'ir-button.css',\r\n  scoped: true,\r\n})\r\nexport class IrButton {\r\n  @Prop() name: string;\r\n  @Prop() text;\r\n  @Prop() icon = 'ft-save';\r\n  @Prop() btn_color: 'primary' | 'secondary' | 'success' | 'danger' | 'warning' | 'info' | 'light' | 'dark' | 'outline' = 'primary';\r\n  @Prop() size: 'sm' | 'md' | 'lg' = 'md';\r\n  @Prop() textSize: 'sm' | 'md' | 'lg' = 'md';\r\n  @Prop() btn_block = true;\r\n  @Prop() btn_disabled = false;\r\n  @Prop() btn_type = 'button';\r\n  @Prop() isLoading: boolean = false;\r\n  @Prop() btn_styles: string;\r\n  @Prop() btn_id: string = v4();\r\n  @Prop() variant: 'default' | 'icon' = 'default';\r\n  @Prop() icon_name: TIcons;\r\n  @Prop() visibleBackgroundOnHover: boolean = false;\r\n  @Prop() iconPostion: 'left' | 'right' = 'left';\r\n  @Prop() icon_style: any;\r\n\r\n  @Event({ bubbles: true, composed: true }) clickHanlder: EventEmitter<any>;\r\n\r\n  private buttonEl: HTMLButtonElement;\r\n  @Listen('animateIrButton', { target: 'body' })\r\n  handleButtonAnimation(e: CustomEvent) {\r\n    if (!this.buttonEl || e.detail !== this.btn_id) {\r\n      return;\r\n    }\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    this.buttonEl.classList.remove('bounce-3');\r\n    void this.buttonEl.offsetWidth;\r\n    this.buttonEl.classList.add('bounce-3');\r\n  }\r\n  render() {\r\n    if (this.variant === 'icon') {\r\n      return (\r\n        <button\r\n          id={this.btn_id}\r\n          class={`icon-button ${this.btn_styles} ${this.visibleBackgroundOnHover ? 'hovered_bg' : ''}`}\r\n          ref={el => (this.buttonEl = el)}\r\n          onClick={() => this.clickHanlder.emit()}\r\n          type={this.btn_type}\r\n          disabled={this.btn_disabled}\r\n        >\r\n          {this.isLoading ? <span class=\"icon-loader\"></span> : <ir-icons name={this.icon_name}></ir-icons>}\r\n        </button>\r\n      );\r\n    }\r\n    let blockClass = this.btn_block ? 'btn-block' : '';\r\n    return (\r\n      <button\r\n        id={this.btn_id}\r\n        ref={el => (this.buttonEl = el)}\r\n        onClick={() => this.clickHanlder.emit()}\r\n        class={`btn btn-${this.btn_color} ${this.btn_styles} ir-button-class  btn-${this.size} text-${this.textSize} ${blockClass}`}\r\n        type={this.btn_type}\r\n        disabled={this.btn_disabled || this.isLoading}\r\n      >\r\n        {this.icon_name && this.iconPostion === 'left' && <ir-icons name={this.icon_name} style={this.icon_style}></ir-icons>}\r\n        {this.text && <span class=\"button-text m-0\">{this.text}</span>}\r\n        {this.isLoading ? <div class=\"btn_loader m-0 p-0\"></div> : this.iconPostion === 'right' && <ir-icons style={this.icon_style} name={this.icon_name}></ir-icons>}\r\n      </button>\r\n    );\r\n  }\r\n}\r\n","import { IrOnlineResource } from './models';\r\nexport const onlineResources: IrOnlineResource[] = [\r\n  // {\r\n  //   isJS: true,\r\n  //   link: \"https://x.igloorooms.com/manage/micro/app-assets/required/assets/scripts/jquery.min.js\",\r\n  // },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i%7CQuicksand:300,400,500,700',\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://x.igloorooms.com/app-assets/css/bootstrap.css',\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://x.igloorooms.com/app-assets/css/bootstrap-extended.css',\r\n  },\r\n  { isCSS: true, link: 'https://x.igloorooms.com/app-assets/css/colors.css' },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://x.igloorooms.com/app-assets/css/core/menu/menu-types/horizontal-menu.css',\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://x.igloorooms.com/app-assets/css/core/colors/palette-gradient.css',\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://x.igloorooms.com/app-assets/css/components.css',\r\n  },\r\n  { isCSS: true, link: 'https://x.igloorooms.com/assets/css/style.css' },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/icheck.css',\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/custom.css',\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://x.igloorooms.com/app-assets/css/pages/login-register.css',\r\n  },\r\n  // {\r\n  //   isCSS: true,\r\n  //   link: 'https://x.igloorooms.com/manage/micro/app-assets/required/assets/scripts/daterangepicker/daterangepicker.css',\r\n  // },\r\n\r\n  // {\r\n  //   isJS: true,\r\n  //   link: \"https://x.igloorooms.com/manage/micro/app-assets/required/assets/scripts/daterangepicker/moment.min.js\",\r\n  // },\r\n  // {\r\n  //   isJS: true,\r\n  //   link: \"https://x.igloorooms.com/manage/micro/app-assets/required/assets/scripts/daterangepicker/daterangepicker.js\",\r\n  // },\r\n];\r\n","import { Component, Host, Prop, State, Watch, h } from '@stencil/core';\r\nimport { IrOnlineResource } from '../../common/models';\r\nimport { onlineResources } from '../../common/ir.common.resources';\r\n\r\n@Component({\r\n  tag: 'ir-common',\r\n})\r\nexport class IrCommon {\r\n  @Prop({ reflect: true }) extraResources: string = '';\r\n  @State() resources: IrOnlineResource[] = onlineResources;\r\n  componentWillLoad() {\r\n    this.parseRefs();\r\n  }\r\n\r\n  componentDidLoad() {\r\n    this.initializeStyles();\r\n  }\r\n\r\n  @Watch('extraResources')\r\n  hrefsChanged() {\r\n    this.parseRefs();\r\n    this.initializeStyles();\r\n  }\r\n\r\n  private parseRefs() {\r\n    if (this.extraResources !== '') this.resources.push(JSON.parse(this.extraResources));\r\n  }\r\n\r\n  private appendTag(tagName: string, attributes: any) {\r\n    const tag = document.createElement(tagName);\r\n    const selectorParts = [];\r\n\r\n    Object.keys(attributes).forEach(attr => {\r\n      tag.setAttribute(attr, attributes[attr]);\r\n      selectorParts.push(`[${attr}=\"${attributes[attr]}\"]`);\r\n    });\r\n\r\n    const selector = `${tagName}${selectorParts.join('')}`;\r\n    const existingTag = document.querySelector(selector);\r\n\r\n    if (!existingTag) {\r\n      document.head.appendChild(tag);\r\n    }\r\n  }\r\n\r\n  private initializeStyles() {\r\n    this.resources.forEach(res => {\r\n      if (res.isCSS) {\r\n        this.appendTag('link', {\r\n          href: res.link,\r\n          rel: 'stylesheet',\r\n          type: 'text/css',\r\n        });\r\n      }\r\n      if (res.isJS) {\r\n        this.appendTag('script', {\r\n          src: res.link,\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <slot></slot>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","input {\r\n  all: unset;\r\n  box-sizing: border-box !important;\r\n  padding: 0;\r\n  margin: 0;\r\n  width: 100%;\r\n  text-align: center;\r\n}\r\ninput:disabled {\r\n  text-align: start;\r\n  font-size: 14px;\r\n  width: 100%;\r\n}\r\n:host {\r\n  position: relative;\r\n  box-sizing: border-box;\r\n}\r\n.icon {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n}\r\n","import { Component, h, Element, Prop, Event, EventEmitter, Host, Watch, Method } from '@stencil/core';\r\nimport moment from 'moment';\r\n\r\n@Component({\r\n  tag: 'ir-date-picker',\r\n  styleUrl: 'ir-date-picker.css',\r\n  scoped: true,\r\n})\r\nexport class IrDatePicker {\r\n  @Element() private element: HTMLElement;\r\n  @Prop() fromDate: Date;\r\n  @Prop() toDate: Date;\r\n  @Prop() date: Date;\r\n\r\n  @Prop() opens: 'left' | 'right' | 'center';\r\n  @Prop() autoApply: boolean;\r\n  @Prop() firstDay: number = 1;\r\n  @Prop() monthNames: string[] = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\n  @Prop() daysOfWeek: string[] = ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'];\r\n  @Prop() format: string = 'MMM DD, YYYY';\r\n  @Prop() separator: string = ' - ';\r\n  @Prop() applyLabel: string = 'Apply';\r\n  @Prop() cancelLabel: string = 'Cancel';\r\n  @Prop() fromLabel: string = 'Form';\r\n  @Prop() toLabel: string = 'To';\r\n  @Prop() customRangeLabel: string = 'Custom';\r\n  @Prop() weekLabel: string = 'W';\r\n  @Prop() disabled: boolean = false;\r\n  @Prop() singleDatePicker = false;\r\n  @Prop() minDate: string;\r\n  @Prop() maxDate: string;\r\n  @Prop() maxSpan: moment.DurationInputArg1 = {\r\n    days: 240,\r\n  };\r\n\r\n  private openDatePickerTimeout: NodeJS.Timeout;\r\n\r\n  @Event() dateChanged: EventEmitter<{\r\n    start: moment.Moment;\r\n    end: moment.Moment;\r\n  }>;\r\n  dateRangeInput: HTMLElement;\r\n\r\n  @Watch('minDate')\r\n  handleMinDateChange() {\r\n    $(this.dateRangeInput).data('daterangepicker').remove();\r\n    this.initializeDateRangePicker();\r\n  }\r\n  @Watch('date')\r\n  datePropChanged() {\r\n    this.updateDateRangePickerDates();\r\n  }\r\n  @Method()\r\n  async openDatePicker() {\r\n    this.openDatePickerTimeout = setTimeout(() => {\r\n      this.dateRangeInput.click();\r\n    }, 20);\r\n  }\r\n  updateDateRangePickerDates() {\r\n    const picker = $(this.dateRangeInput).data('daterangepicker');\r\n    if (!picker) {\r\n      console.error('Date range picker not initialized.');\r\n      return;\r\n    }\r\n\r\n    // Adjust how dates are set based on whether it's a single date picker or range picker.\r\n    if (this.singleDatePicker) {\r\n      const newDate = this.date ? moment(this.date) : moment();\r\n      picker.setStartDate(newDate);\r\n      picker.setEndDate(newDate); // For single date picker, start and end date might be the same.\r\n    } else {\r\n      const newStartDate = this.fromDate ? moment(this.fromDate) : moment();\r\n      const newEndDate = this.toDate ? moment(this.toDate) : newStartDate.clone().add(1, 'days');\r\n      picker.setStartDate(newStartDate);\r\n      picker.setEndDate(newEndDate);\r\n    }\r\n  }\r\n  componentWillLoad() {\r\n    if (!document.getElementById('ir-daterangepicker-style')) {\r\n      const style = document.createElement('style');\r\n      style.id = 'ir-daterangepicker-style';\r\n      style.textContent = `\r\n        .daterangepicker {\r\n          margin-top: 14px;\r\n        }\r\n      `;\r\n      document.head.appendChild(style);\r\n    }\r\n  }\r\n  componentDidLoad() {\r\n    this.dateRangeInput = this.element.querySelector('.date-range-input');\r\n    this.initializeDateRangePicker();\r\n    this.updateDateRangePickerDates();\r\n  }\r\n\r\n  initializeDateRangePicker() {\r\n    $(this.dateRangeInput).daterangepicker(\r\n      {\r\n        singleDatePicker: this.singleDatePicker,\r\n        opens: this.opens,\r\n        startDate: moment(this.fromDate),\r\n        endDate: moment(this.toDate),\r\n        minDate: moment(this.minDate || moment(new Date()).format('YYYY-MM-DD')),\r\n        maxDate: this.maxDate ? moment(this.maxDate) : undefined,\r\n        maxSpan: this.maxSpan,\r\n        autoApply: this.autoApply,\r\n        locale: {\r\n          format: this.format,\r\n          separator: this.separator,\r\n          applyLabel: this.applyLabel,\r\n          cancelLabel: this.cancelLabel,\r\n          fromLabel: this.fromLabel,\r\n          toLabel: this.toLabel,\r\n          customRangeLabel: this.customRangeLabel,\r\n          weekLabel: this.weekLabel,\r\n          daysOfWeek: this.daysOfWeek,\r\n          monthNames: this.monthNames,\r\n          firstDay: this.firstDay,\r\n        },\r\n      },\r\n      (start, end) => {\r\n        this.dateChanged.emit({ start, end });\r\n      },\r\n    );\r\n  }\r\n  disconnectedCallback() {\r\n    if (this.openDatePickerTimeout) {\r\n      clearTimeout(this.openDatePickerTimeout);\r\n    }\r\n    $(this.dateRangeInput).data('daterangepicker').remove();\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <input class=\"date-range-input\" type=\"text\" disabled={this.disabled} />\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  font-size: 13.65px !important;\r\n  width: 100%;\r\n}\r\n.mx-01 {\r\n  --m: 5px;\r\n  margin-right: var(--m) !important;\r\n  margin-left: var(--m) !important;\r\n}\r\n","import locales from '@/stores/locales.store';\r\nimport { calculateDaysBetweenDates } from '@/utils/booking';\r\nimport { Component, Host, Prop, State, Watch, h } from '@stencil/core';\r\nimport moment from 'moment';\r\n\r\n@Component({\r\n  tag: 'ir-date-view',\r\n  styleUrl: 'ir-date-view.css',\r\n  scoped: true,\r\n})\r\nexport class IrDateView {\r\n  @Prop() from_date: string | Date | moment.Moment;\r\n  @Prop() to_date: string | Date | moment.Moment;\r\n  @Prop() showDateDifference: boolean = true;\r\n  @Prop() dateOption: string = 'YYYY-MM-DD';\r\n  @State() dates: { from_date: string; to_date: string; date_diffrence: number };\r\n  componentWillLoad() {\r\n    this.initializeDates();\r\n  }\r\n  @Watch('from_date')\r\n  handleFromDateChange(newVal: any, oldVal: any) {\r\n    if (newVal !== oldVal) {\r\n      this.initializeDates();\r\n    }\r\n  }\r\n\r\n  @Watch('to_date')\r\n  handleToDateChange(newVal: any, oldVal: any) {\r\n    if (newVal !== oldVal) {\r\n      this.initializeDates();\r\n    }\r\n  }\r\n\r\n  initializeDates() {\r\n    this.convertDate('from_date', this.from_date);\r\n    this.convertDate('to_date', this.to_date);\r\n    const fromDate = moment(this.dates.from_date, 'MMM DD, YYYY').format('YYYY-MM-DD');\r\n    const toDate = moment(this.dates.to_date, 'MMM DD, YYYY').format('YYYY-MM-DD');\r\n    this.dates.date_diffrence = calculateDaysBetweenDates(fromDate, toDate);\r\n  }\r\n\r\n  convertDate(key: 'from_date' | 'to_date', date: string | Date | moment.Moment) {\r\n    this.dates = this.dates || {\r\n      from_date: '',\r\n      to_date: '',\r\n      date_diffrence: 0,\r\n    };\r\n    if (!date) {\r\n      return;\r\n    }\r\n    if (typeof date === 'string') {\r\n      this.dates[key] = moment(date, this.dateOption).format('MMM DD, YYYY');\r\n    } else if (date instanceof Date) {\r\n      this.dates[key] = moment(date).format('MMM DD, YYYY');\r\n    } else if (moment.isMoment(date)) {\r\n      this.dates[key] = date.format('MMM DD, YYYY');\r\n    } else {\r\n      console.error('Unsupported date type');\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <Host class=\"d-flex align-items-center\">\r\n        <span>{this.dates.from_date}</span>{' '}\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"mx-01\" height=\"14\" width=\"14\" viewBox=\"0 0 512 512\">\r\n          <path\r\n            fill=\"currentColor\"\r\n            d=\"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z\"\r\n          />\r\n        </svg>\r\n        <span>\r\n          {this.dates.to_date}{' '}\r\n          {this.showDateDifference && (\r\n            <span class=\"mx-01\">\r\n              {this.dates.date_diffrence}\r\n              {'   '}\r\n              {this.dates.date_diffrence > 1 ? ` ${locales.entries.Lcz_Nights}` : ` ${locales.entries.Lcz_Night}`}\r\n            </span>\r\n          )}\r\n        </span>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  margin: 0;\r\n  padding: 0;\r\n  box-sizing: border-box;\r\n}\r\n.backdrop {\r\n  opacity: 0;\r\n  background: rgba(0, 0, 0, 0.2);\r\n  position: fixed;\r\n  inset: 0;\r\n  z-index: 99999998;\r\n}\r\n.backdrop[data-state='opened'] {\r\n  animation: overlayShow 150ms cubic-bezier(0.16, 1, 0.3, 1) forwards;\r\n}\r\n.backdrop[data-state='closed'] {\r\n  opacity: 0;\r\n  pointer-events: none;\r\n}\r\n\r\n.modal-container {\r\n  box-sizing: border-box;\r\n  margin: 0;\r\n  box-shadow: hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px;\r\n  position: fixed;\r\n  z-index: 99999999;\r\n  overflow-y: auto;\r\n  top: 50%;\r\n  left: 50%;\r\n  background: white;\r\n  transform: translate(-50%, -50%);\r\n  width: 90%;\r\n  min-height: fit-content;\r\n  height: fit-content;\r\n  max-width: var(--ir-dialog-max-width, 40rem);\r\n  max-height: 85vh;\r\n  border-radius: 8px;\r\n  padding: 0;\r\n  animation: contentShow 300ms cubic-bezier(0.16, 1, 0.3, 1);\r\n}\r\n\r\n.modal-footer ::slotted(*) {\r\n  flex-direction: row;\r\n  align-items: center;\r\n  justify-content: end;\r\n  gap: 8px;\r\n  --ir-btn-width: inherit;\r\n}\r\n.modal-footer {\r\n  --ir-btn-width: 100%;\r\n}\r\n.modal-title ::slotted(*) {\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  color: #101828;\r\n  margin-bottom: 8px;\r\n}\r\n.modal-body ::slotted(*) {\r\n  font-size: 14px;\r\n  font-weight: 400;\r\n  color: #475467;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\n@keyframes overlayShow {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n@keyframes contentShow {\r\n  from {\r\n    opacity: 0;\r\n    transform: translate(-50%, -48%) scale(0.96);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translate(-50%, -50%) scale(1);\r\n  }\r\n}\r\n.dialog-close-button {\r\n  position: absolute;\r\n  top: 15px;\r\n  right: 15px;\r\n}\r\n/* md */\r\n","import { Component, Host, h, Element, Method, Listen, State, Event, EventEmitter, Prop, Watch } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-dialog',\r\n  styleUrl: 'ir-dialog.css',\r\n  shadow: true,\r\n})\r\nexport class IrDialog {\r\n  @Prop() open: boolean = false;\r\n  @Element() el: HTMLElement;\r\n  private firstFocusableElement: HTMLElement;\r\n  private lastFocusableElement: HTMLElement;\r\n\r\n  @State() isOpen = false;\r\n  @Event() openChange: EventEmitter<boolean>;\r\n  componentWillLoad() {\r\n    if (this.open) {\r\n      this.openModal();\r\n    }\r\n  }\r\n  componentDidLoad() {\r\n    this.prepareFocusTrap();\r\n  }\r\n\r\n  @Method()\r\n  async openModal() {\r\n    this.isOpen = true;\r\n    document.body.style.overflow = 'hidden';\r\n    setTimeout(() => {\r\n      this.prepareFocusTrap();\r\n    }, 10);\r\n    this.openChange.emit(this.isOpen);\r\n  }\r\n\r\n  @Method()\r\n  async closeModal() {\r\n    console.log('close');\r\n    if (!this.isOpen) {\r\n      return;\r\n    }\r\n    document.body.style.overflow = 'visible';\r\n    this.isOpen = false;\r\n    this.openChange.emit(this.isOpen);\r\n  }\r\n\r\n  @Watch('open')\r\n  handleOpenChange() {\r\n    if (this.open) {\r\n      this.openModal();\r\n    } else {\r\n      this.closeModal();\r\n    }\r\n  }\r\n\r\n  prepareFocusTrap() {\r\n    const focusableElements = 'button,ir-dropdown ,[href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])';\r\n    const focusableContent: NodeListOf<HTMLElement> = this.el.shadowRoot.querySelectorAll(focusableElements);\r\n    // console.log(focusableContent);\r\n    if (focusableContent.length === 0) return;\r\n    this.firstFocusableElement = focusableContent[0];\r\n    this.lastFocusableElement = focusableContent[focusableContent.length - 1];\r\n    this.firstFocusableElement.focus();\r\n  }\r\n\r\n  @Listen('keydown', { target: 'window' })\r\n  handleKeyDown(ev: KeyboardEvent) {\r\n    if (!this.isOpen) {\r\n      return;\r\n    }\r\n\r\n    let isTabPressed = ev.key === 'Tab';\r\n    if (ev.key === 'Escape' && this.isOpen) {\r\n      this.closeModal();\r\n    }\r\n    if (!isTabPressed) {\r\n      return;\r\n    }\r\n\r\n    // If focus is about to leave the last focusable element, redirect it to the first.\r\n    if (!ev.shiftKey && document.activeElement === this.lastFocusableElement) {\r\n      this.firstFocusableElement.focus();\r\n      ev.preventDefault();\r\n    }\r\n\r\n    // If focus is about to leave the first focusable element, redirect it to the last.\r\n    if (ev.shiftKey && document.activeElement === this.firstFocusableElement) {\r\n      this.lastFocusableElement.focus();\r\n      ev.preventDefault();\r\n    }\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    document.body.style.overflow = 'visible';\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"backdrop\" data-state={this.isOpen ? 'opened' : 'closed'} onClick={() => this.closeModal()}></div>\r\n        {this.isOpen && (\r\n          <div class=\"modal-container\" tabIndex={-1} role=\"dialog\" aria-labelledby=\"dialog1Title\" aria-describedby=\"dialog1Desc\">\r\n            <ir-icon id=\"close\" class=\"dialog-close-button\" onIconClickHandler={() => this.closeModal()}>\r\n              <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 384 512\" height={18} width={18}>\r\n                <path\r\n                  fill=\"#104064\"\r\n                  class=\"currentColor\"\r\n                  d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\"\r\n                />\r\n              </svg>\r\n            </ir-icon>\r\n            <div class={'modal-title'} id=\"dialog1Title\">\r\n              <slot name=\"modal-title\"></slot>\r\n            </div>\r\n            <div class=\"modal-body\" id=\"dialog1Desc\">\r\n              <slot name=\"modal-body\"></slot>\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n              <slot name=\"modal-footer\"></slot>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\n  display: block;\n}\n.extra-service-container {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.5rem;\n}\n.extra-service-container * {\n  padding: 0;\n  margin: 0;\n  box-sizing: border-box;\n}\n.extra-service-actions {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.extra-service-conditional-date {\n  margin-top: 0.5rem;\n}\n","import { Component, Event, EventEmitter, Host, Prop, h } from '@stencil/core';\nimport { ExtraService } from '@/models/booking.dto';\nimport { formatAmount } from '@/utils/utils';\nimport { colorVariants } from '@/components/ui/ir-icons/icons';\nimport locales from '@/stores/locales.store';\nimport moment from 'moment';\nimport { BookingService } from '@/services/booking.service';\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\n\n@Component({\n  tag: 'ir-extra-service',\n  styleUrl: 'ir-extra-service.css',\n  scoped: true,\n})\nexport class IrExtraService {\n  @Prop() service: ExtraService;\n  @Prop() bookingNumber: string;\n  @Prop() currencySymbol: string;\n\n  @Event() editExtraService: EventEmitter<ExtraService>;\n  @Event() resetBookingData: EventEmitter<null>;\n\n  private irModalRef: HTMLIrModalElement;\n  private bookingService = new BookingService();\n\n  private async deleteService() {\n    try {\n      await this.bookingService.doBookingExtraService({\n        service: this.service,\n        is_remove: true,\n        booking_nbr: this.bookingNumber,\n      });\n      this.resetBookingData.emit(null);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  render() {\n    return (\n      <Host>\n        <div class=\"p-1\">\n          <div class={'extra-service-container'}>\n            <p class=\"extra-service-description\">{this.service.description}</p>\n            <div class=\"extra-service-actions\">\n              {this.service.price && <p class=\"extra-service-price p-0 m-0 font-weight-bold\">{formatAmount(this.currencySymbol, this.service.price)}</p>}\n              <ir-button\n                id={`serviceEdit-${this.service.booking_system_id}`}\n                class=\"extra-service-edit-btn m-0 p-0\"\n                variant=\"icon\"\n                icon_name=\"edit\"\n                style={colorVariants.secondary}\n                onClickHanlder={() => this.editExtraService.emit(this.service)}\n              ></ir-button>\n              <ir-button\n                class=\"extra-service-delete-btn m-0 p-0\"\n                variant=\"icon\"\n                onClickHanlder={() => this.irModalRef.openModal()}\n                id={`roomDelete-${this.service.booking_system_id}`}\n                icon_name=\"trash\"\n                style={colorVariants.danger}\n              ></ir-button>\n            </div>\n          </div>\n          <div class=\"extra-service-conditional-date\">\n            {this.service.start_date && this.service.end_date ? (\n              <ir-date-view class=\"extra-service-date-view mr-1\" from_date={this.service.start_date} to_date={this.service.end_date} showDateDifference={false}></ir-date-view>\n            ) : (\n              this.service.start_date && <p class=\"extra-service-date-view\">{moment(new Date(this.service.start_date)).format('MMM DD, YYYY')}</p>\n            )}\n          </div>\n        </div>\n        <ir-modal\n          autoClose={false}\n          ref={el => (this.irModalRef = el)}\n          isLoading={isRequestPending('/Do_Booking_Extra_Service')}\n          onConfirmModal={this.deleteService.bind(this)}\n          iconAvailable={true}\n          icon=\"ft-alert-triangle danger h1\"\n          leftBtnText={locales.entries.Lcz_Cancel}\n          rightBtnText={locales.entries.Lcz_Delete}\n          leftBtnColor=\"secondary\"\n          rightBtnColor=\"danger\"\n          modalTitle={locales.entries.Lcz_Confirmation}\n          modalBody={`${locales.entries['Lcz_AreYouSureDoYouWantToRemove ']} ${locales.entries.Lcz_FromThisBooking}`}\n        ></ir-modal>\n      </Host>\n    );\n  }\n}\n","import { z } from 'zod';\r\nimport { IAllowedOptions, ICurrency, IPickupCurrency } from './calendarData';\r\n\r\nexport interface Booking {\r\n  agent: {\r\n    code: string;\r\n    id: number;\r\n    name: string;\r\n    verification_mode: null;\r\n  } | null;\r\n  arrival: Arrival;\r\n  allowed_actions: IAllowedActions[];\r\n  system_id: number;\r\n  booked_on: DateTime;\r\n  booking_nbr: string;\r\n  currency: Currency;\r\n  extra_services: ExtraService[] | null;\r\n  from_date: string;\r\n  guest: Guest;\r\n  extras: Extras[] | null;\r\n  occupancy: Occupancy;\r\n  origin: Origin;\r\n  property: Property;\r\n  remark: string;\r\n  ota_notes: IOtaNotes[];\r\n  rooms: Room[];\r\n  source: Source;\r\n  status: Status;\r\n  to_date: string;\r\n  total: number;\r\n  is_editable: boolean;\r\n  format: IFormat;\r\n  channel_booking_nbr: string | null;\r\n  is_direct: boolean;\r\n  financial: IFinancials;\r\n  pickup_info: IBookingPickupInfo | null;\r\n  cost: number | null;\r\n  is_pms_enabled: boolean;\r\n  promo_key: string | null;\r\n  is_in_loyalty_mode: boolean;\r\n}\r\n\r\nexport const ExtraServiceSchema = z.object({\r\n  booking_system_id: z.number().optional(),\r\n  cost: z.coerce.number().nullable(),\r\n  currency_id: z.number().min(1),\r\n  description: z.string().min(1),\r\n  end_date: z.string().nullable(),\r\n  price: z.coerce.number(),\r\n  start_date: z.string().nullable(),\r\n  system_id: z.number().optional(),\r\n});\r\n\r\nexport type ExtraService = z.infer<typeof ExtraServiceSchema>;\r\nexport interface Extras {\r\n  key: string;\r\n  value: any;\r\n}\r\nexport interface IOtaNotes {\r\n  statement: string;\r\n}\r\nexport interface IBookingPickupInfo {\r\n  currency: IPickupCurrency;\r\n  date: string;\r\n  details: string;\r\n  hour: number;\r\n  minute: number;\r\n  nbr_of_units: number;\r\n  selected_option: IAllowedOptions;\r\n  total: number;\r\n}\r\nexport interface IAllowedActions {\r\n  code: string;\r\n  description: string;\r\n}\r\nexport interface IFinancials {\r\n  due_amount: number;\r\n  due_dates: IDueDate[];\r\n  payments: IPayment[] | null;\r\n  total_amount: number;\r\n  gross_total: number;\r\n  gross_cost: number;\r\n  invoice_nbr: string;\r\n}\r\nexport interface IPayment {\r\n  id: number | null;\r\n  date: string;\r\n  amount: number;\r\n  currency: ICurrency;\r\n  designation: string;\r\n  reference: string;\r\n}\r\nexport interface IDueDate {\r\n  amount: number;\r\n  currencysymbol: string;\r\n  date: string;\r\n  description: string;\r\n  room: string;\r\n}\r\nexport interface IFormat {\r\n  from_date: string;\r\n  to_date: string;\r\n}\r\nexport interface Arrival {\r\n  code: string;\r\n  description: string;\r\n}\r\n\r\nexport interface DateTime {\r\n  date: string;\r\n  hour: number;\r\n  minute: number;\r\n}\r\n\r\nexport interface Currency {\r\n  code: string;\r\n  id: number;\r\n  symbol: string;\r\n}\r\n\r\nexport interface Guest {\r\n  address: string | null;\r\n  city: string | null;\r\n  country_id: number | null;\r\n  dob: string | null;\r\n  email: string | null;\r\n  first_name: string;\r\n  id: number;\r\n  last_name: string | null;\r\n  mobile: string | null;\r\n  country_phone_prefix: string | null;\r\n  subscribe_to_news_letter: boolean | null;\r\n  cci?: ICCI | null;\r\n  alternative_email?: string;\r\n}\r\nexport interface ICCI {\r\n  nbr: string | number;\r\n  holder_name: string | number;\r\n  expiry_month: string | number;\r\n  expiry_year: string | number;\r\n  cvc?: string | null;\r\n}\r\nexport interface Occupancy {\r\n  adult_nbr: number;\r\n  children_nbr: number;\r\n  infant_nbr: number | null;\r\n}\r\n\r\nexport interface Origin {\r\n  Icon: string;\r\n  Label: string;\r\n}\r\n\r\nexport interface Property {\r\n  calendar_legends: null;\r\n  currency: null;\r\n  id: number;\r\n  name: string;\r\n  roomtypes: null;\r\n}\r\n\r\nexport interface Room {\r\n  days: Day[];\r\n  from_date: string;\r\n  guest: Guest;\r\n  occupancy_default: number;\r\n  notes: string | null;\r\n  occupancy: Occupancy;\r\n  physicalroom: null;\r\n  bed_preference: number | null;\r\n  rateplan: RatePlan;\r\n  roomtype: RoomType;\r\n  to_date: string;\r\n  total: number;\r\n  identifier: string;\r\n  unit: string | number | IUnit | null;\r\n  ota_taxes: IOtaTax[];\r\n  cost: number | null;\r\n  gross_cost: number;\r\n  gross_total: number;\r\n  guarantee: number;\r\n  gross_guarantee: number;\r\n}\r\nexport interface IOtaTax {\r\n  amount: number;\r\n  currency: IOtaTaxCurrency;\r\n  is_exlusive: boolean;\r\n  name: string;\r\n}\r\nexport interface IOtaTaxCurrency {\r\n  code: string;\r\n  id: number;\r\n  symbol: string;\r\n}\r\nexport interface IUnit {\r\n  calendar_cell: null;\r\n  id: 2;\r\n  name: '402';\r\n}\r\nexport interface Day {\r\n  amount: number;\r\n  date: string;\r\n  cost: number | null;\r\n}\r\n\r\nexport interface RatePlan {\r\n  cancelation: string | null;\r\n  guarantee: null;\r\n  id: number;\r\n  name: string;\r\n  rate_restrictions: null;\r\n  variations: null;\r\n  selected_variation: IVariations;\r\n  is_non_refundable: boolean;\r\n  custom_text: string | null;\r\n  is_active: boolean;\r\n}\r\nexport interface IVariations {\r\n  adult_child_offering: string;\r\n  adult_nbr: number;\r\n  amount: number | null;\r\n  child_nbr: number;\r\n}\r\nexport interface RoomType {\r\n  availabilities: null;\r\n  id: number;\r\n  inventory: number;\r\n  name: string;\r\n  physicalrooms: null;\r\n  rate: number;\r\n  rateplans: null;\r\n  is_active: boolean;\r\n}\r\n\r\nexport interface Source {\r\n  code: string | null;\r\n  description: string;\r\n  tag: string | null;\r\n}\r\n\r\nexport interface Status {\r\n  code: string;\r\n  description: string;\r\n}\r\n\r\nexport interface IPmsLog {\r\n  is_acknowledged: boolean;\r\n  is_sent: boolean;\r\n  sent_date: string;\r\n  sent_hour: number;\r\n  sent_minute: number;\r\n}\r\n",":host {\n  display: block;\n  --ir-input-border-color: #cacfe7;\n}\n\n:host .input-group-text {\n  border-color: var(--ir-input-border-color);\n}\n.currency-ph {\n  padding: 0;\n  margin: 0;\n  color: #3b4781;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0 0 0 0.25rem;\n  border-top: 1px solid var(--ir-input-border-color);\n  border-bottom: 1px solid var(--ir-input-border-color);\n  border-left: 1px solid transparent;\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\n}\n\n.service-description-input {\n  height: 70px !important;\n}\n\n.service-description .input-group-prepend {\n  background-color: #f4f5fa;\n  border: 1px solid var(--ir-input-border-color);\n  border-top-left-radius: 0.25rem;\n  border-bottom-left-radius: 0.25rem;\n}\n\n.service-description .input-group-text {\n  height: fit-content;\n  border: 0;\n  padding-top: 0.75rem !important;\n}\n\n.price-input-group:focus-within .currency-ph,\n.cost-input-group:focus-within .currency-ph {\n  border-top: 1px solid #1e9ff2;\n  border-bottom: 1px solid #1e9ff2;\n  border-left: 1px solid #1e9ff2;\n}\n.currency-ph[data-state='error'] {\n  border-color: var(--red, #ff4961);\n}\n.price-input:focus {\n  border-right-width: 1px !important;\n}\n\n.is-invalid {\n  background-image: none !important;\n}\n.price-input,\n.cost-input {\n  border-left: 0;\n}\n@media (min-width: 640px) {\n  .row-group {\n    display: flex;\n    align-items: center;\n  }\n  .until-prepend,\n  .cost-input-placeholder {\n    border-top-left-radius: 0 !important;\n    border-bottom-left-radius: 0 !important;\n  }\n  .date-from,\n  .price-input {\n    border-right-width: 0 !important;\n    border-top-right-radius: 0 !important;\n    border-bottom-right-radius: 0 !important;\n  }\n}\n","import { Booking, ExtraService, ExtraServiceSchema } from '@/models/booking.dto';\nimport { BookingService } from '@/services/booking.service';\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\nimport locales from '@/stores/locales.store';\nimport { Component, Event, EventEmitter, Host, Prop, State, h } from '@stencil/core';\nimport { ZodError } from 'zod';\n\n@Component({\n  tag: 'ir-extra-service-config',\n  styleUrl: 'ir-extra-service-config.css',\n  scoped: true,\n})\nexport class IrExtraServiceConfig {\n  @Prop() booking: Pick<Booking, 'from_date' | 'to_date' | 'currency' | 'booking_nbr'>;\n  @Prop() service: ExtraService;\n\n  @State() s_service: ExtraService;\n  @State() error: boolean;\n  @State() fromDateClicked: boolean;\n  @State() toDateClicked: boolean;\n\n  @Event() closeModal: EventEmitter<null>;\n  @Event() resetBookingData: EventEmitter<null>;\n\n  private bookingService = new BookingService();\n\n  componentWillLoad() {\n    if (this.service) {\n      this.s_service = { ...this.service };\n    }\n  }\n\n  private async saveAmenity() {\n    try {\n      ExtraServiceSchema.parse(this.s_service);\n      await this.bookingService.doBookingExtraService({\n        service: this.s_service,\n        booking_nbr: this.booking.booking_nbr,\n        is_remove: false,\n      });\n      this.resetBookingData.emit(null);\n      this.closeModal.emit(null);\n    } catch (error) {\n      if (error instanceof ZodError) {\n        this.error = true;\n      }\n      console.error(error);\n    }\n  }\n  private updateService(params: Partial<ExtraService>) {\n    let prevService: ExtraService = this.s_service;\n    if (!prevService) {\n      prevService = {\n        cost: null,\n        description: null,\n        end_date: null,\n        start_date: null,\n        price: null,\n        currency_id: this.booking.currency.id,\n      };\n    }\n    this.s_service = { ...prevService, ...params };\n  }\n  render() {\n    return (\n      <Host class={'p-0'}>\n        <ir-title class=\"px-1\" onCloseSideBar={() => this.closeModal.emit(null)} label={'Extra Services'} displayContext=\"sidebar\"></ir-title>\n        <section class={'px-1'}>\n          {/* Description */}\n          <fieldset class=\"input-group mb-1 mt-3 service-description\">\n            <div class=\"input-group-prepend\">\n              <span class=\"input-group-text\">Description</span>\n            </div>\n            <textarea\n              value={this.s_service?.description}\n              class={`form-control service-description-input ${this.error && !this.s_service?.description ? 'is-invalid' : ''}`}\n              style={{ height: '7rem' }}\n              maxLength={250}\n              onChange={e => this.updateService({ description: (e.target as HTMLTextAreaElement).value })}\n              aria-label=\"Amenity description\"\n            ></textarea>\n          </fieldset>\n          {/* Dates */}\n          <div class={'row-group mb-1'}>\n            <div class=\"input-group mb-1 mb-sm-0\">\n              <div class=\"input-group-prepend\">\n                <span class=\"input-group-text\" id=\"basic-addon1\">\n                  Dates on\n                </span>\n              </div>\n              <div class=\"form-control p-0 m-0 d-flex align-items-center justify-content-center date-from\">\n                <ir-date-picker\n                  date={this.s_service?.start_date ? new Date(this.s_service?.start_date) : new Date(this.booking.from_date)}\n                  class=\"hidden-date-picker\"\n                  autoApply\n                  singleDatePicker\n                  minDate={this.booking.from_date}\n                  maxDate={this.booking.to_date}\n                  onDateChanged={e => this.updateService({ start_date: e.detail.start.format('YYYY-MM-DD') })}\n                ></ir-date-picker>\n              </div>\n            </div>\n            <div class=\"input-group mb-1 mb-sm-0 \">\n              <div class=\"input-group-prepend \">\n                <span class=\"input-group-text until-prepend\" id=\"basic-addon1\">\n                  and until\n                </span>\n              </div>\n              <div class=\"form-control p-0 m-0 d-flex align-items-center justify-content-center\">\n                <ir-date-picker\n                  date={this.s_service?.end_date ? new Date(this.s_service?.end_date) : new Date(this.booking.to_date)}\n                  class=\"hidden-date-picker\"\n                  autoApply\n                  singleDatePicker\n                  minDate={this.booking.from_date}\n                  maxDate={this.booking.to_date}\n                  onDateChanged={e => {\n                    this.updateService({ end_date: e.detail.start.format('YYYY-MM-DD') });\n                  }}\n                ></ir-date-picker>\n              </div>\n            </div>\n          </div>\n          {/* Prices and cost */}\n          <div class={'row-group'}>\n            <div class=\"input-group price-input-group  mb-1 mb-sm-0\">\n              <div class=\"input-group-prepend\">\n                <span class=\"input-group-text\">Price</span>\n              </div>\n              <span class=\"currency-ph\" data-state={this.error && this.s_service.price === null ? 'error' : ''}>\n                {this.booking.currency.symbol}\n              </span>\n              <input\n                class={`form-control price-input ${this.error && this.s_service.price === null ? 'is-invalid' : ''}`}\n                onInput={e => this.updateService({ price: parseFloat((e.target as HTMLInputElement).value) })}\n                onBlur={e => {\n                  const input = e.target as HTMLInputElement;\n                  const formattedValue = parseFloat(input.value).toFixed(2);\n                  input.value = formattedValue;\n                  this.updateService({ price: parseFloat(formattedValue) });\n                }}\n                type=\"number\"\n                step=\"0.01\"\n                aria-label=\"Price\"\n                aria-describedby=\"amenity price\"\n                value={this.s_service?.price}\n              />\n            </div>\n            <div class=\"input-group cost-input-group  mb-1 mb-sm-0\">\n              <div class=\"input-group-prepend \">\n                <span class=\"input-group-text cost-input-placeholder\">Cost</span>\n              </div>\n              <span class=\"currency-ph\">{this.booking.currency.symbol}</span>\n              <input\n                type=\"number\"\n                onInput={e => this.updateService({ cost: parseFloat((e.target as HTMLInputElement).value) })}\n                onBlur={e => {\n                  const input = e.target as HTMLInputElement;\n                  const formattedValue = parseFloat(input.value).toFixed(2);\n                  input.value = formattedValue;\n                  this.updateService({ cost: parseFloat(formattedValue) });\n                }}\n                step={'0.01'}\n                class=\"form-control cost-input\"\n                aria-label=\"Cost\"\n                aria-describedby=\"amenity cost\"\n                value={this.s_service?.cost}\n              />\n            </div>\n          </div>\n          <div class={'d-flex flex-column flex-sm-row mt-3'}>\n            <ir-button\n              onClick={() => this.closeModal.emit(null)}\n              btn_styles=\"justify-content-center\"\n              class={`mb-1 mb-sm-0 flex-fill mr-sm-1`}\n              icon=\"\"\n              text={locales.entries.Lcz_Cancel}\n              btn_color=\"secondary\"\n            ></ir-button>\n\n            <ir-button\n              btn_styles=\"justify-content-center align-items-center\"\n              class={'m-0 flex-fill text-center'}\n              icon=\"\"\n              isLoading={isRequestPending('/Do_Booking_Extra_Service')}\n              text={locales.entries.Lcz_Save}\n              btn_color=\"primary\"\n              onClick={this.saveAmenity.bind(this)}\n            ></ir-button>\n          </div>\n        </section>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n","import { Component, Fragment, Host, Prop, h } from '@stencil/core';\nimport { Booking } from '@/models/booking.dto';\n@Component({\n  tag: 'ir-extra-services',\n  styleUrl: 'ir-extra-services.css',\n  scoped: true,\n})\nexport class IrExtraServices {\n  @Prop() booking: Pick<Booking, 'currency' | 'extra_services' | 'booking_nbr'>;\n\n  render() {\n    return (\n      <Host class={'card p-0 '}>\n        {this.booking.extra_services?.map((service, index) => (\n          <Fragment>\n            <ir-extra-service\n              bookingNumber={this.booking.booking_nbr}\n              currencySymbol={this.booking.currency.symbol}\n              key={service.booking_system_id}\n              service={service}\n            ></ir-extra-service>\n            {index !== this.booking.extra_services.length - 1 && <hr class=\"mr-2 ml-2 my-0 p-0\" />}\n          </Fragment>\n        ))}\n      </Host>\n    );\n  }\n}\n",".input-group-text {\r\n  min-width: 10rem;\r\n  text-align: left;\r\n}\r\n.mobilePrefixSelect {\r\n  border-right-width: 0;\r\n  border-top-right-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n}\r\n.mobilePrefixInput {\r\n  border-top-left-radius: 0;\r\n  border-bottom-left-radius: 0;\r\n}\r\n\r\n/* custome checkbox */\r\n.check-container {\r\n  position: relative;\r\n  /* padding-left: 30px; */\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  -webkit-user-select: none;\r\n  -moz-user-select: none;\r\n  -ms-user-select: none;\r\n  user-select: none;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.check-container input {\r\n  position: relative;\r\n  opacity: 0;\r\n  cursor: pointer;\r\n  height: 0;\r\n  width: 0;\r\n}\r\n.check-container .checkmark {\r\n  position: relative;\r\n  top: 0;\r\n  left: 0;\r\n  height: 20px;\r\n  width: 20px;\r\n  border: 1px solid #cacfe7;\r\n  border-radius: 4px;\r\n  transition: all 0.3s ease;\r\n}\r\n.check-container input:checked ~ .checkmark {\r\n  background-color: #1e9ff2;\r\n  border-color: #1e9ff2;\r\n}\r\n.checkmark:after {\r\n  content: '';\r\n  position: absolute;\r\n  display: none;\r\n}\r\n.check-container input:checked ~ .checkmark:after {\r\n  display: block;\r\n}\r\n.check-label {\r\n  margin-left: 10px !important;\r\n}\r\n.check-container .checkmark:after {\r\n  left: 6px;\r\n  top: 3px;\r\n  width: 6px;\r\n  height: 10px;\r\n  border: solid white;\r\n  border-width: 0 2px 2px 0;\r\n  -webkit-transform: rotate(45deg);\r\n  -ms-transform: rotate(45deg);\r\n  transform: rotate(45deg);\r\n}\r\n.ir-card-header {\r\n  width: 100%;\r\n  border-bottom: 1px solid #e4e5ec;\r\n}\r\n.close-icon {\r\n  margin: 0;\r\n}\r\n.border-theme {\r\n  border: 1px solid #cacfe7;\r\n}\r\n","import { Component, State, h, Prop, EventEmitter, Event } from '@stencil/core';\r\nimport { selectOption } from '@/common/models';\r\nimport { Guest } from '@/models/booking.dto';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport { ICountry } from '@/components';\r\nimport { ILocale } from '@/stores/locales.store';\r\n\r\n@Component({\r\n  tag: 'ir-guest-info',\r\n  styleUrl: 'ir-guest-info.css',\r\n  scoped: true,\r\n})\r\nexport class GuestInfo {\r\n  @Prop({ mutable: true, reflect: true }) setupDataCountries: selectOption[] = null;\r\n  @Prop({ mutable: true, reflect: true }) setupDataCountriesCode: selectOption[] = null;\r\n  @Prop() defaultTexts: ILocale;\r\n  @Prop() language: string;\r\n  @Prop() email: string;\r\n  @Prop() booking_nbr: string;\r\n\r\n  @State() countries: ICountry[];\r\n  @State() submit: boolean = false;\r\n  @State() guest: Guest | null = null;\r\n  @State() isLoading: boolean = false;\r\n  @Event() closeSideBar: EventEmitter<null>;\r\n  @Event({ bubbles: true }) resetBookingData: EventEmitter<null>;\r\n\r\n  private bookingService = new BookingService();\r\n\r\n  async componentWillLoad() {\r\n    await this.init();\r\n  }\r\n  async init() {\r\n    try {\r\n      const [guest, countries] = await Promise.all([this.bookingService.fetchGuest(this.email), this.bookingService.getCountries(this.language)]);\r\n      this.countries = countries;\r\n      this.guest = guest;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  handleInputChange(key: keyof Guest, value: any) {\r\n    this.guest = { ...this.guest, [key]: value };\r\n  }\r\n\r\n  async editGuest() {\r\n    try {\r\n      this.isLoading = true;\r\n      await this.bookingService.editExposedGuest(this.guest, this.booking_nbr);\r\n      this.closeSideBar.emit(null);\r\n      this.resetBookingData.emit(null);\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      this.isLoading = false;\r\n      console.log('done');\r\n    }\r\n  }\r\n  render() {\r\n    if (!this.guest) {\r\n      return null;\r\n    }\r\n    return [\r\n      <div class=\"p-0\">\r\n        <div class=\"position-sticky mb-1 shadow-none p-0\">\r\n          <div class=\"d-flex align-items-center justify-content-between ir-card-header py-1 p-0\">\r\n            <h3 class=\"card-title text-left font-medium-2 px-1 my-0\">{this.defaultTexts.entries.Lcz_GuestDetails}</h3>\r\n            <ir-icon\r\n              class=\"close close-icon px-1\"\r\n              onIconClickHandler={() => {\r\n                this.closeSideBar.emit(null);\r\n              }}\r\n            >\r\n              <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 384 512\" height={20} width={20}>\r\n                <path d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\" />\r\n              </svg>\r\n            </ir-icon>\r\n          </div>\r\n        </div>\r\n        <div class=\"card-content collapse show\">\r\n          <div class=\"card-body pt-0 px-1\">\r\n            <ir-input-text\r\n              placeholder=\"\"\r\n              label={this.defaultTexts.entries.Lcz_FirstName}\r\n              name=\"firstName\"\r\n              submited={this.submit}\r\n              value={this.guest?.first_name}\r\n              required\r\n              onTextChange={e => this.handleInputChange('first_name', e.detail)}\r\n            ></ir-input-text>\r\n            <ir-input-text\r\n              placeholder=\"\"\r\n              label={this.defaultTexts.entries.Lcz_LastName}\r\n              name=\"lastName\"\r\n              submited={this.submit}\r\n              value={this.guest?.last_name}\r\n              required\r\n              onTextChange={e => this.handleInputChange('last_name', e.detail)}\r\n            ></ir-input-text>\r\n            <ir-input-text\r\n              placeholder=\"\"\r\n              label={this.defaultTexts.entries.Lcz_Email}\r\n              name=\"email\"\r\n              submited={this.submit}\r\n              value={this.guest?.email}\r\n              required\r\n              onTextChange={e => this.handleInputChange('email', e.detail)}\r\n            ></ir-input-text>\r\n            <ir-input-text\r\n              placeholder=\"\"\r\n              label={this.defaultTexts.entries.Lcz_AlternativeEmail}\r\n              name=\"altEmail\"\r\n              value={this.guest?.alternative_email}\r\n              onTextChange={e => this.handleInputChange('alternative_email', e.detail)}\r\n            ></ir-input-text>\r\n            {/* <ir-input-text label=\"Password\" placeholder=\"\" name=\"password\" submited={this.submit} type=\"password\" value={this.Model.password} required></ir-input-text> */}\r\n            <ir-select\r\n              selectContainerStyle=\"mb-1\"\r\n              required\r\n              name=\"country\"\r\n              submited={this.submit}\r\n              label={this.defaultTexts.entries.Lcz_Country}\r\n              selectedValue={this.guest.country_id?.toString() ?? ''}\r\n              data={this.countries.map(item => {\r\n                return {\r\n                  value: item.id.toString(),\r\n                  text: item.name,\r\n                };\r\n              })}\r\n              firstOption={'...'}\r\n              onSelectChange={e => this.handleInputChange('country_id', e.detail)}\r\n            ></ir-select>\r\n            {/* <ir-input-text\r\n              placeholder=\"\"\r\n              label={this.defaultTexts.entries.Lcz_City}\r\n              name=\"city\"\r\n              value={this.guest.city}\r\n              onTextChange={e => this.handleInputChange('city', e.detail)}\r\n            ></ir-input-text>\r\n            <ir-input-text\r\n              placeholder=\"\"\r\n              label={this.defaultTexts.entries.Lcz_Address}\r\n              name=\"address\"\r\n              value={this.guest.address}\r\n              onTextChange={e => this.handleInputChange('address', e.detail)}\r\n            ></ir-input-text> */}\r\n\r\n            <div class=\"form-group mr-0\">\r\n              <div class=\"input-group row m-0 p-0\">\r\n                <div class={`input-group-prepend col-3 p-0 text-dark border-none`}>\r\n                  <label class={`input-group-text  border-theme flex-grow-1 text-dark  `}>\r\n                    {this.defaultTexts.entries.Lcz_MobilePhone}\r\n                    {'*'}\r\n                  </label>\r\n                </div>\r\n                <select\r\n                  class={` form-control text-md  col-2 py-0 mobilePrefixSelect`}\r\n                  onInput={e => this.handleInputChange('country_phone_prefix', (e.target as HTMLSelectElement).value)}\r\n                  required\r\n                >\r\n                  <option value={null}>...</option>\r\n                  {this.countries.map(item => (\r\n                    <option selected={this.guest.country_phone_prefix?.toString() === item.phone_prefix.toString()} value={item.phone_prefix}>\r\n                      {item.phone_prefix}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n                <input\r\n                  type=\"text\"\r\n                  required\r\n                  value={this.guest.mobile}\r\n                  class={'form-control flex-fill mobilePrefixInput'}\r\n                  onInput={e => this.handleInputChange('mobile', (e.target as HTMLInputElement).value)}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div class={'p-0 m-0'}>\r\n              <label class={`check-container m-0 p-0`}>\r\n                <input\r\n                  class={'m-0 p-0'}\r\n                  type=\"checkbox\"\r\n                  name=\"newsletter\"\r\n                  checked={this.guest.subscribe_to_news_letter}\r\n                  onInput={e => this.handleInputChange('subscribe_to_news_letter', (e.target as HTMLInputElement).checked)}\r\n                />\r\n                <span class=\"checkmark m-0 p-0\"></span>\r\n                <span class={'m-0 p-0  check-label'}>{this.defaultTexts.entries.Lcz_Newsletter}</span>\r\n              </label>\r\n            </div>\r\n\r\n            <hr />\r\n            <ir-button\r\n              isLoading={this.isLoading}\r\n              btn_disabled={this.isLoading}\r\n              btn_styles=\"d-flex align-items-center justify-content-center\"\r\n              text={this.defaultTexts.entries.Lcz_Save}\r\n              onClickHanlder={this.editGuest.bind(this)}\r\n              color=\"btn-primary\"\r\n            ></ir-button>\r\n          </div>\r\n        </div>\r\n      </div>,\r\n    ];\r\n  }\r\n}\r\n",":host {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.icon-button {\r\n  all: unset;\r\n  margin: 0;\r\n  padding: 0;\r\n  color: #6b6f82;\r\n}\r\n.icon-button:hover {\r\n  cursor: pointer;\r\n  color: #104064;\r\n}\r\n","import { Component, Prop, h, Event, EventEmitter } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-icon',\r\n  styleUrl: 'ir-icon.css',\r\n  scoped: true,\r\n})\r\nexport class IrIcon {\r\n  @Prop() icon = 'ft-check';\r\n\r\n  @Event({ bubbles: true, composed: true }) iconClickHandler: EventEmitter;\r\n\r\n  render() {\r\n    return (\r\n      <button class=\"icon-button\" onClick={() => this.iconClickHandler.emit()}>\r\n        <slot name=\"icon\"></slot>\r\n      </button>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  box-sizing: border-box;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.icon {\r\n  height: var(--icon-size, 1.25rem);\r\n  width: var(--icon-size, 1.25rem);\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n","import { Component, Prop, h } from '@stencil/core';\r\nimport icons, { TIcons } from './icons';\r\n\r\n@Component({\r\n  tag: 'ir-icons',\r\n  styleUrl: 'ir-icons.css',\r\n  scoped: true,\r\n})\r\nexport class IrIcons {\r\n  @Prop() name: TIcons;\r\n  @Prop() svgClassName: string;\r\n\r\n  render() {\r\n    const svgPath = icons[this.name] || null;\r\n    if (!svgPath) {\r\n      return null;\r\n    }\r\n    return (\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox={svgPath.viewBox} class={`icon ${this.svgClassName}`}>\r\n        <path fill=\"currentColor\" d={svgPath.d}></path>\r\n      </svg>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.border-theme {\r\n  border: 1px solid #cacfe7;\r\n}\r\n.icon-container {\r\n  color: #3b4781;\r\n  border: 1px solid #cacfe7;\r\n  font-size: 0.975rem;\r\n  height: 2rem;\r\n  background: rgb(255, 255, 255);\r\n  padding-right: 0 !important;\r\n  border-right: 0;\r\n  border-top-right-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n  transition: border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n}\r\ninput:focus {\r\n  border-color: #1e9ff2 !important;\r\n}\r\n.input-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  box-sizing: border-box;\r\n  flex: 1;\r\n}\r\n.input-container input {\r\n  padding-left: 5px !important;\r\n  padding-right: 5px !important;\r\n  border-left: 0;\r\n  border-top-left-radius: 0 !important;\r\n  border-bottom-left-radius: 0 !important;\r\n}\r\n.icon-container[data-state='focus'] {\r\n  border-color: var(--blue);\r\n}\r\n.icon-container[data-disabled] {\r\n  background-color: #eceff1;\r\n  border-color: rgba(118, 118, 118, 0.3);\r\n}\r\n.danger-border {\r\n  border-color: var(--red);\r\n}\r\n","import { Component, Prop, h, Event, EventEmitter, State, Watch } from '@stencil/core';\r\nimport { v4 } from 'uuid';\r\n\r\n@Component({\r\n  tag: 'ir-input-text',\r\n  styleUrl: 'ir-input-text.css',\r\n  scoped: true,\r\n})\r\nexport class IrInputText {\r\n  @Prop() name: string;\r\n  @Prop() value;\r\n  @Prop() label = '<label>';\r\n  @Prop() placeholder = '<placeholder>';\r\n  @Prop() inputStyles = '';\r\n  @Prop() required: boolean;\r\n  @Prop() LabelAvailable: boolean = true;\r\n  @Prop() readonly: boolean = false;\r\n  @Prop() type = 'text';\r\n  @Prop() submited: boolean = false;\r\n  @Prop() inputStyle: boolean = true;\r\n  @Prop() size: 'sm' | 'md' | 'lg' = 'md';\r\n  @Prop() textSize: 'sm' | 'md' | 'lg' = 'md';\r\n  @Prop() labelPosition: 'left' | 'right' | 'center' = 'left';\r\n  @Prop() labelBackground: 'primary' | 'secondary' | 'success' | 'danger' | 'warning' | 'info' | 'light' | 'dark' | null = null;\r\n  @Prop() labelColor: 'primary' | 'secondary' | 'success' | 'danger' | 'warning' | 'info' | 'light' | 'dark' = 'dark';\r\n  @Prop() labelBorder: 'theme' | 'primary' | 'secondary' | 'success' | 'danger' | 'warning' | 'info' | 'light' | 'dark' | 'none' = 'theme';\r\n  @Prop() labelWidth: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 = 3;\r\n  @Prop() variant: 'default' | 'icon' = 'default';\r\n  @Prop() disabled: boolean = false;\r\n  @Prop() error: boolean = false;\r\n\r\n  @State() valid: boolean;\r\n  @State() initial: boolean = true;\r\n  @State() inputFocused: boolean = false;\r\n\r\n  @State() isError: boolean = false;\r\n\r\n  @Event({ bubbles: true, composed: true }) textChange: EventEmitter<any>;\r\n  @Event() inputBlur: EventEmitter<FocusEvent>;\r\n  connectedCallback() {}\r\n  disconnectedCallback() {}\r\n\r\n  @Watch('value')\r\n  watchHandler(newValue: string) {\r\n    if (newValue !== '' && this.required) {\r\n      this.valid = true;\r\n    }\r\n  }\r\n  @Watch('submited')\r\n  watchHandler2(newValue: boolean) {\r\n    if (newValue && this.required) {\r\n      this.initial = false;\r\n    }\r\n  }\r\n  @Watch('aria-invalid')\r\n  handleAriaInvalidChange(newValue) {\r\n    if (newValue === 'true') {\r\n      this.isError = true;\r\n    } else {\r\n      this.isError = false;\r\n    }\r\n  }\r\n\r\n  handleInputChange(event) {\r\n    this.initial = false;\r\n    if (this.required) {\r\n      this.valid = event.target.checkValidity();\r\n      const value = event.target.value;\r\n      this.textChange.emit(value);\r\n    } else {\r\n      this.textChange.emit(event.target.value);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const id = v4();\r\n    if (this.variant === 'icon') {\r\n      return (\r\n        <fieldset class=\"position-relative has-icon-left input-container\">\r\n          <label htmlFor={id} class=\"input-group-prepend bg-white m-0\">\r\n            <span\r\n              data-disabled={this.disabled}\r\n              data-state={this.inputFocused ? 'focus' : ''}\r\n              class={`input-group-text icon-container bg-white ${(this.error || this.isError) && 'danger-border'}`}\r\n              id=\"basic-addon1\"\r\n            >\r\n              <slot name=\"icon\"></slot>\r\n            </span>\r\n          </label>\r\n          <input\r\n            type={this.type}\r\n            onFocus={() => (this.inputFocused = true)}\r\n            required={this.required}\r\n            onBlur={e => {\r\n              this.inputFocused = false;\r\n              this.inputBlur.emit(e);\r\n            }}\r\n            disabled={this.disabled}\r\n            class={`form-control bg-white pl-0 input-sm rate-input py-0 m-0 rateInputBorder ${(this.error || this.isError) && 'danger-border'}`}\r\n            id={id}\r\n            value={this.value}\r\n            placeholder={this.placeholder}\r\n            onInput={this.handleInputChange.bind(this)}\r\n          />\r\n        </fieldset>\r\n      );\r\n    }\r\n    let className = 'form-control';\r\n    let label = (\r\n      <div class={`input-group-prepend col-${this.labelWidth} p-0 text-${this.labelColor}`}>\r\n        <label\r\n          class={`input-group-text ${this.labelPosition === 'right' ? 'justify-content-end' : this.labelPosition === 'center' ? 'justify-content-center' : ''} ${\r\n            this.labelBackground ? 'bg-' + this.labelBackground : ''\r\n          } flex-grow-1 text-${this.labelColor} border-${this.labelBorder === 'none' ? 0 : this.labelBorder} `}\r\n        >\r\n          {this.label}\r\n          {this.required ? '*' : ''}\r\n        </label>\r\n      </div>\r\n    );\r\n    if (!this.LabelAvailable) {\r\n      label = '';\r\n    }\r\n    if (this.inputStyle === false) {\r\n      className = '';\r\n    }\r\n    if (this.required && !this.valid && !this.initial) {\r\n      className = `${className} border-danger`;\r\n    }\r\n\r\n    return (\r\n      <div class=\"form-group\">\r\n        <div class=\"input-group row m-0\">\r\n          {label}\r\n          <input\r\n            readOnly={this.readonly}\r\n            type={this.type}\r\n            class={`${className} ${this.error || this.isError ? 'border-danger' : ''} form-control-${this.size} text-${this.textSize} col-${\r\n              this.LabelAvailable ? 12 - this.labelWidth : 12\r\n            } ${this.readonly && 'bg-white'} ${this.inputStyles}`}\r\n            onBlur={e => this.inputBlur.emit(e)}\r\n            placeholder={this.placeholder}\r\n            value={this.value}\r\n            onInput={this.handleInputChange.bind(this)}\r\n            required={this.required}\r\n            disabled={this.disabled}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/* .loader {\r\n  width: 1.25rem;\r\n  height: 1.25rem;\r\n  border: 2.5px solid #ffffff;\r\n  border-bottom-color: transparent;\r\n  border-radius: 50%;\r\n  display: inline-block;\r\n  box-sizing: border-box;\r\n  animation: rotation 1s linear infinite;\r\n}\r\n.loaderContainer {\r\n  padding: 1rem 2rem;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 30px;\r\n  gap: 1rem;\r\n  background: rgb(36, 36, 36);\r\n  color: white;\r\n  box-sizing: border-box;\r\n  opacity: 0;\r\n  animation: 300ms ease-in-out fadeIn forwards;\r\n}\r\n.loaderContainer p {\r\n  margin: 0;\r\n  padding: 0;\r\n  font-weight: 500;\r\n}\r\n.loadingScreenContainer {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100vh;\r\n  width: 100vw;\r\n  z-index: 100000;\r\n  background: rgba(255, 255, 255, 0.4);\r\n  pointer-events: all;\r\n  display: flex;\r\n  align-items: end;\r\n  justify-content: center;\r\n  padding: 2rem;\r\n  box-sizing: border-box;\r\n}\r\n@keyframes fadeIn {\r\n  0% {\r\n    opacity: 0;\r\n    transform: translateY(40px);\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n    transform: translateY(0px);\r\n  }\r\n} */\r\n.page-loader {\r\n  width: 1.25rem;\r\n  height: 1.25rem;\r\n  border: 2.5px solid #3f3f3f;\r\n  border-bottom-color: transparent;\r\n  border-radius: 50%;\r\n  display: inline-block;\r\n  box-sizing: border-box;\r\n  animation: rotation 1s linear infinite;\r\n}\r\n.loaderContainer {\r\n  padding: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 5px;\r\n  background: white;\r\n}\r\n.loadingScreenContainer {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100vh;\r\n  width: 100vw;\r\n  z-index: 100000;\r\n  background: rgba(0, 0, 0, 0.2);\r\n  pointer-events: all;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n@keyframes rotation {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n","import { Component, Event, EventEmitter, Host, Listen, Prop, State, h } from '@stencil/core';\r\nimport axios, { AxiosRequestConfig, AxiosResponse } from 'axios';\r\nimport { IToast } from '../ir-toast/toast';\r\nimport interceptor_requests from '@/stores/ir-interceptor.store';\r\n\r\n@Component({\r\n  tag: 'ir-interceptor',\r\n  styleUrl: 'ir-interceptor.css',\r\n  scoped: true,\r\n})\r\nexport class IrInterceptor {\r\n  @State() isShown = false;\r\n  @State() isLoading = false;\r\n  @State() isUnassignedUnit = false;\r\n  @State() endpointsCount = 0;\r\n  @State() isPageLoadingStoped: string | null = null;\r\n\r\n  @Prop({ reflect: true }) handledEndpoints = ['/Get_Exposed_Calendar', '/ReAllocate_Exposed_Room', '/Get_Exposed_Bookings'];\r\n  @Event({ bubbles: true, composed: true }) toast: EventEmitter<IToast>;\r\n\r\n  @Listen('preventPageLoad', { target: 'body' })\r\n  handleStopPageLoading(e: CustomEvent) {\r\n    this.isLoading = false;\r\n    this.isPageLoadingStoped = e.detail;\r\n  }\r\n  componentWillLoad() {\r\n    this.setupAxiosInterceptors();\r\n  }\r\n\r\n  setupAxiosInterceptors() {\r\n    axios.interceptors.request.use(this.handleRequest.bind(this), this.handleError.bind(this));\r\n    axios.interceptors.response.use(this.handleResponse.bind(this), this.handleError.bind(this));\r\n  }\r\n\r\n  extractEndpoint(url: string): string {\r\n    return url.split('?')[0];\r\n  }\r\n\r\n  isHandledEndpoint(url: string): boolean {\r\n    return this.handledEndpoints.includes(url);\r\n  }\r\n\r\n  handleRequest(config: AxiosRequestConfig) {\r\n    const extractedUrl = this.extractEndpoint(config.url);\r\n    interceptor_requests[extractedUrl] = 'pending';\r\n    config.params = config.params || {};\r\n    // if (this.ticket) {\r\n    //   config.params.Ticket = this.ticket;\r\n    // }\r\n    if (this.isHandledEndpoint(extractedUrl) && this.isPageLoadingStoped !== extractedUrl) {\r\n      if (extractedUrl !== '/Get_Exposed_Calendar') {\r\n        this.isLoading = true;\r\n      } else {\r\n        if (this.endpointsCount > 0) {\r\n          this.isLoading = true;\r\n        }\r\n      }\r\n    }\r\n    if (extractedUrl === '/Get_Exposed_Calendar') {\r\n      this.endpointsCount = this.endpointsCount + 1;\r\n    }\r\n    return config;\r\n  }\r\n\r\n  handleResponse(response: AxiosResponse) {\r\n    const extractedUrl = this.extractEndpoint(response.config.url);\r\n    if (this.isHandledEndpoint(extractedUrl)) {\r\n      this.isLoading = false;\r\n      this.isPageLoadingStoped = null;\r\n    }\r\n    interceptor_requests[extractedUrl] = 'done';\r\n    if (response.data.ExceptionMsg?.trim()) {\r\n      this.handleError(response.data.ExceptionMsg);\r\n      throw new Error(response.data.ExceptionMsg);\r\n    }\r\n    return response;\r\n  }\r\n\r\n  handleError(error: string) {\r\n    this.toast.emit({\r\n      type: 'error',\r\n      title: error,\r\n      description: '',\r\n      position: 'top-right',\r\n    });\r\n    return Promise.reject(error);\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        {/* {this.isLoading && !this.isPageLoadingStoped && (\r\n          <div class=\"loadingScreenContainer\">\r\n            <div class=\"loaderContainer\">\r\n              <span class=\"loader\"></span>\r\n              <p>Fetching bookings.</p>\r\n            </div>\r\n          </div>\r\n        )} */}\r\n        {this.isLoading && !this.isPageLoadingStoped && (\r\n          <div class=\"loadingScreenContainer\">\r\n            <div class=\"loaderContainer\">\r\n              <span class=\"page-loader\"></span>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",".logo {\r\n  height: 1.5rem;\r\n  width: 1.5rem;\r\n}\r\n:host {\r\n  display: flex;\r\n  margin-bottom: 5px;\r\n  gap: 5px;\r\n  align-items: center;\r\n}\r\n.icon {\r\n  margin-left: 3px;\r\n  padding: 0;\r\n  margin-top: 0;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.label_message {\r\n  margin: 0 3px;\r\n  padding: 0;\r\n}\r\n.label_title {\r\n  min-width: max-content;\r\n}\r\n.label_placeholder {\r\n  color: #cacfe7;\r\n  padding: 0 !important;\r\n  margin: 0 !important;\r\n}\r\n.icon-container {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.country {\r\n  height: 16px;\r\n  width: 23px;\r\n  border-radius: 3px;\r\n}\r\nsvg {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n","import { Component, Prop, h, EventEmitter, Event, Host } from '@stencil/core';\r\nimport { colorVariants, TIcons } from '../ir-icons/icons';\r\n\r\n@Component({\r\n  tag: 'ir-label',\r\n  styleUrl: 'ir-label.css',\r\n  scoped: true,\r\n})\r\nexport class IrLabel {\r\n  // Properties\r\n  @Prop() label: string;\r\n  @Prop() value: string;\r\n  @Prop() iconShown = false;\r\n  @Prop() image: { src: string; alt: string; style?: string } | null;\r\n  @Prop() country: boolean = false;\r\n  @Prop() imageStyle: string = '';\r\n  @Prop() icon_name: TIcons = 'edit';\r\n  @Prop() icon_style: string;\r\n  @Prop() ignore_value: boolean = false;\r\n  @Prop() placeholder: string;\r\n\r\n  // Events\r\n  @Event() editSidebar: EventEmitter;\r\n\r\n  openEditSidebar() {\r\n    this.editSidebar.emit();\r\n  }\r\n  å;\r\n  render() {\r\n    if (!this.placeholder && !this.value && !this.ignore_value) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <Host class={this.image ? 'align-items-center' : ''}>\r\n        <strong class=\"label_title\">{this.label}</strong>\r\n\r\n        {this.image && <img src={this.image.src} class={`p-0 m-0 ${this.country ? 'country' : 'logo'} ${this.image.style}`} alt={this.image.src} />}\r\n        {this.value ? <p class={'label_message'}>{this.value}</p> : <p class={'label_placeholder'}>{this.placeholder}</p>}\r\n        {this.iconShown && (\r\n          <div class=\"icon-container\">\r\n            <ir-button\r\n              variant=\"icon\"\r\n              icon_name={this.icon_name}\r\n              style={{ ...colorVariants.secondary, '--icon-size': '1.1rem' }}\r\n              onClickHanlder={e => {\r\n                e.stopImmediatePropagation();\r\n                e.stopPropagation();\r\n                this.openEditSidebar();\r\n              }}\r\n            ></ir-button>\r\n          </div>\r\n        )}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  margin: 0;\r\n  padding: 0;\r\n  --ir-date-range-border: #cacfe7;\r\n  --ir-date-range-width: 242px;\r\n  position: relative;\r\n}\r\nh3 {\r\n  margin: 0;\r\n}\r\nir-input-text {\r\n  width: 300px;\r\n}\r\n.booking-search-field {\r\n  margin-left: 0px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 14px;\r\n}\r\n.booking-container {\r\n  gap: 14px;\r\n}\r\n.filters-container {\r\n  gap: 10px;\r\n  justify-content: space-between;\r\n}\r\n.buttons-container {\r\n  gap: 14px;\r\n  color: #104064;\r\n}\r\n.booking-dates-container {\r\n  position: relative;\r\n  box-sizing: border-box;\r\n  background: white;\r\n  padding: 0.75rem 1rem;\r\n  height: 2rem;\r\n  border-radius: 0.21rem;\r\n  border: 1px solid #cacfe7;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  margin: 0;\r\n}\r\n\r\n.booking-dates-container span {\r\n  padding: 0;\r\n  margin: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 2rem;\r\n}\r\n\r\n.date-picker-wrapper {\r\n  position: relative;\r\n  cursor: default;\r\n  box-sizing: border-box;\r\n  padding: 0 0.5rem;\r\n  height: 2rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  flex-shrink: 0;\r\n  cursor: pointer;\r\n}\r\n.date-picker-wrapper:hover .date-display {\r\n  color: var(--blue);\r\n}\r\n.date-picker-wrapper[data-option='from-date'] {\r\n  padding-right: 0;\r\n  cursor: pointer;\r\n}\r\n.date-display {\r\n  background: inherit;\r\n  margin: 0;\r\n  padding: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 0.975rem;\r\n  line-height: 1.45;\r\n  height: 2rem;\r\n  color: #3b4781;\r\n  white-space: nowrap;\r\n  padding-right: 5px;\r\n  cursor: pointer;\r\n}\r\n\r\n.hidden-date-picker {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  opacity: 0;\r\n}\r\n\r\n/* @media only screen and (max-width: 1200px) {\r\n  .w-full {\r\n    max-width: 100%;\r\n  }\r\n} */\r\n.new-booking-container {\r\n  position: absolute;\r\n  right: 10px;\r\n  top: 5px;\r\n}\r\n.new-booking-btn {\r\n  all: unset;\r\n  cursor: pointer;\r\n  color: #104064;\r\n}\r\n.new-booking-btn:hover {\r\n  color: #0b2538;\r\n}\r\n.seperator-container {\r\n  margin-top: 10px;\r\n  justify-content: center !important;\r\n  gap: 14px;\r\n}\r\n.seperator-container span {\r\n  display: block;\r\n  height: 1px;\r\n  background: var(--gray);\r\n  width: 45%;\r\n  max-width: 200px;\r\n  margin: 0;\r\n}\r\n@media (max-width: 575.98px) {\r\n  :host {\r\n    --ir-date-range-width: 100%;\r\n  }\r\n  .flex-fill-sm-none {\r\n    flex: 1 1 auto;\r\n  }\r\n  .flex-fill-sm-none label {\r\n    width: 100px;\r\n  }\r\n  .buttons-container {\r\n    justify-content: center !important;\r\n    align-items: center !important;\r\n    gap: 40px;\r\n  }\r\n}\r\n@media (min-width: 1200px) {\r\n  .booking-search-field {\r\n    margin-left: 40px;\r\n  }\r\n}\r\n\r\n@media (min-width: 1600px) {\r\n  .flex-fill-sm-none {\r\n    flex: 0 0 auto;\r\n  }\r\n  .booking-search-field {\r\n    margin-left: 40px;\r\n  }\r\n}\r\n","import { BookingListingService } from '@/services/booking_listing.service';\r\nimport booking_listing, { initializeUserSelection, updateUserSelection } from '@/stores/booking_listing.store';\r\nimport locales from '@/stores/locales.store';\r\nimport { Component, Event, EventEmitter, Host, Listen, Prop, State, h } from '@stencil/core';\r\nimport moment from 'moment';\r\n\r\n@Component({\r\n  tag: 'ir-listing-header',\r\n  styleUrl: 'ir-listing-header.css',\r\n  scoped: true,\r\n})\r\nexport class IrListingHeader {\r\n  @Prop() propertyId: number;\r\n  @Prop() language: string;\r\n  @Prop() p: string;\r\n\r\n  @State() inputValue: string = '';\r\n  @State() isLoading: 'search' | 'excel' = null;\r\n\r\n  @Event() preventPageLoad: EventEmitter<string>;\r\n\r\n  private bookingListingService = new BookingListingService();\r\n  private toDateRef: HTMLIrDatePickerElement;\r\n\r\n  private downloadUrlTag: HTMLAnchorElement;\r\n  @Listen('dateChanged')\r\n  handleDateRangeChange(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    const { start, end } = e.detail;\r\n    booking_listing.userSelection = {\r\n      ...booking_listing.userSelection,\r\n      from: start.format('YYYY-MM-DD'),\r\n      to: end.format('YYYY-MM-DD'),\r\n    };\r\n  }\r\n  async handleSearchClicked(is_to_export: boolean) {\r\n    if (this.inputValue !== '') {\r\n      if (/^-?\\d+$/.test(this.inputValue.trim())) {\r\n        updateUserSelection('book_nbr', this.inputValue.trim());\r\n      } else if (this.inputValue[3] === '-') {\r\n        updateUserSelection('book_nbr', this.inputValue.trim());\r\n      } else {\r\n        updateUserSelection('name', this.inputValue.trim());\r\n      }\r\n    }\r\n    if (this.inputValue === '' && (booking_listing.userSelection.book_nbr !== '' || booking_listing.userSelection.name !== '')) {\r\n      booking_listing.userSelection = {\r\n        ...booking_listing.userSelection,\r\n        name: '',\r\n        book_nbr: '',\r\n      };\r\n    }\r\n    this.isLoading = is_to_export ? 'excel' : 'search';\r\n    this.preventPageLoad.emit('/Get_Exposed_Bookings');\r\n    await this.bookingListingService.getExposedBookings({ ...booking_listing.userSelection, start_row: 0, end_row: 20, is_to_export });\r\n    this.isLoading = null;\r\n    if (booking_listing.download_url) {\r\n      const url = booking_listing.download_url;\r\n      this.downloadUrlTag.href = url;\r\n      this.downloadUrlTag.download = url;\r\n      this.downloadUrlTag.click();\r\n      booking_listing.download_url = null;\r\n    }\r\n  }\r\n  async handleClearUserField() {\r\n    initializeUserSelection();\r\n    if (this.inputValue) {\r\n      this.inputValue = '';\r\n    }\r\n    await this.bookingListingService.getExposedBookings({ ...booking_listing.userSelection, start_row: 0, end_row: 20, is_to_export: false });\r\n  }\r\n  private async handleFromDateChange(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    const date = e.detail.start;\r\n    let fromDate = date;\r\n    let toDate = moment(new Date(booking_listing.userSelection.to));\r\n    if (fromDate.isAfter(toDate)) {\r\n      toDate = fromDate;\r\n    }\r\n    booking_listing.userSelection = { ...booking_listing.userSelection, from: fromDate.format('YYYY-MM-DD'), to: toDate.format('YYYY-MM-DD') };\r\n    await this.toDateRef.openDatePicker();\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <a ref={el => (this.downloadUrlTag = el)}>\r\n          <p class=\"sr-only\">download url</p>\r\n        </a>\r\n        <section class=\"d-flex align-items-center \">\r\n          <div class=\"d-flex flex-fill flex-column flex-md-row align-items-md-center booking-container\">\r\n            <div class=\"d-flex mb-1 d-md-none align-items-center justify-content-bettween width-fill\">\r\n              <h3 class=\"flex-fill\">{locales.entries?.Lcz_Bookings}</h3>\r\n              <div>\r\n                <igl-book-property-container\r\n                  p={this.p}\r\n                  withIrToastAndInterceptor={false}\r\n                  propertyid={this.propertyId}\r\n                  language={this.language}\r\n                  title={locales.entries.Lcz_CreateNewBooking}\r\n                  ticket={booking_listing.token}\r\n                >\r\n                  <ir-button slot=\"trigger\" class={'new-booking-btn'} variant=\"icon\" icon_name=\"square_plus\"></ir-button>\r\n                </igl-book-property-container>\r\n              </div>\r\n            </div>\r\n            <h3 class=\"d-none d-md-block\">{locales.entries?.Lcz_Bookings}</h3>\r\n            <form\r\n              onSubmit={e => {\r\n                e.preventDefault();\r\n                console.log(this.inputValue);\r\n                this.handleSearchClicked(false);\r\n              }}\r\n              class=\"booking-search-field width-fill\"\r\n            >\r\n              <ir-input-text\r\n                class={'flex-fill'}\r\n                value={this.inputValue}\r\n                onTextChange={e => (this.inputValue = e.detail)}\r\n                variant=\"icon\"\r\n                placeholder={locales.entries?.Lcz_FindBookNbrorName}\r\n              >\r\n                <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"14\" viewBox=\"0 0 512 512\">\r\n                  <path\r\n                    fill=\"currentColor\"\r\n                    d=\"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z\"\r\n                  />\r\n                </svg>\r\n              </ir-input-text>\r\n              <h5 class=\"m-0 font-weight-bold d-none d-sm-block\">{locales.entries?.Lcz_Or}</h5>\r\n            </form>\r\n          </div>\r\n          <div class=\"d-none d-md-block\">\r\n            <igl-book-property-container\r\n              p={this.p}\r\n              withIrToastAndInterceptor={false}\r\n              propertyid={this.propertyId}\r\n              language={this.language}\r\n              title={locales.entries.Lcz_CreateNewBooking}\r\n              ticket={booking_listing.token}\r\n            >\r\n              <ir-button slot=\"trigger\" class={'new-booking-btn'} variant=\"icon\" icon_name=\"square_plus\"></ir-button>\r\n            </igl-book-property-container>\r\n          </div>\r\n        </section>\r\n        <section class=\"d-flex align-items-center justify-evenly seperator-container d-sm-none\">\r\n          <span></span>\r\n          <h5 class=\"m-0 font-weight-bold\">{locales.entries?.Lcz_Or}</h5>\r\n          <span></span>\r\n        </section>\r\n        <section class=\"d-flex flex-column align-items-sm-center flex-sm-row flex-sm-wrap filters-container justify-content-lg-start mt-1\">\r\n          {/* <fieldset class=\"d-flex align-items-center flex-sm-column align-items-sm-start flex-fill-sm-none\">\r\n            <label htmlFor=\"dateTo\"></label> */}\r\n          <ir-select\r\n            onSelectChange={e => updateUserSelection('filter_type', e.detail)}\r\n            showFirstOption={false}\r\n            data={booking_listing?.types.map(t => ({\r\n              value: t.id.toString(),\r\n              text: t.name,\r\n            }))}\r\n            class=\"flex-sm-wrap\"\r\n            selectedValue={booking_listing.userSelection.filter_type}\r\n            select_id=\"dateTo\"\r\n            LabelAvailable={false}\r\n          ></ir-select>\r\n          {/* </fieldset> */}\r\n          {/* <fieldset class=\"d-flex align-items-center flex-sm-column align-items-sm-start flex-fill-sm-none\">\r\n            <label htmlFor=\"dates\">{locales.entries?.Lcz_Dates}</label> */}\r\n          {/* <div class={'dates-ctr'}>\r\n            <span>\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox={'0 0 448 512'} style={{ height: '14px', width: '14px' }}>\r\n                <path\r\n                  fill=\"currentColor\"\r\n                  d={\r\n                    'M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z'\r\n                  }\r\n                ></path>\r\n              </svg>\r\n            </span>\r\n            <div class=\"date-picker-ctr\">\r\n              <div class=\"date-view\" data-option=\"from-date\">\r\n                {moment(new Date(booking_listing.userSelection.from)).format('MMM DD, yyyy')}\r\n              </div>\r\n              <ir-date-picker class=\"date-view-picker\" autoApply singleDatePicker minDate=\"2000-01-01\" onDateChanged={this.handleFromDateChange.bind(this)}></ir-date-picker>\r\n            </div>\r\n            <span>\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"mx-01\" height=\"14\" width=\"14\" viewBox=\"0 0 512 512\">\r\n                <path\r\n                  fill=\"currentColor\"\r\n                  d=\"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z\"\r\n                />\r\n              </svg>\r\n            </span>\r\n            <div class=\"date-picker-ctr\">\r\n              <div class=\"date-view\" data-option=\"to-date\">\r\n                {moment(new Date(booking_listing.userSelection.to)).format('MMM DD, YYYY')}\r\n              </div>\r\n              <ir-date-picker\r\n                class=\"date-view-picker\"\r\n                ref={el => (this.toDateRef = el)}\r\n                autoApply\r\n                singleDatePicker\r\n                minDate={booking_listing.userSelection.from}\r\n                onDateChanged={e => {\r\n                  e.stopImmediatePropagation();\r\n                  e.stopPropagation();\r\n                  booking_listing.userSelection = { ...booking_listing.userSelection, to: e.detail.start.format('YYYY-MM-DD') };\r\n                }}\r\n              ></ir-date-picker>\r\n            </div>\r\n          </div> */}\r\n          <div class={'booking-dates-container'}>\r\n            <span>\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox={'0 0 448 512'} style={{ height: '14px', width: '14px' }}>\r\n                <path\r\n                  fill=\"currentColor\"\r\n                  d={\r\n                    'M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z'\r\n                  }\r\n                ></path>\r\n              </svg>\r\n            </span>\r\n            <div class=\"date-picker-wrapper\" data-option=\"from-date\">\r\n              <p class=\"date-display\" title=\"from date\">\r\n                {moment(new Date(booking_listing.userSelection.from)).format('MMM DD, yyyy')}\r\n              </p>\r\n              <ir-date-picker\r\n                date={new Date(booking_listing.userSelection.from)}\r\n                class=\"hidden-date-picker\"\r\n                autoApply\r\n                singleDatePicker\r\n                minDate=\"2000-01-01\"\r\n                onDateChanged={this.handleFromDateChange.bind(this)}\r\n              ></ir-date-picker>\r\n            </div>\r\n            <span>\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"arrow-icon\" height=\"14\" width=\"14\" viewBox=\"0 0 512 512\">\r\n                <path\r\n                  fill=\"currentColor\"\r\n                  d=\"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z\"\r\n                />\r\n              </svg>\r\n            </span>\r\n            <div data-option=\"to-date\" class=\"date-picker-wrapper\">\r\n              <p class=\"date-display\" title=\"to date\">\r\n                {moment(new Date(booking_listing.userSelection.to)).format('MMM DD, YYYY')}\r\n              </p>\r\n              <ir-date-picker\r\n                date={new Date(booking_listing.userSelection.to)}\r\n                class=\"hidden-date-picker\"\r\n                ref={el => (this.toDateRef = el)}\r\n                autoApply\r\n                singleDatePicker\r\n                minDate={booking_listing.userSelection.from}\r\n                onDateChanged={e => {\r\n                  e.stopImmediatePropagation();\r\n                  e.stopPropagation();\r\n                  booking_listing.userSelection = { ...booking_listing.userSelection, to: e.detail.start.format('YYYY-MM-DD') };\r\n                }}\r\n              ></ir-date-picker>\r\n            </div>\r\n          </div>\r\n          {/* <igl-date-range\r\n            class=\"flex-sm-wrap\"\r\n            minDate=\"2000-01-01\"\r\n            withDateDifference={false}\r\n            defaultData={{\r\n              fromDate: booking_listing.userSelection.from,\r\n              toDate: booking_listing.userSelection.to,\r\n            }}\r\n          ></igl-date-range> */}\r\n          {/* <igl-date-range\r\n            class=\"flex-sm-wrap\"\r\n            minDate=\"2000-01-01\"\r\n            withDateDifference={false}\r\n            defaultData={{\r\n              fromDate: booking_listing.userSelection.from,\r\n              toDate: booking_listing.userSelection.to,\r\n            }}\r\n          ></igl-date-range> */}\r\n          {/* </fieldset> */}\r\n          {/* <fieldset class=\"d-flex align-items-center flex-sm-column align-items-sm-start flex-fill-sm-none\">\r\n            <label htmlFor=\"booking_status\">{locales.entries?.Lcz_BookingStatus}</label> */}\r\n          <ir-select\r\n            class=\"flex-sm-wrap\"\r\n            selectedValue={booking_listing.userSelection.booking_status}\r\n            onSelectChange={e => updateUserSelection('booking_status', e.detail)}\r\n            showFirstOption={false}\r\n            data={booking_listing?.statuses.map(status => ({\r\n              value: status.code,\r\n              text: status.name,\r\n            }))}\r\n            select_id=\"booking_status\"\r\n            LabelAvailable={false}\r\n          ></ir-select>\r\n          {/* </fieldset>\r\n          <fieldset class=\"d-flex align-items-center flex-sm-column align-items-sm-start flex-fill-sm-none\">\r\n            <label htmlFor=\"channels\">{locales.entries?.Lcz_Channels}</label> */}\r\n          <ir-select\r\n            class=\"flex-sm-wrap\"\r\n            selectedValue={booking_listing.userSelection.channel}\r\n            onSelectChange={e => updateUserSelection('channel', e.detail)}\r\n            LabelAvailable={false}\r\n            data={booking_listing?.channels.map(channel => ({\r\n              value: channel.value,\r\n              text: channel.name,\r\n            }))}\r\n            select_id=\"channels\"\r\n            firstOption={locales.entries?.Lcz_All + ' ' + locales.entries?.Lcz_Channels}\r\n          ></ir-select>\r\n          {/* </fieldset> */}\r\n          {/* <fieldset class=\"flex-fill-sm-none\">\r\n            <label htmlFor=\"payment_status\">{locales.entries?.Lcz_PaymentStatus}</label>\r\n            <ir-select\r\n              showFirstOption={false}\r\n              data={booking_listing?.settlement_methods.map(method => ({\r\n                value: method.code,\r\n                text: method.name,\r\n              }))}\r\n              select_id=\"payment_status\"\r\n              LabelAvailable={false}\r\n            ></ir-select>\r\n          </fieldset> */}\r\n          <div class=\"d-flex flex-fill align-items-end m-0  buttons-container\">\r\n            <ir-button\r\n              title={locales.entries?.Lcz_Search}\r\n              variant=\"icon\"\r\n              icon_name=\"search\"\r\n              isLoading={this.isLoading === 'search'}\r\n              onClickHanlder={() => this.handleSearchClicked(false)}\r\n            ></ir-button>\r\n            <ir-button title={locales.entries?.Lcz_Erase} variant=\"icon\" icon_name=\"eraser\" onClickHanlder={() => this.handleClearUserField()}></ir-button>\r\n            <ir-button\r\n              title={locales.entries?.Lcz_ExportToExcel}\r\n              variant=\"icon\"\r\n              icon_name=\"file\"\r\n              isLoading={this.isLoading === 'excel'}\r\n              onClickHanlder={() => this.handleSearchClicked(true)}\r\n            ></ir-button>\r\n          </div>\r\n        </section>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",".backdropModal {\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  z-index: 1000;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100vh;\r\n  width: 100%;\r\n  opacity: 0;\r\n  transition: opacity 0.3s ease-in-out;\r\n  pointer-events: none;\r\n}\r\n.backdropModal.active {\r\n  cursor: pointer;\r\n  opacity: 1 !important;\r\n  pointer-events: all;\r\n}\r\n\r\n.ir-modal[data-state='opened'] {\r\n  opacity: 1;\r\n  /* transform: translate(-50%, 0); */\r\n  visibility: visible; /* Make modal visible */\r\n  pointer-events: all; /* Restore pointer events */\r\n  transition: all 0.3s ease-in-out;\r\n}\r\n.ir-alert-content {\r\n  padding: 10px;\r\n  background: white;\r\n  border-radius: 5px;\r\n}\r\n.modal {\r\n  z-index: 1001 !important;\r\n}\r\n\r\n.modal-dialog {\r\n  height: 100vh;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.ir-alert-footer {\r\n  gap: 10px;\r\n}\r\n.exit-icon {\r\n  position: absolute;\r\n  right: 10px;\r\n  top: 5px;\r\n  margin: 0;\r\n}\r\n.ir-modal {\r\n  position: fixed;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  z-index: 1050;\r\n  width: 90%;\r\n  max-width: 32rem;\r\n  overflow: hidden;\r\n  outline: 0;\r\n  opacity: 0;\r\n  transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;\r\n  visibility: hidden;\r\n  pointer-events: none;\r\n}\r\n\r\n.ir-modal.active {\r\n  opacity: 1;\r\n  transform: translate(-50%, 0);\r\n  visibility: visible; /* Make modal visible */\r\n  pointer-events: all; /* Restore pointer events */\r\n  transition: all 0.3s ease-in-out;\r\n}\r\n","import booking_listing from '@/stores/booking_listing.store';\r\nimport { Component, EventEmitter, Listen, Method, Prop, State, h, Event } from '@stencil/core';\r\nimport { Booking } from '@/models/booking.dto';\r\nimport locales from '@/stores/locales.store';\r\nimport { BookingListingService } from '@/services/booking_listing.service';\r\nimport { PaymentService } from '@/services/payment.service';\r\nimport moment from 'moment';\r\n\r\n@Component({\r\n  tag: 'ir-listing-modal',\r\n  styleUrl: 'ir-listing-modal.css',\r\n  scoped: true,\r\n})\r\nexport class IrListingModal {\r\n  @Prop() modalTitle: string = 'Modal Title';\r\n  @Prop() editBooking: { booking: Booking; cause: 'edit' | 'payment' | 'delete' };\r\n\r\n  @State() isOpen: boolean = false;\r\n  @State() deletionStage = 1;\r\n  @State() selectedDesignation: string;\r\n  @State() loadingBtn: 'confirm' | 'just_delete' | 'recover_and_delete' | null = null;\r\n\r\n  private bookingListingsService = new BookingListingService();\r\n  private paymentService = new PaymentService();\r\n\r\n  componentWillLoad() {\r\n    this.selectedDesignation = booking_listing.settlement_methods[0].name;\r\n  }\r\n\r\n  @Event() modalClosed: EventEmitter<null>;\r\n  @Event() resetData: EventEmitter<string>;\r\n  @Method()\r\n  async closeModal() {\r\n    this.isOpen = false;\r\n    this.deletionStage = 1;\r\n    this.selectedDesignation = booking_listing.settlement_methods[0].name;\r\n    this.modalClosed.emit(null);\r\n  }\r\n  @Method()\r\n  async openModal() {\r\n    this.isOpen = true;\r\n  }\r\n  filterBookings() {\r\n    booking_listing.bookings = booking_listing.bookings.filter(booking => booking.booking_nbr !== this.editBooking.booking.booking_nbr);\r\n  }\r\n\r\n  @Listen('clickHanlder')\r\n  async btnClickHandler(event: CustomEvent) {\r\n    let target = event.target as HTMLInputElement;\r\n    let name = target.name;\r\n    try {\r\n      if (name === 'confirm') {\r\n        if (this.editBooking.cause === 'payment') {\r\n          await this.paymentService.AddPayment(\r\n            {\r\n              amount: this.editBooking.booking.financial.due_amount,\r\n              currency: this.editBooking.booking.currency,\r\n              date: moment().format('YYYY-MM-DD'),\r\n              designation: this.selectedDesignation,\r\n              id: -1,\r\n              reference: '',\r\n            },\r\n            this.editBooking.booking.booking_nbr,\r\n          );\r\n          this.resetData.emit(this.editBooking.booking.booking_nbr);\r\n          this.closeModal();\r\n        } else {\r\n          if (this.deletionStage === 2) {\r\n            this.loadingBtn = 'recover_and_delete';\r\n            await this.bookingListingsService.removeExposedBooking(this.editBooking.booking.booking_nbr, true);\r\n            this.filterBookings();\r\n          }\r\n          if (this.deletionStage === 1) {\r\n            this.deletionStage = 2;\r\n          }\r\n        }\r\n      }\r\n      if (name === 'cancel') {\r\n        if (this.deletionStage === 2) {\r\n          this.loadingBtn = 'just_delete';\r\n          await this.bookingListingsService.removeExposedBooking(this.editBooking.booking.booking_nbr, false);\r\n          this.filterBookings();\r\n        } else {\r\n          this.closeModal();\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      if (this.loadingBtn) {\r\n        this.loadingBtn = null;\r\n        this.closeModal();\r\n      }\r\n    }\r\n  }\r\n\r\n  renderTitle() {\r\n    if (this.editBooking.cause === 'payment') {\r\n      return locales.entries?.Lcz_MarkBookingAsPaid.replace('%1', this.editBooking.booking.booking_nbr);\r\n    } else {\r\n      if (this.deletionStage === 1) {\r\n        return locales.entries.Lcz_SureYouWantToDeleteBookingNbr + this.editBooking?.booking.booking_nbr;\r\n      }\r\n      return locales.entries.Lcz_WantToRecoverAllotment;\r\n    }\r\n  }\r\n  renderConfirmationTitle() {\r\n    if (this.deletionStage === 2) {\r\n      return locales.entries.Lcz_RecoverAndDelete;\r\n    }\r\n    return locales.entries.Lcz_Confirm;\r\n  }\r\n  renderCancelationTitle() {\r\n    if (this.deletionStage === 2) {\r\n      return locales.entries.Lcz_JustDelete;\r\n    }\r\n    return locales.entries.Lcz_Cancel;\r\n  }\r\n  render() {\r\n    if (!this.editBooking) {\r\n      return null;\r\n    }\r\n    return [\r\n      <div\r\n        class={`backdropModal ${this.isOpen ? 'active' : ''}`}\r\n        onClick={() => {\r\n          if (this.editBooking.cause === 'delete') {\r\n            return;\r\n          }\r\n          this.closeModal();\r\n        }}\r\n      ></div>,\r\n      <div data-state={this.isOpen ? 'opened' : 'closed'} class={`ir-modal`} tabindex=\"-1\">\r\n        {this.isOpen && (\r\n          <div class={`ir-alert-content p-2`}>\r\n            <div class={`ir-alert-header align-items-center border-0 py-0 m-0 `}>\r\n              <p class=\"p-0 my-0 mb-1\">{this.renderTitle()}</p>\r\n              <ir-icon\r\n                class=\"exit-icon\"\r\n                style={{ cursor: 'pointer' }}\r\n                onClick={() => {\r\n                  this.closeModal();\r\n                }}\r\n              >\r\n                <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"10.5\" viewBox=\"0 0 384 512\">\r\n                  <path\r\n                    fill=\"currentColor\"\r\n                    d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\"\r\n                  />\r\n                </svg>\r\n              </ir-icon>\r\n            </div>\r\n            <div class=\"modal-body text-left p-0 mb-2\">\r\n              {this.editBooking.cause === 'payment' ? (\r\n                <ir-select\r\n                  selectedValue={this.selectedDesignation}\r\n                  onSelectChange={e => (this.selectedDesignation = e.detail)}\r\n                  showFirstOption={false}\r\n                  LabelAvailable={false}\r\n                  data={booking_listing.settlement_methods.map(m => ({\r\n                    value: m.name,\r\n                    text: m.name,\r\n                  }))}\r\n                ></ir-select>\r\n              ) : null}\r\n            </div>\r\n\r\n            <div class={`ir-alert-footer border-0 d-flex justify-content-end`}>\r\n              <ir-button isLoading={this.loadingBtn === 'just_delete'} icon={''} btn_color={'secondary'} btn_block text={this.renderCancelationTitle()} name={'cancel'}></ir-button>\r\n              <ir-button\r\n                isLoading={this.loadingBtn === 'recover_and_delete'}\r\n                icon={''}\r\n                btn_color={'primary'}\r\n                btn_block\r\n                text={this.renderConfirmationTitle()}\r\n                name={'confirm'}\r\n              ></ir-button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>,\r\n    ];\r\n  }\r\n}\r\n",":host {\r\n  display: fixed;\r\n  height: 100vh;\r\n  width: 100vw;\r\n  z-index: 1000;\r\n  top: 0;\r\n  left: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: white;\r\n}\r\n\r\n.loader {\r\n  width: 1.25rem;\r\n  height: 1.25rem;\r\n  border: 2.5px solid #3f3f3f;\r\n  border-bottom-color: transparent;\r\n  border-radius: 50%;\r\n  display: inline-block;\r\n  box-sizing: border-box;\r\n  animation: rotation 1s linear infinite;\r\n}\r\n.loaderContainer {\r\n  position: absolute;\r\n  z-index: 100001;\r\n  padding: 20px;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  background: white;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 20px;\r\n  border-radius: 5px;\r\n}\r\n@keyframes rotation {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n","import { Component, Host, Prop, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-loading-screen',\r\n  styleUrl: 'ir-loading-screen.css',\r\n  scoped: true,\r\n})\r\nexport class IrLoadingScreen {\r\n  @Prop() message: string = '';\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <span class=\"loader\"></span>\r\n        {/* {this.message && <p class={'m-0'}>{this.message}</p>} */}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",".backdropModal {\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  z-index: 1000;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100vh;\r\n  width: 100%;\r\n  opacity: 0;\r\n  transition: opacity 0.3s ease-in-out;\r\n  pointer-events: none;\r\n}\r\n.backdropModal.active {\r\n  cursor: pointer;\r\n  opacity: 1 !important;\r\n  pointer-events: all;\r\n}\r\n\r\n.ir-modal[data-state='opened'] {\r\n  opacity: 1;\r\n  /* transform: translate(-50%, 0); */\r\n  visibility: visible; /* Make modal visible */\r\n  pointer-events: all; /* Restore pointer events */\r\n  transition: all 0.3s ease-in-out;\r\n}\r\n.ir-alert-content {\r\n  padding: 10px;\r\n  background: white;\r\n  border-radius: 5px;\r\n}\r\n.modal {\r\n  z-index: 1001 !important;\r\n}\r\n\r\n.modal-dialog {\r\n  height: 100vh;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.ir-alert-footer {\r\n  gap: 10px;\r\n}\r\n.ir-modal {\r\n  position: fixed;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  z-index: 1050;\r\n  width: 90%;\r\n  max-width: 32rem;\r\n  overflow: hidden;\r\n  outline: 0;\r\n  opacity: 0;\r\n  transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;\r\n  visibility: hidden;\r\n  pointer-events: none;\r\n}\r\n\r\n.ir-modal.active {\r\n  opacity: 1;\r\n  transform: translate(-50%, 0);\r\n  visibility: visible; /* Make modal visible */\r\n  pointer-events: all; /* Restore pointer events */\r\n  transition: all 0.3s ease-in-out;\r\n}\r\n","import { Component, h, State, Method, Event, EventEmitter, Prop, Listen } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-modal',\r\n  styleUrl: 'ir-modal.css',\r\n  scoped: true,\r\n})\r\nexport class IrModal {\r\n  @Prop() modalTitle: string = 'Modal Title';\r\n  @Prop() modalBody: string = 'Modal Body';\r\n\r\n  @Prop() rightBtnActive: boolean = true;\r\n  @Prop() leftBtnActive: boolean = true;\r\n\r\n  @Prop() rightBtnText: string = 'Confirm';\r\n  @Prop() leftBtnText: string = 'Close';\r\n\r\n  @Prop() isLoading: boolean = false;\r\n  @Prop() autoClose: boolean = true;\r\n\r\n  @Prop() rightBtnColor: 'primary' | 'secondary' | 'success' | 'danger' | 'warning' | 'info' | 'light' | 'dark' = 'primary';\r\n  @Prop() leftBtnColor: 'primary' | 'secondary' | 'success' | 'danger' | 'warning' | 'info' | 'light' | 'dark' = 'secondary';\r\n\r\n  @Prop() btnPosition: 'left' | 'right' | 'center' = 'right';\r\n  @Prop() iconAvailable: boolean = false;\r\n  @Prop() icon: string = '';\r\n\r\n  @State() isOpen: boolean = false;\r\n\r\n  @Method()\r\n  async closeModal() {\r\n    this.isOpen = false;\r\n  }\r\n  @Method()\r\n  async openModal() {\r\n    this.isOpen = true;\r\n  }\r\n  @Event({ bubbles: true, composed: true }) confirmModal: EventEmitter<any>;\r\n  @Event({ bubbles: true, composed: true }) cancelModal: EventEmitter<any>;\r\n\r\n  @Listen('clickHanlder')\r\n  btnClickHandler(event: CustomEvent) {\r\n    let target = event.target as HTMLInputElement;\r\n    let name = target.name;\r\n\r\n    if (name === this.leftBtnText) {\r\n      this.cancelModal.emit();\r\n      this.item = {};\r\n      this.closeModal();\r\n    } else if (name === this.rightBtnText) {\r\n      this.confirmModal.emit(this.item);\r\n      this.item = {};\r\n      if (this.autoClose) {\r\n        this.closeModal();\r\n      }\r\n    }\r\n  }\r\n\r\n  @Prop({ mutable: true }) item: any = {};\r\n\r\n  render() {\r\n    return [\r\n      <div\r\n        class={`backdropModal ${this.isOpen ? 'active' : ''}`}\r\n        onClick={() => {\r\n          this.cancelModal.emit();\r\n          if (this.autoClose && !this.isLoading) {\r\n            this.closeModal();\r\n          }\r\n        }}\r\n      ></div>,\r\n      <div data-state={this.isOpen ? 'opened' : 'closed'} class={`ir-modal`} tabindex=\"-1\">\r\n        <div class={`ir-alert-content p-2`}>\r\n          <div class={`ir-alert-header align-items-center border-0 py-0 m-0 `}>\r\n            {/*\r\n            <p class=\"font-weight-bold p-0 my-0 mb-1\">\r\n              {this.iconAvailable && <ir-icon class=\"mr-1\" icon={this.icon}></ir-icon>} \r\n               {this.modalBody} \r\n              {this.modalTitle}\r\n            </p>\r\n            */}\r\n            {/* <div class=\"font-weight-bold d-flex align-items-center font-size-large my-0 py-0\">\r\n              <ir-icon\r\n                icon=\"ft-x\"\r\n                style={{ cursor: 'pointer' }}\r\n                onClick={() => {\r\n                  this.closeModal();\r\n                  this.cancelModal.emit();\r\n                }}\r\n              ></ir-icon>\r\n            </div> */}\r\n          </div>\r\n          <div class=\"modal-body text-left p-0 mb-2\">\r\n            <div>{this.modalBody}</div>\r\n          </div>\r\n\r\n          <div class={`ir-alert-footer border-0  d-flex justify-content-${this.btnPosition === 'center' ? 'center' : this.btnPosition === 'left' ? 'start' : 'end'}`}>\r\n            {this.leftBtnActive && (\r\n              <ir-button btn_disabled={this.isLoading} icon={''} btn_color={this.leftBtnColor} btn_block text={this.leftBtnText} name={this.leftBtnText}></ir-button>\r\n            )}\r\n            {this.rightBtnActive && (\r\n              <ir-button\r\n                icon={''}\r\n                btn_color={this.rightBtnColor}\r\n                btn_disabled={this.isLoading}\r\n                isLoading={this.isLoading}\r\n                btn_block\r\n                text={this.rightBtnText}\r\n                name={this.rightBtnText}\r\n              ></ir-button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>,\r\n    ];\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n:host p,\r\n:host div,\r\n:host span,\r\n:host ir-icons {\r\n  box-sizing: border-box;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n.action-container td {\r\n  padding: 0px 0.5rem;\r\n  padding-bottom: 0.5rem;\r\n}\r\n.action-container .amount_action {\r\n  padding-inline-start: 0;\r\n}\r\n.overdue_action {\r\n  color: #ff4961;\r\n  border-radius: 0.25rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n.future_action {\r\n  border-radius: 0.25rem;\r\n  color: #1e9ff2;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: start;\r\n  gap: 0.5rem;\r\n}\r\n.date_action {\r\n  font-weight: 500;\r\n}\r\n.amount_action {\r\n  /* color: green; */\r\n  font-weight: 700;\r\n}\r\n","import { Component, Event, EventEmitter, Host, Prop, h } from '@stencil/core';\r\nimport { IPaymentAction } from '@/services/payment.service';\r\nimport { Booking } from '@/models/booking.dto';\r\nimport { formatAmount } from '@/utils/utils';\r\nimport moment from 'moment';\r\n@Component({\r\n  tag: 'ir-payment-actions',\r\n  styleUrl: 'ir-payment-actions.css',\r\n  scoped: true,\r\n})\r\nexport class IrPaymentActions {\r\n  @Prop() booking: Booking;\r\n  @Prop() paymentAction: IPaymentAction[];\r\n\r\n  @Event() generatePayment: EventEmitter<IPaymentAction>;\r\n\r\n  render() {\r\n    if (this.paymentAction?.filter(pa => pa.amount !== 0).length == 0) {\r\n      return null;\r\n    }\r\n    return (\r\n      <Host>\r\n        <div class={'my-1'}>\r\n          <strong>Payment actions</strong>\r\n        </div>\r\n        <table>\r\n          <thead>\r\n            <th>\r\n              <p class=\"sr-only\">Amount</p>\r\n            </th>\r\n            <th>\r\n              <p class={'sr-only'}>Due date</p>\r\n            </th>\r\n            <th>\r\n              <p class={'sr-only'}>Pay</p>\r\n            </th>\r\n            <th>\r\n              <p class={'sr-only'}>Status</p>\r\n            </th>\r\n          </thead>\r\n          <tbody>\r\n            {this.paymentAction?.map(pa => {\r\n              if (!pa.due_on) {\r\n                return null;\r\n              }\r\n              return (\r\n                <tr class={'action-container'}>\r\n                  <td class={'amount_action'}>{formatAmount(pa.currency.symbol, pa.amount)}</td>\r\n                  <td class={'date_action'}>{moment(new Date(pa.due_on)).format('ddd, DD MMM YYYY')}</td>\r\n                  {pa.amount > 0 && (\r\n                    <td>\r\n                      <ir-button btn_color=\"outline\" text={'Pay'} size=\"sm\" onClickHanlder={() => this.generatePayment.emit(pa)}></ir-button>\r\n                    </td>\r\n                  )}\r\n                  {pa.type === 'overdue' && pa.amount > 0 && (\r\n                    <td>\r\n                      <div class={'overdue_action'}>\r\n                        <svg height={16} width={16} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\r\n                          <path\r\n                            fill=\"currentColor\"\r\n                            d=\"M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z\"\r\n                          />\r\n                        </svg>\r\n                        <span>Overdue</span>\r\n                      </div>\r\n                    </td>\r\n                  )}\r\n                  {pa.type === 'future' && pa.amount > 0 && (\r\n                    <td>\r\n                      <div class={'future_action '}>\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" height={16} width={16} viewBox=\"0 0 512 512\">\r\n                          <path\r\n                            fill=\"currentColor\"\r\n                            d=\"M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z\"\r\n                          />\r\n                        </svg>\r\n                        <span>{moment(new Date(pa.due_on)).isSame(new Date()) ? 'Today' : 'Future'}</span>\r\n                      </div>\r\n                    </td>\r\n                  )}\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",".sm-margin-right {\r\n  margin-right: 5px !important;\r\n  background: #000;\r\n}\r\n.action_icons {\r\n  width: 60px;\r\n}\r\n.w-60 {\r\n  width: 100px;\r\n  padding: 0 5px;\r\n}\r\n.payments-height {\r\n  height: 30px;\r\n}\r\n.payment_date {\r\n  width: 100px;\r\n}\r\n.iframeHeight {\r\n  height: max-content;\r\n  height: 22.5rem;\r\n}\r\n.designation {\r\n  width: 120px;\r\n}\r\n.total-cost-container {\r\n  background: #7cbebe;\r\n  color: white;\r\n  padding: 0.5rem;\r\n  border-radius: 5px;\r\n}\r\n.payment-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  gap: 0.5rem;\r\n}\r\n.payment_action_beta_container {\r\n  border: 1px solid var(--red);\r\n  position: relative;\r\n  padding: 4px;\r\n  box-sizing: border-box;\r\n  border-radius: 4px;\r\n}\r\n.beta {\r\n  position: absolute;\r\n  top: 4px;\r\n  background: var(--red);\r\n  color: white;\r\n  padding: 0.2rem 0.3rem;\r\n  font-size: 12px;\r\n  border-radius: 4px;\r\n  right: 4px;\r\n  margin: 0;\r\n}\r\n","import { Component, h, Prop, State, Event, EventEmitter, Fragment, Watch, Listen } from '@stencil/core';\r\nimport { _formatDate } from '../functions';\r\nimport { Booking, IDueDate, IPayment } from '@/models/booking.dto';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport moment from 'moment';\r\nimport { PaymentService, IPaymentAction } from '@/services/payment.service';\r\nimport { ILocale, IToast } from '@/components';\r\nimport { colorVariants } from '@/components/ui/ir-icons/icons';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\nimport { formatAmount } from '@/utils/utils';\r\n\r\n@Component({\r\n  styleUrl: 'ir-payment-details.css',\r\n  tag: 'ir-payment-details',\r\n  scoped: true,\r\n})\r\nexport class IrPaymentDetails {\r\n  @Prop({ mutable: true }) bookingDetails: Booking;\r\n  @Prop() defaultTexts: ILocale;\r\n  @Prop() paymentActions: IPaymentAction[];\r\n\r\n  @State() newTableRow: boolean = false;\r\n\r\n  @State() collapsedPayment: boolean = false;\r\n  @State() collapsedGuarantee: boolean = false;\r\n\r\n  @State() flag: boolean = false;\r\n\r\n  @State() confirmModal: boolean = false;\r\n  @State() toBeDeletedItem: IPayment;\r\n\r\n  @State() paymentDetailsUrl: string = '';\r\n  @State() paymentExceptionMessage: string = '';\r\n  @State() modal_mode: 'delete' | 'save' | null = null;\r\n\r\n  @Event({ bubbles: true }) resetBookingData: EventEmitter<null>;\r\n  @Event({ bubbles: true }) resetExposedCancelationDueAmount: EventEmitter<null>;\r\n  @Event({ bubbles: true }) toast: EventEmitter<IToast>;\r\n\r\n  @State() itemToBeAdded: IPayment;\r\n  private paymentService = new PaymentService();\r\n  private bookingService = new BookingService();\r\n  private paymentBackground = 'white';\r\n\r\n  @Listen('generatePayment')\r\n  handlePaymentGeneration(e: CustomEvent) {\r\n    const value = e.detail;\r\n    this.newTableRow = true;\r\n    this.itemToBeAdded = { ...this.itemToBeAdded, amount: value.amount, date: value.due_on };\r\n    this.paymentBackground = 'rgba(250, 253, 174)';\r\n  }\r\n  async componentWillLoad() {\r\n    try {\r\n      this.initializeItemToBeAdded();\r\n    } catch (error) {\r\n      if (this.bookingDetails.guest.cci) {\r\n        return;\r\n      }\r\n      if (!this.bookingDetails.is_direct && this.bookingDetails.channel_booking_nbr) {\r\n        this.paymentExceptionMessage = error;\r\n      }\r\n    }\r\n  }\r\n  initializeItemToBeAdded() {\r\n    this.itemToBeAdded = {\r\n      id: -1,\r\n      date: moment().format('YYYY-MM-DD'),\r\n      amount: null,\r\n      currency: this.bookingDetails.currency,\r\n      designation: '',\r\n      reference: '',\r\n    };\r\n    this.paymentBackground = 'white';\r\n  }\r\n\r\n  async _processPaymentSave() {\r\n    if (this.itemToBeAdded.amount === null) {\r\n      this.toast.emit({\r\n        type: 'error',\r\n        title: this.defaultTexts.entries.Lcz_EnterAmount,\r\n        description: '',\r\n        position: 'top-right',\r\n      });\r\n      return;\r\n    }\r\n    if (Number(this.itemToBeAdded.amount) > Number(this.bookingDetails.financial.due_amount)) {\r\n      this.modal_mode = 'save';\r\n      this.openModal();\r\n      return;\r\n    }\r\n    this._handleSave();\r\n  }\r\n\r\n  async _handleSave() {\r\n    this.paymentBackground = 'white';\r\n    try {\r\n      await this.paymentService.AddPayment(this.itemToBeAdded, this.bookingDetails.booking_nbr);\r\n      this.initializeItemToBeAdded();\r\n      this.resetBookingData.emit(null);\r\n      this.resetExposedCancelationDueAmount.emit(null);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  handlePaymentInputChange(key: keyof IPayment, value: any, event?: InputEvent) {\r\n    this.paymentBackground = 'white';\r\n    if (key === 'amount') {\r\n      if (!isNaN(value) || value === '') {\r\n        if (value === '') {\r\n          this.itemToBeAdded = { ...this.itemToBeAdded, [key]: null };\r\n        } else {\r\n          this.itemToBeAdded = { ...this.itemToBeAdded, [key]: parseFloat(value) };\r\n        }\r\n      } else if (event && event.target) {\r\n        let inputElement = event.target as HTMLInputElement;\r\n        let inputValue = inputElement.value;\r\n        inputValue = inputValue.replace(/[^\\d-]|(?<!^)-/g, '');\r\n        inputElement.value = inputValue;\r\n      }\r\n    } else {\r\n      this.itemToBeAdded = { ...this.itemToBeAdded, [key]: value };\r\n    }\r\n  }\r\n  async cancelPayment() {\r\n    try {\r\n      await this.paymentService.CancelPayment(this.toBeDeletedItem.id);\r\n      const newPaymentArray = this.bookingDetails.financial.payments.filter((item: IPayment) => item.id !== this.toBeDeletedItem.id);\r\n      this.bookingDetails = { ...this.bookingDetails, financial: { ...this.bookingDetails.financial, payments: newPaymentArray } };\r\n      this.confirmModal = !this.confirmModal;\r\n      this.resetBookingData.emit(null);\r\n      this.resetExposedCancelationDueAmount.emit(null);\r\n      this.toBeDeletedItem = null;\r\n      this.modal_mode = null;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  async handleConfirmModal(e: CustomEvent) {\r\n    this.paymentBackground = 'white';\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    if (this.modal_mode === 'delete') {\r\n      await this.cancelPayment();\r\n    } else {\r\n      await this._handleSave();\r\n    }\r\n  }\r\n  openModal() {\r\n    const modal: any = document.querySelector('.delete-record-modal');\r\n    modal.openModal();\r\n  }\r\n  async handleCancelModal(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    try {\r\n      this.paymentBackground = 'white';\r\n      if (this.modal_mode === 'save') {\r\n        this.initializeItemToBeAdded();\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  @Watch('bookingDetails')\r\n  handleBookingDetails() {\r\n    if (this.newTableRow) {\r\n      this.newTableRow = false;\r\n    }\r\n  }\r\n  handleDateChange(\r\n    e: CustomEvent<{\r\n      start: moment.Moment;\r\n      end: moment.Moment;\r\n    }>,\r\n  ) {\r\n    this.handlePaymentInputChange('date', e.detail.end.format('YYYY-MM-DD'));\r\n  }\r\n  _renderTableRow(item: IPayment, rowMode: 'add' | 'normal' = 'normal') {\r\n    return (\r\n      <Fragment>\r\n        <tr>\r\n          <td class={'border payments-height border-light border-bottom-0 text-center'}>\r\n            {rowMode === 'normal' ? (\r\n              <span class=\"sm-padding-left\">{_formatDate(item.date)}</span>\r\n            ) : (\r\n              <ir-date-picker\r\n                date={this.itemToBeAdded?.date ? new Date(this.itemToBeAdded.date) : new Date()}\r\n                minDate={moment().add(-2, 'months').startOf('month').format('YYYY-MM-DD')}\r\n                singleDatePicker\r\n                autoApply\r\n                onDateChanged={this.handleDateChange.bind(this)}\r\n              ></ir-date-picker>\r\n            )}\r\n          </td>\r\n          <td class={'border payments-height border-light border-bottom-0 text-center '}>\r\n            {rowMode === 'normal' ? (\r\n              <span class=\"sm-padding-right\">{formatAmount(this.bookingDetails.currency.symbol, item.amount)}</span>\r\n            ) : (\r\n              <input\r\n                type=\"text\"\r\n                class=\"border-0 text-center form-control py-0 m-0 w-100\"\r\n                value={this.itemToBeAdded.amount}\r\n                onBlur={e => {\r\n                  (e.target as HTMLInputElement).value = Number(this.itemToBeAdded.amount).toFixed(2);\r\n                }}\r\n                onInput={event => this.handlePaymentInputChange('amount', +(event.target as HTMLInputElement).value, event)}\r\n              ></input>\r\n            )}\r\n          </td>\r\n          <td class={'border payments-height border-light border-bottom-0 text-center'}>\r\n            {rowMode === 'normal' ? (\r\n              <span class=\"sm-padding-left\">{item.designation}</span>\r\n            ) : (\r\n              <input\r\n                class=\"border-0 w-100 form-control py-0 m-0\"\r\n                onInput={event => this.handlePaymentInputChange('designation', (event.target as HTMLInputElement).value)}\r\n                type=\"text\"\r\n              ></input>\r\n            )}\r\n          </td>\r\n          <td rowSpan={2} class={'border payments-height border-light border-bottom-0 text-center'}>\r\n            <div class={'payment-actions'}>\r\n              {rowMode === 'add' && (\r\n                <ir-button\r\n                  variant=\"icon\"\r\n                  icon_name=\"save\"\r\n                  style={colorVariants.secondary}\r\n                  isLoading={rowMode === 'add' && isRequestPending('/Do_Payment')}\r\n                  class={'m-0'}\r\n                  onClickHanlder={() => {\r\n                    this._processPaymentSave();\r\n                  }}\r\n                ></ir-button>\r\n              )}\r\n              <ir-button\r\n                variant=\"icon\"\r\n                icon_name=\"trash\"\r\n                style={colorVariants.danger}\r\n                isLoading={this.toBeDeletedItem?.id === item?.id && isRequestPending('/Cancel_Payment')}\r\n                onClickHanlder={\r\n                  rowMode === 'add'\r\n                    ? () => {\r\n                        this.newTableRow = false;\r\n                        this.initializeItemToBeAdded();\r\n                      }\r\n                    : () => {\r\n                        this.modal_mode = 'delete';\r\n                        this.toBeDeletedItem = item;\r\n                        this.openModal();\r\n                      }\r\n                }\r\n              ></ir-button>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td colSpan={3} class={'border border-light payments-height border-bottom-0 text-center'}>\r\n            {rowMode === 'normal' ? (\r\n              <span class=\"sm-padding-left \">{item.reference}</span>\r\n            ) : (\r\n              <input\r\n                class=\"border-0 w-100  form-control py-0 m-0\"\r\n                onKeyPress={event => {\r\n                  if (event.key === 'Enter') {\r\n                    this.newTableRow = false;\r\n                    this._handleSave();\r\n                  }\r\n                }}\r\n                onInput={event => this.handlePaymentInputChange('reference', (event.target as HTMLInputElement).value)}\r\n                type=\"text\"\r\n              ></input>\r\n            )}\r\n          </td>\r\n        </tr>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  bookingGuarantee() {\r\n    if (this.bookingDetails.is_direct && !this.bookingDetails.guest.cci) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div>\r\n        <div class=\"d-flex align-items-center\">\r\n          <strong class=\"mr-1\">{this.defaultTexts.entries.Lcz_BookingGuarantee}</strong>\r\n          <ir-button\r\n            id=\"drawer-icon\"\r\n            data-toggle=\"collapse\"\r\n            data-target={`.guarrantee`}\r\n            aria-expanded={this.collapsedGuarantee ? 'true' : 'false'}\r\n            aria-controls=\"myCollapse\"\r\n            class=\"sm-padding-right pointer\"\r\n            variant=\"icon\"\r\n            icon_name=\"credit_card\"\r\n            onClickHanlder={async () => {\r\n              if (!this.bookingDetails.is_direct && this.bookingDetails.channel_booking_nbr && !this.bookingDetails.guest.cci) {\r\n                this.paymentDetailsUrl = await this.bookingService.getPCICardInfoURL(this.bookingDetails.booking_nbr);\r\n              }\r\n              this.collapsedGuarantee = !this.collapsedGuarantee;\r\n            }}\r\n          ></ir-button>\r\n        </div>\r\n        <div class=\"collapse guarrantee \">\r\n          {this.bookingDetails.guest.cci ? (\r\n            [\r\n              <div>\r\n                {this.bookingDetails?.guest?.cci && 'Card:'} <span>{this.bookingDetails?.guest?.cci?.nbr || ''}</span> {this.bookingDetails?.guest?.cci?.expiry_month && 'Expiry: '}\r\n                <span>\r\n                  {' '}\r\n                  {this.bookingDetails?.guest?.cci?.expiry_month || ''} {this.bookingDetails?.guest?.cci?.expiry_year && '/' + this.bookingDetails?.guest?.cci?.expiry_year}\r\n                </span>\r\n              </div>,\r\n              <div>\r\n                {this.bookingDetails?.guest?.cci.holder_name && 'Name:'} <span>{this.bookingDetails?.guest?.cci?.holder_name || ''}</span>{' '}\r\n                {this.bookingDetails?.guest?.cci?.cvc && '- CVC:'} <span> {this.bookingDetails?.guest?.cci?.cvc || ''}</span>\r\n              </div>,\r\n            ]\r\n          ) : this.paymentDetailsUrl ? (\r\n            <iframe src={this.paymentDetailsUrl} width=\"100%\" class=\"iframeHeight\" frameborder=\"0\" name=\"payment\"></iframe>\r\n          ) : (\r\n            <div class=\"text-center\">{this.paymentExceptionMessage}</div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  _renderDueDate(item: IDueDate) {\r\n    return (\r\n      <tr>\r\n        <td class={'pr-1'}>{_formatDate(item.date)}</td>\r\n        <td class={'pr-1'}>{formatAmount(this.bookingDetails.currency.symbol, item.amount)}</td>\r\n        <td class={'pr-1'}>{item.description}</td>\r\n        <td class=\"collapse font-size-small roomName\">{item.room}</td>\r\n      </tr>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    if (!this.bookingDetails.financial) {\r\n      return null;\r\n    }\r\n\r\n    return [\r\n      <div class=\"card m-0\">\r\n        <div class=\"p-1\">\r\n          {this.bookingDetails.financial.gross_cost > 0 && this.bookingDetails.financial.gross_cost !== null && (\r\n            <div class=\"mb-2 h4 total-cost-container\">\r\n              {this.defaultTexts.entries.Lcz_TotalCost}: <span>{formatAmount(this.bookingDetails.currency.symbol, this.bookingDetails.financial.gross_cost)}</span>\r\n            </div>\r\n          )}\r\n          {/* TODO:IMPLEMENT THIS ON BOOKING ACTIONS */}\r\n          <div class=\" h4\">\r\n            Balance: <span class=\"danger font-weight-bold\">{formatAmount(this.bookingDetails.currency.symbol, this.bookingDetails.financial.due_amount)}</span>\r\n          </div>\r\n          {/* <div class=\" h4\">\r\n            {this.defaultTexts.entries.Lcz_DueBalance}:{' '}\r\n            <span class=\"danger font-weight-bold\">{formatAmount(this.bookingDetails.currency.symbol, this.bookingDetails.financial.due_amount)}</span>\r\n          </div> */}\r\n          {/* TODO:IMPLEMENT THIS ON BOOKING ACTIONS */}\r\n          <div class=\"mb-2 h4\">\r\n            Collected:{' '}\r\n            <span class=\"\">\r\n              {formatAmount(\r\n                this.bookingDetails.currency.symbol,\r\n                this.bookingDetails.financial.payments ? this.bookingDetails.financial.payments.reduce((prev, curr) => prev + curr.amount, 0) : 0,\r\n              )}\r\n            </span>\r\n          </div>\r\n\r\n          {this.bookingGuarantee()}\r\n          {/* <div class=\"mt-2\">\r\n            <div>\r\n              {this.bookingDetails.financial?.due_dates?.length > 0 && (\r\n                <Fragment>\r\n                  <div class=\"d-flex align-items-center\">\r\n                    <strong class=\"mr-1\">{this.defaultTexts.entries.Lcz_PaymentDueDates}</strong>\r\n                    <ir-button\r\n                      id=\"drawer-icon\"\r\n                      data-toggle=\"collapse\"\r\n                      data-target={`.roomName`}\r\n                      aria-expanded={this.collapsedPayment ? 'true' : 'false'}\r\n                      aria-controls=\"myCollapse\"\r\n                      variant=\"icon\"\r\n                      icon_name={this.collapsedPayment ? 'closed_eye' : 'open_eye'}\r\n                      onClickHanlder={() => {\r\n                        this.collapsedPayment = !this.collapsedPayment;\r\n                      }}\r\n                      style={{ '--icon-size': '1.5rem' }}\r\n                    ></ir-button>\r\n                  </div>\r\n\r\n                  <table>{this.bookingDetails.financial.due_dates?.map(item => this._renderDueDate(item))}</table>\r\n                </Fragment>\r\n              )}\r\n            </div>\r\n          </div> */}\r\n          {/* TODO:IMPLEMENT THIS ON BOOKING ACTIONS */}\r\n          {this.paymentActions?.filter(pa => pa.amount !== 0).length > 0 && (\r\n            <div class=\"payment_action_beta_container\">\r\n              <p class=\"beta\">Beta</p>\r\n              <ir-payment-actions paymentAction={this.paymentActions} booking={this.bookingDetails}></ir-payment-actions>\r\n            </div>\r\n          )}\r\n          <div class=\"mt-2 d-flex  flex-column rounded payment-container\">\r\n            <div class=\"d-flex align-items-center justify-content-between\">\r\n              <strong>{this.defaultTexts.entries.Lcz_Payments} history</strong>\r\n              <ir-button\r\n                id=\"add-payment\"\r\n                variant=\"icon\"\r\n                icon_name=\"square_plus\"\r\n                style={{ '--icon-size': '1.5rem' }}\r\n                onClickHanlder={() => {\r\n                  this.newTableRow = true;\r\n                }}\r\n              ></ir-button>\r\n            </div>\r\n            <table class=\"mt-1\" style={{ backgroundColor: this.paymentBackground }}>\r\n              <thead>\r\n                <tr>\r\n                  <th class={'border border-light border-bottom-0 text-center payment_date'}>{this.defaultTexts.entries.Lcz_Dates}</th>\r\n                  <th class={'border border-light border-bottom-0 text-center w-60'}>{this.defaultTexts.entries.Lcz_Amount}</th>\r\n                  <th class={'border border-light border-bottom-0 text-center designation'}>{this.defaultTexts.entries.Lcz_Designation}</th>\r\n                  <th class={'border border-light border-bottom-0 text-center action_icons'}>\r\n                    <span class={'sr-only'}>payment actions</span>\r\n                    {/* <ir-button\r\n                      id=\"add-payment\"\r\n                      variant=\"icon\"\r\n                      icon_name=\"square_plus\"\r\n                      onClickHanlder={() => {\r\n                        this.newTableRow = true;\r\n                      }}\r\n                    ></ir-button> */}\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {this.bookingDetails.financial.payments?.map((item: any) => this._renderTableRow(item))}\r\n                {this.newTableRow ? this._renderTableRow(null, 'add') : null}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>,\r\n\r\n      <ir-modal\r\n        item={this.toBeDeletedItem}\r\n        class={'delete-record-modal'}\r\n        modalTitle={this.defaultTexts.entries.Lcz_Confirmation}\r\n        modalBody={this.modal_mode === 'delete' ? this.defaultTexts.entries.Lcz_IfDeletedPermantlyLost : this.defaultTexts.entries.Lcz_EnteringAmountGreaterThanDue}\r\n        iconAvailable={true}\r\n        icon=\"ft-alert-triangle danger h1\"\r\n        leftBtnText={this.defaultTexts.entries.Lcz_Cancel}\r\n        rightBtnText={this.modal_mode === 'delete' ? this.defaultTexts.entries.Lcz_Delete : this.defaultTexts.entries.Lcz_Confirm}\r\n        leftBtnColor=\"secondary\"\r\n        rightBtnColor={this.modal_mode === 'delete' ? 'danger' : 'primary'}\r\n        onConfirmModal={this.handleConfirmModal.bind(this)}\r\n        onCancelModal={this.handleCancelModal.bind(this)}\r\n      ></ir-modal>,\r\n    ];\r\n  }\r\n}\r\n","import axios from 'axios';\r\nimport { TDueParams, TPickupData } from './types';\r\nimport calendar_data from '@/stores/calendar-data';\r\nimport { IBookingPickupInfo } from '@/components';\r\nimport { renderTime } from '@/utils/utils';\r\n\r\nexport class PickupService {\r\n  public async savePickup(params: TPickupData, booking_nbr: string, is_remove: boolean) {\r\n    try {\r\n      const splitTime = params.arrival_time.split(':');\r\n      await axios.post(`/Do_Pickup`, {\r\n        booking_nbr,\r\n        is_remove,\r\n        currency: params.currency,\r\n        date: params.arrival_date,\r\n        details: params.flight_details,\r\n        hour: splitTime[0],\r\n        minute: splitTime[1],\r\n        nbr_of_units: params.number_of_vehicles,\r\n        selected_option: params.selected_option,\r\n        total: +params.due_upon_booking,\r\n      });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  public transformDefaultPickupData(data: IBookingPickupInfo): TPickupData {\r\n    const arrival_time = data.hour && data.minute ? renderTime(data.hour) + ':' + renderTime(data.minute) : '';\r\n    return {\r\n      arrival_date: data.date,\r\n      arrival_time,\r\n      currency: data.currency,\r\n      due_upon_booking: data.total.toFixed(2),\r\n      flight_details: data.details,\r\n      location: data.selected_option.location.id,\r\n      number_of_vehicles: data.nbr_of_units,\r\n      selected_option: data.selected_option,\r\n      vehicle_type_code: data.selected_option.vehicle.code,\r\n    };\r\n  }\r\n  public getAvailableLocations(message: string) {\r\n    let locations: { value: number; text: string }[] = [];\r\n    calendar_data.pickup_service.allowed_options.forEach(option => {\r\n      if (locations.filter(location => location.value === option.location.id).length === 0) {\r\n        locations.push({\r\n          text: message + ' ' + option.location.description,\r\n          value: option.location.id,\r\n        });\r\n      }\r\n    });\r\n    return locations;\r\n  }\r\n  public validateForm(params: TPickupData): { error: boolean; cause?: keyof TPickupData } {\r\n    if (params.arrival_time.split(':').length !== 2) {\r\n      return {\r\n        error: true,\r\n        cause: 'arrival_time',\r\n      };\r\n    }\r\n    if (params.flight_details === '') {\r\n      return {\r\n        error: true,\r\n        cause: 'flight_details',\r\n      };\r\n    }\r\n    if (params.vehicle_type_code === '') {\r\n      return {\r\n        error: true,\r\n        cause: 'vehicle_type_code',\r\n      };\r\n    }\r\n    if (params.number_of_vehicles === 0) {\r\n      return {\r\n        error: true,\r\n        cause: 'number_of_vehicles',\r\n      };\r\n    }\r\n    return { error: false };\r\n  }\r\n  public getNumberOfVehicles(capacity: number, numberOfPersons: number) {\r\n    let total_number_of_vehicles = Math.ceil(numberOfPersons / capacity);\r\n    let startNumber = total_number_of_vehicles > 1 ? total_number_of_vehicles : 1;\r\n    let bonus_number = total_number_of_vehicles > 1 ? 2 : 3;\r\n    return Array.from({ length: total_number_of_vehicles + bonus_number }, (_, i) => startNumber + i);\r\n  }\r\n  private getPickUpPersonStatus(code: string) {\r\n    const getCodeDescription = calendar_data.pickup_service.allowed_pricing_models.find(model => model.code === code);\r\n    if (!getCodeDescription) {\r\n      return null;\r\n    }\r\n    return getCodeDescription.description;\r\n  }\r\n  public updateDue(params: TDueParams) {\r\n    const getCodeDescription = this.getPickUpPersonStatus(params.code);\r\n    if (!getCodeDescription) {\r\n      return;\r\n    }\r\n    if (getCodeDescription === 'Person') {\r\n      return params.amount * params.numberOfPersons;\r\n    } else {\r\n      return params.amount * params.number_of_vehicles;\r\n    }\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n.custom-card-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  border-bottom: 1px solid #e4e5ec;\r\n}\r\n.card-title {\r\n  flex: 1;\r\n}\r\n.border-theme {\r\n  border: 1px solid #cacfe7;\r\n}\r\n","import calendar_data from '@/stores/calendar-data';\r\nimport locales from '@/stores/locales.store';\r\nimport { Component, Element, Event, EventEmitter, Fragment, Host, Prop, State, h } from '@stencil/core';\r\nimport { TPickupData } from './types';\r\nimport moment from 'moment';\r\nimport { IAllowedOptions } from '@/models/calendarData';\r\nimport { PickupService } from './pickup.service';\r\nimport { IBookingPickupInfo } from '@/models/booking.dto';\r\n\r\n@Component({\r\n  tag: 'ir-pickup',\r\n  styleUrl: 'ir-pickup.css',\r\n  scoped: true,\r\n})\r\nexport class IrPickup {\r\n  @Element() el: HTMLElement;\r\n\r\n  @Prop() defaultPickupData: IBookingPickupInfo | null;\r\n  @Prop() numberOfPersons: number = 0;\r\n  @Prop() bookingNumber: string;\r\n\r\n  @State() isLoading = false;\r\n  @State() allowedOptionsByLocation: IAllowedOptions[] = [];\r\n  @State() pickupData: TPickupData = {\r\n    location: -1,\r\n    flight_details: '',\r\n    due_upon_booking: '',\r\n    number_of_vehicles: 1,\r\n    vehicle_type_code: '',\r\n    currency: undefined,\r\n    arrival_time: '',\r\n    arrival_date: moment().format('YYYY-MM-DD'),\r\n    selected_option: undefined,\r\n  };\r\n  @State() vehicleCapacity: number[] = [];\r\n  @State() cause: keyof TPickupData | null = null;\r\n\r\n  @Event() closeModal: EventEmitter<null>;\r\n  @Event() resetBookingData: EventEmitter<null>;\r\n\r\n  private pickupService = new PickupService();\r\n\r\n  componentWillLoad() {\r\n    if (this.defaultPickupData) {\r\n      const transformedData = this.pickupService.transformDefaultPickupData(this.defaultPickupData);\r\n      this.vehicleCapacity = this.pickupService.getNumberOfVehicles(transformedData.selected_option.vehicle.capacity, this.numberOfPersons);\r\n      this.allowedOptionsByLocation = calendar_data.pickup_service.allowed_options.filter(option => option.location.id === transformedData.location);\r\n      this.pickupData = { ...transformedData };\r\n    }\r\n  }\r\n  handleLocationChange(event: CustomEvent) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    const value = event.detail;\r\n    if (value === '') {\r\n      this.updatePickupData('location', -1);\r\n    }\r\n    if (value !== '') {\r\n      this.allowedOptionsByLocation = calendar_data.pickup_service.allowed_options.filter(option => option.location.id.toString() === value);\r\n      let locationChoice = this.allowedOptionsByLocation[0];\r\n      if (!locationChoice) {\r\n        return;\r\n      }\r\n      locationChoice.currency;\r\n      this.vehicleCapacity = this.pickupService.getNumberOfVehicles(locationChoice.vehicle.capacity, this.numberOfPersons);\r\n      this.pickupData = {\r\n        ...this.pickupData,\r\n        location: value,\r\n        selected_option: locationChoice,\r\n        number_of_vehicles: this.vehicleCapacity[0],\r\n        due_upon_booking: this.pickupService\r\n          .updateDue({\r\n            amount: locationChoice.amount,\r\n            code: locationChoice.pricing_model.code,\r\n            numberOfPersons: this.numberOfPersons,\r\n            number_of_vehicles: this.vehicleCapacity[0],\r\n          })\r\n          .toFixed(2),\r\n        vehicle_type_code: locationChoice.vehicle.code,\r\n        currency: locationChoice.currency,\r\n        // number_of_vehicles:this.pickupService\r\n      };\r\n      const input = this.el.querySelector('#pickup-time');\r\n      if (!input) {\r\n        setTimeout(() => {\r\n          this.initializeInputMask();\r\n        }, 100);\r\n      }\r\n    }\r\n  }\r\n  initializeInputMask() {\r\n    const input = this.el.querySelector('#pickup-time');\r\n    // if (this.pickupData) {\r\n    //   (input as HTMLInputElement).value = this.pickupData.arrival_time;\r\n    // }\r\n    if (input) {\r\n      Inputmask('Hh:Mm', {\r\n        placeholder: 'HH:mm',\r\n        definitions: {\r\n          H: {\r\n            validator: '[0-2]',\r\n          },\r\n          h: {\r\n            validator: function (ch, maskset, pos) {\r\n              var firstDigit = maskset.buffer[pos - 1];\r\n              if (firstDigit === '2') {\r\n                return /[0-3]/.test(ch);\r\n              } else {\r\n                return /[0-9]/.test(ch);\r\n              }\r\n            },\r\n          },\r\n          M: {\r\n            validator: '[0-5]',\r\n          },\r\n          m: {\r\n            validator: '[0-9]',\r\n          },\r\n        },\r\n        insertMode: true,\r\n        showMaskOnHover: false,\r\n        inputmode: 'numeric',\r\n        alias: 'datetime',\r\n        oncomplete: () => {\r\n          this.updatePickupData('arrival_time', (input as any).value);\r\n        },\r\n        oncleared: () => {\r\n          this.updatePickupData('arrival_time', '');\r\n        },\r\n        onincomplete: () => {\r\n          this.updatePickupData('arrival_time', (input as any).value);\r\n        },\r\n      }).mask(input as HTMLElement);\r\n    }\r\n  }\r\n  handleVehicleQuantityChange(e: CustomEvent) {\r\n    if (e.detail === '') {\r\n      return;\r\n    }\r\n    const value = +e.detail;\r\n    this.pickupData = {\r\n      ...this.pickupData,\r\n      number_of_vehicles: value,\r\n      due_upon_booking: this.pickupService\r\n        .updateDue({\r\n          amount: this.pickupData.selected_option.amount,\r\n          code: this.pickupData.selected_option.pricing_model.code,\r\n          numberOfPersons: this.numberOfPersons,\r\n          number_of_vehicles: value,\r\n        })\r\n        .toFixed(2),\r\n    };\r\n  }\r\n  componentDidLoad() {\r\n    if (this.defaultPickupData) {\r\n      this.initializeInputMask();\r\n    }\r\n  }\r\n  handleVehicleTypeChange(e: CustomEvent) {\r\n    if (e.detail === '') {\r\n      this.pickupData = {\r\n        ...this.pickupData,\r\n        due_upon_booking: '',\r\n        vehicle_type_code: '',\r\n      };\r\n      return;\r\n    }\r\n    let locationChoice = calendar_data.pickup_service.allowed_options.find(option => option.location.id === +this.pickupData.location && option.vehicle.code === e.detail);\r\n    if (!locationChoice) {\r\n      return;\r\n    }\r\n    this.vehicleCapacity = [...this.pickupService.getNumberOfVehicles(locationChoice.vehicle.capacity, this.numberOfPersons)];\r\n    this.pickupData = {\r\n      ...this.pickupData,\r\n      selected_option: locationChoice,\r\n      number_of_vehicles: this.vehicleCapacity[0],\r\n      due_upon_booking: this.pickupService\r\n        .updateDue({\r\n          amount: locationChoice.amount,\r\n          code: locationChoice.pricing_model.code,\r\n          numberOfPersons: this.numberOfPersons,\r\n          number_of_vehicles: this.vehicleCapacity[0],\r\n        })\r\n        .toFixed(2),\r\n      vehicle_type_code: locationChoice.vehicle.code,\r\n    };\r\n  }\r\n\r\n  updatePickupData(key: keyof TPickupData, value: any) {\r\n    this.pickupData = { ...this.pickupData, [key]: value };\r\n  }\r\n  async savePickup() {\r\n    try {\r\n      this.isLoading = true;\r\n      const isValid = this.pickupService.validateForm(this.pickupData);\r\n      if (isValid.error) {\r\n        this.cause = isValid.cause;\r\n        return;\r\n      }\r\n      if (this.cause) {\r\n        this.cause = null;\r\n      }\r\n      await this.pickupService.savePickup(this.pickupData, this.bookingNumber, this.defaultPickupData !== null && this.pickupData.location === -1);\r\n      this.resetBookingData.emit(null);\r\n      this.closeModal.emit(null);\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <Host class={'p-0'}>\r\n        <ir-title class=\"px-1\" onCloseSideBar={() => this.closeModal.emit(null)} label={locales.entries.Lcz_Pickup} displayContext=\"sidebar\"></ir-title>\r\n        <section class={'px-1'}>\r\n          <ir-select\r\n            selectedValue={this.pickupData.location}\r\n            selectContainerStyle=\"mb-1\"\r\n            onSelectChange={this.handleLocationChange.bind(this)}\r\n            firstOption={locales.entries.Lcz_Pickup_NoThankYou}\r\n            class={'m-0 mb-1'}\r\n            LabelAvailable={false}\r\n            data={this.pickupService.getAvailableLocations(locales.entries.Lcz_Pickup_YesFrom) as any}\r\n          ></ir-select>\r\n          {this.pickupData.location > 0 && (\r\n            <Fragment>\r\n              {/*Date and Time Picker container */}\r\n              <div class={'d-flex'}>\r\n                {/*Date Picker */}\r\n                <div class=\"form-group  mr-1\">\r\n                  <div class=\"input-group row m-0\">\r\n                    <div class={`input-group-prepend col-5 p-0 text-dark border-0`}>\r\n                      <label class={`input-group-text  flex-grow-1 text-dark border-theme `}>{locales.entries.Lcz_ArrivalDate}</label>\r\n                    </div>\r\n                    <div class=\"form-control form-control-md col-7 d-flex align-items-center pl-0\">\r\n                      <ir-date-picker\r\n                        minDate={moment().format('YYYY-MM-DD')}\r\n                        autoApply\r\n                        // format=\"ddd, DD M YYYY\"\r\n                        singleDatePicker\r\n                        onDateChanged={evt => {\r\n                          this.updatePickupData('arrival_date', evt.detail.start.format('YYYY-MM-DD'));\r\n                        }}\r\n                      ></ir-date-picker>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                {/*Time Picker */}\r\n                <div class=\"form-group\">\r\n                  <div class=\"input-group  row m-0\">\r\n                    <div class={`input-group-prepend col-4 col-sm-3 p-0 text-dark border-0`}>\r\n                      <label htmlFor=\"pickup\" class={`input-group-text flex-grow-1 text-dark border-theme`}>\r\n                        {locales.entries.Lcz_Time}\r\n                      </label>\r\n                    </div>\r\n\r\n                    <input\r\n                      type=\"text\"\r\n                      value={this.pickupData.arrival_time}\r\n                      id=\"pickup-time\"\r\n                      class={`form-control col-8 col-sm-4 ${this.cause === 'arrival_time' && 'border-danger'}`}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <ir-input-text\r\n                value={this.pickupData.flight_details}\r\n                label={locales.entries.Lcz_FlightDetails}\r\n                onTextChange={e => this.updatePickupData('flight_details', e.detail)}\r\n                placeholder=\"\"\r\n                inputStyles={this.cause === 'flight_details' ? 'border-danger' : ''}\r\n              ></ir-input-text>\r\n              <ir-select\r\n                selectContainerStyle=\"mb-1\"\r\n                selectStyles={this.cause === 'vehicle_type_code' ? 'border-danger' : ''}\r\n                onSelectChange={this.handleVehicleTypeChange.bind(this)}\r\n                firstOption={locales.entries.Lcz_Select}\r\n                selectedValue={this.pickupData.vehicle_type_code}\r\n                class={'m-0'}\r\n                LabelAvailable={false}\r\n                data={\r\n                  this.allowedOptionsByLocation.map(option => ({\r\n                    text: option.vehicle.description,\r\n                    value: option.vehicle.code,\r\n                  })) as any\r\n                }\r\n              ></ir-select>\r\n              <div class={'d-flex flex-column flex-md-row'}>\r\n                <ir-select\r\n                  labelBorder=\"theme\"\r\n                  selectContainerStyle=\"mb-1\"\r\n                  onSelectChange={this.handleVehicleQuantityChange.bind(this)}\r\n                  selectStyles={this.cause === 'number_of_vehicles' ? 'border-danger' : ''}\r\n                  selectedValue={this.pickupData.number_of_vehicles}\r\n                  labelWidth={7}\r\n                  class={'m-0  mb-md-0 mr-md-1 flex-fill'}\r\n                  label={locales.entries.Lcz_NbrOfVehicles}\r\n                  data={\r\n                    this.vehicleCapacity.map(i => ({\r\n                      text: i,\r\n                      value: i,\r\n                    })) as any\r\n                  }\r\n                ></ir-select>\r\n                <ir-input-text\r\n                  labelBorder=\"theme\"\r\n                  readonly\r\n                  value={this.pickupData.due_upon_booking}\r\n                  labelWidth={7}\r\n                  label={`${locales.entries.Lcz_DueUponBooking}  ${this.pickupData.currency.symbol}`}\r\n                  placeholder=\"\"\r\n                  class=\"\"\r\n                ></ir-input-text>\r\n              </div>\r\n            </Fragment>\r\n          )}\r\n          <div class={'d-flex flex-column flex-sm-row mt-3'}>\r\n            <ir-button\r\n              onClick={() => this.closeModal.emit(null)}\r\n              btn_styles=\"justify-content-center\"\r\n              class={`mb-1 mb-sm-0 flex-fill  ${this.defaultPickupData || this.pickupData.location !== -1 ? 'mr-sm-1' : ''}`}\r\n              icon=\"\"\r\n              text={locales.entries.Lcz_Cancel}\r\n              btn_color=\"secondary\"\r\n            ></ir-button>\r\n            {(this.defaultPickupData || this.pickupData.location !== -1) && (\r\n              <ir-button\r\n                btn_styles=\"justify-content-center align-items-center\"\r\n                class={'m-0 flex-fill text-center'}\r\n                icon=\"\"\r\n                isLoading={this.isLoading}\r\n                text={locales.entries.Lcz_Save}\r\n                btn_color=\"primary\"\r\n                onClick={this.savePickup.bind(this)}\r\n              ></ir-button>\r\n            )}\r\n          </div>\r\n        </section>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n","import calendar_data from '@/stores/calendar-data';\r\nimport locales from '@/stores/locales.store';\r\nimport { Component, Host, Prop, h } from '@stencil/core';\r\nimport { _formatTime } from '../functions';\r\nimport moment from 'moment';\r\nimport { colorVariants } from '@/components/ui/ir-icons/icons';\r\nimport { Booking } from '@/models/booking.dto';\r\n@Component({\r\n  tag: 'ir-pickup-view',\r\n  styleUrl: 'ir-pickup-view.css',\r\n  scoped: true,\r\n})\r\nexport class IrPickupView {\r\n  @Prop() booking: Booking;\r\n  render() {\r\n    if (!calendar_data.pickup_service.is_enabled || !this.booking.is_editable) {\r\n      return null;\r\n    }\r\n    return (\r\n      <Host>\r\n        <div class=\"mb-1\">\r\n          <div class={'d-flex w-100 mb-1 align-items-center justify-content-between'}>\r\n            <p class={'font-size-large p-0 m-0 '}>{locales.entries.Lcz_Pickup}</p>\r\n            <ir-button id=\"pickup\" variant=\"icon\" icon_name=\"edit\" style={{ ...colorVariants.secondary, '--icon-size': '1.5rem' }}></ir-button>\r\n          </div>\r\n          {this.booking.pickup_info && (\r\n            <div class={'card'}>\r\n              <div class={'p-1'}>\r\n                <div class={'d-flex align-items-center py-0 my-0 pickup-margin'}>\r\n                  <p class={'font-weight-bold mr-1 py-0 my-0'}>\r\n                    {locales.entries.Lcz_Date}: <span class={'font-weight-normal'}>{moment(this.booking.pickup_info.date, 'YYYY-MM-DD').format('MMM DD, YYYY')}</span>\r\n                  </p>\r\n                  {this.booking.pickup_info.hour && this.booking.pickup_info.minute && (\r\n                    <p class={'font-weight-bold flex-fill py-0 my-0'}>\r\n                      {locales.entries.Lcz_Time}:\r\n                      <span class={'font-weight-normal'}> {_formatTime(this.booking.pickup_info.hour.toString(), this.booking.pickup_info.minute.toString())}</span>\r\n                    </p>\r\n                  )}\r\n                  <p class={'font-weight-bold py-0 my-0'}>\r\n                    {locales.entries.Lcz_DueUponBooking}:{' '}\r\n                    <span class={'font-weight-normal'}>\r\n                      {this.booking.pickup_info.currency.symbol}\r\n                      {this.booking.pickup_info.total}\r\n                    </span>\r\n                  </p>\r\n                </div>\r\n                <p class={'font-weight-bold py-0 my-0'}>\r\n                  {locales.entries.Lcz_FlightDetails}:<span class={'font-weight-normal'}> {`${this.booking.pickup_info.details}`}</span>\r\n                </p>\r\n                <p class={'py-0 my-0 pickup-margin'}>{`${this.booking.pickup_info.selected_option.vehicle.description}`}</p>\r\n                <p class={'font-weight-bold py-0 my-0 pickup-margin'}>\r\n                  {locales.entries.Lcz_NbrOfVehicles}:<span class={'font-weight-normal'}> {`${this.booking.pickup_info.nbr_of_units}`}</span>\r\n                </p>\r\n                <p class={'small py-0 my-0 pickup-margin'}>\r\n                  {calendar_data.pickup_service.pickup_instruction.description}\r\n                  {calendar_data.pickup_service.pickup_cancelation_prepayment.description}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",".light-blue-bg {\r\n  background: #acecff;\r\n  padding: 0.3rem 0.5rem;\r\n  border-radius: 5px;\r\n\r\n  /* max-width: max-content; */\r\n}\r\n.room_statements {\r\n  display: block;\r\n  width: 100%;\r\n}\r\n\r\n.room_statements span {\r\n  display: inline;\r\n  white-space: normal;\r\n  line-height: 1.5;\r\n  word-break: break-word;\r\n}\r\n\r\n.room_statements b {\r\n  display: inline;\r\n  margin-right: 5px;\r\n}\r\n.payment-container {\r\n  position: absolute;\r\n  right: 1rem;\r\n  height: fit-content;\r\n}\r\n:host {\r\n  position: relative;\r\n}\r\n.sm-mr {\r\n  margin-right: 3px;\r\n}\r\n.subtotal_row {\r\n  padding-top: 8px;\r\n}\r\n.room_actions_btns {\r\n  gap: 0.5rem;\r\n}\r\n.night-cost {\r\n  color: #7cbebe;\r\n}\r\n/* .cancelation {\r\n  max-width: 30%;\r\n} */\r\n.mx-0-5 {\r\n  margin-left: 2px !important;\r\n  margin-right: 2px !important;\r\n}\r\n.tax-width {\r\n  font-size: 10px;\r\n  /* flex-wrap: wrap; */\r\n}\r\n.sm-mb-1 {\r\n  margin-bottom: 5px !important;\r\n}\r\n.sm-mt-1 {\r\n  margin-top: 5px !important;\r\n}\r\n.mx-01 {\r\n  --m: 5px;\r\n  margin-right: var(--m) !important;\r\n  margin-left: var(--m) !important;\r\n}\r\n","import { Component, h, Prop, EventEmitter, Event, Listen, State, Element, Watch, Host, Fragment } from '@stencil/core';\r\nimport { _formatDate, _getDay } from '../functions';\r\nimport { Booking, IUnit, IVariations, Occupancy, Room } from '@/models/booking.dto';\r\nimport { TIglBookPropertyPayload } from '@/models/igl-book-property';\r\nimport { formatName } from '@/utils/booking';\r\nimport { IrModal } from '@/components/ir-modal/ir-modal';\r\nimport axios from 'axios';\r\nimport locales, { ILocale } from '@/stores/locales.store';\r\nimport calendar_data from '@/stores/calendar-data';\r\nimport { colorVariants } from '@/components/ui/ir-icons/icons';\r\nimport { formatAmount } from '@/utils/utils';\r\n\r\n@Component({\r\n  tag: 'ir-room',\r\n  styleUrl: 'ir-room.css',\r\n  scoped: true,\r\n})\r\nexport class IrRoom {\r\n  // Room Data\r\n  @Prop() bookingEvent: Booking;\r\n  @Prop() bookingIndex: number;\r\n  @Prop() isEditable: boolean;\r\n  // Meal Code names\r\n  @Prop() mealCodeName: string;\r\n  @Prop() myRoomTypeFoodCat: string;\r\n  // Currency\r\n  @Prop() currency: string = 'USD';\r\n  @Prop() legendData;\r\n  @Prop() roomsInfo;\r\n  @State() collapsed: boolean = false;\r\n  @Prop() defaultTexts: ILocale;\r\n  @Prop() ticket;\r\n\r\n  // Booleans Conditions\r\n  @Prop() hasRoomEdit: boolean = false;\r\n  @Prop() hasRoomDelete: boolean = false;\r\n  @Prop() hasRoomAdd: boolean = false;\r\n  @Prop() hasCheckIn: boolean = false;\r\n  @Prop() hasCheckOut: boolean = false;\r\n  @Element() element: any;\r\n  // Event Emitters\r\n  @Event({ bubbles: true, composed: true }) deleteFinished: EventEmitter<string>;\r\n  @Event({ bubbles: true, composed: true }) pressCheckIn: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) pressCheckOut: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) editInitiated: EventEmitter<TIglBookPropertyPayload>;\r\n  @State() item: Room;\r\n  @State() isLoading: boolean = false;\r\n  @State() isModelOpen: boolean = false;\r\n  private modal: IrModal;\r\n  irModalRef: HTMLIrModalElement;\r\n  componentWillLoad() {\r\n    if (this.bookingEvent) {\r\n      this.item = this.bookingEvent.rooms[this.bookingIndex];\r\n    }\r\n  }\r\n  @Watch('bookingEvent')\r\n  handleBookingEventChange() {\r\n    this.item = this.bookingEvent.rooms[this.bookingIndex];\r\n  }\r\n  componentDidLoad() {\r\n    this.modal = this.element.querySelector('ir-modal');\r\n  }\r\n  @Listen('clickHanlder')\r\n  handleClick(e) {\r\n    let target = e.target;\r\n    if (target.id == 'checkin') {\r\n      this.pressCheckIn.emit(this.item);\r\n    } else if (target.id == 'checkout') {\r\n      this.pressCheckOut.emit(this.item);\r\n    }\r\n  }\r\n\r\n  getDateStr(date, locale = 'default') {\r\n    return date.getDate() + ' ' + date.toLocaleString(locale, { month: 'short' }) + ' ' + date.getFullYear();\r\n  }\r\n  handleEditClick() {\r\n    this.editInitiated.emit({\r\n      event_type: 'EDIT_BOOKING',\r\n      ID: this.item['assigned_units_pool'],\r\n      NAME: formatName(this.item.guest.first_name, this.item.guest.last_name),\r\n      EMAIL: this.bookingEvent.guest.email,\r\n      PHONE: this.bookingEvent.guest.mobile,\r\n      REFERENCE_TYPE: '',\r\n      FROM_DATE: this.bookingEvent.from_date,\r\n      TO_DATE: this.bookingEvent.to_date,\r\n      TITLE: `${this.defaultTexts.entries.Lcz_EditBookingFor} ${this.item?.roomtype?.name} ${(this.item?.unit as IUnit)?.name || ''}`,\r\n      defaultDateRange: {\r\n        dateDifference: this.item.days.length,\r\n        fromDate: new Date(this.item.from_date + 'T00:00:00'),\r\n        fromDateStr: this.getDateStr(new Date(this.item.from_date + 'T00:00:00')),\r\n        toDate: new Date(this.item.to_date + 'T00:00:00'),\r\n        toDateStr: this.getDateStr(new Date(this.item.to_date + 'T00:00:00')),\r\n        message: '',\r\n      },\r\n      bed_preference: this.item.bed_preference,\r\n      adult_child_offering: this.item.rateplan.selected_variation.adult_child_offering,\r\n      ADULTS_COUNT: this.item.rateplan.selected_variation.adult_nbr,\r\n      ARRIVAL: this.bookingEvent.arrival,\r\n      ARRIVAL_TIME: this.bookingEvent.arrival.description,\r\n      BOOKING_NUMBER: this.bookingEvent.booking_nbr,\r\n      cancelation: this.item.rateplan.cancelation,\r\n      channel_booking_nbr: this.bookingEvent.channel_booking_nbr,\r\n      CHILDREN_COUNT: this.item.rateplan.selected_variation.child_nbr,\r\n      COUNTRY: this.bookingEvent.guest.country_id,\r\n      ENTRY_DATE: this.bookingEvent.from_date,\r\n      FROM_DATE_STR: this.bookingEvent.format.from_date,\r\n      guarantee: this.item.rateplan.guarantee,\r\n      GUEST: this.bookingEvent.guest,\r\n      IDENTIFIER: this.item.identifier,\r\n      is_direct: this.bookingEvent.is_direct,\r\n      IS_EDITABLE: this.bookingEvent.is_editable,\r\n      NO_OF_DAYS: this.item.days.length,\r\n      NOTES: this.bookingEvent.remark,\r\n      origin: this.bookingEvent.origin,\r\n      POOL: this.item['assigned_units_pool'],\r\n      PR_ID: (this.item.unit as IUnit)?.id,\r\n      RATE: this.item.total,\r\n      RATE_PLAN: this.item.rateplan.name,\r\n      RATE_PLAN_ID: this.item.rateplan.id,\r\n      RATE_TYPE: this.item.roomtype.id,\r\n      ROOMS: this.bookingEvent.rooms,\r\n      SOURCE: this.bookingEvent.source,\r\n      SPLIT_BOOKING: false,\r\n      STATUS: 'IN-HOUSE',\r\n      TO_DATE_STR: this.bookingEvent.format.to_date,\r\n      TOTAL_PRICE: this.bookingEvent.total,\r\n      legendData: this.legendData,\r\n      roomsInfo: this.roomsInfo,\r\n      roomName: (this.item.unit as IUnit)?.name || '',\r\n      PICKUP_INFO: this.bookingEvent.pickup_info,\r\n      booking: this.bookingEvent,\r\n      currentRoomType: this.item,\r\n    });\r\n  }\r\n  handleDeleteClick() {\r\n    this.modal.openModal();\r\n  }\r\n  private async deleteRoom() {\r\n    try {\r\n      this.isLoading = true;\r\n      let oldRooms = [...this.bookingEvent.rooms];\r\n      oldRooms = oldRooms.filter(room => room.identifier !== this.item.identifier);\r\n\r\n      const body = {\r\n        assign_units: true,\r\n        check_in: true,\r\n        is_pms: true,\r\n        is_direct: true,\r\n        booking: {\r\n          booking_nbr: this.bookingEvent.booking_nbr,\r\n          from_date: this.bookingEvent.from_date,\r\n          to_date: this.bookingEvent.to_date,\r\n          remark: this.bookingEvent.remark,\r\n          property: this.bookingEvent.property,\r\n          source: this.bookingEvent.source,\r\n          currency: this.bookingEvent.currency,\r\n          arrival: this.bookingEvent.arrival,\r\n          guest: this.bookingEvent.guest,\r\n          rooms: oldRooms,\r\n        },\r\n      };\r\n      console.log('body:', body);\r\n\r\n      const { data } = await axios.post(`/DoReservation`, body);\r\n      if (data.ExceptionMsg !== '') {\r\n        throw new Error(data.ExceptionMsg);\r\n      }\r\n      this.irModalRef.closeModal();\r\n      this.deleteFinished.emit(this.item.identifier);\r\n    } catch (error) {\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n  // private formatVariation({ adult_nbr, child_nbr, infant_nbr }: IVariations) {\r\n  //   const adultLabel = adult_nbr > 1 ? locales.entries.Lcz_Adults.toLowerCase() : locales.entries.Lcz_Adult.toLowerCase();\r\n  //   const childLabel = child_nbr > 1 ? locales.entries.Lcz_Children.toLowerCase() : locales.entries.Lcz_Child.toLowerCase();\r\n  //   const infantLabel = infant_nbr > 1 ? 'infants' : 'infant';\r\n\r\n  //   const parts = [`${adult_nbr} ${adultLabel}`, child_nbr ? `${child_nbr} ${childLabel}` : '', infant_nbr ? `${infant_nbr} ${infantLabel}` : ''];\r\n\r\n  //   return parts.filter(Boolean).join(' ');\r\n  // }\r\n  private formatVariation({ adult_nbr, child_nbr }: IVariations, { infant_nbr }: Occupancy) {\r\n    // Adjust child number based on infants\r\n    const adjustedChildNbr = child_nbr ? Math.max(child_nbr - infant_nbr, 0) : 0;\r\n\r\n    // Define labels based on singular/plural rules\r\n    const adultLabel = adult_nbr > 1 ? locales.entries.Lcz_Adults.toLowerCase() : locales.entries.Lcz_Adult.toLowerCase();\r\n    const childLabel = adjustedChildNbr > 1 ? locales.entries.Lcz_Children.toLowerCase() : locales.entries.Lcz_Child.toLowerCase();\r\n    const infantLabel = infant_nbr > 1 ? locales.entries.Lcz_Infants.toLowerCase() : locales.entries.Lcz_Infant.toLowerCase();\r\n\r\n    // Construct parts with the updated child number\r\n    const parts = [`${adult_nbr} ${adultLabel}`, adjustedChildNbr ? `${adjustedChildNbr} ${childLabel}` : '', infant_nbr ? `${infant_nbr} ${infantLabel}` : ''];\r\n\r\n    // Join non-empty parts with spaces\r\n    return parts.filter(Boolean).join(' ');\r\n  }\r\n  render() {\r\n    return (\r\n      <Host class=\"p-1 d-flex m-0\">\r\n        <ir-button\r\n          variant=\"icon\"\r\n          id=\"drawer-icon\"\r\n          data-toggle=\"collapse\"\r\n          data-target={`#roomCollapse-${this.item.identifier?.split(' ').join('')}`}\r\n          aria-expanded={this.collapsed ? 'true' : 'false'}\r\n          aria-controls=\"myCollapse\"\r\n          class=\"mr-1\"\r\n          icon_name={this.collapsed ? 'closed_eye' : 'open_eye'}\r\n          onClickHanlder={() => {\r\n            this.collapsed = !this.collapsed;\r\n          }}\r\n          style={{ '--icon-size': '1.6rem' }}\r\n        ></ir-button>\r\n\r\n        <div class=\"flex-fill m-0 \">\r\n          <div class=\"d-flex align-items-start justify-content-between sm-mb-1\">\r\n            <p class=\"m-0 p-0\">\r\n              <strong class=\"m-0 p-0\">{this.myRoomTypeFoodCat || ''} </strong> {this.mealCodeName}{' '}\r\n              {this.item.rateplan.is_non_refundable && ` - ${this.defaultTexts.entries.Lcz_NonRefundable}`}{' '}\r\n            </p>\r\n            {/*this.item.My_Room_type.My_Room_type_desc[0].CUSTOM_TXT || ''*/}\r\n            <div class=\"d-flex m-0 p-0 align-items-center room_actions_btns\">\r\n              <span class=\"p-0 m-0 font-weight-bold\">{formatAmount(this.currency, this.item['gross_total'])}</span>\r\n              {this.hasRoomEdit && this.isEditable && (\r\n                <ir-button\r\n                  id={`roomEdit-${this.item.identifier}`}\r\n                  variant=\"icon\"\r\n                  icon_name=\"edit\"\r\n                  // class=\"mx-1\"\r\n                  style={colorVariants.secondary}\r\n                  onClickHanlder={this.handleEditClick.bind(this)}\r\n                ></ir-button>\r\n              )}\r\n              {this.hasRoomDelete && this.isEditable && (\r\n                <ir-button\r\n                  variant=\"icon\"\r\n                  onClickHanlder={this.handleDeleteClick.bind(this)}\r\n                  id={`roomDelete-${this.item.identifier}`}\r\n                  icon_name=\"trash\"\r\n                  style={colorVariants.danger}\r\n                ></ir-button>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <div class=\"d-flex align-items-center sm-mb-1\">\r\n            <ir-date-view class=\"mr-1\" from_date={this.item.from_date} to_date={this.item.to_date} showDateDifference={false}></ir-date-view>\r\n            {this.hasCheckIn && <ir-button id=\"checkin\" icon=\"\" class=\"mr-1\" btn_color=\"info\" size=\"sm\" text=\"Check in\"></ir-button>}\r\n            {this.hasCheckOut && <ir-button id=\"checkout\" icon=\"\" btn_color=\"info\" size=\"sm\" text=\"Check out\"></ir-button>}\r\n          </div>\r\n          <div class={'d-flex justify-content-end'}>\r\n            {calendar_data.is_frontdesk_enabled && this.item.unit && (\r\n              <span class={`light-blue-bg ${this.hasCheckIn || this.hasCheckOut ? 'mr-2' : ''} `}>{(this.item.unit as IUnit).name}</span>\r\n            )}\r\n          </div>\r\n\r\n          <div>\r\n            <span class=\"mr-1\">{`${this.item.guest.first_name || ''} ${this.item.guest.last_name || ''}`}</span>\r\n            {/* {this.item.rateplan.selected_variation.adult_nbr > 0 && <span> {this.item.rateplan.selected_variation.adult_child_offering}</span>} */}\r\n            {this.item.rateplan.selected_variation.adult_nbr > 0 && <span> {this.formatVariation(this.item.rateplan.selected_variation, this.item.occupancy)}</span>}\r\n          </div>\r\n          <div class=\"collapse\" id={`roomCollapse-${this.item.identifier?.split(' ').join('')}`}>\r\n            <div class=\"d-flex sm-mb-1 sm-mt-1\">\r\n              <div class=\" sm-padding-top\">\r\n                <strong class=\"sm-padding-right\">{`${this.defaultTexts.entries.Lcz_Breakdown}:`}</strong>\r\n              </div>\r\n              <div class={'flex-fill'}>\r\n                <table>\r\n                  {this.item.days.length > 0 &&\r\n                    this.item.days.map(item => {\r\n                      return (\r\n                        <tr>\r\n                          <td class={'pr-2 text-right'}>{_getDay(item.date)}</td>\r\n                          <td class=\"text-right\">{formatAmount(this.currency, item.amount)}</td>\r\n                          {item.cost > 0 && item.cost !== null && <td class=\"pl-2 text-left night-cost\">{formatAmount(this.currency, item.cost)}</td>}\r\n                        </tr>\r\n                      );\r\n                    })}\r\n                  <tr class={''}>\r\n                    <th class=\"text-right pr-2 subtotal_row\">{this.defaultTexts.entries.Lcz_SubTotal}</th>\r\n                    <th class=\"text-right subtotal_row\">{formatAmount(this.currency, this.item.total)}</th>\r\n                    {this.item.gross_cost > 0 && this.item.gross_cost !== null && <th class=\"pl-2 text-right night-cost\">{formatAmount(this.currency, this.item.cost)}</th>}\r\n                  </tr>\r\n                  {this.bookingEvent.is_direct ? (\r\n                    <Fragment>\r\n                      {(() => {\r\n                        const filtered_data = calendar_data.taxes.filter(tx => tx.pct > 0);\r\n                        return filtered_data.map(d => {\r\n                          return (\r\n                            <tr>\r\n                              <td class=\"text-right pr-2\">\r\n                                {d.is_exlusive ? this.defaultTexts.entries.Lcz_Excluding : this.defaultTexts.entries.Lcz_Including} {d.name} ({d.pct}%)\r\n                              </td>\r\n                              <td class=\"text-right\">{formatAmount(this.currency, (this.item.total * d.pct) / 100)}</td>\r\n                              {this.item.gross_cost > 0 && this.item.gross_cost !== null && (\r\n                                <td class=\"pl-2 text-right night-cost\">{formatAmount(this.currency, (this.item.cost * d.pct) / 100)}</td>\r\n                              )}\r\n                            </tr>\r\n                          );\r\n                        });\r\n                      })()}\r\n                    </Fragment>\r\n                  ) : (\r\n                    <Fragment>\r\n                      {(() => {\r\n                        const filtered_data = this.item.ota_taxes.filter(tx => tx.amount > 0);\r\n                        return filtered_data.map(d => {\r\n                          return (\r\n                            <tr>\r\n                              <td class=\"text-right pr-2\">\r\n                                {d.is_exlusive ? this.defaultTexts.entries.Lcz_Excluding : this.defaultTexts.entries.Lcz_Including} {d.name}\r\n                              </td>\r\n                              <td class=\"text-right\">\r\n                                {d.currency.symbol}\r\n                                {d.amount}\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        });\r\n                      })()}\r\n                    </Fragment>\r\n                  )}\r\n                </table>\r\n              </div>\r\n            </div>\r\n            {this.item.rateplan.cancelation && (\r\n              // <div class=\"sm-mb-1 room_statements\">\r\n              //   <span>\r\n              //     <b>\r\n              //       <u>{this.defaultTexts.entries.Lcz_Cancellation}: </u>\r\n              //     </b>\r\n              //   </span>\r\n              //   <span>\r\n              //     njfsdnfjsfsdfdsfnijsnfijnfjsnfjsdnfjsnfkjsdnfjksdnfkjsdnfjksnfjksfnkjsdnfjksfnjksdnfjksdnfjsdnfjksnfjksdnfkjsdnfjksnfjksddnfjksnfjksddnfjsdnfjksf js\r\n              //     jnjnsjnfjksfnjsdfnjdskfnsddjfnsifnj\r\n              //   </span>\r\n              // </div>\r\n              <div class=\"room_statements\">\r\n                <span>\r\n                  <b>{this.defaultTexts.entries.Lcz_Cancellation}:</b>\r\n                  <span innerHTML={this.item.rateplan.cancelation || ''}></span>\r\n                </span>\r\n              </div>\r\n            )}\r\n            {this.item.rateplan.guarantee && (\r\n              <div class=\"sm-mb-1\">\r\n                <span>\r\n                  <b>{this.defaultTexts.entries.Lcz_Guarantee}: </b>\r\n                  <span innerHTML={this.item.rateplan.guarantee || ''}></span>\r\n                </span>\r\n              </div>\r\n            )}\r\n\r\n            {/* <ir-label label=\"PrePayment:\" value={this.item.My_Room_type.My_Translated_Prepayment_Policy || ''}></ir-label>\r\n            <ir-label label=\"Smoking Preference:\" value={this.item.My_Room_type.My_Translated_Cancelation_Policy || ''}></ir-label> */}\r\n            {this.bookingEvent.is_direct && <ir-label label={`${this.defaultTexts.entries.Lcz_MealPlan}:`} value={this.mealCodeName}></ir-label>}\r\n            {/* <ir-label label={`${this.defaultTexts.entries.Lcz_SpecialRate}:`} value=\"Non-refundable\"></ir-label> */}\r\n          </div>\r\n        </div>\r\n        <ir-modal\r\n          autoClose={false}\r\n          ref={el => (this.irModalRef = el)}\r\n          isLoading={this.isLoading}\r\n          onConfirmModal={this.deleteRoom.bind(this)}\r\n          iconAvailable={true}\r\n          icon=\"ft-alert-triangle danger h1\"\r\n          leftBtnText={this.defaultTexts.entries.Lcz_Cancel}\r\n          rightBtnText={this.defaultTexts.entries.Lcz_Delete}\r\n          leftBtnColor=\"secondary\"\r\n          rightBtnColor=\"danger\"\r\n          modalTitle={this.defaultTexts.entries.Lcz_Confirmation}\r\n          modalBody={`${this.defaultTexts.entries['Lcz_AreYouSureDoYouWantToRemove ']} ${this.item.roomtype.name} ${this.item.unit ? (this.item.unit as IUnit).name : ''} ${\r\n            this.defaultTexts.entries.Lcz_FromThisBooking\r\n          }`}\r\n        ></ir-modal>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",".border-theme {\r\n  border: 1px solid #cacfe7;\r\n}\r\n@keyframes bounce {\r\n  0%,\r\n  100% {\r\n    transform: scale(1);\r\n    animation-timing-function: cubic-bezier(0.8, 0, 1, 1);\r\n  }\r\n  50% {\r\n    transform: scale(1.2);\r\n    animation-timing-function: cubic-bezier(0, 0, 0.2, 1);\r\n  }\r\n}\r\n.bounce-3 {\r\n  animation: bounce 1s 1;\r\n}\r\n","import { Component, Prop, h, Event, EventEmitter, State, Watch, Listen } from '@stencil/core';\r\nimport { selectOption } from '../../common/models';\r\nimport { v4 } from 'uuid';\r\n\r\n@Component({\r\n  tag: 'ir-select',\r\n  styleUrl: 'ir-select.css',\r\n  scoped: true,\r\n})\r\nexport class IrSelect {\r\n  @Prop() name: string;\r\n  @Prop() data: selectOption[];\r\n  @Prop() label = '<label>';\r\n  @Prop() selectStyles: string;\r\n  @Prop() selectContainerStyle: string;\r\n  @Prop({ reflect: true, mutable: true }) selectedValue = null;\r\n  @Prop() required: boolean;\r\n  @Prop() LabelAvailable: boolean = true;\r\n  @Prop() firstOption: string = 'Select';\r\n  @Prop() selectStyle: boolean = true;\r\n  @Prop() showFirstOption: boolean = true;\r\n  @Prop() submited: boolean = false;\r\n  @Prop() size: 'sm' | 'md' | 'lg' = 'md';\r\n  @Prop() textSize: 'sm' | 'md' | 'lg' = 'md';\r\n  @Prop() labelPosition: 'left' | 'right' | 'center' = 'left';\r\n  @Prop() labelBackground: 'primary' | 'secondary' | 'success' | 'danger' | 'warning' | 'info' | 'light' | 'dark' | null = null;\r\n  @Prop() labelColor: 'primary' | 'secondary' | 'success' | 'danger' | 'warning' | 'info' | 'light' | 'dark' = 'dark';\r\n  @Prop() labelBorder: 'theme' | 'primary' | 'secondary' | 'success' | 'danger' | 'warning' | 'info' | 'light' | 'dark' | 'none' = 'theme';\r\n  @Prop() labelWidth: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 = 3;\r\n  @Prop() select_id: string = v4();\r\n\r\n  @State() initial: boolean = true;\r\n  @State() valid: boolean = false;\r\n  @Event({ bubbles: true, composed: true }) selectChange: EventEmitter;\r\n\r\n  private selectEl: HTMLSelectElement;\r\n\r\n  @Watch('selectedValue')\r\n  watchHandler(newValue: string) {\r\n    if (newValue !== null && this.required) {\r\n      this.valid = true;\r\n    }\r\n  }\r\n  @Watch('submited')\r\n  watchHandler2(newValue: boolean) {\r\n    if (newValue && this.required) {\r\n      this.initial = false;\r\n    }\r\n  }\r\n  @Listen('animateIrSelect', { target: 'body' })\r\n  handleButtonAnimation(e: CustomEvent) {\r\n    console.log(e.detail, this.select_id, e.detail === this.select_id);\r\n    if (!this.selectEl || e.detail !== this.select_id) {\r\n      return;\r\n    }\r\n    console.log('first1');\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    this.selectEl.classList.add('border-danger');\r\n  }\r\n  componentwillload() {}\r\n  disconnectedCallback() {}\r\n  handleSelectChange(event) {\r\n    this.selectEl.classList.remove('border-danger');\r\n    if (this.required) {\r\n      this.initial = false;\r\n      this.valid = event.target.checkValidity();\r\n      this.selectedValue = event.target.value;\r\n      this.selectChange.emit(this.selectedValue);\r\n    } else {\r\n      this.selectedValue = event.target.value;\r\n      this.selectChange.emit(this.selectedValue);\r\n    }\r\n  }\r\n  count = 0;\r\n\r\n  render() {\r\n    let className = 'form-control';\r\n    let label = (\r\n      <div class={`input-group-prepend col-${this.labelWidth} p-0 text-${this.labelColor}`}>\r\n        <label\r\n          htmlFor={this.select_id}\r\n          class={`input-group-text ${this.labelPosition === 'right' ? 'justify-content-end' : this.labelPosition === 'center' ? 'justify-content-center' : ''} ${\r\n            this.labelBackground ? 'bg-' + this.labelBackground : ''\r\n          } flex-grow-1 text-${this.labelColor} border-${this.labelBorder === 'none' ? 0 : this.labelBorder} `}\r\n        >\r\n          {this.label}\r\n          {this.required ? '*' : ''}\r\n        </label>\r\n      </div>\r\n    );\r\n    if (this.selectStyle === false) {\r\n      className = '';\r\n    }\r\n    if (this.required && !this.valid && !this.initial) {\r\n      className = `${className} border-danger`;\r\n    }\r\n\r\n    if (!this.LabelAvailable) {\r\n      label = '';\r\n    }\r\n\r\n    return (\r\n      <div class={`form-group m-0 ${this.selectContainerStyle}`}>\r\n        <div class=\"input-group row m-0\">\r\n          {label}\r\n          <select\r\n            ref={el => (this.selectEl = el)}\r\n            id={this.select_id}\r\n            class={`${this.selectStyles} ${className} form-control-${this.size} text-${this.textSize} col-${this.LabelAvailable ? 12 - this.labelWidth : 12}`}\r\n            onInput={this.handleSelectChange.bind(this)}\r\n            required={this.required}\r\n          >\r\n            {this.showFirstOption && <option value={''}>{this.firstOption}</option>}\r\n            {this.data.map(item => {\r\n              if (this.selectedValue === item.value) {\r\n                return (\r\n                  <option selected value={item.value}>\r\n                    {item.text}\r\n                  </option>\r\n                );\r\n              } else {\r\n                return <option value={item.value}>{item.text}</option>;\r\n              }\r\n            })}\r\n          </select>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",".backdrop {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100vh;\r\n  cursor: pointer;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  z-index: 99;\r\n  transition: all 0.5s;\r\n  opacity: 0;\r\n  pointer-events: none;\r\n  transition: all 0.5s;\r\n}\r\n.backdrop.active {\r\n  opacity: 1;\r\n  pointer-events: all;\r\n}\r\n\r\n.sidebar-right {\r\n  position: fixed;\r\n  top: 0;\r\n  right: -120%;\r\n  bottom: 0;\r\n  width: var(--sidebar-width, 40rem);\r\n  max-width: 100%;\r\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\r\n  transition: all 0.5s;\r\n  z-index: 100;\r\n  overflow-y: hidden;\r\n  color: var(--sidebar-color, #000);\r\n  background-color: var(--sidebar-backgound, #fff);\r\n  padding: var(--ir-sidebar-padding, 0.5rem 0);\r\n}\r\n.sidebar-right.active {\r\n  right: 0;\r\n  overflow-y: auto;\r\n}\r\n\r\n.sidebar-left {\r\n  position: fixed;\r\n  top: 0;\r\n  left: -100%;\r\n  bottom: 0;\r\n  width: var(--sidebar-width, 30rem);\r\n  max-width: 100%;\r\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\r\n  transition: all 0.5s;\r\n  z-index: 200;\r\n  overflow-y: hidden;\r\n  color: var(--sidebar-color, #000);\r\n  background: var(--sidebar-backgound, #fff);\r\n  padding: var(--ir-sidebar-padding, 0.5rem 0);\r\n}\r\n.sidebar-title {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0 1rem;\r\n  border-bottom: 1px solid #e4e5ec;\r\n}\r\n.sidebar-title p {\r\n  font-weight: 500;\r\n  font-size: 1.2rem;\r\n}\r\n.sidebar-left.active {\r\n  left: 0;\r\n  overflow-y: scroll;\r\n}\r\n.close {\r\n  position: absolute;\r\n  top: 0.5rem;\r\n  right: 1rem;\r\n  width: 1rem;\r\n  height: 1rem;\r\n  cursor: pointer;\r\n}\r\n","import { Component, Prop, h, Method, Event, EventEmitter, Watch } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-sidebar',\r\n  styleUrl: 'ir-sidebar.css',\r\n  shadow: true,\r\n})\r\nexport class IrSidebar {\r\n  @Prop() name: string;\r\n  @Prop() side: 'right' | 'left' = 'right';\r\n  @Prop() showCloseButton: boolean = true;\r\n  @Prop({ mutable: true, reflect: true }) open: boolean = false;\r\n  @Prop() sidebarStyles: Partial<CSSStyleDeclaration>;\r\n  @Prop() label: string;\r\n  @Event({ bubbles: true, composed: true }) irSidebarToggle: EventEmitter;\r\n\r\n  private sidebarRef: HTMLDivElement;\r\n\r\n  applyStyles() {\r\n    for (const property in this.sidebarStyles) {\r\n      if (this.sidebarStyles.hasOwnProperty(property)) {\r\n        this.sidebarRef.style[property] = this.sidebarStyles[property];\r\n      }\r\n    }\r\n  }\r\n  @Watch('sidebarStyles')\r\n  handleSidebarStylesChange() {\r\n    this.applyStyles();\r\n  }\r\n  componentWillLoad() {\r\n    this.handleKeyDown = this.handleKeyDown.bind(this);\r\n  }\r\n\r\n  componentDidLoad() {\r\n    // If esc key is pressed, close the modal\r\n    this.applyStyles();\r\n    document.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  private handleKeyDown(e: KeyboardEvent) {\r\n    if (e.key === 'Escape') {\r\n      return this.toggleSidebar();\r\n    } else {\r\n      return;\r\n    }\r\n  }\r\n\r\n  // Unsubscribe to the event when the component is removed from the DOM\r\n  disconnectedCallback() {\r\n    document.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  @Method()\r\n  async toggleSidebar() {\r\n    this.irSidebarToggle.emit(this.open);\r\n  }\r\n\r\n  render() {\r\n    let className = '';\r\n    if (this.open) {\r\n      className = 'active';\r\n    } else {\r\n      className = '';\r\n    }\r\n\r\n    return [\r\n      <div\r\n        class={`backdrop ${className}`}\r\n        onClick={() => {\r\n          this.toggleSidebar();\r\n        }}\r\n      ></div>,\r\n      <div ref={el => (this.sidebarRef = el)} class={`sidebar-${this.side} ${className}`}>\r\n        {this.showCloseButton && (\r\n          <div class={'sidebar-title'}>\r\n            <p class={'p-0 m-0'}>{this.label}</p>\r\n            <div class={'p-0 m-0 sidebar-icon-container'}>\r\n              <ir-icon\r\n                class=\"\"\r\n                onIconClickHandler={() => {\r\n                  this.toggleSidebar();\r\n                }}\r\n              >\r\n                <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 384 512\" height={20} width={20}>\r\n                  <path\r\n                    fill=\"#6b6f82\"\r\n                    d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\"\r\n                  />\r\n                </svg>\r\n              </ir-icon>\r\n            </div>\r\n          </div>\r\n        )}\r\n        <slot name=\"sidebar-body\" />\r\n      </div>,\r\n    ];\r\n  }\r\n}\r\n",":host {\r\n  width: var(--ir-spinner-size, 1.25rem);\r\n  height: var(--ir-spinner-size, 1.25rem);\r\n  border: var(--ir-spinner-border-width, 2.5px) solid var(--ir-spinner-color, #3f3f3f);\r\n  border-bottom-color: transparent;\r\n  border-radius: 50%;\r\n  display: inline-block;\r\n  box-sizing: border-box;\r\n  animation: rotation 1s linear infinite;\r\n}\r\n\r\n@keyframes rotation {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n","import { Component, Element, Host, Prop, Watch, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-spinner',\r\n  styleUrl: 'ir-spinner.css',\r\n  shadow: true,\r\n})\r\nexport class IrSpinner {\r\n  @Element() el: HTMLIrSpinnerElement;\r\n\r\n  @Prop() size: number;\r\n  @Prop() borderWidth: number;\r\n  @Prop() unit: 'px' | 'rem' = 'rem';\r\n  @Prop() color: string;\r\n\r\n  componentWillLoad() {\r\n    this.initStyles();\r\n  }\r\n  @Watch('size')\r\n  handleSpinnerSizeChange() {\r\n    this.initStyles();\r\n  }\r\n  @Watch('borderWidth')\r\n  handleSpinnerBorderWidthChange() {\r\n    this.initStyles();\r\n  }\r\n  @Watch('unit')\r\n  handleSpinnerUnitChange() {\r\n    this.initStyles();\r\n  }\r\n  @Watch('color')\r\n  handleSpinnerColorChange() {\r\n    this.initStyles();\r\n  }\r\n  private initStyles() {\r\n    if (this.size) {\r\n      this.applyCssElement(`${this.size}${this.unit}`, '--ir-spinner-size');\r\n    }\r\n    if (this.borderWidth) {\r\n      this.applyCssElement(`${this.borderWidth}${this.unit}`, '--ir-spinner-size');\r\n    }\r\n    if (this.color) {\r\n      this.applyCssElement(`${this.color}`, '--ir-spinner-color');\r\n    }\r\n  }\r\n  private applyCssElement(value: string, key: '--ir-spinner-color' | '--ir-spinner-border-width' | '--ir-spinner-size' | (string & {})) {\r\n    this.el.style.setProperty(key, value);\r\n  }\r\n  render() {\r\n    return <Host></Host>;\r\n  }\r\n}\r\n","import { Component, Event, EventEmitter, Prop, State, Watch, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-textarea',\r\n})\r\nexport class IrTextArea {\r\n  @Prop() rows = 3;\r\n  @Prop() cols = 5;\r\n  @Prop() text = '';\r\n  @Prop() label = '<label>';\r\n  @Prop() placeholder = '<placeholder>';\r\n  @Prop() value = '';\r\n  @Prop() maxLength: number;\r\n  @Prop() textareaClassname: string;\r\n\r\n  @State() error = false;\r\n\r\n  @Event() textChange: EventEmitter<string>;\r\n\r\n  @Watch('aria-invalid')\r\n  handleAriaInvalidChange(newValue) {\r\n    this.error = newValue === 'true';\r\n  }\r\n  connectedCallback() {}\r\n  disconnectedCallback() {}\r\n  render() {\r\n    return (\r\n      <div class={'form-group'}>\r\n        <label>{this.label}</label>\r\n        <textarea\r\n          maxLength={this.maxLength}\r\n          rows={this.rows}\r\n          value={this.value}\r\n          class={`form-control ${this.textareaClassname} ${this.error ? 'border-danger' : ''}`}\r\n          placeholder={this.placeholder}\r\n          onInput={e => this.textChange.emit((e.target as HTMLTextAreaElement).value)}\r\n        ></textarea>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  padding: 0px 0;\r\n  margin-bottom: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n}\r\n:host([display-context='sidebar']) {\r\n  padding: 15px 0;\r\n  justify-content: space-between !important;\r\n  width: 100% !important;\r\n  border-bottom: 1px solid #e4e5ec !important;\r\n  border-color: #e4e5ec !important ;\r\n}\r\n.title-body {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n@media only screen and (max-width: 641px) {\r\n  :host {\r\n    flex-direction: column;\r\n    gap: 8px;\r\n    align-items: flex-start;\r\n  }\r\n  :host([display-context='sidebar']) {\r\n    flex-direction: row;\r\n  }\r\n}\r\n","import { Component, Element, Event, EventEmitter, Host, Prop, Watch, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-title',\r\n  styleUrl: 'ir-title.css',\r\n  scoped: true,\r\n})\r\nexport class IrTitle {\r\n  @Prop() label: string;\r\n  @Prop({ reflect: true }) displayContext: 'default' | 'sidebar' = 'default';\r\n  @Prop({ reflect: true }) justifyContent:\r\n    | 'center'\r\n    | 'start'\r\n    | 'end'\r\n    | 'flex-start'\r\n    | 'flex-end'\r\n    | 'left'\r\n    | 'right'\r\n    | 'normal'\r\n    | 'space-between'\r\n    | 'space-around'\r\n    | 'space-evenly'\r\n    | 'stretch'\r\n    | 'safe center'\r\n    | 'unsafe center' = 'start';\r\n  @Event() closeSideBar: EventEmitter<null>;\r\n  @Element() el: HTMLElement;\r\n\r\n  componentDidLoad() {\r\n    this.el.style.justifyContent = this.justifyContent;\r\n  }\r\n  @Watch('justifyContent')\r\n  handleJustifyContentChange(newValue: string, oldValue: string) {\r\n    if (newValue !== oldValue) {\r\n      this.el.style.justifyContent = newValue;\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <h4 class=\"text-left font-medium-2 py-0 my-0\">{this.label}</h4>\r\n        {this.displayContext === 'sidebar' && (\r\n          <ir-icon\r\n            class={'close'}\r\n            onIconClickHandler={() => {\r\n              this.closeSideBar.emit(null);\r\n            }}\r\n          >\r\n            <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 384 512\" height={20} width={20}>\r\n              <path d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\" />\r\n            </svg>\r\n          </ir-icon>\r\n        )}\r\n        {this.displayContext !== 'sidebar' && (\r\n          <div class={'title-body'}>\r\n            <slot name=\"title-body\"></slot>\r\n          </div>\r\n        )}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","button,\r\np,\r\nh3,\r\ndiv {\r\n  all: unset;\r\n}\r\n:host {\r\n  --rd-viewport-padding: 25px;\r\n  --rd-success: #2b9a66;\r\n  position: fixed;\r\n  bottom: 0;\r\n  right: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: var(--rd-viewport-padding);\r\n  gap: 10px;\r\n  max-width: 100vw;\r\n  margin: 0;\r\n  list-style: none;\r\n  z-index: 2147483647;\r\n  outline: none;\r\n  pointer-events: none;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n}\r\n@media (prefers-color-scheme: dark) {\r\n  :host {\r\n    --rd-success: #33b074;\r\n  }\r\n}\r\np {\r\n  color: hsla(222.2, 84%, 4.9%, 0.8);\r\n  font-size: 13px;\r\n  line-height: 1.3;\r\n}\r\nh1,\r\nh2,\r\nh3,\r\nh4,\r\nh5,\r\nh6 {\r\n  font-weight: 500;\r\n  color: hsl(222.2, 84%, 4.9%);\r\n  font-size: 15px;\r\n}\r\n:host([position='top-left']) {\r\n  top: 0;\r\n  left: 0;\r\n}\r\n:host([position='top-right']) {\r\n  top: 0;\r\n  right: 0;\r\n}\r\n:host([position='bottom-left']) {\r\n  bottom: 0;\r\n  left: 0;\r\n}\r\n:host([position='bottom-right']) {\r\n  bottom: 0;\r\n  right: 0;\r\n}\r\n.icon-container {\r\n  height: 25px;\r\n  width: 25px;\r\n  border-radius: 25px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 0;\r\n  margin: 0;\r\n  /* position: absolute;\r\n  top: 50%;\r\n  right: calc(var(--rd-viewport-padding) / 2); \r\n  transform: translateY(-50%);*/\r\n}\r\n.icon-container > svg {\r\n  margin: 0;\r\n  color: white;\r\n  stroke-width: 5px;\r\n}\r\n.success {\r\n  background-color: var(--rd-success);\r\n}\r\n.error {\r\n  background-color: red;\r\n}\r\n.ToastRoot {\r\n  background-color: hsl(0, 0%, 100%);\r\n  border-radius: 0.5rem;\r\n  box-shadow: hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px;\r\n  padding: 15px;\r\n  display: grid;\r\n  grid-template-areas: 'title action' 'description action';\r\n  grid-template-columns: auto max-content;\r\n  column-gap: 15px;\r\n  align-items: center;\r\n  pointer-events: none;\r\n  opacity: 0;\r\n  border: 1px solid hsl(214.3, 31.8%, 91.4%);\r\n  position: relative;\r\n}\r\n.ToastRoot[data-state='open'] {\r\n  pointer-events: all;\r\n  animation: slideIn 150ms cubic-bezier(0.16, 1, 0.3, 1);\r\n}\r\n.ToastRoot[data-state='closed'] {\r\n  pointer-events: none;\r\n  animation: hide 100ms ease-in;\r\n}\r\n\r\n@-webkit-keyframes slideIn {\r\n  from {\r\n    transform: translateX(var(--rd-offset-width));\r\n  }\r\n  to {\r\n    transform: translateX(0);\r\n  }\r\n}\r\n@keyframes slideIn {\r\n  from {\r\n    transform: translateX(var(--rd-offset-width));\r\n  }\r\n  to {\r\n    transform: translateX(0);\r\n  }\r\n}\r\n.ToastTitle {\r\n  grid-area: title;\r\n  font-weight: 500;\r\n  color: hsl(222.2, 84%, 4.9%);\r\n  font-size: 15px;\r\n}\r\n\r\n.ToastDescription {\r\n  grid-area: description;\r\n  margin: 0;\r\n  margin-top: 5px;\r\n  color: hsla(222.2, 84%, 4.9%, 0.8);\r\n  font-size: 13px;\r\n  line-height: 1.3;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.ToastAction {\r\n  grid-area: action;\r\n}\r\n","import { Component, Host, Element, Listen, Prop, h, State } from '@stencil/core';\r\nimport { TPositions, IToast } from './toast';\r\n\r\n@Component({\r\n  tag: 'ir-toast',\r\n  styleUrl: 'ir-toast.css',\r\n  scoped: true,\r\n})\r\nexport class IrToast {\r\n  @Prop({ reflect: true, mutable: true }) position: TPositions = 'bottom-left';\r\n  @Element() element: HTMLElement;\r\n  @State() toasts: IToast[] = [];\r\n  @Listen('toast', { target: 'body' })\r\n  onToast(event: CustomEvent<IToast>) {\r\n    const toast: IToast = event.detail;\r\n    this.showToast(toast);\r\n  }\r\n  showToast(toast: IToast) {\r\n    const toastrOptions = {\r\n      positionClass: 'toast-top-right',\r\n      closeButton: true,\r\n      timeOut: toast.duration || 5000,\r\n    };\r\n\r\n    switch (toast.type) {\r\n      case 'success':\r\n        toastr.success(toast.title, '', toastrOptions);\r\n        break;\r\n      case 'error':\r\n        toastr.error(toast.title, '', toastrOptions);\r\n        break;\r\n    }\r\n  }\r\n  render() {\r\n    return <Host></Host>;\r\n  }\r\n}\r\n",":host {\r\n  position: relative;\r\n}\r\n.tooltip-icon {\r\n  margin: 0 5px;\r\n  padding: 0;\r\n}\r\n/* p {\r\n  position: absolute;\r\n  top: 10px;\r\n  background-color: antiquewhite;\r\n  border-radius: 7px;\r\n  padding: 10px 15px;\r\n  z-index: 1000000;\r\n} */\r\n.tooltip-inner-custom {\r\n  min-width: max-content !important;\r\n}\r\n","import { Component, Host, Prop, State, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-tooltip',\r\n  styleUrl: 'ir-tooltip.css',\r\n  scoped: true,\r\n})\r\nexport class IrTooltip {\r\n  @Prop({ reflect: true }) message: string;\r\n  @Prop() withHtml: boolean = true;\r\n  @Prop() customSlot: boolean = false;\r\n\r\n  @State() open: boolean;\r\n  tooltipTimeout: any;\r\n  toggleOpen(shouldOpen: boolean) {\r\n    if (this.tooltipTimeout) {\r\n      clearTimeout(this.tooltipTimeout);\r\n    }\r\n\r\n    if (shouldOpen) {\r\n      this.tooltipTimeout = setTimeout(() => {\r\n        this.open = true;\r\n      }, 300);\r\n    } else {\r\n      this.open = false;\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <Host class=\"m-0 p-0\">\r\n        <span class={'m-0 p-0 d-flex align-items-center justify-content-center'} onMouseEnter={() => this.toggleOpen(true)} onMouseLeave={() => this.toggleOpen(false)}>\r\n          {/* <i\r\n            class=\"ml-1 ft-info\"\r\n            data-toggle=\"tooltip\"\r\n            data-placement=\"top\"\r\n            data-original-title=\"Info popup\"\r\n          ></i> */}\r\n\r\n          {!this.customSlot ? (\r\n            // <svg data-toggle=\"tooltip\" data-placement=\"top\" xmlns=\"http://www.w3.org/2000/svg\" height=\"16\" width=\"16\" class=\"tooltip-icon\" viewBox=\"0 0 512 512\">\r\n            //   <path\r\n            //     fill=\"#6b6f82\"\r\n            //     d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z\"\r\n            //   />\r\n            // </svg>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class={'m-0 p-0'} height=\"16\" width=\"16\" viewBox=\"0 0 512 512\">\r\n              <path\r\n                fill=\"#6b6f82\"\r\n                d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z\"\r\n              />\r\n            </svg>\r\n          ) : (\r\n            <slot name=\"tooltip-trigger\"></slot>\r\n          )}\r\n        </span>\r\n        {this.open && (\r\n          <div class=\"tooltip bottom show position-absolute\" role=\"tooltip\">\r\n            <div class=\"tooltip-arrow\"></div>\r\n            <div class={`tooltip-inner fit ${this.customSlot && 'tooltip-inner-custom'}`}>\r\n              <span innerHTML={this.message}></span>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","* {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n:host {\r\n  display: flex;\r\n  margin-bottom: 5px;\r\n  gap: 5px;\r\n  width: 100%;\r\n}\r\nstrong {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\nul {\r\n  margin: 0 3px;\r\n  padding: 0;\r\n  list-style: none;\r\n  overflow: hidden;\r\n  width: 100%;\r\n  word-wrap: break-word !important;\r\n  overflow-wrap: break-word !important;\r\n}\r\nli {\r\n  width: 100%;\r\n  line-height: 1.5;\r\n  margin: 0;\r\n  padding: 0;\r\n  word-wrap: break-word !important;\r\n  overflow-wrap: break-word !important;\r\n}\r\n\r\nbutton {\r\n  background: white;\r\n  color: var(--blue);\r\n  padding: 0;\r\n  margin: 0;\r\n  margin-left: 3px;\r\n  font-size: 12px;\r\n  border: 0;\r\n}\r\nbutton:hover {\r\n  color: #355270;\r\n}\r\n","import { Component, Host, Prop, State, h } from '@stencil/core';\r\nimport { v4 } from 'uuid';\r\nimport { IOtaNotes } from '@/models/booking.dto';\r\nimport locales from '@/stores/locales.store';\r\n@Component({\r\n  tag: 'ota-label',\r\n  styleUrl: 'ota-label.css',\r\n  scoped: true,\r\n})\r\nexport class OtaLabel {\r\n  @Prop() label: string;\r\n  @Prop() remarks: IOtaNotes[];\r\n  @Prop() maxVisibleItems: number = 3;\r\n\r\n  @State() showAll: boolean = false;\r\n\r\n  toggleShowAll = () => {\r\n    this.showAll = !this.showAll;\r\n  };\r\n\r\n  render() {\r\n    if (!this.remarks) {\r\n      return null;\r\n    }\r\n\r\n    const displayedRemarks = this.showAll ? this.remarks : this.remarks.slice(0, this.maxVisibleItems);\r\n\r\n    return (\r\n      <Host>\r\n        <strong>{this.label}</strong>\r\n        <ul>\r\n          {displayedRemarks.map((remark, index) => (\r\n            <li key={v4()}>\r\n              - {remark.statement}{' '}\r\n              {this.remarks.length > this.maxVisibleItems && index === displayedRemarks.length - 1 && (\r\n                <button onClick={this.toggleShowAll}>{this.showAll ? locales.entries.Lcz_ShowLess : locales.entries.Lcz_ShowMore}</button>\r\n              )}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n        {/* Show toggle button if there are more remarks than `maxVisibleItems` */}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}