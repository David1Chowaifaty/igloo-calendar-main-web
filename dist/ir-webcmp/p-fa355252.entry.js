import{r as e,g as t,h as a,H as o,c as i,F as n}from"./p-d239357b.js";import{T as r}from"./p-8925035c.js";import{B as s}from"./p-da5c40ca.js";import"./p-bf44a732.js";import"./p-c5894a47.js";import"./p-6c4ba7c0.js";import"./p-748cfd41.js";import"./p-03c2769e.js";import"./p-99cb260a.js";import"./p-4e493fea.js";const c=":host{display:block}";const l=c;const d=class{constructor(t){e(this,t)}get el(){return t(this)}menuGroups=[];menuItems=[];selectedHref;componentWillLoad(){if(!this.selectedHref){this.selectedHref=this.getCurrentLocation()}else{this.selectedHref=this.normalizeHref(this.selectedHref)}}componentDidLoad(){this.handleSlotChange()}connectedCallback(){if(typeof window!=="undefined"){window.addEventListener("popstate",this.handleLocationChange)}}disconnectedCallback(){if(typeof window!=="undefined"){window.removeEventListener("popstate",this.handleLocationChange)}}async setSelectedHref(e){this.updateSelectedHref(e)}handleSelectedHrefChange(e){this.applySelection(e)}handleSlotChange=()=>{this.menuGroups=Array.from(this.el.querySelectorAll("ir-menu-group"));this.menuItems=Array.from(this.el.querySelectorAll("ir-menu-item"));this.applySelection(this.selectedHref)};handleLocationChange=()=>{this.updateSelectedHref(this.getCurrentLocation())};updateSelectedHref(e){const t=this.normalizeHref(e);if(t!==this.selectedHref){this.selectedHref=t}}getCurrentLocation(){if(typeof window==="undefined")return undefined;return this.normalizeHref(`${window.location.pathname}${window.location.search}${window.location.hash}`)}normalizeHref(e){if(!e)return undefined;if(typeof window==="undefined")return e;try{const t=new URL(e,window.location.origin);const a=t.pathname.replace(/\/+$/,"")||"/";return`${a}${t.search}${t.hash}`}catch{return e}}applySelection(e){const t=this.normalizeHref(e);this.menuItems.forEach((e=>{const a=this.normalizeHref(e.href);const o=!!t&&a===t;if(e.selected!==o){e.selected=o}}))}handleItemClick(e){const t=e.composedPath();const a=t.find((e=>{if(!(e instanceof HTMLElement))return false;return e.tagName?.toLowerCase()==="ir-menu-item"}));if(a?.href){this.updateSelectedHref(a.href)}}handleGroupOpen(e){if(!e.detail)return;const t=e.target;const a=t.groupName;for(const e of this.menuGroups){if(e!==t&&e.groupName===a&&e.open){e.open=false}}}render(){return a(o,{key:"17b7728af96393d155521ec11c7a7af138234dff"},a("slot",{key:"f41fafd6d941c6a96016bc55539500dee96c893e",onSlotchange:this.handleSlotChange}))}static get watchers(){return{selectedHref:["handleSelectedHrefChange"]}}};d.style=l;const u=":host{display:block}.menu__drawer::part(header){border-bottom:0}.menu__drawer::part(body){padding:calc(var(--spacing) - 0.5rem)}";const f=u;const h=class{constructor(t){e(this,t)}open;componentWillLoad(){document.addEventListener("keydown",this.handleDocumentKeyDown)}disconnectedCallback(){document.removeEventListener("keydown",this.handleDocumentKeyDown)}handleDocumentKeyDown=e=>{const t=e.ctrlKey||e.metaKey;if(t&&e.key==="b"){e.preventDefault();this.open=!this.open}};async openDrawer(){this.open=true}render(){return a("ir-drawer",{key:"c9fdeb9abe28698884e8af66be6bfea08b75e557",class:"menu__drawer",open:this.open,onDrawerHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.open=false},style:{"--ir-drawer-width":"25rem"},placement:"start"},a("slot",{key:"f95b50fac03796001c66f35d8ada11a93f683a49",name:"label",slot:"label"}),a("slot",{key:"b6bca1d762efab152864f03c432f5a4ffaef651a"}),a("slot",{key:"d9b64109a2c108b657a48411f609c4b5d7f2e49b",name:"footer",slot:"footer"}))}};h.style=f;const m=":host{display:block}.menu-group__details::part(summary){width:100%}.menu-group__details::part(header){transition:color var(--wa-transition-normal, 150ms ease);transition-property:background, border, box-shadow, color;transition-duration:var(--wa-transition-fast);transition-timing-function:var(--wa-transition-easing)}.menu-group__details::part(header),.menu-group__details::part(content){padding:0;border-radius:0;padding:0 0.5rem}.menu-group__details::part(header):hover{color:var(--wa-color-text-normal);background-color:var(--wa-color-neutral-fill-quiet)}.menu-group__details::part(header):active{color:var(--wa-color-on-quiet, var(--wa-color-neutral-on-quiet));background-color:color-mix(in oklab, var(--wa-color-fill-quiet, var(--wa-color-neutral-fill-quiet)), var(--wa-color-mix-active))}.menu-group__details::part(content){display:flex;flex-direction:column;border-inline-start:1px solid var(--wa-color-surface-border);margin-inline-start:1.5rem}";const p=m;const b=class{constructor(t){e(this,t);this.openChanged=i(this,"openChanged",7)}open;groupName;openChanged;handleHide=e=>{e.stopImmediatePropagation();e.stopPropagation();this.open=false;this.openChanged.emit(false)};handleShow=e=>{e.stopImmediatePropagation();e.stopPropagation();this.open=true;this.openChanged.emit(true)};render(){return a("wa-details",{key:"1f621abe377da1b4f4b74cc5a00ccf524636ec5f",class:"menu-group__details",open:this.open,appearance:"plain",name:this.groupName,"onwa-hide":this.handleHide,"onwa-show":this.handleShow},a("slot",{key:"a7f348a56c1402fe19613e90a61978c8a4ce79e2",slot:"summary",name:"summary"}),a("slot",{key:"30578e34a2d16a326392e88dc37caac8b19e4de0"}))}};b.style=p;const w=":host{display:block;width:100%}.menu-item__link{all:unset;display:flex;align-items:center;box-sizing:border-box;width:100%;color:var(--wa-color-text-quiet);padding:0.5rem;cursor:pointer;transition:color var(--wa-transition-normal, 150ms ease);transition-property:background, border, box-shadow, color;transition-duration:var(--wa-transition-fast);transition-timing-function:var(--wa-transition-easing)}.menu-item__label{flex:1 1 0%}.menu-item__link:hover{color:var(--wa-color-on-quiet, var(--wa-color-neutral-on-quiet));background-color:var(--wa-color-fill-quiet, var(--wa-color-neutral-fill-quiet))}.menu-item__link:active{color:var(--wa-color-on-quiet, var(--wa-color-neutral-on-quiet));background-color:color-mix(in oklab, var(--wa-color-fill-quiet, var(--wa-color-neutral-fill-quiet)), var(--wa-color-mix-active))}.menu-item__link:focus{outline:none}.menu-item__link:focus-visible{outline:var(--wa-focus-ring);outline-offset:var(--wa-focus-ring-offset)}.menu-item__link--selected{color:var(--wa-color-primary-600, var(--wa-color-primary-text, #2563eb));font-weight:600}.menu-item__link--selected:hover{color:var(--wa-color-primary-600, var(--wa-color-primary-text, #2563eb))}.menu-item__link--clickable{padding-left:1rem;padding-right:1rem}";const _=w;const k=class{constructor(t){e(this,t)}href;selected;badge;render(){const e={"menu-item__link":true,"menu-item__link--selected":!!this.selected,"menu-item__link--clickable":!!this.href};const t=a(n,{key:"67b273b6af3609aa7b4af79feb6cdfbdf69fb698"},a("span",{key:"73ff2459665183e86b25df44291147194d30d664",class:"menu-item__icon"},a("slot",{key:"ea97477e352c5625d8f197a52f6fc3252e421801",name:"icon"})),a("span",{key:"8fcc2a5d6a78e5db6c05967ba906cfd68d1f08fd",class:"menu-item__label"},a("slot",{key:"be95273518d80ba27d887b89152f65583147157a"})),this.badge?a("wa-badge",{variant:"danger",class:"menu-item__badge",appearance:"accent"},this.badge):null);return a(o,{key:"984f49e44ae658a960cda025fcf195bef92a31bd"},this.href?a("a",{class:e,href:this.href,"aria-current":this.selected?"page":undefined},t):a("div",{class:e},t))}};k.style=_;const g=":host{display:block}";const y=g;const v=class{constructor(t){e(this,t);this.comboboxSelect=i(this,"combobox-select",7)}propertyid;ticket;shortcutHint=null;bookings=[];isLoading;pickerInputRef;tokenService=new r;bookingListingService=new s;comboboxSelect;componentWillLoad(){document.addEventListener("keydown",this.focusInput);this.detectShortcutHint();if(this.ticket){console.log(this.ticket);this.tokenService.setToken(this.ticket)}}disconnectedCallback(){document.removeEventListener("keydown",this.focusInput)}handleTicketChange(e,t){console.log(this.ticket);if(e!==t&&e){this.tokenService.setToken(this.ticket)}}detectShortcutHint(){const e="ontouchstart"in window||navigator.maxTouchPoints>0;if(e){this.shortcutHint=null;return}const t=/Mac|iPhone|iPad|iPod/.test(navigator.platform);this.shortcutHint=t?"âŒ˜ K":"Ctrl K"}focusInput=e=>{const t=e.key.toLowerCase()==="k";const a=e.metaKey||e.ctrlKey;if(t&&a){e.preventDefault();this.pickerInputRef?.focusInput()}};async fetchBookings(e){e.stopImmediatePropagation();e.stopPropagation();const t=e.detail;const a=!isNaN(Number(t));this.isLoading=true;this.bookings=await this.bookingListingService.getExposedBookings({book_nbr:a?t:null,name:a?null:t,property_id:this.propertyid,filter_type:1,from:"2026-01-01",to:"2026-01-08",balance_filter:"0",start_row:0,end_row:20,total_count:0,booking_status:"",affiliate_id:0,is_mpo_managed:false,is_mpo_used:false,is_for_mobile:false,is_combined_view:false,is_to_export:false,property_ids:null,channel:""},{skipStore:true});this.isLoading=false}render(){return a(o,{key:"8f1d790cb94a11387d37449e9e6f37c1114df341"},a("ir-picker",{key:"4b0540c99ee1be71dc76fef4f8b32fb4eef101c2",loading:this.isLoading,"onText-change":e=>this.fetchBookings(e),mode:"select-async",ref:e=>this.pickerInputRef=e,pill:true,appearance:"filled","onCombobox-select":e=>this.handleComboboxSelect(e)},this.shortcutHint&&a("span",{key:"039bde98ae7bacaac12fd6e98eb20c96ba7a6686",slot:"end"},this.shortcutHint),this.bookings.map((e=>{const t=`${e.booking_nbr} ${e.guest.first_name} ${e.guest.last_name}`;return a("ir-picker-item",{value:e.booking_nbr,label:t},t)}))))}handleComboboxSelect(e){e.stopImmediatePropagation();e.stopPropagation();this.comboboxSelect.emit(e.detail)}static get watchers(){return{ticket:["handleTicketChange"]}}};v.style=y;export{d as ir_menu,h as ir_menu_drawer,b as ir_menu_group,k as ir_menu_item,v as ir_pms_search};
//# sourceMappingURL=p-fa355252.entry.js.map