import{r as t,h as s,H as i}from"./p-61950c14.js";import{T as e}from"./p-59b1956e.js";import{H as a,u as r}from"./p-f70a2972.js";import{R as n}from"./p-d1997bc9.js";import"./p-bf44a732.js";import"./p-0db2e55e.js";import"./p-7b1e39e2.js";import"./p-e19fbf2a.js";const h=".sc-ir-housekeeping-h{display:block}";const o=h;const c=class{constructor(s){t(this,s);this.language="";this.ticket="";this.isLoading=false;this.roomService=new n;this.houseKeepingService=new a;this.token=new e}componentWillLoad(){if(this.ticket!==""){this.token.setToken(this.ticket);this.initializeApp()}}async handleResetData(t){t.stopImmediatePropagation();t.stopPropagation();await this.houseKeepingService.getExposedHKSetup(this.propertyid)}ticketChanged(t,s){if(t===s){return}this.token.setToken(this.ticket);this.initializeApp()}async initializeApp(){try{this.isLoading=true;let t=this.propertyid;if(!t){const s=await this.roomService.getExposedProperty({id:0,aname:this.p,language:this.language,is_backend:true});t=s.My_Result.id}r("default_properties",{token:this.ticket,property_id:t,language:this.language});const s=[this.houseKeepingService.getExposedHKSetup(t),this.roomService.fetchLanguage(this.language,["_HK_FRONT"])];if(this.propertyid){s.unshift(this.roomService.getExposedProperty({id:t,language:this.language,is_backend:true}))}await Promise.all(s)}catch(t){console.error(t)}finally{this.isLoading=false}}render(){if(this.isLoading){return s("ir-loading-screen",null)}return s(i,null,s("ir-interceptor",null),s("ir-toast",null),s("section",{class:"p-1"},s("ir-unit-status",{class:"mb-1"}),s("ir-hk-team",{class:"mb-1"})))}static get watchers(){return{ticket:["ticketChanged"]}}};c.style=o;export{c as ir_housekeeping};
//# sourceMappingURL=p-b5cf0b46.entry.js.map