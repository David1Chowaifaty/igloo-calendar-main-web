import{r as e,c as t,h as i,H as s,g as a}from"./p-61950c14.js";import{B as n}from"./p-e275b4bd.js";import{l as r}from"./p-e19fbf2a.js";import"./p-bf44a732.js";import"./p-21e4b336.js";import"./p-6c4ba7c0.js";import"./p-512d9beb.js";import"./p-0db2e55e.js";import"./p-7f64bb6e.js";const o=".sc-ir-phone-input-h{display:block}.input-container.sc-ir-phone-input{display:flex;align-items:center;padding:0 !important}.input-container.sc-ir-phone-input:focus-within{border-color:#1e9ff2}.border-theme.sc-ir-phone-input{border-color:#cacfe7}.input-container.sc-ir-phone-input input.sc-ir-phone-input{flex:1;border:0}.input-container.sc-ir-phone-input input.sc-ir-phone-input:focus{outline:none}.dropdown-trigger.sc-ir-phone-input{display:flex;align-items:center;gap:8px;background:white;border:0;border-right:1px solid #cacfe7}.ir-dropdown-container.sc-ir-phone-input{position:absolute;z-index:1000;bottom:-30px;width:100%;left:0;background:white}.input-container.sc-ir-phone-input label.sc-ir-phone-input{display:flex;align-items:center;justify-content:center;margin:0;padding:0 5px}.flag.sc-ir-phone-input{height:1rem;aspect-ratio:4/3;border-radius:3px}.is-invalid.sc-ir-phone-input{border-color:#ff4961}.phone_prefix_label.sc-ir-phone-input{padding:0 0.5rem;margin:0}";const h=o;const c=class{constructor(i){e(this,i);this.textChange=t(this,"textChange",7);this.value="";this.disabled=false;this.error=false;this.default_country=null;this.phone_prefix=null;this.countries=[];this.inputValue="";this.isDropdownVisible=false;this.bookingService=new n}async componentWillLoad(){if(this.countries.length===0){const e=await this.bookingService.getCountries(this.language);this.countries=e}if(this.phone_prefix){this.setCountryFromPhonePrefix()}else{if(this.default_country){this.setCurrentCountry(this.default_country)}}this.inputValue=this.value}handleValueChange(e,t){if(e!==t){this.inputValue=e}}handlePhoneChange(e,t){if(e!==t){this.setCountryFromPhonePrefix()}}handleDocumentClick(e){const t=e.target;if(!this.el.contains(t)){this.isDropdownVisible=false}}handleInputChange(e){var t;let i=e.target;let s=i.value;s=s.replace(/[^+\d]+/g,"");i.value=s;this.inputValue=s;this.textChange.emit({phone_prefix:(t=this.currentCountry)===null||t===void 0?void 0:t.phone_prefix,mobile:this.inputValue})}setCountryFromPhonePrefix(){var e;console.log(this.phone_prefix);let t=this.countries.find((e=>e.phone_prefix===this.phone_prefix));if(!t){t=this.countries.find((e=>e.id.toString()===this.phone_prefix));if(!t){return}}console.log(t);this.currentCountry=Object.assign({},t);this.textChange.emit({phone_prefix:(e=this.currentCountry)===null||e===void 0?void 0:e.phone_prefix,mobile:this.value})}setCurrentCountry(e){var t;const i=this.countries.find((t=>t.id===e));if(!i){throw new Error("Invalid country id")}this.currentCountry=Object.assign({},i);this.textChange.emit({phone_prefix:(t=this.currentCountry)===null||t===void 0?void 0:t.phone_prefix,mobile:this.value})}render(){var e,t;return i(s,{key:"a69d8c87eccbb8893640f1d5529eadfa208eaef1"},i("div",{key:"24958b5552b236e6229e15391667badb1fe98f1b",class:"form-group mr-0"},i("div",{key:"51283bfc0d180ebb3ca8b57d562298cffe8ae9fe",class:"input-group row m-0 p-0 position-relative"},this.label&&i("div",{key:"d72dabd0a1901e5dd663b6c4667bceb0a55d557f",class:`input-group-prepend col-3 p-0 text-dark border-none`},i("label",{key:"6c298bed40928ff175b27465f88a18f1c6698b98",class:`input-group-text  border-theme flex-grow-1 text-dark  `},this.label)),i("div",{key:"c47c9e631563486873d228c34f681e482124b5fc",class:"form-control  input-container  flex-fill"+(this.error?" is-invalid":"")},i("button",{key:"70bb4d7603418d7ea6c46b9a06d654bdf6b99a70",onClick:()=>this.isDropdownVisible=!this.isDropdownVisible,class:"dropdown-trigger"},this.currentCountry?i("img",{src:(e=this.currentCountry)===null||e===void 0?void 0:e.flag,class:"flag"}):i("p",{class:"p-0 m-0 "},r.entries.Lcz_Select),i("svg",{key:"b214b2bfecdd37ae1d7b1e996d40d903388d32db",xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},i("path",{key:"82dc2c0cad87f7a2fa75e43e3350d791188307c0",d:"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"}))),i("p",{key:"e41e3dc0a0ad8a11c6a7f435862aaf305425b6bd",class:"phone_prefix_label"},(t=this.currentCountry)===null||t===void 0?void 0:t.phone_prefix),i("input",{key:"af9b6da13d0b8b82619e7f926604f2741ac5c170",type:"text",placeholder:this.placeholder,required:true,value:this.inputValue,disabled:this.disabled,onInput:e=>this.handleInputChange(e)}))," ",this.isDropdownVisible&&i("div",{key:"511263b60478e37af857f0b320ee05b660c90af5",class:"ir-dropdown-container"},i("ir-combobox",{key:"781c8ad7b9d0a1aa21453b6be49cb4054f249aba",onComboboxValueChange:e=>{this.setCurrentCountry(+e.detail.data);this.isDropdownVisible=false},class:"bg-white",autoFocus:true,placeholder:"Search country",data:this.countries.map((e=>({id:e.id.toString(),name:`${e.name} (${e.phone_prefix})`,image:e.flag})))})))))}get el(){return a(this)}static get watchers(){return{value:["handleValueChange"],phone_prefix:["handlePhoneChange"]}}};c.style=h;const l=".prepend-textarea.sc-ir-textarea{padding:0 !important}.ta-prepend-text.sc-ir-textarea{width:100%}";const p=l;const d=class{constructor(i){e(this,i);this.textChange=t(this,"textChange",7);this.rows=3;this.cols=5;this.text="";this.label="<label>";this.placeholder="<placeholder>";this.value="";this.maxLength=250;this.variant="default";this.labelWidth=3;this.error=false}handleAriaInvalidChange(e){this.error=e==="true"}connectedCallback(){}disconnectedCallback(){}render(){if(this.variant==="prepend"){return i("fieldset",{class:"input-group"},i("div",{class:`input-group-prepend col-${this.labelWidth} prepend-textarea`},i("span",{class:"input-group-text ta-prepend-text"},this.label)),i("textarea",{value:this.value,class:`form-control`,style:Object.assign({height:"7rem"},this.styles),maxLength:this.maxLength,onChange:e=>this.textChange.emit(e.target.value),"aria-label":this.label}))}return i("div",{class:"form-group"},i("label",null,this.label),i("textarea",{style:this.styles,maxLength:this.maxLength,rows:this.rows,value:this.value,class:`form-control ${this.textareaClassname} ${this.error?"border-danger":""}`,placeholder:this.placeholder,onInput:e=>this.textChange.emit(e.target.value)}))}static get watchers(){return{"aria-invalid":["handleAriaInvalidChange"]}}};d.style=p;export{c as ir_phone_input,d as ir_textarea};
//# sourceMappingURL=p-cd3cbe46.entry.js.map