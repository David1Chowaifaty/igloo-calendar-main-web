{"version":3,"names":["iglApplicationInfoCss","IglApplicationInfoStyle0","IglApplicationInfo","constructor","hostRef","this","bedPreferenceType","bookingType","totalNights","isButtonPressed","variationService","VariationService","componentWillLoad","isSingleUnit","rateplanSelection","roomtype","id","filteredRooms","filterRooms","length","updateGuest","unit","_b","_a","toString","params","roomTypeId","ratePlanId","ratePlan","prevGuest","guest","roomIndex","Object","assign","booking_store","ratePlanSelections","handleButtonClicked","event","detail","key","getTooltipMessages","selected_variation","selectedVariation","guestInfo","infant_nbr","getVariationBasedOnInfants","variations","baseVariation","infants","matchingVariation","_c","find","variation","adult_nbr","child_nbr","cancellationPolicy","_e","_d","applicable_policies","p","type","combined_statement","guaranteePolicy","_g","_f","tooltip","undefined","getAmount","is_amount_modified","view_mode","rp_amount","discounted_gross_amount","result","calendar_data","is_frontdesk_enabled","assignable_units","forEach","Is_Fully_Available","push","name","pr_id","filteredGuestsRoom","filter","_","i","map","r","filteredResults","includes","baseData","roomtypeId","f","sort","a","b","localeCompare","render","filteredRoomList","formattedVariation","formatVariationBasedOnInfants","h","Host","class","short_name","is_non_refundable","message","innerHTML","formatAmount","currency","symbol","locales","entries","Lcz_Stay","v4","first_name","placeholder","onInput","target","value","event_type","modifyBookingStore","required","last_name","onChange","selected","_h","Lcz_Assignunits","room","is_bed_configuration_enabled","_j","bed_preference","_k","Lcz_BedConfiguration","data","CODE_NAME","CODE_VALUE_EN","_l","style","gap","marginTop","_m","width","Number","_o","Array","from","item","iglBlockDatesViewCss","IglBlockDatesViewStyle0","IglBlockDatesView","isEventHover","renderAgain","blockDatesData","RELEASE_AFTER_HOURS","OPTIONAL_REASON","OUT_OF_SERVICE","releaseList","bookingService","BookingService","getBlockedInfo","defaultData","parseInt","emitData","error","handleOptionalReason","handleReleaseAfterChange","evt","entryDate","renderPage","dataUpdateEvent","emit","getReleaseHoursString","dt","Date","entryHour","entryMinute","setHours","getHours","getMinutes","toLocaleString","month","getDate","formatNumber","handleOutOfService","checked","console","log","fromDate","toDate","from_date","dateOption","showDateDifference","to_date","Lcz_Reason","Lcz_OutOfservice","Lcz_Or","Lcz_OptionalReason","Lcz_AutomaticReleaseIn","releaseItem","Lcz_On","iglBookPropertyHeaderCss","IglBookPropertyHeaderStyle0","IglBookPropertyHeader","splitBookingId","bookingData","sourceOptions","showSplitBookingOption","sourceOption","code","description","tag","getSplitBookingList","Lcz_Tobooking","keys","bookedByInfoData","bookingNumber","firstName","lastName","moment","bookingDataDefaultDateRange","format","propertyId","Lcz_BookingNumber","onComboboxValue","e","stopImmediatePropagation","spiltBookingSelected","isSplitBooking","getSourceNode","Lcz_Source","sourceDropDownChange","option","label","handleAdultChildChange","obj","adultChildCount","adultChild","getAdultChildConstraints","testId","selectedValue","adult","onSelectChange","select_id","firstOption","Lcz_AdultsCaption","LabelAvailable","adultChildConstraints","adult_max_nbr","text","child_max_nbr","child","renderChildCaption","btn_id","isLoading","isRequestPending","icon","size","Lcz_Check","onClickHandler","maxAge","child_max_age","years","Lcz_Years","Lcz_Year","Lcz_ChildCaption","isEventType","toast","title","Lcz_ChooseBookingNumber","position","initialToDate","defaultDaterange","initialFromDate","selectedFromDate","dateRangeData","selectedToDate","isBefore","isAfter","Lcz_CheckInDateShouldBeMAx","replace","Lcz_PlzSelectNumberOfGuests","animateIrSelect","buttonClicked","minDate","getTime","showSourceNode","variant","dateLabel","Lcz_Dates","add","startOf","disabled","tax_statement","iglDateRangeCss","IglDateRangeStyle0","IglDateRange","withDateDifference","fromDateStr","toDateStr","initializeDates","handleDataChange","newValue","oldValue","JSON","stringify","setDate","getFormattedDateString","calculateTotalNights","calculateDaysBetweenDates","toLowerCase","getFullYear","handleDateSelectEvent","dateSelectEvent","handleDateChange","start","end","dateDifference","maxDate","autoApply","onDateChanged","xmlns","height","viewBox","fill","d","Lcz_Nights","Lcz_Night","iglPropertyBookedByCss","IglPropertyBookedByStyle0","IglPropertyBookedBy","showPaymentDetails","countries","arrivalTimeList","expiryMonths","expiryYears","currentMonth","bookedByData","email","countryId","isdCode","contactNumber","selectedArrivalTime","emailGuest","cardNumber","cardHolderName","expiryMonth","expiryYear","assignCountryCode","initializeExpiryYears","initializeDateData","populateBookedByData","currentYear","index","country","getUserDefaultCountry","getMonth","arrivalTime","handleCountryChange","handleNumberInput","inputElement","inputValue","numericRegex","test","checkUser","z","string","safeParse","success","res","getUserInfo","mobile_without_prefix","country_id","country_phone_prefix","prevBookedByData","props","checkout_guest","handleComboboxChange","stopPropagation","clearEvent","Lcz_BookedBy","bind","Lcz_FindEmailAddress","onInputCleared","danger_border","validateEmail","Lcz_FirstName","Lcz_LastName","Lcz_Country","onCountryChange","c","Lcz_MobilePhone","language","phone_prefix","default_country","onTextChange","mobile","Lcz_YourArrivalTime","time","Lcz_AnyMessageForUs","rows","Fragment","Lcz_CardNumber","pattern","Lcz_CardHolderName","Lcz_ExpiryDate","year","htmlFor","Lcz_EmailTheGuest","iglRatePlanCss","IglRatePlanStyle0","IglRatePlan","ratePricingMode","isBookDisabled","disableForm","shouldBeDisabled","visibleInventory","is_available_to_book","updateRateplanSelection","currentSelections","handleVariationChange","reserveRooms","rooms","bookProperty","resetReserved","reserveRoom","roomtype_id","renderRate","amount","discounted_amount","amount_per_night_gross","formatVariation","adults","children","v","updateRoomParams","isAvailableToBook","formattedVariations","split","uuidv4","Lcz_Rate","reserved","onClick","Lcz_Current","Lcz_Select","Lcz_Book","iglRoomTypeCss","IglRoomTypeStyle0","IglRoomType","roomInfoId","selectedRooms","roomsDistributions","validBookingTypes","isValidBookingType","roomType","rateplans","getVisibleInventory","irAutocompleteCss","IrAutocompleteStyle0","IrAutocomplete","duration","inputId","selectedIndex","isComboBoxVisible","inputFocused","no_result_found","Lcz_NoResultsFound","handleKeyDown","dataSize","itemHeight","getHeightOfPElement","preventDefault","adjustScrollPosition","selectItem","inputRef","blur","combobox","el","querySelector","pItem","offsetHeight","visibleHeight","margin","itemTotalHeight","selectedPosition","newScrollTop","Math","max","min","scrollHeight","scrollTo","top","behavior","isItemSelected","comboboxValue","resetCombobox","debounceFetchData","clearTimeout","debounceTimer","setTimeout","fetchData","fetchExposedGuest","fetchExposedBookings","handleInputChange","handleDocumentClick","contains","handleBlur","isDropdownItem","document","activeElement","inputCleared","element","closest","disconnectedCallback","removeEventListener","handleFocus","handleItemKeyDown","renderDropdown","role","onKeyDown","tabIndex","booking_nbr","clearInput","withblur","onBlur","autoComplete","onFocus","ref","irCountryPickerCss","IrCountryPickerStyle0","IrCountryPicker","autoValidate","filteredCountries","searching","selectedCountry","newCountry","oldCountry","filterCountries","selectCountry","debounceTimeout","countryChange","scrollToSelected","dropdownItem","scrollIntoView","block","shouldShowPropertyCountry","propertyCountry","onInputFocus","onInputBlur","trim","src","flag","alt","aspectRatio","borderRadius","irDateRangeCss","IrDateRangeStyle0","IrDateRange","firstDay","monthNames","daysOfWeek","separator","applyLabel","cancelLabel","fromLabel","toLabel","customRangeLabel","weekLabel","singleDatePicker","maxSpan","days","handleMinDateChange","$","dateRangeInput","remove","initializeDateRangePicker","datePropChanged","updateDateRangePickerDates","openDatePicker","openDatePickerTimeout","click","picker","newDate","date","setStartDate","setEndDate","newStartDate","newEndDate","clone","getElementById","createElement","textContent","head","appendChild","componentDidLoad","daterangepicker","opens","startDate","endDate","locale","dateChanged","irDateViewCss","IrDateViewStyle0","IrDateView","handleFromDateChange","newVal","oldVal","handleToDateChange","convertDate","dates","date_difference","isMoment","irPhoneInputCss","IrPhoneInputStyle0","IrPhoneInput","isDropdownVisible","getCountries","setCountryFromPhonePrefix","setCurrentCountry","handleValueChange","handlePhoneChange","textChange","currentCountry","Error","maxLength","onComboboxValueChange","autoFocus","image","irSpinnerCss","IrSpinnerStyle0","IrSpinner","initStyles","handleSpinnerSizeChange","handleSpinnerBorderWidthChange","handleSpinnerUnitChange","handleSpinnerColorChange","applyCssElement","borderWidth","color","setProperty","irTooltipCss","IrTooltipStyle0","IrTooltip","withHtml","customSlot","toggleOpen","shouldOpen","tooltipTimeout","open","containerStyle","onMouseEnter","onMouseLeave"],"sources":["src/components/igloo-calendar/igl-book-property/igl-booking-form/igl-application-info/igl-application-info.css?tag=igl-application-info&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-booking-form/igl-application-info/igl-application-info.tsx","src/components/igloo-calendar/igl-block-dates-view/igl-block-dates-view.css?tag=igl-block-dates-view&encapsulation=scoped","src/components/igloo-calendar/igl-block-dates-view/igl-block-dates-view.tsx","src/components/igloo-calendar/igl-book-property/igl-book-property-header/igl-book-property-header.css?tag=igl-book-property-header&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-book-property-header/igl-book-property-header.tsx","src/components/igloo-calendar/igl-date-range/igl-date-range.css?tag=igl-date-range&encapsulation=scoped","src/components/igloo-calendar/igl-date-range/igl-date-range.tsx","src/components/igloo-calendar/igl-book-property/igl-booking-form/igl-property-booked-by/igl-property-booked-by.css?tag=igl-property-booked-by&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-booking-form/igl-property-booked-by/igl-property-booked-by.tsx","src/components/igloo-calendar/igl-book-property/igl-booking-overview-page/igl-room-type/igl-rate-plan/igl-rate-plan.css?tag=igl-rate-plan&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-booking-overview-page/igl-room-type/igl-rate-plan/igl-rate-plan.tsx","src/components/igloo-calendar/igl-book-property/igl-booking-overview-page/igl-room-type/igl-room-type.css?tag=igl-room-type&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-booking-overview-page/igl-room-type/igl-room-type.tsx","src/components/ui/ir-autocomplete/ir-autocomplete.css?tag=ir-autocomplete&encapsulation=scoped","src/components/ui/ir-autocomplete/ir-autocomplete.tsx","src/components/ui/ir-country-picker/ir-country-picker.css?tag=ir-country-picker&encapsulation=scoped","src/components/ui/ir-country-picker/ir-country-picker.tsx","src/components/ui/ir-date-range/ir-date-range.css?tag=ir-date-range&encapsulation=scoped","src/components/ui/ir-date-range/ir-date-range.tsx","src/components/ir-date-view/ir-date-view.css?tag=ir-date-view&encapsulation=scoped","src/components/ir-date-view/ir-date-view.tsx","src/components/ui/ir-phone-input/ir-phone-input.css?tag=ir-phone-input&encapsulation=scoped","src/components/ui/ir-phone-input/ir-phone-input.tsx","src/components/ui/ir-spinner/ir-spinner.css?tag=ir-spinner&encapsulation=shadow","src/components/ui/ir-spinner/ir-spinner.tsx","src/components/ui/ir-tooltip/ir-tooltip.css?tag=ir-tooltip&encapsulation=scoped","src/components/ui/ir-tooltip/ir-tooltip.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n.rate_amount {\n  display: none;\n  padding: 0;\n  margin: 0;\n}\n\n.booking-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 0.5rem;\n  gap: 0.5rem;\n}\n.non-ref-span {\n  font-size: 12px;\n  color: var(--green);\n}\n.booking-roomtype-title {\n  font-size: 1.25rem;\n  margin-right: 0.5rem;\n  margin: 0;\n  padding: 0;\n}\n\n.booking-details-container {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0;\n  margin: 0;\n}\n\n.booking-rateplan {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin: 0;\n  padding: 0;\n}\n\n.booking-rateplan-name {\n  font-weight: bold;\n  margin: 0;\n  padding: 0;\n}\n\n.booking-tooltip {\n  margin-right: 0.5rem;\n  margin: 0;\n  padding: 0;\n}\n\n.booking-variation {\n  margin: 0;\n  padding: 0;\n}\n\n.booking-price {\n  margin: 0;\n  padding: 0;\n}\n\n.booking-footer {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0;\n  margin-bottom: 0.5rem;\n}\n\n.booking-details-container {\n  display: none;\n}\n\n/*md*/\n@media (min-width: 768px) {\n  .booking-header {\n    justify-content: flex-start;\n  }\n  .booking-footer,\n  .booking-price {\n    display: none;\n  }\n  .booking-details-container,\n  .rate_amount {\n    display: inline-flex;\n    gap: 0.5rem;\n  }\n}\n\n@media only screen and (min-width: 908px) {\n  .aplicationInfoContainer {\n    max-width: 100%;\n  }\n  .guest-info-container,\n  .bed-preference-container,\n  .unit-select-container {\n    max-width: 250px;\n  }\n  /* .preference-select-container {\n    max-width: 250px;\n  } */\n}\n","import { Component, Host, h, Prop, State, Listen } from '@stencil/core';\nimport { TPropertyButtonsTypes } from '@/components';\nimport { ICurrency } from '@/models/calendarData';\nimport booking_store, { IRatePlanSelection, modifyBookingStore, RatePlanGuest } from '@/stores/booking.store';\nimport locales from '@/stores/locales.store';\nimport { v4 } from 'uuid';\nimport calendar_data, { isSingleUnit } from '@/stores/calendar-data';\nimport { formatAmount } from '@/utils/utils';\nimport VariationService from '@/services/variation.service';\n\n@Component({\n  tag: 'igl-application-info',\n  styleUrl: 'igl-application-info.css',\n  scoped: true,\n})\nexport class IglApplicationInfo {\n  @Prop() rateplanSelection: IRatePlanSelection;\n  @Prop() guestInfo: RatePlanGuest | null;\n  @Prop() currency: ICurrency;\n  @Prop() bedPreferenceType = [];\n  @Prop() bookingType: string = 'PLUS_BOOKING';\n  @Prop() roomIndex: number;\n  @Prop() totalNights: number = 1;\n  @Prop() baseData: { unit: { id: string; name: string }; roomtypeId: number };\n\n  @State() isButtonPressed = false;\n\n  private variationService = new VariationService();\n\n  componentWillLoad() {\n    if (isSingleUnit(this.rateplanSelection.roomtype.id)) {\n      const filteredRooms = this.filterRooms();\n      if (filteredRooms.length > 0) this.updateGuest({ unit: filteredRooms[0]?.id?.toString() });\n    }\n  }\n\n  private updateGuest(params: Partial<RatePlanGuest>) {\n    const roomTypeId = this.rateplanSelection.roomtype.id;\n    const ratePlanId = this.rateplanSelection.ratePlan.id;\n    let prevGuest = [...this.rateplanSelection.guest];\n    prevGuest[this.roomIndex] = {\n      ...prevGuest[this.roomIndex],\n      ...params,\n    };\n    booking_store.ratePlanSelections = {\n      ...booking_store.ratePlanSelections,\n      [roomTypeId]: {\n        ...booking_store.ratePlanSelections[roomTypeId],\n        [ratePlanId]: { ...this.rateplanSelection, guest: [...prevGuest] },\n      },\n    };\n  }\n\n  @Listen('buttonClicked', { target: 'body' })\n  handleButtonClicked(\n    event: CustomEvent<{\n      key: TPropertyButtonsTypes;\n      data?: CustomEvent;\n    }>,\n  ) {\n    switch (event.detail.key) {\n      case 'book':\n      case 'bookAndCheckIn':\n      case 'save':\n        this.isButtonPressed = true;\n        break;\n    }\n  }\n\n  private getTooltipMessages(): string | undefined {\n    const { ratePlan, selected_variation } = this.rateplanSelection;\n    let selectedVariation = selected_variation;\n    if (this.guestInfo?.infant_nbr) {\n      selectedVariation = this.variationService.getVariationBasedOnInfants({\n        variations: ratePlan.variations,\n        baseVariation: selected_variation,\n        infants: this.guestInfo?.infant_nbr,\n      });\n    }\n\n    if (!selectedVariation) return;\n\n    const matchingVariation = ratePlan.variations?.find(variation => variation.adult_nbr === selectedVariation.adult_nbr && variation.child_nbr === selectedVariation.child_nbr);\n\n    if (!matchingVariation) return;\n\n    const cancellationPolicy = matchingVariation.applicable_policies?.find(p => p.type === 'cancelation')?.combined_statement;\n    const guaranteePolicy = matchingVariation.applicable_policies?.find(p => p.type === 'guarantee')?.combined_statement;\n\n    let tooltip = '';\n    if (cancellationPolicy) {\n      tooltip += `<b><u>Cancellation:</u></b> ${cancellationPolicy}<br/>`;\n    }\n    if (guaranteePolicy) {\n      tooltip += `<b><u>Guarantee:</u></b> ${guaranteePolicy}`;\n    }\n    return tooltip || undefined;\n  }\n\n  private getAmount(): number {\n    if (this.rateplanSelection.is_amount_modified) {\n      return this.rateplanSelection.view_mode === '001' ? this.rateplanSelection.rp_amount : this.rateplanSelection.rp_amount * this.totalNights;\n    }\n    let variation = this.rateplanSelection.selected_variation;\n    if (this.guestInfo?.infant_nbr) {\n      variation = this.variationService.getVariationBasedOnInfants({\n        variations: this.rateplanSelection.ratePlan.variations,\n        baseVariation: this.rateplanSelection.selected_variation,\n        infants: this.guestInfo?.infant_nbr,\n      });\n    }\n    return variation.discounted_gross_amount;\n  }\n\n  private filterRooms(): { name: string; id: number }[] {\n    const result = [];\n    if (!calendar_data.is_frontdesk_enabled) {\n      return result;\n    }\n    this.rateplanSelection.ratePlan?.assignable_units?.forEach(unit => {\n      if (unit.Is_Fully_Available) {\n        result.push({ name: unit.name, id: unit.pr_id });\n      }\n    });\n    const filteredGuestsRoom = this.rateplanSelection.guest.filter((_, i) => i !== this.roomIndex).map(r => r.unit);\n    const filteredResults = result.filter(r => !filteredGuestsRoom.includes(r.id.toString()));\n    return this.bookingType === 'EDIT_BOOKING'\n      ? [...filteredResults, this.rateplanSelection.roomtype.id === this.baseData?.roomtypeId ? this.baseData?.unit : null]\n          .filter(f => !!f)\n          .sort((a, b) => a.name.localeCompare(b.name))\n      : filteredResults;\n  }\n\n  render() {\n    const filteredRoomList = this.filterRooms();\n    const formattedVariation = this.variationService.formatVariationBasedOnInfants({\n      baseVariation: this.rateplanSelection.selected_variation,\n      infants: this.guestInfo.infant_nbr,\n      variations: this.rateplanSelection.ratePlan.variations,\n    });\n    return (\n      <Host class={'my-2'} data-testid={`room_info_${this.rateplanSelection.ratePlan.id}`}>\n        <div class=\"booking-header\">\n          {(this.bookingType === 'PLUS_BOOKING' || this.bookingType === 'ADD_ROOM' || this.bookingType === 'EDIT_BOOKING') && (\n            <span class=\"booking-roomtype-title\">{this.rateplanSelection.roomtype.name}</span>\n          )}\n          <div class=\"booking-details-container\">\n            <div class=\"booking-rateplan\">\n              <p class=\"booking-rateplan-name\">\n                {this.rateplanSelection.ratePlan.short_name} {this.rateplanSelection.ratePlan.is_non_refundable && <span class={'non-ref-span'}>Non Refundable</span>}\n              </p>\n              <ir-tooltip class=\"booking-tooltip\" message={this.getTooltipMessages()}></ir-tooltip>\n            </div>\n            <p class=\"booking-variation\" innerHTML={formattedVariation}></p>\n          </div>\n          <p class=\"booking-price\">\n            {formatAmount(this.currency?.symbol, this.getAmount())}/{locales.entries.Lcz_Stay}\n          </p>\n        </div>\n        <div class=\"booking-footer\">\n          <div class=\"booking-rateplan\">\n            <p class=\"booking-rateplan-name\">{this.rateplanSelection.ratePlan.short_name}</p>\n            <ir-tooltip class=\"booking-tooltip\" message={this.getTooltipMessages()}></ir-tooltip>\n          </div>\n          <p class=\"booking-variation\" innerHTML={formattedVariation}></p>\n        </div>\n        <div class=\"d-flex flex-column flex-md-row  p-0 align-items-md-center aplicationInfoContainer\">\n          <div class=\"mr-md-1 mb-1 mb-md-0 flex-fill guest-info-container\">\n            <input\n              id={v4()}\n              type=\"text\"\n              data-testid=\"guest_first_name\"\n              class={`form-control ${this.isButtonPressed && this.guestInfo?.first_name === '' && 'border-danger'}`}\n              placeholder={locales.entries['Lcz_GuestFirstname'] ?? 'Guest first name'}\n              name=\"guestFirstName\"\n              onInput={event => {\n                const name = (event.target as HTMLInputElement).value;\n                this.updateGuest({ first_name: name });\n                if (booking_store.event_type.type === 'EDIT_BOOKING') {\n                  modifyBookingStore('guest', {\n                    ...booking_store.guest,\n                    name,\n                  });\n                }\n              }}\n              required\n              value={this.guestInfo?.first_name}\n            />\n          </div>\n          <div class=\"mr-md-1 flex-fill guest-info-container\">\n            <input\n              id={v4()}\n              type=\"text\"\n              class={`form-control ${this.isButtonPressed && this.guestInfo?.last_name === '' && 'border-danger'}`}\n              placeholder={locales.entries['Lcz_GuestLastname'] ?? 'Guest last name'}\n              name=\"guestLastName\"\n              data-testid=\"guest_last_name\"\n              onInput={event => {\n                const name = (event.target as HTMLInputElement).value;\n                this.updateGuest({ last_name: name });\n                if (booking_store.event_type.type === 'EDIT_BOOKING') {\n                  modifyBookingStore('guest', {\n                    ...booking_store.guest,\n                    name,\n                  });\n                }\n              }}\n              required\n              value={this.guestInfo?.last_name}\n            />\n          </div>\n          {calendar_data.is_frontdesk_enabled &&\n            !isSingleUnit(this.rateplanSelection.roomtype.id) &&\n            (this.bookingType === 'PLUS_BOOKING' || this.bookingType === 'ADD_ROOM' || this.bookingType === 'EDIT_BOOKING') && (\n              <div class=\"mt-1 mt-md-0 d-flex align-items-center flex-fill\">\n                <div class=\"mr-md-1 p-0 flex-fill preference-select-container\">\n                  <select data-testid=\"unit\" class=\"form-control input-sm pr-0\" id={v4()} onChange={event => this.updateGuest({ unit: (event.target as HTMLInputElement).value })}>\n                    <option value=\"\" selected={this.guestInfo?.unit === ''}>\n                      {locales.entries.Lcz_Assignunits}\n                    </option>\n                    {filteredRoomList?.map(room => (\n                      <option value={room.id} selected={this.guestInfo?.unit === room.id.toString()}>\n                        {room.name}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n              </div>\n            )}\n          {this.rateplanSelection.roomtype.is_bed_configuration_enabled && (\n            <div class=\"mt-1 mt-md-0 mr-md-1 flex-fill\">\n              <select\n                data-testid=\"bed_configuration\"\n                class={`form-control input-sm ${this.isButtonPressed && this.guestInfo?.bed_preference === '' && 'border-danger'}`}\n                id={v4()}\n                onChange={event => this.updateGuest({ bed_preference: (event.target as HTMLInputElement).value })}\n              >\n                <option value=\"\" selected={this.guestInfo?.bed_preference === ''}>\n                  {locales.entries.Lcz_BedConfiguration}\n                </option>\n                {this.bedPreferenceType.map(data => (\n                  <option value={data.CODE_NAME} selected={this.guestInfo?.bed_preference === data.CODE_NAME}>\n                    {data.CODE_VALUE_EN}\n                  </option>\n                ))}\n              </select>\n            </div>\n          )}\n          <p class=\"rate_amount\">\n            {formatAmount(this.currency?.symbol, this.getAmount())}/{locales.entries.Lcz_Stay}\n          </p>\n        </div>\n        {this.rateplanSelection.selected_variation.child_nbr > 0 && (\n          <div style={{ gap: '0.5rem', marginTop: '0.5rem' }} class=\"d-flex  flex-row  p-0 align-items-center aplicationInfoContainer\">\n            <p class={'m-0 p-0 text-danger'}>Any of the children below 3 years?</p>\n            <div class=\"mr-1 flex-fill\">\n              <select\n                class={`form-control input-sm ${this.isButtonPressed && this.guestInfo?.bed_preference === '' && 'border-danger'}`}\n                id={v4()}\n                style={{ width: 'max-content' }}\n                onChange={event => this.updateGuest({ infant_nbr: Number((event.target as HTMLInputElement).value) })}\n              >\n                <option value=\"\" selected={Number(this.guestInfo?.infant_nbr) === 0}>\n                  {locales.entries['No'] || 'No'}\n                </option>\n                {Array.from({ length: this.rateplanSelection.selected_variation.child_nbr }, (_, i) => i + 1).map(item => (\n                  <option value={item} selected={this.guestInfo?.infant_nbr === item}>\n                    {item}\n                  </option>\n                ))}\n              </select>\n            </div>\n          </div>\n        )}\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n\n:host .controlContainer {\n  width: 24px;\n}\n\n:host .checkBoxContainer input {\n  height: 1.2rem !important;\n  width: 30px;\n}\n\n.releaseTime {\n  padding-left: 5px;\n}\n.out-of-service-label {\n  margin-left: 5px !important;\n}\n","import { Component, Host, h, Prop, State, Event, EventEmitter } from '@stencil/core';\nimport { BookingService } from '@/services/booking.service';\nimport { IEntries } from '@/models/IBooking';\nimport locales from '@/stores/locales.store';\n\n@Component({\n  tag: 'igl-block-dates-view',\n  styleUrl: 'igl-block-dates-view.css',\n  scoped: true,\n})\nexport class IglBlockDatesView {\n  @Prop() defaultData: { [key: string]: any };\n  @Prop() fromDate: string;\n  @Prop() toDate: string;\n  @Prop({ mutable: true }) entryDate: string;\n  @Prop() entryHour: number;\n  @Prop() isEventHover: boolean = false;\n  @Prop() entryMinute: number;\n  @State() renderAgain: boolean = false;\n  @Event() dataUpdateEvent: EventEmitter<{ [key: string]: any }>;\n\n  private blockDatesData: { [key: string]: any } = {\n    RELEASE_AFTER_HOURS: 0,\n    OPTIONAL_REASON: '',\n    OUT_OF_SERVICE: false,\n  }; // Change of property name might require updates in booking-event-hover\n  private releaseList: IEntries[] = [];\n  private bookingService: BookingService = new BookingService();\n\n  async componentWillLoad() {\n    try {\n      this.releaseList = await this.bookingService.getBlockedInfo();\n      if (this.defaultData) {\n        this.blockDatesData = { ...this.defaultData };\n      } else {\n        this.blockDatesData.RELEASE_AFTER_HOURS = parseInt(this.releaseList[0].CODE_NAME);\n        this.emitData();\n      }\n    } catch (error) {\n      // toastr.error(error);\n    }\n  }\n\n  handleOptionalReason(event) {\n    this.blockDatesData.OPTIONAL_REASON = event.target.value;\n    this.emitData();\n  }\n\n  handleReleaseAfterChange(evt) {\n    if (this.entryDate) this.entryDate = undefined;\n    this.blockDatesData.RELEASE_AFTER_HOURS = parseInt(evt.target.value);\n    this.renderPage();\n    this.emitData();\n  }\n\n  emitData() {\n    this.dataUpdateEvent.emit({\n      key: 'blockDatesData',\n      data: { ...this.blockDatesData },\n    });\n  }\n\n  getReleaseHoursString() {\n    // console.log(\"entry date\", this.entryDate);\n    // console.log(\"blocked date data\", this.blockDatesData);\n    let dt = this.entryDate ? new Date(this.entryDate) : new Date();\n    if (this.entryDate && this.entryHour && this.entryMinute) {\n      dt.setHours(this.entryHour, this.entryMinute, 0, 0);\n    } else {\n      dt.setHours(dt.getHours() + this.blockDatesData.RELEASE_AFTER_HOURS, dt.getMinutes(), 0, 0);\n    }\n\n    return dt.toLocaleString('default', { month: 'short' }) + ' ' + dt.getDate() + ', ' + this.formatNumber(dt.getHours()) + ':' + this.formatNumber(dt.getMinutes());\n  }\n  formatNumber(value: number) {\n    return value < 10 ? `0${value}` : value;\n  }\n  handleOutOfService(evt) {\n    this.blockDatesData.OUT_OF_SERVICE = evt.target.checked;\n    if (this.blockDatesData.OUT_OF_SERVICE) {\n      this.blockDatesData.OPTIONAL_REASON = '';\n      this.blockDatesData.RELEASE_AFTER_HOURS = 0;\n    }\n    this.renderPage();\n    this.emitData();\n  }\n\n  renderPage() {\n    this.renderAgain = !this.renderAgain;\n  }\n\n  render() {\n    console.log({ fromDate: this.fromDate, toDate: this.toDate });\n    return (\n      <Host>\n        <div class={`m-0 p-0 mb-1`}>\n          <div class=\"text-left p-0\">\n            <ir-date-view from_date={this.fromDate} dateOption=\"YYYY-MM-DD\" showDateDifference={false} to_date={this.toDate}></ir-date-view>\n          </div>\n        </div>\n        <div class={` mb-1 text-left ${this.isEventHover && 'p-0'}`}>\n          <div class=\"mb-1 \">\n            <label class=\"p-0 text-bold-700 font-medium-1 m-0 align-middle\">{locales.entries.Lcz_Reason}:</label>\n            <div class=\"p-0 m-0 pr-1  controlContainer checkBoxContainer d-inline-block align-middle\">\n              <input class=\"form-control\" type=\"checkbox\" checked={this.blockDatesData.OUT_OF_SERVICE} id=\"userinput6\" onChange={event => this.handleOutOfService(event)} />\n            </div>\n            <span class=\"align-middle out-of-service-label\">{locales.entries.Lcz_OutOfservice}</span>\n          </div>\n          {!this.blockDatesData.OUT_OF_SERVICE ? (\n            <div>\n              <div class=\"mb-1 d-flex  align-items-center\">\n                <span class=\"align-middle\">{locales.entries.Lcz_Or} </span>\n                <div class=\"d-inline-flex col pr-0 align-middle\">\n                  <input\n                    class=\"form-control\"\n                    type=\"text\"\n                    placeholder={locales.entries.Lcz_OptionalReason}\n                    id=\"optReason\"\n                    value={this.blockDatesData.OPTIONAL_REASON}\n                    onInput={event => this.handleOptionalReason(event)}\n                  />\n                </div>\n              </div>\n              <div class=\"mb-1 w-100 pr-0 \">\n                <span class=\"text-bold-700 font-medium-1\">{locales.entries.Lcz_AutomaticReleaseIn}: </span>\n                <div class=\"d-inline-block\">\n                  <select class=\"form-control input-sm\" id=\"zSmallSelect\" onChange={evt => this.handleReleaseAfterChange(evt)}>\n                    {this.releaseList.map(releaseItem => (\n                      <option value={+releaseItem.CODE_NAME} selected={Number(this.blockDatesData.RELEASE_AFTER_HOURS) == Number(releaseItem.CODE_NAME)}>\n                        {releaseItem.CODE_VALUE_EN}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n                {this.blockDatesData.RELEASE_AFTER_HOURS ? (\n                  <div class=\"d-inline-block releaseTime\">\n                    <em>\n                      {locales.entries.Lcz_On} {this.getReleaseHoursString()}\n                    </em>\n                  </div>\n                ) : null}\n              </div>\n            </div>\n          ) : null}\n        </div>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n\n.sourceContainer {\n  max-width: 350px;\n}\n.message-label {\n  font-size: 80%;\n}\n","import { Component, Host, Prop, h, Event, EventEmitter } from '@stencil/core';\nimport { TAdultChildConstraints, TPropertyButtonsTypes, TSourceOption, TSourceOptions } from '../../../../models/igl-book-property';\n\nimport moment from 'moment';\nimport locales from '@/stores/locales.store';\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\nimport calendar_data from '@/stores/calendar-data';\nimport { IToast } from '@/components/ui/ir-toast/toast';\nimport { modifyBookingStore } from '@/stores/booking.store';\n\n@Component({\n  tag: 'igl-book-property-header',\n  styleUrl: 'igl-book-property-header.css',\n  scoped: true,\n})\nexport class IglBookPropertyHeader {\n  @Prop() splitBookingId: any = '';\n  @Prop() bookingData: any = '';\n  @Prop() minDate: string;\n  @Prop() sourceOptions: TSourceOptions[] = [];\n  @Prop() message: string;\n  @Prop() bookingDataDefaultDateRange: { [key: string]: any };\n  @Prop() showSplitBookingOption: boolean = false;\n  @Prop() adultChildConstraints: TAdultChildConstraints;\n  @Prop() splitBookings: any[];\n  @Prop() adultChildCount: { adult: number; child: number };\n  @Prop() dateRangeData: any;\n  @Prop() bookedByInfoData: any;\n  @Prop() defaultDaterange: { from_date: string; to_date: string };\n  @Prop() propertyId: number;\n\n  @Event() splitBookingDropDownChange: EventEmitter<any>;\n  @Event() sourceDropDownChange: EventEmitter<string>;\n  @Event() adultChild: EventEmitter<any>;\n  @Event() checkClicked: EventEmitter<any>;\n  @Event() buttonClicked: EventEmitter<{ key: TPropertyButtonsTypes }>;\n  @Event() toast: EventEmitter<IToast>;\n  @Event() spiltBookingSelected: EventEmitter<{ key: string; data: unknown }>;\n\n  @Event({ bubbles: true, composed: true }) animateIrButton: EventEmitter<string>;\n  @Event({ bubbles: true, composed: true }) animateIrSelect: EventEmitter<string>;\n\n  private sourceOption: TSourceOption = {\n    code: '',\n    description: '',\n    tag: '',\n    id: '',\n    type: '',\n  };\n\n  getSplitBookingList() {\n    return (\n      <fieldset class=\"d-flex flex-column text-left mb-1  flex-lg-row align-items-lg-center\">\n        <label class=\"mr-lg-1\">{locales.entries.Lcz_Tobooking}# </label>\n        <div class=\"btn-group mt-1 mt-lg-0 sourceContainer\">\n          <ir-autocomplete\n            value={\n              Object.keys(this.bookedByInfoData).length > 1 ? `${this.bookedByInfoData.bookingNumber} ${this.bookedByInfoData.firstName} ${this.bookedByInfoData.lastName}` : ''\n            }\n            from_date={moment(this.bookingDataDefaultDateRange.fromDate).format('YYYY-MM-DD')}\n            to_date={moment(this.bookingDataDefaultDateRange.toDate).format('YYYY-MM-DD')}\n            propertyId={this.propertyId}\n            placeholder={locales.entries.Lcz_BookingNumber}\n            onComboboxValue={e => {\n              e.stopImmediatePropagation();\n              e.stopPropagation;\n              this.spiltBookingSelected.emit(e.detail);\n            }}\n            isSplitBooking\n          ></ir-autocomplete>\n        </div>\n      </fieldset>\n    );\n  }\n  getSourceNode() {\n    return (\n      <fieldset class=\"d-flex text-left  align-items-center\">\n        <label class=\"mr-1\">{locales.entries.Lcz_Source} </label>\n        <div class=\"btn-group mt-0 flex-fill sourceContainer\">\n          <select class=\"form-control input-sm\" id=\"xSmallSelect\" onChange={evt => this.sourceDropDownChange.emit((evt.target as HTMLSelectElement).value)}>\n            {this.sourceOptions.map(option => {\n              if (option.type === 'LABEL') {\n                return <optgroup label={option.value}></optgroup>;\n              }\n              return (\n                <option value={option.id} selected={this.sourceOption.code === option.id}>\n                  {option.value}\n                </option>\n              );\n            })}\n          </select>\n        </div>\n      </fieldset>\n    );\n  }\n  handleAdultChildChange(key: string, value: string) {\n    //const value = (event.target as HTMLSelectElement).value;\n    let obj = {};\n    if (value === '') {\n      obj = {\n        ...this.adultChildCount,\n        [key]: 0,\n      };\n    } else {\n      obj = {\n        ...this.adultChildCount,\n        [key]: value,\n      };\n    }\n    modifyBookingStore('bookingAvailabilityParams', {\n      from_date: this.bookingDataDefaultDateRange.fromDate,\n      to_date: this.bookingDataDefaultDateRange.toDate,\n      adult_nbr: obj?.['adult'] ?? 0,\n      child_nbr: obj?.['child'] ?? 0,\n    });\n    this.adultChild.emit(obj);\n  }\n\n  getAdultChildConstraints() {\n    return (\n      <div class={'mt-1 mt-lg-0 d-flex flex-column text-left'}>\n        {/* <label class=\"mb-1 d-lg-none\">{locales.entries.Lcz_NumberOfGuests} </label> */}\n        <div class=\"form-group  my-lg-0 text-left d-flex align-items-center justify-content-between justify-content-sm-start\">\n          <fieldset>\n            <div class=\"btn-group ml-0\">\n              <ir-select\n                testId=\"adult_number\"\n                class={'m-0'}\n                selectedValue={this.adultChildCount?.adult?.toString()}\n                onSelectChange={e => this.handleAdultChildChange('adult', e.detail)}\n                select_id=\"adult_select\"\n                firstOption={locales.entries.Lcz_AdultsCaption}\n                LabelAvailable={false}\n                data={Array.from(Array(this.adultChildConstraints.adult_max_nbr), (_, i) => i + 1).map(option => ({\n                  text: option.toString(),\n                  value: option.toString(),\n                }))}\n              ></ir-select>\n            </div>\n          </fieldset>\n          {this.adultChildConstraints.child_max_nbr > 0 && (\n            <fieldset>\n              <div class=\"btn-group ml-1 p-0\">\n                {/* <select class=\"form-control input-sm\" id=\"xChildrenSmallSelect\" onChange={evt => this.handleAdultChildChange('child', evt)}>\n                  <option value={''}>{this.renderChildCaption()}</option>\n                  {Array.from(Array(this.adultChildConstraints.child_max_nbr), (_, i) => i + 1).map(option => (\n                    <option value={option}>{option}</option>\n                  ))}\n                </select> */}\n                <ir-select\n                  selectedValue={this.adultChildCount?.child?.toString()}\n                  testId=\"child_number\"\n                  onSelectChange={e => this.handleAdultChildChange('child', e.detail)}\n                  select_id=\"child_select\"\n                  firstOption={this.renderChildCaption()}\n                  LabelAvailable={false}\n                  data={Array.from(Array(this.adultChildConstraints.child_max_nbr), (_, i) => i + 1).map(option => ({\n                    text: option.toString(),\n                    value: option.toString(),\n                  }))}\n                ></ir-select>\n              </div>\n            </fieldset>\n          )}\n          <ir-button\n            btn_id=\"check_availability\"\n            isLoading={isRequestPending('/Check_Availability')}\n            icon=\"\"\n            size=\"sm\"\n            class=\"ml-2\"\n            text={locales.entries.Lcz_Check}\n            onClickHandler={() => this.handleButtonClicked()}\n          ></ir-button>\n          {/* <button class={'btn btn-primary btn-sm  ml-2'} onClick={() => this.handleButtonClicked()}>\n            {locales.entries.Lcz_Check}\n          </button> */}\n        </div>\n      </div>\n    );\n  }\n  renderChildCaption() {\n    const maxAge = this.adultChildConstraints.child_max_age;\n    let years = locales.entries.Lcz_Years;\n\n    if (maxAge === 1) {\n      years = locales.entries.Lcz_Year;\n    }\n    return `${locales.entries.Lcz_ChildCaption} 0 - ${this.adultChildConstraints.child_max_age} ${years}`;\n  }\n  handleButtonClicked() {\n    if (this.isEventType('SPLIT_BOOKING') && Object.keys(this.bookedByInfoData).length <= 1) {\n      this.toast.emit({\n        type: 'error',\n        title: locales.entries.Lcz_ChooseBookingNumber,\n        description: '',\n        position: 'top-right',\n      });\n    } else if (this.isEventType('ADD_ROOM') || this.isEventType('SPLIT_BOOKING')) {\n      const initialToDate = moment(new Date(this.bookedByInfoData.to_date || this.defaultDaterange.to_date));\n      const initialFromDate = moment(new Date(this.bookedByInfoData.from_date || this.defaultDaterange.from_date));\n      const selectedFromDate = moment(new Date(this.dateRangeData.fromDate));\n      const selectedToDate = moment(new Date(this.dateRangeData.toDate));\n      if (selectedToDate.isBefore(initialFromDate) || selectedFromDate.isAfter(initialToDate)) {\n        this.toast.emit({\n          type: 'error',\n          title: `${locales.entries.Lcz_CheckInDateShouldBeMAx.replace(\n            '%1',\n            moment(new Date(this.bookedByInfoData.from_date || this.defaultDaterange.from_date)).format('ddd, DD MMM YYYY'),\n          ).replace('%2', moment(new Date(this.bookedByInfoData.to_date || this.defaultDaterange.to_date)).format('ddd, DD MMM YYYY'))}  `,\n          description: '',\n          position: 'top-right',\n        });\n        return;\n      } else if (this.adultChildCount.adult === 0) {\n        this.toast.emit({ type: 'error', title: locales.entries.Lcz_PlzSelectNumberOfGuests, description: '', position: 'top-right' });\n        this.animateIrSelect.emit('adult_child_select');\n      } else {\n        this.buttonClicked.emit({ key: 'check' });\n      }\n    } else if (this.minDate && new Date(this.dateRangeData.fromDate).getTime() > new Date(this.bookedByInfoData.to_date || this.defaultDaterange.to_date).getTime()) {\n      this.toast.emit({\n        type: 'error',\n        title: `${locales.entries.Lcz_CheckInDateShouldBeMAx.replace(\n          '%1',\n          moment(new Date(this.bookedByInfoData.from_date || this.defaultDaterange.from_date)).format('ddd, DD MMM YYYY'),\n        ).replace('%2', moment(new Date(this.bookedByInfoData.to_date || this.defaultDaterange.to_date)).format('ddd, DD MMM YYYY'))}  `,\n        description: '',\n        position: 'top-right',\n      });\n    } else if (this.adultChildCount.adult === 0) {\n      this.animateIrSelect.emit('adult_child_select');\n      this.toast.emit({ type: 'error', title: locales.entries.Lcz_PlzSelectNumberOfGuests, description: '', position: 'top-right' });\n    } else {\n      this.buttonClicked.emit({ key: 'check' });\n    }\n  }\n  isEventType(key: string) {\n    return this.bookingData.event_type === key;\n  }\n\n  render() {\n    const showSourceNode = this.showSplitBookingOption ? this.getSplitBookingList() : this.isEventType('EDIT_BOOKING') || this.isEventType('ADD_ROOM') ? false : true;\n    return (\n      <Host>\n        {this.isEventType('SPLIT_BOOKING') && this.getSplitBookingList()}\n        {showSourceNode && this.getSourceNode()}\n        <div class={`d-flex flex-column flex-lg-row align-items-lg-center ${showSourceNode ? 'mt-1' : ''}`}>\n          <fieldset class=\"mt-lg-0 mr-1 \">\n            <igl-date-range\n              data-testid=\"date_picker\"\n              variant=\"booking\"\n              dateLabel={locales.entries.Lcz_Dates}\n              minDate={this.isEventType('PLUS_BOOKING') ? moment().add(-1, 'months').startOf('month').format('YYYY-MM-DD') : this.minDate}\n              disabled={this.isEventType('BAR_BOOKING') || this.isEventType('SPLIT_BOOKING')}\n              defaultData={this.bookingDataDefaultDateRange}\n            ></igl-date-range>\n          </fieldset>\n          {!this.isEventType('EDIT_BOOKING') && this.getAdultChildConstraints()}\n        </div>\n        <p class=\"text-right mt-1 message-label\">{calendar_data.tax_statement}</p>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: flex;\n  align-items: center !important;\n  font-size: 14px !important;\n}\n.date-range-input {\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex: 1;\n  cursor: pointer;\n  width: 100%;\n  user-select: none;\n  font-size: 14px !important;\n}\n.iglRangeNights {\n  margin: 0;\n  padding: 0;\n}\n.date-view {\n  position: absolute;\n  background: white;\n  pointer-events: none;\n  cursor: pointer;\n  display: block;\n  margin-left: 14px;\n  margin-right: 14px;\n  font-size: 13.65px !important;\n  display: flex;\n  align-items: center;\n  inset: 0;\n}\n.date-view svg {\n  padding: 0 !important;\n  margin: 0;\n  margin-right: 10px;\n}\n.calendarPickerContainer {\n  display: flex !important;\n  position: relative !important;\n  text-align: left;\n  align-items: center !important;\n  padding: 0 !important;\n  margin: 0;\n  border: 1px solid var(--ir-date-range-border, #379ff2);\n  width: var(--ir-date-range-width, 245px);\n  transition: border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\n}\n.calendarPickerContainer:focus-within {\n  border-color: #379ff2;\n}\n.calendarPickerContainer[data-state='disabled'] {\n  border: 0px;\n  width: 280px;\n}\n.date-view[data-state='disabled'],\n.date-range-input[data-state='disabled'] {\n  margin: 0;\n  cursor: default;\n}\n.date-range-container-cn {\n  position: relative;\n  width: fit-content;\n}\n.date-range-container-cn:focus-within .date-range-container {\n  border: 1px solid #379ff2;\n}\n.date-range-container {\n  position: relative;\n  gap: 1rem;\n  font-size: 0.975rem;\n  line-height: 1.45;\n  border-radius: 0.21rem;\n  border: 1px solid #cacfe7;\n  color: #3b4781;\n  padding: 0.75rem 1rem;\n  box-sizing: border-box !important;\n  font-weight: 400;\n  background-color: #fff;\n  background-clip: padding-box;\n  height: 2rem;\n  pointer-events: none;\n  transition: border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\n}\n.date-range-container-cn .date-range-input {\n  position: absolute;\n  width: 100% !important;\n  inset: 0;\n  cursor: pointer;\n}\n.date-range-container.disabled {\n  border: none;\n  padding-left: 0;\n  padding-right: 0;\n}\n.date-range-input[data-state='disabled'] {\n  cursor: default;\n}\n","import { Component, Host, h, State, Event, EventEmitter, Prop, Watch } from '@stencil/core';\nimport { IToast } from '@components/ui/ir-toast/toast';\nimport locales from '@/stores/locales.store';\nimport { calculateDaysBetweenDates } from '@/utils/booking';\nimport moment from 'moment';\n\n@Component({\n  tag: 'igl-date-range',\n  styleUrl: 'igl-date-range.css',\n  scoped: true,\n})\nexport class IglDateRange {\n  @Prop() defaultData: { [key: string]: any };\n  @Prop({ reflect: true }) disabled: boolean = false;\n  @Prop() minDate: string;\n  @Prop() dateLabel: string;\n  @Prop() maxDate: string;\n  @Prop() withDateDifference: boolean = true;\n  @Prop() variant: 'booking' | 'default' = 'default';\n\n  @State() renderAgain: boolean = false;\n\n  @Event() dateSelectEvent: EventEmitter<{ [key: string]: any }>;\n  @Event() toast: EventEmitter<IToast>;\n\n  private totalNights: number = 0;\n  private fromDate: Date;\n  private toDate: Date;\n  private fromDateStr: string = 'from';\n  private toDateStr: string = 'to';\n\n  componentWillLoad() {\n    this.initializeDates();\n  }\n\n  @Watch('defaultData')\n  handleDataChange(newValue: any, oldValue: any) {\n    if (JSON.stringify(newValue) !== JSON.stringify(oldValue)) {\n      this.initializeDates();\n    }\n  }\n\n  private initializeDates() {\n    let dt = new Date();\n    dt.setHours(0, 0, 0, 0);\n    dt.setDate(dt.getDate() + 1);\n    if (this.defaultData) {\n      if (this.defaultData.fromDate) {\n        this.fromDate = new Date(this.defaultData.fromDate);\n        this.fromDate.setHours(0, 0, 0, 0);\n        this.fromDateStr = this.getFormattedDateString(this.fromDate);\n      }\n      if (this.defaultData.toDate) {\n        this.toDate = new Date(this.defaultData.toDate);\n        this.toDate.setHours(0, 0, 0, 0);\n        this.toDateStr = this.getFormattedDateString(this.toDate);\n      }\n    }\n    if (this.fromDate && this.toDate) {\n      this.calculateTotalNights();\n      // this.handleDateSelectEvent('selectedDateRange', {\n      //   fromDate: this.fromDate.getTime(),\n      //   toDate: this.toDate.getTime(),\n      //   fromDateStr: this.fromDateStr,\n      //   toDateStr: this.toDateStr,\n      //   dateDifference: this.totalNights,\n      // });\n    }\n    return [this.fromDateStr, this.toDateStr];\n  }\n\n  private calculateTotalNights() {\n    this.totalNights = calculateDaysBetweenDates(moment(this.fromDate).format('YYYY-MM-DD'), moment(this.toDate).format('YYYY-MM-DD'));\n  }\n  private getFormattedDateString(dt) {\n    return dt.getDate() + ' ' + dt.toLocaleString('default', { month: 'short' }).toLowerCase() + ' ' + dt.getFullYear();\n  }\n\n  private handleDateSelectEvent(key, data: any = '') {\n    this.dateSelectEvent.emit({ key, data });\n  }\n  private handleDateChange(evt) {\n    const { start, end } = evt.detail;\n    this.fromDate = start.toDate();\n    this.toDate = end.toDate();\n    this.calculateTotalNights();\n\n    this.handleDateSelectEvent('selectedDateRange', {\n      fromDate: this.fromDate.getTime(),\n      toDate: this.toDate.getTime(),\n      fromDateStr: start.format('DD MMM YYYY'),\n      toDateStr: end.format('DD MMM YYYY'),\n      dateDifference: this.totalNights,\n    });\n\n    this.renderAgain = !this.renderAgain;\n  }\n  render() {\n    if (this.variant === 'booking') {\n      return (\n        <div class={`p-0 m-0 date-range-container-cn`}>\n          <ir-date-range\n            maxDate={this.maxDate}\n            class={'date-range-input'}\n            disabled={this.disabled}\n            fromDate={this.fromDate}\n            toDate={this.toDate}\n            minDate={this.minDate}\n            autoApply\n            data-state={this.disabled ? 'disabled' : 'active'}\n            onDateChanged={evt => {\n              this.handleDateChange(evt);\n            }}\n          ></ir-date-range>\n          <div class={`d-flex align-items-center m-0  date-range-container ${this.disabled ? 'disabled' : ''}`}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"m-0 p-0\" height=\"14\" width=\"14\" viewBox=\"0 0 448 512\">\n              <path\n                fill=\"currentColor\"\n                d=\"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z\"\n              />\n            </svg>\n            <span>{moment(this.fromDate).format('MMM DD, YYYY')}</span>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"m-0 p-0\" height=\"14\" width=\"14\" viewBox=\"0 0 512 512\">\n              <path\n                fill=\"currentColor\"\n                d=\"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z\"\n              />\n            </svg>\n            <span>{moment(this.toDate).format('MMM DD, YYYY')}</span>\n            {this.totalNights && <span class=\"m-0 p-0\">{this.totalNights + (this.totalNights > 1 ? ` ${locales.entries.Lcz_Nights}` : ` ${locales.entries.Lcz_Night}`)}</span>}\n          </div>\n        </div>\n      );\n    }\n    return (\n      <Host>\n        <div class={`p-0 m-0 date-range-container-cn`}>\n          <ir-date-range\n            maxDate={this.maxDate}\n            class={'date-range-input'}\n            disabled={this.disabled}\n            fromDate={this.fromDate}\n            toDate={this.toDate}\n            minDate={this.minDate}\n            autoApply\n            data-state={this.disabled ? 'disabled' : 'active'}\n            onDateChanged={evt => {\n              this.handleDateChange(evt);\n            }}\n          ></ir-date-range>\n          <div class={`d-flex align-items-center m-0  date-range-container ${this.disabled ? 'disabled' : ''}`}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"m-0 p-0\" height=\"14\" width=\"14\" viewBox=\"0 0 448 512\">\n              <path\n                fill=\"currentColor\"\n                d=\"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z\"\n              />\n            </svg>\n            <span>{moment(this.fromDate).format('MMM DD, YYYY')}</span>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"m-0 p-0\" height=\"14\" width=\"14\" viewBox=\"0 0 512 512\">\n              <path\n                fill=\"currentColor\"\n                d=\"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z\"\n              />\n            </svg>\n            <span>{moment(this.toDate).format('MMM DD, YYYY')}</span>\n          </div>\n        </div>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n.bookedByEmailContainer {\n  flex: auto;\n  max-width: 350px;\n}\n\n.bookedDetailsForm label {\n  min-width: 125px;\n  max-width: 125px;\n}\n.row.sc-igl-booking-form {\n  padding: 0 !important;\n}\n.bookedDetailsForm .form-group {\n  margin-bottom: 10px !important;\n}\n\n.bookedDetailsForm .checkBoxContainer input {\n  height: 1.2rem !important;\n  width: 30px;\n}\n/* .controlContainer1 .textarea-container {\n  border: 1px solid #ced4da; \n  border-radius: 0.25rem; \n  height: 60px; \n  width: 100%;\n} */\n.controlContainer textarea {\n  height: 60px !important;\n}\n.margin3 {\n  margin-bottom: 5px !important;\n}\n@media (min-width: 768px) {\n  .bookedByEmailContainer {\n    margin-left: 37px;\n  }\n}\n","import { Component, Host, h, Prop, Event, EventEmitter, State, Fragment, Listen } from '@stencil/core';\nimport { BookingService } from '@/services/booking.service';\nimport { IEntries, ICountry } from '@/models/IBooking';\nimport { v4 } from 'uuid';\nimport locales from '@/stores/locales.store';\nimport { TPropertyButtonsTypes } from '@/components';\nimport { z } from 'zod';\nimport { validateEmail } from '@/utils/utils';\nimport booking_store, { BookingStore, modifyBookingStore } from '@/stores/booking.store';\n\n@Component({\n  tag: 'igl-property-booked-by',\n  styleUrl: 'igl-property-booked-by.css',\n  scoped: true,\n})\nexport class IglPropertyBookedBy {\n  @Prop() language: string;\n  @Prop() showPaymentDetails: boolean = false;\n  @Prop() defaultData: { [key: string]: any };\n  @Event() dataUpdateEvent: EventEmitter<{ [key: string]: any }>;\n  @Prop() countries: ICountry[] = [];\n  @Prop() propertyId: number;\n  @State() isButtonPressed: boolean = false;\n  private bookingService: BookingService = new BookingService();\n  private arrivalTimeList: IEntries[] = [];\n  private expiryMonths: string[] = ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12'];\n  private expiryYears: string[] = [];\n  private currentMonth: string = '01';\n  private country;\n  @State() bookedByData: { [key: string]: any } = {\n    id: undefined,\n    email: '',\n    firstName: '',\n    lastName: '',\n    countryId: '',\n    isdCode: '',\n    contactNumber: '',\n    selectedArrivalTime: '',\n    emailGuest: false,\n    message: '',\n    cardNumber: '',\n    cardHolderName: '',\n    expiryMonth: '',\n    expiryYear: '',\n  };\n\n  async componentWillLoad() {\n    this.assignCountryCode();\n    this.initializeExpiryYears();\n    this.initializeDateData();\n    this.populateBookedByData();\n  }\n\n  private initializeExpiryYears() {\n    const currentYear = new Date().getFullYear();\n    this.expiryYears = Array.from({ length: 4 }, (_, index) => (currentYear + index).toString());\n  }\n  private async assignCountryCode() {\n    const country = await this.bookingService.getUserDefaultCountry();\n\n    const countryId = country['COUNTRY_ID'];\n    this.country = countryId;\n    this.bookedByData = { ...this.bookedByData, isdCode: countryId.toString(), countryId };\n  }\n  private initializeDateData() {\n    const dt = new Date();\n    const month = dt.getMonth() + 1;\n    this.currentMonth = month < 10 ? `0${month}` : month.toString();\n  }\n\n  private populateBookedByData() {\n    this.bookedByData = this.defaultData ? { ...this.bookedByData, ...this.defaultData } : {};\n    this.arrivalTimeList = this.defaultData?.arrivalTime || [];\n    this.bookedByData = { ...this.bookedByData, selectedArrivalTime: this.arrivalTimeList[0].CODE_NAME };\n    if (!this.bookedByData.expiryMonth) {\n      this.bookedByData.expiryMonth = this.currentMonth;\n    }\n    if (!this.bookedByData.expiryYear) {\n      this.bookedByData.expiryYear = new Date().getFullYear();\n    }\n    console.log('initial bookedby data', this.bookedByData);\n  }\n\n  private handleDataChange(key, event) {\n    this.bookedByData[key] = key === 'emailGuest' ? event.target.checked : event.target.value;\n    this.dataUpdateEvent.emit({\n      key: 'bookedByInfoUpdated',\n      data: { ...this.bookedByData },\n    });\n    if (key === 'countryId') {\n      this.bookedByData = {\n        ...this.bookedByData,\n        isdCode: event.target.value,\n      };\n    }\n    // console.log(this.bookedByData);\n  }\n  private handleCountryChange(value) {\n    this.bookedByData = {\n      ...this.bookedByData,\n      isdCode: value,\n      countryId: value,\n    };\n    this.dataUpdateEvent.emit({\n      key: 'bookedByInfoUpdated',\n      data: { ...this.bookedByData },\n    });\n    // console.log(this.bookedByData);\n  }\n\n  private handleNumberInput(key, event: InputEvent) {\n    const inputElement = event.target as HTMLInputElement;\n    const inputValue = inputElement.value;\n\n    // Regular expression to match only numeric characters (0-9)\n    const numericRegex = /^[0-9]+$/;\n\n    if (!numericRegex.test(inputValue)) {\n      // If the input is not numeric, prevent it from being entered\n      inputElement.value = inputValue.replace(/[^0-9]/g, '');\n    }\n    if (inputValue === inputElement.value) {\n      this.handleDataChange(key, event);\n    }\n  }\n\n  // async handleEmailInput(key, event: InputEvent) {\n  //   const inputElement = event.target as HTMLInputElement;\n  //   const inputValue = inputElement.value;\n  //   if (z.string().email().safeParse(inputValue).success) {\n  //     this.handleDataChange(key, event);\n  //   }\n  // }\n  async checkUser() {\n    try {\n      const email = this.bookedByData.email;\n      if (z.string().email().safeParse(email).success) {\n        const res = await this.bookingService.getUserInfo(email);\n        if (res !== null) {\n          this.bookedByData = {\n            ...this.bookedByData,\n            id: res.id,\n            firstName: res.first_name,\n            lastName: res.last_name,\n            contactNumber: res.mobile_without_prefix,\n            countryId: res.country_id,\n            isdCode: res?.country_phone_prefix ?? res.isdCode.toString(),\n          };\n          console.log(this.bookedByData);\n        } else {\n          let prevBookedByData = { ...this.bookedByData };\n          prevBookedByData = { ...prevBookedByData, email };\n          this.bookedByData = { ...prevBookedByData };\n        }\n      } else {\n        let prevBookedByData = { ...this.bookedByData };\n        prevBookedByData = { ...prevBookedByData, email: '' };\n        this.bookedByData = { ...prevBookedByData };\n      }\n      this.dataUpdateEvent.emit({\n        key: 'bookedByInfoUpdated',\n        data: { ...this.bookedByData },\n      });\n    } catch (error) {\n      //   toastr.error(error);\n    }\n  }\n  private updateGuest(props: Partial<BookingStore['checkout_guest']>) {\n    modifyBookingStore('checkout_guest', { ...(booking_store.checkout_guest ?? {}), ...props });\n  }\n  handleComboboxChange(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    const { key, data } = e.detail;\n    console.log(key, data);\n    if (key === 'blur') {\n      if (z.string().email().safeParse(data).success) {\n        this.bookedByData.email = data;\n        this.checkUser();\n      } else if (this.bookedByData.email !== '' && data == '') {\n        this.bookedByData.email = '';\n      }\n      this.dataUpdateEvent.emit({\n        key: 'bookedByInfoUpdated',\n        data: this.bookedByData,\n      });\n    }\n    if (key === 'select') {\n      this.bookedByData.email = data.email;\n      this.bookedByData = {\n        ...this.bookedByData,\n        id: data.id,\n        firstName: data.first_name,\n        lastName: data.last_name,\n        contactNumber: data.mobile_without_prefix,\n        countryId: data.country_id,\n        isdCode: data['country_phone_prefix'] ?? data?.country_id,\n      };\n      this.dataUpdateEvent.emit({\n        key: 'bookedByInfoUpdated',\n        data: this.bookedByData,\n      });\n    }\n\n    // console.log('data', data, 'key', key);\n    // switch (key) {\n    //   case 'blur':\n    //     if (data !== '') {\n    //       this.bookedByData.email = data;\n    //       this.checkUser();\n    //     } else {\n    //       let prevBookedByData = { ...this.bookedByData };\n    //       prevBookedByData = { ...prevBookedByData, email: '' };\n    //       this.bookedByData = { ...prevBookedByData };\n    //       this.dataUpdateEvent.emit({\n    //         key: 'bookedByInfoUpdated',\n    //         data: { ...this.bookedByData },\n    //       });\n    //     }\n\n    //     break;\n    //   case 'select':\n    //     this.bookedByData.email = data.email;\n    //     this.bookedByData = {\n    //       ...this.bookedByData,\n    //       id: data.id,\n    //       firstName: data.first_name,\n    //       lastName: data.last_name,\n    //       contactNumber: data.mobile,\n    //       countryId: data.country_id,\n    //       isdCode: data.country_id.toString(),\n    //     };\n    //     this.dataUpdateEvent.emit({\n    //       key: 'bookedByInfoUpdated',\n    //       data: this.bookedByData,\n    //     });\n    //     break;\n    //   default:\n    //     break;\n    // }\n  }\n  clearEvent() {\n    this.bookedByData = {\n      ...this.bookedByData,\n      id: '',\n      firstName: '',\n      lastName: '',\n      contactNumber: '',\n      isdCode: this.country.toString(),\n      countryId: this.country,\n    };\n    this.dataUpdateEvent.emit({\n      key: 'bookedByInfoUpdated',\n      data: { ...this.bookedByData },\n    });\n  }\n  @Listen('buttonClicked', { target: 'body' })\n  handleButtonClicked(\n    event: CustomEvent<{\n      key: TPropertyButtonsTypes;\n      data?: CustomEvent;\n    }>,\n  ) {\n    switch (event.detail.key) {\n      case 'book':\n      case 'bookAndCheckIn':\n        this.isButtonPressed = true;\n        break;\n    }\n  }\n  render() {\n    return (\n      <Host>\n        <div class=\"text-left mt-3\">\n          <div class=\"form-group d-flex flex-column flex-md-row align-items-md-center text-left \">\n            <label class=\"p-0 m-0 label-control mr-1 font-weight-bold\">{locales.entries.Lcz_BookedBy}</label>\n            <div class=\"bookedByEmailContainer mt-1 mt-md-0 d-flex align-items-center\">\n              {/* <input\n                id={v4()}\n                type=\"email\"\n                class=\"form-control\"\n                placeholder=\"Email address\"\n                name=\"bookeyByEmail\"\n                value={this.bookedByData.email}\n                onInput={event => this.handleEmailInput('email', event)}\n                required\n                onBlur={() => this.checkUser()}\n              /> */}\n              <ir-autocomplete\n                testId={'main_guest_email'}\n                onComboboxValue={this.handleComboboxChange.bind(this)}\n                propertyId={this.propertyId}\n                type=\"text\"\n                value={this.bookedByData.email}\n                required\n                class={'flex-fill'}\n                placeholder={locales.entries.Lcz_FindEmailAddress}\n                onInputCleared={() => this.clearEvent()}\n                danger_border={this.isButtonPressed && this.bookedByData.email !== '' && validateEmail(this.bookedByData.email)}\n              ></ir-autocomplete>\n              <ir-tooltip class={'ml-1'} message=\"Leave empty if email is unavailable\"></ir-tooltip>\n            </div>\n          </div>\n        </div>\n        <div class=\"bookedDetailsForm text-left mt-2 font-small-3 \">\n          <div class=\"d-flex flex-column flex-md-row  justify-content-md-between \">\n            <div class=\"p-0 flex-fill \">\n              <div class=\"form-group d-flex flex-column flex-md-row align-items-md-center p-0 flex-fill \">\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_FirstName}</label>\n                <div class=\"p-0 m-0  controlContainer flex-fill  \">\n                  <input\n                    data-testid=\"main_guest_first_name\"\n                    class={`form-control flex-fill ${this.isButtonPressed && this.bookedByData.firstName === '' && 'border-danger'}`}\n                    type=\"text\"\n                    placeholder={locales.entries.Lcz_FirstName}\n                    id={v4()}\n                    value={this.bookedByData.firstName}\n                    onInput={event => {\n                      this.updateGuest({ first_name: (event.target as HTMLInputElement).value });\n                      this.handleDataChange('firstName', event);\n                    }}\n                    required\n                  />\n                </div>\n              </div>\n\n              <div class=\"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center\">\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_LastName}</label>\n                <div class=\"p-0 m-0  controlContainer flex-fill\">\n                  <input\n                    data-testid=\"main_guest_last_name\"\n                    class={`form-control ${this.isButtonPressed && this.bookedByData.lastName === '' && 'border-danger'}`}\n                    type=\"text\"\n                    placeholder={locales.entries.Lcz_LastName}\n                    id={v4()}\n                    value={this.bookedByData.lastName}\n                    onInput={event => this.handleDataChange('lastName', event)}\n                  />\n                </div>\n              </div>\n\n              <div class=\"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center\">\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_Country}</label>\n                {/* <div class=\"p-0 m-0  controlContainer flex-fill\"> */}\n                <ir-country-picker\n                  testId=\"main_guest_country\"\n                  class=\"flex-grow-1 m-0\"\n                  onCountryChange={e => this.handleCountryChange(e.detail.id)}\n                  countries={this.countries}\n                  country={this.countries.find(c => c.id === this.bookedByData.countryId)}\n                ></ir-country-picker>\n                {/* <select class={`form-control input-sm pr-0`} id={v4()} onChange={event => this.handleDataChange('countryId', event)}>\n                    <option value=\"\" selected={this.bookedByData.countryId === ''}>\n                      {locales.entries.Lcz_Select}\n                    </option>\n                    {this.countries.map(countryNode => (\n                      <option value={countryNode.id} selected={this.bookedByData.countryId === countryNode.id}>\n                        {countryNode.name}\n                      </option>\n                    ))}\n                  </select> */}\n                {/* </div> */}\n              </div>\n\n              {/* <div class=\"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center\">\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_MobilePhone}</label>\n                <div class=\"p-0 m-0  d-flex  controlContainer flex-fill\">\n                  <div class=\" p-0 m-0\">\n                    <select class={`form-control input-sm pr-0`} id={v4()} onChange={event => this.handleDataChange('isdCode', event)}>\n                      <option value=\"\" selected={this.bookedByData.isdCode === ''}>\n                        {locales.entries.Lcz_Isd}\n                      </option>\n                      {this.countries.map(country => (\n                        <option value={country.id} selected={this.bookedByData.isdCode === country.id.toString()}>\n                          {country.phone_prefix}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                  <div class=\"flex-fill p-0 m-0\">\n                    <input\n                      class={`form-control\n                     \n                      `}\n                      type=\"tel\"\n                      placeholder={locales.entries.Lcz_ContactNumber}\n                      id={v4()}\n                      value={this.bookedByData.contactNumber}\n                      onInput={event => this.handleNumberInput('contactNumber', event)}\n                    />\n                  </div>\n                </div>\n              </div> */}\n              <div class=\"form-group p-0 d-flex flex-column flex-md-row align-items-md-center\">\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_MobilePhone}</label>\n                <div class=\"p-0 m-0 controlContainer flex-fill\">\n                  <ir-phone-input\n                    testId=\"main_guest_phone\"\n                    language={this.language}\n                    // label={locales.entries.Lcz_MobilePhone}\n                    value={this.bookedByData.contactNumber}\n                    phone_prefix={this.bookedByData.isdCode}\n                    default_country={this.bookedByData.countryId}\n                    onTextChange={e => {\n                      this.handleDataChange('isdCode', { target: { value: e.detail.phone_prefix } });\n                      this.handleDataChange('contactNumber', { target: { value: e.detail.mobile } });\n                    }}\n                  ></ir-phone-input>\n                </div>\n              </div>\n              <div class=\"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center\">\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_YourArrivalTime}</label>\n                <div class=\"p-0 m-0  controlContainer flex-fill\">\n                  <select\n                    data-testid=\"arrival_time\"\n                    class={`form-control input-sm pr-0 ${this.isButtonPressed && this.bookedByData.selectedArrivalTime.code === '' && 'border-danger'}`}\n                    id={v4()}\n                    onChange={event => this.handleDataChange('selectedArrivalTime', event)}\n                  >\n                    {/* <option value=\"\" selected={this.bookedByData.selectedArrivalTime.code === ''}>\n                      -\n                    </option> */}\n                    {this.arrivalTimeList.map(time => (\n                      <option value={time.CODE_NAME} selected={this.bookedByData.selectedArrivalTime.code === time.CODE_NAME}>\n                        {time.CODE_VALUE_EN}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n              </div>\n            </div>\n            <div class=\"p-0 flex-fill  ml-md-3\">\n              <div class=\"  p-0 d-flex flex-column flex-md-row align-items-md-center \">\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_AnyMessageForUs}</label>\n                <div class=\"p-0 m-0  controlContainer flex-fill \">\n                  <textarea\n                    data-testid=\"note\"\n                    id={v4()}\n                    rows={4}\n                    class=\"form-control \"\n                    name=\"message\"\n                    value={this.bookedByData.message}\n                    onInput={event => this.handleDataChange('message', event)}\n                  ></textarea>\n                </div>\n              </div>\n              {this.showPaymentDetails && (\n                <Fragment>\n                  <div class=\"form-group mt-md-1  p-0 d-flex flex-column flex-md-row align-items-md-center\">\n                    <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_CardNumber}</label>\n                    <div class=\"p-0 m-0  controlContainer flex-fill\">\n                      <input\n                        class=\"form-control\"\n                        type=\"text\"\n                        placeholder=\"\"\n                        pattern=\"0-9 \"\n                        id={v4()}\n                        value={this.bookedByData.cardNumber}\n                        onInput={event => this.handleNumberInput('cardNumber', event)}\n                      />\n                    </div>\n                  </div>\n                  <div class=\"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center\">\n                    <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_CardHolderName}</label>\n                    <div class=\"p-0 m-0  controlContainer flex-fill\">\n                      <input\n                        class=\"form-control\"\n                        type=\"text\"\n                        placeholder=\"\"\n                        pattern=\"0-9 \"\n                        id={v4()}\n                        value={this.bookedByData.cardHolderName}\n                        onInput={event => this.handleDataChange('cardHolderName', event)}\n                      />\n                    </div>\n                  </div>\n                  <div class=\"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center\">\n                    <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_ExpiryDate}</label>\n                    <div class=\"p-0 m-0 row  controlContainer flex-fill\">\n                      <div class=\"p-0 m-0\">\n                        <select class=\"form-control input-sm pr-0\" id={v4()} onChange={event => this.handleDataChange('expiryMonth', event)}>\n                          {this.expiryMonths.map(month => (\n                            <option value={month} selected={month === this.bookedByData.expiryMonth}>\n                              {month}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n                      <div class=\"p-0 m-0 ml-1\">\n                        <select class=\"form-control input-sm pr-0\" id={v4()} onChange={event => this.handleDataChange('expiryYear', event)}>\n                          {this.expiryYears.map((year, index) => (\n                            <option value={year} selected={index === this.bookedByData.expiryYear}>\n                              {year}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n                    </div>\n                  </div>\n                </Fragment>\n              )}\n              <div class=\"form-group mt-1 p-0 d-flex flex-row align-items-center\">\n                <label class=\"p-0 m-0\" htmlFor={'emailTheGuestId'}>\n                  {locales.entries.Lcz_EmailTheGuest}\n                </label>\n                <div class=\"p-0 m-0  controlContainer flex-fill checkBoxContainer\">\n                  <input\n                    class=\"form-control\"\n                    type=\"checkbox\"\n                    checked={this.bookedByData.emailGuest}\n                    id={'emailTheGuestId'}\n                    onChange={event => this.handleDataChange('emailGuest', event)}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n  margin-bottom: 0.5rem;\n}\n.currency {\n  display: block;\n  position: absolute;\n  margin: 0;\n  padding: 0;\n  height: auto;\n  left: 10px;\n}\n.rate-input {\n  font-size: 14px;\n  line-height: 0;\n  padding: 0;\n  height: 0;\n  border-left: 0;\n}\n.rate-input-container {\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  box-sizing: border-box;\n  flex: 1;\n}\n.new-currency {\n  color: #3b4781;\n  border: 1px solid #cacfe7;\n  font-size: 0.975rem;\n  height: 2rem;\n  background: white;\n  border-right: 0;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  transition: border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\n}\n.input-group-prepend span[data-state='focus'] {\n  border-color: var(--blue);\n}\n.input-group-prepend span[data-disabled] {\n  background-color: #eceff1;\n  border-color: rgba(118, 118, 118, 0.3);\n}\n.non-ref-span {\n  font-size: 12px;\n  color: var(--green);\n}\n.rateplan-name-container {\n  margin-bottom: 0.5rem !important;\n}\n.rateplan-container {\n  margin-top: 0.5rem;\n}\n@media only screen and (min-width: 1200px) {\n  .rateplan-name-container {\n    width: 40%;\n    margin-top: 0;\n  }\n  .rateplan-container {\n    width: 40%;\n  }\n}\n@media only screen and (min-width: 991px) {\n  .max-w-300 {\n    max-width: 200px;\n  }\n  .rate-input-container {\n    max-width: 50px;\n  }\n  .rateplan-name-container {\n    margin-bottom: 0 !important;\n  }\n}\n@media only screen and (min-width: 991px) and (max-width: 1300px) {\n  .rateplan-name-container {\n    width: 40%;\n  }\n  .price-amount {\n    max-width: 150px !important;\n  }\n}\n@media only screen and (max-width: 768px) {\n  .booking-btn {\n    width: 100%;\n  }\n}\n\n.total-nights-container {\n  width: max-content;\n}\n.nightBorder {\n  border-left-width: 0;\n  border-top-right-radius: 3px !important;\n  border-bottom-right-radius: 3px !important;\n}\n","import { Component, Host, Prop, h, Event, EventEmitter, Fragment } from '@stencil/core';\nimport { v4 as uuidv4 } from 'uuid';\nimport locales from '@/stores/locales.store';\nimport { RatePlan, Variation } from '@/models/property';\nimport booking_store, { IRatePlanSelection, reserveRooms, resetReserved, updateRoomParams } from '@/stores/booking.store';\n\n@Component({\n  tag: 'igl-rate-plan',\n  styleUrl: 'igl-rate-plan.css',\n  scoped: true,\n})\nexport class IglRatePlan {\n  // Used Props with type annotations\n  @Prop() ratePlan: RatePlan;\n  @Prop() roomTypeId: number;\n  @Prop() ratePricingMode: Array<{ CODE_NAME: string; CODE_VALUE_EN: string }> = [];\n  @Prop() currency!: { symbol: string };\n  @Prop() shouldBeDisabled!: boolean;\n  @Prop() bookingType: string = 'PLUS_BOOKING';\n  @Prop() isBookDisabled: boolean = false;\n  @Prop() visibleInventory!: IRatePlanSelection;\n\n  @Event() buttonClicked!: EventEmitter<{ [key: string]: any }>;\n\n  // Determine if the form inputs should be disabled\n  private disableForm(): boolean {\n    const { bookingType, shouldBeDisabled, ratePlan, visibleInventory } = this;\n    if (bookingType === 'EDIT_BOOKING' && shouldBeDisabled) {\n      return false;\n    }\n    return !ratePlan.is_available_to_book || visibleInventory?.visibleInventory === 0;\n  }\n\n  // Update the rate plan selection in the booking store\n  private updateRateplanSelection(props: Partial<IRatePlanSelection>): void {\n    const { roomTypeId, ratePlan } = this;\n    const currentSelections = booking_store.ratePlanSelections;\n\n    booking_store.ratePlanSelections = {\n      ...currentSelections,\n      [roomTypeId]: {\n        ...currentSelections[roomTypeId],\n        [ratePlan.id]: {\n          ...currentSelections[roomTypeId][ratePlan.id],\n          ...props,\n        },\n      },\n    };\n  }\n\n  // Handle changes to select inputs\n  private handleDataChange(key: 'adult_child_offering' | 'rate' | 'totalRooms', evt: Event): void {\n    const value = (evt.target as HTMLInputElement | HTMLSelectElement).value;\n    if (key === 'adult_child_offering') {\n      this.handleVariationChange(value);\n    } else if (key === 'rate') {\n      this.updateRateplanSelection({ view_mode: value as any });\n    } else if (key === 'totalRooms') {\n      reserveRooms({\n        roomTypeId: this.roomTypeId,\n        ratePlanId: this.ratePlan.id,\n        rooms: Number(value),\n      });\n    }\n  }\n\n  // Navigate to the next page for booking\n  private bookProperty(): void {\n    if (this.bookingType === 'BAR_BOOKING') {\n      resetReserved();\n    }\n    this.reserveRoom();\n    this.buttonClicked.emit({ key: 'next' });\n  }\n\n  private reserveRoom() {\n    reserveRooms({\n      roomTypeId: this.roomTypeId,\n      ratePlanId: this.ratePlan.id,\n      rooms: 1,\n      guest: [\n        {\n          last_name: booking_store.guest?.last_name,\n          first_name: booking_store.guest?.first_name,\n          unit: this.roomTypeId === booking_store.guest?.roomtype_id ? booking_store.guest?.unit : null,\n          bed_preference: this.visibleInventory.roomtype.is_bed_configuration_enabled ? booking_store.guest?.bed_preference : null,\n          infant_nbr: this.visibleInventory.selected_variation?.child_nbr > 0 ? booking_store.guest?.infant_nbr : null,\n        },\n      ],\n    });\n  }\n  // Render the rate amount\n  private renderRate(): string {\n    const { visibleInventory } = this;\n    if (!visibleInventory) return '';\n    if (visibleInventory.is_amount_modified) {\n      return visibleInventory.rp_amount.toString();\n    }\n    const { selected_variation, view_mode } = visibleInventory;\n    const amount = view_mode === '001' ? selected_variation?.discounted_amount : selected_variation?.amount_per_night_gross;\n    return amount?.toString() || '';\n  }\n\n  // Format variation for display\n  private formatVariation(variation: Variation): string {\n    if (!variation) return '';\n    const adults = `${variation.adult_nbr} ${variation.adult_nbr === 1 ? locales.entries['Lcz_Adult']?.toLowerCase() : locales.entries['Lcz_Adults']?.toLowerCase()}`;\n    const children =\n      variation.child_nbr > 0\n        ? `${variation.child_nbr} ${variation.child_nbr > 1 ? locales.entries['Lcz_Children']?.toLowerCase() : locales.entries['Lcz_Child']?.toLowerCase()}`\n        : '';\n    return children ? `${adults} ${children}` : adults;\n  }\n\n  // Get tooltip messages for the rate plan\n  private getTooltipMessages(): string | undefined {\n    const { ratePlan, visibleInventory } = this;\n    const selectedVariation = visibleInventory?.selected_variation;\n    if (!selectedVariation) return;\n\n    const matchingVariation = ratePlan.variations?.find(variation => this.formatVariation(variation) === this.formatVariation(selectedVariation));\n\n    if (!matchingVariation) return;\n\n    const cancellationPolicy = matchingVariation.applicable_policies?.find(p => p.type === 'cancelation')?.combined_statement;\n    const guaranteePolicy = matchingVariation.applicable_policies?.find(p => p.type === 'guarantee')?.combined_statement;\n\n    let tooltip = '';\n    if (cancellationPolicy) {\n      tooltip += `<b><u>Cancellation:</u></b> ${cancellationPolicy}<br/>`;\n    }\n    if (guaranteePolicy) {\n      tooltip += `<b><u>Guarantee:</u></b> ${guaranteePolicy}`;\n    }\n    return tooltip || undefined;\n  }\n\n  // Handle variation change when a different option is selected\n  private async handleVariationChange(value: string): Promise<void> {\n    const { ratePlan, roomTypeId } = this;\n    const variations = ratePlan.variations || [];\n    const selectedVariation = variations.find(v => this.formatVariation(v) === value);\n\n    if (!selectedVariation) return;\n\n    updateRoomParams({\n      params: { selected_variation: selectedVariation },\n      ratePlanId: ratePlan.id,\n      roomTypeId,\n    });\n  }\n\n  // Reset reserved rooms in the booking store\n\n  render() {\n    const { ratePlan, bookingType, currency, ratePricingMode, visibleInventory } = this;\n    const isAvailableToBook = ratePlan.is_available_to_book;\n    const disableForm = this.disableForm();\n    const selectedVariation = visibleInventory?.selected_variation;\n    const formattedVariations = ratePlan.variations?.map(v => this.formatVariation(v));\n    // if (!this.visibleInventory) {\n    //   return null;\n    // }\n    return (\n      <Host data-testid={`rp-${this.ratePlan.id}`}>\n        <div\n          class={`d-flex mt-1  p-0 ${\n            isAvailableToBook ? 'flex-column flex-lg-row align-items-lg-center justify-content-lg-between' : 'align-items-center justify-content-between'\n          }`}\n        >\n          <div data-testid={'rp_name'} class=\"rateplan-name-container m-0 p-0  d-flex align-items-center\" style={{ gap: '0.5rem' }}>\n            {bookingType === 'BAR_BOOKING' ? (\n              <p class=\"m-0 p-0\">\n                {/* <span class=\"font-weight-bold\">{ratePlan.name.split('/')[0]}</span> */}\n                <span>\n                  {ratePlan.name.split('/')[1]} {ratePlan.is_non_refundable && <span class=\"non-ref-span\">Non Refundable</span>}\n                </span>\n              </p>\n            ) : (\n              <span>\n                {ratePlan.short_name} {ratePlan.is_non_refundable && <span class=\"non-ref-span\">Non Refundable</span>}\n              </span>\n            )}\n            {isAvailableToBook && <ir-tooltip message={this.getTooltipMessages()}></ir-tooltip>}\n          </div>\n\n          {isAvailableToBook ? (\n            <div class=\"d-md-flex m-md-0  justify-content-md-end align-items-md-center flex-fill rateplan-container\">\n              <div class=\"flex-fill max-w-300 flex-grow-1\">\n                <fieldset class=\"position-relative flex-grow-1 w-100\">\n                  <select\n                    disabled={disableForm}\n                    data-testid=\"adult-child-offering\"\n                    class=\"form-control input-sm flex-grow-1 w-100\"\n                    id={uuidv4()}\n                    onChange={evt => this.handleDataChange('adult_child_offering', evt)}\n                  >\n                    {formattedVariations?.map(variation => (\n                      <option value={variation} selected={this.formatVariation(selectedVariation) === variation}>\n                        {variation}\n                      </option>\n                    ))}\n                  </select>\n                </fieldset>\n              </div>\n              <div class=\"m-0 p-0 mt-1 mt-md-0 d-flex justify-content-between align-items-md-center ml-md-1\">\n                <div class=\"d-flex m-0 p-0 rate-total-night-view mt-0 flex-grow-1\">\n                  <ir-price-input\n                    testId={'amount_input'}\n                    disabled={disableForm}\n                    onTextChange={e =>\n                      this.updateRateplanSelection({\n                        is_amount_modified: true,\n                        rp_amount: Number(e.detail),\n                      })\n                    }\n                    aria-label={`${this.visibleInventory?.roomtype?.name} ${this.ratePlan.short_name}'s rate`}\n                    aria-describedby={`${this.ratePlan.short_name}'s rate`}\n                    class=\"ir-br-input-none price-amount w-100 flex-grow-1\"\n                    currency={currency.symbol}\n                    value={this.renderRate()}\n                    placeholder={locales.entries.Lcz_Rate || 'Rate'}\n                  ></ir-price-input>\n                  <fieldset class=\"position-relative m-0 total-nights-container p-0\">\n                    <select\n                      data-testid={'nigh_stay_select'}\n                      disabled={disableForm}\n                      class=\"form-control input-sm m-0 nightBorder rounded-0 py-0\"\n                      id={uuidv4()}\n                      onChange={evt =>\n                        this.updateRateplanSelection({\n                          view_mode: (evt.target as HTMLSelectElement).value as any,\n                        })\n                      }\n                    >\n                      {ratePricingMode.map(data => (\n                        <option value={data.CODE_NAME} selected={visibleInventory?.view_mode === data.CODE_NAME}>\n                          {data.CODE_VALUE_EN}\n                        </option>\n                      ))}\n                    </select>\n                  </fieldset>\n                </div>\n                {(bookingType === 'PLUS_BOOKING' || bookingType === 'ADD_ROOM') && (\n                  <div class=\"flex-fill mt-0 ml-1 m-0 mt-md-0 p-0\">\n                    <fieldset class=\"position-relative\">\n                      <select\n                        data-testid={'inventory_select'}\n                        disabled={visibleInventory.visibleInventory === 0}\n                        class=\"form-control input-sm\"\n                        id={uuidv4()}\n                        onChange={evt => this.handleDataChange('totalRooms', evt)}\n                      >\n                        {Array.from({ length: (visibleInventory.visibleInventory || 0) + 1 }, (_, i) => i).map(i => (\n                          <option value={i} selected={visibleInventory.reserved === i}>\n                            {i}\n                          </option>\n                        ))}\n                      </select>\n                    </fieldset>\n                  </div>\n                )}\n              </div>\n              {bookingType === 'EDIT_BOOKING' && (\n                <Fragment>\n                  <div class=\"m-0 p-0 ml-md-1 mt-md-0 d-none d-md-block\">\n                    <fieldset class=\"position-relative\">\n                      <input\n                        data-testid={'inventory_radio'}\n                        disabled={disableForm}\n                        type=\"radio\"\n                        name=\"ratePlanGroup\"\n                        value=\"1\"\n                        onChange={() => {\n                          resetReserved();\n                          this.reserveRoom();\n                        }}\n                        checked={visibleInventory.reserved === 1}\n                      />\n                    </fieldset>\n                  </div>\n                  <button\n                    data-testid=\"book_property\"\n                    disabled={disableForm}\n                    type=\"button\"\n                    class=\"btn btn-primary booking-btn mt-lg-0 btn-sm ml-md-1 mt-1 d-md-none\"\n                    onClick={() => {\n                      resetReserved();\n                      this.reserveRoom();\n                      this.bookProperty();\n                    }}\n                  >\n                    {visibleInventory.reserved === 1 ? locales.entries.Lcz_Current : locales.entries.Lcz_Select}\n                  </button>\n                </Fragment>\n              )}\n\n              {(bookingType === 'BAR_BOOKING' || bookingType === 'SPLIT_BOOKING') && (\n                <button\n                  data-testid=\"book\"\n                  disabled={disableForm || (bookingType === 'SPLIT_BOOKING' && this.isBookDisabled)}\n                  type=\"button\"\n                  class=\"btn btn-primary booking-btn mt-md-0 btn-sm ml-md-1 mt-1\"\n                  onClick={() => this.bookProperty()}\n                >\n                  {locales.entries.Lcz_Book}\n                </button>\n              )}\n            </div>\n          ) : (\n            <p class=\"text-danger m-0 p-0\">{locales.entries['Lcz_NotAvailable'] || 'Not available'}</p>\n          )}\n        </div>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n.margin-bottom-8 {\n  margin-bottom: 8px !important;\n}\n","import { RoomType } from '@/models/property';\nimport { getVisibleInventory } from '@/stores/booking.store';\nimport { Component, Host, h, Prop, Event, EventEmitter, State } from '@stencil/core';\n\n@Component({\n  tag: 'igl-room-type',\n  styleUrl: 'igl-room-type.css',\n  scoped: true,\n})\nexport class IglRoomType {\n  @Prop() roomType: RoomType;\n  @Prop() bookingType = 'PLUS_BOOKING';\n  @Prop() dateDifference: number;\n  @Prop() ratePricingMode = [];\n  @Prop() roomInfoId: number | null = null;\n  @Prop() currency;\n  @Prop() initialRoomIds: any;\n  @Prop() isBookDisabled: boolean;\n\n  @State() selectedRooms: number[] = [];\n  @State() totalRooms: number;\n  @State() roomsDistributions: number[] = [];\n\n  @Event() dataUpdateEvent: EventEmitter<{ [key: string]: any }>;\n\n  private validBookingTypes = ['PLUS_BOOKING', 'ADD_ROOM', 'EDIT_BOOKING', 'SPLIT_BOOKING'];\n\n  render() {\n    const isValidBookingType = this.validBookingTypes.includes(this.bookingType);\n\n    return (\n      <Host>\n        {isValidBookingType && this.roomType.rateplans?.length > 0 && <div class=\"font-weight-bold font-medium-1 margin-bottom-8 \">{this.roomType.name}</div>}\n        {this.roomType.rateplans?.map(ratePlan => {\n          if (!!ratePlan.variations) {\n            let shouldBeDisabled = this.roomInfoId && this.roomInfoId === this.roomType.id;\n            // let roomId = -1;\n            // if (shouldBeDisabled && this.initialRoomIds) {\n            //   roomId = this.initialRoomIds.roomId;\n            // }\n            const visibleInventory = getVisibleInventory(this.roomType.id, ratePlan.id);\n            return (\n              <igl-rate-plan\n                // is_bed_configuration_enabled={this.roomType.is_bed_configuration_enabled}\n                // index={index}\n                isBookDisabled={this.isBookDisabled}\n                visibleInventory={visibleInventory}\n                key={`rate-plan-${ratePlan.id}`}\n                ratePricingMode={this.ratePricingMode}\n                class={isValidBookingType ? '' : ''}\n                currency={this.currency}\n                // dateDifference={this.dateDifference}\n                ratePlan={ratePlan}\n                roomTypeId={this.roomType.id}\n                // totalAvailableRooms={this.roomsDistributions[index]}\n                bookingType={this.bookingType}\n                shouldBeDisabled={shouldBeDisabled}\n                // physicalrooms={this.roomType.physicalrooms}\n                // defaultRoomId={roomId}\n              ></igl-rate-plan>\n            );\n          }\n          return null;\n        })}\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n  position: relative;\n}\n.selected {\n  color: #fff;\n  text-decoration: none;\n  background-color: #666ee8;\n}\ninput {\n  width: 100%;\n  position: relative;\n  border-top-left-radius: 0px !important;\n  border-left: 0 !important;\n  border-bottom-left-radius: 0px !important;\n}\nlabel {\n  margin: 0;\n  border-top-right-radius: 0px !important;\n  border-right: 0 !important;\n  border-bottom-right-radius: 0px !important;\n  width: fit-content;\n  display: flex;\n  align-items: center;\n\n  padding-right: 3px !important;\n  justify-content: center;\n  transition: border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\n}\nlabel[data-state='focused'] {\n  border-color: var(--blue);\n}\n\n.combobox {\n  margin: 0;\n  top: 30px;\n  min-width: 100%;\n  width: max-content;\n  display: block;\n  z-index: 10000;\n  padding: 1px;\n  background: white;\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\n  padding: 5px 0;\n  max-height: 250px;\n  overflow-y: auto;\n}\n.dropdown-item {\n  cursor: pointer;\n}\nbutton {\n  all: unset;\n  right: 4px;\n}\n.combobox p,\nspan,\nloader-container {\n  padding: 5px 16px;\n  margin: 0px;\n  margin-top: 2px;\n  width: 100%;\n}\n.combobox p {\n  cursor: pointer;\n}\n.combobox p:hover {\n  background: #f4f5fa;\n}\n\n.combobox p[data-selected],\n.combobox p[data-selected]:hover {\n  color: #fff;\n  text-decoration: none;\n  background-color: #666ee8;\n}\n.loader {\n  width: 14px;\n  height: 14px;\n  border: 2px solid #0f0f0f;\n  border-bottom-color: transparent;\n  border-radius: 50%;\n  display: inline-block;\n  box-sizing: border-box;\n  animation: rotation 1s linear infinite;\n}\n\n@keyframes rotation {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n","import { Component, Host, Prop, State, h, Event, EventEmitter, Listen, Element, Fragment } from '@stencil/core';\nimport { v4 } from 'uuid';\nimport { BookingService } from '../../../services/booking.service';\nimport { IToast } from '../ir-toast/toast';\nimport locales from '@/stores/locales.store';\n\n@Component({\n  tag: 'ir-autocomplete',\n  styleUrl: 'ir-autocomplete.css',\n  scoped: true,\n})\nexport class IrAutocomplete {\n  @Prop() duration: number = 300;\n  @Prop() placeholder: string = '';\n  @Prop() propertyId: number;\n  @Prop() isSplitBooking: boolean = false;\n  @Prop() type: 'email' | 'text' | 'password' | 'number' | 'search' = 'text';\n  @Prop() name: string = '';\n  @Prop() inputId: string = v4();\n  @Prop() required: boolean = false;\n  @Prop() disabled: boolean = false;\n  @Prop() value: string;\n  @Prop() from_date: string = '';\n  @Prop() to_date: string = '';\n  @Prop() danger_border: boolean;\n  @Prop() testId: string;\n\n  @State() inputValue: string = '';\n  @State() data: any[] = [];\n  @State() selectedIndex: number = -1;\n  @State() isComboBoxVisible: boolean = false;\n  @State() isLoading: boolean = true;\n  @State() isItemSelected: boolean;\n  @State() inputFocused: boolean = false;\n\n  @Event({ bubbles: true, composed: true }) comboboxValue: EventEmitter<{ key: string; data: unknown }>;\n  @Event() inputCleared: EventEmitter<null>;\n  @Event({ bubbles: true, composed: true }) toast: EventEmitter<IToast>;\n\n  @Element() el: HTMLElement;\n  private inputRef: HTMLInputElement;\n  private debounceTimer: any;\n  private bookingService = new BookingService();\n  private no_result_found = '';\n  componentWillLoad() {\n    this.no_result_found = locales.entries.Lcz_NoResultsFound;\n  }\n\n  handleKeyDown(event: KeyboardEvent) {\n    const dataSize = this.data.length;\n    const itemHeight = this.getHeightOfPElement();\n    if (dataSize > 0) {\n      switch (event.key) {\n        case 'ArrowUp':\n          event.preventDefault();\n          this.selectedIndex = (this.selectedIndex - 1 + dataSize) % dataSize;\n          this.adjustScrollPosition(itemHeight);\n          break;\n        case 'ArrowDown':\n          event.preventDefault();\n          this.selectedIndex = (this.selectedIndex + 1) % dataSize;\n          this.adjustScrollPosition(itemHeight);\n          break;\n        case 'Enter':\n        case ' ':\n        case 'ArrowRight':\n          event.preventDefault();\n          this.selectItem(this.selectedIndex);\n          break;\n        case 'Escape':\n          this.inputRef?.blur();\n          this.isComboBoxVisible = false;\n          break;\n      }\n    }\n  }\n  getHeightOfPElement() {\n    const combobox = this.el.querySelector('.combobox');\n    if (combobox) {\n      const pItem = combobox.querySelector('p');\n      return pItem ? pItem.offsetHeight : 0;\n    }\n    return 0;\n  }\n  adjustScrollPosition(itemHeight, visibleHeight = 250) {\n    const combobox = this.el.querySelector('.combobox');\n    if (combobox) {\n      const margin = 2;\n      const itemTotalHeight = itemHeight + margin;\n      const selectedPosition = itemTotalHeight * this.selectedIndex;\n      let newScrollTop = selectedPosition - visibleHeight / 2 + itemHeight / 2;\n      newScrollTop = Math.max(0, Math.min(newScrollTop, combobox.scrollHeight - visibleHeight));\n      combobox.scrollTo({\n        top: newScrollTop,\n        behavior: 'auto',\n      });\n    }\n  }\n\n  selectItem(index) {\n    if (this.data[index]) {\n      this.isItemSelected = true;\n      this.comboboxValue.emit({ key: 'select', data: this.data[index] });\n      this.inputValue = '';\n      this.resetCombobox();\n    }\n  }\n\n  debounceFetchData() {\n    clearTimeout(this.debounceTimer);\n    this.debounceTimer = setTimeout(() => {\n      this.fetchData();\n    }, this.duration);\n  }\n\n  async fetchData() {\n    try {\n      this.isLoading = true;\n      let data = [];\n      if (!this.isSplitBooking) {\n        data = await this.bookingService.fetchExposedGuest(this.inputValue, this.propertyId);\n      } else {\n        if (this.inputValue.split(' ').length === 1) {\n          data = await this.bookingService.fetchExposedBookings(this.inputValue, this.propertyId, this.from_date, this.to_date);\n        }\n      }\n      this.data = data;\n      if (!this.isComboBoxVisible) {\n        this.isComboBoxVisible = true;\n      }\n    } catch (error) {\n      console.log('error', error);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  handleInputChange(event: Event) {\n    this.inputValue = (event.target as HTMLInputElement).value;\n    if (this.inputValue) {\n      this.debounceFetchData();\n    } else {\n      clearTimeout(this.debounceTimer);\n      this.resetCombobox(false);\n    }\n  }\n\n  @Listen('click', { target: 'document' })\n  handleDocumentClick(event: MouseEvent) {\n    const target = event.target as HTMLElement;\n    if (!this.el.contains(target)) {\n      this.isComboBoxVisible = false;\n    }\n  }\n  handleBlur() {\n    this.inputFocused = false;\n    setTimeout(() => {\n      if (this.isDropdownItem(document.activeElement)) {\n        return;\n      }\n      if (this.isSplitBooking) {\n        if (!this.isItemSelected) {\n          if (this.data.length > 0) {\n            this.comboboxValue.emit({ key: 'blur', data: this.inputValue });\n          } else {\n            if (this.inputValue !== '') {\n              this.toast.emit({\n                type: 'error',\n                description: '',\n                title: `The Booking #${this.inputValue} is not Available`,\n                position: 'top-right',\n              });\n              this.inputCleared.emit();\n            }\n          }\n          this.inputValue = '';\n          this.resetCombobox();\n        } else {\n          this.isItemSelected = false;\n        }\n      } else {\n        if (!this.isItemSelected) {\n          this.comboboxValue.emit({ key: 'blur', data: this.inputValue });\n          this.inputValue = '';\n          this.resetCombobox();\n        } else {\n          this.isItemSelected = false;\n        }\n      }\n    }, 200);\n  }\n  isDropdownItem(element) {\n    return element && element.closest('.combobox');\n  }\n\n  disconnectedCallback() {\n    clearTimeout(this.debounceTimer);\n    this.inputRef?.removeEventListener('blur', this.handleBlur);\n    this.inputRef?.removeEventListener('click', this.selectItem);\n    this.inputRef?.removeEventListener('keydown', this.handleKeyDown);\n    this.inputRef?.removeEventListener('focus', this.handleFocus);\n  }\n  handleItemKeyDown(event: KeyboardEvent, index: number) {\n    if (event.key === 'Enter' || event.key === ' ' || event.key === 'ArrowRight') {\n      this.selectItem(index);\n      event.preventDefault();\n    } else if (event.key === 'Escape') {\n      this.isComboBoxVisible = false;\n      this.inputRef?.blur();\n      event.preventDefault();\n    } else {\n      return;\n    }\n  }\n  renderDropdown() {\n    if (this.inputValue !== '') {\n      return (\n        <div class={`position-absolute dropdown-menu  rounded combobox`}>\n          {this.data?.map((d, index) => (\n            <p\n              role=\"button\"\n              class=\"dropdown-item\"\n              onKeyDown={e => this.handleItemKeyDown(e, index)}\n              data-selected={this.selectedIndex === index}\n              tabIndex={0}\n              onClick={() => this.selectItem(index)}\n            >\n              {this.isSplitBooking ? (\n                <Fragment>{`${d.booking_nbr} ${d.guest.first_name} ${d.guest.last_name}`}</Fragment>\n              ) : (\n                <div class={'d-flex align-items-center flex-fill'}>\n                  <p class={'p-0 m-0'}>\n                    {`${d.email}`} <span class={'p-0 m-0'}>{` - ${d.first_name} ${d.last_name}`}</span>\n                  </p>\n                </div>\n              )}\n            </p>\n          ))}\n          {this.isLoading && (\n            <div class=\"loader-container d-flex align-items-center justify-content-center\">\n              <div class=\"loader\"></div>\n            </div>\n          )}\n          {this.data.length === 0 && !this.isLoading && <span class={'text-center'}>{this.no_result_found}</span>}\n        </div>\n      );\n    }\n  }\n  handleFocus() {\n    this.isComboBoxVisible = true;\n    this.inputFocused = true;\n  }\n  clearInput() {\n    this.inputValue = '';\n    this.resetCombobox();\n    this.inputCleared.emit(null);\n  }\n  resetCombobox(withblur: boolean = true) {\n    if (withblur) {\n      this.inputRef?.blur();\n    }\n    this.data = [];\n    this.selectedIndex = -1;\n    this.isComboBoxVisible = false;\n  }\n  render() {\n    return (\n      <Host>\n        <div class={'d-flex align-items-center '}>\n          <label data-state={this.inputFocused ? 'focused' : 'blured'} htmlFor={this.inputId} class={`form-control input-sm ${this.danger_border && 'border-danger'}`}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"12\" width=\"12\" viewBox=\"0 0 512 512\">\n              <path\n                fill=\"currentColor\"\n                d=\"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z\"\n              />\n            </svg>\n          </label>\n          <input\n            data-testid={this.testId}\n            required={this.required}\n            disabled={this.disabled}\n            id={this.inputId}\n            onKeyDown={this.handleKeyDown.bind(this)}\n            class={`form-control input-sm flex-full ${this.danger_border && 'border-danger'}`}\n            type={this.type}\n            name={this.name}\n            value={this.value || this.inputValue}\n            placeholder={this.placeholder}\n            onBlur={this.handleBlur.bind(this)}\n            autoComplete=\"none\"\n            onInput={this.handleInputChange.bind(this)}\n            onFocus={this.handleFocus.bind(this)}\n            ref={el => (this.inputRef = el)}\n          />\n          {this.inputValue && (\n            <button type=\"button\" class={'position-absolute d-flex align-items-center justify-content-center '} onClick={this.clearInput.bind(this)}>\n              <p class={'sr-only'}>clear input</p>\n              <svg width=\"15\" height=\"15\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path\n                  d=\"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z\"\n                  fill=\"currentColor\"\n                  fill-rule=\"evenodd\"\n                  clip-rule=\"evenodd\"\n                ></path>\n              </svg>\n            </button>\n          )}\n        </div>\n        {this.isComboBoxVisible && this.renderDropdown()}\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n.combobox-menu {\n  max-height: 200px;\n  overflow: auto;\n}\n","import { ICountry } from '@/models/IBooking';\nimport { Component, Event, EventEmitter, Fragment, Prop, State, Watch, h } from '@stencil/core';\n\n@Component({\n  tag: 'ir-country-picker',\n  styleUrl: 'ir-country-picker.css',\n  scoped: true,\n})\nexport class IrCountryPicker {\n  @Prop() countries: ICountry[] = [];\n  @Prop() country: ICountry;\n  @Prop({ mutable: true }) error: boolean;\n  @Prop() propertyCountry: ICountry;\n  @Prop() label: string;\n  @Prop() testId: string;\n  @Prop() autoValidate: boolean = false;\n\n  @State() inputValue: string;\n  @State() selectedCountry: ICountry;\n  @State() filteredCountries: ICountry[] = [];\n  @State() searching: boolean = false;\n\n  @Event() countryChange: EventEmitter<ICountry>;\n\n  private debounceTimeout: NodeJS.Timeout;\n\n  componentWillLoad() {\n    this.filteredCountries = [...this.countries];\n    if (this.country) {\n      this.inputValue = this.country.name;\n      this.selectedCountry = this.country;\n    }\n  }\n\n  @Watch('country')\n  handleCountryChange(newCountry: ICountry, oldCountry: ICountry) {\n    if (newCountry?.id !== oldCountry?.id) {\n      this.inputValue = this.country?.name;\n      this.selectedCountry = newCountry;\n    }\n  }\n\n  private filterCountries() {\n    if (this.inputValue === '' && this.country) {\n      this.selectCountry(null);\n    }\n    clearTimeout(this.debounceTimeout);\n    this.debounceTimeout = setTimeout(() => {\n      if (!this.inputValue) {\n        this.filteredCountries = [...this.countries];\n      } else {\n        this.filteredCountries = this.countries.filter(c => c.name.toLowerCase().includes(this.inputValue.toLowerCase()));\n      }\n    }, 300);\n  }\n\n  private selectCountry(c: ICountry | null) {\n    this.selectedCountry = c;\n    this.inputValue = c?.name;\n    this.filteredCountries = [...this.countries];\n    this.countryChange.emit(c);\n  }\n  private scrollToSelected() {\n    setTimeout(() => {\n      const dropdownItem = document.querySelector(`.dropdown-item.active`);\n      if (dropdownItem) {\n        dropdownItem.scrollIntoView({ behavior: 'instant', block: 'center' });\n      }\n    }, 100);\n  }\n  render() {\n    const shouldShowPropertyCountry = this.filteredCountries.length > 0 && this.propertyCountry && (!this.searching || (this.searching && this.inputValue === ''));\n    return (\n      <form class=\"dropdown m-0 p-0\">\n        <ir-input-text\n          onTextChange={e => {\n            if (!this.searching) {\n              this.searching = true;\n            }\n            this.inputValue = e.detail;\n            this.filterCountries();\n          }}\n          testId={this.testId}\n          autoValidate={this.autoValidate}\n          label={this.label}\n          error={this.error}\n          placeholder=\"\"\n          class=\"m-0 p-0\"\n          value={this.inputValue}\n          id=\"dropdownMenuCombobox\"\n          data-toggle=\"dropdown\"\n          aria-haspopup=\"true\"\n          aria-expanded=\"false\"\n          onInputFocus={() => this.scrollToSelected()}\n          onInputBlur={() => {\n            this.searching = false;\n            if (this.filteredCountries.length > 0 && this.inputValue && this.inputValue.trim() !== '') {\n              this.selectCountry(this.filteredCountries[0]);\n            }\n          }}\n        ></ir-input-text>\n\n        <div class=\"dropdown-menu combobox-menu\" aria-labelledby=\"dropdownMenuCombobox\">\n          {shouldShowPropertyCountry && (\n            <Fragment>\n              <button\n                type=\"button\"\n                class={`dropdown-item d-flex align-items-center ${this.selectedCountry?.id === this.propertyCountry.id ? 'active' : ''}`}\n                onClick={() => {\n                  this.selectCountry(this.propertyCountry);\n                }}\n              >\n                <img src={this.propertyCountry.flag} alt={this.propertyCountry.name} style={{ aspectRatio: '1', height: '15px', borderRadius: '4px' }} />\n                <p class=\"pl-1 m-0\">{this.propertyCountry.name}</p>\n              </button>\n              <div class=\"dropdown-divider\"></div>\n            </Fragment>\n          )}\n          {this.filteredCountries?.map(c => (\n            <button\n              key={c.id}\n              type=\"button\"\n              class={`dropdown-item d-flex align-items-center ${this.selectedCountry?.id === c.id ? 'active' : ''}`}\n              onClick={() => {\n                this.selectCountry(c);\n              }}\n            >\n              <img src={c.flag} alt={c.name} style={{ aspectRatio: '1', height: '15px', borderRadius: '4px' }} />\n              <p class=\"pl-1 m-0\">{c.name}</p>\n            </button>\n          ))}\n          {this.filteredCountries?.length === 0 && <p class=\"dropdown-item-text\">Invalid Country</p>}\n        </div>\n      </form>\n    );\n  }\n}\n",":host {\n  display: block;\n  width: 100%;\n}\n.date-range-input {\n  width: 100%;\n}\n","import { Component, h, Element, Prop, Event, EventEmitter, Host, Watch, Method } from '@stencil/core';\nimport moment from 'moment';\n\n@Component({\n  tag: 'ir-date-range',\n  styleUrl: 'ir-date-range.css',\n  scoped: true,\n})\nexport class IrDateRange {\n  @Element() private element: HTMLElement;\n  @Prop() fromDate: Date;\n  @Prop() toDate: Date;\n  @Prop() date: Date;\n\n  @Prop() opens: 'left' | 'right' | 'center';\n  @Prop() autoApply: boolean;\n  @Prop() firstDay: number = 1;\n  @Prop() monthNames: string[] = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n  @Prop() daysOfWeek: string[] = ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'];\n  @Prop() format: string = 'MMM DD, YYYY';\n  @Prop() separator: string = ' - ';\n  @Prop() applyLabel: string = 'Apply';\n  @Prop() cancelLabel: string = 'Cancel';\n  @Prop() fromLabel: string = 'Form';\n  @Prop() toLabel: string = 'To';\n  @Prop() customRangeLabel: string = 'Custom';\n  @Prop() weekLabel: string = 'W';\n  @Prop() disabled: boolean = false;\n  @Prop() singleDatePicker = false;\n  @Prop() minDate: string | Date;\n  @Prop() maxDate: string | Date;\n  @Prop() maxSpan: moment.DurationInputArg1 = {\n    days: 240,\n  };\n\n  private openDatePickerTimeout: NodeJS.Timeout;\n\n  @Event() dateChanged: EventEmitter<{\n    start: moment.Moment;\n    end: moment.Moment;\n  }>;\n  dateRangeInput: HTMLElement;\n\n  @Watch('minDate')\n  handleMinDateChange() {\n    $(this.dateRangeInput).data('daterangepicker').remove();\n    this.initializeDateRangePicker();\n  }\n  @Watch('date')\n  datePropChanged() {\n    this.updateDateRangePickerDates();\n  }\n  @Method()\n  async openDatePicker() {\n    this.openDatePickerTimeout = setTimeout(() => {\n      this.dateRangeInput.click();\n    }, 20);\n  }\n  updateDateRangePickerDates() {\n    const picker = $(this.dateRangeInput).data('daterangepicker');\n    if (!picker) {\n      console.error('Date range picker not initialized.');\n      return;\n    }\n\n    // Adjust how dates are set based on whether it's a single date picker or range picker.\n    if (this.singleDatePicker) {\n      const newDate = this.date ? moment(this.date) : moment();\n      picker.setStartDate(newDate);\n      picker.setEndDate(newDate); // For single date picker, start and end date might be the same.\n    } else {\n      const newStartDate = this.fromDate ? moment(this.fromDate) : moment();\n      const newEndDate = this.toDate ? moment(this.toDate) : newStartDate.clone().add(1, 'days');\n      picker.setStartDate(newStartDate);\n      picker.setEndDate(newEndDate);\n    }\n  }\n  componentWillLoad() {\n    if (!document.getElementById('ir-daterangepicker-style')) {\n      const style = document.createElement('style');\n      style.id = 'ir-daterangepicker-style';\n      style.textContent = `\n        .daterangepicker {\n          margin-top: 14px;\n        }\n      `;\n      document.head.appendChild(style);\n    }\n  }\n  componentDidLoad() {\n    this.dateRangeInput = this.element.querySelector('.date-range-input');\n    this.initializeDateRangePicker();\n    this.updateDateRangePickerDates();\n  }\n\n  initializeDateRangePicker() {\n    $(this.dateRangeInput).daterangepicker(\n      {\n        singleDatePicker: this.singleDatePicker,\n        opens: this.opens,\n        startDate: moment(this.fromDate),\n        endDate: moment(this.toDate),\n        minDate: moment(this.minDate || moment(new Date()).format('YYYY-MM-DD')),\n        maxDate: this.maxDate ? moment(this.maxDate) : undefined,\n        maxSpan: this.maxSpan,\n        autoApply: this.autoApply,\n        locale: {\n          format: this.format,\n          separator: this.separator,\n          applyLabel: this.applyLabel,\n          cancelLabel: this.cancelLabel,\n          fromLabel: this.fromLabel,\n          toLabel: this.toLabel,\n          customRangeLabel: this.customRangeLabel,\n          weekLabel: this.weekLabel,\n          daysOfWeek: this.daysOfWeek,\n          monthNames: this.monthNames,\n          firstDay: this.firstDay,\n        },\n      },\n      (start, end) => {\n        this.dateChanged.emit({ start, end });\n      },\n    );\n  }\n  disconnectedCallback() {\n    if (this.openDatePickerTimeout) {\n      clearTimeout(this.openDatePickerTimeout);\n    }\n    $(this.dateRangeInput).data('daterangepicker').remove();\n  }\n  render() {\n    return (\n      <Host>\n        <input class=\"date-range-input\" type=\"button\" disabled={this.disabled} />\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n  font-size: 13.65px !important;\n  width: 100%;\n}\n.mx-01 {\n  --m: 5px;\n  margin-right: var(--m) !important;\n  margin-left: var(--m) !important;\n}\n","import locales from '@/stores/locales.store';\nimport { calculateDaysBetweenDates } from '@/utils/booking';\nimport { Component, Host, Prop, State, Watch, h } from '@stencil/core';\nimport moment from 'moment';\n\n@Component({\n  tag: 'ir-date-view',\n  styleUrl: 'ir-date-view.css',\n  scoped: true,\n})\nexport class IrDateView {\n  @Prop() from_date: string | Date | moment.Moment;\n  @Prop() to_date: string | Date | moment.Moment;\n  @Prop() showDateDifference: boolean = true;\n  @Prop() dateOption: string = 'YYYY-MM-DD';\n\n  @State() dates: { from_date: string; to_date: string; date_difference: number };\n\n  componentWillLoad() {\n    this.initializeDates();\n  }\n\n  @Watch('from_date')\n  handleFromDateChange(newVal: any, oldVal: any) {\n    if (newVal !== oldVal) {\n      this.initializeDates();\n    }\n  }\n\n  @Watch('to_date')\n  handleToDateChange(newVal: any, oldVal: any) {\n    if (newVal !== oldVal) {\n      this.initializeDates();\n    }\n  }\n\n  private initializeDates() {\n    this.convertDate('from_date', this.from_date);\n    this.convertDate('to_date', this.to_date);\n    const fromDate = moment(this.dates.from_date, 'MMM DD, YYYY').format('YYYY-MM-DD');\n    const toDate = moment(this.dates.to_date, 'MMM DD, YYYY').format('YYYY-MM-DD');\n    this.dates.date_difference = calculateDaysBetweenDates(fromDate, toDate);\n  }\n\n  private convertDate(key: 'from_date' | 'to_date', date: string | Date | moment.Moment) {\n    this.dates = this.dates || {\n      from_date: '',\n      to_date: '',\n      date_difference: 0,\n    };\n    if (!date) {\n      return;\n    }\n    if (typeof date === 'string') {\n      this.dates[key] = moment(date, this.dateOption).format('MMM DD, YYYY');\n    } else if (date instanceof Date) {\n      this.dates[key] = moment(date).format('MMM DD, YYYY');\n    } else if (moment.isMoment(date)) {\n      this.dates[key] = date.format('MMM DD, YYYY');\n    } else {\n      console.error('Unsupported date type');\n    }\n  }\n\n  render() {\n    return (\n      <Host class=\"d-flex align-items-center\">\n        <span>{this.dates.from_date}</span>{' '}\n        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"mx-01\" height=\"14\" width=\"14\" viewBox=\"0 0 512 512\">\n          <path\n            fill=\"currentColor\"\n            d=\"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z\"\n          />\n        </svg>\n        <span>\n          {this.dates.to_date}{' '}\n          {this.showDateDifference && (\n            <span class=\"mx-01\">\n              {this.dates.date_difference}\n              {'   '}\n              {this.dates.date_difference > 1 ? ` ${locales.entries.Lcz_Nights}` : ` ${locales.entries.Lcz_Night}`}\n            </span>\n          )}\n        </span>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n\n.input-container {\n  display: flex;\n  align-items: center;\n  padding: 0 !important;\n}\n.input-container:focus-within {\n  border-color: #1e9ff2;\n}\n.border-theme {\n  border-color: #cacfe7;\n}\n.input-container input {\n  flex: 1;\n  border: 0;\n}\n.input-container input:focus {\n  outline: none;\n}\n.dropdown-trigger {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  background: white;\n  border: 0;\n  border-right: 1px solid #cacfe7;\n}\n.ir-dropdown-container {\n  position: absolute;\n  z-index: 1000;\n  bottom: -30px;\n  width: 100%;\n  left: 0;\n  background: white;\n}\n.input-container label {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 0;\n  padding: 0 5px;\n}\n.flag {\n  height: 1rem;\n  aspect-ratio: 4/3;\n  border-radius: 3px;\n}\n.is-invalid {\n  border-color: #ff4961;\n}\n.phone_prefix_label {\n  padding: 0 0.5rem;\n  margin: 0;\n}\n","import { ICountry } from '@/components';\nimport { BookingService } from '@/services/booking.service';\nimport locales from '@/stores/locales.store';\nimport { Component, Element, Event, EventEmitter, Host, Listen, Prop, State, Watch, h } from '@stencil/core';\n\n@Component({\n  tag: 'ir-phone-input',\n  styleUrl: 'ir-phone-input.css',\n  scoped: true,\n})\nexport class IrPhoneInput {\n  @Element() el: HTMLElement;\n  @Prop() label: string;\n  @Prop() value: string = '';\n  @Prop() disabled: boolean = false;\n  @Prop() error: boolean = false;\n  @Prop() token: string;\n  @Prop() language: string;\n  @Prop() default_country: number = null;\n  @Prop() phone_prefix: string | null = null;\n  @Prop() placeholder: string;\n  @Prop({ mutable: true }) countries: ICountry[] = [];\n  @Prop() testId: string;\n\n  @Event() textChange: EventEmitter<{ phone_prefix: string; mobile: string }>;\n  @State() inputValue: string = '';\n  @State() isDropdownVisible: boolean = false;\n  @State() currentCountry: ICountry;\n\n  // private cmp_countries: ICountry[] = [];\n\n  private bookingService: BookingService = new BookingService();\n\n  async componentWillLoad() {\n    if (this.countries.length === 0) {\n      const countries = await this.bookingService.getCountries(this.language);\n      this.countries = countries;\n    }\n    if (this.phone_prefix) {\n      this.setCountryFromPhonePrefix();\n    } else {\n      if (this.default_country) {\n        this.setCurrentCountry(this.default_country);\n      }\n    }\n    this.inputValue = this.value;\n  }\n  @Watch('value')\n  handleValueChange(newValue, oldValue) {\n    if (newValue !== oldValue) {\n      this.inputValue = newValue;\n    }\n  }\n  @Watch('phone_prefix')\n  handlePhoneChange(newValue, oldValue) {\n    if (newValue !== oldValue) {\n      this.setCountryFromPhonePrefix();\n    }\n  }\n  @Listen('click', { target: 'document' })\n  handleDocumentClick(event: MouseEvent) {\n    const target = event.target as HTMLElement;\n    if (!this.el.contains(target)) {\n      this.isDropdownVisible = false;\n    }\n  }\n  handleInputChange(e: InputEvent) {\n    let inputElement = e.target as HTMLInputElement;\n    let inputValue = inputElement.value;\n    inputValue = inputValue.replace(/[^+\\d]+/g, '');\n    inputElement.value = inputValue;\n    this.inputValue = inputValue;\n    this.textChange.emit({ phone_prefix: this.currentCountry?.phone_prefix, mobile: this.inputValue });\n  }\n  private setCountryFromPhonePrefix() {\n    let country = this.countries.find(country => country.phone_prefix === this.phone_prefix);\n    if (!country) {\n      country = this.countries.find(c => c.id.toString() === this.phone_prefix);\n      if (!country) {\n        return;\n      }\n    }\n    this.currentCountry = { ...country };\n    this.textChange.emit({ phone_prefix: this.currentCountry?.phone_prefix, mobile: this.value });\n  }\n  setCurrentCountry(id: number) {\n    const country = this.countries.find(country => country.id === id);\n    if (!country) {\n      throw new Error('Invalid country id');\n    }\n    this.currentCountry = { ...country };\n    this.textChange.emit({ phone_prefix: this.currentCountry?.phone_prefix, mobile: this.value });\n  }\n  render() {\n    return (\n      <Host>\n        <div class=\"form-group mr-0\">\n          {/* <p class=\"mb-0\">Phone</p> */}\n          <div class=\"input-group row m-0 p-0 position-relative\">\n            {this.label && (\n              <div class={`input-group-prepend col-3 p-0 text-dark border-none`}>\n                <label class={`input-group-text  border-theme flex-grow-1 text-dark  `}>{this.label}</label>\n              </div>\n            )}\n            <div class={'form-control  input-container  flex-fill' + (this.error ? ' is-invalid' : '')}>\n              <button type=\"button\" onClick={() => (this.isDropdownVisible = !this.isDropdownVisible)} class=\"dropdown-trigger\">\n                {this.currentCountry ? <img src={this.currentCountry?.flag} class=\"flag\" /> : <p class=\"p-0 m-0 \">{locales.entries.Lcz_Select}</p>}\n                <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\n                  <path d=\"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z\" />\n                </svg>\n              </button>\n\n              <p class={'phone_prefix_label'}>{this.currentCountry?.phone_prefix}</p>\n              <input\n                data-testid={this.testId}\n                maxLength={14}\n                type=\"text\"\n                placeholder={this.placeholder}\n                required\n                value={this.inputValue}\n                disabled={this.disabled}\n                onInput={e => this.handleInputChange(e)}\n              />\n            </div>\n            {this.isDropdownVisible && (\n              <div class=\"ir-dropdown-container\">\n                <ir-combobox\n                  onComboboxValueChange={e => {\n                    this.setCurrentCountry(+e.detail.data);\n                    this.isDropdownVisible = false;\n                  }}\n                  class=\"bg-white\"\n                  autoFocus\n                  placeholder=\"Search country\"\n                  data={this.countries.map(c => ({\n                    id: c.id.toString(),\n                    name: `${c.name} (${c.phone_prefix})`,\n                    image: c.flag,\n                  }))}\n                ></ir-combobox>\n              </div>\n            )}\n          </div>\n          {/* {this.error && <div class=\"invalid-feedback\">Please enter a valid phone number.</div>} */}\n        </div>\n      </Host>\n    );\n  }\n}\n",":host {\n  width: var(--ir-spinner-size, 1.25rem);\n  height: var(--ir-spinner-size, 1.25rem);\n  border: var(--ir-spinner-border-width, 2.5px) solid var(--ir-spinner-color, #3f3f3f);\n  border-bottom-color: transparent;\n  border-radius: 50%;\n  display: inline-block;\n  box-sizing: border-box;\n  animation: rotation 1s linear infinite;\n}\n\n@keyframes rotation {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n","import { Component, Element, Host, Prop, Watch, h } from '@stencil/core';\n\n@Component({\n  tag: 'ir-spinner',\n  styleUrl: 'ir-spinner.css',\n  shadow: true,\n})\nexport class IrSpinner {\n  @Element() el: HTMLIrSpinnerElement;\n\n  @Prop() size: number;\n  @Prop() borderWidth: number;\n  @Prop() unit: 'px' | 'rem' = 'rem';\n  @Prop() color: string;\n\n  componentWillLoad() {\n    this.initStyles();\n  }\n  @Watch('size')\n  handleSpinnerSizeChange() {\n    this.initStyles();\n  }\n  @Watch('borderWidth')\n  handleSpinnerBorderWidthChange() {\n    this.initStyles();\n  }\n  @Watch('unit')\n  handleSpinnerUnitChange() {\n    this.initStyles();\n  }\n  @Watch('color')\n  handleSpinnerColorChange() {\n    this.initStyles();\n  }\n  private initStyles() {\n    if (this.size) {\n      this.applyCssElement(`${this.size}${this.unit}`, '--ir-spinner-size');\n    }\n    if (this.borderWidth) {\n      this.applyCssElement(`${this.borderWidth}${this.unit}`, '--ir-spinner-size');\n    }\n    if (this.color) {\n      this.applyCssElement(`${this.color}`, '--ir-spinner-color');\n    }\n  }\n  private applyCssElement(value: string, key: '--ir-spinner-color' | '--ir-spinner-border-width' | '--ir-spinner-size' | (string & {})) {\n    this.el.style.setProperty(key, value);\n  }\n  render() {\n    return <Host></Host>;\n  }\n}\n",":host {\n  position: relative;\n}\n.tooltip-icon {\n  margin: 0 5px;\n  padding: 0;\n}\n/* p {\n  position: absolute;\n  top: 10px;\n  background-color: antiquewhite;\n  border-radius: 7px;\n  padding: 10px 15px;\n  z-index: 1000000;\n} */\n.tooltip-inner-custom {\n  min-width: max-content !important;\n}\n","import { Component, Host, Prop, State, h } from '@stencil/core';\n\n@Component({\n  tag: 'ir-tooltip',\n  styleUrl: 'ir-tooltip.css',\n  scoped: true,\n})\nexport class IrTooltip {\n  @Prop({ reflect: true }) message: string;\n  @Prop() withHtml: boolean = true;\n  @Prop() customSlot: boolean = false;\n  @Prop() containerStyle: { [key: string]: string };\n\n  @State() open: boolean;\n  tooltipTimeout: any;\n  toggleOpen(shouldOpen: boolean) {\n    if (this.tooltipTimeout) {\n      clearTimeout(this.tooltipTimeout);\n    }\n\n    if (shouldOpen) {\n      this.tooltipTimeout = setTimeout(() => {\n        this.open = true;\n      }, 300);\n    } else {\n      this.open = false;\n    }\n  }\n  render() {\n    return (\n      <Host class=\"m-0 p-0\">\n        <span\n          style={this.containerStyle}\n          class={'m-0 p-0 d-flex align-items-center justify-content-center'}\n          onMouseEnter={() => this.toggleOpen(true)}\n          onMouseLeave={() => this.toggleOpen(false)}\n        >\n          {/* <i\n            class=\"ml-1 ft-info\"\n            data-toggle=\"tooltip\"\n            data-placement=\"top\"\n            data-original-title=\"Info popup\"\n          ></i> */}\n\n          {!this.customSlot ? (\n            // <svg data-toggle=\"tooltip\" data-placement=\"top\" xmlns=\"http://www.w3.org/2000/svg\" height=\"16\" width=\"16\" class=\"tooltip-icon\" viewBox=\"0 0 512 512\">\n            //   <path\n            //     fill=\"#6b6f82\"\n            //     d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z\"\n            //   />\n            // </svg>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class={'m-0 p-0'} height=\"16\" width=\"16\" viewBox=\"0 0 512 512\">\n              <path\n                fill=\"#6b6f82\"\n                d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z\"\n              />\n            </svg>\n          ) : (\n            <slot name=\"tooltip-trigger\"></slot>\n          )}\n        </span>\n        {this.open && (\n          <div class=\"tooltip bottom show position-absolute\" role=\"tooltip\">\n            <div class=\"tooltip-arrow\"></div>\n            <div class={`tooltip-inner fit ${this.customSlot && 'tooltip-inner-custom'}`}>\n              <span innerHTML={this.message}></span>\n            </div>\n          </div>\n        )}\n      </Host>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}