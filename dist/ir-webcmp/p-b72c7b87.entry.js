import{r as t,c as i,h as e,H as s}from"./p-bdbf1008.js";import{v as n}from"./p-4ed69de7.js";import{i as o}from"./p-ac6e77ff.js";import{a as r}from"./p-06203439.js";import{i as a,a as c}from"./p-4e743066.js";import{T as h,M as d}from"./p-dfa14c12.js";import{c as l}from"./p-a4180e42.js";const u=".sc-ir-button-h{--icon-button-color:#6b6f82;--icon-button-hover-color:#104064}.button-icon.sc-ir-button{padding:0;margin-top:0}.button-icon[data-state='loading'].sc-ir-button{display:none}.button-text.sc-ir-button{padding:0 5px}.bounce-3.sc-ir-button{animation:bounce 1s 1}.ir-button-class.sc-ir-button{display:inline-flex !important;justify-content:center;align-items:center;box-sizing:border-box}.icon-button.sc-ir-button{all:unset;box-sizing:border-box;border-radius:0.25rem;display:inline-flex;align-items:center;justify-content:center;color:var(--icon-button-color);padding:0.2rem;transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.icon-button.sc-ir-button:hover{color:var(--icon-button-hover-color)}.icon-button.sc-ir-button:hover.hovered_bg{background:var('--ir-icon-bg-hover', #f6f6f6)}.icon-button.sc-ir-button:disabled{pointer-events:none}.icon-loader.sc-ir-button{margin:0;padding:0;width:var(--icon-size, 1.25rem);height:var(--icon-size, 1.25rem);border-radius:50%;background:radial-gradient(farthest-side, var(--icon-button-color) 94%, #0000) top/2px 2px no-repeat, conic-gradient(#0000 30%, var(--icon-button-color));-webkit-mask:radial-gradient(farthest-side, #0000 calc(100% - 2px), var(--icon-button-color) 0);mask:radial-gradient(farthest-side, #0000 calc(100% - 2px), var(--icon-button-color) 0);animation:l13 1s infinite linear}.btn_loader.sc-ir-button{width:15px;height:10px;--c:no-repeat linear-gradient(#ffffff 0 0);background:var(--c) 0% 50%, var(--c) 50% 50%, var(--c) 100% 50%;background-size:20% 100%;animation:l1 1s infinite linear}@keyframes l13{100%{transform:rotate(1turn)}}@keyframes l1{0%{background-size:20% 100%, 20% 100%, 20% 100%}33%{background-size:20% 10%, 20% 100%, 20% 100%}50%{background-size:20% 100%, 20% 10%, 20% 100%}66%{background-size:20% 100%, 20% 100%, 20% 10%}100%{background-size:20% 100%, 20% 100%, 20% 100%}}@keyframes bounce{0%,100%{transform:scale(1);animation-timing-function:cubic-bezier(0.8, 0, 1, 1)}50%{transform:scale(1.2);animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}}@keyframes ping{75%,100%{transform:scale(1.2)}}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const f=u;const b=class{constructor(e){t(this,e);this.clickHanlder=i(this,"clickHanlder",7);this.name=undefined;this.text=undefined;this.icon="ft-save";this.btn_color="primary";this.size="md";this.textSize="md";this.btn_block=true;this.btn_disabled=false;this.btn_type="button";this.isLoading=false;this.btn_styles=undefined;this.btn_id=n();this.variant="default";this.icon_name=undefined;this.visibleBackgroundOnHover=false;this.iconPostion="left";this.icon_style=undefined}handleButtonAnimation(t){if(!this.buttonEl||t.detail!==this.btn_id){return}t.stopImmediatePropagation();t.stopPropagation();this.buttonEl.classList.remove("bounce-3");this.buttonEl.classList.add("bounce-3")}render(){if(this.variant==="icon"){return e("button",{id:this.btn_id,class:`icon-button ${this.btn_styles} ${this.visibleBackgroundOnHover?"hovered_bg":""}`,ref:t=>this.buttonEl=t,onClick:()=>this.clickHanlder.emit(),type:this.btn_type,disabled:this.btn_disabled},this.isLoading?e("span",{class:"icon-loader"}):e("ir-icons",{name:this.icon_name}))}let t=this.btn_block?"btn-block":"";return e("button",{id:this.btn_id,ref:t=>this.buttonEl=t,onClick:()=>this.clickHanlder.emit(),class:`btn btn-${this.btn_color} ${this.btn_styles} ir-button-class  btn-${this.size} text-${this.textSize} ${t}`,type:this.btn_type,disabled:this.btn_disabled||this.isLoading},this.icon_name&&this.iconPostion==="left"&&e("ir-icons",{name:this.icon_name,style:this.icon_style}),this.text&&e("span",{class:"button-text m-0"},this.text),this.isLoading?e("div",{class:"btn_loader m-0 p-0"}):this.iconPostion==="right"&&e("ir-icons",{style:this.icon_style,name:this.icon_name}))}};b.style=f;const p=[{isCSS:true,link:"https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i%7CQuicksand:300,400,500,700"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/bootstrap.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/bootstrap-extended.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/colors.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/core/menu/menu-types/horizontal-menu.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/core/colors/palette-gradient.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/components.css"},{isCSS:true,link:"https://x.igloorooms.com/assets/css/style.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/icheck.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/custom.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/pages/login-register.css"}];const m=class{constructor(i){t(this,i);this.extraResources="";this.resources=p}componentWillLoad(){this.parseRefs()}componentDidLoad(){this.initializeStyles()}hrefsChanged(){this.parseRefs();this.initializeStyles()}parseRefs(){if(this.extraResources!=="")this.resources.push(JSON.parse(this.extraResources))}appendTag(t,i){const e=document.createElement(t);const s=[];Object.keys(i).forEach((t=>{e.setAttribute(t,i[t]);s.push(`[${t}="${i[t]}"]`)}));const n=`${t}${s.join("")}`;const o=document.querySelector(n);if(!o){document.head.appendChild(e)}}initializeStyles(){this.resources.forEach((t=>{if(t.isCSS){this.appendTag("link",{href:t.link,rel:"stylesheet",type:"text/css"})}if(t.isJS){this.appendTag("script",{src:t.link})}}))}render(){return e(s,{key:"4b05bf8442c9ef64e03cbac43233d7a1c56bd21d"},e("slot",{key:"b10cbefb529076f1e5187618f77d41cd88780ad2"}))}static get watchers(){return{extraResources:["hrefsChanged"]}}};const g=".sc-ir-icon-h{margin:0;padding:0}.icon-button.sc-ir-icon{all:unset;margin:0;padding:0;color:#6b6f82}.icon-button.sc-ir-icon:hover{cursor:pointer;color:#104064}";const x=g;const v=class{constructor(e){t(this,e);this.iconClickHandler=i(this,"iconClickHandler",7);this.icon="ft-check"}render(){return e("button",{key:"d85e9d902a83ae53bbd4c5884f9dd7e7c71304cf",class:"icon-button",onClick:()=>this.iconClickHandler.emit()},e("slot",{key:"8166b35b8b245a962995d48dfd6f9e56426ffc43",name:"icon"}))}};v.style=x;const y=".sc-ir-icons-h{display:block}.icon.sc-ir-icons{height:var(--icon-size, 1.25rem);width:var(--icon-size, 1.25rem);margin:0;padding:0}";const k=y;const w=class{constructor(i){t(this,i);this.name=undefined;this.svgClassName=undefined}render(){const t=o[this.name]||null;if(!t){return null}return e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:t.viewBox,class:`icon ${this.svgClassName}`},e("path",{fill:"currentColor",d:t.d}))}};w.style=k;const C=".sc-ir-input-text-h{margin:0;padding:0}.border-theme.sc-ir-input-text{border:1px solid #cacfe7}.icon-container.sc-ir-input-text{color:#3b4781;border:1px solid #cacfe7;font-size:0.975rem;height:2rem;background:rgb(255, 255, 255);padding-right:0 !important;border-right:0;border-top-right-radius:0;border-bottom-right-radius:0;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}input.sc-ir-input-text:focus{border-color:#1e9ff2 !important}.input-container.sc-ir-input-text{display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;flex:1}.input-container.sc-ir-input-text input.sc-ir-input-text{padding-left:5px !important;padding-right:5px !important;border-left:0;border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.icon-container[data-state='focus'].sc-ir-input-text{border-color:var(--blue)}.icon-container[data-disabled].sc-ir-input-text{background-color:#eceff1;border-color:rgba(118, 118, 118, 0.3)}.danger-border.sc-ir-input-text{border-color:var(--red)}";const _=C;const S=class{constructor(e){t(this,e);this.textChange=i(this,"textChange",7);this.inputBlur=i(this,"inputBlur",7);this.name=undefined;this.value=undefined;this.label="<label>";this.placeholder="<placeholder>";this.inputStyles="";this.required=undefined;this.LabelAvailable=true;this.readonly=false;this.type="text";this.submited=false;this.inputStyle=true;this.size="md";this.textSize="md";this.labelPosition="left";this.labelBackground=null;this.labelColor="dark";this.labelBorder="theme";this.labelWidth=3;this.variant="default";this.disabled=false;this.error=false;this.valid=undefined;this.initial=true;this.inputFocused=false;this.isError=false}connectedCallback(){}disconnectedCallback(){}watchHandler(t){if(t!==""&&this.required){this.valid=true}}watchHandler2(t){if(t&&this.required){this.initial=false}}handleAriaInvalidChange(t){if(t==="true"){this.isError=true}else{this.isError=false}}handleInputChange(t){this.initial=false;if(this.required){this.valid=t.target.checkValidity();const i=t.target.value;this.textChange.emit(i)}else{this.textChange.emit(t.target.value)}}render(){console.log(this.isError);const t=n();if(this.variant==="icon"){return e("fieldset",{class:"position-relative has-icon-left input-container"},e("label",{htmlFor:t,class:"input-group-prepend bg-white m-0"},e("span",{"data-disabled":this.disabled,"data-state":this.inputFocused?"focus":"",class:`input-group-text icon-container bg-white ${(this.error||this.isError)&&"danger-border"}`,id:"basic-addon1"},e("slot",{name:"icon"}))),e("input",{type:this.type,onFocus:()=>this.inputFocused=true,required:this.required,onBlur:t=>{this.inputFocused=false;this.inputBlur.emit(t)},disabled:this.disabled,class:`form-control bg-white pl-0 input-sm rate-input py-0 m-0 rateInputBorder ${(this.error||this.isError)&&"danger-border"}`,id:t,value:this.value,placeholder:this.placeholder,onInput:this.handleInputChange.bind(this)}))}let i="form-control";let s=e("div",{class:`input-group-prepend col-${this.labelWidth} p-0 text-${this.labelColor}`},e("label",{class:`input-group-text ${this.labelPosition==="right"?"justify-content-end":this.labelPosition==="center"?"justify-content-center":""} ${this.labelBackground?"bg-"+this.labelBackground:""} flex-grow-1 text-${this.labelColor} border-${this.labelBorder==="none"?0:this.labelBorder} `},this.label,this.required?"*":""));if(!this.LabelAvailable){s=""}if(this.inputStyle===false){i=""}if(this.required&&!this.valid&&!this.initial){i=`${i} border-danger`}return e("div",{class:"form-group"},e("div",{class:"input-group row m-0"},s,e("input",{readOnly:this.readonly,type:this.type,class:`${i} ${this.error||this.isError?"border-danger":""} form-control-${this.size} text-${this.textSize} col-${this.LabelAvailable?12-this.labelWidth:12} ${this.readonly&&"bg-white"} ${this.inputStyles}`,onBlur:t=>this.inputBlur.emit(t),placeholder:this.placeholder,value:this.value,onInput:this.handleInputChange.bind(this),required:this.required,disabled:this.disabled})))}static get watchers(){return{value:["watchHandler"],submited:["watchHandler2"],"aria-invalid":["handleAriaInvalidChange"]}}};S.style=_;const $=".page-loader.sc-ir-interceptor{width:1.25rem;height:1.25rem;border:2.5px solid #3f3f3f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}.loaderContainer.sc-ir-interceptor{padding:20px;display:flex;align-items:center;justify-content:center;border-radius:5px;background:white}.loadingScreenContainer.sc-ir-interceptor{position:fixed;top:0;left:0;height:100vh;width:100vw;z-index:100000;background:rgba(0, 0, 0, 0.2);pointer-events:all;display:flex;align-items:center;justify-content:center}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const j=$;const z=class{constructor(e){t(this,e);this.toast=i(this,"toast",7);this.isShown=false;this.isLoading=false;this.isUnassignedUnit=false;this.endpointsCount=0;this.isPageLoadingStoped=null;this.handledEndpoints=["/Get_Exposed_Calendar","/ReAllocate_Exposed_Room","/Get_Exposed_Bookings"]}handleStopPageLoading(t){this.isLoading=false;this.isPageLoadingStoped=t.detail}componentWillLoad(){this.setupAxiosInterceptors()}setupAxiosInterceptors(){r.interceptors.request.use(this.handleRequest.bind(this),this.handleError.bind(this));r.interceptors.response.use(this.handleResponse.bind(this),this.handleError.bind(this))}extractEndpoint(t){return t.split("?")[0]}isHandledEndpoint(t){return this.handledEndpoints.includes(t)}handleRequest(t){const i=this.extractEndpoint(t.url);a[i]="pending";if(this.isHandledEndpoint(i)&&this.isPageLoadingStoped!==i){if(i!=="/Get_Exposed_Calendar"){this.isLoading=true}else{if(this.endpointsCount>0){this.isLoading=true}}}if(i==="/Get_Exposed_Calendar"){this.endpointsCount=this.endpointsCount+1}return t}handleResponse(t){var i;const e=this.extractEndpoint(t.config.url);if(this.isHandledEndpoint(e)){this.isLoading=false;this.isPageLoadingStoped=null}a[e]="done";if((i=t.data.ExceptionMsg)===null||i===void 0?void 0:i.trim()){this.handleError(t.data.ExceptionMsg);throw new Error(t.data.ExceptionMsg)}return t}handleError(t){this.toast.emit({type:"error",title:t,description:"",position:"top-right"});return Promise.reject(t)}render(){return e(s,{key:"bd77863fb2417b421303fd3328da5cfd962a647e"},this.isLoading&&!this.isPageLoadingStoped&&e("div",{key:"ef121919a3a9775c6591a0efa2a70c9d404248df",class:"loadingScreenContainer"},e("div",{key:"3797ab7cfc106f2479dd40542f4b8f9923b3a8e5",class:"loaderContainer"},e("span",{key:"f6eccea51dc2ddd0431b016e0e12c409838c5abc",class:"page-loader"}))))}};z.style=j;const O=".sc-ir-loading-screen-h{display:fixed;height:100vh;width:100vw;z-index:1000;top:0;left:0;display:flex;align-items:center;justify-content:center;background:white}.loader.sc-ir-loading-screen{width:1.25rem;height:1.25rem;border:2.5px solid #3f3f3f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}.loaderContainer.sc-ir-loading-screen{position:absolute;z-index:100001;padding:20px;top:50%;left:50%;transform:translate(-50%, -50%);background:white;display:flex;align-items:center;justify-content:center;gap:20px;border-radius:5px}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const L=O;const E=class{constructor(i){t(this,i);this.message=""}render(){return e(s,{key:"9ea9a9c4d416d60d60e2bffe89c4448ab4dfae86"},e("span",{key:"3c2dd5d8e325249e80da46e7d772dc6cadfd8c1b",class:"loader"}))}};E.style=L;class I extends h{async GetExposedPaymentMethods(){const t=this.getToken();if(!t){throw new d}const{data:i}=await r.post(`/Get_Exposed_Payment_Methods?Ticket=${t}`);if(i.ExceptionMsg!==""){throw new Error(i.ExceptionMsg)}const e=i.My_Result;return e}async GetPropertyPaymentMethods(t){const i=this.getToken();if(!i){throw new d}const{data:e}=await r.post(`/Get_Property_Payment_Methods?Ticket=${i}`,{property_id:t,is_return_sensitive_data:true});if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}const s=e.My_Result;return s}async GetExposedLanguages(){const t=this.getToken();if(!t){throw new d}const{data:i}=await r.post(`/Get_Exposed_Languages?Ticket=${t}`);if(i.ExceptionMsg!==""){throw new Error(i.ExceptionMsg)}const e=i.My_Result;return e}async HandlePaymentMethod(t){const i=this.getToken();if(!i){throw new d}const{data:e}=await r.post(`/Handle_Payment_Method?Ticket=${i}`,t);if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}const s=e.My_Result;return s}}const T={selectedOption:null,token:null,languages:null};const{state:H}=l(T);const P=".sc-ir-option-details-h{display:block}.money-transfer-form.sc-ir-option-details{min-height:200px !important}";const M=P;const R=class{constructor(e){t(this,e);this.closeModal=i(this,"closeModal",7);this.paymentOptionService=new I;this.propertyId=undefined;this.localizationIdx=undefined;this.selectedLanguage=null;this.invalid=false}async componentWillLoad(){this.paymentOptionService.setToken(H.token);if(!H.languages){const t=await this.paymentOptionService.GetExposedLanguages();H.languages=t}this.selectedLanguage=H.languages[0].id.toString();this.localizationIdx=H.selectedOption.code==="005"?H.selectedOption.localizables.findIndex((t=>t.language.id.toString()===this.selectedLanguage)):null}async saveOption(t){var i;t.preventDefault();t.stopPropagation();t.stopImmediatePropagation();let e=Object.assign(Object.assign({},H.selectedOption),{property_id:this.propertyId,is_active:true});if((e===null||e===void 0?void 0:e.code)==="005"){const t=(i=e.localizables.find((t=>t.language.code.toLowerCase()==="en")))===null||i===void 0?void 0:i.description;console.log(t);if(!t||t.trim()===""){this.invalid=true;return}}if(e.is_payment_gateway){e.display_order=0;const t=e.data.some((t=>!t.value||t.value===""));if(t){this.invalid=true;return}}await this.paymentOptionService.HandlePaymentMethod(e);this.closeModal.emit(e)}handleSelectChange(t){t.stopImmediatePropagation();t.stopPropagation();this.selectedLanguage=t.detail;this.localizationIdx=H.selectedOption.code==="005"?H.selectedOption.localizables.findIndex((t=>t.language.id.toString()===this.selectedLanguage)):null}handleTextAreaChange(t){const i=t.detail;if(i.trim()!==""&&this.invalid){this.invalid=false}const e=[...H.selectedOption.localizables];e[this.localizationIdx]=Object.assign(Object.assign({},e[this.localizationIdx]),{description:i});H.selectedOption=Object.assign(Object.assign({},H.selectedOption),{localizables:e})}handlePaymentGatewayInfoChange(t,i){const e=t.detail;const s=[...H.selectedOption.data];s[i]=Object.assign(Object.assign({},s[i]),{value:e});H.selectedOption=Object.assign(Object.assign({},H.selectedOption),{data:s})}render(){var t,i;if(!H.selectedOption){return null}return e(s,null,e("form",{class:"p-1 mt-2",onSubmit:this.saveOption.bind(this)},H.selectedOption.code==="005"?e("div",null,e("div",{class:"mb-1"},e("ir-select",{selectedValue:this.selectedLanguage,LabelAvailable:false,showFirstOption:false,data:H.languages.map((t=>({text:t.description,value:t.id.toString()})))})),e("div",null,this.invalid&&e("p",{class:"text-danger p-0 m-0"},"You must fill out the english field."),e("ir-textarea",{placeholder:"","aria-invalid":this.invalid?"true":"false",textareaClassname:"money-transfer-form",label:"",onTextChange:this.handleTextAreaChange.bind(this),value:(t=H.selectedOption.localizables[this.localizationIdx].description)!==null&&t!==void 0?t:""}))):e("div",null,(i=H.selectedOption.data)===null||i===void 0?void 0:i.map(((t,i)=>{var s,n;return e("fieldset",{key:t.key},e("ir-input-text",{value:t.value,onTextChange:t=>this.handlePaymentGatewayInfoChange(t,i),id:`input_${t.key}`,label:t.key,placeholder:"","aria-invalid":this.invalid&&(t.value===null||((n=(s=t.value)!==null&&s!==void 0?s:"")===null||n===void 0?void 0:n.trim())==="")?"true":"false"}))}))),e("div",{class:"d-flex flex-column flex-sm-row mt-3"},e("ir-button",{onClick:()=>this.closeModal.emit(null),btn_styles:"justify-content-center",class:`mb-1 mb-sm-0 flex-fill mr-sm-1`,icon:"",text:"Cancel",btn_color:"secondary",btn_type:"button"}),e("ir-button",{btn_type:"submit",btn_styles:"justify-content-center align-items-center",class:"m-0 flex-fill text-center",icon:"",isLoading:c("/Handle_Payment_Method"),text:"Save",btn_color:"primary"}))))}};R.style=M;const A=".sc-ir-payment-option-h{display:block}.dataTable.sc-ir-payment-option{width:max-content}.po-description.sc-ir-payment-option{padding-right:2rem !important}.super-high-index.sc-ir-payment-option{background:#0000004c;position:fixed;inset:0;z-index:999999999999999;pointer-events:none}";const G=A;const B=class{constructor(i){t(this,i);this.paymentOptionService=new I;this.baseurl=undefined;this.propertyid=undefined;this.ticket=undefined;this.paymentOptions=[];this.isLoading=false;this.selectedOption=null}componentWillLoad(){r.defaults.baseURL=this.baseurl;if(this.ticket){this.init()}}handleTokenChange(t,i){if(t!==i){this.init()}}init(){this.initServices();this.fetchData()}handleCloseModal(t){var i,e;t.stopPropagation();t.stopImmediatePropagation();console.log(t.detail);if(t.detail){const i=t.detail;this.modifyPaymentList(i);if(i.is_payment_gateway){this.propertyOptionsById.set(i.id,i)}else{this.propertyOptionsByCode.set(i.code,i)}}else{if(!this.propertyOptionsByCode.has((i=H.selectedOption)===null||i===void 0?void 0:i.code)&&!this.propertyOptionsById.has((e=H.selectedOption)===null||e===void 0?void 0:e.id)){this.modifyPaymentList(Object.assign(Object.assign({},H.selectedOption),{is_active:false}))}}H.selectedOption=null}async fetchData(){try{this.isLoading=true;const[t,i]=await Promise.all([this.paymentOptionService.GetExposedPaymentMethods(),this.paymentOptionService.GetPropertyPaymentMethods(this.propertyid)]);this.propertyOptionsById=new Map(i.map((t=>[t.id,t])));this.propertyOptionsByCode=new Map(i.map((t=>[t.code,t])));this.paymentOptions=t===null||t===void 0?void 0:t.map((t=>{if(t.is_payment_gateway){return this.propertyOptionsById.get(t.id)||t}return this.propertyOptionsByCode.get(t.code)||t}))}catch(t){console.log(t)}finally{this.isLoading=false}}initServices(){H.token=this.ticket;this.paymentOptionService.setToken(this.ticket)}modifyPaymentList(t){this.paymentOptions=[...this.paymentOptions.map((i=>{if(t.is_payment_gateway&&i.id===t.id||t.code==="005"&&i.code==="005"){return t}return i}))]}async handleCheckChange(t,i){var e;t.stopPropagation();t.stopImmediatePropagation();const s=t.detail;const n=Object.assign(Object.assign({},i),{is_active:s,property_id:this.propertyid});if(i.code!=="005"&&!i.is_payment_gateway){await this.paymentOptionService.HandlePaymentMethod(n);this.modifyPaymentList(n);return}if(!this.showEditButton(i,true)){this.modifyPaymentList(n);return}console.log("here");if(s&&((e=i.data)===null||e===void 0?void 0:e.some((t=>t.value===null)))){H.selectedOption=n}else{await this.paymentOptionService.HandlePaymentMethod(n)}this.modifyPaymentList(n)}showEditButton(t,i=false){var e;if(!t.is_active&&!i){return false}return t.code==="005"||t.is_payment_gateway&&((e=t.data)===null||e===void 0?void 0:e.length)>0}render(){var t,i;if(this.isLoading||this.paymentOptions.length==0){return e("div",{class:"h-screen bg-white d-flex flex-column align-items-center justify-content-center"},e("ir-loading-screen",null))}return e(s,{class:"p-2"},e("ir-interceptor",null),e("div",{class:"card p-1 flex-fill m-0"},e("div",{class:"d-flex align-items-center mb-2"},e("div",{class:"p-0 m-0 mr-1"},e("ir-icons",{name:"credit_card"})),e("h3",{class:"m-0 p-0"}," Payment Options")),e("table",{class:"table table-striped table-bordered no-footer dataTable"},e("thead",null,e("tr",null,e("th",{scope:"col",class:"text-left"},"Payment method"),e("th",{scope:"col"},"Status"),e("th",{scope:"col",class:"actions-theader"},"Action"))),e("tbody",{class:""},(t=this.paymentOptions)===null||t===void 0?void 0:t.map((t=>e("tr",{key:t.id},e("td",{class:"text-left po-description"},t.description),e("td",null,e("ir-switch",{checked:t.is_active,onCheckChange:i=>this.handleCheckChange(i,t)})),e("td",null,this.showEditButton(t)&&e("ir-button",{variant:"icon",icon_name:"edit",onClickHanlder:()=>{H.selectedOption=t}})))))))),e("ir-sidebar",{onIrSidebarToggle:()=>{H.selectedOption=null},label:`${(i=H.selectedOption)===null||i===void 0?void 0:i.description} Information`,open:H.selectedOption!==null},H.selectedOption&&e("ir-option-details",{propertyId:this.propertyid,slot:"sidebar-body"})))}static get watchers(){return{ticket:["handleTokenChange"]}}};B.style=G;const W=".border-theme.sc-ir-select{border:1px solid #cacfe7}@keyframes bounce{0%,100%{transform:scale(1);animation-timing-function:cubic-bezier(0.8, 0, 1, 1)}50%{transform:scale(1.2);animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}}.bounce-3.sc-ir-select{animation:bounce 1s 1}";const D=W;const q=class{constructor(e){t(this,e);this.selectChange=i(this,"selectChange",7);this.count=0;this.name=undefined;this.data=undefined;this.label="<label>";this.selectStyles=undefined;this.selectContainerStyle=undefined;this.selectedValue=null;this.required=undefined;this.LabelAvailable=true;this.firstOption="Select";this.selectStyle=true;this.showFirstOption=true;this.submited=false;this.size="md";this.textSize="md";this.labelPosition="left";this.labelBackground=null;this.labelColor="dark";this.labelBorder="theme";this.labelWidth=3;this.select_id=n();this.initial=true;this.valid=false}watchHandler(t){if(t!==null&&this.required){this.valid=true}}watchHandler2(t){if(t&&this.required){this.initial=false}}handleButtonAnimation(t){console.log(t.detail,this.select_id,t.detail===this.select_id);if(!this.selectEl||t.detail!==this.select_id){return}console.log("first1");t.stopImmediatePropagation();t.stopPropagation();this.selectEl.classList.add("border-danger")}componentwillload(){}disconnectedCallback(){}handleSelectChange(t){this.selectEl.classList.remove("border-danger");if(this.required){this.initial=false;this.valid=t.target.checkValidity();this.selectedValue=t.target.value;this.selectChange.emit(this.selectedValue)}else{this.selectedValue=t.target.value;this.selectChange.emit(this.selectedValue)}}render(){let t="form-control";let i=e("div",{key:"f060f17dcb9d4b08a8f29c152115e0d839d4dd96",class:`input-group-prepend col-${this.labelWidth} p-0 text-${this.labelColor}`},e("label",{key:"ae65a34259a5568c2a0df7f8c71b9e5d8c215c2d",htmlFor:this.select_id,class:`input-group-text ${this.labelPosition==="right"?"justify-content-end":this.labelPosition==="center"?"justify-content-center":""} ${this.labelBackground?"bg-"+this.labelBackground:""} flex-grow-1 text-${this.labelColor} border-${this.labelBorder==="none"?0:this.labelBorder} `},this.label,this.required?"*":""));if(this.selectStyle===false){t=""}if(this.required&&!this.valid&&!this.initial){t=`${t} border-danger`}if(!this.LabelAvailable){i=""}return e("div",{key:"99e62c5a74a5a123690eac8ab430cc821ef252b2",class:`form-group m-0 ${this.selectContainerStyle}`},e("div",{key:"ec601e6982234469952e90ed2e67316afdafabd9",class:"input-group row m-0"},i,e("select",{key:"b7935127a847903e4ba79b79da3df36b9ecac2f5",ref:t=>this.selectEl=t,id:this.select_id,class:`${this.selectStyles} ${t} form-control-${this.size} text-${this.textSize} col-${this.LabelAvailable?12-this.labelWidth:12}`,onInput:this.handleSelectChange.bind(this),required:this.required},this.showFirstOption&&e("option",{key:"a1a0d0f5a6f48af219ea49ca7f55852df951a2a4",value:""},this.firstOption),this.data.map((t=>{if(this.selectedValue===t.value){return e("option",{selected:true,value:t.value},t.text)}else{return e("option",{value:t.value},t.text)}})))))}static get watchers(){return{selectedValue:["watchHandler"],submited:["watchHandler2"]}}};q.style=D;const F=".backdrop{position:fixed;top:0;left:0;width:100%;height:100vh;cursor:pointer;background:rgba(0, 0, 0, 0.5);z-index:99;transition:all 0.5s;opacity:0;pointer-events:none;transition:all 0.5s}.backdrop.active{opacity:1;pointer-events:all}.sidebar-right{position:fixed;top:0;right:-120%;bottom:0;width:var(--sidebar-width, 40rem);max-width:100%;box-shadow:0 0 10px rgba(0, 0, 0, 0.1);transition:all 0.5s;z-index:100;overflow-y:hidden;color:var(--sidebar-color, #000);background-color:var(--sidebar-backgound, #fff);padding:var(--ir-sidebar-padding, 0.5rem 0)}.sidebar-right.active{right:0;overflow-y:auto}.sidebar-left{position:fixed;top:0;left:-100%;bottom:0;width:var(--sidebar-width, 30rem);max-width:100%;box-shadow:0 0 10px rgba(0, 0, 0, 0.1);transition:all 0.5s;z-index:200;overflow-y:hidden;color:var(--sidebar-color, #000);background:var(--sidebar-backgound, #fff);padding:var(--ir-sidebar-padding, 0.5rem 0)}.sidebar-title{display:flex;align-items:center;justify-content:space-between;padding:0 1rem;border-bottom:1px solid #e4e5ec}.sidebar-title p{font-weight:500;font-size:1.2rem}.sidebar-left.active{left:0;overflow-y:scroll}.close{position:absolute;top:0.5rem;right:1rem;width:1rem;height:1rem;cursor:pointer}";const X=F;const V=class{constructor(e){t(this,e);this.irSidebarToggle=i(this,"irSidebarToggle",7);this.name=undefined;this.side="right";this.showCloseButton=true;this.open=false;this.sidebarStyles=undefined;this.label=undefined}applyStyles(){for(const t in this.sidebarStyles){if(this.sidebarStyles.hasOwnProperty(t)){this.sidebarRef.style[t]=this.sidebarStyles[t]}}}handleSidebarStylesChange(){this.applyStyles()}componentWillLoad(){this.handleKeyDown=this.handleKeyDown.bind(this)}componentDidLoad(){this.applyStyles();document.addEventListener("keydown",this.handleKeyDown)}handleKeyDown(t){if(t.key==="Escape"){return this.toggleSidebar()}else{return}}disconnectedCallback(){document.removeEventListener("keydown",this.handleKeyDown)}async toggleSidebar(){this.irSidebarToggle.emit(this.open)}render(){let t="";if(this.open){t="active"}else{t=""}return[e("div",{key:"bf6bbfe4529f6a454eb59a3262e015354eed5b68",class:`backdrop ${t}`,onClick:()=>{this.toggleSidebar()}}),e("div",{key:"593e531d92ad8db63aa3fbd9491b554032c05ed9",ref:t=>this.sidebarRef=t,class:`sidebar-${this.side} ${t}`},this.showCloseButton&&e("div",{key:"6d6302ba3b33245e893676752652eb7f8d6d0b6e",class:"sidebar-title"},e("p",{key:"d0b41c25133998f41484251cfbc9514adc8cb6c4",class:"p-0 m-0"},this.label),e("div",{key:"2648826b1ae736a7b9d59d5bc0d65cc9601fd720",class:"p-0 m-0 sidebar-icon-container"},e("ir-icon",{key:"31000db74995fc681432b7fc0f0fcd3c971e707d",class:"",onIconClickHandler:()=>{this.toggleSidebar()}},e("svg",{key:"60e44999dc8e3e59f0531fd214ebd4f879050734",slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",height:20,width:20},e("path",{key:"84a8dce12efa851e4f86e8cba3b4f74577f755c5",fill:"#6b6f82",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"}))))),e("slot",{key:"10f09cfb0b3910e74be25a4540bd36ec32e52e99",name:"sidebar-body"}))]}static get watchers(){return{sidebarStyles:["handleSidebarStylesChange"]}}};V.style=X;const J=".sc-ir-switch-h{display:block;position:relative;box-sizing:border-box;--ir-root-width:36px;--ir-root-height:20px}.hidden-input.sc-ir-switch{transform:translateX(-100%);position:absolute;pointer-events:none;opacity:0;margin:0;width:var(--ir-root-width);height:var(--ir-root-height)}.SwitchRoot.sc-ir-switch{all:unset;padding:0;margin:0;width:var(--ir-root-width);height:var(--ir-root-height);background-color:var(--ir-root-inactive-color, #ff4961);position:relative;box-shadow:rgba(0, 0, 0, 0.2) 0px 2px 10px;--webkit-tap-highlight-color:rgba(0, 0, 0, 0);border-radius:9999px;box-sizing:border-box}.SwitchRoot.sc-ir-switch:disabled{opacity:80%}.SwitchRoot.sc-ir-switch:focus-visible{outline:1px solid var(--ir-root-active-color, rgb(55, 188, 155));outline-offset:1px}.SwitchRoot[data-state='checked'].sc-ir-switch{background-color:var(--ir-root-active-color, rgb(55, 188, 155))}.SwitchThumb.sc-ir-switch{padding:0;margin:0;display:block;width:calc(var(--ir-root-height) - 3px);height:calc(var(--ir-root-height) - 3px);border-radius:9999px;background:white;box-shadow:rgba(0, 0, 0, 0.2) 0px;transition:transform 100ms ease 0s;transform:translateX(2px);will-change:transform}.SwitchThumb[data-state='checked'].sc-ir-switch{transform:translateX(calc(var(--ir-root-height) - 3px))}";const K=J;const N=class{constructor(e){t(this,e);this.checkChange=i(this,"checkChange",7);this._id="";this.checked=false;this.switchId=undefined;this.disabled=false}componentWillLoad(){this._id=this.generateRandomId(10)}componentDidLoad(){if(!this.switchRoot){return}this.switchRoot.setAttribute("aria-checked",this.checked?"true":"false")}generateRandomId(t){let i="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";const s=e.length;for(let n=0;n<t;n++){i+=e.charAt(Math.floor(Math.random()*s))}return i}handleCheckChange(){this.checked=!this.checked;this.switchRoot.setAttribute("aria-checked",this.checked?"true":"false");this.checkChange.emit(this.checked)}render(){return e(s,{key:"5f54b8c9214947a1c3cbf59386c34823afe0dc6b"},e("button",{key:"3c525722d5b6a93fc595ec6104360112f73d6940",disabled:this.disabled,ref:t=>this.switchRoot=t,type:"button",id:this.switchId||this._id,onClick:this.handleCheckChange.bind(this),role:"switch","data-state":this.checked?"checked":"unchecked",value:"on",class:"SwitchRoot"},e("span",{key:"1cd056254c5f6846aa6c3e2d19f51e515cc01326",class:"SwitchThumb","data-state":this.checked?"checked":"unchecked"})),e("input",{key:"eb6e3417af122923a1e7d1d59077e009ab667893",type:"checkbox",checked:this.checked,"aria-hidden":"true",tabIndex:-1,value:"on",class:"hidden-input"}))}};N.style=K;const Q=class{constructor(e){t(this,e);this.textChange=i(this,"textChange",7);this.rows=3;this.cols=5;this.text="";this.label="<label>";this.placeholder="<placeholder>";this.value="";this.maxLength=undefined;this.textareaClassname=undefined;this.error=false}handleAriaInvalidChange(t){this.error=t==="true"}connectedCallback(){}disconnectedCallback(){}render(){return e("div",{key:"33b68a671908a41d58c104ef6a5f64729167f57b",class:"form-group"},e("label",{key:"0a53cec1c2e92b11d953685f72645807f55980fd"},this.label),e("textarea",{key:"1d47217ecf3dd1b8135719aba1596dbe7a8431c6",maxLength:this.maxLength,rows:this.rows,value:this.value,class:`form-control ${this.textareaClassname} ${this.error?"border-danger":""}`,placeholder:this.placeholder,onInput:t=>this.textChange.emit(t.target.value)}))}static get watchers(){return{"aria-invalid":["handleAriaInvalidChange"]}}};export{b as ir_button,m as ir_common,v as ir_icon,w as ir_icons,S as ir_input_text,z as ir_interceptor,E as ir_loading_screen,R as ir_option_details,B as ir_payment_option,q as ir_select,V as ir_sidebar,N as ir_switch,Q as ir_textarea};
//# sourceMappingURL=p-b72c7b87.entry.js.map