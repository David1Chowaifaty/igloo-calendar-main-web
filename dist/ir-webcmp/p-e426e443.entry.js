import{r as e,g as t,h as i,H as r}from"./p-d239357b.js";import{T as s}from"./p-f8b7c0cd.js";import{a}from"./p-bf44a732.js";const n=".sc-ir-queue-manager-h{display:flex;flex-direction:column;height:100%}.queue-page.sc-ir-queue-manager{display:flex;flex-direction:column;gap:1rem}.queue-grid.sc-ir-queue-manager{display:flex;flex-direction:column;gap:1rem}.queue-grid.sc-ir-queue-manager wa-card.sc-ir-queue-manager{width:100%}.queue-item.sc-ir-queue-manager{display:grid;align-items:center;gap:0.75rem;margin-bottom:0.5rem}.queue-item__property.sc-ir-queue-manager{font-size:0.9rem;line-height:1.3;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.queue-item__status.sc-ir-queue-manager{display:flex;align-items:center;gap:0.5rem}.queue-item__progress.sc-ir-queue-manager{flex:1 1 0%}.queue-item__count.sc-ir-queue-manager{width:20px;text-align:right;font-size:0.85rem}@media (min-width: 768px){.queue-grid.sc-ir-queue-manager{display:grid;grid-template-columns:repeat(2, 1fr)}}@media (min-width: 1024px){.queue-item.sc-ir-queue-manager{grid-template-columns:300px 1fr}}";const u=n;const l=class{constructor(t){e(this,t)}get el(){return t(this)}ticket="";isLoading=true;tokenService=new s;data;componentWillLoad(){if(this.ticket){this.tokenService.setToken(this.ticket);this.init()}}handleTicketChange(e,t){if(e!==t&&e){this.tokenService.setToken(this.ticket);this.init()}}async init(){const{data:e}=await a.post("/Get_Q_Summary",{});if(e.ExceptionMsg){return}this.data=e.My_Result.map((e=>{const{pendingRequests:t,properties:i}=this.formatResults(e.properties);return{pendingRequests:t,properties:i,q_name:e.q_name,total_pending:e.total_pending}}));this.isLoading=false}formatResults(e){if(!e){return{properties:[],pendingRequests:[]}}const t=e.split(",").map((e=>{const[t,i]=e.split("|").map((e=>e.trim()));const r=Number(i);if(!t||Number.isNaN(r)){return null}return{property:t,pending:r}})).filter((e=>e!==null));t.sort(((e,t)=>t.pending-e.pending));return{properties:t.map((e=>e.property)),pendingRequests:t.map((e=>e.pending))}}render(){if(this.isLoading){return i("ir-loading-screen",null)}return i(r,null,i("div",{class:"ir-page__container"},i("h3",{class:"page-title"},"Pending Queues"),this.data.length===0&&i("ir-empty-state",{style:{marginTop:"20vh"}}),i("div",{class:"queue-grid"},this.data.map((e=>i("wa-card",null,i("p",{slot:"header"},e.q_name," (",e.total_pending," total pending)"),e.properties.map(((t,r)=>{const s=e.pendingRequests[r];const a=e.total_pending>0?s/e.total_pending*100:0;return i("div",{class:"queue-item"},i("span",{class:"queue-item__property"},t),i("div",{class:"queue-item__status"},i("wa-progress-bar",{class:"queue-item__progress",value:a}),i("span",{class:"queue-item__count"},s)))}))))))))}static get watchers(){return{ticket:["handleTicketChange"]}}};l.style=u;export{l as ir_queue_manager};
//# sourceMappingURL=p-e426e443.entry.js.map