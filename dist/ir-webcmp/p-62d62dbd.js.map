{"version":3,"names":["EventsService","constructor","this","bookingService","BookingService","reallocateEvent","pool","destination_pr_id","from_date","to_date","console","log","data","axios","post","extras","ExceptionMsg","Error","error","deleteEvent","POOL","My_Result","updateBlockedEvent","bookingEvent","releaseData","getReleaseHoursString","RELEASE_AFTER_HOURS","result","blockUnit","Object","assign","formatDate","FROM_DATE","TO_DATE","pr_id","PR_ID","STAY_STATUS_CODE","OUT_OF_SERVICE","DESCRIPTION","NOTES","OPTIONAL_REASON","date","split","join"],"sources":["src/services/events.service.ts"],"sourcesContent":["import axios from 'axios';\nimport { BookingService } from './booking.service';\nimport { extras, getReleaseHoursString } from '../utils/utils';\n\nexport class EventsService {\n  private readonly bookingService: BookingService = new BookingService();\n  async reallocateEvent(pool: string, destination_pr_id: number, from_date: string, to_date: string) {\n    try {\n      console.log(pool, destination_pr_id, from_date, to_date);\n      const { data } = await axios.post(`/ReAllocate_Exposed_Room`, { pool, destination_pr_id, from_date, to_date, extras });\n      if (data.ExceptionMsg !== '') {\n        throw new Error(data.ExceptionMsg);\n      }\n      console.log(data);\n      return data;\n    } catch (error) {\n      console.error(error);\n      throw new Error(error);\n    }\n  }\n  public async deleteEvent(POOL: string) {\n    try {\n      const { data } = await axios.post(`/UnBlock_Exposed_Unit`, {\n        POOL,\n      });\n      if (data.ExceptionMsg !== '') {\n        throw new Error(data.ExceptionMsg);\n      }\n      return data.My_Result;\n    } catch (error) {\n      console.log(error);\n      throw new Error(error);\n    }\n  }\n\n  public async updateBlockedEvent(bookingEvent: any) {\n    try {\n      const releaseData = getReleaseHoursString(+bookingEvent.RELEASE_AFTER_HOURS);\n      await this.deleteEvent(bookingEvent.POOL);\n      const result = await this.bookingService.blockUnit({\n        from_date: this.formatDate(bookingEvent.FROM_DATE),\n        to_date: this.formatDate(bookingEvent.TO_DATE),\n        pr_id: bookingEvent.PR_ID,\n        STAY_STATUS_CODE: bookingEvent.OUT_OF_SERVICE ? '004' : bookingEvent.RELEASE_AFTER_HOURS === 0 ? '002' : '003',\n        DESCRIPTION: bookingEvent.RELEASE_AFTER_HOURS || '',\n        NOTES: bookingEvent.OPTIONAL_REASON || '',\n        ...releaseData,\n      });\n      return result;\n    } catch (error) {\n      console.error(error);\n      throw new Error(error);\n    }\n  }\n  private formatDate(date: string) {\n    return date.split('/').join('-');\n  }\n}\n"],"mappings":"yHAIaA,EAAb,WAAAC,GACmBC,KAAAC,eAAiC,IAAIC,C,CACtD,qBAAMC,CAAgBC,EAAcC,EAA2BC,EAAmBC,GAChF,IACEC,QAAQC,IAAIL,EAAMC,EAAmBC,EAAWC,GAChD,MAAMG,KAAEA,SAAeC,EAAMC,KAAK,2BAA4B,CAAER,OAAMC,oBAAmBC,YAAWC,UAASM,WAC7G,GAAIH,EAAKI,eAAiB,GAAI,CAC5B,MAAM,IAAIC,MAAML,EAAKI,a,CAEvBN,QAAQC,IAAIC,GACZ,OAAOA,C,CACP,MAAOM,GACPR,QAAQQ,MAAMA,GACd,MAAM,IAAID,MAAMC,E,EAGb,iBAAMC,CAAYC,GACvB,IACE,MAAMR,KAAEA,SAAeC,EAAMC,KAAK,wBAAyB,CACzDM,SAEF,GAAIR,EAAKI,eAAiB,GAAI,CAC5B,MAAM,IAAIC,MAAML,EAAKI,a,CAEvB,OAAOJ,EAAKS,S,CACZ,MAAOH,GACPR,QAAQC,IAAIO,GACZ,MAAM,IAAID,MAAMC,E,EAIb,wBAAMI,CAAmBC,GAC9B,IACE,MAAMC,EAAcC,GAAuBF,EAAaG,2BAClDxB,KAAKiB,YAAYI,EAAaH,MACpC,MAAMO,QAAezB,KAAKC,eAAeyB,UAASC,OAAAC,OAAA,CAChDtB,UAAWN,KAAK6B,WAAWR,EAAaS,WACxCvB,QAASP,KAAK6B,WAAWR,EAAaU,SACtCC,MAAOX,EAAaY,MACpBC,iBAAkBb,EAAac,eAAiB,MAAQd,EAAaG,sBAAwB,EAAI,MAAQ,MACzGY,YAAaf,EAAaG,qBAAuB,GACjDa,MAAOhB,EAAaiB,iBAAmB,IACpChB,IAEL,OAAOG,C,CACP,MAAOT,GACPR,QAAQQ,MAAMA,GACd,MAAM,IAAID,MAAMC,E,EAGZ,UAAAa,CAAWU,GACjB,OAAOA,EAAKC,MAAM,KAAKC,KAAK,I","ignoreList":[]}