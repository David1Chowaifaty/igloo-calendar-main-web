{"version":3,"names":["irInputTextCss","IrInputTextStyle0","IrInputText","name","value","label","placeholder","inputStyles","required","readonly","type","submitted","inputStyle","textSize","labelPosition","labelBackground","labelColor","labelBorder","labelWidth","variant","disabled","error","mask","autoValidate","zod","asyncParse","wrapKey","inputForcedStyle","testId","maxLength","clearBaseStyles","errorMessage","autoComplete","inputContainerStyle","labelContainerClassname","inputFocused","textChange","inputBlur","inputFocus","inputRef","maskInstance","id","hasPrefixSlot","hasSuffixSlot","componentWillLoad","this","el","v4","haveSlotPresent","componentDidLoad","initMask","handleMaskChange","handleValueChange","newValue","oldValue","validateInput","IMask","on","isEmpty","trim","unmaskedValue","emit","slot","querySelector","forceValidation","updateErrorState","parse","parseAsync","console","log","handleInputChange","event","target","maskedValue","b","setAttribute","handleBlur","e","renderFloatingLabel","labelText","hasValue","String","length","h","class","style","part","undefined","ref","readOnly","onBlur","bind","onFocus","autocomplete","onInput","htmlFor","render","irPickerCss","IrPickerStyle0","DEFAULT_ASYNC_DEBOUNCE","IrPicker","loading","mode","pill","defaultValue","withClear","size","appearance","debounce","static","componentId","idCounter","listboxId","listboxLabelId","emptyStateId","nativeInput","slotRef","debounceTimer","isOpen","query","activeIndex","filteredItems","liveRegionMessage","slottedPickerItems","isValid","comboboxSelect","comboboxClear","inputPickerBlurred","hostItems","Array","from","hostEl","querySelectorAll","processPickerItems","updateLiveRegion","componentDidRender","input","applyAriaAttributes","disconnectedCallback","window","clearTimeout","focusInput","_focusInput","open","requestAnimationFrame","selectedIndex","findIndex","item","nextIndex","findNearestEnabledIndex","focusEdgeItem","scrollSelectedIntoView","close","handleKeyDown","handleInputKeydown","handleDocumentClick","path","composedPath","includes","contains","closeCombobox","handleDocumentFocus","handleActiveIndexChange","updateActiveItemIndicators","scrollActiveOptionIntoView","handleAriaInvalid","updateSelectedFromValue","syncQueryWithValue","applyFilter","updateQuery","emitEvent","clearInput","options","restoreFocus","handleInput","handleInputFocus","key","preventDefault","moveActiveIndex","selectActiveItem","normalizedQuery","toLowerCase","items","filtered","filter","matchesQuery","previousActiveItem","updateItemVisibility","indexOf","context","emitTextChange","delay","getTextChangeDelay","setTimeout","allowEmptyFallback","match","find","getItemDisplayLabel","selected","handleSelection","detail","focus","activeItem","removeAttribute","runAfterNextFrame","scrollIntoView","block","capturePickerItemsFromSlot","assigned","assignedElements","flatten","pickerItems","tagName","ensureItemIds","forEach","index","textContent","haystack","visibleItems","visibleSet","Set","shouldShow","has","hidden","active","Boolean","startIndex","direction","normalizedIndex","attempts","candidate","edge","hasItems","findPickerItemFromEvent","handleResultsClick","handleResultsPointerDown","handleSlotChange","hasResults","isAsyncMode","hasChildren","showEmptyState","emptyDescriptionId","Host","flip","shift","placement","sync","onblur","oninput","onfocus","role","onClick","onPointerDown","onSlotchange","resultCount","plural","callback","irPickerItemCss","IrPickerItemStyle0","IrPickerItem","tabindex","irValidatorCss","IrValidatorStyle0","IrValidator","schema","asyncValidation","showErrorMessage","autovalidate","form","valueEvent","blurEvent","validationDebounce","validationChange","valueChange","autoValidateActive","childEl","formEl","slotEl","currentValue","hasInteracted","validationTimer","valueEventsBound","blurEventsBound","Error","syncAutovalidateFlag","shadowRoot","addEventListener","initializeChildReference","attachFormListener","teardownChildListeners","detachFormListener","removeEventListener","clearValidationTimer","handleSchemaChange","flushValidation","handleAutoValidatePropChange","next","handleFormPropChange","handleValueEventChange","rebindChildListeners","handleBlurEventChange","JSON","parseEvents","spec","split","map","token","handleValuePropChange","previous","Object","is","updateValue","suppressValidation","emitChange","child","pickSingleChild","registerChildListeners","initialValue","readValueFromChild","updateAriaValidity","slotChildren","children","elements","node","nodeType","Node","ELEMENT_NODE","warn","unbindChildListeners","eventName","handleValueEvent","handleBlurEvent","nextValue","extractEventValue","async","getAttribute","scheduleValidation","validateCurrentValue","forceDisplay","result","safeParseAsync","safeParse","nextValidity","success","previousValidity","issues","message","shouldDisplay","emitValidationChange","valid","resolveFormRef","handleFormSubmit","document","provided","getElementById","HTMLFormElement","closest","immediate","Number","isFinite"],"sources":["src/components/ui/ir-input-text/ir-input-text.css?tag=ir-input-text&encapsulation=scoped","src/components/ui/ir-input-text/ir-input-text.tsx","src/components/ui/ir-picker/ir-picker.css?tag=ir-picker&encapsulation=shadow","src/components/ui/ir-picker/ir-picker.tsx","src/components/ui/ir-picker/ir-picker-item/ir-picker-item.css?tag=ir-picker-item&encapsulation=shadow","src/components/ui/ir-picker/ir-picker-item/ir-picker-item.tsx","src/components/ui/ir-validator/ir-validator.css?tag=ir-validator&encapsulation=shadow","src/components/ui/ir-validator/ir-validator.tsx"],"sourcesContent":[":host {\n  /* ========= Theme / palette ========= */\n  /** @prop --ir-bg: Base background of the control. */\n  --ir-bg: #fff;\n\n  /** @prop --ir-primary: Accent color used for focus outline and active label. */\n  --ir-primary: #1e9ff2;\n\n  /** @prop --ir-danger: Error color for borders and text. */\n  --ir-danger: #ff4961;\n\n  /** @prop --ir-border: Generic border color used across the component. */\n  --ir-border: #cacfe7;\n\n  /** @prop --ir-disabled-fg: Text/icon color when disabled. */\n  --ir-disabled-fg: #9aa1ac;\n\n  /** @prop --ir-readonly-bg: Background for readonly fields. */\n  --ir-readonly-bg: #f8f9fa;\n\n  /** @prop --ir-input-color: Text color inside the input. */\n  --ir-input-color: #3b4781;\n\n  /** @prop --ir-placeholder-color: Placeholder color for empty state (when not using floating). */\n  --ir-placeholder-color: #bbbfc6;\n\n  /* ========= Floating outline + input box ========= */\n  /** @prop --ir-floating-input-border: Outline/border color of the floating group. */\n  --ir-floating-input-border: var(--ir-border);\n\n  /** @prop --ir-floating-input-border-radius: Corner radius for the outlined group and input. */\n  --ir-floating-input-border-radius: 0.21rem;\n\n  /** @prop --ir-floating-input-height: Fixed height for the input element. */\n  --ir-floating-input-height: 2rem;\n\n  /** @prop --ir-focus-ring: Box-shadow used on focus (set to `none` to disable). */\n  --ir-focus-ring: none;\n\n  /** @prop --ir-focus-border-color: Border color applied on focus. */\n  --ir-focus-border-color: var(--ir-primary);\n\n  /** @prop --ir-floating-input-font-size: Font size of the input text. */\n  --ir-floating-input-font-size: 0.975rem;\n\n  /** @prop --ir-floating-input-line-height: Line-height of the input text. */\n  --ir-floating-input-line-height: 1.45;\n\n  /** @prop --ir-floating-input-padding-y: Vertical padding inside the input. */\n  --ir-floating-input-padding-y: 0.75rem;\n\n  /** @prop --ir-floating-input-padding-x: Horizontal padding inside the input. */\n  --ir-floating-input-padding-x: 1rem;\n\n  /** @prop --ir-floating-input-padding-x-with-affix: Horizontal padding when a prefix/suffix is present. */\n  --ir-floating-input-padding-x-with-affix: 2rem;\n\n  /* ========= Floating label ========= */\n  /** @prop --ir-floating-label-fg: Resting label color. */\n  --ir-floating-label-fg: #6c757d;\n\n  /** @prop --ir-floating-label-fg-focus: Floated/active label color. */\n  --ir-floating-label-fg-focus: #495057;\n\n  /** @prop --ir-floating-label-bg: Background behind the floated label “chip”. */\n  --ir-floating-label-bg: #fff;\n\n  /** @prop --ir-floating-label-scale: Scale applied to the label when floated. */\n  --ir-floating-label-scale: 0.88;\n\n  /** @prop --ir-floating-label-float-translateY: translateY used when label floats (relative to its top=0). */\n  --ir-floating-label-float-translateY: -70%;\n\n  /** @prop --ir-floating-label-resting-offset-inline: Inline offset for the resting label (LTR=left, RTL=right). */\n  --ir-floating-label-resting-offset-inline: 0.9rem;\n\n  /** @prop --ir-floating-label-resting-offset-inline-with-prefix: Inline offset for the label when a prefix exists. */\n  --ir-floating-label-resting-offset-inline-with-prefix: 1.8rem;\n\n  /* ========= Prefix/Suffix (affixes) ========= */\n  /** @prop --ir-floating-input-affix-size: Size for prefix/suffix slotted icons/elements. */\n  --ir-floating-input-affix-size: 1rem;\n\n  /** @prop --ir-floating-input-affix-color: Color for prefix/suffix icons/text. */\n  --ir-floating-input-affix-color: #6c757d;\n\n  margin: 0;\n  padding: 0;\n  display: inline;\n}\n\n/* Legacy aliases (kept for backward compat if consumer themes use them) */\n:host {\n  /** @prop --blue: Legacy alias for --ir-primary. */\n  --blue: var(--ir-primary);\n  /** @prop --red: Legacy alias for --ir-danger. */\n  --red: var(--ir-danger);\n}\n\n/* ==== existing styles, now variable-driven ==== */\n.border-theme {\n  border: 1px solid var(--ir-border);\n}\n\n.icon-container {\n  color: #3b4781;\n  border: 1px solid var(--ir-border);\n  font-size: var(--ir-floating-input-font-size);\n  height: var(--ir-floating-input-height);\n  background: var(--ir-bg);\n  padding-right: 0 !important;\n  border-right: 0;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  transition: border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\n}\n\ninput:focus {\n  border-color: var(--ir-primary) !important;\n}\n\n.error-message {\n  font-size: 0.875rem;\n  padding: 0;\n  margin: 0.5rem 0 0;\n  color: var(--ir-danger);\n}\n\n.ir-input[data-state='empty'] {\n  color: var(--ir-placeholder-color);\n}\n\n.input-container {\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  box-sizing: border-box;\n  flex: 1;\n}\n\n.input-container input {\n  padding-left: 5px !important;\n  padding-right: 5px !important;\n  border-left: 0;\n  border-top-left-radius: 0 !important;\n  border-bottom-left-radius: 0 !important;\n}\n\n.icon-container[data-state='focus'] {\n  border-color: var(--ir-primary);\n}\n\n.icon-container[data-disabled] {\n  background-color: #eceff1;\n  border-color: rgba(118, 118, 118, 0.3);\n}\n\n.danger-border {\n  border-color: var(--ir-danger);\n}\n\n/* ===== Floating outlined group ===== */\n.ir-floating-group {\n  position: relative;\n  display: block;\n  border: 1px solid var(--ir-floating-input-border);\n  border-radius: var(--ir-floating-input-border-radius);\n  background: var(--ir-bg);\n  transition: border-color 120ms ease, box-shadow 120ms ease;\n  padding: 0;\n}\n\n.ir-floating-group:focus-within {\n  border-color: var(--ir-focus-border-color);\n  box-shadow: var(--ir-focus-ring);\n}\n\n.ir-floating-group.has-error,\n.has-error .ir-floating-group {\n  border-color: var(--ir-danger);\n}\n\n.ir-floating-group.is-disabled {\n  background-color: #f1f3f5;\n}\n\n.ir-floating-group.is-readonly {\n  background-color: var(--ir-readonly-bg);\n}\n\n/* ===== Input (borderless inside the outlined group) ===== */\n.ir-floating-input {\n  width: 100%;\n  display: block;\n  border: 0;\n  outline: 0;\n  background: transparent;\n  color: var(--ir-input-color);\n  font-size: var(--ir-floating-input-font-size);\n  line-height: var(--ir-floating-input-line-height);\n  border-radius: var(--ir-floating-input-border-radius);\n  box-shadow: none;\n\n  padding: var(--ir-floating-input-padding-y) var(--ir-floating-input-padding-x);\n  height: var(--ir-floating-input-height);\n}\n\n.ir-floating-input.danger-border {\n  box-shadow: none;\n}\n\n/* ===== Floating label ===== */\n.ir-floating-label {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  pointer-events: none;\n  padding: 0 0.4rem;\n  color: var(--ir-floating-label-fg);\n  background: transparent;\n  transition: transform 120ms ease, color 120ms ease, top 120ms ease, background-color 120ms ease, opacity 120ms ease;\n  opacity: 0.95;\n  line-height: 1;\n}\n\n/* logical inline offsets */\n.ir-floating-label:dir(rtl) {\n  right: var(--ir-floating-label-resting-offset-inline);\n}\n.ir-floating-label:dir(ltr) {\n  left: var(--ir-floating-label-resting-offset-inline);\n}\n\n/* Float up when focused OR has value */\n.ir-floating-group:focus-within .ir-floating-label,\n.ir-floating-input:not(:placeholder-shown) + .ir-floating-label,\n.ir-floating-group[data-has-value='true'] .ir-floating-label {\n  top: 0;\n  transform: translateY(var(--ir-floating-label-float-translateY)) scale(var(--ir-floating-label-scale));\n  background: var(--ir-floating-label-bg);\n  color: var(--ir-floating-label-fg-focus);\n  font-size: 12px;\n  padding: 0;\n}\n\n/* Error coloring for the floated label */\n.ir-floating-group.has-error .ir-floating-label,\n.has-error .ir-floating-group .ir-floating-label {\n  color: var(--ir-danger);\n}\n\n/* Disabled/read-only label color tweaks */\n.ir-floating-group.is-disabled .ir-floating-label {\n  color: var(--ir-disabled-fg);\n}\n\n/* iOS clip quirk */\n@supports (-webkit-touch-callout: none) {\n  .ir-floating-input {\n    border-radius: var(--ir-floating-input-border-radius);\n  }\n}\n\n/* ===== Prefix/Suffix containers ===== */\n.prefix-container,\n.suffix-container {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  display: inline-flex;\n  align-items: center;\n  color: var(--ir-floating-input-affix-color);\n  pointer-events: none;\n}\n.prefix-container:dir(ltr) {\n  left: 0.5rem;\n}\n.suffix-container:dir(ltr) {\n  right: 0.5rem;\n}\n.prefix-container:dir(rtl) {\n  right: 0.5rem;\n}\n.suffix-container:dir(rtl) {\n  left: 0.5rem;\n}\n\n/* Default sizing for slotted icons/elements */\n::slotted([slot='prefix']),\n::slotted([slot='suffix']) {\n  display: inline-flex;\n  width: var(--ir-floating-input-affix-size);\n  height: var(--ir-floating-input-affix-size);\n}\n\n/* When prefix exists, increase input padding and shift label start */\n.ir-floating-group[data-have-prefix='true'] .ir-floating-input {\n  padding: var(--ir-floating-input-padding-y) var(--ir-floating-input-padding-x-with-affix);\n}\n\n.ir-floating-group[data-have-prefix='true'] .ir-floating-label:dir(ltr) {\n  left: var(--ir-floating-label-resting-offset-inline-with-prefix);\n}\n\n.ir-floating-group[data-have-prefix='true'] .ir-floating-label:dir(rtl) {\n  right: var(--ir-floating-label-resting-offset-inline-with-prefix);\n}\n\n.no-slot {\n  display: none;\n}\n","import { Component, Prop, h, Event, EventEmitter, State, Watch, Element } from '@stencil/core';\nimport { v4 } from 'uuid';\nimport IMask, { FactoryArg, InputMask } from 'imask';\nimport { ZodType } from 'zod';\n\n@Component({\n  tag: 'ir-input-text',\n  styleUrl: 'ir-input-text.css',\n  scoped: true,\n})\nexport class IrInputText {\n  @Element() el: HTMLIrInputTextElement;\n  /** Name attribute for the input field */\n  @Prop() name: string;\n\n  /** Value of the input field */\n  @Prop() value: string;\n\n  /** Label text for the input */\n  @Prop() label: string;\n\n  /** Placeholder text for the input */\n  @Prop() placeholder: string;\n\n  /** Additional inline styles for the input */\n  @Prop() inputStyles = '';\n\n  /** Whether the input field is required */\n  @Prop() required: boolean;\n\n  /** Whether the input field is read-only */\n  @Prop() readonly: boolean = false;\n\n  /** Input type (e.g., text, password, email) */\n  @Prop() type:\n    | 'text'\n    | 'password'\n    | 'email'\n    | 'number'\n    | 'tel'\n    | 'url'\n    | 'search'\n    | 'date'\n    | 'datetime-local'\n    | 'month'\n    | 'week'\n    | 'time'\n    | 'color'\n    | 'file'\n    | 'hidden'\n    | 'checkbox'\n    | 'radio'\n    | 'range'\n    | 'button'\n    | 'reset'\n    | 'submit'\n    | 'image' = 'text';\n\n  /** Whether the form has been submitted */\n  @Prop() submitted: boolean = false;\n\n  /** Whether to apply default input styling */\n  @Prop() inputStyle: boolean = true;\n\n  /** Text size inside the input field */\n  @Prop() textSize: 'sm' | 'md' | 'lg' = 'md';\n\n  /** Position of the label: left, right, or center */\n  @Prop() labelPosition: 'left' | 'right' | 'center' | 'top' = 'left';\n\n  /** Background color of the label */\n  @Prop() labelBackground: 'primary' | 'secondary' | 'success' | 'danger' | 'warning' | 'info' | 'light' | 'dark' | null = null;\n\n  /** Text color of the label */\n  @Prop() labelColor: 'primary' | 'secondary' | 'success' | 'danger' | 'warning' | 'info' | 'light' | 'dark' = 'dark';\n\n  /** Border color/style of the label */\n  @Prop() labelBorder: 'theme' | 'primary' | 'secondary' | 'success' | 'danger' | 'warning' | 'info' | 'light' | 'dark' | 'none' = 'theme';\n\n  /** Label width as a fraction of 12 columns (1-11) */\n  @Prop() labelWidth: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 = 3;\n\n  /** Variant of the input: default or icon or floating-label */\n  @Prop() variant: 'default' | 'icon' | 'floating-label' = 'default';\n\n  /** Whether the input is disabled */\n  @Prop() disabled: boolean = false;\n\n  /** Whether the input has an error */\n  @Prop({ mutable: true }) error: boolean = false;\n\n  /** Mask for the input field (optional) */\n  @Prop() mask: FactoryArg;\n\n  /** Whether the input should auto-validate */\n  @Prop() autoValidate?: boolean = true;\n\n  /** A Zod schema for validating the input */\n  @Prop() zod?: ZodType<any, any>;\n\n  /** A Zod parse type for validating the input */\n  @Prop() asyncParse?: boolean;\n\n  /** Key to wrap the value (e.g., 'price' or 'cost') */\n  @Prop() wrapKey?: string;\n\n  /** Forcing css style to the input */\n  @Prop() inputForcedStyle?: { [key: string]: string };\n\n  /** Input id for testing purposes*/\n  @Prop() testId: string;\n\n  /** Input max character length*/\n  @Prop() maxLength: number;\n\n  /** To clear all the Input base styling*/\n  @Prop() clearBaseStyles: boolean;\n\n  /** To clear all the Input base styling*/\n  @Prop() errorMessage: string;\n\n  /** Autocomplete behavior for the input (e.g., 'on', 'off', 'email', etc.) */\n  @Prop() autoComplete: string;\n\n  /** Forcing css style to the input container */\n  @Prop() inputContainerStyle: { [key: string]: string };\n  /**\n   * Extra class names applied to the label container (<div class=\"input-group-prepend\">)\n   * that wraps the <label>. Use this to control label width, alignment,\n   * spacing, or visibility at different breakpoints.\n   * Example: \"min-w-120 text-nowrap pe-2\"\n   */\n  @Prop() labelContainerClassname: string;\n\n  @State() inputFocused: boolean = false;\n\n  @Event({ bubbles: true, composed: true }) textChange: EventEmitter<any>;\n  @Event() inputBlur: EventEmitter<FocusEvent>;\n  @Event() inputFocus: EventEmitter<FocusEvent>;\n\n  private inputRef: HTMLInputElement;\n  private maskInstance: InputMask<FactoryArg>;\n\n  private id: string;\n  private hasPrefixSlot: boolean;\n  private hasSuffixSlot: boolean;\n\n  componentWillLoad() {\n    if (this.el.id) {\n      this.id = this.el.id;\n    } else {\n      this.id = v4();\n    }\n    this.hasPrefixSlot = this.haveSlotPresent('prefix');\n    this.hasSuffixSlot = this.haveSlotPresent('suffix');\n  }\n\n  componentDidLoad() {\n    if (this.mask) this.initMask();\n  }\n\n  @Watch('mask')\n  handleMaskChange() {\n    this.initMask();\n  }\n  // @Watch('autoValidate')\n  // handleMaskChange1() {\n  //   console.log(this.autoValidate);\n  // }\n\n  // @Watch('error')\n  // handleErrorChange(newValue: boolean, oldValue: boolean) {\n  //   if (newValue !== oldValue) {\n  //     if (this.autoValidate) {\n  //       this.validateInput(this.value, true);\n  //     }\n  //   }\n  // }\n\n  @Watch('value')\n  handleValueChange(newValue: string, oldValue: string) {\n    if (newValue !== oldValue) {\n      this.validateInput(this.value);\n    }\n  }\n\n  private initMask() {\n    if (!this.mask || this.maskInstance) {\n      return;\n    }\n\n    this.maskInstance = IMask(this.inputRef, this.mask);\n    this.maskInstance.on('accept', () => {\n      const isEmpty = this.inputRef.value.trim() === '' || this.maskInstance.unmaskedValue === '';\n      if (isEmpty) {\n        this.inputRef.value = '';\n        this.textChange.emit(null);\n      } else {\n        this.inputRef.value = this.maskInstance.value;\n        this.textChange.emit(this.maskInstance.value);\n      }\n    });\n  }\n\n  private haveSlotPresent(name: string) {\n    const slot = this.el.querySelector(`[slot=\"${name}\"]`);\n    return slot !== null;\n  }\n\n  private async validateInput(value: string, forceValidation: boolean = false) {\n    if (!this.autoValidate && !forceValidation) {\n      if (this.error) {\n        this.updateErrorState(false);\n      }\n      return;\n    }\n    if (this.zod) {\n      try {\n        if (!this.asyncParse) {\n          this.zod.parse(this.wrapKey ? { [this.wrapKey]: value } : value);\n        } else {\n          await this.zod.parseAsync(this.wrapKey ? { [this.wrapKey]: value } : value);\n        }\n        if (this.error) {\n          this.updateErrorState(false);\n        }\n      } catch (error) {\n        console.log(error);\n        this.updateErrorState(true);\n      }\n    }\n  }\n\n  private handleInputChange(event: InputEvent) {\n    const value = (event.target as HTMLInputElement).value;\n    const isEmpty = value === '';\n    if (this.maskInstance) {\n      this.maskInstance.value = value;\n    }\n    const maskedValue = isEmpty ? null : this.maskInstance ? this.maskInstance.value : value;\n    this.textChange.emit(maskedValue);\n  }\n\n  private updateErrorState(b: boolean) {\n    this.error = b;\n    this.inputRef.setAttribute('aria-invalid', b ? 'true' : 'false');\n  }\n\n  private handleBlur(e: FocusEvent) {\n    this.validateInput(this.value, this.submitted);\n    this.inputFocused = false;\n    this.inputBlur.emit(e);\n  }\n  private renderFloatingLabel() {\n    const labelText = this.label || this.placeholder || '';\n    const hasValue = !!(this.value && String(this.value).length > 0);\n\n    return (\n      <div class=\"form-group\" style={this.inputContainerStyle}>\n        <div\n          class={`ir-floating-group ${this.error ? 'has-error' : ''} ${this.disabled ? 'is-disabled' : ''} ${this.readonly ? 'is-readonly' : ''}`}\n          data-has-value={String(hasValue)}\n          data-focused={String(this.inputFocused)}\n          data-have-prefix={String(this.hasPrefixSlot)}\n          data-have-suffix={String(this.hasSuffixSlot)}\n          part=\"form-group\"\n        >\n          <span part=\"prefix-container\" class={{ 'prefix-container': true, 'no-slot': !this.hasPrefixSlot }}>\n            <slot name=\"prefix\"></slot>\n          </span>\n          <input\n            part=\"input\"\n            data-state={!!this.value ? undefined : this.mask ? 'empty' : undefined}\n            maxLength={this.maxLength}\n            data-testid={this.testId}\n            style={this.inputForcedStyle}\n            id={this.id}\n            name={this.name}\n            ref={el => (this.inputRef = el)}\n            readOnly={this.readonly}\n            type={this.type}\n            class={`ir-input ir-floating-input ${this.inputStyles || ''} ${this.error ? 'danger-border' : ''} text-${this.textSize}`}\n            onBlur={this.handleBlur.bind(this)}\n            onFocus={e => {\n              this.inputFocused = true;\n              this.inputFocus.emit(e);\n            }}\n            placeholder=\" \"\n            autoComplete={this.autoComplete}\n            autocomplete={this.autoComplete}\n            value={this.value}\n            onInput={this.handleInputChange.bind(this)}\n            required={this.required}\n            disabled={this.disabled}\n            aria-invalid={String(this.error)}\n            aria-required={String(this.required)}\n          />\n          <label part=\"label\" htmlFor={this.id} class=\"ir-floating-label\">\n            {labelText}\n            {this.required ? ' *' : ''}\n          </label>\n\n          <span part=\"suffix-container\" class={{ 'suffix-container': true, 'no-slot': !this.hasSuffixSlot }}>\n            <slot name=\"suffix\"></slot>\n          </span>\n        </div>\n\n        {this.errorMessage && this.error && (\n          <p part=\"error-message\" class=\"error-message\">\n            {this.errorMessage}\n          </p>\n        )}\n      </div>\n    );\n  }\n  render() {\n    if (this.variant === 'floating-label') {\n      return this.renderFloatingLabel();\n    }\n    if (this.variant === 'icon') {\n      return (\n        <fieldset class=\"position-relative has-icon-left input-container\">\n          <label htmlFor={this.id} class=\"input-group-prepend bg-white m-0\">\n            <span\n              data-disabled={this.disabled}\n              data-state={this.inputFocused ? 'focus' : ''}\n              class={`input-group-text icon-container bg-white ${this.error ? 'danger-border' : ''}`}\n              id=\"basic-addon1\"\n            >\n              <slot name=\"icon\"></slot>\n            </span>\n          </label>\n          <input\n            maxLength={this.maxLength}\n            data-testid={this.testId}\n            style={this.inputForcedStyle}\n            data-state={!!this.value ? undefined : this.mask ? 'empty' : undefined}\n            id={this.id}\n            ref={el => (this.inputRef = el)}\n            readOnly={this.readonly}\n            type={this.type}\n            class={`ir-input form-control bg-white pl-0 input-sm rate-input py-0 m-0 rateInputBorder ${this.error ? 'danger-border' : ''}`}\n            onBlur={this.handleBlur.bind(this)}\n            onFocus={e => {\n              this.inputFocused = true;\n              this.inputFocus.emit(e);\n            }}\n            placeholder={this.placeholder}\n            value={this.value}\n            onInput={this.handleInputChange.bind(this)}\n            required={this.required}\n            disabled={this.disabled}\n            autoComplete={this.autoComplete}\n          />\n        </fieldset>\n      );\n    }\n    return (\n      <div class={'form-group'} style={this.inputContainerStyle}>\n        <div class=\"input-group row m-0\">\n          {this.label && (\n            <div class={`input-group-prepend col-${this.labelWidth} ${this.labelContainerClassname} p-0 text-${this.labelColor}`}>\n              <label\n                htmlFor={this.id}\n                class={`input-group-text ${this.labelPosition === 'right' ? 'justify-content-end' : this.labelPosition === 'center' ? 'justify-content-center' : ''} ${\n                  this.labelBackground ? 'bg-' + this.labelBackground : ''\n                } flex-grow-1 text-${this.labelColor} border-${this.labelBorder === 'none' ? 0 : this.labelBorder} `}\n              >\n                {this.label}\n                {this.required ? '*' : ''}\n              </label>\n            </div>\n          )}\n          <input\n            maxLength={this.maxLength}\n            data-testid={this.testId}\n            style={this.inputForcedStyle}\n            data-state={!!this.value ? undefined : this.mask ? 'empty' : undefined}\n            id={this.id}\n            ref={el => (this.inputRef = el)}\n            readOnly={this.readonly}\n            type={this.type}\n            class={\n              this.clearBaseStyles\n                ? `${this.inputStyles}`\n                : `${this.error ? 'border-danger' : ''} form-control text-${this.textSize} col-${this.label ? 12 - this.labelWidth : 12} ${this.readonly ? 'bg-white' : ''} ${\n                    this.inputStyles\n                  }`\n            }\n            onBlur={this.handleBlur.bind(this)}\n            onFocus={e => {\n              this.inputFocused = true;\n              this.inputFocus.emit(e);\n            }}\n            placeholder={this.placeholder}\n            autoComplete={this.autoComplete}\n            autocomplete={this.autoComplete}\n            value={this.value}\n            onInput={this.handleInputChange.bind(this)}\n            required={this.required}\n            disabled={this.disabled}\n          />\n        </div>\n        {this.errorMessage && this.error && <p class=\"error-message\">{this.errorMessage}</p>}\n      </div>\n    );\n  }\n}\n",":host {\n  display: block;\n  width: 100%;\n}\n.menu {\n  display: flex;\n  flex-direction: column;\n  /* width: min(32rem, 90vw); */\n  min-width: max-content;\n  margin: 0px;\n  padding: 0.5rem 0;\n  border: var(--wa-border-style) var(--wa-border-width-s) var(--wa-color-surface-border);\n  border-radius: var(--wa-border-radius-m);\n  background-color: var(--wa-color-surface-raised);\n  box-shadow: var(--wa-shadow-m);\n  color: var(--wa-color-text-normal);\n  text-align: start;\n  user-select: none;\n  overflow: auto;\n  max-width: var(--auto-size-available-width) !important;\n  max-height: var(--auto-size-available-height) !important;\n}\nwa-input[aria-invalid='true']::part(base) {\n  border-color: var(--wa-color-danger-border-loud);\n  outline-color: var(--wa-color-danger-border-loud);\n  border-width: 2px;\n}\n.results {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  /* gap: 0.75rem; */\n  max-height: min(60vh, 24rem);\n  overflow-y: auto;\n}\n.group {\n  display: flex;\n  flex-direction: column;\n  gap: 0.35rem;\n}\n.group__label {\n  font-size: 0.75rem;\n  text-transform: uppercase;\n  letter-spacing: 0.08em;\n  color: var(--wa-color-text-muted);\n  margin: 0 0.25rem;\n}\n.group__options {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n.option {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 0.75rem;\n  border-radius: var(--wa-border-radius-m);\n  cursor: pointer;\n  transition: background-color 120ms ease, box-shadow 120ms ease;\n}\n.option__leading {\n  color: var(--wa-color-text-muted);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1rem;\n}\n.option__leading wa-icon {\n  font-size: 1.15rem;\n}\n.option__content {\n  display: flex;\n  flex-direction: column;\n  gap: 0.15rem;\n  flex: 1;\n}\n.option__label {\n  font-weight: 600;\n}\n.option__description {\n  font-size: 0.85rem;\n  color: var(--wa-color-text-muted);\n}\n.option__suffix {\n  margin-inline-start: auto;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.option__meta {\n  padding: 0.15rem 0.45rem;\n  border-radius: var(--wa-border-radius-pill, 999px);\n  background-color: var(--wa-color-surface, rgba(255, 255, 255, 0.08));\n  font-size: 0.75rem;\n  color: var(--wa-color-text-normal);\n}\n.option__shortcut {\n  display: flex;\n  gap: 0.25rem;\n}\n.option__shortcut kbd {\n  border-radius: var(--wa-border-radius-s);\n  border: 1px solid var(--wa-color-surface-border);\n  padding: 0.15rem 0.35rem;\n  font-size: 0.75rem;\n  font-family: inherit;\n  background-color: var(--wa-color-surface, rgba(255, 255, 255, 0.04));\n}\n.option--active {\n  background-color: var(--wa-color-surface-hover, rgba(255, 255, 255, 0.06));\n  box-shadow: inset 0 0 0 1px var(--wa-color-surface-border);\n}\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 0.35rem;\n  padding: 2rem 1rem;\n  text-align: center;\n  color: var(--wa-color-text-muted);\n}\n.empty-state wa-icon {\n  font-size: 1.25rem;\n}\n.loading-state {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1rem;\n  color: var(--wa-color-text-muted);\n}\n.loading-state p {\n  margin: 0;\n  font-size: 0.9rem;\n}\n.sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border: 0;\n}\n","import { Component, Element, Event, EventEmitter, Listen, Method, State, Watch, h, Host, Prop } from '@stencil/core';\nimport WaInput from '@awesome.me/webawesome/dist/components/input/input.js';\nimport { NativeWaInput } from '../ir-input/ir-input';\n\nexport interface IrComboboxOption {\n  value: string;\n  label: string;\n  disabled?: boolean;\n}\n\ntype PickerItemElement = HTMLIrPickerItemElement & {\n  active: boolean;\n  selected: boolean;\n};\n\nexport interface IrComboboxSelectEventDetail {\n  item: IrComboboxOption;\n}\n\nconst DEFAULT_ASYNC_DEBOUNCE = 300;\n\n@Component({\n  tag: 'ir-picker',\n  styleUrl: 'ir-picker.css',\n  shadow: true,\n})\nexport class IrPicker {\n  /** Selected value (also shown in the input when `mode=\"select\"`). */\n  @Prop({ reflect: true, mutable: true }) value: string = '';\n\n  @Prop({ reflect: true }) loading = false;\n\n  @Prop() mode: 'select' | 'default' | 'select-async' = 'default';\n\n  @Prop({ reflect: true }) pill: boolean = false;\n  /** Placeholder shown inside the input when there is no query. */\n  @Prop() placeholder: string = '';\n  /** Optional label applied to the text field. */\n  @Prop() label?: string;\n  /** The default value of the form control. Primarily used for resetting the form control. */\n  @Prop({ reflect: true }) defaultValue: NativeWaInput['defaultValue'];\n  /**\n   * Whether to show a clear button inside the input.\n   * When clicked, the input value is cleared and the `combobox-clear` event is emitted.\n   *\n   * @default false\n   */\n  @Prop() withClear: boolean = false;\n  /** The input's size. */\n  @Prop({ reflect: true }) size: NativeWaInput['size'] = 'small';\n  /** The input's visual appearance. */\n  @Prop({ reflect: true }) appearance: NativeWaInput['appearance'];\n\n  /** Delay (in milliseconds) before emitting the `text-change` event. Defaults to 300ms for async mode. */\n  @Prop() debounce: number = 0;\n\n  private static idCounter = 0;\n  private readonly componentId = ++IrPicker.idCounter;\n  private readonly listboxId = `ir-combobox-listbox-${this.componentId}`;\n  private readonly listboxLabelId = `ir-combobox-label-${this.componentId}`;\n  private readonly emptyStateId = `ir-combobox-empty-${this.componentId}`;\n\n  private inputRef?: WaInput;\n  private nativeInput?: HTMLInputElement;\n  private slotRef?: HTMLSlotElement;\n  private debounceTimer?: number;\n\n  @Element() hostEl!: HTMLElement;\n\n  @State() isOpen = false;\n  @State() query = '';\n  @State() activeIndex = -1;\n  @State() filteredItems: PickerItemElement[] = [];\n  @State() liveRegionMessage = '';\n  @State() slottedPickerItems: PickerItemElement[] = [];\n  @State() isValid: string;\n\n  /** Emitted when a value is selected from the combobox list. */\n  @Event({ eventName: 'combobox-select' }) comboboxSelect!: EventEmitter<IrComboboxSelectEventDetail>;\n\n  /** Emitted when the text input value changes. */\n  @Event({ eventName: 'text-change' }) textChange!: EventEmitter<string>;\n\n  /** Emitted when the clear button is clicked and the combobox value is cleared. */\n  @Event({ eventName: 'combobox-clear' }) comboboxClear!: EventEmitter<void>;\n\n  /** Emitted when the clear button is clicked and the combobox value is cleared. */\n  @Event({ eventName: 'input-picker-blurred' }) inputPickerBlurred!: EventEmitter<void>;\n\n  componentWillLoad() {\n    const hostItems = Array.from(this.hostEl?.querySelectorAll('ir-picker-item') ?? []) as PickerItemElement[];\n    if (hostItems.length) {\n      this.processPickerItems(hostItems);\n    } else {\n      this.updateLiveRegion(0);\n    }\n  }\n\n  componentDidRender() {\n    if (this.inputRef) {\n      this.nativeInput = this.inputRef.input;\n    }\n    this.applyAriaAttributes();\n  }\n\n  disconnectedCallback() {\n    if (this.debounceTimer) {\n      window.clearTimeout(this.debounceTimer);\n      this.debounceTimer = undefined;\n    }\n  }\n\n  @Method()\n  async focusInput() {\n    this._focusInput();\n  }\n\n  @Method()\n  async open() {\n    if (this.isOpen) {\n      this._focusInput();\n      return;\n    }\n    this.isOpen = true;\n    requestAnimationFrame(() => this._focusInput());\n    if (this.filteredItems.length) {\n      const selectedIndex = this.filteredItems.findIndex(item => item.value === this.value);\n      if (selectedIndex >= 0) {\n        const nextIndex = this.findNearestEnabledIndex(selectedIndex + 1, 1);\n        if (nextIndex >= 0) {\n          this.activeIndex = nextIndex;\n        } else {\n          this.focusEdgeItem('start');\n        }\n      } else if (this.activeIndex === -1) {\n        this.focusEdgeItem('start');\n      }\n    }\n    this.scrollSelectedIntoView();\n  }\n\n  @Method()\n  async close() {\n    this.isOpen = false;\n  }\n\n  @Listen('keydown')\n  handleKeyDown(e) {\n    this.handleInputKeydown(e);\n  }\n\n  @Listen('click', { target: 'document' })\n  handleDocumentClick(event: MouseEvent) {\n    if (!this.isOpen) return;\n    const path = event.composedPath ? event.composedPath() : [];\n    if ((path.length && path.includes(this.hostEl)) || this.hostEl.contains(event.target as Node)) return;\n    this.closeCombobox();\n  }\n\n  @Listen('focusin', { target: 'document' })\n  handleDocumentFocus(event: FocusEvent) {\n    if (!this.isOpen) return;\n    if (this.hostEl.contains(event.target as Node)) return;\n    this.closeCombobox();\n  }\n\n  @Watch('activeIndex')\n  protected handleActiveIndexChange() {\n    this.updateActiveItemIndicators();\n    this.applyAriaAttributes();\n    this.scrollActiveOptionIntoView();\n  }\n\n  @Watch('aria-invalid')\n  handleAriaInvalid(newValue) {\n    this.isValid = newValue;\n  }\n  @Watch('value')\n  protected handleValueChange(newValue: string) {\n    this.updateSelectedFromValue(newValue);\n    this.syncQueryWithValue(newValue);\n    if (['select-async', 'select'].includes(this.mode)) {\n      this.applyFilter('', { updateQuery: false, emitEvent: false });\n    }\n  }\n\n  @Method()\n  async clearInput() {\n    this.applyFilter('');\n  }\n\n  private closeCombobox(options: { restoreFocus?: boolean } = {}) {\n    this.isOpen = false;\n    if (options.restoreFocus) {\n      this._focusInput();\n    }\n  }\n\n  private handleInput = (event: Event) => {\n    const target = event.target as WaInput;\n    this.applyFilter(target?.value ?? '');\n    this.open();\n  };\n\n  private handleInputFocus = () => {\n    if (!this.isOpen) {\n      if (this.mode === 'select-async' && !this.query) {\n        return;\n      }\n      this.open();\n    }\n  };\n\n  private handleInputKeydown = (event: KeyboardEvent) => {\n    switch (event.key) {\n      case 'ArrowDown':\n        event.preventDefault();\n        this.open();\n        this.moveActiveIndex(1);\n        break;\n      case 'ArrowUp':\n        event.preventDefault();\n        this.open();\n        this.moveActiveIndex(-1);\n        break;\n      case 'Enter':\n        if (!this.isOpen) return;\n        event.preventDefault();\n        this.selectActiveItem();\n        break;\n      case 'Escape':\n        if (!this.isOpen) return;\n        event.preventDefault();\n        this.closeCombobox({ restoreFocus: true });\n        break;\n      case 'Home':\n        if (!this.isOpen) return;\n        event.preventDefault();\n        this.focusEdgeItem('start');\n        break;\n      case 'End':\n        if (!this.isOpen) return;\n        event.preventDefault();\n        this.focusEdgeItem('end');\n        break;\n      case 'Tab':\n        this.closeCombobox();\n        break;\n    }\n  };\n\n  /** Applies the filter and optionally emits a debounced text-change event. */\n  private applyFilter(value: string, options: { updateQuery?: boolean; emitEvent?: boolean } = {}) {\n    const { updateQuery = true, emitEvent = true } = options;\n\n    if (updateQuery) {\n      this.query = value;\n    }\n\n    const normalizedQuery = value.trim().toLowerCase();\n    const items = this.slottedPickerItems;\n    const filtered = normalizedQuery ? items.filter(item => this.matchesQuery(item, normalizedQuery)) : [...items];\n\n    const previousActiveItem = this.activeIndex >= 0 ? this.filteredItems[this.activeIndex] : undefined;\n\n    this.filteredItems = filtered;\n    this.updateItemVisibility(filtered);\n\n    let nextIndex = previousActiveItem ? filtered.indexOf(previousActiveItem) : -1;\n\n    if (filtered.length === 0) {\n      this.activeIndex = -1;\n    } else {\n      if (nextIndex === -1) {\n        nextIndex = this.findNearestEnabledIndex(0, 1);\n      }\n      this.activeIndex = nextIndex;\n    }\n\n    this.updateActiveItemIndicators();\n\n    const context = normalizedQuery ? `\"${value.trim()}\"` : undefined;\n    this.updateLiveRegion(filtered.length, context);\n\n    if (emitEvent) {\n      this.emitTextChange(value);\n    }\n  }\n\n  /** Emit the latest query value with a debounce suited for async searches. */\n  private emitTextChange(value: string) {\n    const delay = this.getTextChangeDelay();\n\n    if (this.debounceTimer) {\n      window.clearTimeout(this.debounceTimer);\n    }\n\n    const emit = () => {\n      this.textChange.emit(value);\n    };\n\n    if (delay > 0) {\n      this.debounceTimer = window.setTimeout(emit, delay);\n      return;\n    }\n\n    emit();\n  }\n\n  private getTextChangeDelay() {\n    if (typeof this.debounce === 'number' && this.debounce > 0) {\n      return this.debounce;\n    }\n    if (this.mode === 'select-async') {\n      return DEFAULT_ASYNC_DEBOUNCE;\n    }\n    return 0;\n  }\n\n  private syncQueryWithValue(value: string, options: { allowEmptyFallback?: boolean } = {}) {\n    if (!['select', 'select-async'].includes(this.mode)) {\n      return;\n    }\n\n    if (!value) {\n      if (options.allowEmptyFallback !== false) {\n        this.query = '';\n      }\n      return;\n    }\n\n    const match = this.slottedPickerItems.find(item => item.value === value);\n    if (match) {\n      this.query = this.getItemDisplayLabel(match);\n    }\n  }\n\n  private selectActiveItem() {\n    if (this.activeIndex < 0) return;\n    const selected = this.filteredItems[this.activeIndex];\n    if (!selected || selected.disabled) return;\n    this.handleSelection(selected);\n  }\n\n  private handleSelection(item: PickerItemElement) {\n    const detail: IrComboboxOption = {\n      value: item.value,\n      label: this.getItemDisplayLabel(item),\n      disabled: item.disabled,\n    };\n    this.value = item.value;\n    this.updateSelectedFromValue();\n    this.comboboxSelect.emit({ item: detail });\n    this.closeCombobox({ restoreFocus: true });\n    if (['select', 'select-async'].includes(this.mode)) {\n      this.query = this.getItemDisplayLabel(item);\n      this.applyFilter('', { updateQuery: false, emitEvent: false });\n    } else {\n      this.applyFilter('', { emitEvent: false });\n    }\n    this.activeIndex = -1;\n  }\n\n  private _focusInput() {\n    this.inputRef?.focus();\n    this.nativeInput?.focus();\n  }\n\n  private applyAriaAttributes() {\n    if (!this.nativeInput) return;\n    this.nativeInput.setAttribute('role', 'combobox');\n    this.nativeInput.setAttribute('aria-autocomplete', 'list');\n    this.nativeInput.setAttribute('aria-expanded', String(this.isOpen));\n    this.nativeInput.setAttribute('aria-controls', this.listboxId);\n    if (this.activeIndex >= 0) {\n      const activeItem = this.filteredItems[this.activeIndex];\n      if (activeItem?.id) {\n        this.nativeInput.setAttribute('aria-activedescendant', activeItem.id);\n      }\n    } else {\n      this.nativeInput.removeAttribute('aria-activedescendant');\n    }\n  }\n\n  private scrollActiveOptionIntoView() {\n    if (this.activeIndex < 0) return;\n    const item = this.filteredItems[this.activeIndex];\n    if (!item) return;\n    this.runAfterNextFrame(() => {\n      item.scrollIntoView({ block: 'center' });\n    });\n  }\n\n  private scrollSelectedIntoView() {\n    if (!this.isOpen || !this.value) {\n      return;\n    }\n    const match = this.filteredItems.find(item => item.value === this.value) ?? this.slottedPickerItems.find(item => item.value === this.value);\n    if (!match) {\n      return;\n    }\n    this.runAfterNextFrame(() => {\n      match.scrollIntoView({ block: 'center' });\n    });\n  }\n\n  private capturePickerItemsFromSlot(slot: HTMLSlotElement = this.slotRef) {\n    if (!slot) {\n      return;\n    }\n    const assigned = slot.assignedElements({ flatten: true });\n    const pickerItems = assigned.filter((el): el is PickerItemElement => el.tagName === 'IR-PICKER-ITEM');\n    this.processPickerItems(pickerItems);\n  }\n\n  private processPickerItems(pickerItems: PickerItemElement[]) {\n    this.slottedPickerItems = [...pickerItems];\n    this.ensureItemIds();\n    this.applyFilter(this.query, { emitEvent: false });\n    this.updateSelectedFromValue(this.value);\n    this.syncQueryWithValue(this.value, { allowEmptyFallback: false });\n    if (['select', 'select-async'].includes(this.mode) && this.value) {\n      this.applyFilter('', { updateQuery: false, emitEvent: false });\n    }\n  }\n\n  private ensureItemIds() {\n    this.slottedPickerItems.forEach((item, index) => {\n      if (!item.id) {\n        item.id = `${this.listboxId}-option-${index}`;\n      }\n    });\n  }\n\n  private getItemDisplayLabel(item: PickerItemElement) {\n    return item.label || item.textContent?.trim() || '';\n  }\n\n  private matchesQuery(item: PickerItemElement, normalizedQuery: string) {\n    const haystack = `${item.label ?? ''} ${item.value ?? ''}`.toLowerCase();\n    return haystack.includes(normalizedQuery);\n  }\n\n  private updateItemVisibility(visibleItems: PickerItemElement[]) {\n    const visibleSet = new Set(visibleItems);\n    this.slottedPickerItems.forEach(item => {\n      const shouldShow = visibleSet.has(item);\n      item.hidden = !shouldShow;\n      if (shouldShow) {\n        item.removeAttribute('aria-hidden');\n      } else {\n        item.setAttribute('aria-hidden', 'true');\n      }\n      item.active = false;\n    });\n  }\n\n  private updateSelectedFromValue(value: string = this.value) {\n    if (!this.slottedPickerItems.length) {\n      return;\n    }\n    this.slottedPickerItems.forEach(item => {\n      item.selected = Boolean(value) && item.value === value;\n    });\n  }\n\n  private updateActiveItemIndicators() {\n    this.slottedPickerItems.forEach(item => (item.active = false));\n    if (this.activeIndex < 0) {\n      return;\n    }\n    const activeItem = this.filteredItems[this.activeIndex];\n    if (activeItem) {\n      activeItem.active = true;\n    }\n  }\n\n  private findNearestEnabledIndex(startIndex: number, direction: 1 | -1) {\n    const items = this.filteredItems;\n    const length = items.length;\n    if (!length) {\n      return -1;\n    }\n    let normalizedIndex = ((startIndex % length) + length) % length;\n    let attempts = 0;\n    while (attempts < length) {\n      const candidate = items[normalizedIndex];\n      if (candidate && !candidate.disabled) {\n        return normalizedIndex;\n      }\n      normalizedIndex = (((normalizedIndex + direction) % length) + length) % length;\n      attempts += 1;\n    }\n    return -1;\n  }\n\n  private focusEdgeItem(edge: 'start' | 'end') {\n    if (!this.filteredItems.length) {\n      this.activeIndex = -1;\n      return;\n    }\n    const direction = edge === 'start' ? 1 : -1;\n    const startIndex = edge === 'start' ? 0 : this.filteredItems.length - 1;\n    this.activeIndex = this.findNearestEnabledIndex(startIndex, direction);\n  }\n\n  private moveActiveIndex(direction: 1 | -1) {\n    const hasItems = this.filteredItems.length > 0;\n    if (!hasItems) {\n      this.activeIndex = -1;\n      return;\n    }\n    if (this.activeIndex === -1) {\n      this.focusEdgeItem(direction === 1 ? 'start' : 'end');\n      return;\n    }\n    this.activeIndex = this.findNearestEnabledIndex(this.activeIndex + direction, direction);\n  }\n\n  private findPickerItemFromEvent(event: Event): PickerItemElement | undefined {\n    const path = typeof event.composedPath === 'function' ? event.composedPath() : [];\n    for (const target of path) {\n      if (target && (target as HTMLElement).tagName === 'IR-PICKER-ITEM') {\n        return target as PickerItemElement;\n      }\n    }\n    return undefined;\n  }\n\n  private handleResultsClick = (event: MouseEvent) => {\n    const item = this.findPickerItemFromEvent(event);\n    if (!item || item.disabled) {\n      return;\n    }\n    event.preventDefault();\n    this.handleSelection(item);\n  };\n\n  private handleResultsPointerDown = (event: PointerEvent) => {\n    const item = this.findPickerItemFromEvent(event);\n    if (!item) {\n      return;\n    }\n    event.preventDefault();\n  };\n\n  private handleSlotChange = (event: Event) => {\n    const slot = event.target as HTMLSlotElement;\n    this.slotRef = slot;\n    this.capturePickerItemsFromSlot(slot);\n  };\n  render() {\n    const hasResults = this.filteredItems.length > 0;\n    const isAsyncMode = this.mode === 'select-async';\n    const hasChildren = this.slottedPickerItems.length > 0;\n    // In async mode avoid showing the empty state until loading finished and no results rendered.\n    const showEmptyState = !this.loading && !hasResults && (!isAsyncMode || !hasChildren);\n    const emptyDescriptionId = showEmptyState ? this.emptyStateId : undefined;\n\n    return (\n      <Host>\n        <wa-popup flip shift placement=\"bottom\" sync=\"width\" auto-size=\"vertical\" auto-size-padding={10} active={this.isOpen}>\n          <wa-input\n            slot=\"anchor\"\n            class=\"search-bar\"\n            aria-invalid={this.isValid}\n            withClear={this.withClear}\n            size={this.size}\n            value={this.query}\n            defaultValue={this.defaultValue}\n            ref={el => (this.inputRef = el)}\n            appearance={this.appearance}\n            label={this.label}\n            pill={this.pill}\n            onblur={() => this.inputPickerBlurred.emit()}\n            autocomplete=\"off\"\n            placeholder={this.placeholder || 'Search'}\n            oninput={this.handleInput}\n            onfocus={this.handleInputFocus}\n            onwa-clear={() => {\n              this.applyFilter('');\n              this.open();\n              this.comboboxClear.emit();\n            }}\n          >\n            {this.loading && <wa-spinner slot=\"end\"></wa-spinner>}\n\n            <wa-icon slot=\"start\" name=\"magnifying-glass\" aria-hidden=\"true\"></wa-icon>\n            <slot name=\"end\" slot=\"end\"></slot>\n          </wa-input>\n          <div class=\"menu\" role=\"presentation\">\n            <p class=\"sr-only\" id={this.listboxLabelId}>\n              Available search shortcuts\n            </p>\n            <ul\n              class=\"results\"\n              id={this.listboxId}\n              role=\"listbox\"\n              aria-labelledby={this.listboxLabelId}\n              aria-describedby={emptyDescriptionId}\n              aria-busy={this.loading ? 'true' : undefined}\n              onClick={this.handleResultsClick}\n              onPointerDown={this.handleResultsPointerDown}\n            >\n              {this.loading && (\n                <li class=\"loading-state\" role=\"presentation\">\n                  <wa-spinner></wa-spinner>\n                  <p>Loading suggestions…</p>\n                </li>\n              )}\n              <slot onSlotchange={this.handleSlotChange}></slot>\n              {showEmptyState && (\n                <li class=\"empty-state\" role=\"presentation\" id={this.emptyStateId}>\n                  <wa-icon name=\"circle-info\" aria-hidden=\"true\"></wa-icon>\n                  <p>No results found</p>\n                </li>\n              )}\n            </ul>\n          </div>\n        </wa-popup>\n        <span class=\"sr-only\" aria-live=\"polite\">\n          {this.liveRegionMessage}\n        </span>\n      </Host>\n    );\n  }\n\n  private updateLiveRegion(resultCount: number, context?: string) {\n    if (!resultCount) {\n      this.liveRegionMessage = context ? `No results for ${context}` : 'No results available';\n      return;\n    }\n    const plural = resultCount === 1 ? 'result' : 'results';\n    this.liveRegionMessage = context ? `${resultCount} ${plural} for ${context}` : `${resultCount} ${plural} available`;\n  }\n\n  private runAfterNextFrame(callback: () => void) {\n    if (typeof requestAnimationFrame === 'function') {\n      requestAnimationFrame(() => callback());\n      return;\n    }\n    setTimeout(callback, 0);\n  }\n}\n","@import url('../../../../assets/webawesome/component/host.css');\n:host {\n  box-sizing: border-box;\n  display: block;\n}\n:host([hidden]) {\n  display: none !important;\n}\n.picker-item__container {\n  all: unset;\n  box-sizing: border-box;\n  width: 100%;\n  color: var(--wa-color-text-normal);\n  user-select: none;\n  position: relative;\n  display: flex;\n  align-items: center;\n  font-style: inherit;\n  font-variant: inherit;\n  font-weight: inherit;\n  font-stretch: inherit;\n  font-size: inherit;\n  font-family: inherit;\n  font-optical-sizing: inherit;\n  font-size-adjust: inherit;\n  font-kerning: inherit;\n  font-feature-settings: inherit;\n  font-variation-settings: inherit;\n  padding: 0;\n  padding: 0.5em 1em 0.5em 0.25em !important;\n  line-height: var(--wa-line-height-condensed);\n  transition: fill var(--wa-transition-normal) var(--wa-transition-easing);\n  cursor: pointer;\n  gap: 0.5rem;\n  scroll-margin: 0.25rem;\n}\n.picker-item__content {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.picker-item__container:hover {\n  background-color: var(--wa-color-neutral-fill-normal);\n  color: var(--wa-color-neutral-on-normal);\n}\n.picker-item__check {\n  opacity: 0;\n}\n\n:host([active]) .picker-item__container {\n  background-color: var(--wa-color-brand-fill-loud);\n  color: var(--wa-color-brand-on-loud);\n  opacity: 1;\n}\n:host([selected]) .picker-item__container {\n  font-weight: 600;\n}\n:host([selected]) .picker-item__check {\n  opacity: 1;\n}\n:host([aria-disabled='true']) .picker-item__container,\n.picker-item__container:disabled {\n  cursor: not-allowed;\n  opacity: 0.5;\n}\n","import { Component, Host, Prop, h } from '@stencil/core';\n\n@Component({\n  tag: 'ir-picker-item',\n  styleUrl: 'ir-picker-item.css',\n  shadow: true,\n})\nexport class IrPickerItem {\n  @Prop({ reflect: true }) value: string;\n  @Prop({ reflect: true }) label: string;\n  @Prop({ reflect: true }) disabled: boolean = false;\n  @Prop({ reflect: true, mutable: true }) active: boolean = false;\n  @Prop({ reflect: true, mutable: true }) selected: boolean = false;\n\n  render() {\n    return (\n      <Host role=\"option\" aria-selected={this.selected ? 'true' : 'false'} aria-disabled={this.disabled ? 'true' : 'false'}>\n        <button class={`picker-item__container`} type=\"button\" tabindex=\"-1\" disabled={this.disabled} part=\"base\">\n          <wa-icon class=\"picker-item__check\" name=\"check\"></wa-icon>\n          <div class=\"picker-item__content\" part=\"content\">\n            <slot></slot>\n          </div>\n        </button>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n  position: relative;\n}\n.error-message {\n  font-weight: var(--wa-form-control-hint-font-weight);\n  margin-block-start: 0.5em;\n  font-size: var(--wa-font-size-smaller);\n  line-height: var(--wa-form-control-label-line-height);\n  color: var(--wa-color-danger-fill-loud);\n  /* position: absolute; */\n}\n","import { Component, Element, Event, EventEmitter, Host, Prop, State, Watch, h } from '@stencil/core';\nimport type { ZodTypeAny } from 'zod';\n\ntype ValidatableChild = (HTMLElement | HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement) & {\n  value?: unknown;\n};\n\n@Component({\n  tag: 'ir-validator',\n  styleUrl: 'ir-validator.css',\n  shadow: true,\n})\nexport class IrValidator {\n  @Element() el: HTMLIrValidatorElement;\n\n  /** Zod schema used to validate the child control's value. */\n  @Prop() schema!: ZodTypeAny;\n  @Prop() value: any;\n  @Prop() asyncValidation: boolean;\n\n  @Prop() showErrorMessage: boolean;\n\n  /** Enables automatic validation on every value change. */\n  @Prop({ reflect: true }) autovalidate?: boolean;\n\n  /** Optional form id. Falls back to the closest ancestor form when omitted. */\n  @Prop() form?: string;\n\n  /** Event names (space/comma separated) dispatched when the child value changes. */\n  @Prop({ attribute: 'value-event' }) valueEvent: string = 'input input-change value-change select-change';\n\n  /** Event names (space/comma separated) dispatched when the child loses focus. */\n  @Prop({ attribute: 'blur-event' }) blurEvent: string = 'blur input-blur select-blur';\n\n  /** Debounce delay (ms) before running validation for autovalidated changes. */\n  @Prop({ attribute: 'validation-debounce' }) validationDebounce: number = 200;\n\n  /** Emits whenever the validation state toggles. */\n  @Event({ eventName: 'irValidationChange' }) validationChange!: EventEmitter<{ valid: boolean; value: unknown }>;\n\n  /** Emits whenever the tracked value changes. */\n  @Event({ eventName: 'irValueChange' }) valueChange!: EventEmitter<{ value: unknown }>;\n\n  @State() private isValid = true;\n  @State() private autoValidateActive = false;\n  @State() private errorMessage: string = '';\n\n  private childEl?: ValidatableChild;\n  private formEl?: HTMLFormElement | null;\n  private slotEl?: HTMLSlotElement;\n  private currentValue: unknown;\n  private hasInteracted = false;\n  private validationTimer?: ReturnType<typeof setTimeout>;\n  private valueEventsBound: string[] = [];\n  private blurEventsBound: string[] = [];\n\n  componentWillLoad() {\n    if (!this.schema) {\n      throw new Error('<ir-validator> requires a `schema` prop.');\n    }\n    this.syncAutovalidateFlag(this.autovalidate);\n  }\n\n  componentDidLoad() {\n    this.slotEl = this.el.shadowRoot?.querySelector('slot') as HTMLSlotElement;\n    this.slotEl?.addEventListener('slotchange', this.handleSlotChange);\n    this.initializeChildReference();\n    this.attachFormListener();\n  }\n\n  disconnectedCallback() {\n    this.teardownChildListeners();\n    this.detachFormListener();\n    this.slotEl?.removeEventListener('slotchange', this.handleSlotChange);\n    this.clearValidationTimer();\n  }\n\n  @Watch('schema')\n  protected async handleSchemaChange() {\n    if (this.autoValidateActive && this.hasInteracted) {\n      await this.flushValidation();\n    }\n  }\n\n  @Watch('autovalidate')\n  protected async handleAutoValidatePropChange(next?: boolean) {\n    this.syncAutovalidateFlag(next);\n    if (this.autoValidateActive) {\n      await this.flushValidation();\n    }\n  }\n\n  @Watch('form')\n  protected handleFormPropChange() {\n    this.detachFormListener();\n    this.attachFormListener();\n  }\n\n  @Watch('valueEvent')\n  protected handleValueEventChange(newValue: string, oldValue: string) {\n    if (newValue === oldValue) return;\n    this.rebindChildListeners();\n  }\n\n  @Watch('blurEvent')\n  protected handleBlurEventChange(newValue: string, oldValue: string) {\n    if (newValue === oldValue) return;\n    this.rebindChildListeners();\n  }\n\n  private syncAutovalidateFlag(next?: boolean) {\n    this.autoValidateActive = JSON.parse(String(next ?? false));\n  }\n\n  private parseEvents(spec?: string) {\n    if (!spec) return [];\n    return spec\n      .split(/[\\s,]+/)\n      .map(token => token.trim())\n      .filter(Boolean);\n  }\n\n  @Watch('value')\n  protected async handleValuePropChange(next: unknown, previous: unknown) {\n    if (Object.is(next, previous)) return;\n    // keep the tracked value in sync with external changes without emitting another change event\n    this.updateValue(next, { suppressValidation: true, emitChange: false });\n    if (this.autoValidateActive && this.hasInteracted) {\n      await this.flushValidation();\n    }\n  }\n\n  private handleSlotChange = () => {\n    this.initializeChildReference();\n  };\n\n  private initializeChildReference() {\n    const child = this.pickSingleChild();\n    if (child === this.childEl) return;\n\n    this.teardownChildListeners();\n    if (!child) return;\n\n    this.childEl = child;\n    this.hasInteracted = false;\n    this.registerChildListeners();\n\n    const initialValue = this.readValueFromChild();\n    this.updateValue(initialValue, { suppressValidation: !this.autoValidateActive, emitChange: true });\n    if (!this.autoValidateActive) {\n      this.updateAriaValidity(this.isValid);\n    }\n  }\n\n  private pickSingleChild(): ValidatableChild | undefined {\n    const slotChildren = this.slotEl?.assignedElements({ flatten: true }) ?? Array.from(this.el.children);\n    const elements = slotChildren.filter(node => node.nodeType === Node.ELEMENT_NODE) as ValidatableChild[];\n\n    if (elements.length === 0) {\n      console.warn('<ir-validator> requires exactly one child element but found none.');\n      return undefined;\n    }\n\n    if (elements.length > 1) {\n      console.warn(`<ir-validator> requires exactly one child element but found ${elements.length}. Using the first.`);\n    }\n\n    return elements[0];\n  }\n\n  private registerChildListeners() {\n    if (!this.childEl) return;\n\n    this.unbindChildListeners();\n\n    this.valueEventsBound = this.parseEvents(this.valueEvent);\n    this.blurEventsBound = this.parseEvents(this.blurEvent);\n\n    this.valueEventsBound.forEach(eventName => this.childEl!.addEventListener(eventName, this.handleValueEvent as EventListener));\n    this.blurEventsBound.forEach(eventName => this.childEl!.addEventListener(eventName, this.handleBlurEvent as EventListener));\n  }\n\n  private unbindChildListeners() {\n    if (!this.childEl) return;\n    this.valueEventsBound.forEach(eventName => this.childEl!.removeEventListener(eventName, this.handleValueEvent as EventListener));\n    this.blurEventsBound.forEach(eventName => this.childEl!.removeEventListener(eventName, this.handleBlurEvent as EventListener));\n    this.valueEventsBound = [];\n    this.blurEventsBound = [];\n  }\n\n  private teardownChildListeners() {\n    if (this.childEl) {\n      this.unbindChildListeners();\n      this.childEl = undefined;\n    }\n    this.clearValidationTimer();\n  }\n\n  private rebindChildListeners() {\n    if (!this.childEl) return;\n    this.registerChildListeners();\n  }\n\n  private handleValueEvent = (event: Event) => {\n    if (!this.childEl) return;\n    const nextValue = this.extractEventValue(event);\n    this.hasInteracted = true;\n    this.updateValue(nextValue);\n  };\n\n  private handleBlurEvent = async () => {\n    if (!this.childEl) return;\n    this.hasInteracted = true;\n    if (this.autoValidateActive) {\n      await this.flushValidation();\n    }\n  };\n\n  private extractEventValue(event: Event) {\n    if ('detail' in event && event['detail'] && typeof event['detail'] === 'object' && 'value' in (event as CustomEvent).detail) {\n      return (event as CustomEvent<{ value: unknown }>).detail.value;\n    }\n\n    const target = event.target as ValidatableChild;\n    if (target && 'value' in target) {\n      return target.value;\n    }\n\n    return this.readValueFromChild();\n  }\n\n  private readValueFromChild() {\n    if (this.value !== undefined) {\n      return this.value;\n    }\n    if (!this.childEl) return undefined;\n    if ('value' in this.childEl) {\n      return this.childEl.value;\n    }\n    return this.childEl.getAttribute?.('value');\n  }\n\n  private updateValue(nextValue: unknown, options: { suppressValidation?: boolean; emitChange?: boolean } = {}) {\n    const previous = this.currentValue;\n    this.currentValue = nextValue;\n\n    if (options.emitChange !== false && !Object.is(previous, nextValue)) {\n      this.valueChange.emit({ value: this.currentValue });\n    }\n\n    if (!options.suppressValidation && this.autoValidateActive && this.hasInteracted) {\n      this.scheduleValidation();\n    }\n  }\n\n  private async validateCurrentValue(forceDisplay = false) {\n    if (!this.schema) return true;\n    const value = this.currentValue ?? this.readValueFromChild();\n    this.currentValue = value;\n    let result;\n    if (this.asyncValidation) {\n      result = await this.schema.safeParseAsync(value);\n    } else {\n      result = this.schema.safeParse(value);\n    }\n\n    const nextValidity = result.success;\n    const previousValidity = this.isValid;\n    this.isValid = nextValidity;\n\n    if (!result.success) {\n      this.errorMessage = result.error.issues[0]?.message ?? '';\n    } else {\n      this.errorMessage = '';\n    }\n\n    const shouldDisplay = forceDisplay || (this.autoValidateActive && this.hasInteracted);\n    if (shouldDisplay) {\n      this.updateAriaValidity(nextValidity);\n      if (previousValidity !== nextValidity) {\n        this.emitValidationChange();\n      }\n    }\n\n    return nextValidity;\n  }\n\n  private updateAriaValidity(valid: boolean) {\n    if (!this.childEl) return;\n    if (valid) {\n      this.childEl.removeAttribute('aria-invalid');\n    } else {\n      this.childEl.setAttribute('aria-invalid', 'true');\n    }\n  }\n\n  private emitValidationChange() {\n    this.validationChange.emit({ valid: this.isValid, value: this.currentValue });\n  }\n\n  private attachFormListener() {\n    this.formEl = this.resolveFormRef();\n    this.formEl?.addEventListener('submit', this.handleFormSubmit, true);\n  }\n\n  private detachFormListener() {\n    this.formEl?.removeEventListener('submit', this.handleFormSubmit, true);\n    this.formEl = undefined;\n  }\n\n  private resolveFormRef(): HTMLFormElement | null {\n    if (typeof document !== 'undefined' && this.form) {\n      const provided = document.getElementById(this.form);\n      if (provided && provided instanceof HTMLFormElement) {\n        return provided;\n      }\n    }\n    return this.el.closest('form');\n  }\n\n  private handleFormSubmit = async () => {\n    this.hasInteracted = true;\n    const valid = await this.flushValidation();\n    if (!valid && !this.autoValidateActive) {\n      this.autoValidateActive = true;\n    }\n  };\n\n  private async scheduleValidation(immediate = false) {\n    this.clearValidationTimer();\n    const delay = Number(this.validationDebounce);\n    if (immediate || !isFinite(delay) || delay <= 0) {\n      return await this.validateCurrentValue(true);\n    }\n\n    this.validationTimer = setTimeout(async () => {\n      this.validationTimer = undefined;\n      await this.validateCurrentValue(true);\n    }, delay);\n\n    return this.isValid;\n  }\n\n  private async flushValidation() {\n    return await this.scheduleValidation(true);\n  }\n\n  private clearValidationTimer() {\n    if (this.validationTimer !== undefined) {\n      clearTimeout(this.validationTimer);\n      this.validationTimer = undefined;\n    }\n  }\n\n  render() {\n    return (\n      <Host>\n        <slot></slot>\n        {!this.isValid && this.showErrorMessage && (\n          <span part=\"error-message\" class=\"error-message\">\n            {this.errorMessage}\n          </span>\n        )}\n      </Host>\n    );\n  }\n}\n"],"mappings":"wIAAA,MAAMA,EAAiB,88LACvB,MAAAC,EAAeD,E,MCSFE,EAAW,M,oKAGdC,KAGAC,MAGAC,MAGAC,YAGAC,YAAc,GAGdC,SAGAC,SAAoB,MAGpBC,KAsBM,OAGNC,UAAqB,MAGrBC,WAAsB,KAGtBC,SAA+B,KAG/BC,cAAqD,OAGrDC,gBAAiH,KAGjHC,WAAqG,OAGrGC,YAAyH,QAGzHC,WAA0D,EAG1DC,QAAiD,UAGjDC,SAAoB,MAGHC,MAAiB,MAGlCC,KAGAC,aAAyB,KAGzBC,IAGAC,WAGAC,QAGAC,iBAGAC,OAGAC,UAGAC,gBAGAC,aAGAC,aAGAC,oBAOAC,wBAECC,aAAwB,MAESC,WACjCC,UACAC,WAEDC,SACAC,aAEAC,GACAC,cACAC,cAER,iBAAAC,GACE,GAAIC,KAAKC,GAAGL,GAAI,CACdI,KAAKJ,GAAKI,KAAKC,GAAGL,E,KACb,CACLI,KAAKJ,GAAKM,G,CAEZF,KAAKH,cAAgBG,KAAKG,gBAAgB,UAC1CH,KAAKF,cAAgBE,KAAKG,gBAAgB,S,CAG5C,gBAAAC,GACE,GAAIJ,KAAKvB,KAAMuB,KAAKK,U,CAItB,gBAAAC,GACEN,KAAKK,U,CAiBP,iBAAAE,CAAkBC,EAAkBC,GAClC,GAAID,IAAaC,EAAU,CACzBT,KAAKU,cAAcV,KAAKzC,M,EAIpB,QAAA8C,GACN,IAAKL,KAAKvB,MAAQuB,KAAKL,aAAc,CACnC,M,CAGFK,KAAKL,aAAegB,EAAMX,KAAKN,SAAUM,KAAKvB,MAC9CuB,KAAKL,aAAaiB,GAAG,UAAU,KAC7B,MAAMC,EAAUb,KAAKN,SAASnC,MAAMuD,SAAW,IAAMd,KAAKL,aAAaoB,gBAAkB,GACzF,GAAIF,EAAS,CACXb,KAAKN,SAASnC,MAAQ,GACtByC,KAAKT,WAAWyB,KAAK,K,KAChB,CACLhB,KAAKN,SAASnC,MAAQyC,KAAKL,aAAapC,MACxCyC,KAAKT,WAAWyB,KAAKhB,KAAKL,aAAapC,M,KAKrC,eAAA4C,CAAgB7C,GACtB,MAAM2D,EAAOjB,KAAKC,GAAGiB,cAAc,UAAU5D,OAC7C,OAAO2D,IAAS,I,CAGV,mBAAMP,CAAcnD,EAAe4D,EAA2B,OACpE,IAAKnB,KAAKtB,eAAiByC,EAAiB,CAC1C,GAAInB,KAAKxB,MAAO,CACdwB,KAAKoB,iBAAiB,M,CAExB,M,CAEF,GAAIpB,KAAKrB,IAAK,CACZ,IACE,IAAKqB,KAAKpB,WAAY,CACpBoB,KAAKrB,IAAI0C,MAAMrB,KAAKnB,QAAU,CAAE,CAACmB,KAAKnB,SAAUtB,GAAUA,E,KACrD,OACCyC,KAAKrB,IAAI2C,WAAWtB,KAAKnB,QAAU,CAAE,CAACmB,KAAKnB,SAAUtB,GAAUA,E,CAEvE,GAAIyC,KAAKxB,MAAO,CACdwB,KAAKoB,iBAAiB,M,EAExB,MAAO5C,GACP+C,QAAQC,IAAIhD,GACZwB,KAAKoB,iBAAiB,K,GAKpB,iBAAAK,CAAkBC,GACxB,MAAMnE,EAASmE,EAAMC,OAA4BpE,MACjD,MAAMsD,EAAUtD,IAAU,GAC1B,GAAIyC,KAAKL,aAAc,CACrBK,KAAKL,aAAapC,MAAQA,C,CAE5B,MAAMqE,EAAcf,EAAU,KAAOb,KAAKL,aAAeK,KAAKL,aAAapC,MAAQA,EACnFyC,KAAKT,WAAWyB,KAAKY,E,CAGf,gBAAAR,CAAiBS,GACvB7B,KAAKxB,MAAQqD,EACb7B,KAAKN,SAASoC,aAAa,eAAgBD,EAAI,OAAS,Q,CAGlD,UAAAE,CAAWC,GACjBhC,KAAKU,cAAcV,KAAKzC,MAAOyC,KAAKlC,WACpCkC,KAAKV,aAAe,MACpBU,KAAKR,UAAUwB,KAAKgB,E,CAEd,mBAAAC,GACN,MAAMC,EAAYlC,KAAKxC,OAASwC,KAAKvC,aAAe,GACpD,MAAM0E,KAAcnC,KAAKzC,OAAS6E,OAAOpC,KAAKzC,OAAO8E,OAAS,GAE9D,OACEC,EAAA,OAAKC,MAAM,aAAaC,MAAOxC,KAAKZ,qBAClCkD,EAAA,OACEC,MAAO,qBAAqBvC,KAAKxB,MAAQ,YAAc,MAAMwB,KAAKzB,SAAW,cAAgB,MAAMyB,KAAKpC,SAAW,cAAgB,KAAI,iBACvHwE,OAAOD,GAAS,eAClBC,OAAOpC,KAAKV,cAAa,mBACrB8C,OAAOpC,KAAKH,eAAc,mBAC1BuC,OAAOpC,KAAKF,eAC9B2C,KAAK,cAELH,EAAA,QAAMG,KAAK,mBAAmBF,MAAO,CAAE,mBAAoB,KAAM,WAAYvC,KAAKH,gBAChFyC,EAAA,QAAMhF,KAAK,YAEbgF,EAAA,SACEG,KAAK,QAAO,eACEzC,KAAKzC,MAAQmF,UAAY1C,KAAKvB,KAAO,QAAUiE,UAC7D1D,UAAWgB,KAAKhB,UAAS,cACZgB,KAAKjB,OAClByD,MAAOxC,KAAKlB,iBACZc,GAAII,KAAKJ,GACTtC,KAAM0C,KAAK1C,KACXqF,IAAK1C,GAAOD,KAAKN,SAAWO,EAC5B2C,SAAU5C,KAAKpC,SACfC,KAAMmC,KAAKnC,KACX0E,MAAO,8BAA8BvC,KAAKtC,aAAe,MAAMsC,KAAKxB,MAAQ,gBAAkB,WAAWwB,KAAKhC,WAC9G6E,OAAQ7C,KAAK+B,WAAWe,KAAK9C,MAC7B+C,QAASf,IACPhC,KAAKV,aAAe,KACpBU,KAAKP,WAAWuB,KAAKgB,EAAE,EAEzBvE,YAAY,IACZ0B,aAAca,KAAKb,aACnB6D,aAAchD,KAAKb,aACnB5B,MAAOyC,KAAKzC,MACZ0F,QAASjD,KAAKyB,kBAAkBqB,KAAK9C,MACrCrC,SAAUqC,KAAKrC,SACfY,SAAUyB,KAAKzB,SAAQ,eACT6D,OAAOpC,KAAKxB,OAAM,gBACjB4D,OAAOpC,KAAKrC,YAE7B2E,EAAA,SAAOG,KAAK,QAAQS,QAASlD,KAAKJ,GAAI2C,MAAM,qBACzCL,EACAlC,KAAKrC,SAAW,KAAO,IAG1B2E,EAAA,QAAMG,KAAK,mBAAmBF,MAAO,CAAE,mBAAoB,KAAM,WAAYvC,KAAKF,gBAChFwC,EAAA,QAAMhF,KAAK,aAId0C,KAAKd,cAAgBc,KAAKxB,OACzB8D,EAAA,KAAGG,KAAK,gBAAgBF,MAAM,iBAC3BvC,KAAKd,c,CAMhB,MAAAiE,GACE,GAAInD,KAAK1B,UAAY,iBAAkB,CACrC,OAAO0B,KAAKiC,qB,CAEd,GAAIjC,KAAK1B,UAAY,OAAQ,CAC3B,OACEgE,EAAA,YAAUC,MAAM,mDACdD,EAAA,SAAOY,QAASlD,KAAKJ,GAAI2C,MAAM,oCAC7BD,EAAA,wBACiBtC,KAAKzB,SAAQ,aAChByB,KAAKV,aAAe,QAAU,GAC1CiD,MAAO,4CAA4CvC,KAAKxB,MAAQ,gBAAkB,KAClFoB,GAAG,gBAEH0C,EAAA,QAAMhF,KAAK,WAGfgF,EAAA,SACEtD,UAAWgB,KAAKhB,UAAS,cACZgB,KAAKjB,OAClByD,MAAOxC,KAAKlB,iBAAgB,eACdkB,KAAKzC,MAAQmF,UAAY1C,KAAKvB,KAAO,QAAUiE,UAC7D9C,GAAII,KAAKJ,GACT+C,IAAK1C,GAAOD,KAAKN,SAAWO,EAC5B2C,SAAU5C,KAAKpC,SACfC,KAAMmC,KAAKnC,KACX0E,MAAO,oFAAoFvC,KAAKxB,MAAQ,gBAAkB,KAC1HqE,OAAQ7C,KAAK+B,WAAWe,KAAK9C,MAC7B+C,QAASf,IACPhC,KAAKV,aAAe,KACpBU,KAAKP,WAAWuB,KAAKgB,EAAE,EAEzBvE,YAAauC,KAAKvC,YAClBF,MAAOyC,KAAKzC,MACZ0F,QAASjD,KAAKyB,kBAAkBqB,KAAK9C,MACrCrC,SAAUqC,KAAKrC,SACfY,SAAUyB,KAAKzB,SACfY,aAAca,KAAKb,e,CAK3B,OACEmD,EAAA,OAAKC,MAAO,aAAcC,MAAOxC,KAAKZ,qBACpCkD,EAAA,OAAKC,MAAM,uBACRvC,KAAKxC,OACJ8E,EAAA,OAAKC,MAAO,2BAA2BvC,KAAK3B,cAAc2B,KAAKX,oCAAoCW,KAAK7B,cACtGmE,EAAA,SACEY,QAASlD,KAAKJ,GACd2C,MAAO,oBAAoBvC,KAAK/B,gBAAkB,QAAU,sBAAwB+B,KAAK/B,gBAAkB,SAAW,yBAA2B,MAC/I+B,KAAK9B,gBAAkB,MAAQ8B,KAAK9B,gBAAkB,uBACnC8B,KAAK7B,qBAAqB6B,KAAK5B,cAAgB,OAAS,EAAI4B,KAAK5B,gBAErF4B,KAAKxC,MACLwC,KAAKrC,SAAW,IAAM,KAI7B2E,EAAA,SACEtD,UAAWgB,KAAKhB,UAAS,cACZgB,KAAKjB,OAClByD,MAAOxC,KAAKlB,iBAAgB,eACdkB,KAAKzC,MAAQmF,UAAY1C,KAAKvB,KAAO,QAAUiE,UAC7D9C,GAAII,KAAKJ,GACT+C,IAAK1C,GAAOD,KAAKN,SAAWO,EAC5B2C,SAAU5C,KAAKpC,SACfC,KAAMmC,KAAKnC,KACX0E,MACEvC,KAAKf,gBACD,GAAGe,KAAKtC,cACR,GAAGsC,KAAKxB,MAAQ,gBAAkB,wBAAwBwB,KAAKhC,gBAAgBgC,KAAKxC,MAAQ,GAAKwC,KAAK3B,WAAa,MAAM2B,KAAKpC,SAAW,WAAa,MACpJoC,KAAKtC,cAGbmF,OAAQ7C,KAAK+B,WAAWe,KAAK9C,MAC7B+C,QAASf,IACPhC,KAAKV,aAAe,KACpBU,KAAKP,WAAWuB,KAAKgB,EAAE,EAEzBvE,YAAauC,KAAKvC,YAClB0B,aAAca,KAAKb,aACnB6D,aAAchD,KAAKb,aACnB5B,MAAOyC,KAAKzC,MACZ0F,QAASjD,KAAKyB,kBAAkBqB,KAAK9C,MACrCrC,SAAUqC,KAAKrC,SACfY,SAAUyB,KAAKzB,YAGlByB,KAAKd,cAAgBc,KAAKxB,OAAS8D,EAAA,KAAGC,MAAM,iBAAiBvC,KAAKd,c,iGCnZ3E,MAAMkE,EAAc,2wFACpB,MAAAC,EAAeD,ECkBf,MAAME,EAAyB,I,MAOlBC,EAAQ,M,wNAEqBhG,MAAgB,GAE/BiG,QAAU,MAE3BC,KAA8C,UAE7BC,KAAgB,MAEjCjG,YAAsB,GAEtBD,MAEiBmG,aAOjBC,UAAqB,MAEJC,KAA8B,QAE9BC,WAGjBC,SAAmB,EAEnBC,iBAAmB,EACVC,cAAgBV,EAASW,UACzBC,UAAY,uBAAuBnE,KAAKiE,cACxCG,eAAiB,qBAAqBpE,KAAKiE,cAC3CI,aAAe,qBAAqBrE,KAAKiE,cAElDvE,SACA4E,YACAC,QACAC,c,4BAICC,OAAS,MACTC,MAAQ,GACRC,aAAe,EACfC,cAAqC,GACrCC,kBAAoB,GACpBC,mBAA0C,GAC1CC,QAGgCC,eAGJzF,WAGG0F,cAGMC,mBAE9C,iBAAAnF,GACE,MAAMoF,EAAYC,MAAMC,KAAKrF,KAAKsF,QAAQC,iBAAiB,mBAAqB,IAChF,GAAIJ,EAAU9C,OAAQ,CACpBrC,KAAKwF,mBAAmBL,E,KACnB,CACLnF,KAAKyF,iBAAiB,E,EAI1B,kBAAAC,GACE,GAAI1F,KAAKN,SAAU,CACjBM,KAAKsE,YAActE,KAAKN,SAASiG,K,CAEnC3F,KAAK4F,qB,CAGP,oBAAAC,GACE,GAAI7F,KAAKwE,cAAe,CACtBsB,OAAOC,aAAa/F,KAAKwE,eACzBxE,KAAKwE,cAAgB9B,S,EAKzB,gBAAMsD,GACJhG,KAAKiG,a,CAIP,UAAMC,GACJ,GAAIlG,KAAKyE,OAAQ,CACfzE,KAAKiG,cACL,M,CAEFjG,KAAKyE,OAAS,KACd0B,uBAAsB,IAAMnG,KAAKiG,gBACjC,GAAIjG,KAAK4E,cAAcvC,OAAQ,CAC7B,MAAM+D,EAAgBpG,KAAK4E,cAAcyB,WAAUC,GAAQA,EAAK/I,QAAUyC,KAAKzC,QAC/E,GAAI6I,GAAiB,EAAG,CACtB,MAAMG,EAAYvG,KAAKwG,wBAAwBJ,EAAgB,EAAG,GAClE,GAAIG,GAAa,EAAG,CAClBvG,KAAK2E,YAAc4B,C,KACd,CACLvG,KAAKyG,cAAc,Q,OAEhB,GAAIzG,KAAK2E,eAAiB,EAAG,CAClC3E,KAAKyG,cAAc,Q,EAGvBzG,KAAK0G,wB,CAIP,WAAMC,GACJ3G,KAAKyE,OAAS,K,CAIhB,aAAAmC,CAAc5E,GACZhC,KAAK6G,mBAAmB7E,E,CAI1B,mBAAA8E,CAAoBpF,GAClB,IAAK1B,KAAKyE,OAAQ,OAClB,MAAMsC,EAAOrF,EAAMsF,aAAetF,EAAMsF,eAAiB,GACzD,GAAKD,EAAK1E,QAAU0E,EAAKE,SAASjH,KAAKsF,SAAYtF,KAAKsF,OAAO4B,SAASxF,EAAMC,QAAiB,OAC/F3B,KAAKmH,e,CAIP,mBAAAC,CAAoB1F,GAClB,IAAK1B,KAAKyE,OAAQ,OAClB,GAAIzE,KAAKsF,OAAO4B,SAASxF,EAAMC,QAAiB,OAChD3B,KAAKmH,e,CAIG,uBAAAE,GACRrH,KAAKsH,6BACLtH,KAAK4F,sBACL5F,KAAKuH,4B,CAIP,iBAAAC,CAAkBhH,GAChBR,KAAK+E,QAAUvE,C,CAGP,iBAAAD,CAAkBC,GAC1BR,KAAKyH,wBAAwBjH,GAC7BR,KAAK0H,mBAAmBlH,GACxB,GAAI,CAAC,eAAgB,UAAUyG,SAASjH,KAAKyD,MAAO,CAClDzD,KAAK2H,YAAY,GAAI,CAAEC,YAAa,MAAOC,UAAW,O,EAK1D,gBAAMC,GACJ9H,KAAK2H,YAAY,G,CAGX,aAAAR,CAAcY,EAAsC,IAC1D/H,KAAKyE,OAAS,MACd,GAAIsD,EAAQC,aAAc,CACxBhI,KAAKiG,a,EAIDgC,YAAevG,IACrB,MAAMC,EAASD,EAAMC,OACrB3B,KAAK2H,YAAYhG,GAAQpE,OAAS,IAClCyC,KAAKkG,MAAM,EAGLgC,iBAAmB,KACzB,IAAKlI,KAAKyE,OAAQ,CAChB,GAAIzE,KAAKyD,OAAS,iBAAmBzD,KAAK0E,MAAO,CAC/C,M,CAEF1E,KAAKkG,M,GAIDW,mBAAsBnF,IAC5B,OAAQA,EAAMyG,KACZ,IAAK,YACHzG,EAAM0G,iBACNpI,KAAKkG,OACLlG,KAAKqI,gBAAgB,GACrB,MACF,IAAK,UACH3G,EAAM0G,iBACNpI,KAAKkG,OACLlG,KAAKqI,iBAAiB,GACtB,MACF,IAAK,QACH,IAAKrI,KAAKyE,OAAQ,OAClB/C,EAAM0G,iBACNpI,KAAKsI,mBACL,MACF,IAAK,SACH,IAAKtI,KAAKyE,OAAQ,OAClB/C,EAAM0G,iBACNpI,KAAKmH,cAAc,CAAEa,aAAc,OACnC,MACF,IAAK,OACH,IAAKhI,KAAKyE,OAAQ,OAClB/C,EAAM0G,iBACNpI,KAAKyG,cAAc,SACnB,MACF,IAAK,MACH,IAAKzG,KAAKyE,OAAQ,OAClB/C,EAAM0G,iBACNpI,KAAKyG,cAAc,OACnB,MACF,IAAK,MACHzG,KAAKmH,gBACL,M,EAKE,WAAAQ,CAAYpK,EAAewK,EAA0D,IAC3F,MAAMH,YAAEA,EAAc,KAAIC,UAAEA,EAAY,MAASE,EAEjD,GAAIH,EAAa,CACf5H,KAAK0E,MAAQnH,C,CAGf,MAAMgL,EAAkBhL,EAAMuD,OAAO0H,cACrC,MAAMC,EAAQzI,KAAK8E,mBACnB,MAAM4D,EAAWH,EAAkBE,EAAME,QAAOrC,GAAQtG,KAAK4I,aAAatC,EAAMiC,KAAoB,IAAIE,GAExG,MAAMI,EAAqB7I,KAAK2E,aAAe,EAAI3E,KAAK4E,cAAc5E,KAAK2E,aAAejC,UAE1F1C,KAAK4E,cAAgB8D,EACrB1I,KAAK8I,qBAAqBJ,GAE1B,IAAInC,EAAYsC,EAAqBH,EAASK,QAAQF,IAAuB,EAE7E,GAAIH,EAASrG,SAAW,EAAG,CACzBrC,KAAK2E,aAAe,C,KACf,CACL,GAAI4B,KAAe,EAAG,CACpBA,EAAYvG,KAAKwG,wBAAwB,EAAG,E,CAE9CxG,KAAK2E,YAAc4B,C,CAGrBvG,KAAKsH,6BAEL,MAAM0B,EAAUT,EAAkB,IAAIhL,EAAMuD,UAAY4B,UACxD1C,KAAKyF,iBAAiBiD,EAASrG,OAAQ2G,GAEvC,GAAInB,EAAW,CACb7H,KAAKiJ,eAAe1L,E,EAKhB,cAAA0L,CAAe1L,GACrB,MAAM2L,EAAQlJ,KAAKmJ,qBAEnB,GAAInJ,KAAKwE,cAAe,CACtBsB,OAAOC,aAAa/F,KAAKwE,c,CAG3B,MAAMxD,EAAO,KACXhB,KAAKT,WAAWyB,KAAKzD,EAAM,EAG7B,GAAI2L,EAAQ,EAAG,CACblJ,KAAKwE,cAAgBsB,OAAOsD,WAAWpI,EAAMkI,GAC7C,M,CAGFlI,G,CAGM,kBAAAmI,GACN,UAAWnJ,KAAK+D,WAAa,UAAY/D,KAAK+D,SAAW,EAAG,CAC1D,OAAO/D,KAAK+D,Q,CAEd,GAAI/D,KAAKyD,OAAS,eAAgB,CAChC,OAAOH,C,CAET,OAAO,C,CAGD,kBAAAoE,CAAmBnK,EAAewK,EAA4C,IACpF,IAAK,CAAC,SAAU,gBAAgBd,SAASjH,KAAKyD,MAAO,CACnD,M,CAGF,IAAKlG,EAAO,CACV,GAAIwK,EAAQsB,qBAAuB,MAAO,CACxCrJ,KAAK0E,MAAQ,E,CAEf,M,CAGF,MAAM4E,EAAQtJ,KAAK8E,mBAAmByE,MAAKjD,GAAQA,EAAK/I,QAAUA,IAClE,GAAI+L,EAAO,CACTtJ,KAAK0E,MAAQ1E,KAAKwJ,oBAAoBF,E,EAIlC,gBAAAhB,GACN,GAAItI,KAAK2E,YAAc,EAAG,OAC1B,MAAM8E,EAAWzJ,KAAK4E,cAAc5E,KAAK2E,aACzC,IAAK8E,GAAYA,EAASlL,SAAU,OACpCyB,KAAK0J,gBAAgBD,E,CAGf,eAAAC,CAAgBpD,GACtB,MAAMqD,EAA2B,CAC/BpM,MAAO+I,EAAK/I,MACZC,MAAOwC,KAAKwJ,oBAAoBlD,GAChC/H,SAAU+H,EAAK/H,UAEjByB,KAAKzC,MAAQ+I,EAAK/I,MAClByC,KAAKyH,0BACLzH,KAAKgF,eAAehE,KAAK,CAAEsF,KAAMqD,IACjC3J,KAAKmH,cAAc,CAAEa,aAAc,OACnC,GAAI,CAAC,SAAU,gBAAgBf,SAASjH,KAAKyD,MAAO,CAClDzD,KAAK0E,MAAQ1E,KAAKwJ,oBAAoBlD,GACtCtG,KAAK2H,YAAY,GAAI,CAAEC,YAAa,MAAOC,UAAW,O,KACjD,CACL7H,KAAK2H,YAAY,GAAI,CAAEE,UAAW,O,CAEpC7H,KAAK2E,aAAe,C,CAGd,WAAAsB,GACNjG,KAAKN,UAAUkK,QACf5J,KAAKsE,aAAasF,O,CAGZ,mBAAAhE,GACN,IAAK5F,KAAKsE,YAAa,OACvBtE,KAAKsE,YAAYxC,aAAa,OAAQ,YACtC9B,KAAKsE,YAAYxC,aAAa,oBAAqB,QACnD9B,KAAKsE,YAAYxC,aAAa,gBAAiBM,OAAOpC,KAAKyE,SAC3DzE,KAAKsE,YAAYxC,aAAa,gBAAiB9B,KAAKmE,WACpD,GAAInE,KAAK2E,aAAe,EAAG,CACzB,MAAMkF,EAAa7J,KAAK4E,cAAc5E,KAAK2E,aAC3C,GAAIkF,GAAYjK,GAAI,CAClBI,KAAKsE,YAAYxC,aAAa,wBAAyB+H,EAAWjK,G,MAE/D,CACLI,KAAKsE,YAAYwF,gBAAgB,wB,EAI7B,0BAAAvC,GACN,GAAIvH,KAAK2E,YAAc,EAAG,OAC1B,MAAM2B,EAAOtG,KAAK4E,cAAc5E,KAAK2E,aACrC,IAAK2B,EAAM,OACXtG,KAAK+J,mBAAkB,KACrBzD,EAAK0D,eAAe,CAAEC,MAAO,UAAW,G,CAIpC,sBAAAvD,GACN,IAAK1G,KAAKyE,SAAWzE,KAAKzC,MAAO,CAC/B,M,CAEF,MAAM+L,EAAQtJ,KAAK4E,cAAc2E,MAAKjD,GAAQA,EAAK/I,QAAUyC,KAAKzC,SAAUyC,KAAK8E,mBAAmByE,MAAKjD,GAAQA,EAAK/I,QAAUyC,KAAKzC,QACrI,IAAK+L,EAAO,CACV,M,CAEFtJ,KAAK+J,mBAAkB,KACrBT,EAAMU,eAAe,CAAEC,MAAO,UAAW,G,CAIrC,0BAAAC,CAA2BjJ,EAAwBjB,KAAKuE,SAC9D,IAAKtD,EAAM,CACT,M,CAEF,MAAMkJ,EAAWlJ,EAAKmJ,iBAAiB,CAAEC,QAAS,OAClD,MAAMC,EAAcH,EAASxB,QAAQ1I,GAAgCA,EAAGsK,UAAY,mBACpFvK,KAAKwF,mBAAmB8E,E,CAGlB,kBAAA9E,CAAmB8E,GACzBtK,KAAK8E,mBAAqB,IAAIwF,GAC9BtK,KAAKwK,gBACLxK,KAAK2H,YAAY3H,KAAK0E,MAAO,CAAEmD,UAAW,QAC1C7H,KAAKyH,wBAAwBzH,KAAKzC,OAClCyC,KAAK0H,mBAAmB1H,KAAKzC,MAAO,CAAE8L,mBAAoB,QAC1D,GAAI,CAAC,SAAU,gBAAgBpC,SAASjH,KAAKyD,OAASzD,KAAKzC,MAAO,CAChEyC,KAAK2H,YAAY,GAAI,CAAEC,YAAa,MAAOC,UAAW,O,EAIlD,aAAA2C,GACNxK,KAAK8E,mBAAmB2F,SAAQ,CAACnE,EAAMoE,KACrC,IAAKpE,EAAK1G,GAAI,CACZ0G,EAAK1G,GAAK,GAAGI,KAAKmE,oBAAoBuG,G,KAKpC,mBAAAlB,CAAoBlD,GAC1B,OAAOA,EAAK9I,OAAS8I,EAAKqE,aAAa7J,QAAU,E,CAG3C,YAAA8H,CAAatC,EAAyBiC,GAC5C,MAAMqC,EAAW,GAAGtE,EAAK9I,OAAS,MAAM8I,EAAK/I,OAAS,KAAKiL,cAC3D,OAAOoC,EAAS3D,SAASsB,E,CAGnB,oBAAAO,CAAqB+B,GAC3B,MAAMC,EAAa,IAAIC,IAAIF,GAC3B7K,KAAK8E,mBAAmB2F,SAAQnE,IAC9B,MAAM0E,EAAaF,EAAWG,IAAI3E,GAClCA,EAAK4E,QAAUF,EACf,GAAIA,EAAY,CACd1E,EAAKwD,gBAAgB,c,KAChB,CACLxD,EAAKxE,aAAa,cAAe,O,CAEnCwE,EAAK6E,OAAS,KAAK,G,CAIf,uBAAA1D,CAAwBlK,EAAgByC,KAAKzC,OACnD,IAAKyC,KAAK8E,mBAAmBzC,OAAQ,CACnC,M,CAEFrC,KAAK8E,mBAAmB2F,SAAQnE,IAC9BA,EAAKmD,SAAW2B,QAAQ7N,IAAU+I,EAAK/I,QAAUA,CAAK,G,CAIlD,0BAAA+J,GACNtH,KAAK8E,mBAAmB2F,SAAQnE,GAASA,EAAK6E,OAAS,QACvD,GAAInL,KAAK2E,YAAc,EAAG,CACxB,M,CAEF,MAAMkF,EAAa7J,KAAK4E,cAAc5E,KAAK2E,aAC3C,GAAIkF,EAAY,CACdA,EAAWsB,OAAS,I,EAIhB,uBAAA3E,CAAwB6E,EAAoBC,GAClD,MAAM7C,EAAQzI,KAAK4E,cACnB,MAAMvC,EAASoG,EAAMpG,OACrB,IAAKA,EAAQ,CACX,OAAQ,C,CAEV,IAAIkJ,GAAoBF,EAAahJ,EAAUA,GAAUA,EACzD,IAAImJ,EAAW,EACf,MAAOA,EAAWnJ,EAAQ,CACxB,MAAMoJ,EAAYhD,EAAM8C,GACxB,GAAIE,IAAcA,EAAUlN,SAAU,CACpC,OAAOgN,C,CAETA,IAAqBA,EAAkBD,GAAajJ,EAAUA,GAAUA,EACxEmJ,GAAY,C,CAEd,OAAQ,C,CAGF,aAAA/E,CAAciF,GACpB,IAAK1L,KAAK4E,cAAcvC,OAAQ,CAC9BrC,KAAK2E,aAAe,EACpB,M,CAEF,MAAM2G,EAAYI,IAAS,QAAU,GAAK,EAC1C,MAAML,EAAaK,IAAS,QAAU,EAAI1L,KAAK4E,cAAcvC,OAAS,EACtErC,KAAK2E,YAAc3E,KAAKwG,wBAAwB6E,EAAYC,E,CAGtD,eAAAjD,CAAgBiD,GACtB,MAAMK,EAAW3L,KAAK4E,cAAcvC,OAAS,EAC7C,IAAKsJ,EAAU,CACb3L,KAAK2E,aAAe,EACpB,M,CAEF,GAAI3E,KAAK2E,eAAiB,EAAG,CAC3B3E,KAAKyG,cAAc6E,IAAc,EAAI,QAAU,OAC/C,M,CAEFtL,KAAK2E,YAAc3E,KAAKwG,wBAAwBxG,KAAK2E,YAAc2G,EAAWA,E,CAGxE,uBAAAM,CAAwBlK,GAC9B,MAAMqF,SAAcrF,EAAMsF,eAAiB,WAAatF,EAAMsF,eAAiB,GAC/E,IAAK,MAAMrF,KAAUoF,EAAM,CACzB,GAAIpF,GAAWA,EAAuB4I,UAAY,iBAAkB,CAClE,OAAO5I,C,EAGX,OAAOe,S,CAGDmJ,mBAAsBnK,IAC5B,MAAM4E,EAAOtG,KAAK4L,wBAAwBlK,GAC1C,IAAK4E,GAAQA,EAAK/H,SAAU,CAC1B,M,CAEFmD,EAAM0G,iBACNpI,KAAK0J,gBAAgBpD,EAAK,EAGpBwF,yBAA4BpK,IAClC,MAAM4E,EAAOtG,KAAK4L,wBAAwBlK,GAC1C,IAAK4E,EAAM,CACT,M,CAEF5E,EAAM0G,gBAAgB,EAGhB2D,iBAAoBrK,IAC1B,MAAMT,EAAOS,EAAMC,OACnB3B,KAAKuE,QAAUtD,EACfjB,KAAKkK,2BAA2BjJ,EAAK,EAEvC,MAAAkC,GACE,MAAM6I,EAAahM,KAAK4E,cAAcvC,OAAS,EAC/C,MAAM4J,EAAcjM,KAAKyD,OAAS,eAClC,MAAMyI,EAAclM,KAAK8E,mBAAmBzC,OAAS,EAErD,MAAM8J,GAAkBnM,KAAKwD,UAAYwI,KAAgBC,IAAgBC,GACzE,MAAME,EAAqBD,EAAiBnM,KAAKqE,aAAe3B,UAEhE,OACEJ,EAAC+J,EAAI,CAAAlE,IAAA,4CACH7F,EAAA,YAAA6F,IAAA,2CAAUmE,KAAI,KAACC,MAAK,KAACC,UAAU,SAASC,KAAK,QAAO,YAAW,WAAU,oBAAoB,GAAItB,OAAQnL,KAAKyE,QAC5GnC,EAAA,YAAA6F,IAAA,2CACElH,KAAK,SACLsB,MAAM,aAAY,eACJvC,KAAK+E,QACnBnB,UAAW5D,KAAK4D,UAChBC,KAAM7D,KAAK6D,KACXtG,MAAOyC,KAAK0E,MACZf,aAAc3D,KAAK2D,aACnBhB,IAAK1C,GAAOD,KAAKN,SAAWO,EAC5B6D,WAAY9D,KAAK8D,WACjBtG,MAAOwC,KAAKxC,MACZkG,KAAM1D,KAAK0D,KACXgJ,OAAQ,IAAM1M,KAAKkF,mBAAmBlE,OACtCgC,aAAa,MACbvF,YAAauC,KAAKvC,aAAe,SACjCkP,QAAS3M,KAAKiI,YACd2E,QAAS5M,KAAKkI,iBAAgB,aAClB,KACVlI,KAAK2H,YAAY,IACjB3H,KAAKkG,OACLlG,KAAKiF,cAAcjE,MAAM,GAG1BhB,KAAKwD,SAAWlB,EAAA,cAAA6F,IAAA,2CAAYlH,KAAK,QAElCqB,EAAA,WAAA6F,IAAA,2CAASlH,KAAK,QAAQ3D,KAAK,mBAAkB,cAAa,SAC1DgF,EAAA,QAAA6F,IAAA,2CAAM7K,KAAK,MAAM2D,KAAK,SAExBqB,EAAA,OAAA6F,IAAA,2CAAK5F,MAAM,OAAOsK,KAAK,gBACrBvK,EAAA,KAAA6F,IAAA,2CAAG5F,MAAM,UAAU3C,GAAII,KAAKoE,gBAAc,8BAG1C9B,EAAA,MAAA6F,IAAA,2CACE5F,MAAM,UACN3C,GAAII,KAAKmE,UACT0I,KAAK,UAAS,kBACG7M,KAAKoE,eAAc,mBAClBgI,EAAkB,YACzBpM,KAAKwD,QAAU,OAASd,UACnCoK,QAAS9M,KAAK6L,mBACdkB,cAAe/M,KAAK8L,0BAEnB9L,KAAKwD,SACJlB,EAAA,MAAA6F,IAAA,2CAAI5F,MAAM,gBAAgBsK,KAAK,gBAC7BvK,EAAA,cAAA6F,IAAA,6CACA7F,EAAA,KAAA6F,IAAA,qEAGJ7F,EAAA,QAAA6F,IAAA,2CAAM6E,aAAchN,KAAK+L,mBACxBI,GACC7J,EAAA,MAAA6F,IAAA,2CAAI5F,MAAM,cAAcsK,KAAK,eAAejN,GAAII,KAAKqE,cACnD/B,EAAA,WAAA6F,IAAA,2CAAS7K,KAAK,cAAa,cAAa,SACxCgF,EAAA,KAAA6F,IAAA,oEAMV7F,EAAA,QAAA6F,IAAA,2CAAM5F,MAAM,UAAS,YAAW,UAC7BvC,KAAK6E,mB,CAMN,gBAAAY,CAAiBwH,EAAqBjE,GAC5C,IAAKiE,EAAa,CAChBjN,KAAK6E,kBAAoBmE,EAAU,kBAAkBA,IAAY,uBACjE,M,CAEF,MAAMkE,EAASD,IAAgB,EAAI,SAAW,UAC9CjN,KAAK6E,kBAAoBmE,EAAU,GAAGiE,KAAeC,SAAclE,IAAY,GAAGiE,KAAeC,a,CAG3F,iBAAAnD,CAAkBoD,GACxB,UAAWhH,wBAA0B,WAAY,CAC/CA,uBAAsB,IAAMgH,MAC5B,M,CAEF/D,WAAW+D,EAAU,E,oJCjoBzB,MAAMC,EAAkB,q7CACxB,MAAAC,EAAeD,E,MCMFE,EAAY,M,yBACE/P,MACAC,MACAe,SAAoB,MACL4M,OAAkB,MAClB1B,SAAoB,MAE5D,MAAAtG,GACE,OACEb,EAAC+J,EAAI,CAAAlE,IAAA,2CAAC0E,KAAK,SAAQ,gBAAgB7M,KAAKyJ,SAAW,OAAS,QAAO,gBAAiBzJ,KAAKzB,SAAW,OAAS,SAC3G+D,EAAA,UAAA6F,IAAA,2CAAQ5F,MAAO,yBAA0B1E,KAAK,SAAS0P,SAAS,KAAKhP,SAAUyB,KAAKzB,SAAUkE,KAAK,QACjGH,EAAA,WAAA6F,IAAA,2CAAS5F,MAAM,qBAAqBjF,KAAK,UACzCgF,EAAA,OAAA6F,IAAA,2CAAK5F,MAAM,uBAAuBE,KAAK,WACrCH,EAAA,QAAA6F,IAAA,+C,aCpBZ,MAAMqF,EAAiB,wQACvB,MAAAC,EAAeD,E,MCWFE,EAAW,M,iJAIdC,OACApQ,MACAqQ,gBAEAC,iBAGiBC,aAGjBC,KAG4BC,WAAqB,gDAGtBC,UAAoB,8BAGXC,mBAA6B,IAG7BC,iBAGLC,YAEtBrJ,QAAU,KACVsJ,mBAAqB,MACrBnP,aAAuB,GAEhCoP,QACAC,OACAC,OACAC,aACAC,cAAgB,MAChBC,gBACAC,iBAA6B,GAC7BC,gBAA4B,GAEpC,iBAAA9O,GACE,IAAKC,KAAK2N,OAAQ,CAChB,MAAM,IAAImB,MAAM,2C,CAElB9O,KAAK+O,qBAAqB/O,KAAK8N,a,CAGjC,gBAAA1N,GACEJ,KAAKwO,OAASxO,KAAKC,GAAG+O,YAAY9N,cAAc,QAChDlB,KAAKwO,QAAQS,iBAAiB,aAAcjP,KAAK+L,kBACjD/L,KAAKkP,2BACLlP,KAAKmP,oB,CAGP,oBAAAtJ,GACE7F,KAAKoP,yBACLpP,KAAKqP,qBACLrP,KAAKwO,QAAQc,oBAAoB,aAActP,KAAK+L,kBACpD/L,KAAKuP,sB,CAIG,wBAAMC,GACd,GAAIxP,KAAKqO,oBAAsBrO,KAAK0O,cAAe,OAC3C1O,KAAKyP,iB,EAKL,kCAAMC,CAA6BC,GAC3C3P,KAAK+O,qBAAqBY,GAC1B,GAAI3P,KAAKqO,mBAAoB,OACrBrO,KAAKyP,iB,EAKL,oBAAAG,GACR5P,KAAKqP,qBACLrP,KAAKmP,oB,CAIG,sBAAAU,CAAuBrP,EAAkBC,GACjD,GAAID,IAAaC,EAAU,OAC3BT,KAAK8P,sB,CAIG,qBAAAC,CAAsBvP,EAAkBC,GAChD,GAAID,IAAaC,EAAU,OAC3BT,KAAK8P,sB,CAGC,oBAAAf,CAAqBY,GAC3B3P,KAAKqO,mBAAqB2B,KAAK3O,MAAMe,OAAOuN,GAAQ,O,CAG9C,WAAAM,CAAYC,GAClB,IAAKA,EAAM,MAAO,GAClB,OAAOA,EACJC,MAAM,UACNC,KAAIC,GAASA,EAAMvP,SACnB6H,OAAOyC,Q,CAIF,2BAAMkF,CAAsBX,EAAeY,GACnD,GAAIC,OAAOC,GAAGd,EAAMY,GAAW,OAE/BvQ,KAAK0Q,YAAYf,EAAM,CAAEgB,mBAAoB,KAAMC,WAAY,QAC/D,GAAI5Q,KAAKqO,oBAAsBrO,KAAK0O,cAAe,OAC3C1O,KAAKyP,iB,EAIP1D,iBAAmB,KACzB/L,KAAKkP,0BAA0B,EAGzB,wBAAAA,GACN,MAAM2B,EAAQ7Q,KAAK8Q,kBACnB,GAAID,IAAU7Q,KAAKsO,QAAS,OAE5BtO,KAAKoP,yBACL,IAAKyB,EAAO,OAEZ7Q,KAAKsO,QAAUuC,EACf7Q,KAAK0O,cAAgB,MACrB1O,KAAK+Q,yBAEL,MAAMC,EAAehR,KAAKiR,qBAC1BjR,KAAK0Q,YAAYM,EAAc,CAAEL,oBAAqB3Q,KAAKqO,mBAAoBuC,WAAY,OAC3F,IAAK5Q,KAAKqO,mBAAoB,CAC5BrO,KAAKkR,mBAAmBlR,KAAK+E,Q,EAIzB,eAAA+L,GACN,MAAMK,EAAenR,KAAKwO,QAAQpE,iBAAiB,CAAEC,QAAS,QAAWjF,MAAMC,KAAKrF,KAAKC,GAAGmR,UAC5F,MAAMC,EAAWF,EAAaxI,QAAO2I,GAAQA,EAAKC,WAAaC,KAAKC,eAEpE,GAAIJ,EAAShP,SAAW,EAAG,CACzBd,QAAQmQ,KAAK,qEACb,OAAOhP,S,CAGT,GAAI2O,EAAShP,OAAS,EAAG,CACvBd,QAAQmQ,KAAK,+DAA+DL,EAAShP,2B,CAGvF,OAAOgP,EAAS,E,CAGV,sBAAAN,GACN,IAAK/Q,KAAKsO,QAAS,OAEnBtO,KAAK2R,uBAEL3R,KAAK4O,iBAAmB5O,KAAKiQ,YAAYjQ,KAAKgO,YAC9ChO,KAAK6O,gBAAkB7O,KAAKiQ,YAAYjQ,KAAKiO,WAE7CjO,KAAK4O,iBAAiBnE,SAAQmH,GAAa5R,KAAKsO,QAASW,iBAAiB2C,EAAW5R,KAAK6R,oBAC1F7R,KAAK6O,gBAAgBpE,SAAQmH,GAAa5R,KAAKsO,QAASW,iBAAiB2C,EAAW5R,KAAK8R,kB,CAGnF,oBAAAH,GACN,IAAK3R,KAAKsO,QAAS,OACnBtO,KAAK4O,iBAAiBnE,SAAQmH,GAAa5R,KAAKsO,QAASgB,oBAAoBsC,EAAW5R,KAAK6R,oBAC7F7R,KAAK6O,gBAAgBpE,SAAQmH,GAAa5R,KAAKsO,QAASgB,oBAAoBsC,EAAW5R,KAAK8R,mBAC5F9R,KAAK4O,iBAAmB,GACxB5O,KAAK6O,gBAAkB,E,CAGjB,sBAAAO,GACN,GAAIpP,KAAKsO,QAAS,CAChBtO,KAAK2R,uBACL3R,KAAKsO,QAAU5L,S,CAEjB1C,KAAKuP,sB,CAGC,oBAAAO,GACN,IAAK9P,KAAKsO,QAAS,OACnBtO,KAAK+Q,wB,CAGCc,iBAAoBnQ,IAC1B,IAAK1B,KAAKsO,QAAS,OACnB,MAAMyD,EAAY/R,KAAKgS,kBAAkBtQ,GACzC1B,KAAK0O,cAAgB,KACrB1O,KAAK0Q,YAAYqB,EAAU,EAGrBD,gBAAkBG,UACxB,IAAKjS,KAAKsO,QAAS,OACnBtO,KAAK0O,cAAgB,KACrB,GAAI1O,KAAKqO,mBAAoB,OACrBrO,KAAKyP,iB,GAIP,iBAAAuC,CAAkBtQ,GACxB,GAAI,WAAYA,GAASA,EAAM,kBAAoBA,EAAM,YAAc,UAAY,UAAYA,EAAsBiI,OAAQ,CAC3H,OAAQjI,EAA0CiI,OAAOpM,K,CAG3D,MAAMoE,EAASD,EAAMC,OACrB,GAAIA,GAAU,UAAWA,EAAQ,CAC/B,OAAOA,EAAOpE,K,CAGhB,OAAOyC,KAAKiR,oB,CAGN,kBAAAA,GACN,GAAIjR,KAAKzC,QAAUmF,UAAW,CAC5B,OAAO1C,KAAKzC,K,CAEd,IAAKyC,KAAKsO,QAAS,OAAO5L,UAC1B,GAAI,UAAW1C,KAAKsO,QAAS,CAC3B,OAAOtO,KAAKsO,QAAQ/Q,K,CAEtB,OAAOyC,KAAKsO,QAAQ4D,eAAe,Q,CAG7B,WAAAxB,CAAYqB,EAAoBhK,EAAkE,IACxG,MAAMwI,EAAWvQ,KAAKyO,aACtBzO,KAAKyO,aAAesD,EAEpB,GAAIhK,EAAQ6I,aAAe,QAAUJ,OAAOC,GAAGF,EAAUwB,GAAY,CACnE/R,KAAKoO,YAAYpN,KAAK,CAAEzD,MAAOyC,KAAKyO,c,CAGtC,IAAK1G,EAAQ4I,oBAAsB3Q,KAAKqO,oBAAsBrO,KAAK0O,cAAe,CAChF1O,KAAKmS,oB,EAID,0BAAMC,CAAqBC,EAAe,OAChD,IAAKrS,KAAK2N,OAAQ,OAAO,KACzB,MAAMpQ,EAAQyC,KAAKyO,cAAgBzO,KAAKiR,qBACxCjR,KAAKyO,aAAelR,EACpB,IAAI+U,EACJ,GAAItS,KAAK4N,gBAAiB,CACxB0E,QAAetS,KAAK2N,OAAO4E,eAAehV,E,KACrC,CACL+U,EAAStS,KAAK2N,OAAO6E,UAAUjV,E,CAGjC,MAAMkV,EAAeH,EAAOI,QAC5B,MAAMC,EAAmB3S,KAAK+E,QAC9B/E,KAAK+E,QAAU0N,EAEf,IAAKH,EAAOI,QAAS,CACnB1S,KAAKd,aAAeoT,EAAO9T,MAAMoU,OAAO,IAAIC,SAAW,E,KAClD,CACL7S,KAAKd,aAAe,E,CAGtB,MAAM4T,EAAgBT,GAAiBrS,KAAKqO,oBAAsBrO,KAAK0O,cACvE,GAAIoE,EAAe,CACjB9S,KAAKkR,mBAAmBuB,GACxB,GAAIE,IAAqBF,EAAc,CACrCzS,KAAK+S,sB,EAIT,OAAON,C,CAGD,kBAAAvB,CAAmB8B,GACzB,IAAKhT,KAAKsO,QAAS,OACnB,GAAI0E,EAAO,CACThT,KAAKsO,QAAQxE,gBAAgB,e,KACxB,CACL9J,KAAKsO,QAAQxM,aAAa,eAAgB,O,EAItC,oBAAAiR,GACN/S,KAAKmO,iBAAiBnN,KAAK,CAAEgS,MAAOhT,KAAK+E,QAASxH,MAAOyC,KAAKyO,c,CAGxD,kBAAAU,GACNnP,KAAKuO,OAASvO,KAAKiT,iBACnBjT,KAAKuO,QAAQU,iBAAiB,SAAUjP,KAAKkT,iBAAkB,K,CAGzD,kBAAA7D,GACNrP,KAAKuO,QAAQe,oBAAoB,SAAUtP,KAAKkT,iBAAkB,MAClElT,KAAKuO,OAAS7L,S,CAGR,cAAAuQ,GACN,UAAWE,WAAa,aAAenT,KAAK+N,KAAM,CAChD,MAAMqF,EAAWD,SAASE,eAAerT,KAAK+N,MAC9C,GAAIqF,GAAYA,aAAoBE,gBAAiB,CACnD,OAAOF,C,EAGX,OAAOpT,KAAKC,GAAGsT,QAAQ,O,CAGjBL,iBAAmBjB,UACzBjS,KAAK0O,cAAgB,KACrB,MAAMsE,QAAchT,KAAKyP,kBACzB,IAAKuD,IAAUhT,KAAKqO,mBAAoB,CACtCrO,KAAKqO,mBAAqB,I,GAItB,wBAAM8D,CAAmBqB,EAAY,OAC3CxT,KAAKuP,uBACL,MAAMrG,EAAQuK,OAAOzT,KAAKkO,oBAC1B,GAAIsF,IAAcE,SAASxK,IAAUA,GAAS,EAAG,CAC/C,aAAalJ,KAAKoS,qBAAqB,K,CAGzCpS,KAAK2O,gBAAkBvF,YAAW6I,UAChCjS,KAAK2O,gBAAkBjM,gBACjB1C,KAAKoS,qBAAqB,KAAK,GACpClJ,GAEH,OAAOlJ,KAAK+E,O,CAGN,qBAAM0K,GACZ,aAAazP,KAAKmS,mBAAmB,K,CAG/B,oBAAA5C,GACN,GAAIvP,KAAK2O,kBAAoBjM,UAAW,CACtCqD,aAAa/F,KAAK2O,iBAClB3O,KAAK2O,gBAAkBjM,S,EAI3B,MAAAS,GACE,OACEb,EAAC+J,EAAI,CAAAlE,IAAA,4CACH7F,EAAA,QAAA6F,IAAA,8CACEnI,KAAK+E,SAAW/E,KAAK6N,kBACrBvL,EAAA,QAAA6F,IAAA,2CAAM1F,KAAK,gBAAgBF,MAAM,iBAC9BvC,KAAKd,c","ignoreList":[]}