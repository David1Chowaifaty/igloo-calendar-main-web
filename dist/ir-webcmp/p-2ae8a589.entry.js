import{r as i,h as t,H as r}from"./p-acddcbeb.js";import{T as e}from"./p-f8b7c0cd.js";import{B as a}from"./p-b9d3f324.js";import{R as s}from"./p-ac9c6afc.js";import{a as o}from"./p-41cebba3.js";import"./p-bf44a732.js";import"./p-b859bcd5.js";import"./p-ced9b97a.js";import"./p-6c4ba7c0.js";import"./p-d6d6fb27.js";import"./p-2925ded6.js";import"./p-e58470d9.js";import"./p-15acbbbe.js";const n=".sc-ir-arrivals-h{box-sizing:border-box !important}.sc-ir-arrivals-h *.sc-ir-arrivals,.sc-ir-arrivals-h *.sc-ir-arrivals::before,.sc-ir-arrivals-h *.sc-ir-arrivals::after{box-sizing:inherit !important;padding:0;margin:0}[hidden].sc-ir-arrivals{display:none !important}";const h=n;const l=".sc-ir-arrivals-h{display:flex;flex-direction:column;gap:var(--wa-space-l, 1.5rem);min-height:100vh}.page-title.sc-ir-arrivals{font-family:var(--wa-font-family-heading);font-weight:var(--wa-font-weight-heading);line-height:var(--wa-line-height-condensed);text-wrap:balance;font-size:var(--wa-font-size-xl)}";const p=l;const d=class{constructor(t){i(this,t)}ticket;propertyid;language="en";p;bookingNumber;booking;paymentEntries;isPageLoading;payment;tokenService=new e;roomService=new s;bookingService=new a;paymentFolioRef;componentWillLoad(){if(this.ticket){this.tokenService.setToken(this.ticket);this.init()}}handleTicketChange(i,t){if(i!==t&&i){this.tokenService.setToken(this.ticket);this.init()}}handleBookingPayment(i){i.stopImmediatePropagation();i.stopPropagation();const{booking_nbr:t,payment:r}=i.detail;this.booking=o.bookings.find((i=>i.booking_nbr===t));const e=this.paymentEntries.types.find((i=>i.CODE_NAME===r.payment_type.code));this.payment={...r,payment_type:{code:e.CODE_NAME,description:e.CODE_VALUE_EN,operation:e.NOTES}};this.paymentFolioRef.openFolio()}handleOpen(i){this.bookingNumber=i.detail}async init(){try{this.isPageLoading=true;const[i,t,r]=await Promise.all([this.roomService.getExposedProperty({id:this.propertyid||0,language:this.language,aname:this.p}),this.roomService.fetchLanguage(this.language),this.bookingService.getSetupEntriesByTableNameMulti(["_BED_PREFERENCE_TYPE","_DEPARTURE_TIME","_PAY_TYPE","_PAY_TYPE_GROUP","_PAY_METHOD"])]);const{pay_type:e,pay_type_group:a,pay_method:s}=this.bookingService.groupEntryTablesResult(r);this.paymentEntries={types:e,groups:a,methods:s}}catch(i){}finally{this.isPageLoading=false}}render(){if(this.isPageLoading){return t("ir-loading-screen",null)}return t(r,null,t("ir-toast",{style:{display:"none"}}),t("ir-interceptor",{style:{display:"none"}}),t("h3",{class:"page-title"},"Arrivals"),t("ir-arrivals-filters",null),t("ir-arrivals-table",null),t("ir-drawer",{onDrawerHide:i=>{i.stopImmediatePropagation();i.stopPropagation();this.bookingNumber=null},withoutHeader:true,open:!!this.bookingNumber,style:{"--ir-drawer-width":"80rem","--ir-drawer-background-color":"#F2F3F8","--ir-drawer-padding-left":"0","--ir-drawer-padding-right":"0","--ir-drawer-padding-top":"0","--ir-drawer-padding-bottom":"0"}},this.bookingNumber&&t("ir-booking-details",{hasPrint:true,hasReceipt:true,hasCloseButton:true,onCloseSidebar:()=>this.bookingNumber=null,is_from_front_desk:true,propertyid:this.propertyid,hasRoomEdit:true,hasRoomDelete:true,bookingNumber:this.bookingNumber.toString(),ticket:this.ticket,language:this.language,hasRoomAdd:true})),t("ir-payment-folio",{style:{height:"auto"},bookingNumber:this.booking?.booking_nbr,paymentEntries:this.paymentEntries,payment:this.payment,mode:"payment-action",ref:i=>this.paymentFolioRef=i,onCloseModal:()=>{this.booking=null;this.payment=null}}))}static get watchers(){return{ticket:["handleTicketChange"]}}};d.style=h+p;export{d as ir_arrivals};
//# sourceMappingURL=p-2ae8a589.entry.js.map