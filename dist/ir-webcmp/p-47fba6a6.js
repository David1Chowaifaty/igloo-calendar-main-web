import{c as n}from"./p-41fabaeb.js";import{c as t}from"./p-63e31ab3.js";const i=[10,20,50,100];function e(){const n=v();return{tasksList:n,currentPage:1,mobileCurrentPage:1,pageSize:n[0],mobilePageSize:n[0],totalPages:0,totalItems:0}}const o={searchField:"",tasks:[],filteredTasks:[],selectedTasks:[],pagination:e(),filters:null,isLoading:false,isFiltersLoading:false,isExportLoading:false,archiveOpen:false,archiveData:[],archiveFilters:{from_date:null,to_date:null,filtered_by_hkm:[],filtered_by_unit:[]},archiveLoading:null,sorting:{field:"date",direction:"ASC"},modalOpen:false,sidebarOpen:false};const{state:r,onChange:a}=n(o);function s(n){r.searchField=n;r.pagination.currentPage=1;m()}function u(n){const t=r.tasks.length===0;r.tasks=n;if(t||g(n.length)){d()}m()}function l(n){r.pagination=Object.assign(Object.assign({},r.pagination),n)}function c(n){l({pageSize:n,currentPage:1});b()}function f(n){if(n>=1&&n<=r.pagination.totalPages){l({currentPage:n})}}function d(){const n=v();l({tasksList:n,pageSize:n[0],mobilePageSize:n[0]});b()}function v(){if(!t.roomsInfo){return i}const n=t.roomsInfo.length;if(n<=10){return i}const e=[...Array(4)].map(((t,i)=>{const e=n*(i+1);return i===3?e<100?100:e:e}));return e}function g(n){const t=Math.max(...r.pagination.tasksList);return n>t*1.5||n<t*.5}function m(){var n,t;const i=(t=(n=r===null||r===void 0?void 0:r.searchField)===null||n===void 0?void 0:n.toLowerCase())!==null&&t!==void 0?t:"";if(!i){r.filteredTasks=[...r.tasks]}else{r.filteredTasks=r.tasks.filter((n=>{var t,e,o,r,a;return((e=(t=n.unit)===null||t===void 0?void 0:t.name)===null||e===void 0?void 0:e.toLowerCase().includes(i))||((r=(o=n.status)===null||o===void 0?void 0:o.description)===null||r===void 0?void 0:r.toLowerCase().includes(i))||((a=n.housekeeper)===null||a===void 0?void 0:a.toLowerCase().includes(i))}))}b()}function b(){const n=r.filteredTasks.length;const t=Math.max(1,Math.ceil(n/r.pagination.pageSize));l({totalItems:n,totalPages:t,currentPage:Math.min(r.pagination.currentPage,t)})}function P(){const n=(r.pagination.currentPage-1)*r.pagination.pageSize;const t=n+r.pagination.pageSize;return r.filteredTasks.slice(n,t)}function p(){const{mobileCurrentPage:n,mobilePageSize:t}=r.pagination;const i=(n-1)*t;const e=i+t;return r.filteredTasks.slice(0,e)}function h(){const{mobileCurrentPage:n,mobilePageSize:t}=r.pagination;return!(t*(n-1)+t>=r.filteredTasks.length)}function S(n){if(!h()){return}l({mobileCurrentPage:n})}function C(n){r.selectedTasks=n}function k(){r.selectedTasks=[]}function z(n){const t=r.selectedTasks.findIndex((t=>t.id===n.id));if(t>-1){r.selectedTasks=r.selectedTasks.filter((t=>t.id!==n.id))}else{r.selectedTasks=[...r.selectedTasks,n]}}function L(n){r.selectedTasks=[...n]}function _(n){r.isLoading=n}function j(n,t){r.sorting={field:n,direction:t};r.tasks=O(r.tasks);m()}function O(n=r.filteredTasks){const{field:t,direction:i}=r.sorting;return[...n].sort(((n,e)=>{var o,r,a,s,u,l,c,f;let d=n[t];let v=e[t];if(t==="status"){d=(o=n.status)===null||o===void 0?void 0:o.description;v=(r=e.status)===null||r===void 0?void 0:r.description}else if(t==="unit"){d=(a=n.unit)===null||a===void 0?void 0:a.name;v=(s=e.unit)===null||s===void 0?void 0:s.name}if(d<v)return i==="ASC"?-1:1;if(d>v)return i==="ASC"?1:-1;if(n.date<e.date)return-1;if(n.date>e.date)return 1;if(((u=n.unit)===null||u===void 0?void 0:u.name)<((l=e.unit)===null||l===void 0?void 0:l.name))return-1;if(((c=n.unit)===null||c===void 0?void 0:c.name)>((f=e.unit)===null||f===void 0?void 0:f.name))return 1;return 0}))}function A(){return r.tasks.filter((n=>{const t=new Date(n.date);const i=new Date;i.setHours(23,59,59,999);return t<=i}))}function M(){const n=A();return n.length>0&&r.selectedTasks.length===n.length}export{u as a,C as b,k as c,s as d,j as e,L as f,A as g,r as h,M as i,P as j,p as k,f as l,c as m,h as n,S as o,_ as s,z as t,d as u};
//# sourceMappingURL=p-47fba6a6.js.map