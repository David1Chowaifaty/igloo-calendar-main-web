{"version":3,"names":["VariationService","formatVariationBasedOnInfants","params","variation","this","getVariationBasedOnInfants","formatVariation","infants","calculateVariationAmount","_a","discounted_amount","variations","baseVariation","adult_nbr","child_nbr","find","v","Math","max","infant_nbr","adultNumber","Number","infantNumber","adultLabel","locales","entries","Lcz_Adults","toLowerCase","Lcz_Adult","childLabel","Lcz_Children","Lcz_Child","infantLabel","_b","_d","_c","parts","filter","Boolean","join","iglApplicationInfoCss","IglApplicationInfo","constructor","hostRef","bedPreferenceType","bookingType","totalNights","isButtonPressed","variationService","componentWillLoad","isSingleUnit","rateplanSelection","roomtype","id","filteredRooms","filterRooms","length","updateGuest","unit","toString","roomTypeId","ratePlanId","ratePlan","prevGuest","guest","roomIndex","Object","assign","booking_store","ratePlanSelections","handleButtonClicked","event","detail","key","getTooltipMessages","selected_variation","selectedVariation","guestInfo","matchingVariation","cancellationPolicy","_e","applicable_policies","p","type","combined_statement","guaranteePolicy","_g","_f","tooltip","undefined","getAmount","is_amount_modified","view_mode","rp_amount","discounted_gross_amount","result","calendar_data","is_frontdesk_enabled","assignable_units","forEach","Is_Fully_Available","push","name","pr_id","filteredGuestsRoom","_","i","map","r","filteredResults","includes","baseData","roomtypeId","f","sort","a","b","localeCompare","render","filteredRoomList","formattedVariation","h","Host","class","short_name","is_non_refundable","message","innerHTML","formatAmount","currency","symbol","Lcz_Stay","v4","first_name","placeholder","onInput","target","value","event_type","modifyBookingStore","required","last_name","onChange","selected","_h","Lcz_Assignunits","room","is_bed_configuration_enabled","_j","bed_preference","_k","Lcz_BedConfiguration","data","CODE_NAME","CODE_VALUE_EN","_l","style","gap","marginTop","_m","width","_o","Array","from","item","iglBlockDatesViewCss","IglBlockDatesView","isEventHover","renderAgain","blockDatesData","RELEASE_AFTER_HOURS","OPTIONAL_REASON","OUT_OF_SERVICE","releaseList","bookingService","BookingService","getBlockedInfo","defaultData","parseInt","emitData","error","handleOptionalReason","handleReleaseAfterChange","evt","entryDate","renderPage","dataUpdateEvent","emit","getReleaseHoursString","dt","Date","entryHour","entryMinute","setHours","getHours","getMinutes","toLocaleString","month","getDate","formatNumber","handleOutOfService","checked","console","log","fromDate","toDate","from_date","dateOption","showDateDifference","to_date","Lcz_Reason","Lcz_OutOfservice","Lcz_Or","Lcz_OptionalReason","Lcz_AutomaticReleaseIn","releaseItem","Lcz_On","IglBookPropertyService","setBookingInfoFromAutoComplete","context","res","bookedByInfoData","email","firstName","lastName","countryId","country_id","isdCode","country_phone_prefix","contactNumber","mobile","selectedArrivalTime","arrival","emailGuest","subscribe_to_news_letter","remark","cardNumber","cardHolderName","expiryMonth","expiryYear","bookingNumber","booking_nbr","rooms","resetRoomsInfoAndMessage","roomsInfo","onDataRoomUpdate","selectedUnits","isEdit","isEditBooking","units","changedKey","roomCategoryKey","roomCategoryId","ratePlanKey","shouldClearData","Map","initializeRoomCategoryIfNeeded","has","get","applyBookingEditToSelectedRoom","setSelectedRoomData","cleanupEmptyData","set","selectedRatePlans","totalRooms","inventory","delete","fill","size","clear","guestName","roomId","calculateAmount","total_days","nights","generateDailyRates","rate_plan","amount","n","date","night","cost","getBookedRooms","check_in","check_out","notes","identifier","override_unit","auto_check_in","rateplanId","rateplan","reserved","prepayment_amount_gross","occupancy","children_nbr","moment","format","days","city","address","dob","cci","prepareBookUserServiceParams","sourceOption","dateRangeData","Error","generateNewRooms","isEventType","bookingData","PR_ID","modifyBookingDetails","pickup_info","extra_services","is_direct","is_in_loyalty_mode","promo_key","extras","rest","__rest","assign_units","is_pms","booking","newBooking","currentRoomType","newRooms","in_out","code","isAgent","agent","tag","property","propertyid","booked_on","hour","minute","source","nbr","holder_name","expiry_month","expiry_year","getRoomCategoryByRoomId","roomCategory","RATE_TYPE","setEditingRoomInfo","category","room_id","RATE_PLAN_ID","adultCount","ADULTS_COUNT","rate","RATE","rateType","roomCategoryName","ratePlanName","RATE_PLAN","NAME","cancelation","guarantee","adult_child_offering","iglBookPropertyCss","IglBookProperty","showPaymentDetails","adultChildCount","adult","child","bookingHistory","initialRoomIds","showSplitBookingOption","sourceOptions","guestData","ratePricingMode","bookPropertyService","updatedBooking","MAX_HISTORY_LENGTH","handleKeyDown","bind","initializeDefaultDateRange","defaultDateRange","initializeDefaultData","wasBlockedUnit","hasOwnProperty","fetchSetupEntriesAndInitialize","initializeEventData","componentDidLoad","document","addEventListener","disconnectedCallback","removeEventListener","clearBooking","e","stopImmediatePropagation","stopPropagation","handleSpiltBookingSelected","getExposedBooking","language","handleAdultChildChange","updateBookingHistory","adults","children","onDateRangeSelect","opt","dates","checkIn","checkOut","checkBookingAvailability","handleSourceDropDown","selectedSource","description","gotoSplitPageTwo","gotoPage","bookUser","closeWindow","animateIrSelect","calculateTotalRooms","animateIrButton","toast","Lcz_SelectRatePlan","title","partialData","lastEntry","newEntry","shift","FROM_DATE","TO_DATE","setupEntries","fetchSetupEntries","setSourceOptions","allowedBookingSources","setOtherProperties","initializeEditBookingData","initializePage","CHILDREN_COUNT","roomName","GUEST","page","isGuestDataIncomplete","isButtonDisabled","isValidProperty","comparedBy","bookingSource","SOURCE","arrivalTime","resetBookingStore","is_in_agent_mode","room_type_ids_to_update","room_type_ids","getBookingAvailability","agent_id","updateBooking","roomtype_id","reserveRooms","checkAndBlockDate","block_exposed_unit_props","isAvailable","roomTypes","every","rt","is_available_to_book","handleBlockDate","closeBookingWindow","didReservation","handleBlockDateUpdate","handleGuestInfoUpdate","guestRefKey","handleBookedByInfoUpdate","getPageBlockDatesView","Fragment","ENTRY_DATE","onDataUpdateEvent","text","Lcz_Cancel","btn_color","onClick","Lcz_Blockdates","isLoading","isRequestPending","handlePageTwoDataUpdateEvent","auto_close","props","releaseData","dateToFormattedString","NOTES","STAY_STATUS_CODE","DESCRIPTION","blockUnit","setLoadingState","serviceParams","doReservation","resetBookingEvt","resetLoadingState","setTimeout","getCurrentPage","BLOCK_DATES_TITLE","TITLE","onIconClickHandler","slot","xmlns","viewBox","height","d","defaultDaterange","eventType","selectedRooms","adultChildConstraints","propertyId","selectedGuestData","countries","defaultGuestData","isEditOrAddRoomEvent","iglBookPropertyFooterCss","IglBookPropertyFooter","disabled","editNext","label","renderButton","icon_name","shouldRenderTwoButtons","btn_disabled","onClickHandler","buttonClicked","iconPosition","icon_style","paddingBottom","Lcz_Next","iglBookPropertyHeaderCss","IglBookPropertyHeader","splitBookingId","getSplitBookingList","Lcz_Tobooking","keys","bookingDataDefaultDateRange","Lcz_BookingNumber","onComboboxValue","spiltBookingSelected","isSplitBooking","getSourceNode","Lcz_Source","sourceDropDownChange","option","obj","adultChild","getAdultChildConstraints","testId","selectedValue","onSelectChange","select_id","firstOption","Lcz_AdultsCaption","LabelAvailable","adult_max_nbr","child_max_nbr","renderChildCaption","btn_id","icon","Lcz_Check","maxAge","child_max_age","years","Lcz_Years","Lcz_Year","Lcz_ChildCaption","Lcz_ChooseBookingNumber","position","initialToDate","initialFromDate","selectedFromDate","selectedToDate","isBefore","isAfter","Lcz_CheckInDateShouldBeMAx","replace","Lcz_PlzSelectNumberOfGuests","minDate","getTime","showSourceNode","variant","dateLabel","Lcz_Dates","add","startOf","tax_statement","iglBookingFormCss","IglBookingForm","initializeGuestData","selectedBookedByData","total","newSelectedUnits","getRate","isRateModified","preference","dateDifference","TOTAL_PRICE","handleOnApplicationInfoDataUpdateEvent","index","categoryIdKey","updatedUnits","handleEventData","showBookAndCheckin","checkin_enabled","isSame","Lcz_TotalPrice","values","val","rp","Lcz_Back","btn_styles","Lcz_Save","Lcz_Book","Lcz_BookAndChekcIn","iglBookingOverviewPageCss","IglBookingOverviewPage","getSplitBookings","splitBookingEvents","setMinDate","today","splitBookings","roomType","isBookDisabled","roomInfoId","roomsDataUpdate","iglDateRangeCss","IglDateRange","withDateDifference","fromDateStr","toDateStr","initializeDates","handleDataChange","newValue","oldValue","JSON","stringify","setDate","getFormattedDateString","calculateTotalNights","calculateDaysBetweenDates","getFullYear","handleDateSelectEvent","dateSelectEvent","handleDateChange","start","end","maxDate","autoApply","onDateChanged","Lcz_Nights","Lcz_Night","iglPropertyBookedByCss","IglPropertyBookedBy","arrivalTimeList","expiryMonths","expiryYears","currentMonth","bookedByData","assignCountryCode","initializeExpiryYears","initializeDateData","populateBookedByData","currentYear","country","getUserDefaultCountry","getMonth","handleCountryChange","handleNumberInput","inputElement","inputValue","numericRegex","test","checkUser","z","string","safeParse","success","getUserInfo","mobile_without_prefix","prevBookedByData","checkout_guest","handleComboboxChange","clearEvent","Lcz_BookedBy","Lcz_FindEmailAddress","onInputCleared","danger_border","validateEmail","Lcz_FirstName","Lcz_LastName","Lcz_Country","onCountryChange","c","Lcz_MobilePhone","phone_prefix","default_country","onTextChange","Lcz_YourArrivalTime","time","Lcz_AnyMessageForUs","rows","Lcz_CardNumber","pattern","Lcz_CardHolderName","Lcz_ExpiryDate","year","htmlFor","Lcz_EmailTheGuest","iglRatePlanCss","IglRatePlan","disableForm","shouldBeDisabled","visibleInventory","updateRateplanSelection","currentSelections","handleVariationChange","bookProperty","resetReserved","reserveRoom","renderRate","amount_per_night_gross","updateRoomParams","updatedSelections","reduce","acc","ratePlans","rpAcc","isAvailableToBook","formattedVariations","split","uuidv4","Lcz_Rate","Lcz_Current","Lcz_Select","iglRoomTypeCss","IglRoomType","roomsDistributions","validBookingTypes","isValidBookingType","rateplans","getVisibleInventory","irAutocompleteCss","IrAutocomplete","duration","inputId","selectedIndex","isComboBoxVisible","inputFocused","no_result_found","Lcz_NoResultsFound","dataSize","itemHeight","getHeightOfPElement","preventDefault","adjustScrollPosition","selectItem","inputRef","blur","combobox","el","querySelector","pItem","offsetHeight","visibleHeight","margin","itemTotalHeight","selectedPosition","newScrollTop","min","scrollHeight","scrollTo","top","behavior","isItemSelected","comboboxValue","resetCombobox","debounceFetchData","clearTimeout","debounceTimer","fetchData","fetchExposedGuest","fetchExposedBookings","handleInputChange","handleDocumentClick","contains","handleBlur","isDropdownItem","activeElement","inputCleared","element","closest","handleFocus","handleItemKeyDown","renderDropdown","role","onKeyDown","tabIndex","clearInput","withblur","onBlur","autoComplete","onFocus","ref","irBookingDetailsCss","IrBookingDetails","ticket","is_from_front_desk","hasPrint","hasReceipt","hasDelete","hasMenu","hasRoomEdit","hasRoomDelete","hasRoomAdd","hasCheckIn","hasCheckOut","hasCloseButton","bookingItem","statusData","calendarData","rerenderFlag","sidebarState","isUpdateClicked","isPMSLogLoading","modalState","roomService","RoomService","paymentService","PaymentService","token","Token","printingBaseUrl","setToken","initializeApp","ticketChanged","handleSideBarEvents","sidebarPayload","payload","handleIconClick","closeSidebar","Lcz_EmailBookingto","loading","modalRef","openModal","openPrintingScreen","window","location","href","ID","EMAIL","PHONE","REFERENCE_TYPE","ARRIVAL","Lcz_AddingUnitToBooking","BOOKING_NUMBER","ADD_ROOM_TO_BOOKING","ROOMS","handleResetExposedCancellationDueAmount","paymentActions","GetExposedCancellationDueAmount","currency_id","handleEditInitiated","handleRoomGuestsUpdate","guests","currentRoomIndex","findIndex","currentRoom","updatedRoom","sharing_persons","handleResetBooking","resetBooking","handleEditExtraService","selectedService","setRoomsData","roomServiceResp","roomsData","My_Result","roomtypes","expanded","roomResponse","languageTexts","countriesList","bookingDetails","bedPreference","Promise","all","getExposedProperty","aname","fetchLanguage","getCountries","getSetupEntriesByTableName","property_id","then","direction","myResult","allowed_payment_methods","paymentMethods","allowed_booking_sources","adult_child_constraints","calendar_legends","legendData","paymentCodesToShow","some","method","warn","mode","version","open","system_id","url","axios","post","ExceptionMsg","handleCloseBookingWindow","handleDeleteFinish","bookingChanged","handleModalConfirm","sendBookingConfirmationEmail","closeModal","renderSidebarContent","handleClose","isInSideBar","headerShown","onCloseSideBar","bookingDates","to","defaultPickupData","numberOfPersons","onCloseModal","service","totalGuests","sharedPersons","checkin","hasEmail","status","is_editable","showCheckin","handleRoomCheckin","showCheckout","handleRoomCheckout","bedPreferences","isEditable","myRoomTypeFoodCat","mealCodeName","bookingIndex","onDeleteFinished","Lcz_ExtraServices","modalBody","leftBtnText","rightBtnText","Lcz_Confirm","autoClose","onConfirmModal","onCancelModal","side","onIrSidebarToggle","showCloseButton","onCloseBookingWindow","is_automatic_check_in_out","isSameOrAfter","irBookingExtraNoteCss","IrBookingExtraNote","note","setNote","getPrivateNote","savePrivateNote","prevExtras","newExtraObj","oldPrivateNoteIndex","Is_Non_Technical_Change","Lcz_PrivateNote","displayContext","onSubmit","Lcz_PrivateNote_MaxChar","maxLength","btn_type","irBookingHeaderCss","IrBookingHeader","bookingStatus","confirmationBG","handleSelectChange","updateStatus","Lcz_SelectStatus","changeExposedBookingStatus","book_nbr","Lcz_StatusUpdatedSuccessfully","openDialog","currentDialogStatus","dialogRef","renderDialogBody","Lcz_Booking","channel_booking_nbr","flexWrap","allowed_actions","selectContainerStyle","selectStyles","textSize","Lcz_EventsLog","is_pms_enabled","Lcz_pms","colorVariants","danger","onOpenChange","irButtonCss","IrButton","btn_block","visibleBackgroundOnHover","renderContentAsHtml","handleButtonAnimation","buttonEl","classList","remove","bounce","clickHandler","blockClass","btnStyle","labelStyle","irCheckboxCss","IrCheckbox","checkboxId","currentChecked","handleCheckedChange","checkboxRef","setAttribute","handleCheckChange","checkChange","indeterminate","tabindex","irComboboxCss","IrCombobox","autoFocus","input_id","actualIndex","filteredData","componentShouldAutoFocus","focusInput","watchHandler","requestAnimationFrame","focus","selectedItem","scrollIntoView","block","comboboxValueChange","startsWith","blurTimout","onMouseEnter","image","src","handleSubmit","onlineResources","isCSS","link","IrCommon","extraResources","resources","parseRefs","initializeStyles","hrefsChanged","parse","appendTag","tagName","attributes","createElement","selectorParts","attr","selector","existingTag","head","appendChild","rel","isJS","irCountryPickerCss","IrCountryPicker","autoValidate","filteredCountries","searching","selectedCountry","newCountry","oldCountry","filterCountries","selectCountry","debounceTimeout","countryChange","scrollToSelected","dropdownItem","shouldShowPropertyCountry","propertyCountry","onInputFocus","onInputBlur","trim","flag","alt","aspectRatio","borderRadius","bottom","right","left","auto","basePlacements","clippingParents","viewport","popper","reference","variationPlacements","placement","concat","placements","beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite","modifierPhases","getNodeName","nodeName","getWindow","node","ownerDocument","defaultView","isElement","OwnElement","Element","isHTMLElement","HTMLElement","isShadowRoot","ShadowRoot","applyStyles","_ref","state","elements","styles","removeAttribute","effect","_ref2","initialStyles","options","strategy","arrow","styleProperties","attribute","applyStyles$1","enabled","phase","fn","requires","getBasePlacement","round","getUAString","uaData","navigator","userAgentData","brands","isArray","brand","userAgent","isLayoutViewport","getBoundingClientRect","includeScale","isFixedStrategy","clientRect","scaleX","scaleY","offsetWidth","visualViewport","addVisualOffsets","x","offsetLeft","y","offsetTop","getLayoutRect","abs","parent","rootNode","getRootNode","next","isSameNode","parentNode","host","getComputedStyle","isTableElement","indexOf","getDocumentElement","documentElement","getParentNode","assignedSlot","getTrueOffsetParent","offsetParent","getContainingBlock","isFirefox","isIE","elementCss","currentNode","css","transform","perspective","contain","willChange","getOffsetParent","getMainAxisFromPlacement","within","mathMax","mathMin","withinMaxClamp","getFreshSideObject","mergePaddingObject","paddingObject","expandToHashMap","hashMap","toPaddingObject","padding","rects","_state$modifiersData$","arrowElement","popperOffsets","modifiersData","basePlacement","axis","isVertical","len","arrowRect","minProp","maxProp","endDiff","startDiff","arrowOffsetParent","clientSize","clientHeight","clientWidth","centerToReference","center","offset","axisProp","centerOffset","_options$element","arrow$1","requiresIfExists","getVariation","unsetSides","roundOffsetsByDPR","win","dpr","devicePixelRatio","mapToStyles","_Object$assign2","popperRect","offsets","gpuAcceleration","adaptive","roundOffsets","isFixed","_offsets$x","_offsets$y","_ref3","hasX","hasY","sideX","sideY","heightProp","widthProp","offsetY","offsetX","commonStyles","_ref4","_Object$assign","computeStyles","_ref5","_options$gpuAccelerat","_options$adaptive","_options$roundOffsets","computeStyles$1","passive","instance","_options$scroll","scroll","_options$resize","resize","scrollParents","scrollParent","update","eventListeners","hash","getOppositePlacement","matched","getOppositeVariationPlacement","getWindowScroll","scrollLeft","pageXOffset","scrollTop","pageYOffset","getWindowScrollBarX","getViewportRect","html","layoutViewport","getDocumentRect","_element$ownerDocumen","winScroll","body","scrollWidth","isScrollParent","_getComputedStyle","overflow","overflowX","overflowY","getScrollParent","listScrollParents","list","isBody","updatedList","rectToClientRect","rect","getInnerBoundingClientRect","clientTop","clientLeft","getClientRectFromMixedType","clippingParent","getClippingParents","canEscapeClipping","clipperElement","getClippingRect","boundary","rootBoundary","mainClippingParents","firstClippingParent","clippingRect","accRect","computeOffsets","commonX","commonY","mainAxis","detectOverflow","_options","_options$placement","_options$strategy","_options$boundary","_options$rootBoundary","_options$elementConte","elementContext","_options$altBoundary","altBoundary","_options$padding","altContext","clippingClientRect","contextElement","referenceClientRect","popperClientRect","elementClientRect","overflowOffsets","offsetData","multiply","computeAutoPlacement","flipVariations","_options$allowedAutoP","allowedAutoPlacements","allPlacements","allowedPlacements","overflows","getExpandedFallbackPlacements","oppositePlacement","flip","_skip","_options$mainAxis","checkMainAxis","_options$altAxis","altAxis","checkAltAxis","specifiedFallbackPlacements","fallbackPlacements","_options$flipVariatio","preferredPlacement","isBasePlacement","referenceRect","checksMap","makeFallbackChecks","firstFittingPlacement","_basePlacement","isStartVariation","mainVariationSide","altVariationSide","checks","check","numberOfChecks","_loop","_i","fittingPlacement","slice","_ret","reset","flip$1","getSideOffsets","preventedOffsets","isAnySideFullyClipped","hide","preventOverflow","referenceOverflow","popperAltOverflow","referenceClippingOffsets","popperEscapeOffsets","isReferenceHidden","hasPopperEscaped","hide$1","distanceAndSkiddingToXY","invertDistance","skidding","distance","_options$offset","_data$state$placement","offset$1","popperOffsets$1","getAltAxis","_options$tether","tether","_options$tetherOffset","tetherOffset","tetherOffsetValue","normalizedTetherOffsetValue","offsetModifierState","_offsetModifierState$","mainSide","altSide","additive","minLen","maxLen","arrowPaddingObject","arrowPaddingMin","arrowPaddingMax","arrowLen","minOffset","maxOffset","clientOffset","offsetModifierValue","tetherMin","tetherMax","preventedOffset","_offsetModifierState$2","_mainSide","_altSide","_offset","_len","_min","_max","isOriginSide","_offsetModifierValue","_tetherMin","_tetherMax","_preventedOffset","preventOverflow$1","getHTMLElementScroll","getNodeScroll","isElementScaled","getCompositeRect","elementOrVirtualElement","isOffsetParentAnElement","offsetParentIsScaled","order","modifiers","visited","Set","modifier","dep","depModifier","orderModifiers","orderedModifiers","debounce","pending","resolve","mergeByName","merged","current","existing","DEFAULT_OPTIONS","areValidElements","arguments","args","_key","popperGenerator","generatorOptions","_generatorOptions","_generatorOptions$def","defaultModifiers","_generatorOptions$def2","defaultOptions","createPopper","effectCleanupFns","isDestroyed","setOptions","setOptionsAction","cleanupModifierEffects","m","runModifierEffects","forceUpdate","_state$elements","_state$orderedModifie","_state$orderedModifie2","destroy","onFirstUpdate","_ref$options","cleanupFn","noopFn","t","module","exports","s","o","defineProperty","enumerable","prototype","call","default","R","months","day","eventChangeViewDate","eventChangeCurrentView","eventChangeFocusDate","eventChangeSelectedDate","eventChangeTime","eventChangeLastSelectedDate","actionSelectDate","actionUnselectDate","cssClassWeekend","classes","inline","locale","daysShort","daysMin","monthsShort","dateFormat","timeFormat","firstDay","startDate","weekends","altField","altFieldDateFormat","toggleSelected","keyboardNav","selectedDates","container","isMobile","visible","view","minView","showOtherMonths","selectOtherMonths","moveToOtherMonthsOnSelect","showOtherYears","selectOtherYears","moveToOtherYearsOnSelect","disableNavWhenOutOfRange","multipleDates","multipleDatesSeparator","range","dynamicRange","buttons","monthsField","showEvent","fixedHeight","prevHtml","nextHtml","navTitles","timepicker","onlyTimepicker","dateTimeSeparator","minHours","maxHours","minMinutes","maxMinutes","hoursStep","minutesStep","onSelect","onChangeViewDate","onChangeView","onRenderCell","onShow","onHide","onClickDayName","className","innerHtml","attrs","hours","dayPeriod","l","fullMonth","fullDate","getDay","fullHours","hours12","fullHours12","minutes","fullMinutes","floor","u","g","D","DocumentFragment","matches","w","isNaN","k","RegExp","$","Symbol","toPrimitive","TypeError","String","configurable","writable","C","dp","opts","$cell","focused","isDisabled","_handleSelectedStatus","_handleRangeStatus","removeFocus","_getHtml","_handleClasses","singleType","customData","init","cellType","datepicker","_createElement","_bindDatepickerEvents","disableDate","on","onChangeSelectedDate","onChangeFocusDate","unbindDatepickerEvents","off","adpCell","_getClassName","isDateDisabled","_isOutOfMinMaxRange","isWeekend","isOtherMonth","isOtherDecade","focusDate","rangeDateTo","rangeDateFrom","_checkIfDateIsSelected","select","removeSelect","_handleInitialFocusStatus","hasSelectedDates","M","S","T","isMinViewReached","down","_handleAlreadySelectedDates","selectDate","getAttribute","dayIndex","show","setFocusDate","handleClick","handleDayNameClick","pressed","rangeFromFocused","rangeToFocused","setMinutes","replaceDate","isVisible","currentView","destroyCells","_generateCells","cells","$cells","$el","_buildBaseHtml","renderDayNames","_bindEvents","onMouseOverCell","onMouseOutCell","onClickBody","onMouseDown","onMouseMove","onMouseUp","onChangeCurrentView","$names","_getDayNamesHtml","_generateCell","getDatesFunction","getDaysDates","viewDate","getMonthsDates","parsedViewDate","getYearsDates","F","V","dataset","action","_resetNavStatus","handleNavStatus","isFinalView","up","$prev","$next","$title","_getTitle","_defineDOM","onClickNav","onClickNavTitle","isNavIsFunction","renderDelay","formatDate","_disableNav","querySelectorAll","content","setViewDate","H","removeChild","clearHtml","generateButtons","createButton","attachEventToButton","E","L","timepickerIsActive","updateTime","setMinMaxTime","setCurrentTime","addTimeToDate","setTime","updateText","trigger","$minutesText","$hoursText","toggle","toggleTimepickerIsActive","match","ampm","lastSelectedDate","buildHtml","defineDOM","bindDatepickerEvents","bindDOMEvents","onChangeLastSelectedDate","$ranges","onChangeInputRange","onMouseEnterLeave","displayHours","$hours","$minutes","$ampm","setMinMaxTimeFromOptions","setMinTimeFromMinDate","setMaxTimeFromMaxDate","updateSliders","_hours","O","A","hotKeys","getInitialFocusDate","getClampedDate","viewDateTransition","pressedKeys","which","registerKey","isHotKeyPressed","handleHotKey","isArrow","focusNextCell","removeKey","bindKeyboardEvents","onKeyUp","N","__events","removeAllEvents","I","P","j","B","buildGlobalContainer","hideAnimation","_destroyComponents","$container","$datepicker","customHide","$target","$pointer","isViewChange","done","_finishHide","scrollY","scrollX","cssText","$altField","_getInputValue","_cancelScheduledCall","_onTransitionEnd","once","decade","curDecade","viewIndexes","elIsInput","setPosition","views","shouldUpdateDOM","$content","silent","_onFocus","_onBlur","_onResize","_removeMobileAttributes","nav","$customContainer","treatAsInline","_createMinMaxDates","_limitViewDateByMaxMinDates","_handleLocale","setCurrentView","_setInputValue","$timepicker","_addTimepicker","_addButtons","$buttons","_createMobileOverlay","_addMobileAttributes","_showMobileOverlay","disabledDates","getCell","currentViewSingular","_triggerOnSelect","isOtherYear","inFocus","inited","initialReadonly","defaultGlobalContainerId","_bindSubEvents","_createComponents","_setPositionClasses","$nav","_onClickOverlay","_onChangeSelectedDate","_onChangeFocusedDate","_onChangeTime","insertBefore","nextSibling","_onMouseDown","_onMouseUp","replacer","mm","hh","HH","aa","AA","toUpperCase","EEEE","dd","MM","MMM","MMMM","yy","yyyy","yyyy1","yyyy2","_handleUpDownActions","onBeforeSelect","_updateLastSelectedDate","unselectDate","splice","_scheduleCallAfterTransition","_hasTransition","formattedDate","viewIndex","getPropertyValue","parseFloat","K","en","_default","irDatePickerCss","IrDatePicker","customPicker","forceDestroyOnUpdate","emitEmptyDate","currentDate","triggerSlot","toValidDate","initializeDatepicker","setupTriggerFocusHandling","slotEl","handleTriggerFocus","handleTriggerClick","openDatePicker","datePropChanged","newDate","oldDate","isSameDates","updatePickerDate","minDatePropChanged","newVal","oldVal","datePicker","maxDatePropChanged","openDatePickerTimeout","pickerRef","clearDatePicker","d1","d2","valid","AirDatepicker","localeEn","datePickerBlur","datePickerFocus","dateChanged","completeHide","irDateRangeCss","IrDateRange","monthNames","daysOfWeek","separator","applyLabel","cancelLabel","fromLabel","toLabel","customRangeLabel","weekLabel","singleDatePicker","maxSpan","handleMinDateChange","dateRangeInput","initializeDateRangePicker","updateDateRangePickerDates","click","picker","setStartDate","setEndDate","newStartDate","newEndDate","clone","getElementById","textContent","daterangepicker","opens","endDate","irDateViewCss","IrDateView","handleFromDateChange","handleToDateChange","convertDate","date_difference","isMoment","irDialogCss","IrDialog","isOpen","prepareFocusTrap","openChange","handleOpenChange","focusableElements","focusableContent","shadowRoot","firstFocusableElement","lastFocusableElement","ev","isTabPressed","shiftKey","irEventsLogCss","IrEventsLog","bookingEvents","getExposedBookingEvents","opacity","padStart","second","user","irExtraServiceCss","IrExtraService","deleteService","doBookingExtraService","is_remove","price","currencySymbol","booking_system_id","secondary","editExtraService","irModalRef","start_date","end_date","iconAvailable","Lcz_Delete","leftBtnColor","rightBtnColor","modalTitle","Lcz_Confirmation","Lcz_ThisService","Lcz_FromThisBooking","ZIdInfo","object","union","literal","optional","number","ZSharedPerson","coerce","nullable","refine","isValid","isDDMMYYYY","id_info","ZSharedPersons","array","ExtraServiceSchema","irExtraServiceConfigCss","IrExtraServiceConfig","s_service","saveAmenity","ZodError","updateService","prevService","validatePrice","priceSchema","pick","Lcz_Description","Lcz_DatesOn","_formatDate","borderLeftWidth","borderRightWidth","Lcz_TillAndIncluding","zod","Lcz_Price","wrapKey","Lcz_Cost","_p","irExtraServicesCss","IrExtraServices","irGuestInfoCss","GuestInfo","getToken","fetchedLocales","fetchGuest","editGuest","editExposedGuest","closeSideBar","Lcz_GuestDetails","Lcz_Email","Lcz_AlternativeEmail","alternative_email","Lcz_Newsletter","color","irHkArchiveCss","IrHkArchive","filters","filtered_by_hkm","filtered_by_unit","fetchedData","minSelectableDate","subtract","houseKeepingService","HouseKeepingService","handleSideBarToggle","selectedBooking","setUpUnits","physicalrooms","getArchivedTasks","export_to_excel","getArchivedHKTasks","is_export_to_excel","tasks","handleDateRangeChange","updateFilters","searchArchive","exportArchive","downloadFile","showFirstOption","housekeeping_store","hk_criteria","housekeepers","Lcz_Search","Lcz_ExportToExcel","house_keeper","customSlot","sidebarStyles","background","onCloseSidebar","irHkTasksCss","IrHkTasks","selectedDuration","selectedHouseKeeper","selectedRoom","archiveOpened","selectedTasks","hkNameCache","table_sorting","handleCloseSidebar","isSidebarOpen","handleSortingChanged","field","propertyData","is_backend","include_units_hk_status","requests","getHkTasks","getExposedHKSetup","results","tasksResult","updateTasks","buildHousekeeperNameCache","hk","housekeeper","hkm_id","hkName","handleHeaderButtonPress","modal","sortingArray","fetchTasksWithFilters","handleModalConfirmation","executeHKAction","actions","unit_id","clearSelectedHkTasks","applyFilters","isApplyFiltersLoading","cleaning_periods","cleaning_frequencies","dusty_units","highlight_check_ins","highlight_window","onHeaderButtonPress","isCleanedEnabled","onApplyFilters","onRowSelectChange","Lcz_NO","Lcz_Yes","irIconCss","IrIcon","iconClickHandler","irIconsCss","IrIcons","svgPath","icons","svgClassName","isString","str","isObject","_obj$constructor","DIRECTION","NONE","LEFT","FORCE_LEFT","RIGHT","FORCE_RIGHT","forceDirection","escapeRegExp","objectIncludes","arrA","arrB","dateA","dateB","regexpA","regexpB","ActionDetails","startChangePos","oldSelection","insertedCount","cursorPos","inserted","substr","removedCount","removed","substring","tail","removeDirection","IMask","InputMask","maskedClass","mask","MaskedRegExp","MaskedPattern","MaskedDate","MaskedNumber","MaskedDynamic","Masked","Function","MaskedFunction","normalizeOpts","instanceOpts","_mask","createMask","nOpts","MaskedClass","MaskElement","selectionStart","_unsafeSelectionStart","selectionEnd","_unsafeSelectionEnd","_unsafeSelect","isActive","KEY_Z","KEY_Y","HTMLMaskElement","input","super","_onKeydown","_onInput","_onBeforeinput","_onCompositionEnd","rootElement","_this$input$getRootNo","_this$input$getRootNo2","_this$input","bindEvents","handlers","drop","commit","_handlers","redo","keyCode","metaKey","ctrlKey","undo","isComposing","selectionChange","inputType","unbindEvents","HTMLInputMaskElement","setSelectionRange","HTMLContenteditableMaskElement","root","selection","getSelection","anchorOffset","focusOffset","createRange","setStart","firstChild","setEnd","lastChild","removeAllRanges","addRange","InputHistory","states","currentIndex","currentState","isEmpty","MAX_LENGTH","go","steps","isContentEditable","masked","_listeners","_value","_unmaskedValue","_rawInputValue","history","_saveSelection","_onChange","_onDrop","_onClick","_onUndo","_onRedo","alignCursor","alignCursorFriendly","updateValue","maskEquals","_this$masked","updateOptions","unmaskedValue","updateControl","rawInputValue","typedValue","typedValueEquals","displayValue","_unbindEvents","_fireEvent","listeners","_cursorChanging","_changingCursorPos","pos","_selection","newUnmaskedValue","newRawInputValue","newDisplayValue","isChanged","_fireChangeEvents","_historyChanging","restOpts","updateMask","updateOpts","optionsIsChanged","updateCursor","_delayUpdateCursor","_abortUpdateCursor","_inputEvent","isComplete","nearestInputPos","handler","hIndex","details","oldRawValue","raw","doCommit","_applyHistoryState","ChangeDetails","normalize","prep","rawInserted","tailShift","skip","aggregate","consumed","equals","ContinuousTailDetails","stop","extend","appendTo","append","_appendPlaceholder","unshift","beforePos","shiftChar","_update","DEFAULTS","_initialized","withValueRefresh","flags","extractInput","isFilled","totalInputPositions","fromPos","toPos","extractTail","appendTail","_appendCharRaw","ch","_appendChar","checkTail","consistentState","doPrepareChar","autofix","noFixState","fixDetails","pad","chDetails","consistentTail","appended","doValidate","beforeTailState","overwrite","tailDetails","_appendEager","_beforeTailState","doPrepare","ci","doSkipInvalid","eager","_refreshing","rawInput","ret","runIsolated","_isolated","skipInvalid","prepare","prepareChar","validate","deleteCount","tailPos","eagerRemove","valLength","tval","EMPTY_VALUES","ChunksTailDetails","chunks","tailChunk","lastChunk","extendLast","firstTailChunk","blockIndex","chunk","lastBlockIter","_mapPosToBlock","chunkBlock","_stops","_blocks","remainChars","cstate","chunkShiftPos","PatternCursor","_log","ok","_blockStartPos","pushState","popState","pop","bindBlock","_pushLeft","_this$block","_pushRight","pushLeftBeforeFilled","pushLeftBeforeInput","pushLeftBeforeRequired","isOptional","pushRightBeforeFilled","pushRightBeforeInput","pushRightBeforeRequired","PatternFixedDefinition","isUnmasking","_isRawInput","minPos","maxPos","appendEager","char","isResolved","PatternInputDefinition","placeholderChar","displayChar","lazy","maskOpts","currentMaskFlags","boundPos","_flags$_beforeTailSta","DEFAULT_DEFINITIONS","search","definitions","_rebuildMask","defs","exposeBlock","_maskedBlocks","unmaskingBlock","optionalBlock","blocks","bNames","bName","expose","repeat","bOpts","blockOpts","maskedBlock","RepeatBlock","isInput","STOP_CHAR","ESCAPE_CHAR","def","maskedState","bi","_this$_mapPosToBlock","startBlockIndex","blockIter","blockDetails","chunkTail","_forEachBlocksInRange","bFromPos","bToPos","blockChunk","_findStopBefore","stopBefore","si","toBlockIndex","startBlockIter","endBlockIndex","_blocks2","accVal","blockStartPos","fromBlockIter","toBlockIter","isSameBlock","fromBlockStartPos","fromBlockEndPos","removeDetails","cursor","maskedBlocks","indices","gi","InputDefinition","FixedDefinition","MaskedRange","_matchFrom","patternOpts","fromStr","toStr","sameCharsCount","boundaries","minstr","maxstr","num","padEnd","firstNonZero","padLength","DefaultPattern","extractPatternOptions","patternBlocks","GET_DEFAULT_BLOCKS","Y","isDateExist","currentMask","exposeMask","compiledMasks","_overwrite","_eager","_skipInvalid","_applyDispatch","prevValueBeforeTail","insertValue","tailValue","prevMask","prevMaskState","doDispatch","_flags$_beforeTailSta2","currentMaskRef","dispatch","currentDetails","_this$currentMask","_this$currentMask2","_this$currentMask3","_this$currentMask4","mi","_autofix","oldMask","_this$currentMask5","inputs","isCurrent","startInputPos","weight","i1","i2","MaskedEnum","enum","enum_","eopts","lengths","requiredLength","optionalLength","matchFrom","matchValue","mch","estr","istr","_MaskedNumber","_updateRegExps","allowNegative","mid","scale","radix","_numberRegExp","_mapToRadixRegExp","mapToRadix","_thousandsSeparatorRegExp","thousandsSeparator","_removeThousandsSeparators","_insertThousandsSeparators","prepCh","allowPositive","_separatorsCount","extendOnSeparators","count","_separatorsCountFromSlice","_adjustRangeWithSeparators","prevBeforeTailValue","prevBeforeTailSeparatorsCount","accepted","fixedNum","UNMASKED_RADIX","appendDetails","beforeTailValue","beforeTailSeparatorsCount","_findSeparatorAround","searchFrom","separatorPos","separatorAroundFromPos","separatorAroundToPos","valueBeforePos","valueAfterPos","separatorAtLeftPos","separatorAtLeftEndPos","separatorAtRightPos","validnum","formatted","normalizeZeros","_normalizeZeros","padFractionalZeros","_padFractionalZeros","sign","zeros","dropFractional","MIN_SAFE_INTEGER","MAX_SAFE_INTEGER","useGrouping","maximumFractionDigits","PIPE_TYPE","MASKED","UNMASKED","TYPED","createPipe","arg","pipe","repeatFrom","Infinity","repeatTo","_this$_blocks","_blockOpts","_allocateBlock","_this$_mapPosToBlock$","allocated","_this$_blocks$bi","_trimEmptyTail","_this$_mapPosToBlock2","_this$_mapPosToBlock3","firstBlockIndex","lastBlockIndex","removeCount","globalThis","irInputTextCss","IrInputText","inputStyles","readonly","submitted","inputStyle","labelPosition","labelBackground","labelColor","labelBorder","labelWidth","initMask","handleMaskChange","handleMaskChange1","handleValueChange","validateInput","maskInstance","textChange","forceValidation","updateErrorState","asyncParse","parseAsync","maskedValue","inputBlur","inputForcedStyle","readOnly","inputFocus","clearBaseStyles","errorMessage","irInterceptorCss","IrInterceptor","isShown","isUnassignedUnit","endpointsCount","isPageLoadingStoped","handledEndpoints","handleStopPageLoading","setupAxiosInterceptors","interceptors","request","use","handleRequest","handleError","response","handleResponse","extractEndpoint","isHandledEndpoint","config","extractedUrl","interceptor_requests","reject","irLabelCss","IrLabel","display","isCountryImage","imageStyle","ignoreEmptyContent","containerStyle","labelText","irLoadingScreenCss","IrLoadingScreen","irModalCss","IrModal","rightBtnActive","leftBtnActive","btnPosition","btnClickHandler","cancelModal","confirmModal","showTitle","irPaymentActionsCss","IrPaymentActions","paymentAction","pa","due_on","generatePayment","irPaymentDetailsCss","IrPaymentDetails","newTableRow","collapsedPayment","collapsedGuarantee","paymentDetailsUrl","paymentExceptionMessage","modal_mode","paymentBackground","handlePaymentGeneration","itemToBeAdded","initializeItemToBeAdded","designation","_processPaymentSave","Lcz_EnterAmount","financial","due_amount","_handleSave","AddPayment","resetExposedCancelationDueAmount","handlePaymentInputChange","cancelPayment","CancelPayment","toBeDeletedItem","newPaymentArray","payments","handleConfirmModal","handleCancelModal","handleBookingDetails","_renderTableRow","rowMode","border","marginLeft","marginRight","rowSpan","colSpan","onKeyPress","formatCurrency","Intl","NumberFormat","minimumFractionDigits","bookingGuarantee","paymentMethod","getPaymentMethod","Lcz_BookingGuarantee","async","getPCICardInfoURL","_s","_r","_q","_u","_t","_x","_w","_v","_0","_z","_y","cvc","_3","_2","_1","frameborder","ota_guarante","_4","card_type","_5","is_virtual","Lcz_CardType","_6","cardholder_name","_7","card_number","_9","_8","meta","virtual_card_current_balance","_11","_10","virtual_card_currency_code","Lcz_CardBalance","checkPaymentCode","pm","payment_code","Lcz_OnCredit","_renderDueDate","gross_cost","Lcz_TotalCost","Lcz_Balance","Lcz_Collected","prev","curr","Lcz_Payments","backgroundColor","Lcz_Amount","Lcz_Designation","Lcz_IfDeletedPermantlyLost","Lcz_EnteringAmountGreaterThanDue","irPhoneInputCss","IrPhoneInput","isDropdownVisible","setCountryFromPhonePrefix","setCurrentCountry","handlePhoneChange","currentCountry","onComboboxValueChange","PickupService","savePickup","splitTime","arrival_time","arrival_date","flight_details","nbr_of_units","number_of_vehicles","selected_option","due_upon_booking","transformDefaultPickupData","renderTime","toFixed","vehicle_type_code","vehicle","getAvailableLocations","locations","pickup_service","allowed_options","createPickupSchema","regex","dateStr","isBetween","nonempty","validateForm","schema","err","issues","path","getNumberOfVehicles","capacity","total_number_of_vehicles","ceil","startNumber","bonus_number","getPickUpPersonStatus","getCodeDescription","allowed_pricing_models","model","updateDue","irPickupCss","IrPickup","allowedOptionsByLocation","pickupData","vehicleCapacity","cause","pickupService","arrival_time_mask","transformedData","pickupSchema","handleLocationChange","updatePickupData","locationChoice","pricing_model","handleVehicleQuantityChange","handleVehicleTypeChange","errors","Lcz_Pickup","Lcz_Pickup_NoThankYou","Lcz_Pickup_YesFrom","Lcz_ArrivalDate","borderTopLeftRadius","borderBottomLeftRadius","Lcz_Time","Lcz_FlightDetails","Lcz_NbrOfVehicles","Lcz_DueUponBooking","irPickupViewCss","IrPickupView","is_enabled","Lcz_Date","_formatTime","pickup_instruction","pickup_cancelation_prepayment","irPmsLogsCss","IrPmsLogs","pmsLogs","fetchPMSLogs","Lcz_PMS_Logs","Lcz_SentAt","sent_date","sent_hour","sent_minute","is_acknowledged","Lcz_YES","Lcz_Acknowledged","irPriceInputCss","IrPriceInput","numValue","initializeMask","minValue","maxValue","hasSpecialClass","ariaLabel","ariaDescription","irRangePickerCss","IrRangePicker","withOverlay","allowNullDates","handleDateChanged","selectedDate","updatedToDate","dateRangeChanged","toDatePicker","handleDatePickerFocus","focusTimeout","date_container","handleDatePickerBlur","renderDatePicker","refCallback","additionalProps","fromDatePicker","irReservationInformationCss","IrReservationInformation","userCountry","guestCountryId","handleEditClick","openSidebar","renderPhoneNumber","privateNote","origin","Label","Icon","Lcz_BookedOn","nbr_confirmed_bookings","Lcz_BookingsNbr","Lcz_Phone","Lcz_Address","Lcz_GuestPrivateNote","Lcz_ArrivalTime","Lcz_Coupon","Lcz_LoyaltyDiscountApplied","Lcz_GuestRemark","Lcz_ChannelNotes","remarks","ota_notes","maxVisibleItems","Lcz_BookingPrivateNote","Lcz_VisibleToHotelOnly","irRoomCss","IrRoom","collapsed","modalReason","isModelOpen","mainGuest","getMainGuest","pressCheckIn","pressCheckOut","handleRoomDataChange","getDateStr","editInitiated","formatName","Lcz_EditBookingFor","ARRIVAL_TIME","COUNTRY","FROM_DATE_STR","IDENTIFIER","IS_EDITABLE","NO_OF_DAYS","POOL","SPLIT_BOOKING","STATUS","TO_DATE_STR","PICKUP_INFO","reason","deleteRoom","handleExposedRoomInOut","room_identifier","resetbooking","oldRooms","deleteFinished","childCount","infantCount","Lcz_Infants","Lcz_Infant","getSmokingLabel","smoking_option","currRT","allowed_smoking_options","ota_meta","smoking_preferences","getBedName","bed","bed_preferences","renderModalMessage","handleCheckIn","showGuestModal","is_main","fontWeight","Lcz_NonRefundable","Lcz_CheckIn","Lcz_CheckOut","fontSize","textAlign","lineHeight","Lcz_Breakdown","_getDay","Lcz_SubTotal","filtered_data","taxes","tx","pct","is_exlusive","Lcz_Excluding","Lcz_Including","ota_taxes","Lcz_SmokingOptions","Lcz_Cancellation","Lcz_Guarantee","Lcz_MealPlan","meal_plan","Lcz_Policies","policies","defaultGuest","full_name","password","dateMask","YYYY","DD","irRoomGuestsCss","IrRoomGuests","idTypes","initializeGuests","COUNTRY_ID","defaultGuestsCount","updateGuestInfo","tempGuests","tempGuest","saveGuests","handleExposedRoomGuests","updateRoomGuests","minWidth","Lcz_MainGuest","Lcz_DOB","Lcz_Nationality","Lcz_Documents","idx","Lcz_PersonsSharingRoom","selectForcedStyles","borderTopRightRadius","borderBottomRightRadius","borderRight","irSelectCss","IrSelect","selectStyle","submited","initial","watchHandler2","selectEl","componentwillload","checkValidity","selectChange","irSidebarCss","IrSidebar","sidebarRef","handleSidebarStylesChange","toggleSidebar","irSidebarToggle","irSpinnerCss","IrSpinner","initStyles","handleSpinnerSizeChange","handleSpinnerBorderWidthChange","handleSpinnerUnitChange","handleSpinnerColorChange","applyCssElement","borderWidth","setProperty","irTasksFiltersCss","IrTasksFilters","baseFilters","ids","dusty_periods","highlight_checkin_options","updateFilter","applyFiltersEvt","resetFilters","irTasksHeaderCss","IrTasksHeader","handleCleanedButtonAnimation","btnRef","headerButtonPress","irTasksTableCss","IrTasksTable","selectedIds","showConfirmModal","sortKey","sortDirection","checkableTasks","sortTasks","assignCheckableTasks","handleSort","newDirection","sortingChanged","handleClearSelectedHkTasks","handleTasksChange","newTasks","sorted","aPrimary","bPrimary","toggleSelection","animateCleanedButton","emitSelectedTasks","filteredTasks","rowSelectChange","allSelected","toggleSelectAll","task","isCheckable","isSameOrBefore","haveManyHousekeepers","onCheckChange","stroke","isSelected","formatted_date","is_highlight","hint","infant","irTextareaCss","IrTextArea","cols","handleAriaInvalidChange","connectedCallback","textareaClassname","irTitleCss","IrTitle","justifyContent","handleJustifyContentChange","irToastCss","IrToast","toasts","onToast","showToast","toastrOptions","positionClass","closeButton","timeOut","toastr","irTooltipCss","IrTooltip","withHtml","toggleOpen","shouldOpen","tooltipTimeout","onMouseLeave","otaLabelCss","OtaLabel","showAll","toggleShowAll","displayedRemarks","statement","Lcz_ShowLess","Lcz_ShowMore"],"sources":["src/services/variation.service.ts","src/components/igloo-calendar/igl-book-property/igl-booking-form/igl-application-info/igl-application-info.css?tag=igl-application-info&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-booking-form/igl-application-info/igl-application-info.tsx","src/components/igloo-calendar/igl-block-dates-view/igl-block-dates-view.css?tag=igl-block-dates-view&encapsulation=scoped","src/components/igloo-calendar/igl-block-dates-view/igl-block-dates-view.tsx","src/components/igloo-calendar/igl-book-property/igl-book-property.service.ts","src/components/igloo-calendar/igl-book-property/igl-book-property.css?tag=igl-book-property&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-book-property.tsx","src/components/igloo-calendar/igl-book-property/igl-book-property-footer/igl-book-property-footer.css?tag=igl-book-property-footer&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-book-property-footer/igl-book-property-footer.tsx","src/components/igloo-calendar/igl-book-property/igl-book-property-header/igl-book-property-header.css?tag=igl-book-property-header&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-book-property-header/igl-book-property-header.tsx","src/components/igloo-calendar/igl-book-property/igl-booking-form/igl-booking-form.css?tag=igl-booking-form&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-booking-form/igl-booking-form.tsx","src/components/igloo-calendar/igl-book-property/igl-booking-overview-page/igl-booking-overview-page.css?tag=igl-booking-overview-page&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-booking-overview-page/igl-booking-overview-page.tsx","src/components/igloo-calendar/igl-date-range/igl-date-range.css?tag=igl-date-range&encapsulation=scoped","src/components/igloo-calendar/igl-date-range/igl-date-range.tsx","src/components/igloo-calendar/igl-book-property/igl-booking-form/igl-property-booked-by/igl-property-booked-by.css?tag=igl-property-booked-by&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-booking-form/igl-property-booked-by/igl-property-booked-by.tsx","src/components/igloo-calendar/igl-book-property/igl-booking-overview-page/igl-room-type/igl-rate-plan/igl-rate-plan.css?tag=igl-rate-plan&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-booking-overview-page/igl-room-type/igl-rate-plan/igl-rate-plan.tsx","src/components/igloo-calendar/igl-book-property/igl-booking-overview-page/igl-room-type/igl-room-type.css?tag=igl-room-type&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-booking-overview-page/igl-room-type/igl-room-type.tsx","src/components/ui/ir-autocomplete/ir-autocomplete.css?tag=ir-autocomplete&encapsulation=scoped","src/components/ui/ir-autocomplete/ir-autocomplete.tsx","src/components/ir-booking-details/ir-booking-details.css?tag=ir-booking-details&encapsulation=scoped","src/components/ir-booking-details/ir-booking-details.tsx","src/components/ir-booking-details/ir-booking-extra-note/ir-booking-extra-note.css?tag=ir-booking-extra-note&encapsulation=scoped","src/components/ir-booking-details/ir-booking-extra-note/ir-booking-extra-note.tsx","src/components/ir-booking-details/ir-booking-header/ir-booking-header.css?tag=ir-booking-header&encapsulation=scoped","src/components/ir-booking-details/ir-booking-header/ir-booking-header.tsx","src/components/ui/ir-button/ir-button.css?tag=ir-button&encapsulation=scoped","src/components/ui/ir-button/ir-button.tsx","src/components/ui/ir-checkbox/ir-checkbox.css?tag=ir-checkbox&encapsulation=scoped","src/components/ui/ir-checkbox/ir-checkbox.tsx","src/components/ui/ir-combobox/ir-combobox.css?tag=ir-combobox&encapsulation=scoped","src/components/ui/ir-combobox/ir-combobox.tsx","src/common/ir.common.resources.ts","src/components/ir-common/ir-common.tsx","src/components/ui/ir-country-picker/ir-country-picker.css?tag=ir-country-picker&encapsulation=scoped","src/components/ui/ir-country-picker/ir-country-picker.tsx","node_modules/@popperjs/core/lib/enums.js","node_modules/@popperjs/core/lib/dom-utils/getNodeName.js","node_modules/@popperjs/core/lib/dom-utils/getWindow.js","node_modules/@popperjs/core/lib/dom-utils/instanceOf.js","node_modules/@popperjs/core/lib/modifiers/applyStyles.js","node_modules/@popperjs/core/lib/utils/getBasePlacement.js","node_modules/@popperjs/core/lib/utils/math.js","node_modules/@popperjs/core/lib/utils/userAgent.js","node_modules/@popperjs/core/lib/dom-utils/isLayoutViewport.js","node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js","node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js","node_modules/@popperjs/core/lib/dom-utils/contains.js","node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js","node_modules/@popperjs/core/lib/dom-utils/isTableElement.js","node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js","node_modules/@popperjs/core/lib/dom-utils/getParentNode.js","node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js","node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js","node_modules/@popperjs/core/lib/utils/within.js","node_modules/@popperjs/core/lib/utils/getFreshSideObject.js","node_modules/@popperjs/core/lib/utils/mergePaddingObject.js","node_modules/@popperjs/core/lib/utils/expandToHashMap.js","node_modules/@popperjs/core/lib/modifiers/arrow.js","node_modules/@popperjs/core/lib/utils/getVariation.js","node_modules/@popperjs/core/lib/modifiers/computeStyles.js","node_modules/@popperjs/core/lib/modifiers/eventListeners.js","node_modules/@popperjs/core/lib/utils/getOppositePlacement.js","node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js","node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js","node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js","node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js","node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js","node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js","node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js","node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js","node_modules/@popperjs/core/lib/utils/rectToClientRect.js","node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js","node_modules/@popperjs/core/lib/utils/computeOffsets.js","node_modules/@popperjs/core/lib/utils/detectOverflow.js","node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js","node_modules/@popperjs/core/lib/modifiers/flip.js","node_modules/@popperjs/core/lib/modifiers/hide.js","node_modules/@popperjs/core/lib/modifiers/offset.js","node_modules/@popperjs/core/lib/modifiers/popperOffsets.js","node_modules/@popperjs/core/lib/utils/getAltAxis.js","node_modules/@popperjs/core/lib/modifiers/preventOverflow.js","node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js","node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js","node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js","node_modules/@popperjs/core/lib/utils/orderModifiers.js","node_modules/@popperjs/core/lib/utils/debounce.js","node_modules/@popperjs/core/lib/utils/mergeByName.js","node_modules/@popperjs/core/lib/createPopper.js","node_modules/@popperjs/core/lib/popper.js","node_modules/air-datepicker/air-datepicker.js","node_modules/air-datepicker/locale/en.js","src/components/ui/ir-date-picker/ir-date-picker.css?tag=ir-date-picker","src/components/ui/ir-date-picker/ir-date-picker.tsx","src/components/ui/ir-date-range/ir-date-range.css?tag=ir-date-range&encapsulation=scoped","src/components/ui/ir-date-range/ir-date-range.tsx","src/components/ir-date-view/ir-date-view.css?tag=ir-date-view&encapsulation=scoped","src/components/ir-date-view/ir-date-view.tsx","src/components/ui/ir-dialog/ir-dialog.css?tag=ir-dialog&encapsulation=shadow","src/components/ui/ir-dialog/ir-dialog.tsx","src/components/ir-booking-details/ir-booking-header/events-log/ir-events-log.css?tag=ir-events-log&encapsulation=scoped","src/components/ir-booking-details/ir-booking-header/events-log/ir-events-log.tsx","src/components/ir-booking-details/ir-extra-services/ir-extra-service/ir-extra-service.css?tag=ir-extra-service&encapsulation=scoped","src/components/ir-booking-details/ir-extra-services/ir-extra-service/ir-extra-service.tsx","src/models/booking.dto.ts","src/components/ir-booking-details/ir-extra-services/ir-extra-service-config/ir-extra-service-config.css?tag=ir-extra-service-config&encapsulation=scoped","src/components/ir-booking-details/ir-extra-services/ir-extra-service-config/ir-extra-service-config.tsx","src/components/ir-booking-details/ir-extra-services/ir-extra-services.css?tag=ir-extra-services&encapsulation=scoped","src/components/ir-booking-details/ir-extra-services/ir-extra-services.tsx","src/components/ir-guest-info/ir-guest-info.css?tag=ir-guest-info&encapsulation=scoped","src/components/ir-guest-info/ir-guest-info.tsx","src/components/ir-housekeeping/ir-hk-tasks/ir-hk-archive/ir-hk-archive.css?tag=ir-hk-archive&encapsulation=scoped","src/components/ir-housekeeping/ir-hk-tasks/ir-hk-archive/ir-hk-archive.tsx","src/components/ir-housekeeping/ir-hk-tasks/ir-hk-tasks.css?tag=ir-hk-tasks&encapsulation=scoped","src/components/ir-housekeeping/ir-hk-tasks/ir-hk-tasks.tsx","src/components/ui/ir-icon/ir-icon.css?tag=ir-icon&encapsulation=scoped","src/components/ui/ir-icon/ir-icon.tsx","src/components/ui/ir-icons/ir-icons.css?tag=ir-icons&encapsulation=scoped","src/components/ui/ir-icons/ir-icons.tsx","node_modules/imask/esm/core/utils.js","node_modules/imask/esm/core/action-details.js","node_modules/imask/esm/core/holder.js","node_modules/imask/esm/masked/factory.js","node_modules/imask/esm/controls/mask-element.js","node_modules/imask/esm/controls/html-mask-element.js","node_modules/imask/esm/controls/html-input-mask-element.js","node_modules/imask/esm/controls/html-contenteditable-mask-element.js","node_modules/imask/esm/controls/input-history.js","node_modules/imask/esm/controls/input.js","node_modules/imask/esm/core/change-details.js","node_modules/imask/esm/core/continuous-tail-details.js","node_modules/imask/esm/masked/base.js","node_modules/imask/esm/masked/pattern/chunk-tail-details.js","node_modules/imask/esm/masked/pattern/cursor.js","node_modules/imask/esm/masked/pattern/fixed-definition.js","node_modules/imask/esm/masked/pattern/input-definition.js","node_modules/imask/esm/masked/regexp.js","node_modules/imask/esm/masked/pattern.js","node_modules/imask/esm/masked/range.js","node_modules/imask/esm/masked/date.js","node_modules/imask/esm/masked/dynamic.js","node_modules/imask/esm/masked/enum.js","node_modules/imask/esm/masked/function.js","node_modules/imask/esm/masked/number.js","node_modules/imask/esm/masked/pipe.js","node_modules/imask/esm/masked/repeat.js","node_modules/imask/esm/index.js","src/components/ui/ir-input-text/ir-input-text.css?tag=ir-input-text&encapsulation=scoped","src/components/ui/ir-input-text/ir-input-text.tsx","src/components/ir-interceptor/ir-interceptor.css?tag=ir-interceptor&encapsulation=scoped","src/components/ir-interceptor/ir-interceptor.tsx","src/components/ui/ir-label/ir-label.css?tag=ir-label&encapsulation=scoped","src/components/ui/ir-label/ir-label.tsx","src/components/ir-loading-screen/ir-loading-screen.css?tag=ir-loading-screen&encapsulation=scoped","src/components/ir-loading-screen/ir-loading-screen.tsx","src/components/ui/ir-modal/ir-modal.css?tag=ir-modal&encapsulation=scoped","src/components/ui/ir-modal/ir-modal.tsx","src/components/ir-booking-details/ir-payment-details/ir-payment-actions/ir-payment-actions.css?tag=ir-payment-actions&encapsulation=scoped","src/components/ir-booking-details/ir-payment-details/ir-payment-actions/ir-payment-actions.tsx","src/components/ir-booking-details/ir-payment-details/ir-payment-details.css?tag=ir-payment-details&encapsulation=scoped","src/components/ir-booking-details/ir-payment-details/ir-payment-details.tsx","src/components/ui/ir-phone-input/ir-phone-input.css?tag=ir-phone-input&encapsulation=scoped","src/components/ui/ir-phone-input/ir-phone-input.tsx","src/components/ir-booking-details/ir-pickup/pickup.service.ts","src/components/ir-booking-details/ir-pickup/ir-pickup.css?tag=ir-pickup&encapsulation=scoped","src/components/ir-booking-details/ir-pickup/ir-pickup.tsx","src/components/ir-booking-details/ir-pickup-view/ir-pickup-view.css?tag=ir-pickup-view&encapsulation=scoped","src/components/ir-booking-details/ir-pickup-view/ir-pickup-view.tsx","src/components/ir-booking-details/ir-booking-header/ir-pms-logs/ir-pms-logs.css?tag=ir-pms-logs&encapsulation=scoped","src/components/ir-booking-details/ir-booking-header/ir-pms-logs/ir-pms-logs.tsx","src/components/ui/ir-price-input/ir-price-input.css?tag=ir-price-input&encapsulation=scoped","src/components/ui/ir-price-input/ir-price-input.tsx","src/components/ir-housekeeping/ir-hk-tasks/ir-hk-archive/ir-range-picker/ir-range-picker.css?tag=ir-range-picker&encapsulation=scoped","src/components/ir-housekeeping/ir-hk-tasks/ir-hk-archive/ir-range-picker/ir-range-picker.tsx","src/components/ir-booking-details/ir-reservation-information/ir-reservation-information.css?tag=ir-reservation-information&encapsulation=scoped","src/components/ir-booking-details/ir-reservation-information/ir-reservation-information.tsx","src/components/ir-booking-details/ir-room/ir-room.css?tag=ir-room&encapsulation=scoped","src/components/ir-booking-details/ir-room/ir-room.tsx","src/components/ir-booking-details/ir-room-guests/data.ts","src/components/ir-booking-details/ir-room-guests/ir-room-guests.css?tag=ir-room-guests&encapsulation=scoped","src/components/ir-booking-details/ir-room-guests/ir-room-guests.tsx","src/components/ui/ir-select/ir-select.css?tag=ir-select&encapsulation=scoped","src/components/ui/ir-select/ir-select.tsx","src/components/ui/ir-sidebar/ir-sidebar.css?tag=ir-sidebar&encapsulation=shadow","src/components/ui/ir-sidebar/ir-sidebar.tsx","src/components/ui/ir-spinner/ir-spinner.css?tag=ir-spinner&encapsulation=shadow","src/components/ui/ir-spinner/ir-spinner.tsx","src/components/ir-housekeeping/ir-hk-tasks/ir-tasks-filters/ir-tasks-filters.css?tag=ir-tasks-filters&encapsulation=scoped","src/components/ir-housekeeping/ir-hk-tasks/ir-tasks-filters/ir-tasks-filters.tsx","src/components/ir-housekeeping/ir-hk-tasks/ir-tasks-header/ir-tasks-header.css?tag=ir-tasks-header&encapsulation=scoped","src/components/ir-housekeeping/ir-hk-tasks/ir-tasks-header/ir-tasks-header.tsx","src/components/ir-housekeeping/ir-hk-tasks/ir-tasks-table/ir-tasks-table.css?tag=ir-tasks-table&encapsulation=scoped","src/components/ir-housekeeping/ir-hk-tasks/ir-tasks-table/ir-tasks-table.tsx","src/components/ui/ir-textarea/ir-textarea.css?tag=ir-textarea&encapsulation=scoped","src/components/ui/ir-textarea/ir-textarea.tsx","src/components/ir-title/ir-title.css?tag=ir-title&encapsulation=scoped","src/components/ir-title/ir-title.tsx","src/components/ui/ir-toast/ir-toast.css?tag=ir-toast&encapsulation=scoped","src/components/ui/ir-toast/ir-toast.tsx","src/components/ui/ir-tooltip/ir-tooltip.css?tag=ir-tooltip&encapsulation=scoped","src/components/ui/ir-tooltip/ir-tooltip.tsx","src/components/ui/ota-label/ota-label.css?tag=ota-label&encapsulation=scoped","src/components/ui/ota-label/ota-label.tsx"],"sourcesContent":["import { Variation } from '@/models/property';\r\nimport locales from '@/stores/locales.store';\r\n\r\nexport default class VariationService {\r\n  /**\r\n   * Formats a variation based on the number of infants and returns a formatted string.\r\n   * @param {Object} params - The input parameters.\r\n   * @param {Variation} params.baseVariation - The base variation object.\r\n   * @param {Variation[]} params.variations - A list of available variations.\r\n   * @param {number} params.infants - The number of infants to adjust the variation for.\r\n   * @returns {string} A formatted string describing the variation adjusted for infants.\r\n   */\r\n  public formatVariationBasedOnInfants(params: { baseVariation: Variation; variations: Variation[]; infants: number }): string {\r\n    const variation = this.getVariationBasedOnInfants(params);\r\n    return this.formatVariation(variation, params.infants);\r\n  }\r\n\r\n  /**\r\n   * Calculates the discounted amount for a variation adjusted for the number of infants.\r\n   * @param {Object} params - The input parameters.\r\n   * @param {Variation} params.baseVariation - The base variation object.\r\n   * @param {Variation[]} params.variations - A list of available variations.\r\n   * @param {number} params.infants - The number of infants to consider for adjustments.\r\n   * @returns {number} The discounted amount for the selected variation, or 0 if no discounted amount is available.\r\n   */\r\n  public calculateVariationAmount(params: { baseVariation: Variation; variations: Variation[]; infants: number }): number {\r\n    return this.getVariationBasedOnInfants(params)?.discounted_amount || 0;\r\n  }\r\n\r\n  /**\r\n   * Finds the appropriate variation from a list of variations based on the number of infants.\r\n   * @param {Object} params - The input parameters.\r\n   * @param {Variation} params.baseVariation - The base variation object.\r\n   * @param {Variation[]} params.variations - A list of available variations.\r\n   * @param {number} params.infants - The number of infants to adjust for.\r\n   * @returns {Variation} The matching variation or the base variation if no match is found.\r\n   */\r\n  public getVariationBasedOnInfants({ variations, baseVariation, infants }: { baseVariation: Variation; variations: Variation[]; infants: number }): Variation {\r\n    const { adult_nbr, child_nbr } = baseVariation;\r\n    return variations.find(v => v.adult_nbr === adult_nbr && v.child_nbr === Math.max(0, child_nbr - Math.max(0, infants))) || baseVariation;\r\n  }\r\n\r\n  /**\r\n   * Formats a variation object into a human-readable string, adjusted for the number of infants.\r\n   * @param {Variation} variation - The variation object to format.\r\n   * @param {number} infant_nbr - The number of infants to adjust for.\r\n   * @returns {string} A formatted string representing the variation.\r\n   * @private\r\n   */\r\n  private formatVariation({ child_nbr, adult_nbr }: Variation, infant_nbr: number): string {\r\n    const adultNumber = Number(adult_nbr) || 0;\r\n    const infantNumber = Math.max(Number(infant_nbr) || 0, 0);\r\n    const adultLabel = adultNumber > 1 ? locales.entries.Lcz_Adults.toLowerCase() : locales.entries.Lcz_Adult.toLowerCase();\r\n    const childLabel = child_nbr > 1 ? locales.entries.Lcz_Children.toLowerCase() : locales.entries.Lcz_Child.toLowerCase();\r\n    const infantLabel = infantNumber > 1 ? (locales.entries['Lcz_Infants'] ?? 'infants')?.toLowerCase() : (locales?.entries['Lcz_Infant'] ?? 'infant')?.toLowerCase();\r\n    const parts = [`${adultNumber} ${adultLabel}`, child_nbr ? `${child_nbr} ${childLabel}` : '', infantNumber ? `${infantNumber} ${infantLabel}` : ''];\r\n    return parts.filter(Boolean).join('&nbsp&nbsp&nbsp&nbsp');\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n.rate_amount {\r\n  display: none;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\n.booking-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-bottom: 0.5rem;\r\n  gap: 0.5rem;\r\n}\r\n.non-ref-span {\r\n  font-size: 12px;\r\n  color: var(--green);\r\n}\r\n.booking-roomtype-title {\r\n  font-size: 1.25rem;\r\n  margin-right: 0.5rem;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.booking-details-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\n.booking-rateplan {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.booking-rateplan-name {\r\n  font-weight: bold;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.booking-tooltip {\r\n  margin-right: 0.5rem;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.booking-variation {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.booking-price {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.booking-footer {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.booking-details-container {\r\n  display: none;\r\n}\r\n\r\n/*md*/\r\n@media (min-width: 768px) {\r\n  .booking-header {\r\n    justify-content: flex-start;\r\n  }\r\n  .booking-footer,\r\n  .booking-price {\r\n    display: none;\r\n  }\r\n  .booking-details-container,\r\n  .rate_amount {\r\n    display: inline-flex;\r\n    gap: 0.5rem;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 908px) {\r\n  .aplicationInfoContainer {\r\n    max-width: 100%;\r\n  }\r\n  .guest-info-container,\r\n  .bed-preference-container,\r\n  .unit-select-container {\r\n    max-width: 250px;\r\n  }\r\n  /* .preference-select-container {\r\n    max-width: 250px;\r\n  } */\r\n}\r\n","import { Component, Host, h, Prop, State, Listen } from '@stencil/core';\r\nimport { TPropertyButtonsTypes } from '@/components';\r\nimport { ICurrency } from '@/models/calendarData';\r\nimport booking_store, { IRatePlanSelection, modifyBookingStore, RatePlanGuest } from '@/stores/booking.store';\r\nimport locales from '@/stores/locales.store';\r\nimport { v4 } from 'uuid';\r\nimport calendar_data, { isSingleUnit } from '@/stores/calendar-data';\r\nimport { formatAmount } from '@/utils/utils';\r\nimport VariationService from '@/services/variation.service';\r\n\r\n@Component({\r\n  tag: 'igl-application-info',\r\n  styleUrl: 'igl-application-info.css',\r\n  scoped: true,\r\n})\r\nexport class IglApplicationInfo {\r\n  @Prop() rateplanSelection: IRatePlanSelection;\r\n  @Prop() guestInfo: RatePlanGuest | null;\r\n  @Prop() currency: ICurrency;\r\n  @Prop() bedPreferenceType = [];\r\n  @Prop() bookingType: string = 'PLUS_BOOKING';\r\n  @Prop() roomIndex: number;\r\n  @Prop() totalNights: number = 1;\r\n  @Prop() baseData: { unit: { id: string; name: string }; roomtypeId: number };\r\n\r\n  @State() isButtonPressed = false;\r\n\r\n  private variationService = new VariationService();\r\n\r\n  componentWillLoad() {\r\n    if (isSingleUnit(this.rateplanSelection.roomtype.id)) {\r\n      const filteredRooms = this.filterRooms();\r\n      if (filteredRooms.length > 0) this.updateGuest({ unit: filteredRooms[0]?.id?.toString() });\r\n    }\r\n  }\r\n\r\n  private updateGuest(params: Partial<RatePlanGuest>) {\r\n    const roomTypeId = this.rateplanSelection.roomtype.id;\r\n    const ratePlanId = this.rateplanSelection.ratePlan.id;\r\n    let prevGuest = [...this.rateplanSelection.guest];\r\n    prevGuest[this.roomIndex] = {\r\n      ...prevGuest[this.roomIndex],\r\n      ...params,\r\n    };\r\n    booking_store.ratePlanSelections = {\r\n      ...booking_store.ratePlanSelections,\r\n      [roomTypeId]: {\r\n        ...booking_store.ratePlanSelections[roomTypeId],\r\n        [ratePlanId]: { ...this.rateplanSelection, guest: [...prevGuest] },\r\n      },\r\n    };\r\n  }\r\n\r\n  @Listen('buttonClicked', { target: 'body' })\r\n  handleButtonClicked(\r\n    event: CustomEvent<{\r\n      key: TPropertyButtonsTypes;\r\n      data?: CustomEvent;\r\n    }>,\r\n  ) {\r\n    switch (event.detail.key) {\r\n      case 'book':\r\n      case 'bookAndCheckIn':\r\n      case 'save':\r\n        this.isButtonPressed = true;\r\n        break;\r\n    }\r\n  }\r\n\r\n  private getTooltipMessages(): string | undefined {\r\n    const { ratePlan, selected_variation } = this.rateplanSelection;\r\n    let selectedVariation = selected_variation;\r\n    if (this.guestInfo?.infant_nbr) {\r\n      selectedVariation = this.variationService.getVariationBasedOnInfants({\r\n        variations: ratePlan.variations,\r\n        baseVariation: selected_variation,\r\n        infants: this.guestInfo?.infant_nbr,\r\n      });\r\n    }\r\n\r\n    if (!selectedVariation) return;\r\n\r\n    const matchingVariation = ratePlan.variations?.find(variation => variation.adult_nbr === selectedVariation.adult_nbr && variation.child_nbr === selectedVariation.child_nbr);\r\n\r\n    if (!matchingVariation) return;\r\n\r\n    const cancellationPolicy = matchingVariation.applicable_policies?.find(p => p.type === 'cancelation')?.combined_statement;\r\n    const guaranteePolicy = matchingVariation.applicable_policies?.find(p => p.type === 'guarantee')?.combined_statement;\r\n\r\n    let tooltip = '';\r\n    if (cancellationPolicy) {\r\n      tooltip += `<b><u>Cancellation:</u></b> ${cancellationPolicy}<br/>`;\r\n    }\r\n    if (guaranteePolicy) {\r\n      tooltip += `<b><u>Guarantee:</u></b> ${guaranteePolicy}`;\r\n    }\r\n    return tooltip || undefined;\r\n  }\r\n\r\n  private getAmount(): number {\r\n    if (this.rateplanSelection.is_amount_modified) {\r\n      return this.rateplanSelection.view_mode === '001' ? this.rateplanSelection.rp_amount : this.rateplanSelection.rp_amount * this.totalNights;\r\n    }\r\n    let variation = this.rateplanSelection.selected_variation;\r\n    if (this.guestInfo?.infant_nbr) {\r\n      variation = this.variationService.getVariationBasedOnInfants({\r\n        variations: this.rateplanSelection.ratePlan.variations,\r\n        baseVariation: this.rateplanSelection.selected_variation,\r\n        infants: this.guestInfo?.infant_nbr,\r\n      });\r\n    }\r\n    return variation.discounted_gross_amount;\r\n  }\r\n\r\n  private filterRooms(): { name: string; id: number }[] {\r\n    const result = [];\r\n    if (!calendar_data.is_frontdesk_enabled) {\r\n      return result;\r\n    }\r\n    this.rateplanSelection.ratePlan?.assignable_units?.forEach(unit => {\r\n      if (unit.Is_Fully_Available) {\r\n        result.push({ name: unit.name, id: unit.pr_id });\r\n      }\r\n    });\r\n    const filteredGuestsRoom = this.rateplanSelection.guest.filter((_, i) => i !== this.roomIndex).map(r => r.unit);\r\n    const filteredResults = result.filter(r => !filteredGuestsRoom.includes(r.id.toString()));\r\n    return this.bookingType === 'EDIT_BOOKING'\r\n      ? [...filteredResults, this.rateplanSelection.roomtype.id === this.baseData?.roomtypeId ? this.baseData?.unit : null]\r\n          .filter(f => !!f)\r\n          .sort((a, b) => a.name.localeCompare(b.name))\r\n      : filteredResults;\r\n  }\r\n\r\n  render() {\r\n    const filteredRoomList = this.filterRooms();\r\n    const formattedVariation = this.variationService.formatVariationBasedOnInfants({\r\n      baseVariation: this.rateplanSelection.selected_variation,\r\n      infants: this.guestInfo.infant_nbr,\r\n      variations: this.rateplanSelection.ratePlan.variations,\r\n    });\r\n    return (\r\n      <Host class={'my-2'} data-testid={`room_info_${this.rateplanSelection.ratePlan.id}`}>\r\n        <div class=\"booking-header\">\r\n          {(this.bookingType === 'PLUS_BOOKING' || this.bookingType === 'ADD_ROOM' || this.bookingType === 'EDIT_BOOKING') && (\r\n            <span class=\"booking-roomtype-title\">{this.rateplanSelection.roomtype.name}</span>\r\n          )}\r\n          <div class=\"booking-details-container\">\r\n            <div class=\"booking-rateplan\">\r\n              <p class=\"booking-rateplan-name\">\r\n                {this.rateplanSelection.ratePlan.short_name} {this.rateplanSelection.ratePlan.is_non_refundable && <span class={'non-ref-span'}>Non Refundable</span>}\r\n              </p>\r\n              <ir-tooltip class=\"booking-tooltip\" message={this.getTooltipMessages()}></ir-tooltip>\r\n            </div>\r\n            <p class=\"booking-variation\" innerHTML={formattedVariation}></p>\r\n          </div>\r\n          <p class=\"booking-price\">\r\n            {formatAmount(this.currency?.symbol, this.getAmount())}/{locales.entries.Lcz_Stay}\r\n          </p>\r\n        </div>\r\n        <div class=\"booking-footer\">\r\n          <div class=\"booking-rateplan\">\r\n            <p class=\"booking-rateplan-name\">{this.rateplanSelection.ratePlan.short_name}</p>\r\n            <ir-tooltip class=\"booking-tooltip\" message={this.getTooltipMessages()}></ir-tooltip>\r\n          </div>\r\n          <p class=\"booking-variation\" innerHTML={formattedVariation}></p>\r\n        </div>\r\n        <div class=\"d-flex flex-column flex-md-row  p-0 align-items-md-center aplicationInfoContainer\">\r\n          <div class=\"mr-md-1 mb-1 mb-md-0 flex-fill guest-info-container\">\r\n            <input\r\n              id={v4()}\r\n              type=\"text\"\r\n              data-testid=\"guest_first_name\"\r\n              class={`form-control ${this.isButtonPressed && this.guestInfo?.first_name === '' && 'border-danger'}`}\r\n              placeholder={locales.entries['Lcz_GuestFirstname'] ?? 'Guest first name'}\r\n              name=\"guestFirstName\"\r\n              onInput={event => {\r\n                const name = (event.target as HTMLInputElement).value;\r\n                this.updateGuest({ first_name: name });\r\n                if (booking_store.event_type.type === 'EDIT_BOOKING') {\r\n                  modifyBookingStore('guest', {\r\n                    ...booking_store.guest,\r\n                    name,\r\n                  });\r\n                }\r\n              }}\r\n              required\r\n              value={this.guestInfo?.first_name}\r\n            />\r\n          </div>\r\n          <div class=\"mr-md-1 flex-fill guest-info-container\">\r\n            <input\r\n              id={v4()}\r\n              type=\"text\"\r\n              class={`form-control ${this.isButtonPressed && this.guestInfo?.last_name === '' && 'border-danger'}`}\r\n              placeholder={locales.entries['Lcz_GuestLastname'] ?? 'Guest last name'}\r\n              name=\"guestLastName\"\r\n              data-testid=\"guest_last_name\"\r\n              onInput={event => {\r\n                const name = (event.target as HTMLInputElement).value;\r\n                this.updateGuest({ last_name: name });\r\n                if (booking_store.event_type.type === 'EDIT_BOOKING') {\r\n                  modifyBookingStore('guest', {\r\n                    ...booking_store.guest,\r\n                    name,\r\n                  });\r\n                }\r\n              }}\r\n              required\r\n              value={this.guestInfo?.last_name}\r\n            />\r\n          </div>\r\n          {calendar_data.is_frontdesk_enabled &&\r\n            !isSingleUnit(this.rateplanSelection.roomtype.id) &&\r\n            (this.bookingType === 'PLUS_BOOKING' || this.bookingType === 'ADD_ROOM' || this.bookingType === 'EDIT_BOOKING') && (\r\n              <div class=\"mt-1 mt-md-0 d-flex align-items-center flex-fill\">\r\n                <div class=\"mr-md-1 p-0 flex-fill preference-select-container\">\r\n                  <select data-testid=\"unit\" class=\"form-control input-sm pr-0\" id={v4()} onChange={event => this.updateGuest({ unit: (event.target as HTMLInputElement).value })}>\r\n                    <option value=\"\" selected={this.guestInfo?.unit === ''}>\r\n                      {locales.entries.Lcz_Assignunits}\r\n                    </option>\r\n                    {filteredRoomList?.map(room => (\r\n                      <option value={room.id} selected={this.guestInfo?.unit === room.id.toString()}>\r\n                        {room.name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              </div>\r\n            )}\r\n          {this.rateplanSelection.roomtype.is_bed_configuration_enabled && (\r\n            <div class=\"mt-1 mt-md-0 mr-md-1 flex-fill\">\r\n              <select\r\n                data-testid=\"bed_configuration\"\r\n                class={`form-control input-sm ${this.isButtonPressed && this.guestInfo?.bed_preference === '' && 'border-danger'}`}\r\n                id={v4()}\r\n                onChange={event => this.updateGuest({ bed_preference: (event.target as HTMLInputElement).value })}\r\n              >\r\n                <option value=\"\" selected={this.guestInfo?.bed_preference === ''}>\r\n                  {locales.entries.Lcz_BedConfiguration}\r\n                </option>\r\n                {this.bedPreferenceType.map(data => (\r\n                  <option value={data.CODE_NAME} selected={this.guestInfo?.bed_preference === data.CODE_NAME}>\r\n                    {data.CODE_VALUE_EN}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          )}\r\n          <p class=\"rate_amount\">\r\n            {formatAmount(this.currency?.symbol, this.getAmount())}/{locales.entries.Lcz_Stay}\r\n          </p>\r\n        </div>\r\n        {this.rateplanSelection.selected_variation.child_nbr > 0 && (\r\n          <div style={{ gap: '0.5rem', marginTop: '0.5rem' }} class=\"d-flex  flex-row  p-0 align-items-center aplicationInfoContainer\">\r\n            <p class={'m-0 p-0 text-danger'}>Any of the children below 3 years?</p>\r\n            <div class=\"mr-1 flex-fill\">\r\n              <select\r\n                class={`form-control input-sm ${this.isButtonPressed && this.guestInfo?.bed_preference === '' && 'border-danger'}`}\r\n                id={v4()}\r\n                style={{ width: 'max-content' }}\r\n                onChange={event => this.updateGuest({ infant_nbr: Number((event.target as HTMLInputElement).value) })}\r\n              >\r\n                <option value=\"\" selected={Number(this.guestInfo?.infant_nbr) === 0}>\r\n                  {locales.entries['No'] || 'No'}\r\n                </option>\r\n                {Array.from({ length: this.rateplanSelection.selected_variation.child_nbr }, (_, i) => i + 1).map(item => (\r\n                  <option value={item} selected={this.guestInfo?.infant_nbr === item}>\r\n                    {item}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n\r\n:host .controlContainer {\r\n  width: 24px;\r\n}\r\n\r\n:host .checkBoxContainer input {\r\n  height: 1.2rem !important;\r\n  width: 30px;\r\n}\r\n\r\n.releaseTime {\r\n  padding-left: 5px;\r\n}\r\n.out-of-service-label {\r\n  margin-left: 5px !important;\r\n}\r\n","import { Component, Host, h, Prop, State, Event, EventEmitter } from '@stencil/core';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport { IEntries } from '@/models/IBooking';\r\nimport locales from '@/stores/locales.store';\r\n\r\n@Component({\r\n  tag: 'igl-block-dates-view',\r\n  styleUrl: 'igl-block-dates-view.css',\r\n  scoped: true,\r\n})\r\nexport class IglBlockDatesView {\r\n  @Prop() defaultData: { [key: string]: any };\r\n  @Prop() fromDate: string;\r\n  @Prop() toDate: string;\r\n  @Prop({ mutable: true }) entryDate: string;\r\n  @Prop() entryHour: number;\r\n  @Prop() isEventHover: boolean = false;\r\n  @Prop() entryMinute: number;\r\n  @State() renderAgain: boolean = false;\r\n  @Event() dataUpdateEvent: EventEmitter<{ [key: string]: any }>;\r\n\r\n  private blockDatesData: { [key: string]: any } = {\r\n    RELEASE_AFTER_HOURS: 0,\r\n    OPTIONAL_REASON: '',\r\n    OUT_OF_SERVICE: false,\r\n  }; // Change of property name might require updates in booking-event-hover\r\n  private releaseList: IEntries[] = [];\r\n  private bookingService: BookingService = new BookingService();\r\n\r\n  async componentWillLoad() {\r\n    try {\r\n      this.releaseList = await this.bookingService.getBlockedInfo();\r\n      if (this.defaultData) {\r\n        this.blockDatesData = { ...this.defaultData };\r\n      } else {\r\n        this.blockDatesData.RELEASE_AFTER_HOURS = parseInt(this.releaseList[0].CODE_NAME);\r\n        this.emitData();\r\n      }\r\n    } catch (error) {\r\n      // toastr.error(error);\r\n    }\r\n  }\r\n\r\n  handleOptionalReason(event) {\r\n    this.blockDatesData.OPTIONAL_REASON = event.target.value;\r\n    this.emitData();\r\n  }\r\n\r\n  handleReleaseAfterChange(evt) {\r\n    if (this.entryDate) this.entryDate = undefined;\r\n    this.blockDatesData.RELEASE_AFTER_HOURS = parseInt(evt.target.value);\r\n    this.renderPage();\r\n    this.emitData();\r\n  }\r\n\r\n  emitData() {\r\n    this.dataUpdateEvent.emit({\r\n      key: 'blockDatesData',\r\n      data: { ...this.blockDatesData },\r\n    });\r\n  }\r\n\r\n  getReleaseHoursString() {\r\n    // console.log(\"entry date\", this.entryDate);\r\n    // console.log(\"blocked date data\", this.blockDatesData);\r\n    let dt = this.entryDate ? new Date(this.entryDate) : new Date();\r\n    if (this.entryDate && this.entryHour && this.entryMinute) {\r\n      dt.setHours(this.entryHour, this.entryMinute, 0, 0);\r\n    } else {\r\n      dt.setHours(dt.getHours() + this.blockDatesData.RELEASE_AFTER_HOURS, dt.getMinutes(), 0, 0);\r\n    }\r\n\r\n    return dt.toLocaleString('default', { month: 'short' }) + ' ' + dt.getDate() + ', ' + this.formatNumber(dt.getHours()) + ':' + this.formatNumber(dt.getMinutes());\r\n  }\r\n  formatNumber(value: number) {\r\n    return value < 10 ? `0${value}` : value;\r\n  }\r\n  handleOutOfService(evt) {\r\n    this.blockDatesData.OUT_OF_SERVICE = evt.target.checked;\r\n    if (this.blockDatesData.OUT_OF_SERVICE) {\r\n      this.blockDatesData.OPTIONAL_REASON = '';\r\n      this.blockDatesData.RELEASE_AFTER_HOURS = 0;\r\n    }\r\n    this.renderPage();\r\n    this.emitData();\r\n  }\r\n\r\n  renderPage() {\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n\r\n  render() {\r\n    console.log({ fromDate: this.fromDate, toDate: this.toDate });\r\n    return (\r\n      <Host>\r\n        <div class={`m-0 p-0 mb-1`}>\r\n          <div class=\"text-left p-0\">\r\n            <ir-date-view from_date={this.fromDate} dateOption=\"YYYY-MM-DD\" showDateDifference={false} to_date={this.toDate}></ir-date-view>\r\n          </div>\r\n        </div>\r\n        <div class={` mb-1 text-left ${this.isEventHover && 'p-0'}`}>\r\n          <div class=\"mb-1 \">\r\n            <label class=\"p-0 text-bold-700 font-medium-1 m-0 align-middle\">{locales.entries.Lcz_Reason}:</label>\r\n            <div class=\"p-0 m-0 pr-1  controlContainer checkBoxContainer d-inline-block align-middle\">\r\n              <input class=\"form-control\" type=\"checkbox\" checked={this.blockDatesData.OUT_OF_SERVICE} id=\"userinput6\" onChange={event => this.handleOutOfService(event)} />\r\n            </div>\r\n            <span class=\"align-middle out-of-service-label\">{locales.entries.Lcz_OutOfservice}</span>\r\n          </div>\r\n          {!this.blockDatesData.OUT_OF_SERVICE ? (\r\n            <div>\r\n              <div class=\"mb-1 d-flex  align-items-center\">\r\n                <span class=\"align-middle\">{locales.entries.Lcz_Or} </span>\r\n                <div class=\"d-inline-flex col pr-0 align-middle\">\r\n                  <input\r\n                    class=\"form-control\"\r\n                    type=\"text\"\r\n                    placeholder={locales.entries.Lcz_OptionalReason}\r\n                    id=\"optReason\"\r\n                    value={this.blockDatesData.OPTIONAL_REASON}\r\n                    onInput={event => this.handleOptionalReason(event)}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"mb-1 w-100 pr-0 \">\r\n                <span class=\"text-bold-700 font-medium-1\">{locales.entries.Lcz_AutomaticReleaseIn}: </span>\r\n                <div class=\"d-inline-block\">\r\n                  <select class=\"form-control input-sm\" id=\"zSmallSelect\" onChange={evt => this.handleReleaseAfterChange(evt)}>\r\n                    {this.releaseList.map(releaseItem => (\r\n                      <option value={+releaseItem.CODE_NAME} selected={Number(this.blockDatesData.RELEASE_AFTER_HOURS) == Number(releaseItem.CODE_NAME)}>\r\n                        {releaseItem.CODE_VALUE_EN}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n                {this.blockDatesData.RELEASE_AFTER_HOURS ? (\r\n                  <div class=\"d-inline-block releaseTime\">\r\n                    <em>\r\n                      {locales.entries.Lcz_On} {this.getReleaseHoursString()}\r\n                    </em>\r\n                  </div>\r\n                ) : null}\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","import { Booking, Room } from '@/models/booking.dto';\r\nimport { TSourceOption } from '@/models/igl-book-property';\r\nimport VariationService from '@/services/variation.service';\r\nimport booking_store, { IRatePlanSelection } from '@/stores/booking.store';\r\nimport { extras } from '@/utils/utils';\r\nimport moment from 'moment';\r\n\r\nexport class IglBookPropertyService {\r\n  private variationService: VariationService;\r\n  public setBookingInfoFromAutoComplete(context, res) {\r\n    context.bookedByInfoData = {\r\n      id: res.guest.id,\r\n      email: res.guest.email,\r\n      firstName: res.guest.first_name,\r\n      lastName: res.guest.last_name,\r\n      countryId: res.guest.country_id,\r\n      isdCode: res.guest?.country_phone_prefix ?? res.guest?.country_id.toString(),\r\n      contactNumber: res.guest.mobile,\r\n      selectedArrivalTime: res.arrival,\r\n      emailGuest: res.guest.subscribe_to_news_letter,\r\n      message: res.remark,\r\n      cardNumber: '',\r\n      cardHolderName: '',\r\n      expiryMonth: '',\r\n      expiryYear: '',\r\n      bookingNumber: res.booking_nbr,\r\n      rooms: res.rooms,\r\n      from_date: res.from_date,\r\n      to_date: res.to_date,\r\n    };\r\n  }\r\n\r\n  public resetRoomsInfoAndMessage(context) {\r\n    context.defaultData.roomsInfo = [];\r\n    context.message = '';\r\n  }\r\n\r\n  public onDataRoomUpdate(event: CustomEvent, selectedUnits: Map<string, Map<string, any>>, isEdit: boolean, isEditBooking: boolean, name: string) {\r\n    let units = selectedUnits;\r\n    const { data, key, changedKey } = event.detail;\r\n    const roomCategoryKey = `c_${data.roomCategoryId}`;\r\n    const ratePlanKey = `p_${data.ratePlanId}`;\r\n\r\n    if (this.shouldClearData(key)) {\r\n      units = new Map();\r\n    }\r\n\r\n    this.initializeRoomCategoryIfNeeded(roomCategoryKey, units);\r\n\r\n    if (isEditBooking) {\r\n      if (changedKey === 'rate') {\r\n        if (units.has(roomCategoryKey) && units.get(roomCategoryKey).has(ratePlanKey)) {\r\n          this.applyBookingEditToSelectedRoom(roomCategoryKey, ratePlanKey, data, units, name, isEdit);\r\n        }\r\n      } else {\r\n        if (changedKey !== 'rateType') {\r\n          if (changedKey === 'adult_child_offering') {\r\n            if (units.has(roomCategoryKey) && selectedUnits.get(roomCategoryKey).has(ratePlanKey)) {\r\n              this.applyBookingEditToSelectedRoom(roomCategoryKey, ratePlanKey, data, units, name, isEdit);\r\n            }\r\n          } else {\r\n            this.applyBookingEditToSelectedRoom(roomCategoryKey, ratePlanKey, data, units, name, isEdit);\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      this.setSelectedRoomData(roomCategoryKey, ratePlanKey, data, units);\r\n    }\r\n    this.cleanupEmptyData(roomCategoryKey, units);\r\n    return units;\r\n  }\r\n\r\n  private shouldClearData(key: string | undefined): boolean {\r\n    return key === 'clearData' || key === 'EDIT_BOOKING';\r\n  }\r\n\r\n  private initializeRoomCategoryIfNeeded(roomCategoryKey: string, selectedUnits: Map<string, Map<string, any>>) {\r\n    if (!selectedUnits.has(roomCategoryKey)) {\r\n      selectedUnits.set(roomCategoryKey, new Map());\r\n    }\r\n  }\r\n  private setSelectedRoomData(roomCategoryKey: string, ratePlanKey: string, data: any, selectedUnits: Map<string, Map<string, any>>) {\r\n    let selectedRatePlans = selectedUnits.get(roomCategoryKey);\r\n    if (data.totalRooms === 0 || data.inventory === 0) {\r\n      selectedRatePlans.delete(ratePlanKey);\r\n    } else {\r\n      selectedUnits.set(roomCategoryKey, selectedRatePlans.set(ratePlanKey, { ...data, selectedUnits: Array(data.totalRooms).fill(-1) }));\r\n    }\r\n  }\r\n\r\n  private cleanupEmptyData(roomCategoryKey: string, selectedUnits: Map<string, Map<string, any>>) {\r\n    if (selectedUnits.has(roomCategoryKey)) {\r\n      let selectedRatePlans = selectedUnits.get(roomCategoryKey);\r\n      if (selectedRatePlans.size === 0) {\r\n        selectedUnits.delete(roomCategoryKey);\r\n      }\r\n    }\r\n  }\r\n  private applyBookingEditToSelectedRoom(roomCategoryKey: string, ratePlanKey: string, data, selectedUnits: Map<string, Map<string, any>>, name: string, isEdit: boolean) {\r\n    selectedUnits.clear();\r\n    let res = {};\r\n    if (isEdit) {\r\n      res = { ...data, guestName: name || '', roomId: '' };\r\n    } else {\r\n      res = { ...data };\r\n    }\r\n    selectedUnits.set(roomCategoryKey, new Map().set(ratePlanKey, res));\r\n  }\r\n\r\n  private calculateAmount({ is_amount_modified, selected_variation, view_mode, rp_amount }: IRatePlanSelection) {\r\n    const total_days = selected_variation.nights.length;\r\n    if (is_amount_modified) {\r\n      return view_mode === '002' ? rp_amount : rp_amount / total_days;\r\n    }\r\n  }\r\n\r\n  private generateDailyRates(rate_plan: IRatePlanSelection, i: number) {\r\n    let variation = rate_plan.selected_variation;\r\n    const amount = rate_plan.is_amount_modified ? this.calculateAmount(rate_plan) : null;\r\n    if (rate_plan.guest[i].infant_nbr > 0 && !rate_plan.is_amount_modified) {\r\n      if (!this.variationService) {\r\n        this.variationService = new VariationService();\r\n      }\r\n      variation = this.variationService.getVariationBasedOnInfants({\r\n        variations: rate_plan.ratePlan.variations,\r\n        baseVariation: rate_plan.selected_variation,\r\n        infants: rate_plan.guest[i].infant_nbr,\r\n      });\r\n    }\r\n    return variation.nights.map(n => ({\r\n      date: n.night,\r\n      amount: amount ?? n.discounted_amount,\r\n      cost: null,\r\n    }));\r\n  }\r\n\r\n  // private extractFirstNameAndLastName(name: string) {\r\n  //   const names = name.split(' ');\r\n  //   return { first_name: names[0] || null, last_name: names[1] || null };\r\n  // }\r\n\r\n  private getBookedRooms({\r\n    check_in,\r\n    check_out,\r\n    notes,\r\n    identifier,\r\n    override_unit,\r\n    unit,\r\n    auto_check_in,\r\n  }: {\r\n    identifier: string | null;\r\n    check_in: Date;\r\n    check_out: Date;\r\n    override_unit: boolean;\r\n    unit: string;\r\n    notes: string | null;\r\n    auto_check_in: boolean;\r\n  }) {\r\n    const rooms = [];\r\n\r\n    for (const roomTypeId in booking_store.ratePlanSelections) {\r\n      const roomtype = booking_store.ratePlanSelections[roomTypeId];\r\n      for (const rateplanId in roomtype) {\r\n        const rateplan = roomtype[rateplanId];\r\n        if (rateplan.reserved > 0) {\r\n          for (let i = 0; i < rateplan.reserved; i++) {\r\n            const { first_name, last_name } = rateplan.guest[i];\r\n            rooms.push({\r\n              identifier,\r\n              roomtype: rateplan.roomtype,\r\n              rateplan: rateplan.ratePlan,\r\n              prepayment_amount_gross: 0,\r\n              unit: override_unit ? { id: unit } : rateplan.guest[i].unit ? { id: rateplan.guest[i].unit } : null,\r\n              occupancy: {\r\n                adult_nbr: rateplan.selected_variation.adult_nbr,\r\n                children_nbr: rateplan.selected_variation.child_nbr - Math.max(rateplan.guest[i].infant_nbr, 0),\r\n                infant_nbr: rateplan.guest[i].infant_nbr,\r\n              },\r\n              bed_preference: rateplan.guest[i].bed_preference,\r\n              from_date: moment(check_in).format('YYYY-MM-DD'),\r\n              to_date: moment(check_out).format('YYYY-MM-DD'),\r\n              notes,\r\n              check_in: auto_check_in,\r\n              days: this.generateDailyRates(rateplan, i),\r\n              guest: {\r\n                email: null,\r\n                first_name,\r\n                last_name,\r\n                country_id: null,\r\n                city: null,\r\n                mobile: null,\r\n                address: null,\r\n                dob: null,\r\n                subscribe_to_news_letter: null,\r\n                cci: null,\r\n              },\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return rooms;\r\n  }\r\n\r\n  async prepareBookUserServiceParams({ context, sourceOption, check_in }: { context: any; sourceOption: TSourceOption; check_in: boolean }) {\r\n    try {\r\n      // Validate context structure\r\n      if (!context || !context.dateRangeData) {\r\n        throw new Error('Invalid context: Missing date range data.');\r\n      }\r\n\r\n      const fromDate = new Date(context.dateRangeData.fromDate);\r\n      const toDate = new Date(context.dateRangeData.toDate);\r\n\r\n      const generateNewRooms = (identifier = null, check_in: boolean = false) => {\r\n        return this.getBookedRooms({\r\n          check_in: fromDate,\r\n          check_out: toDate,\r\n          identifier,\r\n          notes: '',\r\n          override_unit: context.isEventType('BAR_BOOKING') ? true : false,\r\n          unit: context.isEventType('BAR_BOOKING') ? context.bookingData.PR_ID : null,\r\n          auto_check_in: check_in,\r\n        });\r\n      };\r\n\r\n      const modifyBookingDetails = ({ pickup_info, extra_services, is_direct, is_in_loyalty_mode, promo_key, extras, ...rest }: Booking, rooms: Room[]) => {\r\n        return {\r\n          assign_units: true,\r\n          is_pms: true,\r\n          is_direct,\r\n          is_in_loyalty_mode,\r\n          promo_key,\r\n          extras,\r\n          booking: {\r\n            ...rest,\r\n            rooms,\r\n          },\r\n          extra_services,\r\n          pickup_info,\r\n        };\r\n      };\r\n\r\n      let newBooking = null;\r\n\r\n      switch (context.defaultData.event_type) {\r\n        case 'EDIT_BOOKING': {\r\n          const { booking, currentRoomType } = context.defaultData;\r\n\r\n          const filteredRooms = booking.rooms.filter(r => r.identifier !== currentRoomType.identifier);\r\n          console.log('currentRoomType', currentRoomType);\r\n          const newRooms = generateNewRooms(currentRoomType.identifier, currentRoomType.in_out?.code === '001');\r\n          newBooking = modifyBookingDetails(booking, [...filteredRooms, ...newRooms]);\r\n          break;\r\n        }\r\n        case 'ADD_ROOM':\r\n        case 'SPLIT_BOOKING': {\r\n          const { booking } = context.defaultData;\r\n          if (!booking) {\r\n            throw new Error('Missing booking');\r\n          }\r\n          console.log(booking);\r\n          const newRooms = generateNewRooms();\r\n          newBooking = modifyBookingDetails(booking, [...booking?.rooms, ...newRooms]);\r\n          break;\r\n        }\r\n        default: {\r\n          const newRooms = generateNewRooms(null, check_in);\r\n          const { bookedByInfoData } = context;\r\n          const isAgent = sourceOption.type === 'TRAVEL_AGENCY';\r\n          newBooking = {\r\n            assign_units: true,\r\n            is_pms: true,\r\n            is_direct: true,\r\n            is_in_loyalty_mode: false,\r\n            promo_key: null,\r\n            extras,\r\n            agent: isAgent ? { id: sourceOption.tag } : null,\r\n            booking: {\r\n              from_date: moment(fromDate).format('YYYY-MM-DD'),\r\n              to_date: moment(toDate).format('YYYY-MM-DD'),\r\n              remark: bookedByInfoData.message || null,\r\n              booking_nbr: '',\r\n              property: {\r\n                id: context.propertyid,\r\n              },\r\n              booked_on: {\r\n                date: moment().format('YYYY-MM-DD'),\r\n                hour: new Date().getHours(),\r\n                minute: new Date().getMinutes(),\r\n              },\r\n              source: isAgent ? '' : sourceOption,\r\n              rooms: newRooms,\r\n              currency: context.currency,\r\n              arrival: { code: bookedByInfoData.selectedArrivalTime },\r\n              guest: {\r\n                email: bookedByInfoData.email === '' ? null : bookedByInfoData.email || null,\r\n                first_name: bookedByInfoData.firstName,\r\n                last_name: bookedByInfoData.lastName,\r\n                country_id: bookedByInfoData.countryId === '' ? null : bookedByInfoData.countryId,\r\n                city: null,\r\n                mobile: bookedByInfoData.contactNumber === null ? '' : bookedByInfoData.contactNumber,\r\n                country_phone_prefix: bookedByInfoData?.isdCode ?? null,\r\n                address: '',\r\n                dob: null,\r\n                subscribe_to_news_letter: bookedByInfoData.emailGuest || false,\r\n                cci: bookedByInfoData.cardNumber\r\n                  ? {\r\n                      nbr: bookedByInfoData.cardNumber,\r\n                      holder_name: bookedByInfoData.cardHolderName,\r\n                      expiry_month: bookedByInfoData.expiryMonth,\r\n                      expiry_year: bookedByInfoData.expiryYear,\r\n                    }\r\n                  : null,\r\n              },\r\n            },\r\n            pickup_info: null,\r\n          };\r\n          break;\r\n        }\r\n      }\r\n      return newBooking;\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  private getRoomCategoryByRoomId(bookingData) {\r\n    return bookingData.roomsInfo?.find(roomCategory => {\r\n      return roomCategory.id === bookingData.RATE_TYPE;\r\n    });\r\n  }\r\n  public setEditingRoomInfo(bookingData, selectedUnits) {\r\n    const category = this.getRoomCategoryByRoomId(bookingData);\r\n    const room_id = !category ? '' : `c_${category?.id}`;\r\n    const ratePlanId = `p_${bookingData.RATE_PLAN_ID}`;\r\n    const data = {\r\n      adultCount: bookingData.ADULTS_COUNT,\r\n      rate: bookingData.RATE,\r\n      rateType: bookingData.RATE_TYPE,\r\n      ratePlanId: bookingData.RATE_PLAN_ID,\r\n      roomCategoryId: category ? category.id : '',\r\n      roomCategoryName: category ? category.name : '',\r\n      totalRooms: 1,\r\n      ratePlanName: bookingData.RATE_PLAN,\r\n      roomId: bookingData.PR_ID,\r\n      guestName: bookingData.NAME,\r\n      cancelation: bookingData.cancelation,\r\n      guarantee: bookingData.guarantee,\r\n      adult_child_offering: bookingData.adult_child_offering,\r\n    };\r\n    selectedUnits.set(room_id, new Map().set(ratePlanId, data));\r\n  }\r\n}\r\n",":host {\r\n  position: fixed;\r\n  top: 0;\r\n  right: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  z-index: 99;\r\n  /* min-width: 450px; */\r\n}\r\n\r\n.card-title {\r\n  border-bottom: 1px solid #e4e5ec;\r\n  width: 100%;\r\n}\r\n.card-header-container {\r\n  border-bottom: 1px solid #e4e5ec;\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n  padding: 1rem 0;\r\n  justify-content: space-between;\r\n}\r\n.card-header-container h3 {\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\n.scrollContent {\r\n  height: calc(100% - 79px);\r\n  overflow: auto;\r\n  position: relative;\r\n}\r\n\r\n.background-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0, 0, 0, 0.25);\r\n}\r\n\r\n.formContainer {\r\n  height: calc(100% - 79px);\r\n  overflow: auto;\r\n}\r\n.gap-30 {\r\n  gap: 30px;\r\n}\r\n.block-date {\r\n  width: 100%;\r\n}\r\n.sideWindow {\r\n  /* display: grid; */\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  height: 100%;\r\n  background-color: #ffffff;\r\n  width: 100vw;\r\n  overflow-y: auto;\r\n  padding-bottom: 85px !important;\r\n}\r\n.card {\r\n  top: 0;\r\n  z-index: 1000;\r\n}\r\n\r\n.close {\r\n  float: right;\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n  line-height: 1;\r\n  color: #000;\r\n  text-shadow: 0 1px 0 #fff;\r\n  opacity: 0.5;\r\n\r\n  padding: 0;\r\n  background-color: transparent;\r\n  border: 0;\r\n  appearance: none;\r\n}\r\n\r\n.close-icon {\r\n  position: absolute;\r\n  top: 18px;\r\n  right: 33px;\r\n  outline: none;\r\n}\r\n\r\nbutton:not(:disabled),\r\n[type='button']:not(:disabled) {\r\n  cursor: pointer;\r\n}\r\n\r\n/* .row {\r\n  padding: 0 0 0 15px;\r\n  margin: 0;\r\n} */\r\n@media only screen and (min-width: 1200px) {\r\n  .sideWindow {\r\n    max-width: 70%;\r\n  }\r\n}\r\n@media only screen and (min-width: 2000px) {\r\n  .sideWindow {\r\n    max-width: 40%;\r\n  }\r\n}\r\n@media only screen and (min-width: 768px) and (max-width: 1200px) {\r\n  .sideWindow {\r\n    max-width: 90%;\r\n  }\r\n}\r\n@media only screen and (min-width: 600px) and (max-width: 768px) {\r\n  .sideWindow {\r\n    max-width: 75%;\r\n  }\r\n}\r\n@media only screen and (min-width: 641px) {\r\n  .block-date {\r\n    max-width: 450px;\r\n    padding-bottom: 0 !important;\r\n  }\r\n}\r\n","import { Component, Event, EventEmitter, Host, Prop, State, h, Listen, Fragment } from '@stencil/core';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport { dateToFormattedString, getReleaseHoursString } from '@/utils/utils';\r\nimport { ICountry, IEntries, RoomBlockDetails } from '@/models/IBooking';\r\nimport { IPageTwoDataUpdateProps } from '@/models/models';\r\nimport { IglBookPropertyService } from './igl-book-property.service';\r\nimport { IglBookPropertyPayloadEditBooking, TAdultChildConstraints, TEventType, TPropertyButtonsTypes, TSourceOption, TSourceOptions } from '@/models/igl-book-property';\r\nimport locales from '@/stores/locales.store';\r\nimport { IToast } from '@/components/ui/ir-toast/toast';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\nimport { ICurrency } from '@/models/calendarData';\r\nimport booking_store, { calculateTotalRooms, modifyBookingStore, reserveRooms, resetBookingStore } from '@/stores/booking.store';\r\nimport moment from 'moment';\r\nexport type IHistoryEntry = {\r\n  dates: { checkIn: Date; checkOut: Date };\r\n  adults: number;\r\n  children: number;\r\n};\r\n@Component({\r\n  tag: 'igl-book-property',\r\n  styleUrls: ['igl-book-property.css'],\r\n  scoped: true,\r\n})\r\nexport class IglBookProperty {\r\n  @Prop() propertyid: number;\r\n  @Prop() allowedBookingSources: any;\r\n  @Prop() language: string;\r\n  @Prop() countries: ICountry[];\r\n  @Prop() showPaymentDetails: boolean = false;\r\n  @Prop() currency: ICurrency;\r\n  @Prop({ reflect: true, mutable: true }) bookingData: { [key: string]: any };\r\n  @Prop() adultChildConstraints: TAdultChildConstraints;\r\n\r\n  @State() adultChildCount: { adult: number; child: number } = { adult: 0, child: 0 };\r\n  @State() renderAgain: boolean = false;\r\n  @State() dateRangeData: { [key: string]: any };\r\n  @State() defaultData: any;\r\n  @State() isLoading: string;\r\n  @State() bookingHistory: Array<{\r\n    dates: { checkIn: Date; checkOut: Date };\r\n    adults: number;\r\n    children: number;\r\n  }> = [];\r\n\r\n  @Event() closeBookingWindow: EventEmitter<{ [key: string]: any }>;\r\n  @Event() blockedCreated: EventEmitter<RoomBlockDetails>;\r\n  @Event() resetBookingEvt: EventEmitter<null>;\r\n  @Event({ bubbles: true, composed: true }) animateIrButton: EventEmitter<string>;\r\n  @Event({ bubbles: true, composed: true }) animateIrSelect: EventEmitter<string>;\r\n  @Event({ bubbles: true, composed: true }) toast: EventEmitter<IToast>;\r\n\r\n  private initialRoomIds: { roomName: string; ratePlanId: number; roomId: string; roomTypeId: string } | null = null;\r\n  private sourceOption: TSourceOption;\r\n  private page: string;\r\n  private showSplitBookingOption: boolean = false;\r\n  private sourceOptions: TSourceOptions[] = [];\r\n  private guestData: { [key: string]: any }[] = [];\r\n  private bookedByInfoData: { [key: string]: any } = {};\r\n  private blockDatesData: { [key: string]: any } = {};\r\n  private ratePricingMode: IEntries[] = [];\r\n  private selectedUnits: Map<string, Map<string, any>> = new Map();\r\n  private bedPreferenceType: IEntries[] = [];\r\n  private bookingService: BookingService = new BookingService();\r\n  private bookPropertyService = new IglBookPropertyService();\r\n  private defaultDateRange: { from_date: string; to_date: string };\r\n  private updatedBooking: boolean = false;\r\n  private MAX_HISTORY_LENGTH: number = 2;\r\n  private didReservation: boolean;\r\n  private wasBlockedUnit: boolean;\r\n\r\n  async componentWillLoad() {\r\n    this.handleKeyDown = this.handleKeyDown.bind(this);\r\n    this.initializeDefaultDateRange();\r\n\r\n    if (!this.bookingData.defaultDateRange) {\r\n      return;\r\n    }\r\n    // console.log(this.bookingData);\r\n    this.initializeDefaultData();\r\n    this.wasBlockedUnit = this.defaultData.hasOwnProperty('block_exposed_unit_props');\r\n    modifyBookingStore('event_type', { type: this.defaultData.event_type });\r\n    await this.fetchSetupEntriesAndInitialize();\r\n    this.initializeEventData();\r\n  }\r\n\r\n  componentDidLoad() {\r\n    document.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    document.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  @Listen('inputCleared')\r\n  clearBooking(e: CustomEvent) {\r\n    if (this.isEventType('SPLIT_BOOKING')) {\r\n      e.stopImmediatePropagation();\r\n      e.stopPropagation();\r\n      this.bookedByInfoData = {};\r\n      this.bookPropertyService.resetRoomsInfoAndMessage(this);\r\n      this.renderPage();\r\n    }\r\n  }\r\n\r\n  @Listen('spiltBookingSelected')\r\n  async handleSpiltBookingSelected(e: CustomEvent<{ key: string; data: unknown }>) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    const { key, data } = e.detail;\r\n    if (key === 'select' || (key === 'blur' && data !== '')) {\r\n      const res = await this.bookingService.getExposedBooking((data as any).booking_nbr || (data as string), this.language);\r\n      this.defaultData = { ...this.defaultData, booking: res };\r\n      this.bookPropertyService.setBookingInfoFromAutoComplete(this, res);\r\n      this.sourceOption = res.source;\r\n      this.renderPage();\r\n    }\r\n  }\r\n\r\n  // @Listen('adultChild')\r\n  // handleAdultChildChange(event: CustomEvent) {\r\n  //   if (this.isEventType('ADD_ROOM') || this.isEventType('SPLIT_BOOKING')) {\r\n  //     this.bookPropertyService.resetRoomsInfoAndMessage(this);\r\n  //   }\r\n  //   const { adult, child } = event.detail;\r\n  //   this.adultChildCount = { ...event.detail };\r\n  //   this.updateBookingHistory({ adults: adult, children: child });\r\n  // }\r\n  @Listen('adultChild')\r\n  handleAdultChildChange(event: CustomEvent) {\r\n    if (this.isEventType('ADD_ROOM') || this.isEventType('SPLIT_BOOKING')) {\r\n      this.bookPropertyService.resetRoomsInfoAndMessage(this);\r\n    }\r\n    const { adult, child } = event.detail;\r\n    this.adultChildCount = { ...event.detail };\r\n\r\n    // Update the booking history\r\n    this.updateBookingHistory({ adults: Number(adult), children: Number(child) });\r\n  }\r\n\r\n  @Listen('dateSelectEvent')\r\n  onDateRangeSelect(event: CustomEvent<{ [key: string]: any }>) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    const opt: { [key: string]: any } = event.detail;\r\n    this.updateBookingHistory({\r\n      dates: {\r\n        checkIn: new Date(this.dateRangeData.fromDate),\r\n        checkOut: new Date(new Date(opt.data.toDate)),\r\n      },\r\n    });\r\n    console.log('date changed', opt);\r\n    if (opt.key === 'selectedDateRange') {\r\n      this.dateRangeData = opt.data;\r\n      if (this.isEventType('ADD_ROOM') || this.isEventType('SPLIT_BOOKING')) {\r\n        this.defaultData.roomsInfo = [];\r\n      } else if (this.adultChildCount.adult !== 0) {\r\n        this.checkBookingAvailability();\r\n        // this.checkBookingAvailability(dateToFormattedString(new Date(this.dateRangeData.fromDate)), dateToFormattedString(new Date(this.dateRangeData.toDate)));\r\n      }\r\n    }\r\n  }\r\n  @Listen('sourceDropDownChange')\r\n  handleSourceDropDown(event: CustomEvent) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    const value = event.detail;\r\n    const selectedSource = this.sourceOptions.find(opt => opt.id === value.toString());\r\n    this.sourceOption = {\r\n      code: value,\r\n      description: selectedSource.value || '',\r\n      tag: selectedSource.tag,\r\n      id: selectedSource.id,\r\n      type: selectedSource.type,\r\n    };\r\n  }\r\n\r\n  @Listen('gotoSplitPageTwoEvent', { target: 'window' })\r\n  gotoSplitPageTwo() {\r\n    this.gotoPage('page_two');\r\n  }\r\n\r\n  @Listen('buttonClicked')\r\n  handleButtonClicked(event: CustomEvent<{ key: TPropertyButtonsTypes; data?: CustomEvent }>) {\r\n    switch (event.detail.key) {\r\n      case 'save':\r\n        this.bookUser(false);\r\n        break;\r\n      case 'cancel':\r\n        event.stopImmediatePropagation();\r\n        event.stopPropagation();\r\n        this.closeWindow();\r\n        break;\r\n      case 'back':\r\n        event.stopImmediatePropagation();\r\n        event.stopPropagation();\r\n        this.gotoPage('page_one');\r\n        break;\r\n      case 'book':\r\n        this.bookUser(false);\r\n        break;\r\n      case 'bookAndCheckIn':\r\n        this.bookUser(true);\r\n        break;\r\n      case 'next':\r\n        event.stopImmediatePropagation();\r\n        event.stopPropagation();\r\n        if (!this.adultChildCount?.adult) {\r\n          this.animateIrSelect.emit('adult_child_select');\r\n          break;\r\n        }\r\n        if (calculateTotalRooms() > 0) {\r\n          this.gotoPage('page_two');\r\n          break;\r\n        } else if (this.defaultData?.roomsInfo.length === 0) {\r\n          this.animateIrButton.emit('check_availability');\r\n          break;\r\n        }\r\n        this.toast.emit({\r\n          type: 'error',\r\n          description: locales.entries.Lcz_SelectRatePlan,\r\n          title: locales.entries.Lcz_SelectRatePlan,\r\n        });\r\n        break;\r\n      case 'check':\r\n        this.checkBookingAvailability();\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  private updateBookingHistory(partialData: Partial<IHistoryEntry>) {\r\n    const lastEntry = this.bookingHistory[this.bookingHistory.length - 1];\r\n\r\n    const newEntry: IHistoryEntry = {\r\n      dates: {\r\n        checkIn: partialData.dates?.checkIn || lastEntry?.dates?.checkIn || new Date(this.dateRangeData.fromDate),\r\n        checkOut: partialData.dates?.checkOut || lastEntry?.dates?.checkOut || new Date(this.dateRangeData.toDate),\r\n      },\r\n      adults: partialData.adults ?? lastEntry?.adults ?? this.adultChildCount.adult,\r\n      children: partialData.children ?? lastEntry?.children ?? this.adultChildCount.child,\r\n    };\r\n\r\n    // Update the booking history\r\n    this.bookingHistory.push(newEntry);\r\n    if (this.bookingHistory.length > this.MAX_HISTORY_LENGTH) {\r\n      this.bookingHistory.shift();\r\n    }\r\n  }\r\n\r\n  private handleKeyDown(e: KeyboardEvent) {\r\n    if (e.key === 'Escape') {\r\n      this.closeWindow();\r\n    }\r\n  }\r\n\r\n  private initializeDefaultDateRange() {\r\n    this.defaultDateRange = {\r\n      from_date: this.bookingData.FROM_DATE,\r\n      to_date: this.bookingData.TO_DATE,\r\n    };\r\n  }\r\n\r\n  private initializeDefaultData() {\r\n    this.defaultData = this.bookingData;\r\n    this.dateRangeData = { ...this.defaultData.defaultDateRange };\r\n  }\r\n\r\n  private async fetchSetupEntriesAndInitialize() {\r\n    try {\r\n      const setupEntries = await this.fetchSetupEntries();\r\n      this.setSourceOptions(this.allowedBookingSources);\r\n      this.setOtherProperties(setupEntries);\r\n    } catch (error) {\r\n      console.error('Error fetching setup entries:', error);\r\n    }\r\n  }\r\n\r\n  private initializeEventData() {\r\n    if (this.isEventType('EDIT_BOOKING')) {\r\n      this.initializeEditBookingData();\r\n    }\r\n\r\n    if (!this.isEventType('BAR_BOOKING')) {\r\n      this.bookPropertyService.resetRoomsInfoAndMessage(this);\r\n    }\r\n\r\n    this.initializePage();\r\n  }\r\n\r\n  private initializeEditBookingData() {\r\n    this.adultChildCount = {\r\n      adult: this.defaultData.ADULTS_COUNT,\r\n      child: this.defaultData.CHILDREN_COUNT,\r\n    };\r\n\r\n    this.initialRoomIds = {\r\n      roomName: this.defaultData.roomName,\r\n      ratePlanId: this.defaultData.RATE_PLAN_ID,\r\n      roomId: this.defaultData.PR_ID,\r\n      roomTypeId: this.defaultData.RATE_TYPE,\r\n    };\r\n    const { currentRoomType, GUEST } = this.defaultData as IglBookPropertyPayloadEditBooking;\r\n    console.log(GUEST);\r\n    modifyBookingStore('guest', {\r\n      bed_preference: currentRoomType.bed_preference?.toString(),\r\n      infant_nbr: currentRoomType.occupancy.infant_nbr,\r\n      first_name: GUEST.first_name ?? '',\r\n      last_name: GUEST.last_name ?? '',\r\n      // name: currentRoomType.guest.last_name ? currentRoomType.guest.first_name + ' ' + currentRoomType.guest.last_name : currentRoomType.guest.first_name,\r\n      unit: (currentRoomType.unit as any)?.id?.toString(),\r\n    });\r\n    this.checkBookingAvailability();\r\n    this.bookPropertyService.setEditingRoomInfo(this.defaultData, this.selectedUnits);\r\n  }\r\n\r\n  private initializePage() {\r\n    switch (this.defaultData.event_type) {\r\n      case 'SPLIT_BOOKING':\r\n        this.showSplitBookingOption = true;\r\n        this.page = 'page_one';\r\n        break;\r\n      case 'BLOCK_DATES':\r\n        this.page = 'page_block_date';\r\n        break;\r\n      default:\r\n        this.page = 'page_one';\r\n        break;\r\n    }\r\n  }\r\n\r\n  async fetchSetupEntries() {\r\n    return await this.bookingService.fetchSetupEntries();\r\n  }\r\n\r\n  private isGuestDataIncomplete() {\r\n    for (const roomtypeId in booking_store.ratePlanSelections) {\r\n      const roomtype = booking_store.ratePlanSelections[roomtypeId];\r\n      for (const rateplanId in roomtype) {\r\n        const rateplan = roomtype[rateplanId];\r\n        if (rateplan.reserved > 0) {\r\n          for (const guest of rateplan.guest) {\r\n            if (guest.first_name === '' || guest.last_name === '') {\r\n              return true;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private isButtonDisabled() {\r\n    const isValidProperty = (property, key, comparedBy) => {\r\n      if (!property) {\r\n        return true;\r\n      }\r\n      if (property === this.guestData) {\r\n        return this.isGuestDataIncomplete();\r\n      }\r\n      if (key === 'selectedArrivalTime') {\r\n        if (property[key] !== undefined) {\r\n          return property[key].code === '';\r\n        } else {\r\n          return true;\r\n        }\r\n      }\r\n      return property[key] === comparedBy || property[key] === undefined;\r\n    };\r\n    return (\r\n      isValidProperty(this.guestData, 'guestName', '') ||\r\n      isValidProperty(this.bookedByInfoData, 'firstName', '') ||\r\n      isValidProperty(this.bookedByInfoData, 'lastName', '') ||\r\n      isValidProperty(this.bookedByInfoData, 'selectedArrivalTime', '')\r\n    );\r\n  }\r\n\r\n  private setSourceOptions(bookingSource: any[]) {\r\n    this.sourceOptions = bookingSource.map(source => ({\r\n      id: source.id,\r\n      value: source.description,\r\n      tag: source.tag,\r\n      type: source.type,\r\n    }));\r\n    if (this.isEventType('EDIT_BOOKING')) {\r\n      this.sourceOption = { ...this.defaultData.SOURCE };\r\n    } else {\r\n      this.sourceOption = {\r\n        code: bookingSource[0].code,\r\n        description: bookingSource[0].description,\r\n        tag: bookingSource[0].tag,\r\n        type: bookingSource[0].type,\r\n        id: bookingSource[0].id,\r\n      };\r\n    }\r\n  }\r\n\r\n  private setOtherProperties(res: any) {\r\n    this.ratePricingMode = res?.ratePricingMode;\r\n    this.bookedByInfoData.arrivalTime = res.arrivalTime;\r\n    this.bedPreferenceType = res.bedPreferenceType;\r\n  }\r\n\r\n  private async checkBookingAvailability() {\r\n    resetBookingStore();\r\n    const from_date = moment(this.dateRangeData.fromDate).format('YYYY-MM-DD');\r\n    const to_date = moment(this.dateRangeData.toDate).format('YYYY-MM-DD');\r\n    const is_in_agent_mode = this.sourceOption['type'] === 'TRAVEL_AGENCY';\r\n    try {\r\n      const room_type_ids_to_update = this.isEventType('EDIT_BOOKING') ? [this.defaultData.RATE_TYPE] : [];\r\n      const room_type_ids = this.isEventType('BAR_BOOKING') ? this.defaultData.roomsInfo.map(room => room.id) : [];\r\n      const data = await this.bookingService.getBookingAvailability({\r\n        from_date,\r\n        to_date,\r\n        propertyid: this.propertyid,\r\n        adultChildCount: this.adultChildCount,\r\n        language: this.language,\r\n        room_type_ids,\r\n        currency: this.currency,\r\n        agent_id: is_in_agent_mode ? this.sourceOption['tag'] : null,\r\n        is_in_agent_mode,\r\n        room_type_ids_to_update,\r\n      });\r\n      if (!this.isEventType('EDIT_BOOKING')) {\r\n        this.defaultData.defaultDateRange.fromDate = new Date(this.dateRangeData.fromDate);\r\n        this.defaultData.defaultDateRange.toDate = new Date(this.dateRangeData.toDate);\r\n      }\r\n      this.defaultData = { ...this.defaultData, roomsInfo: data };\r\n      if (this.isEventType('EDIT_BOOKING') && !this.updatedBooking) {\r\n        this.updateBooking();\r\n      }\r\n    } catch (error) {\r\n      console.error('Error initializing booking availability:', error);\r\n    }\r\n  }\r\n\r\n  private updateBooking() {\r\n    try {\r\n      const { currentRoomType, GUEST } = this.defaultData as IglBookPropertyPayloadEditBooking;\r\n      const roomtypeId = currentRoomType.roomtype.id;\r\n      const rateplanId = currentRoomType.rateplan.id;\r\n      console.log({ GUEST });\r\n      const guest = {\r\n        bed_preference: currentRoomType.bed_preference?.toString(),\r\n        infant_nbr: currentRoomType.occupancy.infant_nbr,\r\n        last_name: GUEST.last_name,\r\n        first_name: GUEST.first_name,\r\n        unit: (currentRoomType.unit as any)?.id?.toString(),\r\n        roomtype_id: currentRoomType.roomtype.id,\r\n      };\r\n      modifyBookingStore('guest', guest);\r\n      reserveRooms({\r\n        roomTypeId: roomtypeId,\r\n        ratePlanId: rateplanId,\r\n        rooms: 1,\r\n        guest: [guest],\r\n      });\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n  private async checkAndBlockDate() {\r\n    try {\r\n      const { block_exposed_unit_props } = this.defaultData;\r\n      await this.bookingService.getBookingAvailability({\r\n        from_date: block_exposed_unit_props.from_date,\r\n        to_date: block_exposed_unit_props.to_date,\r\n        propertyid: this.propertyid,\r\n        adultChildCount: {\r\n          adult: 2,\r\n          child: 0,\r\n        },\r\n        language: this.language,\r\n        room_type_ids: this.defaultData.roomsInfo.map(room => room.id),\r\n        currency: this.currency,\r\n      });\r\n      const isAvailable = booking_store.roomTypes.every(rt => rt.is_available_to_book);\r\n      if (isAvailable) {\r\n        await this.handleBlockDate(false);\r\n      } else {\r\n        console.log('Blocked date is unavailable. Continuing...');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error checking and blocking date:', error);\r\n    }\r\n  }\r\n  private async closeWindow() {\r\n    resetBookingStore();\r\n    this.closeBookingWindow.emit();\r\n\r\n    if (this.wasBlockedUnit && !this.didReservation) {\r\n      await this.checkAndBlockDate();\r\n    }\r\n    document.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  private isEventType(key: TEventType) {\r\n    return this.defaultData.event_type === key;\r\n  }\r\n\r\n  private handleBlockDateUpdate(event: CustomEvent<{ [key: string]: any }>) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    const opt: { [key: string]: any } = event.detail;\r\n    this.blockDatesData = opt.data;\r\n  }\r\n\r\n  private handleGuestInfoUpdate(event: CustomEvent<{ [key: string]: any }>) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    const opt = event.detail;\r\n    if (opt.guestRefKey) {\r\n      if (this.isEventType('BAR_BOOKING') || this.isEventType('SPLIT_BOOKING')) {\r\n        this.guestData[opt.guestRefKey] = {\r\n          ...opt.data,\r\n          roomId: this.defaultData.PR_ID,\r\n        };\r\n      } else this.guestData[opt.guestRefKey] = opt.data;\r\n    }\r\n  }\r\n\r\n  private handleBookedByInfoUpdate(event: CustomEvent<{ [key: string]: any }>) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    const opt: { [key: string]: any } = event.detail;\r\n    this.bookedByInfoData = opt.value.data;\r\n  }\r\n\r\n  private renderPage() {\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n\r\n  private gotoPage(gotoPage: string) {\r\n    this.page = gotoPage;\r\n    this.renderPage();\r\n  }\r\n\r\n  private getPageBlockDatesView() {\r\n    return (\r\n      <Fragment>\r\n        <igl-block-dates-view\r\n          fromDate={this.defaultData.FROM_DATE}\r\n          toDate={this.defaultData.TO_DATE}\r\n          entryDate={this.defaultData.ENTRY_DATE}\r\n          onDataUpdateEvent={event => this.handleBlockDateUpdate(event)}\r\n        ></igl-block-dates-view>\r\n        <div class=\"p-0 mb-1 mt-2 gap-30 d-flex align-items-center justify-content-between\">\r\n          <ir-button text={locales.entries.Lcz_Cancel} btn_color=\"secondary\" class=\"flex-fill\" onClick={() => this.closeWindow()}></ir-button>\r\n          <ir-button text={locales.entries.Lcz_Blockdates} isLoading={isRequestPending('/Block_Exposed_Unit')} class=\"flex-fill\" onClick={() => this.handleBlockDate()}></ir-button>\r\n        </div>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  private handlePageTwoDataUpdateEvent(event: CustomEvent<IPageTwoDataUpdateProps>) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    if (event.detail.key === 'propertyBookedBy') {\r\n      this.handleBookedByInfoUpdate(event);\r\n    } else {\r\n      this.handleGuestInfoUpdate(event);\r\n    }\r\n  }\r\n\r\n  private async handleBlockDate(auto_close = true) {\r\n    const props = this.wasBlockedUnit\r\n      ? this.defaultData.block_exposed_unit_props\r\n      : (() => {\r\n          const releaseData = getReleaseHoursString(+this.blockDatesData.RELEASE_AFTER_HOURS);\r\n          return {\r\n            from_date: dateToFormattedString(this.defaultData.defaultDateRange.fromDate),\r\n            to_date: dateToFormattedString(this.defaultData.defaultDateRange.toDate),\r\n            NOTES: this.blockDatesData.OPTIONAL_REASON || '',\r\n            pr_id: this.defaultData.PR_ID.toString(),\r\n            STAY_STATUS_CODE: this.blockDatesData.OUT_OF_SERVICE ? '004' : this.blockDatesData.RELEASE_AFTER_HOURS === 0 ? '002' : '003',\r\n            DESCRIPTION: this.blockDatesData.RELEASE_AFTER_HOURS || '',\r\n            ...releaseData,\r\n          };\r\n        })();\r\n    await this.bookingService.blockUnit(props);\r\n    // const blockedUnit = await transformNewBLockedRooms(result);\r\n    // this.blockedCreated.emit(blockedUnit);\r\n    if (auto_close) this.closeWindow();\r\n  }\r\n\r\n  private async bookUser(check_in: boolean) {\r\n    this.setLoadingState(check_in);\r\n\r\n    if (this.isEventType('EDIT_BOOKING') || this.isEventType('ADD_ROOM')) {\r\n      if (this.isGuestDataIncomplete()) {\r\n        this.isLoading = '';\r\n        return;\r\n      }\r\n    } else if (this.isButtonDisabled()) {\r\n      this.isLoading = '';\r\n      return;\r\n    }\r\n\r\n    try {\r\n      if (this.isEventType('EDIT_BOOKING') || this.isEventType('ADD_ROOM')) {\r\n        this.bookedByInfoData.message = this.defaultData.NOTES;\r\n      }\r\n      this.didReservation = true;\r\n      const serviceParams = await this.bookPropertyService.prepareBookUserServiceParams({\r\n        context: this,\r\n        sourceOption: this.sourceOption,\r\n        check_in,\r\n      });\r\n      await this.bookingService.doReservation(serviceParams);\r\n      this.resetBookingEvt.emit(null);\r\n    } catch (error) {\r\n      console.error('Error booking user:', error);\r\n    } finally {\r\n      // this.isLoading = null;\r\n      this.resetLoadingState();\r\n    }\r\n  }\r\n\r\n  private setLoadingState(assign_units: boolean) {\r\n    if (this.isEventType('EDIT_BOOKING') || this.isEventType('ADD_ROOM')) {\r\n      this.isLoading = 'save';\r\n    } else {\r\n      this.isLoading = assign_units ? 'bookAndCheckIn' : 'book';\r\n    }\r\n  }\r\n\r\n  private resetLoadingState() {\r\n    this.isLoading = '';\r\n    setTimeout(() => {\r\n      this.closeWindow();\r\n    }, 100);\r\n  }\r\n\r\n  private getCurrentPage(name: string) {\r\n    return this.page === name;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host data-testid=\"book_property_sheet\">\r\n        <div class=\"background-overlay\" onClick={() => this.closeWindow()}></div>\r\n        <div class={'sideWindow pb-5 pb-md-0 ' + (this.getCurrentPage('page_block_date') ? 'block-date' : '')}>\r\n          <div class=\"card position-sticky mb-0 shadow-none p-0 \">\r\n            <div class=\"card-header-container mb-2\">\r\n              <h3 class=\" text-left font-medium-2 px-2 px-md-3\">{this.getCurrentPage('page_block_date') ? this.defaultData.BLOCK_DATES_TITLE : this.defaultData.TITLE}</h3>\r\n              <ir-icon\r\n                class={'px-2'}\r\n                onIconClickHandler={() => {\r\n                  this.closeWindow();\r\n                }}\r\n              >\r\n                <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 384 512\" height={20} width={20}>\r\n                  <path\r\n                    fill=\"currentColor\"\r\n                    d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\"\r\n                  />\r\n                </svg>\r\n              </ir-icon>\r\n            </div>\r\n          </div>\r\n          <div class=\"px-2 px-md-3\">\r\n            {this.getCurrentPage('page_one') && (\r\n              <igl-booking-overview-page\r\n                initialRoomIds={this.initialRoomIds}\r\n                defaultDaterange={this.defaultDateRange}\r\n                class={'p-0 mb-1'}\r\n                eventType={this.defaultData.event_type}\r\n                selectedRooms={this.selectedUnits}\r\n                currency={this.currency}\r\n                showSplitBookingOption={this.showSplitBookingOption}\r\n                ratePricingMode={this.ratePricingMode}\r\n                dateRangeData={this.dateRangeData}\r\n                bookingData={this.defaultData}\r\n                adultChildCount={this.adultChildCount}\r\n                bookedByInfoData={this.bookedByInfoData}\r\n                adultChildConstraints={this.adultChildConstraints}\r\n                sourceOptions={this.sourceOptions}\r\n                propertyId={this.propertyid}\r\n              ></igl-booking-overview-page>\r\n            )}\r\n\r\n            {this.getCurrentPage('page_two') && (\r\n              <igl-booking-form\r\n                currency={this.currency}\r\n                propertyId={this.propertyid}\r\n                showPaymentDetails={this.showPaymentDetails}\r\n                selectedGuestData={this.guestData}\r\n                countries={this.countries}\r\n                isLoading={this.isLoading}\r\n                selectedRooms={this.selectedUnits}\r\n                bedPreferenceType={this.bedPreferenceType}\r\n                dateRangeData={this.dateRangeData}\r\n                bookingData={this.defaultData}\r\n                showSplitBookingOption={this.showSplitBookingOption}\r\n                language={this.language}\r\n                bookedByInfoData={this.bookedByInfoData}\r\n                defaultGuestData={this.defaultData}\r\n                isEditOrAddRoomEvent={this.isEventType('EDIT_BOOKING') || this.isEventType('ADD_ROOM')}\r\n                onDataUpdateEvent={event => this.handlePageTwoDataUpdateEvent(event)}\r\n              ></igl-booking-form>\r\n            )}\r\n            {this.getCurrentPage('page_block_date') ? this.getPageBlockDatesView() : null}\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n:host > * {\r\n  margin: auto;\r\n  padding: auto;\r\n}\r\n\r\n.gap-30 {\r\n  gap: 30px;\r\n}\r\n","import { Component, Event, EventEmitter, Fragment, Host, Prop, h } from '@stencil/core';\r\nimport { FooterButtonType, TPropertyButtonsTypes } from '../../../../models/igl-book-property';\r\nimport locales from '@/stores/locales.store';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\nimport { TIcons } from '@/components/ui/ir-icons/icons';\r\n\r\n@Component({\r\n  tag: 'igl-book-property-footer',\r\n  styleUrl: 'igl-book-property-footer.css',\r\n  scoped: true,\r\n})\r\nexport class IglBookPropertyFooter {\r\n  @Prop() eventType: string;\r\n  @Prop() disabled: boolean = true;\r\n  @Event() buttonClicked: EventEmitter<{ key: TPropertyButtonsTypes }>;\r\n  private isEventType(event: string) {\r\n    return event === this.eventType;\r\n  }\r\n  editNext(label) {\r\n    if (this.isEventType('EDIT_BOOKING')) {\r\n      if (label === 'Cancel') {\r\n        return 'flex-fill';\r\n      } else {\r\n        return 'd-none d-md-block  flex-fill';\r\n      }\r\n    }\r\n    return 'flex-fill';\r\n  }\r\n\r\n  private renderButton(type: FooterButtonType, label: string, disabled = false, icon_name?: TIcons) {\r\n    return (\r\n      <div class={this.shouldRenderTwoButtons() ? ` ${this.editNext(label)}` : 'flex-fill'}>\r\n        {/* <button class={`btn btn-${type === 'cancel' ? 'secondary' : 'primary'} full-width`} onClick={() => this.buttonClicked.emit({ key: type })} disabled={disabled}>\r\n          {label}\r\n        </button> */}\r\n        <ir-button\r\n          btn_color={type === 'cancel' ? 'secondary' : 'primary'}\r\n          text={label}\r\n          btn_disabled={disabled}\r\n          onClickHandler={() => {\r\n            this.buttonClicked.emit({ key: type });\r\n          }}\r\n          icon_name={icon_name}\r\n          iconPosition=\"right\"\r\n          style={{ '--icon-size': '1rem' }}\r\n          icon_style={{ paddingBottom: '1.9px' }}\r\n        ></ir-button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private shouldRenderTwoButtons() {\r\n    return this.isEventType('PLUS_BOOKING') || this.isEventType('ADD_ROOM') || this.isEventType('EDIT_BOOKING');\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"d-flex justify-content-between gap-30 align-items-center\">\r\n          {this.isEventType('EDIT_BOOKING') ? (\r\n            <Fragment>\r\n              {this.renderButton('cancel', locales.entries.Lcz_Cancel)}\r\n              {this.shouldRenderTwoButtons() && this.renderButton('next', `${locales.entries.Lcz_Next}`, isRequestPending('/Get_Exposed_Booking_Availability'), 'angles_right')}\r\n            </Fragment>\r\n          ) : (\r\n            <Fragment>\r\n              {this.renderButton('cancel', locales.entries.Lcz_Cancel)}\r\n              {this.shouldRenderTwoButtons() && this.renderButton('next', `${locales.entries.Lcz_Next}`, false, 'angles_right')}\r\n            </Fragment>\r\n          )}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n\r\n.sourceContainer {\r\n  max-width: 350px;\r\n}\r\n.message-label {\r\n  font-size: 80%;\r\n}\r\n","import { Component, Host, Prop, h, Event, EventEmitter } from '@stencil/core';\r\nimport { TAdultChildConstraints, TPropertyButtonsTypes, TSourceOption, TSourceOptions } from '../../../../models/igl-book-property';\r\n\r\nimport moment from 'moment';\r\nimport locales from '@/stores/locales.store';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\nimport calendar_data from '@/stores/calendar-data';\r\nimport { IToast } from '@/components/ui/ir-toast/toast';\r\nimport { modifyBookingStore } from '@/stores/booking.store';\r\n\r\n@Component({\r\n  tag: 'igl-book-property-header',\r\n  styleUrl: 'igl-book-property-header.css',\r\n  scoped: true,\r\n})\r\nexport class IglBookPropertyHeader {\r\n  @Prop() splitBookingId: any = '';\r\n  @Prop() bookingData: any = '';\r\n  @Prop() minDate: string;\r\n  @Prop() sourceOptions: TSourceOptions[] = [];\r\n  @Prop() message: string;\r\n  @Prop() bookingDataDefaultDateRange: { [key: string]: any };\r\n  @Prop() showSplitBookingOption: boolean = false;\r\n  @Prop() adultChildConstraints: TAdultChildConstraints;\r\n  @Prop() splitBookings: any[];\r\n  @Prop() adultChildCount: { adult: number; child: number };\r\n  @Prop() dateRangeData: any;\r\n  @Prop() bookedByInfoData: any;\r\n  @Prop() defaultDaterange: { from_date: string; to_date: string };\r\n  @Prop() propertyId: number;\r\n\r\n  @Event() splitBookingDropDownChange: EventEmitter<any>;\r\n  @Event() sourceDropDownChange: EventEmitter<string>;\r\n  @Event() adultChild: EventEmitter<any>;\r\n  @Event() checkClicked: EventEmitter<any>;\r\n  @Event() buttonClicked: EventEmitter<{ key: TPropertyButtonsTypes }>;\r\n  @Event() toast: EventEmitter<IToast>;\r\n  @Event() spiltBookingSelected: EventEmitter<{ key: string; data: unknown }>;\r\n\r\n  @Event({ bubbles: true, composed: true }) animateIrButton: EventEmitter<string>;\r\n  @Event({ bubbles: true, composed: true }) animateIrSelect: EventEmitter<string>;\r\n\r\n  private sourceOption: TSourceOption = {\r\n    code: '',\r\n    description: '',\r\n    tag: '',\r\n    id: '',\r\n    type: '',\r\n  };\r\n\r\n  getSplitBookingList() {\r\n    return (\r\n      <fieldset class=\"d-flex flex-column text-left mb-1  flex-lg-row align-items-lg-center\">\r\n        <label class=\"mr-lg-1\">{locales.entries.Lcz_Tobooking}# </label>\r\n        <div class=\"btn-group mt-1 mt-lg-0 sourceContainer\">\r\n          <ir-autocomplete\r\n            value={\r\n              Object.keys(this.bookedByInfoData).length > 1 ? `${this.bookedByInfoData.bookingNumber} ${this.bookedByInfoData.firstName} ${this.bookedByInfoData.lastName}` : ''\r\n            }\r\n            from_date={moment(this.bookingDataDefaultDateRange.fromDate).format('YYYY-MM-DD')}\r\n            to_date={moment(this.bookingDataDefaultDateRange.toDate).format('YYYY-MM-DD')}\r\n            propertyId={this.propertyId}\r\n            placeholder={locales.entries.Lcz_BookingNumber}\r\n            onComboboxValue={e => {\r\n              e.stopImmediatePropagation();\r\n              e.stopPropagation;\r\n              this.spiltBookingSelected.emit(e.detail);\r\n            }}\r\n            isSplitBooking\r\n          ></ir-autocomplete>\r\n        </div>\r\n      </fieldset>\r\n    );\r\n  }\r\n  getSourceNode() {\r\n    return (\r\n      <fieldset class=\"d-flex text-left  align-items-center\">\r\n        <label class=\"mr-1\">{locales.entries.Lcz_Source} </label>\r\n        <div class=\"btn-group mt-0 flex-fill sourceContainer\">\r\n          <select class=\"form-control input-sm\" id=\"xSmallSelect\" onChange={evt => this.sourceDropDownChange.emit((evt.target as HTMLSelectElement).value)}>\r\n            {this.sourceOptions.map(option => {\r\n              if (option.type === 'LABEL') {\r\n                return <optgroup label={option.value}></optgroup>;\r\n              }\r\n              return (\r\n                <option value={option.id} selected={this.sourceOption.code === option.id}>\r\n                  {option.value}\r\n                </option>\r\n              );\r\n            })}\r\n          </select>\r\n        </div>\r\n      </fieldset>\r\n    );\r\n  }\r\n  handleAdultChildChange(key: string, value: string) {\r\n    //const value = (event.target as HTMLSelectElement).value;\r\n    let obj = {};\r\n    if (value === '') {\r\n      obj = {\r\n        ...this.adultChildCount,\r\n        [key]: 0,\r\n      };\r\n    } else {\r\n      obj = {\r\n        ...this.adultChildCount,\r\n        [key]: value,\r\n      };\r\n    }\r\n    modifyBookingStore('bookingAvailabilityParams', {\r\n      from_date: this.bookingDataDefaultDateRange.fromDate,\r\n      to_date: this.bookingDataDefaultDateRange.toDate,\r\n      adult_nbr: obj?.['adult'] ?? 0,\r\n      child_nbr: obj?.['child'] ?? 0,\r\n    });\r\n    this.adultChild.emit(obj);\r\n  }\r\n\r\n  getAdultChildConstraints() {\r\n    return (\r\n      <div class={'mt-1 mt-lg-0 d-flex flex-column text-left'}>\r\n        {/* <label class=\"mb-1 d-lg-none\">{locales.entries.Lcz_NumberOfGuests} </label> */}\r\n        <div class=\"form-group  my-lg-0 text-left d-flex align-items-center justify-content-between justify-content-sm-start\">\r\n          <fieldset>\r\n            <div class=\"btn-group ml-0\">\r\n              <ir-select\r\n                testId=\"adult_number\"\r\n                class={'m-0'}\r\n                selectedValue={this.adultChildCount?.adult?.toString()}\r\n                onSelectChange={e => this.handleAdultChildChange('adult', e.detail)}\r\n                select_id=\"adult_select\"\r\n                firstOption={locales.entries.Lcz_AdultsCaption}\r\n                LabelAvailable={false}\r\n                data={Array.from(Array(this.adultChildConstraints.adult_max_nbr), (_, i) => i + 1).map(option => ({\r\n                  text: option.toString(),\r\n                  value: option.toString(),\r\n                }))}\r\n              ></ir-select>\r\n            </div>\r\n          </fieldset>\r\n          {this.adultChildConstraints.child_max_nbr > 0 && (\r\n            <fieldset>\r\n              <div class=\"btn-group ml-1 p-0\">\r\n                {/* <select class=\"form-control input-sm\" id=\"xChildrenSmallSelect\" onChange={evt => this.handleAdultChildChange('child', evt)}>\r\n                  <option value={''}>{this.renderChildCaption()}</option>\r\n                  {Array.from(Array(this.adultChildConstraints.child_max_nbr), (_, i) => i + 1).map(option => (\r\n                    <option value={option}>{option}</option>\r\n                  ))}\r\n                </select> */}\r\n                <ir-select\r\n                  selectedValue={this.adultChildCount?.child?.toString()}\r\n                  testId=\"child_number\"\r\n                  onSelectChange={e => this.handleAdultChildChange('child', e.detail)}\r\n                  select_id=\"child_select\"\r\n                  firstOption={this.renderChildCaption()}\r\n                  LabelAvailable={false}\r\n                  data={Array.from(Array(this.adultChildConstraints.child_max_nbr), (_, i) => i + 1).map(option => ({\r\n                    text: option.toString(),\r\n                    value: option.toString(),\r\n                  }))}\r\n                ></ir-select>\r\n              </div>\r\n            </fieldset>\r\n          )}\r\n          <ir-button\r\n            btn_id=\"check_availability\"\r\n            isLoading={isRequestPending('/Check_Availability')}\r\n            icon=\"\"\r\n            size=\"sm\"\r\n            class=\"ml-2\"\r\n            text={locales.entries.Lcz_Check}\r\n            onClickHandler={() => this.handleButtonClicked()}\r\n          ></ir-button>\r\n          {/* <button class={'btn btn-primary btn-sm  ml-2'} onClick={() => this.handleButtonClicked()}>\r\n            {locales.entries.Lcz_Check}\r\n          </button> */}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  renderChildCaption() {\r\n    const maxAge = this.adultChildConstraints.child_max_age;\r\n    let years = locales.entries.Lcz_Years;\r\n\r\n    if (maxAge === 1) {\r\n      years = locales.entries.Lcz_Year;\r\n    }\r\n    return `${locales.entries.Lcz_ChildCaption} 0 - ${this.adultChildConstraints.child_max_age} ${years}`;\r\n  }\r\n  handleButtonClicked() {\r\n    if (this.isEventType('SPLIT_BOOKING') && Object.keys(this.bookedByInfoData).length <= 1) {\r\n      this.toast.emit({\r\n        type: 'error',\r\n        title: locales.entries.Lcz_ChooseBookingNumber,\r\n        description: '',\r\n        position: 'top-right',\r\n      });\r\n    } else if (this.isEventType('ADD_ROOM') || this.isEventType('SPLIT_BOOKING')) {\r\n      const initialToDate = moment(new Date(this.bookedByInfoData.to_date || this.defaultDaterange.to_date));\r\n      const initialFromDate = moment(new Date(this.bookedByInfoData.from_date || this.defaultDaterange.from_date));\r\n      const selectedFromDate = moment(new Date(this.dateRangeData.fromDate));\r\n      const selectedToDate = moment(new Date(this.dateRangeData.toDate));\r\n      if (selectedToDate.isBefore(initialFromDate) || selectedFromDate.isAfter(initialToDate)) {\r\n        this.toast.emit({\r\n          type: 'error',\r\n          title: `${locales.entries.Lcz_CheckInDateShouldBeMAx.replace(\r\n            '%1',\r\n            moment(new Date(this.bookedByInfoData.from_date || this.defaultDaterange.from_date)).format('ddd, DD MMM YYYY'),\r\n          ).replace('%2', moment(new Date(this.bookedByInfoData.to_date || this.defaultDaterange.to_date)).format('ddd, DD MMM YYYY'))}  `,\r\n          description: '',\r\n          position: 'top-right',\r\n        });\r\n        return;\r\n      } else if (this.adultChildCount.adult === 0) {\r\n        this.toast.emit({ type: 'error', title: locales.entries.Lcz_PlzSelectNumberOfGuests, description: '', position: 'top-right' });\r\n        this.animateIrSelect.emit('adult_child_select');\r\n      } else {\r\n        this.buttonClicked.emit({ key: 'check' });\r\n      }\r\n    } else if (this.minDate && new Date(this.dateRangeData.fromDate).getTime() > new Date(this.bookedByInfoData.to_date || this.defaultDaterange.to_date).getTime()) {\r\n      this.toast.emit({\r\n        type: 'error',\r\n        title: `${locales.entries.Lcz_CheckInDateShouldBeMAx.replace(\r\n          '%1',\r\n          moment(new Date(this.bookedByInfoData.from_date || this.defaultDaterange.from_date)).format('ddd, DD MMM YYYY'),\r\n        ).replace('%2', moment(new Date(this.bookedByInfoData.to_date || this.defaultDaterange.to_date)).format('ddd, DD MMM YYYY'))}  `,\r\n        description: '',\r\n        position: 'top-right',\r\n      });\r\n    } else if (this.adultChildCount.adult === 0) {\r\n      this.animateIrSelect.emit('adult_child_select');\r\n      this.toast.emit({ type: 'error', title: locales.entries.Lcz_PlzSelectNumberOfGuests, description: '', position: 'top-right' });\r\n    } else {\r\n      this.buttonClicked.emit({ key: 'check' });\r\n    }\r\n  }\r\n  isEventType(key: string) {\r\n    return this.bookingData.event_type === key;\r\n  }\r\n\r\n  render() {\r\n    const showSourceNode = this.showSplitBookingOption ? this.getSplitBookingList() : this.isEventType('EDIT_BOOKING') || this.isEventType('ADD_ROOM') ? false : true;\r\n    return (\r\n      <Host>\r\n        {this.isEventType('SPLIT_BOOKING') && this.getSplitBookingList()}\r\n        {showSourceNode && this.getSourceNode()}\r\n        <div class={`d-flex flex-column flex-lg-row align-items-lg-center ${showSourceNode ? 'mt-1' : ''}`}>\r\n          <fieldset class=\"mt-lg-0 mr-1 \">\r\n            <igl-date-range\r\n              data-testid=\"date_picker\"\r\n              variant=\"booking\"\r\n              dateLabel={locales.entries.Lcz_Dates}\r\n              minDate={this.isEventType('PLUS_BOOKING') ? moment().add(-1, 'months').startOf('month').format('YYYY-MM-DD') : this.minDate}\r\n              disabled={this.isEventType('BAR_BOOKING') || this.isEventType('SPLIT_BOOKING')}\r\n              defaultData={this.bookingDataDefaultDateRange}\r\n            ></igl-date-range>\r\n          </fieldset>\r\n          {!this.isEventType('EDIT_BOOKING') && this.getAdultChildConstraints()}\r\n        </div>\r\n        <p class=\"text-right mt-1 message-label\">{calendar_data.tax_statement}</p>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n\r\n.card-title {\r\n  border-bottom: 1px solid #e4e5ec;\r\n}\r\n\r\n.scrollContent {\r\n  height: calc(100% - 79px);\r\n  overflow: auto;\r\n  position: relative;\r\n}\r\n\r\n.background-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0, 0, 0, 0.25);\r\n}\r\n\r\n.formContainer {\r\n  height: calc(100% - 79px);\r\n  overflow: auto;\r\n}\r\n\r\n.sideWindow {\r\n  /* display: grid; */\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  height: 100%;\r\n  background-color: #ffffff;\r\n}\r\n\r\n.close {\r\n  float: right;\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n  line-height: 1;\r\n  color: #000;\r\n  text-shadow: 0 1px 0 #fff;\r\n  opacity: 0.5;\r\n\r\n  padding: 0;\r\n  background-color: transparent;\r\n  border: 0;\r\n  appearance: none;\r\n}\r\n\r\n.close-icon {\r\n  position: absolute;\r\n  top: 18px;\r\n  right: 33px;\r\n  outline: none;\r\n}\r\n\r\nbutton:not(:disabled),\r\n[type='button']:not(:disabled) {\r\n  cursor: pointer;\r\n}\r\n\r\n.row {\r\n  padding: 0 0 0 15px;\r\n  margin: 0;\r\n}\r\n","import { Component, Prop, h, Event, EventEmitter, Host, State } from '@stencil/core';\r\nimport { IPageTwoDataUpdateProps } from '@/models/models';\r\nimport { IglBookPropertyPayloadEditBooking, TPropertyButtonsTypes } from '../../../../models/igl-book-property';\r\nimport { formatAmount } from '@/utils/utils';\r\nimport locales from '@/stores/locales.store';\r\nimport { ICurrency } from '@/models/calendarData';\r\nimport booking_store, { IRatePlanSelection } from '@/stores/booking.store';\r\nimport calendar_data from '@/stores/calendar-data';\r\nimport moment from 'moment';\r\nimport { ICountry } from '@/models/IBooking';\r\n@Component({\r\n  tag: 'igl-booking-form',\r\n  styleUrl: 'igl-booking-form.css',\r\n  scoped: true,\r\n})\r\nexport class IglBookingForm {\r\n  @Prop() showPaymentDetails: boolean;\r\n  @Prop() currency: ICurrency;\r\n  @Prop({ reflect: true }) isEditOrAddRoomEvent: boolean;\r\n  @Prop() dateRangeData: { [key: string]: any };\r\n  @Prop() bookingData: { [key: string]: any };\r\n  @Prop() showSplitBookingOption: boolean;\r\n  @Prop() language: string;\r\n  @Prop() bookedByInfoData: { [key: string]: any };\r\n  @Prop() propertyId: number;\r\n  @Prop() bedPreferenceType: any;\r\n  @Prop() selectedRooms: Map<string, Map<string, any>>;\r\n  @Prop({ reflect: true }) isLoading: string;\r\n  @Prop() countries: ICountry[];\r\n  @Prop() selectedGuestData;\r\n  @Prop() defaultGuestData: IglBookPropertyPayloadEditBooking;\r\n\r\n  @State() selectedBookedByData;\r\n  @State() guestData: any;\r\n  @State() selectedUnits: { [key: string]: any } = {};\r\n\r\n  @Event() dataUpdateEvent: EventEmitter<IPageTwoDataUpdateProps>;\r\n  @Event() buttonClicked: EventEmitter<{\r\n    key: TPropertyButtonsTypes;\r\n    data?: CustomEvent;\r\n  }>;\r\n\r\n  componentWillLoad() {\r\n    this.initializeGuestData();\r\n    this.selectedBookedByData = this.bookedByInfoData;\r\n  }\r\n\r\n  initializeGuestData() {\r\n    let total = 0;\r\n    const newSelectedUnits = { ...this.selectedUnits };\r\n    const getRate = (rate: number, totalNights: number, isRateModified: boolean, preference: number) => {\r\n      if (isRateModified && preference === 2) {\r\n        return rate * totalNights;\r\n      }\r\n      return rate;\r\n    };\r\n    this.selectedUnits = newSelectedUnits;\r\n    this.guestData = [];\r\n    this.selectedRooms.forEach((room, key) => {\r\n      room.forEach(rate_plan => {\r\n        newSelectedUnits[key] = rate_plan.selectedUnits;\r\n        total += rate_plan.totalRooms * getRate(rate_plan.rate, this.dateRangeData.dateDifference, rate_plan.isRateModified, rate_plan.rateType);\r\n        for (let i = 1; i <= rate_plan.totalRooms; i++) {\r\n          this.guestData.push({\r\n            guestName: '',\r\n            roomId: '',\r\n            preference: '',\r\n            ...rate_plan,\r\n          });\r\n        }\r\n      });\r\n    });\r\n    this.bookingData.TOTAL_PRICE = total;\r\n  }\r\n  handleOnApplicationInfoDataUpdateEvent(event: CustomEvent, index: number) {\r\n    const opt = event.detail;\r\n    const categoryIdKey = `c_${opt.data.roomCategoryId}`;\r\n    const updatedUnits = [...(this.selectedUnits[categoryIdKey] || [])];\r\n    updatedUnits[index] = opt.data.roomId;\r\n    this.selectedUnits = {\r\n      ...this.selectedUnits,\r\n      [categoryIdKey]: updatedUnits,\r\n    };\r\n    this.dataUpdateEvent.emit({\r\n      key: 'applicationInfoUpdateEvent',\r\n      value: event.detail,\r\n    });\r\n  }\r\n\r\n  handleEventData(event: any, key: string, index: number) {\r\n    if (key === 'application-info') {\r\n      this.handleOnApplicationInfoDataUpdateEvent(event, index);\r\n    } else {\r\n      this.selectedBookedByData = event.detail.data;\r\n      this.dataUpdateEvent.emit({\r\n        key: 'propertyBookedBy',\r\n        value: event.detail,\r\n      });\r\n    }\r\n  }\r\n  isGuestDataIncomplete() {\r\n    if (this.selectedGuestData.length !== this.guestData.length) {\r\n      return true;\r\n    }\r\n    for (const data of this.selectedGuestData) {\r\n      if (data.guestName === '' || data.preference === '' || data.roomId === '') {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n  isButtonDisabled(key: string) {\r\n    const isValidProperty = (property, key, comparedBy) => {\r\n      if (!property) {\r\n        return true;\r\n      }\r\n      if (property === this.selectedGuestData) {\r\n        return this.isGuestDataIncomplete();\r\n      }\r\n      if (key === 'selectedArrivalTime') {\r\n        if (property[key] !== undefined) {\r\n          return property[key].code === '';\r\n        } else {\r\n          return true;\r\n        }\r\n      }\r\n      return property[key] === comparedBy || property[key] === undefined;\r\n    };\r\n    return (\r\n      this.isLoading === key ||\r\n      isValidProperty(this.selectedGuestData, 'guestName', '') ||\r\n      isValidProperty(this.selectedBookedByData, 'isdCode', '') ||\r\n      isValidProperty(this.selectedBookedByData, 'contactNumber', '') ||\r\n      isValidProperty(this.selectedBookedByData, 'firstName', '') ||\r\n      isValidProperty(this.selectedBookedByData, 'lastName', '') ||\r\n      isValidProperty(this.selectedBookedByData, 'countryId', -1) ||\r\n      isValidProperty(this.selectedBookedByData, 'selectedArrivalTime', '') ||\r\n      isValidProperty(this.selectedBookedByData, 'email', '')\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const showBookAndCheckin = calendar_data.checkin_enabled && moment(new Date(this.dateRangeData?.fromDate)).isSame(new Date(), 'day');\r\n    return (\r\n      <Host>\r\n        <div class=\"d-flex flex-wrap\">\r\n          <ir-date-view\r\n            class=\"mr-1 flex-fill font-weight-bold font-medium-1\"\r\n            from_date={new Date(this.dateRangeData.fromDate)}\r\n            to_date={new Date(this.dateRangeData.toDate)}\r\n            dateOption=\"DD MMM YYYY\"\r\n          ></ir-date-view>\r\n          {this.guestData.length > 1 && (\r\n            <div class=\"mt-1 mt-md-0 text-right\">\r\n              {locales.entries.Lcz_TotalPrice} <span class=\"font-weight-bold font-medium-1\">{formatAmount(this.currency.symbol, this.bookingData.TOTAL_PRICE || '0')}</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n        {Object.values(booking_store.ratePlanSelections).map(val =>\r\n          Object.values(val).map(ratePlan => {\r\n            const rp = ratePlan as IRatePlanSelection;\r\n            if (rp.reserved === 0) {\r\n              return null;\r\n            }\r\n\r\n            return [...new Array(rp.reserved)].map((_, i) => (\r\n              <igl-application-info\r\n                totalNights={Number(this.dateRangeData.dateDifference)}\r\n                bedPreferenceType={this.bedPreferenceType}\r\n                currency={this.currency}\r\n                guestInfo={rp.guest ? rp.guest[i] : null}\r\n                bookingType={this.bookingData.event_type}\r\n                rateplanSelection={rp}\r\n                key={`${rp.ratePlan.id}_${i}`}\r\n                roomIndex={i}\r\n                baseData={\r\n                  this.bookingData.event_type === 'EDIT_BOOKING'\r\n                    ? {\r\n                        roomtypeId: this.bookingData.currentRoomType.roomtype.id,\r\n                        unit: this.bookingData.currentRoomType.unit,\r\n                      }\r\n                    : undefined\r\n                }\r\n              ></igl-application-info>\r\n            ));\r\n          }),\r\n        )}\r\n\r\n        {this.isEditOrAddRoomEvent || this.showSplitBookingOption ? null : (\r\n          <igl-property-booked-by\r\n            propertyId={this.propertyId}\r\n            countries={this.countries}\r\n            language={this.language}\r\n            showPaymentDetails={this.showPaymentDetails}\r\n            defaultData={this.bookedByInfoData}\r\n            onDataUpdateEvent={event => {\r\n              this.handleEventData(event, 'propertyBookedBy', 0);\r\n            }}\r\n          ></igl-property-booked-by>\r\n        )}\r\n\r\n        {this.isEditOrAddRoomEvent ? (\r\n          <div class=\"d-flex p-0 mb-1 mt-2\">\r\n            <div class=\"flex-fill mr-2\">\r\n              <ir-button\r\n                icon=\"\"\r\n                text={locales.entries.Lcz_Back}\r\n                class=\"full-width\"\r\n                btn_color=\"secondary\"\r\n                btn_styles=\"justify-content-center\"\r\n                onClickHandler={() => this.buttonClicked.emit({ key: 'back' })}\r\n              ></ir-button>\r\n            </div>\r\n            <div class=\"flex-fill\">\r\n              <ir-button\r\n                isLoading={this.isLoading === 'save'}\r\n                onClickHandler={() => this.buttonClicked.emit({ key: 'save' })}\r\n                btn_styles=\"full-width align-items-center justify-content-center\"\r\n                text={locales.entries.Lcz_Save}\r\n              ></ir-button>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div class=\"d-flex flex-column flex-md-row p-0 mb-1 mt-2 justify-content-md-between align-items-md-center\">\r\n            <div class=\"flex-fill mr-md-1\">\r\n              <ir-button\r\n                icon_name=\"angles_left\"\r\n                btn_color=\"secondary\"\r\n                btn_styles=\"full-width align-items-center justify-content-center\"\r\n                onClickHandler={() => this.buttonClicked.emit({ key: 'back' })}\r\n                text={locales.entries.Lcz_Back}\r\n                style={{ '--icon-size': '1rem' }}\r\n                icon_style={{ paddingBottom: '1.9px' }}\r\n              ></ir-button>\r\n            </div>\r\n            <div class={`mt-1 mt-md-0 flex-fill ${showBookAndCheckin ? 'mr-md-1' : ''}`}>\r\n              <ir-button\r\n                isLoading={this.isLoading === 'book'}\r\n                btn_styles=\"full-width align-items-center justify-content-center\"\r\n                onClickHandler={() => this.buttonClicked.emit({ key: 'book' })}\r\n                text={locales.entries.Lcz_Book}\r\n              ></ir-button>\r\n            </div>\r\n            {showBookAndCheckin && (\r\n              <div class=\"mt-1 mt-md-0 flex-fill\">\r\n                <ir-button\r\n                  isLoading={this.isLoading === 'bookAndCheckIn'}\r\n                  btn_styles=\"full-width align-items-center justify-content-center\"\r\n                  onClickHandler={() => this.buttonClicked.emit({ key: 'bookAndCheckIn' })}\r\n                  text={locales.entries.Lcz_BookAndChekcIn}\r\n                ></ir-button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n:host > * {\r\n  margin: 0;\r\n  padding: auto;\r\n}\r\n.scrollContent {\r\n  height: calc(100% - 79px);\r\n  overflow: auto;\r\n  position: relative;\r\n}\r\n.loading-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  background: white;\r\n  position: absolute;\r\n  inset: 0;\r\n  z-index: 100;\r\n}\r\n.loader {\r\n  width: 1.25rem;\r\n  height: 1.25rem;\r\n  border: 2.5px solid #3f3f3f;\r\n  border-bottom-color: transparent;\r\n  border-radius: 50%;\r\n  display: inline-block;\r\n  box-sizing: border-box;\r\n  animation: rotation 1s linear infinite;\r\n}\r\n","import { Component, Event, EventEmitter, Fragment, Host, Prop, h } from '@stencil/core';\r\nimport { TAdultChildConstraints, TSourceOptions } from '../../../../models/igl-book-property';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\nimport moment from 'moment';\r\nimport booking_store from '@/stores/booking.store';\r\n@Component({\r\n  tag: 'igl-booking-overview-page',\r\n  styleUrl: 'igl-booking-overview-page.css',\r\n  scoped: true,\r\n})\r\nexport class IglBookingOverviewPage {\r\n  @Prop() bookingData: any;\r\n  @Prop() propertyId: number;\r\n  @Prop() message: string;\r\n  @Prop() showSplitBookingOption: boolean;\r\n  @Prop() eventType: string;\r\n  @Prop() currency: any;\r\n  @Prop() adultChildConstraints: TAdultChildConstraints;\r\n  @Prop() ratePricingMode: any;\r\n  @Prop() dateRangeData: any;\r\n  @Prop() defaultDaterange: { from_date: string; to_date: string };\r\n  @Prop() selectedRooms: Map<string, Map<string, any>>;\r\n  @Prop() adultChildCount: { adult: number; child: number };\r\n  @Prop() sourceOptions: TSourceOptions[];\r\n  @Prop() bookedByInfoData: any;\r\n  @Prop() initialRoomIds: any;\r\n\r\n  @Event() roomsDataUpdate: EventEmitter;\r\n\r\n  getSplitBookings() {\r\n    return (this.bookingData.hasOwnProperty('splitBookingEvents') && this.bookingData.splitBookingEvents) || [];\r\n  }\r\n  isEventType(event: string) {\r\n    return event === this.eventType;\r\n  }\r\n  setMinDate() {\r\n    if (!this.isEventType('EDIT_BOOKING')) {\r\n      return;\r\n    }\r\n    const from_date = moment(this.bookingData.FROM_DATE, 'YYYY-MM-DD');\r\n    const today = moment();\r\n    if (from_date.isAfter(today)) {\r\n      return today.add(-2, 'weeks').format('YYYY-MM-DD');\r\n    }\r\n    return from_date.add(-2, 'weeks').format('YYYY-MM-DD');\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <igl-book-property-header\r\n          bookedByInfoData={this.bookedByInfoData}\r\n          defaultDaterange={this.defaultDaterange}\r\n          dateRangeData={this.dateRangeData}\r\n          minDate={this.setMinDate()}\r\n          // minDate={this.isEventType('ADD_ROOM') || this.isEventType('SPLIT_BOOKING') ? this.bookedByInfoData.from_date || this.bookingData.FROM_DATE : undefined}\r\n          adultChildCount={this.adultChildCount}\r\n          splitBookingId={this.showSplitBookingOption}\r\n          bookingData={this.bookingData}\r\n          sourceOptions={this.sourceOptions}\r\n          message={this.message}\r\n          bookingDataDefaultDateRange={this.bookingData.defaultDateRange}\r\n          showSplitBookingOption={this.showSplitBookingOption}\r\n          adultChildConstraints={this.adultChildConstraints}\r\n          splitBookings={this.getSplitBookings()}\r\n          propertyId={this.propertyId}\r\n        ></igl-book-property-header>\r\n        {/* {this.adultChildCount.adult === 0 && <p class={'col text-left'}>Please select the number of guests</p>} */}\r\n        <div class=\" text-left\">\r\n          {isRequestPending('/Check_Availability') && this.isEventType('EDIT_BOOKING') ? (\r\n            <div class=\"loading-container\">\r\n              <div class=\"loader\"></div>\r\n            </div>\r\n          ) : (\r\n            <Fragment>\r\n              {booking_store.roomTypes?.map(roomType => (\r\n                <igl-room-type\r\n                  initialRoomIds={this.initialRoomIds}\r\n                  isBookDisabled={Object.keys(this.bookedByInfoData).length <= 1}\r\n                  key={`room-type-${roomType.id}`}\r\n                  currency={this.currency}\r\n                  ratePricingMode={this.ratePricingMode}\r\n                  dateDifference={this.dateRangeData.dateDifference}\r\n                  bookingType={this.bookingData.event_type}\r\n                  roomType={roomType}\r\n                  class=\"mt-2 mb-1 p-0\"\r\n                  data-testid={`room_type_${roomType.id}`}\r\n                  id={roomType.id.toString()}\r\n                  roomInfoId={this.selectedRooms.has(`c_${roomType.id}`) ? roomType.id : null}\r\n                  onDataUpdateEvent={evt => this.roomsDataUpdate.emit(evt.detail)}\r\n                ></igl-room-type>\r\n              ))}\r\n            </Fragment>\r\n          )}\r\n        </div>\r\n\r\n        <igl-book-property-footer class={'p-0 mb-1 mt-3'} eventType={this.bookingData.event_type}></igl-book-property-footer>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: flex;\r\n  align-items: center !important;\r\n  font-size: 14px !important;\r\n}\r\n.date-range-input {\r\n  margin: 0;\r\n  padding: 0;\r\n  display: flex;\r\n  flex: 1;\r\n  cursor: pointer;\r\n  width: 100%;\r\n  user-select: none;\r\n  font-size: 14px !important;\r\n}\r\n.iglRangeNights {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.date-view {\r\n  position: absolute;\r\n  background: white;\r\n  pointer-events: none;\r\n  cursor: pointer;\r\n  display: block;\r\n  margin-left: 14px;\r\n  margin-right: 14px;\r\n  font-size: 13.65px !important;\r\n  display: flex;\r\n  align-items: center;\r\n  inset: 0;\r\n}\r\n.date-view svg {\r\n  padding: 0 !important;\r\n  margin: 0;\r\n  margin-right: 10px;\r\n}\r\n.calendarPickerContainer {\r\n  display: flex !important;\r\n  position: relative !important;\r\n  text-align: left;\r\n  align-items: center !important;\r\n  padding: 0 !important;\r\n  margin: 0;\r\n  border: 1px solid var(--ir-date-range-border, #379ff2);\r\n  width: var(--ir-date-range-width, 245px);\r\n  transition: border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n}\r\n.calendarPickerContainer:focus-within {\r\n  border-color: #379ff2;\r\n}\r\n.calendarPickerContainer[data-state='disabled'] {\r\n  border: 0px;\r\n  width: 280px;\r\n}\r\n.date-view[data-state='disabled'],\r\n.date-range-input[data-state='disabled'] {\r\n  margin: 0;\r\n  cursor: default;\r\n}\r\n.date-range-container-cn {\r\n  position: relative;\r\n  width: fit-content;\r\n}\r\n.date-range-container-cn:focus-within .date-range-container {\r\n  border: 1px solid #379ff2;\r\n}\r\n.date-range-container {\r\n  position: relative;\r\n  gap: 1rem;\r\n  font-size: 0.975rem;\r\n  line-height: 1.45;\r\n  border-radius: 0.21rem;\r\n  border: 1px solid #cacfe7;\r\n  color: #3b4781;\r\n  padding: 0.75rem 1rem;\r\n  box-sizing: border-box !important;\r\n  font-weight: 400;\r\n  background-color: #fff;\r\n  background-clip: padding-box;\r\n  height: 2rem;\r\n  pointer-events: none;\r\n  transition: border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n}\r\n.date-range-container-cn .date-range-input {\r\n  position: absolute;\r\n  width: 100% !important;\r\n  inset: 0;\r\n  cursor: pointer;\r\n}\r\n.date-range-container.disabled {\r\n  border: none;\r\n  padding-left: 0;\r\n  padding-right: 0;\r\n}\r\n.date-range-input[data-state='disabled'] {\r\n  cursor: default;\r\n}\r\n","import { Component, Host, h, State, Event, EventEmitter, Prop, Watch } from '@stencil/core';\r\nimport { IToast } from '@components/ui/ir-toast/toast';\r\nimport locales from '@/stores/locales.store';\r\nimport { calculateDaysBetweenDates } from '@/utils/booking';\r\nimport moment from 'moment';\r\n\r\n@Component({\r\n  tag: 'igl-date-range',\r\n  styleUrl: 'igl-date-range.css',\r\n  scoped: true,\r\n})\r\nexport class IglDateRange {\r\n  @Prop() defaultData: { [key: string]: any };\r\n  @Prop({ reflect: true }) disabled: boolean = false;\r\n  @Prop() minDate: string;\r\n  @Prop() dateLabel: string;\r\n  @Prop() maxDate: string;\r\n  @Prop() withDateDifference: boolean = true;\r\n  @Prop() variant: 'booking' | 'default' = 'default';\r\n\r\n  @State() renderAgain: boolean = false;\r\n\r\n  @Event() dateSelectEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Event() toast: EventEmitter<IToast>;\r\n\r\n  private totalNights: number = 0;\r\n  private fromDate: Date;\r\n  private toDate: Date;\r\n  private fromDateStr: string = 'from';\r\n  private toDateStr: string = 'to';\r\n\r\n  componentWillLoad() {\r\n    this.initializeDates();\r\n  }\r\n\r\n  @Watch('defaultData')\r\n  handleDataChange(newValue: any, oldValue: any) {\r\n    if (JSON.stringify(newValue) !== JSON.stringify(oldValue)) {\r\n      this.initializeDates();\r\n    }\r\n  }\r\n\r\n  private initializeDates() {\r\n    let dt = new Date();\r\n    dt.setHours(0, 0, 0, 0);\r\n    dt.setDate(dt.getDate() + 1);\r\n    if (this.defaultData) {\r\n      if (this.defaultData.fromDate) {\r\n        this.fromDate = new Date(this.defaultData.fromDate);\r\n        this.fromDate.setHours(0, 0, 0, 0);\r\n        this.fromDateStr = this.getFormattedDateString(this.fromDate);\r\n      }\r\n      if (this.defaultData.toDate) {\r\n        this.toDate = new Date(this.defaultData.toDate);\r\n        this.toDate.setHours(0, 0, 0, 0);\r\n        this.toDateStr = this.getFormattedDateString(this.toDate);\r\n      }\r\n    }\r\n    if (this.fromDate && this.toDate) {\r\n      this.calculateTotalNights();\r\n      // this.handleDateSelectEvent('selectedDateRange', {\r\n      //   fromDate: this.fromDate.getTime(),\r\n      //   toDate: this.toDate.getTime(),\r\n      //   fromDateStr: this.fromDateStr,\r\n      //   toDateStr: this.toDateStr,\r\n      //   dateDifference: this.totalNights,\r\n      // });\r\n    }\r\n    return [this.fromDateStr, this.toDateStr];\r\n  }\r\n\r\n  private calculateTotalNights() {\r\n    this.totalNights = calculateDaysBetweenDates(moment(this.fromDate).format('YYYY-MM-DD'), moment(this.toDate).format('YYYY-MM-DD'));\r\n  }\r\n  private getFormattedDateString(dt) {\r\n    return dt.getDate() + ' ' + dt.toLocaleString('default', { month: 'short' }).toLowerCase() + ' ' + dt.getFullYear();\r\n  }\r\n\r\n  private handleDateSelectEvent(key, data: any = '') {\r\n    this.dateSelectEvent.emit({ key, data });\r\n  }\r\n  private handleDateChange(evt) {\r\n    const { start, end } = evt.detail;\r\n    this.fromDate = start.toDate();\r\n    this.toDate = end.toDate();\r\n    this.calculateTotalNights();\r\n\r\n    this.handleDateSelectEvent('selectedDateRange', {\r\n      fromDate: this.fromDate.getTime(),\r\n      toDate: this.toDate.getTime(),\r\n      fromDateStr: start.format('DD MMM YYYY'),\r\n      toDateStr: end.format('DD MMM YYYY'),\r\n      dateDifference: this.totalNights,\r\n    });\r\n\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n  render() {\r\n    if (this.variant === 'booking') {\r\n      return (\r\n        <div class={`p-0 m-0 date-range-container-cn`}>\r\n          <ir-date-range\r\n            maxDate={this.maxDate}\r\n            class={'date-range-input'}\r\n            disabled={this.disabled}\r\n            fromDate={this.fromDate}\r\n            toDate={this.toDate}\r\n            minDate={this.minDate}\r\n            autoApply\r\n            data-state={this.disabled ? 'disabled' : 'active'}\r\n            onDateChanged={evt => {\r\n              this.handleDateChange(evt);\r\n            }}\r\n          ></ir-date-range>\r\n          <div class={`d-flex align-items-center m-0  date-range-container ${this.disabled ? 'disabled' : ''}`}>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"m-0 p-0\" height=\"14\" width=\"14\" viewBox=\"0 0 448 512\">\r\n              <path\r\n                fill=\"currentColor\"\r\n                d=\"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z\"\r\n              />\r\n            </svg>\r\n            <span>{moment(this.fromDate).format('MMM DD, YYYY')}</span>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"m-0 p-0\" height=\"14\" width=\"14\" viewBox=\"0 0 512 512\">\r\n              <path\r\n                fill=\"currentColor\"\r\n                d=\"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z\"\r\n              />\r\n            </svg>\r\n            <span>{moment(this.toDate).format('MMM DD, YYYY')}</span>\r\n            {this.totalNights && <span class=\"m-0 p-0\">{this.totalNights + (this.totalNights > 1 ? ` ${locales.entries.Lcz_Nights}` : ` ${locales.entries.Lcz_Night}`)}</span>}\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <Host>\r\n        <div class={`p-0 m-0 date-range-container-cn`}>\r\n          <ir-date-range\r\n            maxDate={this.maxDate}\r\n            class={'date-range-input'}\r\n            disabled={this.disabled}\r\n            fromDate={this.fromDate}\r\n            toDate={this.toDate}\r\n            minDate={this.minDate}\r\n            autoApply\r\n            data-state={this.disabled ? 'disabled' : 'active'}\r\n            onDateChanged={evt => {\r\n              this.handleDateChange(evt);\r\n            }}\r\n          ></ir-date-range>\r\n          <div class={`d-flex align-items-center m-0  date-range-container ${this.disabled ? 'disabled' : ''}`}>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"m-0 p-0\" height=\"14\" width=\"14\" viewBox=\"0 0 448 512\">\r\n              <path\r\n                fill=\"currentColor\"\r\n                d=\"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z\"\r\n              />\r\n            </svg>\r\n            <span>{moment(this.fromDate).format('MMM DD, YYYY')}</span>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"m-0 p-0\" height=\"14\" width=\"14\" viewBox=\"0 0 512 512\">\r\n              <path\r\n                fill=\"currentColor\"\r\n                d=\"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z\"\r\n              />\r\n            </svg>\r\n            <span>{moment(this.toDate).format('MMM DD, YYYY')}</span>\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n\r\n.row {\r\n  padding: 0 0 0 15px;\r\n  margin: 0;\r\n}\r\n\r\n.bookedByEmailContainer {\r\n  flex: auto;\r\n  max-width: 350px;\r\n}\r\n\r\n.bookedDetailsForm label {\r\n  min-width: 125px;\r\n  max-width: 125px;\r\n}\r\n.row.sc-igl-booking-form {\r\n  padding: 0 !important;\r\n}\r\n.bookedDetailsForm .form-group {\r\n  margin-bottom: 10px !important;\r\n}\r\n\r\n.bookedDetailsForm .checkBoxContainer input {\r\n  height: 1.2rem !important;\r\n  width: 30px;\r\n}\r\n/* .controlContainer1 .textarea-container {\r\n  border: 1px solid #ced4da; \r\n  border-radius: 0.25rem; \r\n  height: 60px; \r\n  width: 100%;\r\n} */\r\n.controlContainer textarea {\r\n  height: 60px !important;\r\n}\r\n.margin3 {\r\n  margin-bottom: 5px !important;\r\n}\r\n@media (min-width: 768px) {\r\n  .bookedByEmailContainer {\r\n    margin-left: 37px;\r\n  }\r\n}\r\n","import { Component, Host, h, Prop, Event, EventEmitter, State, Fragment, Listen } from '@stencil/core';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport { IEntries, ICountry } from '@/models/IBooking';\r\nimport { v4 } from 'uuid';\r\nimport locales from '@/stores/locales.store';\r\nimport { TPropertyButtonsTypes } from '@/components';\r\nimport { z } from 'zod';\r\nimport { validateEmail } from '@/utils/utils';\r\nimport booking_store, { BookingStore, modifyBookingStore } from '@/stores/booking.store';\r\n\r\n@Component({\r\n  tag: 'igl-property-booked-by',\r\n  styleUrl: 'igl-property-booked-by.css',\r\n  scoped: true,\r\n})\r\nexport class IglPropertyBookedBy {\r\n  @Prop() language: string;\r\n  @Prop() showPaymentDetails: boolean = false;\r\n  @Prop() defaultData: { [key: string]: any };\r\n  @Event() dataUpdateEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Prop() countries: ICountry[] = [];\r\n  @Prop() propertyId: number;\r\n  @State() isButtonPressed: boolean = false;\r\n  private bookingService: BookingService = new BookingService();\r\n  private arrivalTimeList: IEntries[] = [];\r\n  private expiryMonths: string[] = ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12'];\r\n  private expiryYears: string[] = [];\r\n  private currentMonth: string = '01';\r\n  private country;\r\n  @State() bookedByData: { [key: string]: any } = {\r\n    id: undefined,\r\n    email: '',\r\n    firstName: '',\r\n    lastName: '',\r\n    countryId: '',\r\n    isdCode: '',\r\n    contactNumber: '',\r\n    selectedArrivalTime: '',\r\n    emailGuest: false,\r\n    message: '',\r\n    cardNumber: '',\r\n    cardHolderName: '',\r\n    expiryMonth: '',\r\n    expiryYear: '',\r\n  };\r\n\r\n  async componentWillLoad() {\r\n    this.assignCountryCode();\r\n    this.initializeExpiryYears();\r\n    this.initializeDateData();\r\n    this.populateBookedByData();\r\n  }\r\n\r\n  private initializeExpiryYears() {\r\n    const currentYear = new Date().getFullYear();\r\n    this.expiryYears = Array.from({ length: 4 }, (_, index) => (currentYear + index).toString());\r\n  }\r\n  private async assignCountryCode() {\r\n    const country = await this.bookingService.getUserDefaultCountry();\r\n\r\n    const countryId = country['COUNTRY_ID'];\r\n    this.country = countryId;\r\n    this.bookedByData = { ...this.bookedByData, isdCode: countryId.toString(), countryId };\r\n  }\r\n  private initializeDateData() {\r\n    const dt = new Date();\r\n    const month = dt.getMonth() + 1;\r\n    this.currentMonth = month < 10 ? `0${month}` : month.toString();\r\n  }\r\n\r\n  private populateBookedByData() {\r\n    this.bookedByData = this.defaultData ? { ...this.bookedByData, ...this.defaultData } : {};\r\n    this.arrivalTimeList = this.defaultData?.arrivalTime || [];\r\n    this.bookedByData = { ...this.bookedByData, selectedArrivalTime: this.arrivalTimeList[0].CODE_NAME };\r\n    if (!this.bookedByData.expiryMonth) {\r\n      this.bookedByData.expiryMonth = this.currentMonth;\r\n    }\r\n    if (!this.bookedByData.expiryYear) {\r\n      this.bookedByData.expiryYear = new Date().getFullYear();\r\n    }\r\n    console.log('initial bookedby data', this.bookedByData);\r\n  }\r\n\r\n  private handleDataChange(key, event) {\r\n    this.bookedByData[key] = key === 'emailGuest' ? event.target.checked : event.target.value;\r\n    this.dataUpdateEvent.emit({\r\n      key: 'bookedByInfoUpdated',\r\n      data: { ...this.bookedByData },\r\n    });\r\n    if (key === 'countryId') {\r\n      this.bookedByData = {\r\n        ...this.bookedByData,\r\n        isdCode: event.target.value,\r\n      };\r\n    }\r\n    // console.log(this.bookedByData);\r\n  }\r\n  private handleCountryChange(value) {\r\n    this.bookedByData = {\r\n      ...this.bookedByData,\r\n      isdCode: value,\r\n      countryId: value,\r\n    };\r\n    this.dataUpdateEvent.emit({\r\n      key: 'bookedByInfoUpdated',\r\n      data: { ...this.bookedByData },\r\n    });\r\n    // console.log(this.bookedByData);\r\n  }\r\n\r\n  private handleNumberInput(key, event: InputEvent) {\r\n    const inputElement = event.target as HTMLInputElement;\r\n    const inputValue = inputElement.value;\r\n\r\n    // Regular expression to match only numeric characters (0-9)\r\n    const numericRegex = /^[0-9]+$/;\r\n\r\n    if (!numericRegex.test(inputValue)) {\r\n      // If the input is not numeric, prevent it from being entered\r\n      inputElement.value = inputValue.replace(/[^0-9]/g, '');\r\n    }\r\n    if (inputValue === inputElement.value) {\r\n      this.handleDataChange(key, event);\r\n    }\r\n  }\r\n\r\n  // async handleEmailInput(key, event: InputEvent) {\r\n  //   const inputElement = event.target as HTMLInputElement;\r\n  //   const inputValue = inputElement.value;\r\n  //   if (z.string().email().safeParse(inputValue).success) {\r\n  //     this.handleDataChange(key, event);\r\n  //   }\r\n  // }\r\n  async checkUser() {\r\n    try {\r\n      const email = this.bookedByData.email;\r\n      if (z.string().email().safeParse(email).success) {\r\n        const res = await this.bookingService.getUserInfo(email);\r\n        if (res !== null) {\r\n          this.bookedByData = {\r\n            ...this.bookedByData,\r\n            id: res.id,\r\n            firstName: res.first_name,\r\n            lastName: res.last_name,\r\n            contactNumber: res.mobile_without_prefix,\r\n            countryId: res.country_id,\r\n            isdCode: res?.country_phone_prefix ?? res.isdCode.toString(),\r\n          };\r\n          console.log(this.bookedByData);\r\n        } else {\r\n          let prevBookedByData = { ...this.bookedByData };\r\n          prevBookedByData = { ...prevBookedByData, email };\r\n          this.bookedByData = { ...prevBookedByData };\r\n        }\r\n      } else {\r\n        let prevBookedByData = { ...this.bookedByData };\r\n        prevBookedByData = { ...prevBookedByData, email: '' };\r\n        this.bookedByData = { ...prevBookedByData };\r\n      }\r\n      this.dataUpdateEvent.emit({\r\n        key: 'bookedByInfoUpdated',\r\n        data: { ...this.bookedByData },\r\n      });\r\n    } catch (error) {\r\n      //   toastr.error(error);\r\n    }\r\n  }\r\n  private updateGuest(props: Partial<BookingStore['checkout_guest']>) {\r\n    modifyBookingStore('checkout_guest', { ...(booking_store.checkout_guest ?? {}), ...props });\r\n  }\r\n  handleComboboxChange(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    const { key, data } = e.detail;\r\n    console.log(key, data);\r\n    if (key === 'blur') {\r\n      if (z.string().email().safeParse(data).success) {\r\n        this.bookedByData.email = data;\r\n        this.checkUser();\r\n      } else if (this.bookedByData.email !== '' && data == '') {\r\n        this.bookedByData.email = '';\r\n      }\r\n      this.dataUpdateEvent.emit({\r\n        key: 'bookedByInfoUpdated',\r\n        data: this.bookedByData,\r\n      });\r\n    }\r\n    if (key === 'select') {\r\n      this.bookedByData.email = data.email;\r\n      this.bookedByData = {\r\n        ...this.bookedByData,\r\n        id: data.id,\r\n        firstName: data.first_name,\r\n        lastName: data.last_name,\r\n        contactNumber: data.mobile_without_prefix,\r\n        countryId: data.country_id,\r\n        isdCode: data['country_phone_prefix'] ?? data?.country_id,\r\n      };\r\n      this.dataUpdateEvent.emit({\r\n        key: 'bookedByInfoUpdated',\r\n        data: this.bookedByData,\r\n      });\r\n    }\r\n\r\n    // console.log('data', data, 'key', key);\r\n    // switch (key) {\r\n    //   case 'blur':\r\n    //     if (data !== '') {\r\n    //       this.bookedByData.email = data;\r\n    //       this.checkUser();\r\n    //     } else {\r\n    //       let prevBookedByData = { ...this.bookedByData };\r\n    //       prevBookedByData = { ...prevBookedByData, email: '' };\r\n    //       this.bookedByData = { ...prevBookedByData };\r\n    //       this.dataUpdateEvent.emit({\r\n    //         key: 'bookedByInfoUpdated',\r\n    //         data: { ...this.bookedByData },\r\n    //       });\r\n    //     }\r\n\r\n    //     break;\r\n    //   case 'select':\r\n    //     this.bookedByData.email = data.email;\r\n    //     this.bookedByData = {\r\n    //       ...this.bookedByData,\r\n    //       id: data.id,\r\n    //       firstName: data.first_name,\r\n    //       lastName: data.last_name,\r\n    //       contactNumber: data.mobile,\r\n    //       countryId: data.country_id,\r\n    //       isdCode: data.country_id.toString(),\r\n    //     };\r\n    //     this.dataUpdateEvent.emit({\r\n    //       key: 'bookedByInfoUpdated',\r\n    //       data: this.bookedByData,\r\n    //     });\r\n    //     break;\r\n    //   default:\r\n    //     break;\r\n    // }\r\n  }\r\n  clearEvent() {\r\n    this.bookedByData = {\r\n      ...this.bookedByData,\r\n      id: '',\r\n      firstName: '',\r\n      lastName: '',\r\n      contactNumber: '',\r\n      isdCode: this.country.toString(),\r\n      countryId: this.country,\r\n    };\r\n    this.dataUpdateEvent.emit({\r\n      key: 'bookedByInfoUpdated',\r\n      data: { ...this.bookedByData },\r\n    });\r\n  }\r\n  @Listen('buttonClicked', { target: 'body' })\r\n  handleButtonClicked(\r\n    event: CustomEvent<{\r\n      key: TPropertyButtonsTypes;\r\n      data?: CustomEvent;\r\n    }>,\r\n  ) {\r\n    switch (event.detail.key) {\r\n      case 'book':\r\n      case 'bookAndCheckIn':\r\n        this.isButtonPressed = true;\r\n        break;\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"text-left mt-3\">\r\n          <div class=\"form-group d-flex flex-column flex-md-row align-items-md-center text-left \">\r\n            <label class=\"p-0 m-0 label-control mr-1 font-weight-bold\">{locales.entries.Lcz_BookedBy}</label>\r\n            <div class=\"bookedByEmailContainer mt-1 mt-md-0 d-flex align-items-center\">\r\n              {/* <input\r\n                id={v4()}\r\n                type=\"email\"\r\n                class=\"form-control\"\r\n                placeholder=\"Email address\"\r\n                name=\"bookeyByEmail\"\r\n                value={this.bookedByData.email}\r\n                onInput={event => this.handleEmailInput('email', event)}\r\n                required\r\n                onBlur={() => this.checkUser()}\r\n              /> */}\r\n              <ir-autocomplete\r\n                testId={'main_guest_email'}\r\n                onComboboxValue={this.handleComboboxChange.bind(this)}\r\n                propertyId={this.propertyId}\r\n                type=\"text\"\r\n                value={this.bookedByData.email}\r\n                required\r\n                class={'flex-fill'}\r\n                placeholder={locales.entries.Lcz_FindEmailAddress}\r\n                onInputCleared={() => this.clearEvent()}\r\n                danger_border={this.isButtonPressed && this.bookedByData.email !== '' && validateEmail(this.bookedByData.email)}\r\n              ></ir-autocomplete>\r\n              <ir-tooltip class={'ml-1'} message=\"Leave empty if email is unavailable\"></ir-tooltip>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"bookedDetailsForm text-left mt-2 font-small-3 \">\r\n          <div class=\"d-flex flex-column flex-md-row  justify-content-md-between \">\r\n            <div class=\"p-0 flex-fill \">\r\n              <div class=\"form-group d-flex flex-column flex-md-row align-items-md-center p-0 flex-fill \">\r\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_FirstName}</label>\r\n                <div class=\"p-0 m-0  controlContainer flex-fill  \">\r\n                  <input\r\n                    data-testid=\"main_guest_first_name\"\r\n                    class={`form-control flex-fill ${this.isButtonPressed && this.bookedByData.firstName === '' && 'border-danger'}`}\r\n                    type=\"text\"\r\n                    placeholder={locales.entries.Lcz_FirstName}\r\n                    id={v4()}\r\n                    value={this.bookedByData.firstName}\r\n                    onInput={event => {\r\n                      this.updateGuest({ first_name: (event.target as HTMLInputElement).value });\r\n                      this.handleDataChange('firstName', event);\r\n                    }}\r\n                    required\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center\">\r\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_LastName}</label>\r\n                <div class=\"p-0 m-0  controlContainer flex-fill\">\r\n                  <input\r\n                    data-testid=\"main_guest_last_name\"\r\n                    class={`form-control ${this.isButtonPressed && this.bookedByData.lastName === '' && 'border-danger'}`}\r\n                    type=\"text\"\r\n                    placeholder={locales.entries.Lcz_LastName}\r\n                    id={v4()}\r\n                    value={this.bookedByData.lastName}\r\n                    onInput={event => this.handleDataChange('lastName', event)}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center\">\r\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_Country}</label>\r\n                {/* <div class=\"p-0 m-0  controlContainer flex-fill\"> */}\r\n                <ir-country-picker\r\n                  testId=\"main_guest_country\"\r\n                  class=\"flex-grow-1 m-0\"\r\n                  onCountryChange={e => this.handleCountryChange(e.detail.id)}\r\n                  countries={this.countries}\r\n                  country={this.countries.find(c => c.id === this.bookedByData.countryId)}\r\n                ></ir-country-picker>\r\n                {/* <select class={`form-control input-sm pr-0`} id={v4()} onChange={event => this.handleDataChange('countryId', event)}>\r\n                    <option value=\"\" selected={this.bookedByData.countryId === ''}>\r\n                      {locales.entries.Lcz_Select}\r\n                    </option>\r\n                    {this.countries.map(countryNode => (\r\n                      <option value={countryNode.id} selected={this.bookedByData.countryId === countryNode.id}>\r\n                        {countryNode.name}\r\n                      </option>\r\n                    ))}\r\n                  </select> */}\r\n                {/* </div> */}\r\n              </div>\r\n\r\n              {/* <div class=\"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center\">\r\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_MobilePhone}</label>\r\n                <div class=\"p-0 m-0  d-flex  controlContainer flex-fill\">\r\n                  <div class=\" p-0 m-0\">\r\n                    <select class={`form-control input-sm pr-0`} id={v4()} onChange={event => this.handleDataChange('isdCode', event)}>\r\n                      <option value=\"\" selected={this.bookedByData.isdCode === ''}>\r\n                        {locales.entries.Lcz_Isd}\r\n                      </option>\r\n                      {this.countries.map(country => (\r\n                        <option value={country.id} selected={this.bookedByData.isdCode === country.id.toString()}>\r\n                          {country.phone_prefix}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                  <div class=\"flex-fill p-0 m-0\">\r\n                    <input\r\n                      class={`form-control\r\n                     \r\n                      `}\r\n                      type=\"tel\"\r\n                      placeholder={locales.entries.Lcz_ContactNumber}\r\n                      id={v4()}\r\n                      value={this.bookedByData.contactNumber}\r\n                      onInput={event => this.handleNumberInput('contactNumber', event)}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div> */}\r\n              <div class=\"form-group p-0 d-flex flex-column flex-md-row align-items-md-center\">\r\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_MobilePhone}</label>\r\n                <div class=\"p-0 m-0 controlContainer flex-fill\">\r\n                  <ir-phone-input\r\n                    testId=\"main_guest_phone\"\r\n                    language={this.language}\r\n                    // label={locales.entries.Lcz_MobilePhone}\r\n                    value={this.bookedByData.contactNumber}\r\n                    phone_prefix={this.bookedByData.isdCode}\r\n                    default_country={this.bookedByData.countryId}\r\n                    onTextChange={e => {\r\n                      this.handleDataChange('isdCode', { target: { value: e.detail.phone_prefix } });\r\n                      this.handleDataChange('contactNumber', { target: { value: e.detail.mobile } });\r\n                    }}\r\n                  ></ir-phone-input>\r\n                </div>\r\n              </div>\r\n              <div class=\"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center\">\r\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_YourArrivalTime}</label>\r\n                <div class=\"p-0 m-0  controlContainer flex-fill\">\r\n                  <select\r\n                    data-testid=\"arrival_time\"\r\n                    class={`form-control input-sm pr-0 ${this.isButtonPressed && this.bookedByData.selectedArrivalTime.code === '' && 'border-danger'}`}\r\n                    id={v4()}\r\n                    onChange={event => this.handleDataChange('selectedArrivalTime', event)}\r\n                  >\r\n                    {/* <option value=\"\" selected={this.bookedByData.selectedArrivalTime.code === ''}>\r\n                      -\r\n                    </option> */}\r\n                    {this.arrivalTimeList.map(time => (\r\n                      <option value={time.CODE_NAME} selected={this.bookedByData.selectedArrivalTime.code === time.CODE_NAME}>\r\n                        {time.CODE_VALUE_EN}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"p-0 flex-fill  ml-md-3\">\r\n              <div class=\"  p-0 d-flex flex-column flex-md-row align-items-md-center \">\r\n                <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_AnyMessageForUs}</label>\r\n                <div class=\"p-0 m-0  controlContainer flex-fill \">\r\n                  <textarea\r\n                    data-testid=\"note\"\r\n                    id={v4()}\r\n                    rows={4}\r\n                    class=\"form-control \"\r\n                    name=\"message\"\r\n                    value={this.bookedByData.message}\r\n                    onInput={event => this.handleDataChange('message', event)}\r\n                  ></textarea>\r\n                </div>\r\n              </div>\r\n              {this.showPaymentDetails && (\r\n                <Fragment>\r\n                  <div class=\"form-group mt-md-1  p-0 d-flex flex-column flex-md-row align-items-md-center\">\r\n                    <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_CardNumber}</label>\r\n                    <div class=\"p-0 m-0  controlContainer flex-fill\">\r\n                      <input\r\n                        class=\"form-control\"\r\n                        type=\"text\"\r\n                        placeholder=\"\"\r\n                        pattern=\"0-9 \"\r\n                        id={v4()}\r\n                        value={this.bookedByData.cardNumber}\r\n                        onInput={event => this.handleNumberInput('cardNumber', event)}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center\">\r\n                    <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_CardHolderName}</label>\r\n                    <div class=\"p-0 m-0  controlContainer flex-fill\">\r\n                      <input\r\n                        class=\"form-control\"\r\n                        type=\"text\"\r\n                        placeholder=\"\"\r\n                        pattern=\"0-9 \"\r\n                        id={v4()}\r\n                        value={this.bookedByData.cardHolderName}\r\n                        onInput={event => this.handleDataChange('cardHolderName', event)}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center\">\r\n                    <label class=\"p-0 m-0 margin3\">{locales.entries.Lcz_ExpiryDate}</label>\r\n                    <div class=\"p-0 m-0 row  controlContainer flex-fill\">\r\n                      <div class=\"p-0 m-0\">\r\n                        <select class=\"form-control input-sm pr-0\" id={v4()} onChange={event => this.handleDataChange('expiryMonth', event)}>\r\n                          {this.expiryMonths.map(month => (\r\n                            <option value={month} selected={month === this.bookedByData.expiryMonth}>\r\n                              {month}\r\n                            </option>\r\n                          ))}\r\n                        </select>\r\n                      </div>\r\n                      <div class=\"p-0 m-0 ml-1\">\r\n                        <select class=\"form-control input-sm pr-0\" id={v4()} onChange={event => this.handleDataChange('expiryYear', event)}>\r\n                          {this.expiryYears.map((year, index) => (\r\n                            <option value={year} selected={index === this.bookedByData.expiryYear}>\r\n                              {year}\r\n                            </option>\r\n                          ))}\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </Fragment>\r\n              )}\r\n              <div class=\"form-group mt-1 p-0 d-flex flex-row align-items-center\">\r\n                <label class=\"p-0 m-0\" htmlFor={'emailTheGuestId'}>\r\n                  {locales.entries.Lcz_EmailTheGuest}\r\n                </label>\r\n                <div class=\"p-0 m-0  controlContainer flex-fill checkBoxContainer\">\r\n                  <input\r\n                    class=\"form-control\"\r\n                    type=\"checkbox\"\r\n                    checked={this.bookedByData.emailGuest}\r\n                    id={'emailTheGuestId'}\r\n                    onChange={event => this.handleDataChange('emailGuest', event)}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n}\r\n.currency {\r\n  display: block;\r\n  position: absolute;\r\n  margin: 0;\r\n  padding: 0;\r\n  height: auto;\r\n  left: 10px;\r\n}\r\n.rate-input {\r\n  font-size: 14px;\r\n  line-height: 0;\r\n  padding: 0;\r\n  height: 0;\r\n  border-left: 0;\r\n}\r\n.rate-input-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  box-sizing: border-box;\r\n  flex: 1;\r\n}\r\n.new-currency {\r\n  color: #3b4781;\r\n  border: 1px solid #cacfe7;\r\n  font-size: 0.975rem;\r\n  height: 2rem;\r\n  background: white;\r\n  border-right: 0;\r\n  border-top-right-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n  transition: border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n}\r\n.input-group-prepend span[data-state='focus'] {\r\n  border-color: var(--blue);\r\n}\r\n.input-group-prepend span[data-disabled] {\r\n  background-color: #eceff1;\r\n  border-color: rgba(118, 118, 118, 0.3);\r\n}\r\n.non-ref-span {\r\n  font-size: 12px;\r\n  color: var(--green);\r\n}\r\n.rateplan-name-container {\r\n  margin-bottom: 0.5rem !important;\r\n}\r\n.rateplan-container {\r\n  margin-top: 0.5rem;\r\n}\r\n@media only screen and (min-width: 1200px) {\r\n  .rateplan-name-container {\r\n    width: 40%;\r\n    margin-top: 0;\r\n  }\r\n  .rateplan-container {\r\n    width: 40%;\r\n  }\r\n}\r\n@media only screen and (min-width: 991px) {\r\n  .max-w-300 {\r\n    max-width: 200px;\r\n  }\r\n  .rate-input-container {\r\n    max-width: 50px;\r\n  }\r\n  .rateplan-name-container {\r\n    margin-bottom: 0 !important;\r\n  }\r\n}\r\n@media only screen and (min-width: 991px) and (max-width: 1300px) {\r\n  .rateplan-name-container {\r\n    width: 40%;\r\n  }\r\n  .price-amount {\r\n    max-width: 150px !important;\r\n  }\r\n}\r\n@media only screen and (max-width: 768px) {\r\n  .booking-btn {\r\n    width: 100%;\r\n  }\r\n}\r\n\r\n.total-nights-container {\r\n  width: max-content;\r\n}\r\n.nightBorder {\r\n  border-left-width: 0;\r\n  border-top-right-radius: 3px !important;\r\n  border-bottom-right-radius: 3px !important;\r\n}\r\n","import { Component, Host, Prop, h, Event, EventEmitter, Fragment } from '@stencil/core';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport locales from '@/stores/locales.store';\r\nimport { RatePlan, Variation } from '@/models/property';\r\nimport booking_store, { IRatePlanSelection, reserveRooms, updateRoomParams } from '@/stores/booking.store';\r\n\r\n@Component({\r\n  tag: 'igl-rate-plan',\r\n  styleUrl: 'igl-rate-plan.css',\r\n  scoped: true,\r\n})\r\nexport class IglRatePlan {\r\n  // Used Props with type annotations\r\n  @Prop() ratePlan: RatePlan;\r\n  @Prop() roomTypeId: number;\r\n  @Prop() ratePricingMode: Array<{ CODE_NAME: string; CODE_VALUE_EN: string }> = [];\r\n  @Prop() currency!: { symbol: string };\r\n  @Prop() shouldBeDisabled!: boolean;\r\n  @Prop() bookingType: string = 'PLUS_BOOKING';\r\n  @Prop() isBookDisabled: boolean = false;\r\n  @Prop() visibleInventory!: IRatePlanSelection;\r\n\r\n  @Event() buttonClicked!: EventEmitter<{ [key: string]: any }>;\r\n\r\n  // Determine if the form inputs should be disabled\r\n  private disableForm(): boolean {\r\n    const { bookingType, shouldBeDisabled, ratePlan, visibleInventory } = this;\r\n    if (bookingType === 'EDIT_BOOKING' && shouldBeDisabled) {\r\n      return false;\r\n    }\r\n    return !ratePlan.is_available_to_book || visibleInventory?.visibleInventory === 0;\r\n  }\r\n\r\n  // Update the rate plan selection in the booking store\r\n  private updateRateplanSelection(props: Partial<IRatePlanSelection>): void {\r\n    const { roomTypeId, ratePlan } = this;\r\n    const currentSelections = booking_store.ratePlanSelections;\r\n\r\n    booking_store.ratePlanSelections = {\r\n      ...currentSelections,\r\n      [roomTypeId]: {\r\n        ...currentSelections[roomTypeId],\r\n        [ratePlan.id]: {\r\n          ...currentSelections[roomTypeId][ratePlan.id],\r\n          ...props,\r\n        },\r\n      },\r\n    };\r\n  }\r\n\r\n  // Handle changes to select inputs\r\n  private handleDataChange(key: 'adult_child_offering' | 'rate' | 'totalRooms', evt: Event): void {\r\n    const value = (evt.target as HTMLInputElement | HTMLSelectElement).value;\r\n    if (key === 'adult_child_offering') {\r\n      this.handleVariationChange(value);\r\n    } else if (key === 'rate') {\r\n      this.updateRateplanSelection({ view_mode: value as any });\r\n    } else if (key === 'totalRooms') {\r\n      reserveRooms({\r\n        roomTypeId: this.roomTypeId,\r\n        ratePlanId: this.ratePlan.id,\r\n        rooms: Number(value),\r\n      });\r\n    }\r\n  }\r\n\r\n  // Navigate to the next page for booking\r\n  private bookProperty(): void {\r\n    if (this.bookingType === 'BAR_BOOKING') {\r\n      this.resetReserved();\r\n    }\r\n    this.reserveRoom();\r\n    this.buttonClicked.emit({ key: 'next' });\r\n  }\r\n\r\n  private reserveRoom() {\r\n    reserveRooms({\r\n      roomTypeId: this.roomTypeId,\r\n      ratePlanId: this.ratePlan.id,\r\n      rooms: 1,\r\n      guest: [\r\n        {\r\n          last_name: booking_store.guest?.last_name,\r\n          first_name: booking_store.guest?.first_name,\r\n          unit: this.roomTypeId === booking_store.guest?.roomtype_id ? booking_store.guest?.unit : null,\r\n          bed_preference: this.visibleInventory.roomtype.is_bed_configuration_enabled ? booking_store.guest?.bed_preference : null,\r\n          infant_nbr: this.visibleInventory.selected_variation.child_nbr > 0 ? booking_store.guest.infant_nbr : null,\r\n        },\r\n      ],\r\n    });\r\n  }\r\n  // Render the rate amount\r\n  private renderRate(): string {\r\n    const { visibleInventory } = this;\r\n    if (!visibleInventory) return '';\r\n    if (visibleInventory.is_amount_modified) {\r\n      return visibleInventory.rp_amount.toString();\r\n    }\r\n    const { selected_variation, view_mode } = visibleInventory;\r\n    const amount = view_mode === '001' ? selected_variation?.discounted_amount : selected_variation?.amount_per_night_gross;\r\n    return amount?.toString() || '';\r\n  }\r\n\r\n  // Format variation for display\r\n  private formatVariation(variation: Variation): string {\r\n    if (!variation) return '';\r\n    const adults = `${variation.adult_nbr} ${variation.adult_nbr === 1 ? locales.entries['Lcz_Adult']?.toLowerCase() : locales.entries['Lcz_Adults']?.toLowerCase()}`;\r\n    const children =\r\n      variation.child_nbr > 0\r\n        ? `${variation.child_nbr} ${variation.child_nbr > 1 ? locales.entries['Lcz_Children']?.toLowerCase() : locales.entries['Lcz_Child']?.toLowerCase()}`\r\n        : '';\r\n    return children ? `${adults} ${children}` : adults;\r\n  }\r\n\r\n  // Get tooltip messages for the rate plan\r\n  private getTooltipMessages(): string | undefined {\r\n    const { ratePlan, visibleInventory } = this;\r\n    const selectedVariation = visibleInventory?.selected_variation;\r\n    if (!selectedVariation) return;\r\n\r\n    const matchingVariation = ratePlan.variations?.find(variation => this.formatVariation(variation) === this.formatVariation(selectedVariation));\r\n\r\n    if (!matchingVariation) return;\r\n\r\n    const cancellationPolicy = matchingVariation.applicable_policies?.find(p => p.type === 'cancelation')?.combined_statement;\r\n    const guaranteePolicy = matchingVariation.applicable_policies?.find(p => p.type === 'guarantee')?.combined_statement;\r\n\r\n    let tooltip = '';\r\n    if (cancellationPolicy) {\r\n      tooltip += `<b><u>Cancellation:</u></b> ${cancellationPolicy}<br/>`;\r\n    }\r\n    if (guaranteePolicy) {\r\n      tooltip += `<b><u>Guarantee:</u></b> ${guaranteePolicy}`;\r\n    }\r\n    return tooltip || undefined;\r\n  }\r\n\r\n  // Handle variation change when a different option is selected\r\n  private async handleVariationChange(value: string): Promise<void> {\r\n    const { ratePlan, roomTypeId } = this;\r\n    const variations = ratePlan.variations || [];\r\n    const selectedVariation = variations.find(v => this.formatVariation(v) === value);\r\n\r\n    if (!selectedVariation) return;\r\n\r\n    updateRoomParams({\r\n      params: { selected_variation: selectedVariation },\r\n      ratePlanId: ratePlan.id,\r\n      roomTypeId,\r\n    });\r\n  }\r\n\r\n  // Reset reserved rooms in the booking store\r\n  private resetReserved(): void {\r\n    const updatedSelections = Object.entries(booking_store.ratePlanSelections).reduce((acc, [roomTypeId, ratePlans]) => {\r\n      acc[roomTypeId] = Object.entries(ratePlans).reduce((rpAcc, [ratePlanId, ratePlan]) => {\r\n        rpAcc[ratePlanId] = { ...ratePlan, reserved: 0 };\r\n        return rpAcc;\r\n      }, {} as any);\r\n      return acc;\r\n    }, {} as any);\r\n    booking_store.ratePlanSelections = updatedSelections;\r\n  }\r\n\r\n  render() {\r\n    const { ratePlan, bookingType, currency, ratePricingMode, visibleInventory } = this;\r\n    const isAvailableToBook = ratePlan.is_available_to_book;\r\n    const disableForm = this.disableForm();\r\n    const selectedVariation = visibleInventory?.selected_variation;\r\n    const formattedVariations = ratePlan.variations?.map(v => this.formatVariation(v));\r\n    // if (!this.visibleInventory) {\r\n    //   return null;\r\n    // }\r\n    return (\r\n      <Host data-testid={`rp-${this.ratePlan.id}`}>\r\n        <div\r\n          class={`d-flex mt-1  p-0 ${\r\n            isAvailableToBook ? 'flex-column flex-lg-row align-items-lg-center justify-content-lg-between' : 'align-items-center justify-content-between'\r\n          }`}\r\n        >\r\n          <div data-testid={'rp_name'} class=\"rateplan-name-container m-0 p-0  d-flex align-items-center\" style={{ gap: '0.5rem' }}>\r\n            {bookingType === 'BAR_BOOKING' ? (\r\n              <p class=\"m-0 p-0\">\r\n                {/* <span class=\"font-weight-bold\">{ratePlan.name.split('/')[0]}</span> */}\r\n                <span>\r\n                  {ratePlan.name.split('/')[1]} {ratePlan.is_non_refundable && <span class=\"non-ref-span\">Non Refundable</span>}\r\n                </span>\r\n              </p>\r\n            ) : (\r\n              <span>\r\n                {ratePlan.short_name} {ratePlan.is_non_refundable && <span class=\"non-ref-span\">Non Refundable</span>}\r\n              </span>\r\n            )}\r\n            {isAvailableToBook && <ir-tooltip message={this.getTooltipMessages()}></ir-tooltip>}\r\n          </div>\r\n\r\n          {isAvailableToBook ? (\r\n            <div class=\"d-md-flex m-md-0  justify-content-md-end align-items-md-center flex-fill rateplan-container\">\r\n              <div class=\"flex-fill max-w-300 flex-grow-1\">\r\n                <fieldset class=\"position-relative flex-grow-1 w-100\">\r\n                  <select\r\n                    disabled={disableForm}\r\n                    data-testid=\"adult-child-offering\"\r\n                    class=\"form-control input-sm flex-grow-1 w-100\"\r\n                    id={uuidv4()}\r\n                    onChange={evt => this.handleDataChange('adult_child_offering', evt)}\r\n                  >\r\n                    {formattedVariations?.map(variation => (\r\n                      <option value={variation} selected={this.formatVariation(selectedVariation) === variation}>\r\n                        {variation}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </fieldset>\r\n              </div>\r\n              <div class=\"m-0 p-0 mt-1 mt-md-0 d-flex justify-content-between align-items-md-center ml-md-1\">\r\n                <div class=\"d-flex m-0 p-0 rate-total-night-view mt-0 flex-grow-1\">\r\n                  <ir-price-input\r\n                    testId={'amount_input'}\r\n                    disabled={disableForm}\r\n                    onTextChange={e =>\r\n                      this.updateRateplanSelection({\r\n                        is_amount_modified: true,\r\n                        rp_amount: Number(e.detail),\r\n                      })\r\n                    }\r\n                    aria-label={`${this.visibleInventory?.roomtype?.name} ${this.ratePlan.short_name}'s rate`}\r\n                    aria-describedby={`${this.ratePlan.short_name}'s rate`}\r\n                    class=\"ir-br-input-none price-amount w-100 flex-grow-1\"\r\n                    currency={currency.symbol}\r\n                    value={this.renderRate()}\r\n                    placeholder={locales.entries.Lcz_Rate || 'Rate'}\r\n                  ></ir-price-input>\r\n                  <fieldset class=\"position-relative m-0 total-nights-container p-0\">\r\n                    <select\r\n                      data-testid={'nigh_stay_select'}\r\n                      disabled={disableForm}\r\n                      class=\"form-control input-sm m-0 nightBorder rounded-0 py-0\"\r\n                      id={uuidv4()}\r\n                      onChange={evt =>\r\n                        this.updateRateplanSelection({\r\n                          view_mode: (evt.target as HTMLSelectElement).value as any,\r\n                        })\r\n                      }\r\n                    >\r\n                      {ratePricingMode.map(data => (\r\n                        <option value={data.CODE_NAME} selected={visibleInventory?.view_mode === data.CODE_NAME}>\r\n                          {data.CODE_VALUE_EN}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </fieldset>\r\n                </div>\r\n                {(bookingType === 'PLUS_BOOKING' || bookingType === 'ADD_ROOM') && (\r\n                  <div class=\"flex-fill mt-0 ml-1 m-0 mt-md-0 p-0\">\r\n                    <fieldset class=\"position-relative\">\r\n                      <select\r\n                        data-testid={'inventory_select'}\r\n                        disabled={visibleInventory.visibleInventory === 0}\r\n                        class=\"form-control input-sm\"\r\n                        id={uuidv4()}\r\n                        onChange={evt => this.handleDataChange('totalRooms', evt)}\r\n                      >\r\n                        {Array.from({ length: (visibleInventory.visibleInventory || 0) + 1 }, (_, i) => i).map(i => (\r\n                          <option value={i} selected={visibleInventory.reserved === i}>\r\n                            {i}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                    </fieldset>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              {bookingType === 'EDIT_BOOKING' && (\r\n                <Fragment>\r\n                  <div class=\"m-0 p-0 ml-md-1 mt-md-0 d-none d-md-block\">\r\n                    <fieldset class=\"position-relative\">\r\n                      <input\r\n                        data-testid={'inventory_radio'}\r\n                        disabled={disableForm}\r\n                        type=\"radio\"\r\n                        name=\"ratePlanGroup\"\r\n                        value=\"1\"\r\n                        onChange={() => {\r\n                          this.resetReserved();\r\n                          this.reserveRoom();\r\n                        }}\r\n                        checked={visibleInventory.reserved === 1}\r\n                      />\r\n                    </fieldset>\r\n                  </div>\r\n                  <button\r\n                    data-testid=\"book_property\"\r\n                    disabled={disableForm}\r\n                    type=\"button\"\r\n                    class=\"btn btn-primary booking-btn mt-lg-0 btn-sm ml-md-1 mt-1 d-md-none\"\r\n                    onClick={() => {\r\n                      this.resetReserved();\r\n                      this.reserveRoom();\r\n                      this.bookProperty();\r\n                    }}\r\n                  >\r\n                    {visibleInventory.reserved === 1 ? locales.entries.Lcz_Current : locales.entries.Lcz_Select}\r\n                  </button>\r\n                </Fragment>\r\n              )}\r\n\r\n              {(bookingType === 'BAR_BOOKING' || bookingType === 'SPLIT_BOOKING') && (\r\n                <button\r\n                  data-testid=\"book\"\r\n                  disabled={disableForm || (bookingType === 'SPLIT_BOOKING' && this.isBookDisabled)}\r\n                  type=\"button\"\r\n                  class=\"btn btn-primary booking-btn mt-md-0 btn-sm ml-md-1 mt-1\"\r\n                  onClick={() => this.bookProperty()}\r\n                >\r\n                  {locales.entries.Lcz_Book}\r\n                </button>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <p class=\"text-danger m-0 p-0\">{locales.entries['Lcz_NotAvailable'] || 'Not available'}</p>\r\n          )}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n.margin-bottom-8 {\r\n  margin-bottom: 8px !important;\r\n}\r\n","import { RoomType } from '@/models/property';\r\nimport { getVisibleInventory } from '@/stores/booking.store';\r\nimport { Component, Host, h, Prop, Event, EventEmitter, State } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'igl-room-type',\r\n  styleUrl: 'igl-room-type.css',\r\n  scoped: true,\r\n})\r\nexport class IglRoomType {\r\n  @Prop() roomType: RoomType;\r\n  @Prop() bookingType = 'PLUS_BOOKING';\r\n  @Prop() dateDifference: number;\r\n  @Prop() ratePricingMode = [];\r\n  @Prop() roomInfoId: number | null = null;\r\n  @Prop() currency;\r\n  @Prop() initialRoomIds: any;\r\n  @Prop() isBookDisabled: boolean;\r\n\r\n  @State() selectedRooms: number[] = [];\r\n  @State() totalRooms: number;\r\n  @State() roomsDistributions: number[] = [];\r\n\r\n  @Event() dataUpdateEvent: EventEmitter<{ [key: string]: any }>;\r\n\r\n  private validBookingTypes = ['PLUS_BOOKING', 'ADD_ROOM', 'EDIT_BOOKING', 'SPLIT_BOOKING'];\r\n\r\n  render() {\r\n    const isValidBookingType = this.validBookingTypes.includes(this.bookingType);\r\n\r\n    return (\r\n      <Host>\r\n        {isValidBookingType && this.roomType.rateplans?.length > 0 && <div class=\"font-weight-bold font-medium-1 margin-bottom-8 \">{this.roomType.name}</div>}\r\n        {this.roomType.rateplans?.map(ratePlan => {\r\n          if (!!ratePlan.variations) {\r\n            let shouldBeDisabled = this.roomInfoId && this.roomInfoId === this.roomType.id;\r\n            // let roomId = -1;\r\n            // if (shouldBeDisabled && this.initialRoomIds) {\r\n            //   roomId = this.initialRoomIds.roomId;\r\n            // }\r\n            const visibleInventory = getVisibleInventory(this.roomType.id, ratePlan.id);\r\n            return (\r\n              <igl-rate-plan\r\n                // is_bed_configuration_enabled={this.roomType.is_bed_configuration_enabled}\r\n                // index={index}\r\n                isBookDisabled={this.isBookDisabled}\r\n                visibleInventory={visibleInventory}\r\n                key={`rate-plan-${ratePlan.id}`}\r\n                ratePricingMode={this.ratePricingMode}\r\n                class={isValidBookingType ? '' : ''}\r\n                currency={this.currency}\r\n                // dateDifference={this.dateDifference}\r\n                ratePlan={ratePlan}\r\n                roomTypeId={this.roomType.id}\r\n                // totalAvailableRooms={this.roomsDistributions[index]}\r\n                bookingType={this.bookingType}\r\n                shouldBeDisabled={shouldBeDisabled}\r\n                // physicalrooms={this.roomType.physicalrooms}\r\n                // defaultRoomId={roomId}\r\n              ></igl-rate-plan>\r\n            );\r\n          }\r\n          return null;\r\n        })}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  position: relative;\r\n}\r\n.selected {\r\n  color: #fff;\r\n  text-decoration: none;\r\n  background-color: #666ee8;\r\n}\r\ninput {\r\n  width: 100%;\r\n  position: relative;\r\n  border-top-left-radius: 0px !important;\r\n  border-left: 0 !important;\r\n  border-bottom-left-radius: 0px !important;\r\n}\r\nlabel {\r\n  margin: 0;\r\n  border-top-right-radius: 0px !important;\r\n  border-right: 0 !important;\r\n  border-bottom-right-radius: 0px !important;\r\n  width: fit-content;\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  padding-right: 3px !important;\r\n  justify-content: center;\r\n  transition: border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n}\r\nlabel[data-state='focused'] {\r\n  border-color: var(--blue);\r\n}\r\n\r\n.combobox {\r\n  margin: 0;\r\n  top: 30px;\r\n  min-width: 100%;\r\n  width: max-content;\r\n  display: block;\r\n  z-index: 10000;\r\n  padding: 1px;\r\n  background: white;\r\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\r\n  padding: 5px 0;\r\n  max-height: 250px;\r\n  overflow-y: auto;\r\n}\r\n.dropdown-item {\r\n  cursor: pointer;\r\n}\r\nbutton {\r\n  all: unset;\r\n  right: 4px;\r\n}\r\n.combobox p,\r\nspan,\r\nloader-container {\r\n  padding: 5px 16px;\r\n  margin: 0px;\r\n  margin-top: 2px;\r\n  width: 100%;\r\n}\r\n.combobox p {\r\n  cursor: pointer;\r\n}\r\n.combobox p:hover {\r\n  background: #f4f5fa;\r\n}\r\n\r\n.combobox p[data-selected],\r\n.combobox p[data-selected]:hover {\r\n  color: #fff;\r\n  text-decoration: none;\r\n  background-color: #666ee8;\r\n}\r\n.loader {\r\n  width: 14px;\r\n  height: 14px;\r\n  border: 2px solid #0f0f0f;\r\n  border-bottom-color: transparent;\r\n  border-radius: 50%;\r\n  display: inline-block;\r\n  box-sizing: border-box;\r\n  animation: rotation 1s linear infinite;\r\n}\r\n\r\n@keyframes rotation {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n","import { Component, Host, Prop, State, h, Event, EventEmitter, Listen, Element, Fragment } from '@stencil/core';\r\nimport { v4 } from 'uuid';\r\nimport { BookingService } from '../../../services/booking.service';\r\nimport { IToast } from '../ir-toast/toast';\r\nimport locales from '@/stores/locales.store';\r\n\r\n@Component({\r\n  tag: 'ir-autocomplete',\r\n  styleUrl: 'ir-autocomplete.css',\r\n  scoped: true,\r\n})\r\nexport class IrAutocomplete {\r\n  @Prop() duration: number = 300;\r\n  @Prop() placeholder: string = '';\r\n  @Prop() propertyId: number;\r\n  @Prop() isSplitBooking: boolean = false;\r\n  @Prop() type: 'email' | 'text' | 'password' | 'number' | 'search' = 'text';\r\n  @Prop() name: string = '';\r\n  @Prop() inputId: string = v4();\r\n  @Prop() required: boolean = false;\r\n  @Prop() disabled: boolean = false;\r\n  @Prop() value: string;\r\n  @Prop() from_date: string = '';\r\n  @Prop() to_date: string = '';\r\n  @Prop() danger_border: boolean;\r\n  @Prop() testId: string;\r\n\r\n  @State() inputValue: string = '';\r\n  @State() data: any[] = [];\r\n  @State() selectedIndex: number = -1;\r\n  @State() isComboBoxVisible: boolean = false;\r\n  @State() isLoading: boolean = true;\r\n  @State() isItemSelected: boolean;\r\n  @State() inputFocused: boolean = false;\r\n\r\n  @Event({ bubbles: true, composed: true }) comboboxValue: EventEmitter<{ key: string; data: unknown }>;\r\n  @Event() inputCleared: EventEmitter<null>;\r\n  @Event({ bubbles: true, composed: true }) toast: EventEmitter<IToast>;\r\n\r\n  @Element() el: HTMLElement;\r\n  private inputRef: HTMLInputElement;\r\n  private debounceTimer: any;\r\n  private bookingService = new BookingService();\r\n  private no_result_found = '';\r\n  componentWillLoad() {\r\n    this.no_result_found = locales.entries.Lcz_NoResultsFound;\r\n  }\r\n\r\n  handleKeyDown(event: KeyboardEvent) {\r\n    const dataSize = this.data.length;\r\n    const itemHeight = this.getHeightOfPElement();\r\n    if (dataSize > 0) {\r\n      switch (event.key) {\r\n        case 'ArrowUp':\r\n          event.preventDefault();\r\n          this.selectedIndex = (this.selectedIndex - 1 + dataSize) % dataSize;\r\n          this.adjustScrollPosition(itemHeight);\r\n          break;\r\n        case 'ArrowDown':\r\n          event.preventDefault();\r\n          this.selectedIndex = (this.selectedIndex + 1) % dataSize;\r\n          this.adjustScrollPosition(itemHeight);\r\n          break;\r\n        case 'Enter':\r\n        case ' ':\r\n        case 'ArrowRight':\r\n          event.preventDefault();\r\n          this.selectItem(this.selectedIndex);\r\n          break;\r\n        case 'Escape':\r\n          this.inputRef?.blur();\r\n          this.isComboBoxVisible = false;\r\n          break;\r\n      }\r\n    }\r\n  }\r\n  getHeightOfPElement() {\r\n    const combobox = this.el.querySelector('.combobox');\r\n    if (combobox) {\r\n      const pItem = combobox.querySelector('p');\r\n      return pItem ? pItem.offsetHeight : 0;\r\n    }\r\n    return 0;\r\n  }\r\n  adjustScrollPosition(itemHeight, visibleHeight = 250) {\r\n    const combobox = this.el.querySelector('.combobox');\r\n    if (combobox) {\r\n      const margin = 2;\r\n      const itemTotalHeight = itemHeight + margin;\r\n      const selectedPosition = itemTotalHeight * this.selectedIndex;\r\n      let newScrollTop = selectedPosition - visibleHeight / 2 + itemHeight / 2;\r\n      newScrollTop = Math.max(0, Math.min(newScrollTop, combobox.scrollHeight - visibleHeight));\r\n      combobox.scrollTo({\r\n        top: newScrollTop,\r\n        behavior: 'auto',\r\n      });\r\n    }\r\n  }\r\n\r\n  selectItem(index) {\r\n    if (this.data[index]) {\r\n      this.isItemSelected = true;\r\n      this.comboboxValue.emit({ key: 'select', data: this.data[index] });\r\n      this.inputValue = '';\r\n      this.resetCombobox();\r\n    }\r\n  }\r\n\r\n  debounceFetchData() {\r\n    clearTimeout(this.debounceTimer);\r\n    this.debounceTimer = setTimeout(() => {\r\n      this.fetchData();\r\n    }, this.duration);\r\n  }\r\n\r\n  async fetchData() {\r\n    try {\r\n      this.isLoading = true;\r\n      let data = [];\r\n      if (!this.isSplitBooking) {\r\n        data = await this.bookingService.fetchExposedGuest(this.inputValue, this.propertyId);\r\n      } else {\r\n        if (this.inputValue.split(' ').length === 1) {\r\n          data = await this.bookingService.fetchExposedBookings(this.inputValue, this.propertyId, this.from_date, this.to_date);\r\n        }\r\n      }\r\n      this.data = data;\r\n      if (!this.isComboBoxVisible) {\r\n        this.isComboBoxVisible = true;\r\n      }\r\n    } catch (error) {\r\n      console.log('error', error);\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n\r\n  handleInputChange(event: Event) {\r\n    this.inputValue = (event.target as HTMLInputElement).value;\r\n    if (this.inputValue) {\r\n      this.debounceFetchData();\r\n    } else {\r\n      clearTimeout(this.debounceTimer);\r\n      this.resetCombobox(false);\r\n    }\r\n  }\r\n\r\n  @Listen('click', { target: 'document' })\r\n  handleDocumentClick(event: MouseEvent) {\r\n    const target = event.target as HTMLElement;\r\n    if (!this.el.contains(target)) {\r\n      this.isComboBoxVisible = false;\r\n    }\r\n  }\r\n  handleBlur() {\r\n    this.inputFocused = false;\r\n    setTimeout(() => {\r\n      if (this.isDropdownItem(document.activeElement)) {\r\n        return;\r\n      }\r\n      if (this.isSplitBooking) {\r\n        if (!this.isItemSelected) {\r\n          if (this.data.length > 0) {\r\n            this.comboboxValue.emit({ key: 'blur', data: this.inputValue });\r\n          } else {\r\n            if (this.inputValue !== '') {\r\n              this.toast.emit({\r\n                type: 'error',\r\n                description: '',\r\n                title: `The Booking #${this.inputValue} is not Available`,\r\n                position: 'top-right',\r\n              });\r\n              this.inputCleared.emit();\r\n            }\r\n          }\r\n          this.inputValue = '';\r\n          this.resetCombobox();\r\n        } else {\r\n          this.isItemSelected = false;\r\n        }\r\n      } else {\r\n        if (!this.isItemSelected) {\r\n          this.comboboxValue.emit({ key: 'blur', data: this.inputValue });\r\n          this.inputValue = '';\r\n          this.resetCombobox();\r\n        } else {\r\n          this.isItemSelected = false;\r\n        }\r\n      }\r\n    }, 200);\r\n  }\r\n  isDropdownItem(element) {\r\n    return element && element.closest('.combobox');\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    clearTimeout(this.debounceTimer);\r\n    this.inputRef?.removeEventListener('blur', this.handleBlur);\r\n    this.inputRef?.removeEventListener('click', this.selectItem);\r\n    this.inputRef?.removeEventListener('keydown', this.handleKeyDown);\r\n    this.inputRef?.removeEventListener('focus', this.handleFocus);\r\n  }\r\n  handleItemKeyDown(event: KeyboardEvent, index: number) {\r\n    if (event.key === 'Enter' || event.key === ' ' || event.key === 'ArrowRight') {\r\n      this.selectItem(index);\r\n      event.preventDefault();\r\n    } else if (event.key === 'Escape') {\r\n      this.isComboBoxVisible = false;\r\n      this.inputRef?.blur();\r\n      event.preventDefault();\r\n    } else {\r\n      return;\r\n    }\r\n  }\r\n  renderDropdown() {\r\n    if (this.inputValue !== '') {\r\n      return (\r\n        <div class={`position-absolute dropdown-menu  rounded combobox`}>\r\n          {this.data?.map((d, index) => (\r\n            <p\r\n              role=\"button\"\r\n              class=\"dropdown-item\"\r\n              onKeyDown={e => this.handleItemKeyDown(e, index)}\r\n              data-selected={this.selectedIndex === index}\r\n              tabIndex={0}\r\n              onClick={() => this.selectItem(index)}\r\n            >\r\n              {this.isSplitBooking ? (\r\n                <Fragment>{`${d.booking_nbr} ${d.guest.first_name} ${d.guest.last_name}`}</Fragment>\r\n              ) : (\r\n                <div class={'d-flex align-items-center flex-fill'}>\r\n                  <p class={'p-0 m-0'}>\r\n                    {`${d.email}`} <span class={'p-0 m-0'}>{` - ${d.first_name} ${d.last_name}`}</span>\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </p>\r\n          ))}\r\n          {this.isLoading && (\r\n            <div class=\"loader-container d-flex align-items-center justify-content-center\">\r\n              <div class=\"loader\"></div>\r\n            </div>\r\n          )}\r\n          {this.data.length === 0 && !this.isLoading && <span class={'text-center'}>{this.no_result_found}</span>}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n  handleFocus() {\r\n    this.isComboBoxVisible = true;\r\n    this.inputFocused = true;\r\n  }\r\n  clearInput() {\r\n    this.inputValue = '';\r\n    this.resetCombobox();\r\n    this.inputCleared.emit(null);\r\n  }\r\n  resetCombobox(withblur: boolean = true) {\r\n    if (withblur) {\r\n      this.inputRef?.blur();\r\n    }\r\n    this.data = [];\r\n    this.selectedIndex = -1;\r\n    this.isComboBoxVisible = false;\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class={'d-flex align-items-center '}>\r\n          <label data-state={this.inputFocused ? 'focused' : 'blured'} htmlFor={this.inputId} class={`form-control input-sm ${this.danger_border && 'border-danger'}`}>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"12\" width=\"12\" viewBox=\"0 0 512 512\">\r\n              <path\r\n                fill=\"currentColor\"\r\n                d=\"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z\"\r\n              />\r\n            </svg>\r\n          </label>\r\n          <input\r\n            data-testid={this.testId}\r\n            required={this.required}\r\n            disabled={this.disabled}\r\n            id={this.inputId}\r\n            onKeyDown={this.handleKeyDown.bind(this)}\r\n            class={`form-control input-sm flex-full ${this.danger_border && 'border-danger'}`}\r\n            type={this.type}\r\n            name={this.name}\r\n            value={this.value || this.inputValue}\r\n            placeholder={this.placeholder}\r\n            onBlur={this.handleBlur.bind(this)}\r\n            autoComplete=\"none\"\r\n            onInput={this.handleInputChange.bind(this)}\r\n            onFocus={this.handleFocus.bind(this)}\r\n            ref={el => (this.inputRef = el)}\r\n          />\r\n          {this.inputValue && (\r\n            <button type=\"button\" class={'position-absolute d-flex align-items-center justify-content-center '} onClick={this.clearInput.bind(this)}>\r\n              <p class={'sr-only'}>clear input</p>\r\n              <svg width=\"15\" height=\"15\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path\r\n                  d=\"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z\"\r\n                  fill=\"currentColor\"\r\n                  fill-rule=\"evenodd\"\r\n                  clip-rule=\"evenodd\"\r\n                ></path>\r\n              </svg>\r\n            </button>\r\n          )}\r\n        </div>\r\n        {this.isComboBoxVisible && this.renderDropdown()}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  overflow-x: hidden;\r\n  --ir-dialog-max-width: 20rem;\r\n  font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;\r\n}\r\n:host * {\r\n  font-family: inherit !important;\r\n  font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;\r\n}\r\n\r\n.font-medium {\r\n  font-weight: 600;\r\n}\r\n\r\n:host th {\r\n  font-weight: 600;\r\n}\r\n.h-28 {\r\n  height: 2rem;\r\n}\r\n.mx-01 {\r\n  --m: 5px;\r\n  margin-right: var(--m) !important;\r\n  margin-left: var(--m) !important;\r\n}\r\n\r\n.date-margin {\r\n  margin-right: 5px;\r\n}\r\n.pickup-margin {\r\n  margin-bottom: 7px !important;\r\n}\r\n.header-date {\r\n  padding-left: 5px !important;\r\n}\r\n\r\n.pointer {\r\n  cursor: pointer;\r\n}\r\n\r\n:root {\r\n  --sidebar-width: 50rem;\r\n}\r\n.loading-container {\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.sm-padding-right {\r\n  padding-right: 0.2rem;\r\n}\r\n.sm-padding-left {\r\n  padding-left: 0.2rem;\r\n}\r\n.sm-padding-top {\r\n  padding-top: 0.2rem;\r\n}\r\n.sm-padding-bottom {\r\n  padding-bottom: 0.2rem;\r\n}\r\n\r\n.info-notes {\r\n  list-style: none;\r\n  padding-left: 0;\r\n}\r\n.light-blue-bg {\r\n  background-color: #acecff;\r\n  padding: 0.2rem 0.3rem;\r\n}\r\n.iframeHeight {\r\n  height: 17.5rem;\r\n}\r\n\r\n.dialog-title {\r\n  width: fit-content;\r\n}\r\n","import { Component, Listen, h, Prop, Watch, State, Event, EventEmitter, Element, Fragment } from '@stencil/core';\r\nimport { Booking, ExtraService, Guest, IPmsLog, Room, SharedPerson } from '@/models/booking.dto';\r\nimport axios from 'axios';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport { IglBookPropertyPayloadAddRoom, TIglBookPropertyPayload } from '@/models/igl-book-property';\r\nimport { RoomService } from '@/services/room.service';\r\nimport locales from '@/stores/locales.store';\r\nimport { IToast } from '@components/ui/ir-toast/toast';\r\nimport { ICountry, IEntries } from '@/models/IBooking';\r\nimport { IPaymentAction, PaymentService } from '@/services/payment.service';\r\nimport Token from '@/models/Token';\r\nimport { BookingDetailsSidebarEvents, OpenSidebarEvent } from './types';\r\nimport calendar_data from '@/stores/calendar-data';\r\nimport moment from 'moment';\r\nimport { IrModalCustomEvent } from '@/components';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\n\r\n@Component({\r\n  tag: 'ir-booking-details',\r\n  styleUrl: 'ir-booking-details.css',\r\n  scoped: true,\r\n})\r\nexport class IrBookingDetails {\r\n  @Element() element: HTMLElement;\r\n  // Setup Data\r\n  @Prop() language: string = 'en';\r\n  @Prop() ticket: string = '';\r\n  @Prop() bookingNumber: string = '';\r\n  @Prop() propertyid: number;\r\n  @Prop() is_from_front_desk = false;\r\n  @Prop() p: string;\r\n  // Booleans Conditions\r\n  @Prop() hasPrint: boolean = false;\r\n  @Prop() hasReceipt: boolean = false;\r\n  @Prop() hasDelete: boolean = false;\r\n  @Prop() hasMenu: boolean = false;\r\n\r\n  // Room Booleans\r\n  @Prop() hasRoomEdit: boolean = false;\r\n  @Prop() hasRoomDelete: boolean = false;\r\n  @Prop() hasRoomAdd: boolean = false;\r\n  @Prop() hasCheckIn: boolean = false;\r\n  @Prop() hasCheckOut: boolean = false;\r\n  @Prop() hasCloseButton = false;\r\n\r\n  @State() bookingItem: TIglBookPropertyPayload | null = null;\r\n  @State() statusData = [];\r\n\r\n  @State() showPaymentDetails: any;\r\n  @State() booking: Booking;\r\n  @State() countries: ICountry[];\r\n  @State() calendarData: any = {};\r\n  // Guest Data\r\n  @State() guestData: Guest = null;\r\n  // Rerender Flag\r\n  @State() rerenderFlag = false;\r\n  @State() sidebarState: BookingDetailsSidebarEvents | null = null;\r\n  @State() sidebarPayload: any;\r\n  @State() isUpdateClicked = false;\r\n\r\n  @State() pms_status: IPmsLog;\r\n  @State() isPMSLogLoading: boolean = false;\r\n  @State() paymentActions: IPaymentAction[];\r\n  @State() property_id: number;\r\n  @State() selectedService: ExtraService;\r\n  @State() bedPreference: IEntries[];\r\n  @State() roomGuest: any;\r\n  @State() modalState: { type: 'email' | (string & {}); message: string; loading: boolean } = null;\r\n  // Payment Event\r\n  @Event() toast: EventEmitter<IToast>;\r\n  @Event() bookingChanged: EventEmitter<Booking>;\r\n  @Event() closeSidebar: EventEmitter<null>;\r\n\r\n  private bookingService = new BookingService();\r\n  private roomService = new RoomService();\r\n  private paymentService = new PaymentService();\r\n  private token = new Token();\r\n\r\n  private printingBaseUrl = 'https://gateway.igloorooms.com/PrintBooking/%1/printing?id=%2';\r\n  modalRef: HTMLIrModalElement;\r\n\r\n  componentWillLoad() {\r\n    if (this.ticket !== '') {\r\n      this.token.setToken(this.ticket);\r\n      this.initializeApp();\r\n    }\r\n  }\r\n\r\n  @Watch('ticket')\r\n  ticketChanged(newValue: string, oldValue: string) {\r\n    if (newValue === oldValue) {\r\n      return;\r\n    }\r\n    this.token.setToken(this.ticket);\r\n    this.initializeApp();\r\n  }\r\n\r\n  @Listen('openSidebar')\r\n  handleSideBarEvents(e: CustomEvent<OpenSidebarEvent<unknown>>) {\r\n    this.sidebarState = e.detail.type;\r\n    this.sidebarPayload = e.detail.payload;\r\n  }\r\n\r\n  @Listen('clickHandler')\r\n  handleIconClick(e: CustomEvent) {\r\n    const target = e.target as HTMLIrButtonElement;\r\n    switch (target.id) {\r\n      case 'pickup':\r\n        this.sidebarState = 'pickup';\r\n        return;\r\n      case 'close':\r\n        this.closeSidebar.emit(null);\r\n        return;\r\n      case 'email':\r\n        this.modalState = {\r\n          type: 'email',\r\n          message: locales.entries.Lcz_EmailBookingto.replace('%1', this.booking.guest.email),\r\n          loading: isRequestPending('/Send_Booking_Confirmation_Email'),\r\n        };\r\n        this.modalRef.openModal();\r\n        return;\r\n      case 'print':\r\n        this.openPrintingScreen();\r\n        return;\r\n      case 'receipt':\r\n        this.openPrintingScreen('invoice');\r\n        return;\r\n      case 'book-delete':\r\n        return;\r\n      case 'menu':\r\n        window.location.href = 'https://x.igloorooms.com/manage/acbookinglist.aspx';\r\n        return;\r\n      case 'room-add':\r\n        (this.bookingItem as IglBookPropertyPayloadAddRoom) = {\r\n          ID: '',\r\n          NAME: this.booking.guest.last_name,\r\n          EMAIL: this.booking.guest.email,\r\n          PHONE: this.booking.guest.mobile,\r\n          REFERENCE_TYPE: '',\r\n          FROM_DATE: this.booking.from_date,\r\n          ARRIVAL: this.booking.arrival,\r\n          TO_DATE: this.booking.to_date,\r\n          TITLE: `${locales.entries.Lcz_AddingUnitToBooking}# ${this.booking.booking_nbr}`,\r\n          defaultDateRange: {\r\n            fromDate: new Date(this.booking.from_date),\r\n            fromDateStr: '',\r\n            toDate: new Date(this.booking.to_date),\r\n            toDateStr: '',\r\n            dateDifference: 0,\r\n            message: '',\r\n          },\r\n          event_type: 'ADD_ROOM',\r\n          booking: this.booking,\r\n          BOOKING_NUMBER: this.booking.booking_nbr,\r\n          ADD_ROOM_TO_BOOKING: this.booking.booking_nbr,\r\n          GUEST: this.booking.guest,\r\n          message: this.booking.remark,\r\n          SOURCE: this.booking.source,\r\n          ROOMS: this.booking.rooms,\r\n        };\r\n        return;\r\n      case 'extra_service_btn':\r\n        this.sidebarState = 'extra_service';\r\n        return;\r\n      case 'add-payment':\r\n        return;\r\n    }\r\n  }\r\n\r\n  @Listen('resetExposedCancelationDueAmount')\r\n  async handleResetExposedCancellationDueAmount(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    //TODO: Payment action\r\n    const paymentActions = await this.paymentService.GetExposedCancellationDueAmount({ booking_nbr: this.booking.booking_nbr, currency_id: this.booking.currency.id });\r\n    this.paymentActions = [...paymentActions];\r\n  }\r\n  @Listen('editInitiated')\r\n  handleEditInitiated(e: CustomEvent<TIglBookPropertyPayload>) {\r\n    this.bookingItem = e.detail;\r\n  }\r\n  @Listen('updateRoomGuests')\r\n  handleRoomGuestsUpdate(e: CustomEvent<{ identifier: string; guests: SharedPerson[] }>) {\r\n    const { identifier, guests } = e.detail;\r\n    const rooms = [...this.booking.rooms];\r\n    let currentRoomIndex = rooms.findIndex(r => r.identifier === identifier);\r\n    if (currentRoomIndex === -1) {\r\n      return;\r\n    }\r\n    const currentRoom = rooms[currentRoomIndex];\r\n    const updatedRoom = { ...currentRoom, sharing_persons: guests };\r\n    rooms[currentRoomIndex] = updatedRoom;\r\n    this.booking = { ...this.booking, rooms: [...rooms] };\r\n  }\r\n\r\n  @Listen('resetBookingEvt')\r\n  async handleResetBooking(e: CustomEvent<Booking | null>) {\r\n    e.stopPropagation();\r\n    e.stopImmediatePropagation();\r\n    if (e.detail) {\r\n      return (this.booking = e.detail);\r\n    }\r\n    await this.resetBooking();\r\n  }\r\n  @Listen('editExtraService')\r\n  handleEditExtraService(e: CustomEvent) {\r\n    this.selectedService = e.detail;\r\n    this.sidebarState = 'extra_service';\r\n  }\r\n\r\n  private setRoomsData(roomServiceResp) {\r\n    let roomsData: { [key: string]: any }[] = new Array();\r\n    if (roomServiceResp.My_Result?.roomtypes?.length) {\r\n      roomsData = roomServiceResp.My_Result.roomtypes;\r\n      roomServiceResp.My_Result.roomtypes.forEach(roomCategory => {\r\n        roomCategory.expanded = true;\r\n      });\r\n    }\r\n    this.calendarData.roomsInfo = roomsData;\r\n  }\r\n  private async initializeApp() {\r\n    try {\r\n      const [roomResponse, languageTexts, countriesList, bookingDetails, bedPreference] = await Promise.all([\r\n        this.roomService.getExposedProperty({ id: this.propertyid || 0, language: this.language, aname: this.p }),\r\n        this.roomService.fetchLanguage(this.language),\r\n        this.bookingService.getCountries(this.language),\r\n        this.bookingService.getExposedBooking(this.bookingNumber, this.language),\r\n        this.bookingService.getSetupEntriesByTableName('_BED_PREFERENCE_TYPE'),\r\n      ]);\r\n      this.property_id = roomResponse?.My_Result?.id;\r\n      this.bedPreference = bedPreference;\r\n      if (bookingDetails?.booking_nbr && bookingDetails?.currency?.id && bookingDetails.is_direct) {\r\n        this.paymentService\r\n          .GetExposedCancellationDueAmount({\r\n            booking_nbr: bookingDetails.booking_nbr,\r\n            currency_id: bookingDetails.currency.id,\r\n          })\r\n          .then(res => {\r\n            this.paymentActions = res;\r\n          });\r\n      }\r\n      if (!locales?.entries) {\r\n        locales.entries = languageTexts.entries;\r\n        locales.direction = languageTexts.direction;\r\n      }\r\n      this.countries = countriesList;\r\n      const myResult = roomResponse?.My_Result;\r\n      if (myResult) {\r\n        const { allowed_payment_methods: paymentMethods, currency, allowed_booking_sources, adult_child_constraints, calendar_legends, aname } = myResult;\r\n        this.printingBaseUrl = this.printingBaseUrl.replace('%1', aname).replace('%2', this.bookingNumber);\r\n        this.calendarData = {\r\n          currency,\r\n          allowed_booking_sources,\r\n          adult_child_constraints,\r\n          legendData: calendar_legends,\r\n        };\r\n        this.setRoomsData(roomResponse);\r\n        const paymentCodesToShow = ['001', '004'];\r\n        this.showPaymentDetails = paymentMethods?.some(method => paymentCodesToShow.includes(method.code));\r\n      } else {\r\n        console.warn(\"Room response is missing 'My_Result'.\");\r\n      }\r\n\r\n      // Set guest and booking data\r\n      this.guestData = bookingDetails.guest;\r\n      this.booking = bookingDetails;\r\n    } catch (error) {\r\n      console.error('Error initializing app:', error);\r\n    }\r\n  }\r\n\r\n  private async openPrintingScreen(mode: 'invoice' | 'print' = 'print', version: 'old' | 'new' = 'new') {\r\n    if (version === 'old') {\r\n      if (mode === 'invoice') {\r\n        return window.open(`https://x.igloorooms.com/manage/AcBookingEdit.aspx?IRID=${this.booking.system_id}&&PM=I&TK=${this.ticket}`);\r\n      }\r\n      return window.open(`https://x.igloorooms.com/manage/AcBookingEdit.aspx?IRID=${this.booking.system_id}&&PM=B&TK=${this.ticket}`);\r\n    }\r\n    let url = this.printingBaseUrl;\r\n    if (mode === 'invoice') {\r\n      url = url + '&mode=invoice';\r\n    }\r\n    const { data } = await axios.post(`Get_ShortLiving_Token`);\r\n    if (!data.ExceptionMsg) {\r\n      url = url + `&token=${data.My_Result}`;\r\n    }\r\n    window.open(url);\r\n  }\r\n\r\n  private handleCloseBookingWindow() {\r\n    this.bookingItem = null;\r\n  }\r\n\r\n  private handleDeleteFinish(e: CustomEvent) {\r\n    this.booking = { ...this.booking, rooms: this.booking.rooms.filter(room => room.identifier !== e.detail) };\r\n  }\r\n\r\n  private async resetBooking() {\r\n    try {\r\n      const booking = await this.bookingService.getExposedBooking(this.bookingNumber, this.language);\r\n      this.booking = { ...booking };\r\n      this.bookingChanged.emit(this.booking);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  private async handleModalConfirm(e: IrModalCustomEvent<any>) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    switch (this.modalState.type) {\r\n      case 'email':\r\n        await this.bookingService.sendBookingConfirmationEmail(this.booking.booking_nbr, this.language);\r\n        break;\r\n    }\r\n    this.modalState = null;\r\n    this.modalRef.closeModal();\r\n  }\r\n  private renderSidebarContent() {\r\n    const handleClose = () => {\r\n      this.sidebarState = null;\r\n    };\r\n    switch (this.sidebarState) {\r\n      case 'guest':\r\n        return (\r\n          <ir-guest-info\r\n            isInSideBar\r\n            headerShown\r\n            slot=\"sidebar-body\"\r\n            booking_nbr={this.bookingNumber}\r\n            email={this.booking?.guest.email}\r\n            language={this.language}\r\n            onCloseSideBar={handleClose}\r\n          ></ir-guest-info>\r\n        );\r\n      case 'pickup':\r\n        return (\r\n          <ir-pickup\r\n            bookingDates={{ from: this.booking.from_date, to: this.booking.to_date }}\r\n            slot=\"sidebar-body\"\r\n            defaultPickupData={this.booking.pickup_info}\r\n            bookingNumber={this.booking.booking_nbr}\r\n            numberOfPersons={this.booking.occupancy.adult_nbr + this.booking.occupancy.children_nbr}\r\n            onCloseModal={handleClose}\r\n          ></ir-pickup>\r\n        );\r\n      case 'extra_note':\r\n        return <ir-booking-extra-note slot=\"sidebar-body\" booking={this.booking} onCloseModal={() => (this.sidebarState = null)}></ir-booking-extra-note>;\r\n      case 'extra_service':\r\n        return (\r\n          <ir-extra-service-config\r\n            service={this.selectedService}\r\n            booking={{ from_date: this.booking.from_date, to_date: this.booking.to_date, booking_nbr: this.booking.booking_nbr, currency: this.booking.currency }}\r\n            slot=\"sidebar-body\"\r\n            onCloseModal={() => {\r\n              handleClose();\r\n              if (this.selectedService) {\r\n                this.selectedService = null;\r\n              }\r\n            }}\r\n          ></ir-extra-service-config>\r\n        );\r\n      case 'room-guest':\r\n        return (\r\n          <ir-room-guests\r\n            countries={this.countries}\r\n            language={this.language}\r\n            identifier={this.sidebarPayload?.identifier}\r\n            bookingNumber={this.booking.booking_nbr}\r\n            roomName={this.sidebarPayload?.roomName}\r\n            totalGuests={this.sidebarPayload?.totalGuests}\r\n            sharedPersons={this.sidebarPayload?.sharing_persons}\r\n            slot=\"sidebar-body\"\r\n            checkIn={this.sidebarPayload?.checkin}\r\n            onCloseModal={handleClose}\r\n          ></ir-room-guests>\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n  render() {\r\n    if (!this.booking) {\r\n      return (\r\n        <div class={'loading-container'}>\r\n          <ir-spinner></ir-spinner>\r\n        </div>\r\n      );\r\n    }\r\n    return [\r\n      <Fragment>\r\n        {!this.is_from_front_desk && (\r\n          <Fragment>\r\n            <ir-toast></ir-toast>\r\n            <ir-interceptor></ir-interceptor>\r\n          </Fragment>\r\n        )}\r\n      </Fragment>,\r\n      <ir-booking-header\r\n        booking={this.booking}\r\n        hasCloseButton={this.hasCloseButton}\r\n        hasDelete={this.hasDelete}\r\n        hasMenu={this.hasMenu}\r\n        hasPrint={this.hasPrint}\r\n        hasReceipt={this.hasReceipt}\r\n        hasEmail={['001', '002'].includes(this.booking?.status?.code)}\r\n      ></ir-booking-header>,\r\n      <div class=\"fluid-container p-1 text-left mx-0\">\r\n        <div class=\"row m-0\">\r\n          <div class=\"col-12 p-0 mx-0 pr-lg-1 col-lg-6\">\r\n            <ir-reservation-information countries={this.countries} booking={this.booking}></ir-reservation-information>\r\n            <div class=\"font-size-large d-flex justify-content-between align-items-center mb-1\">\r\n              <ir-date-view from_date={this.booking.from_date} to_date={this.booking.to_date}></ir-date-view>\r\n              {this.hasRoomAdd && this.booking.is_direct && this.booking.is_editable && (\r\n                <ir-button id=\"room-add\" icon_name=\"square_plus\" variant=\"icon\" style={{ '--icon-size': '1.5rem' }}></ir-button>\r\n              )}\r\n            </div>\r\n            <div class=\"card p-0 mx-0\">\r\n              {this.booking.rooms.map((room: Room, index: number) => {\r\n                const showCheckin = this.handleRoomCheckin(room);\r\n                const showCheckout = this.handleRoomCheckout(room);\r\n                return [\r\n                  <ir-room\r\n                    room={room}\r\n                    language={this.language}\r\n                    bedPreferences={this.bedPreference}\r\n                    isEditable={this.booking.is_editable}\r\n                    legendData={this.calendarData.legendData}\r\n                    roomsInfo={this.calendarData.roomsInfo}\r\n                    myRoomTypeFoodCat={room.roomtype.name}\r\n                    mealCodeName={room.rateplan.short_name}\r\n                    currency={this.booking.currency.symbol}\r\n                    hasRoomEdit={this.hasRoomEdit && this.booking.status.code !== '003' && this.booking.is_direct}\r\n                    hasRoomDelete={this.hasRoomDelete && this.booking.status.code !== '003' && this.booking.is_direct}\r\n                    hasCheckIn={showCheckin}\r\n                    hasCheckOut={showCheckout}\r\n                    booking={this.booking}\r\n                    bookingIndex={index}\r\n                    onDeleteFinished={this.handleDeleteFinish.bind(this)}\r\n                  />,\r\n                  index !== this.booking.rooms.length - 1 && <hr class=\"mr-2 ml-2 my-0 p-0\" />,\r\n                ];\r\n              })}\r\n            </div>\r\n            {/* <ir-ota-services services={this.booking.ota_services}></ir-ota-services> */}\r\n            <ir-pickup-view booking={this.booking}></ir-pickup-view>\r\n            <section>\r\n              <div class=\"font-size-large d-flex justify-content-between align-items-center mb-1\">\r\n                <p class={'font-size-large p-0 m-0 '}>{locales.entries.Lcz_ExtraServices}</p>\r\n                <ir-button id=\"extra_service_btn\" icon_name=\"square_plus\" variant=\"icon\" style={{ '--icon-size': '1.5rem' }}></ir-button>\r\n              </div>\r\n              <ir-extra-services\r\n                booking={{ booking_nbr: this.booking.booking_nbr, currency: this.booking.currency, extra_services: this.booking.extra_services }}\r\n              ></ir-extra-services>\r\n            </section>\r\n          </div>\r\n          <div class=\"col-12 p-0 m-0 pl-lg-1 col-lg-6\">\r\n            <ir-payment-details paymentActions={this.paymentActions} bookingDetails={this.booking}></ir-payment-details>\r\n          </div>\r\n        </div>\r\n      </div>,\r\n      <ir-modal\r\n        modalBody={this.modalState?.message}\r\n        leftBtnText={locales.entries.Lcz_Cancel}\r\n        rightBtnText={locales.entries.Lcz_Confirm}\r\n        autoClose={false}\r\n        isLoading={isRequestPending('/Send_Booking_Confirmation_Email')}\r\n        ref={el => (this.modalRef = el)}\r\n        onConfirmModal={e => {\r\n          this.handleModalConfirm(e);\r\n        }}\r\n        onCancelModal={() => {\r\n          this.modalRef.closeModal();\r\n        }}\r\n      ></ir-modal>,\r\n      <ir-sidebar\r\n        open={this.sidebarState !== null}\r\n        side={'right'}\r\n        id=\"editGuestInfo\"\r\n        style={{ '--sidebar-width': this.sidebarState === 'room-guest' ? '60rem' : undefined }}\r\n        onIrSidebarToggle={e => {\r\n          e.stopImmediatePropagation();\r\n          e.stopPropagation();\r\n          this.sidebarState = null;\r\n        }}\r\n        showCloseButton={false}\r\n      >\r\n        {this.renderSidebarContent()}\r\n      </ir-sidebar>,\r\n      <Fragment>\r\n        {this.bookingItem && (\r\n          <igl-book-property\r\n            allowedBookingSources={this.calendarData.allowed_booking_sources}\r\n            adultChildConstraints={this.calendarData.adult_child_constraints}\r\n            showPaymentDetails={this.showPaymentDetails}\r\n            countries={this.countries}\r\n            currency={this.calendarData.currency}\r\n            language={this.language}\r\n            propertyid={this.property_id}\r\n            bookingData={this.bookingItem}\r\n            onCloseBookingWindow={() => this.handleCloseBookingWindow()}\r\n          ></igl-book-property>\r\n        )}\r\n      </Fragment>,\r\n    ];\r\n  }\r\n  private handleRoomCheckout(room: Room): boolean {\r\n    if (!calendar_data.checkin_enabled || calendar_data.is_automatic_check_in_out) {\r\n      return false;\r\n    }\r\n    return room.in_out.code === '001';\r\n  }\r\n  private handleRoomCheckin(room: Room): boolean {\r\n    if (!calendar_data.checkin_enabled || calendar_data.is_automatic_check_in_out) {\r\n      return false;\r\n    }\r\n    if (!room.unit) {\r\n      return false;\r\n    }\r\n    if (room.in_out && room.in_out.code !== '000') {\r\n      return false;\r\n    }\r\n    if (moment(new Date()).isSameOrAfter(new Date(room.from_date), 'days') && moment(new Date()).isBefore(new Date(room.to_date), 'days')) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n","import locales from '@/stores/locales.store';\r\nimport { Component, Event, EventEmitter, Host, Prop, State, h } from '@stencil/core';\r\nimport { Booking } from '@/models/booking.dto';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport { getPrivateNote } from '@/utils/booking';\r\n@Component({\r\n  tag: 'ir-booking-extra-note',\r\n  styleUrl: 'ir-booking-extra-note.css',\r\n  scoped: true,\r\n})\r\nexport class IrBookingExtraNote {\r\n  @Prop() booking: Booking;\r\n\r\n  @State() isLoading = false;\r\n  @State() note = '';\r\n\r\n  @Event() closeModal: EventEmitter<null>;\r\n  @Event() resetBookingEvt: EventEmitter<Booking | null>;\r\n\r\n  private bookingService = new BookingService();\r\n  componentWillLoad() {\r\n    if (this.booking.extras) {\r\n      this.setNote(getPrivateNote(this.booking.extras));\r\n    }\r\n  }\r\n\r\n  private setNote(value: string) {\r\n    this.note = value;\r\n  }\r\n  private async savePrivateNote() {\r\n    try {\r\n      this.isLoading = true;\r\n      let prevExtras = this.booking.extras || [];\r\n      const newExtraObj = { key: 'private_note', value: this.note };\r\n      if (prevExtras.length === 0) {\r\n        prevExtras.push(newExtraObj);\r\n      } else {\r\n        const oldPrivateNoteIndex = prevExtras.findIndex(e => e.key === 'private_note');\r\n        if (oldPrivateNoteIndex === -1) {\r\n          prevExtras.push(newExtraObj);\r\n        } else {\r\n          prevExtras[oldPrivateNoteIndex] = newExtraObj;\r\n        }\r\n      }\r\n      const res = await this.bookingService.doReservation({\r\n        assign_units: true,\r\n        is_pms: true,\r\n        is_direct: true,\r\n        is_in_loyalty_mode: false,\r\n        promo_key: null,\r\n        booking: this.booking,\r\n        Is_Non_Technical_Change: true,\r\n        extras: prevExtras,\r\n      });\r\n      this.resetBookingEvt.emit(res);\r\n      this.closeModal.emit(null);\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <Host class={'px-0'}>\r\n        <ir-title class=\"px-1\" onCloseSideBar={() => this.closeModal.emit(null)} label={locales.entries.Lcz_PrivateNote} displayContext=\"sidebar\"></ir-title>\r\n        <form\r\n          class={'px-1'}\r\n          onSubmit={e => {\r\n            e.preventDefault();\r\n            this.savePrivateNote();\r\n          }}\r\n        >\r\n          <ir-textarea placeholder={locales.entries.Lcz_PrivateNote_MaxChar} label=\"\" value={this.note} maxLength={150} onTextChange={e => this.setNote(e.detail)}></ir-textarea>\r\n          <div class={'d-flex flex-column flex-sm-row mt-3'}>\r\n            <ir-button\r\n              onClickHandler={() => this.closeModal.emit(null)}\r\n              btn_styles=\"justify-content-center\"\r\n              class={`mb-1 mb-sm-0 flex-fill  mr-sm-1'}`}\r\n              icon=\"\"\r\n              text={locales.entries.Lcz_Cancel}\r\n              btn_color=\"secondary\"\r\n            ></ir-button>\r\n\r\n            <ir-button\r\n              btn_styles=\"justify-content-center align-items-center\"\r\n              class={'m-0 flex-fill text-center ml-sm-1'}\r\n              icon=\"\"\r\n              isLoading={this.isLoading}\r\n              text={locales.entries.Lcz_Save}\r\n              btn_color=\"primary\"\r\n              btn_type=\"submit\"\r\n            ></ir-button>\r\n          </div>\r\n        </form>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n.confirmed {\r\n  color: #fff;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.bg-ir-green {\r\n  background: #629a4c;\r\n  padding: 0.2rem 0.3rem;\r\n  /* height: 28px; */\r\n  /* padding-top: 0 !important;\r\n  padding-bottom: 0 !important ; */\r\n}\r\n.bg-ir-red {\r\n  background: #ff4961;\r\n  padding: 0.2rem 0.3rem;\r\n  /* height: 28px; */\r\n  /* padding-top: 0 !important;\r\n  padding-bottom: 0 !important ; */\r\n}\r\n.bg-ir-orange {\r\n  background: #ff9149;\r\n  padding: 0.2rem 0.3rem;\r\n  /* height: 28px; */\r\n  /* padding-top: 0 !important;\r\n  padding-bottom: 0 !important ; */\r\n}\r\n","import { IToast } from '@/components/ui/ir-toast/toast';\r\nimport { colorVariants } from '@/components/ui/ir-icons/icons';\r\nimport { Booking } from '@/models/booking.dto';\r\nimport calendar_data from '@/stores/calendar-data';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\nimport locales from '@/stores/locales.store';\r\nimport { Component, Event, EventEmitter, h, Listen, Prop, State } from '@stencil/core';\r\nimport { BookingDetailsDialogEvents, OpenDialogEvent, OpenSidebarEvent } from '../types';\r\nimport { BookingService } from '@/services/booking.service';\r\n\r\n@Component({\r\n  tag: 'ir-booking-header',\r\n  styleUrl: 'ir-booking-header.css',\r\n  scoped: true,\r\n})\r\nexport class IrBookingHeader {\r\n  @Prop() booking: Booking;\r\n  @Prop() hasReceipt: boolean;\r\n  @Prop() hasPrint: boolean;\r\n  @Prop() hasDelete: boolean;\r\n  @Prop() hasMenu: boolean;\r\n  @Prop() hasCloseButton: boolean;\r\n  @Prop() hasEmail: boolean = true;\r\n\r\n  @State() bookingStatus: string | null = null;\r\n  @State() currentDialogStatus: BookingDetailsDialogEvents;\r\n\r\n  @Event() toast: EventEmitter<IToast>;\r\n  @Event() closeSidebar: EventEmitter<null>;\r\n  @Event() resetBookingEvt: EventEmitter<null>;\r\n  @Event() openSidebar: EventEmitter<OpenSidebarEvent<any>>;\r\n\r\n  private confirmationBG = {\r\n    '001': 'bg-ir-orange',\r\n    '002': 'bg-ir-green',\r\n    '003': 'bg-ir-red',\r\n    '004': 'bg-ir-red',\r\n  };\r\n  private dialogRef: HTMLIrDialogElement;\r\n\r\n  private bookingService = new BookingService();\r\n\r\n  @Listen('selectChange')\r\n  handleSelectChange(e: CustomEvent<any>) {\r\n    e.stopPropagation();\r\n    e.stopImmediatePropagation();\r\n    const target = e.target;\r\n    this.bookingStatus = (target as any).selectedValue;\r\n  }\r\n  private async updateStatus() {\r\n    if (!this.bookingStatus || this.bookingStatus === '-1') {\r\n      this.toast.emit({\r\n        type: 'error',\r\n        description: '',\r\n        title: locales.entries.Lcz_SelectStatus,\r\n        position: 'top-right',\r\n      });\r\n      return;\r\n    }\r\n    try {\r\n      await this.bookingService.changeExposedBookingStatus({\r\n        book_nbr: this.booking.booking_nbr,\r\n        status: this.bookingStatus,\r\n      });\r\n      this.toast.emit({\r\n        type: 'success',\r\n        description: '',\r\n        title: locales.entries.Lcz_StatusUpdatedSuccessfully,\r\n        position: 'top-right',\r\n      });\r\n      this.bookingStatus = null;\r\n      this.resetBookingEvt.emit(null);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  private openDialog(e: OpenDialogEvent) {\r\n    const { type } = e;\r\n    this.currentDialogStatus = type;\r\n    this.dialogRef.openModal();\r\n  }\r\n  private renderDialogBody() {\r\n    switch (this.currentDialogStatus) {\r\n      case 'pms':\r\n        return <ir-pms-logs slot=\"modal-body\" bookingNumber={this.booking.booking_nbr}></ir-pms-logs>;\r\n      case 'events-log':\r\n        return <ir-events-log slot=\"modal-body\" bookingNumber={this.booking.booking_nbr}></ir-events-log>;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div class=\"fluid-container px-1\">\r\n        <div class=\"d-flex flex-column p-0 mx-0 flex-lg-row align-items-md-center justify-content-between mt-1\">\r\n          <div class=\"m-0 p-0 mb-1 mb-lg-0 mt-md-0\">\r\n            <p class=\"font-size-large m-0 p-0\">{`${locales.entries.Lcz_Booking}#${this.booking.booking_nbr}`}</p>\r\n            <p class=\"m-0 p-0\">{!this.booking.is_direct && <span class=\"mr-1 m-0\">{this.booking.channel_booking_nbr}</span>}</p>\r\n          </div>\r\n\r\n          <div class=\"d-flex justify-content-end align-items-center\" style={{ gap: '1rem', flexWrap: 'wrap' }}>\r\n            <span class={`confirmed btn-sm m-0  ${this.confirmationBG[this.booking.status.code]}`}>{this.booking.status.description}</span>\r\n            {this.booking.allowed_actions.length > 0 && this.booking.is_editable && (\r\n              <div class=\"m-0 p-0 d-flex align-items-center\" style={{ gap: '0.25rem' }}>\r\n                <ir-select\r\n                  selectContainerStyle=\"h-28\"\r\n                  selectStyles=\"d-flex status-select align-items-center h-28\"\r\n                  firstOption={locales.entries.Lcz_Select}\r\n                  id=\"update-status\"\r\n                  size=\"sm\"\r\n                  label-available=\"false\"\r\n                  data={this.booking.allowed_actions.map(b => ({ text: b.description, value: b.code }))}\r\n                  textSize=\"sm\"\r\n                  class=\"sm-padding-right m-0 \"\r\n                  selectedValue={this.bookingStatus}\r\n                ></ir-select>\r\n                <ir-button\r\n                  onClickHandler={this.updateStatus.bind(this)}\r\n                  btn_styles=\"h-28\"\r\n                  isLoading={isRequestPending('/Change_Exposed_Booking_Status')}\r\n                  btn_disabled={isRequestPending('/Change_Exposed_Booking_Status')}\r\n                  id=\"update-status-btn\"\r\n                  size=\"sm\"\r\n                  text=\"Update\"\r\n                ></ir-button>\r\n              </div>\r\n            )}\r\n            <ir-button\r\n              size=\"sm\"\r\n              btn_color=\"outline\"\r\n              text={locales.entries.Lcz_EventsLog}\r\n              onClickHandler={e => {\r\n                e.stopImmediatePropagation();\r\n                e.stopPropagation();\r\n                this.openDialog({ type: 'events-log' });\r\n              }}\r\n            ></ir-button>\r\n            {calendar_data.is_pms_enabled && (\r\n              <ir-button\r\n                size=\"sm\"\r\n                btn_color=\"outline\"\r\n                text={locales.entries.Lcz_pms}\r\n                onClick={e => {\r\n                  e.stopImmediatePropagation();\r\n                  e.stopPropagation();\r\n                  this.openDialog({ type: 'pms' });\r\n                }}\r\n              ></ir-button>\r\n            )}\r\n            {this.hasReceipt && <ir-button variant=\"icon\" id=\"receipt\" icon_name=\"reciept\" class=\"\" style={{ '--icon-size': '1.65rem' }}></ir-button>}\r\n            {this.hasPrint && <ir-button variant=\"icon\" id=\"print\" icon_name=\"print\" class=\"\" style={{ '--icon-size': '1.65rem' }}></ir-button>}\r\n            {this.hasEmail && <ir-button variant=\"icon\" id=\"email\" title=\"Email this booking\" icon_name=\"email\" class=\"\" style={{ '--icon-size': '1.65rem' }}></ir-button>}\r\n            {this.hasDelete && <ir-button variant=\"icon\" id=\"book-delete\" icon_name=\"trash\" class=\"\" style={{ ...colorVariants.danger, '--icon-size': '1.65rem' }}></ir-button>}\r\n            {this.hasMenu && <ir-button variant=\"icon\" class=\"mr-1\" id=\"menu\" icon_name=\"menu_list\" style={{ '--icon-size': '1.65rem' }}></ir-button>}\r\n\r\n            {this.hasCloseButton && (\r\n              <ir-button\r\n                id=\"close\"\r\n                variant=\"icon\"\r\n                style={{ '--icon-size': '1.65rem' }}\r\n                icon_name=\"xmark\"\r\n                class=\"ml-2\"\r\n                onClickHandler={e => {\r\n                  e.stopPropagation();\r\n                  e.stopImmediatePropagation();\r\n                  this.closeSidebar.emit(null);\r\n                }}\r\n              ></ir-button>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <ir-dialog\r\n          onOpenChange={e => {\r\n            if (!e.detail) {\r\n              this.currentDialogStatus = null;\r\n            }\r\n          }}\r\n          style={this.currentDialogStatus === 'events-log' && { '--ir-dialog-max-width': '400px' }}\r\n          ref={el => (this.dialogRef = el)}\r\n        >\r\n          {this.renderDialogBody()}\r\n        </ir-dialog>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  --icon-button-color: #6b6f82;\r\n  --icon-button-hover-color: #104064;\r\n}\r\n\r\n.button-icon {\r\n  padding: 0;\r\n  margin-top: 0;\r\n}\r\n\r\n.button-icon[data-state='loading'] {\r\n  display: none;\r\n}\r\n\r\n.button-text {\r\n  padding: 0 5px;\r\n}\r\n\r\n.bounce-3 {\r\n  animation: bounce 1s 1;\r\n}\r\n.btn-link {\r\n  color: var(--blue, #1e9ff2);\r\n}\r\n.ir-button-class {\r\n  display: inline-flex !important;\r\n  justify-content: center;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n}\r\n.btn-outline {\r\n  background: transparent;\r\n  border: 1px solid #104064;\r\n  color: #104064;\r\n}\r\n.btn-outline:hover,\r\n.btn-outline:active {\r\n  background: #104064;\r\n  color: white;\r\n}\r\n.icon-button {\r\n  all: unset;\r\n  box-sizing: border-box;\r\n  border-radius: 0.25rem;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: var(--icon-button-color);\r\n  padding: 0.2rem;\r\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n}\r\n.icon-button:hover {\r\n  color: var(--icon-button-hover-color);\r\n}\r\n.icon-button:hover.hovered_bg {\r\n  background: var('--ir-icon-bg-hover', #f6f6f6);\r\n}\r\n.icon-button:disabled {\r\n  pointer-events: none;\r\n}\r\n\r\n.icon-loader {\r\n  margin: 0;\r\n  padding: 0;\r\n  width: var(--icon-size, 1.25rem);\r\n  height: var(--icon-size, 1.25rem);\r\n  border-radius: 50%;\r\n  background: radial-gradient(farthest-side, var(--icon-button-color) 94%, #0000) top/2px 2px no-repeat, conic-gradient(#0000 30%, var(--icon-button-color));\r\n  -webkit-mask: radial-gradient(farthest-side, #0000 calc(100% - 2px), var(--icon-button-color) 0);\r\n  mask: radial-gradient(farthest-side, #0000 calc(100% - 2px), var(--icon-button-color) 0);\r\n  animation: l13 1s infinite linear;\r\n}\r\n\r\n.btn_loader {\r\n  width: 15px;\r\n  height: 10px;\r\n  --c: no-repeat linear-gradient(#ffffff 0 0);\r\n  background: var(--c) 0% 50%, var(--c) 50% 50%, var(--c) 100% 50%;\r\n  background-size: 20% 100%;\r\n  animation: l1 1s infinite linear;\r\n}\r\n\r\n@keyframes l13 {\r\n  100% {\r\n    transform: rotate(1turn);\r\n  }\r\n}\r\n\r\n@keyframes l1 {\r\n  0% {\r\n    background-size: 20% 100%, 20% 100%, 20% 100%;\r\n  }\r\n  33% {\r\n    background-size: 20% 10%, 20% 100%, 20% 100%;\r\n  }\r\n  50% {\r\n    background-size: 20% 100%, 20% 10%, 20% 100%;\r\n  }\r\n  66% {\r\n    background-size: 20% 100%, 20% 100%, 20% 10%;\r\n  }\r\n  100% {\r\n    background-size: 20% 100%, 20% 100%, 20% 100%;\r\n  }\r\n}\r\n@keyframes bounce {\r\n  0%,\r\n  100% {\r\n    transform: scale(1);\r\n    animation-timing-function: cubic-bezier(0.8, 0, 1, 1);\r\n  }\r\n  50% {\r\n    transform: scale(1.2);\r\n    animation-timing-function: cubic-bezier(0, 0, 0.2, 1);\r\n  }\r\n}\r\n@keyframes ping {\r\n  75%,\r\n  100% {\r\n    transform: scale(1.2);\r\n  }\r\n}\r\n@keyframes rotation {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n","import { Component, Prop, Event, EventEmitter, h, Listen, Method } from '@stencil/core';\r\nimport { v4 } from 'uuid';\r\nimport { TIcons } from '../ir-icons/icons';\r\n\r\n@Component({\r\n  tag: 'ir-button',\r\n  styleUrl: 'ir-button.css',\r\n  scoped: true,\r\n})\r\nexport class IrButton {\r\n  @Prop() name: string;\r\n  @Prop() text: string;\r\n  @Prop() icon = 'ft-save';\r\n  @Prop() btn_color: 'primary' | 'secondary' | 'success' | 'danger' | 'warning' | 'info' | 'light' | 'dark' | 'outline' | 'link' = 'primary';\r\n  @Prop() size: 'sm' | 'md' | 'lg' = 'md';\r\n  @Prop() textSize: 'sm' | 'md' | 'lg' = 'md';\r\n  @Prop() btn_block = true;\r\n  @Prop() btn_disabled = false;\r\n  @Prop() btn_type = 'button';\r\n  @Prop() isLoading: boolean = false;\r\n  @Prop() btn_styles: string;\r\n  @Prop() btn_id: string = v4();\r\n  @Prop() variant: 'default' | 'icon' = 'default';\r\n  @Prop() icon_name: TIcons;\r\n  @Prop() visibleBackgroundOnHover: boolean = false;\r\n  @Prop() iconPosition: 'left' | 'right' = 'left';\r\n  @Prop() icon_style: any;\r\n  @Prop() btnStyle: { [key: string]: string };\r\n  @Prop() labelStyle: { [key: string]: string };\r\n  /** If true, will render `content` as HTML */\r\n  @Prop() renderContentAsHtml: boolean = false;\r\n\r\n  @Event({ bubbles: true, composed: true }) clickHandler: EventEmitter<any>;\r\n\r\n  private buttonEl: HTMLButtonElement;\r\n\r\n  @Listen('animateIrButton', { target: 'body' })\r\n  handleButtonAnimation(e: CustomEvent) {\r\n    if (!this.buttonEl || e.detail !== this.btn_id) {\r\n      return;\r\n    }\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    this.buttonEl.classList.remove('bounce-3');\r\n    void this.buttonEl.offsetWidth;\r\n    this.buttonEl.classList.add('bounce-3');\r\n  }\r\n  @Method()\r\n  async bounce() {\r\n    this.buttonEl.classList.remove('bounce-3');\r\n    void this.buttonEl.offsetWidth;\r\n    this.buttonEl.classList.add('bounce-3');\r\n  }\r\n  render() {\r\n    const disabled = this.btn_disabled || this.isLoading;\r\n    if (this.variant === 'icon') {\r\n      return (\r\n        <button\r\n          id={this.btn_id}\r\n          class={`icon-button ${this.btn_styles} ${this.visibleBackgroundOnHover ? 'hovered_bg' : ''}`}\r\n          ref={el => (this.buttonEl = el)}\r\n          onClick={() => this.clickHandler.emit()}\r\n          type={this.btn_type}\r\n          disabled={disabled}\r\n        >\r\n          {this.isLoading ? <span class=\"icon-loader\"></span> : <ir-icons class={'m-0 p-0'} name={this.icon_name}></ir-icons>}\r\n        </button>\r\n      );\r\n    }\r\n    let blockClass = this.btn_block ? 'btn-block' : '';\r\n    return (\r\n      <button\r\n        id={this.btn_id}\r\n        ref={el => (this.buttonEl = el)}\r\n        onClick={() => this.clickHandler.emit()}\r\n        class={`btn btn-${this.btn_color} ${this.btn_styles} ir-button-class  btn-${this.size} text-${this.textSize} ${blockClass}`}\r\n        type={this.btn_type}\r\n        style={this.btnStyle}\r\n        disabled={disabled}\r\n      >\r\n        {this.icon_name && this.iconPosition === 'left' && <ir-icons name={this.icon_name} style={this.icon_style}></ir-icons>}\r\n        {this.text &&\r\n          (this.renderContentAsHtml ? (\r\n            <span class=\"button-text m-0\" innerHTML={this.text} style={this.labelStyle}></span>\r\n          ) : (\r\n            <span style={this.labelStyle} class=\"button-text m-0\">\r\n              {this.text}\r\n            </span>\r\n          ))}\r\n        {this.isLoading ? <div class=\"btn_loader m-0 p-0\"></div> : this.iconPosition === 'right' && <ir-icons style={this.icon_style} name={this.icon_name}></ir-icons>}\r\n      </button>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: flex;\r\n  align-items: center;\r\n  width: fit-content;\r\n}\r\nbutton {\r\n  all: unset;\r\n}\r\n.CheckboxRoot {\r\n  background-color: white;\r\n  width: 20px;\r\n  height: 20px;\r\n  border-radius: 4px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border: 1px solid #cacfe7;\r\n  border-radius: 4px;\r\n  transition: all 0.3s ease;\r\n}\r\n.CheckboxRoot:disabled {\r\n  background-color: #eceff1;\r\n  border-color: rgba(118, 118, 118, 0.3);\r\n  pointer-events: none;\r\n}\r\n\r\n.CheckboxRoot[data-state='checked'] {\r\n  background-color: #1e9ff2;\r\n  color: white;\r\n  border-color: #1e9ff2;\r\n}\r\ninput[type='checkbox'] {\r\n  background-color: initial;\r\n  cursor: default;\r\n  appearance: auto;\r\n  box-sizing: border-box;\r\n  margin: 3px 3px 3px 4px;\r\n  padding: initial;\r\n  border: initial;\r\n}\r\n.checkbox {\r\n  transform: translateX(-100%);\r\n  position: absolute;\r\n  pointer-events: none;\r\n  opacity: 0;\r\n  margin: 0px;\r\n  width: 20px;\r\n  height: 20px;\r\n}\r\n","import { Component, Event, EventEmitter, Host, Prop, State, Watch, h } from '@stencil/core';\r\nimport { v4 } from 'uuid';\r\n\r\n@Component({\r\n  tag: 'ir-checkbox',\r\n  styleUrl: 'ir-checkbox.css',\r\n  scoped: true,\r\n})\r\nexport class IrCheckbox {\r\n  @Prop() checked: boolean = false;\r\n  @Prop() label: string;\r\n  @Prop() checkboxId = v4();\r\n  @Prop() name: string;\r\n  @Prop() indeterminate: boolean;\r\n  @Prop() disabled: boolean;\r\n\r\n  @State() currentChecked = false;\r\n\r\n  @Event() checkChange: EventEmitter<boolean>;\r\n\r\n  @Watch('checked')\r\n  handleCheckedChange(newValue: boolean) {\r\n    if (newValue === this.currentChecked) {\r\n      return;\r\n    }\r\n    this.currentChecked = this.checked;\r\n  }\r\n\r\n  private checkboxRef: HTMLButtonElement;\r\n\r\n  componentWillLoad() {\r\n    this.currentChecked = this.checked;\r\n  }\r\n  componentDidLoad() {\r\n    if (this.checkboxRef) {\r\n      this.checkboxRef.setAttribute('aria-checked', JSON.stringify(this.checked));\r\n    }\r\n  }\r\n  handleCheckChange() {\r\n    this.currentChecked = !this.currentChecked;\r\n    if (this.checkboxRef) {\r\n      this.checkboxRef.setAttribute('aria-checked', JSON.stringify(this.currentChecked));\r\n    }\r\n    this.checkChange.emit(this.currentChecked);\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <button\r\n          disabled={this.disabled}\r\n          name={this.name}\r\n          onClick={this.handleCheckChange.bind(this)}\r\n          id={this.checkboxId}\r\n          data-state={this.currentChecked || this.indeterminate ? 'checked' : 'unchecked'}\r\n          value={'on'}\r\n          ref={ref => (this.checkboxRef = ref)}\r\n          type=\"button\"\r\n          role=\"checkbox\"\r\n          class=\"CheckboxRoot\"\r\n        >\r\n          {this.currentChecked && (\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\r\n              <path\r\n                fill=\"currentColor\"\r\n                d=\"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\r\n              />\r\n            </svg>\r\n          )}\r\n          {this.indeterminate && (\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\r\n              <path fill=\"currentColor\" d=\"M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z\" />\r\n            </svg>\r\n          )}\r\n        </button>\r\n        <input type=\"checkbox\" indeterminate={this.indeterminate} aria-hidden=\"true\" tabindex=\"-1\" value=\"on\" checked={this.currentChecked} class=\"checkbox\" />\r\n        {this.label && <label htmlFor={this.checkboxId}>{this.label}</label>}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  position: relative;\r\n  padding: 0;\r\n  margin: 0;\r\n  box-sizing: border-box;\r\n}\r\nul {\r\n  position: absolute;\r\n  box-sizing: border-box;\r\n  margin: 0;\r\n  margin-top: 2px;\r\n  width: max-content;\r\n  max-height: 80px;\r\n  border-radius: 0.21rem;\r\n  z-index: 10000;\r\n  padding: 1px;\r\n  background: white;\r\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\r\n  padding: 5px 0;\r\n  max-height: 250px;\r\n  overflow-y: auto;\r\n  min-width: 100%;\r\n}\r\nul[data-position='bottom-right'] {\r\n  right: 0;\r\n}\r\n.list-item-image {\r\n  height: 1rem;\r\n  aspect-ratio: 4/3;\r\n  border-radius: 4px;\r\n  margin-right: 10px;\r\n}\r\n.dropdown-item {\r\n  cursor: pointer;\r\n}\r\nul li,\r\nspan,\r\nloader-container {\r\n  padding: 0px 16px;\r\n  margin: 0px;\r\n  margin-top: 2px;\r\n  width: 100%;\r\n  border-radius: 2px;\r\n}\r\nul li {\r\n  cursor: pointer;\r\n}\r\nul li {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n  gap: 3px;\r\n}\r\nul li p {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\nul li:hover {\r\n  background: #f4f5fa;\r\n}\r\n\r\nul li[data-selected],\r\nul li[data-selected]:hover {\r\n  color: #fff;\r\n  text-decoration: none;\r\n  background-color: #666ee8;\r\n}\r\n","import { IToast } from '@/components';\r\nimport locales from '@/stores/locales.store';\r\nimport { Component, Prop, State, h, Element, Event, EventEmitter, Listen, Watch, Fragment } from '@stencil/core';\r\nimport { v4 } from 'uuid';\r\n\r\nexport type ComboboxItem = { id: string; name: string; image?: string; occupancy?: number };\r\n@Component({\r\n  tag: 'ir-combobox',\r\n  styleUrl: 'ir-combobox.css',\r\n  scoped: true,\r\n})\r\nexport class IrCombobox {\r\n  @Prop({ mutable: true }) data: ComboboxItem[] = [];\r\n  @Prop() duration: number = 300;\r\n  @Prop() placeholder: string;\r\n  @Prop() value: string;\r\n  @Prop() disabled: boolean = false;\r\n  @Prop() autoFocus: boolean = false;\r\n  @Prop() input_id: string = v4();\r\n\r\n  @State() selectedIndex: number = -1;\r\n  @State() actualIndex: number = -1;\r\n  @State() isComboBoxVisible: boolean = false;\r\n  @State() isLoading: boolean = true;\r\n  @State() isItemSelected: boolean;\r\n  @State() inputValue: string = '';\r\n  @State() filteredData: ComboboxItem[] = [];\r\n\r\n  @Element() el: HTMLElement;\r\n  @Event({ bubbles: true, composed: true }) comboboxValueChange: EventEmitter<{ key: string; data: unknown }>;\r\n  @Event() inputCleared: EventEmitter<null>;\r\n  @Event({ bubbles: true, composed: true }) toast: EventEmitter<IToast>;\r\n  @State() componentShouldAutoFocus: boolean = false;\r\n  private inputRef: HTMLInputElement;\r\n  private debounceTimer: any;\r\n  private blurTimout: NodeJS.Timeout;\r\n  componentWillLoad() {\r\n    this.filteredData = this.data;\r\n  }\r\n  componentDidLoad() {\r\n    if (this.autoFocus) {\r\n      this.focusInput();\r\n    }\r\n  }\r\n\r\n  @Watch('isComboBoxVisible')\r\n  watchHandler(newValue: boolean, oldValue: boolean) {\r\n    if (newValue !== oldValue && newValue === true) {\r\n      this.focusInput();\r\n    }\r\n  }\r\n  handleKeyDown(event: KeyboardEvent) {\r\n    const dataSize = this.filteredData.length;\r\n    if (dataSize > 0) {\r\n      switch (event.key) {\r\n        case 'ArrowUp':\r\n          event.preventDefault();\r\n          this.selectedIndex = (this.selectedIndex - 1 + dataSize) % dataSize;\r\n          this.adjustScrollPosition();\r\n          break;\r\n        case 'ArrowDown':\r\n          event.preventDefault();\r\n          this.selectedIndex = (this.selectedIndex + 1) % dataSize;\r\n          this.adjustScrollPosition();\r\n          break;\r\n        // case 'Enter':\r\n        // case ' ':\r\n        // case 'ArrowRight':\r\n        //   event.preventDefault();\r\n        //   this.selectItem(this.selectedIndex);\r\n        //   break;\r\n        case 'Escape':\r\n          this.inputRef?.blur();\r\n          this.isComboBoxVisible = false;\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  focusInput() {\r\n    requestAnimationFrame(() => {\r\n      this.inputRef?.focus();\r\n    });\r\n  }\r\n\r\n  adjustScrollPosition() {\r\n    const selectedItem = this.el?.querySelector(`[data-selected]`);\r\n    if (!selectedItem) return;\r\n    selectedItem.scrollIntoView({\r\n      block: 'center',\r\n    });\r\n  }\r\n\r\n  selectItem(index) {\r\n    if (this.filteredData[index]) {\r\n      this.isItemSelected = true;\r\n      this.comboboxValueChange.emit({ key: 'select', data: this.filteredData[index].id });\r\n      this.inputValue = '';\r\n      this.resetCombobox();\r\n      if (this.autoFocus) {\r\n        this.focusInput();\r\n      }\r\n    }\r\n  }\r\n\r\n  debounceFetchData() {\r\n    clearTimeout(this.debounceTimer);\r\n    this.debounceTimer = setTimeout(() => {\r\n      this.fetchData();\r\n    }, this.duration);\r\n  }\r\n  handleFocus() {\r\n    this.isComboBoxVisible = true;\r\n  }\r\n  clearInput() {\r\n    this.inputValue = '';\r\n    this.resetCombobox();\r\n    this.inputCleared.emit(null);\r\n  }\r\n  resetCombobox(withblur: boolean = true) {\r\n    if (withblur) {\r\n      this.inputRef?.blur();\r\n    }\r\n    this.selectedIndex = -1;\r\n    this.isComboBoxVisible = false;\r\n  }\r\n  async fetchData() {\r\n    try {\r\n      this.isLoading = true;\r\n      this.filteredData = this.data.filter(d => d.name.toLowerCase().startsWith(this.inputValue));\r\n      this.selectedIndex = -1;\r\n    } catch (error) {\r\n      console.log('error', error);\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n\r\n  handleInputChange(event: Event) {\r\n    this.inputValue = (event.target as HTMLInputElement).value;\r\n    if (this.inputValue) {\r\n      this.debounceFetchData();\r\n    } else {\r\n      this.filteredData = this.data;\r\n    }\r\n  }\r\n\r\n  @Listen('click', { target: 'document' })\r\n  handleDocumentClick(event: MouseEvent) {\r\n    const target = event.target as HTMLElement;\r\n    if (!this.el.contains(target)) {\r\n      this.isComboBoxVisible = false;\r\n    }\r\n  }\r\n\r\n  handleBlur() {\r\n    this.blurTimout = setTimeout(() => {\r\n      if (!this.isItemSelected) {\r\n        this.inputValue = '';\r\n        this.resetCombobox();\r\n      } else {\r\n        this.isItemSelected = false;\r\n      }\r\n    }, 300);\r\n  }\r\n  isDropdownItem(element) {\r\n    return element && element.closest('.combobox');\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    clearTimeout(this.debounceTimer);\r\n    clearTimeout(this.blurTimout);\r\n    this.inputRef?.removeEventListener('blur', this.handleBlur);\r\n    this.inputRef?.removeEventListener('click', this.selectItem);\r\n    this.inputRef?.removeEventListener('keydown', this.handleKeyDown);\r\n    this.inputRef?.removeEventListener('focus', this.handleFocus);\r\n  }\r\n  handleItemKeyDown(event: KeyboardEvent, index: number) {\r\n    if (event.key === 'Enter' || event.key === ' ' || event.key === 'ArrowRight') {\r\n      this.selectItem(index);\r\n      event.preventDefault();\r\n    } else if (event.key === 'Escape') {\r\n      this.isComboBoxVisible = false;\r\n      this.inputRef?.blur();\r\n      event.preventDefault();\r\n    }\r\n  }\r\n  renderDropdown() {\r\n    if (!this.isComboBoxVisible) {\r\n      return null;\r\n    }\r\n    return (\r\n      <ul data-position={this.filteredData.length > 0 && this.filteredData[0].occupancy ? 'bottom-right' : 'bottom-left'}>\r\n        {this.filteredData?.map((d, index) => (\r\n          <li\r\n            onMouseEnter={() => (this.selectedIndex = index)}\r\n            role=\"button\"\r\n            key={d.id}\r\n            onKeyDown={e => this.handleItemKeyDown(e, index)}\r\n            data-selected={this.selectedIndex === index}\r\n            tabIndex={0}\r\n            onClick={() => this.selectItem(index)}\r\n          >\r\n            {d.image && <img src={d.image} class={'list-item-image'}></img>}\r\n            <p>{d.name}</p>\r\n            {d.occupancy && (\r\n              <Fragment>\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\r\n                  <path\r\n                    fill={'currentColor'}\r\n                    d=\"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z\"\r\n                  />\r\n                </svg>\r\n                <p>{d.occupancy}</p>\r\n              </Fragment>\r\n            )}\r\n          </li>\r\n        ))}\r\n\r\n        {this.filteredData.length === 0 && !this.isLoading && <span class={'text-center'}>{locales.entries.Lcz_NoResultsFound}</span>}\r\n      </ul>\r\n    );\r\n  }\r\n  handleSubmit(e: Event) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    console.log('object');\r\n    if (!this.filteredData.length) {\r\n      return;\r\n    }\r\n    this.selectItem(this.selectedIndex === -1 ? 0 : this.selectedIndex);\r\n  }\r\n  render() {\r\n    return (\r\n      <form onSubmit={this.handleSubmit.bind(this)} class=\"m-0 p-0\">\r\n        <input\r\n          type=\"text\"\r\n          class=\"form-control bg-white\"\r\n          id={this.input_id}\r\n          ref={el => (this.inputRef = el)}\r\n          disabled={this.disabled}\r\n          value={this.value}\r\n          placeholder={this.placeholder}\r\n          onKeyDown={this.handleKeyDown.bind(this)}\r\n          onBlur={this.handleBlur.bind(this)}\r\n          onInput={this.handleInputChange.bind(this)}\r\n          onFocus={this.handleFocus.bind(this)}\r\n          autoFocus={this.autoFocus}\r\n        />\r\n\r\n        {this.renderDropdown()}\r\n      </form>\r\n    );\r\n  }\r\n}\r\n","import { IrOnlineResource } from './models';\r\nexport const onlineResources: IrOnlineResource[] = [\r\n  // {\r\n  //   isJS: true,\r\n  //   link: \"https://x.igloorooms.com/manage/micro/app-assets/required/assets/scripts/jquery.min.js\",\r\n  // },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i%7CQuicksand:300,400,500,700',\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://x.igloorooms.com/app-assets/css/bootstrap.css',\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://x.igloorooms.com/app-assets/css/bootstrap-extended.css',\r\n  },\r\n  { isCSS: true, link: 'https://x.igloorooms.com/app-assets/css/colors.css' },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://x.igloorooms.com/app-assets/css/core/menu/menu-types/horizontal-menu.css',\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://x.igloorooms.com/app-assets/css/core/colors/palette-gradient.css',\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://x.igloorooms.com/app-assets/css/components.css',\r\n  },\r\n  { isCSS: true, link: 'https://x.igloorooms.com/assets/css/style.css' },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/icheck.css',\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/custom.css',\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://x.igloorooms.com/app-assets/css/pages/login-register.css',\r\n  },\r\n  // {\r\n  //   isCSS: true,\r\n  //   link: 'https://x.igloorooms.com/manage/micro/app-assets/required/assets/scripts/daterangepicker/daterangepicker.css',\r\n  // },\r\n\r\n  // {\r\n  //   isJS: true,\r\n  //   link: \"https://x.igloorooms.com/manage/micro/app-assets/required/assets/scripts/daterangepicker/moment.min.js\",\r\n  // },\r\n  // {\r\n  //   isJS: true,\r\n  //   link: \"https://x.igloorooms.com/manage/micro/app-assets/required/assets/scripts/daterangepicker/daterangepicker.js\",\r\n  // },\r\n];\r\n","import { Component, Host, Prop, State, Watch, h } from '@stencil/core';\r\nimport { IrOnlineResource } from '../../common/models';\r\nimport { onlineResources } from '../../common/ir.common.resources';\r\n\r\n@Component({\r\n  tag: 'ir-common',\r\n})\r\nexport class IrCommon {\r\n  @Prop({ reflect: true }) extraResources: string = '';\r\n  @State() resources: IrOnlineResource[] = onlineResources;\r\n  componentWillLoad() {\r\n    this.parseRefs();\r\n  }\r\n\r\n  componentDidLoad() {\r\n    this.initializeStyles();\r\n  }\r\n\r\n  @Watch('extraResources')\r\n  hrefsChanged() {\r\n    this.parseRefs();\r\n    this.initializeStyles();\r\n  }\r\n\r\n  private parseRefs() {\r\n    if (this.extraResources !== '') this.resources.push(JSON.parse(this.extraResources));\r\n  }\r\n\r\n  private appendTag(tagName: string, attributes: any) {\r\n    const tag = document.createElement(tagName);\r\n    const selectorParts = [];\r\n\r\n    Object.keys(attributes).forEach(attr => {\r\n      tag.setAttribute(attr, attributes[attr]);\r\n      selectorParts.push(`[${attr}=\"${attributes[attr]}\"]`);\r\n    });\r\n\r\n    const selector = `${tagName}${selectorParts.join('')}`;\r\n    const existingTag = document.querySelector(selector);\r\n\r\n    if (!existingTag) {\r\n      document.head.appendChild(tag);\r\n    }\r\n  }\r\n\r\n  private initializeStyles() {\r\n    this.resources.forEach(res => {\r\n      if (res.isCSS) {\r\n        this.appendTag('link', {\r\n          href: res.link,\r\n          rel: 'stylesheet',\r\n          type: 'text/css',\r\n        });\r\n      }\r\n      if (res.isJS) {\r\n        this.appendTag('script', {\r\n          src: res.link,\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <slot></slot>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  margin: 0;\r\n  padding: 0;\r\n  box-sizing: border-box;\r\n}\r\n.combobox-menu {\r\n  max-height: 200px;\r\n  overflow: auto;\r\n}\r\n","import { ICountry } from '@/models/IBooking';\r\nimport { Component, Event, EventEmitter, Fragment, Prop, State, Watch, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-country-picker',\r\n  styleUrl: 'ir-country-picker.css',\r\n  scoped: true,\r\n})\r\nexport class IrCountryPicker {\r\n  @Prop() countries: ICountry[] = [];\r\n  @Prop() country: ICountry;\r\n  @Prop({ mutable: true }) error: boolean;\r\n  @Prop() propertyCountry: ICountry;\r\n  @Prop() label: string;\r\n  @Prop() testId: string;\r\n  @Prop() autoValidate: boolean = false;\r\n\r\n  @State() inputValue: string;\r\n  @State() selectedCountry: ICountry;\r\n  @State() filteredCountries: ICountry[] = [];\r\n  @State() searching: boolean = false;\r\n\r\n  @Event() countryChange: EventEmitter<ICountry>;\r\n\r\n  private debounceTimeout: NodeJS.Timeout;\r\n\r\n  componentWillLoad() {\r\n    this.filteredCountries = [...this.countries];\r\n    if (this.country) {\r\n      this.inputValue = this.country.name;\r\n      this.selectedCountry = this.country;\r\n    }\r\n  }\r\n\r\n  @Watch('country')\r\n  handleCountryChange(newCountry: ICountry, oldCountry: ICountry) {\r\n    if (newCountry?.id !== oldCountry?.id) {\r\n      this.inputValue = this.country?.name;\r\n      this.selectedCountry = newCountry;\r\n    }\r\n  }\r\n\r\n  private filterCountries() {\r\n    if (this.inputValue === '' && this.country) {\r\n      this.selectCountry(null);\r\n    }\r\n    clearTimeout(this.debounceTimeout);\r\n    this.debounceTimeout = setTimeout(() => {\r\n      if (!this.inputValue) {\r\n        this.filteredCountries = [...this.countries];\r\n      } else {\r\n        this.filteredCountries = this.countries.filter(c => c.name.toLowerCase().includes(this.inputValue.toLowerCase()));\r\n      }\r\n    }, 300);\r\n  }\r\n\r\n  private selectCountry(c: ICountry | null) {\r\n    this.selectedCountry = c;\r\n    this.inputValue = c?.name;\r\n    this.filteredCountries = [...this.countries];\r\n    this.countryChange.emit(c);\r\n  }\r\n  private scrollToSelected() {\r\n    setTimeout(() => {\r\n      const dropdownItem = document.querySelector(`.dropdown-item.active`);\r\n      if (dropdownItem) {\r\n        dropdownItem.scrollIntoView({ behavior: 'instant', block: 'center' });\r\n      }\r\n    }, 100);\r\n  }\r\n  render() {\r\n    const shouldShowPropertyCountry = this.filteredCountries.length > 0 && this.propertyCountry && (!this.searching || (this.searching && this.inputValue === ''));\r\n    return (\r\n      <form class=\"dropdown m-0 p-0\">\r\n        <ir-input-text\r\n          onTextChange={e => {\r\n            if (!this.searching) {\r\n              this.searching = true;\r\n            }\r\n            this.inputValue = e.detail;\r\n            this.filterCountries();\r\n          }}\r\n          testId={this.testId}\r\n          autoValidate={this.autoValidate}\r\n          label={this.label}\r\n          error={this.error}\r\n          placeholder=\"\"\r\n          class=\"m-0 p-0\"\r\n          value={this.inputValue}\r\n          id=\"dropdownMenuCombobox\"\r\n          data-toggle=\"dropdown\"\r\n          aria-haspopup=\"true\"\r\n          aria-expanded=\"false\"\r\n          onInputFocus={() => this.scrollToSelected()}\r\n          onInputBlur={() => {\r\n            this.searching = false;\r\n            if (this.filteredCountries.length > 0 && this.inputValue && this.inputValue.trim() !== '') {\r\n              this.selectCountry(this.filteredCountries[0]);\r\n            }\r\n          }}\r\n        ></ir-input-text>\r\n\r\n        <div class=\"dropdown-menu combobox-menu\" aria-labelledby=\"dropdownMenuCombobox\">\r\n          {shouldShowPropertyCountry && (\r\n            <Fragment>\r\n              <button\r\n                type=\"button\"\r\n                class={`dropdown-item d-flex align-items-center ${this.selectedCountry?.id === this.propertyCountry.id ? 'active' : ''}`}\r\n                onClick={() => {\r\n                  this.selectCountry(this.propertyCountry);\r\n                }}\r\n              >\r\n                <img src={this.propertyCountry.flag} alt={this.propertyCountry.name} style={{ aspectRatio: '1', height: '15px', borderRadius: '4px' }} />\r\n                <p class=\"pl-1 m-0\">{this.propertyCountry.name}</p>\r\n              </button>\r\n              <div class=\"dropdown-divider\"></div>\r\n            </Fragment>\r\n          )}\r\n          {this.filteredCountries?.map(c => (\r\n            <button\r\n              key={c.id}\r\n              type=\"button\"\r\n              class={`dropdown-item d-flex align-items-center ${this.selectedCountry?.id === c.id ? 'active' : ''}`}\r\n              onClick={() => {\r\n                this.selectCountry(c);\r\n              }}\r\n            >\r\n              <img src={c.flag} alt={c.name} style={{ aspectRatio: '1', height: '15px', borderRadius: '4px' }} />\r\n              <p class=\"pl-1 m-0\">{c.name}</p>\r\n            </button>\r\n          ))}\r\n          {this.filteredCountries?.length === 0 && <p class=\"dropdown-item-text\">Invalid Country</p>}\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n","export var top = 'top';\nexport var bottom = 'bottom';\nexport var right = 'right';\nexport var left = 'left';\nexport var auto = 'auto';\nexport var basePlacements = [top, bottom, right, left];\nexport var start = 'start';\nexport var end = 'end';\nexport var clippingParents = 'clippingParents';\nexport var viewport = 'viewport';\nexport var popper = 'popper';\nexport var reference = 'reference';\nexport var variationPlacements = /*#__PURE__*/basePlacements.reduce(function (acc, placement) {\n  return acc.concat([placement + \"-\" + start, placement + \"-\" + end]);\n}, []);\nexport var placements = /*#__PURE__*/[].concat(basePlacements, [auto]).reduce(function (acc, placement) {\n  return acc.concat([placement, placement + \"-\" + start, placement + \"-\" + end]);\n}, []); // modifiers that need to read the DOM\n\nexport var beforeRead = 'beforeRead';\nexport var read = 'read';\nexport var afterRead = 'afterRead'; // pure-logic modifiers\n\nexport var beforeMain = 'beforeMain';\nexport var main = 'main';\nexport var afterMain = 'afterMain'; // modifier with the purpose to write to the DOM (or write into a framework state)\n\nexport var beforeWrite = 'beforeWrite';\nexport var write = 'write';\nexport var afterWrite = 'afterWrite';\nexport var modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];","export default function getNodeName(element) {\n  return element ? (element.nodeName || '').toLowerCase() : null;\n}","export default function getWindow(node) {\n  if (node == null) {\n    return window;\n  }\n\n  if (node.toString() !== '[object Window]') {\n    var ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView || window : window;\n  }\n\n  return node;\n}","import getWindow from \"./getWindow.js\";\n\nfunction isElement(node) {\n  var OwnElement = getWindow(node).Element;\n  return node instanceof OwnElement || node instanceof Element;\n}\n\nfunction isHTMLElement(node) {\n  var OwnElement = getWindow(node).HTMLElement;\n  return node instanceof OwnElement || node instanceof HTMLElement;\n}\n\nfunction isShadowRoot(node) {\n  // IE 11 has no ShadowRoot\n  if (typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n\n  var OwnElement = getWindow(node).ShadowRoot;\n  return node instanceof OwnElement || node instanceof ShadowRoot;\n}\n\nexport { isElement, isHTMLElement, isShadowRoot };","import getNodeName from \"../dom-utils/getNodeName.js\";\nimport { isHTMLElement } from \"../dom-utils/instanceOf.js\"; // This modifier takes the styles prepared by the `computeStyles` modifier\n// and applies them to the HTMLElements such as popper and arrow\n\nfunction applyStyles(_ref) {\n  var state = _ref.state;\n  Object.keys(state.elements).forEach(function (name) {\n    var style = state.styles[name] || {};\n    var attributes = state.attributes[name] || {};\n    var element = state.elements[name]; // arrow is optional + virtual elements\n\n    if (!isHTMLElement(element) || !getNodeName(element)) {\n      return;\n    } // Flow doesn't support to extend this property, but it's the most\n    // effective way to apply styles to an HTMLElement\n    // $FlowFixMe[cannot-write]\n\n\n    Object.assign(element.style, style);\n    Object.keys(attributes).forEach(function (name) {\n      var value = attributes[name];\n\n      if (value === false) {\n        element.removeAttribute(name);\n      } else {\n        element.setAttribute(name, value === true ? '' : value);\n      }\n    });\n  });\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state;\n  var initialStyles = {\n    popper: {\n      position: state.options.strategy,\n      left: '0',\n      top: '0',\n      margin: '0'\n    },\n    arrow: {\n      position: 'absolute'\n    },\n    reference: {}\n  };\n  Object.assign(state.elements.popper.style, initialStyles.popper);\n  state.styles = initialStyles;\n\n  if (state.elements.arrow) {\n    Object.assign(state.elements.arrow.style, initialStyles.arrow);\n  }\n\n  return function () {\n    Object.keys(state.elements).forEach(function (name) {\n      var element = state.elements[name];\n      var attributes = state.attributes[name] || {};\n      var styleProperties = Object.keys(state.styles.hasOwnProperty(name) ? state.styles[name] : initialStyles[name]); // Set all values to an empty string to unset them\n\n      var style = styleProperties.reduce(function (style, property) {\n        style[property] = '';\n        return style;\n      }, {}); // arrow is optional + virtual elements\n\n      if (!isHTMLElement(element) || !getNodeName(element)) {\n        return;\n      }\n\n      Object.assign(element.style, style);\n      Object.keys(attributes).forEach(function (attribute) {\n        element.removeAttribute(attribute);\n      });\n    });\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'applyStyles',\n  enabled: true,\n  phase: 'write',\n  fn: applyStyles,\n  effect: effect,\n  requires: ['computeStyles']\n};","import { auto } from \"../enums.js\";\nexport default function getBasePlacement(placement) {\n  return placement.split('-')[0];\n}","export var max = Math.max;\nexport var min = Math.min;\nexport var round = Math.round;","export default function getUAString() {\n  var uaData = navigator.userAgentData;\n\n  if (uaData != null && uaData.brands && Array.isArray(uaData.brands)) {\n    return uaData.brands.map(function (item) {\n      return item.brand + \"/\" + item.version;\n    }).join(' ');\n  }\n\n  return navigator.userAgent;\n}","import getUAString from \"../utils/userAgent.js\";\nexport default function isLayoutViewport() {\n  return !/^((?!chrome|android).)*safari/i.test(getUAString());\n}","import { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport { round } from \"../utils/math.js\";\nimport getWindow from \"./getWindow.js\";\nimport isLayoutViewport from \"./isLayoutViewport.js\";\nexport default function getBoundingClientRect(element, includeScale, isFixedStrategy) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n\n  var clientRect = element.getBoundingClientRect();\n  var scaleX = 1;\n  var scaleY = 1;\n\n  if (includeScale && isHTMLElement(element)) {\n    scaleX = element.offsetWidth > 0 ? round(clientRect.width) / element.offsetWidth || 1 : 1;\n    scaleY = element.offsetHeight > 0 ? round(clientRect.height) / element.offsetHeight || 1 : 1;\n  }\n\n  var _ref = isElement(element) ? getWindow(element) : window,\n      visualViewport = _ref.visualViewport;\n\n  var addVisualOffsets = !isLayoutViewport() && isFixedStrategy;\n  var x = (clientRect.left + (addVisualOffsets && visualViewport ? visualViewport.offsetLeft : 0)) / scaleX;\n  var y = (clientRect.top + (addVisualOffsets && visualViewport ? visualViewport.offsetTop : 0)) / scaleY;\n  var width = clientRect.width / scaleX;\n  var height = clientRect.height / scaleY;\n  return {\n    width: width,\n    height: height,\n    top: y,\n    right: x + width,\n    bottom: y + height,\n    left: x,\n    x: x,\n    y: y\n  };\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\"; // Returns the layout rect of an element relative to its offsetParent. Layout\n// means it doesn't take into account transforms.\n\nexport default function getLayoutRect(element) {\n  var clientRect = getBoundingClientRect(element); // Use the clientRect sizes if it's not been transformed.\n  // Fixes https://github.com/popperjs/popper-core/issues/1223\n\n  var width = element.offsetWidth;\n  var height = element.offsetHeight;\n\n  if (Math.abs(clientRect.width - width) <= 1) {\n    width = clientRect.width;\n  }\n\n  if (Math.abs(clientRect.height - height) <= 1) {\n    height = clientRect.height;\n  }\n\n  return {\n    x: element.offsetLeft,\n    y: element.offsetTop,\n    width: width,\n    height: height\n  };\n}","import { isShadowRoot } from \"./instanceOf.js\";\nexport default function contains(parent, child) {\n  var rootNode = child.getRootNode && child.getRootNode(); // First, attempt with faster native method\n\n  if (parent.contains(child)) {\n    return true;\n  } // then fallback to custom implementation with Shadow DOM support\n  else if (rootNode && isShadowRoot(rootNode)) {\n      var next = child;\n\n      do {\n        if (next && parent.isSameNode(next)) {\n          return true;\n        } // $FlowFixMe[prop-missing]: need a better way to handle this...\n\n\n        next = next.parentNode || next.host;\n      } while (next);\n    } // Give up, the result is false\n\n\n  return false;\n}","import getWindow from \"./getWindow.js\";\nexport default function getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}","import getNodeName from \"./getNodeName.js\";\nexport default function isTableElement(element) {\n  return ['table', 'td', 'th'].indexOf(getNodeName(element)) >= 0;\n}","import { isElement } from \"./instanceOf.js\";\nexport default function getDocumentElement(element) {\n  // $FlowFixMe[incompatible-return]: assume body is always available\n  return ((isElement(element) ? element.ownerDocument : // $FlowFixMe[prop-missing]\n  element.document) || window.document).documentElement;\n}","import getNodeName from \"./getNodeName.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport { isShadowRoot } from \"./instanceOf.js\";\nexport default function getParentNode(element) {\n  if (getNodeName(element) === 'html') {\n    return element;\n  }\n\n  return (// this is a quicker (but less type safe) way to save quite some bytes from the bundle\n    // $FlowFixMe[incompatible-return]\n    // $FlowFixMe[prop-missing]\n    element.assignedSlot || // step into the shadow DOM of the parent of a slotted node\n    element.parentNode || ( // DOM Element detected\n    isShadowRoot(element) ? element.host : null) || // ShadowRoot detected\n    // $FlowFixMe[incompatible-call]: HTMLElement is a Node\n    getDocumentElement(element) // fallback\n\n  );\n}","import getWindow from \"./getWindow.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isHTMLElement, isShadowRoot } from \"./instanceOf.js\";\nimport isTableElement from \"./isTableElement.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getUAString from \"../utils/userAgent.js\";\n\nfunction getTrueOffsetParent(element) {\n  if (!isHTMLElement(element) || // https://github.com/popperjs/popper-core/issues/837\n  getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n\n  return element.offsetParent;\n} // `.offsetParent` reports `null` for fixed elements, while absolute elements\n// return the containing block\n\n\nfunction getContainingBlock(element) {\n  var isFirefox = /firefox/i.test(getUAString());\n  var isIE = /Trident/i.test(getUAString());\n\n  if (isIE && isHTMLElement(element)) {\n    // In IE 9, 10 and 11 fixed elements containing block is always established by the viewport\n    var elementCss = getComputedStyle(element);\n\n    if (elementCss.position === 'fixed') {\n      return null;\n    }\n  }\n\n  var currentNode = getParentNode(element);\n\n  if (isShadowRoot(currentNode)) {\n    currentNode = currentNode.host;\n  }\n\n  while (isHTMLElement(currentNode) && ['html', 'body'].indexOf(getNodeName(currentNode)) < 0) {\n    var css = getComputedStyle(currentNode); // This is non-exhaustive but covers the most common CSS properties that\n    // create a containing block.\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n\n    if (css.transform !== 'none' || css.perspective !== 'none' || css.contain === 'paint' || ['transform', 'perspective'].indexOf(css.willChange) !== -1 || isFirefox && css.willChange === 'filter' || isFirefox && css.filter && css.filter !== 'none') {\n      return currentNode;\n    } else {\n      currentNode = currentNode.parentNode;\n    }\n  }\n\n  return null;\n} // Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\n\n\nexport default function getOffsetParent(element) {\n  var window = getWindow(element);\n  var offsetParent = getTrueOffsetParent(element);\n\n  while (offsetParent && isTableElement(offsetParent) && getComputedStyle(offsetParent).position === 'static') {\n    offsetParent = getTrueOffsetParent(offsetParent);\n  }\n\n  if (offsetParent && (getNodeName(offsetParent) === 'html' || getNodeName(offsetParent) === 'body' && getComputedStyle(offsetParent).position === 'static')) {\n    return window;\n  }\n\n  return offsetParent || getContainingBlock(element) || window;\n}","export default function getMainAxisFromPlacement(placement) {\n  return ['top', 'bottom'].indexOf(placement) >= 0 ? 'x' : 'y';\n}","import { max as mathMax, min as mathMin } from \"./math.js\";\nexport function within(min, value, max) {\n  return mathMax(min, mathMin(value, max));\n}\nexport function withinMaxClamp(min, value, max) {\n  var v = within(min, value, max);\n  return v > max ? max : v;\n}","export default function getFreshSideObject() {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  };\n}","import getFreshSideObject from \"./getFreshSideObject.js\";\nexport default function mergePaddingObject(paddingObject) {\n  return Object.assign({}, getFreshSideObject(), paddingObject);\n}","export default function expandToHashMap(value, keys) {\n  return keys.reduce(function (hashMap, key) {\n    hashMap[key] = value;\n    return hashMap;\n  }, {});\n}","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport contains from \"../dom-utils/contains.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport { within } from \"../utils/within.js\";\nimport mergePaddingObject from \"../utils/mergePaddingObject.js\";\nimport expandToHashMap from \"../utils/expandToHashMap.js\";\nimport { left, right, basePlacements, top, bottom } from \"../enums.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar toPaddingObject = function toPaddingObject(padding, state) {\n  padding = typeof padding === 'function' ? padding(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : padding;\n  return mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n};\n\nfunction arrow(_ref) {\n  var _state$modifiersData$;\n\n  var state = _ref.state,\n      name = _ref.name,\n      options = _ref.options;\n  var arrowElement = state.elements.arrow;\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var basePlacement = getBasePlacement(state.placement);\n  var axis = getMainAxisFromPlacement(basePlacement);\n  var isVertical = [left, right].indexOf(basePlacement) >= 0;\n  var len = isVertical ? 'height' : 'width';\n\n  if (!arrowElement || !popperOffsets) {\n    return;\n  }\n\n  var paddingObject = toPaddingObject(options.padding, state);\n  var arrowRect = getLayoutRect(arrowElement);\n  var minProp = axis === 'y' ? top : left;\n  var maxProp = axis === 'y' ? bottom : right;\n  var endDiff = state.rects.reference[len] + state.rects.reference[axis] - popperOffsets[axis] - state.rects.popper[len];\n  var startDiff = popperOffsets[axis] - state.rects.reference[axis];\n  var arrowOffsetParent = getOffsetParent(arrowElement);\n  var clientSize = arrowOffsetParent ? axis === 'y' ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;\n  var centerToReference = endDiff / 2 - startDiff / 2; // Make sure the arrow doesn't overflow the popper if the center point is\n  // outside of the popper bounds\n\n  var min = paddingObject[minProp];\n  var max = clientSize - arrowRect[len] - paddingObject[maxProp];\n  var center = clientSize / 2 - arrowRect[len] / 2 + centerToReference;\n  var offset = within(min, center, max); // Prevents breaking syntax highlighting...\n\n  var axisProp = axis;\n  state.modifiersData[name] = (_state$modifiersData$ = {}, _state$modifiersData$[axisProp] = offset, _state$modifiersData$.centerOffset = offset - center, _state$modifiersData$);\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options;\n  var _options$element = options.element,\n      arrowElement = _options$element === void 0 ? '[data-popper-arrow]' : _options$element;\n\n  if (arrowElement == null) {\n    return;\n  } // CSS selector\n\n\n  if (typeof arrowElement === 'string') {\n    arrowElement = state.elements.popper.querySelector(arrowElement);\n\n    if (!arrowElement) {\n      return;\n    }\n  }\n\n  if (!contains(state.elements.popper, arrowElement)) {\n    return;\n  }\n\n  state.elements.arrow = arrowElement;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'arrow',\n  enabled: true,\n  phase: 'main',\n  fn: arrow,\n  effect: effect,\n  requires: ['popperOffsets'],\n  requiresIfExists: ['preventOverflow']\n};","export default function getVariation(placement) {\n  return placement.split('-')[1];\n}","import { top, left, right, bottom, end } from \"../enums.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getWindow from \"../dom-utils/getWindow.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getComputedStyle from \"../dom-utils/getComputedStyle.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport { round } from \"../utils/math.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar unsetSides = {\n  top: 'auto',\n  right: 'auto',\n  bottom: 'auto',\n  left: 'auto'\n}; // Round the offsets to the nearest suitable subpixel based on the DPR.\n// Zooming can change the DPR, but it seems to report a value that will\n// cleanly divide the values into the appropriate subpixels.\n\nfunction roundOffsetsByDPR(_ref, win) {\n  var x = _ref.x,\n      y = _ref.y;\n  var dpr = win.devicePixelRatio || 1;\n  return {\n    x: round(x * dpr) / dpr || 0,\n    y: round(y * dpr) / dpr || 0\n  };\n}\n\nexport function mapToStyles(_ref2) {\n  var _Object$assign2;\n\n  var popper = _ref2.popper,\n      popperRect = _ref2.popperRect,\n      placement = _ref2.placement,\n      variation = _ref2.variation,\n      offsets = _ref2.offsets,\n      position = _ref2.position,\n      gpuAcceleration = _ref2.gpuAcceleration,\n      adaptive = _ref2.adaptive,\n      roundOffsets = _ref2.roundOffsets,\n      isFixed = _ref2.isFixed;\n  var _offsets$x = offsets.x,\n      x = _offsets$x === void 0 ? 0 : _offsets$x,\n      _offsets$y = offsets.y,\n      y = _offsets$y === void 0 ? 0 : _offsets$y;\n\n  var _ref3 = typeof roundOffsets === 'function' ? roundOffsets({\n    x: x,\n    y: y\n  }) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref3.x;\n  y = _ref3.y;\n  var hasX = offsets.hasOwnProperty('x');\n  var hasY = offsets.hasOwnProperty('y');\n  var sideX = left;\n  var sideY = top;\n  var win = window;\n\n  if (adaptive) {\n    var offsetParent = getOffsetParent(popper);\n    var heightProp = 'clientHeight';\n    var widthProp = 'clientWidth';\n\n    if (offsetParent === getWindow(popper)) {\n      offsetParent = getDocumentElement(popper);\n\n      if (getComputedStyle(offsetParent).position !== 'static' && position === 'absolute') {\n        heightProp = 'scrollHeight';\n        widthProp = 'scrollWidth';\n      }\n    } // $FlowFixMe[incompatible-cast]: force type refinement, we compare offsetParent with window above, but Flow doesn't detect it\n\n\n    offsetParent = offsetParent;\n\n    if (placement === top || (placement === left || placement === right) && variation === end) {\n      sideY = bottom;\n      var offsetY = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.height : // $FlowFixMe[prop-missing]\n      offsetParent[heightProp];\n      y -= offsetY - popperRect.height;\n      y *= gpuAcceleration ? 1 : -1;\n    }\n\n    if (placement === left || (placement === top || placement === bottom) && variation === end) {\n      sideX = right;\n      var offsetX = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.width : // $FlowFixMe[prop-missing]\n      offsetParent[widthProp];\n      x -= offsetX - popperRect.width;\n      x *= gpuAcceleration ? 1 : -1;\n    }\n  }\n\n  var commonStyles = Object.assign({\n    position: position\n  }, adaptive && unsetSides);\n\n  var _ref4 = roundOffsets === true ? roundOffsetsByDPR({\n    x: x,\n    y: y\n  }, getWindow(popper)) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref4.x;\n  y = _ref4.y;\n\n  if (gpuAcceleration) {\n    var _Object$assign;\n\n    return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? '0' : '', _Object$assign[sideX] = hasX ? '0' : '', _Object$assign.transform = (win.devicePixelRatio || 1) <= 1 ? \"translate(\" + x + \"px, \" + y + \"px)\" : \"translate3d(\" + x + \"px, \" + y + \"px, 0)\", _Object$assign));\n  }\n\n  return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + \"px\" : '', _Object$assign2[sideX] = hasX ? x + \"px\" : '', _Object$assign2.transform = '', _Object$assign2));\n}\n\nfunction computeStyles(_ref5) {\n  var state = _ref5.state,\n      options = _ref5.options;\n  var _options$gpuAccelerat = options.gpuAcceleration,\n      gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat,\n      _options$adaptive = options.adaptive,\n      adaptive = _options$adaptive === void 0 ? true : _options$adaptive,\n      _options$roundOffsets = options.roundOffsets,\n      roundOffsets = _options$roundOffsets === void 0 ? true : _options$roundOffsets;\n  var commonStyles = {\n    placement: getBasePlacement(state.placement),\n    variation: getVariation(state.placement),\n    popper: state.elements.popper,\n    popperRect: state.rects.popper,\n    gpuAcceleration: gpuAcceleration,\n    isFixed: state.options.strategy === 'fixed'\n  };\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.styles.popper = Object.assign({}, state.styles.popper, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.popperOffsets,\n      position: state.options.strategy,\n      adaptive: adaptive,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  if (state.modifiersData.arrow != null) {\n    state.styles.arrow = Object.assign({}, state.styles.arrow, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.arrow,\n      position: 'absolute',\n      adaptive: false,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-placement': state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'computeStyles',\n  enabled: true,\n  phase: 'beforeWrite',\n  fn: computeStyles,\n  data: {}\n};","import getWindow from \"../dom-utils/getWindow.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar passive = {\n  passive: true\n};\n\nfunction effect(_ref) {\n  var state = _ref.state,\n      instance = _ref.instance,\n      options = _ref.options;\n  var _options$scroll = options.scroll,\n      scroll = _options$scroll === void 0 ? true : _options$scroll,\n      _options$resize = options.resize,\n      resize = _options$resize === void 0 ? true : _options$resize;\n  var window = getWindow(state.elements.popper);\n  var scrollParents = [].concat(state.scrollParents.reference, state.scrollParents.popper);\n\n  if (scroll) {\n    scrollParents.forEach(function (scrollParent) {\n      scrollParent.addEventListener('scroll', instance.update, passive);\n    });\n  }\n\n  if (resize) {\n    window.addEventListener('resize', instance.update, passive);\n  }\n\n  return function () {\n    if (scroll) {\n      scrollParents.forEach(function (scrollParent) {\n        scrollParent.removeEventListener('scroll', instance.update, passive);\n      });\n    }\n\n    if (resize) {\n      window.removeEventListener('resize', instance.update, passive);\n    }\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'eventListeners',\n  enabled: true,\n  phase: 'write',\n  fn: function fn() {},\n  effect: effect,\n  data: {}\n};","var hash = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nexport default function getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}","var hash = {\n  start: 'end',\n  end: 'start'\n};\nexport default function getOppositeVariationPlacement(placement) {\n  return placement.replace(/start|end/g, function (matched) {\n    return hash[matched];\n  });\n}","import getWindow from \"./getWindow.js\";\nexport default function getWindowScroll(node) {\n  var win = getWindow(node);\n  var scrollLeft = win.pageXOffset;\n  var scrollTop = win.pageYOffset;\n  return {\n    scrollLeft: scrollLeft,\n    scrollTop: scrollTop\n  };\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nexport default function getWindowScrollBarX(element) {\n  // If <html> has a CSS width greater than the viewport, then this will be\n  // incorrect for RTL.\n  // Popper 1 is broken in this case and never had a bug report so let's assume\n  // it's not an issue. I don't think anyone ever specifies width on <html>\n  // anyway.\n  // Browsers where the left scrollbar doesn't cause an issue report `0` for\n  // this (e.g. Edge 2019, IE11, Safari)\n  return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;\n}","import getWindow from \"./getWindow.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport isLayoutViewport from \"./isLayoutViewport.js\";\nexport default function getViewportRect(element, strategy) {\n  var win = getWindow(element);\n  var html = getDocumentElement(element);\n  var visualViewport = win.visualViewport;\n  var width = html.clientWidth;\n  var height = html.clientHeight;\n  var x = 0;\n  var y = 0;\n\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    var layoutViewport = isLayoutViewport();\n\n    if (layoutViewport || !layoutViewport && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x + getWindowScrollBarX(element),\n    y: y\n  };\n}","import getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nimport { max } from \"../utils/math.js\"; // Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable\n\nexport default function getDocumentRect(element) {\n  var _element$ownerDocumen;\n\n  var html = getDocumentElement(element);\n  var winScroll = getWindowScroll(element);\n  var body = (_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body;\n  var width = max(html.scrollWidth, html.clientWidth, body ? body.scrollWidth : 0, body ? body.clientWidth : 0);\n  var height = max(html.scrollHeight, html.clientHeight, body ? body.scrollHeight : 0, body ? body.clientHeight : 0);\n  var x = -winScroll.scrollLeft + getWindowScrollBarX(element);\n  var y = -winScroll.scrollTop;\n\n  if (getComputedStyle(body || html).direction === 'rtl') {\n    x += max(html.clientWidth, body ? body.clientWidth : 0) - width;\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x,\n    y: y\n  };\n}","import getComputedStyle from \"./getComputedStyle.js\";\nexport default function isScrollParent(element) {\n  // Firefox wants us to check `-x` and `-y` variations as well\n  var _getComputedStyle = getComputedStyle(element),\n      overflow = _getComputedStyle.overflow,\n      overflowX = _getComputedStyle.overflowX,\n      overflowY = _getComputedStyle.overflowY;\n\n  return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);\n}","import getParentNode from \"./getParentNode.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nexport default function getScrollParent(node) {\n  if (['html', 'body', '#document'].indexOf(getNodeName(node)) >= 0) {\n    // $FlowFixMe[incompatible-return]: assume body is always available\n    return node.ownerDocument.body;\n  }\n\n  if (isHTMLElement(node) && isScrollParent(node)) {\n    return node;\n  }\n\n  return getScrollParent(getParentNode(node));\n}","import getScrollParent from \"./getScrollParent.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getWindow from \"./getWindow.js\";\nimport isScrollParent from \"./isScrollParent.js\";\n/*\ngiven a DOM element, return the list of all scroll parents, up the list of ancesors\nuntil we get to the top window object. This list is what we attach scroll listeners\nto, because if any of these parent elements scroll, we'll need to re-calculate the\nreference element's position.\n*/\n\nexport default function listScrollParents(element, list) {\n  var _element$ownerDocumen;\n\n  if (list === void 0) {\n    list = [];\n  }\n\n  var scrollParent = getScrollParent(element);\n  var isBody = scrollParent === ((_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body);\n  var win = getWindow(scrollParent);\n  var target = isBody ? [win].concat(win.visualViewport || [], isScrollParent(scrollParent) ? scrollParent : []) : scrollParent;\n  var updatedList = list.concat(target);\n  return isBody ? updatedList : // $FlowFixMe[incompatible-call]: isBody tells us target will be an HTMLElement here\n  updatedList.concat(listScrollParents(getParentNode(target)));\n}","export default function rectToClientRect(rect) {\n  return Object.assign({}, rect, {\n    left: rect.x,\n    top: rect.y,\n    right: rect.x + rect.width,\n    bottom: rect.y + rect.height\n  });\n}","import { viewport } from \"../enums.js\";\nimport getViewportRect from \"./getViewportRect.js\";\nimport getDocumentRect from \"./getDocumentRect.js\";\nimport listScrollParents from \"./listScrollParents.js\";\nimport getOffsetParent from \"./getOffsetParent.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport contains from \"./contains.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport rectToClientRect from \"../utils/rectToClientRect.js\";\nimport { max, min } from \"../utils/math.js\";\n\nfunction getInnerBoundingClientRect(element, strategy) {\n  var rect = getBoundingClientRect(element, false, strategy === 'fixed');\n  rect.top = rect.top + element.clientTop;\n  rect.left = rect.left + element.clientLeft;\n  rect.bottom = rect.top + element.clientHeight;\n  rect.right = rect.left + element.clientWidth;\n  rect.width = element.clientWidth;\n  rect.height = element.clientHeight;\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n}\n\nfunction getClientRectFromMixedType(element, clippingParent, strategy) {\n  return clippingParent === viewport ? rectToClientRect(getViewportRect(element, strategy)) : isElement(clippingParent) ? getInnerBoundingClientRect(clippingParent, strategy) : rectToClientRect(getDocumentRect(getDocumentElement(element)));\n} // A \"clipping parent\" is an overflowable container with the characteristic of\n// clipping (or hiding) overflowing elements with a position different from\n// `initial`\n\n\nfunction getClippingParents(element) {\n  var clippingParents = listScrollParents(getParentNode(element));\n  var canEscapeClipping = ['absolute', 'fixed'].indexOf(getComputedStyle(element).position) >= 0;\n  var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;\n\n  if (!isElement(clipperElement)) {\n    return [];\n  } // $FlowFixMe[incompatible-return]: https://github.com/facebook/flow/issues/1414\n\n\n  return clippingParents.filter(function (clippingParent) {\n    return isElement(clippingParent) && contains(clippingParent, clipperElement) && getNodeName(clippingParent) !== 'body';\n  });\n} // Gets the maximum area that the element is visible in due to any number of\n// clipping parents\n\n\nexport default function getClippingRect(element, boundary, rootBoundary, strategy) {\n  var mainClippingParents = boundary === 'clippingParents' ? getClippingParents(element) : [].concat(boundary);\n  var clippingParents = [].concat(mainClippingParents, [rootBoundary]);\n  var firstClippingParent = clippingParents[0];\n  var clippingRect = clippingParents.reduce(function (accRect, clippingParent) {\n    var rect = getClientRectFromMixedType(element, clippingParent, strategy);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromMixedType(element, firstClippingParent, strategy));\n  clippingRect.width = clippingRect.right - clippingRect.left;\n  clippingRect.height = clippingRect.bottom - clippingRect.top;\n  clippingRect.x = clippingRect.left;\n  clippingRect.y = clippingRect.top;\n  return clippingRect;\n}","import getBasePlacement from \"./getBasePlacement.js\";\nimport getVariation from \"./getVariation.js\";\nimport getMainAxisFromPlacement from \"./getMainAxisFromPlacement.js\";\nimport { top, right, bottom, left, start, end } from \"../enums.js\";\nexport default function computeOffsets(_ref) {\n  var reference = _ref.reference,\n      element = _ref.element,\n      placement = _ref.placement;\n  var basePlacement = placement ? getBasePlacement(placement) : null;\n  var variation = placement ? getVariation(placement) : null;\n  var commonX = reference.x + reference.width / 2 - element.width / 2;\n  var commonY = reference.y + reference.height / 2 - element.height / 2;\n  var offsets;\n\n  switch (basePlacement) {\n    case top:\n      offsets = {\n        x: commonX,\n        y: reference.y - element.height\n      };\n      break;\n\n    case bottom:\n      offsets = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n\n    case right:\n      offsets = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n\n    case left:\n      offsets = {\n        x: reference.x - element.width,\n        y: commonY\n      };\n      break;\n\n    default:\n      offsets = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n\n  var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;\n\n  if (mainAxis != null) {\n    var len = mainAxis === 'y' ? 'height' : 'width';\n\n    switch (variation) {\n      case start:\n        offsets[mainAxis] = offsets[mainAxis] - (reference[len] / 2 - element[len] / 2);\n        break;\n\n      case end:\n        offsets[mainAxis] = offsets[mainAxis] + (reference[len] / 2 - element[len] / 2);\n        break;\n\n      default:\n    }\n  }\n\n  return offsets;\n}","import getClippingRect from \"../dom-utils/getClippingRect.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getBoundingClientRect from \"../dom-utils/getBoundingClientRect.js\";\nimport computeOffsets from \"./computeOffsets.js\";\nimport rectToClientRect from \"./rectToClientRect.js\";\nimport { clippingParents, reference, popper, bottom, top, right, basePlacements, viewport } from \"../enums.js\";\nimport { isElement } from \"../dom-utils/instanceOf.js\";\nimport mergePaddingObject from \"./mergePaddingObject.js\";\nimport expandToHashMap from \"./expandToHashMap.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport default function detectOverflow(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      _options$placement = _options.placement,\n      placement = _options$placement === void 0 ? state.placement : _options$placement,\n      _options$strategy = _options.strategy,\n      strategy = _options$strategy === void 0 ? state.strategy : _options$strategy,\n      _options$boundary = _options.boundary,\n      boundary = _options$boundary === void 0 ? clippingParents : _options$boundary,\n      _options$rootBoundary = _options.rootBoundary,\n      rootBoundary = _options$rootBoundary === void 0 ? viewport : _options$rootBoundary,\n      _options$elementConte = _options.elementContext,\n      elementContext = _options$elementConte === void 0 ? popper : _options$elementConte,\n      _options$altBoundary = _options.altBoundary,\n      altBoundary = _options$altBoundary === void 0 ? false : _options$altBoundary,\n      _options$padding = _options.padding,\n      padding = _options$padding === void 0 ? 0 : _options$padding;\n  var paddingObject = mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n  var altContext = elementContext === popper ? reference : popper;\n  var popperRect = state.rects.popper;\n  var element = state.elements[altBoundary ? altContext : elementContext];\n  var clippingClientRect = getClippingRect(isElement(element) ? element : element.contextElement || getDocumentElement(state.elements.popper), boundary, rootBoundary, strategy);\n  var referenceClientRect = getBoundingClientRect(state.elements.reference);\n  var popperOffsets = computeOffsets({\n    reference: referenceClientRect,\n    element: popperRect,\n    strategy: 'absolute',\n    placement: placement\n  });\n  var popperClientRect = rectToClientRect(Object.assign({}, popperRect, popperOffsets));\n  var elementClientRect = elementContext === popper ? popperClientRect : referenceClientRect; // positive = overflowing the clipping rect\n  // 0 or negative = within the clipping rect\n\n  var overflowOffsets = {\n    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,\n    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,\n    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,\n    right: elementClientRect.right - clippingClientRect.right + paddingObject.right\n  };\n  var offsetData = state.modifiersData.offset; // Offsets can be applied only to the popper element\n\n  if (elementContext === popper && offsetData) {\n    var offset = offsetData[placement];\n    Object.keys(overflowOffsets).forEach(function (key) {\n      var multiply = [right, bottom].indexOf(key) >= 0 ? 1 : -1;\n      var axis = [top, bottom].indexOf(key) >= 0 ? 'y' : 'x';\n      overflowOffsets[key] += offset[axis] * multiply;\n    });\n  }\n\n  return overflowOffsets;\n}","import getVariation from \"./getVariation.js\";\nimport { variationPlacements, basePlacements, placements as allPlacements } from \"../enums.js\";\nimport detectOverflow from \"./detectOverflow.js\";\nimport getBasePlacement from \"./getBasePlacement.js\";\nexport default function computeAutoPlacement(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      placement = _options.placement,\n      boundary = _options.boundary,\n      rootBoundary = _options.rootBoundary,\n      padding = _options.padding,\n      flipVariations = _options.flipVariations,\n      _options$allowedAutoP = _options.allowedAutoPlacements,\n      allowedAutoPlacements = _options$allowedAutoP === void 0 ? allPlacements : _options$allowedAutoP;\n  var variation = getVariation(placement);\n  var placements = variation ? flipVariations ? variationPlacements : variationPlacements.filter(function (placement) {\n    return getVariation(placement) === variation;\n  }) : basePlacements;\n  var allowedPlacements = placements.filter(function (placement) {\n    return allowedAutoPlacements.indexOf(placement) >= 0;\n  });\n\n  if (allowedPlacements.length === 0) {\n    allowedPlacements = placements;\n  } // $FlowFixMe[incompatible-type]: Flow seems to have problems with two array unions...\n\n\n  var overflows = allowedPlacements.reduce(function (acc, placement) {\n    acc[placement] = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding\n    })[getBasePlacement(placement)];\n    return acc;\n  }, {});\n  return Object.keys(overflows).sort(function (a, b) {\n    return overflows[a] - overflows[b];\n  });\n}","import getOppositePlacement from \"../utils/getOppositePlacement.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getOppositeVariationPlacement from \"../utils/getOppositeVariationPlacement.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport computeAutoPlacement from \"../utils/computeAutoPlacement.js\";\nimport { bottom, top, start, right, left, auto } from \"../enums.js\";\nimport getVariation from \"../utils/getVariation.js\"; // eslint-disable-next-line import/no-unused-modules\n\nfunction getExpandedFallbackPlacements(placement) {\n  if (getBasePlacement(placement) === auto) {\n    return [];\n  }\n\n  var oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeVariationPlacement(placement), oppositePlacement, getOppositeVariationPlacement(oppositePlacement)];\n}\n\nfunction flip(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n\n  if (state.modifiersData[name]._skip) {\n    return;\n  }\n\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? true : _options$altAxis,\n      specifiedFallbackPlacements = options.fallbackPlacements,\n      padding = options.padding,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      _options$flipVariatio = options.flipVariations,\n      flipVariations = _options$flipVariatio === void 0 ? true : _options$flipVariatio,\n      allowedAutoPlacements = options.allowedAutoPlacements;\n  var preferredPlacement = state.options.placement;\n  var basePlacement = getBasePlacement(preferredPlacement);\n  var isBasePlacement = basePlacement === preferredPlacement;\n  var fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipVariations ? [getOppositePlacement(preferredPlacement)] : getExpandedFallbackPlacements(preferredPlacement));\n  var placements = [preferredPlacement].concat(fallbackPlacements).reduce(function (acc, placement) {\n    return acc.concat(getBasePlacement(placement) === auto ? computeAutoPlacement(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding,\n      flipVariations: flipVariations,\n      allowedAutoPlacements: allowedAutoPlacements\n    }) : placement);\n  }, []);\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var checksMap = new Map();\n  var makeFallbackChecks = true;\n  var firstFittingPlacement = placements[0];\n\n  for (var i = 0; i < placements.length; i++) {\n    var placement = placements[i];\n\n    var _basePlacement = getBasePlacement(placement);\n\n    var isStartVariation = getVariation(placement) === start;\n    var isVertical = [top, bottom].indexOf(_basePlacement) >= 0;\n    var len = isVertical ? 'width' : 'height';\n    var overflow = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      altBoundary: altBoundary,\n      padding: padding\n    });\n    var mainVariationSide = isVertical ? isStartVariation ? right : left : isStartVariation ? bottom : top;\n\n    if (referenceRect[len] > popperRect[len]) {\n      mainVariationSide = getOppositePlacement(mainVariationSide);\n    }\n\n    var altVariationSide = getOppositePlacement(mainVariationSide);\n    var checks = [];\n\n    if (checkMainAxis) {\n      checks.push(overflow[_basePlacement] <= 0);\n    }\n\n    if (checkAltAxis) {\n      checks.push(overflow[mainVariationSide] <= 0, overflow[altVariationSide] <= 0);\n    }\n\n    if (checks.every(function (check) {\n      return check;\n    })) {\n      firstFittingPlacement = placement;\n      makeFallbackChecks = false;\n      break;\n    }\n\n    checksMap.set(placement, checks);\n  }\n\n  if (makeFallbackChecks) {\n    // `2` may be desired in some cases – research later\n    var numberOfChecks = flipVariations ? 3 : 1;\n\n    var _loop = function _loop(_i) {\n      var fittingPlacement = placements.find(function (placement) {\n        var checks = checksMap.get(placement);\n\n        if (checks) {\n          return checks.slice(0, _i).every(function (check) {\n            return check;\n          });\n        }\n      });\n\n      if (fittingPlacement) {\n        firstFittingPlacement = fittingPlacement;\n        return \"break\";\n      }\n    };\n\n    for (var _i = numberOfChecks; _i > 0; _i--) {\n      var _ret = _loop(_i);\n\n      if (_ret === \"break\") break;\n    }\n  }\n\n  if (state.placement !== firstFittingPlacement) {\n    state.modifiersData[name]._skip = true;\n    state.placement = firstFittingPlacement;\n    state.reset = true;\n  }\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'flip',\n  enabled: true,\n  phase: 'main',\n  fn: flip,\n  requiresIfExists: ['offset'],\n  data: {\n    _skip: false\n  }\n};","import { top, bottom, left, right } from \"../enums.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\n\nfunction getSideOffsets(overflow, rect, preventedOffsets) {\n  if (preventedOffsets === void 0) {\n    preventedOffsets = {\n      x: 0,\n      y: 0\n    };\n  }\n\n  return {\n    top: overflow.top - rect.height - preventedOffsets.y,\n    right: overflow.right - rect.width + preventedOffsets.x,\n    bottom: overflow.bottom - rect.height + preventedOffsets.y,\n    left: overflow.left - rect.width - preventedOffsets.x\n  };\n}\n\nfunction isAnySideFullyClipped(overflow) {\n  return [top, right, bottom, left].some(function (side) {\n    return overflow[side] >= 0;\n  });\n}\n\nfunction hide(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var preventedOffsets = state.modifiersData.preventOverflow;\n  var referenceOverflow = detectOverflow(state, {\n    elementContext: 'reference'\n  });\n  var popperAltOverflow = detectOverflow(state, {\n    altBoundary: true\n  });\n  var referenceClippingOffsets = getSideOffsets(referenceOverflow, referenceRect);\n  var popperEscapeOffsets = getSideOffsets(popperAltOverflow, popperRect, preventedOffsets);\n  var isReferenceHidden = isAnySideFullyClipped(referenceClippingOffsets);\n  var hasPopperEscaped = isAnySideFullyClipped(popperEscapeOffsets);\n  state.modifiersData[name] = {\n    referenceClippingOffsets: referenceClippingOffsets,\n    popperEscapeOffsets: popperEscapeOffsets,\n    isReferenceHidden: isReferenceHidden,\n    hasPopperEscaped: hasPopperEscaped\n  };\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-reference-hidden': isReferenceHidden,\n    'data-popper-escaped': hasPopperEscaped\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'hide',\n  enabled: true,\n  phase: 'main',\n  requiresIfExists: ['preventOverflow'],\n  fn: hide\n};","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport { top, left, right, placements } from \"../enums.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport function distanceAndSkiddingToXY(placement, rects, offset) {\n  var basePlacement = getBasePlacement(placement);\n  var invertDistance = [left, top].indexOf(basePlacement) >= 0 ? -1 : 1;\n\n  var _ref = typeof offset === 'function' ? offset(Object.assign({}, rects, {\n    placement: placement\n  })) : offset,\n      skidding = _ref[0],\n      distance = _ref[1];\n\n  skidding = skidding || 0;\n  distance = (distance || 0) * invertDistance;\n  return [left, right].indexOf(basePlacement) >= 0 ? {\n    x: distance,\n    y: skidding\n  } : {\n    x: skidding,\n    y: distance\n  };\n}\n\nfunction offset(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options,\n      name = _ref2.name;\n  var _options$offset = options.offset,\n      offset = _options$offset === void 0 ? [0, 0] : _options$offset;\n  var data = placements.reduce(function (acc, placement) {\n    acc[placement] = distanceAndSkiddingToXY(placement, state.rects, offset);\n    return acc;\n  }, {});\n  var _data$state$placement = data[state.placement],\n      x = _data$state$placement.x,\n      y = _data$state$placement.y;\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.modifiersData.popperOffsets.x += x;\n    state.modifiersData.popperOffsets.y += y;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'offset',\n  enabled: true,\n  phase: 'main',\n  requires: ['popperOffsets'],\n  fn: offset\n};","import computeOffsets from \"../utils/computeOffsets.js\";\n\nfunction popperOffsets(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  // Offsets are the actual position the popper needs to have to be\n  // properly positioned near its reference element\n  // This is the most basic placement, and will be adjusted by\n  // the modifiers in the next step\n  state.modifiersData[name] = computeOffsets({\n    reference: state.rects.reference,\n    element: state.rects.popper,\n    strategy: 'absolute',\n    placement: state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'popperOffsets',\n  enabled: true,\n  phase: 'read',\n  fn: popperOffsets,\n  data: {}\n};","export default function getAltAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}","import { top, left, right, bottom, start } from \"../enums.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport getAltAxis from \"../utils/getAltAxis.js\";\nimport { within, withinMaxClamp } from \"../utils/within.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport getFreshSideObject from \"../utils/getFreshSideObject.js\";\nimport { min as mathMin, max as mathMax } from \"../utils/math.js\";\n\nfunction preventOverflow(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? false : _options$altAxis,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      padding = options.padding,\n      _options$tether = options.tether,\n      tether = _options$tether === void 0 ? true : _options$tether,\n      _options$tetherOffset = options.tetherOffset,\n      tetherOffset = _options$tetherOffset === void 0 ? 0 : _options$tetherOffset;\n  var overflow = detectOverflow(state, {\n    boundary: boundary,\n    rootBoundary: rootBoundary,\n    padding: padding,\n    altBoundary: altBoundary\n  });\n  var basePlacement = getBasePlacement(state.placement);\n  var variation = getVariation(state.placement);\n  var isBasePlacement = !variation;\n  var mainAxis = getMainAxisFromPlacement(basePlacement);\n  var altAxis = getAltAxis(mainAxis);\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var tetherOffsetValue = typeof tetherOffset === 'function' ? tetherOffset(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : tetherOffset;\n  var normalizedTetherOffsetValue = typeof tetherOffsetValue === 'number' ? {\n    mainAxis: tetherOffsetValue,\n    altAxis: tetherOffsetValue\n  } : Object.assign({\n    mainAxis: 0,\n    altAxis: 0\n  }, tetherOffsetValue);\n  var offsetModifierState = state.modifiersData.offset ? state.modifiersData.offset[state.placement] : null;\n  var data = {\n    x: 0,\n    y: 0\n  };\n\n  if (!popperOffsets) {\n    return;\n  }\n\n  if (checkMainAxis) {\n    var _offsetModifierState$;\n\n    var mainSide = mainAxis === 'y' ? top : left;\n    var altSide = mainAxis === 'y' ? bottom : right;\n    var len = mainAxis === 'y' ? 'height' : 'width';\n    var offset = popperOffsets[mainAxis];\n    var min = offset + overflow[mainSide];\n    var max = offset - overflow[altSide];\n    var additive = tether ? -popperRect[len] / 2 : 0;\n    var minLen = variation === start ? referenceRect[len] : popperRect[len];\n    var maxLen = variation === start ? -popperRect[len] : -referenceRect[len]; // We need to include the arrow in the calculation so the arrow doesn't go\n    // outside the reference bounds\n\n    var arrowElement = state.elements.arrow;\n    var arrowRect = tether && arrowElement ? getLayoutRect(arrowElement) : {\n      width: 0,\n      height: 0\n    };\n    var arrowPaddingObject = state.modifiersData['arrow#persistent'] ? state.modifiersData['arrow#persistent'].padding : getFreshSideObject();\n    var arrowPaddingMin = arrowPaddingObject[mainSide];\n    var arrowPaddingMax = arrowPaddingObject[altSide]; // If the reference length is smaller than the arrow length, we don't want\n    // to include its full size in the calculation. If the reference is small\n    // and near the edge of a boundary, the popper can overflow even if the\n    // reference is not overflowing as well (e.g. virtual elements with no\n    // width or height)\n\n    var arrowLen = within(0, referenceRect[len], arrowRect[len]);\n    var minOffset = isBasePlacement ? referenceRect[len] / 2 - additive - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis : minLen - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis;\n    var maxOffset = isBasePlacement ? -referenceRect[len] / 2 + additive + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis : maxLen + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis;\n    var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);\n    var clientOffset = arrowOffsetParent ? mainAxis === 'y' ? arrowOffsetParent.clientTop || 0 : arrowOffsetParent.clientLeft || 0 : 0;\n    var offsetModifierValue = (_offsetModifierState$ = offsetModifierState == null ? void 0 : offsetModifierState[mainAxis]) != null ? _offsetModifierState$ : 0;\n    var tetherMin = offset + minOffset - offsetModifierValue - clientOffset;\n    var tetherMax = offset + maxOffset - offsetModifierValue;\n    var preventedOffset = within(tether ? mathMin(min, tetherMin) : min, offset, tether ? mathMax(max, tetherMax) : max);\n    popperOffsets[mainAxis] = preventedOffset;\n    data[mainAxis] = preventedOffset - offset;\n  }\n\n  if (checkAltAxis) {\n    var _offsetModifierState$2;\n\n    var _mainSide = mainAxis === 'x' ? top : left;\n\n    var _altSide = mainAxis === 'x' ? bottom : right;\n\n    var _offset = popperOffsets[altAxis];\n\n    var _len = altAxis === 'y' ? 'height' : 'width';\n\n    var _min = _offset + overflow[_mainSide];\n\n    var _max = _offset - overflow[_altSide];\n\n    var isOriginSide = [top, left].indexOf(basePlacement) !== -1;\n\n    var _offsetModifierValue = (_offsetModifierState$2 = offsetModifierState == null ? void 0 : offsetModifierState[altAxis]) != null ? _offsetModifierState$2 : 0;\n\n    var _tetherMin = isOriginSide ? _min : _offset - referenceRect[_len] - popperRect[_len] - _offsetModifierValue + normalizedTetherOffsetValue.altAxis;\n\n    var _tetherMax = isOriginSide ? _offset + referenceRect[_len] + popperRect[_len] - _offsetModifierValue - normalizedTetherOffsetValue.altAxis : _max;\n\n    var _preventedOffset = tether && isOriginSide ? withinMaxClamp(_tetherMin, _offset, _tetherMax) : within(tether ? _tetherMin : _min, _offset, tether ? _tetherMax : _max);\n\n    popperOffsets[altAxis] = _preventedOffset;\n    data[altAxis] = _preventedOffset - _offset;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'preventOverflow',\n  enabled: true,\n  phase: 'main',\n  fn: preventOverflow,\n  requiresIfExists: ['offset']\n};","export default function getHTMLElementScroll(element) {\n  return {\n    scrollLeft: element.scrollLeft,\n    scrollTop: element.scrollTop\n  };\n}","import getWindowScroll from \"./getWindowScroll.js\";\nimport getWindow from \"./getWindow.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getHTMLElementScroll from \"./getHTMLElementScroll.js\";\nexport default function getNodeScroll(node) {\n  if (node === getWindow(node) || !isHTMLElement(node)) {\n    return getWindowScroll(node);\n  } else {\n    return getHTMLElementScroll(node);\n  }\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getNodeScroll from \"./getNodeScroll.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport { round } from \"../utils/math.js\";\n\nfunction isElementScaled(element) {\n  var rect = element.getBoundingClientRect();\n  var scaleX = round(rect.width) / element.offsetWidth || 1;\n  var scaleY = round(rect.height) / element.offsetHeight || 1;\n  return scaleX !== 1 || scaleY !== 1;\n} // Returns the composite rect of an element relative to its offsetParent.\n// Composite means it takes into account transforms as well as layout.\n\n\nexport default function getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n\n  var isOffsetParentAnElement = isHTMLElement(offsetParent);\n  var offsetParentIsScaled = isHTMLElement(offsetParent) && isElementScaled(offsetParent);\n  var documentElement = getDocumentElement(offsetParent);\n  var rect = getBoundingClientRect(elementOrVirtualElement, offsetParentIsScaled, isFixed);\n  var scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  var offsets = {\n    x: 0,\n    y: 0\n  };\n\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || // https://github.com/popperjs/popper-core/issues/1078\n    isScrollParent(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n\n    if (isHTMLElement(offsetParent)) {\n      offsets = getBoundingClientRect(offsetParent, true);\n      offsets.x += offsetParent.clientLeft;\n      offsets.y += offsetParent.clientTop;\n    } else if (documentElement) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n\n  return {\n    x: rect.left + scroll.scrollLeft - offsets.x,\n    y: rect.top + scroll.scrollTop - offsets.y,\n    width: rect.width,\n    height: rect.height\n  };\n}","import { modifierPhases } from \"../enums.js\"; // source: https://stackoverflow.com/questions/49875255\n\nfunction order(modifiers) {\n  var map = new Map();\n  var visited = new Set();\n  var result = [];\n  modifiers.forEach(function (modifier) {\n    map.set(modifier.name, modifier);\n  }); // On visiting object, check for its dependencies and visit them recursively\n\n  function sort(modifier) {\n    visited.add(modifier.name);\n    var requires = [].concat(modifier.requires || [], modifier.requiresIfExists || []);\n    requires.forEach(function (dep) {\n      if (!visited.has(dep)) {\n        var depModifier = map.get(dep);\n\n        if (depModifier) {\n          sort(depModifier);\n        }\n      }\n    });\n    result.push(modifier);\n  }\n\n  modifiers.forEach(function (modifier) {\n    if (!visited.has(modifier.name)) {\n      // check for visited object\n      sort(modifier);\n    }\n  });\n  return result;\n}\n\nexport default function orderModifiers(modifiers) {\n  // order based on dependencies\n  var orderedModifiers = order(modifiers); // order based on phase\n\n  return modifierPhases.reduce(function (acc, phase) {\n    return acc.concat(orderedModifiers.filter(function (modifier) {\n      return modifier.phase === phase;\n    }));\n  }, []);\n}","export default function debounce(fn) {\n  var pending;\n  return function () {\n    if (!pending) {\n      pending = new Promise(function (resolve) {\n        Promise.resolve().then(function () {\n          pending = undefined;\n          resolve(fn());\n        });\n      });\n    }\n\n    return pending;\n  };\n}","export default function mergeByName(modifiers) {\n  var merged = modifiers.reduce(function (merged, current) {\n    var existing = merged[current.name];\n    merged[current.name] = existing ? Object.assign({}, existing, current, {\n      options: Object.assign({}, existing.options, current.options),\n      data: Object.assign({}, existing.data, current.data)\n    }) : current;\n    return merged;\n  }, {}); // IE11 does not support Object.values\n\n  return Object.keys(merged).map(function (key) {\n    return merged[key];\n  });\n}","import getCompositeRect from \"./dom-utils/getCompositeRect.js\";\nimport getLayoutRect from \"./dom-utils/getLayoutRect.js\";\nimport listScrollParents from \"./dom-utils/listScrollParents.js\";\nimport getOffsetParent from \"./dom-utils/getOffsetParent.js\";\nimport orderModifiers from \"./utils/orderModifiers.js\";\nimport debounce from \"./utils/debounce.js\";\nimport mergeByName from \"./utils/mergeByName.js\";\nimport detectOverflow from \"./utils/detectOverflow.js\";\nimport { isElement } from \"./dom-utils/instanceOf.js\";\nvar DEFAULT_OPTIONS = {\n  placement: 'bottom',\n  modifiers: [],\n  strategy: 'absolute'\n};\n\nfunction areValidElements() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return !args.some(function (element) {\n    return !(element && typeof element.getBoundingClientRect === 'function');\n  });\n}\n\nexport function popperGenerator(generatorOptions) {\n  if (generatorOptions === void 0) {\n    generatorOptions = {};\n  }\n\n  var _generatorOptions = generatorOptions,\n      _generatorOptions$def = _generatorOptions.defaultModifiers,\n      defaultModifiers = _generatorOptions$def === void 0 ? [] : _generatorOptions$def,\n      _generatorOptions$def2 = _generatorOptions.defaultOptions,\n      defaultOptions = _generatorOptions$def2 === void 0 ? DEFAULT_OPTIONS : _generatorOptions$def2;\n  return function createPopper(reference, popper, options) {\n    if (options === void 0) {\n      options = defaultOptions;\n    }\n\n    var state = {\n      placement: 'bottom',\n      orderedModifiers: [],\n      options: Object.assign({}, DEFAULT_OPTIONS, defaultOptions),\n      modifiersData: {},\n      elements: {\n        reference: reference,\n        popper: popper\n      },\n      attributes: {},\n      styles: {}\n    };\n    var effectCleanupFns = [];\n    var isDestroyed = false;\n    var instance = {\n      state: state,\n      setOptions: function setOptions(setOptionsAction) {\n        var options = typeof setOptionsAction === 'function' ? setOptionsAction(state.options) : setOptionsAction;\n        cleanupModifierEffects();\n        state.options = Object.assign({}, defaultOptions, state.options, options);\n        state.scrollParents = {\n          reference: isElement(reference) ? listScrollParents(reference) : reference.contextElement ? listScrollParents(reference.contextElement) : [],\n          popper: listScrollParents(popper)\n        }; // Orders the modifiers based on their dependencies and `phase`\n        // properties\n\n        var orderedModifiers = orderModifiers(mergeByName([].concat(defaultModifiers, state.options.modifiers))); // Strip out disabled modifiers\n\n        state.orderedModifiers = orderedModifiers.filter(function (m) {\n          return m.enabled;\n        });\n        runModifierEffects();\n        return instance.update();\n      },\n      // Sync update – it will always be executed, even if not necessary. This\n      // is useful for low frequency updates where sync behavior simplifies the\n      // logic.\n      // For high frequency updates (e.g. `resize` and `scroll` events), always\n      // prefer the async Popper#update method\n      forceUpdate: function forceUpdate() {\n        if (isDestroyed) {\n          return;\n        }\n\n        var _state$elements = state.elements,\n            reference = _state$elements.reference,\n            popper = _state$elements.popper; // Don't proceed if `reference` or `popper` are not valid elements\n        // anymore\n\n        if (!areValidElements(reference, popper)) {\n          return;\n        } // Store the reference and popper rects to be read by modifiers\n\n\n        state.rects = {\n          reference: getCompositeRect(reference, getOffsetParent(popper), state.options.strategy === 'fixed'),\n          popper: getLayoutRect(popper)\n        }; // Modifiers have the ability to reset the current update cycle. The\n        // most common use case for this is the `flip` modifier changing the\n        // placement, which then needs to re-run all the modifiers, because the\n        // logic was previously ran for the previous placement and is therefore\n        // stale/incorrect\n\n        state.reset = false;\n        state.placement = state.options.placement; // On each update cycle, the `modifiersData` property for each modifier\n        // is filled with the initial data specified by the modifier. This means\n        // it doesn't persist and is fresh on each update.\n        // To ensure persistent data, use `${name}#persistent`\n\n        state.orderedModifiers.forEach(function (modifier) {\n          return state.modifiersData[modifier.name] = Object.assign({}, modifier.data);\n        });\n\n        for (var index = 0; index < state.orderedModifiers.length; index++) {\n          if (state.reset === true) {\n            state.reset = false;\n            index = -1;\n            continue;\n          }\n\n          var _state$orderedModifie = state.orderedModifiers[index],\n              fn = _state$orderedModifie.fn,\n              _state$orderedModifie2 = _state$orderedModifie.options,\n              _options = _state$orderedModifie2 === void 0 ? {} : _state$orderedModifie2,\n              name = _state$orderedModifie.name;\n\n          if (typeof fn === 'function') {\n            state = fn({\n              state: state,\n              options: _options,\n              name: name,\n              instance: instance\n            }) || state;\n          }\n        }\n      },\n      // Async and optimistically optimized update – it will not be executed if\n      // not necessary (debounced to run at most once-per-tick)\n      update: debounce(function () {\n        return new Promise(function (resolve) {\n          instance.forceUpdate();\n          resolve(state);\n        });\n      }),\n      destroy: function destroy() {\n        cleanupModifierEffects();\n        isDestroyed = true;\n      }\n    };\n\n    if (!areValidElements(reference, popper)) {\n      return instance;\n    }\n\n    instance.setOptions(options).then(function (state) {\n      if (!isDestroyed && options.onFirstUpdate) {\n        options.onFirstUpdate(state);\n      }\n    }); // Modifiers have the ability to execute arbitrary code before the first\n    // update cycle runs. They will be executed in the same order as the update\n    // cycle. This is useful when a modifier adds some persistent data that\n    // other modifiers need to use, but the modifier is run after the dependent\n    // one.\n\n    function runModifierEffects() {\n      state.orderedModifiers.forEach(function (_ref) {\n        var name = _ref.name,\n            _ref$options = _ref.options,\n            options = _ref$options === void 0 ? {} : _ref$options,\n            effect = _ref.effect;\n\n        if (typeof effect === 'function') {\n          var cleanupFn = effect({\n            state: state,\n            name: name,\n            instance: instance,\n            options: options\n          });\n\n          var noopFn = function noopFn() {};\n\n          effectCleanupFns.push(cleanupFn || noopFn);\n        }\n      });\n    }\n\n    function cleanupModifierEffects() {\n      effectCleanupFns.forEach(function (fn) {\n        return fn();\n      });\n      effectCleanupFns = [];\n    }\n\n    return instance;\n  };\n}\nexport var createPopper = /*#__PURE__*/popperGenerator(); // eslint-disable-next-line import/no-unused-modules\n\nexport { detectOverflow };","import { popperGenerator, detectOverflow } from \"./createPopper.js\";\nimport eventListeners from \"./modifiers/eventListeners.js\";\nimport popperOffsets from \"./modifiers/popperOffsets.js\";\nimport computeStyles from \"./modifiers/computeStyles.js\";\nimport applyStyles from \"./modifiers/applyStyles.js\";\nimport offset from \"./modifiers/offset.js\";\nimport flip from \"./modifiers/flip.js\";\nimport preventOverflow from \"./modifiers/preventOverflow.js\";\nimport arrow from \"./modifiers/arrow.js\";\nimport hide from \"./modifiers/hide.js\";\nvar defaultModifiers = [eventListeners, popperOffsets, computeStyles, applyStyles, offset, flip, preventOverflow, arrow, hide];\nvar createPopper = /*#__PURE__*/popperGenerator({\n  defaultModifiers: defaultModifiers\n}); // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper, popperGenerator, defaultModifiers, detectOverflow }; // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper as createPopperLite } from \"./popper-lite.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport * from \"./modifiers/index.js\";","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.AirDatepicker=t():e.AirDatepicker=t()}(this,(function(){return function(){\"use strict\";var e={d:function(t,i){for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t={};e.d(t,{default:function(){return R}});var i={days:\"days\",months:\"months\",years:\"years\",day:\"day\",month:\"month\",year:\"year\",eventChangeViewDate:\"changeViewDate\",eventChangeCurrentView:\"changeCurrentView\",eventChangeFocusDate:\"changeFocusDate\",eventChangeSelectedDate:\"changeSelectedDate\",eventChangeTime:\"changeTime\",eventChangeLastSelectedDate:\"changeLastSelectedDate\",actionSelectDate:\"selectDate\",actionUnselectDate:\"unselectDate\",cssClassWeekend:\"-weekend-\"},s={classes:\"\",inline:!1,locale:{days:[\"Воскресенье\",\"Понедельник\",\"Вторник\",\"Среда\",\"Четверг\",\"Пятница\",\"Суббота\"],daysShort:[\"Вос\",\"Пон\",\"Вто\",\"Сре\",\"Чет\",\"Пят\",\"Суб\"],daysMin:[\"Вс\",\"Пн\",\"Вт\",\"Ср\",\"Чт\",\"Пт\",\"Сб\"],months:[\"Январь\",\"Февраль\",\"Март\",\"Апрель\",\"Май\",\"Июнь\",\"Июль\",\"Август\",\"Сентябрь\",\"Октябрь\",\"Ноябрь\",\"Декабрь\"],monthsShort:[\"Янв\",\"Фев\",\"Мар\",\"Апр\",\"Май\",\"Июн\",\"Июл\",\"Авг\",\"Сен\",\"Окт\",\"Ноя\",\"Дек\"],today:\"Сегодня\",clear:\"Очистить\",dateFormat:\"dd.MM.yyyy\",timeFormat:\"HH:mm\",firstDay:1},startDate:new Date,firstDay:\"\",weekends:[6,0],dateFormat:\"\",altField:\"\",altFieldDateFormat:\"T\",toggleSelected:!0,keyboardNav:!0,selectedDates:!1,container:\"\",isMobile:!1,visible:!1,position:\"bottom left\",offset:12,view:i.days,minView:i.days,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:\"\",maxDate:\"\",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:\", \",range:!1,dynamicRange:!0,buttons:!1,monthsField:\"monthsShort\",showEvent:\"focus\",autoClose:!1,fixedHeight:!1,prevHtml:'<svg><path d=\"M 17,12 l -5,5 l 5,5\"></path></svg>',nextHtml:'<svg><path d=\"M 14,12 l 5,5 l -5,5\"></path></svg>',navTitles:{days:\"MMMM, <i>yyyy</i>\",months:\"yyyy\",years:\"yyyy1 - yyyy2\"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:\" \",timeFormat:\"\",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:!1,onChangeViewDate:!1,onChangeView:!1,onRenderCell:!1,onShow:!1,onHide:!1,onClickDayName:!1};function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return\"string\"==typeof e?t.querySelector(e):e}function n(){let{tagName:e=\"div\",className:t=\"\",innerHtml:i=\"\",id:s=\"\",attrs:a={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=document.createElement(e);return t&&n.classList.add(...t.split(\" \")),s&&(n.id=s),i&&(n.innerHTML=i),a&&r(n,a),n}function r(e,t){for(let[i,s]of Object.entries(t))void 0!==s&&e.setAttribute(i,s);return e}function o(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function h(e){let t=e.getHours(),{hours:i,dayPeriod:s}=l(t);return{year:e.getFullYear(),month:e.getMonth(),fullMonth:e.getMonth()+1<10?\"0\"+(e.getMonth()+1):e.getMonth()+1,date:e.getDate(),fullDate:e.getDate()<10?\"0\"+e.getDate():e.getDate(),day:e.getDay(),hours:t,fullHours:d(t),hours12:i,dayPeriod:s,fullHours12:d(i),minutes:e.getMinutes(),fullMinutes:e.getMinutes()<10?\"0\"+e.getMinutes():e.getMinutes()}}function l(e){return{dayPeriod:e>11?\"pm\":\"am\",hours:e%12==0?12:e%12}}function d(e){return e<10?\"0\"+e:e}function c(e){let t=10*Math.floor(e.getFullYear()/10);return[t,t+9]}function u(){let e=[];for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return i.forEach((t=>{if(\"object\"==typeof t)for(let i in t)t[i]&&e.push(i);else t&&e.push(t)})),e.join(\" \")}function p(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.days;if(!e||!t)return!1;let a=h(e),n=h(t);return{[i.days]:a.date===n.date&&a.month===n.month&&a.year===n.year,[i.months]:a.month===n.month&&a.year===n.year,[i.years]:a.year===n.year}[s]}function m(e,t,i){let s=g(e,!1).getTime(),a=g(t,!1).getTime();return i?s>=a:s>a}function v(e,t){return!m(e,t,!0)}function g(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=new Date(e.getTime());return\"boolean\"!=typeof t||t||function(e){e.setHours(0,0,0,0)}(i),i}function D(e,t,i){e.length?e.forEach((e=>{e.addEventListener(t,i)})):e.addEventListener(t,i)}function y(e,t){return!(!e||e===document||e instanceof DocumentFragment)&&(e.matches(t)?e:y(e.parentNode,t))}function f(e,t,i){return e>i?i:e<t?t:e}function w(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return i.filter((e=>e)).forEach((t=>{for(let[i,s]of Object.entries(t))if(void 0!==s&&\"[object Object]\"===s.toString()){let t=void 0!==e[i]?e[i].toString():void 0,a=s.toString(),n=Array.isArray(s)?[]:{};e[i]=e[i]?t!==a?n:e[i]:n,w(e[i],s)}else e[i]=s})),e}function b(e){let t=e;return e instanceof Date||(\"string\"==typeof e&&/^\\d{4}-\\d{2}-\\d{2}$/.test(e)&&(e+=\"T00:00:00\"),t=new Date(e)),isNaN(t.getTime())&&(console.log(`Unable to convert value \"${e}\" to Date object`),t=!1),t}function k(e){let t=\"\\\\s|\\\\.|-|/|\\\\\\\\|,|\\\\$|\\\\!|\\\\?|:|;\";return new RegExp(\"(^|>|\"+t+\")(\"+e+\")($|<|\"+t+\")\",\"g\")}function $(e,t,i){return(t=function(e){var t=function(e,t){if(\"object\"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,\"string\");if(\"object\"!=typeof s)return s;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class C{constructor(){let{type:e,date:t,dp:i,opts:s,body:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};$(this,\"focus\",(()=>{this.$cell.classList.add(\"-focus-\"),this.focused=!0})),$(this,\"removeFocus\",(()=>{this.$cell.classList.remove(\"-focus-\"),this.focused=!1})),$(this,\"select\",(()=>{this.$cell.classList.add(\"-selected-\"),this.selected=!0})),$(this,\"removeSelect\",(()=>{this.$cell.classList.remove(\"-selected-\",\"-range-from-\",\"-range-to-\"),this.selected=!1})),$(this,\"onChangeSelectedDate\",(()=>{this.isDisabled||(this._handleSelectedStatus(),this.opts.range&&this._handleRangeStatus())})),$(this,\"onChangeFocusDate\",(e=>{if(!e)return void(this.focused&&this.removeFocus());let t=p(e,this.date,this.type);t?this.focus():!t&&this.focused&&this.removeFocus(),this.opts.range&&this._handleRangeStatus()})),$(this,\"render\",(()=>(this.$cell.innerHTML=this._getHtml(),this._handleClasses(),this.$cell))),this.type=e,this.singleType=this.type.slice(0,-1),this.date=t,this.dp=i,this.opts=s,this.body=a,this.customData=!1,this.init()}init(){var e;let{onRenderCell:t}=this.opts;t&&(this.customData=t({date:this.date,cellType:this.singleType,datepicker:this.dp})),this._createElement(),this._bindDatepickerEvents(),null!==(e=this.customData)&&void 0!==e&&e.disabled&&this.dp.disableDate(this.date)}_bindDatepickerEvents(){this.dp.on(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(i.eventChangeFocusDate,this.onChangeFocusDate)}unbindDatepickerEvents(){this.dp.off(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(i.eventChangeFocusDate,this.onChangeFocusDate)}_createElement(){var e;let{year:t,month:i,date:s}=h(this.date),a=(null===(e=this.customData)||void 0===e?void 0:e.attrs)||{};this.$cell=n({attrs:{\"data-year\":t,\"data-month\":i,\"data-date\":s,...a}}),this.$cell.adpCell=this}_getClassName(){var e;let t=new Date,{selectOtherMonths:s,selectOtherYears:a}=this.opts,{minDate:n,maxDate:r,isDateDisabled:o}=this.dp,{day:l}=h(this.date),d=this._isOutOfMinMaxRange(),c=o(this.date),m=u(\"air-datepicker-cell\",`-${this.singleType}-`,{\"-current-\":p(t,this.date,this.type),\"-min-date-\":n&&p(n,this.date,this.type),\"-max-date-\":r&&p(r,this.date,this.type)}),v=\"\";switch(this.type){case i.days:v=u({\"-weekend-\":this.dp.isWeekend(l),\"-other-month-\":this.isOtherMonth,\"-disabled-\":this.isOtherMonth&&!s||d||c});break;case i.months:v=u({\"-disabled-\":d});break;case i.years:v=u({\"-other-decade-\":this.isOtherDecade,\"-disabled-\":d||this.isOtherDecade&&!a})}return u(m,v,null===(e=this.customData)||void 0===e?void 0:e.classes).split(\" \")}_getHtml(){var e;let{year:t,month:s,date:a}=h(this.date),{showOtherMonths:n,showOtherYears:r}=this.opts;if(null!==(e=this.customData)&&void 0!==e&&e.html)return this.customData.html;switch(this.type){case i.days:return!n&&this.isOtherMonth?\"\":a;case i.months:return this.dp.locale[this.opts.monthsField][s];case i.years:return!r&&this.isOtherDecade?\"\":t}}_isOutOfMinMaxRange(){let{minDate:e,maxDate:t}=this.dp,{type:s,date:a}=this,{month:n,year:r,date:o}=h(a),l=s===i.days,d=s===i.years,c=!!e&&new Date(r,d?e.getMonth():n,l?o:e.getDate()),u=!!t&&new Date(r,d?t.getMonth():n,l?o:t.getDate());return e&&t?v(c,e)||m(u,t):e?v(c,e):t?m(u,t):void 0}destroy(){this.unbindDatepickerEvents()}_handleRangeStatus(){const{selectedDates:e,focusDate:t,rangeDateTo:i,rangeDateFrom:s}=this.dp,a=e.length;if(!a)return;let n=s,r=i;if(1===a&&t){const i=m(t,e[0]);n=i?e[0]:t,r=i?t:e[0]}let o=u({\"-in-range-\":n&&r&&(h=this.date,l=n,d=r,m(h,l)&&v(h,d)),\"-range-from-\":n&&p(this.date,n,this.type),\"-range-to-\":r&&p(this.date,r,this.type)});var h,l,d;this.$cell.classList.remove(\"-range-from-\",\"-range-to-\",\"-in-range-\"),o&&this.$cell.classList.add(...o.split(\" \"))}_handleSelectedStatus(){let e=this.dp._checkIfDateIsSelected(this.date,this.type);e?this.select():!e&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){p(this.dp.focusDate,this.date,this.type)&&this.focus()}_handleClasses(){this.$cell.setAttribute(\"class\",\"\"),this._handleInitialFocusStatus(),this.dp.hasSelectedDates&&(this._handleSelectedStatus(),this.dp.opts.range&&this._handleRangeStatus()),this.$cell.classList.add(...this._getClassName())}get isDisabled(){return this.$cell.matches(\".-disabled-\")}get isOtherMonth(){return this.dp.isOtherMonth(this.date)}get isOtherDecade(){return this.dp.isOtherDecade(this.date)}}function _(e,t,i){return(t=function(e){var t=function(e,t){if(\"object\"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,\"string\");if(\"object\"!=typeof s)return s;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let M={[i.days]:`<div class=\"air-datepicker-body--day-names\"></div><div class=\"air-datepicker-body--cells -${i.days}-\"></div>`,[i.months]:`<div class=\"air-datepicker-body--cells -${i.months}-\"></div>`,[i.years]:`<div class=\"air-datepicker-body--cells -${i.years}-\"></div>`};const S=\".air-datepicker-cell\";class T{constructor(e){let{dp:t,type:s,opts:a}=e;_(this,\"handleClick\",(e=>{let t=e.target.closest(S).adpCell;if(t.isDisabled)return;if(!this.dp.isMinViewReached)return void this.dp.down();let i=this.dp._checkIfDateIsSelected(t.date,t.type);i?this.dp._handleAlreadySelectedDates(i,t.date):this.dp.selectDate(t.date)})),_(this,\"handleDayNameClick\",(e=>{let t=e.target.getAttribute(\"data-day-index\");this.opts.onClickDayName({dayIndex:Number(t),datepicker:this.dp})})),_(this,\"onChangeCurrentView\",(e=>{e!==this.type?this.hide():(this.show(),this.render())})),_(this,\"onMouseOverCell\",(e=>{let t=y(e.target,S);this.dp.setFocusDate(!!t&&t.adpCell.date)})),_(this,\"onMouseOutCell\",(()=>{this.dp.setFocusDate(!1)})),_(this,\"onClickBody\",(e=>{let{onClickDayName:t}=this.opts,i=e.target;i.closest(S)&&this.handleClick(e),t&&i.closest(\".air-datepicker-body--day-name\")&&this.handleDayNameClick(e)})),_(this,\"onMouseDown\",(e=>{this.pressed=!0;let t=y(e.target,S),i=t&&t.adpCell;p(i.date,this.dp.rangeDateFrom)&&(this.rangeFromFocused=!0),p(i.date,this.dp.rangeDateTo)&&(this.rangeToFocused=!0)})),_(this,\"onMouseMove\",(e=>{if(!this.pressed||!this.dp.isMinViewReached)return;e.preventDefault();let t=y(e.target,S),i=t&&t.adpCell,{selectedDates:s,rangeDateTo:a,rangeDateFrom:n}=this.dp;if(!i||i.isDisabled)return;let{date:r}=i;if(2===s.length){if(this.rangeFromFocused&&!m(r,a)){let{hours:e,minutes:t}=h(n);r.setHours(e),r.setMinutes(t),this.dp.rangeDateFrom=r,this.dp.replaceDate(n,r)}if(this.rangeToFocused&&!v(r,n)){let{hours:e,minutes:t}=h(a);r.setHours(e),r.setMinutes(t),this.dp.rangeDateTo=r,this.dp.replaceDate(a,r)}}})),_(this,\"onMouseUp\",(()=>{this.pressed=!1,this.rangeFromFocused=!1,this.rangeToFocused=!1})),_(this,\"onChangeViewDate\",((e,t)=>{if(!this.isVisible)return;let s=c(e),a=c(t);switch(this.dp.currentView){case i.days:if(p(e,t,i.months))return;break;case i.months:if(p(e,t,i.years))return;break;case i.years:if(s[0]===a[0]&&s[1]===a[1])return}this.render()})),_(this,\"render\",(()=>{this.destroyCells(),this._generateCells(),this.cells.forEach((e=>{this.$cells.appendChild(e.render())}))})),this.dp=t,this.type=s,this.opts=a,this.cells=[],this.$el=\"\",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.type===i.days&&this.renderDayNames(),this.render(),this._bindEvents(),this._bindDatepickerEvents()}_bindEvents(){let{range:e,dynamicRange:t}=this.opts;D(this.$el,\"mouseover\",this.onMouseOverCell),D(this.$el,\"mouseout\",this.onMouseOutCell),D(this.$el,\"click\",this.onClickBody),e&&t&&(D(this.$el,\"mousedown\",this.onMouseDown),D(this.$el,\"mousemove\",this.onMouseMove),D(window.document,\"mouseup\",this.onMouseUp))}_bindDatepickerEvents(){this.dp.on(i.eventChangeViewDate,this.onChangeViewDate),this.dp.on(i.eventChangeCurrentView,this.onChangeCurrentView)}_buildBaseHtml(){this.$el=n({className:`air-datepicker-body -${this.type}-`,innerHtml:M[this.type]}),this.$names=a(\".air-datepicker-body--day-names\",this.$el),this.$cells=a(\".air-datepicker-body--cells\",this.$el)}_getDayNamesHtml(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dp.locale.firstDay,t=\"\",s=this.dp.isWeekend,{onClickDayName:a}=this.opts,n=e,r=0;for(;r<7;){let e=n%7;t+=`<div class=\"${u(\"air-datepicker-body--day-name\",{[i.cssClassWeekend]:s(e),\"-clickable-\":!!a})}\" data-day-index='${e}'>${this.dp.locale.daysMin[e]}</div>`,r++,n++}return t}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCell(e){let{type:t,dp:i,opts:s}=this;return new C({type:t,dp:i,opts:s,date:e,body:this})}_generateCells(){T.getDatesFunction(this.type)(this.dp,(e=>{this.cells.push(this._generateCell(e))}))}show(){this.isVisible=!0,this.$el.classList.remove(\"-hidden-\")}hide(){this.isVisible=!1,this.$el.classList.add(\"-hidden-\")}destroyCells(){this.cells.forEach((e=>e.destroy())),this.cells=[],this.$cells.innerHTML=\"\"}destroy(){this.destroyCells(),this.dp.off(i.eventChangeViewDate,this.onChangeViewDate),this.dp.off(i.eventChangeCurrentView,this.onChangeCurrentView)}static getDaysDates(e,t){let{viewDate:i,opts:{fixedHeight:s},locale:{firstDay:a}}=e,n=o(i),{year:r,month:l}=h(i),d=new Date(r,l,1),c=new Date(r,l,n),u=d.getDay()-a,p=6-c.getDay()+a;u=u<0?u+7:u,p=p>6?p-7:p;let m=function(e,t){let{year:i,month:s,date:a}=h(e);return new Date(i,s,a-t)}(d,u),v=n+u+p,g=m.getDate(),{year:D,month:y}=h(m),f=0;s&&(v=42);const w=[];for(;f<v;){let e=new Date(D,y,g+f);t&&t(e),w.push(e),f++}return w}static getMonthsDates(e,t){let{year:i}=e.parsedViewDate,s=0,a=[];for(;s<12;){const e=new Date(i,s);a.push(e),t&&t(e),s++}return a}static getYearsDates(e,t){let i=c(e.viewDate),s=i[0]-1,a=i[1]+1,n=s,r=[];for(;n<=a;){const e=new Date(n,0);r.push(e),t&&t(e),n++}return r}static getDatesFunction(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.days;return{[i.days]:T.getDaysDates,[i.months]:T.getMonthsDates,[i.years]:T.getYearsDates}[e]}}function F(e,t,i){return(t=function(e){var t=function(e,t){if(\"object\"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,\"string\");if(\"object\"!=typeof s)return s;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class V{constructor(e){let{dp:t,opts:i}=e;F(this,\"onClickNav\",(e=>{let t=y(e.target,\".air-datepicker-nav--action\");if(!t)return;let i=t.dataset.action;this.dp[i]()})),F(this,\"onChangeViewDate\",(()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()})),F(this,\"onChangeCurrentView\",(()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()})),F(this,\"onClickNavTitle\",(()=>{this.dp.isFinalView||this.dp.up()})),F(this,\"update\",(()=>{let{prevHtml:e,nextHtml:t}=this.opts;this.$prev.innerHTML=e,this.$next.innerHTML=t,this._resetNavStatus(),this.render(),this.handleNavStatus()})),F(this,\"renderDelay\",(()=>{setTimeout(this.render)})),F(this,\"render\",(()=>{this.$title.innerHTML=this._getTitle(),function(e,t){for(let i in t)t[i]?e.classList.add(i):e.classList.remove(i)}(this.$title,{\"-disabled-\":this.dp.isFinalView})})),this.dp=t,this.opts=i,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDatepickerEvents()}_defineDOM(){this.$title=a(\".air-datepicker-nav--title\",this.$el),this.$prev=a('[data-action=\"prev\"]',this.$el),this.$next=a('[data-action=\"next\"]',this.$el)}_bindEvents(){this.$el.addEventListener(\"click\",this.onClickNav),this.$title.addEventListener(\"click\",this.onClickNavTitle)}_bindDatepickerEvents(){this.dp.on(i.eventChangeViewDate,this.onChangeViewDate),this.dp.on(i.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.on(i.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.on(i.eventChangeTime,this.render))}destroy(){this.dp.off(i.eventChangeViewDate,this.onChangeViewDate),this.dp.off(i.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.off(i.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.off(i.eventChangeTime,this.render))}_createElement(){this.$el=n({tagName:\"nav\",className:\"air-datepicker-nav\"})}_getTitle(){let{dp:e,opts:t}=this,i=t.navTitles[e.currentView];return\"function\"==typeof i?i(e):e.formatDate(e.viewDate,i)}handleNavStatus(){let{disableNavWhenOutOfRange:e}=this.opts,{minDate:t,maxDate:s}=this.dp;if(!t&&!s||!e)return;let{year:a,month:n}=this.dp.parsedViewDate,r=!!t&&h(t),o=!!s&&h(s);switch(this.dp.currentView){case i.days:t&&r.month>=n&&r.year>=a&&this._disableNav(\"prev\"),s&&o.month<=n&&o.year<=a&&this._disableNav(\"next\");break;case i.months:t&&r.year>=a&&this._disableNav(\"prev\"),s&&o.year<=a&&this._disableNav(\"next\");break;case i.years:{let e=c(this.dp.viewDate);t&&r.year>=e[0]&&this._disableNav(\"prev\"),s&&o.year<=e[1]&&this._disableNav(\"next\");break}}}_disableNav(e){a('[data-action=\"'+e+'\"]',this.$el).classList.add(\"-disabled-\")}_resetNavStatus(){!function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];e.length?e.forEach((e=>{e.classList.remove(...i)})):e.classList.remove(...i)}(this.$el.querySelectorAll(\".air-datepicker-nav--action\"),\"-disabled-\")}_buildBaseHtml(){let{prevHtml:e,nextHtml:t}=this.opts;this.$el.innerHTML=`<div class=\"air-datepicker-nav--action\" data-action=\"prev\">${e}</div><div class=\"air-datepicker-nav--title\"></div><div class=\"air-datepicker-nav--action\" data-action=\"next\">${t}</div>`}get isNavIsFunction(){let{navTitles:e}=this.opts;return Object.keys(e).find((t=>\"function\"==typeof e[t]))}}var x={today:{content:e=>e.locale.today,onClick:e=>e.setViewDate(new Date)},clear:{content:e=>e.locale.clear,onClick:e=>e.clear()}};class H{constructor(e){let{dp:t,opts:i}=e;this.dp=t,this.opts=i,this.init()}init(){this.createElement(),this.render()}createElement(){this.$el=n({className:\"air-datepicker-buttons\"})}destroy(){this.$el.parentNode.removeChild(this.$el)}clearHtml(){return this.$el.innerHTML=\"\",this}generateButtons(){let{buttons:e}=this.opts;Array.isArray(e)||(e=[e]),e.forEach((e=>{let t=e;\"string\"==typeof e&&x[e]&&(t=x[e]);let i=this.createButton(t);t.onClick&&this.attachEventToButton(i,t.onClick),this.$el.appendChild(i)}))}attachEventToButton(e,t){e.addEventListener(\"click\",(()=>{t(this.dp)}))}createButton(e){let{content:t,className:i,tagName:s=\"button\",attrs:a={}}=e;return n({tagName:s,innerHtml:`<span tabindex='-1'>${\"function\"==typeof t?t(this.dp):t}</span>`,className:u(\"air-datepicker-button\",i),attrs:a})}render(){this.generateButtons()}}function E(e,t,i){return(t=function(e){var t=function(e,t){if(\"object\"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,\"string\");if(\"object\"!=typeof s)return s;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class L{constructor(){let{opts:e,dp:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};E(this,\"toggleTimepickerIsActive\",(e=>{this.dp.timepickerIsActive=e})),E(this,\"onChangeSelectedDate\",(e=>{let{date:t,updateTime:i=!1}=e;t&&(this.setMinMaxTime(t),this.setCurrentTime(!!i&&t),this.addTimeToDate(t))})),E(this,\"onChangeLastSelectedDate\",(e=>{e&&(this.setTime(e),this.render())})),E(this,\"onChangeInputRange\",(e=>{let t=e.target;this[t.getAttribute(\"name\")]=t.value,this.updateText(),this.dp.trigger(i.eventChangeTime,{hours:this.hours,minutes:this.minutes})})),E(this,\"onMouseEnterLeave\",(e=>{let t=e.target.getAttribute(\"name\"),i=this.$minutesText;\"hours\"===t&&(i=this.$hoursText),i.classList.toggle(\"-focus-\")})),E(this,\"onFocus\",(()=>{this.toggleTimepickerIsActive(!0)})),E(this,\"onBlur\",(()=>{this.toggleTimepickerIsActive(!1)})),this.opts=e,this.dp=t;let{timeFormat:s}=this.dp.locale;s&&(s.match(k(\"h\"))||s.match(k(\"hh\")))&&(this.ampm=!0),this.init()}init(){this.setTime(this.dp.lastSelectedDate||this.dp.viewDate),this.createElement(),this.buildHtml(),this.defineDOM(),this.render(),this.bindDatepickerEvents(),this.bindDOMEvents()}bindDatepickerEvents(){this.dp.on(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(i.eventChangeLastSelectedDate,this.onChangeLastSelectedDate)}bindDOMEvents(){let e=\"input\";navigator.userAgent.match(/trident/gi)&&(e=\"change\"),D(this.$ranges,e,this.onChangeInputRange),D(this.$ranges,\"mouseenter\",this.onMouseEnterLeave),D(this.$ranges,\"mouseleave\",this.onMouseEnterLeave),D(this.$ranges,\"focus\",this.onFocus),D(this.$ranges,\"mousedown\",this.onFocus),D(this.$ranges,\"blur\",this.onBlur)}createElement(){this.$el=n({className:u(\"air-datepicker-time\",{\"-am-pm-\":this.dp.ampm})})}destroy(){this.dp.off(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(i.eventChangeLastSelectedDate,this.onChangeLastSelectedDate),this.$el.parentNode.removeChild(this.$el)}buildHtml(){let{ampm:e,hours:t,displayHours:i,minutes:s,minHours:a,minMinutes:n,maxHours:r,maxMinutes:o,dayPeriod:h,opts:{hoursStep:l,minutesStep:c}}=this;this.$el.innerHTML=`<div class=\"air-datepicker-time--current\">   <span class=\"air-datepicker-time--current-hours\">${d(i)}</span>   <span class=\"air-datepicker-time--current-colon\">:</span>   <span class=\"air-datepicker-time--current-minutes\">${d(s)}</span>   `+(e?`<span class='air-datepicker-time--current-ampm'>${h}</span>`:\"\")+'</div><div class=\"air-datepicker-time--sliders\">   <div class=\"air-datepicker-time--row\">'+`      <input type=\"range\" name=\"hours\" value=\"${t}\" min=\"${a}\" max=\"${r}\" step=\"${l}\"/>   </div>   <div class=\"air-datepicker-time--row\">`+`      <input type=\"range\" name=\"minutes\" value=\"${s}\" min=\"${n}\" max=\"${o}\" step=\"${c}\"/>   </div></div>`}defineDOM(){let e=e=>a(e,this.$el);this.$ranges=this.$el.querySelectorAll('[type=\"range\"]'),this.$hours=e('[name=\"hours\"]'),this.$minutes=e('[name=\"minutes\"]'),this.$hoursText=e(\".air-datepicker-time--current-hours\"),this.$minutesText=e(\".air-datepicker-time--current-minutes\"),this.$ampm=e(\".air-datepicker-time--current-ampm\")}setTime(e){this.setMinMaxTime(e),this.setCurrentTime(e)}addTimeToDate(e){e&&(e.setHours(this.hours),e.setMinutes(this.minutes))}setMinMaxTime(e){if(this.setMinMaxTimeFromOptions(),e){let{minDate:t,maxDate:i}=this.dp;t&&p(e,t)&&this.setMinTimeFromMinDate(t),i&&p(e,i)&&this.setMaxTimeFromMaxDate(i)}}setCurrentTime(e){let{hours:t,minutes:i}=e?h(e):this;this.hours=f(t,this.minHours,this.maxHours),this.minutes=f(i,this.minMinutes,this.maxMinutes)}setMinMaxTimeFromOptions(){let{minHours:e,minMinutes:t,maxHours:i,maxMinutes:s}=this.opts;this.minHours=f(e,0,23),this.minMinutes=f(t,0,59),this.maxHours=f(i,0,23),this.maxMinutes=f(s,0,59)}setMinTimeFromMinDate(e){let{lastSelectedDate:t}=this.dp;this.minHours=e.getHours(),t&&t.getHours()>e.getHours()?this.minMinutes=this.opts.minMinutes:this.minMinutes=e.getMinutes()}setMaxTimeFromMaxDate(e){let{lastSelectedDate:t}=this.dp;this.maxHours=e.getHours(),t&&t.getHours()<e.getHours()?this.maxMinutes=this.opts.maxMinutes:this.maxMinutes=e.getMinutes()}updateSliders(){r(this.$hours,{min:this.minHours,max:this.maxHours}).value=this.hours,r(this.$minutes,{min:this.minMinutes,max:this.maxMinutes}).value=this.minutes}updateText(){this.$hoursText.innerHTML=d(this.displayHours),this.$minutesText.innerHTML=d(this.minutes),this.ampm&&(this.$ampm.innerHTML=this.dayPeriod)}set hours(e){this._hours=e;let{hours:t,dayPeriod:i}=l(e);this.displayHours=this.ampm?t:e,this.dayPeriod=i}get hours(){return this._hours}render(){this.updateSliders(),this.updateText()}}function O(e,t,i){return(t=function(e){var t=function(e,t){if(\"object\"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,\"string\");if(\"object\"!=typeof s)return s;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class A{constructor(e){let{dp:t,opts:i}=e;O(this,\"pressedKeys\",new Set),O(this,\"hotKeys\",new Map([[[[\"Control\",\"ArrowRight\"],[\"Control\",\"ArrowUp\"]],e=>e.month++],[[[\"Control\",\"ArrowLeft\"],[\"Control\",\"ArrowDown\"]],e=>e.month--],[[[\"Shift\",\"ArrowRight\"],[\"Shift\",\"ArrowUp\"]],e=>e.year++],[[[\"Shift\",\"ArrowLeft\"],[\"Shift\",\"ArrowDown\"]],e=>e.year--],[[[\"Alt\",\"ArrowRight\"],[\"Alt\",\"ArrowUp\"]],e=>e.year+=10],[[[\"Alt\",\"ArrowLeft\"],[\"Alt\",\"ArrowDown\"]],e=>e.year-=10],[[\"Control\",\"Shift\",\"ArrowUp\"],(e,t)=>t.up()]])),O(this,\"handleHotKey\",(e=>{let t=this.hotKeys.get(e),i=h(this.getInitialFocusDate());t(i,this.dp);let{year:s,month:a,date:n}=i,r=o(new Date(s,a));r<n&&(n=r);let l=this.dp.getClampedDate(new Date(s,a,n));this.dp.setFocusDate(l,{viewDateTransition:!0})})),O(this,\"isHotKeyPressed\",(()=>{let e=!1,t=this.pressedKeys.size,i=e=>this.pressedKeys.has(e);for(let[s]of this.hotKeys){if(e)break;if(Array.isArray(s[0]))s.forEach((a=>{e||t!==a.length||(e=a.every(i)&&s)}));else{if(t!==s.length)continue;e=s.every(i)&&s}}return e})),O(this,\"isArrow\",(e=>e>=37&&e<=40)),O(this,\"onKeyDown\",(e=>{let{key:t,which:i}=e,{dp:s,dp:{focusDate:a},opts:n}=this;this.registerKey(t);let r=this.isHotKeyPressed();if(r)return e.preventDefault(),void this.handleHotKey(r);if(this.isArrow(i))return e.preventDefault(),void this.focusNextCell(t);if(\"Enter\"===t){if(s.currentView!==n.minView)return void s.down();if(a){let e=s._checkIfDateIsSelected(a);return void(e?s._handleAlreadySelectedDates(e,a):s.selectDate(a))}}\"Escape\"===t&&this.dp.hide()})),O(this,\"onKeyUp\",(e=>{this.removeKey(e.key)})),this.dp=t,this.opts=i,this.init()}init(){this.bindKeyboardEvents()}bindKeyboardEvents(){let{$el:e}=this.dp;e.addEventListener(\"keydown\",this.onKeyDown),e.addEventListener(\"keyup\",this.onKeyUp)}destroy(){let{$el:e}=this.dp;e.removeEventListener(\"keydown\",this.onKeyDown),e.removeEventListener(\"keyup\",this.onKeyUp),this.hotKeys=null,this.pressedKeys=null}getInitialFocusDate(){let{focusDate:e,currentView:t,selectedDates:s,parsedViewDate:{year:a,month:n}}=this.dp,r=e||s[s.length-1];if(!r)switch(t){case i.days:r=new Date(a,n,(new Date).getDate());break;case i.months:r=new Date(a,n,1);break;case i.years:r=new Date(a,0,1)}return r}focusNextCell(e){let t=this.getInitialFocusDate(),{currentView:s}=this.dp,{days:a,months:n,years:r}=i,o=h(t),l=o.year,d=o.month,c=o.date;switch(e){case\"ArrowLeft\":s===a&&(c-=1),s===n&&(d-=1),s===r&&(l-=1);break;case\"ArrowUp\":s===a&&(c-=7),s===n&&(d-=3),s===r&&(l-=4);break;case\"ArrowRight\":s===a&&(c+=1),s===n&&(d+=1),s===r&&(l+=1);break;case\"ArrowDown\":s===a&&(c+=7),s===n&&(d+=3),s===r&&(l+=4)}let u=this.dp.getClampedDate(new Date(l,d,c));this.dp.setFocusDate(u,{viewDateTransition:!0})}registerKey(e){this.pressedKeys.add(e)}removeKey(e){this.pressedKeys.delete(e)}}let N={on(e,t){this.__events||(this.__events={}),this.__events[e]?this.__events[e].push(t):this.__events[e]=[t]},off(e,t){this.__events&&this.__events[e]&&(this.__events[e]=this.__events[e].filter((e=>e!==t)))},removeAllEvents(){this.__events={}},trigger(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];this.__events&&this.__events[e]&&this.__events[e].forEach((e=>{e(...i)}))}};function I(e,t,i){return(t=function(e){var t=function(e,t){if(\"object\"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,\"string\");if(\"object\"!=typeof s)return s;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let P=\"\",j=\"\",B=!1;class R{static buildGlobalContainer(e){B=!0,P=n({className:e,id:e}),a(\"body\").appendChild(P)}constructor(e,t){var r=this;if(I(this,\"viewIndexes\",[i.days,i.months,i.years]),I(this,\"next\",(()=>{let{year:e,month:t}=this.parsedViewDate;switch(this.currentView){case i.days:this.setViewDate(new Date(e,t+1,1));break;case i.months:this.setViewDate(new Date(e+1,t,1));break;case i.years:this.setViewDate(new Date(e+10,0,1))}})),I(this,\"prev\",(()=>{let{year:e,month:t}=this.parsedViewDate;switch(this.currentView){case i.days:this.setViewDate(new Date(e,t-1,1));break;case i.months:this.setViewDate(new Date(e-1,t,1));break;case i.years:this.setViewDate(new Date(e-10,0,1))}})),I(this,\"_finishHide\",(()=>{this.hideAnimation=!1,this._destroyComponents(),this.$container.removeChild(this.$datepicker)})),I(this,\"setPosition\",(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(\"function\"==typeof(e=e||r.opts.position))return void(r.customHide=e({$datepicker:r.$datepicker,$target:r.$el,$pointer:r.$pointer,isViewChange:t,done:r._finishHide}));let i,s,{isMobile:a}=r.opts,n=r.$el.getBoundingClientRect(),o=r.$el.getBoundingClientRect(),h=r.$datepicker.offsetParent,l=r.$el.offsetParent,d=r.$datepicker.getBoundingClientRect(),c=e.split(\" \"),u=window.scrollY,p=window.scrollX,m=r.opts.offset,v=c[0],g=c[1];if(a)r.$datepicker.style.cssText=\"left: 50%; top: 50%\";else{if(h===l&&h!==document.body&&(o={top:r.$el.offsetTop,left:r.$el.offsetLeft,width:n.width,height:r.$el.offsetHeight},u=0,p=0),h!==l&&h!==document.body){let e=h.getBoundingClientRect();o={top:n.top-e.top,left:n.left-e.left,width:n.width,height:n.height},u=0,p=0}switch(v){case\"top\":i=o.top-d.height-m;break;case\"right\":s=o.left+o.width+m;break;case\"bottom\":i=o.top+o.height+m;break;case\"left\":s=o.left-d.width-m}switch(g){case\"top\":i=o.top;break;case\"right\":s=o.left+o.width-d.width;break;case\"bottom\":i=o.top+o.height-d.height;break;case\"left\":s=o.left;break;case\"center\":/left|right/.test(v)?i=o.top+o.height/2-d.height/2:s=o.left+o.width/2-d.width/2}r.$datepicker.style.cssText=`left: ${s+p}px; top: ${i+u}px`}})),I(this,\"_setInputValue\",(()=>{let{opts:e,$altField:t,locale:{dateFormat:i}}=this,{altFieldDateFormat:s,altField:a}=e;a&&t&&(t.value=this._getInputValue(s)),this.$el.value=this._getInputValue(i)})),I(this,\"_getInputValue\",(e=>{let{selectedDates:t,opts:i}=this,{multipleDates:s,multipleDatesSeparator:a}=i;if(!t.length)return\"\";let n=\"function\"==typeof e,r=n?e(s?t:t[0]):t.map((t=>this.formatDate(t,e)));return r=n?r:r.join(a),r})),I(this,\"_checkIfDateIsSelected\",(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.days,s=!1;return r.selectedDates.some((i=>{let a=p(e,i,t);return s=a&&i,a})),s})),I(this,\"_scheduleCallAfterTransition\",(e=>{this._cancelScheduledCall(),e&&e(!1),this._onTransitionEnd=()=>{e&&e(!0)},this.$datepicker.addEventListener(\"transitionend\",this._onTransitionEnd,{once:!0})})),I(this,\"_cancelScheduledCall\",(()=>{this.$datepicker.removeEventListener(\"transitionend\",this._onTransitionEnd)})),I(this,\"setViewDate\",(e=>{if(!((e=b(e))instanceof Date))return;if(p(e,this.viewDate))return;let t=this.viewDate;this.viewDate=e;let{onChangeViewDate:s}=this.opts;if(s){let{month:e,year:t}=this.parsedViewDate;s({month:e,year:t,decade:this.curDecade})}this.trigger(i.eventChangeViewDate,e,t)})),I(this,\"setFocusDate\",(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!e||(e=b(e))instanceof Date)&&(r.focusDate=e,r.trigger(i.eventChangeFocusDate,e,t))})),I(this,\"setCurrentView\",(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r.viewIndexes.includes(e)){if(r.currentView=e,r.elIsInput&&r.visible&&r.setPosition(void 0,!0),r.trigger(i.eventChangeCurrentView,e),!r.views[e]){let t=r.views[e]=new T({dp:r,opts:r.opts,type:e});r.shouldUpdateDOM&&r.$content.appendChild(t.$el)}r.opts.onChangeView&&!t.silent&&r.opts.onChangeView(e)}})),I(this,\"_updateLastSelectedDate\",(e=>{this.lastSelectedDate=e,this.trigger(i.eventChangeLastSelectedDate,e)})),I(this,\"destroy\",(()=>{if(this.isDestroyed)return;let{showEvent:e,isMobile:t}=this.opts,i=this.$datepicker.parentNode;i&&i.removeChild(this.$datepicker),this.$el.removeEventListener(e,this._onFocus),this.$el.removeEventListener(\"blur\",this._onBlur),window.removeEventListener(\"resize\",this._onResize),t&&this._removeMobileAttributes(),this.keyboardNav&&this.keyboardNav.destroy(),this.views=null,this.nav=null,this.$datepicker=null,this.opts={},this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDates=[],this.rangeDateFrom=null,this.rangeDateTo=null,this.isDestroyed=!0})),I(this,\"update\",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=w({},r.opts),{silent:a}=t;w(r.opts,e);let{timepicker:n,buttons:o,range:h,selectedDates:l,isMobile:d}=r.opts,c=r.visible||r.treatAsInline;r._createMinMaxDates(),r._limitViewDateByMaxMinDates(),r._handleLocale(),l&&(r.selectedDates=[],r.selectDate(l,{silent:a})),e.view&&r.setCurrentView(e.view,{silent:a}),r._setInputValue(),s.range&&!h?(r.rangeDateTo=!1,r.rangeDateFrom=!1):!s.range&&h&&r.selectedDates.length&&(r.rangeDateFrom=r.selectedDates[0],r.rangeDateTo=r.selectedDates[1]),s.timepicker&&!n?(c&&r.timepicker.destroy(),r.timepicker=!1,r.$timepicker.parentNode.removeChild(r.$timepicker)):!s.timepicker&&n&&r._addTimepicker(),!s.buttons&&o?r._addButtons():s.buttons&&!o?(r.buttons.destroy(),r.$buttons.parentNode.removeChild(r.$buttons)):c&&s.buttons&&o&&r.buttons.clearHtml().render(),!s.isMobile&&d?(r.treatAsInline||j||r._createMobileOverlay(),r._addMobileAttributes(),r.visible&&r._showMobileOverlay()):s.isMobile&&!d&&(r._removeMobileAttributes(),r.visible&&(j.classList.remove(\"-active-\"),\"function\"!=typeof r.opts.position&&r.setPosition())),c&&(r.nav.update(),r.views[r.currentView].render(),r.currentView===i.days&&r.views[r.currentView].renderDayNames())})),I(this,\"disableDate\",((e,t)=>{(Array.isArray(e)?e:[e]).forEach((e=>{let i=b(e);if(!i)return;let s=t?\"delete\":\"add\";this.disabledDates[s](this.formatDate(i,\"yyyy-MM-dd\"));let a=this.getCell(i,this.currentViewSingular);a&&a.adpCell.render()}),[])})),I(this,\"enableDate\",(e=>{this.disableDate(e,!0)})),I(this,\"isDateDisabled\",(e=>{let t=b(e);return this.disabledDates.has(this.formatDate(t,\"yyyy-MM-dd\"))})),I(this,\"isOtherMonth\",(e=>{let{month:t}=h(e);return t!==this.parsedViewDate.month})),I(this,\"isOtherYear\",(e=>{let{year:t}=h(e);return t!==this.parsedViewDate.year})),I(this,\"isOtherDecade\",(e=>{let{year:t}=h(e),[i,s]=c(this.viewDate);return t<i||t>s})),I(this,\"_onChangeSelectedDate\",(e=>{let{silent:t}=e;setTimeout((()=>{this._setInputValue(),this.opts.onSelect&&!t&&this._triggerOnSelect()}))})),I(this,\"_onChangeFocusedDate\",(function(e){let{viewDateTransition:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return;let i=!1;t&&(i=r.isOtherMonth(e)||r.isOtherYear(e)||r.isOtherDecade(e)),i&&r.setViewDate(e),r.opts.onFocus&&r.opts.onFocus({datepicker:r,date:e})})),I(this,\"_onChangeTime\",(e=>{let{hours:t,minutes:i}=e,s=new Date,{lastSelectedDate:a,opts:{onSelect:n}}=this,r=a;a||(r=s);let o=this.getCell(r,this.currentViewSingular),h=o&&o.adpCell;h&&h.isDisabled||(r.setHours(t),r.setMinutes(i),a?(this._setInputValue(),n&&this._triggerOnSelect()):this.selectDate(r))})),I(this,\"_onFocus\",(e=>{this.visible||this.show()})),I(this,\"_onBlur\",(e=>{this.inFocus||!this.visible||this.opts.isMobile||this.hide()})),I(this,\"_onMouseDown\",(e=>{this.inFocus=!0})),I(this,\"_onMouseUp\",(e=>{this.inFocus=!1,this.$el.focus()})),I(this,\"_onResize\",(()=>{this.visible&&\"function\"!=typeof this.opts.position&&this.setPosition()})),I(this,\"_onClickOverlay\",(()=>{this.visible&&this.hide()})),I(this,\"getViewDates\",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.days;return T.getDatesFunction(e)(r)})),I(this,\"isWeekend\",(e=>this.opts.weekends.includes(e))),I(this,\"getClampedDate\",(e=>{let{minDate:t,maxDate:i}=this,s=e;return i&&m(e,i)?s=i:t&&v(e,t)&&(s=t),s})),this.$el=a(e),!this.$el)return;this.$datepicker=n({className:\"air-datepicker\"}),this.opts=w({},s,t),this.$customContainer=!!this.opts.container&&a(this.opts.container),this.$altField=a(this.opts.altField||!1);let{view:o,startDate:l}=this.opts;l||(this.opts.startDate=new Date),\"INPUT\"===this.$el.nodeName&&(this.elIsInput=!0),this.inited=!1,this.visible=!1,this.viewDate=b(this.opts.startDate),this.focusDate=!1,this.initialReadonly=this.$el.getAttribute(\"readonly\"),this.customHide=!1,this.currentView=o,this.selectedDates=[],this.disabledDates=new Set,this.isDestroyed=!1,this.views={},this.keys=[],this.rangeDateFrom=\"\",this.rangeDateTo=\"\",this.timepickerIsActive=!1,this.treatAsInline=this.opts.inline||!this.elIsInput,this.init()}init(){let{opts:e,treatAsInline:t,opts:{inline:i,isMobile:s,selectedDates:n,keyboardNav:r,onlyTimepicker:o}}=this,h=a(\"body\");(!B||B&&P&&!h.contains(P))&&!i&&this.elIsInput&&!this.$customContainer&&R.buildGlobalContainer(R.defaultGlobalContainerId),!s||j||t||this._createMobileOverlay(),this._handleLocale(),this._bindSubEvents(),this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this.elIsInput&&(i||this._bindEvents(),r&&!o&&(this.keyboardNav=new A({dp:this,opts:e}))),n&&this.selectDate(n,{silent:!0}),this.opts.visible&&!t&&this.show(),s&&!t&&this.$el.setAttribute(\"readonly\",!0),t&&this._createComponents()}_createMobileOverlay(){j=n({className:\"air-datepicker-overlay\"}),P.appendChild(j)}_createComponents(){let{opts:e,treatAsInline:t,opts:{inline:i,buttons:s,timepicker:a,position:n,classes:r,onlyTimepicker:o,isMobile:h}}=this;this._buildBaseHtml(),this.elIsInput&&(i||this._setPositionClasses(n)),!i&&this.elIsInput||this.$datepicker.classList.add(\"-inline-\"),r&&this.$datepicker.classList.add(...r.split(\" \")),o&&this.$datepicker.classList.add(\"-only-timepicker-\"),h&&!t&&this._addMobileAttributes(),this.views[this.currentView]=new T({dp:this,type:this.currentView,opts:e}),this.nav=new V({dp:this,opts:e}),a&&this._addTimepicker(),s&&this._addButtons(),this.$content.appendChild(this.views[this.currentView].$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){for(let e in this.views)this.views[e].destroy();this.views={},this.nav.destroy(),this.timepicker&&this.timepicker.destroy()}_addMobileAttributes(){j.addEventListener(\"click\",this._onClickOverlay),this.$datepicker.classList.add(\"-is-mobile-\"),this.$el.setAttribute(\"readonly\",!0)}_removeMobileAttributes(){j.removeEventListener(\"click\",this._onClickOverlay),this.$datepicker.classList.remove(\"-is-mobile-\"),this.initialReadonly||\"\"===this.initialReadonly||this.$el.removeAttribute(\"readonly\")}_createMinMaxDates(){let{minDate:e,maxDate:t}=this.opts;this.minDate=!!e&&b(e),this.maxDate=!!t&&b(t)}_addTimepicker(){this.$timepicker=n({className:\"air-datepicker--time\"}),this.$datepicker.appendChild(this.$timepicker),this.timepicker=new L({dp:this,opts:this.opts}),this.$timepicker.appendChild(this.timepicker.$el)}_addButtons(){this.$buttons=n({className:\"air-datepicker--buttons\"}),this.$datepicker.appendChild(this.$buttons),this.buttons=new H({dp:this,opts:this.opts}),this.$buttons.appendChild(this.buttons.$el)}_bindSubEvents(){this.on(i.eventChangeSelectedDate,this._onChangeSelectedDate),this.on(i.eventChangeFocusDate,this._onChangeFocusedDate),this.on(i.eventChangeTime,this._onChangeTime)}_buildBaseHtml(){let{inline:e}=this.opts;var t,i;this.elIsInput?e?(t=this.$datepicker,(i=this.$el).parentNode.insertBefore(t,i.nextSibling)):this.$container.appendChild(this.$datepicker):this.$el.appendChild(this.$datepicker),this.$datepicker.innerHTML='<i class=\"air-datepicker--pointer\"></i><div class=\"air-datepicker--navigation\"></div><div class=\"air-datepicker--content\"></div>',this.$content=a(\".air-datepicker--content\",this.$datepicker),this.$pointer=a(\".air-datepicker--pointer\",this.$datepicker),this.$nav=a(\".air-datepicker--navigation\",this.$datepicker)}_handleLocale(){let{locale:e,dateFormat:t,firstDay:i,timepicker:s,onlyTimepicker:a,timeFormat:n,dateTimeSeparator:r}=this.opts;var o;this.locale=(o=e,JSON.parse(JSON.stringify(o))),t&&(this.locale.dateFormat=t),void 0!==n&&\"\"!==n&&(this.locale.timeFormat=n);let{timeFormat:h}=this.locale;if(\"\"!==i&&(this.locale.firstDay=i),s&&\"function\"!=typeof t){let e=h?r:\"\";this.locale.dateFormat=[this.locale.dateFormat,h||\"\"].join(e)}a&&\"function\"!=typeof t&&(this.locale.dateFormat=this.locale.timeFormat)}_setPositionClasses(e){if(\"function\"==typeof e)return void this.$datepicker.classList.add(\"-custom-position-\");let t=(e=e.split(\" \"))[0],i=`air-datepicker -${t}-${e[1]}- -from-${t}-`;this.$datepicker.classList.add(...i.split(\" \"))}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$el.addEventListener(\"blur\",this._onBlur),this.$datepicker.addEventListener(\"mousedown\",this._onMouseDown),this.$datepicker.addEventListener(\"mouseup\",this._onMouseUp),window.addEventListener(\"resize\",this._onResize)}_limitViewDateByMaxMinDates(){let{viewDate:e,minDate:t,maxDate:i}=this;i&&m(e,i)&&this.setViewDate(i),t&&v(e,t)&&this.setViewDate(t)}formatDate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewDate,t=arguments.length>1?arguments[1]:void 0;if(e=b(e),!(e instanceof Date))return;let i=t,s=this.locale,a=h(e),n=a.dayPeriod,r=c(e),o=R.replacer,l={T:e.getTime(),m:a.minutes,mm:a.fullMinutes,h:a.hours12,hh:a.fullHours12,H:a.hours,HH:a.fullHours,aa:n,AA:n.toUpperCase(),E:s.daysShort[a.day],EEEE:s.days[a.day],d:a.date,dd:a.fullDate,M:a.month+1,MM:a.fullMonth,MMM:s.monthsShort[a.month],MMMM:s.months[a.month],yy:a.year.toString().slice(-2),yyyy:a.year,yyyy1:r[0],yyyy2:r[1]};for(let[e,t]of Object.entries(l))i=o(i,k(e),t);return i}down(e){this._handleUpDownActions(e,\"down\")}up(e){this._handleUpDownActions(e,\"up\")}selectDate(e){let t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{currentView:a,parsedViewDate:n,selectedDates:r}=this,{updateTime:o}=s,{moveToOtherMonthsOnSelect:h,moveToOtherYearsOnSelect:l,multipleDates:d,range:c,autoClose:u,onBeforeSelect:p}=this.opts,v=r.length;if(Array.isArray(e))return e.forEach((e=>{this.selectDate(e,s)})),new Promise((e=>{setTimeout(e)}));if((e=b(e))instanceof Date){if(p&&!p({date:e,datepicker:this}))return Promise.resolve();if(a===i.days&&e.getMonth()!==n.month&&h&&(t=new Date(e.getFullYear(),e.getMonth(),1)),a===i.years&&e.getFullYear()!==n.year&&l&&(t=new Date(e.getFullYear(),0,1)),t&&this.setViewDate(t),d&&!c){if(v===d)return;this._checkIfDateIsSelected(e)||r.push(e)}else if(c)switch(v){case 1:r.push(e),this.rangeDateTo||(this.rangeDateTo=e),m(this.rangeDateFrom,this.rangeDateTo)&&(this.rangeDateTo=this.rangeDateFrom,this.rangeDateFrom=e),this.selectedDates=[this.rangeDateFrom,this.rangeDateTo];break;case 2:this.selectedDates=[e],this.rangeDateFrom=e,this.rangeDateTo=\"\";break;default:this.selectedDates=[e],this.rangeDateFrom=e}else this.selectedDates=[e];return this.trigger(i.eventChangeSelectedDate,{action:i.actionSelectDate,silent:null==s?void 0:s.silent,date:e,updateTime:o}),this._updateLastSelectedDate(e),u&&!this.timepickerIsActive&&this.visible&&(d||c?c&&1===v&&this.hide():this.hide()),new Promise((e=>{setTimeout(e)}))}}unselectDate(e){let t=this.selectedDates,s=this;if((e=b(e))instanceof Date)return t.some(((a,n)=>{if(p(a,e))return t.splice(n,1),s.selectedDates.length?(s.rangeDateTo=\"\",s.rangeDateFrom=t[0],s._updateLastSelectedDate(s.selectedDates[s.selectedDates.length-1])):(s.rangeDateFrom=\"\",s.rangeDateTo=\"\",s._updateLastSelectedDate(!1)),this.trigger(i.eventChangeSelectedDate,{action:i.actionUnselectDate,date:e}),!0}))}replaceDate(e,t){let s=this.selectedDates.find((t=>p(t,e,this.currentView))),a=this.selectedDates.indexOf(s);a<0||p(this.selectedDates[a],t,this.currentView)||(this.selectedDates[a]=t,this.trigger(i.eventChangeSelectedDate,{action:i.actionSelectDate,date:t,updateTime:!0}),this._updateLastSelectedDate(t))}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.selectedDates=[],this.rangeDateFrom=!1,this.rangeDateTo=!1,this.lastSelectedDate=!1,this.trigger(i.eventChangeSelectedDate,{action:i.actionUnselectDate,silent:e.silent}),new Promise((e=>{setTimeout(e)}))}show(){let{onShow:e,isMobile:t}=this.opts;this._cancelScheduledCall(),this.visible||this.hideAnimation||this._createComponents(),this.setPosition(this.opts.position),this.$datepicker.classList.add(\"-active-\"),this.visible=!0,e&&this._scheduleCallAfterTransition(e),t&&this._showMobileOverlay()}hide(){let{onHide:e,isMobile:t}=this.opts,i=this._hasTransition();this.visible=!1,this.hideAnimation=!0,this.$datepicker.classList.remove(\"-active-\"),this.customHide&&this.customHide(),this.elIsInput&&this.$el.blur(),this._scheduleCallAfterTransition((t=>{!this.customHide&&(t&&i||!t&&!i)&&this._finishHide(),e&&e(t)})),t&&j.classList.remove(\"-active-\")}_triggerOnSelect(){let e=[],t=[],{selectedDates:i,locale:s,opts:{onSelect:a,multipleDates:n,range:r}}=this,o=n||r,h=\"function\"==typeof s.dateFormat;i.length&&(e=i.map(g),t=h?n?s.dateFormat(e):e.map((e=>s.dateFormat(e))):e.map((e=>this.formatDate(e,s.dateFormat)))),a({date:o?e:e[0],formattedDate:o?t:t[0],datepicker:this})}_handleAlreadySelectedDates(e,t){let{selectedDates:i,rangeDateFrom:s,rangeDateTo:a}=this,{range:n,toggleSelected:r}=this.opts,o=i.length,h=\"function\"==typeof r?r({datepicker:this,date:t}):r,l=Boolean(n&&1===o&&e),d=l?g(t):t;n&&!h&&(2!==o&&this.selectDate(d),2===o&&p(s,a))||(h?this.unselectDate(d):this._updateLastSelectedDate(l?d:e))}_handleUpDownActions(e,t){if(!((e=b(e||this.focusDate||this.viewDate))instanceof Date))return;let i=\"up\"===t?this.viewIndex+1:this.viewIndex-1;i>2&&(i=2),i<0&&(i=0),this.setViewDate(new Date(e.getFullYear(),e.getMonth(),1)),this.setCurrentView(this.viewIndexes[i])}getCell(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.day;if(!((e=b(e))instanceof Date))return;let{year:s,month:a,date:n}=h(e),r=`[data-year=\"${s}\"]`,o=`[data-month=\"${a}\"]`,l={[i.day]:`${r}${o}[data-date=\"${n}\"]`,[i.month]:`${r}${o}`,[i.year]:`${r}`};return this.views[this.currentView]?this.views[this.currentView].$el.querySelector(l[t]):void 0}_showMobileOverlay(){j.classList.add(\"-active-\")}_hasTransition(){return window.getComputedStyle(this.$datepicker).getPropertyValue(\"transition-duration\").split(\", \").reduce(((e,t)=>parseFloat(t)+e),0)>0}get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return h(this.viewDate)}get currentViewSingular(){return this.currentView.slice(0,-1)}get curDecade(){return c(this.viewDate)}get viewIndex(){return this.viewIndexes.indexOf(this.currentView)}get isFinalView(){return this.currentView===i.years}get hasSelectedDates(){return this.selectedDates.length>0}get isMinViewReached(){return this.currentView===this.opts.minView||this.currentView===i.days}get $container(){return this.$customContainer||P}static replacer(e,t,i){return e.replace(t,(function(e,t,s,a){return t+i+a}))}}var K;return I(R,\"defaults\",s),I(R,\"version\",\"3.5.3\"),I(R,\"defaultGlobalContainerId\",\"air-datepicker-global-container\"),K=R.prototype,Object.assign(K,N),t.default}()}));","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _default = {\n  days: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n  daysShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n  daysMin: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],\n  months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n  monthsShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n  today: 'Today',\n  clear: 'Clear',\n  dateFormat: 'MM/dd/yyyy',\n  timeFormat: 'hh:mm aa',\n  firstDay: 0\n};\nexports.default = _default;","@import url('../../../assets/air-datepicker.css');\r\n/* @import url('../../assets/tempus-dominus.min.css'); */\r\n:host {\r\n  display: block;\r\n}\r\n.air-datepicker {\r\n  font-size: auto;\r\n}\r\n.air-datepicker-body--day-name {\r\n  color: #000;\r\n  font-weight: 700;\r\n}\r\n.air-datepicker-cell.-selected-,\r\n.air-datepicker-cell.-selected-.-focus-,\r\n.air-datepicker-cell.-selected-.-current- {\r\n  background: #1e9ff2;\r\n}\r\n.air-datepicker-cell.-disabled- {\r\n  text-decoration: line-through;\r\n}\r\n.air-datepicker-cell.-current- {\r\n  color: #1e9ff2;\r\n}\r\n.ir-date-picker-trigger {\r\n  position: relative;\r\n  box-sizing: border-box;\r\n  width: fit-content;\r\n  height: fit-content;\r\n}\r\n.ir-date-picker-element {\r\n  position: absolute;\r\n  inset: 0;\r\n  opacity: 0;\r\n  cursor: pointer;\r\n}\r\n","import { createPopper } from '@popperjs/core';\r\nimport { Component, h, Prop, Element, Event, EventEmitter, Method, Watch, State } from '@stencil/core';\r\nimport AirDatepicker from 'air-datepicker';\r\nimport localeEn from 'air-datepicker/locale/en';\r\nimport moment from 'moment';\r\n\r\n@Component({\r\n  tag: 'ir-date-picker',\r\n  styleUrl: 'ir-date-picker.css',\r\n  shadow: false,\r\n})\r\nexport class IrDatePicker {\r\n  @Element() el: HTMLElement;\r\n\r\n  /**\r\n   * Determines whether the date picker is rendered inline or in a pop-up.\r\n   * If `true`, the picker is always visible inline.\r\n   */\r\n  @Prop() inline: boolean = false;\r\n\r\n  /**\r\n   * The initially selected date; can be a `Date` object or a string recognized by `AirDatepicker`.\r\n   */\r\n  @Prop({ mutable: true, reflect: true }) date: string | Date | null = null;\r\n\r\n  /**\r\n   * Enables multiple dates.\r\n   * If `true`, multiple selection is allowed.\r\n   * If you pass a number (e.g. 3), that is the maximum number of selectable dates.\r\n   */\r\n  @Prop() multipleDates: boolean | number = false;\r\n\r\n  /**\r\n   * Whether the picker should allow range selection (start and end date).\r\n   */\r\n  @Prop() range: boolean = false;\r\n\r\n  /**\r\n   * Format for the date as it appears in the input field.\r\n   * Follows the `AirDatepicker` format rules.\r\n   */\r\n  @Prop() dateFormat: string = 'yyyy-MM-dd';\r\n\r\n  /**\r\n   * Enables the timepicker functionality (select hours and minutes).\r\n   */\r\n  @Prop() timepicker: boolean = false;\r\n\r\n  /**\r\n   * The earliest date that can be selected.\r\n   */\r\n  @Prop() minDate?: string | Date;\r\n\r\n  /**\r\n   * The latest date that can be selected.\r\n   */\r\n  @Prop() maxDate?: string | Date;\r\n\r\n  /**\r\n   * Disables the input and prevents interaction.\r\n   */\r\n  @Prop() disabled: boolean = false;\r\n\r\n  /**\r\n   * Closes the picker automatically after a date is selected.\r\n   */\r\n  @Prop() autoClose: boolean = true;\r\n\r\n  /**\r\n   * Shows days from previous/next month in the current month's calendar.\r\n   */\r\n  @Prop() showOtherMonths: boolean = true;\r\n\r\n  /**\r\n   * Allows selecting days from previous/next month shown in the current view.\r\n   */\r\n  @Prop() selectOtherMonths: boolean = true;\r\n\r\n  /**\r\n   * Controls how the date picker is triggered.\r\n   * - **`true`**: The picker can be triggered by custom UI elements (provided via a `<slot name=\"trigger\">`).\r\n   * - **`false`**: A default button input is used to open the picker.\r\n   *\r\n   * Defaults to `true`.\r\n   */\r\n  @Prop() customPicker: boolean = true;\r\n\r\n  /**\r\n   * Pass a container element if you need the date picker to be appended to a specific element\r\n   * for styling or positioning (particularly for arrow rendering).\r\n   * If not provided, it defaults to `this.el`.\r\n   */\r\n  @Prop() container?: HTMLElement;\r\n\r\n  /**\r\n   * If `true`, the date picker instance is destroyed and rebuilt each time the `date` prop changes.\r\n   * This can be useful if you need the picker to fully re-initialize in response to dynamic changes,\r\n   * but note that it may affect performance if triggered frequently.\r\n   * Defaults to `false`.\r\n   */\r\n  @Prop() forceDestroyOnUpdate: boolean = false;\r\n\r\n  /**\r\n   * If `true`, the component will emit a `dateChanged` event when the selected date becomes empty (null).\r\n   * Otherwise, empty-date changes will be ignored (no event emitted).\r\n   *\r\n   * Defaults to `false`.\r\n   */\r\n  @Prop() emitEmptyDate: boolean = false;\r\n\r\n  @State() currentDate: Date | null = null;\r\n\r\n  @Event() dateChanged: EventEmitter<{\r\n    start: moment.Moment;\r\n    end: moment.Moment;\r\n  }>;\r\n  @Event() datePickerFocus: EventEmitter<void>;\r\n  @Event() datePickerBlur: EventEmitter<void>;\r\n\r\n  private pickerRef!: HTMLInputElement;\r\n  private datePicker!: AirDatepicker<HTMLElement>;\r\n  private openDatePickerTimeout?: ReturnType<typeof setTimeout>;\r\n  private triggerSlot: HTMLElement | null = null;\r\n\r\n  componentWillLoad() {\r\n    // Sync initial @Prop to internal state\r\n    if (this.date) {\r\n      this.currentDate = this.toValidDate(this.date);\r\n    }\r\n  }\r\n\r\n  componentDidLoad() {\r\n    this.initializeDatepicker();\r\n    this.setupTriggerFocusHandling();\r\n  }\r\n\r\n  /**\r\n   * Set up focus handling for the custom trigger slot\r\n   */\r\n  private setupTriggerFocusHandling() {\r\n    if (!this.customPicker) return;\r\n\r\n    // Get the slot element\r\n    const slotEl = this.el.querySelector('[slot=\"trigger\"]') as HTMLSlotElement;\r\n    if (!slotEl) return;\r\n\r\n    // We'll consider the first assigned element as our trigger\r\n    this.triggerSlot = slotEl as HTMLElement;\r\n\r\n    // Add focus event listener to the trigger element\r\n    this.triggerSlot.addEventListener('focus', this.handleTriggerFocus.bind(this));\r\n\r\n    // Also handle click events on the trigger\r\n    this.triggerSlot.addEventListener('click', this.handleTriggerClick.bind(this));\r\n  }\r\n\r\n  private handleTriggerFocus() {\r\n    if (this.disabled) return;\r\n    this.openDatePicker();\r\n  }\r\n\r\n  private handleTriggerClick(event: Event) {\r\n    if (this.disabled) return;\r\n    event.preventDefault();\r\n    this.openDatePicker();\r\n  }\r\n\r\n  @Watch('date')\r\n  datePropChanged(newDate: string | Date | null, oldDate: string | Date | null) {\r\n    if (this.isSameDates(newDate, oldDate)) {\r\n      return;\r\n    }\r\n    this.updatePickerDate(newDate);\r\n  }\r\n\r\n  @Watch('minDate')\r\n  minDatePropChanged(newVal: string | Date, oldVal: string | Date) {\r\n    if (!this.datePicker) {\r\n      return;\r\n    }\r\n    if (!this.isSameDates(newVal, oldVal)) {\r\n      this.datePicker?.update({ minDate: this.toValidDate(newVal) });\r\n    }\r\n  }\r\n\r\n  @Watch('maxDate')\r\n  maxDatePropChanged(newVal: string | Date, oldVal: string | Date) {\r\n    if (!this.isSameDates(newVal, oldVal)) {\r\n      this.datePicker?.update({ maxDate: this.toValidDate(newVal) });\r\n    }\r\n  }\r\n\r\n  @Method()\r\n  async openDatePicker() {\r\n    // small delay to let the input mount if needed\r\n    this.openDatePickerTimeout = setTimeout(() => {\r\n      this.pickerRef.focus();\r\n    }, 20);\r\n  }\r\n\r\n  @Method()\r\n  async clearDatePicker() {\r\n    this.datePicker?.clear();\r\n  }\r\n\r\n  private isSameDates(d1: string | Date | null, d2: string | Date | null): boolean {\r\n    if (!d1 && !d2) return true;\r\n    if (!d1 || !d2) return false;\r\n    return moment(d1).isSame(moment(d2), 'day');\r\n  }\r\n\r\n  private toValidDate(value: string | Date | null): Date | null {\r\n    if (!value) return null;\r\n    const d = new Date(value);\r\n    return isNaN(d.getTime()) ? null : d;\r\n  }\r\n\r\n  private updatePickerDate(newDate: string | Date | null) {\r\n    const valid = this.toValidDate(newDate);\r\n\r\n    if (!valid) {\r\n      // If invalid or null, just clear\r\n      this.datePicker?.clear();\r\n      this.currentDate = null;\r\n      return;\r\n    }\r\n\r\n    // If it's a truly new date, select it\r\n    if (!this.isSameDates(this.currentDate, valid)) {\r\n      this.currentDate = valid;\r\n      if (this.forceDestroyOnUpdate) {\r\n        this.datePicker.destroy();\r\n        this.datePicker = null;\r\n        this.initializeDatepicker();\r\n      } else {\r\n        this.datePicker?.selectDate(valid);\r\n      }\r\n    }\r\n  }\r\n\r\n  private initializeDatepicker() {\r\n    if (this.datePicker) return;\r\n\r\n    this.datePicker = new AirDatepicker(this.pickerRef, {\r\n      container: this.container,\r\n      inline: this.inline,\r\n      selectedDates: this.date ? [this.date] : [],\r\n      multipleDates: this.multipleDates,\r\n      range: this.range,\r\n      dateFormat: this.dateFormat,\r\n      timepicker: this.timepicker,\r\n      minDate: this.minDate,\r\n      maxDate: this.maxDate,\r\n      autoClose: this.autoClose,\r\n      locale: localeEn,\r\n      showOtherMonths: this.showOtherMonths,\r\n      selectOtherMonths: this.selectOtherMonths,\r\n      onHide: () => {\r\n        this.datePickerBlur.emit();\r\n      },\r\n      onShow: () => {\r\n        this.datePickerFocus.emit();\r\n      },\r\n      onSelect: ({ date }) => {\r\n        if (!date || !(date instanceof Date)) {\r\n          if (this.emitEmptyDate) {\r\n            this.dateChanged.emit({\r\n              start: null,\r\n              end: null,\r\n            });\r\n          }\r\n          return;\r\n        }\r\n        this.currentDate = date;\r\n        this.date = date;\r\n        this.dateChanged.emit({\r\n          start: moment(date),\r\n          end: moment(date),\r\n        });\r\n      },\r\n\r\n      position({ $datepicker, $target, $pointer, done }) {\r\n        let popper = createPopper($target, $datepicker, {\r\n          placement: 'top',\r\n          modifiers: [\r\n            {\r\n              name: 'flip',\r\n              options: { padding: { top: 0 } },\r\n            },\r\n            {\r\n              name: 'offset',\r\n              options: { offset: [0, 10] },\r\n            },\r\n            {\r\n              name: 'arrow',\r\n              options: { element: $pointer },\r\n            },\r\n          ],\r\n        });\r\n\r\n        return function completeHide() {\r\n          popper.destroy();\r\n          done();\r\n        };\r\n      },\r\n    });\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    if (this.openDatePickerTimeout) {\r\n      clearTimeout(this.openDatePickerTimeout);\r\n    }\r\n\r\n    // Clean up event listeners\r\n    if (this.triggerSlot) {\r\n      this.triggerSlot.removeEventListener('focus', this.handleTriggerFocus);\r\n      this.triggerSlot.removeEventListener('click', this.handleTriggerClick);\r\n    }\r\n\r\n    this.datePicker?.destroy?.();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div class=\"ir-date-picker-trigger\">\r\n        {this.customPicker && <slot name=\"trigger\"></slot>}\r\n        <input type=\"text\" disabled={this.disabled} class={this.customPicker ? 'ir-date-picker-element' : 'form-control input-sm'} ref={el => (this.pickerRef = el)} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  width: 100%;\r\n}\r\n.date-range-input {\r\n  width: 100%;\r\n}\r\n","import { Component, h, Element, Prop, Event, EventEmitter, Host, Watch, Method } from '@stencil/core';\r\nimport moment from 'moment';\r\n\r\n@Component({\r\n  tag: 'ir-date-range',\r\n  styleUrl: 'ir-date-range.css',\r\n  scoped: true,\r\n})\r\nexport class IrDateRange {\r\n  @Element() private element: HTMLElement;\r\n  @Prop() fromDate: Date;\r\n  @Prop() toDate: Date;\r\n  @Prop() date: Date;\r\n\r\n  @Prop() opens: 'left' | 'right' | 'center';\r\n  @Prop() autoApply: boolean;\r\n  @Prop() firstDay: number = 1;\r\n  @Prop() monthNames: string[] = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\n  @Prop() daysOfWeek: string[] = ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'];\r\n  @Prop() format: string = 'MMM DD, YYYY';\r\n  @Prop() separator: string = ' - ';\r\n  @Prop() applyLabel: string = 'Apply';\r\n  @Prop() cancelLabel: string = 'Cancel';\r\n  @Prop() fromLabel: string = 'Form';\r\n  @Prop() toLabel: string = 'To';\r\n  @Prop() customRangeLabel: string = 'Custom';\r\n  @Prop() weekLabel: string = 'W';\r\n  @Prop() disabled: boolean = false;\r\n  @Prop() singleDatePicker = false;\r\n  @Prop() minDate: string | Date;\r\n  @Prop() maxDate: string | Date;\r\n  @Prop() maxSpan: moment.DurationInputArg1 = {\r\n    days: 240,\r\n  };\r\n\r\n  private openDatePickerTimeout: NodeJS.Timeout;\r\n\r\n  @Event() dateChanged: EventEmitter<{\r\n    start: moment.Moment;\r\n    end: moment.Moment;\r\n  }>;\r\n  dateRangeInput: HTMLElement;\r\n\r\n  @Watch('minDate')\r\n  handleMinDateChange() {\r\n    $(this.dateRangeInput).data('daterangepicker').remove();\r\n    this.initializeDateRangePicker();\r\n  }\r\n  @Watch('date')\r\n  datePropChanged() {\r\n    this.updateDateRangePickerDates();\r\n  }\r\n  @Method()\r\n  async openDatePicker() {\r\n    this.openDatePickerTimeout = setTimeout(() => {\r\n      this.dateRangeInput.click();\r\n    }, 20);\r\n  }\r\n  updateDateRangePickerDates() {\r\n    const picker = $(this.dateRangeInput).data('daterangepicker');\r\n    if (!picker) {\r\n      console.error('Date range picker not initialized.');\r\n      return;\r\n    }\r\n\r\n    // Adjust how dates are set based on whether it's a single date picker or range picker.\r\n    if (this.singleDatePicker) {\r\n      const newDate = this.date ? moment(this.date) : moment();\r\n      picker.setStartDate(newDate);\r\n      picker.setEndDate(newDate); // For single date picker, start and end date might be the same.\r\n    } else {\r\n      const newStartDate = this.fromDate ? moment(this.fromDate) : moment();\r\n      const newEndDate = this.toDate ? moment(this.toDate) : newStartDate.clone().add(1, 'days');\r\n      picker.setStartDate(newStartDate);\r\n      picker.setEndDate(newEndDate);\r\n    }\r\n  }\r\n  componentWillLoad() {\r\n    if (!document.getElementById('ir-daterangepicker-style')) {\r\n      const style = document.createElement('style');\r\n      style.id = 'ir-daterangepicker-style';\r\n      style.textContent = `\r\n        .daterangepicker {\r\n          margin-top: 14px;\r\n        }\r\n      `;\r\n      document.head.appendChild(style);\r\n    }\r\n  }\r\n  componentDidLoad() {\r\n    this.dateRangeInput = this.element.querySelector('.date-range-input');\r\n    this.initializeDateRangePicker();\r\n    this.updateDateRangePickerDates();\r\n  }\r\n\r\n  initializeDateRangePicker() {\r\n    $(this.dateRangeInput).daterangepicker(\r\n      {\r\n        singleDatePicker: this.singleDatePicker,\r\n        opens: this.opens,\r\n        startDate: moment(this.fromDate),\r\n        endDate: moment(this.toDate),\r\n        minDate: moment(this.minDate || moment(new Date()).format('YYYY-MM-DD')),\r\n        maxDate: this.maxDate ? moment(this.maxDate) : undefined,\r\n        maxSpan: this.maxSpan,\r\n        autoApply: this.autoApply,\r\n        locale: {\r\n          format: this.format,\r\n          separator: this.separator,\r\n          applyLabel: this.applyLabel,\r\n          cancelLabel: this.cancelLabel,\r\n          fromLabel: this.fromLabel,\r\n          toLabel: this.toLabel,\r\n          customRangeLabel: this.customRangeLabel,\r\n          weekLabel: this.weekLabel,\r\n          daysOfWeek: this.daysOfWeek,\r\n          monthNames: this.monthNames,\r\n          firstDay: this.firstDay,\r\n        },\r\n      },\r\n      (start, end) => {\r\n        this.dateChanged.emit({ start, end });\r\n      },\r\n    );\r\n  }\r\n  disconnectedCallback() {\r\n    if (this.openDatePickerTimeout) {\r\n      clearTimeout(this.openDatePickerTimeout);\r\n    }\r\n    $(this.dateRangeInput).data('daterangepicker').remove();\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <input class=\"date-range-input\" type=\"button\" disabled={this.disabled} />\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  font-size: 13.65px !important;\r\n  width: 100%;\r\n}\r\n.mx-01 {\r\n  --m: 5px;\r\n  margin-right: var(--m) !important;\r\n  margin-left: var(--m) !important;\r\n}\r\n","import locales from '@/stores/locales.store';\r\nimport { calculateDaysBetweenDates } from '@/utils/booking';\r\nimport { Component, Host, Prop, State, Watch, h } from '@stencil/core';\r\nimport moment from 'moment';\r\n\r\n@Component({\r\n  tag: 'ir-date-view',\r\n  styleUrl: 'ir-date-view.css',\r\n  scoped: true,\r\n})\r\nexport class IrDateView {\r\n  @Prop() from_date: string | Date | moment.Moment;\r\n  @Prop() to_date: string | Date | moment.Moment;\r\n  @Prop() showDateDifference: boolean = true;\r\n  @Prop() dateOption: string = 'YYYY-MM-DD';\r\n\r\n  @State() dates: { from_date: string; to_date: string; date_difference: number };\r\n\r\n  componentWillLoad() {\r\n    this.initializeDates();\r\n  }\r\n\r\n  @Watch('from_date')\r\n  handleFromDateChange(newVal: any, oldVal: any) {\r\n    if (newVal !== oldVal) {\r\n      this.initializeDates();\r\n    }\r\n  }\r\n\r\n  @Watch('to_date')\r\n  handleToDateChange(newVal: any, oldVal: any) {\r\n    if (newVal !== oldVal) {\r\n      this.initializeDates();\r\n    }\r\n  }\r\n\r\n  private initializeDates() {\r\n    this.convertDate('from_date', this.from_date);\r\n    this.convertDate('to_date', this.to_date);\r\n    const fromDate = moment(this.dates.from_date, 'MMM DD, YYYY').format('YYYY-MM-DD');\r\n    const toDate = moment(this.dates.to_date, 'MMM DD, YYYY').format('YYYY-MM-DD');\r\n    this.dates.date_difference = calculateDaysBetweenDates(fromDate, toDate);\r\n  }\r\n\r\n  private convertDate(key: 'from_date' | 'to_date', date: string | Date | moment.Moment) {\r\n    this.dates = this.dates || {\r\n      from_date: '',\r\n      to_date: '',\r\n      date_difference: 0,\r\n    };\r\n    if (!date) {\r\n      return;\r\n    }\r\n    if (typeof date === 'string') {\r\n      this.dates[key] = moment(date, this.dateOption).format('MMM DD, YYYY');\r\n    } else if (date instanceof Date) {\r\n      this.dates[key] = moment(date).format('MMM DD, YYYY');\r\n    } else if (moment.isMoment(date)) {\r\n      this.dates[key] = date.format('MMM DD, YYYY');\r\n    } else {\r\n      console.error('Unsupported date type');\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host class=\"d-flex align-items-center\">\r\n        <span>{this.dates.from_date}</span>{' '}\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"mx-01\" height=\"14\" width=\"14\" viewBox=\"0 0 512 512\">\r\n          <path\r\n            fill=\"currentColor\"\r\n            d=\"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z\"\r\n          />\r\n        </svg>\r\n        <span>\r\n          {this.dates.to_date}{' '}\r\n          {this.showDateDifference && (\r\n            <span class=\"mx-01\">\r\n              {this.dates.date_difference}\r\n              {'   '}\r\n              {this.dates.date_difference > 1 ? ` ${locales.entries.Lcz_Nights}` : ` ${locales.entries.Lcz_Night}`}\r\n            </span>\r\n          )}\r\n        </span>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  margin: 0;\r\n  padding: 0;\r\n  box-sizing: border-box;\r\n}\r\n.backdrop {\r\n  opacity: 0;\r\n  background: rgba(0, 0, 0, 0.2);\r\n  position: fixed;\r\n  inset: 0;\r\n  z-index: 99999998;\r\n}\r\n.backdrop[data-state='opened'] {\r\n  animation: overlayShow 150ms cubic-bezier(0.16, 1, 0.3, 1) forwards;\r\n}\r\n.backdrop[data-state='closed'] {\r\n  opacity: 0;\r\n  pointer-events: none;\r\n}\r\n\r\n.modal-container {\r\n  box-sizing: border-box;\r\n  margin: 0;\r\n  box-shadow: hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px;\r\n  position: fixed;\r\n  z-index: 99999999;\r\n  overflow-y: auto;\r\n  top: 50%;\r\n  left: 50%;\r\n  background: white;\r\n  transform: translate(-50%, -50%);\r\n  width: 90%;\r\n  min-height: fit-content;\r\n  height: fit-content;\r\n  max-width: var(--ir-dialog-max-width, 40rem);\r\n  max-height: 85vh;\r\n  border-radius: 8px;\r\n  padding: 0;\r\n  animation: contentShow 300ms cubic-bezier(0.16, 1, 0.3, 1);\r\n}\r\n\r\n.modal-footer ::slotted(*) {\r\n  flex-direction: row;\r\n  align-items: center;\r\n  justify-content: end;\r\n  gap: 8px;\r\n  --ir-btn-width: inherit;\r\n}\r\n.modal-footer {\r\n  --ir-btn-width: 100%;\r\n}\r\n.modal-title ::slotted(*) {\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  color: #101828;\r\n  margin-bottom: 8px;\r\n}\r\n.modal-body ::slotted(*) {\r\n  font-size: 14px;\r\n  font-weight: 400;\r\n  color: #475467;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\n@keyframes overlayShow {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n@keyframes contentShow {\r\n  from {\r\n    opacity: 0;\r\n    transform: translate(-50%, -48%) scale(0.96);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translate(-50%, -50%) scale(1);\r\n  }\r\n}\r\n.dialog-close-button {\r\n  position: absolute;\r\n  top: 15px;\r\n  right: 15px;\r\n}\r\n/* md */\r\n","import { Component, Host, h, Element, Method, Listen, State, Event, EventEmitter, Prop, Watch } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-dialog',\r\n  styleUrl: 'ir-dialog.css',\r\n  shadow: true,\r\n})\r\nexport class IrDialog {\r\n  @Prop() open: boolean = false;\r\n  @Element() el: HTMLElement;\r\n  private firstFocusableElement: HTMLElement;\r\n  private lastFocusableElement: HTMLElement;\r\n\r\n  @State() isOpen = false;\r\n  @Event() openChange: EventEmitter<boolean>;\r\n  componentWillLoad() {\r\n    if (this.open) {\r\n      this.openModal();\r\n    }\r\n  }\r\n  componentDidLoad() {\r\n    this.prepareFocusTrap();\r\n  }\r\n\r\n  @Method()\r\n  async openModal() {\r\n    this.isOpen = true;\r\n    document.body.style.overflow = 'hidden';\r\n    setTimeout(() => {\r\n      this.prepareFocusTrap();\r\n    }, 10);\r\n    this.openChange.emit(this.isOpen);\r\n  }\r\n\r\n  @Method()\r\n  async closeModal() {\r\n    console.log('close');\r\n    if (!this.isOpen) {\r\n      return;\r\n    }\r\n    document.body.style.overflow = 'visible';\r\n    this.isOpen = false;\r\n    this.openChange.emit(this.isOpen);\r\n  }\r\n\r\n  @Watch('open')\r\n  handleOpenChange() {\r\n    if (this.open) {\r\n      this.openModal();\r\n    } else {\r\n      this.closeModal();\r\n    }\r\n  }\r\n\r\n  prepareFocusTrap() {\r\n    const focusableElements = 'button,ir-dropdown ,[href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])';\r\n    const focusableContent: NodeListOf<HTMLElement> = this.el.shadowRoot.querySelectorAll(focusableElements);\r\n    // console.log(focusableContent);\r\n    if (focusableContent.length === 0) return;\r\n    this.firstFocusableElement = focusableContent[0];\r\n    this.lastFocusableElement = focusableContent[focusableContent.length - 1];\r\n    this.firstFocusableElement.focus();\r\n  }\r\n\r\n  @Listen('keydown', { target: 'window' })\r\n  handleKeyDown(ev: KeyboardEvent) {\r\n    if (!this.isOpen) {\r\n      return;\r\n    }\r\n\r\n    let isTabPressed = ev.key === 'Tab';\r\n    if (ev.key === 'Escape' && this.isOpen) {\r\n      this.closeModal();\r\n    }\r\n    if (!isTabPressed) {\r\n      return;\r\n    }\r\n\r\n    // If focus is about to leave the last focusable element, redirect it to the first.\r\n    if (!ev.shiftKey && document.activeElement === this.lastFocusableElement) {\r\n      this.firstFocusableElement.focus();\r\n      ev.preventDefault();\r\n    }\r\n\r\n    // If focus is about to leave the first focusable element, redirect it to the last.\r\n    if (ev.shiftKey && document.activeElement === this.firstFocusableElement) {\r\n      this.lastFocusableElement.focus();\r\n      ev.preventDefault();\r\n    }\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    document.body.style.overflow = 'visible';\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"backdrop\" data-state={this.isOpen ? 'opened' : 'closed'} onClick={() => this.closeModal()}></div>\r\n        {this.isOpen && (\r\n          <div class=\"modal-container\" tabIndex={-1} role=\"dialog\" aria-labelledby=\"dialog1Title\" aria-describedby=\"dialog1Desc\">\r\n            <ir-icon id=\"close\" class=\"dialog-close-button\" onIconClickHandler={() => this.closeModal()}>\r\n              <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 384 512\" height={18} width={18}>\r\n                <path\r\n                  fill=\"#104064\"\r\n                  class=\"currentColor\"\r\n                  d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\"\r\n                />\r\n              </svg>\r\n            </ir-icon>\r\n            <div class={'modal-title'} id=\"dialog1Title\">\r\n              <slot name=\"modal-title\"></slot>\r\n            </div>\r\n            <div class=\"modal-body\" id=\"dialog1Desc\">\r\n              <slot name=\"modal-body\"></slot>\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n              <slot name=\"modal-footer\"></slot>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n\r\n.beta {\r\n  background: var(--red);\r\n  color: white;\r\n  padding: 0.2rem 0.3rem;\r\n  font-size: 12px;\r\n  border-radius: 4px;\r\n  margin: 0;\r\n}\r\n.event-row {\r\n  padding-bottom: 0.5rem;\r\n}\r\n.list-title {\r\n  margin: 0;\r\n  padding: 0;\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n  width: fit-content;\r\n}\r\n.list-item {\r\n  margin: 0;\r\n  padding: 0;\r\n  font-size: 14px;\r\n  margin-left: 5px;\r\n  width: fit-content;\r\n}\r\n.list-item.green {\r\n  color: #629a4c;\r\n  font-weight: 600;\r\n}\r\n.list-item.red {\r\n  color: #ff4961;\r\n  font-weight: 600;\r\n}\r\n.dates-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.875rem;\r\n}\r\n","import { isRequestPending } from '@/stores/ir-interceptor.store';\r\nimport { Component, Fragment, Prop, State, h } from '@stencil/core';\r\nimport { BookingService, ExposedBookingEvent } from '@/services/booking.service';\r\nimport locales from '@/stores/locales.store';\r\n\r\n@Component({\r\n  tag: 'ir-events-log',\r\n  styleUrl: 'ir-events-log.css',\r\n  scoped: true,\r\n})\r\nexport class IrEventsLog {\r\n  @Prop() bookingNumber: string;\r\n\r\n  @State() bookingEvents: ExposedBookingEvent[];\r\n\r\n  private bookingService = new BookingService();\r\n\r\n  componentWillLoad() {\r\n    this.init();\r\n  }\r\n\r\n  private async init() {\r\n    try {\r\n      this.bookingEvents = await this.bookingService.getExposedBookingEvents(this.bookingNumber);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div class=\"p-1\">\r\n        <div class=\"d-flex  align-items-center\" style={{ gap: '0.5rem' }}>\r\n          <h3 class=\" text-left p-0 m-0  dialog-title \">{locales.entries.Lcz_EventsLog}</h3>\r\n          {/* <span class=\"m-0 beta\">Beta</span> */}\r\n        </div>\r\n\r\n        {isRequestPending('/Get_Exposed_Booking_Events') ? (\r\n          <div class={'d-flex align-items-center justify-content-center dialog-container-height'}>\r\n            <ir-spinner></ir-spinner>\r\n          </div>\r\n        ) : (\r\n          <Fragment>\r\n            <table class=\" dialog-container-height\">\r\n              <thead style={{ opacity: '0' }}>\r\n                <tr>\r\n                  <th>date</th>\r\n                  <th>user</th>\r\n                  <th>status</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {this.bookingEvents?.map(e => (\r\n                  <tr key={e.id} class=\"pb-1\">\r\n                    <td class=\"event-row dates-row\">\r\n                      <span>{e.date}</span>\r\n                      <span>\r\n                        {String(e.hour).padStart(2, '0')}:{String(e.minute).padStart(2, '0')}:{String(e.second).padStart(2, '0')}\r\n                      </span>\r\n                    </td>\r\n                    <td class=\"pl-3 event-row \">{e.type}</td>\r\n                    <td class=\"pl-1 event-row \">{e.user}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </Fragment>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n.extra-service-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  gap: 0.5rem;\r\n}\r\n.extra-service-container * {\r\n  padding: 0;\r\n  margin: 0;\r\n  box-sizing: border-box;\r\n}\r\n.extra-service-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n.extra-service-conditional-date {\r\n  margin-top: 0.5rem;\r\n}\r\n","import { Component, Event, EventEmitter, Host, Prop, h } from '@stencil/core';\r\nimport { ExtraService } from '@/models/booking.dto';\r\nimport { formatAmount } from '@/utils/utils';\r\nimport { colorVariants } from '@/components/ui/ir-icons/icons';\r\nimport locales from '@/stores/locales.store';\r\nimport moment from 'moment';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\n\r\n@Component({\r\n  tag: 'ir-extra-service',\r\n  styleUrl: 'ir-extra-service.css',\r\n  scoped: true,\r\n})\r\nexport class IrExtraService {\r\n  @Prop() service: ExtraService;\r\n  @Prop() bookingNumber: string;\r\n  @Prop() currencySymbol: string;\r\n\r\n  @Event() editExtraService: EventEmitter<ExtraService>;\r\n  @Event() resetBookingEvt: EventEmitter<null>;\r\n\r\n  private irModalRef: HTMLIrModalElement;\r\n  private bookingService = new BookingService();\r\n\r\n  private async deleteService() {\r\n    try {\r\n      await this.bookingService.doBookingExtraService({\r\n        service: this.service,\r\n        is_remove: true,\r\n        booking_nbr: this.bookingNumber,\r\n      });\r\n      this.resetBookingEvt.emit(null);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"p-1\">\r\n          <div class={'extra-service-container'}>\r\n            <p class=\"extra-service-description\">{this.service.description}</p>\r\n            <div class=\"extra-service-actions\">\r\n              {this.service.price && <p class=\"extra-service-price p-0 m-0 font-weight-bold\">{formatAmount(this.currencySymbol, this.service.price)}</p>}\r\n              <ir-button\r\n                id={`serviceEdit-${this.service.booking_system_id}`}\r\n                class=\"extra-service-edit-btn m-0 p-0\"\r\n                variant=\"icon\"\r\n                icon_name=\"edit\"\r\n                style={colorVariants.secondary}\r\n                onClickHandler={() => this.editExtraService.emit(this.service)}\r\n              ></ir-button>\r\n              <ir-button\r\n                class=\"extra-service-delete-btn m-0 p-0\"\r\n                variant=\"icon\"\r\n                onClickHandler={() => this.irModalRef.openModal()}\r\n                id={`roomDelete-${this.service.booking_system_id}`}\r\n                icon_name=\"trash\"\r\n                style={colorVariants.danger}\r\n              ></ir-button>\r\n            </div>\r\n          </div>\r\n          <div class=\"extra-service-conditional-date\">\r\n            {this.service.start_date && this.service.end_date ? (\r\n              <ir-date-view class=\"extra-service-date-view mr-1\" from_date={this.service.start_date} to_date={this.service.end_date} showDateDifference={false}></ir-date-view>\r\n            ) : (\r\n              this.service.start_date && <p class=\"extra-service-date-view\">{moment(new Date(this.service.start_date)).format('MMM DD, YYYY')}</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <ir-modal\r\n          autoClose={false}\r\n          ref={el => (this.irModalRef = el)}\r\n          isLoading={isRequestPending('/Do_Booking_Extra_Service')}\r\n          onConfirmModal={this.deleteService.bind(this)}\r\n          iconAvailable={true}\r\n          icon=\"ft-alert-triangle danger h1\"\r\n          leftBtnText={locales.entries.Lcz_Cancel}\r\n          rightBtnText={locales.entries.Lcz_Delete}\r\n          leftBtnColor=\"secondary\"\r\n          rightBtnColor=\"danger\"\r\n          modalTitle={locales.entries.Lcz_Confirmation}\r\n          modalBody={`${locales.entries['Lcz_AreYouSureDoYouWantToRemove ']} ${locales.entries.Lcz_ThisService} ${locales.entries.Lcz_FromThisBooking}`}\r\n        ></ir-modal>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","import { z } from 'zod';\r\nimport { IAllowedOptions, ICurrency, IPickupCurrency } from './calendarData';\r\nimport { TSourceOption } from './igl-book-property';\r\nimport { ICountry } from './IBooking';\r\nimport moment from 'moment';\r\nimport { IHouseKeepers } from './housekeeping';\r\n\r\ninterface IDType {\r\n  code: string;\r\n  description: string;\r\n}\r\n\r\ninterface IDInfo {\r\n  type: IDType;\r\n  number: string;\r\n}\r\n\r\nexport interface SharedPerson {\r\n  address: null;\r\n  alternative_email: null;\r\n  cci: null;\r\n  city: null;\r\n  country: ICountry;\r\n  country_id: string;\r\n  country_phone_prefix: null;\r\n  dob: string;\r\n  email: null;\r\n  first_name: string;\r\n  full_name: string;\r\n  id: number;\r\n  id_info: IDInfo;\r\n  is_main?: boolean;\r\n  last_name: string;\r\n  mobile: null;\r\n  nbr_confirmed_bookings: number;\r\n  notes: null;\r\n  password: null;\r\n  subscribe_to_news_letter: null;\r\n}\r\n// export const ZIdInfo = z.object({\r\n//   type: z.object({\r\n//     code: z.string().min(3),\r\n//     description: z.string(),\r\n//   }),\r\n//   number: z.string().min(2),\r\n// });\r\n// export const ZSharedPerson = z.object({\r\n//   id: z.number(),\r\n//   full_name: z.string().min(2),\r\n//   country_id: z.coerce.number().min(0),\r\n//   dob: z.coerce.date().transform(date => moment(date).format('YYYY-MM-DD')),\r\n//   id_info: ZIdInfo,\r\n// });\r\n\r\n/**\r\n * ZIdInfo schema:\r\n * - `type.code`: Validates a non-empty string must be at least 3 chars.\r\n *   If empty string or not provided, validation is skipped.\r\n * - `type.description`: Same pattern for description (but no min length).\r\n * - `number`: Validates if non-empty string it should be at least 2 chars.\r\n */\r\nexport const ZIdInfo = z.object({\r\n  type: z.object({\r\n    code: z\r\n      .union([\r\n        // If provided and non-empty, must have at least 3 chars\r\n        z.string().min(3),\r\n        // or it can be an empty string\r\n        z.literal(''),\r\n      ])\r\n      .optional(), // or undefined\r\n    description: z\r\n      .union([\r\n        // If provided and non-empty, no special min\r\n        z.string(),\r\n        // or it can be empty string\r\n        z.literal(''),\r\n      ])\r\n      .optional(),\r\n  }),\r\n  number: z\r\n    .union([\r\n      // If provided and non-empty, must have at least 2 chars\r\n      z.string().min(2),\r\n      // or it can be empty string\r\n      z.literal(''),\r\n    ])\r\n    .optional(),\r\n});\r\n\r\n/**\r\n * ZSharedPerson schema:\r\n * - `id`: Optional numeric field.\r\n * - `full_name`: If provided and non-empty, must be at least 2 chars.\r\n * - `country_id`: If provided, coerced to number, must be >= 0.\r\n * - `dob`: If provided, coerced to Date and formatted. Otherwise skipped.\r\n * - `id_info`: The nested object above; can also be omitted entirely.\r\n */\r\nexport const ZSharedPerson = z.object({\r\n  id: z.number().optional(),\r\n  // full_name: z\r\n  //   .union([\r\n  //     z.string().min(2), // if provided and non-empty, must have min length 2\r\n  //     z.literal(''), // or it can be empty string\r\n  //   ])\r\n  //   .optional(),\r\n  first_name: z\r\n    .union([\r\n      z.string().min(2), // if provided and non-empty, must have min length 2\r\n      z.literal(''), // or it can be empty string\r\n    ])\r\n    .optional(),\r\n  last_name: z\r\n    .union([\r\n      z.string().min(2), // if provided and non-empty, must have min length 2\r\n      z.literal(''), // or it can be empty string\r\n    ])\r\n    .optional(),\r\n  country_id: z.coerce\r\n    .number()\r\n    .min(0) // if provided, must be >= 0\r\n    .optional(),\r\n  dob: z\r\n    .string()\r\n    .nullable()\r\n    .optional()\r\n    .refine(value => value === undefined || moment(value, 'DD/MM/YYYY', true).isValid() || value === '' || value === null, 'Invalid date format')\r\n    .transform(value => {\r\n      if (value === undefined || value === '' || value === null) return null;\r\n      const isDDMMYYYY = moment(value, 'DD/MM/YYYY', true).isValid();\r\n      return isDDMMYYYY ? null : moment(value, 'DD/MM/YYYY').format('YYYY-MM-DD');\r\n    }),\r\n  id_info: ZIdInfo.optional(),\r\n});\r\n\r\nexport const ZSharedPersons = z.array(ZSharedPerson);\r\n\r\nexport interface HandleExposedRoomGuestsRequest {\r\n  booking_nbr: string;\r\n  identifier: string;\r\n  guests: SharedPerson[];\r\n}\r\nexport interface OtaGuarantee {\r\n  card_number: string;\r\n  card_type: string;\r\n  cardholder_name: string;\r\n  cvv: string;\r\n  expiration_date: string;\r\n  is_virtual: boolean;\r\n  meta: Meta;\r\n  token: string;\r\n}\r\n\r\ninterface Meta {\r\n  virtual_card_currency_code: string;\r\n  virtual_card_current_balance: string;\r\n  virtual_card_decimal_places: string;\r\n  virtual_card_effective_date: string;\r\n  virtual_card_expiration_date: string;\r\n}\r\nexport interface OtaService {\r\n  name: string;\r\n  nights: number;\r\n  persons: number;\r\n  price_mode: string;\r\n  price_per_unit: number;\r\n  total_price: number;\r\n}\r\nexport interface Booking {\r\n  agent: {\r\n    code: string;\r\n    id: number;\r\n    name: string;\r\n    verification_mode: null;\r\n  } | null;\r\n  ota_services: OtaService[];\r\n  arrival: Arrival;\r\n  allowed_actions: IAllowedActions[];\r\n  system_id: number;\r\n  booked_on: DateTime;\r\n  booking_nbr: string;\r\n  currency: Currency;\r\n  extra_services: ExtraService[] | null;\r\n  from_date: string;\r\n  guest: Guest;\r\n  extras: Extras[] | null;\r\n  occupancy: Occupancy;\r\n  origin: Origin;\r\n  ota_guarante: OtaGuarantee;\r\n  property: Property;\r\n  remark: string;\r\n  ota_notes: IOtaNotes[];\r\n  rooms: Room[];\r\n  source: Source;\r\n  status: Status;\r\n  to_date: string;\r\n  total: number;\r\n  is_editable: boolean;\r\n  format: IFormat;\r\n  channel_booking_nbr: string | null;\r\n  is_direct: boolean;\r\n  financial: IFinancials;\r\n  pickup_info: IBookingPickupInfo | null;\r\n  cost: number | null;\r\n  is_pms_enabled: boolean;\r\n  promo_key: string | null;\r\n  is_in_loyalty_mode: boolean;\r\n}\r\n\r\nexport const ExtraServiceSchema = z.object({\r\n  booking_system_id: z.number().optional(),\r\n  cost: z.coerce.number().nullable(),\r\n  currency_id: z.number().min(1),\r\n  description: z.string().min(1),\r\n  end_date: z.string().nullable(),\r\n  price: z.coerce.number(),\r\n  start_date: z.string().nullable(),\r\n  system_id: z.number().optional(),\r\n});\r\n\r\nexport type ExtraService = z.infer<typeof ExtraServiceSchema>;\r\nexport interface Extras {\r\n  key: string;\r\n  value: any;\r\n}\r\nexport interface IOtaNotes {\r\n  statement: string;\r\n}\r\nexport interface IBookingPickupInfo {\r\n  currency: IPickupCurrency;\r\n  date: string;\r\n  details: string;\r\n  hour: number;\r\n  minute: number;\r\n  nbr_of_units: number;\r\n  selected_option: IAllowedOptions;\r\n  total: number;\r\n}\r\nexport interface IAllowedActions {\r\n  code: string;\r\n  description: string;\r\n}\r\nexport interface IFinancials {\r\n  due_amount: number;\r\n  due_dates: IDueDate[];\r\n  payments: IPayment[] | null;\r\n  total_amount: number;\r\n  gross_total: number;\r\n  gross_cost: number;\r\n  invoice_nbr: string;\r\n}\r\nexport interface IPayment {\r\n  id: number | null;\r\n  date: string;\r\n  amount: number;\r\n  currency: ICurrency;\r\n  designation: string;\r\n  reference: string;\r\n}\r\nexport interface IDueDate {\r\n  amount: number;\r\n  currencysymbol: string;\r\n  date: string;\r\n  description: string;\r\n  room: string;\r\n}\r\nexport interface IFormat {\r\n  from_date: string;\r\n  to_date: string;\r\n}\r\nexport interface Arrival {\r\n  code: string;\r\n  description: string;\r\n}\r\n\r\nexport interface DateTime {\r\n  date: string;\r\n  hour: number;\r\n  minute: number;\r\n}\r\n\r\nexport interface Currency {\r\n  code: string;\r\n  id: number;\r\n  symbol: string;\r\n}\r\n\r\nexport interface Guest {\r\n  address: string | null;\r\n  city: string | null;\r\n  country_id: number | null;\r\n  dob: string | null;\r\n  email: string | null;\r\n  first_name: string;\r\n  id: number;\r\n  last_name: string | null;\r\n  mobile: string | null;\r\n  country_phone_prefix: string | null;\r\n  subscribe_to_news_letter: boolean | null;\r\n  cci?: ICCI | null;\r\n  alternative_email?: string;\r\n  nbr_confirmed_bookings: number;\r\n  notes: string;\r\n  mobile_without_prefix: string;\r\n}\r\nexport interface ICCI {\r\n  nbr: string | number;\r\n  holder_name: string | number;\r\n  expiry_month: string | number;\r\n  expiry_year: string | number;\r\n  cvc?: string | null;\r\n}\r\nexport interface Occupancy {\r\n  adult_nbr: number;\r\n  children_nbr: number;\r\n  infant_nbr: number | null;\r\n}\r\nexport interface DoReservationProps {\r\n  assign_units: boolean;\r\n  check_in: boolean;\r\n  is_pms: boolean;\r\n  is_direct: boolean;\r\n  is_in_loyalty_mode: boolean;\r\n  promo_key: string | null;\r\n  extras: any; // Assuming extras can have any structure, replace with a specific type if known\r\n  booking: {\r\n    from_date: string; // Format 'YYYY-MM-DD'\r\n    to_date: string; // Format 'YYYY-MM-DD'\r\n    remark: string | null;\r\n    booking_nbr: string;\r\n    property: {\r\n      id: string | number;\r\n    };\r\n    booked_on: {\r\n      date: string; // Format 'YYYY-MM-DD'\r\n      hour: number;\r\n      minute: number;\r\n    };\r\n    source: TSourceOption;\r\n    rooms: Room[]; // Assuming rooms are defined in the imported `Room` type\r\n    currency: string;\r\n    arrival: {\r\n      code: string;\r\n    };\r\n    guest: {\r\n      email: string | null;\r\n      first_name: string;\r\n      last_name: string;\r\n      country_id: string | number | null;\r\n      city: string | null;\r\n      mobile: string;\r\n      phone_prefix: string | null;\r\n      address: string;\r\n      dob: string | null;\r\n      subscribe_to_news_letter: boolean;\r\n      cci: {\r\n        nbr: string;\r\n        holder_name: string;\r\n        expiry_month: string;\r\n        expiry_year: string;\r\n      } | null;\r\n    };\r\n  };\r\n  pickup_info: any | null; // Assuming it can be any structure, replace if specific type is available\r\n}\r\nexport interface Origin {\r\n  Icon: string;\r\n  Label: string;\r\n}\r\n\r\nexport interface Property {\r\n  calendar_legends: null;\r\n  currency: null;\r\n  id: number;\r\n  name: string;\r\n  roomtypes: null;\r\n}\r\nexport type RoomInOut = { code: '001' | '002' | '000'; description: string };\r\nexport interface Room {\r\n  days: Day[];\r\n  from_date: string;\r\n  guest: Guest;\r\n  occupancy_default: number;\r\n  notes: string | null;\r\n  occupancy: Occupancy;\r\n  physicalroom: null;\r\n  in_out: RoomInOut | null;\r\n  sharing_persons: SharedPerson[] | null;\r\n  bed_preference: number | null;\r\n  rateplan: RatePlan;\r\n  roomtype: RoomType;\r\n  to_date: string;\r\n  total: number;\r\n  smoking_option: string;\r\n  identifier: string;\r\n  unit: string | number | IUnit | null;\r\n  ota_taxes: IOtaTax[];\r\n  ota_meta: OtaMeta;\r\n  cost: number | null;\r\n  gross_cost: number;\r\n  gross_total: number;\r\n  guarantee: number;\r\n  gross_guarantee: number;\r\n}\r\ninterface OtaMeta {\r\n  bed_preferences: string | null;\r\n  meal_plan: string | null;\r\n  parent_rate_plan_id: string | null;\r\n  policies: string | null;\r\n  smoking_preferences: string | null;\r\n}\r\nexport interface IOtaTax {\r\n  amount: number;\r\n  currency: IOtaTaxCurrency;\r\n  is_exlusive: boolean;\r\n  name: string;\r\n}\r\nexport interface IOtaTaxCurrency {\r\n  code: string;\r\n  id: number;\r\n  symbol: string;\r\n}\r\nexport interface IUnit {\r\n  calendar_cell: null;\r\n  id: 2;\r\n  name: '402';\r\n}\r\nexport interface Day {\r\n  amount: number;\r\n  date: string;\r\n  cost: number | null;\r\n}\r\n\r\nexport interface RatePlan {\r\n  cancelation: string | null;\r\n  guarantee: null;\r\n  id: number;\r\n  name: string;\r\n  rate_restrictions: null;\r\n  variations: null;\r\n  selected_variation: IVariations;\r\n  is_non_refundable: boolean;\r\n  custom_text: string | null;\r\n  is_active: boolean;\r\n  short_name: string;\r\n}\r\nexport interface IVariations {\r\n  adult_child_offering: string;\r\n  adult_nbr: number;\r\n  amount: number | null;\r\n  child_nbr: number;\r\n}\r\nexport interface RoomType {\r\n  availabilities: null;\r\n  id: number;\r\n  inventory: number;\r\n  name: string;\r\n  physicalrooms: PhysicalRoom[];\r\n  rate: number;\r\n  rateplans: null;\r\n  is_active: boolean;\r\n}\r\nexport type RoomHkStatus = '001' | '002' | '003';\r\nexport interface PhysicalRoom {\r\n  calendar_cell: null;\r\n  housekeeper: IHouseKeepers;\r\n  id: number;\r\n  is_active: boolean;\r\n  name: string;\r\n  hk_status: RoomHkStatus;\r\n}\r\n\r\nexport interface Source {\r\n  code: string | null;\r\n  description: string;\r\n  tag: string | null;\r\n}\r\n\r\nexport interface Status {\r\n  code: string;\r\n  description: string;\r\n}\r\n\r\nexport interface IPmsLog {\r\n  is_acknowledged: boolean;\r\n  is_sent: boolean;\r\n  sent_date: string;\r\n  sent_hour: number;\r\n  sent_minute: number;\r\n}\r\n",":host {\r\n  display: block;\r\n  --ir-input-border-color: #cacfe7;\r\n}\r\n\r\n:host .input-group-text {\r\n  border-color: var(--ir-input-border-color);\r\n}\r\n/* .hidden-date-picker.hidden-dates .date-range-input {\r\n  opacity: 0;\r\n} */\r\n.currency-ph {\r\n  padding: 0;\r\n  margin: 0;\r\n  color: #3b4781;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 0 0 0 0.25rem;\r\n  border-top: 1px solid var(--ir-input-border-color);\r\n  border-bottom: 1px solid var(--ir-input-border-color);\r\n  border-left: 1px solid transparent;\r\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\r\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n}\r\n\r\n.service-description-input {\r\n  height: 70px !important;\r\n}\r\n\r\n.service-description .input-group-prepend {\r\n  background-color: #f4f5fa;\r\n  border: 1px solid var(--ir-input-border-color);\r\n  border-top-left-radius: 0.25rem;\r\n  border-bottom-left-radius: 0.25rem;\r\n}\r\n.service-date-container {\r\n  padding: 0;\r\n  margin: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  position: relative;\r\n  width: 100%;\r\n  justify-content: center;\r\n}\r\n.service-date-container .btn-container {\r\n  position: absolute;\r\n  right: 5px;\r\n  margin: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 0;\r\n}\r\n.service-description .input-group-text {\r\n  height: fit-content;\r\n  border: 0;\r\n  padding-top: 0.75rem !important;\r\n}\r\n\r\n.price-input-group:focus-within .currency-ph,\r\n.cost-input-group:focus-within .currency-ph {\r\n  border-top: 1px solid #1e9ff2;\r\n  border-bottom: 1px solid #1e9ff2;\r\n  border-left: 1px solid #1e9ff2;\r\n}\r\n.currency-ph[data-state='error'] {\r\n  border-color: var(--red, #ff4961);\r\n}\r\n.price-input:focus {\r\n  border-right-width: 1px !important;\r\n}\r\n\r\n.is-invalid {\r\n  background-image: none !important;\r\n}\r\n.price-input,\r\n.cost-input {\r\n  border-left: 0;\r\n}\r\n\r\n.row-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n}\r\n\r\n@media (min-width: 640px) {\r\n  .row-group {\r\n    flex-direction: row;\r\n    align-items: center;\r\n    gap: 0;\r\n  }\r\n  .cost-label {\r\n    border-top-left-radius: 0;\r\n    border-bottom-left-radius: 0;\r\n    border-left: 0;\r\n  }\r\n  .until-prepend,\r\n  .cost-input-placeholder {\r\n    border-top-left-radius: 0 !important;\r\n    border-bottom-left-radius: 0 !important;\r\n  }\r\n  .date-from,\r\n  .price-input {\r\n    border-right-width: 0 !important;\r\n    border-top-right-radius: 0 !important;\r\n    border-bottom-right-radius: 0 !important;\r\n  }\r\n}\r\n\r\n.date-focused {\r\n  border-color: #1e9ff2;\r\n}\r\n","import { Booking, ExtraService, ExtraServiceSchema } from '@/models/booking.dto';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\nimport locales from '@/stores/locales.store';\r\nimport { Component, Event, EventEmitter, Host, Prop, State, h } from '@stencil/core';\r\nimport { ZodError } from 'zod';\r\nimport { _formatDate } from '../../functions';\r\n\r\n@Component({\r\n  tag: 'ir-extra-service-config',\r\n  styleUrl: 'ir-extra-service-config.css',\r\n  scoped: true,\r\n})\r\nexport class IrExtraServiceConfig {\r\n  @Prop() booking: Pick<Booking, 'from_date' | 'to_date' | 'currency' | 'booking_nbr'>;\r\n  @Prop() service: ExtraService;\r\n\r\n  @State() s_service: ExtraService;\r\n  @State() error: boolean;\r\n  @State() fromDateClicked: boolean;\r\n  @State() toDateClicked: boolean;\r\n\r\n  @Event() closeModal: EventEmitter<null>;\r\n  @Event() resetBookingEvt: EventEmitter<null>;\r\n\r\n  private bookingService = new BookingService();\r\n  // private d1: HTMLDivElement;\r\n  // private d1_0: HTMLDivElement;\r\n  // private d2_0: HTMLDivElement;\r\n  // private d2: HTMLInputElement;\r\n\r\n  componentWillLoad() {\r\n    if (this.service) {\r\n      this.s_service = { ...this.service };\r\n    }\r\n  }\r\n\r\n  private async saveAmenity() {\r\n    try {\r\n      ExtraServiceSchema.parse(this.s_service);\r\n      await this.bookingService.doBookingExtraService({\r\n        service: this.s_service,\r\n        booking_nbr: this.booking.booking_nbr,\r\n        is_remove: false,\r\n      });\r\n      this.resetBookingEvt.emit(null);\r\n      this.closeModal.emit(null);\r\n    } catch (error) {\r\n      if (error instanceof ZodError) {\r\n        this.error = true;\r\n      }\r\n      console.error(error);\r\n    }\r\n  }\r\n  private updateService(params: Partial<ExtraService>) {\r\n    let prevService: ExtraService = this.s_service;\r\n    if (!prevService) {\r\n      prevService = {\r\n        cost: null,\r\n        description: null,\r\n        end_date: null,\r\n        start_date: null,\r\n        price: null,\r\n        currency_id: this.booking.currency.id,\r\n      };\r\n    }\r\n    this.s_service = { ...prevService, ...params };\r\n  }\r\n  private validatePrice(): boolean {\r\n    if (this.s_service?.price === undefined || this.s_service?.price?.toString() === '') {\r\n      return false;\r\n    }\r\n    const priceSchema = ExtraServiceSchema.pick({ price: true });\r\n    const result = priceSchema.safeParse({ price: this.s_service?.price });\r\n    return result.success;\r\n  }\r\n  render() {\r\n    return (\r\n      <Host class={'p-0'}>\r\n        <ir-title class=\"px-1\" onCloseSideBar={() => this.closeModal.emit(null)} label={locales.entries.Lcz_ExtraServices} displayContext=\"sidebar\"></ir-title>\r\n        <section class={'px-1'}>\r\n          {/* Description */}\r\n          <fieldset class=\"input-group mb-1 mt-3 service-description\">\r\n            <div class=\"input-group-prepend\">\r\n              <span class=\"input-group-text\">{locales.entries.Lcz_Description}</span>\r\n            </div>\r\n            <textarea\r\n              value={this.s_service?.description}\r\n              class={`form-control service-description-input ${this.error && !this.s_service?.description ? 'is-invalid' : ''}`}\r\n              style={{ height: '7rem' }}\r\n              maxLength={250}\r\n              onChange={e => this.updateService({ description: (e.target as HTMLTextAreaElement).value })}\r\n              aria-label=\"Amenity description\"\r\n            ></textarea>\r\n          </fieldset>\r\n          {/* Dates */}\r\n          <div class={'row-group mb-1'}>\r\n            <div class=\"input-group\">\r\n              <div class=\"input-group-prepend\">\r\n                <span class=\"input-group-text\" id=\"basic-addon1\">\r\n                  {locales.entries.Lcz_DatesOn}\r\n                </span>\r\n              </div>\r\n              <div\r\n                // ref={el => (this.d1_0 = el)}\r\n                class=\"form-control p-0 m-0 d-flex align-items-center justify-content-center date-from\"\r\n              >\r\n                <div class=\"service-date-container\">\r\n                  <ir-date-picker\r\n                    // onDatePickerFocus={() => {\r\n                    //   this.d1?.classList.add('date-focused');\r\n                    //   this.d1_0?.classList.add('date-focused');\r\n                    // }}\r\n                    // onDatePickerBlur={() => {\r\n                    //   this.d1?.classList.remove('date-focused');\r\n                    //   this.d1_0?.classList.remove('date-focused');\r\n                    // }}\r\n                    // customPicker\r\n                    emitEmptyDate\r\n                    date={this.s_service?.start_date}\r\n                    minDate={this.booking.from_date}\r\n                    maxDate={this.booking.to_date}\r\n                    onDateChanged={e => this.updateService({ start_date: e.detail.start?.format('YYYY-MM-DD') })}\r\n                  >\r\n                    <input\r\n                      // ref={el => (this.d1 = el)}\r\n                      type=\"text\"\r\n                      slot=\"trigger\"\r\n                      value={this.s_service?.start_date ? _formatDate(this.s_service.start_date) : null}\r\n                      style={{ borderLeftWidth: '0', borderRightWidth: '0', width: '100%', borderRadius: '0' }}\r\n                      class=\"text-center w-100 form-control input-sm\"\r\n                    ></input>\r\n                  </ir-date-picker>\r\n                  {this.s_service?.start_date && (\r\n                    <div class=\"btn-container\">\r\n                      <ir-button\r\n                        title=\"clear\"\r\n                        id=\"close\"\r\n                        variant=\"icon\"\r\n                        style={{ '--icon-size': '0.875rem' }}\r\n                        icon_name=\"xmark-fill\"\r\n                        class=\"ml-2\"\r\n                        onClickHandler={e => {\r\n                          e.stopImmediatePropagation();\r\n                          e.stopPropagation();\r\n                          this.updateService({ start_date: null });\r\n                        }}\r\n                      ></ir-button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"input-group\">\r\n              <div class=\"input-group-prepend \">\r\n                <span class=\"input-group-text until-prepend\" id=\"basic-addon1\">\r\n                  {locales.entries.Lcz_TillAndIncluding}\r\n                </span>\r\n              </div>\r\n              <div\r\n                // ref={el => (this.d2_0 = el)}\r\n                class=\"form-control p-0 m-0 d-flex align-items-center justify-content-center\"\r\n              >\r\n                <div class=\"service-date-container\">\r\n                  <ir-date-picker\r\n                    // onDatePickerFocus={() => {\r\n                    //   this.d2?.classList.add('date-focused');\r\n                    //   this.d2_0?.classList.add('date-focused');\r\n                    // }}\r\n                    // onDatePickerBlur={() => {\r\n                    //   this.d2?.classList.remove('date-focused');\r\n                    //   this.d2_0?.classList.remove('date-focused');\r\n                    // }}\r\n                    emitEmptyDate\r\n                    date={this.s_service?.end_date}\r\n                    minDate={this.s_service?.start_date ?? this.booking.from_date}\r\n                    maxDate={this.booking.to_date}\r\n                    onDateChanged={e => {\r\n                      e.stopImmediatePropagation();\r\n                      e.stopPropagation();\r\n                      this.updateService({ end_date: e.detail.start?.format('YYYY-MM-DD') });\r\n                    }}\r\n                  >\r\n                    <input\r\n                      // ref={el => (this.d2 = el)}\r\n                      slot=\"trigger\"\r\n                      value={this.s_service?.end_date ? _formatDate(this.s_service.end_date) : null}\r\n                      style={{ borderLeftWidth: '0', borderRightWidth: '0', width: '100%' }}\r\n                      class=\"text-center form-control input-sm\"\r\n                    ></input>\r\n                  </ir-date-picker>\r\n\r\n                  {this.s_service?.end_date && (\r\n                    <div class=\"btn-container\">\r\n                      <ir-button\r\n                        title=\"clear\"\r\n                        id=\"close\"\r\n                        variant=\"icon\"\r\n                        style={{ '--icon-size': '0.875rem' }}\r\n                        icon_name=\"xmark-fill\"\r\n                        class=\"ml-2\"\r\n                        onClickHandler={e => {\r\n                          e.stopImmediatePropagation();\r\n                          e.stopPropagation();\r\n                          this.updateService({ end_date: null });\r\n                        }}\r\n                      ></ir-button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {/* Prices and cost */}\r\n          <div class={'row-group'}>\r\n            <ir-price-input\r\n              label=\"Price\"\r\n              currency={this.booking.currency.symbol}\r\n              class=\"ir-br-input-none\"\r\n              value={this.s_service?.price?.toString()}\r\n              zod={ExtraServiceSchema.pick({ price: true })}\r\n              aria-label={locales.entries.Lcz_Price}\r\n              wrapKey=\"price\"\r\n              aria-describedby=\"service price\"\r\n              autoValidate={false}\r\n              data-state={this.error && !this.validatePrice() ? 'error' : ''}\r\n              onTextChange={e => this.updateService({ price: parseFloat(e.detail) })}\r\n            ></ir-price-input>\r\n            <ir-price-input\r\n              autoValidate={false}\r\n              label={locales.entries.Lcz_Cost}\r\n              labelStyle=\"cost-label\"\r\n              currency={this.booking.currency.symbol}\r\n              // class=\"ir-bl-lbl-none ir-bl-none\"\r\n              value={this.s_service?.cost?.toString()}\r\n              zod={ExtraServiceSchema.pick({ cost: true })}\r\n              onTextChange={e => this.updateService({ cost: parseFloat(e.detail) })}\r\n              wrapKey=\"cost\"\r\n              aria-label=\"Cost\"\r\n              aria-describedby=\"service cost\"\r\n            ></ir-price-input>\r\n          </div>\r\n          <div class={'d-flex flex-column flex-sm-row mt-3'}>\r\n            <ir-button\r\n              onClick={() => this.closeModal.emit(null)}\r\n              btn_styles=\"justify-content-center\"\r\n              class={`mb-1 mb-sm-0 flex-fill mr-sm-1`}\r\n              icon=\"\"\r\n              text={locales.entries.Lcz_Cancel}\r\n              btn_color=\"secondary\"\r\n            ></ir-button>\r\n\r\n            <ir-button\r\n              btn_styles=\"justify-content-center align-items-center\"\r\n              class={'m-0 flex-fill text-center'}\r\n              icon=\"\"\r\n              isLoading={isRequestPending('/Do_Booking_Extra_Service')}\r\n              text={locales.entries.Lcz_Save}\r\n              btn_color=\"primary\"\r\n              onClick={this.saveAmenity.bind(this)}\r\n            ></ir-button>\r\n          </div>\r\n        </section>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n","import { Component, Fragment, Host, Prop, h } from '@stencil/core';\r\nimport { Booking } from '@/models/booking.dto';\r\n@Component({\r\n  tag: 'ir-extra-services',\r\n  styleUrl: 'ir-extra-services.css',\r\n  scoped: true,\r\n})\r\nexport class IrExtraServices {\r\n  @Prop() booking: Pick<Booking, 'currency' | 'extra_services' | 'booking_nbr'>;\r\n\r\n  render() {\r\n    return (\r\n      <Host class={'card p-0 '}>\r\n        {this.booking.extra_services?.map((service, index) => (\r\n          <Fragment>\r\n            <ir-extra-service\r\n              bookingNumber={this.booking.booking_nbr}\r\n              currencySymbol={this.booking.currency.symbol}\r\n              key={service.booking_system_id}\r\n              service={service}\r\n            ></ir-extra-service>\r\n            {index !== this.booking.extra_services.length - 1 && <hr class=\"mr-2 ml-2 my-0 p-0\" />}\r\n          </Fragment>\r\n        ))}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",".input-group-text {\r\n  min-width: 10rem;\r\n  text-align: left;\r\n}\r\n.mobilePrefixSelect {\r\n  border-right-width: 0;\r\n  border-top-right-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n}\r\n.mobilePrefixInput {\r\n  border-top-left-radius: 0;\r\n  border-bottom-left-radius: 0;\r\n}\r\n\r\n/* custome checkbox */\r\n.check-container {\r\n  position: relative;\r\n  /* padding-left: 30px; */\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  -webkit-user-select: none;\r\n  -moz-user-select: none;\r\n  -ms-user-select: none;\r\n  user-select: none;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.check-container input {\r\n  position: relative;\r\n  opacity: 0;\r\n  cursor: pointer;\r\n  height: 0;\r\n  width: 0;\r\n}\r\n.check-container .checkmark {\r\n  position: relative;\r\n  top: 0;\r\n  left: 0;\r\n  height: 20px;\r\n  width: 20px;\r\n  border: 1px solid #cacfe7;\r\n  border-radius: 4px;\r\n  transition: all 0.3s ease;\r\n}\r\n.check-container input:checked ~ .checkmark {\r\n  background-color: #1e9ff2;\r\n  border-color: #1e9ff2;\r\n}\r\n.checkmark:after {\r\n  content: '';\r\n  position: absolute;\r\n  display: none;\r\n}\r\n.check-container input:checked ~ .checkmark:after {\r\n  display: block;\r\n}\r\n.check-label {\r\n  margin-left: 10px !important;\r\n}\r\n.check-container .checkmark:after {\r\n  left: 6px;\r\n  top: 3px;\r\n  width: 6px;\r\n  height: 10px;\r\n  border: solid white;\r\n  border-width: 0 2px 2px 0;\r\n  -webkit-transform: rotate(45deg);\r\n  -ms-transform: rotate(45deg);\r\n  transform: rotate(45deg);\r\n}\r\n.ir-card-header {\r\n  width: 100%;\r\n  border-bottom: 1px solid #e4e5ec;\r\n}\r\n.close-icon {\r\n  margin: 0;\r\n}\r\n.border-theme {\r\n  border: 1px solid #cacfe7;\r\n}\r\n.loading-container {\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n","import { Component, State, h, Prop, EventEmitter, Event, Watch } from '@stencil/core';\r\nimport { Guest } from '@/models/booking.dto';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport { ICountry } from '@/components';\r\nimport { RoomService } from '@/services/room.service';\r\nimport locales from '@/stores/locales.store';\r\nimport Token from '@/models/Token';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\n\r\n@Component({\r\n  tag: 'ir-guest-info',\r\n  styleUrl: 'ir-guest-info.css',\r\n  scoped: true,\r\n})\r\nexport class GuestInfo {\r\n  @Prop() language: string;\r\n  @Prop() headerShown: boolean;\r\n  @Prop() email: string;\r\n  @Prop() booking_nbr: string;\r\n  @Prop() ticket: string;\r\n  @Prop() isInSideBar: boolean;\r\n\r\n  @State() countries: ICountry[];\r\n  // @State() submit: boolean = false;\r\n  @State() guest: Guest | null = null;\r\n  @State() isLoading: boolean = false;\r\n  @State() autoValidate = false;\r\n\r\n  @Event() closeSideBar: EventEmitter<null>;\r\n  @Event({ bubbles: true }) resetBookingEvt: EventEmitter<null>;\r\n\r\n  private bookingService = new BookingService();\r\n  private roomService = new RoomService();\r\n  private token: Token = new Token();\r\n\r\n  async componentWillLoad() {\r\n    if (this.ticket) {\r\n      this.token.setToken(this.ticket);\r\n    }\r\n    if (!!this.token.getToken()) this.init();\r\n  }\r\n\r\n  @Watch('ticket')\r\n  ticketChanged(newValue: string, oldValue: string) {\r\n    if (newValue === oldValue) {\r\n      return;\r\n    }\r\n    this.token.setToken(this.ticket);\r\n    this.init();\r\n  }\r\n\r\n  async init() {\r\n    try {\r\n      console.log('first');\r\n      this.isLoading = true;\r\n      const [guest, countries, fetchedLocales] = await Promise.all([\r\n        this.bookingService.fetchGuest(this.email),\r\n        this.bookingService.getCountries(this.language),\r\n        !locales || !locales.entries || Object.keys(locales.entries).length === 0 ? this.roomService.fetchLanguage(this.language) : Promise.resolve(null), // Skip fetching if locales are already set\r\n      ]);\r\n\r\n      // Set the fetched locales if they were fetched\r\n      if (fetchedLocales) {\r\n        locales.entries = fetchedLocales.entries;\r\n        locales.direction = fetchedLocales.direction;\r\n      }\r\n\r\n      // Assign the fetched guest and countries\r\n      this.countries = countries;\r\n      this.guest = { ...guest, mobile: guest.mobile_without_prefix };\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n  private handleInputChange(params: Partial<Guest>) {\r\n    this.guest = { ...this.guest, ...params };\r\n  }\r\n\r\n  async editGuest() {\r\n    try {\r\n      this.autoValidate = true;\r\n\r\n      await this.bookingService.editExposedGuest(this.guest, this.booking_nbr ?? null);\r\n      this.closeSideBar.emit(null);\r\n      this.resetBookingEvt.emit(null);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  render() {\r\n    if (this.isLoading && this.isInSideBar) {\r\n      <div class={'loading-container'}>\r\n        <ir-spinner></ir-spinner>\r\n      </div>;\r\n    }\r\n    if (this.isLoading) {\r\n      return null;\r\n    }\r\n    return [\r\n      <div class=\"p-0\">\r\n        {this.headerShown && (\r\n          <div class=\"position-sticky mb-1 shadow-none p-0\">\r\n            <div class=\"d-flex align-items-center justify-content-between ir-card-header py-1 p-0\">\r\n              <h3 class=\"card-title text-left font-medium-2 px-1 my-0\">{locales.entries.Lcz_GuestDetails}</h3>\r\n              <ir-icon\r\n                class=\"close close-icon px-1\"\r\n                onIconClickHandler={() => {\r\n                  this.closeSideBar.emit(null);\r\n                }}\r\n              >\r\n                <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 384 512\" height={20} width={20}>\r\n                  <path d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\" />\r\n                </svg>\r\n              </ir-icon>\r\n            </div>\r\n          </div>\r\n        )}\r\n        <div class=\"card-content collapse show\">\r\n          <div class={this.headerShown ? 'card-body px-1' : 'pt-0'}>\r\n            <ir-input-text\r\n              autoValidate={this.autoValidate}\r\n              label={locales.entries.Lcz_FirstName}\r\n              name=\"firstName\"\r\n              // submitted={this.submit}\r\n              value={this.guest?.first_name}\r\n              required\r\n              onTextChange={e => this.handleInputChange({ first_name: e.detail })}\r\n            ></ir-input-text>\r\n            <ir-input-text\r\n              autoValidate={this.autoValidate}\r\n              label={locales.entries.Lcz_LastName}\r\n              name=\"lastName\"\r\n              // submitted={this.submit}\r\n              value={this.guest?.last_name}\r\n              required\r\n              onTextChange={e => this.handleInputChange({ last_name: e.detail })}\r\n            ></ir-input-text>\r\n            <ir-input-text\r\n              label={locales.entries.Lcz_Email}\r\n              name=\"email\"\r\n              // submitted={this.submit}\r\n              value={this.guest?.email}\r\n              required\r\n              onTextChange={e => this.handleInputChange({ email: e.detail })}\r\n            ></ir-input-text>\r\n            <ir-input-text\r\n              label={locales.entries.Lcz_AlternativeEmail}\r\n              name=\"altEmail\"\r\n              value={this.guest?.alternative_email}\r\n              onTextChange={e => this.handleInputChange({ alternative_email: e.detail })}\r\n            ></ir-input-text>\r\n            {/* <ir-input-text label=\"Password\" placeholder=\"\" name=\"password\" submited={this.submit} type=\"password\" value={this.Model.password} required></ir-input-text> */}\r\n            {/* <ir-select\r\n              selectContainerStyle=\"mb-1\"\r\n              required\r\n              name=\"country\"\r\n              submited={this.submit}\r\n              label={locales.entries.Lcz_Country}\r\n              selectedValue={this.guest?.country_id?.toString() ?? ''}\r\n              data={this.countries?.map(item => {\r\n                return {\r\n                  value: item.id.toString(),\r\n                  text: item.name,\r\n                };\r\n              })}\r\n              firstOption={'...'}\r\n              onSelectChange={e => this.handleInputChange({ country_id: e.detail })}\r\n            ></ir-select> */}\r\n            <ir-country-picker\r\n              // error={this.submit && !this.guest.country_id}\r\n              country={this.countries.find(c => c.id === this.guest.country_id)}\r\n              label={locales.entries.Lcz_Country}\r\n              onCountryChange={e => this.handleInputChange({ country_id: e.detail.id })}\r\n              countries={this.countries}\r\n            ></ir-country-picker>\r\n            <ir-phone-input\r\n              onTextChange={e => {\r\n                e.stopImmediatePropagation();\r\n                e.stopPropagation();\r\n                const { mobile, phone_prefix } = e.detail;\r\n                if (mobile !== this.guest.mobile) {\r\n                  this.handleInputChange({ mobile });\r\n                }\r\n                if (phone_prefix !== this.guest.country_phone_prefix) this.handleInputChange({ country_phone_prefix: phone_prefix });\r\n              }}\r\n              phone_prefix={this.guest.country_phone_prefix}\r\n              value={this.guest.mobile}\r\n              language={this.language}\r\n              label={locales.entries.Lcz_MobilePhone}\r\n              countries={this.countries}\r\n            />\r\n            <div class=\"mb-2\">\r\n              <ir-textarea\r\n                variant=\"prepend\"\r\n                onTextChange={e => this.handleInputChange({ notes: e.detail })}\r\n                value={this.guest?.notes}\r\n                label={locales.entries.Lcz_PrivateNote}\r\n              ></ir-textarea>\r\n            </div>\r\n            <div class={'p-0 m-0'}>\r\n              <label class={`check-container m-0 p-0`}>\r\n                <input\r\n                  class={'m-0 p-0'}\r\n                  type=\"checkbox\"\r\n                  name=\"newsletter\"\r\n                  checked={this.guest.subscribe_to_news_letter}\r\n                  onInput={e => this.handleInputChange({ subscribe_to_news_letter: (e.target as HTMLInputElement).checked })}\r\n                />\r\n                <span class=\"checkmark m-0 p-0\"></span>\r\n                <span class={'m-0 p-0  check-label'}>{locales.entries.Lcz_Newsletter}</span>\r\n              </label>\r\n            </div>\r\n\r\n            <hr />\r\n            <ir-button\r\n              isLoading={isRequestPending('/Edit_Exposed_Guest')}\r\n              btn_disabled={this.isLoading}\r\n              btn_styles=\"d-flex align-items-center justify-content-center\"\r\n              text={locales.entries.Lcz_Save}\r\n              onClickHandler={this.editGuest.bind(this)}\r\n              color=\"btn-primary\"\r\n            ></ir-button>\r\n          </div>\r\n        </div>\r\n      </div>,\r\n    ];\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n.unit-name {\r\n  max-width: 100px;\r\n  display: inline-block;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n","// import { HouseKeepingService } from '@/services/housekeeping.service';\r\n// import housekeeping_store from '@/stores/housekeeping.store';\r\nimport { ArchivedTask } from '@/models/housekeeping';\r\nimport { HouseKeepingService } from '@/services/housekeeping.service';\r\nimport calendar_data from '@/stores/calendar-data';\r\nimport housekeeping_store from '@/stores/housekeeping.store';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\nimport locales from '@/stores/locales.store';\r\nimport { downloadFile } from '@/utils/utils';\r\nimport { Component, Fragment, Host, Listen, Prop, State, h } from '@stencil/core';\r\nimport moment from 'moment';\r\nimport { v4 } from 'uuid';\r\nexport type ArchivesFilters = {\r\n  from_date: string;\r\n  to_date: string;\r\n  filtered_by_hkm?: number[];\r\n  filtered_by_unit?: number[];\r\n};\r\n@Component({\r\n  tag: 'ir-hk-archive',\r\n  styleUrl: 'ir-hk-archive.css',\r\n  scoped: true,\r\n})\r\nexport class IrHkArchive {\r\n  @Prop() propertyId: string | number;\r\n  @Prop() language: string = 'en';\r\n  @Prop() ticket: string;\r\n\r\n  @State() filters: ArchivesFilters = {\r\n    from_date: null,\r\n    to_date: null,\r\n    filtered_by_hkm: [],\r\n    filtered_by_unit: [],\r\n  };\r\n  @State() data: (ArchivedTask & { id: string })[] = [];\r\n  @State() isLoading: 'search' | 'excel' | null = null;\r\n  @State() fetchedData: boolean = false;\r\n  @State() selectedBooking: number | string | null;\r\n  private minSelectableDate = moment().subtract(90, 'days').toDate();\r\n  private houseKeepingService = new HouseKeepingService();\r\n  private units: { id: number; name: string }[] = [];\r\n  private handleSideBarToggle(e) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    this.selectedBooking = null;\r\n  }\r\n\r\n  componentWillLoad() {\r\n    this.setUpUnits();\r\n  }\r\n  private setUpUnits() {\r\n    const units = [];\r\n    calendar_data.roomsInfo.forEach(r => {\r\n      r.physicalrooms.forEach(room => {\r\n        units.push({ id: room.id, name: room.name });\r\n      });\r\n    });\r\n    this.units = units;\r\n  }\r\n\r\n  private async getArchivedTasks(export_to_excel: boolean = false) {\r\n    const res = await this.houseKeepingService.getArchivedHKTasks({ property_id: Number(this.propertyId), ...this.filters, is_export_to_excel: export_to_excel });\r\n    this.data = [...(res?.tasks || [])]?.map(t => ({ ...t, id: v4() }));\r\n    this.fetchedData = true;\r\n    return { tasks: res?.tasks, url: res?.url };\r\n  }\r\n\r\n  @Listen('dateRangeChanged')\r\n  handleDateRangeChange(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    const { fromDate, toDate } = e.detail;\r\n    this.updateFilters({\r\n      from_date: fromDate ? fromDate.format('YYYY-MM-DD') : null,\r\n      to_date: toDate ? toDate.format('YYYY-MM-DD') : null,\r\n    });\r\n  }\r\n\r\n  private updateFilters(props: Partial<ArchivesFilters>) {\r\n    this.filters = { ...this.filters, ...props };\r\n  }\r\n  async searchArchive(e: CustomEvent) {\r\n    try {\r\n      e.stopImmediatePropagation();\r\n      e.stopPropagation();\r\n      this.isLoading = 'search';\r\n      await this.getArchivedTasks();\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      this.isLoading = null;\r\n    }\r\n  }\r\n\r\n  async exportArchive(e: CustomEvent) {\r\n    try {\r\n      e.stopImmediatePropagation();\r\n      e.stopPropagation();\r\n      this.isLoading = 'excel';\r\n      const { url } = await this.getArchivedTasks(true);\r\n      downloadFile(url);\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      this.isLoading = null;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <ir-title class=\"px-1\" label=\"Cleaning Archives (90 days)\" displayContext=\"sidebar\"></ir-title>\r\n        <section class=\"px-1\">\r\n          <div class=\"d-flex\">\r\n            <ir-select\r\n              class=\"w-100\"\r\n              showFirstOption={false}\r\n              LabelAvailable={false}\r\n              data={[\r\n                { text: 'All units', value: '000' },\r\n                ,\r\n                ...this.units\r\n                  ?.map(v => ({\r\n                    text: v.name,\r\n                    value: v.id.toString(),\r\n                  }))\r\n                  .sort((a, b) => a.text.toLowerCase().localeCompare(b.text.toLowerCase())),\r\n              ]}\r\n              onSelectChange={e => {\r\n                e.stopImmediatePropagation();\r\n                e.stopPropagation();\r\n                if (e.detail === '000') {\r\n                  this.updateFilters({ filtered_by_unit: [] });\r\n                } else {\r\n                  this.updateFilters({ filtered_by_unit: [e.detail] });\r\n                }\r\n              }}\r\n            ></ir-select>\r\n            {housekeeping_store?.hk_criteria?.housekeepers.length > 1 && (\r\n              <ir-select\r\n                class=\"ml-1 w-100\"\r\n                selectedValue={this.filters?.filtered_by_hkm?.length === housekeeping_store.hk_criteria.housekeepers.length ? '000' : this.filters?.filtered_by_hkm[0]?.toString()}\r\n                LabelAvailable={false}\r\n                showFirstOption={false}\r\n                data={[\r\n                  { text: 'All housekeepers', value: '000' },\r\n                  ...housekeeping_store?.hk_criteria?.housekeepers\r\n                    .map(v => ({\r\n                      text: v.name,\r\n                      value: v.id.toString(),\r\n                    }))\r\n                    .sort((a, b) => a.text.toLowerCase().localeCompare(b.text.toLowerCase())),\r\n                ]}\r\n                onSelectChange={e => {\r\n                  if (e.detail === '000') {\r\n                    this.updateFilters({ filtered_by_hkm: [] });\r\n                  } else {\r\n                    this.updateFilters({ filtered_by_hkm: [e.detail] });\r\n                  }\r\n                }}\r\n              ></ir-select>\r\n            )}\r\n          </div>\r\n          <div class=\"d-flex mt-1 align-items-center\">\r\n            {/* <igl-date-range\r\n              class=\"mr-1\"\r\n              dateLabel={locales.entries.Lcz_Dates}\r\n              minDate={moment().add(-90, 'days').format('YYYY-MM-DD')}\r\n              defaultData={{\r\n                fromDate: this.filters.from_date,\r\n                toDate: this.filters.to_date,\r\n              }}\r\n            ></igl-date-range> */}\r\n            <ir-range-picker\r\n              minDate={this.minSelectableDate}\r\n              class=\"mr-1\"\r\n              fromDate={this.filters.from_date ? moment(this.filters.from_date, 'YYYY-MM-DD') : null}\r\n              toDate={this.filters.to_date ? moment(this.filters.to_date, 'YYYY-MM-DD') : null}\r\n            ></ir-range-picker>\r\n            <ir-button\r\n              title={locales.entries?.Lcz_Search}\r\n              variant=\"icon\"\r\n              icon_name=\"search\"\r\n              class=\"mr-1\"\r\n              isLoading={this.isLoading === 'search'}\r\n              onClickHandler={e => this.searchArchive(e)}\r\n            ></ir-button>\r\n            <ir-button\r\n              title={locales.entries?.Lcz_ExportToExcel}\r\n              variant=\"icon\"\r\n              icon_name=\"file\"\r\n              isLoading={this.isLoading === 'excel'}\r\n              onClickHandler={e => this.exportArchive(e)}\r\n            ></ir-button>\r\n          </div>\r\n          {this.fetchedData && (\r\n            <Fragment>\r\n              {this.data?.length === 0 && !isRequestPending('/Get_Archived_HK_Tasks') ? (\r\n                <p class={'text-center mt-2'}>No Results Found</p>\r\n              ) : (\r\n                <table class=\"mt-2\">\r\n                  <thead>\r\n                    <th class=\"sr-only\">period</th>\r\n                    <th class=\"sr-only\">housekeeper name</th>\r\n                    <th class=\"sr-only\">unit</th>\r\n                    <th class=\"sr-only\">booking number</th>\r\n                  </thead>\r\n                  <tbody>\r\n                    {this.data?.map(d => (\r\n                      <tr key={d.id}>\r\n                        <td class=\"pr-2\">{d.date}</td>\r\n                        <td class=\"px-2\">{d.house_keeper}</td>\r\n                        <td class=\"px-2\">\r\n                          <ir-tooltip message={d.unit} customSlot>\r\n                            <span slot=\"tooltip-trigger\" class={`unit-name`}>\r\n                              {d.unit}\r\n                            </span>\r\n                          </ir-tooltip>\r\n                        </td>\r\n                        <td class=\"px-2\">\r\n                          {d.booking_nbr ? (\r\n                            <ir-button\r\n                              btn_color=\"link\"\r\n                              btnStyle={{\r\n                                width: 'fit-content',\r\n                                padding: '0',\r\n                                margin: '0',\r\n                              }}\r\n                              labelStyle={{\r\n                                padding: '0',\r\n                              }}\r\n                              text={d.booking_nbr.toString()}\r\n                              onClick={() => {\r\n                                this.selectedBooking = d.booking_nbr;\r\n                                // window.open(`https://x.igloorooms.com/manage/acbookingeditV2.aspx?BN=${d.booking_nbr}`, '_blank');\r\n                              }}\r\n                            ></ir-button>\r\n                          ) : (\r\n                            'N/A'\r\n                          )}\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              )}\r\n            </Fragment>\r\n          )}\r\n        </section>\r\n        <ir-sidebar\r\n          onIrSidebarToggle={this.handleSideBarToggle.bind(this)}\r\n          open={!!this.selectedBooking}\r\n          showCloseButton={false}\r\n          sidebarStyles={{\r\n            width: '80rem',\r\n            background: '#F2F3F8',\r\n          }}\r\n        >\r\n          {this.selectedBooking && (\r\n            <ir-booking-details\r\n              slot=\"sidebar-body\"\r\n              hasPrint\r\n              hasReceipt\r\n              hasCloseButton\r\n              onCloseSidebar={() => (this.selectedBooking = null)}\r\n              is_from_front_desk\r\n              propertyid={Number(this.propertyId)}\r\n              hasRoomEdit\r\n              hasRoomDelete\r\n              bookingNumber={this.selectedBooking?.toString()}\r\n              language={this.language}\r\n              hasRoomAdd\r\n              ticket={this.ticket}\r\n            ></ir-booking-details>\r\n          )}\r\n        </ir-sidebar>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n\r\n@media only screen and (min-width: 900px) {\r\n  /* td {\r\n    min-width: 140px !important;\r\n    width: max-content !important;\r\n  } */\r\n}\r\n@media only screen and (max-width: 900px) {\r\n  /* td {\r\n    min-width: 100px !important;\r\n  } */\r\n  .table-container {\r\n    width: max-content !important;\r\n  }\r\n}\r\n","import { IPendingActions, Task } from '@/models/housekeeping';\r\nimport Token from '@/models/Token';\r\nimport { HouseKeepingService } from '@/services/housekeeping.service';\r\nimport { RoomService } from '@/services/room.service';\r\nimport housekeeping_store from '@/stores/housekeeping.store';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\nimport locales from '@/stores/locales.store';\r\nimport { Component, Host, Prop, State, h, Element, Watch, Event, EventEmitter, Listen } from '@stencil/core';\r\nimport moment from 'moment';\r\nimport { v4 } from 'uuid';\r\nimport { TaskFilters } from './types';\r\nimport { downloadFile } from '@/utils/utils';\r\n\r\n@Component({\r\n  tag: 'ir-hk-tasks',\r\n  styleUrl: 'ir-hk-tasks.css',\r\n  scoped: true,\r\n})\r\nexport class IrHkTasks {\r\n  @Element() el: HTMLElement;\r\n\r\n  @Prop() language: string = '';\r\n  @Prop() ticket: string = '';\r\n  @Prop() propertyid: number;\r\n  @Prop() p: string;\r\n\r\n  @State() isLoading = false;\r\n  @State() selectedDuration = '';\r\n  @State() selectedHouseKeeper = '0';\r\n  @State() selectedRoom: IPendingActions | null = null;\r\n  @State() archiveOpened = false;\r\n  @State() property_id: number;\r\n  @State() tasks: Task[] = [];\r\n  @State() selectedTasks: Task[] = [];\r\n  @State() isSidebarOpen: boolean;\r\n  @State() isApplyFiltersLoading: boolean;\r\n  @State() filters: TaskFilters;\r\n\r\n  @Event({ bubbles: true, composed: true }) clearSelectedHkTasks: EventEmitter<void>;\r\n\r\n  private hkNameCache: Record<number, string> = {};\r\n  private roomService = new RoomService();\r\n  private houseKeepingService = new HouseKeepingService();\r\n  private token = new Token();\r\n  private table_sorting: Map<string, 'ASC' | 'DESC'> = new Map();\r\n  private modal: HTMLIrModalElement;\r\n\r\n  componentWillLoad() {\r\n    if (this.ticket !== '') {\r\n      this.token.setToken(this.ticket);\r\n      this.init();\r\n    }\r\n  }\r\n\r\n  @Watch('ticket')\r\n  ticketChanged(newValue: string, oldValue: string) {\r\n    if (newValue === oldValue) {\r\n      return;\r\n    }\r\n    this.token.setToken(this.ticket);\r\n    this.init();\r\n  }\r\n\r\n  @Listen('closeSideBar')\r\n  handleCloseSidebar(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    this.isSidebarOpen = false;\r\n  }\r\n  @Listen('sortingChanged')\r\n  handleSortingChanged(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    const { field, direction } = e.detail;\r\n    console.log(e.detail);\r\n    if (field === 'date') {\r\n      return;\r\n    }\r\n    this.table_sorting.set(field, direction);\r\n  }\r\n\r\n  private async init() {\r\n    try {\r\n      this.isLoading = true;\r\n      let propertyId = this.propertyid;\r\n      if (!this.propertyid && !this.p) {\r\n        throw new Error('Property ID or username is required');\r\n      }\r\n      // let roomResp = null;\r\n      if (!propertyId) {\r\n        console.log(propertyId);\r\n        const propertyData = await this.roomService.getExposedProperty({\r\n          id: 0,\r\n          aname: this.p,\r\n          language: this.language,\r\n          is_backend: true,\r\n          include_units_hk_status: true,\r\n        });\r\n        // roomResp = propertyData;\r\n        propertyId = propertyData.My_Result.id;\r\n      }\r\n      this.property_id = propertyId;\r\n      const requests = [\r\n        this.houseKeepingService.getHkTasks({ property_id: this.property_id, from_date: moment().format('YYYY-MM-DD'), to_date: moment().format('YYYY-MM-DD') }),\r\n        this.houseKeepingService.getExposedHKSetup(this.property_id),\r\n        this.roomService.fetchLanguage(this.language),\r\n      ];\r\n      if (this.propertyid) {\r\n        requests.push(\r\n          this.roomService.getExposedProperty({\r\n            id: this.propertyid,\r\n            language: this.language,\r\n            is_backend: true,\r\n            include_units_hk_status: true,\r\n          }),\r\n        );\r\n      }\r\n\r\n      const results = await Promise.all(requests);\r\n      const tasksResult = results[0] as any;\r\n      if (tasksResult?.tasks) {\r\n        this.updateTasks(tasksResult.tasks);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n\r\n  private buildHousekeeperNameCache() {\r\n    this.hkNameCache = {};\r\n    housekeeping_store.hk_criteria?.housekeepers?.forEach(hk => {\r\n      if (hk.id != null && hk.name != null) {\r\n        this.hkNameCache[hk.id] = hk.name;\r\n      }\r\n    });\r\n  }\r\n\r\n  private updateTasks(tasks) {\r\n    this.buildHousekeeperNameCache();\r\n    this.tasks = tasks.map(t => ({\r\n      ...t,\r\n      id: v4(),\r\n      housekeeper: (() => {\r\n        const name = this.hkNameCache[t.hkm_id];\r\n        if (name) {\r\n          return name;\r\n        }\r\n        const hkName = housekeeping_store.hk_criteria?.housekeepers?.find(hk => hk.id === t.hkm_id)?.name;\r\n        this.hkNameCache[t.hkm_id] = hkName;\r\n        return hkName;\r\n      })(),\r\n    }));\r\n  }\r\n\r\n  private async handleHeaderButtonPress(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    const { name } = e.detail;\r\n    switch (name) {\r\n      case 'cleaned':\r\n        this.modal?.openModal();\r\n        break;\r\n      case 'export':\r\n        const sortingArray: { key: string; value: string }[] = Array.from(this.table_sorting.entries()).map(([key, value]) => ({\r\n          key,\r\n          value,\r\n        }));\r\n        console.log(sortingArray);\r\n        const { url } = await this.fetchTasksWithFilters(true);\r\n        downloadFile(url);\r\n        break;\r\n      case 'archive':\r\n        this.isSidebarOpen = true;\r\n        break;\r\n    }\r\n  }\r\n\r\n  private async handleModalConfirmation(e: CustomEvent) {\r\n    try {\r\n      e.stopImmediatePropagation();\r\n      e.stopPropagation();\r\n      if (this.selectedTasks.length === 0) {\r\n        return;\r\n      }\r\n      await this.houseKeepingService.executeHKAction({\r\n        actions: this.selectedTasks.map(t => ({ description: 'Cleaned', hkm_id: t.hkm_id === 0 ? null : t.hkm_id, unit_id: t.unit.id, booking_nbr: t.booking_nbr })),\r\n      });\r\n      await this.fetchTasksWithFilters();\r\n    } finally {\r\n      this.selectedTasks = [];\r\n      this.clearSelectedHkTasks.emit();\r\n      this.modal.closeModal();\r\n    }\r\n  }\r\n\r\n  private async applyFilters(e: CustomEvent) {\r\n    try {\r\n      this.isApplyFiltersLoading = true;\r\n      e.stopImmediatePropagation();\r\n      e.stopPropagation();\r\n      this.filters = { ...e.detail };\r\n      await this.fetchTasksWithFilters();\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      this.isApplyFiltersLoading = false;\r\n    }\r\n  }\r\n  private async fetchTasksWithFilters(export_to_excel: boolean = false) {\r\n    const { cleaning_periods, housekeepers, cleaning_frequencies, dusty_units, highlight_check_ins } = this.filters ?? {};\r\n\r\n    const { tasks, url } = await this.houseKeepingService.getHkTasks({\r\n      housekeepers,\r\n      cleaning_frequencies: cleaning_frequencies?.code,\r\n      dusty_units: dusty_units?.code,\r\n      highlight_window: highlight_check_ins?.code,\r\n      property_id: this.property_id,\r\n      from_date: moment().format('YYYY-MM-DD'),\r\n      to_date: cleaning_periods?.code || moment().format('YYYY-MM-DD'),\r\n      is_export_to_excel: export_to_excel,\r\n    });\r\n    if (tasks) {\r\n      this.updateTasks(tasks);\r\n    }\r\n    return { tasks, url };\r\n  }\r\n\r\n  render() {\r\n    if (this.isLoading) {\r\n      return <ir-loading-screen></ir-loading-screen>;\r\n    }\r\n    return (\r\n      <Host data-testid=\"hk_tasks_base\">\r\n        <ir-toast></ir-toast>\r\n        <ir-interceptor></ir-interceptor>\r\n        <section class=\"p-2 d-flex flex-column\" style={{ gap: '1rem' }}>\r\n          <ir-tasks-header onHeaderButtonPress={this.handleHeaderButtonPress.bind(this)} isCleanedEnabled={this.selectedTasks.length > 0}></ir-tasks-header>\r\n          <div class=\"d-flex flex-column flex-md-row mt-1 \" style={{ gap: '1rem' }}>\r\n            <ir-tasks-filters\r\n              isLoading={this.isApplyFiltersLoading}\r\n              onApplyFilters={e => {\r\n                this.applyFilters(e);\r\n              }}\r\n            ></ir-tasks-filters>\r\n            <ir-tasks-table\r\n              onRowSelectChange={e => {\r\n                e.stopImmediatePropagation();\r\n                e.stopPropagation();\r\n                this.selectedTasks = e.detail;\r\n              }}\r\n              class=\"flex-grow-1 w-100\"\r\n              tasks={this.tasks}\r\n            ></ir-tasks-table>\r\n          </div>\r\n        </section>\r\n        <ir-modal\r\n          autoClose={false}\r\n          ref={el => (this.modal = el)}\r\n          isLoading={isRequestPending('/Execute_HK_Action')}\r\n          onConfirmModal={this.handleModalConfirmation.bind(this)}\r\n          iconAvailable={true}\r\n          icon=\"ft-alert-triangle danger h1\"\r\n          leftBtnText={locales.entries.Lcz_NO}\r\n          rightBtnText={locales.entries.Lcz_Yes}\r\n          leftBtnColor=\"secondary\"\r\n          rightBtnColor={'primary'}\r\n          modalTitle={locales.entries.Lcz_Confirmation}\r\n          modalBody={'Update selected unit(s) to Clean'}\r\n        ></ir-modal>\r\n        <ir-sidebar\r\n          open={this.isSidebarOpen}\r\n          id=\"editGuestInfo\"\r\n          onIrSidebarToggle={e => {\r\n            e.stopImmediatePropagation();\r\n            e.stopPropagation();\r\n            this.isSidebarOpen = false;\r\n          }}\r\n          // sidebarStyles={{\r\n          //   width: '80vw',\r\n          // }}\r\n          showCloseButton={false}\r\n        >\r\n          {this.isSidebarOpen && <ir-hk-archive ticket={this.token.getToken()} propertyId={this.property_id} slot=\"sidebar-body\"></ir-hk-archive>}\r\n        </ir-sidebar>\r\n        {/* <ir-title class=\"d-none d-md-flex\" label={locales.entries.Lcz_HousekeepingTasks} justifyContent=\"space-between\">\r\n            <ir-button slot=\"title-body\" text={locales.entries.Lcz_Archive} size=\"sm\"></ir-button>\r\n          </ir-title> */}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.icon-button {\r\n  all: unset;\r\n  margin: 0;\r\n  padding: 0;\r\n  color: #6b6f82;\r\n}\r\n.icon-button:hover {\r\n  cursor: pointer;\r\n  color: #104064;\r\n}\r\n","import { Component, Prop, h, Event, EventEmitter } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-icon',\r\n  styleUrl: 'ir-icon.css',\r\n  scoped: true,\r\n})\r\nexport class IrIcon {\r\n  @Prop() icon = 'ft-check';\r\n\r\n  @Event({ bubbles: true, composed: true }) iconClickHandler: EventEmitter;\r\n\r\n  render() {\r\n    return (\r\n      <button class=\"icon-button\" onClick={() => this.iconClickHandler.emit()}>\r\n        <slot name=\"icon\"></slot>\r\n      </button>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  box-sizing: border-box;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.icon {\r\n  height: var(--icon-size, 1.25rem);\r\n  width: var(--icon-size, 1.25rem);\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n","import { Component, Prop, h } from '@stencil/core';\r\nimport icons, { TIcons } from './icons';\r\n\r\n@Component({\r\n  tag: 'ir-icons',\r\n  styleUrl: 'ir-icons.css',\r\n  scoped: true,\r\n})\r\nexport class IrIcons {\r\n  @Prop() name: TIcons;\r\n  @Prop() svgClassName: string;\r\n  @Prop() color: string;\r\n  render() {\r\n    const svgPath = icons[this.name] || null;\r\n    if (!svgPath) {\r\n      return null;\r\n    }\r\n    return (\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" color={this.color} viewBox={svgPath.viewBox} class={`icon ${this.svgClassName}`}>\r\n        <path fill=\"currentColor\" d={svgPath.d}></path>\r\n      </svg>\r\n    );\r\n  }\r\n}\r\n","/** Checks if value is string */\nfunction isString(str) {\n  return typeof str === 'string' || str instanceof String;\n}\n\n/** Checks if value is object */\nfunction isObject(obj) {\n  var _obj$constructor;\n  return typeof obj === 'object' && obj != null && (obj == null || (_obj$constructor = obj.constructor) == null ? void 0 : _obj$constructor.name) === 'Object';\n}\nfunction pick(obj, keys) {\n  if (Array.isArray(keys)) return pick(obj, (_, k) => keys.includes(k));\n  return Object.entries(obj).reduce((acc, _ref) => {\n    let [k, v] = _ref;\n    if (keys(v, k)) acc[k] = v;\n    return acc;\n  }, {});\n}\n\n/** Direction */\nconst DIRECTION = {\n  NONE: 'NONE',\n  LEFT: 'LEFT',\n  FORCE_LEFT: 'FORCE_LEFT',\n  RIGHT: 'RIGHT',\n  FORCE_RIGHT: 'FORCE_RIGHT'\n};\n\n/** Direction */\n\nfunction forceDirection(direction) {\n  switch (direction) {\n    case DIRECTION.LEFT:\n      return DIRECTION.FORCE_LEFT;\n    case DIRECTION.RIGHT:\n      return DIRECTION.FORCE_RIGHT;\n    default:\n      return direction;\n  }\n}\n\n/** Escapes regular expression control chars */\nfunction escapeRegExp(str) {\n  return str.replace(/([.*+?^=!:${}()|[\\]/\\\\])/g, '\\\\$1');\n}\n\n// cloned from https://github.com/epoberezkin/fast-deep-equal with small changes\nfunction objectIncludes(b, a) {\n  if (a === b) return true;\n  const arrA = Array.isArray(a),\n    arrB = Array.isArray(b);\n  let i;\n  if (arrA && arrB) {\n    if (a.length != b.length) return false;\n    for (i = 0; i < a.length; i++) if (!objectIncludes(a[i], b[i])) return false;\n    return true;\n  }\n  if (arrA != arrB) return false;\n  if (a && b && typeof a === 'object' && typeof b === 'object') {\n    const dateA = a instanceof Date,\n      dateB = b instanceof Date;\n    if (dateA && dateB) return a.getTime() == b.getTime();\n    if (dateA != dateB) return false;\n    const regexpA = a instanceof RegExp,\n      regexpB = b instanceof RegExp;\n    if (regexpA && regexpB) return a.toString() == b.toString();\n    if (regexpA != regexpB) return false;\n    const keys = Object.keys(a);\n    // if (keys.length !== Object.keys(b).length) return false;\n\n    for (i = 0; i < keys.length; i++) if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    for (i = 0; i < keys.length; i++) if (!objectIncludes(b[keys[i]], a[keys[i]])) return false;\n    return true;\n  } else if (a && b && typeof a === 'function' && typeof b === 'function') {\n    return a.toString() === b.toString();\n  }\n  return false;\n}\n\n/** Selection range */\n\nexport { DIRECTION, escapeRegExp, forceDirection, isObject, isString, objectIncludes, pick };\n","import { DIRECTION } from './utils.js';\n\n/** Provides details of changing input */\nclass ActionDetails {\n  /** Current input value */\n\n  /** Current cursor position */\n\n  /** Old input value */\n\n  /** Old selection */\n\n  constructor(opts) {\n    Object.assign(this, opts);\n\n    // double check if left part was changed (autofilling, other non-standard input triggers)\n    while (this.value.slice(0, this.startChangePos) !== this.oldValue.slice(0, this.startChangePos)) {\n      --this.oldSelection.start;\n    }\n    if (this.insertedCount) {\n      // double check right part\n      while (this.value.slice(this.cursorPos) !== this.oldValue.slice(this.oldSelection.end)) {\n        if (this.value.length - this.cursorPos < this.oldValue.length - this.oldSelection.end) ++this.oldSelection.end;else ++this.cursorPos;\n      }\n    }\n  }\n\n  /** Start changing position */\n  get startChangePos() {\n    return Math.min(this.cursorPos, this.oldSelection.start);\n  }\n\n  /** Inserted symbols count */\n  get insertedCount() {\n    return this.cursorPos - this.startChangePos;\n  }\n\n  /** Inserted symbols */\n  get inserted() {\n    return this.value.substr(this.startChangePos, this.insertedCount);\n  }\n\n  /** Removed symbols count */\n  get removedCount() {\n    // Math.max for opposite operation\n    return Math.max(this.oldSelection.end - this.startChangePos ||\n    // for Delete\n    this.oldValue.length - this.value.length, 0);\n  }\n\n  /** Removed symbols */\n  get removed() {\n    return this.oldValue.substr(this.startChangePos, this.removedCount);\n  }\n\n  /** Unchanged head symbols */\n  get head() {\n    return this.value.substring(0, this.startChangePos);\n  }\n\n  /** Unchanged tail symbols */\n  get tail() {\n    return this.value.substring(this.startChangePos + this.insertedCount);\n  }\n\n  /** Remove direction */\n  get removeDirection() {\n    if (!this.removedCount || this.insertedCount) return DIRECTION.NONE;\n\n    // align right if delete at right\n    return (this.oldSelection.end === this.cursorPos || this.oldSelection.start === this.cursorPos) &&\n    // if not range removed (event with backspace)\n    this.oldSelection.end === this.oldSelection.start ? DIRECTION.RIGHT : DIRECTION.LEFT;\n  }\n}\n\nexport { ActionDetails as default };\n","/** Applies mask on element */\nfunction IMask(el, opts) {\n  // currently available only for input-like elements\n  return new IMask.InputMask(el, opts);\n}\n\nexport { IMask as default };\n","import { isString, isObject, pick } from '../core/utils.js';\nimport IMask from '../core/holder.js';\n\n// TODO can't use overloads here because of https://github.com/microsoft/TypeScript/issues/50754\n// export function maskedClass(mask: string): typeof MaskedPattern;\n// export function maskedClass(mask: DateConstructor): typeof MaskedDate;\n// export function maskedClass(mask: NumberConstructor): typeof MaskedNumber;\n// export function maskedClass(mask: Array<any> | ArrayConstructor): typeof MaskedDynamic;\n// export function maskedClass(mask: MaskedDate): typeof MaskedDate;\n// export function maskedClass(mask: MaskedNumber): typeof MaskedNumber;\n// export function maskedClass(mask: MaskedEnum): typeof MaskedEnum;\n// export function maskedClass(mask: MaskedRange): typeof MaskedRange;\n// export function maskedClass(mask: MaskedRegExp): typeof MaskedRegExp;\n// export function maskedClass(mask: MaskedFunction): typeof MaskedFunction;\n// export function maskedClass(mask: MaskedPattern): typeof MaskedPattern;\n// export function maskedClass(mask: MaskedDynamic): typeof MaskedDynamic;\n// export function maskedClass(mask: Masked): typeof Masked;\n// export function maskedClass(mask: typeof Masked): typeof Masked;\n// export function maskedClass(mask: typeof MaskedDate): typeof MaskedDate;\n// export function maskedClass(mask: typeof MaskedNumber): typeof MaskedNumber;\n// export function maskedClass(mask: typeof MaskedEnum): typeof MaskedEnum;\n// export function maskedClass(mask: typeof MaskedRange): typeof MaskedRange;\n// export function maskedClass(mask: typeof MaskedRegExp): typeof MaskedRegExp;\n// export function maskedClass(mask: typeof MaskedFunction): typeof MaskedFunction;\n// export function maskedClass(mask: typeof MaskedPattern): typeof MaskedPattern;\n// export function maskedClass(mask: typeof MaskedDynamic): typeof MaskedDynamic;\n// export function maskedClass<Mask extends typeof Masked> (mask: Mask): Mask;\n// export function maskedClass(mask: RegExp): typeof MaskedRegExp;\n// export function maskedClass(mask: (value: string, ...args: any[]) => boolean): typeof MaskedFunction;\n\n/** Get Masked class by mask type */\nfunction maskedClass(mask) /* TODO */{\n  if (mask == null) throw new Error('mask property should be defined');\n  if (mask instanceof RegExp) return IMask.MaskedRegExp;\n  if (isString(mask)) return IMask.MaskedPattern;\n  if (mask === Date) return IMask.MaskedDate;\n  if (mask === Number) return IMask.MaskedNumber;\n  if (Array.isArray(mask) || mask === Array) return IMask.MaskedDynamic;\n  if (IMask.Masked && mask.prototype instanceof IMask.Masked) return mask;\n  if (IMask.Masked && mask instanceof IMask.Masked) return mask.constructor;\n  if (mask instanceof Function) return IMask.MaskedFunction;\n  console.warn('Mask not found for mask', mask); // eslint-disable-line no-console\n  return IMask.Masked;\n}\nfunction normalizeOpts(opts) {\n  if (!opts) throw new Error('Options in not defined');\n  if (IMask.Masked) {\n    if (opts.prototype instanceof IMask.Masked) return {\n      mask: opts\n    };\n\n    /*\n      handle cases like:\n      1) opts = Masked\n      2) opts = { mask: Masked, ...instanceOpts }\n    */\n    const {\n      mask = undefined,\n      ...instanceOpts\n    } = opts instanceof IMask.Masked ? {\n      mask: opts\n    } : isObject(opts) && opts.mask instanceof IMask.Masked ? opts : {};\n    if (mask) {\n      const _mask = mask.mask;\n      return {\n        ...pick(mask, (_, k) => !k.startsWith('_')),\n        mask: mask.constructor,\n        _mask,\n        ...instanceOpts\n      };\n    }\n  }\n  if (!isObject(opts)) return {\n    mask: opts\n  };\n  return {\n    ...opts\n  };\n}\n\n// TODO can't use overloads here because of https://github.com/microsoft/TypeScript/issues/50754\n\n// From masked\n// export default function createMask<Opts extends Masked, ReturnMasked=Opts> (opts: Opts): ReturnMasked;\n// // From masked class\n// export default function createMask<Opts extends MaskedOptions<typeof Masked>, ReturnMasked extends Masked=InstanceType<Opts['mask']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedDate>, ReturnMasked extends MaskedDate=MaskedDate<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedNumber>, ReturnMasked extends MaskedNumber=MaskedNumber<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedEnum>, ReturnMasked extends MaskedEnum=MaskedEnum<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedRange>, ReturnMasked extends MaskedRange=MaskedRange<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedRegExp>, ReturnMasked extends MaskedRegExp=MaskedRegExp<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedFunction>, ReturnMasked extends MaskedFunction=MaskedFunction<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedPattern>, ReturnMasked extends MaskedPattern=MaskedPattern<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedDynamic>, ReturnMasked extends MaskedDynamic=MaskedDynamic<Opts['parent']>> (opts: Opts): ReturnMasked;\n// // From mask opts\n// export default function createMask<Opts extends MaskedOptions<Masked>, ReturnMasked=Opts extends MaskedOptions<infer M> ? M : never> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedNumberOptions, ReturnMasked extends MaskedNumber=MaskedNumber<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedDateFactoryOptions, ReturnMasked extends MaskedDate=MaskedDate<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedEnumOptions, ReturnMasked extends MaskedEnum=MaskedEnum<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedRangeOptions, ReturnMasked extends MaskedRange=MaskedRange<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedPatternOptions, ReturnMasked extends MaskedPattern=MaskedPattern<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedDynamicOptions, ReturnMasked extends MaskedDynamic=MaskedDynamic<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<RegExp>, ReturnMasked extends MaskedRegExp=MaskedRegExp<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<Function>, ReturnMasked extends MaskedFunction=MaskedFunction<Opts['parent']>> (opts: Opts): ReturnMasked;\n\n/** Creates new {@link Masked} depending on mask type */\nfunction createMask(opts) {\n  if (IMask.Masked && opts instanceof IMask.Masked) return opts;\n  const nOpts = normalizeOpts(opts);\n  const MaskedClass = maskedClass(nOpts.mask);\n  if (!MaskedClass) throw new Error(\"Masked class is not found for provided mask \" + nOpts.mask + \", appropriate module needs to be imported manually before creating mask.\");\n  if (nOpts.mask === MaskedClass) delete nOpts.mask;\n  if (nOpts._mask) {\n    nOpts.mask = nOpts._mask;\n    delete nOpts._mask;\n  }\n  return new MaskedClass(nOpts);\n}\nIMask.createMask = createMask;\n\nexport { createMask as default, maskedClass, normalizeOpts };\n","import IMask from '../core/holder.js';\n\n/**  Generic element API to use with mask */\nclass MaskElement {\n  /** */\n\n  /** */\n\n  /** */\n\n  /** Safely returns selection start */\n  get selectionStart() {\n    let start;\n    try {\n      start = this._unsafeSelectionStart;\n    } catch {}\n    return start != null ? start : this.value.length;\n  }\n\n  /** Safely returns selection end */\n  get selectionEnd() {\n    let end;\n    try {\n      end = this._unsafeSelectionEnd;\n    } catch {}\n    return end != null ? end : this.value.length;\n  }\n\n  /** Safely sets element selection */\n  select(start, end) {\n    if (start == null || end == null || start === this.selectionStart && end === this.selectionEnd) return;\n    try {\n      this._unsafeSelect(start, end);\n    } catch {}\n  }\n\n  /** */\n  get isActive() {\n    return false;\n  }\n  /** */\n\n  /** */\n\n  /** */\n}\nIMask.MaskElement = MaskElement;\n\nexport { MaskElement as default };\n","import MaskElement from './mask-element.js';\nimport IMask from '../core/holder.js';\n\nconst KEY_Z = 90;\nconst KEY_Y = 89;\n\n/** Bridge between HTMLElement and {@link Masked} */\nclass HTMLMaskElement extends MaskElement {\n  /** HTMLElement to use mask on */\n\n  constructor(input) {\n    super();\n    this.input = input;\n    this._onKeydown = this._onKeydown.bind(this);\n    this._onInput = this._onInput.bind(this);\n    this._onBeforeinput = this._onBeforeinput.bind(this);\n    this._onCompositionEnd = this._onCompositionEnd.bind(this);\n  }\n  get rootElement() {\n    var _this$input$getRootNo, _this$input$getRootNo2, _this$input;\n    return (_this$input$getRootNo = (_this$input$getRootNo2 = (_this$input = this.input).getRootNode) == null ? void 0 : _this$input$getRootNo2.call(_this$input)) != null ? _this$input$getRootNo : document;\n  }\n\n  /** Is element in focus */\n  get isActive() {\n    return this.input === this.rootElement.activeElement;\n  }\n\n  /** Binds HTMLElement events to mask internal events */\n  bindEvents(handlers) {\n    this.input.addEventListener('keydown', this._onKeydown);\n    this.input.addEventListener('input', this._onInput);\n    this.input.addEventListener('beforeinput', this._onBeforeinput);\n    this.input.addEventListener('compositionend', this._onCompositionEnd);\n    this.input.addEventListener('drop', handlers.drop);\n    this.input.addEventListener('click', handlers.click);\n    this.input.addEventListener('focus', handlers.focus);\n    this.input.addEventListener('blur', handlers.commit);\n    this._handlers = handlers;\n  }\n  _onKeydown(e) {\n    if (this._handlers.redo && (e.keyCode === KEY_Z && e.shiftKey && (e.metaKey || e.ctrlKey) || e.keyCode === KEY_Y && e.ctrlKey)) {\n      e.preventDefault();\n      return this._handlers.redo(e);\n    }\n    if (this._handlers.undo && e.keyCode === KEY_Z && (e.metaKey || e.ctrlKey)) {\n      e.preventDefault();\n      return this._handlers.undo(e);\n    }\n    if (!e.isComposing) this._handlers.selectionChange(e);\n  }\n  _onBeforeinput(e) {\n    if (e.inputType === 'historyUndo' && this._handlers.undo) {\n      e.preventDefault();\n      return this._handlers.undo(e);\n    }\n    if (e.inputType === 'historyRedo' && this._handlers.redo) {\n      e.preventDefault();\n      return this._handlers.redo(e);\n    }\n  }\n  _onCompositionEnd(e) {\n    this._handlers.input(e);\n  }\n  _onInput(e) {\n    if (!e.isComposing) this._handlers.input(e);\n  }\n\n  /** Unbinds HTMLElement events to mask internal events */\n  unbindEvents() {\n    this.input.removeEventListener('keydown', this._onKeydown);\n    this.input.removeEventListener('input', this._onInput);\n    this.input.removeEventListener('beforeinput', this._onBeforeinput);\n    this.input.removeEventListener('compositionend', this._onCompositionEnd);\n    this.input.removeEventListener('drop', this._handlers.drop);\n    this.input.removeEventListener('click', this._handlers.click);\n    this.input.removeEventListener('focus', this._handlers.focus);\n    this.input.removeEventListener('blur', this._handlers.commit);\n    this._handlers = {};\n  }\n}\nIMask.HTMLMaskElement = HTMLMaskElement;\n\nexport { HTMLMaskElement as default };\n","import HTMLMaskElement from './html-mask-element.js';\nimport IMask from '../core/holder.js';\nimport './mask-element.js';\n\n/** Bridge between InputElement and {@link Masked} */\nclass HTMLInputMaskElement extends HTMLMaskElement {\n  /** InputElement to use mask on */\n\n  constructor(input) {\n    super(input);\n    this.input = input;\n  }\n\n  /** Returns InputElement selection start */\n  get _unsafeSelectionStart() {\n    return this.input.selectionStart != null ? this.input.selectionStart : this.value.length;\n  }\n\n  /** Returns InputElement selection end */\n  get _unsafeSelectionEnd() {\n    return this.input.selectionEnd;\n  }\n\n  /** Sets InputElement selection */\n  _unsafeSelect(start, end) {\n    this.input.setSelectionRange(start, end);\n  }\n  get value() {\n    return this.input.value;\n  }\n  set value(value) {\n    this.input.value = value;\n  }\n}\nIMask.HTMLMaskElement = HTMLMaskElement;\n\nexport { HTMLInputMaskElement as default };\n","import HTMLMaskElement from './html-mask-element.js';\nimport IMask from '../core/holder.js';\nimport './mask-element.js';\n\nclass HTMLContenteditableMaskElement extends HTMLMaskElement {\n  /** Returns HTMLElement selection start */\n  get _unsafeSelectionStart() {\n    const root = this.rootElement;\n    const selection = root.getSelection && root.getSelection();\n    const anchorOffset = selection && selection.anchorOffset;\n    const focusOffset = selection && selection.focusOffset;\n    if (focusOffset == null || anchorOffset == null || anchorOffset < focusOffset) {\n      return anchorOffset;\n    }\n    return focusOffset;\n  }\n\n  /** Returns HTMLElement selection end */\n  get _unsafeSelectionEnd() {\n    const root = this.rootElement;\n    const selection = root.getSelection && root.getSelection();\n    const anchorOffset = selection && selection.anchorOffset;\n    const focusOffset = selection && selection.focusOffset;\n    if (focusOffset == null || anchorOffset == null || anchorOffset > focusOffset) {\n      return anchorOffset;\n    }\n    return focusOffset;\n  }\n\n  /** Sets HTMLElement selection */\n  _unsafeSelect(start, end) {\n    if (!this.rootElement.createRange) return;\n    const range = this.rootElement.createRange();\n    range.setStart(this.input.firstChild || this.input, start);\n    range.setEnd(this.input.lastChild || this.input, end);\n    const root = this.rootElement;\n    const selection = root.getSelection && root.getSelection();\n    if (selection) {\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n  }\n\n  /** HTMLElement value */\n  get value() {\n    return this.input.textContent || '';\n  }\n  set value(value) {\n    this.input.textContent = value;\n  }\n}\nIMask.HTMLContenteditableMaskElement = HTMLContenteditableMaskElement;\n\nexport { HTMLContenteditableMaskElement as default };\n","class InputHistory {\n  constructor() {\n    this.states = [];\n    this.currentIndex = 0;\n  }\n  get currentState() {\n    return this.states[this.currentIndex];\n  }\n  get isEmpty() {\n    return this.states.length === 0;\n  }\n  push(state) {\n    // if current index points before the last element then remove the future\n    if (this.currentIndex < this.states.length - 1) this.states.length = this.currentIndex + 1;\n    this.states.push(state);\n    if (this.states.length > InputHistory.MAX_LENGTH) this.states.shift();\n    this.currentIndex = this.states.length - 1;\n  }\n  go(steps) {\n    this.currentIndex = Math.min(Math.max(this.currentIndex + steps, 0), this.states.length - 1);\n    return this.currentState;\n  }\n  undo() {\n    return this.go(-1);\n  }\n  redo() {\n    return this.go(+1);\n  }\n  clear() {\n    this.states.length = 0;\n    this.currentIndex = 0;\n  }\n}\nInputHistory.MAX_LENGTH = 100;\n\nexport { InputHistory as default };\n","import { DIRECTION } from '../core/utils.js';\nimport ActionDetails from '../core/action-details.js';\nimport createMask, { maskedClass } from '../masked/factory.js';\nimport MaskElement from './mask-element.js';\nimport HTMLInputMaskElement from './html-input-mask-element.js';\nimport HTMLContenteditableMaskElement from './html-contenteditable-mask-element.js';\nimport IMask from '../core/holder.js';\nimport InputHistory from './input-history.js';\nimport './html-mask-element.js';\n\n/** Listens to element events and controls changes between element and {@link Masked} */\nclass InputMask {\n  /**\n    View element\n  */\n\n  /** Internal {@link Masked} model */\n\n  constructor(el, opts) {\n    this.el = el instanceof MaskElement ? el : el.isContentEditable && el.tagName !== 'INPUT' && el.tagName !== 'TEXTAREA' ? new HTMLContenteditableMaskElement(el) : new HTMLInputMaskElement(el);\n    this.masked = createMask(opts);\n    this._listeners = {};\n    this._value = '';\n    this._unmaskedValue = '';\n    this._rawInputValue = '';\n    this.history = new InputHistory();\n    this._saveSelection = this._saveSelection.bind(this);\n    this._onInput = this._onInput.bind(this);\n    this._onChange = this._onChange.bind(this);\n    this._onDrop = this._onDrop.bind(this);\n    this._onFocus = this._onFocus.bind(this);\n    this._onClick = this._onClick.bind(this);\n    this._onUndo = this._onUndo.bind(this);\n    this._onRedo = this._onRedo.bind(this);\n    this.alignCursor = this.alignCursor.bind(this);\n    this.alignCursorFriendly = this.alignCursorFriendly.bind(this);\n    this._bindEvents();\n\n    // refresh\n    this.updateValue();\n    this._onChange();\n  }\n  maskEquals(mask) {\n    var _this$masked;\n    return mask == null || ((_this$masked = this.masked) == null ? void 0 : _this$masked.maskEquals(mask));\n  }\n\n  /** Masked */\n  get mask() {\n    return this.masked.mask;\n  }\n  set mask(mask) {\n    if (this.maskEquals(mask)) return;\n    if (!(mask instanceof IMask.Masked) && this.masked.constructor === maskedClass(mask)) {\n      // TODO \"any\" no idea\n      this.masked.updateOptions({\n        mask\n      });\n      return;\n    }\n    const masked = mask instanceof IMask.Masked ? mask : createMask({\n      mask\n    });\n    masked.unmaskedValue = this.masked.unmaskedValue;\n    this.masked = masked;\n  }\n\n  /** Raw value */\n  get value() {\n    return this._value;\n  }\n  set value(str) {\n    if (this.value === str) return;\n    this.masked.value = str;\n    this.updateControl('auto');\n  }\n\n  /** Unmasked value */\n  get unmaskedValue() {\n    return this._unmaskedValue;\n  }\n  set unmaskedValue(str) {\n    if (this.unmaskedValue === str) return;\n    this.masked.unmaskedValue = str;\n    this.updateControl('auto');\n  }\n\n  /** Raw input value */\n  get rawInputValue() {\n    return this._rawInputValue;\n  }\n  set rawInputValue(str) {\n    if (this.rawInputValue === str) return;\n    this.masked.rawInputValue = str;\n    this.updateControl();\n    this.alignCursor();\n  }\n\n  /** Typed unmasked value */\n  get typedValue() {\n    return this.masked.typedValue;\n  }\n  set typedValue(val) {\n    if (this.masked.typedValueEquals(val)) return;\n    this.masked.typedValue = val;\n    this.updateControl('auto');\n  }\n\n  /** Display value */\n  get displayValue() {\n    return this.masked.displayValue;\n  }\n\n  /** Starts listening to element events */\n  _bindEvents() {\n    this.el.bindEvents({\n      selectionChange: this._saveSelection,\n      input: this._onInput,\n      drop: this._onDrop,\n      click: this._onClick,\n      focus: this._onFocus,\n      commit: this._onChange,\n      undo: this._onUndo,\n      redo: this._onRedo\n    });\n  }\n\n  /** Stops listening to element events */\n  _unbindEvents() {\n    if (this.el) this.el.unbindEvents();\n  }\n\n  /** Fires custom event */\n  _fireEvent(ev, e) {\n    const listeners = this._listeners[ev];\n    if (!listeners) return;\n    listeners.forEach(l => l(e));\n  }\n\n  /** Current selection start */\n  get selectionStart() {\n    return this._cursorChanging ? this._changingCursorPos : this.el.selectionStart;\n  }\n\n  /** Current cursor position */\n  get cursorPos() {\n    return this._cursorChanging ? this._changingCursorPos : this.el.selectionEnd;\n  }\n  set cursorPos(pos) {\n    if (!this.el || !this.el.isActive) return;\n    this.el.select(pos, pos);\n    this._saveSelection();\n  }\n\n  /** Stores current selection */\n  _saveSelection( /* ev */\n  ) {\n    if (this.displayValue !== this.el.value) {\n      console.warn('Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly.'); // eslint-disable-line no-console\n    }\n    this._selection = {\n      start: this.selectionStart,\n      end: this.cursorPos\n    };\n  }\n\n  /** Syncronizes model value from view */\n  updateValue() {\n    this.masked.value = this.el.value;\n    this._value = this.masked.value;\n    this._unmaskedValue = this.masked.unmaskedValue;\n    this._rawInputValue = this.masked.rawInputValue;\n  }\n\n  /** Syncronizes view from model value, fires change events */\n  updateControl(cursorPos) {\n    const newUnmaskedValue = this.masked.unmaskedValue;\n    const newValue = this.masked.value;\n    const newRawInputValue = this.masked.rawInputValue;\n    const newDisplayValue = this.displayValue;\n    const isChanged = this.unmaskedValue !== newUnmaskedValue || this.value !== newValue || this._rawInputValue !== newRawInputValue;\n    this._unmaskedValue = newUnmaskedValue;\n    this._value = newValue;\n    this._rawInputValue = newRawInputValue;\n    if (this.el.value !== newDisplayValue) this.el.value = newDisplayValue;\n    if (cursorPos === 'auto') this.alignCursor();else if (cursorPos != null) this.cursorPos = cursorPos;\n    if (isChanged) this._fireChangeEvents();\n    if (!this._historyChanging && (isChanged || this.history.isEmpty)) this.history.push({\n      unmaskedValue: newUnmaskedValue,\n      selection: {\n        start: this.selectionStart,\n        end: this.cursorPos\n      }\n    });\n  }\n\n  /** Updates options with deep equal check, recreates {@link Masked} model if mask type changes */\n  updateOptions(opts) {\n    const {\n      mask,\n      ...restOpts\n    } = opts; // TODO types, yes, mask is optional\n\n    const updateMask = !this.maskEquals(mask);\n    const updateOpts = this.masked.optionsIsChanged(restOpts);\n    if (updateMask) this.mask = mask;\n    if (updateOpts) this.masked.updateOptions(restOpts); // TODO\n\n    if (updateMask || updateOpts) this.updateControl();\n  }\n\n  /** Updates cursor */\n  updateCursor(cursorPos) {\n    if (cursorPos == null) return;\n    this.cursorPos = cursorPos;\n\n    // also queue change cursor for mobile browsers\n    this._delayUpdateCursor(cursorPos);\n  }\n\n  /** Delays cursor update to support mobile browsers */\n  _delayUpdateCursor(cursorPos) {\n    this._abortUpdateCursor();\n    this._changingCursorPos = cursorPos;\n    this._cursorChanging = setTimeout(() => {\n      if (!this.el) return; // if was destroyed\n      this.cursorPos = this._changingCursorPos;\n      this._abortUpdateCursor();\n    }, 10);\n  }\n\n  /** Fires custom events */\n  _fireChangeEvents() {\n    this._fireEvent('accept', this._inputEvent);\n    if (this.masked.isComplete) this._fireEvent('complete', this._inputEvent);\n  }\n\n  /** Aborts delayed cursor update */\n  _abortUpdateCursor() {\n    if (this._cursorChanging) {\n      clearTimeout(this._cursorChanging);\n      delete this._cursorChanging;\n    }\n  }\n\n  /** Aligns cursor to nearest available position */\n  alignCursor() {\n    this.cursorPos = this.masked.nearestInputPos(this.masked.nearestInputPos(this.cursorPos, DIRECTION.LEFT));\n  }\n\n  /** Aligns cursor only if selection is empty */\n  alignCursorFriendly() {\n    if (this.selectionStart !== this.cursorPos) return; // skip if range is selected\n    this.alignCursor();\n  }\n\n  /** Adds listener on custom event */\n  on(ev, handler) {\n    if (!this._listeners[ev]) this._listeners[ev] = [];\n    this._listeners[ev].push(handler);\n    return this;\n  }\n\n  /** Removes custom event listener */\n  off(ev, handler) {\n    if (!this._listeners[ev]) return this;\n    if (!handler) {\n      delete this._listeners[ev];\n      return this;\n    }\n    const hIndex = this._listeners[ev].indexOf(handler);\n    if (hIndex >= 0) this._listeners[ev].splice(hIndex, 1);\n    return this;\n  }\n\n  /** Handles view input event */\n  _onInput(e) {\n    this._inputEvent = e;\n    this._abortUpdateCursor();\n    const details = new ActionDetails({\n      // new state\n      value: this.el.value,\n      cursorPos: this.cursorPos,\n      // old state\n      oldValue: this.displayValue,\n      oldSelection: this._selection\n    });\n    const oldRawValue = this.masked.rawInputValue;\n    const offset = this.masked.splice(details.startChangePos, details.removed.length, details.inserted, details.removeDirection, {\n      input: true,\n      raw: true\n    }).offset;\n\n    // force align in remove direction only if no input chars were removed\n    // otherwise we still need to align with NONE (to get out from fixed symbols for instance)\n    const removeDirection = oldRawValue === this.masked.rawInputValue ? details.removeDirection : DIRECTION.NONE;\n    let cursorPos = this.masked.nearestInputPos(details.startChangePos + offset, removeDirection);\n    if (removeDirection !== DIRECTION.NONE) cursorPos = this.masked.nearestInputPos(cursorPos, DIRECTION.NONE);\n    this.updateControl(cursorPos);\n    delete this._inputEvent;\n  }\n\n  /** Handles view change event and commits model value */\n  _onChange() {\n    if (this.displayValue !== this.el.value) this.updateValue();\n    this.masked.doCommit();\n    this.updateControl();\n    this._saveSelection();\n  }\n\n  /** Handles view drop event, prevents by default */\n  _onDrop(ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n  }\n\n  /** Restore last selection on focus */\n  _onFocus(ev) {\n    this.alignCursorFriendly();\n  }\n\n  /** Restore last selection on focus */\n  _onClick(ev) {\n    this.alignCursorFriendly();\n  }\n  _onUndo() {\n    this._applyHistoryState(this.history.undo());\n  }\n  _onRedo() {\n    this._applyHistoryState(this.history.redo());\n  }\n  _applyHistoryState(state) {\n    if (!state) return;\n    this._historyChanging = true;\n    this.unmaskedValue = state.unmaskedValue;\n    this.el.select(state.selection.start, state.selection.end);\n    this._saveSelection();\n    this._historyChanging = false;\n  }\n\n  /** Unbind view events and removes element reference */\n  destroy() {\n    this._unbindEvents();\n    this._listeners.length = 0;\n    delete this.el;\n  }\n}\nIMask.InputMask = InputMask;\n\nexport { InputMask as default };\n","import IMask from './holder.js';\n\n/** Provides details of changing model value */\nclass ChangeDetails {\n  /** Inserted symbols */\n\n  /** Additional offset if any changes occurred before tail */\n\n  /** Raw inserted is used by dynamic mask */\n\n  /** Can skip chars */\n\n  static normalize(prep) {\n    return Array.isArray(prep) ? prep : [prep, new ChangeDetails()];\n  }\n  constructor(details) {\n    Object.assign(this, {\n      inserted: '',\n      rawInserted: '',\n      tailShift: 0,\n      skip: false\n    }, details);\n  }\n\n  /** Aggregate changes */\n  aggregate(details) {\n    this.inserted += details.inserted;\n    this.rawInserted += details.rawInserted;\n    this.tailShift += details.tailShift;\n    this.skip = this.skip || details.skip;\n    return this;\n  }\n\n  /** Total offset considering all changes */\n  get offset() {\n    return this.tailShift + this.inserted.length;\n  }\n  get consumed() {\n    return Boolean(this.rawInserted) || this.skip;\n  }\n  equals(details) {\n    return this.inserted === details.inserted && this.tailShift === details.tailShift && this.rawInserted === details.rawInserted && this.skip === details.skip;\n  }\n}\nIMask.ChangeDetails = ChangeDetails;\n\nexport { ChangeDetails as default };\n","/** Provides details of continuous extracted tail */\nclass ContinuousTailDetails {\n  /** Tail value as string */\n\n  /** Tail start position */\n\n  /** Start position */\n\n  constructor(value, from, stop) {\n    if (value === void 0) {\n      value = '';\n    }\n    if (from === void 0) {\n      from = 0;\n    }\n    this.value = value;\n    this.from = from;\n    this.stop = stop;\n  }\n  toString() {\n    return this.value;\n  }\n  extend(tail) {\n    this.value += String(tail);\n  }\n  appendTo(masked) {\n    return masked.append(this.toString(), {\n      tail: true\n    }).aggregate(masked._appendPlaceholder());\n  }\n  get state() {\n    return {\n      value: this.value,\n      from: this.from,\n      stop: this.stop\n    };\n  }\n  set state(state) {\n    Object.assign(this, state);\n  }\n  unshift(beforePos) {\n    if (!this.value.length || beforePos != null && this.from >= beforePos) return '';\n    const shiftChar = this.value[0];\n    this.value = this.value.slice(1);\n    return shiftChar;\n  }\n  shift() {\n    if (!this.value.length) return '';\n    const shiftChar = this.value[this.value.length - 1];\n    this.value = this.value.slice(0, -1);\n    return shiftChar;\n  }\n}\n\nexport { ContinuousTailDetails as default };\n","import ChangeDetails from '../core/change-details.js';\nimport ContinuousTailDetails from '../core/continuous-tail-details.js';\nimport { isString, DIRECTION, objectIncludes, forceDirection } from '../core/utils.js';\nimport IMask from '../core/holder.js';\n\n/** Append flags */\n\n/** Extract flags */\n\n// see https://github.com/microsoft/TypeScript/issues/6223\n\n/** Provides common masking stuff */\nclass Masked {\n  /** */\n\n  /** */\n\n  /** Transforms value before mask processing */\n\n  /** Transforms each char before mask processing */\n\n  /** Validates if value is acceptable */\n\n  /** Does additional processing at the end of editing */\n\n  /** Format typed value to string */\n\n  /** Parse string to get typed value */\n\n  /** Enable characters overwriting */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  constructor(opts) {\n    this._value = '';\n    this._update({\n      ...Masked.DEFAULTS,\n      ...opts\n    });\n    this._initialized = true;\n  }\n\n  /** Sets and applies new options */\n  updateOptions(opts) {\n    if (!this.optionsIsChanged(opts)) return;\n    this.withValueRefresh(this._update.bind(this, opts));\n  }\n\n  /** Sets new options */\n  _update(opts) {\n    Object.assign(this, opts);\n  }\n\n  /** Mask state */\n  get state() {\n    return {\n      _value: this.value,\n      _rawInputValue: this.rawInputValue\n    };\n  }\n  set state(state) {\n    this._value = state._value;\n  }\n\n  /** Resets value */\n  reset() {\n    this._value = '';\n  }\n  get value() {\n    return this._value;\n  }\n  set value(value) {\n    this.resolve(value, {\n      input: true\n    });\n  }\n\n  /** Resolve new value */\n  resolve(value, flags) {\n    if (flags === void 0) {\n      flags = {\n        input: true\n      };\n    }\n    this.reset();\n    this.append(value, flags, '');\n    this.doCommit();\n  }\n  get unmaskedValue() {\n    return this.value;\n  }\n  set unmaskedValue(value) {\n    this.resolve(value, {});\n  }\n  get typedValue() {\n    return this.parse ? this.parse(this.value, this) : this.unmaskedValue;\n  }\n  set typedValue(value) {\n    if (this.format) {\n      this.value = this.format(value, this);\n    } else {\n      this.unmaskedValue = String(value);\n    }\n  }\n\n  /** Value that includes raw user input */\n  get rawInputValue() {\n    return this.extractInput(0, this.displayValue.length, {\n      raw: true\n    });\n  }\n  set rawInputValue(value) {\n    this.resolve(value, {\n      raw: true\n    });\n  }\n  get displayValue() {\n    return this.value;\n  }\n  get isComplete() {\n    return true;\n  }\n  get isFilled() {\n    return this.isComplete;\n  }\n\n  /** Finds nearest input position in direction */\n  nearestInputPos(cursorPos, direction) {\n    return cursorPos;\n  }\n  totalInputPositions(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    return Math.min(this.displayValue.length, toPos - fromPos);\n  }\n\n  /** Extracts value in range considering flags */\n  extractInput(fromPos, toPos, flags) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    return this.displayValue.slice(fromPos, toPos);\n  }\n\n  /** Extracts tail in range */\n  extractTail(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    return new ContinuousTailDetails(this.extractInput(fromPos, toPos), fromPos);\n  }\n\n  /** Appends tail */\n  appendTail(tail) {\n    if (isString(tail)) tail = new ContinuousTailDetails(String(tail));\n    return tail.appendTo(this);\n  }\n\n  /** Appends char */\n  _appendCharRaw(ch, flags) {\n    if (!ch) return new ChangeDetails();\n    this._value += ch;\n    return new ChangeDetails({\n      inserted: ch,\n      rawInserted: ch\n    });\n  }\n\n  /** Appends char */\n  _appendChar(ch, flags, checkTail) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const consistentState = this.state;\n    let details;\n    [ch, details] = this.doPrepareChar(ch, flags);\n    if (ch) {\n      details = details.aggregate(this._appendCharRaw(ch, flags));\n\n      // TODO handle `skip`?\n\n      // try `autofix` lookahead\n      if (!details.rawInserted && this.autofix === 'pad') {\n        const noFixState = this.state;\n        this.state = consistentState;\n        let fixDetails = this.pad(flags);\n        const chDetails = this._appendCharRaw(ch, flags);\n        fixDetails = fixDetails.aggregate(chDetails);\n\n        // if fix was applied or\n        // if details are equal use skip restoring state optimization\n        if (chDetails.rawInserted || fixDetails.equals(details)) {\n          details = fixDetails;\n        } else {\n          this.state = noFixState;\n        }\n      }\n    }\n    if (details.inserted) {\n      let consistentTail;\n      let appended = this.doValidate(flags) !== false;\n      if (appended && checkTail != null) {\n        // validation ok, check tail\n        const beforeTailState = this.state;\n        if (this.overwrite === true) {\n          consistentTail = checkTail.state;\n          for (let i = 0; i < details.rawInserted.length; ++i) {\n            checkTail.unshift(this.displayValue.length - details.tailShift);\n          }\n        }\n        let tailDetails = this.appendTail(checkTail);\n        appended = tailDetails.rawInserted.length === checkTail.toString().length;\n\n        // not ok, try shift\n        if (!(appended && tailDetails.inserted) && this.overwrite === 'shift') {\n          this.state = beforeTailState;\n          consistentTail = checkTail.state;\n          for (let i = 0; i < details.rawInserted.length; ++i) {\n            checkTail.shift();\n          }\n          tailDetails = this.appendTail(checkTail);\n          appended = tailDetails.rawInserted.length === checkTail.toString().length;\n        }\n\n        // if ok, rollback state after tail\n        if (appended && tailDetails.inserted) this.state = beforeTailState;\n      }\n\n      // revert all if something went wrong\n      if (!appended) {\n        details = new ChangeDetails();\n        this.state = consistentState;\n        if (checkTail && consistentTail) checkTail.state = consistentTail;\n      }\n    }\n    return details;\n  }\n\n  /** Appends optional placeholder at the end */\n  _appendPlaceholder() {\n    return new ChangeDetails();\n  }\n\n  /** Appends optional eager placeholder at the end */\n  _appendEager() {\n    return new ChangeDetails();\n  }\n\n  /** Appends symbols considering flags */\n  append(str, flags, tail) {\n    if (!isString(str)) throw new Error('value should be string');\n    const checkTail = isString(tail) ? new ContinuousTailDetails(String(tail)) : tail;\n    if (flags != null && flags.tail) flags._beforeTailState = this.state;\n    let details;\n    [str, details] = this.doPrepare(str, flags);\n    for (let ci = 0; ci < str.length; ++ci) {\n      const d = this._appendChar(str[ci], flags, checkTail);\n      if (!d.rawInserted && !this.doSkipInvalid(str[ci], flags, checkTail)) break;\n      details.aggregate(d);\n    }\n    if ((this.eager === true || this.eager === 'append') && flags != null && flags.input && str) {\n      details.aggregate(this._appendEager());\n    }\n\n    // append tail but aggregate only tailShift\n    if (checkTail != null) {\n      details.tailShift += this.appendTail(checkTail).tailShift;\n      // TODO it's a good idea to clear state after appending ends\n      // but it causes bugs when one append calls another (when dynamic dispatch set rawInputValue)\n      // this._resetBeforeTailState();\n    }\n    return details;\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    this._value = this.displayValue.slice(0, fromPos) + this.displayValue.slice(toPos);\n    return new ChangeDetails();\n  }\n\n  /** Calls function and reapplies current value */\n  withValueRefresh(fn) {\n    if (this._refreshing || !this._initialized) return fn();\n    this._refreshing = true;\n    const rawInput = this.rawInputValue;\n    const value = this.value;\n    const ret = fn();\n    this.rawInputValue = rawInput;\n    // append lost trailing chars at the end\n    if (this.value && this.value !== value && value.indexOf(this.value) === 0) {\n      this.append(value.slice(this.displayValue.length), {}, '');\n      this.doCommit();\n    }\n    delete this._refreshing;\n    return ret;\n  }\n  runIsolated(fn) {\n    if (this._isolated || !this._initialized) return fn(this);\n    this._isolated = true;\n    const state = this.state;\n    const ret = fn(this);\n    this.state = state;\n    delete this._isolated;\n    return ret;\n  }\n  doSkipInvalid(ch, flags, checkTail) {\n    return Boolean(this.skipInvalid);\n  }\n\n  /** Prepares string before mask processing */\n  doPrepare(str, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    return ChangeDetails.normalize(this.prepare ? this.prepare(str, this, flags) : str);\n  }\n\n  /** Prepares each char before mask processing */\n  doPrepareChar(str, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    return ChangeDetails.normalize(this.prepareChar ? this.prepareChar(str, this, flags) : str);\n  }\n\n  /** Validates if value is acceptable */\n  doValidate(flags) {\n    return (!this.validate || this.validate(this.value, this, flags)) && (!this.parent || this.parent.doValidate(flags));\n  }\n\n  /** Does additional processing at the end of editing */\n  doCommit() {\n    if (this.commit) this.commit(this.value, this);\n  }\n  splice(start, deleteCount, inserted, removeDirection, flags) {\n    if (inserted === void 0) {\n      inserted = '';\n    }\n    if (removeDirection === void 0) {\n      removeDirection = DIRECTION.NONE;\n    }\n    if (flags === void 0) {\n      flags = {\n        input: true\n      };\n    }\n    const tailPos = start + deleteCount;\n    const tail = this.extractTail(tailPos);\n    const eagerRemove = this.eager === true || this.eager === 'remove';\n    let oldRawValue;\n    if (eagerRemove) {\n      removeDirection = forceDirection(removeDirection);\n      oldRawValue = this.extractInput(0, tailPos, {\n        raw: true\n      });\n    }\n    let startChangePos = start;\n    const details = new ChangeDetails();\n\n    // if it is just deletion without insertion\n    if (removeDirection !== DIRECTION.NONE) {\n      startChangePos = this.nearestInputPos(start, deleteCount > 1 && start !== 0 && !eagerRemove ? DIRECTION.NONE : removeDirection);\n\n      // adjust tailShift if start was aligned\n      details.tailShift = startChangePos - start;\n    }\n    details.aggregate(this.remove(startChangePos));\n    if (eagerRemove && removeDirection !== DIRECTION.NONE && oldRawValue === this.rawInputValue) {\n      if (removeDirection === DIRECTION.FORCE_LEFT) {\n        let valLength;\n        while (oldRawValue === this.rawInputValue && (valLength = this.displayValue.length)) {\n          details.aggregate(new ChangeDetails({\n            tailShift: -1\n          })).aggregate(this.remove(valLength - 1));\n        }\n      } else if (removeDirection === DIRECTION.FORCE_RIGHT) {\n        tail.unshift();\n      }\n    }\n    return details.aggregate(this.append(inserted, flags, tail));\n  }\n  maskEquals(mask) {\n    return this.mask === mask;\n  }\n  optionsIsChanged(opts) {\n    return !objectIncludes(this, opts);\n  }\n  typedValueEquals(value) {\n    const tval = this.typedValue;\n    return value === tval || Masked.EMPTY_VALUES.includes(value) && Masked.EMPTY_VALUES.includes(tval) || (this.format ? this.format(value, this) === this.format(this.typedValue, this) : false);\n  }\n  pad(flags) {\n    return new ChangeDetails();\n  }\n}\nMasked.DEFAULTS = {\n  skipInvalid: true\n};\nMasked.EMPTY_VALUES = [undefined, null, ''];\nIMask.Masked = Masked;\n\nexport { Masked as default };\n","import ChangeDetails from '../../core/change-details.js';\nimport { isString } from '../../core/utils.js';\nimport ContinuousTailDetails from '../../core/continuous-tail-details.js';\nimport IMask from '../../core/holder.js';\n\nclass ChunksTailDetails {\n  /** */\n\n  constructor(chunks, from) {\n    if (chunks === void 0) {\n      chunks = [];\n    }\n    if (from === void 0) {\n      from = 0;\n    }\n    this.chunks = chunks;\n    this.from = from;\n  }\n  toString() {\n    return this.chunks.map(String).join('');\n  }\n  extend(tailChunk) {\n    if (!String(tailChunk)) return;\n    tailChunk = isString(tailChunk) ? new ContinuousTailDetails(String(tailChunk)) : tailChunk;\n    const lastChunk = this.chunks[this.chunks.length - 1];\n    const extendLast = lastChunk && (\n    // if stops are same or tail has no stop\n    lastChunk.stop === tailChunk.stop || tailChunk.stop == null) &&\n    // if tail chunk goes just after last chunk\n    tailChunk.from === lastChunk.from + lastChunk.toString().length;\n    if (tailChunk instanceof ContinuousTailDetails) {\n      // check the ability to extend previous chunk\n      if (extendLast) {\n        // extend previous chunk\n        lastChunk.extend(tailChunk.toString());\n      } else {\n        // append new chunk\n        this.chunks.push(tailChunk);\n      }\n    } else if (tailChunk instanceof ChunksTailDetails) {\n      if (tailChunk.stop == null) {\n        // unwrap floating chunks to parent, keeping `from` pos\n        let firstTailChunk;\n        while (tailChunk.chunks.length && tailChunk.chunks[0].stop == null) {\n          firstTailChunk = tailChunk.chunks.shift(); // not possible to be `undefined` because length was checked above\n          firstTailChunk.from += tailChunk.from;\n          this.extend(firstTailChunk);\n        }\n      }\n\n      // if tail chunk still has value\n      if (tailChunk.toString()) {\n        // if chunks contains stops, then popup stop to container\n        tailChunk.stop = tailChunk.blockIndex;\n        this.chunks.push(tailChunk);\n      }\n    }\n  }\n  appendTo(masked) {\n    if (!(masked instanceof IMask.MaskedPattern)) {\n      const tail = new ContinuousTailDetails(this.toString());\n      return tail.appendTo(masked);\n    }\n    const details = new ChangeDetails();\n    for (let ci = 0; ci < this.chunks.length; ++ci) {\n      const chunk = this.chunks[ci];\n      const lastBlockIter = masked._mapPosToBlock(masked.displayValue.length);\n      const stop = chunk.stop;\n      let chunkBlock;\n      if (stop != null && (\n      // if block not found or stop is behind lastBlock\n      !lastBlockIter || lastBlockIter.index <= stop)) {\n        if (chunk instanceof ChunksTailDetails ||\n        // for continuous block also check if stop is exist\n        masked._stops.indexOf(stop) >= 0) {\n          details.aggregate(masked._appendPlaceholder(stop));\n        }\n        chunkBlock = chunk instanceof ChunksTailDetails && masked._blocks[stop];\n      }\n      if (chunkBlock) {\n        const tailDetails = chunkBlock.appendTail(chunk);\n        details.aggregate(tailDetails);\n\n        // get not inserted chars\n        const remainChars = chunk.toString().slice(tailDetails.rawInserted.length);\n        if (remainChars) details.aggregate(masked.append(remainChars, {\n          tail: true\n        }));\n      } else {\n        details.aggregate(masked.append(chunk.toString(), {\n          tail: true\n        }));\n      }\n    }\n    return details;\n  }\n  get state() {\n    return {\n      chunks: this.chunks.map(c => c.state),\n      from: this.from,\n      stop: this.stop,\n      blockIndex: this.blockIndex\n    };\n  }\n  set state(state) {\n    const {\n      chunks,\n      ...props\n    } = state;\n    Object.assign(this, props);\n    this.chunks = chunks.map(cstate => {\n      const chunk = \"chunks\" in cstate ? new ChunksTailDetails() : new ContinuousTailDetails();\n      chunk.state = cstate;\n      return chunk;\n    });\n  }\n  unshift(beforePos) {\n    if (!this.chunks.length || beforePos != null && this.from >= beforePos) return '';\n    const chunkShiftPos = beforePos != null ? beforePos - this.from : beforePos;\n    let ci = 0;\n    while (ci < this.chunks.length) {\n      const chunk = this.chunks[ci];\n      const shiftChar = chunk.unshift(chunkShiftPos);\n      if (chunk.toString()) {\n        // chunk still contains value\n        // but not shifted - means no more available chars to shift\n        if (!shiftChar) break;\n        ++ci;\n      } else {\n        // clean if chunk has no value\n        this.chunks.splice(ci, 1);\n      }\n      if (shiftChar) return shiftChar;\n    }\n    return '';\n  }\n  shift() {\n    if (!this.chunks.length) return '';\n    let ci = this.chunks.length - 1;\n    while (0 <= ci) {\n      const chunk = this.chunks[ci];\n      const shiftChar = chunk.shift();\n      if (chunk.toString()) {\n        // chunk still contains value\n        // but not shifted - means no more available chars to shift\n        if (!shiftChar) break;\n        --ci;\n      } else {\n        // clean if chunk has no value\n        this.chunks.splice(ci, 1);\n      }\n      if (shiftChar) return shiftChar;\n    }\n    return '';\n  }\n}\n\nexport { ChunksTailDetails as default };\n","import { DIRECTION } from '../../core/utils.js';\n\nclass PatternCursor {\n  constructor(masked, pos) {\n    this.masked = masked;\n    this._log = [];\n    const {\n      offset,\n      index\n    } = masked._mapPosToBlock(pos) || (pos < 0 ?\n    // first\n    {\n      index: 0,\n      offset: 0\n    } :\n    // last\n    {\n      index: this.masked._blocks.length,\n      offset: 0\n    });\n    this.offset = offset;\n    this.index = index;\n    this.ok = false;\n  }\n  get block() {\n    return this.masked._blocks[this.index];\n  }\n  get pos() {\n    return this.masked._blockStartPos(this.index) + this.offset;\n  }\n  get state() {\n    return {\n      index: this.index,\n      offset: this.offset,\n      ok: this.ok\n    };\n  }\n  set state(s) {\n    Object.assign(this, s);\n  }\n  pushState() {\n    this._log.push(this.state);\n  }\n  popState() {\n    const s = this._log.pop();\n    if (s) this.state = s;\n    return s;\n  }\n  bindBlock() {\n    if (this.block) return;\n    if (this.index < 0) {\n      this.index = 0;\n      this.offset = 0;\n    }\n    if (this.index >= this.masked._blocks.length) {\n      this.index = this.masked._blocks.length - 1;\n      this.offset = this.block.displayValue.length; // TODO this is stupid type error, `block` depends on index that was changed above\n    }\n  }\n  _pushLeft(fn) {\n    this.pushState();\n    for (this.bindBlock(); 0 <= this.index; --this.index, this.offset = ((_this$block = this.block) == null ? void 0 : _this$block.displayValue.length) || 0) {\n      var _this$block;\n      if (fn()) return this.ok = true;\n    }\n    return this.ok = false;\n  }\n  _pushRight(fn) {\n    this.pushState();\n    for (this.bindBlock(); this.index < this.masked._blocks.length; ++this.index, this.offset = 0) {\n      if (fn()) return this.ok = true;\n    }\n    return this.ok = false;\n  }\n  pushLeftBeforeFilled() {\n    return this._pushLeft(() => {\n      if (this.block.isFixed || !this.block.value) return;\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.FORCE_LEFT);\n      if (this.offset !== 0) return true;\n    });\n  }\n  pushLeftBeforeInput() {\n    // cases:\n    // filled input: 00|\n    // optional empty input: 00[]|\n    // nested block: XX<[]>|\n    return this._pushLeft(() => {\n      if (this.block.isFixed) return;\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.LEFT);\n      return true;\n    });\n  }\n  pushLeftBeforeRequired() {\n    return this._pushLeft(() => {\n      if (this.block.isFixed || this.block.isOptional && !this.block.value) return;\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.LEFT);\n      return true;\n    });\n  }\n  pushRightBeforeFilled() {\n    return this._pushRight(() => {\n      if (this.block.isFixed || !this.block.value) return;\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.FORCE_RIGHT);\n      if (this.offset !== this.block.value.length) return true;\n    });\n  }\n  pushRightBeforeInput() {\n    return this._pushRight(() => {\n      if (this.block.isFixed) return;\n\n      // const o = this.offset;\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.NONE);\n      // HACK cases like (STILL DOES NOT WORK FOR NESTED)\n      // aa|X\n      // aa<X|[]>X_    - this will not work\n      // if (o && o === this.offset && this.block instanceof PatternInputDefinition) continue;\n      return true;\n    });\n  }\n  pushRightBeforeRequired() {\n    return this._pushRight(() => {\n      if (this.block.isFixed || this.block.isOptional && !this.block.value) return;\n\n      // TODO check |[*]XX_\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.NONE);\n      return true;\n    });\n  }\n}\n\nexport { PatternCursor as default };\n","import ChangeDetails from '../../core/change-details.js';\nimport { DIRECTION, isString } from '../../core/utils.js';\nimport ContinuousTailDetails from '../../core/continuous-tail-details.js';\nimport '../../core/holder.js';\n\nclass PatternFixedDefinition {\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  constructor(opts) {\n    Object.assign(this, opts);\n    this._value = '';\n    this.isFixed = true;\n  }\n  get value() {\n    return this._value;\n  }\n  get unmaskedValue() {\n    return this.isUnmasking ? this.value : '';\n  }\n  get rawInputValue() {\n    return this._isRawInput ? this.value : '';\n  }\n  get displayValue() {\n    return this.value;\n  }\n  reset() {\n    this._isRawInput = false;\n    this._value = '';\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this._value.length;\n    }\n    this._value = this._value.slice(0, fromPos) + this._value.slice(toPos);\n    if (!this._value) this._isRawInput = false;\n    return new ChangeDetails();\n  }\n  nearestInputPos(cursorPos, direction) {\n    if (direction === void 0) {\n      direction = DIRECTION.NONE;\n    }\n    const minPos = 0;\n    const maxPos = this._value.length;\n    switch (direction) {\n      case DIRECTION.LEFT:\n      case DIRECTION.FORCE_LEFT:\n        return minPos;\n      case DIRECTION.NONE:\n      case DIRECTION.RIGHT:\n      case DIRECTION.FORCE_RIGHT:\n      default:\n        return maxPos;\n    }\n  }\n  totalInputPositions(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this._value.length;\n    }\n    return this._isRawInput ? toPos - fromPos : 0;\n  }\n  extractInput(fromPos, toPos, flags) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this._value.length;\n    }\n    if (flags === void 0) {\n      flags = {};\n    }\n    return flags.raw && this._isRawInput && this._value.slice(fromPos, toPos) || '';\n  }\n  get isComplete() {\n    return true;\n  }\n  get isFilled() {\n    return Boolean(this._value);\n  }\n  _appendChar(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (this.isFilled) return new ChangeDetails();\n    const appendEager = this.eager === true || this.eager === 'append';\n    const appended = this.char === ch;\n    const isResolved = appended && (this.isUnmasking || flags.input || flags.raw) && (!flags.raw || !appendEager) && !flags.tail;\n    const details = new ChangeDetails({\n      inserted: this.char,\n      rawInserted: isResolved ? this.char : ''\n    });\n    this._value = this.char;\n    this._isRawInput = isResolved && (flags.raw || flags.input);\n    return details;\n  }\n  _appendEager() {\n    return this._appendChar(this.char, {\n      tail: true\n    });\n  }\n  _appendPlaceholder() {\n    const details = new ChangeDetails();\n    if (this.isFilled) return details;\n    this._value = details.inserted = this.char;\n    return details;\n  }\n  extractTail() {\n    return new ContinuousTailDetails('');\n  }\n  appendTail(tail) {\n    if (isString(tail)) tail = new ContinuousTailDetails(String(tail));\n    return tail.appendTo(this);\n  }\n  append(str, flags, tail) {\n    const details = this._appendChar(str[0], flags);\n    if (tail != null) {\n      details.tailShift += this.appendTail(tail).tailShift;\n    }\n    return details;\n  }\n  doCommit() {}\n  get state() {\n    return {\n      _value: this._value,\n      _rawInputValue: this.rawInputValue\n    };\n  }\n  set state(state) {\n    this._value = state._value;\n    this._isRawInput = Boolean(state._rawInputValue);\n  }\n  pad(flags) {\n    return this._appendPlaceholder();\n  }\n}\n\nexport { PatternFixedDefinition as default };\n","import createMask from '../factory.js';\nimport ChangeDetails from '../../core/change-details.js';\nimport { DIRECTION } from '../../core/utils.js';\nimport '../../core/holder.js';\n\nclass PatternInputDefinition {\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  constructor(opts) {\n    const {\n      parent,\n      isOptional,\n      placeholderChar,\n      displayChar,\n      lazy,\n      eager,\n      ...maskOpts\n    } = opts;\n    this.masked = createMask(maskOpts);\n    Object.assign(this, {\n      parent,\n      isOptional,\n      placeholderChar,\n      displayChar,\n      lazy,\n      eager\n    });\n  }\n  reset() {\n    this.isFilled = false;\n    this.masked.reset();\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.value.length;\n    }\n    if (fromPos === 0 && toPos >= 1) {\n      this.isFilled = false;\n      return this.masked.remove(fromPos, toPos);\n    }\n    return new ChangeDetails();\n  }\n  get value() {\n    return this.masked.value || (this.isFilled && !this.isOptional ? this.placeholderChar : '');\n  }\n  get unmaskedValue() {\n    return this.masked.unmaskedValue;\n  }\n  get rawInputValue() {\n    return this.masked.rawInputValue;\n  }\n  get displayValue() {\n    return this.masked.value && this.displayChar || this.value;\n  }\n  get isComplete() {\n    return Boolean(this.masked.value) || this.isOptional;\n  }\n  _appendChar(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (this.isFilled) return new ChangeDetails();\n    const state = this.masked.state;\n    // simulate input\n    let details = this.masked._appendChar(ch, this.currentMaskFlags(flags));\n    if (details.inserted && this.doValidate(flags) === false) {\n      details = new ChangeDetails();\n      this.masked.state = state;\n    }\n    if (!details.inserted && !this.isOptional && !this.lazy && !flags.input) {\n      details.inserted = this.placeholderChar;\n    }\n    details.skip = !details.inserted && !this.isOptional;\n    this.isFilled = Boolean(details.inserted);\n    return details;\n  }\n  append(str, flags, tail) {\n    // TODO probably should be done via _appendChar\n    return this.masked.append(str, this.currentMaskFlags(flags), tail);\n  }\n  _appendPlaceholder() {\n    if (this.isFilled || this.isOptional) return new ChangeDetails();\n    this.isFilled = true;\n    return new ChangeDetails({\n      inserted: this.placeholderChar\n    });\n  }\n  _appendEager() {\n    return new ChangeDetails();\n  }\n  extractTail(fromPos, toPos) {\n    return this.masked.extractTail(fromPos, toPos);\n  }\n  appendTail(tail) {\n    return this.masked.appendTail(tail);\n  }\n  extractInput(fromPos, toPos, flags) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.value.length;\n    }\n    return this.masked.extractInput(fromPos, toPos, flags);\n  }\n  nearestInputPos(cursorPos, direction) {\n    if (direction === void 0) {\n      direction = DIRECTION.NONE;\n    }\n    const minPos = 0;\n    const maxPos = this.value.length;\n    const boundPos = Math.min(Math.max(cursorPos, minPos), maxPos);\n    switch (direction) {\n      case DIRECTION.LEFT:\n      case DIRECTION.FORCE_LEFT:\n        return this.isComplete ? boundPos : minPos;\n      case DIRECTION.RIGHT:\n      case DIRECTION.FORCE_RIGHT:\n        return this.isComplete ? boundPos : maxPos;\n      case DIRECTION.NONE:\n      default:\n        return boundPos;\n    }\n  }\n  totalInputPositions(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.value.length;\n    }\n    return this.value.slice(fromPos, toPos).length;\n  }\n  doValidate(flags) {\n    return this.masked.doValidate(this.currentMaskFlags(flags)) && (!this.parent || this.parent.doValidate(this.currentMaskFlags(flags)));\n  }\n  doCommit() {\n    this.masked.doCommit();\n  }\n  get state() {\n    return {\n      _value: this.value,\n      _rawInputValue: this.rawInputValue,\n      masked: this.masked.state,\n      isFilled: this.isFilled\n    };\n  }\n  set state(state) {\n    this.masked.state = state.masked;\n    this.isFilled = state.isFilled;\n  }\n  currentMaskFlags(flags) {\n    var _flags$_beforeTailSta;\n    return {\n      ...flags,\n      _beforeTailState: (flags == null || (_flags$_beforeTailSta = flags._beforeTailState) == null ? void 0 : _flags$_beforeTailSta.masked) || (flags == null ? void 0 : flags._beforeTailState)\n    };\n  }\n  pad(flags) {\n    return new ChangeDetails();\n  }\n}\nPatternInputDefinition.DEFAULT_DEFINITIONS = {\n  '0': /\\d/,\n  'a': /[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]/,\n  // http://stackoverflow.com/a/22075070\n  '*': /./\n};\n\nexport { PatternInputDefinition as default };\n","import Masked from './base.js';\nimport IMask from '../core/holder.js';\nimport '../core/change-details.js';\nimport '../core/continuous-tail-details.js';\nimport '../core/utils.js';\n\n/** Masking by RegExp */\nclass MaskedRegExp extends Masked {\n  /** */\n\n  /** Enable characters overwriting */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    const mask = opts.mask;\n    if (mask) opts.validate = value => value.search(mask) >= 0;\n    super._update(opts);\n  }\n}\nIMask.MaskedRegExp = MaskedRegExp;\n\nexport { MaskedRegExp as default };\n","import ChangeDetails from '../core/change-details.js';\nimport IMask from '../core/holder.js';\nimport { DIRECTION } from '../core/utils.js';\nimport Masked from './base.js';\nimport createMask, { normalizeOpts } from './factory.js';\nimport ChunksTailDetails from './pattern/chunk-tail-details.js';\nimport PatternCursor from './pattern/cursor.js';\nimport PatternFixedDefinition from './pattern/fixed-definition.js';\nimport PatternInputDefinition from './pattern/input-definition.js';\nimport './regexp.js';\nimport '../core/continuous-tail-details.js';\n\n/** Pattern mask */\nclass MaskedPattern extends Masked {\n  /** */\n\n  /** */\n\n  /** Single char for empty input */\n\n  /** Single char for filled input */\n\n  /** Show placeholder only when needed */\n\n  /** Enable characters overwriting */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  constructor(opts) {\n    super({\n      ...MaskedPattern.DEFAULTS,\n      ...opts,\n      definitions: Object.assign({}, PatternInputDefinition.DEFAULT_DEFINITIONS, opts == null ? void 0 : opts.definitions)\n    });\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    opts.definitions = Object.assign({}, this.definitions, opts.definitions);\n    super._update(opts);\n    this._rebuildMask();\n  }\n  _rebuildMask() {\n    const defs = this.definitions;\n    this._blocks = [];\n    this.exposeBlock = undefined;\n    this._stops = [];\n    this._maskedBlocks = {};\n    const pattern = this.mask;\n    if (!pattern || !defs) return;\n    let unmaskingBlock = false;\n    let optionalBlock = false;\n    for (let i = 0; i < pattern.length; ++i) {\n      if (this.blocks) {\n        const p = pattern.slice(i);\n        const bNames = Object.keys(this.blocks).filter(bName => p.indexOf(bName) === 0);\n        // order by key length\n        bNames.sort((a, b) => b.length - a.length);\n        // use block name with max length\n        const bName = bNames[0];\n        if (bName) {\n          const {\n            expose,\n            repeat,\n            ...bOpts\n          } = normalizeOpts(this.blocks[bName]); // TODO type Opts<Arg & Extra>\n          const blockOpts = {\n            lazy: this.lazy,\n            eager: this.eager,\n            placeholderChar: this.placeholderChar,\n            displayChar: this.displayChar,\n            overwrite: this.overwrite,\n            autofix: this.autofix,\n            ...bOpts,\n            repeat,\n            parent: this\n          };\n          const maskedBlock = repeat != null ? new IMask.RepeatBlock(blockOpts /* TODO */) : createMask(blockOpts);\n          if (maskedBlock) {\n            this._blocks.push(maskedBlock);\n            if (expose) this.exposeBlock = maskedBlock;\n\n            // store block index\n            if (!this._maskedBlocks[bName]) this._maskedBlocks[bName] = [];\n            this._maskedBlocks[bName].push(this._blocks.length - 1);\n          }\n          i += bName.length - 1;\n          continue;\n        }\n      }\n      let char = pattern[i];\n      let isInput = (char in defs);\n      if (char === MaskedPattern.STOP_CHAR) {\n        this._stops.push(this._blocks.length);\n        continue;\n      }\n      if (char === '{' || char === '}') {\n        unmaskingBlock = !unmaskingBlock;\n        continue;\n      }\n      if (char === '[' || char === ']') {\n        optionalBlock = !optionalBlock;\n        continue;\n      }\n      if (char === MaskedPattern.ESCAPE_CHAR) {\n        ++i;\n        char = pattern[i];\n        if (!char) break;\n        isInput = false;\n      }\n      const def = isInput ? new PatternInputDefinition({\n        isOptional: optionalBlock,\n        lazy: this.lazy,\n        eager: this.eager,\n        placeholderChar: this.placeholderChar,\n        displayChar: this.displayChar,\n        ...normalizeOpts(defs[char]),\n        parent: this\n      }) : new PatternFixedDefinition({\n        char,\n        eager: this.eager,\n        isUnmasking: unmaskingBlock\n      });\n      this._blocks.push(def);\n    }\n  }\n  get state() {\n    return {\n      ...super.state,\n      _blocks: this._blocks.map(b => b.state)\n    };\n  }\n  set state(state) {\n    if (!state) {\n      this.reset();\n      return;\n    }\n    const {\n      _blocks,\n      ...maskedState\n    } = state;\n    this._blocks.forEach((b, bi) => b.state = _blocks[bi]);\n    super.state = maskedState;\n  }\n  reset() {\n    super.reset();\n    this._blocks.forEach(b => b.reset());\n  }\n  get isComplete() {\n    return this.exposeBlock ? this.exposeBlock.isComplete : this._blocks.every(b => b.isComplete);\n  }\n  get isFilled() {\n    return this._blocks.every(b => b.isFilled);\n  }\n  get isFixed() {\n    return this._blocks.every(b => b.isFixed);\n  }\n  get isOptional() {\n    return this._blocks.every(b => b.isOptional);\n  }\n  doCommit() {\n    this._blocks.forEach(b => b.doCommit());\n    super.doCommit();\n  }\n  get unmaskedValue() {\n    return this.exposeBlock ? this.exposeBlock.unmaskedValue : this._blocks.reduce((str, b) => str += b.unmaskedValue, '');\n  }\n  set unmaskedValue(unmaskedValue) {\n    if (this.exposeBlock) {\n      const tail = this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock)) + this.exposeBlock.displayValue.length);\n      this.exposeBlock.unmaskedValue = unmaskedValue;\n      this.appendTail(tail);\n      this.doCommit();\n    } else super.unmaskedValue = unmaskedValue;\n  }\n  get value() {\n    return this.exposeBlock ? this.exposeBlock.value :\n    // TODO return _value when not in change?\n    this._blocks.reduce((str, b) => str += b.value, '');\n  }\n  set value(value) {\n    if (this.exposeBlock) {\n      const tail = this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock)) + this.exposeBlock.displayValue.length);\n      this.exposeBlock.value = value;\n      this.appendTail(tail);\n      this.doCommit();\n    } else super.value = value;\n  }\n  get typedValue() {\n    return this.exposeBlock ? this.exposeBlock.typedValue : super.typedValue;\n  }\n  set typedValue(value) {\n    if (this.exposeBlock) {\n      const tail = this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock)) + this.exposeBlock.displayValue.length);\n      this.exposeBlock.typedValue = value;\n      this.appendTail(tail);\n      this.doCommit();\n    } else super.typedValue = value;\n  }\n  get displayValue() {\n    return this._blocks.reduce((str, b) => str += b.displayValue, '');\n  }\n  appendTail(tail) {\n    return super.appendTail(tail).aggregate(this._appendPlaceholder());\n  }\n  _appendEager() {\n    var _this$_mapPosToBlock;\n    const details = new ChangeDetails();\n    let startBlockIndex = (_this$_mapPosToBlock = this._mapPosToBlock(this.displayValue.length)) == null ? void 0 : _this$_mapPosToBlock.index;\n    if (startBlockIndex == null) return details;\n\n    // TODO test if it works for nested pattern masks\n    if (this._blocks[startBlockIndex].isFilled) ++startBlockIndex;\n    for (let bi = startBlockIndex; bi < this._blocks.length; ++bi) {\n      const d = this._blocks[bi]._appendEager();\n      if (!d.inserted) break;\n      details.aggregate(d);\n    }\n    return details;\n  }\n  _appendCharRaw(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const blockIter = this._mapPosToBlock(this.displayValue.length);\n    const details = new ChangeDetails();\n    if (!blockIter) return details;\n    for (let bi = blockIter.index, block; block = this._blocks[bi]; ++bi) {\n      var _flags$_beforeTailSta;\n      const blockDetails = block._appendChar(ch, {\n        ...flags,\n        _beforeTailState: (_flags$_beforeTailSta = flags._beforeTailState) == null || (_flags$_beforeTailSta = _flags$_beforeTailSta._blocks) == null ? void 0 : _flags$_beforeTailSta[bi]\n      });\n      details.aggregate(blockDetails);\n      if (blockDetails.consumed) break; // go next char\n    }\n    return details;\n  }\n  extractTail(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    const chunkTail = new ChunksTailDetails();\n    if (fromPos === toPos) return chunkTail;\n    this._forEachBlocksInRange(fromPos, toPos, (b, bi, bFromPos, bToPos) => {\n      const blockChunk = b.extractTail(bFromPos, bToPos);\n      blockChunk.stop = this._findStopBefore(bi);\n      blockChunk.from = this._blockStartPos(bi);\n      if (blockChunk instanceof ChunksTailDetails) blockChunk.blockIndex = bi;\n      chunkTail.extend(blockChunk);\n    });\n    return chunkTail;\n  }\n  extractInput(fromPos, toPos, flags) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (fromPos === toPos) return '';\n    let input = '';\n    this._forEachBlocksInRange(fromPos, toPos, (b, _, fromPos, toPos) => {\n      input += b.extractInput(fromPos, toPos, flags);\n    });\n    return input;\n  }\n  _findStopBefore(blockIndex) {\n    let stopBefore;\n    for (let si = 0; si < this._stops.length; ++si) {\n      const stop = this._stops[si];\n      if (stop <= blockIndex) stopBefore = stop;else break;\n    }\n    return stopBefore;\n  }\n\n  /** Appends placeholder depending on laziness */\n  _appendPlaceholder(toBlockIndex) {\n    const details = new ChangeDetails();\n    if (this.lazy && toBlockIndex == null) return details;\n    const startBlockIter = this._mapPosToBlock(this.displayValue.length);\n    if (!startBlockIter) return details;\n    const startBlockIndex = startBlockIter.index;\n    const endBlockIndex = toBlockIndex != null ? toBlockIndex : this._blocks.length;\n    this._blocks.slice(startBlockIndex, endBlockIndex).forEach(b => {\n      if (!b.lazy || toBlockIndex != null) {\n        var _blocks2;\n        details.aggregate(b._appendPlaceholder((_blocks2 = b._blocks) == null ? void 0 : _blocks2.length));\n      }\n    });\n    return details;\n  }\n\n  /** Finds block in pos */\n  _mapPosToBlock(pos) {\n    let accVal = '';\n    for (let bi = 0; bi < this._blocks.length; ++bi) {\n      const block = this._blocks[bi];\n      const blockStartPos = accVal.length;\n      accVal += block.displayValue;\n      if (pos <= accVal.length) {\n        return {\n          index: bi,\n          offset: pos - blockStartPos\n        };\n      }\n    }\n  }\n  _blockStartPos(blockIndex) {\n    return this._blocks.slice(0, blockIndex).reduce((pos, b) => pos += b.displayValue.length, 0);\n  }\n  _forEachBlocksInRange(fromPos, toPos, fn) {\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    const fromBlockIter = this._mapPosToBlock(fromPos);\n    if (fromBlockIter) {\n      const toBlockIter = this._mapPosToBlock(toPos);\n      // process first block\n      const isSameBlock = toBlockIter && fromBlockIter.index === toBlockIter.index;\n      const fromBlockStartPos = fromBlockIter.offset;\n      const fromBlockEndPos = toBlockIter && isSameBlock ? toBlockIter.offset : this._blocks[fromBlockIter.index].displayValue.length;\n      fn(this._blocks[fromBlockIter.index], fromBlockIter.index, fromBlockStartPos, fromBlockEndPos);\n      if (toBlockIter && !isSameBlock) {\n        // process intermediate blocks\n        for (let bi = fromBlockIter.index + 1; bi < toBlockIter.index; ++bi) {\n          fn(this._blocks[bi], bi, 0, this._blocks[bi].displayValue.length);\n        }\n\n        // process last block\n        fn(this._blocks[toBlockIter.index], toBlockIter.index, 0, toBlockIter.offset);\n      }\n    }\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    const removeDetails = super.remove(fromPos, toPos);\n    this._forEachBlocksInRange(fromPos, toPos, (b, _, bFromPos, bToPos) => {\n      removeDetails.aggregate(b.remove(bFromPos, bToPos));\n    });\n    return removeDetails;\n  }\n  nearestInputPos(cursorPos, direction) {\n    if (direction === void 0) {\n      direction = DIRECTION.NONE;\n    }\n    if (!this._blocks.length) return 0;\n    const cursor = new PatternCursor(this, cursorPos);\n    if (direction === DIRECTION.NONE) {\n      // -------------------------------------------------\n      // NONE should only go out from fixed to the right!\n      // -------------------------------------------------\n      if (cursor.pushRightBeforeInput()) return cursor.pos;\n      cursor.popState();\n      if (cursor.pushLeftBeforeInput()) return cursor.pos;\n      return this.displayValue.length;\n    }\n\n    // FORCE is only about a|* otherwise is 0\n    if (direction === DIRECTION.LEFT || direction === DIRECTION.FORCE_LEFT) {\n      // try to break fast when *|a\n      if (direction === DIRECTION.LEFT) {\n        cursor.pushRightBeforeFilled();\n        if (cursor.ok && cursor.pos === cursorPos) return cursorPos;\n        cursor.popState();\n      }\n\n      // forward flow\n      cursor.pushLeftBeforeInput();\n      cursor.pushLeftBeforeRequired();\n      cursor.pushLeftBeforeFilled();\n\n      // backward flow\n      if (direction === DIRECTION.LEFT) {\n        cursor.pushRightBeforeInput();\n        cursor.pushRightBeforeRequired();\n        if (cursor.ok && cursor.pos <= cursorPos) return cursor.pos;\n        cursor.popState();\n        if (cursor.ok && cursor.pos <= cursorPos) return cursor.pos;\n        cursor.popState();\n      }\n      if (cursor.ok) return cursor.pos;\n      if (direction === DIRECTION.FORCE_LEFT) return 0;\n      cursor.popState();\n      if (cursor.ok) return cursor.pos;\n      cursor.popState();\n      if (cursor.ok) return cursor.pos;\n      return 0;\n    }\n    if (direction === DIRECTION.RIGHT || direction === DIRECTION.FORCE_RIGHT) {\n      // forward flow\n      cursor.pushRightBeforeInput();\n      cursor.pushRightBeforeRequired();\n      if (cursor.pushRightBeforeFilled()) return cursor.pos;\n      if (direction === DIRECTION.FORCE_RIGHT) return this.displayValue.length;\n\n      // backward flow\n      cursor.popState();\n      if (cursor.ok) return cursor.pos;\n      cursor.popState();\n      if (cursor.ok) return cursor.pos;\n      return this.nearestInputPos(cursorPos, DIRECTION.LEFT);\n    }\n    return cursorPos;\n  }\n  totalInputPositions(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    let total = 0;\n    this._forEachBlocksInRange(fromPos, toPos, (b, _, bFromPos, bToPos) => {\n      total += b.totalInputPositions(bFromPos, bToPos);\n    });\n    return total;\n  }\n\n  /** Get block by name */\n  maskedBlock(name) {\n    return this.maskedBlocks(name)[0];\n  }\n\n  /** Get all blocks by name */\n  maskedBlocks(name) {\n    const indices = this._maskedBlocks[name];\n    if (!indices) return [];\n    return indices.map(gi => this._blocks[gi]);\n  }\n  pad(flags) {\n    const details = new ChangeDetails();\n    this._forEachBlocksInRange(0, this.displayValue.length, b => details.aggregate(b.pad(flags)));\n    return details;\n  }\n}\nMaskedPattern.DEFAULTS = {\n  ...Masked.DEFAULTS,\n  lazy: true,\n  placeholderChar: '_'\n};\nMaskedPattern.STOP_CHAR = '`';\nMaskedPattern.ESCAPE_CHAR = '\\\\';\nMaskedPattern.InputDefinition = PatternInputDefinition;\nMaskedPattern.FixedDefinition = PatternFixedDefinition;\nIMask.MaskedPattern = MaskedPattern;\n\nexport { MaskedPattern as default };\n","import ChangeDetails from '../core/change-details.js';\nimport IMask from '../core/holder.js';\nimport MaskedPattern from './pattern.js';\nimport '../core/utils.js';\nimport './base.js';\nimport '../core/continuous-tail-details.js';\nimport './factory.js';\nimport './pattern/chunk-tail-details.js';\nimport './pattern/cursor.js';\nimport './pattern/fixed-definition.js';\nimport './pattern/input-definition.js';\nimport './regexp.js';\n\n/** Pattern which accepts ranges */\nclass MaskedRange extends MaskedPattern {\n  /**\n    Optionally sets max length of pattern.\n    Used when pattern length is longer then `to` param length. Pads zeros at start in this case.\n  */\n\n  /** Min bound */\n\n  /** Max bound */\n\n  get _matchFrom() {\n    return this.maxLength - String(this.from).length;\n  }\n  constructor(opts) {\n    super(opts); // mask will be created in _update\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    const {\n      to = this.to || 0,\n      from = this.from || 0,\n      maxLength = this.maxLength || 0,\n      autofix = this.autofix,\n      ...patternOpts\n    } = opts;\n    this.to = to;\n    this.from = from;\n    this.maxLength = Math.max(String(to).length, maxLength);\n    this.autofix = autofix;\n    const fromStr = String(this.from).padStart(this.maxLength, '0');\n    const toStr = String(this.to).padStart(this.maxLength, '0');\n    let sameCharsCount = 0;\n    while (sameCharsCount < toStr.length && toStr[sameCharsCount] === fromStr[sameCharsCount]) ++sameCharsCount;\n    patternOpts.mask = toStr.slice(0, sameCharsCount).replace(/0/g, '\\\\0') + '0'.repeat(this.maxLength - sameCharsCount);\n    super._update(patternOpts);\n  }\n  get isComplete() {\n    return super.isComplete && Boolean(this.value);\n  }\n  boundaries(str) {\n    let minstr = '';\n    let maxstr = '';\n    const [, placeholder, num] = str.match(/^(\\D*)(\\d*)(\\D*)/) || [];\n    if (num) {\n      minstr = '0'.repeat(placeholder.length) + num;\n      maxstr = '9'.repeat(placeholder.length) + num;\n    }\n    minstr = minstr.padEnd(this.maxLength, '0');\n    maxstr = maxstr.padEnd(this.maxLength, '9');\n    return [minstr, maxstr];\n  }\n  doPrepareChar(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    let details;\n    [ch, details] = super.doPrepareChar(ch.replace(/\\D/g, ''), flags);\n    if (!ch) details.skip = !this.isComplete;\n    return [ch, details];\n  }\n  _appendCharRaw(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (!this.autofix || this.value.length + 1 > this.maxLength) return super._appendCharRaw(ch, flags);\n    const fromStr = String(this.from).padStart(this.maxLength, '0');\n    const toStr = String(this.to).padStart(this.maxLength, '0');\n    const [minstr, maxstr] = this.boundaries(this.value + ch);\n    if (Number(maxstr) < this.from) return super._appendCharRaw(fromStr[this.value.length], flags);\n    if (Number(minstr) > this.to) {\n      if (!flags.tail && this.autofix === 'pad' && this.value.length + 1 < this.maxLength) {\n        return super._appendCharRaw(fromStr[this.value.length], flags).aggregate(this._appendCharRaw(ch, flags));\n      }\n      return super._appendCharRaw(toStr[this.value.length], flags);\n    }\n    return super._appendCharRaw(ch, flags);\n  }\n  doValidate(flags) {\n    const str = this.value;\n    const firstNonZero = str.search(/[^0]/);\n    if (firstNonZero === -1 && str.length <= this._matchFrom) return true;\n    const [minstr, maxstr] = this.boundaries(str);\n    return this.from <= Number(maxstr) && Number(minstr) <= this.to && super.doValidate(flags);\n  }\n  pad(flags) {\n    const details = new ChangeDetails();\n    if (this.value.length === this.maxLength) return details;\n    const value = this.value;\n    const padLength = this.maxLength - this.value.length;\n    if (padLength) {\n      this.reset();\n      for (let i = 0; i < padLength; ++i) {\n        details.aggregate(super._appendCharRaw('0', flags));\n      }\n\n      // append tail\n      value.split('').forEach(ch => this._appendCharRaw(ch));\n    }\n    return details;\n  }\n}\nIMask.MaskedRange = MaskedRange;\n\nexport { MaskedRange as default };\n","import MaskedPattern from './pattern.js';\nimport MaskedRange from './range.js';\nimport IMask from '../core/holder.js';\nimport { isString } from '../core/utils.js';\nimport '../core/change-details.js';\nimport './base.js';\nimport '../core/continuous-tail-details.js';\nimport './factory.js';\nimport './pattern/chunk-tail-details.js';\nimport './pattern/cursor.js';\nimport './pattern/fixed-definition.js';\nimport './pattern/input-definition.js';\nimport './regexp.js';\n\nconst DefaultPattern = 'd{.}`m{.}`Y';\n\n// Make format and parse required when pattern is provided\n\n/** Date mask */\nclass MaskedDate extends MaskedPattern {\n  static extractPatternOptions(opts) {\n    const {\n      mask,\n      pattern,\n      ...patternOpts\n    } = opts;\n    return {\n      ...patternOpts,\n      mask: isString(mask) ? mask : pattern\n    };\n  }\n\n  /** Pattern mask for date according to {@link MaskedDate#format} */\n\n  /** Start date */\n\n  /** End date */\n\n  /** Format typed value to string */\n\n  /** Parse string to get typed value */\n\n  constructor(opts) {\n    super(MaskedDate.extractPatternOptions({\n      ...MaskedDate.DEFAULTS,\n      ...opts\n    }));\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    const {\n      mask,\n      pattern,\n      blocks,\n      ...patternOpts\n    } = {\n      ...MaskedDate.DEFAULTS,\n      ...opts\n    };\n    const patternBlocks = Object.assign({}, MaskedDate.GET_DEFAULT_BLOCKS());\n    // adjust year block\n    if (opts.min) patternBlocks.Y.from = opts.min.getFullYear();\n    if (opts.max) patternBlocks.Y.to = opts.max.getFullYear();\n    if (opts.min && opts.max && patternBlocks.Y.from === patternBlocks.Y.to) {\n      patternBlocks.m.from = opts.min.getMonth() + 1;\n      patternBlocks.m.to = opts.max.getMonth() + 1;\n      if (patternBlocks.m.from === patternBlocks.m.to) {\n        patternBlocks.d.from = opts.min.getDate();\n        patternBlocks.d.to = opts.max.getDate();\n      }\n    }\n    Object.assign(patternBlocks, this.blocks, blocks);\n    super._update({\n      ...patternOpts,\n      mask: isString(mask) ? mask : pattern,\n      blocks: patternBlocks\n    });\n  }\n  doValidate(flags) {\n    const date = this.date;\n    return super.doValidate(flags) && (!this.isComplete || this.isDateExist(this.value) && date != null && (this.min == null || this.min <= date) && (this.max == null || date <= this.max));\n  }\n\n  /** Checks if date is exists */\n  isDateExist(str) {\n    return this.format(this.parse(str, this), this).indexOf(str) >= 0;\n  }\n\n  /** Parsed Date */\n  get date() {\n    return this.typedValue;\n  }\n  set date(date) {\n    this.typedValue = date;\n  }\n  get typedValue() {\n    return this.isComplete ? super.typedValue : null;\n  }\n  set typedValue(value) {\n    super.typedValue = value;\n  }\n  maskEquals(mask) {\n    return mask === Date || super.maskEquals(mask);\n  }\n  optionsIsChanged(opts) {\n    return super.optionsIsChanged(MaskedDate.extractPatternOptions(opts));\n  }\n}\nMaskedDate.GET_DEFAULT_BLOCKS = () => ({\n  d: {\n    mask: MaskedRange,\n    from: 1,\n    to: 31,\n    maxLength: 2\n  },\n  m: {\n    mask: MaskedRange,\n    from: 1,\n    to: 12,\n    maxLength: 2\n  },\n  Y: {\n    mask: MaskedRange,\n    from: 1900,\n    to: 9999\n  }\n});\nMaskedDate.DEFAULTS = {\n  ...MaskedPattern.DEFAULTS,\n  mask: Date,\n  pattern: DefaultPattern,\n  format: (date, masked) => {\n    if (!date) return '';\n    const day = String(date.getDate()).padStart(2, '0');\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const year = date.getFullYear();\n    return [day, month, year].join('.');\n  },\n  parse: (str, masked) => {\n    const [day, month, year] = str.split('.').map(Number);\n    return new Date(year, month - 1, day);\n  }\n};\nIMask.MaskedDate = MaskedDate;\n\nexport { MaskedDate as default };\n","import { DIRECTION, objectIncludes } from '../core/utils.js';\nimport ChangeDetails from '../core/change-details.js';\nimport createMask, { normalizeOpts } from './factory.js';\nimport Masked from './base.js';\nimport IMask from '../core/holder.js';\nimport '../core/continuous-tail-details.js';\n\n/** Dynamic mask for choosing appropriate mask in run-time */\nclass MaskedDynamic extends Masked {\n  constructor(opts) {\n    super({\n      ...MaskedDynamic.DEFAULTS,\n      ...opts\n    });\n    this.currentMask = undefined;\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    super._update(opts);\n    if ('mask' in opts) {\n      this.exposeMask = undefined;\n      // mask could be totally dynamic with only `dispatch` option\n      this.compiledMasks = Array.isArray(opts.mask) ? opts.mask.map(m => {\n        const {\n          expose,\n          ...maskOpts\n        } = normalizeOpts(m);\n        const masked = createMask({\n          overwrite: this._overwrite,\n          eager: this._eager,\n          skipInvalid: this._skipInvalid,\n          ...maskOpts\n        });\n        if (expose) this.exposeMask = masked;\n        return masked;\n      }) : [];\n\n      // this.currentMask = this.doDispatch(''); // probably not needed but lets see\n    }\n  }\n  _appendCharRaw(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const details = this._applyDispatch(ch, flags);\n    if (this.currentMask) {\n      details.aggregate(this.currentMask._appendChar(ch, this.currentMaskFlags(flags)));\n    }\n    return details;\n  }\n  _applyDispatch(appended, flags, tail) {\n    if (appended === void 0) {\n      appended = '';\n    }\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (tail === void 0) {\n      tail = '';\n    }\n    const prevValueBeforeTail = flags.tail && flags._beforeTailState != null ? flags._beforeTailState._value : this.value;\n    const inputValue = this.rawInputValue;\n    const insertValue = flags.tail && flags._beforeTailState != null ? flags._beforeTailState._rawInputValue : inputValue;\n    const tailValue = inputValue.slice(insertValue.length);\n    const prevMask = this.currentMask;\n    const details = new ChangeDetails();\n    const prevMaskState = prevMask == null ? void 0 : prevMask.state;\n\n    // clone flags to prevent overwriting `_beforeTailState`\n    this.currentMask = this.doDispatch(appended, {\n      ...flags\n    }, tail);\n\n    // restore state after dispatch\n    if (this.currentMask) {\n      if (this.currentMask !== prevMask) {\n        // if mask changed reapply input\n        this.currentMask.reset();\n        if (insertValue) {\n          this.currentMask.append(insertValue, {\n            raw: true\n          });\n          details.tailShift = this.currentMask.value.length - prevValueBeforeTail.length;\n        }\n        if (tailValue) {\n          details.tailShift += this.currentMask.append(tailValue, {\n            raw: true,\n            tail: true\n          }).tailShift;\n        }\n      } else if (prevMaskState) {\n        // Dispatch can do something bad with state, so\n        // restore prev mask state\n        this.currentMask.state = prevMaskState;\n      }\n    }\n    return details;\n  }\n  _appendPlaceholder() {\n    const details = this._applyDispatch();\n    if (this.currentMask) {\n      details.aggregate(this.currentMask._appendPlaceholder());\n    }\n    return details;\n  }\n  _appendEager() {\n    const details = this._applyDispatch();\n    if (this.currentMask) {\n      details.aggregate(this.currentMask._appendEager());\n    }\n    return details;\n  }\n  appendTail(tail) {\n    const details = new ChangeDetails();\n    if (tail) details.aggregate(this._applyDispatch('', {}, tail));\n    return details.aggregate(this.currentMask ? this.currentMask.appendTail(tail) : super.appendTail(tail));\n  }\n  currentMaskFlags(flags) {\n    var _flags$_beforeTailSta, _flags$_beforeTailSta2;\n    return {\n      ...flags,\n      _beforeTailState: ((_flags$_beforeTailSta = flags._beforeTailState) == null ? void 0 : _flags$_beforeTailSta.currentMaskRef) === this.currentMask && ((_flags$_beforeTailSta2 = flags._beforeTailState) == null ? void 0 : _flags$_beforeTailSta2.currentMask) || flags._beforeTailState\n    };\n  }\n  doDispatch(appended, flags, tail) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (tail === void 0) {\n      tail = '';\n    }\n    return this.dispatch(appended, this, flags, tail);\n  }\n  doValidate(flags) {\n    return super.doValidate(flags) && (!this.currentMask || this.currentMask.doValidate(this.currentMaskFlags(flags)));\n  }\n  doPrepare(str, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    let [s, details] = super.doPrepare(str, flags);\n    if (this.currentMask) {\n      let currentDetails;\n      [s, currentDetails] = super.doPrepare(s, this.currentMaskFlags(flags));\n      details = details.aggregate(currentDetails);\n    }\n    return [s, details];\n  }\n  doPrepareChar(str, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    let [s, details] = super.doPrepareChar(str, flags);\n    if (this.currentMask) {\n      let currentDetails;\n      [s, currentDetails] = super.doPrepareChar(s, this.currentMaskFlags(flags));\n      details = details.aggregate(currentDetails);\n    }\n    return [s, details];\n  }\n  reset() {\n    var _this$currentMask;\n    (_this$currentMask = this.currentMask) == null || _this$currentMask.reset();\n    this.compiledMasks.forEach(m => m.reset());\n  }\n  get value() {\n    return this.exposeMask ? this.exposeMask.value : this.currentMask ? this.currentMask.value : '';\n  }\n  set value(value) {\n    if (this.exposeMask) {\n      this.exposeMask.value = value;\n      this.currentMask = this.exposeMask;\n      this._applyDispatch();\n    } else super.value = value;\n  }\n  get unmaskedValue() {\n    return this.exposeMask ? this.exposeMask.unmaskedValue : this.currentMask ? this.currentMask.unmaskedValue : '';\n  }\n  set unmaskedValue(unmaskedValue) {\n    if (this.exposeMask) {\n      this.exposeMask.unmaskedValue = unmaskedValue;\n      this.currentMask = this.exposeMask;\n      this._applyDispatch();\n    } else super.unmaskedValue = unmaskedValue;\n  }\n  get typedValue() {\n    return this.exposeMask ? this.exposeMask.typedValue : this.currentMask ? this.currentMask.typedValue : '';\n  }\n  set typedValue(typedValue) {\n    if (this.exposeMask) {\n      this.exposeMask.typedValue = typedValue;\n      this.currentMask = this.exposeMask;\n      this._applyDispatch();\n      return;\n    }\n    let unmaskedValue = String(typedValue);\n\n    // double check it\n    if (this.currentMask) {\n      this.currentMask.typedValue = typedValue;\n      unmaskedValue = this.currentMask.unmaskedValue;\n    }\n    this.unmaskedValue = unmaskedValue;\n  }\n  get displayValue() {\n    return this.currentMask ? this.currentMask.displayValue : '';\n  }\n  get isComplete() {\n    var _this$currentMask2;\n    return Boolean((_this$currentMask2 = this.currentMask) == null ? void 0 : _this$currentMask2.isComplete);\n  }\n  get isFilled() {\n    var _this$currentMask3;\n    return Boolean((_this$currentMask3 = this.currentMask) == null ? void 0 : _this$currentMask3.isFilled);\n  }\n  remove(fromPos, toPos) {\n    const details = new ChangeDetails();\n    if (this.currentMask) {\n      details.aggregate(this.currentMask.remove(fromPos, toPos))\n      // update with dispatch\n      .aggregate(this._applyDispatch());\n    }\n    return details;\n  }\n  get state() {\n    var _this$currentMask4;\n    return {\n      ...super.state,\n      _rawInputValue: this.rawInputValue,\n      compiledMasks: this.compiledMasks.map(m => m.state),\n      currentMaskRef: this.currentMask,\n      currentMask: (_this$currentMask4 = this.currentMask) == null ? void 0 : _this$currentMask4.state\n    };\n  }\n  set state(state) {\n    const {\n      compiledMasks,\n      currentMaskRef,\n      currentMask,\n      ...maskedState\n    } = state;\n    if (compiledMasks) this.compiledMasks.forEach((m, mi) => m.state = compiledMasks[mi]);\n    if (currentMaskRef != null) {\n      this.currentMask = currentMaskRef;\n      this.currentMask.state = currentMask;\n    }\n    super.state = maskedState;\n  }\n  extractInput(fromPos, toPos, flags) {\n    return this.currentMask ? this.currentMask.extractInput(fromPos, toPos, flags) : '';\n  }\n  extractTail(fromPos, toPos) {\n    return this.currentMask ? this.currentMask.extractTail(fromPos, toPos) : super.extractTail(fromPos, toPos);\n  }\n  doCommit() {\n    if (this.currentMask) this.currentMask.doCommit();\n    super.doCommit();\n  }\n  nearestInputPos(cursorPos, direction) {\n    return this.currentMask ? this.currentMask.nearestInputPos(cursorPos, direction) : super.nearestInputPos(cursorPos, direction);\n  }\n  get overwrite() {\n    return this.currentMask ? this.currentMask.overwrite : this._overwrite;\n  }\n  set overwrite(overwrite) {\n    this._overwrite = overwrite;\n  }\n  get eager() {\n    return this.currentMask ? this.currentMask.eager : this._eager;\n  }\n  set eager(eager) {\n    this._eager = eager;\n  }\n  get skipInvalid() {\n    return this.currentMask ? this.currentMask.skipInvalid : this._skipInvalid;\n  }\n  set skipInvalid(skipInvalid) {\n    this._skipInvalid = skipInvalid;\n  }\n  get autofix() {\n    return this.currentMask ? this.currentMask.autofix : this._autofix;\n  }\n  set autofix(autofix) {\n    this._autofix = autofix;\n  }\n  maskEquals(mask) {\n    return Array.isArray(mask) ? this.compiledMasks.every((m, mi) => {\n      if (!mask[mi]) return;\n      const {\n        mask: oldMask,\n        ...restOpts\n      } = mask[mi];\n      return objectIncludes(m, restOpts) && m.maskEquals(oldMask);\n    }) : super.maskEquals(mask);\n  }\n  typedValueEquals(value) {\n    var _this$currentMask5;\n    return Boolean((_this$currentMask5 = this.currentMask) == null ? void 0 : _this$currentMask5.typedValueEquals(value));\n  }\n}\n/** Currently chosen mask */\n/** Currently chosen mask */\n/** Compliled {@link Masked} options */\n/** Chooses {@link Masked} depending on input value */\nMaskedDynamic.DEFAULTS = {\n  ...Masked.DEFAULTS,\n  dispatch: (appended, masked, flags, tail) => {\n    if (!masked.compiledMasks.length) return;\n    const inputValue = masked.rawInputValue;\n\n    // simulate input\n    const inputs = masked.compiledMasks.map((m, index) => {\n      const isCurrent = masked.currentMask === m;\n      const startInputPos = isCurrent ? m.displayValue.length : m.nearestInputPos(m.displayValue.length, DIRECTION.FORCE_LEFT);\n      if (m.rawInputValue !== inputValue) {\n        m.reset();\n        m.append(inputValue, {\n          raw: true\n        });\n      } else if (!isCurrent) {\n        m.remove(startInputPos);\n      }\n      m.append(appended, masked.currentMaskFlags(flags));\n      m.appendTail(tail);\n      return {\n        index,\n        weight: m.rawInputValue.length,\n        totalInputPositions: m.totalInputPositions(0, Math.max(startInputPos, m.nearestInputPos(m.displayValue.length, DIRECTION.FORCE_LEFT)))\n      };\n    });\n\n    // pop masks with longer values first\n    inputs.sort((i1, i2) => i2.weight - i1.weight || i2.totalInputPositions - i1.totalInputPositions);\n    return masked.compiledMasks[inputs[0].index];\n  }\n};\nIMask.MaskedDynamic = MaskedDynamic;\n\nexport { MaskedDynamic as default };\n","import MaskedPattern from './pattern.js';\nimport IMask from '../core/holder.js';\nimport ChangeDetails from '../core/change-details.js';\nimport { DIRECTION } from '../core/utils.js';\nimport ContinuousTailDetails from '../core/continuous-tail-details.js';\nimport './base.js';\nimport './factory.js';\nimport './pattern/chunk-tail-details.js';\nimport './pattern/cursor.js';\nimport './pattern/fixed-definition.js';\nimport './pattern/input-definition.js';\nimport './regexp.js';\n\n/** Pattern which validates enum values */\nclass MaskedEnum extends MaskedPattern {\n  constructor(opts) {\n    super({\n      ...MaskedEnum.DEFAULTS,\n      ...opts\n    }); // mask will be created in _update\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    const {\n      enum: enum_,\n      ...eopts\n    } = opts;\n    if (enum_) {\n      const lengths = enum_.map(e => e.length);\n      const requiredLength = Math.min(...lengths);\n      const optionalLength = Math.max(...lengths) - requiredLength;\n      eopts.mask = '*'.repeat(requiredLength);\n      if (optionalLength) eopts.mask += '[' + '*'.repeat(optionalLength) + ']';\n      this.enum = enum_;\n    }\n    super._update(eopts);\n  }\n  _appendCharRaw(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const matchFrom = Math.min(this.nearestInputPos(0, DIRECTION.FORCE_RIGHT), this.value.length);\n    const matches = this.enum.filter(e => this.matchValue(e, this.unmaskedValue + ch, matchFrom));\n    if (matches.length) {\n      if (matches.length === 1) {\n        this._forEachBlocksInRange(0, this.value.length, (b, bi) => {\n          const mch = matches[0][bi];\n          if (bi >= this.value.length || mch === b.value) return;\n          b.reset();\n          b._appendChar(mch, flags);\n        });\n      }\n      const d = super._appendCharRaw(matches[0][this.value.length], flags);\n      if (matches.length === 1) {\n        matches[0].slice(this.unmaskedValue.length).split('').forEach(mch => d.aggregate(super._appendCharRaw(mch)));\n      }\n      return d;\n    }\n    return new ChangeDetails({\n      skip: !this.isComplete\n    });\n  }\n  extractTail(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    // just drop tail\n    return new ContinuousTailDetails('', fromPos);\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    if (fromPos === toPos) return new ChangeDetails();\n    const matchFrom = Math.min(super.nearestInputPos(0, DIRECTION.FORCE_RIGHT), this.value.length);\n    let pos;\n    for (pos = fromPos; pos >= 0; --pos) {\n      const matches = this.enum.filter(e => this.matchValue(e, this.value.slice(matchFrom, pos), matchFrom));\n      if (matches.length > 1) break;\n    }\n    const details = super.remove(pos, toPos);\n    details.tailShift += pos - fromPos;\n    return details;\n  }\n  get isComplete() {\n    return this.enum.indexOf(this.value) >= 0;\n  }\n}\n/** Match enum value */\nMaskedEnum.DEFAULTS = {\n  ...MaskedPattern.DEFAULTS,\n  matchValue: (estr, istr, matchFrom) => estr.indexOf(istr, matchFrom) === matchFrom\n};\nIMask.MaskedEnum = MaskedEnum;\n\nexport { MaskedEnum as default };\n","import Masked from './base.js';\nimport IMask from '../core/holder.js';\nimport '../core/change-details.js';\nimport '../core/continuous-tail-details.js';\nimport '../core/utils.js';\n\n/** Masking by custom Function */\nclass MaskedFunction extends Masked {\n  /** */\n\n  /** Enable characters overwriting */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    super._update({\n      ...opts,\n      validate: opts.mask\n    });\n  }\n}\nIMask.MaskedFunction = MaskedFunction;\n\nexport { MaskedFunction as default };\n","import { escapeRegExp, DIRECTION } from '../core/utils.js';\nimport ChangeDetails from '../core/change-details.js';\nimport Masked from './base.js';\nimport IMask from '../core/holder.js';\nimport '../core/continuous-tail-details.js';\n\nvar _MaskedNumber;\n/** Number mask */\nclass MaskedNumber extends Masked {\n  /** Single char */\n\n  /** Single char */\n\n  /** Array of single chars */\n\n  /** */\n\n  /** */\n\n  /** Digits after point */\n\n  /** Flag to remove leading and trailing zeros in the end of editing */\n\n  /** Flag to pad trailing zeros after point in the end of editing */\n\n  /** Enable characters overwriting */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** Format typed value to string */\n\n  /** Parse string to get typed value */\n\n  constructor(opts) {\n    super({\n      ...MaskedNumber.DEFAULTS,\n      ...opts\n    });\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    super._update(opts);\n    this._updateRegExps();\n  }\n  _updateRegExps() {\n    const start = '^' + (this.allowNegative ? '[+|\\\\-]?' : '');\n    const mid = '\\\\d*';\n    const end = (this.scale ? \"(\" + escapeRegExp(this.radix) + \"\\\\d{0,\" + this.scale + \"})?\" : '') + '$';\n    this._numberRegExp = new RegExp(start + mid + end);\n    this._mapToRadixRegExp = new RegExp(\"[\" + this.mapToRadix.map(escapeRegExp).join('') + \"]\", 'g');\n    this._thousandsSeparatorRegExp = new RegExp(escapeRegExp(this.thousandsSeparator), 'g');\n  }\n  _removeThousandsSeparators(value) {\n    return value.replace(this._thousandsSeparatorRegExp, '');\n  }\n  _insertThousandsSeparators(value) {\n    // https://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript\n    const parts = value.split(this.radix);\n    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, this.thousandsSeparator);\n    return parts.join(this.radix);\n  }\n  doPrepareChar(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const [prepCh, details] = super.doPrepareChar(this._removeThousandsSeparators(this.scale && this.mapToRadix.length && (\n    /*\n      radix should be mapped when\n      1) input is done from keyboard = flags.input && flags.raw\n      2) unmasked value is set = !flags.input && !flags.raw\n      and should not be mapped when\n      1) value is set = flags.input && !flags.raw\n      2) raw value is set = !flags.input && flags.raw\n    */\n    flags.input && flags.raw || !flags.input && !flags.raw) ? ch.replace(this._mapToRadixRegExp, this.radix) : ch), flags);\n    if (ch && !prepCh) details.skip = true;\n    if (prepCh && !this.allowPositive && !this.value && prepCh !== '-') details.aggregate(this._appendChar('-'));\n    return [prepCh, details];\n  }\n  _separatorsCount(to, extendOnSeparators) {\n    if (extendOnSeparators === void 0) {\n      extendOnSeparators = false;\n    }\n    let count = 0;\n    for (let pos = 0; pos < to; ++pos) {\n      if (this._value.indexOf(this.thousandsSeparator, pos) === pos) {\n        ++count;\n        if (extendOnSeparators) to += this.thousandsSeparator.length;\n      }\n    }\n    return count;\n  }\n  _separatorsCountFromSlice(slice) {\n    if (slice === void 0) {\n      slice = this._value;\n    }\n    return this._separatorsCount(this._removeThousandsSeparators(slice).length, true);\n  }\n  extractInput(fromPos, toPos, flags) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    [fromPos, toPos] = this._adjustRangeWithSeparators(fromPos, toPos);\n    return this._removeThousandsSeparators(super.extractInput(fromPos, toPos, flags));\n  }\n  _appendCharRaw(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const prevBeforeTailValue = flags.tail && flags._beforeTailState ? flags._beforeTailState._value : this._value;\n    const prevBeforeTailSeparatorsCount = this._separatorsCountFromSlice(prevBeforeTailValue);\n    this._value = this._removeThousandsSeparators(this.value);\n    const oldValue = this._value;\n    this._value += ch;\n    const num = this.number;\n    let accepted = !isNaN(num);\n    let skip = false;\n    if (accepted) {\n      let fixedNum;\n      if (this.min != null && this.min < 0 && this.number < this.min) fixedNum = this.min;\n      if (this.max != null && this.max > 0 && this.number > this.max) fixedNum = this.max;\n      if (fixedNum != null) {\n        if (this.autofix) {\n          this._value = this.format(fixedNum, this).replace(MaskedNumber.UNMASKED_RADIX, this.radix);\n          skip || (skip = oldValue === this._value && !flags.tail); // if not changed on tail it's still ok to proceed\n        } else {\n          accepted = false;\n        }\n      }\n      accepted && (accepted = Boolean(this._value.match(this._numberRegExp)));\n    }\n    let appendDetails;\n    if (!accepted) {\n      this._value = oldValue;\n      appendDetails = new ChangeDetails();\n    } else {\n      appendDetails = new ChangeDetails({\n        inserted: this._value.slice(oldValue.length),\n        rawInserted: skip ? '' : ch,\n        skip\n      });\n    }\n    this._value = this._insertThousandsSeparators(this._value);\n    const beforeTailValue = flags.tail && flags._beforeTailState ? flags._beforeTailState._value : this._value;\n    const beforeTailSeparatorsCount = this._separatorsCountFromSlice(beforeTailValue);\n    appendDetails.tailShift += (beforeTailSeparatorsCount - prevBeforeTailSeparatorsCount) * this.thousandsSeparator.length;\n    return appendDetails;\n  }\n  _findSeparatorAround(pos) {\n    if (this.thousandsSeparator) {\n      const searchFrom = pos - this.thousandsSeparator.length + 1;\n      const separatorPos = this.value.indexOf(this.thousandsSeparator, searchFrom);\n      if (separatorPos <= pos) return separatorPos;\n    }\n    return -1;\n  }\n  _adjustRangeWithSeparators(from, to) {\n    const separatorAroundFromPos = this._findSeparatorAround(from);\n    if (separatorAroundFromPos >= 0) from = separatorAroundFromPos;\n    const separatorAroundToPos = this._findSeparatorAround(to);\n    if (separatorAroundToPos >= 0) to = separatorAroundToPos + this.thousandsSeparator.length;\n    return [from, to];\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    [fromPos, toPos] = this._adjustRangeWithSeparators(fromPos, toPos);\n    const valueBeforePos = this.value.slice(0, fromPos);\n    const valueAfterPos = this.value.slice(toPos);\n    const prevBeforeTailSeparatorsCount = this._separatorsCount(valueBeforePos.length);\n    this._value = this._insertThousandsSeparators(this._removeThousandsSeparators(valueBeforePos + valueAfterPos));\n    const beforeTailSeparatorsCount = this._separatorsCountFromSlice(valueBeforePos);\n    return new ChangeDetails({\n      tailShift: (beforeTailSeparatorsCount - prevBeforeTailSeparatorsCount) * this.thousandsSeparator.length\n    });\n  }\n  nearestInputPos(cursorPos, direction) {\n    if (!this.thousandsSeparator) return cursorPos;\n    switch (direction) {\n      case DIRECTION.NONE:\n      case DIRECTION.LEFT:\n      case DIRECTION.FORCE_LEFT:\n        {\n          const separatorAtLeftPos = this._findSeparatorAround(cursorPos - 1);\n          if (separatorAtLeftPos >= 0) {\n            const separatorAtLeftEndPos = separatorAtLeftPos + this.thousandsSeparator.length;\n            if (cursorPos < separatorAtLeftEndPos || this.value.length <= separatorAtLeftEndPos || direction === DIRECTION.FORCE_LEFT) {\n              return separatorAtLeftPos;\n            }\n          }\n          break;\n        }\n      case DIRECTION.RIGHT:\n      case DIRECTION.FORCE_RIGHT:\n        {\n          const separatorAtRightPos = this._findSeparatorAround(cursorPos);\n          if (separatorAtRightPos >= 0) {\n            return separatorAtRightPos + this.thousandsSeparator.length;\n          }\n        }\n    }\n    return cursorPos;\n  }\n  doCommit() {\n    if (this.value) {\n      const number = this.number;\n      let validnum = number;\n\n      // check bounds\n      if (this.min != null) validnum = Math.max(validnum, this.min);\n      if (this.max != null) validnum = Math.min(validnum, this.max);\n      if (validnum !== number) this.unmaskedValue = this.format(validnum, this);\n      let formatted = this.value;\n      if (this.normalizeZeros) formatted = this._normalizeZeros(formatted);\n      if (this.padFractionalZeros && this.scale > 0) formatted = this._padFractionalZeros(formatted);\n      this._value = formatted;\n    }\n    super.doCommit();\n  }\n  _normalizeZeros(value) {\n    const parts = this._removeThousandsSeparators(value).split(this.radix);\n\n    // remove leading zeros\n    parts[0] = parts[0].replace(/^(\\D*)(0*)(\\d*)/, (match, sign, zeros, num) => sign + num);\n    // add leading zero\n    if (value.length && !/\\d$/.test(parts[0])) parts[0] = parts[0] + '0';\n    if (parts.length > 1) {\n      parts[1] = parts[1].replace(/0*$/, ''); // remove trailing zeros\n      if (!parts[1].length) parts.length = 1; // remove fractional\n    }\n    return this._insertThousandsSeparators(parts.join(this.radix));\n  }\n  _padFractionalZeros(value) {\n    if (!value) return value;\n    const parts = value.split(this.radix);\n    if (parts.length < 2) parts.push('');\n    parts[1] = parts[1].padEnd(this.scale, '0');\n    return parts.join(this.radix);\n  }\n  doSkipInvalid(ch, flags, checkTail) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const dropFractional = this.scale === 0 && ch !== this.thousandsSeparator && (ch === this.radix || ch === MaskedNumber.UNMASKED_RADIX || this.mapToRadix.includes(ch));\n    return super.doSkipInvalid(ch, flags, checkTail) && !dropFractional;\n  }\n  get unmaskedValue() {\n    return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix, MaskedNumber.UNMASKED_RADIX);\n  }\n  set unmaskedValue(unmaskedValue) {\n    super.unmaskedValue = unmaskedValue;\n  }\n  get typedValue() {\n    return this.parse(this.unmaskedValue, this);\n  }\n  set typedValue(n) {\n    this.rawInputValue = this.format(n, this).replace(MaskedNumber.UNMASKED_RADIX, this.radix);\n  }\n\n  /** Parsed Number */\n  get number() {\n    return this.typedValue;\n  }\n  set number(number) {\n    this.typedValue = number;\n  }\n  get allowNegative() {\n    return this.min != null && this.min < 0 || this.max != null && this.max < 0;\n  }\n  get allowPositive() {\n    return this.min != null && this.min > 0 || this.max != null && this.max > 0;\n  }\n  typedValueEquals(value) {\n    // handle  0 -> '' case (typed = 0 even if value = '')\n    // for details see https://github.com/uNmAnNeR/imaskjs/issues/134\n    return (super.typedValueEquals(value) || MaskedNumber.EMPTY_VALUES.includes(value) && MaskedNumber.EMPTY_VALUES.includes(this.typedValue)) && !(value === 0 && this.value === '');\n  }\n}\n_MaskedNumber = MaskedNumber;\nMaskedNumber.UNMASKED_RADIX = '.';\nMaskedNumber.EMPTY_VALUES = [...Masked.EMPTY_VALUES, 0];\nMaskedNumber.DEFAULTS = {\n  ...Masked.DEFAULTS,\n  mask: Number,\n  radix: ',',\n  thousandsSeparator: '',\n  mapToRadix: [_MaskedNumber.UNMASKED_RADIX],\n  min: Number.MIN_SAFE_INTEGER,\n  max: Number.MAX_SAFE_INTEGER,\n  scale: 2,\n  normalizeZeros: true,\n  padFractionalZeros: false,\n  parse: Number,\n  format: n => n.toLocaleString('en-US', {\n    useGrouping: false,\n    maximumFractionDigits: 20\n  })\n};\nIMask.MaskedNumber = MaskedNumber;\n\nexport { MaskedNumber as default };\n","import createMask from './factory.js';\nimport IMask from '../core/holder.js';\nimport '../core/utils.js';\n\n/** Mask pipe source and destination types */\nconst PIPE_TYPE = {\n  MASKED: 'value',\n  UNMASKED: 'unmaskedValue',\n  TYPED: 'typedValue'\n};\n/** Creates new pipe function depending on mask type, source and destination options */\nfunction createPipe(arg, from, to) {\n  if (from === void 0) {\n    from = PIPE_TYPE.MASKED;\n  }\n  if (to === void 0) {\n    to = PIPE_TYPE.MASKED;\n  }\n  const masked = createMask(arg);\n  return value => masked.runIsolated(m => {\n    m[from] = value;\n    return m[to];\n  });\n}\n\n/** Pipes value through mask depending on mask type, source and destination options */\nfunction pipe(value, mask, from, to) {\n  return createPipe(mask, from, to)(value);\n}\nIMask.PIPE_TYPE = PIPE_TYPE;\nIMask.createPipe = createPipe;\nIMask.pipe = pipe;\n\nexport { PIPE_TYPE, createPipe, pipe };\n","import ChangeDetails from '../core/change-details.js';\nimport IMask from '../core/holder.js';\nimport createMask, { normalizeOpts } from './factory.js';\nimport MaskedPattern from './pattern.js';\nimport '../core/utils.js';\nimport './base.js';\nimport '../core/continuous-tail-details.js';\nimport './pattern/chunk-tail-details.js';\nimport './pattern/cursor.js';\nimport './pattern/fixed-definition.js';\nimport './pattern/input-definition.js';\nimport './regexp.js';\n\n/** Pattern mask */\nclass RepeatBlock extends MaskedPattern {\n  get repeatFrom() {\n    var _ref;\n    return (_ref = Array.isArray(this.repeat) ? this.repeat[0] : this.repeat === Infinity ? 0 : this.repeat) != null ? _ref : 0;\n  }\n  get repeatTo() {\n    var _ref2;\n    return (_ref2 = Array.isArray(this.repeat) ? this.repeat[1] : this.repeat) != null ? _ref2 : Infinity;\n  }\n  constructor(opts) {\n    super(opts);\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    var _ref3, _ref4, _this$_blocks;\n    const {\n      repeat,\n      ...blockOpts\n    } = normalizeOpts(opts); // TODO type\n    this._blockOpts = Object.assign({}, this._blockOpts, blockOpts);\n    const block = createMask(this._blockOpts);\n    this.repeat = (_ref3 = (_ref4 = repeat != null ? repeat : block.repeat) != null ? _ref4 : this.repeat) != null ? _ref3 : Infinity; // TODO type\n\n    super._update({\n      mask: 'm'.repeat(Math.max(this.repeatTo === Infinity && ((_this$_blocks = this._blocks) == null ? void 0 : _this$_blocks.length) || 0, this.repeatFrom)),\n      blocks: {\n        m: block\n      },\n      eager: block.eager,\n      overwrite: block.overwrite,\n      skipInvalid: block.skipInvalid,\n      lazy: block.lazy,\n      placeholderChar: block.placeholderChar,\n      displayChar: block.displayChar\n    });\n  }\n  _allocateBlock(bi) {\n    if (bi < this._blocks.length) return this._blocks[bi];\n    if (this.repeatTo === Infinity || this._blocks.length < this.repeatTo) {\n      this._blocks.push(createMask(this._blockOpts));\n      this.mask += 'm';\n      return this._blocks[this._blocks.length - 1];\n    }\n  }\n  _appendCharRaw(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const details = new ChangeDetails();\n    for (let bi = (_this$_mapPosToBlock$ = (_this$_mapPosToBlock = this._mapPosToBlock(this.displayValue.length)) == null ? void 0 : _this$_mapPosToBlock.index) != null ? _this$_mapPosToBlock$ : Math.max(this._blocks.length - 1, 0), block, allocated;\n    // try to get a block or\n    // try to allocate a new block if not allocated already\n    block = (_this$_blocks$bi = this._blocks[bi]) != null ? _this$_blocks$bi : allocated = !allocated && this._allocateBlock(bi); ++bi) {\n      var _this$_mapPosToBlock$, _this$_mapPosToBlock, _this$_blocks$bi, _flags$_beforeTailSta;\n      const blockDetails = block._appendChar(ch, {\n        ...flags,\n        _beforeTailState: (_flags$_beforeTailSta = flags._beforeTailState) == null || (_flags$_beforeTailSta = _flags$_beforeTailSta._blocks) == null ? void 0 : _flags$_beforeTailSta[bi]\n      });\n      if (blockDetails.skip && allocated) {\n        // remove the last allocated block and break\n        this._blocks.pop();\n        this.mask = this.mask.slice(1);\n        break;\n      }\n      details.aggregate(blockDetails);\n      if (blockDetails.consumed) break; // go next char\n    }\n    return details;\n  }\n  _trimEmptyTail(fromPos, toPos) {\n    var _this$_mapPosToBlock2, _this$_mapPosToBlock3;\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    const firstBlockIndex = Math.max(((_this$_mapPosToBlock2 = this._mapPosToBlock(fromPos)) == null ? void 0 : _this$_mapPosToBlock2.index) || 0, this.repeatFrom, 0);\n    let lastBlockIndex;\n    if (toPos != null) lastBlockIndex = (_this$_mapPosToBlock3 = this._mapPosToBlock(toPos)) == null ? void 0 : _this$_mapPosToBlock3.index;\n    if (lastBlockIndex == null) lastBlockIndex = this._blocks.length - 1;\n    let removeCount = 0;\n    for (let blockIndex = lastBlockIndex; firstBlockIndex <= blockIndex; --blockIndex, ++removeCount) {\n      if (this._blocks[blockIndex].unmaskedValue) break;\n    }\n    if (removeCount) {\n      this._blocks.splice(lastBlockIndex - removeCount + 1, removeCount);\n      this.mask = this.mask.slice(removeCount);\n    }\n  }\n  reset() {\n    super.reset();\n    this._trimEmptyTail();\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    const removeDetails = super.remove(fromPos, toPos);\n    this._trimEmptyTail(fromPos, toPos);\n    return removeDetails;\n  }\n  totalInputPositions(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos == null && this.repeatTo === Infinity) return Infinity;\n    return super.totalInputPositions(fromPos, toPos);\n  }\n  get state() {\n    return super.state;\n  }\n  set state(state) {\n    this._blocks.length = state._blocks.length;\n    this.mask = this.mask.slice(0, this._blocks.length);\n    super.state = state;\n  }\n}\nIMask.RepeatBlock = RepeatBlock;\n\nexport { RepeatBlock as default };\n","export { default as InputMask } from './controls/input.js';\nimport IMask from './core/holder.js';\nexport { default as HTMLContenteditableMaskElement } from './controls/html-contenteditable-mask-element.js';\nexport { default as HTMLInputMaskElement } from './controls/html-input-mask-element.js';\nexport { default as HTMLMaskElement } from './controls/html-mask-element.js';\nexport { default as MaskElement } from './controls/mask-element.js';\nexport { default as ChangeDetails } from './core/change-details.js';\nexport { DIRECTION, forceDirection } from './core/utils.js';\nexport { default as Masked } from './masked/base.js';\nexport { default as MaskedDate } from './masked/date.js';\nexport { default as MaskedDynamic } from './masked/dynamic.js';\nexport { default as MaskedEnum } from './masked/enum.js';\nexport { default as createMask, normalizeOpts } from './masked/factory.js';\nexport { default as MaskedFunction } from './masked/function.js';\nexport { default as MaskedNumber } from './masked/number.js';\nexport { default as MaskedPattern } from './masked/pattern.js';\nexport { default as ChunksTailDetails } from './masked/pattern/chunk-tail-details.js';\nexport { default as PatternFixedDefinition } from './masked/pattern/fixed-definition.js';\nexport { default as PatternInputDefinition } from './masked/pattern/input-definition.js';\nexport { PIPE_TYPE, createPipe, pipe } from './masked/pipe.js';\nexport { default as MaskedRange } from './masked/range.js';\nexport { default as MaskedRegExp } from './masked/regexp.js';\nexport { default as RepeatBlock } from './masked/repeat.js';\nimport './core/action-details.js';\nimport './controls/input-history.js';\nimport './core/continuous-tail-details.js';\nimport './masked/pattern/cursor.js';\n\ntry {\n  globalThis.IMask = IMask;\n} catch {}\n\nexport { IMask as default };\n",":host {\r\n  margin: 0;\r\n  padding: 0;\r\n  display: inline;\r\n}\r\n.border-theme {\r\n  border: 1px solid #cacfe7;\r\n}\r\n.icon-container {\r\n  color: #3b4781;\r\n  border: 1px solid #cacfe7;\r\n  font-size: 0.975rem;\r\n  height: 2rem;\r\n  background: rgb(255, 255, 255);\r\n  padding-right: 0 !important;\r\n  border-right: 0;\r\n  border-top-right-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n  transition: border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n}\r\ninput:focus {\r\n  border-color: #1e9ff2 !important;\r\n}\r\n.error-message {\r\n  font-size: 0.875rem;\r\n  padding: 0;\r\n  margin: 0.5rem 0 0;\r\n  color: var(--red, #ff4961);\r\n}\r\n.ir-input[data-state='empty'] {\r\n  color: #bbbfc6;\r\n}\r\n.input-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  box-sizing: border-box;\r\n  flex: 1;\r\n}\r\n.input-container input {\r\n  padding-left: 5px !important;\r\n  padding-right: 5px !important;\r\n  border-left: 0;\r\n  border-top-left-radius: 0 !important;\r\n  border-bottom-left-radius: 0 !important;\r\n}\r\n.icon-container[data-state='focus'] {\r\n  border-color: var(--blue);\r\n}\r\n.icon-container[data-disabled] {\r\n  background-color: #eceff1;\r\n  border-color: rgba(118, 118, 118, 0.3);\r\n}\r\n.danger-border {\r\n  border-color: var(--red, #ff4961);\r\n}\r\n","import { Component, Prop, h, Event, EventEmitter, State, Watch, Element } from '@stencil/core';\r\nimport { v4 } from 'uuid';\r\nimport IMask, { FactoryArg, InputMask } from 'imask';\r\nimport { ZodType } from 'zod';\r\n\r\n@Component({\r\n  tag: 'ir-input-text',\r\n  styleUrl: 'ir-input-text.css',\r\n  scoped: true,\r\n})\r\nexport class IrInputText {\r\n  @Element() el: HTMLIrInputTextElement;\r\n  /** Name attribute for the input field */\r\n  @Prop() name: string;\r\n\r\n  /** Value of the input field */\r\n  @Prop() value: string;\r\n\r\n  /** Label text for the input */\r\n  @Prop() label: string;\r\n\r\n  /** Placeholder text for the input */\r\n  @Prop() placeholder: string;\r\n\r\n  /** Additional inline styles for the input */\r\n  @Prop() inputStyles = '';\r\n\r\n  /** Whether the input field is required */\r\n  @Prop() required: boolean;\r\n\r\n  /** Whether the input field is read-only */\r\n  @Prop() readonly: boolean = false;\r\n\r\n  /** Input type (e.g., text, password, email) */\r\n  @Prop() type:\r\n    | 'text'\r\n    | 'password'\r\n    | 'email'\r\n    | 'number'\r\n    | 'tel'\r\n    | 'url'\r\n    | 'search'\r\n    | 'date'\r\n    | 'datetime-local'\r\n    | 'month'\r\n    | 'week'\r\n    | 'time'\r\n    | 'color'\r\n    | 'file'\r\n    | 'hidden'\r\n    | 'checkbox'\r\n    | 'radio'\r\n    | 'range'\r\n    | 'button'\r\n    | 'reset'\r\n    | 'submit'\r\n    | 'image' = 'text';\r\n\r\n  /** Whether the form has been submitted */\r\n  @Prop() submitted: boolean = false;\r\n\r\n  /** Whether to apply default input styling */\r\n  @Prop() inputStyle: boolean = true;\r\n\r\n  /** Text size inside the input field */\r\n  @Prop() textSize: 'sm' | 'md' | 'lg' = 'md';\r\n\r\n  /** Position of the label: left, right, or center */\r\n  @Prop() labelPosition: 'left' | 'right' | 'center' = 'left';\r\n\r\n  /** Background color of the label */\r\n  @Prop() labelBackground: 'primary' | 'secondary' | 'success' | 'danger' | 'warning' | 'info' | 'light' | 'dark' | null = null;\r\n\r\n  /** Text color of the label */\r\n  @Prop() labelColor: 'primary' | 'secondary' | 'success' | 'danger' | 'warning' | 'info' | 'light' | 'dark' = 'dark';\r\n\r\n  /** Border color/style of the label */\r\n  @Prop() labelBorder: 'theme' | 'primary' | 'secondary' | 'success' | 'danger' | 'warning' | 'info' | 'light' | 'dark' | 'none' = 'theme';\r\n\r\n  /** Label width as a fraction of 12 columns (1-11) */\r\n  @Prop() labelWidth: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 = 3;\r\n\r\n  /** Variant of the input: default or icon */\r\n  @Prop() variant: 'default' | 'icon' = 'default';\r\n\r\n  /** Whether the input is disabled */\r\n  @Prop() disabled: boolean = false;\r\n\r\n  /** Whether the input has an error */\r\n  @Prop({ mutable: true }) error: boolean = false;\r\n\r\n  /** Mask for the input field (optional) */\r\n  @Prop() mask: FactoryArg;\r\n\r\n  /** Whether the input should auto-validate */\r\n  @Prop() autoValidate?: boolean = true;\r\n\r\n  /** A Zod schema for validating the input */\r\n  @Prop() zod?: ZodType<any, any>;\r\n\r\n  /** A Zod parse type for validating the input */\r\n  @Prop() asyncParse?: boolean;\r\n\r\n  /** Key to wrap the value (e.g., 'price' or 'cost') */\r\n  @Prop() wrapKey?: string;\r\n\r\n  /** Forcing css style to the input */\r\n  @Prop() inputForcedStyle?: { [key: string]: string };\r\n\r\n  /** Input id for testing purposes*/\r\n  @Prop() testId: string;\r\n\r\n  /** Input max character length*/\r\n  @Prop() maxLength: number;\r\n\r\n  /** To clear all the Input base styling*/\r\n  @Prop() clearBaseStyles: boolean;\r\n\r\n  /** To clear all the Input base styling*/\r\n  @Prop() errorMessage: string;\r\n\r\n  @State() inputFocused: boolean = false;\r\n\r\n  @Event({ bubbles: true, composed: true }) textChange: EventEmitter<any>;\r\n  @Event() inputBlur: EventEmitter<FocusEvent>;\r\n  @Event() inputFocus: EventEmitter<FocusEvent>;\r\n\r\n  private inputRef: HTMLInputElement;\r\n  private maskInstance: InputMask<FactoryArg>;\r\n\r\n  private id: string;\r\n\r\n  componentWillLoad() {\r\n    if (this.el.id) {\r\n      this.id = this.el.id;\r\n    } else {\r\n      this.id = v4();\r\n    }\r\n  }\r\n\r\n  componentDidLoad() {\r\n    if (this.mask) this.initMask();\r\n  }\r\n\r\n  @Watch('mask')\r\n  handleMaskChange() {\r\n    this.initMask();\r\n  }\r\n  @Watch('autoValidate')\r\n  handleMaskChange1() {\r\n    console.log(this.autoValidate);\r\n  }\r\n\r\n  // @Watch('error')\r\n  // handleErrorChange(newValue: boolean, oldValue: boolean) {\r\n  //   if (newValue !== oldValue) {\r\n  //     if (this.autoValidate) {\r\n  //       this.validateInput(this.value, true);\r\n  //     }\r\n  //   }\r\n  // }\r\n\r\n  @Watch('value')\r\n  handleValueChange(newValue: string, oldValue: string) {\r\n    if (newValue !== oldValue) {\r\n      this.validateInput(this.value);\r\n    }\r\n  }\r\n\r\n  private initMask() {\r\n    if (!this.mask || this.maskInstance) {\r\n      return;\r\n    }\r\n\r\n    this.maskInstance = IMask(this.inputRef, this.mask);\r\n    this.maskInstance.on('accept', () => {\r\n      const isEmpty = this.inputRef.value.trim() === '' || this.maskInstance.unmaskedValue === '';\r\n      if (isEmpty) {\r\n        this.inputRef.value = '';\r\n        this.textChange.emit(null);\r\n      } else {\r\n        this.inputRef.value = this.maskInstance.value;\r\n        this.textChange.emit(this.maskInstance.value);\r\n      }\r\n    });\r\n  }\r\n\r\n  private async validateInput(value: string, forceValidation: boolean = false) {\r\n    console.log('autoValidate=>', this.autoValidate);\r\n    if (!this.autoValidate && !forceValidation) {\r\n      console.log('here', 'error', this.error);\r\n      if (this.error) {\r\n        this.updateErrorState(false);\r\n      }\r\n      return;\r\n    }\r\n    console.log('first');\r\n    if (this.zod) {\r\n      try {\r\n        if (!this.asyncParse) {\r\n          this.zod.parse(this.wrapKey ? { [this.wrapKey]: value } : value);\r\n        } else {\r\n          await this.zod.parseAsync(this.wrapKey ? { [this.wrapKey]: value } : value);\r\n        }\r\n        if (this.error) {\r\n          this.updateErrorState(false);\r\n        }\r\n      } catch (error) {\r\n        this.updateErrorState(true);\r\n      }\r\n    }\r\n  }\r\n\r\n  private handleInputChange(event: InputEvent) {\r\n    const value = (event.target as HTMLInputElement).value;\r\n    const isEmpty = value === '';\r\n    if (this.maskInstance) {\r\n      this.maskInstance.value = value;\r\n    }\r\n    const maskedValue = isEmpty ? null : this.maskInstance ? this.maskInstance.value : value;\r\n    this.textChange.emit(maskedValue);\r\n  }\r\n\r\n  private updateErrorState(b: boolean) {\r\n    this.error = b;\r\n    this.inputRef.setAttribute('aria-invalid', b ? 'true' : 'false');\r\n  }\r\n\r\n  private handleBlur(e: FocusEvent) {\r\n    this.validateInput(this.value, this.submitted);\r\n    this.inputFocused = false;\r\n    this.inputBlur.emit(e);\r\n  }\r\n\r\n  render() {\r\n    if (this.variant === 'icon') {\r\n      return (\r\n        <fieldset class=\"position-relative has-icon-left input-container\">\r\n          <label htmlFor={this.id} class=\"input-group-prepend bg-white m-0\">\r\n            <span\r\n              data-disabled={this.disabled}\r\n              data-state={this.inputFocused ? 'focus' : ''}\r\n              class={`input-group-text icon-container bg-white ${this.error ? 'danger-border' : ''}`}\r\n              id=\"basic-addon1\"\r\n            >\r\n              <slot name=\"icon\"></slot>\r\n            </span>\r\n          </label>\r\n          <input\r\n            maxLength={this.maxLength}\r\n            data-testid={this.testId}\r\n            style={this.inputForcedStyle}\r\n            data-state={!!this.value ? undefined : this.mask ? 'empty' : undefined}\r\n            id={this.id}\r\n            ref={el => (this.inputRef = el)}\r\n            readOnly={this.readonly}\r\n            type={this.type}\r\n            class={`ir-input form-control bg-white pl-0 input-sm rate-input py-0 m-0 rateInputBorder ${this.error ? 'danger-border' : ''}`}\r\n            onBlur={this.handleBlur.bind(this)}\r\n            onFocus={e => {\r\n              this.inputFocused = true;\r\n              this.inputFocus.emit(e);\r\n            }}\r\n            placeholder={this.placeholder}\r\n            value={this.value}\r\n            onInput={this.handleInputChange.bind(this)}\r\n            required={this.required}\r\n            disabled={this.disabled}\r\n          />\r\n        </fieldset>\r\n      );\r\n    }\r\n    return (\r\n      <div class={'form-group'}>\r\n        <div class=\"input-group row m-0\">\r\n          {this.label && (\r\n            <div class={`input-group-prepend col-${this.labelWidth} p-0 text-${this.labelColor}`}>\r\n              <label\r\n                htmlFor={this.id}\r\n                class={`input-group-text ${this.labelPosition === 'right' ? 'justify-content-end' : this.labelPosition === 'center' ? 'justify-content-center' : ''} ${\r\n                  this.labelBackground ? 'bg-' + this.labelBackground : ''\r\n                } flex-grow-1 text-${this.labelColor} border-${this.labelBorder === 'none' ? 0 : this.labelBorder} `}\r\n              >\r\n                {this.label}\r\n                {this.required ? '*' : ''}\r\n              </label>\r\n            </div>\r\n          )}\r\n          <input\r\n            maxLength={this.maxLength}\r\n            data-testid={this.testId}\r\n            style={this.inputForcedStyle}\r\n            data-state={!!this.value ? undefined : this.mask ? 'empty' : undefined}\r\n            id={this.id}\r\n            ref={el => (this.inputRef = el)}\r\n            readOnly={this.readonly}\r\n            type={this.type}\r\n            class={\r\n              this.clearBaseStyles\r\n                ? `${this.inputStyles}`\r\n                : `${this.error ? 'border-danger' : ''} form-control text-${this.textSize} col-${this.label ? 12 - this.labelWidth : 12} ${this.readonly ? 'bg-white' : ''} ${\r\n                    this.inputStyles\r\n                  }`\r\n            }\r\n            onBlur={this.handleBlur.bind(this)}\r\n            onFocus={e => {\r\n              this.inputFocused = true;\r\n              this.inputFocus.emit(e);\r\n            }}\r\n            placeholder={this.placeholder}\r\n            value={this.value}\r\n            onInput={this.handleInputChange.bind(this)}\r\n            required={this.required}\r\n            disabled={this.disabled}\r\n          />\r\n        </div>\r\n        {this.errorMessage && this.error && <p class=\"error-message\">{this.errorMessage}</p>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/* .loader {\r\n  width: 1.25rem;\r\n  height: 1.25rem;\r\n  border: 2.5px solid #ffffff;\r\n  border-bottom-color: transparent;\r\n  border-radius: 50%;\r\n  display: inline-block;\r\n  box-sizing: border-box;\r\n  animation: rotation 1s linear infinite;\r\n}\r\n.loaderContainer {\r\n  padding: 1rem 2rem;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 30px;\r\n  gap: 1rem;\r\n  background: rgb(36, 36, 36);\r\n  color: white;\r\n  box-sizing: border-box;\r\n  opacity: 0;\r\n  animation: 300ms ease-in-out fadeIn forwards;\r\n}\r\n.loaderContainer p {\r\n  margin: 0;\r\n  padding: 0;\r\n  font-weight: 500;\r\n}\r\n.loadingScreenContainer {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100vh;\r\n  width: 100vw;\r\n  z-index: 100000;\r\n  background: rgba(255, 255, 255, 0.4);\r\n  pointer-events: all;\r\n  display: flex;\r\n  align-items: end;\r\n  justify-content: center;\r\n  padding: 2rem;\r\n  box-sizing: border-box;\r\n}\r\n@keyframes fadeIn {\r\n  0% {\r\n    opacity: 0;\r\n    transform: translateY(40px);\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n    transform: translateY(0px);\r\n  }\r\n} */\r\n.page-loader {\r\n  width: 1.25rem;\r\n  height: 1.25rem;\r\n  border: 2.5px solid #3f3f3f;\r\n  border-bottom-color: transparent;\r\n  border-radius: 50%;\r\n  display: inline-block;\r\n  box-sizing: border-box;\r\n  animation: rotation 1s linear infinite;\r\n}\r\n.loaderContainer {\r\n  padding: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 5px;\r\n  background: white;\r\n}\r\n.loadingScreenContainer {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100vh;\r\n  width: 100vw;\r\n  z-index: 100000;\r\n  background: rgba(0, 0, 0, 0.2);\r\n  pointer-events: all;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n@keyframes rotation {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n","import { Component, Event, EventEmitter, Host, Listen, Prop, State, h } from '@stencil/core';\r\nimport axios, { AxiosRequestConfig, AxiosResponse } from 'axios';\r\nimport { IToast } from '@components/ui/ir-toast/toast';\r\nimport interceptor_requests from '@/stores/ir-interceptor.store';\r\n\r\n@Component({\r\n  tag: 'ir-interceptor',\r\n  styleUrl: 'ir-interceptor.css',\r\n  scoped: true,\r\n})\r\nexport class IrInterceptor {\r\n  @State() isShown = false;\r\n  @State() isLoading = false;\r\n  @State() isUnassignedUnit = false;\r\n  @State() endpointsCount = 0;\r\n  @State() isPageLoadingStoped: string | null = null;\r\n\r\n  @Prop({ reflect: true }) handledEndpoints = ['/Get_Exposed_Calendar', '/ReAllocate_Exposed_Room', '/Get_Exposed_Bookings'];\r\n  @Event({ bubbles: true, composed: true }) toast: EventEmitter<IToast>;\r\n\r\n  @Listen('preventPageLoad', { target: 'body' })\r\n  handleStopPageLoading(e: CustomEvent) {\r\n    this.isLoading = false;\r\n    this.isPageLoadingStoped = e.detail;\r\n  }\r\n  componentWillLoad() {\r\n    this.setupAxiosInterceptors();\r\n  }\r\n\r\n  setupAxiosInterceptors() {\r\n    axios.interceptors.request.use(this.handleRequest.bind(this), this.handleError.bind(this));\r\n    axios.interceptors.response.use(this.handleResponse.bind(this), this.handleError.bind(this));\r\n  }\r\n\r\n  extractEndpoint(url: string): string {\r\n    return url.split('?')[0];\r\n  }\r\n\r\n  isHandledEndpoint(url: string): boolean {\r\n    return this.handledEndpoints.includes(url);\r\n  }\r\n\r\n  handleRequest(config: AxiosRequestConfig) {\r\n    const extractedUrl = this.extractEndpoint(config.url);\r\n    interceptor_requests[extractedUrl] = 'pending';\r\n    config.params = config.params || {};\r\n    // if (this.ticket) {\r\n    //   config.params.Ticket = this.ticket;\r\n    // }\r\n    if (this.isHandledEndpoint(extractedUrl) && this.isPageLoadingStoped !== extractedUrl) {\r\n      if (extractedUrl !== '/Get_Exposed_Calendar') {\r\n        this.isLoading = true;\r\n      } else {\r\n        if (this.endpointsCount > 0) {\r\n          this.isLoading = true;\r\n        }\r\n      }\r\n    }\r\n    if (extractedUrl === '/Get_Exposed_Calendar') {\r\n      this.endpointsCount = this.endpointsCount + 1;\r\n    }\r\n    return config;\r\n  }\r\n\r\n  handleResponse(response: AxiosResponse) {\r\n    const extractedUrl = this.extractEndpoint(response.config.url);\r\n    if (this.isHandledEndpoint(extractedUrl)) {\r\n      this.isLoading = false;\r\n      this.isPageLoadingStoped = null;\r\n    }\r\n    interceptor_requests[extractedUrl] = 'done';\r\n    if (response.data.ExceptionMsg?.trim()) {\r\n      this.handleError(response.data.ExceptionMsg);\r\n      throw new Error(response.data.ExceptionMsg);\r\n    }\r\n    return response;\r\n  }\r\n\r\n  handleError(error: string) {\r\n    this.toast.emit({\r\n      type: 'error',\r\n      title: error,\r\n      description: '',\r\n      position: 'top-right',\r\n    });\r\n    return Promise.reject(error);\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        {/* {this.isLoading && !this.isPageLoadingStoped && (\r\n          <div class=\"loadingScreenContainer\">\r\n            <div class=\"loaderContainer\">\r\n              <span class=\"loader\"></span>\r\n              <p>Fetching bookings.</p>\r\n            </div>\r\n          </div>\r\n        )} */}\r\n        {this.isLoading && !this.isPageLoadingStoped && (\r\n          <div class=\"loadingScreenContainer\">\r\n            <div class=\"loaderContainer\">\r\n              <span class=\"page-loader\"></span>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",".logo {\r\n  height: 1.5rem;\r\n  width: 1.5rem;\r\n}\r\n:host {\r\n  display: flex;\r\n  gap: 5px;\r\n  align-items: center;\r\n}\r\n.icon {\r\n  margin-left: 3px;\r\n  padding: 0;\r\n  margin-top: 0;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.label_message {\r\n  margin: 0 3px;\r\n  padding: 0;\r\n}\r\n.label_title {\r\n  min-width: max-content;\r\n  padding: 0;\r\n  margin: 0;\r\n  font-weight: 600;\r\n}\r\n.label_placeholder {\r\n  color: #cacfe7;\r\n  padding: 0 !important;\r\n  margin: 0 !important;\r\n}\r\n.icon-container {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.country {\r\n  height: 16px;\r\n  width: 23px;\r\n  border-radius: 3px;\r\n}\r\nsvg {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.label_wrapper_inline {\r\n  display: inline;\r\n  max-width: 100%;\r\n  gap: 5px;\r\n  margin-bottom: 5px;\r\n}\r\n.label_wrapper_flex {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  max-width: 100%;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.label_title {\r\n  font-weight: 600;\r\n  white-space: nowrap;\r\n  display: inline;\r\n}\r\n\r\n.label_message {\r\n  display: inline; /* Keeps the message inline */\r\n  white-space: normal; /* Allows wrapping of the message text */\r\n  word-break: break-word; /* Breaks long words/URLs to prevent overflow */\r\n}\r\n","import { Component, Prop, h, Host } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-label',\r\n  styleUrl: 'ir-label.css',\r\n  scoped: true,\r\n})\r\nexport class IrLabel {\r\n  // -- Props --\r\n  /** The text to display as the label's title */\r\n  @Prop() labelText: string;\r\n\r\n  /** The main text or HTML content to display */\r\n  @Prop() content: string;\r\n\r\n  @Prop() display: 'inline' | 'flex' = 'flex';\r\n\r\n  /** If true, will render `content` as HTML */\r\n  @Prop() renderContentAsHtml: boolean = false;\r\n\r\n  /** Object representing the image used within the label */\r\n  @Prop() image?: { src: string; alt: string; style?: string } | null = null;\r\n\r\n  /** Renders a country-type image style (vs. a 'logo') */\r\n  @Prop() isCountryImage: boolean = false;\r\n\r\n  /** Additional CSS classes or style for the image */\r\n  @Prop() imageStyle: string = '';\r\n\r\n  /** If true, label will ignore checking for an empty content */\r\n  @Prop() ignoreEmptyContent: boolean = false;\r\n\r\n  /** Placeholder text to display if content is empty */\r\n  @Prop() placeholder: string;\r\n\r\n  /** inline styles for the component container */\r\n  @Prop() containerStyle: {\r\n    [key: string]: string;\r\n  };\r\n\r\n  render() {\r\n    // If we have no content and no placeholder, and we are NOT ignoring the empty content, return null.\r\n    if (!this.placeholder && !this.content && !this.ignoreEmptyContent) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <Host class={this.image ? 'align-items-center' : ''}>\r\n        {/* Label title */}\r\n        <div class={`${this.display === 'inline' ? 'label_wrapper_inline' : 'label_wrapper_flex'} `} style={this.containerStyle}>\r\n          {this.labelText && <p class=\"label_title\">{this.labelText}</p>}\r\n\r\n          {/* Slot BEFORE content (prefix slot) */}\r\n          <slot name=\"prefix\" />\r\n\r\n          {/* Optional image */}\r\n          {this.image && (\r\n            <img\r\n              src={this.image.src}\r\n              alt={this.image.alt ?? this.image.src}\r\n              class={`p-0 m-0 ${this.isCountryImage ? 'country' : 'logo'} ${this.image.style ?? ''} ${this.imageStyle ?? ''}`}\r\n            />\r\n          )}\r\n\r\n          {/* Main content or placeholder */}\r\n          {this.content ? (\r\n            this.renderContentAsHtml ? (\r\n              <p class=\"label_message\" innerHTML={this.content}></p>\r\n            ) : (\r\n              <p class=\"label_message\">{this.content}</p>\r\n            )\r\n          ) : (\r\n            <p class=\"label_placeholder\">{this.placeholder}</p>\r\n          )}\r\n\r\n          {/* Default slot goes after the main content, but before suffix */}\r\n          <slot />\r\n\r\n          {/* Slot AFTER content (suffix slot) */}\r\n          <slot name=\"suffix\" />\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: fixed;\r\n  height: 100vh;\r\n  width: 100vw;\r\n  z-index: 1000;\r\n  top: 0;\r\n  left: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: white;\r\n}\r\n\r\n.loader {\r\n  width: 1.25rem;\r\n  height: 1.25rem;\r\n  border: 2.5px solid #3f3f3f;\r\n  border-bottom-color: transparent;\r\n  border-radius: 50%;\r\n  display: inline-block;\r\n  box-sizing: border-box;\r\n  animation: rotation 1s linear infinite;\r\n}\r\n.loaderContainer {\r\n  position: absolute;\r\n  z-index: 100001;\r\n  padding: 20px;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  background: white;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 20px;\r\n  border-radius: 5px;\r\n}\r\n@keyframes rotation {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n","import { Component, Host, Prop, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-loading-screen',\r\n  styleUrl: 'ir-loading-screen.css',\r\n  scoped: true,\r\n})\r\nexport class IrLoadingScreen {\r\n  @Prop() message: string = '';\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <span class=\"loader\"></span>\r\n        {/* {this.message && <p class={'m-0'}>{this.message}</p>} */}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",".backdropModal {\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  z-index: 1000;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100vh;\r\n  width: 100%;\r\n  opacity: 0;\r\n  transition: opacity 0.3s ease-in-out;\r\n  pointer-events: none;\r\n}\r\n.backdropModal.active {\r\n  cursor: pointer;\r\n  opacity: 1 !important;\r\n  pointer-events: all;\r\n}\r\n\r\n.ir-modal[data-state='opened'] {\r\n  opacity: 1;\r\n  /* transform: translate(-50%, 0); */\r\n  visibility: visible; /* Make modal visible */\r\n  pointer-events: all; /* Restore pointer events */\r\n  transition: all 0.3s ease-in-out;\r\n}\r\n.ir-alert-content {\r\n  padding: 10px;\r\n  background: white;\r\n  border-radius: 5px;\r\n}\r\n.ir-alert-header {\r\n  display: flex;\r\n  font-size: 1rem;\r\n  font-weight: 700;\r\n}\r\n.modal {\r\n  z-index: 1001 !important;\r\n}\r\n\r\n.modal-dialog {\r\n  height: 100vh;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.ir-alert-footer {\r\n  gap: 10px;\r\n}\r\n.ir-modal {\r\n  position: fixed;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  z-index: 1050;\r\n  width: 90%;\r\n  max-width: 32rem;\r\n  overflow: hidden;\r\n  outline: 0;\r\n  opacity: 0;\r\n  transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;\r\n  visibility: hidden;\r\n  pointer-events: none;\r\n}\r\n\r\n.ir-modal.active {\r\n  opacity: 1;\r\n  transform: translate(-50%, 0);\r\n  visibility: visible; /* Make modal visible */\r\n  pointer-events: all; /* Restore pointer events */\r\n  transition: all 0.3s ease-in-out;\r\n}\r\n","import { Component, h, State, Method, Event, EventEmitter, Prop, Listen } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-modal',\r\n  styleUrl: 'ir-modal.css',\r\n  scoped: true,\r\n})\r\nexport class IrModal {\r\n  @Prop() modalTitle: string = 'Modal Title';\r\n  @Prop() modalBody: string = 'Modal Body';\r\n  @Prop() showTitle: boolean;\r\n\r\n  @Prop() rightBtnActive: boolean = true;\r\n  @Prop() leftBtnActive: boolean = true;\r\n\r\n  @Prop() rightBtnText: string = 'Confirm';\r\n  @Prop() leftBtnText: string = 'Close';\r\n\r\n  @Prop() isLoading: boolean = false;\r\n  @Prop() autoClose: boolean = true;\r\n\r\n  @Prop() rightBtnColor: 'primary' | 'secondary' | 'success' | 'danger' | 'warning' | 'info' | 'light' | 'dark' = 'primary';\r\n  @Prop() leftBtnColor: 'primary' | 'secondary' | 'success' | 'danger' | 'warning' | 'info' | 'light' | 'dark' = 'secondary';\r\n\r\n  @Prop() btnPosition: 'left' | 'right' | 'center' = 'right';\r\n  @Prop() iconAvailable: boolean = false;\r\n  @Prop() icon: string = '';\r\n\r\n  @State() isOpen: boolean = false;\r\n\r\n  @Method()\r\n  async closeModal() {\r\n    this.isOpen = false;\r\n  }\r\n  @Method()\r\n  async openModal() {\r\n    this.isOpen = true;\r\n  }\r\n  @Event({ bubbles: true, composed: true }) confirmModal: EventEmitter<any>;\r\n  @Event({ bubbles: true, composed: true }) cancelModal: EventEmitter<any>;\r\n\r\n  @Listen('clickHandler')\r\n  btnClickHandler(event: CustomEvent) {\r\n    let target = event.target as HTMLInputElement;\r\n    let name = target.name;\r\n\r\n    if (name === this.leftBtnText) {\r\n      this.cancelModal.emit();\r\n      this.item = {};\r\n      this.closeModal();\r\n    } else if (name === this.rightBtnText) {\r\n      this.confirmModal.emit(this.item);\r\n      this.item = {};\r\n      if (this.autoClose) {\r\n        this.closeModal();\r\n      }\r\n    }\r\n  }\r\n\r\n  @Prop({ mutable: true }) item: any = {};\r\n\r\n  render() {\r\n    return [\r\n      <div\r\n        class={`backdropModal ${this.isOpen ? 'active' : ''}`}\r\n        onClick={() => {\r\n          this.cancelModal.emit();\r\n          if (this.autoClose && !this.isLoading) {\r\n            this.closeModal();\r\n          }\r\n        }}\r\n      ></div>,\r\n      <div data-state={this.isOpen ? 'opened' : 'closed'} class={`ir-modal`} tabindex=\"-1\">\r\n        <div class={`ir-alert-content p-2`}>\r\n          {this.showTitle && (\r\n            <div class={`ir-alert-header`}>\r\n              {/*\r\n            <p class=\"font-weight-bold p-0 my-0 mb-1\">\r\n              {this.iconAvailable && <ir-icon class=\"mr-1\" icon={this.icon}></ir-icon>} \r\n               {this.modalBody} \r\n              {this.modalTitle}\r\n            </p>\r\n            */}\r\n              {/* <div class=\"font-weight-bold d-flex align-items-center font-size-large my-0 py-0\">\r\n              <ir-icon\r\n                icon=\"ft-x\"\r\n                style={{ cursor: 'pointer' }}\r\n                onClick={() => {\r\n                  this.closeModal();\r\n                  this.cancelModal.emit();\r\n                }}\r\n              ></ir-icon>\r\n            </div> */}\r\n              <p>{this.modalTitle}</p>\r\n            </div>\r\n          )}\r\n          <div class=\"modal-body text-left p-0 mb-2\">\r\n            <div>{this.modalBody}</div>\r\n          </div>\r\n\r\n          <div class={`ir-alert-footer border-0  d-flex justify-content-${this.btnPosition === 'center' ? 'center' : this.btnPosition === 'left' ? 'start' : 'end'}`}>\r\n            {this.leftBtnActive && (\r\n              <ir-button btn_disabled={this.isLoading} icon={''} btn_color={this.leftBtnColor} btn_block text={this.leftBtnText} name={this.leftBtnText}></ir-button>\r\n            )}\r\n            {this.rightBtnActive && (\r\n              <ir-button\r\n                icon={''}\r\n                btn_color={this.rightBtnColor}\r\n                btn_disabled={this.isLoading}\r\n                isLoading={this.isLoading}\r\n                btn_block\r\n                text={this.rightBtnText}\r\n                name={this.rightBtnText}\r\n              ></ir-button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>,\r\n    ];\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n:host p,\r\n:host div,\r\n:host span,\r\n:host ir-icons {\r\n  box-sizing: border-box;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n.action-container td {\r\n  padding: 0px 0.5rem;\r\n  padding-bottom: 0.5rem;\r\n}\r\n.action-container .amount_action {\r\n  padding-inline-start: 0;\r\n}\r\n.overdue_action {\r\n  color: #ff4961;\r\n  border-radius: 0.25rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n.future_action {\r\n  border-radius: 0.25rem;\r\n  color: #1e9ff2;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: start;\r\n  gap: 0.5rem;\r\n}\r\n.date_action {\r\n  font-weight: 500;\r\n}\r\n.amount_action {\r\n  /* color: green; */\r\n  font-weight: 600;\r\n}\r\n","import { Component, Event, EventEmitter, Host, Prop, h } from '@stencil/core';\r\nimport { IPaymentAction } from '@/services/payment.service';\r\nimport { Booking } from '@/models/booking.dto';\r\nimport { formatAmount } from '@/utils/utils';\r\nimport moment from 'moment';\r\n@Component({\r\n  tag: 'ir-payment-actions',\r\n  styleUrl: 'ir-payment-actions.css',\r\n  scoped: true,\r\n})\r\nexport class IrPaymentActions {\r\n  @Prop() booking: Booking;\r\n  @Prop() paymentAction: IPaymentAction[];\r\n\r\n  @Event() generatePayment: EventEmitter<IPaymentAction>;\r\n\r\n  render() {\r\n    if (this.paymentAction?.filter(pa => pa.amount !== 0).length == 0) {\r\n      return null;\r\n    }\r\n    return (\r\n      <Host>\r\n        <div class={'my-1'}>\r\n          <span class={'font-medium'}>Payment actions</span>\r\n        </div>\r\n        <table>\r\n          <thead>\r\n            <th>\r\n              <p class=\"sr-only\">Amount</p>\r\n            </th>\r\n            <th>\r\n              <p class={'sr-only'}>Due date</p>\r\n            </th>\r\n            <th>\r\n              <p class={'sr-only'}>Pay</p>\r\n            </th>\r\n            <th>\r\n              <p class={'sr-only'}>Status</p>\r\n            </th>\r\n          </thead>\r\n          <tbody>\r\n            {this.paymentAction?.map(pa => {\r\n              if (!pa.due_on) {\r\n                return null;\r\n              }\r\n              return (\r\n                <tr class={'action-container'}>\r\n                  <td class={'amount_action'}>{formatAmount(pa.currency.symbol, pa.amount)}</td>\r\n                  <td class={'date_action'}>{moment(new Date(pa.due_on)).format('ddd, DD MMM YYYY')}</td>\r\n                  {pa.amount > 0 && (\r\n                    <td>\r\n                      <ir-button btn_color=\"outline\" text={'Pay'} size=\"sm\" onClickHandler={() => this.generatePayment.emit(pa)}></ir-button>\r\n                    </td>\r\n                  )}\r\n                  {pa.type === 'overdue' && pa.amount > 0 && (\r\n                    <td>\r\n                      <div class={'overdue_action'}>\r\n                        <svg height={16} width={16} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\r\n                          <path\r\n                            fill=\"currentColor\"\r\n                            d=\"M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z\"\r\n                          />\r\n                        </svg>\r\n                        <span>Overdue</span>\r\n                      </div>\r\n                    </td>\r\n                  )}\r\n                  {pa.type === 'future' && pa.amount > 0 && (\r\n                    <td>\r\n                      <div class={'future_action '}>\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" height={16} width={16} viewBox=\"0 0 512 512\">\r\n                          <path\r\n                            fill=\"currentColor\"\r\n                            d=\"M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z\"\r\n                          />\r\n                        </svg>\r\n                        <span>{moment(new Date(pa.due_on)).isSame(new Date()) ? 'Today' : 'Future'}</span>\r\n                      </div>\r\n                    </td>\r\n                  )}\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;\r\n}\r\n:host * {\r\n  font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;\r\n}\r\n\r\n.sm-margin-right {\r\n  margin-right: 5px !important;\r\n  background: #000;\r\n}\r\n.action_icons {\r\n  width: 60px;\r\n}\r\n.w-60 {\r\n  width: 100px;\r\n  padding: 0 5px;\r\n}\r\n.payments-height {\r\n  height: 30px;\r\n}\r\n.payment_date {\r\n  width: 100px;\r\n}\r\n.iframeHeight {\r\n  height: max-content;\r\n  height: 22.5rem;\r\n}\r\n.designation {\r\n  width: 120px;\r\n}\r\n.total-cost-container {\r\n  background: #7cbebe;\r\n  color: white;\r\n  padding: 0.5rem;\r\n  border-radius: 5px;\r\n}\r\n.payment-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  gap: 0.5rem;\r\n}\r\n.payment_action_beta_container {\r\n  border: 1px solid var(--red);\r\n  position: relative;\r\n  padding: 4px;\r\n  box-sizing: border-box;\r\n  border-radius: 4px;\r\n}\r\n.beta {\r\n  position: absolute;\r\n  top: 4px;\r\n  background: var(--red);\r\n  color: white;\r\n  padding: 0.2rem 0.3rem;\r\n  font-size: 12px;\r\n  border-radius: 4px;\r\n  right: 4px;\r\n  margin: 0;\r\n}\r\n","import { Component, h, Prop, State, Event, EventEmitter, Fragment, Watch, Listen } from '@stencil/core';\r\nimport { _formatDate } from '../functions';\r\nimport { Booking, IDueDate, IPayment } from '@/models/booking.dto';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport moment from 'moment';\r\nimport { PaymentService, IPaymentAction } from '@/services/payment.service';\r\nimport { colorVariants } from '@/components/ui/ir-icons/icons';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\nimport { formatAmount } from '@/utils/utils';\r\nimport locales from '@/stores/locales.store';\r\nimport { IToast } from '@/components/ui/ir-toast/toast';\r\nimport calendar_data from '@/stores/calendar-data';\r\n\r\n@Component({\r\n  styleUrl: 'ir-payment-details.css',\r\n  tag: 'ir-payment-details',\r\n  scoped: true,\r\n})\r\nexport class IrPaymentDetails {\r\n  @Prop({ mutable: true }) bookingDetails: Booking;\r\n  @Prop() paymentActions: IPaymentAction[];\r\n\r\n  @State() newTableRow: boolean = false;\r\n\r\n  @State() collapsedPayment: boolean = false;\r\n  @State() collapsedGuarantee: boolean = false;\r\n\r\n  @State() flag: boolean = false;\r\n\r\n  @State() confirmModal: boolean = false;\r\n  @State() toBeDeletedItem: IPayment;\r\n\r\n  @State() paymentDetailsUrl: string = '';\r\n  @State() paymentExceptionMessage: string = '';\r\n  @State() modal_mode: 'delete' | 'save' | null = null;\r\n  @State() itemToBeAdded: IPayment;\r\n\r\n  @Event({ bubbles: true }) resetBookingEvt: EventEmitter<null>;\r\n  @Event({ bubbles: true }) resetExposedCancelationDueAmount: EventEmitter<null>;\r\n  @Event({ bubbles: true }) toast: EventEmitter<IToast>;\r\n\r\n  private paymentService = new PaymentService();\r\n  private bookingService = new BookingService();\r\n  private paymentBackground = 'white';\r\n\r\n  @Listen('generatePayment')\r\n  handlePaymentGeneration(e: CustomEvent) {\r\n    const value = e.detail;\r\n    this.newTableRow = true;\r\n    this.itemToBeAdded = { ...this.itemToBeAdded, amount: value.amount, date: value.due_on };\r\n    this.paymentBackground = 'rgba(250, 253, 174)';\r\n  }\r\n  async componentWillLoad() {\r\n    try {\r\n      this.initializeItemToBeAdded();\r\n    } catch (error) {\r\n      if (this.bookingDetails.guest.cci) {\r\n        return;\r\n      }\r\n      if (!this.bookingDetails.is_direct && this.bookingDetails.channel_booking_nbr) {\r\n        this.paymentExceptionMessage = error;\r\n      }\r\n    }\r\n  }\r\n  initializeItemToBeAdded() {\r\n    this.itemToBeAdded = {\r\n      id: -1,\r\n      date: moment().format('YYYY-MM-DD'),\r\n      amount: null,\r\n      currency: this.bookingDetails.currency,\r\n      designation: '',\r\n      reference: '',\r\n    };\r\n    this.paymentBackground = 'white';\r\n  }\r\n\r\n  async _processPaymentSave() {\r\n    if (this.itemToBeAdded.amount === null) {\r\n      this.toast.emit({\r\n        type: 'error',\r\n        title: locales.entries.Lcz_EnterAmount,\r\n        description: '',\r\n        position: 'top-right',\r\n      });\r\n      return;\r\n    }\r\n    if (Number(this.itemToBeAdded.amount) > Number(this.bookingDetails.financial.due_amount)) {\r\n      this.modal_mode = 'save';\r\n      this.openModal();\r\n      return;\r\n    }\r\n    this._handleSave();\r\n  }\r\n\r\n  async _handleSave() {\r\n    this.paymentBackground = 'white';\r\n    try {\r\n      await this.paymentService.AddPayment(this.itemToBeAdded, this.bookingDetails.booking_nbr);\r\n      this.initializeItemToBeAdded();\r\n      this.resetBookingEvt.emit(null);\r\n      this.resetExposedCancelationDueAmount.emit(null);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  handlePaymentInputChange(key: keyof IPayment, value: any, event?: CustomEvent) {\r\n    this.paymentBackground = 'white';\r\n    if (key === 'amount') {\r\n      if (!isNaN(value) || value === '') {\r\n        if (value === '') {\r\n          this.itemToBeAdded = { ...this.itemToBeAdded, [key]: null };\r\n        } else {\r\n          this.itemToBeAdded = { ...this.itemToBeAdded, [key]: parseFloat(value) };\r\n        }\r\n      } else if (event && event.target) {\r\n        let inputElement = event.target as HTMLInputElement;\r\n        let inputValue = inputElement.value;\r\n        inputValue = inputValue.replace(/[^\\d-]|(?<!^)-/g, '');\r\n        inputElement.value = inputValue;\r\n      }\r\n    } else {\r\n      this.itemToBeAdded = { ...this.itemToBeAdded, [key]: value };\r\n    }\r\n  }\r\n  async cancelPayment() {\r\n    try {\r\n      await this.paymentService.CancelPayment(this.toBeDeletedItem.id);\r\n      const newPaymentArray = this.bookingDetails.financial.payments.filter((item: IPayment) => item.id !== this.toBeDeletedItem.id);\r\n      this.bookingDetails = { ...this.bookingDetails, financial: { ...this.bookingDetails.financial, payments: newPaymentArray } };\r\n      this.confirmModal = !this.confirmModal;\r\n      this.resetBookingEvt.emit(null);\r\n      this.resetExposedCancelationDueAmount.emit(null);\r\n      this.toBeDeletedItem = null;\r\n      this.modal_mode = null;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  async handleConfirmModal(e: CustomEvent) {\r\n    this.paymentBackground = 'white';\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    if (this.modal_mode === 'delete') {\r\n      await this.cancelPayment();\r\n    } else {\r\n      await this._handleSave();\r\n    }\r\n  }\r\n  openModal() {\r\n    const modal: any = document.querySelector('.delete-record-modal');\r\n    modal.openModal();\r\n  }\r\n  async handleCancelModal(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    try {\r\n      this.paymentBackground = 'white';\r\n      if (this.modal_mode === 'save') {\r\n        this.initializeItemToBeAdded();\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  @Watch('bookingDetails')\r\n  handleBookingDetails() {\r\n    if (this.newTableRow) {\r\n      this.newTableRow = false;\r\n    }\r\n  }\r\n  handleDateChange(\r\n    e: CustomEvent<{\r\n      start: moment.Moment;\r\n      end: moment.Moment;\r\n    }>,\r\n  ) {\r\n    this.handlePaymentInputChange('date', e.detail.end.format('YYYY-MM-DD'));\r\n  }\r\n  _renderTableRow(item: IPayment, rowMode: 'add' | 'normal' = 'normal') {\r\n    return (\r\n      <Fragment>\r\n        <tr>\r\n          <td class={'border payments-height border-light border-bottom-0 text-center'}>\r\n            {rowMode === 'normal' ? (\r\n              <span class=\"sm-padding-left\">{_formatDate(item.date)}</span>\r\n            ) : (\r\n              <ir-date-picker\r\n                date={this.itemToBeAdded?.date ? new Date(this.itemToBeAdded.date) : new Date()}\r\n                minDate={moment().add(-2, 'months').startOf('month').format('YYYY-MM-DD')}\r\n                // singleDatePicker\r\n                // autoApply\r\n                class=\"d-flex justify-content-center\"\r\n                onDateChanged={this.handleDateChange.bind(this)}\r\n              >\r\n                <input\r\n                  type=\"text\"\r\n                  slot=\"trigger\"\r\n                  value={_formatDate(this.itemToBeAdded?.date)}\r\n                  class=\"text-center  form-control flex-grow-1 w-100\"\r\n                  style={{ border: '0', marginLeft: 'auto', marginRight: 'auto', width: '100%' }}\r\n                ></input>\r\n              </ir-date-picker>\r\n            )}\r\n          </td>\r\n          <td class={'border payments-height border-light border-bottom-0 text-center '}>\r\n            {rowMode === 'normal' ? (\r\n              <span class=\"sm-padding-right\">{formatAmount(this.bookingDetails.currency.symbol, item.amount)}</span>\r\n            ) : (\r\n              // <input\r\n              //   type=\"text\"\r\n              //   class=\"border-0 text-center form-control py-0 m-0 w-100\"\r\n              //   value={this.itemToBeAdded.amount}\r\n              //   onBlur={e => {\r\n              //     (e.target as HTMLInputElement).value = Number(this.itemToBeAdded.amount).toFixed(2);\r\n              //   }}\r\n              //   onInput={event => this.handlePaymentInputChange('amount', +(event.target as HTMLInputElement).value, event)}\r\n              // ></input>\r\n              <ir-price-input\r\n                value={this.itemToBeAdded.amount?.toString()}\r\n                onTextChange={e => this.handlePaymentInputChange('amount', Number(e.detail), e)}\r\n                inputStyle=\"border-0 rounded-0 text-center py-0 m-0 w-100\"\r\n              ></ir-price-input>\r\n            )}\r\n          </td>\r\n          <td class={'border payments-height border-light border-bottom-0 text-center'}>\r\n            {rowMode === 'normal' ? (\r\n              <span class=\"sm-padding-left\">{item.designation}</span>\r\n            ) : (\r\n              <input\r\n                class=\"border-0 w-100 form-control py-0 m-0\"\r\n                onInput={event => this.handlePaymentInputChange('designation', (event.target as HTMLInputElement).value)}\r\n                type=\"text\"\r\n              ></input>\r\n            )}\r\n          </td>\r\n          <td rowSpan={2} class={'border payments-height border-light border-bottom-0 text-center'}>\r\n            <div class={'payment-actions'}>\r\n              {rowMode === 'add' && (\r\n                <ir-button\r\n                  variant=\"icon\"\r\n                  icon_name=\"save\"\r\n                  style={colorVariants.secondary}\r\n                  isLoading={rowMode === 'add' && isRequestPending('/Do_Payment')}\r\n                  class={'m-0'}\r\n                  onClickHandler={() => {\r\n                    this._processPaymentSave();\r\n                  }}\r\n                ></ir-button>\r\n              )}\r\n              <ir-button\r\n                variant=\"icon\"\r\n                icon_name=\"trash\"\r\n                style={colorVariants.danger}\r\n                isLoading={this.toBeDeletedItem?.id === item?.id && isRequestPending('/Cancel_Payment')}\r\n                onClickHandler={\r\n                  rowMode === 'add'\r\n                    ? () => {\r\n                        this.newTableRow = false;\r\n                        this.initializeItemToBeAdded();\r\n                      }\r\n                    : () => {\r\n                        this.modal_mode = 'delete';\r\n                        this.toBeDeletedItem = item;\r\n                        this.openModal();\r\n                      }\r\n                }\r\n              ></ir-button>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td colSpan={3} class={'border border-light payments-height border-bottom-0 text-center'}>\r\n            {rowMode === 'normal' ? (\r\n              <span class=\"sm-padding-left \">{item.reference}</span>\r\n            ) : (\r\n              <input\r\n                class=\"border-0 w-100  form-control py-0 m-0\"\r\n                onKeyPress={event => {\r\n                  if (event.key === 'Enter') {\r\n                    this.newTableRow = false;\r\n                    this._handleSave();\r\n                  }\r\n                }}\r\n                onInput={event => this.handlePaymentInputChange('reference', (event.target as HTMLInputElement).value)}\r\n                type=\"text\"\r\n              ></input>\r\n            )}\r\n          </td>\r\n        </tr>\r\n      </Fragment>\r\n    );\r\n  }\r\n  private formatCurrency(amount: number, currency: string, locale: string = 'en-US'): string {\r\n    if (!currency) {\r\n      return;\r\n    }\r\n    if (amount >= 0) {\r\n      return new Intl.NumberFormat(locale, {\r\n        style: 'currency',\r\n        currency,\r\n        minimumFractionDigits: 2,\r\n        maximumFractionDigits: 2,\r\n      }).format(amount);\r\n    }\r\n    return;\r\n  }\r\n  private bookingGuarantee() {\r\n    const paymentMethod = this.bookingDetails.is_direct ? this.getPaymentMethod() : null;\r\n    if (this.bookingDetails.is_direct && !paymentMethod && !this.bookingDetails.guest.cci) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div class=\"mb-1\">\r\n        <div class=\"d-flex align-items-center\">\r\n          <span class=\"mr-1 font-medium\">\r\n            {locales.entries.Lcz_BookingGuarantee}\r\n            {!!paymentMethod && <span>: {paymentMethod}</span>}\r\n          </span>\r\n          {(!this.bookingDetails.is_direct || (this.bookingDetails.is_direct && this.bookingDetails.guest.cci)) && (\r\n            <ir-button\r\n              id=\"drawer-icon\"\r\n              data-toggle=\"collapse\"\r\n              data-target={`.guarrantee`}\r\n              aria-expanded={this.collapsedGuarantee ? 'true' : 'false'}\r\n              aria-controls=\"myCollapse\"\r\n              class=\"sm-padding-right pointer\"\r\n              variant=\"icon\"\r\n              icon_name=\"credit_card\"\r\n              onClickHandler={async () => {\r\n                if (!this.bookingDetails.is_direct && this.bookingDetails.channel_booking_nbr && !this.bookingDetails.guest.cci) {\r\n                  this.paymentDetailsUrl = await this.bookingService.getPCICardInfoURL(this.bookingDetails.booking_nbr);\r\n                }\r\n                this.collapsedGuarantee = !this.collapsedGuarantee;\r\n              }}\r\n            ></ir-button>\r\n          )}\r\n        </div>\r\n        <div class=\"collapse guarrantee \">\r\n          {this.bookingDetails.guest.cci ? (\r\n            [\r\n              <div>\r\n                {this.bookingDetails?.guest?.cci && 'Card:'} <span>{this.bookingDetails?.guest?.cci?.nbr || ''}</span> {this.bookingDetails?.guest?.cci?.expiry_month && 'Expiry: '}\r\n                <span>\r\n                  {' '}\r\n                  {this.bookingDetails?.guest?.cci?.expiry_month || ''} {this.bookingDetails?.guest?.cci?.expiry_year && '/' + this.bookingDetails?.guest?.cci?.expiry_year}\r\n                </span>\r\n              </div>,\r\n              <div>\r\n                {this.bookingDetails?.guest?.cci.holder_name && 'Name:'} <span>{this.bookingDetails?.guest?.cci?.holder_name || ''}</span>{' '}\r\n                {this.bookingDetails?.guest?.cci?.cvc && '- CVC:'} <span> {this.bookingDetails?.guest?.cci?.cvc || ''}</span>\r\n              </div>,\r\n            ]\r\n          ) : this.paymentDetailsUrl ? (\r\n            <iframe src={this.paymentDetailsUrl} width=\"100%\" class=\"iframeHeight\" frameborder=\"0\" name=\"payment\"></iframe>\r\n          ) : (\r\n            <div class=\"text-center\">{this.paymentExceptionMessage}</div>\r\n          )}\r\n        </div>\r\n        {!this.bookingDetails.is_direct && this.bookingDetails.ota_guarante && (\r\n          <div>\r\n            <ir-label\r\n              content={this.bookingDetails.ota_guarante?.card_type + `${this.bookingDetails.ota_guarante?.is_virtual ? ' (virtual)' : ''}`}\r\n              labelText={`${locales.entries.Lcz_CardType}:`}\r\n            ></ir-label>\r\n            <ir-label content={this.bookingDetails.ota_guarante?.cardholder_name} labelText={`${locales.entries.Lcz_CardHolderName}:`}></ir-label>\r\n            <ir-label content={this.bookingDetails.ota_guarante?.card_number} labelText={`${locales.entries.Lcz_CardNumber}:`}></ir-label>\r\n            {/* <ir-label content={this.bookingDetails.ota_guarante?.cvv} labelText=\"Cvv:\"></ir-label> */}\r\n            {/* <ir-label content={JSON.stringify(this.bookingDetails?.ota_guarante.is_virtual)} labelText=\"Is card virtual:\"></ir-label> */}\r\n            {/* <ir-label content={this.bookingDetails.ota_guarante?.expiration_date} labelText=\"Expiration date:\"></ir-label> */}\r\n            <ir-label\r\n              content={this.formatCurrency(\r\n                Number(this.bookingDetails.ota_guarante?.meta?.virtual_card_current_balance),\r\n                this.bookingDetails.ota_guarante?.meta?.virtual_card_currency_code,\r\n              )}\r\n              labelText={`${locales.entries.Lcz_CardBalance}:`}\r\n            ></ir-label>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private checkPaymentCode(value: string) {\r\n    console.log(calendar_data.allowed_payment_methods);\r\n    return calendar_data.allowed_payment_methods?.find(pm => pm.code === value)?.description ?? null;\r\n  }\r\n\r\n  private getPaymentMethod() {\r\n    let paymentMethod = null;\r\n    const payment_code = this.bookingDetails?.extras?.find(e => e.key === 'payment_code');\r\n    if (this.bookingDetails.agent) {\r\n      const code = this.bookingDetails?.extras?.find(e => e.key === 'agent_payment_mode');\r\n      if (code) {\r\n        paymentMethod = code.value === '001' ? locales.entries.Lcz_OnCredit : payment_code ? this.checkPaymentCode(payment_code.value) : null;\r\n      }\r\n    } else {\r\n      if (payment_code) {\r\n        paymentMethod = this.checkPaymentCode(payment_code.value);\r\n      }\r\n    }\r\n    return paymentMethod;\r\n  }\r\n\r\n  _renderDueDate(item: IDueDate) {\r\n    return (\r\n      <tr>\r\n        <td class={'pr-1'}>{_formatDate(item.date)}</td>\r\n        <td class={'pr-1'}>{formatAmount(this.bookingDetails.currency.symbol, item.amount)}</td>\r\n        <td class={'pr-1'}>{item.description}</td>\r\n        <td class=\"collapse font-size-small roomName\">{item.room}</td>\r\n      </tr>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    if (!this.bookingDetails.financial) {\r\n      return null;\r\n    }\r\n    return [\r\n      <div class=\"card m-0\">\r\n        <div class=\"p-1\">\r\n          {this.bookingDetails.financial.gross_cost > 0 && this.bookingDetails.financial.gross_cost !== null && (\r\n            <div class=\"mb-2 h4 total-cost-container\">\r\n              {locales.entries.Lcz_TotalCost}: <span>{formatAmount(this.bookingDetails.currency.symbol, this.bookingDetails.financial.gross_cost)}</span>\r\n            </div>\r\n          )}\r\n          {/* TODO:IMPLEMENT THIS ON BOOKING ACTIONS */}\r\n          <div class=\" h4\">\r\n            {locales.entries.Lcz_Balance}:{' '}\r\n            <span class=\"danger font-weight-bold\">{formatAmount(this.bookingDetails.currency.symbol, this.bookingDetails.financial.due_amount)}</span>\r\n          </div>\r\n          {/* <div class=\" h4\">\r\n            {locales.entries.Lcz_DueBalance}:{' '}\r\n            <span class=\"danger font-weight-bold\">{formatAmount(this.bookingDetails.currency.symbol, this.bookingDetails.financial.due_amount)}</span>\r\n          </div> */}\r\n          {/* TODO:IMPLEMENT THIS ON BOOKING ACTIONS */}\r\n          <div class=\"mb-2 h4\">\r\n            {locales.entries.Lcz_Collected}:{' '}\r\n            <span class=\"\">\r\n              {formatAmount(\r\n                this.bookingDetails.currency.symbol,\r\n                this.bookingDetails.financial.payments ? this.bookingDetails.financial.payments.reduce((prev, curr) => prev + curr.amount, 0) : 0,\r\n              )}\r\n            </span>\r\n          </div>\r\n\r\n          {this.bookingGuarantee()}\r\n          {/* <div class=\"mt-2\">\r\n            <div>\r\n              {this.bookingDetails.financial?.due_dates?.length > 0 && (\r\n                <Fragment>\r\n                  <div class=\"d-flex align-items-center\">\r\n                    <strong class=\"mr-1\">{locales.entries.Lcz_PaymentDueDates}</strong>\r\n                    <ir-button\r\n                      id=\"drawer-icon\"\r\n                      data-toggle=\"collapse\"\r\n                      data-target={`.roomName`}\r\n                      aria-expanded={this.collapsedPayment ? 'true' : 'false'}\r\n                      aria-controls=\"myCollapse\"\r\n                      variant=\"icon\"\r\n                      icon_name={this.collapsedPayment ? 'closed_eye' : 'open_eye'}\r\n                      onClickHandler={() => {\r\n                        this.collapsedPayment = !this.collapsedPayment;\r\n                      }}\r\n                      style={{ '--icon-size': '1.5rem' }}\r\n                    ></ir-button>\r\n                  </div>\r\n\r\n                  <table>{this.bookingDetails.financial.due_dates?.map(item => this._renderDueDate(item))}</table>\r\n                </Fragment>\r\n              )}\r\n            </div>\r\n          </div> */}\r\n          {/* TODO:IMPLEMENT THIS ON BOOKING ACTIONS */}\r\n          {this.paymentActions?.filter(pa => pa.amount !== 0).length > 0 && this.bookingDetails.is_direct && (\r\n            <div class=\"payment_action_beta_container\">\r\n              <p class=\"beta\">Beta</p>\r\n              <ir-payment-actions paymentAction={this.paymentActions} booking={this.bookingDetails}></ir-payment-actions>\r\n            </div>\r\n          )}\r\n          <div class=\"mt-2 d-flex  flex-column rounded payment-container\">\r\n            <div class=\"d-flex align-items-center justify-content-between\">\r\n              <span class={'font-medium'}>{locales.entries.Lcz_Payments} history</span>\r\n              <ir-button\r\n                id=\"add-payment\"\r\n                variant=\"icon\"\r\n                icon_name=\"square_plus\"\r\n                style={{ '--icon-size': '1.5rem' }}\r\n                onClickHandler={() => {\r\n                  this.newTableRow = true;\r\n                }}\r\n              ></ir-button>\r\n            </div>\r\n            <table class=\"mt-1\" style={{ backgroundColor: this.paymentBackground }}>\r\n              <thead>\r\n                <tr>\r\n                  <th class={'border border-light border-bottom-0 text-center payment_date'}>{locales.entries.Lcz_Dates}</th>\r\n                  <th class={'border border-light border-bottom-0 text-center w-60'}>{locales.entries.Lcz_Amount}</th>\r\n                  <th class={'border border-light border-bottom-0 text-center designation'}>{locales.entries.Lcz_Designation}</th>\r\n                  <th class={'border border-light border-bottom-0 text-center action_icons'}>\r\n                    <span class={'sr-only'}>payment actions</span>\r\n                    {/* <ir-button\r\n                      id=\"add-payment\"\r\n                      variant=\"icon\"\r\n                      icon_name=\"square_plus\"\r\n                      onClickHandler={() => {\r\n                        this.newTableRow = true;\r\n                      }}\r\n                    ></ir-button> */}\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {this.bookingDetails.financial.payments?.map((item: any) => this._renderTableRow(item))}\r\n                {this.newTableRow ? this._renderTableRow(null, 'add') : null}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>,\r\n\r\n      <ir-modal\r\n        item={this.toBeDeletedItem}\r\n        class={'delete-record-modal'}\r\n        modalTitle={locales.entries.Lcz_Confirmation}\r\n        modalBody={this.modal_mode === 'delete' ? locales.entries.Lcz_IfDeletedPermantlyLost : locales.entries.Lcz_EnteringAmountGreaterThanDue}\r\n        iconAvailable={true}\r\n        icon=\"ft-alert-triangle danger h1\"\r\n        leftBtnText={locales.entries.Lcz_Cancel}\r\n        rightBtnText={this.modal_mode === 'delete' ? locales.entries.Lcz_Delete : locales.entries.Lcz_Confirm}\r\n        leftBtnColor=\"secondary\"\r\n        rightBtnColor={this.modal_mode === 'delete' ? 'danger' : 'primary'}\r\n        onConfirmModal={this.handleConfirmModal.bind(this)}\r\n        onCancelModal={this.handleCancelModal.bind(this)}\r\n      ></ir-modal>,\r\n    ];\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n\r\n.input-container {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 0 !important;\r\n}\r\n.input-container:focus-within {\r\n  border-color: #1e9ff2;\r\n}\r\n.border-theme {\r\n  border-color: #cacfe7;\r\n}\r\n.input-container input {\r\n  flex: 1;\r\n  border: 0;\r\n}\r\n.input-container input:focus {\r\n  outline: none;\r\n}\r\n.dropdown-trigger {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  background: white;\r\n  border: 0;\r\n  border-right: 1px solid #cacfe7;\r\n}\r\n.ir-dropdown-container {\r\n  position: absolute;\r\n  z-index: 1000;\r\n  bottom: -30px;\r\n  width: 100%;\r\n  left: 0;\r\n  background: white;\r\n}\r\n.input-container label {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin: 0;\r\n  padding: 0 5px;\r\n}\r\n.flag {\r\n  height: 1rem;\r\n  aspect-ratio: 4/3;\r\n  border-radius: 3px;\r\n}\r\n.is-invalid {\r\n  border-color: #ff4961;\r\n}\r\n.phone_prefix_label {\r\n  padding: 0 0.5rem;\r\n  margin: 0;\r\n}\r\n","import { ICountry } from '@/components';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport locales from '@/stores/locales.store';\r\nimport { Component, Element, Event, EventEmitter, Host, Listen, Prop, State, Watch, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-phone-input',\r\n  styleUrl: 'ir-phone-input.css',\r\n  scoped: true,\r\n})\r\nexport class IrPhoneInput {\r\n  @Element() el: HTMLElement;\r\n  @Prop() label: string;\r\n  @Prop() value: string = '';\r\n  @Prop() disabled: boolean = false;\r\n  @Prop() error: boolean = false;\r\n  @Prop() token: string;\r\n  @Prop() language: string;\r\n  @Prop() default_country: number = null;\r\n  @Prop() phone_prefix: string | null = null;\r\n  @Prop() placeholder: string;\r\n  @Prop({ mutable: true }) countries: ICountry[] = [];\r\n  @Prop() testId: string;\r\n\r\n  @Event() textChange: EventEmitter<{ phone_prefix: string; mobile: string }>;\r\n  @State() inputValue: string = '';\r\n  @State() isDropdownVisible: boolean = false;\r\n  @State() currentCountry: ICountry;\r\n\r\n  // private cmp_countries: ICountry[] = [];\r\n\r\n  private bookingService: BookingService = new BookingService();\r\n\r\n  async componentWillLoad() {\r\n    if (this.countries.length === 0) {\r\n      const countries = await this.bookingService.getCountries(this.language);\r\n      this.countries = countries;\r\n    }\r\n    if (this.phone_prefix) {\r\n      this.setCountryFromPhonePrefix();\r\n    } else {\r\n      if (this.default_country) {\r\n        this.setCurrentCountry(this.default_country);\r\n      }\r\n    }\r\n    this.inputValue = this.value;\r\n  }\r\n  @Watch('value')\r\n  handleValueChange(newValue, oldValue) {\r\n    if (newValue !== oldValue) {\r\n      this.inputValue = newValue;\r\n    }\r\n  }\r\n  @Watch('phone_prefix')\r\n  handlePhoneChange(newValue, oldValue) {\r\n    if (newValue !== oldValue) {\r\n      this.setCountryFromPhonePrefix();\r\n    }\r\n  }\r\n  @Listen('click', { target: 'document' })\r\n  handleDocumentClick(event: MouseEvent) {\r\n    const target = event.target as HTMLElement;\r\n    if (!this.el.contains(target)) {\r\n      this.isDropdownVisible = false;\r\n    }\r\n  }\r\n  handleInputChange(e: InputEvent) {\r\n    let inputElement = e.target as HTMLInputElement;\r\n    let inputValue = inputElement.value;\r\n    inputValue = inputValue.replace(/[^+\\d]+/g, '');\r\n    inputElement.value = inputValue;\r\n    this.inputValue = inputValue;\r\n    this.textChange.emit({ phone_prefix: this.currentCountry?.phone_prefix, mobile: this.inputValue });\r\n  }\r\n  private setCountryFromPhonePrefix() {\r\n    let country = this.countries.find(country => country.phone_prefix === this.phone_prefix);\r\n    if (!country) {\r\n      country = this.countries.find(c => c.id.toString() === this.phone_prefix);\r\n      if (!country) {\r\n        return;\r\n      }\r\n    }\r\n    this.currentCountry = { ...country };\r\n    this.textChange.emit({ phone_prefix: this.currentCountry?.phone_prefix, mobile: this.value });\r\n  }\r\n  setCurrentCountry(id: number) {\r\n    const country = this.countries.find(country => country.id === id);\r\n    if (!country) {\r\n      throw new Error('Invalid country id');\r\n    }\r\n    this.currentCountry = { ...country };\r\n    this.textChange.emit({ phone_prefix: this.currentCountry?.phone_prefix, mobile: this.value });\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"form-group mr-0\">\r\n          {/* <p class=\"mb-0\">Phone</p> */}\r\n          <div class=\"input-group row m-0 p-0 position-relative\">\r\n            {this.label && (\r\n              <div class={`input-group-prepend col-3 p-0 text-dark border-none`}>\r\n                <label class={`input-group-text  border-theme flex-grow-1 text-dark  `}>{this.label}</label>\r\n              </div>\r\n            )}\r\n            <div class={'form-control  input-container  flex-fill' + (this.error ? ' is-invalid' : '')}>\r\n              <button onClick={() => (this.isDropdownVisible = !this.isDropdownVisible)} class=\"dropdown-trigger\">\r\n                {this.currentCountry ? <img src={this.currentCountry?.flag} class=\"flag\" /> : <p class=\"p-0 m-0 \">{locales.entries.Lcz_Select}</p>}\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\r\n                  <path d=\"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z\" />\r\n                </svg>\r\n              </button>\r\n\r\n              <p class={'phone_prefix_label'}>{this.currentCountry?.phone_prefix}</p>\r\n              <input\r\n                data-testid={this.testId}\r\n                maxLength={14}\r\n                type=\"text\"\r\n                placeholder={this.placeholder}\r\n                required\r\n                value={this.inputValue}\r\n                disabled={this.disabled}\r\n                onInput={e => this.handleInputChange(e)}\r\n              />\r\n            </div>\r\n            {this.isDropdownVisible && (\r\n              <div class=\"ir-dropdown-container\">\r\n                <ir-combobox\r\n                  onComboboxValueChange={e => {\r\n                    this.setCurrentCountry(+e.detail.data);\r\n                    this.isDropdownVisible = false;\r\n                  }}\r\n                  class=\"bg-white\"\r\n                  autoFocus\r\n                  placeholder=\"Search country\"\r\n                  data={this.countries.map(c => ({\r\n                    id: c.id.toString(),\r\n                    name: `${c.name} (${c.phone_prefix})`,\r\n                    image: c.flag,\r\n                  }))}\r\n                ></ir-combobox>\r\n              </div>\r\n            )}\r\n          </div>\r\n          {/* {this.error && <div class=\"invalid-feedback\">Please enter a valid phone number.</div>} */}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","import axios from 'axios';\r\nimport { TDueParams, TPickupData } from './types';\r\nimport calendar_data from '@/stores/calendar-data';\r\nimport { IBookingPickupInfo } from '@/components';\r\nimport { z, ZodError } from 'zod';\r\nimport { renderTime } from '@/utils/utils';\r\nimport moment from 'moment';\r\n\r\nexport class PickupService {\r\n  public async savePickup(params: TPickupData, booking_nbr: string, is_remove: boolean) {\r\n    try {\r\n      const splitTime = params.arrival_time.split(':');\r\n      await axios.post(`/Do_Pickup`, {\r\n        booking_nbr,\r\n        is_remove,\r\n        currency: params.currency,\r\n        date: params.arrival_date,\r\n        details: params.flight_details,\r\n        hour: splitTime[0],\r\n        minute: splitTime[1],\r\n        nbr_of_units: params.number_of_vehicles,\r\n        selected_option: params.selected_option,\r\n        total: +params.due_upon_booking,\r\n      });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  public transformDefaultPickupData(data: IBookingPickupInfo): TPickupData {\r\n    const arrival_time = data.hour && data.minute ? renderTime(data.hour) + ':' + renderTime(data.minute) : '';\r\n    return {\r\n      arrival_date: data.date,\r\n      arrival_time,\r\n      currency: data.currency,\r\n      due_upon_booking: data.total.toFixed(2),\r\n      flight_details: data.details,\r\n      location: data.selected_option.location.id,\r\n      number_of_vehicles: data.nbr_of_units,\r\n      selected_option: data.selected_option,\r\n      vehicle_type_code: data.selected_option.vehicle.code,\r\n    };\r\n  }\r\n  public getAvailableLocations(message: string) {\r\n    let locations: { value: number; text: string }[] = [];\r\n    calendar_data.pickup_service.allowed_options.forEach(option => {\r\n      if (locations.filter(location => location.value === option.location.id).length === 0) {\r\n        locations.push({\r\n          text: message + ' ' + option.location.description,\r\n          value: option.location.id,\r\n        });\r\n      }\r\n    });\r\n    return locations;\r\n  }\r\n  public createPickupSchema(minDate: string, maxDate: string) {\r\n    return z.object({\r\n      arrival_date: z\r\n        .string()\r\n        .regex(/^\\d{4}-\\d{2}-\\d{2}$/, { message: 'Invalid date format, expected YYYY-MM-DD' })\r\n        .refine(\r\n          dateStr => {\r\n            const date = moment(dateStr, 'YYYY-MM-DD', true);\r\n            const min = moment(minDate, 'YYYY-MM-DD', true);\r\n            const max = moment(maxDate, 'YYYY-MM-DD', true);\r\n            return date.isValid() && min.isValid() && max.isValid() && date.isBetween(min, max, undefined, '[]');\r\n          },\r\n          { message: `arrival_date must be between ${minDate} and ${maxDate}` },\r\n        ),\r\n\r\n      arrival_time: z\r\n        .string()\r\n        .regex(/^\\d{2}:\\d{2}$/, { message: 'Invalid time format. Expected HH:MM' })\r\n        .refine(\r\n          time => {\r\n            const [hours, minutes] = time.split(':').map(Number);\r\n            return hours >= 0 && hours <= 23 && minutes >= 0 && minutes <= 59;\r\n          },\r\n          { message: 'Time values are out of range' },\r\n        ),\r\n      flight_details: z.string().nonempty({ message: 'Flight details cannot be empty' }),\r\n      vehicle_type_code: z.string().nonempty({ message: 'Vehicle type code cannot be empty' }),\r\n      number_of_vehicles: z.coerce.number().min(1, { message: 'At least one vehicle is required' }),\r\n    });\r\n  }\r\n  public validateForm(\r\n    params: TPickupData,\r\n    schema: any, // : { error: boolean; cause?: keyof TPickupData }\r\n  ) {\r\n    try {\r\n      schema.parse(params);\r\n      return null;\r\n    } catch (error) {\r\n      console.log(error);\r\n      const err = {};\r\n      if (error instanceof ZodError) {\r\n        error.issues.forEach(e => {\r\n          err[e.path[0]] = true;\r\n        });\r\n        return err;\r\n      }\r\n    }\r\n    // if (params.arrival_time.split(':').length !== 2) {\r\n    //   return {\r\n    //     error: true,\r\n    //     cause: 'arrival_time',\r\n    //   };\r\n    // }\r\n    // if (params.flight_details === '') {\r\n    //   return {\r\n    //     error: true,\r\n    //     cause: 'flight_details',\r\n    //   };\r\n    // }\r\n    // if (params.vehicle_type_code === '') {\r\n    //   return {\r\n    //     error: true,\r\n    //     cause: 'vehicle_type_code',\r\n    //   };\r\n    // }\r\n    // if (params.number_of_vehicles === 0) {\r\n    //   return {\r\n    //     error: true,\r\n    //     cause: 'number_of_vehicles',\r\n    //   };\r\n    // }\r\n    // return { error: false };\r\n  }\r\n  public getNumberOfVehicles(capacity: number, numberOfPersons: number) {\r\n    let total_number_of_vehicles = Math.ceil(numberOfPersons / capacity);\r\n    let startNumber = total_number_of_vehicles > 1 ? total_number_of_vehicles : 1;\r\n    let bonus_number = total_number_of_vehicles > 1 ? 2 : 3;\r\n    return Array.from({ length: total_number_of_vehicles + bonus_number }, (_, i) => startNumber + i);\r\n  }\r\n  private getPickUpPersonStatus(code: string) {\r\n    const getCodeDescription = calendar_data.pickup_service.allowed_pricing_models.find(model => model.code === code);\r\n    if (!getCodeDescription) {\r\n      return null;\r\n    }\r\n    return getCodeDescription.description;\r\n  }\r\n  public updateDue(params: TDueParams) {\r\n    const getCodeDescription = this.getPickUpPersonStatus(params.code);\r\n    if (!getCodeDescription) {\r\n      return;\r\n    }\r\n    if (getCodeDescription === 'Person') {\r\n      return params.amount * params.numberOfPersons;\r\n    } else {\r\n      return params.amount * params.number_of_vehicles;\r\n    }\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n.custom-card-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  border-bottom: 1px solid #e4e5ec;\r\n}\r\n.card-title {\r\n  flex: 1;\r\n}\r\n.border-theme {\r\n  border: 1px solid #cacfe7;\r\n}\r\n","import calendar_data from '@/stores/calendar-data';\r\nimport locales from '@/stores/locales.store';\r\nimport { Component, Element, Event, EventEmitter, Host, Prop, State, h } from '@stencil/core';\r\nimport { TPickupData } from './types';\r\nimport moment from 'moment';\r\nimport { IAllowedOptions } from '@/models/calendarData';\r\nimport { PickupService } from './pickup.service';\r\nimport { IBookingPickupInfo } from '@/models/booking.dto';\r\nimport { MaskedRange } from 'imask';\r\n\r\n@Component({\r\n  tag: 'ir-pickup',\r\n  styleUrl: 'ir-pickup.css',\r\n  scoped: true,\r\n})\r\nexport class IrPickup {\r\n  @Element() el: HTMLElement;\r\n\r\n  @Prop() defaultPickupData: IBookingPickupInfo | null;\r\n  @Prop() numberOfPersons: number = 0;\r\n  @Prop() bookingNumber: string;\r\n  @Prop() bookingDates: { from: string; to: string };\r\n\r\n  @State() isLoading = false;\r\n  @State() allowedOptionsByLocation: IAllowedOptions[] = [];\r\n  @State() pickupData: TPickupData = {\r\n    location: -1,\r\n    flight_details: '',\r\n    due_upon_booking: '',\r\n    number_of_vehicles: 1,\r\n    vehicle_type_code: '',\r\n    currency: undefined,\r\n    arrival_time: '',\r\n    arrival_date: null,\r\n    selected_option: undefined,\r\n  };\r\n  @State() vehicleCapacity: number[] = [];\r\n  @State() cause: keyof TPickupData | null = null;\r\n  @State() errors: Record<string, boolean>;\r\n  @State() autoValidate = false;\r\n\r\n  @Event() closeModal: EventEmitter<null>;\r\n  @Event() resetBookingEvt: EventEmitter<null>;\r\n\r\n  private pickupService = new PickupService();\r\n  private pickupSchema;\r\n\r\n  private arrival_time_mask = {\r\n    mask: 'HH:mm',\r\n    blocks: {\r\n      HH: {\r\n        mask: MaskedRange,\r\n        from: 0,\r\n        to: 23,\r\n        placeholderChar: 'H',\r\n      },\r\n      mm: {\r\n        mask: MaskedRange,\r\n        from: 0,\r\n        to: 59,\r\n        placeholderChar: 'm',\r\n      },\r\n    },\r\n    lazy: false,\r\n    placeholderChar: '_',\r\n  };\r\n\r\n  componentWillLoad() {\r\n    if (this.defaultPickupData) {\r\n      const transformedData = this.pickupService.transformDefaultPickupData(this.defaultPickupData);\r\n      this.vehicleCapacity = this.pickupService.getNumberOfVehicles(transformedData.selected_option.vehicle.capacity, this.numberOfPersons);\r\n      this.allowedOptionsByLocation = calendar_data.pickup_service.allowed_options.filter(option => option.location.id === transformedData.location);\r\n      this.pickupData = { ...transformedData };\r\n    }\r\n    this.pickupSchema = this.pickupService.createPickupSchema(this.bookingDates.from, this.bookingDates.to);\r\n  }\r\n  private handleLocationChange(event: CustomEvent) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    const value = event.detail;\r\n    if (value === '') {\r\n      this.updatePickupData('location', -1);\r\n    }\r\n    if (value !== '') {\r\n      this.allowedOptionsByLocation = calendar_data.pickup_service.allowed_options.filter(option => option.location.id.toString() === value);\r\n      let locationChoice = this.allowedOptionsByLocation[0];\r\n      if (!locationChoice) {\r\n        return;\r\n      }\r\n      locationChoice.currency;\r\n      this.vehicleCapacity = this.pickupService.getNumberOfVehicles(locationChoice.vehicle.capacity, this.numberOfPersons);\r\n      this.pickupData = {\r\n        ...this.pickupData,\r\n        location: value,\r\n        selected_option: locationChoice,\r\n        number_of_vehicles: this.vehicleCapacity[0],\r\n        due_upon_booking: this.pickupService\r\n          .updateDue({\r\n            amount: locationChoice.amount,\r\n            code: locationChoice.pricing_model.code,\r\n            numberOfPersons: this.numberOfPersons,\r\n            number_of_vehicles: this.vehicleCapacity[0],\r\n          })\r\n          .toFixed(2),\r\n        vehicle_type_code: locationChoice.vehicle.code,\r\n        currency: locationChoice.currency,\r\n        // number_of_vehicles:this.pickupService\r\n      };\r\n    }\r\n  }\r\n\r\n  private handleVehicleQuantityChange(e: CustomEvent) {\r\n    if (e.detail === '') {\r\n      return;\r\n    }\r\n    const value = +e.detail;\r\n    this.pickupData = {\r\n      ...this.pickupData,\r\n      number_of_vehicles: value,\r\n      due_upon_booking: this.pickupService\r\n        .updateDue({\r\n          amount: this.pickupData.selected_option.amount,\r\n          code: this.pickupData.selected_option.pricing_model.code,\r\n          numberOfPersons: this.numberOfPersons,\r\n          number_of_vehicles: value,\r\n        })\r\n        .toFixed(2),\r\n    };\r\n  }\r\n\r\n  private handleVehicleTypeChange(e: CustomEvent) {\r\n    if (e.detail === '') {\r\n      this.pickupData = {\r\n        ...this.pickupData,\r\n        due_upon_booking: '',\r\n        vehicle_type_code: '',\r\n      };\r\n      return;\r\n    }\r\n    let locationChoice = calendar_data.pickup_service.allowed_options.find(option => option.location.id === +this.pickupData.location && option.vehicle.code === e.detail);\r\n    if (!locationChoice) {\r\n      return;\r\n    }\r\n    this.vehicleCapacity = [...this.pickupService.getNumberOfVehicles(locationChoice.vehicle.capacity, this.numberOfPersons)];\r\n    this.pickupData = {\r\n      ...this.pickupData,\r\n      selected_option: locationChoice,\r\n      number_of_vehicles: this.vehicleCapacity[0],\r\n      due_upon_booking: this.pickupService\r\n        .updateDue({\r\n          amount: locationChoice.amount,\r\n          code: locationChoice.pricing_model.code,\r\n          numberOfPersons: this.numberOfPersons,\r\n          number_of_vehicles: this.vehicleCapacity[0],\r\n        })\r\n        .toFixed(2),\r\n      vehicle_type_code: locationChoice.vehicle.code,\r\n    };\r\n  }\r\n\r\n  private updatePickupData(key: keyof TPickupData, value: any) {\r\n    this.pickupData = { ...this.pickupData, [key]: value };\r\n  }\r\n  private async savePickup() {\r\n    try {\r\n      this.isLoading = true;\r\n      this.autoValidate = true;\r\n      if (this.errors) {\r\n        this.errors = null;\r\n      }\r\n      this.errors = this.pickupService.validateForm(this.pickupData, this.pickupSchema);\r\n      if (this.errors) {\r\n        return;\r\n      }\r\n      await this.pickupService.savePickup(this.pickupData, this.bookingNumber, this.defaultPickupData !== null && this.pickupData.location === -1);\r\n      this.resetBookingEvt.emit(null);\r\n      this.closeModal.emit(null);\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <Host class={'p-0'}>\r\n        <ir-title class=\"px-1\" onCloseSideBar={() => this.closeModal.emit(null)} label={locales.entries.Lcz_Pickup} displayContext=\"sidebar\"></ir-title>\r\n        <section class={'px-1'}>\r\n          <ir-select\r\n            testId=\"pickup_location\"\r\n            selectedValue={this.pickupData.location}\r\n            selectContainerStyle=\"mb-1\"\r\n            onSelectChange={this.handleLocationChange.bind(this)}\r\n            firstOption={locales.entries.Lcz_Pickup_NoThankYou}\r\n            class={'m-0 mb-1'}\r\n            LabelAvailable={false}\r\n            data={this.pickupService.getAvailableLocations(locales.entries.Lcz_Pickup_YesFrom) as any}\r\n          ></ir-select>\r\n          {this.pickupData.location > 0 && (\r\n            <div class=\"m-0 p-0\" data-testid=\"pickup_body\">\r\n              {/*Date and Time Picker container */}\r\n              <div class={'d-flex'}>\r\n                {/*Date Picker */}\r\n                <div class=\"form-group  mr-1\">\r\n                  <div class=\"input-group row m-0\">\r\n                    <div class={`input-group-prepend col-5 p-0 text-dark border-0`}>\r\n                      <label class={`input-group-text  flex-grow-1 text-dark border-theme `}>{locales.entries.Lcz_ArrivalDate}</label>\r\n                    </div>\r\n                    <div class=\"form-control  form-control-md col-7 d-flex align-items-center px-0 mx-0\" style={{ border: '0' }}>\r\n                      <ir-date-picker\r\n                        data-testid=\"pickup_arrival_date\"\r\n                        date={this.pickupData.arrival_date}\r\n                        minDate={this.bookingDates.from}\r\n                        maxDate={this.bookingDates?.to}\r\n                        emitEmptyDate={true}\r\n                        aria-invalid={this.errors?.arrival_date && !this.pickupData.arrival_date ? 'true' : 'false'}\r\n                        onDateChanged={evt => {\r\n                          this.updatePickupData('arrival_date', evt.detail.start?.format('YYYY-MM-DD'));\r\n                        }}\r\n                      >\r\n                        <input\r\n                          type=\"text\"\r\n                          slot=\"trigger\"\r\n                          value={this.pickupData.arrival_date ? moment(this.pickupData.arrival_date).format('MMM DD, YYYY') : null}\r\n                          class={`form-control input-sm ${this.errors?.arrival_date && !this.pickupData.arrival_date ? 'border-danger' : ''} text-center`}\r\n                          style={{ borderTopLeftRadius: '0', borderBottomLeftRadius: '0', width: '100%' }}\r\n                        ></input>\r\n                      </ir-date-picker>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                {/*Time Picker */}\r\n                <ir-input-text\r\n                  autoValidate={this.autoValidate}\r\n                  wrapKey=\"arrival_time\"\r\n                  testId=\"pickup_arrival_time\"\r\n                  error={this.errors?.arrival_time}\r\n                  value={this.pickupData.arrival_time}\r\n                  zod={this.pickupSchema.pick({ arrival_time: true })}\r\n                  label={locales.entries.Lcz_Time}\r\n                  inputStyles=\"col-sm-4\"\r\n                  data-state={this.cause === 'arrival_time' ? 'error' : ''}\r\n                  mask={this.arrival_time_mask}\r\n                  onTextChange={e => this.updatePickupData('arrival_time', e.detail)}\r\n                ></ir-input-text>\r\n              </div>\r\n              <ir-input-text\r\n                wrapKey=\"flight_details\"\r\n                zod={this.pickupSchema.pick({ flight_details: true })}\r\n                autoValidate={this.autoValidate}\r\n                testId=\"pickup_flight_details\"\r\n                value={this.pickupData.flight_details}\r\n                label={locales.entries.Lcz_FlightDetails}\r\n                onTextChange={e => this.updatePickupData('flight_details', e.detail)}\r\n                placeholder=\"\"\r\n                error={this.errors?.flight_details}\r\n              ></ir-input-text>\r\n              <ir-select\r\n                testId=\"pickup_vehicle_type_code\"\r\n                selectContainerStyle=\"mb-1\"\r\n                error={this.cause === 'vehicle_type_code'}\r\n                onSelectChange={this.handleVehicleTypeChange.bind(this)}\r\n                firstOption={locales.entries.Lcz_Select}\r\n                selectedValue={this.pickupData.vehicle_type_code}\r\n                class={'m-0'}\r\n                LabelAvailable={false}\r\n                data={\r\n                  this.allowedOptionsByLocation.map(option => ({\r\n                    text: option.vehicle.description,\r\n                    value: option.vehicle.code,\r\n                  })) as any\r\n                }\r\n              ></ir-select>\r\n              <div class={'d-flex flex-column flex-md-row'}>\r\n                <ir-select\r\n                  showFirstOption={false}\r\n                  testId=\"pickup_number_of_vehicles\"\r\n                  labelBorder=\"theme\"\r\n                  selectContainerStyle=\"mb-1\"\r\n                  onSelectChange={this.handleVehicleQuantityChange.bind(this)}\r\n                  selectedValue={this.pickupData.number_of_vehicles}\r\n                  error={this.cause === 'number_of_vehicles'}\r\n                  labelWidth={7}\r\n                  class={'m-0  mb-md-0 mr-md-1 flex-fill'}\r\n                  label={locales.entries.Lcz_NbrOfVehicles}\r\n                  data={\r\n                    this.vehicleCapacity.map(i => ({\r\n                      text: i,\r\n                      value: i,\r\n                    })) as any\r\n                  }\r\n                ></ir-select>\r\n                <ir-input-text\r\n                  labelBorder=\"theme\"\r\n                  readonly\r\n                  value={this.pickupData.due_upon_booking}\r\n                  labelWidth={7}\r\n                  label={`${locales.entries.Lcz_DueUponBooking}  ${this.pickupData.currency.symbol}`}\r\n                  placeholder=\"\"\r\n                  class=\"\"\r\n                ></ir-input-text>\r\n              </div>\r\n            </div>\r\n          )}\r\n          <div class={'d-flex flex-column flex-sm-row mt-3'}>\r\n            <ir-button\r\n              onClick={() => this.closeModal.emit(null)}\r\n              btn_styles=\"justify-content-center\"\r\n              class={`mb-1 mb-sm-0 flex-fill  ${this.defaultPickupData || this.pickupData.location !== -1 ? 'mr-sm-1' : ''}`}\r\n              icon=\"\"\r\n              text={locales.entries.Lcz_Cancel}\r\n              btn_color=\"secondary\"\r\n            ></ir-button>\r\n            {(this.defaultPickupData || this.pickupData.location !== -1) && (\r\n              <ir-button\r\n                btn_styles=\"justify-content-center align-items-center\"\r\n                class={'m-0 flex-fill text-center'}\r\n                icon=\"\"\r\n                isLoading={this.isLoading}\r\n                text={locales.entries.Lcz_Save}\r\n                btn_color=\"primary\"\r\n                onClick={this.savePickup.bind(this)}\r\n              ></ir-button>\r\n            )}\r\n          </div>\r\n        </section>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n","import calendar_data from '@/stores/calendar-data';\r\nimport locales from '@/stores/locales.store';\r\nimport { Component, Host, Prop, h } from '@stencil/core';\r\nimport { _formatTime } from '../functions';\r\nimport moment from 'moment';\r\nimport { colorVariants } from '@/components/ui/ir-icons/icons';\r\nimport { Booking } from '@/models/booking.dto';\r\n@Component({\r\n  tag: 'ir-pickup-view',\r\n  styleUrl: 'ir-pickup-view.css',\r\n  scoped: true,\r\n})\r\nexport class IrPickupView {\r\n  @Prop() booking: Booking;\r\n  render() {\r\n    if (!calendar_data.pickup_service.is_enabled || !this.booking.is_editable) {\r\n      return null;\r\n    }\r\n    return (\r\n      <Host>\r\n        <div class=\"mb-1\">\r\n          <div class={'d-flex w-100 mb-1 align-items-center justify-content-between'}>\r\n            <p class={'font-size-large p-0 m-0 '}>{locales.entries.Lcz_Pickup}</p>\r\n            <ir-button id=\"pickup\" data-testid=\"new_pickup_btn\" variant=\"icon\" icon_name=\"edit\" style={{ ...colorVariants.secondary, '--icon-size': '1.5rem' }}></ir-button>\r\n          </div>\r\n          {this.booking.pickup_info && (\r\n            <div class={'card'}>\r\n              <div class={'p-1'}>\r\n                <div class={'d-flex align-items-center py-0 my-0 pickup-margin'}>\r\n                  <p class={'font-weight-bold mr-1 py-0 my-0'}>\r\n                    {locales.entries.Lcz_Date}: <span class={'font-weight-normal'}>{moment(this.booking.pickup_info.date, 'YYYY-MM-DD').format('MMM DD, YYYY')}</span>\r\n                  </p>\r\n                  {this.booking.pickup_info.hour && this.booking.pickup_info.minute && (\r\n                    <p class={'font-weight-bold flex-fill py-0 my-0'}>\r\n                      {locales.entries.Lcz_Time}:\r\n                      <span class={'font-weight-normal'}> {_formatTime(this.booking.pickup_info.hour.toString(), this.booking.pickup_info.minute.toString())}</span>\r\n                    </p>\r\n                  )}\r\n                  <p class={'font-weight-bold py-0 my-0'}>\r\n                    {locales.entries.Lcz_DueUponBooking}:{' '}\r\n                    <span class={'font-weight-normal'}>\r\n                      {this.booking.pickup_info.currency.symbol}\r\n                      {this.booking.pickup_info.total}\r\n                    </span>\r\n                  </p>\r\n                </div>\r\n                <p class={'font-weight-bold py-0 my-0'}>\r\n                  {locales.entries.Lcz_FlightDetails}:<span class={'font-weight-normal'}> {`${this.booking.pickup_info.details}`}</span>\r\n                </p>\r\n                <p class={'py-0 my-0 pickup-margin'}>{`${this.booking.pickup_info.selected_option.vehicle.description}`}</p>\r\n                <p class={'font-weight-bold py-0 my-0 pickup-margin'}>\r\n                  {locales.entries.Lcz_NbrOfVehicles}:<span class={'font-weight-normal'}> {`${this.booking.pickup_info.nbr_of_units}`}</span>\r\n                </p>\r\n                <p class={'small py-0 my-0 pickup-margin'}>\r\n                  {calendar_data.pickup_service.pickup_instruction.description}\r\n                  {calendar_data.pickup_service.pickup_cancelation_prepayment.description}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n.dialog-container-height {\r\n  height: 4rem;\r\n}\r\n.list-title {\r\n  margin: 0;\r\n  padding: 0;\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n  width: fit-content;\r\n}\r\n.list-item {\r\n  margin: 0;\r\n  padding: 0;\r\n  font-size: 14px;\r\n  margin-left: 5px;\r\n  width: fit-content;\r\n}\r\n.list-item.green {\r\n  color: #629a4c;\r\n  font-weight: 600;\r\n}\r\n.list-item.red {\r\n  color: #ff4961;\r\n  font-weight: 600;\r\n}\r\n","import { Component, h, Prop, State } from '@stencil/core';\r\nimport { _formatTime } from '../../functions';\r\nimport locales from '@/stores/locales.store';\r\nimport { IPmsLog } from '@/models/booking.dto';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\nimport { BookingService } from '@/services/booking.service';\r\n\r\n@Component({\r\n  tag: 'ir-pms-logs',\r\n  styleUrl: 'ir-pms-logs.css',\r\n  scoped: true,\r\n})\r\nexport class IrPmsLogs {\r\n  @Prop() bookingNumber: string;\r\n\r\n  @State() pmsLogs: IPmsLog;\r\n\r\n  private bookingService = new BookingService();\r\n\r\n  componentWillLoad() {\r\n    this.init();\r\n  }\r\n\r\n  private async init() {\r\n    try {\r\n      this.pmsLogs = await this.bookingService.fetchPMSLogs(this.bookingNumber);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div class=\"p-1\">\r\n        <h3 class=\" text-left mb-1 dialog-title \">{locales.entries.Lcz_PMS_Logs}</h3>\r\n\r\n        {isRequestPending('/Get_Exposed_PMS_Logs') ? (\r\n          <div class={'d-flex align-items-center justify-content-center dialog-container-height'}>\r\n            <ir-spinner></ir-spinner>\r\n          </div>\r\n        ) : (\r\n          <div class={'dialog-container-height'}>\r\n            <div class=\"d-flex align-items-center \" style={{ paddingBottom: '0.5rem' }}>\r\n              <p class=\"list-title p-0 m-0\">{locales.entries.Lcz_SentAt}</p>\r\n              {this.pmsLogs?.sent_date ? (\r\n                <p class=\"list-item\">\r\n                  {this.pmsLogs?.sent_date} {_formatTime(this.pmsLogs?.sent_hour.toString(), this.pmsLogs?.sent_minute.toString())}\r\n                </p>\r\n              ) : (\r\n                <p class={`list-item ${this.pmsLogs?.sent_date ? 'green' : 'red'}`}>{this.pmsLogs?.is_acknowledged ? locales.entries.Lcz_YES : locales.entries.Lcz_NO}</p>\r\n              )}\r\n            </div>\r\n            <div class=\"d-flex align-items-center p-0 m-0\">\r\n              <h4 class=\"list-title p-0 m-0\">{locales.entries.Lcz_Acknowledged}</h4>\r\n              <p class={`list-item  ${this.pmsLogs?.is_acknowledged ? 'green' : 'red'}`}>{this.pmsLogs?.is_acknowledged ? locales.entries.Lcz_YES : locales.entries.Lcz_NO}</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  --ir-input-border-color: #cacfe7;\r\n  flex: 1 1 0%;\r\n}\r\n\r\n:host .input-group-text {\r\n  border-color: var(--ir-input-border-color);\r\n}\r\n:host .form-control,\r\n.currency-label {\r\n  font-size: 14px !important;\r\n}\r\n\r\n.ir-bl-lbl-none,\r\n.ir-bl-input-none {\r\n  border-top-left-radius: 0 !important;\r\n  border-bottom-left-radius: 0 !important;\r\n}\r\n.ir-br-lbl-none,\r\n.ir-br-input-none {\r\n  border-top-right-radius: 0 !important;\r\n  border-bottom-right-radius: 0 !important;\r\n}\r\n.ir-br-none {\r\n  border-right: none;\r\n}\r\n.ir-bl-none {\r\n  border-left: none;\r\n}\r\n\r\n.rate-input-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  box-sizing: border-box;\r\n  flex: 1;\r\n  padding: 0 !important;\r\n}\r\n:host([class='special-style']) .rate-input {\r\n  background: black !important;\r\n}\r\n.rate-input {\r\n  font-size: 0.875rem;\r\n  line-height: 0;\r\n  padding: 0;\r\n  height: 0;\r\n  box-sizing: border-box;\r\n  border-left: 0;\r\n  padding-left: 0px !important;\r\n  border-top-left-radius: 0 !important;\r\n  border-bottom-left-radius: 0 !important;\r\n}\r\n\r\n.currency-label.with-label {\r\n  border-radius: 0;\r\n}\r\n\r\n.currency-label {\r\n  box-sizing: border-box;\r\n  color: #3b4781;\r\n  border: 1px solid #cacfe7;\r\n  font-size: 0.875rem;\r\n  height: 2rem;\r\n  background: white;\r\n  border-right: 0;\r\n  border-top-right-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n  pointer-events: none;\r\n  transition: border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n}\r\n.currency-label.disabled,\r\n.rate-input:disabled {\r\n  background-color: #eceff1;\r\n  border-color: rgba(118, 118, 118, 0.3);\r\n}\r\n\r\n.price-input-group:focus-within .currency-label {\r\n  border-top: 1px solid #1e9ff2;\r\n  border-bottom: 1px solid #1e9ff2;\r\n  border-left: 1px solid #1e9ff2;\r\n}\r\n:host([data-state='error']) .currency-label,\r\n:host([data-state='error']) .rate-input,\r\n.error {\r\n  border-color: var(--red, #ff4961) !important;\r\n}\r\n.price-input:focus {\r\n  border-right-width: 1px !important;\r\n}\r\n\r\n.is-invalid {\r\n  background-image: none !important;\r\n}\r\n","import { Component, Element, Event, EventEmitter, Prop, State, h } from '@stencil/core';\r\nimport { v4 } from 'uuid';\r\nimport { ZodType } from 'zod';\r\nimport IMask, { InputMask } from 'imask';\r\n@Component({\r\n  tag: 'ir-price-input',\r\n  styleUrl: 'ir-price-input.css',\r\n  scoped: true,\r\n})\r\nexport class IrPriceInput {\r\n  @Element() el: HTMLIrPriceInputElement;\r\n\r\n  /** The label for the input, optional */\r\n  @Prop() label?: string;\r\n\r\n  /** Extra classnames for the input, optional */\r\n  @Prop() inputStyle?: string;\r\n\r\n  /** Extra classnames for the label, optional */\r\n  @Prop() labelStyle?: string;\r\n\r\n  /** The disabled for the input, optional */\r\n  @Prop() disabled?: boolean;\r\n\r\n  /** The Currency for the input, optional */\r\n  @Prop() currency?: string;\r\n\r\n  /** The AutoValidate for the input, optional */\r\n  @Prop() autoValidate?: boolean = true;\r\n\r\n  /** Indicates the key to wrap the value (e.g., 'price' or 'cost') */\r\n  @Prop() wrapKey?: string;\r\n\r\n  /**\r\n   * A Zod schema for validating the input\r\n   * Example: z.coerce.number()\r\n   */\r\n  @Prop() zod?: ZodType<any, any>;\r\n\r\n  /** Placeholder text for the input */\r\n  @Prop() placeholder: string = '';\r\n\r\n  /** Initial value for the input */\r\n  @Prop({ mutable: true }) value: string = '';\r\n\r\n  /** Whether the input is required */\r\n  @Prop() required: boolean = false;\r\n\r\n  /** Minimum value for the price */\r\n  @Prop() minValue?: number;\r\n\r\n  /** Maximum value for the price */\r\n  @Prop() maxValue?: number;\r\n\r\n  /** Unique id for testing */\r\n  @Prop() testId?: string;\r\n\r\n  /** Error*/\r\n  @State() error: boolean;\r\n\r\n  /** Emits the current value on change */\r\n  @Event() textChange: EventEmitter<string>;\r\n\r\n  /** Emits the current value on blur */\r\n  @Event() inputBlur: EventEmitter<string>;\r\n\r\n  /** Emits the current value on focus */\r\n  @Event() inputFocus: EventEmitter<void>;\r\n\r\n  private id: string;\r\n\r\n  private opts = {\r\n    mask: Number,\r\n    scale: 2,\r\n    radix: '.',\r\n    mapToRadix: [','],\r\n    normalizeZeros: true,\r\n    padFractionalZeros: true,\r\n    thousandsSeparator: ',',\r\n  };\r\n  private mask: InputMask<any>;\r\n  private inputRef: HTMLInputElement;\r\n\r\n  componentWillLoad() {\r\n    if (this.el.id) {\r\n      this.id = this.el.id;\r\n    } else {\r\n      this.id = v4();\r\n    }\r\n  }\r\n\r\n  componentDidLoad() {\r\n    if (!this.mask) {\r\n      this.initializeMask();\r\n    }\r\n  }\r\n\r\n  private initializeMask() {\r\n    // Create options object with min/max if provided\r\n    const maskOpts = {\r\n      ...this.opts,\r\n    };\r\n\r\n    if (this.minValue !== undefined) {\r\n      maskOpts['min'] = this.minValue;\r\n    }\r\n\r\n    if (this.maxValue !== undefined) {\r\n      maskOpts['max'] = this.maxValue;\r\n    }\r\n\r\n    this.mask = IMask(this.inputRef, maskOpts);\r\n\r\n    // Set initial value if provided\r\n    if (this.value) {\r\n      this.mask.value = this.value;\r\n    }\r\n\r\n    this.mask.on('accept', () => {\r\n      const isEmpty = this.inputRef.value.trim() === '' || this.mask.unmaskedValue === '';\r\n      if (isEmpty) {\r\n        this.value = '';\r\n        this.textChange.emit(null);\r\n      } else {\r\n        this.value = this.mask.unmaskedValue;\r\n        this.textChange.emit(this.value);\r\n      }\r\n    });\r\n  }\r\n\r\n  private hasSpecialClass(className: string): boolean {\r\n    return this.el.classList.contains(className);\r\n  }\r\n\r\n  private validateInput(value: string): void {\r\n    if (!this.autoValidate) {\r\n      return;\r\n    }\r\n    if (this.zod) {\r\n      try {\r\n        this.zod.parse(this.wrapKey ? { [this.wrapKey]: value } : value); // Validate the value using the Zod schema\r\n        this.error = false; // Clear the error if valid\r\n      } catch (error) {\r\n        console.log(error);\r\n        this.error = true; // Set the error message\r\n      }\r\n    }\r\n  }\r\n\r\n  private handleInputChange = (): void => {\r\n    // The value is already being updated by the mask's 'accept' event\r\n    // Just validate here if needed\r\n    this.validateInput(this.value);\r\n  };\r\n\r\n  private handleBlur = (): void => {\r\n    this.validateInput(this.value);\r\n\r\n    // Format to 2 decimal places on blur\r\n    if (this.value) {\r\n      const numValue = parseFloat(this.value);\r\n      this.value = numValue.toFixed(2);\r\n\r\n      // Update the mask value to show the formatted value\r\n      if (this.mask) {\r\n        this.mask.value = this.value;\r\n      }\r\n    }\r\n\r\n    // Emit the blur event\r\n    this.inputBlur.emit(this.value);\r\n  };\r\n\r\n  private handleFocus = (): void => {\r\n    // Emit the focus event\r\n    this.inputFocus.emit();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <fieldset class=\"input-group price-input-group m-0 p-0\">\r\n        {this.label && (\r\n          <div class=\"input-group-prepend\">\r\n            <span\r\n              class={`input-group-text \r\n                ${this.labelStyle}\r\n              ${this.hasSpecialClass('ir-bl-lbl-none') ? 'ir-bl-lbl-none' : ''}\r\n              ${this.hasSpecialClass('ir-br-lbl-none') ? 'ir-br-lbl-none' : ''}\r\n              ${this.hasSpecialClass('ir-br-none') ? 'ir-br-none' : ''} \r\n              ${this.hasSpecialClass('ir-bl-none') ? 'ir-bl-none' : ''} \r\n              `}\r\n            >\r\n              <label class={'p-0 m-0 '} htmlFor={this.id}>\r\n                {this.label}\r\n              </label>\r\n            </span>\r\n          </div>\r\n        )}\r\n        <div class=\"position-relative has-icon-left rate-input-container\">\r\n          {this.currency && (\r\n            <div class={`input-group-prepend`}>\r\n              <span class={`input-group-text ${this.disabled ? 'disabled' : ''} currency-label ${this.error ? 'error' : ''} ${this.label ? 'with-label' : ''}`}>\r\n                {this.currency}\r\n              </span>\r\n            </div>\r\n          )}\r\n          <input\r\n            ref={el => (this.inputRef = el)}\r\n            data-testid={this.testId}\r\n            disabled={this.disabled}\r\n            id={this.id}\r\n            class={`form-control input-sm rate-input \r\n              ${this.inputStyle}\r\n              ${this.hasSpecialClass('ir-br-input-none') ? 'ir-br-input-none' : ''} \r\n              ${this.hasSpecialClass('ir-bl-input-none') ? 'ir-bl-input-none' : ''} \r\n              ${this.error ? 'error' : ''} py-0 m-0 ${this.currency ? 'ir-bl-none' : ''}`}\r\n            onInput={this.handleInputChange}\r\n            onBlur={this.handleBlur}\r\n            onFocus={this.handleFocus}\r\n            type=\"text\"\r\n            placeholder={this.placeholder}\r\n            aria-label={this.el.ariaLabel ?? 'price-input'}\r\n            aria-describedby={this.el.ariaDescription ?? 'price-input'}\r\n          />\r\n        </div>\r\n      </fieldset>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  --ir-range-gap: 0.5rem;\r\n}\r\n\r\n.range-picker__container {\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: var(--ir-range-gap);\r\n  box-sizing: border-box;\r\n}\r\n.range-picker__container.focused {\r\n  border-bottom-color: rgb(198, 206, 231);\r\n  border-left-color: rgb(198, 206, 231);\r\n  border-right-color: rgb(198, 206, 231);\r\n  border-top-color: rgb(198, 206, 231);\r\n  color: #4e5154;\r\n  background-color: #fff;\r\n  border-color: var(--blue, #1e9ff2);\r\n  outline: 0;\r\n  -webkit-box-shadow: none;\r\n  box-shadow: none;\r\n}\r\n\r\n.range-picker__icon--hidden,\r\n.range-picker__date-picker--hidden {\r\n  opacity: 0;\r\n}\r\n\r\n.range-picker__overlay {\r\n  position: absolute;\r\n  inset: 0;\r\n  background-color: white;\r\n  z-index: 1;\r\n  display: none;\r\n  pointer-events: none;\r\n  padding: 0;\r\n  margin: 0;\r\n  cursor: pointer;\r\n  gap: var(--ir-range-gap);\r\n}\r\n\r\n.range-picker__overlay--active {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  pointer-events: auto;\r\n  border-radius: inherit;\r\n  padding-inline: 0.5rem;\r\n}\r\n.range-picker__date-picker:hover .range-picker__date-picker-button,\r\n.range-picker__date-picker.focused .range-picker__date-picker-button {\r\n  color: var(--blue, #1e9ff2);\r\n}\r\n.range-picker__date-picker-button {\r\n  background: inherit;\r\n  margin: 0;\r\n  padding: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 0.975rem;\r\n  line-height: 1.45;\r\n  height: 2rem;\r\n  color: #3b4781;\r\n  white-space: nowrap;\r\n  cursor: pointer;\r\n  padding-inline: 0.5rem;\r\n}\r\n/* Optional: additional styles for the icons if needed */\r\n.range-picker__calendar-icon,\r\n.range-picker__arrow-icon {\r\n  height: 14px;\r\n  width: 14px;\r\n}\r\n","import { Component, Host, Listen, Prop, Event, EventEmitter, h } from '@stencil/core';\r\nimport moment, { Moment } from 'moment';\r\n\r\n@Component({\r\n  tag: 'ir-range-picker',\r\n  styleUrl: 'ir-range-picker.css',\r\n  scoped: true,\r\n})\r\nexport class IrRangePicker {\r\n  /**\r\n   * The earliest date that can be selected.\r\n   */\r\n  @Prop() minDate?: string | Date;\r\n\r\n  /**\r\n   * The latest date that can be selected.\r\n   */\r\n  @Prop() maxDate?: string | Date = moment().toDate();\r\n  /**\r\n   * The start date of the range.\r\n   */\r\n  @Prop() fromDate: Moment;\r\n  /**\r\n   * The end date of the range.\r\n   */\r\n  @Prop() toDate: Moment;\r\n\r\n  /**\r\n   * Whether to show the overlay before the date is selected.\r\n   */\r\n  @Prop() withOverlay: boolean = true;\r\n  /**\r\n   * Whether to all the emitted dates to be null.\r\n   */\r\n  @Prop() allowNullDates: boolean = true;\r\n\r\n  @Event() dateRangeChanged: EventEmitter<{ fromDate: Moment; toDate: Moment }>;\r\n\r\n  private minSelectableDate = moment().subtract(90, 'days').toDate();\r\n  private fromDatePicker: HTMLIrDatePickerElement;\r\n  private toDatePicker: HTMLIrDatePickerElement;\r\n  private date_container: HTMLDivElement;\r\n  private focusTimeout: NodeJS.Timeout;\r\n\r\n  @Listen('dateChanged')\r\n  async handleDateChanged(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    console.log(e.detail);\r\n    const selectedDate = e.detail.start ? moment(e.detail.start) : null;\r\n    if ((e.target as HTMLElement).id === 'fromDate') {\r\n      let updatedToDate = this.toDate;\r\n      if (!selectedDate) {\r\n        this.dateRangeChanged.emit({ fromDate: null, toDate: null });\r\n        return;\r\n      }\r\n      if (!updatedToDate || updatedToDate.isBefore(selectedDate, 'day')) {\r\n        updatedToDate = selectedDate;\r\n      }\r\n\r\n      this.dateRangeChanged.emit({ fromDate: selectedDate, toDate: updatedToDate });\r\n      await this.toDatePicker.openDatePicker();\r\n    } else {\r\n      if (!selectedDate) {\r\n        this.dateRangeChanged.emit({ fromDate: this.fromDate, toDate: this.fromDate });\r\n        return;\r\n      }\r\n      this.dateRangeChanged.emit({ fromDate: this.fromDate, toDate: selectedDate });\r\n    }\r\n  }\r\n  @Listen('datePickerFocus')\r\n  handleDatePickerFocus(e: CustomEvent) {\r\n    e.stopPropagation();\r\n    clearTimeout(this.focusTimeout);\r\n    this.date_container.classList.add('focused');\r\n    (e.target as HTMLIrRangePickerElement).classList.add('focused');\r\n  }\r\n  @Listen('datePickerBlur')\r\n  handleDatePickerBlur(e: CustomEvent) {\r\n    e.stopPropagation();\r\n    (e.target as HTMLIrRangePickerElement).classList.remove('focused');\r\n    this.focusTimeout = setTimeout(() => {\r\n      this.date_container.classList.remove('focused');\r\n    }, 10);\r\n  }\r\n  disconnectedCallback() {\r\n    clearTimeout(this.focusTimeout);\r\n  }\r\n  private renderDatePicker(id: string, date: Moment, minDate: string | Date, refCallback: (el: HTMLIrDatePickerElement) => void, additionalProps: any = {}) {\r\n    return (\r\n      <ir-date-picker\r\n        class={{\r\n          'range-picker__date-picker': true,\r\n          'range-picker__date-picker--hidden': this.withOverlay && !this.fromDate,\r\n        }}\r\n        customPicker\r\n        ref={el => refCallback(el)}\r\n        minDate={minDate}\r\n        maxDate={this.maxDate}\r\n        date={date?.toDate()}\r\n        id={id}\r\n        emitEmptyDate={this.allowNullDates}\r\n        {...additionalProps}\r\n      >\r\n        <p class=\"range-picker__date-picker-button\" slot=\"trigger\">\r\n          {date?.format('YYYY-MM-DD') ?? '2025-03-02'}\r\n        </p>\r\n      </ir-date-picker>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"form-control range-picker__container\" ref={el => (this.date_container = el)}>\r\n          {this.withOverlay && (\r\n            <div\r\n              class={{\r\n                'range-picker__overlay': true,\r\n                'range-picker__overlay--active': !this.fromDate,\r\n              }}\r\n              onClick={() => this.fromDatePicker.openDatePicker()}\r\n            >\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\" style={{ height: '14px', width: '14px' }}>\r\n                <path\r\n                  fill=\"currentColor\"\r\n                  d=\"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z\"\r\n                ></path>\r\n              </svg>\r\n              <p class=\"m-0\">\r\n                <slot name=\"message\">Cleaned on</slot>\r\n              </p>\r\n            </div>\r\n          )}\r\n          <svg\r\n            class={{\r\n              'range-picker__calendar-icon': true,\r\n              'range-picker__icon--hidden': this.withOverlay && !this.fromDate,\r\n            }}\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            viewBox=\"0 0 448 512\"\r\n            style={{ height: '14px', width: '14px' }}\r\n          >\r\n            <path\r\n              fill=\"currentColor\"\r\n              d=\"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z\"\r\n            ></path>\r\n          </svg>\r\n          {this.renderDatePicker('fromDate', this.fromDate, this.minDate, el => (this.fromDatePicker = el))}\r\n          <svg\r\n            class={{\r\n              'range-picker__arrow-icon': true,\r\n              'range-picker__icon--hidden': this.withOverlay && !this.fromDate,\r\n            }}\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            height=\"14\"\r\n            width=\"14\"\r\n            viewBox=\"0 0 512 512\"\r\n          >\r\n            <path\r\n              fill=\"currentColor\"\r\n              d=\"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z\"\r\n            />\r\n          </svg>\r\n          {this.renderDatePicker('toDate', this.toDate, this.fromDate?.toDate() || this.minSelectableDate, el => (this.toDatePicker = el), {\r\n            forceDestroyOnUpdate: true,\r\n          })}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n","import { colorVariants } from '@/components/ui/ir-icons/icons';\r\nimport { Booking } from '@/models/booking.dto';\r\nimport locales from '@/stores/locales.store';\r\nimport { getPrivateNote } from '@/utils/booking';\r\nimport { Component, Event, EventEmitter, Prop, State, h } from '@stencil/core';\r\nimport { ICountry } from '@/models/IBooking';\r\nimport { _formatDate, _formatTime } from '../functions';\r\nimport { BookingDetailsSidebarEvents, OpenSidebarEvent } from '../types';\r\n\r\n@Component({\r\n  tag: 'ir-reservation-information',\r\n  styleUrl: 'ir-reservation-information.css',\r\n  scoped: true,\r\n})\r\nexport class IrReservationInformation {\r\n  @Prop() booking: Booking;\r\n  @Prop() countries: ICountry[];\r\n\r\n  @State() userCountry: ICountry | null = null;\r\n  @Event() openSidebar: EventEmitter<OpenSidebarEvent<any>>;\r\n  componentWillLoad() {\r\n    const guestCountryId = this.booking?.guest?.country_id;\r\n    this.userCountry = guestCountryId ? this.countries?.find(country => country.id === guestCountryId) || null : null;\r\n  }\r\n  private handleEditClick(e: CustomEvent, type: BookingDetailsSidebarEvents) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    this.openSidebar.emit({ type });\r\n  }\r\n\r\n  private renderPhoneNumber() {\r\n    const { mobile_without_prefix, country_phone_prefix, country_id } = this.booking.guest;\r\n    if (!mobile_without_prefix) {\r\n      return null;\r\n    }\r\n    if (country_phone_prefix) {\r\n      return country_phone_prefix + ' ' + mobile_without_prefix;\r\n    }\r\n    if (country_id) {\r\n      const selectedCountry = this.countries.find(c => c.id === country_id);\r\n      if (!selectedCountry) {\r\n        throw new Error('Invalid country id');\r\n      }\r\n      return selectedCountry.phone_prefix + ' ' + mobile_without_prefix;\r\n    }\r\n    return mobile_without_prefix;\r\n    // const { mobile, country_phone_prefix, country_id } = this.booking.guest;\r\n    // if (!mobile) {\r\n    //   return null;\r\n    // }\r\n    // if (this.booking.is_direct) {\r\n    //   if (country_phone_prefix) {\r\n    //     return country_phone_prefix + ' ' + mobile;\r\n    //   }\r\n    //   if (country_id) {\r\n    //     const selectedCountry = this.countries.find(c => c.id === country_id);\r\n    //     if (!selectedCountry) {\r\n    //       throw new Error('Invalid country id');\r\n    //     }\r\n    //     return selectedCountry.phone_prefix + ' ' + mobile;\r\n    //   }\r\n    // }\r\n    // return mobile;\r\n  }\r\n  render() {\r\n    const privateNote = getPrivateNote(this.booking.extras);\r\n    return (\r\n      <div class=\"card\">\r\n        <div class=\"p-1\">\r\n          <p>{this.booking.property.name || ''}</p>\r\n          <ir-label\r\n            labelText={`${locales.entries.Lcz_Source}:`}\r\n            content={this.booking.origin.Label}\r\n            image={{ src: this.booking.origin.Icon, alt: this.booking.origin.Label }}\r\n          ></ir-label>\r\n          <ir-label\r\n            renderContentAsHtml\r\n            labelText={`${locales.entries.Lcz_BookedOn}:`}\r\n            content={`${_formatDate(this.booking.booked_on.date)}&nbsp&nbsp&nbsp&nbsp${_formatTime(\r\n              this.booking.booked_on.hour.toString(),\r\n              this.booking.booked_on.minute.toString(),\r\n            )}`}\r\n          ></ir-label>\r\n          <ir-label labelText={`${locales.entries.Lcz_BookedBy}:`} content={`${this.booking.guest.first_name} ${this.booking.guest.last_name}`}>\r\n            {this.booking.guest?.nbr_confirmed_bookings > 1 && !this.booking.agent && (\r\n              <div class={'m-0 p-0'} slot=\"prefix\">\r\n                <ir-tooltip message={`${locales.entries.Lcz_BookingsNbr}`.replace('%1', this.booking.guest.nbr_confirmed_bookings.toString())} customSlot>\r\n                  <div class=\"d-flex align-items-center m-0 p-0\" slot=\"tooltip-trigger\" style={{ gap: '0.25rem' }}>\r\n                    <p class={'p-0 m-0'} style={{ color: '#FB0AAD' }}>\r\n                      {this.booking.guest.nbr_confirmed_bookings}\r\n                    </p>\r\n                    <ir-icons style={{ '--icon-size': '1rem' }} color=\"#FB0AAD\" name=\"heart-fill\"></ir-icons>\r\n                  </div>\r\n                </ir-tooltip>\r\n              </div>\r\n            )}\r\n            <ir-button\r\n              slot=\"suffix\"\r\n              variant=\"icon\"\r\n              icon_name={'edit'}\r\n              style={{ ...colorVariants.secondary, '--icon-size': '1.1rem' }}\r\n              onClickHandler={e => this.handleEditClick(e, 'guest')}\r\n            ></ir-button>\r\n          </ir-label>\r\n          {this.booking.guest.mobile && <ir-label labelText={`${locales.entries.Lcz_Phone}:`} content={this.renderPhoneNumber()}></ir-label>}\r\n          {!this.booking.agent && <ir-label labelText={`${locales.entries.Lcz_Email}:`} content={this.booking.guest.email}></ir-label>}\r\n          {this.booking.guest.alternative_email && <ir-label labelText={`${locales.entries.Lcz_AlternativeEmail}:`} content={this.booking.guest.alternative_email}></ir-label>}\r\n          {this.booking?.guest?.address && <ir-label labelText={`${locales.entries.Lcz_Address}:`} content={this.booking.guest.address}></ir-label>}\r\n          {this.userCountry && (\r\n            <ir-label\r\n              labelText={`${locales.entries.Lcz_Country}:`}\r\n              isCountryImage\r\n              content={this.userCountry.name}\r\n              image={{ src: this.userCountry.flag, alt: this.userCountry.name }}\r\n            ></ir-label>\r\n          )}\r\n          {this.booking.guest?.notes && <ir-label display=\"inline\" labelText={`${locales.entries.Lcz_GuestPrivateNote}:`} content={this.booking.guest?.notes}></ir-label>}\r\n          {this.booking.is_direct && <ir-label labelText={`${locales.entries.Lcz_ArrivalTime}:`} content={this.booking.arrival.description}></ir-label>}\r\n          {this.booking.promo_key && <ir-label labelText={`${locales.entries.Lcz_Coupon}:`} content={this.booking.promo_key}></ir-label>}\r\n          {/* {this.booking.agent && <ir-label labelText={`${locales.entries.Lcz_AgentCode?.split(':')[0]}:`} content={this.booking.agent.name}></ir-label>} */}\r\n          {this.booking.is_in_loyalty_mode && !this.booking.promo_key && (\r\n            <div class=\"d-flex align-items-center\">\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" height={18} width={18}>\r\n                <path\r\n                  fill=\"#fc6c85\"\r\n                  d=\"M225.8 468.2l-2.5-2.3L48.1 303.2C17.4 274.7 0 234.7 0 192.8v-3.3c0-70.4 50-130.8 119.2-144C158.6 37.9 198.9 47 231 69.6c9 6.4 17.4 13.8 25 22.3c4.2-4.8 8.7-9.2 13.5-13.3c3.7-3.2 7.5-6.2 11.5-9c0 0 0 0 0 0C313.1 47 353.4 37.9 392.8 45.4C462 58.6 512 119.1 512 189.5v3.3c0 41.9-17.4 81.9-48.1 110.4L288.7 465.9l-2.5 2.3c-8.2 7.6-19 11.9-30.2 11.9s-22-4.2-30.2-11.9zM239.1 145c-.4-.3-.7-.7-1-1.1l-17.8-20c0 0-.1-.1-.1-.1c0 0 0 0 0 0c-23.1-25.9-58-37.7-92-31.2C81.6 101.5 48 142.1 48 189.5v3.3c0 28.5 11.9 55.8 32.8 75.2L256 430.7 431.2 268c20.9-19.4 32.8-46.7 32.8-75.2v-3.3c0-47.3-33.6-88-80.1-96.9c-34-6.5-69 5.4-92 31.2c0 0 0 0-.1 .1s0 0-.1 .1l-17.8 20c-.3 .4-.7 .7-1 1.1c-4.5 4.5-10.6 7-16.9 7s-12.4-2.5-16.9-7z\"\r\n                />\r\n              </svg>\r\n              <p class=\"m-0 p-0 ml-1\">{locales.entries.Lcz_LoyaltyDiscountApplied}</p>\r\n            </div>\r\n          )}\r\n          {this.booking.is_direct ? (\r\n            <ir-label labelText={`${locales.entries.Lcz_GuestRemark}:`} display=\"inline\" content={this.booking.remark}></ir-label>\r\n          ) : (\r\n            <ota-label\r\n              class={'m-0 p-0'}\r\n              label={`${locales.entries.Lcz_ChannelNotes || 'Channel notes'}:`}\r\n              remarks={this.booking.ota_notes}\r\n              maxVisibleItems={this.booking.ota_notes?.length}\r\n            ></ota-label>\r\n          )}\r\n          <div class=\"d-flex align-items-center justify-content-between\">\r\n            <ir-label\r\n              labelText={`${locales.entries.Lcz_BookingPrivateNote}:`}\r\n              placeholder={locales.entries.Lcz_VisibleToHotelOnly}\r\n              content={privateNote}\r\n              display={privateNote ? 'inline' : 'flex'}\r\n              // ignore_content\r\n            ></ir-label>\r\n            <ir-button variant=\"icon\" icon_name=\"edit\" style={colorVariants.secondary} onClickHandler={e => this.handleEditClick(e, 'extra_note')}></ir-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",".light-blue-bg {\r\n  background: #acecff;\r\n  padding: 0.1rem 0.3rem;\r\n  border-radius: 5px;\r\n  display: block;\r\n  max-width: 100px;\r\n  box-sizing: border-box;\r\n  display: inline-block;\r\n  overflow: hidden;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n  cursor: default;\r\n}\r\n\r\n.room_statements {\r\n  display: block;\r\n  width: 100%; /* Ensure the container uses the full width */\r\n}\r\n.room_statements {\r\n  display: block;\r\n  width: 100%;\r\n}\r\n.room_statements span {\r\n  display: inline;\r\n  white-space: normal;\r\n  line-height: 1.5;\r\n  word-break: break-word;\r\n}\r\n\r\n.room_statements b {\r\n  display: inline;\r\n  margin-right: 5px;\r\n}\r\n.payment-container {\r\n  position: absolute;\r\n  right: 1rem;\r\n  height: fit-content;\r\n}\r\n:host {\r\n  position: relative;\r\n}\r\n.sm-mr {\r\n  margin-right: 3px;\r\n}\r\n.subtotal_row {\r\n  padding-top: 8px;\r\n  font-weight: 600;\r\n}\r\n.room_actions_btns {\r\n  gap: 0.5rem;\r\n}\r\n.night-cost {\r\n  color: #7cbebe;\r\n}\r\n/* .cancelation {\r\n  max-width: 30%;\r\n} */\r\n.mx-0-5 {\r\n  margin-left: 2px !important;\r\n  margin-right: 2px !important;\r\n}\r\n.tax-width {\r\n  font-size: 10px;\r\n  /* flex-wrap: wrap; */\r\n}\r\n.sm-mb-1 {\r\n  margin-bottom: 5px !important;\r\n}\r\n.sm-mt-1 {\r\n  margin-top: 5px !important;\r\n}\r\n.mx-01 {\r\n  --m: 5px;\r\n  margin-right: var(--m) !important;\r\n  margin-left: var(--m) !important;\r\n}\r\n","import { Component, h, Prop, EventEmitter, Event, Listen, State, Element, Host, Fragment, Watch } from '@stencil/core';\r\nimport { _getDay } from '../functions';\r\nimport { Booking, IUnit, IVariations, Occupancy, Room, SharedPerson } from '@/models/booking.dto';\r\nimport { TIglBookPropertyPayload } from '@/models/igl-book-property';\r\nimport { formatName } from '@/utils/booking';\r\nimport locales from '@/stores/locales.store';\r\nimport calendar_data, { isSingleUnit } from '@/stores/calendar-data';\r\nimport { colorVariants } from '@/components/ui/ir-icons/icons';\r\nimport { formatAmount } from '@/utils/utils';\r\nimport { IEntries } from '@/models/IBooking';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport { OpenSidebarEvent, RoomGuestsPayload } from '../types';\r\nexport type RoomModalReason = 'delete' | 'checkin' | 'checkout' | null;\r\n@Component({\r\n  tag: 'ir-room',\r\n  styleUrl: 'ir-room.css',\r\n  scoped: true,\r\n})\r\nexport class IrRoom {\r\n  @Element() element: HTMLIrRoomElement;\r\n  // Room Data\r\n  @Prop() booking: Booking;\r\n  @Prop() bookingIndex: number;\r\n  @Prop() isEditable: boolean;\r\n  @Prop() room: Room;\r\n  // Meal Code names\r\n  @Prop() mealCodeName: string;\r\n  @Prop() myRoomTypeFoodCat: string;\r\n  // Currency\r\n  @Prop() currency: string = 'USD';\r\n  @Prop() language: string = 'en';\r\n  @Prop() legendData;\r\n  @Prop() roomsInfo;\r\n  @Prop() bedPreferences: IEntries[];\r\n  // Booleans Conditions\r\n  @Prop() hasRoomEdit: boolean = false;\r\n  @Prop() hasRoomDelete: boolean = false;\r\n  @Prop() hasRoomAdd: boolean = false;\r\n  @Prop() hasCheckIn: boolean = false;\r\n  @Prop() hasCheckOut: boolean = false;\r\n\r\n  @State() collapsed: boolean = false;\r\n  @State() isLoading: boolean = false;\r\n  @State() modalReason: RoomModalReason = null;\r\n  @State() mainGuest: SharedPerson;\r\n  @State() isModelOpen: boolean = false;\r\n\r\n  // Event Emitters\r\n  @Event({ bubbles: true, composed: true }) deleteFinished: EventEmitter<string>;\r\n  @Event({ bubbles: true, composed: true }) pressCheckIn: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) pressCheckOut: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) editInitiated: EventEmitter<TIglBookPropertyPayload>;\r\n  @Event() resetbooking: EventEmitter<null>;\r\n  @Event() openSidebar: EventEmitter<OpenSidebarEvent<RoomGuestsPayload>>;\r\n\r\n  private modal: HTMLIrModalElement;\r\n  private bookingService = new BookingService();\r\n\r\n  componentWillLoad() {\r\n    this.mainGuest = this.getMainGuest();\r\n  }\r\n  @Listen('clickHandler')\r\n  handleClick(e) {\r\n    let target = e.target;\r\n    if (target.id == 'checkin') {\r\n      this.pressCheckIn.emit(this.room);\r\n    } else if (target.id == 'checkout') {\r\n      this.pressCheckOut.emit(this.room);\r\n    }\r\n  }\r\n  @Watch('room')\r\n  handleRoomDataChange() {\r\n    this.mainGuest = this.getMainGuest();\r\n  }\r\n\r\n  private getDateStr(date, locale = 'default') {\r\n    return date.getDate() + ' ' + date.toLocaleString(locale, { month: 'short' }) + ' ' + date.getFullYear();\r\n  }\r\n  private handleEditClick() {\r\n    this.editInitiated.emit({\r\n      event_type: 'EDIT_BOOKING',\r\n      ID: this.room['assigned_units_pool'],\r\n      NAME: formatName(this.mainGuest?.first_name, this.mainGuest?.last_name),\r\n      EMAIL: this.booking.guest.email,\r\n      PHONE: this.booking.guest.mobile,\r\n      REFERENCE_TYPE: '',\r\n      FROM_DATE: this.booking.from_date,\r\n      TO_DATE: this.booking.to_date,\r\n      TITLE: `${locales.entries.Lcz_EditBookingFor} ${this.room?.roomtype?.name} ${(this.room?.unit as IUnit)?.name || ''}`,\r\n      defaultDateRange: {\r\n        dateDifference: this.room.days.length,\r\n        fromDate: new Date(this.room.from_date + 'T00:00:00'),\r\n        fromDateStr: this.getDateStr(new Date(this.room.from_date + 'T00:00:00')),\r\n        toDate: new Date(this.room.to_date + 'T00:00:00'),\r\n        toDateStr: this.getDateStr(new Date(this.room.to_date + 'T00:00:00')),\r\n        message: '',\r\n      },\r\n      bed_preference: this.room.bed_preference,\r\n      adult_child_offering: this.room.rateplan.selected_variation.adult_child_offering,\r\n      ADULTS_COUNT: this.room.rateplan.selected_variation.adult_nbr,\r\n      ARRIVAL: this.booking.arrival,\r\n      ARRIVAL_TIME: this.booking.arrival.description,\r\n      BOOKING_NUMBER: this.booking.booking_nbr,\r\n      cancelation: this.room.rateplan.cancelation,\r\n      channel_booking_nbr: this.booking.channel_booking_nbr,\r\n      CHILDREN_COUNT: this.room.rateplan.selected_variation.child_nbr,\r\n      COUNTRY: this.booking.guest.country_id,\r\n      ENTRY_DATE: this.booking.from_date,\r\n      FROM_DATE_STR: this.booking.format.from_date,\r\n      guarantee: this.room.rateplan.guarantee,\r\n      GUEST: this.mainGuest,\r\n      IDENTIFIER: this.room.identifier,\r\n      is_direct: this.booking.is_direct,\r\n      IS_EDITABLE: this.booking.is_editable,\r\n      NO_OF_DAYS: this.room.days.length,\r\n      NOTES: this.booking.remark,\r\n      origin: this.booking.origin,\r\n      POOL: this.room['assigned_units_pool'],\r\n      PR_ID: (this.room.unit as IUnit)?.id,\r\n      RATE: this.room.total,\r\n      RATE_PLAN: this.room.rateplan.name,\r\n      RATE_PLAN_ID: this.room.rateplan.id,\r\n      RATE_TYPE: this.room.roomtype.id,\r\n      ROOMS: this.booking.rooms,\r\n      SOURCE: this.booking.source,\r\n      SPLIT_BOOKING: false,\r\n      STATUS: 'IN-HOUSE',\r\n      TO_DATE_STR: this.booking.format.to_date,\r\n      TOTAL_PRICE: this.booking.total,\r\n      legendData: this.legendData,\r\n      roomsInfo: this.roomsInfo,\r\n      roomName: (this.room.unit as IUnit)?.name || '',\r\n      PICKUP_INFO: this.booking.pickup_info,\r\n      booking: this.booking,\r\n      currentRoomType: this.room,\r\n    });\r\n  }\r\n  private openModal(reason: RoomModalReason) {\r\n    if (!reason) {\r\n      return;\r\n    }\r\n    this.modalReason = reason;\r\n    this.modal.openModal();\r\n  }\r\n  private async handleModalConfirmation(e: CustomEvent) {\r\n    try {\r\n      e.stopImmediatePropagation();\r\n      e.stopPropagation();\r\n      if (!this.modalReason) {\r\n        return;\r\n      }\r\n      this.isLoading = true;\r\n      switch (this.modalReason) {\r\n        case 'delete':\r\n          await this.deleteRoom();\r\n          break;\r\n        case 'checkin':\r\n        case 'checkout':\r\n          await this.bookingService.handleExposedRoomInOut({\r\n            booking_nbr: this.booking.booking_nbr,\r\n            room_identifier: this.room.identifier,\r\n            status: this.modalReason === 'checkin' ? '001' : '002',\r\n          });\r\n          this.resetbooking.emit(null);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      this.isLoading = false;\r\n      this.modalReason = null;\r\n      this.modal.closeModal();\r\n    }\r\n  }\r\n  private async deleteRoom() {\r\n    let oldRooms = [...this.booking.rooms];\r\n    oldRooms = oldRooms.filter(room => room.identifier !== this.room.identifier);\r\n\r\n    const body = {\r\n      assign_units: true,\r\n      check_in: true,\r\n      is_pms: true,\r\n      is_direct: true,\r\n      booking: {\r\n        booking_nbr: this.booking.booking_nbr,\r\n        from_date: this.booking.from_date,\r\n        to_date: this.booking.to_date,\r\n        remark: this.booking.remark,\r\n        property: this.booking.property,\r\n        source: this.booking.source,\r\n        currency: this.booking.currency,\r\n        arrival: this.booking.arrival,\r\n        guest: this.booking.guest,\r\n        rooms: oldRooms,\r\n      },\r\n      extras: this.booking.extras,\r\n      pickup_info: this.booking.pickup_info,\r\n    };\r\n    await this.bookingService.doReservation(body);\r\n    this.deleteFinished.emit(this.room.identifier);\r\n  }\r\n\r\n  private formatVariation({ adult_nbr, child_nbr }: IVariations, { infant_nbr }: Occupancy) {\r\n    const adultCount = adult_nbr > 0 ? adult_nbr : 0;\r\n    const childCount = child_nbr > 0 ? child_nbr : 0;\r\n    const infantCount = infant_nbr > 0 ? infant_nbr : 0;\r\n\r\n    const adultLabel = adultCount > 1 ? locales.entries.Lcz_Adults.toLowerCase() : locales.entries.Lcz_Adult.toLowerCase();\r\n    const childLabel = childCount > 1 ? locales.entries.Lcz_Children.toLowerCase() : locales.entries.Lcz_Child.toLowerCase();\r\n    const infantLabel = infantCount > 1 ? locales.entries.Lcz_Infants.toLowerCase() : locales.entries.Lcz_Infant.toLowerCase();\r\n\r\n    const parts = [];\r\n    if (adultCount > 0) {\r\n      parts.push(`${adultCount} ${adultLabel}`);\r\n    }\r\n    if (childCount > 0) {\r\n      parts.push(`${childCount} ${childLabel}`);\r\n    }\r\n    if (infantCount > 0) {\r\n      parts.push(`${infantCount} ${infantLabel}`);\r\n    }\r\n\r\n    return parts.join('&nbsp&nbsp&nbsp&nbsp');\r\n  }\r\n  private getSmokingLabel() {\r\n    if (this.booking.is_direct) {\r\n      if (!this.room.smoking_option) {\r\n        return null;\r\n      }\r\n      const currRT = calendar_data.roomsInfo.find(rt => rt.id === this.room.roomtype.id);\r\n      if (currRT) {\r\n        const smoking_option = currRT['smoking_option']?.allowed_smoking_options;\r\n        if (smoking_option) {\r\n          return smoking_option.find(s => s.code === this.room.smoking_option)?.description;\r\n        }\r\n        return null;\r\n      }\r\n      return null;\r\n    }\r\n    return this.room.ota_meta?.smoking_preferences;\r\n  }\r\n\r\n  private getBedName() {\r\n    if (this.booking.is_direct) {\r\n      const bed = this.bedPreferences.find(p => p.CODE_NAME === this.room?.bed_preference?.toString());\r\n      if (!bed) {\r\n        return;\r\n      }\r\n      return bed[`CODE_VALUE_${this.language}`] ?? bed.CODE_VALUE_EN;\r\n    }\r\n    return this.room.ota_meta?.bed_preferences;\r\n  }\r\n  private renderModalMessage() {\r\n    switch (this.modalReason) {\r\n      case 'delete':\r\n        return `${locales.entries['Lcz_AreYouSureDoYouWantToRemove ']} ${this.room.roomtype.name} ${this.room.unit ? (this.room.unit as IUnit).name : ''} ${\r\n          locales.entries.Lcz_FromThisBooking\r\n        }`;\r\n      case 'checkin':\r\n        return `Are you sure you want to Check In this unit?\r\n`;\r\n      case 'checkout':\r\n        return `Are you sure you want to Check Out this unit?`;\r\n      default:\r\n        return '';\r\n    }\r\n  }\r\n  private handleCheckIn() {\r\n    const { adult_nbr, children_nbr, infant_nbr } = this.room.occupancy;\r\n    if (this.room.sharing_persons.length < adult_nbr + children_nbr + infant_nbr) {\r\n      return this.showGuestModal();\r\n    }\r\n    return this.renderModalMessage();\r\n  }\r\n  private getMainGuest() {\r\n    return this.room.sharing_persons?.find(p => p.is_main);\r\n  }\r\n  render() {\r\n    const bed = this.getBedName();\r\n    return (\r\n      <Host class=\"p-1 d-flex m-0\">\r\n        <ir-button\r\n          variant=\"icon\"\r\n          id=\"drawer-icon\"\r\n          data-toggle=\"collapse\"\r\n          data-target={`#roomCollapse-${this.room.identifier?.split(' ').join('')}`}\r\n          aria-expanded={this.collapsed ? 'true' : 'false'}\r\n          aria-controls=\"myCollapse\"\r\n          class=\"mr-1\"\r\n          icon_name={this.collapsed ? 'closed_eye' : 'open_eye'}\r\n          onClickHandler={() => {\r\n            this.collapsed = !this.collapsed;\r\n          }}\r\n          style={{ '--icon-size': '1.6rem' }}\r\n        ></ir-button>\r\n\r\n        <div class=\"flex-fill m-0 \">\r\n          <div class=\"d-flex align-items-start justify-content-between sm-mb-1\">\r\n            <p class=\"m-0 p-0\">\r\n              <span class=\"m-0 p-0\" style={{ fontWeight: '600' }}>\r\n                {this.myRoomTypeFoodCat || ''}{' '}\r\n              </span>{' '}\r\n              {this.mealCodeName} {this.room.rateplan.is_non_refundable && ` - ${locales.entries.Lcz_NonRefundable}`}{' '}\r\n            </p>\r\n            {/*this.room.My_Room_type.My_Room_type_desc[0].CUSTOM_TXT || ''*/}\r\n            <div class=\"d-flex m-0 p-0 align-items-center room_actions_btns\">\r\n              <span class=\"p-0 m-0 font-weight-bold\">{formatAmount(this.currency, this.room['gross_total'])}</span>\r\n              {this.hasRoomEdit && this.isEditable && (\r\n                <ir-button\r\n                  id={`roomEdit-${this.room.identifier}`}\r\n                  variant=\"icon\"\r\n                  icon_name=\"edit\"\r\n                  // class=\"mx-1\"\r\n                  style={colorVariants.secondary}\r\n                  onClickHandler={this.handleEditClick.bind(this)}\r\n                ></ir-button>\r\n              )}\r\n              {this.hasRoomDelete && this.isEditable && (\r\n                <ir-button\r\n                  variant=\"icon\"\r\n                  onClickHandler={this.openModal.bind(this, 'delete')}\r\n                  id={`roomDelete-${this.room.identifier}`}\r\n                  icon_name=\"trash\"\r\n                  style={colorVariants.danger}\r\n                ></ir-button>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <div class=\"d-flex align-items-center sm-mb-1\">\r\n            <ir-date-view\r\n              class=\"mr-1  flex-grow-1\"\r\n              style={{ width: 'fit-content' }}\r\n              from_date={this.room.from_date}\r\n              to_date={this.room.to_date}\r\n              showDateDifference={false}\r\n            ></ir-date-view>\r\n            {!isSingleUnit(this.room.roomtype.id) && calendar_data.is_frontdesk_enabled && this.room.unit && (\r\n              <div class={'d-flex justify-content-center align-items-center'}>\r\n                <ir-tooltip message={(this.room.unit as IUnit).name} customSlot>\r\n                  <span slot=\"tooltip-trigger\" class={`light-blue-bg  ${this.hasCheckIn || this.hasCheckOut ? 'mr-2' : ''} `}>\r\n                    {(this.room.unit as IUnit).name}\r\n                  </span>\r\n                </ir-tooltip>\r\n              </div>\r\n            )}\r\n            {this.hasCheckIn && (\r\n              <ir-button onClickHandler={this.handleCheckIn.bind(this)} id=\"checkin\" btn_color=\"outline\" size=\"sm\" text={locales.entries.Lcz_CheckIn}></ir-button>\r\n            )}\r\n            {this.hasCheckOut && (\r\n              <ir-button onClickHandler={this.openModal.bind(this, 'checkout')} id=\"checkout\" btn_color=\"outline\" size=\"sm\" text={locales.entries.Lcz_CheckOut}></ir-button>\r\n            )}\r\n          </div>\r\n          <div class={'d-flex align-items-center'} style={{ gap: '0.5rem' }}>\r\n            <p class=\"m-0 p-0\">{`${this.mainGuest.first_name || ''} ${this.mainGuest.last_name || ''}`}</p>\r\n            {this.room.rateplan.selected_variation.adult_nbr > 0 &&\r\n              (this.room.unit ? (\r\n                <ir-tooltip message={'View guests'} class=\"m-0 p-0\" customSlot>\r\n                  <ir-button\r\n                    class=\"m-0 p-0\"\r\n                    slot=\"tooltip-trigger\"\r\n                    btn_color=\"link\"\r\n                    renderContentAsHtml\r\n                    onClickHandler={() => this.showGuestModal()}\r\n                    size=\"sm\"\r\n                    btnStyle={{ width: 'fit-content', margin: '0', padding: '0', fontSize: 'inherit', textAlign: 'center', lineHeight: '1.2' }}\r\n                    text={this.formatVariation(this.room.rateplan.selected_variation, this.room.occupancy)}\r\n                  ></ir-button>\r\n                </ir-tooltip>\r\n              ) : (\r\n                <span innerHTML={this.formatVariation(this.room.rateplan.selected_variation, this.room.occupancy)}></span>\r\n              ))}\r\n            {bed && <p class=\"m-0 p-0\">({bed})</p>}\r\n          </div>\r\n          <div class=\"collapse\" id={`roomCollapse-${this.room.identifier?.split(' ').join('')}`}>\r\n            <div class=\"d-flex sm-mb-1 sm-mt-1\">\r\n              <div class=\" sm-padding-top\">\r\n                <p class=\"sm-padding-right\" style={{ fontWeight: '600' }}>{`${locales.entries.Lcz_Breakdown}:`}</p>\r\n              </div>\r\n              <div class={'flex-fill'}>\r\n                <table>\r\n                  {this.room.days.length > 0 &&\r\n                    this.room.days.map(room => {\r\n                      return (\r\n                        <tr>\r\n                          <td class={'pr-2 text-right'}>{_getDay(room.date)}</td>\r\n                          <td class=\"text-right\">{formatAmount(this.currency, room.amount)}</td>\r\n                          {room.cost > 0 && room.cost !== null && <td class=\"pl-2 text-left night-cost\">{formatAmount(this.currency, room.cost)}</td>}\r\n                        </tr>\r\n                      );\r\n                    })}\r\n                  <tr class={''}>\r\n                    <th class=\"text-right pr-2 subtotal_row\">{locales.entries.Lcz_SubTotal}</th>\r\n                    <th class=\"text-right subtotal_row\">{formatAmount(this.currency, this.room.total)}</th>\r\n                    {this.room.gross_cost > 0 && this.room.gross_cost !== null && <th class=\"pl-2 text-right night-cost\">{formatAmount(this.currency, this.room.cost)}</th>}\r\n                  </tr>\r\n                  {this.booking.is_direct ? (\r\n                    <Fragment>\r\n                      {(() => {\r\n                        const filtered_data = calendar_data.taxes.filter(tx => tx.pct > 0);\r\n                        return filtered_data.map(d => {\r\n                          return (\r\n                            <tr>\r\n                              <td class=\"text-right pr-2\">\r\n                                {d.is_exlusive ? locales.entries.Lcz_Excluding : locales.entries.Lcz_Including} {d.name} ({d.pct}%)\r\n                              </td>\r\n                              <td class=\"text-right\">{formatAmount(this.currency, (this.room.total * d.pct) / 100)}</td>\r\n                              {this.room.gross_cost > 0 && this.room.gross_cost !== null && (\r\n                                <td class=\"pl-2 text-right night-cost\">{formatAmount(this.currency, (this.room.cost * d.pct) / 100)}</td>\r\n                              )}\r\n                            </tr>\r\n                          );\r\n                        });\r\n                      })()}\r\n                    </Fragment>\r\n                  ) : (\r\n                    <Fragment>\r\n                      {(() => {\r\n                        const filtered_data = this.room.ota_taxes.filter(tx => tx.amount > 0);\r\n                        return filtered_data.map(d => {\r\n                          return (\r\n                            <tr>\r\n                              <td class=\"text-right pr-2\">\r\n                                {d.is_exlusive ? locales.entries.Lcz_Excluding : locales.entries.Lcz_Including} {d.name}\r\n                              </td>\r\n                              <td class=\"text-right\">\r\n                                {d.currency.symbol}\r\n                                {d.amount}\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        });\r\n                      })()}\r\n                    </Fragment>\r\n                  )}\r\n                </table>\r\n              </div>\r\n            </div>\r\n            <ir-label labelText={`${locales.entries.Lcz_SmokingOptions}:`} display=\"inline\" content={this.getSmokingLabel()}></ir-label>\r\n            {this.booking.is_direct && (\r\n              <Fragment>\r\n                {this.room.rateplan.cancelation && (\r\n                  <ir-label labelText={`${locales.entries.Lcz_Cancellation}:`} display=\"inline\" content={this.room.rateplan.cancelation || ''} renderContentAsHtml></ir-label>\r\n                )}\r\n                {this.room.rateplan.guarantee && (\r\n                  <ir-label labelText={`${locales.entries.Lcz_Guarantee}:`} display=\"inline\" content={this.room.rateplan.guarantee || ''} renderContentAsHtml></ir-label>\r\n                )}\r\n              </Fragment>\r\n            )}\r\n            {this.room.ota_meta && (\r\n              <div>\r\n                <ir-label labelText={`${locales.entries.Lcz_MealPlan}:`} display=\"inline\" content={this.room.ota_meta.meal_plan}></ir-label>\r\n                <ir-label labelText={`${locales.entries.Lcz_Policies}:`} display=\"inline\" content={this.room.ota_meta.policies}></ir-label>\r\n              </div>\r\n            )}\r\n            {/* {this.bookingEvent.is_direct && <ir-label labelText={`${locales.entries.Lcz_MealPlan}:`} content={this.mealCodeName}></ir-label>} */}\r\n          </div>\r\n        </div>\r\n        <ir-modal\r\n          autoClose={false}\r\n          ref={el => (this.modal = el)}\r\n          isLoading={this.isLoading}\r\n          onConfirmModal={this.handleModalConfirmation.bind(this)}\r\n          iconAvailable={true}\r\n          icon=\"ft-alert-triangle danger h1\"\r\n          leftBtnText={locales.entries.Lcz_Cancel}\r\n          rightBtnText={this.modalReason === 'delete' ? locales.entries.Lcz_Delete : locales.entries.Lcz_Confirm}\r\n          leftBtnColor=\"secondary\"\r\n          rightBtnColor={this.modalReason === 'delete' ? 'danger' : 'primary'}\r\n          modalTitle={locales.entries.Lcz_Confirmation}\r\n          modalBody={this.renderModalMessage()}\r\n        ></ir-modal>\r\n      </Host>\r\n    );\r\n  }\r\n  private showGuestModal(): void {\r\n    const { adult_nbr, children_nbr, infant_nbr } = this.room.occupancy;\r\n    this.openSidebar.emit({\r\n      type: 'room-guest',\r\n      payload: {\r\n        roomName: (this.room.unit as IUnit)?.name,\r\n        sharing_persons: this.room.sharing_persons,\r\n        totalGuests: adult_nbr + children_nbr + infant_nbr,\r\n        checkin: this.hasCheckIn,\r\n        identifier: this.room.identifier,\r\n      },\r\n    });\r\n  }\r\n}\r\n","import { SharedPerson } from '@/models/booking.dto';\r\nimport moment from 'moment';\r\nimport { FactoryArg, MaskedRange } from 'imask';\r\n\r\nexport const defaultGuest: SharedPerson = {\r\n  id: -1,\r\n  full_name: '',\r\n  country_id: null,\r\n  dob: '',\r\n  id_info: {\r\n    type: {\r\n      code: null,\r\n      description: null,\r\n    },\r\n    number: '',\r\n  },\r\n  address: null,\r\n  alternative_email: null,\r\n  cci: null,\r\n  city: null,\r\n  country: undefined,\r\n  country_phone_prefix: null,\r\n  email: null,\r\n  first_name: '',\r\n  last_name: '',\r\n  mobile: null,\r\n  nbr_confirmed_bookings: 0,\r\n  notes: null,\r\n  password: null,\r\n  subscribe_to_news_letter: null,\r\n};\r\n/**Date of birth mask for room guests  with min */\r\nexport const dateMask: FactoryArg = {\r\n  mask: Date,\r\n  pattern: 'DD/MM/YYYY',\r\n  lazy: false,\r\n  min: new Date(1900, 0, 1),\r\n  max: new Date(),\r\n  format: date => moment(date).format('DD/MM/YYYY'),\r\n  parse: str => moment(str, 'DD/MM/YYYY').toDate(),\r\n  autofix: true,\r\n  placeholderChar: '_',\r\n  blocks: {\r\n    YYYY: {\r\n      mask: MaskedRange,\r\n      from: 1970,\r\n      to: new Date().getFullYear(),\r\n      placeholderChar: 'Y',\r\n    },\r\n    MM: {\r\n      mask: MaskedRange,\r\n      from: 1,\r\n      to: 12,\r\n      placeholderChar: 'M',\r\n    },\r\n    DD: {\r\n      mask: MaskedRange,\r\n      from: 1,\r\n      to: 31,\r\n      placeholderChar: 'D',\r\n    },\r\n  },\r\n};\r\n",":host {\r\n  display: block;\r\n  height: 100%;\r\n  position: relative;\r\n  text-align: start !important;\r\n}\r\n.id-select {\r\n  border-top-right-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n  border-right-width: 0;\r\n}\r\n:host {\r\n  display: block;\r\n  width: 100%;\r\n}\r\n\r\n.guest-grid > * {\r\n  height: 100%;\r\n}\r\n\r\n.guests-labels {\r\n  display: none;\r\n}\r\n.guest_label {\r\n  width: 100px;\r\n  color: #6b6f82;\r\n}\r\n.sharing_persons_label {\r\n  display: none;\r\n}\r\n.loading-container {\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.guest_document input {\r\n  border-top-left-radius: 0;\r\n  border-bottom-left-radius: 0;\r\n}\r\n.guests-labels *,\r\n.sharing_persons_label {\r\n  margin-bottom: 0.5rem;\r\n  padding-bottom: 0;\r\n}\r\n\r\n/*sm*/\r\n@media (min-width: 640px) {\r\n}\r\n\r\n/*md*/\r\n@media (min-width: 768px) {\r\n  .sharing_persons_label {\r\n    display: block;\r\n  }\r\n  .guest_country_picker {\r\n    margin-bottom: 3px;\r\n  }\r\n  .guest-grid {\r\n    display: grid;\r\n    grid-template-columns: 2fr 2fr 2fr 2fr 5fr;\r\n    gap: 0.5rem;\r\n    align-items: flex-start;\r\n  }\r\n\r\n  .guest_label,\r\n  .sharing_persons_heading,\r\n  .main_guest_heading {\r\n    display: none;\r\n  }\r\n}\r\n\r\n/*lg*/\r\n@media (min-width: 1024px) {\r\n}\r\n\r\n/*xl*/\r\n@media (min-width: 1280px) {\r\n}\r\n\r\n/*2xl*/\r\n@media (min-width: 1536px) {\r\n}\r\n","import { SharedPerson, ZIdInfo, ZSharedPerson, ZSharedPersons } from '@/models/booking.dto';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\nimport locales from '@/stores/locales.store';\r\nimport { Component, Event, EventEmitter, Fragment, Prop, State, h } from '@stencil/core';\r\nimport moment from 'moment';\r\nimport { dateMask, defaultGuest } from './data';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport { ICountry, IEntries } from '@/models/IBooking';\r\nimport { ZodError } from 'zod';\r\n@Component({\r\n  tag: 'ir-room-guests',\r\n  styleUrl: 'ir-room-guests.css',\r\n  scoped: true,\r\n})\r\nexport class IrRoomGuests {\r\n  /**\r\n   * The name of the room currently being displayed.\r\n   * Used to label the room in the user interface for clarity.\r\n   */\r\n  @Prop() roomName: string;\r\n\r\n  /**\r\n   * A unique identifier for the room.\r\n   * This is used to distinguish between rooms, especially when performing operations like saving or checking in guests.\r\n   */\r\n  @Prop() identifier: string;\r\n\r\n  /**\r\n   * An array of people sharing the room.\r\n   * Contains information about the {locales.entries.Lcz_MainGuest} and additional guests, such as their name, date of birth, {locales.entries.Lcz_Nationality}, and ID details.\r\n   */\r\n  @Prop() sharedPersons: SharedPerson[] = [];\r\n\r\n  /**\r\n   * The total number of guests for the room.\r\n   * Determines how many guest input forms to display in the UI.\r\n   */\r\n  @Prop() totalGuests: number = 0;\r\n\r\n  /**\r\n   * A list of available countries.\r\n   * Used to populate dropdowns for selecting the {locales.entries.Lcz_Nationality} of guests.\r\n   */\r\n  @Prop() countries: ICountry[];\r\n\r\n  /**\r\n   * A boolean indicating whether the room is in the process of being checked in.\r\n   * If true, additional actions like saving the room state as \"checked in\" are performed.\r\n   */\r\n  @Prop() checkIn: boolean;\r\n\r\n  /**\r\n   * The language used for displaying text content in the component.\r\n   * Defaults to English ('en'), but can be set to other supported languages.\r\n   */\r\n  @Prop() language: string = 'en';\r\n\r\n  /**\r\n   * A unique booking number associated with the room.\r\n   * This is used for backend operations like saving guest information or checking in the room.\r\n   */\r\n  @Prop() bookingNumber: string;\r\n\r\n  @State() guests: SharedPerson[] = [];\r\n  @State() idTypes: IEntries[] = [];\r\n  @State() error: Record<string, boolean> = {};\r\n  @State() isLoading: boolean;\r\n  @State() propertyCountry: ICountry;\r\n  @State() autoValidate = false;\r\n\r\n  @Event() closeModal: EventEmitter<null>;\r\n  @Event() resetBookingEvt: EventEmitter<null>;\r\n  @Event() updateRoomGuests: EventEmitter<{ identifier: string; guests: SharedPerson[] }>;\r\n\r\n  private bookingService = new BookingService();\r\n\r\n  componentWillLoad() {\r\n    this.init();\r\n    this.initializeGuests();\r\n  }\r\n\r\n  private async init() {\r\n    try {\r\n      this.isLoading = true;\r\n      const [country, idTypes] = await Promise.all([this.bookingService.getUserDefaultCountry(), this.bookingService.getSetupEntriesByTableName('_ID_TYPE')]);\r\n      this.idTypes = idTypes;\r\n      if (country) {\r\n        this.propertyCountry = this.countries.find(c => c.id === country.COUNTRY_ID);\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n\r\n  private initializeGuests(): void {\r\n    let guests = [];\r\n    if (this.totalGuests > this.sharedPersons.length) {\r\n      const defaultGuestsCount = this.totalGuests - this.sharedPersons.length;\r\n      guests = [\r\n        ...this.sharedPersons,\r\n        ...Array(defaultGuestsCount).fill({\r\n          ...defaultGuest,\r\n          id_info: {\r\n            ...defaultGuest.id_info,\r\n            type: {\r\n              code: this.idTypes[0]?.CODE_NAME || '001',\r\n              description: this.idTypes[0]?.CODE_VALUE_EN || '',\r\n            },\r\n            number: '',\r\n          },\r\n        }),\r\n      ];\r\n    } else {\r\n      guests = [...this.sharedPersons];\r\n    }\r\n    guests = guests.map(g => ({ ...g, dob: new Date(g.dob).getFullYear() === 1900 ? null : g.dob }));\r\n    this.guests = guests.map(g => ({ ...g, dob: g.dob ? moment(new Date(g.dob)).format('DD/MM/YYYY') : '', country_id: g.country ? g.country.id : null }));\r\n  }\r\n\r\n  private updateGuestInfo(index: number, params: Partial<SharedPerson>) {\r\n    const tempGuests = [...this.guests];\r\n    let tempGuest = tempGuests[index];\r\n    tempGuest = { ...tempGuest, ...params };\r\n    tempGuests[index] = tempGuest;\r\n    this.guests = [...tempGuests];\r\n  }\r\n\r\n  private async saveGuests() {\r\n    try {\r\n      this.error = {};\r\n      this.autoValidate = true;\r\n      ZSharedPersons.parse(this.guests);\r\n      await this.bookingService.handleExposedRoomGuests({\r\n        booking_nbr: this.bookingNumber,\r\n        identifier: this.identifier,\r\n        guests: this.guests.map(g => ({ ...g, dob: g.dob ? moment(g.dob, 'DD/MM/YYYY').format('YYYY-MM-DD') : null })),\r\n      });\r\n      if (this.checkIn) {\r\n        await this.bookingService.handleExposedRoomInOut({\r\n          booking_nbr: this.bookingNumber,\r\n          room_identifier: this.identifier,\r\n          status: '001',\r\n        });\r\n      }\r\n      this.closeModal.emit(null);\r\n      this.updateRoomGuests.emit({ identifier: this.identifier, guests: this.guests });\r\n      this.resetBookingEvt.emit();\r\n    } catch (error) {\r\n      console.log(error);\r\n      if (error instanceof ZodError) {\r\n        let errors = {};\r\n        error.issues.forEach(e => {\r\n          errors[e.path[1]] = true;\r\n        });\r\n        this.error = { ...errors };\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (this.isLoading) {\r\n      return (\r\n        <div class={'loading-container'}>\r\n          <ir-spinner></ir-spinner>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div class=\"h-100 d-flex flex-column\" style={{ minWidth: '300px' }}>\r\n        <ir-title class=\"px-1\" onCloseSideBar={() => this.closeModal.emit(null)} label={`Room ${this.roomName}`} displayContext=\"sidebar\"></ir-title>\r\n        <section class={'d-flex flex-column px-1 h-100 '}>\r\n          <div class=\"\">\r\n            <div class=\"guest-grid guests-labels\">\r\n              <p class=\"\">{locales.entries.Lcz_MainGuest}</p>\r\n              <p class=\"\"></p>\r\n              <p class=\" \">{locales.entries.Lcz_DOB}</p>\r\n              <p class=\"\">{locales.entries.Lcz_Nationality}</p>\r\n              <p class=\" \">{locales.entries.Lcz_Documents}</p>\r\n            </div>\r\n            <h5 class=\"main_guest_heading\">{locales.entries.Lcz_MainGuest}</h5>\r\n            {this.guests.map((guest, idx) => (\r\n              <Fragment>\r\n                {idx === 1 && (\r\n                  <div class=\"d-flex mx-0 px-0\">\r\n                    <h5 class=\"mx-0 px-0 sharing_persons_heading\">{locales.entries.Lcz_PersonsSharingRoom}</h5>\r\n                    <p class=\"mx-0 px-0 sharing_persons_label\">{locales.entries.Lcz_PersonsSharingRoom}</p>\r\n                  </div>\r\n                )}\r\n                <div key={idx} class=\"guest-grid\">\r\n                  <div class={'m-0 p-0 d-flex align-items-center h-100'}>\r\n                    <p class=\"guest_label\">First name</p>\r\n                    <ir-input-text\r\n                      class=\"flex-grow-1 h-100\"\r\n                      id={`first_name_${idx}`}\r\n                      zod={ZSharedPerson.pick({ first_name: true })}\r\n                      error={!!this.error['first_name']}\r\n                      autoValidate={this.autoValidate}\r\n                      wrapKey=\"first_name\"\r\n                      placeholder=\"First name\"\r\n                      onTextChange={e => this.updateGuestInfo(idx, { first_name: e.detail })}\r\n                      value={guest.first_name}\r\n                      maxLength={40}\r\n                    ></ir-input-text>\r\n                  </div>\r\n                  <div class={'m-0 p-0 d-flex align-items-center h-100'}>\r\n                    <p class=\"guest_label\">Last name</p>\r\n                    <ir-input-text\r\n                      maxLength={40}\r\n                      class=\"flex-grow-1 h-100\"\r\n                      id={`last_name_${idx}`}\r\n                      zod={ZSharedPerson.pick({ last_name: true })}\r\n                      error={!!this.error['last_name']}\r\n                      autoValidate={this.autoValidate}\r\n                      wrapKey=\"last_name\"\r\n                      placeholder=\"Last name\"\r\n                      onTextChange={e => this.updateGuestInfo(idx, { last_name: e.detail })}\r\n                      value={guest.last_name}\r\n                    ></ir-input-text>\r\n                  </div>\r\n                  <div class=\"flex-grow-0 m-0 p-0 h-100 d-flex align-items-center\">\r\n                    <p class=\"guest_label\">{locales.entries.Lcz_DOB}</p>\r\n                    <ir-input-text\r\n                      class=\"flex-grow-1 h-100\"\r\n                      id={`dob_${idx}`}\r\n                      zod={ZSharedPerson.pick({ dob: true })}\r\n                      error={!!this.error['dob']}\r\n                      autoValidate={this.autoValidate}\r\n                      wrapKey=\"dob\"\r\n                      mask={dateMask}\r\n                      placeholder=\"\"\r\n                      onTextChange={e => {\r\n                        this.updateGuestInfo(idx, { dob: e.detail });\r\n                      }}\r\n                      value={guest.dob}\r\n                    ></ir-input-text>\r\n                  </div>\r\n                  <div class=\" m-0 p-0 d-flex align-items-center\">\r\n                    <p class=\"guest_label\">{locales.entries.Lcz_Nationality}</p>\r\n                    <div class=\"mx-0 flex-grow-1  h-100\">\r\n                      <ir-country-picker\r\n                        class=\"h-100\"\r\n                        propertyCountry={this.propertyCountry}\r\n                        id={`{locales.entries.Lcz_Nationality}_${idx}`}\r\n                        error={!!this.error['country_id'] && !guest.country_id}\r\n                        country={this.countries?.find(c => c.id?.toString() === guest.country?.id?.toString())}\r\n                        onCountryChange={e => this.updateGuestInfo(idx, { country_id: e.detail?.id?.toString() ?? null, country: e.detail })}\r\n                        countries={this.countries}\r\n                      ></ir-country-picker>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"flex-grow-1 m-0 p-0 d-flex align-items-center\">\r\n                    <p class=\"guest_label\">{locales.entries.Lcz_Documents}</p>\r\n                    <div class={' d-flex m-0 flex-grow-1 h-100'}>\r\n                      <ir-select\r\n                        selectForcedStyles={{\r\n                          borderTopRightRadius: '0px',\r\n                          borderBottomRightRadius: '0px',\r\n                          borderRight: '0',\r\n                        }}\r\n                        selectStyles={'rounded-top-0 rounded-bottom-0'}\r\n                        onSelectChange={e => {\r\n                          this.updateGuestInfo(idx, {\r\n                            id_info: {\r\n                              ...this.guests[idx].id_info,\r\n                              type: {\r\n                                code: e.detail,\r\n                                description: '',\r\n                              },\r\n                            },\r\n                          });\r\n                        }}\r\n                        selectedValue={guest.id_info.type.code}\r\n                        LabelAvailable={false}\r\n                        showFirstOption={false}\r\n                        data={this.idTypes?.map(t => ({ text: t[`CODE_VALUE_${this.language.toUpperCase()}`] ?? t[`CODE_VALUE_EN`], value: t.CODE_NAME }))}\r\n                      ></ir-select>\r\n                      <ir-input-text\r\n                        autoValidate={this.autoValidate}\r\n                        maxLength={18}\r\n                        placeholder=\"12345\"\r\n                        class=\"flex-grow-1 guest_document\"\r\n                        type=\"text\"\r\n                        inputForcedStyle={{ borderTopLeftRadius: '0px', borderBottomLeftRadius: '0px' }}\r\n                        value={guest.id_info.number}\r\n                        zod={ZIdInfo.pick({ number: true })}\r\n                        error={!!this.error['number']}\r\n                        wrapKey=\"number\"\r\n                        inputStyles=\"form-control\"\r\n                        onTextChange={e =>\r\n                          this.updateGuestInfo(idx, {\r\n                            id_info: {\r\n                              ...this.guests[idx].id_info,\r\n                              number: e.detail,\r\n                            },\r\n                          })\r\n                        }\r\n                      ></ir-input-text>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </Fragment>\r\n            ))}\r\n          </div>\r\n          <div class={'d-flex flex-column flex-sm-row mt-3 action-buttons '}>\r\n            <ir-button\r\n              onClick={() => this.closeModal.emit(null)}\r\n              btn_styles=\"justify-content-center\"\r\n              class={`mb-1 mb-sm-0 flex-fill mr-sm-1`}\r\n              icon=\"\"\r\n              text={locales.entries.Lcz_Cancel}\r\n              btn_color=\"secondary\"\r\n            ></ir-button>\r\n\r\n            <ir-button\r\n              btn_styles=\"justify-content-center align-items-center\"\r\n              class={'m-0 flex-fill text-center'}\r\n              icon=\"\"\r\n              isLoading={isRequestPending('/Handle_Exposed_Room_Guests')}\r\n              text={this.checkIn ? locales.entries.Lcz_CheckIn : locales.entries.Lcz_Save}\r\n              btn_color=\"primary\"\r\n              onClickHandler={this.saveGuests.bind(this)}\r\n            ></ir-button>\r\n          </div>\r\n        </section>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",".border-theme {\r\n  border: 1px solid #cacfe7;\r\n}\r\n@keyframes bounce {\r\n  0%,\r\n  100% {\r\n    transform: scale(1);\r\n    animation-timing-function: cubic-bezier(0.8, 0, 1, 1);\r\n  }\r\n  50% {\r\n    transform: scale(1.2);\r\n    animation-timing-function: cubic-bezier(0, 0, 0.2, 1);\r\n  }\r\n}\r\n.bounce-3 {\r\n  animation: bounce 1s 1;\r\n}\r\n","import { Component, Prop, h, Event, EventEmitter, State, Watch, Listen } from '@stencil/core';\r\nimport { selectOption } from '@/common/models';\r\nimport { v4 } from 'uuid';\r\n\r\n@Component({\r\n  tag: 'ir-select',\r\n  styleUrl: 'ir-select.css',\r\n  scoped: true,\r\n})\r\nexport class IrSelect {\r\n  @Prop() name: string;\r\n  @Prop() data: selectOption[];\r\n  @Prop() label = '<label>';\r\n  @Prop() selectStyles: string;\r\n  @Prop() selectForcedStyles: { [key: string]: string };\r\n  @Prop() selectContainerStyle: string;\r\n  @Prop({ reflect: true, mutable: true }) selectedValue = null;\r\n  @Prop() required: boolean;\r\n  @Prop() LabelAvailable: boolean = true;\r\n  @Prop() firstOption: string = 'Select';\r\n  @Prop() selectStyle: boolean = true;\r\n  @Prop() showFirstOption: boolean = true;\r\n  @Prop() submited: boolean = false;\r\n  @Prop() size: 'sm' | 'md' | 'lg' = 'md';\r\n  @Prop() textSize: 'sm' | 'md' | 'lg' = 'md';\r\n  @Prop() labelPosition: 'left' | 'right' | 'center' = 'left';\r\n  @Prop() labelBackground: 'primary' | 'secondary' | 'success' | 'danger' | 'warning' | 'info' | 'light' | 'dark' | null = null;\r\n  @Prop() labelColor: 'primary' | 'secondary' | 'success' | 'danger' | 'warning' | 'info' | 'light' | 'dark' = 'dark';\r\n  @Prop() labelBorder: 'theme' | 'primary' | 'secondary' | 'success' | 'danger' | 'warning' | 'info' | 'light' | 'dark' | 'none' = 'theme';\r\n  @Prop() labelWidth: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 = 3;\r\n  @Prop() select_id: string = v4();\r\n  @Prop() testId: string;\r\n  /** Whether the select has an error */\r\n  @Prop({ mutable: true }) error: boolean = false;\r\n\r\n  @State() initial: boolean = true;\r\n  @State() valid: boolean = false;\r\n  @Event({ bubbles: true, composed: true }) selectChange: EventEmitter;\r\n\r\n  private selectEl: HTMLSelectElement;\r\n\r\n  @Watch('selectedValue')\r\n  watchHandler(newValue: string) {\r\n    if (newValue !== null && this.required) {\r\n      this.valid = true;\r\n    }\r\n  }\r\n  @Watch('submited')\r\n  watchHandler2(newValue: boolean) {\r\n    if (newValue && this.required) {\r\n      this.initial = false;\r\n    }\r\n  }\r\n  @Listen('animateIrSelect', { target: 'body' })\r\n  handleButtonAnimation(e: CustomEvent) {\r\n    console.log(e.detail, this.select_id, e.detail === this.select_id);\r\n    if (!this.selectEl || e.detail !== this.select_id) {\r\n      return;\r\n    }\r\n    console.log('first1');\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    this.selectEl.classList.add('border-danger');\r\n  }\r\n  componentwillload() {}\r\n  disconnectedCallback() {}\r\n  handleSelectChange(event) {\r\n    this.selectEl.classList.remove('border-danger');\r\n    if (this.required) {\r\n      this.initial = false;\r\n      this.valid = event.target.checkValidity();\r\n      this.selectedValue = event.target.value;\r\n      this.selectChange.emit(this.selectedValue);\r\n    } else {\r\n      this.selectedValue = event.target.value;\r\n      this.selectChange.emit(this.selectedValue);\r\n    }\r\n  }\r\n  count = 0;\r\n\r\n  render() {\r\n    let className = 'form-control';\r\n    let label = (\r\n      <div class={`input-group-prepend col-${this.labelWidth} p-0 text-${this.labelColor}`}>\r\n        <label\r\n          htmlFor={this.select_id}\r\n          class={`input-group-text ${this.labelPosition === 'right' ? 'justify-content-end' : this.labelPosition === 'center' ? 'justify-content-center' : ''} ${\r\n            this.labelBackground ? 'bg-' + this.labelBackground : ''\r\n          } flex-grow-1 text-${this.labelColor} border-${this.labelBorder === 'none' ? 0 : this.labelBorder} `}\r\n        >\r\n          {this.label}\r\n          {this.required ? '*' : ''}\r\n        </label>\r\n      </div>\r\n    );\r\n    if (this.selectStyle === false) {\r\n      className = '';\r\n    }\r\n    if (this.required && !this.valid && !this.initial) {\r\n      className = `${className} border-danger`;\r\n    }\r\n\r\n    if (!this.LabelAvailable) {\r\n      label = '';\r\n    }\r\n\r\n    return (\r\n      <div class={`form-group m-0 ${this.selectContainerStyle}`}>\r\n        <div class=\"input-group row m-0\">\r\n          {label}\r\n          <select\r\n            aria-invalid={this.error ? 'true' : 'false'}\r\n            data-testid={this.testId}\r\n            style={this.selectForcedStyles}\r\n            ref={el => (this.selectEl = el)}\r\n            id={this.select_id}\r\n            class={`${this.selectStyles} ${this.error ? 'border-danger' : ''} ${className} form-control-${this.size} text-${this.textSize} col-${\r\n              this.LabelAvailable ? 12 - this.labelWidth : 12\r\n            }`}\r\n            onInput={this.handleSelectChange.bind(this)}\r\n            required={this.required}\r\n          >\r\n            {this.showFirstOption && <option value={''}>{this.firstOption}</option>}\r\n            {this.data.map(item => {\r\n              if (this.selectedValue === item.value) {\r\n                return (\r\n                  <option selected value={item.value}>\r\n                    {item.text}\r\n                  </option>\r\n                );\r\n              } else {\r\n                return <option value={item.value}>{item.text}</option>;\r\n              }\r\n            })}\r\n          </select>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",".backdrop {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100vh;\r\n  cursor: pointer;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  z-index: 99;\r\n  transition: all 0.5s;\r\n  opacity: 0;\r\n  pointer-events: none;\r\n  transition: all 0.5s;\r\n}\r\n.backdrop.active {\r\n  opacity: 1;\r\n  pointer-events: all;\r\n}\r\n\r\n.sidebar-right {\r\n  position: fixed;\r\n  top: 0;\r\n  right: -120%;\r\n  bottom: 0;\r\n  width: var(--sidebar-width, 40rem);\r\n  max-width: 100%;\r\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\r\n  transition: all 0.5s;\r\n  z-index: 100;\r\n  overflow-y: hidden;\r\n  color: var(--sidebar-color, #000);\r\n  background-color: var(--sidebar-backgound, #fff);\r\n  padding: var(--ir-sidebar-padding, 0.5rem 0);\r\n}\r\n.sidebar-right.active {\r\n  right: 0;\r\n  overflow-y: auto;\r\n}\r\n\r\n.sidebar-left {\r\n  position: fixed;\r\n  top: 0;\r\n  left: -100%;\r\n  bottom: 0;\r\n  width: var(--sidebar-width, 30rem);\r\n  max-width: 100%;\r\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\r\n  transition: all 0.5s;\r\n  z-index: 200;\r\n  overflow-y: hidden;\r\n  color: var(--sidebar-color, #000);\r\n  background: var(--sidebar-backgound, #fff);\r\n  padding: var(--ir-sidebar-padding, 0.5rem 0);\r\n}\r\n.sidebar-title {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0 1rem;\r\n  border-bottom: 1px solid #e4e5ec;\r\n}\r\n.sidebar-title p {\r\n  font-weight: 500;\r\n  font-size: 1.2rem;\r\n}\r\n.sidebar-left.active {\r\n  left: 0;\r\n  overflow-y: scroll;\r\n}\r\n.close {\r\n  position: absolute;\r\n  top: 0.5rem;\r\n  right: 1rem;\r\n  width: 1rem;\r\n  height: 1rem;\r\n  cursor: pointer;\r\n}\r\n","import { Component, Prop, h, Method, Event, EventEmitter, Watch } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-sidebar',\r\n  styleUrl: 'ir-sidebar.css',\r\n  shadow: true,\r\n})\r\nexport class IrSidebar {\r\n  @Prop() name: string;\r\n  @Prop() side: 'right' | 'left' = 'right';\r\n  @Prop() showCloseButton: boolean = true;\r\n  @Prop({ mutable: true, reflect: true }) open: boolean = false;\r\n  @Prop() sidebarStyles: Partial<CSSStyleDeclaration>;\r\n  @Prop() label: string;\r\n  @Event({ bubbles: true, composed: true }) irSidebarToggle: EventEmitter;\r\n\r\n  private sidebarRef: HTMLDivElement;\r\n\r\n  applyStyles() {\r\n    for (const property in this.sidebarStyles) {\r\n      if (this.sidebarStyles.hasOwnProperty(property)) {\r\n        this.sidebarRef.style[property] = this.sidebarStyles[property];\r\n      }\r\n    }\r\n  }\r\n  @Watch('sidebarStyles')\r\n  handleSidebarStylesChange() {\r\n    this.applyStyles();\r\n  }\r\n  componentWillLoad() {\r\n    this.handleKeyDown = this.handleKeyDown.bind(this);\r\n  }\r\n\r\n  componentDidLoad() {\r\n    // If esc key is pressed, close the modal\r\n    this.applyStyles();\r\n    document.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  private handleKeyDown(e: KeyboardEvent) {\r\n    if (e.key === 'Escape') {\r\n      return this.toggleSidebar();\r\n    } else {\r\n      return;\r\n    }\r\n  }\r\n\r\n  // Unsubscribe to the event when the component is removed from the DOM\r\n  disconnectedCallback() {\r\n    document.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  @Method()\r\n  async toggleSidebar() {\r\n    this.irSidebarToggle.emit(this.open);\r\n  }\r\n\r\n  render() {\r\n    let className = '';\r\n    if (this.open) {\r\n      className = 'active';\r\n    } else {\r\n      className = '';\r\n    }\r\n\r\n    return [\r\n      <div\r\n        class={`backdrop ${className}`}\r\n        onClick={() => {\r\n          this.toggleSidebar();\r\n        }}\r\n      ></div>,\r\n      <div ref={el => (this.sidebarRef = el)} class={`sidebar-${this.side} ${className}`}>\r\n        {this.showCloseButton && (\r\n          <div class={'sidebar-title'}>\r\n            <p class={'p-0 m-0'}>{this.label}</p>\r\n            <div class={'p-0 m-0 sidebar-icon-container'}>\r\n              <ir-icon\r\n                class=\"\"\r\n                onIconClickHandler={() => {\r\n                  this.toggleSidebar();\r\n                }}\r\n              >\r\n                <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 384 512\" height={20} width={20}>\r\n                  <path\r\n                    fill=\"#6b6f82\"\r\n                    d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\"\r\n                  />\r\n                </svg>\r\n              </ir-icon>\r\n            </div>\r\n          </div>\r\n        )}\r\n        <slot name=\"sidebar-body\" />\r\n      </div>,\r\n    ];\r\n  }\r\n}\r\n",":host {\r\n  width: var(--ir-spinner-size, 1.25rem);\r\n  height: var(--ir-spinner-size, 1.25rem);\r\n  border: var(--ir-spinner-border-width, 2.5px) solid var(--ir-spinner-color, #3f3f3f);\r\n  border-bottom-color: transparent;\r\n  border-radius: 50%;\r\n  display: inline-block;\r\n  box-sizing: border-box;\r\n  animation: rotation 1s linear infinite;\r\n}\r\n\r\n@keyframes rotation {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n","import { Component, Element, Host, Prop, Watch, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-spinner',\r\n  styleUrl: 'ir-spinner.css',\r\n  shadow: true,\r\n})\r\nexport class IrSpinner {\r\n  @Element() el: HTMLIrSpinnerElement;\r\n\r\n  @Prop() size: number;\r\n  @Prop() borderWidth: number;\r\n  @Prop() unit: 'px' | 'rem' = 'rem';\r\n  @Prop() color: string;\r\n\r\n  componentWillLoad() {\r\n    this.initStyles();\r\n  }\r\n  @Watch('size')\r\n  handleSpinnerSizeChange() {\r\n    this.initStyles();\r\n  }\r\n  @Watch('borderWidth')\r\n  handleSpinnerBorderWidthChange() {\r\n    this.initStyles();\r\n  }\r\n  @Watch('unit')\r\n  handleSpinnerUnitChange() {\r\n    this.initStyles();\r\n  }\r\n  @Watch('color')\r\n  handleSpinnerColorChange() {\r\n    this.initStyles();\r\n  }\r\n  private initStyles() {\r\n    if (this.size) {\r\n      this.applyCssElement(`${this.size}${this.unit}`, '--ir-spinner-size');\r\n    }\r\n    if (this.borderWidth) {\r\n      this.applyCssElement(`${this.borderWidth}${this.unit}`, '--ir-spinner-size');\r\n    }\r\n    if (this.color) {\r\n      this.applyCssElement(`${this.color}`, '--ir-spinner-color');\r\n    }\r\n  }\r\n  private applyCssElement(value: string, key: '--ir-spinner-color' | '--ir-spinner-border-width' | '--ir-spinner-size' | (string & {})) {\r\n    this.el.style.setProperty(key, value);\r\n  }\r\n  render() {\r\n    return <Host></Host>;\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  min-width: 20vw;\r\n  height: 100%;\r\n}\r\n@media (min-width: 768px) {\r\n  .collapse-btn {\r\n    display: none;\r\n  }\r\n  #hkTasksFiltersCollapse.collapse:not(.show) {\r\n    display: block;\r\n  }\r\n}\r\n","import { Component, Event, EventEmitter, h, Prop, State } from '@stencil/core';\r\nimport { TaskFilters } from '../types';\r\nimport housekeeping_store from '@/stores/housekeeping.store';\r\nexport type ModifiedTaskFilters = Omit<TaskFilters, 'housekeepers'> & { housekeepers: string };\r\n@Component({\r\n  tag: 'ir-tasks-filters',\r\n  styleUrl: 'ir-tasks-filters.css',\r\n  scoped: true,\r\n})\r\nexport class IrTasksFilters {\r\n  @Prop() isLoading: boolean;\r\n\r\n  @State() filters: ModifiedTaskFilters = {\r\n    cleaning_periods: {\r\n      code: '',\r\n    },\r\n    housekeepers: '000',\r\n    cleaning_frequencies: { code: '' },\r\n    dusty_units: { code: '' },\r\n    highlight_check_ins: { code: '' },\r\n  };\r\n\r\n  @State() collapsed: boolean = false;\r\n\r\n  @Event() applyFilters: EventEmitter<TaskFilters>;\r\n\r\n  private baseFilters: TaskFilters;\r\n\r\n  componentWillLoad() {\r\n    this.baseFilters = {\r\n      cleaning_periods: housekeeping_store?.hk_criteria?.cleaning_periods[0],\r\n      housekeepers: { ids: housekeeping_store.hk_criteria.housekeepers?.map(h => h.id) },\r\n      cleaning_frequencies: housekeeping_store?.hk_criteria?.cleaning_frequencies[0],\r\n      dusty_units: housekeeping_store?.hk_criteria?.dusty_periods[0],\r\n      highlight_check_ins: housekeeping_store?.hk_criteria?.highlight_checkin_options[0],\r\n    };\r\n    this.filters = { ...this.baseFilters, housekeepers: '000' };\r\n  }\r\n\r\n  private updateFilter(params: Partial<ModifiedTaskFilters>) {\r\n    this.filters = { ...this.filters, ...params };\r\n  }\r\n  private applyFiltersEvt(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    this.applyFilters.emit({\r\n      ...this.filters,\r\n      housekeepers: {\r\n        ids: this.filters.housekeepers === '000' ? this.baseFilters.housekeepers.ids : [Number(this.filters.housekeepers)],\r\n      },\r\n    });\r\n  }\r\n  private resetFilters(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    this.filters = { ...this.baseFilters, housekeepers: '000' };\r\n    this.applyFilters.emit({\r\n      ...this.filters,\r\n      housekeepers: {\r\n        ids: this.filters.housekeepers === '000' ? this.baseFilters.housekeepers.ids : [Number(this.filters.housekeepers)],\r\n      },\r\n    });\r\n  }\r\n  render() {\r\n    return (\r\n      <div class=\"card mb-0 p-1 d-flex flex-column\">\r\n        <div class=\"d-flex align-items-center justify-content-between\">\r\n          <div class={'d-flex align-items-center'} style={{ gap: '0.5rem' }}>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" height={18} width={18}>\r\n              <path\r\n                fill=\"currentColor\"\r\n                d=\"M3.9 54.9C10.5 40.9 24.5 32 40 32l432 0c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9 320 448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6l0-79.1L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z\"\r\n              />\r\n            </svg>\r\n            <h4 class=\"m-0 p-0 flex-grow-1\">Filters</h4>\r\n          </div>\r\n          <ir-button\r\n            variant=\"icon\"\r\n            id=\"drawer-icon\"\r\n            data-toggle=\"collapse\"\r\n            data-target=\"#hkTasksFiltersCollapse\"\r\n            aria-expanded={this.collapsed ? 'true' : 'false'}\r\n            aria-controls=\"hkTasksFiltersCollapse\"\r\n            class=\"mr-1 collapse-btn\"\r\n            icon_name={this.collapsed ? 'closed_eye' : 'open_eye'}\r\n            onClickHandler={() => {\r\n              this.collapsed = !this.collapsed;\r\n            }}\r\n            style={{ '--icon-size': '1.6rem' }}\r\n          ></ir-button>\r\n        </div>\r\n        <div class=\"m-0 p-0 collapse\" id=\"hkTasksFiltersCollapse\">\r\n          <div class=\"d-flex flex-column\" style={{ gap: '0.5rem' }}>\r\n            <fieldset class=\"pt-1\">\r\n              <p class=\"m-0 p-0\">Period</p>\r\n              <ir-select\r\n                testId=\"period\"\r\n                selectedValue={this.filters?.cleaning_periods?.code}\r\n                LabelAvailable={false}\r\n                showFirstOption={false}\r\n                data={housekeeping_store?.hk_criteria?.cleaning_periods.map(v => ({\r\n                  text: v.description,\r\n                  value: v.code,\r\n                }))}\r\n                onSelectChange={e => {\r\n                  this.updateFilter({ cleaning_periods: { code: e.detail } });\r\n                }}\r\n              ></ir-select>\r\n            </fieldset>\r\n            {housekeeping_store?.hk_criteria?.housekeepers.length > 1 && (\r\n              <fieldset>\r\n                <p class=\"m-0 p-0\">Housekeepers</p>\r\n                <ir-select\r\n                  testId=\"housekeepers\"\r\n                  selectedValue={this.filters?.housekeepers}\r\n                  LabelAvailable={false}\r\n                  showFirstOption={false}\r\n                  data={[\r\n                    { text: 'All housekeepers', value: '000' },\r\n                    ...housekeeping_store?.hk_criteria?.housekeepers\r\n                      .map(v => ({\r\n                        text: v.name,\r\n                        value: v.id.toString(),\r\n                      }))\r\n                      .sort((a, b) => a.text.toLowerCase().localeCompare(b.text.toLowerCase())),\r\n                  ]}\r\n                  onSelectChange={e => {\r\n                    // if (e.detail === '000') {\r\n                    //   this.updateFilter({ housekeepers: { ids: this.baseFilters?.housekeepers?.ids } });\r\n                    // } else {\r\n                    //   this.updateFilter({ housekeepers: { ids: [e.detail] } });\r\n                    // }\r\n                    this.updateFilter({ housekeepers: e.detail });\r\n                  }}\r\n                ></ir-select>\r\n              </fieldset>\r\n            )}\r\n            <fieldset>\r\n              <p class=\"m-0 p-0\">Cleaning frequency</p>\r\n              <ir-select\r\n                testId=\"cleaning_frequency\"\r\n                selectedValue={this.filters?.cleaning_frequencies?.code}\r\n                LabelAvailable={false}\r\n                showFirstOption={false}\r\n                data={housekeeping_store?.hk_criteria?.cleaning_frequencies.map(v => ({\r\n                  text: v.description,\r\n                  value: v.code,\r\n                }))}\r\n                onSelectChange={e => {\r\n                  this.updateFilter({ cleaning_frequencies: { code: e.detail } });\r\n                }}\r\n              ></ir-select>\r\n            </fieldset>\r\n            <fieldset>\r\n              <p class=\"m-0 p-0\">Include dusty units</p>\r\n              <ir-select\r\n                testId=\"dusty_units\"\r\n                showFirstOption={false}\r\n                LabelAvailable={false}\r\n                selectedValue={this.filters?.dusty_units?.code}\r\n                data={housekeeping_store.hk_criteria?.dusty_periods?.map(v => ({\r\n                  text: v.description,\r\n                  value: v.code,\r\n                }))}\r\n                onSelectChange={e => {\r\n                  e.stopImmediatePropagation();\r\n                  e.stopPropagation();\r\n                  this.updateFilter({ dusty_units: { code: e.detail } });\r\n                }}\r\n              ></ir-select>\r\n            </fieldset>\r\n            <fieldset class=\"mb-1\">\r\n              <p class=\"m-0 p-0\">Highlight check-ins from</p>\r\n              <ir-select\r\n                testId=\"highlight_check_ins\"\r\n                selectedValue={this.filters?.highlight_check_ins?.code}\r\n                LabelAvailable={false}\r\n                showFirstOption={false}\r\n                onSelectChange={e => {\r\n                  this.updateFilter({ highlight_check_ins: { code: e.detail } });\r\n                }}\r\n                data={housekeeping_store.hk_criteria?.highlight_checkin_options?.map(v => ({\r\n                  text: v.description,\r\n                  value: v.code,\r\n                }))}\r\n              ></ir-select>\r\n            </fieldset>\r\n            <div class=\"d-flex align-items-center justify-content-end\" style={{ gap: '1rem' }}>\r\n              <ir-button btn_type=\"button\" data-testid=\"reset\" text=\"Reset\" size=\"sm\" btn_color=\"secondary\" onClickHandler={e => this.resetFilters(e)}></ir-button>\r\n              <ir-button btn_type=\"button\" data-testid=\"apply\" isLoading={this.isLoading} text=\"Apply\" size=\"sm\" onClickHandler={e => this.applyFiltersEvt(e)}></ir-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n","import { Component, Event, EventEmitter, h, Listen, Prop } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-tasks-header',\r\n  styleUrl: 'ir-tasks-header.css',\r\n  scoped: true,\r\n})\r\nexport class IrTasksHeader {\r\n  @Prop() isCleanedEnabled: boolean = false;\r\n\r\n  private btnRef: HTMLIrButtonElement;\r\n\r\n  @Event() headerButtonPress: EventEmitter<{ name: 'cleaned' | 'export' | 'archive' }>;\r\n\r\n  @Listen('animateCleanedButton', { target: 'body' })\r\n  handleCleanedButtonAnimation(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    this.btnRef.bounce();\r\n  }\r\n  render() {\r\n    return (\r\n      <div class=\"d-flex flex-column flex-md-row align-items-md-center justify-content-between\">\r\n        <h3 class=\"mb-1 mb-md-0\">Housekeeping Tasks</h3>\r\n        <div class=\"d-flex\" style={{ gap: '1rem' }}>\r\n          <ir-button\r\n            size=\"sm\"\r\n            btn_color=\"outline\"\r\n            text=\"Export\"\r\n            onClickHandler={e => {\r\n              e.stopImmediatePropagation();\r\n              e.stopPropagation();\r\n              this.headerButtonPress.emit({ name: 'export' });\r\n            }}\r\n            btnStyle={{ height: '100%' }}\r\n            iconPosition=\"right\"\r\n            icon_name=\"file\"\r\n            icon_style={{ '--icon-size': '14px' }}\r\n          ></ir-button>\r\n          <ir-button\r\n            size=\"sm\"\r\n            btn_color=\"outline\"\r\n            text=\"Archives\"\r\n            btnStyle={{ height: '100%' }}\r\n            onClickHandler={e => {\r\n              e.stopImmediatePropagation();\r\n              e.stopPropagation();\r\n              this.headerButtonPress.emit({ name: 'archive' });\r\n            }}\r\n          ></ir-button>\r\n          <ir-button\r\n            onClickHandler={e => {\r\n              e.stopImmediatePropagation();\r\n              e.stopPropagation();\r\n              this.headerButtonPress.emit({ name: 'cleaned' });\r\n            }}\r\n            btnStyle={{ height: '100%' }}\r\n            size=\"sm\"\r\n            btn_disabled={!this.isCleanedEnabled}\r\n            text=\"Cleaned\"\r\n            ref={el => (this.btnRef = el)}\r\n          ></ir-button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.selected-row {\r\n  background-color: rgba(0, 0, 255, 0.1);\r\n}\r\n.selected-row:hover {\r\n  background-color: rgba(0, 0, 255, 0.15);\r\n}\r\n.header-content {\r\n  height: 100%;\r\n}\r\n.sortable {\r\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\r\n}\r\n.sortable svg {\r\n  color: var(--blue);\r\n}\r\n.task-row,\r\n.table th,\r\n.table td {\r\n  white-space: nowrap;\r\n  max-width: max-content !important;\r\n  /* background: white; */\r\n  border: 0;\r\n}\r\n.task-row {\r\n  padding: 0.25rem 0.5rem !important;\r\n}\r\n.extra-padding {\r\n  padding: 0.25rem 1rem !important;\r\n}\r\n.highlighted-unit {\r\n  background: #000;\r\n  color: white;\r\n  padding: 0.2rem 0.3rem;\r\n  border-radius: 4px;\r\n}\r\n.table th,\r\n.table td {\r\n  text-align: start;\r\n}\r\n.table-container {\r\n  max-height: 80vh;\r\n}\r\n/* td,\r\nth {\r\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\r\n  max-width: max-content !important;\r\n \r\n  text-align: start;\r\n}\r\ntr {\r\n  border-bottom: 1px solid #e0e0e0;\r\n} */\r\n.task-table-row {\r\n  background: white !important;\r\n}\r\n.task-table-row:hover {\r\n  background: #e2e6ea3f !important;\r\n}\r\n.selected {\r\n  background: #e3f3fa !important;\r\n}\r\n.sortable:hover {\r\n  color: #212529;\r\n  background-color: #e2e6ea;\r\n  border-color: #dae0e5;\r\n  cursor: pointer;\r\n}\r\n.sortable:active {\r\n  color: #212529;\r\n  background-color: #dae0e5;\r\n  border-color: #d3d9df;\r\n}\r\n","import { Component, Event, EventEmitter, Listen, Prop, State, Watch, h } from '@stencil/core';\r\nimport { Task } from '@/models/housekeeping';\r\nimport moment from 'moment';\r\nimport housekeeping_store from '@/stores/housekeeping.store';\r\n\r\n@Component({\r\n  tag: 'ir-tasks-table',\r\n  styleUrl: 'ir-tasks-table.css',\r\n  scoped: true,\r\n})\r\nexport class IrTasksTable {\r\n  @Prop({ mutable: true }) tasks: Task[] = [];\r\n\r\n  /**\r\n   * Tracks which task IDs are currently selected via checkboxes.\r\n   */\r\n  @State() selectedIds: Task['id'][] = [];\r\n\r\n  /**\r\n   * Controls whether the \"Confirm Clean\" modal is shown.\r\n   */\r\n  @State() showConfirmModal: boolean = false;\r\n\r\n  /**\r\n   * The key we are sorting by (e.g., \"date\", \"unit\", \"status\", \"housekeeper\").\r\n   */\r\n  @State() sortKey: string = 'date';\r\n\r\n  /**\r\n   * The sort direction: ASC or DESC.\r\n   */\r\n  @State() sortDirection: 'ASC' | 'DESC' = 'ASC';\r\n  @State() checkableTasks: Task[] = [];\r\n\r\n  @Event({ bubbles: true, composed: true }) animateCleanedButton: EventEmitter<null>;\r\n  @Event({ bubbles: true, composed: true }) rowSelectChange: EventEmitter<Task[]>;\r\n  @Event({ bubbles: true, composed: true }) sortingChanged: EventEmitter<{ field: string; direction: 'ASC' | 'DESC' }>;\r\n\r\n  componentWillLoad() {\r\n    this.sortTasks('date', 'ASC');\r\n    if (this.tasks) {\r\n      this.assignCheckableTasks();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sorts the tasks by the given key. If no direction is provided,\r\n   * it toggles between ascending and descending.\r\n   */\r\n  private handleSort(key: string) {\r\n    let newDirection = this.sortDirection;\r\n    // If we're clicking the same column, flip the direction. If a new column, default to ASC.\r\n    if (this.sortKey === key) {\r\n      newDirection = this.sortDirection === 'ASC' ? 'DESC' : 'ASC';\r\n    } else {\r\n      newDirection = 'ASC';\r\n    }\r\n    this.sortingChanged.emit({ field: key, direction: newDirection });\r\n    this.sortTasks(key, newDirection);\r\n  }\r\n\r\n  @Listen('clearSelectedHkTasks', { target: 'body' })\r\n  handleClearSelectedHkTasks(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    this.selectedIds = [];\r\n  }\r\n\r\n  @Watch('tasks')\r\n  handleTasksChange(newTasks: Task[]) {\r\n    if (newTasks?.length) {\r\n      this.selectedIds = [];\r\n      this.assignCheckableTasks();\r\n    }\r\n  }\r\n  /**\r\n   * Helper to sort tasks array in state.\r\n   */\r\n  /**\r\n   * Sorts the tasks by the given key in ASC or DESC order.\r\n   * If values for `key` are duplicates, it sorts by `date` ascending.\r\n   * If `date` is also the same, it finally sorts by `unit.name` ascending.\r\n   */\r\n  private sortTasks(key: string, direction: 'ASC' | 'DESC') {\r\n    const sorted = [...this.tasks].sort((a, b) => {\r\n      // Primary comparison: a[key] vs b[key]\r\n      let aPrimary = a[key];\r\n      let bPrimary = b[key];\r\n      if (key === 'status') {\r\n        aPrimary = a[key].description;\r\n        bPrimary = b[key].description;\r\n      }\r\n\r\n      if (aPrimary < bPrimary) {\r\n        return direction === 'ASC' ? -1 : 1;\r\n      }\r\n      if (aPrimary > bPrimary) {\r\n        return direction === 'ASC' ? 1 : -1;\r\n      }\r\n\r\n      // First tiebreaker: compare by date (always ascending)\r\n      if (a.date < b.date) return -1;\r\n      if (a.date > b.date) return 1;\r\n\r\n      // Second tiebreaker: compare by unit.name (always ascending)\r\n      if (a.unit?.name < b.unit?.name) return -1;\r\n      if (a.unit?.name > b.unit?.name) return 1;\r\n\r\n      return 0;\r\n    });\r\n\r\n    // Update component state\r\n    this.tasks = sorted;\r\n    this.sortKey = key;\r\n    this.sortDirection = direction;\r\n  }\r\n\r\n  /**\r\n   * Helper to toggle selection for a single row.\r\n   */\r\n  private toggleSelection(id: Task['id']) {\r\n    if (this.selectedIds.includes(id)) {\r\n      this.selectedIds = this.selectedIds.filter(item => item !== id);\r\n    } else {\r\n      this.selectedIds = [...this.selectedIds, id];\r\n      this.animateCleanedButton.emit(null);\r\n    }\r\n    this.emitSelectedTasks();\r\n  }\r\n\r\n  private emitSelectedTasks() {\r\n    if (this.tasks.length === 0) {\r\n      return;\r\n    }\r\n    const filteredTasks = this.tasks.filter(t => this.selectedIds.includes(t.id));\r\n    this.rowSelectChange.emit(filteredTasks);\r\n  }\r\n\r\n  /**\r\n   * Checks if every row is selected.\r\n   */\r\n  private get allSelected(): boolean {\r\n    return this.checkableTasks.length > 0 && this.selectedIds.length === this.checkableTasks.length;\r\n  }\r\n\r\n  /**\r\n   * Toggles selection on all visible tasks at once.\r\n   */\r\n  private toggleSelectAll() {\r\n    if (this.allSelected) {\r\n      this.selectedIds = [];\r\n    } else {\r\n      this.selectedIds = this.checkableTasks.map(t => t.id);\r\n      this.animateCleanedButton.emit(null);\r\n    }\r\n    this.emitSelectedTasks();\r\n  }\r\n\r\n  /**\r\n   * Assigns checkable tasks based on predefined criteria.\r\n   *\r\n   * This method filters tasks and determines which ones are eligible\r\n   * to be selected using checkboxes. A task is considered \"checkable\"\r\n   * if its date is today or earlier.\r\n   *\r\n   * The filtered tasks are stored in `this.checkableTasks`, ensuring\r\n   * only relevant tasks can be interacted with by users.\r\n   */\r\n  private assignCheckableTasks() {\r\n    const tasks = [];\r\n    this.tasks.forEach(task => {\r\n      if (this.isCheckable(task)) {\r\n        tasks.push(task);\r\n      }\r\n    });\r\n    this.checkableTasks = [...tasks];\r\n  }\r\n\r\n  /**\r\n   * Determines if a task is checkable.\r\n   *\r\n   * A task is considered checkable if its date is today or any day before.\r\n   * This prevents users from selecting tasks with future dates.\r\n   *\r\n   * @param {string} date - The task's date in 'YYYY-MM-DD' format.\r\n   * @returns {boolean} - Returns `true` if the task's date is today or earlier, otherwise `false`.\r\n   */\r\n  private isCheckable(task: Task): boolean {\r\n    // if (!task.hkm_id) {\r\n    //   return false;\r\n    // }\r\n    return moment(task.date, 'YYYY-MM-DD').isSameOrBefore(moment(), 'days');\r\n  }\r\n\r\n  render() {\r\n    const haveManyHousekeepers = housekeeping_store?.hk_criteria?.housekeepers?.length > 1;\r\n    return (\r\n      <div class=\"card table-container h-100 p-1 m-0 table-responsive\">\r\n        <table class=\"table\" data-testid=\"hk_tasks_table\">\r\n          <thead class=\"table-header\">\r\n            <tr>\r\n              <th class={'task-row'}>\r\n                <ir-checkbox\r\n                  indeterminate={this.selectedIds.length > 0 && this.selectedIds.length < this.checkableTasks.length}\r\n                  checked={this.allSelected}\r\n                  onCheckChange={() => this.toggleSelectAll()}\r\n                ></ir-checkbox>\r\n              </th>\r\n              <th class=\"extra-padding\">Period</th>\r\n              <th class=\"extra-padding\">Unit</th>\r\n              <th class={'sortable extra-padding'} onClick={() => this.handleSort('status')}>\r\n                <div class={'d-flex align-items-center'} style={{ gap: '0.5rem' }}>\r\n                  <span>Status</span>\r\n                  <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    width=\"16\"\r\n                    height=\"16\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    stroke-width=\"2\"\r\n                    stroke-linecap=\"round\"\r\n                    stroke-linejoin=\"round\"\r\n                    class=\"lucide lucide-arrow-up-down\"\r\n                  >\r\n                    <path d=\"m21 16-4 4-4-4\" />\r\n                    <path d=\"M17 20V4\" />\r\n                    <path d=\"m3 8 4-4 4 4\" />\r\n                    <path d=\"M7 4v16\" />\r\n                  </svg>\r\n                </div>\r\n              </th>\r\n              <th class=\"extra-padding\">Hint</th>\r\n              <th>A</th>\r\n              <th>C</th>\r\n              <th>I</th>\r\n              {haveManyHousekeepers && (\r\n                <th style={{ textAlign: 'start' }} class={'sortable extra-padding'} onClick={() => this.handleSort('housekeeper')}>\r\n                  <div class={'d-flex align-items-center'} style={{ gap: '0.5rem' }}>\r\n                    <span>Housekeeper</span>\r\n                    <svg\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                      width=\"16\"\r\n                      height=\"16\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      stroke-width=\"2\"\r\n                      stroke-linecap=\"round\"\r\n                      stroke-linejoin=\"round\"\r\n                      class=\"lucide lucide-arrow-up-down\"\r\n                    >\r\n                      <path d=\"m21 16-4 4-4-4\" />\r\n                      <path d=\"M17 20V4\" />\r\n                      <path d=\"m3 8 4-4 4 4\" />\r\n                      <path d=\"M7 4v16\" />\r\n                    </svg>\r\n                  </div>\r\n                </th>\r\n              )}\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n            {this.tasks.length === 0 && (\r\n              <tr>\r\n                <td colSpan={9} class=\"text-center\">\r\n                  <div style={{ height: '300px' }} class=\"d-flex align-items-center justify-content-center\">\r\n                    <span> No Tasks Found</span>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            )}\r\n            {this.tasks.map(task => {\r\n              const isSelected = this.selectedIds.includes(task.id);\r\n              const isCheckable = this.isCheckable(task);\r\n              return (\r\n                <tr\r\n                  data-date={task.date}\r\n                  data-testid={`hk_task_row`}\r\n                  data-assigned={task.housekeeper ? 'true' : 'false'}\r\n                  style={isCheckable && { cursor: 'pointer' }}\r\n                  onClick={() => {\r\n                    if (!isCheckable) {\r\n                      return;\r\n                    }\r\n                    this.toggleSelection(task.id);\r\n                  }}\r\n                  class={{ 'selected': isSelected, 'task-table-row': true }}\r\n                  key={task.id}\r\n                >\r\n                  <td class=\"task-row \">{isCheckable && <ir-checkbox checked={isSelected}></ir-checkbox>}</td>\r\n                  <td class=\"task-row extra-padding\">{task.formatted_date}</td>\r\n                  <td class=\"task-row extra-padding\">\r\n                    <span class={{ 'highlighted-unit': task.is_highlight }}>{task.unit.name}</span>\r\n                  </td>\r\n                  <td class=\"task-row extra-padding\">{task.status.description}</td>\r\n                  <td class=\"task-row extra-padding\">{task.hint}</td>\r\n                  <td class=\"task-row\">{task.adult}</td>\r\n                  <td class=\"task-row\">{task.child}</td>\r\n                  <td class=\"task-row\">{task.infant}</td>\r\n                  {haveManyHousekeepers && (\r\n                    <td class=\"w-50 task-row extra-padding\" style={{ textAlign: 'start' }}>\r\n                      {task.housekeeper ?? 'Unassigned'}\r\n                    </td>\r\n                  )}\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",".prepend-textarea {\r\n  padding: 0 !important ;\r\n}\r\n.ta-prepend-text {\r\n  width: 100%;\r\n}\r\n","import { Component, Event, EventEmitter, Prop, State, Watch, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-textarea',\r\n  styleUrl: 'ir-textarea.css',\r\n  scoped: true,\r\n})\r\nexport class IrTextArea {\r\n  @Prop() rows = 3;\r\n  @Prop() cols = 5;\r\n  @Prop() text = '';\r\n  @Prop() label = '<label>';\r\n  @Prop() placeholder = '<placeholder>';\r\n  @Prop() value = '';\r\n  @Prop() maxLength: number = 250;\r\n  @Prop() textareaClassname: string;\r\n  @Prop() variant: 'default' | 'prepend' = 'default';\r\n  @Prop() labelWidth: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 = 3;\r\n  @Prop() styles: { [key: string]: string };\r\n  @Prop() testId: string;\r\n\r\n  @State() error = false;\r\n\r\n  @Event() textChange: EventEmitter<string>;\r\n\r\n  @Watch('aria-invalid')\r\n  handleAriaInvalidChange(newValue) {\r\n    this.error = newValue === 'true';\r\n  }\r\n  connectedCallback() {}\r\n  disconnectedCallback() {}\r\n  render() {\r\n    if (this.variant === 'prepend') {\r\n      return (\r\n        <fieldset class=\"input-group\">\r\n          <div class={`input-group-prepend col-${this.labelWidth} prepend-textarea`}>\r\n            <span class=\"input-group-text ta-prepend-text\">{this.label}</span>\r\n          </div>\r\n          <textarea\r\n            data-testid={this.testId}\r\n            value={this.value}\r\n            class={`form-control`}\r\n            style={{ height: '7rem', ...this.styles }}\r\n            maxLength={this.maxLength}\r\n            onChange={e => this.textChange.emit((e.target as HTMLTextAreaElement).value)}\r\n            aria-label={this.label}\r\n          ></textarea>\r\n        </fieldset>\r\n      );\r\n    }\r\n    return (\r\n      <div class={'form-group'}>\r\n        <label>{this.label}</label>\r\n        <textarea\r\n          data-testid={this.testId}\r\n          style={this.styles}\r\n          maxLength={this.maxLength}\r\n          rows={this.rows}\r\n          value={this.value}\r\n          class={`form-control ${this.textareaClassname} ${this.error ? 'border-danger' : ''}`}\r\n          placeholder={this.placeholder}\r\n          onInput={e => this.textChange.emit((e.target as HTMLTextAreaElement).value)}\r\n        ></textarea>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  padding: 0px 0;\r\n  margin-bottom: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n}\r\n:host([border-shown]) {\r\n  border-bottom: 1px solid #e4e5ec !important;\r\n  border-color: #e4e5ec !important ;\r\n  padding-bottom: 15px;\r\n}\r\n:host([display-context='sidebar']) {\r\n  padding: 15px 0;\r\n  justify-content: space-between !important;\r\n  width: 100% !important;\r\n  border-bottom: 1px solid #e4e5ec !important;\r\n  border-color: #e4e5ec !important ;\r\n}\r\n.title-body {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n@media only screen and (max-width: 641px) {\r\n  :host {\r\n    flex-direction: column;\r\n    gap: 8px;\r\n    align-items: flex-start;\r\n  }\r\n  :host([display-context='sidebar']) {\r\n    flex-direction: row;\r\n  }\r\n}\r\n","import { Component, Element, Event, EventEmitter, Host, Prop, Watch, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-title',\r\n  styleUrl: 'ir-title.css',\r\n  scoped: true,\r\n})\r\nexport class IrTitle {\r\n  @Prop() label: string;\r\n  @Prop({ reflect: true }) borderShown: boolean;\r\n  @Prop({ reflect: true }) displayContext: 'default' | 'sidebar' = 'default';\r\n  @Prop({ reflect: true }) justifyContent:\r\n    | 'center'\r\n    | 'start'\r\n    | 'end'\r\n    | 'flex-start'\r\n    | 'flex-end'\r\n    | 'left'\r\n    | 'right'\r\n    | 'normal'\r\n    | 'space-between'\r\n    | 'space-around'\r\n    | 'space-evenly'\r\n    | 'stretch'\r\n    | 'safe center'\r\n    | 'unsafe center' = 'start';\r\n  @Event() closeSideBar: EventEmitter<null>;\r\n  @Element() el: HTMLElement;\r\n\r\n  componentDidLoad() {\r\n    this.el.style.justifyContent = this.justifyContent;\r\n  }\r\n  @Watch('justifyContent')\r\n  handleJustifyContentChange(newValue: string, oldValue: string) {\r\n    if (newValue !== oldValue) {\r\n      this.el.style.justifyContent = newValue;\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <h4 class=\"text-left font-medium-2 py-0 my-0\">{this.label}</h4>\r\n        {this.displayContext === 'sidebar' && (\r\n          <ir-icon\r\n            class={'close'}\r\n            onIconClickHandler={() => {\r\n              this.closeSideBar.emit(null);\r\n            }}\r\n          >\r\n            <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 384 512\" height={20} width={20}>\r\n              <path d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\" />\r\n            </svg>\r\n          </ir-icon>\r\n        )}\r\n        {this.displayContext !== 'sidebar' && (\r\n          <div class={'title-body'}>\r\n            <slot name=\"title-body\"></slot>\r\n          </div>\r\n        )}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","button,\r\np,\r\nh3,\r\ndiv {\r\n  all: unset;\r\n}\r\n:host {\r\n  --rd-viewport-padding: 25px;\r\n  --rd-success: #2b9a66;\r\n  position: fixed;\r\n  bottom: 0;\r\n  right: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: var(--rd-viewport-padding);\r\n  gap: 10px;\r\n  max-width: 100vw;\r\n  margin: 0;\r\n  list-style: none;\r\n  z-index: 2147483647;\r\n  outline: none;\r\n  pointer-events: none;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n}\r\n@media (prefers-color-scheme: dark) {\r\n  :host {\r\n    --rd-success: #33b074;\r\n  }\r\n}\r\np {\r\n  color: hsla(222.2, 84%, 4.9%, 0.8);\r\n  font-size: 13px;\r\n  line-height: 1.3;\r\n}\r\nh1,\r\nh2,\r\nh3,\r\nh4,\r\nh5,\r\nh6 {\r\n  font-weight: 500;\r\n  color: hsl(222.2, 84%, 4.9%);\r\n  font-size: 15px;\r\n}\r\n:host([position='top-left']) {\r\n  top: 0;\r\n  left: 0;\r\n}\r\n:host([position='top-right']) {\r\n  top: 0;\r\n  right: 0;\r\n}\r\n:host([position='bottom-left']) {\r\n  bottom: 0;\r\n  left: 0;\r\n}\r\n:host([position='bottom-right']) {\r\n  bottom: 0;\r\n  right: 0;\r\n}\r\n.icon-container {\r\n  height: 25px;\r\n  width: 25px;\r\n  border-radius: 25px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 0;\r\n  margin: 0;\r\n  /* position: absolute;\r\n  top: 50%;\r\n  right: calc(var(--rd-viewport-padding) / 2); \r\n  transform: translateY(-50%);*/\r\n}\r\n.icon-container > svg {\r\n  margin: 0;\r\n  color: white;\r\n  stroke-width: 5px;\r\n}\r\n.success {\r\n  background-color: var(--rd-success);\r\n}\r\n.error {\r\n  background-color: red;\r\n}\r\n.ToastRoot {\r\n  background-color: hsl(0, 0%, 100%);\r\n  border-radius: 0.5rem;\r\n  box-shadow: hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px;\r\n  padding: 15px;\r\n  display: grid;\r\n  grid-template-areas: 'title action' 'description action';\r\n  grid-template-columns: auto max-content;\r\n  column-gap: 15px;\r\n  align-items: center;\r\n  pointer-events: none;\r\n  opacity: 0;\r\n  border: 1px solid hsl(214.3, 31.8%, 91.4%);\r\n  position: relative;\r\n}\r\n.ToastRoot[data-state='open'] {\r\n  pointer-events: all;\r\n  animation: slideIn 150ms cubic-bezier(0.16, 1, 0.3, 1);\r\n}\r\n.ToastRoot[data-state='closed'] {\r\n  pointer-events: none;\r\n  animation: hide 100ms ease-in;\r\n}\r\n\r\n@-webkit-keyframes slideIn {\r\n  from {\r\n    transform: translateX(var(--rd-offset-width));\r\n  }\r\n  to {\r\n    transform: translateX(0);\r\n  }\r\n}\r\n@keyframes slideIn {\r\n  from {\r\n    transform: translateX(var(--rd-offset-width));\r\n  }\r\n  to {\r\n    transform: translateX(0);\r\n  }\r\n}\r\n.ToastTitle {\r\n  grid-area: title;\r\n  font-weight: 500;\r\n  color: hsl(222.2, 84%, 4.9%);\r\n  font-size: 15px;\r\n}\r\n\r\n.ToastDescription {\r\n  grid-area: description;\r\n  margin: 0;\r\n  margin-top: 5px;\r\n  color: hsla(222.2, 84%, 4.9%, 0.8);\r\n  font-size: 13px;\r\n  line-height: 1.3;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.ToastAction {\r\n  grid-area: action;\r\n}\r\n","import { Component, Host, Element, Listen, Prop, h, State } from '@stencil/core';\r\nimport { TPositions, IToast } from './toast';\r\n\r\n@Component({\r\n  tag: 'ir-toast',\r\n  styleUrl: 'ir-toast.css',\r\n  scoped: true,\r\n})\r\nexport class IrToast {\r\n  @Prop({ reflect: true, mutable: true }) position: TPositions = 'bottom-left';\r\n  @Element() element: HTMLElement;\r\n  @State() toasts: IToast[] = [];\r\n  @Listen('toast', { target: 'body' })\r\n  onToast(event: CustomEvent<IToast>) {\r\n    const toast: IToast = event.detail;\r\n    this.showToast(toast);\r\n  }\r\n  showToast(toast: IToast) {\r\n    const toastrOptions = {\r\n      positionClass: 'toast-top-right',\r\n      closeButton: true,\r\n      timeOut: toast.duration || 5000,\r\n    };\r\n\r\n    switch (toast.type) {\r\n      case 'success':\r\n        toastr.success(toast.title, '', toastrOptions);\r\n        break;\r\n      case 'error':\r\n        toastr.error(toast.title, '', toastrOptions);\r\n        break;\r\n    }\r\n  }\r\n  render() {\r\n    return <Host></Host>;\r\n  }\r\n}\r\n",":host {\r\n  position: relative;\r\n}\r\n.tooltip-icon {\r\n  margin: 0 5px;\r\n  padding: 0;\r\n}\r\n/* p {\r\n  position: absolute;\r\n  top: 10px;\r\n  background-color: antiquewhite;\r\n  border-radius: 7px;\r\n  padding: 10px 15px;\r\n  z-index: 1000000;\r\n} */\r\n.tooltip-inner-custom {\r\n  min-width: max-content !important;\r\n}\r\n","import { Component, Host, Prop, State, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-tooltip',\r\n  styleUrl: 'ir-tooltip.css',\r\n  scoped: true,\r\n})\r\nexport class IrTooltip {\r\n  @Prop({ reflect: true }) message: string;\r\n  @Prop() withHtml: boolean = true;\r\n  @Prop() customSlot: boolean = false;\r\n\r\n  @State() open: boolean;\r\n  tooltipTimeout: any;\r\n  toggleOpen(shouldOpen: boolean) {\r\n    if (this.tooltipTimeout) {\r\n      clearTimeout(this.tooltipTimeout);\r\n    }\r\n\r\n    if (shouldOpen) {\r\n      this.tooltipTimeout = setTimeout(() => {\r\n        this.open = true;\r\n      }, 300);\r\n    } else {\r\n      this.open = false;\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <Host class=\"m-0 p-0\">\r\n        <span class={'m-0 p-0 d-flex align-items-center justify-content-center'} onMouseEnter={() => this.toggleOpen(true)} onMouseLeave={() => this.toggleOpen(false)}>\r\n          {/* <i\r\n            class=\"ml-1 ft-info\"\r\n            data-toggle=\"tooltip\"\r\n            data-placement=\"top\"\r\n            data-original-title=\"Info popup\"\r\n          ></i> */}\r\n\r\n          {!this.customSlot ? (\r\n            // <svg data-toggle=\"tooltip\" data-placement=\"top\" xmlns=\"http://www.w3.org/2000/svg\" height=\"16\" width=\"16\" class=\"tooltip-icon\" viewBox=\"0 0 512 512\">\r\n            //   <path\r\n            //     fill=\"#6b6f82\"\r\n            //     d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z\"\r\n            //   />\r\n            // </svg>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class={'m-0 p-0'} height=\"16\" width=\"16\" viewBox=\"0 0 512 512\">\r\n              <path\r\n                fill=\"#6b6f82\"\r\n                d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z\"\r\n              />\r\n            </svg>\r\n          ) : (\r\n            <slot name=\"tooltip-trigger\"></slot>\r\n          )}\r\n        </span>\r\n        {this.open && (\r\n          <div class=\"tooltip bottom show position-absolute\" role=\"tooltip\">\r\n            <div class=\"tooltip-arrow\"></div>\r\n            <div class={`tooltip-inner fit ${this.customSlot && 'tooltip-inner-custom'}`}>\r\n              <span innerHTML={this.message}></span>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","* {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n:host {\r\n  display: flex;\r\n  margin-bottom: 5px;\r\n  gap: 5px;\r\n  width: 100%;\r\n}\r\n.label_title {\r\n  min-width: max-content;\r\n  padding: 0;\r\n  margin: 0;\r\n  font-weight: 600;\r\n}\r\nul {\r\n  margin: 0 3px;\r\n  padding: 0;\r\n  list-style: none;\r\n  overflow: hidden;\r\n  width: 100%;\r\n  word-wrap: break-word !important;\r\n  overflow-wrap: break-word !important;\r\n}\r\nli {\r\n  width: 100%;\r\n  line-height: 1.5;\r\n  margin: 0;\r\n  padding: 0;\r\n  word-wrap: break-word !important;\r\n  overflow-wrap: break-word !important;\r\n}\r\n\r\nbutton {\r\n  background: white;\r\n  color: var(--blue);\r\n  padding: 0;\r\n  margin: 0;\r\n  margin-left: 3px;\r\n  font-size: 12px;\r\n  border: 0;\r\n}\r\nbutton:hover {\r\n  color: #355270;\r\n}\r\n","import { Component, Host, Prop, State, h } from '@stencil/core';\r\nimport { v4 } from 'uuid';\r\nimport { IOtaNotes } from '@/models/booking.dto';\r\nimport locales from '@/stores/locales.store';\r\n@Component({\r\n  tag: 'ota-label',\r\n  styleUrl: 'ota-label.css',\r\n  scoped: true,\r\n})\r\nexport class OtaLabel {\r\n  @Prop() label: string;\r\n  @Prop() remarks: IOtaNotes[];\r\n  @Prop() maxVisibleItems: number = 3;\r\n\r\n  @State() showAll: boolean = false;\r\n\r\n  toggleShowAll = () => {\r\n    this.showAll = !this.showAll;\r\n  };\r\n\r\n  render() {\r\n    if (!this.remarks) {\r\n      return null;\r\n    }\r\n\r\n    const displayedRemarks = this.showAll ? this.remarks : this.remarks.slice(0, this.maxVisibleItems);\r\n\r\n    return (\r\n      <Host>\r\n        <p class={'label_title'}>{this.label}</p>\r\n        <ul>\r\n          {displayedRemarks.map((remark, index) => (\r\n            <li key={v4()}>\r\n              - {remark.statement}{' '}\r\n              {this.remarks.length > this.maxVisibleItems && index === displayedRemarks.length - 1 && (\r\n                <button onClick={this.toggleShowAll}>{this.showAll ? locales.entries.Lcz_ShowLess : locales.entries.Lcz_ShowMore}</button>\r\n              )}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n        {/* Show toggle button if there are more remarks than `maxVisibleItems` */}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}