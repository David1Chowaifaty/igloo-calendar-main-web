import{r as t,h as s,H as o,c as i,g as e}from"./p-b4b99085.js";import{v as c}from"./p-4ed69de7.js";const a=[{isCSS:true,link:"https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i%7CQuicksand:300,400,500,700"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/bootstrap.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/bootstrap-extended.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/colors.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/core/menu/menu-types/horizontal-menu.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/core/colors/palette-gradient.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/components.css"},{isCSS:true,link:"https://x.igloorooms.com/assets/css/style.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/icheck.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/custom.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/pages/login-register.css"}];const h=class{constructor(s){t(this,s);this.extraResources="";this.resources=a}componentWillLoad(){this.parseRefs()}componentDidLoad(){this.initializeStyles()}hrefsChanged(){this.parseRefs();this.initializeStyles()}parseRefs(){if(this.extraResources!=="")this.resources.push(JSON.parse(this.extraResources))}appendTag(t,s){const o=document.createElement(t);const i=[];Object.keys(s).forEach((t=>{o.setAttribute(t,s[t]);i.push(`[${t}="${s[t]}"]`)}));const e=`${t}${i.join("")}`;const c=document.querySelector(e);if(!c){document.head.appendChild(o)}}initializeStyles(){this.resources.forEach((t=>{if(t.isCSS){this.appendTag("link",{href:t.link,rel:"stylesheet",type:"text/css"})}if(t.isJS){this.appendTag("script",{src:t.link})}}))}render(){return s(o,{key:"798b4773049242cdf3bedae41741749caabe1ee7"},s("slot",{key:"d9a5d89bf7df1bf1ca2fdafa34f00427c6ba1653"}))}static get watchers(){return{extraResources:["hrefsChanged"]}}};const n='.sc-ir-m-combobox-h{position:relative;display:block}.dropdown.sc-ir-m-combobox{position:absolute;top:100%;left:0;z-index:1000;width:100%}.dropdown-menu.sc-ir-m-combobox{max-height:200px;overflow-y:auto;min-width:100%;width:100% !important;scroll-behavior:smooth}.dropdown-item.loading.sc-ir-m-combobox,.dropdown-item.no-results.sc-ir-m-combobox{color:#6c757d;cursor:default;pointer-events:none}.dropdown-item.active.sc-ir-m-combobox,.dropdown-item.focused.sc-ir-m-combobox{background-color:var(--blue)}[slot="dropdown-content"].sc-ir-m-combobox .dropdown-item.focused.sc-ir-m-combobox,[slot="dropdown-content"].sc-ir-m-combobox .dropdown-item.active.sc-ir-m-combobox{background-color:#0d6efd !important;color:white !important}[slot="dropdown-content"].sc-ir-m-combobox [data-option].focused.sc-ir-m-combobox,[slot="dropdown-content"].sc-ir-m-combobox [data-option].active.sc-ir-m-combobox{background-color:#0d6efd !important;color:white !important}';const r=n;const d=class{constructor(s){t(this,s);this.optionChange=i(this,"optionChange",7);this.searchQuery=i(this,"searchQuery",7);this.dataMode="static";this.options=[];this.debounceDelay=300;this.loading=false;this.useSlot=false;this.isOpen=false;this.focusedIndex=-1;this.filteredOptions=[];this.slotElements=[];this.id=c();this.dropdownId=`dropdown-${this.id}`;this.handleDocumentClick=t=>{if(!this.el.contains(t.target)){this.closeDropdown()}};this.handleKeyDown=t=>{const s=this.useSlot?this.slotElements.length-1:this.filteredOptions.length-1;switch(t.key){case"ArrowDown":t.preventDefault();if(!this.isOpen){this.openDropdown()}else{this.focusedIndex=Math.min(this.focusedIndex+1,s);if(this.useSlot){this.focusSlotElement(this.focusedIndex)}else{this.scrollToFocusedOption()}}break;case"ArrowUp":t.preventDefault();if(this.isOpen){this.focusedIndex=Math.max(this.focusedIndex-1,0);if(this.useSlot){this.focusSlotElement(this.focusedIndex)}else{this.scrollToFocusedOption()}}break;case"Enter":t.preventDefault();if(this.isOpen&&this.focusedIndex>=0){if(this.useSlot){this.selectSlotElement(this.focusedIndex)}else{this.selectOption(this.filteredOptions[this.focusedIndex])}}else if(!this.isOpen){this.openDropdown()}break;case"Escape":t.preventDefault();this.closeDropdown();break;case"Tab":if(this.isOpen){this.closeDropdown()}break}};this.handleInput=t=>{const s=t.target;const o=s.value;if(this.dataMode==="external"){this.emitSearchQuery(o)}else{const t=this.options.length>0?this.options:[];this.filteredOptions=o?t.filter((t=>t.label.toLowerCase().includes(o.toLowerCase()))):t}this.focusedIndex=-1;if(!this.isOpen){this.openDropdown()}}}async selectOptionFromSlot(t){this.selectOption(t)}watchOptionsChanged(t){this.filteredOptions=t||[];if(this.useSlot){this.updateSlotElements()}}watchUseSlotChanged(){if(this.useSlot){setTimeout((()=>this.updateSlotElements()),0)}}componentWillLoad(){this.initializeOptions()}componentDidLoad(){document.addEventListener("click",this.handleDocumentClick.bind(this));if(this.useSlot){setTimeout((()=>this.updateSlotElements()),0)}}disconnectedCallback(){document.removeEventListener("click",this.handleDocumentClick.bind(this));if(this.debounceTimeout){clearTimeout(this.debounceTimeout)}}handleDocumentKeyDown(t){var s;if(!this.isOpen)return;if(t.key==="Escape"){this.closeDropdown();(s=this.inputRef)===null||s===void 0?void 0:s.focus()}}initializeOptions(){this.filteredOptions=this.options.length>0?this.options:[]}openDropdown(){this.isOpen=true;if(this.useSlot){this.focusedIndex=-1;setTimeout((()=>this.updateSlotElements()),0)}else{this.focusedIndex=this.selectedOption?this.filteredOptions.findIndex((t=>t.value===this.selectedOption.value)):-1}}emitSearchQuery(t){if(this.debounceTimeout){clearTimeout(this.debounceTimeout)}this.debounceTimeout=setTimeout((()=>{this.searchQuery.emit(t)}),this.debounceDelay)}closeDropdown(){this.isOpen=false;this.focusedIndex=-1;this.removeSlotFocus()}updateSlotElements(){if(!this.useSlot||!this.dropdownRef)return;const t=this.dropdownRef.querySelector('slot[name="dropdown-content"]');if(t){const s=t.assignedElements?t.assignedElements():Array.from(this.el.querySelectorAll('[slot="dropdown-content"] [data-option]'));this.slotElements=s.length>0?s:Array.from(this.dropdownRef.querySelectorAll('[data-option], .dropdown-item[style*="cursor"]'));this.slotElements.forEach(((t,s)=>{t.setAttribute("data-slot-index",s.toString());t.setAttribute("role","option");t.setAttribute("tabindex","-1")}))}}removeSlotFocus(){this.slotElements.forEach((t=>{t.classList.remove("focused","active");t.removeAttribute("aria-selected")}))}focusSlotElement(t){this.removeSlotFocus();if(t>=0&&t<this.slotElements.length){const s=this.slotElements[t];s.classList.add("focused","active");s.setAttribute("aria-selected","true");s.scrollIntoView({block:"nearest"})}}selectSlotElement(t){if(t>=0&&t<this.slotElements.length){const s=this.slotElements[t];s.click()}}selectOption(t){this.selectedOption=t;this.optionChange.emit(t);this.closeDropdown();this.inputRef.focus()}scrollToFocusedOption(){if(this.focusedIndex<0||!this.dropdownRef||this.useSlot)return;const t=this.dropdownRef.querySelector(`#${this.dropdownId}-option-${this.focusedIndex}`);if(t){t.scrollIntoView({block:"nearest"})}}render(){var t;return s(o,{key:"387e0b1b8011c12a3b8420fc4bdef78ff62da5e3"},s("input",{key:"92200642e8e9ec31f8697a7536d735338dfcaa20",ref:t=>this.inputRef=t,type:"text",class:"form-control",role:"combobox",id:this.id,value:((t=this.selectedOption)===null||t===void 0?void 0:t.label)||"","aria-expanded":String(this.isOpen),"aria-autocomplete":"list","aria-controls":this.dropdownId,"aria-haspopup":"listbox","aria-activedescendant":this.focusedIndex>=0?`${this.dropdownId}-option-${this.focusedIndex}`:null,"aria-label":"Combobox","aria-required":true,onKeyDown:this.handleKeyDown,onInput:this.handleInput}),s("div",{key:"aafc956c838eed8fc28c6fc4301c74fd91d73d83",class:`dropdown ${this.isOpen?"show":""}`},s("div",{key:"cccf2b6c81bfd78d4e3ab493c289b956fd661e6d",ref:t=>this.dropdownRef=t,class:`dropdown-menu ${this.isOpen?"show":""}`,id:this.dropdownId,role:"listbox","aria-expanded":String(this.isOpen)},this.useSlot?s("slot",{name:"dropdown-content"}):[this.loading&&s("div",{class:"dropdown-item loading"},"Loading..."),!this.loading&&this.filteredOptions.length===0&&s("div",{class:"dropdown-item no-results"},"No results found"),!this.loading&&this.filteredOptions.map(((t,o)=>{var i;return s("button",{id:`${this.dropdownId}-option-${o}`,class:`dropdown-item ${this.focusedIndex===o?"active":""}`,role:"option","aria-selected":((i=this.selectedOption)===null||i===void 0?void 0:i.value)===t.value?"true":"false",onClick:()=>this.selectOption(t),onMouseEnter:()=>this.focusedIndex=o},t.label)}))])))}get el(){return e(this)}static get watchers(){return{options:["watchOptionsChanged"],useSlot:["watchUseSlotChanged"]}}};d.style=r;const l=".sc-ir-test-cmp-h{display:block;height:100vh}";const p=l;const m=class{constructor(s){t(this,s);this.countryOptions=[];this.customOptions=[];this.isLoadingCountries=false;this.isLoadingCustom=false;this.staticOptions=[{value:"option1",label:"Option 1"},{value:"option2",label:"Option 2"},{value:"option3",label:"Option 3"},{value:"option4",label:"Option 4"},{value:"option5",label:"Option 5"}];this.handleStaticOptionChange=t=>{this.selectedStaticOption=t.detail};this.handleCountryChange=t=>{this.selectedCountry=t.detail};this.handleCustomOptionChange=t=>{this.selectedCustomOption=t.detail};this.handleCountrySearch=async t=>{const s=t.detail;if(!s||s.length<2){this.countryOptions=[];return}this.isLoadingCountries=true;try{const t=await fetch(`https://restcountries.com/v3.1/name/${encodeURIComponent(s)}`);if(t.ok){const s=await t.json();this.countryOptions=s.map((t=>({value:t.cca2,label:t.name.common}))).slice(0,10)}else{this.countryOptions=[]}}catch(t){console.error("Error fetching countries:",t);this.countryOptions=[]}finally{this.isLoadingCountries=false}};this.handleCustomSearch=async t=>{const s=t.detail;if(!s||s.length<2){this.customOptions=[];return}this.isLoadingCustom=true;setTimeout((()=>{this.customOptions=[{value:`custom-${s}-1`,label:`Custom Result 1 for "${s}"`},{value:`custom-${s}-2`,label:`Custom Result 2 for "${s}"`},{value:`custom-${s}-3`,label:`Custom Result 3 for "${s}"`}];this.isLoadingCustom=false}),500)};this.handleCustomOptionClick=t=>{if(this.customComboboxRef){this.customComboboxRef.selectOptionFromSlot(t)}}}render(){return s(o,{key:"59eb69a1d98caf33cb9235d8a807fd0f8ee13b71",class:"card p-4"},s("div",{key:"e23a4f1755112652f36a34d1c8416d1e408dd534",class:"row g-3"},s("div",{key:"ae45fbd962afcd4b00069b8515f3716af3f04fa0",class:"col-md-4"},s("h5",{key:"8e307170a2d380a2a8835845a0e62a6d52efa07f"},"Static Options Example"),s("ir-m-combobox",{key:"c9ee07c6e35f69d227ba4a7a91da52017c8fbb19",placeholder:"Select an option...",dataMode:"static",options:this.staticOptions,onOptionChange:this.handleStaticOptionChange}),this.selectedStaticOption&&s("p",{key:"bff346eac9a44cb23629fd02293969d73c41ee9e",class:"mt-2 text-muted"},"Selected: ",this.selectedStaticOption.label)),s("div",{key:"ff3de1cd2cee4890ce1c4e4a9efeeb092f957799",class:"col-md-4"},s("h5",{key:"e9f962b483ec2cdfc19c3b202687e9c2bc2df61a"},"External API - Countries"),s("ir-m-combobox",{key:"0c4674019d00a4941dd8ab5f88010fdd65ebbafd",placeholder:"Search countries...",dataMode:"external",options:this.countryOptions,loading:this.isLoadingCountries,debounceDelay:300,onSearchQuery:this.handleCountrySearch,onOptionChange:this.handleCountryChange}),this.selectedCountry&&s("p",{key:"662356952fb0252a3b16bc8aec185cbddd54aa47",class:"mt-2 text-muted"},"Selected: ",this.selectedCountry.label)),s("div",{key:"d63c9a7f1f36cbf99d33acd9ba6b7cdd31627dc7",class:"col-md-4"},s("h5",{key:"fa8ffaa1879a6c86e8ae9b17bbbaead08cd7cf07"},"Custom Dropdown Content"),s("ir-m-combobox",{key:"7d1948a147d24bbf79056cdf92f760c06f310846",ref:t=>this.customComboboxRef=t,placeholder:"Search with custom dropdown...",dataMode:"external",options:this.customOptions,loading:this.isLoadingCustom,useSlot:true,debounceDelay:500,onSearchQuery:this.handleCustomSearch,onOptionChange:this.handleCustomOptionChange},s("div",{key:"0126e8eee984c752b80141793ad8708363482d80",slot:"dropdown-content"},this.isLoadingCustom&&s("div",{key:"52c49757b79142dc6ee262f0448735218fe54530",class:"dropdown-item"},"üîÑ Loading custom results..."),!this.isLoadingCustom&&this.customOptions.length===0&&s("div",{key:"1f6dfbca8db975d287d14d154bd79944b43f1503",class:"dropdown-item"},"üîç Type to search..."),!this.isLoadingCustom&&this.customOptions.map(((t,o)=>s("div",{key:o,class:"dropdown-item d-flex align-items-center","data-option":t.value,"data-label":t.label,onClick:()=>this.handleCustomOptionClick(t),onMouseEnter:t=>{const s=t.target;const o=s.getAttribute("data-slot-index");if(o&&this.customComboboxRef){this.customComboboxRef.focusedIndex=parseInt(o)}},style:{cursor:"pointer"}},s("span",{class:"me-2"},"‚≠ê"),s("div",null,s("div",{class:"fw-bold"},t.label),s("small",{class:"text-muted"},"Custom option with ID: ",t.value))))))),this.selectedCustomOption&&s("p",{key:"421baaee8efa8250d18bd433e1abe8e5b87d6076",class:"mt-2 text-muted"},"Selected: ",this.selectedCustomOption.label))))}};m.style=p;export{h as ir_common,d as ir_m_combobox,m as ir_test_cmp};
//# sourceMappingURL=p-abe50725.entry.js.map