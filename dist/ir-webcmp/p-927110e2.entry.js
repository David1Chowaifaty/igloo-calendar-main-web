import{r as e,c as a,h as i,H as t,g as n,F as s}from"./p-a62d0400.js";import{c,t as l,u as d,a as o,b as r,d as p}from"./p-0bd92c75.js";import{l as h}from"./p-389c26bd.js";import{c as m}from"./p-bb593e1b.js";import"./p-7dbe3a8e.js";const f=".sc-ir-channel-general-h{display:block}.label-style.sc-ir-channel-general{width:6.25rem;text-align:end;padding-right:0.625rem !important}.connection-status.sc-ir-channel-general{display:flex;align-items:center;justify-content:space-between;margin-top:0.625rem !important}.connection-title.sc-ir-channel-general{border-bottom:1px solid #e4e5ec}.ml-18.sc-ir-channel-general{margin-left:18% !important}.status-message.sc-ir-channel-general{display:flex;align-items:center;gap:0.3125rem;font-size:0.81rem;margin:0;padding:0}";const b=f;const g=class{constructor(i){e(this,i);this.connectionStatus=a(this,"connectionStatus",7);this.channel_status=null;this.buttonClicked=false;this.connection_status_message="";this.status=false}componentWillLoad(){var e;if(this.channel_status==="create"||!c.isConnectedToChannel){return}this.connection_status_message=c.isConnectedToChannel?(e=c.selectedChannel.properties.find((e=>e.id===c.channel_settings.hotel_id)))===null||e===void 0?void 0:e.name:"";this.status=true}handleTestConnectionClicked(e){var a,i,t;e.preventDefault();this.buttonClicked=true;if(!((a=c.channel_settings)===null||a===void 0?void 0:a.hotel_id)){return}const n=l();this.status=n;this.connection_status_message=n?(i=c.selectedChannel.properties.find((e=>e.id===c.channel_settings.hotel_id)))===null||i===void 0?void 0:i.name:(t=h.entries)===null||t===void 0?void 0:t.Lcz_IncorrectConnection;this.buttonClicked=false;this.connectionStatus.emit(this.status)}render(){var e,a,n,s,l,r,p,m,f;return i(t,{key:"ee7fb5445fafae060575fb8619ddb2ef6f47753d",class:"px-1"},i("section",{key:"5173814167621ae3429ff42596930ede3d476e03",class:"ml-18"},i("fieldset",{key:"d9661838683f33091388a6176cbc2889d9e79d52",class:"d-flex align-items-center"},i("label",{key:"6530d63917ff044698879975841b508a95f71bbc",htmlFor:"hotel_channels",class:"m-0 p-0 label-style"},(e=h.entries)===null||e===void 0?void 0:e.Lcz_Channel),i("ir-combobox",{key:"251beab99a73a914505b6c55799b62f82e1dcea5",input_id:"hotel_channels",disabled:c.isConnectedToChannel,class:"flex-fill",value:(a=c.selectedChannel)===null||a===void 0?void 0:a.name,onComboboxValueChange:e=>{o(e.detail.data.toString())},data:c.channels.map((e=>({id:e.id,name:e.name})))})),i("fieldset",{key:"7ddff694092cead658bff435aec29bcb5d2c1c79",class:"d-flex align-items-center mt-1"},i("label",{key:"238b6da34d748a958fe175a30b8c450e08777ff2",htmlFor:"hotel_title",class:"m-0 p-0 label-style"},(n=h.entries)===null||n===void 0?void 0:n.Lcz_Title),i("div",{key:"8e66948d82178c43edeae700bd9925e6bbad0d3b",class:"flex-fill"},i("input",{key:"5ade26833319ab5f40097bc175d563b44b412c0f",id:"hotel_title",value:(s=c.channel_settings)===null||s===void 0?void 0:s.hotel_title,onInput:e=>d("hotel_title",e.target.value),class:"form-control  flex-fill"})))),c.selectedChannel&&i("form",{key:"036de78c408c35da4a05cf516d82701bb1c321b6",onSubmit:this.handleTestConnectionClicked.bind(this),class:"mt-3 connection-container"},i("h3",{key:"0940fc7b238b7cb5fb162831728b9fdb96da379c",class:"text-left font-medium-2  py-0 my-0 connection-title py-1 mb-2"},(l=h.entries)===null||l===void 0?void 0:l.Lcz_ConnectionSettings),i("div",{key:"5d58ba0eba2165bf52b362d46ca2bc923e3a52d9",class:"ml-18"},i("fieldset",{key:"34f97fbc2ea6e66ab584bf5ce6e76e21edad2428",class:"d-flex align-items-center my-1"},i("label",{key:"a84529cde07390f3244724c23b97f301e09c20a2",htmlFor:"hotel_id",class:"m-0 p-0 label-style"},(r=h.entries)===null||r===void 0?void 0:r.Lcz_HotelID),i("div",{key:"cb61a464f2afd1c80eb0e097e7fc79dec3bcf0ea",class:"flex-fill"},i("input",{key:"f90b7d313dcf3c11aac589a19265bfc797586981",id:"hotel_id",class:`form-control  flex-fill bg-white ${this.buttonClicked&&!((p=c.channel_settings)===null||p===void 0?void 0:p.hotel_id)&&"border-danger"}`,value:(m=c.channel_settings)===null||m===void 0?void 0:m.hotel_id,onInput:e=>d("hotel_id",e.target.value)}))),i("div",{key:"722483b7981c84c19003264f9e151806f19c8816",class:"connection-status"},i("div",{key:"9d597f0b9b10f0e2da769c1ee31824a63059fc14",class:"status-message"},this.connection_status_message&&(this.status?i("ir-icons",{name:"circle_check",style:{color:"green"}}):i("ir-icons",{name:"danger",style:{color:"yellow"}})),i("span",{key:"311b67058485c8a29255a8ac579111c92ea5f8b3"},this.connection_status_message)),i("button",{key:"c69f10e0f3b8b34e2b189dacf7043bf0beec95c5",class:"btn btn-outline-secondary btn-sm",type:"submit"},(f=h.entries)===null||f===void 0?void 0:f.Lcz_TestConnection)))))}};g.style=b;const u=".sc-ir-channel-header-h{display:block;position:relative;padding:0;margin:0;border-bottom:1px solid #e4e5ec}ul.sc-ir-channel-header{display:flex;align-items:center;gap:2rem;padding:0}li.sc-ir-channel-header{list-style:none !important}.tab.sc-ir-channel-header{font-size:0.95rem;font-weight:400;cursor:pointer;position:relative;margin:0;padding:0;transition:color 0.3s ease;user-select:none}.tab[data-disabled].sc-ir-channel-header{cursor:auto}.tab.sc-ir-channel-header:hover{opacity:80%}.tab[data-state='selected'].sc-ir-channel-header,.tab[data-state='selected'].sc-ir-channel-header:hover{color:var(--blue);opacity:100%}.active-indicator.sc-ir-channel-header{padding:0;bottom:0px;position:absolute;height:3px;border-radius:4px;transition:transform 0.3s ease, width 0.3s ease;background:var(--blue)}";const v=u;const x=class{constructor(i){e(this,i);this.tabChanged=a(this,"tabChanged",7);this.headerTitles=[];this.selectedIndex=0}componentDidLoad(){this.updateActiveIndicator()}disconnectedCallback(){if(this.animationFrameId){cancelAnimationFrame(this.animationFrameId)}}handleTabSelection(e){this.selectedIndex=e;this.updateActiveIndicator();this.tabChanged.emit(this.headerTitles[this.selectedIndex].id)}updateActiveIndicator(){if(this.animationFrameId){cancelAnimationFrame(this.animationFrameId)}requestAnimationFrame((()=>{const e=this.el.querySelector(`li.tab[data-state="selected"]`);if(e){const{left:a,width:i}=e.getBoundingClientRect();const t=this.el.getBoundingClientRect().left;const n=a-t;this.activeIndicator.style.width=`${i}px`;this.activeIndicator.style.transform=`translateX(${n}px)`}}))}render(){return i(t,{key:"8980d01551368949dd5b8087bf00b7d178a76f92"},i("ul",{key:"7c9280ff211b41031980b65593e2bc94bbbd6c12",class:"px-1"},this.headerTitles.map(((e,a)=>i("li",{class:`tab ${e.disabled?"text-light":""}`,key:e.id,onClick:()=>{if(!e.disabled)this.handleTabSelection(a)},"data-disabled":e.disabled,"data-state":this.selectedIndex===a?"selected":""},e.name)))),i("span",{key:"58cc7539e33902447c158271de027b620a9518d3",class:"active-indicator",ref:e=>this.activeIndicator=e}))}get el(){return n(this)}};x.style=v;class y{removedMapping(e,a){let i=[...c.mappedChannels];if(a){const a=m.roomsInfo.find((a=>a.id.toString()===e));i=i.filter((e=>a.rateplans.find((a=>a.id.toString()===e.ir_id))===undefined))}c.mappedChannels=i.filter((a=>a.ir_id!==e))}checkMappingExists(e,a,i){const t=c.mappedChannels.find((a=>a.channel_id===e));if(!t){if(!a){const e=c.mappedChannels.find((e=>e.channel_id.toString()===i));if(!e){return{hide:true,result:undefined,occupancy:undefined}}}return{hide:false,result:undefined,occupancy:undefined}}if(a){const e=m.roomsInfo.find((e=>e.id.toString()===t.ir_id));return{hide:false,occupancy:e.occupancy_default.adult_nbr,result:e}}if(!i){throw new Error("Missing room type id")}const n=c.mappedChannels.find((e=>e.channel_id.toString()===i));const s=m.roomsInfo.find((e=>e.id.toString()===n.ir_id));if(!s){throw new Error("Invalid Room type")}return{hide:false,occupancy:s.occupancy_default.adult_nbr,result:s.rateplans.find((e=>e.id.toString()===t.ir_id))}}getAppropriateRooms(e,a){if(e){const e=m.roomsInfo.filter((e=>c.mappedChannels.find((a=>a.ir_id.toString()===e.id.toString()))===undefined&&e.is_active));return e.map((e=>({id:e.id.toString(),name:e.name,occupancy:e.occupancy_default.adult_nbr})))}if(!a){throw new Error("Missing roomType id")}const i=c.mappedChannels.find((e=>e.channel_id.toString()===a));if(!i){throw new Error("Invalid room type id")}const t=m.roomsInfo.find((e=>e.id.toString()===i.ir_id));return t.rateplans.filter((e=>c.mappedChannels.find((a=>e.id.toString()===a.ir_id))===undefined&&e["is_active"])).map((e=>({id:e.id.toString(),name:e["short_name"],occupancy:t.occupancy_default.adult_nbr})))}}const w=".sc-ir-channel-mapping-h{display:block;box-sizing:border-box;font-size:12px !important;line-height:14px !important}*.sc-ir-channel-mapping{padding:0;margin:0;box-sizing:border-box}.submap-text.sc-ir-channel-mapping{padding-left:10px}.text-blue.sc-ir-channel-mapping{color:var(--blue)}.text-red.sc-ir-channel-mapping{color:var(--red)}li.sc-ir-channel-mapping{list-style:none !important}.refresh-btn.sc-ir-channel-mapping{all:unset;color:var(--blue);cursor:pointer}.selected-map.sc-ir-channel-mapping{flex:1}.selected-map-title.sc-ir-channel-mapping{flex:1}.mapped_row.sc-ir-channel-mapping{display:flex;align-items:center}.mapped_item.sc-ir-channel-mapping+svg.sc-ir-channel-mapping{display:block;flex:0 0 4.166666666666666%;max-width:4.166666666666666%;margin:0}.mapped_row.sc-ir-channel-mapping .mapped_item.sc-ir-channel-mapping{flex:0 0 45.83333333333333%;display:block;max-width:45.83333333333333%}.mapped_item.sc-ir-channel-mapping{margin:0;padding:0;line-height:22px}.mapped_name.sc-ir-channel-mapping{margin-right:5px}.gap-3.sc-ir-channel-mapping{gap:5px}.channel_name.sc-ir-channel-mapping{color:rgba(0, 0, 0, 0.88);font-size:14px;font-weight:700}.mapped_row.rate_plan.sc-ir-channel-mapping,.mapped_row.room_type.sc-ir-channel-mapping{margin-bottom:0px}";const k=w;const _=class{constructor(a){e(this,a);this.mappingService=new y;this.activeMapField="";this.availableRooms=[]}setActiveField(e,a,i){const t=this.mappingService.getAppropriateRooms(a,i);if(t){this.availableRooms=t}this.activeMapField=e}renderMappingStatus(e,a,t,n){var c;if(e.hide){return i("div",null)}if(e.result){return i(s,null,i("div",{class:"pl-2 flex-fill d-sm-none mapped_item text-blue d-flex align-items-center"},i("span",{class:"m-0 p-0 d-flex align-items-center selected-map"},i("span",{class:"selected-map-title"},t?e.result.name:e.result["short_name"]),i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},i("path",{fill:"var(--blue)",d:"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"})),e.occupancy),i("ir-icon",{class:"ml-1 p-0",onIconClickHandler:()=>this.mappingService.removedMapping(e.result.id.toString(),t)},i("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},i("path",{fill:"var(--blue)",d:"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"})))),i("div",{class:"pl-2 flex-fill d-none mapped_item text-blue d-sm-flex align-items-center"},i("span",{class:"mapped_name"},t?e.result.name:e.result["short_name"]),i("div",{class:"d-flex align-items-center gap-3 flex-fill"},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},i("path",{fill:"var(--blue)",d:"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"})),i("span",null,e.occupancy)),i("ir-icon",{class:"ml-1 p-0",onIconClickHandler:()=>this.mappingService.removedMapping(e.result.id.toString(),t)},i("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},i("path",{fill:"var(--blue)",d:"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"})))))}return i("div",{class:"pl-2  flex-fill mapped_item"},this.activeMapField===a?i("ir-combobox",{autoFocus:true,placeholder:(c=h.entries)===null||c===void 0?void 0:c.Lcz_NotMapped,data:this.availableRooms,onComboboxValueChange:e=>{r(e.detail.data,this.activeMapField,t);this.activeMapField=""}}):i("span",{class:"cursor-pointer text-danger",onClick:()=>this.setActiveField(a,t,n)},h.entries.Lcz_NotMapped))}render(){var e,a,n,l,d;return i(t,{key:"b08bc770c039314a510d5f48e64fe674fe22118c",class:"py-md-2 px-md-2"},i("div",{key:"108525f535aba845e49df8bd4ed99c219ea583f9",class:"d-flex p-0 m-0 w-100 justify-content-end"},i("button",{key:"6efa64f442c66cf5d896f702b37c4659fd27ef30",onClick:()=>{p()},class:"btn refresh-btn"},(e=h.entries)===null||e===void 0?void 0:e.Lcz_Refresh)),i("section",{key:"a2c6d8aef70c62028352ba9c1fce2ea534cdbd5f",class:"w-100"},i("div",{key:"51a1602cec4ec207815e269cc3ab75832d00944d",class:"pt-1 mapped_row"},i("p",{key:"097610442af51439467c5e141a7ead0f9be4cb4b",class:"mapped_item channel_name"},(a=c.selectedChannel)===null||a===void 0?void 0:a.name),i("svg",{key:"bfe416a4da38f80dbfc0e972aeabae3132014b51",xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},i("path",{key:"984c9da6c1d5a7dee32be69721089b13e9c6bc97",d:"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"})),i("p",{key:"97072340cbee5ea2345f8707de14e1edd40decd9",class:"pl-2 mapped_item channel_name"},"igloorooms")),i("div",{key:"5f73ee424195db2cd3e3727428cbb3af739fce43"},(d=(l=(n=c.selectedChannel)===null||n===void 0?void 0:n.property)===null||l===void 0?void 0:l.room_types)===null||d===void 0?void 0:d.map((e=>{const a=this.mappingService.checkMappingExists(e.id,true);return i(s,null,i("div",{key:e.id,class:"mapped_row room_type pt-1"},i("p",{class:"mapped_item"},e.name),i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},i("path",{d:"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"})),this.renderMappingStatus(a,e.id,true)),e.rate_plans.map((a=>{const t=this.mappingService.checkMappingExists(a.id,false,e.id);return i("div",{key:a.id,class:" mapped_row rate_plan"},i("p",{class:"pl-1 submap-text mapped_item"},a.name),!t.hide&&i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},i("path",{fill:"currentColor",d:"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"})),this.renderMappingStatus(t,a.id,false,e.id))})))})))))}};_.style=k;export{g as ir_channel_general,x as ir_channel_header,_ as ir_channel_mapping};
//# sourceMappingURL=p-927110e2.entry.js.map