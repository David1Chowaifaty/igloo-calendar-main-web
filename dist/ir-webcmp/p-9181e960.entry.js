import{r as e,h as t,H as s}from"./p-53d64953.js";import{T as i}from"./p-a93581f3.js";import{c as a,m as n}from"./p-6b5d6ebe.js";import"./p-bf44a732.js";import"./p-6c4ba7c0.js";import"./p-b859bcd5.js";import"./p-c226aa13.js";import"./p-a973aec7.js";import"./p-71768c2d.js";const r=":host{display:block;height:100%}.nav{background:white;padding:0.25rem 0}.nav-tabs{border-bottom:0}.nav-link{color:inherit}.active{color:var(--blue)}";const o=r;const l=class{constructor(t){e(this,t);this.isAuthenticated=false;this.token=new i;this.dates={};this.routes=[{name:"Housekeepers",value:"hk"},{name:"Tasks",value:"tasks"},{name:"Front",value:"front"},{name:"Users",value:"users"},{name:"Sales By Country",value:"country-sales"},{name:"Daily Occupancy",value:"daily-occupancy"},{name:"Daily Revenue",value:"daily-revenue"},{name:"Email logs",value:"email-logs"},{name:"Booking Listing",value:"booking-listing"},{name:"Sales by Channel",value:"channel-sales"}]}componentWillLoad(){const e=a();this.generateDates();if(this.ticket){this.isAuthenticated=true;this.token.setToken(this.ticket);this.propertyid=this.propertyid}if(e){this.isAuthenticated=true;this.token.setToken(e.token)}this.inputValue=this.p}handlePChange(){this.inputValue=this.p}handleTicketChange(e,t){if(e!==t){this.isAuthenticated=true;this.token.setToken(this.ticket);this.propertyid=this.propertyid}}generateDates(){var e=new Date;e.setDate(e.getDate()-1);var t=e.toISOString().substring(0,10);e.setDate(e.getDate()+60);var s=e.toISOString().substring(0,10);this.dates={from_date:t,to_date:s}}handleAuthFinish(e){const t=e.detail.token;this.token.setToken(t);this.isAuthenticated=true;n({login:{method:"direct",isLoggedIn:true,token:t}})}render(){if(!this.isAuthenticated)return t(s,null,t("ir-login",{onAuthFinish:this.handleAuthFinish.bind(this)}));return t(s,null,t("div",{class:"px-1 nav flex-column flex-sm-row d-flex align-items-center justify-content-between"},t("div",{class:"d-flex  align-items-center"},t("div",{class:"d-flex align-items-center p-0 m-0",style:{gap:"0.5rem"}},t("h4",{class:"m-0 p-0"},"AName: "),t("form",{class:"input-group",onSubmit:e=>{e.preventDefault();if(this.inputValue){const e=new URL(window.location.href);e.searchParams.set("aname",this.inputValue);window.history.pushState({},"",e)}this.logout()}},t("input",{type:"text",value:this.inputValue,onInput:e=>this.inputValue=e.target.value,style:{maxWidth:"60px"},class:"form-control",placeholder:"AName","aria-label":"AName","aria-describedby":"button-save"}),t("div",{class:"input-group-append"},t("button",{class:"btn btn-sm btn-outline-secondary",type:"submit",id:"button-save"},"save")))),t("ul",{class:"nav  m-0 p-0"},this.routes.map((e=>t("li",{key:e.name,class:" nav-item"},t("a",{class:{"nav-link":true,active:this.currentPage===e.value},href:"#",onClick:()=>{this.currentPage=e.value}},e.name)))))),t("button",{class:"btn btn-sm btn-primary",onClick:()=>{this.logout()}},"Logout")),this.renderPage())}logout(){sessionStorage.removeItem("backend_anchor");window.location.reload()}renderPage(){switch(this.currentPage){case"tasks":return t("ir-hk-tasks",{p:this.p,propertyid:this.propertyid,language:"en",ticket:this.token.getToken()});case"front":return t("igloo-calendar",{currencyName:"USD",propertyid:this.propertyid,p:this.p,ticket:this.token.getToken(),from_date:this.dates.from_date,to_date:this.dates.to_date,language:"en"});case"hk":return t("ir-housekeeping",{p:this.p,propertyid:this.propertyid,language:"en",ticket:this.token.getToken()});case"users":return t("ir-user-management",{userTypeCode:5,p:this.p,propertyid:this.propertyid,language:"en",ticket:this.token.getToken()});case"country-sales":return t("ir-sales-by-country",{p:this.p,propertyid:this.propertyid,language:"en",ticket:this.token.getToken()});case"daily-occupancy":return t("ir-monthly-bookings-report",{p:this.p,propertyid:this.propertyid,language:"en",ticket:this.token.getToken()});case"daily-revenue":return t("ir-daily-revenue",{p:this.p,propertyid:this.propertyid,language:"en",ticket:this.token.getToken()});case"email-logs":return t("ir-booking-email-logs",{ticket:this.token.getToken()});case"booking-listing":return t("ir-booking-listing",{p:this.p,language:"en",propertyid:this.propertyid,ticket:this.token.getToken()});case"channel-sales":return t("ir-sales-by-channel",{language:"en",propertyid:this.propertyid.toString(),ticket:this.token.getToken()});default:return null}}static get watchers(){return{p:["handlePChange"],ticket:["handleTicketChange"]}}};l.style=o;export{l as ir_secure_tasks};
//# sourceMappingURL=p-9181e960.entry.js.map