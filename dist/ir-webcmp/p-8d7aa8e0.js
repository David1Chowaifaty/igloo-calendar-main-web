import{c as o}from"./p-c226aa13.js";import{l as e}from"./p-71768c2d.js";import{a as r}from"./p-bf44a732.js";const t=[{color:"#F9A9FE",design:"skew",name:""},{color:"#ffe502",design:"skew",name:""},{color:"#6FF1EF",design:"skew",name:""},{color:"#9BF091",design:"skew",name:""},{color:"#C28D6B",design:"skew",name:""},{color:"#9B84D6",design:"skew",name:""}];const n={"#31bef1":"#85d0ff","#45b16d":"#bbdbc4","#FF9149":"#ffcfbc","#a0a0a0":"#d5d5d5","#f34752":"#f8727b","#f88c91":"#f8727b","#F9A9FE":"#fcd8ff","#ffe502":"#fff2b4","#6FF1EF":"#c5f8f7","#9BF091":"#d3f8cf","#C28D6B":"#e5b08f","#9B84D6":"#beadf0"};class a{async SetAutomaticCheckInOut(o){const{data:e}=await r.post(`/Set_Automatic_Check_In_Out`,o);if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}return e}async getExposedProperty(e){var t,n;try{const{data:a}=await r.post(`/Get_Exposed_Property`,e);if(a.ExceptionMsg!==""){throw new Error(a.ExceptionMsg)}const s=a.My_Result;o.property=Object.assign(Object.assign({},s),{calendar_extra:s.calendar_extra?JSON.parse(s.calendar_extra):null});o.adultChildConstraints=s.adult_child_constraints;o.cleaning_frequency=s.cleaning_frequency;o.allowedBookingSources=s.allowed_booking_sources;o.allowed_payment_methods=s.allowed_payment_methods;o.currency=s.currency;o.is_vacation_rental=s.is_vacation_rental;o.pickup_service=s.pickup_service;o.max_nights=s.max_nights;o.roomsInfo=s.roomtypes;o.taxes=s.taxes;o.id=s.id;o.country=s.country;o.name=s.name;o.is_automatic_check_in_out=s.is_automatic_check_in_out;o.tax_statement=s.tax_statement;o.is_frontdesk_enabled=s.is_frontdesk_enabled;o.is_pms_enabled=s.is_pms_enabled;const c=(n=(t=s===null||s===void 0?void 0:s.time_constraints)===null||t===void 0?void 0:t.check_out_till)===null||n===void 0?void 0:n.split(":");o.checkin_checkout_hours={offset:s.city.gmt_offset,hour:Number(c[0]||0),minute:Number(c[1]||0)};this.initializeBookingColors();this.generateColorForegrounds();return a}catch(o){console.log(o);throw new Error(o)}}generateColorForegrounds(){var e;const r={};if(!((e=o.property)===null||e===void 0?void 0:e.calendar_legends)){return}o.property.calendar_legends.forEach((o=>{var e;if(o.design==="skew"){r[o.color]={foreground:"white",stripe:(e=n[o.color])!==null&&e!==void 0?e:""}}}));t.forEach((o=>{var e;r[o.color]={foreground:["#C28D6B","#9B84D6"].includes(o.color)?"white":"black",stripe:(e=n[o.color])!==null&&e!==void 0?e:""}}));o.colorsForegrounds=Object.assign({},r)}initializeBookingColors(){var e;const r=(e=o.property.calendar_extra)!==null&&e!==void 0?e:{booking_colors:[]};const n=Array.isArray(r===null||r===void 0?void 0:r.booking_colors)&&r.booking_colors.length?r.booking_colors:t;const a=n.map((o=>this.normalizeBookingColor(o)));this.syncCalendarExtra(a)}normalizeBookingColor(o){return{design:o.design||"skew",color:o.color||"#ffffff",name:o.name||""}}syncCalendarExtra(e){var r;const t=(r=o.property.calendar_extra)!==null&&r!==void 0?r:{};o.property.calendar_extra=Object.assign(Object.assign({},t),{booking_colors:e.map((o=>Object.assign({},o)))})}async fetchLanguage(o,t=["_PMS_FRONT"]){try{const{data:n}=await r.post(`https://gateway.igloorooms.com/IRBE/Get_Exposed_Language`,{code:o,sections:t});if(n.ExceptionMsg!==""){throw new Error(n.ExceptionMsg)}let a=this.transformArrayToObject(n.My_Result.entries);e.entries=Object.assign(Object.assign({},e.entries),a);e.direction=n.My_Result.direction;return{entries:a,direction:n.My_Result.direction}}catch(o){console.log(o);throw new Error(o)}}transformArrayToObject(o){let e={};for(const r of o){e[r.code]=r.description}return e}}export{a as R};
//# sourceMappingURL=p-8d7aa8e0.js.map