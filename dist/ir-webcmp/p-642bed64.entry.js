import{r as e,h as t,H as i,c as a,F as s,g as o}from"./p-53d64953.js";import{b as n,m as l,B as d,d as r,r as c,u as h,g as f}from"./p-111e62af.js";import{l as b}from"./p-71768c2d.js";import{i as p,c as m}from"./p-00df8713.js";import{f as u,a as g,K as v}from"./p-555baa24.js";import{V as y}from"./p-39011dec.js";import{v as k}from"./p-4ed69de7.js";import{h as x}from"./p-6c4ba7c0.js";import{i as w}from"./p-2e94af0d.js";import{z as D}from"./p-b859bcd5.js";import"./p-bf44a732.js";import"./p-a973aec7.js";const C=".sc-igl-application-info-h{display:block}.rate_amount.sc-igl-application-info{display:none;padding:0;margin:0}.booking-header.sc-igl-application-info{display:flex;align-items:center;justify-content:space-between;margin-bottom:0.5rem;gap:0.5rem}.non-ref-span.sc-igl-application-info{font-size:12px;color:var(--green)}.booking-roomtype-title.sc-igl-application-info{font-size:1.25rem;margin-right:0.5rem;margin:0;padding:0}.booking-details-container.sc-igl-application-info{display:flex;align-items:center;justify-content:space-between;padding:0;margin:0}.booking-rateplan.sc-igl-application-info{display:flex;align-items:center;gap:0.5rem;margin:0;padding:0}.booking-rateplan-name.sc-igl-application-info{font-weight:bold;margin:0;padding:0}.booking-tooltip.sc-igl-application-info{margin-right:0.5rem;margin:0;padding:0}.booking-variation.sc-igl-application-info{margin:0;padding:0}.booking-price.sc-igl-application-info{margin:0;padding:0}.booking-footer.sc-igl-application-info{display:flex;align-items:center;justify-content:space-between;padding:0;margin-bottom:0.5rem}.booking-details-container.sc-igl-application-info{display:none}@media (min-width: 768px){.booking-header.sc-igl-application-info{justify-content:flex-start}.booking-footer.sc-igl-application-info,.booking-price.sc-igl-application-info{display:none}.booking-details-container.sc-igl-application-info,.rate_amount.sc-igl-application-info{display:inline-flex;gap:0.5rem}}@media only screen and (min-width: 908px){.aplicationInfoContainer.sc-igl-application-info{max-width:100%}.guest-info-container.sc-igl-application-info,.bed-preference-container.sc-igl-application-info,.unit-select-container.sc-igl-application-info{max-width:250px}}";const _=C;const O=class{constructor(t){e(this,t);this.bedPreferenceType=[];this.bookingType="PLUS_BOOKING";this.totalNights=1;this.isButtonPressed=false;this.variationService=new y}componentWillLoad(){var e,t;if(p(this.rateplanSelection.roomtype.id)){const i=this.filterRooms();if(i.length>0)this.updateGuest({unit:(t=(e=i[0])===null||e===void 0?void 0:e.id)===null||t===void 0?void 0:t.toString()})}}updateGuest(e){const t=this.rateplanSelection.roomtype.id;const i=this.rateplanSelection.ratePlan.id;let a=[...this.rateplanSelection.guest];a[this.roomIndex]=Object.assign(Object.assign({},a[this.roomIndex]),e);n.ratePlanSelections=Object.assign(Object.assign({},n.ratePlanSelections),{[t]:Object.assign(Object.assign({},n.ratePlanSelections[t]),{[i]:Object.assign(Object.assign({},this.rateplanSelection),{guest:[...a]})})})}handleButtonClicked(e){switch(e.detail.key){case"book":case"bookAndCheckIn":case"save":this.isButtonPressed=true;break}}getTooltipMessages(){var e,t,i,a,s,o,n;const{ratePlan:l,selected_variation:d}=this.rateplanSelection;let r=d;if((e=this.guestInfo)===null||e===void 0?void 0:e.infant_nbr){r=this.variationService.getVariationBasedOnInfants({variations:l.variations,baseVariation:d,infants:(t=this.guestInfo)===null||t===void 0?void 0:t.infant_nbr})}if(!r)return;const c=(i=l.variations)===null||i===void 0?void 0:i.find((e=>e.adult_nbr===r.adult_nbr&&e.child_nbr===r.child_nbr));if(!c)return;const h=(s=(a=c.applicable_policies)===null||a===void 0?void 0:a.find((e=>e.type==="cancelation")))===null||s===void 0?void 0:s.combined_statement;const f=(n=(o=c.applicable_policies)===null||o===void 0?void 0:o.find((e=>e.type==="guarantee")))===null||n===void 0?void 0:n.combined_statement;let b="";if(h){b+=`<b><u>Cancellation:</u></b> ${h}<br/>`}if(f){b+=`<b><u>Guarantee:</u></b> ${f}`}return b||undefined}getAmount(){var e,t;if(this.rateplanSelection.is_amount_modified){return this.rateplanSelection.view_mode==="001"?this.rateplanSelection.rp_amount:this.rateplanSelection.rp_amount*this.totalNights}let i=this.rateplanSelection.selected_variation;if((e=this.guestInfo)===null||e===void 0?void 0:e.infant_nbr){i=this.variationService.getVariationBasedOnInfants({variations:this.rateplanSelection.ratePlan.variations,baseVariation:this.rateplanSelection.selected_variation,infants:(t=this.guestInfo)===null||t===void 0?void 0:t.infant_nbr})}return i.discounted_gross_amount}filterRooms(){var e,t,i,a;const s=[];if(!m.is_frontdesk_enabled){return s}(t=(e=this.rateplanSelection.ratePlan)===null||e===void 0?void 0:e.assignable_units)===null||t===void 0?void 0:t.forEach((e=>{if(e.Is_Fully_Available){s.push({name:e.name,id:e.pr_id})}}));const o=this.rateplanSelection.guest.filter(((e,t)=>t!==this.roomIndex)).map((e=>e.unit));const n=s.filter((e=>!o.includes(e.id.toString())));return this.bookingType==="EDIT_BOOKING"?[...n,this.rateplanSelection.roomtype.id===((i=this.baseData)===null||i===void 0?void 0:i.roomtypeId)?(a=this.baseData)===null||a===void 0?void 0:a.unit:null].filter((e=>!!e)).sort(((e,t)=>e.name.localeCompare(t.name))):n}render(){var e,a,s,o,d,r,c,h,f,g,v,y,x;const w=this.filterRooms();const D=this.variationService.formatVariationBasedOnInfants({baseVariation:this.rateplanSelection.selected_variation,infants:this.guestInfo.infant_nbr,variations:this.rateplanSelection.ratePlan.variations});return t(i,{key:"a34e1d7f82c2725736421c4f6cc5ac5bc1f7a238",class:"my-2","data-testid":`room_info_${this.rateplanSelection.ratePlan.id}`},t("div",{key:"26bd28d54899220b976634ed4ab4038ef6285183",class:"booking-header"},(this.bookingType==="PLUS_BOOKING"||this.bookingType==="ADD_ROOM"||this.bookingType==="EDIT_BOOKING")&&t("span",{key:"1de02429a2de2fa156eb4ad1935e56d64b856325",class:"booking-roomtype-title"},this.rateplanSelection.roomtype.name),t("div",{key:"569ee7563b47042b44dfba2aea1c83c81aa4d2b5",class:"booking-details-container"},t("div",{key:"c9ccf34b83461ff86bb48ad0c97c27a9955eebe8",class:"booking-rateplan"},t("p",{key:"7972e0e62e5971346963bf4049ee5a2a645c5a1f",class:"booking-rateplan-name"},this.rateplanSelection.ratePlan.short_name," ",this.rateplanSelection.ratePlan.is_non_refundable&&t("span",{key:"89cd1e61559174caa50a1fa4db47e017304fd155",class:"non-ref-span"},"Non Refundable")),t("ir-tooltip",{key:"f7a4ed7f6172f19e433a429d64fdb482179147ab",class:"booking-tooltip",message:this.getTooltipMessages()})),t("p",{key:"9511d3e197bcb2956e2af509b02a963a3f2f3518",class:"booking-variation",innerHTML:D})),t("p",{key:"f15e296062ac245b673f2834b91ba48ddb483516",class:"booking-price"},u((e=this.currency)===null||e===void 0?void 0:e.symbol,this.getAmount()),"/",b.entries.Lcz_Stay)),t("div",{key:"78d1d0dd6a1d4874a186f784ed5677852789d43a",class:"booking-footer"},t("div",{key:"c4dbf805804a477fad14e6b6e8fb1c90c227ef19",class:"booking-rateplan"},t("p",{key:"4cb20222d879fd8cfbf3493349eabc295ca9035c",class:"booking-rateplan-name"},this.rateplanSelection.ratePlan.short_name),t("ir-tooltip",{key:"f8bba842bb5ea25f16291fa40114bfa44ab88a58",class:"booking-tooltip",message:this.getTooltipMessages()})),t("p",{key:"e5cd10e9ec2fdf4803f91621512b9dc1b310f02f",class:"booking-variation",innerHTML:D})),t("div",{key:"0ffe78190b7b37c169d27f05dd4bb068f2bfb4bf",class:"d-flex flex-column flex-md-row  p-0 align-items-md-center aplicationInfoContainer"},t("div",{key:"d4796e2d93a8dafd4f1803cd2cc895f42aeb23ab",class:"mr-md-1 mb-1 mb-md-0 flex-fill guest-info-container"},t("input",{key:"1e45e18a608f86143660b8766b0dc0f21d2bb8b3",id:k(),type:"text","data-testid":"guest_first_name",class:`form-control ${this.isButtonPressed&&((a=this.guestInfo)===null||a===void 0?void 0:a.first_name)===""&&"border-danger"}`,placeholder:(s=b.entries["Lcz_GuestFirstname"])!==null&&s!==void 0?s:"Guest first name",name:"guestFirstName",onInput:e=>{const t=e.target.value;this.updateGuest({first_name:t});if(n.event_type.type==="EDIT_BOOKING"){l("guest",Object.assign(Object.assign({},n.guest),{name:t}))}},required:true,value:(o=this.guestInfo)===null||o===void 0?void 0:o.first_name})),t("div",{key:"f520442ffb958bb921c77c49b9f3598b89c4a4d7",class:"mr-md-1 flex-fill guest-info-container"},t("input",{key:"167c954e60cc41cf87db7c69a8eb90f064c5f00a",id:k(),type:"text",class:`form-control ${this.isButtonPressed&&((d=this.guestInfo)===null||d===void 0?void 0:d.last_name)===""&&"border-danger"}`,placeholder:(r=b.entries["Lcz_GuestLastname"])!==null&&r!==void 0?r:"Guest last name",name:"guestLastName","data-testid":"guest_last_name",onInput:e=>{const t=e.target.value;this.updateGuest({last_name:t});if(n.event_type.type==="EDIT_BOOKING"){l("guest",Object.assign(Object.assign({},n.guest),{name:t}))}},required:true,value:(c=this.guestInfo)===null||c===void 0?void 0:c.last_name})),m.is_frontdesk_enabled&&!p(this.rateplanSelection.roomtype.id)&&(this.bookingType==="PLUS_BOOKING"||this.bookingType==="ADD_ROOM"||this.bookingType==="EDIT_BOOKING")&&t("div",{key:"8f9e5e543470830572538bb095ea5ff981d02237",class:"mt-1 mt-md-0 d-flex align-items-center flex-fill"},t("div",{key:"ea643c4c8d4ee744ba5d8442d872eb68aa8c7fc2",class:"mr-md-1 p-0 flex-fill preference-select-container"},t("select",{key:"ce2e38dfdd35dad09f76bbf05c9199cd7a326749","data-testid":"unit",class:"form-control input-sm pr-0",id:k(),onChange:e=>this.updateGuest({unit:e.target.value})},t("option",{key:"5af961a5ae0760187899e99f23276c7fb49514f4",value:"",selected:((h=this.guestInfo)===null||h===void 0?void 0:h.unit)===""},b.entries.Lcz_Assignunits),w===null||w===void 0?void 0:w.map((e=>{var i;return t("option",{value:e.id,selected:((i=this.guestInfo)===null||i===void 0?void 0:i.unit)===e.id.toString()},e.name)}))))),this.rateplanSelection.roomtype.is_bed_configuration_enabled&&t("div",{key:"1255c2aaf21a0c551ebbf6bb7bf92195d5c08f57",class:"mt-1 mt-md-0 mr-md-1 flex-fill"},t("select",{key:"e45da1b92c3bdad51ee7d16e4fdcc09e4e94836b","data-testid":"bed_configuration",class:`form-control input-sm ${this.isButtonPressed&&((f=this.guestInfo)===null||f===void 0?void 0:f.bed_preference)===""&&"border-danger"}`,id:k(),onChange:e=>this.updateGuest({bed_preference:e.target.value})},t("option",{key:"e426cbc1307017a2954a8e73ace1e3f5726a417f",value:"",selected:((g=this.guestInfo)===null||g===void 0?void 0:g.bed_preference)===""},b.entries.Lcz_BedConfiguration),this.bedPreferenceType.map((e=>{var i;return t("option",{value:e.CODE_NAME,selected:((i=this.guestInfo)===null||i===void 0?void 0:i.bed_preference)===e.CODE_NAME},e.CODE_VALUE_EN)})))),t("p",{key:"ea3c4c383b0e5009af58a134cc9d178aa6f58e00",class:"rate_amount"},u((v=this.currency)===null||v===void 0?void 0:v.symbol,this.getAmount()),"/",b.entries.Lcz_Stay)),this.rateplanSelection.selected_variation.child_nbr>0&&t("div",{key:"0650ab0c228e3158991fa38580f7fa58fbc96064",style:{gap:"0.5rem",marginTop:"0.5rem"},class:"d-flex  flex-row  p-0 align-items-center aplicationInfoContainer"},t("p",{key:"2e6582ffb16b265e6baf89c51f875256553ef963",class:"m-0 p-0 text-danger"},"Any of the children below 3 years?"),t("div",{key:"18fd90eea2791611cbbfab7ee135df88b978ffb3",class:"mr-1 flex-fill"},t("select",{key:"cedf9e4c1490822be4e812ba64db96cf8313cb78",class:`form-control input-sm ${this.isButtonPressed&&((y=this.guestInfo)===null||y===void 0?void 0:y.bed_preference)===""&&"border-danger"}`,id:k(),style:{width:"max-content"},onChange:e=>this.updateGuest({infant_nbr:Number(e.target.value)})},t("option",{key:"3a1c336b89befaa85329aceaa94297414fa559ec",value:"",selected:Number((x=this.guestInfo)===null||x===void 0?void 0:x.infant_nbr)===0},b.entries["No"]||"No"),Array.from({length:this.rateplanSelection.selected_variation.child_nbr},((e,t)=>t+1)).map((e=>{var i;return t("option",{value:e,selected:((i=this.guestInfo)===null||i===void 0?void 0:i.infant_nbr)===e},e)}))))))}};O.style=_;const I=".sc-igl-block-dates-view-h{display:block}.sc-igl-block-dates-view-h .controlContainer.sc-igl-block-dates-view{width:24px}.sc-igl-block-dates-view-h .checkBoxContainer.sc-igl-block-dates-view input.sc-igl-block-dates-view{height:1.2rem !important;width:30px}.releaseTime.sc-igl-block-dates-view{padding-left:5px}.out-of-service-label.sc-igl-block-dates-view{margin-left:5px !important}";const Y=I;const M=class{constructor(t){e(this,t);this.dataUpdateEvent=a(this,"dataUpdateEvent",7);this.isEventHover=false;this.renderAgain=false;this.blockDatesData={RELEASE_AFTER_HOURS:0,OPTIONAL_REASON:"",OUT_OF_SERVICE:false};this.releaseList=[];this.bookingService=new d}async componentWillLoad(){try{this.releaseList=await this.bookingService.getBlockedInfo();if(this.defaultData){this.blockDatesData=Object.assign({},this.defaultData)}else{this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(this.releaseList[0].CODE_NAME);this.emitData()}}catch(e){}}handleOptionalReason(e){this.blockDatesData.OPTIONAL_REASON=e.target.value;this.emitData()}handleReleaseAfterChange(e){if(this.entryDate)this.entryDate=undefined;this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(e.target.value);this.renderPage();this.emitData()}emitData(){this.dataUpdateEvent.emit({key:"blockDatesData",data:Object.assign({},this.blockDatesData)})}getReleaseHoursString(){let e=this.entryDate?new Date(this.entryDate):new Date;if(this.entryDate&&this.entryHour&&this.entryMinute){e.setHours(this.entryHour,this.entryMinute,0,0)}else{e.setHours(e.getHours()+this.blockDatesData.RELEASE_AFTER_HOURS,e.getMinutes(),0,0)}return e.toLocaleString("default",{month:"short"})+" "+e.getDate()+", "+this.formatNumber(e.getHours())+":"+this.formatNumber(e.getMinutes())}formatNumber(e){return e<10?`0${e}`:e}handleOutOfService(e){this.blockDatesData.OUT_OF_SERVICE=e.target.checked;if(this.blockDatesData.OUT_OF_SERVICE){this.blockDatesData.OPTIONAL_REASON="";this.blockDatesData.RELEASE_AFTER_HOURS=0}this.renderPage();this.emitData()}renderPage(){this.renderAgain=!this.renderAgain}render(){console.log({fromDate:this.fromDate,toDate:this.toDate});return t(i,{key:"1d71743824f818100da84a7675f7057564042ab3"},t("div",{key:"5cfa0aa7ae3ece112308125223a7ebd77172ce91",class:`m-0 p-0 mb-1`},t("div",{key:"09e7eb19c6a1a3ed7a81ed9db6c9d607fb9b27c6",class:"text-left p-0"},t("ir-date-view",{key:"48bdb3e5bf0947d8eecb58eefa15692e411edec9",from_date:this.fromDate,dateOption:"YYYY-MM-DD",showDateDifference:false,to_date:this.toDate}))),t("div",{key:"9e8b4689f4d0749718de1ea460e931815edc4554",class:` mb-1 text-left ${this.isEventHover&&"p-0"}`},t("div",{key:"fa6c7a9798c8bab1020b32dab9568fa5534a93fa",class:"mb-1 "},t("label",{key:"2955196ed7987d2de182bcf3901ebcdeb441d351",class:"p-0 text-bold-700 font-medium-1 m-0 align-middle"},b.entries.Lcz_Reason,":"),t("div",{key:"8f82e7257c9a8dbfd60754a7566f357e41dcf753",class:"p-0 m-0 pr-1  controlContainer checkBoxContainer d-inline-block align-middle"},t("input",{key:"fb32d9ad816432e547122fca1387fed97679473c",class:"form-control",type:"checkbox",checked:this.blockDatesData.OUT_OF_SERVICE,id:"userinput6",onChange:e=>this.handleOutOfService(e)})),t("span",{key:"2670eccd38715cbe7dbed56ef97d667fdb3df82e",class:"align-middle out-of-service-label"},b.entries.Lcz_OutOfservice)),!this.blockDatesData.OUT_OF_SERVICE?t("div",null,t("div",{class:"mb-1 d-flex  align-items-center"},t("span",{class:"align-middle"},b.entries.Lcz_Or," "),t("div",{class:"d-inline-flex col pr-0 align-middle"},t("input",{class:"form-control",type:"text",placeholder:b.entries.Lcz_OptionalReason,id:"optReason",value:this.blockDatesData.OPTIONAL_REASON,onInput:e=>this.handleOptionalReason(e)}))),t("div",{class:"mb-1 w-100 pr-0 "},t("span",{class:"text-bold-700 font-medium-1"},b.entries.Lcz_AutomaticReleaseIn,": "),t("div",{class:"d-inline-block"},t("select",{class:"form-control input-sm",id:"zSmallSelect",onChange:e=>this.handleReleaseAfterChange(e)},this.releaseList.map((e=>t("option",{value:+e.CODE_NAME,selected:Number(this.blockDatesData.RELEASE_AFTER_HOURS)==Number(e.CODE_NAME)},e.CODE_VALUE_EN))))),this.blockDatesData.RELEASE_AFTER_HOURS?t("div",{class:"d-inline-block releaseTime"},t("em",null,b.entries.Lcz_On," ",this.getReleaseHoursString())):null)):null))}};M.style=Y;const j=".sc-igl-book-property-header-h{display:block}.sourceContainer.sc-igl-book-property-header{max-width:350px}.message-label.sc-igl-book-property-header{font-size:80%}";const B=j;const N=class{constructor(t){e(this,t);this.splitBookingDropDownChange=a(this,"splitBookingDropDownChange",7);this.sourceDropDownChange=a(this,"sourceDropDownChange",7);this.adultChild=a(this,"adultChild",7);this.checkClicked=a(this,"checkClicked",7);this.buttonClicked=a(this,"buttonClicked",7);this.toast=a(this,"toast",7);this.spiltBookingSelected=a(this,"spiltBookingSelected",7);this.animateIrButton=a(this,"animateIrButton",7);this.animateIrSelect=a(this,"animateIrSelect",7);this.splitBookingId="";this.bookingData="";this.sourceOptions=[];this.showSplitBookingOption=false;this.sourceOption={code:"",description:"",tag:"",id:"",type:""}}getSplitBookingList(){return t("fieldset",{class:"d-flex flex-column text-left mb-1  flex-lg-row align-items-lg-center"},t("label",{class:"mr-lg-1"},b.entries.Lcz_Tobooking,"# "),t("div",{class:"btn-group mt-1 mt-lg-0 sourceContainer"},t("ir-autocomplete",{value:Object.keys(this.bookedByInfoData).length>1?`${this.bookedByInfoData.bookingNumber} ${this.bookedByInfoData.firstName} ${this.bookedByInfoData.lastName}`:"",from_date:x(this.bookingDataDefaultDateRange.fromDate).format("YYYY-MM-DD"),to_date:x(this.bookingDataDefaultDateRange.toDate).format("YYYY-MM-DD"),propertyId:this.propertyId,placeholder:b.entries.Lcz_BookingNumber,onComboboxValue:e=>{e.stopImmediatePropagation();this.spiltBookingSelected.emit(e.detail)},isSplitBooking:true})))}getSourceNode(){return t("fieldset",{class:"d-flex text-left  align-items-center"},t("label",{class:"mr-1"},b.entries.Lcz_Source," "),t("div",{class:"btn-group mt-0 flex-fill sourceContainer"},t("select",{class:"form-control input-sm",id:"xSmallSelect",onChange:e=>this.sourceDropDownChange.emit(e.target.value)},this.sourceOptions.map((e=>{if(e.type==="LABEL"){return t("optgroup",{label:e.value})}return t("option",{value:e.id,selected:this.sourceOption.code===e.id},e.value)})))))}handleAdultChildChange(e,t){var i,a;let s={};if(t===""){s=Object.assign(Object.assign({},this.adultChildCount),{[e]:0})}else{s=Object.assign(Object.assign({},this.adultChildCount),{[e]:t})}l("bookingAvailabilityParams",{from_date:this.bookingDataDefaultDateRange.fromDate,to_date:this.bookingDataDefaultDateRange.toDate,adult_nbr:(i=s===null||s===void 0?void 0:s["adult"])!==null&&i!==void 0?i:0,child_nbr:(a=s===null||s===void 0?void 0:s["child"])!==null&&a!==void 0?a:0});this.adultChild.emit(s)}getAdultChildConstraints(){var e,i,a,s;return t("div",{class:"mt-1 mt-lg-0 d-flex flex-column text-left"},t("div",{class:"form-group  my-lg-0 text-left d-flex align-items-center justify-content-between justify-content-sm-start"},t("fieldset",null,t("div",{class:"btn-group ml-0"},t("ir-select",{testId:"adult_number",class:"m-0",selectedValue:(i=(e=this.adultChildCount)===null||e===void 0?void 0:e.adult)===null||i===void 0?void 0:i.toString(),onSelectChange:e=>this.handleAdultChildChange("adult",e.detail),select_id:"adult_select",firstOption:b.entries.Lcz_AdultsCaption,LabelAvailable:false,data:Array.from(Array(this.adultChildConstraints.adult_max_nbr),((e,t)=>t+1)).map((e=>({text:e.toString(),value:e.toString()})))}))),this.adultChildConstraints.child_max_nbr>0&&t("fieldset",null,t("div",{class:"btn-group ml-1 p-0"},t("ir-select",{selectedValue:(s=(a=this.adultChildCount)===null||a===void 0?void 0:a.child)===null||s===void 0?void 0:s.toString(),testId:"child_number",onSelectChange:e=>this.handleAdultChildChange("child",e.detail),select_id:"child_select",firstOption:this.renderChildCaption(),LabelAvailable:false,data:Array.from(Array(this.adultChildConstraints.child_max_nbr),((e,t)=>t+1)).map((e=>({text:e.toString(),value:e.toString()})))}))),t("ir-button",{btn_id:"check_availability",isLoading:w("/Check_Availability"),size:"sm",class:"ml-2",text:b.entries.Lcz_Check,onClickHandler:()=>this.handleButtonClicked()})))}renderChildCaption(){const e=this.adultChildConstraints.child_max_age;let t=b.entries.Lcz_Years;if(e===1){t=b.entries.Lcz_Year}return`${b.entries.Lcz_ChildCaption} 0 - ${this.adultChildConstraints.child_max_age} ${t}`}handleButtonClicked(){if(this.isEventType("SPLIT_BOOKING")&&Object.keys(this.bookedByInfoData).length<=1){this.toast.emit({type:"error",title:b.entries.Lcz_ChooseBookingNumber,description:"",position:"top-right"})}else if(this.isEventType("ADD_ROOM")||this.isEventType("SPLIT_BOOKING")){const e=x(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date));const t=x(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date));const i=x(new Date(this.dateRangeData.fromDate));const a=x(new Date(this.dateRangeData.toDate));if(a.isBefore(t)||i.isAfter(e)){this.toast.emit({type:"error",title:`${b.entries.Lcz_CheckInDateShouldBeMAx.replace("%1",x(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date)).format("ddd, DD MMM YYYY")).replace("%2",x(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date)).format("ddd, DD MMM YYYY"))}  `,description:"",position:"top-right"});return}else if(this.adultChildCount.adult===0){this.toast.emit({type:"error",title:b.entries.Lcz_PlzSelectNumberOfGuests,description:"",position:"top-right"});this.animateIrSelect.emit("adult_child_select")}else{this.buttonClicked.emit({key:"check"})}}else if(this.minDate&&new Date(this.dateRangeData.fromDate).getTime()>new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date).getTime()){this.toast.emit({type:"error",title:`${b.entries.Lcz_CheckInDateShouldBeMAx.replace("%1",x(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date)).format("ddd, DD MMM YYYY")).replace("%2",x(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date)).format("ddd, DD MMM YYYY"))}  `,description:"",position:"top-right"})}else if(this.adultChildCount.adult===0){this.animateIrSelect.emit("adult_child_select");this.toast.emit({type:"error",title:b.entries.Lcz_PlzSelectNumberOfGuests,description:"",position:"top-right"})}else{this.buttonClicked.emit({key:"check"})}}isEventType(e){return this.bookingData.event_type===e}getMinDate(){var e;if(this.isEventType("PLUS_BOOKING")){return x().add(-1,"months").startOf("month").format("YYYY-MM-DD")}if(this.wasBlockedUnit){return(e=this.bookingData)===null||e===void 0?void 0:e.block_exposed_unit_props.from_date}return this.minDate}getMaxDate(){var e,t;if(!((e=this.bookingData)===null||e===void 0?void 0:e.block_exposed_unit_props)){return undefined}return(t=this.bookingData)===null||t===void 0?void 0:t.block_exposed_unit_props.to_date}render(){const e=this.showSplitBookingOption?this.getSplitBookingList():this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")?false:true;return t(i,{key:"01090d4e31c16943989434be2b0c2d8a27570b57"},this.isEventType("SPLIT_BOOKING")&&this.getSplitBookingList(),e&&this.getSourceNode(),t("div",{key:"86d903308c73b3790a6a2a7e3a5e740c7ff73f8b",class:`d-flex flex-column flex-lg-row align-items-lg-center ${e?"mt-1":""}`},t("fieldset",{key:"8ea90ff13b652718b0dc7446a4cd13b7879826b3",class:"mt-lg-0 mr-1 "},t("igl-date-range",{key:"73f21928f1a9aa08ab6e86ceb9bbe592af84cd26","data-testid":"date_picker",variant:"booking",dateLabel:b.entries.Lcz_Dates,maxDate:this.getMaxDate(),minDate:this.getMinDate(),disabled:this.isEventType("BAR_BOOKING")&&!this.wasBlockedUnit||this.isEventType("SPLIT_BOOKING"),defaultData:this.bookingDataDefaultDateRange})),!this.isEventType("EDIT_BOOKING")&&this.getAdultChildConstraints()),t("p",{key:"675fa74fa2991470a7172fc0969c69b63dc8c89c",class:"text-right mt-1 message-label"},m.tax_statement))}};N.style=B;const T=".sc-igl-date-range-h{display:flex;align-items:center !important;font-size:14px !important}.date-range-input.sc-igl-date-range{margin:0;padding:0;display:flex;flex:1;cursor:pointer;width:100%;user-select:none;font-size:14px !important}.iglRangeNights.sc-igl-date-range{margin:0;padding:0}.date-view.sc-igl-date-range{position:absolute;background:white;pointer-events:none;cursor:pointer;display:block;margin-left:14px;margin-right:14px;font-size:13.65px !important;display:flex;align-items:center;inset:0}.date-view.sc-igl-date-range svg.sc-igl-date-range{padding:0 !important;margin:0;margin-right:10px}.calendarPickerContainer.sc-igl-date-range{display:flex !important;position:relative !important;text-align:left;align-items:center !important;padding:0 !important;margin:0;border:1px solid var(--ir-date-range-border, #379ff2);width:var(--ir-date-range-width, 245px);transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.calendarPickerContainer.sc-igl-date-range:focus-within{border-color:#379ff2}.calendarPickerContainer[data-state='disabled'].sc-igl-date-range{border:0px;width:280px}.date-view[data-state='disabled'].sc-igl-date-range,.date-range-input[data-state='disabled'].sc-igl-date-range{margin:0;cursor:default}.date-range-container-cn.sc-igl-date-range{position:relative;width:fit-content}.date-range-container-cn.sc-igl-date-range:focus-within .date-range-container.sc-igl-date-range{border:1px solid #379ff2}.date-range-container.sc-igl-date-range{position:relative;gap:1rem;font-size:0.975rem;line-height:1.45;border-radius:0.21rem;border:1px solid #cacfe7;color:#3b4781;padding:0.75rem 1rem;box-sizing:border-box !important;font-weight:400;background-color:#fff;background-clip:padding-box;height:2rem;pointer-events:none;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.date-range-container-cn.sc-igl-date-range .date-range-input.sc-igl-date-range{position:absolute;width:100% !important;inset:0;cursor:pointer}.date-range-container.disabled.sc-igl-date-range{border:none;padding-left:0;padding-right:0}.date-range-input[data-state='disabled'].sc-igl-date-range{cursor:default}";const L=T;const S=class{constructor(t){e(this,t);this.dateSelectEvent=a(this,"dateSelectEvent",7);this.toast=a(this,"toast",7);this.disabled=false;this.withDateDifference=true;this.variant="default";this.renderAgain=false;this.totalNights=0;this.fromDateStr="from";this.toDateStr="to"}componentWillLoad(){this.initializeDates()}handleDataChange(e,t){if(JSON.stringify(e)!==JSON.stringify(t)){this.initializeDates()}}initializeDates(){let e=new Date;e.setHours(0,0,0,0);e.setDate(e.getDate()+1);if(this.defaultData){if(this.defaultData.fromDate){this.fromDate=new Date(this.defaultData.fromDate);this.fromDate.setHours(0,0,0,0);this.fromDateStr=this.getFormattedDateString(this.fromDate)}if(this.defaultData.toDate){this.toDate=new Date(this.defaultData.toDate);this.toDate.setHours(0,0,0,0);this.toDateStr=this.getFormattedDateString(this.toDate)}}if(this.fromDate&&this.toDate){this.calculateTotalNights()}return[this.fromDateStr,this.toDateStr]}calculateTotalNights(){this.totalNights=g(x(this.fromDate).format("YYYY-MM-DD"),x(this.toDate).format("YYYY-MM-DD"))}getFormattedDateString(e){return e.getDate()+" "+e.toLocaleString("default",{month:"short"}).toLowerCase()+" "+e.getFullYear()}handleDateSelectEvent(e,t=""){this.dateSelectEvent.emit({key:e,data:t})}handleDateChange(e){const{start:t,end:i}=e.detail;this.fromDate=t.toDate();this.toDate=i.toDate();this.calculateTotalNights();this.handleDateSelectEvent("selectedDateRange",{fromDate:this.fromDate.getTime(),toDate:this.toDate.getTime(),fromDateStr:t.format("DD MMM YYYY"),toDateStr:i.format("DD MMM YYYY"),dateDifference:this.totalNights});this.renderAgain=!this.renderAgain}render(){if(this.variant==="booking"){return t("div",{class:`p-0 m-0 date-range-container-cn`},t("ir-date-range",{maxDate:this.maxDate,class:"date-range-input",disabled:this.disabled,fromDate:this.fromDate,toDate:this.toDate,minDate:this.minDate,autoApply:true,"data-state":this.disabled?"disabled":"active",onDateChanged:e=>{this.handleDateChange(e)}}),t("div",{class:`d-flex align-items-center m-0  date-range-container ${this.disabled?"disabled":""}`},t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"m-0 p-0",height:"14",width:"14",viewBox:"0 0 448 512"},t("path",{fill:"currentColor",d:"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z"})),t("span",null,x(this.fromDate).format("MMM DD, YYYY")),t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"m-0 p-0",height:"14",width:"14",viewBox:"0 0 512 512"},t("path",{fill:"currentColor",d:"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z"})),t("span",null,x(this.toDate).format("MMM DD, YYYY")),this.totalNights&&t("span",{class:"m-0 p-0"},this.totalNights+(this.totalNights>1?` ${b.entries.Lcz_Nights}`:` ${b.entries.Lcz_Night}`))))}return t(i,null,t("div",{class:`p-0 m-0 date-range-container-cn`},t("ir-date-range",{maxDate:this.maxDate,class:"date-range-input",disabled:this.disabled,fromDate:this.fromDate,toDate:this.toDate,minDate:this.minDate,autoApply:true,"data-state":this.disabled?"disabled":"active",onDateChanged:e=>{this.handleDateChange(e)}}),t("div",{class:`d-flex align-items-center m-0  date-range-container ${this.disabled?"disabled":""}`},t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"m-0 p-0",height:"14",width:"14",viewBox:"0 0 448 512"},t("path",{fill:"currentColor",d:"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z"})),t("span",null,x(this.fromDate).format("MMM DD, YYYY")),t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"m-0 p-0",height:"14",width:"14",viewBox:"0 0 512 512"},t("path",{fill:"currentColor",d:"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z"})),t("span",null,x(this.toDate).format("MMM DD, YYYY")))))}static get watchers(){return{defaultData:["handleDataChange"]}}};S.style=L;const A=".sc-igl-property-booked-by-h{display:block}.bookedByEmailContainer.sc-igl-property-booked-by{flex:auto;max-width:350px}.bookedDetailsForm.sc-igl-property-booked-by label.sc-igl-property-booked-by{min-width:125px;max-width:125px}.row.sc-igl-booking-form.sc-igl-property-booked-by{padding:0 !important}.bookedDetailsForm.sc-igl-property-booked-by .form-group.sc-igl-property-booked-by{margin-bottom:10px !important}.bookedDetailsForm.sc-igl-property-booked-by .checkBoxContainer.sc-igl-property-booked-by input.sc-igl-property-booked-by{height:1.2rem !important;width:30px}.controlContainer.sc-igl-property-booked-by textarea.sc-igl-property-booked-by{height:60px !important}.margin3.sc-igl-property-booked-by{margin-bottom:5px !important}@media (min-width: 768px){.bookedByEmailContainer.sc-igl-property-booked-by{margin-left:37px}}";const P=A;const G=class{constructor(t){e(this,t);this.dataUpdateEvent=a(this,"dataUpdateEvent",7);this.showPaymentDetails=false;this.countries=[];this.isButtonPressed=false;this.bookingService=new d;this.arrivalTimeList=[];this.expiryMonths=["01","02","03","04","05","06","07","08","09","10","11","12"];this.expiryYears=[];this.currentMonth="01";this.bookedByData={id:undefined,email:"",firstName:"",lastName:"",countryId:"",isdCode:"",contactNumber:"",selectedArrivalTime:"",emailGuest:false,message:"",cardNumber:"",cardHolderName:"",expiryMonth:"",expiryYear:""}}async componentWillLoad(){this.assignCountryCode();this.initializeExpiryYears();this.initializeDateData();this.populateBookedByData()}initializeExpiryYears(){const e=(new Date).getFullYear();this.expiryYears=Array.from({length:4},((t,i)=>(e+i).toString()))}async assignCountryCode(){const e=await this.bookingService.getUserDefaultCountry();const t=e["COUNTRY_ID"];this.country=t;this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{isdCode:t.toString(),countryId:t})}initializeDateData(){const e=new Date;const t=e.getMonth()+1;this.currentMonth=t<10?`0${t}`:t.toString()}populateBookedByData(){var e;this.bookedByData=this.defaultData?Object.assign(Object.assign({},this.bookedByData),this.defaultData):{};this.arrivalTimeList=((e=this.defaultData)===null||e===void 0?void 0:e.arrivalTime)||[];this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{selectedArrivalTime:this.arrivalTimeList[0].CODE_NAME});if(!this.bookedByData.expiryMonth){this.bookedByData.expiryMonth=this.currentMonth}if(!this.bookedByData.expiryYear){this.bookedByData.expiryYear=(new Date).getFullYear()}console.log("initial bookedby data",this.bookedByData)}handleDataChange(e,t){this.bookedByData[e]=e==="emailGuest"?t.target.checked:t.target.value;this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)});if(e==="countryId"){this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{isdCode:t.target.value})}}handleCountryChange(e){this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{isdCode:e,countryId:e});this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)})}handleNumberInput(e,t){const i=t.target;const a=i.value;const s=/^[0-9]+$/;if(!s.test(a)){i.value=a.replace(/[^0-9]/g,"")}if(a===i.value){this.handleDataChange(e,t)}}async checkUser(){var e;try{const t=this.bookedByData.email;if(D.string().email().safeParse(t).success){const i=await this.bookingService.getUserInfo(t);if(i!==null){this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:i.id,firstName:i.first_name,lastName:i.last_name,contactNumber:i.mobile_without_prefix,countryId:i.country_id,isdCode:(e=i===null||i===void 0?void 0:i.country_phone_prefix)!==null&&e!==void 0?e:i.isdCode.toString()});console.log(this.bookedByData)}else{let e=Object.assign({},this.bookedByData);e=Object.assign(Object.assign({},e),{email:t});this.bookedByData=Object.assign({},e)}}else{let e=Object.assign({},this.bookedByData);e=Object.assign(Object.assign({},e),{email:""});this.bookedByData=Object.assign({},e)}this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)})}catch(e){}}updateGuest(e){var t;l("checkout_guest",Object.assign(Object.assign({},(t=n.checkout_guest)!==null&&t!==void 0?t:{}),e))}handleComboboxChange(e){var t;e.stopImmediatePropagation();e.stopPropagation();const{key:i,data:a}=e.detail;console.log(i,a);if(i==="blur"){if(D.string().email().safeParse(a).success){this.bookedByData.email=a;this.checkUser()}else if(this.bookedByData.email!==""&&a==""){this.bookedByData.email=""}this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:this.bookedByData})}if(i==="select"){this.bookedByData.email=a.email;this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:a.id,firstName:a.first_name,lastName:a.last_name,contactNumber:a.mobile_without_prefix,countryId:a.country_id,isdCode:(t=a["country_phone_prefix"])!==null&&t!==void 0?t:a===null||a===void 0?void 0:a.country_id});this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:this.bookedByData})}}clearEvent(){this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:"",firstName:"",lastName:"",contactNumber:"",isdCode:this.country.toString(),countryId:this.country});this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)})}handleButtonClicked(e){switch(e.detail.key){case"book":case"bookAndCheckIn":this.isButtonPressed=true;break}}render(){return t(i,{key:"ceddedadba9a291e4710ff8d12931753629ed432"},t("div",{key:"4c97ea096ce3a17b5dfcedc7cab7c7cccbc78512",class:"text-left mt-3"},t("div",{key:"40c003ca6fc3fa975fef91d24850abbde29cfe72",class:"form-group d-flex flex-column flex-md-row align-items-md-center text-left "},t("label",{key:"89bf251556997654c5a5daee150b0bbaa645d7c6",class:"p-0 m-0 label-control mr-1 font-weight-bold"},b.entries.Lcz_BookedBy),t("div",{key:"d1393c31b77870de4e90385b88844d174b8bd8bf",class:"bookedByEmailContainer mt-1 mt-md-0 d-flex align-items-center"},t("ir-autocomplete",{key:"0da604a15d52cd155171a7fb592fac97a189cac8",testId:"main_guest_email",onComboboxValue:this.handleComboboxChange.bind(this),propertyId:this.propertyId,type:"text",value:this.bookedByData.email,required:true,class:"flex-fill",placeholder:b.entries.Lcz_FindEmailAddress,onInputCleared:()=>this.clearEvent(),danger_border:this.isButtonPressed&&this.bookedByData.email!==""&&v(this.bookedByData.email)}),t("ir-tooltip",{key:"8bdc8fe88d3fcdd05dd1105408799f75f07b4ca3",class:"ml-1",message:"Leave empty if email is unavailable"})))),t("div",{key:"3c3ba43e778ca05a2d4928612dff598cc457e9cf",class:"bookedDetailsForm text-left mt-2 font-small-3 "},t("div",{key:"ed6177d955433313a6743ca739bce18523159d46",class:"d-flex flex-column flex-md-row  justify-content-md-between "},t("div",{key:"8a08309e87fef86bc0138a4311c133d0dfd5f901",class:"p-0 flex-fill "},t("div",{key:"0255859e9b5283acefcaf06545127adde8389bcc",class:"form-group d-flex flex-column flex-md-row align-items-md-center p-0 flex-fill "},t("label",{key:"27f73a07e90c772b5a70c232c151b042d2c3e0b8",class:"p-0 m-0 margin3"},b.entries.Lcz_FirstName),t("div",{key:"6eadbe01b32b8bdcdf8f0968593c0101de918743",class:"p-0 m-0  controlContainer flex-fill  "},t("input",{key:"2a79c84119a7d79a06bb4c5b665c8bf1c63197aa","data-testid":"main_guest_first_name",class:`form-control flex-fill ${this.isButtonPressed&&this.bookedByData.firstName===""&&"border-danger"}`,type:"text",placeholder:b.entries.Lcz_FirstName,id:k(),value:this.bookedByData.firstName,onInput:e=>{this.updateGuest({first_name:e.target.value});this.handleDataChange("firstName",e)},required:true}))),t("div",{key:"1fbc61a4b52280ecbd9b045ba46a6949586569e7",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},t("label",{key:"e6630fd1c567734f2123130371dca4b96c3cea5d",class:"p-0 m-0 margin3"},b.entries.Lcz_LastName),t("div",{key:"d3663e7231cf590300524ce014aa50c010547ed3",class:"p-0 m-0  controlContainer flex-fill"},t("input",{key:"7d689ee8224f4f8f3a483edfe6a0eeea236a36a5","data-testid":"main_guest_last_name",class:`form-control ${this.isButtonPressed&&this.bookedByData.lastName===""&&"border-danger"}`,type:"text",placeholder:b.entries.Lcz_LastName,id:k(),value:this.bookedByData.lastName,onInput:e=>this.handleDataChange("lastName",e)}))),t("div",{key:"223dc531b43bb35e18bc517a70fc8d6fffffda0a",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},t("label",{key:"bc2ca56a56bda12ddd1f6bb75a0cabfc8eb0749d",class:"p-0 m-0 margin3"},b.entries.Lcz_Country),t("ir-country-picker",{key:"de6d8005824a7058f1e8cf6ef73270d0f8808d71",testId:"main_guest_country",class:"flex-grow-1 m-0",onCountryChange:e=>this.handleCountryChange(e.detail.id),countries:this.countries,country:this.countries.find((e=>e.id===this.bookedByData.countryId))})),t("div",{key:"7027d4a6b6b9526975c0d00ef497b2ca323b7f93",class:"form-group p-0 d-flex flex-column flex-md-row align-items-md-center"},t("label",{key:"6e953fcff0fbb8d8fa22e7fabb29238ab179ecd8",class:"p-0 m-0 margin3"},b.entries.Lcz_MobilePhone),t("div",{key:"9756af55e43e2045495fa7b0087925f6e51590c3",class:"p-0 m-0 controlContainer flex-fill"},t("ir-phone-input",{key:"638e5c328c23b9c91db64e1e94cf3a67666b8cba",testId:"main_guest_phone",language:this.language,value:this.bookedByData.contactNumber,phone_prefix:this.bookedByData.isdCode,default_country:this.bookedByData.countryId,onTextChange:e=>{this.handleDataChange("isdCode",{target:{value:e.detail.phone_prefix}});this.handleDataChange("contactNumber",{target:{value:e.detail.mobile}})}}))),t("div",{key:"a214231b9a08ae742fd2533f709374fc1904f247",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},t("label",{key:"b7c0c1fc99029eacc0c56bb6acabae1b2b276380",class:"p-0 m-0 margin3"},b.entries.Lcz_YourArrivalTime),t("div",{key:"e72c97e592ed8a4a1b175ac90180b7936faa28d2",class:"p-0 m-0  controlContainer flex-fill"},t("select",{key:"2bc227c0c90d338a588cb8b65ac58a5a1c8efaed","data-testid":"arrival_time",class:`form-control input-sm pr-0 ${this.isButtonPressed&&this.bookedByData.selectedArrivalTime.code===""&&"border-danger"}`,id:k(),onChange:e=>this.handleDataChange("selectedArrivalTime",e)},this.arrivalTimeList.map((e=>t("option",{value:e.CODE_NAME,selected:this.bookedByData.selectedArrivalTime.code===e.CODE_NAME},e.CODE_VALUE_EN))))))),t("div",{key:"95d9226723130be38f1d3b910a8abcb752ae222d",class:"p-0 flex-fill  ml-md-3"},t("div",{key:"52ed0045b52ed52355ffb339dd70edc798d373ca",class:"  p-0 d-flex flex-column flex-md-row align-items-md-center "},t("label",{key:"c757a840b91c7d92c5c3bfc74ac6b37a9030b6b1",class:"p-0 m-0 margin3"},b.entries.Lcz_AnyMessageForUs),t("div",{key:"6f2f13f8521ae63f87f08e38d19f9625a2463bd0",class:"p-0 m-0  controlContainer flex-fill "},t("textarea",{key:"e2084dfbbbbd993a71f4f807b0e298524ecf8606","data-testid":"note",id:k(),rows:4,class:"form-control ",name:"message",value:this.bookedByData.message,onInput:e=>this.handleDataChange("message",e)}))),this.showPaymentDetails&&t(s,{key:"d13de36a5ca3d1080ba0c3c085686dbc1d026680"},t("div",{key:"2a905c0ebbc96f32fabf5a89cbe566b3a8e5a64f",class:"form-group mt-md-1  p-0 d-flex flex-column flex-md-row align-items-md-center"},t("label",{key:"6161e2001116e9e52623d1f57e228b1d0ec65da4",class:"p-0 m-0 margin3"},b.entries.Lcz_CardNumber),t("div",{key:"655d1751f2a8f00021a71295c196cb59890be270",class:"p-0 m-0  controlContainer flex-fill"},t("input",{key:"2bb321d13fbd8273351ba47dbc5aa21c150aa494",class:"form-control",type:"text",placeholder:"",pattern:"0-9 ",id:k(),value:this.bookedByData.cardNumber,onInput:e=>this.handleNumberInput("cardNumber",e)}))),t("div",{key:"8e474628f947ab8a3dce0a3a18b9f2d4534ee350",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},t("label",{key:"e1c0aac510bcb04e259be3762b7ab689708b2283",class:"p-0 m-0 margin3"},b.entries.Lcz_CardHolderName),t("div",{key:"463fa19c70f639bd34e94341c79120d5e1db6fa8",class:"p-0 m-0  controlContainer flex-fill"},t("input",{key:"6f3ee45ef7750014700880e368981ddfeee674bc",class:"form-control",type:"text",placeholder:"",pattern:"0-9 ",id:k(),value:this.bookedByData.cardHolderName,onInput:e=>this.handleDataChange("cardHolderName",e)}))),t("div",{key:"1fb3e33eb7e7c3313eb7cec266d2b5c6ba5e5e5a",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},t("label",{key:"20e8653937c172ff639fb317c443bb5f285cc58c",class:"p-0 m-0 margin3"},b.entries.Lcz_ExpiryDate),t("div",{key:"d93061304c8d906317176b61a1d7f69abf3ca9ee",class:"p-0 m-0 row  controlContainer flex-fill"},t("div",{key:"cc763b12be4cb312c2482d8c7df5ec85633f2093",class:"p-0 m-0"},t("select",{key:"0015475c1c2f43bd3dc3f51476ad599af2a581f6",class:"form-control input-sm pr-0",id:k(),onChange:e=>this.handleDataChange("expiryMonth",e)},this.expiryMonths.map((e=>t("option",{value:e,selected:e===this.bookedByData.expiryMonth},e))))),t("div",{key:"2e5dd3d6326d1a1f15fd4d4d2aee1a60707138f2",class:"p-0 m-0 ml-1"},t("select",{key:"094a016c3c755f43e096bfb6d9bb6e3899f95b8a",class:"form-control input-sm pr-0",id:k(),onChange:e=>this.handleDataChange("expiryYear",e)},this.expiryYears.map(((e,i)=>t("option",{value:e,selected:i===this.bookedByData.expiryYear},e)))))))),t("div",{key:"4e2ee556496e41dabdb03ce6f62db57b9dfa0601",class:"form-group mt-1 p-0 d-flex flex-row align-items-center"},t("label",{key:"d95af273aac9bdcbb251c68af2ffeeb4a7eaa9cb",class:"p-0 m-0",htmlFor:"emailTheGuestId"},b.entries.Lcz_EmailTheGuest),t("div",{key:"3af687118333874bb45cb5d9b7b12a0963753de3",class:"p-0 m-0  controlContainer flex-fill checkBoxContainer"},t("input",{key:"ed108fda4ed56a55af8318a6b9977da7c0fb74ae",class:"form-control",type:"checkbox",checked:this.bookedByData.emailGuest,id:"emailTheGuestId",onChange:e=>this.handleDataChange("emailGuest",e)})))))))}};G.style=P;const R=".sc-igl-rate-plan-h{display:block;margin-bottom:0.5rem}.currency.sc-igl-rate-plan{display:block;position:absolute;margin:0;padding:0;height:auto;left:10px}.rate-input.sc-igl-rate-plan{font-size:14px;line-height:0;padding:0;height:0;border-left:0}.rate-input-container.sc-igl-rate-plan{display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;flex:1}.new-currency.sc-igl-rate-plan{color:#3b4781;border:1px solid #cacfe7;font-size:0.975rem;height:2rem;background:white;border-right:0;border-top-right-radius:0;border-bottom-right-radius:0;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.input-group-prepend.sc-igl-rate-plan span[data-state='focus'].sc-igl-rate-plan{border-color:var(--blue)}.input-group-prepend.sc-igl-rate-plan span[data-disabled].sc-igl-rate-plan{background-color:#eceff1;border-color:rgba(118, 118, 118, 0.3)}.non-ref-span.sc-igl-rate-plan{font-size:12px;color:var(--green)}.rateplan-name-container.sc-igl-rate-plan{margin-bottom:0.5rem !important}.rateplan-container.sc-igl-rate-plan{margin-top:0.5rem}@media only screen and (min-width: 1200px){.rateplan-name-container.sc-igl-rate-plan{width:40%;margin-top:0}.rateplan-container.sc-igl-rate-plan{width:40%}}@media only screen and (min-width: 991px){.max-w-300.sc-igl-rate-plan{max-width:200px}.rate-input-container.sc-igl-rate-plan{max-width:50px}.rateplan-name-container.sc-igl-rate-plan{margin-bottom:0 !important}}@media only screen and (min-width: 991px) and (max-width: 1300px){.rateplan-name-container.sc-igl-rate-plan{width:40%}.price-amount.sc-igl-rate-plan{max-width:150px !important}}@media only screen and (max-width: 768px){.booking-btn.sc-igl-rate-plan{width:100%}}.total-nights-container.sc-igl-rate-plan{width:max-content}.nightBorder.sc-igl-rate-plan{border-left-width:0;border-top-right-radius:3px !important;border-bottom-right-radius:3px !important}";const z=R;const E=class{constructor(t){e(this,t);this.buttonClicked=a(this,"buttonClicked",7);this.ratePricingMode=[];this.bookingType="PLUS_BOOKING";this.isBookDisabled=false}disableForm(){const{bookingType:e,shouldBeDisabled:t,ratePlan:i,visibleInventory:a}=this;if(e==="EDIT_BOOKING"&&t){return false}return!i.is_available_to_book||(a===null||a===void 0?void 0:a.visibleInventory)===0}updateRateplanSelection(e){const{roomTypeId:t,ratePlan:i}=this;const a=n.ratePlanSelections;n.ratePlanSelections=Object.assign(Object.assign({},a),{[t]:Object.assign(Object.assign({},a[t]),{[i.id]:Object.assign(Object.assign({},a[t][i.id]),e)})})}handleDataChange(e,t){const i=t.target.value;if(e==="adult_child_offering"){this.handleVariationChange(i)}else if(e==="rate"){this.updateRateplanSelection({view_mode:i})}else if(e==="totalRooms"){r({roomTypeId:this.roomTypeId,ratePlanId:this.ratePlan.id,rooms:Number(i)})}}bookProperty(){if(this.bookingType==="BAR_BOOKING"){c()}this.reserveRoom();this.buttonClicked.emit({key:"next"})}reserveRoom(){var e,t,i,a,s,o,l;r({roomTypeId:this.roomTypeId,ratePlanId:this.ratePlan.id,rooms:1,guest:[{last_name:(e=n.guest)===null||e===void 0?void 0:e.last_name,first_name:(t=n.guest)===null||t===void 0?void 0:t.first_name,unit:this.roomTypeId===((i=n.guest)===null||i===void 0?void 0:i.roomtype_id)?(a=n.guest)===null||a===void 0?void 0:a.unit:null,bed_preference:this.visibleInventory.roomtype.is_bed_configuration_enabled?(s=n.guest)===null||s===void 0?void 0:s.bed_preference:null,infant_nbr:((o=this.visibleInventory.selected_variation)===null||o===void 0?void 0:o.child_nbr)>0?(l=n.guest)===null||l===void 0?void 0:l.infant_nbr:null}]})}renderRate(){const{visibleInventory:e}=this;if(!e)return"";if(e.is_amount_modified){return e.rp_amount.toString()}const{selected_variation:t,view_mode:i}=e;const a=i==="001"?t===null||t===void 0?void 0:t.discounted_amount:t===null||t===void 0?void 0:t.amount_per_night_gross;return(a===null||a===void 0?void 0:a.toString())||""}formatVariation(e){var t,i,a,s;if(!e)return"";const o=`${e.adult_nbr} ${e.adult_nbr===1?(t=b.entries["Lcz_Adult"])===null||t===void 0?void 0:t.toLowerCase():(i=b.entries["Lcz_Adults"])===null||i===void 0?void 0:i.toLowerCase()}`;const n=e.child_nbr>0?`${e.child_nbr} ${e.child_nbr>1?(a=b.entries["Lcz_Children"])===null||a===void 0?void 0:a.toLowerCase():(s=b.entries["Lcz_Child"])===null||s===void 0?void 0:s.toLowerCase()}`:"";return n?`${o} ${n}`:o}getTooltipMessages(){var e,t,i,a,s;const{ratePlan:o,visibleInventory:n}=this;const l=n===null||n===void 0?void 0:n.selected_variation;if(!l)return;const d=(e=o.variations)===null||e===void 0?void 0:e.find((e=>this.formatVariation(e)===this.formatVariation(l)));if(!d)return;const r=(i=(t=d.applicable_policies)===null||t===void 0?void 0:t.find((e=>e.type==="cancelation")))===null||i===void 0?void 0:i.combined_statement;const c=(s=(a=d.applicable_policies)===null||a===void 0?void 0:a.find((e=>e.type==="guarantee")))===null||s===void 0?void 0:s.combined_statement;let h="";if(r){h+=`<b><u>Cancellation:</u></b> ${r}<br/>`}if(c){h+=`<b><u>Guarantee:</u></b> ${c}`}return h||undefined}async handleVariationChange(e){const{ratePlan:t,roomTypeId:i}=this;const a=t.variations||[];const s=a.find((t=>this.formatVariation(t)===e));if(!s)return;h({params:{selected_variation:s},ratePlanId:t.id,roomTypeId:i})}render(){var e,a,o;const{ratePlan:n,bookingType:l,currency:d,ratePricingMode:r,visibleInventory:h}=this;const f=n.is_available_to_book;const p=this.disableForm();const m=h===null||h===void 0?void 0:h.selected_variation;const u=(e=n.variations)===null||e===void 0?void 0:e.map((e=>this.formatVariation(e)));return t(i,{key:"936eef625d7bee02682a67ee48721aaae7bc8dfe","data-testid":`rp-${this.ratePlan.id}`},t("div",{key:"dc0a0de1843bf769e092a5fbb72f772768f95cdd",class:`d-flex mt-1  p-0 ${f?"flex-column flex-lg-row align-items-lg-center justify-content-lg-between":"align-items-center justify-content-between"}`},t("div",{key:"44ce88e835e95bc567ca54a2234da2c8478ec924","data-testid":"rp_name",class:"rateplan-name-container m-0 p-0  d-flex align-items-center",style:{gap:"0.5rem"}},l==="BAR_BOOKING"?t("p",{class:"m-0 p-0"},t("span",null,n.name.split("/")[1]," ",n.is_non_refundable&&t("span",{class:"non-ref-span"},"Non Refundable"))):t("span",null,n.short_name," ",n.is_non_refundable&&t("span",{class:"non-ref-span"},"Non Refundable")),f&&t("ir-tooltip",{key:"3b8966672e635b402276a8f2c7426e19a2000d71",message:this.getTooltipMessages()})),f?t("div",{class:"d-md-flex m-md-0  justify-content-md-end align-items-md-center flex-fill rateplan-container"},t("div",{class:"flex-fill max-w-300 flex-grow-1"},t("fieldset",{class:"position-relative flex-grow-1 w-100"},t("select",{disabled:p,"data-testid":"adult-child-offering",class:"form-control input-sm flex-grow-1 w-100",id:k(),onChange:e=>this.handleDataChange("adult_child_offering",e)},u===null||u===void 0?void 0:u.map((e=>t("option",{value:e,selected:this.formatVariation(m)===e},e)))))),t("div",{class:"m-0 p-0 mt-1 mt-md-0 d-flex justify-content-between align-items-md-center ml-md-1"},t("div",{class:"d-flex m-0 p-0 rate-total-night-view mt-0 flex-grow-1"},t("ir-price-input",{testId:"amount_input",disabled:p,onTextChange:e=>this.updateRateplanSelection({is_amount_modified:true,rp_amount:Number(e.detail)}),"aria-label":`${(o=(a=this.visibleInventory)===null||a===void 0?void 0:a.roomtype)===null||o===void 0?void 0:o.name} ${this.ratePlan.short_name}'s rate`,"aria-describedby":`${this.ratePlan.short_name}'s rate`,class:"ir-br-input-none price-amount w-100 flex-grow-1",currency:d.symbol,value:this.renderRate(),placeholder:b.entries.Lcz_Rate||"Rate"}),t("fieldset",{class:"position-relative m-0 total-nights-container p-0"},t("select",{"data-testid":"nigh_stay_select",disabled:p,class:"form-control input-sm m-0 nightBorder rounded-0 py-0",id:k(),onChange:e=>this.updateRateplanSelection({view_mode:e.target.value})},r.map((e=>t("option",{value:e.CODE_NAME,selected:(h===null||h===void 0?void 0:h.view_mode)===e.CODE_NAME},e.CODE_VALUE_EN)))))),(l==="PLUS_BOOKING"||l==="ADD_ROOM")&&t("div",{class:"flex-fill mt-0 ml-1 m-0 mt-md-0 p-0"},t("fieldset",{class:"position-relative"},t("select",{"data-testid":"inventory_select",disabled:h.visibleInventory===0,class:"form-control input-sm",id:k(),onChange:e=>this.handleDataChange("totalRooms",e)},Array.from({length:(h.visibleInventory||0)+1},((e,t)=>t)).map((e=>t("option",{value:e,selected:h.reserved===e},e))))))),l==="EDIT_BOOKING"&&t(s,null,t("div",{class:"m-0 p-0 ml-md-1 mt-md-0 d-none d-md-block"},t("fieldset",{class:"position-relative"},t("input",{"data-testid":"inventory_radio",disabled:p,type:"radio",name:"ratePlanGroup",value:"1",onChange:()=>{c();this.reserveRoom()},checked:h.reserved===1}))),t("button",{"data-testid":"book_property",disabled:p,type:"button",class:"btn btn-primary booking-btn mt-lg-0 btn-sm ml-md-1 mt-1 d-md-none",onClick:()=>{c();this.reserveRoom();this.bookProperty()}},h.reserved===1?b.entries.Lcz_Current:b.entries.Lcz_Select)),(l==="BAR_BOOKING"||l==="SPLIT_BOOKING")&&t("button",{"data-testid":"book",disabled:p||l==="SPLIT_BOOKING"&&this.isBookDisabled,type:"button",class:"btn btn-primary booking-btn mt-md-0 btn-sm ml-md-1 mt-1",onClick:()=>this.bookProperty()},b.entries.Lcz_Book)):t("p",{class:"text-danger m-0 p-0"},b.entries["Lcz_NotAvailable"]||"Not available")))}};E.style=z;const K=".sc-igl-room-type-h{display:block}.margin-bottom-8.sc-igl-room-type{margin-bottom:8px !important}";const V=K;const F=class{constructor(t){e(this,t);this.dataUpdateEvent=a(this,"dataUpdateEvent",7);this.bookingType="PLUS_BOOKING";this.ratePricingMode=[];this.roomInfoId=null;this.selectedRooms=[];this.roomsDistributions=[];this.validBookingTypes=["PLUS_BOOKING","ADD_ROOM","EDIT_BOOKING","SPLIT_BOOKING"]}render(){var e,a;const s=this.validBookingTypes.includes(this.bookingType);return t(i,{key:"9c0c1958ea9d4689b520dc1bcab2f81280db7ebc"},s&&((e=this.roomType.rateplans)===null||e===void 0?void 0:e.length)>0&&t("div",{key:"97cb390989cded78325850610b07091ee4bc3bef",class:"font-weight-bold font-medium-1 margin-bottom-8 "},this.roomType.name),(a=this.roomType.rateplans)===null||a===void 0?void 0:a.map((e=>{if(!!e.variations){let i=this.roomInfoId&&this.roomInfoId===this.roomType.id;const a=f(this.roomType.id,e.id);return t("igl-rate-plan",{isBookDisabled:this.isBookDisabled,visibleInventory:a,key:`rate-plan-${e.id}`,ratePricingMode:this.ratePricingMode,class:s?"":"",currency:this.currency,ratePlan:e,roomTypeId:this.roomType.id,bookingType:this.bookingType,shouldBeDisabled:i})}return null})))}};F.style=V;const U=".sc-ir-autocomplete-h{display:block;position:relative}.selected.sc-ir-autocomplete{color:#fff;text-decoration:none;background-color:#666ee8}input.sc-ir-autocomplete{width:100%;position:relative;border-top-left-radius:0px !important;border-left:0 !important;border-bottom-left-radius:0px !important}label.sc-ir-autocomplete{margin:0;border-top-right-radius:0px !important;border-right:0 !important;border-bottom-right-radius:0px !important;width:fit-content;display:flex;align-items:center;padding-right:3px !important;justify-content:center;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}label[data-state='focused'].sc-ir-autocomplete{border-color:var(--blue)}.combobox.sc-ir-autocomplete{margin:0;top:30px;min-width:100%;width:max-content;display:block;z-index:10000;padding:1px;background:white;box-shadow:0px 8px 16px 0px rgba(0, 0, 0, 0.2);padding:5px 0;max-height:250px;overflow-y:auto}.dropdown-item.sc-ir-autocomplete{cursor:pointer}button.sc-ir-autocomplete{all:unset;right:4px}.combobox.sc-ir-autocomplete p.sc-ir-autocomplete,span.sc-ir-autocomplete,loader-container.sc-ir-autocomplete{padding:5px 16px;margin:0px;margin-top:2px;width:100%}.combobox.sc-ir-autocomplete p.sc-ir-autocomplete{cursor:pointer}.combobox.sc-ir-autocomplete p.sc-ir-autocomplete:hover{background:#f4f5fa}.combobox.sc-ir-autocomplete p[data-selected].sc-ir-autocomplete,.combobox.sc-ir-autocomplete p[data-selected].sc-ir-autocomplete:hover{color:#fff;text-decoration:none;background-color:#666ee8}.loader.sc-ir-autocomplete{width:14px;height:14px;border:2px solid #0f0f0f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const H=U;const W=class{constructor(t){e(this,t);this.comboboxValue=a(this,"comboboxValue",7);this.inputCleared=a(this,"inputCleared",7);this.toast=a(this,"toast",7);this.duration=300;this.placeholder="";this.isSplitBooking=false;this.type="text";this.name="";this.inputId=k();this.required=false;this.disabled=false;this.from_date="";this.to_date="";this.inputValue="";this.data=[];this.selectedIndex=-1;this.isComboBoxVisible=false;this.isLoading=true;this.inputFocused=false;this.bookingService=new d;this.no_result_found=""}componentWillLoad(){this.no_result_found=b.entries.Lcz_NoResultsFound}handleKeyDown(e){var t;const i=this.data.length;const a=this.getHeightOfPElement();if(i>0){switch(e.key){case"ArrowUp":e.preventDefault();this.selectedIndex=(this.selectedIndex-1+i)%i;this.adjustScrollPosition(a);break;case"ArrowDown":e.preventDefault();this.selectedIndex=(this.selectedIndex+1)%i;this.adjustScrollPosition(a);break;case"Enter":case" ":case"ArrowRight":e.preventDefault();this.selectItem(this.selectedIndex);break;case"Escape":(t=this.inputRef)===null||t===void 0?void 0:t.blur();this.isComboBoxVisible=false;break}}}getHeightOfPElement(){const e=this.el.querySelector(".combobox");if(e){const t=e.querySelector("p");return t?t.offsetHeight:0}return 0}adjustScrollPosition(e,t=250){const i=this.el.querySelector(".combobox");if(i){const a=2;const s=e+a;const o=s*this.selectedIndex;let n=o-t/2+e/2;n=Math.max(0,Math.min(n,i.scrollHeight-t));i.scrollTo({top:n,behavior:"auto"})}}selectItem(e){if(this.data[e]){this.isItemSelected=true;this.comboboxValue.emit({key:"select",data:this.data[e]});this.inputValue="";this.resetCombobox()}}debounceFetchData(){clearTimeout(this.debounceTimer);this.debounceTimer=setTimeout((()=>{this.fetchData()}),this.duration)}async fetchData(){try{this.isLoading=true;let e=[];if(!this.isSplitBooking){e=await this.bookingService.fetchExposedGuest(this.inputValue,this.propertyId)}else{if(this.inputValue.split(" ").length===1){e=await this.bookingService.fetchExposedBookings(this.inputValue,this.propertyId,this.from_date,this.to_date)}}this.data=e;if(!this.isComboBoxVisible){this.isComboBoxVisible=true}}catch(e){console.log("error",e)}finally{this.isLoading=false}}handleInputChange(e){this.inputValue=e.target.value;if(this.inputValue){this.debounceFetchData()}else{clearTimeout(this.debounceTimer);this.resetCombobox(false)}}handleDocumentClick(e){const t=e.target;if(!this.el.contains(t)){this.isComboBoxVisible=false}}handleBlur(){this.inputFocused=false;setTimeout((()=>{if(this.isDropdownItem(document.activeElement)){return}if(this.isSplitBooking){if(!this.isItemSelected){if(this.data.length>0){this.comboboxValue.emit({key:"blur",data:this.inputValue})}else{if(this.inputValue!==""){this.toast.emit({type:"error",description:"",title:`The Booking #${this.inputValue} is not Available`,position:"top-right"});this.inputCleared.emit()}}this.inputValue="";this.resetCombobox()}else{this.isItemSelected=false}}else{if(!this.isItemSelected){this.comboboxValue.emit({key:"blur",data:this.inputValue});this.inputValue="";this.resetCombobox()}else{this.isItemSelected=false}}}),200)}isDropdownItem(e){return e&&e.closest(".combobox")}disconnectedCallback(){var e,t,i,a;clearTimeout(this.debounceTimer);(e=this.inputRef)===null||e===void 0?void 0:e.removeEventListener("blur",this.handleBlur);(t=this.inputRef)===null||t===void 0?void 0:t.removeEventListener("click",this.selectItem);(i=this.inputRef)===null||i===void 0?void 0:i.removeEventListener("keydown",this.handleKeyDown);(a=this.inputRef)===null||a===void 0?void 0:a.removeEventListener("focus",this.handleFocus)}handleItemKeyDown(e,t){var i;if(e.key==="Enter"||e.key===" "||e.key==="ArrowRight"){this.selectItem(t);e.preventDefault()}else if(e.key==="Escape"){this.isComboBoxVisible=false;(i=this.inputRef)===null||i===void 0?void 0:i.blur();e.preventDefault()}else{return}}renderDropdown(){var e;if(this.inputValue!==""){return t("div",{class:`position-absolute dropdown-menu  rounded combobox`},(e=this.data)===null||e===void 0?void 0:e.map(((e,i)=>t("p",{role:"button",class:"dropdown-item",onKeyDown:e=>this.handleItemKeyDown(e,i),"data-selected":this.selectedIndex===i,tabIndex:0,onClick:()=>this.selectItem(i)},this.isSplitBooking?t(s,null,`${e.booking_nbr} ${e.guest.first_name} ${e.guest.last_name}`):t("div",{class:"d-flex align-items-center flex-fill"},t("p",{class:"p-0 m-0"},`${e.email}`," ",t("span",{class:"p-0 m-0"},` - ${e.first_name} ${e.last_name}`)))))),this.isLoading&&t("div",{class:"loader-container d-flex align-items-center justify-content-center"},t("div",{class:"loader"})),this.data.length===0&&!this.isLoading&&t("span",{class:"text-center"},this.no_result_found))}}handleFocus(){this.isComboBoxVisible=true;this.inputFocused=true}clearInput(){this.inputValue="";this.resetCombobox();this.inputCleared.emit(null)}resetCombobox(e=true){var t;if(e){(t=this.inputRef)===null||t===void 0?void 0:t.blur()}this.data=[];this.selectedIndex=-1;this.isComboBoxVisible=false}render(){return t(i,{key:"a2d73a367456a65e15fce81df560386f748f3a01"},t("div",{key:"2fc9fdf2ae0869e10f62889eadc1a380a65d4b99",class:"d-flex align-items-center "},t("label",{key:"f3df34a1e5a1d63504916290874a545068aea689","data-state":this.inputFocused?"focused":"blured",htmlFor:this.inputId,class:`form-control input-sm ${this.danger_border&&"border-danger"}`},t("svg",{key:"3b53b12af978ce4933a40c7901e048c19b11f98e",xmlns:"http://www.w3.org/2000/svg",height:"12",width:"12",viewBox:"0 0 512 512"},t("path",{key:"aa2b98c79a4774aab3d0eb92973dfd0010c72145",fill:"currentColor",d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"}))),t("input",{key:"a5e420b6e3e894d7026c2874147c4890e7e775a6","data-testid":this.testId,required:this.required,disabled:this.disabled,id:this.inputId,onKeyDown:this.handleKeyDown.bind(this),class:`form-control input-sm flex-full ${this.danger_border&&"border-danger"}`,type:this.type,name:this.name,value:this.value||this.inputValue,placeholder:this.placeholder,onBlur:this.handleBlur.bind(this),autoComplete:"none",onInput:this.handleInputChange.bind(this),onFocus:this.handleFocus.bind(this),ref:e=>this.inputRef=e}),this.inputValue&&t("button",{key:"be449b5b6a0d0cfbb4c1a2fff5cdbce726d46795",type:"button",class:"position-absolute d-flex align-items-center justify-content-center ",onClick:this.clearInput.bind(this)},t("p",{key:"68bc81771a885546c27c2b9a8fa7778bd11d7a2e",class:"sr-only"},"clear input"),t("svg",{key:"9d83bb7b0681963ff70e8fd11df831828c7f8fbc",width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t("path",{key:"8a7fc8a8c07503a6c875811a35401b59e4f9d854",d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"})))),this.isComboBoxVisible&&this.renderDropdown())}get el(){return o(this)}};W.style=H;const q=".sc-ir-country-picker-h{display:block;margin:0;padding:0;box-sizing:border-box}.combobox-menu.sc-ir-country-picker{max-height:200px;overflow:auto}";const J=q;const Z=class{constructor(t){e(this,t);this.countryChange=a(this,"countryChange",7);this.countries=[];this.autoValidate=false;this.filteredCountries=[];this.searching=false}componentWillLoad(){this.filteredCountries=[...this.countries];if(this.country){this.inputValue=this.country.name;this.selectedCountry=this.country}}handleCountryChange(e,t){var i;if((e===null||e===void 0?void 0:e.id)!==(t===null||t===void 0?void 0:t.id)){this.inputValue=(i=this.country)===null||i===void 0?void 0:i.name;this.selectedCountry=e}}filterCountries(){if(this.inputValue===""&&this.country){this.selectCountry(null)}clearTimeout(this.debounceTimeout);this.debounceTimeout=setTimeout((()=>{if(!this.inputValue){this.filteredCountries=[...this.countries]}else{this.filteredCountries=this.countries.filter((e=>e.name.toLowerCase().includes(this.inputValue.toLowerCase())))}}),300)}selectCountry(e){this.selectedCountry=e;this.inputValue=e===null||e===void 0?void 0:e.name;this.filteredCountries=[...this.countries];this.countryChange.emit(e)}scrollToSelected(){setTimeout((()=>{const e=document.querySelector(`.dropdown-item.active`);if(e){e.scrollIntoView({behavior:"instant",block:"center"})}}),100)}render(){var e,i,a;const o=this.filteredCountries.length>0&&this.propertyCountry&&(!this.searching||this.searching&&this.inputValue==="");return t("form",{key:"18087520171a4f1ff53496ed42eeb443ed4d77da",class:"dropdown m-0 p-0"},t("ir-input-text",{key:"a54ac6bf49332a2ceb9d72df6f3e8e8bcd7bdeb9",onTextChange:e=>{if(!this.searching){this.searching=true}this.inputValue=e.detail;this.filterCountries()},testId:this.testId,autoValidate:this.autoValidate,label:this.label,error:this.error,placeholder:"",class:"m-0 p-0",value:this.inputValue,id:"dropdownMenuCombobox","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",onInputFocus:()=>this.scrollToSelected(),onInputBlur:()=>{this.searching=false;if(this.filteredCountries.length>0&&this.inputValue&&this.inputValue.trim()!==""){this.selectCountry(this.filteredCountries[0])}}}),t("div",{key:"01b515ff018b4c53ea6c14a034f0a0ca254c7584",class:"dropdown-menu combobox-menu","aria-labelledby":"dropdownMenuCombobox"},o&&t(s,{key:"547cf36a737b4d0c3c951a583bd1a47ded52c1f4"},t("button",{key:"a7dd43f68567bd5e7bfc899edb171a91141cf43c",type:"button",class:`dropdown-item d-flex align-items-center ${((e=this.selectedCountry)===null||e===void 0?void 0:e.id)===this.propertyCountry.id?"active":""}`,onClick:()=>{this.selectCountry(this.propertyCountry)}},t("img",{key:"168003555a8419249d6fa899dad775d6b2202252",src:this.propertyCountry.flag,alt:this.propertyCountry.name,style:{aspectRatio:"1",height:"15px",borderRadius:"4px"}}),t("p",{key:"c63c5312c5dd8600b63f738f72efe9aaa02128b4",class:"pl-1 m-0"},this.propertyCountry.name)),t("div",{key:"e8a2ad674aefe9b52faf7b27d76994b0a7097f86",class:"dropdown-divider"})),(i=this.filteredCountries)===null||i===void 0?void 0:i.map((e=>{var i;return t("button",{key:e.id,type:"button",class:`dropdown-item d-flex align-items-center ${((i=this.selectedCountry)===null||i===void 0?void 0:i.id)===e.id?"active":""}`,onClick:()=>{this.selectCountry(e)}},t("img",{src:e.flag,alt:e.name,style:{aspectRatio:"1",height:"15px",borderRadius:"4px"}}),t("p",{class:"pl-1 m-0"},e.name))})),((a=this.filteredCountries)===null||a===void 0?void 0:a.length)===0&&t("p",{key:"c0bf042b5e65007fc0ea7befe6d89bfe94a8566c",class:"dropdown-item-text"},"Invalid Country")))}static get watchers(){return{country:["handleCountryChange"]}}};Z.style=J;const Q=".sc-ir-date-range-h{display:block;width:100%}.date-range-input.sc-ir-date-range{width:100%}";const X=Q;const ee=class{constructor(t){e(this,t);this.dateChanged=a(this,"dateChanged",7);this.firstDay=1;this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];this.daysOfWeek=["Su","Mo","Tu","We","Th","Fr","Sa"];this.format="MMM DD, YYYY";this.separator=" - ";this.applyLabel="Apply";this.cancelLabel="Cancel";this.fromLabel="Form";this.toLabel="To";this.customRangeLabel="Custom";this.weekLabel="W";this.disabled=false;this.singleDatePicker=false;this.maxSpan={days:240}}componentWillLoad(){if(!document.getElementById("ir-daterangepicker-style")){const e=document.createElement("style");e.id="ir-daterangepicker-style";e.textContent=`\n        .daterangepicker {\n          margin-top: 14px;\n        }\n      `;document.head.appendChild(e)}}componentDidLoad(){this.dateRangeInput=this.element.querySelector(".date-range-input");this.initializeDateRangePicker();this.updateDateRangePickerDates()}disconnectedCallback(){if(this.openDatePickerTimeout){clearTimeout(this.openDatePickerTimeout)}$(this.dateRangeInput).data("daterangepicker").remove()}handleMinDateChange(){$(this.dateRangeInput).data("daterangepicker").remove();this.initializeDateRangePicker()}datePropChanged(){this.updateDateRangePickerDates()}async openDatePicker(){this.openDatePickerTimeout=setTimeout((()=>{this.dateRangeInput.click()}),20)}updateDateRangePickerDates(){const e=$(this.dateRangeInput).data("daterangepicker");if(!e){console.error("Date range picker not initialized.");return}if(this.singleDatePicker){const t=this.date?x(this.date):x();e.setStartDate(t);e.setEndDate(t)}else{const t=this.fromDate?x(this.fromDate):x();const i=this.toDate?x(this.toDate):t.clone().add(1,"days");e.setStartDate(t);e.setEndDate(i)}}initializeDateRangePicker(){$(this.dateRangeInput).daterangepicker({singleDatePicker:this.singleDatePicker,opens:this.opens,startDate:x(this.fromDate),endDate:x(this.toDate),minDate:x(this.minDate||x(new Date).format("YYYY-MM-DD")),maxDate:this.maxDate?x(this.maxDate):undefined,maxSpan:this.maxSpan,autoApply:this.autoApply,locale:{format:this.format,separator:this.separator,applyLabel:this.applyLabel,cancelLabel:this.cancelLabel,fromLabel:this.fromLabel,toLabel:this.toLabel,customRangeLabel:this.customRangeLabel,weekLabel:this.weekLabel,daysOfWeek:this.daysOfWeek,monthNames:this.monthNames,firstDay:this.firstDay}},((e,t)=>{this.dateChanged.emit({start:e,end:t})}))}render(){return t(i,{key:"faf68602fc03d2e802c8fbe93ae04c5fb1de94ca"},t("input",{key:"bab6caaecaa7ed941d613d36c84baa7f5cf2eade",class:"date-range-input",type:"button",disabled:this.disabled}))}get element(){return o(this)}static get watchers(){return{minDate:["handleMinDateChange"],date:["datePropChanged"]}}};ee.style=X;const te=".sc-ir-date-view-h{display:block;font-size:13.65px !important;width:100%}.mx-01.sc-ir-date-view{--m:5px;margin-right:var(--m) !important;margin-left:var(--m) !important}";const ie=te;const ae=class{constructor(t){e(this,t);this.showDateDifference=true;this.dateOption="YYYY-MM-DD"}componentWillLoad(){this.initializeDates()}handleFromDateChange(e,t){if(e!==t){this.initializeDates()}}handleToDateChange(e,t){if(e!==t){this.initializeDates()}}initializeDates(){this.convertDate("from_date",this.from_date);this.convertDate("to_date",this.to_date);const e=x(this.dates.from_date,"MMM DD, YYYY").format("YYYY-MM-DD");const t=x(this.dates.to_date,"MMM DD, YYYY").format("YYYY-MM-DD");this.dates.date_difference=g(e,t)}convertDate(e,t){this.dates=this.dates||{from_date:"",to_date:"",date_difference:0};if(!t){return}if(typeof t==="string"){this.dates[e]=x(t,this.dateOption).format("MMM DD, YYYY")}else if(t instanceof Date){this.dates[e]=x(t).format("MMM DD, YYYY")}else if(x.isMoment(t)){this.dates[e]=t.format("MMM DD, YYYY")}else{console.error("Unsupported date type")}}render(){return t(i,{key:"f2ef24d630ba0a652942c5b972623ebc88e8917d",class:"d-flex align-items-center"},t("span",{key:"0a215c2d1e31df552eda17967048f49ad66a0b5c"},this.dates.from_date)," ",t("svg",{key:"c225888b1f14fb74d2a83883451238bbb42cb3d4",xmlns:"http://www.w3.org/2000/svg",class:"mx-01",height:"14",width:"14",viewBox:"0 0 512 512"},t("path",{key:"5ff0bbb671b3776507584404c4de5e0779409cc9",fill:"currentColor",d:"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z"})),t("span",{key:"a484790352627f1adb28c11a1faaa2119df3b70f"},this.dates.to_date," ",this.showDateDifference&&t("span",{key:"478d4993dfc588765ac76db40797a512e3793c6e",class:"mx-01"},this.dates.date_difference,"   ",this.dates.date_difference>1?` ${b.entries.Lcz_Nights}`:` ${b.entries.Lcz_Night}`)))}static get watchers(){return{from_date:["handleFromDateChange"],to_date:["handleToDateChange"]}}};ae.style=ie;const se=".sc-ir-phone-input-h{display:block}.input-container.sc-ir-phone-input{display:flex;align-items:center;padding:0 !important}.input-container.sc-ir-phone-input:focus-within{border-color:#1e9ff2}.border-theme.sc-ir-phone-input{border-color:#cacfe7}.input-container.sc-ir-phone-input input.sc-ir-phone-input{flex:1;border:0}.input-container.sc-ir-phone-input input.sc-ir-phone-input:focus{outline:none}.dropdown-trigger.sc-ir-phone-input{display:flex;align-items:center;gap:8px;background:white;border:0;border-right:1px solid #cacfe7}.ir-dropdown-container.sc-ir-phone-input{position:absolute;z-index:1000;bottom:-30px;width:100%;left:0;background:white}.input-container.sc-ir-phone-input label.sc-ir-phone-input{display:flex;align-items:center;justify-content:center;margin:0;padding:0 5px}.flag.sc-ir-phone-input{height:1rem;aspect-ratio:4/3;border-radius:3px}.is-invalid.sc-ir-phone-input{border-color:#ff4961}.phone_prefix_label.sc-ir-phone-input{padding:0 0.5rem;margin:0}";const oe=se;const ne=class{constructor(t){e(this,t);this.textChange=a(this,"textChange",7);this.value="";this.disabled=false;this.error=false;this.default_country=null;this.phone_prefix=null;this.countries=[];this.inputValue="";this.isDropdownVisible=false;this.bookingService=new d}async componentWillLoad(){if(this.countries.length===0){const e=await this.bookingService.getCountries(this.language);this.countries=e}if(this.phone_prefix){this.setCountryFromPhonePrefix()}else{if(this.default_country){this.setCurrentCountry(this.default_country)}}this.inputValue=this.value}handleValueChange(e,t){if(e!==t){this.inputValue=e}}handlePhoneChange(e,t){if(e!==t){this.setCountryFromPhonePrefix()}}handleDocumentClick(e){const t=e.target;if(!this.el.contains(t)){this.isDropdownVisible=false}}handleInputChange(e){var t;let i=e.target;let a=i.value;a=a.replace(/[^+\d]+/g,"");i.value=a;this.inputValue=a;this.textChange.emit({phone_prefix:(t=this.currentCountry)===null||t===void 0?void 0:t.phone_prefix,mobile:this.inputValue})}setCountryFromPhonePrefix(){var e;let t=this.countries.find((e=>e.phone_prefix===this.phone_prefix));if(!t){t=this.countries.find((e=>e.id.toString()===this.phone_prefix));if(!t){return}}this.currentCountry=Object.assign({},t);this.textChange.emit({phone_prefix:(e=this.currentCountry)===null||e===void 0?void 0:e.phone_prefix,mobile:this.value})}setCurrentCountry(e){var t;const i=this.countries.find((t=>t.id===e));if(!i){throw new Error("Invalid country id")}this.currentCountry=Object.assign({},i);this.textChange.emit({phone_prefix:(t=this.currentCountry)===null||t===void 0?void 0:t.phone_prefix,mobile:this.value})}render(){var e,a;return t(i,{key:"0d44e8b074cc4f97d5ddca1828f1acd3546fe4d2"},t("div",{key:"2d3bb1911649f8a19f167c445f74f1844c92f3f6",class:"form-group mr-0"},t("div",{key:"e16440dc1751e1549e6aa8956f07e0b001491687",class:"input-group row m-0 p-0 position-relative"},this.label&&t("div",{key:"4f5d1cdfb8b9015f0c34b6e1d624ab833a765e3f",class:`input-group-prepend col-3 p-0 text-dark border-none`},t("label",{key:"ce42963e533991fb46adb1b2d492828414c4bf16",class:`input-group-text  border-theme flex-grow-1 text-dark  `},this.label)),t("div",{key:"53d906cd531dc4d9f2c30e9516fda414bade8f74",class:"form-control  input-container  flex-fill"+(this.error?" is-invalid":"")},t("button",{key:"69da9678f4d5804e7131a9db165a88997a9a4152",type:"button",onClick:()=>this.isDropdownVisible=!this.isDropdownVisible,class:"dropdown-trigger"},this.currentCountry?t("img",{src:(e=this.currentCountry)===null||e===void 0?void 0:e.flag,class:"flag"}):t("p",{class:"p-0 m-0 "},b.entries.Lcz_Select),t("svg",{key:"e377556942a64177ac0b9afa27450663e7bfbb7e",xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},t("path",{key:"58f51037e4ce392f2c71ba178e877643fa66d2ec",d:"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"}))),t("p",{key:"7d53d4b8878201e728040ac43cc3066d1ee0d5c0",class:"phone_prefix_label"},(a=this.currentCountry)===null||a===void 0?void 0:a.phone_prefix),t("input",{key:"0219a4c38495a0e552abf8da2a3b44e5fe47bb82","data-testid":this.testId,maxLength:14,type:"text",placeholder:this.placeholder,required:true,value:this.inputValue,disabled:this.disabled,onInput:e=>this.handleInputChange(e)})),this.isDropdownVisible&&t("div",{key:"d9a148aaa4dedd1cc1f7901a7902b60c1284fbce",class:"ir-dropdown-container"},t("ir-combobox",{key:"3e61586053ab43e7b8b41d61637480d571a136f6",onComboboxValueChange:e=>{this.setCurrentCountry(+e.detail.data);this.isDropdownVisible=false},class:"bg-white",autoFocus:true,placeholder:"Search country",data:this.countries.map((e=>({id:e.id.toString(),name:`${e.name} (${e.phone_prefix})`,image:e.flag})))})))))}get el(){return o(this)}static get watchers(){return{value:["handleValueChange"],phone_prefix:["handlePhoneChange"]}}};ne.style=oe;export{O as igl_application_info,M as igl_block_dates_view,N as igl_book_property_header,S as igl_date_range,G as igl_property_booked_by,E as igl_rate_plan,F as igl_room_type,W as ir_autocomplete,Z as ir_country_picker,ee as ir_date_range,ae as ir_date_view,ne as ir_phone_input};
//# sourceMappingURL=p-642bed64.entry.js.map