import{r as t,h as i,H as s}from"./p-ee49d535.js";import{T as e}from"./p-972be3f6.js";import{H as a}from"./p-3f211cb6.js";import{R as r}from"./p-123dadee.js";import{u as n}from"./p-27b56378.js";import"./p-06203439.js";import"./p-9c08500e.js";import"./p-4eb12235.js";import"./p-806fad31.js";const h=".sc-ir-housekeeping-h{display:block}";const o=h;const l=class{constructor(i){t(this,i);this.roomService=new r;this.houseKeepingService=new a;this.token=new e;this.language="";this.ticket="";this.propertyid=undefined;this.p=undefined;this.isLoading=false}componentWillLoad(){if(this.ticket!==""){this.token.setToken(this.ticket);this.initializeApp()}}async handleResetData(t){t.stopImmediatePropagation();t.stopPropagation();await this.houseKeepingService.getExposedHKSetup(this.propertyid)}ticketChanged(t,i){if(t===i){return}this.token.setToken(this.ticket);this.initializeApp()}async initializeApp(){try{this.isLoading=true;let t=this.propertyid;if(!t){const i=await this.roomService.getExposedProperty({id:0,aname:this.p,language:this.language,is_backend:true});t=i.My_Result.id}n("default_properties",{token:this.ticket,property_id:t,language:this.language});const i=[this.houseKeepingService.getExposedHKSetup(t),this.roomService.fetchLanguage(this.language,["_HK_FRONT"])];if(this.propertyid){i.unshift(this.roomService.getExposedProperty({id:t,language:this.language,is_backend:true}))}await Promise.all(i)}catch(t){console.error(t)}finally{this.isLoading=false}}render(){if(this.isLoading){return i("ir-loading-screen",null)}return i(s,null,i("ir-interceptor",null),i("ir-toast",null),i("section",{class:"p-1"},i("div",{class:"card p-1"},i("ir-select",{LabelAvailable:false,showFirstOption:false,onSelectChange:t=>{t.stopImmediatePropagation();t.stopPropagation();this.roomService.SetAutomaticCheckInOut({property_id:this.propertyid,flag:t.detail==="auto"})},data:[{text:"Manual",value:"manual"},{text:"Auto",value:"auto"}]})),i("ir-hk-team",{class:"mb-1"})))}static get watchers(){return{ticket:["ticketChanged"]}}};l.style=o;export{l as ir_housekeeping};
//# sourceMappingURL=p-90b168e9.entry.js.map