{"version":3,"file":"ir-payment-option.entry.esm.js","sources":["src/components/ir-payment-option/ir-payment-option.css?tag=ir-payment-option&encapsulation=scoped","src/components/ir-payment-option/ir-payment-option.tsx"],"sourcesContent":["/* @import url('../../assets/reset.css'); */\r\n:host {\r\n  display: block;\r\n}\r\n.payment-table-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.po-view {\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n.payment-img {\r\n  height: 18px;\r\n  display: none;\r\n}\r\n.loading-container {\r\n  background: white;\r\n  display: flex;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 100%;\r\n  height: 40rem;\r\n}\r\n.payment-option-loader {\r\n  width: 1.25rem;\r\n  height: 1.25rem;\r\n  border: 2.5px solid #3f3f3f;\r\n  border-bottom-color: transparent;\r\n  border-radius: 50%;\r\n  display: inline-block;\r\n  box-sizing: border-box;\r\n  animation: rotation 1s linear infinite;\r\n}\r\n.loading-container.default {\r\n  height: 100vh;\r\n  width: 100%;\r\n}\r\n@media (min-width: 768px) {\r\n  .po-view {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    gap: 0.5rem;\r\n  }\r\n  .dataTable {\r\n    width: 70%;\r\n  }\r\n  .payment-img {\r\n    display: block;\r\n  }\r\n  .actions-header {\r\n    width: max-content !important;\r\n  }\r\n  .payment-table-container {\r\n    justify-content: flex-start;\r\n  }\r\n}\r\n@media (min-width: 1280px) {\r\n  .dataTable {\r\n    width: 50%;\r\n  }\r\n}\r\n@keyframes rotation {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n","import { ILocalizable, OptionField, PaymentOption } from '@/models/payment-options';\r\nimport { PaymentOptionService } from '@/services/payment_option.service';\r\nimport { RoomService } from '@/services/room.service';\r\nimport locales from '@/stores/locales.store';\r\nimport payment_option_store from '@/stores/payment-option.store';\r\nimport { Component, Event, EventEmitter, Host, Listen, Prop, State, Watch, h } from '@stencil/core';\r\nimport { IToast } from '@components/ui/ir-toast/toast';\r\nimport Token from '@/models/Token';\r\n\r\n@Component({\r\n  tag: 'ir-payment-option',\r\n  styleUrl: 'ir-payment-option.css',\r\n  scoped: true,\r\n})\r\nexport class IrPaymentOption {\r\n  @Prop() propertyid: string;\r\n  @Prop() ticket: string;\r\n  @Prop() p: string;\r\n  @Prop() language: string = 'en';\r\n  @Prop() defaultStyles: boolean = true;\r\n  @Prop() hideLogs: boolean = true;\r\n\r\n  @State() paymentOptions: PaymentOption[] = [];\r\n  @State() isLoading: boolean = false;\r\n  @State() selectedOption: PaymentOption | null = null;\r\n\r\n  @Event() toast: EventEmitter<IToast>;\r\n\r\n  private paymentOptionService = new PaymentOptionService();\r\n  private roomService = new RoomService();\r\n  private token = new Token();\r\n\r\n  private propertyOptionsById: Map<string | number, PaymentOption>;\r\n  private propertyOptionsByCode: Map<string | number, PaymentOption>;\r\n\r\n  componentWillLoad() {\r\n    if (!!this.ticket) {\r\n      this.token.setToken(this.ticket);\r\n      this.init();\r\n    }\r\n  }\r\n  @Watch('ticket')\r\n  ticketChanged(newValue: string, oldValue: string) {\r\n    if (newValue === oldValue) {\r\n      return;\r\n    }\r\n    this.token.setToken(this.ticket);\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    this.initServices();\r\n    this.fetchData();\r\n  }\r\n  @Listen('closeModal')\r\n  handleCloseModal(e: CustomEvent) {\r\n    e.stopPropagation();\r\n    e.stopImmediatePropagation();\r\n    this.closeModal(e.detail);\r\n  }\r\n  private closeModal(newOption: PaymentOption | null) {\r\n    if (newOption) {\r\n      this.modifyPaymentList(newOption);\r\n      if (newOption.is_payment_gateway) {\r\n        this.propertyOptionsById.set(newOption.id, newOption);\r\n      } else {\r\n        this.propertyOptionsByCode.set(newOption.code, newOption);\r\n      }\r\n    } else {\r\n      if (!this.propertyOptionsByCode.has(payment_option_store.selectedOption?.code) && !this.propertyOptionsById.has(payment_option_store.selectedOption?.id)) {\r\n        this.modifyPaymentList({ ...payment_option_store.selectedOption, is_active: false });\r\n      }\r\n    }\r\n    payment_option_store.selectedOption = null;\r\n    payment_option_store.mode = null;\r\n  }\r\n  private async fetchData() {\r\n    try {\r\n      if (!this.propertyid && !this.p) {\r\n        throw new Error('Property ID or username is required');\r\n      }\r\n      this.isLoading = true;\r\n      let propertyId = this.propertyid;\r\n      if (!propertyId) {\r\n        console.log('fetching property id');\r\n        const propertyData = await this.roomService.getExposedProperty({\r\n          id: 0,\r\n          aname: this.p,\r\n          language: this.language,\r\n        });\r\n        propertyId = propertyData.My_Result.id;\r\n      }\r\n      const [paymentOptions, propertyOptions, languageTexts] = await Promise.all([\r\n        this.paymentOptionService.GetExposedPaymentMethods(),\r\n        this.paymentOptionService.GetPropertyPaymentMethods(propertyId),\r\n        this.roomService.fetchLanguage(this.language, ['_PAYMENT_BACK']),\r\n      ]);\r\n      locales.entries = languageTexts.entries;\r\n      locales.direction = languageTexts.direction;\r\n      this.propertyOptionsById = new Map(propertyOptions?.map(o => [o.id, o]));\r\n      this.propertyOptionsByCode = new Map(propertyOptions?.map(o => [o.code, o]));\r\n      this.paymentOptions = paymentOptions?.map(option => {\r\n        if (option.is_payment_gateway) {\r\n          return this.propertyOptionsById.get(option.id) || option;\r\n        }\r\n        return this.propertyOptionsByCode.get(option.code) || option;\r\n      });\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n\r\n  private initServices() {\r\n    this.token.setToken(this.ticket);\r\n  }\r\n  private modifyPaymentList(paymentOption: PaymentOption) {\r\n    let prevPaymentOptions = [...this.paymentOptions];\r\n    console.log(paymentOption);\r\n    let index = prevPaymentOptions.findIndex(p => p.code === paymentOption.code);\r\n    if (index === -1) {\r\n      throw new Error('Invalid code');\r\n    }\r\n    prevPaymentOptions[index] = { ...paymentOption };\r\n    this.paymentOptions = [...prevPaymentOptions];\r\n  }\r\n  private async handleCheckChange(e: CustomEvent, po: PaymentOption) {\r\n    e.stopPropagation();\r\n    e.stopImmediatePropagation();\r\n\r\n    const is_active = e.detail;\r\n    const newOption = { ...po, is_active, property_id: this.propertyid };\r\n    if (po.code !== '005' && !po.is_payment_gateway) {\r\n      await this.changePaymentMethod(newOption);\r\n      this.modifyPaymentList(newOption);\r\n      if (po.code === '000' && is_active && this.paymentOptions.filter(p => p.code !== '000').every(p => p.is_active === false || p.is_active === null)) {\r\n        this.toast.emit({\r\n          type: 'success',\r\n          description: '',\r\n          title: locales.entries['Lcz_YouNeedToSelect'],\r\n          position: 'top-right',\r\n        });\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (!this.showEditButton(po)) {\r\n      this.modifyPaymentList(newOption);\r\n      return;\r\n    }\r\n    if (is_active && po.data?.some(d => d.value === null)) {\r\n      payment_option_store.mode = 'create';\r\n      payment_option_store.selectedOption = newOption;\r\n    } else {\r\n      await this.changePaymentMethod(newOption);\r\n    }\r\n    this.modifyPaymentList(newOption);\r\n  }\r\n  private async changePaymentMethod(newOption: {\r\n    is_active: any;\r\n    property_id: string;\r\n    code: string;\r\n    data: OptionField[] | null;\r\n    description: string;\r\n    id: null | number;\r\n    is_payment_gateway: boolean;\r\n    localizables: ILocalizable[] | null;\r\n    display_order?: number;\r\n  }) {\r\n    try {\r\n      await this.paymentOptionService.HandlePaymentMethod(newOption);\r\n      this.toast.emit({\r\n        position: 'top-right',\r\n        title: 'Saved Successfully',\r\n        description: '',\r\n        type: 'success',\r\n      });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  private showEditButton(po: PaymentOption) {\r\n    if (!po.is_payment_gateway && po.code !== '005') {\r\n      return false;\r\n    }\r\n\r\n    return po.code === '005' || (po.is_payment_gateway && po.data?.length > 0);\r\n  }\r\n  render() {\r\n    if (this.isLoading === true || (this.paymentOptions && this.paymentOptions.length === 0)) {\r\n      return (\r\n        <Host class={this.defaultStyles ? 'p-2' : ''}>\r\n          <div class={`loading-container ${this.defaultStyles ? 'default' : ''}`}>\r\n            <span class=\"payment-option-loader\"></span>\r\n          </div>\r\n        </Host>\r\n      );\r\n    }\r\n    return (\r\n      <Host class={this.defaultStyles ? 'p-2' : ''}>\r\n        <ir-toast></ir-toast>\r\n        <ir-interceptor></ir-interceptor>\r\n        <div class={`${this.defaultStyles ? 'card ' : ''} p-1 flex-fill m-0`}>\r\n          <div class=\"d-flex align-items-center mb-2\">\r\n            <div class=\"p-0 m-0 mr-1\">\r\n              <ir-icons name=\"credit_card\"></ir-icons>\r\n            </div>\r\n            <h3 class={'m-0 p-0'}>{locales?.entries?.Lcz_PaymentOptions}</h3>\r\n          </div>\r\n          <div class=\"payment-table-container\">\r\n            <table class=\"table table-striped table-bordered no-footer dataTable\">\r\n              <thead>\r\n                <tr>\r\n                  <th scope=\"col\" class=\"text-left\">\r\n                    {locales?.entries?.Lcz_PaymentMethod}\r\n                  </th>\r\n                  <th scope=\"col\">{locales?.entries?.Lcz_Status}</th>\r\n                  <th scope=\"col\" class=\"actions-header\">\r\n                    {locales?.entries?.Lcz_Action}\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody class=\"\">\r\n                {this.paymentOptions?.map(po => {\r\n                  if (po.code === '004') {\r\n                    return null;\r\n                  }\r\n                  return (\r\n                    <tr key={po.id}>\r\n                      <td class={'text-left po-description'}>\r\n                        <div class=\"po-view\">\r\n                          <span class={'p-0 m-0'}>{po?.description}</span>\r\n                          {/* <img src=\"https://www.jccsmart.com/assets/images/app-logo.svg\" alt=\"\" class=\"payment-img\" /> */}\r\n                        </div>\r\n                      </td>\r\n\r\n                      <td>\r\n                        <ir-switch checked={po.is_active} onCheckChange={e => this.handleCheckChange(e, po)}></ir-switch>\r\n                      </td>\r\n                      <td class=\"payment-action\">\r\n                        {this.showEditButton(po) && (\r\n                          <ir-button\r\n                            title={locales?.entries?.Lcz_Edit}\r\n                            variant=\"icon\"\r\n                            icon_name=\"edit\"\r\n                            onClickHandler={() => {\r\n                              payment_option_store.selectedOption = po;\r\n                              payment_option_store.mode = 'edit';\r\n                            }}\r\n                          ></ir-button>\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n        <ir-sidebar\r\n          onIrSidebarToggle={() => {\r\n            this.closeModal(null);\r\n          }}\r\n          label={locales?.entries.Lcz_Information?.replace('%1', payment_option_store.selectedOption?.description)}\r\n          open={payment_option_store?.selectedOption !== null}\r\n        >\r\n          {payment_option_store?.selectedOption && <ir-option-details propertyId={this.propertyid} slot=\"sidebar-body\"></ir-option-details>}\r\n        </ir-sidebar>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}