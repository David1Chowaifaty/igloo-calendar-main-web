import{r as t,h as e,H as i,c as s,F as r,g as a}from"./p-53d64953.js";import{b as n,m as o,B as l,c,r as h,a as d,d as u,u as p,g as f}from"./p-633d1c39.js";import{l as b}from"./p-71768c2d.js";import{i as m,c as g}from"./p-00df8713.js";import{f as v,e as y,h as k,g as x,d as w,c as _,v as D,a as C,t as O,r as A,b as B}from"./p-703a369a.js";import{v as M}from"./p-4ed69de7.js";import{h as E}from"./p-6c4ba7c0.js";import{i as S,a as I}from"./p-2e94af0d.js";import{z as T,Z as F,a as j}from"./p-b859bcd5.js";import{a as Y}from"./p-bf44a732.js";import{R as z}from"./p-429a4d65.js";import{P as N}from"./p-9592e7ee.js";import{T as R}from"./p-a93581f3.js";import{c as L,i as P}from"./p-6b5b5b8a.js";import{c as V}from"./p-0462f723.js";import{_ as H,a as G,b as U}from"./p-84f11abc.js";import{I as K}from"./p-657198cf.js";import{S as W}from"./p-0e0f732a.js";import"./p-a973aec7.js";class q{formatVariationBasedOnInfants(t){const e=this.getVariationBasedOnInfants(t);return this.formatVariation(e,t.infants)}calculateVariationAmount(t){var e;return((e=this.getVariationBasedOnInfants(t))===null||e===void 0?void 0:e.discounted_amount)||0}getVariationBasedOnInfants({variations:t,baseVariation:e,infants:i}){const{adult_nbr:s,child_nbr:r}=e;return t.find((t=>t.adult_nbr===s&&t.child_nbr===Math.max(0,r-Math.max(0,i))))||e}formatVariation({child_nbr:t,adult_nbr:e},i){var s,r,a,n;const o=Number(e)||0;const l=Math.max(Number(i)||0,0);const c=o>1?b.entries.Lcz_Adults.toLowerCase():b.entries.Lcz_Adult.toLowerCase();const h=t>1?b.entries.Lcz_Children.toLowerCase():b.entries.Lcz_Child.toLowerCase();const d=l>1?(r=(s=b.entries["Lcz_Infants"])!==null&&s!==void 0?s:"infants")===null||r===void 0?void 0:r.toLowerCase():(n=(a=b===null||b===void 0?void 0:b.entries["Lcz_Infant"])!==null&&a!==void 0?a:"infant")===null||n===void 0?void 0:n.toLowerCase();const u=[`${o} ${c}`,t?`${t} ${h}`:"",l?`${l} ${d}`:""];return u.filter(Boolean).join("&nbsp&nbsp&nbsp&nbsp")}}const J=".sc-igl-application-info-h{display:block}.rate_amount.sc-igl-application-info{display:none;padding:0;margin:0}.booking-header.sc-igl-application-info{display:flex;align-items:center;justify-content:space-between;margin-bottom:0.5rem;gap:0.5rem}.non-ref-span.sc-igl-application-info{font-size:12px;color:var(--green)}.booking-roomtype-title.sc-igl-application-info{font-size:1.25rem;margin-right:0.5rem;margin:0;padding:0}.booking-details-container.sc-igl-application-info{display:flex;align-items:center;justify-content:space-between;padding:0;margin:0}.booking-rateplan.sc-igl-application-info{display:flex;align-items:center;gap:0.5rem;margin:0;padding:0}.booking-rateplan-name.sc-igl-application-info{font-weight:bold;margin:0;padding:0}.booking-tooltip.sc-igl-application-info{margin-right:0.5rem;margin:0;padding:0}.booking-variation.sc-igl-application-info{margin:0;padding:0}.booking-price.sc-igl-application-info{margin:0;padding:0}.booking-footer.sc-igl-application-info{display:flex;align-items:center;justify-content:space-between;padding:0;margin-bottom:0.5rem}.booking-details-container.sc-igl-application-info{display:none}@media (min-width: 768px){.booking-header.sc-igl-application-info{justify-content:flex-start}.booking-footer.sc-igl-application-info,.booking-price.sc-igl-application-info{display:none}.booking-details-container.sc-igl-application-info,.rate_amount.sc-igl-application-info{display:inline-flex;gap:0.5rem}}@media only screen and (min-width: 908px){.aplicationInfoContainer.sc-igl-application-info{max-width:100%}.guest-info-container.sc-igl-application-info,.bed-preference-container.sc-igl-application-info,.unit-select-container.sc-igl-application-info{max-width:250px}}";const X=J;const Z=class{constructor(e){t(this,e);this.bedPreferenceType=[];this.bookingType="PLUS_BOOKING";this.totalNights=1;this.isButtonPressed=false;this.variationService=new q}componentWillLoad(){var t,e;if(m(this.rateplanSelection.roomtype.id)){const i=this.filterRooms();if(i.length>0)this.updateGuest({unit:(e=(t=i[0])===null||t===void 0?void 0:t.id)===null||e===void 0?void 0:e.toString()})}}updateGuest(t){const e=this.rateplanSelection.roomtype.id;const i=this.rateplanSelection.ratePlan.id;let s=[...this.rateplanSelection.guest];s[this.roomIndex]=Object.assign(Object.assign({},s[this.roomIndex]),t);n.ratePlanSelections=Object.assign(Object.assign({},n.ratePlanSelections),{[e]:Object.assign(Object.assign({},n.ratePlanSelections[e]),{[i]:Object.assign(Object.assign({},this.rateplanSelection),{guest:[...s]})})})}handleButtonClicked(t){switch(t.detail.key){case"book":case"bookAndCheckIn":case"save":this.isButtonPressed=true;break}}getTooltipMessages(){var t,e,i,s,r,a,n;const{ratePlan:o,selected_variation:l}=this.rateplanSelection;let c=l;if((t=this.guestInfo)===null||t===void 0?void 0:t.infant_nbr){c=this.variationService.getVariationBasedOnInfants({variations:o.variations,baseVariation:l,infants:(e=this.guestInfo)===null||e===void 0?void 0:e.infant_nbr})}if(!c)return;const h=(i=o.variations)===null||i===void 0?void 0:i.find((t=>t.adult_nbr===c.adult_nbr&&t.child_nbr===c.child_nbr));if(!h)return;const d=(r=(s=h.applicable_policies)===null||s===void 0?void 0:s.find((t=>t.type==="cancelation")))===null||r===void 0?void 0:r.combined_statement;const u=(n=(a=h.applicable_policies)===null||a===void 0?void 0:a.find((t=>t.type==="guarantee")))===null||n===void 0?void 0:n.combined_statement;let p="";if(d){p+=`<b><u>Cancellation:</u></b> ${d}<br/>`}if(u){p+=`<b><u>Guarantee:</u></b> ${u}`}return p||undefined}getAmount(){var t,e;if(this.rateplanSelection.is_amount_modified){return this.rateplanSelection.view_mode==="001"?this.rateplanSelection.rp_amount:this.rateplanSelection.rp_amount*this.totalNights}let i=this.rateplanSelection.selected_variation;if((t=this.guestInfo)===null||t===void 0?void 0:t.infant_nbr){i=this.variationService.getVariationBasedOnInfants({variations:this.rateplanSelection.ratePlan.variations,baseVariation:this.rateplanSelection.selected_variation,infants:(e=this.guestInfo)===null||e===void 0?void 0:e.infant_nbr})}return i.discounted_gross_amount}filterRooms(){var t,e,i,s;const r=[];if(!g.is_frontdesk_enabled){return r}(e=(t=this.rateplanSelection.ratePlan)===null||t===void 0?void 0:t.assignable_units)===null||e===void 0?void 0:e.forEach((t=>{if(t.Is_Fully_Available){r.push({name:t.name,id:t.pr_id})}}));const a=this.rateplanSelection.guest.filter(((t,e)=>e!==this.roomIndex)).map((t=>t.unit));const n=r.filter((t=>!a.includes(t.id.toString())));return this.bookingType==="EDIT_BOOKING"?[...n,this.rateplanSelection.roomtype.id===((i=this.baseData)===null||i===void 0?void 0:i.roomtypeId)?(s=this.baseData)===null||s===void 0?void 0:s.unit:null].filter((t=>!!t)).sort(((t,e)=>t.name.localeCompare(e.name))):n}render(){var t,s,r,a,l,c,h,d,u,p,f,y,k;const x=this.filterRooms();const w=this.variationService.formatVariationBasedOnInfants({baseVariation:this.rateplanSelection.selected_variation,infants:this.guestInfo.infant_nbr,variations:this.rateplanSelection.ratePlan.variations});return e(i,{key:"270e3dc0949b4139e00170e997aa66d31177b8cd",class:"my-2","data-testid":`room_info_${this.rateplanSelection.ratePlan.id}`},e("div",{key:"bfca340a2e33ea209bb780fc1d7a577ad38fdbd1",class:"booking-header"},(this.bookingType==="PLUS_BOOKING"||this.bookingType==="ADD_ROOM"||this.bookingType==="EDIT_BOOKING")&&e("span",{key:"aa19eb861f285cf72cbf8e8a56ca573f1498f945",class:"booking-roomtype-title"},this.rateplanSelection.roomtype.name),e("div",{key:"3087b8da03cd2cf3b53304d3079350520f11d821",class:"booking-details-container"},e("div",{key:"b6babfe4fe365bdaf0b2e6e5b472d96ccfc1c7e9",class:"booking-rateplan"},e("p",{key:"7211e672a094a94c07bfa9c7da6dfd9f90e18e07",class:"booking-rateplan-name"},this.rateplanSelection.ratePlan.short_name," ",this.rateplanSelection.ratePlan.is_non_refundable&&e("span",{key:"48f7cd820ec1b01c6241e0c4585dfb8498017bc6",class:"non-ref-span"},"Non Refundable")),e("ir-tooltip",{key:"a68de9a3b9bd03c3f9fd4984b7868c9989be265f",class:"booking-tooltip",message:this.getTooltipMessages()})),e("p",{key:"5fe49ff41a3972d24041f1aabc59e3555bc255a5",class:"booking-variation",innerHTML:w})),e("p",{key:"62a54cb87856de6a10436bc6c2a26954d407dda5",class:"booking-price"},v((t=this.currency)===null||t===void 0?void 0:t.symbol,this.getAmount()),"/",b.entries.Lcz_Stay)),e("div",{key:"f746accf240b6bc7f0e6aa3b54286268d6699405",class:"booking-footer"},e("div",{key:"ed2b5e8379eaa3d3f9debffc64e63c6b3a3da90a",class:"booking-rateplan"},e("p",{key:"dd93b4e7753a9fff02d11b5e924148796ccc4da5",class:"booking-rateplan-name"},this.rateplanSelection.ratePlan.short_name),e("ir-tooltip",{key:"27ccd413a9b2b89315fb291827c900a06097c7ec",class:"booking-tooltip",message:this.getTooltipMessages()})),e("p",{key:"8fed6aedf45fdd43f60e5be6243d26c43b9da328",class:"booking-variation",innerHTML:w})),e("div",{key:"cc6cb8d49f456c07af4484931031d5439c2648f7",class:"d-flex flex-column flex-md-row  p-0 align-items-md-center aplicationInfoContainer"},e("div",{key:"4b30adda679ccdf9cdf30d97c5dc9aeeb7d2bd56",class:"mr-md-1 mb-1 mb-md-0 flex-fill guest-info-container"},e("input",{key:"ab764e2d79bff44061644ccb8354d2e3c11423b4",id:M(),type:"text","data-testid":"guest_first_name",class:`form-control ${this.isButtonPressed&&((s=this.guestInfo)===null||s===void 0?void 0:s.first_name)===""&&"border-danger"}`,placeholder:(r=b.entries["Lcz_GuestFirstname"])!==null&&r!==void 0?r:"Guest first name",name:"guestFirstName",onInput:t=>{const e=t.target.value;this.updateGuest({first_name:e});if(n.event_type.type==="EDIT_BOOKING"){o("guest",Object.assign(Object.assign({},n.guest),{name:e}))}},required:true,value:(a=this.guestInfo)===null||a===void 0?void 0:a.first_name})),e("div",{key:"7504c9306bf9e7264952a334eba9748e67052472",class:"mr-md-1 flex-fill guest-info-container"},e("input",{key:"0b0e165c2c91b5db8132702a612eb928e47fd0f2",id:M(),type:"text",class:`form-control ${this.isButtonPressed&&((l=this.guestInfo)===null||l===void 0?void 0:l.last_name)===""&&"border-danger"}`,placeholder:(c=b.entries["Lcz_GuestLastname"])!==null&&c!==void 0?c:"Guest last name",name:"guestLastName","data-testid":"guest_last_name",onInput:t=>{const e=t.target.value;this.updateGuest({last_name:e});if(n.event_type.type==="EDIT_BOOKING"){o("guest",Object.assign(Object.assign({},n.guest),{name:e}))}},required:true,value:(h=this.guestInfo)===null||h===void 0?void 0:h.last_name})),g.is_frontdesk_enabled&&!m(this.rateplanSelection.roomtype.id)&&(this.bookingType==="PLUS_BOOKING"||this.bookingType==="ADD_ROOM"||this.bookingType==="EDIT_BOOKING")&&e("div",{key:"957af199cf8c402a2de35173742f800fdf31cb20",class:"mt-1 mt-md-0 d-flex align-items-center flex-fill"},e("div",{key:"d1e3e370a2ed9e2b3d69884c77cea18b42b8b959",class:"mr-md-1 p-0 flex-fill preference-select-container"},e("select",{key:"371a3b8673b7be48e1921e0fc434c144d52aa10d","data-testid":"unit",class:"form-control input-sm pr-0",id:M(),onChange:t=>this.updateGuest({unit:t.target.value})},e("option",{key:"04e8109ba52eb1191cdbcdcaaa77b3b83b8baba1",value:"",selected:((d=this.guestInfo)===null||d===void 0?void 0:d.unit)===""},b.entries.Lcz_Assignunits),x===null||x===void 0?void 0:x.map((t=>{var i;return e("option",{value:t.id,selected:((i=this.guestInfo)===null||i===void 0?void 0:i.unit)===t.id.toString()},t.name)}))))),this.rateplanSelection.roomtype.is_bed_configuration_enabled&&e("div",{key:"0e6de40478ee85bc99b9bd94df5ef639191cafa0",class:"mt-1 mt-md-0 mr-md-1 flex-fill"},e("select",{key:"76bd075744f1021e63a9f445b0f41af1036fd309","data-testid":"bed_configuration",class:`form-control input-sm ${this.isButtonPressed&&((u=this.guestInfo)===null||u===void 0?void 0:u.bed_preference)===""&&"border-danger"}`,id:M(),onChange:t=>this.updateGuest({bed_preference:t.target.value})},e("option",{key:"e14a3e622f12b8012151275c4e346064f9469970",value:"",selected:((p=this.guestInfo)===null||p===void 0?void 0:p.bed_preference)===""},b.entries.Lcz_BedConfiguration),this.bedPreferenceType.map((t=>{var i;return e("option",{value:t.CODE_NAME,selected:((i=this.guestInfo)===null||i===void 0?void 0:i.bed_preference)===t.CODE_NAME},t.CODE_VALUE_EN)})))),e("p",{key:"ad77cc7de624bbb0ec4d981323c3fe8e7ed66b9c",class:"rate_amount"},v((f=this.currency)===null||f===void 0?void 0:f.symbol,this.getAmount()),"/",b.entries.Lcz_Stay)),this.rateplanSelection.selected_variation.child_nbr>0&&e("div",{key:"06d302f33d90c4439e2d626ac5522c48eab0ec88",style:{gap:"0.5rem",marginTop:"0.5rem"},class:"d-flex  flex-row  p-0 align-items-center aplicationInfoContainer"},e("p",{key:"36338e61b71d69389a5ad2d43563a9309fbbbeed",class:"m-0 p-0 text-danger"},"Any of the children below 3 years?"),e("div",{key:"cd3a92cd2f3473eaecf2f3412bfecacd49d7bb5e",class:"mr-1 flex-fill"},e("select",{key:"43c120521784dcf8539a71fc8ecee074deebc3d2",class:`form-control input-sm ${this.isButtonPressed&&((y=this.guestInfo)===null||y===void 0?void 0:y.bed_preference)===""&&"border-danger"}`,id:M(),style:{width:"max-content"},onChange:t=>this.updateGuest({infant_nbr:Number(t.target.value)})},e("option",{key:"47484dc2d40f4d78d53b58fcf246b6c964970d2e",value:"",selected:Number((k=this.guestInfo)===null||k===void 0?void 0:k.infant_nbr)===0},b.entries["No"]||"No"),Array.from({length:this.rateplanSelection.selected_variation.child_nbr},((t,e)=>e+1)).map((t=>{var i;return e("option",{value:t,selected:((i=this.guestInfo)===null||i===void 0?void 0:i.infant_nbr)===t},t)}))))))}};Z.style=X;const Q=".sc-igl-block-dates-view-h{display:block}.sc-igl-block-dates-view-h .controlContainer.sc-igl-block-dates-view{width:24px}.sc-igl-block-dates-view-h .checkBoxContainer.sc-igl-block-dates-view input.sc-igl-block-dates-view{height:1.2rem !important;width:30px}.releaseTime.sc-igl-block-dates-view{padding-left:5px}.out-of-service-label.sc-igl-block-dates-view{margin-left:5px !important}";const tt=Q;const et=class{constructor(e){t(this,e);this.dataUpdateEvent=s(this,"dataUpdateEvent",7);this.isEventHover=false;this.renderAgain=false;this.blockDatesData={RELEASE_AFTER_HOURS:0,OPTIONAL_REASON:"",OUT_OF_SERVICE:false};this.releaseList=[];this.bookingService=new l}async componentWillLoad(){try{this.releaseList=await this.bookingService.getBlockedInfo();if(this.defaultData){this.blockDatesData=Object.assign({},this.defaultData)}else{this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(this.releaseList[0].CODE_NAME);this.emitData()}}catch(t){}}handleOptionalReason(t){this.blockDatesData.OPTIONAL_REASON=t.target.value;this.emitData()}handleReleaseAfterChange(t){if(this.entryDate)this.entryDate=undefined;this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(t.target.value);this.renderPage();this.emitData()}emitData(){this.dataUpdateEvent.emit({key:"blockDatesData",data:Object.assign({},this.blockDatesData)})}getReleaseHoursString(){let t=this.entryDate?new Date(this.entryDate):new Date;if(this.entryDate&&this.entryHour&&this.entryMinute){t.setHours(this.entryHour,this.entryMinute,0,0)}else{t.setHours(t.getHours()+this.blockDatesData.RELEASE_AFTER_HOURS,t.getMinutes(),0,0)}return t.toLocaleString("default",{month:"short"})+" "+t.getDate()+", "+this.formatNumber(t.getHours())+":"+this.formatNumber(t.getMinutes())}formatNumber(t){return t<10?`0${t}`:t}handleOutOfService(t){this.blockDatesData.OUT_OF_SERVICE=t.target.checked;if(this.blockDatesData.OUT_OF_SERVICE){this.blockDatesData.OPTIONAL_REASON="";this.blockDatesData.RELEASE_AFTER_HOURS=0}this.renderPage();this.emitData()}renderPage(){this.renderAgain=!this.renderAgain}render(){console.log({fromDate:this.fromDate,toDate:this.toDate});return e(i,{key:"9bc6beece8e2f6dadd6d929413c0b654ad8c8a70"},e("div",{key:"f80c8dbf73d06cc95a56473a3925cd20de565751",class:`m-0 p-0 mb-1`},e("div",{key:"56684bb7f118deee95b23b78fc0a44558a5b950d",class:"text-left p-0"},e("ir-date-view",{key:"677a3ce35f708976d7931a2115f125d84c10f6ab",from_date:this.fromDate,dateOption:"YYYY-MM-DD",showDateDifference:false,to_date:this.toDate}))),e("div",{key:"396249b077eaace9fc339b0cfe0a9f4011aed50c",class:` mb-1 text-left ${this.isEventHover&&"p-0"}`},e("div",{key:"a518baf4c0bcfafe7911a759d05dbb8c127f5991",class:"mb-1 "},e("label",{key:"b895a7a8924d9bb4cd0d7e46232453f5839c166b",class:"p-0 text-bold-700 font-medium-1 m-0 align-middle"},b.entries.Lcz_Reason,":"),e("div",{key:"f6d0a6dbdd97e67ea3b8683bfbff8c79d2b1119e",class:"p-0 m-0 pr-1  controlContainer checkBoxContainer d-inline-block align-middle"},e("input",{key:"9877d3a930218f243f5adb668bc00ca4a89397ee",class:"form-control",type:"checkbox",checked:this.blockDatesData.OUT_OF_SERVICE,id:"userinput6",onChange:t=>this.handleOutOfService(t)})),e("span",{key:"31d688ea76901bb89b696f5c42aabcf2fec110c4",class:"align-middle out-of-service-label"},b.entries.Lcz_OutOfservice)),!this.blockDatesData.OUT_OF_SERVICE?e("div",null,e("div",{class:"mb-1 d-flex  align-items-center"},e("span",{class:"align-middle"},b.entries.Lcz_Or," "),e("div",{class:"d-inline-flex col pr-0 align-middle"},e("input",{class:"form-control",type:"text",placeholder:b.entries.Lcz_OptionalReason,id:"optReason",value:this.blockDatesData.OPTIONAL_REASON,onInput:t=>this.handleOptionalReason(t)}))),e("div",{class:"mb-1 w-100 pr-0 "},e("span",{class:"text-bold-700 font-medium-1"},b.entries.Lcz_AutomaticReleaseIn,": "),e("div",{class:"d-inline-block"},e("select",{class:"form-control input-sm",id:"zSmallSelect",onChange:t=>this.handleReleaseAfterChange(t)},this.releaseList.map((t=>e("option",{value:+t.CODE_NAME,selected:Number(this.blockDatesData.RELEASE_AFTER_HOURS)==Number(t.CODE_NAME)},t.CODE_VALUE_EN))))),this.blockDatesData.RELEASE_AFTER_HOURS?e("div",{class:"d-inline-block releaseTime"},e("em",null,b.entries.Lcz_On," ",this.getReleaseHoursString())):null)):null))}};et.style=tt;var it=undefined&&undefined.__rest||function(t,e){var i={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0)i[s]=t[s];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++){if(e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r]))i[s[r]]=t[s[r]]}return i};class st{setBookingInfoFromAutoComplete(t,e){var i,s,r;t.bookedByInfoData={id:e.guest.id,email:e.guest.email,firstName:e.guest.first_name,lastName:e.guest.last_name,countryId:e.guest.country_id,isdCode:(s=(i=e.guest)===null||i===void 0?void 0:i.country_phone_prefix)!==null&&s!==void 0?s:(r=e.guest)===null||r===void 0?void 0:r.country_id.toString(),contactNumber:e.guest.mobile,selectedArrivalTime:e.arrival,emailGuest:e.guest.subscribe_to_news_letter,message:e.remark,cardNumber:"",cardHolderName:"",expiryMonth:"",expiryYear:"",bookingNumber:e.booking_nbr,rooms:e.rooms,from_date:e.from_date,to_date:e.to_date}}resetRoomsInfoAndMessage(t){t.defaultData.roomsInfo=[];t.message=""}onDataRoomUpdate(t,e,i,s,r){let a=e;const{data:n,key:o,changedKey:l}=t.detail;const c=`c_${n.roomCategoryId}`;const h=`p_${n.ratePlanId}`;if(this.shouldClearData(o)){a=new Map}this.initializeRoomCategoryIfNeeded(c,a);if(s){if(l==="rate"){if(a.has(c)&&a.get(c).has(h)){this.applyBookingEditToSelectedRoom(c,h,n,a,r,i)}}else{if(l!=="rateType"){if(l==="adult_child_offering"){if(a.has(c)&&e.get(c).has(h)){this.applyBookingEditToSelectedRoom(c,h,n,a,r,i)}}else{this.applyBookingEditToSelectedRoom(c,h,n,a,r,i)}}}}else{this.setSelectedRoomData(c,h,n,a)}this.cleanupEmptyData(c,a);return a}shouldClearData(t){return t==="clearData"||t==="EDIT_BOOKING"}initializeRoomCategoryIfNeeded(t,e){if(!e.has(t)){e.set(t,new Map)}}setSelectedRoomData(t,e,i,s){let r=s.get(t);if(i.totalRooms===0||i.inventory===0){r.delete(e)}else{s.set(t,r.set(e,Object.assign(Object.assign({},i),{selectedUnits:Array(i.totalRooms).fill(-1)})))}}cleanupEmptyData(t,e){if(e.has(t)){let i=e.get(t);if(i.size===0){e.delete(t)}}}applyBookingEditToSelectedRoom(t,e,i,s,r,a){s.clear();let n={};if(a){n=Object.assign(Object.assign({},i),{guestName:r||"",roomId:""})}else{n=Object.assign({},i)}s.set(t,(new Map).set(e,n))}calculateAmount({is_amount_modified:t,selected_variation:e,view_mode:i,rp_amount:s}){const r=e.nights.length;if(t){return i==="002"?s:s/r}}generateDailyRates(t,e){let i=t.selected_variation;const s=t.is_amount_modified?this.calculateAmount(t):null;if(t.guest[e].infant_nbr>0&&!t.is_amount_modified){if(!this.variationService){this.variationService=new q}i=this.variationService.getVariationBasedOnInfants({variations:t.ratePlan.variations,baseVariation:t.selected_variation,infants:t.guest[e].infant_nbr})}return i.nights.map((t=>({date:t.night,amount:s!==null&&s!==void 0?s:t.discounted_amount,cost:null})))}getBookedRooms({check_in:t,check_out:e,notes:i,identifier:s,override_unit:r,unit:a,auto_check_in:o}){var l,c;const h=[];for(const d in n.ratePlanSelections){const u=n.ratePlanSelections[d];for(const n in u){const d=u[n];if(d.reserved>0){for(let n=0;n<d.reserved;n++){const{first_name:u,last_name:p}=d.guest[n];h.push({identifier:s,roomtype:d.roomtype,rateplan:d.ratePlan,prepayment_amount_gross:0,unit:r?{id:a}:d.guest[n].unit?{id:d.guest[n].unit}:null,occupancy:{adult_nbr:d.selected_variation.adult_nbr,children_nbr:Number((l=d.selected_variation.child_nbr)!==null&&l!==void 0?l:0)-Math.max(Number((c=d.guest[n].infant_nbr)!==null&&c!==void 0?c:0),0),infant_nbr:d.guest[n].infant_nbr},bed_preference:d.guest[n].bed_preference,from_date:E(t).format("YYYY-MM-DD"),to_date:E(e).format("YYYY-MM-DD"),notes:i,check_in:o,days:this.generateDailyRates(d,n),guest:{email:null,first_name:u,last_name:p,country_id:null,city:null,mobile:null,address:null,dob:null,subscribe_to_news_letter:null,cci:null}})}}}}return h}async prepareBookUserServiceParams({context:t,sourceOption:e,check_in:i}){var s,r;try{if(!t||!t.dateRangeData){throw new Error("Invalid context: Missing date range data.")}const a=new Date(t.dateRangeData.fromDate);const n=new Date(t.dateRangeData.toDate);const o=(e=null,i=false)=>this.getBookedRooms({check_in:a,check_out:n,identifier:e,notes:"",override_unit:t.isEventType("BAR_BOOKING")?true:false,unit:t.isEventType("BAR_BOOKING")?t.bookingData.PR_ID:null,auto_check_in:i});const l=(t,e)=>{var{pickup_info:i,extra_services:s,is_direct:r,is_in_loyalty_mode:a,promo_key:n,extras:o}=t,l=it(t,["pickup_info","extra_services","is_direct","is_in_loyalty_mode","promo_key","extras"]);return{assign_units:true,is_pms:true,is_direct:r,is_backend:true,is_in_loyalty_mode:a,promo_key:n,extras:o,booking:Object.assign(Object.assign({},l),{rooms:e}),extra_services:s,pickup_info:i}};let c=null;switch(t.defaultData.event_type){case"EDIT_BOOKING":{const{booking:e,currentRoomType:i}=t.defaultData;const r=e.rooms.filter((t=>t.identifier!==i.identifier));console.log("currentRoomType",i);const a=o(i.identifier,((s=i.in_out)===null||s===void 0?void 0:s.code)==="001");c=l(e,[...r,...a]);break}case"ADD_ROOM":case"SPLIT_BOOKING":{const{booking:e,ROOMS:i}=t.defaultData;if(!e){throw new Error("Missing booking")}const s=o();const r=t.defaultData.event_type==="ADD_ROOM"?i!==null&&i!==void 0?i:[]:e===null||e===void 0?void 0:e.rooms;c=l(e,[...r,...s]);break}default:{const s=o(null,i);const{bookedByInfoData:l}=t;const h=e.type==="TRAVEL_AGENCY";c={assign_units:true,is_pms:true,is_direct:true,is_backend:true,is_in_loyalty_mode:false,promo_key:null,extras:y,agent:h?{id:e.tag}:null,booking:{from_date:E(a).format("YYYY-MM-DD"),to_date:E(n).format("YYYY-MM-DD"),remark:l.message||null,booking_nbr:"",property:{id:t.propertyid},booked_on:{date:E().format("YYYY-MM-DD"),hour:(new Date).getHours(),minute:(new Date).getMinutes()},source:h?"":e,rooms:s,currency:t.currency,arrival:{code:l.selectedArrivalTime},guest:{email:l.email===""?null:l.email||null,first_name:l.firstName,last_name:l.lastName,country_id:l.countryId===""?null:l.countryId,city:null,mobile:l.contactNumber===null?"":l.contactNumber,country_phone_prefix:(r=l===null||l===void 0?void 0:l.isdCode)!==null&&r!==void 0?r:null,address:"",dob:null,subscribe_to_news_letter:l.emailGuest||false,cci:l.cardNumber?{nbr:l.cardNumber,holder_name:l.cardHolderName,expiry_month:l.expiryMonth,expiry_year:l.expiryYear}:null}},pickup_info:null};break}}return c}catch(t){console.error(t)}}getRoomCategoryByRoomId(t){var e;return(e=t.roomsInfo)===null||e===void 0?void 0:e.find((e=>e.id===t.RATE_TYPE))}setEditingRoomInfo(t,e){const i=this.getRoomCategoryByRoomId(t);const s=!i?"":`c_${i===null||i===void 0?void 0:i.id}`;const r=`p_${t.RATE_PLAN_ID}`;const a={adultCount:t.ADULTS_COUNT,rate:t.RATE,rateType:t.RATE_TYPE,ratePlanId:t.RATE_PLAN_ID,roomCategoryId:i?i.id:"",roomCategoryName:i?i.name:"",totalRooms:1,ratePlanName:t.RATE_PLAN,roomId:t.PR_ID,guestName:t.NAME,cancelation:t.cancelation,guarantee:t.guarantee,adult_child_offering:t.adult_child_offering};e.set(s,(new Map).set(r,a))}}const rt=".sc-igl-book-property-h{position:fixed;top:0;right:0;width:100vw;min-height:100vh;z-index:99;overflow:hidden}.card-title.sc-igl-book-property{border-bottom:1px solid #e4e5ec;width:100%}.card-header-container.sc-igl-book-property{border-bottom:1px solid #e4e5ec;width:100%;display:flex;align-items:center;box-sizing:border-box;padding:1rem 0;justify-content:space-between}.loading-container.sc-igl-book-property{height:100%;width:100%;display:flex;justify-content:center;align-items:center;margin:0;padding:0}.card-header-container.sc-igl-book-property h3.sc-igl-book-property{padding:0;margin:0}.background-overlay.sc-igl-book-property{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.25)}.formContainer.sc-igl-book-property{height:calc(100% - 79px);overflow:auto}.gap-30.sc-igl-book-property{gap:30px}.block-date.sc-igl-book-property{width:100%}.sideWindow.sc-igl-book-property{position:absolute;inset:0;left:unset;background-color:#ffffff;width:100%;overflow:auto;animation:slideInFromRight 0.5s}.card.sc-igl-book-property{top:0;z-index:1000}.close.sc-igl-book-property{float:right;font-size:1.5rem;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:0.5;padding:0;background-color:transparent;border:0;appearance:none}.close-icon.sc-igl-book-property{position:absolute;top:18px;right:33px;outline:none}button.sc-igl-book-property:not(:disabled),[type='button'].sc-igl-book-property:not(:disabled){cursor:pointer}.sheet-footer.sc-igl-book-property{width:100%}@media only screen and (min-width: 1200px){.sideWindow.sc-igl-book-property{max-width:70%}}@media only screen and (min-width: 2000px){.sideWindow.sc-igl-book-property{max-width:40%}}@media only screen and (min-width: 768px) and (max-width: 1200px){.sideWindow.sc-igl-book-property{max-width:90%}}@media only screen and (min-width: 600px) and (max-width: 768px){.sideWindow.sc-igl-book-property{max-width:75%}}@media only screen and (min-width: 641px){.block-date.sc-igl-book-property{max-width:450px;padding-bottom:0 !important}}@keyframes slideInFromRight{from{transform:translateX(120%)}to{transform:translateX(0)}}@keyframes slideOutToRight{from{transform:translateX(0)}to{transform:translateX(120%)}}.sideWindow--exit.sc-igl-book-property{animation:slideOutToRight 0.5s forwards}";const at=rt;const nt=".sc-igl-book-property-h{height:100%}.sheet-container.sc-igl-book-property{display:flex !important;flex-direction:column !important;background:white;height:100vh;gap:1rem;z-index:1000}.sheet-container.sc-igl-book-property{height:-webkit-fill-available;height:100vh;height:100dvh}.sheet-footer.sc-igl-book-property{position:sticky;bottom:0;z-index:20;background:white;border-top:1px solid #e4e5ec;display:flex;flex-direction:column;padding:1rem;gap:0.5rem}.sheet-header.sc-igl-book-property{position:sticky;top:0;z-index:10;background:white}.sheet-body.sc-igl-book-property{flex:1 1 0%}@media (min-width: 768px){.sheet-footer.sc-igl-book-property{flex-direction:row;align-items:center}}";const ot=nt;const lt=class{constructor(e){t(this,e);this.closeBookingWindow=s(this,"closeBookingWindow",7);this.blockedCreated=s(this,"blockedCreated",7);this.resetBookingEvt=s(this,"resetBookingEvt",7);this.animateIrButton=s(this,"animateIrButton",7);this.animateIrSelect=s(this,"animateIrSelect",7);this.toast=s(this,"toast",7);this.showPaymentDetails=false;this.adultChildCount={adult:0,child:0};this.renderAgain=false;this.bookingHistory=[];this.initialRoomIds=null;this.showSplitBookingOption=false;this.sourceOptions=[];this.guestData=[];this.bookedByInfoData={};this.blockDatesData={};this.ratePricingMode=[];this.selectedUnits=new Map;this.bedPreferenceType=[];this.bookingService=new l;this.bookPropertyService=new st;this.updatedBooking=false;this.MAX_HISTORY_LENGTH=2}async componentWillLoad(){console.log("<==>roomtypes<==>",n===null||n===void 0?void 0:n.roomTypes);if(n.roomTypes){o("roomTypes",[]);o("ratePlanSelections",{})}this.handleKeyDown=this.handleKeyDown.bind(this);this.initializeDefaultDateRange();if(!this.bookingData.defaultDateRange){return}this.initializeDefaultData();this.wasBlockedUnit=this.defaultData.hasOwnProperty("block_exposed_unit_props");o("event_type",{type:this.defaultData.event_type});this.fetchSetupEntriesAndInitialize()}componentDidLoad(){document.addEventListener("keydown",this.handleKeyDown);k(true)}disconnectedCallback(){document.removeEventListener("keydown",this.handleKeyDown)}clearBooking(t){if(this.isEventType("SPLIT_BOOKING")){t.stopImmediatePropagation();t.stopPropagation();this.bookedByInfoData={};this.bookPropertyService.resetRoomsInfoAndMessage(this);this.renderPage()}}async handleSpiltBookingSelected(t){t.stopImmediatePropagation();t.stopPropagation();const{key:e,data:i}=t.detail;if(e==="select"||e==="blur"&&i!==""){const t=await this.bookingService.getExposedBooking(i.booking_nbr||i,this.language);this.defaultData=Object.assign(Object.assign({},this.defaultData),{booking:t});this.bookPropertyService.setBookingInfoFromAutoComplete(this,t);this.sourceOption=t.source;this.renderPage()}}handleAdultChildChange(t){if(this.isEventType("ADD_ROOM")||this.isEventType("SPLIT_BOOKING")){this.bookPropertyService.resetRoomsInfoAndMessage(this)}const{adult:e,child:i}=t.detail;this.adultChildCount=Object.assign({},t.detail);this.updateBookingHistory({adults:Number(e),children:Number(i)})}onDateRangeSelect(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;this.updateBookingHistory({dates:{checkIn:new Date(this.dateRangeData.fromDate),checkOut:new Date(new Date(e.data.toDate))}});console.log("date changed",e);if(e.key==="selectedDateRange"){this.dateRangeData=e.data;if(this.isEventType("ADD_ROOM")||this.isEventType("SPLIT_BOOKING")){this.defaultData.roomsInfo=[]}else if(this.adultChildCount.adult!==0){this.checkBookingAvailability()}}}handleSourceDropDown(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;const i=this.sourceOptions.find((t=>t.id===e.toString()));this.sourceOption={code:e,description:i.value||"",tag:i.tag,id:i.id,type:i.type}}gotoSplitPageTwo(){this.gotoPage("page_two")}handleButtonClicked(t){var e,i;switch(t.detail.key){case"save":this.bookUser(false);break;case"cancel":t.stopImmediatePropagation();t.stopPropagation();this.closeWindow();break;case"back":t.stopImmediatePropagation();t.stopPropagation();if(this.isEventType("BAR_BOOKING")){h()}this.gotoPage("page_one");break;case"book":this.bookUser(false);break;case"bookAndCheckIn":this.bookUser(true);break;case"next":t.stopImmediatePropagation();t.stopPropagation();if(!((e=this.adultChildCount)===null||e===void 0?void 0:e.adult)){this.animateIrSelect.emit("adult_child_select");break}if(c()>0){this.gotoPage("page_two");break}else if(((i=this.defaultData)===null||i===void 0?void 0:i.roomsInfo.length)===0){this.animateIrButton.emit("check_availability");break}this.toast.emit({type:"error",description:b.entries.Lcz_SelectRatePlan,title:b.entries.Lcz_SelectRatePlan});break;case"check":this.checkBookingAvailability();break}}updateBookingHistory(t){var e,i,s,r,a,n,o,l;const c=this.bookingHistory[this.bookingHistory.length-1];const h={dates:{checkIn:((e=t.dates)===null||e===void 0?void 0:e.checkIn)||((i=c===null||c===void 0?void 0:c.dates)===null||i===void 0?void 0:i.checkIn)||new Date(this.dateRangeData.fromDate),checkOut:((s=t.dates)===null||s===void 0?void 0:s.checkOut)||((r=c===null||c===void 0?void 0:c.dates)===null||r===void 0?void 0:r.checkOut)||new Date(this.dateRangeData.toDate)},adults:(n=(a=t.adults)!==null&&a!==void 0?a:c===null||c===void 0?void 0:c.adults)!==null&&n!==void 0?n:this.adultChildCount.adult,children:(l=(o=t.children)!==null&&o!==void 0?o:c===null||c===void 0?void 0:c.children)!==null&&l!==void 0?l:this.adultChildCount.child};this.bookingHistory.push(h);if(this.bookingHistory.length>this.MAX_HISTORY_LENGTH){this.bookingHistory.shift()}}handleKeyDown(t){if(t.key==="Escape"){this.closeWindow()}}initializeDefaultDateRange(){this.defaultDateRange={from_date:this.bookingData.FROM_DATE,to_date:this.bookingData.TO_DATE}}initializeDefaultData(){this.defaultData=this.bookingData;this.dateRangeData=Object.assign({},this.defaultData.defaultDateRange)}async fetchSetupEntriesAndInitialize(){try{const t=await this.fetchSetupEntries();this.setSourceOptions(this.allowedBookingSources);this.setOtherProperties(t);this.initializeEventData()}catch(t){console.error("Error fetching setup entries:",t)}}initializeEventData(){if(this.isEventType("EDIT_BOOKING")){this.initializeEditBookingData()}if(!this.isEventType("BAR_BOOKING")){this.bookPropertyService.resetRoomsInfoAndMessage(this)}this.initializePage()}initializeEditBookingData(){var t,e,i,s,r;this.adultChildCount={adult:this.defaultData.ADULTS_COUNT,child:this.defaultData.CHILDREN_COUNT};this.initialRoomIds={roomName:this.defaultData.roomName,ratePlanId:this.defaultData.RATE_PLAN_ID,roomId:this.defaultData.PR_ID,roomTypeId:this.defaultData.RATE_TYPE};const{currentRoomType:a,GUEST:n}=this.defaultData;console.log(n);o("guest",{bed_preference:(t=a.bed_preference)===null||t===void 0?void 0:t.toString(),infant_nbr:a.occupancy.infant_nbr,first_name:(e=n.first_name)!==null&&e!==void 0?e:"",last_name:(i=n.last_name)!==null&&i!==void 0?i:"",unit:(r=(s=a.unit)===null||s===void 0?void 0:s.id)===null||r===void 0?void 0:r.toString()});this.checkBookingAvailability();this.bookPropertyService.setEditingRoomInfo(this.defaultData,this.selectedUnits)}initializePage(){switch(this.defaultData.event_type){case"SPLIT_BOOKING":this.showSplitBookingOption=true;this.page="page_one";break;case"BLOCK_DATES":this.page="page_block_date";break;default:this.page="page_one";break}}async fetchSetupEntries(){return await this.bookingService.fetchSetupEntries()}isGuestDataIncomplete(){for(const t in n.ratePlanSelections){const e=n.ratePlanSelections[t];for(const t in e){const i=e[t];if(i.reserved>0){for(const t of i.guest){if(t.first_name===""||t.last_name===""){return true}}}}}return false}isButtonDisabled(){const t=(t,e,i)=>{if(!t){return true}if(t===this.guestData){return this.isGuestDataIncomplete()}if(e==="selectedArrivalTime"){if(t[e]!==undefined){return t[e].code===""}else{return true}}return t[e]===i||t[e]===undefined};return t(this.guestData,"guestName","")||t(this.bookedByInfoData,"firstName","")||t(this.bookedByInfoData,"lastName","")||t(this.bookedByInfoData,"selectedArrivalTime","")}setSourceOptions(t){this.sourceOptions=t.map((t=>({id:t.id,value:t.description,tag:t.tag,type:t.type})));this._sourceOptions=this.isEventType("BAR_BOOKING")?this.getFilteredSourceOptions():this.sourceOptions;if(this.isEventType("EDIT_BOOKING")){this.sourceOption=Object.assign({},this.defaultData.SOURCE)}else{let t=this._sourceOptions.find((t=>t.type!=="LABEL"));console.log({option:t});this.sourceOption={code:t.code,description:t.description,tag:t.tag,type:t.type,id:t.id}}}getFilteredSourceOptions(){var t,e,i,s;const r=new Set;const a=(i=(e=(t=this.bookingData)===null||t===void 0?void 0:t.roomsInfo)===null||e===void 0?void 0:e.some((t=>{var e;const i=(e=t===null||t===void 0?void 0:t.rateplans)!==null&&e!==void 0?e:[];if(i.length===0)return false;const s=i.every((t=>{var e,i;return((i=(e=t===null||t===void 0?void 0:t.agents)===null||e===void 0?void 0:e.length)!==null&&i!==void 0?i:0)>0}));if(s){i.forEach((t=>{var e;((e=t===null||t===void 0?void 0:t.agents)!==null&&e!==void 0?e:[]).forEach((t=>{var e;return r.add((e=t===null||t===void 0?void 0:t.id)===null||e===void 0?void 0:e.toString())}))}))}return s})))!==null&&i!==void 0?i:false;if(!a){return this.sourceOptions}return((s=this.sourceOptions)!==null&&s!==void 0?s:[]).filter((t=>{if((t===null||t===void 0?void 0:t.type)==="LABEL")return true;const e=t===null||t===void 0?void 0:t.tag;const i=e!=null&&r.has(e);return i}))}setOtherProperties(t){this.ratePricingMode=t===null||t===void 0?void 0:t.ratePricingMode;this.bookedByInfoData.arrivalTime=t.arrivalTime;this.bedPreferenceType=t.bedPreferenceType}async checkBookingAvailability(){d();const t=E(this.dateRangeData.fromDate).format("YYYY-MM-DD");const e=E(this.dateRangeData.toDate).format("YYYY-MM-DD");console.log({sourceOption:this.sourceOption});const i=this.sourceOption["type"]==="TRAVEL_AGENCY";try{const s=this.isEventType("EDIT_BOOKING")?[this.defaultData.RATE_TYPE]:[];const r=this.isEventType("BAR_BOOKING")?this.defaultData.roomsInfo.map((t=>t.id)):[];const a=await this.bookingService.getBookingAvailability({from_date:t,to_date:e,propertyid:this.propertyid,adultChildCount:this.adultChildCount,language:this.language,room_type_ids:r,currency:this.currency,agent_id:i?this.sourceOption["tag"]:null,is_in_agent_mode:i,room_type_ids_to_update:s});if(!this.isEventType("EDIT_BOOKING")){this.defaultData.defaultDateRange.fromDate=new Date(this.dateRangeData.fromDate);this.defaultData.defaultDateRange.toDate=new Date(this.dateRangeData.toDate)}this.defaultData=Object.assign(Object.assign({},this.defaultData),{roomsInfo:a});if(this.isEventType("EDIT_BOOKING")&&!this.updatedBooking){this.updateBooking()}}catch(t){console.error("Error initializing booking availability:",t)}}updateBooking(){var t,e,i;try{const{currentRoomType:s,GUEST:r}=this.defaultData;const a=s.roomtype.id;const n=s.rateplan.id;const l={bed_preference:(t=s.bed_preference)===null||t===void 0?void 0:t.toString(),infant_nbr:s.occupancy.infant_nbr,last_name:r.last_name,first_name:r.first_name,unit:(i=(e=s.unit)===null||e===void 0?void 0:e.id)===null||i===void 0?void 0:i.toString(),roomtype_id:s.roomtype.id};o("guest",l);u({roomTypeId:a,ratePlanId:n,rooms:1,guest:[l]})}catch(t){console.error(t)}}async checkAndBlockDate(){try{const{block_exposed_unit_props:t}=this.defaultData;await this.bookingService.getBookingAvailability({from_date:t.from_date,to_date:t.to_date,propertyid:this.propertyid,adultChildCount:{adult:2,child:0},language:this.language,room_type_ids:this.defaultData.roomsInfo.map((t=>t.id)),currency:this.currency});const e=n.roomTypes.every((t=>{if(t.is_available_to_book){return true}return t.inventory>0&&t["not_available_reason"]==="ALL-RATES-PLAN-NOT-BOOKABLE"}));if(e){await this.handleBlockDate(false)}else{console.log("Blocked date is unavailable. Continuing...")}}catch(t){console.error("Error checking and blocking date:",t)}}async closeWindow(){d();k(false);if(this.wasBlockedUnit&&!this.didReservation){await this.checkAndBlockDate()}const t=document.querySelector(".sideWindow");if(!t)return;t.classList.add("sideWindow--exit");setTimeout((()=>{this.closeBookingWindow.emit();document.removeEventListener("keydown",this.handleKeyDown)}),300)}isEventType(t){return this.defaultData.event_type===t}handleBlockDateUpdate(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;this.blockDatesData=e.data}handleGuestInfoUpdate(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;if(e.guestRefKey){if(this.isEventType("BAR_BOOKING")||this.wasBlockedUnit||this.isEventType("SPLIT_BOOKING")){this.guestData[e.guestRefKey]=Object.assign(Object.assign({},e.data),{roomId:this.defaultData.PR_ID})}else this.guestData[e.guestRefKey]=e.data}}handleBookedByInfoUpdate(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;this.bookedByInfoData=e.value.data}renderPage(){this.renderAgain=!this.renderAgain}gotoPage(t){this.page=t;this.renderPage()}getPageBlockDatesView(){return e(r,null,e("igl-block-dates-view",{fromDate:this.defaultData.FROM_DATE,toDate:this.defaultData.TO_DATE,entryDate:this.defaultData.ENTRY_DATE,onDataUpdateEvent:t=>this.handleBlockDateUpdate(t)}))}handlePageTwoDataUpdateEvent(t){t.stopImmediatePropagation();t.stopPropagation();if(t.detail.key==="propertyBookedBy"){this.handleBookedByInfoUpdate(t)}else{this.handleGuestInfoUpdate(t)}}async handleBlockDate(t=true){const e=this.wasBlockedUnit?this.defaultData.block_exposed_unit_props:(()=>{const t=x(+this.blockDatesData.RELEASE_AFTER_HOURS);return Object.assign({from_date:w(this.defaultData.defaultDateRange.fromDate),to_date:w(this.defaultData.defaultDateRange.toDate),NOTES:this.blockDatesData.OPTIONAL_REASON||"",pr_id:this.defaultData.PR_ID.toString(),STAY_STATUS_CODE:this.blockDatesData.OUT_OF_SERVICE?"004":this.blockDatesData.RELEASE_AFTER_HOURS===0?"002":"003",DESCRIPTION:this.blockDatesData.RELEASE_AFTER_HOURS||""},t)})();await this.bookingService.blockUnit(e);if(t)this.closeWindow()}async bookUser(t){this.setLoadingState(t);if(this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")){if(this.isGuestDataIncomplete()){this.isLoading="";return}}else if(this.isButtonDisabled()){this.isLoading="";return}try{if(this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")){this.bookedByInfoData.message=this.defaultData.NOTES}this.didReservation=true;const e=await this.bookPropertyService.prepareBookUserServiceParams({context:this,sourceOption:this.sourceOption,check_in:t});await this.bookingService.doReservation(e);await this.adjustBlockedDatesAfterReservation(e);this.resetBookingEvt.emit(null)}catch(t){console.error("Error booking user:",t)}finally{this.resetLoadingState()}}async adjustBlockedDatesAfterReservation(t){if(!this.wasBlockedUnit){return}const e=E(this.defaultData.block_exposed_unit_props.from_date,"YYYY-MM-DD");const i=E(t.booking.from_date,"YYYY-MM-DD");const s=E(this.defaultData.block_exposed_unit_props.to_date,"YYYY-MM-DD");const r=E(t.booking.to_date,"YYYY-MM-DD");if(r.isBefore(s,"days")){const t=Object.assign(Object.assign({},this.defaultData.block_exposed_unit_props),{from_date:r.format("YYYY-MM-DD")});await this.bookingService.blockUnit(t)}if(i.isAfter(e,"days")){const t=Object.assign(Object.assign({},this.defaultData.block_exposed_unit_props),{to_date:i.format("YYYY-MM-DD")});await this.bookingService.blockUnit(t)}return}setLoadingState(t){if(this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")){this.isLoading="save"}else{this.isLoading=t?"bookAndCheckIn":"book"}}resetLoadingState(){this.isLoading="";setTimeout((()=>{this.closeWindow()}),100)}getCurrentPage(t){return this.page===t}render(){return e(i,{key:"369ed3e0f4202ec04b69bea53effd363e10d85a2","data-testid":"book_property_sheet h-100"},e("div",{key:"be32cb1439d810e50c22d74a5fba1832216caa8e",class:"background-overlay",onClick:()=>this.closeWindow()}),e("div",{key:"601e36e67a2c75d2b0d05747dea0850626e0906a",class:"sideWindow sheet-container "+(this.getCurrentPage("page_block_date")?"block-date":"")},S("/Get_Setup_Entries_By_TBL_NAME_MULTI")?e("div",{class:"loading-container"},e("ir-spinner",null)):e(r,null,e("div",{class:"sheet-header"},e("div",{class:"card-header-container mb-2"},e("h3",{class:"text-left font-medium-2 px-2"},this.getCurrentPage("page_block_date")?this.defaultData.BLOCK_DATES_TITLE:this.defaultData.TITLE),e("ir-icon",{class:"px-2",onIconClickHandler:()=>{this.closeWindow()}},e("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",height:20,width:20},e("path",{fill:"currentColor",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"}))))),e("div",{class:"px-2 sheet-body"},this.getCurrentPage("page_one")&&e("igl-booking-overview-page",{wasBlockedUnit:this.wasBlockedUnit,initialRoomIds:this.initialRoomIds,defaultDaterange:this.defaultDateRange,eventType:this.defaultData.event_type,selectedRooms:this.selectedUnits,currency:this.currency,showSplitBookingOption:this.showSplitBookingOption,ratePricingMode:this.ratePricingMode,dateRangeData:this.dateRangeData,bookingData:this.defaultData,adultChildCount:this.adultChildCount,bookedByInfoData:this.bookedByInfoData,adultChildConstraints:this.adultChildConstraints,sourceOptions:this._sourceOptions,propertyId:this.propertyid}),this.getCurrentPage("page_two")&&e("igl-booking-form",{currency:this.currency,propertyId:this.propertyid,showPaymentDetails:this.showPaymentDetails,selectedGuestData:this.guestData,countries:this.countries,isLoading:this.isLoading,selectedRooms:this.selectedUnits,bedPreferenceType:this.bedPreferenceType,dateRangeData:this.dateRangeData,bookingData:this.defaultData,showSplitBookingOption:this.showSplitBookingOption,language:this.language,bookedByInfoData:this.bookedByInfoData,defaultGuestData:this.defaultData,isEditOrAddRoomEvent:this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM"),onDataUpdateEvent:t=>this.handlePageTwoDataUpdateEvent(t)}),this.getCurrentPage("page_block_date")?this.getPageBlockDatesView():null),this.getCurrentPage("page_block_date")?e("div",{class:"sheet-footer"},e("ir-button",{text:b.entries.Lcz_Cancel,btn_color:"secondary",class:"flex-fill",onClick:()=>this.closeWindow()}),e("ir-button",{text:b.entries.Lcz_Blockdates,isLoading:S("/Block_Exposed_Unit"),class:"flex-fill",onClick:()=>this.handleBlockDate()})):e("igl-book-property-footer",{page:this.page,dateRangeData:this.dateRangeData,isEditOrAddRoomEvent:this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM"),isLoading:this.isLoading,class:"sheet-footer",eventType:this.bookingData.event_type}))))}};lt.style=at+ot;const ct=".sc-igl-book-property-footer-h{width:100% !important;background:#000}";const ht=ct;const dt=class{constructor(e){t(this,e);this.buttonClicked=s(this,"buttonClicked",7);this.disabled=true}isEventType(t){return t===this.eventType}editNext(t){if(this.isEventType("EDIT_BOOKING")){if(t==="Cancel"){return"flex-fill"}else{return"d-none d-md-block  flex-fill"}}return"flex-fill"}renderButton({label:t,type:i,disabled:s,icon_name:r,isLoading:a,icon_position:n="right"}){return e("div",{class:this.shouldRenderTwoButtons()?` ${this.editNext(t)}`:"flex-fill"},e("ir-button",{isLoading:a,btn_color:i==="cancel"||i==="back"?"secondary":"primary",text:t,btn_disabled:s,onClickHandler:()=>{this.buttonClicked.emit({key:i})},class:"full-width",btn_styles:"justify-content-center",icon_name:r,iconPosition:n,style:{"--icon-size":"1rem"},icon_style:{paddingBottom:"1.9px"}}))}shouldRenderTwoButtons(){return this.isEventType("PLUS_BOOKING")||this.isEventType("ADD_ROOM")||this.isEventType("EDIT_BOOKING")}render(){var t;if(this.page==="page_one"){return e(i,null,this.isEventType("EDIT_BOOKING")?e(r,null,this.renderButton({type:"cancel",label:b.entries.Lcz_Cancel}),this.shouldRenderTwoButtons()&&this.renderButton({type:"next",label:`${b.entries.Lcz_Next}`,disabled:S("/Get_Exposed_Booking_Availability"),icon_name:"angles_right"})):e(r,null,this.renderButton({type:"cancel",label:b.entries.Lcz_Cancel}),this.shouldRenderTwoButtons()&&this.renderButton({type:"next",label:`${b.entries.Lcz_Next}`,icon_name:"angles_right"})))}const s=g.checkin_enabled&&E(new Date((t=this.dateRangeData)===null||t===void 0?void 0:t.fromDate)).isSame(new Date,"day");return e(r,null,this.isEditOrAddRoomEvent?e(r,null,this.renderButton({type:"back",icon_position:"left",label:b.entries.Lcz_Back,icon_name:"angles_left"}),this.renderButton({type:"save",label:b.entries.Lcz_Save,isLoading:this.isLoading==="save"})):e(r,null,this.renderButton({type:"back",icon_position:"left",label:b.entries.Lcz_Back,icon_name:"angles_left"}),this.renderButton({type:"book",label:b.entries.Lcz_Book,isLoading:this.isLoading==="book"}),s&&this.renderButton({type:"bookAndCheckIn",label:b.entries.Lcz_BookAndChekcIn,isLoading:this.isLoading==="bookAndCheckIn"})))}};dt.style=ht;const ut=".sc-igl-book-property-header-h{display:block}.sourceContainer.sc-igl-book-property-header{max-width:350px}.message-label.sc-igl-book-property-header{font-size:80%}";const pt=ut;const ft=class{constructor(e){t(this,e);this.splitBookingDropDownChange=s(this,"splitBookingDropDownChange",7);this.sourceDropDownChange=s(this,"sourceDropDownChange",7);this.adultChild=s(this,"adultChild",7);this.checkClicked=s(this,"checkClicked",7);this.buttonClicked=s(this,"buttonClicked",7);this.toast=s(this,"toast",7);this.spiltBookingSelected=s(this,"spiltBookingSelected",7);this.animateIrButton=s(this,"animateIrButton",7);this.animateIrSelect=s(this,"animateIrSelect",7);this.splitBookingId="";this.bookingData="";this.sourceOptions=[];this.showSplitBookingOption=false;this.sourceOption={code:"",description:"",tag:"",id:"",type:""}}getSplitBookingList(){return e("fieldset",{class:"d-flex flex-column text-left mb-1  flex-lg-row align-items-lg-center"},e("label",{class:"mr-lg-1"},b.entries.Lcz_Tobooking,"# "),e("div",{class:"btn-group mt-1 mt-lg-0 sourceContainer"},e("ir-autocomplete",{value:Object.keys(this.bookedByInfoData).length>1?`${this.bookedByInfoData.bookingNumber} ${this.bookedByInfoData.firstName} ${this.bookedByInfoData.lastName}`:"",from_date:E(this.bookingDataDefaultDateRange.fromDate).format("YYYY-MM-DD"),to_date:E(this.bookingDataDefaultDateRange.toDate).format("YYYY-MM-DD"),propertyId:this.propertyId,placeholder:b.entries.Lcz_BookingNumber,onComboboxValue:t=>{t.stopImmediatePropagation();this.spiltBookingSelected.emit(t.detail)},isSplitBooking:true})))}getSourceNode(){return e("fieldset",{class:"d-flex text-left  align-items-center"},e("label",{class:"mr-1"},b.entries.Lcz_Source," "),e("div",{class:"btn-group mt-0 flex-fill sourceContainer"},e("select",{class:"form-control input-sm",id:"xSmallSelect",onChange:t=>this.sourceDropDownChange.emit(t.target.value)},this.sourceOptions.map((t=>{if(t.type==="LABEL"){return e("optgroup",{label:t.value})}return e("option",{value:t.id,selected:this.sourceOption.code===t.id},t.value)})))))}handleAdultChildChange(t,e){var i,s;let r={};if(e===""){r=Object.assign(Object.assign({},this.adultChildCount),{[t]:0})}else{r=Object.assign(Object.assign({},this.adultChildCount),{[t]:e})}o("bookingAvailabilityParams",{from_date:this.bookingDataDefaultDateRange.fromDate,to_date:this.bookingDataDefaultDateRange.toDate,adult_nbr:(i=r===null||r===void 0?void 0:r["adult"])!==null&&i!==void 0?i:0,child_nbr:(s=r===null||r===void 0?void 0:r["child"])!==null&&s!==void 0?s:0});this.adultChild.emit(r)}getAdultChildConstraints(){var t,i,s,r;return e("div",{class:"mt-1 mt-lg-0 d-flex flex-column text-left"},e("div",{class:"form-group  my-lg-0 text-left d-flex align-items-center justify-content-between justify-content-sm-start"},e("fieldset",null,e("div",{class:"btn-group ml-0"},e("ir-select",{testId:"adult_number",class:"m-0",selectedValue:(i=(t=this.adultChildCount)===null||t===void 0?void 0:t.adult)===null||i===void 0?void 0:i.toString(),onSelectChange:t=>this.handleAdultChildChange("adult",t.detail),selectId:"adult_select",firstOption:b.entries.Lcz_AdultsCaption,data:Array.from(Array(this.adultChildConstraints.adult_max_nbr),((t,e)=>e+1)).map((t=>({text:t.toString(),value:t.toString()})))}))),this.adultChildConstraints.child_max_nbr>0&&e("fieldset",null,e("div",{class:"btn-group ml-1 p-0"},e("ir-select",{selectedValue:(r=(s=this.adultChildCount)===null||s===void 0?void 0:s.child)===null||r===void 0?void 0:r.toString(),testId:"child_number",onSelectChange:t=>this.handleAdultChildChange("child",t.detail),selectId:"child_select",firstOption:this.renderChildCaption(),data:Array.from(Array(this.adultChildConstraints.child_max_nbr),((t,e)=>e+1)).map((t=>({text:t.toString(),value:t.toString()})))}))),e("ir-button",{btn_id:"check_availability",isLoading:S("/Check_Availability"),size:"sm",class:"ml-2",text:b.entries.Lcz_Check,onClickHandler:()=>this.handleButtonClicked()})))}renderChildCaption(){const t=this.adultChildConstraints.child_max_age;let e=b.entries.Lcz_Years;if(t===1){e=b.entries.Lcz_Year}return`${b.entries.Lcz_ChildCaption} 0 - ${this.adultChildConstraints.child_max_age} ${e}`}handleButtonClicked(){if(this.isEventType("SPLIT_BOOKING")&&Object.keys(this.bookedByInfoData).length<=1){this.toast.emit({type:"error",title:b.entries.Lcz_ChooseBookingNumber,description:"",position:"top-right"})}else if(this.isEventType("ADD_ROOM")||this.isEventType("SPLIT_BOOKING")){const t=E(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date));const e=E(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date));const i=E(new Date(this.dateRangeData.fromDate));const s=E(new Date(this.dateRangeData.toDate));if(s.isBefore(e)||i.isAfter(t)){this.toast.emit({type:"error",title:`${b.entries.Lcz_CheckInDateShouldBeMAx.replace("%1",E(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date)).format("ddd, DD MMM YYYY")).replace("%2",E(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date)).format("ddd, DD MMM YYYY"))}  `,description:"",position:"top-right"});return}else if(this.adultChildCount.adult===0){this.toast.emit({type:"error",title:b.entries.Lcz_PlzSelectNumberOfGuests,description:"",position:"top-right"});this.animateIrSelect.emit("adult_child_select")}else{this.buttonClicked.emit({key:"check"})}}else if(this.minDate&&new Date(this.dateRangeData.fromDate).getTime()>new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date).getTime()){this.toast.emit({type:"error",title:`${b.entries.Lcz_CheckInDateShouldBeMAx.replace("%1",E(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date)).format("ddd, DD MMM YYYY")).replace("%2",E(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date)).format("ddd, DD MMM YYYY"))}  `,description:"",position:"top-right"})}else if(this.adultChildCount.adult===0){this.animateIrSelect.emit("adult_child_select");this.toast.emit({type:"error",title:b.entries.Lcz_PlzSelectNumberOfGuests,description:"",position:"top-right"})}else{this.buttonClicked.emit({key:"check"})}}isEventType(t){return this.bookingData.event_type===t}getMinDate(){var t;if(this.isEventType("PLUS_BOOKING")){return E().add(-1,"months").startOf("month").format("YYYY-MM-DD")}if(this.wasBlockedUnit){return(t=this.bookingData)===null||t===void 0?void 0:t.block_exposed_unit_props.from_date}return this.minDate}getMaxDate(){var t,e;if(!((t=this.bookingData)===null||t===void 0?void 0:t.block_exposed_unit_props)){return undefined}return(e=this.bookingData)===null||e===void 0?void 0:e.block_exposed_unit_props.to_date}render(){const t=this.showSplitBookingOption?this.getSplitBookingList():this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")?false:true;return e(i,{key:"64aec62e31e4b302a6f8758f5d73e5f64c11fd8e"},this.isEventType("SPLIT_BOOKING")&&this.getSplitBookingList(),t&&this.getSourceNode(),e("div",{key:"1836a74c2a7e6fc96d47c77eac74bab630ed3214",class:`d-flex flex-column flex-lg-row align-items-lg-center ${t?"mt-1":""}`},e("fieldset",{key:"2216950da07e1ef324cc439b134f529638529029",class:"mt-lg-0 mr-1 "},e("igl-date-range",{key:"d2329c21758e8f28839ad8e822fba6b8eafc2693","data-testid":"date_picker",variant:"booking",dateLabel:b.entries.Lcz_Dates,maxDate:this.getMaxDate(),minDate:this.getMinDate(),disabled:this.isEventType("BAR_BOOKING")&&!this.wasBlockedUnit||this.isEventType("SPLIT_BOOKING"),defaultData:this.bookingDataDefaultDateRange})),!this.isEventType("EDIT_BOOKING")&&this.getAdultChildConstraints()),e("p",{key:"8427bca07bdf81b9e060684bd54f59659a1eb91f",class:"text-right mt-1 message-label"},g.tax_statement))}};ft.style=pt;const bt=".sc-igl-booking-form-h{display:flex;flex-direction:column}";const mt=bt;const gt=class{constructor(e){t(this,e);this.dataUpdateEvent=s(this,"dataUpdateEvent",7);this.buttonClicked=s(this,"buttonClicked",7);this.selectedUnits={}}componentWillLoad(){this.initializeGuestData();this.selectedBookedByData=this.bookedByInfoData}initializeGuestData(){let t=0;const e=Object.assign({},this.selectedUnits);const i=(t,e,i,s)=>{if(i&&s===2){return t*e}return t};this.selectedUnits=e;this.guestData=[];this.selectedRooms.forEach(((s,r)=>{s.forEach((s=>{e[r]=s.selectedUnits;t+=s.totalRooms*i(s.rate,this.dateRangeData.dateDifference,s.isRateModified,s.rateType);for(let t=1;t<=s.totalRooms;t++){this.guestData.push(Object.assign({guestName:"",roomId:"",preference:""},s))}}))}));this.bookingData.TOTAL_PRICE=t}handleOnApplicationInfoDataUpdateEvent(t,e){const i=t.detail;const s=`c_${i.data.roomCategoryId}`;const r=[...this.selectedUnits[s]||[]];r[e]=i.data.roomId;this.selectedUnits=Object.assign(Object.assign({},this.selectedUnits),{[s]:r});this.dataUpdateEvent.emit({key:"applicationInfoUpdateEvent",value:t.detail})}handleEventData(t,e,i){if(e==="application-info"){this.handleOnApplicationInfoDataUpdateEvent(t,i)}else{this.selectedBookedByData=t.detail.data;this.dataUpdateEvent.emit({key:"propertyBookedBy",value:t.detail})}}isGuestDataIncomplete(){if(this.selectedGuestData.length!==this.guestData.length){return true}for(const t of this.selectedGuestData){if(t.guestName===""||t.preference===""||t.roomId===""){return true}}return false}isButtonDisabled(t){const e=(t,e,i)=>{if(!t){return true}if(t===this.selectedGuestData){return this.isGuestDataIncomplete()}if(e==="selectedArrivalTime"){if(t[e]!==undefined){return t[e].code===""}else{return true}}return t[e]===i||t[e]===undefined};return this.isLoading===t||e(this.selectedGuestData,"guestName","")||e(this.selectedBookedByData,"isdCode","")||e(this.selectedBookedByData,"contactNumber","")||e(this.selectedBookedByData,"firstName","")||e(this.selectedBookedByData,"lastName","")||e(this.selectedBookedByData,"countryId",-1)||e(this.selectedBookedByData,"selectedArrivalTime","")||e(this.selectedBookedByData,"email","")}render(){return e("div",{key:"e326420f127c97d2032604c58aa6ff1c4777ff8f",class:"d-flex flex-column h-100"},e("div",{key:"feef108a586c2f94a67cbb26c41b9a563c325fed",class:"d-flex flex-wrap"},e("ir-date-view",{key:"74d2ea0068da7b04c35896a4d69438287ebe0fbb",class:"mr-1 flex-fill font-weight-bold font-medium-1",from_date:new Date(this.dateRangeData.fromDate),to_date:new Date(this.dateRangeData.toDate),dateOption:"DD MMM YYYY"}),this.guestData.length>1&&e("div",{key:"1d57c3f8e4e3dc3e8341af35dca172622989022d",class:"mt-1 mt-md-0 text-right"},b.entries.Lcz_TotalPrice," ",e("span",{key:"df4cbcc51fefec735c0f9bee50b69793aeb88952",class:"font-weight-bold font-medium-1"},v(this.currency.symbol,this.bookingData.TOTAL_PRICE||"0")))),Object.values(n.ratePlanSelections).map((t=>Object.values(t).map((t=>{const i=t;if(i.reserved===0){return null}return[...new Array(i.reserved)].map(((t,s)=>e("igl-application-info",{totalNights:Number(this.dateRangeData.dateDifference),bedPreferenceType:this.bedPreferenceType,currency:this.currency,guestInfo:i.guest?i.guest[s]:null,bookingType:this.bookingData.event_type,rateplanSelection:i,key:`${i.ratePlan.id}_${s}`,roomIndex:s,baseData:this.bookingData.event_type==="EDIT_BOOKING"?{roomtypeId:this.bookingData.currentRoomType.roomtype.id,unit:this.bookingData.currentRoomType.unit}:undefined})))})))),this.isEditOrAddRoomEvent||this.showSplitBookingOption?null:e("igl-property-booked-by",{propertyId:this.propertyId,countries:this.countries,language:this.language,showPaymentDetails:this.showPaymentDetails,defaultData:this.bookedByInfoData,onDataUpdateEvent:t=>{this.handleEventData(t,"propertyBookedBy",0)}}))}};gt.style=mt;const vt=".sc-igl-booking-overview-page-h{display:block}.sc-igl-booking-overview-page-h>*.sc-igl-booking-overview-page{margin:0;padding:auto}.scrollContent.sc-igl-booking-overview-page{height:calc(100% - 79px);overflow:auto;position:relative}.loading-container.sc-igl-booking-overview-page{display:flex;align-items:center;justify-content:center;height:100%;background:white;position:absolute;inset:0;z-index:100}.loader.sc-igl-booking-overview-page{width:1.25rem;height:1.25rem;border:2.5px solid #3f3f3f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}";const yt=vt;const kt=class{constructor(e){t(this,e);this.roomsDataUpdate=s(this,"roomsDataUpdate",7)}getSplitBookings(){return this.bookingData.hasOwnProperty("splitBookingEvents")&&this.bookingData.splitBookingEvents||[]}isEventType(t){return t===this.eventType}setMinDate(){if(!this.isEventType("EDIT_BOOKING")){return}const t=E(this.bookingData.FROM_DATE,"YYYY-MM-DD");const e=E();if(t.isAfter(e)){return e.add(-2,"weeks").format("YYYY-MM-DD")}return t.add(-2,"weeks").format("YYYY-MM-DD")}render(){var t;return e(i,{key:"faf7b0fc05351cf3d063857d8fcb5ca7a8bc4af7"},e("igl-book-property-header",{key:"d54c5b1502b528eb63b9dc6c61a6e35ac3e76924",wasBlockedUnit:this.wasBlockedUnit,bookedByInfoData:this.bookedByInfoData,defaultDaterange:this.defaultDaterange,dateRangeData:this.dateRangeData,minDate:this.setMinDate(),adultChildCount:this.adultChildCount,splitBookingId:this.showSplitBookingOption,bookingData:this.bookingData,sourceOptions:this.sourceOptions,message:this.message,bookingDataDefaultDateRange:this.bookingData.defaultDateRange,showSplitBookingOption:this.showSplitBookingOption,adultChildConstraints:this.adultChildConstraints,splitBookings:this.getSplitBookings(),propertyId:this.propertyId}),e("div",{key:"610d2268e8b252dfab4b18a9c660dfe945fcc00e",class:" text-left"},S("/Check_Availability")&&this.isEventType("EDIT_BOOKING")?e("div",{class:"loading-container"},e("div",{class:"loader"})):e(r,null,(t=n.roomTypes)===null||t===void 0?void 0:t.map((t=>e("igl-room-type",{initialRoomIds:this.initialRoomIds,isBookDisabled:Object.keys(this.bookedByInfoData).length<=1,key:`room-type-${t.id}`,currency:this.currency,ratePricingMode:this.ratePricingMode,dateDifference:this.dateRangeData.dateDifference,bookingType:this.bookingData.event_type,roomType:t,class:"mt-2 mb-1 p-0","data-testid":`room_type_${t.id}`,id:t.id.toString(),roomInfoId:this.selectedRooms.has(`c_${t.id}`)?t.id:null,onDataUpdateEvent:t=>this.roomsDataUpdate.emit(t.detail)}))))))}};kt.style=yt;const xt=".sc-igl-date-range-h{display:flex;align-items:center !important;font-size:14px !important}.date-range-input.sc-igl-date-range{margin:0;padding:0;display:flex;flex:1;cursor:pointer;width:100%;user-select:none;font-size:14px !important}.iglRangeNights.sc-igl-date-range{margin:0;padding:0}.date-view.sc-igl-date-range{position:absolute;background:white;pointer-events:none;cursor:pointer;display:block;margin-left:14px;margin-right:14px;font-size:13.65px !important;display:flex;align-items:center;inset:0}.date-view.sc-igl-date-range svg.sc-igl-date-range{padding:0 !important;margin:0;margin-right:10px}.calendarPickerContainer.sc-igl-date-range{display:flex !important;position:relative !important;text-align:left;align-items:center !important;padding:0 !important;margin:0;border:1px solid var(--ir-date-range-border, #379ff2);width:var(--ir-date-range-width, 245px);transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.calendarPickerContainer.sc-igl-date-range:focus-within{border-color:#379ff2}.calendarPickerContainer[data-state='disabled'].sc-igl-date-range{border:0px;width:280px}.date-view[data-state='disabled'].sc-igl-date-range,.date-range-input[data-state='disabled'].sc-igl-date-range{margin:0;cursor:default}.date-range-container-cn.sc-igl-date-range{position:relative;width:fit-content}.date-range-container-cn.sc-igl-date-range:focus-within .date-range-container.sc-igl-date-range{border:1px solid #379ff2}.date-range-container.sc-igl-date-range{position:relative;gap:1rem;font-size:0.975rem;line-height:1.45;border-radius:0.21rem;border:1px solid #cacfe7;color:#3b4781;padding:0.75rem 1rem;box-sizing:border-box !important;font-weight:400;background-color:#fff;background-clip:padding-box;height:2rem;pointer-events:none;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.date-range-container-cn.sc-igl-date-range .date-range-input.sc-igl-date-range{position:absolute;width:100% !important;inset:0;cursor:pointer}.date-range-container.disabled.sc-igl-date-range{border:none;padding-left:0;padding-right:0}.date-range-input[data-state='disabled'].sc-igl-date-range{cursor:default}";const wt=xt;const _t=class{constructor(e){t(this,e);this.dateSelectEvent=s(this,"dateSelectEvent",7);this.toast=s(this,"toast",7);this.disabled=false;this.withDateDifference=true;this.variant="default";this.renderAgain=false;this.totalNights=0;this.fromDateStr="from";this.toDateStr="to"}componentWillLoad(){this.initializeDates()}handleDataChange(t,e){if(JSON.stringify(t)!==JSON.stringify(e)){this.initializeDates()}}initializeDates(){let t=new Date;t.setHours(0,0,0,0);t.setDate(t.getDate()+1);if(this.defaultData){if(this.defaultData.fromDate){this.fromDate=new Date(this.defaultData.fromDate);this.fromDate.setHours(0,0,0,0);this.fromDateStr=this.getFormattedDateString(this.fromDate)}if(this.defaultData.toDate){this.toDate=new Date(this.defaultData.toDate);this.toDate.setHours(0,0,0,0);this.toDateStr=this.getFormattedDateString(this.toDate)}}if(this.fromDate&&this.toDate){this.calculateTotalNights()}return[this.fromDateStr,this.toDateStr]}calculateTotalNights(){this.totalNights=_(E(this.fromDate).format("YYYY-MM-DD"),E(this.toDate).format("YYYY-MM-DD"))}getFormattedDateString(t){return t.getDate()+" "+t.toLocaleString("default",{month:"short"}).toLowerCase()+" "+t.getFullYear()}handleDateSelectEvent(t,e=""){this.dateSelectEvent.emit({key:t,data:e})}handleDateChange(t){const{start:e,end:i}=t.detail;this.fromDate=e.toDate();this.toDate=i.toDate();this.calculateTotalNights();this.handleDateSelectEvent("selectedDateRange",{fromDate:this.fromDate.getTime(),toDate:this.toDate.getTime(),fromDateStr:e.format("DD MMM YYYY"),toDateStr:i.format("DD MMM YYYY"),dateDifference:this.totalNights});this.renderAgain=!this.renderAgain}render(){if(this.variant==="booking"){return e("div",{class:`p-0 m-0 date-range-container-cn`},e("ir-date-range",{maxDate:this.maxDate,class:"date-range-input",disabled:this.disabled,fromDate:this.fromDate,toDate:this.toDate,minDate:this.minDate,autoApply:true,"data-state":this.disabled?"disabled":"active",onDateChanged:t=>{this.handleDateChange(t)}}),e("div",{class:`d-flex align-items-center m-0  date-range-container ${this.disabled?"disabled":""}`},e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"m-0 p-0",height:"14",width:"14",viewBox:"0 0 448 512"},e("path",{fill:"currentColor",d:"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z"})),e("span",null,E(this.fromDate).format("MMM DD, YYYY")),e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"m-0 p-0",height:"14",width:"14",viewBox:"0 0 512 512"},e("path",{fill:"currentColor",d:"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z"})),e("span",null,E(this.toDate).format("MMM DD, YYYY")),this.totalNights&&e("span",{class:"m-0 p-0"},this.totalNights+(this.totalNights>1?` ${b.entries.Lcz_Nights}`:` ${b.entries.Lcz_Night}`))))}return e(i,null,e("div",{class:`p-0 m-0 date-range-container-cn`},e("ir-date-range",{maxDate:this.maxDate,class:"date-range-input",disabled:this.disabled,fromDate:this.fromDate,toDate:this.toDate,minDate:this.minDate,autoApply:true,"data-state":this.disabled?"disabled":"active",onDateChanged:t=>{this.handleDateChange(t)}}),e("div",{class:`d-flex align-items-center m-0  date-range-container ${this.disabled?"disabled":""}`},e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"m-0 p-0",height:"14",width:"14",viewBox:"0 0 448 512"},e("path",{fill:"currentColor",d:"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z"})),e("span",null,E(this.fromDate).format("MMM DD, YYYY")),e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"m-0 p-0",height:"14",width:"14",viewBox:"0 0 512 512"},e("path",{fill:"currentColor",d:"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z"})),e("span",null,E(this.toDate).format("MMM DD, YYYY")))))}static get watchers(){return{defaultData:["handleDataChange"]}}};_t.style=wt;const Dt=".sc-igl-property-booked-by-h{display:block}.bookedByEmailContainer.sc-igl-property-booked-by{flex:auto;max-width:350px}.bookedDetailsForm.sc-igl-property-booked-by label.sc-igl-property-booked-by{min-width:125px;max-width:125px}.row.sc-igl-booking-form.sc-igl-property-booked-by{padding:0 !important}.bookedDetailsForm.sc-igl-property-booked-by .form-group.sc-igl-property-booked-by{margin-bottom:10px !important}.bookedDetailsForm.sc-igl-property-booked-by .checkBoxContainer.sc-igl-property-booked-by input.sc-igl-property-booked-by{height:1.2rem !important;width:30px}.controlContainer.sc-igl-property-booked-by textarea.sc-igl-property-booked-by{height:60px !important}.margin3.sc-igl-property-booked-by{margin-bottom:5px !important}@media (min-width: 768px){.bookedByEmailContainer.sc-igl-property-booked-by{margin-left:37px}}";const Ct=Dt;const Ot=class{constructor(e){t(this,e);this.dataUpdateEvent=s(this,"dataUpdateEvent",7);this.showPaymentDetails=false;this.countries=[];this.isButtonPressed=false;this.bookingService=new l;this.arrivalTimeList=[];this.expiryMonths=["01","02","03","04","05","06","07","08","09","10","11","12"];this.expiryYears=[];this.currentMonth="01";this.bookedByData={id:undefined,email:"",firstName:"",lastName:"",countryId:"",isdCode:"",contactNumber:"",selectedArrivalTime:"",emailGuest:false,message:"",cardNumber:"",cardHolderName:"",expiryMonth:"",expiryYear:""}}async componentWillLoad(){this.assignCountryCode();this.initializeExpiryYears();this.initializeDateData();this.populateBookedByData()}initializeExpiryYears(){const t=(new Date).getFullYear();this.expiryYears=Array.from({length:4},((e,i)=>(t+i).toString()))}async assignCountryCode(){const t=await this.bookingService.getUserDefaultCountry();const e=t["COUNTRY_ID"];this.country=e;this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{isdCode:e.toString(),countryId:e})}initializeDateData(){const t=new Date;const e=t.getMonth()+1;this.currentMonth=e<10?`0${e}`:e.toString()}populateBookedByData(){var t;this.bookedByData=this.defaultData?Object.assign(Object.assign({},this.bookedByData),this.defaultData):{};this.arrivalTimeList=((t=this.defaultData)===null||t===void 0?void 0:t.arrivalTime)||[];this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{selectedArrivalTime:this.arrivalTimeList[0].CODE_NAME});if(!this.bookedByData.expiryMonth){this.bookedByData.expiryMonth=this.currentMonth}if(!this.bookedByData.expiryYear){this.bookedByData.expiryYear=(new Date).getFullYear()}console.log("initial bookedby data",this.bookedByData)}handleDataChange(t,e){this.bookedByData[t]=t==="emailGuest"?e.target.checked:e.target.value;this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)});if(t==="countryId"){this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{isdCode:e.target.value})}}handleCountryChange(t){this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{isdCode:t,countryId:t});this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)})}handleNumberInput(t,e){const i=e.target;const s=i.value;const r=/^[0-9]+$/;if(!r.test(s)){i.value=s.replace(/[^0-9]/g,"")}if(s===i.value){this.handleDataChange(t,e)}}async checkUser(){var t;try{const e=this.bookedByData.email;if(T.string().email().safeParse(e).success){const i=await this.bookingService.getUserInfo(e);if(i!==null){this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:i.id,firstName:i.first_name,lastName:i.last_name,contactNumber:i.mobile_without_prefix,countryId:i.country_id,isdCode:(t=i===null||i===void 0?void 0:i.country_phone_prefix)!==null&&t!==void 0?t:i.isdCode.toString()});console.log(this.bookedByData)}else{let t=Object.assign({},this.bookedByData);t=Object.assign(Object.assign({},t),{email:e});this.bookedByData=Object.assign({},t)}}else{let t=Object.assign({},this.bookedByData);t=Object.assign(Object.assign({},t),{email:""});this.bookedByData=Object.assign({},t)}this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)})}catch(t){}}updateGuest(t){var e;o("checkout_guest",Object.assign(Object.assign({},(e=n.checkout_guest)!==null&&e!==void 0?e:{}),t))}handleComboboxChange(t){var e;t.stopImmediatePropagation();t.stopPropagation();const{key:i,data:s}=t.detail;console.log(i,s);if(i==="blur"){if(T.string().email().safeParse(s).success){this.bookedByData.email=s;this.checkUser()}else if(this.bookedByData.email!==""&&s==""){this.bookedByData.email=""}this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:this.bookedByData})}if(i==="select"){this.bookedByData.email=s.email;this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:s.id,firstName:s.first_name,lastName:s.last_name,contactNumber:s.mobile_without_prefix,countryId:s.country_id,isdCode:(e=s["country_phone_prefix"])!==null&&e!==void 0?e:s===null||s===void 0?void 0:s.country_id});this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:this.bookedByData})}}clearEvent(){this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:"",firstName:"",lastName:"",contactNumber:"",isdCode:this.country.toString(),countryId:this.country});this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)})}handleButtonClicked(t){switch(t.detail.key){case"book":case"bookAndCheckIn":this.isButtonPressed=true;break}}render(){return e(i,{key:"b5b7736fc94f860ae5c2f5185f31cfc568b0b92a"},e("div",{key:"0fc400f16357db3051e9471575e4f9a36da3ad6e",class:"text-left mt-3"},e("div",{key:"5561db1a461cea1048dd0cbbdbc7b382a02a1ade",class:"form-group d-flex flex-column flex-md-row align-items-md-center text-left "},e("label",{key:"b7511da3d7b405e2cffea96274030f22f651354c",class:"p-0 m-0 label-control mr-1 font-weight-bold"},b.entries.Lcz_BookedBy),e("div",{key:"9f06326dd8e57a3a9cd8fe02f8711ac7cf3a7a34",class:"bookedByEmailContainer mt-1 mt-md-0 d-flex align-items-center"},e("ir-autocomplete",{key:"7683cfbbc67f80d990d4f53fcf7ef3f367a18099",testId:"main_guest_email",onComboboxValue:this.handleComboboxChange.bind(this),propertyId:this.propertyId,type:"text",value:this.bookedByData.email,required:true,class:"flex-fill",placeholder:b.entries.Lcz_FindEmailAddress,onInputCleared:()=>this.clearEvent(),danger_border:this.isButtonPressed&&this.bookedByData.email!==""&&D(this.bookedByData.email)}),e("ir-tooltip",{key:"5964b722534fa189ed0df7cf1ac07ad12f428c0f",class:"ml-1",message:"Leave empty if email is unavailable"})))),e("div",{key:"df40aad9f1842832a96ee04d3cec324c7b884a60",class:"bookedDetailsForm text-left mt-2 font-small-3 "},e("div",{key:"c3946cfff144255888f7ecf796a2d7ef04db117a",class:"d-flex flex-column flex-md-row  justify-content-md-between "},e("div",{key:"220bb5daf47d70610aab6b759c43d1131c8065d5",class:"p-0 flex-fill "},e("div",{key:"afd53ff35a9942a29a4e6579829059a096b684b3",class:"form-group d-flex flex-column flex-md-row align-items-md-center p-0 flex-fill "},e("label",{key:"9636c58cec0fa8de1869432ca509229ed86231e4",class:"p-0 m-0 margin3"},b.entries.Lcz_FirstName),e("div",{key:"8082d9978257ce472449e8e356092aa55b3b62b3",class:"p-0 m-0  controlContainer flex-fill  "},e("input",{key:"3fd17bffa74d0aae72ea3fe3a7cf641b941c7c6a","data-testid":"main_guest_first_name",class:`form-control flex-fill ${this.isButtonPressed&&this.bookedByData.firstName===""&&"border-danger"}`,type:"text",placeholder:b.entries.Lcz_FirstName,id:M(),value:this.bookedByData.firstName,onInput:t=>{this.updateGuest({first_name:t.target.value});this.handleDataChange("firstName",t)},required:true}))),e("div",{key:"23f2df5ad103ed620a8fc046aeddb6bff2d2ed9e",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{key:"8d1ee8b097452ce7c34087375f79c6a2420c6c05",class:"p-0 m-0 margin3"},b.entries.Lcz_LastName),e("div",{key:"cda67e023e874c94f225f28fbbfa839b032055ff",class:"p-0 m-0  controlContainer flex-fill"},e("input",{key:"4446f6c5e7d35d795ee7f4f293a769135b0b0129","data-testid":"main_guest_last_name",class:`form-control ${this.isButtonPressed&&this.bookedByData.lastName===""&&"border-danger"}`,type:"text",placeholder:b.entries.Lcz_LastName,id:M(),value:this.bookedByData.lastName,onInput:t=>this.handleDataChange("lastName",t)}))),e("div",{key:"74ed5278aed14e42d658680c3abcabd0539c5dd8",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{key:"95ef5c0076523287b5562d3779978ab478511f1f",class:"p-0 m-0 margin3"},b.entries.Lcz_Country),e("ir-country-picker",{key:"0b9c9701abcf8e6dbe7a15718b05ea4df96329f8",testId:"main_guest_country",class:"flex-grow-1 m-0",onCountryChange:t=>this.handleCountryChange(t.detail.id),countries:this.countries,country:this.countries.find((t=>t.id===this.bookedByData.countryId))})),e("div",{key:"b83d1adcb255d8e5b5bccc1504f6b7eabe64d859",class:"form-group p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{key:"cbb2f726d10fb8cd40dc3475adc1ffa49d620063",class:"p-0 m-0 margin3"},b.entries.Lcz_MobilePhone),e("div",{key:"a93624d6ae5a470370cd10afa0989cd2c1fa91ea",class:"p-0 m-0 controlContainer flex-fill"},e("ir-phone-input",{key:"2585d551a7076407b3cd1934994e79c877dab33a",testId:"main_guest_phone",language:this.language,value:this.bookedByData.contactNumber,phone_prefix:this.bookedByData.isdCode,default_country:this.bookedByData.countryId,onTextChange:t=>{this.handleDataChange("isdCode",{target:{value:t.detail.phone_prefix}});this.handleDataChange("contactNumber",{target:{value:t.detail.mobile}})}}))),e("div",{key:"084399e36f27c540febfdff0149cbe3e25237c70",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{key:"04ee23f20424d84229205b35bc83c83c7bf74c6a",class:"p-0 m-0 margin3"},b.entries.Lcz_YourArrivalTime),e("div",{key:"9c5dc5e4d8d283e423fd8ac1380d32ea12b44e4b",class:"p-0 m-0  controlContainer flex-fill"},e("select",{key:"3b60ab3cf50e95123a1b4b9370fcbc6cacde9898","data-testid":"arrival_time",class:`form-control input-sm pr-0 ${this.isButtonPressed&&this.bookedByData.selectedArrivalTime.code===""&&"border-danger"}`,id:M(),onChange:t=>this.handleDataChange("selectedArrivalTime",t)},this.arrivalTimeList.map((t=>e("option",{value:t.CODE_NAME,selected:this.bookedByData.selectedArrivalTime.code===t.CODE_NAME},t.CODE_VALUE_EN))))))),e("div",{key:"a6b01f153007d450b6ea40f62025220bf5a605cc",class:"p-0 flex-fill  ml-md-3"},e("div",{key:"e296d4d79cd8afc6048284fb6196390e9d66c066",class:"  p-0 d-flex flex-column flex-md-row align-items-md-center "},e("label",{key:"e21a7725d6d964c12e5a00214869e20b4a64ac63",class:"p-0 m-0 margin3"},b.entries.Lcz_AnyMessageForUs),e("div",{key:"e8cac19a60e94134871a35ff41e388f6f63ecf59",class:"p-0 m-0  controlContainer flex-fill "},e("textarea",{key:"762929eb2cb4d5890b6c9090f360c3c74b6d20d3","data-testid":"note",id:M(),rows:4,class:"form-control ",name:"message",value:this.bookedByData.message,onInput:t=>this.handleDataChange("message",t)}))),this.showPaymentDetails&&e(r,{key:"57fb762b926cdddd96eb21cf173e801c71ceb029"},e("div",{key:"e82141f23ecdfe7485afa9638f2b1ecb22da9b10",class:"form-group mt-md-1  p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{key:"f9fd29dc1e2bc627446333ea4a1ae2fe30c05e0d",class:"p-0 m-0 margin3"},b.entries.Lcz_CardNumber),e("div",{key:"439ba9bafb7b6c9b3600c08ffa6d45e1a9e5a415",class:"p-0 m-0  controlContainer flex-fill"},e("input",{key:"50bc6502987b4ca51babd71640b3f569b12c200e",class:"form-control",type:"text",placeholder:"",pattern:"0-9 ",id:M(),value:this.bookedByData.cardNumber,onInput:t=>this.handleNumberInput("cardNumber",t)}))),e("div",{key:"9943d43564b351d7d9ef126bdbfc626f8a45fc46",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{key:"654993c6987fb19e1629917a3e6016f64729254b",class:"p-0 m-0 margin3"},b.entries.Lcz_CardHolderName),e("div",{key:"3de097d189ee608aa0946a4b399fffd8ccacd54c",class:"p-0 m-0  controlContainer flex-fill"},e("input",{key:"0ed59249cc1cb076ebdd026a88f0a4afe05d12da",class:"form-control",type:"text",placeholder:"",pattern:"0-9 ",id:M(),value:this.bookedByData.cardHolderName,onInput:t=>this.handleDataChange("cardHolderName",t)}))),e("div",{key:"d881e4d73591506165e746de4f53ab9ab5f1af3a",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{key:"c298cfffb9278ae5e10c25e69917fc45aa055905",class:"p-0 m-0 margin3"},b.entries.Lcz_ExpiryDate),e("div",{key:"306283ac5cd9be1b238ba983b4204e28c4e5650c",class:"p-0 m-0 row  controlContainer flex-fill"},e("div",{key:"4dfa7ea88b52a332f4ed674cf67b1607dfcee4be",class:"p-0 m-0"},e("select",{key:"4d7376291a530c6edc65b2e1a06e1559eaf510a2",class:"form-control input-sm pr-0",id:M(),onChange:t=>this.handleDataChange("expiryMonth",t)},this.expiryMonths.map((t=>e("option",{value:t,selected:t===this.bookedByData.expiryMonth},t))))),e("div",{key:"a6dee12bfe2348b249ae3ffc619904e3bedd8e92",class:"p-0 m-0 ml-1"},e("select",{key:"5e30f5f899e7c7c1dcb45dc17384a8aadb4978c9",class:"form-control input-sm pr-0",id:M(),onChange:t=>this.handleDataChange("expiryYear",t)},this.expiryYears.map(((t,i)=>e("option",{value:t,selected:i===this.bookedByData.expiryYear},t)))))))),e("div",{key:"326f3e988b846803e200eea707f17acf553db5f7",class:"form-group mt-1 p-0 d-flex flex-row align-items-center"},e("label",{key:"ff9cbc1117a57a28ba20f77d552c378cde4679af",class:"p-0 m-0",htmlFor:"emailTheGuestId"},b.entries.Lcz_EmailTheGuest),e("div",{key:"22e80a2c087ce8ab814aeb805ddbe5daf633e3b9",class:"p-0 m-0  controlContainer flex-fill checkBoxContainer"},e("input",{key:"6a8668409fb58e0f6571b5998854a28229652588",class:"form-control",type:"checkbox",checked:this.bookedByData.emailGuest,id:"emailTheGuestId",onChange:t=>this.handleDataChange("emailGuest",t)})))))))}};Ot.style=Ct;const At=".sc-igl-rate-plan-h{display:block;margin-bottom:0.5rem}.currency.sc-igl-rate-plan{display:block;position:absolute;margin:0;padding:0;height:auto;left:10px}.rate-input.sc-igl-rate-plan{font-size:14px;line-height:0;padding:0;height:0;border-left:0}.rate-input-container.sc-igl-rate-plan{display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;flex:1}.new-currency.sc-igl-rate-plan{color:#3b4781;border:1px solid #cacfe7;font-size:0.975rem;height:2rem;background:white;border-right:0;border-top-right-radius:0;border-bottom-right-radius:0;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.input-group-prepend.sc-igl-rate-plan span[data-state='focus'].sc-igl-rate-plan{border-color:var(--blue)}.input-group-prepend.sc-igl-rate-plan span[data-disabled].sc-igl-rate-plan{background-color:#eceff1;border-color:rgba(118, 118, 118, 0.3)}.non-ref-span.sc-igl-rate-plan{font-size:12px;color:var(--green)}.rateplan-name-container.sc-igl-rate-plan{margin-bottom:0.5rem !important}.rateplan-container.sc-igl-rate-plan{margin-top:0.5rem}@media only screen and (min-width: 1200px){.rateplan-name-container.sc-igl-rate-plan{width:40%;margin-top:0}.rateplan-container.sc-igl-rate-plan{width:40%}}@media only screen and (min-width: 991px){.max-w-300.sc-igl-rate-plan{max-width:200px}.rate-input-container.sc-igl-rate-plan{max-width:50px}.rateplan-name-container.sc-igl-rate-plan{margin-bottom:0 !important}}@media only screen and (min-width: 991px) and (max-width: 1300px){.rateplan-name-container.sc-igl-rate-plan{width:40%}.price-amount.sc-igl-rate-plan{max-width:150px !important}}@media only screen and (max-width: 768px){.booking-btn.sc-igl-rate-plan{width:100%}}.total-nights-container.sc-igl-rate-plan{width:max-content}.nightBorder.sc-igl-rate-plan{border-left-width:0;border-top-right-radius:3px !important;border-bottom-right-radius:3px !important}";const Bt=At;const Mt=class{constructor(e){t(this,e);this.buttonClicked=s(this,"buttonClicked",7);this.ratePricingMode=[];this.bookingType="PLUS_BOOKING";this.isBookDisabled=false}disableForm(){const{bookingType:t,shouldBeDisabled:e,ratePlan:i,visibleInventory:s}=this;if(t==="EDIT_BOOKING"&&e){return false}return!i.is_available_to_book||(s===null||s===void 0?void 0:s.visibleInventory)===0}updateRateplanSelection(t){const{roomTypeId:e,ratePlan:i}=this;const s=n.ratePlanSelections;n.ratePlanSelections=Object.assign(Object.assign({},s),{[e]:Object.assign(Object.assign({},s[e]),{[i.id]:Object.assign(Object.assign({},s[e][i.id]),t)})})}handleDataChange(t,e){const i=e.target.value;if(t==="adult_child_offering"){this.handleVariationChange(i)}else if(t==="rate"){this.updateRateplanSelection({view_mode:i})}else if(t==="totalRooms"){u({roomTypeId:this.roomTypeId,ratePlanId:this.ratePlan.id,rooms:Number(i)})}}bookProperty(){if(this.bookingType==="BAR_BOOKING"){h()}this.reserveRoom();this.buttonClicked.emit({key:"next"})}reserveRoom(){var t,e,i,s,r,a,o;u({roomTypeId:this.roomTypeId,ratePlanId:this.ratePlan.id,rooms:1,guest:[{last_name:(t=n.guest)===null||t===void 0?void 0:t.last_name,first_name:(e=n.guest)===null||e===void 0?void 0:e.first_name,unit:this.roomTypeId===((i=n.guest)===null||i===void 0?void 0:i.roomtype_id)?(s=n.guest)===null||s===void 0?void 0:s.unit:null,bed_preference:this.visibleInventory.roomtype.is_bed_configuration_enabled?(r=n.guest)===null||r===void 0?void 0:r.bed_preference:null,infant_nbr:((a=this.visibleInventory.selected_variation)===null||a===void 0?void 0:a.child_nbr)>0?(o=n.guest)===null||o===void 0?void 0:o.infant_nbr:null}]})}renderRate(){const{visibleInventory:t}=this;if(!t)return"";if(t.is_amount_modified){return t.rp_amount.toString()}const{selected_variation:e,view_mode:i}=t;const s=i==="001"?e===null||e===void 0?void 0:e.discounted_amount:e===null||e===void 0?void 0:e.amount_per_night_gross;return(s===null||s===void 0?void 0:s.toString())||""}formatVariation(t){var e,i,s,r;if(!t)return"";const a=`${t.adult_nbr} ${t.adult_nbr===1?(e=b.entries["Lcz_Adult"])===null||e===void 0?void 0:e.toLowerCase():(i=b.entries["Lcz_Adults"])===null||i===void 0?void 0:i.toLowerCase()}`;const n=t.child_nbr>0?`${t.child_nbr} ${t.child_nbr>1?(s=b.entries["Lcz_Children"])===null||s===void 0?void 0:s.toLowerCase():(r=b.entries["Lcz_Child"])===null||r===void 0?void 0:r.toLowerCase()}`:"";return n?`${a} ${n}`:a}getTooltipMessages(){var t,e,i,s,r;const{ratePlan:a,visibleInventory:n}=this;const o=n===null||n===void 0?void 0:n.selected_variation;if(!o)return;const l=(t=a.variations)===null||t===void 0?void 0:t.find((t=>this.formatVariation(t)===this.formatVariation(o)));if(!l)return;const c=(i=(e=l.applicable_policies)===null||e===void 0?void 0:e.find((t=>t.type==="cancelation")))===null||i===void 0?void 0:i.combined_statement;const h=(r=(s=l.applicable_policies)===null||s===void 0?void 0:s.find((t=>t.type==="guarantee")))===null||r===void 0?void 0:r.combined_statement;let d="";if(c){d+=`<b><u>Cancellation:</u></b> ${c}<br/>`}if(h){d+=`<b><u>Guarantee:</u></b> ${h}`}return d||undefined}async handleVariationChange(t){const{ratePlan:e,roomTypeId:i}=this;const s=e.variations||[];const r=s.find((e=>this.formatVariation(e)===t));if(!r)return;p({params:{selected_variation:r},ratePlanId:e.id,roomTypeId:i})}render(){var t,s,a;const{ratePlan:n,bookingType:o,currency:l,ratePricingMode:c,visibleInventory:d}=this;const u=n.is_available_to_book;const p=this.disableForm();const f=d===null||d===void 0?void 0:d.selected_variation;const m=(t=n.variations)===null||t===void 0?void 0:t.map((t=>this.formatVariation(t)));return e(i,{key:"06a1d30eef1b33a27e338eefac3884a75669483e","data-testid":`rp-${this.ratePlan.id}`},e("div",{key:"0e4dfecafc095d47ffac857a162aa63769555c9b",class:`d-flex mt-1  p-0 ${u?"flex-column flex-lg-row align-items-lg-center justify-content-lg-between":"align-items-center justify-content-between"}`},e("div",{key:"289b94f81f5ccfda09bd8cb94013c1a40dbfcaee","data-testid":"rp_name",class:"rateplan-name-container m-0 p-0  d-flex align-items-center",style:{gap:"0.5rem"}},o==="BAR_BOOKING"?e("p",{class:"m-0 p-0"},e("span",null,n.name.split("/")[1]," ",n.is_non_refundable&&e("span",{class:"non-ref-span"},"Non Refundable"))):e("span",null,n.short_name," ",n.is_non_refundable&&e("span",{class:"non-ref-span"},"Non Refundable")),u&&e("ir-tooltip",{key:"1aa40e019187b0e999679b041c6f8cd8818bdb7e",message:this.getTooltipMessages()})),u?e("div",{class:"d-md-flex m-md-0  justify-content-md-end align-items-md-center flex-fill rateplan-container"},e("div",{class:"flex-fill max-w-300 flex-grow-1"},e("fieldset",{class:"position-relative flex-grow-1 w-100"},e("select",{disabled:p,"data-testid":"adult-child-offering",class:"form-control input-sm flex-grow-1 w-100",id:M(),onChange:t=>this.handleDataChange("adult_child_offering",t)},m===null||m===void 0?void 0:m.map((t=>e("option",{value:t,selected:this.formatVariation(f)===t},t)))))),e("div",{class:"m-0 p-0 mt-1 mt-md-0 d-flex justify-content-between align-items-md-center ml-md-1"},e("div",{class:"d-flex m-0 p-0 rate-total-night-view mt-0 flex-grow-1"},e("ir-price-input",{testId:"amount_input",disabled:p,onTextChange:t=>this.updateRateplanSelection({is_amount_modified:true,rp_amount:Number(t.detail)}),"aria-label":`${(a=(s=this.visibleInventory)===null||s===void 0?void 0:s.roomtype)===null||a===void 0?void 0:a.name} ${this.ratePlan.short_name}'s rate`,"aria-describedby":`${this.ratePlan.short_name}'s rate`,class:"ir-br-input-none price-amount w-100 flex-grow-1",currency:l.symbol,value:this.renderRate(),placeholder:b.entries.Lcz_Rate||"Rate"}),e("fieldset",{class:"position-relative m-0 total-nights-container p-0"},e("select",{"data-testid":"nigh_stay_select",disabled:p,class:"form-control input-sm m-0 nightBorder rounded-0 py-0",id:M(),onChange:t=>this.updateRateplanSelection({view_mode:t.target.value})},c.map((t=>e("option",{value:t.CODE_NAME,selected:(d===null||d===void 0?void 0:d.view_mode)===t.CODE_NAME},t.CODE_VALUE_EN)))))),(o==="PLUS_BOOKING"||o==="ADD_ROOM")&&e("div",{class:"flex-fill mt-0 ml-1 m-0 mt-md-0 p-0"},e("fieldset",{class:"position-relative"},e("select",{"data-testid":"inventory_select",disabled:d.visibleInventory===0,class:"form-control input-sm",id:M(),onChange:t=>this.handleDataChange("totalRooms",t)},Array.from({length:(d.visibleInventory||0)+1},((t,e)=>e)).map((t=>e("option",{value:t,selected:d.reserved===t},t))))))),o==="EDIT_BOOKING"&&e(r,null,e("div",{class:"m-0 p-0 ml-md-1 mt-md-0 d-none d-md-block"},e("fieldset",{class:"position-relative"},e("input",{"data-testid":"inventory_radio",disabled:p,type:"radio",name:"ratePlanGroup",value:"1",onChange:()=>{h();this.reserveRoom()},checked:d.reserved===1}))),e("button",{"data-testid":"book_property",disabled:p,type:"button",class:"btn btn-primary booking-btn mt-lg-0 btn-sm ml-md-1 mt-1 d-md-none",onClick:()=>{h();this.reserveRoom();this.bookProperty()}},d.reserved===1?b.entries.Lcz_Current:b.entries.Lcz_Select)),(o==="BAR_BOOKING"||o==="SPLIT_BOOKING")&&e("button",{"data-testid":"book",disabled:p||o==="SPLIT_BOOKING"&&this.isBookDisabled,type:"button",class:"btn btn-primary booking-btn mt-md-0 btn-sm ml-md-1 mt-1",onClick:()=>this.bookProperty()},b.entries.Lcz_Book)):e("p",{class:"text-danger m-0 p-0"},b.entries["Lcz_NotAvailable"]||"Not available")))}};Mt.style=Bt;const Et=".sc-igl-room-type-h{display:block}.margin-bottom-8.sc-igl-room-type{margin-bottom:8px !important}";const St=Et;const It=class{constructor(e){t(this,e);this.dataUpdateEvent=s(this,"dataUpdateEvent",7);this.bookingType="PLUS_BOOKING";this.ratePricingMode=[];this.roomInfoId=null;this.selectedRooms=[];this.roomsDistributions=[];this.validBookingTypes=["PLUS_BOOKING","ADD_ROOM","EDIT_BOOKING","SPLIT_BOOKING"]}render(){var t,s;const r=this.validBookingTypes.includes(this.bookingType);return e(i,{key:"049461fe1d079f056f3ac1aaf76e0b415f45386e"},r&&((t=this.roomType.rateplans)===null||t===void 0?void 0:t.length)>0&&e("div",{key:"c45bc2cf0078464274876af9904340e7a507bb78",class:"font-weight-bold font-medium-1 margin-bottom-8 "},this.roomType.name),(s=this.roomType.rateplans)===null||s===void 0?void 0:s.map((t=>{if(!!t.variations){let i=this.roomInfoId&&this.roomInfoId===this.roomType.id;const s=f(this.roomType.id,t.id);return e("igl-rate-plan",{isBookDisabled:this.isBookDisabled,visibleInventory:s,key:`rate-plan-${t.id}`,ratePricingMode:this.ratePricingMode,class:r?"":"",currency:this.currency,ratePlan:t,roomTypeId:this.roomType.id,bookingType:this.bookingType,shouldBeDisabled:i})}return null})))}};It.style=St;const Tt=".sc-ir-autocomplete-h{display:block;position:relative}.selected.sc-ir-autocomplete{color:#fff;text-decoration:none;background-color:#666ee8}input.sc-ir-autocomplete{width:100%;position:relative;border-top-left-radius:0px !important;border-left:0 !important;border-bottom-left-radius:0px !important}label.sc-ir-autocomplete{margin:0;border-top-right-radius:0px !important;border-right:0 !important;border-bottom-right-radius:0px !important;width:fit-content;display:flex;align-items:center;padding-right:3px !important;justify-content:center;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}label[data-state='focused'].sc-ir-autocomplete{border-color:var(--blue)}.combobox.sc-ir-autocomplete{margin:0;top:30px;min-width:100%;width:max-content;display:block;z-index:10000;padding:1px;background:white;box-shadow:0px 8px 16px 0px rgba(0, 0, 0, 0.2);padding:5px 0;max-height:250px;overflow-y:auto}.dropdown-item.sc-ir-autocomplete{cursor:pointer}button.sc-ir-autocomplete{all:unset;right:4px}.combobox.sc-ir-autocomplete p.sc-ir-autocomplete,span.sc-ir-autocomplete,loader-container.sc-ir-autocomplete{padding:5px 16px;margin:0px;margin-top:2px;width:100%}.combobox.sc-ir-autocomplete p.sc-ir-autocomplete{cursor:pointer}.combobox.sc-ir-autocomplete p.sc-ir-autocomplete:hover{background:#f4f5fa}.combobox.sc-ir-autocomplete p[data-selected].sc-ir-autocomplete,.combobox.sc-ir-autocomplete p[data-selected].sc-ir-autocomplete:hover{color:#fff;text-decoration:none;background-color:#666ee8}.loader.sc-ir-autocomplete{width:14px;height:14px;border:2px solid #0f0f0f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const Ft=Tt;const jt=class{constructor(e){t(this,e);this.comboboxValue=s(this,"comboboxValue",7);this.inputCleared=s(this,"inputCleared",7);this.toast=s(this,"toast",7);this.duration=300;this.placeholder="";this.isSplitBooking=false;this.type="text";this.name="";this.inputId=M();this.required=false;this.disabled=false;this.from_date="";this.to_date="";this.inputValue="";this.data=[];this.selectedIndex=-1;this.isComboBoxVisible=false;this.isLoading=true;this.inputFocused=false;this.bookingService=new l;this.no_result_found=""}componentWillLoad(){this.no_result_found=b.entries.Lcz_NoResultsFound}handleKeyDown(t){var e;const i=this.data.length;const s=this.getHeightOfPElement();if(i>0){switch(t.key){case"ArrowUp":t.preventDefault();this.selectedIndex=(this.selectedIndex-1+i)%i;this.adjustScrollPosition(s);break;case"ArrowDown":t.preventDefault();this.selectedIndex=(this.selectedIndex+1)%i;this.adjustScrollPosition(s);break;case"Enter":case" ":case"ArrowRight":t.preventDefault();this.selectItem(this.selectedIndex);break;case"Escape":(e=this.inputRef)===null||e===void 0?void 0:e.blur();this.isComboBoxVisible=false;break}}}getHeightOfPElement(){const t=this.el.querySelector(".combobox");if(t){const e=t.querySelector("p");return e?e.offsetHeight:0}return 0}adjustScrollPosition(t,e=250){const i=this.el.querySelector(".combobox");if(i){const s=2;const r=t+s;const a=r*this.selectedIndex;let n=a-e/2+t/2;n=Math.max(0,Math.min(n,i.scrollHeight-e));i.scrollTo({top:n,behavior:"auto"})}}selectItem(t){if(this.data[t]){this.isItemSelected=true;this.comboboxValue.emit({key:"select",data:this.data[t]});this.inputValue="";this.resetCombobox()}}debounceFetchData(){clearTimeout(this.debounceTimer);this.debounceTimer=setTimeout((()=>{this.fetchData()}),this.duration)}async fetchData(){try{this.isLoading=true;let t=[];if(!this.isSplitBooking){t=await this.bookingService.fetchExposedGuest(this.inputValue,this.propertyId)}else{if(this.inputValue.split(" ").length===1){t=await this.bookingService.fetchExposedBookings(this.inputValue,this.propertyId,this.from_date,this.to_date)}}this.data=t;if(!this.isComboBoxVisible){this.isComboBoxVisible=true}}catch(t){console.log("error",t)}finally{this.isLoading=false}}handleInputChange(t){this.inputValue=t.target.value;if(this.inputValue){this.debounceFetchData()}else{clearTimeout(this.debounceTimer);this.resetCombobox(false)}}handleDocumentClick(t){const e=t.target;if(!this.el.contains(e)){this.isComboBoxVisible=false}}handleBlur(){this.inputFocused=false;setTimeout((()=>{if(this.isDropdownItem(document.activeElement)){return}if(this.isSplitBooking){if(!this.isItemSelected){if(this.data.length>0){this.comboboxValue.emit({key:"blur",data:this.inputValue})}else{if(this.inputValue!==""){this.toast.emit({type:"error",description:"",title:`The Booking #${this.inputValue} is not Available`,position:"top-right"});this.inputCleared.emit()}}this.inputValue="";this.resetCombobox()}else{this.isItemSelected=false}}else{if(!this.isItemSelected){this.comboboxValue.emit({key:"blur",data:this.inputValue});this.inputValue="";this.resetCombobox()}else{this.isItemSelected=false}}}),200)}isDropdownItem(t){return t&&t.closest(".combobox")}disconnectedCallback(){var t,e,i,s;clearTimeout(this.debounceTimer);(t=this.inputRef)===null||t===void 0?void 0:t.removeEventListener("blur",this.handleBlur);(e=this.inputRef)===null||e===void 0?void 0:e.removeEventListener("click",this.selectItem);(i=this.inputRef)===null||i===void 0?void 0:i.removeEventListener("keydown",this.handleKeyDown);(s=this.inputRef)===null||s===void 0?void 0:s.removeEventListener("focus",this.handleFocus)}handleItemKeyDown(t,e){var i;if(t.key==="Enter"||t.key===" "||t.key==="ArrowRight"){this.selectItem(e);t.preventDefault()}else if(t.key==="Escape"){this.isComboBoxVisible=false;(i=this.inputRef)===null||i===void 0?void 0:i.blur();t.preventDefault()}else{return}}renderDropdown(){var t;if(this.inputValue!==""){return e("div",{class:`position-absolute dropdown-menu  rounded combobox`},(t=this.data)===null||t===void 0?void 0:t.map(((t,i)=>e("p",{role:"button",class:"dropdown-item",onKeyDown:t=>this.handleItemKeyDown(t,i),"data-selected":this.selectedIndex===i,tabIndex:0,onClick:()=>this.selectItem(i)},this.isSplitBooking?e(r,null,`${t.booking_nbr} ${t.guest.first_name} ${t.guest.last_name}`):e("div",{class:"d-flex align-items-center flex-fill"},e("p",{class:"p-0 m-0"},`${t.email}`," ",e("span",{class:"p-0 m-0"},` - ${t.first_name} ${t.last_name}`)))))),this.isLoading&&e("div",{class:"loader-container d-flex align-items-center justify-content-center"},e("div",{class:"loader"})),this.data.length===0&&!this.isLoading&&e("span",{class:"text-center"},this.no_result_found))}}handleFocus(){this.isComboBoxVisible=true;this.inputFocused=true}clearInput(){this.inputValue="";this.resetCombobox();this.inputCleared.emit(null)}resetCombobox(t=true){var e;if(t){(e=this.inputRef)===null||e===void 0?void 0:e.blur()}this.data=[];this.selectedIndex=-1;this.isComboBoxVisible=false}render(){return e(i,{key:"a9582b4757fb37f6f08ba41fe00fc867161ac48d"},e("div",{key:"3622e3dade5eb123dcb68c331b0ac25a3e9d3560",class:"d-flex align-items-center "},e("label",{key:"435e335f71ca92b6c8abf450de6366493f8490aa","data-state":this.inputFocused?"focused":"blured",htmlFor:this.inputId,class:`form-control input-sm ${this.danger_border&&"border-danger"}`},e("svg",{key:"1fa0a26017eb0bef5c87ba24bbb71ada939331ae",xmlns:"http://www.w3.org/2000/svg",height:"12",width:"12",viewBox:"0 0 512 512"},e("path",{key:"2da443d4a7dba643f99c5947ab1913c143451a7d",fill:"currentColor",d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"}))),e("input",{key:"4f4db244697f7128b996a3e920932c29a1ebf97c","data-testid":this.testId,required:this.required,disabled:this.disabled,id:this.inputId,onKeyDown:this.handleKeyDown.bind(this),class:`form-control input-sm flex-full ${this.danger_border&&"border-danger"}`,type:this.type,name:this.name,value:this.value||this.inputValue,placeholder:this.placeholder,onBlur:this.handleBlur.bind(this),autoComplete:"none",onInput:this.handleInputChange.bind(this),onFocus:this.handleFocus.bind(this),ref:t=>this.inputRef=t}),this.inputValue&&e("button",{key:"3040e9ac03beef6c29608b7b9e94ac5529a5eda0",type:"button",class:"position-absolute d-flex align-items-center justify-content-center ",onClick:this.clearInput.bind(this)},e("p",{key:"dd31a3b3201c5186f61da9125444d30d48d41e53",class:"sr-only"},"clear input"),e("svg",{key:"36a1bae12a2dd1f5b5f5ac685a7920dd1c696805",width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e("path",{key:"7d08d97ba9bfa3fc254436345ff452609aa88805",d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"})))),this.isComboBoxVisible&&this.renderDropdown())}get el(){return a(this)}};jt.style=Ft;const Yt=".sc-ir-booking-details-h{overflow-x:hidden;--ir-dialog-max-width:20rem;font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important}.sc-ir-booking-details-h *.sc-ir-booking-details{font-family:inherit !important;font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important}.font-medium.sc-ir-booking-details{font-weight:600}.sc-ir-booking-details-h th.sc-ir-booking-details{font-weight:600}.h-28.sc-ir-booking-details{height:2rem}.mx-01.sc-ir-booking-details{--m:5px;margin-right:var(--m) !important;margin-left:var(--m) !important}.date-margin.sc-ir-booking-details{margin-right:5px}.pickup-margin.sc-ir-booking-details{margin-bottom:7px !important}.header-date.sc-ir-booking-details{padding-left:5px !important}.pointer.sc-ir-booking-details{cursor:pointer}.sc-ir-booking-details:root{--sidebar-width:50rem}.loading-container.sc-ir-booking-details{height:100%;width:100%;display:flex;justify-content:center;align-items:center;margin:0;padding:0}.sm-padding-right.sc-ir-booking-details{padding-right:0.2rem}.sm-padding-left.sc-ir-booking-details{padding-left:0.2rem}.sm-padding-top.sc-ir-booking-details{padding-top:0.2rem}.sm-padding-bottom.sc-ir-booking-details{padding-bottom:0.2rem}.info-notes.sc-ir-booking-details{list-style:none;padding-left:0}.light-blue-bg.sc-ir-booking-details{background-color:#acecff;padding:0.2rem 0.3rem}.iframeHeight.sc-ir-booking-details{height:17.5rem}.dialog-title.sc-ir-booking-details{width:fit-content}";const $t=Yt;const zt=class{constructor(e){t(this,e);this.toast=s(this,"toast",7);this.bookingChanged=s(this,"bookingChanged",7);this.closeSidebar=s(this,"closeSidebar",7);this.language="en";this.ticket="";this.bookingNumber="";this.is_from_front_desk=false;this.hasPrint=false;this.hasReceipt=false;this.hasDelete=false;this.hasMenu=false;this.hasRoomEdit=false;this.hasRoomDelete=false;this.hasRoomAdd=false;this.hasCheckIn=false;this.hasCheckOut=false;this.hasCloseButton=false;this.bookingItem=null;this.statusData=[];this.calendarData={};this.guestData=null;this.rerenderFlag=false;this.sidebarState=null;this.isUpdateClicked=false;this.isPMSLogLoading=false;this.modalState=null;this.bookingService=new l;this.roomService=new z;this.paymentService=new N;this.token=new R;this.printingBaseUrl="https://gateway.igloorooms.com/PrintBooking/%1/printing?id=%2"}componentWillLoad(){if(this.ticket!==""){this.token.setToken(this.ticket);this.initializeApp()}}ticketChanged(t,e){if(t===e){return}this.token.setToken(this.ticket);this.initializeApp()}handleSideBarEvents(t){this.sidebarState=t.detail.type;this.sidebarPayload=t.detail.payload}handleIconClick(t){const e=t.target;switch(e.id){case"pickup":this.sidebarState="pickup";return;case"close":this.closeSidebar.emit(null);return;case"email":this.modalState={type:"email",message:b.entries.Lcz_EmailBookingto.replace("%1",this.booking.guest.email),loading:S("/Send_Booking_Confirmation_Email")};this.modalRef.openModal();return;case"print":this.openPrintingScreen();return;case"receipt":this.openPrintingScreen("invoice");return;case"book-delete":return;case"menu":window.location.href="https://x.igloorooms.com/manage/acbookinglist.aspx";return;case"room-add":this.bookingItem={ID:"",NAME:this.booking.guest.last_name,EMAIL:this.booking.guest.email,PHONE:this.booking.guest.mobile,REFERENCE_TYPE:"",FROM_DATE:this.booking.from_date,ARRIVAL:this.booking.arrival,TO_DATE:this.booking.to_date,TITLE:`${b.entries.Lcz_AddingUnitToBooking}# ${this.booking.booking_nbr}`,defaultDateRange:{fromDate:new Date(this.booking.from_date),fromDateStr:"",toDate:new Date(this.booking.to_date),toDateStr:"",dateDifference:0,message:""},event_type:"ADD_ROOM",booking:this.booking,BOOKING_NUMBER:this.booking.booking_nbr,ADD_ROOM_TO_BOOKING:this.booking.booking_nbr,GUEST:this.booking.guest,message:this.booking.remark,SOURCE:this.booking.source,ROOMS:this.booking.rooms};return;case"extra_service_btn":this.sidebarState="extra_service";return;case"add-payment":return}}async handleResetExposedCancellationDueAmount(t){t.stopImmediatePropagation();t.stopPropagation();const e=await this.paymentService.GetExposedCancellationDueAmount({booking_nbr:this.booking.booking_nbr,currency_id:this.booking.currency.id});this.paymentActions=[...e]}handleEditInitiated(t){this.bookingItem=t.detail}handleRoomGuestsUpdate(t){const{identifier:e,guests:i}=t.detail;const s=[...this.booking.rooms];let r=s.findIndex((t=>t.identifier===e));if(r===-1){return}const a=s[r];const n=Object.assign(Object.assign({},a),{sharing_persons:i});s[r]=n;this.booking=Object.assign(Object.assign({},this.booking),{rooms:[...s]})}async handleResetBooking(t){t.stopPropagation();t.stopImmediatePropagation();if(t.detail){return this.booking=t.detail}await this.resetBooking()}handleEditExtraService(t){this.selectedService=t.detail;this.sidebarState="extra_service"}setRoomsData(t){var e,i;let s=new Array;if((i=(e=t.My_Result)===null||e===void 0?void 0:e.roomtypes)===null||i===void 0?void 0:i.length){s=t.My_Result.roomtypes;t.My_Result.roomtypes.forEach((t=>{t.expanded=true}))}this.calendarData.roomsInfo=s}async initializeApp(){var t,e;try{const[i,s,r,a,n]=await Promise.all([this.roomService.getExposedProperty({id:this.propertyid||0,language:this.language,aname:this.p}),this.roomService.fetchLanguage(this.language),this.bookingService.getCountries(this.language),this.bookingService.getExposedBooking(this.bookingNumber,this.language),this.bookingService.getSetupEntriesByTableNameMulti(["_BED_PREFERENCE_TYPE","_DEPARTURE_TIME","_PAY_TYPE"])]);this.property_id=(t=i===null||i===void 0?void 0:i.My_Result)===null||t===void 0?void 0:t.id;const{bed_preference_type:o,departure_time:l,pay_type:c}=this.bookingService.groupEntryTablesResult(n);this.bedPreference=o;this.departureTime=l;this.paymentTypes=c;console.log(l);if((a===null||a===void 0?void 0:a.booking_nbr)&&((e=a===null||a===void 0?void 0:a.currency)===null||e===void 0?void 0:e.id)&&a.is_direct){this.paymentService.GetExposedCancellationDueAmount({booking_nbr:a.booking_nbr,currency_id:a.currency.id}).then((t=>{this.paymentActions=t}))}if(!(b===null||b===void 0?void 0:b.entries)){b.entries=s.entries;b.direction=s.direction}this.countries=r;const h=i===null||i===void 0?void 0:i.My_Result;if(h){const{allowed_payment_methods:t,currency:e,allowed_booking_sources:s,adult_child_constraints:r,calendar_legends:a,aname:n}=h;this.printingBaseUrl=this.printingBaseUrl.replace("%1",n).replace("%2",this.bookingNumber);this.calendarData={currency:e,allowed_booking_sources:s,adult_child_constraints:r,legendData:a};this.setRoomsData(i);const o=["001","004"];this.showPaymentDetails=t===null||t===void 0?void 0:t.some((t=>o.includes(t.code)))}else{console.warn("Room response is missing 'My_Result'.")}this.guestData=a.guest;this.booking=a}catch(t){console.error("Error initializing app:",t)}}async openPrintingScreen(t="print",e="new"){if(e==="old"){if(t==="invoice"){return window.open(`https://x.igloorooms.com/manage/AcBookingEdit.aspx?IRID=${this.booking.system_id}&&PM=I&TK=${this.ticket}`)}return window.open(`https://x.igloorooms.com/manage/AcBookingEdit.aspx?IRID=${this.booking.system_id}&&PM=B&TK=${this.ticket}`)}let i=this.printingBaseUrl;if(t==="invoice"){i=i+"&mode=invoice"}const{data:s}=await Y.post(`Get_ShortLiving_Token`);if(!s.ExceptionMsg){i=i+`&token=${s.My_Result}`}window.open(i)}handleCloseBookingWindow(){this.bookingItem=null}handleDeleteFinish(t){this.booking=Object.assign(Object.assign({},this.booking),{rooms:this.booking.rooms.filter((e=>e.identifier!==t.detail))})}async resetBooking(){try{const t=await this.bookingService.getExposedBooking(this.bookingNumber,this.language);this.booking=Object.assign({},t);this.bookingChanged.emit(this.booking)}catch(t){console.log(t)}}async handleModalConfirm(t){t.stopImmediatePropagation();t.stopPropagation();switch(this.modalState.type){case"email":await this.bookingService.sendBookingConfirmationEmail(this.booking.booking_nbr,this.language);break}this.modalState=null;this.modalRef.closeModal()}renderSidebarContent(){var t,i,s,r,a,n;const o=()=>{this.sidebarState=null};switch(this.sidebarState){case"guest":return e("ir-guest-info",{isInSideBar:true,headerShown:true,slot:"sidebar-body",booking_nbr:this.bookingNumber,email:(t=this.booking)===null||t===void 0?void 0:t.guest.email,language:this.language,onCloseSideBar:o});case"pickup":return e("ir-pickup",{bookingDates:{from:this.booking.from_date,to:this.booking.to_date},slot:"sidebar-body",defaultPickupData:this.booking.pickup_info,bookingNumber:this.booking.booking_nbr,numberOfPersons:this.booking.occupancy.adult_nbr+this.booking.occupancy.children_nbr,onCloseModal:o});case"extra_note":return e("ir-booking-extra-note",{slot:"sidebar-body",booking:this.booking,onCloseModal:()=>this.sidebarState=null});case"extra_service":return e("ir-extra-service-config",{service:this.selectedService,booking:{from_date:this.booking.from_date,to_date:this.booking.to_date,booking_nbr:this.booking.booking_nbr,currency:this.booking.currency},slot:"sidebar-body",onCloseModal:()=>{o();if(this.selectedService){this.selectedService=null}}});case"room-guest":return e("ir-room-guests",{countries:this.countries,language:this.language,identifier:(i=this.sidebarPayload)===null||i===void 0?void 0:i.identifier,bookingNumber:this.booking.booking_nbr,roomName:(s=this.sidebarPayload)===null||s===void 0?void 0:s.roomName,totalGuests:(r=this.sidebarPayload)===null||r===void 0?void 0:r.totalGuests,sharedPersons:(a=this.sidebarPayload)===null||a===void 0?void 0:a.sharing_persons,slot:"sidebar-body",checkIn:(n=this.sidebarPayload)===null||n===void 0?void 0:n.checkin,onCloseModal:o});case"payment-folio":return e("ir-payment-folio",{bookingNumber:this.booking.booking_nbr,paymentTypes:this.paymentTypes,slot:"sidebar-body",payment:this.sidebarPayload.payment,mode:this.sidebarPayload.mode,onCloseModal:o});default:return null}}render(){var t,i,s;if(!this.booking){return e("div",{class:"loading-container"},e("ir-spinner",null))}return[e(r,null,!this.is_from_front_desk&&e(r,null,e("ir-toast",null),e("ir-interceptor",null))),e("ir-booking-header",{booking:this.booking,hasCloseButton:this.hasCloseButton,hasDelete:this.hasDelete,hasMenu:this.hasMenu,hasPrint:this.hasPrint,hasReceipt:this.hasReceipt,hasEmail:["001","002"].includes((i=(t=this.booking)===null||t===void 0?void 0:t.status)===null||i===void 0?void 0:i.code)}),e("div",{class:"fluid-container p-1 text-left mx-0"},e("div",{class:"row m-0"},e("div",{class:"col-12 p-0 mx-0 pr-lg-1 col-lg-6"},e("ir-reservation-information",{countries:this.countries,booking:this.booking}),e("div",{class:"font-size-large d-flex justify-content-between align-items-center mb-1"},e("ir-date-view",{from_date:this.booking.from_date,to_date:this.booking.to_date}),this.hasRoomAdd&&this.booking.is_editable&&e("ir-button",{id:"room-add",icon_name:"square_plus",variant:"icon",style:{"--icon-size":"1.5rem"}})),e("div",{class:"card p-0 mx-0"},this.booking.rooms.map(((t,i)=>{const s=this.handleRoomCheckin(t);const r=this.handleRoomCheckout(t);return[e("ir-room",{room:t,property_id:this.property_id,language:this.language,departureTime:this.departureTime,bedPreferences:this.bedPreference,isEditable:this.booking.is_editable,legendData:this.calendarData.legendData,roomsInfo:this.calendarData.roomsInfo,myRoomTypeFoodCat:t.roomtype.name,mealCodeName:t.rateplan.short_name,currency:this.booking.currency.symbol,hasRoomEdit:this.hasRoomEdit&&this.booking.status.code!=="003"&&this.booking.is_direct,hasRoomDelete:this.hasRoomDelete&&this.booking.status.code!=="003"&&this.booking.is_direct,hasCheckIn:s,hasCheckOut:r,booking:this.booking,bookingIndex:i,onDeleteFinished:this.handleDeleteFinish.bind(this)}),i!==this.booking.rooms.length-1&&e("hr",{class:"mr-2 ml-2 my-0 p-0"})]}))),e("ir-pickup-view",{booking:this.booking}),e("section",null,e("div",{class:"font-size-large d-flex justify-content-between align-items-center mb-1"},e("p",{class:"font-size-large p-0 m-0 "},b.entries.Lcz_ExtraServices),e("ir-button",{id:"extra_service_btn",icon_name:"square_plus",variant:"icon",style:{"--icon-size":"1.5rem"}})),e("ir-extra-services",{booking:{booking_nbr:this.booking.booking_nbr,currency:this.booking.currency,extra_services:this.booking.extra_services}}))),e("div",{class:"col-12 p-0 m-0 pl-lg-1 col-lg-6"},e("ir-payment-details",{paymentTypes:this.paymentTypes,paymentActions:this.paymentActions,bookingDetails:this.booking})))),e("ir-modal",{modalBody:(s=this.modalState)===null||s===void 0?void 0:s.message,leftBtnText:b.entries.Lcz_Cancel,rightBtnText:b.entries.Lcz_Confirm,autoClose:false,isLoading:S("/Send_Booking_Confirmation_Email"),ref:t=>this.modalRef=t,onConfirmModal:t=>{this.handleModalConfirm(t)},onCancelModal:()=>{this.modalRef.closeModal()}}),e("ir-sidebar",{open:this.sidebarState!==null,side:"right",id:"editGuestInfo",style:{"--sidebar-width":this.sidebarState==="room-guest"?"60rem":undefined},onIrSidebarToggle:t=>{t.stopImmediatePropagation();t.stopPropagation();this.sidebarState=null},showCloseButton:false},this.renderSidebarContent()),e(r,null,this.bookingItem&&e("igl-book-property",{allowedBookingSources:this.calendarData.allowed_booking_sources,adultChildConstraints:this.calendarData.adult_child_constraints,showPaymentDetails:this.showPaymentDetails,countries:this.countries,currency:this.calendarData.currency,language:this.language,propertyid:this.property_id,bookingData:this.bookingItem,onCloseBookingWindow:()=>this.handleCloseBookingWindow()}))]}handleRoomCheckout(t){if(!g.checkin_enabled||g.is_automatic_check_in_out){return false}return t.in_out.code==="001"}handleRoomCheckin(t){if(!g.checkin_enabled||g.is_automatic_check_in_out){return false}if(!t.unit){return false}if(t.in_out&&t.in_out.code!=="000"){return false}if(E().isSameOrAfter(E(t.from_date,"YYYY-MM-DD"),"days")&&E().isBefore(E(t.to_date,"YYYY-MM-DD"),"days")){return true}return false}get element(){return a(this)}static get watchers(){return{ticket:["ticketChanged"]}}};zt.style=$t;const Nt=".sc-ir-booking-extra-note-h{display:block}";const Rt=Nt;const Lt=".sc-ir-booking-extra-note-h{height:100%}.sheet-container.sc-ir-booking-extra-note{display:flex !important;flex-direction:column !important;background:white;height:100vh;gap:1rem;z-index:1000}.sheet-container.sc-ir-booking-extra-note{height:-webkit-fill-available;height:100vh;height:100dvh}.sheet-footer.sc-ir-booking-extra-note{position:sticky;bottom:0;z-index:20;background:white;border-top:1px solid #e4e5ec;display:flex;flex-direction:column;padding:1rem;gap:0.5rem}.sheet-header.sc-ir-booking-extra-note{position:sticky;top:0;z-index:10;background:white}.sheet-body.sc-ir-booking-extra-note{flex:1 1 0%}@media (min-width: 768px){.sheet-footer.sc-ir-booking-extra-note{flex-direction:row;align-items:center}}";const Pt=Lt;const Vt=class{constructor(e){t(this,e);this.closeModal=s(this,"closeModal",7);this.resetBookingEvt=s(this,"resetBookingEvt",7);this.isLoading=false;this.note="";this.bookingService=new l}componentWillLoad(){if(this.booking.extras){this.setNote(C(this.booking.extras))}}setNote(t){this.note=t}async savePrivateNote(){try{this.isLoading=true;let t=this.booking.extras||[];const e={key:"private_note",value:this.note};if(t.length===0){t.push(e)}else{const i=t.findIndex((t=>t.key==="private_note"));if(i===-1){t.push(e)}else{t[i]=e}}const i=await this.bookingService.doReservation({assign_units:true,is_pms:true,is_direct:true,is_in_loyalty_mode:false,promo_key:null,booking:this.booking,Is_Non_Technical_Change:true,extras:t});this.resetBookingEvt.emit(i);this.closeModal.emit(null)}catch(t){console.error(t)}finally{this.isLoading=false}}render(){return e("form",{key:"102c307fa4cde38c7f4ba91dc9a5fa8735097b09",class:"sheet-container h-100",onSubmit:t=>{t.preventDefault();this.savePrivateNote()}},e("ir-title",{key:"3f782610a879434699c9ebb3b23cb3d6cd1b2e53",class:"px-1 sheet-header",onCloseSideBar:()=>this.closeModal.emit(null),label:b.entries.Lcz_PrivateNote,displayContext:"sidebar"}),e("div",{key:"6949926b1deb312ed33c825f529038dfd7bc9b27",class:"sheet-body px-1"},e("ir-textarea",{key:"e64dd33ac84eb6d71ab0c363cdc524c9d336314f",placeholder:b.entries.Lcz_PrivateNote_MaxChar,label:"",value:this.note,maxLength:150,onTextChange:t=>this.setNote(t.detail)})),e("div",{key:"b8c2233c042dff0e6749257abb4f7c642206efd7",class:"sheet-footer"},e("ir-button",{key:"3cd692a29b35917dc21d5e2ca2a354b64d5d770f",onClickHandler:()=>this.closeModal.emit(null),btn_styles:"justify-content-center",class:`mb-1 mb-sm-0 flex-fill  mr-sm-1'}`,text:b.entries.Lcz_Cancel,btn_color:"secondary"}),e("ir-button",{key:"4428660d719e92ae8dbf2714ccba94f73fd64e0f",btn_styles:"justify-content-center align-items-center",class:"m-0 flex-fill text-center ml-sm-1",isLoading:this.isLoading,text:b.entries.Lcz_Save,btn_color:"primary",btn_type:"submit"})))}};Vt.style=Rt+Pt;const Ht=".sc-ir-booking-guarantee-h{display:block}.sc-ir-booking-guarantee-h{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important}.sc-ir-booking-guarantee-h *.sc-ir-booking-guarantee{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important}.iframeHeight.sc-ir-booking-guarantee{height:max-content;height:22.5rem}";const Gt=Ht;const Ut=class{constructor(e){t(this,e);this.collapsed=false;this.paymentDetailsUrl="";this.paymentExceptionMessage=""}async componentWillLoad(){}formatCurrency(t,e,i="en-US"){if(!e||t<0){return""}return new Intl.NumberFormat(i,{style:"currency",currency:e,minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}checkPaymentCode(t){var e,i,s;return(s=(i=(e=g.allowed_payment_methods)===null||e===void 0?void 0:e.find((e=>e.code===t)))===null||i===void 0?void 0:i.description)!==null&&s!==void 0?s:null}getPaymentMethod(){var t,e,i,s;let r=null;const a=(e=(t=this.booking)===null||t===void 0?void 0:t.extras)===null||e===void 0?void 0:e.find((t=>t.key==="payment_code"));if(this.booking.agent){const t=(s=(i=this.booking)===null||i===void 0?void 0:i.extras)===null||s===void 0?void 0:s.find((t=>t.key==="agent_payment_mode"));if(t){r=t.value==="001"?b.entries.Lcz_OnCredit:a?this.checkPaymentCode(a.value):null}}else if(a){r=this.checkPaymentCode(a.value)}return r}async handleToggleCollapse(){if(!this.booking.is_direct&&this.booking.channel_booking_nbr&&!this.booking.guest.cci&&!this.collapsed){this.paymentDetailsUrl=await this.bookingService.getPCICardInfoURL(this.booking.booking_nbr)}this.collapsed=!this.collapsed}shouldShowGuarantee(){const t=this.booking.is_direct?this.getPaymentMethod():null;return this.booking.is_direct?Boolean(t||this.booking.guest.cci):true}shouldShowToggleButton(){return!this.booking.is_direct||this.booking.is_direct&&this.booking.guest.cci}renderCreditCardInfo(){const{cci:t}=this.booking.guest;if(!t)return null;return[e("div",null,t&&"Card:"," ",e("span",null,t.nbr||""),t.expiry_month&&" Expiry: ",e("span",null,t.expiry_month||"",t.expiry_year&&"/"+t.expiry_year)),e("div",null,t.holder_name&&"Name:"," ",e("span",null,t.holder_name||""),t.cvc&&" - CVC:"," ",e("span",null,t.cvc||""))]}renderCollapsedContent(){if(this.booking.guest.cci){return this.renderCreditCardInfo()}if(this.paymentDetailsUrl){return e("iframe",{src:this.paymentDetailsUrl,width:"100%",class:"iframeHeight",frameborder:"0",name:"payment"})}return e("div",{class:"text-center"},this.paymentExceptionMessage)}renderOtaGuarantee(){var t,i,s;const{ota_guarante:r}=this.booking;if(!r||this.booking.is_direct)return null;return e("div",null,e("ir-label",{content:r.card_type+`${r.is_virtual?" (virtual)":""}`,labelText:`${b.entries.Lcz_CardType}:`}),e("ir-label",{content:r.cardholder_name,labelText:`${b.entries.Lcz_CardHolderName}:`}),e("ir-label",{content:r.card_number,labelText:`${b.entries.Lcz_CardNumber}:`}),e("ir-label",{content:this.formatCurrency(O(Number((t=r.meta)===null||t===void 0?void 0:t.virtual_card_current_balance),Number((i=r.meta)===null||i===void 0?void 0:i.virtual_card_decimal_places)),(s=r.meta)===null||s===void 0?void 0:s.virtual_card_currency_code),labelText:`${b.entries.Lcz_CardBalance}:`}))}render(){if(!this.shouldShowGuarantee()){return null}const t=this.booking.is_direct?this.getPaymentMethod():null;return e("div",{class:"mb-1"},e("div",{class:"d-flex align-items-center"},e("span",{class:"mr-1 font-medium"},b.entries.Lcz_BookingGuarantee,t&&e("span",null,": ",t)),this.shouldShowToggleButton()&&e("ir-button",{id:"drawer-icon","data-toggle":"collapse","data-target":".guarrantee","aria-expanded":this.collapsed?"true":"false","aria-controls":"myCollapse",class:"sm-padding-right pointer",variant:"icon",icon_name:"credit_card",onClickHandler:this.handleToggleCollapse.bind(this)})),e("div",{class:"collapse guarrantee"},this.renderCollapsedContent()),this.renderOtaGuarantee())}};Ut.style=Gt;const Kt=".sc-ir-booking-header-h{display:block}.confirmed.sc-ir-booking-header{color:#fff;display:flex;align-items:center}.bg-ir-green.sc-ir-booking-header{background:#629a4c;padding:0.2rem 0.3rem}.bg-ir-red.sc-ir-booking-header{background:#ff4961;padding:0.2rem 0.3rem}.bg-ir-orange.sc-ir-booking-header{background:#ff9149;padding:0.2rem 0.3rem}";const Wt=Kt;const qt=class{constructor(e){t(this,e);this.toast=s(this,"toast",7);this.closeSidebar=s(this,"closeSidebar",7);this.resetBookingEvt=s(this,"resetBookingEvt",7);this.openSidebar=s(this,"openSidebar",7);this.hasEmail=true;this.bookingStatus=null;this.confirmationBG={"001":"bg-ir-orange","002":"bg-ir-green","003":"bg-ir-red","004":"bg-ir-red"};this.bookingService=new l;this.alertMessage=`ALERT! Modifying an OTA booking will create a discrepancy between igloorooms and the source. Future guest modifications on the OTA may require manual adjustmentsofthebooking.`}handleSelectChange(t){t.stopPropagation();t.stopImmediatePropagation();const e=t.target;this.bookingStatus=e.selectedValue}async updateStatus(){if(!this.bookingStatus||this.bookingStatus==="-1"){this.toast.emit({type:"error",description:"",title:b.entries.Lcz_SelectStatus,position:"top-right"});return}try{await this.bookingService.changeExposedBookingStatus({book_nbr:this.booking.booking_nbr,status:this.bookingStatus});this.toast.emit({type:"success",description:"",title:b.entries.Lcz_StatusUpdatedSuccessfully,position:"top-right"});this.bookingStatus=null;this.resetBookingEvt.emit(null)}catch(t){console.log(t)}}openDialog(t){const{type:e}=t;this.currentDialogStatus=e;this.dialogRef.openModal()}renderDialogBody(){switch(this.currentDialogStatus){case"pms":return e("ir-pms-logs",{slot:"modal-body",bookingNumber:this.booking.booking_nbr});case"events-log":return e("ir-events-log",{booking:this.booking,slot:"modal-body",bookingNumber:this.booking.booking_nbr})}}render(){var t,i;const s=this.booking.ota_manipulations?this.booking.ota_manipulations[this.booking.ota_manipulations.length-1]:null;return e("div",{key:"30ddd492ce59575592f5d80d997679acde455740",class:"fluid-container px-1"},e("div",{key:"5a7a4812b37736ae388f559827423a3ea29acf0a",class:"d-flex flex-column p-0 mx-0 flex-lg-row align-items-md-center justify-content-between mt-1"},e("div",{key:"53b1f01da142328fd4082af388ce7d88e057f5e2",class:"m-0 p-0 mb-1 mb-lg-0 mt-md-0"},e("p",{key:"6873463ecb14a3e222aeb0a6f8e4bea4462900cc",class:"font-size-large m-0 p-0"},`${b.entries.Lcz_Booking}#${this.booking.booking_nbr}`),e("p",{key:"768be3c66846fd5565687a5bda398e6f48fccb58",class:"m-0 p-0"},!this.booking.is_direct&&e("span",{key:"c60255b5394ccf51a9603d2dc92693eeec9f3c4f",class:"mr-1 m-0"},this.booking.channel_booking_nbr))),e("div",{key:"8814531a2bb9e4bec62a3f01a7a14942b2bf8a06",class:"d-flex justify-content-end align-items-center",style:{gap:"1rem",flexWrap:"wrap"}},e("div",{key:"fa66f51ca5ae1c4c81b975e14ba74aaf7b16dce7",class:"d-flex flex-column align-items-center"},e("span",{key:"6ecac89fb523d42123a2d6b92462335fa0380dd4",class:`confirmed btn-sm m-0  ${this.confirmationBG[this.booking.is_requested_to_cancel?"003":this.booking.status.code]}`},this.booking.is_requested_to_cancel?b.entries.Lcz_CancellationRequested:this.booking.status.description),s&&e("ir-popover",{key:"19fb0cba89b0b5c0eec81db45cf35e9e8940520b",trigger:"hover",renderContentAsHtml:true,content:`<div><p>Modified by ${s.user} at ${s.date} ${s.hour}:${s.minute}.</p>\n                <p>${this.alertMessage}</p></div>`},e("p",{key:"ee5811df2c03cdcf38a01488a6e8f6be883849bb",class:"mx-0 p-0 small text-danger",style:{marginTop:"0.25rem",marginBottom:"0"}},e("b",{key:"ca4fdf0e7f33573eedc856f946a4279dfc13367c"},"Modified")))),this.booking.allowed_actions.length>0&&this.booking.is_editable&&e("div",{key:"9020e7a7ef42b83f6323d00d91526456880fb2ab",class:"m-0 p-0 d-flex align-items-center",style:{gap:"0.25rem"}},e("ir-select",{key:"30b857194f2a2885060fa990de9d4b0ea793473a",selectContainerStyle:"h-28",selectStyles:"d-flex status-select align-items-center h-28",firstOption:b.entries.Lcz_Select,id:"update-status",size:"sm","label-available":"false",data:this.booking.allowed_actions.map((t=>({text:t.description,value:t.code}))),textSize:"sm",class:"sm-padding-right m-0 ",selectedValue:this.bookingStatus}),e("ir-button",{key:"8ccb7d2ff690c6a05e1f629994c0bc6109836295",onClickHandler:()=>{if(!this.booking.is_direct){this.modalEl.openModal();return}this.updateStatus()},btn_styles:"h-28",isLoading:S("/Change_Exposed_Booking_Status"),btn_disabled:S("/Change_Exposed_Booking_Status"),id:"update-status-btn",size:"sm",text:"Update"})),e("ir-button",{key:"9505dbdf5da862241afa8eff254c6e4f31c2a3a0",size:"sm",btn_color:"outline",text:b.entries.Lcz_EventsLog,onClickHandler:t=>{t.stopImmediatePropagation();t.stopPropagation();this.openDialog({type:"events-log"})}}),g.is_pms_enabled&&e("ir-button",{key:"59072d6b196a98625a1f824e42fa192f88dcff25",size:"sm",btn_color:"outline",text:b.entries.Lcz_pms,onClick:t=>{t.stopImmediatePropagation();t.stopPropagation();this.openDialog({type:"pms"})}}),this.hasReceipt&&e("ir-button",{key:"bd433e96319b59153bdc7934e0b6b67d2813a247",variant:"icon",id:"receipt",icon_name:"reciept",class:"",style:{"--icon-size":"1.65rem"}}),this.hasPrint&&e("ir-button",{key:"0b529fc81cd818d0c75d9fe069e323c3a95078e8",variant:"icon",id:"print",icon_name:"print",class:"",style:{"--icon-size":"1.65rem"}}),this.hasEmail&&e("ir-button",{key:"a9c3853c979b295cf0c000ffae1bea8da368fd18",variant:"icon",id:"email",title:"Email this booking",icon_name:"email",class:"",style:{"--icon-size":"1.65rem"}}),this.hasDelete&&e("ir-button",{key:"4f8976307db16e480ba6d78897a4d811f818efb2",variant:"icon",id:"book-delete",icon_name:"trash",class:"",style:Object.assign(Object.assign({},L.danger),{"--icon-size":"1.65rem"})}),this.hasMenu&&e("ir-button",{key:"48a67eedd8ac9c0491bb1cbb04fb3fdc515bb1b6",variant:"icon",class:"mr-1",id:"menu",icon_name:"menu_list",style:{"--icon-size":"1.65rem"}}),this.hasCloseButton&&e("ir-button",{key:"be1a63dcdcc3d1f9dc7e57e1c0075be46dabf933",id:"close",variant:"icon",style:{"--icon-size":"1.65rem"},icon_name:"xmark",class:"ml-2",onClickHandler:t=>{t.stopPropagation();t.stopImmediatePropagation();this.closeSidebar.emit(null)}}))),e("ir-dialog",{key:"51e552d046ff5d0675b066b0432b18efc3968522",onOpenChange:t=>{if(!t.detail){this.currentDialogStatus=null}},style:this.currentDialogStatus==="events-log"&&{"--ir-dialog-max-width":"max-content"},ref:t=>this.dialogRef=t},this.renderDialogBody()),e("ir-modal",{key:"7c9681b34b38c0cf261c5c2e20f00728f54219ff",ref:t=>this.modalEl=t,modalTitle:"",leftBtnText:(t=b===null||b===void 0?void 0:b.entries)===null||t===void 0?void 0:t.Lcz_Cancel,rightBtnText:(i=b===null||b===void 0?void 0:b.entries)===null||i===void 0?void 0:i.Lcz_Confirm,modalBody:b.entries.Lcz_OTA_Modification_Alter,isLoading:S("/Change_Exposed_Booking_Status"),onConfirmModal:this.updateStatus.bind(this)}))}};qt.style=Wt;const Jt=".sc-ir-button-h{--icon-button-color:#6b6f82;--icon-button-hover-color:#104064}.button-icon.sc-ir-button{padding:0;margin-top:0}.button-icon[data-state='loading'].sc-ir-button{display:none}.button-text.sc-ir-button{padding:0 5px}.bounce-3.sc-ir-button{animation:bounce 1s 1}.btn-link.sc-ir-button{color:var(--blue, #1e9ff2)}.ir-button-class.sc-ir-button{display:inline-flex !important;justify-content:center;align-items:center;box-sizing:border-box}.btn-outline.sc-ir-button{background:transparent;border:1px solid #104064;color:#104064}.btn-outline.sc-ir-button:hover,.btn-outline.sc-ir-button:active{background:#104064;color:white}.icon-button.sc-ir-button{all:unset;box-sizing:border-box;border-radius:0.25rem;display:inline-flex;align-items:center;justify-content:center;color:var(--icon-button-color);padding:0.2rem;transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.icon-button.sc-ir-button:hover{color:var(--icon-button-hover-color)}.icon-button.sc-ir-button:hover.hovered_bg{background:var('--ir-icon-bg-hover', #f6f6f6)}.icon-button.sc-ir-button:disabled{pointer-events:none}.icon-loader.sc-ir-button{margin:0;padding:0;width:var(--icon-size, 1.25rem);height:var(--icon-size, 1.25rem);border-radius:50%;background:radial-gradient(farthest-side, var(--icon-button-color) 94%, #0000) top/2px 2px no-repeat, conic-gradient(#0000 30%, var(--icon-button-color));-webkit-mask:radial-gradient(farthest-side, #0000 calc(100% - 2px), var(--icon-button-color) 0);mask:radial-gradient(farthest-side, #0000 calc(100% - 2px), var(--icon-button-color) 0);animation:l13 1s infinite linear}.btn_loader.sc-ir-button{width:15px;height:10px;--c:no-repeat linear-gradient(#ffffff 0 0);background:var(--c) 0% 50%, var(--c) 50% 50%, var(--c) 100% 50%;background-size:20% 100%;animation:l1 1s infinite linear}@keyframes l13{100%{transform:rotate(1turn)}}@keyframes l1{0%{background-size:20% 100%, 20% 100%, 20% 100%}33%{background-size:20% 10%, 20% 100%, 20% 100%}50%{background-size:20% 100%, 20% 10%, 20% 100%}66%{background-size:20% 100%, 20% 100%, 20% 10%}100%{background-size:20% 100%, 20% 100%, 20% 100%}}@keyframes bounce{0%,100%{transform:scale(1);animation-timing-function:cubic-bezier(0.8, 0, 1, 1)}50%{transform:scale(1.2);animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}}@keyframes ping{75%,100%{transform:scale(1.2)}}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const Xt=Jt;const Zt=class{constructor(e){t(this,e);this.clickHandler=s(this,"clickHandler",7);this.btn_color="primary";this.size="md";this.textSize="md";this.btn_block=true;this.btn_disabled=false;this.btn_type="button";this.isLoading=false;this.btn_id=M();this.variant="default";this.visibleBackgroundOnHover=false;this.iconPosition="left";this.renderContentAsHtml=false}handleButtonAnimation(t){if(!this.buttonEl||t.detail!==this.btn_id){return}t.stopImmediatePropagation();t.stopPropagation();this.buttonEl.classList.remove("bounce-3");this.buttonEl.classList.add("bounce-3")}async bounce(){this.buttonEl.classList.remove("bounce-3");this.buttonEl.classList.add("bounce-3")}render(){const t=this.btn_disabled||this.isLoading;if(this.variant==="icon"){return e("button",{id:this.btn_id,class:`icon-button ${this.btn_styles} ${this.visibleBackgroundOnHover?"hovered_bg":""}`,ref:t=>this.buttonEl=t,onClick:()=>this.clickHandler.emit(),type:this.btn_type,disabled:t},this.isLoading?e("span",{class:"icon-loader"}):e("ir-icons",{class:"m-0 p-0",name:this.icon_name}))}let i=this.btn_block?"btn-block":"";return e("button",{id:this.btn_id,ref:t=>this.buttonEl=t,onClick:()=>this.clickHandler.emit(),class:`btn btn-${this.btn_color} ${this.btn_styles} ir-button-class  btn-${this.size} text-${this.textSize} ${i}`,type:this.btn_type,style:this.btnStyle,disabled:t},this.icon_name&&this.iconPosition==="left"&&e("ir-icons",{name:this.icon_name,style:this.icon_style}),this.text&&(this.renderContentAsHtml?e("span",{class:"button-text m-0",innerHTML:this.text,style:this.labelStyle}):e("span",{style:this.labelStyle,class:"button-text m-0"},this.text)),this.isLoading?e("div",{class:"btn_loader m-0 p-0"}):this.iconPosition==="right"&&e("ir-icons",{style:this.icon_style,name:this.icon_name}))}};Zt.style=Xt;const Qt=".sc-ir-combobox-h{display:block;position:relative;padding:0;margin:0;box-sizing:border-box}ul.sc-ir-combobox{position:absolute;box-sizing:border-box;margin:0;margin-top:2px;width:max-content;max-height:80px;border-radius:0.21rem;z-index:10000;padding:1px;background:white;box-shadow:0px 8px 16px 0px rgba(0, 0, 0, 0.2);padding:5px 0;max-height:250px;overflow-y:auto;min-width:100%}ul[data-position='bottom-right'].sc-ir-combobox{right:0}.list-item-image.sc-ir-combobox{height:1rem;aspect-ratio:4/3;border-radius:4px;margin-right:10px}.dropdown-item.sc-ir-combobox{cursor:pointer}ul.sc-ir-combobox li.sc-ir-combobox,span.sc-ir-combobox,loader-container.sc-ir-combobox{padding:0px 16px;margin:0px;margin-top:2px;width:100%;border-radius:2px}ul.sc-ir-combobox li.sc-ir-combobox{cursor:pointer}ul.sc-ir-combobox li.sc-ir-combobox{display:flex;align-items:center;flex-wrap:wrap;gap:3px}ul.sc-ir-combobox li.sc-ir-combobox p.sc-ir-combobox{margin:0;padding:0}ul.sc-ir-combobox li.sc-ir-combobox:hover{background:#f4f5fa}ul.sc-ir-combobox li[data-selected].sc-ir-combobox,ul.sc-ir-combobox li[data-selected].sc-ir-combobox:hover{color:#fff;text-decoration:none;background-color:#666ee8}";const te=Qt;const ee=class{constructor(e){t(this,e);this.comboboxValueChange=s(this,"comboboxValueChange",7);this.inputCleared=s(this,"inputCleared",7);this.toast=s(this,"toast",7);this.data=[];this.duration=300;this.disabled=false;this.autoFocus=false;this.input_id=M();this.selectedIndex=-1;this.actualIndex=-1;this.isComboBoxVisible=false;this.isLoading=true;this.inputValue="";this.filteredData=[];this.componentShouldAutoFocus=false}componentWillLoad(){this.filteredData=this.data}componentDidLoad(){if(this.autoFocus){this.focusInput()}}watchHandler(t,e){if(t!==e&&t===true){this.focusInput()}}handleDocumentClick(t){const e=t.target;if(!this.el.contains(e)){this.isComboBoxVisible=false}}disconnectedCallback(){var t,e,i,s;clearTimeout(this.debounceTimer);clearTimeout(this.blurTimeout);(t=this.inputRef)===null||t===void 0?void 0:t.removeEventListener("blur",this.handleBlur);(e=this.inputRef)===null||e===void 0?void 0:e.removeEventListener("click",this.selectItem);(i=this.inputRef)===null||i===void 0?void 0:i.removeEventListener("keydown",this.handleKeyDown);(s=this.inputRef)===null||s===void 0?void 0:s.removeEventListener("focus",this.handleFocus)}handleKeyDown(t){var e;const i=this.filteredData.length;if(i>0){switch(t.key){case"ArrowUp":t.preventDefault();this.selectedIndex=(this.selectedIndex-1+i)%i;this.adjustScrollPosition();break;case"ArrowDown":t.preventDefault();this.selectedIndex=(this.selectedIndex+1)%i;this.adjustScrollPosition();break;case"Escape":t.stopImmediatePropagation();t.stopPropagation();(e=this.inputRef)===null||e===void 0?void 0:e.blur();this.isComboBoxVisible=false;break}}}focusInput(){requestAnimationFrame((()=>{var t;(t=this.inputRef)===null||t===void 0?void 0:t.focus()}))}adjustScrollPosition(){var t;const e=(t=this.el)===null||t===void 0?void 0:t.querySelector(`[data-selected]`);if(!e)return;e.scrollIntoView({block:"center"})}selectItem(t){if(this.filteredData[t]){this.isItemSelected=true;this.comboboxValueChange.emit({key:"select",data:this.filteredData[t].id});this.inputValue="";this.resetCombobox();if(this.autoFocus){this.focusInput()}}}debounceFetchData(){clearTimeout(this.debounceTimer);this.debounceTimer=setTimeout((()=>{this.fetchData()}),this.duration)}handleFocus(){this.isComboBoxVisible=true}resetCombobox(t=true){var e;if(t){(e=this.inputRef)===null||e===void 0?void 0:e.blur()}this.selectedIndex=-1;this.isComboBoxVisible=false}async fetchData(){try{this.isLoading=true;this.filteredData=this.data.filter((t=>t.name.toLowerCase().startsWith(this.inputValue)));this.selectedIndex=-1}catch(t){console.log("error",t)}finally{this.isLoading=false}}handleInputChange(t){this.inputValue=t.target.value;if(this.inputValue){this.debounceFetchData()}else{this.filteredData=this.data}}handleBlur(){this.blurTimeout=setTimeout((()=>{if(!this.isItemSelected){this.inputValue="";this.resetCombobox()}else{this.isItemSelected=false}}),300)}handleItemKeyDown(t,e){var i;if(t.key==="Enter"||t.key===" "||t.key==="ArrowRight"){this.selectItem(e);t.preventDefault()}else if(t.key==="Escape"){this.isComboBoxVisible=false;(i=this.inputRef)===null||i===void 0?void 0:i.blur();t.preventDefault()}}renderDropdown(){var t;if(!this.isComboBoxVisible){return null}return e("ul",{"data-position":this.filteredData.length>0&&this.filteredData[0].occupancy?"bottom-right":"bottom-left"},(t=this.filteredData)===null||t===void 0?void 0:t.map(((t,i)=>e("li",{onMouseEnter:()=>this.selectedIndex=i,role:"button",key:t.id,onKeyDown:t=>this.handleItemKeyDown(t,i),"data-selected":this.selectedIndex===i,tabIndex:0,onClick:()=>this.selectItem(i)},t.image&&e("img",{src:t.image,class:"list-item-image"}),e("p",null,t.name),t.occupancy&&e(r,null,e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},e("path",{fill:"currentColor",d:"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"})),e("p",null,t.occupancy))))),this.filteredData.length===0&&!this.isLoading&&e("span",{class:"text-center"},b.entries.Lcz_NoResultsFound))}handleSubmit(t){t.preventDefault();t.stopPropagation();console.log("object");if(!this.filteredData.length){return}this.selectItem(this.selectedIndex===-1?0:this.selectedIndex)}render(){return e("form",{key:"393ae8303e0f0427aabca029a5b891b8233af183",onSubmit:this.handleSubmit.bind(this),class:"m-0 p-0"},e("input",{key:"d2e9f369f03e8abebec6e26ce0154af553988938",type:"text",class:"form-control bg-white",id:this.input_id,ref:t=>this.inputRef=t,disabled:this.disabled,value:this.value,placeholder:this.placeholder,onKeyDown:this.handleKeyDown.bind(this),onBlur:this.handleBlur.bind(this),onInput:this.handleInputChange.bind(this),onFocus:this.handleFocus.bind(this),autoFocus:this.autoFocus}),this.renderDropdown())}get el(){return a(this)}static get watchers(){return{isComboBoxVisible:["watchHandler"]}}};ee.style=te;const ie=[{isCSS:true,link:"https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i%7CQuicksand:300,400,500,700"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/bootstrap.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/bootstrap-extended.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/colors.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/core/menu/menu-types/horizontal-menu.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/core/colors/palette-gradient.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/components.css"},{isCSS:true,link:"https://x.igloorooms.com/assets/css/style.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/icheck.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/custom.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/pages/login-register.css"}];const se=class{constructor(e){t(this,e);this.extraResources="";this.resources=ie}componentWillLoad(){this.parseRefs()}componentDidLoad(){this.initializeStyles()}hrefsChanged(){this.parseRefs();this.initializeStyles()}parseRefs(){if(this.extraResources!=="")this.resources.push(JSON.parse(this.extraResources))}appendTag(t,e){const i=document.createElement(t);const s=[];Object.keys(e).forEach((t=>{i.setAttribute(t,e[t]);s.push(`[${t}="${e[t]}"]`)}));const r=`${t}${s.join("")}`;const a=document.querySelector(r);if(!a){document.head.appendChild(i)}}initializeStyles(){this.resources.forEach((t=>{if(t.isCSS){this.appendTag("link",{href:t.link,rel:"stylesheet",type:"text/css"})}if(t.isJS){this.appendTag("script",{src:t.link})}}))}render(){return e(i,{key:"ed43117ba979063b0bcfbe62b0fbbb0d76731f45"},e("slot",{key:"72d043bd3b1cc56bfc65ce4389a0c97912f6e8ca"}))}static get watchers(){return{extraResources:["hrefsChanged"]}}};const re=".sc-ir-country-picker-h{display:block;margin:0;padding:0;box-sizing:border-box}.combobox-menu.sc-ir-country-picker{max-height:200px;overflow:auto}";const ae=re;const ne=class{constructor(e){t(this,e);this.countryChange=s(this,"countryChange",7);this.countries=[];this.autoValidate=false;this.filteredCountries=[];this.searching=false}componentWillLoad(){this.filteredCountries=[...this.countries];if(this.country){this.inputValue=this.country.name;this.selectedCountry=this.country}}handleCountryChange(t,e){var i;if((t===null||t===void 0?void 0:t.id)!==(e===null||e===void 0?void 0:e.id)){this.inputValue=(i=this.country)===null||i===void 0?void 0:i.name;this.selectedCountry=t}}filterCountries(){if(this.inputValue===""&&this.country){this.selectCountry(null)}clearTimeout(this.debounceTimeout);this.debounceTimeout=setTimeout((()=>{if(!this.inputValue){this.filteredCountries=[...this.countries]}else{this.filteredCountries=this.countries.filter((t=>t.name.toLowerCase().includes(this.inputValue.toLowerCase())))}}),300)}selectCountry(t){this.selectedCountry=t;this.inputValue=t===null||t===void 0?void 0:t.name;this.filteredCountries=[...this.countries];this.countryChange.emit(t)}scrollToSelected(){setTimeout((()=>{const t=document.querySelector(`.dropdown-item.active`);if(t){t.scrollIntoView({behavior:"instant",block:"center"})}}),100)}render(){var t,i,s;const a=this.filteredCountries.length>0&&this.propertyCountry&&(!this.searching||this.searching&&this.inputValue==="");return e("form",{key:"130ef3307e7211e16134e88938e1fe85d5a05b54",class:"dropdown m-0 p-0"},e("ir-input-text",{key:"5d88a35f1b4620a1e853d374fff86f2319cf258f",onTextChange:t=>{if(!this.searching){this.searching=true}this.inputValue=t.detail;this.filterCountries()},testId:this.testId,autoValidate:this.autoValidate,label:this.label,error:this.error,placeholder:"",class:"m-0 p-0",value:this.inputValue,id:"dropdownMenuCombobox","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",onInputFocus:()=>this.scrollToSelected(),onInputBlur:()=>{this.searching=false;if(this.filteredCountries.length>0&&this.inputValue&&this.inputValue.trim()!==""){this.selectCountry(this.filteredCountries[0])}}}),e("div",{key:"53d7b639a1e8ee004450f9c22450d68ae8936b9a",class:"dropdown-menu combobox-menu","aria-labelledby":"dropdownMenuCombobox"},a&&e(r,{key:"0553b70bf9923bcf2a420dc28c306668cd13ef09"},e("button",{key:"d94687496218233030fd6ad21af73e192c1771f9",type:"button",class:`dropdown-item d-flex align-items-center ${((t=this.selectedCountry)===null||t===void 0?void 0:t.id)===this.propertyCountry.id?"active":""}`,onClick:()=>{this.selectCountry(this.propertyCountry)}},e("img",{key:"7d1488a887c489a201ed2e68083abaa5ccc53903",src:this.propertyCountry.flag,alt:this.propertyCountry.name,style:{aspectRatio:"1",height:"15px",borderRadius:"4px"}}),e("p",{key:"a59415d09cd1ac07cf5701f555f83af4d85189d7",class:"pl-1 m-0"},this.propertyCountry.name)),e("div",{key:"2073a59d17d3138dafca0f8388ed0e1eaaea38ef",class:"dropdown-divider"})),(i=this.filteredCountries)===null||i===void 0?void 0:i.map((t=>{var i;return e("button",{key:t.id,type:"button",class:`dropdown-item d-flex align-items-center ${((i=this.selectedCountry)===null||i===void 0?void 0:i.id)===t.id?"active":""}`,onClick:()=>{this.selectCountry(t)}},e("img",{src:t.flag,alt:t.name,style:{aspectRatio:"1",height:"15px",borderRadius:"4px"}}),e("p",{class:"pl-1 m-0"},t.name))})),((s=this.filteredCountries)===null||s===void 0?void 0:s.length)===0&&e("p",{key:"73240dbbb640a4025639d8c7922e0fa53e933f51",class:"dropdown-item-text"},"Invalid Country")))}static get watchers(){return{country:["handleCountryChange"]}}};ne.style=ae;var oe="top";var le="bottom";var ce="right";var he="left";var de="auto";var ue=[oe,le,ce,he];var pe="start";var fe="end";var be="clippingParents";var me="viewport";var ge="popper";var ve="reference";var ye=ue.reduce((function(t,e){return t.concat([e+"-"+pe,e+"-"+fe])}),[]);var ke=[].concat(ue,[de]).reduce((function(t,e){return t.concat([e,e+"-"+pe,e+"-"+fe])}),[]);var xe="beforeRead";var we="read";var _e="afterRead";var De="beforeMain";var Ce="main";var Oe="afterMain";var Ae="beforeWrite";var Be="write";var Me="afterWrite";var Ee=[xe,we,_e,De,Ce,Oe,Ae,Be,Me];function Se(t){return t?(t.nodeName||"").toLowerCase():null}function Ie(t){if(t==null){return window}if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e?e.defaultView||window:window}return t}function Te(t){var e=Ie(t).Element;return t instanceof e||t instanceof Element}function Fe(t){var e=Ie(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function je(t){if(typeof ShadowRoot==="undefined"){return false}var e=Ie(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Ye(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var i=e.styles[t]||{};var s=e.attributes[t]||{};var r=e.elements[t];if(!Fe(r)||!Se(r)){return}Object.assign(r.style,i);Object.keys(s).forEach((function(t){var e=s[t];if(e===false){r.removeAttribute(t)}else{r.setAttribute(t,e===true?"":e)}}))}))}function $e(t){var e=t.state;var i={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(e.elements.popper.style,i.popper);e.styles=i;if(e.elements.arrow){Object.assign(e.elements.arrow.style,i.arrow)}return function(){Object.keys(e.elements).forEach((function(t){var s=e.elements[t];var r=e.attributes[t]||{};var a=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:i[t]);var n=a.reduce((function(t,e){t[e]="";return t}),{});if(!Fe(s)||!Se(s)){return}Object.assign(s.style,n);Object.keys(r).forEach((function(t){s.removeAttribute(t)}))}))}}const ze={name:"applyStyles",enabled:true,phase:"write",fn:Ye,effect:$e,requires:["computeStyles"]};function Ne(t){return t.split("-")[0]}var Re=Math.max;var Le=Math.min;var Pe=Math.round;function Ve(){var t=navigator.userAgentData;if(t!=null&&t.brands&&Array.isArray(t.brands)){return t.brands.map((function(t){return t.brand+"/"+t.version})).join(" ")}return navigator.userAgent}function He(){return!/^((?!chrome|android).)*safari/i.test(Ve())}function Ge(t,e,i){if(e===void 0){e=false}if(i===void 0){i=false}var s=t.getBoundingClientRect();var r=1;var a=1;if(e&&Fe(t)){r=t.offsetWidth>0?Pe(s.width)/t.offsetWidth||1:1;a=t.offsetHeight>0?Pe(s.height)/t.offsetHeight||1:1}var n=Te(t)?Ie(t):window,o=n.visualViewport;var l=!He()&&i;var c=(s.left+(l&&o?o.offsetLeft:0))/r;var h=(s.top+(l&&o?o.offsetTop:0))/a;var d=s.width/r;var u=s.height/a;return{width:d,height:u,top:h,right:c+d,bottom:h+u,left:c,x:c,y:h}}function Ue(t){var e=Ge(t);var i=t.offsetWidth;var s=t.offsetHeight;if(Math.abs(e.width-i)<=1){i=e.width}if(Math.abs(e.height-s)<=1){s=e.height}return{x:t.offsetLeft,y:t.offsetTop,width:i,height:s}}function Ke(t,e){var i=e.getRootNode&&e.getRootNode();if(t.contains(e)){return true}else if(i&&je(i)){var s=e;do{if(s&&t.isSameNode(s)){return true}s=s.parentNode||s.host}while(s)}return false}function We(t){return Ie(t).getComputedStyle(t)}function qe(t){return["table","td","th"].indexOf(Se(t))>=0}function Je(t){return((Te(t)?t.ownerDocument:t.document)||window.document).documentElement}function Xe(t){if(Se(t)==="html"){return t}return t.assignedSlot||t.parentNode||(je(t)?t.host:null)||Je(t)}function Ze(t){if(!Fe(t)||We(t).position==="fixed"){return null}return t.offsetParent}function Qe(t){var e=/firefox/i.test(Ve());var i=/Trident/i.test(Ve());if(i&&Fe(t)){var s=We(t);if(s.position==="fixed"){return null}}var r=Xe(t);if(je(r)){r=r.host}while(Fe(r)&&["html","body"].indexOf(Se(r))<0){var a=We(r);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none"){return r}else{r=r.parentNode}}return null}function ti(t){var e=Ie(t);var i=Ze(t);while(i&&qe(i)&&We(i).position==="static"){i=Ze(i)}if(i&&(Se(i)==="html"||Se(i)==="body"&&We(i).position==="static")){return e}return i||Qe(t)||e}function ei(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function ii(t,e,i){return Re(t,Le(e,i))}function si(t,e,i){var s=ii(t,e,i);return s>i?i:s}function ri(){return{top:0,right:0,bottom:0,left:0}}function ai(t){return Object.assign({},ri(),t)}function ni(t,e){return e.reduce((function(e,i){e[i]=t;return e}),{})}var oi=function t(e,i){e=typeof e==="function"?e(Object.assign({},i.rects,{placement:i.placement})):e;return ai(typeof e!=="number"?e:ni(e,ue))};function li(t){var e;var i=t.state,s=t.name,r=t.options;var a=i.elements.arrow;var n=i.modifiersData.popperOffsets;var o=Ne(i.placement);var l=ei(o);var c=[he,ce].indexOf(o)>=0;var h=c?"height":"width";if(!a||!n){return}var d=oi(r.padding,i);var u=Ue(a);var p=l==="y"?oe:he;var f=l==="y"?le:ce;var b=i.rects.reference[h]+i.rects.reference[l]-n[l]-i.rects.popper[h];var m=n[l]-i.rects.reference[l];var g=ti(a);var v=g?l==="y"?g.clientHeight||0:g.clientWidth||0:0;var y=b/2-m/2;var k=d[p];var x=v-u[h]-d[f];var w=v/2-u[h]/2+y;var _=ii(k,w,x);var D=l;i.modifiersData[s]=(e={},e[D]=_,e.centerOffset=_-w,e)}function ci(t){var e=t.state,i=t.options;var s=i.element,r=s===void 0?"[data-popper-arrow]":s;if(r==null){return}if(typeof r==="string"){r=e.elements.popper.querySelector(r);if(!r){return}}if(!Ke(e.elements.popper,r)){return}e.elements.arrow=r}const hi={name:"arrow",enabled:true,phase:"main",fn:li,effect:ci,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function di(t){return t.split("-")[1]}var ui={top:"auto",right:"auto",bottom:"auto",left:"auto"};function pi(t,e){var i=t.x,s=t.y;var r=e.devicePixelRatio||1;return{x:Pe(i*r)/r||0,y:Pe(s*r)/r||0}}function fi(t){var e;var i=t.popper,s=t.popperRect,r=t.placement,a=t.variation,n=t.offsets,o=t.position,l=t.gpuAcceleration,c=t.adaptive,h=t.roundOffsets,d=t.isFixed;var u=n.x,p=u===void 0?0:u,f=n.y,b=f===void 0?0:f;var m=typeof h==="function"?h({x:p,y:b}):{x:p,y:b};p=m.x;b=m.y;var g=n.hasOwnProperty("x");var v=n.hasOwnProperty("y");var y=he;var k=oe;var x=window;if(c){var w=ti(i);var _="clientHeight";var D="clientWidth";if(w===Ie(i)){w=Je(i);if(We(w).position!=="static"&&o==="absolute"){_="scrollHeight";D="scrollWidth"}}w=w;if(r===oe||(r===he||r===ce)&&a===fe){k=le;var C=d&&w===x&&x.visualViewport?x.visualViewport.height:w[_];b-=C-s.height;b*=l?1:-1}if(r===he||(r===oe||r===le)&&a===fe){y=ce;var O=d&&w===x&&x.visualViewport?x.visualViewport.width:w[D];p-=O-s.width;p*=l?1:-1}}var A=Object.assign({position:o},c&&ui);var B=h===true?pi({x:p,y:b},Ie(i)):{x:p,y:b};p=B.x;b=B.y;if(l){var M;return Object.assign({},A,(M={},M[k]=v?"0":"",M[y]=g?"0":"",M.transform=(x.devicePixelRatio||1)<=1?"translate("+p+"px, "+b+"px)":"translate3d("+p+"px, "+b+"px, 0)",M))}return Object.assign({},A,(e={},e[k]=v?b+"px":"",e[y]=g?p+"px":"",e.transform="",e))}function bi(t){var e=t.state,i=t.options;var s=i.gpuAcceleration,r=s===void 0?true:s,a=i.adaptive,n=a===void 0?true:a,o=i.roundOffsets,l=o===void 0?true:o;var c={placement:Ne(e.placement),variation:di(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};if(e.modifiersData.popperOffsets!=null){e.styles.popper=Object.assign({},e.styles.popper,fi(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:n,roundOffsets:l})))}if(e.modifiersData.arrow!=null){e.styles.arrow=Object.assign({},e.styles.arrow,fi(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:false,roundOffsets:l})))}e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const mi={name:"computeStyles",enabled:true,phase:"beforeWrite",fn:bi,data:{}};var gi={passive:true};function vi(t){var e=t.state,i=t.instance,s=t.options;var r=s.scroll,a=r===void 0?true:r,n=s.resize,o=n===void 0?true:n;var l=Ie(e.elements.popper);var c=[].concat(e.scrollParents.reference,e.scrollParents.popper);if(a){c.forEach((function(t){t.addEventListener("scroll",i.update,gi)}))}if(o){l.addEventListener("resize",i.update,gi)}return function(){if(a){c.forEach((function(t){t.removeEventListener("scroll",i.update,gi)}))}if(o){l.removeEventListener("resize",i.update,gi)}}}const yi={name:"eventListeners",enabled:true,phase:"write",fn:function t(){},effect:vi,data:{}};var ki={left:"right",right:"left",bottom:"top",top:"bottom"};function xi(t){return t.replace(/left|right|bottom|top/g,(function(t){return ki[t]}))}var wi={start:"end",end:"start"};function _i(t){return t.replace(/start|end/g,(function(t){return wi[t]}))}function Di(t){var e=Ie(t);var i=e.pageXOffset;var s=e.pageYOffset;return{scrollLeft:i,scrollTop:s}}function Ci(t){return Ge(Je(t)).left+Di(t).scrollLeft}function Oi(t,e){var i=Ie(t);var s=Je(t);var r=i.visualViewport;var a=s.clientWidth;var n=s.clientHeight;var o=0;var l=0;if(r){a=r.width;n=r.height;var c=He();if(c||!c&&e==="fixed"){o=r.offsetLeft;l=r.offsetTop}}return{width:a,height:n,x:o+Ci(t),y:l}}function Ai(t){var e;var i=Je(t);var s=Di(t);var r=(e=t.ownerDocument)==null?void 0:e.body;var a=Re(i.scrollWidth,i.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0);var n=Re(i.scrollHeight,i.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0);var o=-s.scrollLeft+Ci(t);var l=-s.scrollTop;if(We(r||i).direction==="rtl"){o+=Re(i.clientWidth,r?r.clientWidth:0)-a}return{width:a,height:n,x:o,y:l}}function Bi(t){var e=We(t),i=e.overflow,s=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(i+r+s)}function Mi(t){if(["html","body","#document"].indexOf(Se(t))>=0){return t.ownerDocument.body}if(Fe(t)&&Bi(t)){return t}return Mi(Xe(t))}function Ei(t,e){var i;if(e===void 0){e=[]}var s=Mi(t);var r=s===((i=t.ownerDocument)==null?void 0:i.body);var a=Ie(s);var n=r?[a].concat(a.visualViewport||[],Bi(s)?s:[]):s;var o=e.concat(n);return r?o:o.concat(Ei(Xe(n)))}function Si(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Ii(t,e){var i=Ge(t,false,e==="fixed");i.top=i.top+t.clientTop;i.left=i.left+t.clientLeft;i.bottom=i.top+t.clientHeight;i.right=i.left+t.clientWidth;i.width=t.clientWidth;i.height=t.clientHeight;i.x=i.left;i.y=i.top;return i}function Ti(t,e,i){return e===me?Si(Oi(t,i)):Te(e)?Ii(e,i):Si(Ai(Je(t)))}function Fi(t){var e=Ei(Xe(t));var i=["absolute","fixed"].indexOf(We(t).position)>=0;var s=i&&Fe(t)?ti(t):t;if(!Te(s)){return[]}return e.filter((function(t){return Te(t)&&Ke(t,s)&&Se(t)!=="body"}))}function ji(t,e,i,s){var r=e==="clippingParents"?Fi(t):[].concat(e);var a=[].concat(r,[i]);var n=a[0];var o=a.reduce((function(e,i){var r=Ti(t,i,s);e.top=Re(r.top,e.top);e.right=Le(r.right,e.right);e.bottom=Le(r.bottom,e.bottom);e.left=Re(r.left,e.left);return e}),Ti(t,n,s));o.width=o.right-o.left;o.height=o.bottom-o.top;o.x=o.left;o.y=o.top;return o}function Yi(t){var e=t.reference,i=t.element,s=t.placement;var r=s?Ne(s):null;var a=s?di(s):null;var n=e.x+e.width/2-i.width/2;var o=e.y+e.height/2-i.height/2;var l;switch(r){case oe:l={x:n,y:e.y-i.height};break;case le:l={x:n,y:e.y+e.height};break;case ce:l={x:e.x+e.width,y:o};break;case he:l={x:e.x-i.width,y:o};break;default:l={x:e.x,y:e.y}}var c=r?ei(r):null;if(c!=null){var h=c==="y"?"height":"width";switch(a){case pe:l[c]=l[c]-(e[h]/2-i[h]/2);break;case fe:l[c]=l[c]+(e[h]/2-i[h]/2);break}}return l}function $i(t,e){if(e===void 0){e={}}var i=e,s=i.placement,r=s===void 0?t.placement:s,a=i.strategy,n=a===void 0?t.strategy:a,o=i.boundary,l=o===void 0?be:o,c=i.rootBoundary,h=c===void 0?me:c,d=i.elementContext,u=d===void 0?ge:d,p=i.altBoundary,f=p===void 0?false:p,b=i.padding,m=b===void 0?0:b;var g=ai(typeof m!=="number"?m:ni(m,ue));var v=u===ge?ve:ge;var y=t.rects.popper;var k=t.elements[f?v:u];var x=ji(Te(k)?k:k.contextElement||Je(t.elements.popper),l,h,n);var w=Ge(t.elements.reference);var _=Yi({reference:w,element:y,strategy:"absolute",placement:r});var D=Si(Object.assign({},y,_));var C=u===ge?D:w;var O={top:x.top-C.top+g.top,bottom:C.bottom-x.bottom+g.bottom,left:x.left-C.left+g.left,right:C.right-x.right+g.right};var A=t.modifiersData.offset;if(u===ge&&A){var B=A[r];Object.keys(O).forEach((function(t){var e=[ce,le].indexOf(t)>=0?1:-1;var i=[oe,le].indexOf(t)>=0?"y":"x";O[t]+=B[i]*e}))}return O}function zi(t,e){if(e===void 0){e={}}var i=e,s=i.placement,r=i.boundary,a=i.rootBoundary,n=i.padding,o=i.flipVariations,l=i.allowedAutoPlacements,c=l===void 0?ke:l;var h=di(s);var d=h?o?ye:ye.filter((function(t){return di(t)===h})):ue;var u=d.filter((function(t){return c.indexOf(t)>=0}));if(u.length===0){u=d}var p=u.reduce((function(e,i){e[i]=$i(t,{placement:i,boundary:r,rootBoundary:a,padding:n})[Ne(i)];return e}),{});return Object.keys(p).sort((function(t,e){return p[t]-p[e]}))}function Ni(t){if(Ne(t)===de){return[]}var e=xi(t);return[_i(t),e,_i(e)]}function Ri(t){var e=t.state,i=t.options,s=t.name;if(e.modifiersData[s]._skip){return}var r=i.mainAxis,a=r===void 0?true:r,n=i.altAxis,o=n===void 0?true:n,l=i.fallbackPlacements,c=i.padding,h=i.boundary,d=i.rootBoundary,u=i.altBoundary,p=i.flipVariations,f=p===void 0?true:p,b=i.allowedAutoPlacements;var m=e.options.placement;var g=Ne(m);var v=g===m;var y=l||(v||!f?[xi(m)]:Ni(m));var k=[m].concat(y).reduce((function(t,i){return t.concat(Ne(i)===de?zi(e,{placement:i,boundary:h,rootBoundary:d,padding:c,flipVariations:f,allowedAutoPlacements:b}):i)}),[]);var x=e.rects.reference;var w=e.rects.popper;var _=new Map;var D=true;var C=k[0];for(var O=0;O<k.length;O++){var A=k[O];var B=Ne(A);var M=di(A)===pe;var E=[oe,le].indexOf(B)>=0;var S=E?"width":"height";var I=$i(e,{placement:A,boundary:h,rootBoundary:d,altBoundary:u,padding:c});var T=E?M?ce:he:M?le:oe;if(x[S]>w[S]){T=xi(T)}var F=xi(T);var j=[];if(a){j.push(I[B]<=0)}if(o){j.push(I[T]<=0,I[F]<=0)}if(j.every((function(t){return t}))){C=A;D=false;break}_.set(A,j)}if(D){var Y=f?3:1;var $=function t(e){var i=k.find((function(t){var i=_.get(t);if(i){return i.slice(0,e).every((function(t){return t}))}}));if(i){C=i;return"break"}};for(var z=Y;z>0;z--){var N=$(z);if(N==="break")break}}if(e.placement!==C){e.modifiersData[s]._skip=true;e.placement=C;e.reset=true}}const Li={name:"flip",enabled:true,phase:"main",fn:Ri,requiresIfExists:["offset"],data:{_skip:false}};function Pi(t,e,i){if(i===void 0){i={x:0,y:0}}return{top:t.top-e.height-i.y,right:t.right-e.width+i.x,bottom:t.bottom-e.height+i.y,left:t.left-e.width-i.x}}function Vi(t){return[oe,ce,le,he].some((function(e){return t[e]>=0}))}function Hi(t){var e=t.state,i=t.name;var s=e.rects.reference;var r=e.rects.popper;var a=e.modifiersData.preventOverflow;var n=$i(e,{elementContext:"reference"});var o=$i(e,{altBoundary:true});var l=Pi(n,s);var c=Pi(o,r,a);var h=Vi(l);var d=Vi(c);e.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:d};e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":d})}const Gi={name:"hide",enabled:true,phase:"main",requiresIfExists:["preventOverflow"],fn:Hi};function Ui(t,e,i){var s=Ne(t);var r=[he,oe].indexOf(s)>=0?-1:1;var a=typeof i==="function"?i(Object.assign({},e,{placement:t})):i,n=a[0],o=a[1];n=n||0;o=(o||0)*r;return[he,ce].indexOf(s)>=0?{x:o,y:n}:{x:n,y:o}}function Ki(t){var e=t.state,i=t.options,s=t.name;var r=i.offset,a=r===void 0?[0,0]:r;var n=ke.reduce((function(t,i){t[i]=Ui(i,e.rects,a);return t}),{});var o=n[e.placement],l=o.x,c=o.y;if(e.modifiersData.popperOffsets!=null){e.modifiersData.popperOffsets.x+=l;e.modifiersData.popperOffsets.y+=c}e.modifiersData[s]=n}const Wi={name:"offset",enabled:true,phase:"main",requires:["popperOffsets"],fn:Ki};function qi(t){var e=t.state,i=t.name;e.modifiersData[i]=Yi({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Ji={name:"popperOffsets",enabled:true,phase:"read",fn:qi,data:{}};function Xi(t){return t==="x"?"y":"x"}function Zi(t){var e=t.state,i=t.options,s=t.name;var r=i.mainAxis,a=r===void 0?true:r,n=i.altAxis,o=n===void 0?false:n,l=i.boundary,c=i.rootBoundary,h=i.altBoundary,d=i.padding,u=i.tether,p=u===void 0?true:u,f=i.tetherOffset,b=f===void 0?0:f;var m=$i(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:h});var g=Ne(e.placement);var v=di(e.placement);var y=!v;var k=ei(g);var x=Xi(k);var w=e.modifiersData.popperOffsets;var _=e.rects.reference;var D=e.rects.popper;var C=typeof b==="function"?b(Object.assign({},e.rects,{placement:e.placement})):b;var O=typeof C==="number"?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C);var A=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null;var B={x:0,y:0};if(!w){return}if(a){var M;var E=k==="y"?oe:he;var S=k==="y"?le:ce;var I=k==="y"?"height":"width";var T=w[k];var F=T+m[E];var j=T-m[S];var Y=p?-D[I]/2:0;var $=v===pe?_[I]:D[I];var z=v===pe?-D[I]:-_[I];var N=e.elements.arrow;var R=p&&N?Ue(N):{width:0,height:0};var L=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:ri();var P=L[E];var V=L[S];var H=ii(0,_[I],R[I]);var G=y?_[I]/2-Y-H-P-O.mainAxis:$-H-P-O.mainAxis;var U=y?-_[I]/2+Y+H+V+O.mainAxis:z+H+V+O.mainAxis;var K=e.elements.arrow&&ti(e.elements.arrow);var W=K?k==="y"?K.clientTop||0:K.clientLeft||0:0;var q=(M=A==null?void 0:A[k])!=null?M:0;var J=T+G-q-W;var X=T+U-q;var Z=ii(p?Le(F,J):F,T,p?Re(j,X):j);w[k]=Z;B[k]=Z-T}if(o){var Q;var tt=k==="x"?oe:he;var et=k==="x"?le:ce;var it=w[x];var st=x==="y"?"height":"width";var rt=it+m[tt];var at=it-m[et];var nt=[oe,he].indexOf(g)!==-1;var ot=(Q=A==null?void 0:A[x])!=null?Q:0;var lt=nt?rt:it-_[st]-D[st]-ot+O.altAxis;var ct=nt?it+_[st]+D[st]-ot-O.altAxis:at;var ht=p&&nt?si(lt,it,ct):ii(p?lt:rt,it,p?ct:at);w[x]=ht;B[x]=ht-it}e.modifiersData[s]=B}const Qi={name:"preventOverflow",enabled:true,phase:"main",fn:Zi,requiresIfExists:["offset"]};function ts(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function es(t){if(t===Ie(t)||!Fe(t)){return Di(t)}else{return ts(t)}}function is(t){var e=t.getBoundingClientRect();var i=Pe(e.width)/t.offsetWidth||1;var s=Pe(e.height)/t.offsetHeight||1;return i!==1||s!==1}function ss(t,e,i){if(i===void 0){i=false}var s=Fe(e);var r=Fe(e)&&is(e);var a=Je(e);var n=Ge(t,r,i);var o={scrollLeft:0,scrollTop:0};var l={x:0,y:0};if(s||!s&&!i){if(Se(e)!=="body"||Bi(a)){o=es(e)}if(Fe(e)){l=Ge(e,true);l.x+=e.clientLeft;l.y+=e.clientTop}else if(a){l.x=Ci(a)}}return{x:n.left+o.scrollLeft-l.x,y:n.top+o.scrollTop-l.y,width:n.width,height:n.height}}function rs(t){var e=new Map;var i=new Set;var s=[];t.forEach((function(t){e.set(t.name,t)}));function r(t){i.add(t.name);var a=[].concat(t.requires||[],t.requiresIfExists||[]);a.forEach((function(t){if(!i.has(t)){var s=e.get(t);if(s){r(s)}}}));s.push(t)}t.forEach((function(t){if(!i.has(t.name)){r(t)}}));return s}function as(t){var e=rs(t);return Ee.reduce((function(t,i){return t.concat(e.filter((function(t){return t.phase===i})))}),[])}function ns(t){var e;return function(){if(!e){e=new Promise((function(i){Promise.resolve().then((function(){e=undefined;i(t())}))}))}return e}}function os(t){var e=t.reduce((function(t,e){var i=t[e.name];t[e.name]=i?Object.assign({},i,e,{options:Object.assign({},i.options,e.options),data:Object.assign({},i.data,e.data)}):e;return t}),{});return Object.keys(e).map((function(t){return e[t]}))}var ls={placement:"bottom",modifiers:[],strategy:"absolute"};function cs(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++){e[i]=arguments[i]}return!e.some((function(t){return!(t&&typeof t.getBoundingClientRect==="function")}))}function hs(t){if(t===void 0){t={}}var e=t,i=e.defaultModifiers,s=i===void 0?[]:i,r=e.defaultOptions,a=r===void 0?ls:r;return function t(e,i,r){if(r===void 0){r=a}var n={placement:"bottom",orderedModifiers:[],options:Object.assign({},ls,a),modifiersData:{},elements:{reference:e,popper:i},attributes:{},styles:{}};var o=[];var l=false;var c={state:n,setOptions:function t(r){var o=typeof r==="function"?r(n.options):r;d();n.options=Object.assign({},a,n.options,o);n.scrollParents={reference:Te(e)?Ei(e):e.contextElement?Ei(e.contextElement):[],popper:Ei(i)};var l=as(os([].concat(s,n.options.modifiers)));n.orderedModifiers=l.filter((function(t){return t.enabled}));h();return c.update()},forceUpdate:function t(){if(l){return}var e=n.elements,i=e.reference,s=e.popper;if(!cs(i,s)){return}n.rects={reference:ss(i,ti(s),n.options.strategy==="fixed"),popper:Ue(s)};n.reset=false;n.placement=n.options.placement;n.orderedModifiers.forEach((function(t){return n.modifiersData[t.name]=Object.assign({},t.data)}));for(var r=0;r<n.orderedModifiers.length;r++){if(n.reset===true){n.reset=false;r=-1;continue}var a=n.orderedModifiers[r],o=a.fn,h=a.options,d=h===void 0?{}:h,u=a.name;if(typeof o==="function"){n=o({state:n,options:d,name:u,instance:c})||n}}},update:ns((function(){return new Promise((function(t){c.forceUpdate();t(n)}))})),destroy:function t(){d();l=true}};if(!cs(e,i)){return c}c.setOptions(r).then((function(t){if(!l&&r.onFirstUpdate){r.onFirstUpdate(t)}}));function h(){n.orderedModifiers.forEach((function(t){var e=t.name,i=t.options,s=i===void 0?{}:i,r=t.effect;if(typeof r==="function"){var a=r({state:n,name:e,instance:c,options:s});var l=function t(){};o.push(a||l)}}))}function d(){o.forEach((function(t){return t()}));o=[]}return c}}var ds=[yi,Ji,mi,ze,Wi,Li,Qi,hi,Gi];var us=hs({defaultModifiers:ds});var ps={exports:{}};(function(t,e){!function(e,i){t.exports=i()}(V,(function(){return function(){var t={d:function(e,i){for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},e={};t.d(e,{default:function(){return P}});var i={days:"days",months:"months",years:"years",day:"day",month:"month",year:"year",eventChangeViewDate:"changeViewDate",eventChangeCurrentView:"changeCurrentView",eventChangeFocusDate:"changeFocusDate",eventChangeSelectedDate:"changeSelectedDate",eventChangeTime:"changeTime",eventChangeLastSelectedDate:"changeLastSelectedDate",actionSelectDate:"selectDate",actionUnselectDate:"unselectDate",cssClassWeekend:"-weekend-"},s={classes:"",inline:!1,locale:{days:["","","","","","",""],daysShort:["","","","","","",""],daysMin:["","","","","","",""],months:["","","","","","","","","","","",""],monthsShort:["","","","","","","","","","","",""],today:"",clear:"",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1},startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"T",toggleSelected:!0,keyboardNav:!0,selectedDates:!1,container:"",isMobile:!1,visible:!1,position:"bottom left",offset:12,view:i.days,minView:i.days,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:", ",range:!1,dynamicRange:!0,buttons:!1,monthsField:"monthsShort",showEvent:"focus",autoClose:!1,fixedHeight:!1,prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:!1,onChangeViewDate:!1,onChangeView:!1,onRenderCell:!1,onShow:!1,onHide:!1,onClickDayName:!1};function r(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return"string"==typeof t?e.querySelector(t):t}function a(){let{tagName:t="div",className:e="",innerHtml:i="",id:s="",attrs:r={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=document.createElement(t);return e&&a.classList.add(...e.split(" ")),s&&(a.id=s),i&&(a.innerHTML=i),r&&n(a,r),a}function n(t,e){for(let[i,s]of Object.entries(e))void 0!==s&&t.setAttribute(i,s);return t}function o(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()}function l(t){let e=t.getHours(),{hours:i,dayPeriod:s}=c(e);return{year:t.getFullYear(),month:t.getMonth(),fullMonth:t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,date:t.getDate(),fullDate:t.getDate()<10?"0"+t.getDate():t.getDate(),day:t.getDay(),hours:e,fullHours:h(e),hours12:i,dayPeriod:s,fullHours12:h(i),minutes:t.getMinutes(),fullMinutes:t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()}}function c(t){return{dayPeriod:t>11?"pm":"am",hours:t%12==0?12:t%12}}function h(t){return t<10?"0"+t:t}function d(t){let e=10*Math.floor(t.getFullYear()/10);return[e,e+9]}function u(){let t=[];for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return i.forEach((e=>{if("object"==typeof e)for(let i in e)e[i]&&t.push(i);else e&&t.push(e)})),t.join(" ")}function p(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.days;if(!t||!e)return!1;let r=l(t),a=l(e);return{[i.days]:r.date===a.date&&r.month===a.month&&r.year===a.year,[i.months]:r.month===a.month&&r.year===a.year,[i.years]:r.year===a.year}[s]}function f(t,e,i){let s=m(t,!1).getTime(),r=m(e,!1).getTime();return i?s>=r:s>r}function b(t,e){return!f(t,e,!0)}function m(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=new Date(t.getTime());return"boolean"!=typeof e||e||function(t){t.setHours(0,0,0,0)}(i),i}function g(t,e,i){t.length?t.forEach((t=>{t.addEventListener(e,i)})):t.addEventListener(e,i)}function v(t,e){return!(!t||t===document||t instanceof DocumentFragment)&&(t.matches(e)?t:v(t.parentNode,e))}function y(t,e,i){return t>i?i:t<e?e:t}function k(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];return i.filter((t=>t)).forEach((e=>{for(let[i,s]of Object.entries(e))if(void 0!==s&&"[object Object]"===s.toString()){let e=void 0!==t[i]?t[i].toString():void 0,r=s.toString(),a=Array.isArray(s)?[]:{};t[i]=t[i]?e!==r?a:t[i]:a,k(t[i],s)}else t[i]=s})),t}function x(t){let e=t;return t instanceof Date||("string"==typeof t&&/^\d{4}-\d{2}-\d{2}$/.test(t)&&(t+="T00:00:00"),e=new Date(t)),isNaN(e.getTime())&&(console.log(`Unable to convert value "${t}" to Date object`),e=!1),e}function w(t){let e="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+e+")("+t+")($|<|"+e+")","g")}function _(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class D{constructor(){let{type:t,date:e,dp:i,opts:s,body:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_(this,"focus",(()=>{this.$cell.classList.add("-focus-"),this.focused=!0})),_(this,"removeFocus",(()=>{this.$cell.classList.remove("-focus-"),this.focused=!1})),_(this,"select",(()=>{this.$cell.classList.add("-selected-"),this.selected=!0})),_(this,"removeSelect",(()=>{this.$cell.classList.remove("-selected-","-range-from-","-range-to-"),this.selected=!1})),_(this,"onChangeSelectedDate",(()=>{this.isDisabled||(this._handleSelectedStatus(),this.opts.range&&this._handleRangeStatus())})),_(this,"onChangeFocusDate",(t=>{if(!t)return void(this.focused&&this.removeFocus());let e=p(t,this.date,this.type);e?this.focus():!e&&this.focused&&this.removeFocus(),this.opts.range&&this._handleRangeStatus()})),_(this,"render",(()=>(this.$cell.innerHTML=this._getHtml(),this._handleClasses(),this.$cell))),this.type=t,this.singleType=this.type.slice(0,-1),this.date=e,this.dp=i,this.opts=s,this.body=r,this.customData=!1,this.init()}init(){var t;let{onRenderCell:e}=this.opts;e&&(this.customData=e({date:this.date,cellType:this.singleType,datepicker:this.dp})),this._createElement(),this._bindDatepickerEvents(),null!==(t=this.customData)&&void 0!==t&&t.disabled&&this.dp.disableDate(this.date)}_bindDatepickerEvents(){this.dp.on(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(i.eventChangeFocusDate,this.onChangeFocusDate)}unbindDatepickerEvents(){this.dp.off(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(i.eventChangeFocusDate,this.onChangeFocusDate)}_createElement(){var t;let{year:e,month:i,date:s}=l(this.date),r=(null===(t=this.customData)||void 0===t?void 0:t.attrs)||{};this.$cell=a({attrs:{"data-year":e,"data-month":i,"data-date":s,...r}}),this.$cell.adpCell=this}_getClassName(){var t;let e=new Date,{selectOtherMonths:s,selectOtherYears:r}=this.opts,{minDate:a,maxDate:n,isDateDisabled:o}=this.dp,{day:c}=l(this.date),h=this._isOutOfMinMaxRange(),d=o(this.date),f=u("air-datepicker-cell",`-${this.singleType}-`,{"-current-":p(e,this.date,this.type),"-min-date-":a&&p(a,this.date,this.type),"-max-date-":n&&p(n,this.date,this.type)}),b="";switch(this.type){case i.days:b=u({"-weekend-":this.dp.isWeekend(c),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!s||h||d});break;case i.months:b=u({"-disabled-":h});break;case i.years:b=u({"-other-decade-":this.isOtherDecade,"-disabled-":h||this.isOtherDecade&&!r})}return u(f,b,null===(t=this.customData)||void 0===t?void 0:t.classes).split(" ")}_getHtml(){var t;let{year:e,month:s,date:r}=l(this.date),{showOtherMonths:a,showOtherYears:n}=this.opts;if(null!==(t=this.customData)&&void 0!==t&&t.html)return this.customData.html;switch(this.type){case i.days:return!a&&this.isOtherMonth?"":r;case i.months:return this.dp.locale[this.opts.monthsField][s];case i.years:return!n&&this.isOtherDecade?"":e}}_isOutOfMinMaxRange(){let{minDate:t,maxDate:e}=this.dp,{type:s,date:r}=this,{month:a,year:n,date:o}=l(r),c=s===i.days,h=s===i.years,d=!!t&&new Date(n,h?t.getMonth():a,c?o:t.getDate()),u=!!e&&new Date(n,h?e.getMonth():a,c?o:e.getDate());return t&&e?b(d,t)||f(u,e):t?b(d,t):e?f(u,e):void 0}destroy(){this.unbindDatepickerEvents()}_handleRangeStatus(){const{selectedDates:t,focusDate:e,rangeDateTo:i,rangeDateFrom:s}=this.dp,r=t.length;if(!r)return;let a=s,n=i;if(1===r&&e){const i=f(e,t[0]);a=i?t[0]:e,n=i?e:t[0]}let o=u({"-in-range-":a&&n&&(l=this.date,c=a,h=n,f(l,c)&&b(l,h)),"-range-from-":a&&p(this.date,a,this.type),"-range-to-":n&&p(this.date,n,this.type)});var l,c,h;this.$cell.classList.remove("-range-from-","-range-to-","-in-range-"),o&&this.$cell.classList.add(...o.split(" "))}_handleSelectedStatus(){let t=this.dp._checkIfDateIsSelected(this.date,this.type);t?this.select():!t&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){p(this.dp.focusDate,this.date,this.type)&&this.focus()}_handleClasses(){this.$cell.setAttribute("class",""),this._handleInitialFocusStatus(),this.dp.hasSelectedDates&&(this._handleSelectedStatus(),this.dp.opts.range&&this._handleRangeStatus()),this.$cell.classList.add(...this._getClassName())}get isDisabled(){return this.$cell.matches(".-disabled-")}get isOtherMonth(){return this.dp.isOtherMonth(this.date)}get isOtherDecade(){return this.dp.isOtherDecade(this.date)}}function C(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}let O={[i.days]:`<div class="air-datepicker-body--day-names"></div><div class="air-datepicker-body--cells -${i.days}-"></div>`,[i.months]:`<div class="air-datepicker-body--cells -${i.months}-"></div>`,[i.years]:`<div class="air-datepicker-body--cells -${i.years}-"></div>`};const A=".air-datepicker-cell";class B{constructor(t){let{dp:e,type:s,opts:r}=t;C(this,"handleClick",(t=>{let e=t.target.closest(A).adpCell;if(e.isDisabled)return;if(!this.dp.isMinViewReached)return void this.dp.down();let i=this.dp._checkIfDateIsSelected(e.date,e.type);i?this.dp._handleAlreadySelectedDates(i,e.date):this.dp.selectDate(e.date)})),C(this,"handleDayNameClick",(t=>{let e=t.target.getAttribute("data-day-index");this.opts.onClickDayName({dayIndex:Number(e),datepicker:this.dp})})),C(this,"onChangeCurrentView",(t=>{t!==this.type?this.hide():(this.show(),this.render())})),C(this,"onMouseOverCell",(t=>{let e=v(t.target,A);this.dp.setFocusDate(!!e&&e.adpCell.date)})),C(this,"onMouseOutCell",(()=>{this.dp.setFocusDate(!1)})),C(this,"onClickBody",(t=>{let{onClickDayName:e}=this.opts,i=t.target;i.closest(A)&&this.handleClick(t),e&&i.closest(".air-datepicker-body--day-name")&&this.handleDayNameClick(t)})),C(this,"onMouseDown",(t=>{this.pressed=!0;let e=v(t.target,A),i=e&&e.adpCell;p(i.date,this.dp.rangeDateFrom)&&(this.rangeFromFocused=!0),p(i.date,this.dp.rangeDateTo)&&(this.rangeToFocused=!0)})),C(this,"onMouseMove",(t=>{if(!this.pressed||!this.dp.isMinViewReached)return;t.preventDefault();let e=v(t.target,A),i=e&&e.adpCell,{selectedDates:s,rangeDateTo:r,rangeDateFrom:a}=this.dp;if(!i||i.isDisabled)return;let{date:n}=i;if(2===s.length){if(this.rangeFromFocused&&!f(n,r)){let{hours:t,minutes:e}=l(a);n.setHours(t),n.setMinutes(e),this.dp.rangeDateFrom=n,this.dp.replaceDate(a,n)}if(this.rangeToFocused&&!b(n,a)){let{hours:t,minutes:e}=l(r);n.setHours(t),n.setMinutes(e),this.dp.rangeDateTo=n,this.dp.replaceDate(r,n)}}})),C(this,"onMouseUp",(()=>{this.pressed=!1,this.rangeFromFocused=!1,this.rangeToFocused=!1})),C(this,"onChangeViewDate",((t,e)=>{if(!this.isVisible)return;let s=d(t),r=d(e);switch(this.dp.currentView){case i.days:if(p(t,e,i.months))return;break;case i.months:if(p(t,e,i.years))return;break;case i.years:if(s[0]===r[0]&&s[1]===r[1])return}this.render()})),C(this,"render",(()=>{this.destroyCells(),this._generateCells(),this.cells.forEach((t=>{this.$cells.appendChild(t.render())}))})),this.dp=e,this.type=s,this.opts=r,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.type===i.days&&this.renderDayNames(),this.render(),this._bindEvents(),this._bindDatepickerEvents()}_bindEvents(){let{range:t,dynamicRange:e}=this.opts;g(this.$el,"mouseover",this.onMouseOverCell),g(this.$el,"mouseout",this.onMouseOutCell),g(this.$el,"click",this.onClickBody),t&&e&&(g(this.$el,"mousedown",this.onMouseDown),g(this.$el,"mousemove",this.onMouseMove),g(window.document,"mouseup",this.onMouseUp))}_bindDatepickerEvents(){this.dp.on(i.eventChangeViewDate,this.onChangeViewDate),this.dp.on(i.eventChangeCurrentView,this.onChangeCurrentView)}_buildBaseHtml(){this.$el=a({className:`air-datepicker-body -${this.type}-`,innerHtml:O[this.type]}),this.$names=r(".air-datepicker-body--day-names",this.$el),this.$cells=r(".air-datepicker-body--cells",this.$el)}_getDayNamesHtml(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dp.locale.firstDay,e="",s=this.dp.isWeekend,{onClickDayName:r}=this.opts,a=t,n=0;for(;n<7;){let t=a%7;e+=`<div class="${u("air-datepicker-body--day-name",{[i.cssClassWeekend]:s(t),"-clickable-":!!r})}" data-day-index='${t}'>${this.dp.locale.daysMin[t]}</div>`,n++,a++}return e}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCell(t){let{type:e,dp:i,opts:s}=this;return new D({type:e,dp:i,opts:s,date:t,body:this})}_generateCells(){B.getDatesFunction(this.type)(this.dp,(t=>{this.cells.push(this._generateCell(t))}))}show(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}hide(){this.isVisible=!1,this.$el.classList.add("-hidden-")}destroyCells(){this.cells.forEach((t=>t.destroy())),this.cells=[],this.$cells.innerHTML=""}destroy(){this.destroyCells(),this.dp.off(i.eventChangeViewDate,this.onChangeViewDate),this.dp.off(i.eventChangeCurrentView,this.onChangeCurrentView)}static getDaysDates(t,e){let{viewDate:i,opts:{fixedHeight:s},locale:{firstDay:r}}=t,a=o(i),{year:n,month:c}=l(i),h=new Date(n,c,1),d=new Date(n,c,a),u=h.getDay()-r,p=6-d.getDay()+r;u=u<0?u+7:u,p=p>6?p-7:p;let f=function(t,e){let{year:i,month:s,date:r}=l(t);return new Date(i,s,r-e)}(h,u),b=a+u+p,m=f.getDate(),{year:g,month:v}=l(f),y=0;s&&(b=42);const k=[];for(;y<b;){let t=new Date(g,v,m+y);e&&e(t),k.push(t),y++}return k}static getMonthsDates(t,e){let{year:i}=t.parsedViewDate,s=0,r=[];for(;s<12;){const t=new Date(i,s);r.push(t),e&&e(t),s++}return r}static getYearsDates(t,e){let i=d(t.viewDate),s=i[0]-1,r=i[1]+1,a=s,n=[];for(;a<=r;){const t=new Date(a,0);n.push(t),e&&e(t),a++}return n}static getDatesFunction(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.days;return{[i.days]:B.getDaysDates,[i.months]:B.getMonthsDates,[i.years]:B.getYearsDates}[t]}}function M(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class E{constructor(t){let{dp:e,opts:i}=t;M(this,"onClickNav",(t=>{let e=v(t.target,".air-datepicker-nav--action");if(!e)return;let i=e.dataset.action;this.dp[i]()})),M(this,"onChangeViewDate",(()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()})),M(this,"onChangeCurrentView",(()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()})),M(this,"onClickNavTitle",(()=>{this.dp.isFinalView||this.dp.up()})),M(this,"update",(()=>{let{prevHtml:t,nextHtml:e}=this.opts;this.$prev.innerHTML=t,this.$next.innerHTML=e,this._resetNavStatus(),this.render(),this.handleNavStatus()})),M(this,"renderDelay",(()=>{setTimeout(this.render)})),M(this,"render",(()=>{this.$title.innerHTML=this._getTitle(),function(t,e){for(let i in e)e[i]?t.classList.add(i):t.classList.remove(i)}(this.$title,{"-disabled-":this.dp.isFinalView})})),this.dp=e,this.opts=i,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDatepickerEvents()}_defineDOM(){this.$title=r(".air-datepicker-nav--title",this.$el),this.$prev=r('[data-action="prev"]',this.$el),this.$next=r('[data-action="next"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav),this.$title.addEventListener("click",this.onClickNavTitle)}_bindDatepickerEvents(){this.dp.on(i.eventChangeViewDate,this.onChangeViewDate),this.dp.on(i.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.on(i.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.on(i.eventChangeTime,this.render))}destroy(){this.dp.off(i.eventChangeViewDate,this.onChangeViewDate),this.dp.off(i.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.off(i.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.off(i.eventChangeTime,this.render))}_createElement(){this.$el=a({tagName:"nav",className:"air-datepicker-nav"})}_getTitle(){let{dp:t,opts:e}=this,i=e.navTitles[t.currentView];return"function"==typeof i?i(t):t.formatDate(t.viewDate,i)}handleNavStatus(){let{disableNavWhenOutOfRange:t}=this.opts,{minDate:e,maxDate:s}=this.dp;if(!e&&!s||!t)return;let{year:r,month:a}=this.dp.parsedViewDate,n=!!e&&l(e),o=!!s&&l(s);switch(this.dp.currentView){case i.days:e&&n.month>=a&&n.year>=r&&this._disableNav("prev"),s&&o.month<=a&&o.year<=r&&this._disableNav("next");break;case i.months:e&&n.year>=r&&this._disableNav("prev"),s&&o.year<=r&&this._disableNav("next");break;case i.years:{let t=d(this.dp.viewDate);e&&n.year>=t[0]&&this._disableNav("prev"),s&&o.year<=t[1]&&this._disableNav("next");break}}}_disableNav(t){r('[data-action="'+t+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){!function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];t.length?t.forEach((t=>{t.classList.remove(...i)})):t.classList.remove(...i)}(this.$el.querySelectorAll(".air-datepicker-nav--action"),"-disabled-")}_buildBaseHtml(){let{prevHtml:t,nextHtml:e}=this.opts;this.$el.innerHTML=`<div class="air-datepicker-nav--action" data-action="prev">${t}</div><div class="air-datepicker-nav--title"></div><div class="air-datepicker-nav--action" data-action="next">${e}</div>`}get isNavIsFunction(){let{navTitles:t}=this.opts;return Object.keys(t).find((e=>"function"==typeof t[e]))}}var S={today:{content:t=>t.locale.today,onClick:t=>t.setViewDate(new Date)},clear:{content:t=>t.locale.clear,onClick:t=>t.clear()}};class I{constructor(t){let{dp:e,opts:i}=t;this.dp=e,this.opts=i,this.init()}init(){this.createElement(),this.render()}createElement(){this.$el=a({className:"air-datepicker-buttons"})}destroy(){this.$el.parentNode.removeChild(this.$el)}clearHtml(){return this.$el.innerHTML="",this}generateButtons(){let{buttons:t}=this.opts;Array.isArray(t)||(t=[t]),t.forEach((t=>{let e=t;"string"==typeof t&&S[t]&&(e=S[t]);let i=this.createButton(e);e.onClick&&this.attachEventToButton(i,e.onClick),this.$el.appendChild(i)}))}attachEventToButton(t,e){t.addEventListener("click",(()=>{e(this.dp)}))}createButton(t){let{content:e,className:i,tagName:s="button",attrs:r={}}=t;return a({tagName:s,innerHtml:`<span tabindex='-1'>${"function"==typeof e?e(this.dp):e}</span>`,className:u("air-datepicker-button",i),attrs:r})}render(){this.generateButtons()}}function T(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class F{constructor(){let{opts:t,dp:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T(this,"toggleTimepickerIsActive",(t=>{this.dp.timepickerIsActive=t})),T(this,"onChangeSelectedDate",(t=>{let{date:e,updateTime:i=!1}=t;e&&(this.setMinMaxTime(e),this.setCurrentTime(!!i&&e),this.addTimeToDate(e))})),T(this,"onChangeLastSelectedDate",(t=>{t&&(this.setTime(t),this.render())})),T(this,"onChangeInputRange",(t=>{let e=t.target;this[e.getAttribute("name")]=e.value,this.updateText(),this.dp.trigger(i.eventChangeTime,{hours:this.hours,minutes:this.minutes})})),T(this,"onMouseEnterLeave",(t=>{let e=t.target.getAttribute("name"),i=this.$minutesText;"hours"===e&&(i=this.$hoursText),i.classList.toggle("-focus-")})),T(this,"onFocus",(()=>{this.toggleTimepickerIsActive(!0)})),T(this,"onBlur",(()=>{this.toggleTimepickerIsActive(!1)})),this.opts=t,this.dp=e;let{timeFormat:s}=this.dp.locale;s&&(s.match(w("h"))||s.match(w("hh")))&&(this.ampm=!0),this.init()}init(){this.setTime(this.dp.lastSelectedDate||this.dp.viewDate),this.createElement(),this.buildHtml(),this.defineDOM(),this.render(),this.bindDatepickerEvents(),this.bindDOMEvents()}bindDatepickerEvents(){this.dp.on(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(i.eventChangeLastSelectedDate,this.onChangeLastSelectedDate)}bindDOMEvents(){let t="input";navigator.userAgent.match(/trident/gi)&&(t="change"),g(this.$ranges,t,this.onChangeInputRange),g(this.$ranges,"mouseenter",this.onMouseEnterLeave),g(this.$ranges,"mouseleave",this.onMouseEnterLeave),g(this.$ranges,"focus",this.onFocus),g(this.$ranges,"mousedown",this.onFocus),g(this.$ranges,"blur",this.onBlur)}createElement(){this.$el=a({className:u("air-datepicker-time",{"-am-pm-":this.dp.ampm})})}destroy(){this.dp.off(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(i.eventChangeLastSelectedDate,this.onChangeLastSelectedDate),this.$el.parentNode.removeChild(this.$el)}buildHtml(){let{ampm:t,hours:e,displayHours:i,minutes:s,minHours:r,minMinutes:a,maxHours:n,maxMinutes:o,dayPeriod:l,opts:{hoursStep:c,minutesStep:d}}=this;this.$el.innerHTML=`<div class="air-datepicker-time--current">   <span class="air-datepicker-time--current-hours">${h(i)}</span>   <span class="air-datepicker-time--current-colon">:</span>   <span class="air-datepicker-time--current-minutes">${h(s)}</span>   `+(t?`<span class='air-datepicker-time--current-ampm'>${l}</span>`:"")+'</div><div class="air-datepicker-time--sliders">   <div class="air-datepicker-time--row">'+`      <input type="range" name="hours" value="${e}" min="${r}" max="${n}" step="${c}"/>   </div>   <div class="air-datepicker-time--row">`+`      <input type="range" name="minutes" value="${s}" min="${a}" max="${o}" step="${d}"/>   </div></div>`}defineDOM(){let t=t=>r(t,this.$el);this.$ranges=this.$el.querySelectorAll('[type="range"]'),this.$hours=t('[name="hours"]'),this.$minutes=t('[name="minutes"]'),this.$hoursText=t(".air-datepicker-time--current-hours"),this.$minutesText=t(".air-datepicker-time--current-minutes"),this.$ampm=t(".air-datepicker-time--current-ampm")}setTime(t){this.setMinMaxTime(t),this.setCurrentTime(t)}addTimeToDate(t){t&&(t.setHours(this.hours),t.setMinutes(this.minutes))}setMinMaxTime(t){if(this.setMinMaxTimeFromOptions(),t){let{minDate:e,maxDate:i}=this.dp;e&&p(t,e)&&this.setMinTimeFromMinDate(e),i&&p(t,i)&&this.setMaxTimeFromMaxDate(i)}}setCurrentTime(t){let{hours:e,minutes:i}=t?l(t):this;this.hours=y(e,this.minHours,this.maxHours),this.minutes=y(i,this.minMinutes,this.maxMinutes)}setMinMaxTimeFromOptions(){let{minHours:t,minMinutes:e,maxHours:i,maxMinutes:s}=this.opts;this.minHours=y(t,0,23),this.minMinutes=y(e,0,59),this.maxHours=y(i,0,23),this.maxMinutes=y(s,0,59)}setMinTimeFromMinDate(t){let{lastSelectedDate:e}=this.dp;this.minHours=t.getHours(),e&&e.getHours()>t.getHours()?this.minMinutes=this.opts.minMinutes:this.minMinutes=t.getMinutes()}setMaxTimeFromMaxDate(t){let{lastSelectedDate:e}=this.dp;this.maxHours=t.getHours(),e&&e.getHours()<t.getHours()?this.maxMinutes=this.opts.maxMinutes:this.maxMinutes=t.getMinutes()}updateSliders(){n(this.$hours,{min:this.minHours,max:this.maxHours}).value=this.hours,n(this.$minutes,{min:this.minMinutes,max:this.maxMinutes}).value=this.minutes}updateText(){this.$hoursText.innerHTML=h(this.displayHours),this.$minutesText.innerHTML=h(this.minutes),this.ampm&&(this.$ampm.innerHTML=this.dayPeriod)}set hours(t){this._hours=t;let{hours:e,dayPeriod:i}=c(t);this.displayHours=this.ampm?e:t,this.dayPeriod=i}get hours(){return this._hours}render(){this.updateSliders(),this.updateText()}}function j(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class Y{constructor(t){let{dp:e,opts:i}=t;j(this,"pressedKeys",new Set),j(this,"hotKeys",new Map([[[["Control","ArrowRight"],["Control","ArrowUp"]],t=>t.month++],[[["Control","ArrowLeft"],["Control","ArrowDown"]],t=>t.month--],[[["Shift","ArrowRight"],["Shift","ArrowUp"]],t=>t.year++],[[["Shift","ArrowLeft"],["Shift","ArrowDown"]],t=>t.year--],[[["Alt","ArrowRight"],["Alt","ArrowUp"]],t=>t.year+=10],[[["Alt","ArrowLeft"],["Alt","ArrowDown"]],t=>t.year-=10],[["Control","Shift","ArrowUp"],(t,e)=>e.up()]])),j(this,"handleHotKey",(t=>{let e=this.hotKeys.get(t),i=l(this.getInitialFocusDate());e(i,this.dp);let{year:s,month:r,date:a}=i,n=o(new Date(s,r));n<a&&(a=n);let c=this.dp.getClampedDate(new Date(s,r,a));this.dp.setFocusDate(c,{viewDateTransition:!0})})),j(this,"isHotKeyPressed",(()=>{let t=!1,e=this.pressedKeys.size,i=t=>this.pressedKeys.has(t);for(let[s]of this.hotKeys){if(t)break;if(Array.isArray(s[0]))s.forEach((r=>{t||e!==r.length||(t=r.every(i)&&s)}));else{if(e!==s.length)continue;t=s.every(i)&&s}}return t})),j(this,"isArrow",(t=>t>=37&&t<=40)),j(this,"onKeyDown",(t=>{let{key:e,which:i}=t,{dp:s,dp:{focusDate:r},opts:a}=this;this.registerKey(e);let n=this.isHotKeyPressed();if(n)return t.preventDefault(),void this.handleHotKey(n);if(this.isArrow(i))return t.preventDefault(),void this.focusNextCell(e);if("Enter"===e){if(s.currentView!==a.minView)return void s.down();if(r){let t=s._checkIfDateIsSelected(r);return void(t?s._handleAlreadySelectedDates(t,r):s.selectDate(r))}}"Escape"===e&&this.dp.hide()})),j(this,"onKeyUp",(t=>{this.removeKey(t.key)})),this.dp=e,this.opts=i,this.init()}init(){this.bindKeyboardEvents()}bindKeyboardEvents(){let{$el:t}=this.dp;t.addEventListener("keydown",this.onKeyDown),t.addEventListener("keyup",this.onKeyUp)}destroy(){let{$el:t}=this.dp;t.removeEventListener("keydown",this.onKeyDown),t.removeEventListener("keyup",this.onKeyUp),this.hotKeys=null,this.pressedKeys=null}getInitialFocusDate(){let{focusDate:t,currentView:e,selectedDates:s,parsedViewDate:{year:r,month:a}}=this.dp,n=t||s[s.length-1];if(!n)switch(e){case i.days:n=new Date(r,a,(new Date).getDate());break;case i.months:n=new Date(r,a,1);break;case i.years:n=new Date(r,0,1)}return n}focusNextCell(t){let e=this.getInitialFocusDate(),{currentView:s}=this.dp,{days:r,months:a,years:n}=i,o=l(e),c=o.year,h=o.month,d=o.date;switch(t){case"ArrowLeft":s===r&&(d-=1),s===a&&(h-=1),s===n&&(c-=1);break;case"ArrowUp":s===r&&(d-=7),s===a&&(h-=3),s===n&&(c-=4);break;case"ArrowRight":s===r&&(d+=1),s===a&&(h+=1),s===n&&(c+=1);break;case"ArrowDown":s===r&&(d+=7),s===a&&(h+=3),s===n&&(c+=4)}let u=this.dp.getClampedDate(new Date(c,h,d));this.dp.setFocusDate(u,{viewDateTransition:!0})}registerKey(t){this.pressedKeys.add(t)}removeKey(t){this.pressedKeys.delete(t)}}let $={on(t,e){this.__events||(this.__events={}),this.__events[t]?this.__events[t].push(e):this.__events[t]=[e]},off(t,e){this.__events&&this.__events[t]&&(this.__events[t]=this.__events[t].filter((t=>t!==e)))},removeAllEvents(){this.__events={}},trigger(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.__events&&this.__events[t]&&this.__events[t].forEach((t=>{t(...i)}))}};function z(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}let N="",R="",L=!1;class P{static buildGlobalContainer(t){L=!0,N=a({className:t,id:t}),r("body").appendChild(N)}constructor(t,e){var n=this;if(z(this,"viewIndexes",[i.days,i.months,i.years]),z(this,"next",(()=>{let{year:t,month:e}=this.parsedViewDate;switch(this.currentView){case i.days:this.setViewDate(new Date(t,e+1,1));break;case i.months:this.setViewDate(new Date(t+1,e,1));break;case i.years:this.setViewDate(new Date(t+10,0,1))}})),z(this,"prev",(()=>{let{year:t,month:e}=this.parsedViewDate;switch(this.currentView){case i.days:this.setViewDate(new Date(t,e-1,1));break;case i.months:this.setViewDate(new Date(t-1,e,1));break;case i.years:this.setViewDate(new Date(t-10,0,1))}})),z(this,"_finishHide",(()=>{this.hideAnimation=!1,this._destroyComponents(),this.$container.removeChild(this.$datepicker)})),z(this,"setPosition",(function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("function"==typeof(t=t||n.opts.position))return void(n.customHide=t({$datepicker:n.$datepicker,$target:n.$el,$pointer:n.$pointer,isViewChange:e,done:n._finishHide}));let i,s,{isMobile:r}=n.opts,a=n.$el.getBoundingClientRect(),o=n.$el.getBoundingClientRect(),l=n.$datepicker.offsetParent,c=n.$el.offsetParent,h=n.$datepicker.getBoundingClientRect(),d=t.split(" "),u=window.scrollY,p=window.scrollX,f=n.opts.offset,b=d[0],m=d[1];if(r)n.$datepicker.style.cssText="left: 50%; top: 50%";else{if(l===c&&l!==document.body&&(o={top:n.$el.offsetTop,left:n.$el.offsetLeft,width:a.width,height:n.$el.offsetHeight},u=0,p=0),l!==c&&l!==document.body){let t=l.getBoundingClientRect();o={top:a.top-t.top,left:a.left-t.left,width:a.width,height:a.height},u=0,p=0}switch(b){case"top":i=o.top-h.height-f;break;case"right":s=o.left+o.width+f;break;case"bottom":i=o.top+o.height+f;break;case"left":s=o.left-h.width-f}switch(m){case"top":i=o.top;break;case"right":s=o.left+o.width-h.width;break;case"bottom":i=o.top+o.height-h.height;break;case"left":s=o.left;break;case"center":/left|right/.test(b)?i=o.top+o.height/2-h.height/2:s=o.left+o.width/2-h.width/2}n.$datepicker.style.cssText=`left: ${s+p}px; top: ${i+u}px`}})),z(this,"_setInputValue",(()=>{let{opts:t,$altField:e,locale:{dateFormat:i}}=this,{altFieldDateFormat:s,altField:r}=t;r&&e&&(e.value=this._getInputValue(s)),this.$el.value=this._getInputValue(i)})),z(this,"_getInputValue",(t=>{let{selectedDates:e,opts:i}=this,{multipleDates:s,multipleDatesSeparator:r}=i;if(!e.length)return"";let a="function"==typeof t,n=a?t(s?e:e[0]):e.map((e=>this.formatDate(e,t)));return n=a?n:n.join(r),n})),z(this,"_checkIfDateIsSelected",(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.days,s=!1;return n.selectedDates.some((i=>{let r=p(t,i,e);return s=r&&i,r})),s})),z(this,"_scheduleCallAfterTransition",(t=>{this._cancelScheduledCall(),t&&t(!1),this._onTransitionEnd=()=>{t&&t(!0)},this.$datepicker.addEventListener("transitionend",this._onTransitionEnd,{once:!0})})),z(this,"_cancelScheduledCall",(()=>{this.$datepicker.removeEventListener("transitionend",this._onTransitionEnd)})),z(this,"setViewDate",(t=>{if(!((t=x(t))instanceof Date))return;if(p(t,this.viewDate))return;let e=this.viewDate;this.viewDate=t;let{onChangeViewDate:s}=this.opts;if(s){let{month:t,year:e}=this.parsedViewDate;s({month:t,year:e,decade:this.curDecade})}this.trigger(i.eventChangeViewDate,t,e)})),z(this,"setFocusDate",(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!t||(t=x(t))instanceof Date)&&(n.focusDate=t,n.trigger(i.eventChangeFocusDate,t,e))})),z(this,"setCurrentView",(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.viewIndexes.includes(t)){if(n.currentView=t,n.elIsInput&&n.visible&&n.setPosition(void 0,!0),n.trigger(i.eventChangeCurrentView,t),!n.views[t]){let e=n.views[t]=new B({dp:n,opts:n.opts,type:t});n.shouldUpdateDOM&&n.$content.appendChild(e.$el)}n.opts.onChangeView&&!e.silent&&n.opts.onChangeView(t)}})),z(this,"_updateLastSelectedDate",(t=>{this.lastSelectedDate=t,this.trigger(i.eventChangeLastSelectedDate,t)})),z(this,"destroy",(()=>{if(this.isDestroyed)return;let{showEvent:t,isMobile:e}=this.opts,i=this.$datepicker.parentNode;i&&i.removeChild(this.$datepicker),this.$el.removeEventListener(t,this._onFocus),this.$el.removeEventListener("blur",this._onBlur),window.removeEventListener("resize",this._onResize),e&&this._removeMobileAttributes(),this.keyboardNav&&this.keyboardNav.destroy(),this.views=null,this.nav=null,this.$datepicker=null,this.opts={},this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDates=[],this.rangeDateFrom=null,this.rangeDateTo=null,this.isDestroyed=!0})),z(this,"update",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=k({},n.opts),{silent:r}=e;k(n.opts,t);let{timepicker:a,buttons:o,range:l,selectedDates:c,isMobile:h}=n.opts,d=n.visible||n.treatAsInline;n._createMinMaxDates(),n._limitViewDateByMaxMinDates(),n._handleLocale(),c&&(n.selectedDates=[],n.selectDate(c,{silent:r})),t.view&&n.setCurrentView(t.view,{silent:r}),n._setInputValue(),s.range&&!l?(n.rangeDateTo=!1,n.rangeDateFrom=!1):!s.range&&l&&n.selectedDates.length&&(n.rangeDateFrom=n.selectedDates[0],n.rangeDateTo=n.selectedDates[1]),s.timepicker&&!a?(d&&n.timepicker.destroy(),n.timepicker=!1,n.$timepicker.parentNode.removeChild(n.$timepicker)):!s.timepicker&&a&&n._addTimepicker(),!s.buttons&&o?n._addButtons():s.buttons&&!o?(n.buttons.destroy(),n.$buttons.parentNode.removeChild(n.$buttons)):d&&s.buttons&&o&&n.buttons.clearHtml().render(),!s.isMobile&&h?(n.treatAsInline||R||n._createMobileOverlay(),n._addMobileAttributes(),n.visible&&n._showMobileOverlay()):s.isMobile&&!h&&(n._removeMobileAttributes(),n.visible&&(R.classList.remove("-active-"),"function"!=typeof n.opts.position&&n.setPosition())),d&&(n.nav.update(),n.views[n.currentView].render(),n.currentView===i.days&&n.views[n.currentView].renderDayNames())})),z(this,"disableDate",((t,e)=>{(Array.isArray(t)?t:[t]).forEach((t=>{let i=x(t);if(!i)return;let s=e?"delete":"add";this.disabledDates[s](this.formatDate(i,"yyyy-MM-dd"));let r=this.getCell(i,this.currentViewSingular);r&&r.adpCell.render()}),[])})),z(this,"enableDate",(t=>{this.disableDate(t,!0)})),z(this,"isDateDisabled",(t=>{let e=x(t);return this.disabledDates.has(this.formatDate(e,"yyyy-MM-dd"))})),z(this,"isOtherMonth",(t=>{let{month:e}=l(t);return e!==this.parsedViewDate.month})),z(this,"isOtherYear",(t=>{let{year:e}=l(t);return e!==this.parsedViewDate.year})),z(this,"isOtherDecade",(t=>{let{year:e}=l(t),[i,s]=d(this.viewDate);return e<i||e>s})),z(this,"_onChangeSelectedDate",(t=>{let{silent:e}=t;setTimeout((()=>{this._setInputValue(),this.opts.onSelect&&!e&&this._triggerOnSelect()}))})),z(this,"_onChangeFocusedDate",(function(t){let{viewDateTransition:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return;let i=!1;e&&(i=n.isOtherMonth(t)||n.isOtherYear(t)||n.isOtherDecade(t)),i&&n.setViewDate(t),n.opts.onFocus&&n.opts.onFocus({datepicker:n,date:t})})),z(this,"_onChangeTime",(t=>{let{hours:e,minutes:i}=t,s=new Date,{lastSelectedDate:r,opts:{onSelect:a}}=this,n=r;r||(n=s);let o=this.getCell(n,this.currentViewSingular),l=o&&o.adpCell;l&&l.isDisabled||(n.setHours(e),n.setMinutes(i),r?(this._setInputValue(),a&&this._triggerOnSelect()):this.selectDate(n))})),z(this,"_onFocus",(t=>{this.visible||this.show()})),z(this,"_onBlur",(t=>{this.inFocus||!this.visible||this.opts.isMobile||this.hide()})),z(this,"_onMouseDown",(t=>{this.inFocus=!0})),z(this,"_onMouseUp",(t=>{this.inFocus=!1,this.$el.focus()})),z(this,"_onResize",(()=>{this.visible&&"function"!=typeof this.opts.position&&this.setPosition()})),z(this,"_onClickOverlay",(()=>{this.visible&&this.hide()})),z(this,"getViewDates",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.days;return B.getDatesFunction(t)(n)})),z(this,"isWeekend",(t=>this.opts.weekends.includes(t))),z(this,"getClampedDate",(t=>{let{minDate:e,maxDate:i}=this,s=t;return i&&f(t,i)?s=i:e&&b(t,e)&&(s=e),s})),this.$el=r(t),!this.$el)return;this.$datepicker=a({className:"air-datepicker"}),this.opts=k({},s,e),this.$customContainer=!!this.opts.container&&r(this.opts.container),this.$altField=r(this.opts.altField||!1);let{view:o,startDate:c}=this.opts;c||(this.opts.startDate=new Date),"INPUT"===this.$el.nodeName&&(this.elIsInput=!0),this.inited=!1,this.visible=!1,this.viewDate=x(this.opts.startDate),this.focusDate=!1,this.initialReadonly=this.$el.getAttribute("readonly"),this.customHide=!1,this.currentView=o,this.selectedDates=[],this.disabledDates=new Set,this.isDestroyed=!1,this.views={},this.keys=[],this.rangeDateFrom="",this.rangeDateTo="",this.timepickerIsActive=!1,this.treatAsInline=this.opts.inline||!this.elIsInput,this.init()}init(){let{opts:t,treatAsInline:e,opts:{inline:i,isMobile:s,selectedDates:a,keyboardNav:n,onlyTimepicker:o}}=this,l=r("body");(!L||L&&N&&!l.contains(N))&&!i&&this.elIsInput&&!this.$customContainer&&P.buildGlobalContainer(P.defaultGlobalContainerId),!s||R||e||this._createMobileOverlay(),this._handleLocale(),this._bindSubEvents(),this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this.elIsInput&&(i||this._bindEvents(),n&&!o&&(this.keyboardNav=new Y({dp:this,opts:t}))),a&&this.selectDate(a,{silent:!0}),this.opts.visible&&!e&&this.show(),s&&!e&&this.$el.setAttribute("readonly",!0),e&&this._createComponents()}_createMobileOverlay(){R=a({className:"air-datepicker-overlay"}),N.appendChild(R)}_createComponents(){let{opts:t,treatAsInline:e,opts:{inline:i,buttons:s,timepicker:r,position:a,classes:n,onlyTimepicker:o,isMobile:l}}=this;this._buildBaseHtml(),this.elIsInput&&(i||this._setPositionClasses(a)),!i&&this.elIsInput||this.$datepicker.classList.add("-inline-"),n&&this.$datepicker.classList.add(...n.split(" ")),o&&this.$datepicker.classList.add("-only-timepicker-"),l&&!e&&this._addMobileAttributes(),this.views[this.currentView]=new B({dp:this,type:this.currentView,opts:t}),this.nav=new E({dp:this,opts:t}),r&&this._addTimepicker(),s&&this._addButtons(),this.$content.appendChild(this.views[this.currentView].$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){for(let t in this.views)this.views[t].destroy();this.views={},this.nav.destroy(),this.timepicker&&this.timepicker.destroy()}_addMobileAttributes(){R.addEventListener("click",this._onClickOverlay),this.$datepicker.classList.add("-is-mobile-"),this.$el.setAttribute("readonly",!0)}_removeMobileAttributes(){R.removeEventListener("click",this._onClickOverlay),this.$datepicker.classList.remove("-is-mobile-"),this.initialReadonly||""===this.initialReadonly||this.$el.removeAttribute("readonly")}_createMinMaxDates(){let{minDate:t,maxDate:e}=this.opts;this.minDate=!!t&&x(t),this.maxDate=!!e&&x(e)}_addTimepicker(){this.$timepicker=a({className:"air-datepicker--time"}),this.$datepicker.appendChild(this.$timepicker),this.timepicker=new F({dp:this,opts:this.opts}),this.$timepicker.appendChild(this.timepicker.$el)}_addButtons(){this.$buttons=a({className:"air-datepicker--buttons"}),this.$datepicker.appendChild(this.$buttons),this.buttons=new I({dp:this,opts:this.opts}),this.$buttons.appendChild(this.buttons.$el)}_bindSubEvents(){this.on(i.eventChangeSelectedDate,this._onChangeSelectedDate),this.on(i.eventChangeFocusDate,this._onChangeFocusedDate),this.on(i.eventChangeTime,this._onChangeTime)}_buildBaseHtml(){let{inline:t}=this.opts;var e,i;this.elIsInput?t?(e=this.$datepicker,(i=this.$el).parentNode.insertBefore(e,i.nextSibling)):this.$container.appendChild(this.$datepicker):this.$el.appendChild(this.$datepicker),this.$datepicker.innerHTML='<i class="air-datepicker--pointer"></i><div class="air-datepicker--navigation"></div><div class="air-datepicker--content"></div>',this.$content=r(".air-datepicker--content",this.$datepicker),this.$pointer=r(".air-datepicker--pointer",this.$datepicker),this.$nav=r(".air-datepicker--navigation",this.$datepicker)}_handleLocale(){let{locale:t,dateFormat:e,firstDay:i,timepicker:s,onlyTimepicker:r,timeFormat:a,dateTimeSeparator:n}=this.opts;var o;this.locale=(o=t,JSON.parse(JSON.stringify(o))),e&&(this.locale.dateFormat=e),void 0!==a&&""!==a&&(this.locale.timeFormat=a);let{timeFormat:l}=this.locale;if(""!==i&&(this.locale.firstDay=i),s&&"function"!=typeof e){let t=l?n:"";this.locale.dateFormat=[this.locale.dateFormat,l||""].join(t)}r&&"function"!=typeof e&&(this.locale.dateFormat=this.locale.timeFormat)}_setPositionClasses(t){if("function"==typeof t)return void this.$datepicker.classList.add("-custom-position-");let e=(t=t.split(" "))[0],i=`air-datepicker -${e}-${t[1]}- -from-${e}-`;this.$datepicker.classList.add(...i.split(" "))}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$el.addEventListener("blur",this._onBlur),this.$datepicker.addEventListener("mousedown",this._onMouseDown),this.$datepicker.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}_limitViewDateByMaxMinDates(){let{viewDate:t,minDate:e,maxDate:i}=this;i&&f(t,i)&&this.setViewDate(i),e&&b(t,e)&&this.setViewDate(e)}formatDate(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewDate,e=arguments.length>1?arguments[1]:void 0;if(t=x(t),!(t instanceof Date))return;let i=e,s=this.locale,r=l(t),a=r.dayPeriod,n=d(t),o=P.replacer,c={T:t.getTime(),m:r.minutes,mm:r.fullMinutes,h:r.hours12,hh:r.fullHours12,H:r.hours,HH:r.fullHours,aa:a,AA:a.toUpperCase(),E:s.daysShort[r.day],EEEE:s.days[r.day],d:r.date,dd:r.fullDate,M:r.month+1,MM:r.fullMonth,MMM:s.monthsShort[r.month],MMMM:s.months[r.month],yy:r.year.toString().slice(-2),yyyy:r.year,yyyy1:n[0],yyyy2:n[1]};for(let[t,e]of Object.entries(c))i=o(i,w(t),e);return i}down(t){this._handleUpDownActions(t,"down")}up(t){this._handleUpDownActions(t,"up")}selectDate(t){let e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{currentView:r,parsedViewDate:a,selectedDates:n}=this,{updateTime:o}=s,{moveToOtherMonthsOnSelect:l,moveToOtherYearsOnSelect:c,multipleDates:h,range:d,autoClose:u,onBeforeSelect:p}=this.opts,b=n.length;if(Array.isArray(t))return t.forEach((t=>{this.selectDate(t,s)})),new Promise((t=>{setTimeout(t)}));if((t=x(t))instanceof Date){if(p&&!p({date:t,datepicker:this}))return Promise.resolve();if(r===i.days&&t.getMonth()!==a.month&&l&&(e=new Date(t.getFullYear(),t.getMonth(),1)),r===i.years&&t.getFullYear()!==a.year&&c&&(e=new Date(t.getFullYear(),0,1)),e&&this.setViewDate(e),h&&!d){if(b===h)return;this._checkIfDateIsSelected(t)||n.push(t)}else if(d)switch(b){case 1:n.push(t),this.rangeDateTo||(this.rangeDateTo=t),f(this.rangeDateFrom,this.rangeDateTo)&&(this.rangeDateTo=this.rangeDateFrom,this.rangeDateFrom=t),this.selectedDates=[this.rangeDateFrom,this.rangeDateTo];break;case 2:this.selectedDates=[t],this.rangeDateFrom=t,this.rangeDateTo="";break;default:this.selectedDates=[t],this.rangeDateFrom=t}else this.selectedDates=[t];return this.trigger(i.eventChangeSelectedDate,{action:i.actionSelectDate,silent:null==s?void 0:s.silent,date:t,updateTime:o}),this._updateLastSelectedDate(t),u&&!this.timepickerIsActive&&this.visible&&(h||d?d&&1===b&&this.hide():this.hide()),new Promise((t=>{setTimeout(t)}))}}unselectDate(t){let e=this.selectedDates,s=this;if((t=x(t))instanceof Date)return e.some(((r,a)=>{if(p(r,t))return e.splice(a,1),s.selectedDates.length?(s.rangeDateTo="",s.rangeDateFrom=e[0],s._updateLastSelectedDate(s.selectedDates[s.selectedDates.length-1])):(s.rangeDateFrom="",s.rangeDateTo="",s._updateLastSelectedDate(!1)),this.trigger(i.eventChangeSelectedDate,{action:i.actionUnselectDate,date:t}),!0}))}replaceDate(t,e){let s=this.selectedDates.find((e=>p(e,t,this.currentView))),r=this.selectedDates.indexOf(s);r<0||p(this.selectedDates[r],e,this.currentView)||(this.selectedDates[r]=e,this.trigger(i.eventChangeSelectedDate,{action:i.actionSelectDate,date:e,updateTime:!0}),this._updateLastSelectedDate(e))}clear(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.selectedDates=[],this.rangeDateFrom=!1,this.rangeDateTo=!1,this.lastSelectedDate=!1,this.trigger(i.eventChangeSelectedDate,{action:i.actionUnselectDate,silent:t.silent}),new Promise((t=>{setTimeout(t)}))}show(){let{onShow:t,isMobile:e}=this.opts;this._cancelScheduledCall(),this.visible||this.hideAnimation||this._createComponents(),this.setPosition(this.opts.position),this.$datepicker.classList.add("-active-"),this.visible=!0,t&&this._scheduleCallAfterTransition(t),e&&this._showMobileOverlay()}hide(){let{onHide:t,isMobile:e}=this.opts,i=this._hasTransition();this.visible=!1,this.hideAnimation=!0,this.$datepicker.classList.remove("-active-"),this.customHide&&this.customHide(),this.elIsInput&&this.$el.blur(),this._scheduleCallAfterTransition((e=>{!this.customHide&&(e&&i||!e&&!i)&&this._finishHide(),t&&t(e)})),e&&R.classList.remove("-active-")}_triggerOnSelect(){let t=[],e=[],{selectedDates:i,locale:s,opts:{onSelect:r,multipleDates:a,range:n}}=this,o=a||n,l="function"==typeof s.dateFormat;i.length&&(t=i.map(m),e=l?a?s.dateFormat(t):t.map((t=>s.dateFormat(t))):t.map((t=>this.formatDate(t,s.dateFormat)))),r({date:o?t:t[0],formattedDate:o?e:e[0],datepicker:this})}_handleAlreadySelectedDates(t,e){let{selectedDates:i,rangeDateFrom:s,rangeDateTo:r}=this,{range:a,toggleSelected:n}=this.opts,o=i.length,l="function"==typeof n?n({datepicker:this,date:e}):n,c=Boolean(a&&1===o&&t),h=c?m(e):e;a&&!l&&(2!==o&&this.selectDate(h),2===o&&p(s,r))||(l?this.unselectDate(h):this._updateLastSelectedDate(c?h:t))}_handleUpDownActions(t,e){if(!((t=x(t||this.focusDate||this.viewDate))instanceof Date))return;let i="up"===e?this.viewIndex+1:this.viewIndex-1;i>2&&(i=2),i<0&&(i=0),this.setViewDate(new Date(t.getFullYear(),t.getMonth(),1)),this.setCurrentView(this.viewIndexes[i])}getCell(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.day;if(!((t=x(t))instanceof Date))return;let{year:s,month:r,date:a}=l(t),n=`[data-year="${s}"]`,o=`[data-month="${r}"]`,c={[i.day]:`${n}${o}[data-date="${a}"]`,[i.month]:`${n}${o}`,[i.year]:`${n}`};return this.views[this.currentView]?this.views[this.currentView].$el.querySelector(c[e]):void 0}_showMobileOverlay(){R.classList.add("-active-")}_hasTransition(){return window.getComputedStyle(this.$datepicker).getPropertyValue("transition-duration").split(", ").reduce(((t,e)=>parseFloat(e)+t),0)>0}get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return l(this.viewDate)}get currentViewSingular(){return this.currentView.slice(0,-1)}get curDecade(){return d(this.viewDate)}get viewIndex(){return this.viewIndexes.indexOf(this.currentView)}get isFinalView(){return this.currentView===i.years}get hasSelectedDates(){return this.selectedDates.length>0}get isMinViewReached(){return this.currentView===this.opts.minView||this.currentView===i.days}get $container(){return this.$customContainer||N}static replacer(t,e,i){return t.replace(e,(function(t,e,s,r){return e+i+r}))}}var V;return z(P,"defaults",s),z(P,"version","3.5.3"),z(P,"defaultGlobalContainerId","air-datepicker-global-container"),V=P.prototype,Object.assign(V,$),e.default}()}))})(ps);const fs=ps.exports;var bs={};Object.defineProperty(bs,"__esModule",{value:true});var ms=bs.default=void 0;var gs={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",dateFormat:"MM/dd/yyyy",timeFormat:"hh:mm aa",firstDay:0};ms=bs.default=gs;const vs='.air-datepicker-cell.-year-.-other-decade-,.air-datepicker-cell.-day-.-other-month-{color:var(--adp-color-other-month)}.air-datepicker-cell.-year-.-other-decade-:hover,.air-datepicker-cell.-day-.-other-month-:hover{color:var(--adp-color-other-month-hover)}.-disabled-.-focus-.air-datepicker-cell.-year-.-other-decade-,.-disabled-.-focus-.air-datepicker-cell.-day-.-other-month-{color:var(--adp-color-other-month)}.-selected-.air-datepicker-cell.-year-.-other-decade-,.-selected-.air-datepicker-cell.-day-.-other-month-{color:#fff;background:var(--adp-background-color-selected-other-month)}.-selected-.-focus-.air-datepicker-cell.-year-.-other-decade-,.-selected-.-focus-.air-datepicker-cell.-day-.-other-month-{background:var(--adp-background-color-selected-other-month-focused)}.-in-range-.air-datepicker-cell.-year-.-other-decade-,.-in-range-.air-datepicker-cell.-day-.-other-month-{background-color:var(--adp-background-color-in-range);color:var(--adp-color)}.-in-range-.-focus-.air-datepicker-cell.-year-.-other-decade-,.-in-range-.-focus-.air-datepicker-cell.-day-.-other-month-{background-color:var(--adp-background-color-in-range-focused)}.air-datepicker-cell.-year-.-other-decade-:empty,.air-datepicker-cell.-day-.-other-month-:empty{background:none;border:none}.air-datepicker-cell{border-radius:var(--adp-cell-border-radius);box-sizing:border-box;cursor:pointer;display:flex;position:relative;align-items:center;justify-content:center;z-index:1}.air-datepicker-cell.-focus-{background:var(--adp-cell-background-color-hover)}.air-datepicker-cell.-current-{color:var(--adp-color-current-date)}.air-datepicker-cell.-current-.-focus-{color:var(--adp-color)}.air-datepicker-cell.-current-.-in-range-{color:var(--adp-color-current-date)}.air-datepicker-cell.-disabled-{cursor:default;color:var(--adp-color-disabled)}.air-datepicker-cell.-disabled-.-focus-{color:var(--adp-color-disabled)}.air-datepicker-cell.-disabled-.-in-range-{color:var(--adp-color-disabled-in-range)}.air-datepicker-cell.-disabled-.-current-.-focus-{color:var(--adp-color-disabled)}.air-datepicker-cell.-in-range-{background:var(--adp-cell-background-color-in-range);border-radius:0}.air-datepicker-cell.-in-range-:hover,.air-datepicker-cell.-in-range-.-focus-{background:var(--adp-cell-background-color-in-range-hover)}.air-datepicker-cell.-range-from-{border:1px solid var(--adp-cell-border-color-in-range);background-color:var(--adp-cell-background-color-in-range);border-radius:var(--adp-cell-border-radius) 0 0 var(--adp-cell-border-radius)}.air-datepicker-cell.-range-to-{border:1px solid var(--adp-cell-border-color-in-range);background-color:var(--adp-cell-background-color-in-range);border-radius:0 var(--adp-cell-border-radius) var(--adp-cell-border-radius) 0}.air-datepicker-cell.-range-to-.-range-from-{border-radius:var(--adp-cell-border-radius)}.air-datepicker-cell.-selected-{color:#fff;border:none;background:var(--adp-cell-background-color-selected)}.air-datepicker-cell.-selected-.-current-{color:#fff;background:var(--adp-cell-background-color-selected)}.air-datepicker-cell.-selected-.-focus-{background:var(--adp-cell-background-color-selected-hover)}.air-datepicker-body{transition:all var(--adp-transition-duration) var(--adp-transition-ease)}.air-datepicker-body.-hidden-{display:none}.air-datepicker-body--day-names{display:grid;grid-template-columns:repeat(7, var(--adp-day-cell-width));margin:8px 0 3px}.air-datepicker-body--day-name{color:var(--adp-day-name-color);display:flex;align-items:center;justify-content:center;flex:1;text-align:center;text-transform:uppercase;font-size:.8em}.air-datepicker-body--day-name.-clickable-{cursor:pointer}.air-datepicker-body--day-name.-clickable-:hover{color:var(--adp-day-name-color-hover)}.air-datepicker-body--cells{display:grid}.air-datepicker-body--cells.-days-{grid-template-columns:repeat(7, var(--adp-day-cell-width));grid-auto-rows:var(--adp-day-cell-height)}.air-datepicker-body--cells.-months-{grid-template-columns:repeat(3, 1fr);grid-auto-rows:var(--adp-month-cell-height)}.air-datepicker-body--cells.-years-{grid-template-columns:repeat(4, 1fr);grid-auto-rows:var(--adp-year-cell-height)}.air-datepicker-nav{display:flex;justify-content:space-between;border-bottom:1px solid var(--adp-border-color-inner);min-height:var(--adp-nav-height);padding:var(--adp-padding);box-sizing:content-box}.-only-timepicker- .air-datepicker-nav{display:none}.air-datepicker-nav--title,.air-datepicker-nav--action{display:flex;cursor:pointer;align-items:center;justify-content:center}.air-datepicker-nav--action{width:var(--adp-nav-action-size);border-radius:var(--adp-border-radius);-webkit-user-select:none;-moz-user-select:none;user-select:none}.air-datepicker-nav--action:hover{background:var(--adp-background-color-hover)}.air-datepicker-nav--action:active{background:var(--adp-background-color-active)}.air-datepicker-nav--action.-disabled-{visibility:hidden}.air-datepicker-nav--action svg{width:32px;height:32px}.air-datepicker-nav--action path{fill:none;stroke:var(--adp-nav-arrow-color);stroke-width:2px}.air-datepicker-nav--title{border-radius:var(--adp-border-radius);padding:0 8px}.air-datepicker-nav--title i{font-style:normal;color:var(--adp-nav-color-secondary);margin-left:.3em}.air-datepicker-nav--title:hover{background:var(--adp-background-color-hover)}.air-datepicker-nav--title:active{background:var(--adp-background-color-active)}.air-datepicker-nav--title.-disabled-{cursor:default;background:none}.air-datepicker-buttons{display:grid;grid-auto-columns:1fr;grid-auto-flow:column}.air-datepicker-button{display:inline-flex;color:var(--adp-btn-color);border-radius:var(--adp-btn-border-radius);cursor:pointer;height:var(--adp-btn-height);border:none;background:rgba(255,255,255,0)}.air-datepicker-button:hover{color:var(--adp-btn-color-hover);background:var(--adp-btn-background-color-hover)}.air-datepicker-button:focus{color:var(--adp-btn-color-hover);background:var(--adp-btn-background-color-hover);outline:none}.air-datepicker-button:active{background:var(--adp-btn-background-color-active)}.air-datepicker-button span{outline:none;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.air-datepicker-time{display:grid;grid-template-columns:max-content 1fr;grid-column-gap:12px;align-items:center;position:relative;padding:0 var(--adp-time-padding-inner)}.-only-timepicker- .air-datepicker-time{border-top:none}.air-datepicker-time--current{display:flex;align-items:center;flex:1;font-size:14px;text-align:center}.air-datepicker-time--current-colon{margin:0 2px 3px;line-height:1}.air-datepicker-time--current-hours,.air-datepicker-time--current-minutes{line-height:1;font-size:19px;font-family:"Century Gothic",CenturyGothic,AppleGothic,sans-serif;position:relative;z-index:1}.air-datepicker-time--current-hours:after,.air-datepicker-time--current-minutes:after{content:"";background:var(--adp-background-color-hover);border-radius:var(--adp-border-radius);position:absolute;left:-2px;top:-3px;right:-2px;bottom:-2px;z-index:-1;opacity:0}.air-datepicker-time--current-hours.-focus-:after,.air-datepicker-time--current-minutes.-focus-:after{opacity:1}.air-datepicker-time--current-ampm{text-transform:uppercase;align-self:flex-end;color:var(--adp-time-day-period-color);margin-left:6px;font-size:11px;margin-bottom:1px}.air-datepicker-time--row{display:flex;align-items:center;font-size:11px;height:17px;background:linear-gradient(to right, var(--adp-time-track-color), var(--adp-time-track-color)) left 50%/100% var(--adp-time-track-height) no-repeat}.air-datepicker-time--row:first-child{margin-bottom:4px}.air-datepicker-time--row input[type=range]{background:none;cursor:pointer;flex:1;height:100%;width:100%;padding:0;margin:0;-webkit-appearance:none}.air-datepicker-time--row input[type=range]::-webkit-slider-thumb{-webkit-appearance:none}.air-datepicker-time--row input[type=range]::-ms-tooltip{display:none}.air-datepicker-time--row input[type=range]:hover::-webkit-slider-thumb{border-color:var(--adp-time-track-color-hover)}.air-datepicker-time--row input[type=range]:hover::-moz-range-thumb{border-color:var(--adp-time-track-color-hover)}.air-datepicker-time--row input[type=range]:hover::-ms-thumb{border-color:var(--adp-time-track-color-hover)}.air-datepicker-time--row input[type=range]:focus{outline:none}.air-datepicker-time--row input[type=range]:focus::-webkit-slider-thumb{background:var(--adp-cell-background-color-selected);border-color:var(--adp-cell-background-color-selected)}.air-datepicker-time--row input[type=range]:focus::-moz-range-thumb{background:var(--adp-cell-background-color-selected);border-color:var(--adp-cell-background-color-selected)}.air-datepicker-time--row input[type=range]:focus::-ms-thumb{background:var(--adp-cell-background-color-selected);border-color:var(--adp-cell-background-color-selected)}.air-datepicker-time--row input[type=range]::-webkit-slider-thumb{box-sizing:border-box;height:12px;width:12px;border-radius:3px;border:1px solid var(--adp-time-track-color);background:#fff;cursor:pointer;-webkit-transition:background var(--adp-transition-duration);transition:background var(--adp-transition-duration)}.air-datepicker-time--row input[type=range]::-moz-range-thumb{box-sizing:border-box;height:12px;width:12px;border-radius:3px;border:1px solid var(--adp-time-track-color);background:#fff;cursor:pointer;-moz-transition:background var(--adp-transition-duration);transition:background var(--adp-transition-duration)}.air-datepicker-time--row input[type=range]::-ms-thumb{box-sizing:border-box;height:12px;width:12px;border-radius:3px;border:1px solid var(--adp-time-track-color);background:#fff;cursor:pointer;-ms-transition:background var(--adp-transition-duration);transition:background var(--adp-transition-duration)}.air-datepicker-time--row input[type=range]::-webkit-slider-thumb{margin-top:calc(var(--adp-time-thumb-size)/2*-1)}.air-datepicker-time--row input[type=range]::-webkit-slider-runnable-track{border:none;height:var(--adp-time-track-height);cursor:pointer;color:rgba(0,0,0,0);background:rgba(0,0,0,0)}.air-datepicker-time--row input[type=range]::-moz-range-track{border:none;height:var(--adp-time-track-height);cursor:pointer;color:rgba(0,0,0,0);background:rgba(0,0,0,0)}.air-datepicker-time--row input[type=range]::-ms-track{border:none;height:var(--adp-time-track-height);cursor:pointer;color:rgba(0,0,0,0);background:rgba(0,0,0,0)}.air-datepicker-time--row input[type=range]::-ms-fill-lower{background:rgba(0,0,0,0)}.air-datepicker-time--row input[type=range]::-ms-fill-upper{background:rgba(0,0,0,0)}.air-datepicker{--adp-font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";--adp-font-size:14px;--adp-width:246px;--adp-z-index:100;--adp-padding:4px;--adp-grid-areas:"nav" "body" "timepicker" "buttons";--adp-transition-duration:.3s;--adp-transition-ease:ease-out;--adp-transition-offset:8px;--adp-background-color:#fff;--adp-background-color-hover:#f0f0f0;--adp-background-color-active:#eaeaea;--adp-background-color-in-range:rgba(92, 196, 239, .1);--adp-background-color-in-range-focused:rgba(92, 196, 239, .2);--adp-background-color-selected-other-month-focused:#8ad5f4;--adp-background-color-selected-other-month:#a2ddf6;--adp-color:#4a4a4a;--adp-color-secondary:#9c9c9c;--adp-accent-color:#4eb5e6;--adp-color-current-date:var(--adp-accent-color);--adp-color-other-month:#dedede;--adp-color-disabled:#aeaeae;--adp-color-disabled-in-range:#939393;--adp-color-other-month-hover:#c5c5c5;--adp-border-color:#dbdbdb;--adp-border-color-inner:#efefef;--adp-border-radius:4px;--adp-border-color-inline:#d7d7d7;--adp-nav-height:32px;--adp-nav-arrow-color:var(--adp-color-secondary);--adp-nav-action-size:32px;--adp-nav-color-secondary:var(--adp-color-secondary);--adp-day-name-color:#ff9a19;--adp-day-name-color-hover:#8ad5f4;--adp-day-cell-width:1fr;--adp-day-cell-height:32px;--adp-month-cell-height:42px;--adp-year-cell-height:56px;--adp-pointer-size:10px;--adp-poiner-border-radius:2px;--adp-pointer-offset:14px;--adp-cell-border-radius:4px;--adp-cell-background-color-hover:var(--adp-background-color-hover);--adp-cell-background-color-selected:#5cc4ef;--adp-cell-background-color-selected-hover:#45bced;--adp-cell-background-color-in-range:rgba(92, 196, 239, 0.1);--adp-cell-background-color-in-range-hover:rgba(92, 196, 239, 0.2);--adp-cell-border-color-in-range:var(--adp-cell-background-color-selected);--adp-btn-height:32px;--adp-btn-color:var(--adp-accent-color);--adp-btn-color-hover:var(--adp-color);--adp-btn-border-radius:var(--adp-border-radius);--adp-btn-background-color-hover:var(--adp-background-color-hover);--adp-btn-background-color-active:var(--adp-background-color-active);--adp-time-track-height:1px;--adp-time-track-color:#dedede;--adp-time-track-color-hover:#b1b1b1;--adp-time-thumb-size:12px;--adp-time-padding-inner:10px;--adp-time-day-period-color:var(--adp-color-secondary);--adp-mobile-font-size:16px;--adp-mobile-nav-height:40px;--adp-mobile-width:320px;--adp-mobile-day-cell-height:38px;--adp-mobile-month-cell-height:48px;--adp-mobile-year-cell-height:64px}.air-datepicker-overlay{--adp-overlay-background-color:rgba(0, 0, 0, .3);--adp-overlay-transition-duration:.3s;--adp-overlay-transition-ease:ease-out;--adp-overlay-z-index:99}.air-datepicker{background:var(--adp-background-color);border:1px solid var(--adp-border-color);box-shadow:0 4px 12px rgba(0,0,0,.15);border-radius:var(--adp-border-radius);box-sizing:content-box;display:grid;grid-template-columns:1fr;grid-template-rows:repeat(4, max-content);grid-template-areas:var(--adp-grid-areas);font-family:var(--adp-font-family),sans-serif;font-size:var(--adp-font-size);color:var(--adp-color);width:var(--adp-width);position:absolute;transition:opacity var(--adp-transition-duration) var(--adp-transition-ease),transform var(--adp-transition-duration) var(--adp-transition-ease);z-index:var(--adp-z-index)}.air-datepicker:not(.-custom-position-){opacity:0}.air-datepicker.-from-top-{transform:translateY(calc(var(--adp-transition-offset) * -1))}.air-datepicker.-from-right-{transform:translateX(var(--adp-transition-offset))}.air-datepicker.-from-bottom-{transform:translateY(var(--adp-transition-offset))}.air-datepicker.-from-left-{transform:translateX(calc(var(--adp-transition-offset) * -1))}.air-datepicker.-active-:not(.-custom-position-){transform:translate(0, 0);opacity:1}.air-datepicker.-active-.-custom-position-{transition:none}.air-datepicker.-inline-{border-color:var(--adp-border-color-inline);box-shadow:none;position:static;left:auto;right:auto;opacity:1;transform:none}.air-datepicker.-inline- .air-datepicker--pointer{display:none}.air-datepicker.-is-mobile-{--adp-font-size:var(--adp-mobile-font-size);--adp-day-cell-height:var(--adp-mobile-day-cell-height);--adp-month-cell-height:var(--adp-mobile-month-cell-height);--adp-year-cell-height:var(--adp-mobile-year-cell-height);--adp-nav-height:var(--adp-mobile-nav-height);--adp-nav-action-size:var(--adp-mobile-nav-height);position:fixed;width:var(--adp-mobile-width);border:none}.air-datepicker.-is-mobile- *{-webkit-tap-highlight-color:rgba(0,0,0,0)}.air-datepicker.-is-mobile- .air-datepicker--pointer{display:none}.air-datepicker.-is-mobile-:not(.-custom-position-){transform:translate(-50%, calc(-50% + var(--adp-transition-offset)))}.air-datepicker.-is-mobile-.-active-:not(.-custom-position-){transform:translate(-50%, -50%)}.air-datepicker.-custom-position-{transition:none}.air-datepicker-global-container{position:absolute;left:0;top:0}.air-datepicker--pointer{--pointer-half-size:calc(var(--adp-pointer-size) / 2);position:absolute;width:var(--adp-pointer-size);height:var(--adp-pointer-size);z-index:-1}.air-datepicker--pointer:after{content:"";position:absolute;background:#fff;border-top:1px solid var(--adp-border-color-inline);border-right:1px solid var(--adp-border-color-inline);border-top-right-radius:var(--adp-poiner-border-radius);width:var(--adp-pointer-size);height:var(--adp-pointer-size);box-sizing:border-box}.-top-left- .air-datepicker--pointer,.-top-center- .air-datepicker--pointer,.-top-right- .air-datepicker--pointer,[data-popper-placement^=top] .air-datepicker--pointer{top:calc(100% - var(--pointer-half-size) + 1px)}.-top-left- .air-datepicker--pointer:after,.-top-center- .air-datepicker--pointer:after,.-top-right- .air-datepicker--pointer:after,[data-popper-placement^=top] .air-datepicker--pointer:after{transform:rotate(135deg)}.-right-top- .air-datepicker--pointer,.-right-center- .air-datepicker--pointer,.-right-bottom- .air-datepicker--pointer,[data-popper-placement^=right] .air-datepicker--pointer{right:calc(100% - var(--pointer-half-size) + 1px)}.-right-top- .air-datepicker--pointer:after,.-right-center- .air-datepicker--pointer:after,.-right-bottom- .air-datepicker--pointer:after,[data-popper-placement^=right] .air-datepicker--pointer:after{transform:rotate(225deg)}.-bottom-left- .air-datepicker--pointer,.-bottom-center- .air-datepicker--pointer,.-bottom-right- .air-datepicker--pointer,[data-popper-placement^=bottom] .air-datepicker--pointer{bottom:calc(100% - var(--pointer-half-size) + 1px)}.-bottom-left- .air-datepicker--pointer:after,.-bottom-center- .air-datepicker--pointer:after,.-bottom-right- .air-datepicker--pointer:after,[data-popper-placement^=bottom] .air-datepicker--pointer:after{transform:rotate(315deg)}.-left-top- .air-datepicker--pointer,.-left-center- .air-datepicker--pointer,.-left-bottom- .air-datepicker--pointer,[data-popper-placement^=left] .air-datepicker--pointer{left:calc(100% - var(--pointer-half-size) + 1px)}.-left-top- .air-datepicker--pointer:after,.-left-center- .air-datepicker--pointer:after,.-left-bottom- .air-datepicker--pointer:after,[data-popper-placement^=left] .air-datepicker--pointer:after{transform:rotate(45deg)}.-top-left- .air-datepicker--pointer,.-bottom-left- .air-datepicker--pointer{left:var(--adp-pointer-offset)}.-top-right- .air-datepicker--pointer,.-bottom-right- .air-datepicker--pointer{right:var(--adp-pointer-offset)}.-top-center- .air-datepicker--pointer,.-bottom-center- .air-datepicker--pointer{left:calc(50% - var(--adp-pointer-size)/2)}.-left-top- .air-datepicker--pointer,.-right-top- .air-datepicker--pointer{top:var(--adp-pointer-offset)}.-left-bottom- .air-datepicker--pointer,.-right-bottom- .air-datepicker--pointer{bottom:var(--adp-pointer-offset)}.-left-center- .air-datepicker--pointer,.-right-center- .air-datepicker--pointer{top:calc(50% - var(--adp-pointer-size)/2)}.air-datepicker--navigation{grid-area:nav}.air-datepicker--content{box-sizing:content-box;padding:var(--adp-padding);grid-area:body}.-only-timepicker- .air-datepicker--content{display:none}.air-datepicker--time{grid-area:timepicker}.air-datepicker--buttons{grid-area:buttons}.air-datepicker--buttons,.air-datepicker--time{padding:var(--adp-padding);border-top:1px solid var(--adp-border-color-inner)}.air-datepicker-overlay{position:fixed;background:var(--adp-overlay-background-color);left:0;top:0;width:0;height:0;opacity:0;transition:opacity var(--adp-overlay-transition-duration) var(--adp-overlay-transition-ease),left 0s,height 0s,width 0s;transition-delay:0s,var(--adp-overlay-transition-duration),var(--adp-overlay-transition-duration),var(--adp-overlay-transition-duration);z-index:var(--adp-overlay-z-index)}.air-datepicker-overlay.-active-{opacity:1;width:100%;height:100%;transition:opacity var(--adp-overlay-transition-duration) var(--adp-overlay-transition-ease),height 0s,width 0s}:host{display:block}.air-datepicker{font-size:auto}.air-datepicker-body--day-name{color:#000;font-weight:700}.air-datepicker-cell.-selected-,.air-datepicker-cell.-selected-.-focus-,.air-datepicker-cell.-selected-.-current-{background:#1e9ff2}.air-datepicker-cell.-disabled-{text-decoration:line-through}.air-datepicker-cell.-current-{color:#1e9ff2}.ir-date-picker-trigger{position:relative;box-sizing:border-box;width:fit-content;height:fit-content}.ir-date-picker-element{position:absolute;inset:0;opacity:0;cursor:pointer}';const ys=vs;const ks=class{constructor(e){t(this,e);this.dateChanged=s(this,"dateChanged",7);this.datePickerFocus=s(this,"datePickerFocus",7);this.datePickerBlur=s(this,"datePickerBlur",7);this.inline=false;this.date=null;this.multipleDates=false;this.range=false;this.dateFormat="yyyy-MM-dd";this.timepicker=false;this.disabled=false;this.autoClose=true;this.showOtherMonths=true;this.selectOtherMonths=true;this.customPicker=true;this.forceDestroyOnUpdate=false;this.emitEmptyDate=false;this.triggerContainerStyle="";this.currentDate=null;this.triggerSlot=null}componentWillLoad(){if(this.date){this.currentDate=this.toValidDate(this.date)}}componentDidLoad(){this.initializeDatepicker();this.setupTriggerFocusHandling()}setupTriggerFocusHandling(){if(!this.customPicker)return;const t=this.el.querySelector('[slot="trigger"]');if(!t)return;this.triggerSlot=t;this.triggerSlot.addEventListener("focus",this.handleTriggerFocus.bind(this));this.triggerSlot.addEventListener("click",this.handleTriggerClick.bind(this))}handleTriggerFocus(){if(this.disabled)return;this.openDatePicker()}handleTriggerClick(t){if(this.disabled)return;t.preventDefault();this.openDatePicker()}datePropChanged(t,e){if(this.isSameDates(t,e)){return}this.updatePickerDate(t)}minDatePropChanged(t,e){var i;if(!this.datePicker){return}if(!this.isSameDates(t,e)){(i=this.datePicker)===null||i===void 0?void 0:i.update({minDate:this.toValidDate(t)})}}maxDatePropChanged(t,e){var i;if(!this.isSameDates(t,e)){(i=this.datePicker)===null||i===void 0?void 0:i.update({maxDate:this.toValidDate(t)})}}async openDatePicker(){this.openDatePickerTimeout=setTimeout((()=>{this.pickerRef.focus()}),20)}async clearDatePicker(){var t;(t=this.datePicker)===null||t===void 0?void 0:t.clear()}isSameDates(t,e){if(!t&&!e)return true;if(!t||!e)return false;return E(t).isSame(E(e),"day")}toValidDate(t){if(!t)return null;const e=new Date(t);return isNaN(e.getTime())?null:e}updatePickerDate(t){var e,i;const s=this.toValidDate(t);if(!s){(e=this.datePicker)===null||e===void 0?void 0:e.clear();this.currentDate=null;return}if(!this.isSameDates(this.currentDate,s)){this.currentDate=s;if(this.forceDestroyOnUpdate){this.datePicker.destroy();this.datePicker=null;this.initializeDatepicker()}else{(i=this.datePicker)===null||i===void 0?void 0:i.selectDate(s)}}}initializeDatepicker(){if(this.datePicker)return;this.datePicker=new fs(this.pickerRef,{container:this.container,inline:this.inline,selectedDates:this.date?[this.date]:[],multipleDates:this.multipleDates,range:this.range,dateFormat:this.dateFormat,timepicker:this.timepicker,minDate:this.minDate,maxDate:this.maxDate,autoClose:this.autoClose,locale:ms,showOtherMonths:this.showOtherMonths,selectOtherMonths:this.selectOtherMonths,onHide:()=>{this.datePickerBlur.emit()},onShow:()=>{this.datePickerFocus.emit()},onSelect:({date:t})=>{if(!t||!(t instanceof Date)){if(this.emitEmptyDate){this.dateChanged.emit({start:null,end:null})}return}this.currentDate=t;this.date=t;this.dateChanged.emit({start:E(t),end:E(t)})},position({$datepicker:t,$target:e,$pointer:i,done:s}){let r=us(e,t,{placement:"top",modifiers:[{name:"flip",options:{padding:{top:0}}},{name:"offset",options:{offset:[0,10]}},{name:"arrow",options:{element:i}}]});return function t(){r.destroy();s()}}})}disconnectedCallback(){var t,e;if(this.openDatePickerTimeout){clearTimeout(this.openDatePickerTimeout)}if(this.triggerSlot){this.triggerSlot.removeEventListener("focus",this.handleTriggerFocus);this.triggerSlot.removeEventListener("click",this.handleTriggerClick)}(e=(t=this.datePicker)===null||t===void 0?void 0:t.destroy)===null||e===void 0?void 0:e.call(t)}render(){return e("div",{key:"a82f42de74fd3a8fce896e5dd17c7b7abc96374f",class:`ir-date-picker-trigger ${this.triggerContainerStyle}`},this.customPicker&&e("slot",{key:"94c98cd3319df926dd782e83cc342d6633b45c38",name:"trigger"}),e("input",{key:"cdabebcccee1a24af5480376328bc14667283c77",type:"text",disabled:this.disabled,class:this.customPicker?"ir-date-picker-element":"form-control input-sm",ref:t=>this.pickerRef=t}))}get el(){return a(this)}static get watchers(){return{date:["datePropChanged"],minDate:["minDatePropChanged"],maxDate:["maxDatePropChanged"]}}};ks.style=ys;const xs=".sc-ir-date-range-h{display:block;width:100%}.date-range-input.sc-ir-date-range{width:100%}";const ws=xs;const _s=class{constructor(e){t(this,e);this.dateChanged=s(this,"dateChanged",7);this.firstDay=1;this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];this.daysOfWeek=["Su","Mo","Tu","We","Th","Fr","Sa"];this.format="MMM DD, YYYY";this.separator=" - ";this.applyLabel="Apply";this.cancelLabel="Cancel";this.fromLabel="Form";this.toLabel="To";this.customRangeLabel="Custom";this.weekLabel="W";this.disabled=false;this.singleDatePicker=false;this.maxSpan={days:240}}componentWillLoad(){if(!document.getElementById("ir-daterangepicker-style")){const t=document.createElement("style");t.id="ir-daterangepicker-style";t.textContent=`\n        .daterangepicker {\n          margin-top: 14px;\n        }\n      `;document.head.appendChild(t)}}componentDidLoad(){this.dateRangeInput=this.element.querySelector(".date-range-input");this.initializeDateRangePicker();this.updateDateRangePickerDates()}disconnectedCallback(){if(this.openDatePickerTimeout){clearTimeout(this.openDatePickerTimeout)}$(this.dateRangeInput).data("daterangepicker").remove()}handleMinDateChange(){$(this.dateRangeInput).data("daterangepicker").remove();this.initializeDateRangePicker()}datePropChanged(){this.updateDateRangePickerDates()}async openDatePicker(){this.openDatePickerTimeout=setTimeout((()=>{this.dateRangeInput.click()}),20)}updateDateRangePickerDates(){const t=$(this.dateRangeInput).data("daterangepicker");if(!t){console.error("Date range picker not initialized.");return}if(this.singleDatePicker){const e=this.date?E(this.date):E();t.setStartDate(e);t.setEndDate(e)}else{const e=this.fromDate?E(this.fromDate):E();const i=this.toDate?E(this.toDate):e.clone().add(1,"days");t.setStartDate(e);t.setEndDate(i)}}initializeDateRangePicker(){$(this.dateRangeInput).daterangepicker({singleDatePicker:this.singleDatePicker,opens:this.opens,startDate:E(this.fromDate),endDate:E(this.toDate),minDate:E(this.minDate||E(new Date).format("YYYY-MM-DD")),maxDate:this.maxDate?E(this.maxDate):undefined,maxSpan:this.maxSpan,autoApply:this.autoApply,locale:{format:this.format,separator:this.separator,applyLabel:this.applyLabel,cancelLabel:this.cancelLabel,fromLabel:this.fromLabel,toLabel:this.toLabel,customRangeLabel:this.customRangeLabel,weekLabel:this.weekLabel,daysOfWeek:this.daysOfWeek,monthNames:this.monthNames,firstDay:this.firstDay}},((t,e)=>{this.dateChanged.emit({start:t,end:e})}))}render(){return e(i,{key:"f1c5849d33dc5d9dba2bcbd9ba50019c5a8197c2"},e("input",{key:"fd9b88cff13a474656ce41680d9db3910ed8f71f",class:"date-range-input",type:"button",disabled:this.disabled}))}get element(){return a(this)}static get watchers(){return{minDate:["handleMinDateChange"],date:["datePropChanged"]}}};_s.style=ws;const Ds=".sc-ir-date-view-h{display:block;font-size:13.65px !important;width:100%}.mx-01.sc-ir-date-view{--m:5px;margin-right:var(--m) !important;margin-left:var(--m) !important}";const Cs=Ds;const Os=class{constructor(e){t(this,e);this.showDateDifference=true;this.dateOption="YYYY-MM-DD"}componentWillLoad(){this.initializeDates()}handleFromDateChange(t,e){if(t!==e){this.initializeDates()}}handleToDateChange(t,e){if(t!==e){this.initializeDates()}}initializeDates(){this.convertDate("from_date",this.from_date);this.convertDate("to_date",this.to_date);const t=E(this.dates.from_date,"MMM DD, YYYY").format("YYYY-MM-DD");const e=E(this.dates.to_date,"MMM DD, YYYY").format("YYYY-MM-DD");this.dates.date_difference=_(t,e)}convertDate(t,e){this.dates=this.dates||{from_date:"",to_date:"",date_difference:0};if(!e){return}if(typeof e==="string"){this.dates[t]=E(e,this.dateOption).format("MMM DD, YYYY")}else if(e instanceof Date){this.dates[t]=E(e).format("MMM DD, YYYY")}else if(E.isMoment(e)){this.dates[t]=e.format("MMM DD, YYYY")}else{console.error("Unsupported date type")}}render(){return e(i,{key:"04f6d6865a70137124110a9fe5f51ed285c455e1",class:"d-flex align-items-center"},e("span",{key:"f0999d7a8059236a31eb2222985f53abaa9cb121"},this.dates.from_date)," ",e("svg",{key:"f3c7253630e43e8f8b32c403cc4f5038cf2048e8",xmlns:"http://www.w3.org/2000/svg",class:"mx-01",height:"14",width:"14",viewBox:"0 0 512 512"},e("path",{key:"486a0c4ee2bb17f96f63a4697fa327b7d2a126db",fill:"currentColor",d:"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z"})),e("span",{key:"ecfe95ce537ba4fe97a2b2718526650a84d13582"},this.dates.to_date," ",this.showDateDifference&&e("span",{key:"af7bacac9347c3085a5e99319d1ea451f84f99e9",class:"mx-01"},this.dates.date_difference,"   ",this.dates.date_difference>1?` ${b.entries.Lcz_Nights}`:` ${b.entries.Lcz_Night}`)))}static get watchers(){return{from_date:["handleFromDateChange"],to_date:["handleToDateChange"]}}};Os.style=Cs;const As=":host{display:block;margin:0;padding:0;box-sizing:border-box}.backdrop{opacity:0;background:rgba(0, 0, 0, 0.2);position:fixed;inset:0;z-index:99999998}.backdrop[data-state='opened']{animation:overlayShow 150ms cubic-bezier(0.16, 1, 0.3, 1) forwards}.backdrop[data-state='closed']{opacity:0;pointer-events:none}.modal-container{box-sizing:border-box;margin:0;box-shadow:hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px;position:fixed;z-index:99999999;overflow-y:auto;top:50%;left:50%;background:white;transform:translate(-50%, -50%);width:90%;min-height:fit-content;height:fit-content;max-width:var(--ir-dialog-max-width, 40rem);min-width:var(--ir-dialog-min-width);max-height:85vh;border-radius:8px;padding:0;animation:contentShow 300ms cubic-bezier(0.16, 1, 0.3, 1)}.modal-footer ::slotted(*){flex-direction:row;align-items:center;justify-content:end;gap:8px;--ir-btn-width:inherit}.modal-footer{--ir-btn-width:100%}.modal-title ::slotted(*){font-size:18px;font-weight:600;color:#101828;margin-bottom:8px}.modal-body ::slotted(*){font-size:14px;font-weight:400;color:#475467;padding:0;margin:0}@keyframes overlayShow{from{opacity:0}to{opacity:1}}@keyframes contentShow{from{opacity:0;transform:translate(-50%, -48%) scale(0.96)}to{opacity:1;transform:translate(-50%, -50%) scale(1)}}.dialog-close-button{position:absolute;top:15px;right:15px}";const Bs=As;const Ms=class{constructor(e){t(this,e);this.openChange=s(this,"openChange",7);this.open=false;this.isOpen=false}componentWillLoad(){if(this.open){this.openModal()}}componentDidLoad(){this.prepareFocusTrap()}async openModal(){this.isOpen=true;document.body.style.overflow="hidden";setTimeout((()=>{this.prepareFocusTrap()}),10);this.openChange.emit(this.isOpen)}async closeModal(){console.log("close");if(!this.isOpen){return}document.body.style.overflow="visible";this.isOpen=false;this.openChange.emit(this.isOpen)}handleOpenChange(){if(this.open){this.openModal()}else{this.closeModal()}}handleKeyDown(t){if(!this.isOpen){return}let e=t.key==="Tab";if(t.key==="Escape"&&this.isOpen){this.closeModal()}if(!e){return}if(!t.shiftKey&&document.activeElement===this.lastFocusableElement){this.firstFocusableElement.focus();t.preventDefault()}if(t.shiftKey&&document.activeElement===this.firstFocusableElement){this.lastFocusableElement.focus();t.preventDefault()}}disconnectedCallback(){document.body.style.overflow="visible"}prepareFocusTrap(){const t='button,ir-dropdown ,[href], input, select, textarea, [tabindex]:not([tabindex="-1"])';const e=this.el.shadowRoot.querySelectorAll(t);if(e.length===0)return;this.firstFocusableElement=e[0];this.lastFocusableElement=e[e.length-1];this.firstFocusableElement.focus()}render(){return e(i,{key:"9900c913e4258481663af5d2071bb769dbc0beb3"},e("div",{key:"c0e907e6d69872846e211f655d543b04931b7896",class:"backdrop","data-state":this.isOpen?"opened":"closed",onClick:()=>this.closeModal()}),this.isOpen&&e("div",{key:"696cf79e95e661668ec3b7240dd5b74423e2dac4",class:"modal-container",tabIndex:-1,role:"dialog","aria-labelledby":"dialog1Title","aria-describedby":"dialog1Desc"},e("ir-icon",{key:"d7754e4a62d9ec02e36d855c8d9320b1ed977e73",id:"close",class:"dialog-close-button",onIconClickHandler:()=>this.closeModal()},e("svg",{key:"badc067faf56f4a909d42eb26cadeba514d7f509",slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",height:18,width:18},e("path",{key:"8cca44580a771a8110f6ebbe41d360cc60f69c57",fill:"#104064",class:"currentColor",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"}))),e("div",{key:"1327fb017e71e9fdd9eef713955e75f7f5022d6c",class:"modal-title",id:"dialog1Title"},e("slot",{key:"e0a4da5ed873a630ae92b839093cea67d17a311a",name:"modal-title"})),e("div",{key:"bdcce5b3a3a15b98fe903a5a5c41bfdaf72f9485",class:"modal-body",id:"dialog1Desc"},e("slot",{key:"52a38edf626c63fd95980a0212bd3eba417d3620",name:"modal-body"})),e("div",{key:"47e32aa98488719273630373295070f92d2c70d5",class:"modal-footer"},e("slot",{key:"bab559ea3b8228496998a6cae0d810db6c80c32f",name:"modal-footer"}))))}get el(){return a(this)}static get watchers(){return{open:["handleOpenChange"]}}};Ms.style=Bs;const Es=".dropdown-menu.sc-ir-dropdown{z-index:1000;width:100%;max-height:300px;overflow-y:auto}.dropdown.nav-item.show.sc-ir-dropdown .dropdown-menu.sc-ir-dropdown{display:block}.caret-icon.sc-ir-dropdown{position:absolute;top:50%;transform:translateY(-55%);right:0.25rem;z-index:99999}";const Ss=Es;const Is=class{constructor(e){t(this,e);this.optionChange=s(this,"optionChange",7);this.isOpen=false;this.focusedIndex=-1;this.itemChildren=[];this.mo=null;this.isComponentConnected=true;this.updateQueued=false;this.handleDocumentClick=t=>{if(!this.isComponentConnected||!this.el.contains(t.target)){this.closeDropdown()}};this.handleKeyDown=t=>{if(!this.isComponentConnected)return;const e=this.itemChildren.length-1;switch(t.key){case"ArrowDown":t.preventDefault();if(!this.isOpen){this.openDropdown();if(this.focusedIndex>=0&&this.focusedIndex<e){this.focusedIndex++;this.focusItemElement(this.focusedIndex)}else if(this.focusedIndex===-1){this.focusedIndex=0;this.focusItemElement(this.focusedIndex)}else if(this.focusedIndex===e){this.focusedIndex=0;this.focusItemElement(this.focusedIndex)}}else if(e>=0){this.focusedIndex=this.focusedIndex<e?this.focusedIndex+1:0;this.focusItemElement(this.focusedIndex)}break;case"ArrowUp":t.preventDefault();if(!this.isOpen){this.openDropdown();if(this.focusedIndex>0){this.focusedIndex--;this.focusItemElement(this.focusedIndex)}else if(this.focusedIndex===-1){this.focusedIndex=e;this.focusItemElement(this.focusedIndex)}else if(this.focusedIndex===0){this.focusedIndex=e;this.focusItemElement(this.focusedIndex)}}else if(e>=0){this.focusedIndex=this.focusedIndex>0?this.focusedIndex-1:e;this.focusItemElement(this.focusedIndex)}break;case"Enter":t.preventDefault();if(this.isOpen&&this.focusedIndex>=0){this.selectItemElement(this.focusedIndex)}else if(!this.isOpen){this.openDropdown()}break;case"Escape":t.preventDefault();this.closeDropdown();break;case"Tab":if(this.isOpen){this.closeDropdown()}break}}}componentWillLoad(){this.selectedOption=this.value;this.documentClickHandler=this.handleDocumentClick.bind(this);this.collectItemChildren();this.mo=new MutationObserver((()=>{if(!this.updateQueued){this.updateQueued=true;requestAnimationFrame((()=>{if(this.isComponentConnected){this.collectItemChildren();this.updateQueued=false}}))}}));this.mo.observe(this.el,{childList:true,subtree:true})}componentDidLoad(){document.addEventListener("click",this.documentClickHandler,{passive:true});requestAnimationFrame((()=>{if(this.isComponentConnected){this.updateItemElements();if(this.value){this.updateDropdownItemValue(this.value)}}}))}disconnectedCallback(){var t;this.isComponentConnected=false;document.removeEventListener("click",this.documentClickHandler);(t=this.mo)===null||t===void 0?void 0:t.disconnect();this.mo=null}handleDocumentKeyDown(t){if(!this.isOpen||!this.isComponentConnected)return;if(t.key==="Escape"){this.closeDropdown()}}handleDropdownItemSelect(t){if(!this.isComponentConnected)return;t.stopPropagation();this.selectOption(t.detail);t.target.setAttribute("aria-selected","true")}handleDropdownItemRegister(){if(!this.isComponentConnected)return;this.collectItemChildren()}handleDropdownItemUnregister(){if(!this.isComponentConnected)return;this.collectItemChildren()}handleValueChange(t,e){if(t!==e&&this.isComponentConnected){this.updateDropdownItemValue(t)}}updateDropdownItemValue(t){this.itemChildren.forEach((t=>t.removeAttribute("aria-selected")));const e=this.itemChildren.find((e=>e.value===t));if(e){e.setAttribute("aria-selected","true")}}getSelectedItemIndex(){if(!this.value)return-1;return this.itemChildren.findIndex((t=>t.value===this.value))}openDropdown(){try{this.isOpen=true;this.focusedIndex=this.getSelectedItemIndex();this.updateItemElements();if(this.focusedIndex>=0){requestAnimationFrame((()=>{this.scrollToSelectedItem()}))}}catch(t){console.log(t)}}closeDropdown(){this.isOpen=false;this.focusedIndex=-1;this.removeItemFocus()}collectItemChildren(){if(!this.isComponentConnected)return;const t=Array.from(this.el.querySelectorAll("ir-dropdown-item"));this.itemChildren=t;this.updateItemElements()}updateItemElements(){if(!this.isComponentConnected)return;this.itemChildren.forEach(((t,e)=>{t.setAttribute("data-slot-index",String(e));t.setAttribute("role","option");t.setAttribute("tabindex","-1")}))}removeItemFocus(){this.itemChildren.forEach((t=>{t.classList.remove("focused","active")}))}focusItemElement(t){this.removeItemFocus();if(t>=0&&t<this.itemChildren.length){const e=this.itemChildren[t];e.classList.add("focused");e.scrollIntoView({block:"nearest",behavior:"smooth"})}}selectItemElement(t){if(t>=0&&t<this.itemChildren.length){const e=this.itemChildren[t];e.click()}}scrollToSelectedItem(){if(this.focusedIndex>=0&&this.focusedIndex<this.itemChildren.length){const t=this.itemChildren[this.focusedIndex];if(t){t.scrollIntoView({block:"nearest",behavior:"smooth",inline:"nearest"})}}}selectOption(t){this.selectedOption=t;this.value=t;this.optionChange.emit(t);this.closeDropdown()}render(){return e(i,{key:"1a33b040ad6134a70040e10c7b05ab94d304607d",class:`dropdown ${this.isOpen?"show":""}`},e("div",{key:"0ced1d6c34523c365fe798303b75942a574cfe52",onClick:()=>{if(this.isOpen){this.closeDropdown()}else{this.openDropdown()}},class:"position-relative",onKeyDown:this.handleKeyDown,tabindex:"0"},e("slot",{key:"20cf8533b916d8681f4c4af811f4015c9fe086e0",name:"trigger"}),e("div",{key:"e5a1523f72bc1ef04988767af797aa29c8f5a3b2",class:"caret-icon"},e("ir-icons",{key:"eb6b61ebf4f74bb5dd116f6781ddf9aa2a80c680",name:!this.isOpen?"angle-down":"angle-up"}))),e("div",{key:"3565626baba126c3d7c557e7b5ecc8aa39e9b112",class:"dropdown-menu",role:"listbox","aria-expanded":this.isOpen.toString()},e("slot",{key:"1837c4c9afc827ca9b962729912a769631e4e812"})))}get el(){return a(this)}static get watchers(){return{value:["handleValueChange"]}}};Is.style=Ss;const Ts=".sc-ir-dropdown-item-h{display:block;cursor:pointer}[hidden].sc-ir-dropdown-item-h{display:none !important}.focused.sc-ir-dropdown-item-h{background:#f4f5fa !important}.active.sc-ir-dropdown-item-h,[aria-selected='true'].sc-ir-dropdown-item-h,.sc-ir-dropdown-item-h:active{outline:none;background-color:var(--blue, #1e9ff2) !important;color:white !important}.dropdown-item.sc-ir-dropdown-item-h{padding:0.5rem 1rem !important;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}";const Fs=Ts;const js=class{constructor(e){t(this,e);this.dropdownItemSelect=s(this,"dropdownItemSelect",7);this.dropdownItemRegister=s(this,"dropdownItemRegister",7);this.dropdownItemUnregister=s(this,"dropdownItemUnregister",7);this.isComponentConnected=true;this.hasRegistered=false;this.hidden=false;this.handleClick=t=>{t.stopPropagation();if(!this.isComponentConnected)return;this.dropdownItemSelect.emit(this.value)}}componentDidLoad(){if(this.isComponentConnected&&!this.hasRegistered){this.hasRegistered=true;requestAnimationFrame((()=>{if(this.isComponentConnected){this.dropdownItemRegister.emit()}}))}}disconnectedCallback(){this.isComponentConnected=false;if(this.hasRegistered&&this.el.parentElement){const t=this.el.closest("ir-dropdown");if(t&&document.contains(t)){this.dropdownItemUnregister.emit()}}this.hasRegistered=false}async matchesQuery(t){var e,i;if(!this.isComponentConnected)return false;const s=t.toLowerCase();const r=((i=(e=this.label)!==null&&e!==void 0?e:this.el.textContent)!==null&&i!==void 0?i:"").toLowerCase();return r.includes(s)}async setHidden(t){if(this.isComponentConnected){this.hidden=t}}render(){return e(i,{key:"ddc4e49651187296a424b2762cb357ca3a37595b",role:"option",tabindex:"-1","aria-selected":"false",class:{"dropdown-item":true,hidden:this.hidden},onClick:this.handleClick,"data-value":this.value},this.html_content?e("span",{innerHTML:this.html_content}):e("slot",null))}get el(){return a(this)}};js.style=Fs;const Ys=".sc-ir-events-log-h{display:block}.beta.sc-ir-events-log{background:var(--red);color:white;padding:0.2rem 0.3rem;font-size:12px;border-radius:4px;margin:0}.event-row.sc-ir-events-log{padding-bottom:0.5rem}.list-title.sc-ir-events-log{margin:0;padding:0;font-size:14px;font-weight:bold;width:fit-content}.list-item.sc-ir-events-log{margin:0;padding:0;font-size:14px;margin-left:5px;width:fit-content}.list-item.green.sc-ir-events-log{color:#629a4c;font-weight:600}.list-item.red.sc-ir-events-log{color:#ff4961;font-weight:600}.dates-row.sc-ir-events-log{display:flex;align-items:center;gap:0.875rem}";const $s=Ys;const zs=class{constructor(e){t(this,e)}componentWillLoad(){this.init()}async init(){try{this.bookingEvents=this.booking.events}catch(t){console.error(t)}}render(){var t;return e("div",{key:"08cbb954abf646045af6d0abe392d916bdb63160",class:"p-1"},e("div",{key:"7a9132b0ca420d4db6677a2ebcbcfa01f62551ce",class:"d-flex  align-items-center",style:{gap:"0.5rem"}},e("h3",{key:"8b7612f1fabe26a9450bdd3810fb011161306c33",class:" text-left p-0 m-0  dialog-title "},b.entries.Lcz_EventsLog)),S("/Get_Exposed_Booking_Events")?e("div",{class:"d-flex align-items-center justify-content-center dialog-container-height"},e("ir-spinner",null)):e(r,null,e("table",{class:" dialog-container-height"},e("thead",{style:{opacity:"0"}},e("tr",null,e("th",null,"date"),e("th",null,"user"),e("th",null,"status"))),e("tbody",null,(t=this.bookingEvents)===null||t===void 0?void 0:t.map((t=>e("tr",{key:t.id,class:"pb-1"},e("td",{class:"event-row dates-row"},e("span",null,t.date),e("span",null,String(t.hour).padStart(2,"0"),":",String(t.minute).padStart(2,"0"),":",String(t.second).padStart(2,"0"))),e("td",{class:"pl-3 event-row "},t.type),e("td",{class:"pl-1 event-row "},t.user))))))))}};zs.style=$s;const Ns=".sc-ir-extra-service-h{display:block}.extra-service-container.sc-ir-extra-service{display:flex;align-items:start;justify-content:space-between;gap:0.5rem}.extra-service-container.sc-ir-extra-service *.sc-ir-extra-service{padding:0;margin:0;box-sizing:border-box}.extra-service-actions.sc-ir-extra-service{display:flex;align-items:center;gap:0.5rem}.extra-service-conditional-date.sc-ir-extra-service{margin-top:0.5rem}.extra-service-price.sc-ir-extra-service{white-space:nowrap}.extra-service-description.sc-ir-extra-service{word-break:break-all}";const Rs=Ns;const Ls=class{constructor(e){t(this,e);this.editExtraService=s(this,"editExtraService",7);this.resetBookingEvt=s(this,"resetBookingEvt",7);this.bookingService=new l}async deleteService(){try{await this.bookingService.doBookingExtraService({service:this.service,is_remove:true,booking_nbr:this.bookingNumber});this.resetBookingEvt.emit(null)}catch(t){console.log(t)}}render(){return e(i,{key:"c27d94a1710cf991ceab294598e76ea9784bab82"},e("div",{key:"61ef29b41f73782c13db9f8a42fbe74820218bbd",class:"p-1"},e("div",{key:"8b0608696bfc853e6945b4ec90e1823a327aa5af",class:"extra-service-container"},e("p",{key:"4447c2d5743610f9994678d4986712856087a86c",class:"extra-service-description"},this.service.description),e("div",{key:"ce95afcbe3c2729d43ad1295379929250126a5a8",class:"extra-service-actions"},!!this.service.price&&this.service.price>0&&e("p",{key:"074934359a8db0b6dbd9f69dc670ae4e04b83f01",class:"extra-service-price p-0 m-0 font-weight-bold"},v(this.currencySymbol,this.service.price)),e("ir-button",{key:"daad82b348c141f60ec4306737080d75d8e0d913",id:`serviceEdit-${this.service.booking_system_id}`,class:"extra-service-edit-btn m-0 p-0",variant:"icon",icon_name:"edit",style:L.secondary,onClickHandler:()=>this.editExtraService.emit(this.service)}),e("ir-button",{key:"29d9431c1334c3121e27620148bba06683a8bace",class:"extra-service-delete-btn m-0 p-0",variant:"icon",onClickHandler:()=>this.irModalRef.openModal(),id:`roomDelete-${this.service.booking_system_id}`,icon_name:"trash",style:L.danger}))),e("div",{key:"e2d9db6b2a244fafe9914c58c5cff3d40899e651",class:"extra-service-conditional-date"},this.service.start_date&&this.service.end_date?e("ir-date-view",{class:"extra-service-date-view mr-1",from_date:this.service.start_date,to_date:this.service.end_date,showDateDifference:false}):this.service.start_date&&e("p",{class:"extra-service-date-view"},E(new Date(this.service.start_date)).format("MMM DD, YYYY")))),e("ir-modal",{key:"5511cf100769738fdc9a3e163c0479e6aa493cf3",autoClose:false,ref:t=>this.irModalRef=t,isLoading:S("/Do_Booking_Extra_Service"),onConfirmModal:this.deleteService.bind(this),iconAvailable:true,icon:"ft-alert-triangle danger h1",leftBtnText:b.entries.Lcz_Cancel,rightBtnText:b.entries.Lcz_Delete,leftBtnColor:"secondary",rightBtnColor:"danger",modalTitle:b.entries.Lcz_Confirmation,modalBody:`${b.entries["Lcz_AreYouSureDoYouWantToRemove "]} ${b.entries.Lcz_ThisService} ${b.entries.Lcz_FromThisBooking}`}))}};Ls.style=Rs;const Ps=T.object({type:T.object({code:T.union([T.string().min(3),T.literal("")]).optional(),description:T.union([T.string(),T.literal("")]).optional()}),number:T.union([T.string().min(2),T.literal("")]).optional().nullable()});const Vs=T.object({id:T.number().optional(),first_name:T.union([T.string().min(2),T.literal("")]).optional(),last_name:T.union([T.string().min(2),T.literal("")]).optional(),country_id:T.coerce.number().min(0).optional(),dob:T.string().nullable().optional().refine((t=>t===undefined||E(t,"DD/MM/YYYY",true).isValid()||t===""||t===null),"Invalid date format").transform((t=>{if(t===undefined||t===""||t===null)return null;const e=E(t,"DD/MM/YYYY",true).isValid();return e?null:E(t,"DD/MM/YYYY").format("YYYY-MM-DD")})),id_info:Ps.optional(),is_main:T.boolean().default(false)});function Hs(t){var e;Vs.parse(t);const i=t=>t!==null&&t!==undefined&&t.trim()!=="";const s=[];if(t.is_main){if(!i(t.first_name)){s.push({path:["first_name"],code:j.custom,message:"First name is required for main guest"})}if(!i(t.last_name)){s.push({path:["last_name"],code:j.custom,message:"Last name is required for main guest"})}}const r=i(t.first_name)||i(t.last_name)||i(t.dob)||t.country_id!==null&&t.country_id!==undefined&&t.country_id>0||i((e=t.id_info)===null||e===void 0?void 0:e.number);if(r){if(!i(t.first_name)){s.push({path:["first_name"],code:j.custom,message:"First name is required when other guest information is provided"})}if(!i(t.last_name)){s.push({path:["last_name"],code:j.custom,message:"Last name is required when other guest information is provided"})}}if(s.length>=1){throw new F(s)}}const Gs=T.object({booking_system_id:T.number().optional(),cost:T.coerce.number().nullable(),currency_id:T.number().min(1),description:T.string().min(1),end_date:T.string().nullable(),price:T.coerce.number(),start_date:T.string().nullable(),system_id:T.number().optional()});const Us=".sc-ir-extra-service-config-h{display:block;--ir-input-border-color:#cacfe7}.sc-ir-extra-service-config-h .input-group-text.sc-ir-extra-service-config{border-color:var(--ir-input-border-color)}.currency-ph.sc-ir-extra-service-config{padding:0;margin:0;color:#3b4781;display:flex;align-items:center;justify-content:center;padding:0 0 0 0.25rem;border-top:1px solid var(--ir-input-border-color);border-bottom:1px solid var(--ir-input-border-color);border-left:1px solid transparent;transition:border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;transition:border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.service-description-input.sc-ir-extra-service-config{height:70px !important}.service-description.sc-ir-extra-service-config .input-group-prepend.sc-ir-extra-service-config{background-color:#f4f5fa;border:1px solid var(--ir-input-border-color);border-top-left-radius:0.25rem;border-bottom-left-radius:0.25rem}.service-date-container.sc-ir-extra-service-config{padding:0;margin:0;display:flex;align-items:center;position:relative;width:100%;justify-content:center}.service-date-container.sc-ir-extra-service-config .btn-container.sc-ir-extra-service-config{position:absolute;right:5px;margin:0;display:flex;align-items:center;justify-content:center;padding:0}.service-description.sc-ir-extra-service-config .input-group-text.sc-ir-extra-service-config{height:fit-content;border:0;padding-top:0.75rem !important}.price-input-group.sc-ir-extra-service-config:focus-within .currency-ph.sc-ir-extra-service-config,.cost-input-group.sc-ir-extra-service-config:focus-within .currency-ph.sc-ir-extra-service-config{border-top:1px solid #1e9ff2;border-bottom:1px solid #1e9ff2;border-left:1px solid #1e9ff2}.currency-ph[data-state='error'].sc-ir-extra-service-config{border-color:var(--red, #ff4961)}.price-input.sc-ir-extra-service-config:focus{border-right-width:1px !important}.is-invalid.sc-ir-extra-service-config{background-image:none !important}.price-input.sc-ir-extra-service-config,.cost-input.sc-ir-extra-service-config{border-left:0}.row-group.sc-ir-extra-service-config{display:flex;flex-direction:column;gap:0.5rem}@media (min-width: 640px){.row-group.sc-ir-extra-service-config{flex-direction:row;align-items:center;gap:0}.cost-label.sc-ir-extra-service-config{border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}.until-prepend.sc-ir-extra-service-config,.cost-input-placeholder.sc-ir-extra-service-config{border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.date-from.sc-ir-extra-service-config,.price-input.sc-ir-extra-service-config{border-right-width:0 !important;border-top-right-radius:0 !important;border-bottom-right-radius:0 !important}}.date-focused.sc-ir-extra-service-config{border-color:#1e9ff2}";const Ks=Us;const Ws=".sc-ir-extra-service-config-h{height:100%}.sheet-container.sc-ir-extra-service-config{display:flex !important;flex-direction:column !important;background:white;height:100vh;gap:1rem;z-index:1000}.sheet-container.sc-ir-extra-service-config{height:-webkit-fill-available;height:100vh;height:100dvh}.sheet-footer.sc-ir-extra-service-config{position:sticky;bottom:0;z-index:20;background:white;border-top:1px solid #e4e5ec;display:flex;flex-direction:column;padding:1rem;gap:0.5rem}.sheet-header.sc-ir-extra-service-config{position:sticky;top:0;z-index:10;background:white}.sheet-body.sc-ir-extra-service-config{flex:1 1 0%}@media (min-width: 768px){.sheet-footer.sc-ir-extra-service-config{flex-direction:row;align-items:center}}";const qs=Ws;const Js=class{constructor(e){t(this,e);this.closeModal=s(this,"closeModal",7);this.resetBookingEvt=s(this,"resetBookingEvt",7);this.bookingService=new l}componentWillLoad(){if(this.service){this.s_service=Object.assign({},this.service)}}async saveAmenity(){try{Gs.parse(this.s_service);await this.bookingService.doBookingExtraService({service:this.s_service,booking_nbr:this.booking.booking_nbr,is_remove:false});this.resetBookingEvt.emit(null);this.closeModal.emit(null)}catch(t){if(t instanceof F){this.error=true}console.error(t)}}updateService(t){let e=this.s_service;if(!e){e={cost:null,description:null,end_date:null,start_date:null,price:null,currency_id:this.booking.currency.id}}this.s_service=Object.assign(Object.assign({},e),t)}validatePrice(){var t,e,i,s;if(((t=this.s_service)===null||t===void 0?void 0:t.price)===undefined||((i=(e=this.s_service)===null||e===void 0?void 0:e.price)===null||i===void 0?void 0:i.toString())===""){return false}const r=Gs.pick({price:true});const a=r.safeParse({price:(s=this.s_service)===null||s===void 0?void 0:s.price});return a.success}render(){var t,i,s,r,a,n,o,l,c,h,d,u,p,f;return e("form",{key:"f8bd9a5202fd899facfe900128c8d56bf4a8e7ef",class:"sheet-container",onSubmit:async t=>{t.preventDefault();await this.saveAmenity()}},e("ir-title",{key:"c6afac1577b2deff5f61dc24415469638b986174",class:"px-1 sheet-header",onCloseSideBar:()=>this.closeModal.emit(null),label:b.entries.Lcz_ExtraServices,displayContext:"sidebar"}),e("section",{key:"8d6aab346073f4039c7b68c0156e86933976c012",class:"px-1 sheet-body"},e("fieldset",{key:"03334d806aaba87a73554ad2d45b70fae7736bfc",class:"input-group mb-1 service-description"},e("div",{key:"530fc4331dd39e457dd7717e4502755b13d4ed39",class:"input-group-prepend"},e("span",{key:"cd755a1955705a9913b49fbd22e755415beaa47e",class:"input-group-text"},b.entries.Lcz_Description)),e("textarea",{key:"2786e785a2cb7da4c1e25a7d637bb9b7c50b8b91",value:(t=this.s_service)===null||t===void 0?void 0:t.description,class:`form-control service-description-input ${this.error&&!((i=this.s_service)===null||i===void 0?void 0:i.description)?"is-invalid":""}`,style:{height:"7rem"},maxLength:250,onChange:t=>this.updateService({description:t.target.value}),"aria-label":"Amenity description"})),e("div",{key:"c735e26a8d877817a9dce04e79e2051d9c9112cb",class:"row-group mb-1"},e("div",{key:"6ebf0053bb2844c1d9ecc9c81a64d82f760248af",class:"input-group"},e("div",{key:"c83ca3bd6b8b5178d2a4f6307f84acb1a433fc78",class:"input-group-prepend"},e("span",{key:"39bef9d2ea5a77de5aea08b0f360b1189ca8f0c1",class:"input-group-text",id:"basic-addon1"},b.entries.Lcz_DatesOn)),e("div",{key:"ead019a28cc9f69cc6c868f2db368b2245117b88",class:"form-control p-0 m-0 d-flex align-items-center justify-content-center date-from"},e("div",{key:"ea266e480a2ce5c64fec3370958dc6107c0b19f7",class:"service-date-container"},e("ir-date-picker",{key:"ba7215b64215012e426f7dd7770c771a2474b5f9",emitEmptyDate:true,date:(s=this.s_service)===null||s===void 0?void 0:s.start_date,minDate:this.booking.from_date,maxDate:this.booking.to_date,onDateChanged:t=>{var e;return this.updateService({start_date:(e=t.detail.start)===null||e===void 0?void 0:e.format("YYYY-MM-DD")})}},e("input",{key:"d8e9b44a995f9be5b6414a9a9b0e90aa3d40daaa",type:"text",slot:"trigger",value:((r=this.s_service)===null||r===void 0?void 0:r.start_date)?H(this.s_service.start_date):null,style:{borderLeftWidth:"0",borderRightWidth:"0",width:"100%",borderRadius:"0"},class:"text-center w-100 form-control input-sm"})),((a=this.s_service)===null||a===void 0?void 0:a.start_date)&&e("div",{key:"fd7ed32e7db65d8539e1c0c1a3aa260122a407bf",class:"btn-container"},e("ir-button",{key:"f9bb8d6dd692d44ae8a3ca7f58d69011db214b31",title:"clear",id:"close",variant:"icon",style:{"--icon-size":"0.875rem"},icon_name:"xmark-fill",class:"ml-2",onClickHandler:t=>{t.stopImmediatePropagation();t.stopPropagation();this.updateService({start_date:null})}}))))),e("div",{key:"92d36dd21ef90cad79510061a9b2e456183a2bf3",class:"input-group"},e("div",{key:"8bc2d8ba8a732a02c0d91f5bdd1b0d2bd41f57f4",class:"input-group-prepend "},e("span",{key:"c8b76aca071ac48e4408561a94c9c2be6570cd88",class:"input-group-text until-prepend",id:"basic-addon1"},b.entries.Lcz_TillAndIncluding)),e("div",{key:"3f45d7c79699ee3e2d0b569c109da35adeafa030",class:"form-control p-0 m-0 d-flex align-items-center justify-content-center"},e("div",{key:"d42640d39101bec44f6ae3cd8e6323c193d5907c",class:"service-date-container"},e("ir-date-picker",{key:"5d1166d56045532d692ab5cace1b03c76fa01bdd",emitEmptyDate:true,date:(n=this.s_service)===null||n===void 0?void 0:n.end_date,minDate:(l=(o=this.s_service)===null||o===void 0?void 0:o.start_date)!==null&&l!==void 0?l:this.booking.from_date,maxDate:this.booking.to_date,onDateChanged:t=>{var e;t.stopImmediatePropagation();t.stopPropagation();this.updateService({end_date:(e=t.detail.start)===null||e===void 0?void 0:e.format("YYYY-MM-DD")})}},e("input",{key:"3eac663f700edf775cd07f7e89f8bcb56879ce5c",slot:"trigger",value:((c=this.s_service)===null||c===void 0?void 0:c.end_date)?H(this.s_service.end_date):null,style:{borderLeftWidth:"0",borderRightWidth:"0",width:"100%"},class:"text-center form-control input-sm"})),((h=this.s_service)===null||h===void 0?void 0:h.end_date)&&e("div",{key:"a3810aeeb7477651502d412e755f01d76e48c3d8",class:"btn-container"},e("ir-button",{key:"957b91a01649813d95dda8d14f3b8dd23b7cd0dd",title:"clear",id:"close",variant:"icon",style:{"--icon-size":"0.875rem"},icon_name:"xmark-fill",class:"ml-2",onClickHandler:t=>{t.stopImmediatePropagation();t.stopPropagation();this.updateService({end_date:null})}})))))),e("div",{key:"4a09784366b0462d7973d5d3e276ab59b020c55e",class:"row-group"},e("ir-price-input",{key:"89bcecd47b8150e1caa77d2a05565eb1a9bbf4de",label:"Price",currency:this.booking.currency.symbol,class:"ir-br-input-none",value:(u=(d=this.s_service)===null||d===void 0?void 0:d.price)===null||u===void 0?void 0:u.toString(),zod:Gs.pick({price:true}),"aria-label":b.entries.Lcz_Price,wrapKey:"price","aria-describedby":"service price",autoValidate:false,"data-state":this.error&&!this.validatePrice()?"error":"",onTextChange:t=>this.updateService({price:parseFloat(t.detail)})}),e("ir-price-input",{key:"bc3c1feea67c2bf43c22c58cc76ec8f1aae56afd",autoValidate:false,label:b.entries.Lcz_Cost,labelStyle:"rounded-0 border-left-0",currency:this.booking.currency.symbol,value:(f=(p=this.s_service)===null||p===void 0?void 0:p.cost)===null||f===void 0?void 0:f.toString(),zod:Gs.pick({cost:true}),onTextChange:t=>this.updateService({cost:parseFloat(t.detail)}),wrapKey:"cost","aria-label":"Cost","aria-describedby":"service cost"}))),e("div",{key:"f9395cf9b4698fc91d28c130c0cd26386bd2288a",class:"sheet-footer"},e("ir-button",{key:"2c60bacd835cceff319d8d5034e66f22043c1e3c",onClick:()=>this.closeModal.emit(null),btn_styles:"justify-content-center",class:`flex-fill`,text:b.entries.Lcz_Cancel,btn_color:"secondary"}),e("ir-button",{key:"b60099bd600e6ebca0cb38448c8fda123c389009",btn_styles:"justify-content-center align-items-center",class:"flex-fill",btn_type:"submit",isLoading:S("/Do_Booking_Extra_Service"),text:b.entries.Lcz_Save,btn_color:"primary"})))}};Js.style=Ks+qs;const Xs=".sc-ir-extra-services-h{display:block}";const Zs=Xs;const Qs=class{constructor(e){t(this,e)}render(){var t;return e(i,{key:"7dcb2166f8c3df55e0ccda040d84406ac44e34cc",class:"card p-0 "},(t=this.booking.extra_services)===null||t===void 0?void 0:t.map(((t,i)=>e(r,null,e("ir-extra-service",{bookingNumber:this.booking.booking_nbr,currencySymbol:this.booking.currency.symbol,key:t.booking_system_id,service:t}),i!==this.booking.extra_services.length-1&&e("hr",{class:"mr-2 ml-2 my-0 p-0"})))))}};Qs.style=Zs;const tr=".input-group-text.sc-ir-guest-info{min-width:10rem;text-align:left}.mobilePrefixSelect.sc-ir-guest-info{border-right-width:0;border-top-right-radius:0;border-bottom-right-radius:0}.mobilePrefixInput.sc-ir-guest-info{border-top-left-radius:0;border-bottom-left-radius:0}.check-container.sc-ir-guest-info{position:relative;cursor:pointer;font-size:14px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;align-items:center}.check-container.sc-ir-guest-info input.sc-ir-guest-info{position:relative;opacity:0;cursor:pointer;height:0;width:0}.check-container.sc-ir-guest-info .checkmark.sc-ir-guest-info{position:relative;top:0;left:0;height:20px;width:20px;border:1px solid #cacfe7;border-radius:4px;transition:all 0.3s ease}.check-container.sc-ir-guest-info input.sc-ir-guest-info:checked~.checkmark.sc-ir-guest-info{background-color:#1e9ff2;border-color:#1e9ff2}.checkmark.sc-ir-guest-info:after{content:'';position:absolute;display:none}.check-container.sc-ir-guest-info input.sc-ir-guest-info:checked~.checkmark.sc-ir-guest-info:after{display:block}.check-label.sc-ir-guest-info{margin-left:10px !important}.check-container.sc-ir-guest-info .checkmark.sc-ir-guest-info:after{left:6px;top:3px;width:6px;height:10px;border:solid white;border-width:0 2px 2px 0;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.ir-card-header.sc-ir-guest-info{width:100%;border-bottom:1px solid #e4e5ec}.close-icon.sc-ir-guest-info{margin:0}.border-theme.sc-ir-guest-info{border:1px solid #cacfe7}.loading-container.sc-ir-guest-info{height:100%;width:100%;display:flex;justify-content:center;align-items:center;margin:0;padding:0}";const er=tr;const ir=".sc-ir-guest-info-h{height:100%}.sheet-container.sc-ir-guest-info{display:flex !important;flex-direction:column !important;background:white;height:100vh;gap:1rem;z-index:1000}.sheet-container.sc-ir-guest-info{height:-webkit-fill-available;height:100vh;height:100dvh}.sheet-footer.sc-ir-guest-info{position:sticky;bottom:0;z-index:20;background:white;border-top:1px solid #e4e5ec;display:flex;flex-direction:column;padding:1rem;gap:0.5rem}.sheet-header.sc-ir-guest-info{position:sticky;top:0;z-index:10;background:white}.sheet-body.sc-ir-guest-info{flex:1 1 0%}@media (min-width: 768px){.sheet-footer.sc-ir-guest-info{flex-direction:row;align-items:center}}";const sr=ir;const rr=class{constructor(e){t(this,e);this.closeSideBar=s(this,"closeSideBar",7);this.resetBookingEvt=s(this,"resetBookingEvt",7);this.toast=s(this,"toast",7);this.guest=null;this.isLoading=true;this.autoValidate=false;this.bookingService=new l;this.roomService=new z;this.token=new R}async componentWillLoad(){if(this.ticket){this.token.setToken(this.ticket)}if(!!this.token.getToken())this.init()}ticketChanged(t,e){if(t===e){return}this.token.setToken(this.ticket);this.init()}async init(){try{console.log("first");this.isLoading=true;const[t,e,i]=await Promise.all([this.bookingService.fetchGuest(this.email),this.bookingService.getCountries(this.language),!b||!b.entries||Object.keys(b.entries).length===0?this.roomService.fetchLanguage(this.language):Promise.resolve(null)]);if(i){b.entries=i.entries;b.direction=i.direction}this.countries=e;this.guest=Object.assign(Object.assign({},t),{mobile:t.mobile_without_prefix})}catch(t){console.log(t)}finally{this.isLoading=false}}handleInputChange(t){this.guest=Object.assign(Object.assign({},this.guest),t)}async editGuest(){var t;try{this.autoValidate=true;await this.bookingService.editExposedGuest(this.guest,(t=this.booking_nbr)!==null&&t!==void 0?t:null);this.toast.emit({type:"success",description:"",title:"Saved Successfully",position:"top-right"});this.closeSideBar.emit(null);this.resetBookingEvt.emit(null)}catch(t){console.log(t)}}render(){var t,i,s,a,n,o,l,c,h,d,u,p;if(this.isLoading&&this.isInSideBar){e("div",{class:"loading-container"},e("ir-spinner",null))}if(this.isLoading){return null}return e("form",{class:"p-0 sheet-container",onSubmit:async t=>{t.preventDefault();await this.editGuest()}},!this.isInSideBar&&[e("ir-toast",null),e("ir-interceptor",null)],this.headerShown&&e("ir-title",{class:"px-1 sheet-header",displayContext:"sidebar",label:b.entries.Lcz_GuestDetails}),e("div",{class:this.isInSideBar?"sheet-body":"card-content collapse show "},e("div",{class:this.headerShown?"card-body px-1 pt-0":"pt-0"},e("ir-input-text",{autoValidate:this.autoValidate,label:(t=b.entries)===null||t===void 0?void 0:t.Lcz_FirstName,name:"firstName",value:(i=this.guest)===null||i===void 0?void 0:i.first_name,required:true,onTextChange:t=>this.handleInputChange({first_name:t.detail})}),e("ir-input-text",{autoValidate:this.autoValidate,label:(s=b.entries)===null||s===void 0?void 0:s.Lcz_LastName,name:"lastName",value:(a=this.guest)===null||a===void 0?void 0:a.last_name,required:true,onTextChange:t=>this.handleInputChange({last_name:t.detail})}),e("ir-input-text",{label:(n=b.entries)===null||n===void 0?void 0:n.Lcz_Email,name:"email",value:(o=this.guest)===null||o===void 0?void 0:o.email,required:true,onTextChange:t=>this.handleInputChange({email:t.detail})}),e("ir-input-text",{label:(l=b.entries)===null||l===void 0?void 0:l.Lcz_AlternativeEmail,name:"altEmail",value:(c=this.guest)===null||c===void 0?void 0:c.alternative_email,onTextChange:t=>this.handleInputChange({alternative_email:t.detail})}),e("ir-country-picker",{country:this.countries.find((t=>t.id===this.guest.country_id)),label:(h=b.entries)===null||h===void 0?void 0:h.Lcz_Country,onCountryChange:t=>this.handleInputChange({country_id:t.detail.id}),countries:this.countries}),e("ir-phone-input",{onTextChange:t=>{t.stopImmediatePropagation();t.stopPropagation();const{mobile:e,phone_prefix:i}=t.detail;if(e!==this.guest.mobile){this.handleInputChange({mobile:e})}if(i!==this.guest.country_phone_prefix)this.handleInputChange({country_phone_prefix:i})},phone_prefix:this.guest.country_phone_prefix,value:this.guest.mobile,language:this.language,label:(d=b.entries)===null||d===void 0?void 0:d.Lcz_MobilePhone,countries:this.countries}),e("div",{class:"mb-2"},e("ir-textarea",{variant:"prepend",onTextChange:t=>this.handleInputChange({notes:t.detail}),value:(u=this.guest)===null||u===void 0?void 0:u.notes,label:(p=b.entries)===null||p===void 0?void 0:p.Lcz_PrivateNote})),e("div",{class:"p-0 m-0"},e("label",{class:`check-container m-0 p-0`},e("input",{class:"m-0 p-0",type:"checkbox",name:"newsletter",checked:this.guest.subscribe_to_news_letter,onInput:t=>this.handleInputChange({subscribe_to_news_letter:t.target.checked})}),e("span",{class:"checkmark m-0 p-0"}),e("span",{class:"m-0 p-0  check-label"},b.entries.Lcz_Newsletter)),!this.isInSideBar&&e(r,null,e("hr",null),e("ir-button",{btn_styles:"d-flex align-items-center justify-content-center",text:b.entries.Lcz_Save,onClickHandler:this.editGuest.bind(this),isLoading:S("/Edit_Exposed_Guest"),color:"btn-primary"}))))),this.isInSideBar&&e("div",{class:"sheet-footer"},e("ir-button",{"data-testid":"cancel",onClickHandler:()=>this.closeSideBar.emit(null),class:"flex-fill m-0 p-0",btn_styles:"w-100 m-0  justify-content-center align-items-center",btn_color:"secondary",text:b.entries.Lcz_Cancel}),e("ir-button",{"data-testid":"save",isLoading:S("/Edit_Exposed_Guest"),btn_disabled:this.isLoading,class:"flex-fill m-0",btn_type:"submit",btn_styles:"w-100 m-0  justify-content-center align-items-center",text:b.entries.Lcz_Save})))}static get watchers(){return{ticket:["ticketChanged"]}}};rr.style=er+sr;const ar=".sc-ir-icon-h{margin:0;padding:0}.icon-button.sc-ir-icon{all:unset;margin:0;padding:0;color:#6b6f82}.icon-button.sc-ir-icon:hover{cursor:pointer;color:#104064}";const nr=ar;const or=class{constructor(e){t(this,e);this.iconClickHandler=s(this,"iconClickHandler",7);this.icon="ft-check";this.type="button"}render(){return e("button",{key:"b3092d8d851ae0fad69d233b1c8e8576def61cab",type:this.type,class:"icon-button",onClick:()=>this.iconClickHandler.emit()},e("slot",{key:"1e8b834d03b5fec4872e7b8aed82ce0683efcd35",name:"icon"}))}};or.style=nr;const lr=".sc-ir-icons-h{display:block;box-sizing:border-box;margin:0;padding:0}.icon.sc-ir-icons{height:var(--icon-size, 1.25rem);width:var(--icon-size, 1.25rem);margin:0;padding:0}";const cr=lr;const hr=class{constructor(e){t(this,e)}render(){const t=P[this.name]||null;if(!t){return null}return e("svg",{xmlns:"http://www.w3.org/2000/svg",color:this.color,viewBox:t.viewBox,class:`icon ${this.svgClassName}`},e("path",{fill:"currentColor",d:t.d}))}};hr.style=cr;function dr(t){return typeof t==="string"||t instanceof String}function ur(t){var e;return typeof t==="object"&&t!=null&&(t==null||(e=t.constructor)==null?void 0:e.name)==="Object"}function pr(t,e){if(Array.isArray(e))return pr(t,((t,i)=>e.includes(i)));return Object.entries(t).reduce(((t,i)=>{let[s,r]=i;if(e(r,s))t[s]=r;return t}),{})}const fr={NONE:"NONE",LEFT:"LEFT",FORCE_LEFT:"FORCE_LEFT",RIGHT:"RIGHT",FORCE_RIGHT:"FORCE_RIGHT"};function br(t){switch(t){case fr.LEFT:return fr.FORCE_LEFT;case fr.RIGHT:return fr.FORCE_RIGHT;default:return t}}function mr(t){return t.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}function gr(t,e){if(e===t)return true;const i=Array.isArray(e),s=Array.isArray(t);let r;if(i&&s){if(e.length!=t.length)return false;for(r=0;r<e.length;r++)if(!gr(e[r],t[r]))return false;return true}if(i!=s)return false;if(e&&t&&typeof e==="object"&&typeof t==="object"){const i=e instanceof Date,s=t instanceof Date;if(i&&s)return e.getTime()==t.getTime();if(i!=s)return false;const a=e instanceof RegExp,n=t instanceof RegExp;if(a&&n)return e.toString()==t.toString();if(a!=n)return false;const o=Object.keys(e);for(r=0;r<o.length;r++)if(!Object.prototype.hasOwnProperty.call(t,o[r]))return false;for(r=0;r<o.length;r++)if(!gr(t[o[r]],e[o[r]]))return false;return true}else if(e&&t&&typeof e==="function"&&typeof t==="function"){return e.toString()===t.toString()}return false}class vr{constructor(t){Object.assign(this,t);while(this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos)){--this.oldSelection.start}if(this.insertedCount){while(this.value.slice(this.cursorPos)!==this.oldValue.slice(this.oldSelection.end)){if(this.value.length-this.cursorPos<this.oldValue.length-this.oldSelection.end)++this.oldSelection.end;else++this.cursorPos}}}get startChangePos(){return Math.min(this.cursorPos,this.oldSelection.start)}get insertedCount(){return this.cursorPos-this.startChangePos}get inserted(){return this.value.substr(this.startChangePos,this.insertedCount)}get removedCount(){return Math.max(this.oldSelection.end-this.startChangePos||this.oldValue.length-this.value.length,0)}get removed(){return this.oldValue.substr(this.startChangePos,this.removedCount)}get head(){return this.value.substring(0,this.startChangePos)}get tail(){return this.value.substring(this.startChangePos+this.insertedCount)}get removeDirection(){if(!this.removedCount||this.insertedCount)return fr.NONE;return(this.oldSelection.end===this.cursorPos||this.oldSelection.start===this.cursorPos)&&this.oldSelection.end===this.oldSelection.start?fr.RIGHT:fr.LEFT}}function yr(t,e){return new yr.InputMask(t,e)}function kr(t){if(t==null)throw new Error("mask property should be defined");if(t instanceof RegExp)return yr.MaskedRegExp;if(dr(t))return yr.MaskedPattern;if(t===Date)return yr.MaskedDate;if(t===Number)return yr.MaskedNumber;if(Array.isArray(t)||t===Array)return yr.MaskedDynamic;if(yr.Masked&&t.prototype instanceof yr.Masked)return t;if(yr.Masked&&t instanceof yr.Masked)return t.constructor;if(t instanceof Function)return yr.MaskedFunction;console.warn("Mask not found for mask",t);return yr.Masked}function xr(t){if(!t)throw new Error("Options in not defined");if(yr.Masked){if(t.prototype instanceof yr.Masked)return{mask:t};const{mask:e=undefined,...i}=t instanceof yr.Masked?{mask:t}:ur(t)&&t.mask instanceof yr.Masked?t:{};if(e){const t=e.mask;return{...pr(e,((t,e)=>!e.startsWith("_"))),mask:e.constructor,_mask:t,...i}}}if(!ur(t))return{mask:t};return{...t}}function wr(t){if(yr.Masked&&t instanceof yr.Masked)return t;const e=xr(t);const i=kr(e.mask);if(!i)throw new Error("Masked class is not found for provided mask "+e.mask+", appropriate module needs to be imported manually before creating mask.");if(e.mask===i)delete e.mask;if(e._mask){e.mask=e._mask;delete e._mask}return new i(e)}yr.createMask=wr;class _r{get selectionStart(){let t;try{t=this._unsafeSelectionStart}catch{}return t!=null?t:this.value.length}get selectionEnd(){let t;try{t=this._unsafeSelectionEnd}catch{}return t!=null?t:this.value.length}select(t,e){if(t==null||e==null||t===this.selectionStart&&e===this.selectionEnd)return;try{this._unsafeSelect(t,e)}catch{}}get isActive(){return false}}yr.MaskElement=_r;const Dr=90;const Cr=89;class Or extends _r{constructor(t){super();this.input=t;this._onKeydown=this._onKeydown.bind(this);this._onInput=this._onInput.bind(this);this._onBeforeinput=this._onBeforeinput.bind(this);this._onCompositionEnd=this._onCompositionEnd.bind(this)}get rootElement(){var t,e,i;return(t=(e=(i=this.input).getRootNode)==null?void 0:e.call(i))!=null?t:document}get isActive(){return this.input===this.rootElement.activeElement}bindEvents(t){this.input.addEventListener("keydown",this._onKeydown);this.input.addEventListener("input",this._onInput);this.input.addEventListener("beforeinput",this._onBeforeinput);this.input.addEventListener("compositionend",this._onCompositionEnd);this.input.addEventListener("drop",t.drop);this.input.addEventListener("click",t.click);this.input.addEventListener("focus",t.focus);this.input.addEventListener("blur",t.commit);this._handlers=t}_onKeydown(t){if(this._handlers.redo&&(t.keyCode===Dr&&t.shiftKey&&(t.metaKey||t.ctrlKey)||t.keyCode===Cr&&t.ctrlKey)){t.preventDefault();return this._handlers.redo(t)}if(this._handlers.undo&&t.keyCode===Dr&&(t.metaKey||t.ctrlKey)){t.preventDefault();return this._handlers.undo(t)}if(!t.isComposing)this._handlers.selectionChange(t)}_onBeforeinput(t){if(t.inputType==="historyUndo"&&this._handlers.undo){t.preventDefault();return this._handlers.undo(t)}if(t.inputType==="historyRedo"&&this._handlers.redo){t.preventDefault();return this._handlers.redo(t)}}_onCompositionEnd(t){this._handlers.input(t)}_onInput(t){if(!t.isComposing)this._handlers.input(t)}unbindEvents(){this.input.removeEventListener("keydown",this._onKeydown);this.input.removeEventListener("input",this._onInput);this.input.removeEventListener("beforeinput",this._onBeforeinput);this.input.removeEventListener("compositionend",this._onCompositionEnd);this.input.removeEventListener("drop",this._handlers.drop);this.input.removeEventListener("click",this._handlers.click);this.input.removeEventListener("focus",this._handlers.focus);this.input.removeEventListener("blur",this._handlers.commit);this._handlers={}}}yr.HTMLMaskElement=Or;class Ar extends Or{constructor(t){super(t);this.input=t}get _unsafeSelectionStart(){return this.input.selectionStart!=null?this.input.selectionStart:this.value.length}get _unsafeSelectionEnd(){return this.input.selectionEnd}_unsafeSelect(t,e){this.input.setSelectionRange(t,e)}get value(){return this.input.value}set value(t){this.input.value=t}}yr.HTMLMaskElement=Or;class Br extends Or{get _unsafeSelectionStart(){const t=this.rootElement;const e=t.getSelection&&t.getSelection();const i=e&&e.anchorOffset;const s=e&&e.focusOffset;if(s==null||i==null||i<s){return i}return s}get _unsafeSelectionEnd(){const t=this.rootElement;const e=t.getSelection&&t.getSelection();const i=e&&e.anchorOffset;const s=e&&e.focusOffset;if(s==null||i==null||i>s){return i}return s}_unsafeSelect(t,e){if(!this.rootElement.createRange)return;const i=this.rootElement.createRange();i.setStart(this.input.firstChild||this.input,t);i.setEnd(this.input.lastChild||this.input,e);const s=this.rootElement;const r=s.getSelection&&s.getSelection();if(r){r.removeAllRanges();r.addRange(i)}}get value(){return this.input.textContent||""}set value(t){this.input.textContent=t}}yr.HTMLContenteditableMaskElement=Br;class Mr{constructor(){this.states=[];this.currentIndex=0}get currentState(){return this.states[this.currentIndex]}get isEmpty(){return this.states.length===0}push(t){if(this.currentIndex<this.states.length-1)this.states.length=this.currentIndex+1;this.states.push(t);if(this.states.length>Mr.MAX_LENGTH)this.states.shift();this.currentIndex=this.states.length-1}go(t){this.currentIndex=Math.min(Math.max(this.currentIndex+t,0),this.states.length-1);return this.currentState}undo(){return this.go(-1)}redo(){return this.go(+1)}clear(){this.states.length=0;this.currentIndex=0}}Mr.MAX_LENGTH=100;class Er{constructor(t,e){this.el=t instanceof _r?t:t.isContentEditable&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"?new Br(t):new Ar(t);this.masked=wr(e);this._listeners={};this._value="";this._unmaskedValue="";this._rawInputValue="";this.history=new Mr;this._saveSelection=this._saveSelection.bind(this);this._onInput=this._onInput.bind(this);this._onChange=this._onChange.bind(this);this._onDrop=this._onDrop.bind(this);this._onFocus=this._onFocus.bind(this);this._onClick=this._onClick.bind(this);this._onUndo=this._onUndo.bind(this);this._onRedo=this._onRedo.bind(this);this.alignCursor=this.alignCursor.bind(this);this.alignCursorFriendly=this.alignCursorFriendly.bind(this);this._bindEvents();this.updateValue();this._onChange()}maskEquals(t){var e;return t==null||((e=this.masked)==null?void 0:e.maskEquals(t))}get mask(){return this.masked.mask}set mask(t){if(this.maskEquals(t))return;if(!(t instanceof yr.Masked)&&this.masked.constructor===kr(t)){this.masked.updateOptions({mask:t});return}const e=t instanceof yr.Masked?t:wr({mask:t});e.unmaskedValue=this.masked.unmaskedValue;this.masked=e}get value(){return this._value}set value(t){if(this.value===t)return;this.masked.value=t;this.updateControl("auto")}get unmaskedValue(){return this._unmaskedValue}set unmaskedValue(t){if(this.unmaskedValue===t)return;this.masked.unmaskedValue=t;this.updateControl("auto")}get rawInputValue(){return this._rawInputValue}set rawInputValue(t){if(this.rawInputValue===t)return;this.masked.rawInputValue=t;this.updateControl();this.alignCursor()}get typedValue(){return this.masked.typedValue}set typedValue(t){if(this.masked.typedValueEquals(t))return;this.masked.typedValue=t;this.updateControl("auto")}get displayValue(){return this.masked.displayValue}_bindEvents(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this._onClick,focus:this._onFocus,commit:this._onChange,undo:this._onUndo,redo:this._onRedo})}_unbindEvents(){if(this.el)this.el.unbindEvents()}_fireEvent(t,e){const i=this._listeners[t];if(!i)return;i.forEach((t=>t(e)))}get selectionStart(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart}get cursorPos(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd}set cursorPos(t){if(!this.el||!this.el.isActive)return;this.el.select(t,t);this._saveSelection()}_saveSelection(){if(this.displayValue!==this.el.value){console.warn("Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly.")}this._selection={start:this.selectionStart,end:this.cursorPos}}updateValue(){this.masked.value=this.el.value;this._value=this.masked.value;this._unmaskedValue=this.masked.unmaskedValue;this._rawInputValue=this.masked.rawInputValue}updateControl(t){const e=this.masked.unmaskedValue;const i=this.masked.value;const s=this.masked.rawInputValue;const r=this.displayValue;const a=this.unmaskedValue!==e||this.value!==i||this._rawInputValue!==s;this._unmaskedValue=e;this._value=i;this._rawInputValue=s;if(this.el.value!==r)this.el.value=r;if(t==="auto")this.alignCursor();else if(t!=null)this.cursorPos=t;if(a)this._fireChangeEvents();if(!this._historyChanging&&(a||this.history.isEmpty))this.history.push({unmaskedValue:e,selection:{start:this.selectionStart,end:this.cursorPos}})}updateOptions(t){const{mask:e,...i}=t;const s=!this.maskEquals(e);const r=this.masked.optionsIsChanged(i);if(s)this.mask=e;if(r)this.masked.updateOptions(i);if(s||r)this.updateControl()}updateCursor(t){if(t==null)return;this.cursorPos=t;this._delayUpdateCursor(t)}_delayUpdateCursor(t){this._abortUpdateCursor();this._changingCursorPos=t;this._cursorChanging=setTimeout((()=>{if(!this.el)return;this.cursorPos=this._changingCursorPos;this._abortUpdateCursor()}),10)}_fireChangeEvents(){this._fireEvent("accept",this._inputEvent);if(this.masked.isComplete)this._fireEvent("complete",this._inputEvent)}_abortUpdateCursor(){if(this._cursorChanging){clearTimeout(this._cursorChanging);delete this._cursorChanging}}alignCursor(){this.cursorPos=this.masked.nearestInputPos(this.masked.nearestInputPos(this.cursorPos,fr.LEFT))}alignCursorFriendly(){if(this.selectionStart!==this.cursorPos)return;this.alignCursor()}on(t,e){if(!this._listeners[t])this._listeners[t]=[];this._listeners[t].push(e);return this}off(t,e){if(!this._listeners[t])return this;if(!e){delete this._listeners[t];return this}const i=this._listeners[t].indexOf(e);if(i>=0)this._listeners[t].splice(i,1);return this}_onInput(t){this._inputEvent=t;this._abortUpdateCursor();const e=new vr({value:this.el.value,cursorPos:this.cursorPos,oldValue:this.displayValue,oldSelection:this._selection});const i=this.masked.rawInputValue;const s=this.masked.splice(e.startChangePos,e.removed.length,e.inserted,e.removeDirection,{input:true,raw:true}).offset;const r=i===this.masked.rawInputValue?e.removeDirection:fr.NONE;let a=this.masked.nearestInputPos(e.startChangePos+s,r);if(r!==fr.NONE)a=this.masked.nearestInputPos(a,fr.NONE);this.updateControl(a);delete this._inputEvent}_onChange(){if(this.displayValue!==this.el.value)this.updateValue();this.masked.doCommit();this.updateControl();this._saveSelection()}_onDrop(t){t.preventDefault();t.stopPropagation()}_onFocus(t){this.alignCursorFriendly()}_onClick(t){this.alignCursorFriendly()}_onUndo(){this._applyHistoryState(this.history.undo())}_onRedo(){this._applyHistoryState(this.history.redo())}_applyHistoryState(t){if(!t)return;this._historyChanging=true;this.unmaskedValue=t.unmaskedValue;this.el.select(t.selection.start,t.selection.end);this._saveSelection();this._historyChanging=false}destroy(){this._unbindEvents();this._listeners.length=0;delete this.el}}yr.InputMask=Er;class Sr{static normalize(t){return Array.isArray(t)?t:[t,new Sr]}constructor(t){Object.assign(this,{inserted:"",rawInserted:"",tailShift:0,skip:false},t)}aggregate(t){this.inserted+=t.inserted;this.rawInserted+=t.rawInserted;this.tailShift+=t.tailShift;this.skip=this.skip||t.skip;return this}get offset(){return this.tailShift+this.inserted.length}get consumed(){return Boolean(this.rawInserted)||this.skip}equals(t){return this.inserted===t.inserted&&this.tailShift===t.tailShift&&this.rawInserted===t.rawInserted&&this.skip===t.skip}}yr.ChangeDetails=Sr;class Ir{constructor(t,e,i){if(t===void 0){t=""}if(e===void 0){e=0}this.value=t;this.from=e;this.stop=i}toString(){return this.value}extend(t){this.value+=String(t)}appendTo(t){return t.append(this.toString(),{tail:true}).aggregate(t._appendPlaceholder())}get state(){return{value:this.value,from:this.from,stop:this.stop}}set state(t){Object.assign(this,t)}unshift(t){if(!this.value.length||t!=null&&this.from>=t)return"";const e=this.value[0];this.value=this.value.slice(1);return e}shift(){if(!this.value.length)return"";const t=this.value[this.value.length-1];this.value=this.value.slice(0,-1);return t}}class Tr{constructor(t){this._value="";this._update({...Tr.DEFAULTS,...t});this._initialized=true}updateOptions(t){if(!this.optionsIsChanged(t))return;this.withValueRefresh(this._update.bind(this,t))}_update(t){Object.assign(this,t)}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue}}set state(t){this._value=t._value}reset(){this._value=""}get value(){return this._value}set value(t){this.resolve(t,{input:true})}resolve(t,e){if(e===void 0){e={input:true}}this.reset();this.append(t,e,"");this.doCommit()}get unmaskedValue(){return this.value}set unmaskedValue(t){this.resolve(t,{})}get typedValue(){return this.parse?this.parse(this.value,this):this.unmaskedValue}set typedValue(t){if(this.format){this.value=this.format(t,this)}else{this.unmaskedValue=String(t)}}get rawInputValue(){return this.extractInput(0,this.displayValue.length,{raw:true})}set rawInputValue(t){this.resolve(t,{raw:true})}get displayValue(){return this.value}get isComplete(){return true}get isFilled(){return this.isComplete}nearestInputPos(t,e){return t}totalInputPositions(t,e){if(t===void 0){t=0}if(e===void 0){e=this.displayValue.length}return Math.min(this.displayValue.length,e-t)}extractInput(t,e,i){if(t===void 0){t=0}if(e===void 0){e=this.displayValue.length}return this.displayValue.slice(t,e)}extractTail(t,e){if(t===void 0){t=0}if(e===void 0){e=this.displayValue.length}return new Ir(this.extractInput(t,e),t)}appendTail(t){if(dr(t))t=new Ir(String(t));return t.appendTo(this)}_appendCharRaw(t,e){if(!t)return new Sr;this._value+=t;return new Sr({inserted:t,rawInserted:t})}_appendChar(t,e,i){if(e===void 0){e={}}const s=this.state;let r;[t,r]=this.doPrepareChar(t,e);if(t){r=r.aggregate(this._appendCharRaw(t,e));if(!r.rawInserted&&this.autofix==="pad"){const i=this.state;this.state=s;let a=this.pad(e);const n=this._appendCharRaw(t,e);a=a.aggregate(n);if(n.rawInserted||a.equals(r)){r=a}else{this.state=i}}}if(r.inserted){let t;let a=this.doValidate(e)!==false;if(a&&i!=null){const e=this.state;if(this.overwrite===true){t=i.state;for(let t=0;t<r.rawInserted.length;++t){i.unshift(this.displayValue.length-r.tailShift)}}let s=this.appendTail(i);a=s.rawInserted.length===i.toString().length;if(!(a&&s.inserted)&&this.overwrite==="shift"){this.state=e;t=i.state;for(let t=0;t<r.rawInserted.length;++t){i.shift()}s=this.appendTail(i);a=s.rawInserted.length===i.toString().length}if(a&&s.inserted)this.state=e}if(!a){r=new Sr;this.state=s;if(i&&t)i.state=t}}return r}_appendPlaceholder(){return new Sr}_appendEager(){return new Sr}append(t,e,i){if(!dr(t))throw new Error("value should be string");const s=dr(i)?new Ir(String(i)):i;if(e!=null&&e.tail)e._beforeTailState=this.state;let r;[t,r]=this.doPrepare(t,e);for(let i=0;i<t.length;++i){const a=this._appendChar(t[i],e,s);if(!a.rawInserted&&!this.doSkipInvalid(t[i],e,s))break;r.aggregate(a)}if((this.eager===true||this.eager==="append")&&e!=null&&e.input&&t){r.aggregate(this._appendEager())}if(s!=null){r.tailShift+=this.appendTail(s).tailShift}return r}remove(t,e){if(t===void 0){t=0}if(e===void 0){e=this.displayValue.length}this._value=this.displayValue.slice(0,t)+this.displayValue.slice(e);return new Sr}withValueRefresh(t){if(this._refreshing||!this._initialized)return t();this._refreshing=true;const e=this.rawInputValue;const i=this.value;const s=t();this.rawInputValue=e;if(this.value&&this.value!==i&&i.indexOf(this.value)===0){this.append(i.slice(this.displayValue.length),{},"");this.doCommit()}delete this._refreshing;return s}runIsolated(t){if(this._isolated||!this._initialized)return t(this);this._isolated=true;const e=this.state;const i=t(this);this.state=e;delete this._isolated;return i}doSkipInvalid(t,e,i){return Boolean(this.skipInvalid)}doPrepare(t,e){if(e===void 0){e={}}return Sr.normalize(this.prepare?this.prepare(t,this,e):t)}doPrepareChar(t,e){if(e===void 0){e={}}return Sr.normalize(this.prepareChar?this.prepareChar(t,this,e):t)}doValidate(t){return(!this.validate||this.validate(this.value,this,t))&&(!this.parent||this.parent.doValidate(t))}doCommit(){if(this.commit)this.commit(this.value,this)}splice(t,e,i,s,r){if(i===void 0){i=""}if(s===void 0){s=fr.NONE}if(r===void 0){r={input:true}}const a=t+e;const n=this.extractTail(a);const o=this.eager===true||this.eager==="remove";let l;if(o){s=br(s);l=this.extractInput(0,a,{raw:true})}let c=t;const h=new Sr;if(s!==fr.NONE){c=this.nearestInputPos(t,e>1&&t!==0&&!o?fr.NONE:s);h.tailShift=c-t}h.aggregate(this.remove(c));if(o&&s!==fr.NONE&&l===this.rawInputValue){if(s===fr.FORCE_LEFT){let t;while(l===this.rawInputValue&&(t=this.displayValue.length)){h.aggregate(new Sr({tailShift:-1})).aggregate(this.remove(t-1))}}else if(s===fr.FORCE_RIGHT){n.unshift()}}return h.aggregate(this.append(i,r,n))}maskEquals(t){return this.mask===t}optionsIsChanged(t){return!gr(this,t)}typedValueEquals(t){const e=this.typedValue;return t===e||Tr.EMPTY_VALUES.includes(t)&&Tr.EMPTY_VALUES.includes(e)||(this.format?this.format(t,this)===this.format(this.typedValue,this):false)}pad(t){return new Sr}}Tr.DEFAULTS={skipInvalid:true};Tr.EMPTY_VALUES=[undefined,null,""];yr.Masked=Tr;class Fr{constructor(t,e){if(t===void 0){t=[]}if(e===void 0){e=0}this.chunks=t;this.from=e}toString(){return this.chunks.map(String).join("")}extend(t){if(!String(t))return;t=dr(t)?new Ir(String(t)):t;const e=this.chunks[this.chunks.length-1];const i=e&&(e.stop===t.stop||t.stop==null)&&t.from===e.from+e.toString().length;if(t instanceof Ir){if(i){e.extend(t.toString())}else{this.chunks.push(t)}}else if(t instanceof Fr){if(t.stop==null){let e;while(t.chunks.length&&t.chunks[0].stop==null){e=t.chunks.shift();e.from+=t.from;this.extend(e)}}if(t.toString()){t.stop=t.blockIndex;this.chunks.push(t)}}}appendTo(t){if(!(t instanceof yr.MaskedPattern)){const e=new Ir(this.toString());return e.appendTo(t)}const e=new Sr;for(let i=0;i<this.chunks.length;++i){const s=this.chunks[i];const r=t._mapPosToBlock(t.displayValue.length);const a=s.stop;let n;if(a!=null&&(!r||r.index<=a)){if(s instanceof Fr||t._stops.indexOf(a)>=0){e.aggregate(t._appendPlaceholder(a))}n=s instanceof Fr&&t._blocks[a]}if(n){const i=n.appendTail(s);e.aggregate(i);const r=s.toString().slice(i.rawInserted.length);if(r)e.aggregate(t.append(r,{tail:true}))}else{e.aggregate(t.append(s.toString(),{tail:true}))}}return e}get state(){return{chunks:this.chunks.map((t=>t.state)),from:this.from,stop:this.stop,blockIndex:this.blockIndex}}set state(t){const{chunks:e,...i}=t;Object.assign(this,i);this.chunks=e.map((t=>{const e="chunks"in t?new Fr:new Ir;e.state=t;return e}))}unshift(t){if(!this.chunks.length||t!=null&&this.from>=t)return"";const e=t!=null?t-this.from:t;let i=0;while(i<this.chunks.length){const t=this.chunks[i];const s=t.unshift(e);if(t.toString()){if(!s)break;++i}else{this.chunks.splice(i,1)}if(s)return s}return""}shift(){if(!this.chunks.length)return"";let t=this.chunks.length-1;while(0<=t){const e=this.chunks[t];const i=e.shift();if(e.toString()){if(!i)break;--t}else{this.chunks.splice(t,1)}if(i)return i}return""}}class jr{constructor(t,e){this.masked=t;this._log=[];const{offset:i,index:s}=t._mapPosToBlock(e)||(e<0?{index:0,offset:0}:{index:this.masked._blocks.length,offset:0});this.offset=i;this.index=s;this.ok=false}get block(){return this.masked._blocks[this.index]}get pos(){return this.masked._blockStartPos(this.index)+this.offset}get state(){return{index:this.index,offset:this.offset,ok:this.ok}}set state(t){Object.assign(this,t)}pushState(){this._log.push(this.state)}popState(){const t=this._log.pop();if(t)this.state=t;return t}bindBlock(){if(this.block)return;if(this.index<0){this.index=0;this.offset=0}if(this.index>=this.masked._blocks.length){this.index=this.masked._blocks.length-1;this.offset=this.block.displayValue.length}}_pushLeft(t){this.pushState();for(this.bindBlock();0<=this.index;--this.index,this.offset=((e=this.block)==null?void 0:e.displayValue.length)||0){var e;if(t())return this.ok=true}return this.ok=false}_pushRight(t){this.pushState();for(this.bindBlock();this.index<this.masked._blocks.length;++this.index,this.offset=0){if(t())return this.ok=true}return this.ok=false}pushLeftBeforeFilled(){return this._pushLeft((()=>{if(this.block.isFixed||!this.block.value)return;this.offset=this.block.nearestInputPos(this.offset,fr.FORCE_LEFT);if(this.offset!==0)return true}))}pushLeftBeforeInput(){return this._pushLeft((()=>{if(this.block.isFixed)return;this.offset=this.block.nearestInputPos(this.offset,fr.LEFT);return true}))}pushLeftBeforeRequired(){return this._pushLeft((()=>{if(this.block.isFixed||this.block.isOptional&&!this.block.value)return;this.offset=this.block.nearestInputPos(this.offset,fr.LEFT);return true}))}pushRightBeforeFilled(){return this._pushRight((()=>{if(this.block.isFixed||!this.block.value)return;this.offset=this.block.nearestInputPos(this.offset,fr.FORCE_RIGHT);if(this.offset!==this.block.value.length)return true}))}pushRightBeforeInput(){return this._pushRight((()=>{if(this.block.isFixed)return;this.offset=this.block.nearestInputPos(this.offset,fr.NONE);return true}))}pushRightBeforeRequired(){return this._pushRight((()=>{if(this.block.isFixed||this.block.isOptional&&!this.block.value)return;this.offset=this.block.nearestInputPos(this.offset,fr.NONE);return true}))}}class Yr{constructor(t){Object.assign(this,t);this._value="";this.isFixed=true}get value(){return this._value}get unmaskedValue(){return this.isUnmasking?this.value:""}get rawInputValue(){return this._isRawInput?this.value:""}get displayValue(){return this.value}reset(){this._isRawInput=false;this._value=""}remove(t,e){if(t===void 0){t=0}if(e===void 0){e=this._value.length}this._value=this._value.slice(0,t)+this._value.slice(e);if(!this._value)this._isRawInput=false;return new Sr}nearestInputPos(t,e){if(e===void 0){e=fr.NONE}const i=0;const s=this._value.length;switch(e){case fr.LEFT:case fr.FORCE_LEFT:return i;case fr.NONE:case fr.RIGHT:case fr.FORCE_RIGHT:default:return s}}totalInputPositions(t,e){if(t===void 0){t=0}if(e===void 0){e=this._value.length}return this._isRawInput?e-t:0}extractInput(t,e,i){if(t===void 0){t=0}if(e===void 0){e=this._value.length}if(i===void 0){i={}}return i.raw&&this._isRawInput&&this._value.slice(t,e)||""}get isComplete(){return true}get isFilled(){return Boolean(this._value)}_appendChar(t,e){if(e===void 0){e={}}if(this.isFilled)return new Sr;const i=this.eager===true||this.eager==="append";const s=this.char===t;const r=s&&(this.isUnmasking||e.input||e.raw)&&(!e.raw||!i)&&!e.tail;const a=new Sr({inserted:this.char,rawInserted:r?this.char:""});this._value=this.char;this._isRawInput=r&&(e.raw||e.input);return a}_appendEager(){return this._appendChar(this.char,{tail:true})}_appendPlaceholder(){const t=new Sr;if(this.isFilled)return t;this._value=t.inserted=this.char;return t}extractTail(){return new Ir("")}appendTail(t){if(dr(t))t=new Ir(String(t));return t.appendTo(this)}append(t,e,i){const s=this._appendChar(t[0],e);if(i!=null){s.tailShift+=this.appendTail(i).tailShift}return s}doCommit(){}get state(){return{_value:this._value,_rawInputValue:this.rawInputValue}}set state(t){this._value=t._value;this._isRawInput=Boolean(t._rawInputValue)}pad(t){return this._appendPlaceholder()}}class $r{constructor(t){const{parent:e,isOptional:i,placeholderChar:s,displayChar:r,lazy:a,eager:n,...o}=t;this.masked=wr(o);Object.assign(this,{parent:e,isOptional:i,placeholderChar:s,displayChar:r,lazy:a,eager:n})}reset(){this.isFilled=false;this.masked.reset()}remove(t,e){if(t===void 0){t=0}if(e===void 0){e=this.value.length}if(t===0&&e>=1){this.isFilled=false;return this.masked.remove(t,e)}return new Sr}get value(){return this.masked.value||(this.isFilled&&!this.isOptional?this.placeholderChar:"")}get unmaskedValue(){return this.masked.unmaskedValue}get rawInputValue(){return this.masked.rawInputValue}get displayValue(){return this.masked.value&&this.displayChar||this.value}get isComplete(){return Boolean(this.masked.value)||this.isOptional}_appendChar(t,e){if(e===void 0){e={}}if(this.isFilled)return new Sr;const i=this.masked.state;let s=this.masked._appendChar(t,this.currentMaskFlags(e));if(s.inserted&&this.doValidate(e)===false){s=new Sr;this.masked.state=i}if(!s.inserted&&!this.isOptional&&!this.lazy&&!e.input){s.inserted=this.placeholderChar}s.skip=!s.inserted&&!this.isOptional;this.isFilled=Boolean(s.inserted);return s}append(t,e,i){return this.masked.append(t,this.currentMaskFlags(e),i)}_appendPlaceholder(){if(this.isFilled||this.isOptional)return new Sr;this.isFilled=true;return new Sr({inserted:this.placeholderChar})}_appendEager(){return new Sr}extractTail(t,e){return this.masked.extractTail(t,e)}appendTail(t){return this.masked.appendTail(t)}extractInput(t,e,i){if(t===void 0){t=0}if(e===void 0){e=this.value.length}return this.masked.extractInput(t,e,i)}nearestInputPos(t,e){if(e===void 0){e=fr.NONE}const i=0;const s=this.value.length;const r=Math.min(Math.max(t,i),s);switch(e){case fr.LEFT:case fr.FORCE_LEFT:return this.isComplete?r:i;case fr.RIGHT:case fr.FORCE_RIGHT:return this.isComplete?r:s;case fr.NONE:default:return r}}totalInputPositions(t,e){if(t===void 0){t=0}if(e===void 0){e=this.value.length}return this.value.slice(t,e).length}doValidate(t){return this.masked.doValidate(this.currentMaskFlags(t))&&(!this.parent||this.parent.doValidate(this.currentMaskFlags(t)))}doCommit(){this.masked.doCommit()}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue,masked:this.masked.state,isFilled:this.isFilled}}set state(t){this.masked.state=t.masked;this.isFilled=t.isFilled}currentMaskFlags(t){var e;return{...t,_beforeTailState:(t==null||(e=t._beforeTailState)==null?void 0:e.masked)||(t==null?void 0:t._beforeTailState)}}pad(t){return new Sr}}$r.DEFAULT_DEFINITIONS={0:/\d/,a:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./};class zr extends Tr{updateOptions(t){super.updateOptions(t)}_update(t){const e=t.mask;if(e)t.validate=t=>t.search(e)>=0;super._update(t)}}yr.MaskedRegExp=zr;class Nr extends Tr{constructor(t){super({...Nr.DEFAULTS,...t,definitions:Object.assign({},$r.DEFAULT_DEFINITIONS,t==null?void 0:t.definitions)})}updateOptions(t){super.updateOptions(t)}_update(t){t.definitions=Object.assign({},this.definitions,t.definitions);super._update(t);this._rebuildMask()}_rebuildMask(){const t=this.definitions;this._blocks=[];this.exposeBlock=undefined;this._stops=[];this._maskedBlocks={};const e=this.mask;if(!e||!t)return;let i=false;let s=false;for(let r=0;r<e.length;++r){if(this.blocks){const t=e.slice(r);const i=Object.keys(this.blocks).filter((e=>t.indexOf(e)===0));i.sort(((t,e)=>e.length-t.length));const s=i[0];if(s){const{expose:t,repeat:e,...i}=xr(this.blocks[s]);const a={lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,overwrite:this.overwrite,autofix:this.autofix,...i,repeat:e,parent:this};const n=e!=null?new yr.RepeatBlock(a):wr(a);if(n){this._blocks.push(n);if(t)this.exposeBlock=n;if(!this._maskedBlocks[s])this._maskedBlocks[s]=[];this._maskedBlocks[s].push(this._blocks.length-1)}r+=s.length-1;continue}}let a=e[r];let n=a in t;if(a===Nr.STOP_CHAR){this._stops.push(this._blocks.length);continue}if(a==="{"||a==="}"){i=!i;continue}if(a==="["||a==="]"){s=!s;continue}if(a===Nr.ESCAPE_CHAR){++r;a=e[r];if(!a)break;n=false}const o=n?new $r({isOptional:s,lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,...xr(t[a]),parent:this}):new Yr({char:a,eager:this.eager,isUnmasking:i});this._blocks.push(o)}}get state(){return{...super.state,_blocks:this._blocks.map((t=>t.state))}}set state(t){if(!t){this.reset();return}const{_blocks:e,...i}=t;this._blocks.forEach(((t,i)=>t.state=e[i]));super.state=i}reset(){super.reset();this._blocks.forEach((t=>t.reset()))}get isComplete(){return this.exposeBlock?this.exposeBlock.isComplete:this._blocks.every((t=>t.isComplete))}get isFilled(){return this._blocks.every((t=>t.isFilled))}get isFixed(){return this._blocks.every((t=>t.isFixed))}get isOptional(){return this._blocks.every((t=>t.isOptional))}doCommit(){this._blocks.forEach((t=>t.doCommit()));super.doCommit()}get unmaskedValue(){return this.exposeBlock?this.exposeBlock.unmaskedValue:this._blocks.reduce(((t,e)=>t+=e.unmaskedValue),"")}set unmaskedValue(t){if(this.exposeBlock){const e=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.unmaskedValue=t;this.appendTail(e);this.doCommit()}else super.unmaskedValue=t}get value(){return this.exposeBlock?this.exposeBlock.value:this._blocks.reduce(((t,e)=>t+=e.value),"")}set value(t){if(this.exposeBlock){const e=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.value=t;this.appendTail(e);this.doCommit()}else super.value=t}get typedValue(){return this.exposeBlock?this.exposeBlock.typedValue:super.typedValue}set typedValue(t){if(this.exposeBlock){const e=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.typedValue=t;this.appendTail(e);this.doCommit()}else super.typedValue=t}get displayValue(){return this._blocks.reduce(((t,e)=>t+=e.displayValue),"")}appendTail(t){return super.appendTail(t).aggregate(this._appendPlaceholder())}_appendEager(){var t;const e=new Sr;let i=(t=this._mapPosToBlock(this.displayValue.length))==null?void 0:t.index;if(i==null)return e;if(this._blocks[i].isFilled)++i;for(let t=i;t<this._blocks.length;++t){const i=this._blocks[t]._appendEager();if(!i.inserted)break;e.aggregate(i)}return e}_appendCharRaw(t,e){if(e===void 0){e={}}const i=this._mapPosToBlock(this.displayValue.length);const s=new Sr;if(!i)return s;for(let a=i.index,n;n=this._blocks[a];++a){var r;const i=n._appendChar(t,{...e,_beforeTailState:(r=e._beforeTailState)==null||(r=r._blocks)==null?void 0:r[a]});s.aggregate(i);if(i.consumed)break}return s}extractTail(t,e){if(t===void 0){t=0}if(e===void 0){e=this.displayValue.length}const i=new Fr;if(t===e)return i;this._forEachBlocksInRange(t,e,((t,e,s,r)=>{const a=t.extractTail(s,r);a.stop=this._findStopBefore(e);a.from=this._blockStartPos(e);if(a instanceof Fr)a.blockIndex=e;i.extend(a)}));return i}extractInput(t,e,i){if(t===void 0){t=0}if(e===void 0){e=this.displayValue.length}if(i===void 0){i={}}if(t===e)return"";let s="";this._forEachBlocksInRange(t,e,((t,e,r,a)=>{s+=t.extractInput(r,a,i)}));return s}_findStopBefore(t){let e;for(let i=0;i<this._stops.length;++i){const s=this._stops[i];if(s<=t)e=s;else break}return e}_appendPlaceholder(t){const e=new Sr;if(this.lazy&&t==null)return e;const i=this._mapPosToBlock(this.displayValue.length);if(!i)return e;const s=i.index;const r=t!=null?t:this._blocks.length;this._blocks.slice(s,r).forEach((i=>{if(!i.lazy||t!=null){var s;e.aggregate(i._appendPlaceholder((s=i._blocks)==null?void 0:s.length))}}));return e}_mapPosToBlock(t){let e="";for(let i=0;i<this._blocks.length;++i){const s=this._blocks[i];const r=e.length;e+=s.displayValue;if(t<=e.length){return{index:i,offset:t-r}}}}_blockStartPos(t){return this._blocks.slice(0,t).reduce(((t,e)=>t+=e.displayValue.length),0)}_forEachBlocksInRange(t,e,i){if(e===void 0){e=this.displayValue.length}const s=this._mapPosToBlock(t);if(s){const t=this._mapPosToBlock(e);const r=t&&s.index===t.index;const a=s.offset;const n=t&&r?t.offset:this._blocks[s.index].displayValue.length;i(this._blocks[s.index],s.index,a,n);if(t&&!r){for(let e=s.index+1;e<t.index;++e){i(this._blocks[e],e,0,this._blocks[e].displayValue.length)}i(this._blocks[t.index],t.index,0,t.offset)}}}remove(t,e){if(t===void 0){t=0}if(e===void 0){e=this.displayValue.length}const i=super.remove(t,e);this._forEachBlocksInRange(t,e,((t,e,s,r)=>{i.aggregate(t.remove(s,r))}));return i}nearestInputPos(t,e){if(e===void 0){e=fr.NONE}if(!this._blocks.length)return 0;const i=new jr(this,t);if(e===fr.NONE){if(i.pushRightBeforeInput())return i.pos;i.popState();if(i.pushLeftBeforeInput())return i.pos;return this.displayValue.length}if(e===fr.LEFT||e===fr.FORCE_LEFT){if(e===fr.LEFT){i.pushRightBeforeFilled();if(i.ok&&i.pos===t)return t;i.popState()}i.pushLeftBeforeInput();i.pushLeftBeforeRequired();i.pushLeftBeforeFilled();if(e===fr.LEFT){i.pushRightBeforeInput();i.pushRightBeforeRequired();if(i.ok&&i.pos<=t)return i.pos;i.popState();if(i.ok&&i.pos<=t)return i.pos;i.popState()}if(i.ok)return i.pos;if(e===fr.FORCE_LEFT)return 0;i.popState();if(i.ok)return i.pos;i.popState();if(i.ok)return i.pos;return 0}if(e===fr.RIGHT||e===fr.FORCE_RIGHT){i.pushRightBeforeInput();i.pushRightBeforeRequired();if(i.pushRightBeforeFilled())return i.pos;if(e===fr.FORCE_RIGHT)return this.displayValue.length;i.popState();if(i.ok)return i.pos;i.popState();if(i.ok)return i.pos;return this.nearestInputPos(t,fr.LEFT)}return t}totalInputPositions(t,e){if(t===void 0){t=0}if(e===void 0){e=this.displayValue.length}let i=0;this._forEachBlocksInRange(t,e,((t,e,s,r)=>{i+=t.totalInputPositions(s,r)}));return i}maskedBlock(t){return this.maskedBlocks(t)[0]}maskedBlocks(t){const e=this._maskedBlocks[t];if(!e)return[];return e.map((t=>this._blocks[t]))}pad(t){const e=new Sr;this._forEachBlocksInRange(0,this.displayValue.length,(i=>e.aggregate(i.pad(t))));return e}}Nr.DEFAULTS={...Tr.DEFAULTS,lazy:true,placeholderChar:"_"};Nr.STOP_CHAR="`";Nr.ESCAPE_CHAR="\\";Nr.InputDefinition=$r;Nr.FixedDefinition=Yr;yr.MaskedPattern=Nr;class Rr extends Nr{get _matchFrom(){return this.maxLength-String(this.from).length}constructor(t){super(t)}updateOptions(t){super.updateOptions(t)}_update(t){const{to:e=this.to||0,from:i=this.from||0,maxLength:s=this.maxLength||0,autofix:r=this.autofix,...a}=t;this.to=e;this.from=i;this.maxLength=Math.max(String(e).length,s);this.autofix=r;const n=String(this.from).padStart(this.maxLength,"0");const o=String(this.to).padStart(this.maxLength,"0");let l=0;while(l<o.length&&o[l]===n[l])++l;a.mask=o.slice(0,l).replace(/0/g,"\\0")+"0".repeat(this.maxLength-l);super._update(a)}get isComplete(){return super.isComplete&&Boolean(this.value)}boundaries(t){let e="";let i="";const[,s,r]=t.match(/^(\D*)(\d*)(\D*)/)||[];if(r){e="0".repeat(s.length)+r;i="9".repeat(s.length)+r}e=e.padEnd(this.maxLength,"0");i=i.padEnd(this.maxLength,"9");return[e,i]}doPrepareChar(t,e){if(e===void 0){e={}}let i;[t,i]=super.doPrepareChar(t.replace(/\D/g,""),e);if(!t)i.skip=!this.isComplete;return[t,i]}_appendCharRaw(t,e){if(e===void 0){e={}}if(!this.autofix||this.value.length+1>this.maxLength)return super._appendCharRaw(t,e);const i=String(this.from).padStart(this.maxLength,"0");const s=String(this.to).padStart(this.maxLength,"0");const[r,a]=this.boundaries(this.value+t);if(Number(a)<this.from)return super._appendCharRaw(i[this.value.length],e);if(Number(r)>this.to){if(!e.tail&&this.autofix==="pad"&&this.value.length+1<this.maxLength){return super._appendCharRaw(i[this.value.length],e).aggregate(this._appendCharRaw(t,e))}return super._appendCharRaw(s[this.value.length],e)}return super._appendCharRaw(t,e)}doValidate(t){const e=this.value;const i=e.search(/[^0]/);if(i===-1&&e.length<=this._matchFrom)return true;const[s,r]=this.boundaries(e);return this.from<=Number(r)&&Number(s)<=this.to&&super.doValidate(t)}pad(t){const e=new Sr;if(this.value.length===this.maxLength)return e;const i=this.value;const s=this.maxLength-this.value.length;if(s){this.reset();for(let i=0;i<s;++i){e.aggregate(super._appendCharRaw("0",t))}i.split("").forEach((t=>this._appendCharRaw(t)))}return e}}yr.MaskedRange=Rr;const Lr="d{.}`m{.}`Y";class Pr extends Nr{static extractPatternOptions(t){const{mask:e,pattern:i,...s}=t;return{...s,mask:dr(e)?e:i}}constructor(t){super(Pr.extractPatternOptions({...Pr.DEFAULTS,...t}))}updateOptions(t){super.updateOptions(t)}_update(t){const{mask:e,pattern:i,blocks:s,...r}={...Pr.DEFAULTS,...t};const a=Object.assign({},Pr.GET_DEFAULT_BLOCKS());if(t.min)a.Y.from=t.min.getFullYear();if(t.max)a.Y.to=t.max.getFullYear();if(t.min&&t.max&&a.Y.from===a.Y.to){a.m.from=t.min.getMonth()+1;a.m.to=t.max.getMonth()+1;if(a.m.from===a.m.to){a.d.from=t.min.getDate();a.d.to=t.max.getDate()}}Object.assign(a,this.blocks,s);super._update({...r,mask:dr(e)?e:i,blocks:a})}doValidate(t){const e=this.date;return super.doValidate(t)&&(!this.isComplete||this.isDateExist(this.value)&&e!=null&&(this.min==null||this.min<=e)&&(this.max==null||e<=this.max))}isDateExist(t){return this.format(this.parse(t,this),this).indexOf(t)>=0}get date(){return this.typedValue}set date(t){this.typedValue=t}get typedValue(){return this.isComplete?super.typedValue:null}set typedValue(t){super.typedValue=t}maskEquals(t){return t===Date||super.maskEquals(t)}optionsIsChanged(t){return super.optionsIsChanged(Pr.extractPatternOptions(t))}}Pr.GET_DEFAULT_BLOCKS=()=>({d:{mask:Rr,from:1,to:31,maxLength:2},m:{mask:Rr,from:1,to:12,maxLength:2},Y:{mask:Rr,from:1900,to:9999}});Pr.DEFAULTS={...Nr.DEFAULTS,mask:Date,pattern:Lr,format:(t,e)=>{if(!t)return"";const i=String(t.getDate()).padStart(2,"0");const s=String(t.getMonth()+1).padStart(2,"0");const r=t.getFullYear();return[i,s,r].join(".")},parse:(t,e)=>{const[i,s,r]=t.split(".").map(Number);return new Date(r,s-1,i)}};yr.MaskedDate=Pr;class Vr extends Tr{constructor(t){super({...Vr.DEFAULTS,...t});this.currentMask=undefined}updateOptions(t){super.updateOptions(t)}_update(t){super._update(t);if("mask"in t){this.exposeMask=undefined;this.compiledMasks=Array.isArray(t.mask)?t.mask.map((t=>{const{expose:e,...i}=xr(t);const s=wr({overwrite:this._overwrite,eager:this._eager,skipInvalid:this._skipInvalid,...i});if(e)this.exposeMask=s;return s})):[]}}_appendCharRaw(t,e){if(e===void 0){e={}}const i=this._applyDispatch(t,e);if(this.currentMask){i.aggregate(this.currentMask._appendChar(t,this.currentMaskFlags(e)))}return i}_applyDispatch(t,e,i){if(t===void 0){t=""}if(e===void 0){e={}}if(i===void 0){i=""}const s=e.tail&&e._beforeTailState!=null?e._beforeTailState._value:this.value;const r=this.rawInputValue;const a=e.tail&&e._beforeTailState!=null?e._beforeTailState._rawInputValue:r;const n=r.slice(a.length);const o=this.currentMask;const l=new Sr;const c=o==null?void 0:o.state;this.currentMask=this.doDispatch(t,{...e},i);if(this.currentMask){if(this.currentMask!==o){this.currentMask.reset();if(a){this.currentMask.append(a,{raw:true});l.tailShift=this.currentMask.value.length-s.length}if(n){l.tailShift+=this.currentMask.append(n,{raw:true,tail:true}).tailShift}}else if(c){this.currentMask.state=c}}return l}_appendPlaceholder(){const t=this._applyDispatch();if(this.currentMask){t.aggregate(this.currentMask._appendPlaceholder())}return t}_appendEager(){const t=this._applyDispatch();if(this.currentMask){t.aggregate(this.currentMask._appendEager())}return t}appendTail(t){const e=new Sr;if(t)e.aggregate(this._applyDispatch("",{},t));return e.aggregate(this.currentMask?this.currentMask.appendTail(t):super.appendTail(t))}currentMaskFlags(t){var e,i;return{...t,_beforeTailState:((e=t._beforeTailState)==null?void 0:e.currentMaskRef)===this.currentMask&&((i=t._beforeTailState)==null?void 0:i.currentMask)||t._beforeTailState}}doDispatch(t,e,i){if(e===void 0){e={}}if(i===void 0){i=""}return this.dispatch(t,this,e,i)}doValidate(t){return super.doValidate(t)&&(!this.currentMask||this.currentMask.doValidate(this.currentMaskFlags(t)))}doPrepare(t,e){if(e===void 0){e={}}let[i,s]=super.doPrepare(t,e);if(this.currentMask){let t;[i,t]=super.doPrepare(i,this.currentMaskFlags(e));s=s.aggregate(t)}return[i,s]}doPrepareChar(t,e){if(e===void 0){e={}}let[i,s]=super.doPrepareChar(t,e);if(this.currentMask){let t;[i,t]=super.doPrepareChar(i,this.currentMaskFlags(e));s=s.aggregate(t)}return[i,s]}reset(){var t;(t=this.currentMask)==null||t.reset();this.compiledMasks.forEach((t=>t.reset()))}get value(){return this.exposeMask?this.exposeMask.value:this.currentMask?this.currentMask.value:""}set value(t){if(this.exposeMask){this.exposeMask.value=t;this.currentMask=this.exposeMask;this._applyDispatch()}else super.value=t}get unmaskedValue(){return this.exposeMask?this.exposeMask.unmaskedValue:this.currentMask?this.currentMask.unmaskedValue:""}set unmaskedValue(t){if(this.exposeMask){this.exposeMask.unmaskedValue=t;this.currentMask=this.exposeMask;this._applyDispatch()}else super.unmaskedValue=t}get typedValue(){return this.exposeMask?this.exposeMask.typedValue:this.currentMask?this.currentMask.typedValue:""}set typedValue(t){if(this.exposeMask){this.exposeMask.typedValue=t;this.currentMask=this.exposeMask;this._applyDispatch();return}let e=String(t);if(this.currentMask){this.currentMask.typedValue=t;e=this.currentMask.unmaskedValue}this.unmaskedValue=e}get displayValue(){return this.currentMask?this.currentMask.displayValue:""}get isComplete(){var t;return Boolean((t=this.currentMask)==null?void 0:t.isComplete)}get isFilled(){var t;return Boolean((t=this.currentMask)==null?void 0:t.isFilled)}remove(t,e){const i=new Sr;if(this.currentMask){i.aggregate(this.currentMask.remove(t,e)).aggregate(this._applyDispatch())}return i}get state(){var t;return{...super.state,_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map((t=>t.state)),currentMaskRef:this.currentMask,currentMask:(t=this.currentMask)==null?void 0:t.state}}set state(t){const{compiledMasks:e,currentMaskRef:i,currentMask:s,...r}=t;if(e)this.compiledMasks.forEach(((t,i)=>t.state=e[i]));if(i!=null){this.currentMask=i;this.currentMask.state=s}super.state=r}extractInput(t,e,i){return this.currentMask?this.currentMask.extractInput(t,e,i):""}extractTail(t,e){return this.currentMask?this.currentMask.extractTail(t,e):super.extractTail(t,e)}doCommit(){if(this.currentMask)this.currentMask.doCommit();super.doCommit()}nearestInputPos(t,e){return this.currentMask?this.currentMask.nearestInputPos(t,e):super.nearestInputPos(t,e)}get overwrite(){return this.currentMask?this.currentMask.overwrite:this._overwrite}set overwrite(t){this._overwrite=t}get eager(){return this.currentMask?this.currentMask.eager:this._eager}set eager(t){this._eager=t}get skipInvalid(){return this.currentMask?this.currentMask.skipInvalid:this._skipInvalid}set skipInvalid(t){this._skipInvalid=t}get autofix(){return this.currentMask?this.currentMask.autofix:this._autofix}set autofix(t){this._autofix=t}maskEquals(t){return Array.isArray(t)?this.compiledMasks.every(((e,i)=>{if(!t[i])return;const{mask:s,...r}=t[i];return gr(e,r)&&e.maskEquals(s)})):super.maskEquals(t)}typedValueEquals(t){var e;return Boolean((e=this.currentMask)==null?void 0:e.typedValueEquals(t))}}Vr.DEFAULTS={...Tr.DEFAULTS,dispatch:(t,e,i,s)=>{if(!e.compiledMasks.length)return;const r=e.rawInputValue;const a=e.compiledMasks.map(((a,n)=>{const o=e.currentMask===a;const l=o?a.displayValue.length:a.nearestInputPos(a.displayValue.length,fr.FORCE_LEFT);if(a.rawInputValue!==r){a.reset();a.append(r,{raw:true})}else if(!o){a.remove(l)}a.append(t,e.currentMaskFlags(i));a.appendTail(s);return{index:n,weight:a.rawInputValue.length,totalInputPositions:a.totalInputPositions(0,Math.max(l,a.nearestInputPos(a.displayValue.length,fr.FORCE_LEFT)))}}));a.sort(((t,e)=>e.weight-t.weight||e.totalInputPositions-t.totalInputPositions));return e.compiledMasks[a[0].index]}};yr.MaskedDynamic=Vr;class Hr extends Nr{constructor(t){super({...Hr.DEFAULTS,...t})}updateOptions(t){super.updateOptions(t)}_update(t){const{enum:e,...i}=t;if(e){const t=e.map((t=>t.length));const s=Math.min(...t);const r=Math.max(...t)-s;i.mask="*".repeat(s);if(r)i.mask+="["+"*".repeat(r)+"]";this.enum=e}super._update(i)}_appendCharRaw(t,e){if(e===void 0){e={}}const i=Math.min(this.nearestInputPos(0,fr.FORCE_RIGHT),this.value.length);const s=this.enum.filter((e=>this.matchValue(e,this.unmaskedValue+t,i)));if(s.length){if(s.length===1){this._forEachBlocksInRange(0,this.value.length,((t,i)=>{const r=s[0][i];if(i>=this.value.length||r===t.value)return;t.reset();t._appendChar(r,e)}))}const t=super._appendCharRaw(s[0][this.value.length],e);if(s.length===1){s[0].slice(this.unmaskedValue.length).split("").forEach((e=>t.aggregate(super._appendCharRaw(e))))}return t}return new Sr({skip:!this.isComplete})}extractTail(t,e){if(t===void 0){t=0}return new Ir("",t)}remove(t,e){if(t===void 0){t=0}if(e===void 0){e=this.displayValue.length}if(t===e)return new Sr;const i=Math.min(super.nearestInputPos(0,fr.FORCE_RIGHT),this.value.length);let s;for(s=t;s>=0;--s){const t=this.enum.filter((t=>this.matchValue(t,this.value.slice(i,s),i)));if(t.length>1)break}const r=super.remove(s,e);r.tailShift+=s-t;return r}get isComplete(){return this.enum.indexOf(this.value)>=0}}Hr.DEFAULTS={...Nr.DEFAULTS,matchValue:(t,e,i)=>t.indexOf(e,i)===i};yr.MaskedEnum=Hr;class Gr extends Tr{updateOptions(t){super.updateOptions(t)}_update(t){super._update({...t,validate:t.mask})}}yr.MaskedFunction=Gr;var Ur;class Kr extends Tr{constructor(t){super({...Kr.DEFAULTS,...t})}updateOptions(t){super.updateOptions(t)}_update(t){super._update(t);this._updateRegExps()}_updateRegExps(){const t="^"+(this.allowNegative?"[+|\\-]?":"");const e="\\d*";const i=(this.scale?"("+mr(this.radix)+"\\d{0,"+this.scale+"})?":"")+"$";this._numberRegExp=new RegExp(t+e+i);this._mapToRadixRegExp=new RegExp("["+this.mapToRadix.map(mr).join("")+"]","g");this._thousandsSeparatorRegExp=new RegExp(mr(this.thousandsSeparator),"g")}_removeThousandsSeparators(t){return t.replace(this._thousandsSeparatorRegExp,"")}_insertThousandsSeparators(t){const e=t.split(this.radix);e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator);return e.join(this.radix)}doPrepareChar(t,e){if(e===void 0){e={}}const[i,s]=super.doPrepareChar(this._removeThousandsSeparators(this.scale&&this.mapToRadix.length&&(e.input&&e.raw||!e.input&&!e.raw)?t.replace(this._mapToRadixRegExp,this.radix):t),e);if(t&&!i)s.skip=true;if(i&&!this.allowPositive&&!this.value&&i!=="-")s.aggregate(this._appendChar("-"));return[i,s]}_separatorsCount(t,e){if(e===void 0){e=false}let i=0;for(let s=0;s<t;++s){if(this._value.indexOf(this.thousandsSeparator,s)===s){++i;if(e)t+=this.thousandsSeparator.length}}return i}_separatorsCountFromSlice(t){if(t===void 0){t=this._value}return this._separatorsCount(this._removeThousandsSeparators(t).length,true)}extractInput(t,e,i){if(t===void 0){t=0}if(e===void 0){e=this.displayValue.length}[t,e]=this._adjustRangeWithSeparators(t,e);return this._removeThousandsSeparators(super.extractInput(t,e,i))}_appendCharRaw(t,e){if(e===void 0){e={}}const i=e.tail&&e._beforeTailState?e._beforeTailState._value:this._value;const s=this._separatorsCountFromSlice(i);this._value=this._removeThousandsSeparators(this.value);const r=this._value;this._value+=t;const a=this.number;let n=!isNaN(a);let o=false;if(n){let t;if(this.min!=null&&this.min<0&&this.number<this.min)t=this.min;if(this.max!=null&&this.max>0&&this.number>this.max)t=this.max;if(t!=null){if(this.autofix){this._value=this.format(t,this).replace(Kr.UNMASKED_RADIX,this.radix);o||(o=r===this._value&&!e.tail)}else{n=false}}n&&(n=Boolean(this._value.match(this._numberRegExp)))}let l;if(!n){this._value=r;l=new Sr}else{l=new Sr({inserted:this._value.slice(r.length),rawInserted:o?"":t,skip:o})}this._value=this._insertThousandsSeparators(this._value);const c=e.tail&&e._beforeTailState?e._beforeTailState._value:this._value;const h=this._separatorsCountFromSlice(c);l.tailShift+=(h-s)*this.thousandsSeparator.length;return l}_findSeparatorAround(t){if(this.thousandsSeparator){const e=t-this.thousandsSeparator.length+1;const i=this.value.indexOf(this.thousandsSeparator,e);if(i<=t)return i}return-1}_adjustRangeWithSeparators(t,e){const i=this._findSeparatorAround(t);if(i>=0)t=i;const s=this._findSeparatorAround(e);if(s>=0)e=s+this.thousandsSeparator.length;return[t,e]}remove(t,e){if(t===void 0){t=0}if(e===void 0){e=this.displayValue.length}[t,e]=this._adjustRangeWithSeparators(t,e);const i=this.value.slice(0,t);const s=this.value.slice(e);const r=this._separatorsCount(i.length);this._value=this._insertThousandsSeparators(this._removeThousandsSeparators(i+s));const a=this._separatorsCountFromSlice(i);return new Sr({tailShift:(a-r)*this.thousandsSeparator.length})}nearestInputPos(t,e){if(!this.thousandsSeparator)return t;switch(e){case fr.NONE:case fr.LEFT:case fr.FORCE_LEFT:{const i=this._findSeparatorAround(t-1);if(i>=0){const s=i+this.thousandsSeparator.length;if(t<s||this.value.length<=s||e===fr.FORCE_LEFT){return i}}break}case fr.RIGHT:case fr.FORCE_RIGHT:{const e=this._findSeparatorAround(t);if(e>=0){return e+this.thousandsSeparator.length}}}return t}doCommit(){if(this.value){const t=this.number;let e=t;if(this.min!=null)e=Math.max(e,this.min);if(this.max!=null)e=Math.min(e,this.max);if(e!==t)this.unmaskedValue=this.format(e,this);let i=this.value;if(this.normalizeZeros)i=this._normalizeZeros(i);if(this.padFractionalZeros&&this.scale>0)i=this._padFractionalZeros(i);this._value=i}super.doCommit()}_normalizeZeros(t){const e=this._removeThousandsSeparators(t).split(this.radix);e[0]=e[0].replace(/^(\D*)(0*)(\d*)/,((t,e,i,s)=>e+s));if(t.length&&!/\d$/.test(e[0]))e[0]=e[0]+"0";if(e.length>1){e[1]=e[1].replace(/0*$/,"");if(!e[1].length)e.length=1}return this._insertThousandsSeparators(e.join(this.radix))}_padFractionalZeros(t){if(!t)return t;const e=t.split(this.radix);if(e.length<2)e.push("");e[1]=e[1].padEnd(this.scale,"0");return e.join(this.radix)}doSkipInvalid(t,e,i){if(e===void 0){e={}}const s=this.scale===0&&t!==this.thousandsSeparator&&(t===this.radix||t===Kr.UNMASKED_RADIX||this.mapToRadix.includes(t));return super.doSkipInvalid(t,e,i)&&!s}get unmaskedValue(){return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix,Kr.UNMASKED_RADIX)}set unmaskedValue(t){super.unmaskedValue=t}get typedValue(){return this.parse(this.unmaskedValue,this)}set typedValue(t){this.rawInputValue=this.format(t,this).replace(Kr.UNMASKED_RADIX,this.radix)}get number(){return this.typedValue}set number(t){this.typedValue=t}get allowNegative(){return this.min!=null&&this.min<0||this.max!=null&&this.max<0}get allowPositive(){return this.min!=null&&this.min>0||this.max!=null&&this.max>0}typedValueEquals(t){return(super.typedValueEquals(t)||Kr.EMPTY_VALUES.includes(t)&&Kr.EMPTY_VALUES.includes(this.typedValue))&&!(t===0&&this.value==="")}}Ur=Kr;Kr.UNMASKED_RADIX=".";Kr.EMPTY_VALUES=[...Tr.EMPTY_VALUES,0];Kr.DEFAULTS={...Tr.DEFAULTS,mask:Number,radix:",",thousandsSeparator:"",mapToRadix:[Ur.UNMASKED_RADIX],min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,scale:2,normalizeZeros:true,padFractionalZeros:false,parse:Number,format:t=>t.toLocaleString("en-US",{useGrouping:false,maximumFractionDigits:20})};yr.MaskedNumber=Kr;const Wr={MASKED:"value",UNMASKED:"unmaskedValue",TYPED:"typedValue"};function qr(t,e,i){if(e===void 0){e=Wr.MASKED}if(i===void 0){i=Wr.MASKED}const s=wr(t);return t=>s.runIsolated((s=>{s[e]=t;return s[i]}))}function Jr(t,e,i,s){return qr(e,i,s)(t)}yr.PIPE_TYPE=Wr;yr.createPipe=qr;yr.pipe=Jr;class Xr extends Nr{get repeatFrom(){var t;return(t=Array.isArray(this.repeat)?this.repeat[0]:this.repeat===Infinity?0:this.repeat)!=null?t:0}get repeatTo(){var t;return(t=Array.isArray(this.repeat)?this.repeat[1]:this.repeat)!=null?t:Infinity}constructor(t){super(t)}updateOptions(t){super.updateOptions(t)}_update(t){var e,i,s;const{repeat:r,...a}=xr(t);this._blockOpts=Object.assign({},this._blockOpts,a);const n=wr(this._blockOpts);this.repeat=(e=(i=r!=null?r:n.repeat)!=null?i:this.repeat)!=null?e:Infinity;super._update({mask:"m".repeat(Math.max(this.repeatTo===Infinity&&((s=this._blocks)==null?void 0:s.length)||0,this.repeatFrom)),blocks:{m:n},eager:n.eager,overwrite:n.overwrite,skipInvalid:n.skipInvalid,lazy:n.lazy,placeholderChar:n.placeholderChar,displayChar:n.displayChar})}_allocateBlock(t){if(t<this._blocks.length)return this._blocks[t];if(this.repeatTo===Infinity||this._blocks.length<this.repeatTo){this._blocks.push(wr(this._blockOpts));this.mask+="m";return this._blocks[this._blocks.length-1]}}_appendCharRaw(t,e){if(e===void 0){e={}}const i=new Sr;for(let o=(s=(r=this._mapPosToBlock(this.displayValue.length))==null?void 0:r.index)!=null?s:Math.max(this._blocks.length-1,0),l,c;l=(a=this._blocks[o])!=null?a:c=!c&&this._allocateBlock(o);++o){var s,r,a,n;const h=l._appendChar(t,{...e,_beforeTailState:(n=e._beforeTailState)==null||(n=n._blocks)==null?void 0:n[o]});if(h.skip&&c){this._blocks.pop();this.mask=this.mask.slice(1);break}i.aggregate(h);if(h.consumed)break}return i}_trimEmptyTail(t,e){var i,s;if(t===void 0){t=0}const r=Math.max(((i=this._mapPosToBlock(t))==null?void 0:i.index)||0,this.repeatFrom,0);let a;if(e!=null)a=(s=this._mapPosToBlock(e))==null?void 0:s.index;if(a==null)a=this._blocks.length-1;let n=0;for(let t=a;r<=t;--t,++n){if(this._blocks[t].unmaskedValue)break}if(n){this._blocks.splice(a-n+1,n);this.mask=this.mask.slice(n)}}reset(){super.reset();this._trimEmptyTail()}remove(t,e){if(t===void 0){t=0}if(e===void 0){e=this.displayValue.length}const i=super.remove(t,e);this._trimEmptyTail(t,e);return i}totalInputPositions(t,e){if(t===void 0){t=0}if(e==null&&this.repeatTo===Infinity)return Infinity;return super.totalInputPositions(t,e)}get state(){return super.state}set state(t){this._blocks.length=t._blocks.length;this.mask=this.mask.slice(0,this._blocks.length);super.state=t}}yr.RepeatBlock=Xr;try{globalThis.IMask=yr}catch{}const Zr=".sc-ir-input-text-h{--ir-bg:#fff;--ir-primary:#1e9ff2;--ir-danger:#ff4961;--ir-border:#cacfe7;--ir-disabled-fg:#9aa1ac;--ir-readonly-bg:#f8f9fa;--ir-input-color:#3b4781;--ir-placeholder-color:#bbbfc6;--ir-floating-input-border:var(--ir-border);--ir-floating-input-border-radius:0.21rem;--ir-floating-input-height:2rem;--ir-focus-ring:none;--ir-focus-border-color:var(--ir-primary);--ir-floating-input-font-size:0.975rem;--ir-floating-input-line-height:1.45;--ir-floating-input-padding-y:0.75rem;--ir-floating-input-padding-x:1rem;--ir-floating-input-padding-x-with-affix:2rem;--ir-floating-label-fg:#6c757d;--ir-floating-label-fg-focus:#495057;--ir-floating-label-bg:#fff;--ir-floating-label-scale:0.88;--ir-floating-label-float-translateY:-70%;--ir-floating-label-resting-offset-inline:0.9rem;--ir-floating-label-resting-offset-inline-with-prefix:1.8rem;--ir-floating-input-affix-size:1rem;--ir-floating-input-affix-color:#6c757d;margin:0;padding:0;display:inline}.sc-ir-input-text-h{--blue:var(--ir-primary);--red:var(--ir-danger)}.border-theme.sc-ir-input-text{border:1px solid var(--ir-border)}.icon-container.sc-ir-input-text{color:#3b4781;border:1px solid var(--ir-border);font-size:var(--ir-floating-input-font-size);height:var(--ir-floating-input-height);background:var(--ir-bg);padding-right:0 !important;border-right:0;border-top-right-radius:0;border-bottom-right-radius:0;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}input.sc-ir-input-text:focus{border-color:var(--ir-primary) !important}.error-message.sc-ir-input-text{font-size:0.875rem;padding:0;margin:0.5rem 0 0;color:var(--ir-danger)}.ir-input[data-state='empty'].sc-ir-input-text{color:var(--ir-placeholder-color)}.input-container.sc-ir-input-text{display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;flex:1}.input-container.sc-ir-input-text input.sc-ir-input-text{padding-left:5px !important;padding-right:5px !important;border-left:0;border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.icon-container[data-state='focus'].sc-ir-input-text{border-color:var(--ir-primary)}.icon-container[data-disabled].sc-ir-input-text{background-color:#eceff1;border-color:rgba(118, 118, 118, 0.3)}.danger-border.sc-ir-input-text{border-color:var(--ir-danger)}.ir-floating-group.sc-ir-input-text{position:relative;display:block;border:1px solid var(--ir-floating-input-border);border-radius:var(--ir-floating-input-border-radius);background:var(--ir-bg);transition:border-color 120ms ease, box-shadow 120ms ease;padding:0}.ir-floating-group.sc-ir-input-text:focus-within{border-color:var(--ir-focus-border-color);box-shadow:var(--ir-focus-ring)}.ir-floating-group.has-error.sc-ir-input-text,.has-error.sc-ir-input-text .ir-floating-group.sc-ir-input-text{border-color:var(--ir-danger)}.ir-floating-group.is-disabled.sc-ir-input-text{background-color:#f1f3f5}.ir-floating-group.is-readonly.sc-ir-input-text{background-color:var(--ir-readonly-bg)}.ir-floating-input.sc-ir-input-text{width:100%;display:block;border:0;outline:0;background:transparent;color:var(--ir-input-color);font-size:var(--ir-floating-input-font-size);line-height:var(--ir-floating-input-line-height);border-radius:var(--ir-floating-input-border-radius);box-shadow:none;padding:var(--ir-floating-input-padding-y) var(--ir-floating-input-padding-x);height:var(--ir-floating-input-height)}.ir-floating-input.danger-border.sc-ir-input-text{box-shadow:none}.ir-floating-label.sc-ir-input-text{position:absolute;top:50%;transform:translateY(-50%);pointer-events:none;padding:0 0.4rem;color:var(--ir-floating-label-fg);background:transparent;transition:transform 120ms ease, color 120ms ease, top 120ms ease, background-color 120ms ease, opacity 120ms ease;opacity:0.95;line-height:1}.ir-floating-label.sc-ir-input-text:dir(rtl){right:var(--ir-floating-label-resting-offset-inline)}.ir-floating-label.sc-ir-input-text:dir(ltr){left:var(--ir-floating-label-resting-offset-inline)}.ir-floating-group.sc-ir-input-text:focus-within .ir-floating-label.sc-ir-input-text,.ir-floating-input.sc-ir-input-text:not(:placeholder-shown)+.ir-floating-label.sc-ir-input-text,.ir-floating-group[data-has-value='true'].sc-ir-input-text .ir-floating-label.sc-ir-input-text{top:0;transform:translateY(var(--ir-floating-label-float-translateY)) scale(var(--ir-floating-label-scale));background:var(--ir-floating-label-bg);color:var(--ir-floating-label-fg-focus);font-size:12px;padding:0}.ir-floating-group.has-error.sc-ir-input-text .ir-floating-label.sc-ir-input-text,.has-error.sc-ir-input-text .ir-floating-group.sc-ir-input-text .ir-floating-label.sc-ir-input-text{color:var(--ir-danger)}.ir-floating-group.is-disabled.sc-ir-input-text .ir-floating-label.sc-ir-input-text{color:var(--ir-disabled-fg)}@supports (-webkit-touch-callout: none){.ir-floating-input.sc-ir-input-text{border-radius:var(--ir-floating-input-border-radius)}}.prefix-container.sc-ir-input-text,.suffix-container.sc-ir-input-text{position:absolute;top:0;bottom:0;display:inline-flex;align-items:center;color:var(--ir-floating-input-affix-color);pointer-events:none}.prefix-container.sc-ir-input-text:dir(ltr){left:0.5rem}.suffix-container.sc-ir-input-text:dir(ltr){right:0.5rem}.prefix-container.sc-ir-input-text:dir(rtl){right:0.5rem}.suffix-container.sc-ir-input-text:dir(rtl){left:0.5rem}.sc-ir-input-text-s>[slot='prefix'],.sc-ir-input-text-s>[slot='suffix']{display:inline-flex;width:var(--ir-floating-input-affix-size);height:var(--ir-floating-input-affix-size)}.ir-floating-group[data-have-prefix='true'].sc-ir-input-text .ir-floating-input.sc-ir-input-text{padding:var(--ir-floating-input-padding-y) var(--ir-floating-input-padding-x-with-affix)}.ir-floating-group[data-have-prefix='true'].sc-ir-input-text .ir-floating-label.sc-ir-input-text:dir(ltr){left:var(--ir-floating-label-resting-offset-inline-with-prefix)}.ir-floating-group[data-have-prefix='true'].sc-ir-input-text .ir-floating-label.sc-ir-input-text:dir(rtl){right:var(--ir-floating-label-resting-offset-inline-with-prefix)}.no-slot.sc-ir-input-text{display:none}";const Qr=Zr;const ta=class{constructor(e){t(this,e);this.textChange=s(this,"textChange",7);this.inputBlur=s(this,"inputBlur",7);this.inputFocus=s(this,"inputFocus",7);this.inputStyles="";this.readonly=false;this.type="text";this.submitted=false;this.inputStyle=true;this.textSize="md";this.labelPosition="left";this.labelBackground=null;this.labelColor="dark";this.labelBorder="theme";this.labelWidth=3;this.variant="default";this.disabled=false;this.error=false;this.autoValidate=true;this.inputFocused=false}componentWillLoad(){if(this.el.id){this.id=this.el.id}else{this.id=M()}this.hasPrefixSlot=this.haveSlotPresent("prefix");this.hasSuffixSlot=this.haveSlotPresent("suffix")}componentDidLoad(){if(this.mask)this.initMask()}handleMaskChange(){this.initMask()}handleValueChange(t,e){if(t!==e){this.validateInput(this.value)}}initMask(){if(!this.mask||this.maskInstance){return}this.maskInstance=yr(this.inputRef,this.mask);this.maskInstance.on("accept",(()=>{const t=this.inputRef.value.trim()===""||this.maskInstance.unmaskedValue==="";if(t){this.inputRef.value="";this.textChange.emit(null)}else{this.inputRef.value=this.maskInstance.value;this.textChange.emit(this.maskInstance.value)}}))}haveSlotPresent(t){const e=this.el.querySelector(`[slot="${t}"]`);return e!==null}async validateInput(t,e=false){if(!this.autoValidate&&!e){if(this.error){this.updateErrorState(false)}return}if(this.zod){try{if(!this.asyncParse){this.zod.parse(this.wrapKey?{[this.wrapKey]:t}:t)}else{await this.zod.parseAsync(this.wrapKey?{[this.wrapKey]:t}:t)}if(this.error){this.updateErrorState(false)}}catch(t){console.log(t);this.updateErrorState(true)}}}handleInputChange(t){const e=t.target.value;const i=e==="";if(this.maskInstance){this.maskInstance.value=e}const s=i?null:this.maskInstance?this.maskInstance.value:e;this.textChange.emit(s)}updateErrorState(t){this.error=t;this.inputRef.setAttribute("aria-invalid",t?"true":"false")}handleBlur(t){this.validateInput(this.value,this.submitted);this.inputFocused=false;this.inputBlur.emit(t)}renderFloatingLabel(){const t=this.label||this.placeholder||"";const i=!!(this.value&&String(this.value).length>0);return e("div",{class:"form-group",style:this.inputContainerStyle},e("div",{class:`ir-floating-group ${this.error?"has-error":""} ${this.disabled?"is-disabled":""} ${this.readonly?"is-readonly":""}`,"data-has-value":String(i),"data-focused":String(this.inputFocused),"data-have-prefix":String(this.hasPrefixSlot),"data-have-suffix":String(this.hasSuffixSlot),part:"form-group"},e("span",{part:"prefix-container",class:{"prefix-container":true,"no-slot":!this.hasPrefixSlot}},e("slot",{name:"prefix"})),e("input",{part:"input","data-state":!!this.value?undefined:this.mask?"empty":undefined,maxLength:this.maxLength,"data-testid":this.testId,style:this.inputForcedStyle,id:this.id,name:this.name,ref:t=>this.inputRef=t,readOnly:this.readonly,type:this.type,class:`ir-input ir-floating-input ${this.inputStyles||""} ${this.error?"danger-border":""} text-${this.textSize}`,onBlur:this.handleBlur.bind(this),onFocus:t=>{this.inputFocused=true;this.inputFocus.emit(t)},placeholder:" ",autoComplete:this.autoComplete,autocomplete:this.autoComplete,value:this.value,onInput:this.handleInputChange.bind(this),required:this.required,disabled:this.disabled,"aria-invalid":String(this.error),"aria-required":String(this.required)}),e("label",{part:"label",htmlFor:this.id,class:"ir-floating-label"},t,this.required?" *":""),e("span",{part:"suffix-container",class:{"suffix-container":true,"no-slot":!this.hasSuffixSlot}},e("slot",{name:"suffix"}))),this.errorMessage&&this.error&&e("p",{part:"error-message",class:"error-message"},this.errorMessage))}render(){if(this.variant==="floating-label"){return this.renderFloatingLabel()}if(this.variant==="icon"){return e("fieldset",{class:"position-relative has-icon-left input-container"},e("label",{htmlFor:this.id,class:"input-group-prepend bg-white m-0"},e("span",{"data-disabled":this.disabled,"data-state":this.inputFocused?"focus":"",class:`input-group-text icon-container bg-white ${this.error?"danger-border":""}`,id:"basic-addon1"},e("slot",{name:"icon"}))),e("input",{maxLength:this.maxLength,"data-testid":this.testId,style:this.inputForcedStyle,"data-state":!!this.value?undefined:this.mask?"empty":undefined,id:this.id,ref:t=>this.inputRef=t,readOnly:this.readonly,type:this.type,class:`ir-input form-control bg-white pl-0 input-sm rate-input py-0 m-0 rateInputBorder ${this.error?"danger-border":""}`,onBlur:this.handleBlur.bind(this),onFocus:t=>{this.inputFocused=true;this.inputFocus.emit(t)},placeholder:this.placeholder,value:this.value,onInput:this.handleInputChange.bind(this),required:this.required,disabled:this.disabled,autoComplete:this.autoComplete}))}return e("div",{class:"form-group",style:this.inputContainerStyle},e("div",{class:"input-group row m-0"},this.label&&e("div",{class:`input-group-prepend col-${this.labelWidth} p-0 text-${this.labelColor}`},e("label",{htmlFor:this.id,class:`input-group-text ${this.labelPosition==="right"?"justify-content-end":this.labelPosition==="center"?"justify-content-center":""} ${this.labelBackground?"bg-"+this.labelBackground:""} flex-grow-1 text-${this.labelColor} border-${this.labelBorder==="none"?0:this.labelBorder} `},this.label,this.required?"*":"")),e("input",{maxLength:this.maxLength,"data-testid":this.testId,style:this.inputForcedStyle,"data-state":!!this.value?undefined:this.mask?"empty":undefined,id:this.id,ref:t=>this.inputRef=t,readOnly:this.readonly,type:this.type,class:this.clearBaseStyles?`${this.inputStyles}`:`${this.error?"border-danger":""} form-control text-${this.textSize} col-${this.label?12-this.labelWidth:12} ${this.readonly?"bg-white":""} ${this.inputStyles}`,onBlur:this.handleBlur.bind(this),onFocus:t=>{this.inputFocused=true;this.inputFocus.emit(t)},placeholder:this.placeholder,autoComplete:this.autoComplete,autocomplete:this.autoComplete,value:this.value,onInput:this.handleInputChange.bind(this),required:this.required,disabled:this.disabled})),this.errorMessage&&this.error&&e("p",{class:"error-message"},this.errorMessage))}get el(){return a(this)}static get watchers(){return{mask:["handleMaskChange"],value:["handleValueChange"]}}};ta.style=Qr;const ea=".page-loader.sc-ir-interceptor{width:1.25rem;height:1.25rem;border:2.5px solid #3f3f3f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}.loaderContainer.sc-ir-interceptor{padding:20px;display:flex;align-items:center;justify-content:center;border-radius:5px;background:white}.loadingScreenContainer.sc-ir-interceptor{position:fixed;top:0;left:0;height:100vh;width:100vw;z-index:100000;background:rgba(0, 0, 0, 0.2);pointer-events:all;display:flex;align-items:center;justify-content:center}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const ia=ea;const sa=class{constructor(e){t(this,e);this.toast=s(this,"toast",7);this.handledEndpoints=["/Get_Exposed_Calendar","/ReAllocate_Exposed_Room","/Get_Exposed_Bookings","/UnBlock_Exposed_Unit"];this.suppressToastEndpoints=[];this.isShown=false;this.isLoading=false;this.isUnassignedUnit=false;this.endpointsCount=0;this.isPageLoadingStopped=null}handleStopPageLoading(t){this.isLoading=false;this.isPageLoadingStopped=t.detail}componentWillLoad(){this.setupAxiosInterceptors()}setupAxiosInterceptors(){Y.interceptors.request.use(this.handleRequest.bind(this),this.handleError.bind(this));Y.interceptors.response.use(this.handleResponse.bind(this),this.handleError.bind(this))}extractEndpoint(t){return t.split("?")[0]}isHandledEndpoint(t){return this.handledEndpoints.includes(t)}handleRequest(t){const e=this.extractEndpoint(t.url);I[e]="pending";t.params=t.params||{};if(this.isHandledEndpoint(e)&&this.isPageLoadingStopped!==e){if(e!=="/Get_Exposed_Calendar"){this.isLoading=true}else{if(this.endpointsCount>0){this.isLoading=true}}}if(e==="/Get_Exposed_Calendar"){this.endpointsCount=this.endpointsCount+1}return t}async handleResponse(t){var e;const i=this.extractEndpoint(t.config.url);if(this.isHandledEndpoint(i)){this.isLoading=false;this.isPageLoadingStopped=null}I[i]="done";if(i==="/Validate_Exposed_OTP"){return t}if(t.data.ExceptionCode==="OTP"){return this.handleOtpResponse({response:t,extractedUrl:i})}if((e=t.data.ExceptionMsg)===null||e===void 0?void 0:e.trim()){this.handleResponseExceptions({response:t,extractedUrl:i})}return t}handleResponseExceptions({response:t,extractedUrl:e}){this.handleError(t.data.ExceptionMsg,e,t.data.ExceptionCode);throw new K(t.data.ExceptionMsg,t.data.ExceptionCode)}handleOtpResponse({extractedUrl:t,response:e}){this.showModal=true;this.email=e.data.ExceptionMsg;const i=t.slice(1);this.baseOTPUrl=i;if(i==="Check_OTP_Necessity"){let t;try{const i=typeof e.config.data==="string"?JSON.parse(e.config.data):e.config.data;t=i.METHOD_NAME}catch(e){console.error("Failed to parse request body for METHOD_NAME",e);t=i}this.requestUrl=t}else{this.requestUrl=i}this.pendingConfig=e.config;this.response=e;return new Promise(((t,e)=>{this.pendingResolve=t;this.pendingReject=e;setTimeout((()=>{var t;(t=this.otpModal)===null||t===void 0?void 0:t.openModal()}),10)}))}handleError(t,e,i){const s=this.suppressToastEndpoints.includes(e);if(!s||s&&!i){this.toast.emit({type:"error",title:t,description:"",position:"top-right"})}return Promise.reject(t)}async handleOtpFinished(t){if(!this.pendingConfig||!this.pendingResolve||!this.pendingReject){return}const{otp:e,type:i}=t.detail;if(i==="cancel"){const t={config:this.pendingConfig,data:{cancelled:true,baseOTPUrl:this.baseOTPUrl},status:0,statusText:"OTP Cancelled",headers:{},request:{}};this.pendingResolve(t)}else if(i==="success"){if(!e){this.pendingReject(new Error("OTP cancelled by user"))}else if(this.baseOTPUrl==="Check_OTP_Necessity"){this.pendingResolve(this.response)}else{try{const t=Object.assign(Object.assign({},this.pendingConfig),{data:typeof this.pendingConfig.data==="string"?JSON.parse(this.pendingConfig.data):this.pendingConfig.data||{}});const e=await Y.request(t);this.pendingResolve(e)}catch(t){this.pendingReject(t)}}}this.pendingConfig=undefined;this.pendingResolve=undefined;this.pendingReject=undefined;this.showModal=false;this.baseOTPUrl=null}render(){return e(i,{key:"5bf0884e0f9ff6a6e76dfad47e294f0fa6f2e838"},this.isLoading&&!this.isPageLoadingStopped&&e("div",{key:"183a74bf81b44fea8fb24980694370af900ca8bf",class:"loadingScreenContainer"},e("div",{key:"8a80d758bb93beac0c635d19bf730e6f678e066a",class:"loaderContainer"},e("span",{key:"734f0626780453b0e20e9fd88ca488fb7a1c4da6",class:"page-loader"}))),this.showModal&&e("ir-otp-modal",{key:"4ca1073a1d77da3a6019b5503fb0359e9834968b",email:this.email,baseOTPUrl:this.baseOTPUrl,requestUrl:this.requestUrl,ref:t=>this.otpModal=t,onOtpFinished:this.handleOtpFinished.bind(this)}))}};sa.style=ia;const ra=".logo.sc-ir-label{height:1.5rem;width:1.5rem}.sc-ir-label-h{display:flex;gap:5px;align-items:center}.icon.sc-ir-label{margin-left:3px;padding:0;margin-top:0;display:flex;align-items:center}.label_message.sc-ir-label{margin:0 3px;padding:0}.label_title.sc-ir-label{min-width:max-content;padding:0;margin:0;font-weight:600}.label_placeholder.sc-ir-label{color:#cacfe7;padding:0 !important;margin:0 !important}.icon-container.sc-ir-label{margin:0;padding:0}.country.sc-ir-label{height:16px;width:23px;border-radius:3px}svg.sc-ir-label{margin:0;padding:0}.label_wrapper_inline.sc-ir-label{display:inline;max-width:100%;gap:5px;margin-bottom:5px}.label_wrapper_flex.sc-ir-label{display:flex;align-items:center;gap:5px;max-width:100%;margin-bottom:5px}.label_title.sc-ir-label{font-weight:600;white-space:nowrap;display:inline}.label_message.sc-ir-label{display:inline;white-space:normal;word-break:break-word}";const aa=ra;const na=class{constructor(e){t(this,e);this.display="flex";this.renderContentAsHtml=false;this.image=null;this.isCountryImage=false;this.imageStyle="";this.ignoreEmptyContent=false}render(){var t,s,r;if(!this.placeholder&&!this.content&&!this.ignoreEmptyContent){return null}return e(i,{class:this.image?"align-items-center":""},e("div",{class:`${this.display==="inline"?"label_wrapper_inline":"label_wrapper_flex"} `,style:this.containerStyle},this.labelText&&e("p",{class:"label_title"},this.labelText),e("slot",{name:"prefix"}),this.image&&e("img",{src:this.image.src,alt:(t=this.image.alt)!==null&&t!==void 0?t:this.image.src,class:`p-0 m-0 ${this.isCountryImage?"country":"logo"} ${(s=this.image.style)!==null&&s!==void 0?s:""} ${(r=this.imageStyle)!==null&&r!==void 0?r:""}`}),this.content?this.renderContentAsHtml?e("p",{class:"label_message",innerHTML:this.content}):e("p",{class:"label_message"},this.content):e("p",{class:"label_placeholder"},this.placeholder),e("slot",null),e("slot",{name:"suffix"})))}};na.style=aa;const oa=".backdropModal.sc-ir-modal{background-color:rgba(0, 0, 0, 0.5);z-index:1000;position:fixed;top:0;left:0;height:100vh;width:100%;opacity:0;transition:opacity 0.3s ease-in-out;pointer-events:none}.backdropModal.active.sc-ir-modal{cursor:pointer;opacity:1 !important;pointer-events:all}.ir-modal[data-state='opened'].sc-ir-modal{opacity:1;visibility:visible;pointer-events:all;transition:all 0.3s ease-in-out}.ir-alert-content.sc-ir-modal{padding:1rem;background:white;border-radius:5px}.ir-alert-header.sc-ir-modal{display:flex;font-size:1rem;font-weight:700}.modal.sc-ir-modal{z-index:1001 !important}.modal-dialog.sc-ir-modal{height:100vh;display:flex;align-items:center}.ir-alert-footer.sc-ir-modal{gap:10px}.ir-modal.sc-ir-modal{position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);z-index:1050;width:90%;max-width:32rem;overflow:hidden;outline:0;opacity:0;transition:transform 0.3s ease-in-out, opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;visibility:hidden;pointer-events:none}.ir-modal.active.sc-ir-modal{opacity:1;transform:translate(-50%, 0);visibility:visible;pointer-events:all;transition:all 0.3s ease-in-out}";const la=oa;const ca=class{constructor(e){t(this,e);this.confirmModal=s(this,"confirmModal",7);this.cancelModal=s(this,"cancelModal",7);this.middleModal=s(this,"middleModal",7);this.modalTitle="Modal Title";this.modalBody="Modal Body";this.rightBtnActive=true;this.leftBtnActive=true;this.middleBtnActive=false;this.rightBtnText="Confirm";this.leftBtnText="Close";this.middleBtnText="More";this.isLoading=false;this.isMiddleButtonLoading=false;this.autoClose=true;this.rightBtnColor="primary";this.leftBtnColor="secondary";this.middleBtnColor="info";this.btnPosition="right";this.iconAvailable=false;this.icon="";this.isOpen=false;this.item={}}async openModal(){this.isOpen=true}async closeModal(){this.isOpen=false}btnClickHandler(t){let e=t.target;let i=e.name;if(i===this.leftBtnText){this.cancelModal.emit();this.item={};this.closeModal()}else if(i===this.middleBtnText){this.middleModal.emit(this.item);this.item={};if(this.autoClose)this.closeModal()}else if(i===this.rightBtnText){this.confirmModal.emit(this.item);this.item={};if(this.autoClose){this.closeModal()}}}render(){return[e("div",{key:"350087b8ad585e87eaaf6cbacbf4c7181dba7513",class:`backdropModal ${this.isOpen?"active":""}`,onClick:()=>{this.cancelModal.emit();if(this.autoClose&&!this.isLoading){this.closeModal()}}}),e("div",{key:"f715af9c50c6233a6a584619ef9ed5cbcc951c4c","data-state":this.isOpen?"opened":"closed",class:`ir-modal`,tabindex:"-1"},e("div",{key:"86822b60ee02c95fcaab62247fc019d8bddedf2d",class:`ir-alert-content p-2`},this.showTitle&&e("div",{key:"0079ae168b5c8134b47602dfd3eba6ec0e1944b1",class:`ir-alert-header`},e("p",{key:"b9a9d46eee6c46dd2b94a06649756b8199511f34"},this.modalTitle)),e("div",{key:"43433c82c19e25d21053016df4664457b2ba7bfa",class:"modal-body text-left p-0 mb-2"},e("div",{key:"499fa1db6d8144c39117d94dd0d35b95a79f4bb2"},this.modalBody)),e("div",{key:"8b461c61fb2ec1b2865107cac1ca3aaaca842f28",class:`ir-alert-footer border-0  d-flex justify-content-${this.btnPosition==="center"?"center":this.btnPosition==="left"?"start":"end"}`},this.leftBtnActive&&e("ir-button",{key:"83e16ebe742777cf8e78fe2e1cf0427a2106785d",btn_disabled:this.isLoading,btn_color:this.leftBtnColor,btn_block:true,text:this.leftBtnText,name:this.leftBtnText}),this.middleBtnActive&&e("ir-button",{key:"5092192a7a7ae3c6e5d46fe26e1d2632025fd59b",btn_disabled:this.isMiddleButtonLoading,btn_color:this.middleBtnColor,btn_block:true,text:this.middleBtnText,isLoading:this.isMiddleButtonLoading,name:this.middleBtnText}),this.rightBtnActive&&e("ir-button",{key:"bdd8a6bb122b31a1bbad4ea86cc42aecd21b517e",btn_color:this.rightBtnColor,btn_disabled:this.isLoading,isLoading:this.isLoading,btn_block:true,text:this.rightBtnText,name:this.rightBtnText}))))]}};ca.style=la;const ha=".otp-input-wrapper.sc-ir-otp{display:flex;gap:0.5rem;justify-content:space-evenly}.otp-digit.sc-ir-otp{--otp-size:3rem;width:var(--otp-size) !important;height:var(--otp-size) !important;padding:0;font-size:24px;font-weight:500;text-align:center;background-color:#fff;padding:0 !important}.otp-digit.sc-ir-otp:disabled{background-color:#e9ecef;cursor:not-allowed}input[type='number'].sc-ir-otp::-webkit-inner-spin-button,input[type='number'].sc-ir-otp::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type='number'].sc-ir-otp{-moz-appearance:textfield}@media (max-width: 480px){.otp-digit.sc-ir-otp{width:35px;height:45px;font-size:20px}.otp-input-wrapper.sc-ir-otp{gap:6px}}@media (max-width: 360px){.otp-digit.sc-ir-otp{width:30px;height:40px;font-size:18px}.otp-input-wrapper.sc-ir-otp{gap:4px}}";const da=ha;const ua=class{constructor(e){t(this,e);this.otpChange=s(this,"otpChange",7);this.otpComplete=s(this,"otpComplete",7);this.length=6;this.disabled=false;this.placeholder="";this.type="number";this.autoFocus=true;this.secure=false;this.numbersOnly=false;this.otpValues=[];this.inputRefs=[];this.handleInput=(t,e)=>{const i=t.target;let s=i.value;if(this.numbersOnly){s=s.replace(/[^0-9]/g,"")}if(s.length>1){s=s.slice(-1);i.value=s}this.otpValues[e]=s;this.emitChanges();if(s&&e<this.length-1){this.inputRefs[e+1].focus()}};this.handleKeyDown=(t,e)=>{switch(t.key){case"Backspace":if(!this.otpValues[e]&&e>0){this.inputRefs[e-1].focus();t.preventDefault()}break;case"Delete":this.otpValues[e]="";this.emitChanges();break;case"ArrowLeft":if(e>0){this.inputRefs[e-1].focus();t.preventDefault()}break;case"ArrowRight":if(e<this.length-1){this.inputRefs[e+1].focus();t.preventDefault()}break;case"Home":this.inputRefs[0].focus();t.preventDefault();break;case"End":this.inputRefs[this.length-1].focus();t.preventDefault();break}};this.handlePaste=(t,e)=>{var i;t.preventDefault();const s=((i=t.clipboardData)===null||i===void 0?void 0:i.getData("text"))||"";const r=this.numbersOnly?s.replace(/[^0-9]/g,""):s;for(let t=0;t<Math.min(r.length,this.length-e);t++){this.otpValues[e+t]=r[t]}this.inputRefs.forEach(((t,e)=>{t.value=this.otpValues[e]||""}));const a=this.otpValues.findIndex((t=>!t));if(a!==-1&&a<this.length){this.inputRefs[a].focus()}else{this.inputRefs[this.length-1].focus()}this.emitChanges()};this.handleFocus=t=>{const e=t.target;if(e.value){setTimeout((()=>e.select()),0)}}}componentWillLoad(){this.otpValues=Array(this.length).fill("");if(this.defaultValue){this.setValue(this.defaultValue)}}componentDidLoad(){if(this.autoFocus&&this.inputRefs[0]){setTimeout((()=>{this.inputRefs[0].focus()}),0)}}handleLengthChange(t){if(t<1)return;const e=this.otpValues.length;if(t>e){this.otpValues=[...this.otpValues,...Array(t-e).fill("")]}else if(t<e){this.otpValues=this.otpValues.slice(0,t)}this.emitChanges()}emitChanges(){const t=this.otpValues.join("");this.otpChange.emit(t);if(this.otpValues.every((t=>t!==""))&&this.otpValues.length===this.length){this.otpComplete.emit(t)}}clear(){this.otpValues=Array(this.length).fill("");this.inputRefs.forEach((t=>{t.value=""}));this.emitChanges();if(this.inputRefs[0]){this.inputRefs[0].focus()}}setValue(t){const e=t.split("");for(let t=0;t<this.length;t++){this.otpValues[t]=t<e.length?e[t]:""}this.inputRefs.forEach(((t,e)=>{t.value=this.otpValues[e]||""}));this.emitChanges()}render(){return e(i,{key:"c4a8db3e9e7b71b95d7bd660b1ca9ab17ac2227e",class:"otp-input-container"},e("div",{key:"5347ce2ec8421b094d80b8f10cc9fc19e1cccbbb",class:"otp-input-wrapper"},Array(this.length).fill(null).map(((t,i)=>e("input",{ref:t=>this.inputRefs[i]=t,type:this.type,inputmode:this.numbersOnly?"numeric":"text",class:"otp-digit form-control input-sm",maxlength:"1",placeholder:this.placeholder,disabled:this.disabled,autocomplete:"one-time-code",value:this.otpValues[i],onInput:t=>this.handleInput(t,i),onKeyDown:t=>this.handleKeyDown(t,i),onPaste:t=>this.handlePaste(t,i),onFocus:this.handleFocus,"aria-label":`Digit ${i+1} of ${this.length}`})))))}static get watchers(){return{length:["handleLengthChange"]}}};ua.style=da;const pa=":host{display:block}:root{--otp-modal-padding:1.5rem}.modal-backdrop{background-color:rgba(0, 0, 0, 0.5) !important}.otp-modal-header{border-bottom:0px !important}.otp-modal{z-index:9999999 !important;border:none;padding:0 !important;box-sizing:border-box;border:1px solid rgba(0, 0, 0, 0.2);border-radius:0.35rem;outline:0}.otp-modal-content{background-color:white;border:none;border-radius:0.35rem;outline:0}.otp-modal-title{margin-bottom:0;line-height:1.45}.otp-modal-body{max-height:100% !important;padding:0 var(--otp-modal-padding)}.otp-modal-header{display:flex;justify-content:space-between;padding:var(--otp-modal-padding);padding-bottom:1rem;border-top-left-radius:0.35rem;border-top-right-radius:0.35rem}.otp-modal-dialog{z-index:9999999 !important}.otp-modal-footer{border-top:0 !important;display:flex;gap:0.5rem;flex-direction:column;padding:var(--otp-modal-padding);padding-top:0.5rem !important}.verification-message{max-width:90%}.modal-loading-container{height:250px;width:80vw}@media (min-width: 768px){.otp-modal-dialog,.otp-modal-content{width:fit-content !important}.otp-modal-footer{flex-direction:row;align-items:center}.modal-loading-container{width:380px !important}.verification-message{max-width:350px !important}}";const fa=pa;const ba=class{constructor(e){t(this,e);this.otpFinished=s(this,"otpFinished",7);this.language="en";this.resendTimer=60;this.showResend=true;this.otpLength=6;this.otp="";this.error="";this.isLoading=false;this.timer=60;this.systemService=new W;this.roomService=new z;this.tokenService=new R;this.otpVerificationSchema=T.object({email:T.string().nonempty(),requestUrl:T.string().nonempty(),otp:T.string().length(this.otpLength)});this.handleOtpComplete=t=>{this.error="";this.otp=t.detail}}componentWillLoad(){if(this.ticket){this.tokenService.setToken(this.ticket)}this.fetchLocale()}handleTicketChange(t,e){if(t!==e){this.tokenService.setToken(t);this.fetchLocale()}}handleKeyDownChange(t){var e;if(t.key==="Escape"&&((e=this.dialogRef)===null||e===void 0?void 0:e.open)){t.preventDefault()}}async openModal(){this.resetState();if(typeof this.dialogRef.showModal==="function"){this.dialogRef.showModal()}else{this.dialogRef.setAttribute("open","")}if(this.showResend)this.startTimer();await this.focusFirstInput()}async closeModal(){if(typeof this.dialogRef.close==="function"){this.dialogRef.close()}else{this.dialogRef.removeAttribute("open")}this.otp=null;this.clearTimer()}async fetchLocale(){if(!this.tokenService.getToken()){return}this.isInitializing=true;await this.roomService.fetchLanguage(this.language,["_USER_MGT"]);this.isInitializing=false}resetState(){this.otp="";this.error="";this.isLoading=false;this.timer=60;this.clearTimer()}startTimer(){this.clearTimer();this.timerInterval=window.setInterval((()=>{if(this.timer>0){this.timer--}else{this.clearTimer()}}),1e3)}clearTimer(){if(this.timerInterval){clearInterval(this.timerInterval);this.timerInterval=null}}async focusFirstInput(){await new Promise((t=>setTimeout(t,50)));const t=this.dialogRef.querySelector("input");t&&t.focus()}async verifyOtp(){if(this.otp.length<this.otpLength)return;this.isLoading=true;this.otpVerificationSchema.parse({otp:this.otp,requestUrl:this.requestUrl,email:this.email});try{await this.systemService.validateOTP({METHOD_NAME:this.requestUrl,OTP:this.otp});this.otpFinished.emit({otp:this.otp,type:"success"});this.closeModal()}catch(t){this.error="Verification failed. Please try again."}finally{this.isLoading=false}}async resendOtp(){if(this.timer>0)return;try{await this.systemService.resendOTP({METHOD_NAME:this.requestUrl});this.timer=60;this.startTimer()}catch(t){console.log(t)}}handleCancelClicked(){if(this.baseOTPUrl==="Check_OTP_Necessity"){this.closeModal();this.otpFinished.emit({otp:null,type:"cancelled"});return}window.location.reload()}disconnectedCallback(){this.clearTimer()}render(){var t;return e(i,{key:"66ca7192699e99a4205f56620aaeb2dd6cabd5d2"},e("dialog",{key:"1c47e1b55fd38c77b05ad7c45a04f2350ebe555d",ref:t=>this.dialogRef=t,class:"otp-modal","aria-modal":"true"},e("form",{key:"15dfb0d1600bb55f9a804739e6288d9a80bf4765",method:"dialog",class:"otp-modal-content"},this.isInitializing||!b.entries?e("div",{class:"d-flex align-items-center justify-content-center modal-loading-container"},e("ir-spinner",null)):e(r,null,e("header",{class:"otp-modal-header"},e("h5",{class:"otp-modal-title"},b.entries.Lcz_VerifyYourIdentity)),e("section",{class:"otp-modal-body d-flex align-items-center flex-column"},e("p",{class:"verification-message text-truncate"},b.entries.Lcz_WeSentYuoVerificationCode," ",this.email),e("ir-otp",{autoFocus:true,length:this.otpLength,defaultValue:this.otp,onOtpComplete:this.handleOtpComplete}),this.error&&e("p",{class:"text-danger small mt-1 p-0 mb-0"},this.error),this.showResend&&e(r,null,this.timer>0?e("p",{class:"small mt-1"},b.entries.Lcz_ResendCode," 00:",String(this.timer).padStart(2,"0")):e("ir-button",{class:"mt-1",btn_color:"link",onClickHandler:t=>{t.stopImmediatePropagation();t.stopPropagation();this.resendOtp()},size:"sm",text:"Didnt receive code? Resend"}))),e("footer",{class:"otp-modal-footer justify-content-auto"},e("ir-button",{class:"w-100",btn_styles:"flex-fill",text:b.entries.Lcz_Cancel,btn_color:"secondary",onClick:this.handleCancelClicked.bind(this)}),e("ir-button",{class:"w-100",btn_styles:"flex-fill",text:b.entries.Lcz_VerifyNow,isLoading:this.isLoading,btn_disabled:((t=this.otp)===null||t===void 0?void 0:t.length)<this.otpLength||this.isLoading,onClick:()=>this.verifyOtp()}))))))}static get watchers(){return{ticket:["handleTicketChange"]}}};ba.style=fa;const ma=".sc-ir-payment-action-h{display:block;--label-col:6rem;--amount-col:12ch;--payment-action-bg:rgba(255, 73, 97, 10%);--payment-action-border:rgba(255, 73, 97, 40%)}.action-container.overdue.sc-ir-payment-action{--payment-action-bg:rgba(255, 73, 97, 5%);--payment-action-border:rgba(255, 73, 97, 40%)}.action-container.future.sc-ir-payment-action{--payment-action-bg:rgb(30, 159, 242, 5%);--payment-action-border:rgba(30, 159, 242, 40%)}.action-container.sc-ir-payment-action{display:grid;grid-template-columns:var(--label-col) 1fr auto;align-items:center;gap:1rem;background:var(--payment-action-bg);padding:0.5rem 1rem;box-sizing:border-box;border:1px solid var(--payment-action-border);border-radius:0.25rem}.overdue_action.sc-ir-payment-action,.future_action.sc-ir-payment-action{display:inline-flex;align-items:center;gap:0.5rem;border-radius:0.25rem;min-width:0}.overdue_action.sc-ir-payment-action{color:#ff4961}.future_action.sc-ir-payment-action{color:#1e9ff2}.payment-meta.sc-ir-payment-action{display:grid;grid-template-columns:var(--amount-col) 1fr;align-items:center;column-gap:1rem;min-width:0}.amount_action.sc-ir-payment-action{font-weight:600;font-variant-numeric:tabular-nums;text-align:right;justify-self:end}.date_action.sc-ir-payment-action{font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.action-container.sc-ir-payment-action p.sc-ir-payment-action{margin:0;padding:0}.action-row.sc-ir-payment-action{display:contents}";const ga=ma;const va=class{constructor(e){t(this,e);this.generatePayment=s(this,"generatePayment",7)}render(){return e("div",{key:"839f008a4c22d467f8aea77fd6987dc3c940f32d",class:`action-container ${this.paymentAction.type}`},e("div",{key:"e57672d411c0712c2342cd89a955ef31bb9c4b52",class:"action-row"},this.paymentAction.type==="overdue"&&this.paymentAction.amount>0&&e("div",{key:"14ac954dd09e1728d39c5234e3b0a58abf348503",class:"overdue_action"},e("svg",{key:"172ccefba9b6313b820dda31767e1bef7326a1c8",height:16,width:16,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},e("path",{key:"9f0db78644ead8f9a44eee58fc288733b12926c4",fill:"currentColor",d:"M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})),e("span",{key:"310900775bcb64b961bee15225a32586282bee1d"},"Overdue")),this.paymentAction.type==="future"&&this.paymentAction.amount>0&&e("div",{key:"8d2bcb79e34a06d0b6f670db9169dcdc4dc42019",class:"future_action "},e("svg",{key:"119ec7d225723d8487e41a9c59a4f7bfc73eb5b8",xmlns:"http://www.w3.org/2000/svg",height:16,width:16,viewBox:"0 0 512 512"},e("path",{key:"4db618e7502646057787403499b4d5c4bf8bbc03",fill:"currentColor",d:"M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"})),e("span",{key:"0e94d51c9d813fac99dc73ace0becd5a00e93681"},E(new Date(this.paymentAction.due_on)).isSame(new Date)?"Today":"Future")),e("div",{key:"81802fbf17519b60f9eb16afcc16b9e76190db86",class:"payment-meta"},e("p",{key:"16881efbf56a8887119f8561e3de3794419fca77",class:"amount_action"},v(this.paymentAction.currency.symbol,this.paymentAction.amount)),e("p",{key:"cc56bf046f4a03bb05e931acef57eb6309a3cc09",class:"date_action"},E(new Date(this.paymentAction.due_on)).format("ddd, MMM DD YYYY")))),this.paymentAction.amount>0&&e("div",{key:"5dc546960e9652b239773a37cce16811fd717b0f",style:{width:"fit-content"}},e("ir-button",{key:"a75b1c4bc6470ba8e23e1529e8b677dafb02565c",btn_color:"dark",text:"Pay",size:"sm",onClickHandler:()=>this.generatePayment.emit(this.paymentAction)})))}};va.style=ga;const ya=".sc-ir-payment-actions-h{display:block}.sc-ir-payment-actions-h p.sc-ir-payment-actions,.sc-ir-payment-actions-h div.sc-ir-payment-actions,.sc-ir-payment-actions-h span.sc-ir-payment-actions,.sc-ir-payment-actions-h ir-icons.sc-ir-payment-actions{box-sizing:border-box;padding:0;margin:0}.beta.sc-ir-payment-actions{background:var(--red);color:white;padding:0.2rem 0.3rem !important;font-size:12px;border-radius:4px;margin:0}.payment-actions-container.sc-ir-payment-actions{display:flex;flex-direction:column;gap:0.5rem}";const ka=ya;const xa=class{constructor(e){t(this,e)}render(){var t,s;if(((t=this.paymentAction)===null||t===void 0?void 0:t.filter((t=>t.amount!==0)).length)==0){return null}return e(i,null,e("div",{class:"my-1 d-flex align-items-center",style:{gap:"0.5rem"}},e("p",{class:"font-size-large p-0 m-0 "},"Payment Actions"),e("span",{class:"beta"},"Beta")),e("div",{class:"payment-actions-container"},(s=this.paymentAction)===null||s===void 0?void 0:s.map(((t,i)=>e("ir-payment-action",{key:t.due_on+i,paymentAction:t})))))}};xa.style=ka;const wa=".sc-ir-payment-details-h{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important}.sc-ir-payment-details-h *.sc-ir-payment-details{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important}.sm-margin-right.sc-ir-payment-details{margin-right:5px !important;background:#000}.action_icons.sc-ir-payment-details{width:60px}.w-60.sc-ir-payment-details{width:100px;padding:0 5px}.payments-height.sc-ir-payment-details{height:30px}.payment_date.sc-ir-payment-details{width:100px}.iframeHeight.sc-ir-payment-details{height:max-content;height:22.5rem}.designation.sc-ir-payment-details{width:120px}.total-cost-container.sc-ir-payment-details{background:#7cbebe;color:white;padding:0.5rem;border-radius:5px}";const _a=wa;const Da=class{constructor(e){t(this,e);this.resetBookingEvt=s(this,"resetBookingEvt",7);this.resetExposedCancellationDueAmount=s(this,"resetExposedCancellationDueAmount",7);this.toast=s(this,"toast",7);this.openSidebar=s(this,"openSidebar",7);this.confirmModal=false;this.toBeDeletedItem=null;this.modalMode=null;this.paymentService=new N;this.bookingService=new l;this.handleAddPayment=()=>{this.openSidebar.emit({type:"payment-folio",payload:{payment:{id:-1,date:E().format("YYYY-MM-DD"),amount:null,currency:undefined,designation:null,reference:null},mode:"new"}})};this.handleEditPayment=t=>{console.log(t);this.openSidebar.emit({type:"payment-folio",payload:{payment:t,mode:"edit"}})};this.handleDeletePayment=t=>{this.modalMode="delete";this.toBeDeletedItem=t;this.openModal()};this.handleConfirmModal=async t=>{t.stopImmediatePropagation();t.stopPropagation();if(this.modalMode==="delete"){await this.cancelPayment()}};this.handleCancelModal=t=>{t.stopImmediatePropagation();t.stopPropagation();this.modalMode=null;this.toBeDeletedItem=null}}handlePaymentGeneration(t){const e=t.detail;this.openSidebar.emit({type:"payment-folio",payload:{payment:Object.assign(Object.assign({},e),{date:e.due_on,id:-1,amount:e.amount}),mode:"payment-action"}})}async cancelPayment(){try{await this.paymentService.CancelPayment(this.toBeDeletedItem.id);const t=this.bookingDetails.financial.payments.filter((t=>t.id!==this.toBeDeletedItem.id));this.bookingDetails=Object.assign(Object.assign({},this.bookingDetails),{financial:Object.assign(Object.assign({},this.bookingDetails.financial),{payments:t})});this.confirmModal=false;this.resetBookingEvt.emit(null);this.resetExposedCancellationDueAmount.emit(null);this.toBeDeletedItem=null;this.modalMode=null}catch(t){console.error("Error canceling payment:",t);this.toast.emit({type:"error",title:"Error",description:"Failed to cancel payment. Please try again.",position:"top-right"})}}openModal(){const t=document.querySelector(".delete-record-modal");t===null||t===void 0?void 0:t.openModal()}hasValidFinancialData(){var t;return Boolean((t=this.bookingDetails)===null||t===void 0?void 0:t.financial)}shouldShowPaymentActions(){var t;return Boolean(((t=this.paymentActions)===null||t===void 0?void 0:t.filter((t=>t.amount!==0)).length)>0&&this.bookingDetails.is_direct)}render(){if(!this.hasValidFinancialData()){return null}const{financial:t,currency:i}=this.bookingDetails;return[e("div",{class:"card p-1"},e("ir-payment-summary",{totalCost:t.gross_cost,balance:t.due_amount,collected:this.bookingDetails.financial.collected,currency:i}),e("ir-booking-guarantee",{booking:this.bookingDetails,bookingService:this.bookingService}),this.shouldShowPaymentActions()&&e("ir-payment-actions",{paymentAction:this.paymentActions,booking:this.bookingDetails})),e("ir-payments-folio",{paymentTypes:this.paymentTypes,payments:t.payments||[],onAddPayment:this.handleAddPayment,onEditPayment:t=>this.handleEditPayment(t.detail),onDeletePayment:t=>this.handleDeletePayment(t.detail)}),e("ir-modal",{item:this.toBeDeletedItem,class:"delete-record-modal",modalTitle:b.entries.Lcz_Confirmation,modalBody:this.modalMode==="delete"?b.entries.Lcz_IfDeletedPermantlyLost:b.entries.Lcz_EnteringAmountGreaterThanDue,iconAvailable:true,icon:"ft-alert-triangle danger h1",leftBtnText:b.entries.Lcz_Cancel,rightBtnText:this.modalMode==="delete"?b.entries.Lcz_Delete:b.entries.Lcz_Confirm,leftBtnColor:"secondary",rightBtnColor:this.modalMode==="delete"?"danger":"primary",onConfirmModal:this.handleConfirmModal,onCancelModal:this.handleCancelModal})]}};Da.style=_a;const Ca=".sc-ir-payment-folio-h{display:block;--payment-type-badge-bg:#ff4961}.payment-type-badge.sc-ir-payment-folio{background:var(--payment-type-badge-bg);color:white;padding:0.2rem 0.3rem !important;font-size:12px;border-radius:4px;margin:0;text-transform:capitalize}.credit-badge.sc-ir-payment-folio{--payment-type-badge-bg:#629a4c}.debit-badge.sc-ir-payment-folio{--payment-type-badge-bg:#ff4961}.dropdown-item-payment.sc-ir-payment-folio{display:flex;align-items:center;gap:1rem;box-sizing:border-box;justify-content:space-between}";const Oa=Ca;const Aa=".sc-ir-payment-folio-h{height:100%}.sheet-container.sc-ir-payment-folio{display:flex !important;flex-direction:column !important;background:white;height:100vh;gap:1rem;z-index:1000}.sheet-container.sc-ir-payment-folio{height:-webkit-fill-available;height:100vh;height:100dvh}.sheet-footer.sc-ir-payment-folio{position:sticky;bottom:0;z-index:20;background:white;border-top:1px solid #e4e5ec;display:flex;flex-direction:column;padding:1rem;gap:0.5rem}.sheet-header.sc-ir-payment-folio{position:sticky;top:0;z-index:10;background:white}.sheet-body.sc-ir-payment-folio{flex:1 1 0%}@media (min-width: 768px){.sheet-footer.sc-ir-payment-folio{flex-direction:row;align-items:center}}";const Ba=Aa;const Ma=class{constructor(e){t(this,e);this.closeModal=s(this,"closeModal",7);this.resetBookingEvt=s(this,"resetBookingEvt",7);this.payment={date:E().format("YYYY-MM-DD"),amount:0,designation:undefined,currency:null,reference:null,id:-1};this.autoValidate=false;this.paymentService=new N}componentWillLoad(){this.folioSchema=T.object({date:T.string().regex(/^\d{4}-\d{2}-\d{2}$/).refine((t=>{const e=E(t,"YYYY-MM-DD",true);return e.isValid()&&!e.isAfter(E(),"dates")}),{message:`Invalid date`}),amount:T.coerce.number().refine((t=>t!==0)),reference:T.string().optional().nullable(),designation:T.string().min(1),payment_type:T.object({code:T.string().min(3).max(4),description:T.string().min(1),operation:T.union([T.literal("CR"),T.literal("DB")])})});if(this.payment){this.folioData=Object.assign({},this.payment)}}handlePaymentChange(t,e){if(t!==e&&t){this.folioData=Object.assign({},t)}}updateFolioData(t){this.folioData=Object.assign(Object.assign({},this.folioData),t)}async savePayment(){var t,e,i;try{this.isLoading=true;this.autoValidate=true;if(this.errors){this.errors=null}this.folioSchema.parse((t=this.folioData)!==null&&t!==void 0?t:{});await this.paymentService.AddPayment(Object.assign(Object.assign({},this.folioData),{currency:g.currency,reference:(e=this.folioData.reference)!==null&&e!==void 0?e:"",designation:(i=this.folioData.payment_type)===null||i===void 0?void 0:i.description}),this.bookingNumber);this.resetBookingEvt.emit(null);this.closeModal.emit(null)}catch(t){const e={};if(t instanceof F){t.issues.forEach((t=>{e[t.path[0]]=true}))}console.error(t);this.errors=e}finally{this.isLoading=false}}handleDropdownChange(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail.toString();console.log(e);this.updateFolioData({designation:e});if(!t.detail){this.updateFolioData({payment_type:null})}else{const i=this.paymentTypes.find((t=>t.CODE_NAME===e));if(!i){console.warn(`Invalid payment type ${t.detail}`);this.updateFolioData({payment_type:null});return}this.updateFolioData({payment_type:{code:i.CODE_NAME,description:i.CODE_VALUE_EN,operation:i.NOTES}})}}renderDropdownItems(){const t=["011"];if(this.mode!=="payment-action"){t.push("008")}let i=[...this.paymentTypes];if(this.mode==="payment-action"){i=i.slice(0,8)}return i.map((i=>e(r,null,e("ir-dropdown-item",{value:i.CODE_NAME,class:"dropdown-item-payment"},e("span",null,i.CODE_VALUE_EN),e("span",{class:`payment-type-badge ${i.NOTES==="CR"?"credit-badge":"debit-badge"}`},i.NOTES==="CR"?"credit":"debit")),t.includes(i.CODE_NAME)&&e("div",{class:"dropdown-divider"}))))}render(){var t,i,s,r,a,n,o,l,c,h,d,u,p,f,b,m,v,y,k;return e("form",{key:"cddebc99f75eaa88978b46ed6e46acff4f53b987",class:"sheet-container",onSubmit:async t=>{t.preventDefault();this.savePayment()}},e("ir-title",{key:"c68011576d06d59f4b1c127b83424a7cc42b7169",class:"px-1 sheet-header",onCloseSideBar:()=>this.closeModal.emit(null),label:this.mode==="edit"?"Edit Folio Entry":"New Folio Entry",displayContext:"sidebar"}),e("section",{key:"3e2809073eb77709ca0c86784f15c736cf3e35a2",class:"px-1 sheet-body d-flex flex-column",style:{gap:"1rem"}},e("div",{key:"c729caf80da683285c3fc412edb5fe6b9fa130ee",class:"d-flex w-fill",style:{gap:"0.5rem"}},e("div",{key:"5f8249ea60102abeb073dcca4ca8450e89f3cb2a",class:"form-group  mb-0 flex-grow-1"},e("div",{key:"e667ee091158c039e66a0b89e6564e2b4e050836",class:"input-group row m-0 flex-grow-1"},e("div",{key:"7cf63550b9753fc87840bbe8f237cb602b9e7e0f",class:`input-group-prepend col-3 p-0 text-dark border-0`},e("label",{key:"6302e10f3164881f9b81aef43e5cc4da3afffde8",class:`input-group-text flex-grow-1 text-dark border-theme `},"Date")),e("div",{key:"0352d9f28dcac31efd4bb092964fd84f8a798859",class:"form-control  form-control-md col-10 flex-grow-1 d-flex align-items-center px-0 mx-0",style:{border:"0"}},e("style",{key:"5c9b5c7eaed89bdf8bff81c73d3452001c25da4d"},`.ir-date-picker-trigger{\n                    width:100%;}`),e("ir-date-picker",{key:"5c22589d608442d7828430fee1456fe1850ae7fb","data-testid":"pickup_date",date:(t=this.folioData)===null||t===void 0?void 0:t.date,class:"w-100",emitEmptyDate:true,maxDate:E().format("YYYY-MM-DD"),"aria-invalid":((i=this.errors)===null||i===void 0?void 0:i.date)&&!((s=this.folioData)===null||s===void 0?void 0:s.date)?"true":"false",onDateChanged:t=>{var e;this.updateFolioData({date:(e=t.detail.start)===null||e===void 0?void 0:e.format("YYYY-MM-DD")})}},e("input",{key:"0d7b12fb8a5a52737846d4a69d58f328b2b379e5",type:"text",slot:"trigger",value:((r=this.folioData)===null||r===void 0?void 0:r.date)?E((a=this.folioData)===null||a===void 0?void 0:a.date).format("MMM DD, YYYY"):null,class:`form-control w-100 input-sm ${((n=this.errors)===null||n===void 0?void 0:n.date)&&!((o=this.folioData)===null||o===void 0?void 0:o.date)?"border-danger":""} text-left`,style:{borderTopLeftRadius:"0",borderBottomLeftRadius:"0",width:"100%"}})))))),e("div",{key:"5132d5362c57f6db65fd737bba10ec86d22c3254"},e("style",{key:"5b8c86215be582f70b36f9fc609bc7e3bc640f3e"},`.price-label{\n              width:133px !important;\n              }`),e("ir-price-input",{key:"a6a47a5a6b8648469f32708e03ec071ee0c6721e",minValue:0,autoValidate:this.autoValidate,zod:this.folioSchema.pick({amount:true}),wrapKey:"amount",label:"Amount",labelStyle:"price-label",error:((l=this.errors)===null||l===void 0?void 0:l.amount)&&!((c=this.folioData)===null||c===void 0?void 0:c.amount),value:(d=(h=this.folioData)===null||h===void 0?void 0:h.amount)===null||d===void 0?void 0:d.toString(),currency:g.currency.symbol,onTextChange:t=>this.updateFolioData({amount:Number(t.detail)})})),e("div",{key:"fa96608c9e17e1e21251deebda067771de03b2be"},e("ir-dropdown",{key:"489a15faa40786bf587046259246cd11770907fa",value:(p=(u=this.folioData)===null||u===void 0?void 0:u.payment_type)===null||p===void 0?void 0:p.code,onOptionChange:this.handleDropdownChange.bind(this)},e("div",{key:"0013cc33d650dd0c15dc8fab7edac53383317e58",slot:"trigger",class:"input-group row m-0 "},e("div",{key:"e1dff7b93c1fc1dd6431028f500bb9a26afdd514",class:`input-group-prepend col-3 p-0 text-dark border-0`},e("label",{key:"231321614bba80d7997dba7052f2179a574762b0",class:`input-group-text flex-grow-1 text-dark  border-theme`},"Transaction type")),e("button",{key:"c644e8c5383492e48a25752712453dfe69aefe2b",type:"button",class:`form-control  d-flex align-items-center cursor-pointer ${((f=this.errors)===null||f===void 0?void 0:f.designation)&&!((b=this.folioData)===null||b===void 0?void 0:b.designation)?"border-danger":""}`},((m=this.folioData)===null||m===void 0?void 0:m.payment_type)?e("span",null,(v=this.folioData.payment_type)===null||v===void 0?void 0:v.description):e("span",null,"Select..."))),e("ir-dropdown-item",{key:"7ba99a864f8c9816a86ffea281070e4f56667eef",value:""},"Select..."),this.renderDropdownItems())),e("div",{key:"18698c5e5f106971a3b95806cb00d35c2c68c6f5"},e("ir-input-text",{key:"b35e1d558de598454da04dc932446e19b52c9f8f",value:(y=this.folioData)===null||y===void 0?void 0:y.reference,error:(k=this.errors)===null||k===void 0?void 0:k.reference_number,autoValidate:this.autoValidate,zod:this.folioSchema.pick({reference:true}),label:"Reference",inputContainerStyle:{margin:"0"},onTextChange:t=>this.updateFolioData({reference:t.detail}),labelWidth:3}))),e("div",{key:"85d0ebb210bbd3418d64a156af55e5d31d76f425",class:"sheet-footer"},e("ir-button",{key:"accb363e8564f1ea8ef5b7d79b8a5700d3f14790",onClick:()=>this.closeModal.emit(null),btn_styles:"justify-content-center",class:`flex-fill`,text:"Cancel",btn_color:"secondary"}),e("ir-button",{key:"7674fd4a23b155754d443fe5562b7cc1617406db",btn_styles:"justify-content-center align-items-center",class:"flex-fill",isLoading:this.isLoading,text:"Save",btn_color:"primary",btn_type:"submit"})))}static get watchers(){return{payment:["handlePaymentChange"]}}};Ma.style=Oa+Ba;const Ea=".payment-item{position:relative;width:100%;display:flex;padding:0.5rem;align-items:center;min-height:3rem;gap:1rem;box-sizing:border-box}.payment-item:hover{background:#f4f5fa}.payment-item:hover .payment-actions{display:flex}.payment-item p{padding:0;margin:0;box-sizing:border-box}.payment-item .payment-actions{display:none;background:#f4f5fa;gap:0.5rem;justify-content:flex-end;align-items:center}.payment-body{display:flex;flex-direction:column;gap:0.25rem;flex:1 1 0%}.payment-fields{display:flex;align-items:center;gap:1rem}.payment-amount{font-weight:700;white-space:nowrap}.payment-amount.is-credit{color:#629a4c}.payment-amount.is-debit{color:#ff4961}.payment-reference{font-size:12px}.payment-toolbar{display:flex;align-items:center;gap:0.5rem}.action-button{cursor:pointer}";const Sa=Ea;const Ia=class{constructor(e){t(this,e);this.editPayment=s(this,"editPayment",7);this.deletePayment=s(this,"deletePayment",7)}render(){var t,i;const s=this.payment.payment_type.operation==="CR";return e("div",{key:"ee98488eadd5b44d57a3112d22698dd125ec96a1",class:"payment-item",part:"base"},e("div",{key:"1a1ca120a0f1cdd9f1932c7c3967c85c51120ba6",class:"payment-body",part:"payment-body"},e("div",{key:"8a2e828294f926826e01b6993d464f7cbea00e70",class:"payment-fields",part:"payment-fields"},e("p",{key:"153d91c2bd5865747cb6d4c9d70a67140a0f98be",class:"text-muted"},this.payment.date),e("p",{key:"a439a3092cadc35e6b89a546ccb3b837786d62d2"},e("b",{key:"e020bac3967784993d60c167729ff43fe1ade52f"},(t=this.payment.payment_type.description)!==null&&t!==void 0?t:this.payment.designation))),this.payment.reference&&e("p",{key:"8a3a180f0a08c4b9bc5b7c48d983b4f238bfd4b4",class:"payment-reference text-muted"},(i=this.payment)===null||i===void 0?void 0:i.reference)),e("div",{key:"566ac324886f65f2c8096b59dd7347eb5925f7fa",class:"payment-toolbar",part:"payment-toolbar"},e("p",{key:"508430c3c97d7ba3277813916b0ee8472a7bbe0a",class:`payment-amount ${s?"is-credit":"is-debit"}`},v(this.payment.currency.symbol,this.payment.payment_type.code==="012"?this.payment.amount*-1:this.payment.amount)),e("div",{key:"05ff19b4f403ee0a315db9ef2d59aff65af2a4a2",class:"payment-actions"},e("ir-button",{key:"78e20f5a1ce5d984de2d259a1bdbc2035c76eab1",class:"action-button",variant:"icon",onClickHandler:()=>{this.editPayment.emit(this.payment)},icon_name:"edit",style:L.secondary}),e("ir-button",{key:"4664daafc6a5999968562f469d3c4b71331bc824",class:"action-button",onClickHandler:()=>{this.deletePayment.emit(this.payment)},variant:"icon",style:L.danger,icon_name:"trash"}))))}};Ia.style=Sa;const Ta=".sc-ir-payment-summary-h{display:block}.sc-ir-payment-summary-h{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important}.sc-ir-payment-summary-h *.sc-ir-payment-summary{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important}";const Fa=Ta;const ja=class{constructor(e){t(this,e)}shouldShowTotalCost(){return this.totalCost>0&&this.totalCost!==null}render(){return e("div",{key:"ba8cf439e47e10373d2b46df452a9160942fa1c5",class:" m-0"},this.shouldShowTotalCost()&&e("div",{key:"c6318b6b3e8238cf7bade44efc6110a05f829857",class:"mb-2 h4 total-cost-container"},b.entries.Lcz_TotalCost,":",e("span",{key:"3112481603e78ee744ff6ca2366c2ff465831ce3"},v(this.currency.symbol,this.totalCost))),e("div",{key:"9609f879469bd08a7365244a3caab6822488572f",class:"h4 d-flex align-items-center justify-content-between"},e("span",{key:"77283a3286b5c5cdac666fe6ba35841529dae4c4"},b.entries.Lcz_Balance,": "),e("span",{key:"bcdd8ce1d99eaa8b15b0e857f033e684f2dda250",class:"danger font-weight-bold"},v(this.currency.symbol,this.balance))),e("div",{key:"6175b69bc608742eea88aade61ee078bf425d980",class:"mb-2 h4 d-flex align-items-center justify-content-between"},e("span",{key:"cac3e33669872dd774d7a00d9ca15c458a2d559f"},b.entries.Lcz_Collected,": "),e("span",{key:"69e74f8e6c4fa4c33fbab7639edde09983034951"},v(this.currency.symbol,this.collected))))}};ja.style=Fa;const Ya=".sc-ir-payments-folio-h{display:block}";const $a=Ya;const za=class{constructor(e){t(this,e);this.addPayment=s(this,"addPayment",7);this.editPayment=s(this,"editPayment",7);this.deletePayment=s(this,"deletePayment",7);this.payments=[];this.handleAddPayment=()=>{this.addPayment.emit()};this.handleEditPayment=t=>{this.editPayment.emit(t)};this.handleDeletePayment=t=>{this.deletePayment.emit(t)}}hasPayments(){return this.payments&&this.payments.length>0}renderPaymentItem(t,i){return[e("ir-payment-item",{key:t.id,payment:t,onDeletePayment:t=>{t.stopImmediatePropagation();t.stopPropagation();this.handleDeletePayment(t.detail)},onEditPayment:t=>{t.stopImmediatePropagation();t.stopPropagation();this.handleEditPayment(t.detail)}}),i<this.payments.length-1&&e("hr",{class:"p-0 m-0"})]}renderEmptyState(){return e("div",{class:"text-center p-3"},e("p",{class:"text-muted"},"No payments recorded yet"))}render(){return e("div",{key:"621d2bf00f54f9b61f82a07aa753ecbeec8aa5f1",class:"mt-1"},e("div",{key:"55dcaccae0fd3cb56790aa0899e33e11d56e737e",class:"d-flex flex-column rounded payment-container"},e("div",{key:"8c975bca26b83da4341c399b51ea66bfd3929ec0",class:"d-flex align-items-center justify-content-between"},e("p",{key:"7c49458388d7b18e667608d5e5c640627e130939",class:"font-size-large p-0 m-0"},"Payment Folio"),e("ir-button",{key:"b9d814a95ee9f8579a5f8689851312792693f17b",id:"add-payment",variant:"icon",icon_name:"square_plus",style:{"--icon-size":"1.5rem"},onClickHandler:this.handleAddPayment})),e("div",{key:"25e5c0e8ba9264c7b44966311d16a47bd5c2f436",class:"mt-1 card p-1 payments-container"},this.hasPayments()?this.payments.map(((t,e)=>this.renderPaymentItem(t,e))):this.renderEmptyState())))}};za.style=$a;const Na=".sc-ir-phone-input-h{display:block}.input-container.sc-ir-phone-input{display:flex;align-items:center;padding:0 !important}.input-container.sc-ir-phone-input:focus-within{border-color:#1e9ff2}.border-theme.sc-ir-phone-input{border-color:#cacfe7}.input-container.sc-ir-phone-input input.sc-ir-phone-input{flex:1;border:0}.input-container.sc-ir-phone-input input.sc-ir-phone-input:focus{outline:none}.dropdown-trigger.sc-ir-phone-input{display:flex;align-items:center;gap:8px;background:white;border:0;border-right:1px solid #cacfe7}.ir-dropdown-container.sc-ir-phone-input{position:absolute;z-index:1000;bottom:-30px;width:100%;left:0;background:white}.input-container.sc-ir-phone-input label.sc-ir-phone-input{display:flex;align-items:center;justify-content:center;margin:0;padding:0 5px}.flag.sc-ir-phone-input{height:1rem;aspect-ratio:4/3;border-radius:3px}.is-invalid.sc-ir-phone-input{border-color:#ff4961}.phone_prefix_label.sc-ir-phone-input{padding:0 0.5rem;margin:0}.sc-ir-phone-input-h{--ir-floating-label-fg:#6c757d;--ir-floating-label-fg-focus:#495057;--ir-floating-label-bg:#fff;--ir-floating-label-scale:0.88;--ir-floating-label-float-translateY:-70%;--ir-floating-label-resting-offset-inline:0.9rem;--ir-floating-phone-input-radius:0.21rem;--ir-floating-phone-input-height:2rem;--ir-danger:#dc3545;--ir-disabled-fg:#9aa0a6}.sc-ir-phone-input-h .input-container.has-floating.sc-ir-phone-input{position:relative;padding-top:0.9rem}.sc-ir-phone-input-h .floating-label.sc-ir-phone-input{position:absolute;top:50%;transform:translateY(-50%);pointer-events:none;position:absolute;padding:0 0.4rem;z-index:10;color:var(--ir-floating-label-fg);background:white;transition:transform 120ms ease, color 120ms ease, top 120ms ease, background-color 120ms ease, opacity 120ms ease;opacity:0.95;line-height:1;white-space:nowrap}.sc-ir-phone-input-h .floating-label.sc-ir-phone-input:dir(rtl){right:95px}.sc-ir-phone-input-h .floating-label.sc-ir-phone-input:dir(ltr){left:95px}.sc-ir-phone-input-h .floating-label.active.sc-ir-phone-input{top:0;transform:translateY(var(--ir-floating-label-float-translateY)) scale(var(--ir-floating-label-scale));background:var(--ir-floating-label-bg);color:var(--ir-floating-label-fg-focus);font-size:12px;padding:0;opacity:0.95}";const Ra=Na;const La=class{constructor(e){t(this,e);this.textChange=s(this,"textChange",7);this.value="";this.disabled=false;this.error=false;this.default_country=null;this.phone_prefix=null;this.countries=[];this.inputValue="";this.isDropdownVisible=false;this.hasFocus=false;this.bookingService=new l;this.inputId=`ir-phone-input-${Math.random().toString(36).slice(2)}`;this.labelId=`ir-phone-input-label-${Math.random().toString(36).slice(2)}`}async componentWillLoad(){if(this.countries.length===0){const t=await this.bookingService.getCountries(this.language);this.countries=t}if(this.phone_prefix){this.setCountryFromPhonePrefix()}else{if(this.default_country){this.setCurrentCountry(this.default_country)}}this.inputValue=this.value}handleValueChange(t,e){if(t!==e){this.inputValue=t}}handlePhoneChange(t,e){if(t!==e){this.setCountryFromPhonePrefix()}}handleDocumentClick(t){const e=t.target;if(!this.el.contains(e)){this.isDropdownVisible=false}}handleInputChange(t){var e;let i=t.target;let s=i.value;s=s.replace(/[^+\d]+/g,"");i.value=s;this.inputValue=s;this.textChange.emit({phone_prefix:(e=this.currentCountry)===null||e===void 0?void 0:e.phone_prefix,mobile:this.inputValue})}setCountryFromPhonePrefix(){var t;let e=this.countries.find((t=>t.phone_prefix===this.phone_prefix));if(!e){e=this.countries.find((t=>t.id.toString()===this.phone_prefix));if(!e){return}}this.currentCountry=Object.assign({},e);this.textChange.emit({phone_prefix:(t=this.currentCountry)===null||t===void 0?void 0:t.phone_prefix,mobile:this.value})}setCurrentCountry(t){var e;const i=this.countries.find((e=>e.id===t));if(!i){throw new Error("Invalid country id")}this.currentCountry=Object.assign({},i);this.textChange.emit({phone_prefix:(e=this.currentCountry)===null||e===void 0?void 0:e.phone_prefix,mobile:this.value})}render(){var t,s;const r=this.floatingLabel&&this.label;const a=!!this.label&&!r;const n=this.hasFocus||!!this.inputValue;return e(i,{key:"23c1c8676f912872e014736d2b04db40a88dbb81"},e("div",{key:"18bbeffc9a488360f80833ef5ad90bccd92e6aad",class:"form-group mr-0"},e("div",{key:"8cddb1902e580d64b86794678e651821f92f745b",class:"input-group row m-0 p-0 position-relative"},a&&e("div",{key:"a5fd3c54eaa39c5478e749ef86ca53596d260d66",class:`input-group-prepend col-3 p-0 text-dark border-none`},e("label",{key:"59393d09f3cacca8a67da75d72882b2e4b589f54",class:`input-group-text border-theme flex-grow-1 text-dark`},this.label)),e("div",{key:"940ee15a4427b4e1c594b45538835c03144ad3e7",class:"form-control  input-container  flex-fill"+(this.error?" is-invalid":"")},e("button",{key:"9448e249e084595291bb9c8b8c07b19d4cd5a78f",type:"button",onClick:()=>this.isDropdownVisible=!this.isDropdownVisible,class:"dropdown-trigger"},this.currentCountry?e("img",{src:(t=this.currentCountry)===null||t===void 0?void 0:t.flag,class:"flag"}):e("p",{class:"p-0 m-0 "},b.entries.Lcz_Select),e("svg",{key:"875b806a36d42b558e67f76dac95648098b8eaed",xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},e("path",{key:"55b76c299cdd2ef4eda62ada403e5bfcc0e1dda4",d:"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"}))),e("p",{key:"f1e3c2b17da3eff245f9899368c057bbcebed9bb",class:"phone_prefix_label"},(s=this.currentCountry)===null||s===void 0?void 0:s.phone_prefix),r&&e("label",{key:"6f9503a871f47b5fa8aa4755ebedb52e8c2ed5df",id:this.labelId,class:`floating-label ${n?"active":""}`,htmlFor:this.inputId},this.label),e("input",{key:"aa398b3e31c50d769242f642814c803fc88a7320","data-testid":this.testId,maxLength:14,type:"text",placeholder:this.placeholder,required:true,value:this.inputValue,disabled:this.disabled,onInput:t=>this.handleInputChange(t),onFocus:()=>{this.hasFocus=true},onBlur:()=>{this.hasFocus=false}})),this.isDropdownVisible&&e("div",{key:"3d21446e9f783657eda35de317d12cb24703db21",class:"ir-dropdown-container"},e("ir-combobox",{key:"473a0d6d5946acd9418c8055dd9cff0352343038",onComboboxValueChange:t=>{this.setCurrentCountry(+t.detail.data);this.isDropdownVisible=false},class:"bg-white",autoFocus:true,placeholder:"Search country",data:this.countries.map((t=>({id:t.id.toString(),name:`${t.name} (${t.phone_prefix})`,image:t.flag})))})))))}get el(){return a(this)}static get watchers(){return{value:["handleValueChange"],phone_prefix:["handlePhoneChange"]}}};La.style=Ra;class Pa{async savePickup(t,e,i){try{const s=t.arrival_time.split(":");await Y.post(`/Do_Pickup`,{booking_nbr:e,is_remove:i,currency:t.currency,date:t.arrival_date,details:t.flight_details,hour:s[0],minute:s[1],nbr_of_units:t.number_of_vehicles,selected_option:t.selected_option,total:+t.due_upon_booking})}catch(t){console.log(t)}}transformDefaultPickupData(t){const e=t.hour&&t.minute?A(t.hour)+":"+A(t.minute):"";return{arrival_date:t.date,arrival_time:e,currency:t.currency,due_upon_booking:t.total.toFixed(2),flight_details:t.details,location:t.selected_option.location.id,number_of_vehicles:t.nbr_of_units,selected_option:t.selected_option,vehicle_type_code:t.selected_option.vehicle.code}}getAvailableLocations(t){let e=[];g.pickup_service.allowed_options.forEach((i=>{if(e.filter((t=>t.value===i.location.id)).length===0){e.push({text:t+" "+i.location.description,value:i.location.id})}}));return e}createPickupSchema(t,e){return T.object({arrival_date:T.string().regex(/^\d{4}-\d{2}-\d{2}$/,{message:"Invalid date format, expected YYYY-MM-DD"}).refine((i=>{const s=E(i,"YYYY-MM-DD",true);const r=E(t,"YYYY-MM-DD",true);const a=E(e,"YYYY-MM-DD",true);return s.isValid()&&r.isValid()&&a.isValid()&&s.isBetween(r,a,undefined,"[]")}),{message:`arrival_date must be between ${t} and ${e}`}),arrival_time:T.string().regex(/^\d{2}:\d{2}$/,{message:"Invalid time format. Expected HH:MM"}).refine((t=>{const[e,i]=t.split(":").map(Number);return e>=0&&e<=23&&i>=0&&i<=59}),{message:"Time values are out of range"}),flight_details:T.string().nonempty({message:"Flight details cannot be empty"}),vehicle_type_code:T.string().nonempty({message:"Vehicle type code cannot be empty"}),number_of_vehicles:T.coerce.number().min(1,{message:"At least one vehicle is required"})})}validateForm(t,e){try{e.parse(t);return null}catch(t){console.log(t);const e={};if(t instanceof F){t.issues.forEach((t=>{e[t.path[0]]=true}));return e}}}getNumberOfVehicles(t,e){let i=Math.ceil(e/t);let s=i>1?i:1;let r=i>1?2:3;return Array.from({length:i+r},((t,e)=>s+e))}getPickUpPersonStatus(t){const e=g.pickup_service.allowed_pricing_models.find((e=>e.code===t));if(!e){return null}return e.description}updateDue(t){const e=this.getPickUpPersonStatus(t.code);if(!e){return}if(e==="Person"){return t.amount*t.numberOfPersons}else{return t.amount*t.number_of_vehicles}}}const Va=".sc-ir-pickup-h{display:block}.custom-card-container.sc-ir-pickup{display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #e4e5ec}.card-title.sc-ir-pickup{flex:1}.border-theme.sc-ir-pickup{border:1px solid #cacfe7}@media (min-width: 768px){.price-input-container.sc-ir-pickup{max-width:290px}}";const Ha=Va;const Ga=".sc-ir-pickup-h{height:100%}.sheet-container.sc-ir-pickup{display:flex !important;flex-direction:column !important;background:white;height:100vh;gap:1rem;z-index:1000}.sheet-container.sc-ir-pickup{height:-webkit-fill-available;height:100vh;height:100dvh}.sheet-footer.sc-ir-pickup{position:sticky;bottom:0;z-index:20;background:white;border-top:1px solid #e4e5ec;display:flex;flex-direction:column;padding:1rem;gap:0.5rem}.sheet-header.sc-ir-pickup{position:sticky;top:0;z-index:10;background:white}.sheet-body.sc-ir-pickup{flex:1 1 0%}@media (min-width: 768px){.sheet-footer.sc-ir-pickup{flex-direction:row;align-items:center}}";const Ua=Ga;const Ka=class{constructor(e){t(this,e);this.closeModal=s(this,"closeModal",7);this.resetBookingEvt=s(this,"resetBookingEvt",7);this.numberOfPersons=0;this.isLoading=false;this.allowedOptionsByLocation=[];this.pickupData={location:-1,flight_details:"",due_upon_booking:"",number_of_vehicles:1,vehicle_type_code:"",currency:undefined,arrival_time:"",arrival_date:null,selected_option:undefined};this.vehicleCapacity=[];this.cause=null;this.autoValidate=false;this.pickupService=new Pa;this.arrival_time_mask={mask:"HH:mm",blocks:{HH:{mask:Rr,from:0,to:23,placeholderChar:"H"},mm:{mask:Rr,from:0,to:59,placeholderChar:"m"}},lazy:false,placeholderChar:"_"}}componentWillLoad(){if(this.defaultPickupData){const t=this.pickupService.transformDefaultPickupData(this.defaultPickupData);this.vehicleCapacity=this.pickupService.getNumberOfVehicles(t.selected_option.vehicle.capacity,this.numberOfPersons);this.allowedOptionsByLocation=g.pickup_service.allowed_options.filter((e=>e.location.id===t.location));this.pickupData=Object.assign({},t)}this.pickupSchema=this.pickupService.createPickupSchema(this.bookingDates.from,this.bookingDates.to)}handleLocationChange(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;if(e===""){this.updatePickupData("location",-1)}if(e!==""){this.allowedOptionsByLocation=g.pickup_service.allowed_options.filter((t=>t.location.id.toString()===e));let t=this.allowedOptionsByLocation[0];if(!t){return}this.vehicleCapacity=this.pickupService.getNumberOfVehicles(t.vehicle.capacity,this.numberOfPersons);this.pickupData=Object.assign(Object.assign({},this.pickupData),{location:e,selected_option:t,number_of_vehicles:this.vehicleCapacity[0],due_upon_booking:this.pickupService.updateDue({amount:t.amount,code:t.pricing_model.code,numberOfPersons:this.numberOfPersons,number_of_vehicles:this.vehicleCapacity[0]}).toFixed(2),vehicle_type_code:t.vehicle.code,currency:t.currency})}}handleVehicleQuantityChange(t){if(t.detail===""){return}const e=+t.detail;this.pickupData=Object.assign(Object.assign({},this.pickupData),{number_of_vehicles:e,due_upon_booking:this.pickupService.updateDue({amount:this.pickupData.selected_option.amount,code:this.pickupData.selected_option.pricing_model.code,numberOfPersons:this.numberOfPersons,number_of_vehicles:e}).toFixed(2)})}handleVehicleTypeChange(t){if(t.detail===""){this.pickupData=Object.assign(Object.assign({},this.pickupData),{due_upon_booking:"",vehicle_type_code:""});return}let e=g.pickup_service.allowed_options.find((e=>e.location.id===+this.pickupData.location&&e.vehicle.code===t.detail));if(!e){return}this.vehicleCapacity=[...this.pickupService.getNumberOfVehicles(e.vehicle.capacity,this.numberOfPersons)];this.pickupData=Object.assign(Object.assign({},this.pickupData),{selected_option:e,number_of_vehicles:this.vehicleCapacity[0],due_upon_booking:this.pickupService.updateDue({amount:e.amount,code:e.pricing_model.code,numberOfPersons:this.numberOfPersons,number_of_vehicles:this.vehicleCapacity[0]}).toFixed(2),vehicle_type_code:e.vehicle.code})}updatePickupData(t,e){this.pickupData=Object.assign(Object.assign({},this.pickupData),{[t]:e})}async savePickup(){try{this.isLoading=true;this.autoValidate=true;if(this.errors){this.errors=null}this.errors=this.pickupService.validateForm(this.pickupData,this.pickupSchema);if(this.errors){return}await this.pickupService.savePickup(this.pickupData,this.bookingNumber,this.defaultPickupData!==null&&this.pickupData.location===-1);this.resetBookingEvt.emit(null);this.closeModal.emit(null)}catch(t){console.error(t)}finally{this.isLoading=false}}render(){var t,i,s,r,a;return e("form",{key:"e950fc5defea42c1bcf845099c37c4fbde60b0b9",class:"sheet-container",onSubmit:async t=>{t.preventDefault();await this.savePickup()}},e("ir-title",{key:"b9ce0f027d93e428e601c0a068d6f56fb734b91a",class:"px-1 sheet-header",onCloseSideBar:()=>this.closeModal.emit(null),label:b.entries.Lcz_Pickup,displayContext:"sidebar"}),e("section",{key:"ebc6259a6d5a82142cffeac651166dc9f3835f28",class:"px-1 sheet-body"},e("ir-select",{key:"1f7d0c31158622defb6ae569b63374d251cec368",testId:"pickup_location",selectedValue:this.pickupData.location,selectContainerStyle:"mb-1",onSelectChange:this.handleLocationChange.bind(this),firstOption:b.entries.Lcz_Pickup_NoThankYou,class:"m-0 mb-1",data:this.pickupService.getAvailableLocations(b.entries.Lcz_Pickup_YesFrom)}),this.pickupData.location>0&&e("div",{key:"54b4b472275f4fdfac8e73678f47346f0fe0f640",class:"m-0 p-0","data-testid":"pickup_body"},e("div",{key:"81f20456e5ce0847146afa4b01d9095a628237d3",class:"d-flex"},e("div",{key:"7d7a57617c8cbd300ae6f870fce95b78092e3d9a",class:"form-group  mr-1"},e("div",{key:"8ee80f80f5ccc414acd5c40b17e3077bff2eb66d",class:"input-group row m-0"},e("div",{key:"6516df597d8f373a4f9ece6c89f3ff63779ae429",class:`input-group-prepend col-5 p-0 text-dark border-0`},e("label",{key:"d8187d97ff087d777a11b4537e9b05a9f6c4d401",class:`input-group-text  flex-grow-1 text-dark border-theme `},b.entries.Lcz_ArrivalDate)),e("div",{key:"e3a38c367982e7ed782d725a88bcded04e61b534",class:"form-control  form-control-md col-7 d-flex align-items-center px-0 mx-0",style:{border:"0"}},e("ir-date-picker",{key:"feb775644bcb77dc491a9baab4f6d79810e190f3","data-testid":"pickup_arrival_date",date:this.pickupData.arrival_date,minDate:this.bookingDates.from,maxDate:(t=this.bookingDates)===null||t===void 0?void 0:t.to,emitEmptyDate:true,"aria-invalid":((i=this.errors)===null||i===void 0?void 0:i.arrival_date)&&!this.pickupData.arrival_date?"true":"false",onDateChanged:t=>{var e;this.updatePickupData("arrival_date",(e=t.detail.start)===null||e===void 0?void 0:e.format("YYYY-MM-DD"))}},e("input",{key:"3dbed681c24dca72aa61fe6407a848fe85f5b497",type:"text",slot:"trigger",value:this.pickupData.arrival_date?E(this.pickupData.arrival_date).format("MMM DD, YYYY"):null,class:`form-control input-sm ${((s=this.errors)===null||s===void 0?void 0:s.arrival_date)&&!this.pickupData.arrival_date?"border-danger":""} text-center`,style:{borderTopLeftRadius:"0",borderBottomLeftRadius:"0",width:"100%"}}))))),e("ir-input-text",{key:"445dbf1e03f29a145514ae4c00ac90cf89594015",autoValidate:this.autoValidate,wrapKey:"arrival_time",testId:"pickup_arrival_time",error:(r=this.errors)===null||r===void 0?void 0:r.arrival_time,value:this.pickupData.arrival_time,zod:this.pickupSchema.pick({arrival_time:true}),label:b.entries.Lcz_Time,inputStyles:"col-sm-4","data-state":this.cause==="arrival_time"?"error":"",mask:this.arrival_time_mask,onTextChange:t=>this.updatePickupData("arrival_time",t.detail)})),e("ir-input-text",{key:"bed2037fdb24ca12598e3d8a49d2fc09b0626c68",wrapKey:"flight_details",zod:this.pickupSchema.pick({flight_details:true}),autoValidate:this.autoValidate,testId:"pickup_flight_details",value:this.pickupData.flight_details,label:b.entries.Lcz_FlightDetails,onTextChange:t=>this.updatePickupData("flight_details",t.detail),placeholder:"",error:(a=this.errors)===null||a===void 0?void 0:a.flight_details}),e("ir-select",{key:"e37ddf817b5619ec754ef31c8f85a0a050bc2863",testId:"pickup_vehicle_type_code",selectContainerStyle:"mb-1",error:this.cause==="vehicle_type_code",onSelectChange:this.handleVehicleTypeChange.bind(this),firstOption:b.entries.Lcz_Select,selectedValue:this.pickupData.vehicle_type_code,class:"m-0",data:this.allowedOptionsByLocation.map((t=>({text:t.vehicle.description,value:t.vehicle.code})))}),e("div",{key:"8e1acf405134b4d90a217af6038bfaa8b63dfbee",class:"d-flex flex-column flex-md-row"},e("ir-select",{key:"b9c94123a454ee8fb086f7f8b01148daaa4781fa",showFirstOption:false,testId:"pickup_number_of_vehicles",labelBorder:"theme",selectContainerStyle:"mb-1",onSelectChange:this.handleVehicleQuantityChange.bind(this),selectedValue:this.pickupData.number_of_vehicles,error:this.cause==="number_of_vehicles",labelWidth:7,class:"m-0  mb-md-0 mr-md-1 flex-fill",label:b.entries.Lcz_NbrOfVehicles,data:this.vehicleCapacity.map((t=>({text:t,value:t})))}),e("div",{key:"2f81fc9d0d46ee90179b1bba8aa3864b1e8a4994",class:"price-input-container"},e("ir-price-input",{key:"57a5bbfc65776da9430c4663e15b2cc3daa3fb48",readOnly:true,label:`${b.entries.Lcz_DueUponBooking}`,value:this.pickupData.due_upon_booking,currency:this.pickupData.currency.symbol}))))),e("div",{key:"f21959ce34ca028a85fc780d2b69bbe094e635c3",class:"sheet-footer"},e("ir-button",{key:"bfacb1b35aa7e4b0f41a66182bba8a30af8a6e7b",onClick:()=>this.closeModal.emit(null),btn_styles:"justify-content-center",class:`flex-fill`,text:b.entries.Lcz_Cancel,btn_color:"secondary"}),(this.defaultPickupData||this.pickupData.location!==-1)&&e("ir-button",{key:"12df334ade7f07f4e7fc8a8150491f5c2b1d1605",btn_styles:"justify-content-center align-items-center",class:"flex-fill",isLoading:this.isLoading,text:b.entries.Lcz_Save,btn_color:"primary",btn_type:"submit"})))}get el(){return a(this)}};Ka.style=Ha+Ua;const Wa=".sc-ir-pickup-view-h{display:block}";const qa=Wa;const Ja=class{constructor(e){t(this,e)}render(){if(!g.pickup_service.is_enabled||!this.booking.is_editable){return null}return e(i,null,e("div",{class:"mb-1"},e("div",{class:"d-flex w-100 mb-1 align-items-center justify-content-between"},e("p",{class:"font-size-large p-0 m-0 "},b.entries.Lcz_Pickup),e("ir-button",{id:"pickup","data-testid":"new_pickup_btn",variant:"icon",icon_name:"edit",style:Object.assign(Object.assign({},L.secondary),{"--icon-size":"1.5rem"})})),this.booking.pickup_info&&e("div",{class:"card"},e("div",{class:"p-1"},e("div",{class:"d-flex align-items-center py-0 my-0 pickup-margin"},e("p",{class:"font-weight-bold mr-1 py-0 my-0"},b.entries.Lcz_Date,": ",e("span",{class:"font-weight-normal"},E(this.booking.pickup_info.date,"YYYY-MM-DD").format("MMM DD, YYYY"))),this.booking.pickup_info.hour&&this.booking.pickup_info.minute&&e("p",{class:"font-weight-bold flex-fill py-0 my-0"},b.entries.Lcz_Time,":",e("span",{class:"font-weight-normal"}," ",G(this.booking.pickup_info.hour.toString(),this.booking.pickup_info.minute.toString()))),e("p",{class:"font-weight-bold py-0 my-0"},b.entries.Lcz_DueUponBooking,":"," ",e("span",{class:"font-weight-normal"},this.booking.pickup_info.currency.symbol,this.booking.pickup_info.total))),e("p",{class:"font-weight-bold py-0 my-0"},b.entries.Lcz_FlightDetails,":",e("span",{class:"font-weight-normal"}," ",`${this.booking.pickup_info.details}`)),e("p",{class:"py-0 my-0 pickup-margin"},`${this.booking.pickup_info.selected_option.vehicle.description}`),e("p",{class:"font-weight-bold py-0 my-0 pickup-margin"},b.entries.Lcz_NbrOfVehicles,":",e("span",{class:"font-weight-normal"}," ",`${this.booking.pickup_info.nbr_of_units}`)),e("p",{class:"small py-0 my-0 pickup-margin"},g.pickup_service.pickup_instruction.description,g.pickup_service.pickup_cancelation_prepayment.description)))))}};Ja.style=qa;const Xa=".sc-ir-pms-logs-h{display:block}.dialog-container-height.sc-ir-pms-logs{height:4rem}.list-title.sc-ir-pms-logs{margin:0;padding:0;font-size:14px;font-weight:bold;width:fit-content}.list-item.sc-ir-pms-logs{margin:0;padding:0;font-size:14px;margin-left:5px;width:fit-content}.list-item.green.sc-ir-pms-logs{color:#629a4c;font-weight:600}.list-item.red.sc-ir-pms-logs{color:#ff4961;font-weight:600}";const Za=Xa;const Qa=class{constructor(e){t(this,e);this.bookingService=new l}componentWillLoad(){this.init()}async init(){try{this.pmsLogs=await this.bookingService.fetchPMSLogs(this.bookingNumber)}catch(t){console.error(t)}}render(){var t,i,s,r,a,n,o,l;return e("div",{key:"9ad8d543a7bccf49a45736615a1ce566de4792d3",class:"p-1"},e("h3",{key:"079bdc4645a0a4a25518cf3b552583b3f71783e4",class:" text-left mb-1 dialog-title "},b.entries.Lcz_PMS_Logs),S("/Get_Exposed_PMS_Logs")?e("div",{class:"d-flex align-items-center justify-content-center dialog-container-height"},e("ir-spinner",null)):e("div",{class:"dialog-container-height"},e("div",{class:"d-flex align-items-center ",style:{paddingBottom:"0.5rem"}},e("p",{class:"list-title p-0 m-0"},b.entries.Lcz_SentAt),((t=this.pmsLogs)===null||t===void 0?void 0:t.sent_date)?e("p",{class:"list-item"},(i=this.pmsLogs)===null||i===void 0?void 0:i.sent_date," ",G((s=this.pmsLogs)===null||s===void 0?void 0:s.sent_hour.toString(),(r=this.pmsLogs)===null||r===void 0?void 0:r.sent_minute.toString())):e("p",{class:`list-item ${((a=this.pmsLogs)===null||a===void 0?void 0:a.sent_date)?"green":"red"}`},((n=this.pmsLogs)===null||n===void 0?void 0:n.is_acknowledged)?b.entries.Lcz_YES:b.entries.Lcz_NO)),e("div",{class:"d-flex align-items-center p-0 m-0"},e("h4",{class:"list-title p-0 m-0"},b.entries.Lcz_Acknowledged),e("p",{class:`list-item  ${((o=this.pmsLogs)===null||o===void 0?void 0:o.is_acknowledged)?"green":"red"}`},((l=this.pmsLogs)===null||l===void 0?void 0:l.is_acknowledged)?b.entries.Lcz_YES:b.entries.Lcz_NO))))}};Qa.style=Za;const tn=":host{display:block;width:100%}*{box-sizing:border-box}.popover-trigger{all:unset;cursor:pointer}.popover-trigger:hover,.popover-trigger:focus{color:#000}";const en=tn;const sn=class{constructor(e){t(this,e);this.irPopoverLeft="10px";this.placement="auto";this.trigger="focus";this.renderContentAsHtml=false;this.initialized=false}componentDidLoad(){if(this.initialized){return}this.initializePopover()}initializePopover(){$(this.popoverTrigger).popover({trigger:this.trigger,content:this.content,placement:this.placement,html:this.renderContentAsHtml});this.initialized=true}disconnectedCallback(){$(this.popoverTrigger).popover("dispose")}render(){return e(i,{key:"d042f02d76765a3221fcece86475131490ab4bbc",style:{"--ir-popover-left":this.irPopoverLeft}},this.trigger!=="focus"?e("p",{ref:t=>this.popoverTrigger=t,class:"popover-title m-0 p-0",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer"}},e("slot",null)):e("button",{tabindex:"0",class:"popover-trigger",ref:t=>this.popoverTrigger=t},e("slot",null)))}get el(){return a(this)}};sn.style=en;const rn=".sc-ir-price-input-h{display:block;--ir-input-border-color:#cacfe7;flex:1 1 0%}.sc-ir-price-input-h .input-group-text.sc-ir-price-input{border-color:var(--ir-input-border-color)}.sc-ir-price-input-h .form-control.sc-ir-price-input,.currency-label.sc-ir-price-input{font-size:14px !important}.ir-bl-lbl-none.sc-ir-price-input,.ir-bl-input-none.sc-ir-price-input{border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.rate-input.sc-ir-price-input:read-only{background:white !important}.ir-br-lbl-none.sc-ir-price-input,.ir-br-input-none.sc-ir-price-input{border-top-right-radius:0 !important;border-bottom-right-radius:0 !important}.ir-br-none.sc-ir-price-input{border-right:none}.ir-bl-none.sc-ir-price-input{border-left:none}.rate-input-container.sc-ir-price-input{display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;flex:1;padding:0 !important}[class='special-style'].sc-ir-price-input-h .rate-input.sc-ir-price-input{background:black !important}.rate-input.sc-ir-price-input{font-size:0.875rem;line-height:0;padding:0;height:0;box-sizing:border-box;border-left:0;padding-left:0px !important;border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.currency-label.with-label.sc-ir-price-input{border-radius:0}.currency-label.sc-ir-price-input{box-sizing:border-box;color:#3b4781;border:1px solid #cacfe7;font-size:0.875rem;height:2rem;background:white;border-right:0;border-top-right-radius:0;border-bottom-right-radius:0;pointer-events:none;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.currency-label.disabled.sc-ir-price-input,.rate-input.sc-ir-price-input:disabled{background-color:#eceff1;border-color:rgba(118, 118, 118, 0.3)}.price-input-group.sc-ir-price-input:focus-within .currency-label.sc-ir-price-input{border-top:1px solid #1e9ff2;border-bottom:1px solid #1e9ff2;border-left:1px solid #1e9ff2}[data-state='error'].sc-ir-price-input-h .currency-label.sc-ir-price-input,[data-state='error'].sc-ir-price-input-h .rate-input.sc-ir-price-input,.error.sc-ir-price-input{border-color:var(--red, #ff4961) !important}.price-input.sc-ir-price-input:focus{border-right-width:1px !important}.is-invalid.sc-ir-price-input{background-image:none !important}";const an=rn;const nn=class{constructor(e){t(this,e);this.textChange=s(this,"textChange",7);this.inputBlur=s(this,"inputBlur",7);this.inputFocus=s(this,"inputFocus",7);this.autoValidate=true;this.placeholder="";this.value="";this.required=false;this.opts={mask:Number,scale:2,radix:".",mapToRadix:[","],normalizeZeros:true,padFractionalZeros:true,thousandsSeparator:","};this.handleInputChange=()=>{this.validateInput(this.value)};this.handleBlur=()=>{this.validateInput(this.value);if(this.value){const t=parseFloat(this.value);this.value=t.toFixed(2);if(this.mask){this.mask.value=this.value}}this.inputBlur.emit(this.value)};this.handleFocus=()=>{this.inputFocus.emit()}}componentWillLoad(){if(this.el.id){this.id=this.el.id}else{this.id=M()}}componentDidLoad(){if(!this.mask){this.initializeMask()}}initializeMask(){const t=Object.assign({},this.opts);if(this.minValue!==undefined){t["min"]=this.minValue}if(this.maxValue!==undefined){t["max"]=this.maxValue}this.mask=yr(this.inputRef,t);if(this.value){this.mask.value=this.value}this.mask.on("accept",(()=>{const t=this.inputRef.value.trim()===""||this.mask.unmaskedValue==="";if(t){this.value="";this.textChange.emit(null)}else{this.value=this.mask.unmaskedValue;this.textChange.emit(this.value)}}))}hasSpecialClass(t){return this.el.classList.contains(t)}validateInput(t){if(!this.autoValidate){return}if(this.zod){try{this.zod.parse(this.wrapKey?{[this.wrapKey]:t}:t);this.error=false}catch(t){console.log(t);this.error=true}}}render(){var t,i;return e("fieldset",{key:"318568587f38e7a3da2c14efc42069d068e4295a",class:"input-group price-input-group m-0 p-0"},this.label&&e("div",{key:"1b1fdff0c777bbdec5b2da70aa57803ad4551327",class:"input-group-prepend"},e("span",{key:"04dd16bf6f085590164de99818e241e6f03c9cb4",class:`input-group-text \n                ${this.labelStyle}\n              ${this.hasSpecialClass("ir-bl-lbl-none")?"ir-bl-lbl-none":""}\n              ${this.hasSpecialClass("ir-br-lbl-none")?"ir-br-lbl-none":""}\n              ${this.hasSpecialClass("ir-br-none")?"ir-br-none":""} \n              ${this.hasSpecialClass("ir-bl-none")?"ir-bl-none":""} \n              `},e("label",{key:"259b7fb43ff791f50bb12e2c7c23aba2d1988019",class:"p-0 m-0",htmlFor:this.id},this.label))),e("div",{key:"372d20ab856d64c3ce91318dca962466b0e070eb",class:"position-relative has-icon-left rate-input-container"},this.currency&&e("div",{key:"7939189c31c959e01baf3efcccc12011320886b8",class:`input-group-prepend`},e("span",{key:"f36fb6535f663dbba4aac96932ba66017ffdefa4",class:`input-group-text ${this.disabled?"disabled":""} currency-label ${this.error?"error":""} ${this.label?"with-label":""}`},this.currency)),e("input",{key:"5a5a917dd03658f2db10f6c2d35083fc659f9749",ref:t=>this.inputRef=t,"data-testid":this.testId,disabled:this.disabled,id:this.id,class:`form-control input-sm rate-input \n              ${this.inputStyle}\n              ${this.hasSpecialClass("ir-br-input-none")?"ir-br-input-none":""} \n              ${this.hasSpecialClass("ir-bl-input-none")?"ir-bl-input-none":""} \n              ${this.error?"error":""} py-0 m-0 ${this.currency?"ir-bl-none":""}`,onInput:this.handleInputChange,onBlur:this.handleBlur,onFocus:this.handleFocus,type:"text",placeholder:this.placeholder,readOnly:this.readOnly,"aria-label":(t=this.el.ariaLabel)!==null&&t!==void 0?t:"price-input","aria-describedby":(i=this.el.ariaDescription)!==null&&i!==void 0?i:"price-input"})))}get el(){return a(this)}};nn.style=an;const on=".sc-ir-reservation-information-h{display:block}";const ln=on;const cn=class{constructor(e){t(this,e);this.openSidebar=s(this,"openSidebar",7);this.userCountry=null}componentWillLoad(){var t,e,i;const s=(e=(t=this.booking)===null||t===void 0?void 0:t.guest)===null||e===void 0?void 0:e.country_id;this.userCountry=s?((i=this.countries)===null||i===void 0?void 0:i.find((t=>t.id===s)))||null:null}handleEditClick(t,e){t.stopImmediatePropagation();t.stopPropagation();this.openSidebar.emit({type:e})}renderPhoneNumber(){const{mobile_without_prefix:t,country_phone_prefix:e,country_id:i}=this.booking.guest;if(!t){return null}if(e){return e+" "+t}if(i){const e=this.countries.find((t=>t.id===i));if(!e){throw new Error("Invalid country id")}return e.phone_prefix+" "+t}return t}render(){var t,i,s,r,a,n;const o=C(this.booking.extras);return e("div",{key:"41e0763ec869d0a817879eaff4caa00f0641940c",class:"card"},e("div",{key:"cd0e1477b5ad997d9432201553d99aa3cf58f59c",class:"p-1"},e("p",{key:"6b535159b3f67dabafd8dd6e5a32bd2e676172ab"},this.booking.property.name||""),e("ir-label",{key:"c0e51097274e2fd66e5e3bac4e726306ca65fcfe",labelText:`${b.entries.Lcz_Source}:`,content:this.booking.origin.Label,image:{src:this.booking.origin.Icon,alt:this.booking.origin.Label}}),e("ir-label",{key:"93afb585f6697c039350bce42afffb65a4540cb7",renderContentAsHtml:true,labelText:`${b.entries.Lcz_BookedOn}:`,content:`${H(this.booking.booked_on.date)}&nbsp&nbsp&nbsp&nbsp${G(this.booking.booked_on.hour.toString(),this.booking.booked_on.minute.toString())}`}),e("ir-label",{key:"c8c01ae98f26d19c1036e16b2d2df283649c80d1",labelText:`${b.entries.Lcz_BookedBy}:`,content:`${this.booking.guest.first_name} ${this.booking.guest.last_name}`},((t=this.booking.guest)===null||t===void 0?void 0:t.nbr_confirmed_bookings)>1&&!this.booking.agent&&e("div",{key:"67bc595285f717702e55eb5c6d79ebe229a65294",class:"m-0 p-0",slot:"prefix"},e("ir-tooltip",{key:"f02b1749372f9cd273daccb3288a04acc7e00080",message:`${b.entries.Lcz_BookingsNbr}`.replace("%1",this.booking.guest.nbr_confirmed_bookings.toString()),customSlot:true},e("div",{key:"ce291d26d62ba5724e4f68098708a1e08a866cac",class:"d-flex align-items-center m-0 p-0",slot:"tooltip-trigger",style:{gap:"0.25rem"}},e("p",{key:"25b1b21a2839170014d2bdfe340c4d6af45a4bef",class:"p-0 m-0",style:{color:"#FB0AAD"}},this.booking.guest.nbr_confirmed_bookings),e("ir-icons",{key:"4fe2bf793aabb7ab375573b48e5b6f5836f40112",style:{"--icon-size":"1rem"},color:"#FB0AAD",name:"heart-fill"})))),e("ir-button",{key:"784b3999632c7e2e76c974bb1770bd8c7a20fd91",slot:"suffix",variant:"icon",icon_name:"edit",style:Object.assign(Object.assign({},L.secondary),{"--icon-size":"1.1rem"}),onClickHandler:t=>this.handleEditClick(t,"guest")})),this.booking.guest.mobile&&e("ir-label",{key:"0dca257713c88697c0cb6387ddc12f98537d9e0b",labelText:`${b.entries.Lcz_Phone}:`,content:this.renderPhoneNumber()}),!this.booking.agent&&e("ir-label",{key:"a96a3e9bf3b6ce61805cdf1613fb0f648c6b731e",labelText:`${b.entries.Lcz_Email}:`,content:this.booking.guest.email}),this.booking.guest.alternative_email&&e("ir-label",{key:"b90f22226d6df4e4ffa7dfe53180ee90468af6b5",labelText:`${b.entries.Lcz_AlternativeEmail}:`,content:this.booking.guest.alternative_email}),((s=(i=this.booking)===null||i===void 0?void 0:i.guest)===null||s===void 0?void 0:s.address)&&e("ir-label",{key:"d571a684d5ffa7f0bc808912d042acb1f10ea545",labelText:`${b.entries.Lcz_Address}:`,content:this.booking.guest.address}),this.userCountry&&e("ir-label",{key:"c0de620d5dcead36150e4c20b10c78ba2c0df260",labelText:`${b.entries.Lcz_Country}:`,isCountryImage:true,content:this.userCountry.name,image:{src:this.userCountry.flag,alt:this.userCountry.name}}),((r=this.booking.guest)===null||r===void 0?void 0:r.notes)&&e("ir-label",{key:"545b0aedae8ef77ecccf2837d3c09972de8377fe",display:"inline",labelText:`${b.entries.Lcz_GuestPrivateNote}:`,content:(a=this.booking.guest)===null||a===void 0?void 0:a.notes}),this.booking.is_direct&&e("ir-label",{key:"e312c809ac955860924671f5c4d0f916f9527daf",labelText:`${b.entries.Lcz_ArrivalTime}:`,content:this.booking.arrival.description}),this.booking.promo_key&&e("ir-label",{key:"0492d2b03fb521a1e4c5af73ccb37c470874f1cf",labelText:`${b.entries.Lcz_Coupon}:`,content:this.booking.promo_key}),this.booking.is_in_loyalty_mode&&!this.booking.promo_key&&e("div",{key:"9cbe76f504cb122359b018a59d62fb57c61f44d2",class:"d-flex align-items-center"},e("svg",{key:"255e2e1e4b5d2fc5eaf0fba70903466f06508b58",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",height:18,width:18},e("path",{key:"29564c0aa6298d5cf0bc91f665a8b448338147fe",fill:"#fc6c85",d:"M225.8 468.2l-2.5-2.3L48.1 303.2C17.4 274.7 0 234.7 0 192.8v-3.3c0-70.4 50-130.8 119.2-144C158.6 37.9 198.9 47 231 69.6c9 6.4 17.4 13.8 25 22.3c4.2-4.8 8.7-9.2 13.5-13.3c3.7-3.2 7.5-6.2 11.5-9c0 0 0 0 0 0C313.1 47 353.4 37.9 392.8 45.4C462 58.6 512 119.1 512 189.5v3.3c0 41.9-17.4 81.9-48.1 110.4L288.7 465.9l-2.5 2.3c-8.2 7.6-19 11.9-30.2 11.9s-22-4.2-30.2-11.9zM239.1 145c-.4-.3-.7-.7-1-1.1l-17.8-20c0 0-.1-.1-.1-.1c0 0 0 0 0 0c-23.1-25.9-58-37.7-92-31.2C81.6 101.5 48 142.1 48 189.5v3.3c0 28.5 11.9 55.8 32.8 75.2L256 430.7 431.2 268c20.9-19.4 32.8-46.7 32.8-75.2v-3.3c0-47.3-33.6-88-80.1-96.9c-34-6.5-69 5.4-92 31.2c0 0 0 0-.1 .1s0 0-.1 .1l-17.8 20c-.3 .4-.7 .7-1 1.1c-4.5 4.5-10.6 7-16.9 7s-12.4-2.5-16.9-7z"})),e("p",{key:"4aa66623e3bd39be17851dd5f3d48c8cbb4c2c0b",class:"m-0 p-0 ml-1"},b.entries.Lcz_LoyaltyDiscountApplied)),this.booking.is_direct?e("ir-label",{labelText:`${b.entries.Lcz_GuestRemark}:`,display:"inline",content:this.booking.remark}):e("ota-label",{class:"m-0 p-0",label:`${b.entries.Lcz_ChannelNotes||"Channel notes"}:`,remarks:this.booking.ota_notes,maxVisibleItems:(n=this.booking.ota_notes)===null||n===void 0?void 0:n.length}),e("div",{key:"b5469a45409a1ca6222f3b26594f35992182d224",class:"d-flex align-items-center justify-content-between"},e("ir-label",{key:"71e1e3968d53553987f03783894cf36be8baafea",labelText:`${b.entries.Lcz_BookingPrivateNote}:`,placeholder:b.entries.Lcz_VisibleToHotelOnly,content:o,display:o?"inline":"flex"}),e("ir-button",{key:"80d44257ae976193291923dcc431424448d0ce57",variant:"icon",icon_name:"edit",style:L.secondary,onClickHandler:t=>this.handleEditClick(t,"extra_note")}))))}};cn.style=ln;const hn=".light-blue-bg.sc-ir-room{background:#acecff;padding:0.1rem 0.3rem;border-radius:5px;display:block;max-width:100px;box-sizing:border-box;display:inline-block;overflow:hidden;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:default}.room_statements.sc-ir-room{display:block;width:100%}.room_statements.sc-ir-room{display:block;width:100%}.room_statements.sc-ir-room span.sc-ir-room{display:inline;white-space:normal;line-height:1.5;word-break:break-word}.room_statements.sc-ir-room b.sc-ir-room{display:inline;margin-right:5px}.payment-container.sc-ir-room{position:absolute;right:1rem;height:fit-content}.sc-ir-room-h{position:relative}.sm-mr.sc-ir-room{margin-right:3px}.subtotal_row.sc-ir-room{padding-top:8px;font-weight:600}.room_actions_btns.sc-ir-room{gap:0.5rem}.night-cost.sc-ir-room{color:#7cbebe}.room_actions_btns.sc-ir-room{white-space:nowrap;width:max-content}.room_actions_btns.sc-ir-room{flex:1 1 0%;display:flex;justify-content:flex-end}.mx-0-5.sc-ir-room{margin-left:2px !important;margin-right:2px !important}.tax-width.sc-ir-room{font-size:10px}.sm-mb-1.sc-ir-room{margin-bottom:5px !important}.sm-mt-1.sc-ir-room{margin-top:5px !important}.mx-01.sc-ir-room{--m:5px;margin-right:var(--m) !important;margin-left:var(--m) !important}";const dn=hn;const un=class{constructor(e){t(this,e);this.deleteFinished=s(this,"deleteFinished",7);this.toast=s(this,"toast",7);this.pressCheckIn=s(this,"pressCheckIn",7);this.pressCheckOut=s(this,"pressCheckOut",7);this.editInitiated=s(this,"editInitiated",7);this.resetbooking=s(this,"resetbooking",7);this.openSidebar=s(this,"openSidebar",7);this.currency="USD";this.language="en";this.hasRoomEdit=false;this.hasRoomDelete=false;this.hasRoomAdd=false;this.hasCheckIn=false;this.hasCheckOut=false;this.collapsed=false;this.isLoading=false;this.modalReason=null;this.isModelOpen=false;this.bookingService=new l}componentWillLoad(){this.mainGuest=this.getMainGuest()}handleClick(t){let e=t.target;if(e.id=="checkin"){this.pressCheckIn.emit(this.room)}else if(e.id=="checkout"){this.pressCheckOut.emit(this.room)}}handleRoomDataChange(){this.mainGuest=this.getMainGuest()}getDateStr(t,e="default"){return t.getDate()+" "+t.toLocaleString(e,{month:"short"})+" "+t.getFullYear()}handleEditClick(){var t,e,i,s,r,a,n,o;this.editInitiated.emit({event_type:"EDIT_BOOKING",ID:this.room["assigned_units_pool"],NAME:B((t=this.mainGuest)===null||t===void 0?void 0:t.first_name,(e=this.mainGuest)===null||e===void 0?void 0:e.last_name),EMAIL:this.booking.guest.email,PHONE:this.booking.guest.mobile,REFERENCE_TYPE:"",FROM_DATE:this.booking.from_date,TO_DATE:this.booking.to_date,TITLE:`${b.entries.Lcz_EditBookingFor} ${(s=(i=this.room)===null||i===void 0?void 0:i.roomtype)===null||s===void 0?void 0:s.name} ${((a=(r=this.room)===null||r===void 0?void 0:r.unit)===null||a===void 0?void 0:a.name)||""}`,defaultDateRange:{dateDifference:this.room.days.length,fromDate:new Date(this.room.from_date+"T00:00:00"),fromDateStr:this.getDateStr(new Date(this.room.from_date+"T00:00:00")),toDate:new Date(this.room.to_date+"T00:00:00"),toDateStr:this.getDateStr(new Date(this.room.to_date+"T00:00:00")),message:""},bed_preference:this.room.bed_preference,adult_child_offering:this.room.rateplan.selected_variation.adult_child_offering,ADULTS_COUNT:this.room.rateplan.selected_variation.adult_nbr,ARRIVAL:this.booking.arrival,ARRIVAL_TIME:this.booking.arrival.description,BOOKING_NUMBER:this.booking.booking_nbr,cancelation:this.room.rateplan.cancelation,channel_booking_nbr:this.booking.channel_booking_nbr,CHILDREN_COUNT:this.room.rateplan.selected_variation.child_nbr,COUNTRY:this.booking.guest.country_id,ENTRY_DATE:this.booking.from_date,FROM_DATE_STR:this.booking.format.from_date,guarantee:this.room.rateplan.guarantee,GUEST:this.mainGuest,IDENTIFIER:this.room.identifier,is_direct:this.booking.is_direct,IS_EDITABLE:this.booking.is_editable,NO_OF_DAYS:this.room.days.length,NOTES:this.booking.remark,origin:this.booking.origin,POOL:this.room["assigned_units_pool"],PR_ID:(n=this.room.unit)===null||n===void 0?void 0:n.id,RATE:this.room.total,RATE_PLAN:this.room.rateplan.name,RATE_PLAN_ID:this.room.rateplan.id,RATE_TYPE:this.room.roomtype.id,ROOMS:this.booking.rooms,SOURCE:this.booking.source,SPLIT_BOOKING:false,STATUS:"IN-HOUSE",TO_DATE_STR:this.booking.format.to_date,TOTAL_PRICE:this.booking.total,legendData:this.legendData,roomsInfo:this.roomsInfo,roomName:((o=this.room.unit)===null||o===void 0?void 0:o.name)||"",PICKUP_INFO:this.booking.pickup_info,booking:this.booking,currentRoomType:this.room})}openModal(t){if(!t){return}this.modalReason=t;this.modal.openModal()}async handleModalConfirmation(t){try{t.stopImmediatePropagation();t.stopPropagation();if(!this.modalReason){return}this.isLoading=true;switch(this.modalReason){case"delete":await this.deleteRoom();break;case"checkin":case"checkout":await this.bookingService.handleExposedRoomInOut({booking_nbr:this.booking.booking_nbr,room_identifier:this.room.identifier,status:this.modalReason==="checkin"?"001":"002"});this.resetbooking.emit(null);break}}catch(t){console.log(t)}finally{this.isLoading=false;this.modalReason=null;this.modal.closeModal()}}async deleteRoom(){let t=[...this.booking.rooms];t=t.filter((t=>t.identifier!==this.room.identifier));const e={assign_units:true,check_in:true,is_pms:true,is_direct:true,booking:{booking_nbr:this.booking.booking_nbr,from_date:this.booking.from_date,to_date:this.booking.to_date,remark:this.booking.remark,property:this.booking.property,source:this.booking.source,currency:this.booking.currency,arrival:this.booking.arrival,guest:this.booking.guest,rooms:t},extras:this.booking.extras,pickup_info:this.booking.pickup_info};await this.bookingService.doReservation(e);this.deleteFinished.emit(this.room.identifier)}async updateDepartureTime(t){try{await this.bookingService.setDepartureTime({property_id:this.property_id,code:t,room_identifier:this.room.identifier});this.toast.emit({type:"success",description:"",title:"Saved Successfully",position:"top-right"})}catch(t){console.log(t)}}formatVariation({infant_nbr:t,adult_nbr:e,children_nbr:i}){const s=e>0?e:0;const r=i>0?i:0;const a=t>0?t:0;const n=s>1?b.entries.Lcz_Adults.toLowerCase():b.entries.Lcz_Adult.toLowerCase();const o=r>1?b.entries.Lcz_Children.toLowerCase():b.entries.Lcz_Child.toLowerCase();const l=a>1?b.entries.Lcz_Infants.toLowerCase():b.entries.Lcz_Infant.toLowerCase();const c=[];if(s>0){c.push(`${s} ${n}`)}if(r>0){c.push(`${r} ${o}`)}if(a>0){c.push(`${a} ${l}`)}return c.join("&nbsp&nbsp&nbsp&nbsp")}getSmokingLabel(){var t,e,i;if(this.booking.is_direct){if(!this.room.smoking_option){return null}const i=g.roomsInfo.find((t=>t.id===this.room.roomtype.id));if(i){const s=(t=i["smoking_option"])===null||t===void 0?void 0:t.allowed_smoking_options;if(s){return(e=s.find((t=>t.code===this.room.smoking_option)))===null||e===void 0?void 0:e.description}return null}return null}return(i=this.room.ota_meta)===null||i===void 0?void 0:i.smoking_preferences}getBedName(){var t,e;if(this.booking.is_direct){const e=this.bedPreferences.find((t=>{var e,i;return t.CODE_NAME===((i=(e=this.room)===null||e===void 0?void 0:e.bed_preference)===null||i===void 0?void 0:i.toString())}));if(!e){return}return(t=e[`CODE_VALUE_${this.language}`])!==null&&t!==void 0?t:e.CODE_VALUE_EN}return(e=this.room.ota_meta)===null||e===void 0?void 0:e.bed_preferences}renderModalMessage(){switch(this.modalReason){case"delete":return`${b.entries["Lcz_AreYouSureDoYouWantToRemove "]} ${this.room.roomtype.name} ${this.room.unit?this.room.unit.name:""} ${b.entries.Lcz_FromThisBooking}`;case"checkin":return`Are you sure you want to Check In this unit?\n`;case"checkout":return`Are you sure you want to Check Out this unit?`;default:return""}}handleCheckIn(){const{adult_nbr:t,children_nbr:e,infant_nbr:i}=this.room.occupancy;if(this.room.sharing_persons.length<t+e+i){return this.showGuestModal()}return this.renderModalMessage()}getMainGuest(){var t;return(t=this.room.sharing_persons)===null||t===void 0?void 0:t.find((t=>t.is_main))}render(){var t,s,a,n;const o=this.getBedName();return e(i,{key:"2072714e63bf3b8128e1f1a1c3ac1b26f846dfec",class:"p-1 d-flex m-0"},e("ir-button",{key:"6ae010d17616a9406e3d6e8f670a87acc3d388f8",variant:"icon",id:"drawer-icon","data-toggle":"collapse","data-target":`#roomCollapse-${(t=this.room.identifier)===null||t===void 0?void 0:t.split(" ").join("")}`,"aria-expanded":this.collapsed?"true":"false","aria-controls":"myCollapse",class:"mr-1",icon_name:this.collapsed?"closed_eye":"open_eye",onClickHandler:()=>{this.collapsed=!this.collapsed},style:{"--icon-size":"1.6rem"}}),e("div",{key:"02352443e790b3ec5cab5f35d7d936645264c4f8",class:"flex-fill m-0 "},e("div",{key:"9b13426d54142cd97ccdbaf928546dacc843c7f6",class:"d-flex align-items-start justify-content-between sm-mb-1"},e("p",{key:"c01559b3b51f7d976452661bbc17cfe4c634e929",class:"m-0 p-0"},e("span",{key:"47dda81cce4bf9900b864e517aa5ba2cf714899d",class:"m-0 p-0",style:{fontWeight:"600"}},this.myRoomTypeFoodCat||""," ")," ",this.mealCodeName," ",this.room.rateplan.is_non_refundable&&` - ${b.entries.Lcz_NonRefundable}`," "),e("div",{key:"c197ad7adb5e021357e54495b084962d2cea5dca",class:"d-flex m-0 p-0 align-items-center room_actions_btns"},e("span",{key:"c6bec42df9089b779514ea3eb478bc601b12ae4a",class:"p-0 m-0 font-weight-bold"},v(this.currency,this.room["gross_total"])),this.hasRoomEdit&&this.isEditable&&e("ir-button",{key:"7c66f6db610a58fcc976f0f9f838fdc49a2ecdb2",id:`roomEdit-${this.room.identifier}`,variant:"icon",icon_name:"edit",style:L.secondary,onClickHandler:this.handleEditClick.bind(this)}),this.hasRoomDelete&&this.isEditable&&e("ir-button",{key:"f0369a3badb051592539bf4994e406565a1297d3",variant:"icon",onClickHandler:this.openModal.bind(this,"delete"),id:`roomDelete-${this.room.identifier}`,icon_name:"trash",style:L.danger}))),e("div",{key:"ccd2856adbb9e9f7405b8965cdf318d3d953fc66",class:"d-flex align-items-center sm-mb-1"},e("ir-date-view",{key:"7ac6c910de5dc59afa4a2be04367d354fae54bac",class:"mr-1  flex-grow-1",style:{width:"fit-content"},from_date:this.room.from_date,to_date:this.room.to_date,showDateDifference:false}),!m(this.room.roomtype.id)&&g.is_frontdesk_enabled&&this.room.unit&&e("div",{key:"f3091fa3064073a5e1e3fb33c8b1fc1f08ac085b",class:"d-flex justify-content-center align-items-center"},e("ir-tooltip",{key:"08c2fc8b01ccb3c23d44d6a6aa63c51ea434e8a1",message:this.room.unit.name,customSlot:true},e("span",{key:"e231e6316d02679353d651e98693a03664fcb62e",slot:"tooltip-trigger",class:`light-blue-bg  ${this.hasCheckIn||this.hasCheckOut?"mr-2":""} `},this.room.unit.name))),this.hasCheckIn&&e("ir-button",{key:"ed56fe97bcd5d96de9ccc5d6e951fff2440e85ec",onClickHandler:this.handleCheckIn.bind(this),id:"checkin",btn_color:"outline",size:"sm",text:b.entries.Lcz_CheckIn}),this.hasCheckOut&&e("ir-button",{key:"d1a36eff80334dee5e62eb07b73741c835828786",onClickHandler:this.openModal.bind(this,"checkout"),id:"checkout",btn_color:"outline",size:"sm",text:b.entries.Lcz_CheckOut})),e("div",{key:"8e51cede6f0505ae57f88c8920200e742b5c50f2",class:"d-flex align-items-center",style:{gap:"0.5rem"}},e("p",{key:"e9090adf9f0c1142c75f55e7caffadd9691c9a23",class:"m-0 p-0"},`${this.mainGuest.first_name||""} ${this.mainGuest.last_name||""}`),this.room.rateplan.selected_variation.adult_nbr>0&&(this.room.unit?e("ir-tooltip",{message:"View guests",class:"m-0 p-0",customSlot:true},e("ir-button",{class:"m-0 p-0",slot:"tooltip-trigger",btn_color:"link",renderContentAsHtml:true,onClickHandler:()=>this.showGuestModal(),size:"sm",btnStyle:{width:"fit-content",margin:"0",padding:"0",fontSize:"inherit",textAlign:"center",lineHeight:"1.2"},text:this.formatVariation(this.room.occupancy)})):e("span",{innerHTML:this.formatVariation(this.room.occupancy)})),o&&e("p",{key:"ecd52044d98ccfaeeaba8bec5ffe73988e481835",class:"m-0 p-0"},"(",o,")")),e("div",{key:"9f0e18662e5019c49a4d7bc997a84dbcf81c9f76",class:"d-flex align-items-center",style:{marginTop:"0.5rem",marginBottom:"0.875rem",gap:"0.5rem"}},e("p",{key:"c297d5bf2b1927987aa8da6275229c17d782f7c5",class:"m-0 p-0"},"Expected departure time:"),e("ir-select",{key:"be80b8e186acb42af0849b8f3dba0f0416f7e705",selectedValue:(s=this.room.departure_time)===null||s===void 0?void 0:s.code,showFirstOption:false,onSelectChange:t=>{this.updateDepartureTime(t.detail)},data:(a=this.departureTime)===null||a===void 0?void 0:a.map((t=>{var e,i;return{text:(i=t[`CODE_VALUE_${(e=this.language)===null||e===void 0?void 0:e.toUpperCase()}`])!==null&&i!==void 0?i:t[`CODE_VALUE_EN`],value:t.CODE_NAME}}))})),e("div",{key:"65229bf042f66f478252f20e955dc6c4b6dd84ec",class:"collapse",id:`roomCollapse-${(n=this.room.identifier)===null||n===void 0?void 0:n.split(" ").join("")}`},e("div",{key:"ba77c56feaf025b3d39d337c6aef7eec82ae1443",class:"d-flex sm-mb-1 sm-mt-1"},e("div",{key:"9f2b9f6d7834dd5e3ee04b41c4610eb120e7a4be",class:" sm-padding-top"},e("p",{key:"aaffbe640f3c770867d23dc8cb33fbe7e9b37b50",class:"sm-padding-right",style:{fontWeight:"600"}},`${b.entries.Lcz_Breakdown}:`)),e("div",{key:"2e769a5d12720820308d937e19d30e4da17d1cbd",class:"flex-fill"},e("table",{key:"eb09d307f9243ce1d9da57fbe8d880558b6ae011"},this.room.days.length>0&&this.room.days.map((t=>e("tr",null,e("td",{class:"pr-2 text-right"},U(t.date)),e("td",{class:"text-right"},v(this.currency,t.amount)),t.cost>0&&t.cost!==null&&e("td",{class:"pl-2 text-left night-cost"},v(this.currency,t.cost))))),e("tr",{key:"9e94ba071c71f5f763ba313e8cf1a9523dc9c2b8",class:""},e("th",{key:"4b8fee97b19a43474d92b018785f3fc9b941fe39",class:"text-right pr-2 subtotal_row"},b.entries.Lcz_SubTotal),e("th",{key:"378c8b236978a846cd69fe7b883c615a174f7acb",class:"text-right subtotal_row"},v(this.currency,this.room.total)),this.room.gross_cost>0&&this.room.gross_cost!==null&&e("th",{key:"f43e27a3578fa0d9d48680eb98aa06b0ddd6ef94",class:"pl-2 text-right night-cost"},v(this.currency,this.room.cost))),this.booking.is_direct?e(r,null,(()=>{const t=g.taxes.filter((t=>t.pct>0));return t.map((t=>e("tr",null,e("td",{class:"text-right pr-2"},t.is_exlusive?b.entries.Lcz_Excluding:b.entries.Lcz_Including," ",t.name," (",t.pct,"%)"),e("td",{class:"text-right"},v(this.currency,this.room.total*t.pct/100)),this.room.gross_cost>0&&this.room.gross_cost!==null&&e("td",{class:"pl-2 text-right night-cost"},v(this.currency,this.room.cost*t.pct/100)))))})()):e(r,null,(()=>{const t=this.room.ota_taxes.filter((t=>t.amount>0));return t.map((t=>e("tr",null,e("td",{class:"text-right pr-2"},t.is_exlusive?b.entries.Lcz_Excluding:b.entries.Lcz_Including," ",t.name),e("td",{class:"text-right"},t.currency.symbol,t.amount))))})())))),e("ir-label",{key:"2f85d1e0efe826a7810abd620885c0c83c8604db",labelText:`${b.entries.Lcz_SmokingOptions}:`,display:"inline",content:this.getSmokingLabel()}),this.booking.is_direct&&e(r,{key:"37443d9b679e072ffaf04020c22112282a8489e5"},this.room.rateplan.cancelation&&e("ir-label",{key:"b17ce77f74a0d6dc691386532dfffa861cae4f0d",labelText:`${b.entries.Lcz_Cancellation}:`,display:"inline",content:this.room.rateplan.cancelation||"",renderContentAsHtml:true}),this.room.rateplan.guarantee&&e("ir-label",{key:"7d07b995553b2d09da7befd933146c49478b1ecd",labelText:`${b.entries.Lcz_Guarantee}:`,display:"inline",content:this.room.rateplan.guarantee||"",renderContentAsHtml:true})),this.room.ota_meta&&e("div",{key:"8049c8cfc780f684c99a3ae2facc7fcd6790e8cc"},e("ir-label",{key:"9f9111b81632c5b4f045c563789565f98087a573",labelText:`${b.entries.Lcz_MealPlan}:`,display:"inline",content:this.room.ota_meta.meal_plan}),e("ir-label",{key:"083ed555a63deff80f9169e4b9c6432d24530796",labelText:`${b.entries.Lcz_Policies}:`,display:"inline",content:this.room.ota_meta.policies})))),e("ir-modal",{key:"2e62ff74d8f0dc3098121347f6f9a00fdbbfafe2",autoClose:false,ref:t=>this.modal=t,isLoading:this.isLoading,onConfirmModal:this.handleModalConfirmation.bind(this),iconAvailable:true,icon:"ft-alert-triangle danger h1",leftBtnText:b.entries.Lcz_Cancel,rightBtnText:this.modalReason==="delete"?b.entries.Lcz_Delete:b.entries.Lcz_Confirm,leftBtnColor:"secondary",rightBtnColor:this.modalReason==="delete"?"danger":"primary",modalTitle:b.entries.Lcz_Confirmation,modalBody:this.renderModalMessage()}))}showGuestModal(){var t;const{adult_nbr:e,children_nbr:i,infant_nbr:s}=this.room.occupancy;this.openSidebar.emit({type:"room-guest",payload:{roomName:(t=this.room.unit)===null||t===void 0?void 0:t.name,sharing_persons:this.room.sharing_persons,totalGuests:e+i+s,checkin:this.hasCheckIn,identifier:this.room.identifier}})}get element(){return a(this)}static get watchers(){return{room:["handleRoomDataChange"]}}};un.style=dn;const pn={id:-1,full_name:"",country_id:null,dob:"",id_info:{type:{code:null,description:null},number:""},address:null,alternative_email:null,cci:null,city:null,country:undefined,country_phone_prefix:null,email:null,first_name:"",last_name:"",mobile:null,nbr_confirmed_bookings:0,notes:null,password:null,subscribe_to_news_letter:null};const fn={mask:Date,pattern:"DD/MM/YYYY",lazy:false,min:new Date(1900,0,1),max:new Date,format:t=>E(t).format("DD/MM/YYYY"),parse:t=>E(t,"DD/MM/YYYY").toDate(),autofix:true,placeholderChar:"_",blocks:{YYYY:{mask:Rr,from:1970,to:(new Date).getFullYear(),placeholderChar:"Y"},MM:{mask:Rr,from:1,to:12,placeholderChar:"M"},DD:{mask:Rr,from:1,to:31,placeholderChar:"D"}}};const bn=".sc-ir-room-guests-h{display:block;height:100%;position:relative;text-align:start !important}.id-select.sc-ir-room-guests{border-top-right-radius:0;border-bottom-right-radius:0;border-right-width:0}.sc-ir-room-guests-h{display:block;width:100%}.guest-grid.sc-ir-room-guests>*.sc-ir-room-guests{height:100%}.guests-labels.sc-ir-room-guests{display:none}.guest_label.sc-ir-room-guests{width:100px;color:#6b6f82}.sharing_persons_label.sc-ir-room-guests{display:none}.loading-container.sc-ir-room-guests{height:100%;width:100%;display:flex;justify-content:center;align-items:center;margin:0;padding:0}.guest_document.sc-ir-room-guests input.sc-ir-room-guests{border-top-left-radius:0;border-bottom-left-radius:0}.guests-labels.sc-ir-room-guests *.sc-ir-room-guests,.sharing_persons_label.sc-ir-room-guests{margin-bottom:0.5rem;padding-bottom:0}@media (min-width: 768px){.sharing_persons_label.sc-ir-room-guests{display:block}.guest_country_picker.sc-ir-room-guests{margin-bottom:3px}.guest-grid.sc-ir-room-guests{display:grid;grid-template-columns:2fr 2fr 2fr 2fr 5fr;gap:0.5rem;align-items:flex-start}.guest_label.sc-ir-room-guests,.sharing_persons_heading.sc-ir-room-guests,.main_guest_heading.sc-ir-room-guests{display:none}}";const mn=bn;const gn=".sc-ir-room-guests-h{height:100%}.sheet-container.sc-ir-room-guests{display:flex !important;flex-direction:column !important;background:white;height:100vh;gap:1rem;z-index:1000}.sheet-container.sc-ir-room-guests{height:-webkit-fill-available;height:100vh;height:100dvh}.sheet-footer.sc-ir-room-guests{position:sticky;bottom:0;z-index:20;background:white;border-top:1px solid #e4e5ec;display:flex;flex-direction:column;padding:1rem;gap:0.5rem}.sheet-header.sc-ir-room-guests{position:sticky;top:0;z-index:10;background:white}.sheet-body.sc-ir-room-guests{flex:1 1 0%}@media (min-width: 768px){.sheet-footer.sc-ir-room-guests{flex-direction:row;align-items:center}}";const vn=gn;const yn=class{constructor(e){t(this,e);this.closeModal=s(this,"closeModal",7);this.resetBookingEvt=s(this,"resetBookingEvt",7);this.updateRoomGuests=s(this,"updateRoomGuests",7);this.sharedPersons=[];this.totalGuests=0;this.language="en";this.guests=[];this.idTypes=[];this.error={};this.autoValidate=false;this.bookingService=new l}componentWillLoad(){this.init();this.initializeGuests()}async init(){try{this.isLoading=true;const[t,e]=await Promise.all([this.bookingService.getUserDefaultCountry(),this.bookingService.getSetupEntriesByTableName("_ID_TYPE")]);this.idTypes=e;if(t){this.propertyCountry=this.countries.find((e=>e.id===t.COUNTRY_ID))}}catch(t){console.error(t)}finally{this.isLoading=false}}initializeGuests(){var t,e;let i=[];if(this.totalGuests>this.sharedPersons.length){const s=this.totalGuests-this.sharedPersons.length;i=[...this.sharedPersons,...Array(s).fill(Object.assign(Object.assign({},pn),{id_info:Object.assign(Object.assign({},pn.id_info),{type:{code:((t=this.idTypes[0])===null||t===void 0?void 0:t.CODE_NAME)||"001",description:((e=this.idTypes[0])===null||e===void 0?void 0:e.CODE_VALUE_EN)||""},number:""})}))]}else{i=[...this.sharedPersons]}i=i.map((t=>Object.assign(Object.assign({},t),{dob:new Date(t.dob).getFullYear()===1900?null:t.dob})));this.guests=i.map((t=>Object.assign(Object.assign({},t),{dob:t.dob?E(new Date(t.dob)).format("DD/MM/YYYY"):"",country_id:t.country?t.country.id:null})))}updateGuestInfo(t,e){const i=[...this.guests];let s=i[t];s=Object.assign(Object.assign({},s),e);i[t]=s;this.guests=[...i]}async saveGuests(){try{this.error={};this.autoValidate=true;for(const t of this.guests){Hs(t)}await this.bookingService.handleExposedRoomGuests({booking_nbr:this.bookingNumber,identifier:this.identifier,guests:this.guests.map((t=>{if(!t.first_name&&t.id===-1){return null}return Object.assign(Object.assign({},t),{dob:t.dob?E(t.dob,"DD/MM/YYYY").format("YYYY-MM-DD"):null})})).filter(Boolean)});if(this.checkIn){await this.bookingService.handleExposedRoomInOut({booking_nbr:this.bookingNumber,room_identifier:this.identifier,status:"001"})}this.closeModal.emit(null);this.updateRoomGuests.emit({identifier:this.identifier,guests:this.guests});this.resetBookingEvt.emit()}catch(t){console.log(t);if(t instanceof F){let e={};t.issues.forEach((t=>{e[t.path[t.path.length-1]]=true}));this.error=Object.assign({},e)}}}render(){if(this.isLoading){return e("div",{class:"loading-container"},e("ir-spinner",null))}return e("form",{class:"sheet-container",style:{minWidth:"300px"},onSubmit:t=>{t.preventDefault();this.saveGuests()}},e("ir-title",{class:"px-1 sheet-header",onCloseSideBar:()=>this.closeModal.emit(null),label:`Room ${this.roomName}`,displayContext:"sidebar"}),e("section",{class:"sheet-body px-1"},e("div",{class:""},e("div",{class:"guest-grid guests-labels"},e("p",{class:""},b.entries.Lcz_MainGuest),e("p",{class:""}),e("p",{class:" "},b.entries.Lcz_DOB),e("p",{class:""},b.entries.Lcz_Nationality),e("p",{class:" "},b.entries.Lcz_Documents)),e("h5",{class:"main_guest_heading"},b.entries.Lcz_MainGuest),this.guests.map(((t,i)=>{var s,a;let n=true;try{Hs(t)}catch(t){n=false}console.log(`row ${i}=>${n}`);return e(r,null,i===1&&e("div",{class:"d-flex mx-0 px-0"},e("h5",{class:"mx-0 px-0 sharing_persons_heading"},b.entries.Lcz_PersonsSharingRoom),e("p",{class:"mx-0 px-0 sharing_persons_label"},b.entries.Lcz_PersonsSharingRoom)),e("div",{key:i,class:"guest-grid"},e("div",{class:"m-0 p-0 d-flex align-items-center h-100"},e("p",{class:"guest_label"},"First name"),e("ir-input-text",{class:"flex-grow-1 h-100",id:`first_name_${i}`,zod:Vs.pick({first_name:true}),error:!!this.error["first_name"]&&!n,autoValidate:this.autoValidate,wrapKey:"first_name",placeholder:"First name",onTextChange:t=>this.updateGuestInfo(i,{first_name:t.detail}),value:t.first_name,maxLength:40})),e("div",{class:"m-0 p-0 d-flex align-items-center h-100"},e("p",{class:"guest_label"},"Last name"),e("ir-input-text",{maxLength:40,class:"flex-grow-1 h-100",id:`last_name_${i}`,zod:Vs.pick({last_name:true}),error:!!this.error["last_name"]&&!n,autoValidate:this.autoValidate,wrapKey:"last_name",placeholder:"Last name",onTextChange:t=>this.updateGuestInfo(i,{last_name:t.detail}),value:t.last_name})),e("div",{class:"flex-grow-0 m-0 p-0 h-100 d-flex align-items-center"},e("p",{class:"guest_label"},b.entries.Lcz_DOB),e("ir-input-text",{class:"flex-grow-1 h-100",id:`dob_${i}`,zod:Vs.pick({dob:true}),error:!!this.error["dob"]&&!n,autoValidate:this.autoValidate,wrapKey:"dob",mask:fn,placeholder:"",onTextChange:t=>{this.updateGuestInfo(i,{dob:t.detail})},value:t.dob})),e("div",{class:" m-0 p-0 d-flex align-items-center"},e("p",{class:"guest_label"},b.entries.Lcz_Nationality),e("div",{class:"mx-0 flex-grow-1  h-100"},e("ir-country-picker",{class:"h-100",propertyCountry:this.propertyCountry,id:`{locales.entries.Lcz_Nationality}_${i}`,error:!!this.error["country_id"]&&!t.country_id,country:(s=this.countries)===null||s===void 0?void 0:s.find((e=>{var i,s,r;return((i=e.id)===null||i===void 0?void 0:i.toString())===((r=(s=t.country)===null||s===void 0?void 0:s.id)===null||r===void 0?void 0:r.toString())})),onCountryChange:t=>{var e,s,r;return this.updateGuestInfo(i,{country_id:(r=(s=(e=t.detail)===null||e===void 0?void 0:e.id)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:null,country:t.detail})},countries:this.countries}))),e("div",{class:"flex-grow-1 m-0 p-0 d-flex align-items-center"},e("p",{class:"guest_label"},b.entries.Lcz_Documents),e("div",{class:" d-flex m-0 flex-grow-1 h-100"},e("ir-select",{selectForcedStyles:{borderTopRightRadius:"0px",borderBottomRightRadius:"0px",borderRight:"0"},selectStyles:"rounded-top-0 rounded-bottom-0",onSelectChange:t=>{this.updateGuestInfo(i,{id_info:Object.assign(Object.assign({},this.guests[i].id_info),{type:{code:t.detail,description:""}})})},selectedValue:t.id_info.type.code,showFirstOption:false,data:(a=this.idTypes)===null||a===void 0?void 0:a.map((t=>{var e;return{text:(e=t[`CODE_VALUE_${this.language.toUpperCase()}`])!==null&&e!==void 0?e:t[`CODE_VALUE_EN`],value:t.CODE_NAME}}))}),e("ir-input-text",{autoValidate:this.autoValidate,maxLength:18,placeholder:"12345",class:"flex-grow-1 guest_document",type:"text",inputForcedStyle:{borderTopLeftRadius:"0px",borderBottomLeftRadius:"0px"},value:t.id_info.number,zod:Ps.pick({number:true}),error:!!this.error["number"]&&!n,wrapKey:"number",inputStyles:"form-control",onTextChange:t=>this.updateGuestInfo(i,{id_info:Object.assign(Object.assign({},this.guests[i].id_info),{number:t.detail})})})))))})))),e("div",{class:"sheet-footer"},e("ir-button",{onClick:()=>this.closeModal.emit(null),class:`flex-fill`,text:b.entries.Lcz_Cancel,btn_color:"secondary"}),e("ir-button",{btn_type:"submit",class:"flex-fill",isLoading:S("/Handle_Exposed_Room_Guests"),text:this.checkIn?b.entries.Lcz_CheckIn:b.entries.Lcz_Save,btn_color:"primary"})))}};yn.style=mn+vn;const kn=".border-theme.sc-ir-select{border:1px solid #cacfe7}@keyframes bounce{0%,100%{transform:scale(1);animation-timing-function:cubic-bezier(0.8, 0, 1, 1)}50%{transform:scale(1.2);animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}}.bounce-3.sc-ir-select{animation:bounce 1s 1}.sc-ir-select-h{--ir-floating-label-fg:#6c757d;--ir-floating-label-fg-focus:#495057;--ir-floating-label-bg:#fff;--ir-floating-label-scale:0.88;--ir-floating-label-float-translateY:-70%;--ir-floating-label-resting-offset-inline:0.9rem;--ir-floating-select-radius:0.21rem;--ir-floating-select-height:2rem;--ir-danger:#dc3545;--ir-disabled-fg:#9aa0a6}.floating-select.sc-ir-select{height:var(--ir-floating-select-height);border-radius:var(--ir-floating-select-radius) !important}.sc-ir-select-h .ir-floating-group.sc-ir-select,.sc-ir-select-h .ir-select-wrapper.sc-ir-select{position:relative}.sc-ir-select-h .ir-floating-group.has-floating.sc-ir-select,.sc-ir-select-h .ir-select-wrapper.has-floating.sc-ir-select{padding-top:0.9rem}.sc-ir-select-h .ir-floating-label.sc-ir-select,.sc-ir-select-h .floating-label.sc-ir-select{position:absolute;top:0;transform:translateY(-50%);pointer-events:none;padding:0 0.4rem;z-index:10;color:var(--ir-floating-label-fg);background:white;transition:transform 120ms ease, color 120ms ease, top 120ms ease, background-color 120ms ease, opacity 120ms ease;opacity:0.95;line-height:1;white-space:nowrap}.sc-ir-select-h .ir-floating-label.sc-ir-select:dir(rtl),.sc-ir-select-h .floating-label.sc-ir-select:dir(rtl){right:var(--ir-floating-label-resting-offset-inline)}.sc-ir-select-h .ir-floating-label.sc-ir-select:dir(ltr),.sc-ir-select-h .floating-label.sc-ir-select:dir(ltr){left:var(--ir-floating-label-resting-offset-inline)}.sc-ir-select-h .ir-floating-group.sc-ir-select:focus-within .ir-floating-label.sc-ir-select,.sc-ir-select-h .ir-floating-input.sc-ir-select:not(:placeholder-shown)+.ir-floating-label.sc-ir-select,.sc-ir-select-h .ir-floating-group[data-has-value='true'].sc-ir-select .ir-floating-label.sc-ir-select,.sc-ir-select-h .ir-floating-group.sc-ir-select:focus-within .floating-label.sc-ir-select,.sc-ir-select-h .ir-floating-input.sc-ir-select:not(:placeholder-shown)+.floating-label.sc-ir-select,.sc-ir-select-h .ir-floating-group[data-has-value='true'].sc-ir-select .floating-label.sc-ir-select,.sc-ir-select-h .floating-label.active.sc-ir-select{top:0;transform:translateY(var(--ir-floating-label-float-translateY)) scale(var(--ir-floating-label-scale));background:var(--ir-floating-label-bg);color:var(--ir-floating-label-fg-focus);font-size:12px;padding:0;opacity:0.95}.sc-ir-select-h .ir-floating-group.has-floating.sc-ir-select select.sc-ir-select,.sc-ir-select-h .ir-select-wrapper.has-floating.sc-ir-select select.sc-ir-select,.sc-ir-select-h .ir-floating-group.has-floating.sc-ir-select .ir-floating-input.sc-ir-select{padding-top:0.9rem}.sc-ir-select-h .ir-floating-group.has-error.sc-ir-select .ir-floating-label.sc-ir-select,.sc-ir-select-h .has-error.sc-ir-select .ir-floating-group.sc-ir-select .ir-floating-label.sc-ir-select,.sc-ir-select-h .ir-floating-group.has-error.sc-ir-select .floating-label.sc-ir-select,.sc-ir-select-h .has-error.sc-ir-select .ir-floating-group.sc-ir-select .floating-label.sc-ir-select{color:var(--ir-danger)}.sc-ir-select-h .ir-floating-group.is-disabled.sc-ir-select .ir-floating-label.sc-ir-select,.sc-ir-select-h .ir-floating-group.is-disabled.sc-ir-select .floating-label.sc-ir-select{color:var(--ir-disabled-fg)}@supports (-webkit-touch-callout: none){.sc-ir-select-h .ir-floating-input.sc-ir-select{border-radius:var(--ir-floating-input-border-radius)}}";const xn=kn;const wn=class{constructor(e){t(this,e);this.selectChange=s(this,"selectChange",7);this.selectedValue=null;this.firstOption="Select";this.showFirstOption=true;this.size="md";this.textSize="md";this.labelPosition="left";this.labelBackground=null;this.labelColor="dark";this.labelBorder="theme";this.labelWidth=3;this.selectId=M();this.error=false;this.initial=true;this.valid=false;this.labelId=`ir-select-label-${M()}`;this.count=0}watchHandler(t){if(t!==null&&this.required){this.valid=true}}handleButtonAnimation(t){if(!this.selectEl||t.detail!==this.selectId){return}t.stopImmediatePropagation();t.stopPropagation();this.selectEl.classList.add("border-danger")}handleSelectChange(t){this.selectEl.classList.remove("border-danger");if(this.required){this.initial=false;this.valid=t.target.checkValidity();this.selectedValue=t.target.value;this.selectChange.emit(this.selectedValue)}else{this.selectedValue=t.target.value;this.selectChange.emit(this.selectedValue)}}render(){let t=["form-control"];if(this.floatingLabel){t.push("floating-select")}else{t.push(`col-${this.label?12-this.labelWidth:12}`)}if(this.required&&!this.valid&&!this.initial){t.push("border-danger")}let i=this.label?this.floatingLabel?e("label",{id:this.labelId,class:`floating-label active`,htmlFor:this.selectId},this.label,this.required?"*":""):e("div",{class:`input-group-prepend col-${this.labelWidth} p-0 text-${this.labelColor}`},e("label",{htmlFor:this.selectId,class:`input-group-text ${this.labelPosition==="right"?"justify-content-end":this.labelPosition==="center"?"justify-content-center":""} ${this.labelBackground?"bg-"+this.labelBackground:""} flex-grow-1 text-${this.labelColor} border-${this.labelBorder==="none"?0:this.labelBorder} `},this.label,this.required?"*":"")):null;return e("div",{key:"b34f90ba80d6aa2f6f6e6982193ebf66f0c6ae76",class:`form-group m-0 ${this.selectContainerStyle}`},e("div",{key:"0088d044be458a5939b848bcb9ce104cb59add03",class:"input-group row m-0"},i,e("select",{key:"ff91e917d440e790ca40199dfe4bdf6065bb70b9",disabled:this.disabled,"aria-invalid":this.error?"true":"false","data-testid":this.testId,style:this.selectForcedStyles,ref:t=>this.selectEl=t,id:this.selectId,class:`${this.selectStyles} ${this.error?"border-danger":""} ${t.join(" ")} form-control-${this.size} text-${this.textSize} `,onInput:this.handleSelectChange.bind(this),required:this.required},this.showFirstOption&&e("option",{key:"256a6f980231d805fc7f8b88bc487ff556389463",value:""},this.firstOption),this.data.map((t=>e("option",{selected:this.selectedValue===t.value,value:t.value},t.text))))))}static get watchers(){return{selectedValue:["watchHandler"]}}};wn.style=xn;const _n=".backdrop{position:fixed;top:0;left:0;width:100%;height:100vh;cursor:pointer;background:rgba(0, 0, 0, 0.5);z-index:99;transition:all 0.5s;opacity:0;pointer-events:none;transition:all 0.5s}.backdrop.active{opacity:1;pointer-events:all}.sidebar-right{position:fixed;top:0;right:-120%;bottom:0;width:var(--sidebar-width, 40rem);max-width:100%;box-shadow:0 0 10px rgba(0, 0, 0, 0.1);transition:all 0.5s;z-index:100;overflow-y:hidden;color:var(--sidebar-color, #000);background-color:var(--sidebar-backgound, #fff);padding-block:var(--ir-sidebar-padding-block, 0);padding-inline:var(--ir-sidebar-padding-inline, 0.5rem);padding-top:var(--ir-sidebar-padding-top, unset);padding-bottom:var(--ir-sidebar-padding-bottom, unset);padding-left:var(--ir-sidebar-padding-left, unset);padding-right:var(--ir-sidebar-padding-right, unset)}.sidebar-right.active{right:0;overflow-y:auto}.sidebar-left{position:fixed;top:0;left:-100%;bottom:0;width:var(--sidebar-width, 30rem);max-width:100%;box-shadow:0 0 10px rgba(0, 0, 0, 0.1);transition:all 0.5s;z-index:200;overflow-y:hidden;color:var(--sidebar-color, #000);background:var(--sidebar-backgound, #fff);padding-block:var(--ir-sidebar-padding-block, 0);padding-inline:var(--ir-sidebar-padding-inline, 0.5rem);padding-top:var(--ir-sidebar-padding-top, unset);padding-bottom:var(--ir-sidebar-padding-bottom, unset);padding-left:var(--ir-sidebar-padding-left, unset);padding-right:var(--ir-sidebar-padding-right, unset)}.sidebar-title{display:flex;align-items:center;justify-content:space-between;padding:0 1rem;border-bottom:1px solid #e4e5ec}.sidebar-title p{font-weight:500;font-size:1.2rem}.sidebar-left.active{left:0;overflow-y:scroll}.close{position:absolute;top:0.5rem;right:1rem;width:1rem;height:1rem;cursor:pointer}";const Dn=_n;const Cn=class{constructor(e){t(this,e);this.irSidebarToggle=s(this,"irSidebarToggle",7);this.beforeSidebarClose=s(this,"beforeSidebarClose",7);this.side="right";this.showCloseButton=true;this.open=false}componentDidLoad(){this.applyStyles()}handleSidebarStylesChange(){this.applyStyles()}handleOpenChange(t,e){if(t!==e){k(t)}}handleKeyDown(t){if(t.key==="Escape"&&this.open){t.stopImmediatePropagation();t.stopPropagation();return this.toggleSidebar()}else{return}}async toggleSidebar(){if(this.preventClose){this.beforeSidebarClose.emit();return}this.irSidebarToggle.emit(this.open)}applyStyles(){for(const t in this.sidebarStyles){if(this.sidebarStyles.hasOwnProperty(t)){this.sidebarRef.style[t]=this.sidebarStyles[t]}}}render(){let t="";if(this.open){t="active"}else{t=""}return[e("div",{key:"08cfbfbf81b77859ab0a4211932eb670edc6b471",class:`backdrop ${t}`,onClick:()=>{this.toggleSidebar()}}),e("div",{key:"e697caee9a4bb41c1f3b9c462639c83f5bee0417",ref:t=>this.sidebarRef=t,class:`sidebar-${this.side} ${t}`},this.showCloseButton&&e("div",{key:"de0f97c5833aa262c7b2736ab0b3e6752c99c83d",class:"sidebar-title"},e("p",{key:"1a9bed1dfb1496bc7a790158605af9c27b9885b9",class:"p-0 m-0"},this.label),e("div",{key:"ebf628f996135d5f2f063b7c379af142e4b05731",class:"p-0 m-0 sidebar-icon-container"},e("ir-icon",{key:"112ddc7afddd552ba839f0eb3fdc060f573e5405",class:"",onIconClickHandler:()=>{this.toggleSidebar()}},e("svg",{key:"fd81e1ec4993c2a9f3a76b2c4cec9aca73db2e1c",slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",height:20,width:20},e("path",{key:"3db6f0582ce6113e4cd28262570c3d65b722daf7",fill:"#6b6f82",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"}))))),e("slot",{key:"8248f93b15477b248faf8eed7b5844872790efa4",name:"sidebar-body"}))]}get el(){return a(this)}static get watchers(){return{sidebarStyles:["handleSidebarStylesChange"],open:["handleOpenChange"]}}};Cn.style=Dn;const On=":host{width:var(--ir-spinner-size, 1.25rem);height:var(--ir-spinner-size, 1.25rem);border:var(--ir-spinner-border-width, 2.5px) solid var(--ir-spinner-color, #3f3f3f);border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const An=On;const Bn=class{constructor(e){t(this,e);this.unit="rem"}componentWillLoad(){this.initStyles()}handleSpinnerSizeChange(){this.initStyles()}handleSpinnerBorderWidthChange(){this.initStyles()}handleSpinnerUnitChange(){this.initStyles()}handleSpinnerColorChange(){this.initStyles()}initStyles(){if(this.size){this.applyCssElement(`${this.size}${this.unit}`,"--ir-spinner-size")}if(this.borderWidth){this.applyCssElement(`${this.borderWidth}${this.unit}`,"--ir-spinner-size")}if(this.color){this.applyCssElement(`${this.color}`,"--ir-spinner-color")}}applyCssElement(t,e){this.el.style.setProperty(e,t)}render(){return e(i,{key:"5a12dc9a14d4bed98c0eb122d5245ef0fb27eb60"})}get el(){return a(this)}static get watchers(){return{size:["handleSpinnerSizeChange"],borderWidth:["handleSpinnerBorderWidthChange"],unit:["handleSpinnerUnitChange"],color:["handleSpinnerColorChange"]}}};Bn.style=An;const Mn=".prepend-textarea.sc-ir-textarea{padding:0 !important}.ta-prepend-text.sc-ir-textarea{width:100%}";const En=Mn;const Sn=class{constructor(e){t(this,e);this.textChange=s(this,"textChange",7);this.rows=3;this.cols=5;this.text="";this.label="<label>";this.placeholder="<placeholder>";this.value="";this.maxLength=250;this.variant="default";this.labelWidth=3;this.error=false}handleAriaInvalidChange(t){this.error=t==="true"}render(){if(this.variant==="prepend"){return e("fieldset",{class:"input-group"},e("div",{class:`input-group-prepend col-${this.labelWidth} prepend-textarea`},e("span",{class:"input-group-text ta-prepend-text"},this.label)),e("textarea",{"data-testid":this.testId,value:this.value,class:`form-control`,style:Object.assign({height:"7rem"},this.styles),maxLength:this.maxLength,onChange:t=>this.textChange.emit(t.target.value),"aria-label":this.label}))}return e("div",{class:"form-group"},e("label",null,this.label),e("textarea",{"data-testid":this.testId,style:this.styles,maxLength:this.maxLength,rows:this.rows,value:this.value,class:`form-control ${this.textareaClassname} ${this.error?"border-danger":""}`,placeholder:this.placeholder,onInput:t=>this.textChange.emit(t.target.value)}))}static get watchers(){return{"aria-invalid":["handleAriaInvalidChange"]}}};Sn.style=En;const In=".sc-ir-title-h{padding:0px 0;margin-bottom:20px;display:flex;align-items:center;width:100%}[border-shown].sc-ir-title-h{border-bottom:1px solid #e4e5ec !important;border-color:#e4e5ec !important;padding-bottom:15px}[display-context='sidebar'].sc-ir-title-h{padding:15px 0;justify-content:space-between !important;width:100% !important;border-bottom:1px solid #e4e5ec !important;border-color:#e4e5ec !important}.title-body.sc-ir-title{margin:0;padding:0}.label.sc-ir-title{font-family:inherit !important}@media only screen and (max-width: 641px){.sc-ir-title-h{flex-direction:column;gap:8px;align-items:flex-start}[display-context='sidebar'].sc-ir-title-h{flex-direction:row}}";const Tn=In;const Fn=class{constructor(e){t(this,e);this.closeSideBar=s(this,"closeSideBar",7);this.displayContext="default";this.justifyContent="start"}componentDidLoad(){this.el.style.justifyContent=this.justifyContent}handleJustifyContentChange(t,e){if(t!==e){this.el.style.justifyContent=t}}render(){return e(i,{key:"66eb8603c82b4747ef9b96087699771a65b26139"},e("h4",{key:"1ee3edcc58a66d3bd8bdbf91758487ff81fb9ed4",class:"text-left label font-medium-2 py-0 my-0"},this.label),this.displayContext==="sidebar"&&e("ir-icon",{key:"655a544876fb2657c8b7692b15f2b097e9d2ec2b",class:"close",onIconClickHandler:()=>{this.closeSideBar.emit(null)}},e("svg",{key:"80144b90a29c4fb7391b7145b546bfea1638ea43",slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",height:20,width:20},e("path",{key:"cba9321c53a1df229d299c5b826494e4d25ac633",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"}))),this.displayContext!=="sidebar"&&e("div",{key:"da856f9a7ced9f4643760408945f98b2cf318b72",class:"title-body"},e("slot",{key:"cac45cf6bbaecbba194010fa18cacff12ea58eae",name:"title-body"})))}get el(){return a(this)}static get watchers(){return{justifyContent:["handleJustifyContentChange"]}}};Fn.style=Tn;const jn="button.sc-ir-toast,p.sc-ir-toast,h3.sc-ir-toast,div.sc-ir-toast{all:unset}.sc-ir-toast-h{--rd-viewport-padding:25px;--rd-success:#2b9a66;position:fixed;bottom:0;right:0;display:flex;flex-direction:column;padding:var(--rd-viewport-padding);gap:10px;max-width:100vw;margin:0;list-style:none;z-index:2147483647;outline:none;pointer-events:none;-webkit-user-select:none;user-select:none}@media (prefers-color-scheme: dark){.sc-ir-toast-h{--rd-success:#33b074}}p.sc-ir-toast{color:hsla(222.2, 84%, 4.9%, 0.8);font-size:13px;line-height:1.3}h1.sc-ir-toast,h2.sc-ir-toast,h3.sc-ir-toast,h4.sc-ir-toast,h5.sc-ir-toast,h6.sc-ir-toast{font-weight:500;color:hsl(222.2, 84%, 4.9%);font-size:15px}[position='top-left'].sc-ir-toast-h{top:0;left:0}[position='top-right'].sc-ir-toast-h{top:0;right:0}[position='bottom-left'].sc-ir-toast-h{bottom:0;left:0}[position='bottom-right'].sc-ir-toast-h{bottom:0;right:0}.icon-container.sc-ir-toast{height:25px;width:25px;border-radius:25px;display:flex;align-items:center;justify-content:center;padding:0;margin:0}.icon-container.sc-ir-toast>svg.sc-ir-toast{margin:0;color:white;stroke-width:5px}.success.sc-ir-toast{background-color:var(--rd-success)}.error.sc-ir-toast{background-color:red}.ToastRoot.sc-ir-toast{background-color:hsl(0, 0%, 100%);border-radius:0.5rem;box-shadow:hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px;padding:15px;display:grid;grid-template-areas:'title action' 'description action';grid-template-columns:auto max-content;column-gap:15px;align-items:center;pointer-events:none;opacity:0;border:1px solid hsl(214.3, 31.8%, 91.4%);position:relative}.ToastRoot[data-state='open'].sc-ir-toast{pointer-events:all;animation:slideIn 150ms cubic-bezier(0.16, 1, 0.3, 1)}.ToastRoot[data-state='closed'].sc-ir-toast{pointer-events:none;animation:hide 100ms ease-in}@-webkit-keyframes slideIn{from{transform:translateX(var(--rd-offset-width))}to{transform:translateX(0)}}@keyframes slideIn{from{transform:translateX(var(--rd-offset-width))}to{transform:translateX(0)}}.ToastTitle.sc-ir-toast{grid-area:title;font-weight:500;color:hsl(222.2, 84%, 4.9%);font-size:15px}.ToastDescription.sc-ir-toast{grid-area:description;margin:0;margin-top:5px;color:hsla(222.2, 84%, 4.9%, 0.8);font-size:13px;line-height:1.3;overflow:hidden;text-overflow:ellipsis}.ToastAction.sc-ir-toast{grid-area:action}";const Yn=jn;const $n=class{constructor(e){t(this,e);this.position="bottom-left";this.toasts=[]}onToast(t){const e=t.detail;this.showToast(e)}showToast(t){const e={positionClass:"toast-top-right",closeButton:true,timeOut:t.duration||5e3};switch(t.type){case"success":toastr.success(t.title,"",e);break;case"error":toastr.error(t.title,"",e);break}}render(){return e(i,{key:"f765abdf628c80ff44f394f16f625cb9159f8aaa"})}get element(){return a(this)}};$n.style=Yn;const zn=".sc-ir-tooltip-h{position:relative}.tooltip-icon.sc-ir-tooltip{margin:0 5px;padding:0}.tooltip-inner-custom.sc-ir-tooltip{min-width:max-content !important}";const Nn=zn;const Rn=class{constructor(e){t(this,e);this.withHtml=true;this.customSlot=false;this.alignment="center"}toggleOpen(t){if(this.tooltipTimeout){clearTimeout(this.tooltipTimeout)}if(t){this.tooltipTimeout=setTimeout((()=>{this.open=true}),300)}else{this.open=false}}render(){const t=(()=>{switch(this.alignment){case"start":return"justify-content-start";case"end":return"justify-content-end";case"center":return"justify-content-center";default:return"justify-content-center"}})();return e(i,{class:"m-0 p-0"},e("span",{style:this.containerStyle,class:`m-0 p-0 d-flex align-items-center ${t} ${this.containerClass}`,onMouseEnter:()=>this.toggleOpen(true),onMouseLeave:()=>this.toggleOpen(false)},!this.customSlot?e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"m-0 p-0",height:"16",width:"16",viewBox:"0 0 512 512"},e("path",{fill:"#6b6f82",d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"})):e("slot",{name:"tooltip-trigger"})),this.open&&e("div",{class:"tooltip bottom show position-absolute",role:"tooltip"},e("div",{class:"tooltip-arrow"}),e("div",{class:`tooltip-inner fit ${this.customSlot&&"tooltip-inner-custom"}`},e("span",{innerHTML:this.message}))))}};Rn.style=Nn;const Ln="*.sc-ota-label{margin:0;padding:0}.sc-ota-label-h{display:flex;margin-bottom:5px;gap:5px}.label_title.sc-ota-label{min-width:max-content;padding:0;margin:0;font-weight:600}.ota-message-list.sc-ota-label{margin:0 3px;padding:0;overflow:hidden;width:100%;word-wrap:break-word !important;overflow-wrap:break-word !important}.ota-message-item.sc-ota-label{width:100%;line-height:1.5;margin:0;padding:0;word-wrap:break-word !important;overflow-wrap:break-word !important}.ota-message-item.sc-ota-label::before{content:'- ';margin-right:0.25rem}.ota-visibility-toggle.sc-ota-label{background:white;color:var(--blue);padding:0;margin:0;margin-left:3px;font-size:12px;border:0}.ota-visibility-toggle.sc-ota-label:hover{color:#355270}.ota-message-list.sc-ota-label{margin:0 3px;padding:0;overflow:hidden;width:100%;word-wrap:break-word !important;overflow-wrap:break-word !important;white-space:normal;list-style:none}.ota-message-item.sc-ota-label{width:100%;line-height:1.5;margin:0 0 0 1.2em;padding:0;word-wrap:break-word !important;overflow-wrap:break-word !important;white-space:normal;position:relative}";const Pn=Ln;const Vn=class{constructor(e){t(this,e);this.maxVisibleItems=3;this.showAll=false;this.toggleShowAll=()=>{this.showAll=!this.showAll}}render(){if(!this.remarks){return null}const t=this.showAll?this.remarks:this.remarks.slice(0,this.maxVisibleItems);return e(i,null,e("p",{class:"label_title"},this.label),e("ul",{class:"ota-message-list"},t.map(((i,s)=>e("li",{key:M(),class:"ota-message-item"},i.statement," ",this.remarks.length>this.maxVisibleItems&&s===t.length-1&&e("button",{class:"ota-visibility-toggle",onClick:this.toggleShowAll},this.showAll?b.entries.Lcz_ShowLess:b.entries.Lcz_ShowMore))))))}};Vn.style=Pn;export{Z as igl_application_info,et as igl_block_dates_view,lt as igl_book_property,dt as igl_book_property_footer,ft as igl_book_property_header,gt as igl_booking_form,kt as igl_booking_overview_page,_t as igl_date_range,Ot as igl_property_booked_by,Mt as igl_rate_plan,It as igl_room_type,jt as ir_autocomplete,zt as ir_booking_details,Vt as ir_booking_extra_note,Ut as ir_booking_guarantee,qt as ir_booking_header,Zt as ir_button,ee as ir_combobox,se as ir_common,ne as ir_country_picker,ks as ir_date_picker,_s as ir_date_range,Os as ir_date_view,Ms as ir_dialog,Is as ir_dropdown,js as ir_dropdown_item,zs as ir_events_log,Ls as ir_extra_service,Js as ir_extra_service_config,Qs as ir_extra_services,rr as ir_guest_info,or as ir_icon,hr as ir_icons,ta as ir_input_text,sa as ir_interceptor,na as ir_label,ca as ir_modal,ua as ir_otp,ba as ir_otp_modal,va as ir_payment_action,xa as ir_payment_actions,Da as ir_payment_details,Ma as ir_payment_folio,Ia as ir_payment_item,ja as ir_payment_summary,za as ir_payments_folio,La as ir_phone_input,Ka as ir_pickup,Ja as ir_pickup_view,Qa as ir_pms_logs,sn as ir_popover,nn as ir_price_input,cn as ir_reservation_information,un as ir_room,yn as ir_room_guests,wn as ir_select,Cn as ir_sidebar,Bn as ir_spinner,Sn as ir_textarea,Fn as ir_title,$n as ir_toast,Rn as ir_tooltip,Vn as ota_label};
//# sourceMappingURL=p-73933a79.entry.js.map