import{r as t,c as e,h as i,H as s,a}from"./p-jhiFt_tX.js";import{B as n}from"./p-ChLcIN1l.js";import{l as r}from"./p-DRfRlSCW.js";import"./p-BSI30sps.js";import"./p-BFTU3MAI.js";import"./p-DKrWRO3S.js";import"./p-Mki5YqAR.js";import"./p-DeW5X45W.js";import"./p-vROPuQAY.js";import"./p-CT3GgrvE.js";const o=".sc-ir-phone-input-h{display:block}.input-container.sc-ir-phone-input{display:flex;align-items:center;padding:0 !important}.input-container.sc-ir-phone-input:focus-within{border-color:#1e9ff2}.border-theme.sc-ir-phone-input{border-color:#cacfe7}.input-container.sc-ir-phone-input input.sc-ir-phone-input{flex:1;border:0}.input-container.sc-ir-phone-input input.sc-ir-phone-input:focus{outline:none}.dropdown-trigger.sc-ir-phone-input{display:flex;align-items:center;gap:8px;background:white;border:0;border-right:1px solid #cacfe7}.ir-dropdown-container.sc-ir-phone-input{position:absolute;z-index:1000;bottom:-30px;width:100%;left:0;background:white}.input-container.sc-ir-phone-input label.sc-ir-phone-input{display:flex;align-items:center;justify-content:center;margin:0;padding:0 5px}.flag.sc-ir-phone-input{height:1rem;aspect-ratio:4/3;border-radius:3px}.is-invalid.sc-ir-phone-input{border-color:#ff4961}.phone_prefix_label.sc-ir-phone-input{padding:0 0.5rem;margin:0}";const h=class{constructor(i){t(this,i);this.textChange=e(this,"textChange");this.value="";this.disabled=false;this.error=false;this.default_country=null;this.phone_prefix=null;this.countries=[];this.inputValue="";this.isDropdownVisible=false;this.bookingService=new n}async componentWillLoad(){if(this.countries.length===0){const t=await this.bookingService.getCountries(this.language);this.countries=t}if(this.phone_prefix){this.setCountryFromPhonePrefix()}else{if(this.default_country){this.setCurrentCountry(this.default_country)}}this.inputValue=this.value}handleValueChange(t,e){if(t!==e){this.inputValue=t}}handlePhoneChange(t,e){if(t!==e){this.setCountryFromPhonePrefix()}}handleDocumentClick(t){const e=t.target;if(!this.el.contains(e)){this.isDropdownVisible=false}}handleInputChange(t){var e;let i=t.target;let s=i.value;s=s.replace(/[^+\d]+/g,"");i.value=s;this.inputValue=s;this.textChange.emit({phone_prefix:(e=this.currentCountry)===null||e===void 0?void 0:e.phone_prefix,mobile:this.inputValue})}setCountryFromPhonePrefix(){var t;let e=this.countries.find((t=>t.phone_prefix===this.phone_prefix));if(!e){e=this.countries.find((t=>t.id.toString()===this.phone_prefix));if(!e){return}}this.currentCountry=Object.assign({},e);this.textChange.emit({phone_prefix:(t=this.currentCountry)===null||t===void 0?void 0:t.phone_prefix,mobile:this.value})}setCurrentCountry(t){var e;const i=this.countries.find((e=>e.id===t));if(!i){throw new Error("Invalid country id")}this.currentCountry=Object.assign({},i);this.textChange.emit({phone_prefix:(e=this.currentCountry)===null||e===void 0?void 0:e.phone_prefix,mobile:this.value})}render(){var t,e;return i(s,{key:"317bcb5dba765995ebc2c0d261ceb3509a930589"},i("div",{key:"f60fd38b37d043cb7b39385f344ba9f5eb57bf21",class:"form-group mr-0"},i("div",{key:"b2d9fcfc82435be651c329734be36b95a28d96c7",class:"input-group row m-0 p-0 position-relative"},this.label&&i("div",{key:"a50e0968b0d172f2240f4f7b52def211ea7c7cbc",class:`input-group-prepend col-3 p-0 text-dark border-none`},i("label",{key:"9817d2590f8af23fd09921dcb9b4e720ea8a3a7b",class:`input-group-text  border-theme flex-grow-1 text-dark  `},this.label)),i("div",{key:"975c9c80226854d50ef8cd40771cd6bde7c61c23",class:"form-control  input-container  flex-fill"+(this.error?" is-invalid":"")},i("button",{key:"76868e0a0d6a93c4ff2357281433d53c64d3d605",onClick:()=>this.isDropdownVisible=!this.isDropdownVisible,class:"dropdown-trigger"},this.currentCountry?i("img",{src:(t=this.currentCountry)===null||t===void 0?void 0:t.flag,class:"flag"}):i("p",{class:"p-0 m-0 "},r.entries.Lcz_Select),i("svg",{key:"af439f3b426674b31c590fe7543276c082a19e6a",xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},i("path",{key:"b54dd80dc220ef7f6acc1ebe2eb9aefb7c9fc35a",d:"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"}))),i("p",{key:"d7ef12753d032f97759d20aa81ecc86469498a33",class:"phone_prefix_label"},(e=this.currentCountry)===null||e===void 0?void 0:e.phone_prefix),i("input",{key:"8e8abcb74eb0f2d856626b19c9e58330324f17b2","data-testid":this.testId,maxLength:14,type:"text",placeholder:this.placeholder,required:true,value:this.inputValue,disabled:this.disabled,onInput:t=>this.handleInputChange(t)})),this.isDropdownVisible&&i("div",{key:"b9e512753dcc22745c1bcd80b33d746a15954486",class:"ir-dropdown-container"},i("ir-combobox",{key:"8cabb2da969836670b01a5980afd2d29ceca90e7",onComboboxValueChange:t=>{this.setCurrentCountry(+t.detail.data);this.isDropdownVisible=false},class:"bg-white",autoFocus:true,placeholder:"Search country",data:this.countries.map((t=>({id:t.id.toString(),name:`${t.name} (${t.phone_prefix})`,image:t.flag})))})))))}get el(){return a(this)}static get watchers(){return{value:["handleValueChange"],phone_prefix:["handlePhoneChange"]}}};h.style=o;const c=".prepend-textarea.sc-ir-textarea{padding:0 !important}.ta-prepend-text.sc-ir-textarea{width:100%}";const p=class{constructor(i){t(this,i);this.textChange=e(this,"textChange");this.rows=3;this.cols=5;this.text="";this.label="<label>";this.placeholder="<placeholder>";this.value="";this.maxLength=250;this.variant="default";this.labelWidth=3;this.error=false}handleAriaInvalidChange(t){this.error=t==="true"}connectedCallback(){}disconnectedCallback(){}render(){if(this.variant==="prepend"){return i("fieldset",{class:"input-group"},i("div",{class:`input-group-prepend col-${this.labelWidth} prepend-textarea`},i("span",{class:"input-group-text ta-prepend-text"},this.label)),i("textarea",{"data-testid":this.testId,value:this.value,class:`form-control`,style:Object.assign({height:"7rem"},this.styles),maxLength:this.maxLength,onChange:t=>this.textChange.emit(t.target.value),"aria-label":this.label}))}return i("div",{class:"form-group"},i("label",null,this.label),i("textarea",{"data-testid":this.testId,style:this.styles,maxLength:this.maxLength,rows:this.rows,value:this.value,class:`form-control ${this.textareaClassname} ${this.error?"border-danger":""}`,placeholder:this.placeholder,onInput:t=>this.textChange.emit(t.target.value)}))}static get watchers(){return{"aria-invalid":["handleAriaInvalidChange"]}}};p.style=c;export{h as ir_phone_input,p as ir_textarea};
//# sourceMappingURL=p-9d442c61.entry.js.map