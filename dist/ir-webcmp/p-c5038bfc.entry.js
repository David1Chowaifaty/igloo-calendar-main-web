import{r as e,c as t,h as a,H as i,g as r,F as o}from"./p-d239357b.js";import{V as n,B as s,b as l,u as c,a as d,m as h,r as p,c as u,d as f,g,e as b,s as w,f as m,h as v,i as y,j as k,k as _,l as x,n as D,Z as C}from"./p-5295ca2d.js";import{l as M}from"./p-4e493fea.js";import{i as Y,c as S}from"./p-99cb260a.js";import{f as E,g as I,e as T,i as O,c as z,a as A,b as B,d as R,h as N,j as L,k as P,l as H,m as F,n as U,o as j,p as V,t as G,r as q,q as K,s as W,u as X,v as J}from"./p-aebe797b.js";import{G as Q}from"./p-c65723d4.js";import{z as Z,Z as ee,a as te}from"./p-e7d273da.js";import{v as ae}from"./p-4ed69de7.js";import{b as ie,g as re,c as oe,a as ne,t as se,d as le,e as ce,f as de,h as he,i as pe,j as ue,k as fe,l as ge,m as be,n as we}from"./p-fa7340f2.js";import{h as me}from"./p-6c4ba7c0.js";import{a as ve}from"./p-bf44a732.js";import{P as ye,l as ke}from"./p-0862df8f.js";import{c as _e}from"./p-c5894a47.js";import{H as xe,h as De}from"./p-63d20f50.js";import{i as Ce,a as Me}from"./p-6fec77c0.js";import{R as Ye}from"./p-34b319c3.js";import{T as Se}from"./p-f8b7c0cd.js";import{c as Ee}from"./p-e9c4f463.js";import{P as Ie}from"./p-834c4250.js";import{I as Te,M as Oe}from"./p-518eace5.js";import{i as ze}from"./p-834ed596.js";import{I as Ae}from"./p-1412b72f.js";import{S as Be}from"./p-0e0f732a.js";import{P as Re}from"./p-64aa23d3.js";import{_ as Ne,a as $e,b as Le}from"./p-b2679b77.js";const Pe=".sc-igl-application-info-h{color:var(--wa-color-text-normal);font-family:var(--wa-font-family-heading);line-height:var(--wa-line-height-condensed);text-wrap:balance;text-align:start;display:flex;flex-direction:column;gap:0.5rem;margin-top:1.5rem}.fd-application-info__header.sc-igl-application-info{display:flex;gap:1rem;align-items:flex-start;justify-content:space-between}.fd-application-info__variation.sc-igl-application-info{padding:0;margin:0}.fd-application-info__form.sc-igl-application-info{display:flex;flex-direction:column;gap:1rem}.fd-application-info__price-inline.sc-igl-application-info,.fd-application-info__details.sc-igl-application-info{display:none}.fd-application-info__footer.sc-igl-application-info,.fd-application-info__rateplan.sc-igl-application-info{display:flex;align-items:center;gap:1rem}.fd-application-info__footer.sc-igl-application-info{justify-content:space-between}.fd-application-info__rateplan-name.sc-igl-application-info{font-size:var(--wa-font-size-m);margin:0;padding:0}.fd-application-info__non-refundable.sc-igl-application-info{color:var(--wa-color-success-fill-loud);margin-inline-start:0.5rem}.fd-application-info__roomtype-title.sc-igl-application-info{font-size:var(--wa-font-size-l)}.fd-application-info__infant.sc-igl-application-info{display:flex;flex-direction:column;gap:0.875rem}.fd-application-info__infant-label.sc-igl-application-info{margin:0;padding:0;color:var(--wa-color-danger-fill-loud)}.fd-application-info__price.sc-igl-application-info{margin:0;padding:0;display:flex;flex-direction:column}@media (min-width: 768px){.fd-application-info__infant.sc-igl-application-info{flex-direction:row;align-items:center}.fd-application-info__infant.sc-igl-application-info .fd-application-info__select.sc-igl-application-info{max-width:100px}.fd-application-info__roomtype-title.sc-igl-application-info{font-size:var(--wa-font-size-m)}.fd-application-info__header.sc-igl-application-info{justify-content:flex-start;align-items:center;gap:0.5rem}.fd-application-info__form.sc-igl-application-info{flex-direction:row}.fd-application-info__price-inline.sc-igl-application-info{display:flex;flex-direction:column;padding:0;margin:0;align-items:flex-end}.fd-application-info__details.sc-igl-application-info{display:flex;align-items:center;gap:0.5rem}.fd-application-info__price.sc-igl-application-info,.fd-application-info__footer.sc-igl-application-info{display:none}}";const He=Pe;const Fe=class{constructor(a){e(this,a);this.recalculateTotalCost=t(this,"recalculateTotalCost",7)}rateplanSelection;guestInfo;currency;bedPreferenceType=[];bookingType="PLUS_BOOKING";roomIndex;totalNights=1;baseData;autoFillGuest;isButtonPressed=false;amount=0;recalculateTotalCost;variationService=new n;bookingService=new s;shouldSyncBookedByFirstName=!l.bookedByGuest?.firstName;shouldSyncBookedByLastName=!l.bookedByGuest?.lastName;async componentWillLoad(){if(Y(this.rateplanSelection.roomtype.id)){const e=this.filterRooms();if(e.length>0)this.updateGuest({unit:e[0]?.id?.toString()})}this.amount=await this.getAmount()}updateGuest(e){const t=this.rateplanSelection.roomtype.id;const a=this.rateplanSelection.ratePlan.id;let i=[...this.rateplanSelection.guest];i[this.roomIndex]={...i[this.roomIndex],...e};c({ratePlanSelection:this.rateplanSelection,ratePlanId:a,roomTypeId:t,guest:i});const r=this.autoFillGuest&&!l.bookedByGuestManuallyEdited;if(!r){if(l.bookedByGuestManuallyEdited){this.shouldSyncBookedByFirstName=false;this.shouldSyncBookedByLastName=false}return}if(typeof e.first_name==="string"&&this.shouldSyncBookedByFirstName){d({firstName:e.first_name})}if(typeof e.last_name==="string"&&this.shouldSyncBookedByLastName){d({lastName:e.last_name})}}async handleGuestInfoChange(){if(this.rateplanSelection.is_amount_modified){return}this.amount=await this.getAmount()}handleButtonClicked(e){switch(e.detail.key){case"book":case"bookAndCheckIn":case"save":this.isButtonPressed=true;break}}getTooltipMessages(){const{ratePlan:e,selected_variation:t}=this.rateplanSelection;let a=t;if(this.guestInfo?.infant_nbr){a=this.variationService.getVariationBasedOnInfants({variations:e.variations,baseVariation:t,infants:this.guestInfo?.infant_nbr})}if(!a)return;const i=e.variations?.find((e=>e.adult_nbr===a.adult_nbr&&e.child_nbr===a.child_nbr));if(!i)return;const r=i.applicable_policies?.find((e=>e.type==="cancelation"))?.combined_statement;const o=i.applicable_policies?.find((e=>e.type==="guarantee"))?.combined_statement;let n="";if(r){n+=`<b><u>Cancellation:</u></b> ${r}<br/>`}if(o){n+=`<b><u>Guarantee:</u></b> ${o}`}return n||undefined}async getAmount(){if(this.rateplanSelection.is_amount_modified){const e=this.rateplanSelection.view_mode==="001"?this.rateplanSelection.rp_amount:this.rateplanSelection.rp_amount*this.totalNights;const t=await this.bookingService.calculateExclusiveTax({amount:e,property_id:S.property.id});return e+(t??0)}let e=this.rateplanSelection.selected_variation;if(this.guestInfo?.infant_nbr){e=this.variationService.getVariationBasedOnInfants({variations:this.rateplanSelection.ratePlan.variations,baseVariation:this.rateplanSelection.selected_variation,infants:this.guestInfo?.infant_nbr})}return e.discounted_gross_amount}filterRooms(){const e=[];if(!S.is_frontdesk_enabled){return e}this.rateplanSelection.ratePlan?.assignable_units?.forEach((t=>{if(t.Is_Fully_Available){e.push({name:t.name,id:t.pr_id})}}));const t=this.rateplanSelection.guest.filter(((e,t)=>t!==this.roomIndex)).map((e=>e.unit));const a=e.filter((e=>!t.includes(e.id.toString())));return this.bookingType==="EDIT_BOOKING"?[...a,this.rateplanSelection.roomtype.id===this.baseData?.roomtypeId?this.baseData?.unit:null].filter((e=>!!e)).sort(((e,t)=>e.name.localeCompare(t.name))):a}tooltipId=`room_info_tooltip_${ae()}`;render(){const e=this.filterRooms();const t=this.variationService.formatVariationBasedOnInfants({baseVariation:this.rateplanSelection.selected_variation,infants:this.guestInfo.infant_nbr,variations:this.rateplanSelection.ratePlan.variations});return a(i,{key:"997ea30fd6002469bbea6d62a903e78c26ec61fb",class:"fd-application-info","data-testid":`room_info_${this.rateplanSelection.ratePlan.id}`},a("div",{key:"0a54cb0b05915fc5131628e0d2fed3ef8d8cfaff",class:"fd-application-info__header"},(this.bookingType==="PLUS_BOOKING"||this.bookingType==="ADD_ROOM"||this.bookingType==="EDIT_BOOKING")&&a("span",{key:"01f463f7387a3e8f35bb749f76974f620d02e4fa",class:"fd-application-info__roomtype-title"},this.rateplanSelection.roomtype.name),a("div",{key:"8c7d28d16ecf9edee12d49babee017694608ce17",class:"fd-application-info__details"},a("div",{key:"8a2b61912b42abeec82bd7fbfbb5c95d4b89d1c1",class:"fd-application-info__rateplan"},a("p",{key:"52e20a0bbd3fe15faf2306efd750e8ea00905757",class:"fd-application-info__rateplan-name"},this.rateplanSelection.ratePlan.short_name,this.rateplanSelection.ratePlan.is_non_refundable&&a("span",{key:"fda64e95f9d597839ecd96774ebe766db850baf2",class:"fd-application-info__non-refundable"},"Non Refundable")),a("wa-tooltip",{key:"77f198a1083b53dabccdbb1b8900efb9d36a21b7",for:this.tooltipId},a("span",{key:"302a5e13e8d92e33553b7c96eaeb0178bd165495",innerHTML:this.getTooltipMessages()})),a("wa-icon",{key:"988593e94daf93f758ad6daaba4f4f61809d2fe7",name:"circle-info",id:this.tooltipId})),a("p",{key:"9fcbd2e0c653e7e5b9f0d3d7634aa4858f836199",class:"fd-application-info__variation",innerHTML:t})),a("p",{key:"2326bfb35f322ba1dc01a70ecea113a480b06381",class:"fd-application-info__price"},a("span",{key:"af5d5657428e65c6c69dae708348e8e547927616",class:"ir-price"},E(this.currency?.symbol,this.amount),"/",M.entries.Lcz_Stay),a("p",{key:"f6b643d79914e35ac802f35250fd0729e5385659",style:{margin:"0",padding:"0",fontSize:"0.75rem"}},"Including taxes and fees"))),a("div",{key:"fe8de7d37b4769755eae49515ccb5f5fad45fc38",class:"fd-application-info__footer"},a("div",{key:"f5ba5a1e82a9618accd7592c083c58c5e3ba8207",class:"fd-application-info__rateplan"},a("p",{key:"927a00eb2a93cc5312fd88dbcd7fa09cbc3e54b4",class:"fd-application-info__rateplan-name"},this.rateplanSelection.ratePlan.short_name),a("wa-tooltip",{key:"8bc0ac0f0a594255eb7ccbad3008a8f813457857",for:`mobile-${this.tooltipId}`},a("span",{key:"4a090d867cbe1ecd81d515e521e991f0d05c48d1",innerHTML:this.getTooltipMessages()})),a("wa-icon",{key:"cc48b07b71f324260f40065b03fc608254ae5c84",name:"circle-info",id:`mobile-${this.tooltipId}`})),a("p",{key:"2d0aaad3cbd3ceab980ff140929a3dd38ec3a7ae",class:"fd-application-info__variation",innerHTML:t})),a("div",{key:"6eb68c4df3b4bb1d919a80e96196c3f3a49c989c",class:"fd-application-info__form"},a("ir-validator",{key:"8fd78d2ba85a8a8062c1255d72eb66aa9ccff4ee",value:this.guestInfo?.first_name,schema:Q.shape.first_name},a("ir-input",{key:"b80ac73a075f1d360980a7e30f9b665fd85258df",class:"fd-application-info__input",value:this.guestInfo?.first_name,defaultValue:this.guestInfo?.first_name,"data-testid":"guest_first_name",placeholder:M.entries["Lcz_GuestFirstname"]??"Guest first name","onText-change":e=>{const t=e.detail.trim();this.updateGuest({first_name:t});if(l.event_type.type==="EDIT_BOOKING"){h("guest",{...l.guest,name:t})}}})),a("ir-validator",{key:"d4b114d33da940cb61dd695fd63f3f3d8190caae",value:this.guestInfo?.last_name,schema:Q.shape.last_name},a("ir-input",{key:"1eadcb3e657b8549a58798d228ae1b34f806107a",class:"fd-application-info__input",type:"text",value:this.guestInfo?.last_name,defaultValue:this.guestInfo?.last_name,"data-testid":"guest_last_name",placeholder:M.entries["Lcz_GuestLastname"]??"Guest last name","onText-change":e=>{const t=e.detail.trim();this.updateGuest({last_name:t});if(l.event_type.type==="EDIT_BOOKING"){h("guest",{...l.guest,name:t})}}})),S.is_frontdesk_enabled&&!Y(this.rateplanSelection.roomtype.id)&&(this.bookingType==="PLUS_BOOKING"||this.bookingType==="ADD_ROOM"||this.bookingType==="EDIT_BOOKING")&&a("wa-select",{key:"b54cb8be822389a7a456dd71941e35ef068ca268","with-clear":true,size:"small",class:"fd-application-info__select",placeholder:M.entries.Lcz_Assignunits,"data-testid":"unit",value:this.guestInfo?.unit,defaultValue:this.guestInfo?.unit,onchange:e=>this.updateGuest({unit:e.target.value})},e.map((e=>a("wa-option",{value:e.id.toString(),selected:this.guestInfo?.unit===e.id.toString()},e.name)))),this.rateplanSelection.roomtype.is_bed_configuration_enabled&&a("ir-validator",{key:"580657932739b89f120e020f6abad764b3cbd045",value:this.guestInfo?.bed_preference,schema:Z.string().nonempty()},a("wa-select",{key:"fadd474b8e26bc814c395ff5521a02923d40783e","with-clear":true,size:"small",class:"fd-application-info__select",placeholder:M.entries.Lcz_BedConfiguration,"data-testid":"bed_configuration",value:this.guestInfo?.bed_preference,defaultValue:this.guestInfo?.bed_preference,onchange:e=>this.updateGuest({bed_preference:e.target.value})},this.bedPreferenceType.map((e=>a("wa-option",{value:e.CODE_NAME,selected:this.guestInfo?.bed_preference===e.CODE_NAME},e.CODE_VALUE_EN))))),a("p",{key:"d8a8e7392d9f20953eaef331d014f519c1758883",class:"fd-application-info__price-inline"},a("span",{key:"d85cbae530123c86716f90c63eec278af6ddf9a9",class:"ir-price"},E(this.currency?.symbol,this.amount),"/",M.entries.Lcz_Stay),a("p",{key:"a5c080bdabceb2d08d0fad305fd75d577e4698eb",style:{margin:"0",padding:"0",fontSize:"0.75rem"}},"Including taxes and fees"))),this.rateplanSelection.selected_variation.child_nbr>0&&a("div",{key:"e9c2a963afcc375853de24db5833b7109387b4e1",class:"fd-application-info__infant"},a("p",{key:"b992fa8ce78403602c42d19eeaf5d0ea6a1b78e0",class:"fd-application-info__infant-label"},"Any of the children below 3 years?"),a("wa-select",{key:"92936dfd6e29998bf2a6ab5a13f0e6e173a28c58",size:"small",class:"fd-application-info__select fd-application-info__select--inline",placeholder:M.entries["No"]||"No",value:this.guestInfo?.infant_nbr?.toString(),defaultValue:this.guestInfo?.infant_nbr?.toString(),onchange:e=>{this.updateGuest({infant_nbr:Number(e.target.value)});if(this.rateplanSelection.is_amount_modified){return}this.recalculateTotalCost.emit()},withClear:true},Array.from({length:this.rateplanSelection.selected_variation.child_nbr},((e,t)=>t+1)).map((e=>a("wa-option",{value:e.toString(),selected:this.guestInfo?.infant_nbr===e},e))))))}static get watchers(){return{guestInfo:["handleGuestInfoChange"]}}};Fe.style=He;const Ue=".sc-igl-block-dates-view-h{display:block}.sc-igl-block-dates-view-h .controlContainer.sc-igl-block-dates-view{width:24px}.sc-igl-block-dates-view-h .checkBoxContainer.sc-igl-block-dates-view input.sc-igl-block-dates-view{height:1.2rem !important;width:30px}.releaseTime.sc-igl-block-dates-view{padding-left:5px}.out-of-service-label.sc-igl-block-dates-view{margin-left:5px !important}";const je=Ue;const Ve=class{constructor(a){e(this,a);this.dataUpdateEvent=t(this,"dataUpdateEvent",7)}defaultData;fromDate;toDate;entryDate;entryHour;isEventHover=false;entryMinute;renderAgain=false;dataUpdateEvent;blockDatesData={RELEASE_AFTER_HOURS:0,OPTIONAL_REASON:"",OUT_OF_SERVICE:false};releaseList=[];bookingService=new s;async componentWillLoad(){try{this.releaseList=await this.bookingService.getBlockedInfo();if(this.defaultData){this.blockDatesData={...this.defaultData}}else{this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(this.releaseList[0].CODE_NAME);this.emitData()}}catch(e){}}handleOptionalReason(e){this.blockDatesData.OPTIONAL_REASON=e.target.value;this.emitData()}handleReleaseAfterChange(e){if(this.entryDate)this.entryDate=undefined;this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(e.target.value);this.renderPage();this.emitData()}emitData(){this.dataUpdateEvent.emit({key:"blockDatesData",data:{...this.blockDatesData}})}getReleaseHoursString(){let e=this.entryDate?new Date(this.entryDate):new Date;if(this.entryDate&&this.entryHour&&this.entryMinute){e.setHours(this.entryHour,this.entryMinute,0,0)}else{e.setHours(e.getHours()+this.blockDatesData.RELEASE_AFTER_HOURS,e.getMinutes(),0,0)}return e.toLocaleString("default",{month:"short"})+" "+e.getDate()+", "+this.formatNumber(e.getHours())+":"+this.formatNumber(e.getMinutes())}formatNumber(e){return e<10?`0${e}`:e}handleOutOfService(e){this.blockDatesData.OUT_OF_SERVICE=e.target.checked;if(this.blockDatesData.OUT_OF_SERVICE){this.blockDatesData.OPTIONAL_REASON="";this.blockDatesData.RELEASE_AFTER_HOURS=0}this.renderPage();this.emitData()}renderPage(){this.renderAgain=!this.renderAgain}render(){return a(i,{key:"56e01d7c2546307563b31883cb93e0fa8f75d44a"},a("div",{key:"3ef96e192fbc15d0dc5eeb4585b70de252607229",class:`m-0 p-0 mb-1`},a("div",{key:"52e17026e044161a9f55785c5cc433cecd944f55",class:"text-left p-0"},a("ir-date-view",{key:"7a43971e899b2e633cd35d1d4b49e3ca27fa30bc",from_date:this.fromDate,dateOption:"YYYY-MM-DD",showDateDifference:false,to_date:this.toDate}))),a("div",{key:"89b87978f6480265f331706d454f407b8343ec97",class:` mb-1 text-left ${this.isEventHover&&"p-0"}`},a("div",{key:"de99a6edb242bba5c276a75076e5216f4016a2ea",class:"mb-1 "},a("label",{key:"866d4b30519c2c91a7ca304ab5ca27cbd8a2f0cd",class:"p-0 text-bold-700 font-medium-1 m-0 align-middle"},M.entries.Lcz_Reason,":"),a("div",{key:"1a1df9a4e889588baf3693753cec1b3335a39a39",class:"p-0 m-0 pr-1  controlContainer checkBoxContainer d-inline-block align-middle"},a("input",{key:"04fc08cfd21fe6d1a6944ebfa139fd8f7bbfeab6",class:"form-control",type:"checkbox",checked:this.blockDatesData.OUT_OF_SERVICE,id:"userinput6",onChange:e=>this.handleOutOfService(e)})),a("span",{key:"78da223396579ef573bddb1f912859da4abcd2d8",class:"align-middle out-of-service-label"},M.entries.Lcz_OutOfservice)),!this.blockDatesData.OUT_OF_SERVICE?a("div",null,a("div",{class:"mb-1 d-flex  align-items-center"},a("span",{class:"align-middle"},M.entries.Lcz_Or," "),a("div",{class:"d-inline-flex col pr-0 align-middle"},a("input",{class:"form-control",type:"text",placeholder:M.entries.Lcz_OptionalReason,id:"optReason",value:this.blockDatesData.OPTIONAL_REASON,onInput:e=>this.handleOptionalReason(e)}))),a("div",{class:"mb-1 w-100 pr-0 "},a("span",{class:"text-bold-700 font-medium-1"},M.entries.Lcz_AutomaticReleaseIn,": "),a("div",{class:"d-inline-block"},a("select",{class:"form-control input-sm",id:"zSmallSelect",onChange:e=>this.handleReleaseAfterChange(e)},this.releaseList.map((e=>a("option",{value:+e.CODE_NAME,selected:Number(this.blockDatesData.RELEASE_AFTER_HOURS)==Number(e.CODE_NAME)},e.CODE_VALUE_EN))))),this.blockDatesData.RELEASE_AFTER_HOURS?a("div",{class:"d-inline-block releaseTime"},a("em",null,M.entries.Lcz_On," ",this.getReleaseHoursString())):null)):null))}};Ve.style=je;const Ge=".sc-igl-blocked-date-drawer-h{display:block;text-align:start}";const qe=Ge;const Ke=class{constructor(a){e(this,a);this.blockedDateDrawerClosed=t(this,"blockedDateDrawerClosed",7)}open;label;fromDate;toDate;unitId;isLoading=false;blockDatesData={from_date:"",to_date:"",NOTES:"",pr_id:null,STAY_STATUS_CODE:null,DESCRIPTION:null,BLOCKED_TILL_DATE:null,BLOCKED_TILL_HOUR:null,BLOCKED_TILL_MINUTE:null};blockedDateDrawerClosed;bookingService=new s;async handleBlockDate(){try{this.isLoading=true;const e=(()=>{const e=I(this.blockDatesData.RELEASE_AFTER_HOURS!==null?Number(this.blockDatesData.RELEASE_AFTER_HOURS):null);return{from_date:this.fromDate,to_date:this.toDate,NOTES:this.blockDatesData.OPTIONAL_REASON||"",pr_id:this.unitId.toString(),STAY_STATUS_CODE:this.blockDatesData.OUT_OF_SERVICE?"004":this.blockDatesData.RELEASE_AFTER_HOURS===0?"002":"003",DESCRIPTION:this.blockDatesData.RELEASE_AFTER_HOURS||"",...e}})();await this.bookingService.blockUnit(e);this.closeDrawer()}catch(e){}finally{this.isLoading=false}}closeDrawer(){this.blockedDateDrawerClosed.emit();this.blockDatesData={from_date:"",to_date:"",NOTES:"",pr_id:null,STAY_STATUS_CODE:null,DESCRIPTION:null,BLOCKED_TILL_DATE:null,BLOCKED_TILL_HOUR:null,BLOCKED_TILL_MINUTE:null}}render(){return a("ir-drawer",{key:"1112f2246b77a0cf7b46f5c05513130c610d364f",label:this.label,onDrawerHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.closeDrawer()},open:this.open},this.open&&a("igl-block-dates-view",{key:"baade0c994061d83a68158efb00c2ff3a7c8fdc2",onDataUpdateEvent:e=>this.blockDatesData={...e.detail.data},fromDate:this.fromDate,toDate:this.toDate}),a("div",{key:"4638eb71504f0bf7d61f494f709f123c26494cae",slot:"footer",class:"ir__drawer-footer"},a("ir-custom-button",{key:"97f3f4d83e14f22da05bff9cf50ff289b9520160","data-drawer":"close",size:"medium",appearance:"filled",variant:"neutral"},"Cancel"),a("ir-custom-button",{key:"b5d0c3320b8f6554b60bb3a14e66a34aed56819e",loading:this.isLoading,onClickHandler:()=>{this.handleBlockDate()},size:"medium",appearance:"accent",variant:"brand"},"Save")))}};Ke.style=qe;class We{bookingService=new s;async reallocateEvent(e,t,a,i,r){try{console.log(e,t,a,i);const{data:o}=await ve.post(`/ReAllocate_Exposed_Room`,{pool:e,destination_pr_id:t,from_date:a,to_date:i,extras:T,rateplan_id:r});if(o.ExceptionMsg!==""){throw new Error(o.ExceptionMsg)}console.log(o);return o}catch(e){console.error(e);throw new Error(e)}}async deleteEvent(e){try{const{data:t}=await ve.post(`/UnBlock_Exposed_Unit`,{POOL:e});if(t.ExceptionMsg!==""){throw new Error(t.ExceptionMsg)}return t.My_Result}catch(e){console.log(e);throw new Error(e)}}async updateBlockedEvent(e){try{const t=I(+e.RELEASE_AFTER_HOURS);await this.deleteEvent(e.POOL);const a=await this.bookingService.blockUnit({from_date:this.formatDate(e.FROM_DATE),to_date:this.formatDate(e.TO_DATE),pr_id:e.PR_ID,STAY_STATUS_CODE:e.OUT_OF_SERVICE?"004":e.RELEASE_AFTER_HOURS===0?"002":"003",DESCRIPTION:e.RELEASE_AFTER_HOURS||"",NOTES:e.OPTIONAL_REASON||"",...t});return a}catch(e){console.error(e);throw new Error(e)}}formatDate(e){return e.split("/").join("-")}}const Xe=".sc-igl-booking-event-h{display:block;position:absolute;--ota-bar-width:2px;--stripe-period:20px;--split-border-width:5px;--split-border-color:var(--wa-color-text-normal)}.bookingEventBase.sc-igl-booking-event{position:absolute;width:100%;height:100%;border-radius:4px;background-color:rgb(49, 190, 241);transform:skewX(-22deg);cursor:pointer}.bookingEventBase.leftSplit.sc-igl-booking-event{border-left:var(--split-border-width) solid var(--split-border-color)}.bookingEventBase.rightSplit.sc-igl-booking-event{border-right:var(--split-border-width) solid var(--split-border-color)}.bookingEventBase.fullSplit.sc-igl-booking-event{border-right:var(--split-border-width) solid var(--split-border-color);border-left:var(--split-border-width) solid var(--split-border-color)}.bookingEventBase.fullSplit.skewedLeft.sc-igl-booking-event,.bookingEventBase.leftSplit.skewedLeft.sc-igl-booking-event{border-left:0}.bookingEventBase.fullSplit.skewedRight.sc-igl-booking-event,.bookingEventBase.leftSplit.skewedRight.sc-igl-booking-event{border-right:0}.bookingEventBase.pending.sc-igl-booking-event{border-width:2px;border-style:dashed;border-color:var(--wa-color-success-fill-loud)}.bookingEvent.sc-igl-booking-event{cursor:pointer}.ota-booking-event.sc-igl-booking-event{border-width:var(--ota-bar-width) !important}.bookingEventHiddenBase.sc-igl-booking-event{position:absolute;top:0;left:-4px;width:calc(100% + 8px)}.bookingEventBase.skewedLeft.sc-igl-booking-event::before,.bookingEventBase.skewedRight.sc-igl-booking-event::before{content:'';position:absolute;top:0;bottom:0;width:50%;height:100%;left:-4px;background-color:var(--ir-event-bg);border-radius:4px}.bookingEventBase.skewedLeft.sc-igl-booking-event::before{transform-origin:right;transform:skewX(22deg);border-top-left-radius:0;border-bottom-left-radius:0}.bookingEventBase.fullSplit.skewedLeft.sc-igl-booking-event::before,.bookingEventBase.leftSplit.skewedLeft.sc-igl-booking-event::before{border-left:var(--split-border-width) solid var(--split-border-color) !important;z-index:2;background-color:transparent}.bookingEventBase.fullSplit.skewedRight.sc-igl-booking-event::before,.bookingEventBase.leftRight.skewedRight.sc-igl-booking-event::before{border-right:var(--split-border-width) solid var(--split-border-color) !important;z-index:2;background-color:transparent}.bookingEventBase.skewedRight.sc-igl-booking-event::before{transform-origin:left;transform:skewX(22deg 0deg);border-top-right-radius:0;border-bottom-right-radius:0}.bookingEventBase.border.skewedLeft.sc-igl-booking-event::before{border:var(--ota-bar-width) solid #424242;border-right:0;border-left:0;border-top-right-radius:0;border-bottom-right-radius:0;top:calc(var(--ota-bar-width) * -1);height:20px;left:-4px}.bookingEventBase.border.skewedRight.sc-igl-booking-event::before{border:var(--ota-bar-width) solid #424242;border-left:0;border-right:0;border-top-left-radius:0;border-bottom-left-radius:0;top:calc(var(--ota-bar-width) * -1);height:20px;right:-4px}.bookingEventBase.striped-bar.fullSplit.skewedLeft.vertical.sc-igl-booking-event::after,.bookingEventBase.striped-bar.leftSplit.skewedLeft.vertical.sc-igl-booking-event::after{z-index:1;border-left:var(--split-border-width) solid var(--split-border-color)}.bookingEventBase.striped-bar.fullSplit.skewedRight.vertical.sc-igl-booking-event::after,.bookingEventBase.striped-bar.rightSplit.skewedRight.vertical.sc-igl-booking-event::after{z-index:1;border-right:var(--split-border-width) solid var(--split-border-color)}.bookingEventBase.striped-bar.vertical.sc-igl-booking-event::after{--stripe-angle:360deg}.bookingEventBase.striped-bar.sc-igl-booking-event::after{content:'';position:absolute;inset:0;border-radius:4px;background:repeating-linear-gradient(\n    var(--stripe-angle, 45deg),\n    var(--ir-event-bg) 0,\n    var(--ir-event-bg) calc(var(--stripe-period) / 2),\n    var(--ir-event-bg-stripe-color) calc(var(--stripe-period) / 2),\n    var(--ir-event-bg-stripe-color) var(--stripe-period)\n  );backface-visibility:hidden}.bookingEventBase.skewedRight.striped-bar.sc-igl-booking-event::after,.bookingEventBase.border.skewedRight.sc-igl-booking-event::after{right:-8px}.bookingEventBase.skewedLeft.striped-bar.sc-igl-booking-event::after,.bookingEventBase.border.skewedLeft.sc-igl-booking-event::after{left:-8px}.bookingEventBase.striped-bar.animated.sc-igl-booking-event::after{background-size:28.28px 28.28px;backface-visibility:hidden;animation:stripes 0.8s linear infinite;will-change:background-position}@keyframes stripes{0%{background-position:0 0}100%{background-position:28.28px 0}}.bookingEventDragHandle.sc-igl-booking-event{position:absolute;top:0;width:15px;height:100%;opacity:0.1;background-color:rgba(0, 0, 0, 0.15);transform:skewX(-22deg);border-radius:4px;cursor:pointer}.sc-igl-booking-event-h:hover .bookingEventDragHandle.sc-igl-booking-event{display:block;opacity:1}.newEvent.sc-igl-booking-event-h:hover .bookingEventDragHandle.sc-igl-booking-event{display:none;opacity:1}.leftSide.sc-igl-booking-event{left:0}.rightSide.sc-igl-booking-event{right:0}.leftSide.skewedLeft.sc-igl-booking-event{transform:skewX(0)}.rightSide.skewedRight.sc-igl-booking-event{transform:skewX(0)}.bookingEventTitle.sc-igl-booking-event{position:relative;top:2px;left:5px;max-width:calc(100% - 10px);color:#fff;font-size:0.8em;overflow:hidden;text-overflow:ellipsis;-webkit-user-select:none;user-select:none;-webkit-user-drag:none;cursor:pointer}.legend_circle.sc-igl-booking-event{width:10px;height:10px;margin:3px 3px 3px 2px;border:1px solid #fff;border-radius:100%}.noteIcon.sc-igl-booking-event{position:absolute;bottom:-8px;left:2px}.balanceIcon.sc-igl-booking-event{position:absolute;top:-8px;right:2px}.splitBooking.sc-igl-booking-event{border-right:2px solid #000000}.bookingEventTitle.pending.sc-igl-booking-event{color:var(--wa-color-success-on-quiet) !important}";const Je=Xe;const Qe=class{constructor(a){e(this,a);this.hideBubbleInfo=t(this,"hideBubbleInfo",7);this.updateEventData=t(this,"updateEventData",7);this.dragOverEventData=t(this,"dragOverEventData",7);this.showRoomNightsDialog=t(this,"showRoomNightsDialog",7);this.showDialog=t(this,"showDialog",7);this.resetStretchedBooking=t(this,"resetStretchedBooking",7);this.toast=t(this,"toast",7);this.updateBookingEvent=t(this,"updateBookingEvent",7)}get element(){return r(this)}currency;is_vacation_rental=false;language;bookingEvent;allBookingEvents=[];countries;hideBubbleInfo;updateEventData;dragOverEventData;showRoomNightsDialog;showDialog;resetStretchedBooking;toast;updateBookingEvent;renderElement=false;position;isShrinking=null;dayWidth=0;eventSpace=8;vertSpace=10;showInfoPopup=false;bubbleInfoTopSide=false;isStretch=false;eventsService=new We;bookingService=new s;resizeSide="";isDragging=false;initialX;initialY;currentX;currentY;initialWidth;initialLeft;finalWidth;dragInitPos;dragEndPos;elementRect;isTouchStart;moveDifferenceX;moveDifferenceY;animationFrameId=null;handleMouseMoveBind=this.handleMouseMove.bind(this);handleMouseUpBind=this.handleMouseUp.bind(this);handleClickOutsideBind=this.handleClickOutside.bind(this);role="";componentWillLoad(){window.addEventListener("click",this.handleClickOutsideBind);this.bookingEvent.SPLIT_INDEX=ie(this.bookingEvent.ROOMS);if(this.bookingEvent.SPLIT_INDEX){this.role=re(this.bookingEvent.SPLIT_INDEX,this.bookingEvent.IDENTIFIER)??""}}componentDidLoad(){if(this.isNewEvent()){if(!this.bookingEvent.hideBubble){setTimeout((async()=>{if(["003","002","004"].includes(this.bookingEvent.STATUS_CODE)){this.showEventInfo(true)}else if(["IN-HOUSE","CONFIRMED","PENDING-CONFIRMATION","CHECKED-OUT"].includes(this.bookingEvent.STATUS)){await this.fetchAndAssignBookingData()}else{this.showEventInfo(true)}this.renderAgain()}),1)}}}disconnectedCallback(){window.removeEventListener("click",this.handleClickOutsideBind);if(this.animationFrameId){cancelAnimationFrame(this.animationFrameId)}}handleClickOutside(e){const t=e.target;if(!this.element.contains(t)){this.showEventInfo(false)}}hideBubbleInfoPopup(e){if(e.detail.currentInfoBubbleId!=this.getBookingId()||e.detail.key==="hidebubble"&&e.detail.currentInfoBubbleId===this.getBookingId()){this.showInfoPopup=false;this.renderAgain()}}async moveBookingToHandler(e){try{if(e.detail.bookingId!==this.getBookingId()){this.showEventInfo(false);return}if(e.detail.moveToDay==="revert"||e.detail.toRoomId==="revert"){e.detail.moveToDay=this.bookingEvent.FROM_DATE;e.detail.toRoomId=e.detail.fromRoomId;if(this.isTouchStart&&this.moveDifferenceX<=5&&this.moveDifferenceY<=5&&!this.isStretch){if(O(this.bookingEvent.STATUS_CODE)){this.showEventInfo(true)}else if(["IN-HOUSE","CONFIRMED","PENDING-CONFIRMATION","CHECKED-OUT"].includes(this.bookingEvent.STATUS)){await this.fetchAndAssignBookingData()}}else{this.animationFrameId=requestAnimationFrame((()=>{this.resetBookingToInitialPosition()}));return}}else{if(this.isTouchStart&&this.moveDifferenceX<=5&&this.moveDifferenceY<=5&&!this.isStretch){if(O(this.bookingEvent.STATUS_CODE)){this.showEventInfo(true)}else if(["IN-HOUSE","CONFIRMED","PENDING-CONFIRMATION","CHECKED-OUT"].includes(this.bookingEvent.STATUS)){await this.fetchAndAssignBookingData()}}else{const{pool:t,to_date:a,from_date:i,toRoomId:r}=e.detail;const o=me(a,"YYYY-MM-DD").add(-1,"days").format("YYYY-MM-DD");console.log(this.findRoomType(Number(this.bookingEvent.PR_ID)),this.findRoomType(Number(r)));if((!me(this.bookingEvent.TO_DATE,"YYYY-MM-DD").isSame(me(a,"YYYY-MM-DD"),"dates")||this.findRoomType(Number(this.bookingEvent.PR_ID))!==this.findRoomType(Number(r)))&&(oe.disabled_cells.get(`${r}_${i}`)?.disabled||oe.disabled_cells.get(`${r}_${a}`)?.disabled&&oe.disabled_cells.get(`${r}_${o}`)?.disabled)&&!this.isStretch){this.reset("This room isnâ€™t available for the entire selected period. Please choose different dates or a different room.")}if(this.checkIfSlotOccupied(r,i,a)){this.reset("Overlapping Dates")}if(t){if(O(this.bookingEvent.STATUS_CODE)){await this.eventsService.reallocateEvent(t,r,i,a).catch((()=>{this.resetBookingToInitialPosition()}))}else{if(this.isShrinking||!this.isStretch){const{description:t,status:o,newRatePlans:n,matchedRatePlan:s}=this.getModalDescription(r,i,a);let l=false;if(o==="400"){l=true}const c=this.bookingEvent.defaultDates.from_date;const d=this.bookingEvent.defaultDates.to_date;const h=ne(c,d);let p=null;let u=c;let f=d;if(this.isShrinking){if(me(i,"YYYY-MM-DD").isAfter(me(c,"YYYY-MM-DD"))&&me(a,"YYYY-MM-DD").isBefore(me(d,"YYYY-MM-DD"))){u=c;f=a}else{p=me(i,"YYYY-MM-DD").isAfter(me(c,"YYYY-MM-DD"))?"left":me(a,"YYYY-MM-DD").isBefore(me(d,"YYYY-MM-DD"))?"right":null;if(p==="left"){u=i}if(p==="right"){f=a}}}else{console.log("stretching");if(me(i,"YYYY-MM-DD").isBefore(me(c,"YYYY-MM-DD"))){u=i;const e=me(i,"YYYY-MM-DD").add(h,"days");f=e.isBefore(me(a,"YYYY-MM-DD"),"days")?a:e.format("YYYY-MM-DD")}else if(me(a,"YYYY-MM-DD").isAfter(me(d,"YYYY-MM-DD"))){f=a;u=me(a,"YYYY-MM-DD").subtract(h,"days").format("YYYY-MM-DD")}}console.warn({fromDate:u,toDate:f});this.showDialog.emit({reason:"reallocate",...e.detail,description:t,title:"",rateplans:n,matchedRatePlan:s,hideConfirmButton:l,from_date:u,to_date:f})}else{const e=this.bookingEvent.defaultDates.from_date;const o=this.bookingEvent.defaultDates.to_date;const n=(e,t)=>{let a=e;let i=0;while(a!==t){if(oe.disabled_cells.get(`${r}_${a}`)?.disabled){i++}a=me(a,"YYYY-MM-DD").add(1,"days").format("YYYY-MM-DD")}if(i>=1){this.reset(M.entries.Lcz_ThisUnitIsNotAvailable)}};if(me(o,"YYYY-MM-DD").isBefore(me(a),"dates")){n(o,a)}else if(me(e,"YYYY-MM-DD").isAfter(me(i,"YYYY-MM-DD"),"dates")){n(i,e)}const s={booking:this.bookingEvent,bookingNumber:this.bookingEvent.BOOKING_NUMBER,identifier:this.bookingEvent.IDENTIFIER,to_date:a,pool:t,from_date:i,defaultDates:this.bookingEvent.defaultDates};if(!this.bookingEvent.is_direct){this.showDialog.emit({reason:"stretch",...s})}else{this.showRoomNightsDialog.emit(s)}}}this.isShrinking=null}}}}catch(e){this.toast.emit({position:"top-right",title:e.message,description:"",type:"error"});console.log("something went wrong")}}buildBarIds(){const e=this.getBookingId();return{bar:`event_${e}`,lateCheckout:`event_late_checkout_${e}`,balance:`event_balance_${e}`}}async fetchAndAssignBookingData(){try{console.log("clicked on book#",this.bookingEvent.BOOKING_NUMBER);const e=["IN-HOUSE","CONFIRMED","PENDING-CONFIRMATION","CHECKED-OUT"];if(!e.includes(this.bookingEvent.STATUS)){return}const t=await this.bookingService.getExposedBooking(this.bookingEvent.BOOKING_NUMBER,"en");const a={...t};const i=t.rooms.filter((e=>e["assigned_units_pool"]===this.bookingEvent.ID));if(i.length===0){throw new Error(`booking#${this.bookingEvent.BOOKING_NUMBER} has an empty array`)}if(i.some((e=>e["assigned_units_pool"]===null))){throw new Error(`booking#${this.bookingEvent.BOOKING_NUMBER} has an empty pool`)}t.rooms=i;const r=se(t)[0];const{ID:o,TO_DATE:n,FROM_DATE:s,NO_OF_DAYS:l,STATUS:c,NAME:d,IDENTIFIER:h,origin:p,TOTAL_PRICE:u,PR_ID:f,POOL:g,BOOKING_NUMBER:b,NOTES:w,is_direct:m,BALANCE:v,channel_booking_nbr:y,...k}=r;this.bookingEvent={...k,...this.bookingEvent,channel_booking_nbr:y,booking:t,base_booking:a,DEPARTURE_TIME:k.DEPARTURE_TIME,PHONE:k.PHONE,PHONE_PREFIX:k.PHONE_PREFIX,PRIVATE_NOTE:k.PRIVATE_NOTE,origin:p,BALANCE:v,TOTAL_PRICE:u,ROOM_INFO:{...this.bookingEvent.ROOM_INFO,sharing_persons:k.ROOM_INFO.sharing_persons}};this.updateBookingEvent.emit(this.bookingEvent);this.showEventInfo(true)}catch(e){console.error(e.message)}}reset(e){this.animationFrameId=requestAnimationFrame((()=>{this.resetBookingToInitialPosition()}));throw new Error(e)}findRoomType=e=>{let t=this.bookingEvent.roomsInfo.filter((t=>t.physicalrooms.some((t=>t.id===+e))));if(t.length){return t[0].id}return null};getModalDescription(e,t,a){if(!this.bookingEvent.is_direct){if(this.isShrinking){return{description:M.entries.Lcz_OTA_Modification_Alter,status:"200"}}else{if(me(t,"YYYY-MM-DD").isSame(me(this.bookingEvent.FROM_DATE,"YYYY-MM-DD"))&&me(a,"YYYY-MM-DD").isSame(me(this.bookingEvent.TO_DATE,"YYYY-MM-DD"))){const t=this.findRoomType(this.bookingEvent.PR_ID);const a=this.findRoomType(e);if(t===a){return{description:`${M.entries.Lcz_AreYouSureWantToMoveAnotherUnit}?`,status:"200"}}else{const e=z({rateplan_id:this.bookingEvent.RATE_PLAN_ID,roomTypeId:a,roomTypes:S?.property?.roomtypes});return{description:M.entries.Lcz_OTA_Modification_Alter,status:"200",newRatePlans:Array.isArray(e)?e:undefined,matchedRatePlan:Array.isArray(e)?null:e}}}return{description:M.entries.Lcz_CannotChangeCHBookings+".",status:"400"}}}else{if(!this.isShrinking){const t=this.findRoomType(Number(this.bookingEvent.PR_ID));const a=this.findRoomType(Number(e));if(t===a){console.log("same rt");if(this.bookingEvent.PR_ID.toString()===e.toString()){return{description:M.entries.Lcz_ConfrmModiication+".",status:"200"}}return{description:`${M.entries.Lcz_AreYouSureWantToMoveAnotherUnit}?`,status:"200"}}else{const e=z({rateplan_id:this.bookingEvent.RATE_PLAN_ID,roomTypeId:a,roomTypes:S?.property?.roomtypes});return{description:M.entries.Lcz_SameRatesWillBeKept,status:"200",newRatePlans:Array.isArray(e)?e:undefined,matchedRatePlan:Array.isArray(e)?null:e}}}return{description:M.entries.Lcz_ConfrmModiication+".",status:"200"}}}resetBookingToInitialPosition(){if(this.isStretch){this.element.style.left=`${this.initialLeft}px`;this.element.style.width=`${this.initialWidth}px`;this.isStretch=false;this.finalWidth=this.initialWidth;this.isShrinking=null}else{this.element.style.top=`${this.dragInitPos.top}px`;this.element.style.left=`${this.dragInitPos.left}px`}}handleRevertBooking(e){if(this.bookingEvent.POOL===e.detail){this.resetBookingToInitialPosition()}}checkIfSlotOccupied(e,t,a){const i=me(t,"YYYY-MM-DD");const r=me(a,"YYYY-MM-DD");const o=this.allBookingEvents.some((t=>{if(t.POOL===this.bookingEvent.POOL){return false}const a=me(t.FROM_DATE,"YYYY-MM-DD").add(1,"days");const o=me(t.TO_DATE,"YYYY-MM-DD");return t.PR_ID===+e&&r.isSameOrAfter(a)&&i.isBefore(o)}));return o}renderAgain(){this.renderElement=!this.renderElement}getUniqueId(){return(new Date).getTime()}isSplitBooking(){return!!this.bookingEvent.SPLIT_BOOKING}isNewEvent(){return this.getBookingId()==="NEW_TEMP_EVENT"}isHighlightEventType(){return this.getEventType()==="HIGH_LIGHT"}getBookingId(){return this.bookingEvent.ID}getBookingStatus(){return this.bookingEvent.STATUS}getBookedBy(){return this.bookingEvent.NAME}getBookedRoomId(){return this.bookingEvent.PR_ID}getEventStartingDate(){return new Date(this.bookingEvent.FROM_DATE)}getEventEndingDate(){return new Date(this.bookingEvent.TO_DATE)}getEventType(){return this.bookingEvent.event_type}getEventLegend(){let e=this.bookingEvent?.legendData.statusId[this.getBookingStatus()];let t=this.isNewEvent()?{color:"#f9f9c9"}:{};return{...this.bookingEvent?.legendData[e.id],...e,...t}}getLegendOfStatus(e){let t=this.bookingEvent?.legendData.statusId[e];return{...this.bookingEvent.legendData[t.id],...t}}getNoteNode(){if(this.bookingEvent.NOTES||this.bookingEvent.INTERNAL_NOTE||this.bookingEvent.PRIVATE_NOTE){return this.getLegendOfStatus("NOTES")}return null}getBalanceNode(){if(this.bookingEvent.BALANCE!==null&&this.bookingEvent.BALANCE>=1){return this.getLegendOfStatus("OUTSTANDING-BALANCE")}return null}setStayDays(e){this.bookingEvent.NO_OF_DAYS=e;this.renderAgain()}getStayDays(){return this.bookingEvent.NO_OF_DAYS}getPosition(){let e=this.getEventStartingDate();let t=".room_"+this.getBookedRoomId()+"_"+e.getDate()+"_"+(e.getMonth()+1)+"_"+e.getFullYear();let a=document.querySelector(".bodyContainer");let i=document.querySelector(t);let r={top:"0",left:"0",width:"0",height:"20px"};if(i&&a&&i.getBoundingClientRect()&&a.getBoundingClientRect()){let e=a.getBoundingClientRect();let t=i.getBoundingClientRect();this.dayWidth=this.dayWidth||t.width;r.top=t.top+t.height/2-this.vertSpace-e.top+"px";r.left=t.left+(!this.isNewEvent()&&me(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE))?0:this.dayWidth/2)+this.eventSpace/2-e.left+"px";r.width=(this.getStayDays()+(!this.isNewEvent()&&me(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE))?.5:0))*this.dayWidth-this.eventSpace+"px"}else{console.log(this.bookingEvent);console.log("Locating event cell failed ",t)}return r}getNumber(e){return e?parseFloat(e):0}startDragging(e,t){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();if(this.isNewEvent()||this.isHighlightEventType()){return null}this.resizeSide=t;this.isDragging=true;this.showEventInfo(false);this.isStretch=t!=="move";if(t==="move"){this.initialX=e.clientX||e.touches[0].clientX;this.initialY=e.clientY||e.touches[0].clientY;this.elementRect=this.element.getBoundingClientRect();const t=0;const a=0;this.dragInitPos={id:this.getBookingId(),fromRoomId:this.getBookedRoomId(),top:this.getNumber(this.element.style.top)+a,left:this.getNumber(this.element.style.left)+t};this.dragInitPos.x=this.dragInitPos.left;this.dragInitPos.y=this.dragInitPos.top;this.dragEndPos={...this.dragInitPos};this.element.style.top=`${this.dragInitPos.top}px`;this.element.style.left=`${this.dragInitPos.left}px`;this.isTouchStart=true;this.dragOverEventData.emit({id:"CALCULATE_DRAG_OVER_BOUNDS",data:this.dragInitPos})}else{this.initialWidth=this.element.offsetWidth;this.initialLeft=this.element.offsetLeft;this.initialX=e.clientX||e.touches[0].clientX;this.dragOverEventData.emit({id:"CALCULATE_DRAG_OVER_BOUNDS",data:{id:this.getBookingId(),fromRoomId:this.getBookedRoomId(),top:this.getNumber(this.element.style.top),left:this.initialLeft,x:this.initialX,y:e.clientY||e.touches[0].clientY}})}document.addEventListener("mousemove",this.handleMouseMoveBind);document.addEventListener("touchmove",this.handleMouseMoveBind);document.addEventListener("pointermove",this.handleMouseMoveBind);document.addEventListener("mouseup",this.handleMouseUpBind);document.addEventListener("touchup",this.handleMouseUpBind);document.addEventListener("pointerup",this.handleMouseUpBind)}handleMouseMove(e){if(this.isDragging){this.currentX=e.clientX||e.touches[0].clientX;let t=this.currentX-this.initialX;if(this.resizeSide==="move"){this.currentY=e.clientY||e.touches[0].clientY;let a=this.currentY-this.initialY;this.element.style.top=`${this.dragInitPos.top+a}px`;this.element.style.left=`${this.dragInitPos.left+t}px`;this.dragEndPos={id:this.getBookingId(),fromRoomId:this.getBookedRoomId(),top:this.dragInitPos.top+a,left:this.dragInitPos.left+t};this.dragEndPos.x=this.dragEndPos.left;this.dragEndPos.y=this.dragEndPos.top;this.dragOverEventData.emit({id:"DRAG_OVER",data:this.dragEndPos})}else{if(this.role==="fullSplit"){return}const e=!this.bookingEvent.is_direct&&!O(this.bookingEvent.STATUS_CODE);let a=this.initialWidth;if(this.resizeSide=="rightSide"){a=this.initialWidth+t;a=Math.min(a,this.initialX+this.element.offsetWidth);a=Math.max(this.dayWidth-this.eventSpace,a);this.isShrinking=t<0;if(!this.isShrinking&&e){return}if(this.role==="rightSplit"){return}this.element.style.width=`${a}px`}else if(this.resizeSide=="leftSide"){this.isShrinking=t>0;if(!this.isShrinking&&e){return}if(this.role==="leftSplit"){return}a=Math.max(this.dayWidth-this.eventSpace,this.initialWidth-t);let i=this.initialLeft+(this.initialWidth-a);this.element.style.left=`${i}px`;this.element.style.width=`${a}px`}this.finalWidth=a}}else{console.log("still mouse move listening...")}}handleMouseUp(){if(this.isDragging){if(this.resizeSide==="move"){if(this.isTouchStart){this.moveDifferenceX=Math.abs(this.dragEndPos.x-this.dragInitPos.x);this.moveDifferenceY=Math.abs(this.dragEndPos.y-this.dragInitPos.y)}this.dragOverEventData.emit({id:"DRAG_OVER_END",data:{...this.dragEndPos,pool:this.bookingEvent.POOL,nbOfDays:this.bookingEvent.NO_OF_DAYS}})}else{const e=this.finalWidth-(!this.isNewEvent()&&me(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE))?this.dayWidth/2:0);const t=Math.round(e/this.dayWidth);console.log(e,this.dayWidth,t);let a=this.getStayDays();if(a!=t&&!isNaN(t)){if(this.resizeSide=="leftSide"){this.element.style.left=`${this.initialLeft+(a-t)*this.dayWidth}px`}else{if(t<a){this.isShrinking=true}}this.dragOverEventData.emit({id:"STRETCH_OVER_END",data:{id:this.getBookingId(),fromRoomId:+this.getBookedRoomId(),x:+this.element.style.left.replace("px",""),y:+this.element.style.top.replace("px",""),pool:this.bookingEvent.POOL,nbOfDays:t}});const e=!this.isNewEvent()&&me(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE))?+this.dayWidth/2:0;this.element.style.width=`${t*this.dayWidth-this.eventSpace+e}px`}else{this.element.style.left=`${this.initialLeft}px`;this.element.style.width=`${t*this.dayWidth-this.eventSpace}px`}}}else{console.log("still mouse up listening...")}this.isDragging=false;document.removeEventListener("mousemove",this.handleMouseMoveBind);document.removeEventListener("touchmove",this.handleMouseMoveBind);document.removeEventListener("pointermove",this.handleMouseMoveBind);document.removeEventListener("mouseup",this.handleMouseUpBind);document.removeEventListener("touchup",this.handleMouseUpBind);document.removeEventListener("pointerup",this.handleMouseUpBind)}updateData(e){this.updateEventData.emit(e)}calculateHoverPosition(){const e=this.element.getBoundingClientRect();const t=e.width;const a=e.left;const i=window.innerWidth;let r;if(t<=i){r=t/2}else{r=i/2-a}return{position:"absolute",left:`${r}px`,transform:"translateX(-50%)"}}renderEventBookingNumber(){if(this.bookingEvent.STATUS==="TEMP-EVENT"||this.bookingEvent.ID==="NEW_TEMP_EVENT"){return""}if(O(this.bookingEvent.STATUS_CODE)){return""}if(!this.bookingEvent.is_direct){return` - ${this.bookingEvent.channel_booking_nbr}`}return` - ${this.bookingEvent.BOOKING_NUMBER}`}showEventInfo(e){if(this.isHighlightEventType()||this.bookingEvent.hideBubble){return null}if(e){let e=document.querySelector(".calendarScrollContainer");let t=e.getBoundingClientRect();let a=this.element.getBoundingClientRect();let i=t.height/2+t.top+50;if(a.top<i){this.bubbleInfoTopSide=false}else{this.bubbleInfoTopSide=true}}if(e){this.hideBubbleInfo.emit({key:"hidePopup",currentInfoBubbleId:this.getBookingId()})}this.showInfoPopup=e;this.renderAgain()}isDepartureAfterHotelCheckout(){if(S.property.is_automatic_check_in_out){return}const e=this.bookingEvent.DEPARTURE_TIME;if(!e?.code){return false}const t=me(S.property.time_constraints.check_out_till,"HH:mm");const a=me(e.description,"HH:mm");return t.isBefore(a)}computeSplitRole(){const e=ie(this.bookingEvent.ROOMS);let t=null;if(e){t=re(e,this.bookingEvent.IDENTIFIER)??""}return t}render(){let e=this.getEventLegend();let t=this.getNoteNode();let r=this.getBalanceNode();const{balance:n,bar:s,lateCheckout:l}=this.buildBarIds();let c=this.bookingEvent.ROOM_INFO?.calendar_extra?this.bookingEvent.ROOM_INFO.calendar_extra?.booking_color?.color??e.color:e.color;const{foreground:d,stripe:h}=S.colorsForegrounds?.[c]??{foreground:"",checkout:""};const p=this.isDepartureAfterHotelCheckout();c=this.bookingEvent.STATUS==="CHECKED-OUT"?e.color:c;const u=this.computeSplitRole();const f=this.bookingEvent.STATUS==="PENDING-CONFIRMATION";return a(i,{key:"2c205c9b1d7084b52c998e722810534c24d9d7bb",class:`bookingEvent  ${this.isNewEvent()||this.isHighlightEventType()?"newEvent":""} ${e.clsName} `,style:this.getPosition(),id:s},a("div",{key:"1a9a885e81c4a70b3d773445a62dd3a0fdf91e75",class:{bookingEventBase:true,pending:f,skewedLeft:!this.isNewEvent()&&me(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE)),skewedRight:!this.isNewEvent()&&me(new Date(this.bookingEvent.defaultDates.to_date)).isAfter(new Date(this.bookingEvent.TO_DATE)),"striped-bar vertical":this.bookingEvent.STATUS==="IN-HOUSE","striped-bar animated":O(this.bookingEvent.STATUS_CODE)&&this.bookingEvent.STATUS_CODE==="003","border border-dark ota-booking-event":!this.bookingEvent.is_direct&&!O(this.bookingEvent.STATUS_CODE)&&this.bookingEvent.STATUS!=="TEMP-EVENT"&&this.bookingEvent.ID!=="NEW_TEMP_EVENT",[u]:true},style:{backgroundColor:c,"--ir-event-bg":c,"--ir-event-bg-stripe-color":h},onTouchStart:e=>this.startDragging(e,"move"),onMouseDown:e=>this.startDragging(e,"move")}),p&&a("wa-tooltip",{key:"0bc519589925239346cdd9f81fcc1244327c581f",for:l},"Departure time: ",this.bookingEvent.DEPARTURE_TIME?.description),r&&a("wa-tooltip",{key:"b9f02d31489511e23a299f3707e02c12475564a9",for:n},"Balance: ",E(S.property.currency.symbol,this.bookingEvent.BALANCE)),t?a("div",{class:"legend_circle noteIcon",style:{backgroundColor:t.color}}):null,(r||p)&&a("div",{key:"fbfb7abc26306277b54b8156504be873c4f971e2",class:"balanceIcon d-flex"},p&&a("div",{key:"89482cde6daec3e93596b9cfc1efa3724070dc45",id:l,class:"legend_circle",style:{backgroundColor:"#999999"}}),r?a("div",{id:n,class:"legend_circle",style:{backgroundColor:"#f34752"}}):null),a("div",{key:"ce43a0eedc5f8f22ad1d71b4126d9dcc633431b3",class:`bookingEventTitle ${f?"pending":""}`,style:!f&&{color:d},onTouchStart:e=>this.startDragging(e,"move"),onMouseDown:e=>this.startDragging(e,"move")},this.getBookedBy(),this.renderEventBookingNumber()),a(o,{key:"874232a773d8a936d0af660b30906e8fe8716647"},a("div",{key:"ebb59f0d5cf52857ec676c6a3453d19a5149d97b",class:`bookingEventDragHandle leftSide ${!this.isNewEvent()&&me(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE))?"skewedLeft":""}\n            ${!this.isNewEvent()&&me(new Date(this.bookingEvent.defaultDates.to_date)).isAfter(new Date(this.bookingEvent.TO_DATE))?"skewedRight":""}`,onTouchStart:e=>this.startDragging(e,"leftSide"),onMouseDown:e=>this.startDragging(e,"leftSide")}),a("div",{key:"84bd3de0f4c891347b9225f1d74e03aebd127994",class:`bookingEventDragHandle rightSide ${!this.isNewEvent()&&me(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE))?"skewedLeft":""}\n              ${!this.isNewEvent()&&me(new Date(this.bookingEvent.defaultDates.to_date)).isAfter(new Date(this.bookingEvent.TO_DATE))?"skewedRight":""}`,onTouchStart:e=>this.startDragging(e,"rightSide"),onMouseDown:e=>this.startDragging(e,"rightSide")})),this.showInfoPopup?a("igl-booking-event-hover",{is_vacation_rental:this.is_vacation_rental,countries:this.countries,currency:this.currency,class:"top",bookingEvent:this.bookingEvent,bubbleInfoTop:this.bubbleInfoTopSide,style:this.calculateHoverPosition()}):null)}};Qe.style=Je;const Ze=".sc-igl-booking-event-hover-h{display:block;position:relative;z-index:100;--ir-booking-event-arrow:8px;--ir-booking-event-arrow-before:calc(var(--ir-booking-event-arrow) + 1px);--ir-booking-popover-border-color:var(--wa-color-neutral-border-normal)}.btn.sc-igl-booking-event-hover{padding-left:4px !important;padding-right:4px !important}.balance_amount.sc-igl-booking-event-hover{color:var(--wa-color-danger-fill-loud);font-size:0.75rem}.user-notes.sc-igl-booking-event-hover{margin-left:4px;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:5;line-clamp:5;overflow:hidden;max-width:100%;height:auto}.booking-event-hover__color-picker-trigger.sc-igl-booking-event-hover{all:unset;border:1px solid #e0e0e0;padding:0.25rem 0.25rem;border-radius:0.21rem;cursor:pointer}.events_btns.sc-igl-booking-event-hover{display:inline-flex;align-items:center;justify-content:center;gap:0.5rem}.mx-01.sc-igl-booking-event-hover{--m:5px;margin-left:var(--m) !important;margin-right:var(--m) !important}.ota-notes.sc-igl-booking-event-hover{width:450px}.iglPopOver.sc-igl-booking-event-hover{position:absolute;background-color:var(--wa-color-surface-default);padding:10px;border:1px solid var(--ir-booking-popover-border-color);left:var(--el-left, 50%);transform:translateX(-50%) translateY(10px);box-shadow:1px 0px 20px rgba(0, 0, 0, 0.2);font-size:13.5px;line-height:var(--wa-line-height-normal);padding:var(--wa-space-m);border-radius:var(--wa-panel-border-radius);border-style:var(--wa-panel-border-style);box-shadow:hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px;box-shadow:var(--wa-shadow-l);color:var(--wa-color-text-normal);user-select:none;-webkit-user-select:none}.iglPopOver.infoBubble.sc-igl-booking-event-hover{min-width:350px}.iglPopOver.blockedView.sc-igl-booking-event-hover{max-width:400px;width:400px}.iglPopOver.newBookingOptions.sc-igl-booking-event-hover{overflow-wrap:break-word !important;min-width:230px;width:fit-content}.bubblePointer.sc-igl-booking-event-hover{position:absolute;width:22px;height:12px;left:50%;transform:translateX(-50%);pointer-events:none}.bubblePointer.sc-igl-booking-event-hover::before,.bubblePointer.sc-igl-booking-event-hover::after{z-index:100;content:'';position:absolute;left:50%;transform:translateX(-50%);border-left:var(--ir-booking-event-arrow) solid transparent;border-right:var(--ir-booking-event-arrow) solid transparent}.bubblePointer.sc-igl-booking-event-hover::before{border-left:var(--ir-booking-event-arrow-before) solid transparent;border-right:var(--ir-booking-event-arrow-before) solid transparent}.bubblePointTop.sc-igl-booking-event-hover{bottom:-12px}.bubblePointTop.sc-igl-booking-event-hover::before{border-top:var(--ir-booking-event-arrow-before) solid var(--ir-booking-popover-border-color);top:0}.bubblePointTop.sc-igl-booking-event-hover::after{border-top:var(--ir-booking-event-arrow) solid var(--wa-color-surface-default);top:-1px}.bubblePointBottom.sc-igl-booking-event-hover{top:-12px}.bubblePointBottom.sc-igl-booking-event-hover::before{border-bottom:var(--ir-booking-event-arrow-before) solid var(--ir-booking-popover-border-color);bottom:0}.bubblePointBottom.sc-igl-booking-event-hover::after{border-bottom:var(--ir-booking-event-arrow) solid var(--wa-color-surface-default);bottom:-1px}.bubbleInfoAbove.sc-igl-booking-event-hover{bottom:35px}.updateBtnIcon.sc-igl-booking-event-hover{margin-right:4px}.icon-image.sc-igl-booking-event-hover{height:auto;width:25px;margin-right:5px}";const et=Ze;const tt=class{constructor(a){e(this,a);this.showBookingPopup=t(this,"showBookingPopup",7);this.hideBubbleInfo=t(this,"hideBubbleInfo",7);this.deleteButton=t(this,"deleteButton",7);this.bookingCreated=t(this,"bookingCreated",7);this.showDialog=t(this,"showDialog",7);this.openCalendarSidebar=t(this,"openCalendarSidebar",7)}get element(){return r(this)}bookingEvent;bubbleInfoTop=false;currency;countries;is_vacation_rental=false;isLoading;shouldHideUnassignUnit=false;canCheckInOrCheckout;bookingColor=null;showBookingPopup;hideBubbleInfo;deleteButton;bookingCreated;showDialog;openCalendarSidebar;eventService=new We;hideButtons=false;propertyService=new ye;baseColor;componentWillLoad(){let e=this.bookingEvent.roomsInfo.find((e=>e.id===this.bookingEvent.RATE_TYPE));if(e){this.shouldHideUnassignUnit=e.physicalrooms.length===1}if(me(this.bookingEvent.TO_DATE,"YYYY-MM-DD").isBefore(me())){this.hideButtons=true}this.baseColor=this.getEventLegend().color;this.bookingColor=this.bookingEvent.ROOM_INFO?.calendar_extra?this.bookingEvent.ROOM_INFO?.calendar_extra?.booking_color:null;this.canCheckInOrCheckout=me().isSameOrAfter(new Date(this.bookingEvent.FROM_DATE),"days")&&me().isBefore(new Date(this.bookingEvent.TO_DATE),"days")}handleBookingEventChange(e,t){if(e!==t)this.canCheckInOrCheckout=me(new Date).isSameOrAfter(new Date(this.bookingEvent.FROM_DATE),"days")&&me(new Date).isBefore(new Date(this.bookingEvent.TO_DATE),"days")}handleListenKeyDown(e){if(e.key==="Escape"){e.stopPropagation();this.hideBubble()}else return}getEventLegend(){let e=this.bookingEvent?.legendData.statusId[this.bookingEvent.STATUS];return{...this.bookingEvent?.legendData[e.id],...e}}getBookingId(){return this.bookingEvent.ID}hideBubble(){this.hideBubbleInfo.emit({key:"hidebubble",currentInfoBubbleId:this.getBookingId()})}getTotalOccupants(){const{CHILDREN_COUNT:e,ADULTS_COUNT:t}=this.bookingEvent;if(e===0){return`${t} ${t>1?M.entries.Lcz_AdultsCaption.toLowerCase():M.entries.Lcz_Single_Adult?.toLowerCase()}`}return`${t} ${t>1?M.entries.Lcz_AdultsCaption.toLowerCase():M.entries.Lcz_Single_Adult?.toLowerCase()}, ${e} ${e>1?M.entries.Lcz_ChildCaption.toLowerCase():M.entries.Lcz_Single_Child?.toLowerCase()}`}getPhoneNumber(){return this.bookingEvent.PHONE}getCountry(){return A(this.bookingEvent.COUNTRY,this.countries).name}getPhoneCode(){if(this.bookingEvent.PHONE_PREFIX){return this.bookingEvent.PHONE_PREFIX}return A(this.bookingEvent.COUNTRY,this.countries).phone_prefix}renderPhone(){return this.bookingEvent.COUNTRY?`${this.bookingEvent.is_direct?this.getPhoneCode()+"-":""}${this.getPhoneNumber()} - ${this.getCountry()}`:this.getPhoneNumber()}getInternalNote(){return this.bookingEvent.INTERNAL_NOTE}getTotalPrice(){return this.bookingEvent.TOTAL_PRICE}getArrivalTime(){return this.bookingEvent.ARRIVAL_TIME}getRatePlan(){if(!this.bookingEvent){return}const e=this.bookingEvent?.booking?.rooms?.find((e=>e.assigned_units_pool===this.bookingEvent.ID));if(!e){console.warn(`Couldn't find room with pool ${this.bookingEvent.ID}`);return null}let t="";t+=e.rateplan["short_name"];if(e.rateplan["is_non_refundable"]){t+=` - ${M.entries.Lcz_NonRefundable}`}return t}getEntryDate(){return this.bookingEvent.ENTRY_DATE}isNewBooking(){return this.getBookingId()==="NEW_TEMP_EVENT"}isCheckedIn(){return this.bookingEvent.STATUS==="IN-HOUSE"}isBlockedDateEvent(){return this.bookingEvent.STATUS==="BLOCKED"||this.bookingEvent.STATUS==="BLOCKED-WITH-DATES"}hasSplitBooking(){return this.bookingEvent.hasOwnProperty("splitBookingEvents")&&this.bookingEvent.splitBookingEvents}canCheckIn(){return B({from_date:this.bookingEvent.FROM_DATE,to_date:this.bookingEvent.TO_DATE,isCheckedIn:this.isCheckedIn()})}canCheckOut(){if(!S.checkin_enabled||S.is_automatic_check_in_out){return false}if(this.isCheckedIn()){return true}const e=me();if(this.bookingEvent.ROOM_INFO?.in_out?.code==="000"&&me().isSameOrAfter(new Date(this.bookingEvent.TO_DATE),"days")&&le(e.toDate(),ce(S.checkin_checkout_hours?.offset,S.checkin_checkout_hours?.hour))){return true}return false}handleBlockDateUpdate(e){e.stopImmediatePropagation();e.stopPropagation();const t=e.detail;this.bookingEvent={...this.bookingEvent,...t.data}}handleEditBooking(){this.bookingEvent.TITLE=M.entries.Lcz_EditBookingFor;this.handleBookingOption("EDIT_BOOKING")}getStringDateFormat(e){return e.getFullYear()+"-"+(e.getMonth()<9?"0":"")+(e.getMonth()+1)+"-"+(e.getDate()<=9?"0":"")+e.getDate()}handleAddRoom(){let e=new Date(this.bookingEvent.FROM_DATE);e.setHours(0,0,0,0);let t=this.getStringDateFormat(e);let a=new Date(this.bookingEvent.TO_DATE);a.setHours(0,0,0,0);let i=this.getStringDateFormat(a);let r={ID:"",NAME:"",BOOKING_NUMBER:this.bookingEvent.BOOKING_NUMBER,FROM_DATE:t,TO_DATE:i,roomsInfo:this.bookingEvent.roomsInfo,ARRIVAL:this.bookingEvent.ARRIVAL,ADD_ROOM_TO_BOOKING:this.bookingEvent.ID,TITLE:"Add Room to #"+this.bookingEvent.BOOKING_NUMBER,event_type:"ADD_ROOM",ROOMS:this.bookingEvent.ROOMS,GUEST:this.bookingEvent.GUEST,message:this.bookingEvent.NOTES,SOURCE:this.bookingEvent.SOURCE,booking:this.bookingEvent?.base_booking,defaultDateRange:{fromDate:e,fromDateStr:"",toDate:a,toDateStr:"",dateDifference:0,editabled:true,message:"Including 5.00% City Tax - Excluding 11.00% VAT"}};this.handleBookingOption("ADD_ROOM",r)}handleCustomerCheckIn(){const e=this.bookingEvent.booking.rooms.find((e=>e.identifier===this.bookingEvent.IDENTIFIER));const{adult_nbr:t,children_nbr:a,infant_nbr:i}=this.bookingEvent.ROOM_INFO.occupancy;const r=e?e.unit.name:this.bookingEvent.ROOM_INFO.unit?.name??"";this.showDialog.emit({reason:"checkin",bookingNumber:this.bookingEvent.BOOKING_NUMBER,roomIdentifier:this.bookingEvent.IDENTIFIER,roomName:r,roomUnit:"",sidebarPayload:{identifier:this.bookingEvent.IDENTIFIER,bookingNumber:this.bookingEvent.BOOKING_NUMBER,checkin:false,roomName:r,sharing_persons:this.bookingEvent.ROOM_INFO.sharing_persons,totalGuests:t+a+i}})}handleCustomerCheckOut(){this.showDialog.emit({reason:"checkout",booking:this.bookingEvent.booking,bookingNumber:this.bookingEvent.BOOKING_NUMBER,roomIdentifier:this.bookingEvent.IDENTIFIER,roomName:"",roomUnit:""})}handleDeleteEvent(){this.hideBubble();this.deleteButton.emit(this.bookingEvent.POOL);console.log("Delete Event")}async handleUpdateBlockedDates(){try{this.isLoading="update";setTimeout((()=>{this.hideBubble()}),50);await this.eventService.updateBlockedEvent(this.bookingEvent);this.isLoading=""}catch(e){}}handleConvertBlockedDateToBooking(){this.handleBookingOption("BAR_BOOKING")}getRoomInfo(){const e=+this.bookingEvent.PR_ID;let t={};for(const a of this.bookingEvent.roomsInfo){for(const i of a.physicalrooms){if(e===i.id){t.CATEGORY=a.name;t.ROOM_NAME=i.name;t.ROOMS_INFO=a;return t}}}return t}renderTitle(e,t){switch(e){case"EDIT_BOOKING":return`${M.entries.Lcz_EditBookingFor} ${t.CATEGORY} ${t.ROOM_NAME}`;case"ADD_ROOM":return`${M.entries.Lcz_AddingUnitToBooking}# ${this.bookingEvent.BOOKING_NUMBER}`;case"SPLIT_BOOKING":return M.entries.Lcz_Adding+` ${t.CATEGORY} ${t.ROOM_NAME}`;default:return`${M.entries.Lcz_NewBookingFor} ${t.CATEGORY} ${t.ROOM_NAME}`}}handleBookingOption(e,t=null){const a=this.getRoomInfo();let i=t?t:this.bookingEvent;i.event_type=e;i.TITLE=this.renderTitle(e,a);i.IDENTIFIER=this.bookingEvent.IDENTIFIER;if(["003","002","004"].includes(this.bookingEvent.STATUS_CODE)){i.roomsInfo=[a.ROOMS_INFO]}if(e==="BAR_BOOKING"&&this.bookingEvent.STATUS!=="TEMP-EVENT"){const{FROM_DATE:e,TO_DATE:t,PR_ID:a,RELEASE_AFTER_HOURS:r,ENTRY_DATE:o,OPTIONAL_REASON:n,ENTRY_MINUTE:s,ENTRY_HOUR:l,STATUS_CODE:c}=this.bookingEvent;i.block_exposed_unit_props={from_date:e,to_date:t,NOTES:n,pr_id:a,STAY_STATUS_CODE:c,DESCRIPTION:r,BLOCKED_TILL_DATE:o,BLOCKED_TILL_HOUR:l,BLOCKED_TILL_MINUTE:s};this.handleDeleteEvent()}this.showBookingPopup.emit({key:"add",data:{...i}});this.hideBubbleInfo.emit({key:"hidebubble",currentInfoBubbleId:this.getBookingId()})}getOTANotes(e=3){if(!this.bookingEvent.ota_notes||this.bookingEvent.ota_notes?.length===0){return null}const t=[...this.bookingEvent.ota_notes];const a="<br>- ";if(t.length>e){t[e-1]={statement:`${t[e-1].statement} <span>more...</span>`}}return t.slice(0,e).map((e=>`${a}${e.statement}`)).join("")}canSplitBooking(){const e=this.bookingEvent?.defaultDates?.from_date;const t=this.bookingEvent?.defaultDates?.to_date;const a=me(e,"YYYY-MM-DD",true).startOf("day");const i=me(t,"YYYY-MM-DD",true).startOf("day");if(!a.isValid()||!i.isValid())return false;const r=i.diff(a,"days");if(r<2)return false;const o=me().startOf("day");if(i.diff(o,"days")<1)return false;return true}getInfoElement(){return a("div",{class:`iglPopOver infoBubble ${this.bubbleInfoTop?"bubbleInfoAbove":""} text-left`},this.renderPointer(),a("div",{class:`d-flex p-0 m-0  ${this.bookingEvent.BALANCE>1?"pb-0":"pb-1"}`},a("div",{class:"px-0  font-weight-bold font-medium-1 d-flex align-items-center",style:{flex:"1 1 0%"}},a("img",{src:this.bookingEvent?.origin?.Icon,alt:this.bookingEvent?.origin?.Label,class:"icon-image"}),a("p",{class:"p-0 m-0"},!this.bookingEvent.is_direct?this.bookingEvent.channel_booking_nbr:this.bookingEvent.BOOKING_NUMBER)),a("div",{class:"pr-0  text-right d-flex align-items-center",style:{gap:"0.5rem"}},this.bookingEvent?.STATUS!=="PENDING-CONFIRMATION"&&a("ir-dropdown",{caret:false,onOptionChange:async e=>{const t=e.detail==="none"?null:S.property.calendar_extra?.booking_colors.find((t=>t.color===e.detail));await this.propertyService.setRoomCalendarExtra({property_id:S.property.id,room_identifier:this.bookingEvent.IDENTIFIER,value:JSON.stringify({booking_color:t})});this.bookingColor=t},style:{"--ir-dropdown-menu-min-width":"fit-content",width:"1.5rem"}},a("button",{class:"booking-event-hover__color-picker-trigger",slot:"trigger"},this.bookingColor?a("div",{style:{height:"1rem",width:"1rem",background:this.bookingColor?.color,borderRadius:"0.21rem"}}):a("ir-icons",{class:"p-0 m-0 d-flex align-items-center",style:{"--icon-size":"1rem",height:"1rem",width:"1rem",background:this.baseColor,color:"white",borderRadius:"0.21rem",padding:"0.25rem"},name:"ban"})),a("ir-dropdown-item",{value:"none"},a("ir-icons",{class:"p-0 m-0 d-flex align-items-center",style:{"--icon-size":"1rem",height:"1rem",width:"1rem"},name:"ban"})),S.property.calendar_extra?.booking_colors.map((e=>a("ir-dropdown-item",{value:e.color},a("div",{style:{height:"1rem",width:"1rem",borderRadius:"0.21rem",background:e.color}}))))),E(this.currency.symbol,this.getTotalPrice()))),this.bookingEvent.BALANCE>1&&a("p",{class:"pr-0 m-0 p-0 text-right balance_amount"},M.entries.Lcz_Balance,": ",E(this.currency.symbol,this.bookingEvent.BALANCE)),a("div",{class:"row p-0 m-0"},a("div",{class:"px-0 pr-0 col-12"},a("ir-date-view",{from_date:this.bookingEvent.defaultDates.from_date,to_date:this.bookingEvent.defaultDates.to_date,showDateDifference:false}))),this.bookingEvent.NAME&&a("ir-label",{containerStyle:{padding:"0",margin:"0"},class:"m-0 p-0",labelText:`Guest name:`,content:this.bookingEvent.NAME}),this.getArrivalTime()&&a("ir-label",{containerStyle:{padding:"0",margin:"0"},class:"m-0 p-0",labelText:`${M.entries.Lcz_ArrivalTime}:`,content:this.getArrivalTime()}),this.getTotalOccupants()&&a("ir-label",{class:"m-0 p-0",containerStyle:{padding:"0",margin:"0"},labelText:`${M.entries.Lcz_Occupancy}:`,content:this.getTotalOccupants()}),this.getPhoneNumber()&&a("ir-label",{containerStyle:{padding:"0",margin:"0"},class:"m-0 p-0",labelText:`${M.entries.Lcz_Phone}:`,content:this.renderPhone()}),this.getRatePlan()&&a("ir-label",{containerStyle:{padding:"0",margin:"0"},class:"m-0 p-0",labelText:`${M.entries.Lcz_RatePlan}:`,content:this.getRatePlan()}),this.bookingEvent.DEPARTURE_TIME?.code!=="000"&&a("ir-label",{containerStyle:{padding:"0",margin:"0"},class:"m-0 p-0",labelText:`Departure time:`,content:this.bookingEvent.DEPARTURE_TIME?.description}),this.bookingEvent.PRIVATE_NOTE&&a("ir-label",{containerStyle:{padding:"0",margin:"0"},class:"m-0 p-0",labelText:`${M.entries.Lcz_BookingPrivateNote}:`,display:"inline",content:this.bookingEvent.PRIVATE_NOTE}),this.bookingEvent.is_direct&&a("ir-label",{containerStyle:{padding:"0",margin:"0"},labelText:`${M.entries.Lcz_GuestRemark}:`,display:"inline",content:this.bookingEvent.NOTES}),a("ir-label",{containerStyle:{padding:"0",margin:"0"},labelText:`${M.entries.Lcz_ChannelNotes}:`,display:"inline",content:this.getOTANotes(),renderContentAsHtml:true}),this.getInternalNote()&&a("ir-label",{labelText:`${M.entries.Lcz_InternalRemark}:`,content:this.getInternalNote()}),a("div",{class:"row p-0 m-0 mt-2"},a("div",{class:"full-width d-flex align-items-center",style:{gap:"0.25rem"},role:"group"},a("ir-custom-button",{style:{width:"100%"},variant:"brand",onClickHandler:()=>this.handleEditBooking()},"Edit"),a("ir-custom-button",{style:{width:"100%"},variant:"brand",appearance:"outlined",onClickHandler:()=>this.handleReallocationBooking()},"Reassign"),this.bookingEvent.is_direct&&this.bookingEvent.IS_EDITABLE&&!this.hideButtons&&a("ir-custom-button",{style:{width:"100%"},variant:"brand",appearance:"outlined",onClickHandler:()=>this.handleAddRoom()},M.entries.Lcz_AddRoom),this.canSplitBooking()&&a("ir-custom-button",{style:{width:"100%"},variant:"brand",appearance:"outlined",onClickHandler:()=>this.handleSplitBooking()},"Split"),this.canCheckIn()&&a("ir-custom-button",{style:{width:"100%"},onClickHandler:()=>this.handleCustomerCheckIn(),variant:"brand",appearance:"outlined"},M.entries.Lcz_CheckIn),this.canCheckOut()&&a("ir-custom-button",{style:{width:"100%"},variant:"brand",appearance:"outlined",onClickHandler:()=>this.handleCustomerCheckOut()},M.entries.Lcz_CheckOut),this.hideButtons?null:!this.shouldHideUnassignUnit&&a("ir-custom-button",{variant:"danger",style:{width:"100%"},appearance:"outlined",onClickHandler:e=>{this.handleDeleteEvent()}},M.entries.Lcz_Unassign))))}handleReallocationBooking(){this.hideBubble();this.openCalendarSidebar.emit({type:"reallocate-drawer",payload:{booking:this.bookingEvent.base_booking,pool:this.bookingEvent.POOL,identifier:this.bookingEvent.IDENTIFIER}})}handleSplitBooking(){this.hideBubble();this.openCalendarSidebar.emit({type:"split",payload:{booking:this.bookingEvent.base_booking,identifier:this.bookingEvent.IDENTIFIER}})}getNewBookingOptions(){const e=this.bookingEvent.roomsInfo[0].rateplans.some((e=>e.is_active));return a("div",{class:`iglPopOver d-flex flex-column newBookingOptions ${this.bubbleInfoTop?"bubbleInfoAbove":""} text-left`,style:{gap:"0.5rem"}},this.renderPointer(),e?a(o,null,a("ir-custom-button",{variant:"brand",appearance:"accent","data-testid":"bar_booking_btn",onClickHandler:e=>{this.handleBookingOption("BAR_BOOKING")}},M.entries.Lcz_CreateNewBooking),this.hasSplitBooking()&&a("ir-custom-button",{variant:"neutral",appearance:"accent",onClickHandler:e=>{this.handleBookingOption("SPLIT_BOOKING")}},M.entries.Lcz_AssignUnitToExistingBooking)):a("p",{class:"text-danger"},M.entries.Lcz_NoRatePlanDefined),a("ir-custom-button",{appearance:"accent",variant:"danger",onClickHandler:e=>{this.handleBookingOption("BLOCK_DATES")}},M.entries.Lcz_Blockdates))}getBlockedView(){console.log("booking event",this.bookingEvent);return a("div",{class:`iglPopOver blockedView ${this.bubbleInfoTop?"bubbleInfoAbove":""} text-left`},this.renderPointer(),a("igl-block-dates-view",{isEventHover:true,entryHour:this.bookingEvent.ENTRY_HOUR,entryMinute:this.bookingEvent.ENTRY_MINUTE,defaultData:this.bookingEvent,fromDate:this.bookingEvent.defaultDates.from_date,toDate:this.bookingEvent.defaultDates.to_date,entryDate:this.getEntryDate(),onDataUpdateEvent:e=>this.handleBlockDateUpdate(e)}),a("div",{class:"row p-0 m-0 mt-2"},a("div",{class:"full-width d-flex align-items-center",style:{gap:"0.25rem"},role:"group"},a("ir-custom-button",{disabled:this.isLoading==="update",onClickHandler:e=>{this.handleUpdateBlockedDates()},variant:"brand",loading:this.isLoading==="update",style:{width:"100%"}},M.entries.Lcz_Update),a("ir-custom-button",{variant:"brand",appearance:"outlined",style:{width:"100%"},onClickHandler:()=>{this.handleConvertBlockedDateToBooking()}},M.entries.Lcz_ConvertSplitBooking),a("ir-custom-button",{variant:"danger",style:{width:"100%"},appearance:"outlined",onClickHandler:e=>{this.handleDeleteEvent()}},M.entries.Lcz_Delete))))}renderPointer(){return a("div",{class:`bubblePointer ${this.bubbleInfoTop?"bubblePointTop":"bubblePointBottom"}`})}render(){return a(i,{key:"117cae354d219488bf5f8de58e8bffa7a4269e70"},this.isBlockedDateEvent()?this.getBlockedView():null,this.isNewBooking()?this.getNewBookingOptions():null,!this.isBlockedDateEvent()&&!this.isNewBooking()?this.getInfoElement():null)}static get watchers(){return{bookingEvent:["handleBookingEventChange"]}}};tt.style=et;class at{isActive=false;onIntercept;constructor(e){this.onIntercept=e.onIntercept??(()=>{});if(e.autoActivate){this.activate()}}activate(){if(this.isActive)return;window.addEventListener("beforeunload",this.handleBeforeUnload,{capture:true});this.isActive=true}deactivate(){if(!this.isActive)return;window.removeEventListener("beforeunload",this.handleBeforeUnload,{capture:true});this.isActive=false}handleBeforeUnload=e=>{this.onIntercept();e.preventDefault();e.returnValue=""}}const it=".sc-igl-bulk-block-h{display:flex;flex-direction:column;flex:1 1 0%;height:100%}.bulk-sheet-container.sc-igl-bulk-block{display:flex;flex-direction:column;flex:1;min-height:0;gap:1rem}.animated-container.sc-igl-bulk-block{transition:all 0.5s ease}.physical-room.sc-igl-bulk-block{margin-left:1rem !important;padding-top:0.5rem}.physical-room.sc-igl-bulk-block>td.sc-igl-bulk-block:last-child{padding-left:1rem}.room-type-list.sc-igl-bulk-block{padding:0;margin:0}.room-type-list.sc-igl-bulk-block>li.sc-igl-bulk-block,.physical-room.sc-igl-bulk-block,.room-type-row.sc-igl-bulk-block{list-style:none}";const rt=it;const ot=".sc-igl-bulk-block-h{height:100%}.sheet-container.sc-igl-bulk-block{display:flex !important;flex-direction:column !important;background:white;height:100vh;gap:1rem;z-index:1000}.sheet-container.sc-igl-bulk-block{height:-webkit-fill-available;height:100vh;height:100dvh}.sheet-footer.sc-igl-bulk-block{position:sticky;bottom:0;z-index:20;background:white;border-top:1px solid #e4e5ec;display:flex;flex-direction:column;padding:1rem;gap:0.5rem}.sheet-header.sc-igl-bulk-block{position:sticky;top:0;z-index:10;background:white}.sheet-body.sc-igl-bulk-block{flex:1 1 0%}@media (min-width: 768px){.sheet-footer.sc-igl-bulk-block{flex-direction:row;align-items:center}}";const nt=ot;const st=class{constructor(a){e(this,a);this.closeModal=t(this,"closeModal",7);this.toast=t(this,"toast",7)}maxDatesLength=8;property_id;selectedRoomTypes=new Map;selectedUnit=null;errors;isLoading;blockState="block";dates=[{from:null,to:null}];closeModal;toast;sidebar;dateRefs=[];reloadInterceptor;minDate=me().format("YYYY-MM-DD");bookingService=new s;datesSchema=Z.array(Z.object({from:Z.any().refine((e=>me.isMoment(e)),{message:"Invalid 'from' date; expected a Moment object."}).transform((e=>e.format("YYYY-MM-DD"))),to:Z.any().refine((e=>me.isMoment(e)),{message:"Invalid 'to' date; expected a Moment object."}).transform((e=>e.format("YYYY-MM-DD")))}));unitSections;datesSections;componentDidLoad(){this.reloadInterceptor=new at({autoActivate:false});this.sidebar=document.querySelector("ir-sidebar")}disconnectedCallback(){this.reloadInterceptor.deactivate()}async addBlockDates(){try{this.errors=null;this.isLoading=true;const e=this.datesSchema.parse(this.dates);if(!this.selectedUnit){this.unitSections.scrollIntoView({behavior:"smooth",block:"center"});this.errors="rooms";return}if(this.blockState==="block"){await this.bookingService.blockAvailabilityForBrackets({unit_id:this.selectedUnit?.unit_id,description:"",property_id:S.property.id,block_status_code:"002",brackets:e.map((e=>({from_date:e.from,to_date:e.to})))})}else{await this.bookingService.unBlockUnitByPeriod({unit_id:this.selectedUnit?.unit_id,from_date:e[0].from,to_date:e[0].to})}this.activate();this.deactivate();this.toast.emit({type:"success",title:M.entries.Lcz_RequestSubmittedSuccessfully,description:""});this.isLoading=false;this.closeModal.emit()}catch(e){console.log(e);if(e instanceof ee){this.datesSections.scrollIntoView({behavior:"smooth",block:"center"});this.errors="dates"}}finally{this.isLoading=false}}activate(){this.reloadInterceptor.activate();if(this.sidebar)this.sidebar.preventClose=true}deactivate(){this.reloadInterceptor.deactivate();if(this.sidebar)this.sidebar.preventClose=false}handleDateChange({index:e,date:t,key:a}){const i=[...this.dates];i[e]={...i[e],[a]:t};if(a==="from"&&i[e].to?.isBefore(t,"dates")){i[e].to=null}for(let a=e+1;a<i.length;a++){const e=i[a]?.from;if(e&&e.isSameOrBefore(t,"day")){i[a]={from:null,to:null}}}this.dates=i;setTimeout((()=>{if(a==="from"){this.dateRefs[e]?.to.openDatePicker()}else{const e=i.findIndex((e=>e.from===null));if(e>-1){this.dateRefs[e]?.from.openDatePicker()}}}),100)}addDateRow(){const e=this.dates[this.dates.length-1];if(!e.from||!e.to){this.errors="dates";return}this.errors=null;this.dates=[...this.dates,{from:null,to:null}];setTimeout((()=>{this.dateRefs[this.dates.length-1].to?.scrollIntoView({behavior:"smooth",block:"center"})}),100)}render(){return a("form",{key:"33748596796bd080cf172493251c51dbb367d804",class:"bulk-sheet-container",onSubmit:e=>{e.preventDefault();this.addBlockDates()}},a("div",{key:"f4e8cddb3ef7f32c71d338ba57d04c6a233f29ca",class:"sheet-body px-1"},a("div",{key:"61e787ce0facc0d6faa2e56efffddb4836aaf608",class:"text-muted text-left pt-0 my-0 d-flex align-items-center pb-1",style:{gap:"0.5rem"}},a("p",{key:"4306b85d6501a582151cc5a1b9abfd059b1bcd0f",class:"m-0 p-0"},"Select the unit to"),a("ir-select",{key:"8fa0ba741df7545077afaff642004fe8b7498f1f",showFirstOption:false,selectedValue:this.blockState,data:[{text:"Block",value:"block"},{text:"Unblock",value:"unblock"}],onSelectChange:e=>{this.blockState=e.detail}})),a("div",{key:"7fe440635a2d3040dd0bd2757c8e71b356249d3d"},this.errors==="rooms"&&a("p",{key:"0498c9885987ec45d2201694870f47c4fa662e89",class:"text-danger text-left smaller p-0 ",style:{"margin-bottom":"0.5rem"}},S.is_vacation_rental?M.entries.Lcz_PlzSelectOneListing:M.entries.Lcz_PlzSelectOneUnit),a("ul",{key:"514cd13f017f287d05b1c1e0f2853f525309a2eb",class:"room-type-list",ref:e=>this.unitSections=e},S.roomsInfo.map((e=>a(o,null,a("li",{key:`roomTypeRow-${e.id}`,class:`room-type-row`},a("div",{class:"d-flex choice-row"},a("span",{class:"pl-1 text-left room-type-name"},e.name))),e.physicalrooms.map(((t,i)=>{const r=i===e.physicalrooms.length-1?"pb-1":"";return a("li",{key:`physicalRoom-${t.id}-${i}`,class:`physical-room ${r}`},a("div",{class:"d-flex choice-row"},a("ir-radio",{class:"pl-1 ",name:"unit",checked:this.selectedUnit?.unit_id===t.id,onCheckChange:()=>this.selectedUnit={roomtype_id:e.id,unit_id:t.id},label:t.name})))}))))))),a("table",{key:"21311c8bcd0ef6996e392ea6f6cc4d716ac01cfb",class:"mt-1",ref:e=>this.datesSections=e},a("thead",{key:"3701d6f098fad91c43bd13120c1a0c30c6d6792c"},a("tr",{key:"e1d44930e83e85f4faeaee0f88f7e9d4660f0b91"},a("th",{key:"f6a69764691e907c5f66d96bf749d85cc8f3a615",class:"text-left"},M.entries.Lcz_From),a("th",{key:"a7f6ad00bea6033f0188b8a7ce9d8fa5c994ae9c",class:"text-left"},M.entries.Lcz_ToExclusive),a("td",{key:"14fae7e742fc62cab2c4467bc4418b981e1ce516"},this.dates.length!==this.maxDatesLength&&this.blockState==="block"&&a("ir-button",{key:"f7a156ceefe0d03cde6a75c9110b84348cbbc27e",variant:"icon",icon_name:"plus",onClickHandler:()=>{this.addDateRow()}})))),a("tbody",{key:"b5d8a52e40918fb413f6f0b2d2f44c758591b20f"},this.dates.map(((e,t)=>{if(!this.dateRefs[t]){this.dateRefs[t]={}}const i=t>0?this.dates[t-1]?.to.clone().add(1,"days")?.format("YYYY-MM-DD")??this.minDate:this.minDate;const r=this.dates[t].from?this.dates[t]?.from.clone().add(1,"days")?.format("YYYY-MM-DD"):this.minDate;return a("tr",{key:`date_${t}`},a("td",{class:"pr-1 pb-1"},a("ir-date-picker",{ref:e=>{this.dateRefs[t].from=e},forceDestroyOnUpdate:true,minDate:i,"data-testid":"pickup_arrival_date",date:e.from?.format("YYYY-MM-DD"),emitEmptyDate:true,"aria-invalid":String(this.errors==="dates"&&!e.from),onDateChanged:e=>{e.stopImmediatePropagation();e.stopPropagation();this.handleDateChange({index:t,date:e.detail.start,key:"from"})},onDatePickerFocus:e=>{e.stopImmediatePropagation();e.stopPropagation();if(t===0){return}const a=this.dates.findIndex((e=>!e.from||!e.to));if(!this.dates[a]?.from){this.dateRefs[a]?.from.openDatePicker();return}if(!this.dates[a]?.to){this.dateRefs[a].to.openDatePicker()}}},a("input",{type:"text",slot:"trigger",value:e.from?e.from.format("MMM DD, YYYY"):null,class:`form-control input-sm ${this.errors==="dates"&&!e.to?"border-danger":""} text-center`,style:{width:"100%"}}))),a("td",{class:"pr-1 pb-1"},a("ir-date-picker",{forceDestroyOnUpdate:true,ref:e=>{this.dateRefs[t].to=e},"data-testid":"pickup_arrival_date",date:e.to?.format("YYYY-MM-DD"),emitEmptyDate:true,minDate:r,"aria-invalid":String(this.errors==="dates"&&!e.to),onDateChanged:e=>{e.stopImmediatePropagation();e.stopPropagation();this.handleDateChange({index:t,date:e.detail.start,key:"to"})},maxDate:e.from?me(e.from).add(3,"months").format("YYYY-MM-DD"):undefined,onDatePickerFocus:e=>{e.stopImmediatePropagation();e.stopPropagation();const t=this.dates.findIndex((e=>!e.from||!e.to));if(!this.dates[t]?.from){this.dateRefs[t]?.from?.openDatePicker();return}if(!this.dates[t]?.to){this.dateRefs[t].to.openDatePicker()}}},a("input",{type:"text",slot:"trigger",value:e.to?e.to.format("MMM DD, YYYY"):null,class:`form-control input-sm \n                          ${this.errors==="dates"&&!e.to?"border-danger":""}\n                          text-center`,style:{width:"100%"}}))),t>0&&a("td",{class:"pb-1"},a("ir-button",{variant:"icon",icon_name:"minus",onClickHandler:()=>{this.dates=this.dates.filter(((e,a)=>a!==t))}})))}))))),a("div",{key:"11be2ba76d73cc0f6d2603a3e0d82d5262f77c5c",class:"sheet-footer"},a("ir-button",{key:"4f707bfeb9a4bb4bf4575164b006b33c7f300baf",text:M.entries.Lcz_Cancel,btn_color:"secondary",class:"flex-fill",onClickHandler:()=>this.closeModal.emit(null)}),a("ir-button",{key:"37bf1bd998f2c36f5b25c676511b242e7f4fc00b",isLoading:this.isLoading,text:M.entries.Lcz_Confirm,btn_type:"submit",class:"flex-fill"})))}};st.style=rt+nt;const lt=".bulk-operations-sheet-container.sc-igl-bulk-operations{display:flex;flex-direction:column;height:auto !important;min-height:100vh;background:white !important}.animated-container.sc-igl-bulk-operations{transition:all 0.5s ease}.tabs.sc-igl-bulk-operations{position:sticky;top:var(--ir-tabs-top, 54px);background-color:white;z-index:9999999;padding-top:1rem;margin-bottom:1rem}";const ct=lt;const dt=".sc-igl-bulk-operations-h{height:100%}.sheet-container.sc-igl-bulk-operations{display:flex !important;flex-direction:column !important;background:white;height:100vh;gap:1rem;z-index:1000}.sheet-container.sc-igl-bulk-operations{height:-webkit-fill-available;height:100vh;height:100dvh}.sheet-footer.sc-igl-bulk-operations{position:sticky;bottom:0;z-index:20;background:white;border-top:1px solid #e4e5ec;display:flex;flex-direction:column;padding:1rem;gap:0.5rem}.sheet-header.sc-igl-bulk-operations{position:sticky;top:0;z-index:10;background:white}.sheet-body.sc-igl-bulk-operations{flex:1 1 0%}@media (min-width: 768px){.sheet-footer.sc-igl-bulk-operations{flex-direction:row;align-items:center}}";const ht=dt;const pt=class{constructor(a){e(this,a);this.closeModal=t(this,"closeModal",7);this.toast=t(this,"toast",7)}maxDatesLength=8;property_id;closeModal;toast;selectedTab;tabs=[{id:"stop-sale",label:"Stop/Open Sale"},{id:"block",label:"Block Unit"}];tabsEl;titleEl;componentDidLoad(){this.tabsEl.style.setProperty("--ir-tabs-top",this.titleEl?.getBoundingClientRect()?.height?.toString()+"px")}render(){return a("div",{key:"71663a4b8a682003f4c91f06c40b2c33a7ced5f5",class:"bulk-operations-sheet-container"},a("div",{key:"9d3e4b09068494ccea144e9ee1b5c5f966df7b79",class:"sheet-header d-flex align-items-center"},a("ir-title",{key:"1f85e73d0a2abdede124b9479c6ec447e8a2106e",ref:e=>this.titleEl=e,onCloseSideBar:e=>{e.stopImmediatePropagation();e.stopPropagation();this.closeModal.emit(null)},class:"px-1 mb-0",label:"Bulk Operations",displayContext:"sidebar"})),a("ir-tabs",{key:"4baf2811042c27e7ad9dd4167a63217791020609",ref:e=>this.tabsEl=e,class:"tabs",tabs:this.tabs,onTabChanged:e=>this.selectedTab=e.detail}),this.selectedTab?.id==="stop-sale"?a("igl-bulk-stop-sale",{maxDatesLength:this.maxDatesLength,property_id:this.property_id}):a("igl-bulk-block",{maxDatesLength:this.maxDatesLength,property_id:this.property_id}))}};pt.style=ct+ht;const ut=".sc-igl-bulk-stop-sale-h{display:flex;flex-direction:column;flex:1 1 0%;height:100%}.bulk-sheet-container.sc-igl-bulk-stop-sale{display:flex;flex-direction:column;flex:1;min-height:0;gap:1rem}.animated-container.sc-igl-bulk-stop-sale{transition:all 0.5s ease}.days-checkbox.sc-igl-bulk-stop-sale{gap:0.5rem}";const ft=ut;const gt=".sc-igl-bulk-stop-sale-h{height:100%}.sheet-container.sc-igl-bulk-stop-sale{display:flex !important;flex-direction:column !important;background:white;height:100vh;gap:1rem;z-index:1000}.sheet-container.sc-igl-bulk-stop-sale{height:-webkit-fill-available;height:100vh;height:100dvh}.sheet-footer.sc-igl-bulk-stop-sale{position:sticky;bottom:0;z-index:20;background:white;border-top:1px solid #e4e5ec;display:flex;flex-direction:column;padding:1rem;gap:0.5rem}.sheet-header.sc-igl-bulk-stop-sale{position:sticky;top:0;z-index:10;background:white}.sheet-body.sc-igl-bulk-stop-sale{flex:1 1 0%}@media (min-width: 768px){.sheet-footer.sc-igl-bulk-stop-sale{flex-direction:row;align-items:center}}";const bt=gt;const wt=class{constructor(a){e(this,a);this.closeModal=t(this,"closeModal",7);this.toast=t(this,"toast",7)}maxDatesLength=8;property_id;selectedRoomTypes=[];errors;isLoading;dates=[{from:null,to:null}];selectedWeekdays=new Set(Array(7).fill(null).map(((e,t)=>t)));closeModal;toast;sidebar;dateRefs=[];reloadInterceptor;minDate=me().format("YYYY-MM-DD");bookingService=new s;getDayIndex(e){return me(e,"YYYY-MM-DD").day()}datesSchema=Z.array(Z.object({from:Z.any().refine((e=>me.isMoment(e)),{message:"Invalid 'from' date; expected a Moment object."}).transform((e=>e.format("YYYY-MM-DD"))),to:Z.any().refine((e=>me.isMoment(e)),{message:"Invalid 'to' date; expected a Moment object."}).transform((e=>e.format("YYYY-MM-DD")))}));unitSections;weekdaysSections;datesSections;componentDidLoad(){this.reloadInterceptor=new at({autoActivate:false});this.sidebar=document.querySelector("ir-sidebar")}disconnectedCallback(){this.reloadInterceptor.deactivate()}async addBlockDates(){const e=e=>{const t=[];for(const a of e){let e=a.from;const i=me(a.to,"YYYY-MM-DD").add(1,"days").format("YYYY-MM-DD");while(e!==i){const a=me(e,"YYYY-MM-DD").add(1,"days").format("YYYY-MM-DD");if(!this.selectedWeekdays.has(this.getDayIndex(e))){e=a;continue}for(const a of this.selectedRoomTypes){t.push({room_type_id:a.id,night:e})}e=a}}return t};const t=e=>{const t=new Map(oe.disabled_cells);const a=new Map(S.roomsInfo.map(((e,t)=>[e.id,{roomType:e,index:t}])));const i=new Map(oe.days.map(((e,t)=>[e.value,t])));const r=new Map;for(const o of e){for(const e of o.restrictions){const{night:n,room_type_id:s}=e;const{roomType:l}=a.get(s);if(!l)continue;const c=i.get(n);if(c===undefined){console.warn(`Couldn't find date ${n}`);continue}const d=oe.days[c];const h=`${s}_${n}`;let p=r.get(h);if(!p){p=d.rate.find((e=>e.id===s));if(!p){console.warn(`Couldn't find room type ${s}`);continue}r.set(h,p)}const u=p.exposed_inventory.rts===0;for(const e of l.physicalrooms){const a=`${e.id}_${n}`;t.set(a,{disabled:o.is_closed?true:u,reason:o.is_closed?"stop_sale":u?"inventory":"stop_sale"})}}}oe["disabled_cells"]=new Map(t)};try{this.errors=null;this.isLoading=true;const a=this.datesSchema.parse(this.dates);if(this.selectedRoomTypes.length===0){this.unitSections.scrollIntoView({behavior:"smooth",block:"center"});this.errors="rooms";return}if(this.selectedWeekdays.size===0){this.weekdaysSections.scrollIntoView({behavior:"smooth",block:"center"});this.errors="weekdays";return}this.activate();const i=e(a);const r=this.selectedRoomTypes.every((e=>e.result==="open"));const o=this.selectedRoomTypes.every((e=>e.result==="closed"));if(o||r){const e={is_closed:o,restrictions:i,property_id:this.property_id};await this.bookingService.setExposedRestrictionPerRoomType(e);t([e])}else{const e=[];for(const t of this.selectedRoomTypes){const a=i.filter((e=>e.room_type_id===t.id));e.push({is_closed:t.result==="closed",restrictions:a,property_id:this.property_id})}await Promise.all(e.map((e=>this.bookingService.setExposedRestrictionPerRoomType(e))));t(e)}this.deactivate();this.toast.emit({type:"success",title:M.entries.Lcz_RequestSubmittedSuccessfully,description:""});this.isLoading=false;this.closeModal.emit()}catch(e){console.log(e);if(e instanceof ee){this.datesSections.scrollIntoView({behavior:"smooth",block:"end"});this.errors="dates"}}finally{this.isLoading=false}}activate(){this.reloadInterceptor.activate();if(this.sidebar)this.sidebar.preventClose=true}deactivate(){this.reloadInterceptor.deactivate();if(this.sidebar)this.sidebar.preventClose=false}handleDateChange({index:e,date:t,key:a}){const i=[...this.dates];i[e]={...i[e],[a]:t};if(a==="from"&&i[e].to?.isBefore(t,"dates")){i[e].to=null}for(let a=e+1;a<i.length;a++){const e=i[a]?.from;if(e&&e.isSameOrBefore(t,"day")){i[a]={from:null,to:null}}}this.dates=i;setTimeout((()=>{if(a==="from"){this.dateRefs[e]?.to.openDatePicker()}else{const e=i.findIndex((e=>e.from===null));if(e>-1){this.dateRefs[e]?.from.openDatePicker()}}}),100)}addDateRow(){const e=this.dates[this.dates.length-1];if(!e.from||!e.to){this.errors="dates";return}this.errors=null;this.dates=[...this.dates,{from:null,to:null}];setTimeout((()=>{this.dateRefs[this.dates.length-1].to?.scrollIntoView({behavior:"smooth",block:"center"})}),100)}render(){return a("form",{key:"b69c59ee8da7aea660ce6a01b0528b89c3559d80",class:"bulk-sheet-container",onSubmit:e=>{e.preventDefault();this.addBlockDates()}},a("div",{key:"62c7b0c7a637f4674b6d1f8cc419ff33758798e4",class:"sheet-body px-1"},a("div",{key:"43c2398c0ecadbefef576c3687e22a6f739fac23",class:"text-muted text-left py-0 my-0"},a("p",{key:"4facad8495f8dc1f95127e9fee49b2bf14c6bd35"},"Select the types to stop or open sales for all related rate plans")),a("div",{key:"f5639c8baa040eac6cb0ed03b57b7d74dc3964df"},this.errors==="rooms"&&a("p",{key:"eae42b287af8abb40f844462f7912f326e556312",class:"text-danger text-left smaller p-0 ",style:{"margin-bottom":"0.5rem"}},S.is_vacation_rental?M.entries.Lcz_PlzSelectOneListing:M.entries.Lcz_PlzSelectOneUnit),a("table",{key:"e4e928fc131c4e7468a810073124d3b19310938e",ref:e=>this.unitSections=e},a("thead",{key:"cdf5ec8dbebb976f2771f6d5cad4a3a56b22e71a"},a("tr",{key:"ff3a44637be800b2797e7b11193d88b498b5a78a"},a("th",{key:"6fe1f0e55bdcfe59a5d444dda6399ed2d46fc27f",class:"sr-only"},"choice"),a("th",{key:"d16aeb35d59afa5f4c69df944ea17661374e6648",class:"sr-only"},"room type"))),a("tbody",{key:"37b1149efe87b08606ac497d7314f253d66ad7a6"},S.roomsInfo.map(((e,t)=>{const i=t===S.roomsInfo.length-1?"":"pb-1";return a("tr",{key:e.id},a("td",{class:`choice-row ${i}`},a("div",{class:"d-flex justify-content-end"},a("ir-select",{firstOption:`${M.entries.Lcz_Select}...`,data:[{value:"open",text:M.entries.Lcz_Open},{value:"closed",text:M.entries.Lcz_StopSale}],onSelectChange:t=>{const a=t.detail;const i=this.selectedRoomTypes.filter((t=>t.id!==e.id));if(a){i.push({id:e.id,result:a})}this.selectedRoomTypes=i}}))),a("td",{class:`pl-1 text-left ${i}`},e.name))}))))),a("p",{key:"2e15bba48eb30b2bd98ce2440f24277965409638",class:"text-left mt-2 text-muted"},"Included days"),this.errors==="weekdays"&&a("p",{key:"8a0eca6a43c1a519dcf38d4092123f4c89b43d44",class:"text-danger text-left smaller m-0 p-0"},"Please select at least one day"),a("ir-weekday-selector",{key:"2552fbee752812a62816de759d14cba3d1c6b329",ref:e=>this.weekdaysSections=e,weekdays:Array.from(this.selectedWeekdays),onWeekdayChange:e=>{e.stopPropagation();e.stopImmediatePropagation();this.selectedWeekdays=new Set(e.detail)}}),a("table",{key:"01f22e7d110d4a5af73e9501e4826a71139c166c",class:"mt-1",ref:e=>this.datesSections=e},a("thead",{key:"4ec04f3b5fcfb19e11e774cac5dd82caf4e24e8d"},a("tr",{key:"b9e2d9ac62ac43b8b33e2671bdd15b6ab1f5ba4d"},a("th",{key:"0abb55a177de1108e825a09f1570559fb4ece703",class:"text-left"},M.entries.Lcz_From),a("th",{key:"a3758415535093d278d59b0501a4590cfc8e2757",class:"text-left"},M.entries.Lcz_ToExclusive),a("td",{key:"8bd6b4890289f3135d865ebab4a9a3495dd32ab5"},this.dates.length!==this.maxDatesLength&&a("ir-button",{key:"92cb2c6ee80ee05e1e2e9ef91398fab083109092",variant:"icon",icon_name:"plus",onClickHandler:()=>{this.addDateRow()}})))),a("tbody",{key:"a5833bb1e9a12735d25ff5fe27d2271c4185ea6d"},this.dates.map(((e,t)=>{if(!this.dateRefs[t]){this.dateRefs[t]={}}const i=t>0?this.dates[t-1]?.to.clone().add(1,"days")?.format("YYYY-MM-DD")??this.minDate:this.minDate;const r=this.dates[t].from?this.dates[t]?.from.clone()?.format("YYYY-MM-DD"):this.minDate;return a("tr",{key:`date_${t}`},a("td",{class:"pr-1 pb-1"},a("ir-date-picker",{ref:e=>{this.dateRefs[t].from=e},forceDestroyOnUpdate:true,minDate:i,"data-testid":"pickup_arrival_date",date:e.from?.format("YYYY-MM-DD"),emitEmptyDate:true,"aria-invalid":String(this.errors==="dates"&&!e.from),onDateChanged:e=>{e.stopImmediatePropagation();e.stopPropagation();this.handleDateChange({index:t,date:e.detail.start,key:"from"})},onDatePickerFocus:e=>{e.stopImmediatePropagation();e.stopPropagation();if(t===0){return}const a=this.dates.findIndex((e=>!e.from||!e.to));if(!this.dates[a]?.from){this.dateRefs[a]?.from.openDatePicker();return}if(!this.dates[a]?.to){this.dateRefs[a].to.openDatePicker()}}},a("input",{type:"text",slot:"trigger",value:e.from?e.from.format("MMM DD, YYYY"):null,class:`form-control input-sm ${this.errors==="dates"&&!e.to?"border-danger":""} text-center`,style:{width:"100%"}}))),a("td",{class:"pr-1 pb-1"},a("ir-date-picker",{forceDestroyOnUpdate:true,ref:e=>{this.dateRefs[t].to=e},"data-testid":"pickup_arrival_date",date:e.to?.format("YYYY-MM-DD"),emitEmptyDate:true,minDate:r,"aria-invalid":String(this.errors==="dates"&&!e.to),onDateChanged:e=>{e.stopImmediatePropagation();e.stopPropagation();this.handleDateChange({index:t,date:e.detail.start,key:"to"})},onDatePickerFocus:e=>{e.stopImmediatePropagation();e.stopPropagation();const t=this.dates.findIndex((e=>!e.from||!e.to));if(!this.dates[t]?.from){this.dateRefs[t]?.from?.openDatePicker();return}if(!this.dates[t]?.to){this.dateRefs[t].to.openDatePicker()}}},a("input",{type:"text",slot:"trigger",value:e.to?e.to.format("MMM DD, YYYY"):null,class:`form-control input-sm \n                          ${this.errors==="dates"&&!e.to?"border-danger":""}\n                          text-center`,style:{width:"100%"}}))),t>0&&a("td",{class:"pb-1"},a("ir-button",{variant:"icon",icon_name:"minus",onClickHandler:()=>{this.dates=this.dates.filter(((e,a)=>a!==t))}})))}))))),a("div",{key:"d3a88337031076f67ff636cc7c9e49a7c232ee78",class:"sheet-footer"},a("ir-button",{key:"74786d3341c62a7c321208bb00faf4ee34f9c5ac",text:M.entries.Lcz_Cancel,btn_color:"secondary",class:"flex-fill",onClickHandler:()=>this.closeModal.emit(null)}),a("ir-button",{key:"6a027a7f57a9e9ad03ae491a29476c625aa89438",isLoading:this.isLoading,text:M.entries.Lcz_Save,btn_type:"submit",class:"flex-fill"})))}};wt.style=ft+bt;const mt=".sc-igl-cal-body-h{display:block;color:var(--wa-color-text-normal)}.bodyContainer.sc-igl-cal-body{position:relative}.roomRow.sc-igl-cal-body{width:max-content}.roomRow.sc-igl-cal-body:first-child{margin-top:80px}.categoryName.sc-igl-cal-body{font-weight:bold;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.cellData.sc-igl-cal-body{background-color:var(--wa-color-surface-default)}.cellData[data-dirty-room='true'].sc-igl-cal-body::after{content:'';position:absolute;bottom:0;height:100%;left:30%;right:30%;background-color:#d4d0be !important}.cellData.disabled.sc-igl-cal-body{background:var(--wa-color-neutral-fill-quiet);cursor:var(--cell-cursor, not-allowed);transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.roomRow.sc-igl-cal-body .room.sc-igl-cal-body{cursor:pointer;transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.roomRow.sc-igl-cal-body .room.sc-igl-cal-body:hover{background:var(--wa-color-neutral-fill-quiet)}.roomRow.sc-igl-cal-body .room.sc-igl-cal-body:hover[data-hk-enabled='false']{background:var(--wa-color-surface-default);cursor:default}.cellData.sc-igl-cal-body{width:58px;height:30px;display:inline-grid;border-top:1px solid var(--wa-color-surface-border);border-left:1px solid var(--wa-color-surface-border);vertical-align:top}.triangle-button.sc-igl-cal-body{--size:10px;position:absolute;right:-6px;top:-1px;width:0;height:0;padding:0;border:none;background:transparent;cursor:pointer;width:0;height:0;border-left:var(--size) solid transparent;border-right:var(--size) solid transparent;border-bottom:var(--size) solid var(--wa-color-surface-border);transform:rotate(45deg)}.cellData.sc-igl-cal-body:nth-child(2){border-left:0px}.cellData.sc-igl-cal-body:last-child{border-right:1px solid var(--wa-color-surface-border)}.roomHeaderCell.sc-igl-cal-body{position:-webkit-sticky;position:sticky;left:0;background:var(--wa-color-surface-default);border-inline-end:1px solid var(--wa-color-surface-border);width:170px;z-index:1;border-inline-start:0px}.currentDay.sc-igl-cal-body{background-color:var(--wa-color-brand-fill-quiet)}.dragOverHighlight.sc-igl-cal-body{background-color:#f5f5dc !important}.selectedDay.sc-igl-cal-body{background-color:#f9f9c9 !important}.categoryTitle.sc-igl-cal-body{grid-template-columns:1fr 20px;padding-left:10px;cursor:pointer;height:40px;font-size:0.9em}.categoryTitle.sc-igl-cal-body>.sc-igl-cal-body:nth-child(1){white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.roomTitle.sc-igl-cal-body{padding-left:20px;font-size:0.9em;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.roomTitle.sc-igl-cal-body>.sc-igl-cal-body:nth-child(1){white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.roomTitle.pl10.sc-igl-cal-body{padding-left:10px}.categoryPriceColumn.sc-igl-cal-body{align-items:center;height:40px;-webkit-user-select:none;user-select:none;position:relative}.bookingEventsContainer.sc-igl-cal-body{position:absolute;top:0;left:0}.roomTitle[data-room-has-today-checkin='true'].sc-igl-cal-body{--ir-interactive-hk-bg:var(--wa-color-brand-fill-quiet);color:var(--wa-color-brand-on-quiet);background-color:var(--wa-color-brand-fill-quiet) !important}";const vt=mt;const yt=class{constructor(a){e(this,a);this.addBookingDatasEvent=t(this,"addBookingDatasEvent",7);this.showBookingPopup=t(this,"showBookingPopup",7);this.scrollPageToRoom=t(this,"scrollPageToRoom",7)}isScrollViewDragging;propertyId;calendarData;today;currency;language;countries;highlightedDate;dragOverElement="";renderAgain=false;selectedRoom=null;selectedRooms={};addBookingDatasEvent;showBookingPopup;scrollPageToRoom;fromRoomId=-1;newEvent;currentDate=new Date;bookingMap=new Map;interactiveTitle=[];dayRateMap=new Map;roomsWithTodayCheckinStatus=new Set;categoriesWithTodayCheckinStatus=new Set;componentWillLoad(){this.currentDate.setHours(0,0,0,0);this.bookingMap=this.getBookingMap(this.getBookingData());this.updateTodayCheckinStatus();oe.days.forEach((e=>{this.dayRateMap.set(e.day,e.rate)}));this.updateDisabledCellsCache()}handleCalendarDataChange(){this.bookingMap=this.getBookingMap(this.getBookingData());this.updateTodayCheckinStatus();this.updateDisabledCellsCache()}handleTodayChange(){this.updateTodayCheckinStatus()}dragOverHighlightElementHandler(e){this.dragOverElement=e.detail.dragOverElement}gotoRoom(e){let t=e.detail.roomId;let a=this.getRoomCategoryByRoomId(t);if(!a.expanded){this.toggleCategory(a);setTimeout((()=>{this.scrollToRoom(t)}),10)}else{this.scrollToRoom(t)}}addToBeAssignedEvents(e){this.addBookingDatas(e.detail.data);this.renderElement()}closeWindow(){let e=this.getBookingData().findIndex((e=>e.ID==="NEW_TEMP_EVENT"));if(e!==-1){this.getBookingData().splice(e,1);console.log("removed item..");this.renderElement()}}scrollToRoom(e){this.scrollPageToRoom.emit({key:"scrollPageToRoom",id:e,refClass:"room_"+e})}getRoomCategoryByRoomId(e){return this.calendarData.roomsInfo.find((t=>this.getRoomtypeUnits(t).find((t=>this.getRoomId(t)===e))))}getCategoryName(e){return e.name}getCategoryId(e){return e.id}getTotalPhysicalRooms(e){return this.getRoomtypeUnits(e).length}getRoomtypeUnits(e){return e&&e.physicalrooms||[]}getRoomName(e){return e.name}getRoomId(e){return e.id}getRoomById(e,t){return e.find((e=>this.getRoomId(e)===t))}getBookingData(){return this.calendarData.bookingEvents??[]}addBookingDatas(e){this.addBookingDatasEvent.emit(e)}getSelectedCellRefName(e,t){return"room_"+e+"_"+t.currentDate}getSplitBookingEvents(e){console.log(e.FROM_DATE);return this.getBookingData().some((t=>{if(!["003","002","004"].includes(t.STATUS_CODE)){if(new Date(e.FROM_DATE).getTime()>=new Date(t.FROM_DATE).getTime()&&new Date(e.FROM_DATE).getTime()<=new Date(t.TO_DATE).getTime()){return t}}}))}addNewEvent(e){let t=Object.keys(this.selectedRooms);let i,r;if(this.selectedRooms[t[0]].currentDate<this.selectedRooms[t[1]].currentDate){i=new Date(this.selectedRooms[t[0]].currentDate);r=new Date(this.selectedRooms[t[1]].currentDate)}else{i=new Date(this.selectedRooms[t[1]].currentDate);r=new Date(this.selectedRooms[t[0]].currentDate)}const o=Math.round(Math.abs((r.getTime()-i.getTime())/864e5));this.newEvent={ID:"NEW_TEMP_EVENT",NAME:a("span",null,"Â "),EMAIL:"",PHONE:"",convertBooking:false,REFERENCE_TYPE:"PHONE",FROM_DATE:i.getFullYear()+"-"+this.getTwoDigitNumStr(i.getMonth()+1)+"-"+this.getTwoDigitNumStr(i.getDate()),TO_DATE:r.getFullYear()+"-"+this.getTwoDigitNumStr(r.getMonth()+1)+"-"+this.getTwoDigitNumStr(r.getDate()),BALANCE:"",NOTES:"",RELEASE_AFTER_HOURS:0,PR_ID:this.selectedRooms[t[0]].roomId,ENTRY_DATE:"",NO_OF_DAYS:o,ADULTS_COUNT:1,COUNTRY:"",INTERNAL_NOTE:"",RATE:"",TOTAL_PRICE:"",RATE_PLAN:"",ARRIVAL_TIME:"",TITLE:M.entries.Lcz_NewBookingFor,roomsInfo:[e],CATEGORY:e.name,event_type:"BAR_BOOKING",STATUS:"TEMP-EVENT",defaultDateRange:{fromDate:null,fromDateStr:"",toDate:null,toDateStr:"",dateDifference:o,editable:false,message:"Including 5.00% City Tax - Excluding 11.00% VAT"}};let n=e.name+" "+this.getRoomName(this.getRoomById(this.getRoomtypeUnits(e),this.selectedRooms[t[0]].roomId));this.newEvent.BLOCK_DATES_TITLE=`${M.entries.Lcz_BlockDatesFor} ${n}`;this.newEvent.TITLE+=n;this.newEvent.defaultDateRange.toDate=new Date(this.newEvent.TO_DATE+"T00:00:00");this.newEvent.defaultDateRange.fromDate=new Date(this.newEvent.FROM_DATE+"T00:00:00");this.newEvent.defaultDateRange.fromDateStr=this.getDateStr(this.newEvent.defaultDateRange.fromDate);this.newEvent.defaultDateRange.toDateStr=this.getDateStr(this.newEvent.defaultDateRange.toDate);this.newEvent.ENTRY_DATE=(new Date).toISOString();this.newEvent.legendData=this.calendarData.formattedLegendData;let s=this.getSplitBookingEvents(this.newEvent);if(s){this.newEvent.splitBookingEvents=s}this.getBookingData().push(this.newEvent);return this.newEvent}getTwoDigitNumStr(e){return e<=9?"0"+e:e}getDateStr(e,t="default"){return e.getDate()+" "+e.toLocaleString(t,{month:"short"})+" "+e.getFullYear()}removeNewEvent(){this.calendarData.bookingEvents=this.calendarData.bookingEvents.filter((e=>e.ID!=="NEW_TEMP_EVENT"));this.newEvent=null}clickCell(e,t,a){if(!this.isScrollViewDragging&&t.currentDate>=this.currentDate.getTime()){let i=this.getSelectedCellRefName(e,t);if(this.selectedRooms.hasOwnProperty(i)){this.removeNewEvent();delete this.selectedRooms[i];this.renderElement();return}else if(Object.keys(this.selectedRooms).length!=1||this.fromRoomId!=e){this.removeNewEvent();this.selectedRooms={};this.selectedRooms[i]={...t,roomId:e};this.fromRoomId=e;this.renderElement()}else{const r=Object.keys(this.selectedRooms);const o=me(this.selectedRooms[r[0]].value,"YYYY-MM-DD");const n=me(t.value,"YYYY-MM-DD");let s=o.clone().add(1,"days");let l=0;while(s.isBefore(n,"day")){const t=s.format("YYYY-MM-DD");if(this.isCellDisabled(e,t)){l++}s.add(1,"days")}if(l>=1){this.selectedRooms={};this.fromRoomId=e;this.renderElement();return}this.selectedRooms[i]={...t,roomId:e};this.addNewEvent(a);this.selectedRooms={};this.renderElement();this.showNewBookingPopup(this.newEvent)}}}showNewBookingPopup(e){console.log(e)}renderElement(){this.renderAgain=!this.renderAgain}getBookingMap(e){const t=new Map;const a=me().startOf("day");for(const i of e){const e=me(i.FROM_DATE,"YYYY-MM-DD").startOf("day");const r=me(i.TO_DATE,"YYYY-MM-DD").startOf("day");if(a.isSameOrAfter(e)&&a.isSameOrBefore(r)){if(!t.has(i.PR_ID)){t.set(i.PR_ID,i.BOOKING_NUMBER)}else{if(le(me().toDate(),ce(S.checkin_checkout_hours?.offset,S.checkin_checkout_hours?.hour))){t.set(i.PR_ID,i.BOOKING_NUMBER)}}}}return t}getRoomtypeDayInventoryCells(e,t=false,i){return oe.days.map((r=>a("div",{class:`cellData  font-weight-bold categoryPriceColumn ${e+"_"+r.day} ${r.day===this.today||r.day===this.highlightedDate?"currentDay":""}`},t?a(o,null,a("span",{class:"categoryName"},r.rate[i].exposed_inventory.rts)):"")))}getGeneralUnitsDayCells(e,t,i){return this.calendarData.days.map((r=>{const o=this.isCellDisabled(Number(e),r.value);const n=me(r.value,"YYYY-MM-DD").add(-1,"days").format("YYYY-MM-DD");const s=o&&Object.keys(this.selectedRooms).length===0||o&&this.isCellDisabled(Number(e),n);const l=this.selectedRooms.hasOwnProperty(this.getSelectedCellRefName(e,r));const c=r.day===this.today||r.day===this.highlightedDate;const d=oe.cleaningTasks.has(+e)?oe.cleaningTasks.get(+e):null;const h=["001","003"].includes(S.cleaning_frequency?.code)?false:d?.has(r.value);return a("div",{class:`cellData position-relative roomCell ${o?"disabled":""} ${"room_"+e+"_"+r.day} ${c?"currentDay":""} ${this.dragOverElement===e+"_"+r.day?"dragOverHighlight":""} ${l?"selectedDay":""}`,style:!s&&{"--cell-cursor":"default"},onClick:()=>{if(s){return}this.clickCell(Number(e),r,t)},"aria-label":i,role:"gridcell","data-room-id":e,"data-date":r.value,"aria-current":c?"date":undefined,"data-room-name":i,"data-dirty-room":String(h),"aria-disabled":String(s),"aria-selected":Boolean(l)})}))}toggleCategory(e){e.expanded=!e.expanded;this.renderElement()}getRoomtypeRow(e,t){if(this.getTotalPhysicalRooms(e)<=1||!e.is_active){return null}const i=this.categoryHasRoomWithTodayCheckin(e);return a("div",{class:"roomRow","data-has-today-checkin":String(i)},a("div",{class:`cellData text-left align-items-center roomHeaderCell categoryTitle ${"category_"+this.getCategoryId(e)}`,onClick:()=>this.toggleCategory(e),"data-has-today-checkin":String(i)},a("div",{class:"categoryName"},a("ir-interactive-title",{popoverTitle:this.getCategoryName(e)})),e.expanded?a("wa-icon",{name:"angle-down"}):a("wa-icon",{name:"angle-right"})),this.getRoomtypeDayInventoryCells("category_"+this.getCategoryId(e),true,t))}getUnitsByRoomtype(e){const t=this.categoryHasRoomWithTodayCheckin(e);if(!e.expanded){return null}return this.getRoomtypeUnits(e)?.map((i=>{if(!i.is_active){return null}const r=this.getTotalPhysicalRooms(e)<=1;const o=r?this.getCategoryName(e):this.getRoomName(i);const n=this.getRoomId(i);const s=this.roomHasTodayCheckin(n);return a("div",{class:"roomRow","data-room-has-today-checkin":String(s)},a("div",{class:`cellData room text-left align-items-center roomHeaderCell  roomTitle ${this.getTotalPhysicalRooms(e)<=1?"pl10":""} ${"room_"+n}`,"data-room-name":o,"data-hk-enabled":String(S.housekeeping_enabled),"data-room":n,"data-room-has-today-checkin":String(s),"data-category-has-today-checkin":String(t),onClick:()=>{if(!S.housekeeping_enabled){return}this.selectedRoom=i},onMouseEnter:()=>{this.interactiveTitle[i.id]?.style?.setProperty("--ir-interactive-hk-bg",s?"var(--wa-color-brand-fill-quiet)":"var(--wa-color-neutral-fill-quiet)")},onMouseLeave:()=>{this.interactiveTitle[i.id]?.style?.removeProperty("--ir-interactive-hk-bg")}},a("ir-interactive-title",{ref:e=>{if(e)this.interactiveTitle[i.id]=e},style:i.hk_status==="003"&&{"--dot-color":"var(--wa-color-neutral-fill-quiet)"},hkStatus:S.housekeeping_enabled&&i.hk_status!=="001",popoverTitle:o},i.hk_status!=="001"&&a("div",{slot:"end",class:"d-flex align-items-center",style:{gap:"0.5rem"}},i.hk_status!=="003"&&a("wa-tooltip",{for:`${i.id}_hk_status_icon`},i.hk_status==="002"?"This unit is dirty":"Inspected"),a("wa-icon",{id:`${i.id}_hk_status_icon`,name:i.hk_status==="004"?"check":"broom",style:i.hk_status==="004"&&{color:"var(--wa-color-success-fill-loud)"}})))),this.getGeneralUnitsDayCells(this.getRoomId(i),e,o))}))}getRoomRows(){return this.calendarData.roomsInfo?.map(((e,t)=>{if(e.is_active){return a(o,null,this.getRoomtypeRow(e,t),e.expanded&&this.getUnitsByRoomtype(e))}else{return null}}))}getTodayCheckinRoomsAndCategories(){const e=me();const t=new Set;const a=new Set;this.getBookingData().forEach((i=>{const r=i?.ROOM_INFO;if(r?.in_out?.code!=="001"){return}if(me(i.FROM_DATE,"YYYY-MM-DD").isAfter(e,"dates")&&me(i.TO_DATE,"YYYY-MM-DD").isBefore(e,"dates")){return}const o=Number(i.PR_ID);if(!Number.isNaN(o)){t.add(o)}const n=Number(i.RATE_TYPE);if(!Number.isNaN(n)){a.add(n)}}));return{rooms:t,categories:a}}updateTodayCheckinStatus(){const{categories:e,rooms:t}=this.getTodayCheckinRoomsAndCategories();this.roomsWithTodayCheckinStatus=t;this.categoriesWithTodayCheckinStatus=e}roomHasTodayCheckin(e){return this.roomsWithTodayCheckinStatus?.has(e)}categoryHasRoomWithTodayCheckin(e){return this.categoriesWithTodayCheckinStatus.has(this.getCategoryId(e))}updateDisabledCellsCache(){oe.disabled_cells.clear();this.calendarData.roomsInfo?.forEach(((e,t)=>{if(e.is_active){this.getRoomtypeUnits(e)?.forEach((e=>{if(e.is_active){this.calendarData.days.forEach((a=>{const i=this.getCellKey(e.id,a.value);oe.disabled_cells.set(i,{disabled:!a.rate[t].is_available_to_book,reason:"stop_sale"})}))}}))}}))}getCellKey(e,t){return`${e}_${t}`}isCellDisabled(e,t){const a=this.getCellKey(e,t);if(!oe.disabled_cells.has(a)){return false}const{disabled:i}=oe.disabled_cells.get(a);return i}render(){return a(i,{key:"07f6da4f9e796cd378b73f8026f7c020d9ab16b0"},a("div",{key:"c63482097ecf576db910c31d7b5c8b936d0c0d22",class:"bodyContainer"},this.getRoomRows(),a("div",{key:"a76f864e6edb8981308f0cb6e623011bbd6f2775",class:"bookingEventsContainer preventPageScroll"},this.getBookingData()?.map((e=>a("igl-booking-event",{"data-testid":`booking_${e.BOOKING_NUMBER}`,"data-room-name":e.roomsInfo?.find((t=>t.id===e.RATE_TYPE))?.physicalrooms.find((t=>t.id===e.PR_ID))?.name,language:this.language,is_vacation_rental:this.calendarData.is_vacation_rental,countries:this.countries,currency:this.currency,"data-component-id":e.ID,bookingEvent:e,allBookingEvents:this.getBookingData()}))))),a("igl-housekeeping-dialog",{key:"741695d08cb653478eddf3514cd01efc1ddfb4b3",onIrAfterClose:e=>{e.stopImmediatePropagation();e.stopPropagation();this.selectedRoom=null},bookingNumber:this.selectedRoom?this.bookingMap.get(this.selectedRoom?.id):undefined,selectedRoom:this.selectedRoom,open:this.selectedRoom!==null}))}static get watchers(){return{calendarData:["handleCalendarDataChange"],today:["handleTodayChange"]}}};yt.style=vt;const kt=".sc-igl-cal-footer-h{display:block;position:sticky;bottom:0;width:max-content;z-index:3;color:var(--wa-color-text-quiet)}.footerCell.sc-igl-cal-footer{display:-moz-inline-grid;display:-ms-inline-grid;display:inline-grid;position:-webkit-sticky;position:sticky;bottom:0;width:58px;height:40px;background:var(--wa-color-surface-default);vertical-align:top;border-top:1px solid var(--wa-color-surface-border)}.bottomLeftCell.sc-igl-cal-footer{left:-1px;z-index:2;width:170px;text-align:left;padding-left:15px}.footerCell.sc-igl-cal-footer i.sc-igl-cal-footer{margin-right:5px}.legendBtn.sc-igl-cal-footer{color:#41bff3;color:var(--wa-color-text-link);cursor:pointer}.legendBtn.sc-igl-cal-footer:hover{color:color-mix(in oklab, var(--wa-color-text-link), var(--wa-color-mix-hover))}.isOnline.sc-igl-cal-footer i.sc-igl-cal-footer{color:#2f9c3f;font-weight:bold}.isOffline.sc-igl-cal-footer i.sc-igl-cal-footer{font-weight:bold}.isOffline.sc-igl-cal-footer{color:#a40000}.dayTitle.sc-igl-cal-footer{font-size:0.8em;font-weight:600;display:grid;user-select:none}.currentDay.sc-igl-cal-footer .dayTitle.sc-igl-cal-footer{font-weight:bold}.currentDay.sc-igl-cal-footer{background-color:var(--wa-color-brand-fill-quiet)}.dayCapacityPercent.sc-igl-cal-footer{font-size:0.75em}.badge-pill.sc-igl-cal-footer{padding-left:1em;padding-right:1em;font-size:0.7em;margin-bottom:2px}.weekend.sc-igl-cal-footer{font-weight:bold;color:var(--wa-color-text-normal)}";const _t=kt;const xt=class{constructor(a){e(this,a);this.optionEvent=t(this,"optionEvent",7)}optionEvent;calendarData;isLegendOpen=false;today;highlightedDate;_today=me().format("YYYY-MM-DD");handleOptionEvent(e,t=""){this.optionEvent.emit({key:e,data:t})}render(){return a(i,{key:"bbadc9fcc0dc3f6c3c041907dd3e0cef6674dc52",class:"footerContainer"},a("div",{key:"50f1fa2c52a22c716a5bebf5605160565871efb5",class:"footerCell bottomLeftCell align-items-center preventPageScroll",style:{paddingLeft:"10px"}},a("button",{key:"e7bed59deb98138f027576f82034e8e465d76a56",class:"m-0 p-0 btn btn-sm  legendBtn d-flex align-items-center",style:{gap:"0.25rem"},onClick:()=>this.handleOptionEvent("showLegend")},this.isLegendOpen?a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640",height:16,width:16},a("path",{fill:"currentColor",d:"M105.4 297.4C92.9 309.9 92.9 330.2 105.4 342.7L265.4 502.7C277.9 515.2 298.2 515.2 310.7 502.7C323.2 490.2 323.2 469.9 310.7 457.4L173.3 320L310.6 182.6C323.1 170.1 323.1 149.8 310.6 137.3C298.1 124.8 277.8 124.8 265.3 137.3L105.3 297.3zM457.4 137.4L297.4 297.4C284.9 309.9 284.9 330.2 297.4 342.7L457.4 502.7C469.9 515.2 490.2 515.2 502.7 502.7C515.2 490.2 515.2 469.9 502.7 457.4L365.3 320L502.6 182.6C515.1 170.1 515.1 149.8 502.6 137.3C490.1 124.8 469.8 124.8 457.3 137.3z"})):a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640",height:16,width:16},a("path",{fill:"currentColor",d:"M535.1 342.6C547.6 330.1 547.6 309.8 535.1 297.3L375.1 137.3C362.6 124.8 342.3 124.8 329.8 137.3C317.3 149.8 317.3 170.1 329.8 182.6L467.2 320L329.9 457.4C317.4 469.9 317.4 490.2 329.9 502.7C342.4 515.2 362.7 515.2 375.2 502.7L535.2 342.7zM183.1 502.6L343.1 342.6C355.6 330.1 355.6 309.8 343.1 297.3L183.1 137.3C170.6 124.8 150.3 124.8 137.8 137.3C125.3 149.8 125.3 170.1 137.8 182.6L275.2 320L137.9 457.4C125.4 469.9 125.4 490.2 137.9 502.7C150.4 515.2 170.7 515.2 183.2 502.7z"})),a("span",{key:"4eb5ff194da4ace14452c6c262032369f6c0e468"},M.entries.Lcz_Legend),a("span",{key:"3991e8d930100c1c6cd59a6a988c29eae8e06806"},"v1.3"),a("ir-new-badge",{key:"e41811446b7384621c22982fd5981bd5d3283331",style:{marginLeft:"0.25rem"}}))),this.calendarData.days.map((e=>a("div",{class:"footerCell align-items-center"},a("div",{class:{"dayTitle full-height align-items-center":true,weekend:R(e.value),currentDay:e.value===this._today||this.highlightedDate===e.day}},e.dayDisplayName)))))}};xt.style=_t;class Dt{async getUnassignedDates(e,t,a){try{const{data:i}=await ve.post(`/Get_UnAssigned_Dates`,{propertyid:e,from_date:t,to_date:a});if(i.ExceptionMsg!==""){throw new Error(i.ExceptionMsg)}return this.convertUnassignedDates(i.My_Result)}catch(e){console.error(e);throw new Error(e)}}async getUnassignedRooms(e,t,a,i,r){try{const{data:o}=await ve.post(`/Get_Aggregated_UnAssigned_Rooms`,{propertyid:t,specific_date:a});if(o.ExceptionMsg!==""){throw new Error(o.ExceptionMsg)}return this.transformToAssignable(e,o,i,r)}catch(e){console.error(e);throw new Error(e)}}async assignUnit(e){try{const{data:t}=await ve.post(`/Assign_Exposed_Room`,{...e,extras:T});if(t.ExceptionMsg!==""){throw new Error(t.ExceptionMsg)}console.log(t);return t["My_Result"]}catch(e){console.error(e);throw new Error(e)}}cleanSpacesAndSpecialChars(e){const t=/[^a-zA-Z0-9]+/g;return e.replace(t,"")}transformToAssignable(e,t,a,i){const r=[];t.My_Result.forEach((t=>{t.unassigned_rooms.forEach((t=>{let o={roomTypeName:t.room_type_name,ID:t.identifier,NAME:t.guest_name,identifier:t.identifier,FROM_DATE:t.unassigned_date,TO_DATE:t.unassigned_date,BOOKING_NUMBER:t.book_nbr,STATUS:"IN-HOUSE",defaultDateRange:{fromDate:undefined,toDate:undefined,fromDateTimeStamp:0,toDateTimeStamp:0,fromDateStr:"",toDateStr:"",dateDifference:0},NO_OF_DAYS:1,roomsInfo:a,legendData:i,availableRooms:[],RT_ID:this.getRoomTypeId(t.room_type_name,a)};this.updateAvailableRooms(e,t,o,i,a);this.addDefaultDateRange(o);r.push(o)}))}));return r}addDefaultDateRange(e){e.defaultDateRange.fromDate=new Date(e.FROM_DATE+"T00:00:00");e.defaultDateRange.fromDateStr=N(e.defaultDateRange.fromDate);e.defaultDateRange.fromDateTimeStamp=e.defaultDateRange.fromDate.getTime();e.defaultDateRange.toDate=new Date(e.TO_DATE+"T00:00:00");e.defaultDateRange.toDateStr=N(e.defaultDateRange.toDate);e.defaultDateRange.toDateTimeStamp=e.defaultDateRange.toDate.getTime();e.defaultDateRange.dateDifference=e.NO_OF_DAYS}getRoomTypeId(e,t){return t.find((t=>this.cleanSpacesAndSpecialChars(t.name)===this.cleanSpacesAndSpecialChars(e)))?.id||null}updateAvailableRooms(e,t,a,i,r){const o=[];t.assignable_units.forEach((t=>{if(t.Is_Fully_Available&&!t.Is_Not_Available){const n=L(t.from_date,t.to_date);const s=me(new Date(e.from_date)).isAfter(me(new Date(t.from_date)))?e.from_date:t.from_date;const l=me(new Date(e.to_date)).isBefore(me(new Date(t.to_date)))&&me(new Date(e.to_date)).isAfter(me(new Date(t.from_date)))?e.to_date:t.to_date;o.push({RT_ID:a.RT_ID,STATUS:"PENDING-CONFIRMATION",FROM_DATE:s,roomName:t.name,PR_ID:t.pr_id,TO_DATE:l,NO_OF_DAYS:n,ID:"NEW_TEMP_EVENT",NAME:"",NOTES:"",BALANCE:"",INTERNAL_NOTE:"",hideBubble:true,legendData:i,roomsInfo:r});a.TO_DATE=t.to_date;a.NO_OF_DAYS=n}}));a.availableRooms=o}convertUnassignedDates(e){let t={};e.forEach((e=>{let a=new Date(e.date);a.setHours(0,0,0,0);t[a.getTime()]={categories:{},dateStr:e.description}}));return t}}const Ct={unassigned_dates:{}};let{state:Mt,onChange:Yt}=_e(Ct);function St(e){Mt.unassigned_dates={...Mt.unassigned_dates,...e}}function Et(){return Mt.unassigned_dates}function It(e,t){const a=Tt(e);const i=Tt(t);Object.keys(Mt.unassigned_dates).forEach((e=>{const t=parseInt(e);if(a<=t&&t<=i){delete Mt.unassigned_dates[e]}}))}function Tt(e){const t=new Date(e);t.setHours(0,0,0,0);return t.getTime()}const Ot=".sc-igl-cal-header-h{display:block;position:absolute;top:0;height:100%;color:var(--wa-color-text-quiet)}.svg-icon.sc-igl-cal-header{height:20px;width:20px}.darkGrey.sc-igl-cal-header{background:#ececec}.btn.sc-igl-cal-header{pointer-events:auto}.dayTitle.weekend.sc-igl-cal-header{font-weight:bold;color:var(--wa-color-text-normal)}.cellData.sc-igl-cal-header{background-color:var(--wa-color-surface-default)}.stickyCell.sc-igl-cal-header{display:-ms-inline-grid;display:-moz-inline-grid;display:inline-grid;position:-webkit-sticky;position:sticky;top:0px;height:82px;display:inline-block;vertical-align:top;z-index:2}.headersContainer.sc-igl-cal-header{background-color:var(--wa-color-surface-default)}.headerCell.sc-igl-cal-header{display:inline-grid;width:58px;height:58px;vertical-align:top;background-color:var(--wa-color-surface-default);border-bottom:1px solid var(--wa-color-surface-border)}.monthsContainer.sc-igl-cal-header{height:20px;background-color:var(--wa-color-surface-default);margin-bottom:0.2em}.monthCell.sc-igl-cal-header{display:inline-grid;height:20px;background-color:var(--wa-color-overlay-inline);border-right:1px solid var(--wa-color-surface-border);color:var(--wa-color-neutral-on-quiet);vertical-align:top}.monthCell.sc-igl-cal-header:nth-child(odd){background:var(--wa-color-neutral-fill-normal);color:var(--wa-color-neutral-on-normal)}.monthTitle.sc-igl-cal-header{overflow:hidden;text-overflow:ellipsis;font-size:0.9em;text-transform:uppercase;font-weight:bold;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.topLeftCell.sc-igl-cal-header{left:0px;z-index:3;width:170px;background-color:var(--wa-color-surface-default);display:-ms-inline-grid;display:-moz-inline-grid;display:inline-grid}.datePickerHidden.sc-igl-cal-header{position:absolute;height:100%;width:100%;opacity:0;cursor:pointer;z-index:1}.date_btn.sc-igl-cal-header{cursor:pointer;display:flex;align-items:center;justify-content:center;position:relative}.date_btn.sc-igl-cal-header:hover{background:#f6f6f6;border-radius:0.3rem}.caledarBtns.sc-igl-cal-header{position:relative;cursor:pointer;padding:0.4rem}.caledarBtns.sc-igl-cal-header:hover{background-color:#f6f6f6}.dayTitle.sc-igl-cal-header{font-size:0.8em;font-weight:600;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.currentDay.sc-igl-cal-header .dayTitle.sc-igl-cal-header{font-weight:bold}.currentDay.sc-igl-cal-header{background-color:var(--wa-color-brand-fill-quiet)}.dayCapacityPercent.sc-igl-cal-header{font-size:0.75em;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.badge-pill.sc-igl-cal-header{padding:3px 1em;font-size:0.8em;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.pointer.sc-igl-cal-header{cursor:pointer}.searchContiner.sc-igl-cal-header{padding-left:10px;padding-right:10px}.searchListContainer.sc-igl-cal-header{background:var(--wa-color-surface-default);border:1px solid var(--wa-color-surface-border);border-bottom:none}.fd-header__badge-btn.sc-igl-cal-header{all:unset;cursor:pointer}.fd-header__badge-btn.sc-igl-cal-header:hover .fd-header__badge.sc-igl-cal-header{background-color:color-mix(in oklab, var(--wa-color-fill-loud, var(--wa-color-neutral-fill-loud)), var(--wa-color-mix-hover))}.searchListItem.sc-igl-cal-header{background:var(--wa-color-surface-default);border-bottom:1px solid var(--wa-color-surface-border);padding-left:8px}.header__fd-actions.sc-igl-cal-header{color:var(--wa-color-text-normal);border-inline-end:1px solid var(--wa-color-surface-border)}.badge-light.sc-igl-cal-header{background-color:#999999;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.min-width-full.sc-igl-cal-header{min-width:100%}.header__fd-actions.sc-igl-cal-header{display:flex;width:170px;box-sizing:border-box;gap:0.875rem;color:var(--wa-color-text-normal);flex-direction:column}";const zt=Ot;const At=class{constructor(a){e(this,a);this.optionEvent=t(this,"optionEvent",7);this.gotoRoomEvent=t(this,"gotoRoomEvent",7);this.gotoToBeAssignedDate=t(this,"gotoToBeAssignedDate",7)}optionEvent;gotoRoomEvent;gotoToBeAssignedDate;calendarData;today;propertyid;unassignedDates;to_date;highlightedDate;renderAgain=false;unassignedRoomsNumber={};roomsList=[];toBeAssignedService=new Dt;dateRef;dateSelectRef;componentWillLoad(){try{this.initializeRoomsList();if(!this.calendarData.is_vacation_rental){Yt("unassigned_dates",(e=>{if(Object.keys(e).length>0){this.fetchAndAssignUnassignedRooms()}}))}}catch(e){console.error("Error in componentWillLoad:",e)}}handleCalendarDataChanged(){this.fetchAndAssignUnassignedRooms()}initializeRoomsList(){this.roomsList=[];this.calendarData.roomsInfo.forEach((e=>{this.roomsList=this.roomsList.concat(...e.physicalrooms)}))}async fetchAndAssignUnassignedRooms(){await this.assignRoomsToDate()}async assignRoomsToDate(){try{const{fromDate:e,toDate:t,data:a}=this.unassignedDates;let i=new Date(e);i.setHours(0,0,0,0);let r=i.getTime();while(r<=new Date(t).getTime()){const e=me(r).format("D_M_YYYY");if(a[r]){const t=await this.toBeAssignedService.getUnassignedRooms({from_date:this.calendarData.from_date,to_date:this.calendarData.to_date},this.propertyid,N(new Date(r)),this.calendarData.roomsInfo,this.calendarData.formattedLegendData);this.unassignedRoomsNumber[e]=t.length}else if(this.unassignedRoomsNumber[e]){const t=this.unassignedRoomsNumber[e]-1;this.unassignedRoomsNumber[e]=t<0?0:t}const t=me(r).add(1,"days").toDate();t.setHours(0,0,0,0);r=t.getTime();this.renderView()}}catch(e){console.error(e)}}handleReduceAvailableUnitEvent(e){e.stopImmediatePropagation();e.stopPropagation();const{fromDate:t,toDate:a}=e.detail;let i=new Date(t).getTime();while(i<new Date(a).getTime()){const e=me(i).format("D_M_YYYY");this.unassignedRoomsNumber[e]=this.unassignedRoomsNumber[e]-1;i=me(i).add(1,"days").toDate().getTime()}this.renderView()}showToBeAssigned(e){if(this.unassignedRoomsNumber[e.day]||0){this.handleOptionEvent("showAssigned");setTimeout((()=>{this.gotoToBeAssignedDate.emit({key:"gotoToBeAssignedDate",data:e.currentDate})}),100)}}handleOptionEvent(e,t=""){this.optionEvent.emit({key:e,data:t})}handleDateSelect(e){if(Object.keys(e.detail).length>0){this.handleOptionEvent("calendar",e.detail)}}handleClearSearch(){this.renderView()}handleFilterRooms(e){const t=e.target;let a=t.value.trim();a=a.toLowerCase();if(a===""){this.handleClearSearch()}this.renderView()}handleScrollToRoom(e){this.handleClearSearch();this.gotoRoomEvent.emit({key:"gotoRoom",roomId:e})}getStringDateFormat(e){return e.getFullYear()+"-"+(e.getMonth()<9?"0":"")+(e.getMonth()+1)+"-"+(e.getDate()<=9?"0":"")+e.getDate()}getNewBookingModel(){let e=new Date;e.setHours(0,0,0,0);let t=this.getStringDateFormat(e);e.setDate(e.getDate()+1);e.setHours(0,0,0,0);let a=this.getStringDateFormat(e);return{ID:"",NAME:"",EMAIL:"",PHONE:"",REFERENCE_TYPE:"PHONE",FROM_DATE:t,TO_DATE:a,roomsInfo:this.calendarData.roomsInfo,TITLE:M.entries.Lcz_NewBooking,event_type:"PLUS_BOOKING",legendData:this.calendarData.formattedLegendData,defaultDateRange:{fromDate:new Date(t),fromDateStr:"",toDate:new Date(a),toDateStr:"",dateDifference:0,editabled:true,message:""}}}renderView(){this.renderAgain=!this.renderAgain}render(){return a(i,{key:"4ee20ffdbdd678ef9298a204314918b88c5c6420"},a("div",{key:"115f07c6b5e464019a8daf62bd556a011398f405",class:"stickyCell align-items-center topLeftCell preventPageScroll"},a("div",{key:"e051aa885dc2675960edb7d8729966dd56c9f521",class:"header__fd-actions"},a("div",{key:"7ae17d6f2f4868a8c61b41882ba39deae1b036b3",class:"row justify-content-around no-gutters",style:{gap:"0"}},!this.calendarData.is_vacation_rental&&a(o,{key:"c18935b1eb3e162132c451f920d510ad778027a5"},a("wa-tooltip",{key:"63fca1af9d332b0ae0883d65039d9b06f4d49cbe",for:"fd-unassigned-dates_btn"},M.entries.Lcz_UnassignedUnitsTooltip),a("ir-custom-button",{key:"a26d504d258436060a2f855ccbc2a3f55dfd7f61",id:"fd-unassigned-dates_btn",variant:"neutral",appearance:"plain",onClickHandler:()=>this.handleOptionEvent("showAssigned")},a("wa-icon",{key:"d09c7fdd86cd8440230ed7135d61b94f6e24fa80",style:{fontSize:"1.5rem"},name:"server",label:M.entries.Lcz_UnassignedUnitsTooltip,"aria-label":M.entries.Lcz_UnassignedUnitsTooltip}))),a("wa-tooltip",{key:"ddf86cc269defb74ca5ab82efc9f21f2e1a72295",for:"fd-dates-navigation_btn"},M.entries.Lcz_Navigate),a("ir-date-select",{key:"70e8f412dbb13d2da181b093d509fb20a9c32631",minDate:me().add(-2,"months").startOf("month").format("YYYY-MM-DD"),onDateChanged:e=>{console.log("evt",e);this.handleDateSelect(e)},ref:e=>this.dateSelectRef=e},a("ir-custom-button",{key:"4e7051d4417e5e53370968741a6a50c0d8f4ac59",slot:"trigger",id:"fd-dates-navigation_btn",variant:"neutral",appearance:"plain",onClickHandler:()=>this.handleOptionEvent("calendar")},a("wa-icon",{key:"a888037074e1fa7a476d6718bc24b592074848cc",style:{fontSize:"1.5rem"},name:"calendar",variant:"regular",label:M.entries.Lcz_Navigate,"aria-label":M.entries.Lcz_Navigate})),a("div",{key:"fbfd2a796ebc213a51c3a7fa2197c6e51909f95b",class:"fd-dates__actions"},a("wa-divider",{key:"500c024c29a985f73f10c9a067282f4af077702a"}),a("ir-custom-button",{key:"405f26a3f0245dd726ae0eea37c10937e733a11b",variant:"neutral",appearance:"outlined",onClickHandler:()=>{this.handleOptionEvent("gotoToday");this.dateSelectRef.closeDatePicker()}},"Today"))),a(o,{key:"719eb4efe18bbf35e8530ecfacbb6881ecc83c31"},a("wa-tooltip",{key:"6070a10fe4022770c61af7b64eadfe630ae8a65f",for:"fd-new-booking_btn"},M.entries.Lcz_CreateNewBooking),a("ir-custom-button",{key:"a32eb8c6d9554c9dddc2df214a9e10c9f39c0a02",slot:"trigger",id:"fd-new-booking_btn",variant:"neutral",appearance:"plain",onClickHandler:()=>this.handleOptionEvent("add",this.getNewBookingModel())},a("wa-icon",{key:"6170ff84dea121ca94bc37115095241a9429f986",style:{fontSize:"1.5rem"},name:"plus",label:M.entries.Lcz_CreateNewBooking,"aria-label":M.entries.Lcz_CreateNewBooking}))),a(o,{key:"26ade0860622591b2dc2c8703bde30e5a463817d"},a("wa-tooltip",{key:"39a3874584248727f6dbb801604935cc36b6e7cc",for:"fd-stop-open-sale_btn"},M.entries.Lcz_StopOpenSale),a("ir-custom-button",{key:"a8f8bd4210a15f7bd9f0331667f017c9bf9ff950",slot:"trigger",id:"fd-stop-open-sale_btn",variant:"neutral",appearance:"plain",onClickHandler:()=>this.handleOptionEvent("bulk",this.getNewBookingModel())},a("wa-icon",{key:"1b58d6815b16f4fff2c890887e68b0676d6e0de4",variant:"regular",style:{fontSize:"1.5rem"},name:"calendar-xmark",label:M.entries.Lcz_StopOpenSale,"aria-label":M.entries.Lcz_StopOpenSale})))),a("div",{key:"df3624b7e3e501b17f92f130c34532f030904d93",class:"searchContiner"},a("ir-picker",{key:"616c340e681b34e0a7e09168f35caf85330d23d4",size:"small","onCombobox-select":e=>{this.handleScrollToRoom(Number(e.detail.item.value))}},this.roomsList.map((e=>a("ir-picker-item",{label:e.name,value:e.id},e.name))))))),a("div",{key:"17203dbf08790797c7e599b13f74cfe5b8f75021",class:"stickyCell headersContainer"},a("div",{key:"f00569d2a130d73d9841a2737b3767d872e1e3de",class:"monthsContainer"},this.calendarData.monthsInfo.map((e=>a("div",{class:"monthCell",style:{width:e.daysCount*58+"px"}},a("div",{class:"monthTitle"},e.monthName))))),this.calendarData.days.map((e=>a("div",{class:`headerCell align-items-center ${"day-"+e.day} ${e.day===this.today||e.day===this.highlightedDate?"currentDay":""}`,"data-day":e.day},!this.calendarData.is_vacation_rental&&a("div",{class:"preventPageScroll",onClick:()=>this.showToBeAssigned(e)},this.unassignedRoomsNumber[e.day]||e.unassigned_units_nbr!==0?a("button",{class:"fd-header__badge-btn"},a("wa-badge",{class:"fd-header__badge",variant:"brand",appearance:"accent",pill:true},this.unassignedRoomsNumber[e.day]||e.unassigned_units_nbr)):a("wa-badge",{variant:"neutral",appearance:"filled",pill:true}," ",this.unassignedRoomsNumber[e.day]||e.unassigned_units_nbr)),a("div",{class:{dayTitle:true,weekend:R(e.value)}},e.dayDisplayName),a("div",{class:"dayCapacityPercent"},e.occupancy,"%"))))))}static get watchers(){return{unassignedDates:["handleCalendarDataChanged"]}}};At.style=zt;const Bt=":host{display:flex;min-width:280px}.custom-picker{width:100%}";const Rt=Bt;const Nt=class{constructor(a){e(this,a);this.dateSelectEvent=t(this,"dateSelectEvent",7);this.dateRangeChange=t(this,"dateRangeChange",7);this.toast=t(this,"toast",7)}size="small";defaultData;disabled=false;minDate;dateLabel;maxDate;withDateDifference=true;variant="default";hint;renderAgain=false;dateSelectEvent;dateRangeChange;toast;totalNights=0;fromDate=me().toDate();toDate=me().add(1,"day").toDate();isInvalid;componentWillLoad(){this.initializeDates()}handleDataChange(e,t){if(JSON.stringify(e)!==JSON.stringify(t)){this.initializeDates()}}initializeDates(){if(this.defaultData){if(this.defaultData.fromDate){this.fromDate=new Date(this.defaultData.fromDate);this.fromDate.setHours(0,0,0,0)}if(this.defaultData.toDate){this.toDate=new Date(this.defaultData.toDate);this.toDate.setHours(0,0,0,0)}}if(this.fromDate&&this.toDate){this.calculateTotalNights()}}calculateTotalNights(){this.totalNights=ne(me(this.fromDate).format("YYYY-MM-DD"),me(this.toDate).format("YYYY-MM-DD"))}handleDateSelectEvent(e,t=""){this.dateSelectEvent.emit({key:e,data:t})}handleDateChange(e){const{start:t,end:a}=e.detail;this.fromDate=t.toDate();this.toDate=a.toDate();this.calculateTotalNights();this.handleDateSelectEvent("selectedDateRange",{fromDate:this.fromDate.getTime(),toDate:this.toDate.getTime(),fromDateStr:t.format("DD MMM YYYY"),toDateStr:a.format("DD MMM YYYY"),dateDifference:this.totalNights});this.dateRangeChange.emit({checkIn:t,checkOut:a});this.renderAgain=!this.renderAgain}get dates(){const e=me(this.fromDate).format("YYYY-MM-DD");const t=me(this.toDate).format("YYYY-MM-DD");return[e,t]}handleAriaInvalidChange(e){this.isInvalid=e}render(){const e=this.variant==="booking"&&this.withDateDifference;return a("ir-date-select",{key:"ae20a84a7221ceecca2a700e9a88bf75d7048a1b",disabled:this.disabled,class:"custom-picker",minDate:this.minDate,"aria-invalid":this.isInvalid,maxDate:this.maxDate,onDateChanged:e=>this.handleDateChange(e),range:true,dates:this.dates},a("wa-icon",{key:"d2bcc2d1644c615037556129482c1e23d1ebf58f",slot:"start",variant:"regular",name:"calendar"}),e&&a("span",{key:"76d533c05ab6563dff91fedd4dd1e1ffb88337f8",slot:"end",class:"date-range-nights"},this.totalNights+(this.totalNights>1?` ${M.entries.Lcz_Nights}`:` ${M.entries.Lcz_Night}`)))}static get watchers(){return{defaultData:["handleDataChange"],"aria-invalid":["handleAriaInvalidChange"]}}};Nt.style=Rt;const $t=".sc-igl-housekeeping-dialog-h{display:block;text-align:start}";const Lt=$t;const Pt=class{constructor(a){e(this,a);this.irAfterClose=t(this,"irAfterClose",7)}open;selectedRoom;bookingNumber;propertyId;isLoading=null;irAfterClose;dialogRef;housekeepingService=new xe;getStatusLabel(){switch(this.selectedRoom?.hk_status){case"002":return"dirty";case"004":return"inspected";default:return"clean"}}middleButtonLabel(){return this.selectedRoom?.hk_status==="002"?"Clean":"Dirty"}rightButtonLabel(){return this.selectedRoom?.hk_status!=="004"?"Clean & Inspect":"Clean"}async updateHousekeeping(e,t){e.stopImmediatePropagation();e.stopPropagation();try{this.isLoading=e.target.value;await this.housekeepingService.setExposedUnitHKStatus({property_id:S.property.id,status:{code:t},unit:{id:this.selectedRoom?.id}});if(["001","004"].includes(t)){await this.housekeepingService.executeHKAction({actions:[{description:"Cleaned",hkm_id:this.selectedRoom?.housekeeper?.id||null,unit_id:this.selectedRoom?.id,booking_nbr:this.bookingNumber,status:t}]})}}finally{this.isLoading=null;this.dialogRef.closeModal()}}render(){return a("ir-dialog",{key:"3f1fee9f42a28851d043b41cc6f34790fba449f7",ref:e=>this.dialogRef=e,open:this.open,label:"Housekeeping Update",onIrDialogAfterHide:()=>this.irAfterClose.emit()},a("p",{key:"64e3128bc46da6663fb1dcd3476d67e74be2b5c3",style:{margin:"0"}},`${this.selectedRoom?.name} is currently marked as ${this.getStatusLabel()}.`),a("div",{key:"5137952b0e5a26b30003d798b2ff0d8276ff7037",slot:"footer",class:"ir-dialog__footer"},a("ir-custom-button",{key:"2280305afbbe67c9717add15c156f07402552dc0","data-dialog":"close",size:"medium",variant:"neutral",appearance:"filled"},"Cancel"),a("ir-custom-button",{key:"390dc3a467070be995dde9d753d6127aa98466f8",value:"hk-toggle-clean-dirty",size:"medium",variant:"brand",appearance:"outlined",loading:this.isLoading==="hk-toggle-clean-dirty",onClickHandler:e=>this.updateHousekeeping(e,this.selectedRoom.hk_status==="002"?"001":"002")},this.middleButtonLabel()),a("ir-custom-button",{key:"e1d76dfaf42f69eac51de8fd9218dabe828eeac2",value:"hk-clean-inspect",size:"medium",variant:"brand",appearance:"accent",loading:this.isLoading==="hk-clean-inspect",onClickHandler:e=>this.updateHousekeeping(e,this.selectedRoom.hk_status==="004"?"001":"004")},this.rightButtonLabel())))}};Pt.style=Lt;const Ht=".sc-igl-legends-h{--spacing:var(--wa-space-l);display:block;width:max-content;color:var(--wa-color-text-normal);font-size:var(--wa-font-size-s);background-color:var(--wa-color-surface-default);border-inline-end:2px solid var(--wa-color-surface-border)}.legend_skew.pending.sc-igl-legends{border-width:1px;border-style:dashed;border-color:var(--wa-color-success-fill-loud)}.legend_skew.in-house.sc-igl-legends{background-color:var(--wa-color-brand-fill-quiet) !important;color:var(--wa-color-brand-on-quiet) !important;width:30px;transform:skew(0);border-radius:0;vertical-align:middle;font-size:12px;text-align:center}.legendRow.sc-igl-legends{position:relative;vertical-align:middle;margin-bottom:0.3rem}.legendRow.sc-igl-legends div.sc-igl-legends{display:inline-block;vertical-align:middle}.legend_skew.sc-igl-legends,.legend_skew-bordered.sc-igl-legends,.legend_skewsplit.sc-igl-legends{transform:skew(-22deg);width:15px;height:16px;border-radius:4px;background-color:var(--ir-skew-background)}.legend_skew.striped.vertical.sc-igl-legends{--stripe-period:17px;--stripe-angle:360deg}.legend_skew.striped.sc-igl-legends{--stripe-period:6px;background:repeating-linear-gradient(\n    var(--stripe-angle, 45deg),\n    var(--ir-skew-background) 0,\n    var(--ir-skew-background) calc(var(--stripe-period) / 2),\n    var(--ir-event-bg-stripe-color) calc(var(--stripe-period) / 2),\n    var(--ir-event-bg-stripe-color) var(--stripe-period)\n  )}.legend_skew.split.sc-igl-legends{border-right:4px solid var(--wa-color-text-normal, black)}.legend_skew-bordered.sc-igl-legends{border:1px solid var(--wa-color-text-normal, black)}.legend_dirty-unit.sc-igl-legends{background-color:white !important;border:1px solid #e0e0e0;height:12px;width:20px;position:relative}.fd-legend__section-title.sc-igl-legends{font-family:var(--wa-font-family-heading);font-weight:var(--wa-font-weight-heading);line-height:var(--wa-line-height-condensed);text-wrap:balance;margin:0;padding:0;margin-bottom:1rem;font-size:var(--wa-font-size-m);color:var(--wa-color-text-normal, black)}.legend_dirty-unit.sc-igl-legends::after{content:'';position:absolute;bottom:0;height:100%;left:30%;right:30%;background-color:#d4d0be !important}.legend_circle.sc-igl-legends{border-radius:100%;width:10px;height:10px;margin:3px 3px 3px 2px}.legend_skewsplit.sc-igl-legends{border-right:2px solid var(--wa-color-text-normal, black)}.legendCalendar.sc-igl-legends .legendRow.sc-igl-legends{margin-bottom:0}.legendCalendar.sc-igl-legends .legendRow.sc-igl-legends:first-child .legendCal.sc-igl-legends{background-color:var(--wa-color-neutral-fill-normal);color:var(--wa-color-neutral-on-normal)}.legendCalendar.sc-igl-legends .legendRow.sc-igl-legends div.sc-igl-legends{display:inline-block;vertical-align:middle;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.total-availability.sc-igl-legends{font-size:1em !important}.legendCalendar.sc-igl-legends .legendCal.sc-igl-legends{width:80px;height:25px;text-align:center;display:inline-grid !important;align-content:center;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.legendCalendar.sc-igl-legends .legendCal.sc-igl-legends .badge.sc-igl-legends{margin-top:0.2rem;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.legendCalendar.sc-igl-legends .legendCal.legendCal-h2.sc-igl-legends{height:40px;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.br-t.sc-igl-legends{border-top:1px solid var(--wa-color-surface-border)}.br-s.sc-igl-legends{border-left:1px solid var(--wa-color-surface-border);border-right:1px solid var(--wa-color-surface-border)}.br-bt.sc-igl-legends{border-bottom:1px solid var(--wa-color-surface-border)}.hyphenLegend.sc-igl-legends{-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.hyphenLegend.sc-igl-legends::before{width:12px;height:0.5px;content:' ';background-color:var(--wa-color-text-normal, black);vertical-align:middle;display:inline-block;margin-left:5px;margin-right:5px;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.fd-legend__title.sc-igl-legends{align-self:center;flex:1 1 auto;font-style:inherit;font-variant:inherit;font-stretch:inherit;font-family:inherit;font-optical-sizing:inherit;font-size-adjust:inherit;font-kerning:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-language-override:inherit;font-size:var(--wa-font-size-l);font-weight:var(--wa-font-weight-heading);line-height:var(--wa-line-height-condensed);margin:0px;padding:0;color:var(--wa-color-text-normal, black)}.fd-legend__header.sc-igl-legends{display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;background-color:var(--wa-color-surface-default);z-index:1;padding-inline-start:var(--spacing);padding-block-end:0;padding-inline-end:calc(var(--spacing) - var(--wa-form-control-padding-block));padding-block-start:calc(var(--spacing) - var(--wa-form-control-padding-block));border-bottom:1px solid var(--wa-color-surface-border);padding-bottom:calc(var(--spacing) / 2);box-sizing:border-box;background-color:var(--ir-drawer-background-color, var(--wa-color-surface-default))}.fd-legend__shape.sc-igl-legends{display:flex;align-items:center;justify-content:center}.fd-legend__row.sc-igl-legends{display:grid;grid-template-columns:40px 1fr;gap:1rem;margin-bottom:0.5rem}.fd-legend__row-title.sc-igl-legends{padding:0;margin:0;width:fit-content}.legendContainer.sc-igl-legends{padding:0 !important}.fd-legend__body.sc-igl-legends{padding:var(--spacing)}.headerCell.sc-igl-legends{width:70px;display:flex;align-items:center;justify-content:center}.dayTitle.sc-igl-legends{font-size:0.8em;font-weight:600;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.dayCapacityPercent.sc-igl-legends{font-size:0.75em;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.legend_rectangle.sc-igl-legends{height:12px;width:20px}";const Ft=Ht;const Ut=class{constructor(a){e(this,a);this.optionEvent=t(this,"optionEvent",7)}legendData;bookingColors=[];saveState="idle";saveError;loadingIndex=[];optionEvent;propertyService=new ye;saveTimeout;disconnectedCallback(){if(this.saveTimeout){clearTimeout(this.saveTimeout)}}handleSaveStateChange(e){if(e==="error"||e==="idle"){this.loadingIndex=[]}}handleOptionEvent(e,t=""){this.optionEvent.emit({key:e,data:t})}syncCalendarExtra(e){const t=S.property.calendar_extra??{};S.property.calendar_extra={...t,booking_colors:e.map((e=>({...e})))}}get propertyId(){return S.property?.id??S.property.id??null}updateBookingColor(e,t){const a=S.property.calendar_extra?.booking_colors.map(((a,i)=>i===e?{...a,...t}:a));this.syncCalendarExtra(a);if(this.saveState==="saved"){this.saveState="idle"}}async persistBookingColors(){const e=this.propertyId;if(!e){return}if(this.saveState==="saving"){return}this.saveState="saving";this.saveError=undefined;try{await this.propertyService.setPropertyCalendarExtra({property_id:e,value:JSON.stringify(S.property.calendar_extra)});this.saveState="saved";if(this.saveTimeout){clearTimeout(this.saveTimeout)}this.saveTimeout=window.setTimeout((()=>{this.saveState="idle";this.saveTimeout=undefined}),2e3)}catch(e){this.saveState="error";this.saveError=e instanceof Error?e.message:String(e)}}handleNameInput(e,t){this.updateBookingColor(e,{name:t})}handleBlur(e){this.persistBookingColors();if(!this.loadingIndex.includes(e)){this.loadingIndex=[...this.loadingIndex,e]}}handleLoaderComplete(e){this.loadingIndex=this.loadingIndex.filter((t=>t!==e))}updateLegend(){let e=[...S.property.calendar_legends];let t=e[11];e[11]=e[12];e[12]=t;const a=e[13];e=e.filter(((e,t)=>t!==13));e.splice(7,0,a);return e}render(){const e=this.updateLegend();return a(i,{key:"4d576276577890c840a0f90ffc915e41f38371af",class:"legendContainer text-left"},a("div",{key:"c1735196881ebe6e8e7d96e8a3dc4c9cd1fd5a5b",class:"fd-legend__header"},a("h2",{key:"e9eb80150d56d4368fac3e3ca16b384a22b14dcf",class:"fd-legend__title",id:"legend-title"},M.entries.Lcz_Legend),a("ir-custom-button",{key:"0ab636e46d02344854da482258d0f9fbc64839b3",size:"medium",onClickHandler:()=>this.handleOptionEvent("closeSideMenu"),appearance:"plain",variant:"neutral"},a("wa-icon",{key:"630e7a8512c9992b23934483e7e63cba2eba7837",name:"xmark",variant:"solid",label:"Close","aria-label":"Close",role:"img"}))),a("section",{key:"8674c029a51f56f6f96ce8cf2c41e48b1333326e",class:"fd-legend__body"},a("div",{key:"6e3effab54ac8c3c14729f176ce9ed052d1690af"},e.map((e=>{const t=S.colorsForegrounds[e?.color];return a("div",{class:"fd-legend__row"},a("div",{class:"fd-legend__shape"},e.design==="broom"?a("svg",{xmlns:"http://www.w3.org/2000/svg",height:"12",width:"13.5",viewBox:"0 0 576 512",style:{display:"block"}},a("path",{fill:"var(--wa-color-text-normal,black)",d:"M566.6 54.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192-34.7-34.7c-4.2-4.2-10-6.6-16-6.6c-12.5 0-22.6 10.1-22.6 22.6l0 29.1L364.3 320l29.1 0c12.5 0 22.6-10.1 22.6-22.6c0-6-2.4-11.8-6.6-16l-34.7-34.7 192-192zM341.1 353.4L222.6 234.9c-42.7-3.7-85.2 11.7-115.8 42.3l-8 8C76.5 307.5 64 337.7 64 369.2c0 6.8 7.1 11.2 13.2 8.2l51.1-25.5c5-2.5 9.5 4.1 5.4 7.9L7.3 473.4C2.7 477.6 0 483.6 0 489.9C0 502.1 9.9 512 22.1 512l173.3 0c38.8 0 75.9-15.4 103.4-42.8c30.6-30.6 45.9-73.1 42.3-115.8z"})):e.design==="check"?a("svg",{height:14,width:14,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"},a("path",{fill:"green",d:"M530.8 134.1C545.1 144.5 548.3 164.5 537.9 178.8L281.9 530.8C276.4 538.4 267.9 543.1 258.5 543.9C249.1 544.7 240 541.2 233.4 534.6L105.4 406.6C92.9 394.1 92.9 373.8 105.4 361.3C117.9 348.8 138.2 348.8 150.7 361.3L252.2 462.8L486.2 141.1C496.6 126.8 516.6 123.6 530.9 134z"})):a("div",{class:`legend_${e.design}  ${e.id==="3"?"pending":""} ${e.id==="1"?"in-house":""} ${["1","7"].includes(e.id.toString())?`striped ${e.id.toString()==="1"?"vertical":""}`:""}`,style:{"--ir-skew-background":e.color,"--ir-event-bg-stripe-color":t?.stripe,backgroundColor:e.color}},e.id==="1"&&"5")),a("p",{class:"fd-legend__row-title"},e.name))})),a("wa-divider",{key:"a0a9d82091ccace50b52c647e4593ad6431bf06b"}),a("h5",{key:"6005ead10e3b3939560d3001e21ec646ac1fecb4",class:"fd-legend__section-title"},"Use custom colors"),S.property.calendar_extra?.booking_colors.map(((e,t)=>{const i=`legend_${e.design}`;return a("div",{key:`legend_${t}`,class:"fd-legend__row"},a("div",{class:"fd-legend__shape"},a("div",{class:i,style:{backgroundColor:e.color}})),a("wa-input",{autocomplete:"off",class:"legendTextarea border-0 m-0 p-0",value:e.name,size:"small",placeholder:"Reason for this color",onchange:e=>{this.handleNameInput(t,e.target.value);this.handleBlur(t)}},this.loadingIndex.includes(t)&&(this.saveState==="saving"||this.saveState==="saved")?a("ir-success-loader",{slot:"end",onLoaderComplete:()=>this.handleLoaderComplete(t)}):null))}))),a("wa-divider",{key:"9f1ce9b6a5921c41ddb06839be17093eb4b5c8cf"}),a("div",{key:"291a5142e6ef4bf992baf33a0f3ab1a2aeca804e"},a("div",{key:"72a9dee01d7910a9dd75d394491a3885bb41d697",class:"legendCalendar"},a("div",{key:"e59215a3dbdb234eddff62de719379d8562346b6",class:"legendRow align-items-center"},a("div",{key:"ccb56fad456f2c412ff906a12806a4a7dee35bbf",class:"legendCal br-t br-s br-bt"},a("strong",{key:"ade3a20e73684caf5947b6b94375b7a5ca2dc829"},"MAR 2022")),a("div",{key:"dabb37dcb887e24b5d94931118ba4a5db30de222",class:"hyphenLegend"},M.entries.Lcz_MonthAndYear)),a("div",{key:"debed2dfc8b0ecea1fcacc721cd747ef92ad1291",class:"legendRow"},a("div",{key:"4ddf63f80913c9c57c395411717aef9ace61fd07",class:"legendCal headerCell align-items-center br-s"},a("wa-badge",{key:"804d10af8dbc71330ae5843767fa8fa323f03001",pill:true},"3")),a("div",{key:"a7219dead0f01192c4c79997e3019ef5b758a034",class:"hyphenLegend"},a("div",{key:"bd3bc64dc391dd80b973830fc0f2e9831cb210e0"},M.entries.Lcz_UnassignedUnits))),a("div",{key:"6f9d9e535e15b1cc1e53b48fc91c20769413d1d4",class:"legendRow"},a("div",{key:"722ec0554a307bbdbd70bec15f11478b90fc18a9",class:"legendCal dayTitle br-s"},"Fri 18"),a("div",{key:"15ed60317226f4bf686ed2a66e04987d19f5d2fb",class:"hyphenLegend"},M.entries.Lcz_Date)),a("div",{key:"216d84f8b4b20f47559c96434c2b942910b14890",class:"legendRow"},a("div",{key:"012e56f92519de597493cd9dfe8df7d040928715",class:"legendCal br-s br-bt dayCapacityPercent"},"15%"),a("div",{key:"e9d23c832e4c360d11bd555a63a268001bafbd81",class:"hyphenLegend"},M.entries.Lcz_Occupancy)),a("div",{key:"88111c5b99a223f7b988348fcab226f461e1036a",class:"legendRow"},a("div",{key:"ae2506a264e39a8204148a5f93b98b8b001bc6b9",class:"legendCal br-s br-bt  font-weight-bold total-availability"},"20"),a("div",{key:"38a020aad00e6e3e4ecf1b135040e649ac17de3a",class:"hyphenLegend"},M.entries.Lcz_TotalAvailability))))))}static get watchers(){return{saveState:["handleSaveStateChange"]}}};Ut.style=Ft;const jt=".sc-igl-rate-plan-h{display:block;margin-bottom:1rem;color:var(--wa-color-text-quiet)}.rate-plan.sc-igl-rate-plan{display:flex;flex-direction:column;min-height:32px;margin-top:0.25rem;gap:0.5rem}.rate-plan--unavailable.sc-igl-rate-plan{flex-direction:row;align-items:center;justify-content:space-between}.rateplan-name-container.sc-igl-rate-plan{display:flex;align-items:center;gap:0.5rem;margin:0;padding:0}.rateplan-name-container.sc-igl-rate-plan p.sc-igl-rate-plan{margin:0}.rateplan-container.sc-igl-rate-plan{display:flex;flex-direction:column;gap:0.75rem;width:100%;margin-top:0.5rem}.variation-select.sc-igl-rate-plan{width:100%;max-width:300px;flex:1}.rp-select.sc-igl-rate-plan:disabled{background-color:#eceff1;color:#7a7a7a}.rateplan-config.sc-igl-rate-plan{display:flex;flex-direction:column;gap:0.75rem;width:100%}.rate-total-night-view.sc-igl-rate-plan{display:flex;flex:1;gap:0;align-items:stretch}.rateplan-price-input.sc-igl-rate-plan{flex:1;width:100%}.total-nights-container.sc-igl-rate-plan{width:max-content}.rp-select--nights.sc-igl-rate-plan{border-top-left-radius:0;border-bottom-left-radius:0}.inventory-select.sc-igl-rate-plan{width:100%;max-width:200px}.edit-booking-radio.sc-igl-rate-plan{display:none}.mobile-only.sc-igl-rate-plan{width:100%;display:block}.desktop-only.sc-igl-rate-plan{display:none}.rate-plan-unavailable-text.sc-igl-rate-plan{margin:0;color:var(--wa-color-danger-fill-loud)}.rateplan-name-container.sc-igl-rate-plan{font-family:var(--wa-font-family-heading);font-weight:400;line-height:var(--wa-line-height-condensed);text-wrap:balance}.non-ref-span.sc-igl-rate-plan{font-size:12px;color:var(--wa-color-success-fill-loud)}.nightBorder.sc-igl-rate-plan{border-left-width:0;border-top-right-radius:3px !important;border-bottom-right-radius:3px !important}.sc-igl-rate-plan:dir(rtl) .fd-rateplan__price-input.sc-igl-rate-plan::part(base),.sc-igl-rate-plan:dir(ltr) .fd-rateplan__nights-select.sc-igl-rate-plan::part(combobox){border-top-left-radius:0;border-bottom-left-radius:0}.fd-rateplan__price-input.sc-igl-rate-plan{flex:1 1 0%;z-index:1}.sc-igl-rate-plan:dir(rtl) .fd-rateplan__nights-select.sc-igl-rate-plan::part(combobox),.sc-igl-rate-plan:dir(ltr) .fd-rateplan__price-input.sc-igl-rate-plan::part(base){border-top-right-radius:0;border-bottom-right-radius:0}.sc-igl-rate-plan:dir(rtl) .fd-rateplan__nights-select.sc-igl-rate-plan::part(combobox){border-right-width:0}.sc-igl-rate-plan:dir(ltr) .fd-rateplan__nights-select.sc-igl-rate-plan::part(combobox){border-left-width:0}.fd-rateplan__nights-select.sc-igl-rate-plan{min-width:100px}.fd-rateplan__inventory-select.sc-igl-rate-plan{min-width:60px}.fd-rateplan__nights-select[open].sc-igl-rate-plan,.fd-rateplan__nights-select.sc-igl-rate-plan:focus-visible,.fd-rateplan__nights-select.sc-igl-rate-plan:focus-within{z-index:2}@media (min-width: 768px){.booking-btn.sc-igl-rate-plan{width:100%}.mobile-only.sc-igl-rate-plan{display:none}.desktop-only.sc-igl-rate-plan{display:block}.edit-booking-radio.sc-igl-rate-plan{display:block;margin-left:0.75rem}.rateplan-container.sc-igl-rate-plan{flex-direction:row;align-items:center;justify-content:flex-end}.rateplan-config.sc-igl-rate-plan{flex-direction:row;align-items:center;justify-content:space-between}.rateplan__booking-btn.sc-igl-rate-plan{width:95px}}@media (min-width: 991px){.sc-igl-rate-plan-h{margin:0}.rateplan-name-container.sc-igl-rate-plan{margin-bottom:0 !important}.rateplan-price-input.sc-igl-rate-plan{max-width:250px}.rate-plan--available.sc-igl-rate-plan{flex-direction:row;align-items:center;justify-content:space-between}}@media only screen and (min-width: 991px) and (max-width: 1300px){.rateplan-name-container.sc-igl-rate-plan{width:40%}.price-amount.sc-igl-rate-plan{max-width:150px !important}}@media (min-width: 1024px){.booking-btn.sc-igl-rate-plan{width:100px}.fd-rateplan__price-input.sc-igl-rate-plan{width:170px;max-width:170px}.fd-rateplan__nights-select.sc-igl-rate-plan{width:100px;max-width:100px}.rate-total-night-view.sc-igl-rate-plan{margin:0;padding:0;box-sizing:border-box;flex:0}.fd-rateplan__inventory-select.sc-igl-rate-plan{width:100px}.rateplan-config.sc-igl-rate-plan{width:fit-content}}@media (min-width: 1200px){.rateplan-name-container.sc-igl-rate-plan{width:40%;margin-top:0}}";const Vt=jt;const Gt=class{constructor(a){e(this,a);this.buttonClicked=t(this,"buttonClicked",7);this.bookingStepChange=t(this,"bookingStepChange",7)}ratePlan;roomTypeId;ratePricingMode=[];currency;shouldBeDisabled;bookingType="PLUS_BOOKING";isBookDisabled=false;visibleInventory;buttonClicked;bookingStepChange;disableForm(){const{bookingType:e,shouldBeDisabled:t,ratePlan:a,visibleInventory:i}=this;if(e==="EDIT_BOOKING"&&t){return false}return!a.is_available_to_book||i?.visibleInventory===0}updateRateplanSelection(e){const{roomTypeId:t,ratePlan:a}=this;const i=l.ratePlanSelections;l.ratePlanSelections={...i,[t]:{...i[t],[a.id]:{...i[t][a.id],...e}}}}handleDataChange(e,t){const a=t.target.value;if(e==="adult_child_offering"){this.handleVariationChange(a)}else if(e==="rate"){this.updateRateplanSelection({view_mode:a})}else if(e==="totalRooms"){p({roomTypeId:this.roomTypeId,ratePlanId:this.ratePlan.id,rooms:Number(a)})}}bookProperty(){if(this.bookingType==="BAR_BOOKING"){u()}this.reserveRoom();this.bookingStepChange.emit({direction:"next"});this.buttonClicked.emit({key:"next"})}reserveRoom(){p({roomTypeId:this.roomTypeId,ratePlanId:this.ratePlan.id,rooms:1,guest:[{last_name:l.guest?.last_name,first_name:l.guest?.first_name,unit:this.roomTypeId===l.guest?.roomtype_id?l.guest?.unit:null,bed_preference:this.visibleInventory.roomtype.is_bed_configuration_enabled?l.guest?.bed_preference:null,infant_nbr:this.visibleInventory.selected_variation?.child_nbr>0?l.guest?.infant_nbr:null}]})}get rate(){const{visibleInventory:e}=this;if(!e)return"";if(e.is_amount_modified){return e.rp_amount.toString()}const{selected_variation:t,view_mode:a}=e;const i=a==="001"?t?.discounted_amount:t?.amount_per_night;return i?.toString()||""}formatVariation(e){if(!e)return"";const t=`${e.adult_nbr} ${e.adult_nbr===1?M.entries["Lcz_Adult"]?.toLowerCase():M.entries["Lcz_Adults"]?.toLowerCase()}`;const a=e.child_nbr>0?`${e.child_nbr} ${e.child_nbr>1?M.entries["Lcz_Children"]?.toLowerCase():M.entries["Lcz_Child"]?.toLowerCase()}`:"";return a?`${t} ${a}`:t}getTooltipMessages(){const{ratePlan:e,visibleInventory:t}=this;const a=t?.selected_variation;if(!a)return;const i=e.variations?.find((e=>this.formatVariation(e)===this.formatVariation(a)));if(!i)return;const r=i.applicable_policies?.find((e=>e.type==="cancelation"))?.combined_statement;const o=i.applicable_policies?.find((e=>e.type==="guarantee"))?.combined_statement;let n="";if(r){n+=`<b><u>Cancellation:</u></b> ${r}<br/>`}if(o){n+=`<b><u>Guarantee:</u></b> ${o}`}return n||undefined}async handleVariationChange(e){const{ratePlan:t,roomTypeId:a}=this;const i=t.variations||[];const r=i.find((t=>this.formatVariation(t)===e));if(!r)return;f({params:{selected_variation:r},ratePlanId:t.id,roomTypeId:a})}render(){const{ratePlan:e,bookingType:t,currency:r,ratePricingMode:n,visibleInventory:s}=this;const l=e.is_available_to_book;const c=this.disableForm();const d=s?.selected_variation;const h=e.variations?.map((e=>this.formatVariation(e)));return a(i,{key:"6112aa0627053e730e9722ac99b5ad848496c883","data-testid":`rp-${this.ratePlan.id}`},a("div",{key:"5e7829aa78eadeeb9a8e473431808640c2c5be56",class:`rate-plan ${l?"rate-plan--available":"rate-plan--unavailable"}`},a("div",{key:"96e8df1202c44bc7b8ffa88b5c5c26ecec8efe8d","data-testid":"rp_name",class:"rateplan-name-container"},t==="BAR_BOOKING"?a("p",null,a("span",null,e.name.split("/")[1]," ",e.is_non_refundable&&a("span",{class:"non-ref-span"},"Non Refundable"))):a("span",null,e.short_name," ",e.is_non_refundable&&a("span",{class:"non-ref-span"},"Non Refundable")),l&&a(o,{key:"2811c2e4be1fa30fb7bd3c61fde757272deeadf1"},a("wa-tooltip",{key:"c52f48b36e79afb4fe376e74c1fa7c260f8b25a8",for:`rateplan-${this.ratePlan.id}`},a("span",{key:"964b9de183666698a8014bfcc1c7e68a56464975",innerHTML:this.getTooltipMessages()})),a("wa-icon",{key:"739863497a16d720d6b638222cbdd9682ff9256e",name:"circle-info",id:`rateplan-${this.ratePlan.id}`}))),l?a("div",{class:"rateplan-container"},a("wa-select",{size:"small",disabled:c,"data-testid":"adult-child-offering",onchange:e=>this.handleDataChange("adult_child_offering",e),"onwa-hide":e=>{e.stopImmediatePropagation();e.stopPropagation()},value:this.formatVariation(d),defaultValue:this.formatVariation(d)},h?.map((e=>a("wa-option",{value:e,selected:this.formatVariation(d)===e},e)))),a("div",{class:"rateplan-config"},a("div",{class:"rate-total-night-view"},a("ir-input",{disabled:c,class:"fd-rateplan__price-input","onText-change":e=>this.updateRateplanSelection({is_amount_modified:true,rp_amount:Number(e.detail)}),id:`rate-input-${this.ratePlan.id}`,"aria-label":`${this.visibleInventory?.roomtype?.name} ${this.ratePlan.short_name}'s rate`,"aria-describedby":`${this.ratePlan.short_name}'s rate`,value:this.rate,defaultValue:this.rate,placeholder:M.entries.Lcz_Rate||"Rate",mask:"price"},a("span",{slot:"start"},r.symbol)),a("wa-select",{"data-testid":"nigh_stay_select",disabled:c,"onwa-hide":e=>{e.stopImmediatePropagation();e.stopPropagation()},size:"small",class:"fd-rateplan__nights-select",id:ae(),onchange:e=>this.updateRateplanSelection({view_mode:e.target.value}),value:s?.view_mode,defaultValue:s?.view_mode},n.map((e=>a("wa-option",{value:e.CODE_NAME,selected:s?.view_mode===e.CODE_NAME},e.CODE_VALUE_EN))))),(t==="PLUS_BOOKING"||t==="ADD_ROOM")&&a("wa-select",{"data-testid":"inventory_select",disabled:s.visibleInventory===0,class:"fd-rateplan__inventory-select",onchange:e=>this.handleDataChange("totalRooms",e),value:s.reserved?.toString(),defaultValue:s.reserved?.toString(),size:"small","onwa-hide":e=>{e.stopImmediatePropagation();e.stopPropagation()}},Array.from({length:(s.visibleInventory||0)+1},((e,t)=>t)).map((e=>a("wa-option",{value:e?.toString(),selected:s.reserved===e},e))))),t==="EDIT_BOOKING"&&a(o,null,a("ir-custom-button",{variant:"brand","data-testid":"book_property",disabled:c,type:"button",appearance:s.reserved===1?"accent":"outlined",class:"rateplan__booking-btn",onClickHandler:()=>{u();this.reserveRoom();this.bookProperty()}},M.entries.Lcz_Select)),(t==="BAR_BOOKING"||t==="SPLIT_BOOKING")&&a("ir-custom-button",{"data-testid":"book",disabled:c||t==="SPLIT_BOOKING"&&this.isBookDisabled,type:"button",class:"booking-btn",variant:"brand",onClickHandler:()=>this.bookProperty()},M.entries.Lcz_Book)):a("p",{class:"rate-plan-unavailable-text"},M.entries["Lcz_NotAvailable"]||"Not available")))}};Gt.style=Vt;const qt=".sc-igl-reallocation-dialog-h{display:block;text-align:start}.dialog-body.sc-igl-reallocation-dialog{display:grid;gap:1.5rem}.dialog-body__description.sc-igl-reallocation-dialog{margin:0}.dialog-footer.sc-igl-reallocation-dialog{display:flex;justify-content:flex-end;gap:0.75rem}";const Kt=qt;const Wt=class{constructor(a){e(this,a);this.dialogClose=t(this,"dialogClose",7);this.revertBooking=t(this,"revertBooking",7);this.resetModalState=t(this,"resetModalState",7)}get hostEl(){return r(this)}data;selectedRateplan;showRateplanError=false;dialogClose;revertBooking;resetModalState;dialogEl;rateplanSelectEl;eventsService=new We;handleDataChange(e){this.resetState(e);if(e){this.dialogEl?.openModal()}else{this.dialogEl?.closeModal()}}async reallocateUnit(){if(!this.data){return}if(!this.validateRateplanSelection()){return}const{pool:e,toRoomId:t,from_date:a,to_date:i,matchedRatePlan:r}=this.data;try{await this.eventsService.reallocateEvent(e,t,a,i,this.data.rateplans?Number(this.selectedRateplan):r?Number(r?.value):undefined)}catch(t){console.log(t);this.revertBooking.emit(e)}finally{this.dialogEl?.closeModal();this.resetModalState.emit()}}get rateplanOptions(){if(!Array.isArray(this.data?.rateplans)){return[]}return this.data.rateplans.map((e=>({...e,text:this.formatRateplanLabel(e)})))}formatRateplanLabel(e){if(!e){return""}const t=e.custom_text?` | ${e.custom_text}`:"";return`${e.text}${t}`.trim()}hasRateplanRequirement(){return this.rateplanOptions.length>0}validateRateplanSelection(){if(!this.hasRateplanRequirement()){return true}if(!this.selectedRateplan){this.showRateplanError=true;this.focusRateplanSelect();return false}return true}focusRateplanSelect(){const e=this.rateplanSelectEl?.shadowRoot?.querySelector("select")??this.rateplanSelectEl?.querySelector("select");if(e){e.focus()}}resetState(e){if(!e){this.selectedRateplan=undefined;this.showRateplanError=false;return}this.selectedRateplan=undefined;this.showRateplanError=false}handleDialogVisibilityChange=e=>{this.dialogClose.emit(false)};handleRateplanChange=e=>{this.selectedRateplan=e;this.showRateplanError=false};handleCancelClick=()=>{this.dialogEl?.closeModal();this.dialogClose.emit(false)};render(){const e=this.hasRateplanRequirement();return a("ir-dialog",{key:"324fe9c3efbd0e5fb46896badfe6e60e76c9b7e7",label:"Alert",ref:e=>this.dialogEl=e,onIrDialogHide:this.handleDialogVisibilityChange},this.data&&a(o,{key:"353dd201d664423158fc63956b2241c345805455"},a("div",{key:"322fdecf56be41b03685a66f8f2683bce826b4a9",class:"dialog-body"},a("p",{key:"37ab5e3225bcdc1a556aea43c8dc4c3622ff1e72",class:"text-left dialog-body__description m-0 p-0"},this.data.description),e&&a("wa-select",{key:"ec8b5cf9ddc9230e8e0d45a1b459943efe7c36fd","onwa-hide":e=>{e.stopImmediatePropagation();e.stopPropagation()},defaultValue:"","onwa-show":e=>{e.stopImmediatePropagation();e.stopPropagation()},size:"small","aria-invalid":String(this.showRateplanError),onchange:e=>this.handleRateplanChange(e.target.value)},a("wa-option",{key:"2993507fd49d22e4d614ddb81803376d98c9952c",value:""},"Select rate plan..."),this.rateplanOptions.map((e=>a("wa-option",{key:e.value,value:e.value},e.text))))),a("div",{key:"0a01c05ff1361289fbfa8a284348326714fd137c",class:"dialog-footer",slot:"footer"},a("ir-custom-button",{key:"2615b2232aa2beed50824e2731253f8d61008aa0",appearance:"filled",variant:"neutral",onClickHandler:this.handleCancelClick,size:"medium"},"Cancel"),a("ir-custom-button",{key:"4d0bd9b0ae0556ed632dbcb2d33205e342445035",variant:"brand",onClickHandler:()=>this.reallocateUnit(),size:"medium",loading:Ce("/ReAllocate_Exposed_Room")},"Confirm"))))}static get watchers(){return{data:["handleDataChange"]}}};Wt.style=Kt;const Xt=".sc-igl-room-type-h{display:block}.margin-bottom-8.sc-igl-room-type{margin-bottom:8px !important}.roomtype__name.sc-igl-room-type{margin:0;padding:0;font-family:var(--wa-font-family-heading);font-weight:var(--wa-font-weight-heading);line-height:var(--wa-line-height-condensed);text-wrap:balance;margin-bottom:0.5rem;color:var(--wa-color-text-normal)}";const Jt=Xt;const Qt=class{constructor(t){e(this,t)}roomType;bookingType="PLUS_BOOKING";ratePricingMode=[];roomTypeId=null;currency;isBookDisabled;validBookingTypes=["PLUS_BOOKING","ADD_ROOM","EDIT_BOOKING","SPLIT_BOOKING"];render(){const e=this.validBookingTypes.includes(this.bookingType);return a(i,{key:"62496e6083c6561c8a8d1472c90e2d1b4ac7e5b7"},e&&this.roomType.rateplans?.length>0&&a("h5",{key:"833fb22b3183108c1c3761e0a27575985e918eb1",class:"roomtype__name"},this.roomType.name),this.roomType.rateplans?.map((t=>{if(!!t.variations){let i=this.roomTypeId===this.roomType.id;const r=g(this.roomType.id,t.id);return a("igl-rate-plan",{isBookDisabled:this.isBookDisabled,visibleInventory:r,key:`rate-plan-${t.id}`,ratePricingMode:this.ratePricingMode,class:e?"":"",currency:this.currency,ratePlan:t,roomTypeId:this.roomType.id,bookingType:this.bookingType,shouldBeDisabled:i})}return null})))}};Qt.style=Jt;const Zt=Z.object({roomtype_id:Z.coerce.number(),unit_id:Z.coerce.number(),rateplan_id:Z.coerce.number()});const ea=".sc-igl-split-booking-h{display:block}.sc-igl-split-booking-h{display:flex;flex-direction:column;flex:1 1 0%;height:100%}.bulk-sheet-container.sc-igl-split-booking{display:flex;flex-direction:column;flex:1;min-height:0;gap:1rem}.animated-container.sc-igl-split-booking{transition:all 0.5s ease}.physical-room.sc-igl-split-booking{margin-left:1rem !important}.physical-room.sc-igl-split-booking>td.sc-igl-split-booking:last-child{padding-left:1rem}.room-type-list.sc-igl-split-booking{padding:0;margin:0}.room-type-list.sc-igl-split-booking>li.sc-igl-split-booking,.physical-room.sc-igl-split-booking,.room-type-row.sc-igl-split-booking{list-style:none}";const ta=ea;const aa=".sc-igl-split-booking-h{height:100%}.sheet-container.sc-igl-split-booking{display:flex !important;flex-direction:column !important;background:white;height:100vh;gap:1rem;z-index:1000}.sheet-container.sc-igl-split-booking{height:-webkit-fill-available;height:100vh;height:100dvh}.sheet-footer.sc-igl-split-booking{position:sticky;bottom:0;z-index:20;background:white;border-top:1px solid #e4e5ec;display:flex;flex-direction:column;padding:1rem;gap:0.5rem}.sheet-header.sc-igl-split-booking{position:sticky;top:0;z-index:10;background:white}.sheet-body.sc-igl-split-booking{flex:1 1 0%}@media (min-width: 768px){.sheet-footer.sc-igl-split-booking{flex-direction:row;align-items:center}}";const ia=aa;const ra=class{constructor(a){e(this,a);this.closeModal=t(this,"closeModal",7)}booking;identifier;selectedDates;room;roomTypes=[];selectedUnit={};isLoading;errors;mealPlanOptions=null;closeModal;defaultDates;bookingService=new s;componentWillLoad(){this.room=this.getRoom();this.defaultDates={...this.generateDates(this.room)};this.selectedDates={...this.defaultDates};console.log(this.booking)}getRoom(){if(!this.booking){throw new Error("Missing booking")}if(!this.identifier){throw new Error("Missing Identifier")}const e=this.booking.rooms.find((e=>e.identifier===this.identifier));if(!e){throw new Error(`Couldn't find room with identifier ${this.identifier}`)}return e}generateDates(e){let t=me(e.from_date,"YYYY-MM-DD");const a=me(e.to_date,"YYYY-MM-DD").add(-1,"days");const i=me();if(t.isBefore(i)){t=i.clone()}if(t.isSame(i)){return{from_date:t,to_date:a}}if(t.isSameOrAfter(i)){return{from_date:t.clone().add(1,"days"),to_date:a}}return{from_date:i.clone().add(1,"days"),to_date:a}}async checkBookingAvailability(){b(false);const e=this.selectedDates.from_date.format("YYYY-MM-DD");const t=this.selectedDates.to_date.format("YYYY-MM-DD");const a=this.booking.agent!==null;try{const i=await this.bookingService.getBookingAvailability({from_date:e,to_date:t,propertyid:this.booking.property.id,adultChildCount:{adult:1,child:0},language:"en",room_type_ids:[],currency:this.booking.currency,agent_id:a?this.booking.agent.id:null,is_in_agent_mode:a,room_type_ids_to_update:[]});this.roomTypes=i}catch(e){console.error("Error initializing booking availability:",e)}}async doReservation(){try{this.isLoading=true;this.errors=null;const e=Zt.parse(this.selectedUnit);const t=this.booking.rooms.filter((e=>e.identifier!==this.identifier));const a=this.room.in_out?.code==="001"?me().isBefore(this.selectedDates.from_date)?false:true:false;let i=[...t,{...this.room,from_date:this.room.from_date,to_date:this.selectedDates.from_date.format("YYYY-MM-DD"),days:this.room.days.filter((e=>me(e.date,"YYYY-MM-DD").isBefore(this.selectedDates.from_date,"dates"))),departure_time:null},{...this.room,identifier:null,in_out:a?this.room.in_out:{code:"000"},check_in:a,assigned_units_pool:null,parent_room_identifier:this.room.identifier,is_split:true,roomtype:{id:e.roomtype_id},rateplan:{id:e.rateplan_id||this.room.rateplan.id},departure_time:this.room.departure_time,unit:{id:e.unit_id},from_date:this.selectedDates.from_date.format("YYYY-MM-DD"),days:this.room.days.filter((e=>me(e.date,"YYYY-MM-DD").isSameOrAfter(this.selectedDates.from_date,"dates")))}];const r={assign_units:true,is_pms:true,is_direct:this.booking.is_direct,is_backend:true,is_in_loyalty_mode:this.booking.is_in_loyalty_mode,promo_key:this.booking.promo_key,extras:this.booking.extras,agent:this.booking.agent,booking:{from_date:this.booking.from_date,to_date:this.booking.to_date,remark:this.booking.remark,booking_nbr:this.booking.booking_nbr,property:this.booking.property,booked_on:this.booking.booked_on,source:this.booking.source,rooms:i,currency:this.booking.currency,arrival:this.booking.arrival,guest:this.booking.guest},pickup_info:this.booking.pickup_info};console.log(r);await this.bookingService.doReservation(r);this.closeModal.emit(null)}catch(e){const t={};if(e instanceof ee){console.error(e);e.issues.forEach((e=>{t[e.path[0]]=true}));this.errors={...t}}}finally{this.isLoading=false}}updateSelectedUnit(e){const t={...this.selectedUnit,...e};const a=S?.property?.roomtypes;const i=z({rateplan_id:this.room.rateplan.id.toString(),roomTypeId:t?.roomtype_id,roomTypes:a});const r=Object.prototype.hasOwnProperty.call(e,"rateplan_id");if(Array.isArray(i)){this.mealPlanOptions=i;if(!r){delete t.rateplan_id}}else{this.mealPlanOptions=null;if(!r){if(i){t.rateplan_id=Number(i.value)}else{delete t.rateplan_id}}}this.selectedUnit=t}render(){return a("form",{key:"5e4ce36ce2a0d214f42f1eed57c79301a077c1d6",onSubmit:e=>{e.preventDefault();this.doReservation()},class:"sheet-container"},a("ir-title",{key:"22a2cd2203b0d94254d0b8d2af21223c0484ab6b",class:"px-1 sheet-header mb-0",displayContext:"sidebar",onCloseSideBar:()=>this.closeModal.emit(),label:`Split unit ${this.room?.unit["name"]}`}),a("section",{key:"f233b65a70988f630b724727050561b147752c96",class:"px-1 sheet-body"},a("div",{key:"1a12eefe89c16f98fa46809fcc15a196fa2d17c9",class:"d-flex align-items-center",style:{gap:"0.5rem"}},a("div",{key:"2bfd8f26f9afcd3cf1de2ac67005a028e0adc7bf"},a("ir-date-view",{key:"94ef7fcc567d56a20b127c9b0acc49c7cbf5a8ec",from_date:this.room.from_date,to_date:this.room.to_date,showDateDifference:false})),a("p",{key:"ebee0600f8a336e481699cbed61af8ed4263deda",class:"m-0 p-0"},this.room.rateplan.short_name," ",this.room.rateplan.is_non_refundable?M.entries.Lcz_NonRefundable:"")),a("div",{key:"cb54616b6f80dd9ff9b471d7e6caca2d03c3d33c",class:"d-flex align-items-center mt-1",style:{gap:"0.5rem"}},a("span",{key:"2b3eb6cf63dcb355f83503696b50c1f3831848b2"},"From:"),a("ir-date-picker",{key:"5be16982fb61c47764aba04a74e72a395f0a324e","data-testid":"pickup_arrival_date",date:this.selectedDates?.from_date?.format("YYYY-MM-DD"),maxDate:this.defaultDates?.to_date.format("YYYY-MM-DD"),minDate:this.defaultDates?.from_date.format("YYYY-MM-DD"),emitEmptyDate:true,onDateChanged:e=>{this.selectedDates={...this.selectedDates,from_date:e.detail.start}}},a("input",{key:"b64e1da98cf787c44896901e50aaa3079127937c",type:"text",slot:"trigger",value:this.selectedDates.from_date?this.selectedDates.from_date.format("MMM DD, YYYY"):null,class:`form-control input-sm  text-center`,style:{width:"120px"}})),a("ir-button",{key:"0026ad17190b76fa86970de951a75971b3e94e4d",isLoading:Ce("/Check_Availability"),text:"Check available units",size:"sm",onClick:()=>this.checkBookingAvailability()})),this.errors?.roomtype_id&&a("p",{key:"42e29b042487536a6b62eff267f5550351cc0c3a",class:"text-danger text-left mt-2"},"Please select a room"),a("ul",{key:"b7775043caa377cfd0d6cddf2b48b23e7f668de7",class:"room-type-list mt-2"},this.roomTypes?.map((e=>{if(!e.is_available_to_book){return null}const t=(()=>{const t=new Map;for(const a of e.rateplans??[]){for(const e of a.assignable_units??[]){if(e.Is_Fully_Available){t.set(e.pr_id,e.name)}}}return Array.from(t,(([e,t])=>({id:e,name:t})))})();return a(o,null,a("li",{key:`roomTypeRow-${e.id}`,class:`room-type-row`},a("div",{class:"d-flex choice-row"},a("span",{class:"text-left room-type-name"},e.name))),t.map(((t,i)=>{const r=i===e.physicalrooms.length-1?"pb-1":"";const o=this.selectedUnit?.unit_id===t.id&&Array.isArray(this.mealPlanOptions)&&this.mealPlanOptions.length>0;return a("li",{key:`physicalRoom-${t.id}-${i}`,class:`physical-room ${r}`},a("div",{class:"d-flex choice-row align-items-center",style:{gap:"0.5rem"}},a("ir-radio",{class:"pl-1",name:"unit",checked:this.selectedUnit?.unit_id===t.id,onCheckChange:()=>this.updateSelectedUnit({roomtype_id:e.id,unit_id:t.id}),label:t.name}),o&&a("ir-select",{firstOption:"Select a new rateplan...",error:this.errors?.rateplan_id&&!this.selectedUnit?.rateplan_id,onSelectChange:e=>{const t=e.detail===null||e.detail===undefined||e.detail===""?undefined:Number(e.detail);this.updateSelectedUnit({rateplan_id:t})},data:this.mealPlanOptions.map((e=>({...e,text:e.text+`${e.custom_text?" | ":""}${e.custom_text}`})))})))})))})))),a("div",{key:"16e3a2d58c179c8793684f617171df681bba6550",class:"sheet-footer"},a("ir-button",{key:"fc9a406acb33888d7bd4f72c941fec85ac9ad0d9",text:M.entries.Lcz_Cancel,btn_color:"secondary",class:"flex-fill",onClickHandler:()=>this.closeModal.emit(null)}),a("ir-button",{key:"0d4ef4625e928245e355388b79ed438bf09479d8",isLoading:this.isLoading,text:M.entries.Lcz_Confirm,btn_type:"submit",class:"flex-fill"})))}};ra.style=ta+ia;const oa=".sc-igl-tba-booking-view-h{display:block}.guestTitle.sc-igl-tba-booking-view{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:2px;margin-bottom:5px;margin-top:5px;padding-left:5px;padding-right:5px}.guestTitle.selectedOrder.sc-igl-tba-booking-view{background-color:#f9f9c9}.pointer.sc-igl-tba-booking-view{cursor:pointer}hr.sc-igl-tba-booking-view{margin-top:8px;margin-bottom:0px}.bookingContainer.sc-igl-tba-booking-view{background-color:#ececec}.actionsContainer.sc-igl-tba-booking-view{display:flex;align-items:center;padding:5px !important;width:100%;gap:16px}.room-select.sc-igl-tba-booking-view{flex:1}.selectContainer.sc-igl-tba-booking-view{width:195px;margin-right:8px}.buttonsContainer.sc-igl-tba-booking-view{box-sizing:border-box;display:flex;align-items:center;justify-content:flex-end;padding:0;margin:0;gap:0.5rem}";const na=oa;const sa=class{constructor(a){e(this,a);this.highlightToBeAssignedBookingEvent=t(this,"highlightToBeAssignedBookingEvent",7);this.openCalendarSidebar=t(this,"openCalendarSidebar",7);this.addToBeAssignedEvent=t(this,"addToBeAssignedEvent",7);this.scrollPageToRoom=t(this,"scrollPageToRoom",7);this.assignRoomEvent=t(this,"assignRoomEvent",7)}calendarData;selectedDate;eventData={};categoriesData={};categoryId;categoryIndex;eventIndex;renderAgain=false;selectedRoom=-1;isLoading=null;highlightSection=false;allRoomsList=[];toBeAssignedService=new Dt;highlightToBeAssignedBookingEvent;openCalendarSidebar;addToBeAssignedEvent;scrollPageToRoom;assignRoomEvent;componentShouldUpdate(e,t,a){if(a==="selectedDate"&&e!==t){this.highlightSection=false;this.selectedRoom=-1;return true}else if(a==="eventData"&&e!==t){this.selectedRoom=-1;return true}return true}componentWillLoad(){if(this.categoryIndex===0&&this.eventIndex===0){setTimeout((()=>{this.handleHighlightAvailability()}),100)}}highlightBookingEvent(e){let t=e.detail.data;if(t.bookingId!=this.eventData.ID){this.highlightSection=false;this.selectedRoom=-1;this.renderView()}else{this.highlightSection=true;this.renderView()}}onSelectRoom(e){if(e.stopImmediatePropagation){e.stopImmediatePropagation();e.stopPropagation()}this.selectedRoom=parseInt(e.target.value)}async handleAssignUnit(e,t=false){try{e.stopImmediatePropagation();e.stopPropagation();if(this.selectedRoom){this.isLoading=t?"checkin":"default";const e=await this.toBeAssignedService.assignUnit({booking_nbr:this.eventData.BOOKING_NUMBER,identifier:this.eventData.ID,pr_id:this.selectedRoom,check_in:t});const a=e.rooms.find((e=>e.identifier===this.eventData.identifier));console.log("room=>",a);if(a&&t){const{adult_nbr:e,children_nbr:t,infant_nbr:i}=a.occupancy;window.dispatchEvent(new CustomEvent("openCalendarSidebar",{detail:{type:"room-guests",payload:{identifier:this.eventData.ID,bookingNumber:this.eventData.BOOKING_NUMBER,checkin:false,roomName:a.unit?.name??"",sharing_persons:a.sharing_persons,totalGuests:e+t+i}},bubbles:true,composed:true}));console.log("event emitted directly to window ðŸ”¥")}let i={...this.eventData,PR_ID:this.selectedRoom};this.addToBeAssignedEvent.emit({key:"tobeAssignedEvents",data:[i]});this.assignRoomEvent.emit({key:"assignRoom",data:i})}}catch(e){console.log(e)}finally{this.isLoading=null}}handleHighlightAvailability(){this.highlightToBeAssignedBookingEvent.emit({key:"highlightBookingId",data:{bookingId:this.eventData.ID,fromDate:this.eventData.FROM_DATE}});if(!this.selectedDate){return}let e=[];let t=[];e=this.eventData.availableRooms.map((e=>{t.push({calendar_cell:null,id:e.PR_ID,name:e.roomName});return{...e,defaultDateRange:this.eventData.defaultDateRange,identifier:this.eventData.identifier}}));this.allRoomsList=t;this.addToBeAssignedEvent.emit({key:"tobeAssignedEvents",data:e});this.scrollPageToRoom.emit({key:"scrollPageToRoom",id:this.categoryId,refClass:"category_"+this.categoryId});this.renderView()}handleCloseAssignment(e){e.stopImmediatePropagation();e.stopPropagation();this.highlightSection=false;this.highlightToBeAssignedBookingEvent.emit({key:"highlightBookingId",data:{bookingId:"----"}});this.onSelectRoom({target:{value:""}});this.selectedRoom=-1;this.addToBeAssignedEvent.emit({key:"tobeAssignedEvents",data:[]});this.renderView()}renderView(){this.renderAgain=!this.renderAgain}canCheckIn(){return B({from_date:this.eventData.FROM_DATE,to_date:this.eventData.TO_DATE})}render(){return a(i,{key:"7341decc28c0123c2f3356a4d0a418231d153021"},a("div",{key:"056ef55b3f32cfc2a12b7a58fb37151ae76603fd",class:"bookingContainer",onClick:()=>this.handleHighlightAvailability()},a("div",{key:"9807bd494d24de844ec23395c0f5fb3af2c3fd85",class:`guestTitle ${this.highlightSection?"selectedOrder":""} pointer font-small-3`,"data-toggle":"tooltip","data-placement":"top","data-original-title":"Click to assign unit"},`Book# ${this.eventData.BOOKING_NUMBER} - ${this.eventData.NAME}`),a("div",{key:"44ffdaf75dd43d804d3fbd79bc3555d509d8a2e9",class:"row m-0 p-0 actionsContainer"},a("select",{key:"8b88612fd614554480fc2882e3dbba885c4633c0",class:"form-control input-sm room-select flex-grow-1",id:ae(),onChange:e=>this.onSelectRoom(e)},a("option",{key:"4053fffc08f2528aeb8a86c713f8d6f4510b3669",value:"",selected:this.selectedRoom==-1},M.entries.Lcz_AssignUnit),this.allRoomsList.map((e=>a("option",{value:e.id,selected:this.selectedRoom==e.id},e.name)))),this.highlightSection?a("div",{class:"buttonsContainer bg-red"},a("button",{type:"button",class:"btn btn-secondary btn-sm mx-0",onClick:e=>this.handleCloseAssignment(e)},a("svg",{class:"m-0 p-0",xmlns:"http://www.w3.org/2000/svg",height:"12",width:"9",viewBox:"0 0 384 512"},a("path",{fill:"currentColor",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"})))):null),a("div",{key:"7c712c1b0733ba98e35a2d0da38c502788e53ffa",class:"d-flex align-items-center ",style:{gap:"0.5rem",paddingInline:"5px"}},a("ir-button",{key:"ada53ea12eff33a1a72784d97fb615182d2b6b6e",isLoading:this.isLoading==="default",size:"sm",class:"flex-grow-1",text:M.entries.Lcz_Assign,onClickHandler:e=>this.handleAssignUnit(e),btn_disabled:this.selectedRoom===-1}),this.canCheckIn()&&a("ir-button",{key:"1ddb0780ac06f9a57bbbc5498697fe956f46bcd1",isLoading:this.isLoading==="checkin",size:"sm",class:"flex-grow-1",text:M.entries.Lcz_AssignedAndChecIn,onClickHandler:e=>this.handleAssignUnit(e,true),btn_disabled:this.selectedRoom===-1})),a("hr",{key:"cde730248d10fa9b00a051f49f574b8e91cf8b18"})))}};sa.style=na;const la=".sc-igl-tba-category-view-h{display:block}";const ca=la;const da=class{constructor(a){e(this,a);this.assignUnitEvent=t(this,"assignUnitEvent",7)}calendarData;selectedDate;categoriesData={};categoryId;eventDatas;categoryIndex;renderAgain=false;assignUnitEvent;handleAssignRoomEvent(e){e.stopImmediatePropagation();e.stopPropagation();const t=e.detail;this.eventDatas=this.eventDatas.filter((e=>e.ID!=t.data.ID));this.calendarData.bookingEvents.push(t.data);this.assignUnitEvent.emit({key:"assignUnit",data:{RT_ID:this.categoryId,selectedDate:this.selectedDate,assignEvent:t.data,calendarData:this.calendarData}});this.renderView()}getEventView(e,t){return t.map(((t,i)=>a("igl-tba-booking-view",{calendarData:this.calendarData,selectedDate:this.selectedDate,eventData:t,categoriesData:this.categoriesData,categoryId:e,categoryIndex:this.categoryIndex,eventIndex:i,onAssignRoomEvent:e=>this.handleAssignRoomEvent(e)})))}renderView(){this.renderAgain=!this.renderAgain}render(){return a(i,{key:"6b05c470862a0cdf66981bf3ae352b6bd2471ad4"},a("div",{key:"576207263becc2d25d7c0e594d4af17312050139",class:"sectionContainer"},a("div",{key:"94b10ceb876eb87d667640ecbfa2fa55fd26224a",class:"font-weight-bold font-small-3"},this.categoriesData[this.categoryId]?.name),this.getEventView(this.categoryId,this.eventDatas)))}};da.style=ca;const ha=".sc-igl-to-be-assigned-h{--spacing:var(--wa-space-l);display:block;color:var(--wa-color-text-normal);font-size:var(--wa-font-size-s);background-color:var(--wa-color-surface-default);border-inline-end:2px solid var(--wa-color-surface-border)}.fd-to-be-assigned__title.sc-igl-to-be-assigned{align-self:center;flex:1 1 auto;font-style:inherit;font-variant:inherit;font-stretch:inherit;font-family:inherit;font-optical-sizing:inherit;font-size-adjust:inherit;font-kerning:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-language-override:inherit;font-size:var(--wa-font-size-l);font-weight:var(--wa-font-weight-heading);line-height:var(--wa-line-height-condensed);margin:0px;padding:0;color:var(--wa-color-text-normal, black)}.fd-to-be-assigned__header.sc-igl-to-be-assigned{display:flex;align-items:center;justify-content:space-between;padding-inline-start:var(--spacing);padding-block-end:0;padding-inline-end:calc(var(--spacing) - var(--wa-form-control-padding-block));padding-block-start:calc(var(--spacing) - var(--wa-form-control-padding-block));border-bottom:1px solid var(--wa-color-surface-border);padding-bottom:calc(var(--spacing) / 2);box-sizing:border-box;background-color:var(--ir-drawer-background-color, var(--wa-color-surface-default))}.fd-to-be-assigned__header-container.sc-igl-to-be-assigned{position:sticky;top:0;background-color:var(--wa-color-surface-default);z-index:1}.to-be-assigned__body.sc-igl-to-be-assigned{padding:var(--spacing)}.to-be-assigned__body.sc-igl-to-be-assigned .scrollabledArea.sc-igl-to-be-assigned{display:flex;flex-direction:column;gap:1rem}.custom-dropdown.sc-igl-to-be-assigned{cursor:pointer;padding:5px 10px;width:min-content;margin-left:auto;margin-right:auto}.dropdown-toggle.sc-igl-to-be-assigned{all:unset;display:flex;width:max-content;align-items:center;gap:10px}.close_btn_style.sc-igl-to-be-assigned{padding:0.4rem}.close_btn_style.sc-igl-to-be-assigned:hover{background-color:#f6f6f6}.dropdown-menu.sc-igl-to-be-assigned{max-height:250px;overflow-y:auto}.tobeAssignedHeader.sc-igl-to-be-assigned{font-weight:500;letter-spacing:0.05rem;font-size:1.12rem;padding:0;margin:0}.assignment_header.sc-igl-to-be-assigned{display:flex;align-items:center;justify-content:space-between;padding-top:5px;margin-bottom:1rem}.dropdown-toggle.sc-igl-to-be-assigned::after{content:none;display:none}.dropdown-toggle.sc-igl-to-be-assigned .caret-icon.sc-igl-to-be-assigned{transition:transform 0.2s ease}.show.sc-igl-to-be-assigned .caret-icon.sc-igl-to-be-assigned{transform:rotate(-180deg)}.stickyHeader.sc-igl-to-be-assigned{position:-webkit-sticky;position:sticky;top:0;background-color:#ffffff;z-index:1}.pointer.sc-igl-to-be-assigned{cursor:pointer}.dots.sc-igl-to-be-assigned{display:flex;align-items:center;justify-content:center;margin:0 3px;padding:0}.dot.sc-igl-to-be-assigned{width:5px;height:5px;margin:5px 4px 0;background-color:#6b6f82;border-radius:50%;animation:dotFlashing 1s infinite linear alternate}.dot.sc-igl-to-be-assigned:nth-child(2){animation-delay:0.2s}.dot.sc-igl-to-be-assigned:nth-child(3){animation-delay:0.4s}@keyframes dotFlashing{0%{opacity:0}50%,100%{opacity:1}}";const pa=ha;const ua=class{constructor(a){e(this,a);this.optionEvent=t(this,"optionEvent",7);this.reduceAvailableUnitEvent=t(this,"reduceAvailableUnitEvent",7);this.showBookingPopup=t(this,"showBookingPopup",7);this.addToBeAssignedEvent=t(this,"addToBeAssignedEvent",7);this.highlightToBeAssignedBookingEvent=t(this,"highlightToBeAssignedBookingEvent",7)}unassignedDatesProp;propertyid;from_date;to_date;calendarData;loadingMessage;showDatesList=false;renderAgain=false;orderedDatesList=[];noScroll=false;selectedDateDisplay="";optionEvent;reduceAvailableUnitEvent;showBookingPopup;addToBeAssignedEvent;highlightToBeAssignedBookingEvent;isGotoToBeAssignedDate=false;isLoading=true;selectedDate=null;data={};today=new Date;categoriesData={};toBeAssignedService=new Dt;unassignedDates;componentWillLoad(){this.reArrangeData();this.loadingMessage=M.entries.Lcz_FetchingUnAssignedUnits}handleUnassignedDatesToBeAssignedChange(e){const{fromDate:t,toDate:a,data:i}=e;let r=new Date(t);r.setHours(0);r.setMinutes(0);r.setSeconds(0);let o=r.getTime();while(o<=new Date(a).getTime()){if(i&&!i[o]&&this.unassignedDates.hasOwnProperty(o)){delete this.unassignedDates[o]}else if(i&&i[o]){this.unassignedDates[o]=i[o]}o=me(o).add(1,"days").toDate().getTime()}this.data={...this.unassignedDates};this.orderedDatesList=Object.keys(this.data).sort(((e,t)=>parseInt(e)-parseInt(t)));if(this.orderedDatesList.length){if(this.selectedDate===null){this.selectedDate=this.orderedDatesList[0]}if(this.selectedDate&&this.data[this.selectedDate]){this.selectedDateDisplay=this.data[this.selectedDate]?.dateStr||this.selectedDateDisplay;this.showForDate(this.selectedDate,false)}else{this.isLoading=false;this.renderView()}}else{this.selectedDate=null;this.selectedDateDisplay="";this.isLoading=false;this.renderView()}}handleAssignUnit(e){const t=e.detail;const a=t.data;e.stopImmediatePropagation();e.stopPropagation();if(t?.key==="assignUnit"&&this.data){if(a?.selectedDate&&this.data[a.selectedDate]){if(this.data[a.selectedDate]?.categories&&Object.keys(this.data[a.selectedDate]?.categories||{})?.length===1){this.isLoading=true;this.noScroll=true}if(a?.RT_ID&&this.data[a.selectedDate]?.categories&&this.data[a.selectedDate].categories[a.RT_ID]&&Array.isArray(this.data[a.selectedDate].categories[a.RT_ID])&&a?.assignEvent?.ID){this.data[a.selectedDate].categories[a.RT_ID]=this.data[a.selectedDate].categories[a.RT_ID].filter((e=>e&&e.ID!==a.assignEvent.ID))}if(a?.calendarData){this.calendarData=a.calendarData}this.renderView()}}}async updateCategories(e,t){try{let a={};const i=await this.toBeAssignedService.getUnassignedRooms({from_date:t.from_date,to_date:t.to_date},this.propertyid,N(new Date(+e)),t.roomsInfo,t.formattedLegendData);i.forEach((e=>{if(!a.hasOwnProperty(e.RT_ID)){a[e.RT_ID]=[e]}else{a[e.RT_ID].push(e)}}));this.unassignedDates[e].categories=a}catch(e){}}async reArrangeData(){try{this.today.setHours(0,0,0,0);this.calendarData.roomsInfo.forEach((e=>{this.categoriesData[e.id]={name:e.name,roomsList:e.physicalrooms,roomIds:e.physicalrooms.map((e=>e.id))}}));this.selectedDate=null;this.unassignedDates=Et();console.log(this.unassignedDates);this.data=this.unassignedDates;this.orderedDatesList=Object.keys(this.data).sort(((e,t)=>parseInt(e)-parseInt(t)));if(!this.selectedDate&&this.orderedDatesList.length){this.selectedDate=this.orderedDatesList[0];this.selectedDateDisplay=this.data[this.selectedDate]?.dateStr||""}else if(!this.orderedDatesList.length){this.selectedDateDisplay=""}}catch(e){console.error("Error fetching unassigned dates:",e)}}async componentDidLoad(){setTimeout((()=>{if(!this.isGotoToBeAssignedDate&&Object.keys(this.unassignedDates).length>0){const e=Object.keys(this.unassignedDates)[0];this.showForDate(e)}}),100)}async gotoDate(e){this.isGotoToBeAssignedDate=true;this.showForDate(e.detail.data);this.showDatesList=false;this.renderView()}handleToBeAssignedDate(e){this.showBookingPopup.emit({key:"calendar",data:new Date(e.detail.data.fromDate).getTime()-864e5,noScroll:false})}async showForDate(e,t=true){try{if(t){this.isLoading=true}if(this.showDatesList){this.showUnassignedDate()}await this.updateCategories(e,this.calendarData);this.addToBeAssignedEvent.emit({key:"tobeAssignedEvents",data:[]});this.showBookingPopup.emit({key:"calendar",data:parseInt(e)-864e5,noScroll:this.noScroll});if(this.isGotoToBeAssignedDate){this.isGotoToBeAssignedDate=false}this.isLoading=false;this.selectedDate=e;this.selectedDateDisplay=this.data[e]?.dateStr||this.selectedDateDisplay;this.renderView()}catch(e){}}getDay(e){const t=new Date(e);const a="default";const i=this.getLocalizedDayOfWeek(t,a);return i+" "+t.getDate()+", "+t.getFullYear()}getLocalizedDayOfWeek(e,t){const a={weekday:"short"};return e.toLocaleDateString(t,a)}handleOptionEvent(e,t=""){this.highlightToBeAssignedBookingEvent.emit({key:"highlightBookingId",data:{bookingId:"----"}});this.addToBeAssignedEvent.emit({key:"tobeAssignedEvents",data:[]});this.optionEvent.emit({key:e,data:t})}showUnassignedDate(){this.showDatesList=!this.showDatesList}getToBeAssignedEntities(){}getCategoryView(){if(this.orderedDatesList.length&&this.selectedDate&&this.data[this.selectedDate]){return Object.entries(this.data[this.selectedDate].categories).map((([e,t],i)=>a("igl-tba-category-view",{calendarData:this.calendarData,selectedDate:this.selectedDate,categoryId:e,categoryIndex:i,categoriesData:this.categoriesData,eventDatas:t,onAssignUnitEvent:e=>this.handleAssignUnit(e)})))}else{return null}}renderView(){this.renderAgain=!this.renderAgain}render(){const e=this.selectedDate?this.data[this.selectedDate]:null;return a(i,{key:"57ba302b97bfdf34db2c810eae2cb422b25d53e9",class:"tobeAssignedContainer pr-1 text-left"},a("div",{key:"f2148a4cb0f2f5a226a07f2f6b30ff7be8df6a1b",class:"fd-to-be-assigned__header-container"},a("div",{key:"e7a1aa12b6f453bf3dea6b70abd48d99520a4f2b",class:"fd-to-be-assigned__header"},a("h2",{key:"b28cba6864f0266ae9411a2f7b21242a0ca878b2",class:"fd-to-be-assigned__title",id:"to-be-assigned-title"},M.entries.Lcz_Assignments),a("ir-custom-button",{key:"99fa87abfa9c4c01e72278884588df365631b62b",size:"medium",onClickHandler:()=>this.handleOptionEvent("closeSideMenu"),appearance:"plain",variant:"neutral"},a("wa-icon",{key:"3497bb1fb67907c02c556a3707b9043e81ddc26c",name:"xmark",variant:"solid",label:"Close","aria-label":"Close",role:"img"}))),Object.keys(this.data).length===0?a("p",null,M.entries.Lcz_AllBookingsAreAssigned):this.isLoading?a("p",{class:"d-flex align-items-center"},a("span",{class:"p-0"},this.loadingMessage),a("div",{class:"dots"},a("div",{class:"dot"}),a("div",{class:"dot"}),a("div",{class:"dot"}))):a("div",{style:{padding:"0.5rem"}},this.orderedDatesList.length?a("div",{class:`custom-dropdown border border-light rounded text-center `+(this.showDatesList?"show":""),id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},a("div",{class:"dropdown-toggle"},a("span",{class:"font-weight-bold"},e?.dateStr||this.selectedDateDisplay),a("svg",{class:"caret-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",height:14,width:14},a("path",{fill:"#6b6f82",d:"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"}))),a("div",{class:"dropdown-menu dropdown-menu-right full-width","aria-labelledby":"dropdownMenuButton"},this.orderedDatesList?.map((e=>a("div",{class:"dropdown-item pointer",onClick:()=>this.showForDate(e)},this.data[e].dateStr))))):M.entries.Lcz_AllBookingsAreAssigned)),a("div",{key:"ab3d743aa50e4460456ecc03e2d6dddf5ccb0862",class:"to-be-assigned__body"},!this.isLoading&&a("div",{key:"3dc4e108d1a418ef4019b65828405df73b209240",class:"scrollabledArea"},this.selectedDate?e&&Object.keys(e.categories).length?this.getCategoryView():a("div",null,M.entries.Lcz_AllAssignForThisDay):null)))}static get watchers(){return{unassignedDatesProp:["handleUnassignedDatesToBeAssignedChange"]}}};ua.style=pa;class fa{queue=[];isProcessing=false;flushTimer=null;options;processor;constructor(e,t){this.processor=e;this.options={maxQueueSize:1e4,onError:e=>console.error("Queue processing error:",e),onBatchProcessed:()=>{},...t}}offer(e){if(this.queue.length>=this.options.maxQueueSize){return false}const t={data:e,timestamp:Date.now(),id:this.generateId()};this.queue.push(t);this.scheduleFlush();return true}offerAll(e){let t=0;for(const a of e){if(this.offer(a)){t++}else{break}}return t}size(){return this.queue.length}isEmpty(){return this.queue.length===0}async flush(){if(this.flushTimer){clearTimeout(this.flushTimer);this.flushTimer=null}await this.processBatch()}clear(){this.queue=[];if(this.flushTimer){clearTimeout(this.flushTimer);this.flushTimer=null}}async shutdown(){await this.flush()}scheduleFlush(){if(this.queue.length>=this.options.batchSize){this.processBatch();return}if(!this.flushTimer){this.flushTimer=setTimeout((()=>{this.processBatch()}),this.options.flushInterval)}}async processBatch(){if(this.isProcessing||this.queue.length===0){return}this.isProcessing=true;try{const e=Math.min(this.options.batchSize,this.queue.length);const t=this.queue.splice(0,e);const a=t.map((e=>e.data));const i=Date.now();await this.processor(a);const r=Date.now()-i;this.options.onBatchProcessed(e,r);if(this.flushTimer){clearTimeout(this.flushTimer);this.flushTimer=null}if(this.queue.length>0){this.scheduleFlush()}}catch(e){this.options.onError(e)}finally{this.isProcessing=false}}generateId(){return ae()}}const ga=".sc-igloo-calendar-h{display:block;position:relative;background-color:#ffffff;height:100%;text-align:center}.igl-calendar.sc-igloo-calendar{display:grid;grid-template-columns:1fr;height:100%}.calendarScrollContainer.sc-igloo-calendar{width:100%;height:100%;overflow:auto;position:relative;white-space:nowrap}.showToBeAssigned.sc-igloo-calendar,.showLegend.sc-igloo-calendar{grid-template-columns:350px 1fr}.showLegend.sc-igloo-calendar{grid-template-columns:auto 1fr}#calendarContainer.sc-igloo-calendar{position:absolute}.legendContainer.sc-igloo-calendar,.tobeAssignedContainer.sc-igloo-calendar{display:none;height:100%;overflow-y:auto;padding-left:0.5em !important;padding-right:0.5em !important}.tobeAssignedContainer.sc-igloo-calendar,.legendContainer.sc-igloo-calendar{padding-left:0em !important;padding-right:0em !important}.showToBeAssigned.sc-igloo-calendar .tobeAssignedContainer.sc-igloo-calendar{display:block}.showLegend.sc-igloo-calendar .legendContainer.sc-igloo-calendar{display:block}.tobeBooked.sc-igloo-calendar{padding-top:8px;padding-bottom:8px;text-align:left}";const ba=ga;const wa=class{constructor(a){e(this,a);this.dragOverHighlightElement=t(this,"dragOverHighlightElement",7);this.moveBookingTo=t(this,"moveBookingTo",7);this.calculateUnassignedDates=t(this,"calculateUnassignedDates",7);this.reduceAvailableUnitEvent=t(this,"reduceAvailableUnitEvent",7);this.revertBooking=t(this,"revertBooking",7);this.openCalendarSidebar=t(this,"openCalendarSidebar",7);this.showRoomNightsDialog=t(this,"showRoomNightsDialog",7)}propertyid;from_date;to_date;language;loadingMessage;currencyName;ticket="";p;baseUrl;get element(){return r(this)}calendarData=new Object;property_id;days=new Array;scrollViewDragging=false;dialogData=null;bookingItem=null;editBookingItem=null;showLegend=false;showPaymentDetails=false;showToBeAssigned=false;unassignedDates={};roomNightsData=null;renderAgain=false;showBookProperty=false;highlightedDate;calDates;isAuthenticated=false;calendarSidebarState;invoiceState=null;dragOverHighlightElement;moveBookingTo;calculateUnassignedDates;reduceAvailableUnitEvent;revertBooking;openCalendarSidebar;showRoomNightsDialog;bookingService=new s;roomService=new Ye;eventsService=new We;toBeAssignedService=new Dt;housekeepingService=new xe;countries=[];visibleCalendarCells={x:[],y:[]};scrollContainer;today="";reachedEndOfCalendar=false;socket;token=new Se;calendarModalEl;salesQueue=new fa(this.processSalesBatch.bind(this),{batchSize:50,flushInterval:1e3,maxQueueSize:5e3,onError:e=>console.error("Batch Sales Update Error:",e)});availabilityQueue=new fa(this.processAvailabilityBatch.bind(this),{batchSize:50,flushInterval:1e3,maxQueueSize:5e3,onError:e=>console.error("Batch Availability Update Error:",e)});roomTypeIdsCache=new Map;tasksEndDate;dialogEl;componentWillLoad(){if(this.baseUrl){this.token.setBaseUrl(this.baseUrl)}this.init()}componentDidLoad(){this.scrollToElement(this.today)}async handleDeleteEvent(e){try{e.stopImmediatePropagation();e.preventDefault();await this.eventsService.deleteEvent(e.detail)}catch(e){}}async handleCalendarSidebarEvents(e){console.log("hit ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥");e.stopImmediatePropagation();e.stopPropagation();this.calendarSidebarState=e.detail}scrollPageToRoom(e){let t=e.detail.refClass;this.scrollContainer=this.scrollContainer||this.element.querySelector(".calendarScrollContainer");const a=this.element.querySelector(".topLeftCell");const i=this.element.querySelector("."+t);if(i){this.scrollContainer.scrollTo({top:0});const e=i.getBoundingClientRect();const t=this.scrollContainer.getBoundingClientRect();const r=a.getBoundingClientRect();this.scrollContainer.scrollTo({top:e.top-t.top-r.height-e.height})}}handleShowDialog(e){e.stopImmediatePropagation();e.stopPropagation();this.dialogData=e.detail;if(!["checkin","reallocate","checkout"].includes(this.dialogData.reason)){this.calendarModalEl?.openModal()}if(this.dialogData.reason==="checkin"){this.openCalendarSidebar.emit({type:"room-guests",payload:this.dialogData.sidebarPayload})}}handleShowRoomNightsDialog(e){this.roomNightsData=e.detail}handleBookingDatasChange(e){e.stopPropagation();e.stopImmediatePropagation();let t=[...this.calendarData.bookingEvents];t=t.filter((e=>e.ID!=="NEW_TEMP_EVENT"));t.push(...e.detail.filter((e=>e.STATUS==="PENDING-CONFIRMATION")));this.updateBookingEventsDateRange(e.detail);this.calendarData={...this.calendarData,bookingEvents:t}}handleUpdateBookingEvent(e){e.stopPropagation();e.stopImmediatePropagation();const t=e.detail;this.calendarData={...this.calendarData,bookingEvents:this.calendarData.bookingEvents.map((e=>{if(t.ID===e.ID){return t}return e}))}}showBookingPopupEventDataHandler(e){e.preventDefault();e.stopImmediatePropagation();this.onOptionSelect(e)}updateEventDataHandler(e){let t=this.calendarData.bookingEvents.find((t=>t.id===e.detail.id));if(t&&e.detail&&e.detail.data){Object.entries(e.detail.data).forEach((([e,a])=>{t[e]=a}))}}dragOverEventDataHandler(e){if(e.detail.id==="CALCULATE_DRAG_OVER_BOUNDS"){let t=document.querySelector("igl-cal-header .topLeftCell");let a=document.querySelectorAll(".headersContainer .headerCell");let i=document.querySelectorAll(".bodyContainer .roomRow .roomTitle");this.visibleCalendarCells={x:[],y:[]};a.forEach((e=>{const a=e;this.visibleCalendarCells.x.push({left:a.offsetLeft+t.offsetWidth,width:a.offsetWidth,id:a.getAttribute("data-day")})}));i.forEach((e=>{const t=e;this.visibleCalendarCells.y.push({top:t.offsetTop,height:t.offsetHeight,id:t.getAttribute("data-room")})}));this.highlightDragOver(true,e.detail.data)}else if(e.detail.id==="DRAG_OVER"){this.highlightDragOver(true,e.detail.data)}else if(e.detail.id==="DRAG_OVER_END"){this.highlightDragOver(false,e.detail.data)}else if(e.detail.id==="STRETCH_OVER_END"){this.highlightDragOver(false,e.detail.data)}}ticketChanged(e,t){if(e===t){return}this.token.setToken(this.ticket);this.initializeApp()}init(){this.calDates={from:this.from_date,to:this.to_date};if(this.ticket!==""){this.token.setToken(this.ticket);this.initializeApp()}this.calDates={from:this.from_date,to:this.to_date};Yt("unassigned_dates",(e=>{if(Object.keys(e).length===0&&this.highlightedDate!==""){this.highlightedDate=""}}))}renderModalBody(){switch(this.dialogData?.reason){case"checkin":{const e=this.dialogData.roomName;if(e){return`Are you sure you want to check in unit ${e}?`}return`Are you sure you want to check in this unit?`}case"checkout":{return"Are you sure you want to Check Out this unit?"}case"reallocate":return this.dialogData?.description||"";case"stretch":return"Warning ";default:return"Unknown modal content"}}setUpCalendarData(e,t){this.calendarData.currency=e["My_Result"].currency;this.calendarData.allowedBookingSources=e["My_Result"].allowed_booking_sources;this.calendarData.adultChildConstraints=e["My_Result"].adult_child_constraints;this.calendarData.legendData=this.getLegendData(e);this.calendarData.is_vacation_rental=e["My_Result"].is_vacation_rental;this.calendarData.from_date=t.My_Params_Get_Rooming_Data.FROM;this.calendarData.to_date=t.My_Params_Get_Rooming_Data.TO;this.calendarData.startingDate=new Date(t.My_Params_Get_Rooming_Data.FROM).getTime();this.calendarData.endingDate=new Date(t.My_Params_Get_Rooming_Data.TO).getTime();this.calendarData.formattedLegendData=P(this.calendarData.legendData);let a=t.myBookings||[];a=a.filter((e=>{const t=me(e.TO_DATE,"YYYY-MM-DD");const a=me(e.FROM_DATE,"YYYY-MM-DD");return!t.isSame(a)}));this.calendarData.bookingEvents=a;this.calendarData.toBeAssignedEvents=[]}async initializeApp(){try{let e=this.propertyid;if(!this.propertyid&&!this.p){throw new Error("Property ID or username is required")}let t=null;if(!e){console.log(e);const a=await this.roomService.getExposedProperty({id:0,aname:this.p,language:this.language,is_backend:true,include_units_hk_status:true,include_sales_rate_plans:true});t=a;e=a.My_Result.id}this.property_id=e;const a=[this.bookingService.getCalendarData(e,this.from_date,this.to_date),this.bookingService.getCountries(this.language),this.roomService.fetchLanguage(this.language),this.housekeepingService.getExposedHKSetup(this.property_id)];if(this.propertyid){a.push(this.roomService.getExposedProperty({id:this.propertyid,language:this.language,is_backend:true,include_units_hk_status:true,include_sales_rate_plans:true}))}const i=await Promise.all(a);this.tasksEndDate=me().add(30,"days").format("YYYY-MM-DD");this.getHousekeepingTasks({from_date:me().format("YYYY-MM-DD"),to_date:this.tasksEndDate});if(!t){t=i[i.length-1]}const[r,o]=i;oe.days=r.days;oe.months=r.months;this.setRoomsData(t);this.countries=o;this.setUpCalendarData(t,r);let n=t["My_Result"]["allowed_payment_methods"];this.showPaymentDetails=n.some((e=>e.code==="001"||e.code==="004"));this.updateBookingEventsDateRange(this.calendarData.bookingEvents);this.updateBookingEventsDateRange(this.calendarData.toBeAssignedEvents);this.today=this.transformDateForScroll(new Date);let s=new Date(this.calendarData.startingDate);s.setHours(0,0,0,0);this.days=r.days;this.calendarData.days=this.days;this.calendarData.monthsInfo=r.months;oe.fromDate=this.calendarData.from_date;oe.toDate=this.calendarData.to_date;setTimeout((()=>{this.scrollToElement(this.today)}),200);if(!this.calendarData.is_vacation_rental){const e=await this.toBeAssignedService.getUnassignedDates(this.property_id,this.from_date,this.to_date);this.unassignedDates={fromDate:this.from_date,toDate:this.to_date,data:{...this.unassignedDates,...e}};this.calendarData={...this.calendarData,unassignedDates:e};St(e)}this.socket=ke("https://realtime.igloorooms.com/");this.socket.on("MSG",(async e=>{await this.handleSocketMessage(e)}))}catch(e){console.error("Initializing Calendar Error",e)}}async getHousekeepingTasks({from_date:e,to_date:t}){const{tasks:a}=await this.housekeepingService.getHkTasks({property_id:this.property_id,from_date:e,to_date:t,housekeepers:[],cleaning_frequency:(S.cleaning_frequency??De?.hk_criteria?.cleaning_frequencies[0])?.code,dusty_window:De?.hk_criteria?.dusty_periods[0]?.code,highlight_window:De?.hk_criteria?.highlight_checkin_options[0]?.code});de(a)}async handleSocketMessage(e){const t=JSON.parse(e);if(!t){return}const{REASON:a,KEY:i,PAYLOAD:r}=t;if(i.toString()!==this.property_id.toString()){return}let o;if(["DELETE_CALENDAR_POOL","GET_UNASSIGNED_DATES"].includes(a)){o=r}else{o=JSON.parse(r)}console.log({[a]:o});const n={DORESERVATION:this.handleDoReservation,BLOCK_EXPOSED_UNIT:this.handleBlockExposedUnit,ASSIGN_EXPOSED_ROOM:this.handleAssignExposedRoom,REALLOCATE_EXPOSED_ROOM_BLOCK:this.handleReallocateExposedRoomBlock,DELETE_CALENDAR_POOL:this.handleDeleteCalendarPool,GET_UNASSIGNED_DATES:this.handleGetUnassignedDates,UPDATE_CALENDAR_AVAILABILITY:e=>this.availabilityQueue.offer(e),CHANGE_IN_DUE_AMOUNT:this.handleChangeInDueAmount,CHANGE_IN_BOOK_STATUS:this.handleChangeInBookStatus,NON_TECHNICAL_CHANGE_IN_BOOKING:this.handleNonTechnicalChangeInBooking,ROOM_STATUS_CHANGED:this.handleRoomStatusChanged,UNIT_HK_STATUS_CHANGED:this.handleUnitHKStatusChanged,SHARING_PERSONS_UPDATED:this.handleSharingPersonsUpdated,ROOM_TYPE_CLOSE:e=>this.salesQueue.offer({...e,is_available_to_book:false}),ROOM_TYPE_OPEN:e=>this.salesQueue.offer({...e,is_available_to_book:true}),HK_SKIP:this.handleHkSkip,SET_ROOM_CALENDAR_EXTRA:this.handleRoomCalendarExtra};const s=n[a];if(s){await s.call(this,o)}else{console.warn(`Unhandled REASON: ${a}`)}}handleRoomCalendarExtra(e){this.calendarData={...this.calendarData,bookingEvents:[...this.calendarData.bookingEvents.map((t=>{if(t.IDENTIFIER===e.room_identifier){const a=e.value?JSON.parse(e.value):null;const i=a?t.ROOM_INFO.calendar?{...t.ROOM_INFO.calendar,...a}:a:null;return{...t,ROOM_INFO:{...t.ROOM_INFO,calendar_extra:i}}}return t}))]}}handleSharingPersonsUpdated(e){console.log("sharing persons updated",e);this.calendarData={...this.calendarData,bookingEvents:[...this.calendarData.bookingEvents.map((t=>{if(t.IDENTIFIER===e.identifier){const a=e.guests?.find((e=>e.is_main));return{...t,NAME:he(a.first_name,a.last_name),ROOM_INFO:{...t.ROOM_INFO,sharing_persons:e.guests}}}return t}))]}}handleRoomStatusChanged(e){this.calendarData={...this.calendarData,bookingEvents:[...this.calendarData.bookingEvents.map((t=>{if(t.IDENTIFIER===e.room_identifier){const a=pe({from_date:t.FROM_DATE,to_date:t.TO_DATE,in_out:{...t.ROOM_INFO.in_out,code:e.status},status_code:t.BASE_STATUS_CODE});return{...t,ROOM_INFO:{...t.ROOM_INFO,in_out:{...t.ROOM_INFO.in_out,code:e.status}},CHECKIN:e.status==="001",CHECKOUT:e.status==="002",STATUS:a}}return t}))]}}handleHkSkip(e){ue({date:e.DATE,unitId:e.PR_ID})}handleUnitHKStatusChanged(e){console.log("hk unit change",e);const t=[...this.calendarData.roomsInfo];const a=t.findIndex((t=>t.id===e.ROOM_CATEGORY_ID));if(a!==-1){const i={...t[a]};const r=i.physicalrooms.findIndex((t=>t.id===e.PR_ID));if(r!==-1){const o=[...i.physicalrooms];const n={...o[r]};n.hk_status=e.HKS_CODE;o[r]=n;i.physicalrooms=o;t[a]=i;this.calendarData={...this.calendarData,roomsInfo:t}}}const i={date:me().format("YYYY-MM-DD"),unitId:e.PR_ID};if(e.HKS_CODE==="002"){fe(i)}else{ue(i)}}async handleDoReservation(e){const t=se(e);this.AddOrUpdateRoomBookings(t)}async handleBlockExposedUnit(e){const t=[await ge(e)];this.AddOrUpdateRoomBookings(t)}async handleAssignExposedRoom(e){console.log(e);const t=se(e);this.AddOrUpdateRoomBookings(t)}async handleReallocateExposedRoomBlock(e){await this.handleBlockExposedUnit(e)}async handleDeleteCalendarPool(e){console.log("delete calendar pool");this.calendarData={...this.calendarData,bookingEvents:this.calendarData.bookingEvents.filter((t=>t.POOL!==e))}}async handleGetUnassignedDates(e){const t=this.parseDateRange(e);if(!this.calendarData.is_vacation_rental&&new Date(t.FROM_DATE).getTime()>=this.calendarData.startingDate&&new Date(t.TO_DATE).getTime()<=this.calendarData.endingDate){const e=await this.toBeAssignedService.getUnassignedDates(this.property_id,N(new Date(t.FROM_DATE)),N(new Date(t.TO_DATE)));St(e);this.unassignedDates={fromDate:N(new Date(t.FROM_DATE)),toDate:N(new Date(t.TO_DATE)),data:e};if(Object.keys(e).length===0){It(N(new Date(t.FROM_DATE)),N(new Date(t.TO_DATE)));this.reduceAvailableUnitEvent.emit({fromDate:N(new Date(t.FROM_DATE)),toDate:N(new Date(t.TO_DATE))})}}}parseDateRange(e){const t={};const a=e.split("|");a.forEach((e=>{const a=e.split(":");t[a[0]]=a[1]}));return t}handleChangeInDueAmount(e){this.calendarData={...this.calendarData,bookingEvents:this.calendarData.bookingEvents.map((t=>{if(e.pools.includes(t.ID)){return{...t,BALANCE:e.due_amount}}return t}))}}handleChangeInBookStatus(e){this.calendarData={...this.calendarData,bookingEvents:this.calendarData.bookingEvents.map((t=>{if(e.pools.includes(t.ID)){return{...t,STATUS:t.STATUS!=="IN-HOUSE"?be[e.status_code]:e.status_code==="001"?be[e.status_code]:"IN-HOUSE"}}return t}))}}handleNonTechnicalChangeInBooking(e){this.calendarData={...this.calendarData,bookingEvents:this.calendarData.bookingEvents.map((t=>{if(t.BOOKING_NUMBER===e.booking_nbr){return{...t,PRIVATE_NOTE:we(e.extras)}}return t}))}}checkBookingAvailability(e){return this.calendarData.bookingEvents.some((t=>t.ID===e.ID||t.FROM_DATE===e.FROM_DATE&&t.TO_DATE===e.TO_DATE&&t.PR_ID===e.PR_ID))}updateBookingEventsDateRange(e){e.forEach((e=>{e.legendData=this.calendarData.formattedLegendData;e.defaultDateRange={};e.defaultDateRange.fromDate=new Date(e.FROM_DATE+"T00:00:00");e.defaultDateRange.fromDateStr=this.getDateStr(e.defaultDateRange.fromDate);e.defaultDateRange.fromDateTimeStamp=e.defaultDateRange.fromDate.getTime();e.defaultDateRange.toDate=new Date(e.TO_DATE+"T00:00:00");e.defaultDateRange.toDateStr=this.getDateStr(e.defaultDateRange.toDate);e.defaultDateRange.toDateTimeStamp=e.defaultDateRange.toDate.getTime();e.defaultDateRange.dateDifference=e.NO_OF_DAYS;e.roomsInfo=[...this.calendarData.roomsInfo];if(!O(e.STATUS_CODE)){e.STATUS=pe({in_out:e.ROOM_INFO?.in_out,from_date:e.FROM_DATE,to_date:e.TO_DATE,status_code:e.BASE_STATUS_CODE})}}))}processSalesBatch(e){const t=[...oe.days];const a=new Map(oe.disabled_cells);for(const i of e){const e=t.findIndex((e=>e.value===i.night));if(e===-1){console.warn(`Couldn't find day ${i.night}`);continue}let r=this.roomTypeIdsCache.get(i.rate_plan_id);if(r==="skip"){continue}if(!r){const a=t[e].rate.findIndex((e=>e.rateplans.some((e=>e.id===i.rate_plan_id))));if(a===-1){this.roomTypeIdsCache.set(i.rate_plan_id,"skip");console.warn(`Couldn't find room type for rate plan ${i.rate_plan_id}`);continue}const o=t[e].rate[a];const n=o.rateplans.findIndex((e=>e.id===i.rate_plan_id));r={id:a,index:n};this.roomTypeIdsCache.set(i.rate_plan_id,r)}const{id:o,index:n}=r;const s=t[e].rate[o];const l=s.rateplans.map(((e,t)=>t===n?{...e,is_available_to_book:i.is_available_to_book}:e));const c=l.some((e=>e.is_available_to_book));t[e].rate[o]={...s,rateplans:l,is_available_to_book:c};for(const i of s.physicalrooms){const r=`${i.id}_${t[e].value}`;a.set(r,{disabled:!c,reason:"stop_sale"})}}oe["disabled_cells"]=new Map(a);oe.days=t}processAvailabilityBatch(e){let t=[...oe.days];const a=new Map(oe.disabled_cells);for(const i of e){const e=t.findIndex((e=>e.value===i.date));if(e===-1){console.warn(`Couldn't find day ${i.date}`);return}const r=t[e].rate.findIndex((e=>e.id===i.room_type_id));if(r===-1){console.warn(`Couldn't find room type ${i.room_type_id}`);return}const o=t[e].rate[r];o.exposed_inventory.rts=i.availability;const n=o.rateplans.every((e=>!e.is_available_to_book));for(const e of o.physicalrooms){const t=`${e.id}_${i.date}`;a.set(t,{disabled:i.availability===0,reason:n?"stop_sale":"inventory"})}}oe["disabled_cells"]=new Map(a);oe.days=[...t]}setRoomsData(e){let t=new Array;if(e.My_Result?.roomtypes?.length){t=e.My_Result.roomtypes;e.My_Result.roomtypes.forEach((e=>{e.expanded=true}))}S.roomsInfo=t;this.calendarData.roomsInfo=t}getLegendData(e){return e["My_Result"].calendar_legends}getDateStr(e,t="default"){return e.getDate()+" "+e.toLocaleString(t,{month:"short"})+" "+e.getFullYear()}scrollToElement(e){this.scrollContainer=this.scrollContainer||this.element.querySelector(".calendarScrollContainer");const t=this.element.querySelector(".topLeftCell");const a=this.element.querySelector(".day-"+e);if(a){this.scrollContainer.scrollTo({left:0});const e=a.getBoundingClientRect();const i=this.scrollContainer.getBoundingClientRect();const r=t.getBoundingClientRect();this.scrollContainer.scrollTo({left:e.left-i.left-r.width-e.width})}}AddOrUpdateRoomBookings(e,t=undefined){let a=[...this.calendarData.bookingEvents];e.forEach((e=>{if(!this.checkBookingAvailability(e)){a=a.filter((t=>t.ID!==e.ID))}}));this.updateBookingEventsDateRange(e);if(t){a=a.filter((e=>e.POOL===t))}e.forEach((e=>{if(!a.some((t=>t.ID===e.ID))){a.push(e)}}));this.calendarData={...this.calendarData,bookingEvents:a};const i=e=>{const t=me(this.tasksEndDate,"YYYY-MM-DD");return me(e.FROM_DATE,"YYYY-MM-DD").isSameOrBefore(t,"date")||me(e.TO_DATE,"YYYY-MM-DD").isSameOrBefore(t,"date")};if(e.some(i)){this.getHousekeepingTasks({from_date:me().format("YYYY-MM-DD"),to_date:this.tasksEndDate})}}transformDateForScroll(e){return me(e).format("D_M_YYYY")}shouldRenderCalendarView(){return this.calendarData&&this.calendarData.days&&this.calendarData.days.length}onOptionSelect(e){const t=e.detail;const a=this.element.querySelector("#iglooCalendar");switch(t.key){case"showAssigned":a.classList.remove("showLegend");a.classList.remove("showToBeAssigned");a.classList.toggle("showToBeAssigned");this.showLegend=false;this.showToBeAssigned=true;break;case"showLegend":a.classList.remove("showToBeAssigned");a.classList.remove("showLegend");a.classList.toggle("showLegend");this.showLegend=!this.showLegend;this.showToBeAssigned=false;break;case"calendar":let e=new Date;if(t.data.start!==undefined&&t.data.end!==undefined){e=t.data.start.toDate();this.handleDateSearch(t.data)}else{e=new Date(t.data);e.setDate(e.getDate()+1);if(!t?.noScroll){this.scrollToElement(e.getDate()+"_"+(e.getMonth()+1)+"_"+e.getFullYear())}}this.highlightedDate=this.transformDateForScroll(e);break;case"search":break;case"bulk":this.calendarSidebarState={type:"bulk-blocks",payload:null};break;case"add":if(t.data.event_type!=="EDIT_BOOKING"){this.bookingItem=t.data}else{this.editBookingItem=t.data}break;case"gotoToday":this.scrollToElement(this.today);break;case"closeSideMenu":this.closeSideMenu();this.highlightedDate="";this.showBookProperty=false;break}}async addDatesToCalendar(e,t){const[a]=await Promise.all([this.bookingService.getCalendarData(this.property_id,e,t)]);const i=a.myBookings||[];this.updateBookingEventsDateRange(i);if(new Date(e).getTime()<new Date(this.calendarData.startingDate).getTime()){this.calendarData.startingDate=new Date(e).getTime();this.calendarData.from_date=e;oe.fromDate=this.calendarData.from_date;this.days=[...a.days,...this.days];let r=[...a.months];if(this.calendarData.monthsInfo[0].monthName===a.months[a.months.length-1].monthName){this.calendarData.monthsInfo[0].daysCount=this.calendarData.monthsInfo[0].daysCount+a.months[a.months.length-1].daysCount;r.pop()}let o=JSON.parse(JSON.stringify(i));o=o.filter((e=>{const t=this.calendarData.bookingEvents.findIndex((t=>t.ID===e.ID));if(t!==-1){this.calendarData.bookingEvents[t].FROM_DATE=e.FROM_DATE;this.calendarData.bookingEvents[t].NO_OF_DAYS=ne(e.FROM_DATE,this.calendarData.bookingEvents[t].TO_DATE);return false}return true}));oe.days=this.days;this.calendarData={...this.calendarData,days:this.days,monthsInfo:[...r,...this.calendarData.monthsInfo],bookingEvents:[...this.calendarData.bookingEvents,...o]};if(Math.abs(me().diff(me(e,"YYYY-MM-DD"),"days"))<=10){const a=await this.toBeAssignedService.getUnassignedDates(this.property_id,e,t);this.calendarData.unassignedDates={...this.calendarData.unassignedDates,...a};this.unassignedDates={fromDate:e,toDate:t,data:a};St(a)}}else{this.calendarData.endingDate=new Date(t).getTime();this.calendarData.to_date=t;oe.toDate=this.calendarData.to_date;let r=[...a.months];this.days=[...this.days,...a.days];if(this.calendarData.monthsInfo[this.calendarData.monthsInfo.length-1].monthName===a.months[0].monthName){this.calendarData.monthsInfo[this.calendarData.monthsInfo.length-1].daysCount=this.calendarData.monthsInfo[this.calendarData.monthsInfo.length-1].daysCount+a.months[0].daysCount;r.shift()}let o=JSON.parse(JSON.stringify(i));o=o.filter((e=>{const t=this.calendarData.bookingEvents.findIndex((t=>t.ID===e.ID));if(t!==-1){this.calendarData.bookingEvents[t].TO_DATE=e.TO_DATE;this.calendarData.bookingEvents[t].NO_OF_DAYS=ne(this.calendarData.bookingEvents[t].FROM_DATE,e.TO_DATE);return false}return true}));oe.days=this.days;this.calendarData={...this.calendarData,days:this.days,monthsInfo:[...this.calendarData.monthsInfo,...r],bookingEvents:[...this.calendarData.bookingEvents,...o]};const n=await this.toBeAssignedService.getUnassignedDates(this.property_id,e,t);this.calendarData.unassignedDates={...this.calendarData.unassignedDates,...n};this.unassignedDates={fromDate:e,toDate:t,data:n};St(n)}}async handleDateSearch(e){const t=me(e.start).toDate();const a=me(this.calDates.from).toDate();const i=e.end.toDate();const r=this.calendarData.endingDate;if(t.getTime()<new Date(this.calDates.from).getTime()){await this.addDatesToCalendar(me(t).add(-1,"days").format("YYYY-MM-DD"),me(a).add(-1,"days").format("YYYY-MM-DD"));this.calDates={...this.calDates,from:e.start.add(-1,"days").format("YYYY-MM-DD")};this.scrollToElement(this.transformDateForScroll(t))}else if(t.getTime()>a.getTime()&&t.getTime()<r&&i.getTime()<r){this.scrollToElement(this.transformDateForScroll(t))}else if(t.getTime()>r){const e=H(new Date(this.calendarData.endingDate));await this.addDatesToCalendar(e,me(i).add(2,"months").format("YYYY-MM-DD"));this.scrollToElement(this.transformDateForScroll(t))}}closeSideMenu(){this.showLegend=false;this.showToBeAssigned=false}scrollViewDragPos={top:0,left:0,x:0,y:0};dragScrollContent(e){this.scrollViewDragging=false;let t=e&&e.target?this.hasAncestorWithClass(e.target,"preventPageScroll"):false;if(!t&&e.buttons===1){this.scrollViewDragPos={left:this.scrollContainer.scrollLeft,top:this.scrollContainer.scrollTop,x:e.clientX,y:e.clientY};document.addEventListener("mousemove",this.onScrollContentMoveHandler);document.addEventListener("mouseup",this.onScrollContentMoveEndHandler)}}onScrollContentMoveHandler=e=>{if(e.buttons!==1){return}const t=e.clientX-this.scrollViewDragPos.x;const a=e.clientY-this.scrollViewDragPos.y;this.scrollContainer.scrollTop=this.scrollViewDragPos.top-a;this.scrollContainer.scrollLeft=this.scrollViewDragPos.left-t;if(Math.abs(t)>5||Math.abs(a)>5){this.scrollViewDragging=true}};onScrollContentMoveEndHandler=()=>{document.removeEventListener("mousemove",this.onScrollContentMoveHandler);document.removeEventListener("mouseup",this.onScrollContentMoveEndHandler)};calendarScrolling(){if(this.scrollContainer){if(this.highlightedDate){const e=document.querySelector(`.day-${this.highlightedDate}`);if(e){const{left:t,right:a}=e.getBoundingClientRect();const i=t>=0&&a<=window.innerWidth;if(!i){this.highlightedDate=""}}}const e=this.scrollContainer.getBoundingClientRect();let t=170;let a=e.width-t;let i=e.x+t;let r=e.x+e.width;let o=Array.from(this.element.querySelectorAll(".monthCell"));if(o.length){o.map((async e=>{let t=e.getBoundingClientRect();if(o.indexOf(e)===o.length-1){if(t.x+t.width<=r&&!this.reachedEndOfCalendar){this.reachedEndOfCalendar=true;const e=F(new Date(this.calendarData.endingDate));const t=H(new Date(this.calendarData.endingDate));await this.addDatesToCalendar(t,e);this.reachedEndOfCalendar=false}}if(t.x+t.width<i);else if(t.x>r);else{let o=e.querySelector(".monthTitle");let n=0;let s=t.width;if(t.x<i){n=Math.abs(t.x)-i;n=t.x<0?Math.abs(t.x)+i:Math.abs(n);s=t.x+t.width>r?a:t.x+t.width-i}else{s=a-s>s?s:a-t.x+i}o.style.marginLeft=n+"px";o.style.width=s+"px"}}))}}}hasAncestorWithClass(e,t){let a=e;while(a!==null){if(a.matches(`.${t}`)){return true}a=a.parentElement}return false}async highlightDragOver(e,t){let a,i;if(t){a=this.visibleCalendarCells.x.find((e=>e.left<t.x&&t.x<=e.left+e.width));i=this.visibleCalendarCells.y.find((e=>e.top<t.y&&t.y<=e.top+e.height))}if(e&&a&&i){this.dragOverHighlightElement.emit({dragOverElement:i.id+"_"+a.id})}else{this.dragOverHighlightElement.emit({dragOverElement:""})}if(!e){this.moveBookingTo.emit({bookingId:t.id,fromRoomId:t.fromRoomId,toRoomId:i&&i.id||"revert",moveToDay:a&&a.id||"revert",pool:t.pool,from_date:U(a&&a.id),to_date:j(a&&a.id,t.nbOfDays)})}}handleModalConfirm(){const e=()=>{this.dialogData=null};try{switch(this.dialogData?.reason){case"checkin":case"checkout":{const{bookingNumber:t,roomIdentifier:a}=this.dialogData;const i=this.dialogData.reason==="checkin"?"001":"002";this.bookingService.handleExposedRoomInOut({booking_nbr:t,room_identifier:a,status:i}).finally(e);if(this.dialogData.reason==="checkin"){this.openCalendarSidebar.emit({type:"room-guests",payload:this.dialogData.sidebarPayload})}break}case"stretch":const{reason:t,...a}=this.dialogData;this.showRoomNightsDialog.emit(a);break;case"reallocate":{if(!this.dialogData){console.warn("No dialog data available for reallocation.");return}const{pool:t,toRoomId:a,from_date:i,to_date:r}=this.dialogData;this.eventsService.reallocateEvent(t,a,i,r).then(e).catch((()=>{console.error("Reallocation failed. Reverting booking.");this.revertBooking.emit(t)})).finally(e);break}default:e();break}}catch(t){console.error("Error handling modal confirm:",t);e()}}handleModalCancel(){if(this.dialogData?.reason==="reallocate"||this.dialogData?.reason==="stretch"){this.revertBooking.emit(this.dialogData.pool)}this.dialogData=null}handleRoomNightsDialogClose(e){if(e.detail.type==="cancel"){this.revertBooking.emit(this.roomNightsData.pool)}this.roomNightsData=null}handleSideBarToggle(e){if(e.detail){this.calendarSidebarState=null;if(this.editBookingItem){this.editBookingItem=null}if(this.roomNightsData){this.revertBooking.emit(this.roomNightsData.pool);this.roomNightsData=null}if(this.dialogData?.reason==="reallocate"){this.revertBooking.emit(this.dialogData.pool);this.dialogData=null}}}handleCloseBookingWindow(){this.bookingItem=null}get isSidebarOpen(){if(this.editBookingItem&&this.editBookingItem.event_type==="EDIT_BOOKING"){return false}if(this.roomNightsData){return true}if(this.calendarSidebarState){const e=this.calendarSidebarState.type;return e==="split"||e==="bulk-blocks"}return false}handleInvoiceClose(e){e.stopImmediatePropagation();e.stopPropagation();this.invoiceState=null}handleCheckoutDialogClosed(e){e.stopImmediatePropagation();e.stopPropagation();if(this.dialogData?.reason!=="checkout"){return}const{reason:t}=e.detail;if(t==="openInvoice"){this.invoiceState={booking:this.dialogData.booking,identifier:this.dialogData.roomIdentifier}}this.dialogData=null}render(){return a(i,{key:"c3b6b0a78bf7784aa16da35792a31d635135e751"},a("ir-toast",{key:"d1905f7f8d13ca785cf3d85e8dc4f5a2b4bf043c"}),a("ir-interceptor",{key:"a7383be39b3fd758e58e2643a3882fee43838e59"}),a("div",{key:"6356c4ed5ce61baf5000509e8ca27d8c474e8d5d",id:"iglooCalendar",class:{"igl-calendar":true,showToBeAssigned:this.showToBeAssigned,showLegend:this.showLegend}},this.shouldRenderCalendarView()?a(o,{"data-testid":"ir-calendar"},this.showToBeAssigned&&a("igl-to-be-assigned",{unassignedDatesProp:this.unassignedDates,to_date:this.to_date,from_date:this.from_date,propertyid:this.property_id,class:"tobeAssignedContainer",calendarData:this.calendarData,onOptionEvent:e=>this.onOptionSelect(e)}),this.showLegend&&a("igl-legends",{class:"legendContainer",legendData:this.calendarData.legendData,onOptionEvent:e=>this.onOptionSelect(e)}),a("div",{class:"calendarScrollContainer",onMouseDown:e=>this.dragScrollContent(e),onScroll:()=>this.calendarScrolling()},a("div",{id:"calendarContainer"},a("igl-cal-header",{unassignedDates:this.unassignedDates,to_date:this.to_date,propertyid:this.property_id,today:this.today,calendarData:this.calendarData,highlightedDate:this.highlightedDate,onOptionEvent:e=>this.onOptionSelect(e)}),a("igl-cal-body",{propertyId:this.property_id,language:this.language,countries:this.countries,currency:this.calendarData.currency,today:this.today,highlightedDate:this.highlightedDate,isScrollViewDragging:this.scrollViewDragging,calendarData:this.calendarData}),a("igl-cal-footer",{isLegendOpen:this.showLegend,highlightedDate:this.highlightedDate,today:this.today,calendarData:this.calendarData,onOptionEvent:e=>this.onOptionSelect(e)})))):a("ir-loading-screen",{message:"Preparing Calendar Data"})),a("ir-sidebar",{key:"7c8c96915eb0d40dbfb444e1e358460a1ccca81e",onIrSidebarToggle:this.handleSideBarToggle.bind(this),open:this.isSidebarOpen,showCloseButton:false,sidebarStyles:{width:this.calendarSidebarState?.type==="room-guests"?"60rem":this.editBookingItem?"80rem":"var(--sidebar-width,40rem)",background:this.editBookingItem?"#F2F3F8":"white"}},this.roomNightsData&&a("ir-room-nights",{key:"e4a1bb0c2382c2b6e092a6b93b5e7aaed874ef0b",slot:"sidebar-body",pool:this.roomNightsData.pool,onCloseRoomNightsDialog:this.handleRoomNightsDialogClose.bind(this),language:this.language,bookingNumber:this.roomNightsData.bookingNumber,identifier:this.roomNightsData.identifier,toDate:this.roomNightsData.to_date,fromDate:this.roomNightsData.from_date,defaultDates:this.roomNightsData.defaultDates,ticket:this.ticket,propertyId:this.property_id}),this.calendarSidebarState?.type==="split"&&a("igl-split-booking",{key:"d30b0641d4e59090cd1ad8f0bb7d633ac7dd9f11",slot:"sidebar-body",booking:this.calendarSidebarState?.payload?.booking,identifier:this.calendarSidebarState?.payload?.identifier,onCloseModal:()=>this.calendarSidebarState=null}),this.calendarSidebarState?.type==="bulk-blocks"&&a("igl-bulk-operations",{key:"3da6ca9c1fbbbb264bc45ae039df90d27e60cac7",slot:"sidebar-body",property_id:this.property_id,onCloseModal:()=>this.calendarSidebarState=null})),a("ir-booking-details-drawer",{key:"5e26693f6fd33523770e24ae59cdc23d3f5bec23",open:this.editBookingItem?.event_type==="EDIT_BOOKING",propertyId:this.property_id,bookingNumber:this.editBookingItem&&this.editBookingItem?.event_type==="EDIT_BOOKING"?this.editBookingItem.BOOKING_NUMBER:null,ticket:this.ticket,language:this.language,onBookingDetailsDrawerClosed:()=>this.editBookingItem=null}),a("ir-room-guests",{key:"5e3ef5cbdce613a75c067900405890228581e7eb",open:this.calendarSidebarState?.type==="room-guests",countries:this.countries,language:this.language,identifier:this.calendarSidebarState?.payload?.identifier,bookingNumber:this.calendarSidebarState?.payload?.bookingNumber,roomName:this.calendarSidebarState?.payload?.roomName,totalGuests:this.calendarSidebarState?.payload?.totalGuests,sharedPersons:this.calendarSidebarState?.payload?.sharing_persons,checkIn:true,onCloseModal:()=>this.calendarSidebarState=null}),a("ir-reallocation-drawer",{key:"16f9c663c0e76649efdf35e8883816ef94c9e180",open:this.calendarSidebarState?.type==="reallocate-drawer",booking:this.calendarSidebarState?.payload?.booking,pool:this.calendarSidebarState?.payload?.pool,roomIdentifier:this.calendarSidebarState?.payload?.identifier,onCloseModal:()=>this.calendarSidebarState=null}),a("igl-reallocation-dialog",{key:"1c80473003f835c5720ca08604a72ed7804d52f4",onResetModalState:()=>this.dialogData=null,onDialogClose:()=>this.handleModalCancel(),data:this.dialogData?.reason==="reallocate"?this.dialogData:undefined}),a("ir-modal",{key:"9a09607e65dbee9efe1938ef755e84d20c950702",ref:e=>this.calendarModalEl=e,modalTitle:"lol",rightBtnActive:this.dialogData?.reason==="reallocate"?!this.dialogData.hideConfirmButton:true,leftBtnText:M?.entries?.Lcz_Cancel,rightBtnText:M?.entries?.Lcz_Confirm,modalBody:this.renderModalBody(),onConfirmModal:this.handleModalConfirm.bind(this),onCancelModal:this.handleModalCancel.bind(this)}),a("ir-checkout-dialog",{key:"70240eaad06da123a978084a765b0f92c43d6f9f",style:{textAlign:"start"},booking:this.dialogData?.reason==="checkout"?this.dialogData?.booking:null,identifier:this.dialogData?.reason==="checkout"?this.dialogData?.roomIdentifier:null,open:this.dialogData?.reason==="checkout",onCheckoutDialogClosed:e=>this.handleCheckoutDialogClosed(e)}),a("ir-invoice",{key:"be4f80f0b5883fa635dff10bac1f4cf7a522e9af",style:{textAlign:"start"},onInvoiceClose:e=>this.handleInvoiceClose(e),booking:this.invoiceState?.booking,roomIdentifier:this.invoiceState?.identifier,open:this.invoiceState!==null}),a("ir-booking-editor-drawer",{key:"abf85b6a58f9fe5cd005080eb6b603fc20902c7f",roomTypeIds:this.bookingItem?.roomsInfo?.map((e=>e.id)),onBookingEditorClosed:this.handleCloseBookingWindow.bind(this),unitId:this.bookingItem?.PR_ID,mode:this.bookingItem?.event_type,label:this.bookingItem?.TITLE,ticket:this.ticket,roomIdentifier:this.bookingItem?.IDENTIFIER,open:this.bookingItem!==null&&this.bookingItem.event_type!=="BLOCK_DATES",language:this.language,booking:this.bookingItem?.booking,propertyid:this.propertyid,checkIn:this.bookingItem?.FROM_DATE,blockedUnit:{ENTRY_DATE:this.bookingItem?.ENTRY_DATE,ENTRY_HOUR:this.bookingItem?.ENTRY_HOUR,ENTRY_MINUTE:this.bookingItem?.ENTRY_MINUTE,OPTIONAL_REASON:this.bookingItem?.OPTIONAL_REASON,OUT_OF_SERVICE:this.bookingItem?.OUT_OF_SERVICE,RELEASE_AFTER_HOURS:this.bookingItem?.RELEASE_AFTER_HOURS,STATUS_CODE:this.bookingItem?.STATUS_CODE},checkOut:this.bookingItem?.TO_DATE}),a("igl-blocked-date-drawer",{key:"c2bc4c71678b991aa731bdcff6bc00cf4ae9b931",onBlockedDateDrawerClosed:e=>{e.stopImmediatePropagation();e.stopPropagation();this.bookingItem=null},unitId:this.bookingItem?.PR_ID,fromDate:this.bookingItem?.FROM_DATE,toDate:this.bookingItem?.TO_DATE,label:this.bookingItem?.BLOCK_DATES_TITLE?.trim(),open:this.bookingItem?.event_type==="BLOCK_DATES"}))}static get watchers(){return{ticket:["ticketChanged"]}}};wa.style=ba;var ma={exports:{}};(function(e,t){!function(t,a){e.exports=a()}(Ee,(function(){return function(){var e={d:function(t,a){for(var i in a)e.o(a,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:a[i]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t={};e.d(t,{default:function(){return F}});var a={days:"days",months:"months",years:"years",day:"day",month:"month",year:"year",eventChangeViewDate:"changeViewDate",eventChangeCurrentView:"changeCurrentView",eventChangeFocusDate:"changeFocusDate",eventChangeSelectedDate:"changeSelectedDate",eventChangeTime:"changeTime",eventChangeLastSelectedDate:"changeLastSelectedDate",actionSelectDate:"selectDate",actionUnselectDate:"unselectDate",cssClassWeekend:"-weekend-"},i={classes:"",inline:!1,locale:{days:["Ð’Ð¾ÑÐºÑ€ÐµÑÐµÐ½ÑŒÐµ","ÐŸÐ¾Ð½ÐµÐ´ÐµÐ»ÑŒÐ½Ð¸Ðº","Ð’Ñ‚Ð¾Ñ€Ð½Ð¸Ðº","Ð¡Ñ€ÐµÐ´Ð°","Ð§ÐµÑ‚Ð²ÐµÑ€Ð³","ÐŸÑÑ‚Ð½Ð¸Ñ†Ð°","Ð¡ÑƒÐ±Ð±Ð¾Ñ‚Ð°"],daysShort:["Ð’Ð¾Ñ","ÐŸÐ¾Ð½","Ð’Ñ‚Ð¾","Ð¡Ñ€Ðµ","Ð§ÐµÑ‚","ÐŸÑÑ‚","Ð¡ÑƒÐ±"],daysMin:["Ð’Ñ","ÐŸÐ½","Ð’Ñ‚","Ð¡Ñ€","Ð§Ñ‚","ÐŸÑ‚","Ð¡Ð±"],months:["Ð¯Ð½Ð²Ð°Ñ€ÑŒ","Ð¤ÐµÐ²Ñ€Ð°Ð»ÑŒ","ÐœÐ°Ñ€Ñ‚","ÐÐ¿Ñ€ÐµÐ»ÑŒ","ÐœÐ°Ð¹","Ð˜ÑŽÐ½ÑŒ","Ð˜ÑŽÐ»ÑŒ","ÐÐ²Ð³ÑƒÑÑ‚","Ð¡ÐµÐ½Ñ‚ÑÐ±Ñ€ÑŒ","ÐžÐºÑ‚ÑÐ±Ñ€ÑŒ","ÐÐ¾ÑÐ±Ñ€ÑŒ","Ð”ÐµÐºÐ°Ð±Ñ€ÑŒ"],monthsShort:["Ð¯Ð½Ð²","Ð¤ÐµÐ²","ÐœÐ°Ñ€","ÐÐ¿Ñ€","ÐœÐ°Ð¹","Ð˜ÑŽÐ½","Ð˜ÑŽÐ»","ÐÐ²Ð³","Ð¡ÐµÐ½","ÐžÐºÑ‚","ÐÐ¾Ñ","Ð”ÐµÐº"],today:"Ð¡ÐµÐ³Ð¾Ð´Ð½Ñ",clear:"ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1},startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"T",toggleSelected:!0,keyboardNav:!0,selectedDates:!1,container:"",isMobile:!1,visible:!1,position:"bottom left",offset:12,view:a.days,minView:a.days,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:", ",range:!1,dynamicRange:!0,buttons:!1,monthsField:"monthsShort",showEvent:"focus",autoClose:!1,fixedHeight:!1,prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:!1,onChangeViewDate:!1,onChangeView:!1,onRenderCell:!1,onShow:!1,onHide:!1,onClickDayName:!1};function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return"string"==typeof e?t.querySelector(e):e}function o(){let{tagName:e="div",className:t="",innerHtml:a="",id:i="",attrs:r={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=document.createElement(e);return t&&o.classList.add(...t.split(" ")),i&&(o.id=i),a&&(o.innerHTML=a),r&&n(o,r),o}function n(e,t){for(let[a,i]of Object.entries(t))void 0!==i&&e.setAttribute(a,i);return e}function s(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function l(e){let t=e.getHours(),{hours:a,dayPeriod:i}=c(t);return{year:e.getFullYear(),month:e.getMonth(),fullMonth:e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,date:e.getDate(),fullDate:e.getDate()<10?"0"+e.getDate():e.getDate(),day:e.getDay(),hours:t,fullHours:d(t),hours12:a,dayPeriod:i,fullHours12:d(a),minutes:e.getMinutes(),fullMinutes:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes()}}function c(e){return{dayPeriod:e>11?"pm":"am",hours:e%12==0?12:e%12}}function d(e){return e<10?"0"+e:e}function h(e){let t=10*Math.floor(e.getFullYear()/10);return[t,t+9]}function p(){let e=[];for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return a.forEach((t=>{if("object"==typeof t)for(let a in t)t[a]&&e.push(a);else t&&e.push(t)})),e.join(" ")}function u(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.days;if(!e||!t)return!1;let r=l(e),o=l(t);return{[a.days]:r.date===o.date&&r.month===o.month&&r.year===o.year,[a.months]:r.month===o.month&&r.year===o.year,[a.years]:r.year===o.year}[i]}function f(e,t,a){let i=b(e,!1).getTime(),r=b(t,!1).getTime();return a?i>=r:i>r}function g(e,t){return!f(e,t,!0)}function b(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=new Date(e.getTime());return"boolean"!=typeof t||t||function(e){e.setHours(0,0,0,0)}(a),a}function w(e,t,a){e.length?e.forEach((e=>{e.addEventListener(t,a)})):e.addEventListener(t,a)}function m(e,t){return!(!e||e===document||e instanceof DocumentFragment)&&(e.matches(t)?e:m(e.parentNode,t))}function v(e,t,a){return e>a?a:e<t?t:e}function y(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];return a.filter((e=>e)).forEach((t=>{for(let[a,i]of Object.entries(t))if(void 0!==i&&"[object Object]"===i.toString()){let t=void 0!==e[a]?e[a].toString():void 0,r=i.toString(),o=Array.isArray(i)?[]:{};e[a]=e[a]?t!==r?o:e[a]:o,y(e[a],i)}else e[a]=i})),e}function k(e){let t=e;return e instanceof Date||("string"==typeof e&&/^\d{4}-\d{2}-\d{2}$/.test(e)&&(e+="T00:00:00"),t=new Date(e)),isNaN(t.getTime())&&(console.log(`Unable to convert value "${e}" to Date object`),t=!1),t}function _(e){let t="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+t+")("+e+")($|<|"+t+")","g")}function x(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class D{constructor(){let{type:e,date:t,dp:a,opts:i,body:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x(this,"focus",(()=>{this.$cell.classList.add("-focus-"),this.focused=!0})),x(this,"removeFocus",(()=>{this.$cell.classList.remove("-focus-"),this.focused=!1})),x(this,"select",(()=>{this.$cell.classList.add("-selected-"),this.selected=!0})),x(this,"removeSelect",(()=>{this.$cell.classList.remove("-selected-","-range-from-","-range-to-"),this.selected=!1})),x(this,"onChangeSelectedDate",(()=>{this.isDisabled||(this._handleSelectedStatus(),this.opts.range&&this._handleRangeStatus())})),x(this,"onChangeFocusDate",(e=>{if(!e)return void(this.focused&&this.removeFocus());let t=u(e,this.date,this.type);t?this.focus():!t&&this.focused&&this.removeFocus(),this.opts.range&&this._handleRangeStatus()})),x(this,"render",(()=>(this.$cell.innerHTML=this._getHtml(),this._handleClasses(),this.$cell))),this.type=e,this.singleType=this.type.slice(0,-1),this.date=t,this.dp=a,this.opts=i,this.body=r,this.customData=!1,this.init()}init(){var e;let{onRenderCell:t}=this.opts;t&&(this.customData=t({date:this.date,cellType:this.singleType,datepicker:this.dp})),this._createElement(),this._bindDatepickerEvents(),null!==(e=this.customData)&&void 0!==e&&e.disabled&&this.dp.disableDate(this.date)}_bindDatepickerEvents(){this.dp.on(a.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(a.eventChangeFocusDate,this.onChangeFocusDate)}unbindDatepickerEvents(){this.dp.off(a.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(a.eventChangeFocusDate,this.onChangeFocusDate)}_createElement(){var e;let{year:t,month:a,date:i}=l(this.date),r=(null===(e=this.customData)||void 0===e?void 0:e.attrs)||{};this.$cell=o({attrs:{"data-year":t,"data-month":a,"data-date":i,...r}}),this.$cell.adpCell=this}_getClassName(){var e;let t=new Date,{selectOtherMonths:i,selectOtherYears:r}=this.opts,{minDate:o,maxDate:n,isDateDisabled:s}=this.dp,{day:c}=l(this.date),d=this._isOutOfMinMaxRange(),h=s(this.date),f=p("air-datepicker-cell",`-${this.singleType}-`,{"-current-":u(t,this.date,this.type),"-min-date-":o&&u(o,this.date,this.type),"-max-date-":n&&u(n,this.date,this.type)}),g="";switch(this.type){case a.days:g=p({"-weekend-":this.dp.isWeekend(c),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!i||d||h});break;case a.months:g=p({"-disabled-":d});break;case a.years:g=p({"-other-decade-":this.isOtherDecade,"-disabled-":d||this.isOtherDecade&&!r})}return p(f,g,null===(e=this.customData)||void 0===e?void 0:e.classes).split(" ")}_getHtml(){var e;let{year:t,month:i,date:r}=l(this.date),{showOtherMonths:o,showOtherYears:n}=this.opts;if(null!==(e=this.customData)&&void 0!==e&&e.html)return this.customData.html;switch(this.type){case a.days:return!o&&this.isOtherMonth?"":r;case a.months:return this.dp.locale[this.opts.monthsField][i];case a.years:return!n&&this.isOtherDecade?"":t}}_isOutOfMinMaxRange(){let{minDate:e,maxDate:t}=this.dp,{type:i,date:r}=this,{month:o,year:n,date:s}=l(r),c=i===a.days,d=i===a.years,h=!!e&&new Date(n,d?e.getMonth():o,c?s:e.getDate()),p=!!t&&new Date(n,d?t.getMonth():o,c?s:t.getDate());return e&&t?g(h,e)||f(p,t):e?g(h,e):t?f(p,t):void 0}destroy(){this.unbindDatepickerEvents()}_handleRangeStatus(){const{selectedDates:e,focusDate:t,rangeDateTo:a,rangeDateFrom:i}=this.dp,r=e.length;if(!r)return;let o=i,n=a;if(1===r&&t){const a=f(t,e[0]);o=a?e[0]:t,n=a?t:e[0]}let s=p({"-in-range-":o&&n&&(l=this.date,c=o,d=n,f(l,c)&&g(l,d)),"-range-from-":o&&u(this.date,o,this.type),"-range-to-":n&&u(this.date,n,this.type)});var l,c,d;this.$cell.classList.remove("-range-from-","-range-to-","-in-range-"),s&&this.$cell.classList.add(...s.split(" "))}_handleSelectedStatus(){let e=this.dp._checkIfDateIsSelected(this.date,this.type);e?this.select():!e&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){u(this.dp.focusDate,this.date,this.type)&&this.focus()}_handleClasses(){this.$cell.setAttribute("class",""),this._handleInitialFocusStatus(),this.dp.hasSelectedDates&&(this._handleSelectedStatus(),this.dp.opts.range&&this._handleRangeStatus()),this.$cell.classList.add(...this._getClassName())}get isDisabled(){return this.$cell.matches(".-disabled-")}get isOtherMonth(){return this.dp.isOtherMonth(this.date)}get isOtherDecade(){return this.dp.isOtherDecade(this.date)}}function C(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let M={[a.days]:`<div class="air-datepicker-body--day-names"></div><div class="air-datepicker-body--cells -${a.days}-"></div>`,[a.months]:`<div class="air-datepicker-body--cells -${a.months}-"></div>`,[a.years]:`<div class="air-datepicker-body--cells -${a.years}-"></div>`};const Y=".air-datepicker-cell";class S{constructor(e){let{dp:t,type:i,opts:r}=e;C(this,"handleClick",(e=>{let t=e.target.closest(Y).adpCell;if(t.isDisabled)return;if(!this.dp.isMinViewReached)return void this.dp.down();let a=this.dp._checkIfDateIsSelected(t.date,t.type);a?this.dp._handleAlreadySelectedDates(a,t.date):this.dp.selectDate(t.date)})),C(this,"handleDayNameClick",(e=>{let t=e.target.getAttribute("data-day-index");this.opts.onClickDayName({dayIndex:Number(t),datepicker:this.dp})})),C(this,"onChangeCurrentView",(e=>{e!==this.type?this.hide():(this.show(),this.render())})),C(this,"onMouseOverCell",(e=>{let t=m(e.target,Y);this.dp.setFocusDate(!!t&&t.adpCell.date)})),C(this,"onMouseOutCell",(()=>{this.dp.setFocusDate(!1)})),C(this,"onClickBody",(e=>{let{onClickDayName:t}=this.opts,a=e.target;a.closest(Y)&&this.handleClick(e),t&&a.closest(".air-datepicker-body--day-name")&&this.handleDayNameClick(e)})),C(this,"onMouseDown",(e=>{this.pressed=!0;let t=m(e.target,Y),a=t&&t.adpCell;u(a.date,this.dp.rangeDateFrom)&&(this.rangeFromFocused=!0),u(a.date,this.dp.rangeDateTo)&&(this.rangeToFocused=!0)})),C(this,"onMouseMove",(e=>{if(!this.pressed||!this.dp.isMinViewReached)return;e.preventDefault();let t=m(e.target,Y),a=t&&t.adpCell,{selectedDates:i,rangeDateTo:r,rangeDateFrom:o}=this.dp;if(!a||a.isDisabled)return;let{date:n}=a;if(2===i.length){if(this.rangeFromFocused&&!f(n,r)){let{hours:e,minutes:t}=l(o);n.setHours(e),n.setMinutes(t),this.dp.rangeDateFrom=n,this.dp.replaceDate(o,n)}if(this.rangeToFocused&&!g(n,o)){let{hours:e,minutes:t}=l(r);n.setHours(e),n.setMinutes(t),this.dp.rangeDateTo=n,this.dp.replaceDate(r,n)}}})),C(this,"onMouseUp",(()=>{this.pressed=!1,this.rangeFromFocused=!1,this.rangeToFocused=!1})),C(this,"onChangeViewDate",((e,t)=>{if(!this.isVisible)return;let i=h(e),r=h(t);switch(this.dp.currentView){case a.days:if(u(e,t,a.months))return;break;case a.months:if(u(e,t,a.years))return;break;case a.years:if(i[0]===r[0]&&i[1]===r[1])return}this.render()})),C(this,"render",(()=>{this.destroyCells(),this._generateCells(),this.cells.forEach((e=>{this.$cells.appendChild(e.render())}))})),this.dp=t,this.type=i,this.opts=r,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.type===a.days&&this.renderDayNames(),this.render(),this._bindEvents(),this._bindDatepickerEvents()}_bindEvents(){let{range:e,dynamicRange:t}=this.opts;w(this.$el,"mouseover",this.onMouseOverCell),w(this.$el,"mouseout",this.onMouseOutCell),w(this.$el,"click",this.onClickBody),e&&t&&(w(this.$el,"mousedown",this.onMouseDown),w(this.$el,"mousemove",this.onMouseMove),w(window.document,"mouseup",this.onMouseUp))}_bindDatepickerEvents(){this.dp.on(a.eventChangeViewDate,this.onChangeViewDate),this.dp.on(a.eventChangeCurrentView,this.onChangeCurrentView)}_buildBaseHtml(){this.$el=o({className:`air-datepicker-body -${this.type}-`,innerHtml:M[this.type]}),this.$names=r(".air-datepicker-body--day-names",this.$el),this.$cells=r(".air-datepicker-body--cells",this.$el)}_getDayNamesHtml(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dp.locale.firstDay,t="",i=this.dp.isWeekend,{onClickDayName:r}=this.opts,o=e,n=0;for(;n<7;){let e=o%7;t+=`<div class="${p("air-datepicker-body--day-name",{[a.cssClassWeekend]:i(e),"-clickable-":!!r})}" data-day-index='${e}'>${this.dp.locale.daysMin[e]}</div>`,n++,o++}return t}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCell(e){let{type:t,dp:a,opts:i}=this;return new D({type:t,dp:a,opts:i,date:e,body:this})}_generateCells(){S.getDatesFunction(this.type)(this.dp,(e=>{this.cells.push(this._generateCell(e))}))}show(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}hide(){this.isVisible=!1,this.$el.classList.add("-hidden-")}destroyCells(){this.cells.forEach((e=>e.destroy())),this.cells=[],this.$cells.innerHTML=""}destroy(){this.destroyCells(),this.dp.off(a.eventChangeViewDate,this.onChangeViewDate),this.dp.off(a.eventChangeCurrentView,this.onChangeCurrentView)}static getDaysDates(e,t){let{viewDate:a,opts:{fixedHeight:i},locale:{firstDay:r}}=e,o=s(a),{year:n,month:c}=l(a),d=new Date(n,c,1),h=new Date(n,c,o),p=d.getDay()-r,u=6-h.getDay()+r;p=p<0?p+7:p,u=u>6?u-7:u;let f=function(e,t){let{year:a,month:i,date:r}=l(e);return new Date(a,i,r-t)}(d,p),g=o+p+u,b=f.getDate(),{year:w,month:m}=l(f),v=0;i&&(g=42);const y=[];for(;v<g;){let e=new Date(w,m,b+v);t&&t(e),y.push(e),v++}return y}static getMonthsDates(e,t){let{year:a}=e.parsedViewDate,i=0,r=[];for(;i<12;){const e=new Date(a,i);r.push(e),t&&t(e),i++}return r}static getYearsDates(e,t){let a=h(e.viewDate),i=a[0]-1,r=a[1]+1,o=i,n=[];for(;o<=r;){const e=new Date(o,0);n.push(e),t&&t(e),o++}return n}static getDatesFunction(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.days;return{[a.days]:S.getDaysDates,[a.months]:S.getMonthsDates,[a.years]:S.getYearsDates}[e]}}function E(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class I{constructor(e){let{dp:t,opts:a}=e;E(this,"onClickNav",(e=>{let t=m(e.target,".air-datepicker-nav--action");if(!t)return;let a=t.dataset.action;this.dp[a]()})),E(this,"onChangeViewDate",(()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()})),E(this,"onChangeCurrentView",(()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()})),E(this,"onClickNavTitle",(()=>{this.dp.isFinalView||this.dp.up()})),E(this,"update",(()=>{let{prevHtml:e,nextHtml:t}=this.opts;this.$prev.innerHTML=e,this.$next.innerHTML=t,this._resetNavStatus(),this.render(),this.handleNavStatus()})),E(this,"renderDelay",(()=>{setTimeout(this.render)})),E(this,"render",(()=>{this.$title.innerHTML=this._getTitle(),function(e,t){for(let a in t)t[a]?e.classList.add(a):e.classList.remove(a)}(this.$title,{"-disabled-":this.dp.isFinalView})})),this.dp=t,this.opts=a,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDatepickerEvents()}_defineDOM(){this.$title=r(".air-datepicker-nav--title",this.$el),this.$prev=r('[data-action="prev"]',this.$el),this.$next=r('[data-action="next"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav),this.$title.addEventListener("click",this.onClickNavTitle)}_bindDatepickerEvents(){this.dp.on(a.eventChangeViewDate,this.onChangeViewDate),this.dp.on(a.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.on(a.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.on(a.eventChangeTime,this.render))}destroy(){this.dp.off(a.eventChangeViewDate,this.onChangeViewDate),this.dp.off(a.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.off(a.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.off(a.eventChangeTime,this.render))}_createElement(){this.$el=o({tagName:"nav",className:"air-datepicker-nav"})}_getTitle(){let{dp:e,opts:t}=this,a=t.navTitles[e.currentView];return"function"==typeof a?a(e):e.formatDate(e.viewDate,a)}handleNavStatus(){let{disableNavWhenOutOfRange:e}=this.opts,{minDate:t,maxDate:i}=this.dp;if(!t&&!i||!e)return;let{year:r,month:o}=this.dp.parsedViewDate,n=!!t&&l(t),s=!!i&&l(i);switch(this.dp.currentView){case a.days:t&&n.month>=o&&n.year>=r&&this._disableNav("prev"),i&&s.month<=o&&s.year<=r&&this._disableNav("next");break;case a.months:t&&n.year>=r&&this._disableNav("prev"),i&&s.year<=r&&this._disableNav("next");break;case a.years:{let e=h(this.dp.viewDate);t&&n.year>=e[0]&&this._disableNav("prev"),i&&s.year<=e[1]&&this._disableNav("next");break}}}_disableNav(e){r('[data-action="'+e+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){!function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];e.length?e.forEach((e=>{e.classList.remove(...a)})):e.classList.remove(...a)}(this.$el.querySelectorAll(".air-datepicker-nav--action"),"-disabled-")}_buildBaseHtml(){let{prevHtml:e,nextHtml:t}=this.opts;this.$el.innerHTML=`<div class="air-datepicker-nav--action" data-action="prev">${e}</div><div class="air-datepicker-nav--title"></div><div class="air-datepicker-nav--action" data-action="next">${t}</div>`}get isNavIsFunction(){let{navTitles:e}=this.opts;return Object.keys(e).find((t=>"function"==typeof e[t]))}}var T={today:{content:e=>e.locale.today,onClick:e=>e.setViewDate(new Date)},clear:{content:e=>e.locale.clear,onClick:e=>e.clear()}};class O{constructor(e){let{dp:t,opts:a}=e;this.dp=t,this.opts=a,this.init()}init(){this.createElement(),this.render()}createElement(){this.$el=o({className:"air-datepicker-buttons"})}destroy(){this.$el.parentNode.removeChild(this.$el)}clearHtml(){return this.$el.innerHTML="",this}generateButtons(){let{buttons:e}=this.opts;Array.isArray(e)||(e=[e]),e.forEach((e=>{let t=e;"string"==typeof e&&T[e]&&(t=T[e]);let a=this.createButton(t);t.onClick&&this.attachEventToButton(a,t.onClick),this.$el.appendChild(a)}))}attachEventToButton(e,t){e.addEventListener("click",(()=>{t(this.dp)}))}createButton(e){let{content:t,className:a,tagName:i="button",attrs:r={}}=e;return o({tagName:i,innerHtml:`<span tabindex='-1'>${"function"==typeof t?t(this.dp):t}</span>`,className:p("air-datepicker-button",a),attrs:r})}render(){this.generateButtons()}}function z(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class A{constructor(){let{opts:e,dp:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};z(this,"toggleTimepickerIsActive",(e=>{this.dp.timepickerIsActive=e})),z(this,"onChangeSelectedDate",(e=>{let{date:t,updateTime:a=!1}=e;t&&(this.setMinMaxTime(t),this.setCurrentTime(!!a&&t),this.addTimeToDate(t))})),z(this,"onChangeLastSelectedDate",(e=>{e&&(this.setTime(e),this.render())})),z(this,"onChangeInputRange",(e=>{let t=e.target;this[t.getAttribute("name")]=t.value,this.updateText(),this.dp.trigger(a.eventChangeTime,{hours:this.hours,minutes:this.minutes})})),z(this,"onMouseEnterLeave",(e=>{let t=e.target.getAttribute("name"),a=this.$minutesText;"hours"===t&&(a=this.$hoursText),a.classList.toggle("-focus-")})),z(this,"onFocus",(()=>{this.toggleTimepickerIsActive(!0)})),z(this,"onBlur",(()=>{this.toggleTimepickerIsActive(!1)})),this.opts=e,this.dp=t;let{timeFormat:i}=this.dp.locale;i&&(i.match(_("h"))||i.match(_("hh")))&&(this.ampm=!0),this.init()}init(){this.setTime(this.dp.lastSelectedDate||this.dp.viewDate),this.createElement(),this.buildHtml(),this.defineDOM(),this.render(),this.bindDatepickerEvents(),this.bindDOMEvents()}bindDatepickerEvents(){this.dp.on(a.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(a.eventChangeLastSelectedDate,this.onChangeLastSelectedDate)}bindDOMEvents(){let e="input";navigator.userAgent.match(/trident/gi)&&(e="change"),w(this.$ranges,e,this.onChangeInputRange),w(this.$ranges,"mouseenter",this.onMouseEnterLeave),w(this.$ranges,"mouseleave",this.onMouseEnterLeave),w(this.$ranges,"focus",this.onFocus),w(this.$ranges,"mousedown",this.onFocus),w(this.$ranges,"blur",this.onBlur)}createElement(){this.$el=o({className:p("air-datepicker-time",{"-am-pm-":this.dp.ampm})})}destroy(){this.dp.off(a.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(a.eventChangeLastSelectedDate,this.onChangeLastSelectedDate),this.$el.parentNode.removeChild(this.$el)}buildHtml(){let{ampm:e,hours:t,displayHours:a,minutes:i,minHours:r,minMinutes:o,maxHours:n,maxMinutes:s,dayPeriod:l,opts:{hoursStep:c,minutesStep:h}}=this;this.$el.innerHTML=`<div class="air-datepicker-time--current">   <span class="air-datepicker-time--current-hours">${d(a)}</span>   <span class="air-datepicker-time--current-colon">:</span>   <span class="air-datepicker-time--current-minutes">${d(i)}</span>   `+(e?`<span class='air-datepicker-time--current-ampm'>${l}</span>`:"")+'</div><div class="air-datepicker-time--sliders">   <div class="air-datepicker-time--row">'+`      <input type="range" name="hours" value="${t}" min="${r}" max="${n}" step="${c}"/>   </div>   <div class="air-datepicker-time--row">`+`      <input type="range" name="minutes" value="${i}" min="${o}" max="${s}" step="${h}"/>   </div></div>`}defineDOM(){let e=e=>r(e,this.$el);this.$ranges=this.$el.querySelectorAll('[type="range"]'),this.$hours=e('[name="hours"]'),this.$minutes=e('[name="minutes"]'),this.$hoursText=e(".air-datepicker-time--current-hours"),this.$minutesText=e(".air-datepicker-time--current-minutes"),this.$ampm=e(".air-datepicker-time--current-ampm")}setTime(e){this.setMinMaxTime(e),this.setCurrentTime(e)}addTimeToDate(e){e&&(e.setHours(this.hours),e.setMinutes(this.minutes))}setMinMaxTime(e){if(this.setMinMaxTimeFromOptions(),e){let{minDate:t,maxDate:a}=this.dp;t&&u(e,t)&&this.setMinTimeFromMinDate(t),a&&u(e,a)&&this.setMaxTimeFromMaxDate(a)}}setCurrentTime(e){let{hours:t,minutes:a}=e?l(e):this;this.hours=v(t,this.minHours,this.maxHours),this.minutes=v(a,this.minMinutes,this.maxMinutes)}setMinMaxTimeFromOptions(){let{minHours:e,minMinutes:t,maxHours:a,maxMinutes:i}=this.opts;this.minHours=v(e,0,23),this.minMinutes=v(t,0,59),this.maxHours=v(a,0,23),this.maxMinutes=v(i,0,59)}setMinTimeFromMinDate(e){let{lastSelectedDate:t}=this.dp;this.minHours=e.getHours(),t&&t.getHours()>e.getHours()?this.minMinutes=this.opts.minMinutes:this.minMinutes=e.getMinutes()}setMaxTimeFromMaxDate(e){let{lastSelectedDate:t}=this.dp;this.maxHours=e.getHours(),t&&t.getHours()<e.getHours()?this.maxMinutes=this.opts.maxMinutes:this.maxMinutes=e.getMinutes()}updateSliders(){n(this.$hours,{min:this.minHours,max:this.maxHours}).value=this.hours,n(this.$minutes,{min:this.minMinutes,max:this.maxMinutes}).value=this.minutes}updateText(){this.$hoursText.innerHTML=d(this.displayHours),this.$minutesText.innerHTML=d(this.minutes),this.ampm&&(this.$ampm.innerHTML=this.dayPeriod)}set hours(e){this._hours=e;let{hours:t,dayPeriod:a}=c(e);this.displayHours=this.ampm?t:e,this.dayPeriod=a}get hours(){return this._hours}render(){this.updateSliders(),this.updateText()}}function B(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class R{constructor(e){let{dp:t,opts:a}=e;B(this,"pressedKeys",new Set),B(this,"hotKeys",new Map([[[["Control","ArrowRight"],["Control","ArrowUp"]],e=>e.month++],[[["Control","ArrowLeft"],["Control","ArrowDown"]],e=>e.month--],[[["Shift","ArrowRight"],["Shift","ArrowUp"]],e=>e.year++],[[["Shift","ArrowLeft"],["Shift","ArrowDown"]],e=>e.year--],[[["Alt","ArrowRight"],["Alt","ArrowUp"]],e=>e.year+=10],[[["Alt","ArrowLeft"],["Alt","ArrowDown"]],e=>e.year-=10],[["Control","Shift","ArrowUp"],(e,t)=>t.up()]])),B(this,"handleHotKey",(e=>{let t=this.hotKeys.get(e),a=l(this.getInitialFocusDate());t(a,this.dp);let{year:i,month:r,date:o}=a,n=s(new Date(i,r));n<o&&(o=n);let c=this.dp.getClampedDate(new Date(i,r,o));this.dp.setFocusDate(c,{viewDateTransition:!0})})),B(this,"isHotKeyPressed",(()=>{let e=!1,t=this.pressedKeys.size,a=e=>this.pressedKeys.has(e);for(let[i]of this.hotKeys){if(e)break;if(Array.isArray(i[0]))i.forEach((r=>{e||t!==r.length||(e=r.every(a)&&i)}));else{if(t!==i.length)continue;e=i.every(a)&&i}}return e})),B(this,"isArrow",(e=>e>=37&&e<=40)),B(this,"onKeyDown",(e=>{let{key:t,which:a}=e,{dp:i,dp:{focusDate:r},opts:o}=this;this.registerKey(t);let n=this.isHotKeyPressed();if(n)return e.preventDefault(),void this.handleHotKey(n);if(this.isArrow(a))return e.preventDefault(),void this.focusNextCell(t);if("Enter"===t){if(i.currentView!==o.minView)return void i.down();if(r){let e=i._checkIfDateIsSelected(r);return void(e?i._handleAlreadySelectedDates(e,r):i.selectDate(r))}}"Escape"===t&&this.dp.hide()})),B(this,"onKeyUp",(e=>{this.removeKey(e.key)})),this.dp=t,this.opts=a,this.init()}init(){this.bindKeyboardEvents()}bindKeyboardEvents(){let{$el:e}=this.dp;e.addEventListener("keydown",this.onKeyDown),e.addEventListener("keyup",this.onKeyUp)}destroy(){let{$el:e}=this.dp;e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("keyup",this.onKeyUp),this.hotKeys=null,this.pressedKeys=null}getInitialFocusDate(){let{focusDate:e,currentView:t,selectedDates:i,parsedViewDate:{year:r,month:o}}=this.dp,n=e||i[i.length-1];if(!n)switch(t){case a.days:n=new Date(r,o,(new Date).getDate());break;case a.months:n=new Date(r,o,1);break;case a.years:n=new Date(r,0,1)}return n}focusNextCell(e){let t=this.getInitialFocusDate(),{currentView:i}=this.dp,{days:r,months:o,years:n}=a,s=l(t),c=s.year,d=s.month,h=s.date;switch(e){case"ArrowLeft":i===r&&(h-=1),i===o&&(d-=1),i===n&&(c-=1);break;case"ArrowUp":i===r&&(h-=7),i===o&&(d-=3),i===n&&(c-=4);break;case"ArrowRight":i===r&&(h+=1),i===o&&(d+=1),i===n&&(c+=1);break;case"ArrowDown":i===r&&(h+=7),i===o&&(d+=3),i===n&&(c+=4)}let p=this.dp.getClampedDate(new Date(c,d,h));this.dp.setFocusDate(p,{viewDateTransition:!0})}registerKey(e){this.pressedKeys.add(e)}removeKey(e){this.pressedKeys.delete(e)}}let N={on(e,t){this.__events||(this.__events={}),this.__events[e]?this.__events[e].push(t):this.__events[e]=[t]},off(e,t){this.__events&&this.__events[e]&&(this.__events[e]=this.__events[e].filter((e=>e!==t)))},removeAllEvents(){this.__events={}},trigger(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];this.__events&&this.__events[e]&&this.__events[e].forEach((e=>{e(...a)}))}};function $(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let L="",P="",H=!1;class F{static buildGlobalContainer(e){H=!0,L=o({className:e,id:e}),r("body").appendChild(L)}constructor(e,t){var n=this;if($(this,"viewIndexes",[a.days,a.months,a.years]),$(this,"next",(()=>{let{year:e,month:t}=this.parsedViewDate;switch(this.currentView){case a.days:this.setViewDate(new Date(e,t+1,1));break;case a.months:this.setViewDate(new Date(e+1,t,1));break;case a.years:this.setViewDate(new Date(e+10,0,1))}})),$(this,"prev",(()=>{let{year:e,month:t}=this.parsedViewDate;switch(this.currentView){case a.days:this.setViewDate(new Date(e,t-1,1));break;case a.months:this.setViewDate(new Date(e-1,t,1));break;case a.years:this.setViewDate(new Date(e-10,0,1))}})),$(this,"_finishHide",(()=>{this.hideAnimation=!1,this._destroyComponents(),this.$container.removeChild(this.$datepicker)})),$(this,"setPosition",(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("function"==typeof(e=e||n.opts.position))return void(n.customHide=e({$datepicker:n.$datepicker,$target:n.$el,$pointer:n.$pointer,isViewChange:t,done:n._finishHide}));let a,i,{isMobile:r}=n.opts,o=n.$el.getBoundingClientRect(),s=n.$el.getBoundingClientRect(),l=n.$datepicker.offsetParent,c=n.$el.offsetParent,d=n.$datepicker.getBoundingClientRect(),h=e.split(" "),p=window.scrollY,u=window.scrollX,f=n.opts.offset,g=h[0],b=h[1];if(r)n.$datepicker.style.cssText="left: 50%; top: 50%";else{if(l===c&&l!==document.body&&(s={top:n.$el.offsetTop,left:n.$el.offsetLeft,width:o.width,height:n.$el.offsetHeight},p=0,u=0),l!==c&&l!==document.body){let e=l.getBoundingClientRect();s={top:o.top-e.top,left:o.left-e.left,width:o.width,height:o.height},p=0,u=0}switch(g){case"top":a=s.top-d.height-f;break;case"right":i=s.left+s.width+f;break;case"bottom":a=s.top+s.height+f;break;case"left":i=s.left-d.width-f}switch(b){case"top":a=s.top;break;case"right":i=s.left+s.width-d.width;break;case"bottom":a=s.top+s.height-d.height;break;case"left":i=s.left;break;case"center":/left|right/.test(g)?a=s.top+s.height/2-d.height/2:i=s.left+s.width/2-d.width/2}n.$datepicker.style.cssText=`left: ${i+u}px; top: ${a+p}px`}})),$(this,"_setInputValue",(()=>{let{opts:e,$altField:t,locale:{dateFormat:a}}=this,{altFieldDateFormat:i,altField:r}=e;r&&t&&(t.value=this._getInputValue(i)),this.$el.value=this._getInputValue(a)})),$(this,"_getInputValue",(e=>{let{selectedDates:t,opts:a}=this,{multipleDates:i,multipleDatesSeparator:r}=a;if(!t.length)return"";let o="function"==typeof e,n=o?e(i?t:t[0]):t.map((t=>this.formatDate(t,e)));return n=o?n:n.join(r),n})),$(this,"_checkIfDateIsSelected",(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.days,i=!1;return n.selectedDates.some((a=>{let r=u(e,a,t);return i=r&&a,r})),i})),$(this,"_scheduleCallAfterTransition",(e=>{this._cancelScheduledCall(),e&&e(!1),this._onTransitionEnd=()=>{e&&e(!0)},this.$datepicker.addEventListener("transitionend",this._onTransitionEnd,{once:!0})})),$(this,"_cancelScheduledCall",(()=>{this.$datepicker.removeEventListener("transitionend",this._onTransitionEnd)})),$(this,"setViewDate",(e=>{if(!((e=k(e))instanceof Date))return;if(u(e,this.viewDate))return;let t=this.viewDate;this.viewDate=e;let{onChangeViewDate:i}=this.opts;if(i){let{month:e,year:t}=this.parsedViewDate;i({month:e,year:t,decade:this.curDecade})}this.trigger(a.eventChangeViewDate,e,t)})),$(this,"setFocusDate",(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!e||(e=k(e))instanceof Date)&&(n.focusDate=e,n.trigger(a.eventChangeFocusDate,e,t))})),$(this,"setCurrentView",(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.viewIndexes.includes(e)){if(n.currentView=e,n.elIsInput&&n.visible&&n.setPosition(void 0,!0),n.trigger(a.eventChangeCurrentView,e),!n.views[e]){let t=n.views[e]=new S({dp:n,opts:n.opts,type:e});n.shouldUpdateDOM&&n.$content.appendChild(t.$el)}n.opts.onChangeView&&!t.silent&&n.opts.onChangeView(e)}})),$(this,"_updateLastSelectedDate",(e=>{this.lastSelectedDate=e,this.trigger(a.eventChangeLastSelectedDate,e)})),$(this,"destroy",(()=>{if(this.isDestroyed)return;let{showEvent:e,isMobile:t}=this.opts,a=this.$datepicker.parentNode;a&&a.removeChild(this.$datepicker),this.$el.removeEventListener(e,this._onFocus),this.$el.removeEventListener("blur",this._onBlur),window.removeEventListener("resize",this._onResize),t&&this._removeMobileAttributes(),this.keyboardNav&&this.keyboardNav.destroy(),this.views=null,this.nav=null,this.$datepicker=null,this.opts={},this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDates=[],this.rangeDateFrom=null,this.rangeDateTo=null,this.isDestroyed=!0})),$(this,"update",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=y({},n.opts),{silent:r}=t;y(n.opts,e);let{timepicker:o,buttons:s,range:l,selectedDates:c,isMobile:d}=n.opts,h=n.visible||n.treatAsInline;n._createMinMaxDates(),n._limitViewDateByMaxMinDates(),n._handleLocale(),c&&(n.selectedDates=[],n.selectDate(c,{silent:r})),e.view&&n.setCurrentView(e.view,{silent:r}),n._setInputValue(),i.range&&!l?(n.rangeDateTo=!1,n.rangeDateFrom=!1):!i.range&&l&&n.selectedDates.length&&(n.rangeDateFrom=n.selectedDates[0],n.rangeDateTo=n.selectedDates[1]),i.timepicker&&!o?(h&&n.timepicker.destroy(),n.timepicker=!1,n.$timepicker.parentNode.removeChild(n.$timepicker)):!i.timepicker&&o&&n._addTimepicker(),!i.buttons&&s?n._addButtons():i.buttons&&!s?(n.buttons.destroy(),n.$buttons.parentNode.removeChild(n.$buttons)):h&&i.buttons&&s&&n.buttons.clearHtml().render(),!i.isMobile&&d?(n.treatAsInline||P||n._createMobileOverlay(),n._addMobileAttributes(),n.visible&&n._showMobileOverlay()):i.isMobile&&!d&&(n._removeMobileAttributes(),n.visible&&(P.classList.remove("-active-"),"function"!=typeof n.opts.position&&n.setPosition())),h&&(n.nav.update(),n.views[n.currentView].render(),n.currentView===a.days&&n.views[n.currentView].renderDayNames())})),$(this,"disableDate",((e,t)=>{(Array.isArray(e)?e:[e]).forEach((e=>{let a=k(e);if(!a)return;let i=t?"delete":"add";this.disabledDates[i](this.formatDate(a,"yyyy-MM-dd"));let r=this.getCell(a,this.currentViewSingular);r&&r.adpCell.render()}),[])})),$(this,"enableDate",(e=>{this.disableDate(e,!0)})),$(this,"isDateDisabled",(e=>{let t=k(e);return this.disabledDates.has(this.formatDate(t,"yyyy-MM-dd"))})),$(this,"isOtherMonth",(e=>{let{month:t}=l(e);return t!==this.parsedViewDate.month})),$(this,"isOtherYear",(e=>{let{year:t}=l(e);return t!==this.parsedViewDate.year})),$(this,"isOtherDecade",(e=>{let{year:t}=l(e),[a,i]=h(this.viewDate);return t<a||t>i})),$(this,"_onChangeSelectedDate",(e=>{let{silent:t}=e;setTimeout((()=>{this._setInputValue(),this.opts.onSelect&&!t&&this._triggerOnSelect()}))})),$(this,"_onChangeFocusedDate",(function(e){let{viewDateTransition:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return;let a=!1;t&&(a=n.isOtherMonth(e)||n.isOtherYear(e)||n.isOtherDecade(e)),a&&n.setViewDate(e),n.opts.onFocus&&n.opts.onFocus({datepicker:n,date:e})})),$(this,"_onChangeTime",(e=>{let{hours:t,minutes:a}=e,i=new Date,{lastSelectedDate:r,opts:{onSelect:o}}=this,n=r;r||(n=i);let s=this.getCell(n,this.currentViewSingular),l=s&&s.adpCell;l&&l.isDisabled||(n.setHours(t),n.setMinutes(a),r?(this._setInputValue(),o&&this._triggerOnSelect()):this.selectDate(n))})),$(this,"_onFocus",(e=>{this.visible||this.show()})),$(this,"_onBlur",(e=>{this.inFocus||!this.visible||this.opts.isMobile||this.hide()})),$(this,"_onMouseDown",(e=>{this.inFocus=!0})),$(this,"_onMouseUp",(e=>{this.inFocus=!1,this.$el.focus()})),$(this,"_onResize",(()=>{this.visible&&"function"!=typeof this.opts.position&&this.setPosition()})),$(this,"_onClickOverlay",(()=>{this.visible&&this.hide()})),$(this,"getViewDates",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.days;return S.getDatesFunction(e)(n)})),$(this,"isWeekend",(e=>this.opts.weekends.includes(e))),$(this,"getClampedDate",(e=>{let{minDate:t,maxDate:a}=this,i=e;return a&&f(e,a)?i=a:t&&g(e,t)&&(i=t),i})),this.$el=r(e),!this.$el)return;this.$datepicker=o({className:"air-datepicker"}),this.opts=y({},i,t),this.$customContainer=!!this.opts.container&&r(this.opts.container),this.$altField=r(this.opts.altField||!1);let{view:s,startDate:c}=this.opts;c||(this.opts.startDate=new Date),"INPUT"===this.$el.nodeName&&(this.elIsInput=!0),this.inited=!1,this.visible=!1,this.viewDate=k(this.opts.startDate),this.focusDate=!1,this.initialReadonly=this.$el.getAttribute("readonly"),this.customHide=!1,this.currentView=s,this.selectedDates=[],this.disabledDates=new Set,this.isDestroyed=!1,this.views={},this.keys=[],this.rangeDateFrom="",this.rangeDateTo="",this.timepickerIsActive=!1,this.treatAsInline=this.opts.inline||!this.elIsInput,this.init()}init(){let{opts:e,treatAsInline:t,opts:{inline:a,isMobile:i,selectedDates:o,keyboardNav:n,onlyTimepicker:s}}=this,l=r("body");(!H||H&&L&&!l.contains(L))&&!a&&this.elIsInput&&!this.$customContainer&&F.buildGlobalContainer(F.defaultGlobalContainerId),!i||P||t||this._createMobileOverlay(),this._handleLocale(),this._bindSubEvents(),this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this.elIsInput&&(a||this._bindEvents(),n&&!s&&(this.keyboardNav=new R({dp:this,opts:e}))),o&&this.selectDate(o,{silent:!0}),this.opts.visible&&!t&&this.show(),i&&!t&&this.$el.setAttribute("readonly",!0),t&&this._createComponents()}_createMobileOverlay(){P=o({className:"air-datepicker-overlay"}),L.appendChild(P)}_createComponents(){let{opts:e,treatAsInline:t,opts:{inline:a,buttons:i,timepicker:r,position:o,classes:n,onlyTimepicker:s,isMobile:l}}=this;this._buildBaseHtml(),this.elIsInput&&(a||this._setPositionClasses(o)),!a&&this.elIsInput||this.$datepicker.classList.add("-inline-"),n&&this.$datepicker.classList.add(...n.split(" ")),s&&this.$datepicker.classList.add("-only-timepicker-"),l&&!t&&this._addMobileAttributes(),this.views[this.currentView]=new S({dp:this,type:this.currentView,opts:e}),this.nav=new I({dp:this,opts:e}),r&&this._addTimepicker(),i&&this._addButtons(),this.$content.appendChild(this.views[this.currentView].$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){for(let e in this.views)this.views[e].destroy();this.views={},this.nav.destroy(),this.timepicker&&this.timepicker.destroy()}_addMobileAttributes(){P.addEventListener("click",this._onClickOverlay),this.$datepicker.classList.add("-is-mobile-"),this.$el.setAttribute("readonly",!0)}_removeMobileAttributes(){P.removeEventListener("click",this._onClickOverlay),this.$datepicker.classList.remove("-is-mobile-"),this.initialReadonly||""===this.initialReadonly||this.$el.removeAttribute("readonly")}_createMinMaxDates(){let{minDate:e,maxDate:t}=this.opts;this.minDate=!!e&&k(e),this.maxDate=!!t&&k(t)}_addTimepicker(){this.$timepicker=o({className:"air-datepicker--time"}),this.$datepicker.appendChild(this.$timepicker),this.timepicker=new A({dp:this,opts:this.opts}),this.$timepicker.appendChild(this.timepicker.$el)}_addButtons(){this.$buttons=o({className:"air-datepicker--buttons"}),this.$datepicker.appendChild(this.$buttons),this.buttons=new O({dp:this,opts:this.opts}),this.$buttons.appendChild(this.buttons.$el)}_bindSubEvents(){this.on(a.eventChangeSelectedDate,this._onChangeSelectedDate),this.on(a.eventChangeFocusDate,this._onChangeFocusedDate),this.on(a.eventChangeTime,this._onChangeTime)}_buildBaseHtml(){let{inline:e}=this.opts;var t,a;this.elIsInput?e?(t=this.$datepicker,(a=this.$el).parentNode.insertBefore(t,a.nextSibling)):this.$container.appendChild(this.$datepicker):this.$el.appendChild(this.$datepicker),this.$datepicker.innerHTML='<i class="air-datepicker--pointer"></i><div class="air-datepicker--navigation"></div><div class="air-datepicker--content"></div>',this.$content=r(".air-datepicker--content",this.$datepicker),this.$pointer=r(".air-datepicker--pointer",this.$datepicker),this.$nav=r(".air-datepicker--navigation",this.$datepicker)}_handleLocale(){let{locale:e,dateFormat:t,firstDay:a,timepicker:i,onlyTimepicker:r,timeFormat:o,dateTimeSeparator:n}=this.opts;var s;this.locale=(s=e,JSON.parse(JSON.stringify(s))),t&&(this.locale.dateFormat=t),void 0!==o&&""!==o&&(this.locale.timeFormat=o);let{timeFormat:l}=this.locale;if(""!==a&&(this.locale.firstDay=a),i&&"function"!=typeof t){let e=l?n:"";this.locale.dateFormat=[this.locale.dateFormat,l||""].join(e)}r&&"function"!=typeof t&&(this.locale.dateFormat=this.locale.timeFormat)}_setPositionClasses(e){if("function"==typeof e)return void this.$datepicker.classList.add("-custom-position-");let t=(e=e.split(" "))[0],a=`air-datepicker -${t}-${e[1]}- -from-${t}-`;this.$datepicker.classList.add(...a.split(" "))}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$el.addEventListener("blur",this._onBlur),this.$datepicker.addEventListener("mousedown",this._onMouseDown),this.$datepicker.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}_limitViewDateByMaxMinDates(){let{viewDate:e,minDate:t,maxDate:a}=this;a&&f(e,a)&&this.setViewDate(a),t&&g(e,t)&&this.setViewDate(t)}formatDate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewDate,t=arguments.length>1?arguments[1]:void 0;if(e=k(e),!(e instanceof Date))return;let a=t,i=this.locale,r=l(e),o=r.dayPeriod,n=h(e),s=F.replacer,c={T:e.getTime(),m:r.minutes,mm:r.fullMinutes,h:r.hours12,hh:r.fullHours12,H:r.hours,HH:r.fullHours,aa:o,AA:o.toUpperCase(),E:i.daysShort[r.day],EEEE:i.days[r.day],d:r.date,dd:r.fullDate,M:r.month+1,MM:r.fullMonth,MMM:i.monthsShort[r.month],MMMM:i.months[r.month],yy:r.year.toString().slice(-2),yyyy:r.year,yyyy1:n[0],yyyy2:n[1]};for(let[e,t]of Object.entries(c))a=s(a,_(e),t);return a}down(e){this._handleUpDownActions(e,"down")}up(e){this._handleUpDownActions(e,"up")}selectDate(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{currentView:r,parsedViewDate:o,selectedDates:n}=this,{updateTime:s}=i,{moveToOtherMonthsOnSelect:l,moveToOtherYearsOnSelect:c,multipleDates:d,range:h,autoClose:p,onBeforeSelect:u}=this.opts,g=n.length;if(Array.isArray(e))return e.forEach((e=>{this.selectDate(e,i)})),new Promise((e=>{setTimeout(e)}));if((e=k(e))instanceof Date){if(u&&!u({date:e,datepicker:this}))return Promise.resolve();if(r===a.days&&e.getMonth()!==o.month&&l&&(t=new Date(e.getFullYear(),e.getMonth(),1)),r===a.years&&e.getFullYear()!==o.year&&c&&(t=new Date(e.getFullYear(),0,1)),t&&this.setViewDate(t),d&&!h){if(g===d)return;this._checkIfDateIsSelected(e)||n.push(e)}else if(h)switch(g){case 1:n.push(e),this.rangeDateTo||(this.rangeDateTo=e),f(this.rangeDateFrom,this.rangeDateTo)&&(this.rangeDateTo=this.rangeDateFrom,this.rangeDateFrom=e),this.selectedDates=[this.rangeDateFrom,this.rangeDateTo];break;case 2:this.selectedDates=[e],this.rangeDateFrom=e,this.rangeDateTo="";break;default:this.selectedDates=[e],this.rangeDateFrom=e}else this.selectedDates=[e];return this.trigger(a.eventChangeSelectedDate,{action:a.actionSelectDate,silent:null==i?void 0:i.silent,date:e,updateTime:s}),this._updateLastSelectedDate(e),p&&!this.timepickerIsActive&&this.visible&&(d||h?h&&1===g&&this.hide():this.hide()),new Promise((e=>{setTimeout(e)}))}}unselectDate(e){let t=this.selectedDates,i=this;if((e=k(e))instanceof Date)return t.some(((r,o)=>{if(u(r,e))return t.splice(o,1),i.selectedDates.length?(i.rangeDateTo="",i.rangeDateFrom=t[0],i._updateLastSelectedDate(i.selectedDates[i.selectedDates.length-1])):(i.rangeDateFrom="",i.rangeDateTo="",i._updateLastSelectedDate(!1)),this.trigger(a.eventChangeSelectedDate,{action:a.actionUnselectDate,date:e}),!0}))}replaceDate(e,t){let i=this.selectedDates.find((t=>u(t,e,this.currentView))),r=this.selectedDates.indexOf(i);r<0||u(this.selectedDates[r],t,this.currentView)||(this.selectedDates[r]=t,this.trigger(a.eventChangeSelectedDate,{action:a.actionSelectDate,date:t,updateTime:!0}),this._updateLastSelectedDate(t))}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.selectedDates=[],this.rangeDateFrom=!1,this.rangeDateTo=!1,this.lastSelectedDate=!1,this.trigger(a.eventChangeSelectedDate,{action:a.actionUnselectDate,silent:e.silent}),new Promise((e=>{setTimeout(e)}))}show(){let{onShow:e,isMobile:t}=this.opts;this._cancelScheduledCall(),this.visible||this.hideAnimation||this._createComponents(),this.setPosition(this.opts.position),this.$datepicker.classList.add("-active-"),this.visible=!0,e&&this._scheduleCallAfterTransition(e),t&&this._showMobileOverlay()}hide(){let{onHide:e,isMobile:t}=this.opts,a=this._hasTransition();this.visible=!1,this.hideAnimation=!0,this.$datepicker.classList.remove("-active-"),this.customHide&&this.customHide(),this.elIsInput&&this.$el.blur(),this._scheduleCallAfterTransition((t=>{!this.customHide&&(t&&a||!t&&!a)&&this._finishHide(),e&&e(t)})),t&&P.classList.remove("-active-")}_triggerOnSelect(){let e=[],t=[],{selectedDates:a,locale:i,opts:{onSelect:r,multipleDates:o,range:n}}=this,s=o||n,l="function"==typeof i.dateFormat;a.length&&(e=a.map(b),t=l?o?i.dateFormat(e):e.map((e=>i.dateFormat(e))):e.map((e=>this.formatDate(e,i.dateFormat)))),r({date:s?e:e[0],formattedDate:s?t:t[0],datepicker:this})}_handleAlreadySelectedDates(e,t){let{selectedDates:a,rangeDateFrom:i,rangeDateTo:r}=this,{range:o,toggleSelected:n}=this.opts,s=a.length,l="function"==typeof n?n({datepicker:this,date:t}):n,c=Boolean(o&&1===s&&e),d=c?b(t):t;o&&!l&&(2!==s&&this.selectDate(d),2===s&&u(i,r))||(l?this.unselectDate(d):this._updateLastSelectedDate(c?d:e))}_handleUpDownActions(e,t){if(!((e=k(e||this.focusDate||this.viewDate))instanceof Date))return;let a="up"===t?this.viewIndex+1:this.viewIndex-1;a>2&&(a=2),a<0&&(a=0),this.setViewDate(new Date(e.getFullYear(),e.getMonth(),1)),this.setCurrentView(this.viewIndexes[a])}getCell(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.day;if(!((e=k(e))instanceof Date))return;let{year:i,month:r,date:o}=l(e),n=`[data-year="${i}"]`,s=`[data-month="${r}"]`,c={[a.day]:`${n}${s}[data-date="${o}"]`,[a.month]:`${n}${s}`,[a.year]:`${n}`};return this.views[this.currentView]?this.views[this.currentView].$el.querySelector(c[t]):void 0}_showMobileOverlay(){P.classList.add("-active-")}_hasTransition(){return window.getComputedStyle(this.$datepicker).getPropertyValue("transition-duration").split(", ").reduce(((e,t)=>parseFloat(t)+e),0)>0}get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return l(this.viewDate)}get currentViewSingular(){return this.currentView.slice(0,-1)}get curDecade(){return h(this.viewDate)}get viewIndex(){return this.viewIndexes.indexOf(this.currentView)}get isFinalView(){return this.currentView===a.years}get hasSelectedDates(){return this.selectedDates.length>0}get isMinViewReached(){return this.currentView===this.opts.minView||this.currentView===a.days}get $container(){return this.$customContainer||L}static replacer(e,t,a){return e.replace(t,(function(e,t,i,r){return t+a+r}))}}var U;return $(F,"defaults",i),$(F,"version","3.5.3"),$(F,"defaultGlobalContainerId","air-datepicker-global-container"),U=F.prototype,Object.assign(U,N),t.default}()}))})(ma);const va=ma.exports;var ya={};Object.defineProperty(ya,"__esModule",{value:true});var ka=ya.default=void 0;var _a={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",dateFormat:"MM/dd/yyyy",timeFormat:"hh:mm aa",firstDay:0};ka=ya.default=_a;const xa='.air-datepicker-cell.-year-.-other-decade-,.air-datepicker-cell.-day-.-other-month-{color:var(--adp-color-other-month)}.air-datepicker-cell.-year-.-other-decade-:hover,.air-datepicker-cell.-day-.-other-month-:hover{color:var(--adp-color-other-month-hover)}.-disabled-.-focus-.air-datepicker-cell.-year-.-other-decade-,.-disabled-.-focus-.air-datepicker-cell.-day-.-other-month-{color:var(--adp-color-other-month)}.-selected-.air-datepicker-cell.-year-.-other-decade-,.-selected-.air-datepicker-cell.-day-.-other-month-{color:#fff;background:var(--adp-background-color-selected-other-month)}.-selected-.-focus-.air-datepicker-cell.-year-.-other-decade-,.-selected-.-focus-.air-datepicker-cell.-day-.-other-month-{background:var(--adp-background-color-selected-other-month-focused)}.-in-range-.air-datepicker-cell.-year-.-other-decade-,.-in-range-.air-datepicker-cell.-day-.-other-month-{background-color:var(--adp-background-color-in-range);color:var(--adp-color)}.-in-range-.-focus-.air-datepicker-cell.-year-.-other-decade-,.-in-range-.-focus-.air-datepicker-cell.-day-.-other-month-{background-color:var(--adp-background-color-in-range-focused)}.air-datepicker-cell.-year-.-other-decade-:empty,.air-datepicker-cell.-day-.-other-month-:empty{background:none;border:none}.air-datepicker-cell{border-radius:var(--adp-cell-border-radius);box-sizing:border-box;cursor:pointer;display:flex;position:relative;align-items:center;justify-content:center;z-index:1}.air-datepicker-cell.-focus-{background:var(--adp-cell-background-color-hover)}.air-datepicker-cell.-current-{color:var(--adp-color-current-date)}.air-datepicker-cell.-current-.-focus-{color:var(--adp-color)}.air-datepicker-cell.-current-.-in-range-{color:var(--adp-color-current-date)}.air-datepicker-cell.-disabled-{cursor:default;color:var(--adp-color-disabled)}.air-datepicker-cell.-disabled-.-focus-{color:var(--adp-color-disabled)}.air-datepicker-cell.-disabled-.-in-range-{color:var(--adp-color-disabled-in-range)}.air-datepicker-cell.-disabled-.-current-.-focus-{color:var(--adp-color-disabled)}.air-datepicker-cell.-in-range-{background:var(--adp-cell-background-color-in-range);border-radius:0}.air-datepicker-cell.-in-range-:hover,.air-datepicker-cell.-in-range-.-focus-{background:var(--adp-cell-background-color-in-range-hover)}.air-datepicker-cell.-range-from-{border:1px solid var(--adp-cell-border-color-in-range);background-color:var(--adp-cell-background-color-in-range);border-radius:var(--adp-cell-border-radius) 0 0 var(--adp-cell-border-radius)}.air-datepicker-cell.-range-to-{border:1px solid var(--adp-cell-border-color-in-range);background-color:var(--adp-cell-background-color-in-range);border-radius:0 var(--adp-cell-border-radius) var(--adp-cell-border-radius) 0}.air-datepicker-cell.-range-to-.-range-from-{border-radius:var(--adp-cell-border-radius)}.air-datepicker-cell.-selected-{color:#fff;border:none;background:var(--adp-cell-background-color-selected)}.air-datepicker-cell.-selected-.-current-{color:#fff;background:var(--adp-cell-background-color-selected)}.air-datepicker-cell.-selected-.-focus-{background:var(--adp-cell-background-color-selected-hover)}.air-datepicker-body{transition:all var(--adp-transition-duration) var(--adp-transition-ease)}.air-datepicker-body.-hidden-{display:none}.air-datepicker-body--day-names{display:grid;grid-template-columns:repeat(7, var(--adp-day-cell-width));margin:8px 0 3px}.air-datepicker-body--day-name{color:var(--adp-day-name-color);display:flex;align-items:center;justify-content:center;flex:1;text-align:center;text-transform:uppercase;font-size:.8em}.air-datepicker-body--day-name.-clickable-{cursor:pointer}.air-datepicker-body--day-name.-clickable-:hover{color:var(--adp-day-name-color-hover)}.air-datepicker-body--cells{display:grid}.air-datepicker-body--cells.-days-{grid-template-columns:repeat(7, var(--adp-day-cell-width));grid-auto-rows:var(--adp-day-cell-height)}.air-datepicker-body--cells.-months-{grid-template-columns:repeat(3, 1fr);grid-auto-rows:var(--adp-month-cell-height)}.air-datepicker-body--cells.-years-{grid-template-columns:repeat(4, 1fr);grid-auto-rows:var(--adp-year-cell-height)}.air-datepicker-nav{display:flex;justify-content:space-between;border-bottom:1px solid var(--adp-border-color-inner);min-height:var(--adp-nav-height);padding:var(--adp-padding);box-sizing:content-box}.-only-timepicker- .air-datepicker-nav{display:none}.air-datepicker-nav--title,.air-datepicker-nav--action{display:flex;cursor:pointer;align-items:center;justify-content:center}.air-datepicker-nav--action{width:var(--adp-nav-action-size);border-radius:var(--adp-border-radius);-webkit-user-select:none;-moz-user-select:none;user-select:none}.air-datepicker-nav--action:hover{background:var(--adp-background-color-hover)}.air-datepicker-nav--action:active{background:var(--adp-background-color-active)}.air-datepicker-nav--action.-disabled-{visibility:hidden}.air-datepicker-nav--action svg{width:32px;height:32px}.air-datepicker-nav--action path{fill:none;stroke:var(--adp-nav-arrow-color);stroke-width:2px}.air-datepicker-nav--title{border-radius:var(--adp-border-radius);padding:0 8px}.air-datepicker-nav--title i{font-style:normal;color:var(--adp-nav-color-secondary);margin-left:.3em}.air-datepicker-nav--title:hover{background:var(--adp-background-color-hover)}.air-datepicker-nav--title:active{background:var(--adp-background-color-active)}.air-datepicker-nav--title.-disabled-{cursor:default;background:none}.air-datepicker-buttons{display:grid;grid-auto-columns:1fr;grid-auto-flow:column}.air-datepicker-button{display:inline-flex;color:var(--adp-btn-color);border-radius:var(--adp-btn-border-radius);cursor:pointer;height:var(--adp-btn-height);border:none;background:rgba(255,255,255,0)}.air-datepicker-button:hover{color:var(--adp-btn-color-hover);background:var(--adp-btn-background-color-hover)}.air-datepicker-button:focus{color:var(--adp-btn-color-hover);background:var(--adp-btn-background-color-hover);outline:none}.air-datepicker-button:active{background:var(--adp-btn-background-color-active)}.air-datepicker-button span{outline:none;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.air-datepicker-time{display:grid;grid-template-columns:max-content 1fr;grid-column-gap:12px;align-items:center;position:relative;padding:0 var(--adp-time-padding-inner)}.-only-timepicker- .air-datepicker-time{border-top:none}.air-datepicker-time--current{display:flex;align-items:center;flex:1;font-size:14px;text-align:center}.air-datepicker-time--current-colon{margin:0 2px 3px;line-height:1}.air-datepicker-time--current-hours,.air-datepicker-time--current-minutes{line-height:1;font-size:19px;font-family:"Century Gothic",CenturyGothic,AppleGothic,sans-serif;position:relative;z-index:1}.air-datepicker-time--current-hours:after,.air-datepicker-time--current-minutes:after{content:"";background:var(--adp-background-color-hover);border-radius:var(--adp-border-radius);position:absolute;left:-2px;top:-3px;right:-2px;bottom:-2px;z-index:-1;opacity:0}.air-datepicker-time--current-hours.-focus-:after,.air-datepicker-time--current-minutes.-focus-:after{opacity:1}.air-datepicker-time--current-ampm{text-transform:uppercase;align-self:flex-end;color:var(--adp-time-day-period-color);margin-left:6px;font-size:11px;margin-bottom:1px}.air-datepicker-time--row{display:flex;align-items:center;font-size:11px;height:17px;background:linear-gradient(to right, var(--adp-time-track-color), var(--adp-time-track-color)) left 50%/100% var(--adp-time-track-height) no-repeat}.air-datepicker-time--row:first-child{margin-bottom:4px}.air-datepicker-time--row input[type=range]{background:none;cursor:pointer;flex:1;height:100%;width:100%;padding:0;margin:0;-webkit-appearance:none}.air-datepicker-time--row input[type=range]::-webkit-slider-thumb{-webkit-appearance:none}.air-datepicker-time--row input[type=range]::-ms-tooltip{display:none}.air-datepicker-time--row input[type=range]:hover::-webkit-slider-thumb{border-color:var(--adp-time-track-color-hover)}.air-datepicker-time--row input[type=range]:hover::-moz-range-thumb{border-color:var(--adp-time-track-color-hover)}.air-datepicker-time--row input[type=range]:hover::-ms-thumb{border-color:var(--adp-time-track-color-hover)}.air-datepicker-time--row input[type=range]:focus{outline:none}.air-datepicker-time--row input[type=range]:focus::-webkit-slider-thumb{background:var(--adp-cell-background-color-selected);border-color:var(--adp-cell-background-color-selected)}.air-datepicker-time--row input[type=range]:focus::-moz-range-thumb{background:var(--adp-cell-background-color-selected);border-color:var(--adp-cell-background-color-selected)}.air-datepicker-time--row input[type=range]:focus::-ms-thumb{background:var(--adp-cell-background-color-selected);border-color:var(--adp-cell-background-color-selected)}.air-datepicker-time--row input[type=range]::-webkit-slider-thumb{box-sizing:border-box;height:12px;width:12px;border-radius:3px;border:1px solid var(--adp-time-track-color);background:#fff;cursor:pointer;-webkit-transition:background var(--adp-transition-duration);transition:background var(--adp-transition-duration)}.air-datepicker-time--row input[type=range]::-moz-range-thumb{box-sizing:border-box;height:12px;width:12px;border-radius:3px;border:1px solid var(--adp-time-track-color);background:#fff;cursor:pointer;-moz-transition:background var(--adp-transition-duration);transition:background var(--adp-transition-duration)}.air-datepicker-time--row input[type=range]::-ms-thumb{box-sizing:border-box;height:12px;width:12px;border-radius:3px;border:1px solid var(--adp-time-track-color);background:#fff;cursor:pointer;-ms-transition:background var(--adp-transition-duration);transition:background var(--adp-transition-duration)}.air-datepicker-time--row input[type=range]::-webkit-slider-thumb{margin-top:calc(var(--adp-time-thumb-size)/2*-1)}.air-datepicker-time--row input[type=range]::-webkit-slider-runnable-track{border:none;height:var(--adp-time-track-height);cursor:pointer;color:rgba(0,0,0,0);background:rgba(0,0,0,0)}.air-datepicker-time--row input[type=range]::-moz-range-track{border:none;height:var(--adp-time-track-height);cursor:pointer;color:rgba(0,0,0,0);background:rgba(0,0,0,0)}.air-datepicker-time--row input[type=range]::-ms-track{border:none;height:var(--adp-time-track-height);cursor:pointer;color:rgba(0,0,0,0);background:rgba(0,0,0,0)}.air-datepicker-time--row input[type=range]::-ms-fill-lower{background:rgba(0,0,0,0)}.air-datepicker-time--row input[type=range]::-ms-fill-upper{background:rgba(0,0,0,0)}.air-datepicker{--adp-font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";--adp-font-size:14px;--adp-width:246px;--adp-z-index:100;--adp-padding:4px;--adp-grid-areas:"nav" "body" "timepicker" "buttons";--adp-transition-duration:.3s;--adp-transition-ease:ease-out;--adp-transition-offset:8px;--adp-background-color:#fff;--adp-background-color-hover:#f0f0f0;--adp-background-color-active:#eaeaea;--adp-background-color-in-range:rgba(92, 196, 239, .1);--adp-background-color-in-range-focused:rgba(92, 196, 239, .2);--adp-background-color-selected-other-month-focused:#8ad5f4;--adp-background-color-selected-other-month:#a2ddf6;--adp-color:#4a4a4a;--adp-color-secondary:#9c9c9c;--adp-accent-color:#4eb5e6;--adp-color-current-date:var(--adp-accent-color);--adp-color-other-month:#dedede;--adp-color-disabled:#aeaeae;--adp-color-disabled-in-range:#939393;--adp-color-other-month-hover:#c5c5c5;--adp-border-color:#dbdbdb;--adp-border-color-inner:#efefef;--adp-border-radius:4px;--adp-border-color-inline:#d7d7d7;--adp-nav-height:32px;--adp-nav-arrow-color:var(--adp-color-secondary);--adp-nav-action-size:32px;--adp-nav-color-secondary:var(--adp-color-secondary);--adp-day-name-color:#ff9a19;--adp-day-name-color-hover:#8ad5f4;--adp-day-cell-width:1fr;--adp-day-cell-height:32px;--adp-month-cell-height:42px;--adp-year-cell-height:56px;--adp-pointer-size:10px;--adp-poiner-border-radius:2px;--adp-pointer-offset:14px;--adp-cell-border-radius:4px;--adp-cell-background-color-hover:var(--adp-background-color-hover);--adp-cell-background-color-selected:#5cc4ef;--adp-cell-background-color-selected-hover:#45bced;--adp-cell-background-color-in-range:rgba(92, 196, 239, 0.1);--adp-cell-background-color-in-range-hover:rgba(92, 196, 239, 0.2);--adp-cell-border-color-in-range:var(--adp-cell-background-color-selected);--adp-btn-height:32px;--adp-btn-color:var(--adp-accent-color);--adp-btn-color-hover:var(--adp-color);--adp-btn-border-radius:var(--adp-border-radius);--adp-btn-background-color-hover:var(--adp-background-color-hover);--adp-btn-background-color-active:var(--adp-background-color-active);--adp-time-track-height:1px;--adp-time-track-color:#dedede;--adp-time-track-color-hover:#b1b1b1;--adp-time-thumb-size:12px;--adp-time-padding-inner:10px;--adp-time-day-period-color:var(--adp-color-secondary);--adp-mobile-font-size:16px;--adp-mobile-nav-height:40px;--adp-mobile-width:320px;--adp-mobile-day-cell-height:38px;--adp-mobile-month-cell-height:48px;--adp-mobile-year-cell-height:64px}.air-datepicker-overlay{--adp-overlay-background-color:rgba(0, 0, 0, .3);--adp-overlay-transition-duration:.3s;--adp-overlay-transition-ease:ease-out;--adp-overlay-z-index:99}.air-datepicker{background:var(--adp-background-color);border:1px solid var(--adp-border-color);box-shadow:0 4px 12px rgba(0,0,0,.15);border-radius:var(--adp-border-radius);box-sizing:content-box;display:grid;grid-template-columns:1fr;grid-template-rows:repeat(4, max-content);grid-template-areas:var(--adp-grid-areas);font-family:var(--adp-font-family),sans-serif;font-size:var(--adp-font-size);color:var(--adp-color);width:var(--adp-width);position:absolute;transition:opacity var(--adp-transition-duration) var(--adp-transition-ease),transform var(--adp-transition-duration) var(--adp-transition-ease);z-index:var(--adp-z-index)}.air-datepicker:not(.-custom-position-){opacity:0}.air-datepicker.-from-top-{transform:translateY(calc(var(--adp-transition-offset) * -1))}.air-datepicker.-from-right-{transform:translateX(var(--adp-transition-offset))}.air-datepicker.-from-bottom-{transform:translateY(var(--adp-transition-offset))}.air-datepicker.-from-left-{transform:translateX(calc(var(--adp-transition-offset) * -1))}.air-datepicker.-active-:not(.-custom-position-){transform:translate(0, 0);opacity:1}.air-datepicker.-active-.-custom-position-{transition:none}.air-datepicker.-inline-{border-color:var(--adp-border-color-inline);box-shadow:none;position:static;left:auto;right:auto;opacity:1;transform:none}.air-datepicker.-inline- .air-datepicker--pointer{display:none}.air-datepicker.-is-mobile-{--adp-font-size:var(--adp-mobile-font-size);--adp-day-cell-height:var(--adp-mobile-day-cell-height);--adp-month-cell-height:var(--adp-mobile-month-cell-height);--adp-year-cell-height:var(--adp-mobile-year-cell-height);--adp-nav-height:var(--adp-mobile-nav-height);--adp-nav-action-size:var(--adp-mobile-nav-height);position:fixed;width:var(--adp-mobile-width);border:none}.air-datepicker.-is-mobile- *{-webkit-tap-highlight-color:rgba(0,0,0,0)}.air-datepicker.-is-mobile- .air-datepicker--pointer{display:none}.air-datepicker.-is-mobile-:not(.-custom-position-){transform:translate(-50%, calc(-50% + var(--adp-transition-offset)))}.air-datepicker.-is-mobile-.-active-:not(.-custom-position-){transform:translate(-50%, -50%)}.air-datepicker.-custom-position-{transition:none}.air-datepicker-global-container{position:absolute;left:0;top:0}.air-datepicker--pointer{--pointer-half-size:calc(var(--adp-pointer-size) / 2);position:absolute;width:var(--adp-pointer-size);height:var(--adp-pointer-size);z-index:-1}.air-datepicker--pointer:after{content:"";position:absolute;background:#fff;border-top:1px solid var(--adp-border-color-inline);border-right:1px solid var(--adp-border-color-inline);border-top-right-radius:var(--adp-poiner-border-radius);width:var(--adp-pointer-size);height:var(--adp-pointer-size);box-sizing:border-box}.-top-left- .air-datepicker--pointer,.-top-center- .air-datepicker--pointer,.-top-right- .air-datepicker--pointer,[data-popper-placement^=top] .air-datepicker--pointer{top:calc(100% - var(--pointer-half-size) + 1px)}.-top-left- .air-datepicker--pointer:after,.-top-center- .air-datepicker--pointer:after,.-top-right- .air-datepicker--pointer:after,[data-popper-placement^=top] .air-datepicker--pointer:after{transform:rotate(135deg)}.-right-top- .air-datepicker--pointer,.-right-center- .air-datepicker--pointer,.-right-bottom- .air-datepicker--pointer,[data-popper-placement^=right] .air-datepicker--pointer{right:calc(100% - var(--pointer-half-size) + 1px)}.-right-top- .air-datepicker--pointer:after,.-right-center- .air-datepicker--pointer:after,.-right-bottom- .air-datepicker--pointer:after,[data-popper-placement^=right] .air-datepicker--pointer:after{transform:rotate(225deg)}.-bottom-left- .air-datepicker--pointer,.-bottom-center- .air-datepicker--pointer,.-bottom-right- .air-datepicker--pointer,[data-popper-placement^=bottom] .air-datepicker--pointer{bottom:calc(100% - var(--pointer-half-size) + 1px)}.-bottom-left- .air-datepicker--pointer:after,.-bottom-center- .air-datepicker--pointer:after,.-bottom-right- .air-datepicker--pointer:after,[data-popper-placement^=bottom] .air-datepicker--pointer:after{transform:rotate(315deg)}.-left-top- .air-datepicker--pointer,.-left-center- .air-datepicker--pointer,.-left-bottom- .air-datepicker--pointer,[data-popper-placement^=left] .air-datepicker--pointer{left:calc(100% - var(--pointer-half-size) + 1px)}.-left-top- .air-datepicker--pointer:after,.-left-center- .air-datepicker--pointer:after,.-left-bottom- .air-datepicker--pointer:after,[data-popper-placement^=left] .air-datepicker--pointer:after{transform:rotate(45deg)}.-top-left- .air-datepicker--pointer,.-bottom-left- .air-datepicker--pointer{left:var(--adp-pointer-offset)}.-top-right- .air-datepicker--pointer,.-bottom-right- .air-datepicker--pointer{right:var(--adp-pointer-offset)}.-top-center- .air-datepicker--pointer,.-bottom-center- .air-datepicker--pointer{left:calc(50% - var(--adp-pointer-size)/2)}.-left-top- .air-datepicker--pointer,.-right-top- .air-datepicker--pointer{top:var(--adp-pointer-offset)}.-left-bottom- .air-datepicker--pointer,.-right-bottom- .air-datepicker--pointer{bottom:var(--adp-pointer-offset)}.-left-center- .air-datepicker--pointer,.-right-center- .air-datepicker--pointer{top:calc(50% - var(--adp-pointer-size)/2)}.air-datepicker--navigation{grid-area:nav}.air-datepicker--content{box-sizing:content-box;padding:var(--adp-padding);grid-area:body}.-only-timepicker- .air-datepicker--content{display:none}.air-datepicker--time{grid-area:timepicker}.air-datepicker--buttons{grid-area:buttons}.air-datepicker--buttons,.air-datepicker--time{padding:var(--adp-padding);border-top:1px solid var(--adp-border-color-inner)}.air-datepicker-overlay{position:fixed;background:var(--adp-overlay-background-color);left:0;top:0;width:0;height:0;opacity:0;transition:opacity var(--adp-overlay-transition-duration) var(--adp-overlay-transition-ease),left 0s,height 0s,width 0s;transition-delay:0s,var(--adp-overlay-transition-duration),var(--adp-overlay-transition-duration),var(--adp-overlay-transition-duration);z-index:var(--adp-overlay-z-index)}.air-datepicker-overlay.-active-{opacity:1;width:100%;height:100%;transition:opacity var(--adp-overlay-transition-duration) var(--adp-overlay-transition-ease),height 0s,width 0s}:host{display:block}.custom-date-picker__calendar{--adp-padding:1rem;}';const Da=xa;const Ca=class{constructor(a){e(this,a);this.dateChanged=t(this,"dateChanged",7);this.datePickerFocus=t(this,"datePickerFocus",7);this.datePickerBlur=t(this,"datePickerBlur",7)}get el(){return r(this)}withClear;placeholder;label;dates;inline=false;date=null;multipleDates=false;range=false;dateFormat="yyyy-MM-dd";timepicker=false;minDate;maxDate;disabled=false;autoClose=true;showOtherMonths=true;selectOtherMonths=true;customPicker=false;container;forceDestroyOnUpdate=false;emitEmptyDate=false;triggerContainerStyle="";currentDate=null;dateChanged;datePickerFocus;datePickerBlur;datePicker;openDatePickerTimeout;componentWillLoad(){if(this.date){this.currentDate=this.toValidDate(this.date)}}componentDidLoad(){this.initializeDatepicker()}datePropChanged(e,t){if(this.isSameDates(e,t)){return}this.updatePickerDate(e)}minDatePropChanged(e,t){if(!this.datePicker){return}if(!this.isSameDates(e,t)){this.datePicker?.update({minDate:this.toValidDate(e)})}}maxDatePropChanged(e,t){if(!this.isSameDates(e,t)){this.datePicker?.update({maxDate:this.toValidDate(e)})}}async clearDatePicker(){this.datePicker?.clear()}isSameDates(e,t){if(!e&&!t)return true;if(!e||!t)return false;return me(e).isSame(me(t),"day")}toValidDate(e){if(!e)return null;const t=new Date(e);return isNaN(t.getTime())?null:t}updatePickerDate(e){const t=this.toValidDate(e);if(!t){this.datePicker?.clear();this.currentDate=null;return}if(!this.isSameDates(this.currentDate,t)){this.currentDate=t;if(this.forceDestroyOnUpdate){this.datePicker.destroy();this.datePicker=null;this.initializeDatepicker()}else{this.datePicker?.selectDate(t)}}}initializeDatepicker(){if(this.datePicker)return;this.datePicker=new va(this.el,{container:this.container,inline:true,selectedDates:this.dates?this.dates:this.currentDate?[this.currentDate]:[],multipleDates:this.multipleDates,range:this.range,dateFormat:this.dateFormat,timepicker:this.timepicker,minDate:this.toValidDate(this.minDate)??undefined,maxDate:this.toValidDate(this.maxDate)??undefined,autoClose:this.autoClose,locale:ka,showOtherMonths:this.showOtherMonths,selectOtherMonths:this.selectOtherMonths,onHide:()=>{this.datePickerBlur.emit()},onShow:()=>{this.datePickerFocus.emit()},onSelect:({date:e})=>this.handleDateSelect(e)});this.datePicker.$datepicker?.classList.add("ir-custom-date-picker__calendar");this.datePicker.$datepicker.style.borderWidth="0px";this.datePicker.$datepicker.style.setProperty("--adp-cell-background-color-selected","var(--wa-color-brand-fill-loud)");this.datePicker.$datepicker.style.setProperty("--adp-cell-background-color-selected-hover","var(--wa-color-brand-fill-loud)");this.datePicker.$datepicker.style.setProperty("--adp-background-color-selected-other-month","var(--wa-color-brand-fill-normal)");this.datePicker.$datepicker.style.setProperty("--adp-background-color-selected-other-month-focused","var(--wa-color-brand-fill-loud)");this.datePicker.$datepicker.style.setProperty("--adp-accent-color","var(--wa-color-brand-fill-loud)");this.datePicker.$datepicker.style.setProperty("--adp-day-name-color","lab(48.496% 0 0)");this.datePicker.$datepicker.style.setProperty("--adp-padding","4px !important")}handleDateSelect(e){const t=Array.isArray(e)?e.filter(Boolean):e?[e]:[];if(!t.length||!(t[0]instanceof Date)){if(this.emitEmptyDate){this.dateChanged.emit({start:null,end:null,dates:e})}this.currentDate=null;this.date=null;return}const a=t[0];const i=this.range&&t.length>1?t[1]:a;this.currentDate=a;this.date=a;this.dateChanged.emit({start:a?me(a):null,end:i?me(i):null,dates:e})}disconnectedCallback(){if(this.openDatePickerTimeout){clearTimeout(this.openDatePickerTimeout)}this.datePicker?.destroy?.()}render(){return null}static get watchers(){return{date:["datePropChanged"],minDate:["minDatePropChanged"],maxDate:["maxDatePropChanged"]}}};Ca.style=Da;const Ma=({message:e,href:t,class:i})=>a("div",{class:i},a("wa-tooltip",{for:"help-button"},e),a("wa-button",{id:"help-button",href:t,size:"small",target:"_blank","aria-label":e,appearance:"plain",variant:"neutral"},a("wa-icon",{name:"circle-info",style:{fontSize:"1rem"}})));class Ya{bookingService;_booking=null;constructor(e){this.bookingService=e}get booking(){return this._booking}set booking(e){this._booking=e}async fetchGroupedApplicablePolicies(e){if(!this._booking){throw new Error("Booking must be defined before fetching applicable policies.")}if(["003","004"].includes(this._booking.status.code)||!this._booking.is_direct){return}const{rooms:t,booking_nbr:a,currency:i,property:r}=this._booking;const o=this.groupRoomsForRequest(t??[]);try{const n=[];o.forEach((o=>{const s={booking_nbr:a,currency_id:i.id,language:e.language,property_id:r.id,rate_plan_id:o.ratePlanId,room_type_id:o.roomTypeId,is_preserve_history:true};if(o.identifiers.length>1){o.identifiers.forEach((e=>{n.push(this.bookingService.getExposedApplicablePolicies({...s,room_identifier:e}).then((a=>({grouping:{...o,rooms:t.filter((t=>t.identifier===e))},policies:a}))))}))}else{n.push(this.bookingService.getExposedApplicablePolicies(s).then((e=>({grouping:o,policies:e}))))}}));const s=await Promise.all(n);const l=this.buildPoliciesByType(s);const c=this.buildCancellationStatements(s);const d=this.calculateGuaranteeAmount(s);return{policiesByType:l,cancellationStatements:c,guaranteeAmount:d}}catch(e){const t=e instanceof Error?e.message:String(e);throw new Error(`Failed to fetch applicable policies: ${t}`)}}groupRoomsForRequest(e){if(!e.length){throw new Error("Cannot request applicable policies without booking rooms.")}const t=new Map;e.forEach((e=>{if(!e.rateplan?.id||!e.roomtype?.id){throw new Error("Room is missing rate plan or room type information.")}const a=`${e.roomtype.id}-${e.rateplan.id}`;const i=typeof e.identifier==="string"?e.identifier:null;if(!t.has(a)){t.set(a,{ratePlanId:e.rateplan.id,roomTypeId:e.roomtype.id,identifiers:i?[i]:[],rooms:[e]});return}const r=t.get(a);r.rooms.push(e);if(i&&!r.identifiers.includes(i)){r.identifiers.push(i)}}));return[...t.values()]}buildPoliciesByType(e){const t=e.flatMap((e=>e.policies??[]));return this.groupPoliciesByType(t)}groupPoliciesByType(e){return e.reduce(((e,t)=>{e[t.type]=e[t.type]?[...e[t.type],t]:[t];return e}),{})}buildCancellationStatements(e){if(!this._booking){return[]}const t=[];e.forEach((({grouping:e,policies:a})=>{if(!a?.length){return}const i=a.find((e=>e.type==="cancelation"));if(!i){return}e.rooms.forEach((e=>{const a=me(e.from_date,"YYYY-MM-DD",true);if(!a.isValid()){return}const r=i.brackets.filter((e=>{const t=me(e.due_on,"YYYY-MM-DD",true);return t.isValid()&&t.isBefore(a,"day")}));const o=r.some((e=>e.amount>0));let n;if(o){n=r.map(((e,t)=>{if(e.amount>0){return e}const a=r[t+1];if(a?.amount&&a.amount>0){return e}return undefined})).filter((e=>Boolean(e)))}else{n=[...r]}n=[...this.mergeBracketsByAmount(n)];if(!e.rateplan.is_non_refundable){const t=me(e.from_date,"YYYY-MM-DD",true);const a=me(e.to_date,"YYYY-MM-DD",true);const i=a.isValid()&&t.isValid()?a.diff(t,"days"):0;const r=i>1?t.clone().add(1,"day").format("YYYY-MM-DD"):t.format("YYYY-MM-DD");n.push({amount:e.total,amount_formatted:"",code:"",currency_id:this._booking.currency.id,due_on:r,due_on_formatted:"",gross_amount:e.gross_total,gross_amount_formatted:"",statement:"100% of total price"});n.sort(((e,t)=>{const a=me(e.due_on,"YYYY-MM-DD",true);const i=me(t.due_on,"YYYY-MM-DD",true);return a.valueOf()-i.valueOf()}))}t.push({...i,brackets:n,roomType:e.roomtype,ratePlan:e.rateplan,checkInDate:e.from_date,grossTotal:e.gross_total})}))}));return t}calculateGuaranteeAmount(e){return e.reduce(((e,{grouping:t,policies:a})=>{if(!a?.length){return e}const i=a.find((e=>e.type==="guarantee"));if(!i){return e}const r=this.selectCurrentBracket(i.brackets);if(!r){return e}const o=t.rooms.length*(r.gross_amount??0);return e+o}),0)}selectCurrentBracket(e){const t=me().startOf("day");for(const a of e){const e=me(a.due_on,"YYYY-MM-DD",true);if(!e.isValid()){continue}if(t.isSameOrAfter(e,"day")){return a}}return null}mergeBracketsByAmount(e){if(e.length<=1){return[...e]}return e.reduce(((e,t)=>{const a=e[e.length-1];if(!a||a.gross_amount!==t.gross_amount){e.push(t)}return e}),[])}}const Sa=".sc-ir-applicable-policies-h{display:flex;flex-direction:column;gap:1rem}.applicable-policies__container.sc-ir-applicable-policies{display:flex;align-items:center;gap:1rem;flex-wrap:wrap;margin-bottom:1rem}.applicable-policies__title.sc-ir-applicable-policies{font-size:1rem;font-weight:700;padding:0;margin:0}.applicable-policies__no-penalty.sc-ir-applicable-policies{padding:0;margin:0;font-size:0.875rem}.applicable-policies__statements.sc-ir-applicable-policies{box-sizing:border-box;padding:0}.applicable-policies__statements.sc-ir-applicable-policies::part(message){max-height:245px;overflow-y:auto;display:flex;flex-direction:column;padding:1em;gap:0.5rem}.applicable-policies__highlighted-bracket.sc-ir-applicable-policies{color:var(--wa-color-brand-50)}.applicable-policies__statement.sc-ir-applicable-policies{display:flex;flex-direction:column;border-bottom:1px solid var(--wa-color-neutral-70);padding-bottom:0.5rem}.applicable-policies__statement.sc-ir-applicable-policies:last-child{border-bottom:0;padding-bottom:0}.applicable-policies__room.sc-ir-applicable-policies{padding:0;margin:0;padding-bottom:0.5rem}.applicable-policies__bracket.sc-ir-applicable-policies{display:grid;grid-template-columns:repeat(2, 1fr);gap:0.25rem;font-size:0.875rem;padding-bottom:0.5rem}.applicable-policies__bracket-dates.sc-ir-applicable-policies{display:flex;align-items:center;gap:0.5rem;padding:0;margin:0}.applicable-policies__amount.sc-ir-applicable-policies{text-align:right;padding:0;margin:0;font-weight:600}.applicable-policies__statement-text.sc-ir-applicable-policies{padding:0;margin:0}.applicable-policies__brackets-table.sc-ir-applicable-policies{display:none}.applicable-policies__guarantee.sc-ir-applicable-policies{box-sizing:border-box;padding:0.5rem 1rem;margin-bottom:0.5rem;font-size:0.875rem}.applicable-policies__guarantee.sc-ir-applicable-policies::part(message){display:flex;align-items:center;justify-content:space-between}.applicable-policies__guarantee-info.sc-ir-applicable-policies{display:flex;align-items:center;gap:0.5rem}.applicable-policies__guarantee-date.sc-ir-applicable-policies{color:var(--text-muted, #666);padding:0;margin:0}.applicable-policies__guarantee-amount.sc-ir-applicable-policies{font-weight:600;color:var(--text-strong, #222);padding:0;margin:0}.applicable-policies__guarantee-label.sc-ir-applicable-policies{color:var(--wa-color-danger-50);font-weight:700;padding:0;margin:0}.applicable-policies__guarantee-action.sc-ir-applicable-policies{width:fit-content}@media (min-width: 768px){.applicable-policies__brackets.sc-ir-applicable-policies{display:none}.applicable-policies__brackets-table.sc-ir-applicable-policies{display:block;width:100%;font-size:0.875rem}.applicable-policies__brackets-table.sc-ir-applicable-policies table.sc-ir-applicable-policies{width:100%}.applicable-policies__amount.sc-ir-applicable-policies,.applicable-policies__bracket-dates.sc-ir-applicable-policies{white-space:nowrap}.applicable-policies__statement-text.sc-ir-applicable-policies{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}";const Ea=Sa;const Ia=class{constructor(a){e(this,a);this.generatePayment=t(this,"generatePayment",7)}booking;propertyId;language="en";cancellationStatements=[];isLoading=false;guaranteeAmount;generatePayment;shouldShowCancellationBrackets=true;applicablePoliciesService=new Ya(new s);componentWillLoad(){this.loadApplicablePolicies()}handleBookingChange(){this.loadApplicablePolicies()}async loadApplicablePolicies(){this.isLoading=true;try{this.applicablePoliciesService.booking=this.booking;const{cancellationStatements:e,guaranteeAmount:t}=await this.applicablePoliciesService.fetchGroupedApplicablePolicies({language:this.language});this.guaranteeAmount=t;this.cancellationStatements=[...e]}catch(e){console.error(e)}finally{this.isLoading=false}}formatPreviousBracketDueOn(e,t){if(e.isSame(t,"year")){return e.format("MMM DD")}return e.format("MMM DD, YYYY")}getBracketLabelsAndArrowState({bracket:e,index:t,brackets:a,checkInDate:i}){if(!e||!a||t<0||t>=a.length){return{leftLabel:null,rightLabel:null,showArrow:false}}const r=me(this.booking.booked_on.date,"YYYY-MM-DD");const o=me(e.due_on,"YYYY-MM-DD");if(!r.isValid()||!o.isValid()){console.warn("Invalid date encountered in getBracketLabelsAndArrowState");return{leftLabel:null,rightLabel:null,showArrow:false}}if(a.length===1){return this.handleSingleBracket(o,i)}const n=this.handleMultipleBrackets(e,t,a,i);return n}handleSingleBracket(e,t){const a=me(t,"YYYY-MM-DD");if(e.isSame(a,"days")){return{leftLabel:`${a.format("MMM DD")} onwards`,showArrow:false,rightLabel:""}}return{leftLabel:e.format("MMM DD"),showArrow:true,rightLabel:me(t,"YYYY-MM-DD").format("MMM DD, YYYY")}}handleMultipleBrackets(e,t,a,i){const r=me(e.due_on,"YYYY-MM-DD");const o=me(i,"YYYY-MM-DD");if(t===0){const i=a[t+1];if(!i){return{leftLabel:null,rightLabel:null,showArrow:false}}let r=me(i.due_on,"YYYY-MM-DD");if(!r.isValid()){return{leftLabel:null,rightLabel:null,showArrow:false}}if(e.amount===0){r=r.clone().add(-1,"days")}return{leftLabel:"Until",showArrow:false,rightLabel:r.isSame(o,"dates")?r.clone().add(-1,"days").format("MMM DD, YYYY"):r.format("MMM DD, YYYY")}}if(me(e.due_on,"YYYY-MM-DD").isSameOrAfter(o,"days")){return{leftLabel:`${o.format("MMM DD")} onwards`,showArrow:false,rightLabel:""}}if(t===a.length-1){return{leftLabel:r.clone().format("MMM DD"),showArrow:true,rightLabel:me(i).format("MMM DD, YYYY")}}const n=a[t+1];if(!n){return{leftLabel:null,rightLabel:null,showArrow:false}}const s=me(n.due_on,"YYYY-MM-DD");if(!s.isValid()){return{leftLabel:null,rightLabel:null,showArrow:false}}const l=s.isAfter(o,"days")?o:s.clone();const c=r.isSame(l.clone().add(-1,"days"),"days");return{leftLabel:this.formatPreviousBracketDueOn(r,l),showArrow:!c,rightLabel:c?"":l.add(-1,"days").format("MMM DD, YYYY")}}generateCancellationStatement(){const e="if cancelled today";const{cancelation_penality_as_if_today:t}=this.booking.financial;if(t===0){if(this.booking.financial.collected>0){return`No refund ${e}`}return`No payment required ${e}`}return`${t<0?"Refund":"Charge"} ${E(S.currency.symbol,Math.abs(t))} ${e}`}_getCurrentBracket(e){if(!Array.isArray(e)||e.length===0)return null;const t=me().startOf("day");const a=e.map((e=>({b:e,date:me(e.due_on,"YYYY-MM-DD",true).startOf("day")}))).filter((e=>e.date.isValid())).sort(((e,t)=>e.date.valueOf()-t.date.valueOf()));if(a.length===0)return null;if(t.isBefore(a[0].date,"day")){return a[0].date}for(let e=0;e<a.length-1;e++){const i=a[e].date;const r=a[e+1].date;if(t.isSameOrAfter(i,"day")&&t.isBefore(r,"day")){return i}}return a[a.length-1].date}render(){if(this.isLoading){return null}const e=this.booking.financial.collected-this.guaranteeAmount;return a(i,null,this.guaranteeAmount!==0&&a("section",null,a("wa-callout",{variant:"danger",class:"applicable-policies__guarantee"},a("div",{class:"applicable-policies__guarantee-info"},a("p",{class:"applicable-policies__guarantee-date"},me(this.booking.booked_on.date,"YYYY-MM-DD").format("MMM DD, YYYY")),a("p",{class:"applicable-policies__guarantee-amount"},a("span",{class:"px-1"},E(S.currency.symbol,e<0?Math.abs(e):this.guaranteeAmount))),a("p",{class:"applicable-policies__guarantee-label"},"Guarantee ",e<0?"balance":"")),e<0&&a("div",{class:"applicable-policies__guarantee-action"},a("ir-custom-button",{onClickHandler:()=>{this.generatePayment.emit({amount:Math.abs(e),currency:S.currency,due_on:me().format("YYYY-MM-DD"),pay_type_code:null,reason:"",type:"OVERDUE"})},size:"small"},"Pay")))),a("section",null,a("div",{class:"applicable-policies__container"},a("div",{class:"d-flex align-items-center",style:{gap:"0.5rem"}},a("p",{class:"applicable-policies__title font-size-large p-0 m-0"},"Cancellation Schedule"),a(Ma,{message:"Help",href:"https://help.igloorooms.com/extranet/booking-details/guarantee-and-cancellation"})),a("p",{class:"applicable-policies__no-penalty"},this.generateCancellationStatement())),this.cancellationStatements?.length>0&&this.cancellationStatements.every((e=>e.brackets.length>0))&&this.shouldShowCancellationBrackets&&a("wa-callout",{variant:"brand",class:"applicable-policies__statements"},this.cancellationStatements?.map((e=>{const t=this._getCurrentBracket(e.brackets);return a("div",{class:"applicable-policies__statement"},this.cancellationStatements.length>1&&a("p",{class:"applicable-policies__room"},a("b",null,e.roomType.name)," ",e.ratePlan["short_name"]," ",e.ratePlan.is_non_refundable?` - ${M.entries.Lcz_NonRefundable}`:""),a("div",{class:"applicable-policies__brackets"},e.brackets.map(((i,r)=>{const{leftLabel:o,rightLabel:n,showArrow:s}=this.getBracketLabelsAndArrowState({index:r,bracket:i,brackets:e.brackets,checkInDate:e.checkInDate});const l=me(i.due_on,"YYYY-MM-DD").isSame(t,"date");return a("div",{class:{"applicable-policies__bracket":true,"applicable-policies__highlighted-bracket":l}},a("p",{class:"applicable-policies__bracket-dates"},o," ",s&&a("ir-icons",{name:"arrow_right",class:"applicable-policies__icon",style:{"--icon-size":"0.875rem"}})," ",n),a("p",{class:"applicable-policies__amount"},E(S.currency.symbol,i.gross_amount)),a("p",{class:"applicable-policies__statement-text"},i.amount===0?"No penalty":i.statement))}))),a("div",{class:"applicable-policies__brackets-table"},a("table",null,a("tbody",null,e.brackets.map(((i,r)=>{const{leftLabel:o,rightLabel:n,showArrow:s}=this.getBracketLabelsAndArrowState({index:r,bracket:i,brackets:e.brackets,checkInDate:e.checkInDate});const l=me(i.due_on,"YYYY-MM-DD").isSame(t,"date");return a("tr",{class:{"applicable-policies__highlighted-bracket":l}},a("td",{class:"applicable-policies__bracket-dates"},o," ",s&&a("ir-icons",{name:"arrow_right",class:"applicable-policies__icon",style:{"--icon-size":"0.875rem"}})," ",n),a("td",{class:"applicable-policies__amount px-1"},E(S.currency.symbol,i.gross_amount)),a("td",{class:"applicable-policies__statement-text"},i.amount===0?"No penalty":i.statement))}))))))})))))}static get watchers(){return{booking:["handleBookingChange"]}}};Ia.style=Ea;const Ta=".sc-ir-billing-h{display:flex;flex-direction:column;height:100%}.billing__container.sc-ir-billing{display:flex;flex-direction:column;gap:var(--wa-space-l)}.billing__section-title-row.sc-ir-billing{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem}.billing__section-title.sc-ir-billing{margin:0;padding:0;font-family:var(--wa-font-family-heading);font-weight:var(--wa-font-weight-heading);line-height:var(--wa-line-height-condensed);text-wrap:balance;font-size:var(--wa-font-size-m)}.billing__actions-row.sc-ir-billing{display:flex;align-items:center;justify-content:flex-end;gap:0.5rem}.billing__invoice-nbr.sc-ir-billing{margin:0;padding:0}.billing__invoice-nbr.--secondary.sc-ir-billing{font-size:0.75rem}.billing__price-col.sc-ir-billing{text-align:end !important}.billing__cards.sc-ir-billing{display:flex;flex-direction:column;gap:var(--wa-space-m);padding-bottom:var(--wa-space-l) !important}.billing__card.sc-ir-billing{display:block}.billing__card-header.sc-ir-billing{display:flex;justify-content:space-between;align-items:center;margin-bottom:0.5rem}.billing__card-header-info.sc-ir-billing{display:flex;flex-direction:column}.billing__card-number.sc-ir-billing{margin:0;font-weight:var(--wa-font-weight-heading);font-family:var(--wa-font-family-heading)}.billing__card-type.sc-ir-billing{margin:0;font-size:var(--wa-font-size-xs);color:var(--wa-color-text-secondary)}.billing__card-download-btn.sc-ir-billing{display:flex;align-items:center}.billing__card-details.sc-ir-billing{display:flex;gap:var(--wa-space-xs);justify-content:space-between}.billing__card-detail.sc-ir-billing{display:flex;flex-direction:column}.billing__card-detail-label.sc-ir-billing{margin:0;font-size:var(--wa-font-size-xs);color:var(--wa-color-text-quiet)}.billing__card-detail-label.--amount.sc-ir-billing{text-align:end !important}.billing__card-detail-value.sc-ir-billing{margin:0;font-weight:var(--wa-font-weight-regular);font-size:var(--wa-font-size-s)}.billing__card-void-btn.sc-ir-billing{flex:1 1 0%}.billing__card-footer.sc-ir-billing{display:flex}.table-container.sc-ir-billing{display:none}.billing__card.sc-ir-billing::part(footer){padding-top:1rem;padding-bottom:1rem}@media (min-width: 768px){.billing__cards.sc-ir-billing{display:none}.table-container.sc-ir-billing{display:block}}";const Oa=Ta;const za=".ir-table-row.sc-ir-billing td.sc-ir-billing{padding:0.5rem 1rem !important;text-align:left;z-index:2;background-color:var(--wa-color-surface-default);white-space:nowrap;color:var(--wa-color-text-normal);box-sizing:border-box}.table--container.sc-ir-billing{overflow-x:auto}.table.sc-ir-billing td.sc-ir-billing{border-top:0;border-bottom:1px solid var(--wa-color-neutral-border-quiet, #abaeb9);transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.table.sc-ir-billing tbody.sc-ir-billing tr.sc-ir-billing:last-child>td.sc-ir-billing{border-bottom:0 !important}.table.sc-ir-billing thead.sc-ir-billing th.sc-ir-billing{border:none !important;background:#ececec;background:color-mix(in oklab, var(--wa-color-neutral-fill-quiet, #f1f2f3) 60%, transparent);color:#374151;padding:0.5rem 1rem !important;text-align:left}.data-table.sc-ir-billing thead.sc-ir-billing th.sc-ir-billing{box-sizing:border-box;background:var(--wa-color-surface-default) !important;padding-top:0.5rem !important;padding-bottom:0.5rem !important;border-bottom:1px solid var(--wa-color-neutral-90) !important;color:var(--wa-color-text-normal)}.data-table.sc-ir-billing .empty-row.sc-ir-billing{height:50vh !important;text-align:center;color:var(--wa-color-gray-60)}.data-table--pagination.sc-ir-billing{padding:0.5rem 1rem;position:sticky;bottom:0;background:var(--wa-color-surface-default);border-top:1px solid var(--wa-color-neutral-90)}.selected.sc-ir-billing td.sc-ir-billing{background:#e3f3fa !important}.selected.sc-ir-billing td.sc-ir-billing{color:var(--gray-dark) !important;transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.sortable.sc-ir-billing,.ir-table-row.sc-ir-billing{transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.sortable.sc-ir-billing{text-transform:capitalize}.sortable.sc-ir-billing:hover{color:#212529;background-color:#e2e8f0 !important;border-color:#dae0e5;cursor:pointer}.ir-table-row.sc-ir-billing:hover td.sc-ir-billing{background:#e2e6ea3f !important;background:var(--wa-color-neutral-fill-quiet, #f1f2f3) !important}.sortable.sc-ir-billing:active{color:#212529;background-color:#e2e8f0;border-color:#d3d9df}.sortable.sc-ir-billing svg.sc-ir-billing{color:var(--blue)}.sticky-column.sc-ir-billing{position:sticky !important;right:0;background-color:white}.table--container.sc-ir-billing,.data-table.sc-ir-billing{height:100%}";const Aa=za;const Ba=class{constructor(a){e(this,a);this.billingClose=t(this,"billingClose",7)}booking;isOpen=null;isLoading="page";invoiceInfo;selectedInvoice=null;billingClose;bookingService=new s;_id=`issue_invoice__btn_${ae()}`;componentWillLoad(){this.init()}async handleInvoiceCreation(e){e.stopImmediatePropagation();e.stopPropagation();this.invoiceInfo={...e.detail}}async init(){try{this.isLoading="page";this.invoiceInfo=await this.bookingService.getBookingInvoiceInfo({booking_nbr:this.booking.booking_nbr})}catch(e){console.error(e)}finally{this.isLoading=null}}async voidInvoice(e){this.isLoading="void";e.stopImmediatePropagation();e.stopPropagation();await this.bookingService.voidInvoice({invoice_nbr:this.selectedInvoice,property_id:S.property.id,reason:""});this.invoiceInfo=await this.bookingService.getBookingInvoiceInfo({booking_nbr:this.booking.booking_nbr});this.isLoading=null;this.selectedInvoice=null}get invoices(){const e=[];for(const t of this.invoiceInfo.invoices){if(t.status.code==="VALID"){e.push(t)}else{e.push({...t,status:{code:"VALID",description:""}});e.push({...t,date:t.credit_note.date})}}return e.sort(((e,t)=>{const a=me(e.date??e.credit_note?.date,"YYYY-MM-DD");const i=me(t.date??t.credit_note?.date,"YYYY-MM-DD");return a.diff(i)}))}async printInvoice({invoice:e,autoDownload:t,mode:a="invoice"}){try{const{My_Result:i}=await this.bookingService.printInvoice({property_id:S.property.id,invoice_nbr:e.nbr,mode:a});if(!i){return}if(t){V(i);return}window.open(i)}catch(e){console.error(e)}}render(){if(this.isLoading==="page"){return a("div",{class:"drawer__loader-container"},a("ir-spinner",null))}return a(o,null,a("div",{class:"billing__container"},a("section",null,a("div",{class:"billing__section-title-row"},a("h4",{class:"billing__section-title"},"Issued documents"),a("ir-custom-button",{variant:"brand",id:this._id,onClickHandler:e=>{e.stopImmediatePropagation();e.stopPropagation();this.isOpen="invoice"}},"Issue invoice")),a("div",{class:"table-container"},a("table",{class:"table"},a("thead",null,a("tr",null,a("th",null,"Date"),a("th",null,"Number"),a("th",{class:"billing__price-col"},"Amount"),a("th",null))),a("tbody",null,this.invoices?.map((e=>{const t=e.status.code==="VALID";return a("tr",{class:"ir-table-row"},a("td",null,e.status.code==="VALID"?me(e.date,"YYYY-MM-DD").format("MMM DD, YYYY"):me(e.credit_note.date,"YYYY-MM-DD").format("MMM DD, YYYY")),a("td",null,a("p",{class:"billing__invoice-nbr"},a("b",null,t?"Invoice":"Credit note",":")," ",t?e.nbr:e.credit_note.nbr),!t&&a("p",{class:"billing__invoice-nbr --secondary"},e.nbr)),a("td",{class:"billing__price-col"},a("span",{class:"ir-price",style:{fontWeight:"400"}},E(e.currency.symbol,e.total_amount))),a("td",null,a("div",{class:"billing__actions-row"},a("wa-dropdown",{"onwa-hide":e=>{e.stopImmediatePropagation();e.stopPropagation()},"onwa-select":async a=>{switch(a.detail.item.value){case"print":this.printInvoice({invoice:e,autoDownload:true,mode:t?"invoice":"creditnote"});break;case"view-print":this.printInvoice({invoice:e,mode:t?"invoice":"creditnote"});break;case"void":this.selectedInvoice=e.nbr;break}}},a("h3",null,"Issued by: ",e.credit_note?e.credit_note.user:e.user),a("wa-divider",null),a("wa-dropdown-item",{value:"view-print"},"Open PDF",Ce("/Print_Invoice")&&a("wa-spinner",{slot:"details"})),t&&!e.credit_note&&a("wa-dropdown-item",{variant:"danger",value:"void"},"Void with credit note"),a("ir-custom-button",{slot:"trigger",id:`pdf-${e.system_id}`,variant:"neutral",appearance:"plain"},a("wa-icon",{name:"ellipsis-vertical",style:{fontSize:"1rem"}}))))))}))))),a("div",{class:"billing__cards"},this.invoices?.map((e=>{const t=e.status.code==="VALID";return a("wa-card",{key:e.nbr,class:"billing__card"},a("div",{class:"billing__card-header"},a("div",{class:"billing__card-header-info"},a("p",{class:"billing__card-number"},t?"Invoice":"Credit note",":",t?e.nbr:e.credit_note.nbr),a("p",{class:"billing__card-type"},t?"":e.nbr)),a("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end"}},a("wa-tooltip",{for:`mobile-download-pdf-${e.system_id}`},"Open PDF"),a("ir-custom-button",{onClickHandler:()=>this.printInvoice({invoice:e,mode:t?"invoice":"creditnote"}),loading:Ce("/Print_Invoice"),id:`mobile-download-pdf-${e.system_id}`,variant:"neutral",appearance:"plain",class:"billing__card-download-btn"},a("wa-icon",{name:"file-pdf",style:{fontSize:"1rem"}})))),a("div",{class:"billing__card-details"},a("div",{class:"billing__card-detail"},a("p",{class:"billing__card-detail-label"},"Date"),a("p",{class:"billing__card-detail-value"}," ",t?me(e.date,"YYYY-MM-DD").format("MMM DD, YYYY"):me(e.credit_note.date,"YYYY-MM-DD").format("MMM DD, YYYY"))),a("div",{class:"billing__card-detail"},a("p",{class:"billing__card-detail-label --amount"},"Amount"),a("p",{class:"billing__card-detail-value"},E(e.currency.symbol,e.total_amount??0)))),t&&!e.credit_note&&a("div",{slot:"footer",class:"billing__card-footer"},a("ir-custom-button",{onClickHandler:()=>{this.selectedInvoice=e.nbr},variant:"danger",appearance:"outlined",class:"billing__card-void-btn"},"Void with credit note")))}))),this.invoiceInfo.invoices?.length===0&&a("ir-empty-state",{style:{width:"100%",height:"40vh"}}))),a("ir-invoice",{invoiceInfo:this.invoiceInfo,onInvoiceClose:e=>{e.stopImmediatePropagation();e.stopPropagation();this.isOpen=null},open:this.isOpen==="invoice",booking:this.booking}),a("ir-dialog",{label:"Alert",open:this.selectedInvoice!==null,lightDismiss:false,onIrDialogHide:e=>{e.stopImmediatePropagation();e.stopPropagation()},onIrDialogAfterHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.selectedInvoice=null}},a("p",null,"Void invoice ",this.selectedInvoice," by generating a credit note?"),a("div",{slot:"footer",class:"ir-dialog__footer"},a("ir-custom-button",{"data-dialog":"close",size:"medium",appearance:"filled",variant:"neutral"},"Cancel"),a("ir-custom-button",{loading:this.isLoading==="void",onClickHandler:this.voidInvoice.bind(this),size:"medium",variant:"danger"},"Confirm"))))}};Ba.style=Oa+Aa;const Ra=".sc-ir-billing-drawer-h{display:block}.billing__drawer.sc-ir-billing-drawer::part(footer){display:none}";const Na=Ra;const $a=class{constructor(a){e(this,a);this.billingClose=t(this,"billingClose",7)}open;booking;billingClose;render(){return a("ir-drawer",{key:"1d85a774b9fb3f8b9adc6245c06075a1f181e2c7",style:{"--ir-drawer-width":"50rem","--ir-drawer-background-color":"var(--wa-color-surface-default)","--ir-drawer-padding-left":"var(--spacing)","--ir-drawer-padding-right":"var(--spacing)","--ir-drawer-padding-top":"var(--spacing)","--ir-drawer-padding-bottom":"var(--spacing)"},class:"billing__drawer",onDrawerHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.billingClose.emit()},open:this.open,label:"Billing"},this.open&&a("ir-billing",{key:"02a2f131f90f906a0e520b24f2d1f2820c117198",booking:this.booking}))}};$a.style=Na;const La=".sc-ir-booking-billing-recipient-h{display:block;padding:0 !important;box-sizing:border-box}.billing-recipient__room.sc-ir-booking-billing-recipient::part(label){display:flex;align-items:center;gap:var(--wa-space-xl);width:100%}.billing-recipient__guest-name.sc-ir-booking-billing-recipient{font-weight:500}.billing-recipient__room-details.sc-ir-booking-billing-recipient{display:flex;gap:6px;align-items:center;font-size:0.875rem;color:var(--wa-color-neutral-600)}.billing-recipient__roomtype.sc-ir-booking-billing-recipient{font-weight:600}";const Pa=La;const Ha=class{constructor(a){e(this,a);this.recipientChange=t(this,"recipientChange",7)}booking;selectedRecipient;rooms=[];recipientChange;initialValue;bookingCompanyFormRef;componentWillLoad(){this.initializeDefaultValue()}handleBookingChange(){this.initializeDefaultValue()}initializeDefaultValue(){this.initialValue="guest";this.selectedRecipient=this.initialValue;this.filterRoomGuests()}handleRecipientChange(e){this.selectedRecipient=e;switch(e){case"company":if(!this.booking.company_name){this.bookingCompanyFormRef.openCompanyForm();return}break}this.recipientChange.emit(this.selectedRecipient)}filterRoomGuests(){const e="|";const t=t=>t?.split(" ")?.join(e)?.toLocaleLowerCase().trim()||"";const a=[];const i=new Set;const r=this.booking?.guest;if(r){const a=`${t(r.first_name)}${r.last_name?e:""}${t(r.last_name)}`;i.add(a)}for(const r of this.booking.rooms||[]){const o=r?.guest;if(!o)continue;const n=`${t(o.first_name)}${o.last_name?e:""}${t(o.last_name)}`;if(i.has(n)||!n)continue;i.add(n);a.push(r)}this.rooms=a}render(){return a(i,{key:"76b9ac081f1fe365b525e665e9811cad4fb96c68"},a("wa-radio-group",{key:"112db0a3c8a6f5abde559da85c05f07b8ff13803",defaultValue:this.initialValue,onchange:e=>this.handleRecipientChange(e.target.value),label:"Bill to",orientation:"vertical",name:`${this.booking?.booking_nbr}-bill-to`,value:this.selectedRecipient,size:"small"},a("wa-radio",{key:"dddc99166d6a67f7275a4dcc39cbc9f323d3fc7a",appearance:"button",value:"guest"},this.booking?.guest.first_name," ",this.booking.guest.last_name),this.rooms.map(((e,t)=>a("wa-radio",{appearance:"button",class:"billing-recipient__room",value:`room__${e.guest.first_name} ${e.guest.last_name}`,key:e.guest?.id??`guest_${t}`},a("span",{class:"billing-recipient__guest-name"},e.guest.first_name," ",e.guest.last_name)))),a("wa-radio",{key:"37aaed172bb0f59689cc89382a9587e3d568ae7a",appearance:"button",value:"company"},this.booking.company_name?this.booking.company_name:"Use company name")),a("ir-booking-company-dialog",{key:"f1e094af8e6547444f129b7528189d30add8752c",onCompanyFormClosed:()=>{if(this.selectedRecipient==="company"&&!this.booking.company_name){this.handleRecipientChange(this.initialValue)}else{this.handleRecipientChange("company")}},onResetBookingEvt:e=>{this.booking={...e.detail};if(!this.booking.company_name){this.handleRecipientChange(this.initialValue)}else{this.handleRecipientChange("company")}},booking:this.booking,ref:e=>this.bookingCompanyFormRef=e}))}static get watchers(){return{booking:["handleBookingChange"]}}};Ha.style=Pa;const Fa=".sc-ir-booking-company-dialog-h{display:block}";const Ua=Fa;const ja=class{constructor(a){e(this,a);this.companyFormClosed=t(this,"companyFormClosed",7);this.resetBookingEvt=t(this,"resetBookingEvt",7)}booking;open;companyFormClosed;resetBookingEvt;async openCompanyForm(){this.open=true}async closeCompanyForm(){this.open=false;this.companyFormClosed.emit()}render(){const e=`${this.booking.booking_nbr}-${ae()}`;return a("ir-dialog",{key:"ef2e250f73c229eae823458da0a57fb73f03493a",open:this.open,onIrDialogHide:e=>{e.stopPropagation();e.stopImmediatePropagation();this.closeCompanyForm()},label:"Company",id:"dialog-overview"},this.open&&a("ir-booking-company-form",{key:"40fede6f57ce7967c519eb7eecb5c9437e41392f",onResetBookingEvt:e=>{e.stopImmediatePropagation();e.stopPropagation();this.resetBookingEvt.emit(e.detail);this.open=false},formId:e,booking:this.booking}),a("div",{key:"cfe4bada44e35ec5dc8244f12b799e992f1fed2c",slot:"footer",class:"ir-dialog__footer"},a("ir-custom-button",{key:"c222ec925125958493a7103b4215f5dc1dec6393",size:"medium",appearance:"filled",variant:"neutral","data-dialog":"close"},"Cancel"),a("ir-custom-button",{key:"d334b4a6aae9181b26bc3394b5785c4039395be3",type:"submit",form:e,loading:Ce("/DoReservation"),size:"medium",variant:"brand"},"Save")))}};ja.style=Ua;const Va=".sc-ir-booking-company-form-h{display:block}.booking-company__form.sc-ir-booking-company-form{display:flex;flex-direction:column;gap:1rem}";const Ga=Va;const qa=class{constructor(a){e(this,a);this.resetBookingEvt=t(this,"resetBookingEvt",7)}booking;formId;isLoading;formData;resetBookingEvt;bookingService=new s;componentWillLoad(){this.formData={company_name:this.booking.company_name,company_tax_nbr:this.booking.company_tax_nbr}}updateGuest(e){this.formData={...this.formData,...e}}async saveCompany(){try{const e={assign_units:true,is_pms:true,is_direct:this.booking.is_direct,is_backend:true,is_in_loyalty_mode:this.booking.is_in_loyalty_mode,promo_key:this.booking.promo_key,extras:this.booking.extras,agent:this.booking.agent,booking:{...this.formData,from_date:this.booking.from_date,to_date:this.booking.to_date,remark:this.booking.remark,booking_nbr:this.booking.booking_nbr,property:this.booking.property,booked_on:this.booking.booked_on,source:this.booking.source,rooms:this.booking.rooms,currency:this.booking.currency,arrival:this.booking.arrival,guest:this.booking.guest},pickup_info:this.booking.pickup_info};await this.bookingService.doReservation(e);this.resetBookingEvt.emit({...this.booking,...this.formData})}catch(e){console.error(e)}}render(){return a("form",{key:"7d852a0413e6837079a2ecce0e2c6cef4e0c60b5",id:this.formId,onSubmit:e=>{e.preventDefault();this.saveCompany()},class:"booking-company__form"},a("ir-input",{key:"e4510c318d82790d00f7c17e627dea9d18f28995",value:this.formData.company_name,"onText-change":e=>this.updateGuest({company_name:e.detail}),label:"Name",autofocus:true,placeholder:"XYZ LTD"}),a("ir-input",{key:"9d483465d42aa65c970d80cdbcbb04e84ad40cec",value:this.formData.company_tax_nbr,"onText-change":e=>this.updateGuest({company_tax_nbr:e.detail}),label:"Tax ID",placeholder:"VAT 123456"}))}};qa.style=Ga;const Ka=".sc-ir-booking-details-h{overflow-x:hidden;--ir-dialog-max-width:20rem;text-align:start;padding:var(--wa-space-l);position:relative;height:100%}.sc-ir-booking-details-h *.sc-ir-booking-details{box-sizing:border-box}.font-medium.sc-ir-booking-details{font-weight:600}.sc-ir-booking-details-h th.sc-ir-booking-details{font-weight:600}.booking-details__date-view-header.sc-ir-booking-details{font-size:1.1rem !important}.booking-details__booking-info.sc-ir-booking-details{display:grid;padding:var(--wa-space-m);gap:var(--wa-space-l)}.booking-details__info-column.sc-ir-booking-details{display:flex;flex-direction:column;gap:var(--wa-space-l)}@media (min-width: 890px){.booking-details__booking-info.sc-ir-booking-details{grid-template-columns:repeat(2, 1fr)}}@media (min-width: 1024px){.booking-details__booking-info.sc-ir-booking-details{gap:var(--wa-space-xl)}}.card.room-group.sc-ir-booking-details{margin-bottom:1rem !important}.card.room-group.sc-ir-booking-details:last-child{margin-bottom:1.81rem !important}.h-28.sc-ir-booking-details{height:2rem}.mx-01.sc-ir-booking-details{--m:5px;margin-right:var(--m) !important;margin-left:var(--m) !important}.date-margin.sc-ir-booking-details{margin-right:5px}.pickup-margin.sc-ir-booking-details{margin-bottom:7px !important}.header-date.sc-ir-booking-details{padding-left:5px !important}.pointer.sc-ir-booking-details{cursor:pointer}.sc-ir-booking-details:root{--sidebar-width:50rem}.loading-container.sc-ir-booking-details{height:100%;width:100%;display:flex;justify-content:center;align-items:center;margin:0;padding:0}.sm-padding-right.sc-ir-booking-details{padding-right:0.2rem}.sm-padding-left.sc-ir-booking-details{padding-left:0.2rem}.sm-padding-top.sc-ir-booking-details{padding-top:0.2rem}.sm-padding-bottom.sc-ir-booking-details{padding-bottom:0.2rem}.info-notes.sc-ir-booking-details{list-style:none;padding-left:0}.light-blue-bg.sc-ir-booking-details{background-color:#acecff;padding:0.2rem 0.3rem}.iframeHeight.sc-ir-booking-details{height:17.5rem}.dialog-title.sc-ir-booking-details{width:fit-content}";const Wa=Ka;const Xa=class{constructor(a){e(this,a);this.toast=t(this,"toast",7);this.bookingChanged=t(this,"bookingChanged",7);this.closeSidebar=t(this,"closeSidebar",7)}get element(){return r(this)}language="en";ticket="";bookingNumber="";propertyid;is_from_front_desk=false;p;hasPrint=false;hasReceipt=false;hasDelete=false;hasMenu=false;hasRoomEdit=false;hasRoomDelete=false;hasRoomAdd=false;hasCheckIn=false;hasCheckOut=false;hasCloseButton=false;bookingItem=null;statusData=[];showPaymentDetails;booking;countries;calendarData={};guestData=null;rerenderFlag=false;sidebarState=null;sidebarPayload;isUpdateClicked=false;pms_status;isPMSLogLoading=false;paymentActions;property_id;selectedService;bedPreference;roomGuest;modalState=null;departureTime;paymentEntries;splitIndex;toast;bookingChanged;closeSidebar;bookingService=new s;roomService=new Ye;paymentService=new Ie;token=new Se;printingBaseUrl="https://gateway.igloorooms.com/PrintBooking/%1/printing?id=%2";modalRef;paymentFolioRef;componentWillLoad(){if(this.ticket!==""){this.token.setToken(this.ticket);this.initializeApp()}}ticketChanged(e,t){if(e===t){return}this.token.setToken(this.ticket);this.initializeApp()}handleSideBarEvents(e){this.sidebarState=e.detail.type;this.sidebarPayload=e.detail.payload;if(this.sidebarState==="payment-folio"){this.paymentFolioRef.openFolio()}}handleIconClick(e){const t=e.target;switch(t.id){case"pickup":this.sidebarState="pickup";return;case"close":this.closeSidebar.emit(null);return;case"email":this.modalState={type:"email",message:M.entries.Lcz_EmailBookingto.replace("%1",this.booking.guest.email),loading:Ce("/Send_Booking_Confirmation_Email")};this.modalRef.openModal();return;case"print":this.openPrintingScreen({mode:"printing"});return;case"invoice":this.sidebarState="invoice";return;case"book-delete":return;case"menu":window.location.href="https://x.igloorooms.com/manage/acbookinglist.aspx";return;case"room-add":this.bookingItem={ID:"",NAME:this.booking.guest.last_name,EMAIL:this.booking.guest.email,PHONE:this.booking.guest.mobile,REFERENCE_TYPE:"",FROM_DATE:this.booking.from_date,ARRIVAL:this.booking.arrival,TO_DATE:this.booking.to_date,TITLE:`${M.entries.Lcz_AddingUnitToBooking}# ${this.booking.booking_nbr}`,defaultDateRange:{fromDate:new Date(this.booking.from_date),fromDateStr:"",toDate:new Date(this.booking.to_date),toDateStr:"",dateDifference:0,message:""},event_type:"ADD_ROOM",booking:this.booking,BOOKING_NUMBER:this.booking.booking_nbr,ADD_ROOM_TO_BOOKING:this.booking.booking_nbr,GUEST:this.booking.guest,message:this.booking.remark,SOURCE:this.booking.source,ROOMS:this.booking.rooms};return;case"extra_service_btn":this.sidebarState="extra_service";return;case"add-payment":return}}async handleResetExposedCancellationDueAmount(e){e.stopImmediatePropagation();e.stopPropagation();const t=await this.paymentService.GetExposedCancellationDueAmount({booking_nbr:this.booking.booking_nbr,currency_id:this.booking.currency.id});this.paymentActions=[...t]}handleEditInitiated(e){this.bookingItem=e.detail}handleRoomGuestsUpdate(e){const{identifier:t,guests:a}=e.detail;const i=[...this.booking.rooms];let r=i.findIndex((e=>e.identifier===t));if(r===-1){return}const o=i[r];const n={...o,sharing_persons:a};i[r]=n;this.booking={...this.booking,rooms:[...i]};this.splitIndex=ie(this.booking.rooms)}async handleResetBooking(e){if(e.detail){this.booking=e.detail;this.splitIndex=ie(this.booking.rooms);return}await this.resetBooking()}handleEditExtraService(e){this.selectedService=e.detail;console.log(this.selectedService);this.sidebarState="extra_service"}handleOpenPrintScreen(e){this.openPrintingScreen(e.detail)}setRoomsData(e){let t=new Array;if(e.My_Result?.roomtypes?.length){t=e.My_Result.roomtypes;e.My_Result.roomtypes.forEach((e=>{e.expanded=true}))}this.calendarData.roomsInfo=t}async initializeApp(){try{const[e,t,a,i,r]=await Promise.all([this.roomService.getExposedProperty({id:this.propertyid||0,language:this.language,aname:this.p}),this.roomService.fetchLanguage(this.language),this.bookingService.getCountries(this.language),this.bookingService.getExposedBooking(this.bookingNumber,this.language),this.bookingService.getSetupEntriesByTableNameMulti(["_BED_PREFERENCE_TYPE","_DEPARTURE_TIME","_PAY_TYPE","_PAY_TYPE_GROUP","_PAY_METHOD"])]);this.property_id=e?.My_Result?.id;const{bed_preference_type:o,departure_time:n,pay_type:s,pay_type_group:l,pay_method:c}=this.bookingService.groupEntryTablesResult(r);this.bedPreference=o;this.departureTime=n;this.paymentEntries={types:s,groups:l,methods:c};if(!M?.entries){M.entries=t.entries;M.direction=t.direction}this.countries=a;const d=e?.My_Result;if(d){const{allowed_payment_methods:t,currency:a,allowed_booking_sources:i,adult_child_constraints:r,calendar_legends:o,aname:n}=d;this.printingBaseUrl=this.printingBaseUrl.replace("%1",n).replace("%2",this.bookingNumber);this.calendarData={currency:a,allowed_booking_sources:i,adult_child_constraints:r,legendData:o};this.setRoomsData(e);const s=["001","004"];this.showPaymentDetails=t?.some((e=>s.includes(e.code)))}else{console.warn("Room response is missing 'My_Result'.")}this.guestData=i.guest;this.booking=i;this.splitIndex=ie(this.booking.rooms)}catch(e){console.error("Error initializing app:",e)}}async openPrintingScreen(e,t="new"){const{mode:a}=e;if(t==="old"){if(a==="invoice"){return window.open(`https://x.igloorooms.com/manage/AcBookingEdit.aspx?IRID=${encodeURIComponent(this.booking.system_id)}&&PM=I&TK=${encodeURIComponent(this.ticket)}`)}return window.open(`https://x.igloorooms.com/manage/AcBookingEdit.aspx?IRID=${encodeURIComponent(this.booking.system_id)}&&PM=B&TK=${encodeURIComponent(this.ticket)}`)}let i=this.printingBaseUrl;i+=`&mode=${encodeURIComponent(a)}`;if("payload"in e&&e.payload){const t=e.payload;const a=Object.entries(t).map((([e,t])=>{const a=encodeURIComponent(e);const i=encodeURIComponent(String(t));return`${a}=${i}`})).join("&");i+=`&${a}`}const{data:r}=await ve.post(`Get_ShortLiving_Token`);if(!r.ExceptionMsg){i+=`&token=${encodeURIComponent(r.My_Result)}`}window.open(i)}handleCloseBookingWindow(){this.bookingItem=null}handleDeleteFinish=e=>{this.booking={...this.booking,rooms:this.booking.rooms.filter((t=>t.identifier!==e.detail))};this.splitIndex=ie(this.booking.rooms)};async resetBooking(){try{const e=await this.bookingService.getExposedBooking(this.bookingNumber,this.language);this.booking={...e};this.splitIndex=ie(this.booking.rooms);this.bookingChanged.emit(this.booking)}catch(e){console.log(e)}}async handleModalConfirm(){switch(this.modalState.type){case"email":await this.bookingService.sendBookingConfirmationEmail(this.booking.booking_nbr,this.language);break}this.modalState=null;this.modalRef.closeModal()}computeRoomGroups(e){const t=new Map;e.forEach(((e,a)=>t.set(e.identifier,a)));if(!e.length){return{groups:[],indexById:t,hasSplitGroups:false}}const a=e=>{let t=Number.MAX_SAFE_INTEGER;for(const a of e){const e=Date.parse(a?.from_date??"");if(!Number.isNaN(e)){t=Math.min(t,e)}}return t};const i=this.splitIndex??ie(e);if(!i){const i=[...e].sort(((e,a)=>{const i=Date.parse(e?.from_date??"")-Date.parse(a?.from_date??"");if(!Number.isNaN(i)&&i!==0){return i}return(t.get(e.identifier)??0)-(t.get(a.identifier)??0)}));return{groups:[{rooms:i,order:0,isSplit:false,sortKey:a(i)}],indexById:t,hasSplitGroups:false}}const r=new Map(e.map((e=>[e.identifier,e])));const o=[];const n=new Set;for(const e of i.heads){const s=i.chainOf.get(e)??[e];const l=s.map((e=>r.get(e))).filter((e=>Boolean(e)));if(!l.length)continue;const c=s.some((e=>{const t=i.parentOf.get(e);const a=i.childrenOf.get(e)??[];return Boolean(t)||a.length>0}))||l.some((e=>Boolean(e?.is_split)));if(c){l.forEach((e=>n.add(e.identifier)));const e=Math.min(...l.map((e=>t.get(e.identifier)??Number.MAX_SAFE_INTEGER)));o.push({rooms:l,order:e,sortKey:a(l),isSplit:true})}}for(const i of e){if(!n.has(i.identifier)){const e=t.get(i.identifier)??Number.MAX_SAFE_INTEGER;const r=[i];o.push({rooms:r,order:e,sortKey:a(r),isSplit:false})}}o.sort(((e,t)=>{if(e.sortKey!==t.sortKey){return e.sortKey-t.sortKey}return e.order-t.order}));const s=o.some((e=>e.isSplit));if(!s){const e=o.map((e=>e.rooms)).reduce(((e,t)=>e.concat(t)),[]).sort(((e,a)=>{const i=Date.parse(e?.from_date??"")-Date.parse(a?.from_date??"");if(!Number.isNaN(i)&&i!==0){return i}return(t.get(e.identifier)??0)-(t.get(a.identifier)??0)}));return{groups:[{rooms:e,order:0,sortKey:a(e),isSplit:false}],indexById:t,hasSplitGroups:false}}return{groups:o,indexById:t,hasSplitGroups:true}}renderRoomItem(e,t,i=true){const r=this.handleRoomCheckin(e);const o=this.handleRoomCheckout(e);return a("ir-room",{key:e.identifier,room:e,property_id:this.property_id,language:this.language,departureTime:this.departureTime,bedPreferences:this.bedPreference,isEditable:this.booking.is_editable,legendData:this.calendarData.legendData,roomsInfo:this.calendarData.roomsInfo,myRoomTypeFoodCat:e.roomtype.name,mealCodeName:e.rateplan.short_name,includeDepartureTime:i,currency:this.booking.currency.symbol,hasRoomEdit:this.hasRoomEdit&&this.booking.status.code!=="003"&&this.booking.is_direct,hasRoomDelete:this.hasRoomDelete&&this.booking.status.code!=="003"&&this.booking.is_direct,hasCheckIn:r,hasCheckOut:o,booking:this.booking,bookingIndex:t,onDeleteFinished:this.handleDeleteFinish})}renderRooms(){const e=this.booking?.rooms??[];if(!e.length){return null}const{groups:t,indexById:i,hasSplitGroups:r}=this.computeRoomGroups(e);if(!r){const e=t[0].rooms;return e.map(((t,r)=>a(o,null,this.renderRoomItem(t,i.get(t.identifier)??r),r<e.length-1?a("wa-divider",null):null)))}return a(o,null,a("div",{class:"d-flex flex-column",style:{gap:"1rem"}},t.map(((e,r)=>{const n=r===t.length-1;return a("div",{class:`${n?"":"room-group"}`,key:`room-group-${e.order}-${r}`},e.rooms.map(((t,r)=>a(o,null,this.renderRoomItem(t,i.get(t.identifier)??r,r===e.rooms.length-1),r<e.rooms.length-1?a("wa-divider",null):null))),!n&&a("wa-divider",{style:{"--width":"3px"}}))}))))}render(){if(!this.booking){return a("div",{class:"loading-container"},a("ir-spinner",null))}const e=this.renderRooms();return[a(o,null,!this.is_from_front_desk&&a(o,null,a("ir-toast",{style:{height:"0"}}),a("ir-interceptor",{style:{height:"0"}}))),a("ir-booking-header",{booking:this.booking,hasCloseButton:this.hasCloseButton,hasDelete:this.hasDelete,hasMenu:this.hasMenu,hasPrint:this.hasPrint,hasReceipt:S.property.is_frontdesk_enabled,hasEmail:["001","002"].includes(this.booking?.status?.code)}),a("div",{class:"booking-details__booking-info"},a("div",{class:"booking-details__info-column"},a("ir-reservation-information",{countries:this.countries,booking:this.booking}),a("wa-card",null,a("ir-date-view",{class:"booking-details__date-view-header",slot:"header",from_date:this.booking.from_date,to_date:this.booking.to_date}),this.hasRoomAdd&&this.booking.is_editable&&a(o,null,a("wa-tooltip",{for:"room-add"},"Add unit"),a("ir-custom-button",{slot:"header-actions",id:"room-add",appearance:"plain",size:"small",variant:"neutral"},a("wa-icon",{name:"plus",style:{fontSize:"1rem"},label:"Add unit"}))),e),a("ir-pickup-view",{booking:this.booking}),a("section",null,a("ir-extra-services",{booking:{booking_nbr:this.booking.booking_nbr,currency:this.booking.currency,extra_services:this.booking.extra_services}}))),a("ir-payment-details",{class:"booking-details__info-column",propertyId:this.property_id,paymentEntries:this.paymentEntries,paymentActions:this.paymentActions,booking:this.booking})),a("ir-dialog",{label:"Send Email",onIrDialogHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.modalRef.closeModal();this.modalState=null},ref:e=>this.modalRef=e},a("p",null,this.modalState?.message),a("div",{slot:"footer",class:"ir-dialog__footer"},a("ir-custom-button",{"data-dialog":"close",size:"medium",appearance:"filled",variant:"neutral"},M.entries.Lcz_Cancel),a("ir-custom-button",{loading:Ce("/Send_Booking_Confirmation_Email"),onClickHandler:e=>{e.stopImmediatePropagation();e.stopPropagation();this.handleModalConfirm()},size:"medium",variant:"brand"},M.entries.Lcz_Confirm))),a("ir-room-guests",{open:this.sidebarState==="room-guest",countries:this.countries,language:this.language,identifier:this.sidebarPayload?.identifier,bookingNumber:this.booking.booking_nbr,roomName:this.sidebarPayload?.roomName,totalGuests:this.sidebarPayload?.totalGuests,sharedPersons:this.sidebarPayload?.sharing_persons,slot:"sidebar-body",checkIn:this.sidebarPayload?.checkin,onCloseModal:()=>this.sidebarState=null}),a("ir-extra-service-config",{open:this.sidebarState==="extra_service",service:this.selectedService,booking:{from_date:this.booking.from_date,to_date:this.booking.to_date,booking_nbr:this.booking.booking_nbr,currency:this.booking.currency},slot:"sidebar-body",onCloseModal:e=>{e.stopImmediatePropagation();e.stopPropagation();this.sidebarState=null;if(this.selectedService){this.selectedService=null}}}),a("ir-pickup",{open:this.sidebarState==="pickup",bookingDates:{from:this.booking.from_date,to:this.booking.to_date},defaultPickupData:this.booking.pickup_info,bookingNumber:this.booking.booking_nbr,numberOfPersons:this.booking.occupancy.adult_nbr+this.booking.occupancy.children_nbr,onCloseModal:()=>{this.sidebarState=null}}),a("ir-billing-drawer",{open:this.sidebarState==="invoice",onBillingClose:e=>{e.stopImmediatePropagation();e.stopPropagation();this.sidebarState=null},booking:this.booking}),a("ir-guest-info-drawer",{onGuestInfoDrawerClosed:()=>{this.sidebarState=null},booking_nbr:this.bookingNumber,email:this.booking?.guest.email,language:this.language,open:this.sidebarState==="guest"}),a("ir-payment-folio",{style:{height:"auto"},bookingNumber:this.booking.booking_nbr,paymentEntries:this.paymentEntries,payment:this.sidebarPayload?.payment,mode:this.sidebarPayload?.mode,ref:e=>this.paymentFolioRef=e,onCloseModal:()=>this.sidebarState=null}),a(o,null,a("ir-booking-editor-drawer",{roomTypeIds:this.bookingItem?.roomsInfo?.map((e=>e.id)),onBookingEditorClosed:this.handleCloseBookingWindow.bind(this),unitId:this.bookingItem?.PR_ID,mode:this.bookingItem?.event_type,label:this.bookingItem?.TITLE,booking:this.booking,ticket:this.ticket,open:this.bookingItem!==null,roomIdentifier:this.bookingItem?.IDENTIFIER,language:this.language,propertyid:this.propertyid,checkIn:this.bookingItem?.FROM_DATE,checkOut:this.bookingItem?.TO_DATE}))]}handleRoomCheckout(e){if(!S.checkin_enabled||S.is_automatic_check_in_out){return false}return e.in_out.code==="001"}handleRoomCheckin(e){if(!S.checkin_enabled||S.is_automatic_check_in_out){return false}if(!e.unit){return false}if(e.in_out&&e.in_out.code!=="000"){return false}if(me().isSameOrAfter(me(e.from_date,"YYYY-MM-DD"),"days")&&me().isBefore(me(e.to_date,"YYYY-MM-DD"),"days")){return true}return false}static get watchers(){return{ticket:["ticketChanged"]}}};Xa.style=Wa;const Ja=".sc-ir-booking-details-drawer-h{display:block}";const Qa=Ja;const Za=class{constructor(a){e(this,a);this.bookingDetailsDrawerClosed=t(this,"bookingDetailsDrawerClosed",7)}open;propertyId;ticket;language="en";bookingNumber;bookingDetailsDrawerClosed;handleClose=e=>{if(e){e.stopImmediatePropagation();e.stopPropagation()}this.bookingDetailsDrawerClosed.emit()};render(){return a("ir-drawer",{key:"113c46f6920f78acec6192b254227fa2ae4cbc77",onDrawerHide:this.handleClose,withoutHeader:true,open:this.open,style:{"--ir-drawer-width":"80rem","--ir-drawer-background-color":"#F2F3F8","--ir-drawer-padding-left":"0","--ir-drawer-padding-right":"0","--ir-drawer-padding-top":"0","--ir-drawer-padding-bottom":"0"}},this.open&&a("ir-booking-details",{key:"d242776555ae57b9dbaf11b0f28bd44be55e33a7",hasPrint:true,hasReceipt:true,hasCloseButton:true,onCloseSidebar:this.handleClose,is_from_front_desk:true,propertyid:this.propertyId,hasRoomEdit:true,hasRoomDelete:true,bookingNumber:this.bookingNumber.toString(),ticket:this.ticket,language:this.language,hasRoomAdd:true}))}};Za.style=Qa;const ei=Z.array(Z.object({first_name:Z.string().nonempty(),last_name:Z.string().nonempty(),bed_preference:Z.string().optional().nullable(),requires_bed_preference:Z.boolean().nullable()}).superRefine(((e,t)=>{if(e.requires_bed_preference&&!e.bed_preference){t.addIssue({path:["bed_preference"],message:"Bed preference is required",code:Z.ZodIssueCode.custom})}})));const ti=Z.object({firstName:Z.string().nonempty(),lastName:Z.string().nonempty()});class ai{mode;variationService;constructor(e){this.mode=e}setMode(e){this.mode=e}updateBooking(e){if(!e)return;try{const t=e.roomtype?.id;const a=e.rateplan?.id;const i=e.guest;const r=e.occupancy;if(!t||!a||!i||!r){console.warn("[updateBooking] Missing required room data",e);return}const o=e.sharing_persons.find((e=>e.is_main));const n={bed_preference:e.bed_preference?.toString()??null,infant_nbr:r.infant_nbr??0,last_name:o?.last_name??e.guest.last_name??"",first_name:o?.first_name??e.guest.first_name??"",unit:e.unit?.id?.toString()??null,roomtype_id:t};h("guest",n);p({roomTypeId:t,ratePlanId:a,rooms:1,guest:[n]})}catch(e){console.error("[updateBooking] Failed",e)}}getRoom(e,t){if(!e||!t)return;const a=e.rooms?.find((e=>e.identifier===t));if(!a)return;h("guest",{bed_preference:a.bed_preference?.toString()??null,infant_nbr:a.occupancy?.infant_nbr??0,first_name:a.guest?.first_name??"",last_name:a.guest?.last_name??"",unit:a.unit?.id?.toString()??null});return a}hasUnderscore(e){return/_+/.test(e)}async calculateAmount({is_amount_modified:e,selected_variation:t,view_mode:a,rp_amount:i}){if(!e)return null;const r=t.nights.length;const o=a==="002"?i:i/r;return o}async generateDailyRates(e,t){let a=e.selected_variation;const i=e.is_amount_modified?await this.calculateAmount(e):null;if(e.guest[t].infant_nbr>0&&!e.is_amount_modified){if(!this.variationService){this.variationService=new n}a=this.variationService.getVariationBasedOnInfants({variations:e.ratePlan.variations,baseVariation:e.selected_variation,infants:e.guest[t].infant_nbr})}return a.nights.map((e=>({date:e.night,amount:i??e.discounted_amount,cost:null})))}async getBookedRooms({check_in:e,check_out:t,notes:a,identifier:i,override_unit:r,unit:o,auto_check_in:n}){const s=[];for(const c in l.ratePlanSelections){const d=l.ratePlanSelections[c];for(const l in d){const c=d[l];if(c.reserved>0){for(let l=0;l<c.reserved;l++){const{first_name:d,last_name:h}=c.guest[l];const p=await this.generateDailyRates(c,l);s.push({identifier:i,roomtype:c.roomtype,rateplan:c.ratePlan,prepayment_amount_gross:0,unit:r?{id:o}:c.guest[l].unit?{id:c.guest[l].unit}:null,occupancy:{adult_nbr:c.selected_variation.adult_nbr,children_nbr:Number(c.selected_variation.child_nbr??0)-Math.max(Number(c.guest[l].infant_nbr??0),0),infant_nbr:c.guest[l].infant_nbr},bed_preference:c.guest[l].bed_preference,from_date:me(e).format("YYYY-MM-DD"),to_date:me(t).format("YYYY-MM-DD"),notes:a,check_in:n,days:p,guest:{email:null,first_name:d,last_name:h,country_id:null,city:null,mobile:null,address:null,dob:null,subscribe_to_news_letter:null,cci:null}})}}}}return s}isEventType(e){if(Array.isArray(e)){return e.includes(this.mode)}return this.mode===e}async prepareBookUserServiceParams({check_in:e,booking:t,room:a,unitId:i}){try{const{dates:r}=l.bookingDraft;const o=r.checkIn;const n=r.checkOut;const s=async(e=null,t=false)=>await this.getBookedRooms({check_in:o,check_out:n,identifier:e,notes:"",override_unit:this.isEventType(["BAR_BOOKING","SPLIT_BOOKING"])?true:false,unit:this.isEventType(["BAR_BOOKING","SPLIT_BOOKING"])?i?.toString()??null:null,auto_check_in:t});const c=({pickup_info:e,extra_services:t,is_direct:a,is_in_loyalty_mode:i,promo_key:r,extras:o,...n},s)=>({assign_units:true,is_pms:true,is_direct:a,is_backend:true,is_in_loyalty_mode:i,promo_key:r,extras:o,booking:{...n,rooms:s},extra_services:t,pickup_info:e});let d=null;const h=l.bookingDraft.source;switch(this.mode){case"EDIT_BOOKING":{const e=t.rooms.filter((e=>e.identifier!==a.identifier));const i=await s(a.identifier,a.in_out?.code==="001");d=c(t,[...e,...i]);break}case"ADD_ROOM":case"SPLIT_BOOKING":{const e=await s();const a=t.rooms;d=c(t,[...a,...e]);break}default:{const t=await s(null,e);const{bookedByGuest:a}=l;const i=h.type==="TRAVEL_AGENCY";d={assign_units:true,is_pms:true,is_direct:true,is_backend:true,is_in_loyalty_mode:false,promo_key:null,extras:[...T.filter((e=>e.key!=="payment_code")),{key:"payment_code",value:l.selectedPaymentMethod?.code}],agent:i?{id:h.tag}:null,is_email_client:a.emailGuest,booking:{company_name:a.company??null,from_date:me(o).format("YYYY-MM-DD"),to_date:me(n).format("YYYY-MM-DD"),remark:a.note||null,booking_nbr:"",property:{id:S.property.id},booked_on:{date:me().format("YYYY-MM-DD"),hour:(new Date).getHours(),minute:(new Date).getMinutes()},source:i?"":h,rooms:t,currency:S.property.currency,arrival:{code:a.selectedArrivalTime},guest:{email:a.email===""?null:a.email||null,first_name:a.firstName,last_name:a.lastName,country_id:a.countryId===""?null:a.countryId,city:null,mobile:a.mobile===null?"":this.hasUnderscore(a.mobile)?"":a.mobile,country_phone_prefix:a?.phone_prefix??null,address:"",dob:null,cci:a.cardNumber?{nbr:a.cardNumber,holder_name:a.cardHolderName,expiry_month:a.expiryMonth,expiry_year:a.expiryYear}:null}},pickup_info:null};break}}return d}catch(e){console.error(e)}}}const ii=".sc-ir-booking-editor-h{display:block;height:100%}.booking-editor__roomtype-container.sc-ir-booking-editor{display:flex;flex-direction:column;gap:1rem;margin-top:1.5rem;padding-bottom:3rem}";const ri=ii;const oi=class{constructor(a){e(this,a);this.resetBookingEvt=t(this,"resetBookingEvt",7);this.loadingChanged=t(this,"loadingChanged",7);this.adjustBlockedUnit=t(this,"adjustBlockedUnit",7)}propertyId;language="en";roomTypeIds=[];identifier;booking;mode="PLUS_BOOKING";checkIn;checkOut;step;blockedUnit;unitId;isLoading=true;resetBookingEvt;loadingChanged;adjustBlockedUnit;roomService=new Ye;bookingService=new s;bookingEditorService=new ai(this.mode);room;get adjustedCheckout(){if(this.bookingEditorService.isEventType("PLUS_BOOKING")&&!this.blockedUnit){return undefined}return this.checkOut}componentWillLoad(){this.initializeApp()}handleModeChange(e,t){if(e!==t){this.bookingEditorService.setMode(e)}}handleGuestSelected(e){this.booking={...e.detail};d({firstName:this.booking.guest.first_name,lastName:this.booking.guest.last_name});const t=l.selects.sources.find((e=>e.code===this.booking.source.code));w({source:t})}async initializeApp(){try{this.isLoading=true;this.bookingEditorService.setMode(this.mode);const[e,t]=await Promise.all([this.roomService.fetchLanguage(this.language),this.bookingService.getCountries(this.language),this.roomService.getExposedProperty({id:Number(this.propertyId),language:this.language,is_backend:true,include_units_hk_status:true,include_sales_rate_plans:true})]);if(!M.entries){M.entries=e.entries;M.direction=e.direction}await this.fetchSetupEntriesAndInitialize();m({countries:t});this.initializeDraftFromBooking();if(this.bookingEditorService.isEventType("EDIT_BOOKING")){await this.checkBookingAvailability()}}catch(e){console.error("Error initializing app:",e)}finally{this.isLoading=false}}disconnectedCallback(){b(true)}handleCheckAvailability(e){e.stopImmediatePropagation();e.stopPropagation();this.checkBookingAvailability()}initializeDraftFromBooking(){if(this.bookingEditorService.isEventType(["EDIT_BOOKING","ADD_ROOM"])){if(!this.booking||!this.identifier&&this.bookingEditorService.isEventType("EDIT_BOOKING")){throw new Error("Missing booking or identifier")}}if(this.bookingEditorService.isEventType("EDIT_BOOKING")){this.room=this.bookingEditorService.getRoom(this.booking,this.identifier)}let e={dates:{checkIn:this.checkIn?me(this.checkIn,"YYYY-MM-DD"):me(),checkOut:this.checkOut?me(this.checkOut,"YYYY-MM-DD"):me().add(1,"day")}};if(this.bookingEditorService.isEventType(["EDIT_BOOKING","ADD_ROOM"])){const t=l.selects.sources.find((e=>e.code===this.booking.source.code));e={...e,source:t};if(this.bookingEditorService.isEventType("EDIT_BOOKING")){e={...e,occupancy:{adults:this.booking.occupancy.adult_nbr,children:this.booking.occupancy.children_nbr}}}d({firstName:this.booking.guest.first_name,lastName:this.booking.guest.last_name})}w(e)}async checkBookingAvailability(){const{source:e,occupancy:t,dates:a}=l.bookingDraft;const i=a.checkIn.format("YYYY-MM-DD");const r=a.checkOut.format("YYYY-MM-DD");const o=e?.type==="TRAVEL_AGENCY";try{const a=this.bookingEditorService.isEventType("EDIT_BOOKING")?[this.room.roomtype?.id]:[];const n=this.bookingEditorService.isEventType(["BAR_BOOKING","SPLIT_BOOKING"])?this.roomTypeIds.map((e=>Number(e))):[];await this.bookingService.getBookingAvailability({from_date:i,to_date:r,propertyid:S.property.id,adultChildCount:{adult:t.adults,child:t.children},language:this.language,room_type_ids:n,currency:S.property.currency,agent_id:o?e?.tag:null,is_in_agent_mode:o,room_type_ids_to_update:a});if(this.mode!=="EDIT_BOOKING"){await this.assignCountryCode()}if(this.bookingEditorService.isEventType("EDIT_BOOKING")){this.bookingEditorService.updateBooking(this.room)}}catch(e){console.error("Error initializing booking availability:",e)}}async doReservation(e){try{this.loadingChanged.emit({cause:e});const t=v();ei.parse(t.map((e=>({...e.guest,requires_bed_preference:e.ratePlanSelection.roomtype.is_bed_configuration_enabled}))));ti.parse(l.bookedByGuest);const a=await this.bookingEditorService.prepareBookUserServiceParams({check_in:e==="book-checkin",booking:this.booking,room:this.room,unitId:this.unitId?.toString()});console.log({DoReservationPayload:a});await this.bookingService.doReservation(a);this.adjustBlockedUnit.emit(a);this.resetBookingEvt.emit(null)}catch(e){console.log(e)}finally{this.loadingChanged.emit({cause:null})}}async assignCountryCode(){const e=await this.bookingService.getUserDefaultCountry();const t=e["COUNTRY_ID"];const a=l.selects.countries.find((e=>e.id?.toString()===t?.toString()));d({countryId:t,phone_prefix:a?.phone_prefix})}async fetchSetupEntriesAndInitialize(){try{const e=await this.fetchSetupEntries();this.setSourceOptions(S.property.allowed_booking_sources);this.setOtherProperties(e)}catch(e){console.error("Error fetching setup entries:",e)}}setOtherProperties(e){m({arrivalTime:e.arrivalTime,bedPreferences:e.bedPreferenceType,ratePricingMode:e.ratePricingMode})}setSourceOptions(e){const t=this.bookingEditorService.isEventType("BAR_BOOKING")?this.getFilteredSourceOptions(e):e;m({sources:t});let a;if(this.bookingEditorService.isEventType("EDIT_BOOKING")&&this.booking){const t=e.find((e=>this.booking.source?.code===e.code));a=t}else{a=t.find((e=>e.type!=="LABEL"))}w({source:a})}getFilteredSourceOptions(e){const t=new Set;if(!Boolean(this.unitId)){return e}const a=S.roomsInfo.find((e=>e.physicalrooms.find((e=>e.id.toString()===this.unitId?.toString()))));const i=(()=>{const e=a?.rateplans??[];if(e.length===0)return false;const i=e.every((e=>(e?.agents?.length??0)>0));if(i){e.forEach((e=>{(e?.agents??[]).forEach((e=>t.add(e?.id?.toString())))}))}return i})()??false;if(!i){return e}return e.filter((e=>{if(e?.type==="LABEL")return true;const a=e?.tag;const i=a!=null&&t.has(a);return i}))}async fetchSetupEntries(){return await this.bookingService.fetchSetupEntries()}render(){if(this.isLoading){return a("div",{class:"drawer__loader-container"},a("ir-spinner",null))}return a(i,null,a("div",null,a("ir-interceptor",null),this.step==="details"&&a(o,null,a("ir-booking-editor-header",{isBlockConversion:!!this.blockedUnit?.STATUS_CODE,booking:this.booking,checkIn:this.checkIn,checkOut:this.adjustedCheckout,mode:this.mode}),a("div",{class:"booking-editor__roomtype-container"},l.roomTypes?.map((e=>a("igl-room-type",{key:`room-type-${e.id}`,id:e.id.toString(),roomType:e,bookingType:this.mode,ratePricingMode:l.selects?.ratePricingMode,roomTypeId:this.room?.roomtype?.id,currency:S.property.currency}))))),this.step==="confirm"&&a("ir-booking-editor-form",{onDoReservation:e=>{e.stopImmediatePropagation();e.stopPropagation();this.doReservation(e.detail)},room:this.room,mode:this.mode})))}static get watchers(){return{mode:["handleModeChange"]}}};oi.style=ri;const ni=".sc-ir-booking-editor-drawer-h{display:block}.booking-editor__drawer.sc-ir-booking-editor-drawer::part(dialog){overflow:hidden}";const si=ni;const li=class{constructor(a){e(this,a);this.bookingEditorClosed=t(this,"bookingEditorClosed",7)}open;ticket;propertyid;language="en";booking;mode="PLUS_BOOKING";label;checkIn;checkOut;unitId;blockedUnit;roomTypeIds=[];roomIdentifier;step="details";isLoading;bookingEditorClosed;token=new Se;bookingService=new s;bookingEditorService=new ai;wasBlockedUnit=false;didAdjustBlockedUnit=false;originalBlockPayload;componentWillLoad(){if(this.token){this.token.setToken(this.ticket)}this.initializeBlockedUnitState(this.blockedUnit)}handleTicketChange(){if(this.token){this.token.setToken(this.ticket)}}handleBlockedUnitChange(e){this.initializeBlockedUnitState(e)}handleCheckInChange(){this.initializeBlockedUnitState(this.blockedUnit)}handleCheckOutChange(){this.initializeBlockedUnitState(this.blockedUnit)}handleUnitChange(){this.initializeBlockedUnitState(this.blockedUnit)}initializeBlockedUnitState(e){const t=["002","003","004"];if(!e){this.wasBlockedUnit=false;this.originalBlockPayload=undefined;return}const a=Boolean(e&&t.includes(e.STATUS_CODE));if(!a||!this.checkIn||!this.checkOut||!this.unitId){this.wasBlockedUnit=false;this.originalBlockPayload=undefined;this.didAdjustBlockedUnit=false;return}this.originalBlockPayload={from_date:this.checkIn,to_date:this.checkOut,NOTES:e.OPTIONAL_REASON||"",pr_id:this.unitId.toString(),STAY_STATUS_CODE:e.STATUS_CODE||(e.OUT_OF_SERVICE?"004":Number(e.RELEASE_AFTER_HOURS)===0?"002":"003"),DESCRIPTION:e.RELEASE_AFTER_HOURS||"",BLOCKED_TILL_DATE:e.ENTRY_DATE||undefined,BLOCKED_TILL_HOUR:e.ENTRY_HOUR!==undefined&&e.ENTRY_HOUR!==null?e.ENTRY_HOUR.toString():undefined,BLOCKED_TILL_MINUTE:e.ENTRY_MINUTE!==undefined&&e.ENTRY_MINUTE!==null?e.ENTRY_MINUTE.toString():undefined};this.wasBlockedUnit=true;this.didAdjustBlockedUnit=false}handleBookingStepChange(e){e.stopImmediatePropagation();e.stopPropagation();const{direction:t}=e.detail;switch(t){case"next":this.step="confirm";break;case"prev":this.step="details";break;default:console.warn("Direction not supported")}}get drawerLabel(){if(this.label){return this.label}switch(this.mode){case"SPLIT_BOOKING":case"BAR_BOOKING":case"ADD_ROOM":case"EDIT_BOOKING":case"PLUS_BOOKING":return"New Booking"}}goToConfirm=e=>{e?.stopPropagation();this.step="confirm"};goToDetails=()=>{if(this.mode==="BAR_BOOKING"){u()}if(this.mode==="EDIT_BOOKING"){u();this.bookingEditorService.updateBooking(this.bookingEditorService.getRoom(this.booking,this.roomIdentifier))}this.step="details"};renderFooter(){switch(this.step){case"details":return this.renderDetailsActions();case"confirm":return this.renderConfirmActions();default:return null}}renderConfirmActions(){const{checkIn:e}=l?.bookingDraft?.dates;const t=e?e?.isSame(me(),"date"):false;return a(o,null,a("ir-custom-button",{onClickHandler:this.goToDetails,size:"medium",appearance:"filled",variant:"neutral"},"Back"),a("ir-custom-button",{loading:this.isLoading==="book",value:"book",form:"new_booking_form",disabled:false,type:"submit",size:"medium",appearance:t?"outlined":"accent",variant:"brand"},"Book"),t&&a("ir-custom-button",{loading:this.isLoading==="book-checkin",value:"book-checkin",form:"new_booking_form",type:"submit",size:"medium",appearance:"accent",variant:"brand"},"Book and check-in"))}renderDetailsActions(){const e=y();return a(o,null,a("ir-custom-button",{"data-drawer":"close",size:"medium",appearance:"filled",variant:"neutral"},"Cancel"),["PLUS_BOOKING","ADD_ROOM"].includes(this.mode)&&a(o,null,!e&&a("wa-tooltip",{for:"booking_editor__next-button"},"Please select at least one unit to continue."),a("ir-custom-button",{id:"booking_editor__next-button",disabled:!e,onClickHandler:this.goToConfirm,size:"medium",appearance:"accent",variant:"brand"},"Next")))}async closeDrawer(){if(this.wasBlockedUnit&&!this.didAdjustBlockedUnit){await this.checkAndBlockDate()}else if(this.blockedUnit&&this.blockedUnit.STATUS_CODE){await this.handleBlockDate()}this.bookingEditorClosed.emit();this.step="details"}getBlockUnitPayload(){if(this.wasBlockedUnit&&this.originalBlockPayload){return this.originalBlockPayload}if(!this.blockedUnit||!this.checkIn||!this.checkOut||!this.unitId){return undefined}const e=I(this.blockedUnit.RELEASE_AFTER_HOURS!==null?Number(this.blockedUnit.RELEASE_AFTER_HOURS):null);return{from_date:this.checkIn,to_date:this.checkOut,NOTES:this.blockedUnit.OPTIONAL_REASON||"",pr_id:this.unitId.toString(),STAY_STATUS_CODE:this.blockedUnit.OUT_OF_SERVICE?"004":Number(this.blockedUnit.RELEASE_AFTER_HOURS)===0?"002":"003",DESCRIPTION:this.blockedUnit.RELEASE_AFTER_HOURS||"",...e}}async handleBlockDate(e=true,t){try{const a=t??this.getBlockUnitPayload();if(!a){return}await this.bookingService.blockUnit(a);if(e){this.blockedUnit=undefined;this.initializeBlockedUnitState(undefined)}}catch(e){}}async handleAdjustBlockedUnitEvent(e){e.stopImmediatePropagation();e.stopPropagation();try{await this.adjustBlockedDatesAfterReservation(e.detail);this.didAdjustBlockedUnit=true}catch(e){console.error("Error adjusting blocked unit:",e)}}async adjustBlockedDatesAfterReservation(e){if(!this.wasBlockedUnit||!this.originalBlockPayload){return}const t={...this.originalBlockPayload};const a=me(this.originalBlockPayload.from_date,"YYYY-MM-DD");const i=me(e.booking.from_date,"YYYY-MM-DD");const r=me(this.originalBlockPayload.to_date,"YYYY-MM-DD");const o=me(e.booking.to_date,"YYYY-MM-DD");if(o.isBefore(r,"days")){const e={...t,from_date:o.format("YYYY-MM-DD")};await this.bookingService.blockUnit(e)}if(i.isAfter(a,"days")){const e={...t,to_date:i.format("YYYY-MM-DD")};await this.bookingService.blockUnit(e)}return}async checkAndBlockDate(){try{if(!this.originalBlockPayload||!this.roomTypeIds||this.roomTypeIds.length===0){return}const e=this.roomTypeIds.map((e=>Number(e))).filter((e=>!Number.isNaN(e)));if(e.length===0){return}await this.bookingService.getBookingAvailability({from_date:this.originalBlockPayload.from_date,to_date:this.originalBlockPayload.to_date,propertyid:S.property.id,adultChildCount:{adult:2,child:0},language:this.language,room_type_ids:e,currency:S.property?.currency});const t=l.roomTypes.every((e=>{if(e.is_available_to_book){return true}return e.inventory>0&&e["not_available_reason"]==="ALL-RATES-PLAN-NOT-BOOKABLE"}));if(t){await this.handleBlockDate()}else{console.warn("Blocked date is unavailable. Continuing...")}}catch(e){console.error("Error checking and blocking date:",e)}}render(){return a("ir-drawer",{key:"2162f251b4df020174dad46cc5e45b505a19c418",onDrawerHide:async e=>{e.stopImmediatePropagation();e.stopPropagation();await this.closeDrawer()},style:{"--ir-drawer-width":"70rem","--ir-drawer-background-color":"var(--wa-color-surface-default)","--ir-drawer-padding-left":"var(--spacing)","--ir-drawer-padding-right":"var(--spacing)","--ir-drawer-padding-top":"var(--spacing)","--ir-drawer-padding-bottom":"var(--spacing)"},class:"booking-editor__drawer",label:this.drawerLabel,open:this.open},this.open&&this.ticket&&a("ir-booking-editor",{key:"d4b812e7d242eb27e0ab1384b19652a34824a555",onLoadingChanged:e=>{e.stopImmediatePropagation();e.stopPropagation();this.isLoading=e.detail.cause},onAdjustBlockedUnit:e=>this.handleAdjustBlockedUnitEvent(e),unitId:this.unitId,propertyId:this.propertyid,roomTypeIds:this.roomTypeIds,onResetBookingEvt:async()=>{this.blockedUnit=undefined;this.initializeBlockedUnitState(undefined);await this.closeDrawer()},step:this.step,blockedUnit:this.blockedUnit,language:this.language,booking:this.booking,mode:this.mode,checkIn:this.checkIn,checkOut:this.checkOut,identifier:this.roomIdentifier}),a("div",{key:"7b33d341571634daaa0cdec95f96c4809b2bed4d",slot:"footer",class:"ir__drawer-footer"},this.renderFooter()))}static get watchers(){return{ticket:["handleTicketChange"],blockedUnit:["handleBlockedUnitChange"],checkIn:["handleCheckInChange"],checkOut:["handleCheckOutChange"],unitId:["handleUnitChange"]}}};li.style=si;const ci=".sc-ir-booking-editor-form-h{display:flex;flex-direction:column;height:100%}.booking-editor__guest-form.sc-ir-booking-editor-form{display:flex;flex-direction:column;gap:1rem;height:100%}.booking-editor__header.sc-ir-booking-editor-form{width:100%;align-items:flex-center;display:flex}.booking-editor__dates.sc-ir-booking-editor-form{line-height:1.2}.booking-editor__total.sc-ir-booking-editor-form{display:flex;align-items:center;white-space:nowrap}.booking-editor__total-label.sc-ir-booking-editor-form{margin-right:4px}.booking-editor__total-amount.sc-ir-booking-editor-form{white-space:nowrap}.booking-editor__booked-by.sc-ir-booking-editor-form{display:flex;flex-direction:column;gap:1rem;margin-bottom:1.5rem}.booking-editor__heading.sc-ir-booking-editor-form{margin:0;font-family:var(--wa-font-family-heading);font-weight:var(--wa-font-weight-heading);line-height:var(--wa-line-height-condensed);text-wrap:balance;font-size:var(--wa-font-size-l)}@media (min-width: 768px){.booking-editor__booked-by.sc-ir-booking-editor-form{flex-direction:row;align-items:center}.booking-editor__booked-by-picker.sc-ir-booking-editor-form{max-width:40rem}}";const di=ci;const hi=class{constructor(a){e(this,a);this.doReservation=t(this,"doReservation",7)}mode="PLUS_BOOKING";room;guests;totalCost=0;doReservation;bookingService=new s;totalRooms=0;pickerEl;async componentWillLoad(){this.totalRooms=k();this.totalCost=this.totalRooms>1?await _():0}async handleRecalculation(e){e.stopImmediatePropagation();e.stopPropagation();this.totalCost=this.totalRooms>1?await _():0}async fetchGuests(e){try{if(!e){return}this.guests=await this.bookingService.fetchExposedGuest(e,S.property.id)}catch(e){console.log(e)}}handleComboboxSelect(e){const t=this.guests?.find((t=>t.id?.toString()===e.detail.item.value));if(!t){console.warn(`guest not found with id ${e.detail.item.value}`);return}d({id:t.id,email:t.email,firstName:t.first_name,lastName:t.last_name,mobile:t.mobile_without_prefix,countryId:t.country_id?.toString(),phone_prefix:t["country_phone_prefix"]})}render(){const{dates:e}=l.bookingDraft;let t=false;return a("form",{key:"0bc3808cac305ac4f7ddd9e9f99c8e0e468c970e",class:"booking-editor__guest-form",id:"new_booking_form",autoComplete:"off",onSubmit:e=>{e.preventDefault();const t=e.submitter;this.doReservation.emit(t?.value)}},a("div",{key:"d9942b8246a5ad2a88a463432899c4a1fe6723c7",class:"booking-editor__header"},a("ir-date-view",{key:"49e7b063bfe4aec25c49fa433a9b7130bf6615d2",class:"booking-editor__dates mr-1 flex-fill font-weight-bold font-medium-1",from_date:e.checkIn,to_date:e.checkOut,dateOption:"DD MMM YYYY"}),this.totalRooms>1&&a("div",{key:"8c9498daba59047c1c9e9f99f30db713248b5759",class:"booking-editor__total mt-1 mt-md-0 text-right"},a("span",{key:"ab625376793165b54bf0eb9e578a883180d97e4f",class:"booking-editor__total-label"},M.entries.Lcz_TotalPrice)," ",a("span",{key:"30dadf363b3f01426d2189b5933a48b116badd49",class:"booking-editor__total-amount font-weight-bold font-medium-1"},E(S.property.currency.symbol,this.totalCost)))),Object.values(l.ratePlanSelections).map((i=>Object.values(i).map((i=>{const r=i;if(r.reserved===0){return null}return[...new Array(r.reserved)].map(((i,o)=>{const n=["BAR_BOOKING","PLUS_BOOKING"].includes(this.mode)&&l.bookedByGuest.id===-1&&!t&&!l.bookedByGuestManuallyEdited;if(n){t=true}return a("igl-application-info",{autoFillGuest:n,totalNights:ne(e.checkIn.format("YYYY-MM-DD"),e.checkOut.format("YYYY-MM-DD")),bedPreferenceType:l.selects.bedPreferences,currency:S.property.currency,guestInfo:r.guest?r.guest[o]:null,bookingType:this.mode,rateplanSelection:r,key:`${r.ratePlan.id}_${o}`,roomIndex:o,baseData:this.mode==="EDIT_BOOKING"?{roomtypeId:this.room.roomtype.id,unit:this.room.unit}:undefined})}))})))),["BAR_BOOKING","PLUS_BOOKING"].includes(this.mode)&&a("section",{key:"8ebfd3dc509e91d6c4906db71ab461c69eaa1278",class:"mt-2"},a("div",{key:"f0b74894c50a86cf499af77cf47a94efce4643e2",class:"booking-editor__booked-by booking-editor__booked-by-header"},a("h4",{key:"f4977cff04e1ab0bd82c3fe754dc382209f119e4",class:"booking-editor__heading booking-editor__booked-by-title"},"Booked by"),a("ir-picker",{key:"b9b17defbb013bc2c920bfead1d15912c95ed9f8",class:"booking-editor__booked-by-picker",appearance:"filled",placeholder:"Search customer by email or name",withClear:true,"onText-change":e=>this.fetchGuests(e.detail),debounce:500,loading:Ce("/Fetch_Exposed_Guests"),mode:"select-async",ref:e=>this.pickerEl=e,"onCombobox-select":this.handleComboboxSelect.bind(this)},this.guests?.map((e=>{const t=`${e.email} - ${e.first_name} ${e.last_name}`;return a("ir-picker-item",{label:t,value:e.id?.toString(),key:e.id},t)}))),l.bookedByGuest.id!==-1&&a("ir-custom-button",{key:"d35c980f45f6387b30b16c21c153e8c7b67cf8b9",onClickHandler:()=>{d(x);this.pickerEl.clearInput()},variant:"brand"},"Clear user")),a("ir-booking-editor-guest-form",{key:"4f398b4212abc1878bda5e51f3cff39a3d91af5b"})))}};hi.style=di;const pi=".sc-ir-booking-editor-guest-form-h{padding-bottom:3rem}.sc-ir-booking-editor-guest-form-h{display:flex;flex-direction:column;gap:1rem}.booking-editor__guest-name-group.sc-ir-booking-editor-guest-form,.booking-editor__form-control.sc-ir-booking-editor-guest-form{display:flex;flex-direction:column;gap:1rem}.booking-editor__guest-input.sc-ir-booking-editor-guest-form,.booking-editor__guest-input-validator.sc-ir-booking-editor-guest-form{width:100%}.booking-editor__form-control.sc-ir-booking-editor-guest-form{width:100%;flex-grow:0;height:fit-content}.booking-editor__payment-info-description.sc-ir-booking-editor-guest-form{display:flex;height:fit-content;flex-direction:column}.booking-editor__guest-input-label.--first-name-pc-label.sc-ir-booking-editor-guest-form{display:none}@media (min-width: 768px){.booking-editor__guest-input-label.--first-name-pc-label.sc-ir-booking-editor-guest-form{display:block}.booking-editor__guest-name-group.sc-ir-booking-editor-guest-form{display:flex;flex-direction:row;align-items:flex-end}.booking-editor__guest-input-label.--first-name-mobile-label.sc-ir-booking-editor-guest-form,.booking-editor__guest-input.--last-name.sc-ir-booking-editor-guest-form::part(label){display:none}.sc-ir-booking-editor-guest-form-h{flex-direction:row;gap:4rem}}";const ui=pi;const fi=class{constructor(t){e(this,t)}paymentMethods=[];expiryDateMask={mask:"MM/YY",placeholderChar:"_",blocks:{MM:{mask:Te.MaskedRange,from:1,to:12,maxLength:2},YY:{mask:Te.MaskedRange,from:(new Date).getFullYear()%100,to:(new Date).getFullYear()%100+20,maxLength:2}}};componentWillLoad(){this.paymentMethods=S.property.allowed_payment_methods.filter((e=>e.is_active&&!e.is_payment_gateway));if(this.paymentMethods.length>0){h("selectedPaymentMethod",{code:this.paymentMethods[0].code})}}updateCountry(e){e.stopImmediatePropagation();e.stopPropagation();const t=e.detail;let a={countryId:t.id.toString()};if(!l.bookedByGuest.mobile){a={...a,phone_prefix:t.phone_prefix}}d(a)}get expiryDate(){const{expiryMonth:e,expiryYear:t}=l.bookedByGuest;if(!e||!t){return""}const a=t.toString().length===4?t.toString().slice(-2):t.toString();return`${e}/${a}`}render(){const{bookedByGuest:e,selects:t}=l;return a(i,{key:"c3f25c0b6129ec9a122eb0e35f30f7854387dbbf"},a("section",{key:"6a8f91b9074b42b5a8312f39978fc38afa60301a",class:"booking-editor__form-control"},a("ir-input",{key:"6ab06971513c5da4612e2dce9f81b48892bd1d82",label:"Email address","onText-change":e=>d({email:e.detail}),type:"email",value:e.email,defaultValue:e.email,placeholder:"Email (leave empty if not available)"}),a("div",{key:"159b1f2e0741e6985a7fa7a753a6e1da2fce0cfa",class:"booking-editor__guest-name-group",id:"booking-editor-guest-name-group"},a("ir-validator",{key:"8a7d45903ee8e24216c8c18adf1347f8fb00169a",class:"booking-editor__guest-input-validator",value:e.firstName,schema:ti.shape.firstName},a("ir-input",{key:"ca2722bb0b11da6ca586d1653984def8970c1d45",id:"booking-editor-guest-first-name",class:"booking-editor__guest-input --first-name",value:e.firstName,defaultValue:e.firstName,placeholder:"First name",autocomplete:"off","onText-change":e=>d({firstName:e.detail})},a("p",{key:"e94beee07bea1f5bcb950337ee4d7bb23a2800d0",style:{margin:"0",marginBottom:"0.5rem"},slot:"label"},a("span",{key:"3831a05ea2d0930572863132d14f02a81f331b97",class:"booking-editor__guest-input-label --first-name-pc-label"},"Name"),a("span",{key:"18af53f79f5803c6cfee96d0dfe5714ce8acb431",class:"booking-editor__guest-input-label --first-name-mobile-label"},"First name")))),a("ir-validator",{key:"7d2ff56b2d8cac892f6c7e1fe6c9b72495edce88",class:"booking-editor__guest-input-validator",value:e.lastName,schema:ti.shape.lastName},a("ir-input",{key:"6cee828e1003ecfdbfb8a3c9162831348d0ba3b2",id:"booking-editor-guest-last-name",class:"booking-editor__guest-input --last-name",label:"Last name","onText-change":e=>d({lastName:e.detail}),value:e.lastName,defaultValue:e.lastName,placeholder:"Last name",autocomplete:"off"}))),a("ir-input",{key:"d54e2035c66d6f3b9bfa469a212b3a7a1ce1676b",label:"Company name",placeholder:"Company name",value:e.company,defaultValue:e.company,"onText-change":e=>d({company:e.detail})}),a("ir-country-picker",{key:"6856f917bfd007160def7cd8bb9dc3cedfa26450",label:M.entries.Lcz_Country,variant:"modern",testId:"main_guest_country",class:"flex-grow-1 m-0",onCountryChange:e=>this.updateCountry(e),countries:t.countries,country:t.countries.find((t=>t.id.toString()===e.countryId?.toString()))}),a("ir-mobile-input",{key:"1c4db2a76147a827cbb27c670aebc92c06da1f6c",size:"small","onMobile-input-change":e=>{d({mobile:e.detail.formattedValue})},"onMobile-input-country-change":e=>d({phone_prefix:e.detail.phone_prefix}),value:e.mobile,countryCode:t.countries.find((t=>t.phone_prefix===e.phone_prefix))?.code,countries:t.countries}),a("wa-select",{key:"7f7130f7dd4716539d07cf577516250df6798635",size:"small",label:M.entries.Lcz_YourArrivalTime,"data-testid":"arrival_time",id:ae(),defaultValue:t.arrivalTime[0].CODE_NAME,value:e.selectedArrivalTime,onchange:e=>d({selectedArrivalTime:e.target.value})},t.arrivalTime.map((t=>a("wa-option",{value:t.CODE_NAME,selected:e.selectedArrivalTime===t.CODE_NAME},t.CODE_VALUE_EN))))),a("section",{key:"0cf4a75b17e4bc8bbc0abbcf52e1e5ab7bf74e14",class:"booking-editor__form-control"},a("wa-textarea",{key:"8b3728b8f48d23c3d5443e58cba8d3f413a04890",onchange:e=>d({note:e.target.value}),size:"small",value:e.note,defaultValue:e.note,label:M.entries.Lcz_AnyMessageForUs,rows:3}),this.paymentMethods.length>1&&a("wa-select",{key:"027aecbc29c87d153cc60eea2dbd8235fcf82510",label:"Payment Method",size:"small",defaultValue:l?.selectedPaymentMethod?.code??this.paymentMethods[0].code,value:l?.selectedPaymentMethod?.code,onchange:e=>h("selectedPaymentMethod",{code:e.target.value})},this.paymentMethods.map((e=>a("wa-option",{value:e.code},e.description)))),l.selectedPaymentMethod?.code==="001"&&a(o,{key:"63beca5facae4ba31bb3802ab79c27668fdb4aa4"},a("ir-input",{key:"093df8ddbc671dd038238eec32990ee063a8d55c",value:e.cardNumber,defaultValue:e.cardNumber,"onText-change":e=>d({cardNumber:e.detail.trim()}),label:M.entries.Lcz_CardNumber}),a("ir-input",{key:"3065fc9ff66a9499dc17a90bf98e5e31eecf37ac",value:e.cardHolderName,defaultValue:e.cardHolderName,"onText-change":e=>d({cardHolderName:e.detail.trim()}),label:M.entries.Lcz_CardHolderName}),a("ir-input",{key:"1221d289ad20e3bb6b85c13b9b319cdbaf910bb3","onText-change":e=>{const[t,a]=e.detail.split("/");d({expiryMonth:t,expiryYear:a})},value:this.expiryDate,mask:this.expiryDateMask,label:M.entries.Lcz_ExpiryDate})),l.selectedPaymentMethod?.code==="005"&&a(o,{key:"8b2baf187f34bf9f33727a31a77a5ab2f59be0ec"},a("style",{key:"13171b2b5b105fbeb70d64dddb3d145d0cc6aedb"},`p{\n              margin:0;\n              padding:0}`),a("div",{key:"158b6c8802143aeb3ee970b502927916a4547dfc",class:"booking-editor__payment-info-description",innerHTML:this.paymentMethods.find((e=>e.code==="005"))?.localizables.find((e=>e.language.code.toLowerCase()==="en"))?.description})),a("wa-checkbox",{key:"2efcd998552913807e85041ffb103a56ed3c56d0",defaultChecked:e.emailGuest,checked:e.emailGuest,onchange:e=>d({emailGuest:e.target.checked})},M.entries.Lcz_EmailTheGuest)))}};fi.style=ui;const gi=".sc-ir-booking-editor-header-h{display:flex;flex-direction:column;gap:var(--wa-space-m, 1rem)}.booking-editor-header__container.sc-ir-booking-editor-header{display:flex;flex-direction:column;gap:var(--wa-space-m, 1rem)}.booking-editor-header__booking-picker.sc-ir-booking-editor-header{max-width:350px}.booking-editor-header__booking-picker-validator.sc-ir-booking-editor-header{margin-bottom:1rem}.booking-editor-header__tax_statement.sc-ir-booking-editor-header{margin-top:1.5rem}@media (min-width: 768px){.booking-editor-header__container.sc-ir-booking-editor-header{flex-direction:row;align-items:flex-start;flex-wrap:wrap}.booking-editor-header__adults-select.sc-ir-booking-editor-header{width:100px}.booking-editor-header__children-select.sc-ir-booking-editor-header{width:170px}}@media (min-width: 1024px){.booking-editor__date-validator.sc-ir-booking-editor-header::part(error-message){position:absolute}}";const bi=gi;const wi=class{constructor(a){e(this,a);this.guestSelected=t(this,"guestSelected",7);this.checkAvailability=t(this,"checkAvailability",7)}booking;isBlockConversion;mode="PLUS_BOOKING";checkIn;checkOut;isLoading;bookings=[];datesSchema;guestSelected;checkAvailability;bookingService=new s;adultsSchema=Z.coerce.number().min(1);bookingEditorService=new ai;BookedByGuestPickerSchema=Z.object({firstName:Z.string()}).superRefine(((e,t)=>{if(!e.firstName){t.addIssue({path:["firstName"],code:Z.ZodIssueCode.custom,message:M.entries.Lcz_ChooseBookingNumber})}}));pickerRef;componentWillLoad(){this.createDatesSchema();this.bookingEditorService.setMode(this.mode)}handleBookingChange(e,t){if(e!==t){this.createDatesSchema()}}handleModeChange(e,t){if(e!==t){this.createDatesSchema();this.bookingEditorService.setMode(this.mode)}}createDatesSchema(){this.datesSchema=Z.object({checkIn:Z.any(),checkOut:Z.any()}).superRefine(((e,t)=>{if(!me.isMoment(e.checkIn)){t.addIssue({path:["checkIn"],code:Z.ZodIssueCode.custom,message:"Check-in date is required"})}if(me.isMoment(e.checkIn)&&this.bookingEditorService.isEventType(["SPLIT_BOOKING","ADD_ROOM"])&&!e.checkIn.isSameOrBefore(this.booking.to_date)){t.addIssue({path:["checkIn"],code:Z.ZodIssueCode.custom,message:`${M.entries.Lcz_CheckInDateShouldBeMAx.replace("%1",me(this.booking.from_date,"YYYY-MM-DD").format("ddd, DD MMM YYYY")).replace("%2",me(this.booking.to_date,"YYYY-MM-DD").format("ddd, DD MMM YYYY"))}  `})}if(!me.isMoment(e.checkOut)){t.addIssue({path:["checkOut"],code:Z.ZodIssueCode.custom,message:"Check-out date is required"})}}))}async handleBookingSearch(e){try{this.isLoading=true;if(!e){this.pickerRef.clearInput();return}this.bookings=await this.bookingService.fetchExposedBookings(e,S.property.id,this.checkIn,this.checkOut)}catch(e){console.error(e)}finally{this.isLoading=false}}handleSubmit(e){e.preventDefault();this.stopEvent(e);try{if(this.mode==="SPLIT_BOOKING"&&!l.bookedByGuest.firstName){ti.parse(l.bookedByGuest)}this.datesSchema.parse(l.bookingDraft.dates);this.adultsSchema.parse(l.bookingDraft?.occupancy?.adults);this.checkAvailability.emit()}catch(e){console.error(e)}}handleDateRangeChange(e){this.stopEvent(e);D();w({dates:e.detail})}handleSourceChange(e){this.stopEvent(e);const t=e.target.value;const a=l.selects.sources.find((e=>e.id===t));w({source:a})}handleAdultsChange(e){this.stopEvent(e);D();const t=Number(e.target.value);const{children:a}=l.bookingDraft.occupancy;w({occupancy:{adults:t,children:a}})}handleChildrenChange(e){this.stopEvent(e);D();const t=Number(e.target.value);const{adults:a}=l.bookingDraft.occupancy;w({occupancy:{adults:a,children:t}})}stopEvent(e){e.stopImmediatePropagation();e.stopPropagation()}get minDate(){const e=me();switch(this.mode){case"EDIT_BOOKING":return e.add(-2,"weeks").format("YYYY-MM-DD");case"ADD_ROOM":return this.booking?.from_date;case"SPLIT_BOOKING":default:if(this.checkIn&&this.isBlockConversion)return this.checkIn;return e.format("YYYY-MM-DD")}}get maxDate(){switch(this.mode){case"PLUS_BOOKING":if(this.checkOut&&this.isBlockConversion)return this.checkOut;return undefined;case"ADD_ROOM":case"SPLIT_BOOKING":default:return undefined}}get childrenSelectPlaceholder(){const{child_max_age:e}=S.property.adult_child_constraints;const t=e===1?M.entries.Lcz_Year:M.entries.Lcz_Years;return`${M.entries.Lcz_ChildCaption} 0 - ${e} ${t}`}async selectGuest(e){this.stopEvent(e);const t=e.detail?.item?.value;const a=await this.bookingService.getExposedBooking(t,"en",true);this.guestSelected.emit(a)}render(){const{sources:e}=l.selects;const{adults:t,children:r}=l.bookingDraft.occupancy;const{checkIn:n,checkOut:s}=l.bookingDraft.dates;return a(i,{key:"338742099638646572bfcf772afb5190de4c8dcb"},a("form",{key:"433574a1b70cdf095bf82435d6f81a6c2453eb01",onSubmit:this.handleSubmit.bind(this)},this.bookingEditorService.isEventType("SPLIT_BOOKING")&&a("ir-validator",{key:"aee39fd6dc71e0f7929985733f5ce7ac5396a5fd",value:l.bookedByGuest,class:"booking-editor-header__booking-picker-validator",showErrorMessage:true,schema:this.BookedByGuestPickerSchema},a("ir-picker",{key:"490befb3c61905f2454767b9c1009387918038ff",withClear:true,mode:"select-async",class:"booking-editor-header__booking-picker",debounce:300,ref:e=>this.pickerRef=e,label:`${M.entries.Lcz_Tobooking}#`,placeholder:M.entries.Lcz_BookingNumber,loading:this.isLoading,"onText-change":e=>this.handleBookingSearch(e.detail),"onCombobox-select":this.selectGuest.bind(this)},this.bookings.map((e=>{const t=`${e.booking_nbr} ${e.guest.first_name} ${e.guest.last_name}`;return a("ir-picker-item",{value:e.booking_nbr?.toString(),label:t},t)})))),a("div",{key:"757cd408173dd5333baae16438347b8d7729c75d",class:"booking-editor-header__container"},!this.bookingEditorService.isEventType(["EDIT_BOOKING","ADD_ROOM","SPLIT_BOOKING"])&&a("wa-select",{key:"65d277046d8a5ac268a6cd64527d3a29bbd622a1",size:"small",placeholder:M.entries.Lcz_Source,value:l.bookingDraft.source?.id?.toString(),defaultValue:l.bookingDraft.source?.id,"onwa-hide":this.stopEvent.bind(this),onchange:this.handleSourceChange.bind(this)},e.map((e=>e.type==="LABEL"?a("small",null,e.description):a("wa-option",{value:e.id?.toString()},e.description)))),a("ir-validator",{key:"b3f50e4e4fef2cbbd7984b3d945e730d918c8d0c",class:"booking-editor__date-validator",showErrorMessage:true,value:l.bookingDraft.dates,schema:this.datesSchema,style:{position:"relative"}},a("igl-date-range",{key:"6a27da27ac5a5d80efec41c72bf50ae5f3aecd59",defaultData:{fromDate:n?.format("YYYY-MM-DD")??"",toDate:s?.format("YYYY-MM-DD")??""},variant:"booking",withDateDifference:true,minDate:this.minDate,maxDate:this.maxDate,onDateRangeChange:this.handleDateRangeChange.bind(this)})),!this.bookingEditorService.isEventType("EDIT_BOOKING")&&a(o,{key:"a76b2ad7915c7ece42c8eaa41f2b0931284f05af"},a("ir-validator",{key:"d6c5654c80cb1378f777e16d7ce889fa16b68d99",value:t,schema:this.adultsSchema},a("wa-select",{key:"f63d2428c6c7ce3795b1a6a38e7aeab2ed25ab00",class:"booking-editor-header__adults-select",size:"small",placeholder:M.entries.Lcz_AdultsCaption,value:t?.toString(),defaultValue:t?.toString(),"onwa-hide":this.stopEvent.bind(this),onchange:this.handleAdultsChange.bind(this)},Array.from({length:S.property.adult_child_constraints.adult_max_nbr},((e,t)=>t+1)).map((e=>a("wa-option",{value:e.toString()},e))))),S.property.adult_child_constraints.child_max_nbr>0&&a("wa-select",{key:"57344d4e882cdc1d050ff4259f6585512e6ea030",class:"booking-editor-header__children-select",size:"small",placeholder:this.childrenSelectPlaceholder,value:r?.toString(),defaultValue:r?.toString(),"onwa-hide":this.stopEvent.bind(this),onchange:this.handleChildrenChange.bind(this)},Array.from({length:S.property.adult_child_constraints.child_max_nbr},((e,t)=>t+1)).map((e=>a("wa-option",{value:e.toString()},e))))),a("ir-custom-button",{key:"93fd5b7c41be212eb104c2d113cd36649cc5f864",loading:Ce("/Check_Availability"),type:"submit",variant:"brand"},"Check")),l.roomTypes?.length>0&&a("wa-callout",{key:"df1074c636484b96805722766a58757917cb7ff0",size:"small",variant:"neutral",appearance:"filled",class:"booking-editor-header__tax_statement"},S.tax_statement)))}static get watchers(){return{booking:["handleBookingChange"],mode:["handleModeChange"]}}};wi.style=bi;const mi=".sc-ir-booking-extra-note-h{display:block}";const vi=mi;const yi=class{constructor(a){e(this,a);this.closeModal=t(this,"closeModal",7);this.resetBookingEvt=t(this,"resetBookingEvt",7)}open;booking;isLoading=false;note="";closeModal;resetBookingEvt;bookingService=new s;componentWillLoad(){if(this.booking.extras){this.setNote(we(this.booking.extras))}}setNote(e){this.note=e}async savePrivateNote(){try{this.isLoading=true;let e=this.booking.extras||[];const t={key:"private_note",value:this.note};if(e.length===0){e.push(t)}else{const a=e.findIndex((e=>e.key==="private_note"));if(a===-1){e.push(t)}else{e[a]=t}}const a=await this.bookingService.doReservation({assign_units:true,is_pms:true,is_direct:true,is_in_loyalty_mode:false,promo_key:null,booking:this.booking,Is_Non_Technical_Change:true,extras:e});this.resetBookingEvt.emit(a);this.closeDialog()}catch(e){console.error(e)}finally{this.isLoading=false}}async openDialog(){this.open=true}async closeDialog(){this.open=false}render(){return a("ir-dialog",{key:"3c426e7ddacfd8f28775f833a62b38a78735e292",label:"Private note",open:this.open,onIrDialogHide:()=>{this.open=false}},a("wa-textarea",{key:"a4f8606a24753879fcc35aad481900668ab57647",size:"small",placeholder:M.entries.Lcz_PrivateNote_MaxChar,defaultValue:this.note,onchange:e=>this.setNote(e.target.value),value:this.note}),a("div",{key:"6e5c235175e65238a5ace732bad406aed469cbbe",slot:"footer",class:"ir-dialog__footer"},a("ir-custom-button",{key:"d2eeb1f617b7a16f98933325d492bb977099b6dd","data-dialog":"close",size:"medium",variant:"neutral",appearance:"filled",onClickHandler:()=>this.closeModal.emit(null),class:`flex-fill'}`},M.entries.Lcz_Cancel),a("ir-custom-button",{key:"97503df2c182a9d30ee2b8447a2b6895fe1d9b3b",size:"medium",onClickHandler:()=>this.savePrivateNote(),variant:"brand",loading:this.isLoading},M.entries.Lcz_Save)))}};yi.style=vi;const ki=".sc-ir-booking-guarantee-h{display:block}.sc-ir-booking-guarantee-h{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important}.sc-ir-booking-guarantee-h *.sc-ir-booking-guarantee{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important}.iframeHeight.sc-ir-booking-guarantee{height:max-content;height:22.5rem}";const _i=ki;const xi=class{constructor(t){e(this,t)}booking;bookingService;collapsed=false;paymentDetailsUrl="";paymentExceptionMessage="";async componentWillLoad(){}formatCurrency(e,t,a="en-US"){if(!t||e<0){return""}return new Intl.NumberFormat(a,{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}checkPaymentCode(e){return S.allowed_payment_methods?.find((t=>t.code===e))?.description??null}getPaymentMethod(){let e=null;const t=this.booking?.extras?.find((e=>e.key==="payment_code"));if(this.booking.agent){const a=this.booking?.extras?.find((e=>e.key==="agent_payment_mode"));if(a){e=a.value==="001"?M.entries.Lcz_OnCredit:t?this.checkPaymentCode(t.value):null}}else if(t){e=t.value==="000"?"No card info required upon booking":this.checkPaymentCode(t.value)}return e}async handleToggleCollapse(){if(!this.booking.is_direct&&this.booking.channel_booking_nbr&&!this.booking.guest.cci&&!this.collapsed){this.paymentDetailsUrl=await this.bookingService.getPCICardInfoURL(this.booking.booking_nbr)}this.collapsed=!this.collapsed}shouldShowGuarantee(){const e=this.booking.is_direct?this.getPaymentMethod():null;return this.booking.is_direct?Boolean(e||this.booking.guest.cci):true}shouldShowToggleButton(){return!this.booking.is_direct&&this.booking.ota_guarante||this.booking.is_direct&&this.booking.guest.cci}renderCreditCardInfo(){const{cci:e}=this.booking.guest;if(!e)return null;return[a("div",null,e&&"Card:"," ",a("span",null,e.nbr||""),e.expiry_month&&" Expiry: ",a("span",null,e.expiry_month||"",e.expiry_year&&"/"+e.expiry_year)),a("div",null,e.holder_name&&"Name:"," ",a("span",null,e.holder_name||""),e.cvc&&" - CVC:"," ",a("span",null,e.cvc||""))]}renderCollapsedContent(){if(this.booking.guest.cci){return this.renderCreditCardInfo()}if(this.paymentDetailsUrl){return a("iframe",{src:this.paymentDetailsUrl,width:"100%",class:"iframeHeight",frameborder:"0",name:"payment"})}return a("div",{class:"text-center"},this.paymentExceptionMessage)}renderOtaGuarantee(){const{ota_guarante:e}=this.booking;if(!e||this.booking.is_direct)return null;return a("div",null,a("ir-label",{content:e.card_type+`${e.is_virtual?" (virtual)":""}`,labelText:`${M.entries.Lcz_CardType}:`}),a("ir-label",{content:e.cardholder_name,labelText:`${M.entries.Lcz_CardHolderName}:`}),a("ir-label",{content:e.card_number,labelText:`${M.entries.Lcz_CardNumber}:`}),a("ir-label",{content:this.formatCurrency(G(Number(e.meta?.virtual_card_current_balance),Number(e.meta?.virtual_card_decimal_places)),e.meta?.virtual_card_currency_code),labelText:`${M.entries.Lcz_CardBalance}:`}))}render(){if(!this.shouldShowGuarantee()){return null}const e=this.booking.is_direct?this.getPaymentMethod():null;return a("div",{class:"mb-1"},a("div",{class:"d-flex align-items-center"},a("span",{class:"mr-1 font-medium"},M.entries.Lcz_BookingGuarantee,e&&a("span",null,": ",e)),this.shouldShowToggleButton()&&a("ir-button",{id:"drawer-icon","data-toggle":"collapse","data-target":".guarrantee","aria-expanded":this.collapsed?"true":"false","aria-controls":"myCollapse",class:"sm-padding-right pointer",variant:"icon",icon_name:"credit_card",onClickHandler:this.handleToggleCollapse.bind(this)})),a("div",{class:"collapse guarrantee"},this.renderCollapsedContent()),this.renderOtaGuarantee())}};xi.style=_i;const Di=".sc-ir-booking-header-h{display:block}.confirmed.sc-ir-booking-header{color:#fff;display:flex;align-items:center}.bg-ir-green.sc-ir-booking-header{background:#629a4c;padding:0.2rem 0.3rem}.bg-ir-red.sc-ir-booking-header{background:#ff4961;padding:0.2rem 0.3rem}.bg-ir-orange.sc-ir-booking-header{background:#ff9149;padding:0.2rem 0.3rem}";const Ci=Di;const Mi=class{constructor(a){e(this,a);this.toast=t(this,"toast",7);this.closeSidebar=t(this,"closeSidebar",7);this.resetBookingEvt=t(this,"resetBookingEvt",7);this.openSidebar=t(this,"openSidebar",7)}booking;hasReceipt;hasPrint;hasDelete;hasMenu;hasCloseButton;hasEmail=true;bookingStatus=null;currentDialogStatus;toast;closeSidebar;resetBookingEvt;openSidebar;dialogRef;bookingService=new s;alertMessage=`ALERT! Modifying an OTA booking will create a discrepancy between igloorooms and the source. Future guest modifications on the OTA may require manual adjustmentsÂ ofÂ theÂ booking.`;modalEl;handleSelectChange(e){e.stopPropagation();e.stopImmediatePropagation();const t=e.target;this.bookingStatus=t.selectedValue}async updateStatus(){if(!this.bookingStatus||this.bookingStatus==="-1"){this.toast.emit({type:"error",description:"",title:M.entries.Lcz_SelectStatus,position:"top-right"});return}try{await this.bookingService.changeExposedBookingStatus({book_nbr:this.booking.booking_nbr,status:this.bookingStatus});this.toast.emit({type:"success",description:"",title:M.entries.Lcz_StatusUpdatedSuccessfully,position:"top-right"});this.bookingStatus=null;this.modalEl.closeModal();this.resetBookingEvt.emit(null)}catch(e){console.log(e)}}openDialog(e){const{type:t}=e;this.currentDialogStatus=t;this.dialogRef.openModal()}renderDialogBody(){switch(this.currentDialogStatus){case"pms":return a("ir-pms-logs",{bookingNumber:this.booking.booking_nbr});case"events-log":return a("ir-events-log",{booking:this.booking,bookingNumber:this.booking.booking_nbr})}}render(){const e=this.booking.ota_manipulations?this.booking.ota_manipulations[this.booking.ota_manipulations.length-1]:null;const t=S.property?.linked_pms?.findIndex((e=>e?.is_active&&e?.bookings_integration_mode?.code==="001"))!==-1;return a("div",{key:"dd53c248ae133203a0a710257d976b3266a7d128",class:"fluid-container px-1"},a("div",{key:"c77aaba9c541afdc408e6c302f12c35b5f9ffeb9",class:"d-flex flex-column p-0 mx-0 flex-lg-row align-items-md-center justify-content-between"},a("div",{key:"966a74143b0d67efbe654c96e7f798c5b7c6b027",class:"m-0 p-0 mb-1 mb-lg-0 mt-md-0"},a("div",{key:"18dfa06358e24250fd80ff642f1de2781da42f0e",class:"d-flex align-items-center",style:{gap:"0.5rem"}},a("p",{key:"b2129d01ce3e6af15728f28a6b0dc7ddd2817872",style:{color:"black"},class:"font-size-large m-0 p-0"},`${M.entries.Lcz_Booking}#${this.booking.booking_nbr}`),a("wa-dropdown",{key:"b956c888d6c9402d755cfcc4b31506250063261f","onwa-hide":e=>{e.stopImmediatePropagation();e.stopPropagation()},"onwa-select":e=>{this.bookingStatus=e.detail.item.value;this.modalEl.openModal()}},a("ir-custom-button",{key:"632f8cec750f12134f25fd7735f5c635e98bf528",slot:"trigger",withCaret:true,appearance:"outlined",size:"small",variant:"brand"},a("ir-booking-status-tag",{key:"84edc1418d36e46fc11d4a5e0f32600e468b5f0f",slot:"start",status:this.booking.status,isRequestToCancel:this.booking.is_requested_to_cancel}),a("span",{key:"8bde56c4b732df51e2eea0e3a4b44c32edb21529"},"Update status")),this.booking.allowed_actions.map((e=>a("wa-dropdown-item",{variant:["CANC_RA","NOSHOW_RA"].includes(e.code)?"danger":"default",value:e.code},e.description))))),a("p",{key:"54b0309cb68f57d593fa0ac2c5ed9d6ca5b8476a",class:"m-0 p-0"},!this.booking.is_direct&&a("span",{key:"d030241fb18024bf6853be04ea6763bf4ded345f",class:"mr-1 m-0"},this.booking.channel_booking_nbr))),a("div",{key:"fc83bd200d2dccdb7aec2755e5e3d5f2e91aabd1",class:"d-flex justify-content-end align-items-center",style:{gap:"1rem",flexWrap:"wrap"}},a("div",{key:"e35bee4853322962d7c9405d7756de8e4197f8da",class:"d-flex flex-column align-items-center"},e&&a("ir-popover",{key:"8af31e41dac2bfbecbcb720fcc9969e902a1f9ef",trigger:"hover",renderContentAsHtml:true,content:`<div><p>Modified by ${e.user} at ${e.date} ${e.hour}:${e.minute}.</p>\n                <p>${this.alertMessage}</p></div>`},a("p",{key:"64cd21585a45e607403e6397fe81c5309047962e",class:"mx-0 p-0 small text-danger",style:{marginTop:"0.25rem",marginBottom:"0"}},a("b",{key:"c1c8b5e049ca0be76ea6df82cde3d4bbc263b25e"},"Modified")))),this.booking.allowed_actions.length>0&&this.booking.is_editable&&a("div",{key:"70292186b7fbb9f335494eaf4d37d71ad998b98c",class:"m-0 p-0 d-flex align-items-center",style:{gap:"0.25rem"}}),a("ir-custom-button",{key:"eeadc3d0885f883049310cfde9b9ab65cba32ea9",onClickHandler:e=>{e.stopImmediatePropagation();e.stopPropagation();this.openDialog({type:"events-log"})},appearance:"outlined",size:"small",variant:"brand"},"Events log"),t&&a("ir-custom-button",{key:"4ec7c50cb3f6cc365fa8c7f318388f66358f5888",onClickHandler:e=>{e.stopImmediatePropagation();e.stopPropagation();this.openDialog({type:"pms"})},appearance:"outlined",size:"small",variant:"brand"},"PMS"),this.hasReceipt&&a(o,{key:"7bbf704383ad9ad7a1bded8948d703c1de7a0b05"},a("ir-custom-button",{key:"9fe51513870b9b1a0291bc64a1b44209ddc79b43",id:"invoice",variant:"brand",size:"small",appearance:"outlined"},"Billing")),this.hasPrint&&a(o,{key:"24facac95d14d3ea413e917fab9ed692ae89f4ba"},a("wa-tooltip",{key:"f745215620ce41a277fcebffcb8251994bf0b535",for:"print"},"Print booking"),a("ir-custom-button",{key:"2b3d3f9152c73a98de40f1ff1d0c81fb688ab681",id:"print",variant:"brand",size:"small",appearance:"outlined"},a("wa-icon",{key:"84c9cd36a72bdef3da468777b1aa00670c425690",label:"Print",name:"print",style:{fontSize:"1.2rem"}}))),this.hasEmail&&a(o,{key:"39eae266ea748f03f5287c0ee84882fb67841d44"},a("wa-tooltip",{key:"2cbc4ebf1c48438333734e3d085c67a6f2249095",for:"email"},"Email this booking to guest"),a("ir-custom-button",{key:"a76b05747e2334d632ade2701f56e8676d8fcecc",id:"email",variant:"brand",size:"small",appearance:"outlined"},a("wa-icon",{key:"cb7762573324ca97a8a9b5e87bb05e112eb5c5ab",name:"envelope",style:{fontSize:"1.2rem"},label:"Email this booking"}))),this.hasDelete&&a(o,{key:"52a2d6546a845918c2252b2533fa958bc8f45f9e"},a("wa-tooltip",{key:"1ddbd25b31e4a125add63cd31ee3e2edca2976c4",for:"book-delete"},"Delete this booking"),a("ir-custom-button",{key:"c7fe4237137d4ee1e524412a831593785424baca",id:"book-delete",variant:"danger",size:"small",appearance:"plain"},a("wa-icon",{key:"9a08b07975dc58e55c79d07612414620e8aa9696",name:"envelope",style:{fontSize:"1.2rem"},label:"Delete this booking"}))),this.hasMenu&&a(o,{key:"eac9e1d443856db0651071b888d1e279d1d8d4fa"},a("wa-tooltip",{key:"482f980b3f97984c66d124ac7238f4267f7f2e46",for:"menu"},"Go back"),a("ir-custom-button",{key:"4447fd3e3d965ebdb427ab7ff02c7f3836d0dfc8",id:"menu",variant:"neutral",size:"small",appearance:"plain"},a("wa-icon",{key:"81f5d3455f22e82c232f3386f111efedccf40dd0",name:"list",style:{fontSize:"1.2rem"},label:"Go back"}))),this.hasCloseButton&&a("ir-custom-button",{key:"0b265c59c39c979e297cd1e75544697eeb86277d",onClickHandler:e=>{e.stopPropagation();e.stopImmediatePropagation();this.closeSidebar.emit(null)},id:"close",variant:"neutral",size:"small",appearance:"plain"},a("wa-icon",{key:"82d119bb8613912836712ac5188d858d530b6553",name:"xmark",style:{fontSize:"1.2rem"},label:"Go back"})))),a("ir-dialog",{key:"0504fb7e1551b86a59731ba48c6dc1ce9edb97f4",onIrDialogHide:e=>{this.currentDialogStatus=null},label:this.currentDialogStatus==="pms"?M.entries.Lcz_PMS_Logs:M.entries.Lcz_EventsLog,style:this.currentDialogStatus==="events-log"&&{"--ir-dialog-max-width":"max-content"},ref:e=>this.dialogRef=e},this.renderDialogBody()),a("ir-dialog",{key:"2ebf6de6409c063e6c057b5023d6cc579b6e6ff1",ref:e=>this.modalEl=e,label:"Alert",lightDismiss:false,onIrDialogHide:e=>{e.stopImmediatePropagation();e.stopPropagation()},onIrDialogAfterHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.bookingStatus=null}},a("p",{key:"09cffcdacf05929cad6eb34e15def21cc519f5bc"},this.booking.is_direct?"Are you sure you want to update this booking status?":M.entries.Lcz_OTA_Modification_Alter),a("div",{key:"090292bd530d234d6453bce88b1305bfeabaf4de",class:"ir-dialog__footer",slot:"footer"},a("ir-custom-button",{key:"ce9811838bef0ce2e02410845eee3643526f6e32","data-dialog":"close",size:"medium",appearance:"filled",variant:"neutral"},M?.entries?.Lcz_Cancel),a("ir-custom-button",{key:"9eca557684978577832ad5477198dd3aeb8cef42",onClickHandler:e=>{e.stopImmediatePropagation();e.stopPropagation();this.updateStatus()},size:"medium",variant:"brand",loading:Ce("/Change_Exposed_Booking_Status")},M?.entries?.Lcz_Confirm))))}};Mi.style=Ci;const Yi=".sc-ir-booking-status-tag-h{display:block}";const Si=Yi;const Ei=class{constructor(t){e(this,t)}status;isRequestToCancel;badgeVariant={"001":"warning","002":"success","003":"danger","004":"danger"};render(){return a("wa-badge",{key:"f0f3a84cfd8bc4af98d8dd478f53c8e54a60424e",style:{padding:"0.375em 0.625em",letterSpacing:"0.03rem"},variant:this.badgeVariant[this.isRequestToCancel?"003":this.status.code]},this.status.description.toUpperCase())}};Ei.style=Si;const Ii=".sc-ir-button-h{--icon-button-color:#6b6f82;--icon-button-hover-color:#104064}.button-icon.sc-ir-button{padding:0;margin-top:0}.button-icon[data-state='loading'].sc-ir-button{display:none}.button-text.sc-ir-button{padding:0 5px}.bounce-3.sc-ir-button{animation:bounce 1s 1}.btn-link.sc-ir-button{color:var(--blue, #1e9ff2)}.ir-button-class.sc-ir-button{display:inline-flex !important;justify-content:center;align-items:center;box-sizing:border-box}.btn-outline.sc-ir-button{background:transparent;border:1px solid #104064;color:#104064}.btn-outline.sc-ir-button:hover,.btn-outline.sc-ir-button:active{background:#104064;color:white}.icon-button.sc-ir-button{all:unset;box-sizing:border-box;border-radius:0.25rem;display:inline-flex;align-items:center;justify-content:center;color:var(--icon-button-color);padding:0.2rem;transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.icon-button.sc-ir-button:hover{color:var(--icon-button-hover-color)}.icon-button.sc-ir-button:hover.hovered_bg{background:var('--ir-icon-bg-hover', #f6f6f6)}.icon-button.sc-ir-button:disabled{pointer-events:none}.icon-loader.sc-ir-button{margin:0;padding:0;width:var(--icon-size, 1.25rem);height:var(--icon-size, 1.25rem);border-radius:50%;background:radial-gradient(farthest-side, var(--icon-button-color) 94%, #0000) top/2px 2px no-repeat, conic-gradient(#0000 30%, var(--icon-button-color));-webkit-mask:radial-gradient(farthest-side, #0000 calc(100% - 2px), var(--icon-button-color) 0);mask:radial-gradient(farthest-side, #0000 calc(100% - 2px), var(--icon-button-color) 0);animation:l13 1s infinite linear}.btn_loader.sc-ir-button{width:15px;height:10px;--c:no-repeat linear-gradient(#ffffff 0 0);background:var(--c) 0% 50%, var(--c) 50% 50%, var(--c) 100% 50%;background-size:20% 100%;animation:l1 1s infinite linear}@keyframes l13{100%{transform:rotate(1turn)}}@keyframes l1{0%{background-size:20% 100%, 20% 100%, 20% 100%}33%{background-size:20% 10%, 20% 100%, 20% 100%}50%{background-size:20% 100%, 20% 10%, 20% 100%}66%{background-size:20% 100%, 20% 100%, 20% 10%}100%{background-size:20% 100%, 20% 100%, 20% 100%}}@keyframes bounce{0%,100%{transform:scale(1);animation-timing-function:cubic-bezier(0.8, 0, 1, 1)}50%{transform:scale(1.2);animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}}@keyframes ping{75%,100%{transform:scale(1.2)}}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const Ti=Ii;const Oi=class{constructor(a){e(this,a);this.clickHandler=t(this,"clickHandler",7)}name;text;btn_color="primary";size="md";textSize="md";btn_block=true;btn_disabled=false;btn_type="button";isLoading=false;btn_styles;btn_id=ae();variant="default";icon_name;visibleBackgroundOnHover=false;iconPosition="left";icon_style;btnStyle;labelStyle;renderContentAsHtml=false;clickHandler;buttonEl;handleButtonAnimation(e){if(!this.buttonEl||e.detail!==this.btn_id){return}e.stopImmediatePropagation();e.stopPropagation();this.buttonEl.classList.remove("bounce-3");this.buttonEl.classList.add("bounce-3")}async bounce(){this.buttonEl.classList.remove("bounce-3");this.buttonEl.classList.add("bounce-3")}render(){const e=this.btn_disabled||this.isLoading;if(this.variant==="icon"){return a("button",{id:this.btn_id,class:`icon-button ${this.btn_styles} ${this.visibleBackgroundOnHover?"hovered_bg":""}`,ref:e=>this.buttonEl=e,onClick:()=>this.clickHandler.emit(),type:this.btn_type,disabled:e},this.isLoading?a("span",{class:"icon-loader"}):a("ir-icons",{class:"m-0 p-0",name:this.icon_name}))}let t=this.btn_block?"btn-block":"";return a("button",{id:this.btn_id,ref:e=>this.buttonEl=e,onClick:()=>this.clickHandler.emit(),class:`btn btn-${this.btn_color} ${this.btn_styles} ir-button-class  btn-${this.size} text-${this.textSize} ${t}`,type:this.btn_type,style:this.btnStyle,disabled:e},this.icon_name&&this.iconPosition==="left"&&a("ir-icons",{name:this.icon_name,style:this.icon_style}),this.text&&(this.renderContentAsHtml?a("span",{class:"button-text m-0",innerHTML:this.text,style:this.labelStyle}):a("span",{style:this.labelStyle,class:"button-text m-0"},this.text)),this.isLoading?a("div",{class:"btn_loader m-0 p-0"}):this.iconPosition==="right"&&a("ir-icons",{style:this.icon_style,name:this.icon_name}))}};Oi.style=Ti;const zi=".ir-dialog__footer{display:flex;align-items:center;gap:0.5rem;justify-content:flex-end;width:100%}.dialog__loader-container{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;width:100%;min-height:50px;min-width:31rem}:host{display:block}";const Ai=zi;const Bi=class{constructor(a){e(this,a);this.checkoutDialogClosed=t(this,"checkoutDialogClosed",7)}open;booking;identifier;isLoading="page";buttons=new Set;invoiceInfo;room;checkoutDialogClosed;bookingService=new s;async checkoutRoom({e,source:t}){try{e.stopImmediatePropagation();e.stopPropagation();this.isLoading=t;await this.bookingService.handleExposedRoomInOut({booking_nbr:this.booking.booking_nbr,room_identifier:this.identifier,status:"002"});this.isLoading=null;this.checkoutDialogClosed.emit({reason:t==="checkout&invoice"?"openInvoice":"checkout"})}catch(e){console.error(e)}}handleOpenChange(e,t){if(e!==t){this.init()}}async init(){if(!this.open){return}try{this.isLoading="page";this.invoiceInfo=await this.bookingService.getBookingInvoiceInfo({booking_nbr:this.booking.booking_nbr});this.setupButtons();this.room=this.booking.rooms.find((e=>e.identifier===this.identifier))}catch(e){}finally{this.isLoading=null}}setupButtons(){const e=this.invoiceInfo.invoiceable_items.filter((e=>e.type==="BSA"&&e.reason?.code!=="001"));const t=e.length===0;if(t){this.buttons.add("checkout");return}this.buttons.add("invoice_checkout");if(e.length>1){this.buttons.add("checkout_without_invoice")}}render(){return a("ir-dialog",{key:"dc8cfc2ff6bfba37c05c726f5da8b35416441dd0",open:this.open,label:"Alert",style:{"--ir-dialog-width":"fit-content"},onIrDialogHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.buttons.clear();this.checkoutDialogClosed.emit({reason:"cancel"})}},this.isLoading==="page"?a("div",{class:"dialog__loader-container"},a("ir-spinner",null)):a("p",{style:{width:"calc(31rem - var(--spacing))"}},"Are you sure you want to check out unit ",this.room?.unit?.name,"?"),a("div",{key:"5f9162c2e29f0884848d91ed3ede41c1c33afd61",slot:"footer",class:"ir-dialog__footer"},a(o,{key:"160a7bf506e54f872e1a3f009c94a44fe91a837f"},a("ir-custom-button",{key:"96fdc91646451e411d03de719141188197291b83",size:"medium","data-dialog":"close",appearance:"filled",variant:"neutral"},M?.entries?.Lcz_Cancel??"Cancel"),this.buttons.has("checkout")&&a("ir-custom-button",{key:"810c03fdb56dfd3e6e7800b16b85fde8905b047a",size:"medium",onClickHandler:e=>this.checkoutRoom({e,source:"checkout"}),variant:"brand",loading:this.isLoading==="checkout"},"Checkout"),this.buttons.has("checkout_without_invoice")&&a("ir-custom-button",{key:"e68a3a3c0498b19e535e209c608db49ee73a53ab",loading:this.isLoading==="skipCheckout",size:"medium",onClickHandler:e=>this.checkoutRoom({e,source:"skipCheckout"}),variant:"brand",appearance:this.buttons.has("invoice_checkout")?"outlined":"accent"},"Checkout without invoice"),this.buttons.has("invoice_checkout")&&a("ir-custom-button",{key:"25959e041399e0fed9d661595729206ff121179a",size:"medium",loading:this.isLoading==="checkout&invoice",onClickHandler:e=>{this.checkoutRoom({e,source:"checkout&invoice"})},variant:"brand",appearance:"accent"},"Checkout & invoice"))))}static get watchers(){return{open:["handleOpenChange"]}}};Bi.style=Ai;const Ri=[{isCSS:true,link:"https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i%7CQuicksand:300,400,500,700"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/bootstrap.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/bootstrap-extended.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/colors.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/core/menu/menu-types/horizontal-menu.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/core/colors/palette-gradient.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/components.css"},{isCSS:true,link:"https://x.igloorooms.com/assets/css/style.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/icheck.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/custom.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/pages/login-register.css"}];const Ni="/* Web Awesome core styles */\n/* @import url('../assets/webawesome/themes/webawesome.css'); */\n/* Generates --wa-color-{hue}-on tokens for pairing with any palette's key colors */\n:where(:root),\n:host {\n  /**\n    * Conditional tokens to check if the key color is >= 60\n    * Key colors are the most colorful tint in a scale, recorded as --wa-color-{hue} in each palette\n    * The numeric value of the key is isolated as --wa-color-{hue}-key\n    * If key < 60, the result is 0%\n    * If key >= 60, the result is 100%\n    * Intended to be used in the color-mix() functions below\n    */\n\n  --wa-color-red-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-red-key), 1) * 100%));\n  --wa-color-orange-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-orange-key), 1) * 100%));\n  --wa-color-yellow-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-yellow-key), 1) * 100%));\n  --wa-color-green-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-green-key), 1) * 100%));\n  --wa-color-cyan-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-cyan-key), 1) * 100%));\n  --wa-color-blue-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-blue-key), 1) * 100%));\n  --wa-color-indigo-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-indigo-key), 1) * 100%));\n  --wa-color-purple-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-purple-key), 1) * 100%));\n  --wa-color-pink-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-pink-key), 1) * 100%));\n  --wa-color-gray-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-gray-key), 1) * 100%));\n\n  /**\n    * Tokens to set text color with appropriate WCAG 2.1 contrast\n    * If key < 60, the text color is white\n    * If key >= 60, the text color is {hue}-10\n    */\n\n  --wa-color-red-on: color-mix(in oklab, var(--wa-color-red-10) var(--wa-color-red-gte-60), white);\n  --wa-color-orange-on: color-mix(in oklab, var(--wa-color-orange-10) var(--wa-color-orange-gte-60), white);\n  --wa-color-yellow-on: color-mix(in oklab, var(--wa-color-yellow-10) var(--wa-color-yellow-gte-60), white);\n  --wa-color-green-on: color-mix(in oklab, var(--wa-color-green-10) var(--wa-color-green-gte-60), white);\n  --wa-color-cyan-on: color-mix(in oklab, var(--wa-color-cyan-10) var(--wa-color-cyan-gte-60), white);\n  --wa-color-blue-on: color-mix(in oklab, var(--wa-color-blue-10) var(--wa-color-blue-gte-60), white);\n  --wa-color-indigo-on: color-mix(in oklab, var(--wa-color-indigo-10) var(--wa-color-indigo-gte-60), white);\n  --wa-color-purple-on: color-mix(in oklab, var(--wa-color-purple-10) var(--wa-color-purple-gte-60), white);\n  --wa-color-pink-on: color-mix(in oklab, var(--wa-color-pink-10) var(--wa-color-pink-gte-60), white);\n  --wa-color-gray-on: color-mix(in oklab, var(--wa-color-gray-10) var(--wa-color-gray-gte-60), white);\n}\n\n@layer wa-color-variant {\n  :where(:root), /* default */\n  .wa-brand-blue {\n    --wa-color-brand-95: var(--wa-color-blue-95);\n    --wa-color-brand-90: var(--wa-color-blue-90);\n    --wa-color-brand-80: var(--wa-color-blue-80);\n    --wa-color-brand-70: var(--wa-color-blue-70);\n    --wa-color-brand-60: var(--wa-color-blue-60);\n    --wa-color-brand-50: var(--wa-color-blue-50);\n    --wa-color-brand-40: var(--wa-color-blue-40);\n    --wa-color-brand-30: var(--wa-color-blue-30);\n    --wa-color-brand-20: var(--wa-color-blue-20);\n    --wa-color-brand-10: var(--wa-color-blue-10);\n    --wa-color-brand-05: var(--wa-color-blue-05);\n    --wa-color-brand: var(--wa-color-blue);\n    --wa-color-brand-on: var(--wa-color-blue-on);\n  }\n\n  .wa-brand-red {\n    --wa-color-brand-95: var(--wa-color-red-95);\n    --wa-color-brand-90: var(--wa-color-red-90);\n    --wa-color-brand-80: var(--wa-color-red-80);\n    --wa-color-brand-70: var(--wa-color-red-70);\n    --wa-color-brand-60: var(--wa-color-red-60);\n    --wa-color-brand-50: var(--wa-color-red-50);\n    --wa-color-brand-40: var(--wa-color-red-40);\n    --wa-color-brand-30: var(--wa-color-red-30);\n    --wa-color-brand-20: var(--wa-color-red-20);\n    --wa-color-brand-10: var(--wa-color-red-10);\n    --wa-color-brand-05: var(--wa-color-red-05);\n    --wa-color-brand: var(--wa-color-red);\n    --wa-color-brand-on: var(--wa-color-red-on);\n  }\n\n  .wa-brand-orange {\n    --wa-color-brand-95: var(--wa-color-orange-95);\n    --wa-color-brand-90: var(--wa-color-orange-90);\n    --wa-color-brand-80: var(--wa-color-orange-80);\n    --wa-color-brand-70: var(--wa-color-orange-70);\n    --wa-color-brand-60: var(--wa-color-orange-60);\n    --wa-color-brand-50: var(--wa-color-orange-50);\n    --wa-color-brand-40: var(--wa-color-orange-40);\n    --wa-color-brand-30: var(--wa-color-orange-30);\n    --wa-color-brand-20: var(--wa-color-orange-20);\n    --wa-color-brand-10: var(--wa-color-orange-10);\n    --wa-color-brand-05: var(--wa-color-orange-05);\n    --wa-color-brand: var(--wa-color-orange);\n    --wa-color-brand-on: var(--wa-color-orange-on);\n  }\n\n  .wa-brand-yellow {\n    --wa-color-brand-95: var(--wa-color-yellow-95);\n    --wa-color-brand-90: var(--wa-color-yellow-90);\n    --wa-color-brand-80: var(--wa-color-yellow-80);\n    --wa-color-brand-70: var(--wa-color-yellow-70);\n    --wa-color-brand-60: var(--wa-color-yellow-60);\n    --wa-color-brand-50: var(--wa-color-yellow-50);\n    --wa-color-brand-40: var(--wa-color-yellow-40);\n    --wa-color-brand-30: var(--wa-color-yellow-30);\n    --wa-color-brand-20: var(--wa-color-yellow-20);\n    --wa-color-brand-10: var(--wa-color-yellow-10);\n    --wa-color-brand-05: var(--wa-color-yellow-05);\n    --wa-color-brand: var(--wa-color-yellow);\n    --wa-color-brand-on: var(--wa-color-yellow-on);\n  }\n\n  .wa-brand-green {\n    --wa-color-brand-95: var(--wa-color-green-95);\n    --wa-color-brand-90: var(--wa-color-green-90);\n    --wa-color-brand-80: var(--wa-color-green-80);\n    --wa-color-brand-70: var(--wa-color-green-70);\n    --wa-color-brand-60: var(--wa-color-green-60);\n    --wa-color-brand-50: var(--wa-color-green-50);\n    --wa-color-brand-40: var(--wa-color-green-40);\n    --wa-color-brand-30: var(--wa-color-green-30);\n    --wa-color-brand-20: var(--wa-color-green-20);\n    --wa-color-brand-10: var(--wa-color-green-10);\n    --wa-color-brand-05: var(--wa-color-green-05);\n    --wa-color-brand: var(--wa-color-green);\n    --wa-color-brand-on: var(--wa-color-green-on);\n  }\n\n  .wa-brand-cyan {\n    --wa-color-brand-95: var(--wa-color-cyan-95);\n    --wa-color-brand-90: var(--wa-color-cyan-90);\n    --wa-color-brand-80: var(--wa-color-cyan-80);\n    --wa-color-brand-70: var(--wa-color-cyan-70);\n    --wa-color-brand-60: var(--wa-color-cyan-60);\n    --wa-color-brand-50: var(--wa-color-cyan-50);\n    --wa-color-brand-40: var(--wa-color-cyan-40);\n    --wa-color-brand-30: var(--wa-color-cyan-30);\n    --wa-color-brand-20: var(--wa-color-cyan-20);\n    --wa-color-brand-10: var(--wa-color-cyan-10);\n    --wa-color-brand-05: var(--wa-color-cyan-05);\n    --wa-color-brand: var(--wa-color-cyan);\n    --wa-color-brand-on: var(--wa-color-cyan-on);\n  }\n\n  .wa-brand-indigo {\n    --wa-color-brand-95: var(--wa-color-indigo-95);\n    --wa-color-brand-90: var(--wa-color-indigo-90);\n    --wa-color-brand-80: var(--wa-color-indigo-80);\n    --wa-color-brand-70: var(--wa-color-indigo-70);\n    --wa-color-brand-60: var(--wa-color-indigo-60);\n    --wa-color-brand-50: var(--wa-color-indigo-50);\n    --wa-color-brand-40: var(--wa-color-indigo-40);\n    --wa-color-brand-30: var(--wa-color-indigo-30);\n    --wa-color-brand-20: var(--wa-color-indigo-20);\n    --wa-color-brand-10: var(--wa-color-indigo-10);\n    --wa-color-brand-05: var(--wa-color-indigo-05);\n    --wa-color-brand: var(--wa-color-indigo);\n    --wa-color-brand-on: var(--wa-color-indigo-on);\n  }\n\n  .wa-brand-purple {\n    --wa-color-brand-95: var(--wa-color-purple-95);\n    --wa-color-brand-90: var(--wa-color-purple-90);\n    --wa-color-brand-80: var(--wa-color-purple-80);\n    --wa-color-brand-70: var(--wa-color-purple-70);\n    --wa-color-brand-60: var(--wa-color-purple-60);\n    --wa-color-brand-50: var(--wa-color-purple-50);\n    --wa-color-brand-40: var(--wa-color-purple-40);\n    --wa-color-brand-30: var(--wa-color-purple-30);\n    --wa-color-brand-20: var(--wa-color-purple-20);\n    --wa-color-brand-10: var(--wa-color-purple-10);\n    --wa-color-brand-05: var(--wa-color-purple-05);\n    --wa-color-brand: var(--wa-color-purple);\n    --wa-color-brand-on: var(--wa-color-purple-on);\n  }\n\n  .wa-brand-pink {\n    --wa-color-brand-95: var(--wa-color-pink-95);\n    --wa-color-brand-90: var(--wa-color-pink-90);\n    --wa-color-brand-80: var(--wa-color-pink-80);\n    --wa-color-brand-70: var(--wa-color-pink-70);\n    --wa-color-brand-60: var(--wa-color-pink-60);\n    --wa-color-brand-50: var(--wa-color-pink-50);\n    --wa-color-brand-40: var(--wa-color-pink-40);\n    --wa-color-brand-30: var(--wa-color-pink-30);\n    --wa-color-brand-20: var(--wa-color-pink-20);\n    --wa-color-brand-10: var(--wa-color-pink-10);\n    --wa-color-brand-05: var(--wa-color-pink-05);\n    --wa-color-brand: var(--wa-color-pink);\n    --wa-color-brand-on: var(--wa-color-pink-on);\n  }\n\n  .wa-brand-gray {\n    --wa-color-brand-95: var(--wa-color-gray-95);\n    --wa-color-brand-90: var(--wa-color-gray-90);\n    --wa-color-brand-80: var(--wa-color-gray-80);\n    --wa-color-brand-70: var(--wa-color-gray-70);\n    --wa-color-brand-60: var(--wa-color-gray-60);\n    --wa-color-brand-50: var(--wa-color-gray-50);\n    --wa-color-brand-40: var(--wa-color-gray-40);\n    --wa-color-brand-30: var(--wa-color-gray-30);\n    --wa-color-brand-20: var(--wa-color-gray-20);\n    --wa-color-brand-10: var(--wa-color-gray-10);\n    --wa-color-brand-05: var(--wa-color-gray-05);\n    --wa-color-brand: var(--wa-color-gray);\n    --wa-color-brand-on: var(--wa-color-gray-on);\n  }\n}\n\n@layer wa-color-variant {\n  :where(:root), /* default */\n  .wa-neutral-gray {\n    --wa-color-neutral-95: var(--wa-color-gray-95);\n    --wa-color-neutral-90: var(--wa-color-gray-90);\n    --wa-color-neutral-80: var(--wa-color-gray-80);\n    --wa-color-neutral-70: var(--wa-color-gray-70);\n    --wa-color-neutral-60: var(--wa-color-gray-60);\n    --wa-color-neutral-50: var(--wa-color-gray-50);\n    --wa-color-neutral-40: var(--wa-color-gray-40);\n    --wa-color-neutral-30: var(--wa-color-gray-30);\n    --wa-color-neutral-20: var(--wa-color-gray-20);\n    --wa-color-neutral-10: var(--wa-color-gray-10);\n    --wa-color-neutral-05: var(--wa-color-gray-05);\n    --wa-color-neutral: var(--wa-color-gray);\n    --wa-color-neutral-on: var(--wa-color-gray-on);\n  }\n\n  .wa-neutral-red {\n    --wa-color-neutral-95: var(--wa-color-red-95);\n    --wa-color-neutral-90: var(--wa-color-red-90);\n    --wa-color-neutral-80: var(--wa-color-red-80);\n    --wa-color-neutral-70: var(--wa-color-red-70);\n    --wa-color-neutral-60: var(--wa-color-red-60);\n    --wa-color-neutral-50: var(--wa-color-red-50);\n    --wa-color-neutral-40: var(--wa-color-red-40);\n    --wa-color-neutral-30: var(--wa-color-red-30);\n    --wa-color-neutral-20: var(--wa-color-red-20);\n    --wa-color-neutral-10: var(--wa-color-red-10);\n    --wa-color-neutral-05: var(--wa-color-red-05);\n    --wa-color-neutral: var(--wa-color-red);\n    --wa-color-neutral-on: var(--wa-color-red-on);\n  }\n\n  .wa-neutral-orange {\n    --wa-color-neutral-95: var(--wa-color-orange-95);\n    --wa-color-neutral-90: var(--wa-color-orange-90);\n    --wa-color-neutral-80: var(--wa-color-orange-80);\n    --wa-color-neutral-70: var(--wa-color-orange-70);\n    --wa-color-neutral-60: var(--wa-color-orange-60);\n    --wa-color-neutral-50: var(--wa-color-orange-50);\n    --wa-color-neutral-40: var(--wa-color-orange-40);\n    --wa-color-neutral-30: var(--wa-color-orange-30);\n    --wa-color-neutral-20: var(--wa-color-orange-20);\n    --wa-color-neutral-10: var(--wa-color-orange-10);\n    --wa-color-neutral-05: var(--wa-color-orange-05);\n    --wa-color-neutral: var(--wa-color-orange);\n    --wa-color-neutral-on: var(--wa-color-orange-on);\n  }\n\n  .wa-neutral-yellow {\n    --wa-color-neutral-95: var(--wa-color-yellow-95);\n    --wa-color-neutral-90: var(--wa-color-yellow-90);\n    --wa-color-neutral-80: var(--wa-color-yellow-80);\n    --wa-color-neutral-70: var(--wa-color-yellow-70);\n    --wa-color-neutral-60: var(--wa-color-yellow-60);\n    --wa-color-neutral-50: var(--wa-color-yellow-50);\n    --wa-color-neutral-40: var(--wa-color-yellow-40);\n    --wa-color-neutral-30: var(--wa-color-yellow-30);\n    --wa-color-neutral-20: var(--wa-color-yellow-20);\n    --wa-color-neutral-10: var(--wa-color-yellow-10);\n    --wa-color-neutral-05: var(--wa-color-yellow-05);\n    --wa-color-neutral: var(--wa-color-yellow);\n    --wa-color-neutral-on: var(--wa-color-yellow-on);\n  }\n\n  .wa-neutral-green {\n    --wa-color-neutral-95: var(--wa-color-green-95);\n    --wa-color-neutral-90: var(--wa-color-green-90);\n    --wa-color-neutral-80: var(--wa-color-green-80);\n    --wa-color-neutral-70: var(--wa-color-green-70);\n    --wa-color-neutral-60: var(--wa-color-green-60);\n    --wa-color-neutral-50: var(--wa-color-green-50);\n    --wa-color-neutral-40: var(--wa-color-green-40);\n    --wa-color-neutral-30: var(--wa-color-green-30);\n    --wa-color-neutral-20: var(--wa-color-green-20);\n    --wa-color-neutral-10: var(--wa-color-green-10);\n    --wa-color-neutral-05: var(--wa-color-green-05);\n    --wa-color-neutral: var(--wa-color-green);\n    --wa-color-neutral-on: var(--wa-color-green-on);\n  }\n\n  .wa-neutral-cyan {\n    --wa-color-neutral-95: var(--wa-color-cyan-95);\n    --wa-color-neutral-90: var(--wa-color-cyan-90);\n    --wa-color-neutral-80: var(--wa-color-cyan-80);\n    --wa-color-neutral-70: var(--wa-color-cyan-70);\n    --wa-color-neutral-60: var(--wa-color-cyan-60);\n    --wa-color-neutral-50: var(--wa-color-cyan-50);\n    --wa-color-neutral-40: var(--wa-color-cyan-40);\n    --wa-color-neutral-30: var(--wa-color-cyan-30);\n    --wa-color-neutral-20: var(--wa-color-cyan-20);\n    --wa-color-neutral-10: var(--wa-color-cyan-10);\n    --wa-color-neutral-05: var(--wa-color-cyan-05);\n    --wa-color-neutral: var(--wa-color-cyan);\n    --wa-color-neutral-on: var(--wa-color-cyan-on);\n  }\n\n  .wa-neutral-blue {\n    --wa-color-neutral-95: var(--wa-color-blue-95);\n    --wa-color-neutral-90: var(--wa-color-blue-90);\n    --wa-color-neutral-80: var(--wa-color-blue-80);\n    --wa-color-neutral-70: var(--wa-color-blue-70);\n    --wa-color-neutral-60: var(--wa-color-blue-60);\n    --wa-color-neutral-50: var(--wa-color-blue-50);\n    --wa-color-neutral-40: var(--wa-color-blue-40);\n    --wa-color-neutral-30: var(--wa-color-blue-30);\n    --wa-color-neutral-20: var(--wa-color-blue-20);\n    --wa-color-neutral-10: var(--wa-color-blue-10);\n    --wa-color-neutral-05: var(--wa-color-blue-05);\n    --wa-color-neutral: var(--wa-color-blue);\n    --wa-color-neutral-on: var(--wa-color-blue-on);\n  }\n\n  .wa-neutral-indigo {\n    --wa-color-neutral-95: var(--wa-color-indigo-95);\n    --wa-color-neutral-90: var(--wa-color-indigo-90);\n    --wa-color-neutral-80: var(--wa-color-indigo-80);\n    --wa-color-neutral-70: var(--wa-color-indigo-70);\n    --wa-color-neutral-60: var(--wa-color-indigo-60);\n    --wa-color-neutral-50: var(--wa-color-indigo-50);\n    --wa-color-neutral-40: var(--wa-color-indigo-40);\n    --wa-color-neutral-30: var(--wa-color-indigo-30);\n    --wa-color-neutral-20: var(--wa-color-indigo-20);\n    --wa-color-neutral-10: var(--wa-color-indigo-10);\n    --wa-color-neutral-05: var(--wa-color-indigo-05);\n    --wa-color-neutral: var(--wa-color-indigo);\n    --wa-color-neutral-on: var(--wa-color-indigo-on);\n  }\n\n  .wa-neutral-purple {\n    --wa-color-neutral-95: var(--wa-color-purple-95);\n    --wa-color-neutral-90: var(--wa-color-purple-90);\n    --wa-color-neutral-80: var(--wa-color-purple-80);\n    --wa-color-neutral-70: var(--wa-color-purple-70);\n    --wa-color-neutral-60: var(--wa-color-purple-60);\n    --wa-color-neutral-50: var(--wa-color-purple-50);\n    --wa-color-neutral-40: var(--wa-color-purple-40);\n    --wa-color-neutral-30: var(--wa-color-purple-30);\n    --wa-color-neutral-20: var(--wa-color-purple-20);\n    --wa-color-neutral-10: var(--wa-color-purple-10);\n    --wa-color-neutral-05: var(--wa-color-purple-05);\n    --wa-color-neutral: var(--wa-color-purple);\n    --wa-color-neutral-on: var(--wa-color-purple-on);\n  }\n\n  .wa-neutral-pink {\n    --wa-color-neutral-95: var(--wa-color-pink-95);\n    --wa-color-neutral-90: var(--wa-color-pink-90);\n    --wa-color-neutral-80: var(--wa-color-pink-80);\n    --wa-color-neutral-70: var(--wa-color-pink-70);\n    --wa-color-neutral-60: var(--wa-color-pink-60);\n    --wa-color-neutral-50: var(--wa-color-pink-50);\n    --wa-color-neutral-40: var(--wa-color-pink-40);\n    --wa-color-neutral-30: var(--wa-color-pink-30);\n    --wa-color-neutral-20: var(--wa-color-pink-20);\n    --wa-color-neutral-10: var(--wa-color-pink-10);\n    --wa-color-neutral-05: var(--wa-color-pink-05);\n    --wa-color-neutral: var(--wa-color-pink);\n    --wa-color-neutral-on: var(--wa-color-pink-on);\n  }\n}\n\n@layer wa-color-variant {\n  :where(:root), /* default */\n  .wa-success-green {\n    --wa-color-success-95: var(--wa-color-green-95);\n    --wa-color-success-90: var(--wa-color-green-90);\n    --wa-color-success-80: var(--wa-color-green-80);\n    --wa-color-success-70: var(--wa-color-green-70);\n    --wa-color-success-60: var(--wa-color-green-60);\n    --wa-color-success-50: var(--wa-color-green-50);\n    --wa-color-success-40: var(--wa-color-green-40);\n    --wa-color-success-30: var(--wa-color-green-30);\n    --wa-color-success-20: var(--wa-color-green-20);\n    --wa-color-success-10: var(--wa-color-green-10);\n    --wa-color-success-05: var(--wa-color-green-05);\n    --wa-color-success: var(--wa-color-green);\n    --wa-color-success-on: var(--wa-color-green-on);\n  }\n\n  .wa-success-red {\n    --wa-color-success-95: var(--wa-color-red-95);\n    --wa-color-success-90: var(--wa-color-red-90);\n    --wa-color-success-80: var(--wa-color-red-80);\n    --wa-color-success-70: var(--wa-color-red-70);\n    --wa-color-success-60: var(--wa-color-red-60);\n    --wa-color-success-50: var(--wa-color-red-50);\n    --wa-color-success-40: var(--wa-color-red-40);\n    --wa-color-success-30: var(--wa-color-red-30);\n    --wa-color-success-20: var(--wa-color-red-20);\n    --wa-color-success-10: var(--wa-color-red-10);\n    --wa-color-success-05: var(--wa-color-red-05);\n    --wa-color-success: var(--wa-color-red);\n    --wa-color-success-on: var(--wa-color-red-on);\n  }\n\n  .wa-success-orange {\n    --wa-color-success-95: var(--wa-color-orange-95);\n    --wa-color-success-90: var(--wa-color-orange-90);\n    --wa-color-success-80: var(--wa-color-orange-80);\n    --wa-color-success-70: var(--wa-color-orange-70);\n    --wa-color-success-60: var(--wa-color-orange-60);\n    --wa-color-success-50: var(--wa-color-orange-50);\n    --wa-color-success-40: var(--wa-color-orange-40);\n    --wa-color-success-30: var(--wa-color-orange-30);\n    --wa-color-success-20: var(--wa-color-orange-20);\n    --wa-color-success-10: var(--wa-color-orange-10);\n    --wa-color-success-05: var(--wa-color-orange-05);\n    --wa-color-success: var(--wa-color-orange);\n    --wa-color-success-on: var(--wa-color-orange-on);\n  }\n\n  .wa-success-yellow {\n    --wa-color-success-95: var(--wa-color-yellow-95);\n    --wa-color-success-90: var(--wa-color-yellow-90);\n    --wa-color-success-80: var(--wa-color-yellow-80);\n    --wa-color-success-70: var(--wa-color-yellow-70);\n    --wa-color-success-60: var(--wa-color-yellow-60);\n    --wa-color-success-50: var(--wa-color-yellow-50);\n    --wa-color-success-40: var(--wa-color-yellow-40);\n    --wa-color-success-30: var(--wa-color-yellow-30);\n    --wa-color-success-20: var(--wa-color-yellow-20);\n    --wa-color-success-10: var(--wa-color-yellow-10);\n    --wa-color-success-05: var(--wa-color-yellow-05);\n    --wa-color-success: var(--wa-color-yellow);\n    --wa-color-success-on: var(--wa-color-yellow-on);\n  }\n\n  .wa-success-cyan {\n    --wa-color-success-95: var(--wa-color-cyan-95);\n    --wa-color-success-90: var(--wa-color-cyan-90);\n    --wa-color-success-80: var(--wa-color-cyan-80);\n    --wa-color-success-70: var(--wa-color-cyan-70);\n    --wa-color-success-60: var(--wa-color-cyan-60);\n    --wa-color-success-50: var(--wa-color-cyan-50);\n    --wa-color-success-40: var(--wa-color-cyan-40);\n    --wa-color-success-30: var(--wa-color-cyan-30);\n    --wa-color-success-20: var(--wa-color-cyan-20);\n    --wa-color-success-10: var(--wa-color-cyan-10);\n    --wa-color-success-05: var(--wa-color-cyan-05);\n    --wa-color-success: var(--wa-color-cyan);\n    --wa-color-success-on: var(--wa-color-cyan-on);\n  }\n\n  .wa-success-blue {\n    --wa-color-success-95: var(--wa-color-blue-95);\n    --wa-color-success-90: var(--wa-color-blue-90);\n    --wa-color-success-80: var(--wa-color-blue-80);\n    --wa-color-success-70: var(--wa-color-blue-70);\n    --wa-color-success-60: var(--wa-color-blue-60);\n    --wa-color-success-50: var(--wa-color-blue-50);\n    --wa-color-success-40: var(--wa-color-blue-40);\n    --wa-color-success-30: var(--wa-color-blue-30);\n    --wa-color-success-20: var(--wa-color-blue-20);\n    --wa-color-success-10: var(--wa-color-blue-10);\n    --wa-color-success-05: var(--wa-color-blue-05);\n    --wa-color-success: var(--wa-color-blue);\n    --wa-color-success-on: var(--wa-color-blue-on);\n  }\n\n  .wa-success-indigo {\n    --wa-color-success-95: var(--wa-color-indigo-95);\n    --wa-color-success-90: var(--wa-color-indigo-90);\n    --wa-color-success-80: var(--wa-color-indigo-80);\n    --wa-color-success-70: var(--wa-color-indigo-70);\n    --wa-color-success-60: var(--wa-color-indigo-60);\n    --wa-color-success-50: var(--wa-color-indigo-50);\n    --wa-color-success-40: var(--wa-color-indigo-40);\n    --wa-color-success-30: var(--wa-color-indigo-30);\n    --wa-color-success-20: var(--wa-color-indigo-20);\n    --wa-color-success-10: var(--wa-color-indigo-10);\n    --wa-color-success-05: var(--wa-color-indigo-05);\n    --wa-color-success: var(--wa-color-indigo);\n    --wa-color-success-on: var(--wa-color-indigo-on);\n  }\n\n  .wa-success-purple {\n    --wa-color-success-95: var(--wa-color-purple-95);\n    --wa-color-success-90: var(--wa-color-purple-90);\n    --wa-color-success-80: var(--wa-color-purple-80);\n    --wa-color-success-70: var(--wa-color-purple-70);\n    --wa-color-success-60: var(--wa-color-purple-60);\n    --wa-color-success-50: var(--wa-color-purple-50);\n    --wa-color-success-40: var(--wa-color-purple-40);\n    --wa-color-success-30: var(--wa-color-purple-30);\n    --wa-color-success-20: var(--wa-color-purple-20);\n    --wa-color-success-10: var(--wa-color-purple-10);\n    --wa-color-success-05: var(--wa-color-purple-05);\n    --wa-color-success: var(--wa-color-purple);\n    --wa-color-success-on: var(--wa-color-purple-on);\n  }\n\n  .wa-success-pink {\n    --wa-color-success-95: var(--wa-color-pink-95);\n    --wa-color-success-90: var(--wa-color-pink-90);\n    --wa-color-success-80: var(--wa-color-pink-80);\n    --wa-color-success-70: var(--wa-color-pink-70);\n    --wa-color-success-60: var(--wa-color-pink-60);\n    --wa-color-success-50: var(--wa-color-pink-50);\n    --wa-color-success-40: var(--wa-color-pink-40);\n    --wa-color-success-30: var(--wa-color-pink-30);\n    --wa-color-success-20: var(--wa-color-pink-20);\n    --wa-color-success-10: var(--wa-color-pink-10);\n    --wa-color-success-05: var(--wa-color-pink-05);\n    --wa-color-success: var(--wa-color-pink);\n    --wa-color-success-on: var(--wa-color-pink-on);\n  }\n\n  .wa-success-gray {\n    --wa-color-success-95: var(--wa-color-gray-95);\n    --wa-color-success-90: var(--wa-color-gray-90);\n    --wa-color-success-80: var(--wa-color-gray-80);\n    --wa-color-success-70: var(--wa-color-gray-70);\n    --wa-color-success-60: var(--wa-color-gray-60);\n    --wa-color-success-50: var(--wa-color-gray-50);\n    --wa-color-success-40: var(--wa-color-gray-40);\n    --wa-color-success-30: var(--wa-color-gray-30);\n    --wa-color-success-20: var(--wa-color-gray-20);\n    --wa-color-success-10: var(--wa-color-gray-10);\n    --wa-color-success-05: var(--wa-color-gray-05);\n    --wa-color-success: var(--wa-color-gray);\n    --wa-color-success-on: var(--wa-color-gray-on);\n  }\n}\n\n@layer wa-color-variant {\n  :where(:root), /* default */\n  .wa-warning-yellow {\n    --wa-color-warning-95: var(--wa-color-yellow-95);\n    --wa-color-warning-90: var(--wa-color-yellow-90);\n    --wa-color-warning-80: var(--wa-color-yellow-80);\n    --wa-color-warning-70: var(--wa-color-yellow-70);\n    --wa-color-warning-60: var(--wa-color-yellow-60);\n    --wa-color-warning-50: var(--wa-color-yellow-50);\n    --wa-color-warning-40: var(--wa-color-yellow-40);\n    --wa-color-warning-30: var(--wa-color-yellow-30);\n    --wa-color-warning-20: var(--wa-color-yellow-20);\n    --wa-color-warning-10: var(--wa-color-yellow-10);\n    --wa-color-warning-05: var(--wa-color-yellow-05);\n    --wa-color-warning: var(--wa-color-yellow);\n    --wa-color-warning-on: var(--wa-color-yellow-on);\n  }\n\n  .wa-warning-red {\n    --wa-color-warning-95: var(--wa-color-red-95);\n    --wa-color-warning-90: var(--wa-color-red-90);\n    --wa-color-warning-80: var(--wa-color-red-80);\n    --wa-color-warning-70: var(--wa-color-red-70);\n    --wa-color-warning-60: var(--wa-color-red-60);\n    --wa-color-warning-50: var(--wa-color-red-50);\n    --wa-color-warning-40: var(--wa-color-red-40);\n    --wa-color-warning-30: var(--wa-color-red-30);\n    --wa-color-warning-20: var(--wa-color-red-20);\n    --wa-color-warning-10: var(--wa-color-red-10);\n    --wa-color-warning-05: var(--wa-color-red-05);\n    --wa-color-warning: var(--wa-color-red);\n    --wa-color-warning-on: var(--wa-color-red-on);\n  }\n\n  .wa-warning-orange {\n    --wa-color-warning-95: var(--wa-color-orange-95);\n    --wa-color-warning-90: var(--wa-color-orange-90);\n    --wa-color-warning-80: var(--wa-color-orange-80);\n    --wa-color-warning-70: var(--wa-color-orange-70);\n    --wa-color-warning-60: var(--wa-color-orange-60);\n    --wa-color-warning-50: var(--wa-color-orange-50);\n    --wa-color-warning-40: var(--wa-color-orange-40);\n    --wa-color-warning-30: var(--wa-color-orange-30);\n    --wa-color-warning-20: var(--wa-color-orange-20);\n    --wa-color-warning-10: var(--wa-color-orange-10);\n    --wa-color-warning-05: var(--wa-color-orange-05);\n    --wa-color-warning: var(--wa-color-orange);\n    --wa-color-warning-on: var(--wa-color-orange-on);\n  }\n\n  .wa-warning-green {\n    --wa-color-warning-95: var(--wa-color-green-95);\n    --wa-color-warning-90: var(--wa-color-green-90);\n    --wa-color-warning-80: var(--wa-color-green-80);\n    --wa-color-warning-70: var(--wa-color-green-70);\n    --wa-color-warning-60: var(--wa-color-green-60);\n    --wa-color-warning-50: var(--wa-color-green-50);\n    --wa-color-warning-40: var(--wa-color-green-40);\n    --wa-color-warning-30: var(--wa-color-green-30);\n    --wa-color-warning-20: var(--wa-color-green-20);\n    --wa-color-warning-10: var(--wa-color-green-10);\n    --wa-color-warning-05: var(--wa-color-green-05);\n    --wa-color-warning: var(--wa-color-green);\n    --wa-color-warning-on: var(--wa-color-green-on);\n  }\n\n  .wa-warning-cyan {\n    --wa-color-warning-95: var(--wa-color-cyan-95);\n    --wa-color-warning-90: var(--wa-color-cyan-90);\n    --wa-color-warning-80: var(--wa-color-cyan-80);\n    --wa-color-warning-70: var(--wa-color-cyan-70);\n    --wa-color-warning-60: var(--wa-color-cyan-60);\n    --wa-color-warning-50: var(--wa-color-cyan-50);\n    --wa-color-warning-40: var(--wa-color-cyan-40);\n    --wa-color-warning-30: var(--wa-color-cyan-30);\n    --wa-color-warning-20: var(--wa-color-cyan-20);\n    --wa-color-warning-10: var(--wa-color-cyan-10);\n    --wa-color-warning-05: var(--wa-color-cyan-05);\n    --wa-color-warning: var(--wa-color-cyan);\n    --wa-color-warning-on: var(--wa-color-cyan-on);\n  }\n\n  .wa-warning-blue {\n    --wa-color-warning-95: var(--wa-color-blue-95);\n    --wa-color-warning-90: var(--wa-color-blue-90);\n    --wa-color-warning-80: var(--wa-color-blue-80);\n    --wa-color-warning-70: var(--wa-color-blue-70);\n    --wa-color-warning-60: var(--wa-color-blue-60);\n    --wa-color-warning-50: var(--wa-color-blue-50);\n    --wa-color-warning-40: var(--wa-color-blue-40);\n    --wa-color-warning-30: var(--wa-color-blue-30);\n    --wa-color-warning-20: var(--wa-color-blue-20);\n    --wa-color-warning-10: var(--wa-color-blue-10);\n    --wa-color-warning-05: var(--wa-color-blue-05);\n    --wa-color-warning: var(--wa-color-blue);\n    --wa-color-warning-on: var(--wa-color-blue-on);\n  }\n\n  .wa-warning-indigo {\n    --wa-color-warning-95: var(--wa-color-indigo-95);\n    --wa-color-warning-90: var(--wa-color-indigo-90);\n    --wa-color-warning-80: var(--wa-color-indigo-80);\n    --wa-color-warning-70: var(--wa-color-indigo-70);\n    --wa-color-warning-60: var(--wa-color-indigo-60);\n    --wa-color-warning-50: var(--wa-color-indigo-50);\n    --wa-color-warning-40: var(--wa-color-indigo-40);\n    --wa-color-warning-30: var(--wa-color-indigo-30);\n    --wa-color-warning-20: var(--wa-color-indigo-20);\n    --wa-color-warning-10: var(--wa-color-indigo-10);\n    --wa-color-warning-05: var(--wa-color-indigo-05);\n    --wa-color-warning: var(--wa-color-indigo);\n    --wa-color-warning-on: var(--wa-color-indigo-on);\n  }\n\n  .wa-warning-purple {\n    --wa-color-warning-95: var(--wa-color-purple-95);\n    --wa-color-warning-90: var(--wa-color-purple-90);\n    --wa-color-warning-80: var(--wa-color-purple-80);\n    --wa-color-warning-70: var(--wa-color-purple-70);\n    --wa-color-warning-60: var(--wa-color-purple-60);\n    --wa-color-warning-50: var(--wa-color-purple-50);\n    --wa-color-warning-40: var(--wa-color-purple-40);\n    --wa-color-warning-30: var(--wa-color-purple-30);\n    --wa-color-warning-20: var(--wa-color-purple-20);\n    --wa-color-warning-10: var(--wa-color-purple-10);\n    --wa-color-warning-05: var(--wa-color-purple-05);\n    --wa-color-warning: var(--wa-color-purple);\n    --wa-color-warning-on: var(--wa-color-purple-on);\n  }\n\n  .wa-warning-pink {\n    --wa-color-warning-95: var(--wa-color-pink-95);\n    --wa-color-warning-90: var(--wa-color-pink-90);\n    --wa-color-warning-80: var(--wa-color-pink-80);\n    --wa-color-warning-70: var(--wa-color-pink-70);\n    --wa-color-warning-60: var(--wa-color-pink-60);\n    --wa-color-warning-50: var(--wa-color-pink-50);\n    --wa-color-warning-40: var(--wa-color-pink-40);\n    --wa-color-warning-30: var(--wa-color-pink-30);\n    --wa-color-warning-20: var(--wa-color-pink-20);\n    --wa-color-warning-10: var(--wa-color-pink-10);\n    --wa-color-warning-05: var(--wa-color-pink-05);\n    --wa-color-warning: var(--wa-color-pink);\n    --wa-color-warning-on: var(--wa-color-pink-on);\n  }\n\n  .wa-warning-gray {\n    --wa-color-warning-95: var(--wa-color-gray-95);\n    --wa-color-warning-90: var(--wa-color-gray-90);\n    --wa-color-warning-80: var(--wa-color-gray-80);\n    --wa-color-warning-70: var(--wa-color-gray-70);\n    --wa-color-warning-60: var(--wa-color-gray-60);\n    --wa-color-warning-50: var(--wa-color-gray-50);\n    --wa-color-warning-40: var(--wa-color-gray-40);\n    --wa-color-warning-30: var(--wa-color-gray-30);\n    --wa-color-warning-20: var(--wa-color-gray-20);\n    --wa-color-warning-10: var(--wa-color-gray-10);\n    --wa-color-warning-05: var(--wa-color-gray-05);\n    --wa-color-warning: var(--wa-color-gray);\n    --wa-color-warning-on: var(--wa-color-gray-on);\n  }\n}\n\n@layer wa-color-variant {\n  :where(:root), /* default */\n  .wa-danger-red {\n    --wa-color-danger-95: var(--wa-color-red-95);\n    --wa-color-danger-90: var(--wa-color-red-90);\n    --wa-color-danger-80: var(--wa-color-red-80);\n    --wa-color-danger-70: var(--wa-color-red-70);\n    --wa-color-danger-60: var(--wa-color-red-60);\n    --wa-color-danger-50: var(--wa-color-red-50);\n    --wa-color-danger-40: var(--wa-color-red-40);\n    --wa-color-danger-30: var(--wa-color-red-30);\n    --wa-color-danger-20: var(--wa-color-red-20);\n    --wa-color-danger-10: var(--wa-color-red-10);\n    --wa-color-danger-05: var(--wa-color-red-05);\n    --wa-color-danger: var(--wa-color-red);\n    --wa-color-danger-on: var(--wa-color-red-on);\n  }\n\n  .wa-danger-orange {\n    --wa-color-danger-95: var(--wa-color-orange-95);\n    --wa-color-danger-90: var(--wa-color-orange-90);\n    --wa-color-danger-80: var(--wa-color-orange-80);\n    --wa-color-danger-70: var(--wa-color-orange-70);\n    --wa-color-danger-60: var(--wa-color-orange-60);\n    --wa-color-danger-50: var(--wa-color-orange-50);\n    --wa-color-danger-40: var(--wa-color-orange-40);\n    --wa-color-danger-30: var(--wa-color-orange-30);\n    --wa-color-danger-20: var(--wa-color-orange-20);\n    --wa-color-danger-10: var(--wa-color-orange-10);\n    --wa-color-danger-05: var(--wa-color-orange-05);\n    --wa-color-danger: var(--wa-color-orange);\n    --wa-color-danger-on: var(--wa-color-orange-on);\n  }\n\n  .wa-danger-yellow {\n    --wa-color-danger-95: var(--wa-color-yellow-95);\n    --wa-color-danger-90: var(--wa-color-yellow-90);\n    --wa-color-danger-80: var(--wa-color-yellow-80);\n    --wa-color-danger-70: var(--wa-color-yellow-70);\n    --wa-color-danger-60: var(--wa-color-yellow-60);\n    --wa-color-danger-50: var(--wa-color-yellow-50);\n    --wa-color-danger-40: var(--wa-color-yellow-40);\n    --wa-color-danger-30: var(--wa-color-yellow-30);\n    --wa-color-danger-20: var(--wa-color-yellow-20);\n    --wa-color-danger-10: var(--wa-color-yellow-10);\n    --wa-color-danger-05: var(--wa-color-yellow-05);\n    --wa-color-danger: var(--wa-color-yellow);\n    --wa-color-danger-on: var(--wa-color-yellow-on);\n  }\n\n  .wa-danger-green {\n    --wa-color-danger-95: var(--wa-color-green-95);\n    --wa-color-danger-90: var(--wa-color-green-90);\n    --wa-color-danger-80: var(--wa-color-green-80);\n    --wa-color-danger-70: var(--wa-color-green-70);\n    --wa-color-danger-60: var(--wa-color-green-60);\n    --wa-color-danger-50: var(--wa-color-green-50);\n    --wa-color-danger-40: var(--wa-color-green-40);\n    --wa-color-danger-30: var(--wa-color-green-30);\n    --wa-color-danger-20: var(--wa-color-green-20);\n    --wa-color-danger-10: var(--wa-color-green-10);\n    --wa-color-danger-05: var(--wa-color-green-05);\n    --wa-color-danger: var(--wa-color-green);\n    --wa-color-danger-on: var(--wa-color-green-on);\n  }\n\n  .wa-danger-cyan {\n    --wa-color-danger-95: var(--wa-color-cyan-95);\n    --wa-color-danger-90: var(--wa-color-cyan-90);\n    --wa-color-danger-80: var(--wa-color-cyan-80);\n    --wa-color-danger-70: var(--wa-color-cyan-70);\n    --wa-color-danger-60: var(--wa-color-cyan-60);\n    --wa-color-danger-50: var(--wa-color-cyan-50);\n    --wa-color-danger-40: var(--wa-color-cyan-40);\n    --wa-color-danger-30: var(--wa-color-cyan-30);\n    --wa-color-danger-20: var(--wa-color-cyan-20);\n    --wa-color-danger-10: var(--wa-color-cyan-10);\n    --wa-color-danger-05: var(--wa-color-cyan-05);\n    --wa-color-danger: var(--wa-color-cyan);\n    --wa-color-danger-on: var(--wa-color-cyan-on);\n  }\n\n  .wa-danger-blue {\n    --wa-color-danger-95: var(--wa-color-blue-95);\n    --wa-color-danger-90: var(--wa-color-blue-90);\n    --wa-color-danger-80: var(--wa-color-blue-80);\n    --wa-color-danger-70: var(--wa-color-blue-70);\n    --wa-color-danger-60: var(--wa-color-blue-60);\n    --wa-color-danger-50: var(--wa-color-blue-50);\n    --wa-color-danger-40: var(--wa-color-blue-40);\n    --wa-color-danger-30: var(--wa-color-blue-30);\n    --wa-color-danger-20: var(--wa-color-blue-20);\n    --wa-color-danger-10: var(--wa-color-blue-10);\n    --wa-color-danger-05: var(--wa-color-blue-05);\n    --wa-color-danger: var(--wa-color-blue);\n    --wa-color-danger-on: var(--wa-color-blue-on);\n  }\n\n  .wa-danger-indigo {\n    --wa-color-danger-95: var(--wa-color-indigo-95);\n    --wa-color-danger-90: var(--wa-color-indigo-90);\n    --wa-color-danger-80: var(--wa-color-indigo-80);\n    --wa-color-danger-70: var(--wa-color-indigo-70);\n    --wa-color-danger-60: var(--wa-color-indigo-60);\n    --wa-color-danger-50: var(--wa-color-indigo-50);\n    --wa-color-danger-40: var(--wa-color-indigo-40);\n    --wa-color-danger-30: var(--wa-color-indigo-30);\n    --wa-color-danger-20: var(--wa-color-indigo-20);\n    --wa-color-danger-10: var(--wa-color-indigo-10);\n    --wa-color-danger-05: var(--wa-color-indigo-05);\n    --wa-color-danger: var(--wa-color-indigo);\n    --wa-color-danger-on: var(--wa-color-indigo-on);\n  }\n\n  .wa-danger-purple {\n    --wa-color-danger-95: var(--wa-color-purple-95);\n    --wa-color-danger-90: var(--wa-color-purple-90);\n    --wa-color-danger-80: var(--wa-color-purple-80);\n    --wa-color-danger-70: var(--wa-color-purple-70);\n    --wa-color-danger-60: var(--wa-color-purple-60);\n    --wa-color-danger-50: var(--wa-color-purple-50);\n    --wa-color-danger-40: var(--wa-color-purple-40);\n    --wa-color-danger-30: var(--wa-color-purple-30);\n    --wa-color-danger-20: var(--wa-color-purple-20);\n    --wa-color-danger-10: var(--wa-color-purple-10);\n    --wa-color-danger-05: var(--wa-color-purple-05);\n    --wa-color-danger: var(--wa-color-purple);\n    --wa-color-danger-on: var(--wa-color-purple-on);\n  }\n\n  .wa-danger-pink {\n    --wa-color-danger-95: var(--wa-color-pink-95);\n    --wa-color-danger-90: var(--wa-color-pink-90);\n    --wa-color-danger-80: var(--wa-color-pink-80);\n    --wa-color-danger-70: var(--wa-color-pink-70);\n    --wa-color-danger-60: var(--wa-color-pink-60);\n    --wa-color-danger-50: var(--wa-color-pink-50);\n    --wa-color-danger-40: var(--wa-color-pink-40);\n    --wa-color-danger-30: var(--wa-color-pink-30);\n    --wa-color-danger-20: var(--wa-color-pink-20);\n    --wa-color-danger-10: var(--wa-color-pink-10);\n    --wa-color-danger-05: var(--wa-color-pink-05);\n    --wa-color-danger: var(--wa-color-pink);\n    --wa-color-danger-on: var(--wa-color-pink-on);\n  }\n\n  .wa-danger-gray {\n    --wa-color-danger-95: var(--wa-color-gray-95);\n    --wa-color-danger-90: var(--wa-color-gray-90);\n    --wa-color-danger-80: var(--wa-color-gray-80);\n    --wa-color-danger-70: var(--wa-color-gray-70);\n    --wa-color-danger-60: var(--wa-color-gray-60);\n    --wa-color-danger-50: var(--wa-color-gray-50);\n    --wa-color-danger-40: var(--wa-color-gray-40);\n    --wa-color-danger-30: var(--wa-color-gray-30);\n    --wa-color-danger-20: var(--wa-color-gray-20);\n    --wa-color-danger-10: var(--wa-color-gray-10);\n    --wa-color-danger-05: var(--wa-color-gray-05);\n    --wa-color-danger: var(--wa-color-gray);\n    --wa-color-danger-on: var(--wa-color-gray-on);\n  }\n}\n\n\n\n@layer wa-color-palette {\n  :where(:root),\n  .wa-palette-default {\n    --wa-color-red-95: #fff0ef /* oklch(96.667% 0.01632 22.08) */;\n    --wa-color-red-90: #ffdedc /* oklch(92.735% 0.03679 21.966) */;\n    --wa-color-red-80: #ffb8b6 /* oklch(84.803% 0.08289 20.771) */;\n    --wa-color-red-70: #fd8f90 /* oklch(76.801% 0.13322 20.052) */;\n    --wa-color-red-60: #f3676c /* oklch(68.914% 0.17256 20.646) */;\n    --wa-color-red-50: #dc3146 /* oklch(58.857% 0.20512 20.223) */;\n    --wa-color-red-40: #b30532 /* oklch(48.737% 0.19311 18.413) */;\n    --wa-color-red-30: #8a132c /* oklch(41.17% 0.1512 16.771) */;\n    --wa-color-red-20: #631323 /* oklch(33.297% 0.11208 14.847) */;\n    --wa-color-red-10: #3e0913 /* oklch(24.329% 0.08074 15.207) */;\n    --wa-color-red-05: #2a040b /* oklch(19.016% 0.06394 13.71) */;\n    --wa-color-red: var(--wa-color-red-50);\n    --wa-color-red-key: 50;\n\n    --wa-color-orange-95: #fff0e6 /* oklch(96.426% 0.02105 56.133) */;\n    --wa-color-orange-90: #ffdfca /* oklch(92.468% 0.04529 55.325) */;\n    --wa-color-orange-80: #ffbb94 /* oklch(84.588% 0.09454 50.876) */;\n    --wa-color-orange-70: #ff9266 /* oklch(76.744% 0.14429 42.309) */;\n    --wa-color-orange-60: #f46a45 /* oklch(68.848% 0.17805 35.951) */;\n    --wa-color-orange-50: #cd491c /* oklch(58.195% 0.17597 37.577) */;\n    --wa-color-orange-40: #9f3501 /* oklch(47.889% 0.14981 39.957) */;\n    --wa-color-orange-30: #802700 /* oklch(40.637% 0.1298 39.149) */;\n    --wa-color-orange-20: #601b00 /* oklch(33.123% 0.10587 39.117) */;\n    --wa-color-orange-10: #3c0d00 /* oklch(24.043% 0.07768 38.607) */;\n    --wa-color-orange-05: #280600 /* oklch(18.644% 0.0607 38.252) */;\n    --wa-color-orange: var(--wa-color-orange-60);\n    --wa-color-orange-key: 60;\n\n    --wa-color-yellow-95: #fef3cd /* oklch(96.322% 0.05069 93.748) */;\n    --wa-color-yellow-90: #ffe495 /* oklch(92.377% 0.10246 91.296) */;\n    --wa-color-yellow-80: #fac22b /* oklch(84.185% 0.16263 85.991) */;\n    --wa-color-yellow-70: #ef9d00 /* oklch(75.949% 0.16251 72.13) */;\n    --wa-color-yellow-60: #da7e00 /* oklch(67.883% 0.15587 62.246) */;\n    --wa-color-yellow-50: #b45f04 /* oklch(57.449% 0.13836 56.585) */;\n    --wa-color-yellow-40: #8c4602 /* oklch(47.319% 0.11666 54.663) */;\n    --wa-color-yellow-30: #6f3601 /* oklch(40.012% 0.09892 54.555) */;\n    --wa-color-yellow-20: #532600 /* oklch(32.518% 0.08157 53.927) */;\n    --wa-color-yellow-10: #331600 /* oklch(23.846% 0.05834 56.02) */;\n    --wa-color-yellow-05: #220c00 /* oklch(18.585% 0.04625 54.588) */;\n    --wa-color-yellow: var(--wa-color-yellow-80);\n    --wa-color-yellow-key: 80;\n\n    --wa-color-green-95: #e3f9e3 /* oklch(96.006% 0.03715 145.28) */;\n    --wa-color-green-90: #c2f2c1 /* oklch(91.494% 0.08233 144.35) */;\n    --wa-color-green-80: #93da98 /* oklch(82.445% 0.11601 146.11) */;\n    --wa-color-green-70: #5dc36f /* oklch(73.554% 0.15308 147.59) */;\n    --wa-color-green-60: #00ac49 /* oklch(64.982% 0.18414 148.83) */;\n    --wa-color-green-50: #00883c /* oklch(54.765% 0.15165 149.77) */;\n    --wa-color-green-40: #036730 /* oklch(45.004% 0.11963 151.06) */;\n    --wa-color-green-30: #0a5027 /* oklch(37.988% 0.09487 151.62) */;\n    --wa-color-green-20: #0a3a1d /* oklch(30.876% 0.07202 152.23) */;\n    --wa-color-green-10: #052310 /* oklch(22.767% 0.05128 152.45) */;\n    --wa-color-green-05: #031608 /* oklch(17.84% 0.03957 151.36) */;\n    --wa-color-green: var(--wa-color-green-60);\n    --wa-color-green-key: 60;\n\n    --wa-color-cyan-95: #e3f6fb /* oklch(96.063% 0.02111 215.26) */;\n    --wa-color-cyan-90: #c5ecf7 /* oklch(91.881% 0.04314 216.7) */;\n    --wa-color-cyan-80: #7fd6ec /* oklch(82.906% 0.08934 215.86) */;\n    --wa-color-cyan-70: #2fbedc /* oklch(74.18% 0.12169 215.86) */;\n    --wa-color-cyan-60: #00a3c0 /* oklch(65.939% 0.11738 216.42) */;\n    --wa-color-cyan-50: #078098 /* oklch(55.379% 0.09774 217.32) */;\n    --wa-color-cyan-40: #026274 /* oklch(45.735% 0.08074 216.18) */;\n    --wa-color-cyan-30: #014c5b /* oklch(38.419% 0.06817 216.88) */;\n    --wa-color-cyan-20: #003844 /* oklch(31.427% 0.05624 217.32) */;\n    --wa-color-cyan-10: #002129 /* oklch(22.851% 0.04085 217.17) */;\n    --wa-color-cyan-05: #00151b /* oklch(18.055% 0.03231 217.31) */;\n    --wa-color-cyan: var(--wa-color-cyan-70);\n    --wa-color-cyan-key: 70;\n\n    --wa-color-blue-95: #e8f3ff /* oklch(95.944% 0.01996 250.38) */;\n    --wa-color-blue-90: #d1e8ff /* oklch(92.121% 0.03985 248.26) */;\n    --wa-color-blue-80: #9fceff /* oklch(83.572% 0.08502 249.92) */;\n    --wa-color-blue-70: #6eb3ff /* oklch(75.256% 0.1308 252.03) */;\n    --wa-color-blue-60: #3e96ff /* oklch(67.196% 0.17661 254.97) */;\n    --wa-color-blue-50: #0071ec /* oklch(56.972% 0.20461 257.29) */;\n    --wa-color-blue-40: #0053c0 /* oklch(47.175% 0.1846 259.19) */;\n    --wa-color-blue-30: #003f9c /* oklch(39.805% 0.16217 259.98) */;\n    --wa-color-blue-20: #002d77 /* oklch(32.436% 0.1349 260.35) */;\n    --wa-color-blue-10: #001a4e /* oklch(23.965% 0.10161 260.68) */;\n    --wa-color-blue-05: #000f35 /* oklch(18.565% 0.07904 260.75) */;\n    --wa-color-blue: var(--wa-color-blue-50);\n    --wa-color-blue-key: 50;\n\n    --wa-color-indigo-95: #f0f2ff /* oklch(96.341% 0.0175 279.06) */;\n    --wa-color-indigo-90: #dfe5ff /* oklch(92.527% 0.0359 275.35) */;\n    --wa-color-indigo-80: #bcc7ff /* oklch(84.053% 0.07938 275.91) */;\n    --wa-color-indigo-70: #9da9ff /* oklch(75.941% 0.12411 276.95) */;\n    --wa-color-indigo-60: #808aff /* oklch(67.977% 0.17065 277.16) */;\n    --wa-color-indigo-50: #6163f2 /* oklch(57.967% 0.20943 277.04) */;\n    --wa-color-indigo-40: #4945cb /* oklch(48.145% 0.20042 277.08) */;\n    --wa-color-indigo-30: #3933a7 /* oklch(40.844% 0.17864 277.26) */;\n    --wa-color-indigo-20: #292381 /* oklch(33.362% 0.15096 277.21) */;\n    --wa-color-indigo-10: #181255 /* oklch(24.534% 0.11483 277.73) */;\n    --wa-color-indigo-05: #0d0a3a /* oklch(19.092% 0.08825 276.76) */;\n    --wa-color-indigo: var(--wa-color-indigo-50);\n    --wa-color-indigo-key: 50;\n\n    --wa-color-purple-95: #f7f0ff /* oklch(96.49% 0.02119 306.84) */;\n    --wa-color-purple-90: #eedfff /* oklch(92.531% 0.04569 306.6) */;\n    --wa-color-purple-80: #ddbdff /* oklch(84.781% 0.09615 306.52) */;\n    --wa-color-purple-70: #ca99ff /* oklch(76.728% 0.14961 305.27) */;\n    --wa-color-purple-60: #b678f5 /* oklch(68.906% 0.1844 304.96) */;\n    --wa-color-purple-50: #9951db /* oklch(58.603% 0.20465 304.87) */;\n    --wa-color-purple-40: #7936b3 /* oklch(48.641% 0.18949 304.79) */;\n    --wa-color-purple-30: #612692 /* oklch(41.23% 0.16836 304.92) */;\n    --wa-color-purple-20: #491870 /* oklch(33.663% 0.14258 305.12) */;\n    --wa-color-purple-10: #2d0b48 /* oklch(24.637% 0.10612 304.95) */;\n    --wa-color-purple-05: #1e0532 /* oklch(19.393% 0.08461 305.26) */;\n    --wa-color-purple: var(--wa-color-purple-50);\n    --wa-color-purple-key: 50;\n\n    --wa-color-pink-95: #feeff9 /* oklch(96.676% 0.02074 337.69) */;\n    --wa-color-pink-90: #feddf0 /* oklch(93.026% 0.04388 342.45) */;\n    --wa-color-pink-80: #fcb5d8 /* oklch(84.928% 0.09304 348.21) */;\n    --wa-color-pink-70: #f78dbf /* oklch(77.058% 0.14016 351.19) */;\n    --wa-color-pink-60: #e66ba3 /* oklch(69.067% 0.16347 353.69) */;\n    --wa-color-pink-50: #c84382 /* oklch(58.707% 0.17826 354.82) */;\n    --wa-color-pink-40: #9e2a6c /* oklch(48.603% 0.16439 350.08) */;\n    --wa-color-pink-30: #7d1e58 /* oklch(41.017% 0.14211 347.77) */;\n    --wa-color-pink-20: #5e1342 /* oklch(33.442% 0.11808 347.01) */;\n    --wa-color-pink-10: #3c0828 /* oklch(24.601% 0.08768 347.8) */;\n    --wa-color-pink-05: #28041a /* oklch(19.199% 0.06799 346.97) */;\n    --wa-color-pink: var(--wa-color-pink-50);\n    --wa-color-pink-key: 50;\n\n    --wa-color-gray-95: #f1f2f3 /* oklch(96.067% 0.00172 247.84) */;\n    --wa-color-gray-90: #e4e5e9 /* oklch(92.228% 0.0055 274.96) */;\n    --wa-color-gray-80: #c7c9d0 /* oklch(83.641% 0.00994 273.33) */;\n    --wa-color-gray-70: #abaeb9 /* oklch(75.183% 0.01604 273.78) */;\n    --wa-color-gray-60: #9194a2 /* oklch(66.863% 0.02088 276.18) */;\n    --wa-color-gray-50: #717584 /* oklch(56.418% 0.02359 273.77) */;\n    --wa-color-gray-40: #545868 /* oklch(46.281% 0.02644 274.26) */;\n    --wa-color-gray-30: #424554 /* oklch(39.355% 0.02564 276.27) */;\n    --wa-color-gray-20: #2f323f /* oklch(31.97% 0.02354 274.82) */;\n    --wa-color-gray-10: #1b1d26 /* oklch(23.277% 0.01762 275.14) */;\n    --wa-color-gray-05: #101219 /* oklch(18.342% 0.01472 272.42) */;\n    --wa-color-gray: var(--wa-color-gray-40);\n    --wa-color-gray-key: 40;\n  }\n}\n\n\n@layer wa-theme {\n  :where(:root),\n  .wa-theme-default,\n  .wa-light,\n  .wa-dark .wa-invert,\n  .wa-light .wa-theme-default,\n  .wa-dark .wa-theme-default.wa-invert,\n  .wa-dark .wa-theme-default .wa-invert {\n    /* #region Colors (Light) ~~~~~~~~~~~~~~~~~~~~~ */\n    color-scheme: light;\n    color: var(--wa-color-text-normal);\n\n    --wa-color-surface-raised: white;\n    --wa-color-surface-default: white;\n    --wa-color-surface-lowered: var(--wa-color-neutral-95);\n    --wa-color-surface-border: var(--wa-color-neutral-90);\n\n    --wa-color-text-normal: var(--wa-color-neutral-10);\n    --wa-color-text-quiet: var(--wa-color-neutral-40);\n    --wa-color-text-link: var(--wa-color-brand-40);\n\n    --wa-color-overlay-modal: color-mix(in oklab, var(--wa-color-neutral-05) 50%, transparent);\n    --wa-color-overlay-inline: color-mix(in oklab, var(--wa-color-neutral-80) 25%, transparent);\n\n    --wa-color-shadow: color-mix(\n      in oklab,\n      var(--wa-color-neutral-05) calc(var(--wa-shadow-blur-scale) * 4% + 8%),\n      transparent\n    );\n\n    --wa-color-focus: var(--wa-color-brand-60);\n\n    --wa-color-mix-hover: black 10%;\n    --wa-color-mix-active: black 20%;\n\n    --wa-color-brand-fill-quiet: var(--wa-color-brand-95);\n    --wa-color-brand-fill-normal: var(--wa-color-brand-90);\n    --wa-color-brand-fill-loud: var(--wa-color-brand-50);\n    --wa-color-brand-border-quiet: var(--wa-color-brand-90);\n    --wa-color-brand-border-normal: var(--wa-color-brand-80);\n    --wa-color-brand-border-loud: var(--wa-color-brand-60);\n    --wa-color-brand-on-quiet: var(--wa-color-brand-40);\n    --wa-color-brand-on-normal: var(--wa-color-brand-30);\n    --wa-color-brand-on-loud: white;\n\n    --wa-color-success-fill-quiet: var(--wa-color-success-95);\n    --wa-color-success-fill-normal: var(--wa-color-success-90);\n    --wa-color-success-fill-loud: var(--wa-color-success-50);\n    --wa-color-success-border-quiet: var(--wa-color-success-90);\n    --wa-color-success-border-normal: var(--wa-color-success-80);\n    --wa-color-success-border-loud: var(--wa-color-success-60);\n    --wa-color-success-on-quiet: var(--wa-color-success-40);\n    --wa-color-success-on-normal: var(--wa-color-success-30);\n    --wa-color-success-on-loud: white;\n\n    --wa-color-warning-fill-quiet: var(--wa-color-warning-95);\n    --wa-color-warning-fill-normal: var(--wa-color-warning-90);\n    --wa-color-warning-fill-loud: var(--wa-color-warning-50);\n    --wa-color-warning-border-quiet: var(--wa-color-warning-90);\n    --wa-color-warning-border-normal: var(--wa-color-warning-80);\n    --wa-color-warning-border-loud: var(--wa-color-warning-60);\n    --wa-color-warning-on-quiet: var(--wa-color-warning-40);\n    --wa-color-warning-on-normal: var(--wa-color-warning-30);\n    --wa-color-warning-on-loud: white;\n\n    --wa-color-danger-fill-quiet: var(--wa-color-danger-95);\n    --wa-color-danger-fill-normal: var(--wa-color-danger-90);\n    --wa-color-danger-fill-loud: var(--wa-color-danger-50);\n    --wa-color-danger-border-quiet: var(--wa-color-danger-90);\n    --wa-color-danger-border-normal: var(--wa-color-danger-80);\n    --wa-color-danger-border-loud: var(--wa-color-danger-60);\n    --wa-color-danger-on-quiet: var(--wa-color-danger-40);\n    --wa-color-danger-on-normal: var(--wa-color-danger-30);\n    --wa-color-danger-on-loud: white;\n\n    --wa-color-neutral-fill-quiet: var(--wa-color-neutral-95);\n    --wa-color-neutral-fill-normal: var(--wa-color-neutral-90);\n    --wa-color-neutral-fill-loud: var(--wa-color-neutral-20);\n    --wa-color-neutral-border-quiet: var(--wa-color-neutral-90);\n    --wa-color-neutral-border-normal: var(--wa-color-neutral-80);\n    --wa-color-neutral-border-loud: var(--wa-color-neutral-60);\n    --wa-color-neutral-on-quiet: var(--wa-color-neutral-40);\n    --wa-color-neutral-on-normal: var(--wa-color-neutral-30);\n    --wa-color-neutral-on-loud: white;\n    /* #endregion */\n  }\n\n  .wa-dark,\n  .wa-invert,\n  .wa-dark .wa-theme-default,\n  .wa-light .wa-theme-default.wa-invert,\n  .wa-light .wa-theme-default .wa-invert {\n    /* #region Colors (Dark) ~~~~~~~~~~~~~~~~~~~~~~ */\n    color-scheme: dark;\n    color: var(--wa-color-text-normal);\n\n    --wa-color-surface-raised: var(--wa-color-neutral-10);\n    --wa-color-surface-default: var(--wa-color-neutral-05);\n    --wa-color-surface-lowered: color-mix(in oklab, var(--wa-color-surface-default), black 20%);\n    --wa-color-surface-border: var(--wa-color-neutral-20);\n\n    --wa-color-text-normal: var(--wa-color-neutral-95);\n    --wa-color-text-quiet: var(--wa-color-neutral-60);\n    --wa-color-text-link: var(--wa-color-brand-70);\n\n    --wa-color-overlay-modal: color-mix(in oklab, black 60%, transparent);\n    --wa-color-overlay-inline: color-mix(in oklab, var(--wa-color-neutral-50) 10%, transparent);\n\n    --wa-color-shadow: color-mix(\n      in oklab,\n      var(--wa-color-surface-lowered) calc(var(--wa-shadow-blur-scale) * 32% + 40%),\n      transparent\n    );\n\n    --wa-color-focus: var(--wa-color-brand-60);\n\n    --wa-color-mix-hover: black 8%;\n    --wa-color-mix-active: black 16%;\n\n    --wa-color-brand-fill-quiet: var(--wa-color-brand-10);\n    --wa-color-brand-fill-normal: var(--wa-color-brand-20);\n    --wa-color-brand-fill-loud: var(--wa-color-brand-50);\n    --wa-color-brand-border-quiet: var(--wa-color-brand-20);\n    --wa-color-brand-border-normal: var(--wa-color-brand-30);\n    --wa-color-brand-border-loud: var(--wa-color-brand-40);\n    --wa-color-brand-on-quiet: var(--wa-color-brand-60);\n    --wa-color-brand-on-normal: var(--wa-color-brand-70);\n    --wa-color-brand-on-loud: white;\n\n    --wa-color-success-fill-quiet: var(--wa-color-success-10);\n    --wa-color-success-fill-normal: var(--wa-color-success-20);\n    --wa-color-success-fill-loud: var(--wa-color-success-50);\n    --wa-color-success-border-quiet: var(--wa-color-success-20);\n    --wa-color-success-border-normal: var(--wa-color-success-30);\n    --wa-color-success-border-loud: var(--wa-color-success-40);\n    --wa-color-success-on-quiet: var(--wa-color-success-60);\n    --wa-color-success-on-normal: var(--wa-color-success-70);\n    --wa-color-success-on-loud: white;\n\n    --wa-color-warning-fill-quiet: var(--wa-color-warning-10);\n    --wa-color-warning-fill-normal: var(--wa-color-warning-20);\n    --wa-color-warning-fill-loud: var(--wa-color-warning-50);\n    --wa-color-warning-border-quiet: var(--wa-color-warning-20);\n    --wa-color-warning-border-normal: var(--wa-color-warning-30);\n    --wa-color-warning-border-loud: var(--wa-color-warning-40);\n    --wa-color-warning-on-quiet: var(--wa-color-warning-60);\n    --wa-color-warning-on-normal: var(--wa-color-warning-70);\n    --wa-color-warning-on-loud: white;\n\n    --wa-color-danger-fill-quiet: var(--wa-color-danger-10);\n    --wa-color-danger-fill-normal: var(--wa-color-danger-20);\n    --wa-color-danger-fill-loud: var(--wa-color-danger-50);\n    --wa-color-danger-border-quiet: var(--wa-color-danger-20);\n    --wa-color-danger-border-normal: var(--wa-color-danger-30);\n    --wa-color-danger-border-loud: var(--wa-color-danger-40);\n    --wa-color-danger-on-quiet: var(--wa-color-danger-60);\n    --wa-color-danger-on-normal: var(--wa-color-danger-70);\n    --wa-color-danger-on-loud: white;\n\n    --wa-color-neutral-fill-quiet: var(--wa-color-neutral-10);\n    --wa-color-neutral-fill-normal: var(--wa-color-neutral-20);\n    --wa-color-neutral-fill-loud: var(--wa-color-neutral-90);\n    --wa-color-neutral-border-quiet: var(--wa-color-neutral-20);\n    --wa-color-neutral-border-normal: var(--wa-color-neutral-30);\n    --wa-color-neutral-border-loud: var(--wa-color-neutral-40);\n    --wa-color-neutral-on-quiet: var(--wa-color-neutral-60);\n    --wa-color-neutral-on-normal: var(--wa-color-neutral-70);\n    --wa-color-neutral-on-loud: var(--wa-color-neutral-05);\n    /* #endregion */\n  }\n\n  :where(:root),\n  .wa-theme-default,\n  .wa-light,\n  .wa-dark,\n  .wa-invert {\n    font-family: var(--wa-font-family-body);\n\n    /* #region Fonts ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-font-family-body: ui-sans-serif, system-ui, sans-serif;\n    --wa-font-family-heading: var(--wa-font-family-body);\n    --wa-font-family-code: ui-monospace, monospace;\n    --wa-font-family-longform: ui-serif, serif;\n\n    /* Font sizes use a ratio of 1.125 to scale sizes proportionally.\n     * For larger font sizes, each size is twice 1.125x larger to maximize impact.\n     * Each value uses `rem` units and is rounded to the nearest whole pixel when rendered. */\n    --wa-font-size-scale: 1;\n    --wa-font-size-2xs: round(calc(var(--wa-font-size-xs) / 1.125), 1px); /* 11px */\n    --wa-font-size-xs: round(calc(var(--wa-font-size-s) / 1.125), 1px); /* 12px */\n    --wa-font-size-s: round(calc(var(--wa-font-size-m) / 1.125), 1px); /* 14px */\n    --wa-font-size-m: calc(1rem * var(--wa-font-size-scale)); /* 16px */\n    --wa-font-size-l: round(calc(var(--wa-font-size-m) * 1.125 * 1.125), 1px); /* 20px */\n    --wa-font-size-xl: round(calc(var(--wa-font-size-l) * 1.125 * 1.125), 1px); /* 25px */\n    --wa-font-size-2xl: round(calc(var(--wa-font-size-xl) * 1.125 * 1.125), 1px); /* 32px */\n    --wa-font-size-3xl: round(calc(var(--wa-font-size-2xl) * 1.125 * 1.125), 1px); /* 41px */\n    --wa-font-size-4xl: round(calc(var(--wa-font-size-3xl) * 1.125 * 1.125), 1px); /* 52px */\n\n    --wa-font-size-smaller: round(calc(1em / 1.125), 1px);\n    --wa-font-size-larger: round(calc(1em * 1.125 * 1.125), 1px);\n\n    --wa-font-weight-light: 300;\n    --wa-font-weight-normal: 400;\n    --wa-font-weight-semibold: 500;\n    --wa-font-weight-bold: 600;\n\n    --wa-font-weight-body: var(--wa-font-weight-normal);\n    --wa-font-weight-heading: var(--wa-font-weight-bold);\n    --wa-font-weight-code: var(--wa-font-weight-normal);\n    --wa-font-weight-longform: var(--wa-font-weight-normal);\n    --wa-font-weight-action: var(--wa-font-weight-semibold);\n\n    --wa-line-height-condensed: 1.2;\n    --wa-line-height-normal: 1.6;\n    --wa-line-height-expanded: 2;\n\n    --wa-link-decoration-default: underline color-mix(in oklab, currentColor 70%, transparent) dotted;\n    --wa-link-decoration-hover: underline;\n    /* #endregion */\n\n    /* #region Space ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-space-scale: 1;\n    --wa-space-3xs: calc(var(--wa-space-scale) * 0.125rem); /* 2px */\n    --wa-space-2xs: calc(var(--wa-space-scale) * 0.25rem); /* 4px */\n    --wa-space-xs: calc(var(--wa-space-scale) * 0.5rem); /* 8px */\n    --wa-space-s: calc(var(--wa-space-scale) * 0.75rem); /* 12px */\n    --wa-space-m: calc(var(--wa-space-scale) * 1rem); /* 16px */\n    --wa-space-l: calc(var(--wa-space-scale) * 1.5rem); /* 24px */\n    --wa-space-xl: calc(var(--wa-space-scale) * 2rem); /* 32px */\n    --wa-space-2xl: calc(var(--wa-space-scale) * 2.5rem); /* 40px */\n    --wa-space-3xl: calc(var(--wa-space-scale) * 3rem); /* 48px */\n    --wa-space-4xl: calc(var(--wa-space-scale) * 4rem); /* 64px */\n\n    --wa-content-spacing: var(--wa-space-l);\n    /* #endregion */\n\n    /* #region Borders ~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-border-style: solid;\n\n    --wa-border-width-scale: 1;\n    --wa-border-width-s: calc(var(--wa-border-width-scale) * 0.0625rem);\n    --wa-border-width-m: calc(var(--wa-border-width-scale) * 0.125rem);\n    --wa-border-width-l: calc(var(--wa-border-width-scale) * 0.1875rem);\n    /* #endregion */\n\n    /* #region Rounding ~~~~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-border-radius-scale: 1;\n    --wa-border-radius-s: calc(var(--wa-border-radius-scale) * 0.1875rem);\n    --wa-border-radius-m: calc(var(--wa-border-radius-scale) * 0.375rem);\n    --wa-border-radius-l: calc(var(--wa-border-radius-scale) * 0.75rem);\n\n    --wa-border-radius-pill: 9999px;\n    --wa-border-radius-circle: 50%;\n    --wa-border-radius-square: 0px;\n    /* #endregion */\n\n    /* #region Focus ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-focus-ring-style: solid;\n    --wa-focus-ring-width: 0.1875rem; /* 3px */\n    --wa-focus-ring: var(--wa-focus-ring-style) var(--wa-focus-ring-width) var(--wa-color-focus);\n    --wa-focus-ring-offset: 0.0625rem; /* 1px */\n    /* #endregion */\n\n    /* #region Shadows ~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-shadow-offset-x-scale: 0;\n    --wa-shadow-offset-x-s: calc(var(--wa-shadow-offset-x-scale) * 0.125rem);\n    --wa-shadow-offset-x-m: calc(var(--wa-shadow-offset-x-scale) * 0.25rem);\n    --wa-shadow-offset-x-l: calc(var(--wa-shadow-offset-x-scale) * 0.5rem);\n\n    --wa-shadow-offset-y-scale: 1;\n    --wa-shadow-offset-y-s: calc(var(--wa-shadow-offset-y-scale) * 0.125rem);\n    --wa-shadow-offset-y-m: calc(var(--wa-shadow-offset-y-scale) * 0.25rem);\n    --wa-shadow-offset-y-l: calc(var(--wa-shadow-offset-y-scale) * 0.5rem);\n\n    --wa-shadow-blur-scale: 1;\n    --wa-shadow-blur-s: calc(var(--wa-shadow-blur-scale) * 0.125rem);\n    --wa-shadow-blur-m: calc(var(--wa-shadow-blur-scale) * 0.25rem);\n    --wa-shadow-blur-l: calc(var(--wa-shadow-blur-scale) * 0.5rem);\n\n    --wa-shadow-spread-scale: -0.5;\n    --wa-shadow-spread-s: calc(var(--wa-shadow-spread-scale) * 0.125rem);\n    --wa-shadow-spread-m: calc(var(--wa-shadow-spread-scale) * 0.25rem);\n    --wa-shadow-spread-l: calc(var(--wa-shadow-spread-scale) * 0.5rem);\n\n    --wa-shadow-s: var(--wa-shadow-offset-x-s) var(--wa-shadow-offset-y-s) var(--wa-shadow-blur-s)\n      var(--wa-shadow-spread-s) var(--wa-color-shadow);\n    --wa-shadow-m: var(--wa-shadow-offset-x-m) var(--wa-shadow-offset-y-m) var(--wa-shadow-blur-m)\n      var(--wa-shadow-spread-m) var(--wa-color-shadow);\n    --wa-shadow-l: var(--wa-shadow-offset-x-l) var(--wa-shadow-offset-y-l) var(--wa-shadow-blur-l)\n      var(--wa-shadow-spread-l) var(--wa-color-shadow);\n    /* #endregion */\n\n    /* #region Transitions ~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-transition-easing: ease;\n    --wa-transition-slow: 300ms;\n    --wa-transition-normal: 150ms;\n    --wa-transition-fast: 75ms;\n    /* #endregion */\n\n    /* #region Components ~~~~~~~~~~~~~~~~~~~~~~~ */\n    /* Form Controls */\n    --wa-form-control-background-color: var(--wa-color-surface-default);\n\n    --wa-form-control-border-color: var(--wa-color-neutral-border-loud);\n    --wa-form-control-border-style: var(--wa-border-style);\n    --wa-form-control-border-width: var(--wa-border-width-s);\n    --wa-form-control-border-radius: var(--wa-border-radius-m);\n\n    --wa-form-control-activated-color: var(--wa-color-brand-fill-loud);\n\n    --wa-form-control-label-color: var(--wa-color-text-normal);\n    --wa-form-control-label-font-weight: var(--wa-font-weight-semibold);\n    --wa-form-control-label-line-height: var(--wa-line-height-condensed);\n\n    --wa-form-control-value-color: var(--wa-color-text-normal);\n    --wa-form-control-value-font-weight: var(--wa-font-weight-body);\n    --wa-form-control-value-line-height: var(--wa-line-height-condensed);\n\n    --wa-form-control-hint-color: var(--wa-color-text-quiet);\n    --wa-form-control-hint-font-weight: var(--wa-font-weight-body);\n    --wa-form-control-hint-line-height: var(--wa-line-height-normal);\n\n    --wa-form-control-placeholder-color: var(--wa-color-gray-50);\n\n    --wa-form-control-required-content: '*';\n    --wa-form-control-required-content-color: inherit;\n    --wa-form-control-required-content-offset: 0.1em;\n\n    --wa-form-control-padding-block: 0.75em;\n    --wa-form-control-padding-inline: 1em;\n    --wa-form-control-height: round(\n      calc(2 * var(--wa-form-control-padding-block) + 1em * var(--wa-form-control-value-line-height)),\n      1px\n    );\n    --wa-form-control-toggle-size: round(1.25em, 1px);\n\n    /* Panels */\n    --wa-panel-border-style: var(--wa-border-style);\n    --wa-panel-border-width: var(--wa-border-width-s);\n    --wa-panel-border-radius: var(--wa-border-radius-l);\n\n    /* Tooltips */\n    --wa-tooltip-arrow-size: 0.375rem;\n\n    --wa-tooltip-background-color: var(--wa-color-text-normal);\n\n    --wa-tooltip-border-color: var(--wa-tooltip-background-color);\n    --wa-tooltip-border-style: var(--wa-border-style);\n    --wa-tooltip-border-width: var(--wa-border-width-s);\n    --wa-tooltip-border-radius: var(--wa-border-radius-s);\n\n    --wa-tooltip-content-color: var(--wa-color-surface-default);\n    --wa-tooltip-font-size: var(--wa-font-size-s);\n    --wa-tooltip-line-height: var(--wa-line-height-normal);\n    /* #endregion */\n  }\n}\n\n.ir-dialog__footer {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  justify-content: flex-end;\n  width: 100%;\n}\n.dialog__loader-container {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 100%;\n  min-height: 50px;\n  min-width: 31rem;\n}\n\n.ir__drawer {\n  text-align: left !important;\n}\n\n.ir__drawer::part(header) {\n  border-bottom: 1px solid var(--wa-color-surface-border);\n  padding-bottom: calc(var(--spacing) / 2);\n  background-color: var(--ir-drawer-background-color, var(--wa-color-surface-default));\n}\n.ir__drawer::part(body) {\n  background-color: var(--ir-drawer-background-color, var(--wa-color-surface-default));\n  padding: 0;\n  padding-left: var(--ir-drawer-padding-left, var(--spacing));\n  padding-right: var(--ir-drawer-padding-right, var(--spacing));\n  padding-top: var(--ir-drawer-padding-top, var(--spacing));\n  padding-bottom: var(--ir-drawer-padding-bottom, var(--spacing));\n}\n.ir__drawer::part(footer) {\n  background-color: var(--ir-drawer-background-color, var(--wa-color-surface-default));\n  padding-top: calc(var(--spacing) / 2);\n  border-top: 1px solid var(--wa-color-surface-border);\n}\n.ir__drawer-footer {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  width: 100%;\n}\n.ir__drawer-footer > * {\n  flex: 1 1 0%;\n}\n.drawer__loader-container {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 100%;\n}\n\n/* Place project-wide overrides below. */\n.my-custom-style {\n  background: #000;\n  color: white;\n}\n/* body {\n  background-color: var(--wa-color-surface-default) !important;\n} */\nhtml {\n  font-size: 14px !important;\n}\n/* body {\n  background-color: var(---wa-color-surface-default) !important;\n  color: var(--wa-color-text-normal) !important;\n} */\n\n.ir-page__container {\n  display: flex;\n  flex-direction: column;\n  gap: var(--wa-space-l, 1.5rem);\n  padding: var(--wa-space-l);\n  position: relative;\n}\n\n.ir-price {\n  font-family: inherit;\n  font-size: 1rem;\n  font-weight: 800;\n  text-align: right;\n  white-space: nowrap;\n  color: var(--wa-color-text-normal);\n  margin: 0;\n  padding: 0;\n}\n.page-title {\n  font-family: var(--wa-font-family-heading);\n  font-weight: var(--wa-font-weight-heading);\n  line-height: var(--wa-line-height-condensed);\n  text-wrap: balance;\n  font-size: var(--wa-font-size-xl);\n}\n\n:root {\n  --wa-form-control-required-content-color: var(--wa-color-danger-border-loud, #f3676c);\n}\n/* td {\n  padding: 0 !important;\n} */\n.label-on-left {\n  display: grid;\n  gap: var(--wa-space-m);\n}\nwa-card::part(base) {\n  box-sizing: border-box;\n}\nwa-input[aria-invalid='true']::part(base),\nwa-textarea[aria-invalid='true']::part(base),\nwa-select[aria-invalid='true']::part(combobox) {\n  border-color: var(--wa-color-danger-border-loud);\n  outline-color: var(--wa-color-danger-border-loud);\n  border-width: 2px;\n}\n\n/* Shared layout for form controls inside wa-select, wa-input, wa-textarea */\n@media (min-width: 768px) {\n  /* .label-on-left wa-switch::part(label) {\n    margin-inline-start: 0;\n    margin-inline-end: 0.5rem;\n  } */\n  .label-on-left {\n    align-items: center;\n    grid-template-columns: auto 1fr;\n  }\n  .label-on-left wa-switch::part(base),\n  .label-on-left wa-select::part(form-control),\n  .label-on-left wa-select,\n  .label-on-left wa-switch,\n  .label-on-left wa-input,\n  .label-on-left wa-textarea {\n    grid-column: 1 / -1;\n    grid-row-end: span 2;\n    display: grid;\n    grid-template-columns: subgrid;\n    gap: 0 var(--wa-space-l);\n    align-items: center;\n  }\n  .label-on-left wa-switch::part(base) {\n    direction: rtl;\n  }\n  .label-on-left wa-switch::part(base) > * {\n    justify-self: flex-start;\n    justify-content: flex-start;\n    direction: ltr; /* fix text direction */\n  }\n  /* Label alignment */\n  .label-on-left ::part(label) {\n    justify-content: flex-end;\n  }\n\n  /* Hint always in second column */\n  .label-on-left ::part(hint) {\n    grid-column: 2;\n  }\n}\n\n.ir-preview-print-container {\n  position: fixed;\n  inset: 0;\n  opacity: 0;\n  pointer-events: none;\n  z-index: -1;\n}\n\n@media print {\n  body.ir-preview-dialog-print-mode {\n    background: #fff !important;\n  }\n  body.ir-preview-dialog-print-mode > *:not(.ir-preview-print-container) {\n    display: none !important;\n  }\n  body.ir-preview-dialog-print-mode .ir-preview-print-container {\n    opacity: 1;\n    pointer-events: auto;\n    position: static;\n    z-index: auto;\n    width: 100%;\n    min-height: auto;\n    margin: 0 auto;\n    padding: 1.5rem;\n    box-sizing: border-box;\n  }\n}\n\n@page {\n  margin: 0.5in;\n}\n";const $i=Ni;const Li=class{constructor(t){e(this,t)}extraResources="";disableResourceInjection;resources=Ri;componentWillLoad(){this.parseRefs()}componentDidLoad(){this.initializeStyles()}hrefsChanged(){this.parseRefs();this.initializeStyles()}parseRefs(){if(this.disableResourceInjection){return}if(this.extraResources!=="")this.resources.push(JSON.parse(this.extraResources))}appendTag(e,t){const a=document.createElement(e);const i=[];Object.keys(t).forEach((e=>{a.setAttribute(e,t[e]);i.push(`[${e}="${t[e]}"]`)}));const r=`${e}${i.join("")}`;const o=document.querySelector(r);if(!o){document.head.appendChild(a)}}initializeStyles(){if(this.disableResourceInjection){return}this.resources.forEach((e=>{if(e.isCSS){this.appendTag("link",{href:e.link,rel:"stylesheet",type:"text/css"})}if(e.isJS){this.appendTag("script",{src:e.link})}}))}render(){return null}static get watchers(){return{extraResources:["hrefsChanged"]}}};Li.style=$i;const Pi=".sc-ir-country-picker-h{display:block;margin:0;padding:0;box-sizing:border-box}.combobox-menu.sc-ir-country-picker{max-height:200px;overflow:auto}";const Hi=Pi;const Fi=class{constructor(a){e(this,a);this.countryChange=t(this,"countryChange",7)}size;variant="default";countries=[];country;error;propertyCountry;label;testId;autoValidate=false;inputValue;selectedCountry;filteredCountries=[];searching=false;countryChange;debounceTimeout;componentWillLoad(){this.filteredCountries=[...this.countries];if(this.country){this.inputValue=this.country.name;this.selectedCountry=this.country}}handleCountryChange(e,t){if(e?.id!==t?.id){this.inputValue=this.country?.name;this.selectedCountry=e}}filterCountries(){if(this.inputValue===""&&this.country){this.selectCountry(null)}clearTimeout(this.debounceTimeout);this.debounceTimeout=setTimeout((()=>{if(!this.inputValue){this.filteredCountries=[...this.countries]}else{this.filteredCountries=this.countries.filter((e=>e.name.toLowerCase().includes(this.inputValue.toLowerCase())))}}),300)}selectCountry(e){this.selectedCountry=e;this.inputValue=e?.name;this.filteredCountries=[...this.countries];this.countryChange.emit(e)}scrollToSelected(){setTimeout((()=>{const e=document.querySelector(`.dropdown-item.active`);if(e){e.scrollIntoView({behavior:"instant",block:"center"})}}),100)}render(){const e=this.filteredCountries.length>0&&this.propertyCountry&&(!this.searching||this.searching&&this.inputValue==="");if(this.variant==="modern"){return a("ir-picker",{size:this.size,label:this.label,mode:"select",value:this.selectedCountry?.id?.toString(),"onCombobox-select":e=>{const t=this.filteredCountries.find((t=>t.id.toString()===e.detail.item.value));if(!t){console.warn(`country not found`,e.detail.item);return}this.selectCountry(t)}},this.filteredCountries.map((e=>a("ir-picker-item",{value:e.id?.toString(),label:e.name,key:e.id},a("img",{src:e.flag,alt:e.name,style:{aspectRatio:"1",height:"15px",borderRadius:"4px"}}),a("p",{class:"pl-1 m-0"},e.name)))))}return a("form",{class:"dropdown m-0 p-0"},a("ir-input-text",{onTextChange:e=>{if(!this.searching){this.searching=true}this.inputValue=e.detail;this.filterCountries()},testId:this.testId,autoValidate:this.autoValidate,label:this.label,error:this.error,placeholder:"",class:"m-0 p-0",value:this.inputValue,id:"dropdownMenuCombobox","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",onInputFocus:()=>this.scrollToSelected(),onInputBlur:()=>{this.searching=false;if(this.filteredCountries.length>0&&this.inputValue&&this.inputValue.trim()!==""){this.selectCountry(this.filteredCountries[0])}}}),a("div",{class:"dropdown-menu combobox-menu","aria-labelledby":"dropdownMenuCombobox"},e&&a(o,null,a("button",{type:"button",class:`dropdown-item d-flex align-items-center ${this.selectedCountry?.id===this.propertyCountry.id?"active":""}`,onClick:()=>{this.selectCountry(this.propertyCountry)}},a("img",{src:this.propertyCountry.flag,alt:this.propertyCountry.name,style:{aspectRatio:"1",height:"15px",borderRadius:"4px"}}),a("p",{class:"pl-1 m-0"},this.propertyCountry.name)),a("div",{class:"dropdown-divider"})),this.filteredCountries?.map((e=>a("button",{key:e.id,type:"button",class:`dropdown-item d-flex align-items-center ${this.selectedCountry?.id===e.id?"active":""}`,onClick:()=>{this.selectCountry(e)}},a("img",{src:e.flag,alt:e.name,style:{aspectRatio:"1",height:"15px",borderRadius:"4px"}}),a("p",{class:"pl-1 m-0"},e.name)))),this.filteredCountries?.length===0&&a("p",{class:"dropdown-item-text"},"Invalid Country")))}static get watchers(){return{country:["handleCountryChange"]}}};Fi.style=Hi;const Ui=":host{display:block}.ir__custom-button{width:100%}.ir__custom-button.--icon::part(base){height:auto;width:auto;padding:0}.ir__custom-button::part(base){height:var(--ir-c-btn-height, var(--wa-form-control-height));padding:var(--ir-c-btn-padding, 0 var(--wa-form-control-padding-inline));font-size:var(--ir-c-btn-font-size, auto)}.ir__custom-button.--link::part(base){height:fit-content;padding:0}.ir-button__link:focus{outline:none}.ir-button__link:focus-visible{outline:var(--wa-focus-ring);outline-offset:var(--wa-focus-ring-offset)}.ir-button__link{display:inline-flex;align-items:center;justify-content:center;height:fit-content;padding:0;font-family:inherit;font-size:var(--wa-form-control-value-font-size);font-weight:var(--wa-font-weight-action);line-height:calc(var(--wa-form-control-height) - var(--border-width) * 2);text-decoration:none;vertical-align:middle;white-space:nowrap;border-style:var(--wa-border-style);border-width:max(1px, var(--wa-form-control-border-width));border-radius:var(--wa-form-control-border-radius);transition-property:background, border, box-shadow, color;transition-duration:var(--wa-transition-fast);transition-timing-function:var(--wa-transition-easing);cursor:pointer;user-select:none;-webkit-user-select:none;color:var(--wa-color-on-quiet, var(--wa-color-brand-on-quiet));background-color:transparent;border-color:transparent}.ir-button__link:hover{color:var(--wa-color-on-quiet, var(--wa-color-brand-on-quiet));background-color:var(--wa-color-fill-quiet, var(--wa-color-brand-fill-quiet))}.ir-button__link:active{color:var(--wa-color-on-quiet, var(--wa-color-brand-on-quiet));background-color:color-mix(in oklab, var(--wa-color-fill-quiet, var(--wa-color-brand-fill-quiet)), var(--wa-color-mix-active))}";const ji=Ui;const Vi=class{constructor(a){e(this,a);this.clickHandler=t(this,"clickHandler",7)}get el(){return r(this)}link;iconBtn;variant;appearance;size="small";withCaret;disabled;loading;pill;type="button";name;value;href;target;rel;download;form;formAction;formEnctype;formMethod;formNoValidate;formTarget;clickHandler;handleButtonClick(e){this.clickHandler.emit(e)}render(){if(this.link){return a("button",{class:"ir-button__link",onClick:e=>{this.clickHandler.emit(e)}},a("slot",{slot:"start",name:"start"}),a("slot",null),a("slot",{slot:"end",name:"end"}))}return a(i,null,a("wa-button",{onClick:e=>{this.handleButtonClick(e)},type:this.type,size:this.size,class:`ir__custom-button ${this.iconBtn?"--icon":""} ${this.link?"--link":""}`,disabled:this.disabled,appearance:this.link?"plain":this.appearance,loading:this.loading,"with-caret":this.withCaret,variant:this.link?"brand":this.variant,pill:this.pill,href:this.href,target:this.target,rel:this.rel,download:this.download,name:this.name,value:this.value,form:this.form,"form-action":this.formAction,"form-enctype":this.formEnctype,"form-method":this.formMethod,"form-no-validate":this.formNoValidate,"form-target":this.formTarget,exportparts:"base, start, label, end, caret, spinner"},a("slot",{slot:"start",name:"start"}),a("slot",null),a("slot",{slot:"end",name:"end"})))}};Vi.style=ji;function Gi(){return(e,t,a)=>{const i=e.connectedCallback;const r=e.disconnectedCallback;const o=e.componentDidUnload;e.connectedCallback=function(...e){const a=Wi(this);if(a){const e=this[t]?.bind(this);if(e){qi(this,a,e)}}return i?.apply(this,e)};e.disconnectedCallback=function(...e){const t=Wi(this);if(t){Ki(t)}return r?.apply(this,e)};e.componentDidUnload=function(...e){const t=Wi(this);if(t){Ki(t)}return o?.apply(this,e)};return a}}function qi(e,t,a){if(!t||!Ji())return;if(t.__irClickOutsideCleanup__)return;const i=i=>{if(Xi(t,i)){return}a.call(e,i)};window.addEventListener("click",i,true);t.__irClickOutsideCleanup__=()=>{window.removeEventListener("click",i,true)}}function Ki(e){if(!e||!Ji())return;e.__irClickOutsideCleanup__?.();delete e.__irClickOutsideCleanup__}function Wi(e){if(!Ji())return null;try{return r(e)}catch{return null}}function Xi(e,t){if(!t)return false;const a=typeof t.composedPath==="function"?t.composedPath():[];if(Array.isArray(a)&&a.includes(e)){return true}const i=t.target;if(!i)return false;if(e===i)return true;if(typeof e.contains==="function"&&e.contains(i))return true;return!!e.shadowRoot?.contains(i)}function Ji(){return typeof window!=="undefined"&&typeof document!=="undefined"}const Qi='.air-datepicker-cell.-year-.-other-decade-,.air-datepicker-cell.-day-.-other-month-{color:var(--adp-color-other-month)}.air-datepicker-cell.-year-.-other-decade-:hover,.air-datepicker-cell.-day-.-other-month-:hover{color:var(--adp-color-other-month-hover)}.-disabled-.-focus-.air-datepicker-cell.-year-.-other-decade-,.-disabled-.-focus-.air-datepicker-cell.-day-.-other-month-{color:var(--adp-color-other-month)}.-selected-.air-datepicker-cell.-year-.-other-decade-,.-selected-.air-datepicker-cell.-day-.-other-month-{color:#fff;background:var(--adp-background-color-selected-other-month)}.-selected-.-focus-.air-datepicker-cell.-year-.-other-decade-,.-selected-.-focus-.air-datepicker-cell.-day-.-other-month-{background:var(--adp-background-color-selected-other-month-focused)}.-in-range-.air-datepicker-cell.-year-.-other-decade-,.-in-range-.air-datepicker-cell.-day-.-other-month-{background-color:var(--adp-background-color-in-range);color:var(--adp-color)}.-in-range-.-focus-.air-datepicker-cell.-year-.-other-decade-,.-in-range-.-focus-.air-datepicker-cell.-day-.-other-month-{background-color:var(--adp-background-color-in-range-focused)}.air-datepicker-cell.-year-.-other-decade-:empty,.air-datepicker-cell.-day-.-other-month-:empty{background:none;border:none}.air-datepicker-cell{border-radius:var(--adp-cell-border-radius);box-sizing:border-box;cursor:pointer;display:flex;position:relative;align-items:center;justify-content:center;z-index:1}.air-datepicker-cell.-focus-{background:var(--adp-cell-background-color-hover)}.air-datepicker-cell.-current-{color:var(--adp-color-current-date)}.air-datepicker-cell.-current-.-focus-{color:var(--adp-color)}.air-datepicker-cell.-current-.-in-range-{color:var(--adp-color-current-date)}.air-datepicker-cell.-disabled-{cursor:default;color:var(--adp-color-disabled)}.air-datepicker-cell.-disabled-.-focus-{color:var(--adp-color-disabled)}.air-datepicker-cell.-disabled-.-in-range-{color:var(--adp-color-disabled-in-range)}.air-datepicker-cell.-disabled-.-current-.-focus-{color:var(--adp-color-disabled)}.air-datepicker-cell.-in-range-{background:var(--adp-cell-background-color-in-range);border-radius:0}.air-datepicker-cell.-in-range-:hover,.air-datepicker-cell.-in-range-.-focus-{background:var(--adp-cell-background-color-in-range-hover)}.air-datepicker-cell.-range-from-{border:1px solid var(--adp-cell-border-color-in-range);background-color:var(--adp-cell-background-color-in-range);border-radius:var(--adp-cell-border-radius) 0 0 var(--adp-cell-border-radius)}.air-datepicker-cell.-range-to-{border:1px solid var(--adp-cell-border-color-in-range);background-color:var(--adp-cell-background-color-in-range);border-radius:0 var(--adp-cell-border-radius) var(--adp-cell-border-radius) 0}.air-datepicker-cell.-range-to-.-range-from-{border-radius:var(--adp-cell-border-radius)}.air-datepicker-cell.-selected-{color:#fff;border:none;background:var(--adp-cell-background-color-selected)}.air-datepicker-cell.-selected-.-current-{color:#fff;background:var(--adp-cell-background-color-selected)}.air-datepicker-cell.-selected-.-focus-{background:var(--adp-cell-background-color-selected-hover)}\n.air-datepicker-body{transition:all var(--adp-transition-duration) var(--adp-transition-ease)}.air-datepicker-body.-hidden-{display:none}.air-datepicker-body--day-names{display:grid;grid-template-columns:repeat(7, var(--adp-day-cell-width));margin:8px 0 3px}.air-datepicker-body--day-name{color:var(--adp-day-name-color);display:flex;align-items:center;justify-content:center;flex:1;text-align:center;text-transform:uppercase;font-size:.8em}.air-datepicker-body--day-name.-clickable-{cursor:pointer}.air-datepicker-body--day-name.-clickable-:hover{color:var(--adp-day-name-color-hover)}.air-datepicker-body--cells{display:grid}.air-datepicker-body--cells.-days-{grid-template-columns:repeat(7, var(--adp-day-cell-width));grid-auto-rows:var(--adp-day-cell-height)}.air-datepicker-body--cells.-months-{grid-template-columns:repeat(3, 1fr);grid-auto-rows:var(--adp-month-cell-height)}.air-datepicker-body--cells.-years-{grid-template-columns:repeat(4, 1fr);grid-auto-rows:var(--adp-year-cell-height)}\n.air-datepicker-nav{display:flex;justify-content:space-between;border-bottom:1px solid var(--adp-border-color-inner);min-height:var(--adp-nav-height);padding:var(--adp-padding);box-sizing:content-box}.-only-timepicker- .air-datepicker-nav{display:none}.air-datepicker-nav--title,.air-datepicker-nav--action{display:flex;cursor:pointer;align-items:center;justify-content:center}.air-datepicker-nav--action{width:var(--adp-nav-action-size);border-radius:var(--adp-border-radius);-webkit-user-select:none;-moz-user-select:none;user-select:none}.air-datepicker-nav--action:hover{background:var(--adp-background-color-hover)}.air-datepicker-nav--action:active{background:var(--adp-background-color-active)}.air-datepicker-nav--action.-disabled-{visibility:hidden}.air-datepicker-nav--action svg{width:32px;height:32px}.air-datepicker-nav--action path{fill:none;stroke:var(--adp-nav-arrow-color);stroke-width:2px}.air-datepicker-nav--title{border-radius:var(--adp-border-radius);padding:0 8px}.air-datepicker-nav--title i{font-style:normal;color:var(--adp-nav-color-secondary);margin-left:.3em}.air-datepicker-nav--title:hover{background:var(--adp-background-color-hover)}.air-datepicker-nav--title:active{background:var(--adp-background-color-active)}.air-datepicker-nav--title.-disabled-{cursor:default;background:none}\n.air-datepicker-buttons{display:grid;grid-auto-columns:1fr;grid-auto-flow:column}.air-datepicker-button{display:inline-flex;color:var(--adp-btn-color);border-radius:var(--adp-btn-border-radius);cursor:pointer;height:var(--adp-btn-height);border:none;background:rgba(255,255,255,0)}.air-datepicker-button:hover{color:var(--adp-btn-color-hover);background:var(--adp-btn-background-color-hover)}.air-datepicker-button:focus{color:var(--adp-btn-color-hover);background:var(--adp-btn-background-color-hover);outline:none}.air-datepicker-button:active{background:var(--adp-btn-background-color-active)}.air-datepicker-button span{outline:none;display:flex;align-items:center;justify-content:center;width:100%;height:100%}\n.air-datepicker-time{display:grid;grid-template-columns:max-content 1fr;grid-column-gap:12px;align-items:center;position:relative;padding:0 var(--adp-time-padding-inner)}.-only-timepicker- .air-datepicker-time{border-top:none}.air-datepicker-time--current{display:flex;align-items:center;flex:1;font-size:14px;text-align:center}.air-datepicker-time--current-colon{margin:0 2px 3px;line-height:1}.air-datepicker-time--current-hours,.air-datepicker-time--current-minutes{line-height:1;font-size:19px;font-family:"Century Gothic",CenturyGothic,AppleGothic,sans-serif;position:relative;z-index:1}.air-datepicker-time--current-hours:after,.air-datepicker-time--current-minutes:after{content:"";background:var(--adp-background-color-hover);border-radius:var(--adp-border-radius);position:absolute;left:-2px;top:-3px;right:-2px;bottom:-2px;z-index:-1;opacity:0}.air-datepicker-time--current-hours.-focus-:after,.air-datepicker-time--current-minutes.-focus-:after{opacity:1}.air-datepicker-time--current-ampm{text-transform:uppercase;align-self:flex-end;color:var(--adp-time-day-period-color);margin-left:6px;font-size:11px;margin-bottom:1px}.air-datepicker-time--row{display:flex;align-items:center;font-size:11px;height:17px;background:linear-gradient(to right, var(--adp-time-track-color), var(--adp-time-track-color)) left 50%/100% var(--adp-time-track-height) no-repeat}.air-datepicker-time--row:first-child{margin-bottom:4px}.air-datepicker-time--row input[type=range]{background:none;cursor:pointer;flex:1;height:100%;width:100%;padding:0;margin:0;-webkit-appearance:none}.air-datepicker-time--row input[type=range]::-webkit-slider-thumb{-webkit-appearance:none}.air-datepicker-time--row input[type=range]::-ms-tooltip{display:none}.air-datepicker-time--row input[type=range]:hover::-webkit-slider-thumb{border-color:var(--adp-time-track-color-hover)}.air-datepicker-time--row input[type=range]:hover::-moz-range-thumb{border-color:var(--adp-time-track-color-hover)}.air-datepicker-time--row input[type=range]:hover::-ms-thumb{border-color:var(--adp-time-track-color-hover)}.air-datepicker-time--row input[type=range]:focus{outline:none}.air-datepicker-time--row input[type=range]:focus::-webkit-slider-thumb{background:var(--adp-cell-background-color-selected);border-color:var(--adp-cell-background-color-selected)}.air-datepicker-time--row input[type=range]:focus::-moz-range-thumb{background:var(--adp-cell-background-color-selected);border-color:var(--adp-cell-background-color-selected)}.air-datepicker-time--row input[type=range]:focus::-ms-thumb{background:var(--adp-cell-background-color-selected);border-color:var(--adp-cell-background-color-selected)}.air-datepicker-time--row input[type=range]::-webkit-slider-thumb{box-sizing:border-box;height:12px;width:12px;border-radius:3px;border:1px solid var(--adp-time-track-color);background:#fff;cursor:pointer;-webkit-transition:background var(--adp-transition-duration);transition:background var(--adp-transition-duration)}.air-datepicker-time--row input[type=range]::-moz-range-thumb{box-sizing:border-box;height:12px;width:12px;border-radius:3px;border:1px solid var(--adp-time-track-color);background:#fff;cursor:pointer;-moz-transition:background var(--adp-transition-duration);transition:background var(--adp-transition-duration)}.air-datepicker-time--row input[type=range]::-ms-thumb{box-sizing:border-box;height:12px;width:12px;border-radius:3px;border:1px solid var(--adp-time-track-color);background:#fff;cursor:pointer;-ms-transition:background var(--adp-transition-duration);transition:background var(--adp-transition-duration)}.air-datepicker-time--row input[type=range]::-webkit-slider-thumb{margin-top:calc(var(--adp-time-thumb-size)/2*-1)}.air-datepicker-time--row input[type=range]::-webkit-slider-runnable-track{border:none;height:var(--adp-time-track-height);cursor:pointer;color:rgba(0,0,0,0);background:rgba(0,0,0,0)}.air-datepicker-time--row input[type=range]::-moz-range-track{border:none;height:var(--adp-time-track-height);cursor:pointer;color:rgba(0,0,0,0);background:rgba(0,0,0,0)}.air-datepicker-time--row input[type=range]::-ms-track{border:none;height:var(--adp-time-track-height);cursor:pointer;color:rgba(0,0,0,0);background:rgba(0,0,0,0)}.air-datepicker-time--row input[type=range]::-ms-fill-lower{background:rgba(0,0,0,0)}.air-datepicker-time--row input[type=range]::-ms-fill-upper{background:rgba(0,0,0,0)}\n.air-datepicker{--adp-font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";--adp-font-size: 14px;--adp-width: 246px;--adp-z-index: 100;--adp-padding: 4px;--adp-grid-areas: "nav" "body" "timepicker" "buttons";--adp-transition-duration: .3s;--adp-transition-ease: ease-out;--adp-transition-offset: 8px;--adp-background-color: #fff;--adp-background-color-hover: #f0f0f0;--adp-background-color-active: #eaeaea;--adp-background-color-in-range: rgba(92, 196, 239, .1);--adp-background-color-in-range-focused: rgba(92, 196, 239, .2);--adp-background-color-selected-other-month-focused: #8ad5f4;--adp-background-color-selected-other-month: #a2ddf6;--adp-color: #4a4a4a;--adp-color-secondary: #9c9c9c;--adp-accent-color: #4eb5e6;--adp-color-current-date: var(--adp-accent-color);--adp-color-other-month: #dedede;--adp-color-disabled: #aeaeae;--adp-color-disabled-in-range: #939393;--adp-color-other-month-hover: #c5c5c5;--adp-border-color: #dbdbdb;--adp-border-color-inner: #efefef;--adp-border-radius: 4px;--adp-border-color-inline: #d7d7d7;--adp-nav-height: 32px;--adp-nav-arrow-color: var(--adp-color-secondary);--adp-nav-action-size: 32px;--adp-nav-color-secondary: var(--adp-color-secondary);--adp-day-name-color: #ff9a19;--adp-day-name-color-hover: #8ad5f4;--adp-day-cell-width: 1fr;--adp-day-cell-height: 32px;--adp-month-cell-height: 42px;--adp-year-cell-height: 56px;--adp-pointer-size: 10px;--adp-poiner-border-radius: 2px;--adp-pointer-offset: 14px;--adp-cell-border-radius: 4px;--adp-cell-background-color-hover: var(--adp-background-color-hover);--adp-cell-background-color-selected: #5cc4ef;--adp-cell-background-color-selected-hover: #45bced;--adp-cell-background-color-in-range: rgba(92, 196, 239, 0.1);--adp-cell-background-color-in-range-hover: rgba(92, 196, 239, 0.2);--adp-cell-border-color-in-range: var(--adp-cell-background-color-selected);--adp-btn-height: 32px;--adp-btn-color: var(--adp-accent-color);--adp-btn-color-hover: var(--adp-color);--adp-btn-border-radius: var(--adp-border-radius);--adp-btn-background-color-hover: var(--adp-background-color-hover);--adp-btn-background-color-active: var(--adp-background-color-active);--adp-time-track-height: 1px;--adp-time-track-color: #dedede;--adp-time-track-color-hover: #b1b1b1;--adp-time-thumb-size: 12px;--adp-time-padding-inner: 10px;--adp-time-day-period-color: var(--adp-color-secondary);--adp-mobile-font-size: 16px;--adp-mobile-nav-height: 40px;--adp-mobile-width: 320px;--adp-mobile-day-cell-height: 38px;--adp-mobile-month-cell-height: 48px;--adp-mobile-year-cell-height: 64px}.air-datepicker-overlay{--adp-overlay-background-color: rgba(0, 0, 0, .3);--adp-overlay-transition-duration: .3s;--adp-overlay-transition-ease: ease-out;--adp-overlay-z-index: 99}\n.air-datepicker{background:var(--adp-background-color);border:1px solid var(--adp-border-color);box-shadow:0 4px 12px rgba(0,0,0,.15);border-radius:var(--adp-border-radius);box-sizing:content-box;display:grid;grid-template-columns:1fr;grid-template-rows:repeat(4, max-content);grid-template-areas:var(--adp-grid-areas);font-family:var(--adp-font-family),sans-serif;font-size:var(--adp-font-size);color:var(--adp-color);width:var(--adp-width);position:absolute;transition:opacity var(--adp-transition-duration) var(--adp-transition-ease),transform var(--adp-transition-duration) var(--adp-transition-ease);z-index:var(--adp-z-index)}.air-datepicker:not(.-custom-position-){opacity:0}.air-datepicker.-from-top-{transform:translateY(calc(var(--adp-transition-offset) * -1))}.air-datepicker.-from-right-{transform:translateX(var(--adp-transition-offset))}.air-datepicker.-from-bottom-{transform:translateY(var(--adp-transition-offset))}.air-datepicker.-from-left-{transform:translateX(calc(var(--adp-transition-offset) * -1))}.air-datepicker.-active-:not(.-custom-position-){transform:translate(0, 0);opacity:1}.air-datepicker.-active-.-custom-position-{transition:none}.air-datepicker.-inline-{border-color:var(--adp-border-color-inline);box-shadow:none;position:static;left:auto;right:auto;opacity:1;transform:none}.air-datepicker.-inline- .air-datepicker--pointer{display:none}.air-datepicker.-is-mobile-{--adp-font-size: var(--adp-mobile-font-size);--adp-day-cell-height: var(--adp-mobile-day-cell-height);--adp-month-cell-height: var(--adp-mobile-month-cell-height);--adp-year-cell-height: var(--adp-mobile-year-cell-height);--adp-nav-height: var(--adp-mobile-nav-height);--adp-nav-action-size: var(--adp-mobile-nav-height);position:fixed;width:var(--adp-mobile-width);border:none}.air-datepicker.-is-mobile- *{-webkit-tap-highlight-color:rgba(0,0,0,0)}.air-datepicker.-is-mobile- .air-datepicker--pointer{display:none}.air-datepicker.-is-mobile-:not(.-custom-position-){transform:translate(-50%, calc(-50% + var(--adp-transition-offset)))}.air-datepicker.-is-mobile-.-active-:not(.-custom-position-){transform:translate(-50%, -50%)}.air-datepicker.-custom-position-{transition:none}.air-datepicker-global-container{position:absolute;left:0;top:0}.air-datepicker--pointer{--pointer-half-size: calc(var(--adp-pointer-size) / 2);position:absolute;width:var(--adp-pointer-size);height:var(--adp-pointer-size);z-index:-1}.air-datepicker--pointer:after{content:"";position:absolute;background:#fff;border-top:1px solid var(--adp-border-color-inline);border-right:1px solid var(--adp-border-color-inline);border-top-right-radius:var(--adp-poiner-border-radius);width:var(--adp-pointer-size);height:var(--adp-pointer-size);box-sizing:border-box}.-top-left- .air-datepicker--pointer,.-top-center- .air-datepicker--pointer,.-top-right- .air-datepicker--pointer,[data-popper-placement^=top] .air-datepicker--pointer{top:calc(100% - var(--pointer-half-size) + 1px)}.-top-left- .air-datepicker--pointer:after,.-top-center- .air-datepicker--pointer:after,.-top-right- .air-datepicker--pointer:after,[data-popper-placement^=top] .air-datepicker--pointer:after{transform:rotate(135deg)}.-right-top- .air-datepicker--pointer,.-right-center- .air-datepicker--pointer,.-right-bottom- .air-datepicker--pointer,[data-popper-placement^=right] .air-datepicker--pointer{right:calc(100% - var(--pointer-half-size) + 1px)}.-right-top- .air-datepicker--pointer:after,.-right-center- .air-datepicker--pointer:after,.-right-bottom- .air-datepicker--pointer:after,[data-popper-placement^=right] .air-datepicker--pointer:after{transform:rotate(225deg)}.-bottom-left- .air-datepicker--pointer,.-bottom-center- .air-datepicker--pointer,.-bottom-right- .air-datepicker--pointer,[data-popper-placement^=bottom] .air-datepicker--pointer{bottom:calc(100% - var(--pointer-half-size) + 1px)}.-bottom-left- .air-datepicker--pointer:after,.-bottom-center- .air-datepicker--pointer:after,.-bottom-right- .air-datepicker--pointer:after,[data-popper-placement^=bottom] .air-datepicker--pointer:after{transform:rotate(315deg)}.-left-top- .air-datepicker--pointer,.-left-center- .air-datepicker--pointer,.-left-bottom- .air-datepicker--pointer,[data-popper-placement^=left] .air-datepicker--pointer{left:calc(100% - var(--pointer-half-size) + 1px)}.-left-top- .air-datepicker--pointer:after,.-left-center- .air-datepicker--pointer:after,.-left-bottom- .air-datepicker--pointer:after,[data-popper-placement^=left] .air-datepicker--pointer:after{transform:rotate(45deg)}.-top-left- .air-datepicker--pointer,.-bottom-left- .air-datepicker--pointer{left:var(--adp-pointer-offset)}.-top-right- .air-datepicker--pointer,.-bottom-right- .air-datepicker--pointer{right:var(--adp-pointer-offset)}.-top-center- .air-datepicker--pointer,.-bottom-center- .air-datepicker--pointer{left:calc(50% - var(--adp-pointer-size)/2)}.-left-top- .air-datepicker--pointer,.-right-top- .air-datepicker--pointer{top:var(--adp-pointer-offset)}.-left-bottom- .air-datepicker--pointer,.-right-bottom- .air-datepicker--pointer{bottom:var(--adp-pointer-offset)}.-left-center- .air-datepicker--pointer,.-right-center- .air-datepicker--pointer{top:calc(50% - var(--adp-pointer-size)/2)}.air-datepicker--navigation{grid-area:nav}.air-datepicker--content{box-sizing:content-box;padding:var(--adp-padding);grid-area:body}.-only-timepicker- .air-datepicker--content{display:none}.air-datepicker--time{grid-area:timepicker}.air-datepicker--buttons{grid-area:buttons}.air-datepicker--buttons,.air-datepicker--time{padding:var(--adp-padding);border-top:1px solid var(--adp-border-color-inner)}.air-datepicker-overlay{position:fixed;background:var(--adp-overlay-background-color);left:0;top:0;width:0;height:0;opacity:0;transition:opacity var(--adp-overlay-transition-duration) var(--adp-overlay-transition-ease),left 0s,height 0s,width 0s;transition-delay:0s,var(--adp-overlay-transition-duration),var(--adp-overlay-transition-duration),var(--adp-overlay-transition-duration);z-index:var(--adp-overlay-z-index)}.air-datepicker-overlay.-active-{opacity:1;width:100%;height:100%;transition:opacity var(--adp-overlay-transition-duration) var(--adp-overlay-transition-ease),height 0s,width 0s}\n\n/* Generates --wa-color-{hue}-on tokens for pairing with any palette\'s key colors */\n:where(:root),\n:host {\n  /**\n    * Conditional tokens to check if the key color is >= 60\n    * Key colors are the most colorful tint in a scale, recorded as --wa-color-{hue} in each palette\n    * The numeric value of the key is isolated as --wa-color-{hue}-key\n    * If key < 60, the result is 0%\n    * If key >= 60, the result is 100%\n    * Intended to be used in the color-mix() functions below\n    */\n\n  --wa-color-red-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-red-key), 1) * 100%));\n  --wa-color-orange-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-orange-key), 1) * 100%));\n  --wa-color-yellow-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-yellow-key), 1) * 100%));\n  --wa-color-green-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-green-key), 1) * 100%));\n  --wa-color-cyan-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-cyan-key), 1) * 100%));\n  --wa-color-blue-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-blue-key), 1) * 100%));\n  --wa-color-indigo-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-indigo-key), 1) * 100%));\n  --wa-color-purple-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-purple-key), 1) * 100%));\n  --wa-color-pink-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-pink-key), 1) * 100%));\n  --wa-color-gray-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-gray-key), 1) * 100%));\n\n  /**\n    * Tokens to set text color with appropriate WCAG 2.1 contrast\n    * If key < 60, the text color is white\n    * If key >= 60, the text color is {hue}-10\n    */\n\n  --wa-color-red-on: color-mix(in oklab, var(--wa-color-red-10) var(--wa-color-red-gte-60), white);\n  --wa-color-orange-on: color-mix(in oklab, var(--wa-color-orange-10) var(--wa-color-orange-gte-60), white);\n  --wa-color-yellow-on: color-mix(in oklab, var(--wa-color-yellow-10) var(--wa-color-yellow-gte-60), white);\n  --wa-color-green-on: color-mix(in oklab, var(--wa-color-green-10) var(--wa-color-green-gte-60), white);\n  --wa-color-cyan-on: color-mix(in oklab, var(--wa-color-cyan-10) var(--wa-color-cyan-gte-60), white);\n  --wa-color-blue-on: color-mix(in oklab, var(--wa-color-blue-10) var(--wa-color-blue-gte-60), white);\n  --wa-color-indigo-on: color-mix(in oklab, var(--wa-color-indigo-10) var(--wa-color-indigo-gte-60), white);\n  --wa-color-purple-on: color-mix(in oklab, var(--wa-color-purple-10) var(--wa-color-purple-gte-60), white);\n  --wa-color-pink-on: color-mix(in oklab, var(--wa-color-pink-10) var(--wa-color-pink-gte-60), white);\n  --wa-color-gray-on: color-mix(in oklab, var(--wa-color-gray-10) var(--wa-color-gray-gte-60), white);\n}\n\n@layer wa-color-variant {\n  :where(:root), /* default */\n  .wa-brand-blue {\n    --wa-color-brand-95: var(--wa-color-blue-95);\n    --wa-color-brand-90: var(--wa-color-blue-90);\n    --wa-color-brand-80: var(--wa-color-blue-80);\n    --wa-color-brand-70: var(--wa-color-blue-70);\n    --wa-color-brand-60: var(--wa-color-blue-60);\n    --wa-color-brand-50: var(--wa-color-blue-50);\n    --wa-color-brand-40: var(--wa-color-blue-40);\n    --wa-color-brand-30: var(--wa-color-blue-30);\n    --wa-color-brand-20: var(--wa-color-blue-20);\n    --wa-color-brand-10: var(--wa-color-blue-10);\n    --wa-color-brand-05: var(--wa-color-blue-05);\n    --wa-color-brand: var(--wa-color-blue);\n    --wa-color-brand-on: var(--wa-color-blue-on);\n  }\n\n  .wa-brand-red {\n    --wa-color-brand-95: var(--wa-color-red-95);\n    --wa-color-brand-90: var(--wa-color-red-90);\n    --wa-color-brand-80: var(--wa-color-red-80);\n    --wa-color-brand-70: var(--wa-color-red-70);\n    --wa-color-brand-60: var(--wa-color-red-60);\n    --wa-color-brand-50: var(--wa-color-red-50);\n    --wa-color-brand-40: var(--wa-color-red-40);\n    --wa-color-brand-30: var(--wa-color-red-30);\n    --wa-color-brand-20: var(--wa-color-red-20);\n    --wa-color-brand-10: var(--wa-color-red-10);\n    --wa-color-brand-05: var(--wa-color-red-05);\n    --wa-color-brand: var(--wa-color-red);\n    --wa-color-brand-on: var(--wa-color-red-on);\n  }\n\n  .wa-brand-orange {\n    --wa-color-brand-95: var(--wa-color-orange-95);\n    --wa-color-brand-90: var(--wa-color-orange-90);\n    --wa-color-brand-80: var(--wa-color-orange-80);\n    --wa-color-brand-70: var(--wa-color-orange-70);\n    --wa-color-brand-60: var(--wa-color-orange-60);\n    --wa-color-brand-50: var(--wa-color-orange-50);\n    --wa-color-brand-40: var(--wa-color-orange-40);\n    --wa-color-brand-30: var(--wa-color-orange-30);\n    --wa-color-brand-20: var(--wa-color-orange-20);\n    --wa-color-brand-10: var(--wa-color-orange-10);\n    --wa-color-brand-05: var(--wa-color-orange-05);\n    --wa-color-brand: var(--wa-color-orange);\n    --wa-color-brand-on: var(--wa-color-orange-on);\n  }\n\n  .wa-brand-yellow {\n    --wa-color-brand-95: var(--wa-color-yellow-95);\n    --wa-color-brand-90: var(--wa-color-yellow-90);\n    --wa-color-brand-80: var(--wa-color-yellow-80);\n    --wa-color-brand-70: var(--wa-color-yellow-70);\n    --wa-color-brand-60: var(--wa-color-yellow-60);\n    --wa-color-brand-50: var(--wa-color-yellow-50);\n    --wa-color-brand-40: var(--wa-color-yellow-40);\n    --wa-color-brand-30: var(--wa-color-yellow-30);\n    --wa-color-brand-20: var(--wa-color-yellow-20);\n    --wa-color-brand-10: var(--wa-color-yellow-10);\n    --wa-color-brand-05: var(--wa-color-yellow-05);\n    --wa-color-brand: var(--wa-color-yellow);\n    --wa-color-brand-on: var(--wa-color-yellow-on);\n  }\n\n  .wa-brand-green {\n    --wa-color-brand-95: var(--wa-color-green-95);\n    --wa-color-brand-90: var(--wa-color-green-90);\n    --wa-color-brand-80: var(--wa-color-green-80);\n    --wa-color-brand-70: var(--wa-color-green-70);\n    --wa-color-brand-60: var(--wa-color-green-60);\n    --wa-color-brand-50: var(--wa-color-green-50);\n    --wa-color-brand-40: var(--wa-color-green-40);\n    --wa-color-brand-30: var(--wa-color-green-30);\n    --wa-color-brand-20: var(--wa-color-green-20);\n    --wa-color-brand-10: var(--wa-color-green-10);\n    --wa-color-brand-05: var(--wa-color-green-05);\n    --wa-color-brand: var(--wa-color-green);\n    --wa-color-brand-on: var(--wa-color-green-on);\n  }\n\n  .wa-brand-cyan {\n    --wa-color-brand-95: var(--wa-color-cyan-95);\n    --wa-color-brand-90: var(--wa-color-cyan-90);\n    --wa-color-brand-80: var(--wa-color-cyan-80);\n    --wa-color-brand-70: var(--wa-color-cyan-70);\n    --wa-color-brand-60: var(--wa-color-cyan-60);\n    --wa-color-brand-50: var(--wa-color-cyan-50);\n    --wa-color-brand-40: var(--wa-color-cyan-40);\n    --wa-color-brand-30: var(--wa-color-cyan-30);\n    --wa-color-brand-20: var(--wa-color-cyan-20);\n    --wa-color-brand-10: var(--wa-color-cyan-10);\n    --wa-color-brand-05: var(--wa-color-cyan-05);\n    --wa-color-brand: var(--wa-color-cyan);\n    --wa-color-brand-on: var(--wa-color-cyan-on);\n  }\n\n  .wa-brand-indigo {\n    --wa-color-brand-95: var(--wa-color-indigo-95);\n    --wa-color-brand-90: var(--wa-color-indigo-90);\n    --wa-color-brand-80: var(--wa-color-indigo-80);\n    --wa-color-brand-70: var(--wa-color-indigo-70);\n    --wa-color-brand-60: var(--wa-color-indigo-60);\n    --wa-color-brand-50: var(--wa-color-indigo-50);\n    --wa-color-brand-40: var(--wa-color-indigo-40);\n    --wa-color-brand-30: var(--wa-color-indigo-30);\n    --wa-color-brand-20: var(--wa-color-indigo-20);\n    --wa-color-brand-10: var(--wa-color-indigo-10);\n    --wa-color-brand-05: var(--wa-color-indigo-05);\n    --wa-color-brand: var(--wa-color-indigo);\n    --wa-color-brand-on: var(--wa-color-indigo-on);\n  }\n\n  .wa-brand-purple {\n    --wa-color-brand-95: var(--wa-color-purple-95);\n    --wa-color-brand-90: var(--wa-color-purple-90);\n    --wa-color-brand-80: var(--wa-color-purple-80);\n    --wa-color-brand-70: var(--wa-color-purple-70);\n    --wa-color-brand-60: var(--wa-color-purple-60);\n    --wa-color-brand-50: var(--wa-color-purple-50);\n    --wa-color-brand-40: var(--wa-color-purple-40);\n    --wa-color-brand-30: var(--wa-color-purple-30);\n    --wa-color-brand-20: var(--wa-color-purple-20);\n    --wa-color-brand-10: var(--wa-color-purple-10);\n    --wa-color-brand-05: var(--wa-color-purple-05);\n    --wa-color-brand: var(--wa-color-purple);\n    --wa-color-brand-on: var(--wa-color-purple-on);\n  }\n\n  .wa-brand-pink {\n    --wa-color-brand-95: var(--wa-color-pink-95);\n    --wa-color-brand-90: var(--wa-color-pink-90);\n    --wa-color-brand-80: var(--wa-color-pink-80);\n    --wa-color-brand-70: var(--wa-color-pink-70);\n    --wa-color-brand-60: var(--wa-color-pink-60);\n    --wa-color-brand-50: var(--wa-color-pink-50);\n    --wa-color-brand-40: var(--wa-color-pink-40);\n    --wa-color-brand-30: var(--wa-color-pink-30);\n    --wa-color-brand-20: var(--wa-color-pink-20);\n    --wa-color-brand-10: var(--wa-color-pink-10);\n    --wa-color-brand-05: var(--wa-color-pink-05);\n    --wa-color-brand: var(--wa-color-pink);\n    --wa-color-brand-on: var(--wa-color-pink-on);\n  }\n\n  .wa-brand-gray {\n    --wa-color-brand-95: var(--wa-color-gray-95);\n    --wa-color-brand-90: var(--wa-color-gray-90);\n    --wa-color-brand-80: var(--wa-color-gray-80);\n    --wa-color-brand-70: var(--wa-color-gray-70);\n    --wa-color-brand-60: var(--wa-color-gray-60);\n    --wa-color-brand-50: var(--wa-color-gray-50);\n    --wa-color-brand-40: var(--wa-color-gray-40);\n    --wa-color-brand-30: var(--wa-color-gray-30);\n    --wa-color-brand-20: var(--wa-color-gray-20);\n    --wa-color-brand-10: var(--wa-color-gray-10);\n    --wa-color-brand-05: var(--wa-color-gray-05);\n    --wa-color-brand: var(--wa-color-gray);\n    --wa-color-brand-on: var(--wa-color-gray-on);\n  }\n}\n\n@layer wa-color-variant {\n  :where(:root), /* default */\n  .wa-neutral-gray {\n    --wa-color-neutral-95: var(--wa-color-gray-95);\n    --wa-color-neutral-90: var(--wa-color-gray-90);\n    --wa-color-neutral-80: var(--wa-color-gray-80);\n    --wa-color-neutral-70: var(--wa-color-gray-70);\n    --wa-color-neutral-60: var(--wa-color-gray-60);\n    --wa-color-neutral-50: var(--wa-color-gray-50);\n    --wa-color-neutral-40: var(--wa-color-gray-40);\n    --wa-color-neutral-30: var(--wa-color-gray-30);\n    --wa-color-neutral-20: var(--wa-color-gray-20);\n    --wa-color-neutral-10: var(--wa-color-gray-10);\n    --wa-color-neutral-05: var(--wa-color-gray-05);\n    --wa-color-neutral: var(--wa-color-gray);\n    --wa-color-neutral-on: var(--wa-color-gray-on);\n  }\n\n  .wa-neutral-red {\n    --wa-color-neutral-95: var(--wa-color-red-95);\n    --wa-color-neutral-90: var(--wa-color-red-90);\n    --wa-color-neutral-80: var(--wa-color-red-80);\n    --wa-color-neutral-70: var(--wa-color-red-70);\n    --wa-color-neutral-60: var(--wa-color-red-60);\n    --wa-color-neutral-50: var(--wa-color-red-50);\n    --wa-color-neutral-40: var(--wa-color-red-40);\n    --wa-color-neutral-30: var(--wa-color-red-30);\n    --wa-color-neutral-20: var(--wa-color-red-20);\n    --wa-color-neutral-10: var(--wa-color-red-10);\n    --wa-color-neutral-05: var(--wa-color-red-05);\n    --wa-color-neutral: var(--wa-color-red);\n    --wa-color-neutral-on: var(--wa-color-red-on);\n  }\n\n  .wa-neutral-orange {\n    --wa-color-neutral-95: var(--wa-color-orange-95);\n    --wa-color-neutral-90: var(--wa-color-orange-90);\n    --wa-color-neutral-80: var(--wa-color-orange-80);\n    --wa-color-neutral-70: var(--wa-color-orange-70);\n    --wa-color-neutral-60: var(--wa-color-orange-60);\n    --wa-color-neutral-50: var(--wa-color-orange-50);\n    --wa-color-neutral-40: var(--wa-color-orange-40);\n    --wa-color-neutral-30: var(--wa-color-orange-30);\n    --wa-color-neutral-20: var(--wa-color-orange-20);\n    --wa-color-neutral-10: var(--wa-color-orange-10);\n    --wa-color-neutral-05: var(--wa-color-orange-05);\n    --wa-color-neutral: var(--wa-color-orange);\n    --wa-color-neutral-on: var(--wa-color-orange-on);\n  }\n\n  .wa-neutral-yellow {\n    --wa-color-neutral-95: var(--wa-color-yellow-95);\n    --wa-color-neutral-90: var(--wa-color-yellow-90);\n    --wa-color-neutral-80: var(--wa-color-yellow-80);\n    --wa-color-neutral-70: var(--wa-color-yellow-70);\n    --wa-color-neutral-60: var(--wa-color-yellow-60);\n    --wa-color-neutral-50: var(--wa-color-yellow-50);\n    --wa-color-neutral-40: var(--wa-color-yellow-40);\n    --wa-color-neutral-30: var(--wa-color-yellow-30);\n    --wa-color-neutral-20: var(--wa-color-yellow-20);\n    --wa-color-neutral-10: var(--wa-color-yellow-10);\n    --wa-color-neutral-05: var(--wa-color-yellow-05);\n    --wa-color-neutral: var(--wa-color-yellow);\n    --wa-color-neutral-on: var(--wa-color-yellow-on);\n  }\n\n  .wa-neutral-green {\n    --wa-color-neutral-95: var(--wa-color-green-95);\n    --wa-color-neutral-90: var(--wa-color-green-90);\n    --wa-color-neutral-80: var(--wa-color-green-80);\n    --wa-color-neutral-70: var(--wa-color-green-70);\n    --wa-color-neutral-60: var(--wa-color-green-60);\n    --wa-color-neutral-50: var(--wa-color-green-50);\n    --wa-color-neutral-40: var(--wa-color-green-40);\n    --wa-color-neutral-30: var(--wa-color-green-30);\n    --wa-color-neutral-20: var(--wa-color-green-20);\n    --wa-color-neutral-10: var(--wa-color-green-10);\n    --wa-color-neutral-05: var(--wa-color-green-05);\n    --wa-color-neutral: var(--wa-color-green);\n    --wa-color-neutral-on: var(--wa-color-green-on);\n  }\n\n  .wa-neutral-cyan {\n    --wa-color-neutral-95: var(--wa-color-cyan-95);\n    --wa-color-neutral-90: var(--wa-color-cyan-90);\n    --wa-color-neutral-80: var(--wa-color-cyan-80);\n    --wa-color-neutral-70: var(--wa-color-cyan-70);\n    --wa-color-neutral-60: var(--wa-color-cyan-60);\n    --wa-color-neutral-50: var(--wa-color-cyan-50);\n    --wa-color-neutral-40: var(--wa-color-cyan-40);\n    --wa-color-neutral-30: var(--wa-color-cyan-30);\n    --wa-color-neutral-20: var(--wa-color-cyan-20);\n    --wa-color-neutral-10: var(--wa-color-cyan-10);\n    --wa-color-neutral-05: var(--wa-color-cyan-05);\n    --wa-color-neutral: var(--wa-color-cyan);\n    --wa-color-neutral-on: var(--wa-color-cyan-on);\n  }\n\n  .wa-neutral-blue {\n    --wa-color-neutral-95: var(--wa-color-blue-95);\n    --wa-color-neutral-90: var(--wa-color-blue-90);\n    --wa-color-neutral-80: var(--wa-color-blue-80);\n    --wa-color-neutral-70: var(--wa-color-blue-70);\n    --wa-color-neutral-60: var(--wa-color-blue-60);\n    --wa-color-neutral-50: var(--wa-color-blue-50);\n    --wa-color-neutral-40: var(--wa-color-blue-40);\n    --wa-color-neutral-30: var(--wa-color-blue-30);\n    --wa-color-neutral-20: var(--wa-color-blue-20);\n    --wa-color-neutral-10: var(--wa-color-blue-10);\n    --wa-color-neutral-05: var(--wa-color-blue-05);\n    --wa-color-neutral: var(--wa-color-blue);\n    --wa-color-neutral-on: var(--wa-color-blue-on);\n  }\n\n  .wa-neutral-indigo {\n    --wa-color-neutral-95: var(--wa-color-indigo-95);\n    --wa-color-neutral-90: var(--wa-color-indigo-90);\n    --wa-color-neutral-80: var(--wa-color-indigo-80);\n    --wa-color-neutral-70: var(--wa-color-indigo-70);\n    --wa-color-neutral-60: var(--wa-color-indigo-60);\n    --wa-color-neutral-50: var(--wa-color-indigo-50);\n    --wa-color-neutral-40: var(--wa-color-indigo-40);\n    --wa-color-neutral-30: var(--wa-color-indigo-30);\n    --wa-color-neutral-20: var(--wa-color-indigo-20);\n    --wa-color-neutral-10: var(--wa-color-indigo-10);\n    --wa-color-neutral-05: var(--wa-color-indigo-05);\n    --wa-color-neutral: var(--wa-color-indigo);\n    --wa-color-neutral-on: var(--wa-color-indigo-on);\n  }\n\n  .wa-neutral-purple {\n    --wa-color-neutral-95: var(--wa-color-purple-95);\n    --wa-color-neutral-90: var(--wa-color-purple-90);\n    --wa-color-neutral-80: var(--wa-color-purple-80);\n    --wa-color-neutral-70: var(--wa-color-purple-70);\n    --wa-color-neutral-60: var(--wa-color-purple-60);\n    --wa-color-neutral-50: var(--wa-color-purple-50);\n    --wa-color-neutral-40: var(--wa-color-purple-40);\n    --wa-color-neutral-30: var(--wa-color-purple-30);\n    --wa-color-neutral-20: var(--wa-color-purple-20);\n    --wa-color-neutral-10: var(--wa-color-purple-10);\n    --wa-color-neutral-05: var(--wa-color-purple-05);\n    --wa-color-neutral: var(--wa-color-purple);\n    --wa-color-neutral-on: var(--wa-color-purple-on);\n  }\n\n  .wa-neutral-pink {\n    --wa-color-neutral-95: var(--wa-color-pink-95);\n    --wa-color-neutral-90: var(--wa-color-pink-90);\n    --wa-color-neutral-80: var(--wa-color-pink-80);\n    --wa-color-neutral-70: var(--wa-color-pink-70);\n    --wa-color-neutral-60: var(--wa-color-pink-60);\n    --wa-color-neutral-50: var(--wa-color-pink-50);\n    --wa-color-neutral-40: var(--wa-color-pink-40);\n    --wa-color-neutral-30: var(--wa-color-pink-30);\n    --wa-color-neutral-20: var(--wa-color-pink-20);\n    --wa-color-neutral-10: var(--wa-color-pink-10);\n    --wa-color-neutral-05: var(--wa-color-pink-05);\n    --wa-color-neutral: var(--wa-color-pink);\n    --wa-color-neutral-on: var(--wa-color-pink-on);\n  }\n}\n\n@layer wa-color-variant {\n  :where(:root), /* default */\n  .wa-success-green {\n    --wa-color-success-95: var(--wa-color-green-95);\n    --wa-color-success-90: var(--wa-color-green-90);\n    --wa-color-success-80: var(--wa-color-green-80);\n    --wa-color-success-70: var(--wa-color-green-70);\n    --wa-color-success-60: var(--wa-color-green-60);\n    --wa-color-success-50: var(--wa-color-green-50);\n    --wa-color-success-40: var(--wa-color-green-40);\n    --wa-color-success-30: var(--wa-color-green-30);\n    --wa-color-success-20: var(--wa-color-green-20);\n    --wa-color-success-10: var(--wa-color-green-10);\n    --wa-color-success-05: var(--wa-color-green-05);\n    --wa-color-success: var(--wa-color-green);\n    --wa-color-success-on: var(--wa-color-green-on);\n  }\n\n  .wa-success-red {\n    --wa-color-success-95: var(--wa-color-red-95);\n    --wa-color-success-90: var(--wa-color-red-90);\n    --wa-color-success-80: var(--wa-color-red-80);\n    --wa-color-success-70: var(--wa-color-red-70);\n    --wa-color-success-60: var(--wa-color-red-60);\n    --wa-color-success-50: var(--wa-color-red-50);\n    --wa-color-success-40: var(--wa-color-red-40);\n    --wa-color-success-30: var(--wa-color-red-30);\n    --wa-color-success-20: var(--wa-color-red-20);\n    --wa-color-success-10: var(--wa-color-red-10);\n    --wa-color-success-05: var(--wa-color-red-05);\n    --wa-color-success: var(--wa-color-red);\n    --wa-color-success-on: var(--wa-color-red-on);\n  }\n\n  .wa-success-orange {\n    --wa-color-success-95: var(--wa-color-orange-95);\n    --wa-color-success-90: var(--wa-color-orange-90);\n    --wa-color-success-80: var(--wa-color-orange-80);\n    --wa-color-success-70: var(--wa-color-orange-70);\n    --wa-color-success-60: var(--wa-color-orange-60);\n    --wa-color-success-50: var(--wa-color-orange-50);\n    --wa-color-success-40: var(--wa-color-orange-40);\n    --wa-color-success-30: var(--wa-color-orange-30);\n    --wa-color-success-20: var(--wa-color-orange-20);\n    --wa-color-success-10: var(--wa-color-orange-10);\n    --wa-color-success-05: var(--wa-color-orange-05);\n    --wa-color-success: var(--wa-color-orange);\n    --wa-color-success-on: var(--wa-color-orange-on);\n  }\n\n  .wa-success-yellow {\n    --wa-color-success-95: var(--wa-color-yellow-95);\n    --wa-color-success-90: var(--wa-color-yellow-90);\n    --wa-color-success-80: var(--wa-color-yellow-80);\n    --wa-color-success-70: var(--wa-color-yellow-70);\n    --wa-color-success-60: var(--wa-color-yellow-60);\n    --wa-color-success-50: var(--wa-color-yellow-50);\n    --wa-color-success-40: var(--wa-color-yellow-40);\n    --wa-color-success-30: var(--wa-color-yellow-30);\n    --wa-color-success-20: var(--wa-color-yellow-20);\n    --wa-color-success-10: var(--wa-color-yellow-10);\n    --wa-color-success-05: var(--wa-color-yellow-05);\n    --wa-color-success: var(--wa-color-yellow);\n    --wa-color-success-on: var(--wa-color-yellow-on);\n  }\n\n  .wa-success-cyan {\n    --wa-color-success-95: var(--wa-color-cyan-95);\n    --wa-color-success-90: var(--wa-color-cyan-90);\n    --wa-color-success-80: var(--wa-color-cyan-80);\n    --wa-color-success-70: var(--wa-color-cyan-70);\n    --wa-color-success-60: var(--wa-color-cyan-60);\n    --wa-color-success-50: var(--wa-color-cyan-50);\n    --wa-color-success-40: var(--wa-color-cyan-40);\n    --wa-color-success-30: var(--wa-color-cyan-30);\n    --wa-color-success-20: var(--wa-color-cyan-20);\n    --wa-color-success-10: var(--wa-color-cyan-10);\n    --wa-color-success-05: var(--wa-color-cyan-05);\n    --wa-color-success: var(--wa-color-cyan);\n    --wa-color-success-on: var(--wa-color-cyan-on);\n  }\n\n  .wa-success-blue {\n    --wa-color-success-95: var(--wa-color-blue-95);\n    --wa-color-success-90: var(--wa-color-blue-90);\n    --wa-color-success-80: var(--wa-color-blue-80);\n    --wa-color-success-70: var(--wa-color-blue-70);\n    --wa-color-success-60: var(--wa-color-blue-60);\n    --wa-color-success-50: var(--wa-color-blue-50);\n    --wa-color-success-40: var(--wa-color-blue-40);\n    --wa-color-success-30: var(--wa-color-blue-30);\n    --wa-color-success-20: var(--wa-color-blue-20);\n    --wa-color-success-10: var(--wa-color-blue-10);\n    --wa-color-success-05: var(--wa-color-blue-05);\n    --wa-color-success: var(--wa-color-blue);\n    --wa-color-success-on: var(--wa-color-blue-on);\n  }\n\n  .wa-success-indigo {\n    --wa-color-success-95: var(--wa-color-indigo-95);\n    --wa-color-success-90: var(--wa-color-indigo-90);\n    --wa-color-success-80: var(--wa-color-indigo-80);\n    --wa-color-success-70: var(--wa-color-indigo-70);\n    --wa-color-success-60: var(--wa-color-indigo-60);\n    --wa-color-success-50: var(--wa-color-indigo-50);\n    --wa-color-success-40: var(--wa-color-indigo-40);\n    --wa-color-success-30: var(--wa-color-indigo-30);\n    --wa-color-success-20: var(--wa-color-indigo-20);\n    --wa-color-success-10: var(--wa-color-indigo-10);\n    --wa-color-success-05: var(--wa-color-indigo-05);\n    --wa-color-success: var(--wa-color-indigo);\n    --wa-color-success-on: var(--wa-color-indigo-on);\n  }\n\n  .wa-success-purple {\n    --wa-color-success-95: var(--wa-color-purple-95);\n    --wa-color-success-90: var(--wa-color-purple-90);\n    --wa-color-success-80: var(--wa-color-purple-80);\n    --wa-color-success-70: var(--wa-color-purple-70);\n    --wa-color-success-60: var(--wa-color-purple-60);\n    --wa-color-success-50: var(--wa-color-purple-50);\n    --wa-color-success-40: var(--wa-color-purple-40);\n    --wa-color-success-30: var(--wa-color-purple-30);\n    --wa-color-success-20: var(--wa-color-purple-20);\n    --wa-color-success-10: var(--wa-color-purple-10);\n    --wa-color-success-05: var(--wa-color-purple-05);\n    --wa-color-success: var(--wa-color-purple);\n    --wa-color-success-on: var(--wa-color-purple-on);\n  }\n\n  .wa-success-pink {\n    --wa-color-success-95: var(--wa-color-pink-95);\n    --wa-color-success-90: var(--wa-color-pink-90);\n    --wa-color-success-80: var(--wa-color-pink-80);\n    --wa-color-success-70: var(--wa-color-pink-70);\n    --wa-color-success-60: var(--wa-color-pink-60);\n    --wa-color-success-50: var(--wa-color-pink-50);\n    --wa-color-success-40: var(--wa-color-pink-40);\n    --wa-color-success-30: var(--wa-color-pink-30);\n    --wa-color-success-20: var(--wa-color-pink-20);\n    --wa-color-success-10: var(--wa-color-pink-10);\n    --wa-color-success-05: var(--wa-color-pink-05);\n    --wa-color-success: var(--wa-color-pink);\n    --wa-color-success-on: var(--wa-color-pink-on);\n  }\n\n  .wa-success-gray {\n    --wa-color-success-95: var(--wa-color-gray-95);\n    --wa-color-success-90: var(--wa-color-gray-90);\n    --wa-color-success-80: var(--wa-color-gray-80);\n    --wa-color-success-70: var(--wa-color-gray-70);\n    --wa-color-success-60: var(--wa-color-gray-60);\n    --wa-color-success-50: var(--wa-color-gray-50);\n    --wa-color-success-40: var(--wa-color-gray-40);\n    --wa-color-success-30: var(--wa-color-gray-30);\n    --wa-color-success-20: var(--wa-color-gray-20);\n    --wa-color-success-10: var(--wa-color-gray-10);\n    --wa-color-success-05: var(--wa-color-gray-05);\n    --wa-color-success: var(--wa-color-gray);\n    --wa-color-success-on: var(--wa-color-gray-on);\n  }\n}\n\n@layer wa-color-variant {\n  :where(:root), /* default */\n  .wa-warning-yellow {\n    --wa-color-warning-95: var(--wa-color-yellow-95);\n    --wa-color-warning-90: var(--wa-color-yellow-90);\n    --wa-color-warning-80: var(--wa-color-yellow-80);\n    --wa-color-warning-70: var(--wa-color-yellow-70);\n    --wa-color-warning-60: var(--wa-color-yellow-60);\n    --wa-color-warning-50: var(--wa-color-yellow-50);\n    --wa-color-warning-40: var(--wa-color-yellow-40);\n    --wa-color-warning-30: var(--wa-color-yellow-30);\n    --wa-color-warning-20: var(--wa-color-yellow-20);\n    --wa-color-warning-10: var(--wa-color-yellow-10);\n    --wa-color-warning-05: var(--wa-color-yellow-05);\n    --wa-color-warning: var(--wa-color-yellow);\n    --wa-color-warning-on: var(--wa-color-yellow-on);\n  }\n\n  .wa-warning-red {\n    --wa-color-warning-95: var(--wa-color-red-95);\n    --wa-color-warning-90: var(--wa-color-red-90);\n    --wa-color-warning-80: var(--wa-color-red-80);\n    --wa-color-warning-70: var(--wa-color-red-70);\n    --wa-color-warning-60: var(--wa-color-red-60);\n    --wa-color-warning-50: var(--wa-color-red-50);\n    --wa-color-warning-40: var(--wa-color-red-40);\n    --wa-color-warning-30: var(--wa-color-red-30);\n    --wa-color-warning-20: var(--wa-color-red-20);\n    --wa-color-warning-10: var(--wa-color-red-10);\n    --wa-color-warning-05: var(--wa-color-red-05);\n    --wa-color-warning: var(--wa-color-red);\n    --wa-color-warning-on: var(--wa-color-red-on);\n  }\n\n  .wa-warning-orange {\n    --wa-color-warning-95: var(--wa-color-orange-95);\n    --wa-color-warning-90: var(--wa-color-orange-90);\n    --wa-color-warning-80: var(--wa-color-orange-80);\n    --wa-color-warning-70: var(--wa-color-orange-70);\n    --wa-color-warning-60: var(--wa-color-orange-60);\n    --wa-color-warning-50: var(--wa-color-orange-50);\n    --wa-color-warning-40: var(--wa-color-orange-40);\n    --wa-color-warning-30: var(--wa-color-orange-30);\n    --wa-color-warning-20: var(--wa-color-orange-20);\n    --wa-color-warning-10: var(--wa-color-orange-10);\n    --wa-color-warning-05: var(--wa-color-orange-05);\n    --wa-color-warning: var(--wa-color-orange);\n    --wa-color-warning-on: var(--wa-color-orange-on);\n  }\n\n  .wa-warning-green {\n    --wa-color-warning-95: var(--wa-color-green-95);\n    --wa-color-warning-90: var(--wa-color-green-90);\n    --wa-color-warning-80: var(--wa-color-green-80);\n    --wa-color-warning-70: var(--wa-color-green-70);\n    --wa-color-warning-60: var(--wa-color-green-60);\n    --wa-color-warning-50: var(--wa-color-green-50);\n    --wa-color-warning-40: var(--wa-color-green-40);\n    --wa-color-warning-30: var(--wa-color-green-30);\n    --wa-color-warning-20: var(--wa-color-green-20);\n    --wa-color-warning-10: var(--wa-color-green-10);\n    --wa-color-warning-05: var(--wa-color-green-05);\n    --wa-color-warning: var(--wa-color-green);\n    --wa-color-warning-on: var(--wa-color-green-on);\n  }\n\n  .wa-warning-cyan {\n    --wa-color-warning-95: var(--wa-color-cyan-95);\n    --wa-color-warning-90: var(--wa-color-cyan-90);\n    --wa-color-warning-80: var(--wa-color-cyan-80);\n    --wa-color-warning-70: var(--wa-color-cyan-70);\n    --wa-color-warning-60: var(--wa-color-cyan-60);\n    --wa-color-warning-50: var(--wa-color-cyan-50);\n    --wa-color-warning-40: var(--wa-color-cyan-40);\n    --wa-color-warning-30: var(--wa-color-cyan-30);\n    --wa-color-warning-20: var(--wa-color-cyan-20);\n    --wa-color-warning-10: var(--wa-color-cyan-10);\n    --wa-color-warning-05: var(--wa-color-cyan-05);\n    --wa-color-warning: var(--wa-color-cyan);\n    --wa-color-warning-on: var(--wa-color-cyan-on);\n  }\n\n  .wa-warning-blue {\n    --wa-color-warning-95: var(--wa-color-blue-95);\n    --wa-color-warning-90: var(--wa-color-blue-90);\n    --wa-color-warning-80: var(--wa-color-blue-80);\n    --wa-color-warning-70: var(--wa-color-blue-70);\n    --wa-color-warning-60: var(--wa-color-blue-60);\n    --wa-color-warning-50: var(--wa-color-blue-50);\n    --wa-color-warning-40: var(--wa-color-blue-40);\n    --wa-color-warning-30: var(--wa-color-blue-30);\n    --wa-color-warning-20: var(--wa-color-blue-20);\n    --wa-color-warning-10: var(--wa-color-blue-10);\n    --wa-color-warning-05: var(--wa-color-blue-05);\n    --wa-color-warning: var(--wa-color-blue);\n    --wa-color-warning-on: var(--wa-color-blue-on);\n  }\n\n  .wa-warning-indigo {\n    --wa-color-warning-95: var(--wa-color-indigo-95);\n    --wa-color-warning-90: var(--wa-color-indigo-90);\n    --wa-color-warning-80: var(--wa-color-indigo-80);\n    --wa-color-warning-70: var(--wa-color-indigo-70);\n    --wa-color-warning-60: var(--wa-color-indigo-60);\n    --wa-color-warning-50: var(--wa-color-indigo-50);\n    --wa-color-warning-40: var(--wa-color-indigo-40);\n    --wa-color-warning-30: var(--wa-color-indigo-30);\n    --wa-color-warning-20: var(--wa-color-indigo-20);\n    --wa-color-warning-10: var(--wa-color-indigo-10);\n    --wa-color-warning-05: var(--wa-color-indigo-05);\n    --wa-color-warning: var(--wa-color-indigo);\n    --wa-color-warning-on: var(--wa-color-indigo-on);\n  }\n\n  .wa-warning-purple {\n    --wa-color-warning-95: var(--wa-color-purple-95);\n    --wa-color-warning-90: var(--wa-color-purple-90);\n    --wa-color-warning-80: var(--wa-color-purple-80);\n    --wa-color-warning-70: var(--wa-color-purple-70);\n    --wa-color-warning-60: var(--wa-color-purple-60);\n    --wa-color-warning-50: var(--wa-color-purple-50);\n    --wa-color-warning-40: var(--wa-color-purple-40);\n    --wa-color-warning-30: var(--wa-color-purple-30);\n    --wa-color-warning-20: var(--wa-color-purple-20);\n    --wa-color-warning-10: var(--wa-color-purple-10);\n    --wa-color-warning-05: var(--wa-color-purple-05);\n    --wa-color-warning: var(--wa-color-purple);\n    --wa-color-warning-on: var(--wa-color-purple-on);\n  }\n\n  .wa-warning-pink {\n    --wa-color-warning-95: var(--wa-color-pink-95);\n    --wa-color-warning-90: var(--wa-color-pink-90);\n    --wa-color-warning-80: var(--wa-color-pink-80);\n    --wa-color-warning-70: var(--wa-color-pink-70);\n    --wa-color-warning-60: var(--wa-color-pink-60);\n    --wa-color-warning-50: var(--wa-color-pink-50);\n    --wa-color-warning-40: var(--wa-color-pink-40);\n    --wa-color-warning-30: var(--wa-color-pink-30);\n    --wa-color-warning-20: var(--wa-color-pink-20);\n    --wa-color-warning-10: var(--wa-color-pink-10);\n    --wa-color-warning-05: var(--wa-color-pink-05);\n    --wa-color-warning: var(--wa-color-pink);\n    --wa-color-warning-on: var(--wa-color-pink-on);\n  }\n\n  .wa-warning-gray {\n    --wa-color-warning-95: var(--wa-color-gray-95);\n    --wa-color-warning-90: var(--wa-color-gray-90);\n    --wa-color-warning-80: var(--wa-color-gray-80);\n    --wa-color-warning-70: var(--wa-color-gray-70);\n    --wa-color-warning-60: var(--wa-color-gray-60);\n    --wa-color-warning-50: var(--wa-color-gray-50);\n    --wa-color-warning-40: var(--wa-color-gray-40);\n    --wa-color-warning-30: var(--wa-color-gray-30);\n    --wa-color-warning-20: var(--wa-color-gray-20);\n    --wa-color-warning-10: var(--wa-color-gray-10);\n    --wa-color-warning-05: var(--wa-color-gray-05);\n    --wa-color-warning: var(--wa-color-gray);\n    --wa-color-warning-on: var(--wa-color-gray-on);\n  }\n}\n\n@layer wa-color-variant {\n  :where(:root), /* default */\n  .wa-danger-red {\n    --wa-color-danger-95: var(--wa-color-red-95);\n    --wa-color-danger-90: var(--wa-color-red-90);\n    --wa-color-danger-80: var(--wa-color-red-80);\n    --wa-color-danger-70: var(--wa-color-red-70);\n    --wa-color-danger-60: var(--wa-color-red-60);\n    --wa-color-danger-50: var(--wa-color-red-50);\n    --wa-color-danger-40: var(--wa-color-red-40);\n    --wa-color-danger-30: var(--wa-color-red-30);\n    --wa-color-danger-20: var(--wa-color-red-20);\n    --wa-color-danger-10: var(--wa-color-red-10);\n    --wa-color-danger-05: var(--wa-color-red-05);\n    --wa-color-danger: var(--wa-color-red);\n    --wa-color-danger-on: var(--wa-color-red-on);\n  }\n\n  .wa-danger-orange {\n    --wa-color-danger-95: var(--wa-color-orange-95);\n    --wa-color-danger-90: var(--wa-color-orange-90);\n    --wa-color-danger-80: var(--wa-color-orange-80);\n    --wa-color-danger-70: var(--wa-color-orange-70);\n    --wa-color-danger-60: var(--wa-color-orange-60);\n    --wa-color-danger-50: var(--wa-color-orange-50);\n    --wa-color-danger-40: var(--wa-color-orange-40);\n    --wa-color-danger-30: var(--wa-color-orange-30);\n    --wa-color-danger-20: var(--wa-color-orange-20);\n    --wa-color-danger-10: var(--wa-color-orange-10);\n    --wa-color-danger-05: var(--wa-color-orange-05);\n    --wa-color-danger: var(--wa-color-orange);\n    --wa-color-danger-on: var(--wa-color-orange-on);\n  }\n\n  .wa-danger-yellow {\n    --wa-color-danger-95: var(--wa-color-yellow-95);\n    --wa-color-danger-90: var(--wa-color-yellow-90);\n    --wa-color-danger-80: var(--wa-color-yellow-80);\n    --wa-color-danger-70: var(--wa-color-yellow-70);\n    --wa-color-danger-60: var(--wa-color-yellow-60);\n    --wa-color-danger-50: var(--wa-color-yellow-50);\n    --wa-color-danger-40: var(--wa-color-yellow-40);\n    --wa-color-danger-30: var(--wa-color-yellow-30);\n    --wa-color-danger-20: var(--wa-color-yellow-20);\n    --wa-color-danger-10: var(--wa-color-yellow-10);\n    --wa-color-danger-05: var(--wa-color-yellow-05);\n    --wa-color-danger: var(--wa-color-yellow);\n    --wa-color-danger-on: var(--wa-color-yellow-on);\n  }\n\n  .wa-danger-green {\n    --wa-color-danger-95: var(--wa-color-green-95);\n    --wa-color-danger-90: var(--wa-color-green-90);\n    --wa-color-danger-80: var(--wa-color-green-80);\n    --wa-color-danger-70: var(--wa-color-green-70);\n    --wa-color-danger-60: var(--wa-color-green-60);\n    --wa-color-danger-50: var(--wa-color-green-50);\n    --wa-color-danger-40: var(--wa-color-green-40);\n    --wa-color-danger-30: var(--wa-color-green-30);\n    --wa-color-danger-20: var(--wa-color-green-20);\n    --wa-color-danger-10: var(--wa-color-green-10);\n    --wa-color-danger-05: var(--wa-color-green-05);\n    --wa-color-danger: var(--wa-color-green);\n    --wa-color-danger-on: var(--wa-color-green-on);\n  }\n\n  .wa-danger-cyan {\n    --wa-color-danger-95: var(--wa-color-cyan-95);\n    --wa-color-danger-90: var(--wa-color-cyan-90);\n    --wa-color-danger-80: var(--wa-color-cyan-80);\n    --wa-color-danger-70: var(--wa-color-cyan-70);\n    --wa-color-danger-60: var(--wa-color-cyan-60);\n    --wa-color-danger-50: var(--wa-color-cyan-50);\n    --wa-color-danger-40: var(--wa-color-cyan-40);\n    --wa-color-danger-30: var(--wa-color-cyan-30);\n    --wa-color-danger-20: var(--wa-color-cyan-20);\n    --wa-color-danger-10: var(--wa-color-cyan-10);\n    --wa-color-danger-05: var(--wa-color-cyan-05);\n    --wa-color-danger: var(--wa-color-cyan);\n    --wa-color-danger-on: var(--wa-color-cyan-on);\n  }\n\n  .wa-danger-blue {\n    --wa-color-danger-95: var(--wa-color-blue-95);\n    --wa-color-danger-90: var(--wa-color-blue-90);\n    --wa-color-danger-80: var(--wa-color-blue-80);\n    --wa-color-danger-70: var(--wa-color-blue-70);\n    --wa-color-danger-60: var(--wa-color-blue-60);\n    --wa-color-danger-50: var(--wa-color-blue-50);\n    --wa-color-danger-40: var(--wa-color-blue-40);\n    --wa-color-danger-30: var(--wa-color-blue-30);\n    --wa-color-danger-20: var(--wa-color-blue-20);\n    --wa-color-danger-10: var(--wa-color-blue-10);\n    --wa-color-danger-05: var(--wa-color-blue-05);\n    --wa-color-danger: var(--wa-color-blue);\n    --wa-color-danger-on: var(--wa-color-blue-on);\n  }\n\n  .wa-danger-indigo {\n    --wa-color-danger-95: var(--wa-color-indigo-95);\n    --wa-color-danger-90: var(--wa-color-indigo-90);\n    --wa-color-danger-80: var(--wa-color-indigo-80);\n    --wa-color-danger-70: var(--wa-color-indigo-70);\n    --wa-color-danger-60: var(--wa-color-indigo-60);\n    --wa-color-danger-50: var(--wa-color-indigo-50);\n    --wa-color-danger-40: var(--wa-color-indigo-40);\n    --wa-color-danger-30: var(--wa-color-indigo-30);\n    --wa-color-danger-20: var(--wa-color-indigo-20);\n    --wa-color-danger-10: var(--wa-color-indigo-10);\n    --wa-color-danger-05: var(--wa-color-indigo-05);\n    --wa-color-danger: var(--wa-color-indigo);\n    --wa-color-danger-on: var(--wa-color-indigo-on);\n  }\n\n  .wa-danger-purple {\n    --wa-color-danger-95: var(--wa-color-purple-95);\n    --wa-color-danger-90: var(--wa-color-purple-90);\n    --wa-color-danger-80: var(--wa-color-purple-80);\n    --wa-color-danger-70: var(--wa-color-purple-70);\n    --wa-color-danger-60: var(--wa-color-purple-60);\n    --wa-color-danger-50: var(--wa-color-purple-50);\n    --wa-color-danger-40: var(--wa-color-purple-40);\n    --wa-color-danger-30: var(--wa-color-purple-30);\n    --wa-color-danger-20: var(--wa-color-purple-20);\n    --wa-color-danger-10: var(--wa-color-purple-10);\n    --wa-color-danger-05: var(--wa-color-purple-05);\n    --wa-color-danger: var(--wa-color-purple);\n    --wa-color-danger-on: var(--wa-color-purple-on);\n  }\n\n  .wa-danger-pink {\n    --wa-color-danger-95: var(--wa-color-pink-95);\n    --wa-color-danger-90: var(--wa-color-pink-90);\n    --wa-color-danger-80: var(--wa-color-pink-80);\n    --wa-color-danger-70: var(--wa-color-pink-70);\n    --wa-color-danger-60: var(--wa-color-pink-60);\n    --wa-color-danger-50: var(--wa-color-pink-50);\n    --wa-color-danger-40: var(--wa-color-pink-40);\n    --wa-color-danger-30: var(--wa-color-pink-30);\n    --wa-color-danger-20: var(--wa-color-pink-20);\n    --wa-color-danger-10: var(--wa-color-pink-10);\n    --wa-color-danger-05: var(--wa-color-pink-05);\n    --wa-color-danger: var(--wa-color-pink);\n    --wa-color-danger-on: var(--wa-color-pink-on);\n  }\n\n  .wa-danger-gray {\n    --wa-color-danger-95: var(--wa-color-gray-95);\n    --wa-color-danger-90: var(--wa-color-gray-90);\n    --wa-color-danger-80: var(--wa-color-gray-80);\n    --wa-color-danger-70: var(--wa-color-gray-70);\n    --wa-color-danger-60: var(--wa-color-gray-60);\n    --wa-color-danger-50: var(--wa-color-gray-50);\n    --wa-color-danger-40: var(--wa-color-gray-40);\n    --wa-color-danger-30: var(--wa-color-gray-30);\n    --wa-color-danger-20: var(--wa-color-gray-20);\n    --wa-color-danger-10: var(--wa-color-gray-10);\n    --wa-color-danger-05: var(--wa-color-gray-05);\n    --wa-color-danger: var(--wa-color-gray);\n    --wa-color-danger-on: var(--wa-color-gray-on);\n  }\n}\n\n\n\n@layer wa-color-palette {\n  :where(:root),\n  .wa-palette-default {\n    --wa-color-red-95: #fff0ef /* oklch(96.667% 0.01632 22.08) */;\n    --wa-color-red-90: #ffdedc /* oklch(92.735% 0.03679 21.966) */;\n    --wa-color-red-80: #ffb8b6 /* oklch(84.803% 0.08289 20.771) */;\n    --wa-color-red-70: #fd8f90 /* oklch(76.801% 0.13322 20.052) */;\n    --wa-color-red-60: #f3676c /* oklch(68.914% 0.17256 20.646) */;\n    --wa-color-red-50: #dc3146 /* oklch(58.857% 0.20512 20.223) */;\n    --wa-color-red-40: #b30532 /* oklch(48.737% 0.19311 18.413) */;\n    --wa-color-red-30: #8a132c /* oklch(41.17% 0.1512 16.771) */;\n    --wa-color-red-20: #631323 /* oklch(33.297% 0.11208 14.847) */;\n    --wa-color-red-10: #3e0913 /* oklch(24.329% 0.08074 15.207) */;\n    --wa-color-red-05: #2a040b /* oklch(19.016% 0.06394 13.71) */;\n    --wa-color-red: var(--wa-color-red-50);\n    --wa-color-red-key: 50;\n\n    --wa-color-orange-95: #fff0e6 /* oklch(96.426% 0.02105 56.133) */;\n    --wa-color-orange-90: #ffdfca /* oklch(92.468% 0.04529 55.325) */;\n    --wa-color-orange-80: #ffbb94 /* oklch(84.588% 0.09454 50.876) */;\n    --wa-color-orange-70: #ff9266 /* oklch(76.744% 0.14429 42.309) */;\n    --wa-color-orange-60: #f46a45 /* oklch(68.848% 0.17805 35.951) */;\n    --wa-color-orange-50: #cd491c /* oklch(58.195% 0.17597 37.577) */;\n    --wa-color-orange-40: #9f3501 /* oklch(47.889% 0.14981 39.957) */;\n    --wa-color-orange-30: #802700 /* oklch(40.637% 0.1298 39.149) */;\n    --wa-color-orange-20: #601b00 /* oklch(33.123% 0.10587 39.117) */;\n    --wa-color-orange-10: #3c0d00 /* oklch(24.043% 0.07768 38.607) */;\n    --wa-color-orange-05: #280600 /* oklch(18.644% 0.0607 38.252) */;\n    --wa-color-orange: var(--wa-color-orange-60);\n    --wa-color-orange-key: 60;\n\n    --wa-color-yellow-95: #fef3cd /* oklch(96.322% 0.05069 93.748) */;\n    --wa-color-yellow-90: #ffe495 /* oklch(92.377% 0.10246 91.296) */;\n    --wa-color-yellow-80: #fac22b /* oklch(84.185% 0.16263 85.991) */;\n    --wa-color-yellow-70: #ef9d00 /* oklch(75.949% 0.16251 72.13) */;\n    --wa-color-yellow-60: #da7e00 /* oklch(67.883% 0.15587 62.246) */;\n    --wa-color-yellow-50: #b45f04 /* oklch(57.449% 0.13836 56.585) */;\n    --wa-color-yellow-40: #8c4602 /* oklch(47.319% 0.11666 54.663) */;\n    --wa-color-yellow-30: #6f3601 /* oklch(40.012% 0.09892 54.555) */;\n    --wa-color-yellow-20: #532600 /* oklch(32.518% 0.08157 53.927) */;\n    --wa-color-yellow-10: #331600 /* oklch(23.846% 0.05834 56.02) */;\n    --wa-color-yellow-05: #220c00 /* oklch(18.585% 0.04625 54.588) */;\n    --wa-color-yellow: var(--wa-color-yellow-80);\n    --wa-color-yellow-key: 80;\n\n    --wa-color-green-95: #e3f9e3 /* oklch(96.006% 0.03715 145.28) */;\n    --wa-color-green-90: #c2f2c1 /* oklch(91.494% 0.08233 144.35) */;\n    --wa-color-green-80: #93da98 /* oklch(82.445% 0.11601 146.11) */;\n    --wa-color-green-70: #5dc36f /* oklch(73.554% 0.15308 147.59) */;\n    --wa-color-green-60: #00ac49 /* oklch(64.982% 0.18414 148.83) */;\n    --wa-color-green-50: #00883c /* oklch(54.765% 0.15165 149.77) */;\n    --wa-color-green-40: #036730 /* oklch(45.004% 0.11963 151.06) */;\n    --wa-color-green-30: #0a5027 /* oklch(37.988% 0.09487 151.62) */;\n    --wa-color-green-20: #0a3a1d /* oklch(30.876% 0.07202 152.23) */;\n    --wa-color-green-10: #052310 /* oklch(22.767% 0.05128 152.45) */;\n    --wa-color-green-05: #031608 /* oklch(17.84% 0.03957 151.36) */;\n    --wa-color-green: var(--wa-color-green-60);\n    --wa-color-green-key: 60;\n\n    --wa-color-cyan-95: #e3f6fb /* oklch(96.063% 0.02111 215.26) */;\n    --wa-color-cyan-90: #c5ecf7 /* oklch(91.881% 0.04314 216.7) */;\n    --wa-color-cyan-80: #7fd6ec /* oklch(82.906% 0.08934 215.86) */;\n    --wa-color-cyan-70: #2fbedc /* oklch(74.18% 0.12169 215.86) */;\n    --wa-color-cyan-60: #00a3c0 /* oklch(65.939% 0.11738 216.42) */;\n    --wa-color-cyan-50: #078098 /* oklch(55.379% 0.09774 217.32) */;\n    --wa-color-cyan-40: #026274 /* oklch(45.735% 0.08074 216.18) */;\n    --wa-color-cyan-30: #014c5b /* oklch(38.419% 0.06817 216.88) */;\n    --wa-color-cyan-20: #003844 /* oklch(31.427% 0.05624 217.32) */;\n    --wa-color-cyan-10: #002129 /* oklch(22.851% 0.04085 217.17) */;\n    --wa-color-cyan-05: #00151b /* oklch(18.055% 0.03231 217.31) */;\n    --wa-color-cyan: var(--wa-color-cyan-70);\n    --wa-color-cyan-key: 70;\n\n    --wa-color-blue-95: #e8f3ff /* oklch(95.944% 0.01996 250.38) */;\n    --wa-color-blue-90: #d1e8ff /* oklch(92.121% 0.03985 248.26) */;\n    --wa-color-blue-80: #9fceff /* oklch(83.572% 0.08502 249.92) */;\n    --wa-color-blue-70: #6eb3ff /* oklch(75.256% 0.1308 252.03) */;\n    --wa-color-blue-60: #3e96ff /* oklch(67.196% 0.17661 254.97) */;\n    --wa-color-blue-50: #0071ec /* oklch(56.972% 0.20461 257.29) */;\n    --wa-color-blue-40: #0053c0 /* oklch(47.175% 0.1846 259.19) */;\n    --wa-color-blue-30: #003f9c /* oklch(39.805% 0.16217 259.98) */;\n    --wa-color-blue-20: #002d77 /* oklch(32.436% 0.1349 260.35) */;\n    --wa-color-blue-10: #001a4e /* oklch(23.965% 0.10161 260.68) */;\n    --wa-color-blue-05: #000f35 /* oklch(18.565% 0.07904 260.75) */;\n    --wa-color-blue: var(--wa-color-blue-50);\n    --wa-color-blue-key: 50;\n\n    --wa-color-indigo-95: #f0f2ff /* oklch(96.341% 0.0175 279.06) */;\n    --wa-color-indigo-90: #dfe5ff /* oklch(92.527% 0.0359 275.35) */;\n    --wa-color-indigo-80: #bcc7ff /* oklch(84.053% 0.07938 275.91) */;\n    --wa-color-indigo-70: #9da9ff /* oklch(75.941% 0.12411 276.95) */;\n    --wa-color-indigo-60: #808aff /* oklch(67.977% 0.17065 277.16) */;\n    --wa-color-indigo-50: #6163f2 /* oklch(57.967% 0.20943 277.04) */;\n    --wa-color-indigo-40: #4945cb /* oklch(48.145% 0.20042 277.08) */;\n    --wa-color-indigo-30: #3933a7 /* oklch(40.844% 0.17864 277.26) */;\n    --wa-color-indigo-20: #292381 /* oklch(33.362% 0.15096 277.21) */;\n    --wa-color-indigo-10: #181255 /* oklch(24.534% 0.11483 277.73) */;\n    --wa-color-indigo-05: #0d0a3a /* oklch(19.092% 0.08825 276.76) */;\n    --wa-color-indigo: var(--wa-color-indigo-50);\n    --wa-color-indigo-key: 50;\n\n    --wa-color-purple-95: #f7f0ff /* oklch(96.49% 0.02119 306.84) */;\n    --wa-color-purple-90: #eedfff /* oklch(92.531% 0.04569 306.6) */;\n    --wa-color-purple-80: #ddbdff /* oklch(84.781% 0.09615 306.52) */;\n    --wa-color-purple-70: #ca99ff /* oklch(76.728% 0.14961 305.27) */;\n    --wa-color-purple-60: #b678f5 /* oklch(68.906% 0.1844 304.96) */;\n    --wa-color-purple-50: #9951db /* oklch(58.603% 0.20465 304.87) */;\n    --wa-color-purple-40: #7936b3 /* oklch(48.641% 0.18949 304.79) */;\n    --wa-color-purple-30: #612692 /* oklch(41.23% 0.16836 304.92) */;\n    --wa-color-purple-20: #491870 /* oklch(33.663% 0.14258 305.12) */;\n    --wa-color-purple-10: #2d0b48 /* oklch(24.637% 0.10612 304.95) */;\n    --wa-color-purple-05: #1e0532 /* oklch(19.393% 0.08461 305.26) */;\n    --wa-color-purple: var(--wa-color-purple-50);\n    --wa-color-purple-key: 50;\n\n    --wa-color-pink-95: #feeff9 /* oklch(96.676% 0.02074 337.69) */;\n    --wa-color-pink-90: #feddf0 /* oklch(93.026% 0.04388 342.45) */;\n    --wa-color-pink-80: #fcb5d8 /* oklch(84.928% 0.09304 348.21) */;\n    --wa-color-pink-70: #f78dbf /* oklch(77.058% 0.14016 351.19) */;\n    --wa-color-pink-60: #e66ba3 /* oklch(69.067% 0.16347 353.69) */;\n    --wa-color-pink-50: #c84382 /* oklch(58.707% 0.17826 354.82) */;\n    --wa-color-pink-40: #9e2a6c /* oklch(48.603% 0.16439 350.08) */;\n    --wa-color-pink-30: #7d1e58 /* oklch(41.017% 0.14211 347.77) */;\n    --wa-color-pink-20: #5e1342 /* oklch(33.442% 0.11808 347.01) */;\n    --wa-color-pink-10: #3c0828 /* oklch(24.601% 0.08768 347.8) */;\n    --wa-color-pink-05: #28041a /* oklch(19.199% 0.06799 346.97) */;\n    --wa-color-pink: var(--wa-color-pink-50);\n    --wa-color-pink-key: 50;\n\n    --wa-color-gray-95: #f1f2f3 /* oklch(96.067% 0.00172 247.84) */;\n    --wa-color-gray-90: #e4e5e9 /* oklch(92.228% 0.0055 274.96) */;\n    --wa-color-gray-80: #c7c9d0 /* oklch(83.641% 0.00994 273.33) */;\n    --wa-color-gray-70: #abaeb9 /* oklch(75.183% 0.01604 273.78) */;\n    --wa-color-gray-60: #9194a2 /* oklch(66.863% 0.02088 276.18) */;\n    --wa-color-gray-50: #717584 /* oklch(56.418% 0.02359 273.77) */;\n    --wa-color-gray-40: #545868 /* oklch(46.281% 0.02644 274.26) */;\n    --wa-color-gray-30: #424554 /* oklch(39.355% 0.02564 276.27) */;\n    --wa-color-gray-20: #2f323f /* oklch(31.97% 0.02354 274.82) */;\n    --wa-color-gray-10: #1b1d26 /* oklch(23.277% 0.01762 275.14) */;\n    --wa-color-gray-05: #101219 /* oklch(18.342% 0.01472 272.42) */;\n    --wa-color-gray: var(--wa-color-gray-40);\n    --wa-color-gray-key: 40;\n  }\n}\n\n\n@layer wa-theme {\n  :where(:root),\n  .wa-theme-default,\n  .wa-light,\n  .wa-dark .wa-invert,\n  .wa-light .wa-theme-default,\n  .wa-dark .wa-theme-default.wa-invert,\n  .wa-dark .wa-theme-default .wa-invert {\n    /* #region Colors (Light) ~~~~~~~~~~~~~~~~~~~~~ */\n    color-scheme: light;\n    color: var(--wa-color-text-normal);\n\n    --wa-color-surface-raised: white;\n    --wa-color-surface-default: white;\n    --wa-color-surface-lowered: var(--wa-color-neutral-95);\n    --wa-color-surface-border: var(--wa-color-neutral-90);\n\n    --wa-color-text-normal: var(--wa-color-neutral-10);\n    --wa-color-text-quiet: var(--wa-color-neutral-40);\n    --wa-color-text-link: var(--wa-color-brand-40);\n\n    --wa-color-overlay-modal: color-mix(in oklab, var(--wa-color-neutral-05) 50%, transparent);\n    --wa-color-overlay-inline: color-mix(in oklab, var(--wa-color-neutral-80) 25%, transparent);\n\n    --wa-color-shadow: color-mix(\n      in oklab,\n      var(--wa-color-neutral-05) calc(var(--wa-shadow-blur-scale) * 4% + 8%),\n      transparent\n    );\n\n    --wa-color-focus: var(--wa-color-brand-60);\n\n    --wa-color-mix-hover: black 10%;\n    --wa-color-mix-active: black 20%;\n\n    --wa-color-brand-fill-quiet: var(--wa-color-brand-95);\n    --wa-color-brand-fill-normal: var(--wa-color-brand-90);\n    --wa-color-brand-fill-loud: var(--wa-color-brand-50);\n    --wa-color-brand-border-quiet: var(--wa-color-brand-90);\n    --wa-color-brand-border-normal: var(--wa-color-brand-80);\n    --wa-color-brand-border-loud: var(--wa-color-brand-60);\n    --wa-color-brand-on-quiet: var(--wa-color-brand-40);\n    --wa-color-brand-on-normal: var(--wa-color-brand-30);\n    --wa-color-brand-on-loud: white;\n\n    --wa-color-success-fill-quiet: var(--wa-color-success-95);\n    --wa-color-success-fill-normal: var(--wa-color-success-90);\n    --wa-color-success-fill-loud: var(--wa-color-success-50);\n    --wa-color-success-border-quiet: var(--wa-color-success-90);\n    --wa-color-success-border-normal: var(--wa-color-success-80);\n    --wa-color-success-border-loud: var(--wa-color-success-60);\n    --wa-color-success-on-quiet: var(--wa-color-success-40);\n    --wa-color-success-on-normal: var(--wa-color-success-30);\n    --wa-color-success-on-loud: white;\n\n    --wa-color-warning-fill-quiet: var(--wa-color-warning-95);\n    --wa-color-warning-fill-normal: var(--wa-color-warning-90);\n    --wa-color-warning-fill-loud: var(--wa-color-warning-50);\n    --wa-color-warning-border-quiet: var(--wa-color-warning-90);\n    --wa-color-warning-border-normal: var(--wa-color-warning-80);\n    --wa-color-warning-border-loud: var(--wa-color-warning-60);\n    --wa-color-warning-on-quiet: var(--wa-color-warning-40);\n    --wa-color-warning-on-normal: var(--wa-color-warning-30);\n    --wa-color-warning-on-loud: white;\n\n    --wa-color-danger-fill-quiet: var(--wa-color-danger-95);\n    --wa-color-danger-fill-normal: var(--wa-color-danger-90);\n    --wa-color-danger-fill-loud: var(--wa-color-danger-50);\n    --wa-color-danger-border-quiet: var(--wa-color-danger-90);\n    --wa-color-danger-border-normal: var(--wa-color-danger-80);\n    --wa-color-danger-border-loud: var(--wa-color-danger-60);\n    --wa-color-danger-on-quiet: var(--wa-color-danger-40);\n    --wa-color-danger-on-normal: var(--wa-color-danger-30);\n    --wa-color-danger-on-loud: white;\n\n    --wa-color-neutral-fill-quiet: var(--wa-color-neutral-95);\n    --wa-color-neutral-fill-normal: var(--wa-color-neutral-90);\n    --wa-color-neutral-fill-loud: var(--wa-color-neutral-20);\n    --wa-color-neutral-border-quiet: var(--wa-color-neutral-90);\n    --wa-color-neutral-border-normal: var(--wa-color-neutral-80);\n    --wa-color-neutral-border-loud: var(--wa-color-neutral-60);\n    --wa-color-neutral-on-quiet: var(--wa-color-neutral-40);\n    --wa-color-neutral-on-normal: var(--wa-color-neutral-30);\n    --wa-color-neutral-on-loud: white;\n    /* #endregion */\n  }\n\n  .wa-dark,\n  .wa-invert,\n  .wa-dark .wa-theme-default,\n  .wa-light .wa-theme-default.wa-invert,\n  .wa-light .wa-theme-default .wa-invert {\n    /* #region Colors (Dark) ~~~~~~~~~~~~~~~~~~~~~~ */\n    color-scheme: dark;\n    color: var(--wa-color-text-normal);\n\n    --wa-color-surface-raised: var(--wa-color-neutral-10);\n    --wa-color-surface-default: var(--wa-color-neutral-05);\n    --wa-color-surface-lowered: color-mix(in oklab, var(--wa-color-surface-default), black 20%);\n    --wa-color-surface-border: var(--wa-color-neutral-20);\n\n    --wa-color-text-normal: var(--wa-color-neutral-95);\n    --wa-color-text-quiet: var(--wa-color-neutral-60);\n    --wa-color-text-link: var(--wa-color-brand-70);\n\n    --wa-color-overlay-modal: color-mix(in oklab, black 60%, transparent);\n    --wa-color-overlay-inline: color-mix(in oklab, var(--wa-color-neutral-50) 10%, transparent);\n\n    --wa-color-shadow: color-mix(\n      in oklab,\n      var(--wa-color-surface-lowered) calc(var(--wa-shadow-blur-scale) * 32% + 40%),\n      transparent\n    );\n\n    --wa-color-focus: var(--wa-color-brand-60);\n\n    --wa-color-mix-hover: black 8%;\n    --wa-color-mix-active: black 16%;\n\n    --wa-color-brand-fill-quiet: var(--wa-color-brand-10);\n    --wa-color-brand-fill-normal: var(--wa-color-brand-20);\n    --wa-color-brand-fill-loud: var(--wa-color-brand-50);\n    --wa-color-brand-border-quiet: var(--wa-color-brand-20);\n    --wa-color-brand-border-normal: var(--wa-color-brand-30);\n    --wa-color-brand-border-loud: var(--wa-color-brand-40);\n    --wa-color-brand-on-quiet: var(--wa-color-brand-60);\n    --wa-color-brand-on-normal: var(--wa-color-brand-70);\n    --wa-color-brand-on-loud: white;\n\n    --wa-color-success-fill-quiet: var(--wa-color-success-10);\n    --wa-color-success-fill-normal: var(--wa-color-success-20);\n    --wa-color-success-fill-loud: var(--wa-color-success-50);\n    --wa-color-success-border-quiet: var(--wa-color-success-20);\n    --wa-color-success-border-normal: var(--wa-color-success-30);\n    --wa-color-success-border-loud: var(--wa-color-success-40);\n    --wa-color-success-on-quiet: var(--wa-color-success-60);\n    --wa-color-success-on-normal: var(--wa-color-success-70);\n    --wa-color-success-on-loud: white;\n\n    --wa-color-warning-fill-quiet: var(--wa-color-warning-10);\n    --wa-color-warning-fill-normal: var(--wa-color-warning-20);\n    --wa-color-warning-fill-loud: var(--wa-color-warning-50);\n    --wa-color-warning-border-quiet: var(--wa-color-warning-20);\n    --wa-color-warning-border-normal: var(--wa-color-warning-30);\n    --wa-color-warning-border-loud: var(--wa-color-warning-40);\n    --wa-color-warning-on-quiet: var(--wa-color-warning-60);\n    --wa-color-warning-on-normal: var(--wa-color-warning-70);\n    --wa-color-warning-on-loud: white;\n\n    --wa-color-danger-fill-quiet: var(--wa-color-danger-10);\n    --wa-color-danger-fill-normal: var(--wa-color-danger-20);\n    --wa-color-danger-fill-loud: var(--wa-color-danger-50);\n    --wa-color-danger-border-quiet: var(--wa-color-danger-20);\n    --wa-color-danger-border-normal: var(--wa-color-danger-30);\n    --wa-color-danger-border-loud: var(--wa-color-danger-40);\n    --wa-color-danger-on-quiet: var(--wa-color-danger-60);\n    --wa-color-danger-on-normal: var(--wa-color-danger-70);\n    --wa-color-danger-on-loud: white;\n\n    --wa-color-neutral-fill-quiet: var(--wa-color-neutral-10);\n    --wa-color-neutral-fill-normal: var(--wa-color-neutral-20);\n    --wa-color-neutral-fill-loud: var(--wa-color-neutral-90);\n    --wa-color-neutral-border-quiet: var(--wa-color-neutral-20);\n    --wa-color-neutral-border-normal: var(--wa-color-neutral-30);\n    --wa-color-neutral-border-loud: var(--wa-color-neutral-40);\n    --wa-color-neutral-on-quiet: var(--wa-color-neutral-60);\n    --wa-color-neutral-on-normal: var(--wa-color-neutral-70);\n    --wa-color-neutral-on-loud: var(--wa-color-neutral-05);\n    /* #endregion */\n  }\n\n  :where(:root),\n  .wa-theme-default,\n  .wa-light,\n  .wa-dark,\n  .wa-invert {\n    font-family: var(--wa-font-family-body);\n\n    /* #region Fonts ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-font-family-body: ui-sans-serif, system-ui, sans-serif;\n    --wa-font-family-heading: var(--wa-font-family-body);\n    --wa-font-family-code: ui-monospace, monospace;\n    --wa-font-family-longform: ui-serif, serif;\n\n    /* Font sizes use a ratio of 1.125 to scale sizes proportionally.\n     * For larger font sizes, each size is twice 1.125x larger to maximize impact.\n     * Each value uses `rem` units and is rounded to the nearest whole pixel when rendered. */\n    --wa-font-size-scale: 1;\n    --wa-font-size-2xs: round(calc(var(--wa-font-size-xs) / 1.125), 1px); /* 11px */\n    --wa-font-size-xs: round(calc(var(--wa-font-size-s) / 1.125), 1px); /* 12px */\n    --wa-font-size-s: round(calc(var(--wa-font-size-m) / 1.125), 1px); /* 14px */\n    --wa-font-size-m: calc(1rem * var(--wa-font-size-scale)); /* 16px */\n    --wa-font-size-l: round(calc(var(--wa-font-size-m) * 1.125 * 1.125), 1px); /* 20px */\n    --wa-font-size-xl: round(calc(var(--wa-font-size-l) * 1.125 * 1.125), 1px); /* 25px */\n    --wa-font-size-2xl: round(calc(var(--wa-font-size-xl) * 1.125 * 1.125), 1px); /* 32px */\n    --wa-font-size-3xl: round(calc(var(--wa-font-size-2xl) * 1.125 * 1.125), 1px); /* 41px */\n    --wa-font-size-4xl: round(calc(var(--wa-font-size-3xl) * 1.125 * 1.125), 1px); /* 52px */\n\n    --wa-font-size-smaller: round(calc(1em / 1.125), 1px);\n    --wa-font-size-larger: round(calc(1em * 1.125 * 1.125), 1px);\n\n    --wa-font-weight-light: 300;\n    --wa-font-weight-normal: 400;\n    --wa-font-weight-semibold: 500;\n    --wa-font-weight-bold: 600;\n\n    --wa-font-weight-body: var(--wa-font-weight-normal);\n    --wa-font-weight-heading: var(--wa-font-weight-bold);\n    --wa-font-weight-code: var(--wa-font-weight-normal);\n    --wa-font-weight-longform: var(--wa-font-weight-normal);\n    --wa-font-weight-action: var(--wa-font-weight-semibold);\n\n    --wa-line-height-condensed: 1.2;\n    --wa-line-height-normal: 1.6;\n    --wa-line-height-expanded: 2;\n\n    --wa-link-decoration-default: underline color-mix(in oklab, currentColor 70%, transparent) dotted;\n    --wa-link-decoration-hover: underline;\n    /* #endregion */\n\n    /* #region Space ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-space-scale: 1;\n    --wa-space-3xs: calc(var(--wa-space-scale) * 0.125rem); /* 2px */\n    --wa-space-2xs: calc(var(--wa-space-scale) * 0.25rem); /* 4px */\n    --wa-space-xs: calc(var(--wa-space-scale) * 0.5rem); /* 8px */\n    --wa-space-s: calc(var(--wa-space-scale) * 0.75rem); /* 12px */\n    --wa-space-m: calc(var(--wa-space-scale) * 1rem); /* 16px */\n    --wa-space-l: calc(var(--wa-space-scale) * 1.5rem); /* 24px */\n    --wa-space-xl: calc(var(--wa-space-scale) * 2rem); /* 32px */\n    --wa-space-2xl: calc(var(--wa-space-scale) * 2.5rem); /* 40px */\n    --wa-space-3xl: calc(var(--wa-space-scale) * 3rem); /* 48px */\n    --wa-space-4xl: calc(var(--wa-space-scale) * 4rem); /* 64px */\n\n    --wa-content-spacing: var(--wa-space-l);\n    /* #endregion */\n\n    /* #region Borders ~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-border-style: solid;\n\n    --wa-border-width-scale: 1;\n    --wa-border-width-s: calc(var(--wa-border-width-scale) * 0.0625rem);\n    --wa-border-width-m: calc(var(--wa-border-width-scale) * 0.125rem);\n    --wa-border-width-l: calc(var(--wa-border-width-scale) * 0.1875rem);\n    /* #endregion */\n\n    /* #region Rounding ~~~~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-border-radius-scale: 1;\n    --wa-border-radius-s: calc(var(--wa-border-radius-scale) * 0.1875rem);\n    --wa-border-radius-m: calc(var(--wa-border-radius-scale) * 0.375rem);\n    --wa-border-radius-l: calc(var(--wa-border-radius-scale) * 0.75rem);\n\n    --wa-border-radius-pill: 9999px;\n    --wa-border-radius-circle: 50%;\n    --wa-border-radius-square: 0px;\n    /* #endregion */\n\n    /* #region Focus ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-focus-ring-style: solid;\n    --wa-focus-ring-width: 0.1875rem; /* 3px */\n    --wa-focus-ring: var(--wa-focus-ring-style) var(--wa-focus-ring-width) var(--wa-color-focus);\n    --wa-focus-ring-offset: 0.0625rem; /* 1px */\n    /* #endregion */\n\n    /* #region Shadows ~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-shadow-offset-x-scale: 0;\n    --wa-shadow-offset-x-s: calc(var(--wa-shadow-offset-x-scale) * 0.125rem);\n    --wa-shadow-offset-x-m: calc(var(--wa-shadow-offset-x-scale) * 0.25rem);\n    --wa-shadow-offset-x-l: calc(var(--wa-shadow-offset-x-scale) * 0.5rem);\n\n    --wa-shadow-offset-y-scale: 1;\n    --wa-shadow-offset-y-s: calc(var(--wa-shadow-offset-y-scale) * 0.125rem);\n    --wa-shadow-offset-y-m: calc(var(--wa-shadow-offset-y-scale) * 0.25rem);\n    --wa-shadow-offset-y-l: calc(var(--wa-shadow-offset-y-scale) * 0.5rem);\n\n    --wa-shadow-blur-scale: 1;\n    --wa-shadow-blur-s: calc(var(--wa-shadow-blur-scale) * 0.125rem);\n    --wa-shadow-blur-m: calc(var(--wa-shadow-blur-scale) * 0.25rem);\n    --wa-shadow-blur-l: calc(var(--wa-shadow-blur-scale) * 0.5rem);\n\n    --wa-shadow-spread-scale: -0.5;\n    --wa-shadow-spread-s: calc(var(--wa-shadow-spread-scale) * 0.125rem);\n    --wa-shadow-spread-m: calc(var(--wa-shadow-spread-scale) * 0.25rem);\n    --wa-shadow-spread-l: calc(var(--wa-shadow-spread-scale) * 0.5rem);\n\n    --wa-shadow-s: var(--wa-shadow-offset-x-s) var(--wa-shadow-offset-y-s) var(--wa-shadow-blur-s)\n      var(--wa-shadow-spread-s) var(--wa-color-shadow);\n    --wa-shadow-m: var(--wa-shadow-offset-x-m) var(--wa-shadow-offset-y-m) var(--wa-shadow-blur-m)\n      var(--wa-shadow-spread-m) var(--wa-color-shadow);\n    --wa-shadow-l: var(--wa-shadow-offset-x-l) var(--wa-shadow-offset-y-l) var(--wa-shadow-blur-l)\n      var(--wa-shadow-spread-l) var(--wa-color-shadow);\n    /* #endregion */\n\n    /* #region Transitions ~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-transition-easing: ease;\n    --wa-transition-slow: 300ms;\n    --wa-transition-normal: 150ms;\n    --wa-transition-fast: 75ms;\n    /* #endregion */\n\n    /* #region Components ~~~~~~~~~~~~~~~~~~~~~~~ */\n    /* Form Controls */\n    --wa-form-control-background-color: var(--wa-color-surface-default);\n\n    --wa-form-control-border-color: var(--wa-color-neutral-border-loud);\n    --wa-form-control-border-style: var(--wa-border-style);\n    --wa-form-control-border-width: var(--wa-border-width-s);\n    --wa-form-control-border-radius: var(--wa-border-radius-m);\n\n    --wa-form-control-activated-color: var(--wa-color-brand-fill-loud);\n\n    --wa-form-control-label-color: var(--wa-color-text-normal);\n    --wa-form-control-label-font-weight: var(--wa-font-weight-semibold);\n    --wa-form-control-label-line-height: var(--wa-line-height-condensed);\n\n    --wa-form-control-value-color: var(--wa-color-text-normal);\n    --wa-form-control-value-font-weight: var(--wa-font-weight-body);\n    --wa-form-control-value-line-height: var(--wa-line-height-condensed);\n\n    --wa-form-control-hint-color: var(--wa-color-text-quiet);\n    --wa-form-control-hint-font-weight: var(--wa-font-weight-body);\n    --wa-form-control-hint-line-height: var(--wa-line-height-normal);\n\n    --wa-form-control-placeholder-color: var(--wa-color-gray-50);\n\n    --wa-form-control-required-content: \'*\';\n    --wa-form-control-required-content-color: inherit;\n    --wa-form-control-required-content-offset: 0.1em;\n\n    --wa-form-control-padding-block: 0.75em;\n    --wa-form-control-padding-inline: 1em;\n    --wa-form-control-height: round(\n      calc(2 * var(--wa-form-control-padding-block) + 1em * var(--wa-form-control-value-line-height)),\n      1px\n    );\n    --wa-form-control-toggle-size: round(1.25em, 1px);\n\n    /* Panels */\n    --wa-panel-border-style: var(--wa-border-style);\n    --wa-panel-border-width: var(--wa-border-width-s);\n    --wa-panel-border-radius: var(--wa-border-radius-l);\n\n    /* Tooltips */\n    --wa-tooltip-arrow-size: 0.375rem;\n\n    --wa-tooltip-background-color: var(--wa-color-text-normal);\n\n    --wa-tooltip-border-color: var(--wa-tooltip-background-color);\n    --wa-tooltip-border-style: var(--wa-border-style);\n    --wa-tooltip-border-width: var(--wa-border-width-s);\n    --wa-tooltip-border-radius: var(--wa-border-radius-s);\n\n    --wa-tooltip-content-color: var(--wa-color-surface-default);\n    --wa-tooltip-font-size: var(--wa-font-size-s);\n    --wa-tooltip-line-height: var(--wa-line-height-normal);\n    /* #endregion */\n  }\n}\n\n\n:host {\n  display: inline-block;\n}\n\n:host(.custom-date-picker--disabled) {\n  cursor: not-allowed;\n}\n\n.custom-date-picker__popup {\n  --arrow-color: var(--wa-color-neutral-0, #fff);\n  --arrow-size: 10px;\n}\n\n.custom-date-picker__popup::part(popup) {\n  background: transparent;\n  border: none;\n  padding: 0;\n  box-shadow: none;\n}\n.custom-date-picker__trigger {\n  cursor: pointer;\n}\n/* Unified invalid state (no conflicts) */\n\n.picker-surface {\n  background: var(--wa-color-neutral-0, #fff);\n  border-radius: 0.75rem;\n  box-shadow: 0 12px 40px rgba(15, 23, 42, 0.18);\n  padding: 0.25rem 1rem;\n}\n\n.picker-surface__input {\n  position: absolute;\n  left: -9999px;\n  width: 0;\n  height: 0;\n  opacity: 0;\n  pointer-events: none;\n}\n\n.custom-date-picker__calendar {\n  --adp-background-color: var(--wa-color-neutral-0, #fff);\n  --adp-border-radius: 12px;\n  --adp-cell-border-radius: 8px;\n  --adp-padding: 1rem;\n  --adp-color: var(--wa-color-neutral-900, #0f172a);\n  --adp-color-other-month: rgba(15, 23, 42, 0.35);\n  --adp-color-other-month-hover: rgba(15, 23, 42, 0.65);\n  --adp-color-disabled: rgba(15, 23, 42, 0.35);\n  --adp-nav-title-size: 1rem;\n  --adp-nav-title-weight: 600;\n  --adp-cell-background-color-selected: var(--wa-color-primary-600, #2563eb);\n  --adp-cell-background-color-selected-hover: var(--wa-color-primary-700, #1d4ed8);\n  --adp-cell-border-color: transparent;\n  --adp-day-name-color: rgba(15, 23, 42, 0.65);\n}\n\n.custom-date-picker__calendar .air-datepicker-body--day-name {\n  font-weight: 600;\n}\n\n.custom-date-picker__calendar .air-datepicker-nav--action svg {\n  stroke: currentColor;\n}\n';const Zi=Qi;var er=undefined&&undefined.__decorate||function(e,t,a,i){var r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,a):i,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,a,i);else for(var s=e.length-1;s>=0;s--)if(n=e[s])o=(r<3?n(o):r>3?n(t,a,o):n(t,a))||o;return r>3&&o&&Object.defineProperty(t,a,o),o};const tr=class{constructor(a){e(this,a);this.dateChanged=t(this,"dateChanged",7);this.datePickerFocus=t(this,"datePickerFocus",7);this.datePickerBlur=t(this,"datePickerBlur",7)}get el(){return r(this)}withClear;placeholder;label;dates;inline=false;date=null;multipleDates=false;range=false;dateFormat="yyyy-MM-dd";timepicker=false;minDate;maxDate;disabled=false;autoClose=true;showOtherMonths=true;selectOtherMonths=true;customPicker=false;container;hint;forceDestroyOnUpdate=false;emitEmptyDate=false;triggerContainerStyle="";currentDate=null;isActive=false;isPickerInvalid;dateChanged;datePickerFocus;datePickerBlur;pickerRef;calendarContainerRef;datePicker;componentWillLoad(){const e=this.el.hasAttribute("aria-invalid");if(e){this.isPickerInvalid=JSON.parse(this.el.getAttribute("aria-invalid"))}if(this.date){const e=this.toValidDate(this.date);if(e){this.currentDate=e}}}componentDidLoad(){this.initializeDatepicker()}disconnectedCallback(){this.datePicker?.destroy?.()}handleClickOutside(){if(this.isActive){this.closePopup()}}datePropChanged(e,t){if(this.isSameDates(e,t)){return}this.updatePickerDate(e)}minDatePropChanged(e,t){if(!this.datePicker){return}if(!this.isSameDates(e,t)){this.datePicker?.update({minDate:this.toValidDate(e)??undefined})}}maxDatePropChanged(e,t){if(!this.datePicker){return}if(!this.isSameDates(e,t)){this.datePicker?.update({maxDate:this.toValidDate(e)??undefined})}}handleDisabledChange(e){if(e){this.closePopup()}}handleAriaInvalidChange(e){this.isPickerInvalid=JSON.parse(e)}async openDatePicker(){if(!this.disabled){this.openPopup()}}async clearDatePicker(){this.datePicker?.clear();this.currentDate=null;this.date=null;if(this.emitEmptyDate){this.dateChanged.emit({start:null,end:null})}}openPopup(){if(this.isActive)return;this.isActive=true;this.datePickerFocus.emit()}closePopup(){if(!this.isActive)return;this.isActive=false;this.datePickerBlur.emit()}handleAnchorClick=e=>{e.stopPropagation();e.stopImmediatePropagation();e.preventDefault();if(this.disabled){return}if(this.isActive){this.closePopup()}else{this.openPopup()}};handleAnchorKeyDown=e=>{if(this.customPicker||this.disabled)return;if(e.key==="Enter"||e.key===" "){e.preventDefault();this.isActive?this.closePopup():this.openPopup()}};isSameDates(e,t){if(!e&&!t)return true;if(!e||!t)return false;return me(e).isSame(me(t),"day")}toValidDate(e){if(!e)return null;if(typeof e==="string"){return me(e,"YYYY-MM-DD").toDate()}return me(e).toDate()}updatePickerDate(e){const t=this.toValidDate(e);if(!t){this.datePicker?.clear({silent:true});this.currentDate=null;return}if(this.currentDate&&this.isSameDates(this.currentDate,t)){return}this.currentDate=t;if(this.forceDestroyOnUpdate&&this.datePicker){this.datePicker.destroy();this.datePicker=undefined;this.initializeDatepicker()}else{this.datePicker?.selectDate(t,{silent:true})}}initializeDatepicker(){if(this.datePicker||!this.pickerRef){return}const e=this.container??this.calendarContainerRef??this.el;this.datePicker=new va(this.pickerRef,{container:e,inline:true,selectedDates:this.dates?this.dates:this.currentDate?[this.currentDate]:[],multipleDates:this.multipleDates,range:this.range,dateFormat:this.dateFormat,timepicker:this.timepicker,minDate:this.toValidDate(this.minDate)??undefined,maxDate:this.toValidDate(this.maxDate)??undefined,autoClose:this.autoClose,locale:ka,showOtherMonths:this.showOtherMonths,selectOtherMonths:this.selectOtherMonths,onSelect:({date:e})=>this.handleDateSelect(e)});this.datePicker.$datepicker?.classList.add("ir-custom-date-picker__calendar");this.datePicker.$datepicker.style.borderWidth="0px";this.datePicker.$datepicker.style.setProperty("--adp-cell-background-color-selected","var(--wa-color-brand-50)");this.datePicker.$datepicker.style.setProperty("--adp-cell-background-color-selected-hover","var(--wa-color-brand-50)");this.datePicker.$datepicker.style.setProperty("--adp-accent-color","var(--wa-color-brand-50)");this.datePicker.$datepicker.style.setProperty("--adp-day-name-color","lab(48.496% 0 0)")}handleDateSelect(e){const t=Array.isArray(e)?e.filter(Boolean):e?[e]:[];if(!t.length||!(t[0]instanceof Date)){if(this.emitEmptyDate){this.dateChanged.emit({start:null,end:null})}this.currentDate=null;this.date=null;return}const a=t[0];const i=this.range&&t.length>1?t[1]:a;this.currentDate=a;this.date=a;this.dateChanged.emit({start:a?me(a):null,end:i?me(i):null});const r=this.autoClose&&(!this.range||this.range&&t.length>1);if(r){this.closePopup()}}getTriggerLabel(){if(this.range){return this.dates.map((e=>me(e).format("MMM DD, YYYY"))).join(" â†’ ")}if(!this.currentDate){return null}return this.timepicker?me(this.currentDate).format("MMM DD, YYYY, HH:mm"):me(this.currentDate).format("MMM DD, YYYY")}render(){const e=`custom-date-picker__trigger ${this.triggerContainerStyle} ${this.disabled?"custom-date-picker__trigger--disabled":""}`;return a(i,{key:"815ae7f3da000b7c5b148b11832b9aa50eac268c",class:{"custom-date-picker":true,"custom-date-picker--open":this.isActive,"custom-date-picker--disabled":this.disabled}},a("wa-popup",{key:"5e7cbd8a2a74aff6b9fa8440140ebb4799095deb",distance:8,class:"custom-date-picker__popup",arrow:true,"arrow-placement":"anchor",flip:true,shift:true,active:this.isActive},a("ir-input",{key:"4635c020b68a23f209294d27606267abe23f6ab3",disabled:this.disabled,placeholder:this.placeholder,withClear:this.withClear,tabIndex:!this.customPicker&&!this.disabled?0:undefined,"aria-expanded":!this.customPicker?String(this.isActive):undefined,"aria-disabled":this.disabled?"true":undefined,onKeyDown:this.handleAnchorKeyDown,"aria-invalid":String(this.isPickerInvalid),hint:this.hint,class:e,onClick:this.handleAnchorClick,readonly:true,slot:"anchor",defaultValue:this.getTriggerLabel(),value:this.getTriggerLabel(),label:this.label},a("slot",{key:"592823e7df33fda8a59762d818b225c1563aed13",name:"hint",slot:"hint"}),a("slot",{key:"73615492e541a9263fb7aaa6a59182349f8043f3",name:"start",slot:"start"}),a("slot",{key:"6e928dd550bf3a7cbf0d94748d4065c8c1b291eb",name:"end",slot:"end"})),a("div",{key:"e5bfe6dfeb2ae8a7cb2bbb31579b51980f505808",class:"picker-surface"},a("div",{key:"928e67bcbc3ea836d7d47aa48a8c582a7e588019",class:"picker-surface__calendar",ref:e=>this.calendarContainerRef=e}),a("input",{key:"c5b9a78940e9dacef2b7f9a05b09b180a7f769d0",type:"text",class:"picker-surface__input",ref:e=>this.pickerRef=e,"aria-hidden":"true",tabIndex:-1,readOnly:true}))))}static get watchers(){return{date:["datePropChanged"],minDate:["minDatePropChanged"],maxDate:["maxDatePropChanged"],disabled:["handleDisabledChange"],"aria-invalid":["handleAriaInvalidChange"]}}};er([Gi()],tr.prototype,"handleClickOutside",null);tr.style=Zi;var ar="top";var ir="bottom";var rr="right";var or="left";var nr="auto";var sr=[ar,ir,rr,or];var lr="start";var cr="end";var dr="clippingParents";var hr="viewport";var pr="popper";var ur="reference";var fr=sr.reduce((function(e,t){return e.concat([t+"-"+lr,t+"-"+cr])}),[]);var gr=[].concat(sr,[nr]).reduce((function(e,t){return e.concat([t,t+"-"+lr,t+"-"+cr])}),[]);var br="beforeRead";var wr="read";var mr="afterRead";var vr="beforeMain";var yr="main";var kr="afterMain";var _r="beforeWrite";var xr="write";var Dr="afterWrite";var Cr=[br,wr,mr,vr,yr,kr,_r,xr,Dr];function Mr(e){return e?(e.nodeName||"").toLowerCase():null}function Yr(e){if(e==null){return window}if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t?t.defaultView||window:window}return e}function Sr(e){var t=Yr(e).Element;return e instanceof t||e instanceof Element}function Er(e){var t=Yr(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Ir(e){if(typeof ShadowRoot==="undefined"){return false}var t=Yr(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Tr(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var a=t.styles[e]||{};var i=t.attributes[e]||{};var r=t.elements[e];if(!Er(r)||!Mr(r)){return}Object.assign(r.style,a);Object.keys(i).forEach((function(e){var t=i[e];if(t===false){r.removeAttribute(e)}else{r.setAttribute(e,t===true?"":t)}}))}))}function Or(e){var t=e.state;var a={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,a.popper);t.styles=a;if(t.elements.arrow){Object.assign(t.elements.arrow.style,a.arrow)}return function(){Object.keys(t.elements).forEach((function(e){var i=t.elements[e];var r=t.attributes[e]||{};var o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:a[e]);var n=o.reduce((function(e,t){e[t]="";return e}),{});if(!Er(i)||!Mr(i)){return}Object.assign(i.style,n);Object.keys(r).forEach((function(e){i.removeAttribute(e)}))}))}}const zr={name:"applyStyles",enabled:true,phase:"write",fn:Tr,effect:Or,requires:["computeStyles"]};function Ar(e){return e.split("-")[0]}var Br=Math.max;var Rr=Math.min;var Nr=Math.round;function $r(){var e=navigator.userAgentData;if(e!=null&&e.brands&&Array.isArray(e.brands)){return e.brands.map((function(e){return e.brand+"/"+e.version})).join(" ")}return navigator.userAgent}function Lr(){return!/^((?!chrome|android).)*safari/i.test($r())}function Pr(e,t,a){if(t===void 0){t=false}if(a===void 0){a=false}var i=e.getBoundingClientRect();var r=1;var o=1;if(t&&Er(e)){r=e.offsetWidth>0?Nr(i.width)/e.offsetWidth||1:1;o=e.offsetHeight>0?Nr(i.height)/e.offsetHeight||1:1}var n=Sr(e)?Yr(e):window,s=n.visualViewport;var l=!Lr()&&a;var c=(i.left+(l&&s?s.offsetLeft:0))/r;var d=(i.top+(l&&s?s.offsetTop:0))/o;var h=i.width/r;var p=i.height/o;return{width:h,height:p,top:d,right:c+h,bottom:d+p,left:c,x:c,y:d}}function Hr(e){var t=Pr(e);var a=e.offsetWidth;var i=e.offsetHeight;if(Math.abs(t.width-a)<=1){a=t.width}if(Math.abs(t.height-i)<=1){i=t.height}return{x:e.offsetLeft,y:e.offsetTop,width:a,height:i}}function Fr(e,t){var a=t.getRootNode&&t.getRootNode();if(e.contains(t)){return true}else if(a&&Ir(a)){var i=t;do{if(i&&e.isSameNode(i)){return true}i=i.parentNode||i.host}while(i)}return false}function Ur(e){return Yr(e).getComputedStyle(e)}function jr(e){return["table","td","th"].indexOf(Mr(e))>=0}function Vr(e){return((Sr(e)?e.ownerDocument:e.document)||window.document).documentElement}function Gr(e){if(Mr(e)==="html"){return e}return e.assignedSlot||e.parentNode||(Ir(e)?e.host:null)||Vr(e)}function qr(e){if(!Er(e)||Ur(e).position==="fixed"){return null}return e.offsetParent}function Kr(e){var t=/firefox/i.test($r());var a=/Trident/i.test($r());if(a&&Er(e)){var i=Ur(e);if(i.position==="fixed"){return null}}var r=Gr(e);if(Ir(r)){r=r.host}while(Er(r)&&["html","body"].indexOf(Mr(r))<0){var o=Ur(r);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none"){return r}else{r=r.parentNode}}return null}function Wr(e){var t=Yr(e);var a=qr(e);while(a&&jr(a)&&Ur(a).position==="static"){a=qr(a)}if(a&&(Mr(a)==="html"||Mr(a)==="body"&&Ur(a).position==="static")){return t}return a||Kr(e)||t}function Xr(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Jr(e,t,a){return Br(e,Rr(t,a))}function Qr(e,t,a){var i=Jr(e,t,a);return i>a?a:i}function Zr(){return{top:0,right:0,bottom:0,left:0}}function eo(e){return Object.assign({},Zr(),e)}function to(e,t){return t.reduce((function(t,a){t[a]=e;return t}),{})}var ao=function e(t,a){t=typeof t==="function"?t(Object.assign({},a.rects,{placement:a.placement})):t;return eo(typeof t!=="number"?t:to(t,sr))};function io(e){var t;var a=e.state,i=e.name,r=e.options;var o=a.elements.arrow;var n=a.modifiersData.popperOffsets;var s=Ar(a.placement);var l=Xr(s);var c=[or,rr].indexOf(s)>=0;var d=c?"height":"width";if(!o||!n){return}var h=ao(r.padding,a);var p=Hr(o);var u=l==="y"?ar:or;var f=l==="y"?ir:rr;var g=a.rects.reference[d]+a.rects.reference[l]-n[l]-a.rects.popper[d];var b=n[l]-a.rects.reference[l];var w=Wr(o);var m=w?l==="y"?w.clientHeight||0:w.clientWidth||0:0;var v=g/2-b/2;var y=h[u];var k=m-p[d]-h[f];var _=m/2-p[d]/2+v;var x=Jr(y,_,k);var D=l;a.modifiersData[i]=(t={},t[D]=x,t.centerOffset=x-_,t)}function ro(e){var t=e.state,a=e.options;var i=a.element,r=i===void 0?"[data-popper-arrow]":i;if(r==null){return}if(typeof r==="string"){r=t.elements.popper.querySelector(r);if(!r){return}}if(!Fr(t.elements.popper,r)){return}t.elements.arrow=r}const oo={name:"arrow",enabled:true,phase:"main",fn:io,effect:ro,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function no(e){return e.split("-")[1]}var so={top:"auto",right:"auto",bottom:"auto",left:"auto"};function lo(e,t){var a=e.x,i=e.y;var r=t.devicePixelRatio||1;return{x:Nr(a*r)/r||0,y:Nr(i*r)/r||0}}function co(e){var t;var a=e.popper,i=e.popperRect,r=e.placement,o=e.variation,n=e.offsets,s=e.position,l=e.gpuAcceleration,c=e.adaptive,d=e.roundOffsets,h=e.isFixed;var p=n.x,u=p===void 0?0:p,f=n.y,g=f===void 0?0:f;var b=typeof d==="function"?d({x:u,y:g}):{x:u,y:g};u=b.x;g=b.y;var w=n.hasOwnProperty("x");var m=n.hasOwnProperty("y");var v=or;var y=ar;var k=window;if(c){var _=Wr(a);var x="clientHeight";var D="clientWidth";if(_===Yr(a)){_=Vr(a);if(Ur(_).position!=="static"&&s==="absolute"){x="scrollHeight";D="scrollWidth"}}_=_;if(r===ar||(r===or||r===rr)&&o===cr){y=ir;var C=h&&_===k&&k.visualViewport?k.visualViewport.height:_[x];g-=C-i.height;g*=l?1:-1}if(r===or||(r===ar||r===ir)&&o===cr){v=rr;var M=h&&_===k&&k.visualViewport?k.visualViewport.width:_[D];u-=M-i.width;u*=l?1:-1}}var Y=Object.assign({position:s},c&&so);var S=d===true?lo({x:u,y:g},Yr(a)):{x:u,y:g};u=S.x;g=S.y;if(l){var E;return Object.assign({},Y,(E={},E[y]=m?"0":"",E[v]=w?"0":"",E.transform=(k.devicePixelRatio||1)<=1?"translate("+u+"px, "+g+"px)":"translate3d("+u+"px, "+g+"px, 0)",E))}return Object.assign({},Y,(t={},t[y]=m?g+"px":"",t[v]=w?u+"px":"",t.transform="",t))}function ho(e){var t=e.state,a=e.options;var i=a.gpuAcceleration,r=i===void 0?true:i,o=a.adaptive,n=o===void 0?true:o,s=a.roundOffsets,l=s===void 0?true:s;var c={placement:Ar(t.placement),variation:no(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};if(t.modifiersData.popperOffsets!=null){t.styles.popper=Object.assign({},t.styles.popper,co(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:n,roundOffsets:l})))}if(t.modifiersData.arrow!=null){t.styles.arrow=Object.assign({},t.styles.arrow,co(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:false,roundOffsets:l})))}t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const po={name:"computeStyles",enabled:true,phase:"beforeWrite",fn:ho,data:{}};var uo={passive:true};function fo(e){var t=e.state,a=e.instance,i=e.options;var r=i.scroll,o=r===void 0?true:r,n=i.resize,s=n===void 0?true:n;var l=Yr(t.elements.popper);var c=[].concat(t.scrollParents.reference,t.scrollParents.popper);if(o){c.forEach((function(e){e.addEventListener("scroll",a.update,uo)}))}if(s){l.addEventListener("resize",a.update,uo)}return function(){if(o){c.forEach((function(e){e.removeEventListener("scroll",a.update,uo)}))}if(s){l.removeEventListener("resize",a.update,uo)}}}const go={name:"eventListeners",enabled:true,phase:"write",fn:function e(){},effect:fo,data:{}};var bo={left:"right",right:"left",bottom:"top",top:"bottom"};function wo(e){return e.replace(/left|right|bottom|top/g,(function(e){return bo[e]}))}var mo={start:"end",end:"start"};function vo(e){return e.replace(/start|end/g,(function(e){return mo[e]}))}function yo(e){var t=Yr(e);var a=t.pageXOffset;var i=t.pageYOffset;return{scrollLeft:a,scrollTop:i}}function ko(e){return Pr(Vr(e)).left+yo(e).scrollLeft}function _o(e,t){var a=Yr(e);var i=Vr(e);var r=a.visualViewport;var o=i.clientWidth;var n=i.clientHeight;var s=0;var l=0;if(r){o=r.width;n=r.height;var c=Lr();if(c||!c&&t==="fixed"){s=r.offsetLeft;l=r.offsetTop}}return{width:o,height:n,x:s+ko(e),y:l}}function xo(e){var t;var a=Vr(e);var i=yo(e);var r=(t=e.ownerDocument)==null?void 0:t.body;var o=Br(a.scrollWidth,a.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0);var n=Br(a.scrollHeight,a.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0);var s=-i.scrollLeft+ko(e);var l=-i.scrollTop;if(Ur(r||a).direction==="rtl"){s+=Br(a.clientWidth,r?r.clientWidth:0)-o}return{width:o,height:n,x:s,y:l}}function Do(e){var t=Ur(e),a=t.overflow,i=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(a+r+i)}function Co(e){if(["html","body","#document"].indexOf(Mr(e))>=0){return e.ownerDocument.body}if(Er(e)&&Do(e)){return e}return Co(Gr(e))}function Mo(e,t){var a;if(t===void 0){t=[]}var i=Co(e);var r=i===((a=e.ownerDocument)==null?void 0:a.body);var o=Yr(i);var n=r?[o].concat(o.visualViewport||[],Do(i)?i:[]):i;var s=t.concat(n);return r?s:s.concat(Mo(Gr(n)))}function Yo(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function So(e,t){var a=Pr(e,false,t==="fixed");a.top=a.top+e.clientTop;a.left=a.left+e.clientLeft;a.bottom=a.top+e.clientHeight;a.right=a.left+e.clientWidth;a.width=e.clientWidth;a.height=e.clientHeight;a.x=a.left;a.y=a.top;return a}function Eo(e,t,a){return t===hr?Yo(_o(e,a)):Sr(t)?So(t,a):Yo(xo(Vr(e)))}function Io(e){var t=Mo(Gr(e));var a=["absolute","fixed"].indexOf(Ur(e).position)>=0;var i=a&&Er(e)?Wr(e):e;if(!Sr(i)){return[]}return t.filter((function(e){return Sr(e)&&Fr(e,i)&&Mr(e)!=="body"}))}function To(e,t,a,i){var r=t==="clippingParents"?Io(e):[].concat(t);var o=[].concat(r,[a]);var n=o[0];var s=o.reduce((function(t,a){var r=Eo(e,a,i);t.top=Br(r.top,t.top);t.right=Rr(r.right,t.right);t.bottom=Rr(r.bottom,t.bottom);t.left=Br(r.left,t.left);return t}),Eo(e,n,i));s.width=s.right-s.left;s.height=s.bottom-s.top;s.x=s.left;s.y=s.top;return s}function Oo(e){var t=e.reference,a=e.element,i=e.placement;var r=i?Ar(i):null;var o=i?no(i):null;var n=t.x+t.width/2-a.width/2;var s=t.y+t.height/2-a.height/2;var l;switch(r){case ar:l={x:n,y:t.y-a.height};break;case ir:l={x:n,y:t.y+t.height};break;case rr:l={x:t.x+t.width,y:s};break;case or:l={x:t.x-a.width,y:s};break;default:l={x:t.x,y:t.y}}var c=r?Xr(r):null;if(c!=null){var d=c==="y"?"height":"width";switch(o){case lr:l[c]=l[c]-(t[d]/2-a[d]/2);break;case cr:l[c]=l[c]+(t[d]/2-a[d]/2);break}}return l}function zo(e,t){if(t===void 0){t={}}var a=t,i=a.placement,r=i===void 0?e.placement:i,o=a.strategy,n=o===void 0?e.strategy:o,s=a.boundary,l=s===void 0?dr:s,c=a.rootBoundary,d=c===void 0?hr:c,h=a.elementContext,p=h===void 0?pr:h,u=a.altBoundary,f=u===void 0?false:u,g=a.padding,b=g===void 0?0:g;var w=eo(typeof b!=="number"?b:to(b,sr));var m=p===pr?ur:pr;var v=e.rects.popper;var y=e.elements[f?m:p];var k=To(Sr(y)?y:y.contextElement||Vr(e.elements.popper),l,d,n);var _=Pr(e.elements.reference);var x=Oo({reference:_,element:v,strategy:"absolute",placement:r});var D=Yo(Object.assign({},v,x));var C=p===pr?D:_;var M={top:k.top-C.top+w.top,bottom:C.bottom-k.bottom+w.bottom,left:k.left-C.left+w.left,right:C.right-k.right+w.right};var Y=e.modifiersData.offset;if(p===pr&&Y){var S=Y[r];Object.keys(M).forEach((function(e){var t=[rr,ir].indexOf(e)>=0?1:-1;var a=[ar,ir].indexOf(e)>=0?"y":"x";M[e]+=S[a]*t}))}return M}function Ao(e,t){if(t===void 0){t={}}var a=t,i=a.placement,r=a.boundary,o=a.rootBoundary,n=a.padding,s=a.flipVariations,l=a.allowedAutoPlacements,c=l===void 0?gr:l;var d=no(i);var h=d?s?fr:fr.filter((function(e){return no(e)===d})):sr;var p=h.filter((function(e){return c.indexOf(e)>=0}));if(p.length===0){p=h}var u=p.reduce((function(t,a){t[a]=zo(e,{placement:a,boundary:r,rootBoundary:o,padding:n})[Ar(a)];return t}),{});return Object.keys(u).sort((function(e,t){return u[e]-u[t]}))}function Bo(e){if(Ar(e)===nr){return[]}var t=wo(e);return[vo(e),t,vo(t)]}function Ro(e){var t=e.state,a=e.options,i=e.name;if(t.modifiersData[i]._skip){return}var r=a.mainAxis,o=r===void 0?true:r,n=a.altAxis,s=n===void 0?true:n,l=a.fallbackPlacements,c=a.padding,d=a.boundary,h=a.rootBoundary,p=a.altBoundary,u=a.flipVariations,f=u===void 0?true:u,g=a.allowedAutoPlacements;var b=t.options.placement;var w=Ar(b);var m=w===b;var v=l||(m||!f?[wo(b)]:Bo(b));var y=[b].concat(v).reduce((function(e,a){return e.concat(Ar(a)===nr?Ao(t,{placement:a,boundary:d,rootBoundary:h,padding:c,flipVariations:f,allowedAutoPlacements:g}):a)}),[]);var k=t.rects.reference;var _=t.rects.popper;var x=new Map;var D=true;var C=y[0];for(var M=0;M<y.length;M++){var Y=y[M];var S=Ar(Y);var E=no(Y)===lr;var I=[ar,ir].indexOf(S)>=0;var T=I?"width":"height";var O=zo(t,{placement:Y,boundary:d,rootBoundary:h,altBoundary:p,padding:c});var z=I?E?rr:or:E?ir:ar;if(k[T]>_[T]){z=wo(z)}var A=wo(z);var B=[];if(o){B.push(O[S]<=0)}if(s){B.push(O[z]<=0,O[A]<=0)}if(B.every((function(e){return e}))){C=Y;D=false;break}x.set(Y,B)}if(D){var R=f?3:1;var N=function e(t){var a=y.find((function(e){var a=x.get(e);if(a){return a.slice(0,t).every((function(e){return e}))}}));if(a){C=a;return"break"}};for(var $=R;$>0;$--){var L=N($);if(L==="break")break}}if(t.placement!==C){t.modifiersData[i]._skip=true;t.placement=C;t.reset=true}}const No={name:"flip",enabled:true,phase:"main",fn:Ro,requiresIfExists:["offset"],data:{_skip:false}};function $o(e,t,a){if(a===void 0){a={x:0,y:0}}return{top:e.top-t.height-a.y,right:e.right-t.width+a.x,bottom:e.bottom-t.height+a.y,left:e.left-t.width-a.x}}function Lo(e){return[ar,rr,ir,or].some((function(t){return e[t]>=0}))}function Po(e){var t=e.state,a=e.name;var i=t.rects.reference;var r=t.rects.popper;var o=t.modifiersData.preventOverflow;var n=zo(t,{elementContext:"reference"});var s=zo(t,{altBoundary:true});var l=$o(n,i);var c=$o(s,r,o);var d=Lo(l);var h=Lo(c);t.modifiersData[a]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:h};t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":h})}const Ho={name:"hide",enabled:true,phase:"main",requiresIfExists:["preventOverflow"],fn:Po};function Fo(e,t,a){var i=Ar(e);var r=[or,ar].indexOf(i)>=0?-1:1;var o=typeof a==="function"?a(Object.assign({},t,{placement:e})):a,n=o[0],s=o[1];n=n||0;s=(s||0)*r;return[or,rr].indexOf(i)>=0?{x:s,y:n}:{x:n,y:s}}function Uo(e){var t=e.state,a=e.options,i=e.name;var r=a.offset,o=r===void 0?[0,0]:r;var n=gr.reduce((function(e,a){e[a]=Fo(a,t.rects,o);return e}),{});var s=n[t.placement],l=s.x,c=s.y;if(t.modifiersData.popperOffsets!=null){t.modifiersData.popperOffsets.x+=l;t.modifiersData.popperOffsets.y+=c}t.modifiersData[i]=n}const jo={name:"offset",enabled:true,phase:"main",requires:["popperOffsets"],fn:Uo};function Vo(e){var t=e.state,a=e.name;t.modifiersData[a]=Oo({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Go={name:"popperOffsets",enabled:true,phase:"read",fn:Vo,data:{}};function qo(e){return e==="x"?"y":"x"}function Ko(e){var t=e.state,a=e.options,i=e.name;var r=a.mainAxis,o=r===void 0?true:r,n=a.altAxis,s=n===void 0?false:n,l=a.boundary,c=a.rootBoundary,d=a.altBoundary,h=a.padding,p=a.tether,u=p===void 0?true:p,f=a.tetherOffset,g=f===void 0?0:f;var b=zo(t,{boundary:l,rootBoundary:c,padding:h,altBoundary:d});var w=Ar(t.placement);var m=no(t.placement);var v=!m;var y=Xr(w);var k=qo(y);var _=t.modifiersData.popperOffsets;var x=t.rects.reference;var D=t.rects.popper;var C=typeof g==="function"?g(Object.assign({},t.rects,{placement:t.placement})):g;var M=typeof C==="number"?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C);var Y=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null;var S={x:0,y:0};if(!_){return}if(o){var E;var I=y==="y"?ar:or;var T=y==="y"?ir:rr;var O=y==="y"?"height":"width";var z=_[y];var A=z+b[I];var B=z-b[T];var R=u?-D[O]/2:0;var N=m===lr?x[O]:D[O];var $=m===lr?-D[O]:-x[O];var L=t.elements.arrow;var P=u&&L?Hr(L):{width:0,height:0};var H=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Zr();var F=H[I];var U=H[T];var j=Jr(0,x[O],P[O]);var V=v?x[O]/2-R-j-F-M.mainAxis:N-j-F-M.mainAxis;var G=v?-x[O]/2+R+j+U+M.mainAxis:$+j+U+M.mainAxis;var q=t.elements.arrow&&Wr(t.elements.arrow);var K=q?y==="y"?q.clientTop||0:q.clientLeft||0:0;var W=(E=Y==null?void 0:Y[y])!=null?E:0;var X=z+V-W-K;var J=z+G-W;var Q=Jr(u?Rr(A,X):A,z,u?Br(B,J):B);_[y]=Q;S[y]=Q-z}if(s){var Z;var ee=y==="x"?ar:or;var te=y==="x"?ir:rr;var ae=_[k];var ie=k==="y"?"height":"width";var re=ae+b[ee];var oe=ae-b[te];var ne=[ar,or].indexOf(w)!==-1;var se=(Z=Y==null?void 0:Y[k])!=null?Z:0;var le=ne?re:ae-x[ie]-D[ie]-se+M.altAxis;var ce=ne?ae+x[ie]+D[ie]-se-M.altAxis:oe;var de=u&&ne?Qr(le,ae,ce):Jr(u?le:re,ae,u?ce:oe);_[k]=de;S[k]=de-ae}t.modifiersData[i]=S}const Wo={name:"preventOverflow",enabled:true,phase:"main",fn:Ko,requiresIfExists:["offset"]};function Xo(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Jo(e){if(e===Yr(e)||!Er(e)){return yo(e)}else{return Xo(e)}}function Qo(e){var t=e.getBoundingClientRect();var a=Nr(t.width)/e.offsetWidth||1;var i=Nr(t.height)/e.offsetHeight||1;return a!==1||i!==1}function Zo(e,t,a){if(a===void 0){a=false}var i=Er(t);var r=Er(t)&&Qo(t);var o=Vr(t);var n=Pr(e,r,a);var s={scrollLeft:0,scrollTop:0};var l={x:0,y:0};if(i||!i&&!a){if(Mr(t)!=="body"||Do(o)){s=Jo(t)}if(Er(t)){l=Pr(t,true);l.x+=t.clientLeft;l.y+=t.clientTop}else if(o){l.x=ko(o)}}return{x:n.left+s.scrollLeft-l.x,y:n.top+s.scrollTop-l.y,width:n.width,height:n.height}}function en(e){var t=new Map;var a=new Set;var i=[];e.forEach((function(e){t.set(e.name,e)}));function r(e){a.add(e.name);var o=[].concat(e.requires||[],e.requiresIfExists||[]);o.forEach((function(e){if(!a.has(e)){var i=t.get(e);if(i){r(i)}}}));i.push(e)}e.forEach((function(e){if(!a.has(e.name)){r(e)}}));return i}function tn(e){var t=en(e);return Cr.reduce((function(e,a){return e.concat(t.filter((function(e){return e.phase===a})))}),[])}function an(e){var t;return function(){if(!t){t=new Promise((function(a){Promise.resolve().then((function(){t=undefined;a(e())}))}))}return t}}function rn(e){var t=e.reduce((function(e,t){var a=e[t.name];e[t.name]=a?Object.assign({},a,t,{options:Object.assign({},a.options,t.options),data:Object.assign({},a.data,t.data)}):t;return e}),{});return Object.keys(t).map((function(e){return t[e]}))}var on={placement:"bottom",modifiers:[],strategy:"absolute"};function nn(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++){t[a]=arguments[a]}return!t.some((function(e){return!(e&&typeof e.getBoundingClientRect==="function")}))}function sn(e){if(e===void 0){e={}}var t=e,a=t.defaultModifiers,i=a===void 0?[]:a,r=t.defaultOptions,o=r===void 0?on:r;return function e(t,a,r){if(r===void 0){r=o}var n={placement:"bottom",orderedModifiers:[],options:Object.assign({},on,o),modifiersData:{},elements:{reference:t,popper:a},attributes:{},styles:{}};var s=[];var l=false;var c={state:n,setOptions:function e(r){var s=typeof r==="function"?r(n.options):r;h();n.options=Object.assign({},o,n.options,s);n.scrollParents={reference:Sr(t)?Mo(t):t.contextElement?Mo(t.contextElement):[],popper:Mo(a)};var l=tn(rn([].concat(i,n.options.modifiers)));n.orderedModifiers=l.filter((function(e){return e.enabled}));d();return c.update()},forceUpdate:function e(){if(l){return}var t=n.elements,a=t.reference,i=t.popper;if(!nn(a,i)){return}n.rects={reference:Zo(a,Wr(i),n.options.strategy==="fixed"),popper:Hr(i)};n.reset=false;n.placement=n.options.placement;n.orderedModifiers.forEach((function(e){return n.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<n.orderedModifiers.length;r++){if(n.reset===true){n.reset=false;r=-1;continue}var o=n.orderedModifiers[r],s=o.fn,d=o.options,h=d===void 0?{}:d,p=o.name;if(typeof s==="function"){n=s({state:n,options:h,name:p,instance:c})||n}}},update:an((function(){return new Promise((function(e){c.forceUpdate();e(n)}))})),destroy:function e(){h();l=true}};if(!nn(t,a)){return c}c.setOptions(r).then((function(e){if(!l&&r.onFirstUpdate){r.onFirstUpdate(e)}}));function d(){n.orderedModifiers.forEach((function(e){var t=e.name,a=e.options,i=a===void 0?{}:a,r=e.effect;if(typeof r==="function"){var o=r({state:n,name:t,instance:c,options:i});var l=function e(){};s.push(o||l)}}))}function h(){s.forEach((function(e){return e()}));s=[]}return c}}var ln=[go,Go,po,zr,jo,No,Wo,oo,Ho];var cn=sn({defaultModifiers:ln});const dn='.air-datepicker-cell.-year-.-other-decade-,.air-datepicker-cell.-day-.-other-month-{color:var(--adp-color-other-month)}.air-datepicker-cell.-year-.-other-decade-:hover,.air-datepicker-cell.-day-.-other-month-:hover{color:var(--adp-color-other-month-hover)}.-disabled-.-focus-.air-datepicker-cell.-year-.-other-decade-,.-disabled-.-focus-.air-datepicker-cell.-day-.-other-month-{color:var(--adp-color-other-month)}.-selected-.air-datepicker-cell.-year-.-other-decade-,.-selected-.air-datepicker-cell.-day-.-other-month-{color:#fff;background:var(--adp-background-color-selected-other-month)}.-selected-.-focus-.air-datepicker-cell.-year-.-other-decade-,.-selected-.-focus-.air-datepicker-cell.-day-.-other-month-{background:var(--adp-background-color-selected-other-month-focused)}.-in-range-.air-datepicker-cell.-year-.-other-decade-,.-in-range-.air-datepicker-cell.-day-.-other-month-{background-color:var(--adp-background-color-in-range);color:var(--adp-color)}.-in-range-.-focus-.air-datepicker-cell.-year-.-other-decade-,.-in-range-.-focus-.air-datepicker-cell.-day-.-other-month-{background-color:var(--adp-background-color-in-range-focused)}.air-datepicker-cell.-year-.-other-decade-:empty,.air-datepicker-cell.-day-.-other-month-:empty{background:none;border:none}.air-datepicker-cell{border-radius:var(--adp-cell-border-radius);box-sizing:border-box;cursor:pointer;display:flex;position:relative;align-items:center;justify-content:center;z-index:1}.air-datepicker-cell.-focus-{background:var(--adp-cell-background-color-hover)}.air-datepicker-cell.-current-{color:var(--adp-color-current-date)}.air-datepicker-cell.-current-.-focus-{color:var(--adp-color)}.air-datepicker-cell.-current-.-in-range-{color:var(--adp-color-current-date)}.air-datepicker-cell.-disabled-{cursor:default;color:var(--adp-color-disabled)}.air-datepicker-cell.-disabled-.-focus-{color:var(--adp-color-disabled)}.air-datepicker-cell.-disabled-.-in-range-{color:var(--adp-color-disabled-in-range)}.air-datepicker-cell.-disabled-.-current-.-focus-{color:var(--adp-color-disabled)}.air-datepicker-cell.-in-range-{background:var(--adp-cell-background-color-in-range);border-radius:0}.air-datepicker-cell.-in-range-:hover,.air-datepicker-cell.-in-range-.-focus-{background:var(--adp-cell-background-color-in-range-hover)}.air-datepicker-cell.-range-from-{border:1px solid var(--adp-cell-border-color-in-range);background-color:var(--adp-cell-background-color-in-range);border-radius:var(--adp-cell-border-radius) 0 0 var(--adp-cell-border-radius)}.air-datepicker-cell.-range-to-{border:1px solid var(--adp-cell-border-color-in-range);background-color:var(--adp-cell-background-color-in-range);border-radius:0 var(--adp-cell-border-radius) var(--adp-cell-border-radius) 0}.air-datepicker-cell.-range-to-.-range-from-{border-radius:var(--adp-cell-border-radius)}.air-datepicker-cell.-selected-{color:#fff;border:none;background:var(--adp-cell-background-color-selected)}.air-datepicker-cell.-selected-.-current-{color:#fff;background:var(--adp-cell-background-color-selected)}.air-datepicker-cell.-selected-.-focus-{background:var(--adp-cell-background-color-selected-hover)}.air-datepicker-body{transition:all var(--adp-transition-duration) var(--adp-transition-ease)}.air-datepicker-body.-hidden-{display:none}.air-datepicker-body--day-names{display:grid;grid-template-columns:repeat(7, var(--adp-day-cell-width));margin:8px 0 3px}.air-datepicker-body--day-name{color:var(--adp-day-name-color);display:flex;align-items:center;justify-content:center;flex:1;text-align:center;text-transform:uppercase;font-size:.8em}.air-datepicker-body--day-name.-clickable-{cursor:pointer}.air-datepicker-body--day-name.-clickable-:hover{color:var(--adp-day-name-color-hover)}.air-datepicker-body--cells{display:grid}.air-datepicker-body--cells.-days-{grid-template-columns:repeat(7, var(--adp-day-cell-width));grid-auto-rows:var(--adp-day-cell-height)}.air-datepicker-body--cells.-months-{grid-template-columns:repeat(3, 1fr);grid-auto-rows:var(--adp-month-cell-height)}.air-datepicker-body--cells.-years-{grid-template-columns:repeat(4, 1fr);grid-auto-rows:var(--adp-year-cell-height)}.air-datepicker-nav{display:flex;justify-content:space-between;border-bottom:1px solid var(--adp-border-color-inner);min-height:var(--adp-nav-height);padding:var(--adp-padding);box-sizing:content-box}.-only-timepicker- .air-datepicker-nav{display:none}.air-datepicker-nav--title,.air-datepicker-nav--action{display:flex;cursor:pointer;align-items:center;justify-content:center}.air-datepicker-nav--action{width:var(--adp-nav-action-size);border-radius:var(--adp-border-radius);-webkit-user-select:none;-moz-user-select:none;user-select:none}.air-datepicker-nav--action:hover{background:var(--adp-background-color-hover)}.air-datepicker-nav--action:active{background:var(--adp-background-color-active)}.air-datepicker-nav--action.-disabled-{visibility:hidden}.air-datepicker-nav--action svg{width:32px;height:32px}.air-datepicker-nav--action path{fill:none;stroke:var(--adp-nav-arrow-color);stroke-width:2px}.air-datepicker-nav--title{border-radius:var(--adp-border-radius);padding:0 8px}.air-datepicker-nav--title i{font-style:normal;color:var(--adp-nav-color-secondary);margin-left:.3em}.air-datepicker-nav--title:hover{background:var(--adp-background-color-hover)}.air-datepicker-nav--title:active{background:var(--adp-background-color-active)}.air-datepicker-nav--title.-disabled-{cursor:default;background:none}.air-datepicker-buttons{display:grid;grid-auto-columns:1fr;grid-auto-flow:column}.air-datepicker-button{display:inline-flex;color:var(--adp-btn-color);border-radius:var(--adp-btn-border-radius);cursor:pointer;height:var(--adp-btn-height);border:none;background:rgba(255,255,255,0)}.air-datepicker-button:hover{color:var(--adp-btn-color-hover);background:var(--adp-btn-background-color-hover)}.air-datepicker-button:focus{color:var(--adp-btn-color-hover);background:var(--adp-btn-background-color-hover);outline:none}.air-datepicker-button:active{background:var(--adp-btn-background-color-active)}.air-datepicker-button span{outline:none;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.air-datepicker-time{display:grid;grid-template-columns:max-content 1fr;grid-column-gap:12px;align-items:center;position:relative;padding:0 var(--adp-time-padding-inner)}.-only-timepicker- .air-datepicker-time{border-top:none}.air-datepicker-time--current{display:flex;align-items:center;flex:1;font-size:14px;text-align:center}.air-datepicker-time--current-colon{margin:0 2px 3px;line-height:1}.air-datepicker-time--current-hours,.air-datepicker-time--current-minutes{line-height:1;font-size:19px;font-family:"Century Gothic",CenturyGothic,AppleGothic,sans-serif;position:relative;z-index:1}.air-datepicker-time--current-hours:after,.air-datepicker-time--current-minutes:after{content:"";background:var(--adp-background-color-hover);border-radius:var(--adp-border-radius);position:absolute;left:-2px;top:-3px;right:-2px;bottom:-2px;z-index:-1;opacity:0}.air-datepicker-time--current-hours.-focus-:after,.air-datepicker-time--current-minutes.-focus-:after{opacity:1}.air-datepicker-time--current-ampm{text-transform:uppercase;align-self:flex-end;color:var(--adp-time-day-period-color);margin-left:6px;font-size:11px;margin-bottom:1px}.air-datepicker-time--row{display:flex;align-items:center;font-size:11px;height:17px;background:linear-gradient(to right, var(--adp-time-track-color), var(--adp-time-track-color)) left 50%/100% var(--adp-time-track-height) no-repeat}.air-datepicker-time--row:first-child{margin-bottom:4px}.air-datepicker-time--row input[type=range]{background:none;cursor:pointer;flex:1;height:100%;width:100%;padding:0;margin:0;-webkit-appearance:none}.air-datepicker-time--row input[type=range]::-webkit-slider-thumb{-webkit-appearance:none}.air-datepicker-time--row input[type=range]::-ms-tooltip{display:none}.air-datepicker-time--row input[type=range]:hover::-webkit-slider-thumb{border-color:var(--adp-time-track-color-hover)}.air-datepicker-time--row input[type=range]:hover::-moz-range-thumb{border-color:var(--adp-time-track-color-hover)}.air-datepicker-time--row input[type=range]:hover::-ms-thumb{border-color:var(--adp-time-track-color-hover)}.air-datepicker-time--row input[type=range]:focus{outline:none}.air-datepicker-time--row input[type=range]:focus::-webkit-slider-thumb{background:var(--adp-cell-background-color-selected);border-color:var(--adp-cell-background-color-selected)}.air-datepicker-time--row input[type=range]:focus::-moz-range-thumb{background:var(--adp-cell-background-color-selected);border-color:var(--adp-cell-background-color-selected)}.air-datepicker-time--row input[type=range]:focus::-ms-thumb{background:var(--adp-cell-background-color-selected);border-color:var(--adp-cell-background-color-selected)}.air-datepicker-time--row input[type=range]::-webkit-slider-thumb{box-sizing:border-box;height:12px;width:12px;border-radius:3px;border:1px solid var(--adp-time-track-color);background:#fff;cursor:pointer;-webkit-transition:background var(--adp-transition-duration);transition:background var(--adp-transition-duration)}.air-datepicker-time--row input[type=range]::-moz-range-thumb{box-sizing:border-box;height:12px;width:12px;border-radius:3px;border:1px solid var(--adp-time-track-color);background:#fff;cursor:pointer;-moz-transition:background var(--adp-transition-duration);transition:background var(--adp-transition-duration)}.air-datepicker-time--row input[type=range]::-ms-thumb{box-sizing:border-box;height:12px;width:12px;border-radius:3px;border:1px solid var(--adp-time-track-color);background:#fff;cursor:pointer;-ms-transition:background var(--adp-transition-duration);transition:background var(--adp-transition-duration)}.air-datepicker-time--row input[type=range]::-webkit-slider-thumb{margin-top:calc(var(--adp-time-thumb-size)/2*-1)}.air-datepicker-time--row input[type=range]::-webkit-slider-runnable-track{border:none;height:var(--adp-time-track-height);cursor:pointer;color:rgba(0,0,0,0);background:rgba(0,0,0,0)}.air-datepicker-time--row input[type=range]::-moz-range-track{border:none;height:var(--adp-time-track-height);cursor:pointer;color:rgba(0,0,0,0);background:rgba(0,0,0,0)}.air-datepicker-time--row input[type=range]::-ms-track{border:none;height:var(--adp-time-track-height);cursor:pointer;color:rgba(0,0,0,0);background:rgba(0,0,0,0)}.air-datepicker-time--row input[type=range]::-ms-fill-lower{background:rgba(0,0,0,0)}.air-datepicker-time--row input[type=range]::-ms-fill-upper{background:rgba(0,0,0,0)}.air-datepicker{--adp-font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";--adp-font-size:14px;--adp-width:246px;--adp-z-index:100;--adp-padding:4px;--adp-grid-areas:"nav" "body" "timepicker" "buttons";--adp-transition-duration:.3s;--adp-transition-ease:ease-out;--adp-transition-offset:8px;--adp-background-color:#fff;--adp-background-color-hover:#f0f0f0;--adp-background-color-active:#eaeaea;--adp-background-color-in-range:rgba(92, 196, 239, .1);--adp-background-color-in-range-focused:rgba(92, 196, 239, .2);--adp-background-color-selected-other-month-focused:#8ad5f4;--adp-background-color-selected-other-month:#a2ddf6;--adp-color:#4a4a4a;--adp-color-secondary:#9c9c9c;--adp-accent-color:#4eb5e6;--adp-color-current-date:var(--adp-accent-color);--adp-color-other-month:#dedede;--adp-color-disabled:#aeaeae;--adp-color-disabled-in-range:#939393;--adp-color-other-month-hover:#c5c5c5;--adp-border-color:#dbdbdb;--adp-border-color-inner:#efefef;--adp-border-radius:4px;--adp-border-color-inline:#d7d7d7;--adp-nav-height:32px;--adp-nav-arrow-color:var(--adp-color-secondary);--adp-nav-action-size:32px;--adp-nav-color-secondary:var(--adp-color-secondary);--adp-day-name-color:#ff9a19;--adp-day-name-color-hover:#8ad5f4;--adp-day-cell-width:1fr;--adp-day-cell-height:32px;--adp-month-cell-height:42px;--adp-year-cell-height:56px;--adp-pointer-size:10px;--adp-poiner-border-radius:2px;--adp-pointer-offset:14px;--adp-cell-border-radius:4px;--adp-cell-background-color-hover:var(--adp-background-color-hover);--adp-cell-background-color-selected:#5cc4ef;--adp-cell-background-color-selected-hover:#45bced;--adp-cell-background-color-in-range:rgba(92, 196, 239, 0.1);--adp-cell-background-color-in-range-hover:rgba(92, 196, 239, 0.2);--adp-cell-border-color-in-range:var(--adp-cell-background-color-selected);--adp-btn-height:32px;--adp-btn-color:var(--adp-accent-color);--adp-btn-color-hover:var(--adp-color);--adp-btn-border-radius:var(--adp-border-radius);--adp-btn-background-color-hover:var(--adp-background-color-hover);--adp-btn-background-color-active:var(--adp-background-color-active);--adp-time-track-height:1px;--adp-time-track-color:#dedede;--adp-time-track-color-hover:#b1b1b1;--adp-time-thumb-size:12px;--adp-time-padding-inner:10px;--adp-time-day-period-color:var(--adp-color-secondary);--adp-mobile-font-size:16px;--adp-mobile-nav-height:40px;--adp-mobile-width:320px;--adp-mobile-day-cell-height:38px;--adp-mobile-month-cell-height:48px;--adp-mobile-year-cell-height:64px}.air-datepicker-overlay{--adp-overlay-background-color:rgba(0, 0, 0, .3);--adp-overlay-transition-duration:.3s;--adp-overlay-transition-ease:ease-out;--adp-overlay-z-index:99}.air-datepicker{background:var(--adp-background-color);border:1px solid var(--adp-border-color);box-shadow:0 4px 12px rgba(0,0,0,.15);border-radius:var(--adp-border-radius);box-sizing:content-box;display:grid;grid-template-columns:1fr;grid-template-rows:repeat(4, max-content);grid-template-areas:var(--adp-grid-areas);font-family:var(--adp-font-family),sans-serif;font-size:var(--adp-font-size);color:var(--adp-color);width:var(--adp-width);position:absolute;transition:opacity var(--adp-transition-duration) var(--adp-transition-ease),transform var(--adp-transition-duration) var(--adp-transition-ease);z-index:var(--adp-z-index)}.air-datepicker:not(.-custom-position-){opacity:0}.air-datepicker.-from-top-{transform:translateY(calc(var(--adp-transition-offset) * -1))}.air-datepicker.-from-right-{transform:translateX(var(--adp-transition-offset))}.air-datepicker.-from-bottom-{transform:translateY(var(--adp-transition-offset))}.air-datepicker.-from-left-{transform:translateX(calc(var(--adp-transition-offset) * -1))}.air-datepicker.-active-:not(.-custom-position-){transform:translate(0, 0);opacity:1}.air-datepicker.-active-.-custom-position-{transition:none}.air-datepicker.-inline-{border-color:var(--adp-border-color-inline);box-shadow:none;position:static;left:auto;right:auto;opacity:1;transform:none}.air-datepicker.-inline- .air-datepicker--pointer{display:none}.air-datepicker.-is-mobile-{--adp-font-size:var(--adp-mobile-font-size);--adp-day-cell-height:var(--adp-mobile-day-cell-height);--adp-month-cell-height:var(--adp-mobile-month-cell-height);--adp-year-cell-height:var(--adp-mobile-year-cell-height);--adp-nav-height:var(--adp-mobile-nav-height);--adp-nav-action-size:var(--adp-mobile-nav-height);position:fixed;width:var(--adp-mobile-width);border:none}.air-datepicker.-is-mobile- *{-webkit-tap-highlight-color:rgba(0,0,0,0)}.air-datepicker.-is-mobile- .air-datepicker--pointer{display:none}.air-datepicker.-is-mobile-:not(.-custom-position-){transform:translate(-50%, calc(-50% + var(--adp-transition-offset)))}.air-datepicker.-is-mobile-.-active-:not(.-custom-position-){transform:translate(-50%, -50%)}.air-datepicker.-custom-position-{transition:none}.air-datepicker-global-container{position:absolute;left:0;top:0}.air-datepicker--pointer{--pointer-half-size:calc(var(--adp-pointer-size) / 2);position:absolute;width:var(--adp-pointer-size);height:var(--adp-pointer-size);z-index:-1}.air-datepicker--pointer:after{content:"";position:absolute;background:#fff;border-top:1px solid var(--adp-border-color-inline);border-right:1px solid var(--adp-border-color-inline);border-top-right-radius:var(--adp-poiner-border-radius);width:var(--adp-pointer-size);height:var(--adp-pointer-size);box-sizing:border-box}.-top-left- .air-datepicker--pointer,.-top-center- .air-datepicker--pointer,.-top-right- .air-datepicker--pointer,[data-popper-placement^=top] .air-datepicker--pointer{top:calc(100% - var(--pointer-half-size) + 1px)}.-top-left- .air-datepicker--pointer:after,.-top-center- .air-datepicker--pointer:after,.-top-right- .air-datepicker--pointer:after,[data-popper-placement^=top] .air-datepicker--pointer:after{transform:rotate(135deg)}.-right-top- .air-datepicker--pointer,.-right-center- .air-datepicker--pointer,.-right-bottom- .air-datepicker--pointer,[data-popper-placement^=right] .air-datepicker--pointer{right:calc(100% - var(--pointer-half-size) + 1px)}.-right-top- .air-datepicker--pointer:after,.-right-center- .air-datepicker--pointer:after,.-right-bottom- .air-datepicker--pointer:after,[data-popper-placement^=right] .air-datepicker--pointer:after{transform:rotate(225deg)}.-bottom-left- .air-datepicker--pointer,.-bottom-center- .air-datepicker--pointer,.-bottom-right- .air-datepicker--pointer,[data-popper-placement^=bottom] .air-datepicker--pointer{bottom:calc(100% - var(--pointer-half-size) + 1px)}.-bottom-left- .air-datepicker--pointer:after,.-bottom-center- .air-datepicker--pointer:after,.-bottom-right- .air-datepicker--pointer:after,[data-popper-placement^=bottom] .air-datepicker--pointer:after{transform:rotate(315deg)}.-left-top- .air-datepicker--pointer,.-left-center- .air-datepicker--pointer,.-left-bottom- .air-datepicker--pointer,[data-popper-placement^=left] .air-datepicker--pointer{left:calc(100% - var(--pointer-half-size) + 1px)}.-left-top- .air-datepicker--pointer:after,.-left-center- .air-datepicker--pointer:after,.-left-bottom- .air-datepicker--pointer:after,[data-popper-placement^=left] .air-datepicker--pointer:after{transform:rotate(45deg)}.-top-left- .air-datepicker--pointer,.-bottom-left- .air-datepicker--pointer{left:var(--adp-pointer-offset)}.-top-right- .air-datepicker--pointer,.-bottom-right- .air-datepicker--pointer{right:var(--adp-pointer-offset)}.-top-center- .air-datepicker--pointer,.-bottom-center- .air-datepicker--pointer{left:calc(50% - var(--adp-pointer-size)/2)}.-left-top- .air-datepicker--pointer,.-right-top- .air-datepicker--pointer{top:var(--adp-pointer-offset)}.-left-bottom- .air-datepicker--pointer,.-right-bottom- .air-datepicker--pointer{bottom:var(--adp-pointer-offset)}.-left-center- .air-datepicker--pointer,.-right-center- .air-datepicker--pointer{top:calc(50% - var(--adp-pointer-size)/2)}.air-datepicker--navigation{grid-area:nav}.air-datepicker--content{box-sizing:content-box;padding:var(--adp-padding);grid-area:body}.-only-timepicker- .air-datepicker--content{display:none}.air-datepicker--time{grid-area:timepicker}.air-datepicker--buttons{grid-area:buttons}.air-datepicker--buttons,.air-datepicker--time{padding:var(--adp-padding);border-top:1px solid var(--adp-border-color-inner)}.air-datepicker-overlay{position:fixed;background:var(--adp-overlay-background-color);left:0;top:0;width:0;height:0;opacity:0;transition:opacity var(--adp-overlay-transition-duration) var(--adp-overlay-transition-ease),left 0s,height 0s,width 0s;transition-delay:0s,var(--adp-overlay-transition-duration),var(--adp-overlay-transition-duration),var(--adp-overlay-transition-duration);z-index:var(--adp-overlay-z-index)}.air-datepicker-overlay.-active-{opacity:1;width:100%;height:100%;transition:opacity var(--adp-overlay-transition-duration) var(--adp-overlay-transition-ease),height 0s,width 0s}:host{display:block}.air-datepicker{font-size:auto}.air-datepicker-body--day-name{color:#000;font-weight:700}.air-datepicker-cell.-selected-,.air-datepicker-cell.-selected-.-focus-,.air-datepicker-cell.-selected-.-current-{background:#1e9ff2}.air-datepicker-cell.-disabled-{text-decoration:line-through}.air-datepicker-cell.-current-{color:#1e9ff2}.ir-date-picker-trigger{position:relative;box-sizing:border-box;width:fit-content;height:fit-content}.ir-date-picker-element{position:absolute;inset:0;opacity:0;cursor:pointer}';const hn=dn;const pn=class{constructor(a){e(this,a);this.dateChanged=t(this,"dateChanged",7);this.datePickerFocus=t(this,"datePickerFocus",7);this.datePickerBlur=t(this,"datePickerBlur",7)}get el(){return r(this)}inline=false;date=null;multipleDates=false;range=false;dateFormat="yyyy-MM-dd";timepicker=false;minDate;maxDate;disabled=false;autoClose=true;showOtherMonths=true;selectOtherMonths=true;customPicker=true;container;forceDestroyOnUpdate=false;emitEmptyDate=false;triggerContainerStyle="";currentDate=null;dateChanged;datePickerFocus;datePickerBlur;pickerRef;datePicker;openDatePickerTimeout;triggerSlot=null;componentWillLoad(){if(this.date){this.currentDate=this.toValidDate(this.date)}}componentDidLoad(){this.initializeDatepicker();this.setupTriggerFocusHandling()}setupTriggerFocusHandling(){if(!this.customPicker)return;const e=this.el.querySelector('[slot="trigger"]');if(!e)return;this.triggerSlot=e;this.triggerSlot.addEventListener("focus",this.handleTriggerFocus.bind(this));this.triggerSlot.addEventListener("click",this.handleTriggerClick.bind(this))}handleTriggerFocus(){if(this.disabled)return;this.openDatePicker()}handleTriggerClick(e){if(this.disabled)return;e.preventDefault();this.openDatePicker()}datePropChanged(e,t){if(this.isSameDates(e,t)){return}this.updatePickerDate(e)}minDatePropChanged(e,t){if(!this.datePicker){return}if(!this.isSameDates(e,t)){this.datePicker?.update({minDate:this.toValidDate(e)})}}maxDatePropChanged(e,t){if(!this.isSameDates(e,t)){this.datePicker?.update({maxDate:this.toValidDate(e)})}}async openDatePicker(){this.openDatePickerTimeout=setTimeout((()=>{this.pickerRef.focus()}),20)}async clearDatePicker(){this.datePicker?.clear()}isSameDates(e,t){if(!e&&!t)return true;if(!e||!t)return false;return me(e).isSame(me(t),"day")}toValidDate(e){if(!e)return null;const t=new Date(e);return isNaN(t.getTime())?null:t}updatePickerDate(e){const t=this.toValidDate(e);if(!t){this.datePicker?.clear();this.currentDate=null;return}if(!this.isSameDates(this.currentDate,t)){this.currentDate=t;if(this.forceDestroyOnUpdate){this.datePicker.destroy();this.datePicker=null;this.initializeDatepicker()}else{this.datePicker?.selectDate(t)}}}initializeDatepicker(){if(this.datePicker)return;this.datePicker=new va(this.pickerRef,{container:this.container,inline:this.inline,selectedDates:this.date?[this.date]:[],multipleDates:this.multipleDates,range:this.range,dateFormat:this.dateFormat,timepicker:this.timepicker,minDate:this.minDate,maxDate:this.maxDate,autoClose:this.autoClose,locale:ka,showOtherMonths:this.showOtherMonths,selectOtherMonths:this.selectOtherMonths,onHide:()=>{this.datePickerBlur.emit()},onShow:()=>{this.datePickerFocus.emit()},onSelect:({date:e})=>{if(!e||!(e instanceof Date)){if(this.emitEmptyDate){this.dateChanged.emit({start:null,end:null})}return}this.currentDate=e;this.date=e;this.dateChanged.emit({start:me(e),end:me(e)})},position({$datepicker:e,$target:t,$pointer:a,done:i}){let r=cn(t,e,{placement:"top",modifiers:[{name:"flip",options:{padding:{top:0}}},{name:"offset",options:{offset:[0,10]}},{name:"arrow",options:{element:a}}]});return function e(){r.destroy();i()}}});this.datePicker.$datepicker.style.height="280px";this.datePicker.$datepicker?.classList.add("ir-custom-date-picker__calendar");this.datePicker.$datepicker.style.setProperty("--adp-cell-background-color-selected","var(--wa-color-brand-50)");this.datePicker.$datepicker.style.setProperty("--adp-cell-background-color-selected-hover","var(--wa-color-brand-50)");this.datePicker.$datepicker.style.setProperty("--adp-accent-color","var(--wa-color-brand-50)");this.datePicker.$datepicker.style.setProperty("--adp-day-name-color","lab(48.496% 0 0)")}disconnectedCallback(){if(this.openDatePickerTimeout){clearTimeout(this.openDatePickerTimeout)}if(this.triggerSlot){this.triggerSlot.removeEventListener("focus",this.handleTriggerFocus);this.triggerSlot.removeEventListener("click",this.handleTriggerClick)}this.datePicker?.destroy?.()}render(){return a("div",{key:"ddf399c87b28461a665da79677c5c7dff2867cae",class:`ir-date-picker-trigger ${this.triggerContainerStyle}`},this.customPicker&&a("slot",{key:"f1c89cb124614df9e059709598336fb410e5a30d",name:"trigger"}),a("input",{key:"c7f1af8a7f0569233a10719adfc3edbfd79b4931",type:"text",disabled:this.disabled,class:this.customPicker?"ir-date-picker-element":"form-control input-sm",ref:e=>this.pickerRef=e}))}static get watchers(){return{date:["datePropChanged"],minDate:["minDatePropChanged"],maxDate:["maxDatePropChanged"]}}};pn.style=hn;class un{hostElement;slotNames;onStateChange;slotState=new Map;slotObserver=null;isInitialized=false;constructor(e,t,a){this.hostElement=e;this.slotNames=t;this.onStateChange=a}initialize(){this.updateSlotState();this.isInitialized=true}setupListeners(){if(!this.isInitialized){console.warn("SlotManager: initialize() must be called before setupListeners()");return}this.hostElement.addEventListener("slotchange",this.handleSlotChange);this.slotObserver=new MutationObserver(this.handleSlotChange);this.slotObserver.observe(this.hostElement,{childList:true,subtree:true,attributes:true,attributeFilter:["slot"]})}destroy(){this.hostElement.removeEventListener("slotchange",this.handleSlotChange);this.slotObserver?.disconnect();this.slotObserver=null;this.slotState.clear();this.isInitialized=false}hasSlot(e){return this.slotState.get(e)??false}getSlotState(){return this.slotState}getActiveSlots(){return Array.from(this.slotState.entries()).filter((([e,t])=>t)).map((([e])=>e))}refresh(){this.updateSlotState()}handleSlotChange=()=>{this.updateSlotState();this.onStateChange?.()};updateSlotState(){const e=new Map;this.slotNames.forEach((t=>{e.set(t,this.checkSlotHasContent(t))}));this.slotState=e}checkSlotHasContent(e){return Array.from(this.hostElement.children).some((t=>t.getAttribute("slot")===e))}}function fn(e,t,a){const i=new un(e,t,a);return{manager:i,initialize:()=>i.initialize(),setupListeners:()=>i.setupListeners(),destroy:()=>i.destroy(),hasSlot:e=>i.hasSlot(e),getSlotState:()=>i.getSlotState(),getActiveSlots:()=>i.getActiveSlots(),refresh:()=>i.refresh()}}const gn=":host{display:flex;--arrow-size:0.375rem;--max-width:25rem;--show-duration:100ms;--hide-duration:100ms;--arrow-diagonal-size:calc((var(--arrow-size) * sin(45deg)));font-size:var(--wa-font-size-m);line-height:var(--wa-line-height-normal);text-align:start;white-space:normal}.ir-date-select__control{width:100%;display:flex}.ir-date-select__calendar{display:flex;flex-direction:column;width:max-content;max-width:var(--max-width);padding:var(--wa-space-m);background-color:var(--wa-color-surface-default);border:var(--wa-panel-border-width) solid var(--wa-color-surface-border);border-radius:var(--wa-panel-border-radius);border-style:var(--wa-panel-border-style);box-shadow:var(--wa-shadow-l);color:var(--wa-color-text-normal);user-select:none;-webkit-user-select:none}.ir-date-select__popup{--arrow-size:inherit;--show-duration:inherit;--hide-duration:inherit;pointer-events:auto}.ir-date-select__popup::part(arrow){background-color:var(--wa-color-surface-default);border-top:none;border-left:none;border-bottom:solid var(--wa-panel-border-width) var(--wa-color-surface-border);border-right:solid var(--wa-panel-border-width) var(--wa-color-surface-border);box-shadow:none}.ir-date-select__control[aria-disabled='true']{opacity:0.5;cursor:not-allowed !important;pointer-events:none}.ir-date-select__trigger,.ir-date-select__input{width:100%}";const bn=gn;var wn=undefined&&undefined.__decorate||function(e,t,a,i){var r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,a):i,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,a,i);else for(var s=e.length-1;s>=0;s--)if(n=e[s])o=(r<3?n(o):r>3?n(t,a,o):n(t,a))||o;return r>3&&o&&Object.defineProperty(t,a,o),o};const mn=class{constructor(a){e(this,a);this.datePickerFocus=t(this,"datePickerFocus",7);this.datePickerBlur=t(this,"datePickerBlur",7);this.dateChanged=t(this,"dateChanged",7)}get el(){return r(this)}withClear;placeholder;label;dates;inline=false;date=null;multipleDates=false;range=false;dateFormat="yyyy-MM-dd";timepicker=false;minDate;maxDate;disabled=false;autoClose=true;showOtherMonths=true;selectOtherMonths=true;customPicker=false;container;forceDestroyOnUpdate=false;emitEmptyDate=false;triggerContainerStyle="";isActive=false;currentDate;slotManagerHasSlot=0;isValid;datePickerFocus;datePickerBlur;dateChanged;static instanceCounter=0;popupId;SLOT_NAMES=["label","start","end","clear-icon","hide-password-icon","show-password-icon","hint"];slotManager=fn(null,this.SLOT_NAMES,(()=>{this.slotManagerHasSlot++}));airDatePickerRef;componentWillLoad(){mn.instanceCounter+=1;this.popupId=`ir-date-select-popup-${mn.instanceCounter}`;this.slotManager=fn(this.el,this.SLOT_NAMES,(()=>{this.slotManagerHasSlot++}));this.slotManager.initialize();if(this.el.hasAttribute("aria-invalid")){this.isValid=this.el.getAttribute("aria-invalid")}}componentDidLoad(){this.slotManager.setupListeners()}disconnectedCallback(){this.slotManager.destroy()}handleAriaInvalidChange(e,t){if(e!==t)this.isValid=e}async clearDatePicker(){this.airDatePickerRef?.clearDatePicker()}async openDatePicker(){this.isActive=true}async closeDatePicker(){this.isActive=false}togglePicker(){this.isActive?this.closeDatePicker():this.openDatePicker()}handleKeyDown(e){switch(e.key){case"Enter":case" ":e.preventDefault();this.togglePicker();break;case"Escape":if(this.isActive){e.preventDefault();this.closeDatePicker()}break}}get _label(){if(this.range){return this.dates.map((e=>me(e).format("MMM DD, YYYY"))).join(" â†’ ")}if(!this.currentDate){return null}return this.timepicker?me(this.currentDate).format("MMM DD, YYYY, HH:mm"):me(this.currentDate).format("MMM DD, YYYY")}render(){return a(i,{key:"7a7596d2ae79eaa4b2c174c2194e4e1a2b4ada3b",class:{"ir-date-select":true,"ir-date-select--active":this.isActive,"ir-date-select--inline":this.inline,"ir-date-select--disabled":this.disabled}},a("wa-popup",{key:"f0e609d3f5e84daafb09dbfeef2f5626c83397cf",arrow:true,part:"base",placement:"bottom",flip:true,shift:true,"auto-size":"vertical","auto-size-padding":10,active:this.isActive,class:"ir-date-select__popup"},a("div",{key:"56d2abbc6f73833654f3112b4bd0f73bfef86a33",slot:"anchor",part:"anchor",class:"ir-date-select__trigger"},a("div",{key:"7a3acd3317e5617f71f9cc38da4a422f88fdfdb4",part:"combobox",class:"ir-date-select__control",role:"combobox",tabindex:this.disabled?-1:0,"aria-haspopup":"dialog","aria-expanded":this.isActive?"true":"false","aria-controls":this.popupId,"aria-disabled":this.disabled?"true":"false","aria-label":"Select date",onClick:!this.disabled?this.togglePicker.bind(this):undefined,onKeyDown:!this.disabled?this.handleKeyDown.bind(this):undefined},a("slot",{key:"75891f9fd9b48bc08a0d5106ee0368562f98f1dc",name:"trigger"},a("ir-input",{key:"dcfee4ee74f07346be659e61fdf8e94a84dd99e1",disabled:this.disabled,class:"ir-date-select__input",placeholder:this.placeholder,withClear:this.withClear,tabIndex:!this.customPicker&&!this.disabled?0:undefined,"aria-expanded":!this.customPicker?String(this.isActive):undefined,"aria-disabled":this.disabled?"true":undefined,"aria-invalid":this.isValid,readonly:true,defaultValue:this._label,label:this.label,value:this._label},this.slotManager.hasSlot("label")&&a("slot",{key:"245d43b92e0e00c82f8fb8fcbea2155409a158aa",name:"label",slot:"label"}),this.slotManager.hasSlot("start")&&a("slot",{key:"275713c1394fbac4fa2d2689983e268c7c59feb4",name:"start",slot:"start"}),this.slotManager.hasSlot("end")&&a("slot",{key:"52f106aeb4e43d2f402f36c8e459844567e8bfd8",name:"end",slot:"end"}),this.slotManager.hasSlot("clear-icon")&&a("slot",{key:"fac5279e629afd2ddbd1b2d46f4d84ca752f7ce8",name:"clear-icon",slot:"clear-icon"}),this.slotManager.hasSlot("hint")&&a("slot",{key:"b8115a7491c93fcad1cbbf551f164b0fc06bf2ef",name:"hint",slot:"hint"}))))),a("div",{key:"12dc8f268fb44b42d1a84e0836f255e2e6ce582a",part:"body",id:this.popupId,class:"ir-date-select__calendar",role:"dialog","aria-modal":"false","aria-label":"Date selection dialog"},a("ir-air-date-picker",{key:"de4f89e10cf5a067097c86db014c18b4494664e1",ref:e=>this.airDatePickerRef=e,withClear:this.withClear,placeholder:this.placeholder,label:this.label,dates:this.dates,inline:this.inline,date:this.date,multipleDates:this.multipleDates,range:this.range,dateFormat:this.dateFormat,timepicker:this.timepicker,minDate:this.minDate,maxDate:this.maxDate,disabled:this.disabled,autoClose:this.autoClose,showOtherMonths:this.showOtherMonths,selectOtherMonths:this.selectOtherMonths,customPicker:this.customPicker,container:this.container,forceDestroyOnUpdate:this.forceDestroyOnUpdate,emitEmptyDate:this.emitEmptyDate,onDateChanged:e=>{e.stopImmediatePropagation();e.stopPropagation();this.currentDate=e.detail?.start;this.dateChanged.emit(e.detail);const t=this.autoClose&&(!this.range||this.range&&e.detail.dates.length>1);if(t){this.togglePicker()}}}),a("slot",{key:"bdd3114f20eeb4120a9d1c39931bafcd19188141"}))))}static get watchers(){return{"aria-invalid":["handleAriaInvalidChange"]}}};wn([Gi()],mn.prototype,"closeDatePicker",null);mn.style=bn;const vn=".sc-ir-date-view-h{display:block;font-size:13.65px !important;width:100%}.mx-01.sc-ir-date-view{--m:5px;margin-right:var(--m) !important;margin-left:var(--m) !important}";const yn=vn;const kn=class{constructor(t){e(this,t)}from_date;to_date;showDateDifference=true;dateOption="YYYY-MM-DD";dates;componentWillLoad(){this.initializeDates()}handleFromDateChange(e,t){if(e!==t){this.initializeDates()}}handleToDateChange(e,t){if(e!==t){this.initializeDates()}}initializeDates(){this.convertDate("from_date",this.from_date);this.convertDate("to_date",this.to_date);const e=me(this.dates.from_date,"MMM DD, YYYY").format("YYYY-MM-DD");const t=me(this.dates.to_date,"MMM DD, YYYY").format("YYYY-MM-DD");this.dates.date_difference=ne(e,t)}convertDate(e,t){this.dates=this.dates||{from_date:"",to_date:"",date_difference:0};if(!t){return}if(typeof t==="string"){this.dates[e]=me(t,this.dateOption).format("MMM DD, YYYY")}else if(t instanceof Date){this.dates[e]=me(t).format("MMM DD, YYYY")}else if(me.isMoment(t)){this.dates[e]=t.format("MMM DD, YYYY")}else{console.error("Unsupported date type")}}render(){return a(i,{key:"6208d5d160c17a0430b1c76c57b0c71446689544",class:"d-flex align-items-center"},a("span",{key:"2a79b8c6e62cbcc20885b9a46f8703e8b237118b"},this.dates.from_date)," ",a("svg",{key:"2addb34db981b8c4d97a2385107d90216018d2ef",xmlns:"http://www.w3.org/2000/svg",class:"mx-01",height:"14",width:"14",viewBox:"0 0 512 512"},a("path",{key:"c62b93dcf67d42f7fc795ae9b8ba2d5735ff1356",fill:"currentColor",d:"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z"})),a("span",{key:"0ff50a0ef9ad0e0804e5ad083af903550a15d4d6"},this.dates.to_date," ",this.showDateDifference&&a("span",{key:"60783353d8c4de0dad83a10db64e14988b3a0016",class:"mx-01"},this.dates.date_difference,"   ",this.dates.date_difference>1?` ${M.entries.Lcz_Nights}`:` ${M.entries.Lcz_Night}`)))}static get watchers(){return{from_date:["handleFromDateChange"],to_date:["handleToDateChange"]}}};kn.style=yn;function _n(e="data-ir-overflow"){return(t,a,i)=>{const r=i?.value;i.value=function(...t){const a=zn(this);if(a){In(a,e)}return r?.apply(this,t)};return i}}function xn(e="data-ir-overflow"){return(t,a,i)=>{const r=i?.value;i.value=function(...t){const a=zn(this);if(a){Tn(a,e)}return r?.apply(this,t)};return i}}const Dn=new Map;const Cn="data-overflow-locks";const Mn="overflow-style-";function Yn(e){if(!An())return;const t=Mn+e;if(document.getElementById(t))return;const a=document.documentElement.scrollHeight>window.innerHeight;const i=a?window.innerWidth-document.documentElement.clientWidth:0;const r=`\n    /* Auto-inserted overflow lock for "${e}" */\n    body[${Cn}~="${e}"] {\n      overflow: hidden !important;\n      /* margin-inline-end respects LTR/RTL direction */\n      margin-inline-end: ${i}px !important;\n    }\n  `.trim();const o=document.createElement("style");o.id=t;o.textContent=r;document.head.appendChild(o)}function Sn(e){if(!An())return;Yn(e);const t=document.body;const a=(t.getAttribute(Cn)||"").trim();const i=new Set(a?a.split(/\s+/):[]);if(!i.has(e)){i.add(e);t.setAttribute(Cn,Array.from(i).join(" "))}}function En(e){if(!An())return;const t=document.body;const a=(t.getAttribute(Cn)||"").trim();if(!a)return;const i=new Set(a.split(/\s+/));if(i.delete(e)){const e=Array.from(i).join(" ");if(e)t.setAttribute(Cn,e);else t.removeAttribute(Cn)}}function In(e,t){if(!e||!An())return;e.__overflowTags__||=new Map;const a=e.__overflowTags__;const i=a.get(t)??0;a.set(t,i+1);let r=Dn.get(t);if(!r){r={hosts:new Set,count:0};Dn.set(t,r)}if(i===0){r.hosts.add(e)}r.count+=1;if(r.count===1){Sn(t)}On(e)}function Tn(e,t){if(!e||!An())return;const a=e.__overflowTags__;if(!a)return;const i=a.get(t);if(!i)return;if(i>1){a.set(t,i-1)}else{a.delete(t);if(a.size===0){delete e.__overflowTags__}}const r=Dn.get(t);if(!r)return;r.count=Math.max(0,r.count-1);if(i===1){r.hosts.delete(e)}if(r.count===0){Dn.delete(t);En(t)}}function On(e){if(!e||!An()||typeof MutationObserver==="undefined")return;if(e.__overflowObserver__)return;const t=new MutationObserver((()=>{if(!e.isConnected){const a=e.__overflowTags__?Array.from(e.__overflowTags__.entries()):[];a.forEach((([t,a])=>{for(let i=0;i<a;i+=1){Tn(e,t)}}));t.disconnect();delete e.__overflowObserver__}}));t.observe(document.documentElement,{childList:true,subtree:true});e.__overflowObserver__=t}function zn(e){if(!An())return null;try{return r(e)}catch{return null}}function An(){return typeof window!=="undefined"&&typeof document!=="undefined"}const Bn=".ir-dialog__footer{display:flex;align-items:center;gap:0.5rem;justify-content:flex-end;width:100%}.dialog__loader-container{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;width:100%;min-height:50px;min-width:31rem}";const Rn=Bn;var Nn=undefined&&undefined.__decorate||function(e,t,a,i){var r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,a):i,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,a,i);else for(var s=e.length-1;s>=0;s--)if(n=e[s])o=(r<3?n(o):r>3?n(t,a,o):n(t,a))||o;return r>3&&o&&Object.defineProperty(t,a,o),o};const $n=class{constructor(a){e(this,a);this.irDialogShow=t(this,"irDialogShow",7);this.irDialogHide=t(this,"irDialogHide",7);this.irDialogAfterShow=t(this,"irDialogAfterShow",7);this.irDialogAfterHide=t(this,"irDialogAfterHide",7)}get el(){return r(this)}label;open;withoutHeader;lightDismiss=true;irDialogShow;irDialogHide;irDialogAfterShow;irDialogAfterHide;slotState=new Map;slotObserver;SLOT_NAMES=["label","header-actions","footer"];componentWillLoad(){this.updateSlotState()}componentDidLoad(){this.setupSlotListeners()}disconnectedCallback(){this.removeSlotListeners()}async openModal(){this.open=true}async closeModal(){this.open=false}handleWaHide(e){e.stopImmediatePropagation();e.stopPropagation();if(!e.detail){return}this.open=false;this.irDialogHide.emit(e.detail)}handleWaShow(e){e.stopImmediatePropagation();e.stopPropagation();this.open=true;this.irDialogShow.emit()}handleWaAfterHide(e){e.stopImmediatePropagation();e.stopPropagation();this.irDialogAfterHide.emit()}handleWaAfterShow(e){e.stopImmediatePropagation();e.stopPropagation();this.irDialogAfterShow.emit()}setupSlotListeners(){this.el.addEventListener("slotchange",this.handleSlotChange);this.slotObserver=new MutationObserver(this.handleSlotChange);this.slotObserver.observe(this.el,{childList:true,subtree:true,attributes:true,attributeFilter:["slot"]})}removeSlotListeners(){this.el.removeEventListener("slotchange",this.handleSlotChange);this.slotObserver?.disconnect()}handleSlotChange=()=>{this.updateSlotState()};updateSlotState(){const e=new Map;this.SLOT_NAMES.forEach((t=>{e.set(t,this.hasSlot(t))}));this.slotState=e}hasSlot(e){return!!this.el.querySelector(`[slot="${e}"]`)}render(){return a("wa-dialog",{key:"6b93dc735124797e4a1a8cefa895e79e02ae5001","onwa-hide":this.handleWaHide.bind(this),"onwa-show":this.handleWaShow.bind(this),"onwa-after-hide":this.handleWaAfterHide.bind(this),"onwa-after-show":this.handleWaAfterShow.bind(this),label:this.label,id:"dialog-overview",open:this.open,style:{"--width":"var(--ir-dialog-width,31rem)"},"without-header":this.withoutHeader,lightDismiss:this.lightDismiss,exportparts:"dialog, header, header-actions, title, close-button, close-button__base, body, footer"},this.slotState.get("header-actions")&&a("slot",{key:"5a97d61961cdb3af72d941018dfcd77c468ecb03",name:"header-actions",slot:"header-actions"}),this.slotState.get("label")&&a("slot",{key:"0959d6b0303967f44926c3e6d3fd6a095da47cc5",name:"label",slot:"label"}),a("slot",{key:"c0d774b7db368d66b28a0b15c27256e2d100d801"}),this.slotState.get("footer")&&a("slot",{key:"61ffd32c8ff0d8c8f63e80044e54b2344c818966",name:"footer",slot:"footer"}))}};Nn([xn()],$n.prototype,"handleWaHide",null);Nn([_n()],$n.prototype,"handleWaShow",null);$n.style=Rn;const Ln=".ir__drawer{text-align:left !important}.ir__drawer::part(header){border-bottom:1px solid var(--wa-color-surface-border);padding-bottom:calc(var(--spacing) / 2);background-color:var(--ir-drawer-background-color, var(--wa-color-surface-default))}.ir__drawer::part(body){background-color:var(--ir-drawer-background-color, var(--wa-color-surface-default));padding:0;padding-left:var(--ir-drawer-padding-left, var(--spacing));padding-right:var(--ir-drawer-padding-right, var(--spacing));padding-top:var(--ir-drawer-padding-top, var(--spacing));padding-bottom:var(--ir-drawer-padding-bottom, var(--spacing))}.ir__drawer::part(footer){background-color:var(--ir-drawer-background-color, var(--wa-color-surface-default));padding-top:calc(var(--spacing) / 2);border-top:1px solid var(--wa-color-surface-border)}.ir__drawer-footer{display:flex;align-items:center;gap:0.5rem;width:100%}.ir__drawer-footer>*{flex:1 1 0%}.drawer__loader-container{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;width:100%}";const Pn=Ln;var Hn=undefined&&undefined.__decorate||function(e,t,a,i){var r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,a):i,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,a,i);else for(var s=e.length-1;s>=0;s--)if(n=e[s])o=(r<3?n(o):r>3?n(t,a,o):n(t,a))||o;return r>3&&o&&Object.defineProperty(t,a,o),o};const Fn=class{constructor(a){e(this,a);this.drawerShow=t(this,"drawerShow",7);this.drawerHide=t(this,"drawerHide",7)}get el(){return r(this)}open;label;placement;withoutHeader;lightDismiss=true;slotStateVersion=0;drawerShow;drawerHide;SLOT_NAMES=["label","header-actions","footer"];slotManager=fn(null,this.SLOT_NAMES,(()=>{this.slotStateVersion++}));onDrawerShow=e=>{this.emitDrawerShow(e)};onDrawerHide=e=>{this.emitDrawerHide(e)};componentWillLoad(){this.slotManager=fn(this.el,this.SLOT_NAMES,(()=>{this.slotStateVersion++}));this.slotManager.initialize()}componentDidLoad(){this.slotManager.setupListeners()}disconnectedCallback(){this.slotManager.destroy()}emitDrawerShow(e){e.stopImmediatePropagation();e.stopPropagation();this.drawerShow.emit()}emitDrawerHide(e){e.stopImmediatePropagation();e.stopPropagation();if(!e.detail){return}this.drawerHide.emit(e.detail)}render(){return a("wa-drawer",{key:"e4851b29241a973bca684b2a3274b73d24db935a",id:this.el.id,"onwa-show":this.onDrawerShow,"onwa-hide":this.onDrawerHide,class:"ir__drawer",style:{"--size":"var(--ir-drawer-width,40rem)"},open:this.open,label:this.label,placement:this.placement,withoutHeader:this.withoutHeader,lightDismiss:this.lightDismiss,exportparts:"dialog, header, header-actions, title, close-button, close-button__base, body, footer"},this.slotManager.hasSlot("header-actions")&&a("slot",{key:"6f6df49cc217106699c6b0f126b3e2688b007db6",name:"header-actions",slot:"header-actions"}),this.slotManager.hasSlot("label")&&a("slot",{key:"783a71458ebe8be98a977bd9b02679be4d6513d8",name:"label",slot:"label"}),a("slot",{key:"dd54684a1431a19a963c9207017236265d7af2cf"}),this.slotManager.hasSlot("footer")&&a("slot",{key:"e8c4bfbad06183ee9adb13847394927f525e71f3",name:"footer",slot:"footer"}))}};Hn([_n()],Fn.prototype,"emitDrawerShow",null);Hn([xn()],Fn.prototype,"emitDrawerHide",null);Fn.style=Pn;const Un=".dropdown-menu.sc-ir-dropdown{z-index:1000;width:100%;max-height:300px;min-width:var(--ir-dropdown-menu-min-width, 11rem) !important;overflow-y:auto}.dropdown.nav-item.show.sc-ir-dropdown .dropdown-menu.sc-ir-dropdown{display:block}.caret-icon.sc-ir-dropdown{position:absolute;top:50%;transform:translateY(-55%);right:0.25rem;z-index:99999}.dropdown-trigger.sc-ir-dropdown{position:relative}.caret-icon.disabled.sc-ir-dropdown{opacity:0.5 !important;pointer-events:none !important;cursor:not-allowed !important}";const jn=Un;const Vn=class{constructor(a){e(this,a);this.optionChange=t(this,"optionChange",7)}get el(){return r(this)}value;disabled=false;caret=true;isOpen=false;selectedOption;focusedIndex=-1;itemChildren=[];mo=null;documentClickHandler;isComponentConnected=true;updateQueued=false;optionChange;componentWillLoad(){this.selectedOption=this.value;this.documentClickHandler=this.handleDocumentClick.bind(this);this.collectItemChildren();this.mo=new MutationObserver((()=>{if(!this.updateQueued){this.updateQueued=true;requestAnimationFrame((()=>{if(this.isComponentConnected){this.collectItemChildren();this.updateQueued=false}}))}}));this.mo.observe(this.el,{childList:true,subtree:true})}componentDidLoad(){document.addEventListener("click",this.documentClickHandler,{passive:true});requestAnimationFrame((()=>{if(this.isComponentConnected){this.updateItemElements();if(this.value){this.updateDropdownItemValue(this.value)}}}))}disconnectedCallback(){this.isComponentConnected=false;document.removeEventListener("click",this.documentClickHandler);this.mo?.disconnect();this.mo=null}handleDocumentKeyDown(e){if(!this.isOpen||!this.isComponentConnected)return;if(e.key==="Escape"){this.closeDropdown()}}handleDropdownItemSelect(e){if(!this.isComponentConnected)return;e.stopPropagation();this.selectOption(e.detail);e.target.setAttribute("aria-selected","true")}handleDropdownItemRegister(){if(!this.isComponentConnected)return;this.collectItemChildren()}handleDropdownItemUnregister(){if(!this.isComponentConnected)return;this.collectItemChildren()}handleValueChange(e,t){if(e!==t&&this.isComponentConnected){this.updateDropdownItemValue(e)}}updateDropdownItemValue(e){this.itemChildren.forEach((e=>e.removeAttribute("aria-selected")));const t=this.itemChildren.find((t=>t.value===e));if(t){t.setAttribute("aria-selected","true")}}getSelectedItemIndex(){if(!this.value)return-1;return this.itemChildren.findIndex((e=>e.value===this.value))}openDropdown(){try{this.isOpen=true;this.focusedIndex=this.getSelectedItemIndex();this.updateItemElements();if(this.focusedIndex>=0){requestAnimationFrame((()=>{this.scrollToSelectedItem()}))}}catch(e){console.log(e)}}closeDropdown(){this.isOpen=false;this.focusedIndex=-1;this.removeItemFocus()}handleDocumentClick=e=>{if(!this.isComponentConnected||!this.el.contains(e.target)){this.closeDropdown()}};collectItemChildren(){if(!this.isComponentConnected)return;const e=Array.from(this.el.querySelectorAll("ir-dropdown-item"));this.itemChildren=e;this.updateItemElements()}updateItemElements(){if(!this.isComponentConnected)return;this.itemChildren.forEach(((e,t)=>{e.setAttribute("data-slot-index",String(t));e.setAttribute("role","option");e.setAttribute("tabindex","-1")}))}removeItemFocus(){this.itemChildren.forEach((e=>{e.classList.remove("focused","active")}))}focusItemElement(e){this.removeItemFocus();if(e>=0&&e<this.itemChildren.length){const t=this.itemChildren[e];t.classList.add("focused");t.scrollIntoView({block:"nearest",behavior:"smooth"})}}selectItemElement(e){if(e>=0&&e<this.itemChildren.length){const t=this.itemChildren[e];t.click()}}scrollToSelectedItem(){if(this.focusedIndex>=0&&this.focusedIndex<this.itemChildren.length){const e=this.itemChildren[this.focusedIndex];if(e){e.scrollIntoView({block:"nearest",behavior:"smooth",inline:"nearest"})}}}handleKeyDown=e=>{if(!this.isComponentConnected||this.disabled)return;const t=this.itemChildren.length-1;switch(e.key){case"ArrowDown":e.preventDefault();if(!this.isOpen){this.openDropdown();if(this.focusedIndex>=0&&this.focusedIndex<t){this.focusedIndex++;this.focusItemElement(this.focusedIndex)}else if(this.focusedIndex===-1){this.focusedIndex=0;this.focusItemElement(this.focusedIndex)}else if(this.focusedIndex===t){this.focusedIndex=0;this.focusItemElement(this.focusedIndex)}}else if(t>=0){this.focusedIndex=this.focusedIndex<t?this.focusedIndex+1:0;this.focusItemElement(this.focusedIndex)}break;case"ArrowUp":e.preventDefault();if(!this.isOpen){this.openDropdown();if(this.focusedIndex>0){this.focusedIndex--;this.focusItemElement(this.focusedIndex)}else if(this.focusedIndex===-1){this.focusedIndex=t;this.focusItemElement(this.focusedIndex)}else if(this.focusedIndex===0){this.focusedIndex=t;this.focusItemElement(this.focusedIndex)}}else if(t>=0){this.focusedIndex=this.focusedIndex>0?this.focusedIndex-1:t;this.focusItemElement(this.focusedIndex)}break;case"Enter":e.preventDefault();if(this.isOpen&&this.focusedIndex>=0){this.selectItemElement(this.focusedIndex)}else if(!this.isOpen){this.openDropdown()}break;case"Escape":e.preventDefault();this.closeDropdown();break;case"Tab":if(this.isOpen){this.closeDropdown()}break}};selectOption(e){this.selectedOption=e;this.value=e;this.optionChange.emit(e);this.closeDropdown()}render(){return a(i,{key:"d04498037b7bf82debaaefd6b918a0e2a12351d0",class:`dropdown ${this.isOpen?"show":""}`},a("div",{key:"0532556a95b9da6557ba50586764bac7f9cb916d",onClick:()=>{if(this.disabled)return;if(this.isOpen){this.closeDropdown()}else{this.openDropdown()}},"aria-disabled":String(this.disabled),class:`dropdown-trigger ${this.disabled?"disabled":""}`,onKeyDown:this.handleKeyDown,tabindex:"0"},a("slot",{key:"7733a1e729b2a2a88111ceb3f5f2491d10099492",name:"trigger"}),this.caret&&a("div",{key:"9477a045f962e5fc1594d97d6fe4ee31ed2c81c0",class:`caret-icon ${this.disabled?"disabled":""}`},a("ir-icons",{key:"a0d7a5480c0f88c87b2de35b42a7dd0a24162155",name:!this.isOpen?"angle-down":"angle-up"}))),a("div",{key:"614ccc076253b6161a338a94c4078679a218c166",class:"dropdown-menu",role:"listbox","aria-expanded":this.isOpen.toString()},a("slot",{key:"6b938d53948724f61b470a2d2ef45da13d128fe0"})))}static get watchers(){return{value:["handleValueChange"]}}};Vn.style=jn;const Gn=".sc-ir-dropdown-item-h{display:block;cursor:pointer}[hidden].sc-ir-dropdown-item-h{display:none !important}.focused.sc-ir-dropdown-item-h{background:#f4f5fa !important}.active.sc-ir-dropdown-item-h,[aria-selected='true'].sc-ir-dropdown-item-h,.sc-ir-dropdown-item-h:active{outline:none;background-color:var(--blue, #1e9ff2) !important;color:white !important}.dropdown-item.sc-ir-dropdown-item-h{padding:0.25rem 1rem !important;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}";const qn=Gn;const Kn=class{constructor(a){e(this,a);this.dropdownItemSelect=t(this,"dropdownItemSelect",7);this.dropdownItemRegister=t(this,"dropdownItemRegister",7);this.dropdownItemUnregister=t(this,"dropdownItemUnregister",7)}get el(){return r(this)}isComponentConnected=true;hasRegistered=false;value;label;html_content;hidden=false;dropdownItemSelect;dropdownItemRegister;dropdownItemUnregister;componentDidLoad(){if(this.isComponentConnected&&!this.hasRegistered){this.hasRegistered=true;requestAnimationFrame((()=>{if(this.isComponentConnected){this.dropdownItemRegister.emit()}}))}}disconnectedCallback(){this.isComponentConnected=false;if(this.hasRegistered&&this.el.parentElement){const e=this.el.closest("ir-dropdown");if(e&&document.contains(e)){this.dropdownItemUnregister.emit()}}this.hasRegistered=false}async matchesQuery(e){if(!this.isComponentConnected)return false;const t=e.toLowerCase();const a=(this.label??this.el.textContent??"").toLowerCase();return a.includes(t)}async setHidden(e){if(this.isComponentConnected){this.hidden=e}}handleClick=e=>{e.stopPropagation();if(!this.isComponentConnected)return;this.dropdownItemSelect.emit(this.value)};render(){return a(i,{key:"d850a82489d86aae983878385045e20ac00496a2",role:"option",tabindex:"-1","aria-selected":"false",class:{"dropdown-item":true,hidden:this.hidden},onClick:this.handleClick,"data-value":this.value},this.html_content?a("span",{innerHTML:this.html_content}):a("slot",null))}};Kn.style=qn;const Wn=":host{display:flex;align-items:center;justify-content:center;gap:1rem;flex-direction:column;box-sizing:border-box;color:var(--wa-color-neutral-60)}:host{box-sizing:border-box !important}:host *,:host *::before,:host *::after{box-sizing:inherit !important;padding:0;margin:0}::slotted([slot='icon']){font-size:2rem}[hidden]{display:none !important}";const Xn=Wn;const Jn=class{constructor(t){e(this,t)}message="No records found";render(){return a(i,{key:"7779d183ee28825428afc250d69fe230cab65cd6"},a("slot",{key:"0e0af03f17406a42e39bece870e48c39250d4d9e",name:"icon"},a("wa-icon",{key:"7a69ac21238aa84430d13b49e601dd53bddd32a4",name:"ban",style:{transform:"rotate(90deg)",fontSize:"2rem"}})),a("p",{key:"6403da5910f8139d9f8081ef74b062e508526a08",part:"message",class:"message"},this.message),a("slot",{key:"1e8a174dbc6301a943bb597c73a83f4bb9c1f8f2"}))}};Jn.style=Xn;const Qn=".sc-ir-events-log-h{display:block}.beta.sc-ir-events-log{background:var(--red);color:white;padding:0.2rem 0.3rem;font-size:12px;border-radius:4px;margin:0}.event-row.sc-ir-events-log{padding-bottom:0.5rem}.list-title.sc-ir-events-log{margin:0;padding:0;font-size:14px;font-weight:bold;width:fit-content}.list-item.sc-ir-events-log{margin:0;padding:0;font-size:14px;margin-left:5px;width:fit-content}.list-item.green.sc-ir-events-log{color:#629a4c;font-weight:600}.list-item.red.sc-ir-events-log{color:#ff4961;font-weight:600}.dates-row.sc-ir-events-log{display:flex;align-items:center;gap:0.875rem}";const Zn=Qn;const es=class{constructor(t){e(this,t)}bookingNumber;booking;bookingEvents;componentWillLoad(){this.init()}async init(){try{this.bookingEvents=this.booking.events}catch(e){console.error(e)}}render(){return a("div",{key:"646df83db5654c9cba36de4dfb54d7ac91274ad9",class:""},Ce("/Get_Exposed_Booking_Events")?a("div",{class:"d-flex align-items-center justify-content-center dialog-container-height"},a("ir-spinner",null)):a(o,null,a("table",{class:" dialog-container-height"},a("thead",{class:"sr-only"},a("tr",null,a("th",null,"date"),a("th",null,"user"),a("th",null,"status"))),a("tbody",null,this.bookingEvents?.map((e=>a("tr",{key:e.id,class:"pb-1"},a("td",{class:"event-row dates-row"},a("span",null,e.date),a("span",null,String(e.hour).padStart(2,"0"),":",String(e.minute).padStart(2,"0"),":",String(e.second).padStart(2,"0"))),a("td",{class:"pl-3 event-row "},e.type),a("td",{class:"pl-1 event-row "},e.user))))))))}};es.style=Zn;const ts=".sc-ir-extra-service-h{display:block}.extra-service-container.sc-ir-extra-service{display:flex;align-items:start;justify-content:space-between;gap:0.5rem}.extra-service-container.sc-ir-extra-service *.sc-ir-extra-service{padding:0;margin:0;box-sizing:border-box}.extra-service-actions.sc-ir-extra-service{display:flex;align-items:center;gap:0.5rem}.extra-service-conditional-date.sc-ir-extra-service{margin-top:0.5rem}.extra-service-price.sc-ir-extra-service{white-space:nowrap}.extra-service-description.sc-ir-extra-service{word-break:break-all}";const as=ts;const is=class{constructor(a){e(this,a);this.editExtraService=t(this,"editExtraService",7);this.resetBookingEvt=t(this,"resetBookingEvt",7)}service;bookingNumber;currencySymbol;editExtraService;resetBookingEvt;irModalRef;bookingService=new s;async deleteService(){try{await this.bookingService.doBookingExtraService({service:this.service,is_remove:true,booking_nbr:this.bookingNumber});this.irModalRef.closeModal();this.resetBookingEvt.emit(null)}catch(e){console.log(e)}}render(){return a(i,{key:"0211604b8d10290d453f4562bc37e3afce60cfe1"},a("div",{key:"cb7533808ad97ce5f28ef6b398e54053101227db"},a("div",{key:"6ffaa50cd4bf0b1e4f48bae2fd013a4ee15ed52c",class:"extra-service-container"},a("p",{key:"e22e86f95c25c9c6fd785ad4ed83f062921218d5",class:"extra-service-description"},this.service.description),a("div",{key:"03ce24a2ebf32becd780b6026d87ddc6d57e6280",class:"extra-service-actions"},!!this.service.price&&this.service.price>0&&a("p",{key:"eb58a0a9bb4d8c81496e19af1ca432afa3ed5618",class:"extra-service-price p-0 m-0 font-weight-bold"},E(this.currencySymbol,this.service.price)),a("div",{key:"2a58f49df031151e6615f704958322bbd74088b9",class:"d-flex align-items-center"},a("wa-tooltip",{key:"1a89f1a2fb0f55e3747ed4cb08f227dc40b9db59",for:`edit-extra-service-${this.service.booking_system_id}`},"Edit service"),a("ir-custom-button",{key:"466e70dcbe5674ab0377e009e42f6b034f047181",id:`edit-extra-service-${this.service.booking_system_id}`,onClickHandler:e=>{e.stopImmediatePropagation();e.stopPropagation();this.editExtraService.emit(this.service)},iconBtn:true,appearance:"plain",variant:"neutral"},a("wa-icon",{key:"37fcc97371bc7b123b349922a84c6cdd3074b79a",name:"edit",label:"Edit",style:{fontSize:"1rem"}})),a("wa-tooltip",{key:"f446547dd80b9a9f72fe9c9c02dd91fce43cc531",for:`delete-extra-service-${this.service.booking_system_id}`},"Delete service"),a("ir-custom-button",{key:"f073709fcb24c89bfb64a8674bcdb992c0c92827",iconBtn:true,id:`delete-extra-service-${this.service.booking_system_id}`,onClickHandler:e=>{e.stopImmediatePropagation();e.stopPropagation();this.irModalRef.openModal()},appearance:"plain",variant:"danger"},a("wa-icon",{key:"320fb3c3d07eadb127c21489c24bc293c1805554",name:"trash-can",label:"Edit",style:{fontSize:"1rem"}}))))),a("div",{key:"20839898975a840f349452de440e505812613b91",class:"extra-service-conditional-date"},this.service.start_date&&this.service.end_date?a("ir-date-view",{class:"extra-service-date-view mr-1",from_date:this.service.start_date,to_date:this.service.end_date,showDateDifference:false}):this.service.start_date&&a("p",{class:"extra-service-date-view"},me(new Date(this.service.start_date)).format("MMM DD, YYYY")))),a("ir-dialog",{key:"4bee790a083b3918594d66ef8f4073df82f012dc",onIrDialogHide:e=>{e.stopImmediatePropagation();e.stopPropagation()},label:"Alert",ref:e=>this.irModalRef=e,lightDismiss:false},`${M.entries["Lcz_AreYouSureDoYouWantToRemove "]} ${M.entries.Lcz_ThisService} ${M.entries.Lcz_FromThisBooking}`,a("div",{key:"811438614abda173c810842bc4e29eda878ba720",slot:"footer",class:"ir-dialog__footer"},a("ir-custom-button",{key:"5d072d0db0d9e77f8076203fa455394861d0c451",appearance:"filled",variant:"neutral",size:"medium","data-dialog":"close"},M.entries.Lcz_Cancel),a("ir-custom-button",{key:"97d6d0bbd9d88895b621802a9c831bd8e597d839",onClickHandler:()=>this.deleteService(),loading:Ce("/Do_Booking_Extra_Service"),variant:"danger",size:"medium"},M.entries.Lcz_Delete))))}};is.style=as;const rs=".sc-ir-extra-service-config-h{display:block;--ir-input-border-color:#cacfe7}.sc-ir-extra-service-config-h .input-group-text.sc-ir-extra-service-config{border-color:var(--ir-input-border-color)}.currency-ph.sc-ir-extra-service-config{padding:0;margin:0;color:#3b4781;display:flex;align-items:center;justify-content:center;padding:0 0 0 0.25rem;border-top:1px solid var(--ir-input-border-color);border-bottom:1px solid var(--ir-input-border-color);border-left:1px solid transparent;transition:border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;transition:border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.service-description-input.sc-ir-extra-service-config{height:70px !important}.service-description.sc-ir-extra-service-config .input-group-prepend.sc-ir-extra-service-config{background-color:#f4f5fa;border:1px solid var(--ir-input-border-color);border-top-left-radius:0.25rem;border-bottom-left-radius:0.25rem}.service-date-container.sc-ir-extra-service-config{padding:0;margin:0;display:flex;align-items:center;position:relative;width:100%;justify-content:center}.service-date-container.sc-ir-extra-service-config .btn-container.sc-ir-extra-service-config{position:absolute;right:5px;margin:0;display:flex;align-items:center;justify-content:center;padding:0}.service-description.sc-ir-extra-service-config .input-group-text.sc-ir-extra-service-config{height:fit-content;border:0;padding-top:0.75rem !important}.price-input-group.sc-ir-extra-service-config:focus-within .currency-ph.sc-ir-extra-service-config,.cost-input-group.sc-ir-extra-service-config:focus-within .currency-ph.sc-ir-extra-service-config{border-top:1px solid #1e9ff2;border-bottom:1px solid #1e9ff2;border-left:1px solid #1e9ff2}.currency-ph[data-state='error'].sc-ir-extra-service-config{border-color:var(--red, #ff4961)}.price-input.sc-ir-extra-service-config:focus{border-right-width:1px !important}.is-invalid.sc-ir-extra-service-config{background-image:none !important}.price-input.sc-ir-extra-service-config,.cost-input.sc-ir-extra-service-config{border-left:0}.row-group.sc-ir-extra-service-config{display:flex;flex-direction:column;gap:0.5rem}.extra-service-config__container.sc-ir-extra-service-config{display:flex;flex-direction:column;gap:1rem}@media (min-width: 640px){.row-group.sc-ir-extra-service-config{flex-direction:row;align-items:center;gap:0}.cost-label.sc-ir-extra-service-config{border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}.until-prepend.sc-ir-extra-service-config,.cost-input-placeholder.sc-ir-extra-service-config{border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.date-from.sc-ir-extra-service-config,.price-input.sc-ir-extra-service-config{border-right-width:0 !important;border-top-right-radius:0 !important;border-bottom-right-radius:0 !important}}.date-focused.sc-ir-extra-service-config{border-color:#1e9ff2}";const os=rs;const ns=class{constructor(a){e(this,a);this.closeModal=t(this,"closeModal",7)}booking;service;open;closeModal;closeDialog(){this.closeModal.emit()}render(){return a("ir-drawer",{key:"1e63dffbb45d32e9b7b48cf2922d24f8cfa1d634",style:{"--ir-drawer-width":"40rem","--ir-drawer-background-color":"var(--wa-color-surface-default)","--ir-drawer-padding-left":"var(--spacing)","--ir-drawer-padding-right":"var(--spacing)","--ir-drawer-padding-top":"var(--spacing)","--ir-drawer-padding-bottom":"var(--spacing)"},open:this.open,onDrawerHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.closeDialog()},label:M.entries.Lcz_ExtraServices},this.open&&a("ir-extra-service-config-form",{key:"31edf2702cbb524c1234d46e2b6b43cda24f740f",onCloseModal:e=>{e.stopImmediatePropagation();e.stopPropagation();this.closeDialog()},booking:this.booking,service:this.service}),a("div",{key:"125d0e5dcac1ee74c3b9c5b66a83cc0f10f18441",slot:"footer",class:"ir__drawer-footer"},a("ir-custom-button",{key:"cbc00e7651812c36b64dfdb585c0f110982f6ad1",class:`flex-fill`,size:"medium",appearance:"filled",variant:"neutral","data-drawer":"close"},M.entries.Lcz_Cancel),a("ir-custom-button",{key:"ed1020d0560d5572d9ff8cfeb2a1ffe690b75106",type:"submit",loading:Ce("/Do_Booking_Extra_Service"),form:"extra-service-config-form",size:"medium",class:`flex-fill`,variant:"brand"},M.entries.Lcz_Save)))}};ns.style=os;const ss=Z.object({type:Z.object({code:Z.union([Z.string().min(3),Z.literal("")]).optional(),description:Z.union([Z.string(),Z.literal("")]).optional()}),number:Z.union([Z.string().min(2),Z.literal("")]).optional().nullable()});const ls=Z.object({id:Z.number().optional(),first_name:Z.union([Z.string().min(2),Z.literal("")]).optional(),last_name:Z.string().optional(),country_id:Z.coerce.number().min(0).optional(),dob:Z.string().nullable().optional().refine((e=>e===undefined||me(e,"DD/MM/YYYY",true).isValid()||e===""||e===null),"Invalid date format").transform((e=>{if(e===undefined||e===""||e===null)return null;const t=me(e,"DD/MM/YYYY",true).isValid();return t?null:me(e,"DD/MM/YYYY").format("YYYY-MM-DD")})),id_info:ss.optional(),is_main:Z.boolean().default(false)});function cs(e){ls.parse(e);const t=e=>e!==null&&e!==undefined&&e.trim()!=="";const a=[];if(e.is_main){if(!t(e.first_name)){a.push({path:["first_name"],code:te.custom,message:"First name is required for main guest"})}}const i=t(e.first_name)||t(e.dob)||e.country_id!==null&&e.country_id!==undefined&&e.country_id>0||t(e.id_info?.number);if(i){if(!t(e.first_name)){a.push({path:["first_name"],code:te.custom,message:"First name is required when other guest information is provided"})}}if(a.length>=1){throw new ee(a)}}const ds=Z.object({booking_system_id:Z.number().optional(),cost:Z.coerce.number().nullable(),currency_id:Z.number().min(1),description:Z.string().min(1),end_date:Z.string().nullable().optional().default(null),start_date:Z.string().nonempty(),price:Z.coerce.number().min(.01),system_id:Z.number().optional()});const hs=".sc-ir-extra-service-config-form-h{display:block;--ir-input-border-color:#cacfe7}.sc-ir-extra-service-config-form-h .input-group-text.sc-ir-extra-service-config-form{border-color:var(--ir-input-border-color)}.currency-ph.sc-ir-extra-service-config-form{padding:0;margin:0;color:#3b4781;display:flex;align-items:center;justify-content:center;padding:0 0 0 0.25rem;border-top:1px solid var(--ir-input-border-color);border-bottom:1px solid var(--ir-input-border-color);border-left:1px solid transparent;transition:border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;transition:border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.service-description-input.sc-ir-extra-service-config-form{height:70px !important}.service-description.sc-ir-extra-service-config-form .input-group-prepend.sc-ir-extra-service-config-form{background-color:#f4f5fa;border:1px solid var(--ir-input-border-color);border-top-left-radius:0.25rem;border-bottom-left-radius:0.25rem}.service-date-container.sc-ir-extra-service-config-form{padding:0;margin:0;display:flex;align-items:center;position:relative;width:100%;justify-content:center}.service-date-container.sc-ir-extra-service-config-form .btn-container.sc-ir-extra-service-config-form{position:absolute;right:5px;margin:0;display:flex;align-items:center;justify-content:center;padding:0}.service-description.sc-ir-extra-service-config-form .input-group-text.sc-ir-extra-service-config-form{height:fit-content;border:0;padding-top:0.75rem !important}.price-input-group.sc-ir-extra-service-config-form:focus-within .currency-ph.sc-ir-extra-service-config-form,.cost-input-group.sc-ir-extra-service-config-form:focus-within .currency-ph.sc-ir-extra-service-config-form{border-top:1px solid #1e9ff2;border-bottom:1px solid #1e9ff2;border-left:1px solid #1e9ff2}.currency-ph[data-state='error'].sc-ir-extra-service-config-form{border-color:var(--red, #ff4961)}.price-input.sc-ir-extra-service-config-form:focus{border-right-width:1px !important}.is-invalid.sc-ir-extra-service-config-form{background-image:none !important}.price-input.sc-ir-extra-service-config-form,.cost-input.sc-ir-extra-service-config-form{border-left:0}.row-group.sc-ir-extra-service-config-form{display:flex;flex-direction:column;gap:0.5rem}.extra-service-config__container.sc-ir-extra-service-config-form{display:flex;flex-direction:column;gap:1rem}@media (min-width: 640px){.row-group.sc-ir-extra-service-config-form{flex-direction:row;align-items:center;gap:0}.cost-label.sc-ir-extra-service-config-form{border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}.until-prepend.sc-ir-extra-service-config-form,.cost-input-placeholder.sc-ir-extra-service-config-form{border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.date-from.sc-ir-extra-service-config-form,.price-input.sc-ir-extra-service-config-form{border-right-width:0 !important;border-top-right-radius:0 !important;border-bottom-right-radius:0 !important}}.date-focused.sc-ir-extra-service-config-form{border-color:#1e9ff2}";const ps=hs;const us=class{constructor(a){e(this,a);this.closeModal=t(this,"closeModal",7);this.resetBookingEvt=t(this,"resetBookingEvt",7)}booking;service;s_service;error;fromDateClicked;toDateClicked;autoValidate;closeModal;resetBookingEvt;bookingService=new s;componentWillLoad(){if(this.service){this.s_service={...this.service}}}handleServiceChange(){if(this.service){this.s_service={...this.service}}}async saveAmenity(){try{this.autoValidate=true;ds.parse(this.s_service??{});await this.bookingService.doBookingExtraService({service:this.s_service,booking_nbr:this.booking.booking_nbr,is_remove:false});this.resetBookingEvt.emit(null);this.closeDialog()}catch(e){if(e instanceof ee){this.error=true}console.error(e)}}closeDialog(){this.closeModal.emit()}updateService(e){let t=this.s_service;if(!t){t={cost:null,description:null,end_date:null,start_date:null,price:null,currency_id:this.booking.currency.id}}this.s_service={...t,...e}}render(){return a("form",{key:"4bce7ba4109bd4d74084cd787e72136bc7b7c8a2",id:"extra-service-config-form",onSubmit:async e=>{e.preventDefault();this.saveAmenity()},class:"extra-service-config__container"},a("ir-validator",{key:"f37c5f28fd3abe0c4ba7a1408dc2b6f9cb193158",id:"amenity description-validator",schema:ds.shape.description},a("wa-textarea",{key:"02963e97d8799b65fb9f9d78b5223a59572a6f41",size:"small",defaultValue:this.s_service?.description,value:this.s_service?.description,onchange:e=>this.updateService({description:e.target.value}),id:"amenity-description","aria-label":"Amenity description",maxlength:250,label:M.entries.Lcz_Description})),a("ir-validator",{key:"06bc2b041c6673c67534ca17e7a8cb6d6efa53c5",value:this.s_service?.start_date??null,schema:ds.shape.start_date},a("ir-custom-date-picker",{key:"8ef7396a6f39d6b942388b594adf6e39da40246a",placeholder:"Select date",withClear:true,label:"Dates on",emitEmptyDate:true,date:this.s_service?.start_date,minDate:this.booking.from_date,maxDate:this.booking.to_date,onDateChanged:e=>this.updateService({start_date:e.detail.start?.format("YYYY-MM-DD")})})),a("ir-custom-date-picker",{key:"c7f1f2dbef55d6f37f03c23a28c4bc90cd9b781b",withClear:true,emitEmptyDate:true,placeholder:"Select date",date:this.s_service?.end_date,minDate:this.s_service?.start_date??this.booking.from_date,maxDate:this.booking.to_date,onDateChanged:e=>{e.stopImmediatePropagation();e.stopPropagation();this.updateService({end_date:e.detail.start?.format("YYYY-MM-DD")})},label:"Till and including"}),a("ir-validator",{key:"0a9929f60a32184cde0a12739153c06083c118ff",value:this.s_service?.price??null,schema:ds.shape.price},a("ir-input",{key:"4defbe62cff499ca268aa98d703644a3321ed146","onText-change":e=>{this.updateService({price:Number(e.detail)})},defaultValue:this.s_service?.price?.toString(),value:this.s_service?.price?.toString(),mask:"price",type:"text",label:M.entries.Lcz_Price},a("span",{key:"b4b2e005d12c384fb2b286b2f284476a19980320",slot:"start"},this.booking.currency.symbol))),a("ir-validator",{key:"328800ac44c1489858a6fe3870848605f473587c",value:this.s_service?.cost??null,schema:ds.shape.cost},a("ir-input",{key:"b9a0cbb0a6d10bd9ef156ea89dd5bfedd1a92497",defaultValue:this.s_service?.cost?.toString(),"onText-change":e=>this.updateService({cost:Number(e.detail)}),value:this.s_service?.cost?.toString(),mask:"price",label:M.entries.Lcz_Cost},a("span",{key:"9bcd2301130fe6b66bf24457e9b97a4213c38939",slot:"start"},this.booking.currency.symbol))))}static get watchers(){return{service:["handleServiceChange"]}}};us.style=ps;const fs=".sc-ir-extra-services-h{display:block}";const gs=fs;const bs=class{constructor(t){e(this,t)}booking;render(){return a(i,{key:"44722d4f9ad4098ef4c3156a91d33803093a9db2"},a("wa-card",{key:"cc784fc9789af3ea94da0ba8800c3f91ed1f46cd"},a("p",{key:"860b54279bc03750f2a3ef9502db184bbc095357",slot:"header",class:"font-size-large p-0 m-0 "},M.entries.Lcz_ExtraServices),a("wa-tooltip",{key:"61876e77ac9c9a3a844e52effb09cd83db14611c",for:"extra_service_btn"},"Add extra service"),a("ir-custom-button",{key:"cfe0d04133911b81e09170266f7663f1ff34686e",slot:"header-actions",id:"extra_service_btn",size:"small",appearance:"plain",variant:"neutral"},a("wa-icon",{key:"deeae04807a6d4cdf2b961c3f6684d4adb6c147b",name:"plus",style:{fontSize:"1rem"}})),(this.booking.extra_services??[])?.length===0&&a("ir-empty-state",{key:"634d54a186a0ff25d1867b16570d3c12aa729442"}),this.booking.extra_services?.map(((e,t)=>a(o,null,a("ir-extra-service",{bookingNumber:this.booking.booking_nbr,currencySymbol:this.booking.currency.symbol,key:e.booking_system_id,service:e}),t!==this.booking.extra_services.length-1&&a("wa-divider",null))))))}};bs.style=gs;const ws=".sc-ir-guest-info-drawer-h{display:block}";const ms=ws;const vs=class{constructor(a){e(this,a);this.guestInfoDrawerClosed=t(this,"guestInfoDrawerClosed",7);this.guestChanged=t(this,"guestChanged",7);this.resetBookingEvt=t(this,"resetBookingEvt",7);this.toast=t(this,"toast",7)}open;language="en";email;booking_nbr;ticket;guestInfoDrawerClosed;guestChanged;resetBookingEvt;toast;get hostElement(){return r(this)}handleDrawerHide=e=>{e.stopImmediatePropagation();e.stopPropagation();this.guestInfoDrawerClosed.emit({source:e.detail?.source??this.hostElement})};handleCancel=()=>{this.guestInfoDrawerClosed.emit({source:this.hostElement})};_formId=`guest-details-form_${ae()}`;render(){const e=M?.entries?.Lcz_GuestDetails||"Guest info";return a("ir-drawer",{key:"f2a2685fa7e3089283b63f410ebc95f62be08a86",open:this.open,label:e,onDrawerHide:this.handleDrawerHide,style:{"--ir-drawer-width":"40rem","--ir-drawer-background-color":"var(--wa-color-surface-default)","--ir-drawer-padding-left":"var(--spacing)","--ir-drawer-padding-right":"var(--spacing)","--ir-drawer-padding-top":"var(--spacing)","--ir-drawer-padding-bottom":"var(--spacing)"}},this.open&&a("ir-guest-info-form",{key:"b4a99c83776bc83fc12da3cafa3c5819183b6696",ticket:this.ticket,language:this.language,email:this.email,booking_nbr:this.booking_nbr,fromId:this._formId}),a("div",{key:"f7699bc2dc3150a5baba3ddc6b9dc902fd89ae8e",slot:"footer",class:"ir__drawer-footer"},a("ir-custom-button",{key:"e1f7bd02f8ca8fef3540f3e8f70d946ccfafffb0",size:"medium",appearance:"filled",variant:"neutral",type:"button",onClickHandler:this.handleCancel},M.entries?.Lcz_Cancel||"Cancel"),a("ir-custom-button",{key:"423d0b4c8f670ad8113b7550ddea61035761a55b",type:"submit",form:this._formId,size:"medium",variant:"brand",loading:Ce("/Edit_Exposed_Guest")},M.entries?.Lcz_Save||"Save")))}};vs.style=ms;const ys=e=>Z.string().trim().min(1,e);const ks=Z.string().trim().email("Enter a valid email address").or(Z.literal("")).optional().nullable();const _s=Z.object({first_name:ys("First name is required"),last_name:ys("Last name is required"),email:ys("Email is required").email("Enter a valid email address"),alternative_email:ks,country_id:Z.number({required_error:"Country is required"}).int("Country is required").positive("Country is required"),mobile:ys("Mobile number is required").min(5,"Mobile number is too short"),country_phone_prefix:ys("Country code is required"),notes:Z.string().max(2e3,"Private note cannot exceed 2000 characters").optional()});const xs=".sc-ir-guest-info-form-h{height:100%;display:flex;flex-direction:column}.guest-form__container.sc-ir-guest-info-form{display:flex;flex-direction:column;gap:var(--wa-space-m, 1rem)}";const Ds=xs;const Cs=class{constructor(a){e(this,a);this.guestInfoDrawerClosed=t(this,"guestInfoDrawerClosed",7);this.resetBookingEvt=t(this,"resetBookingEvt",7);this.toast=t(this,"toast",7);this.guestChanged=t(this,"guestChanged",7)}fromId;language;email;booking_nbr;ticket;guest=null;countries=[];isLoading=true;autoValidate=false;guestInfoDrawerClosed;resetBookingEvt;toast;guestChanged;bookingService=new s;roomService=new Ye;token=new Se;componentWillLoad(){if(this.ticket){this.token.setToken(this.ticket)}if(!!this.token.getToken()){this.init()}}ticketChanged(e,t){if(e===t){return}this.token.setToken(this.ticket)}handleInputChange(e){this.guest={...this.guest,...e}}async init(){try{this.isLoading=true;const[e,t,a]=await Promise.all([this.bookingService.fetchGuest(this.email),this.bookingService.getCountries(this.language),!M||!M.entries||Object.keys(M.entries).length===0?this.roomService.fetchLanguage(this.language):Promise.resolve(null)]);if(a){M.entries=a.entries;M.direction=a.direction}this.countries=t;let i={...e,email:e.email.replace(/\s+(?=@)/g,"").trim()};if(i&&!i.country_phone_prefix){const e=this.countries.find((e=>e.id===i.country_id));console.log({country:e});if(e){i={...i,country_phone_prefix:e?.phone_prefix}}}this.guest=e?{...i,mobile:e.mobile_without_prefix}:null}catch(e){console.error(e)}finally{this.isLoading=false}}async editGuest(){try{this.autoValidate=true;_s.parse(this.guest);await this.bookingService.editExposedGuest(this.guest,this.booking_nbr??null);this.toast.emit({type:"success",description:"",title:"Saved Successfully",position:"top-right"});this.resetBookingEvt.emit(null);this.guestChanged.emit(this.guest);this.guestInfoDrawerClosed.emit({source:null})}catch(e){console.error(e)}}render(){if(this.isLoading){return a("div",{class:"drawer__loader-container"},a("ir-spinner",null))}return a("form",{id:this.fromId,onSubmit:e=>{e.preventDefault();this.editGuest()},class:"guest-form__container"},a("ir-validator",{schema:_s.shape.first_name,value:this.guest?.first_name??"",autovalidate:this.autoValidate,valueEvent:"text-change input input-change",blurEvent:"input-blur blur"},a("ir-input",{id:"firstName",value:this.guest?.first_name,defaultValue:this.guest?.first_name,required:true,"onText-change":e=>this.handleInputChange({first_name:e.detail.trim()}),label:M.entries?.Lcz_FirstName})),a("ir-validator",{schema:_s.shape.last_name,value:this.guest?.last_name??"",autovalidate:this.autoValidate,valueEvent:"text-change input input-change",blurEvent:"input-blur blur"},a("ir-input",{value:this.guest?.last_name,required:true,defaultValue:this.guest?.last_name,id:"lastName","onText-change":e=>this.handleInputChange({last_name:e.detail.trim()}),label:M.entries?.Lcz_LastName})),a("ir-validator",{schema:_s.shape.email,value:this.guest?.email??"",autovalidate:this.autoValidate,valueEvent:"text-change input input-change",blurEvent:"input-blur blur"},a("ir-input",{label:M.entries?.Lcz_Email,id:"email",defaultValue:this.guest?.email,value:this.guest?.email,required:true,"onText-change":e=>{const t=e.detail.replace(/(?<=^[^@]*)\s+(?=[^@]*@noemail\.com$)/g,"").trim();this.handleInputChange({email:t})}})),a("ir-validator",{schema:_s.shape.alternative_email,value:this.guest?.alternative_email??"",autovalidate:this.autoValidate,valueEvent:"text-change input input-change",blurEvent:"input-blur blur"},a("ir-input",{label:M.entries?.Lcz_AlternativeEmail,id:"altEmail",value:this.guest?.alternative_email,"onText-change":e=>{const t=e.detail.replace(/(?<=^[^@]*)\s+(?=[^@]*@noemail\.com$)/g,"").trim();this.handleInputChange({alternative_email:t})}})),a("ir-validator",{schema:_s.shape.country_id,value:this.guest?.country_id??undefined,autovalidate:this.autoValidate,valueEvent:"countryChange"},a("ir-country-picker",{size:"small",variant:"modern",country:this.countries.find((e=>e.id===this.guest?.country_id)),label:M.entries?.Lcz_Country,onCountryChange:e=>{const t=e.detail;let a={country_id:t.id};if(!this.guest?.mobile){a={...a,country_phone_prefix:t.phone_prefix}}this.handleInputChange(a)},countries:this.countries})),a("ir-validator",{schema:Z.object({mobile:_s.shape.mobile,phone_prefix:_s.shape.country_phone_prefix}),value:{mobile:this.guest?.mobile??"",phone_prefix:this.guest?.country_phone_prefix},autovalidate:this.autoValidate,valueEvent:"mobile-input-change"},a("ir-mobile-input",{size:"small","onMobile-input-change":e=>{this.handleInputChange({mobile:e.detail.formattedValue.trim()})},"aria-invalid":"true","onMobile-input-country-change":e=>this.handleInputChange({country_phone_prefix:e.detail.phone_prefix}),value:this.guest?.mobile??"",required:true,countryCode:this.countries.find((e=>e.phone_prefix?.toString()===this.guest?.country_phone_prefix?.toString()))?.code,countries:this.countries})),a("ir-validator",{schema:_s.shape.notes,value:this.guest?.notes??"",autovalidate:this.autoValidate,valueEvent:"wa-change change input",blurEvent:"wa-blur blur"},a("wa-textarea",{size:"small",onchange:e=>this.handleInputChange({notes:e.target.value}),value:this.guest?.notes??"",label:M.entries?.Lcz_PrivateNote})))}static get watchers(){return{ticket:["ticketChanged"]}}};Cs.style=Ds;const Ms=".sc-ir-icon-h{margin:0;padding:0}.icon-button.sc-ir-icon{all:unset;margin:0;padding:0;color:#6b6f82}.icon-button.sc-ir-icon:hover{cursor:pointer;color:#104064}";const Ys=Ms;const Ss=class{constructor(a){e(this,a);this.iconClickHandler=t(this,"iconClickHandler",7)}icon="ft-check";type="button";iconClickHandler;render(){return a("button",{key:"35d0ecf27190dd0a652dc0c7e18109b044a58181",type:this.type,class:"icon-button",onClick:()=>this.iconClickHandler.emit()},a("slot",{key:"3cdc283ff8533c3bfcc501e7e059417d2f4853f4",name:"icon"}))}};Ss.style=Ys;const Es=".sc-ir-icons-h{display:block;box-sizing:border-box;margin:0;padding:0}.icon.sc-ir-icons{height:var(--icon-size, 1.25rem);width:var(--icon-size, 1.25rem);margin:0;padding:0}";const Is=Es;const Ts=class{constructor(t){e(this,t)}name;svgClassName;color;render(){const e=ze[this.name]||null;if(!e){return null}return a("svg",{xmlns:"http://www.w3.org/2000/svg",color:this.color,viewBox:e.viewBox,class:`icon ${this.svgClassName}`},a("path",{fill:"currentColor",d:e.d}))}};Ts.style=Is;const Os={price:{mask:Number,scale:2,radix:".",mapToRadix:[","],normalizeZeros:true,padFractionalZeros:true,thousandsSeparator:","},url:{mask:/^\S*$/,overwrite:false,prepare(e){return e.replace(/^https?:\/\//i,"")},commit(e,t){t._value="https://"+e.replace(/^https?:\/\//i,"")}},time:{mask:"HH:mm",blocks:{HH:{mask:Oe,from:0,to:23,placeholderChar:"H"},mm:{mask:Oe,from:0,to:59,placeholderChar:"m"}},lazy:false,placeholderChar:"_"},date:{mask:Date,pattern:"DD/MM/YYYY",lazy:false,min:me("1900-01-01","YYYY-MM-DD").toDate(),max:new Date,format:e=>me(e).format("DD/MM/YYYY"),parse:e=>me(e,"DD/MM/YYYY").toDate(),autofix:true,placeholderChar:"_",blocks:{YYYY:{mask:Oe,from:1900,to:me().format("YYYY"),placeholderChar:"Y"},MM:{mask:Oe,from:1,to:12,placeholderChar:"M"},DD:{mask:Oe,from:1,to:31,placeholderChar:"D"}}}};const zs=":host{display:block}:host([aria-invalid='true']) wa-input::part(base),wa-input[aria-invalid='true']::part(base){border-color:var(--wa-color-danger-border-loud);outline-color:var(--wa-color-danger-border-loud);border-width:2px}";const As=zs;const Bs=class{constructor(a){e(this,a);this.textChange=t(this,"text-change",7);this.inputBlur=t(this,"input-blur",7);this.inputFocus=t(this,"inputFocus",7);if(a.$hostElement$["s-ei"]){this.internals=a.$hostElement$["s-ei"]}else{this.internals=a.$hostElement$.attachInternals();a.$hostElement$["s-ei"]=this.internals}}internals;get el(){return r(this)}name;value="";type="text";defaultValue;size="small";appearance;pill;returnMaskedValue=false;label;hint;withClear;placeholder;readonly;passwordToggle;passwordVisible;withoutSpinButtons;form;required;pattern;minlength;maxlength;min;max;step;autocapitalize;autocorrect;autocomplete="off";autofocus;enterkeyhint;spellcheck;inputmode;withLabel;withHint;mask;disabled;inputClass;textChange;inputBlur;inputFocus;isValid=true;slotState=new Map;_mask;inputRef;animationFrame;slotObserver;SLOT_NAMES=["label","start","end","clear-icon","hide-password-icon","show-password-icon","hint"];componentWillLoad(){if(this.mask==="price"&&typeof this.mask==="string"){this.returnMaskedValue=true}this.updateSlotState()}componentDidLoad(){if(this.disabled){this.inputRef.disabled=this.disabled}this.initializeMask();this.setupSlotListeners()}disconnectedCallback(){this.destroyMask();this.removeSlotListeners()}handleDisabledChange(e,t){if(e!==t){this.inputRef.disabled=e}}handleMaskPropsChange(){if(!this.inputRef)return;const e=Boolean(this.resolveMask());if(!e){this.destroyMask();return}this.rebuildMask()}handleAriaInvalidChange(e){this.isValid=!JSON.parse(e)}handleValueChange(e,t){if(e!==t){if(this._mask&&this.returnMaskedValue&&this._mask.value!==e){this._mask.value=e;this._mask.updateValue()}}}handleInput=e=>{if(e===this.value){return}if(!this.mask){this.value=e??""}this.internals.setFormValue(e??"");this.textChange.emit(e??"")};async initializeMask(){if(!this.inputRef)return;const e=this.buildMaskOptions();if(!e)return;await customElements.whenDefined("wa-input");await this.inputRef.updateComplete;const t=this.inputRef.input;if(!t)return;this._mask=Te(t,e);if(this.value){if(this.returnMaskedValue){this._mask.unmaskedValue=this.value}else{this._mask.value=this.value}}this._mask.on("accept",(()=>{const e=this.inputRef.value.trim()===""||this._mask.unmaskedValue==="";const t=e?"":this.returnMaskedValue?this._mask.unmaskedValue:this._mask.value;this.handleInput(t)}))}setupSlotListeners(){this.el.addEventListener("slotchange",this.handleSlotChange);this.slotObserver=new MutationObserver(this.handleSlotChange);this.slotObserver.observe(this.el,{childList:true,subtree:true,attributes:true,attributeFilter:["slot"]})}removeSlotListeners(){this.el.removeEventListener("slotchange",this.handleSlotChange);this.slotObserver?.disconnect()}handleSlotChange=()=>{this.updateSlotState()};updateSlotState(){const e=new Map;this.SLOT_NAMES.forEach((t=>{e.set(t,this.hasSlot(t))}));this.slotState=e}rebuildMask(){this.destroyMask();this.initializeMask()}destroyMask(){this._mask?.destroy();this._mask=undefined;this.clearAnimationFrame()}clearAnimationFrame(){if(this.animationFrame){cancelAnimationFrame(this.animationFrame);this.animationFrame=undefined}}buildMaskOptions(){const e=this.resolveMask();if(!e)return;const t=typeof e==="object"&&e!==null&&!Array.isArray(e)?{...e}:{mask:e};if(this.min!==undefined){t.min=this.min}if(this.max!==undefined){t.max=this.max}return t}resolveMask(){if(!this.mask)return;if(typeof this.mask==="string"){return Os[this.mask]}return this.mask}handleChange=e=>{e.stopImmediatePropagation();e.stopPropagation();if(!this.mask)this.handleInput(e.target.value)};handleClear=e=>{e.stopImmediatePropagation();e.stopPropagation();if(this._mask){this._mask.value=""}this.handleInput("")};handleBlur=e=>{e.stopImmediatePropagation();e.stopPropagation();this.inputBlur.emit()};handleFocus=e=>{e.stopImmediatePropagation();e.stopPropagation();this.inputFocus.emit()};hasSlot(e){return!!this.el.querySelector(`[slot="${e}"]`)}async focusInput(){console.log(this.inputRef);this.inputRef?.focus()}async blurInput(){this.inputRef?.blur()}render(){let e=this.value;if(this._mask&&this.returnMaskedValue){e=this._mask.value}return a(i,{key:"f2ca5db52a3b70e41141d629c73937022cdf1f47"},a("wa-input",{key:"64f71e2bfee66e18d33cd1a75354dd68fc2762ae",type:this.type,name:this.name,value:e,ref:e=>this.inputRef=e,defaultValue:this.defaultValue,size:this.size,appearance:this.appearance,pill:this.pill,"aria-invalid":String(!this.isValid),label:this.label,hint:this.hint,withClear:this.withClear,placeholder:this.placeholder,readonly:this.readonly,passwordToggle:this.passwordToggle,passwordVisible:this.passwordVisible,withoutSpinButtons:this.withoutSpinButtons,form:this.form,required:this.required,pattern:this.pattern,minlength:this.minlength,maxlength:this.maxlength,min:this.min,max:this.max,step:this.step,class:this.inputClass,autocapitalize:this.autocapitalize,autocorrect:this.autocorrect,autocomplete:this.autocomplete,autofocus:this.autofocus,enterkeyhint:this.enterkeyhint,spellcheck:this.spellcheck,inputmode:this.inputmode,withLabel:this.withLabel,withHint:this.withHint,oninput:this.handleChange,"onwa-clear":this.handleClear,onblur:this.handleBlur,onfocus:this.handleFocus,exportparts:"base, hint, label, input, start, end, clear-button, password-toggle-button"},this.slotState.get("label")&&a("slot",{key:"e087226de7a9010d70848d2ce0180680cc0e1a9f",name:"label",slot:"label"}),this.slotState.get("start")&&a("slot",{key:"d507cfebf7d3d80df85d5396d3f40573f5d4c2fe",name:"start",slot:"start"}),this.slotState.get("end")&&a("slot",{key:"56729d59c9727b20cf33d588eb1a6eb27e2c7392",name:"end",slot:"end"}),this.slotState.get("clear-icon")&&a("slot",{key:"e9f7a758085d382afb96a141a1b21b701a961d76",name:"clear-icon",slot:"clear-icon"}),this.slotState.get("hide-password-icon")&&a("slot",{key:"eefc99d494f32b0595e101bd2f9cee90c8b021b5",name:"hide-password-icon",slot:"hide-password-icon"}),this.slotState.get("show-password-icon")&&a("slot",{key:"41a54c4b65ec2bcd8878dd4880ac7748017b3786",name:"show-password-icon",slot:"show-password-icon"}),this.slotState.get("hint")&&a("slot",{key:"825a748bdcc1413935dfeadce5a2b84318f1761f",name:"hint",slot:"hint"})))}static get formAssociated(){return true}static get watchers(){return{disabled:["handleDisabledChange"],mask:["handleMaskPropsChange"],min:["handleMaskPropsChange"],max:["handleMaskPropsChange"],"aria-invalid":["handleAriaInvalidChange"],value:["handleValueChange"]}}};Bs.style=As;const Rs=".sc-ir-input-text-h{--ir-bg:#fff;--ir-primary:#1e9ff2;--ir-danger:#ff4961;--ir-border:#cacfe7;--ir-disabled-fg:#9aa1ac;--ir-readonly-bg:#f8f9fa;--ir-input-color:#3b4781;--ir-placeholder-color:#bbbfc6;--ir-floating-input-border:var(--ir-border);--ir-floating-input-border-radius:0.21rem;--ir-floating-input-height:2rem;--ir-focus-ring:none;--ir-focus-border-color:var(--ir-primary);--ir-floating-input-font-size:0.975rem;--ir-floating-input-line-height:1.45;--ir-floating-input-padding-y:0.75rem;--ir-floating-input-padding-x:1rem;--ir-floating-input-padding-x-with-affix:2rem;--ir-floating-label-fg:#6c757d;--ir-floating-label-fg-focus:#495057;--ir-floating-label-bg:#fff;--ir-floating-label-scale:0.88;--ir-floating-label-float-translateY:-70%;--ir-floating-label-resting-offset-inline:0.9rem;--ir-floating-label-resting-offset-inline-with-prefix:1.8rem;--ir-floating-input-affix-size:1rem;--ir-floating-input-affix-color:#6c757d;margin:0;padding:0;display:inline}.sc-ir-input-text-h{--blue:var(--ir-primary);--red:var(--ir-danger)}.border-theme.sc-ir-input-text{border:1px solid var(--ir-border)}.icon-container.sc-ir-input-text{color:#3b4781;border:1px solid var(--ir-border);font-size:var(--ir-floating-input-font-size);height:var(--ir-floating-input-height);background:var(--ir-bg);padding-right:0 !important;border-right:0;border-top-right-radius:0;border-bottom-right-radius:0;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}input.sc-ir-input-text:focus{border-color:var(--ir-primary) !important}.error-message.sc-ir-input-text{font-size:0.875rem;padding:0;margin:0.5rem 0 0;color:var(--ir-danger)}.ir-input[data-state='empty'].sc-ir-input-text{color:var(--ir-placeholder-color)}.input-container.sc-ir-input-text{display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;flex:1}.input-container.sc-ir-input-text input.sc-ir-input-text{padding-left:5px !important;padding-right:5px !important;border-left:0;border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.icon-container[data-state='focus'].sc-ir-input-text{border-color:var(--ir-primary)}.icon-container[data-disabled].sc-ir-input-text{background-color:#eceff1;border-color:rgba(118, 118, 118, 0.3)}.danger-border.sc-ir-input-text{border-color:var(--ir-danger)}.ir-floating-group.sc-ir-input-text{position:relative;display:block;border:1px solid var(--ir-floating-input-border);border-radius:var(--ir-floating-input-border-radius);background:var(--ir-bg);transition:border-color 120ms ease, box-shadow 120ms ease;padding:0}.ir-floating-group.sc-ir-input-text:focus-within{border-color:var(--ir-focus-border-color);box-shadow:var(--ir-focus-ring)}.ir-floating-group.has-error.sc-ir-input-text,.has-error.sc-ir-input-text .ir-floating-group.sc-ir-input-text{border-color:var(--ir-danger)}.ir-floating-group.is-disabled.sc-ir-input-text{background-color:#f1f3f5}.ir-floating-group.is-readonly.sc-ir-input-text{background-color:var(--ir-readonly-bg)}.ir-floating-input.sc-ir-input-text{width:100%;display:block;border:0;outline:0;background:transparent;color:var(--ir-input-color);font-size:var(--ir-floating-input-font-size);line-height:var(--ir-floating-input-line-height);border-radius:var(--ir-floating-input-border-radius);box-shadow:none;padding:var(--ir-floating-input-padding-y) var(--ir-floating-input-padding-x);height:var(--ir-floating-input-height)}.ir-floating-input.danger-border.sc-ir-input-text{box-shadow:none}.ir-floating-label.sc-ir-input-text{position:absolute;top:50%;transform:translateY(-50%);pointer-events:none;padding:0 0.4rem;color:var(--ir-floating-label-fg);background:transparent;transition:transform 120ms ease, color 120ms ease, top 120ms ease, background-color 120ms ease, opacity 120ms ease;opacity:0.95;line-height:1}.ir-floating-label.sc-ir-input-text:dir(rtl){right:var(--ir-floating-label-resting-offset-inline)}.ir-floating-label.sc-ir-input-text:dir(ltr){left:var(--ir-floating-label-resting-offset-inline)}.ir-floating-group.sc-ir-input-text:focus-within .ir-floating-label.sc-ir-input-text,.ir-floating-input.sc-ir-input-text:not(:placeholder-shown)+.ir-floating-label.sc-ir-input-text,.ir-floating-group[data-has-value='true'].sc-ir-input-text .ir-floating-label.sc-ir-input-text{top:0;transform:translateY(var(--ir-floating-label-float-translateY)) scale(var(--ir-floating-label-scale));background:var(--ir-floating-label-bg);color:var(--ir-floating-label-fg-focus);font-size:12px;padding:0}.ir-floating-group.has-error.sc-ir-input-text .ir-floating-label.sc-ir-input-text,.has-error.sc-ir-input-text .ir-floating-group.sc-ir-input-text .ir-floating-label.sc-ir-input-text{color:var(--ir-danger)}.ir-floating-group.is-disabled.sc-ir-input-text .ir-floating-label.sc-ir-input-text{color:var(--ir-disabled-fg)}@supports (-webkit-touch-callout: none){.ir-floating-input.sc-ir-input-text{border-radius:var(--ir-floating-input-border-radius)}}.prefix-container.sc-ir-input-text,.suffix-container.sc-ir-input-text{position:absolute;top:0;bottom:0;display:inline-flex;align-items:center;color:var(--ir-floating-input-affix-color);pointer-events:none}.prefix-container.sc-ir-input-text:dir(ltr){left:0.5rem}.suffix-container.sc-ir-input-text:dir(ltr){right:0.5rem}.prefix-container.sc-ir-input-text:dir(rtl){right:0.5rem}.suffix-container.sc-ir-input-text:dir(rtl){left:0.5rem}.sc-ir-input-text-s>[slot='prefix'],.sc-ir-input-text-s>[slot='suffix']{display:inline-flex;width:var(--ir-floating-input-affix-size);height:var(--ir-floating-input-affix-size)}.ir-floating-group[data-have-prefix='true'].sc-ir-input-text .ir-floating-input.sc-ir-input-text{padding:var(--ir-floating-input-padding-y) var(--ir-floating-input-padding-x-with-affix)}.ir-floating-group[data-have-prefix='true'].sc-ir-input-text .ir-floating-label.sc-ir-input-text:dir(ltr){left:var(--ir-floating-label-resting-offset-inline-with-prefix)}.ir-floating-group[data-have-prefix='true'].sc-ir-input-text .ir-floating-label.sc-ir-input-text:dir(rtl){right:var(--ir-floating-label-resting-offset-inline-with-prefix)}.no-slot.sc-ir-input-text{display:none}";const Ns=Rs;const $s=class{constructor(a){e(this,a);this.textChange=t(this,"textChange",7);this.inputBlur=t(this,"inputBlur",7);this.inputFocus=t(this,"inputFocus",7)}get el(){return r(this)}name;value;label;placeholder;inputStyles="";required;readonly=false;type="text";submitted=false;inputStyle=true;textSize="md";labelPosition="left";labelBackground=null;labelColor="dark";labelBorder="theme";labelWidth=3;variant="default";disabled=false;error=false;mask;autoValidate=true;zod;asyncParse;wrapKey;inputForcedStyle;testId;maxLength;clearBaseStyles;errorMessage;autoComplete;inputContainerStyle;labelContainerClassname;inputFocused=false;textChange;inputBlur;inputFocus;inputRef;maskInstance;id;hasPrefixSlot;hasSuffixSlot;componentWillLoad(){if(this.el.id){this.id=this.el.id}else{this.id=ae()}this.hasPrefixSlot=this.haveSlotPresent("prefix");this.hasSuffixSlot=this.haveSlotPresent("suffix")}componentDidLoad(){if(this.mask)this.initMask()}handleMaskChange(){this.initMask()}handleValueChange(e,t){if(e!==t){this.validateInput(this.value)}}initMask(){if(!this.mask||this.maskInstance){return}this.maskInstance=Te(this.inputRef,this.mask);this.maskInstance.on("accept",(()=>{const e=this.inputRef.value.trim()===""||this.maskInstance.unmaskedValue==="";if(e){this.inputRef.value="";this.textChange.emit(null)}else{this.inputRef.value=this.maskInstance.value;this.textChange.emit(this.maskInstance.value)}}))}haveSlotPresent(e){const t=this.el.querySelector(`[slot="${e}"]`);return t!==null}async validateInput(e,t=false){if(!this.autoValidate&&!t){if(this.error){this.updateErrorState(false)}return}if(this.zod){try{if(!this.asyncParse){this.zod.parse(this.wrapKey?{[this.wrapKey]:e}:e)}else{await this.zod.parseAsync(this.wrapKey?{[this.wrapKey]:e}:e)}if(this.error){this.updateErrorState(false)}}catch(e){console.log(e);this.updateErrorState(true)}}}handleInputChange(e){const t=e.target.value;const a=t==="";if(this.maskInstance){this.maskInstance.value=t}const i=a?null:this.maskInstance?this.maskInstance.value:t;this.textChange.emit(i)}updateErrorState(e){this.error=e;this.inputRef.setAttribute("aria-invalid",e?"true":"false")}handleBlur(e){this.validateInput(this.value,this.submitted);this.inputFocused=false;this.inputBlur.emit(e)}renderFloatingLabel(){const e=this.label||this.placeholder||"";const t=!!(this.value&&String(this.value).length>0);return a("div",{class:"form-group",style:this.inputContainerStyle},a("div",{class:`ir-floating-group ${this.error?"has-error":""} ${this.disabled?"is-disabled":""} ${this.readonly?"is-readonly":""}`,"data-has-value":String(t),"data-focused":String(this.inputFocused),"data-have-prefix":String(this.hasPrefixSlot),"data-have-suffix":String(this.hasSuffixSlot),part:"form-group"},a("span",{part:"prefix-container",class:{"prefix-container":true,"no-slot":!this.hasPrefixSlot}},a("slot",{name:"prefix"})),a("input",{part:"input","data-state":!!this.value?undefined:this.mask?"empty":undefined,maxLength:this.maxLength,"data-testid":this.testId,style:this.inputForcedStyle,id:this.id,name:this.name,ref:e=>this.inputRef=e,readOnly:this.readonly,type:this.type,class:`ir-input ir-floating-input ${this.inputStyles||""} ${this.error?"danger-border":""} text-${this.textSize}`,onBlur:this.handleBlur.bind(this),onFocus:e=>{this.inputFocused=true;this.inputFocus.emit(e)},placeholder:" ",autoComplete:this.autoComplete,autocomplete:this.autoComplete,value:this.value,onInput:this.handleInputChange.bind(this),required:this.required,disabled:this.disabled,"aria-invalid":String(this.error),"aria-required":String(this.required)}),a("label",{part:"label",htmlFor:this.id,class:"ir-floating-label"},e,this.required?" *":""),a("span",{part:"suffix-container",class:{"suffix-container":true,"no-slot":!this.hasSuffixSlot}},a("slot",{name:"suffix"}))),this.errorMessage&&this.error&&a("p",{part:"error-message",class:"error-message"},this.errorMessage))}render(){if(this.variant==="floating-label"){return this.renderFloatingLabel()}if(this.variant==="icon"){return a("fieldset",{class:"position-relative has-icon-left input-container"},a("label",{htmlFor:this.id,class:"input-group-prepend bg-white m-0"},a("span",{"data-disabled":this.disabled,"data-state":this.inputFocused?"focus":"",class:`input-group-text icon-container bg-white ${this.error?"danger-border":""}`,id:"basic-addon1"},a("slot",{name:"icon"}))),a("input",{maxLength:this.maxLength,"data-testid":this.testId,style:this.inputForcedStyle,"data-state":!!this.value?undefined:this.mask?"empty":undefined,id:this.id,ref:e=>this.inputRef=e,readOnly:this.readonly,type:this.type,class:`ir-input form-control bg-white pl-0 input-sm rate-input py-0 m-0 rateInputBorder ${this.error?"danger-border":""}`,onBlur:this.handleBlur.bind(this),onFocus:e=>{this.inputFocused=true;this.inputFocus.emit(e)},placeholder:this.placeholder,value:this.value,onInput:this.handleInputChange.bind(this),required:this.required,disabled:this.disabled,autoComplete:this.autoComplete}))}return a("div",{class:"form-group",style:this.inputContainerStyle},a("div",{class:"input-group row m-0"},this.label&&a("div",{class:`input-group-prepend col-${this.labelWidth} ${this.labelContainerClassname} p-0 text-${this.labelColor}`},a("label",{htmlFor:this.id,class:`input-group-text ${this.labelPosition==="right"?"justify-content-end":this.labelPosition==="center"?"justify-content-center":""} ${this.labelBackground?"bg-"+this.labelBackground:""} flex-grow-1 text-${this.labelColor} border-${this.labelBorder==="none"?0:this.labelBorder} `},this.label,this.required?"*":"")),a("input",{maxLength:this.maxLength,"data-testid":this.testId,style:this.inputForcedStyle,"data-state":!!this.value?undefined:this.mask?"empty":undefined,id:this.id,ref:e=>this.inputRef=e,readOnly:this.readonly,type:this.type,class:this.clearBaseStyles?`${this.inputStyles}`:`${this.error?"border-danger":""} form-control text-${this.textSize} col-${this.label?12-this.labelWidth:12} ${this.readonly?"bg-white":""} ${this.inputStyles}`,onBlur:this.handleBlur.bind(this),onFocus:e=>{this.inputFocused=true;this.inputFocus.emit(e)},placeholder:this.placeholder,autoComplete:this.autoComplete,autocomplete:this.autoComplete,value:this.value,onInput:this.handleInputChange.bind(this),required:this.required,disabled:this.disabled})),this.errorMessage&&this.error&&a("p",{class:"error-message"},this.errorMessage))}static get watchers(){return{mask:["handleMaskChange"],value:["handleValueChange"]}}};$s.style=Ns;const Ls=".sc-ir-interactive-title-h{display:block;width:100%;--hk-green:green}*.sc-ir-interactive-title{box-sizing:border-box}.popover-title.sc-ir-interactive-title{position:relative;width:100%;height:100%;margin:0;padding:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;z-index:10;left:0;display:flex;align-items:center}.popover-container.sc-ir-interactive-title{position:absolute;bottom:0px;left:var(--ir-popover-left, 10px);background:rgb(0, 0, 0);color:white;min-width:100%;box-shadow:rgba(0, 0, 0, 0.2) 0px 2px 10px;z-index:9999;padding:3.5px 7px;border-radius:5px;pointer-events:none;opacity:0;transition:all 100ms ease;font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;font-style:normal;font-weight:400;line-height:1.45;text-decoration:none;text-shadow:none;font-size:0.875rem}.popover-container[data-state='show'].sc-ir-interactive-title{opacity:1}.hk-dot.sc-ir-interactive-title{inset:0;position:absolute;display:flex;align-items:center;justify-content:center;width:fit-content;padding:4px;left:auto;transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;padding-inline:var(--ir-popover-left);background:var(--ir-interactive-hk-bg, var(--wa-color-surface-default));color:var(--dot-color, var(--wa-color-text-normal))}.hk-dot.sc-ir-interactive-title-s>*[name='end']{height:12px}";const Ps=Ls;const Hs=class{constructor(t){e(this,t)}get el(){return r(this)}popoverTitle="";irPopoverLeft="10px";hkStatus=false;cropSize=20;broomTooltip;lastRenderedTitle="";titleContainerRef;popoverInstance;initializePopoverIfNeeded(e,t){if(this.lastRenderedTitle===t&&this.popoverInstance){return}this.disposePopover();const a=document.createElement("span");a.style.visibility="hidden";a.style.position="absolute";a.style.whiteSpace="nowrap";a.textContent=t;document.body.appendChild(a);const i=a.offsetWidth;document.body.removeChild(a);const r=e.clientWidth;const o=this.hkStatus?20:0;const n=i+o>r;if(n&&typeof $!=="undefined"){try{this.popoverInstance=$(e).popover({trigger:"hover",content:t,placement:"top",html:false,sanitize:true,delay:{show:300,hide:100}})}catch(e){console.error("Failed to initialize popover:",e)}}this.lastRenderedTitle=t}disposePopover(){if(this.popoverInstance&&typeof $!=="undefined"){try{$(this.titleContainerRef).popover("dispose");this.popoverInstance=null}catch(e){console.error("Failed to dispose popover:",e)}}}disconnectedCallback(){this.disposePopover()}render(){const e=this.popoverTitle||"";const t=e.length>this.cropSize;const r=t?e.slice(0,this.cropSize)+"...":e;return a(i,{key:"46a246f74df2cf455a61409c64893f19b4845767",style:{"--ir-popover-left":this.irPopoverLeft}},a("p",{key:"4d15eb88adc3d0201d7f7e7611bcb9e55c8ededf",ref:t=>{this.titleContainerRef=t;if(t&&e){setTimeout((()=>this.initializePopoverIfNeeded(t,e)),0)}},class:"popover-title",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"flex",alignItems:"center",gap:"4px"}},a("span",{key:"f64fd75200d3dbb0447a11444d3562551e157ab0",class:"cropped-title",style:{flexShrink:"1",minWidth:"0",overflow:"hidden",textOverflow:"ellipsis"}},r),this.hkStatus&&a("div",{key:"34806eaf0fd2bd1cef6103acb82f0708828339ba",title:this.broomTooltip,class:"hk-dot",style:{flexShrink:"0"}},a("slot",{key:"a3560624bd22f96cb07d5efbb7e3a4551a833e4f",name:"end"}))))}};Hs.style=Ps;const Fs=".page-loader.sc-ir-interceptor{width:1.25rem;height:1.25rem;border:2.5px solid #3f3f3f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}.loaderContainer.sc-ir-interceptor{padding:20px;display:flex;align-items:center;justify-content:center;border-radius:5px;background:white}.loadingScreenContainer.sc-ir-interceptor{position:fixed;top:0;left:0;height:100vh;width:100vw;z-index:100000;background:rgba(0, 0, 0, 0.2);pointer-events:all;display:flex;align-items:center;justify-content:center}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const Us=Fs;const js=class{constructor(a){e(this,a);this.toast=t(this,"toast",7)}handledEndpoints=["/Get_Exposed_Calendar","/ReAllocate_Exposed_Room","/Get_Exposed_Bookings","/UnBlock_Exposed_Unit"];suppressToastEndpoints=[];isShown=false;isLoading=false;isUnassignedUnit=false;endpointsCount=0;isPageLoadingStopped=null;showModal;requestUrl;baseOTPUrl;email;toast;otpModal;pendingConfig;pendingResolve;pendingReject;response;handleStopPageLoading(e){this.isLoading=false;this.isPageLoadingStopped=e.detail}componentWillLoad(){this.setupAxiosInterceptors()}setupAxiosInterceptors(){ve.interceptors.request.use(this.handleRequest.bind(this),this.handleError.bind(this));ve.interceptors.response.use(this.handleResponse.bind(this),this.handleError.bind(this))}extractEndpoint(e){return e.split("?")[0]}isHandledEndpoint(e){return this.handledEndpoints.includes(e)}handleRequest(e){const t=this.extractEndpoint(e.url);Me[t]="pending";e.params=e.params||{};if(this.isHandledEndpoint(t)&&this.isPageLoadingStopped!==t){if(t!=="/Get_Exposed_Calendar"){this.isLoading=true}else{if(this.endpointsCount>0){this.isLoading=true}}}if(t==="/Get_Exposed_Calendar"){this.endpointsCount=this.endpointsCount+1}return e}async handleResponse(e){const t=this.extractEndpoint(e.config.url);if(this.isHandledEndpoint(t)){this.isLoading=false;this.isPageLoadingStopped=null}Me[t]="done";if(t==="/Validate_Exposed_OTP"){return e}if(e.data.ExceptionCode==="OTP"){return this.handleOtpResponse({response:e,extractedUrl:t})}if(e.data.ExceptionMsg?.trim()){this.handleResponseExceptions({response:e,extractedUrl:t})}return e}handleResponseExceptions({response:e,extractedUrl:t}){this.handleError(e.data.ExceptionMsg,t,e.data.ExceptionCode);throw new Ae(e.data.ExceptionMsg,e.data.ExceptionCode)}handleOtpResponse({extractedUrl:e,response:t}){this.showModal=true;this.email=t.data.ExceptionMsg;const a=e.slice(1);this.baseOTPUrl=a;if(a==="Check_OTP_Necessity"){let e;try{const a=typeof t.config.data==="string"?JSON.parse(t.config.data):t.config.data;e=a.METHOD_NAME}catch(t){console.error("Failed to parse request body for METHOD_NAME",t);e=a}this.requestUrl=e}else{this.requestUrl=a}this.pendingConfig=t.config;this.response=t;return new Promise(((e,t)=>{this.pendingResolve=e;this.pendingReject=t;setTimeout((()=>{this.otpModal?.openModal()}),10)}))}handleError(e,t,a){const i=this.suppressToastEndpoints.includes(t);if(!i||i&&!a){this.toast.emit({type:"error",title:e,description:"",position:"top-right"})}return Promise.reject(e)}async handleOtpFinished(e){if(!this.pendingConfig||!this.pendingResolve||!this.pendingReject){return}const{otp:t,type:a}=e.detail;if(a==="cancel"){const e={config:this.pendingConfig,data:{cancelled:true,baseOTPUrl:this.baseOTPUrl},status:0,statusText:"OTP Cancelled",headers:{},request:{}};this.pendingResolve(e)}else if(a==="success"){if(!t){this.pendingReject(new Error("OTP cancelled by user"))}else if(this.baseOTPUrl==="Check_OTP_Necessity"){this.pendingResolve(this.response)}else{try{const e={...this.pendingConfig,data:typeof this.pendingConfig.data==="string"?JSON.parse(this.pendingConfig.data):this.pendingConfig.data||{}};const t=await ve.request(e);this.pendingResolve(t)}catch(e){this.pendingReject(e)}}}this.pendingConfig=undefined;this.pendingResolve=undefined;this.pendingReject=undefined;this.showModal=false;this.baseOTPUrl=null}render(){return a(i,{key:"19baf14089805b6f48cee7c054c32550899f19a1"},this.isLoading&&!this.isPageLoadingStopped&&a("div",{key:"e93a9c22cbfaa4279fbdab3c52fb692d2b63f645",class:"loadingScreenContainer"},a("div",{key:"84ec980856d3310a3a2fcf2490e5f01d814fcc20",class:"loaderContainer"},a("ir-spinner",{key:"6038baf4ae28894839168a8527dc85c8f45136d3"}))),this.showModal&&a("ir-otp-modal",{key:"79ad5c817f25710bdc7f8880c87cfe597f79f1a3",email:this.email,baseOTPUrl:this.baseOTPUrl,requestUrl:this.requestUrl,ref:e=>this.otpModal=e,onOtpFinished:this.handleOtpFinished.bind(this)}))}};js.style=Us;const Vs="";const Gs=Vs;const qs=class{constructor(a){e(this,a);this.invoiceOpen=t(this,"invoiceOpen",7);this.invoiceClose=t(this,"invoiceClose",7)}open;booking;for="booking";roomIdentifier;autoPrint=false;invoiceInfo;invoiceOpen;invoiceClose;invoice=null;async openDrawer(){this.open=true;this.invoiceOpen.emit()}async closeDrawer(){this.open=false;this.invoiceClose.emit()}viewMode="invoice";isLoading;_id=`invoice-form__${ae()}`;componentWillLoad(){if(this.booking){if(me().isBefore(me(this.booking.from_date,"YYYY-MM-DD"),"dates")&&this.viewMode==="invoice"){this.viewMode="proforma"}}}handleBookingChange(){if(!this.booking){return}if(me().isBefore(me(this.booking.from_date,"YYYY-MM-DD"),"dates")&&this.viewMode==="invoice"){this.viewMode="proforma"}}render(){return a(i,{key:"ea21e550dc5d8ad29aab51c44b01eda4bcc7c21d"},a("ir-drawer",{key:"2892636d9c1532f70b42a7d2c66e06f268fb9253",style:{"--ir-drawer-width":"40rem","--ir-drawer-background-color":"var(--wa-color-surface-default)","--ir-drawer-padding-left":"var(--spacing)","--ir-drawer-padding-right":"var(--spacing)","--ir-drawer-padding-top":"var(--spacing)","--ir-drawer-padding-bottom":"var(--spacing)"},label:"Issue Invoice",open:this.open,onDrawerHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.closeDrawer()}},a("div",{key:"898d4399149e19d12a2c175d86cab3dea1606c8a",class:"d-flex align-items-center",slot:"header-actions"},a("wa-switch",{key:"a9379369f90c692a513bae0b5bb5c51cdf93bcb4",defaultChecked:this.viewMode==="proforma",checked:this.viewMode==="proforma",onchange:e=>{if(e.target.checked){this.viewMode="proforma"}else{this.viewMode="invoice"}}},"Pro-forma")),this.open&&a("ir-invoice-form",{key:"6374445c76e30bea2f4b8a2500968d66454955f3",viewMode:this.viewMode,for:this.for,roomIdentifier:this.roomIdentifier,booking:this.booking,autoPrint:this.autoPrint,formId:this._id,onPreviewProformaInvoice:e=>this.invoice=e.detail.invoice,invoiceInfo:this.invoiceInfo,onLoadingChange:e=>this.isLoading=e.detail}),a("div",{key:"1e5db9247f75d55ab9ecb1e5fb746d181b1b27a2",slot:"footer",class:"ir__drawer-footer"},a("ir-custom-button",{key:"d31364e7ce4ab7098c2361ae07c0819fdbcacdf4",size:"medium",appearance:"filled",class:"w-100 flex-fill",variant:"neutral",onClickHandler:()=>{this.closeDrawer()}},"Cancel"),a("ir-custom-button",{key:"d0fc85d0dd1e58b0271f994507b732ad429a5d3d",disabled:this.invoiceInfo?.invoiceable_items?.filter((e=>e.is_invoiceable))?.length===0,loading:this.isLoading,value:"invoice",type:"submit",form:this._id,class:"w-100 flex-fill",size:"medium",variant:"brand",id:`confirm-btn_${this._id}`},"Confirm")),a("ir-preview-screen-dialog",{key:"004ea11c56bcc37d749990aeb8f342453baf1e5b",onOpenChanged:e=>{e.stopImmediatePropagation();e.stopPropagation();if(!e.detail){this.invoice=null}},open:this.invoice!==null},a("ir-proforma-invoice-preview",{key:"e6efb6a49db0588758c3aba57dedb67ba63ad002",invoice:this.invoice,property:S.property,booking:this.booking}))))}static get watchers(){return{booking:["handleBookingChange"]}}};qs.style=Gs;const Ks="@layer wa-utilities {\n  .sc-ir-invoice-form-h[size='small'],\n  .wa-size-s {\n    font-size: var(--wa-font-size-s);\n  }\n\n  .sc-ir-invoice-form-h[size='medium'],\n  .wa-size-m {\n    font-size: var(--wa-font-size-m);\n  }\n\n  .sc-ir-invoice-form-h[size='large'],\n  .wa-size-l {\n    font-size: var(--wa-font-size-l);\n  }\n}\n\n.sc-ir-invoice-form-h {\n  display: block;\n  height: 100%;\n}\n.ir-invoice__container.sc-ir-invoice-form {\n  display: grid;\n  gap: var(--wa-space-l);\n  box-sizing: border-box;\n}\n.ir-invoice__service.sc-ir-invoice-form:last-child {\n  border-bottom-left-radius: var(--wa-border-radius-m);\n  border-bottom-right-radius: var(--wa-border-radius-m);\n}\n.ir-invoice__service.sc-ir-invoice-form:first-child {\n  border-top-left-radius: var(--wa-border-radius-m);\n  border-top-right-radius: var(--wa-border-radius-m);\n  border-top: var(--wa-form-control-border-width) var(--wa-form-control-border-style) var(--wa-form-control-border-color);\n}\n.ir-invoice__service.sc-ir-invoice-form {\n  border-bottom: var(--wa-form-control-border-width) var(--wa-form-control-border-style) var(--wa-form-control-border-color);\n  border-left: var(--wa-form-control-border-width) var(--wa-form-control-border-style) var(--wa-form-control-border-color);\n  border-right: var(--wa-form-control-border-width) var(--wa-form-control-border-style) var(--wa-form-control-border-color);\n  background-color: var(--wa-color-surface-default);\n  \n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n  width: 100%;\n}\n.ir-invoice__service.sc-ir-invoice-form:not(:disabled):hover {\n  background-color: color-mix(in srgb, var(--wa-color-surface-default) 95%, var(--wa-color-mix-hover));\n}\n.ir-invoice__checkbox.sc-ir-invoice-form, .ir-invoice__checkbox.sc-ir-invoice-form::part(base) {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  box-sizing: border-box;\n}\n.ir-invoice__room-info.sc-ir-invoice-form {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  padding: 0.5rem;\n}\n.ir-invoice__checkbox.sc-ir-invoice-form::part(base) {\n  min-height: var(--wa-form-control-height);\n  padding: 0 var(--wa-form-control-padding-inline);\n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n  width: 100%;\n}\n.ir-invoice__checkbox.group.sc-ir-invoice-form::part(base) {\n  padding-block: var(--wa-form-control-padding-inline);\n  align-items: flex-start;\n}\n.ir-invoice__checkbox.sc-ir-invoice-form::part(label) {\n  display: flex;\n  width: 100%;\n}\n.ir-invoice__room-checkbox-container.sc-ir-invoice-form {\n  display: flex;\n  gap: 0.5rem;\n  width: 100%;\n  justify-content: space-between;\n  text-align: start;\n  align-items: center;\n}\n.ir-invoice__room-checkbox-container.group.sc-ir-invoice-form {\n  flex-direction: column;\n}\n.ir-invoice__checkbox-price.sc-ir-invoice-form {\n  font-weight: 700;\n  color: var(--wa-color-neutral-900);\n  white-space: nowrap;\n  text-align: right;\n  flex: 1 1 0%;\n}\n.ir-invoice__price-column.sc-ir-invoice-form {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  gap: 0.25rem;\n  min-width: fit-content;\n}\n.ir-invoice__reason.sc-ir-invoice-form {\n  color: var(--wa-color-gray-60);\n  font-size: 0.75rem;\n  line-height: 1.2;\n  text-align: right;\n}\n.ir-invoice__form-control-label.sc-ir-invoice-form {\n  display: inline-flex;\n  color: var(--wa-form-control-label-color);\n  font-weight: var(--wa-form-control-label-font-weight);\n  line-height: var(--wa-form-control-label-line-height);\n  margin-block-end: 0.5em;\n}\n.ir-invoice__reason.sc-ir-invoice-form {\n  color: var(--wa-color-danger-fill-loud);\n}";const Ws=Ks;const Xs=class{constructor(a){e(this,a);this.invoiceOpen=t(this,"invoiceOpen",7);this.invoiceClose=t(this,"invoiceClose",7);this.invoiceCreated=t(this,"invoiceCreated",7);this.previewProformaInvoice=t(this,"previewProformaInvoice",7);this.loadingChange=t(this,"loadingChange",7)}viewMode="invoice";formId;open;booking;for="booking";roomIdentifier;autoPrint=false;invoiceInfo;selectedRecipient;isLoading;selectedItemKeys=new Set;invoicableKey;toBeInvoicedItems;invoiceDate=me();notInvoiceableItemKeys=new Set;invoiceOpen;invoiceClose;invoiceCreated;previewProformaInvoice;loadingChange;room;confirmButtonRef;bookingService=new s;invoiceTarget;apiDisabledItemKeys=new Set;alreadyInvoicedItemKeys=new Set;componentWillLoad(){this.init()}componentDidLoad(){this.confirmButtonRef=document.querySelector(`#confirm-btn_${this.formId}`)}handleViewModeChange(){if(this.invoicableKey?.size){this.applyDefaultSelections(Array.from(this.invoicableKey.values()))}this.enforceNonInvoiceableSelections()}handleBookingChange(){if(this.booking){this.selectedRecipient=this.booking.guest.id.toString();if(this.for==="room"&&this.roomIdentifier){this.room=this.booking.rooms.find((e=>e.identifier===this.roomIdentifier))}}this.setUpDisabledItems()}handleInvoiceInfoChange(){this.setupInvoicables(this.invoiceInfo)}setUpDisabledItems(){if(!this.booking||!this.invoicableKey?.size){this.notInvoiceableItemKeys=new Set;return}const e=(this.invoiceDate??me()).clone().startOf("day");const t=new Set;const a=(a,i,r)=>{if(r?.checkedOut){return}if(typeof a!=="number"||!this.invoicableKey.has(a)||!i){return}const o=me(i,"YYYY-MM-DD",true);if(o.isValid()&&e.isBefore(o.clone().startOf("day"))){t.add(a)}};const i=this.booking.rooms??[];i.forEach((e=>{a(e.system_id,e.to_date,{checkedOut:e?.in_out?.code==="002"})}));const r=this.booking.pickup_info;if(r){a(r?.system_id,r?.from_date??r?.date)}(this.booking.extra_services??[]).forEach((e=>{a(e.system_id,e?.from_date??e.start_date??e.end_date??this.booking.from_date)}));const o=ie(i);if(o){const e=new Map(i.map((e=>[e.identifier,e])));o.heads.forEach((a=>{const i=o.chainOf.get(a)??[];if(i.length<=1){return}const r=i[i.length-1];const n=e.get(r);if(!n){return}const s=n.in_out?.code==="002";i.forEach((a=>{const i=e.get(a);if(!i||typeof i.system_id!=="number"||!this.invoicableKey.has(i.system_id)){return}if(s){t.delete(i.system_id);return}t.add(i.system_id)}))}))}this.notInvoiceableItemKeys=t;this.enforceNonInvoiceableSelections(this.getCombinedDisabledKeys(t))}enforceNonInvoiceableSelections(e){if(this.viewMode==="proforma"){return}const t=e??this.getCombinedDisabledKeys();if(!t.size){return}const a=new Set(this.selectedItemKeys);let i=false;t.forEach((e=>{if(a.delete(e)){i=true}}));if(i){this.syncSelectedItems(a)}}getCombinedDisabledKeys(e){const t=e??this.notInvoiceableItemKeys??new Set;const a=new Set(t);this.apiDisabledItemKeys.forEach((e=>a.add(e)));if(this.viewMode==="invoice"){this.alreadyInvoicedItemKeys.forEach((e=>a.add(e)))}return a}isAlreadyInvoiced(e){if(this.viewMode!=="invoice"||typeof e!=="number"){return false}return this.alreadyInvoicedItemKeys.has(e)}syncSelectedItems(e){this.selectedItemKeys=e;const t=[];e.forEach((e=>{const a=this.invoicableKey?.get(e);if(a){t.push(a)}}));this.toBeInvoicedItems=t;if(!this.confirmButtonRef){return}if(this.toBeInvoicedItems.length===0){this.confirmButtonRef.disabled=true}else{if(this.confirmButtonRef.disabled){this.confirmButtonRef.disabled=false}}}canInvoiceRoom(e){return Boolean(e&&this.invoicableKey?.has(e.system_id))}hasInvoiceableRooms(e){return e.some((e=>this.canInvoiceRoom(e)))}getInvoiceableRoomIds(e){const t=[];e.forEach((e=>{if(this.canInvoiceRoom(e)){t.push(e.system_id)}}));return t}async init(){try{this.isLoading=true;const[e,t]=await Promise.all([this.bookingService.getExposedBooking(this.booking.booking_nbr,"en",true),this.bookingService.getBookingInvoiceInfo({booking_nbr:this.booking.booking_nbr})]);this.booking={...e};this.setupInvoicables(t);if(this.booking){this.selectedRecipient=this.booking.guest.id.toString();if(this.for==="room"&&this.roomIdentifier){this.room=this.booking.rooms.find((e=>e.identifier===this.roomIdentifier))}}this.invoiceTarget=await this.bookingService.getSetupEntriesByTableName("_INVOICE_TARGET")}catch(e){console.error(e)}finally{this.isLoading=false}}setupInvoicables(e){const t=e?.invoiceable_items??[];const a=[];t.forEach((e=>{a.push([e.key,e]);if(typeof e.system_id==="number"&&e.system_id!==e.key){a.push([e.system_id,e])}}));this.invoicableKey=new Map(a);this.apiDisabledItemKeys=new Set(t.filter((e=>!e.is_invoiceable)).map((e=>this.getSelectableKey(e))));const i=[];t.forEach((e=>{if(e.reason?.code!=="001"){return}i.push(e.key);if(typeof e.system_id==="number"&&e.system_id!==e.key){i.push(e.system_id)}}));this.alreadyInvoicedItemKeys=new Set(i);this.applyDefaultSelections(t);this.setUpDisabledItems()}applyDefaultSelections(e){const t=this.viewMode==="proforma"?e.map((e=>this.getSelectableKey(e))):e.filter((e=>e.is_invoiceable&&e.reason?.code!=="001")).map((e=>this.getSelectableKey(e)));this.syncSelectedItems(new Set(t))}getSelectableKey(e){return typeof e.system_id==="number"?e.system_id:e.key}async handleConfirmInvoice(e=false){try{this.loadingChange.emit(true);const t=this.selectedRecipient?.startsWith("room__")?this.selectedRecipient.replace("room__","").trim():"";let a;const i=e=>{let t=this.invoiceTarget.find((t=>t.CODE_NAME===e));if(!t){throw new Error(`Invalid code ${e}`)}return{code:t.CODE_NAME,description:t.CODE_VALUE_EN}};if(this.selectedRecipient==="company"){a=i("002")}else{a=i("001")}const r={booking_nbr:this.booking.booking_nbr,currency:{id:this.booking.currency.id},Date:this.invoiceDate.format("YYYY-MM-DD"),items:this.toBeInvoicedItems,target:a,billed_to_name:t};if(e){this.previewProformaInvoice.emit({invoice:r});return}await this.bookingService.issueInvoice({is_proforma:e,property_id:S.property.id,invoice:r});const o=await this.bookingService.getBookingInvoiceInfo({booking_nbr:this.booking.booking_nbr});await this.openLastInvoice(o);this.invoiceCreated.emit(o);this.invoiceClose.emit()}catch(e){console.error(e)}finally{this.loadingChange.emit(false)}}async openLastInvoice(e){const t=e.invoices[e.invoices.length-1];const{My_Result:a}=await this.bookingService.printInvoice({property_id:S.property.id,mode:t?.credit_note?"creditnote":"invoice",invoice_nbr:t.nbr});window.open(a)}getMinDate(){if(this.for==="room"){return this.room.to_date}return this.booking.from_date}getMaxDate(){return me().format("YYYY-MM-DD")}computeRoomGroups(e){const t=new Map;e.forEach(((e,a)=>t.set(e.identifier,a)));if(!e.length){return{groups:[],indexById:t,hasSplitGroups:false}}const a=e=>{let t=Number.MAX_SAFE_INTEGER;for(const a of e){const e=Date.parse(a?.from_date??"");if(!Number.isNaN(e)){t=Math.min(t,e)}}return t};const i=ie(e);if(!i){const i=[...e].sort(((e,a)=>{const i=Date.parse(e?.from_date??"")-Date.parse(a?.from_date??"");if(!Number.isNaN(i)&&i!==0){return i}return(t.get(e.identifier)??0)-(t.get(a.identifier)??0)}));return{groups:[{rooms:i,order:0,isSplit:false,sortKey:a(i)}],indexById:t,hasSplitGroups:false}}const r=new Map(e.map((e=>[e.identifier,e])));const o=[];const n=new Set;for(const e of i.heads){const s=i.chainOf.get(e)??[e];const l=s.map((e=>r.get(e))).filter((e=>Boolean(e)));if(!l.length)continue;const c=s.some((e=>{const t=i.parentOf.get(e);const a=i.childrenOf.get(e)??[];return Boolean(t)||a.length>0}))||l.some((e=>Boolean(e?.is_split)));if(c){l.forEach((e=>n.add(e.identifier)));const e=Math.min(...l.map((e=>t.get(e.identifier)??Number.MAX_SAFE_INTEGER)));o.push({rooms:l,order:e,sortKey:a(l),isSplit:true})}}for(const i of e){if(!n.has(i.identifier)){const e=t.get(i.identifier)??Number.MAX_SAFE_INTEGER;const r=[i];o.push({rooms:r,order:e,sortKey:a(r),isSplit:false})}}o.sort(((e,t)=>{if(e.sortKey!==t.sortKey){return e.sortKey-t.sortKey}return e.order-t.order}));const s=o.some((e=>e.isSplit));if(!s){const e=o.map((e=>e.rooms)).reduce(((e,t)=>e.concat(t)),[]).sort(((e,a)=>{const i=Date.parse(e?.from_date??"")-Date.parse(a?.from_date??"");if(!Number.isNaN(i)&&i!==0){return i}return(t.get(e.identifier)??0)-(t.get(a.identifier)??0)}));return{groups:[{rooms:e,order:0,sortKey:a(e),isSplit:false}],indexById:t,hasSplitGroups:false}}return{groups:o,indexById:t,hasSplitGroups:true}}getDateView(e,t){if(!e){return}const i=me(e,"YYYY-MM-DD").format("MMM DD, YYYY");if(!t){return a("span",null,i)}const r=me(t,"YYYY-MM-DD").format("MMM DD, YYYY");return a("span",null,i," ",a("wa-icon",{name:"arrow-right"})," ",r)}renderReasonDescription(e){if(this.viewMode!=="invoice"||typeof e!=="number"||!this.invoicableKey?.size){return null}const t=this.invoicableKey.get(e);if(!t||t.is_invoiceable||!t.reason?.description){return null}return a("span",{class:"ir-invoice__reason"},t.reason.description)}renderPriceColumn(e,t){const i=typeof e==="number";const r=this.renderReasonDescription(t);if(!i&&!r){return null}const o=this.booking?.currency?.symbol??"";return a("div",{class:"ir-invoice__price-column"},i&&a("span",{class:"ir-invoice__checkbox-price"},E(o,e)),r)}handleCheckChange({checked:e,system_id:t,system_ids:a}){if(!this.invoicableKey){return}const i=[...Array.isArray(a)?a:[],...typeof t==="number"?[t]:[]].filter((e=>typeof e==="number"));if(!i.length){return}if(this.isDisabled(i)){return}const r=new Set(this.selectedItemKeys);let o=false;i.forEach((t=>{if(!this.invoicableKey.has(t)){return}if(e){if(!r.has(t)){r.add(t);o=true}}else if(r.delete(t)){o=true}}));if(o){this.syncSelectedItems(r)}}isSelected(e=[]){if(!e?.length){return false}for(const t of e){if(typeof t==="number"&&this.selectedItemKeys.has(t)){return true}}return false}isDisabled(e=[]){if(this.viewMode==="proforma"||!e?.length){return false}const t=this.getCombinedDisabledKeys();if(!t.size){return false}return e.some((e=>{if(typeof e!=="number"){return false}if(this.isAlreadyInvoiced(e)){return true}return t.has(e)}))}renderRooms(){const e=this.booking?.rooms??[];if(!e.length||!this.invoicableKey?.size){return null}const{groups:t,hasSplitGroups:i}=this.computeRoomGroups(e);if(!i){const e=t[0].rooms;const i=e.filter((e=>this.canInvoiceRoom(e)));if(!i.length){return null}return i.map((e=>{const t=this.isSelected([e.system_id]);const i=this.isDisabled([e.system_id]);return a("div",{class:"ir-invoice__service",key:e.identifier},a("wa-checkbox",{disabled:i,size:"small",onchange:t=>{const a=t.target.checked;this.handleCheckChange({checked:a,system_id:e.system_id})},defaultChecked:t,checked:t,class:"ir-invoice__checkbox"},a("div",{class:"ir-invoice__room-checkbox-container align-items-center"},a("div",{class:"ir-invoice__room-info"},a("span",null,a("b",null,e.roomtype.name),a("span",{style:{paddingLeft:"0.5rem"}},e.rateplan.short_name)),this.getDateView(e.from_date,e.to_date)),this.renderPriceColumn(e.gross_total,e.system_id))))}))}return t.map((e=>{if(!this.hasInvoiceableRooms(e.rooms)){return null}const t=this.getInvoiceableRoomIds(e.rooms);const i=this.isDisabled(t);const r=this.isSelected(t);return a("div",{class:"ir-invoice__service",key:e.order},a("wa-checkbox",{disabled:i,size:"small",onchange:e=>{const a=e.target.checked;this.handleCheckChange({checked:a,system_ids:t})},defaultChecked:r,checked:r,class:"ir-invoice__checkbox group"},a("div",{class:"ir-invoice__room-checkbox-container group"},e.rooms.map((e=>{if(!this.canInvoiceRoom(e)){return null}return a("div",{class:"d-flex align-items-center",style:{gap:"0.5rem"}},a("div",{class:"ir-invoice__room-info"},a("p",null,a("b",null,e.roomtype.name),a("span",null,e.rateplan.short_name)),this.getDateView(e.from_date,e.to_date)),this.renderPriceColumn(e.gross_total,e.system_id))})))))}))}renderPickup(){const e=this.booking.pickup_info?.["system_id"];if(!this.invoicableKey?.has(e)){return null}const t=this.isSelected([e]);const i=this.isDisabled([e]);return a("div",{class:"ir-invoice__service"},a("wa-checkbox",{disabled:i,size:"small",onchange:t=>{const a=t.target.checked;this.handleCheckChange({checked:a,system_id:e})},defaultChecked:t,checked:t,class:"ir-invoice__checkbox"},a("div",{class:"ir-invoice__room-checkbox-container"},a("div",{class:"ir-invoice__room-info"},a("span",null,"Pickup"),this.getDateView(this.booking.pickup_info.date,null)),this.renderPriceColumn(this.booking.pickup_info.selected_option.amount,e))))}renderCancellationPenalty(){const e=this.booking.financial.payments?.find((e=>e.payment_type?.code==="013"));if(!e){return null}const t=e?.system_id;if(!this.invoicableKey.has(t)){return null}const i=this.invoicableKey.get(t);const r=this.isSelected([t]);const o=this.isDisabled([t]);return a("div",{class:"ir-invoice__service"},a("wa-checkbox",{disabled:o,size:"small",onchange:e=>{const a=e.target.checked;this.handleCheckChange({checked:a,system_id:t})},defaultChecked:r,checked:r,class:"ir-invoice__checkbox"},a("div",{class:"ir-invoice__room-checkbox-container"},a("div",{class:"ir-invoice__room-info"},a("span",null,"Cancellation penalty"),this.getDateView(e.date,null)),this.renderPriceColumn(i.amount,t))))}render(){if(this.isLoading){return a("div",{class:"drawer__loader-container"},a("ir-spinner",null))}return a(i,{size:"small"},a("form",{id:this.formId,onSubmit:e=>{e.preventDefault();const t=e.submitter;const a=this.viewMode==="proforma"||t?.value==="pro-forma";this.handleConfirmInvoice(a)},class:"ir-invoice__container"},a("ir-custom-date-picker",{onDateChanged:e=>{this.invoiceDate=e.detail.start;this.setUpDisabledItems()},label:"Date",date:this.invoiceDate.format("YYYY-MM-DD"),minDate:this.getMinDate(),maxDate:this.getMaxDate()}),a("ir-booking-billing-recipient",{onRecipientChange:e=>this.selectedRecipient=e.detail,booking:this.booking}),this.viewMode==="invoice"&&me().isBefore(me(this.booking.from_date,"YYYY-MM-DD"),"dates")?a("ir-empty-state",{message:"Invoices cannot be issued before guest arrival"}):a("div",{class:"ir-invoice__services"},a("p",{class:"ir-invoice__form-control-label"},"Choose what to invoice ",a("span",{style:{color:"var(--wa-color-gray-60)",paddingLeft:"0.5rem"}}," (Disabled services are not eligible to be invoiced yet)")),a("div",{class:"ir-invoice__services-container"},this.invoicableKey.size===0&&a("ir-empty-state",{style:{marginTop:"3rem"}}),this.renderRooms(),this.booking.pickup_info&&this.renderPickup(),this.booking.extra_services?.map((e=>{const t=e.system_id;if(!this.invoicableKey?.has(t)){return null}const i=this.isSelected([t]);const r=this.isDisabled([t]);return a("div",{key:e.system_id,class:"ir-invoice__service"},a("wa-checkbox",{disabled:r,size:"small",onchange:e=>{const a=e.target.checked;this.handleCheckChange({checked:a,system_id:t})},defaultChecked:i,class:"ir-invoice__checkbox",checked:i},a("div",{class:"ir-invoice__room-checkbox-container"},a("div",{class:"ir-invoice__room-info"},a("span",null,e.description),this.getDateView(e.start_date,e.end_date)),this.renderPriceColumn(e.price,t))))})),this.renderCancellationPenalty()))))}static get watchers(){return{viewMode:["handleViewModeChange"],booking:["handleBookingChange"],invoiceInfo:["handleInvoiceInfoChange"]}}};Xs.style=Ws;const Js=".logo.sc-ir-label{height:1.5rem;width:1.5rem}.sc-ir-label-h{display:flex;gap:5px;align-items:center}[data-empty].sc-ir-label-h{display:none !important}.icon.sc-ir-label{margin-left:3px;padding:0;margin-top:0;display:flex;align-items:center}.label_message.sc-ir-label{margin:0 3px;padding:0}.label_title.sc-ir-label{min-width:max-content;padding:0;margin:0;font-weight:600}.label_placeholder.sc-ir-label{color:#cacfe7;color:var(--wa-color-neutral-70);padding:0 !important;margin:0 !important}.icon-container.sc-ir-label{margin:0;padding:0}.country.sc-ir-label{height:16px;width:23px;border-radius:3px}svg.sc-ir-label{margin:0;padding:0}.label_wrapper_inline.sc-ir-label{display:inline;max-width:100%;gap:5px}.label_wrapper_flex.sc-ir-label{display:flex;align-items:center;gap:5px;max-width:100%}.label_title.sc-ir-label{font-weight:600;white-space:nowrap;display:inline}.label_message.sc-ir-label{display:inline;white-space:normal;word-break:break-word}";const Qs=Js;const Zs=class{constructor(t){e(this,t)}labelText;content;display="flex";renderContentAsHtml=false;image=null;isCountryImage=false;imageStyle="";ignoreEmptyContent=false;placeholder;containerStyle;render(){if(!this.placeholder&&!this.content&&!this.ignoreEmptyContent){return a(i,{"data-empty":true})}return a(i,{class:this.image?"align-items-center":""},a("div",{class:`${this.display==="inline"?"label_wrapper_inline":"label_wrapper_flex"} `,style:this.containerStyle},this.labelText&&a("p",{class:"label_title"},this.labelText),a("slot",{name:"prefix"}),this.image&&a("img",{src:this.image.src,alt:this.image.alt??this.image.src,class:`p-0 m-0 ${this.isCountryImage?"country":"logo"} ${this.image.style??""} ${this.imageStyle??""}`}),this.content?this.renderContentAsHtml?a("p",{class:"label_message",innerHTML:this.content}):a("p",{class:"label_message"},this.content):a("p",{class:"label_placeholder"},this.placeholder),a("slot",null),a("slot",{name:"suffix"})))}};Zs.style=Qs;const el=".loader__container.sc-ir-loading-screen{position:fixed;z-index:1000;inset:0;display:flex;align-items:center;justify-content:center;background:white;margin:0 !important;padding:0 !important}.loader.sc-ir-loading-screen{width:1.25rem;height:1.25rem;border:2.5px solid #3f3f3f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}.loaderContainer.sc-ir-loading-screen{position:absolute;z-index:100001;padding:20px;top:50%;left:50%;transform:translate(-50%, -50%);background:white;display:flex;align-items:center;justify-content:center;gap:20px;border-radius:5px}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const tl=el;const al=class{constructor(t){e(this,t)}message="";render(){return a("div",{key:"e038f980527e9f005e3c2ae31721fce9b58e7572",class:"loader__container"},a("wa-spinner",{key:"ef37c647b9108c128f019595272ca9213fc5b6ec",style:{fontSize:"2.5rem"}}))}};al.style=tl;const il="@layer wa-utilities {\n  :host([size='small']),\n  .wa-size-s {\n    font-size: var(--wa-font-size-s);\n  }\n\n  :host([size='medium']),\n  .wa-size-m {\n    font-size: var(--wa-font-size-m);\n  }\n\n  :host([size='large']),\n  .wa-size-l {\n    font-size: var(--wa-font-size-l);\n  }\n}\n\n:host {\n  box-sizing: border-box;\n  width: 100%;\n  margin: 0 !important;\n  padding: 0 !important;\n}\n.sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0 0 0 0);\n  white-space: nowrap;\n  border: 0;\n}\n.mobile-input__logo {\n  height: var(--wa-font-size-s);\n  aspect-ratio: 4/3;\n  border-radius: 3px;\n}\n.mobile-input__required {\n  color: #f3676c !important;\n}\n.mobile-input__prefix-dropdown::part(menu) {\n  height: 300px;\n  /* padding-top: 0; */\n}\n.mobile-input__container {\n  display: flex;\n  align-items: stretch;\n  width: 100%;\n  margin-top: 0.5rem;\n}\n.mobile-input__container--disabled {\n  opacity: 0.7;\n}\n.mobile-input__phone-country {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n.mobile-input__phone {\n  flex: 1 1 0%;\n}\n.mobile-input__phone {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.mobile-input__phone--invalid {\n  border-color: var(--wa-color-danger-600);\n}\n.mobile-input__label {\n  display: inline-block;\n  position: relative;\n  color: var(--wa-form-control-label-color);\n  font-weight: var(--wa-form-control-label-font-weight);\n  line-height: var(--wa-form-control-label-line-height);\n  margin-block-start: 0.5em !important;\n}\n.mobile-input__description {\n  margin: 0.25rem 0 0.5rem;\n  color: var(--wa-color-neutral-500);\n  font-size: 0.875rem;\n}\n.mobile-input__error {\n  margin: 0.5rem 0 0;\n  color: var(--wa-color-danger-600);\n  font-size: 0.875rem;\n}\n.mobile-input__required {\n  margin-left: 0.25rem;\n  color: var(--wa-color-danger-600);\n}\n.mobile-input__trigger,\n.mobile-input__phone {\n  padding: 0 var(--wa-form-control-padding-inline);\n  color: var(--wa-form-control-value-color);\n  font-size: var(--wa-form-control-value-size);\n  font-family: inherit;\n  font-weight: var(--wa-form-control-value-font-weight);\n  line-height: var(--wa-form-control-value-line-height);\n  vertical-align: middle;\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  box-sizing: border-box;\n  background-color: var(--wa-form-control-background-color);\n  border-color: var(--wa-form-control-border-color);\n  border-style: var(--wa-form-control-border-style);\n  border-width: var(--wa-form-control-border-width);\n  border-radius: var(--wa-form-control-border-radius);\n  transition: background-color var(--wa-transition-normal), border var(--wa-transition-normal), all var(--wa-transition-normal), outline var(--wa-transition-fast);\n  transition-timing-function: var(--wa-transition-easing);\n}\n.mobile-input__container {\n  height: var(--wa-form-control-height);\n}\n.mobile-input__trigger {\n  height: 100%;\n}\n.mobile-input__trigger:focus,\n.mobile-input__phone:focus {\n  outline: none;\n}\n.mobile-input__trigger:disabled,\n.mobile-input__phone:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.mobile-input__trigger:focus-visible,\n.mobile-input__phone:focus-visible {\n  outline: var(--wa-focus-ring);\n  outline-offset: var(--wa-focus-ring-offset);\n  z-index: 2;\n}\n.mobile-input__phone::placeholder {\n  color: var(--wa-form-control-placeholder-color);\n  user-select: none;\n  -webkit-user-select: none;\n}\n.mobile-input__trigger {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  border-right: 0;\n  cursor: pointer;\n}\n.mobile-input__phone {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.mobile-input__phone {\n  cursor: text;\n}\n.mobile-input__trigger[aria-expanded='true'] {\n  outline: var(--wa-focus-ring);\n  outline-offset: var(--wa-focus-ring-offset);\n  z-index: 2;\n}\n.mobile-input__trigger[aria-expanded='true'] .mobile-input__phone-country-caret {\n  transform: rotate(-180deg);\n}\n\n.mobile-input__country-name {\n  flex: 1;\n}\n.mobile-input__country-prefix {\n  color: var(--wa-color-neutral-500);\n}\n.mobile-input__trigger[aria-invalid='true'] {\n  border-color: var(--wa-color-danger-border-loud);\n  outline-color: var(--wa-color-danger-border-loud);\n  border-width: 2px;\n}\n.phone__input {\n  flex: 1 1 0%;\n  width: 100%;\n}\n.phone__input:dir(ltr)::part(base) {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.phone__input:dir(rtl)::part(base) {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n}\n";const rl=il;const ol=class{constructor(a){e(this,a);this.mobileInputChange=t(this,"mobile-input-change",7);this.mobileInputCountryChange=t(this,"mobile-input-country-change",7)}get el(){return r(this)}static idCounter=0;componentId=++ol.idCounter;inputId=`ir-mobile-input-${this.componentId}`;labelId=`${this.inputId}-label`;descriptionId=`${this.inputId}-description`;errorId=`${this.inputId}-error`;countryStatusId=`${this.inputId}-country-status`;size="small";label="Phone number";name="phone";placeholder="Enter phone number";description;error;required=false;disabled=false;countryCode;value="";countries=[];mobileInputChange;mobileInputCountryChange;selectedCountry;isInvalid=false;componentWillLoad(){const e=this.resolveCountry(this.countryCode)??null;if(!e){return}if(this.el.hasAttribute("aria-invalid")){this.isInvalid=Boolean(JSON.parse(this.el.getAttribute("aria-invalid")))}this.selectedCountry=e;this.countryCode=e?.code;this.value=this.value??""}handleCountryCodeChange(e){const t=this.resolveCountry(e);if(t&&t!==this.selectedCountry){this.selectedCountry=t}}handleSelectedCountryChange(e,t){if(!e)return;if(!t||e.code!==t.code){if(this.countryCode!==e.code){this.countryCode=e.code}this.mobileInputCountryChange.emit(e)}}handleValueChange(e,t){if(e!==t){this.value=e??""}}handleAriaInvalidChange(e,t){if(e!==t){this.isInvalid=Boolean(e)}}resolveCountry(e){if(!e)return undefined;return this.countries.find((t=>t.code.toUpperCase()===e.toUpperCase()))}handleCountrySelect=e=>{if(this.disabled)return;e.stopPropagation();e.stopImmediatePropagation();const t=e.detail?.item?.value;const a=this.countries.find((e=>e.id.toString()===`${t}`));if(a){this.selectedCountry=a}requestAnimationFrame((()=>{const e=this.el.shadowRoot?.querySelector("ir-input")?.shadowRoot?.querySelector("input");e?.focus()}))};render(){const e=[this.description?this.descriptionId:null,this.error?this.errorId:null].filter(Boolean).join(" ")||undefined;return a(i,{key:"518a34a92f510bbe7ad9e8093c41f9735cdb6bf1",size:"small",role:"group","aria-labelledby":this.labelId,"aria-describedby":e},a("label",{key:"bff12413cd5c492caeb4c4c454d378a2119b6690",class:"mobile-input__label",id:this.labelId,htmlFor:this.inputId},this.label,this.required?a("span",{class:"mobile-input__required","aria-hidden":"true"},"*"):null),this.description?a("p",{id:this.descriptionId,class:"mobile-input__description"},this.description):null,a("div",{key:"1e6445683ad3f675147857cf52b9106d731510a8",class:{"mobile-input__container":true,"mobile-input__container--disabled":this.disabled}},a("wa-dropdown",{key:"5ef8bd561ab873005624dfc675b4eb94e4021eff","onwa-show":e=>{e.stopPropagation();e.stopImmediatePropagation()},"onwa-hide":e=>{e.stopPropagation();e.stopImmediatePropagation()},"onwa-select":this.handleCountrySelect,class:"mobile-input__prefix-dropdown"},a("button",{key:"8eff5fdbbcb4bac4572cb07f36fb253b0332d51a","aria-invalid":String(this.isInvalid&&!this.selectedCountry),slot:"trigger",type:"button",class:"mobile-input__trigger",disabled:this.disabled,"aria-haspopup":"listbox","aria-label":"Change country calling code"},a("div",{key:"7c70a878c9179145e56b5d9ade8acf988350be8a",class:"mobile-input__phone-country",style:{marginRight:"1rem"}},this.selectedCountry?a("img",{src:this.selectedCountry?.flag,alt:this.selectedCountry?.name,class:"mobile-input__logo"}):a("span",null,"Select")),a("wa-icon",{key:"e0ab243aff4372c165dc8c6b5eb63a9b6c358b9c",class:"mobile-input__phone-country-caret",name:"chevron-down","aria-hidden":"true"})),a("span",{key:"172faa233867fe4f4d2c756acf62fc3f2f68e9f2",class:"sr-only",id:this.countryStatusId,"aria-live":"polite"},this.selectedCountry?`Selected country ${this.selectedCountry.name} ${this.selectedCountry.phone_prefix}`:"Select a country"),this.countries.map((e=>a("wa-dropdown-item",{value:e.id.toString()},a("div",{class:"mobile-input__phone-country",role:"option","aria-selected":this.selectedCountry?.id===e.id?"true":"false"},a("img",{src:e.flag,alt:e.name,class:"mobile-input__logo"}),a("span",{class:"mobile-input__country-name"},e.name),a("span",{class:"mobile-input__country-prefix"},e.phone_prefix)))))),a("ir-input",{key:"b1a06f96f3660f14cf839631f365319a8d6e7669","aria-invalid":String(this.isInvalid&&(this.value??"").length<4),type:"tel",inputMode:"tel",autocomplete:"off",disabled:this.disabled,placeholder:this.placeholder,defaultValue:this.value,value:this.value,class:"phone__input","onText-change":e=>{const t=e.detail;this.value=t;this.mobileInputChange.emit({formattedValue:t,value:t,country:this.selectedCountry})}},this.selectedCountry&&a("span",{key:"434d6716aed422fc334441af64d63f8a41e0618a",slot:"start"},this.selectedCountry?.phone_prefix))),this.error?a("p",{id:this.errorId,class:"mobile-input__error",role:"alert"},this.error):null)}static get watchers(){return{countryCode:["handleCountryCodeChange"],selectedCountry:["handleSelectedCountryChange"],value:["handleValueChange"],"aria-invalid":["handleAriaInvalidChange"]}}};ol.style=rl;const nl=".backdropModal.sc-ir-modal{background-color:rgba(0, 0, 0, 0.5);z-index:1000;position:fixed;top:0;left:0;height:100vh;width:100%;opacity:0;transition:opacity 0.3s ease-in-out;pointer-events:none}.backdropModal.active.sc-ir-modal{cursor:pointer;opacity:1 !important;pointer-events:all}.ir-modal[data-state='opened'].sc-ir-modal{opacity:1;visibility:visible;pointer-events:all;transition:all 0.3s ease-in-out}.ir-alert-content.sc-ir-modal{padding:1rem;background:white;border-radius:5px}.ir-alert-header.sc-ir-modal{display:flex;font-size:1rem;font-weight:700}.modal.sc-ir-modal{z-index:1001 !important}.modal-dialog.sc-ir-modal{height:100vh;display:flex;align-items:center}.ir-alert-footer.sc-ir-modal{gap:10px}.ir-modal.sc-ir-modal{position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);z-index:1050;width:90%;max-width:32rem;overflow:hidden;outline:0;opacity:0;transition:transform 0.3s ease-in-out, opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;visibility:hidden;pointer-events:none}.ir-modal.active.sc-ir-modal{opacity:1;transform:translate(-50%, 0);visibility:visible;pointer-events:all;transition:all 0.3s ease-in-out}";const sl=nl;const ll=class{constructor(a){e(this,a);this.confirmModal=t(this,"confirmModal",7);this.cancelModal=t(this,"cancelModal",7);this.middleModal=t(this,"middleModal",7)}modalTitle="Modal Title";modalBody="Modal Body";showTitle;rightBtnActive=true;leftBtnActive=true;middleBtnActive=false;rightBtnText="Confirm";leftBtnText="Close";middleBtnText="More";isLoading=false;isMiddleButtonLoading=false;autoClose=true;rightBtnColor="primary";leftBtnColor="secondary";middleBtnColor="info";btnPosition="right";iconAvailable=false;icon="";isOpen=false;item={};async openModal(){this.isOpen=true}async closeModal(){this.isOpen=false}confirmModal;cancelModal;middleModal;btnClickHandler(e){let t=e.target;let a=t.name;if(a===this.leftBtnText){this.cancelModal.emit();this.item={};this.closeModal()}else if(a===this.middleBtnText){this.middleModal.emit(this.item);this.item={};if(this.autoClose)this.closeModal()}else if(a===this.rightBtnText){this.confirmModal.emit(this.item);this.item={};if(this.autoClose){this.closeModal()}}}render(){return[a("div",{key:"d3a5ac14209b391b411c93aa9919db46de84b237",class:`backdropModal ${this.isOpen?"active":""}`,onClick:()=>{this.cancelModal.emit();if(this.autoClose&&!this.isLoading){this.closeModal()}}}),a("div",{key:"8c0d5077cdb9b07cbcec95793cc373191bb1f515","data-state":this.isOpen?"opened":"closed",class:`ir-modal`,tabindex:"-1"},a("div",{key:"00b26a18f1220a4e4dbd4c7d72e585ee7275dd34",class:`ir-alert-content p-2`},this.showTitle&&a("div",{key:"c728b99fe6a6a602460a568838bbbe3c653cc70f",class:`ir-alert-header`},a("p",{key:"50bb222f76428beac7586944c7698ea78c741d58"},this.modalTitle)),a("div",{key:"6d6617696a0428f095e09b7477e2ae9eded24f54",class:"modal-body text-left p-0 mb-2"},a("div",{key:"8425e72a8ba54028e8a16e12d59813e3299558dd"},this.modalBody)),a("div",{key:"e4aa561dda530e022aaac07d9c7a45d69a513464",class:`ir-alert-footer border-0  d-flex justify-content-${this.btnPosition==="center"?"center":this.btnPosition==="left"?"start":"end"}`},this.leftBtnActive&&a("ir-button",{key:"8446c07bdda6c9560314261b4964212710cd2d3a",btn_disabled:this.isLoading,btn_color:this.leftBtnColor,btn_block:true,text:this.leftBtnText,name:this.leftBtnText}),this.middleBtnActive&&a("ir-button",{key:"5b470a2ecb9d67f783b9cd31de33e9a8b70a002a",btn_disabled:this.isMiddleButtonLoading,btn_color:this.middleBtnColor,btn_block:true,text:this.middleBtnText,isLoading:this.isMiddleButtonLoading,name:this.middleBtnText}),this.rightBtnActive&&a("ir-button",{key:"893b10a5cdfdbc7a9bf9bc0ea08aaa6836ee010b",btn_color:this.rightBtnColor,btn_disabled:this.isLoading,isLoading:this.isLoading,btn_block:true,text:this.rightBtnText,name:this.rightBtnText}))))]}};ll.style=sl;const cl=":host{display:inline-flex}.new-badge{font-weight:400;text-align:center;vertical-align:middle !important;text-transform:uppercase;letter-spacing:0.02em;line-height:1;display:inline-flex;align-items:center;justify-content:center;width:fit-content;white-space:nowrap;background:#ff4961;color:white;padding:0.2rem 0.3rem;font-size:0.75rem !important;border-radius:4px}";const dl=cl;const hl=class{constructor(t){e(this,t)}render(){return a(i,{key:"d6afaa30ac934a44de7d7a8e44762955a3a3052e"},a("span",{key:"3e6b63741ec5c2b05c3fc38614a8f57b87fb2659",class:"new-badge"},"new"))}};hl.style=dl;const pl=".otp-input-wrapper.sc-ir-otp{display:flex;gap:0.5rem;justify-content:space-evenly}.otp-digit.sc-ir-otp{--otp-size:3rem;width:var(--otp-size) !important;height:var(--otp-size) !important;padding:0;font-size:24px;font-weight:500;text-align:center;background-color:#fff;padding:0 !important}.otp-digit.sc-ir-otp:disabled{background-color:#e9ecef;cursor:not-allowed}input[type='number'].sc-ir-otp::-webkit-inner-spin-button,input[type='number'].sc-ir-otp::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type='number'].sc-ir-otp{-moz-appearance:textfield}@media (max-width: 480px){.otp-digit.sc-ir-otp{width:35px;height:45px;font-size:20px}.otp-input-wrapper.sc-ir-otp{gap:6px}}@media (max-width: 360px){.otp-digit.sc-ir-otp{width:30px;height:40px;font-size:18px}.otp-input-wrapper.sc-ir-otp{gap:4px}}";const ul=pl;const fl=class{constructor(a){e(this,a);this.otpChange=t(this,"otpChange",7);this.otpComplete=t(this,"otpComplete",7)}length=6;defaultValue;disabled=false;placeholder="";type="number";autoFocus=true;secure=false;numbersOnly=false;otpChange;otpComplete;otpValues=[];inputRefs=[];componentWillLoad(){this.otpValues=Array(this.length).fill("");if(this.defaultValue){this.setValue(this.defaultValue)}}componentDidLoad(){if(this.autoFocus&&this.inputRefs[0]){setTimeout((()=>{this.inputRefs[0].focus()}),0)}}handleLengthChange(e){if(e<1)return;const t=this.otpValues.length;if(e>t){this.otpValues=[...this.otpValues,...Array(e-t).fill("")]}else if(e<t){this.otpValues=this.otpValues.slice(0,e)}this.emitChanges()}handleInput=(e,t)=>{const a=e.target;let i=a.value;if(this.numbersOnly){i=i.replace(/[^0-9]/g,"")}if(i.length>1){i=i.slice(-1);a.value=i}this.otpValues[t]=i;this.emitChanges();if(i&&t<this.length-1){this.inputRefs[t+1].focus()}};handleKeyDown=(e,t)=>{switch(e.key){case"Backspace":if(!this.otpValues[t]&&t>0){this.inputRefs[t-1].focus();e.preventDefault()}break;case"Delete":this.otpValues[t]="";this.emitChanges();break;case"ArrowLeft":if(t>0){this.inputRefs[t-1].focus();e.preventDefault()}break;case"ArrowRight":if(t<this.length-1){this.inputRefs[t+1].focus();e.preventDefault()}break;case"Home":this.inputRefs[0].focus();e.preventDefault();break;case"End":this.inputRefs[this.length-1].focus();e.preventDefault();break}};handlePaste=(e,t)=>{e.preventDefault();const a=e.clipboardData?.getData("text")||"";const i=this.numbersOnly?a.replace(/[^0-9]/g,""):a;for(let e=0;e<Math.min(i.length,this.length-t);e++){this.otpValues[t+e]=i[e]}this.inputRefs.forEach(((e,t)=>{e.value=this.otpValues[t]||""}));const r=this.otpValues.findIndex((e=>!e));if(r!==-1&&r<this.length){this.inputRefs[r].focus()}else{this.inputRefs[this.length-1].focus()}this.emitChanges()};handleFocus=e=>{const t=e.target;if(t.value){setTimeout((()=>t.select()),0)}};emitChanges(){const e=this.otpValues.join("");this.otpChange.emit(e);if(this.otpValues.every((e=>e!==""))&&this.otpValues.length===this.length){this.otpComplete.emit(e)}}clear(){this.otpValues=Array(this.length).fill("");this.inputRefs.forEach((e=>{e.value=""}));this.emitChanges();if(this.inputRefs[0]){this.inputRefs[0].focus()}}setValue(e){const t=e.split("");for(let e=0;e<this.length;e++){this.otpValues[e]=e<t.length?t[e]:""}this.inputRefs.forEach(((e,t)=>{e.value=this.otpValues[t]||""}));this.emitChanges()}render(){return a(i,{key:"740c1d9af266d30cbac6b18886324f9fce9f0e55",class:"otp-input-container"},a("div",{key:"5fcc791b72eb7f7a262653004a27cb8a8db9649a",class:"otp-input-wrapper"},Array(this.length).fill(null).map(((e,t)=>a("input",{ref:e=>this.inputRefs[t]=e,type:this.type,inputmode:this.numbersOnly?"numeric":"text",class:"otp-digit form-control input-sm",maxlength:"1",placeholder:this.placeholder,disabled:this.disabled,autocomplete:"one-time-code",value:this.otpValues[t],onInput:e=>this.handleInput(e,t),onKeyDown:e=>this.handleKeyDown(e,t),onPaste:e=>this.handlePaste(e,t),onFocus:this.handleFocus,"aria-label":`Digit ${t+1} of ${this.length}`})))))}static get watchers(){return{length:["handleLengthChange"]}}};fl.style=ul;const gl=":host{display:block}:root{--otp-modal-padding:1.5rem}.modal-backdrop{background-color:rgba(0, 0, 0, 0.5) !important}.otp-modal-header{border-bottom:0px !important}.otp-modal{z-index:9999999 !important;border:none;padding:0 !important;box-sizing:border-box;border:1px solid rgba(0, 0, 0, 0.2);border-radius:0.35rem;outline:0}.otp-modal-content{background-color:white;border:none;border-radius:0.35rem;outline:0}.otp-modal-title{margin-bottom:0;line-height:1.45}.otp-modal-body{max-height:100% !important;padding:0 var(--otp-modal-padding)}.otp-modal-header{display:flex;justify-content:space-between;padding:var(--otp-modal-padding);padding-bottom:1rem;border-top-left-radius:0.35rem;border-top-right-radius:0.35rem}.otp-modal-dialog{z-index:9999999 !important}.otp-modal-footer{border-top:0 !important;display:flex;gap:0.5rem;flex-direction:column;padding:var(--otp-modal-padding);padding-top:0.5rem !important}.verification-message{max-width:90%}.modal-loading-container{height:250px;width:80vw}@media (min-width: 768px){.otp-modal-dialog,.otp-modal-content{width:fit-content !important}.otp-modal-footer{flex-direction:row;align-items:center}.modal-loading-container{width:380px !important}.verification-message{max-width:350px !important}}";const bl=gl;const wl=class{constructor(a){e(this,a);this.otpFinished=t(this,"otpFinished",7)}language="en";resendTimer=60;requestUrl;baseOTPUrl;showResend=true;email;otpLength=6;ticket;otp="";error="";isLoading=false;timer=60;dialogRef;timerInterval;systemService=new Be;roomService=new Ye;tokenService=new Se;otpVerificationSchema=Z.object({email:Z.string().nonempty(),requestUrl:Z.string().nonempty(),otp:Z.string().length(this.otpLength)});otpFinished;isInitializing;componentWillLoad(){if(this.ticket){this.tokenService.setToken(this.ticket)}this.fetchLocale()}handleTicketChange(e,t){if(e!==t){this.tokenService.setToken(e);this.fetchLocale()}}handleKeyDownChange(e){if(e.key==="Escape"&&this.dialogRef?.open){e.preventDefault()}}async openModal(){this.resetState();if(typeof this.dialogRef.showModal==="function"){this.dialogRef.showModal()}else{this.dialogRef.setAttribute("open","")}if(this.showResend)this.startTimer();await this.focusFirstInput()}async closeModal(){if(typeof this.dialogRef.close==="function"){this.dialogRef.close()}else{this.dialogRef.removeAttribute("open")}this.otp=null;this.clearTimer()}async fetchLocale(){if(!this.tokenService.getToken()){return}this.isInitializing=true;await this.roomService.fetchLanguage(this.language,["_USER_MGT"]);this.isInitializing=false}resetState(){this.otp="";this.error="";this.isLoading=false;this.timer=60;this.clearTimer()}startTimer(){this.clearTimer();this.timerInterval=window.setInterval((()=>{if(this.timer>0){this.timer--}else{this.clearTimer()}}),1e3)}clearTimer(){if(this.timerInterval){clearInterval(this.timerInterval);this.timerInterval=null}}async focusFirstInput(){await new Promise((e=>setTimeout(e,50)));const e=this.dialogRef.querySelector("input");e&&e.focus()}handleOtpComplete=e=>{this.error="";this.otp=e.detail};async verifyOtp(){if(this.otp.length<this.otpLength)return;this.isLoading=true;this.otpVerificationSchema.parse({otp:this.otp,requestUrl:this.requestUrl,email:this.email});try{await this.systemService.validateOTP({METHOD_NAME:this.requestUrl,OTP:this.otp});this.otpFinished.emit({otp:this.otp,type:"success"});this.closeModal()}catch(e){this.error="Verification failed. Please try again."}finally{this.isLoading=false}}async resendOtp(){if(this.timer>0)return;try{await this.systemService.resendOTP({METHOD_NAME:this.requestUrl});this.timer=60;this.startTimer()}catch(e){console.log(e)}}handleCancelClicked(){if(this.baseOTPUrl==="Check_OTP_Necessity"){this.closeModal();this.otpFinished.emit({otp:null,type:"cancelled"});return}window.location.reload()}disconnectedCallback(){this.clearTimer()}render(){return a(i,{key:"1a4a45ede822abb930202b1a92f250fa9b86ff4f"},a("dialog",{key:"e6c9ea6f33dc761fbc6616b7a80fadf6d18db84f",ref:e=>this.dialogRef=e,class:"otp-modal","aria-modal":"true"},a("form",{key:"cebccca7b66415fb67aed79fbff11b27fb5b06c1",method:"dialog",class:"otp-modal-content"},this.isInitializing||!M.entries?a("div",{class:"d-flex align-items-center justify-content-center modal-loading-container"},a("ir-spinner",null)):a(o,null,a("header",{class:"otp-modal-header"},a("h5",{class:"otp-modal-title"},M.entries.Lcz_VerifyYourIdentity)),a("section",{class:"otp-modal-body d-flex align-items-center flex-column"},a("p",{class:"verification-message text-truncate"},M.entries.Lcz_WeSentYuoVerificationCode," ",this.email),a("ir-otp",{autoFocus:true,length:this.otpLength,defaultValue:this.otp,onOtpComplete:this.handleOtpComplete}),this.error&&a("p",{class:"text-danger small mt-1 p-0 mb-0"},this.error),this.showResend&&a(o,null,this.timer>0?a("p",{class:"small mt-1"},M.entries.Lcz_ResendCode," 00:",String(this.timer).padStart(2,"0")):a("ir-button",{class:"mt-1",btn_color:"link",onClickHandler:e=>{e.stopImmediatePropagation();e.stopPropagation();this.resendOtp()},size:"sm",text:"Didnâ€™t receive code? Resend"}))),a("footer",{class:"otp-modal-footer justify-content-auto"},a("ir-button",{class:"w-100",btn_styles:"flex-fill",text:M.entries.Lcz_Cancel,btn_color:"secondary",onClick:this.handleCancelClicked.bind(this)}),a("ir-button",{class:"w-100",btn_styles:"flex-fill",text:M.entries.Lcz_VerifyNow,isLoading:this.isLoading,btn_disabled:this.otp?.length<this.otpLength||this.isLoading,onClick:()=>this.verifyOtp()}))))))}static get watchers(){return{ticket:["handleTicketChange"]}}};wl.style=bl;const ml=".sc-ir-payment-details-h{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important}.sc-ir-payment-details-h *.sc-ir-payment-details{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important}.sm-margin-right.sc-ir-payment-details{margin-right:5px !important;background:#000}.action_icons.sc-ir-payment-details{width:60px}.w-60.sc-ir-payment-details{width:100px;padding:0 5px}.payments-height.sc-ir-payment-details{height:30px}.payment_date.sc-ir-payment-details{width:100px}.iframeHeight.sc-ir-payment-details{height:max-content;height:22.5rem}.designation.sc-ir-payment-details{width:120px}.total-cost-container.sc-ir-payment-details{background:#7cbebe;color:white;padding:0.5rem;border-radius:5px}";const vl=ml;const yl=class{constructor(a){e(this,a);this.resetBookingEvt=t(this,"resetBookingEvt",7);this.resetExposedCancellationDueAmount=t(this,"resetExposedCancellationDueAmount",7);this.toast=t(this,"toast",7);this.openSidebar=t(this,"openSidebar",7);this.openPrintScreen=t(this,"openPrintScreen",7)}booking;paymentActions;propertyId;paymentEntries;confirmModal=false;toBeDeletedItem=null;modalMode=null;isLoading=false;resetBookingEvt;resetExposedCancellationDueAmount;toast;openSidebar;openPrintScreen;paymentService=new Ie;bookingService=new s;dialogRef;handlePaymentGeneration(e){const t=e.detail;const a=this.paymentEntries?.types?.find((e=>e.CODE_NAME===(this.booking.status.code==="003"?t.pay_type_code:"001")));this.openSidebar.emit({type:"payment-folio",payload:{payment:{...t,date:me().format("YYYY-MM-DD"),id:-1,amount:t.amount,payment_type:a?{code:a.CODE_NAME,description:a.CODE_VALUE_EN,operation:a.NOTES}:null,designation:a?.CODE_VALUE_EN??null},mode:"payment-action"}})}handleAddPayment=e=>{let t={id:-1,date:me().format("YYYY-MM-DD"),amount:null,currency:S.currency,designation:null,reference:null};if(e){const{amount:a,type:i}=e;const r=this.paymentEntries.methods.find((e=>e.CODE_NAME==="001"));const o={code:r.CODE_NAME,description:r.CODE_VALUE_EN,operation:r.NOTES};const n=this.paymentEntries.types.find((e=>e.CODE_NAME===(i==="cancellation-penalty"?"001":"010")));t={...t,amount:a,designation:n.CODE_VALUE_EN,payment_type:{code:n.CODE_NAME,description:n.CODE_VALUE_EN,operation:n.NOTES},payment_method:i==="refund"?undefined:o};this.openSidebar.emit({type:"payment-folio",payload:{payment:t,mode:"payment-action"}});return}this.openSidebar.emit({type:"payment-folio",payload:{payment:t,mode:"new"}})};handleEditPayment(e){this.openSidebar.emit({type:"payment-folio",payload:{payment:e,mode:"edit"}})}handleDeletePayment(e){this.modalMode="delete";this.toBeDeletedItem=e;this.dialogRef.openModal()}async handleIssueReceipt(e){if(e.receipt_nbr){this.openPrintScreen.emit({mode:"receipt",payload:{pid:e.system_id?.toString(),rnb:e.receipt_nbr}});return}const t=await this.bookingService.getNextValue({starter:"RC"});this.openPrintScreen.emit({mode:"receipt",payload:{pid:e.system_id?.toString(),rnb:`RC-${t.My_Result}`}})}async cancelPayment(){try{this.isLoading=true;await this.paymentService.CancelPayment(this.toBeDeletedItem.system_id);const e=this.booking.financial.payments.filter((e=>e.id!==this.toBeDeletedItem.id));this.booking={...this.booking,financial:{...this.booking.financial,payments:e}};this.dialogRef.closeModal();this.confirmModal=false;this.resetBookingEvt.emit(null);this.resetExposedCancellationDueAmount.emit(null);this.toBeDeletedItem=null}catch(e){console.error("Error canceling payment:",e);this.toast.emit({type:"error",title:"Error",description:"Failed to cancel payment. Please try again.",position:"top-right"})}finally{this.isLoading=false}}handleConfirmModal=async e=>{e.stopImmediatePropagation();e.stopPropagation();if(this.modalMode==="delete"){await this.cancelPayment()}};handleCancelModal=e=>{e.stopImmediatePropagation();e.stopPropagation();this.modalMode=null;this.toBeDeletedItem=null};hasValidFinancialData(){return Boolean(this.booking?.financial)}shouldShowRefundButton(){if(!this.booking.is_direct){return false}if(this.booking.financial.due_amount===0){return false}if(this.booking.financial.cancelation_penality_as_if_today===0){return false}if(this.booking.is_requested_to_cancel||["003","004"].includes(this.booking.status.code)){return this.booking.financial.cancelation_penality_as_if_today<0}return false}shouldCancellationButton(){if(!this.booking.is_direct){return false}if(this.booking.financial.due_amount===0){return false}if(this.booking.financial.cancelation_penality_as_if_today===0){return false}if(["003","004"].includes(this.booking.status.code)&&this.booking.financial.cancelation_penality_as_if_today>0){return true}return false}render(){if(!this.hasValidFinancialData()){return null}const{financial:e,currency:t}=this.booking;return[a("wa-card",null,a("ir-payment-summary",{isBookingCancelled:["003","004"].includes(this.booking.status.code),totalCost:e.gross_cost,balance:e.due_amount,collected:this.booking.financial.collected+this.booking.financial.refunds,currency:t}),a("ir-booking-guarantee",{booking:this.booking,bookingService:this.bookingService}),!["003","004"].includes(this.booking.status.code)&&this.booking.is_direct&&a("ir-applicable-policies",{propertyId:this.propertyId,booking:this.booking}),this.shouldShowRefundButton()&&a("div",{class:"d-flex mt-1"},a("ir-custom-button",{variant:"brand",appearance:"outlined",onClickHandler:()=>{this.handleAddPayment({type:"refund",amount:Math.abs(this.booking.financial.cancelation_penality_as_if_today)})}},`Refund ${E(t.symbol,Math.abs(this.booking.financial.cancelation_penality_as_if_today))}`)),this.shouldCancellationButton()&&a("div",{class:"d-flex mt-1"},a("ir-custom-button",{variant:"brand",appearance:"outlined",onClickHandler:()=>{this.handleAddPayment({type:"cancellation-penalty",amount:Math.abs(this.booking.financial.cancelation_penality_as_if_today)})}},`Charge cancellation penalty ${E(t.symbol,this.booking.financial.cancelation_penality_as_if_today)}`))),a("ir-payments-folio",{payments:e.payments||[],onAddPayment:()=>this.handleAddPayment(),onEditPayment:e=>this.handleEditPayment(e.detail),onDeletePayment:e=>this.handleDeletePayment(e.detail),onIssueReceipt:e=>this.handleIssueReceipt(e.detail)}),a("ir-dialog",{onIrDialogHide:e=>{e.stopImmediatePropagation();e.stopPropagation()},onIrDialogAfterHide:e=>{this.handleCancelModal(e)},ref:e=>this.dialogRef=e,label:"Alert",lightDismiss:this.modalMode!=="delete"},a("p",null,this.modalMode==="delete"?M.entries.Lcz_IfDeletedPermantlyLost:M.entries.Lcz_EnteringAmountGreaterThanDue),a("div",{slot:"footer",class:"ir-dialog__footer"},a("ir-custom-button",{size:"medium","data-dialog":"close",variant:"neutral",appearance:"filled"},M.entries.Lcz_Cancel),a("ir-custom-button",{loading:this.isLoading,size:"medium",onClickHandler:e=>this.handleConfirmModal(e),variant:this.modalMode==="delete"?"danger":"brand"},this.modalMode==="delete"?M.entries.Lcz_Delete:M.entries.Lcz_Confirm)))]}};yl.style=vl;const kl=".sc-ir-payment-folio-h{display:block;--payment-type-badge-bg:#ff4961;text-align:start}.payment-type-badge.sc-ir-payment-folio{background:var(--payment-type-badge-bg);color:white;padding:0.2rem 0.3rem !important;font-size:12px;border-radius:4px;margin:0;text-transform:capitalize}.credit-badge.sc-ir-payment-folio{--payment-type-badge-bg:#629a4c}.debit-badge.sc-ir-payment-folio{--payment-type-badge-bg:#ff4961}.dropdown-item-payment.sc-ir-payment-folio{display:flex;align-items:center;gap:1rem;box-sizing:border-box;justify-content:space-between}.input-group-text.sc-ir-payment-folio{border-color:#cacfe7 !important}.payment-folio__payment-type-option.sc-ir-payment-folio{display:flex;align-items:center;justify-content:space-between}.payment-folio__form.sc-ir-payment-folio{display:grid;gap:var(--wa-space-m, 1rem)}";const _l=kl;const xl="YYYY-MM-DD";const Dl=class{constructor(a){e(this,a);this.closeModal=t(this,"closeModal",7)}paymentEntries;bookingNumber;payment={date:me().format(xl),amount:0,designation:undefined,currency:null,reference:null,id:-1};mode;isLoading=null;isOpen;closeModal;async openFolio(){this.isOpen=true}async closeFolio(){this.isOpen=false;this.closeModal.emit(null)}_id=`ir__folio-form-${ae()}`;render(){return a("ir-drawer",{key:"21079356b4823795d07c2fa35875ee6972237308",placement:"start",style:{"--ir-drawer-width":"40rem","--ir-drawer-background-color":"var(--wa-color-surface-default)","--ir-drawer-padding-left":"var(--spacing)","--ir-drawer-padding-right":"var(--spacing)","--ir-drawer-padding-top":"var(--spacing)","--ir-drawer-padding-bottom":"var(--spacing)"},label:this.payment?.id!==-1?"Edit Folio Entry":"New Folio Entry",open:this.isOpen,onDrawerHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.closeFolio()}},this.isOpen&&a("ir-payment-folio-form",{key:"55cf3742c9f174e727f77d13e02426e900b786aa",formId:this._id,onLoadingChanged:e=>this.isLoading=e.detail,onCloseModal:e=>{e.stopImmediatePropagation();e.stopPropagation();this.closeFolio()},paymentEntries:this.paymentEntries,bookingNumber:this.bookingNumber,payment:this.payment,mode:this.mode}),a("div",{key:"e1da261597aeffb580efe695cf0c001491829f01",slot:"footer",class:"w-100 d-flex align-items-center",style:{gap:"var(--wa-space-xs)"}},a("ir-custom-button",{key:"22174d61e2931e1f98049aeab6e8a21ab0b6ef5e",class:"flex-fill",size:"medium","data-drawer":"close",appearance:"filled",variant:"neutral",onClickHandler:()=>this.closeFolio()},"Cancel"),a("ir-custom-button",{key:"c6adfafc1ae5ff31533b494a30d098cef9033d9d",form:this._id,loading:this.isLoading==="save",class:"flex-fill",size:"medium",type:"submit",value:"save",appearance:"accent",variant:"brand"},"Save")))}};Dl.style=_l;function Cl(e){try{const{groups:t,types:a}=Z.object({types:C.array().min(1),groups:C.array().min(1),methods:C.array().min(1)}).parse(e);const i=[...a];const r=e=>e.map((e=>i.find((t=>t.CODE_NAME===e)))).filter((e=>Boolean(e)));const o=e=>{const a=t.find((t=>t.CODE_NAME===e));return a?a.CODE_VALUE_EN.split(","):[]};let n={};t.forEach((e=>{n[e.CODE_NAME]=r(o(e.CODE_NAME))}));return n}catch(e){console.log(e);return{}}}const Ml=".sc-ir-payment-folio-form-h{display:block;--payment-type-badge-bg:#ff4961;text-align:start}.payment-type-badge.sc-ir-payment-folio-form{background:var(--payment-type-badge-bg);color:white;padding:0.2rem 0.3rem !important;font-size:12px;border-radius:4px;margin:0;text-transform:capitalize}.credit-badge.sc-ir-payment-folio-form{--payment-type-badge-bg:#629a4c}.debit-badge.sc-ir-payment-folio-form{--payment-type-badge-bg:#ff4961}.dropdown-item-payment.sc-ir-payment-folio-form{display:flex;align-items:center;gap:1rem;box-sizing:border-box;justify-content:space-between}.input-group-text.sc-ir-payment-folio-form{border-color:#cacfe7 !important}.payment-folio__payment-type-option.sc-ir-payment-folio-form{display:flex;align-items:center;justify-content:space-between}.payment-folio__form.sc-ir-payment-folio-form{display:grid;gap:var(--wa-space-m, 1rem)}";const Yl=Ml;const Sl="YYYY-MM-DD";const El=e=>{if(!e){return false}return Re.includes(e)};const Il=Z.object({code:Z.string().min(3).max(4),description:Z.string(),operation:Z.union([Z.literal("CR"),Z.literal("DB")])});const Tl=Z.object({code:Z.string().min(3).max(4),description:Z.string(),operation:Z.string().optional().nullable()});const Ol=Z.object({id:Z.number().nullable().optional(),system_id:Z.number().nullable().optional(),date:Z.string().regex(/^\d{4}-\d{2}-\d{2}$/).refine((e=>{const t=me(e,Sl,true);return t.isValid()}),{message:`Invalid date`}),amount:Z.coerce.number().min(0),reference:Z.string().optional().nullable(),payment_type:Il,payment_method:Tl.nullable().optional()});const zl=Ol.superRefine(((e,t)=>{if(El(e.payment_type?.code)&&!e.payment_method?.code){t.addIssue({code:Z.ZodIssueCode.custom,path:["payment_method"],message:"Payment method is required for this transaction type."})}}));let Al=0;const Bl=class{constructor(a){e(this,a);this.closeModal=t(this,"closeModal",7);this.resetBookingEvt=t(this,"resetBookingEvt",7);this.resetExposedCancellationDueAmount=t(this,"resetExposedCancellationDueAmount",7);this.loadingChanged=t(this,"loadingChanged",7)}paymentEntries;bookingNumber;formId;payment={date:me().format(Sl),amount:0,designation:undefined,currency:null,reference:null,id:-1};mode;isLoading=null;errors={};autoValidate=false;folioData;_paymentTypes={};closeModal;resetBookingEvt;resetExposedCancellationDueAmount;loadingChanged;today=me().format(Sl);paymentService=new Ie;componentId=`ir-payment-folio-form-${++Al}`;controlIds={date:`${this.componentId}-date`,transactionType:`${this.componentId}-transaction-type`,paymentMethod:`${this.componentId}-payment-method`,amount:`${this.componentId}-amount`,reference:`${this.componentId}-reference`};componentWillLoad(){if(this.payment){this.folioData={...this.payment}}this.syncPaymentTypes()}handlePaymentChange(e,t){if(e!==t&&e){this.folioData={...e};this.syncPaymentTypes()}}handlePaymentEntriesChange(e,t){if(e!==t){this.syncPaymentTypes()}}updateFolioData(e){this.folioData={...this.folioData??{},...e}}requiresPaymentMethod(e){return El(e)}getDefaultPaymentMethod(){const e=this.paymentEntries?.methods?.[0];if(!e){return null}return{code:e.CODE_NAME,description:e.CODE_VALUE_EN,operation:e.NOTES}}stopEventPropagation(e){e.stopImmediatePropagation();e.stopPropagation()}syncPaymentTypes(){if(!this.paymentEntries){this._paymentTypes={};return}const e=Cl(this.paymentEntries);if(this.mode==="payment-action"&&this.payment?.payment_type?.code==="001"){const{PAYMENTS:t,CANCELLATION:a}=e;this._paymentTypes={PAYMENTS:t,CANCELLATION:a};return}this._paymentTypes=e}async savePayment(e=false){try{this.isLoading=e?"save-print":"save";this.loadingChanged.emit(this.isLoading);this.autoValidate=true;this.errors={};const t=zl.parse({...this.folioData??{},amount:this.folioData?.amount??undefined});const{payment_type:a,payment_method:i,...r}=t;const o={...r,payment_type:a,payment_method:i?i:undefined,id:r.id??this.payment?.id??-1,date:r.date??this.payment?.date??this.today,system_id:r.system_id??this.payment?.system_id??undefined,amount:r.amount??0,currency:S.currency,reference:r.reference??"",designation:a?.description||""};await this.paymentService.AddPayment(o,this.bookingNumber);this.resetBookingEvt.emit(null);this.resetExposedCancellationDueAmount.emit({booking_nbr:this.bookingNumber});this.closeModal.emit()}catch(e){const t={};if(e instanceof ee){e.issues.forEach((e=>{const a=e.path[0]?.toString();if(a){t[a]=true}}))}console.error("Failed to save payment folio entry",e);this.errors=t}finally{this.isLoading=null;this.loadingChanged.emit(null)}}handleDropdownChange(e){this.updateFolioData({designation:e});if(!e){this.updateFolioData({payment_type:null,payment_method:null});return}const t=this.paymentEntries?.types?.find((t=>t.CODE_NAME===e));if(!t){console.warn(`Invalid payment type ${e}`);this.updateFolioData({payment_type:null,payment_method:null});return}this.updateFolioData({payment_type:{code:t.CODE_NAME,description:t.CODE_VALUE_EN,operation:t.NOTES},payment_method:this.requiresPaymentMethod(t.CODE_NAME)?null:this.getDefaultPaymentMethod()})}handlePaymentMethodDropdownChange(e){const t=this.paymentEntries?.methods?.find((t=>t.CODE_NAME===e));if(!t){console.warn(`Invalid payment method ${e}`);this.updateFolioData({payment_method:null});return}this.updateFolioData({payment_method:{code:t.CODE_NAME,description:t.CODE_VALUE_EN,operation:t.NOTES}})}renderDropdownItems(){const e=Object.values(this._paymentTypes??{});if(!e.length){return null}return e.map(((e,t)=>a(o,null,e.map((e=>a("wa-option",{key:e.CODE_NAME,value:e.CODE_NAME,label:e.CODE_VALUE_EN},a("div",{class:"payment-folio__payment-type-option"},a("span",null,e.CODE_VALUE_EN),a("wa-badge",{variant:e.NOTES==="CR"?"success":"danger",style:{fontSize:"var(--wa-font-size-s)"}},e.NOTES==="CR"?"credit":"debit"))))),t!==Object.values(this._paymentTypes).length-1&&a("wa-divider",null))))}render(){return a("form",{key:"9118219382bfa617272316068a14182f3d05192c",onSubmit:e=>{e.preventDefault();const t=e.submitter;if(t?.value==="save"){this.savePayment()}},class:"payment-folio__form",id:this.formId},a("ir-custom-date-picker",{key:"83e67df43582be5f393e2187a91f99cd89160ff1",id:this.controlIds.date,label:"Date","aria-invalid":this.errors?.date&&!this.folioData?.date?"true":"false","data-testid":"pickup_date",onDateChanged:e=>{this.updateFolioData({date:e.detail.start?.format(Sl)})},minDate:me().add(-2,"months").format("YYYY-MM-DD"),emitEmptyDate:true,maxDate:this.today,date:this.folioData?.date}),a("ir-validator",{key:"baae06a78a0f796a6d2fd1cb4b96a9044e16df3b",value:this.folioData?.payment_type?.code,autovalidate:this.autoValidate,schema:Il.shape.code,valueEvent:"change wa-change select-change",blurEvent:"wa-hide"},a("wa-select",{key:"778a8da84ee91ee761ca044acef1d3c804521a1d",id:this.controlIds.transactionType,size:"small","onwa-hide":e=>this.stopEventPropagation(e),"onwa-show":e=>this.stopEventPropagation(e),placeholder:"Select...",label:"Transaction type",defaultValue:this.folioData?.payment_type?.code,value:this.folioData?.payment_type?.code,disabled:this.mode==="payment-action",onchange:e=>{this.stopEventPropagation(e);this.handleDropdownChange(e.target.value)}},a("wa-option",{key:"8c898882fb09c158cc719553e8c4b1c5767e0c88",value:""},"Select..."),this.renderDropdownItems())),this.requiresPaymentMethod(this.folioData?.payment_type?.code)&&a("ir-validator",{key:"3a92a2501eb919e9e97617a1f782c02bd901e73f",value:this.folioData?.payment_method?.code??"",autovalidate:this.autoValidate,schema:Tl.shape.code,valueEvent:"change wa-change select-change",blurEvent:"wa-hide"},a("wa-select",{key:"f87f35dd3277140e2b3485a8c34bfa3e4cba6b02",id:this.controlIds.paymentMethod,size:"small",label:`${this.folioData.payment_type?.code==="001"?"Payment":"Refund"} method`,"onwa-show":e=>this.stopEventPropagation(e),"onwa-hide":e=>this.stopEventPropagation(e),defaultValue:this.folioData?.payment_method?.code,value:this.folioData?.payment_method?.code??"",onchange:e=>{this.stopEventPropagation(e);this.handlePaymentMethodDropdownChange(e.target.value)}},a("wa-option",{key:"2d03a8b2fec9f81d35f3daaf7c3c8e9713bebeb3",value:""},"Select..."),this.paymentEntries?.methods?.map((e=>a("wa-option",{key:e.CODE_NAME,label:e.CODE_VALUE_EN,value:e.CODE_NAME},e.CODE_VALUE_EN))))),a("ir-validator",{key:"890196c1eca845b8f3a34e835c879cd7122ccd04",value:this.folioData?.amount?.toString()??undefined,autovalidate:this.autoValidate,schema:Ol.shape.amount,valueEvent:"text-change input input-change",blurEvent:"input-blur"},a("ir-input",{key:"5b0b1dc29605856ec4d6120f247ee7a760c0b94c",id:this.controlIds.amount,"aria-invalid":String(!!this.errors?.amount),value:this.folioData?.amount?.toString()??"",label:"Amount",mask:"price",min:0,"onText-change":e=>this.updateFolioData({amount:!e.detail?undefined:Number(e.detail)})},a("span",{key:"d8c1a41c0ce924d8734df5c39778c4ea17d0040e",slot:"start"},S.currency.symbol))),a("ir-validator",{key:"06ce1e5d7156eca33198d2b7e057ccf5eb6d3d14",value:this.folioData?.reference??"",autovalidate:this.autoValidate,schema:Ol.shape.reference,valueEvent:"text-change input input-change",blurEvent:"input-blur"},a("ir-input",{key:"2fb8c966285d3b6919f19d80b7a036973128e5c2",id:this.controlIds.reference,value:this.folioData?.reference??"",label:"Reference",maxlength:50,"onText-change":e=>this.updateFolioData({reference:e.detail??""})})))}static get watchers(){return{payment:["handlePaymentChange"],paymentEntries:["handlePaymentEntriesChange"]}}};Bl.style=Yl;const Rl=".payment-item__payment-item.sc-ir-payment-item{display:flex;flex-direction:column;min-height:2.5rem}.payment-item__payment-item.sc-ir-payment-item p.sc-ir-payment-item{padding:0;margin:0;box-sizing:border-box}.payment-item__payment-body.sc-ir-payment-item{display:flex;flex-direction:column}.payment-item__payment-fields.sc-ir-payment-item{display:flex;align-items:center;justify-content:space-between}.payment-item__payment-body.sc-ir-payment-item .payment-item__payment-reference.sc-ir-payment-item,.payment-item__payment-body.sc-ir-payment-item .payment-item__payment-description.sc-ir-payment-item{display:none}.payment-item__payment-toolbar.sc-ir-payment-item{display:flex;align-items:center;justify-content:space-between}.payment-item__payment-toolbar.sc-ir-payment-item .payment-item__payment-amount.sc-ir-payment-item{display:none}.payment-item__action-button.sc-ir-payment-item{cursor:pointer}.payment-item__payment-amount.sc-ir-payment-item{font-weight:700;white-space:nowrap}.payment-item__payment-amount.is-credit.sc-ir-payment-item{color:var(--wa-color-success-50)}.payment-item__payment-amount.is-debit.sc-ir-payment-item{color:var(--wa-color-danger-50)}.payment-item__payment-reference.sc-ir-payment-item{font-size:12px}@media (min-width: 640px){.payment-item__payment-item.sc-ir-payment-item{flex-direction:row;align-items:center;gap:1rem}.payment-item__payment-item.sc-ir-payment-item:hover{background:var(--wa-color-neutral-fill-quiet, #f1f2f3)}.payment-item__payment-item.sc-ir-payment-item .payment-item__payment-actions.sc-ir-payment-item{display:inline-flex}.payment-item__payment-body.sc-ir-payment-item .payment-item__payment-reference.sc-ir-payment-item,.payment-item__payment-body.sc-ir-payment-item .payment-item__payment-description.sc-ir-payment-item,.payment-item__payment-item.sc-ir-payment-item .payment-item__payment-amount.sc-ir-payment-item{display:inline-flex}.payment-item__payment-fields.sc-ir-payment-item .payment-item__payment-amount.sc-ir-payment-item,.payment-item__payment-toolbar.sc-ir-payment-item .payment-item__payment-description.sc-ir-payment-item,.payment-item__payment-item.sc-ir-payment-item .payment-item__payment-reference.sc-ir-payment-item,.payment-item__payment-actions.sc-ir-payment-item{display:none}.payment-item__payment-description.sc-ir-payment-item{padding:0 0.5rem !important}.payment-item__payment-body.sc-ir-payment-item .payment-item__payment-reference.sc-ir-payment-item{display:inline-flex;align-items:center}.payment-item__payment-body.sc-ir-payment-item{flex:1 1 0%;justify-content:flex-start}.payment-item__payment-fields.sc-ir-payment-item{justify-content:flex-start;gap:0.5rem}.payment-item__payment-toolbar.sc-ir-payment-item{gap:0.5rem;align-items:center}}";const Nl=Rl;const $l=class{constructor(a){e(this,a);this.editPayment=t(this,"editPayment",7);this.deletePayment=t(this,"deletePayment",7);this.issueReceipt=t(this,"issueReceipt",7)}payment;editPayment;deletePayment;issueReceipt;_id=ae();render(){const e=this.payment.payment_type.operation==="CR";const t=(Re.includes(this.payment.payment_type?.code)?`${this.payment.payment_type?.description}: ${this.payment.payment_method.description}`:this.payment.payment_type.description)??this.payment.designation;return a("div",{key:"117138eaf5c4c00b6d709465dcc04e7419cb67cf",class:"payment-item__payment-item"},a("div",{key:"184914b1c3bb7d3e1595a782914f3be65e4aee3d",class:"payment-item__payment-body",part:"payment-body"},a("div",{key:"0f1ef1f7116eadbed97a52edde8737c637b93e49",class:"payment-item__payment-fields",part:"payment-fields"},a("p",{key:"174a47a9c608743827404dcd9d35144b4ed69100",class:"payment-item__payment-date"},me(this.payment.date,"YYYY-MM-DD").format("MMM DD, YYYY")),a("p",{key:"5d9ca9af429159afc3741063ce83c564c47445f8",class:`payment-item__payment-amount ${e?"is-credit":"is-debit"}`},E(this.payment.currency.symbol,this.payment.amount)),a("p",{key:"5e3a3770b2f92cba01aab5561f4336b223a13505",class:"payment-item__payment-description"},t)),this.payment.reference&&a("p",{key:"6a48c9770170f6e3e694db755d8ed4fe27d760d4",class:"payment-item__payment-reference"},this.payment?.reference)),a("div",{key:"2a9d2a42f77b11ed0a2414654a41d44b65845852",class:"payment-item__payment-toolbar"},a("p",{key:"51ef1310e49964ed1d25f052fb74f81bed198a08",class:`payment-item__payment-amount ${e?"is-credit":"is-debit"}`},E(this.payment.currency.symbol,this.payment.amount)),a("p",{key:"52f41661880c1cb7158957391d8ad5a6a5fa848f",class:"payment-item__payment-description"},t),a("div",{key:"2565eaf0af79737a832affb55a1d6f958e063e4f",class:"payment-item__payment-actions"},a("div",{key:"329807550b194eea410168c8af1c2c531e0bd031",class:"d-flex align-items-center"},a("wa-tooltip",{key:"f68c699d7b56038976ac3e6c64b6185fb1f23889",for:this._id},"User: ",this.payment.time_stamp.user),a("wa-icon",{key:"38950f798e4dd88c580b85cee14872f8f2e306fe",name:"user",id:this._id}),a("wa-dropdown",{key:"b2fdf536eb5af80dd3627fdb2dc48fa482384330","onwa-hide":e=>{e.stopImmediatePropagation();e.stopPropagation()},"onwa-select":e=>{switch(e.detail.item.value){case"edit":this.editPayment.emit(this.payment);break;case"delete":this.deletePayment.emit(this.payment);break;case"receipt":this.issueReceipt.emit(this.payment);break}}},a("ir-custom-button",{key:"98c879892a6ccd4fcf6d56a12ae75b54c2bfd0fc",slot:"trigger",appearance:"plain"},a("wa-icon",{key:"72abe0a82930466d467fc3df92f0796e5627834b",name:"ellipsis-vertical"})),this.payment.payment_type.code==="001"&&a("wa-dropdown-item",{key:"d7d5d9537c77062ad6db9367c3a5397b613f1d67",value:"receipt"},a("wa-icon",{key:"d6928e236ac5f2b1274a2850457d9fabe65718e9",name:"receipt",slot:"icon"}),"Print Receipt"),a("wa-dropdown-item",{key:"2f4460528fa39ae23bc8143105b07f25438ccbe1",value:"edit"},a("wa-icon",{key:"4eb5e3975ee87f7df764fd29b3c5b6102d4fd709",slot:"icon",name:"edit"}),"Edit"),a("wa-dropdown-item",{key:"f1685a6a548f7c0ea9313e7858da77309f823e9f",value:"delete",variant:"danger"},a("wa-icon",{key:"cf20a58fe5270c9ce58fb01a50596c86fbc4ff72",slot:"icon",name:"trash"}),"Delete"))))),this.payment.reference&&a("p",{key:"7887376de6553d6af4166563f076011ed6d12dd8",class:"payment-item__payment-reference"},this.payment?.reference))}};$l.style=Nl;const Ll=".sc-ir-payment-summary-h{display:block}.sc-ir-payment-summary-h{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important}.sc-ir-payment-summary-h *.sc-ir-payment-summary{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important}";const Pl=Ll;const Hl=class{constructor(t){e(this,t)}totalCost;balance;collected;currency;isBookingCancelled;shouldShowTotalCost(){return this.totalCost>0&&this.totalCost!==null}render(){return a("div",{key:"66d561f7dfe83e454528e0347a9fef68097f51f2",class:" m-0"},this.shouldShowTotalCost()&&a("div",{key:"a2f853a0ca191a7d8bbaab9dc0986d9d66c74006",class:"mb-2 h4 total-cost-container"},M.entries.Lcz_TotalCost,":",a("span",{key:"29df930323d05ff5f82e7a84a4f501afc596a7ff"},E(this.currency.symbol,this.totalCost))),a("div",{key:"6e00f2fbc0e97594cee9d4dd84428a48417dc341",class:"h4 d-flex align-items-center justify-content-between"},a("span",{key:"1dfe8253f6926ffe357b1a9702a073eb38323c66"},M.entries.Lcz_Balance,": "),a("span",{key:"643c84867808dd827e025cc6e8bd1c45af371546",class:"danger font-weight-bold"},E(this.currency.symbol,this.balance))),!this.isBookingCancelled&&a("div",{key:"16f92d2a851abadc19483d37ae9724dc63ea8cf7",class:"mb-2 h4 d-flex align-items-center justify-content-between"},a("span",{key:"342e27a71d1e7fc6c6d4851b4fd866c65fd8fd33"},M.entries.Lcz_Collected,": "),a("span",{key:"c4819bdeda68e69b76b620a1fd81167b702a95e8"},E(this.currency.symbol,this.collected))))}};Hl.style=Pl;const Fl=".sc-ir-payments-folio-h{display:block}.payment-divider.sc-ir-payments-folio{margin:0;padding:0}";const Ul=Fl;const jl=class{constructor(a){e(this,a);this.addPayment=t(this,"addPayment",7);this.editPayment=t(this,"editPayment",7);this.deletePayment=t(this,"deletePayment",7);this.issueReceipt=t(this,"issueReceipt",7)}payments=[];addPayment;editPayment;deletePayment;issueReceipt;handleAddPayment=()=>{this.addPayment.emit()};handleEditPayment=e=>{this.editPayment.emit(e)};handleDeletePayment=e=>{this.deletePayment.emit(e)};handleIssueReceipt(e){this.issueReceipt.emit(e)}hasPayments(){return this.payments&&this.payments.length>0}renderPaymentItem(e,t){return[a("ir-payment-item",{key:e.id,payment:e,onDeletePayment:e=>{e.stopImmediatePropagation();e.stopPropagation();this.handleDeletePayment(e.detail)},onEditPayment:e=>{e.stopImmediatePropagation();e.stopPropagation();this.handleEditPayment(e.detail)},onIssueReceipt:e=>{e.stopImmediatePropagation();e.stopPropagation();this.handleIssueReceipt(e.detail)}}),t<this.payments.length-1&&a("wa-divider",{class:"payment-divider"})]}renderEmptyState(){return a("ir-empty-state",null)}render(){return a("wa-card",{key:"6d81a5950579008274771f739418a09467b2a764",class:" payments-container"},a("div",{key:"871d219927c40f3912b168c572dbd8dd58188aa2",slot:"header",class:"d-flex align-items-center",style:{gap:"0.5rem"}},a("p",{key:"c2665328be8d153ebc0cf6a604881e03789c52bf",class:"font-size-large p-0 m-0"},"Guest Folio"),a(Ma,{key:"c4345d1deef445e903265e0ee2980a37ff15b73e",message:"Help",href:"https://help.igloorooms.com/extranet/booking-details/guest-folio"})),a("wa-tooltip",{key:"f1fda09069e44ccbb8d08cc25b2f8df6c9bd4bae",for:"create-payment"},"Add Payment"),a("ir-custom-button",{key:"e43c14eee1ce57753d5b9cbace9ad2c7da33e88a",slot:"header-actions",id:"create-payment",size:"small",variant:"neutral",appearance:"plain",onClickHandler:this.handleAddPayment},a("wa-icon",{key:"c378e91a0cbe173c325ce06e65e1170eb1117e97",name:"plus",style:{fontSize:"1rem"}})),this.hasPayments()?this.payments.map(((e,t)=>this.renderPaymentItem(e,t))):this.renderEmptyState())}};jl.style=Ul;const Vl=":host{display:block;width:100%}.menu{display:flex;flex-direction:column;min-width:max-content;margin:0px;padding:0.5rem 0;border:var(--wa-border-style) var(--wa-border-width-s) var(--wa-color-surface-border);border-radius:var(--wa-border-radius-m);background-color:var(--wa-color-surface-raised);box-shadow:var(--wa-shadow-m);color:var(--wa-color-text-normal);text-align:start;user-select:none;overflow:auto;max-width:var(--auto-size-available-width) !important;max-height:var(--auto-size-available-height) !important}wa-input[aria-invalid='true']::part(base){border-color:var(--wa-color-danger-border-loud);outline-color:var(--wa-color-danger-border-loud);border-width:2px}.results{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;max-height:min(60vh, 24rem);overflow-y:auto}.group{display:flex;flex-direction:column;gap:0.35rem}.group__label{font-size:0.75rem;text-transform:uppercase;letter-spacing:0.08em;color:var(--wa-color-text-muted);margin:0 0.25rem}.group__options{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:0.25rem}.option{display:flex;align-items:center;gap:0.75rem;padding:0.75rem;border-radius:var(--wa-border-radius-m);cursor:pointer;transition:background-color 120ms ease, box-shadow 120ms ease}.option__leading{color:var(--wa-color-text-muted);display:flex;align-items:center;justify-content:center;font-size:1rem}.option__leading wa-icon{font-size:1.15rem}.option__content{display:flex;flex-direction:column;gap:0.15rem;flex:1}.option__label{font-weight:600}.option__description{font-size:0.85rem;color:var(--wa-color-text-muted)}.option__suffix{margin-inline-start:auto;display:flex;align-items:center;gap:0.5rem}.option__meta{padding:0.15rem 0.45rem;border-radius:var(--wa-border-radius-pill, 999px);background-color:var(--wa-color-surface, rgba(255, 255, 255, 0.08));font-size:0.75rem;color:var(--wa-color-text-normal)}.option__shortcut{display:flex;gap:0.25rem}.option__shortcut kbd{border-radius:var(--wa-border-radius-s);border:1px solid var(--wa-color-surface-border);padding:0.15rem 0.35rem;font-size:0.75rem;font-family:inherit;background-color:var(--wa-color-surface, rgba(255, 255, 255, 0.04))}.option--active{background-color:var(--wa-color-surface-hover, rgba(255, 255, 255, 0.06));box-shadow:inset 0 0 0 1px var(--wa-color-surface-border)}.empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:0.35rem;padding:2rem 1rem;text-align:center;color:var(--wa-color-text-muted)}.empty-state wa-icon{font-size:1.25rem}.loading-state{display:flex;align-items:center;gap:0.5rem;padding:0.75rem 1rem;color:var(--wa-color-text-muted)}.loading-state p{margin:0;font-size:0.9rem}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0}";const Gl=Vl;const ql=300;const Kl=class{constructor(a){e(this,a);this.comboboxSelect=t(this,"combobox-select",7);this.textChange=t(this,"text-change",7);this.comboboxClear=t(this,"combobox-clear",7);this.inputPickerBlurred=t(this,"input-picker-blurred",7)}value="";loading=false;mode="default";pill=false;placeholder="";label;defaultValue;withClear=false;size="small";appearance;debounce=0;static idCounter=0;componentId=++Kl.idCounter;listboxId=`ir-combobox-listbox-${this.componentId}`;listboxLabelId=`ir-combobox-label-${this.componentId}`;emptyStateId=`ir-combobox-empty-${this.componentId}`;inputRef;nativeInput;slotRef;debounceTimer;get hostEl(){return r(this)}isOpen=false;query="";activeIndex=-1;filteredItems=[];liveRegionMessage="";slottedPickerItems=[];isValid;comboboxSelect;textChange;comboboxClear;inputPickerBlurred;componentWillLoad(){const e=Array.from(this.hostEl?.querySelectorAll("ir-picker-item")??[]);if(e.length){this.processPickerItems(e)}else{this.updateLiveRegion(0)}}componentDidRender(){if(this.inputRef){this.nativeInput=this.inputRef.input}this.applyAriaAttributes()}disconnectedCallback(){if(this.debounceTimer){window.clearTimeout(this.debounceTimer);this.debounceTimer=undefined}}async open(){if(this.isOpen){this.focusInput();return}this.isOpen=true;requestAnimationFrame((()=>this.focusInput()));if(this.filteredItems.length){const e=this.filteredItems.findIndex((e=>e.value===this.value));if(e>=0){const t=this.findNearestEnabledIndex(e+1,1);if(t>=0){this.activeIndex=t}else{this.focusEdgeItem("start")}}else if(this.activeIndex===-1){this.focusEdgeItem("start")}}this.scrollSelectedIntoView()}async close(){this.isOpen=false}handleKeyDown(e){this.handleInputKeydown(e)}handleDocumentClick(e){if(!this.isOpen)return;const t=e.composedPath?e.composedPath():[];if(t.length&&t.includes(this.hostEl)||this.hostEl.contains(e.target))return;this.closeCombobox()}handleDocumentFocus(e){if(!this.isOpen)return;if(this.hostEl.contains(e.target))return;this.closeCombobox()}handleActiveIndexChange(){this.updateActiveItemIndicators();this.applyAriaAttributes();this.scrollActiveOptionIntoView()}handleAriaInvalid(e){this.isValid=e}handleValueChange(e){this.updateSelectedFromValue(e);this.syncQueryWithValue(e);if(["select-async","select"].includes(this.mode)){this.applyFilter("",{updateQuery:false,emitEvent:false})}}async clearInput(){this.applyFilter("")}closeCombobox(e={}){this.isOpen=false;if(e.restoreFocus){this.focusInput()}}handleInput=e=>{const t=e.target;this.applyFilter(t?.value??"");this.open()};handleInputFocus=()=>{if(!this.isOpen){if(this.mode==="select-async"&&!this.query){return}this.open()}};handleInputKeydown=e=>{switch(e.key){case"ArrowDown":e.preventDefault();this.open();this.moveActiveIndex(1);break;case"ArrowUp":e.preventDefault();this.open();this.moveActiveIndex(-1);break;case"Enter":if(!this.isOpen)return;e.preventDefault();this.selectActiveItem();break;case"Escape":if(!this.isOpen)return;e.preventDefault();this.closeCombobox({restoreFocus:true});break;case"Home":if(!this.isOpen)return;e.preventDefault();this.focusEdgeItem("start");break;case"End":if(!this.isOpen)return;e.preventDefault();this.focusEdgeItem("end");break;case"Tab":this.closeCombobox();break}};applyFilter(e,t={}){const{updateQuery:a=true,emitEvent:i=true}=t;if(a){this.query=e}const r=e.trim().toLowerCase();const o=this.slottedPickerItems;const n=r?o.filter((e=>this.matchesQuery(e,r))):[...o];const s=this.activeIndex>=0?this.filteredItems[this.activeIndex]:undefined;this.filteredItems=n;this.updateItemVisibility(n);let l=s?n.indexOf(s):-1;if(n.length===0){this.activeIndex=-1}else{if(l===-1){l=this.findNearestEnabledIndex(0,1)}this.activeIndex=l}this.updateActiveItemIndicators();const c=r?`"${e.trim()}"`:undefined;this.updateLiveRegion(n.length,c);if(i){this.emitTextChange(e)}}emitTextChange(e){const t=this.getTextChangeDelay();if(this.debounceTimer){window.clearTimeout(this.debounceTimer)}const a=()=>{this.textChange.emit(e)};if(t>0){this.debounceTimer=window.setTimeout(a,t);return}a()}getTextChangeDelay(){if(typeof this.debounce==="number"&&this.debounce>0){return this.debounce}if(this.mode==="select-async"){return ql}return 0}syncQueryWithValue(e,t={}){if(!["select","select-async"].includes(this.mode)){return}if(!e){if(t.allowEmptyFallback!==false){this.query=""}return}const a=this.slottedPickerItems.find((t=>t.value===e));if(a){this.query=this.getItemDisplayLabel(a)}}selectActiveItem(){if(this.activeIndex<0)return;const e=this.filteredItems[this.activeIndex];if(!e||e.disabled)return;this.handleSelection(e)}handleSelection(e){const t={value:e.value,label:this.getItemDisplayLabel(e),disabled:e.disabled};this.value=e.value;this.updateSelectedFromValue();this.comboboxSelect.emit({item:t});this.closeCombobox({restoreFocus:true});if(["select","select-async"].includes(this.mode)){this.query=this.getItemDisplayLabel(e);this.applyFilter("",{updateQuery:false,emitEvent:false})}else{this.applyFilter("",{emitEvent:false})}this.activeIndex=-1}focusInput(){this.inputRef?.focus();this.nativeInput?.focus()}applyAriaAttributes(){if(!this.nativeInput)return;this.nativeInput.setAttribute("role","combobox");this.nativeInput.setAttribute("aria-autocomplete","list");this.nativeInput.setAttribute("aria-expanded",String(this.isOpen));this.nativeInput.setAttribute("aria-controls",this.listboxId);if(this.activeIndex>=0){const e=this.filteredItems[this.activeIndex];if(e?.id){this.nativeInput.setAttribute("aria-activedescendant",e.id)}}else{this.nativeInput.removeAttribute("aria-activedescendant")}}scrollActiveOptionIntoView(){if(this.activeIndex<0)return;const e=this.filteredItems[this.activeIndex];if(!e)return;this.runAfterNextFrame((()=>{e.scrollIntoView({block:"center"})}))}scrollSelectedIntoView(){if(!this.isOpen||!this.value){return}const e=this.filteredItems.find((e=>e.value===this.value))??this.slottedPickerItems.find((e=>e.value===this.value));if(!e){return}this.runAfterNextFrame((()=>{e.scrollIntoView({block:"center"})}))}capturePickerItemsFromSlot(e=this.slotRef){if(!e){return}const t=e.assignedElements({flatten:true});const a=t.filter((e=>e.tagName==="IR-PICKER-ITEM"));this.processPickerItems(a)}processPickerItems(e){this.slottedPickerItems=[...e];this.ensureItemIds();this.applyFilter(this.query,{emitEvent:false});this.updateSelectedFromValue(this.value);this.syncQueryWithValue(this.value,{allowEmptyFallback:false});if(["select","select-async"].includes(this.mode)&&this.value){this.applyFilter("",{updateQuery:false,emitEvent:false})}}ensureItemIds(){this.slottedPickerItems.forEach(((e,t)=>{if(!e.id){e.id=`${this.listboxId}-option-${t}`}}))}getItemDisplayLabel(e){return e.label||e.textContent?.trim()||""}matchesQuery(e,t){const a=`${e.label??""} ${e.value??""}`.toLowerCase();return a.includes(t)}updateItemVisibility(e){const t=new Set(e);this.slottedPickerItems.forEach((e=>{const a=t.has(e);e.hidden=!a;if(a){e.removeAttribute("aria-hidden")}else{e.setAttribute("aria-hidden","true")}e.active=false}))}updateSelectedFromValue(e=this.value){if(!this.slottedPickerItems.length){return}this.slottedPickerItems.forEach((t=>{t.selected=Boolean(e)&&t.value===e}))}updateActiveItemIndicators(){this.slottedPickerItems.forEach((e=>e.active=false));if(this.activeIndex<0){return}const e=this.filteredItems[this.activeIndex];if(e){e.active=true}}findNearestEnabledIndex(e,t){const a=this.filteredItems;const i=a.length;if(!i){return-1}let r=(e%i+i)%i;let o=0;while(o<i){const e=a[r];if(e&&!e.disabled){return r}r=((r+t)%i+i)%i;o+=1}return-1}focusEdgeItem(e){if(!this.filteredItems.length){this.activeIndex=-1;return}const t=e==="start"?1:-1;const a=e==="start"?0:this.filteredItems.length-1;this.activeIndex=this.findNearestEnabledIndex(a,t)}moveActiveIndex(e){const t=this.filteredItems.length>0;if(!t){this.activeIndex=-1;return}if(this.activeIndex===-1){this.focusEdgeItem(e===1?"start":"end");return}this.activeIndex=this.findNearestEnabledIndex(this.activeIndex+e,e)}findPickerItemFromEvent(e){const t=typeof e.composedPath==="function"?e.composedPath():[];for(const e of t){if(e&&e.tagName==="IR-PICKER-ITEM"){return e}}return undefined}handleResultsClick=e=>{const t=this.findPickerItemFromEvent(e);if(!t||t.disabled){return}e.preventDefault();this.handleSelection(t)};handleResultsPointerDown=e=>{const t=this.findPickerItemFromEvent(e);if(!t){return}e.preventDefault()};handleSlotChange=e=>{const t=e.target;this.slotRef=t;this.capturePickerItemsFromSlot(t)};render(){const e=this.filteredItems.length>0;const t=this.mode==="select-async";const r=this.slottedPickerItems.length>0;const o=!this.loading&&!e&&(!t||!r);const n=o?this.emptyStateId:undefined;return a(i,{key:"6bedc661a661dfd3fca2a2a5cfe71d1c58623847"},a("wa-popup",{key:"d57f875386049a0c34d3315fb04a09a776d467ae",flip:true,shift:true,placement:"bottom",sync:"width","auto-size":"vertical","auto-size-padding":10,active:this.isOpen},a("wa-input",{key:"87097aef7b9eae52e8e31d734b45b1d0094be3a3",slot:"anchor",class:"search-bar","aria-invalid":this.isValid,withClear:this.withClear,size:this.size,value:this.query,defaultValue:this.defaultValue,ref:e=>this.inputRef=e,appearance:this.appearance,label:this.label,pill:this.pill,onblur:()=>this.inputPickerBlurred.emit(),autocomplete:"off",placeholder:this.placeholder||"Search",oninput:this.handleInput,onfocus:this.handleInputFocus,"onwa-clear":()=>{this.applyFilter("");this.open();this.comboboxClear.emit()}},this.loading&&a("wa-spinner",{key:"66875b3620871e69edebd4a7eb49c9ad6fec4cc5",slot:"end"}),a("wa-icon",{key:"b57edd12c5c822ea12fba18677671ccc3ec3f3cb",slot:"start",name:"magnifying-glass","aria-hidden":"true"})),a("div",{key:"8285fc0a3061810cc6953ef59edddd11e8940bf8",class:"menu",role:"presentation"},a("p",{key:"7fbc87e49579153dd90542d59fc742e2b7cba931",class:"sr-only",id:this.listboxLabelId},"Available search shortcuts"),a("ul",{key:"63e9cf33709086ccf87aa27f264c92685ba2ffb4",class:"results",id:this.listboxId,role:"listbox","aria-labelledby":this.listboxLabelId,"aria-describedby":n,"aria-busy":this.loading?"true":undefined,onClick:this.handleResultsClick,onPointerDown:this.handleResultsPointerDown},this.loading&&a("li",{key:"02dbcc291a07b946b549098652511e1c42d57c6b",class:"loading-state",role:"presentation"},a("wa-spinner",{key:"f1d52b783d6ea2bfac842bbc0cae3739bacd65fa"}),a("p",{key:"529398a307f096be3880b5586469c83453967663"},"Loading suggestionsâ€¦")),a("slot",{key:"9be6eb3416d9195e5217fb494e3697a8269119fc",onSlotchange:this.handleSlotChange}),o&&a("li",{key:"140fe19fd14a8d02e257bd95711364f8e7809aff",class:"empty-state",role:"presentation",id:this.emptyStateId},a("wa-icon",{key:"8fea431453d4d16248e5222a30f82da859ce6e22",name:"circle-info","aria-hidden":"true"}),a("p",{key:"0511abccaddbc69f25a24517b577d970610496e6"},"No results found"))))),a("span",{key:"3f6eaa5654d74d103b3030d792ba0ff024c74664",class:"sr-only","aria-live":"polite"},this.liveRegionMessage))}updateLiveRegion(e,t){if(!e){this.liveRegionMessage=t?`No results for ${t}`:"No results available";return}const a=e===1?"result":"results";this.liveRegionMessage=t?`${e} ${a} for ${t}`:`${e} ${a} available`}runAfterNextFrame(e){if(typeof requestAnimationFrame==="function"){requestAnimationFrame((()=>e()));return}setTimeout(e,0)}static get watchers(){return{activeIndex:["handleActiveIndexChange"],"aria-invalid":["handleAriaInvalid"],value:["handleValueChange"]}}};Kl.style=Gl;const Wl=":host{box-sizing:border-box !important}:host *,:host *::before,:host *::after{box-sizing:inherit !important;padding:0;margin:0}[hidden]{display:none !important}:host{box-sizing:border-box;display:block}:host([hidden]){display:none !important}.picker-item__container{all:unset;box-sizing:border-box;width:100%;color:var(--wa-color-text-normal);user-select:none;position:relative;display:flex;align-items:center;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;font-size:inherit;font-family:inherit;font-optical-sizing:inherit;font-size-adjust:inherit;font-kerning:inherit;font-feature-settings:inherit;font-variation-settings:inherit;padding:0;padding:0.5em 1em 0.5em 0.25em !important;line-height:var(--wa-line-height-condensed);transition:fill var(--wa-transition-normal) var(--wa-transition-easing);cursor:pointer;gap:0.5rem;scroll-margin:0.25rem}.picker-item__content{display:flex;align-items:center;gap:0.5rem}.picker-item__container:hover{background-color:var(--wa-color-neutral-fill-normal);color:var(--wa-color-neutral-on-normal)}.picker-item__check{opacity:0}:host([active]) .picker-item__container{background-color:var(--wa-color-brand-fill-loud);color:var(--wa-color-brand-on-loud);opacity:1}:host([selected]) .picker-item__container{font-weight:600}:host([selected]) .picker-item__check{opacity:1}:host([aria-disabled='true']) .picker-item__container,.picker-item__container:disabled{cursor:not-allowed;opacity:0.5}";const Xl=Wl;const Jl=class{constructor(t){e(this,t)}value;label;disabled=false;active=false;selected=false;render(){return a(i,{key:"4a45af265f5b66c331ae2ae90217e1978155bad0",role:"option","aria-selected":this.selected?"true":"false","aria-disabled":this.disabled?"true":"false"},a("button",{key:"2cd60e129e18b47a4eab672ae3aac734e434253c",class:`picker-item__container`,type:"button",tabindex:"-1",disabled:this.disabled,part:"base"},a("wa-icon",{key:"c58b44680bdadb2e36e811d0a44cfc7947962778",class:"picker-item__check",name:"check"}),a("div",{key:"5924ed66e684fdf44ac610f517ccdc3942cef308",class:"picker-item__content",part:"content"},a("slot",{key:"45d0909e73a7ff4790b58ba3dfe6192c27848f99"}))))}};Jl.style=Xl;const Ql="";const Zl=Ql;const ec=class{constructor(a){e(this,a);this.closeModal=t(this,"closeModal",7)}defaultPickupData;numberOfPersons=0;bookingNumber;bookingDates;open;isLoading=false;canSubmitPickup=false;closeModal;_id=`pickup-form-${ae()}`;render(){return a("ir-drawer",{key:"414627e3ad54763f7e7c72179a67c281e565a898",style:{"--ir-drawer-width":"40rem","--ir-drawer-background-color":"var(--wa-color-surface-default)","--ir-drawer-padding-left":"var(--spacing)","--ir-drawer-padding-right":"var(--spacing)","--ir-drawer-padding-top":"var(--spacing)","--ir-drawer-padding-bottom":"var(--spacing)"},label:M.entries.Lcz_Pickup,open:this.open,onDrawerHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.closeModal.emit()}},this.open&&a("ir-pickup-form",{key:"30800e5f960c3add0ef875ed72048b559d963847",onCanSubmitPickupChange:e=>{e.stopImmediatePropagation();e.stopPropagation();this.canSubmitPickup=e.detail},defaultPickupData:this.defaultPickupData,numberOfPersons:this.numberOfPersons,bookingNumber:this.bookingNumber,bookingDates:this.bookingDates,onLoadingChange:e=>this.isLoading=e.detail,onCloseModal:e=>{e.stopImmediatePropagation();e.stopPropagation();this.closeModal.emit()},formId:this._id}),a("div",{key:"285094078fd77aa967ed0f2d3729e7a72db3acce",slot:"footer",class:"ir__drawer-footer"},a("ir-custom-button",{key:"00ea7045203b42b8929c7126b7f24473a18ce05e",class:`flex-fill`,size:"medium",appearance:"filled",variant:"neutral","data-drawer":"close"},M.entries.Lcz_Cancel),this.canSubmitPickup&&a("ir-custom-button",{key:"74d5255539b0f9854ab0d8928b54d07c350d792c",type:"submit",loading:this.isLoading,form:this._id,size:"medium",class:`flex-fill`,variant:"brand"},M.entries.Lcz_Save)))}};ec.style=Zl;class tc{async savePickup(e,t,a){try{if(!e.currency||!e.selected_option){throw new Error("Cannot save pickup without a selected option and currency.")}const i=e.arrival_time.split(":");await ve.post(`/Do_Pickup`,{booking_nbr:t,is_remove:a,currency:e.currency,date:e.arrival_date,details:e.flight_details,hour:i[0],minute:i[1],nbr_of_units:e.number_of_vehicles,selected_option:e.selected_option,total:+e.due_upon_booking})}catch(e){console.log(e)}}transformDefaultPickupData(e){const t=e.hour&&e.minute?q(e.hour)+":"+q(e.minute):"";return{arrival_date:e.date,arrival_time:t,currency:e.currency,due_upon_booking:e.total.toFixed(2),flight_details:e.details,location:e.selected_option.location.id,number_of_vehicles:e.nbr_of_units,selected_option:e.selected_option,vehicle_type_code:e.selected_option.vehicle.code}}getAvailableLocations(e){let t=[];S.pickup_service.allowed_options.forEach((a=>{if(t.filter((e=>e.value===a.location.id)).length===0){t.push({text:e+" "+a.location.description,value:a.location.id})}}));return t}createPickupSchema(e,t,a){const i=Boolean(a?.allowRemoval);const r=e=>{if(typeof e==="number"){return e}if(typeof e==="string"&&e.trim()!==""){const t=Number(e);return Number.isNaN(t)?e:t}return e};const o=Z.string().min(1,{message:"Arrival date is required."}).regex(/^\d{4}-\d{2}-\d{2}$/,{message:"Invalid date format, expected YYYY-MM-DD."});return Z.object({location:Z.preprocess(r,Z.number().int()).refine((e=>i?e===-1||e>0:e>0),{message:"Please select a pickup option."}),arrival_date:Z.preprocess((e=>typeof e==="string"?e:e??""),o).refine((a=>{const i=me(a,"YYYY-MM-DD",true);const r=me(e,"YYYY-MM-DD",true);const o=me(t,"YYYY-MM-DD",true);return i.isValid()&&r.isValid()&&o.isValid()&&i.isBetween(r,o,undefined,"[]")}),{message:`Arrival date must be between ${e} and ${t}.`}),arrival_time:Z.string().regex(/^\d{2}:\d{2}$/,{message:"Invalid time format. Expected HH:MM"}).refine((e=>{const[t,a]=e.split(":").map(Number);return t>=0&&t<=23&&a>=0&&a<=59}),{message:"Time values are out of range"}),flight_details:Z.preprocess((e=>typeof e==="string"?e:""),Z.string().nonempty({message:"Flight details cannot be empty."})),vehicle_type_code:Z.preprocess((e=>typeof e==="string"?e:""),Z.string().nonempty({message:"Vehicle type code cannot be empty."})),number_of_vehicles:Z.preprocess(r,Z.number().int().min(1,{message:"At least one vehicle is required."}))})}validateForm(e,t){return t.safeParse(e)}getNumberOfVehicles(e,t){let a=Math.ceil(t/e);let i=a>1?a:1;let r=a>1?2:3;return Array.from({length:a+r},((e,t)=>i+t))}getPickUpPersonStatus(e){const t=S.pickup_service.allowed_pricing_models.find((t=>t.code===e));if(!t){return null}return t.description}updateDue(e){const t=this.getPickUpPersonStatus(e.code);if(!t){return}if(t==="Person"){return e.amount*e.numberOfPersons}else{return e.amount*e.number_of_vehicles}}}const ac=".sc-ir-pickup-form-h{display:block}.custom-card-container.sc-ir-pickup-form{display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #e4e5ec}.card-title.sc-ir-pickup-form{flex:1}.border-theme.sc-ir-pickup-form{border:1px solid #cacfe7}.pickup__container.sc-ir-pickup-form{display:flex;flex-direction:column;gap:1rem}@media (min-width: 768px){.price-input-container.sc-ir-pickup-form{max-width:290px}}";const ic=ac;const rc=class{constructor(a){e(this,a);this.closeModal=t(this,"closeModal",7);this.canSubmitPickupChange=t(this,"canSubmitPickupChange",7);this.loadingChange=t(this,"loadingChange",7);this.resetBookingEvt=t(this,"resetBookingEvt",7)}get el(){return r(this)}formId;defaultPickupData;numberOfPersons=0;bookingNumber;bookingDates;isLoading=false;allowedOptionsByLocation=[];pickupData={location:-1,flight_details:"",due_upon_booking:"",number_of_vehicles:1,vehicle_type_code:"",currency:undefined,arrival_time:"",arrival_date:null,selected_option:undefined};vehicleCapacity=[];autoValidate=false;closeModal;canSubmitPickupChange;loadingChange;resetBookingEvt;pickupService=new tc;pickupSchema;get shouldRenderDetails(){return this.pickupData.location>0}get isRemovalRequest(){return Boolean(this.defaultPickupData&&this.pickupData.location===-1)}get canSubmitPickup(){return this.defaultPickupData!==null||this.shouldRenderDetails}lastCanSubmit=false;handleSubmitPickupChange(){const e=this.canSubmitPickup;if(e!==this.lastCanSubmit){this.lastCanSubmit=e;this.canSubmitPickupChange.emit(e)}}componentWillLoad(){if(this.defaultPickupData){const e=this.pickupService.transformDefaultPickupData(this.defaultPickupData);this.vehicleCapacity=this.pickupService.getNumberOfVehicles(e.selected_option.vehicle.capacity,this.numberOfPersons);this.allowedOptionsByLocation=S.pickup_service.allowed_options.filter((t=>t.location.id===e.location));this.pickupData={...e}}this.pickupSchema=this.pickupService.createPickupSchema(this.bookingDates.from,this.bookingDates.to,{allowRemoval:this.defaultPickupData!==null});this.lastCanSubmit=this.canSubmitPickup;this.canSubmitPickupChange.emit(this.lastCanSubmit)}handleLocationChange(e){if(e===""){this.allowedOptionsByLocation=[];this.vehicleCapacity=[];this.updatePickupData("location",-1);return}const t=Number(e);this.allowedOptionsByLocation=S.pickup_service.allowed_options.filter((e=>e.location.id===t));const a=this.allowedOptionsByLocation[0];if(!a){this.vehicleCapacity=[];this.pickupData={...this.pickupData,location:t,selected_option:undefined,vehicle_type_code:"",number_of_vehicles:1,due_upon_booking:"",currency:undefined};return}this.vehicleCapacity=this.pickupService.getNumberOfVehicles(a.vehicle.capacity,this.numberOfPersons);const i=this.computeDueAmount(a,this.vehicleCapacity[0]);this.pickupData={...this.pickupData,location:t,selected_option:a,number_of_vehicles:this.vehicleCapacity[0],due_upon_booking:i,vehicle_type_code:a.vehicle.code,currency:a.currency}}handleVehicleQuantityChange(e){if(!e||Number.isNaN(e)||!this.pickupData.selected_option){return}const t=this.computeDueAmount(this.pickupData.selected_option,e);this.pickupData={...this.pickupData,number_of_vehicles:e,due_upon_booking:t}}handleVehicleTypeChange(e){if(!e||this.pickupData.location<=0){return}const t=S.pickup_service.allowed_options.find((t=>t.location.id===this.pickupData.location&&t.vehicle.code===e));if(!t){return}this.vehicleCapacity=this.pickupService.getNumberOfVehicles(t.vehicle.capacity,this.numberOfPersons);const a=this.computeDueAmount(t,this.vehicleCapacity[0]);this.pickupData={...this.pickupData,selected_option:t,number_of_vehicles:this.vehicleCapacity[0],due_upon_booking:a,vehicle_type_code:t.vehicle.code,currency:t.currency}}computeDueAmount(e,t){const a=this.pickupService.updateDue({amount:e.amount,code:e.pricing_model.code,numberOfPersons:this.numberOfPersons,number_of_vehicles:t});return(a??0).toFixed(2)}updatePickupData(e,t){this.pickupData={...this.pickupData,[e]:t}}async savePickup(){if(!this.canSubmitPickup){return}try{this.isLoading=true;this.loadingChange.emit(this.isLoading);const e=this.isRemovalRequest;if(!e){this.autoValidate=true;const e=this.pickupService.validateForm(this.pickupData,this.pickupSchema);if(!e.success){return}}await this.pickupService.savePickup(this.pickupData,this.bookingNumber,e);this.resetBookingEvt.emit(null);this.closeModal.emit(null)}catch(e){console.error(e)}finally{this.isLoading=false;this.loadingChange.emit(this.isLoading)}}render(){return a("form",{key:"53202a057e4acea650ee9139051ff06f64c9e3c4",id:this.formId,class:"pickup__container",onSubmit:async e=>{e.preventDefault();await this.savePickup()}},a("ir-validator",{key:"715062fd447eac3d0063b67cf833ca2e51fc764f",schema:this.pickupSchema.shape.location,autovalidate:this.autoValidate,value:this.pickupData.location,valueEvent:"change wa-change select-change",blurEvent:"wa-hide blur"},a("wa-select",{key:"26ddd6f8cd2249008d6dbcc23aed9df94948ee8e",size:"small",onchange:e=>this.handleLocationChange(e.target.value),defaultValue:this.pickupData.location===-1?"":this.pickupData.location?.toString(),value:this.pickupData.location===-1?"":this.pickupData.location?.toString()},a("wa-option",{key:"749c36e4fa9f355672f3b443aba711e9fb3df4e3",value:""},M.entries.Lcz_Pickup_NoThankYou),this.pickupService.getAvailableLocations(M.entries.Lcz_Pickup_YesFrom).map((e=>a("wa-option",{key:`pickup-location-${e.value}`,value:e.value?.toString()},e.text))))),this.shouldRenderDetails&&a("div",{key:"91fd4faea0b8cd3b295ba129cd333f6aed64281e",class:"pickup__container","data-testid":"pickup_body"},a("ir-validator",{key:"6991e7c333d5127bc5e89e0cd69794497af96def",schema:this.pickupSchema.shape.arrival_date,autovalidate:this.autoValidate,value:this.pickupData.arrival_date??"",valueEvent:"dateChanged",blurEvent:"datePickerBlur blur"},a("ir-custom-date-picker",{key:"06db32e67733534343595f6c9df758269be781b3",date:this.pickupData.arrival_date,minDate:this.bookingDates.from,maxDate:this.bookingDates?.to,emitEmptyDate:true,onDateChanged:e=>{this.updatePickupData("arrival_date",e.detail.start?.format("YYYY-MM-DD")??null)},label:M.entries.Lcz_ArrivalDate})),a("ir-validator",{key:"2de330027c4e9569e23c34d26a1fd3c4669f0d6f",schema:this.pickupSchema.shape.arrival_time,autovalidate:this.autoValidate,value:this.pickupData.arrival_time,valueEvent:"text-change input input-change",blurEvent:"input-blur blur"},a("ir-input",{key:"9c8b458b539f8b791c980051d541190ad3242119",value:this.pickupData.arrival_time,"onText-change":e=>{this.updatePickupData("arrival_time",e.detail)},mask:"time",label:M.entries.Lcz_Time})),a("ir-validator",{key:"26d751b927242f3289ffea85cff338f3884c9a6d",schema:this.pickupSchema.shape.flight_details,autovalidate:this.autoValidate,value:this.pickupData.flight_details,valueEvent:"text-change input input-change",blurEvent:"input-blur blur"},a("ir-input",{key:"c61b2be1be2b68f71eecea53a615d36080652ed0","onText-change":e=>this.updatePickupData("flight_details",e.detail),value:this.pickupData.flight_details,label:M.entries.Lcz_FlightDetails})),a("ir-validator",{key:"71fc6f36f5257565b5098afe00a5ff12e6b1f004",schema:this.pickupSchema.shape.vehicle_type_code,autovalidate:this.autoValidate,value:this.pickupData.vehicle_type_code,valueEvent:"change wa-change select-change",blurEvent:"wa-hide blur"},a("wa-select",{key:"c15c09e59e800ecb8115599e64a5e73845d6f975",size:"small",onchange:e=>this.handleVehicleTypeChange(e.target.value),value:this.pickupData.vehicle_type_code,defaultValue:this.pickupData.vehicle_type_code},this.allowedOptionsByLocation.map((e=>a("wa-option",{value:e.vehicle.code,key:e.vehicle.code},e.vehicle.description))))),a("ir-validator",{key:"d14ab3d1a5ecdc61f39046575c4419255c12c4e2",schema:this.pickupSchema.shape.number_of_vehicles,autovalidate:this.autoValidate,value:this.pickupData.number_of_vehicles,valueEvent:"change wa-change select-change",blurEvent:"wa-hide blur"},a("wa-select",{key:"1861d6df8fbdc4d81dfcb47539df66718a98db5e",size:"small",defaultValue:this.pickupData.number_of_vehicles?.toString(),value:this.pickupData.number_of_vehicles?.toString(),label:M.entries.Lcz_NbrOfVehicles,onchange:e=>{this.handleVehicleQuantityChange(Number(e.target.value))}},this.vehicleCapacity.map((e=>a("wa-option",{key:`capacity_${e}`,value:e.toString()},e))))),a("ir-input",{key:"b6db6963f0adae152d2656b6a721e85cdc1c2bee",mask:"price",readonly:true,label:`${M.entries.Lcz_DueUponBooking}`,value:this.pickupData.due_upon_booking},a("span",{key:"4fc64a4e371c290c9ffd7a78d5e392aa0c8a421f",slot:"start"},this.pickupData.currency?.symbol))))}static get watchers(){return{defaultPickupData:["handleSubmitPickupChange"],pickupData:["handleSubmitPickupChange"]}}};rc.style=ic;const oc=".sc-ir-pickup-view-h{display:block}.pickup-info.sc-ir-pickup-view{display:flex;flex-direction:column;gap:0.75rem}.pickup-info__summary.sc-ir-pickup-view{display:flex;flex-wrap:wrap;gap:0.5rem;justify-content:space-between;align-items:center;color:#1f2a37}.pickup-info__datetime.sc-ir-pickup-view{font-weight:600;margin:0}.pickup-info__due.sc-ir-pickup-view{margin:0;color:#1f2a37}.pickup-info__details.sc-ir-pickup-view{display:flex;flex-direction:column;gap:0.3rem;color:#1f2a37}.pickup-info__line.sc-ir-pickup-view{margin:0;display:flex;flex-wrap:wrap;gap:0.25rem}.pickup-info__label.sc-ir-pickup-view{font-weight:600}.pickup-info__divider.sc-ir-pickup-view{opacity:0.4}.pickup-info__note.sc-ir-pickup-view{margin:0;color:#6b7280;font-size:0.875rem}@media (max-width: 600px){.pickup-info__summary.sc-ir-pickup-view{flex-direction:column;align-items:flex-start}}";const nc=oc;const sc=class{constructor(t){e(this,t)}booking;render(){if(!S.pickup_service.is_enabled||!this.booking.is_editable){return null}return a(i,null,a("wa-card",null,a("p",{slot:"header",class:"font-size-large p-0 m-0 "},M.entries.Lcz_Pickup),a("wa-tooltip",{for:"pickup"},this.booking.pickup_info?"Edit":"Add"," pickup"),a("ir-custom-button",{slot:"header-actions",id:"pickup",size:"small",appearance:"plain",variant:"neutral"},a("wa-icon",{name:"edit",style:{fontSize:"1rem"}})),this.booking.pickup_info?a("div",{class:"pickup-info"},a("div",{class:"pickup-info__summary"},a("div",null,a("p",{class:"pickup-info__datetime"},me(this.booking.pickup_info.date,"YYYY-MM-DD").format("MMM DD, YYYY"),this.booking.pickup_info.hour&&this.booking.pickup_info.minute&&a("span",null," â€¢ ",Ne(this.booking.pickup_info.hour.toString(),this.booking.pickup_info.minute.toString())))),a("p",{class:"pickup-info__due"},a("strong",null,this.booking.pickup_info.currency.symbol,this.booking.pickup_info.total))),a("div",{class:"pickup-info__details"},a("ir-label",{display:"inline",labelText:`${M.entries.Lcz_FlightDetails}:`,content:this.booking.pickup_info.details}),a("p",{class:"pickup-info__line"},a("span",{class:"pickup-info__label"},"Vehicle:"),a("span",null,this.booking.pickup_info.selected_option.vehicle.description)),a("p",{class:"pickup-info__line"},a("span",{class:"pickup-info__label"},M.entries.Lcz_NbrOfVehicles,":"),a("strong",null,this.booking.pickup_info.nbr_of_units))),a("p",{class:"pickup-info__note"},S.pickup_service.pickup_instruction.description,S.pickup_service.pickup_cancelation_prepayment.description)):a("ir-empty-state",null)))}};sc.style=nc;const lc=".sc-ir-pms-logs-h{display:block}.dialog-container-height.sc-ir-pms-logs{height:4rem}.list-title.sc-ir-pms-logs{margin:0;padding:0;font-weight:600;white-space:nowrap;display:inline}.list-item.sc-ir-pms-logs{margin:0;padding:0;font-size:14px;margin-left:5px;width:fit-content}.list-item.green.sc-ir-pms-logs{color:#629a4c;font-weight:600}.list-item.red.sc-ir-pms-logs{color:#ff4961;font-weight:600}";const cc=lc;const dc=class{constructor(t){e(this,t)}bookingNumber;pmsLogs;error;bookingService=new s;userTypeCode;componentWillLoad(){this.init();const e=JSON.parse(localStorage.getItem("UserInfo_b"));if(e){this.userTypeCode=e.USER_TYPE_CODE}}async init(){try{this.pmsLogs=await this.bookingService.fetchPMSLogs(this.bookingNumber)}catch(e){console.error(e)}}render(){return a("div",{key:"bba6c109c80af7774412d59362ecde3555968ecd",class:""},Ce("/Get_Exposed_PMS_Logs")?a("div",{class:"d-flex align-items-center justify-content-center dialog-container-height"},a("ir-spinner",null)):a("div",{class:"dialog-container-height"},a("div",{class:"d-flex align-items-center ",style:{paddingBottom:"0.5rem"}},a("p",{class:"list-title p-0 m-0"},M.entries.Lcz_SentAt,":"),this.pmsLogs?.sent_date?a("p",{class:"list-item"},this.pmsLogs?.sent_date," ",Ne(this.pmsLogs?.sent_hour.toString(),this.pmsLogs?.sent_minute.toString())):a("p",{class:`list-item ${this.pmsLogs?.sent_date?"green":"red"}`},this.pmsLogs?.is_acknowledged?M.entries.Lcz_YES:M.entries.Lcz_NO)),a("div",{class:"d-flex align-items-center p-0 m-0"},a("p",{class:"list-title p-0 m-0"},M.entries.Lcz_Acknowledged),a("div",{class:"d-flex align-items-center",style:{gap:"1rem"}},a("p",{class:`list-item  ${this.pmsLogs?.is_acknowledged?"green":"red"}`},this.pmsLogs?.is_acknowledged?M.entries.Lcz_YES:M.entries.Lcz_NO),!this.pmsLogs?.is_acknowledged&&this.pmsLogs?.revision_id&&this.userTypeCode==="1"&&a("ir-custom-button",{variant:"brand",loading:Ce("/Ack_Exposed_Revision"),onClickHandler:async e=>{e.stopImmediatePropagation();e.stopPropagation();const t=await this.bookingService.ackExposedRevision({revision_id:this.pmsLogs?.revision_id});this.error=t.ExceptionMsg}},"Acknowledge"))),this.error&&a("wa-callout",{size:"small",appearance:"filled-outlined",variant:"danger"},this.error)))}};dc.style=cc;const hc=":host{display:block;width:100%}*{box-sizing:border-box}.popover-trigger{all:unset;cursor:pointer}.popover-trigger:hover,.popover-trigger:focus{color:#000}";const pc=hc;const uc=class{constructor(t){e(this,t)}get el(){return r(this)}content;irPopoverLeft="10px";placement="auto";trigger="focus";renderContentAsHtml=false;initialized=false;popoverTrigger;componentDidLoad(){if(this.initialized){return}this.initializePopover()}initializePopover(){$(this.popoverTrigger).popover({trigger:this.trigger,content:this.content,placement:this.placement,html:this.renderContentAsHtml});this.initialized=true}disconnectedCallback(){$(this.popoverTrigger).popover("dispose")}render(){return a(i,{key:"b799682f025982e64607833f78736956246e2872",style:{"--ir-popover-left":this.irPopoverLeft}},this.trigger!=="focus"?a("p",{ref:e=>this.popoverTrigger=e,class:"popover-title m-0 p-0",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer"}},a("slot",null)):a("button",{tabindex:"0",class:"popover-trigger",ref:e=>this.popoverTrigger=e},a("slot",null)))}};uc.style=pc;const fc=":host{display:block}.ir-fullscreen-dialog::part(dialog){width:100vw;height:100vh;max-width:none;max-height:none;margin:0;border-radius:0}@media print{@page {size:A4;margin:0}html,body{margin:0;padding:0;height:auto}.ir-fullscreen-dialog::part(dialog){position:static !important;width:auto !important;height:auto !important;max-height:none !important;overflow:visible !important;transform:none !important}.ir-fullscreen-dialog::part(header){display:none !important}body *{visibility:hidden}.ir-fullscreen-dialog,.ir-fullscreen-dialog *{visibility:visible}.ir-fullscreen-dialog{position:absolute;top:0;left:0;width:100%}}";const gc=fc;const bc=class{constructor(a){e(this,a);this.previewAction=t(this,"previewAction",7);this.openChanged=t(this,"openChanged",7)}get el(){return r(this)}actionIconByType={print:"file-pdf",download:"download"};printContainer;printPlaceholder;isPrintLayoutActive=false;handleBeforePrint=()=>{if(!this.open){return}this.preparePrintLayout()};handleAfterPrint=()=>{this.restorePrintLayout()};label="Preview";open=false;action="print";downloadUrl;downloadFileName;hideDefaultAction=false;actionButtonLabel;previewAction;openChanged;_id=`download_btn_${ae()}`;async openDialog(){this.open=true}async closeDialog(){this.open=false}async triggerAction(e=this.action,t,a){const i=t??this.downloadUrl;const r=a??this.downloadFileName;let o=false;if(e==="print"){o=this.runPrintAction()}else{o=this.runDownloadAction(i,r)}this.previewAction.emit({action:e,url:i});return o}runPrintAction(){if(typeof window==="undefined"||typeof window.print!=="function"){console.warn("[ir-preview-screen-dialog] window.print is not available in this environment.");return false}this.preparePrintLayout();try{window.print()}finally{this.restorePrintLayout()}return true}runDownloadAction(e,t){if(!e){console.warn("[ir-preview-screen-dialog] No download URL was provided.");return false}if(typeof document==="undefined"){console.warn("[ir-preview-screen-dialog] document is not available in this environment.");return false}const a=document.createElement("a");a.href=e;if(t){a.download=t}a.target="_blank";a.rel="noopener";a.style.display="none";const i=document.body||document.documentElement;i?.appendChild(a);a.click();a.remove();return true}getActionLabel(){if(this.actionButtonLabel){return this.actionButtonLabel}return this.action==="print"?"Print preview":"Download preview"}shouldDisableActionButton(){return this.action==="download"&&!this.downloadUrl}handleActionButtonClick(){this.triggerAction()}preparePrintLayout(){if(typeof document==="undefined"||this.printContainer||this.isPrintLayoutActive){return}const e=Array.from(this.el.children).filter((e=>!e.hasAttribute("slot")));if(!e.length){return}const t=document.createComment("ir-preview-print-placeholder");this.el.insertBefore(t,e[0]);const a=document.createElement("div");a.className="ir-preview-print-container";e.forEach((e=>{a.appendChild(e)}));document.body.appendChild(a);document.body.classList.add("ir-preview-dialog-print-mode");this.printPlaceholder=t;this.printContainer=a;this.isPrintLayoutActive=true}restorePrintLayout(){if(!this.printContainer||!this.printPlaceholder||typeof document==="undefined"){return}const e=this.printPlaceholder.parentNode;if(e){while(this.printContainer.firstChild){e.insertBefore(this.printContainer.firstChild,this.printPlaceholder)}}this.printPlaceholder.remove();this.printContainer.remove();document.body.classList.remove("ir-preview-dialog-print-mode");this.printPlaceholder=undefined;this.printContainer=undefined;this.isPrintLayoutActive=false}componentDidLoad(){if(typeof window==="undefined"){return}window.addEventListener("beforeprint",this.handleBeforePrint);window.addEventListener("afterprint",this.handleAfterPrint)}disconnectedCallback(){if(typeof window!=="undefined"){window.removeEventListener("beforeprint",this.handleBeforePrint);window.removeEventListener("afterprint",this.handleAfterPrint)}this.restorePrintLayout()}render(){return a("ir-dialog",{key:"51684e4d84f84429cfc76c973de28321f31de382",onIrDialogHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.openChanged.emit(false)},label:this.label,open:this.open,class:"ir-fullscreen-dialog"},!this.hideDefaultAction&&a(o,{key:"6158acce4e24f92c0c244ee73ef8d97abdaeb82d"},a("wa-tooltip",{key:"a405333ee3d224d83368da7de41503a2df1670e1",for:this._id},"Print PDF"),a("ir-custom-button",{key:"a10ec27535560506854614eea84540c481039854",id:this._id,size:"medium",slot:"header-actions",variant:"neutral",appearance:"plain",onClickHandler:this.handleActionButtonClick.bind(this),disabled:this.shouldDisableActionButton()},a("wa-icon",{key:"261da901c3e26dc218086f420b7200ac562a24ef",name:this.actionIconByType[this.action],label:this.getActionLabel(),"aria-label":this.getActionLabel()}))),a("slot",{key:"eb8a267a8ec25491779bee1ce5666bae65c66248"}))}};bc.style=gc;const wc=".sc-ir-price-input-h{display:block;--ir-input-border-color:#cacfe7;flex:1 1 0%}.sc-ir-price-input-h .input-group-text.sc-ir-price-input{border-color:var(--ir-input-border-color)}.sc-ir-price-input-h .form-control.sc-ir-price-input,.currency-label.sc-ir-price-input{font-size:14px !important}.ir-bl-lbl-none.sc-ir-price-input,.ir-bl-input-none.sc-ir-price-input{border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.rate-input.sc-ir-price-input:read-only{background:white !important}.ir-br-lbl-none.sc-ir-price-input,.ir-br-input-none.sc-ir-price-input{border-top-right-radius:0 !important;border-bottom-right-radius:0 !important}.ir-br-none.sc-ir-price-input{border-right:none}.ir-bl-none.sc-ir-price-input{border-left:none}.rate-input-container.sc-ir-price-input{display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;flex:1;padding:0 !important}[class='special-style'].sc-ir-price-input-h .rate-input.sc-ir-price-input{background:black !important}.rate-input.sc-ir-price-input{font-size:0.875rem;line-height:0;padding:0;height:0;box-sizing:border-box;border-left:0;padding-left:0px !important;border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.currency-label.with-label.sc-ir-price-input{border-radius:0}.currency-label.sc-ir-price-input{box-sizing:border-box;color:#3b4781;border:1px solid #cacfe7;font-size:0.875rem;height:2rem;background:white;border-right:0;border-top-right-radius:0;border-bottom-right-radius:0;pointer-events:none;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.currency-label.disabled.sc-ir-price-input,.rate-input.sc-ir-price-input:disabled{background-color:#eceff1;border-color:rgba(118, 118, 118, 0.3)}.price-input-group.sc-ir-price-input:focus-within .currency-label.sc-ir-price-input{border-top:1px solid #1e9ff2;border-bottom:1px solid #1e9ff2;border-left:1px solid #1e9ff2}[data-state='error'].sc-ir-price-input-h .currency-label.sc-ir-price-input,[data-state='error'].sc-ir-price-input-h .rate-input.sc-ir-price-input,.error.sc-ir-price-input{border-color:var(--red, #ff4961) !important}.price-input.sc-ir-price-input:focus{border-right-width:1px !important}.is-invalid.sc-ir-price-input{background-image:none !important}";const mc=wc;const vc=class{constructor(a){e(this,a);this.textChange=t(this,"textChange",7);this.inputBlur=t(this,"inputBlur",7);this.inputFocus=t(this,"inputFocus",7)}get el(){return r(this)}label;readOnly;inputStyle;labelStyle;disabled;currency;autoValidate=true;wrapKey;zod;placeholder="";value="";required=false;minValue;maxValue;testId;error;containerClassname;labelContainerClassname;textChange;inputBlur;inputFocus;id;opts={mask:Number,scale:2,radix:".",mapToRadix:[","],normalizeZeros:true,padFractionalZeros:true,thousandsSeparator:","};mask;inputRef;componentWillLoad(){if(this.el.id){this.id=this.el.id}else{this.id=ae()}}componentDidLoad(){if(!this.mask){this.initializeMask()}}initializeMask(){const e={...this.opts};if(this.minValue!==undefined){e["min"]=this.minValue}if(this.maxValue!==undefined){e["max"]=this.maxValue}this.mask=Te(this.inputRef,e);if(this.value){this.mask.value=this.value}this.mask.on("accept",(()=>{const e=this.inputRef.value.trim()===""||this.mask.unmaskedValue==="";if(e){this.value="";this.textChange.emit(null)}else{this.value=this.mask.unmaskedValue;this.textChange.emit(this.value)}}))}hasSpecialClass(e){return this.el.classList.contains(e)}validateInput(e){if(!this.autoValidate){return}if(this.zod){try{this.zod.parse(this.wrapKey?{[this.wrapKey]:e}:e);this.error=false}catch(e){console.log(e);this.error=true}}}handleInputChange=()=>{this.validateInput(this.value)};handleBlur=()=>{this.validateInput(this.value);if(this.value){const e=parseFloat(this.value);this.value=e.toFixed(2);if(this.mask){this.mask.value=this.value}}this.inputBlur.emit(this.value)};handleFocus=()=>{this.inputFocus.emit()};render(){return a("fieldset",{key:"04bdd48ec29d37e068b955b3ddef5d6dc17a83ab",class:`${this.containerClassname} input-group price-input-group m-0 p-0 `},this.label&&a("div",{key:"db548ba9694635568d51bde9c85657842ecd8b6a",class:`input-group-prepend ${this.labelContainerClassname}`},a("span",{key:"8b2e57e1868ff85fa7180dad6b7b197bdb53dd62",class:`input-group-text \n                ${this.labelStyle}\n              ${this.hasSpecialClass("ir-bl-lbl-none")?"ir-bl-lbl-none":""}\n              ${this.hasSpecialClass("ir-br-lbl-none")?"ir-br-lbl-none":""}\n              ${this.hasSpecialClass("ir-br-none")?"ir-br-none":""} \n              ${this.hasSpecialClass("ir-bl-none")?"ir-bl-none":""} \n              `},a("label",{key:"ad9c6a5697c6cb007fe22423073d09e953af5260",class:"p-0 m-0 ",htmlFor:this.id},this.label))),a("div",{key:"a80022f010d0247dcb73d93441718bda3794f214",class:"position-relative has-icon-left rate-input-container"},this.currency&&a("div",{key:"c66405a621139e5277c6feb6ea50ebc87c925b67"},a("span",{key:"871dee106eef5125b5348e2763de644341892657",class:`input-group-text ${this.disabled?"disabled":""} currency-label ${this.error?"error":""} ${this.label?"with-label":""}`},this.currency)),a("input",{key:"b3d72e1c55c487d3b36bf5b2560db4ccbcb8fbe3",ref:e=>this.inputRef=e,"data-testid":this.testId,disabled:this.disabled,id:this.id,class:`form-control input-sm rate-input \n              ${this.inputStyle}\n              ${this.hasSpecialClass("ir-br-input-none")?"ir-br-input-none":""} \n              ${this.hasSpecialClass("ir-bl-input-none")?"ir-bl-input-none":""} \n              ${this.error?"error":""} py-0 m-0 ${this.currency?"ir-bl-none":""}`,onInput:this.handleInputChange,onBlur:this.handleBlur,onFocus:this.handleFocus,type:"text",placeholder:this.placeholder,readOnly:this.readOnly,"aria-label":this.el.ariaLabel??"price-input","aria-describedby":this.el.ariaDescription??"price-input"})))}};vc.style=mc;const yc=":host{box-sizing:border-box !important}:host *,:host *::before,:host *::after{box-sizing:inherit !important;padding:0;margin:0}[hidden]{display:none !important}:host{display:block;}.ir-print-room__header{display:flex;align-items:center;gap:0.625rem;font-weight:bold;font-size:1rem;line-height:1.5rem;margin-bottom:0.375rem}.ir-print-room__body{display:flex;align-items:center;gap:0.625rem;flex-wrap:wrap}.ir-print-room__details{flex:1 1 0%}.ir-print-room__row{display:flex;align-items:center;gap:1rem}.ir-print-room__daily-amounts{display:flex}.room_amount{min-width:4.38rem}.room_amount_container{display:flex;font-weight:600;flex-direction:column}.room_amount{min-width:4.38rem}.room_amount_day{padding:0.31rem}.room_amount_day.amount{font-weight:700;text-transform:capitalize}.room_amount_day.rate{font-weight:700;color:rgb(51, 51, 51)}.room_amount_empty{color:white;pointer-events:none;user-select:none;-webkit-user-drag:none;display:none}.room_amount_rate{display:none;color:#333;font-size:1rem;font-weight:bold}.room_amount_main_container{display:flex;flex-wrap:wrap;}.room_amount.date{color:#1f2937;background:#f3f4f6}.room_amount.amount{margin-bottom:0.5rem}.ir-print-room__daily-amounts--with-divider{padding-bottom:1rem}p,div,section,span{margin:0;padding:0;box-sizing:border-box}body{display:block;font-size:0.88rem;font-weight:600;box-sizing:border-box}.main-container{max-width:56.25rem;margin-left:auto;margin-right:auto;}.label-title{padding:0;margin:0;color:rgb(51, 51, 51);font-weight:700}.label-value{padding-left:0.25rem;color:rgb(102, 102, 102);font-weight:600}.booking-details,.pickup-container{padding:0.94rem 0;border-top:1px solid rgb(128, 128, 128);border-bottom:1px solid rgb(128, 128, 128)}.accommodation-summary{display:flex;align-items:center;justify-content:space-between;padding:0.94rem 0;flex-wrap:wrap;gap:0.62rem}.booking-dates{color:rgb(51, 51, 51);font-weight:700;padding:0;margin:0}.roomtype-title td{padding-top:1.56rem;padding-right:0.62rem}.policies{font-size:0.88rem}.policies-container{padding:0.62rem 0.06rem 0.94rem 0.06rem}.policies{padding-inline:0.06rem}.room_amount_day{padding:0.31rem}.room_amount_day.amount{font-weight:700;text-transform:capitalize}.room_amount_day.rate{font-weight:700;color:rgb(51, 51, 51)}.pricing-summary{text-align:end;padding-left:0.62rem;padding-bottom:0.94rem}.room_amount.date{color:#1f2937;background:#f3f4f6}.room_amount.amount{margin-bottom:0.5rem}.pricing-breakdown{display:flex;align-items:center;justify-content:flex-end;flex-wrap:wrap;gap:0.25rem}.property_name,.booked_on_date,.invoice_reference{color:rgb(51, 51, 51);font-size:0.88rem;font-weight:700}.booking-number{font-size:1.25rem;font-weight:600}.header{display:flex;justify-content:space-between;padding-bottom:0.94rem}.booked_on_date{font-weight:600}.reservation-details{display:flex;align-items:center;justify-content:flex-end}.origin-icon{height:2.5rem;width:2.5rem}.invoice_reference{text-align:end}.billing_header{color:#333;box-sizing:border-box;font-size:1rem}.billing_cell{text-align:left}.billing_table{padding:0.62rem 0}.billing_table caption{text-align:start;font-size:1.12rem;padding:0.62rem 0rem 0.94rem}.pickup-details{display:flex;align-items:center;flex-wrap:wrap}.pickup_title{font-size:1.12rem;padding:0rem 0 0.94rem 0}.car_name{color:#333;font-weight:bold;padding-right:0.62rem}.pickup-details .label-title{padding-right:0.62rem}.billing_reference{width:2.5rem}.room_amount_container{display:flex;flex-direction:column}.room_amount{min-width:4.38rem}.room_amount_empty{color:white;pointer-events:none;user-select:none;-webkit-user-drag:none;display:none}.room_amount_rate{display:none;color:#333;font-size:1rem;font-weight:bold}.room_amount_main_container{display:flex;flex-wrap:wrap;}.ir-print-room__tax-row{display:flex;font-size:0.875rem;font-weight:700}.ir-print-room__totals{display:flex;gap:0.25rem;flex-direction:column}.ir-print-room__header{font-size:1.1rem}.ir-print-room__dates{display:flex;align-items:center;gap:0.5rem;font-weight:600}.ir-print-room__body{flex-direction:column}.ir-print-room__body{align-items:flex-start;margin-top:1rem}@media (min-width: 640px){.ir-print-room__totals{align-items:flex-end}.room_amount_container{flex-direction:column}.ir-print-room__body{flex-direction:row}.billing_header,.billing_cell{padding:0.62rem}.billing_reference{width:auto}.room_amount_empty{display:block}.room_amount_rate{display:block}}";const kc=yc;const _c=class{constructor(t){e(this,t)}room;booking;property;currency;idx;getSmokingLabel(){const{booking:e,room:t,property:a}=this;if(e?.is_direct){if(!t?.smoking_option)return null;const e=a?.roomtypes?.find((e=>e.id===t?.roomtype?.id));const i=e?.smoking_option?.allowed_smoking_options;return i?.find((e=>e.code===t.smoking_option))?.description??null}return t?.ota_meta?.smoking_preferences??null}formatDate(e){const t=me(e,"YYYY-MM-DD");const a=t.format("DD/MM");let i=t.format("ddd");if(["Thu","Sun","Sat"].includes(i)){i=i.slice(0,2)}else{i=i.charAt(0)}return`${a} ${i}`}formatGuestName({first_name:e,last_name:t}){if(!t){return e}return`${e} ${t}`}formatGuestAvailability({adult_nbr:e,children_nbr:t,infant_nbr:a}){const i=e>0?e:0;const r=t>0?t:0;const o=a>0?a:0;const n=i>1?"adults":"adult";const s=r>1?"children":"child";const l=o>1?"infants":"infant";const c=[];if(i>0){c.push(`${i} ${n}`)}if(r>0){c.push(`${r} ${s}`)}if(o>0){c.push(`${o} ${l}`)}return c.join("&nbsp&nbsp&nbsp&nbsp")}formatBookingDates(e){return me(e,"YYYY-MM-DD").format("DD-MMM-YYYY")}renderTaxSection(){if(!this.booking?.is_direct){const e=this.room.ota_taxes.filter((e=>e.amount>0));return e.map(((e,t)=>a("div",{key:`room_${e.name}_${t}`,class:"ir-print-room__tax-row"},a("p",{class:"ir-print-room__tax-label"},e.is_exlusive?"Excluding":"Including"," ",e.name),a("p",{class:"ir-print-room__tax-amount"},e.currency.symbol,e.amount))))}const e=this.property?.taxes?.filter((e=>e.pct>0&&e.is_exlusive));return a(o,null,e?.map(((e,t)=>{const i=this.room.total*e.pct/100;return a("div",{key:`direct_room_${e.name}_${t}`,class:"ir-print-room__tax-row"},a("p",{class:"ir-print-room__tax-label"},e.is_exlusive?"Excluding":"Including"," ",e.name),a("p",{class:"ir-print-room__tax-amount"},e.pct,"%: ",E(this.currency,i)))})),this.room.inclusive_taxes?.CALCULATED_INCLUSIVE_TAXES?.map(((e,t)=>a("div",{key:`direct_room_${e.TAX_NAME}_${t}`,class:"ir-print-room__tax-row"},a("p",{class:"ir-print-room__tax-label"},"Including ",e.TAX_NAME),a("p",{class:"ir-print-room__tax-amount"},e.TAX_PCT*100,"%: ",E(this.currency,e.CALCULATED_VALUE))))))}render(){const{room:e,booking:t,property:i,currency:r,idx:o}=this;const n=i.roomtypes?.find((t=>t.id===e?.roomtype?.id))?.physicalrooms?.length>1;return a("section",{key:"a20db74f38301092a4ec2cfe29addc850a441754",class:"ir-print-room"},a("header",{key:"47e1dd5ca43af1fa5106a36d3340481fac4c58e7",class:"ir-print-room__header"},a("p",{key:"f4f516c51470ad40c5a8dc7cfcec8568a1e4abb2",class:"ir-print-room__room-type"},e?.roomtype?.name),n&&e?.unit&&a("p",{key:"0612e467af78d5047c6bd7e3026d61306cf65297",class:"ir-print-room__unit"},"(unit ",e.roomtype.id,")"),a("p",{key:"17f2fe2630b6451649793679b822d67f0c6b5e0f",class:"ir-print-room__rate-plan"},e?.rateplan?.short_name||e?.rateplan?.name)),a("div",{key:"84b4cab504cc9b91b9722e97e3804aed638ac316",class:"ir-print-room__body"},a("div",{key:"d21b4079fd28131090b230f7eb94b2f6f8e2964b",class:"ir-print-room__details"},a("div",{key:"f070696a612d4276e396685ad9107d26d7fd3399",class:"ir-print-room__row"},a("ir-printing-label",{key:"1bdad0920eabb41b74d91f32e01f5f503b5c3aa3",label:"Guest Name:",content:this.formatGuestName(e?.sharing_persons?.find((e=>e.is_main))??e?.guest)}),a("ir-printing-label",{key:"bdd2798497a86e2f9fc01f333fba52b2cb34d93d","as-html":true,content:this.formatGuestAvailability(e?.occupancy)})),a("div",{key:"09733054fd14f4a6dc6325e8191d2e55aa5994af",class:"ir-print-room__row"},a("div",{key:"21e6761d2a34b4b3aa8784ec4472d18df3ce370a",class:"ir-print-room__dates"},this.formatBookingDates(e?.from_date),a("span",{key:"1ffee991e9171e67b53460eae2f4c4b694819273",class:"ir-print-room__date-separator"},"â†’"),this.formatBookingDates(e?.to_date)),e?.departure_time?.description&&a("p",{key:"352c841330e55de733fe5887fae46febed0305b4",class:"ir-print-room__departure-time"},"(Expected departure time: ",e.departure_time.description,")")),a("ir-printing-label",{key:"95476851630694263c0815eb24f44d63c381c9a5",label:"Smoking options:",display:"inline",content:this.getSmokingLabel()}),t?.is_direct&&a("div",{key:"85e81b603b3ca1b690f6d592d10658c35c0ebbcf",class:"ir-print-room__policies"},a("ir-printing-label",{key:"bc7552b2f018da3f9ff0432f28984d51440ca974",label:"Cancellation:",display:"inline",asHtml:true,content:e?.rateplan?.cancelation?.replace("<u>","")?.replace("</u>","")?.replace("<b>",'<b style="font-weight:bold">')}),a("ir-printing-label",{key:"4dcbe518dc3673d67f19a3513ef59a0daa9507fc",label:"Guarantee:",display:"inline",asHtml:true,content:(e?.rateplan?.guarantee??"")?.replace("<u>","")?.replace("</u>","")?.replace("<b>",'<b style="font-weight:bold">')}))),a("aside",{key:"dedd4ba25804c5101f4de66dc25bdd52e2b2b1a6",class:"ir-print-room__totals"},a("ir-printing-label",{key:"7fad7b6440ab7b61736549926467583fefecbff2",label:"Total:",content:E(r,e?.total)}),this.renderTaxSection(),a("ir-printing-label",{key:"ebcd2cc1a9ecc3a7ab2f29e3c01f6c0d781f3ad6",label:"Grand total:",content:E(r,e?.gross_total)}),t?.is_direct&&a("ir-printing-label",{key:"f0292dfb8fdbe322d30a47994f64c47953b26a60",label:"Due upon booking:",content:E(r,Number(e?.gross_guarantee))}))),a("div",{key:"a60e5aa51200bdc80696bd11d5e6c521eb89e179",class:{"ir-print-room__daily-amounts":true,"ir-print-room__daily-amounts--with-divider":o<t?.rooms?.length-1}},e?.days?.map((e=>a("div",{class:"room_amount_container",key:e.date},a("p",{class:"room_amount date"},this.formatDate(e.date)),a("p",{class:"room_amount amount",style:{paddingRight:"0.375rem"}},E(r,e.amount)))))))}};_c.style=kc;const xc=":host{box-sizing:border-box !important}:host *,:host *::before,:host *::after{box-sizing:inherit !important;padding:0;margin:0}[hidden]{display:none !important}:host{display:block}.ir-print-extra-services{padding:1rem 0;border-top:1px solid #d1d5db}.ir-print-extra-services__title{font-weight:600;font-size:1.125rem ;line-height:1.75rem ;color:#111827;margin-bottom:0.625rem}.ir-print-extra-services__list{display:flex;flex-direction:column;gap:0.75rem}.ir-print-extra-services__item{display:flex;justify-content:space-between;gap:1rem;flex-wrap:wrap}.ir-print-extra-services__details{display:flex;flex-direction:column;gap:0.25rem;max-width:80%}.ir-print-extra-services__description{word-break:break-word}.ir-print-extra-services__dates{font-size:0.75rem;color:#374151}.ir-print-extra-services__date-wrapper{display:inline-flex;align-items:center;gap:0.25rem}.ir-print-extra-services__date{white-space:nowrap}.ir-print-extra-services__date-separator{margin:0 0.25rem}.ir-print-extra-services__date::part(content){font-size:0.875rem}.ir-print-extra-services__price{font-weight:700;white-space:nowrap}";const Dc=xc;const Cc=class{constructor(t){e(this,t)}extraServices;currency;invocableKeys;render(){return a("section",{key:"693381de89eb11d6f191aebf59bc339e7cfd0773",class:"ir-print-extra-services"},a("h3",{key:"bdf2125bb7a5d46ce27d08a7c730a0c97df99fa2",class:"ir-print-extra-services__title"},"Extra services"),a("div",{key:"b6261c75ca4235053f9395076850fe7af76217b2",class:"ir-print-extra-services__list"},this.extraServices?.map((e=>{if(!this.invocableKeys.has(e.system_id)){return null}return a("div",{key:`service_${e.system_id}`,class:"ir-print-extra-services__item"},a("div",{class:"ir-print-extra-services__details"},a("ir-printing-label",{display:"inline",label:"",class:"ir-print-extra-services__description",content:e.description}),(e.start_date||e.end_date)&&a("div",{class:"ir-print-extra-services__dates"},a("span",{class:"ir-print-extra-services__date-wrapper"},"(",e.start_date&&a("ir-printing-label",{class:"ir-print-extra-services__date",label:"",content:me(e.start_date).format("dddd, DD MMM YYYY")}),e.end_date&&a(o,null,a("span",{class:"ir-print-extra-services__date-separator"},"â€“"),a("ir-printing-label",{class:"ir-print-extra-services__date",label:"",content:me(e.end_date).format("dddd, DD MMM YYYY")})),")"))),a("div",{class:"ir-print-extra-services__price"},E(this.currency?.symbol,e?.price||0)))}))))}};Cc.style=Dc;const Mc=":host{box-sizing:border-box !important}:host *,:host *::before,:host *::after{box-sizing:inherit !important;padding:0;margin:0}[hidden]{display:none !important}:host{display:block}:host([display='inline']) .ir-printing-label__container{display:inline-flex !important;max-width:100%;align-items:center}.ir-printing-label__container{display:flex;align-items:center;gap:0.25rem}.ir-printing-label__header{font-size:0.75rem;font-weight:600}.ir-printing-label__label{font-size:var(--wa-font-size-m);font-family:var(--wa-font-family-heading);font-weight:var(--wa-font-weight-heading);line-height:var(--wa-line-height-condensed);text-wrap:balance}.ir-printing-label__content{font-size:0.875rem}.ir-printing-label__text{margin:0}.ir-printing-label__footer{margin-top:0.25rem}";const Yc=Mc;const Sc=class{constructor(t){e(this,t)}label;asHtml;display="flex";content;render(){if(!this.content){return null}return a(i,{class:"ir-printing-label"},a("section",{part:"container",class:"ir-printing-label__container"},this.label&&a("p",{class:"ir-printing-label__label",part:"label"},this.label),this.asHtml?a("p",{part:"content",class:"ir-printing-label__text",innerHTML:this.content}):a("p",{part:"content",class:"ir-printing-label__text"},this.content)))}};Sc.style=Yc;const Ec=":host{box-sizing:border-box !important}:host *,:host *::before,:host *::after{box-sizing:inherit !important;padding:0;margin:0}[hidden]{display:none !important}.main-container{max-width:56.25rem;margin-left:auto;margin-right:auto;}.label-title{padding:0;margin:0;color:rgb(51, 51, 51);font-weight:700}.label-value{padding-left:0.25rem;color:rgb(102, 102, 102);font-weight:600}.booking-details,.pickup-container{padding:0.94rem 0;border-top:1px solid rgb(128, 128, 128);border-bottom:1px solid rgb(128, 128, 128)}.accommodation-summary{display:flex;align-items:center;justify-content:space-between;padding:0.94rem 0;flex-wrap:wrap;gap:0.62rem}.booking-dates{color:rgb(51, 51, 51);font-weight:700;padding:0;margin:0}.roomtype-title td{padding-top:1.56rem;padding-right:0.62rem}.policies{font-size:0.88rem}.policies-container{padding:0.62rem 0.06rem 0.94rem 0.06rem}.policies{padding-inline:0.06rem}.room_amount_day{padding:0.31rem}.room_amount_day.amount{font-weight:700;text-transform:capitalize}.room_amount_day.rate{font-weight:700;color:rgb(51, 51, 51)}.pricing-summary{text-align:end;padding-left:0.62rem;padding-bottom:0.94rem}.room_amount.date{color:#1f2937;background:#f3f4f6}.room_amount.amount{margin-bottom:0.5rem}.pricing-breakdown{display:flex;align-items:center;justify-content:flex-end;flex-wrap:wrap;gap:0.25rem}.property_name,.booked_on_date,.invoice_reference{color:rgb(51, 51, 51);font-size:0.88rem;font-weight:700}.booking-number{font-size:1.25rem;font-weight:600}.header{display:flex;justify-content:space-between;padding-bottom:0.94rem}.booked_on_date{font-weight:600}.reservation-details{display:flex;align-items:center;justify-content:flex-end}.origin-icon{height:2.5rem;width:2.5rem}.invoice_reference{text-align:end}.billing_header{color:#333;box-sizing:border-box;font-size:1rem}.billing_cell{text-align:left}.billing_table{padding:0.62rem 0}.billing_table caption{text-align:start;font-size:1.12rem;padding:0.62rem 0rem 0.94rem}.pickup-details{display:flex;align-items:center;flex-wrap:wrap}.pickup_title{font-size:1.12rem;padding:0rem 0 0.94rem 0}.car_name{color:#333;font-weight:bold;padding-right:0.62rem}.pickup-details .label-title{padding-right:0.62rem}.billing_reference{width:2.5rem}.room_amount_container{display:flex;flex-direction:column}.room_amount{min-width:4.38rem}.room_amount_empty{color:white;pointer-events:none;user-select:none;-webkit-user-drag:none;display:none}.room_amount_rate{display:none;color:#333;font-size:1rem;font-weight:bold}.room_amount_main_container{display:flex;flex-wrap:wrap;}@media only screen and (min-width: 768px){.room_amount_container{flex-direction:column}.billing_header,.billing_cell{padding:0.62rem}.billing_reference{width:auto}.room_amount_empty{display:block}.room_amount_rate{display:block}}:host{display:block}.ir-print-pickup{padding:1rem 0;border-top:1px solid #d1d5db}.ir-print-pickup__title{font-size:1.125rem;font-weight:600;color:#111827;margin-bottom:0.625rem}.ir-print-pickup__content{display:flex;flex-direction:column;gap:0.5rem}.ir-print-pickup__row{display:flex;align-items:center;flex-wrap:wrap;gap:0.75rem}.ir-print-pickup__row--secondary{margin-top:0.375rem}.ir-print-pickup__vehicle{font-weight:500;white-space:nowrap}.ir-print-pickup__vehicle-separator{margin:0 0.25rem}";const Ic=Ec;const Tc=class{constructor(t){e(this,t)}pickup;render(){if(!this.pickup){return null}return a("section",{class:"ir-print-pickup"},a("p",{class:"ir-print-pickup__title"},"Yes, from ",this.pickup.selected_option.location.description),a("div",{class:"ir-print-pickup__content"},a("div",{class:"ir-print-pickup__row"},a("ir-printing-label",{label:"Arrival date:",content:me(this.pickup.date).format("dddd, DD MMM YYYY")}),a("ir-printing-label",{label:"Arrival time:",content:Ne(this.pickup.hour.toString(),this.pickup.minute.toString())}),a("ir-printing-label",{label:"Flight details:",content:this.pickup.details})),a("div",{class:"ir-print-pickup__row ir-print-pickup__row--secondary"},a("p",{class:"ir-print-pickup__vehicle"},this.pickup.selected_option.vehicle.description,a("span",{class:"ir-print-pickup__vehicle-separator"}," â€“ "),E(this.pickup.selected_option.currency.symbol,this.pickup.selected_option.amount)),a("ir-printing-label",{label:"Number of vehicles:",content:this.pickup.nbr_of_units?.toString()}),a("ir-printing-label",{label:"Due upon booking:",content:E(this.pickup.currency.symbol,this.pickup.total)}))))}};Tc.style=Ic;const Oc=":host{box-sizing:border-box !important}:host *,:host *::before,:host *::after{box-sizing:inherit !important;padding:0;margin:0}[hidden]{display:none !important}.main-container{max-width:56.25rem;margin-left:auto;margin-right:auto;}.label-title{padding:0;margin:0;color:rgb(51, 51, 51);font-weight:700}.label-value{padding-left:0.25rem;color:rgb(102, 102, 102);font-weight:600}.booking-details,.pickup-container{padding:0.94rem 0;border-top:1px solid rgb(128, 128, 128);border-bottom:1px solid rgb(128, 128, 128)}.accommodation-summary{display:flex;align-items:center;justify-content:space-between;padding:0.94rem 0;flex-wrap:wrap;gap:0.62rem}.booking-dates{color:rgb(51, 51, 51);font-weight:700;padding:0;margin:0}.roomtype-title td{padding-top:1.56rem;padding-right:0.62rem}.policies{font-size:0.88rem}.policies-container{padding:0.62rem 0.06rem 0.94rem 0.06rem}.policies{padding-inline:0.06rem}.room_amount_day{padding:0.31rem}.room_amount_day.amount{font-weight:700;text-transform:capitalize}.room_amount_day.rate{font-weight:700;color:rgb(51, 51, 51)}.pricing-summary{text-align:end;padding-left:0.62rem;padding-bottom:0.94rem}.room_amount.date{color:#1f2937;background:#f3f4f6}.room_amount.amount{margin-bottom:0.5rem}.pricing-breakdown{display:flex;align-items:center;justify-content:flex-end;flex-wrap:wrap;gap:0.25rem}.property_name,.booked_on_date,.invoice_reference{color:rgb(51, 51, 51);font-size:0.88rem;font-weight:700}.booking-number{font-size:1.25rem;font-weight:600}.header{display:flex;justify-content:space-between;padding-bottom:0.94rem}.booked_on_date{font-weight:600}.reservation-details{display:flex;align-items:center;justify-content:flex-end}.origin-icon{height:2.5rem;width:2.5rem}.invoice_reference{text-align:end}.billing_header{color:#333;box-sizing:border-box;font-size:1rem}.billing_cell{text-align:left}.billing_table{padding:0.62rem 0}.billing_table caption{text-align:start;font-size:1.12rem;padding:0.62rem 0rem 0.94rem}.pickup-details{display:flex;align-items:center;flex-wrap:wrap}.pickup_title{font-size:1.12rem;padding:0rem 0 0.94rem 0}.car_name{color:#333;font-weight:bold;padding-right:0.62rem}.pickup-details .label-title{padding-right:0.62rem}.billing_reference{width:2.5rem}.room_amount_container{display:flex;flex-direction:column}.room_amount{min-width:4.38rem}.room_amount_empty{color:white;pointer-events:none;user-select:none;-webkit-user-drag:none;display:none}.room_amount_rate{display:none;color:#333;font-size:1rem;font-weight:bold}.room_amount_main_container{display:flex;flex-wrap:wrap;}@media only screen and (min-width: 768px){.room_amount_container{flex-direction:column}.billing_header,.billing_cell{padding:0.62rem}.billing_reference{width:auto}.room_amount_empty{display:block}.room_amount_rate{display:block}}:host{display:block;width:100%;color:#1b1d26;background-color:white;padding:1rem}.proforma-invoice__company-details::part(container){text-align:end;justify-content:flex-end}.invoice__layout{display:flex;justify-content:space-between}.invoice__column,.property-overview{display:flex;flex-direction:column}.invoice__column--property,.property-overview{align-items:flex-end;text-align:end}.bill-to-section,.property-overview{margin-top:0.875rem}.property-logo{height:2.5rem}.invoice{max-width:58.25rem;margin-left:auto !important;margin-right:auto !important}.proforma__accommodation-container{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:1rem;padding:1rem 0;border-top:1px solid #d1d5db}.ir-proforma-invoice__service{display:flex;align-items:flex-start;justify-content:space-between}.ir-proforma-invoice__checkbox-price{font-weight:700;white-space:nowrap}.ir-proforma-invoice__cancellation-date{font-size:0.875rem;color:#374151}.ir-proforma-invoice__cancellation-info{display:flex;flex-direction:column;gap:0.25rem;max-width:80%}.proforma__accommodation-container .proforma__accommodation-title{font-weight:600;font-size:1.125rem ;line-height:1.75rem ;color:#111827}.invoice__title{font-size:1.3rem}.invoice__layout{padding:1rem 0}.proforma-payment__section{font-size:1rem;display:flex;flex-direction:column;padding:1rem 0;gap:0.5rem;border-top:1px solid #d1d5db}@media print{.invoice{min-width:100%;height:auto;min-height:auto}.invoice,.invoice *{visibility:visible}.invoice{position:absolute;top:0;left:0;width:100%}}";const zc=Oc;const Ac=class{constructor(t){e(this,t)}booking;invoice;property;invoiceInfo;locale="en";footerNote;invocableKeys;componentWillLoad(){this.invocableKeys=new Set(this.invoice?.items?.map((e=>e.key)))}handleInvoiceChange(){this.invocableKeys=new Set(this.invoice?.items?.map((e=>e.key)))}get bookingNumber(){if(!this.booking.is_direct){return`${this.booking.booking_nbr} | ${this.booking.channel_booking_nbr}`}return this.booking.booking_nbr}get CompanyLocation(){const{company:e}=this.property;const{postal:t,city:i,country:r}=e;if(!t&&!i&&!r)return null;const o=[];if(t){o.push(t)}if(i){o.push(i)}if(r){if(t||i){o.push(`,${r.name}`)}else{o.push(e.name)}}if(o.length===0){return null}return a("p",{class:"invoice-company__location"},o.join(" "))}get guestPhoneNumber(){const{country_phone_prefix:e,mobile_without_prefix:t}=this.booking.guest;if(!e){return t}return`+${e?.replace("+","")}-${t}`}formatDisplayDate(e){if(!e){return null}const t=me(e,["YYYY-MM-DD",me.ISO_8601],true);if(!t.isValid()){return null}return t.format("MMMM DD, YYYY")}get issueDate(){return this.formatDisplayDate(this.invoice?.Date)??"â€”"}renderPropertyCompanyHeader(){const{company:e}=this.property;if(!e){return null}return a("div",{class:"invoice-company","aria-label":"Issuing company details"},e.name&&a("p",{class:"invoice-company__name"},e.name),e.address&&a("p",{class:"invoice-company__address"},e.address),this.CompanyLocation,e.phone&&a("ir-printing-label",{class:"proforma-invoice__company-details",label:"Phone:",content:`${e.country?.phone_prefix??""} ${e.phone}`.trim()}),e.tax_nbr&&a("ir-printing-label",{class:"proforma-invoice__company-details",label:"Tax ID:",content:e.tax_nbr}))}renderPropertyInfo(){const e=[this.property?.city?.name??null,this.property?.country?.name??null].filter((e=>e!==null)).join(", ");const t=this.property?.space_theme?.logo;return a("section",{class:"property-overview","aria-label":"Property overview"},a("div",{class:"property-overview__text"},a("p",{class:"property-overview__name"},this.property.name),a("p",{class:"property-overview__location"},e)),t&&a("img",{src:t,alt:`${this.property.name} logo`,class:"property-logo"}))}formatBookingDates(e){return me(e,"YYYY-MM-DD").format("DD-MMM-YYYY")}renderBillToSection(){const{guest:e,company_name:t,company_tax_nbr:i}=this.booking;const{target:r,billed_to_name:o}=this.invoice;if(r?.code==="002"){return a("div",{class:"bill-to","aria-label":"Bill to company"},t&&a("p",{class:"bill-to__name"},t),i&&a("p",{class:"bill-to__id"},i))}return a("div",{class:"bill-to","aria-label":"Bill to guest"},o&&a("p",null,o),a("p",{class:"bill-to__name"}," ",o&&a("b",null,"for")," ",[e.first_name??"",e.last_name??""].join(" ").trim()),e.email&&a("p",{class:"bill-to__contact"},e.email),this.guestPhoneNumber&&a("p",{class:"bill-to__contact"},this.guestPhoneNumber))}renderCancellationPenalty(){const e=this.booking.financial.payments?.find((e=>e.payment_type?.code==="013"));if(!e){return null}const t=e.system_id;if(!this.invocableKeys.has(t)){return null}return a("section",{class:"proforma-payment__section"},a("div",{class:"ir-proforma-invoice__service"},a("div",{class:"ir-proforma-invoice__cancellation-info"},a("p",null,"Cancellation penalty"),a("p",{class:"ir-proforma-invoice__cancellation-date"},"( ",this.formatDisplayDate(e.date)," )")),a("span",{class:"ir-proforma-invoice__checkbox-price"},E(this.booking.currency.symbol,e.amount))))}render(){if(!this.booking||!this.invoice||!this.property){return}const e=this.renderBillToSection();const t=this.renderPropertyCompanyHeader();const r=this.renderPropertyInfo();const n=ne(this.booking.from_date,this.booking.to_date);const s=this.booking.rooms.filter((e=>this.invocableKeys.has(e.system_id)));const l=s.length>0;const c=this.booking.extra_services?.some((e=>this.invocableKeys.has(e.system_id)));const d=this.invocableKeys?.has(this.booking.pickup_info?.["system_id"]);return a(i,null,a("article",{class:"invoice","aria-label":"Pro-forma invoice"},a("header",{class:"invoice__header"},a("h3",{class:"invoice__title"},"Pro-forma Invoice"),a("section",{class:"invoice__layout","aria-label":"Invoice summary"},a("div",{class:"invoice__column invoice__column--details"},a("div",{class:"invoice__details"},a("ir-printing-label",{label:"Date of issue:",content:this.issueDate}),a("ir-printing-label",{label:"Booking no:",content:this.bookingNumber})),e&&a("section",{class:"bill-to-section","aria-label":"Bill to"},a("h4",{class:"section-heading"},"Bill To"),e)),a("div",{class:"invoice__column invoice__column--property"},t&&a("section",{class:"issuer-section","aria-label":"Issuer"},t),r))),a("main",null,l&&a("section",{style:{marginTop:"2.5rem"}},a("div",{class:"proforma__accommodation-container"},a("p",{class:"proforma__accommodation-title"},"ACCOMMODATION"),a("p",{class:"booking-dates"},this.formatBookingDates(this.booking?.from_date)),a("p",{class:"booking-dates"},this.formatBookingDates(this.booking?.to_date)),a("p",{class:"number-of-nights"},n," ",n===1?"night":"nights"),a("p",{class:"vat-exclusion"},a("i",null,this.property?.tax_statement))),a("div",null,s.map(((e,t)=>a(o,null,a("ir-print-room",{room:e,idx:t,booking:this.booking,key:e.identifier,currency:this.booking.currency.symbol,property:this.property})))))),d&&a("ir-printing-pickup",{pickup:this.booking.pickup_info}),c&&a("ir-printing-extra-service",{invocableKeys:this.invocableKeys,extraServices:this.booking.extra_services,currency:this.booking.currency}),this.renderCancellationPenalty(),a("section",{class:"proforma-payment__section"},a("ir-printing-label",{label:"Balance:",content:E(this.booking.currency.symbol,this.booking.financial.due_amount)}),a("ir-printing-label",{label:"Collected (payments - refunds):",content:E(this.booking.currency.symbol,this.booking.financial.collected+this.booking.financial.refunds)}))),this.footerNote&&a("footer",{class:"invoice__footer"},a("p",{class:"invoice__footer-note"},this.footerNote))))}static get watchers(){return{invoice:["handleInvoiceChange"]}}};Ac.style=zc;const Bc=".sc-ir-radio-h{display:block}.checkmark.sc-ir-radio{top:50% !important;transform:translateY(-50%) !important}";const Rc=Bc;const Nc=class{constructor(a){e(this,a);this.checkChange=t(this,"checkChange",7)}get el(){return r(this)}checked=false;label;radioBoxId=ae();name;indeterminate;disabled;labelClass;currentChecked=false;checkChange;radioRef;componentWillLoad(){this.currentChecked=this.checked}componentDidLoad(){if(this.radioRef){this.radioRef.setAttribute("aria-checked",JSON.stringify(this.checked))}}handleCheckedChange(e){if(e===this.currentChecked){return}this.currentChecked=this.checked}handleCheckChange(){this.currentChecked=!this.currentChecked;if(this.radioRef){this.radioRef.setAttribute("aria-checked",JSON.stringify(this.currentChecked))}this.checkChange.emit(this.currentChecked)}render(){return a("div",{key:"d581a39190b8f00f972d29c59694e1fd6a32ca9e",class:"input-group"},a("label",{key:"1c7e96f9353d3ba65ce3a9fb3d58b0ddeca3755f",class:"check-container radio-container align-items-center m-0 py-0"},a("span",{key:"5384f9570e9c571b53e16bfd8faafdb23cfdc743"},this.label),a("input",{key:"a62f7eb9c0c73af00ef0f781b66745eeeb84170e",class:"p-0 m-0",type:"radio",value:"000",name:this.el.name,title:"",onChange:()=>{this.handleCheckChange()},checked:this.currentChecked,ref:e=>this.radioRef=e}),a("span",{key:"fbaa265cb50d50d526d352a90e3ff09d569ff1f1",class:"checkmark"})))}static get watchers(){return{checked:["handleCheckedChange"]}}};Nc.style=Rc;const $c=".sc-ir-reallocation-drawer-h{display:block}";const Lc=$c;const Pc=class{constructor(a){e(this,a);this.closeModal=t(this,"closeModal",7)}open;booking;roomIdentifier;pool;closeModal;_id=`reallocation-form_${ae()}`;render(){return a("ir-drawer",{key:"b71e5141f588ea1452352b855ad127179858bdca",label:"Reassign Unit",open:this.open,onDrawerHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.closeModal.emit()}},this.open&&a("ir-reallocation-form",{key:"1198c0c2a376a1f4a2e1d72b2f8b61f6ed4ad956",pool:this.pool,formId:this._id,booking:this.booking,identifier:this.roomIdentifier}),a("div",{key:"cf91f64ea38e25d54f58f0ec35c9556ce46dadc7",slot:"footer",class:"ir__drawer-footer"},a("ir-custom-button",{key:"c388d1abc319c6f0ddf098a622b5eefbd645645d",size:"medium","data-drawer":"close",variant:"neutral",appearance:"filled"},"Cancel"),a("ir-custom-button",{key:"ee921ed538628bb1209026c0fe4b4dd910f5e957",form:this._id,size:"medium",loading:Ce("/ReAllocate_Exposed_Room"),type:"submit",variant:"brand"},"Confirm")))}};Pc.style=Lc;const Hc=".sc-ir-reallocation-form-h{display:block;height:100%;color:var(--ir-text-color, #1f2a37);font-family:var(--ir-font-family, 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif)}.reallocation-form.sc-ir-reallocation-form{display:flex;flex-direction:column;gap:0.75rem}.booking-summary.sc-ir-reallocation-form{display:flex;flex-direction:column;gap:0.5rem}.rateplan-details.sc-ir-reallocation-form{margin:0;font-weight:500;color:var(--wa-color-text-quiet, #4b5563)}.rateplan-details-unit.sc-ir-reallocation-form{font-weight:700;color:var(--wa-color-text-normal)}.date-picker-row.sc-ir-reallocation-form{display:flex;flex-wrap:wrap;gap:0.5rem;align-items:flex-end}.date-picker-row.sc-ir-reallocation-form .ir-custom-date-picker.sc-ir-reallocation-form{flex:1 1 220px}.error-message.sc-ir-reallocation-form{margin:0;margin-top:0.75rem;color:var(--ir-error-color, #c0392b);font-size:0.95rem}.room-type-list.sc-ir-reallocation-form{display:flex;flex-direction:column;gap:0.75rem}.arrow-container.sc-ir-reallocation-form{width:100%;display:flex;justify-content:center}.choice-row.sc-ir-reallocation-form{display:flex;align-items:center;justify-content:space-between;gap:0.5rem}.room-type-name.sc-ir-reallocation-form{font-weight:600;color:var(--ir-heading-color, #111827)}.physical-room.sc-ir-reallocation-form{display:flex;align-items:center;font-size:0.95rem;padding-inline-start:1rem}.physical-room.sc-ir-reallocation-form::part(label){display:flex;align-items:center}.physical-room.sc-ir-reallocation-form+.physical-room.sc-ir-reallocation-form{margin-top:0.5rem}.physical-room--last.sc-ir-reallocation-form{margin-bottom:0.25rem}.physical-room.sc-ir-reallocation-form wa-select.sc-ir-reallocation-form{margin-left:1rem;min-width:220px}.custom-date-picker.sc-ir-reallocation-form{max-width:200px}.room-type-row.sc-ir-reallocation-form{margin-bottom:0.5rem}";const Fc=Hc;const Uc=class{constructor(a){e(this,a);this.closeModal=t(this,"closeModal",7)}booking;identifier;pool;formId;date;isLoading;room;roomTypes=[];selectedUnit={};errors;mealPlanOptions=null;closeModal;bookingService=new s;eventsService=new We;componentWillLoad(){this.room=this.getRoom();this.date=me(this.room.from_date,"YYYY-MM-DD");this.checkBookingAvailability()}getRoom(){if(!this.booking){throw new Error("Missing booking")}if(!this.identifier){throw new Error("Missing Identifier")}const e=this.booking.rooms.find((e=>e.identifier===this.identifier));if(!e){throw new Error(`Couldn't find room with identifier ${this.identifier}`)}return e}async checkBookingAvailability(){this.isLoading=true;b(false);const e=this.booking.agent!==null;const{from_date:t,to_date:a}=this.getDates();try{const i=await this.bookingService.getBookingAvailability({from_date:t,to_date:a,propertyid:this.booking.property.id,adultChildCount:{adult:1,child:0},language:"en",room_type_ids:[],currency:this.booking.currency,agent_id:e?this.booking.agent.id:null,is_in_agent_mode:e,room_type_ids_to_update:[]});this.roomTypes=i.filter((e=>e.is_available_to_book));this.isLoading=false}catch(e){console.error("Error initializing booking availability:",e)}}getDates(){return{from_date:this.date.clone().format("YYYY-MM-DD"),to_date:this.date.clone().add(ne(this.room.from_date,this.room.to_date),"days").format("YYYY-MM-DD")}}async reallocateUnit(){try{this.errors=null;const e=Zt.parse(this.selectedUnit);const{from_date:t,to_date:a}=this.getDates();await this.eventsService.reallocateEvent(this.pool,e.unit_id,t,a,e.rateplan_id);this.closeModal.emit(null)}catch(e){const t={};if(e instanceof ee){console.error(e);e.issues.forEach((e=>{t[e.path[0]]=true}));this.errors={...t}}}}updateSelectedUnit(e){const t={...this.selectedUnit,...e};const a=S?.property?.roomtypes;const i=z({rateplan_id:this.room.rateplan.id.toString(),roomTypeId:t?.roomtype_id,roomTypes:a});const r=Object.prototype.hasOwnProperty.call(e,"rateplan_id");if(Array.isArray(i)){this.mealPlanOptions=i;if(!r){delete t.rateplan_id}}else{this.mealPlanOptions=null;if(!r){if(i){t.rateplan_id=Number(i.value)}else{delete t.rateplan_id}}}this.selectedUnit=t}render(){if(this.isLoading){return a("div",{class:"drawer__loader-container"},a("ir-spinner",null))}return a("form",{id:this.formId,class:"reallocation-form",onSubmit:e=>{e.preventDefault();this.reallocateUnit()}},a("div",{class:"booking-summary"},a("ir-date-view",{from_date:this.room.from_date,to_date:this.room.to_date,showDateDifference:false})),a("div",null,a("wa-callout",{size:"small",appearance:"filled",variant:"neutral"},a("p",{style:{padding:"0",margin:"0"}},a("span",{class:"rateplan-details"},this.room.roomtype.name," ",this.room.rateplan.short_name," ",this.room.rateplan.is_non_refundable?M.entries.Lcz_NonRefundable:""," ",a("span",{class:"rateplan-details-unit"},this.room.unit.name)))),this.errors?.roomtype_id&&a("p",{class:"error-message"},"Please select a room"),this.roomTypes.length===0?a("ir-empty-state",{style:{marginTop:"20vh"}}):a(o,null,a("div",{class:"arrow-container"},a("svg",{height:30,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"},a("path",{d:"M297.4 566.6C309.9 579.1 330.2 579.1 342.7 566.6L502.7 406.6C515.2 394.1 515.2 373.8 502.7 361.3C490.2 348.8 469.9 348.8 457.4 361.3L352 466.7L352 96C352 78.3 337.7 64 320 64C302.3 64 288 78.3 288 96L288 466.7L182.6 361.3C170.1 348.8 149.8 348.8 137.3 361.3C124.8 373.8 124.8 394.1 137.3 406.6L297.3 566.6z"}))),a("wa-callout",{size:"small",appearance:"filled",variant:"neutral"},a("wa-radio-group",{onchange:e=>{const[t,a]=e.target.value.split("_");this.updateSelectedUnit({roomtype_id:Number(t),unit_id:Number(a)})},name:"available-units",class:"room-type-list"},this.roomTypes?.map((e=>{const t=(()=>{const t=new Map;for(const a of e.rateplans??[]){for(const e of a.assignable_units??[]){if(e.Is_Fully_Available){t.set(e.pr_id,e.name)}}}return Array.from(t,(([e,t])=>({id:e,name:t})))})();return a(o,null,a("div",{key:`roomTypeRow-${e.id}`,class:`room-type-row`},a("div",{class:"choice-row"},a("span",{class:"room-type-name"},e.name))),t.map(((i,r)=>{const o=r===t.length-1;const n=this.selectedUnit?.unit_id===i.id&&Array.isArray(this.mealPlanOptions)&&this.mealPlanOptions.length>0;return a("wa-radio",{value:`${e.id}_${i.id}`,checked:this.selectedUnit?.unit_id===i.id,key:`physicalRoom-${i.id}-${r}`,class:`physical-room${o?" physical-room--last":""}`},a("span",null,i.name),n&&a("ir-validator",{value:this.selectedUnit?.rateplan_id,schema:Zt.shape.rateplan_id},a("wa-select",{size:"small",placeholder:"Select a new rateplan...",value:this.selectedUnit?.rateplan_id?.toString(),onchange:e=>{e.stopImmediatePropagation();e.stopPropagation();this.updateSelectedUnit({rateplan_id:Number(e.target.value)})}},this.mealPlanOptions.map((e=>a("wa-option",{value:e.value?.toString()},e.text+`${e.custom_text?" | ":""}${e.custom_text}`))))))})))})))))))}};Uc.style=Fc;const jc=".sc-ir-reservation-information-h{display:block}.reservation-information.sc-ir-reservation-information{display:flex;flex-direction:column;gap:0.5rem !important}.reservation-information__property-name.sc-ir-reservation-information{margin:0;font-weight:600;margin-bottom:1rem}.reservation-information__row.sc-ir-reservation-information{display:flex;align-items:center;justify-content:space-between;gap:0.5rem}.reservation-information.sc-ir-reservation-information>ir-label.sc-ir-reservation-information,.reservation-information.sc-ir-reservation-information>ota-label.sc-ir-reservation-information,.reservation-information__row.sc-ir-reservation-information ir-label.sc-ir-reservation-information{display:flex;align-items:center}";const Vc=jc;const Gc=class{constructor(a){e(this,a);this.openSidebar=t(this,"openSidebar",7)}booking;countries;userCountry=null;isOpen;openSidebar;reservationInformationEl;irBookingCompanyFormRef;irBookingExtraNoteRef;componentWillLoad(){const e=this.booking?.guest?.country_id;this.userCountry=e?this.countries?.find((t=>t.id===e))||null:null}componentDidLoad(){this.setDynamicLabelHeight()}componentDidUpdate(){this.setDynamicLabelHeight()}handleEditClick(e,t){e.stopImmediatePropagation();e.stopPropagation();this.openSidebar.emit({type:t})}renderPhoneNumber(){const{mobile_without_prefix:e,country_phone_prefix:t,country_id:a}=this.booking.guest;if(!e){return null}if(t){return t+" "+e}if(a){const t=this.countries.find((e=>e.id===a));if(!t){throw new Error("Invalid country id")}return t.phone_prefix+" "+e}return e}setDynamicLabelHeight(){if(!this.reservationInformationEl){return}requestAnimationFrame((()=>{const e=this.reservationInformationEl?.querySelectorAll("ir-label, ota-label, .reservation-information__row");if(!e||e.length===0){return}const t=Array.from(e).map((e=>e.getBoundingClientRect().height)).filter((e=>e>0));if(!t.length){return}const a=Math.max(...t,32);this.reservationInformationEl.style.setProperty("--ir-reservation-label-height",`${a}px`)}))}render(){const e=we(this.booking.extras);return a("wa-card",{key:"2ef3171d7e3e14197badfa34790054b41ad7e847"},a("div",{key:"88c3c08ab507ce7d36df4d73cee6ee6c54b61b43",class:"reservation-information",ref:e=>this.reservationInformationEl=e},a("p",{key:"3040403b4e9018cf9a3573e055fd1a95d42648eb",class:"reservation-information__property-name"},this.booking.property.name||""),a("ir-label",{key:"73c483a3729d158412ce4127d4434330d99585bb",labelText:`${M.entries.Lcz_Source}:`,content:this.booking.origin.Label,image:{src:this.booking.origin.Icon,alt:this.booking.origin.Label}}),a("ir-label",{key:"f16c2ebcba1db6ea03ab57caab5002a77b1aea64",renderContentAsHtml:true,labelText:`${M.entries.Lcz_BookedOn}:`,content:`${$e(this.booking.booked_on.date)}&nbsp&nbsp&nbsp&nbsp${Ne(this.booking.booked_on.hour.toString(),this.booking.booked_on.minute.toString())}`}),a("div",{key:"a67c93dce517bed151cc26a0fe89e7446c49ead0",class:"reservation-information__row"},a("ir-label",{key:"958278c02acc556048f2def3d5df7f799287c9dc",labelText:`${M.entries.Lcz_BookedBy}:`,content:`${this.booking.guest.first_name} ${this.booking.guest.last_name}`},this.booking.guest?.nbr_confirmed_bookings>1&&!this.booking.agent&&a("div",{key:"7fad7e31e68c84b7b74123e75a777557423e97fb",class:"m-0 p-0 ",slot:"prefix"},a("wa-tooltip",{key:"f392de5305e35b2a1762ffd59fa1f347cbb82806",for:"guests_nbr_confirmed_bookings"},`${M.entries.Lcz_BookingsNbr}`.replace("%1",this.booking.guest.nbr_confirmed_bookings.toString())),a("div",{key:"f5696c176bce9af8aa902706d63ddccd9593bcf3",style:{color:"#FB0AAD"},id:"guests_nbr_confirmed_bookings"},a("span",{key:"fef3e45e3135c45876e0d59cd9a448bf65564071"}," ",this.booking.guest.nbr_confirmed_bookings),a("wa-icon",{key:"b5efb19d0b4626443768c9f6cac69d7ea790a27a",name:"heart",style:{color:"#FB0AAD"}})))),a("wa-tooltip",{key:"69651e4c8d94f6459b63f9c04d9ed8ed4c3c17a5",for:`edit_guest-details`},"Edit guest details"),a("ir-custom-button",{key:"19dc8767cf430f2589600814a57dddb135f63e75",iconBtn:true,id:`edit_guest-details`,onClickHandler:e=>this.handleEditClick(e,"guest"),appearance:"plain",variant:"neutral"},a("wa-icon",{key:"c84884524e6630e1e6203b3c927d1ad15021ad60",name:"edit",label:"Edit guest details",style:{fontSize:"1rem"}}))),a("div",{key:"1430d1864bd5152a96a619e16ff2a1d925900a97",class:"reservation-information__row"},a("ir-label",{key:"e85a70ffd99d44cd45ac8da86f3ba5bfb513c80c",labelText:`Company:`,placeholder:"No company name provided",content:`${this.booking.company_name??""}${this.booking.company_tax_nbr?` - ${this.booking.company_tax_nbr}`:""}`,display:"flex"}),a("wa-tooltip",{key:"16ff17f58256479b063755d1d89361314ea884be",for:`edit_create-company-info`},"Add company info"),a("ir-custom-button",{key:"f05128432a37d02e713409a80fae9cde51cf49c6",iconBtn:true,id:`edit_create-company-info`,onClickHandler:e=>{e.stopImmediatePropagation();e.stopPropagation();this.irBookingCompanyFormRef.openCompanyForm()},appearance:"plain",variant:"neutral"},a("wa-icon",{key:"58afc31669142cc8945b43904d54e8287012a10c",name:"edit",label:"Add or modify company info",style:{fontSize:"1rem"}}))),this.booking.guest.mobile&&a("ir-label",{key:"83a91065b98d12e7004a01eaaa98cbdf752cb3a1",labelText:`${M.entries.Lcz_Phone}:`,content:this.renderPhoneNumber()}),!this.booking.agent&&a("ir-label",{key:"c481009ba7aec2483b333c923aceb34daed44bea",labelText:`${M.entries.Lcz_Email}:`,content:this.booking.guest.email}),this.booking.guest.alternative_email&&a("ir-label",{key:"5f023ff3e2555a546794a08ea7acac4ea22d70cd",labelText:`${M.entries.Lcz_AlternativeEmail}:`,content:this.booking.guest.alternative_email}),this.booking?.guest?.address&&a("ir-label",{key:"0cfb66208eba14ef8cfedf521a2e9fac3494eeee",labelText:`${M.entries.Lcz_Address}:`,content:this.booking.guest.address}),this.userCountry&&a("ir-label",{key:"6fea5a5f429f6ec6987b7274a7ba6a370fecd732",labelText:`${M.entries.Lcz_Country}:`,isCountryImage:true,content:this.userCountry.name,image:{src:this.userCountry.flag,alt:this.userCountry.name}}),this.booking.guest?.notes&&a("ir-label",{key:"84df39a25a8a7cc01d354ee78c5e593113669b1b",display:"inline",labelText:`${M.entries.Lcz_GuestPrivateNote}:`,content:this.booking.guest?.notes}),this.booking.is_direct&&a("ir-label",{key:"5e59c7602acce05a17d702b15e7550aa376ad13a",labelText:`${M.entries.Lcz_ArrivalTime}:`,content:this.booking.arrival.description}),this.booking.promo_key&&a("ir-label",{key:"efa18eda586b175d20125cb08c378974789fdcb3",labelText:`${M.entries.Lcz_Coupon}:`,content:this.booking.promo_key}),this.booking.is_in_loyalty_mode&&!this.booking.promo_key&&a("div",{key:"374ac1b2d17aae31c1d66eae246cd2cb635d1059",class:"d-flex align-items-center"},a("svg",{key:"c125b01f74d6e68dca33a819f9187f31c8dbf6c6",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",height:18,width:18},a("path",{key:"2abbc1f2876f551eb8ac595510a921f8f20c626e",fill:"#fc6c85",d:"M225.8 468.2l-2.5-2.3L48.1 303.2C17.4 274.7 0 234.7 0 192.8v-3.3c0-70.4 50-130.8 119.2-144C158.6 37.9 198.9 47 231 69.6c9 6.4 17.4 13.8 25 22.3c4.2-4.8 8.7-9.2 13.5-13.3c3.7-3.2 7.5-6.2 11.5-9c0 0 0 0 0 0C313.1 47 353.4 37.9 392.8 45.4C462 58.6 512 119.1 512 189.5v3.3c0 41.9-17.4 81.9-48.1 110.4L288.7 465.9l-2.5 2.3c-8.2 7.6-19 11.9-30.2 11.9s-22-4.2-30.2-11.9zM239.1 145c-.4-.3-.7-.7-1-1.1l-17.8-20c0 0-.1-.1-.1-.1c0 0 0 0 0 0c-23.1-25.9-58-37.7-92-31.2C81.6 101.5 48 142.1 48 189.5v3.3c0 28.5 11.9 55.8 32.8 75.2L256 430.7 431.2 268c20.9-19.4 32.8-46.7 32.8-75.2v-3.3c0-47.3-33.6-88-80.1-96.9c-34-6.5-69 5.4-92 31.2c0 0 0 0-.1 .1s0 0-.1 .1l-17.8 20c-.3 .4-.7 .7-1 1.1c-4.5 4.5-10.6 7-16.9 7s-12.4-2.5-16.9-7z"})),a("p",{key:"cffd0be1b9a1b1780786aa49b4336ac2d44201b5",class:"m-0 p-0 ml-1"},M.entries.Lcz_LoyaltyDiscountApplied)),this.booking.is_direct?a("ir-label",{labelText:`${M.entries.Lcz_GuestRemark}:`,display:"inline",content:this.booking.remark}):a("ota-label",{class:"m-0 p-0",label:`${M.entries.Lcz_ChannelNotes||"Channel notes"}:`,remarks:this.booking.ota_notes,maxVisibleItems:this.booking.ota_notes?.length}),a("div",{key:"599434f30f2e4e58e9b181a2d36efe94ba00084d",class:"reservation-information__row"},a("ir-label",{key:"87567b0f1bb48493bed70b641fcbe450069fba9a",labelText:`${M.entries.Lcz_BookingPrivateNote}:`,placeholder:M.entries.Lcz_VisibleToHotelOnly,content:e,display:e?"inline":"flex"}),a("wa-tooltip",{key:"6facc2d2173df6e08d545e2c12f8c759aec2e987",for:`edit_create-extra-note`},e?"Edit":"Create"," private note"),a("ir-custom-button",{key:"d023a3e3abc01c578a758077f6898269ee6a7998",iconBtn:true,id:`edit_create-extra-note`,onClickHandler:()=>{this.irBookingExtraNoteRef.openDialog()},appearance:"plain",variant:"neutral"},a("wa-icon",{key:"e7f2876af9b32b2c3cabfa97cba516ce93f3f17b",style:{fontSize:"1rem"},name:"edit",label:"Edit or create private note"}))),a("ir-booking-extra-note",{key:"51461820bfc0dbd95756e8ea21fd5f5b18101ae3",booking:this.booking,ref:e=>this.irBookingExtraNoteRef=e}),a("ir-booking-company-dialog",{key:"c106a3f247fa9c4bb776aa2fbffdeb740c7b72a1",booking:this.booking,ref:e=>this.irBookingCompanyFormRef=e})))}};Gc.style=Vc;const qc=".light-blue-bg.sc-ir-room{background:#acecff;padding:0.1rem 0.3rem;border-radius:5px;display:block;max-width:100px;box-sizing:border-box;display:inline-block;overflow:hidden;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:default}.room_statements.sc-ir-room{display:block;width:100%}.room_statements.sc-ir-room{display:block;width:100%}.room_statements.sc-ir-room span.sc-ir-room{display:inline;white-space:normal;line-height:1.5;word-break:break-word}.room_statements.sc-ir-room b.sc-ir-room{display:inline;margin-right:5px}.payment-container.sc-ir-room{position:absolute;right:1rem;height:fit-content}.sc-ir-room-h{position:relative}.subtotal_row.sc-ir-room{padding-top:8px;font-weight:600}.room_actions_btns.sc-ir-room{gap:0.5rem}.night-cost.sc-ir-room{color:#7cbebe}.room_actions_btns.sc-ir-room{white-space:nowrap;width:max-content}.room_actions_btns.sc-ir-room{flex:1 1 0%;display:flex;justify-content:flex-end}.mx-0-5.sc-ir-room{margin-left:2px !important;margin-right:2px !important}.tax-width.sc-ir-room{font-size:10px}.mx-01.sc-ir-room{--m:5px;margin-right:var(--m) !important;margin-left:var(--m) !important}*.sc-ir-room-h{box-sizing:border-box}.booking-room__collapse-btn.sc-ir-room{all:unset;display:inline-flex;align-items:center;align-self:flex-start;height:fit-content;border-radius:calc(var(--wa-panel-border-radius) - var(--wa-panel-border-width));aspect-ratio:1;cursor:pointer;transition:rotate var(--wa-transition-normal) var(--wa-transition-easing)}.booking-room__collapse-btn[data-state='opened'].sc-ir-room{rotate:90deg}.booking-room__collapse-btn[data-state='opened'].sc-ir-room:dir(rtl){rotate:-90deg}.booking-room__collapse-btn.sc-ir-room:focus-visible{outline:var(--wa-focus-ring);outline-offset:calc(var(--wa-panel-border-width) + var(--wa-focus-ring-offset))}.booking-room__header-row.sc-ir-room{display:flex;gap:var(--wa-space-sm, 0.5rem);margin:0}.booking-room__price-row.sc-ir-room{display:flex;align-items:center;gap:var(--wa-space-xs)}.booking-room__summary-row.sc-ir-room{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:var(--wa-space-xs, 0.25rem)}.booking-room__summary-text.sc-ir-room,.booking-room__text-reset.sc-ir-room{margin:0;padding:0}.booking-room__summary-highlight.sc-ir-room{font-weight:600}.booking-room__dates-row.sc-ir-room{display:flex;flex-wrap:wrap;gap:var(--wa-space-xs, 0.25rem);align-items:center}.booking-room__date-view.sc-ir-room{flex:1 1 150px;min-width:140px;width:fit-content}.booking-room__guest-row.sc-ir-room{display:flex;flex-wrap:wrap;align-items:center;gap:0.5rem}.booking-room__guest-name.sc-ir-room{font-weight:600}.booking-room__bed-info.sc-ir-room{color:var(--wa-color-neutral-700)}.booking-room__departure-row.sc-ir-room{display:flex;flex-wrap:wrap;align-items:center;gap:0.5rem}.booking-room__departure-label.sc-ir-room{font-weight:500}.booking-room_summary.sc-ir-room{display:grid;gap:0.5rem}.booking-room__actions.sc-ir-room{display:flex;align-items:center}.booking-room__breakdown-row.sc-ir-room{display:flex;flex-direction:column;gap:0.5rem;margin:0.5rem 0}@media (min-width: 640px){.booking-room__breakdown-row.sc-ir-room{flex-direction:row;align-items:flex-start}}.booking-room__breakdown-label-wrapper.sc-ir-room{flex:0 0 auto;padding-top:0.25rem}.booking-room__breakdown-label.sc-ir-room{margin:0;padding-right:0.5rem;font-weight:600;white-space:nowrap}.booking-room__breakdown-table.sc-ir-room{flex:1 1 auto;overflow-x:auto}.booking-room__cell.sc-ir-room{padding:0.125rem 0;line-height:1.3;white-space:nowrap}.booking-room__cell--right.sc-ir-room{text-align:right}.booking-room__cell--left.sc-ir-room{text-align:left}.booking-room__cell--pad-right.sc-ir-room{padding-right:0.5rem}.booking-room__cell--pad-left.sc-ir-room{padding-left:0.5rem}.booking-room__details.sc-ir-room,.booking-room__details.sc-ir-room::part(base),.booking-room__details.sc-ir-room::part(header),.booking-room__details.sc-ir-room::part(content){width:100%;box-sizing:border-box;padding:0}.booking-room__details.sc-ir-room::part(header){align-items:flex-start}.booking-room__price.sc-ir-room{font-weight:700;color:var(--wa-color-neutral-900);white-space:nowrap;text-align:right}";const Kc=qc;const Wc=class{constructor(a){e(this,a);this.deleteFinished=t(this,"deleteFinished",7);this.toast=t(this,"toast",7);this.pressCheckIn=t(this,"pressCheckIn",7);this.pressCheckOut=t(this,"pressCheckOut",7);this.editInitiated=t(this,"editInitiated",7);this.resetbooking=t(this,"resetbooking",7);this.openSidebar=t(this,"openSidebar",7)}get element(){return r(this)}booking;bookingIndex;isEditable;room;property_id;includeDepartureTime;mealCodeName;myRoomTypeFoodCat;currency="USD";language="en";legendData;roomsInfo;bedPreferences;departureTime;hasRoomEdit=false;hasRoomDelete=false;hasRoomAdd=false;hasCheckIn=false;hasCheckOut=false;collapsed=true;isLoading=false;modalReason=null;mainGuest;isModelOpen=false;isOpen=false;deleteFinished;toast;pressCheckIn;pressCheckOut;editInitiated;resetbooking;openSidebar;modal;bookingService=new s;dialogRef;componentWillLoad(){this.mainGuest=this.getMainGuest()}handleClick(e){let t=e.target;if(t.id=="checkin"){this.pressCheckIn.emit(this.room)}else if(t.id=="checkout"){this.pressCheckOut.emit(this.room)}}handleRoomDataChange(){this.mainGuest=this.getMainGuest()}getDateStr(e,t="default"){return e.getDate()+" "+e.toLocaleString(t,{month:"short"})+" "+e.getFullYear()}handleEditClick(){this.editInitiated.emit({event_type:"EDIT_BOOKING",ID:this.room["assigned_units_pool"],NAME:he(this.mainGuest?.first_name,this.mainGuest?.last_name),EMAIL:this.booking.guest.email,PHONE:this.booking.guest.mobile,REFERENCE_TYPE:"",FROM_DATE:this.booking.from_date,TO_DATE:this.booking.to_date,TITLE:`${M.entries.Lcz_EditBookingFor} ${this.room?.roomtype?.name} ${this.room?.unit?.name||""}`,defaultDateRange:{dateDifference:this.room.days.length,fromDate:new Date(this.room.from_date+"T00:00:00"),fromDateStr:this.getDateStr(new Date(this.room.from_date+"T00:00:00")),toDate:new Date(this.room.to_date+"T00:00:00"),toDateStr:this.getDateStr(new Date(this.room.to_date+"T00:00:00")),message:""},bed_preference:this.room.bed_preference,adult_child_offering:this.room.rateplan.selected_variation.adult_child_offering,ADULTS_COUNT:this.room.rateplan.selected_variation.adult_nbr,ARRIVAL:this.booking.arrival,ARRIVAL_TIME:this.booking.arrival.description,BOOKING_NUMBER:this.booking.booking_nbr,cancelation:this.room.rateplan.cancelation,channel_booking_nbr:this.booking.channel_booking_nbr,CHILDREN_COUNT:this.room.rateplan.selected_variation.child_nbr,COUNTRY:this.booking.guest.country_id,ENTRY_DATE:this.booking.from_date,FROM_DATE_STR:this.booking.format.from_date,guarantee:this.room.rateplan.guarantee,GUEST:this.mainGuest,IDENTIFIER:this.room.identifier,is_direct:this.booking.is_direct,IS_EDITABLE:this.booking.is_editable,NO_OF_DAYS:this.room.days.length,NOTES:this.booking.remark,origin:this.booking.origin,POOL:this.room["assigned_units_pool"],PR_ID:this.room.unit?.id,RATE:this.room.total,RATE_PLAN:this.room.rateplan.name,RATE_PLAN_ID:this.room.rateplan.id,RATE_TYPE:this.room.roomtype.id,ROOMS:this.booking.rooms,SOURCE:this.booking.source,SPLIT_BOOKING:false,STATUS:"IN-HOUSE",TO_DATE_STR:this.booking.format.to_date,TOTAL_PRICE:this.booking.total,legendData:this.legendData,roomsInfo:this.roomsInfo,roomName:this.room.unit?.name||"",PICKUP_INFO:this.booking.pickup_info,booking:this.booking,currentRoomType:this.room})}openModal(e){if(!e){return}this.modalReason=e;this.modal.openModal()}async handleModalConfirmation(e){try{e.stopImmediatePropagation();e.stopPropagation();if(!this.modalReason){return}this.isLoading=true;switch(this.modalReason){case"delete":await this.deleteRoom();break;case"checkin":case"checkout":await this.bookingService.handleExposedRoomInOut({booking_nbr:this.booking.booking_nbr,room_identifier:this.room.identifier,status:this.modalReason==="checkin"?"001":"002"});this.resetbooking.emit(null);break}}catch(e){console.log(e)}finally{this.isLoading=false;this.modalReason=null;this.modal.closeModal()}}async deleteRoom(){let e=[...this.booking.rooms];e=e.filter((e=>e.identifier!==this.room.identifier));const t={assign_units:true,check_in:true,is_pms:true,is_direct:true,booking:{booking_nbr:this.booking.booking_nbr,from_date:this.booking.from_date,to_date:this.booking.to_date,remark:this.booking.remark,property:this.booking.property,source:this.booking.source,currency:this.booking.currency,arrival:this.booking.arrival,guest:this.booking.guest,rooms:e},extras:this.booking.extras,pickup_info:this.booking.pickup_info};await this.bookingService.doReservation(t);this.deleteFinished.emit(this.room.identifier)}async updateDepartureTime(e){try{await this.bookingService.setDepartureTime({property_id:this.property_id,code:e,room_identifier:this.room.identifier});this.toast.emit({type:"success",description:"",title:"Saved Successfully",position:"top-right"})}catch(e){console.log(e)}}formatVariation({infant_nbr:e,adult_nbr:t,children_nbr:a}){const i=t>0?t:0;const r=a>0?a:0;const o=e>0?e:0;const n=i>1?M.entries.Lcz_Adults.toLowerCase():M.entries.Lcz_Adult.toLowerCase();const s=r>1?M.entries.Lcz_Children.toLowerCase():M.entries.Lcz_Child.toLowerCase();const l=o>1?M.entries.Lcz_Infants.toLowerCase():M.entries.Lcz_Infant.toLowerCase();const c=[];if(i>0){c.push(`${i} ${n}`)}if(r>0){c.push(`${r} ${s}`)}if(o>0){c.push(`${o} ${l}`)}return c.join("&nbsp&nbsp&nbsp&nbsp")}getSmokingLabel(){if(this.booking.is_direct){if(!this.room.smoking_option){return null}const e=S.roomsInfo.find((e=>e.id===this.room.roomtype.id));if(e){const t=e["smoking_option"]?.allowed_smoking_options;if(t){return t.find((e=>e.code===this.room.smoking_option))?.description}return null}return null}return this.room.ota_meta?.smoking_preferences}getBedName(){if(this.booking.is_direct){const e=this.bedPreferences.find((e=>e.CODE_NAME===this.room?.bed_preference?.toString()));if(!e){return}return e[`CODE_VALUE_${this.language}`]??e.CODE_VALUE_EN}return this.room.ota_meta?.bed_preferences}renderModalMessage(){switch(this.modalReason){case"delete":return`${M.entries["Lcz_AreYouSureDoYouWantToRemove "]} ${this.room.roomtype.name} ${this.room.unit?this.room.unit.name:""} ${M.entries.Lcz_FromThisBooking}`;case"checkin":return`Are you sure you want to Check In this unit?\n`;case"checkout":return`Are you sure you want to Check Out this unit?`;default:return""}}handleCheckIn(){const{adult_nbr:e,children_nbr:t,infant_nbr:a}=this.room.occupancy;if(this.room.sharing_persons.length<e+t+a){return this.showGuestModal()}return this.renderModalMessage()}getMainGuest(){return this.room.sharing_persons?.find((e=>e.is_main))}render(){const e=this.getBedName();return a(i,{key:"3f1b0b19cab8c0326417727dac1711f67e26e35a"},a("div",{key:"e55b6ed0090b72cea0b233645da4454fc699dfaa",class:"booking-room__header-row"},a("button",{key:"a42d7bda2120feff139c660d00add5c4a096663a","data-state":this.collapsed?"closed":"opened",class:"booking-room__collapse-btn",onClick:()=>this.collapsed=!this.collapsed},a("wa-icon",{key:"ca9c1a2f8389dd501fa70628be9385d7180c12a9",name:"chevron-right"})),a("div",{key:"04f158b266945505dd5fa563962e582edf5776f9",style:{width:"100%",cursor:"default"}},a("div",{key:"81b9083d98fb8f33c0e3c261cbc77866f0a573cc",class:"booking-room_summary",style:{width:"100%",cursor:"default"}},a("div",{key:"aa6b990606576b2c22748c7c09b4dc33b2e89963",class:"booking-room__summary-row"},a("p",{key:"e71e50d5bd4c0c9a1e88deebd6ee0087303af8a7",class:"booking-room__summary-text"},a("span",{key:"1be34548d02c19e50e2a3cde9519fc7f3b88a6af",class:"booking-room__summary-highlight"},this.myRoomTypeFoodCat||""," ")," ",this.mealCodeName," ",this.room.rateplan.is_non_refundable&&` - ${M.entries.Lcz_NonRefundable}`," "),a("div",{key:"39d0d5203d166f9628f00e82bc2d00f3872023a1",class:"booking-room__price-row"},a("span",{key:"2e21aef5337839c9e1c8b3bac9c17b5e783317a4",class:"booking-room__price"},E(this.currency,this.room["gross_total"])),a("div",{key:"cc0ecc43b18caf8d9c315d947dc3b0c32faf784e",class:"booking-room__actions"},this.hasRoomEdit&&this.isEditable&&a(o,{key:"77fc281ac115f5632c566864ede362531f15ee15"},a("wa-tooltip",{key:"f528783ae72c793910f84628c9fa60927d163b50",for:`edit-room-${this.room.identifier}`},"Edit ",this.room.roomtype.name),a("ir-custom-button",{key:"f6345688e7cf295c9a7852cc855fba6a4c0d7825",iconBtn:true,id:`edit-room-${this.room.identifier}`,class:"booking-room__edit-button",onClickHandler:this.handleEditClick.bind(this),variant:"neutral",size:"small",appearance:"plain"},a("wa-icon",{key:"cde09b877bed2a88dc315c93018ec4ef8e7b4f2e",label:"Edit room",class:"booking-room__edit-icon",name:"edit",style:{fontSize:"1rem"}}))),this.hasRoomDelete&&this.isEditable&&a(o,{key:"83d52fb3e75dc95f19f602ecaf9070615d1b6a11"},a("wa-tooltip",{key:"160a6df3fc136f545594e98c06fbf9f82c76cc22",for:`delete-room-${this.room.identifier}`},"Delete ",this.room.roomtype.name),a("ir-custom-button",{key:"0e21bfc54b3051236e382195cb3122412a4dff86",iconBtn:true,id:`delete-room-${this.room.identifier}`,class:"booking-room__delete-button",onClickHandler:this.openModal.bind(this,"delete"),variant:"danger",size:"small",appearance:"plain"},a("wa-icon",{key:"5f696c9cbd24c354fac219773f93fb0f785603ab",label:"Delete room",class:"booking-room__delete-icon",name:"trash-can",style:{fontSize:"1rem"}})))))),a("div",{key:"4c7245927c1d5aaf2cfee9d560ee841341c633b7",class:"booking-room__dates-row"},a("ir-date-view",{key:"b530be6ee427b53f9ce32e36407804130d6c308d",class:"booking-room__date-view",from_date:this.room.from_date,to_date:this.room.to_date,showDateDifference:false}),!Y(this.room.roomtype.id)&&S.is_frontdesk_enabled&&this.room.unit&&a("ir-unit-tag",{key:"e4ce22033b2fc25383312bf63d9ff46126ed35d0",unit:this.room.unit.name}),this.hasCheckIn&&a("ir-custom-button",{key:"c83fe78d76c676b2045a871d4a74e578adab39ff",onClickHandler:this.handleCheckIn.bind(this),id:"checkin",appearance:"outlined",variant:"brand"},M.entries.Lcz_CheckIn),this.hasCheckOut&&a("ir-custom-button",{key:"3bdd395aa000de0b11923af8126eb56bad133a19",appearance:"outlined",variant:"brand",onClickHandler:()=>{this.modalReason="checkout"},id:"checkout"},M.entries.Lcz_CheckOut)),a("div",{key:"622403044fc99d484daddfb8ba348a2767d7d7e4",class:"booking-room__guest-row"},a("p",{key:"63b6ec6422ffa365f4edebdf3bf556531e30c2e8",class:"booking-room__text-reset booking-room__guest-name"},`${this.mainGuest.first_name||""} ${this.mainGuest.last_name||""}`),this.room.rateplan.selected_variation.adult_nbr>0&&(this.room.unit?a(o,null,a("wa-tooltip",{for:`view-guest-btn-${this.room.identifier}`},"View guests"),a("ir-custom-button",{link:true,onClickHandler:()=>this.showGuestModal(),id:`view-guest-btn-${this.room.identifier}`,variant:"brand",appearance:"plain"},a("span",{innerHTML:this.formatVariation(this.room.occupancy)}))):a("span",{innerHTML:this.formatVariation(this.room.occupancy)})),e&&a("p",{key:"e211fc048380f000b45ffb9043abbf04ef356102",class:"booking-room__text-reset booking-room__bed-info"},"(",e,")")),this.includeDepartureTime&&a("div",{key:"51f13dc5959f1446e704f1054f29cf0ecba494f7",class:"booking-room__departure-row"},a("p",{key:"5a5151820c5eb9e5f36c94aa868b833213c22dd5",class:"booking-room__text-reset booking-room__departure-label"},"Expected departure time:"),a("wa-select",{key:"c1df79a233b8fb122e5bdf3ea446fedcbf66213f",onchange:e=>{this.updateDepartureTime(e.target.value)},style:{width:"140px"},size:"small",placeholder:"Not provided",value:this.room.departure_time?.code,defaultValue:this.room.departure_time?.code},this.departureTime?.map((e=>a("wa-option",{key:e.CODE_NAME,value:e.CODE_NAME},e[`CODE_VALUE_${this.language?.toUpperCase()}`]??e[`CODE_VALUE_EN`])))))),!this.collapsed&&a("div",{key:"d92a1a304378c82fa3f277dabca7e2f7843243e6",class:"booking-room__details-container"},a("div",{key:"78e4f1cf71b868b081d501b7ff2a850c44b9b8a5",class:"booking-room__breakdown-row"},a("div",{key:"348197710f7cfdfe92d8464ff4f68b31f051c269",class:"booking-room__breakdown-label-wrapper"},a("p",{key:"81f6ab1dc7b1cfa1ffa50664e8d24112c6e0bada",class:"booking-room__breakdown-label"},`${M.entries.Lcz_Breakdown}:`)),a("div",{key:"b8480aa5eb7ff480d74af5799f4ba8ebf306fd30",class:"booking-room__breakdown-table"},a("table",{key:"ee1bf4469285e36af93c02b30aba4ca066963b03"},this.room.days.length>0&&this.room.days.map((e=>a("tr",null,a("td",{class:"booking-room__cell booking-room__cell--right booking-room__cell--pad-right"},Le(e.date)),a("td",{class:"booking-room__cell booking-room__cell--right"},E(this.currency,e.amount)),e.cost>0&&e.cost!==null&&a("td",{class:"booking-room__cell booking-room__cell--left booking-room__cell--pad-left night-cost"},E(this.currency,e.cost))))),a("tr",{key:"9d7029cd2e419914c88f62031af8d49a9b09bd68",class:""},a("th",{key:"161bc21f3c34ff4f52ab3a1bedfc33692e7b93c9",class:"booking-room__cell booking-room__cell--right booking-room__cell--pad-right subtotal_row"},M.entries.Lcz_SubTotal),a("th",{key:"50937bad6c23ae54d03eedbcbfb48e236d3659b0",class:"booking-room__cell booking-room__cell--right subtotal_row"},E(this.currency,this.room.total)),this.room.gross_cost>0&&this.room.gross_cost!==null&&a("th",{key:"1715f6161ef12ab7f26ebe53249a82a5bf2f5881",class:"booking-room__cell booking-room__cell--right booking-room__cell--pad-left night-cost"},E(this.currency,this.room.cost))),this.booking.is_direct?a(o,null,(()=>{const e=S.taxes.filter((e=>e.pct>0&&e.is_exlusive));return e.map((e=>{const t=e.is_exlusive?this.room.total*e.pct:this.room.total-this.room.total/(1+e.pct);return a("tr",null,a("td",{class:"booking-room__cell booking-room__cell--right booking-room__cell--pad-right"},e.is_exlusive?M.entries.Lcz_Excluding:M.entries.Lcz_Including," ",e.name," (",e.pct,"%)"),a("td",{class:"booking-room__cell booking-room__cell--right"},E(this.currency,t/100)),this.room.gross_cost>0&&this.room.gross_cost!==null&&a("td",{class:"booking-room__cell booking-room__cell--right booking-room__cell--pad-left night-cost"},E(this.currency,this.room.cost*e.pct/100)))}))})(),this.room.inclusive_taxes?.CALCULATED_INCLUSIVE_TAXES?.map((e=>a("tr",null,a("td",{class:"booking-room__cell booking-room__cell--right booking-room__cell--pad-right"},M.entries.Lcz_Including," ",e.TAX_NAME," (",e.TAX_PCT*100,"%)"),a("td",{class:"booking-room__cell booking-room__cell--right"},E(this.currency,e.CALCULATED_VALUE)))))):a(o,null,(()=>{const e=this.room.ota_taxes.filter((e=>e.amount>0));return e.map((e=>a("tr",null,a("td",{class:"booking-room__cell booking-room__cell--right booking-room__cell--pad-right"},e.is_exlusive?M.entries.Lcz_Excluding:M.entries.Lcz_Including," ",e.name),a("td",{class:"booking-room__cell booking-room__cell--right"},e.currency.symbol,e.amount))))})())))),a("ir-label",{key:"036469a3852b147fbea9444f7fdfdbc8c29c10a5",labelText:`${M.entries.Lcz_SmokingOptions}:`,display:"inline",content:this.getSmokingLabel()}),this.booking.is_direct&&a(o,{key:"b50090a573fbc19e8ae494f5ff183889eff3cf9e"},this.room.rateplan.cancelation&&a("ir-label",{key:"f43763b9f1171d4357641f98a2dccbf1811a01d4",labelText:`${M.entries.Lcz_Cancellation}:`,display:"inline",content:this.room.rateplan.cancelation||"",renderContentAsHtml:true}),this.room.rateplan.guarantee&&a("ir-label",{key:"9bc3c8cd1b1f283f88a6cf4230beb346b86b2c16",labelText:`${M.entries.Lcz_Guarantee}:`,display:"inline",content:this.room.rateplan.guarantee||"",renderContentAsHtml:true})),this.room.ota_meta&&a("div",{key:"a51e7cbb2c7af08f00f05099705a75d8d39e8e21"},a("ir-label",{key:"ee7eba855fc44da7f694fcd16a34860f400e4f09",labelText:`${M.entries.Lcz_MealPlan}:`,display:"inline",content:this.room.ota_meta.meal_plan}),a("ir-label",{key:"dec41a27237d3c63097b132f9d07d43d479dcaec",labelText:`${M.entries.Lcz_Policies}:`,display:"inline",content:this.room.ota_meta.policies}))))),a("ir-dialog",{key:"adfe62a92e138a27d84f3b2331c7fb75ba2d5fc5",label:this.modalReason==="delete"?"Alert":M.entries.Lcz_Confirmation,ref:e=>this.modal=e,onIrDialogHide:e=>{e.stopImmediatePropagation();e.stopPropagation()},onIrDialogAfterHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.modalReason=null},lightDismiss:this.modalReason==="checkin"},a("p",{key:"f2df553d1e305a960ba2daec04362aac38ec90c9"},this.renderModalMessage()),a("div",{key:"668c7c311fa3d3d1404a06aae29823b580ddb327",slot:"footer",class:"ir-dialog__footer"},a("ir-custom-button",{key:"98155e779a5f915d92473265a1649323e023b439",size:"medium","data-dialog":"close",appearance:"filled",variant:"neutral"},M.entries.Lcz_Cancel),a("ir-custom-button",{key:"bb3f650a852554777378c5eecec9e3e82623a2d7",size:"medium",loading:this.isLoading,onClickHandler:e=>this.handleModalConfirmation(e),variant:this.modalReason==="delete"?"danger":"brand"},this.modalReason==="delete"?M.entries.Lcz_Delete:M.entries.Lcz_Confirm))),a("ir-checkout-dialog",{key:"dce3dc27bac5c3ea360705341424534824d1669b",onCheckoutDialogClosed:e=>{e.stopImmediatePropagation();e.stopPropagation();this.modalReason=null;if(e.detail.reason==="openInvoice"){this.isOpen=true}},identifier:this.room.identifier,open:this.modalReason==="checkout",booking:this.booking}),a("ir-invoice",{key:"1f5025e9225f30dace1b55ee803779cee49ff959",onInvoiceClose:e=>{e.stopImmediatePropagation();e.stopPropagation();this.isOpen=false},open:this.isOpen,booking:this.booking,roomIdentifier:this.room.identifier}))}showGuestModal(){const{adult_nbr:e,children_nbr:t,infant_nbr:a}=this.room.occupancy;this.openSidebar.emit({type:"room-guest",payload:{roomName:this.room.unit?.name,sharing_persons:this.room.sharing_persons,totalGuests:e+t+a,checkin:this.hasCheckIn,identifier:this.room.identifier}})}static get watchers(){return{room:["handleRoomDataChange"]}}};Wc.style=Kc;const Xc="";const Jc=Xc;const Qc=class{constructor(a){e(this,a);this.closeModal=t(this,"closeModal",7)}open;roomName;identifier;sharedPersons=[];totalGuests=0;countries;checkIn;language="en";bookingNumber;closeModal;render(){return a("ir-drawer",{key:"08e8d2c76d3dbdb72c49e5a0058b49b134360ede",style:{"--ir-drawer-width":"60rem","--ir-drawer-background-color":"var(--wa-color-surface-default)","--ir-drawer-padding-left":"var(--spacing)","--ir-drawer-padding-right":"var(--spacing)","--ir-drawer-padding-top":"var(--spacing)","--ir-drawer-padding-bottom":"var(--spacing)"},label:`Room ${this.roomName}`,open:this.open,onDrawerHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.closeModal.emit()}},this.open&&a("ir-room-guests-form",{key:"e7c4090fabe29e89fbff30dd40a9a9569deacb4d",sharedPersons:this.sharedPersons,roomName:this.roomName,countries:this.countries,totalGuests:this.totalGuests,identifier:this.identifier,bookingNumber:this.bookingNumber,checkIn:this.checkIn,language:this.language}),a("div",{key:"415caecb8861ce8847c02259d899801c81089ff6",slot:"footer",class:"ir__drawer-footer"},a("ir-custom-button",{key:"f4afdfe06a465a13fd43ef1f9d69322856da515f",size:"medium","data-drawer":"close",appearance:"filled",variant:"neutral"},M?.entries?.Lcz_Cancel??"Save"),a("ir-custom-button",{key:"6e2407c7b60b6506ed69d2fbf78dd7daa514f256",loading:Ce("/Handle_Exposed_Room_Guests"),size:"medium",form:`room-guests__${this.identifier}`,type:"submit",variant:"brand"},this.checkIn?M.entries?.Lcz_CheckIn??"Check in":M?.entries?.Lcz_Save??"Save")))}};Qc.style=Jc;const Zc={id:-1,full_name:"",country_id:null,dob:"",id_info:{type:{code:null,description:null},number:""},address:null,alternative_email:null,cci:null,city:null,country:undefined,country_phone_prefix:null,email:null,first_name:"",last_name:"",mobile:null,nbr_confirmed_bookings:0,notes:null,password:null,subscribe_to_news_letter:null};const ed={mask:Date,pattern:"DD/MM/YYYY",lazy:false,min:me("1900-01-01","YYYY-MM-DD").toDate(),max:new Date,format:e=>me(e).format("DD/MM/YYYY"),parse:e=>me(e,"DD/MM/YYYY").toDate(),autofix:true,placeholderChar:"_",blocks:{YYYY:{mask:Oe,from:1900,to:(new Date).getFullYear(),placeholderChar:"Y"},MM:{mask:Oe,from:1,to:12,placeholderChar:"M"},DD:{mask:Oe,from:1,to:31,placeholderChar:"D"}}};const td=".sc-ir-room-guests-form-h{display:block;height:100%;position:relative;text-align:start !important;padding-bottom:1rem !important}.id-select.sc-ir-room-guests-form{border-top-right-radius:0;border-bottom-right-radius:0;border-right-width:0}.sc-ir-room-guests-form-h{display:block;width:100%}.guests-labels.sc-ir-room-guests-form{display:none}.sharing_persons_label.sc-ir-room-guests-form{display:none}.loading-container.sc-ir-room-guests-form{height:100%;width:100%;display:flex;justify-content:center;align-items:center;margin:0;padding:0}.guest_document.sc-ir-room-guests-form input.sc-ir-room-guests-form{border-top-left-radius:0;border-bottom-left-radius:0}.guests-labels.sc-ir-room-guests-form *.sc-ir-room-guests-form,.sharing_persons_label.sc-ir-room-guests-form{margin-bottom:0.5rem;padding-bottom:0}.room-guest__info-container.sc-ir-room-guests-form{display:flex;flex:1 1 0%;align-items:center}.room-guest__document.sc-ir-room-guests-form::part(base):dir(ltr),.room-guest__id-info.sc-ir-room-guests-form::part(combobox):dir(rtl){border-top-left-radius:0;border-bottom-left-radius:0}.room-guest__document.sc-ir-room-guests-form{flex:1 1 0%}.room-guest__id-info.sc-ir-room-guests-form::part(combobox):dir(ltr),.room-guest__document.sc-ir-room-guests-form::part(base):dir(rtl){border-top-right-radius:0;border-bottom-right-radius:0}.room-guest__id-info.sc-ir-room-guests-form::part(combobox):dir(ltr){border-right-width:0}.room-guest__id-info.sc-ir-room-guests-form::part(combobox):dir(rtl){border-left-width:0}.room-guest__id-info[open].sc-ir-room-guests-form,.room-guest__id-info.sc-ir-room-guests-form:focus-visible,.room-guest__id-info.sc-ir-room-guests-form:focus-within{z-index:2}.room-guest__section.sc-ir-room-guests-form{display:flex;flex-direction:column;margin-bottom:1rem}.room-guest__section.sc-ir-room-guests-form p.sc-ir-room-guests-form{margin:0;padding:0}.guest_label.sc-ir-room-guests-form{width:100px;display:inline-block;position:relative;color:var(--wa-form-control-label-color);font-weight:var(--wa-form-control-label-font-weight);line-height:var(--wa-form-control-label-line-height);margin-bottom:0.5em !important}@media (min-width: 768px){.sharing_persons_label.sc-ir-room-guests-form{display:block}.guest_country_picker.sc-ir-room-guests-form{margin-bottom:3px}.room-guest__section.sc-ir-room-guests-form{display:block}.guest-grid.sc-ir-room-guests-form{display:grid;grid-template-columns:minmax(0, 120px) \n      minmax(0, 120px) \n      minmax(0, 120px) \n      minmax(0, 120px) \n      minmax(0, 1fr);gap:0.5rem;align-items:flex-start}.guest_label.sc-ir-room-guests-form,.sharing_persons_heading.sc-ir-room-guests-form,.main_guest_heading.sc-ir-room-guests-form{display:none}}";const ad=td;const id=class{constructor(a){e(this,a);this.closeModal=t(this,"closeModal",7);this.resetBookingEvt=t(this,"resetBookingEvt",7);this.updateRoomGuests=t(this,"updateRoomGuests",7)}roomName;identifier;sharedPersons=[];totalGuests=0;countries;checkIn;language="en";bookingNumber;guests=[];idTypes=[];error={};isLoading;propertyCountry;autoValidate=false;closeModal;resetBookingEvt;updateRoomGuests;bookingService=new s;componentWillLoad(){this.init();this.initializeGuests()}async init(){try{this.isLoading=true;const[e,t]=await Promise.all([this.bookingService.getUserDefaultCountry(),this.bookingService.getSetupEntriesByTableName("_ID_TYPE")]);this.idTypes=t;if(e){this.propertyCountry=this.countries.find((t=>t.id===e.COUNTRY_ID))}}catch(e){console.error(e)}finally{this.isLoading=false}}initializeGuests(){let e=[];if(this.totalGuests>this.sharedPersons.length){const t=this.totalGuests-this.sharedPersons.length;e=[...this.sharedPersons,...Array(t).fill({...Zc,id_info:{...Zc.id_info,type:{code:this.idTypes[0]?.CODE_NAME||"001",description:this.idTypes[0]?.CODE_VALUE_EN||""},number:""}})]}else{e=[...this.sharedPersons]}e=e.map((e=>({...e,dob:new Date(e.dob).getFullYear()===1900?null:e.dob})));this.guests=e.map((e=>({...e,dob:e.dob?me(new Date(e.dob)).format("DD/MM/YYYY"):"",country_id:e.country?e.country.id:null})))}updateGuestInfo(e,t){const a=[...this.guests];let i=a[e];i={...i,...t};a[e]=i;this.guests=[...a]}async saveGuests(){try{this.error={};this.autoValidate=true;console.log({sharedPersons:this.sharedPersons,guests:this.guests});for(const e of this.guests){cs(e)}await this.bookingService.handleExposedRoomGuests({booking_nbr:this.bookingNumber,identifier:this.identifier,guests:this.guests.map((e=>{if(!e.first_name&&e.id===-1){return null}return{...e,dob:e.dob?me(e.dob,"DD/MM/YYYY").format("YYYY-MM-DD"):null}})).filter(Boolean)});if(this.checkIn){await this.bookingService.handleExposedRoomInOut({booking_nbr:this.bookingNumber,room_identifier:this.identifier,status:"001"})}this.closeModal.emit(null);this.updateRoomGuests.emit({identifier:this.identifier,guests:this.guests});this.resetBookingEvt.emit()}catch(e){console.log(e);if(e instanceof ee){let t={};e.issues.forEach((e=>{t[e.path[e.path.length-1]]=true}));this.error={...t}}}}render(){if(this.isLoading){return a("div",{class:"loading-container"},a("ir-spinner",null))}return a("form",{id:`room-guests__${this.identifier}`,class:"sheet-container",style:{minWidth:"300px"},onSubmit:e=>{e.preventDefault();this.saveGuests()}},a("section",{class:"sheet-body"},a("div",{class:""},a("div",{class:"guest-grid guests-labels"},a("p",{class:""},M.entries.Lcz_MainGuest),a("p",{class:""}),a("p",{class:" "},M.entries.Lcz_DOB),a("p",{class:""},M.entries.Lcz_Nationality),a("p",{class:" "},M.entries.Lcz_Documents)),a("h5",{class:"main_guest_heading"},M.entries.Lcz_MainGuest),this.guests.map(((e,t)=>{let i=true;try{cs(e)}catch(e){i=false}return a(o,null,t===1&&a("div",{class:"d-flex mx-0 px-0"},a("h5",{class:"mx-0 px-0 sharing_persons_heading"},M.entries.Lcz_PersonsSharingRoom),a("p",{class:"mx-0 px-0 sharing_persons_label"},M.entries.Lcz_PersonsSharingRoom)),a("div",{key:t,class:"guest-grid"},a("div",{class:"room-guest__section"},a("label",{htmlFor:`first_name_${t}`,class:"guest_label"},"First name"),a("ir-validator",{class:"flex-grow-1",schema:ls.shape.first_name},a("ir-input",{"aria-invalid":String(!!this.error["first_name"]&&!i),size:"small",id:`first_name_${t}`,placeholder:"First name","onText-change":e=>this.updateGuestInfo(t,{first_name:e.detail}),value:e.first_name,maxlength:40}))),a("div",{class:"room-guest__section"},a("label",{class:"guest_label"},"Last name"),a("ir-input",{"aria-invalid":String(!!this.error["last_name"]&&!i),size:"small",id:`last_name_${t}`,placeholder:"Last name","onText-change":e=>this.updateGuestInfo(t,{last_name:e.detail}),value:e.last_name,maxlength:40})),a("div",{class:"room-guest__section"},a("p",{class:"guest_label"},M.entries.Lcz_DOB),a("ir-validator",{class:"flex-grow-1",schema:ls.shape.dob},a("ir-input",{"aria-invalid":String(!!this.error["dob"]&&!i),id:`dob_${t}`,mask:ed,size:"small",placeholder:"","onText-change":e=>{this.updateGuestInfo(t,{dob:e.detail})},value:e.dob}))),a("div",{class:"room-guest__section"},a("p",{class:"guest_label"},M.entries.Lcz_Nationality),a("div",{class:"flex-grow-1"},a("ir-country-picker",{size:"small",variant:"modern","aria-invalid":String(!!this.error["country_id"]&&!e.country_id),propertyCountry:this.propertyCountry,id:`{locales.entries.Lcz_Nationality}_${t}`,error:!!this.error["country_id"]&&!e.country_id,country:this.countries?.find((t=>t.id?.toString()===e.country?.id?.toString())),onCountryChange:e=>this.updateGuestInfo(t,{country_id:e.detail?.id?.toString()??null,country:e.detail}),countries:this.countries}))),a("div",{class:"room-guest__section"},a("p",{class:"guest_label"},M.entries.Lcz_Documents),a("div",{class:"room-guest__info-container flex-grow-1"},a("wa-select",{class:"room-guest__id-info",defaultValue:e.id_info?.type?.code??this.idTypes[0]?.CODE_NAME,value:e.id_info?.type?.code,onchange:e=>{this.updateGuestInfo(t,{id_info:{...this.guests[t].id_info,type:{code:e.target.value,description:""}}})},size:"small"},this.idTypes?.map((e=>{const t=e[`CODE_VALUE_${this.language.toUpperCase()}`]??e[`CODE_VALUE_EN`];return a("wa-option",{value:e["CODE_NAME"],label:t},t)}))),a("wa-input",{size:"small","aria-invalid":String(!!this.error["number"]&&!i),class:"room-guest__document",defaultValue:e?.id_info?.number,value:e?.id_info?.number,maxlength:18,placeholder:"12345",onchange:e=>this.updateGuestInfo(t,{id_info:{...this.guests[t].id_info,number:e.target.value}})})))))})))))}};id.style=ad;const rd=".sc-ir-room-nights-h{display:block;box-sizing:border-box;margin:0;position:relative}.loading-container.sc-ir-room-nights{position:relative;height:100%;width:100%;display:flex;align-items:center;justify-content:center}.close-icon.sc-ir-room-nights{position:absolute;top:18px;right:33px;outline:none}.close.sc-ir-room-nights{float:right;font-size:1.5rem;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:0.5;padding:0;background-color:transparent;border:0;appearance:none}.card.sc-ir-room-nights{top:0;z-index:1000}.card-title.sc-ir-room-nights{border-bottom:1px solid #e4e5ec;width:100%}.irfontgreen.sc-ir-room-nights{color:#0e930e}.currency.sc-ir-room-nights{display:block;position:absolute;margin:0;padding:0;height:auto;left:10px}.rate-input.sc-ir-room-nights{font-size:14px;line-height:0;padding:0;height:0;border-left:0;border-radius:0.25rem !important}.rate-input-container.sc-ir-room-nights{display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;flex:1}.new-currency.sc-ir-room-nights{color:#3b4781;border:1px solid #cacfe7;font-size:0.975rem;height:2rem;background:rgb(255, 255, 255);padding-right:0 !important;border-right:0;border-top-right-radius:0;border-bottom-right-radius:0;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.input-group-prepend.sc-ir-room-nights span[data-state='focus'].sc-ir-room-nights{border-color:var(--blue)}.input-group-prepend.sc-ir-room-nights span[data-disabled].sc-ir-room-nights{background-color:#eceff1;border-color:rgba(118, 118, 118, 0.3)}.rateInputBorder.sc-ir-room-nights{padding-left:5px !important;padding-right:5px !important;border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}";const od=rd;const nd=".sc-ir-room-nights-h{height:100%}.sheet-container.sc-ir-room-nights{display:flex !important;flex-direction:column !important;background:white;height:100vh;gap:1rem;z-index:1000}.sheet-container.sc-ir-room-nights{height:-webkit-fill-available;height:100vh;height:100dvh}.sheet-footer.sc-ir-room-nights{position:sticky;bottom:0;z-index:20;background:white;border-top:1px solid #e4e5ec;display:flex;flex-direction:column;padding:1rem;gap:0.5rem}.sheet-header.sc-ir-room-nights{position:sticky;top:0;z-index:10;background:white}.sheet-body.sc-ir-room-nights{flex:1 1 0%}@media (min-width: 768px){.sheet-footer.sc-ir-room-nights{flex-direction:row;align-items:center}}";const sd=nd;const ld=class{constructor(a){e(this,a);this.closeRoomNightsDialog=t(this,"closeRoomNightsDialog",7)}bookingNumber;propertyId;language;identifier;toDate;fromDate;pool;ticket;defaultDates;bookingEvent;selectedRoom;rates=[];isLoading=false;initialLoading=false;inventory=null;isEndDateBeforeFromDate=false;defaultTotalNights=0;isInputFocused=-1;dates={from_date:new Date,to_date:new Date};closeRoomNightsDialog;bookingService=new s;componentWillLoad(){this.dates={from_date:new Date(this.fromDate),to_date:new Date(this.toDate)};this.init()}isButtonDisabled(){return this.isLoading||this.rates.some((e=>e.amount===-1))||this.inventory===0||this.inventory===null}async init(){try{const{from_date:e}=this.defaultDates;if(me(e,"YYYY-MM-DD").isBefore(me(this.fromDate,"YYYY-MM-DD"))){this.dates.from_date=new Date(e)}else{this.dates.from_date=new Date(this.fromDate)}this.dates.to_date=new Date(this.toDate);this.bookingEvent=await this.bookingService.getExposedBooking(this.bookingNumber,this.language);if(this.bookingEvent){const e=this.bookingEvent.rooms.filter((e=>e.identifier===this.identifier));this.selectedRoom=e[0];const t=this.selectedRoom?.days[this.selectedRoom.days.length-1];if(me(this.toDate).add(-1,"days").isSame(me(t.date))){console.log("here1");const e=await this.fetchBookingAvailability(this.fromDate,this.selectedRoom.days[0].date,this.selectedRoom.rateplan.id);const t=K(this.selectedRoom.days[0].date,this.fromDate);this.isEndDateBeforeFromDate=true;this.rates=[...t.map((a=>({amount:e/t.length,date:a,cost:null}))),...this.selectedRoom.days];this.defaultTotalNights=this.rates.length-this.selectedRoom.days.length}else{console.log("here2");console.log(t);const e=await this.fetchBookingAvailability(this.bookingEvent.to_date,me(this.toDate,"YYYY-MM-DD").format("YYYY-MM-DD"),this.selectedRoom.rateplan.id);const a=K(t.date,this.toDate);this.rates=[...this.selectedRoom.days,...a.map((t=>({amount:e/a.length,date:t,cost:null})))]}}}catch(e){console.log(e)}}handleInput(e,t){let a=e;let i=[...this.rates];a=a.replace(/[^0-9.]/g,"");if(a===""){i[t].amount=-1}else{if(!isNaN(Number(a))){i[t].amount=Number(a)}}this.rates=i}async fetchBookingAvailability(e,t,a){try{this.initialLoading=true;const i=await this.bookingService.getBookingAvailability({from_date:e,to_date:t,propertyid:this.propertyId,adultChildCount:{adult:this.selectedRoom.rateplan.selected_variation.adult_nbr,child:this.selectedRoom.rateplan.selected_variation.child_nbr},language:this.language,currency:this.bookingEvent.currency,room_type_ids:[this.selectedRoom.roomtype.id],rate_plan_ids:[a]});console.log(i[0],a);this.inventory=i[0].inventory;const r=i[0].rateplans.find((e=>e.id===a));if(!r||!r.variations){this.inventory=null;return null}const o=r.variations?.find((e=>e.adult_nbr===this.selectedRoom.rateplan.selected_variation.adult_nbr&&e.child_nbr===this.selectedRoom.rateplan.selected_variation.child_nbr));if(!o){return null}return o.discounted_gross_amount}catch(e){console.error(e)}finally{this.initialLoading=false}}renderInputField(e,t,i){return a("div",{class:"col-3 ml-1 position-relative  m-0 p-0 rate-input-container"},a("ir-price-input",{value:i.amount>0?i.amount.toString():"",disabled:this.inventory===0||this.inventory===null,currency:t,"aria-label":"rate","aria-describedby":"rate cost",onTextChange:t=>this.handleInput(t.detail,e)}))}renderReadOnlyField(e,t){return a("p",{class:"col-9 ml-1 m-0 p-0"},`${e}${Number(t.amount).toFixed(2)}`)}renderRateFields(e,t,a){if(this.isEndDateBeforeFromDate){if(e<this.defaultTotalNights){return this.renderInputField(e,t,a)}else{return this.renderReadOnlyField(t,a)}}else{return e<this.selectedRoom.days.length?this.renderReadOnlyField(t,a):this.renderInputField(e,t,a)}}renderDates(){const e=this.bookingEvent.currency.symbol;return a("div",{class:"mt-2 m-0"},this.rates?.map(((t,i)=>a("div",{class:"row m-0 mt-1 align-items-center"},a("p",{class:"col-2 m-0 p-0"},W(t.date)),this.renderRateFields(i,e,t)))))}async handleRoomConfirmation(){try{this.isLoading=true;let e=[...this.bookingEvent.rooms];let t=e.findIndex((e=>e.identifier===this.identifier));if(t===-1){throw new Error("Invalid Pool")}e[t]={...e[t],days:this.rates,to_date:me(this.dates.to_date).format("YYYY-MM-DD"),from_date:me(this.dates.from_date).format("YYYY-MM-DD")};const a={assign_units:true,check_in:true,is_pms:true,is_direct:true,pickup_info:this.bookingEvent.pickup_info,extra_services:this.bookingEvent.extra_services,booking:{booking_nbr:this.bookingNumber,from_date:me(this.dates.from_date).format("YYYY-MM-DD"),to_date:me(this.dates.to_date).format("YYYY-MM-DD"),remark:this.bookingEvent.remark,property:this.bookingEvent.property,source:this.bookingEvent.source,currency:this.bookingEvent.currency,arrival:this.bookingEvent.arrival,guest:this.bookingEvent.guest,rooms:e}};await this.bookingService.doReservation(a);this.closeRoomNightsDialog.emit({type:"confirm",pool:this.pool})}catch(e){}finally{this.isLoading=false}}render(){if(!this.bookingEvent){return a("div",{class:"loading-container"},a("ir-loading-screen",null))}return a("div",{class:"sheet-container"},a("ir-title",{class:"p-1 sheet-header",onCloseSideBar:()=>this.closeRoomNightsDialog.emit({type:"cancel",pool:this.pool}),label:`${M.entries.Lcz_AddingRoomNightsTo} ${this.selectedRoom?.roomtype?.name} ${(this.selectedRoom?.unit).name}`,displayContext:"sidebar"}),a("section",{class:"text-left px-1 pt-0 sheet-body"},a("p",{class:"font-medium-1"},`${M.entries.Lcz_Booking}#`," ",this.bookingNumber),this.initialLoading?a("p",{class:"mt-2 text-secondary"},M.entries["Lcz_CheckingRoomAvailability "]):a(o,null,a("p",{class:"font-weight-bold font-medium-1"},`${X(me(this.dates.from_date).format("YYYY-MM-DD"),"YYYY-MM-DD")} - ${X(me(this.dates.to_date).format("YYYY-MM-DD"),"YYYY-MM-DD")}`),a("p",{class:"font-medium-1 mb-0"},`${this.selectedRoom.rateplan.name}`," ",this.selectedRoom.rateplan.is_non_refundable&&a("span",{class:"irfontgreen"},M.entries.Lcz_NonRefundable)),(this.inventory===0||this.inventory===null)&&a("p",{class:"font-medium-1 text danger"},M.entries.Lcz_NoAvailabilityForAdditionalNights),this.selectedRoom.rateplan.custom_text&&a("p",{class:"text-secondary mt-0"},this.selectedRoom.rateplan.custom_text),this.renderDates())),a("section",{class:"sheet-footer"},a("ir-button",{btn_color:"secondary",btn_disabled:this.isLoading,text:M?.entries.Lcz_Cancel,class:"full-width",btn_styles:"justify-content-center",onClickHandler:()=>this.closeRoomNightsDialog.emit({type:"cancel",pool:this.pool})}),this.inventory>0&&this.inventory!==null&&a("ir-button",{isLoading:this.isLoading,text:M?.entries.Lcz_Confirm,btn_disabled:this.isButtonDisabled(),class:"full-width",btn_styles:"justify-content-center",onClickHandler:this.handleRoomConfirmation.bind(this)})))}};ld.style=od+sd;const cd=".border-theme.sc-ir-select{border:1px solid #cacfe7}@keyframes bounce{0%,100%{transform:scale(1);animation-timing-function:cubic-bezier(0.8, 0, 1, 1)}50%{transform:scale(1.2);animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}}.bounce-3.sc-ir-select{animation:bounce 1s 1}.sc-ir-select-h{--ir-floating-label-fg:#6c757d;--ir-floating-label-fg-focus:#495057;--ir-floating-label-bg:#fff;--ir-floating-label-scale:0.88;--ir-floating-label-float-translateY:-70%;--ir-floating-label-resting-offset-inline:0.9rem;--ir-floating-select-radius:0.21rem;--ir-floating-select-height:2rem;--ir-danger:#dc3545;--ir-disabled-fg:#9aa0a6}.floating-select.sc-ir-select{height:var(--ir-floating-select-height);border-radius:var(--ir-floating-select-radius) !important}.sc-ir-select-h .ir-floating-group.sc-ir-select,.sc-ir-select-h .ir-select-wrapper.sc-ir-select{position:relative}.sc-ir-select-h .ir-floating-group.has-floating.sc-ir-select,.sc-ir-select-h .ir-select-wrapper.has-floating.sc-ir-select{padding-top:0.9rem}.sc-ir-select-h .ir-floating-label.sc-ir-select,.sc-ir-select-h .floating-label.sc-ir-select{position:absolute;top:0;transform:translateY(-50%);pointer-events:none;padding:0 0.4rem;z-index:10;color:var(--ir-floating-label-fg);background:white;transition:transform 120ms ease, color 120ms ease, top 120ms ease, background-color 120ms ease, opacity 120ms ease;opacity:0.95;line-height:1;white-space:nowrap}.sc-ir-select-h .ir-floating-label.sc-ir-select:dir(rtl),.sc-ir-select-h .floating-label.sc-ir-select:dir(rtl){right:var(--ir-floating-label-resting-offset-inline)}.sc-ir-select-h .ir-floating-label.sc-ir-select:dir(ltr),.sc-ir-select-h .floating-label.sc-ir-select:dir(ltr){left:var(--ir-floating-label-resting-offset-inline)}.sc-ir-select-h .ir-floating-group.sc-ir-select:focus-within .ir-floating-label.sc-ir-select,.sc-ir-select-h .ir-floating-input.sc-ir-select:not(:placeholder-shown)+.ir-floating-label.sc-ir-select,.sc-ir-select-h .ir-floating-group[data-has-value='true'].sc-ir-select .ir-floating-label.sc-ir-select,.sc-ir-select-h .ir-floating-group.sc-ir-select:focus-within .floating-label.sc-ir-select,.sc-ir-select-h .ir-floating-input.sc-ir-select:not(:placeholder-shown)+.floating-label.sc-ir-select,.sc-ir-select-h .ir-floating-group[data-has-value='true'].sc-ir-select .floating-label.sc-ir-select,.sc-ir-select-h .floating-label.active.sc-ir-select{top:0;transform:translateY(var(--ir-floating-label-float-translateY)) scale(var(--ir-floating-label-scale));background:var(--ir-floating-label-bg);color:var(--ir-floating-label-fg-focus);font-size:12px;padding:0;opacity:0.95}.sc-ir-select-h .ir-floating-group.has-floating.sc-ir-select select.sc-ir-select,.sc-ir-select-h .ir-select-wrapper.has-floating.sc-ir-select select.sc-ir-select,.sc-ir-select-h .ir-floating-group.has-floating.sc-ir-select .ir-floating-input.sc-ir-select{padding-top:0.9rem}.sc-ir-select-h .ir-floating-group.has-error.sc-ir-select .ir-floating-label.sc-ir-select,.sc-ir-select-h .has-error.sc-ir-select .ir-floating-group.sc-ir-select .ir-floating-label.sc-ir-select,.sc-ir-select-h .ir-floating-group.has-error.sc-ir-select .floating-label.sc-ir-select,.sc-ir-select-h .has-error.sc-ir-select .ir-floating-group.sc-ir-select .floating-label.sc-ir-select{color:var(--ir-danger)}.sc-ir-select-h .ir-floating-group.is-disabled.sc-ir-select .ir-floating-label.sc-ir-select,.sc-ir-select-h .ir-floating-group.is-disabled.sc-ir-select .floating-label.sc-ir-select{color:var(--ir-disabled-fg)}@supports (-webkit-touch-callout: none){.sc-ir-select-h .ir-floating-input.sc-ir-select{border-radius:var(--ir-floating-input-border-radius)}}";const dd=cd;const hd=class{constructor(a){e(this,a);this.selectChange=t(this,"selectChange",7)}name;data;label;selectStyles;selectForcedStyles;selectContainerStyle;selectedValue=null;required;firstOption="Select";showFirstOption=true;size="md";textSize="md";labelPosition="left";labelBackground=null;labelColor="dark";labelBorder="theme";labelWidth=3;selectId=ae();testId;disabled;error=false;floatingLabel;initial=true;valid=false;selectChange;selectEl;labelId=`ir-select-label-${ae()}`;watchHandler(e){if(e!==null&&this.required){this.valid=true}}handleButtonAnimation(e){if(!this.selectEl||e.detail!==this.selectId){return}e.stopImmediatePropagation();e.stopPropagation();this.selectEl.classList.add("border-danger")}handleSelectChange(e){this.selectEl.classList.remove("border-danger");if(this.required){this.initial=false;this.valid=e.target.checkValidity();this.selectedValue=e.target.value;this.selectChange.emit(this.selectedValue)}else{this.selectedValue=e.target.value;this.selectChange.emit(this.selectedValue)}}count=0;render(){let e=["form-control"];if(this.floatingLabel){e.push("floating-select")}else{e.push(`col-${this.label?12-this.labelWidth:12}`)}if(this.required&&!this.valid&&!this.initial){e.push("border-danger")}let t=this.label?this.floatingLabel?a("label",{id:this.labelId,class:`floating-label active`,htmlFor:this.selectId},this.label,this.required?"*":""):a("div",{class:`input-group-prepend col-${this.labelWidth} p-0 text-${this.labelColor}`},a("label",{htmlFor:this.selectId,class:`input-group-text ${this.labelPosition==="right"?"justify-content-end":this.labelPosition==="center"?"justify-content-center":""} ${this.labelBackground?"bg-"+this.labelBackground:""} flex-grow-1 text-${this.labelColor} border-${this.labelBorder==="none"?0:this.labelBorder} `},this.label,this.required?"*":"")):null;return a("div",{key:"5b8c8f8d5239ce3344899ec260364d97c2dc85b4",class:`form-group m-0 ${this.selectContainerStyle}`},a("div",{key:"65a923f4e41ce263523b44412699cad81ed47603",class:"input-group row m-0"},t,a("select",{key:"7de43c8b6c52813fdbac6ffcfe8f30d1b9cc113a",disabled:this.disabled,"aria-invalid":this.error?"true":"false","data-testid":this.testId,style:this.selectForcedStyles,ref:e=>this.selectEl=e,id:this.selectId,class:`${this.selectStyles} ${this.error?"border-danger":""} ${e.join(" ")} form-control-${this.size} text-${this.textSize} `,onInput:this.handleSelectChange.bind(this),required:this.required},this.showFirstOption&&a("option",{key:"e430ebaf5de92bfab46ef25538cdaa9339c43336",value:""},this.firstOption),this.data.map((e=>a("option",{selected:this.selectedValue===e.value,value:e.value},e.text))))))}static get watchers(){return{selectedValue:["watchHandler"]}}};hd.style=dd;const pd=".backdrop{position:fixed;top:0;left:0;width:100%;height:100vh;cursor:pointer;background:rgba(0, 0, 0, 0.5);z-index:99;transition:all 0.5s;opacity:0;pointer-events:none;transition:all 0.5s}.backdrop.active{opacity:1;pointer-events:all}.sidebar-right{position:fixed;top:0;right:-120%;bottom:0;width:var(--sidebar-width, 40rem);max-width:100%;box-shadow:0 0 10px rgba(0, 0, 0, 0.1);transition:all 0.5s;z-index:100;overflow-y:hidden;color:var(--sidebar-color, #000);background-color:var(--sidebar-backgound, #fff);padding-block:var(--ir-sidebar-padding-block, 0);padding-inline:var(--ir-sidebar-padding-inline, 0.5rem);padding-top:var(--ir-sidebar-padding-top, unset);padding-bottom:var(--ir-sidebar-padding-bottom, unset);padding-left:var(--ir-sidebar-padding-left, unset);padding-right:var(--ir-sidebar-padding-right, unset)}.sidebar-right.active{right:0;overflow-y:auto}.sidebar-left{position:fixed;top:0;left:-120%;bottom:0;width:var(--sidebar-width, 40rem);max-width:100%;box-shadow:0 0 10px rgba(0, 0, 0, 0.1);transition:all 0.5s;z-index:100;overflow-y:hidden;color:var(--sidebar-color, #000);background-color:var(--sidebar-backgound, #fff);padding-block:var(--ir-sidebar-padding-block, 0);padding-inline:var(--ir-sidebar-padding-inline, 0.5rem);padding-top:var(--ir-sidebar-padding-top, unset);padding-bottom:var(--ir-sidebar-padding-bottom, unset);padding-left:var(--ir-sidebar-padding-left, unset);padding-right:var(--ir-sidebar-padding-right, unset)}.sidebar-title{display:flex;align-items:center;justify-content:space-between;padding:0 1rem;border-bottom:1px solid #e4e5ec}.sidebar-title p{font-weight:500;font-size:1.2rem}.sidebar-left.active{left:0;overflow-y:auto}.close{position:absolute;top:0.5rem;right:1rem;width:1rem;height:1rem;cursor:pointer}";const ud=pd;const fd=class{constructor(a){e(this,a);this.irSidebarToggle=t(this,"irSidebarToggle",7);this.beforeSidebarClose=t(this,"beforeSidebarClose",7)}get el(){return r(this)}name;side="right";showCloseButton=true;open=false;sidebarStyles;label;preventClose;irSidebarToggle;beforeSidebarClose;sidebarRef;componentDidLoad(){this.applyStyles()}handleSidebarStylesChange(){this.applyStyles()}handleOpenChange(e,t){if(e!==t){J(e)}}handleKeyDown(e){if(e.key==="Escape"&&this.open){e.stopImmediatePropagation();e.stopPropagation();return this.toggleSidebar()}else{return}}async toggleSidebar(){if(this.preventClose){this.beforeSidebarClose.emit();return}this.irSidebarToggle.emit(this.open)}applyStyles(){for(const e in this.sidebarStyles){if(this.sidebarStyles.hasOwnProperty(e)){this.sidebarRef.style[e]=this.sidebarStyles[e]}}}render(){let e="";if(this.open){e="active"}else{e=""}return[a("div",{key:"a05869c906f32d4c2add348ff601427e3a230a0d",class:`backdrop ${e}`,onClick:()=>{this.toggleSidebar()}}),a("div",{key:"fd1e7a0d6850f06d6afe3d829220fa1baa1e679d",ref:e=>this.sidebarRef=e,class:`sidebar-${this.side} ${e}`},this.showCloseButton&&a("div",{key:"539062905c3f24b582fe6464ca60e200e4b24ba5",class:"sidebar-title"},a("p",{key:"bc371864ca09ba5a2bdad2544c171e14feee9ca3",class:"p-0 m-0"},this.label),a("div",{key:"1603888d01cc90df34f0f1f4a2a77f61d0aa7481",class:"p-0 m-0 sidebar-icon-container"},a("ir-icon",{key:"7da62d319f468ce8997c0caed38267b9015fde98",class:"",onIconClickHandler:()=>{this.toggleSidebar()}},a("svg",{key:"260800d906866e4241d0290101b09ebcfdd4a1bb",slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",height:20,width:20},a("path",{key:"2fe44caadc97541771ea9ab4602d4f6ab082fefa",fill:"#6b6f82",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"}))))),a("slot",{key:"b4f3ab70e9b6bfd73bf0f9928526ea90a8b7e8e1",name:"sidebar-body"}))]}static get watchers(){return{sidebarStyles:["handleSidebarStylesChange"],open:["handleOpenChange"]}}};fd.style=ud;const gd="";const bd=gd;const wd=class{constructor(t){e(this,t)}get el(){return r(this)}size;borderWidth;unit="rem";color;componentWillLoad(){this.initStyles()}handleSpinnerSizeChange(){this.initStyles()}handleSpinnerBorderWidthChange(){this.initStyles()}handleSpinnerUnitChange(){this.initStyles()}handleSpinnerColorChange(){this.initStyles()}initStyles(){if(this.size){this.applyCssElement(`${this.size}${this.unit}`,"--ir-spinner-size")}if(this.borderWidth){this.applyCssElement(`${this.borderWidth}${this.unit}`,"--ir-spinner-size")}if(this.color){this.applyCssElement(`${this.color}`,"--ir-spinner-color")}}applyCssElement(e,t){this.el.style.setProperty(t,e)}render(){return a(i,{key:"598b562c158539077d18f499d0658783cf42143d"},a("wa-spinner",{key:"f1297b828c9d0784ec43140997ae6f4dbe895a38",style:{fontSize:"2rem"}}))}static get watchers(){return{size:["handleSpinnerSizeChange"],borderWidth:["handleSpinnerBorderWidthChange"],unit:["handleSpinnerUnitChange"],color:["handleSpinnerColorChange"]}}};wd.style=bd;const md=":host{display:block}.spinner{transform-origin:center;animation:spinner_svv2 0.75s infinite linear}@keyframes spinner_svv2{100%{transform:rotate(360deg)}}";const vd=md;const yd=class{constructor(a){e(this,a);this.loaderComplete=t(this,"loaderComplete",7)}spinnerDuration=1500;successDuration=1e3;autoStart=true;active=true;loaderComplete;phase="spinner";spinnerTimer;successTimer;componentWillLoad(){if(this.autoStart&&this.active){this.startCycle()}}disconnectedCallback(){this.clearTimers()}onActiveChange(e){if(e){if(this.autoStart){this.startCycle()}}else{this.resetCycle()}}onDurationChange(){if(this.active&&this.autoStart){this.startCycle()}}startCycle(){this.clearTimers();this.phase="spinner";const e=Math.max(0,Number(this.spinnerDuration)||0);if(e===0){this.showSuccess();return}this.spinnerTimer=window.setTimeout((()=>this.showSuccess()),e)}showSuccess(){this.phase="success";const e=Math.max(0,Number(this.successDuration)||0);if(e===0){this.handleCompletion();return}this.successTimer=window.setTimeout((()=>this.handleCompletion()),e)}handleCompletion(){this.loaderComplete.emit();this.active=false}resetCycle(){this.clearTimers();this.phase="spinner"}clearTimers(){if(this.spinnerTimer){clearTimeout(this.spinnerTimer);this.spinnerTimer=undefined}if(this.successTimer){clearTimeout(this.successTimer);this.successTimer=undefined}}render(){return a(i,{key:"6dbe4d58da63de28061cd77d6943cec3f334431f"},this.phase==="spinner"?a("wa-spinner",null):a("wa-icon",{part:"check",name:"check",style:{color:"var(--wa-color-success-fill-loud,#45b16d)"}}))}static get watchers(){return{active:["onActiveChange"],spinnerDuration:["onDurationChange"],successDuration:["onDurationChange"]}}};yd.style=vd;const kd=".sc-ir-tabs-h{display:flex;align-items:center;position:relative;overflow-x:auto;gap:1rem;padding:0 1rem}.tab.sc-ir-tabs{font-size:0.95rem;font-weight:400;cursor:pointer;position:relative;margin:0;padding:0rem;padding-bottom:1rem;transition:color 0.3s ease;user-select:none;background-color:transparent;border:none;outline:none;flex:1 1 0%;text-align:center;white-space:nowrap}.tab[data-disabled].sc-ir-tabs{cursor:auto}.tab.sc-ir-tabs:hover{opacity:80%}.tab[data-state='selected'].sc-ir-tabs,.tab[data-state='selected'].sc-ir-tabs:hover{color:var(--blue, #1e9ff2);opacity:100%}.active-indicator.sc-ir-tabs{padding:0;bottom:0px;position:absolute;height:3px;border-radius:4px;transition:transform 0.3s ease, width 0.3s ease;background:var(--blue, #1e9ff2)}";const _d=kd;const xd=class{constructor(a){e(this,a);this.tabChanged=t(this,"tabChanged",7)}get el(){return r(this)}tabs=[];initialTab;disabled=false;ariaLabel="Tabs";_selectedTab;tabChanged;activeIndicator;animationFrameId;componentWillLoad(){const e=this.tabs?.find((e=>e.id===this.initialTab));if(e){this.selectTab(e)}else if(this.tabs?.length>0){this.selectTab(this.tabs[0])}}disconnectedCallback(){if(this.animationFrameId){cancelAnimationFrame(this.animationFrameId)}}updateActiveIndicator(){if(this.animationFrameId){cancelAnimationFrame(this.animationFrameId)}requestAnimationFrame((()=>{const e=this.el.querySelector(`.tab[data-state="selected"]`);if(e){const{left:t,width:a}=e.getBoundingClientRect();const i=this.el.getBoundingClientRect().left;const r=t-i-this.remSize;this.activeIndicator.style.width=`${a-this.remSize}px`;this.activeIndicator.style.transform=`translateX(${r}px)`}}))}remSize=(()=>{const e=getComputedStyle(document.documentElement).fontSize;return parseFloat(e)})();selectTab(e){if(this.disabled)return;this._selectedTab=e;this.updateActiveIndicator();this.tabChanged.emit(e)}handleKeyDown(e,t){if(this.disabled)return;const a=this.tabs.findIndex((e=>e.id===t.id));let i=a;switch(e.key){case"ArrowRight":e.preventDefault();i=(a+1)%this.tabs.length;break;case"ArrowLeft":e.preventDefault();i=a===0?this.tabs.length-1:a-1;break;case"Home":e.preventDefault();i=0;break;case"End":e.preventDefault();i=this.tabs.length-1;break;case"Enter":case" ":e.preventDefault();this.selectTab(t);return;default:return}const r=this.tabs[i];if(r){this.selectTab(r);requestAnimationFrame((()=>{const e=this.el.querySelector(`button.tab[data-tab-id="${r.id}"]`);if(e){e.focus()}}))}}render(){return a(i,{key:"2a0fa32d5205b7ecaed99128690581a2a05e7896",role:"tablist","aria-label":this.ariaLabel,"aria-orientation":"horizontal"},this.tabs.map((e=>a("button",{class:"tab",key:e.id,type:"button","data-tab-id":e.id,role:"tab",tabindex:this._selectedTab?.id===e.id?0:-1,"aria-selected":this._selectedTab?.id===e.id?"true":"false","aria-controls":`tabpanel-${e.id}`,id:`tab-${e.id}`,disabled:this.disabled,"data-state":this._selectedTab?.id===e.id?"selected":undefined,onClick:()=>this.selectTab(e),onKeyDown:t=>this.handleKeyDown(t,e)},e.label))),a("span",{key:"d47ad4e54c3b0ecd781d3c3c40052d258aaf37e9",class:"active-indicator",ref:e=>this.activeIndicator=e}))}};xd.style=_d;const Dd=".sc-ir-title-h{padding:0px 0;margin-bottom:20px;display:flex;align-items:center;width:100%}[border-shown].sc-ir-title-h{border-bottom:1px solid #e4e5ec !important;border-color:#e4e5ec !important;padding-bottom:15px}[display-context='sidebar'].sc-ir-title-h{padding:15px 0;justify-content:space-between !important;width:100% !important;border-bottom:1px solid #e4e5ec !important;border-color:#e4e5ec !important}.title-body.sc-ir-title{margin:0;padding:0}.label.sc-ir-title{font-family:inherit !important}@media only screen and (max-width: 641px){.sc-ir-title-h{flex-direction:column;gap:8px;align-items:flex-start}[display-context='sidebar'].sc-ir-title-h{flex-direction:row}}";const Cd=Dd;const Md=class{constructor(a){e(this,a);this.closeSideBar=t(this,"closeSideBar",7)}label;borderShown;displayContext="default";justifyContent="start";closeSideBar;get el(){return r(this)}componentDidLoad(){this.el.style.justifyContent=this.justifyContent}handleJustifyContentChange(e,t){if(e!==t){this.el.style.justifyContent=e}}render(){return a(i,{key:"18c3278baab4f627bde40fca0012e98b396dee6f"},a("h4",{key:"34939c9324f435eda8e25173ad7a9c486df37f1f",class:"text-left label font-medium-2 py-0 my-0"},this.label),this.displayContext==="sidebar"&&a("ir-icon",{key:"34fec862e13a230ff20cab65bbffe054879bd8dc",class:"close",onIconClickHandler:()=>{this.closeSideBar.emit(null)}},a("svg",{key:"67b6976b485cea95f3a226079262e0a7656a4804",slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",height:20,width:20},a("path",{key:"8e6ebb8e3778553dea69b3ab0226190a0992a1a0",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"}))),this.displayContext!=="sidebar"&&a("div",{key:"f330de71df73f56febee5e9638a7a8b45ec9f224",class:"title-body"},a("slot",{key:"f9e12b8e236549e8be6adcead4f2bf2597a537cb",name:"title-body"})))}static get watchers(){return{justifyContent:["handleJustifyContentChange"]}}};Md.style=Cd;const Yd="button.sc-ir-toast,p.sc-ir-toast,h3.sc-ir-toast,div.sc-ir-toast{all:unset}.sc-ir-toast-h{--rd-viewport-padding:25px;--rd-success:#2b9a66;position:fixed;bottom:0;right:0;display:flex;flex-direction:column;padding:var(--rd-viewport-padding);gap:10px;max-width:100vw;margin:0;list-style:none;z-index:2147483647;outline:none;pointer-events:none;-webkit-user-select:none;user-select:none}@media (prefers-color-scheme: dark){.sc-ir-toast-h{--rd-success:#33b074}}p.sc-ir-toast{color:hsla(222.2, 84%, 4.9%, 0.8);font-size:13px;line-height:1.3}h1.sc-ir-toast,h2.sc-ir-toast,h3.sc-ir-toast,h4.sc-ir-toast,h5.sc-ir-toast,h6.sc-ir-toast{font-weight:500;color:hsl(222.2, 84%, 4.9%);font-size:15px}[position='top-left'].sc-ir-toast-h{top:0;left:0}[position='top-right'].sc-ir-toast-h{top:0;right:0}[position='bottom-left'].sc-ir-toast-h{bottom:0;left:0}[position='bottom-right'].sc-ir-toast-h{bottom:0;right:0}.icon-container.sc-ir-toast{height:25px;width:25px;border-radius:25px;display:flex;align-items:center;justify-content:center;padding:0;margin:0}.icon-container.sc-ir-toast>svg.sc-ir-toast{margin:0;color:white;stroke-width:5px}.success.sc-ir-toast{background-color:var(--rd-success)}.error.sc-ir-toast{background-color:red}.ToastRoot.sc-ir-toast{background-color:hsl(0, 0%, 100%);border-radius:0.5rem;box-shadow:hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px;padding:15px;display:grid;grid-template-areas:'title action' 'description action';grid-template-columns:auto max-content;column-gap:15px;align-items:center;pointer-events:none;opacity:0;border:1px solid hsl(214.3, 31.8%, 91.4%);position:relative}.ToastRoot[data-state='open'].sc-ir-toast{pointer-events:all;animation:slideIn 150ms cubic-bezier(0.16, 1, 0.3, 1)}.ToastRoot[data-state='closed'].sc-ir-toast{pointer-events:none;animation:hide 100ms ease-in}@-webkit-keyframes slideIn{from{transform:translateX(var(--rd-offset-width))}to{transform:translateX(0)}}@keyframes slideIn{from{transform:translateX(var(--rd-offset-width))}to{transform:translateX(0)}}.ToastTitle.sc-ir-toast{grid-area:title;font-weight:500;color:hsl(222.2, 84%, 4.9%);font-size:15px}.ToastDescription.sc-ir-toast{grid-area:description;margin:0;margin-top:5px;color:hsla(222.2, 84%, 4.9%, 0.8);font-size:13px;line-height:1.3;overflow:hidden;text-overflow:ellipsis}.ToastAction.sc-ir-toast{grid-area:action}";const Sd=Yd;const Ed=class{constructor(t){e(this,t)}get element(){return r(this)}position="bottom-left";toasts=[];render(){return a("ir-toast-provider",{key:"5e2da58b75981030b3e928a8cb5db511f9588cc2"})}};Ed.style=Sd;const Id=":host{--toast-shadow:var(--wa-shadow-l);--toast-translate:16px;--toast-accent-fg:#0f172a;display:block;box-sizing:border-box;max-width:min(420px, calc(100vw - 32px));pointer-events:auto;font-family:inherit}:host([data-position*='left']){--toast-translate:-16px}.toast{box-shadow:var(--toast-shadow);animation:toast-enter 220ms cubic-bezier(0.16, 1, 0.3, 1) forwards;border-radius:var(--wa-panel-border-radius)}:host([data-leaving='true']) .toast{animation:toast-exit 200ms ease forwards}:host(:focus-within) .toast{box-shadow:0 0 0 2px #93c5fd, var(--toast-shadow)}.toast__leading{width:40px;height:40px;border-radius:20px;display:flex;align-items:center;justify-content:center;color:var(--toast-accent-fg)}.toast__icon{width:20px;height:20px;fill:currentColor}.toast__body{flex:1 1 0%;min-width:0;display:flex;flex-direction:column;gap:0.25rem}.toast__title{margin:0;font-weight:600;font-size:0.95rem}.toast__description{margin:0;font-size:0.85rem;line-height:1.35;opacity:0.85}@keyframes toast-enter{from{opacity:0;transform:translateX(var(--toast-translate)) translateY(6px)}to{opacity:1;transform:translateX(0) translateY(0)}}@keyframes toast-exit{from{opacity:1;transform:translateX(0) translateY(0)}to{opacity:0;transform:translateX(calc(var(--toast-translate) * 1.25)) translateY(-4px)}}@media (prefers-reduced-motion: reduce){.toast{animation:none}:host([data-leaving='true']) .toast{animation:none}}:host([variant='success']){--toast-accent-fg:#047857}:host([variant='warning']){--toast-accent-fg:#92400e}:host([variant='danger']){--toast-accent-fg:#b91c1c}";const Td=Id;const Od=class{constructor(a){e(this,a);this.irToastDismiss=t(this,"irToastDismiss",7);this.irToastAction=t(this,"irToastAction",7);this.irToastInteractionChange=t(this,"irToastInteractionChange",7)}toastId;label;description;variant="info";dismissible=true;actionLabel;leaving=false;position="top-right";irToastDismiss;irToastAction;irToastInteractionChange;interacting=false;setInteracting=e=>{if(this.interacting===e){return}this.interacting=e;this.irToastInteractionChange.emit({id:this.toastId,interacting:e})};getIcon(){switch(this.variant){case"success":return a("wa-icon",{slot:"icon",name:"circle-check"});case"warning":return a("wa-icon",{slot:"icon",name:"triangle-exclamation"});case"danger":return a("wa-icon",{slot:"icon",name:"triangle-exclamation"});default:return a("wa-icon",{slot:"icon",name:"circle-info"})}}get calloutVariant(){switch(this.variant){case"info":return"neutral";case"success":return"success";case"warning":return"warning";case"danger":return"danger"}}render(){return a("div",{key:"3bae2d7ecf4b8848fdbfb8768d859fdd80eec9a4",class:"toast","data-position":this.position,"data-leaving":this.leaving,onMouseEnter:()=>this.setInteracting(true),onMouseLeave:()=>this.setInteracting(false),onFocusin:()=>this.setInteracting(true),onFocusout:()=>this.setInteracting(false)},a("wa-callout",{key:"0da3721bf1e96dd8f95a36a2e95010cc82502639",variant:this.calloutVariant},this.getIcon(),a("div",{key:"b1b8dcc897d61e3e513166409328d2418c79e2aa",class:"toast__body"},this.label&&a("h3",{key:"54452811e2c82b8f9ba559cb224c12219c6bd5c8",class:"toast__title"},this.label),this.description&&a("p",{key:"c77cdfad225e8e1aa18c2ac64b900e6066fe1213",class:"toast__description"},this.description))))}};Od.style=Td;const zd=".sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.toast-container{position:fixed;display:flex;flex-direction:column;gap:0.75rem;z-index:10000;max-width:100vw;box-sizing:border-box;padding:1rem;pointer-events:all}.toast-container--top{top:0}.toast-container--bottom{bottom:0}.toast-container--start{left:0;align-items:flex-start}.toast-container--center{left:50%;transform:translateX(-50%);align-items:center}.toast-container--end{right:0;align-items:flex-end}.toast-container.rtl.toast-container--start{left:auto;right:0;align-items:flex-end}.toast-container.rtl.toast-container--end{right:auto;left:0;align-items:flex-start}";const Ad=zd;const Bd=class{constructor(t){e(this,t)}get el(){return r(this)}position="top-end";rtl=false;duration=5e3;toasts=[];popoverRef;toastTimers=new Map;componentDidLoad(){if(this.popoverRef&&typeof this.popoverRef.showPopover==="function"){try{this.popoverRef.hidePopover?.()}catch(e){}}}disconnectedCallback(){this.toastTimers.forEach((e=>{if(e.timeoutId){clearTimeout(e.timeoutId)}}));this.toastTimers.clear()}handleToast(e){const t=e?.detail||{};const a={...t,title:t.title??"Notification"};this.addToast(a)}async addToast(e){const t=e.id??this.generateToastId();const a={id:t,type:e.type??"info",duration:e.duration??this.duration,dismissible:e.dismissible??true,leaving:false,...e};this.toasts=[...this.toasts,a];this.announceToast(a);if(this.toasts.length===1){this.showPopover()}if(a.duration&&a.duration>0){this.startTimer(a.id,a.duration)}return t}async removeToast(e){this.toasts=this.toasts.map((t=>t.id===e?{...t,leaving:true}:t));setTimeout((()=>{this.clearTimer(e);this.toasts=this.toasts.filter((t=>t.id!==e));if(this.toasts.length===0){this.hidePopover()}}),200)}async clearAllToasts(){this.toastTimers.forEach((e=>{if(e.timeoutId){clearTimeout(e.timeoutId)}}));this.toastTimers.clear();this.toasts=[];this.hidePopover()}showPopover(){if(this.popoverRef&&typeof this.popoverRef.showPopover==="function"){try{this.popoverRef.showPopover()}catch(e){}}}hidePopover(){if(this.popoverRef&&typeof this.popoverRef.hidePopover==="function"){try{this.popoverRef.hidePopover()}catch(e){}}}generateToastId(){return`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}startTimer(e,t){if(typeof window==="undefined"){return}this.clearTimer(e);const a=window.setTimeout((()=>this.removeToast(e)),t);this.toastTimers.set(e,{timeoutId:a,remaining:t,startedAt:Date.now()})}pauseTimer(e){const t=this.toastTimers.get(e);if(!t||t.timeoutId===undefined||t.startedAt===undefined){return}clearTimeout(t.timeoutId);const a=Date.now()-t.startedAt;const i=Math.max(t.remaining-a,0);this.toastTimers.set(e,{remaining:i})}resumeTimer(e){const t=this.toastTimers.get(e);if(!t||t.timeoutId!==undefined){return}if(t.remaining<=0){this.removeToast(e);return}if(typeof window==="undefined"){return}const a=window.setTimeout((()=>this.removeToast(e)),t.remaining);this.toastTimers.set(e,{timeoutId:a,remaining:t.remaining,startedAt:Date.now()})}clearTimer(e){const t=this.toastTimers.get(e);if(t?.timeoutId){clearTimeout(t.timeoutId)}this.toastTimers.delete(e)}announceToast(e){if(typeof document==="undefined"||!this.el?.shadowRoot){return}const t=document.createElement("div");t.setAttribute("role","status");t.setAttribute("aria-live",e.type==="error"||e.type==="danger"?"assertive":"polite");t.setAttribute("aria-atomic","true");t.className="sr-only";t.textContent=`${e.type}: ${e.title}${e.description?". "+e.description:""}`;this.el.shadowRoot.appendChild(t);setTimeout((()=>{t.remove()}),1e3)}getPositionClass(){const[e,t]=this.position.split("-");return`toast-container--${e} toast-container--${t}`}getAlertPosition(){const[e="top",t="end"]=this.position.split("-");const a={start:this.rtl?"right":"left",end:this.rtl?"left":"right"};const i=a[t]??"right";const r=e==="bottom"?"bottom":"top";return`${r}-${i}`}mapVariant(e){switch(e){case"success":return"success";case"warning":return"warning";case"error":case"danger":return"danger";default:return"info"}}handleToastDismiss=e=>{e.stopPropagation();this.removeToast(e.detail.id)};handleInteractionChange=e=>{e.stopPropagation();if(e.detail.interacting){this.pauseTimer(e.detail.id)}else{this.resumeTimer(e.detail.id)}};handlePopoverToggle=e=>{if(this.toasts.length>0){e.preventDefault();this.showPopover()}};render(){return a("div",{key:"9f1ed8ca4bd15b7e6bdf8f853c1160fda565b1e6",ref:e=>this.popoverRef=e,popover:"manual",class:"toast-popover",onToggle:this.handlePopoverToggle},a("div",{key:"9c3da1d3cd35189e04e6cc22c52f73eb1cdcf266",class:`toast-container ${this.getPositionClass()} ${this.rtl?"rtl":""}`,role:"region","aria-label":"Notifications","aria-live":"polite",dir:this.rtl?"rtl":"ltr"},this.toasts.map((e=>a("div",{class:"toast-item",key:e.id},a("ir-toast-alert",{toastId:e.id,label:e.title,description:e.description,dismissible:e.dismissible,actionLabel:e.actionLabel,position:this.getAlertPosition(),variant:this.mapVariant(e.type),leaving:e.leaving,onIrToastDismiss:this.handleToastDismiss,onIrToastInteractionChange:this.handleInteractionChange}))))))}};Bd.style=Ad;const Rd=".sc-ir-unit-tag-h{display:inline-flex;box-sizing:border-box;height:fit-content;width:fit-content;padding:0;margin:0}.unit-tag__content.sc-ir-unit-tag{max-width:50px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box}.unit-tag__el.sc-ir-unit-tag{height:1.4rem;overflow:hidden}.unit-tag__el.sc-ir-unit-tag::part(base){padding-top:0;padding-bottom:0;height:fit-content;box-sizing:border-box;height:fit-content}";const Nd=Rd;const $d=class{constructor(t){e(this,t)}unit;showTooltip=false;_id=ae();resizeObserver;contentElement;measurementFrame;setContentRef=e=>{if(this.resizeObserver){this.resizeObserver.disconnect()}this.contentElement=e||undefined;if(!this.contentElement){return}this.attachResizeObserver();this.scheduleTooltipUpdate()};componentDidLoad(){this.attachResizeObserver();this.scheduleTooltipUpdate()}disconnectedCallback(){this.resizeObserver?.disconnect();if(this.measurementFrame){cancelAnimationFrame(this.measurementFrame);this.measurementFrame=undefined}}onUnitChange(){this.scheduleTooltipUpdate()}attachResizeObserver(){if(typeof window==="undefined"||!this.contentElement||typeof ResizeObserver==="undefined"){return}if(!this.resizeObserver){this.resizeObserver=new ResizeObserver((()=>this.scheduleTooltipUpdate()))}this.resizeObserver.observe(this.contentElement)}scheduleTooltipUpdate(){if(typeof window==="undefined"){return}if(this.measurementFrame){cancelAnimationFrame(this.measurementFrame)}this.measurementFrame=requestAnimationFrame((()=>{this.measurementFrame=undefined;this.updateTooltipState()}))}updateTooltipState(){if(typeof window==="undefined"){return}const e=this.contentElement;if(!e||!this.unit){if(this.showTooltip){this.showTooltip=false}return}const t=e.scrollWidth>e.clientWidth;if(t!==this.showTooltip){this.showTooltip=t}}render(){return a(o,{key:"e9246d4fce652f100bac8250d371f70cf67dbb98"},this.showTooltip&&a("wa-tooltip",{key:"a320da8f790a714c5d4b236f02e0ec17cc2c1f58",for:this._id},this.unit),a("wa-tag",{key:"e8e0cb63ffcd5c03ecf2dcea87002b40e7bc1d9e",id:this._id,class:"unit-tag__el",size:"small",appearance:"filled",variant:"brand"},a("span",{key:"3dd64a337bf9e137dbc7be3c95bfef9e4619158f",class:"unit-tag__content",ref:this.setContentRef},this.unit)))}static get watchers(){return{unit:["onUnitChange"]}}};$d.style=Nd;const Ld=":host{display:block;position:relative}.error-message{font-weight:var(--wa-form-control-hint-font-weight);margin-block-start:0.5em;font-size:var(--wa-font-size-smaller);line-height:var(--wa-form-control-label-line-height);color:var(--wa-color-danger-fill-loud);}";const Pd=Ld;const Hd=class{constructor(a){e(this,a);this.validationChange=t(this,"irValidationChange",7);this.valueChange=t(this,"irValueChange",7)}get el(){return r(this)}schema;value;showErrorMessage;autovalidate;form;valueEvent="input input-change value-change select-change";blurEvent="blur input-blur select-blur";validationDebounce=200;validationChange;valueChange;isValid=true;autoValidateActive=false;errorMessage="";childEl;formEl;slotEl;currentValue;hasInteracted=false;validationTimer;valueEventsBound=[];blurEventsBound=[];componentWillLoad(){if(!this.schema){throw new Error("<ir-validator> requires a `schema` prop.")}this.syncAutovalidateFlag(this.autovalidate)}componentDidLoad(){this.slotEl=this.el.shadowRoot?.querySelector("slot");this.slotEl?.addEventListener("slotchange",this.handleSlotChange);this.initializeChildReference();this.attachFormListener()}disconnectedCallback(){this.teardownChildListeners();this.detachFormListener();this.slotEl?.removeEventListener("slotchange",this.handleSlotChange);this.clearValidationTimer()}handleSchemaChange(){if(this.autoValidateActive&&this.hasInteracted){this.flushValidation()}}handleAutoValidatePropChange(e){this.syncAutovalidateFlag(e);if(this.autoValidateActive){this.flushValidation()}}handleFormPropChange(){this.detachFormListener();this.attachFormListener()}handleValueEventChange(e,t){if(e===t)return;this.rebindChildListeners()}handleBlurEventChange(e,t){if(e===t)return;this.rebindChildListeners()}syncAutovalidateFlag(e){this.autoValidateActive=JSON.parse(String(e??false))}parseEvents(e){if(!e)return[];return e.split(/[\s,]+/).map((e=>e.trim())).filter(Boolean)}handleValuePropChange(e,t){if(Object.is(e,t))return;this.updateValue(e,{suppressValidation:true,emitChange:false});if(this.autoValidateActive&&this.hasInteracted){this.flushValidation()}}handleSlotChange=()=>{this.initializeChildReference()};initializeChildReference(){const e=this.pickSingleChild();if(e===this.childEl)return;this.teardownChildListeners();if(!e)return;this.childEl=e;this.hasInteracted=false;this.registerChildListeners();const t=this.readValueFromChild();this.updateValue(t,{suppressValidation:!this.autoValidateActive,emitChange:true});if(!this.autoValidateActive){this.updateAriaValidity(this.isValid)}}pickSingleChild(){const e=this.slotEl?.assignedElements({flatten:true})??Array.from(this.el.children);const t=e.filter((e=>e.nodeType===Node.ELEMENT_NODE));if(t.length===0){console.warn("<ir-validator> requires exactly one child element but found none.");return undefined}if(t.length>1){console.warn(`<ir-validator> requires exactly one child element but found ${t.length}. Using the first.`)}return t[0]}registerChildListeners(){if(!this.childEl)return;this.unbindChildListeners();this.valueEventsBound=this.parseEvents(this.valueEvent);this.blurEventsBound=this.parseEvents(this.blurEvent);this.valueEventsBound.forEach((e=>this.childEl.addEventListener(e,this.handleValueEvent)));this.blurEventsBound.forEach((e=>this.childEl.addEventListener(e,this.handleBlurEvent)))}unbindChildListeners(){if(!this.childEl)return;this.valueEventsBound.forEach((e=>this.childEl.removeEventListener(e,this.handleValueEvent)));this.blurEventsBound.forEach((e=>this.childEl.removeEventListener(e,this.handleBlurEvent)));this.valueEventsBound=[];this.blurEventsBound=[]}teardownChildListeners(){if(this.childEl){this.unbindChildListeners();this.childEl=undefined}this.clearValidationTimer()}rebindChildListeners(){if(!this.childEl)return;this.registerChildListeners()}handleValueEvent=e=>{if(!this.childEl)return;const t=this.extractEventValue(e);this.hasInteracted=true;this.updateValue(t)};handleBlurEvent=()=>{if(!this.childEl)return;this.hasInteracted=true;if(this.autoValidateActive){this.flushValidation()}};extractEventValue(e){if("detail"in e&&e["detail"]&&typeof e["detail"]==="object"&&"value"in e.detail){return e.detail.value}const t=e.target;if(t&&"value"in t){return t.value}return this.readValueFromChild()}readValueFromChild(){if(this.value!==undefined){return this.value}if(!this.childEl)return undefined;if("value"in this.childEl){return this.childEl.value}return this.childEl.getAttribute?.("value")}updateValue(e,t={}){const a=this.currentValue;this.currentValue=e;if(t.emitChange!==false&&!Object.is(a,e)){this.valueChange.emit({value:this.currentValue})}if(!t.suppressValidation&&this.autoValidateActive&&this.hasInteracted){this.scheduleValidation()}}validateCurrentValue(e=false){if(!this.schema)return true;const t=this.currentValue??this.readValueFromChild();this.currentValue=t;const a=this.schema.safeParse(t);const i=a.success;const r=this.isValid;this.isValid=i;if(!a.success){this.errorMessage=a.error.issues[0]?.message??""}else{this.errorMessage=""}const o=e||this.autoValidateActive&&this.hasInteracted;if(o){this.updateAriaValidity(i);if(r!==i){this.emitValidationChange()}}return i}updateAriaValidity(e){if(!this.childEl)return;if(e){this.childEl.removeAttribute("aria-invalid")}else{this.childEl.setAttribute("aria-invalid","true")}}emitValidationChange(){this.validationChange.emit({valid:this.isValid,value:this.currentValue})}attachFormListener(){this.formEl=this.resolveFormRef();this.formEl?.addEventListener("submit",this.handleFormSubmit,true)}detachFormListener(){this.formEl?.removeEventListener("submit",this.handleFormSubmit,true);this.formEl=undefined}resolveFormRef(){if(typeof document!=="undefined"&&this.form){const e=document.getElementById(this.form);if(e&&e instanceof HTMLFormElement){return e}}return this.el.closest("form")}handleFormSubmit=()=>{this.hasInteracted=true;const e=this.flushValidation();if(!e&&!this.autoValidateActive){this.autoValidateActive=true}};scheduleValidation(e=false){this.clearValidationTimer();const t=Number(this.validationDebounce);if(e||!isFinite(t)||t<=0){return this.validateCurrentValue(true)}this.validationTimer=setTimeout((()=>{this.validationTimer=undefined;this.validateCurrentValue(true)}),t);return this.isValid}flushValidation(){return this.scheduleValidation(true)}clearValidationTimer(){if(this.validationTimer!==undefined){clearTimeout(this.validationTimer);this.validationTimer=undefined}}render(){return a(i,{key:"cc50adca9e2caa1d8dbe78abfe261478dfec8d92"},a("slot",{key:"532ed67b8ceb699d7418d54615ed39665addfeb3"}),!this.isValid&&this.showErrorMessage&&a("span",{key:"ec176e5483863dddd6a648400d505de5ceade713",part:"error-message",class:"error-message"},this.errorMessage))}static get watchers(){return{schema:["handleSchemaChange"],autovalidate:["handleAutoValidatePropChange"],form:["handleFormPropChange"],valueEvent:["handleValueEventChange"],blurEvent:["handleBlurEventChange"],value:["handleValuePropChange"]}}};Hd.style=Pd;const Fd=".sc-ir-weekday-selector-h{display:block}.days-checkbox.sc-ir-weekday-selector{gap:0.5rem}";const Ud=Fd;const jd=class{constructor(a){e(this,a);this.weekdayChange=t(this,"weekdayChange",7)}weekdays=[];selectedWeekdays=new Set(this.weekdays);weekdayChange;_weekdays=[{value:1,label:"M"},{value:2,label:"T"},{value:3,label:"W"},{value:4,label:"Th"},{value:5,label:"Fr"},{value:6,label:"Sa"},{value:0,label:"Su"}];componentWillLoad(){if(this.weekdays){this.selectedWeekdays=new Set(this.weekdays)}}handleWeekdayChange(e,t){if(e.length!==t.length&&e.length!==this.selectedWeekdays.size){this.selectedWeekdays=new Set(e)}}toggleWeekDays({checked:e,weekDay:t}){const a=new Set(this.selectedWeekdays);if(e){if(!this.selectedWeekdays.has(t)){a.add(t);this.selectedWeekdays=new Set(a)}}else{a.delete(t);this.selectedWeekdays=new Set(a)}this.weekdayChange.emit(Array.from(this.selectedWeekdays))}render(){return a(i,{key:"d7ebb7d0a2bb78968fedcf994c1677d6af8f8319",class:"my-1 d-flex align-items-center",style:{gap:"1.1rem"}},this._weekdays.map((e=>a("wa-checkbox",{checked:this.selectedWeekdays.has(e.value),defaultChecked:this.selectedWeekdays.has(e.value),onchange:t=>this.toggleWeekDays({checked:t.target.checked,weekDay:e.value})},e.label))))}static get watchers(){return{weekdays:["handleWeekdayChange"]}}};jd.style=Ud;const Vd="*.sc-ota-label{margin:0;padding:0}.sc-ota-label-h{display:flex;margin-bottom:5px;gap:5px}.label_title.sc-ota-label{min-width:max-content;padding:0;margin:0;font-weight:600}.ota-message-list.sc-ota-label{margin:0 3px;padding:0;overflow:hidden;width:100%;word-wrap:break-word !important;overflow-wrap:break-word !important}.ota-message-item.sc-ota-label{width:100%;line-height:1.5;margin:0;padding:0;word-wrap:break-word !important;overflow-wrap:break-word !important}.ota-message-item.sc-ota-label::before{content:'- ';margin-right:0.25rem}.ota-visibility-toggle.sc-ota-label{background:white;color:var(--blue);padding:0;margin:0;margin-left:3px;font-size:12px;border:0}.ota-visibility-toggle.sc-ota-label:hover{color:#355270}.ota-message-list.sc-ota-label{margin:0 3px;padding:0;overflow:hidden;width:100%;word-wrap:break-word !important;overflow-wrap:break-word !important;white-space:normal;list-style:none}.ota-message-item.sc-ota-label{width:100%;line-height:1.5;margin:0 0 0 1.2em;padding:0;word-wrap:break-word !important;overflow-wrap:break-word !important;white-space:normal;position:relative}";const Gd=Vd;const qd=class{constructor(t){e(this,t)}label;remarks;maxVisibleItems=3;showAll=false;toggleShowAll=()=>{this.showAll=!this.showAll};render(){if(!this.remarks){return null}const e=this.showAll?this.remarks:this.remarks.slice(0,this.maxVisibleItems);return a(i,null,a("p",{class:"label_title"},this.label),a("ul",{class:"ota-message-list"},e.map(((t,i)=>a("li",{key:ae(),class:"ota-message-item"},t.statement," ",this.remarks.length>this.maxVisibleItems&&i===e.length-1&&a("button",{class:"ota-visibility-toggle",onClick:this.toggleShowAll},this.showAll?M.entries.Lcz_ShowLess:M.entries.Lcz_ShowMore))))))}};qd.style=Gd;export{Fe as igl_application_info,Ve as igl_block_dates_view,Ke as igl_blocked_date_drawer,Qe as igl_booking_event,tt as igl_booking_event_hover,st as igl_bulk_block,pt as igl_bulk_operations,wt as igl_bulk_stop_sale,yt as igl_cal_body,xt as igl_cal_footer,At as igl_cal_header,Nt as igl_date_range,Pt as igl_housekeeping_dialog,Ut as igl_legends,Gt as igl_rate_plan,Wt as igl_reallocation_dialog,Qt as igl_room_type,ra as igl_split_booking,sa as igl_tba_booking_view,da as igl_tba_category_view,ua as igl_to_be_assigned,wa as igloo_calendar,Ca as ir_air_date_picker,Ia as ir_applicable_policies,Ba as ir_billing,$a as ir_billing_drawer,Ha as ir_booking_billing_recipient,ja as ir_booking_company_dialog,qa as ir_booking_company_form,Xa as ir_booking_details,Za as ir_booking_details_drawer,oi as ir_booking_editor,li as ir_booking_editor_drawer,hi as ir_booking_editor_form,fi as ir_booking_editor_guest_form,wi as ir_booking_editor_header,yi as ir_booking_extra_note,xi as ir_booking_guarantee,Mi as ir_booking_header,Ei as ir_booking_status_tag,Oi as ir_button,Bi as ir_checkout_dialog,Li as ir_common,Fi as ir_country_picker,Vi as ir_custom_button,tr as ir_custom_date_picker,pn as ir_date_picker,mn as ir_date_select,kn as ir_date_view,$n as ir_dialog,Fn as ir_drawer,Vn as ir_dropdown,Kn as ir_dropdown_item,Jn as ir_empty_state,es as ir_events_log,is as ir_extra_service,ns as ir_extra_service_config,us as ir_extra_service_config_form,bs as ir_extra_services,vs as ir_guest_info_drawer,Cs as ir_guest_info_form,Ss as ir_icon,Ts as ir_icons,Bs as ir_input,$s as ir_input_text,Hs as ir_interactive_title,js as ir_interceptor,qs as ir_invoice,Xs as ir_invoice_form,Zs as ir_label,al as ir_loading_screen,ol as ir_mobile_input,ll as ir_modal,hl as ir_new_badge,fl as ir_otp,wl as ir_otp_modal,yl as ir_payment_details,Dl as ir_payment_folio,Bl as ir_payment_folio_form,$l as ir_payment_item,Hl as ir_payment_summary,jl as ir_payments_folio,Kl as ir_picker,Jl as ir_picker_item,ec as ir_pickup,rc as ir_pickup_form,sc as ir_pickup_view,dc as ir_pms_logs,uc as ir_popover,bc as ir_preview_screen_dialog,vc as ir_price_input,_c as ir_print_room,Cc as ir_printing_extra_service,Sc as ir_printing_label,Tc as ir_printing_pickup,Ac as ir_proforma_invoice_preview,Nc as ir_radio,Pc as ir_reallocation_drawer,Uc as ir_reallocation_form,Gc as ir_reservation_information,Wc as ir_room,Qc as ir_room_guests,id as ir_room_guests_form,ld as ir_room_nights,hd as ir_select,fd as ir_sidebar,wd as ir_spinner,yd as ir_success_loader,xd as ir_tabs,Md as ir_title,Ed as ir_toast,Od as ir_toast_alert,Bd as ir_toast_provider,$d as ir_unit_tag,Hd as ir_validator,jd as ir_weekday_selector,qd as ota_label};
//# sourceMappingURL=p-c5038bfc.entry.js.map