import{z as t,p as r}from"./p-cc7e2ae6.js";import{c as e}from"./p-99cb260a.js";import{a as o}from"./p-bf44a732.js";import{h as a}from"./p-6c4ba7c0.js";t.object({code:t.string(),id:t.number(),symbol:t.string()});const n=t.object({NIGHTS:t.number(),PCT:t.number(),REVENUE:t.number(),SOURCE:t.string(),PROPERTY_ID:t.number(),PROPERTY_NAME:t.string(),currency:t.string()});const s=n.extend({last_year:n.optional()});const c=t.array(s).nullable();const i=t.object({AC_ID:t.string().optional(),BOOK_CASE:t.string().min(1),FROM_DATE:t.string().regex(/^\d{4}-\d{2}-\d{2}$/,"Use YYYY-MM-DD format"),TO_DATE:t.string().regex(/^\d{4}-\d{2}-\d{2}$/,"Use YYYY-MM-DD format"),WINDOW:t.coerce.number().int().nonnegative(),is_export_to_excel:t.coerce.boolean().optional().default(false),LIST_AC_ID:t.array(t.number()).nullable()});i.extend({include_previous_year:t.boolean()});const _=t=>c.parse(t);const d=t=>i.parse(t);const p=t.object({property_id:t.number(),value:t.string()});const w=t.array(t.object({id:t.number(),name:t.string()})).nullable();const l=t.object({property_id:t.number(),room_identifier:t.string(),value:t.string()});const f=t.object({property_id:t.coerce.number()});const y=t.array(t.object({message:t.string(),type:t.enum(["financial","availability_alert"])}));const E=t.object({property_id:t.coerce.number(),room_type_ids:t.array(t.number()).min(1),from:t.string().refine((t=>{const r=a(t,"YYYY-MM-DD");if(!a.isMoment(r)){return false}return true})),to:t.string().refine((t=>{const r=a(t,"YYYY-MM-DD");if(!a.isMoment(r)){return false}return true}))});const u=t.object({property_ids:t.array(t.number()),period_to_check:t.coerce.number(),consecutive_period:t.coerce.number()});class h{async getExposedProperty(t){try{const{data:r}=await o.post(`/Get_Exposed_Property`,t);if(r.ExceptionMsg!==""){throw new Error(r.ExceptionMsg)}const a=r.My_Result;e.property={...a};e.adultChildConstraints=a.adult_child_constraints;e.allowedBookingSources=a.allowed_booking_sources;e.allowed_payment_methods=a.allowed_payment_methods;e.currency=a.currency;e.is_vacation_rental=a.is_vacation_rental;e.pickup_service=a.pickup_service;e.max_nights=a.max_nights;e.roomsInfo=a.roomtypes;e.taxes=a.taxes;e.id=a.id;e.country=a.country;e.name=a.name;e.is_automatic_check_in_out=a.is_automatic_check_in_out;e.tax_statement=a.tax_statement;e.is_frontdesk_enabled=a.is_frontdesk_enabled;e.is_pms_enabled=a.is_pms_enabled;const n=a?.time_constraints?.check_out_till?.split(":");e.checkin_checkout_hours={offset:a.city.gmt_offset,hour:Number(n[0]||0),minute:Number(n[1]||0)};return r}catch(t){console.log(t);throw new Error(t)}}async exposedRectifier(t){const r=E.parse(t);const{data:e}=await o.post("/Exposed_Rectifier",r);if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}return e.My_Result}async setPropertyCalendarExtra(t){const r=p.parse(t);const{data:e}=await o.post("/Set_Property_Calendar_Extra",r);if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}return e.My_Result}async setRoomCalendarExtra(t){const r=l.parse(t);const{data:e}=await o.post("/Set_Room_Calendar_Extra",r);if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}return e.My_Result}async getChannelSales(t){const e=d(t);const{data:a}=await o.post("/Get_Channel_Sales",e);if(a.ExceptionMsg!==""){throw new Error(a.ExceptionMsg)}if(t.is_export_to_excel){r(a.My_Params_Get_Channel_Sales.Link_excel)}return _(a.My_Result)}async getExposedAllowedProperties(){const{data:t}=await o.post("/Get_Exposed_Allowed_Properties",{});if(t.ExceptionMsg!==""){throw new Error(t.ExceptionMsg)}return w.parse(t.My_Result)}async searchExposedAllowedProperties(t){const r=t?{search_term:t}:{};const{data:e}=await o.post("/Get_Exposed_Allowed_Properties",r);if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}return Array.isArray(e.My_Result)?e.My_Result:[]}async getCountrySales(t){const{data:e}=await o.post("/Get_Country_Sales",t);if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}if(t.is_export_to_excel){r(e.My_Params_Get_Country_Sales.Link_excel)}return e.My_Result}async getDailyRevenueReport(t){const{data:e}=await o.post("/Get_Daily_Revenue_Report",t);if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}if(t.is_export_to_excel){r(e.My_Params_Get_Daily_Revenue_Report.Link_excel)}return e.My_Result}async setExposedCleaningFrequency(t){const{data:r}=await o.post("/Set_Exposed_Cleaning_Frequency",t);if(r.ExceptionMsg!==""){throw new Error(r.ExceptionMsg)}return r.My_Result}async getMonthlyStats(t){const{data:e}=await o.post("/Get_Monthly_Stats",t);if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}if(t.is_export_to_excel){r(e.My_Params_Get_Monthly_Stats.Link_excel)}return e.My_Result}async fetchNotifications(t){const r=f.parse({property_id:t});const{data:e}=await o.post("/Fetch_Notifications",r);if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}return y.parse(e.My_Result)}async fetchUnBookableRooms(t){const r=u.parse(t);const{data:e}=await o.post("/Fetch_UnBookable_Rooms",r);if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}return e.My_Result}}export{E,h as P};
//# sourceMappingURL=p-c6c41b50.js.map