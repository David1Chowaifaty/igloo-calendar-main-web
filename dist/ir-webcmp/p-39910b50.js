import{a as t}from"./p-bf44a732.js";import{B as r}from"./p-e241868f.js";import{e,g as o,I as a}from"./p-a2c4a3da.js";import{z as n}from"./p-bfb03024.js";import{c as s}from"./p-d6d6fb27.js";class c{bookingService=new r;async reallocateEvent(r,o,a,n,s){try{console.log(r,o,a,n);const{data:c}=await t.post(`/ReAllocate_Exposed_Room`,{pool:r,destination_pr_id:o,from_date:a,to_date:n,extras:e,rateplan_id:s});if(c.ExceptionMsg!==""){throw new Error(c.ExceptionMsg)}console.log(c);return c}catch(t){console.error(t);throw new Error(t)}}async deleteEvent(r){try{const{data:e}=await t.post(`/UnBlock_Exposed_Unit`,{POOL:r});if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}return e.My_Result}catch(t){console.log(t);throw new Error(t)}}async updateBlockedEvent(t){try{const r=o(+t.RELEASE_AFTER_HOURS);await this.deleteEvent(t.POOL);const e=await this.bookingService.blockUnit({from_date:this.formatDate(t.FROM_DATE),to_date:this.formatDate(t.TO_DATE),pr_id:t.PR_ID,STAY_STATUS_CODE:t.OUT_OF_SERVICE?"004":t.RELEASE_AFTER_HOURS===0?"002":"003",DESCRIPTION:t.RELEASE_AFTER_HOURS||"",NOTES:t.OPTIONAL_REASON||"",...r});return e}catch(t){console.error(t);throw new Error(t)}}formatDate(t){return t.split("/").join("-")}}n.object({code:n.string(),id:n.number(),symbol:n.string()});const i=n.object({NIGHTS:n.number(),PCT:n.number(),REVENUE:n.number(),SOURCE:n.string(),PROPERTY_ID:n.number(),PROPERTY_NAME:n.string(),currency:n.string()});const _=i.extend({last_year:i.optional()});const d=n.array(_).nullable();const w=n.object({AC_ID:n.string().optional(),BOOK_CASE:n.string().min(1),FROM_DATE:n.string().regex(/^\d{4}-\d{2}-\d{2}$/,"Use YYYY-MM-DD format"),TO_DATE:n.string().regex(/^\d{4}-\d{2}-\d{2}$/,"Use YYYY-MM-DD format"),WINDOW:n.coerce.number().int().nonnegative(),is_export_to_excel:n.coerce.boolean().optional().default(false),LIST_AC_ID:n.array(n.number()).nullable()});w.extend({include_previous_year:n.boolean()});const l=t=>d.parse(t);const E=t=>w.parse(t);const p=n.object({property_id:n.number(),value:n.string()});const y=n.array(n.object({id:n.number(),name:n.string()})).nullable();const f=n.object({property_id:n.number(),room_identifier:n.string(),value:n.string()});class u{async getExposedProperty(r){try{const{data:e}=await t.post(`/Get_Exposed_Property`,r);if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}const o=e.My_Result;s.property={...o};s.adultChildConstraints=o.adult_child_constraints;s.allowedBookingSources=o.allowed_booking_sources;s.allowed_payment_methods=o.allowed_payment_methods;s.currency=o.currency;s.is_vacation_rental=o.is_vacation_rental;s.pickup_service=o.pickup_service;s.max_nights=o.max_nights;s.roomsInfo=o.roomtypes;s.taxes=o.taxes;s.id=o.id;s.country=o.country;s.name=o.name;s.is_automatic_check_in_out=o.is_automatic_check_in_out;s.tax_statement=o.tax_statement;s.is_frontdesk_enabled=o.is_frontdesk_enabled;s.is_pms_enabled=o.is_pms_enabled;const a=o?.time_constraints?.check_out_till?.split(":");s.checkin_checkout_hours={offset:o.city.gmt_offset,hour:Number(a[0]||0),minute:Number(a[1]||0)};return e}catch(t){console.log(t);throw new Error(t)}}async setPropertyCalendarExtra(r){const e=p.parse(r);const{data:o}=await t.post("/Set_Property_Calendar_Extra",e);if(o.ExceptionMsg!==""){throw new Error(o.ExceptionMsg)}return o.My_Result}async setRoomCalendarExtra(r){const e=f.parse(r);const{data:o}=await t.post("/Set_Room_Calendar_Extra",e);if(o.ExceptionMsg!==""){throw new Error(o.ExceptionMsg)}return o.My_Result}async getChannelSales(r){const e=E(r);const{data:o}=await t.post("/Get_Channel_Sales",e);if(o.ExceptionMsg!==""){throw new Error(o.ExceptionMsg)}if(r.is_export_to_excel){a(o.My_Params_Get_Channel_Sales.Link_excel)}return l(o.My_Result)}async getExposedAllowedProperties(){const{data:r}=await t.post("/Get_Exposed_Allowed_Properties",{});if(r.ExceptionMsg!==""){throw new Error(r.ExceptionMsg)}return y.parse(r.My_Result)}async getCountrySales(r){const{data:e}=await t.post("/Get_Country_Sales",r);if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}if(r.is_export_to_excel){a(e.My_Params_Get_Country_Sales.Link_excel)}return e.My_Result}async getDailyRevenueReport(r){const{data:e}=await t.post("/Get_Daily_Revenue_Report",r);if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}if(r.is_export_to_excel){a(e.My_Params_Get_Daily_Revenue_Report.Link_excel)}return e.My_Result}async setExposedCleaningFrequency(r){const{data:e}=await t.post("/Set_Exposed_Cleaning_Frequency",r);if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}return e.My_Result}async getMonthlyStats(r){const{data:e}=await t.post("/Get_Monthly_Stats",r);if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}if(r.is_export_to_excel){a(e.My_Params_Get_Monthly_Stats.Link_excel)}return e.My_Result}}export{c as E,u as P};
//# sourceMappingURL=p-39910b50.js.map