import{r as e,c as t,h as i,H as s,g as a}from"./p-61950c14.js";import{B as n}from"./p-7af6b045.js";import{l as r}from"./p-e19fbf2a.js";import"./p-bf44a732.js";import"./p-f02f026f.js";import"./p-6c4ba7c0.js";import"./p-ca06ac40.js";import"./p-0db2e55e.js";import"./p-7f64bb6e.js";const o=".sc-ir-phone-input-h{display:block}.input-container.sc-ir-phone-input{display:flex;align-items:center;padding:0 !important}.input-container.sc-ir-phone-input:focus-within{border-color:#1e9ff2}.border-theme.sc-ir-phone-input{border-color:#cacfe7}.input-container.sc-ir-phone-input input.sc-ir-phone-input{flex:1;border:0}.input-container.sc-ir-phone-input input.sc-ir-phone-input:focus{outline:none}.dropdown-trigger.sc-ir-phone-input{display:flex;align-items:center;gap:8px;background:white;border:0;border-right:1px solid #cacfe7}.ir-dropdown-container.sc-ir-phone-input{position:absolute;z-index:1000;bottom:-30px;width:100%;left:0;background:white}.input-container.sc-ir-phone-input label.sc-ir-phone-input{display:flex;align-items:center;justify-content:center;margin:0;padding:0 5px}.flag.sc-ir-phone-input{height:1rem;aspect-ratio:4/3;border-radius:3px}.is-invalid.sc-ir-phone-input{border-color:#ff4961}.phone_prefix_label.sc-ir-phone-input{padding:0 0.5rem;margin:0}";const h=o;const c=class{constructor(i){e(this,i);this.textChange=t(this,"textChange",7);this.value="";this.disabled=false;this.error=false;this.default_country=null;this.phone_prefix=null;this.countries=[];this.inputValue="";this.isDropdownVisible=false;this.bookingService=new n}async componentWillLoad(){if(this.countries.length===0){const e=await this.bookingService.getCountries(this.language);this.countries=e}if(this.phone_prefix){this.setCountryFromPhonePrefix()}else{if(this.default_country){this.setCurrentCountry(this.default_country)}}this.inputValue=this.value}handleValueChange(e,t){if(e!==t){this.inputValue=e}}handlePhoneChange(e,t){if(e!==t){this.setCountryFromPhonePrefix()}}handleDocumentClick(e){const t=e.target;if(!this.el.contains(t)){this.isDropdownVisible=false}}handleInputChange(e){var t;let i=e.target;let s=i.value;s=s.replace(/[^+\d]+/g,"");i.value=s;this.inputValue=s;this.textChange.emit({phone_prefix:(t=this.currentCountry)===null||t===void 0?void 0:t.phone_prefix,mobile:this.inputValue})}setCountryFromPhonePrefix(){var e;console.log(this.phone_prefix);let t=this.countries.find((e=>e.phone_prefix===this.phone_prefix));if(!t){t=this.countries.find((e=>e.id.toString()===this.phone_prefix));if(!t){return}}console.log(t);this.currentCountry=Object.assign({},t);this.textChange.emit({phone_prefix:(e=this.currentCountry)===null||e===void 0?void 0:e.phone_prefix,mobile:this.value})}setCurrentCountry(e){var t;const i=this.countries.find((t=>t.id===e));if(!i){throw new Error("Invalid country id")}this.currentCountry=Object.assign({},i);this.textChange.emit({phone_prefix:(t=this.currentCountry)===null||t===void 0?void 0:t.phone_prefix,mobile:this.value})}render(){var e,t;return i(s,{key:"3d003fbf1b500a8c599384be83fcdd3bcb6f2e60"},i("div",{key:"5c364170dd591a3ad030d900c340fdf08905ed59",class:"form-group mr-0"},i("div",{key:"847dcddb2d755c08d2c3a093c638adc7016be345",class:"input-group row m-0 p-0 position-relative"},this.label&&i("div",{key:"71dbf1f65993be9d5f8375a7bb56ae78fd211a33",class:`input-group-prepend col-3 p-0 text-dark border-none`},i("label",{key:"712b5b3efbee60ca772a57e55307614810f838ac",class:`input-group-text  border-theme flex-grow-1 text-dark  `},this.label)),i("div",{key:"7f8b741e99d47c20408b985d2caba5e66c2675ca",class:"form-control  input-container  flex-fill"+(this.error?" is-invalid":"")},i("button",{key:"d48e1a2795ebd65d99f86ce0827f34d1f434f62c",onClick:()=>this.isDropdownVisible=!this.isDropdownVisible,class:"dropdown-trigger"},this.currentCountry?i("img",{src:(e=this.currentCountry)===null||e===void 0?void 0:e.flag,class:"flag"}):i("p",{class:"p-0 m-0 "},r.entries.Lcz_Select),i("svg",{key:"0d3133b6056e8c949ca610298f67d59842833b71",xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},i("path",{key:"1d6a810acca1c45c7d3b9719b8de7adf3f8e9d42",d:"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"}))),i("p",{key:"f9bf1043a11ff5fe3dced4e07983c94e2611955a",class:"phone_prefix_label"},(t=this.currentCountry)===null||t===void 0?void 0:t.phone_prefix),i("input",{key:"3ab74fdac0672cf3fe95ecf14143295990cca1f9",type:"text",placeholder:this.placeholder,required:true,value:this.inputValue,disabled:this.disabled,onInput:e=>this.handleInputChange(e)}))," ",this.isDropdownVisible&&i("div",{key:"58b4b3a85d45623bf97352ac2bd0d6faf265f314",class:"ir-dropdown-container"},i("ir-combobox",{key:"74fa5cbffab7ea3a86e975e7f0deec73a05ebff5",onComboboxValueChange:e=>{this.setCurrentCountry(+e.detail.data);this.isDropdownVisible=false},class:"bg-white",autoFocus:true,placeholder:"Search country",data:this.countries.map((e=>({id:e.id.toString(),name:`${e.name} (${e.phone_prefix})`,image:e.flag})))})))))}get el(){return a(this)}static get watchers(){return{value:["handleValueChange"],phone_prefix:["handlePhoneChange"]}}};c.style=h;const l=".prepend-textarea.sc-ir-textarea{padding:0 !important}.ta-prepend-text.sc-ir-textarea{width:100%}";const p=l;const d=class{constructor(i){e(this,i);this.textChange=t(this,"textChange",7);this.rows=3;this.cols=5;this.text="";this.label="<label>";this.placeholder="<placeholder>";this.value="";this.maxLength=250;this.variant="default";this.labelWidth=3;this.error=false}handleAriaInvalidChange(e){this.error=e==="true"}connectedCallback(){}disconnectedCallback(){}render(){if(this.variant==="prepend"){return i("fieldset",{class:"input-group"},i("div",{class:`input-group-prepend col-${this.labelWidth} prepend-textarea`},i("span",{class:"input-group-text ta-prepend-text"},this.label)),i("textarea",{value:this.value,class:`form-control`,style:{height:"7rem"},maxLength:this.maxLength,onChange:e=>this.textChange.emit(e.target.value),"aria-label":this.label}))}return i("div",{class:"form-group"},i("label",null,this.label),i("textarea",{maxLength:this.maxLength,rows:this.rows,value:this.value,class:`form-control ${this.textareaClassname} ${this.error?"border-danger":""}`,placeholder:this.placeholder,onInput:e=>this.textChange.emit(e.target.value)}))}static get watchers(){return{"aria-invalid":["handleAriaInvalidChange"]}}};d.style=p;export{c as ir_phone_input,d as ir_textarea};
//# sourceMappingURL=p-f086af86.entry.js.map