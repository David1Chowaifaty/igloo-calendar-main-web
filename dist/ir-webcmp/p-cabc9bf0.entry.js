import{r as t,c as i,g as e,h as n,H as r}from"./p-acddcbeb.js";import{B as s}from"./p-0ca0bfce.js";import{l as a}from"./p-e58470d9.js";import"./p-bf44a732.js";import"./p-e7d273da.js";import"./p-da35159f.js";import"./p-6c4ba7c0.js";import"./p-d6d6fb27.js";import"./p-2925ded6.js";const o=".sc-ir-phone-input-h{display:block}.input-container.sc-ir-phone-input{display:flex;align-items:center;padding:0 !important}.input-container.sc-ir-phone-input:focus-within{border-color:#1e9ff2}.border-theme.sc-ir-phone-input{border-color:#cacfe7}.input-container.sc-ir-phone-input input.sc-ir-phone-input{flex:1;border:0}.input-container.sc-ir-phone-input input.sc-ir-phone-input:focus{outline:none}.dropdown-trigger.sc-ir-phone-input{display:flex;align-items:center;gap:8px;background:white;border:0;border-right:1px solid #cacfe7}.ir-dropdown-container.sc-ir-phone-input{position:absolute;z-index:1000;bottom:-30px;width:100%;left:0;background:white}.input-container.sc-ir-phone-input label.sc-ir-phone-input{display:flex;align-items:center;justify-content:center;margin:0;padding:0 5px}.flag.sc-ir-phone-input{height:1rem;aspect-ratio:4/3;border-radius:3px}.is-invalid.sc-ir-phone-input{border-color:#ff4961}.phone_prefix_label.sc-ir-phone-input{padding:0 0.5rem;margin:0}.sc-ir-phone-input-h{--ir-floating-label-fg:#6c757d;--ir-floating-label-fg-focus:#495057;--ir-floating-label-bg:#fff;--ir-floating-label-scale:0.88;--ir-floating-label-float-translateY:-70%;--ir-floating-label-resting-offset-inline:0.9rem;--ir-floating-phone-input-radius:0.21rem;--ir-floating-phone-input-height:2rem;--ir-danger:#dc3545;--ir-disabled-fg:#9aa0a6}.sc-ir-phone-input-h .input-container.has-floating.sc-ir-phone-input{position:relative;padding-top:0.9rem}.sc-ir-phone-input-h .floating-label.sc-ir-phone-input{position:absolute;top:50%;transform:translateY(-50%);pointer-events:none;position:absolute;padding:0 0.4rem;z-index:10;color:var(--ir-floating-label-fg);background:white;transition:transform 120ms ease, color 120ms ease, top 120ms ease, background-color 120ms ease, opacity 120ms ease;opacity:0.95;line-height:1;white-space:nowrap}.sc-ir-phone-input-h .floating-label.sc-ir-phone-input:dir(rtl){right:95px}.sc-ir-phone-input-h .floating-label.sc-ir-phone-input:dir(ltr){left:95px}.sc-ir-phone-input-h .floating-label.active.sc-ir-phone-input{top:0;transform:translateY(var(--ir-floating-label-float-translateY)) scale(var(--ir-floating-label-scale));background:var(--ir-floating-label-bg);color:var(--ir-floating-label-fg-focus);font-size:12px;padding:0;opacity:0.95}.phone-input__container.sc-ir-phone-input{display:flex;align-items:flex-end}.phone-input__prefix.sc-ir-phone-input{width:150px}.phone-input__prefix.sc-ir-phone-input::part(input),.phone-input__prefix.sc-ir-phone-input::part(end){display:none}.phone-input__prefix.sc-ir-phone-input:dir(ltr)::part(base),.phone-input__phone.sc-ir-phone-input:dir(rtl)::part(base){border-top-right-radius:0;border-bottom-right-radius:0}.phone-input__prefix.sc-ir-phone-input:dir(rtl)::part(base),.phone-input__phone.sc-ir-phone-input:dir(ltr)::part(base){border-top-left-radius:0;border-bottom-left-radius:0}.phone-input__phone.sc-ir-phone-input{flex:1 1 0%}.phone-input__prefix.sc-ir-phone-input::part(start){width:100% !important}.phone-input__prefix.sc-ir-phone-input .dropdown-trigger.sc-ir-phone-input{border-right:0;width:100% !important;display:flex;align-items:center;justify-content:space-between}";const p=o;const l=class{constructor(e){t(this,e);this.textChange=i(this,"textChange",7)}get el(){return e(this)}mode="default";label;value="";disabled=false;error=false;token;language;default_country=null;phone_prefix=null;placeholder;countries=[];testId;floatingLabel;textChange;inputValue="";isDropdownVisible=false;currentCountry;hasFocus=false;bookingService=new s;inputId=`ir-phone-input-${Math.random().toString(36).slice(2)}`;labelId=`ir-phone-input-label-${Math.random().toString(36).slice(2)}`;async componentWillLoad(){if(this.countries.length===0){const t=await this.bookingService.getCountries(this.language);this.countries=t}if(this.phone_prefix){this.setCountryFromPhonePrefix()}else{if(this.default_country){this.setCurrentCountry(this.default_country)}}this.inputValue=this.value}handleValueChange(t,i){if(t!==i){this.inputValue=t}}handlePhoneChange(t,i){if(t!==i){this.setCountryFromPhonePrefix()}}handleDocumentClick(t){const i=t.target;if(!this.el.contains(i)){this.isDropdownVisible=false}}handleInputChange(t){let i=t.target;let e=i.value;e=e.replace(/[^+\d]+/g,"");i.value=e;this.inputValue=e;this.textChange.emit({phone_prefix:this.currentCountry?.phone_prefix,mobile:this.inputValue})}setCountryFromPhonePrefix(){let t=this.countries.find((t=>t.phone_prefix===this.phone_prefix));if(!t){t=this.countries.find((t=>t.id.toString()===this.phone_prefix));if(!t){return}}this.currentCountry={...t};this.textChange.emit({phone_prefix:this.currentCountry?.phone_prefix,mobile:this.value})}setCurrentCountry(t){const i=this.countries.find((i=>i.id===t));if(!i){throw new Error("Invalid country id")}this.currentCountry={...i};this.textChange.emit({phone_prefix:this.currentCountry?.phone_prefix,mobile:this.value})}render(){const t=this.floatingLabel&&this.label;const i=!!this.label&&!t;const e=this.hasFocus||!!this.inputValue;if(this.mode==="modern"){return n(r,null,n("div",{class:"phone-input__container"},n("wa-input",{class:"phone-input__prefix",label:this.label,readonly:true},n("button",{slot:"start",type:"button",onClick:()=>this.isDropdownVisible=!this.isDropdownVisible,class:"dropdown-trigger"},this.currentCountry?n("img",{src:this.currentCountry?.flag,class:"flag"}):n("p",{class:"p-0 m-0 "},a.entries.Lcz_Select),this.currentCountry&&n("span",null,this.currentCountry.phone_prefix),n("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},n("path",{d:"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"})))),n("wa-input",{onchange:t=>this.handleInputChange(t),max:14,value:this.inputValue,class:"phone-input__phone",placeholder:this.placeholder})),this.isDropdownVisible&&n("div",null,n("ir-combobox",{onComboboxValueChange:t=>{this.setCurrentCountry(+t.detail.data);this.isDropdownVisible=false},class:"bg-white",autoFocus:true,placeholder:"Search country",data:this.countries.map((t=>({id:t.id.toString(),name:`${t.name} (${t.phone_prefix})`,image:t.flag})))})))}return n(r,null,n("div",{class:"form-group mr-0"},n("div",{class:"input-group row m-0 p-0 position-relative"},i&&n("div",{class:`input-group-prepend col-3 p-0 text-dark border-none`},n("label",{class:`input-group-text border-theme flex-grow-1 text-dark`},this.label)),n("div",{class:"form-control  input-container  flex-fill"+(this.error?" is-invalid":"")},n("button",{type:"button",onClick:()=>this.isDropdownVisible=!this.isDropdownVisible,class:"dropdown-trigger"},this.currentCountry?n("img",{src:this.currentCountry?.flag,class:"flag"}):n("p",{class:"p-0 m-0 "},a.entries.Lcz_Select),n("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},n("path",{d:"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"}))),n("p",{class:"phone_prefix_label"},this.currentCountry?.phone_prefix),t&&n("label",{id:this.labelId,class:`floating-label ${e?"active":""}`,htmlFor:this.inputId},this.label),n("input",{"data-testid":this.testId,maxLength:14,type:"text",placeholder:this.placeholder,required:true,value:this.inputValue,disabled:this.disabled,onInput:t=>this.handleInputChange(t),onFocus:()=>{this.hasFocus=true},onBlur:()=>{this.hasFocus=false}})),this.isDropdownVisible&&n("div",{class:"ir-dropdown-container"},n("ir-combobox",{onComboboxValueChange:t=>{this.setCurrentCountry(+t.detail.data);this.isDropdownVisible=false},class:"bg-white",autoFocus:true,placeholder:"Search country",data:this.countries.map((t=>({id:t.id.toString(),name:`${t.name} (${t.phone_prefix})`,image:t.flag})))})))))}static get watchers(){return{value:["handleValueChange"],phone_prefix:["handlePhoneChange"]}}};l.style=p;const h=".prepend-textarea.sc-ir-textarea{padding:0 !important}.ta-prepend-text.sc-ir-textarea{width:100%}";const c=h;const u=class{constructor(e){t(this,e);this.textChange=i(this,"textChange",7)}rows=3;cols=5;text="";label="<label>";placeholder="<placeholder>";value="";maxLength=250;textareaClassname;variant="default";labelWidth=3;styles;testId;error=false;textChange;handleAriaInvalidChange(t){this.error=t==="true"}render(){if(this.variant==="prepend"){return n("fieldset",{class:"input-group"},n("div",{class:`input-group-prepend col-${this.labelWidth} prepend-textarea`},n("span",{class:"input-group-text ta-prepend-text"},this.label)),n("textarea",{"data-testid":this.testId,value:this.value,class:`form-control`,style:{height:"7rem",...this.styles},maxLength:this.maxLength,onChange:t=>this.textChange.emit(t.target.value),"aria-label":this.label}))}return n("div",{class:"form-group"},n("label",null,this.label),n("textarea",{"data-testid":this.testId,style:this.styles,maxLength:this.maxLength,rows:this.rows,value:this.value,class:`form-control ${this.textareaClassname} ${this.error?"border-danger":""}`,placeholder:this.placeholder,onInput:t=>this.textChange.emit(t.target.value)}))}static get watchers(){return{"aria-invalid":["handleAriaInvalidChange"]}}};u.style=c;export{l as ir_phone_input,u as ir_textarea};
//# sourceMappingURL=p-cabc9bf0.entry.js.map