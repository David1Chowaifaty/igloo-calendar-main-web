{"version":3,"names":["irHkTasksCss","IrHkTasksStyle0","IrHkTasks","constructor","hostRef","this","language","ticket","isLoading","isCleaningLoading","selectedDuration","selectedHouseKeeper","selectedRoom","archiveOpened","hkNameCache","roomService","RoomService","houseKeepingService","HouseKeepingService","token","Token","table_sorting","Map","componentWillLoad","baseUrl","setBaseUrl","setToken","init","ticketChanged","newValue","oldValue","handleCloseSidebar","e","stopImmediatePropagation","stopPropagation","isSidebarOpen","handleSortingChanged","field","direction","detail","console","log","set","handleSkipSelectedTask","modalCauses","task","cause","_a","modal","openModal","setLoading","propertyId","propertyid","p","Error","propertyData","getExposedProperty","id","aname","is_backend","include_units_hk_status","My_Result","property_id","requests","getExposedHKSetup","fetchLanguage","push","Promise","all","tasksResult","getHkTasks","from_date","moment","format","to_date","housekeepers","cleaning_frequency","_c","calendar_data","_b","housekeeping_store","hk_criteria","cleaning_frequencies","code","dusty_window","_e","_d","dusty_periods","highlight_window","_g","_f","highlight_checkin_options","tasks","updateTasks","error","buildHousekeeperNameCache","forEach","hk","name","updateTasksStore","map","t","Object","assign","v4","housekeeper","hkm_id","hkName","find","handleHeaderButtonPress","sortingArray","Array","from","entries","key","value","url","fetchTasksWithFilters","downloadFile","handleSelectedTaskCleaningEvent","handleModalConfirmation","hkTasksStore","selectedTasks","length","booking_nbr","date","unit","editHkSkip","BOOK_NBR","DATE","COMMENT","HK_SKIP_ID","HK_SKIP_REASON_CODE","PR_ID","executeHKAction","actions","description","unit_id","clearSelectedTasks","closeModal","applyFilters","isApplyFiltersLoading","filters","export_to_excel","cleaning_periods","dusty_units","highlight_check_ins","is_export_to_excel","render","h","Host","class","style","gap","onApplyFilters","onRowSelectChange","updateSelectedTasks","autoClose","ref","el","onConfirmModal","bind","onCancelModal","iconAvailable","icon","leftBtnText","locales","Lcz_Cancel","rightBtnText","Lcz_Confirm","leftBtnColor","rightBtnColor","modalTitle","Lcz_Confirmation","modalBody","open","onIrSidebarToggle","showCloseButton","getToken","slot","PropertyService","params","data","axios","post","ExceptionMsg","results","adultChildConstraints","adult_child_constraints","allowedBookingSources","allowed_booking_sources","allowed_payment_methods","currency","is_vacation_rental","pickup_service","max_nights","roomsInfo","roomtypes","taxes","country","is_automatic_check_in_out","tax_statement","is_frontdesk_enabled","is_pms_enabled","spitTime","time_constraints","check_out_till","split","checkin_checkout_hours","offset","city","gmt_offset","hour","Number","minute","getCountrySales","My_Params_Get_Country_Sales","Link_excel","setExposedCleaningFrequency","getMonthlyStats","My_Params_Get_Monthly_Stats","irHousekeepingCss","IrHousekeepingStyle0","IrHousekeeping","propertyService","initializeApp","handleResetData","include_sales_rate_plans","updateHKStore","housekeeping_enabled","selectedCleaningFrequency","saveAutomaticCheckInCheckout","SetAutomaticCheckInOut","default_properties","flag","toast","emit","position","title","type","saveCleaningFrequency","Lcz_HouseKeepingAndCheckInSetup","borderShown","label","Lcz_CheckInOutGuestsAutomatically","LabelAvailable","showFirstOption","selectedValue","onSelectChange","text","Lcz_YesAsPerPropertyPolicy","Lcz_NoIWillDoItManually","Lcz_CleaningFrequency","v","isRequestPending","irMonthlyBookingsReportCss","IrMonthlyBookingsReportStyle0","IrMonthlyBookingsReport","isPageLoading","reports","tokenService","baseFilters","firstOfMonth","startOf","lastOfMonth","endOf","include_previous_year","handleTicketChange","handleApplyFiltersChange","getReports","isExportToExcel","getReportObj","report","day","Date","units_booked","Units_booked","occupancy_percent","Occupancy","adr","ADR","rooms_revenue","Rooms_Revenue","total_guests","Total_Guests","add","currentReports","enrichedReports","DailyStats","rest","__rest$1","stats","previousYearReports","formattedReports","current","previous","prev","last_year","size","btn_color","Lcz_Export","onClickHandler","async","btnStyle","height","iconPosition","icon_name","icon_style","alignItems","Occupancy_Difference_From_Previous_Month","cardTitle","AverageOccupancy","toFixed","subtitle","TotalUnitsBooked","toString","_j","_h","reduce","curr","_k","PeakDays","_m","_l","pd","concat","join","Math","max","_o","OccupancyPercent","irSalesByCountryCss","IrSalesByCountryStyle0","IrSalesByCountry","countries","bookingService","BookingService","FROM_DATE","TO_DATE","BOOK_CASE","WINDOW","salesFilters","getCountries","mappedCountries","formatSalesData","COUNTRY","country_id","COUNTRY_ID","nights","NIGHTS","percentage","PCT","revenue","REVENUE","number_of_guests","filterParams","__rest","currentSales","AC_ID","shouldFetchPreviousYear","enrichedSales","previousYearSales","subtract","toLowerCase","record","salesData","records","irUserManagementCss","IrUserManagementStyle0","IrUserManagement","isSuperAdmin","users","allowedUsersTypes","userService","UserService","userTypes","superAdminId","fetchUsers","fetchUserTypes","socket","io","on","msg","handleSocketMessage","msgAsObject","JSON","parse","REASON","KEY","PAYLOAD","result","reasonHandlers","EMAIL_VERIFIED","updateUserVerificationStatus","handler","call","warn","idx","findIndex","u","is_email_verified","getExposedPropertyUsers","sort","u1","u2","priority","p1","p2","username","localeCompare","res","getSetupEntriesByTableName","getLov","allowedUsers","allowed_user_types","toUpperCase","f","CODE_NAME","disconnectedCallback","disconnect","suppressToastEndpoints","Lcz_ExtranetUsers","baseUserTypeCode","userTypeCode","haveAdminPrivileges","includes"],"sources":["src/components/ir-housekeeping/ir-hk-tasks/ir-hk-tasks.css?tag=ir-hk-tasks&encapsulation=scoped","src/components/ir-housekeeping/ir-hk-tasks/ir-hk-tasks.tsx","src/services/property.service.ts","src/components/ir-housekeeping/ir-housekeeping.css?tag=ir-housekeeping&encapsulation=scoped","src/components/ir-housekeeping/ir-housekeeping.tsx","src/components/ir-monthly-bookings-report/ir-monthly-bookings-report.css?tag=ir-monthly-bookings-report&encapsulation=scoped","src/components/ir-monthly-bookings-report/ir-monthly-bookings-report.tsx","src/components/ir-sales-by-country/ir-sales-by-country.css?tag=ir-sales-by-country&encapsulation=scoped","src/components/ir-sales-by-country/ir-sales-by-country.tsx","src/components/ir-user-management/ir-user-management.css?tag=ir-user-management&encapsulation=scoped","src/components/ir-user-management/ir-user-management.tsx"],"sourcesContent":[":host {\n  display: block;\n  box-sizing: border-box;\n}\n:host * {\n  box-sizing: border-box;\n}\n\n@media only screen and (min-width: 900px) {\n  /* td {\n    min-width: 140px !important;\n    width: max-content !important;\n  } */\n}\n@media only screen and (max-width: 900px) {\n  /* td {\n    min-width: 100px !important;\n  } */\n  /* .table-container {\n    width: max-content !important;\n  } */\n}\n/*sm*/\n@media (min-width: 640px) {\n}\n\n/*md*/\n@media (min-width: 768px) {\n}\n\n.tasks-view {\n  display: flex;\n  flex-direction: column;\n}\n/*lg*/\n@media (min-width: 1024px) {\n  .tasks-view {\n    flex-direction: row;\n  }\n}\n\n/*xl*/\n@media (min-width: 1280px) {\n}\n\n/*2xl*/\n@media (min-width: 1536px) {\n}\n","import { IPendingActions, Task } from '@/models/housekeeping';\nimport Token from '@/models/Token';\nimport { HouseKeepingService } from '@/services/housekeeping.service';\nimport { RoomService } from '@/services/room.service';\nimport housekeeping_store from '@/stores/housekeeping.store';\n// import { isRequestPending } from '@/stores/ir-interceptor.store';\nimport locales from '@/stores/locales.store';\nimport { Component, Host, Prop, State, h, Element, Watch, Event, EventEmitter, Listen } from '@stencil/core';\nimport moment from 'moment';\nimport { v4 } from 'uuid';\nimport { TaskFilters } from './types';\nimport { downloadFile } from '@/utils/utils';\nimport { updateTasks as updateTasksStore, updateSelectedTasks, clearSelectedTasks, hkTasksStore, setLoading } from '@/stores/hk-tasks.store';\nimport calendar_data from '@/stores/calendar-data';\n\n@Component({\n  tag: 'ir-hk-tasks',\n  styleUrl: 'ir-hk-tasks.css',\n  scoped: true,\n})\nexport class IrHkTasks {\n  @Element() el: HTMLElement;\n\n  @Prop() language: string = '';\n  @Prop() ticket: string = '';\n  @Prop() propertyid: number;\n  @Prop() p: string;\n  @Prop() baseUrl: string;\n\n  @State() isLoading = false;\n  @State() isCleaningLoading = false;\n  @State() selectedDuration = '';\n  @State() selectedHouseKeeper = '0';\n  @State() selectedRoom: IPendingActions | null = null;\n  @State() archiveOpened = false;\n  @State() property_id: number;\n  @State() isSidebarOpen: boolean;\n  @State() isApplyFiltersLoading: boolean;\n  @State() filters: TaskFilters;\n  @State() modalCauses: { task?: Task; cause: 'skip' | 'clean' };\n\n  @Event({ bubbles: true, composed: true }) clearSelectedHkTasks: EventEmitter<void>;\n\n  private hkNameCache: Record<number, string> = {};\n  private roomService = new RoomService();\n  private houseKeepingService = new HouseKeepingService();\n  private token = new Token();\n  private table_sorting: Map<string, 'ASC' | 'DESC'> = new Map();\n  private modal: HTMLIrModalElement;\n\n  componentWillLoad() {\n    if (this.baseUrl) {\n      this.token.setBaseUrl(this.baseUrl);\n    }\n    if (this.ticket !== '') {\n      this.token.setToken(this.ticket);\n      this.init();\n    }\n  }\n\n  @Watch('ticket')\n  ticketChanged(newValue: string, oldValue: string) {\n    if (newValue === oldValue) {\n      return;\n    }\n    this.token.setToken(this.ticket);\n    this.init();\n  }\n\n  @Listen('closeSideBar')\n  handleCloseSidebar(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.isSidebarOpen = false;\n  }\n  @Listen('sortingChanged')\n  handleSortingChanged(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    const { field, direction } = e.detail;\n    console.log(e.detail);\n    if (field === 'date') {\n      return;\n    }\n    this.table_sorting.set(field, direction);\n  }\n  @Listen('skipSelectedTask')\n  handleSkipSelectedTask(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.modalCauses = { task: e.detail, cause: 'skip' };\n    this.modal?.openModal();\n  }\n\n  private async init() {\n    try {\n      this.isLoading = true;\n      setLoading(true);\n      let propertyId = this.propertyid;\n      if (!this.propertyid && !this.p) {\n        throw new Error('Property ID or username is required');\n      }\n      // let roomResp = null;\n      if (!propertyId) {\n        console.log(propertyId);\n        const propertyData = await this.roomService.getExposedProperty({\n          id: 0,\n          aname: this.p,\n          language: this.language,\n          is_backend: true,\n          include_units_hk_status: true,\n        });\n        // roomResp = propertyData;\n        propertyId = propertyData.My_Result.id;\n      }\n      this.property_id = propertyId;\n      const requests = [this.houseKeepingService.getExposedHKSetup(this.property_id), this.roomService.fetchLanguage(this.language)];\n      if (this.propertyid) {\n        requests.push(\n          this.roomService.getExposedProperty({\n            id: this.propertyid,\n            language: this.language,\n            is_backend: true,\n            include_units_hk_status: true,\n          }),\n        );\n      }\n\n      await Promise.all(requests);\n      const tasksResult = await this.houseKeepingService.getHkTasks({\n        property_id: this.property_id,\n        from_date: moment().format('YYYY-MM-DD'),\n        to_date: moment().format('YYYY-MM-DD'),\n        housekeepers: [],\n        cleaning_frequency: (calendar_data.cleaning_frequency ?? housekeeping_store?.hk_criteria?.cleaning_frequencies[0])?.code,\n        dusty_window: housekeeping_store?.hk_criteria?.dusty_periods[0]?.code,\n        highlight_window: housekeeping_store?.hk_criteria?.highlight_checkin_options[0]?.code,\n      });\n\n      // updateTaskList();\n      if (tasksResult?.tasks) {\n        this.updateTasks(tasksResult.tasks);\n      }\n    } catch (error) {\n      console.log(error);\n    } finally {\n      this.isLoading = false;\n      setLoading(false);\n    }\n  }\n\n  private buildHousekeeperNameCache() {\n    this.hkNameCache = {};\n    housekeeping_store.hk_criteria?.housekeepers?.forEach(hk => {\n      if (hk.id != null && hk.name != null) {\n        this.hkNameCache[hk.id] = hk.name;\n      }\n    });\n  }\n\n  private updateTasks(tasks: any[]) {\n    this.buildHousekeeperNameCache();\n    updateTasksStore(\n      tasks.map(t => ({\n        ...t,\n        id: v4(),\n        housekeeper: (() => {\n          const name = this.hkNameCache[t.hkm_id];\n          if (name) {\n            return name;\n          }\n          const hkName = housekeeping_store.hk_criteria?.housekeepers?.find(hk => hk.id === t.hkm_id)?.name;\n          this.hkNameCache[t.hkm_id] = hkName;\n          return hkName;\n        })(),\n      })),\n    );\n  }\n  @Listen('headerButtonPress')\n  async handleHeaderButtonPress(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    const { name } = e.detail;\n    switch (name) {\n      case 'cleaned':\n        this.modal?.openModal();\n        break;\n      case 'export':\n        const sortingArray: { key: string; value: string }[] = Array.from(this.table_sorting.entries()).map(([key, value]) => ({\n          key,\n          value,\n        }));\n        console.log(sortingArray);\n        const { url } = await this.fetchTasksWithFilters(true);\n        downloadFile(url);\n        break;\n      case 'archive':\n        this.isSidebarOpen = true;\n        break;\n    }\n  }\n  @Listen('cleanSelectedTask')\n  handleSelectedTaskCleaningEvent(e: CustomEvent<Task>) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.modalCauses = { task: e.detail, cause: 'clean' };\n    this.modal?.openModal();\n  }\n\n  private async handleModalConfirmation(e: CustomEvent) {\n    try {\n      e.stopImmediatePropagation();\n      e.stopPropagation();\n      if (hkTasksStore.selectedTasks.length === 0) {\n        return;\n      }\n      this.isCleaningLoading = true;\n      if (this.modalCauses?.cause === 'skip') {\n        const { booking_nbr, date, unit } = this.modalCauses.task;\n        await this.houseKeepingService.editHkSkip({\n          BOOK_NBR: booking_nbr,\n          DATE: date,\n          COMMENT: '',\n          HK_SKIP_ID: -1,\n          HK_SKIP_REASON_CODE: '001',\n          PR_ID: unit.id,\n        });\n      } else {\n        await this.houseKeepingService.executeHKAction({\n          actions: hkTasksStore.selectedTasks.map(t => ({ description: 'Cleaned', hkm_id: t.hkm_id === 0 ? null : t.hkm_id, unit_id: t.unit.id, booking_nbr: t.booking_nbr })),\n        });\n      }\n      await this.fetchTasksWithFilters();\n    } finally {\n      clearSelectedTasks();\n      if (this.modalCauses) {\n        this.modalCauses = null;\n      }\n      this.isCleaningLoading = false;\n      // this.clearSelectedTasks.emit();\n      this.modal.closeModal();\n    }\n  }\n\n  private async applyFilters(e: CustomEvent) {\n    try {\n      this.isApplyFiltersLoading = true;\n      e.stopImmediatePropagation();\n      e.stopPropagation();\n      this.filters = { ...e.detail };\n      await this.fetchTasksWithFilters();\n    } catch (error) {\n      console.log(error);\n    } finally {\n      this.isApplyFiltersLoading = false;\n    }\n  }\n\n  private async fetchTasksWithFilters(export_to_excel: boolean = false) {\n    const { cleaning_periods, housekeepers, cleaning_frequencies, dusty_units, highlight_check_ins } = this.filters ?? {};\n\n    const { tasks, url } = await this.houseKeepingService.getHkTasks({\n      housekeepers,\n      cleaning_frequency: cleaning_frequencies?.code,\n      dusty_window: dusty_units?.code,\n      highlight_window: highlight_check_ins?.code,\n      property_id: this.property_id,\n      from_date: moment().format('YYYY-MM-DD'),\n      to_date: cleaning_periods?.code || moment().format('YYYY-MM-DD'),\n      is_export_to_excel: export_to_excel,\n    });\n    console.log(tasks);\n    if (tasks) {\n      this.updateTasks(tasks);\n    }\n    return { tasks, url };\n  }\n\n  render() {\n    if (this.isLoading) {\n      return <ir-loading-screen></ir-loading-screen>;\n    }\n    return (\n      <Host data-testid=\"hk_tasks_base\">\n        <ir-toast></ir-toast>\n        <ir-interceptor></ir-interceptor>\n        <section class=\"p-1 d-flex flex-column\" style={{ gap: '1rem' }}>\n          <h3>Housekeeping Tasks</h3>\n          <div class=\"tasks-view \" style={{ gap: '1rem' }}>\n            <ir-tasks-filters\n              isLoading={this.isApplyFiltersLoading}\n              onApplyFilters={e => {\n                this.applyFilters(e);\n              }}\n            ></ir-tasks-filters>\n            <div class=\"d-flex w-100 flex-column\" style={{ gap: '1rem' }}>\n              <ir-tasks-table\n                onRowSelectChange={e => {\n                  e.stopImmediatePropagation();\n                  e.stopPropagation();\n                  updateSelectedTasks(e.detail);\n                }}\n                class=\"flex-grow-1 w-100\"\n              ></ir-tasks-table>\n              {/* <ir-tasks-table-pagination></ir-tasks-table-pagination> */}\n            </div>\n          </div>\n        </section>\n        <ir-modal\n          autoClose={false}\n          ref={el => (this.modal = el)}\n          isLoading={this.isCleaningLoading}\n          onConfirmModal={this.handleModalConfirmation.bind(this)}\n          onCancelModal={() => {\n            if (this.modalCauses) {\n              clearSelectedTasks();\n              this.modalCauses = null;\n            }\n          }}\n          iconAvailable={true}\n          icon=\"ft-alert-triangle danger h1\"\n          leftBtnText={locales.entries.Lcz_Cancel}\n          rightBtnText={locales.entries.Lcz_Confirm}\n          leftBtnColor=\"secondary\"\n          rightBtnColor={'primary'}\n          modalTitle={locales.entries.Lcz_Confirmation}\n          modalBody={\n            this.modalCauses\n              ? this.modalCauses?.cause === 'clean'\n                ? `Update ${this.modalCauses?.task?.unit?.name} to Clean`\n                : 'Skip cleaning and reschedule for tomorrow.'\n              : 'Update selected unit(s) to Clean'\n          }\n        ></ir-modal>\n        <ir-sidebar\n          open={this.isSidebarOpen}\n          id=\"editGuestInfo\"\n          onIrSidebarToggle={e => {\n            e.stopImmediatePropagation();\n            e.stopPropagation();\n            this.isSidebarOpen = false;\n          }}\n          // sidebarStyles={{\n          //   width: '80vw',\n          // }}\n          showCloseButton={false}\n        >\n          {this.isSidebarOpen && <ir-hk-archive ticket={this.token.getToken()} propertyId={this.property_id} slot=\"sidebar-body\"></ir-hk-archive>}\n        </ir-sidebar>\n        {/* <ir-title class=\"d-none d-md-flex\" label={locales.entries.Lcz_HousekeepingTasks} justifyContent=\"space-between\">\n            <ir-button slot=\"title-body\" text={locales.entries.Lcz_Archive} size=\"sm\"></ir-button>\n          </ir-title> */}\n      </Host>\n    );\n  }\n}\n","import calendar_data from '@/stores/calendar-data';\nimport { downloadFile } from '@/utils/utils';\nimport axios from 'axios';\nexport type CountrySalesParams = {\n  AC_ID: number;\n  WINDOW: number;\n  FROM_DATE: string;\n  TO_DATE: string;\n  BOOK_CASE: string;\n  is_export_to_excel: boolean;\n};\nexport type MonthlyStatsParams = {\n  property_id: number;\n  from_date: string;\n  to_date: string;\n  is_export_to_excel?: boolean;\n};\nexport interface MonthlyStatsResults {\n  AverageOccupancy: number;\n  DailyStats: DailyStat[];\n  ExcelLink: null;\n  PeakDays: PeakDay[];\n  Occupancy_Difference_From_Previous_Month: number;\n  TotalUnitsBooked: number;\n}\n\nexport interface PeakDay {\n  Date: string;\n  OccupancyPercent: number;\n}\n\nexport interface DailyStat {\n  Date: string;\n  Occupancy: number;\n  Units_booked: number;\n  Rooms_Revenue: number;\n  ADR: number;\n  Total_Guests: number | undefined;\n}\nexport class PropertyService {\n  public async getExposedProperty(params: {\n    id: number | null;\n    language: string;\n    is_backend?: boolean;\n    aname?: string;\n    include_units_hk_status?: boolean;\n    include_sales_rate_plans?: boolean;\n  }) {\n    try {\n      const { data } = await axios.post(`/Get_Exposed_Property`, params);\n      if (data.ExceptionMsg !== '') {\n        throw new Error(data.ExceptionMsg);\n      }\n      const results = data.My_Result;\n      calendar_data.adultChildConstraints = results.adult_child_constraints;\n      calendar_data.allowedBookingSources = results.allowed_booking_sources;\n      calendar_data.allowed_payment_methods = results.allowed_payment_methods;\n      calendar_data.currency = results.currency;\n      calendar_data.is_vacation_rental = results.is_vacation_rental;\n      calendar_data.pickup_service = results.pickup_service;\n      calendar_data.max_nights = results.max_nights;\n      calendar_data.roomsInfo = results.roomtypes;\n      calendar_data.taxes = results.taxes;\n      calendar_data.id = results.id;\n      calendar_data.country = results.country;\n      calendar_data.name = results.name;\n      calendar_data.is_automatic_check_in_out = results.is_automatic_check_in_out;\n      calendar_data.tax_statement = results.tax_statement;\n      calendar_data.is_frontdesk_enabled = results.is_frontdesk_enabled;\n      calendar_data.is_pms_enabled = results.is_pms_enabled;\n      const spitTime = results?.time_constraints?.check_out_till?.split(':');\n      calendar_data.checkin_checkout_hours = {\n        offset: results.city.gmt_offset,\n        hour: Number(spitTime[0] || 0),\n        minute: Number(spitTime[1] || 0),\n      };\n      return data;\n    } catch (error) {\n      console.log(error);\n      throw new Error(error);\n    }\n  }\n  public async getCountrySales(params: CountrySalesParams) {\n    const { data } = await axios.post('/Get_Country_Sales', params);\n    if (data.ExceptionMsg !== '') {\n      throw new Error(data.ExceptionMsg);\n    }\n    if (params.is_export_to_excel) {\n      downloadFile(data.My_Params_Get_Country_Sales.Link_excel);\n    }\n    return data.My_Result;\n  }\n  public async setExposedCleaningFrequency(params: { property_id: number; code: string }) {\n    const { data } = await axios.post('/Set_Exposed_Cleaning_Frequency', params);\n    if (data.ExceptionMsg !== '') {\n      throw new Error(data.ExceptionMsg);\n    }\n    return data.My_Result;\n  }\n  public async getMonthlyStats(params: MonthlyStatsParams): Promise<MonthlyStatsResults> {\n    const { data } = await axios.post('/Get_Monthly_Stats', params);\n    if (data.ExceptionMsg !== '') {\n      throw new Error(data.ExceptionMsg);\n    }\n    if (params.is_export_to_excel) {\n      downloadFile(data.My_Params_Get_Monthly_Stats.Link_excel);\n    }\n    return data.My_Result;\n  }\n}\n",":host {\n  display: block;\n}\n","import Token from '@/models/Token';\nimport { HouseKeepingService } from '@/services/housekeeping.service';\nimport { RoomService } from '@/services/room.service';\nimport calendar_data from '@/stores/calendar-data';\nimport housekeeping_store, { updateHKStore } from '@/stores/housekeeping.store';\nimport { Component, Event, EventEmitter, Host, Listen, Prop, State, Watch, h } from '@stencil/core';\nimport { IToast } from '@components/ui/ir-toast/toast';\nimport locales from '@/stores/locales.store';\nimport { PropertyService } from '@/services/property.service';\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\n@Component({\n  tag: 'ir-housekeeping',\n  styleUrl: 'ir-housekeeping.css',\n  scoped: true,\n})\nexport class IrHousekeeping {\n  @Prop() language: string = '';\n  @Prop() ticket: string = '';\n\n  @Prop() propertyid: number;\n  @Prop() p: string;\n  @Prop() baseUrl: string;\n\n  @State() isLoading = false;\n\n  @Event() toast: EventEmitter<IToast>;\n\n  private roomService = new RoomService();\n  private houseKeepingService = new HouseKeepingService();\n  private propertyService = new PropertyService();\n  private token = new Token();\n  modal: HTMLIrModalElement;\n  selectedCleaningFrequency: any;\n\n  componentWillLoad() {\n    if (this.baseUrl) {\n      this.token.setBaseUrl(this.baseUrl);\n    }\n    if (this.ticket !== '') {\n      this.token.setToken(this.ticket);\n      this.initializeApp();\n    }\n  }\n  @Listen('resetData')\n  async handleResetData(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    await this.houseKeepingService.getExposedHKSetup(this.propertyid);\n  }\n  @Watch('ticket')\n  ticketChanged(newValue: string, oldValue: string) {\n    if (newValue === oldValue) {\n      return;\n    }\n    this.token.setToken(this.ticket);\n    this.initializeApp();\n  }\n\n  async initializeApp() {\n    try {\n      this.isLoading = true;\n      let propertyId = this.propertyid;\n      if (!propertyId) {\n        const propertyData = await this.roomService.getExposedProperty({\n          id: 0,\n          aname: this.p,\n          language: this.language,\n          is_backend: true,\n          include_sales_rate_plans: true,\n        });\n        propertyId = propertyData.My_Result.id;\n      }\n      updateHKStore('default_properties', { token: this.ticket, property_id: propertyId, language: this.language });\n      const requests: Array<Promise<any>> = [];\n      if (calendar_data.housekeeping_enabled) {\n        requests.push(this.houseKeepingService.getExposedHKSetup(propertyId));\n      }\n      requests.push(this.roomService.fetchLanguage(this.language, ['_HK_FRONT', '_PMS_FRONT']));\n      if (this.propertyid) {\n        requests.push(\n          this.roomService.getExposedProperty({\n            id: propertyId,\n            language: this.language,\n            is_backend: true,\n            include_sales_rate_plans: true,\n          }),\n        );\n      }\n\n      await Promise.all(requests);\n      this.selectedCleaningFrequency = calendar_data.cleaning_frequency?.code;\n    } catch (error) {\n      console.error(error);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n  private async saveAutomaticCheckInCheckout(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    try {\n      await this.roomService.SetAutomaticCheckInOut({\n        property_id: housekeeping_store.default_properties.property_id,\n        flag: e.detail === 'auto',\n      });\n      this.toast.emit({\n        position: 'top-right',\n        title: 'Saved Successfully',\n        description: '',\n        type: 'success',\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  private async saveCleaningFrequency(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    try {\n      await this.propertyService.setExposedCleaningFrequency({\n        property_id: housekeeping_store.default_properties.property_id,\n        code: this.selectedCleaningFrequency,\n      });\n      calendar_data.cleaning_frequency = { code: this.selectedCleaningFrequency, description: '' };\n      this.toast.emit({\n        position: 'top-right',\n        title: 'Saved Successfully',\n        description: '',\n        type: 'success',\n      });\n      this.modal.closeModal();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  render() {\n    if (this.isLoading) {\n      return <ir-loading-screen></ir-loading-screen>;\n    }\n    console.log(calendar_data.cleaning_frequency);\n    return (\n      <Host>\n        <ir-interceptor></ir-interceptor>\n        <ir-toast></ir-toast>\n        <section class=\"p-1\">\n          <h3 class=\"mb-2\">{locales.entries.Lcz_HouseKeepingAndCheckInSetup}</h3>\n          <div class=\"card p-1\">\n            <ir-title borderShown label=\"Operations Settings\"></ir-title>\n            <div class={'d-flex align-items-center mb-1'}>\n              <p class=\"my-0 py-0 mr-1\">{locales.entries.Lcz_CheckInOutGuestsAutomatically}</p>\n              <ir-select\n                LabelAvailable={false}\n                showFirstOption={false}\n                selectedValue={calendar_data.is_automatic_check_in_out ? 'auto' : 'manual'}\n                onSelectChange={e => this.saveAutomaticCheckInCheckout(e)}\n                data={[\n                  { text: locales.entries.Lcz_YesAsPerPropertyPolicy, value: 'auto' },\n                  { text: locales.entries.Lcz_NoIWillDoItManually, value: 'manual' },\n                ]}\n              ></ir-select>\n            </div>\n            <div class={'d-flex align-items-center'}>\n              <p class=\"my-0 py-0 mr-1\">{locales.entries.Lcz_CleaningFrequency}:</p>\n              <ir-select\n                LabelAvailable={false}\n                showFirstOption={false}\n                selectedValue={this.selectedCleaningFrequency}\n                onSelectChange={e => {\n                  e.stopImmediatePropagation();\n                  e.stopPropagation();\n                  this.selectedCleaningFrequency = e.detail;\n                  this.modal.openModal();\n                }}\n                data={housekeeping_store?.hk_criteria?.cleaning_frequencies.map(v => ({\n                  text: v.description,\n                  value: v.code,\n                }))}\n              ></ir-select>\n            </div>\n          </div>\n          {/*<ir-unit-status class=\"mb-1\"></ir-unit-status>*/}\n          {calendar_data.housekeeping_enabled && <ir-hk-team class=\"mb-1\"></ir-hk-team>}\n          <ir-modal\n            autoClose={false}\n            ref={el => (this.modal = el)}\n            isLoading={isRequestPending('/Set_Exposed_Cleaning_Frequency')}\n            onConfirmModal={this.saveCleaningFrequency.bind(this)}\n            iconAvailable={true}\n            onCancelModal={() => {\n              this.selectedCleaningFrequency = calendar_data.cleaning_frequency?.code;\n            }}\n            icon=\"ft-alert-triangle danger h1\"\n            leftBtnText={locales.entries.Lcz_Cancel}\n            rightBtnText={locales.entries.Lcz_Confirm}\n            leftBtnColor=\"secondary\"\n            rightBtnColor={'primary'}\n            modalTitle={locales.entries.Lcz_Confirmation}\n            modalBody={'This action will reschedule all cleaning tasks. Do you want to continue?'}\n          ></ir-modal>\n        </section>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n","import Token from '@/models/Token';\nimport { Component, Host, Listen, Prop, State, Watch, h } from '@stencil/core';\nimport { DailyReport, DailyReportFilter } from './types';\nimport moment from 'moment';\nimport locales from '@/stores/locales.store';\nimport { RoomService } from '@/services/room.service';\nimport { DailyStat, MonthlyStatsResults, PropertyService } from '@/services/property.service';\n\n@Component({\n  tag: 'ir-monthly-bookings-report',\n  styleUrl: 'ir-monthly-bookings-report.css',\n  scoped: true,\n})\nexport class IrMonthlyBookingsReport {\n  @Prop() language: string = '';\n  @Prop() ticket: string = '';\n  @Prop() propertyid: number;\n  @Prop() p: string;\n\n  @State() isPageLoading = true;\n  @State() isLoading: 'export' | 'filter' | null = null;\n\n  @State() reports: DailyReport[] = [];\n  @State() filters: DailyReportFilter;\n  @State() property_id: number;\n  @State() stats: Omit<MonthlyStatsResults, 'DailyStats'>;\n\n  private baseFilters: DailyReportFilter;\n\n  private tokenService = new Token();\n  private roomService = new RoomService();\n  private propertyService = new PropertyService();\n\n  componentWillLoad() {\n    this.baseFilters = {\n      date: {\n        description: moment().format('MMMM YYYY'),\n        firstOfMonth: moment().startOf('month').format('YYYY-MM-DD'),\n        lastOfMonth: moment().endOf('month').format('YYYY-MM-DD'),\n      },\n      include_previous_year: false,\n    };\n    this.filters = this.baseFilters;\n    if (this.ticket) {\n      this.tokenService.setToken(this.ticket);\n      this.init();\n    }\n  }\n  @Watch('ticket')\n  handleTicketChange(newValue: string, oldValue: string) {\n    if (newValue !== oldValue) {\n      this.tokenService.setToken(this.ticket);\n      this.init();\n    }\n  }\n  @Listen('applyFilters')\n  handleApplyFiltersChange(e: CustomEvent<DailyReportFilter>) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.filters = e.detail;\n    this.getReports();\n  }\n\n  private async init() {\n    try {\n      let propertyId = this.propertyid;\n      if (!this.propertyid && !this.p) {\n        throw new Error('Property ID or username is required');\n      }\n      // let roomResp = null;\n      if (!propertyId) {\n        console.log(propertyId);\n        const propertyData = await this.roomService.getExposedProperty({\n          id: 0,\n          aname: this.p,\n          language: this.language,\n          is_backend: true,\n          include_units_hk_status: true,\n        });\n        // roomResp = propertyData;\n        propertyId = propertyData.My_Result.id;\n      }\n      this.property_id = propertyId;\n      const requests = [this.roomService.fetchLanguage(this.language), this.getReports()];\n      if (this.propertyid) {\n        requests.push(\n          this.roomService.getExposedProperty({\n            id: this.propertyid,\n            language: this.language,\n            is_backend: true,\n            include_units_hk_status: true,\n          }),\n        );\n      }\n\n      await Promise.all(requests);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      this.isPageLoading = false;\n    }\n  }\n\n  private async getReports(isExportToExcel = false) {\n    try {\n      const getReportObj = (report: DailyStat): DailyReport => {\n        return {\n          day: report.Date,\n          units_booked: report.Units_booked,\n          occupancy_percent: report.Occupancy,\n          adr: report.ADR,\n          rooms_revenue: report.Rooms_Revenue,\n          total_guests: report?.Total_Guests,\n        };\n      };\n      this.isLoading = isExportToExcel ? 'export' : 'filter';\n      const { date, include_previous_year } = this.filters;\n\n      const requests = [\n        this.propertyService.getMonthlyStats({\n          from_date: date.firstOfMonth,\n          to_date: date.lastOfMonth,\n          property_id: this.property_id,\n          is_export_to_excel: isExportToExcel,\n        }),\n      ];\n\n      if (include_previous_year) {\n        requests.push(\n          this.propertyService.getMonthlyStats({\n            from_date: moment(date.firstOfMonth, 'YYYY-MM-DD').add(-1, 'year').format('YYYY-MM-DD'),\n            to_date: moment(date.lastOfMonth, 'YYYY-MM-DD').add(-1, 'years').format('YYYY-MM-DD'),\n            property_id: this.property_id,\n          }),\n        );\n      }\n\n      const results = await Promise.all(requests);\n      const currentReports = results[0];\n      let enrichedReports: DailyReport[] = [];\n      const { DailyStats, ...rest } = currentReports;\n\n      this.stats = { ...rest };\n\n      if (include_previous_year && results[isExportToExcel ? 0 : 1]) {\n        const previousYearReports = results[isExportToExcel ? 0 : 1];\n        let formattedReports = previousYearReports.DailyStats.map(getReportObj);\n        enrichedReports = DailyStats.map(getReportObj).map(current => {\n          const previous = formattedReports.find(prev => prev.day === moment(current.day, 'YYYY-MM-DD').add(-1, 'years').format('YYYY-MM-DD'));\n          return {\n            ...current,\n            last_year: previous ?? null,\n          };\n        });\n      } else {\n        enrichedReports = DailyStats.map(getReportObj);\n      }\n      this.reports = [...enrichedReports];\n    } catch (e) {\n      console.log(e);\n    } finally {\n      this.isLoading = null;\n    }\n  }\n  render() {\n    if (this.isPageLoading) {\n      return <ir-loading-screen></ir-loading-screen>;\n    }\n    return (\n      <Host>\n        <ir-toast></ir-toast>\n        <ir-interceptor></ir-interceptor>\n        <section class=\"p-2 d-flex flex-column\" style={{ gap: '1rem' }}>\n          <div class=\"d-flex align-items-center justify-content-between\">\n            <h3 class=\"mb-1 mb-md-0\">Daily Occupancy</h3>\n            <ir-button\n              size=\"sm\"\n              btn_color=\"outline\"\n              isLoading={this.isLoading === 'export'}\n              text={locales.entries?.Lcz_Export}\n              onClickHandler={async e => {\n                e.stopImmediatePropagation();\n                e.stopPropagation();\n                await this.getReports(true);\n              }}\n              btnStyle={{ height: '100%' }}\n              iconPosition=\"right\"\n              icon_name=\"file\"\n              icon_style={{ '--icon-size': '14px' }}\n            ></ir-button>\n          </div>\n          <section>\n            <div class=\"d-flex flex-column flex-md-row w-100\" style={{ gap: '1rem', alignItems: 'stretch' }}>\n              <ir-report-stats-card\n                icon={this.stats?.Occupancy_Difference_From_Previous_Month < 0 ? 'arrow-trend-down' : 'arrow-trend-up'}\n                cardTitle=\"Average Occupancy\"\n                value={this.stats.AverageOccupancy ? this.stats?.AverageOccupancy.toFixed(2) + '%' : null}\n                subtitle={`${this.stats?.Occupancy_Difference_From_Previous_Month < 0 ? '' : '+'}${this.stats?.Occupancy_Difference_From_Previous_Month.toFixed(\n                  2,\n                )}% from last month`}\n              ></ir-report-stats-card>\n\n              <ir-report-stats-card\n                icon=\"hotel\"\n                cardTitle=\"Total Units\"\n                value={this.stats?.TotalUnitsBooked ? this.stats?.TotalUnitsBooked.toString() : null}\n                subtitle=\"Booked\"\n              ></ir-report-stats-card>\n\n              <ir-report-stats-card\n                icon=\"user_group\"\n                cardTitle=\"Total Guests\"\n                value={this.reports?.reduce((prev, curr) => prev + curr.total_guests, 0)?.toString()}\n                subtitle=\"Stayed\"\n              ></ir-report-stats-card>\n\n              <ir-report-stats-card\n                icon=\"calendar\"\n                cardTitle=\"Peak Days\"\n                value={this.stats?.PeakDays.length === 0 ? null : this.stats?.PeakDays?.map(pd => moment(pd.Date, 'YYYY-MM-DD').format('D').concat('th')).join(' - ')}\n                subtitle={`${Math.max(...(this.stats.PeakDays?.map(pd => pd.OccupancyPercent) || []))}% occupancy`}\n              ></ir-report-stats-card>\n            </div>\n            <div class=\"d-flex flex-column flex-lg-row mt-1 \" style={{ gap: '1rem' }}>\n              <ir-monthly-bookings-report-filter isLoading={this.isLoading === 'filter'} class=\"filters-card\" baseFilters={this.baseFilters}></ir-monthly-bookings-report-filter>\n              <ir-monthly-bookings-report-table reports={this.reports}></ir-monthly-bookings-report-table>\n            </div>\n          </section>\n        </section>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n","import Token from '@/models/Token';\nimport { PropertyService } from '@/services/property.service';\nimport { RoomService } from '@/services/room.service';\nimport locales from '@/stores/locales.store';\nimport { Component, Host, Prop, State, Watch, h } from '@stencil/core';\nimport { BaseSalesRecord, CountrySalesFilter, MappedCountries, SalesRecord } from './types';\nimport moment from 'moment';\nimport { v4 } from 'uuid';\nimport { BookingService } from '@/services/booking.service';\nimport { ICountry } from '@/models/IBooking';\n\n@Component({\n  tag: 'ir-sales-by-country',\n  styleUrl: 'ir-sales-by-country.css',\n  scoped: true,\n})\nexport class IrSalesByCountry {\n  @Prop() language: string = '';\n  @Prop() ticket: string = '';\n  @Prop() propertyid: number;\n  @Prop() p: string;\n\n  @State() isLoading: 'filter' | 'export' | null = null;\n  @State() isPageLoading = true;\n  @State() property_id: number;\n  @State() salesData: SalesRecord[];\n  @State() salesFilters: CountrySalesFilter;\n  @State() countries: MappedCountries = new Map();\n\n  private token = new Token();\n  private roomService = new RoomService();\n  private propertyService = new PropertyService();\n  private bookingService = new BookingService();\n\n  private baseFilters = {\n    FROM_DATE: moment().add(-7, 'days').format('YYYY-MM-DD'),\n    TO_DATE: moment().format('YYYY-MM-DD'),\n    BOOK_CASE: '001',\n    WINDOW: 7,\n    include_previous_year: false,\n  };\n\n  componentWillLoad() {\n    this.salesFilters = this.baseFilters;\n    if (this.ticket) {\n      this.token.setToken(this.ticket);\n      this.initializeApp();\n    }\n  }\n  @Watch('ticket')\n  ticketChanged(newValue: string, oldValue: string) {\n    if (newValue === oldValue) {\n      return;\n    }\n    this.token.setToken(this.ticket);\n    this.initializeApp();\n  }\n  private async initializeApp() {\n    try {\n      let propertyId = this.propertyid;\n      if (!this.propertyid && !this.p) {\n        throw new Error('Property ID or username is required');\n      }\n      // let roomResp = null;\n      if (!propertyId) {\n        console.log(propertyId);\n        const propertyData = await this.roomService.getExposedProperty({\n          id: 0,\n          aname: this.p,\n          language: this.language,\n          is_backend: true,\n          include_units_hk_status: true,\n        });\n        // roomResp = propertyData;\n        propertyId = propertyData.My_Result.id;\n      }\n      this.property_id = propertyId;\n      const requests = [this.bookingService.getCountries(this.language), this.roomService.fetchLanguage(this.language), this.getCountrySales()];\n      if (this.propertyid) {\n        requests.push(\n          this.roomService.getExposedProperty({\n            id: this.propertyid,\n            language: this.language,\n            is_backend: true,\n            include_units_hk_status: true,\n          }),\n        );\n      }\n\n      const [countries] = await Promise.all(requests);\n      const mappedCountries = new Map();\n      (countries as ICountry[]).map(country => {\n        mappedCountries.set(country.id, {\n          flag: country.flag,\n          name: country.name,\n        });\n      });\n      this.countries = mappedCountries;\n    } catch (error) {\n      console.log(error);\n    } finally {\n      this.isPageLoading = false;\n    }\n  }\n\n  private async getCountrySales(isExportToExcel = false) {\n    const formatSalesData = (data): Omit<BaseSalesRecord, 'id'> => {\n      return {\n        country: data.COUNTRY,\n        country_id: data.COUNTRY_ID,\n        nights: data.NIGHTS,\n        percentage: data.PCT,\n        revenue: data.REVENUE,\n        number_of_guests: data.Total_Guests,\n      };\n    };\n    try {\n      const { include_previous_year, ...filterParams } = this.salesFilters;\n      this.isLoading = isExportToExcel ? 'export' : 'filter';\n\n      const currentSales = await this.propertyService.getCountrySales({\n        AC_ID: this.property_id,\n        is_export_to_excel: isExportToExcel,\n        ...filterParams,\n      });\n\n      const shouldFetchPreviousYear = !isExportToExcel && include_previous_year;\n\n      let enrichedSales: SalesRecord[] = [];\n\n      if (shouldFetchPreviousYear) {\n        const previousYearSales = await this.propertyService.getCountrySales({\n          AC_ID: this.property_id,\n          is_export_to_excel: false,\n          ...filterParams,\n          FROM_DATE: moment(filterParams.FROM_DATE).subtract(1, 'year').format('YYYY-MM-DD'),\n          TO_DATE: moment(filterParams.TO_DATE).subtract(1, 'year').format('YYYY-MM-DD'),\n        });\n\n        enrichedSales = currentSales.map(current => {\n          const previous = previousYearSales.find(prev => prev.COUNTRY.toLowerCase() === current.COUNTRY.toLowerCase());\n          return {\n            id: v4(),\n            ...formatSalesData(current),\n            last_year: previous ? formatSalesData(previous) : null,\n          };\n        });\n      } else {\n        enrichedSales = currentSales.map(record => ({\n          id: v4(),\n          ...formatSalesData(record),\n          last_year: null,\n        }));\n      }\n\n      // this.salesData = enrichedSales.sort((a, b) => {\n      //   if (a.country_id === 0) return -1;\n      //   if (b.country_id === 0) return 1;\n      //   return 0;\n      // });\n      this.salesData = [...enrichedSales];\n    } catch (error) {\n      console.error('Failed to fetch sales data:', error);\n    } finally {\n      this.isLoading = null;\n    }\n  }\n  render() {\n    if (this.isPageLoading) {\n      return <ir-loading-screen></ir-loading-screen>;\n    }\n    return (\n      <Host>\n        <ir-toast></ir-toast>\n        <ir-interceptor></ir-interceptor>\n        <section class=\"p-2 d-flex flex-column\" style={{ gap: '1rem' }}>\n          <div class=\"d-flex align-items-center justify-content-between\">\n            <h3 class=\"mb-1 mb-md-0\">Sales by Country</h3>\n            <ir-button\n              size=\"sm\"\n              btn_color=\"outline\"\n              isLoading={this.isLoading === 'export'}\n              text={locales.entries.Lcz_Export}\n              onClickHandler={async e => {\n                e.stopImmediatePropagation();\n                e.stopPropagation();\n                await this.getCountrySales(true);\n              }}\n              btnStyle={{ height: '100%' }}\n              iconPosition=\"right\"\n              icon_name=\"file\"\n              icon_style={{ '--icon-size': '14px' }}\n            ></ir-button>\n          </div>\n          <div class=\"d-flex flex-column flex-lg-row mt-1 \" style={{ gap: '1rem' }}>\n            <ir-sales-filters\n              isLoading={this.isLoading === 'filter'}\n              onApplyFilters={e => {\n                e.stopImmediatePropagation();\n                e.stopPropagation();\n                this.salesFilters = e.detail;\n                this.getCountrySales();\n              }}\n              class=\"filters-card\"\n              baseFilters={this.baseFilters}\n            ></ir-sales-filters>\n            <ir-sales-table mappedCountries={this.countries} class=\"card mb-0\" records={this.salesData}></ir-sales-table>\n          </div>\n        </section>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n  height: 100%;\n}\n","import Token from '@/models/Token';\nimport { User } from '@/models/Users';\nimport { BookingService } from '@/services/booking.service';\nimport { RoomService } from '@/services/room.service';\nimport { UserService } from '@/services/user.service';\nimport { Component, Host, Listen, Prop, State, Watch, h } from '@stencil/core';\nimport { AllowedUser } from './types';\nimport { bookingReasons } from '@/models/IBooking';\nimport { io, Socket } from 'socket.io-client';\nimport locales from '@/stores/locales.store';\n\n@Component({\n  tag: 'ir-user-management',\n  styleUrl: 'ir-user-management.css',\n  scoped: true,\n})\nexport class IrUserManagement {\n  @Prop() language: string = '';\n  @Prop() baseUrl: string;\n  @Prop() ticket: string;\n  @Prop() propertyid: number;\n  @Prop() p: string;\n  @Prop() isSuperAdmin: boolean = true;\n  @Prop() userTypeCode: string | number;\n  @Prop() baseUserTypeCode: string | number;\n  @Prop() userId: string | number;\n\n  @State() isLoading = true;\n  @State() users: User[] = [];\n  @State() property_id: number;\n  @State() allowedUsersTypes: AllowedUser[] = [];\n\n  private token = new Token();\n  private roomService = new RoomService();\n  private userService = new UserService();\n  private bookingService = new BookingService();\n\n  private userTypes: Map<number | string, string> = new Map();\n  private socket: Socket;\n\n  private superAdminId = '5';\n\n  componentWillLoad() {\n    if (this.baseUrl) {\n      this.token.setBaseUrl(this.baseUrl);\n    }\n    if (this.ticket) {\n      this.token.setToken(this.ticket);\n      this.initializeApp();\n    }\n  }\n\n  @Watch('ticket')\n  ticketChanged(newValue: string, oldValue: string) {\n    if (newValue === oldValue) {\n      return;\n    }\n    this.token.setToken(this.ticket);\n    this.initializeApp();\n  }\n\n  @Listen('resetData')\n  async handleResetData(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    await this.fetchUsers();\n  }\n\n  private async initializeApp() {\n    try {\n      if (this.baseUrl) {\n        this.token.setBaseUrl(this.baseUrl);\n      }\n      this.isLoading = true;\n      let propertyId = this.propertyid;\n      if (!this.propertyid && !this.p) {\n        throw new Error('Property ID or username is required');\n      }\n      // let roomResp = null;\n      if (!propertyId) {\n        console.log(propertyId);\n        const propertyData = await this.roomService.getExposedProperty({\n          id: 0,\n          aname: this.p,\n          language: this.language,\n          is_backend: true,\n          include_units_hk_status: true,\n        });\n        // roomResp = propertyData;\n        propertyId = propertyData.My_Result.id;\n      }\n      this.property_id = propertyId;\n      const requests = [this.fetchUserTypes(), this.fetchUsers(), this.roomService.fetchLanguage(this.language, ['_USER_MGT'])];\n      if (this.propertyid) {\n        requests.push(\n          this.roomService.getExposedProperty({\n            id: this.propertyid,\n            language: this.language,\n            is_backend: true,\n            include_units_hk_status: true,\n          }),\n        );\n      }\n\n      await Promise.all(requests);\n      this.socket = io('https://realtime.igloorooms.com/');\n      this.socket.on('MSG', async msg => {\n        await this.handleSocketMessage(msg);\n      });\n    } catch (error) {\n      console.log(error);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  private async handleSocketMessage(msg: string) {\n    const msgAsObject = JSON.parse(msg);\n    if (!msgAsObject) {\n      return;\n    }\n\n    const { REASON, KEY, PAYLOAD }: { REASON: bookingReasons; KEY: any; PAYLOAD: any } = msgAsObject;\n\n    if (KEY.toString() !== this.property_id.toString()) {\n      return;\n    }\n\n    let result = JSON.parse(PAYLOAD);\n    console.log(KEY, result);\n    // const reasonHandlers: Partial<Record<bookingReasons, Function>> = {\n    //   DORESERVATION: this.updateUserVerificationStatus,\n    // };\n    const reasonHandlers: Partial<Record<bookingReasons, Function>> = {\n      EMAIL_VERIFIED: this.updateUserVerificationStatus,\n    };\n    const handler = reasonHandlers[REASON];\n    if (handler) {\n      await handler.call(this, result);\n    } else {\n      console.warn(`Unhandled REASON: ${REASON}`);\n    }\n  }\n\n  public updateUserVerificationStatus(result: { id: string | number }) {\n    const users = [...this.users];\n    const idx = users.findIndex(u => u.id === result.id);\n    if (idx === -1) {\n      console.warn(`User ${result.id} not found`);\n      return;\n    }\n    users[idx] = {\n      ...users[idx],\n      is_email_verified: true,\n    };\n    this.users = users;\n  }\n\n  private async fetchUsers() {\n    const users = await this.userService.getExposedPropertyUsers({ property_id: this.propertyid });\n    this.users = [...users].sort((u1: User, u2: User) => {\n      const priority = (u: User) => {\n        const t = u.type.toString();\n        if (t === this.superAdminId) return 0;\n        if (t === '17') return 1;\n        return 2;\n      };\n      //sort by priority\n      const p1 = priority(u1),\n        p2 = priority(u2);\n      if (p1 !== p2) {\n        return p1 - p2;\n      }\n      // //sort by user id\n      // if (p1 === 1) {\n      //   const id1 = u1.id.toString(),\n      //     id2 = u2.id.toString(),\n      //     me = this.userId.toString();\n      //   if (id1 === me) return -1; // u1 is me  goes before u2\n      //   if (id2 === me) return 1; // u2 is me  u1 goes after\n      // }\n\n      // 3) sort by username\n      return u1.username.localeCompare(u2.username);\n    });\n  }\n  private async fetchUserTypes() {\n    const res = await Promise.all([this.bookingService.getSetupEntriesByTableName('_USER_TYPE'), this.bookingService.getLov()]);\n    const allowedUsers = res[1]?.My_Result?.allowed_user_types;\n    for (const e of res[0]) {\n      const value = e[`CODE_VALUE_${this.language?.toUpperCase() ?? 'EN'}`];\n      if (allowedUsers.find(f => f.code === e.CODE_NAME)) {\n        this.allowedUsersTypes.push({ code: e.CODE_NAME, value });\n      }\n      this.userTypes.set(e.CODE_NAME.toString(), value);\n    }\n  }\n  disconnectedCallback() {\n    this.socket.disconnect();\n  }\n  render() {\n    if (this.isLoading) {\n      return (\n        <Host>\n          <ir-toast></ir-toast>\n          <ir-interceptor></ir-interceptor>\n          <ir-loading-screen></ir-loading-screen>\n        </Host>\n      );\n    }\n    return (\n      <Host>\n        <ir-toast></ir-toast>\n        <ir-interceptor suppressToastEndpoints={['/Change_User_Pwd', '/Handle_Exposed_User']}></ir-interceptor>\n        <section class=\"p-2 d-flex flex-column\" style={{ gap: '1rem' }}>\n          <div class=\"d-flex  pb-2 align-items-center justify-content-between\">\n            <h3 class=\"mb-1 mb-md-0\">{locales.entries.Lcz_ExtranetUsers}</h3>\n          </div>\n\n          <div class=\"\" style={{ gap: '1rem' }}>\n            <ir-user-management-table\n              property_id={this.property_id}\n              baseUserTypeCode={this.baseUserTypeCode}\n              allowedUsersTypes={this.allowedUsersTypes}\n              userTypeCode={this.userTypeCode}\n              haveAdminPrivileges={[this.superAdminId, '17'].includes(this.userTypeCode?.toString())}\n              userTypes={this.userTypes}\n              class=\"card\"\n              isSuperAdmin={this.userTypeCode?.toString() === this.superAdminId}\n              users={this.users}\n            ></ir-user-management-table>\n          </div>\n        </section>\n      </Host>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}