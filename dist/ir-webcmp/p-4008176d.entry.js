import{r as t,c as e,h as i,g as n}from"./p-b4b99085.js";import{c as r,g as s}from"./p-0462f723.js";var l=typeof global=="object"&&global&&global.Object===Object&&global;const o=l;var a=typeof self=="object"&&self&&self.Object===Object&&self;var c=o||a||Function("return this")();const u=c;var h=u.Symbol;const f=h;var d=Object.prototype;var p=d.hasOwnProperty;var q=d.toString;var b=f?f.toStringTag:undefined;function v(t){var e=p.call(t,b),i=t[b];try{t[b]=undefined;var n=true}catch(t){}var r=q.call(t);if(n){if(e){t[b]=i}else{delete t[b]}}return r}var w=Object.prototype;var m=w.toString;function g(t){return m.call(t)}var y="[object Null]",k="[object Undefined]";var x=f?f.toStringTag:undefined;function j(t){if(t==null){return t===undefined?k:y}return x&&x in Object(t)?v(t):g(t)}function A(t){return t!=null&&typeof t=="object"}var O=Array.isArray;const M=O;function E(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function N(t){return t}var T="[object AsyncFunction]",L="[object Function]",$="[object GeneratorFunction]",C="[object Proxy]";function _(t){if(!E(t)){return false}var e=j(t);return e==L||e==$||e==T||e==C}var S=u["__core-js_shared__"];const z=S;var B=function(){var t=/[^.]+$/.exec(z&&z.keys&&z.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function I(t){return!!B&&B in t}var R=Function.prototype;var D=R.toString;function H(t){if(t!=null){try{return D.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var V=/[\\^$.*+?()[\]{}|]/g;var F=/^\[object .+?Constructor\]$/;var U=Function.prototype,P=Object.prototype;var Z=U.toString;var K=P.hasOwnProperty;var W=RegExp("^"+Z.call(K).replace(V,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function G(t){if(!E(t)||I(t)){return false}var e=_(t)?W:F;return e.test(H(t))}function Q(t,e){return t==null?undefined:t[e]}function Y(t,e){var i=Q(t,e);return G(i)?i:undefined}var J=Y(u,"WeakMap");const X=J;var tt=Object.create;var et=function(){function t(){}return function(e){if(!E(e)){return{}}if(tt){return tt(e)}t.prototype=e;var i=new t;t.prototype=undefined;return i}}();const it=et;function nt(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function rt(t,e){var i=-1,n=t.length;e||(e=Array(n));while(++i<n){e[i]=t[i]}return e}var st=800,lt=16;var ot=Date.now;function at(t){var e=0,i=0;return function(){var n=ot(),r=lt-(n-i);i=n;if(r>0){if(++e>=st){return arguments[0]}}else{e=0}return t.apply(undefined,arguments)}}function ct(t){return function(){return t}}var ut=function(){try{var t=Y(Object,"defineProperty");t({},"",{});return t}catch(t){}}();const ht=ut;var ft=!ht?N:function(t,e){return ht(t,"toString",{configurable:true,enumerable:false,value:ct(e),writable:true})};const dt=ft;var pt=at(dt);const qt=pt;function bt(t,e){var i=-1,n=t==null?0:t.length;while(++i<n){if(e(t[i],i,t)===false){break}}return t}var vt=9007199254740991;var wt=/^(?:0|[1-9]\d*)$/;function mt(t,e){var i=typeof t;e=e==null?vt:e;return!!e&&(i=="number"||i!="symbol"&&wt.test(t))&&(t>-1&&t%1==0&&t<e)}function gt(t,e,i){if(e=="__proto__"&&ht){ht(t,e,{configurable:true,enumerable:true,value:i,writable:true})}else{t[e]=i}}function yt(t,e){return t===e||t!==t&&e!==e}var kt=Object.prototype;var xt=kt.hasOwnProperty;function jt(t,e,i){var n=t[e];if(!(xt.call(t,e)&&yt(n,i))||i===undefined&&!(e in t)){gt(t,e,i)}}function At(t,e,i,n){var r=!i;i||(i={});var s=-1,l=e.length;while(++s<l){var o=e[s];var a=n?n(i[o],t[o],o,i,t):undefined;if(a===undefined){a=t[o]}if(r){gt(i,o,a)}else{jt(i,o,a)}}return i}var Ot=Math.max;function Mt(t,e,i){e=Ot(e===undefined?t.length-1:e,0);return function(){var n=arguments,r=-1,s=Ot(n.length-e,0),l=Array(s);while(++r<s){l[r]=n[e+r]}r=-1;var o=Array(e+1);while(++r<e){o[r]=n[r]}o[e]=i(l);return nt(t,this,o)}}function Et(t,e){return qt(Mt(t,e,N),t+"")}var Nt=9007199254740991;function Tt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Nt}function Lt(t){return t!=null&&Tt(t.length)&&!_(t)}function $t(t,e,i){if(!E(i)){return false}var n=typeof e;if(n=="number"?Lt(i)&&mt(e,i.length):n=="string"&&e in i){return yt(i[e],t)}return false}function Ct(t){return Et((function(e,i){var n=-1,r=i.length,s=r>1?i[r-1]:undefined,l=r>2?i[2]:undefined;s=t.length>3&&typeof s=="function"?(r--,s):undefined;if(l&&$t(i[0],i[1],l)){s=r<3?undefined:s;r=1}e=Object(e);while(++n<r){var o=i[n];if(o){t(e,o,n,s)}}return e}))}var _t=Object.prototype;function St(t){var e=t&&t.constructor,i=typeof e=="function"&&e.prototype||_t;return t===i}function zt(t,e){var i=-1,n=Array(t);while(++i<t){n[i]=e(i)}return n}var Bt="[object Arguments]";function It(t){return A(t)&&j(t)==Bt}var Rt=Object.prototype;var Dt=Rt.hasOwnProperty;var Ht=Rt.propertyIsEnumerable;var Vt=It(function(){return arguments}())?It:function(t){return A(t)&&Dt.call(t,"callee")&&!Ht.call(t,"callee")};const Ft=Vt;function Ut(){return false}var Pt=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var Zt=Pt&&typeof module=="object"&&module&&!module.nodeType&&module;var Kt=Zt&&Zt.exports===Pt;var Wt=Kt?u.Buffer:undefined;var Gt=Wt?Wt.isBuffer:undefined;var Qt=Gt||Ut;const Yt=Qt;var Jt="[object Arguments]",Xt="[object Array]",te="[object Boolean]",ee="[object Date]",ie="[object Error]",ne="[object Function]",re="[object Map]",se="[object Number]",le="[object Object]",oe="[object RegExp]",ae="[object Set]",ce="[object String]",ue="[object WeakMap]";var he="[object ArrayBuffer]",fe="[object DataView]",de="[object Float32Array]",pe="[object Float64Array]",qe="[object Int8Array]",be="[object Int16Array]",ve="[object Int32Array]",we="[object Uint8Array]",me="[object Uint8ClampedArray]",ge="[object Uint16Array]",ye="[object Uint32Array]";var ke={};ke[de]=ke[pe]=ke[qe]=ke[be]=ke[ve]=ke[we]=ke[me]=ke[ge]=ke[ye]=true;ke[Jt]=ke[Xt]=ke[he]=ke[te]=ke[fe]=ke[ee]=ke[ie]=ke[ne]=ke[re]=ke[se]=ke[le]=ke[oe]=ke[ae]=ke[ce]=ke[ue]=false;function xe(t){return A(t)&&Tt(t.length)&&!!ke[j(t)]}function je(t){return function(e){return t(e)}}var Ae=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var Oe=Ae&&typeof module=="object"&&module&&!module.nodeType&&module;var Me=Oe&&Oe.exports===Ae;var Ee=Me&&o.process;var Ne=function(){try{var t=Oe&&Oe.require&&Oe.require("util").types;if(t){return t}return Ee&&Ee.binding&&Ee.binding("util")}catch(t){}}();const Te=Ne;var Le=Te&&Te.isTypedArray;var $e=Le?je(Le):xe;const Ce=$e;var _e=Object.prototype;var Se=_e.hasOwnProperty;function ze(t,e){var i=M(t),n=!i&&Ft(t),r=!i&&!n&&Yt(t),s=!i&&!n&&!r&&Ce(t),l=i||n||r||s,o=l?zt(t.length,String):[],a=o.length;for(var c in t){if((e||Se.call(t,c))&&!(l&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||mt(c,a)))){o.push(c)}}return o}function Be(t,e){return function(i){return t(e(i))}}var Ie=Be(Object.keys,Object);const Re=Ie;var De=Object.prototype;var He=De.hasOwnProperty;function Ve(t){if(!St(t)){return Re(t)}var e=[];for(var i in Object(t)){if(He.call(t,i)&&i!="constructor"){e.push(i)}}return e}function Fe(t){return Lt(t)?ze(t):Ve(t)}function Ue(t){var e=[];if(t!=null){for(var i in Object(t)){e.push(i)}}return e}var Pe=Object.prototype;var Ze=Pe.hasOwnProperty;function Ke(t){if(!E(t)){return Ue(t)}var e=St(t),i=[];for(var n in t){if(!(n=="constructor"&&(e||!Ze.call(t,n)))){i.push(n)}}return i}function We(t){return Lt(t)?ze(t,true):Ke(t)}var Ge=Y(Object,"create");const Qe=Ge;function Ye(){this.__data__=Qe?Qe(null):{};this.size=0}function Je(t){var e=this.has(t)&&delete this.__data__[t];this.size-=e?1:0;return e}var Xe="__lodash_hash_undefined__";var ti=Object.prototype;var ei=ti.hasOwnProperty;function ii(t){var e=this.__data__;if(Qe){var i=e[t];return i===Xe?undefined:i}return ei.call(e,t)?e[t]:undefined}var ni=Object.prototype;var ri=ni.hasOwnProperty;function si(t){var e=this.__data__;return Qe?e[t]!==undefined:ri.call(e,t)}var li="__lodash_hash_undefined__";function oi(t,e){var i=this.__data__;this.size+=this.has(t)?0:1;i[t]=Qe&&e===undefined?li:e;return this}function ai(t){var e=-1,i=t==null?0:t.length;this.clear();while(++e<i){var n=t[e];this.set(n[0],n[1])}}ai.prototype.clear=Ye;ai.prototype["delete"]=Je;ai.prototype.get=ii;ai.prototype.has=si;ai.prototype.set=oi;function ci(){this.__data__=[];this.size=0}function ui(t,e){var i=t.length;while(i--){if(yt(t[i][0],e)){return i}}return-1}var hi=Array.prototype;var fi=hi.splice;function di(t){var e=this.__data__,i=ui(e,t);if(i<0){return false}var n=e.length-1;if(i==n){e.pop()}else{fi.call(e,i,1)}--this.size;return true}function pi(t){var e=this.__data__,i=ui(e,t);return i<0?undefined:e[i][1]}function qi(t){return ui(this.__data__,t)>-1}function bi(t,e){var i=this.__data__,n=ui(i,t);if(n<0){++this.size;i.push([t,e])}else{i[n][1]=e}return this}function vi(t){var e=-1,i=t==null?0:t.length;this.clear();while(++e<i){var n=t[e];this.set(n[0],n[1])}}vi.prototype.clear=ci;vi.prototype["delete"]=di;vi.prototype.get=pi;vi.prototype.has=qi;vi.prototype.set=bi;var wi=Y(u,"Map");const mi=wi;function gi(){this.size=0;this.__data__={hash:new ai,map:new(mi||vi),string:new ai}}function yi(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function ki(t,e){var i=t.__data__;return yi(e)?i[typeof e=="string"?"string":"hash"]:i.map}function xi(t){var e=ki(this,t)["delete"](t);this.size-=e?1:0;return e}function ji(t){return ki(this,t).get(t)}function Ai(t){return ki(this,t).has(t)}function Oi(t,e){var i=ki(this,t),n=i.size;i.set(t,e);this.size+=i.size==n?0:1;return this}function Mi(t){var e=-1,i=t==null?0:t.length;this.clear();while(++e<i){var n=t[e];this.set(n[0],n[1])}}Mi.prototype.clear=gi;Mi.prototype["delete"]=xi;Mi.prototype.get=ji;Mi.prototype.has=Ai;Mi.prototype.set=Oi;function Ei(t,e){var i=-1,n=e.length,r=t.length;while(++i<n){t[r+i]=e[i]}return t}var Ni=Be(Object.getPrototypeOf,Object);const Ti=Ni;var Li="[object Object]";var $i=Function.prototype,Ci=Object.prototype;var _i=$i.toString;var Si=Ci.hasOwnProperty;var zi=_i.call(Object);function Bi(t){if(!A(t)||j(t)!=Li){return false}var e=Ti(t);if(e===null){return true}var i=Si.call(e,"constructor")&&e.constructor;return typeof i=="function"&&i instanceof i&&_i.call(i)==zi}function Ii(){this.__data__=new vi;this.size=0}function Ri(t){var e=this.__data__,i=e["delete"](t);this.size=e.size;return i}function Di(t){return this.__data__.get(t)}function Hi(t){return this.__data__.has(t)}var Vi=200;function Fi(t,e){var i=this.__data__;if(i instanceof vi){var n=i.__data__;if(!mi||n.length<Vi-1){n.push([t,e]);this.size=++i.size;return this}i=this.__data__=new Mi(n)}i.set(t,e);this.size=i.size;return this}function Ui(t){var e=this.__data__=new vi(t);this.size=e.size}Ui.prototype.clear=Ii;Ui.prototype["delete"]=Ri;Ui.prototype.get=Di;Ui.prototype.has=Hi;Ui.prototype.set=Fi;function Pi(t,e){return t&&At(e,Fe(e),t)}function Zi(t,e){return t&&At(e,We(e),t)}var Ki=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var Wi=Ki&&typeof module=="object"&&module&&!module.nodeType&&module;var Gi=Wi&&Wi.exports===Ki;var Qi=Gi?u.Buffer:undefined,Yi=Qi?Qi.allocUnsafe:undefined;function Ji(t,e){if(e){return t.slice()}var i=t.length,n=Yi?Yi(i):new t.constructor(i);t.copy(n);return n}function Xi(t,e){var i=-1,n=t==null?0:t.length,r=0,s=[];while(++i<n){var l=t[i];if(e(l,i,t)){s[r++]=l}}return s}function tn(){return[]}var en=Object.prototype;var nn=en.propertyIsEnumerable;var rn=Object.getOwnPropertySymbols;var sn=!rn?tn:function(t){if(t==null){return[]}t=Object(t);return Xi(rn(t),(function(e){return nn.call(t,e)}))};const ln=sn;function on(t,e){return At(t,ln(t),e)}var an=Object.getOwnPropertySymbols;var cn=!an?tn:function(t){var e=[];while(t){Ei(e,ln(t));t=Ti(t)}return e};const un=cn;function hn(t,e){return At(t,un(t),e)}function fn(t,e,i){var n=e(t);return M(t)?n:Ei(n,i(t))}function dn(t){return fn(t,Fe,ln)}function pn(t){return fn(t,We,un)}var qn=Y(u,"DataView");const bn=qn;var vn=Y(u,"Promise");const wn=vn;var mn=Y(u,"Set");const gn=mn;var yn="[object Map]",kn="[object Object]",xn="[object Promise]",jn="[object Set]",An="[object WeakMap]";var On="[object DataView]";var Mn=H(bn),En=H(mi),Nn=H(wn),Tn=H(gn),Ln=H(X);var $n=j;if(bn&&$n(new bn(new ArrayBuffer(1)))!=On||mi&&$n(new mi)!=yn||wn&&$n(wn.resolve())!=xn||gn&&$n(new gn)!=jn||X&&$n(new X)!=An){$n=function(t){var e=j(t),i=e==kn?t.constructor:undefined,n=i?H(i):"";if(n){switch(n){case Mn:return On;case En:return yn;case Nn:return xn;case Tn:return jn;case Ln:return An}}return e}}const Cn=$n;var _n=Object.prototype;var Sn=_n.hasOwnProperty;function zn(t){var e=t.length,i=new t.constructor(e);if(e&&typeof t[0]=="string"&&Sn.call(t,"index")){i.index=t.index;i.input=t.input}return i}var Bn=u.Uint8Array;const In=Bn;function Rn(t){var e=new t.constructor(t.byteLength);new In(e).set(new In(t));return e}function Dn(t,e){var i=e?Rn(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}var Hn=/\w*$/;function Vn(t){var e=new t.constructor(t.source,Hn.exec(t));e.lastIndex=t.lastIndex;return e}var Fn=f?f.prototype:undefined,Un=Fn?Fn.valueOf:undefined;function Pn(t){return Un?Object(Un.call(t)):{}}function Zn(t,e){var i=e?Rn(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}var Kn="[object Boolean]",Wn="[object Date]",Gn="[object Map]",Qn="[object Number]",Yn="[object RegExp]",Jn="[object Set]",Xn="[object String]",tr="[object Symbol]";var er="[object ArrayBuffer]",ir="[object DataView]",nr="[object Float32Array]",rr="[object Float64Array]",sr="[object Int8Array]",lr="[object Int16Array]",or="[object Int32Array]",ar="[object Uint8Array]",cr="[object Uint8ClampedArray]",ur="[object Uint16Array]",hr="[object Uint32Array]";function fr(t,e,i){var n=t.constructor;switch(e){case er:return Rn(t);case Kn:case Wn:return new n(+t);case ir:return Dn(t,i);case nr:case rr:case sr:case lr:case or:case ar:case cr:case ur:case hr:return Zn(t,i);case Gn:return new n;case Qn:case Xn:return new n(t);case Yn:return Vn(t);case Jn:return new n;case tr:return Pn(t)}}function dr(t){return typeof t.constructor=="function"&&!St(t)?it(Ti(t)):{}}var pr="[object Map]";function qr(t){return A(t)&&Cn(t)==pr}var br=Te&&Te.isMap;var vr=br?je(br):qr;const wr=vr;var mr="[object Set]";function gr(t){return A(t)&&Cn(t)==mr}var yr=Te&&Te.isSet;var kr=yr?je(yr):gr;const xr=kr;var jr=1,Ar=2,Or=4;var Mr="[object Arguments]",Er="[object Array]",Nr="[object Boolean]",Tr="[object Date]",Lr="[object Error]",$r="[object Function]",Cr="[object GeneratorFunction]",_r="[object Map]",Sr="[object Number]",zr="[object Object]",Br="[object RegExp]",Ir="[object Set]",Rr="[object String]",Dr="[object Symbol]",Hr="[object WeakMap]";var Vr="[object ArrayBuffer]",Fr="[object DataView]",Ur="[object Float32Array]",Pr="[object Float64Array]",Zr="[object Int8Array]",Kr="[object Int16Array]",Wr="[object Int32Array]",Gr="[object Uint8Array]",Qr="[object Uint8ClampedArray]",Yr="[object Uint16Array]",Jr="[object Uint32Array]";var Xr={};Xr[Mr]=Xr[Er]=Xr[Vr]=Xr[Fr]=Xr[Nr]=Xr[Tr]=Xr[Ur]=Xr[Pr]=Xr[Zr]=Xr[Kr]=Xr[Wr]=Xr[_r]=Xr[Sr]=Xr[zr]=Xr[Br]=Xr[Ir]=Xr[Rr]=Xr[Dr]=Xr[Gr]=Xr[Qr]=Xr[Yr]=Xr[Jr]=true;Xr[Lr]=Xr[$r]=Xr[Hr]=false;function ts(t,e,i,n,r,s){var l,o=e&jr,a=e&Ar,c=e&Or;if(i){l=r?i(t,n,r,s):i(t)}if(l!==undefined){return l}if(!E(t)){return t}var u=M(t);if(u){l=zn(t);if(!o){return rt(t,l)}}else{var h=Cn(t),f=h==$r||h==Cr;if(Yt(t)){return Ji(t,o)}if(h==zr||h==Mr||f&&!r){l=a||f?{}:dr(t);if(!o){return a?hn(t,Zi(l,t)):on(t,Pi(l,t))}}else{if(!Xr[h]){return r?t:{}}l=fr(t,h,o)}}s||(s=new Ui);var d=s.get(t);if(d){return d}s.set(t,l);if(xr(t)){t.forEach((function(n){l.add(ts(n,e,i,n,t,s))}))}else if(wr(t)){t.forEach((function(n,r){l.set(r,ts(n,e,i,r,t,s))}))}var p=c?a?pn:dn:a?We:Fe;var q=u?undefined:p(t);bt(q||t,(function(n,r){if(q){r=n;n=t[r]}jt(l,r,ts(n,e,i,r,t,s))}));return l}var es=1,is=4;function ns(t){return ts(t,es|is)}var rs="__lodash_hash_undefined__";function ss(t){this.__data__.set(t,rs);return this}function ls(t){return this.__data__.has(t)}function os(t){var e=-1,i=t==null?0:t.length;this.__data__=new Mi;while(++e<i){this.add(t[e])}}os.prototype.add=os.prototype.push=ss;os.prototype.has=ls;function as(t,e){var i=-1,n=t==null?0:t.length;while(++i<n){if(e(t[i],i,t)){return true}}return false}function cs(t,e){return t.has(e)}var us=1,hs=2;function fs(t,e,i,n,r,s){var l=i&us,o=t.length,a=e.length;if(o!=a&&!(l&&a>o)){return false}var c=s.get(t);var u=s.get(e);if(c&&u){return c==e&&u==t}var h=-1,f=true,d=i&hs?new os:undefined;s.set(t,e);s.set(e,t);while(++h<o){var p=t[h],q=e[h];if(n){var b=l?n(q,p,h,e,t,s):n(p,q,h,t,e,s)}if(b!==undefined){if(b){continue}f=false;break}if(d){if(!as(e,(function(t,e){if(!cs(d,e)&&(p===t||r(p,t,i,n,s))){return d.push(e)}}))){f=false;break}}else if(!(p===q||r(p,q,i,n,s))){f=false;break}}s["delete"](t);s["delete"](e);return f}function ds(t){var e=-1,i=Array(t.size);t.forEach((function(t,n){i[++e]=[n,t]}));return i}function ps(t){var e=-1,i=Array(t.size);t.forEach((function(t){i[++e]=t}));return i}var qs=1,bs=2;var vs="[object Boolean]",ws="[object Date]",ms="[object Error]",gs="[object Map]",ys="[object Number]",ks="[object RegExp]",xs="[object Set]",js="[object String]",As="[object Symbol]";var Os="[object ArrayBuffer]",Ms="[object DataView]";var Es=f?f.prototype:undefined,Ns=Es?Es.valueOf:undefined;function Ts(t,e,i,n,r,s,l){switch(i){case Ms:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset){return false}t=t.buffer;e=e.buffer;case Os:if(t.byteLength!=e.byteLength||!s(new In(t),new In(e))){return false}return true;case vs:case ws:case ys:return yt(+t,+e);case ms:return t.name==e.name&&t.message==e.message;case ks:case js:return t==e+"";case gs:var o=ds;case xs:var a=n&qs;o||(o=ps);if(t.size!=e.size&&!a){return false}var c=l.get(t);if(c){return c==e}n|=bs;l.set(t,e);var u=fs(o(t),o(e),n,r,s,l);l["delete"](t);return u;case As:if(Ns){return Ns.call(t)==Ns.call(e)}}return false}var Ls=1;var $s=Object.prototype;var Cs=$s.hasOwnProperty;function _s(t,e,i,n,r,s){var l=i&Ls,o=dn(t),a=o.length,c=dn(e),u=c.length;if(a!=u&&!l){return false}var h=a;while(h--){var f=o[h];if(!(l?f in e:Cs.call(e,f))){return false}}var d=s.get(t);var p=s.get(e);if(d&&p){return d==e&&p==t}var q=true;s.set(t,e);s.set(e,t);var b=l;while(++h<a){f=o[h];var v=t[f],w=e[f];if(n){var m=l?n(w,v,f,e,t,s):n(v,w,f,t,e,s)}if(!(m===undefined?v===w||r(v,w,i,n,s):m)){q=false;break}b||(b=f=="constructor")}if(q&&!b){var g=t.constructor,y=e.constructor;if(g!=y&&("constructor"in t&&"constructor"in e)&&!(typeof g=="function"&&g instanceof g&&typeof y=="function"&&y instanceof y)){q=false}}s["delete"](t);s["delete"](e);return q}var Ss=1;var zs="[object Arguments]",Bs="[object Array]",Is="[object Object]";var Rs=Object.prototype;var Ds=Rs.hasOwnProperty;function Hs(t,e,i,n,r,s){var l=M(t),o=M(e),a=l?Bs:Cn(t),c=o?Bs:Cn(e);a=a==zs?Is:a;c=c==zs?Is:c;var u=a==Is,h=c==Is,f=a==c;if(f&&Yt(t)){if(!Yt(e)){return false}l=true;u=false}if(f&&!u){s||(s=new Ui);return l||Ce(t)?fs(t,e,i,n,r,s):Ts(t,e,a,i,n,r,s)}if(!(i&Ss)){var d=u&&Ds.call(t,"__wrapped__"),p=h&&Ds.call(e,"__wrapped__");if(d||p){var q=d?t.value():t,b=p?e.value():e;s||(s=new Ui);return r(q,b,i,n,s)}}if(!f){return false}s||(s=new Ui);return _s(t,e,i,n,r,s)}function Vs(t,e,i,n,r){if(t===e){return true}if(t==null||e==null||!A(t)&&!A(e)){return t!==t&&e!==e}return Hs(t,e,i,n,Vs,r)}function Fs(t){return function(e,i,n){var r=-1,s=Object(e),l=n(e),o=l.length;while(o--){var a=l[t?o:++r];if(i(s[a],a,s)===false){break}}return e}}var Us=Fs();const Ps=Us;function Zs(t,e,i){if(i!==undefined&&!yt(t[e],i)||i===undefined&&!(e in t)){gt(t,e,i)}}function Ks(t){return A(t)&&Lt(t)}function Ws(t,e){if(e==="constructor"&&typeof t[e]==="function"){return}if(e=="__proto__"){return}return t[e]}function Gs(t){return At(t,We(t))}function Qs(t,e,i,n,r,s,l){var o=Ws(t,i),a=Ws(e,i),c=l.get(a);if(c){Zs(t,i,c);return}var u=s?s(o,a,i+"",t,e,l):undefined;var h=u===undefined;if(h){var f=M(a),d=!f&&Yt(a),p=!f&&!d&&Ce(a);u=a;if(f||d||p){if(M(o)){u=o}else if(Ks(o)){u=rt(o)}else if(d){h=false;u=Ji(a,true)}else if(p){h=false;u=Zn(a,true)}else{u=[]}}else if(Bi(a)||Ft(a)){u=o;if(Ft(o)){u=Gs(o)}else if(!E(o)||_(o)){u=dr(a)}}else{h=false}}if(h){l.set(a,u);r(u,a,n,s,l);l["delete"](a)}Zs(t,i,u)}function Ys(t,e,i,n,r){if(t===e){return}Ps(e,(function(s,l){r||(r=new Ui);if(E(s)){Qs(t,e,l,i,Ys,n,r)}else{var o=n?n(Ws(t,l),s,l+"",t,e,r):undefined;if(o===undefined){o=s}Zs(t,l,o)}}),We)}function Js(t,e){return Vs(t,e)}var Xs=Ct((function(t,e,i){Ys(t,e,i)}));const tl=Xs;var el=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(el||{});class il{constructor(t,e,i={}){this.attrName=t,this.keyName=e;const n=el.TYPE&el.ATTRIBUTE;this.scope=i.scope!=null?i.scope&el.LEVEL|n:el.ATTRIBUTE,i.whitelist!=null&&(this.whitelist=i.whitelist)}static keys(t){return Array.from(t.attributes).map((t=>t.name))}add(t,e){return this.canAdd(t,e)?(t.setAttribute(this.keyName,e),!0):!1}canAdd(t,e){return this.whitelist==null?!0:typeof e=="string"?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1}remove(t){t.removeAttribute(this.keyName)}value(t){const e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""}}class nl extends Error{constructor(t){t="[Parchment] "+t,super(t),this.message=t,this.name=this.constructor.name}}const rl=class t{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,e=!1){if(t==null)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(e){let i=null;try{i=t.parentNode}catch{return null}return this.find(i,e)}return null}create(e,i,n){const r=this.query(i);if(r==null)throw new nl(`Unable to create ${i} blot`);const s=r,l=i instanceof Node||i.nodeType===Node.TEXT_NODE?i:s.create(n),o=new s(e,l,n);return t.blots.set(o.domNode,o),o}find(e,i=!1){return t.find(e,i)}query(t,e=el.ANY){let i;return typeof t=="string"?i=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?i=this.types.text:typeof t=="number"?t&el.LEVEL&el.BLOCK?i=this.types.block:t&el.LEVEL&el.INLINE&&(i=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some((t=>(i=this.classes[t],!!i))),i=i||this.tags[t.tagName]),i==null?null:"scope"in i&&e&el.LEVEL&i.scope&&e&el.TYPE&i.scope?i:null}register(...t){return t.map((t=>{const e="blotName"in t,i="attrName"in t;if(!e&&!i)throw new nl("Invalid definition");if(e&&t.blotName==="abstract")throw new nl("Cannot register abstract class");const n=e?t.blotName:i?t.attrName:void 0;return this.types[n]=t,i?typeof t.keyName=="string"&&(this.attributes[t.keyName]=t):e&&(t.className&&(this.classes[t.className]=t),t.tagName&&(Array.isArray(t.tagName)?t.tagName=t.tagName.map((t=>t.toUpperCase())):t.tagName=t.tagName.toUpperCase(),(Array.isArray(t.tagName)?t.tagName:[t.tagName]).forEach((e=>{(this.tags[e]==null||t.className==null)&&(this.tags[e]=t)})))),t}))}};rl.blots=new WeakMap;let sl=rl;function ll(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter((t=>t.indexOf(`${e}-`)===0))}class ol extends il{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map((t=>t.split("-").slice(0,-1).join("-")))}add(t,e){return this.canAdd(t,e)?(this.remove(t),t.classList.add(`${this.keyName}-${e}`),!0):!1}remove(t){ll(t,this.keyName).forEach((e=>{t.classList.remove(e)})),t.classList.length===0&&t.removeAttribute("class")}value(t){const e=(ll(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""}}const al=ol;function cl(t){const e=t.split("-"),i=e.slice(1).map((t=>t[0].toUpperCase()+t.slice(1))).join("");return e[0]+i}class ul extends il{static keys(t){return(t.getAttribute("style")||"").split(";").map((t=>t.split(":")[0].trim()))}add(t,e){return this.canAdd(t,e)?(t.style[cl(this.keyName)]=e,!0):!1}remove(t){t.style[cl(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const e=t.style[cl(this.keyName)];return this.canAdd(t,e)?e:""}}const hl=ul;class fl{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,e){e?t.add(this.domNode,e)&&(t.value(this.domNode)!=null?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=sl.find(this.domNode);if(t==null)return;const e=il.keys(this.domNode),i=al.keys(this.domNode),n=hl.keys(this.domNode);e.concat(i).concat(n).forEach((e=>{const i=t.scroll.query(e,el.ATTRIBUTE);i instanceof il&&(this.attributes[i.attrName]=i)}))}copy(t){Object.keys(this.attributes).forEach((e=>{const i=this.attributes[e].value(this.domNode);t.format(e,i)}))}move(t){this.copy(t),Object.keys(this.attributes).forEach((t=>{this.attributes[t].remove(this.domNode)})),this.attributes={}}values(){return Object.keys(this.attributes).reduce(((t,e)=>(t[e]=this.attributes[e].value(this.domNode),t)),{})}}const dl=fl,pl=class t{constructor(t,e){this.scroll=t,this.domNode=e,sl.blots.set(e,this),this.prev=null,this.next=null}static create(t){if(this.tagName==null)throw new nl("Blot definition missing tagName");let e,i;return Array.isArray(this.tagName)?(typeof t=="string"?(i=t.toUpperCase(),parseInt(i,10).toString()===i&&(i=parseInt(i,10))):typeof t=="number"&&(i=t),typeof i=="number"?e=document.createElement(this.tagName[i-1]):i&&this.tagName.indexOf(i)>-1?e=document.createElement(i):e=document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){const t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){this.parent!=null&&this.parent.removeChild(this),sl.blots.delete(this.domNode)}deleteAt(t,e){this.isolate(t,e).remove()}formatAt(t,e,i,n){const r=this.isolate(t,e);if(this.scroll.query(i,el.BLOT)!=null&&n)r.wrap(i,n);else if(this.scroll.query(i,el.ATTRIBUTE)!=null){const t=this.scroll.create(this.statics.scope);r.wrap(t),t.format(i,n)}}insertAt(t,e,i){const n=i==null?this.scroll.create("text",e):this.scroll.create(e,i),r=this.split(t);this.parent.insertBefore(n,r||void 0)}isolate(t,e){const i=this.split(t);if(i==null)throw new Error("Attempt to isolate at end");return i.split(e),i}length(){return 1}offset(t=this.parent){return this.parent==null||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,e){const i=typeof t=="string"?this.scroll.create(t,e):t;return this.parent!=null&&(this.parent.insertBefore(i,this.next||void 0),this.remove()),i}split(t,e){return t===0?this:this.next}update(t,e){}wrap(t,e){const i=typeof t=="string"?this.scroll.create(t,e):t;if(this.parent!=null&&this.parent.insertBefore(i,this.next||void 0),typeof i.appendChild!="function")throw new nl(`Cannot wrap ${t}`);return i.appendChild(this),i}};pl.blotName="abstract";let ql=pl;const bl=class t extends ql{static value(t){return!0}index(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(t,e){let i=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(i+=1),[this.parent.domNode,i]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};bl.scope=el.INLINE_BLOT;let vl=bl;const wl=vl;class ml{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const e=t.slice(1);this.append(...e)}}at(t){const e=this.iterator();let i=e();for(;i&&t>0;)t-=1,i=e();return i}contains(t){const e=this.iterator();let i=e();for(;i;){if(i===t)return!0;i=e()}return!1}indexOf(t){const e=this.iterator();let i=e(),n=0;for(;i;){if(i===t)return n;n+=1,i=e()}return-1}insertBefore(t,e){t!=null&&(this.remove(t),t.next=e,e!=null?(t.prev=e.prev,e.prev!=null&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):this.tail!=null?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let e=0,i=this.head;for(;i!=null;){if(i===t)return e;e+=i.length(),i=i.next}return-1}remove(t){this.contains(t)&&(t.prev!=null&&(t.prev.next=t.next),t.next!=null&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const e=t;return t!=null&&(t=t.next),e}}find(t,e=!1){const i=this.iterator();let n=i();for(;n;){const r=n.length();if(t<r||e&&t===r&&(n.next==null||n.next.length()!==0))return[n,t];t-=r,n=i()}return[null,0]}forEach(t){const e=this.iterator();let i=e();for(;i;)t(i),i=e()}forEachAt(t,e,i){if(e<=0)return;const[n,r]=this.find(t);let s=t-r;const l=this.iterator(n);let o=l();for(;o&&s<t+e;){const n=o.length();t>s?i(o,t-s,Math.min(e,s+n-t)):i(o,0,Math.min(n,t+e-s)),s+=n,o=l()}}map(t){return this.reduce(((e,i)=>(e.push(t(i)),e)),[])}reduce(t,e){const i=this.iterator();let n=i();for(;n;)e=t(e,n),n=i();return e}}function gl(t,e){const i=e.find(t);if(i)return i;try{return e.create(t)}catch{const i=e.create(el.INLINE);return Array.from(t.childNodes).forEach((t=>{i.domNode.appendChild(t)})),t.parentNode&&t.parentNode.replaceChild(i.domNode,t),i.attach(),i}}const yl=class t extends ql{constructor(t,e){super(t,e),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach((t=>{t.attach()}))}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,t.uiClass&&this.uiNode.classList.add(t.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new ml,Array.from(this.domNode.childNodes).filter((t=>t!==this.uiNode)).reverse().forEach((t=>{try{const e=gl(t,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(t){if(t instanceof nl)return;throw t}}))}deleteAt(t,e){if(t===0&&e===this.length())return this.remove();this.children.forEachAt(t,e,((t,e,i)=>{t.deleteAt(e,i)}))}descendant(e,i=0){const[n,r]=this.children.find(i);return e.blotName==null&&e(n)||e.blotName!=null&&n instanceof e?[n,r]:n instanceof t?n.descendant(e,r):[null,-1]}descendants(e,i=0,n=Number.MAX_VALUE){let r=[],s=n;return this.children.forEachAt(i,n,((i,n,l)=>{(e.blotName==null&&e(i)||e.blotName!=null&&i instanceof e)&&r.push(i),i instanceof t&&(r=r.concat(i.descendants(e,n,s))),s-=l})),r}detach(){this.children.forEach((t=>{t.detach()})),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach((i=>{e||this.statics.allowedChildren.some((t=>i instanceof t))||(i.statics.scope===el.BLOCK_BLOT?(i.next!=null&&this.splitAfter(i),i.prev!=null&&this.splitAfter(i.prev),i.parent.unwrap(),e=!0):i instanceof t?i.unwrap():i.remove())}))}formatAt(t,e,i,n){this.children.forEachAt(t,e,((t,e,r)=>{t.formatAt(e,r,i,n)}))}insertAt(t,e,i){const[n,r]=this.children.find(t);if(n)n.insertAt(r,e,i);else{const t=i==null?this.scroll.create("text",e):this.scroll.create(e,i);this.appendChild(t)}}insertBefore(t,e){t.parent!=null&&t.parent.children.remove(t);let i=null;this.children.insertBefore(t,e||null),t.parent=this,e!=null&&(i=e.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==i)&&this.domNode.insertBefore(t.domNode,i),t.attach()}length(){return this.children.reduce(((t,e)=>t+e.length()),0)}moveChildren(t,e){this.children.forEach((i=>{t.insertBefore(i,e)}))}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(e,i=!1){const[n,r]=this.children.find(e,i),s=[[this,e]];return n instanceof t?s.concat(n.path(r,i)):(n!=null&&s.push([n,r]),s)}removeChild(t){this.children.remove(t)}replaceWith(e,i){const n=typeof e=="string"?this.scroll.create(e,i):e;return n instanceof t&&this.moveChildren(n),super.replaceWith(n)}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}const i=this.clone();return this.parent&&this.parent.insertBefore(i,this.next||void 0),this.children.forEachAt(t,this.length(),((t,n,r)=>{const s=t.split(n,e);s!=null&&i.appendChild(s)})),i}splitAfter(t){const e=this.clone();for(;t.next!=null;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,e){const i=[],n=[];t.forEach((t=>{t.target===this.domNode&&t.type==="childList"&&(i.push(...t.addedNodes),n.push(...t.removedNodes))})),n.forEach((t=>{if(t.parentNode!=null&&t.tagName!=="IFRAME"&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const e=this.scroll.find(t);e!=null&&(e.domNode.parentNode==null||e.domNode.parentNode===this.domNode)&&e.detach()})),i.filter((t=>t.parentNode===this.domNode&&t!==this.uiNode)).sort(((t,e)=>t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1)).forEach((t=>{let e=null;t.nextSibling!=null&&(e=this.scroll.find(t.nextSibling));const i=gl(t,this.scroll);(i.next!==e||i.next==null)&&(i.parent!=null&&i.parent.removeChild(this),this.insertBefore(i,e||void 0))})),this.enforceAllowedChildren()}};yl.uiClass="";let kl=yl;const xl=kl;function jl(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(t[i]!==e[i])return!1;return!0}const Al=class t extends xl{static create(t){return super.create(t)}static formats(e,i){const n=i.query(t.blotName);if(!(n!=null&&e.tagName===n.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new dl(this.domNode)}format(e,i){if(e===this.statics.blotName&&!i)this.children.forEach((e=>{e instanceof t||(e=e.wrap(t.blotName,!0)),this.attributes.copy(e)})),this.unwrap();else{const t=this.scroll.query(e,el.INLINE);if(t==null)return;t instanceof il?this.attributes.attribute(t,i):i&&(e!==this.statics.blotName||this.formats()[e]!==i)&&this.replaceWith(e,i)}}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,i,n){this.formats()[i]!=null||this.scroll.query(i,el.ATTRIBUTE)?this.isolate(t,e).format(i,n):super.formatAt(t,e,i,n)}optimize(e){super.optimize(e);const i=this.formats();if(Object.keys(i).length===0)return this.unwrap();const n=this.next;n instanceof t&&n.prev===this&&jl(i,n.formats())&&(n.moveChildren(this),n.remove())}replaceWith(t,e){const i=super.replaceWith(t,e);return this.attributes.copy(i),i}update(t,e){super.update(t,e),t.some((t=>t.target===this.domNode&&t.type==="attributes"))&&this.attributes.build()}wrap(e,i){const n=super.wrap(e,i);return n instanceof t&&this.attributes.move(n),n}};Al.allowedChildren=[Al,wl],Al.blotName="inline",Al.scope=el.INLINE_BLOT,Al.tagName="SPAN";let Ol=Al;const Ml=Ol,El=class t extends xl{static create(t){return super.create(t)}static formats(e,i){const n=i.query(t.blotName);if(!(n!=null&&e.tagName===n.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new dl(this.domNode)}format(e,i){const n=this.scroll.query(e,el.BLOCK);n!=null&&(n instanceof il?this.attributes.attribute(n,i):e===this.statics.blotName&&!i?this.replaceWith(t.blotName):i&&(e!==this.statics.blotName||this.formats()[e]!==i)&&this.replaceWith(e,i))}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,i,n){this.scroll.query(i,el.BLOCK)!=null?this.format(i,n):super.formatAt(t,e,i,n)}insertAt(t,e,i){if(i==null||this.scroll.query(e,el.INLINE)!=null)super.insertAt(t,e,i);else{const n=this.split(t);if(n!=null){const t=this.scroll.create(e,i);n.parent.insertBefore(t,n)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(t,e){const i=super.replaceWith(t,e);return this.attributes.copy(i),i}update(t,e){super.update(t,e),t.some((t=>t.target===this.domNode&&t.type==="attributes"))&&this.attributes.build()}};El.blotName="block",El.scope=el.BLOCK_BLOT,El.tagName="P",El.allowedChildren=[Ml,El,wl];let Nl=El;const Tl=Nl,Ll=class t extends xl{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,e){super.deleteAt(t,e),this.enforceAllowedChildren()}formatAt(t,e,i,n){super.formatAt(t,e,i,n),this.enforceAllowedChildren()}insertAt(t,e,i){super.insertAt(t,e,i),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Ll.blotName="container",Ll.scope=el.BLOCK_BLOT;let $l=Ll;const Cl=$l;class _l extends wl{static formats(t,e){}format(t,e){super.formatAt(0,this.length(),t,e)}formatAt(t,e,i,n){t===0&&e===this.length()?this.format(i,n):super.formatAt(t,e,i,n)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const Sl=_l,zl={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},Bl=100,Il=class t extends xl{constructor(t,e){super(null,e),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver((t=>{this.update(t)})),this.observer.observe(this.domNode,zl),this.attach()}create(t,e){return this.registry.create(this,t,e)}find(t,e=!1){const i=this.registry.find(t,e);return i?i.scroll===this?i:e?this.find(i.scroll.domNode.parentNode,!0):null:null}query(t,e=el.ANY){return this.registry.query(t,e)}register(...t){return this.registry.register(...t)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,e){this.update(),t===0&&e===this.length()?this.children.forEach((t=>{t.remove()})):super.deleteAt(t,e)}formatAt(t,e,i,n){this.update(),super.formatAt(t,e,i,n)}insertAt(t,e,i){this.update(),super.insertAt(t,e,i)}optimize(t=[],e={}){super.optimize(e);const i=e.mutationsMap||new WeakMap;let n=Array.from(this.observer.takeRecords());for(;n.length>0;)t.push(n.pop());const r=(t,e=!0)=>{t==null||t===this||t.domNode.parentNode!=null&&(i.has(t.domNode)||i.set(t.domNode,[]),e&&r(t.parent))},s=t=>{i.has(t.domNode)&&(t instanceof xl&&t.children.forEach(s),i.delete(t.domNode),t.optimize(e))};let l=t;for(let e=0;l.length>0;e+=1){if(e>=Bl)throw new Error("[Parchment] Maximum optimize iterations reached");for(l.forEach((t=>{const e=this.find(t.target,!0);e!=null&&(e.domNode===t.target&&(t.type==="childList"?(r(this.find(t.previousSibling,!1)),Array.from(t.addedNodes).forEach((t=>{const e=this.find(t,!1);r(e,!1),e instanceof xl&&e.children.forEach((t=>{r(t,!1)}))}))):t.type==="attributes"&&r(e.prev)),r(e))})),this.children.forEach(s),l=Array.from(this.observer.takeRecords()),n=l.slice();n.length>0;)t.push(n.pop())}}update(t,e={}){t=t||this.observer.takeRecords();const i=new WeakMap;t.map((t=>{const e=this.find(t.target,!0);return e==null?null:i.has(e.domNode)?(i.get(e.domNode).push(t),null):(i.set(e.domNode,[t]),e)})).forEach((t=>{t!=null&&t!==this&&i.has(t.domNode)&&t.update(i.get(t.domNode)||[],e)})),e.mutationsMap=i,i.has(this.domNode)&&super.update(i.get(this.domNode),e),this.optimize(t,e)}};Il.blotName="scroll",Il.defaultChild=Tl,Il.allowedChildren=[Tl,Cl],Il.scope=el.BLOCK_BLOT,Il.tagName="DIV";let Rl=Il;const Dl=Rl,Hl=class t extends wl{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,e){super(t,e),this.text=this.statics.value(this.domNode)}deleteAt(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}index(t,e){return this.domNode===t?e:-1}insertAt(t,e,i){i==null?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,e,i)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,e=!1){return[this.domNode,t]}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}const i=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(i,this.next||void 0),this.text=this.statics.value(this.domNode),i}update(t,e){t.some((t=>t.type==="characterData"&&t.target===this.domNode))&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Hl.blotName="text",Hl.scope=el.INLINE_BLOT;let Vl=Hl;const Fl=Vl;const Ul=Object.freeze({__proto__:null,Attributor:il,AttributorStore:dl,BlockBlot:Tl,ClassAttributor:al,ContainerBlot:Cl,EmbedBlot:Sl,InlineBlot:Ml,LeafBlot:wl,ParentBlot:xl,Registry:sl,Scope:el,ScrollBlot:Dl,StyleAttributor:hl,TextBlot:Fl});var Pl={exports:{}};var Zl=-1;var Kl=1;var Wl=0;function Gl(t,e,i,n,r){if(t===e){if(t){return[[Wl,t]]}return[]}if(i!=null){var s=wo(t,e,i);if(s){return s}}var l=Xl(t,e);var o=t.substring(0,l);t=t.substring(l);e=e.substring(l);l=eo(t,e);var a=t.substring(t.length-l);t=t.substring(0,t.length-l);e=e.substring(0,e.length-l);var c=Ql(t,e);if(o){c.unshift([Wl,o])}if(a){c.push([Wl,a])}uo(c,r);if(n){no(c)}return c}function Ql(t,e){var i;if(!t){return[[Kl,e]]}if(!e){return[[Zl,t]]}var n=t.length>e.length?t:e;var r=t.length>e.length?e:t;var s=n.indexOf(r);if(s!==-1){i=[[Kl,n.substring(0,s)],[Wl,r],[Kl,n.substring(s+r.length)]];if(t.length>e.length){i[0][0]=i[2][0]=Zl}return i}if(r.length===1){return[[Zl,t],[Kl,e]]}var l=io(t,e);if(l){var o=l[0];var a=l[1];var c=l[2];var u=l[3];var h=l[4];var f=Gl(o,c);var d=Gl(a,u);return f.concat([[Wl,h]],d)}return Yl(t,e)}function Yl(t,e){var i=t.length;var n=e.length;var r=Math.ceil((i+n)/2);var s=r;var l=2*r;var o=new Array(l);var a=new Array(l);for(var c=0;c<l;c++){o[c]=-1;a[c]=-1}o[s+1]=0;a[s+1]=0;var u=i-n;var h=u%2!==0;var f=0;var d=0;var p=0;var q=0;for(var b=0;b<r;b++){for(var v=-b+f;v<=b-d;v+=2){var w=s+v;var m;if(v===-b||v!==b&&o[w-1]<o[w+1]){m=o[w+1]}else{m=o[w-1]+1}var g=m-v;while(m<i&&g<n&&t.charAt(m)===e.charAt(g)){m++;g++}o[w]=m;if(m>i){d+=2}else if(g>n){f+=2}else if(h){var y=s+u-v;if(y>=0&&y<l&&a[y]!==-1){var k=i-a[y];if(m>=k){return Jl(t,e,m,g)}}}}for(var x=-b+p;x<=b-q;x+=2){var y=s+x;var k;if(x===-b||x!==b&&a[y-1]<a[y+1]){k=a[y+1]}else{k=a[y-1]+1}var j=k-x;while(k<i&&j<n&&t.charAt(i-k-1)===e.charAt(n-j-1)){k++;j++}a[y]=k;if(k>i){q+=2}else if(j>n){p+=2}else if(!h){var w=s+u-x;if(w>=0&&w<l&&o[w]!==-1){var m=o[w];var g=s+m-w;k=i-k;if(m>=k){return Jl(t,e,m,g)}}}}}return[[Zl,t],[Kl,e]]}function Jl(t,e,i,n){var r=t.substring(0,i);var s=e.substring(0,n);var l=t.substring(i);var o=e.substring(n);var a=Gl(r,s);var c=Gl(l,o);return a.concat(c)}function Xl(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0)){return 0}var i=0;var n=Math.min(t.length,e.length);var r=n;var s=0;while(i<r){if(t.substring(s,r)==e.substring(s,r)){i=r;s=i}else{n=r}r=Math.floor((n-i)/2+i)}if(ho(t.charCodeAt(r-1))){r--}return r}function to(t,e){var i=t.length;var n=e.length;if(i==0||n==0){return 0}if(i>n){t=t.substring(i-n)}else if(i<n){e=e.substring(0,i)}var r=Math.min(i,n);if(t==e){return r}var s=0;var l=1;while(true){var o=t.substring(r-l);var a=e.indexOf(o);if(a==-1){return s}l+=a;if(a==0||t.substring(r-l)==e.substring(0,l)){s=l;l++}}}function eo(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1)){return 0}var i=0;var n=Math.min(t.length,e.length);var r=n;var s=0;while(i<r){if(t.substring(t.length-r,t.length-s)==e.substring(e.length-r,e.length-s)){i=r;s=i}else{n=r}r=Math.floor((n-i)/2+i)}if(fo(t.charCodeAt(t.length-r))){r--}return r}function io(t,e){var i=t.length>e.length?t:e;var n=t.length>e.length?e:t;if(i.length<4||n.length*2<i.length){return null}function r(t,e,i){var n=t.substring(i,i+Math.floor(t.length/4));var r=-1;var s="";var l,o,a,c;while((r=e.indexOf(n,r+1))!==-1){var u=Xl(t.substring(i),e.substring(r));var h=eo(t.substring(0,i),e.substring(0,r));if(s.length<h+u){s=e.substring(r-h,r)+e.substring(r,r+u);l=t.substring(0,i-h);o=t.substring(i+u);a=e.substring(0,r-h);c=e.substring(r+u)}}if(s.length*2>=t.length){return[l,o,a,c,s]}else{return null}}var s=r(i,n,Math.ceil(i.length/4));var l=r(i,n,Math.ceil(i.length/2));var o;if(!s&&!l){return null}else if(!l){o=s}else if(!s){o=l}else{o=s[4].length>l[4].length?s:l}var a,c,u,h;if(t.length>e.length){a=o[0];c=o[1];u=o[2];h=o[3]}else{u=o[0];h=o[1];a=o[2];c=o[3]}var f=o[4];return[a,c,u,h,f]}function no(t){var e=false;var i=[];var n=0;var r=null;var s=0;var l=0;var o=0;var a=0;var c=0;while(s<t.length){if(t[s][0]==Wl){i[n++]=s;l=a;o=c;a=0;c=0;r=t[s][1]}else{if(t[s][0]==Kl){a+=t[s][1].length}else{c+=t[s][1].length}if(r&&r.length<=Math.max(l,o)&&r.length<=Math.max(a,c)){t.splice(i[n-1],0,[Zl,r]);t[i[n-1]+1][0]=Kl;n--;n--;s=n>0?i[n-1]:-1;l=0;o=0;a=0;c=0;r=null;e=true}}s++}if(e){uo(t)}co(t);s=1;while(s<t.length){if(t[s-1][0]==Zl&&t[s][0]==Kl){var u=t[s-1][1];var h=t[s][1];var f=to(u,h);var d=to(h,u);if(f>=d){if(f>=u.length/2||f>=h.length/2){t.splice(s,0,[Wl,h.substring(0,f)]);t[s-1][1]=u.substring(0,u.length-f);t[s+1][1]=h.substring(f);s++}}else{if(d>=u.length/2||d>=h.length/2){t.splice(s,0,[Wl,u.substring(0,d)]);t[s-1][0]=Kl;t[s-1][1]=h.substring(0,h.length-d);t[s+1][0]=Zl;t[s+1][1]=u.substring(d);s++}}s++}s++}}var ro=/[^a-zA-Z0-9]/;var so=/\s/;var lo=/[\r\n]/;var oo=/\n\r?\n$/;var ao=/^\r?\n\r?\n/;function co(t){function e(t,e){if(!t||!e){return 6}var i=t.charAt(t.length-1);var n=e.charAt(0);var r=i.match(ro);var s=n.match(ro);var l=r&&i.match(so);var o=s&&n.match(so);var a=l&&i.match(lo);var c=o&&n.match(lo);var u=a&&t.match(oo);var h=c&&e.match(ao);if(u||h){return 5}else if(a||c){return 4}else if(r&&!l&&o){return 3}else if(l||o){return 2}else if(r||s){return 1}return 0}var i=1;while(i<t.length-1){if(t[i-1][0]==Wl&&t[i+1][0]==Wl){var n=t[i-1][1];var r=t[i][1];var s=t[i+1][1];var l=eo(n,r);if(l){var o=r.substring(r.length-l);n=n.substring(0,n.length-l);r=o+r.substring(0,r.length-l);s=o+s}var a=n;var c=r;var u=s;var h=e(n,r)+e(r,s);while(r.charAt(0)===s.charAt(0)){n+=r.charAt(0);r=r.substring(1)+s.charAt(0);s=s.substring(1);var f=e(n,r)+e(r,s);if(f>=h){h=f;a=n;c=r;u=s}}if(t[i-1][1]!=a){if(a){t[i-1][1]=a}else{t.splice(i-1,1);i--}t[i][1]=c;if(u){t[i+1][1]=u}else{t.splice(i+1,1);i--}}}i++}}function uo(t,e){t.push([Wl,""]);var i=0;var n=0;var r=0;var s="";var l="";var o;while(i<t.length){if(i<t.length-1&&!t[i][1]){t.splice(i,1);continue}switch(t[i][0]){case Kl:r++;l+=t[i][1];i++;break;case Zl:n++;s+=t[i][1];i++;break;case Wl:var a=i-r-n-1;if(e){if(a>=0&&qo(t[a][1])){var c=t[a][1].slice(-1);t[a][1]=t[a][1].slice(0,-1);s=c+s;l=c+l;if(!t[a][1]){t.splice(a,1);i--;var u=a-1;if(t[u]&&t[u][0]===Kl){r++;l=t[u][1]+l;u--}if(t[u]&&t[u][0]===Zl){n++;s=t[u][1]+s;u--}a=u}}if(po(t[i][1])){var c=t[i][1].charAt(0);t[i][1]=t[i][1].slice(1);s+=c;l+=c}}if(i<t.length-1&&!t[i][1]){t.splice(i,1);break}if(s.length>0||l.length>0){if(s.length>0&&l.length>0){o=Xl(l,s);if(o!==0){if(a>=0){t[a][1]+=l.substring(0,o)}else{t.splice(0,0,[Wl,l.substring(0,o)]);i++}l=l.substring(o);s=s.substring(o)}o=eo(l,s);if(o!==0){t[i][1]=l.substring(l.length-o)+t[i][1];l=l.substring(0,l.length-o);s=s.substring(0,s.length-o)}}var h=r+n;if(s.length===0&&l.length===0){t.splice(i-h,h);i=i-h}else if(s.length===0){t.splice(i-h,h,[Kl,l]);i=i-h+1}else if(l.length===0){t.splice(i-h,h,[Zl,s]);i=i-h+1}else{t.splice(i-h,h,[Zl,s],[Kl,l]);i=i-h+2}}if(i!==0&&t[i-1][0]===Wl){t[i-1][1]+=t[i][1];t.splice(i,1)}else{i++}r=0;n=0;s="";l="";break}}if(t[t.length-1][1]===""){t.pop()}var f=false;i=1;while(i<t.length-1){if(t[i-1][0]===Wl&&t[i+1][0]===Wl){if(t[i][1].substring(t[i][1].length-t[i-1][1].length)===t[i-1][1]){t[i][1]=t[i-1][1]+t[i][1].substring(0,t[i][1].length-t[i-1][1].length);t[i+1][1]=t[i-1][1]+t[i+1][1];t.splice(i-1,1);f=true}else if(t[i][1].substring(0,t[i+1][1].length)==t[i+1][1]){t[i-1][1]+=t[i+1][1];t[i][1]=t[i][1].substring(t[i+1][1].length)+t[i+1][1];t.splice(i+1,1);f=true}}i++}if(f){uo(t,e)}}function ho(t){return t>=55296&&t<=56319}function fo(t){return t>=56320&&t<=57343}function po(t){return fo(t.charCodeAt(0))}function qo(t){return ho(t.charCodeAt(t.length-1))}function bo(t){var e=[];for(var i=0;i<t.length;i++){if(t[i][1].length>0){e.push(t[i])}}return e}function vo(t,e,i,n){if(qo(t)||po(n)){return null}return bo([[Wl,t],[Zl,e],[Kl,i],[Wl,n]])}function wo(t,e,i){var n=typeof i==="number"?{index:i,length:0}:i.oldRange;var r=typeof i==="number"?null:i.newRange;var s=t.length;var l=e.length;if(n.length===0&&(r===null||r.length===0)){var o=n.index;var a=t.slice(0,o);var c=t.slice(o);var u=r?r.index:null;t:{var h=o+l-s;if(u!==null&&u!==h){break t}if(h<0||h>l){break t}var f=e.slice(0,h);var d=e.slice(h);if(d!==c){break t}var p=Math.min(o,h);var q=a.slice(0,p);var b=f.slice(0,p);if(q!==b){break t}var v=a.slice(p);var w=f.slice(p);return vo(q,v,w,c)}t:{if(u!==null&&u!==o){break t}var m=o;var f=e.slice(0,m);var d=e.slice(m);if(f!==a){break t}var g=Math.min(s-m,l-m);var y=c.slice(c.length-g);var k=d.slice(d.length-g);if(y!==k){break t}var v=c.slice(0,c.length-g);var w=d.slice(0,d.length-g);return vo(a,v,w,y)}}if(n.length>0&&r&&r.length===0){t:{var q=t.slice(0,n.index);var y=t.slice(n.index+n.length);var p=q.length;var g=y.length;if(l<p+g){break t}var b=e.slice(0,p);var k=e.slice(l-g);if(q!==b||y!==k){break t}var v=t.slice(p,s-g);var w=e.slice(p,l-g);return vo(q,v,w,y)}}return null}function mo(t,e,i,n){return Gl(t,e,i,n,true)}mo.INSERT=Kl;mo.DELETE=Zl;mo.EQUAL=Wl;var go=mo;var yo={exports:{}};(function(t,e){var i=200;var n="__lodash_hash_undefined__";var s=9007199254740991;var l="[object Arguments]",o="[object Array]",a="[object Boolean]",c="[object Date]",u="[object Error]",h="[object Function]",f="[object GeneratorFunction]",d="[object Map]",p="[object Number]",q="[object Object]",b="[object Promise]",v="[object RegExp]",w="[object Set]",m="[object String]",g="[object Symbol]",y="[object WeakMap]";var k="[object ArrayBuffer]",x="[object DataView]",j="[object Float32Array]",A="[object Float64Array]",O="[object Int8Array]",M="[object Int16Array]",E="[object Int32Array]",N="[object Uint8Array]",T="[object Uint8ClampedArray]",L="[object Uint16Array]",$="[object Uint32Array]";var C=/[\\^$.*+?()[\]{}|]/g;var _=/\w*$/;var S=/^\[object .+?Constructor\]$/;var z=/^(?:0|[1-9]\d*)$/;var B={};B[l]=B[o]=B[k]=B[x]=B[a]=B[c]=B[j]=B[A]=B[O]=B[M]=B[E]=B[d]=B[p]=B[q]=B[v]=B[w]=B[m]=B[g]=B[N]=B[T]=B[L]=B[$]=true;B[u]=B[h]=B[y]=false;var I=typeof r=="object"&&r&&r.Object===Object&&r;var R=typeof self=="object"&&self&&self.Object===Object&&self;var D=I||R||Function("return this")();var H=e&&!e.nodeType&&e;var V=H&&"object"=="object"&&t&&!t.nodeType&&t;var F=V&&V.exports===H;function U(t,e){t.set(e[0],e[1]);return t}function P(t,e){t.add(e);return t}function Z(t,e){var i=-1,n=t?t.length:0;while(++i<n){if(e(t[i],i,t)===false){break}}return t}function K(t,e){var i=-1,n=e.length,r=t.length;while(++i<n){t[r+i]=e[i]}return t}function W(t,e,i,n){var r=-1,s=t?t.length:0;if(n&&s){i=t[++r]}while(++r<s){i=e(i,t[r],r,t)}return i}function G(t,e){var i=-1,n=Array(t);while(++i<t){n[i]=e(i)}return n}function Q(t,e){return t==null?undefined:t[e]}function Y(t){var e=false;if(t!=null&&typeof t.toString!="function"){try{e=!!(t+"")}catch(t){}}return e}function J(t){var e=-1,i=Array(t.size);t.forEach((function(t,n){i[++e]=[n,t]}));return i}function X(t,e){return function(i){return t(e(i))}}function tt(t){var e=-1,i=Array(t.size);t.forEach((function(t){i[++e]=t}));return i}var et=Array.prototype,it=Function.prototype,nt=Object.prototype;var rt=D["__core-js_shared__"];var st=function(){var t=/[^.]+$/.exec(rt&&rt.keys&&rt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var lt=it.toString;var ot=nt.hasOwnProperty;var at=nt.toString;var ct=RegExp("^"+lt.call(ot).replace(C,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ut=F?D.Buffer:undefined,ht=D.Symbol,ft=D.Uint8Array,dt=X(Object.getPrototypeOf,Object),pt=Object.create,qt=nt.propertyIsEnumerable,bt=et.splice;var vt=Object.getOwnPropertySymbols,wt=ut?ut.isBuffer:undefined,mt=X(Object.keys,Object);var gt=Oe(D,"DataView"),yt=Oe(D,"Map"),kt=Oe(D,"Promise"),xt=Oe(D,"Set"),jt=Oe(D,"WeakMap"),At=Oe(Object,"create");var Ot=ze(gt),Mt=ze(yt),Et=ze(kt),Nt=ze(xt),Tt=ze(jt);var Lt=ht?ht.prototype:undefined,$t=Lt?Lt.valueOf:undefined;function Ct(t){var e=-1,i=t?t.length:0;this.clear();while(++e<i){var n=t[e];this.set(n[0],n[1])}}function _t(){this.__data__=At?At(null):{}}function St(t){return this.has(t)&&delete this.__data__[t]}function zt(t){var e=this.__data__;if(At){var i=e[t];return i===n?undefined:i}return ot.call(e,t)?e[t]:undefined}function Bt(t){var e=this.__data__;return At?e[t]!==undefined:ot.call(e,t)}function It(t,e){var i=this.__data__;i[t]=At&&e===undefined?n:e;return this}Ct.prototype.clear=_t;Ct.prototype["delete"]=St;Ct.prototype.get=zt;Ct.prototype.has=Bt;Ct.prototype.set=It;function Rt(t){var e=-1,i=t?t.length:0;this.clear();while(++e<i){var n=t[e];this.set(n[0],n[1])}}function Dt(){this.__data__=[]}function Ht(t){var e=this.__data__,i=se(e,t);if(i<0){return false}var n=e.length-1;if(i==n){e.pop()}else{bt.call(e,i,1)}return true}function Vt(t){var e=this.__data__,i=se(e,t);return i<0?undefined:e[i][1]}function Ft(t){return se(this.__data__,t)>-1}function Ut(t,e){var i=this.__data__,n=se(i,t);if(n<0){i.push([t,e])}else{i[n][1]=e}return this}Rt.prototype.clear=Dt;Rt.prototype["delete"]=Ht;Rt.prototype.get=Vt;Rt.prototype.has=Ft;Rt.prototype.set=Ut;function Pt(t){var e=-1,i=t?t.length:0;this.clear();while(++e<i){var n=t[e];this.set(n[0],n[1])}}function Zt(){this.__data__={hash:new Ct,map:new(yt||Rt),string:new Ct}}function Kt(t){return Ae(this,t)["delete"](t)}function Wt(t){return Ae(this,t).get(t)}function Gt(t){return Ae(this,t).has(t)}function Qt(t,e){Ae(this,t).set(t,e);return this}Pt.prototype.clear=Zt;Pt.prototype["delete"]=Kt;Pt.prototype.get=Wt;Pt.prototype.has=Gt;Pt.prototype.set=Qt;function Yt(t){this.__data__=new Rt(t)}function Jt(){this.__data__=new Rt}function Xt(t){return this.__data__["delete"](t)}function te(t){return this.__data__.get(t)}function ee(t){return this.__data__.has(t)}function ie(t,e){var n=this.__data__;if(n instanceof Rt){var r=n.__data__;if(!yt||r.length<i-1){r.push([t,e]);return this}n=this.__data__=new Pt(r)}n.set(t,e);return this}Yt.prototype.clear=Jt;Yt.prototype["delete"]=Xt;Yt.prototype.get=te;Yt.prototype.has=ee;Yt.prototype.set=ie;function ne(t,e){var i=De(t)||Re(t)?G(t.length,String):[];var n=i.length,r=!!n;for(var s in t){if((e||ot.call(t,s))&&!(r&&(s=="length"||$e(s,n)))){i.push(s)}}return i}function re(t,e,i){var n=t[e];if(!(ot.call(t,e)&&Ie(n,i))||i===undefined&&!(e in t)){t[e]=i}}function se(t,e){var i=t.length;while(i--){if(Ie(t[i][0],e)){return i}}return-1}function le(t,e){return t&&ke(e,We(e),t)}function oe(t,e,i,n,r,s,o){var a;if(n){a=s?n(t,r,s,o):n(t)}if(a!==undefined){return a}if(!Ze(t)){return t}var c=De(t);if(c){a=Ne(t);if(!e){return ye(t,a)}}else{var u=Ee(t),d=u==h||u==f;if(Fe(t)){return de(t,e)}if(u==q||u==l||d&&!s){if(Y(t)){return s?t:{}}a=Te(d?{}:t);if(!e){return xe(t,le(a,t))}}else{if(!B[u]){return s?t:{}}a=Le(t,u,oe,e)}}o||(o=new Yt);var p=o.get(t);if(p){return p}o.set(t,a);if(!c){var b=i?je(t):We(t)}Z(b||t,(function(r,s){if(b){s=r;r=t[s]}re(a,s,oe(r,e,i,n,s,t,o))}));return a}function ae(t){return Ze(t)?pt(t):{}}function ce(t,e,i){var n=e(t);return De(t)?n:K(n,i(t))}function ue(t){return at.call(t)}function he(t){if(!Ze(t)||_e(t)){return false}var e=Ue(t)||Y(t)?ct:S;return e.test(ze(t))}function fe(t){if(!Se(t)){return mt(t)}var e=[];for(var i in Object(t)){if(ot.call(t,i)&&i!="constructor"){e.push(i)}}return e}function de(t,e){if(e){return t.slice()}var i=new t.constructor(t.length);t.copy(i);return i}function pe(t){var e=new t.constructor(t.byteLength);new ft(e).set(new ft(t));return e}function qe(t,e){var i=e?pe(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}function be(t,e,i){var n=e?i(J(t),true):J(t);return W(n,U,new t.constructor)}function ve(t){var e=new t.constructor(t.source,_.exec(t));e.lastIndex=t.lastIndex;return e}function we(t,e,i){var n=e?i(tt(t),true):tt(t);return W(n,P,new t.constructor)}function me(t){return $t?Object($t.call(t)):{}}function ge(t,e){var i=e?pe(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function ye(t,e){var i=-1,n=t.length;e||(e=Array(n));while(++i<n){e[i]=t[i]}return e}function ke(t,e,i,n){i||(i={});var r=-1,s=e.length;while(++r<s){var l=e[r];var o=n?n(i[l],t[l],l,i,t):undefined;re(i,l,o===undefined?t[l]:o)}return i}function xe(t,e){return ke(t,Me(t),e)}function je(t){return ce(t,We,Me)}function Ae(t,e){var i=t.__data__;return Ce(e)?i[typeof e=="string"?"string":"hash"]:i.map}function Oe(t,e){var i=Q(t,e);return he(i)?i:undefined}var Me=vt?X(vt,Object):Ge;var Ee=ue;if(gt&&Ee(new gt(new ArrayBuffer(1)))!=x||yt&&Ee(new yt)!=d||kt&&Ee(kt.resolve())!=b||xt&&Ee(new xt)!=w||jt&&Ee(new jt)!=y){Ee=function(t){var e=at.call(t),i=e==q?t.constructor:undefined,n=i?ze(i):undefined;if(n){switch(n){case Ot:return x;case Mt:return d;case Et:return b;case Nt:return w;case Tt:return y}}return e}}function Ne(t){var e=t.length,i=t.constructor(e);if(e&&typeof t[0]=="string"&&ot.call(t,"index")){i.index=t.index;i.input=t.input}return i}function Te(t){return typeof t.constructor=="function"&&!Se(t)?ae(dt(t)):{}}function Le(t,e,i,n){var r=t.constructor;switch(e){case k:return pe(t);case a:case c:return new r(+t);case x:return qe(t,n);case j:case A:case O:case M:case E:case N:case T:case L:case $:return ge(t,n);case d:return be(t,n,i);case p:case m:return new r(t);case v:return ve(t);case w:return we(t,n,i);case g:return me(t)}}function $e(t,e){e=e==null?s:e;return!!e&&(typeof t=="number"||z.test(t))&&(t>-1&&t%1==0&&t<e)}function Ce(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function _e(t){return!!st&&st in t}function Se(t){var e=t&&t.constructor,i=typeof e=="function"&&e.prototype||nt;return t===i}function ze(t){if(t!=null){try{return lt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Be(t){return oe(t,true,true)}function Ie(t,e){return t===e||t!==t&&e!==e}function Re(t){return Ve(t)&&ot.call(t,"callee")&&(!qt.call(t,"callee")||at.call(t)==l)}var De=Array.isArray;function He(t){return t!=null&&Pe(t.length)&&!Ue(t)}function Ve(t){return Ke(t)&&He(t)}var Fe=wt||Qe;function Ue(t){var e=Ze(t)?at.call(t):"";return e==h||e==f}function Pe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=s}function Ze(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Ke(t){return!!t&&typeof t=="object"}function We(t){return He(t)?ne(t):fe(t)}function Ge(){return[]}function Qe(){return false}t.exports=Be})(yo,yo.exports);var ko={exports:{}};(function(t,e){var i=200;var n="__lodash_hash_undefined__";var s=1,l=2;var o=9007199254740991;var a="[object Arguments]",c="[object Array]",u="[object AsyncFunction]",h="[object Boolean]",f="[object Date]",d="[object Error]",p="[object Function]",q="[object GeneratorFunction]",b="[object Map]",v="[object Number]",w="[object Null]",m="[object Object]",g="[object Promise]",y="[object Proxy]",k="[object RegExp]",x="[object Set]",j="[object String]",A="[object Symbol]",O="[object Undefined]",M="[object WeakMap]";var E="[object ArrayBuffer]",N="[object DataView]",T="[object Float32Array]",L="[object Float64Array]",$="[object Int8Array]",C="[object Int16Array]",_="[object Int32Array]",S="[object Uint8Array]",z="[object Uint8ClampedArray]",B="[object Uint16Array]",I="[object Uint32Array]";var R=/[\\^$.*+?()[\]{}|]/g;var D=/^\[object .+?Constructor\]$/;var H=/^(?:0|[1-9]\d*)$/;var V={};V[T]=V[L]=V[$]=V[C]=V[_]=V[S]=V[z]=V[B]=V[I]=true;V[a]=V[c]=V[E]=V[h]=V[N]=V[f]=V[d]=V[p]=V[b]=V[v]=V[m]=V[k]=V[x]=V[j]=V[M]=false;var F=typeof r=="object"&&r&&r.Object===Object&&r;var U=typeof self=="object"&&self&&self.Object===Object&&self;var P=F||U||Function("return this")();var Z=e&&!e.nodeType&&e;var K=Z&&"object"=="object"&&t&&!t.nodeType&&t;var W=K&&K.exports===Z;var G=W&&F.process;var Q=function(){try{return G&&G.binding&&G.binding("util")}catch(t){}}();var Y=Q&&Q.isTypedArray;function J(t,e){var i=-1,n=t==null?0:t.length,r=0,s=[];while(++i<n){var l=t[i];if(e(l,i,t)){s[r++]=l}}return s}function X(t,e){var i=-1,n=e.length,r=t.length;while(++i<n){t[r+i]=e[i]}return t}function tt(t,e){var i=-1,n=t==null?0:t.length;while(++i<n){if(e(t[i],i,t)){return true}}return false}function et(t,e){var i=-1,n=Array(t);while(++i<t){n[i]=e(i)}return n}function it(t){return function(e){return t(e)}}function nt(t,e){return t.has(e)}function rt(t,e){return t==null?undefined:t[e]}function st(t){var e=-1,i=Array(t.size);t.forEach((function(t,n){i[++e]=[n,t]}));return i}function lt(t,e){return function(i){return t(e(i))}}function ot(t){var e=-1,i=Array(t.size);t.forEach((function(t){i[++e]=t}));return i}var at=Array.prototype,ct=Function.prototype,ut=Object.prototype;var ht=P["__core-js_shared__"];var ft=ct.toString;var dt=ut.hasOwnProperty;var pt=function(){var t=/[^.]+$/.exec(ht&&ht.keys&&ht.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var qt=ut.toString;var bt=RegExp("^"+ft.call(dt).replace(R,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var vt=W?P.Buffer:undefined,wt=P.Symbol,mt=P.Uint8Array,gt=ut.propertyIsEnumerable,yt=at.splice,kt=wt?wt.toStringTag:undefined;var xt=Object.getOwnPropertySymbols,jt=vt?vt.isBuffer:undefined,At=lt(Object.keys,Object);var Ot=Me(P,"DataView"),Mt=Me(P,"Map"),Et=Me(P,"Promise"),Nt=Me(P,"Set"),Tt=Me(P,"WeakMap"),Lt=Me(Object,"create");var $t=ze(Ot),Ct=ze(Mt),_t=ze(Et),St=ze(Nt),zt=ze(Tt);var Bt=wt?wt.prototype:undefined,It=Bt?Bt.valueOf:undefined;function Rt(t){var e=-1,i=t==null?0:t.length;this.clear();while(++e<i){var n=t[e];this.set(n[0],n[1])}}function Dt(){this.__data__=Lt?Lt(null):{};this.size=0}function Ht(t){var e=this.has(t)&&delete this.__data__[t];this.size-=e?1:0;return e}function Vt(t){var e=this.__data__;if(Lt){var i=e[t];return i===n?undefined:i}return dt.call(e,t)?e[t]:undefined}function Ft(t){var e=this.__data__;return Lt?e[t]!==undefined:dt.call(e,t)}function Ut(t,e){var i=this.__data__;this.size+=this.has(t)?0:1;i[t]=Lt&&e===undefined?n:e;return this}Rt.prototype.clear=Dt;Rt.prototype["delete"]=Ht;Rt.prototype.get=Vt;Rt.prototype.has=Ft;Rt.prototype.set=Ut;function Pt(t){var e=-1,i=t==null?0:t.length;this.clear();while(++e<i){var n=t[e];this.set(n[0],n[1])}}function Zt(){this.__data__=[];this.size=0}function Kt(t){var e=this.__data__,i=de(e,t);if(i<0){return false}var n=e.length-1;if(i==n){e.pop()}else{yt.call(e,i,1)}--this.size;return true}function Wt(t){var e=this.__data__,i=de(e,t);return i<0?undefined:e[i][1]}function Gt(t){return de(this.__data__,t)>-1}function Qt(t,e){var i=this.__data__,n=de(i,t);if(n<0){++this.size;i.push([t,e])}else{i[n][1]=e}return this}Pt.prototype.clear=Zt;Pt.prototype["delete"]=Kt;Pt.prototype.get=Wt;Pt.prototype.has=Gt;Pt.prototype.set=Qt;function Yt(t){var e=-1,i=t==null?0:t.length;this.clear();while(++e<i){var n=t[e];this.set(n[0],n[1])}}function Jt(){this.size=0;this.__data__={hash:new Rt,map:new(Mt||Pt),string:new Rt}}function Xt(t){var e=Oe(this,t)["delete"](t);this.size-=e?1:0;return e}function te(t){return Oe(this,t).get(t)}function ee(t){return Oe(this,t).has(t)}function ie(t,e){var i=Oe(this,t),n=i.size;i.set(t,e);this.size+=i.size==n?0:1;return this}Yt.prototype.clear=Jt;Yt.prototype["delete"]=Xt;Yt.prototype.get=te;Yt.prototype.has=ee;Yt.prototype.set=ie;function ne(t){var e=-1,i=t==null?0:t.length;this.__data__=new Yt;while(++e<i){this.add(t[e])}}function re(t){this.__data__.set(t,n);return this}function se(t){return this.__data__.has(t)}ne.prototype.add=ne.prototype.push=re;ne.prototype.has=se;function le(t){var e=this.__data__=new Pt(t);this.size=e.size}function oe(){this.__data__=new Pt;this.size=0}function ae(t){var e=this.__data__,i=e["delete"](t);this.size=e.size;return i}function ce(t){return this.__data__.get(t)}function ue(t){return this.__data__.has(t)}function he(t,e){var n=this.__data__;if(n instanceof Pt){var r=n.__data__;if(!Mt||r.length<i-1){r.push([t,e]);this.size=++n.size;return this}n=this.__data__=new Yt(r)}n.set(t,e);this.size=n.size;return this}le.prototype.clear=oe;le.prototype["delete"]=ae;le.prototype.get=ce;le.prototype.has=ue;le.prototype.set=he;function fe(t,e){var i=Re(t),n=!i&&Ie(t),r=!i&&!n&&He(t),s=!i&&!n&&!r&&Ke(t),l=i||n||r||s,o=l?et(t.length,String):[],a=o.length;for(var c in t){if((e||dt.call(t,c))&&!(l&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Le(c,a)))){o.push(c)}}return o}function de(t,e){var i=t.length;while(i--){if(Be(t[i][0],e)){return i}}return-1}function pe(t,e,i){var n=e(t);return Re(t)?n:X(n,i(t))}function qe(t){if(t==null){return t===undefined?O:w}return kt&&kt in Object(t)?Ee(t):Se(t)}function be(t){return Ze(t)&&qe(t)==a}function ve(t,e,i,n,r){if(t===e){return true}if(t==null||e==null||!Ze(t)&&!Ze(e)){return t!==t&&e!==e}return we(t,e,i,n,ve,r)}function we(t,e,i,n,r,l){var o=Re(t),u=Re(e),h=o?c:Te(t),f=u?c:Te(e);h=h==a?m:h;f=f==a?m:f;var d=h==m,p=f==m,q=h==f;if(q&&He(t)){if(!He(e)){return false}o=true;d=false}if(q&&!d){l||(l=new le);return o||Ke(t)?ke(t,e,i,n,r,l):xe(t,e,h,i,n,r,l)}if(!(i&s)){var b=d&&dt.call(t,"__wrapped__"),v=p&&dt.call(e,"__wrapped__");if(b||v){var w=b?t.value():t,g=v?e.value():e;l||(l=new le);return r(w,g,i,n,l)}}if(!q){return false}l||(l=new le);return je(t,e,i,n,r,l)}function me(t){if(!Pe(t)||Ce(t)){return false}var e=Fe(t)?bt:D;return e.test(ze(t))}function ge(t){return Ze(t)&&Ue(t.length)&&!!V[qe(t)]}function ye(t){if(!_e(t)){return At(t)}var e=[];for(var i in Object(t)){if(dt.call(t,i)&&i!="constructor"){e.push(i)}}return e}function ke(t,e,i,n,r,o){var a=i&s,c=t.length,u=e.length;if(c!=u&&!(a&&u>c)){return false}var h=o.get(t);if(h&&o.get(e)){return h==e}var f=-1,d=true,p=i&l?new ne:undefined;o.set(t,e);o.set(e,t);while(++f<c){var q=t[f],b=e[f];if(n){var v=a?n(b,q,f,e,t,o):n(q,b,f,t,e,o)}if(v!==undefined){if(v){continue}d=false;break}if(p){if(!tt(e,(function(t,e){if(!nt(p,e)&&(q===t||r(q,t,i,n,o))){return p.push(e)}}))){d=false;break}}else if(!(q===b||r(q,b,i,n,o))){d=false;break}}o["delete"](t);o["delete"](e);return d}function xe(t,e,i,n,r,o,a){switch(i){case N:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset){return false}t=t.buffer;e=e.buffer;case E:if(t.byteLength!=e.byteLength||!o(new mt(t),new mt(e))){return false}return true;case h:case f:case v:return Be(+t,+e);case d:return t.name==e.name&&t.message==e.message;case k:case j:return t==e+"";case b:var c=st;case x:var u=n&s;c||(c=ot);if(t.size!=e.size&&!u){return false}var p=a.get(t);if(p){return p==e}n|=l;a.set(t,e);var q=ke(c(t),c(e),n,r,o,a);a["delete"](t);return q;case A:if(It){return It.call(t)==It.call(e)}}return false}function je(t,e,i,n,r,l){var o=i&s,a=Ae(t),c=a.length,u=Ae(e),h=u.length;if(c!=h&&!o){return false}var f=c;while(f--){var d=a[f];if(!(o?d in e:dt.call(e,d))){return false}}var p=l.get(t);if(p&&l.get(e)){return p==e}var q=true;l.set(t,e);l.set(e,t);var b=o;while(++f<c){d=a[f];var v=t[d],w=e[d];if(n){var m=o?n(w,v,d,e,t,l):n(v,w,d,t,e,l)}if(!(m===undefined?v===w||r(v,w,i,n,l):m)){q=false;break}b||(b=d=="constructor")}if(q&&!b){var g=t.constructor,y=e.constructor;if(g!=y&&("constructor"in t&&"constructor"in e)&&!(typeof g=="function"&&g instanceof g&&typeof y=="function"&&y instanceof y)){q=false}}l["delete"](t);l["delete"](e);return q}function Ae(t){return pe(t,We,Ne)}function Oe(t,e){var i=t.__data__;return $e(e)?i[typeof e=="string"?"string":"hash"]:i.map}function Me(t,e){var i=rt(t,e);return me(i)?i:undefined}function Ee(t){var e=dt.call(t,kt),i=t[kt];try{t[kt]=undefined;var n=true}catch(t){}var r=qt.call(t);if(n){if(e){t[kt]=i}else{delete t[kt]}}return r}var Ne=!xt?Ge:function(t){if(t==null){return[]}t=Object(t);return J(xt(t),(function(e){return gt.call(t,e)}))};var Te=qe;if(Ot&&Te(new Ot(new ArrayBuffer(1)))!=N||Mt&&Te(new Mt)!=b||Et&&Te(Et.resolve())!=g||Nt&&Te(new Nt)!=x||Tt&&Te(new Tt)!=M){Te=function(t){var e=qe(t),i=e==m?t.constructor:undefined,n=i?ze(i):"";if(n){switch(n){case $t:return N;case Ct:return b;case _t:return g;case St:return x;case zt:return M}}return e}}function Le(t,e){e=e==null?o:e;return!!e&&(typeof t=="number"||H.test(t))&&(t>-1&&t%1==0&&t<e)}function $e(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Ce(t){return!!pt&&pt in t}function _e(t){var e=t&&t.constructor,i=typeof e=="function"&&e.prototype||ut;return t===i}function Se(t){return qt.call(t)}function ze(t){if(t!=null){try{return ft.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Be(t,e){return t===e||t!==t&&e!==e}var Ie=be(function(){return arguments}())?be:function(t){return Ze(t)&&dt.call(t,"callee")&&!gt.call(t,"callee")};var Re=Array.isArray;function De(t){return t!=null&&Ue(t.length)&&!Fe(t)}var He=jt||Qe;function Ve(t,e){return ve(t,e)}function Fe(t){if(!Pe(t)){return false}var e=qe(t);return e==p||e==q||e==u||e==y}function Ue(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=o}function Pe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function Ze(t){return t!=null&&typeof t=="object"}var Ke=Y?it(Y):ge;function We(t){return De(t)?fe(t):ye(t)}function Ge(){return[]}function Qe(){return false}t.exports=Ve})(ko,ko.exports);var xo={};Object.defineProperty(xo,"__esModule",{value:true});const jo=yo.exports;const Ao=ko.exports;var Oo;(function(t){function e(t={},e={},i=false){if(typeof t!=="object"){t={}}if(typeof e!=="object"){e={}}let n=jo(e);if(!i){n=Object.keys(n).reduce(((t,e)=>{if(n[e]!=null){t[e]=n[e]}return t}),{})}for(const i in t){if(t[i]!==undefined&&e[i]===undefined){n[i]=t[i]}}return Object.keys(n).length>0?n:undefined}t.compose=e;function i(t={},e={}){if(typeof t!=="object"){t={}}if(typeof e!=="object"){e={}}const i=Object.keys(t).concat(Object.keys(e)).reduce(((i,n)=>{if(!Ao(t[n],e[n])){i[n]=e[n]===undefined?null:e[n]}return i}),{});return Object.keys(i).length>0?i:undefined}t.diff=i;function n(t={},e={}){t=t||{};const i=Object.keys(e).reduce(((i,n)=>{if(e[n]!==t[n]&&t[n]!==undefined){i[n]=e[n]}return i}),{});return Object.keys(t).reduce(((i,n)=>{if(t[n]!==e[n]&&e[n]===undefined){i[n]=null}return i}),i)}t.invert=n;function r(t,e,i=false){if(typeof t!=="object"){return e}if(typeof e!=="object"){return undefined}if(!i){return e}const n=Object.keys(e).reduce(((i,n)=>{if(t[n]===undefined){i[n]=e[n]}return i}),{});return Object.keys(n).length>0?n:undefined}t.transform=r})(Oo||(Oo={}));xo.default=Oo;var Mo={};Object.defineProperty(Mo,"__esModule",{value:true});var Eo;(function(t){function e(t){if(typeof t.delete==="number"){return t.delete}else if(typeof t.retain==="number"){return t.retain}else if(typeof t.retain==="object"&&t.retain!==null){return 1}else{return typeof t.insert==="string"?t.insert.length:1}}t.length=e})(Eo||(Eo={}));Mo.default=Eo;var No={};Object.defineProperty(No,"__esModule",{value:true});const To=Mo;class Lo{constructor(t){this.ops=t;this.index=0;this.offset=0}hasNext(){return this.peekLength()<Infinity}next(t){if(!t){t=Infinity}const e=this.ops[this.index];if(e){const i=this.offset;const n=To.default.length(e);if(t>=n-i){t=n-i;this.index+=1;this.offset=0}else{this.offset+=t}if(typeof e.delete==="number"){return{delete:t}}else{const n={};if(e.attributes){n.attributes=e.attributes}if(typeof e.retain==="number"){n.retain=t}else if(typeof e.retain==="object"&&e.retain!==null){n.retain=e.retain}else if(typeof e.insert==="string"){n.insert=e.insert.substr(i,t)}else{n.insert=e.insert}return n}}else{return{retain:Infinity}}}peek(){return this.ops[this.index]}peekLength(){if(this.ops[this.index]){return To.default.length(this.ops[this.index])-this.offset}else{return Infinity}}peekType(){const t=this.ops[this.index];if(t){if(typeof t.delete==="number"){return"delete"}else if(typeof t.retain==="number"||typeof t.retain==="object"&&t.retain!==null){return"retain"}else{return"insert"}}return"retain"}rest(){if(!this.hasNext()){return[]}else if(this.offset===0){return this.ops.slice(this.index)}else{const t=this.offset;const e=this.index;const i=this.next();const n=this.ops.slice(this.index);this.offset=t;this.index=e;return[i].concat(n)}}}No.default=Lo;(function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.AttributeMap=e.OpIterator=e.Op=void 0;const i=go;const n=yo.exports;const r=ko.exports;const s=xo;e.AttributeMap=s.default;const l=Mo;e.Op=l.default;const o=No;e.OpIterator=o.default;const a=String.fromCharCode(0);const c=(t,e)=>{if(typeof t!=="object"||t===null){throw new Error(`cannot retain a ${typeof t}`)}if(typeof e!=="object"||e===null){throw new Error(`cannot retain a ${typeof e}`)}const i=Object.keys(t)[0];if(!i||i!==Object.keys(e)[0]){throw new Error(`embed types not matched: ${i} != ${Object.keys(e)[0]}`)}return[i,t[i],e[i]]};class u{constructor(t){if(Array.isArray(t)){this.ops=t}else if(t!=null&&Array.isArray(t.ops)){this.ops=t.ops}else{this.ops=[]}}static registerEmbed(t,e){this.handlers[t]=e}static unregisterEmbed(t){delete this.handlers[t]}static getHandler(t){const e=this.handlers[t];if(!e){throw new Error(`no handlers for embed type "${t}"`)}return e}insert(t,e){const i={};if(typeof t==="string"&&t.length===0){return this}i.insert=t;if(e!=null&&typeof e==="object"&&Object.keys(e).length>0){i.attributes=e}return this.push(i)}delete(t){if(t<=0){return this}return this.push({delete:t})}retain(t,e){if(typeof t==="number"&&t<=0){return this}const i={retain:t};if(e!=null&&typeof e==="object"&&Object.keys(e).length>0){i.attributes=e}return this.push(i)}push(t){let e=this.ops.length;let i=this.ops[e-1];t=n(t);if(typeof i==="object"){if(typeof t.delete==="number"&&typeof i.delete==="number"){this.ops[e-1]={delete:i.delete+t.delete};return this}if(typeof i.delete==="number"&&t.insert!=null){e-=1;i=this.ops[e-1];if(typeof i!=="object"){this.ops.unshift(t);return this}}if(r(t.attributes,i.attributes)){if(typeof t.insert==="string"&&typeof i.insert==="string"){this.ops[e-1]={insert:i.insert+t.insert};if(typeof t.attributes==="object"){this.ops[e-1].attributes=t.attributes}return this}else if(typeof t.retain==="number"&&typeof i.retain==="number"){this.ops[e-1]={retain:i.retain+t.retain};if(typeof t.attributes==="object"){this.ops[e-1].attributes=t.attributes}return this}}}if(e===this.ops.length){this.ops.push(t)}else{this.ops.splice(e,0,t)}return this}chop(){const t=this.ops[this.ops.length-1];if(t&&typeof t.retain==="number"&&!t.attributes){this.ops.pop()}return this}filter(t){return this.ops.filter(t)}forEach(t){this.ops.forEach(t)}map(t){return this.ops.map(t)}partition(t){const e=[];const i=[];this.forEach((n=>{const r=t(n)?e:i;r.push(n)}));return[e,i]}reduce(t,e){return this.ops.reduce(t,e)}changeLength(){return this.reduce(((t,e)=>{if(e.insert){return t+l.default.length(e)}else if(e.delete){return t-e.delete}return t}),0)}length(){return this.reduce(((t,e)=>t+l.default.length(e)),0)}slice(t=0,e=Infinity){const i=[];const n=new o.default(this.ops);let r=0;while(r<e&&n.hasNext()){let s;if(r<t){s=n.next(t-r)}else{s=n.next(e-r);i.push(s)}r+=l.default.length(s)}return new u(i)}compose(t){const e=new o.default(this.ops);const i=new o.default(t.ops);const n=[];const l=i.peek();if(l!=null&&typeof l.retain==="number"&&l.attributes==null){let t=l.retain;while(e.peekType()==="insert"&&e.peekLength()<=t){t-=e.peekLength();n.push(e.next())}if(l.retain-t>0){i.next(l.retain-t)}}const a=new u(n);while(e.hasNext()||i.hasNext()){if(i.peekType()==="insert"){a.push(i.next())}else if(e.peekType()==="delete"){a.push(e.next())}else{const t=Math.min(e.peekLength(),i.peekLength());const n=e.next(t);const l=i.next(t);if(l.retain){const o={};if(typeof n.retain==="number"){o.retain=typeof l.retain==="number"?t:l.retain}else{if(typeof l.retain==="number"){if(n.retain==null){o.insert=n.insert}else{o.retain=n.retain}}else{const t=n.retain==null?"insert":"retain";const[e,i,r]=c(n[t],l.retain);const s=u.getHandler(e);o[t]={[e]:s.compose(i,r,t==="retain")}}}const h=s.default.compose(n.attributes,l.attributes,typeof n.retain==="number");if(h){o.attributes=h}a.push(o);if(!i.hasNext()&&r(a.ops[a.ops.length-1],o)){const t=new u(e.rest());return a.concat(t).chop()}}else if(typeof l.delete==="number"&&(typeof n.retain==="number"||typeof n.retain==="object"&&n.retain!==null)){a.push(l)}}}return a.chop()}concat(t){const e=new u(this.ops.slice());if(t.ops.length>0){e.push(t.ops[0]);e.ops=e.ops.concat(t.ops.slice(1))}return e}diff(t,e){if(this.ops===t.ops){return new u}const n=[this,t].map((e=>e.map((i=>{if(i.insert!=null){return typeof i.insert==="string"?i.insert:a}const n=e===t?"on":"with";throw new Error("diff() called "+n+" non-document")})).join("")));const l=new u;const c=i(n[0],n[1],e,true);const h=new o.default(this.ops);const f=new o.default(t.ops);c.forEach((t=>{let e=t[1].length;while(e>0){let n=0;switch(t[0]){case i.INSERT:n=Math.min(f.peekLength(),e);l.push(f.next(n));break;case i.DELETE:n=Math.min(e,h.peekLength());h.next(n);l.delete(n);break;case i.EQUAL:n=Math.min(h.peekLength(),f.peekLength(),e);const t=h.next(n);const o=f.next(n);if(r(t.insert,o.insert)){l.retain(n,s.default.diff(t.attributes,o.attributes))}else{l.push(o).delete(n)}break}e-=n}}));return l.chop()}eachLine(t,e="\n"){const i=new o.default(this.ops);let n=new u;let r=0;while(i.hasNext()){if(i.peekType()!=="insert"){return}const s=i.peek();const o=l.default.length(s)-i.peekLength();const a=typeof s.insert==="string"?s.insert.indexOf(e,o)-o:-1;if(a<0){n.push(i.next())}else if(a>0){n.push(i.next(a))}else{if(t(n,i.next(1).attributes||{},r)===false){return}r+=1;n=new u}}if(n.length()>0){t(n,{},r)}}invert(t){const e=new u;this.reduce(((i,n)=>{if(n.insert){e.delete(l.default.length(n))}else if(typeof n.retain==="number"&&n.attributes==null){e.retain(n.retain);return i+n.retain}else if(n.delete||typeof n.retain==="number"){const r=n.delete||n.retain;const o=t.slice(i,i+r);o.forEach((t=>{if(n.delete){e.push(t)}else if(n.retain&&n.attributes){e.retain(l.default.length(t),s.default.invert(n.attributes,t.attributes))}}));return i+r}else if(typeof n.retain==="object"&&n.retain!==null){const r=t.slice(i,i+1);const l=new o.default(r.ops).next();const[a,h,f]=c(n.retain,l.insert);const d=u.getHandler(a);e.retain({[a]:d.invert(h,f)},s.default.invert(n.attributes,l.attributes));return i+1}return i}),0);return e.chop()}transform(t,e=false){e=!!e;if(typeof t==="number"){return this.transformPosition(t,e)}const i=t;const n=new o.default(this.ops);const r=new o.default(i.ops);const a=new u;while(n.hasNext()||r.hasNext()){if(n.peekType()==="insert"&&(e||r.peekType()!=="insert")){a.retain(l.default.length(n.next()))}else if(r.peekType()==="insert"){a.push(r.next())}else{const t=Math.min(n.peekLength(),r.peekLength());const i=n.next(t);const l=r.next(t);if(i.delete){continue}else if(l.delete){a.push(l)}else{const n=i.retain;const r=l.retain;let o=typeof r==="object"&&r!==null?r:t;if(typeof n==="object"&&n!==null&&typeof r==="object"&&r!==null){const t=Object.keys(n)[0];if(t===Object.keys(r)[0]){const i=u.getHandler(t);if(i){o={[t]:i.transform(n[t],r[t],e)}}}}a.retain(o,s.default.transform(i.attributes,l.attributes,e))}}}return a.chop()}transformPosition(t,e=false){e=!!e;const i=new o.default(this.ops);let n=0;while(i.hasNext()&&n<=t){const r=i.peekLength();const s=i.peekType();i.next();if(s==="delete"){t-=Math.min(r,t-n);continue}else if(s==="insert"&&(n<t||!e)){t+=r}n+=r}return t}}u.Op=l.default;u.OpIterator=o.default;u.AttributeMap=s.default;u.handlers={};e.default=u;{t.exports=u;t.exports.default=u}})(Pl,Pl.exports);const $o=s(Pl.exports);class Co extends Sl{static value(){return undefined}optimize(){if(this.prev||this.next){this.remove()}}length(){return 0}value(){return""}}Co.blotName="break";Co.tagName="BR";class _o extends Fl{}const So={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function zo(t){return t.replace(/[&<>"']/g,(t=>So[t]))}class Bo extends Ml{static allowedChildren=[Bo,Co,Sl,_o];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(t,e){const i=Bo.order.indexOf(t);const n=Bo.order.indexOf(e);if(i>=0||n>=0){return i-n}if(t===e){return 0}if(t<e){return-1}return 1}formatAt(t,e,i,n){if(Bo.compare(this.statics.blotName,i)<0&&this.scroll.query(i,el.BLOT)){const r=this.isolate(t,e);if(n){r.wrap(i,n)}}else{super.formatAt(t,e,i,n)}}optimize(t){super.optimize(t);if(this.parent instanceof Bo&&Bo.compare(this.statics.blotName,this.parent.statics.blotName)>0){const t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t);t.wrap(this)}}}const Io=1;class Ro extends Tl{cache={};delta(){if(this.cache.delta==null){this.cache.delta=Ho(this)}return this.cache.delta}deleteAt(t,e){super.deleteAt(t,e);this.cache={}}formatAt(t,e,i,n){if(e<=0)return;if(this.scroll.query(i,el.BLOCK)){if(t+e===this.length()){this.format(i,n)}}else{super.formatAt(t,Math.min(e,this.length()-t-1),i,n)}this.cache={}}insertAt(t,e,i){if(i!=null){super.insertAt(t,e,i);this.cache={};return}if(e.length===0)return;const n=e.split("\n");const r=n.shift();if(r.length>0){if(t<this.length()-1||this.children.tail==null){super.insertAt(Math.min(t,this.length()-1),r)}else{this.children.tail.insertAt(this.children.tail.length(),r)}this.cache={}}let s=this;n.reduce(((t,e)=>{s=s.split(t,true);s.insertAt(0,e);return e.length}),t+r.length)}insertBefore(t,e){const{head:i}=this.children;super.insertBefore(t,e);if(i instanceof Co){i.remove()}this.cache={}}length(){if(this.cache.length==null){this.cache.length=super.length()+Io}return this.cache.length}moveChildren(t,e){super.moveChildren(t,e);this.cache={}}optimize(t){super.optimize(t);this.cache={}}path(t){return super.path(t,true)}removeChild(t){super.removeChild(t);this.cache={}}split(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(e&&(t===0||t>=this.length()-Io)){const e=this.clone();if(t===0){this.parent.insertBefore(e,this);return this}this.parent.insertBefore(e,this.next);return e}const i=super.split(t,e);this.cache={};return i}}Ro.blotName="block";Ro.tagName="P";Ro.defaultChild=Co;Ro.allowedChildren=[Co,Bo,Sl,_o];class Do extends Sl{attach(){super.attach();this.attributes=new dl(this.domNode)}delta(){return(new $o).insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,e){const i=this.scroll.query(t,el.BLOCK_ATTRIBUTE);if(i!=null){this.attributes.attribute(i,e)}}formatAt(t,e,i,n){this.format(i,n)}insertAt(t,e,i){if(i!=null){super.insertAt(t,e,i);return}const n=e.split("\n");const r=n.pop();const s=n.map((t=>{const e=this.scroll.create(Ro.blotName);e.insertAt(0,t);return e}));const l=this.split(t);s.forEach((t=>{this.parent.insertBefore(t,l)}));if(r){this.parent.insertBefore(this.scroll.create("text",r),l)}}}Do.scope=el.BLOCK_BLOT;function Ho(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;return t.descendants(wl).reduce(((t,i)=>{if(i.length()===0){return t}return t.insert(i.value(),Vo(i,{},e))}),new $o).insert("\n",Vo(t))}function Vo(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};let i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;if(t==null)return e;if("formats"in t&&typeof t.formats==="function"){e={...e,...t.formats()};if(i){delete e["code-token"]}}if(t.parent==null||t.parent.statics.blotName==="scroll"||t.parent.statics.scope!==t.statics.scope){return e}return Vo(t.parent,e,i)}class Fo extends Sl{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\ufeff";static value(){return undefined}constructor(t,e,i){super(t,e);this.selection=i;this.textNode=document.createTextNode(Fo.CONTENTS);this.domNode.appendChild(this.textNode);this.savedLength=0}detach(){if(this.parent!=null)this.parent.removeChild(this)}format(t,e){if(this.savedLength!==0){super.format(t,e);return}let i=this;let n=0;while(i!=null&&i.statics.scope!==el.BLOCK_BLOT){n+=i.offset(i.parent);i=i.parent}if(i!=null){this.savedLength=Fo.CONTENTS.length;i.optimize();i.formatAt(n,Fo.CONTENTS.length,t,e);this.savedLength=0}}index(t,e){if(t===this.textNode)return 0;return super.index(t,e)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove();this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const t=this.selection.getNativeRange();while(this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode){this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode)}const e=this.prev instanceof _o?this.prev:null;const i=e?e.length():0;const n=this.next instanceof _o?this.next:null;const r=n?n.text:"";const{textNode:s}=this;const l=s.data.split(Fo.CONTENTS).join("");s.data=Fo.CONTENTS;let o;if(e){o=e;if(l||n){e.insertAt(e.length(),l+r);if(n){n.remove()}}}else if(n){o=n;n.insertAt(0,l)}else{const t=document.createTextNode(l);o=this.scroll.create(t);this.parent.insertBefore(o,this)}this.remove();if(t){const r=(t,r)=>{if(e&&t===e.domNode){return r}if(t===s){return i+r-1}if(n&&t===n.domNode){return i+l.length+r}return null};const a=r(t.start.node,t.start.offset);const c=r(t.end.node,t.end.offset);if(a!==null&&c!==null){return{startNode:o.domNode,startOffset:a,endNode:o.domNode,endOffset:c}}}return null}update(t,e){if(t.some((t=>t.type==="characterData"&&t.target===this.textNode))){const t=this.restore();if(t)e.range=t}}optimize(t){super.optimize(t);let{parent:e}=this;while(e){if(e.domNode.tagName==="A"){this.savedLength=Fo.CONTENTS.length;e.isolate(this.offset(e),this.length()).unwrap();this.savedLength=0;break}e=e.parent}}value(){return""}}var Uo={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,i="~";function n(){}if(Object.create){n.prototype=Object.create(null);if(!(new n).__proto__)i=false}function r(t,e,i){this.fn=t;this.context=e;this.once=i||false}function s(t,e,n,s,l){if(typeof n!=="function"){throw new TypeError("The listener must be a function")}var o=new r(n,s||t,l),a=i?i+e:e;if(!t._events[a])t._events[a]=o,t._eventsCount++;else if(!t._events[a].fn)t._events[a].push(o);else t._events[a]=[t._events[a],o];return t}function l(t,e){if(--t._eventsCount===0)t._events=new n;else delete t._events[e]}function o(){this._events=new n;this._eventsCount=0}o.prototype.eventNames=function t(){var n=[],r,s;if(this._eventsCount===0)return n;for(s in r=this._events){if(e.call(r,s))n.push(i?s.slice(1):s)}if(Object.getOwnPropertySymbols){return n.concat(Object.getOwnPropertySymbols(r))}return n};o.prototype.listeners=function t(e){var n=i?i+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var s=0,l=r.length,o=new Array(l);s<l;s++){o[s]=r[s].fn}return o};o.prototype.listenerCount=function t(e){var n=i?i+e:e,r=this._events[n];if(!r)return 0;if(r.fn)return 1;return r.length};o.prototype.emit=function t(e,n,r,s,l,o){var a=i?i+e:e;if(!this._events[a])return false;var c=this._events[a],u=arguments.length,h,f;if(c.fn){if(c.once)this.removeListener(e,c.fn,undefined,true);switch(u){case 1:return c.fn.call(c.context),true;case 2:return c.fn.call(c.context,n),true;case 3:return c.fn.call(c.context,n,r),true;case 4:return c.fn.call(c.context,n,r,s),true;case 5:return c.fn.call(c.context,n,r,s,l),true;case 6:return c.fn.call(c.context,n,r,s,l,o),true}for(f=1,h=new Array(u-1);f<u;f++){h[f-1]=arguments[f]}c.fn.apply(c.context,h)}else{var d=c.length,p;for(f=0;f<d;f++){if(c[f].once)this.removeListener(e,c[f].fn,undefined,true);switch(u){case 1:c[f].fn.call(c[f].context);break;case 2:c[f].fn.call(c[f].context,n);break;case 3:c[f].fn.call(c[f].context,n,r);break;case 4:c[f].fn.call(c[f].context,n,r,s);break;default:if(!h)for(p=1,h=new Array(u-1);p<u;p++){h[p-1]=arguments[p]}c[f].fn.apply(c[f].context,h)}}}return true};o.prototype.on=function t(e,i,n){return s(this,e,i,n,false)};o.prototype.once=function t(e,i,n){return s(this,e,i,n,true)};o.prototype.removeListener=function t(e,n,r,s){var o=i?i+e:e;if(!this._events[o])return this;if(!n){l(this,o);return this}var a=this._events[o];if(a.fn){if(a.fn===n&&(!s||a.once)&&(!r||a.context===r)){l(this,o)}}else{for(var c=0,u=[],h=a.length;c<h;c++){if(a[c].fn!==n||s&&!a[c].once||r&&a[c].context!==r){u.push(a[c])}}if(u.length)this._events[o]=u.length===1?u[0]:u;else l(this,o)}return this};o.prototype.removeAllListeners=function t(e){var r;if(e){r=i?i+e:e;if(this._events[r])l(this,r)}else{this._events=new n;this._eventsCount=0}return this};o.prototype.off=o.prototype.removeListener;o.prototype.addListener=o.prototype.on;o.prefixed=i;o.EventEmitter=o;{t.exports=o}})(Uo);const Po=new WeakMap;const Zo=["error","warn","log","info"];let Ko="warn";function Wo(t){if(Ko){if(Zo.indexOf(t)<=Zo.indexOf(Ko)){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++){i[n-1]=arguments[n]}console[t](...i)}}}function Go(t){return Zo.reduce(((e,i)=>{e[i]=Wo.bind(console,i,t);return e}),{})}Go.level=t=>{Ko=t};Wo.level=Go.level;const Qo=Go("quill:events");const Yo=["selectionchange","mousedown","mouseup","click"];Yo.forEach((t=>{document.addEventListener(t,(function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++){e[i]=arguments[i]}Array.from(document.querySelectorAll(".ql-container")).forEach((t=>{const i=Po.get(t);if(i&&i.emitter){i.emitter.handleDOM(...e)}}))}))}));class Jo extends Uo.exports.EventEmitter{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super();this.domListeners={};this.on("error",Qo.error)}emit(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++){e[i]=arguments[i]}Qo.log.call(Qo,...e);return super.emit(...e)}handleDOM(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++){i[n-1]=arguments[n]}(this.domListeners[t.type]||[]).forEach((e=>{let{node:n,handler:r}=e;if(t.target===n||n.contains(t.target)){r(t,...i)}}))}listenDOM(t,e,i){if(!this.domListeners[t]){this.domListeners[t]=[]}this.domListeners[t].push({node:e,handler:i})}}const Xo=Go("quill:selection");class ta{constructor(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this.index=t;this.length=e}}class ea{constructor(t,e){this.emitter=e;this.scroll=t;this.composing=false;this.mouseDown=false;this.root=this.scroll.domNode;this.cursor=this.scroll.create("cursor",this);this.savedRange=new ta(0,0);this.lastRange=this.savedRange;this.lastNative=null;this.handleComposition();this.handleDragging();this.emitter.listenDOM("selectionchange",document,(()=>{if(!this.mouseDown&&!this.composing){setTimeout(this.update.bind(this,Jo.sources.USER),1)}}));this.emitter.on(Jo.events.SCROLL_BEFORE_UPDATE,(()=>{if(!this.hasFocus())return;const t=this.getNativeRange();if(t==null)return;if(t.start.node===this.cursor.textNode)return;this.emitter.once(Jo.events.SCROLL_UPDATE,((e,i)=>{try{if(this.root.contains(t.start.node)&&this.root.contains(t.end.node)){this.setNativeRange(t.start.node,t.start.offset,t.end.node,t.end.offset)}const n=i.some((t=>t.type==="characterData"||t.type==="childList"||t.type==="attributes"&&t.target===this.root));this.update(n?Jo.sources.SILENT:e)}catch(t){}}))}));this.emitter.on(Jo.events.SCROLL_OPTIMIZE,((t,e)=>{if(e.range){const{startNode:t,startOffset:i,endNode:n,endOffset:r}=e.range;this.setNativeRange(t,i,n,r);this.update(Jo.sources.SILENT)}}));this.update(Jo.sources.SILENT)}handleComposition(){this.emitter.on(Jo.events.COMPOSITION_BEFORE_START,(()=>{this.composing=true}));this.emitter.on(Jo.events.COMPOSITION_END,(()=>{this.composing=false;if(this.cursor.parent){const t=this.cursor.restore();if(!t)return;setTimeout((()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)}),1)}}))}handleDragging(){this.emitter.listenDOM("mousedown",document.body,(()=>{this.mouseDown=true}));this.emitter.listenDOM("mouseup",document.body,(()=>{this.mouseDown=false;this.update(Jo.sources.USER)}))}focus(){if(this.hasFocus())return;this.root.focus({preventScroll:true});this.setRange(this.savedRange)}format(t,e){this.scroll.update();const i=this.getNativeRange();if(i==null||!i.native.collapsed||this.scroll.query(t,el.BLOCK))return;if(i.start.node!==this.cursor.textNode){const t=this.scroll.find(i.start.node,false);if(t==null)return;if(t instanceof wl){const e=t.split(i.start.offset);t.parent.insertBefore(this.cursor,e)}else{t.insertBefore(this.cursor,i.start.node)}this.cursor.attach()}this.cursor.format(t,e);this.scroll.optimize();this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length);this.update()}getBounds(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;const i=this.scroll.length();t=Math.min(t,i-1);e=Math.min(t+e,i-1)-t;let n;let[r,s]=this.scroll.leaf(t);if(r==null)return null;if(e>0&&s===r.length()){const[e]=this.scroll.leaf(t+1);if(e){const[i]=this.scroll.line(t);const[n]=this.scroll.line(t+1);if(i===n){r=e;s=0}}}[n,s]=r.position(s,true);const l=document.createRange();if(e>0){l.setStart(n,s);[r,s]=this.scroll.leaf(t+e);if(r==null)return null;[n,s]=r.position(s,true);l.setEnd(n,s);return l.getBoundingClientRect()}let o="left";let a;if(n instanceof Text){if(!n.data.length){return null}if(s<n.data.length){l.setStart(n,s);l.setEnd(n,s+1)}else{l.setStart(n,s-1);l.setEnd(n,s);o="right"}a=l.getBoundingClientRect()}else{if(!(r.domNode instanceof Element))return null;a=r.domNode.getBoundingClientRect();if(s>0)o="right"}return{bottom:a.top+a.height,height:a.height,left:a[o],right:a[o],top:a.top,width:0}}getNativeRange(){const t=document.getSelection();if(t==null||t.rangeCount<=0)return null;const e=t.getRangeAt(0);if(e==null)return null;const i=this.normalizeNative(e);Xo.info("getNativeRange",i);return i}getRange(){const t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected){return[null,null]}const e=this.getNativeRange();if(e==null)return[null,null];const i=this.normalizedToRange(e);return[i,e]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&ia(this.root,document.activeElement)}normalizedToRange(t){const e=[[t.start.node,t.start.offset]];if(!t.native.collapsed){e.push([t.end.node,t.end.offset])}const i=e.map((t=>{const[e,i]=t;const n=this.scroll.find(e,true);const r=n.offset(this.scroll);if(i===0){return r}if(n instanceof wl){return r+n.index(e,i)}return r+n.length()}));const n=Math.min(Math.max(...i),this.scroll.length()-1);const r=Math.min(n,...i);return new ta(r,n-r)}normalizeNative(t){if(!ia(this.root,t.startContainer)||!t.collapsed&&!ia(this.root,t.endContainer)){return null}const e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};[e.start,e.end].forEach((t=>{let{node:e,offset:i}=t;while(!(e instanceof Text)&&e.childNodes.length>0){if(e.childNodes.length>i){e=e.childNodes[i];i=0}else if(e.childNodes.length===i){e=e.lastChild;if(e instanceof Text){i=e.data.length}else if(e.childNodes.length>0){i=e.childNodes.length}else{i=e.childNodes.length+1}}else{break}}t.node=e;t.offset=i}));return e}rangeToNative(t){const e=this.scroll.length();const i=(t,i)=>{t=Math.min(e-1,t);const[n,r]=this.scroll.leaf(t);return n?n.position(r,i):[null,-1]};return[...i(t.index,false),...i(t.index+t.length,true)]}setNativeRange(t,e){let i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:t;let n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:e;let r=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;Xo.info("setNativeRange",t,e,i,n);if(t!=null&&(this.root.parentNode==null||t.parentNode==null||i.parentNode==null)){return}const s=document.getSelection();if(s==null)return;if(t!=null){if(!this.hasFocus())this.root.focus({preventScroll:true});const{native:l}=this.getNativeRange()||{};if(l==null||r||t!==l.startContainer||e!==l.startOffset||i!==l.endContainer||n!==l.endOffset){if(t instanceof Element&&t.tagName==="BR"){e=Array.from(t.parentNode.childNodes).indexOf(t);t=t.parentNode}if(i instanceof Element&&i.tagName==="BR"){n=Array.from(i.parentNode.childNodes).indexOf(i);i=i.parentNode}const r=document.createRange();r.setStart(t,e);r.setEnd(i,n);s.removeAllRanges();s.addRange(r)}}else{s.removeAllRanges();this.root.blur()}}setRange(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Jo.sources.API;if(typeof e==="string"){i=e;e=false}Xo.info("setRange",t);if(t!=null){const i=this.rangeToNative(t);this.setNativeRange(...i,e)}else{this.setNativeRange(null)}this.update(i)}update(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Jo.sources.USER;const e=this.lastRange;const[i,n]=this.getRange();this.lastRange=i;this.lastNative=n;if(this.lastRange!=null){this.savedRange=this.lastRange}if(!Js(e,this.lastRange)){if(!this.composing&&n!=null&&n.native.collapsed&&n.start.node!==this.cursor.textNode){const t=this.cursor.restore();if(t){this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)}}const i=[Jo.events.SELECTION_CHANGE,ns(this.lastRange),ns(e),t];this.emitter.emit(Jo.events.EDITOR_CHANGE,...i);if(t!==Jo.sources.SILENT){this.emitter.emit(...i)}}}}function ia(t,e){return t.contains(e)}const na=/^[ -~]*$/;class ra{constructor(t){this.scroll=t;this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();const i=ca(t);const n=new $o;const r=ha(i.ops.slice());r.reduce(((t,i)=>{const r=Pl.exports.Op.length(i);let s=i.attributes||{};let l=false;let o=false;if(i.insert!=null){n.retain(r);if(typeof i.insert==="string"){const n=i.insert;o=!n.endsWith("\n")&&(e<=t||!!this.scroll.descendant(Do,t)[0]);this.scroll.insertAt(t,n);const[r,l]=this.scroll.line(t);let a=tl({},Vo(r));if(r instanceof Ro){const[t]=r.descendant(wl,l);if(t){a=tl(a,Vo(t))}}s=Pl.exports.AttributeMap.diff(a,s)||{}}else if(typeof i.insert==="object"){const n=Object.keys(i.insert)[0];if(n==null)return t;const r=this.scroll.query(n,el.INLINE)!=null;if(r){if(e<=t||!!this.scroll.descendant(Do,t)[0]){o=true}}else if(t>0){const[e,i]=this.scroll.descendant(wl,t-1);if(e instanceof _o){const t=e.value();if(t[i]!=="\n"){l=true}}else if(e instanceof Sl&&e.statics.scope===el.INLINE_BLOT){l=true}}this.scroll.insertAt(t,n,i.insert[n]);if(r){const[e]=this.scroll.descendant(wl,t);if(e){const t=tl({},Vo(e));s=Pl.exports.AttributeMap.diff(t,s)||{}}}}e+=r}else{n.push(i);if(i.retain!==null&&typeof i.retain==="object"){const e=Object.keys(i.retain)[0];if(e==null)return t;this.scroll.updateEmbedAt(t,e,i.retain[e])}}Object.keys(s).forEach((e=>{this.scroll.formatAt(t,r,e,s[e])}));const a=l?1:0;const c=o?1:0;e+=a+c;n.retain(a);n.delete(c);return t+r+a+c}),0);n.reduce(((t,e)=>{if(typeof e.delete==="number"){this.scroll.deleteAt(t,e.delete);return t}return t+Pl.exports.Op.length(e)}),0);this.scroll.batchEnd();this.scroll.optimize();return this.update(i)}deleteText(t,e){this.scroll.deleteAt(t,e);return this.update((new $o).retain(t).delete(e))}formatLine(t,e){let i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};this.scroll.update();Object.keys(i).forEach((n=>{this.scroll.lines(t,Math.max(e,1)).forEach((t=>{t.format(n,i[n])}))}));this.scroll.optimize();const n=(new $o).retain(t).retain(e,ns(i));return this.update(n)}formatText(t,e){let i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};Object.keys(i).forEach((n=>{this.scroll.formatAt(t,e,n,i[n])}));const n=(new $o).retain(t).retain(e,ns(i));return this.update(n)}getContents(t,e){return this.delta.slice(t,t+e)}getDelta(){return this.scroll.lines().reduce(((t,e)=>t.concat(e.delta())),new $o)}getFormat(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;let i=[];let n=[];if(e===0){this.scroll.path(t).forEach((t=>{const[e]=t;if(e instanceof Ro){i.push(e)}else if(e instanceof wl){n.push(e)}}))}else{i=this.scroll.lines(t,e);n=this.scroll.descendants(wl,t,e)}const[r,s]=[i,n].map((t=>{const e=t.shift();if(e==null)return{};let i=Vo(e);while(Object.keys(i).length>0){const e=t.shift();if(e==null)return i;i=oa(Vo(e),i)}return i}));return{...r,...s}}getHTML(t,e){const[i,n]=this.scroll.line(t);if(i){const r=i.length();const s=i.length()>=n+e;if(s&&!(n===0&&e===r)){return la(i,n,e,true)}return la(this.scroll,t,e,true)}return""}getText(t,e){return this.getContents(t,e).filter((t=>typeof t.insert==="string")).map((t=>t.insert)).join("")}insertContents(t,e){const i=ca(e);const n=(new $o).retain(t).concat(i);this.scroll.insertContents(t,i);return this.update(n)}insertEmbed(t,e,i){this.scroll.insertAt(t,e,i);return this.update((new $o).retain(t).insert({[e]:i}))}insertText(t,e){let i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n");this.scroll.insertAt(t,e);Object.keys(i).forEach((n=>{this.scroll.formatAt(t,e.length,n,i[n])}));return this.update((new $o).retain(t).insert(e,ns(i)))}isBlank(){if(this.scroll.children.length===0)return true;if(this.scroll.children.length>1)return false;const t=this.scroll.children.head;if(t?.statics.blotName!==Ro.blotName)return false;const e=t;if(e.children.length>1)return false;return e.children.head instanceof Co}removeFormat(t,e){const i=this.getText(t,e);const[n,r]=this.scroll.line(t+e);let s=0;let l=new $o;if(n!=null){s=n.length()-r;l=n.delta().slice(r,r+s-1).insert("\n")}const o=this.getContents(t,e+s);const a=o.diff((new $o).insert(i).concat(l));const c=(new $o).retain(t).concat(a);return this.applyDelta(c)}update(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];let i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;const n=this.delta;if(e.length===1&&e[0].type==="characterData"&&e[0].target.data.match(na)&&this.scroll.find(e[0].target)){const r=this.scroll.find(e[0].target);const s=Vo(r);const l=r.offset(this.scroll);const o=e[0].oldValue.replace(Fo.CONTENTS,"");const a=(new $o).insert(o);const c=(new $o).insert(r.value());const u=i&&{oldRange:ua(i.oldRange,-l),newRange:ua(i.newRange,-l)};const h=(new $o).retain(l).concat(a.diff(c,u));t=h.reduce(((t,e)=>{if(e.insert){return t.insert(e.insert,s)}return t.push(e)}),new $o);this.delta=n.compose(t)}else{this.delta=this.getDelta();if(!t||!Js(n.compose(t),this.delta)){t=n.diff(this.delta,i)}}return t}}function sa(t,e,i){if(t.length===0){const[t]=aa(i.pop());if(e<=0){return`</li></${t}>`}return`</li></${t}>${sa([],e-1,i)}`}const[{child:n,offset:r,length:s,indent:l,type:o},...a]=t;const[c,u]=aa(o);if(l>e){i.push(o);if(l===e+1){return`<${c}><li${u}>${la(n,r,s)}${sa(a,l,i)}`}return`<${c}><li>${sa(t,e+1,i)}`}const h=i[i.length-1];if(l===e&&o===h){return`</li><li${u}>${la(n,r,s)}${sa(a,l,i)}`}const[f]=aa(i.pop());return`</li></${f}>${sa(t,e-1,i)}`}function la(t,e,i){let n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if("html"in t&&typeof t.html==="function"){return t.html(e,i)}if(t instanceof _o){const n=zo(t.value().slice(e,e+i));return n.replaceAll(" ","&nbsp;")}if(t instanceof xl){if(t.statics.blotName==="list-container"){const n=[];t.children.forEachAt(e,i,((t,e,i)=>{const r="formats"in t&&typeof t.formats==="function"?t.formats():{};n.push({child:t,offset:e,length:i,indent:r.indent||0,type:r.list})}));return sa(n,-1,[])}const r=[];t.children.forEachAt(e,i,((t,e,i)=>{r.push(la(t,e,i))}));if(n||t.statics.blotName==="list"){return r.join("")}const{outerHTML:s,innerHTML:l}=t.domNode;const[o,a]=s.split(`>${l}<`);if(o==="<table"){return`<table style="border: 1px solid #000;">${r.join("")}<${a}`}return`${o}>${r.join("")}<${a}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function oa(t,e){return Object.keys(e).reduce(((i,n)=>{if(t[n]==null)return i;const r=e[n];if(r===t[n]){i[n]=r}else if(Array.isArray(r)){if(r.indexOf(t[n])<0){i[n]=r.concat([t[n]])}else{i[n]=r}}else{i[n]=[r,t[n]]}return i}),{})}function aa(t){const e=t==="ordered"?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function ca(t){return t.reduce(((t,e)=>{if(typeof e.insert==="string"){const i=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return t.insert(i,e.attributes)}return t.push(e)}),new $o)}function ua(t,e){let{index:i,length:n}=t;return new ta(i+e,n)}function ha(t){const e=[];t.forEach((t=>{if(typeof t.insert==="string"){const i=t.insert.split("\n");i.forEach(((i,n)=>{if(n)e.push({insert:"\n",attributes:t.attributes});if(i)e.push({insert:i,attributes:t.attributes})}))}else{e.push(t)}}));return e}class fa{static DEFAULTS={};constructor(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.quill=t;this.options=e}}const da="\ufeff";class pa extends Sl{constructor(t,e){super(t,e);this.contentNode=document.createElement("span");this.contentNode.setAttribute("contenteditable","false");Array.from(this.domNode.childNodes).forEach((t=>{this.contentNode.appendChild(t)}));this.leftGuard=document.createTextNode(da);this.rightGuard=document.createTextNode(da);this.domNode.appendChild(this.leftGuard);this.domNode.appendChild(this.contentNode);this.domNode.appendChild(this.rightGuard)}index(t,e){if(t===this.leftGuard)return 0;if(t===this.rightGuard)return 1;return super.index(t,e)}restore(t){let e=null;let i;const n=t.data.split(da).join("");if(t===this.leftGuard){if(this.prev instanceof _o){const t=this.prev.length();this.prev.insertAt(t,n);e={startNode:this.prev.domNode,startOffset:t+n.length}}else{i=document.createTextNode(n);this.parent.insertBefore(this.scroll.create(i),this);e={startNode:i,startOffset:n.length}}}else if(t===this.rightGuard){if(this.next instanceof _o){this.next.insertAt(0,n);e={startNode:this.next.domNode,startOffset:n.length}}else{i=document.createTextNode(n);this.parent.insertBefore(this.scroll.create(i),this.next);e={startNode:i,startOffset:n.length}}}t.data=da;return e}update(t,e){t.forEach((t=>{if(t.type==="characterData"&&(t.target===this.leftGuard||t.target===this.rightGuard)){const i=this.restore(t.target);if(i)e.range=i}}))}}class qa{isComposing=false;constructor(t,e){this.scroll=t;this.emitter=e;this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",(t=>{if(!this.isComposing){this.handleCompositionStart(t)}}));this.scroll.domNode.addEventListener("compositionend",(t=>{if(this.isComposing){queueMicrotask((()=>{this.handleCompositionEnd(t)}))}}))}handleCompositionStart(t){const e=t.target instanceof Node?this.scroll.find(t.target,true):null;if(e&&!(e instanceof pa)){this.emitter.emit(Jo.events.COMPOSITION_BEFORE_START,t);this.scroll.batchStart();this.emitter.emit(Jo.events.COMPOSITION_START,t);this.isComposing=true}}handleCompositionEnd(t){this.emitter.emit(Jo.events.COMPOSITION_BEFORE_END,t);this.scroll.batchEnd();this.emitter.emit(Jo.events.COMPOSITION_END,t);this.isComposing=false}}class ba{static DEFAULTS={modules:{}};static themes={default:ba};modules={};constructor(t,e){this.quill=t;this.options=e}init(){Object.keys(this.options.modules).forEach((t=>{if(this.modules[t]==null){this.addModule(t)}}))}addModule(t){const e=this.quill.constructor.import(`modules/${t}`);this.modules[t]=new e(this.quill,this.options.modules[t]||{});return this.modules[t]}}const va=t=>t.parentElement||t.getRootNode().host||null;const wa=t=>{const e=t.getBoundingClientRect();const i="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1;const n="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*i,bottom:e.top+t.clientHeight*n,left:e.left}};const ma=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e};const ga=(t,e,i,n,r,s)=>{if(t<i&&e>n){return 0}if(t<i){return-(i-t+r)}if(e>n){return e-t>n-i?t+r-i:e-n+s}return 0};const ya=(t,e)=>{const i=t.ownerDocument;let n=e;let r=t;while(r){const t=r===i.body;const e=t?{top:0,right:window.visualViewport?.width??i.documentElement.clientWidth,bottom:window.visualViewport?.height??i.documentElement.clientHeight,left:0}:wa(r);const s=getComputedStyle(r);const l=ga(n.left,n.right,e.left,e.right,ma(s.scrollPaddingLeft),ma(s.scrollPaddingRight));const o=ga(n.top,n.bottom,e.top,e.bottom,ma(s.scrollPaddingTop),ma(s.scrollPaddingBottom));if(l||o){if(t){i.defaultView?.scrollBy(l,o)}else{const{scrollLeft:t,scrollTop:e}=r;if(o){r.scrollTop+=o}if(l){r.scrollLeft+=l}const i=r.scrollLeft-t;const s=r.scrollTop-e;n={left:n.left-i,top:n.top-s,right:n.right-i,bottom:n.bottom-s}}}r=t||s.position==="fixed"?null:va(r)}};const ka=100;const xa=["block","break","cursor","inline","scroll","text"];const ja=(t,e,i)=>{const n=new sl;xa.forEach((t=>{const i=e.query(t);if(i)n.register(i)}));t.forEach((t=>{let r=e.query(t);if(!r){i.error(`Cannot register "${t}" specified in "formats" config. Are you sure it was registered?`)}let s=0;while(r){n.register(r);r="blotName"in r?r.requiredContainer??null:null;s+=1;if(s>ka){i.error(`Cycle detected in registering blot requiredContainer: "${t}"`);break}}}));return n};const Aa=Go("quill");const Oa=new sl;xl.uiClass="ql-ui";class Ma{static DEFAULTS={bounds:null,modules:{clipboard:true,keyboard:true,history:true,uploader:true},placeholder:"",readOnly:false,registry:Oa,theme:"default"};static events=Jo.events;static sources=Jo.sources;static version="2.0.3";static imports={delta:$o,parchment:Ul,"core/module":fa,"core/theme":ba};static debug(t){if(t===true){t="log"}Go.level(t)}static find(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return Po.get(t)||Oa.find(t,e)}static import(t){if(this.imports[t]==null){Aa.error(`Cannot import ${t}. Are you sure it was registered?`)}return this.imports[t]}static register(){if(typeof(arguments.length<=0?undefined:arguments[0])!=="string"){const t=arguments.length<=0?undefined:arguments[0];const e=!!(arguments.length<=1?undefined:arguments[1]);const i="attrName"in t?t.attrName:t.blotName;if(typeof i==="string"){this.register(`formats/${i}`,t,e)}else{Object.keys(t).forEach((i=>{this.register(i,t[i],e)}))}}else{const t=arguments.length<=0?undefined:arguments[0];const e=arguments.length<=1?undefined:arguments[1];const i=!!(arguments.length<=2?undefined:arguments[2]);if(this.imports[t]!=null&&!i){Aa.warn(`Overwriting ${t} with`,e)}this.imports[t]=e;if((t.startsWith("blots/")||t.startsWith("formats/"))&&e&&typeof e!=="boolean"&&e.blotName!=="abstract"){Oa.register(e)}if(typeof e.register==="function"){e.register(Oa)}}}constructor(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.options=La(t,e);this.container=this.options.container;if(this.container==null){Aa.error("Invalid Quill container",t);return}if(this.options.debug){Ma.debug(this.options.debug)}const i=this.container.innerHTML.trim();this.container.classList.add("ql-container");this.container.innerHTML="";Po.set(this.container,this);this.root=this.addContainer("ql-editor");this.root.classList.add("ql-blank");this.emitter=new Jo;const n=Dl.blotName;const r=this.options.registry.query(n);if(!r||!("blotName"in r)){throw new Error(`Cannot initialize Quill without "${n}" blot`)}this.scroll=new r(this.options.registry,this.root,{emitter:this.emitter});this.editor=new ra(this.scroll);this.selection=new ea(this.scroll,this.emitter);this.composition=new qa(this.scroll,this.emitter);this.theme=new this.options.theme(this,this.options);this.keyboard=this.theme.addModule("keyboard");this.clipboard=this.theme.addModule("clipboard");this.history=this.theme.addModule("history");this.uploader=this.theme.addModule("uploader");this.theme.addModule("input");this.theme.addModule("uiNode");this.theme.init();this.emitter.on(Jo.events.EDITOR_CHANGE,(t=>{if(t===Jo.events.TEXT_CHANGE){this.root.classList.toggle("ql-blank",this.editor.isBlank())}}));this.emitter.on(Jo.events.SCROLL_UPDATE,((t,e)=>{const i=this.selection.lastRange;const[n]=this.selection.getRange();const r=i&&n?{oldRange:i,newRange:n}:undefined;$a.call(this,(()=>this.editor.update(null,e,r)),t)}));this.emitter.on(Jo.events.SCROLL_EMBED_UPDATE,((t,e)=>{const i=this.selection.lastRange;const[n]=this.selection.getRange();const r=i&&n?{oldRange:i,newRange:n}:undefined;$a.call(this,(()=>{const i=(new $o).retain(t.offset(this)).retain({[t.statics.blotName]:e});return this.editor.update(i,[],r)}),Ma.sources.USER)}));if(i){const t=this.clipboard.convert({html:`${i}<p><br></p>`,text:"\n"});this.setContents(t)}this.history.clear();if(this.options.placeholder){this.root.setAttribute("data-placeholder",this.options.placeholder)}if(this.options.readOnly){this.disable()}this.allowReadOnlyEdits=false}addContainer(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(typeof t==="string"){const e=t;t=document.createElement("div");t.classList.add(e)}this.container.insertBefore(t,e);return t}blur(){this.selection.setRange(null)}deleteText(t,e,i){[t,e,,i]=Ca(t,e,i);return $a.call(this,(()=>this.editor.deleteText(t,e)),i,t,-1*e)}disable(){this.enable(false)}editReadOnly(t){this.allowReadOnlyEdits=true;const e=t();this.allowReadOnlyEdits=false;return e}enable(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;this.scroll.enable(t);this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.selection.focus();if(!t.preventScroll){this.scrollSelectionIntoView()}}format(t,e){let i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Jo.sources.API;return $a.call(this,(()=>{const i=this.getSelection(true);let n=new $o;if(i==null)return n;if(this.scroll.query(t,el.BLOCK)){n=this.editor.formatLine(i.index,i.length,{[t]:e})}else if(i.length===0){this.selection.format(t,e);return n}else{n=this.editor.formatText(i.index,i.length,{[t]:e})}this.setSelection(i,Jo.sources.SILENT);return n}),i)}formatLine(t,e,i,n,r){let s;[t,e,s,r]=Ca(t,e,i,n,r);return $a.call(this,(()=>this.editor.formatLine(t,e,s)),r,t,0)}formatText(t,e,i,n,r){let s;[t,e,s,r]=Ca(t,e,i,n,r);return $a.call(this,(()=>this.editor.formatText(t,e,s)),r,t,0)}getBounds(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;let i=null;if(typeof t==="number"){i=this.selection.getBounds(t,e)}else{i=this.selection.getBounds(t.index,t.length)}if(!i)return null;const n=this.container.getBoundingClientRect();return{bottom:i.bottom-n.top,height:i.height,left:i.left-n.left,right:i.right-n.left,top:i.top-n.top,width:i.width}}getContents(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.getLength()-t;[t,e]=Ca(t,e);return this.editor.getContents(t,e)}getFormat(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.getSelection(true);let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(typeof t==="number"){return this.editor.getFormat(t,e)}return this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Number.MAX_VALUE;if(typeof t!=="number"){return this.scroll.lines(t.index,t.length)}return this.scroll.lines(t,e)}getModule(t){return this.theme.modules[t]}getSelection(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(t)this.focus();this.update();return this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let e=arguments.length>1?arguments[1]:undefined;if(typeof t==="number"){e=e??this.getLength()-t}[t,e]=Ca(t,e);return this.editor.getHTML(t,e)}getText(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let e=arguments.length>1?arguments[1]:undefined;if(typeof t==="number"){e=e??this.getLength()-t}[t,e]=Ca(t,e);return this.editor.getText(t,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,e,i){let n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:Ma.sources.API;return $a.call(this,(()=>this.editor.insertEmbed(t,e,i)),n,t)}insertText(t,e,i,n,r){let s;[t,,s,r]=Ca(t,0,i,n,r);return $a.call(this,(()=>this.editor.insertText(t,e,s)),r,t,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,e,i){[t,e,,i]=Ca(t,e,i);return $a.call(this,(()=>this.editor.removeFormat(t,e)),i,t)}scrollRectIntoView(t){ya(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead.");this.scrollSelectionIntoView()}scrollSelectionIntoView(){const t=this.selection.lastRange;const e=t&&this.selection.getBounds(t.index,t.length);if(e){this.scrollRectIntoView(e)}}setContents(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Jo.sources.API;return $a.call(this,(()=>{t=new $o(t);const e=this.getLength();const i=this.editor.deleteText(0,e);const n=this.editor.insertContents(0,t);const r=this.editor.deleteText(this.getLength()-1,1);return i.compose(n).compose(r)}),e)}setSelection(t,e,i){if(t==null){this.selection.setRange(null,e||Ma.sources.API)}else{[t,e,,i]=Ca(t,e,i);this.selection.setRange(new ta(Math.max(0,t),e),i);if(i!==Jo.sources.SILENT){this.scrollSelectionIntoView()}}}setText(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Jo.sources.API;const i=(new $o).insert(t);return this.setContents(i,e)}update(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Jo.sources.USER;const e=this.scroll.update(t);this.selection.update(t);return e}updateContents(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Jo.sources.API;return $a.call(this,(()=>{t=new $o(t);return this.editor.applyDelta(t)}),e,true)}}function Ea(t){return typeof t==="string"?document.querySelector(t):t}function Na(t){return Object.entries(t??{}).reduce(((t,e)=>{let[i,n]=e;return{...t,[i]:n===true?{}:n}}),{})}function Ta(t){return Object.fromEntries(Object.entries(t).filter((t=>t[1]!==undefined)))}function La(t,e){const i=Ea(t);if(!i){throw new Error("Invalid Quill container")}const n=!e.theme||e.theme===Ma.DEFAULTS.theme;const r=n?ba:Ma.import(`themes/${e.theme}`);if(!r){throw new Error(`Invalid theme ${e.theme}. Did you register it?`)}const{modules:s,...l}=Ma.DEFAULTS;const{modules:o,...a}=r.DEFAULTS;let c=Na(e.modules);if(c!=null&&c.toolbar&&c.toolbar.constructor!==Object){c={...c,toolbar:{container:c.toolbar}}}const u=tl({},Na(s),Na(o),c);const h={...l,...Ta(a),...Ta(e)};let f=e.registry;if(f){if(e.formats){Aa.warn('Ignoring "formats" option because "registry" is specified')}}else{f=e.formats?ja(e.formats,h.registry,Aa):h.registry}return{...h,registry:f,container:i,theme:r,modules:Object.entries(u).reduce(((t,e)=>{let[i,n]=e;if(!n)return t;const r=Ma.import(`modules/${i}`);if(r==null){Aa.error(`Cannot load ${i} module. Are you sure you registered it?`);return t}return{...t,[i]:tl({},r.DEFAULTS||{},n)}}),{}),bounds:Ea(h.bounds)}}function $a(t,e,i,n){if(!this.isEnabled()&&e===Jo.sources.USER&&!this.allowReadOnlyEdits){return new $o}let r=i==null?null:this.getSelection();const s=this.editor.delta;const l=t();if(r!=null){if(i===true){i=r.index}if(n==null){r=_a(r,l,e)}else if(n!==0){r=_a(r,i,n,e)}this.setSelection(r,Jo.sources.SILENT)}if(l.length()>0){const t=[Jo.events.TEXT_CHANGE,l,s,e];this.emitter.emit(Jo.events.EDITOR_CHANGE,...t);if(e!==Jo.sources.SILENT){this.emitter.emit(...t)}}return l}function Ca(t,e,i,n,r){let s={};if(typeof t.index==="number"&&typeof t.length==="number"){if(typeof e!=="number"){r=n;n=i;i=e;e=t.length;t=t.index}else{e=t.length;t=t.index}}else if(typeof e!=="number"){r=n;n=i;i=e;e=0}if(typeof i==="object"){s=i;r=n}else if(typeof i==="string"){if(n!=null){s[i]=n}else{r=i}}r=r||Jo.sources.API;return[t,e,s,r]}function _a(t,e,i,n){const r=typeof i==="number"?i:0;if(t==null)return null;let s;let l;if(e&&typeof e.transformPosition==="function"){[s,l]=[t.index,t.index+t.length].map((t=>e.transformPosition(t,n!==Jo.sources.USER)))}else{[s,l]=[t.index,t.index+t.length].map((t=>{if(t<e||t===e&&n===Jo.sources.USER)return t;if(r>=0){return t+r}return Math.max(e,t+r)}))}return new ta(s,l-s)}class Sa extends Cl{}function za(t){return t instanceof Ro||t instanceof Do}function Ba(t){return typeof t.updateContent==="function"}class Ia extends Dl{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=Ro;static allowedChildren=[Ro,Do,Sa];constructor(t,e,i){let{emitter:n}=i;super(t,e);this.emitter=n;this.batch=false;this.optimize();this.enable();this.domNode.addEventListener("dragstart",(t=>this.handleDragStart(t)))}batchStart(){if(!Array.isArray(this.batch)){this.batch=[]}}batchEnd(){if(!this.batch)return;const t=this.batch;this.batch=false;this.update(t)}emitMount(t){this.emitter.emit(Jo.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit(Jo.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,e){this.emitter.emit(Jo.events.SCROLL_EMBED_UPDATE,t,e)}deleteAt(t,e){const[i,n]=this.line(t);const[r]=this.line(t+e);super.deleteAt(t,e);if(r!=null&&i!==r&&n>0){if(i instanceof Do||r instanceof Do){this.optimize();return}const t=r.children.head instanceof Co?null:r.children.head;i.moveChildren(r,t);i.remove()}this.optimize()}enable(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,e,i,n){super.formatAt(t,e,i,n);this.optimize()}insertAt(t,e,i){if(t>=this.length()){if(i==null||this.scroll.query(e,el.BLOCK)==null){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t);if(i==null&&e.endsWith("\n")){t.insertAt(0,e.slice(0,-1),i)}else{t.insertAt(0,e,i)}}else{const t=this.scroll.create(e,i);this.appendChild(t)}}else{super.insertAt(t,e,i)}this.optimize()}insertBefore(t,e){if(t.statics.scope===el.INLINE_BLOT){const i=this.scroll.create(this.statics.defaultChild.blotName);i.appendChild(t);super.insertBefore(i,e)}else{super.insertBefore(t,e)}}insertContents(t,e){const i=this.deltaToRenderBlocks(e.concat((new $o).insert("\n")));const n=i.pop();if(n==null)return;this.batchStart();const r=i.shift();if(r){const e=r.type==="block"&&(r.delta.length()===0||!this.descendant(Do,t)[0]&&t<this.length());const i=r.type==="block"?r.delta:(new $o).insert({[r.key]:r.value});Ra(this,t,i);const n=r.type==="block"?1:0;const s=t+i.length()+n;if(e){this.insertAt(s-1,"\n")}const l=Vo(this.line(t)[0]);const o=Pl.exports.AttributeMap.diff(l,r.attributes)||{};Object.keys(o).forEach((t=>{this.formatAt(s-1,1,t,o[t])}));t=s}let[s,l]=this.children.find(t);if(i.length){if(s){s=s.split(l);l=0}i.forEach((t=>{if(t.type==="block"){const e=this.createBlock(t.attributes,s||undefined);Ra(e,0,t.delta)}else{const e=this.create(t.key,t.value);this.insertBefore(e,s||undefined);Object.keys(t.attributes).forEach((i=>{e.format(i,t.attributes[i])}))}}))}if(n.type==="block"&&n.delta.length()){const t=s?s.offset(s.scroll)+l:this.length();Ra(this,t,n.delta)}this.batchEnd();this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(t){const e=this.path(t).pop();if(!e){return[null,-1]}const[i,n]=e;return i instanceof wl?[i,n]:[null,-1]}line(t){if(t===this.length()){return this.line(t-1)}return this.descendant(za,t)}lines(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Number.MAX_VALUE;const i=(t,e,n)=>{let r=[];let s=n;t.children.forEachAt(e,n,((t,e,n)=>{if(za(t)){r.push(t)}else if(t instanceof Cl){r=r.concat(i(t,e,s))}s-=n}));return r};return i(this,t,e)}optimize(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(this.batch)return;super.optimize(t,e);if(t.length>0){this.emitter.emit(Jo.events.SCROLL_OPTIMIZE,t,e)}}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch){if(Array.isArray(t)){this.batch=this.batch.concat(t)}return}let e=Jo.sources.USER;if(typeof t==="string"){e=t}if(!Array.isArray(t)){t=this.observer.takeRecords()}t=t.filter((t=>{let{target:e}=t;const i=this.find(e,true);return i&&!Ba(i)}));if(t.length>0){this.emitter.emit(Jo.events.SCROLL_BEFORE_UPDATE,e,t)}super.update(t.concat([]));if(t.length>0){this.emitter.emit(Jo.events.SCROLL_UPDATE,e,t)}}updateEmbedAt(t,e,i){const[n]=this.descendant((t=>t instanceof Do),t);if(n&&n.statics.blotName===e&&Ba(n)){n.updateContent(i)}}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){const e=[];let i=new $o;t.forEach((t=>{const n=t?.insert;if(!n)return;if(typeof n==="string"){const r=n.split("\n");r.slice(0,-1).forEach((n=>{i.insert(n,t.attributes);e.push({type:"block",delta:i,attributes:t.attributes??{}});i=new $o}));const s=r[r.length-1];if(s){i.insert(s,t.attributes)}}else{const r=Object.keys(n)[0];if(!r)return;if(this.query(r,el.INLINE)){i.push(t)}else{if(i.length()){e.push({type:"block",delta:i,attributes:{}})}i=new $o;e.push({type:"blockEmbed",key:r,value:n[r],attributes:t.attributes??{}})}}}));if(i.length()){e.push({type:"block",delta:i,attributes:{}})}return e}createBlock(t,e){let i;const n={};Object.entries(t).forEach((t=>{let[e,r]=t;const s=this.query(e,el.BLOCK&el.BLOT)!=null;if(s){i=e}else{n[e]=r}}));const r=this.create(i||this.statics.defaultChild.blotName,i?t[i]:undefined);this.insertBefore(r,e||undefined);const s=r.length();Object.entries(n).forEach((t=>{let[e,i]=t;r.formatAt(0,s,e,i)}));return r}}function Ra(t,e,i){i.reduce(((e,i)=>{const n=Pl.exports.Op.length(i);let r=i.attributes||{};if(i.insert!=null){if(typeof i.insert==="string"){const n=i.insert;t.insertAt(e,n);const[s]=t.descendant(wl,e);const l=Vo(s);r=Pl.exports.AttributeMap.diff(l,r)||{}}else if(typeof i.insert==="object"){const n=Object.keys(i.insert)[0];if(n==null)return e;t.insertAt(e,n,i.insert[n]);const s=t.scroll.query(n,el.INLINE)!=null;if(s){const[i]=t.descendant(wl,e);const n=Vo(i);r=Pl.exports.AttributeMap.diff(n,r)||{}}}}Object.keys(r).forEach((i=>{t.formatAt(e,n,i,r[i])}));return e+n}),e)}const Da={scope:el.BLOCK,whitelist:["right","center","justify"]};const Ha=new il("align","align",Da);const Va=new al("align","ql-align",Da);const Fa=new hl("align","text-align",Da);class Ua extends hl{value(t){let e=super.value(t);if(!e.startsWith("rgb("))return e;e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"");const i=e.split(",").map((t=>`00${parseInt(t,10).toString(16)}`.slice(-2))).join("");return`#${i}`}}const Pa=new al("color","ql-color",{scope:el.INLINE});const Za=new Ua("color","color",{scope:el.INLINE});const Ka=new al("background","ql-bg",{scope:el.INLINE});const Wa=new Ua("background","background-color",{scope:el.INLINE});class Ga extends Sa{static create(t){const e=super.create(t);e.setAttribute("spellcheck","false");return e}code(t,e){return this.children.map((t=>t.length()<=1?"":t.domNode.innerText)).join("\n").slice(t,t+e)}html(t,e){return`<pre>\n${zo(this.code(t,e))}\n</pre>`}}class Qa extends Ro{static TAB="  ";static register(){Ma.register(Ga)}}class Ya extends Bo{}Ya.blotName="code";Ya.tagName="CODE";Qa.blotName="code-block";Qa.className="ql-code-block";Qa.tagName="DIV";Ga.blotName="code-block-container";Ga.className="ql-code-block-container";Ga.tagName="DIV";Ga.allowedChildren=[Qa];Qa.allowedChildren=[_o,Co,Fo];Qa.requiredContainer=Ga;const Ja={scope:el.BLOCK,whitelist:["rtl"]};const Xa=new il("direction","dir",Ja);const tc=new al("direction","ql-direction",Ja);const ec=new hl("direction","direction",Ja);const ic={scope:el.INLINE,whitelist:["serif","monospace"]};const nc=new al("font","ql-font",ic);class rc extends hl{value(t){return super.value(t).replace(/["']/g,"")}}const sc=new rc("font","font-family",ic);const lc=new al("size","ql-size",{scope:el.INLINE,whitelist:["small","large","huge"]});const oc=new hl("size","font-size",{scope:el.INLINE,whitelist:["10px","18px","32px"]});const ac=Go("quill:keyboard");const cc=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class uc extends fa{static match(t,e){if(["altKey","ctrlKey","metaKey","shiftKey"].some((i=>!!e[i]!==t[i]&&e[i]!==null))){return false}return e.key===t.key||e.key===t.which}constructor(t,e){super(t,e);this.bindings={};Object.keys(this.options.bindings).forEach((t=>{if(this.options.bindings[t]){this.addBinding(this.options.bindings[t])}}));this.addBinding({key:"Enter",shiftKey:null},this.handleEnter);this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},(()=>{}));if(/Firefox/i.test(navigator.userAgent)){this.addBinding({key:"Backspace"},{collapsed:true},this.handleBackspace);this.addBinding({key:"Delete"},{collapsed:true},this.handleDelete)}else{this.addBinding({key:"Backspace"},{collapsed:true,prefix:/^.?$/},this.handleBackspace);this.addBinding({key:"Delete"},{collapsed:true,suffix:/^.?$/},this.handleDelete)}this.addBinding({key:"Backspace"},{collapsed:false},this.handleDeleteRange);this.addBinding({key:"Delete"},{collapsed:false},this.handleDeleteRange);this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:true,offset:0},this.handleBackspace);this.listen()}addBinding(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};let i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};const n=bc(t);if(n==null){ac.warn("Attempted to add invalid keyboard binding",n);return}if(typeof e==="function"){e={handler:e}}if(typeof i==="function"){i={handler:i}}const r=Array.isArray(n.key)?n.key:[n.key];r.forEach((t=>{const r={...n,key:t,...e,...i};this.bindings[r.key]=this.bindings[r.key]||[];this.bindings[r.key].push(r)}))}listen(){this.quill.root.addEventListener("keydown",(t=>{if(t.defaultPrevented||t.isComposing)return;const e=t.keyCode===229&&(t.key==="Enter"||t.key==="Backspace");if(e)return;const i=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]);const n=i.filter((e=>uc.match(t,e)));if(n.length===0)return;const r=Ma.find(t.target,true);if(r&&r.scroll!==this.quill.scroll)return;const s=this.quill.getSelection();if(s==null||!this.quill.hasFocus())return;const[l,o]=this.quill.getLine(s.index);const[a,c]=this.quill.getLeaf(s.index);const[u,h]=s.length===0?[a,c]:this.quill.getLeaf(s.index+s.length);const f=a instanceof Fl?a.value().slice(0,c):"";const d=u instanceof Fl?u.value().slice(h):"";const p={collapsed:s.length===0,empty:s.length===0&&l.length()<=1,format:this.quill.getFormat(s),line:l,offset:o,prefix:f,suffix:d,event:t};const q=n.some((t=>{if(t.collapsed!=null&&t.collapsed!==p.collapsed){return false}if(t.empty!=null&&t.empty!==p.empty){return false}if(t.offset!=null&&t.offset!==p.offset){return false}if(Array.isArray(t.format)){if(t.format.every((t=>p.format[t]==null))){return false}}else if(typeof t.format==="object"){if(!Object.keys(t.format).every((e=>{if(t.format[e]===true)return p.format[e]!=null;if(t.format[e]===false)return p.format[e]==null;return Js(t.format[e],p.format[e])}))){return false}}if(t.prefix!=null&&!t.prefix.test(p.prefix)){return false}if(t.suffix!=null&&!t.suffix.test(p.suffix)){return false}return t.handler.call(this,s,p,t)!==true}));if(q){t.preventDefault()}}))}handleBackspace(t,e){const i=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(t.index===0||this.quill.getLength()<=1)return;let n={};const[r]=this.quill.getLine(t.index);let s=(new $o).retain(t.index-i).delete(i);if(e.offset===0){const[e]=this.quill.getLine(t.index-1);if(e){const i=e.statics.blotName==="block"&&e.length()<=1;if(!i){const e=r.formats();const i=this.quill.getFormat(t.index-1,1);n=Pl.exports.AttributeMap.diff(e,i)||{};if(Object.keys(n).length>0){const e=(new $o).retain(t.index+r.length()-2).retain(1,n);s=s.compose(e)}}}}this.quill.updateContents(s,Ma.sources.USER);this.quill.focus()}handleDelete(t,e){const i=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(t.index>=this.quill.getLength()-i)return;let n={};const[r]=this.quill.getLine(t.index);let s=(new $o).retain(t.index).delete(i);if(e.offset>=r.length()-1){const[e]=this.quill.getLine(t.index+1);if(e){const i=r.formats();const l=this.quill.getFormat(t.index,1);n=Pl.exports.AttributeMap.diff(i,l)||{};if(Object.keys(n).length>0){s=s.retain(e.length()-1).retain(1,n)}}}this.quill.updateContents(s,Ma.sources.USER);this.quill.focus()}handleDeleteRange(t){vc({range:t,quill:this.quill});this.quill.focus()}handleEnter(t,e){const i=Object.keys(e.format).reduce(((t,i)=>{if(this.quill.scroll.query(i,el.BLOCK)&&!Array.isArray(e.format[i])){t[i]=e.format[i]}return t}),{});const n=(new $o).retain(t.index).delete(t.length).insert("\n",i);this.quill.updateContents(n,Ma.sources.USER);this.quill.setSelection(t.index+1,Ma.sources.SILENT);this.quill.focus()}}const hc={bindings:{bold:pc("bold"),italic:pc("italic"),underline:pc("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){if(e.collapsed&&e.offset!==0)return true;this.quill.format("indent","+1",Ma.sources.USER);return false}},outdent:{key:"Tab",shiftKey:true,format:["blockquote","indent","list"],handler(t,e){if(e.collapsed&&e.offset!==0)return true;this.quill.format("indent","-1",Ma.sources.USER);return false}},"outdent backspace":{key:"Backspace",collapsed:true,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){if(e.format.indent!=null){this.quill.format("indent","-1",Ma.sources.USER)}else if(e.format.list!=null){this.quill.format("list",false,Ma.sources.USER)}}},"indent code-block":fc(true),"outdent code-block":fc(false),"remove tab":{key:"Tab",shiftKey:true,collapsed:true,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,Ma.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return true;this.quill.history.cutoff();const i=(new $o).retain(t.index).delete(t.length).insert("\t");this.quill.updateContents(i,Ma.sources.USER);this.quill.history.cutoff();this.quill.setSelection(t.index+1,Ma.sources.SILENT);return false}},"blockquote empty enter":{key:"Enter",collapsed:true,format:["blockquote"],empty:true,handler(){this.quill.format("blockquote",false,Ma.sources.USER)}},"list empty enter":{key:"Enter",collapsed:true,format:["list"],empty:true,handler(t,e){const i={list:false};if(e.format.indent){i.indent=false}this.quill.formatLine(t.index,t.length,i,Ma.sources.USER)}},"checklist enter":{key:"Enter",collapsed:true,format:{list:"checked"},handler(t){const[e,i]=this.quill.getLine(t.index);const n={...e.formats(),list:"checked"};const r=(new $o).retain(t.index).insert("\n",n).retain(e.length()-i-1).retain(1,{list:"unchecked"});this.quill.updateContents(r,Ma.sources.USER);this.quill.setSelection(t.index+1,Ma.sources.SILENT);this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:true,format:["header"],suffix:/^$/,handler(t,e){const[i,n]=this.quill.getLine(t.index);const r=(new $o).retain(t.index).insert("\n",e.format).retain(i.length()-n-1).retain(1,{header:null});this.quill.updateContents(r,Ma.sources.USER);this.quill.setSelection(t.index+1,Ma.sources.SILENT);this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:true,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:true,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[i,n,r,s]=e.getTable(t);const l=wc(i,n,r,s);if(l==null)return;let o=i.offset();if(l<0){const e=(new $o).retain(o).insert("\n");this.quill.updateContents(e,Ma.sources.USER);this.quill.setSelection(t.index+1,t.length,Ma.sources.SILENT)}else if(l>0){o+=i.length();const t=(new $o).retain(o).insert("\n");this.quill.updateContents(t,Ma.sources.USER);this.quill.setSelection(o,Ma.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:i,line:n}=e;const r=n.offset(this.quill.scroll);if(i.shiftKey){this.quill.setSelection(r-1,Ma.sources.USER)}else{this.quill.setSelection(r+n.length(),Ma.sources.USER)}}},"list autofill":{key:" ",shiftKey:null,collapsed:true,format:{"code-block":false,blockquote:false,table:false},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(this.quill.scroll.query("list")==null)return true;const{length:i}=e.prefix;const[n,r]=this.quill.getLine(t.index);if(r>i)return true;let s;switch(e.prefix.trim()){case"[]":case"[ ]":s="unchecked";break;case"[x]":s="checked";break;case"-":case"*":s="bullet";break;default:s="ordered"}this.quill.insertText(t.index," ",Ma.sources.USER);this.quill.history.cutoff();const l=(new $o).retain(t.index-r).delete(i+1).retain(n.length()-2-r).retain(1,{list:s});this.quill.updateContents(l,Ma.sources.USER);this.quill.history.cutoff();this.quill.setSelection(t.index-i,Ma.sources.SILENT);return false}},"code exit":{key:"Enter",collapsed:true,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,i]=this.quill.getLine(t.index);let n=2;let r=e;while(r!=null&&r.length()<=1&&r.formats()["code-block"]){r=r.prev;n-=1;if(n<=0){const n=(new $o).retain(t.index+e.length()-i-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(n,Ma.sources.USER);this.quill.setSelection(t.index-1,Ma.sources.SILENT);return false}}return true}},"embed left":dc("ArrowLeft",false),"embed left shift":dc("ArrowLeft",true),"embed right":dc("ArrowRight",false),"embed right shift":dc("ArrowRight",true),"table down":qc(false),"table up":qc(true)}};uc.DEFAULTS=hc;function fc(t){return{key:"Tab",shiftKey:!t,format:{"code-block":true},handler(e,i){let{event:n}=i;const r=this.quill.scroll.query("code-block");const{TAB:s}=r;if(e.length===0&&!n.shiftKey){this.quill.insertText(e.index,s,Ma.sources.USER);this.quill.setSelection(e.index+s.length,Ma.sources.SILENT);return}const l=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:o,length:a}=e;l.forEach(((e,i)=>{if(t){e.insertAt(0,s);if(i===0){o+=s.length}else{a+=s.length}}else if(e.domNode.textContent.startsWith(s)){e.deleteAt(0,s.length);if(i===0){o-=s.length}else{a-=s.length}}}));this.quill.update(Ma.sources.USER);this.quill.setSelection(o,a,Ma.sources.SILENT)}}}function dc(t,e){const i=t==="ArrowLeft"?"prefix":"suffix";return{key:t,shiftKey:e,altKey:null,[i]:/^$/,handler(i){let{index:n}=i;if(t==="ArrowRight"){n+=i.length+1}const[r]=this.quill.getLeaf(n);if(!(r instanceof Sl))return true;if(t==="ArrowLeft"){if(e){this.quill.setSelection(i.index-1,i.length+1,Ma.sources.USER)}else{this.quill.setSelection(i.index-1,Ma.sources.USER)}}else if(e){this.quill.setSelection(i.index,i.length+1,Ma.sources.USER)}else{this.quill.setSelection(i.index+i.length+1,Ma.sources.USER)}return false}}}function pc(t){return{key:t[0],shortKey:true,handler(e,i){this.quill.format(t,!i.format[t],Ma.sources.USER)}}}function qc(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:true,format:["table"],handler(e,i){const n=t?"prev":"next";const r=i.line;const s=r.parent[n];if(s!=null){if(s.statics.blotName==="table-row"){let t=s.children.head;let e=r;while(e.prev!=null){e=e.prev;t=t.next}const n=t.offset(this.quill.scroll)+Math.min(i.offset,t.length()-1);this.quill.setSelection(n,0,Ma.sources.USER)}}else{const e=r.table()[n];if(e!=null){if(t){this.quill.setSelection(e.offset(this.quill.scroll)+e.length()-1,0,Ma.sources.USER)}else{this.quill.setSelection(e.offset(this.quill.scroll),0,Ma.sources.USER)}}}return false}}}function bc(t){if(typeof t==="string"||typeof t==="number"){t={key:t}}else if(typeof t==="object"){t=ns(t)}else{return null}if(t.shortKey){t[cc]=t.shortKey;delete t.shortKey}return t}function vc(t){let{quill:e,range:i}=t;const n=e.getLines(i);let r={};if(n.length>1){const t=n[0].formats();const e=n[n.length-1].formats();r=Pl.exports.AttributeMap.diff(e,t)||{}}e.deleteText(i,Ma.sources.USER);if(Object.keys(r).length>0){e.formatLine(i.index,1,r,Ma.sources.USER)}e.setSelection(i.index,Ma.sources.SILENT)}function wc(t,e,i,n){if(e.prev==null&&e.next==null){if(i.prev==null&&i.next==null){return n===0?-1:1}return i.prev==null?-1:1}if(e.prev==null){return-1}if(e.next==null){return 1}return null}const mc=/font-weight:\s*normal/;const gc=["P","OL","UL"];const yc=t=>t&&gc.includes(t.tagName);const kc=t=>{Array.from(t.querySelectorAll("br")).filter((t=>yc(t.previousElementSibling)&&yc(t.nextElementSibling))).forEach((t=>{t.parentNode?.removeChild(t)}))};const xc=t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter((t=>t.getAttribute("style")?.match(mc))).forEach((e=>{const i=t.createDocumentFragment();i.append(...e.childNodes);e.parentNode?.replaceChild(i,e)}))};function jc(t){if(t.querySelector('[id^="docs-internal-guid-"]')){xc(t);kc(t)}}const Ac=/\bmso-list:[^;]*ignore/i;const Oc=/\bmso-list:[^;]*\bl(\d+)/i;const Mc=/\bmso-list:[^;]*\blevel(\d+)/i;const Ec=(t,e)=>{const i=t.getAttribute("style");const n=i?.match(Oc);if(!n){return null}const r=Number(n[1]);const s=i?.match(Mc);const l=s?Number(s[1]):1;const o=new RegExp(`@list l${r}:level${l}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i");const a=e.match(o);const c=a&&a[1]==="bullet"?"bullet":"ordered";return{id:r,indent:l,type:c,element:t}};const Nc=t=>{const e=Array.from(t.querySelectorAll("[style*=mso-list]"));const i=[];const n=[];e.forEach((t=>{const e=(t.getAttribute("style")||"").match(Ac);if(e){i.push(t)}else{n.push(t)}}));i.forEach((t=>t.parentNode?.removeChild(t)));const r=t.documentElement.innerHTML;const s=n.map((t=>Ec(t,r))).filter((t=>t));while(s.length){const t=[];let e=s.shift();while(e){t.push(e);e=s.length&&s[0]?.element===e.element.nextElementSibling&&s[0].id===e.id?s.shift():null}const i=document.createElement("ul");t.forEach((t=>{const e=document.createElement("li");e.setAttribute("data-list",t.type);if(t.indent>1){e.setAttribute("class",`ql-indent-${t.indent-1}`)}e.innerHTML=t.element.innerHTML;i.appendChild(e)}));const n=t[0]?.element;const{parentNode:r}=n??{};if(n){r?.replaceChild(i,n)}t.slice(1).forEach((t=>{let{element:e}=t;r?.removeChild(e)}))}};function Tc(t){if(t.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"){Nc(t)}}const Lc=[Tc,jc];const $c=t=>{if(t.documentElement){Lc.forEach((e=>{e(t)}))}};const Cc=Go("quill:clipboard");const _c=[[Node.TEXT_NODE,iu],[Node.TEXT_NODE,Xc],["br",Wc],[Node.ELEMENT_NODE,Xc],[Node.ELEMENT_NODE,Kc],[Node.ELEMENT_NODE,Zc],[Node.ELEMENT_NODE,tu],["li",Yc],["ol, ul",Jc],["pre",Gc],["tr",eu],["b",Pc("bold")],["i",Pc("italic")],["strike",Pc("strike")],["style",Qc]];const Sc=[Ha,Xa].reduce(((t,e)=>{t[e.keyName]=e;return t}),{});const zc=[Fa,Wa,Za,ec,sc,oc].reduce(((t,e)=>{t[e.keyName]=e;return t}),{});class Bc extends fa{static DEFAULTS={matchers:[]};constructor(t,e){super(t,e);this.quill.root.addEventListener("copy",(t=>this.onCaptureCopy(t,false)));this.quill.root.addEventListener("cut",(t=>this.onCaptureCopy(t,true)));this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this));this.matchers=[];_c.concat(this.options.matchers??[]).forEach((t=>{let[e,i]=t;this.addMatcher(e,i)}))}addMatcher(t,e){this.matchers.push([t,e])}convert(t){let{html:e,text:i}=t;let n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(n[Qa.blotName]){return(new $o).insert(i||"",{[Qa.blotName]:n[Qa.blotName]})}if(!e){return(new $o).insert(i||"",n)}const r=this.convertHTML(e);if(Rc(r,"\n")&&(r.ops[r.ops.length-1].attributes==null||n.table)){return r.compose((new $o).retain(r.length()-1).delete(1))}return r}normalizeHTML(t){$c(t)}convertHTML(t){const e=(new DOMParser).parseFromString(t,"text/html");this.normalizeHTML(e);const i=e.body;const n=new WeakMap;const[r,s]=this.prepareMatching(i,n);return Uc(this.quill.scroll,i,r,s,n)}dangerouslyPasteHTML(t,e){let i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Ma.sources.API;if(typeof t==="string"){const i=this.convert({html:t,text:""});this.quill.setContents(i,e);this.quill.setSelection(0,Ma.sources.SILENT)}else{const n=this.convert({html:e,text:""});this.quill.updateContents((new $o).retain(t).concat(n),i);this.quill.setSelection(t+n.length(),Ma.sources.SILENT)}}onCaptureCopy(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(t.defaultPrevented)return;t.preventDefault();const[i]=this.quill.selection.getRange();if(i==null)return;const{html:n,text:r}=this.onCopy(i,e);t.clipboardData?.setData("text/plain",r);t.clipboardData?.setData("text/html",n);if(e){vc({range:i,quill:this.quill})}}normalizeURIList(t){return t.split(/\r?\n/).filter((t=>t[0]!=="#")).join("\n")}onCapturePaste(t){if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();const e=this.quill.getSelection(true);if(e==null)return;const i=t.clipboardData?.getData("text/html");let n=t.clipboardData?.getData("text/plain");if(!i&&!n){const e=t.clipboardData?.getData("text/uri-list");if(e){n=this.normalizeURIList(e)}}const r=Array.from(t.clipboardData?.files||[]);if(!i&&r.length>0){this.quill.uploader.upload(e,r);return}if(i&&r.length>0){const t=(new DOMParser).parseFromString(i,"text/html");if(t.body.childElementCount===1&&t.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(e,r);return}}this.onPaste(e,{html:i,text:n})}onCopy(t){const e=this.quill.getText(t);const i=this.quill.getSemanticHTML(t);return{html:i,text:e}}onPaste(t,e){let{text:i,html:n}=e;const r=this.quill.getFormat(t.index);const s=this.convert({text:i,html:n},r);Cc.log("onPaste",s,{text:i,html:n});const l=(new $o).retain(t.index).delete(t.length).concat(s);this.quill.updateContents(l,Ma.sources.USER);this.quill.setSelection(l.length()-t.length,Ma.sources.SILENT);this.quill.scrollSelectionIntoView()}prepareMatching(t,e){const i=[];const n=[];this.matchers.forEach((r=>{const[s,l]=r;switch(s){case Node.TEXT_NODE:n.push(l);break;case Node.ELEMENT_NODE:i.push(l);break;default:Array.from(t.querySelectorAll(s)).forEach((t=>{if(e.has(t)){const i=e.get(t);i?.push(l)}else{e.set(t,[l])}}));break}}));return[i,n]}}function Ic(t,e,i,n){if(!n.query(e)){return t}return t.reduce(((t,n)=>{if(!n.insert)return t;if(n.attributes&&n.attributes[e]){return t.push(n)}const r=i?{[e]:i}:{};return t.insert(n.insert,{...r,...n.attributes})}),new $o)}function Rc(t,e){let i="";for(let n=t.ops.length-1;n>=0&&i.length<e.length;--n){const e=t.ops[n];if(typeof e.insert!=="string")break;i=e.insert+i}return i.slice(-1*e.length)===e}function Dc(t,e){if(!(t instanceof Element))return false;const i=e.query(t);if(i&&i.prototype instanceof Sl)return false;return["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}function Hc(t,e){return t.previousElementSibling&&t.nextElementSibling&&!Dc(t.previousElementSibling,e)&&!Dc(t.nextElementSibling,e)}const Vc=new WeakMap;function Fc(t){if(t==null)return false;if(!Vc.has(t)){if(t.tagName==="PRE"){Vc.set(t,true)}else{Vc.set(t,Fc(t.parentNode))}}return Vc.get(t)}function Uc(t,e,i,n,r){if(e.nodeType===e.TEXT_NODE){return n.reduce(((i,n)=>n(e,i,t)),new $o)}if(e.nodeType===e.ELEMENT_NODE){return Array.from(e.childNodes||[]).reduce(((s,l)=>{let o=Uc(t,l,i,n,r);if(l.nodeType===e.ELEMENT_NODE){o=i.reduce(((e,i)=>i(l,e,t)),o);o=(r.get(l)||[]).reduce(((e,i)=>i(l,e,t)),o)}return s.concat(o)}),new $o)}return new $o}function Pc(t){return(e,i,n)=>Ic(i,t,true,n)}function Zc(t,e,i){const n=il.keys(t);const r=al.keys(t);const s=hl.keys(t);const l={};n.concat(r).concat(s).forEach((e=>{let n=i.query(e,el.ATTRIBUTE);if(n!=null){l[n.attrName]=n.value(t);if(l[n.attrName])return}n=Sc[e];if(n!=null&&(n.attrName===e||n.keyName===e)){l[n.attrName]=n.value(t)||undefined}n=zc[e];if(n!=null&&(n.attrName===e||n.keyName===e)){n=zc[e];l[n.attrName]=n.value(t)||undefined}}));return Object.entries(l).reduce(((t,e)=>{let[n,r]=e;return Ic(t,n,r,i)}),e)}function Kc(t,e,i){const n=i.query(t);if(n==null)return e;if(n.prototype instanceof Sl){const e={};const r=n.value(t);if(r!=null){e[n.blotName]=r;return(new $o).insert(e,n.formats(t,i))}}else{if(n.prototype instanceof Tl&&!Rc(e,"\n")){e.insert("\n")}if("blotName"in n&&"formats"in n&&typeof n.formats==="function"){return Ic(e,n.blotName,n.formats(t,i),i)}}return e}function Wc(t,e){if(!Rc(e,"\n")){e.insert("\n")}return e}function Gc(t,e,i){const n=i.query("code-block");const r=n&&"formats"in n&&typeof n.formats==="function"?n.formats(t,i):true;return Ic(e,"code-block",r,i)}function Qc(){return new $o}function Yc(t,e,i){const n=i.query(t);if(n==null||n.blotName!=="list"||!Rc(e,"\n")){return e}let r=-1;let s=t.parentNode;while(s!=null){if(["OL","UL"].includes(s.tagName)){r+=1}s=s.parentNode}if(r<=0)return e;return e.reduce(((t,e)=>{if(!e.insert)return t;if(e.attributes&&typeof e.attributes.indent==="number"){return t.push(e)}return t.insert(e.insert,{indent:r,...e.attributes||{}})}),new $o)}function Jc(t,e,i){const n=t;let r=n.tagName==="OL"?"ordered":"bullet";const s=n.getAttribute("data-checked");if(s){r=s==="true"?"checked":"unchecked"}return Ic(e,"list",r,i)}function Xc(t,e,i){if(!Rc(e,"\n")){if(Dc(t,i)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement)){return e.insert("\n")}if(e.length()>0&&t.nextSibling){let n=t.nextSibling;while(n!=null){if(Dc(n,i)){return e.insert("\n")}const t=i.query(n);if(t&&t.prototype instanceof Do){return e.insert("\n")}n=n.firstChild}}}return e}function tu(t,e,i){const n={};const r=t.style||{};if(r.fontStyle==="italic"){n.italic=true}if(r.textDecoration==="underline"){n.underline=true}if(r.textDecoration==="line-through"){n.strike=true}if(r.fontWeight?.startsWith("bold")||parseInt(r.fontWeight,10)>=700){n.bold=true}e=Object.entries(n).reduce(((t,e)=>{let[n,r]=e;return Ic(t,n,r,i)}),e);if(parseFloat(r.textIndent||0)>0){return(new $o).insert("\t").concat(e)}return e}function eu(t,e,i){const n=t.parentElement?.tagName==="TABLE"?t.parentElement:t.parentElement?.parentElement;if(n!=null){const r=Array.from(n.querySelectorAll("tr"));const s=r.indexOf(t)+1;return Ic(e,"table",s,i)}return e}function iu(t,e,i){let n=t.data;if(t.parentElement?.tagName==="O:P"){return e.insert(n.trim())}if(!Fc(t)){if(n.trim().length===0&&n.includes("\n")&&!Hc(t,i)){return e}n=n.replace(/[^\S\u00a0]/g," ");n=n.replace(/ {2,}/g," ");if(t.previousSibling==null&&t.parentElement!=null&&Dc(t.parentElement,i)||t.previousSibling instanceof Element&&Dc(t.previousSibling,i)){n=n.replace(/^ /,"")}if(t.nextSibling==null&&t.parentElement!=null&&Dc(t.parentElement,i)||t.nextSibling instanceof Element&&Dc(t.nextSibling,i)){n=n.replace(/ $/,"")}n=n.replaceAll(""," ")}return e.insert(n)}class nu extends fa{static DEFAULTS={delay:1e3,maxStack:100,userOnly:false};lastRecorded=0;ignoreChange=false;stack={undo:[],redo:[]};currentRange=null;constructor(t,e){super(t,e);this.quill.on(Ma.events.EDITOR_CHANGE,((t,e,i,n)=>{if(t===Ma.events.SELECTION_CHANGE){if(e&&n!==Ma.sources.SILENT){this.currentRange=e}}else if(t===Ma.events.TEXT_CHANGE){if(!this.ignoreChange){if(!this.options.userOnly||n===Ma.sources.USER){this.record(e,i)}else{this.transform(e)}}this.currentRange=ou(this.currentRange,e)}}));this.quill.keyboard.addBinding({key:"z",shortKey:true},this.undo.bind(this));this.quill.keyboard.addBinding({key:["z","Z"],shortKey:true,shiftKey:true},this.redo.bind(this));if(/Win/i.test(navigator.platform)){this.quill.keyboard.addBinding({key:"y",shortKey:true},this.redo.bind(this))}this.quill.root.addEventListener("beforeinput",(t=>{if(t.inputType==="historyUndo"){this.undo();t.preventDefault()}else if(t.inputType==="historyRedo"){this.redo();t.preventDefault()}}))}change(t,e){if(this.stack[t].length===0)return;const i=this.stack[t].pop();if(!i)return;const n=this.quill.getContents();const r=i.delta.invert(n);this.stack[e].push({delta:r,range:ou(i.range,r)});this.lastRecorded=0;this.ignoreChange=true;this.quill.updateContents(i.delta,Ma.sources.USER);this.ignoreChange=false;this.restoreSelection(i)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(t,e){if(t.ops.length===0)return;this.stack.redo=[];let i=t.invert(e);let n=this.currentRange;const r=Date.now();if(this.lastRecorded+this.options.delay>r&&this.stack.undo.length>0){const t=this.stack.undo.pop();if(t){i=i.compose(t.delta);n=t.range}}else{this.lastRecorded=r}if(i.length()===0)return;this.stack.undo.push({delta:i,range:n});if(this.stack.undo.length>this.options.maxStack){this.stack.undo.shift()}}redo(){this.change("redo","undo")}transform(t){ru(this.stack.undo,t);ru(this.stack.redo,t)}undo(){this.change("undo","redo")}restoreSelection(t){if(t.range){this.quill.setSelection(t.range,Ma.sources.USER)}else{const e=lu(this.quill.scroll,t.delta);this.quill.setSelection(e,Ma.sources.USER)}}}function ru(t,e){let i=e;for(let e=t.length-1;e>=0;e-=1){const n=t[e];t[e]={delta:i.transform(n.delta,true),range:n.range&&ou(n.range,i)};i=n.delta.transform(i);if(t[e].delta.length()===0){t.splice(e,1)}}}function su(t,e){const i=e.ops[e.ops.length-1];if(i==null)return false;if(i.insert!=null){return typeof i.insert==="string"&&i.insert.endsWith("\n")}if(i.attributes!=null){return Object.keys(i.attributes).some((e=>t.query(e,el.BLOCK)!=null))}return false}function lu(t,e){const i=e.reduce(((t,e)=>t+(e.delete||0)),0);let n=e.length()-i;if(su(t,e)){n-=1}return n}function ou(t,e){if(!t)return t;const i=e.transformPosition(t.index);const n=e.transformPosition(t.index+t.length);return{index:i,length:n-i}}class au extends fa{constructor(t,e){super(t,e);t.root.addEventListener("drop",(e=>{e.preventDefault();let i=null;if(document.caretRangeFromPoint){i=document.caretRangeFromPoint(e.clientX,e.clientY)}else if(document.caretPositionFromPoint){const t=document.caretPositionFromPoint(e.clientX,e.clientY);i=document.createRange();i.setStart(t.offsetNode,t.offset);i.setEnd(t.offsetNode,t.offset)}const n=i&&t.selection.normalizeNative(i);if(n){const i=t.selection.normalizedToRange(n);if(e.dataTransfer?.files){this.upload(i,e.dataTransfer.files)}}}))}upload(t,e){const i=[];Array.from(e).forEach((t=>{if(t&&this.options.mimetypes?.includes(t.type)){i.push(t)}}));if(i.length>0){this.options.handler.call(this,t,i)}}}au.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image")){return}const i=e.map((t=>new Promise((e=>{const i=new FileReader;i.onload=()=>{e(i.result)};i.readAsDataURL(t)}))));Promise.all(i).then((e=>{const i=e.reduce(((t,e)=>t.insert({image:e})),(new $o).retain(t.index).delete(t.length));this.quill.updateContents(i,Jo.sources.USER);this.quill.setSelection(t.index+e.length,Jo.sources.SILENT)}))}};const cu=["insertText","insertReplacementText"];class uu extends fa{constructor(t,e){super(t,e);t.root.addEventListener("beforeinput",(t=>{this.handleBeforeInput(t)}));if(!/Android/i.test(navigator.userAgent)){t.on(Ma.events.COMPOSITION_BEFORE_START,(()=>{this.handleCompositionStart()}))}}deleteRange(t){vc({range:t,quill:this.quill})}replaceText(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(t.length===0)return false;if(e){const i=this.quill.getFormat(t.index,1);this.deleteRange(t);this.quill.updateContents((new $o).retain(t.index).insert(e,i),Ma.sources.USER)}else{this.deleteRange(t)}this.quill.setSelection(t.index+e.length,0,Ma.sources.SILENT);return true}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!cu.includes(t.inputType)){return}const e=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!e||e.collapsed===true){return}const i=hu(t);if(i==null){return}const n=this.quill.selection.normalizeNative(e);const r=n?this.quill.selection.normalizedToRange(n):null;if(r&&this.replaceText(r,i)){t.preventDefault()}}handleCompositionStart(){const t=this.quill.getSelection();if(t){this.replaceText(t)}}}function hu(t){if(typeof t.data==="string"){return t.data}if(t.dataTransfer?.types.includes("text/plain")){return t.dataTransfer.getData("text/plain")}return null}const fu=/Mac/i.test(navigator.platform);const du=100;const pu=t=>{if(t.key==="ArrowLeft"||t.key==="ArrowRight"||t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="Home"){return true}if(fu&&t.key==="a"&&t.ctrlKey===true){return true}return false};class qu extends fa{isListening=false;selectionChangeDeadline=0;constructor(t,e){super(t,e);this.handleArrowKeys();this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(t,e){let{line:i,event:n}=e;if(!(i instanceof xl)||!i.uiNode){return true}const r=getComputedStyle(i.domNode)["direction"]==="rtl";if(r&&n.key!=="ArrowRight"||!r&&n.key!=="ArrowLeft"){return true}this.quill.setSelection(t.index-1,t.length+(n.shiftKey?1:0),Ma.sources.USER);return false}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",(t=>{if(!t.defaultPrevented&&pu(t)){this.ensureListeningToSelectionChange()}}))}ensureListeningToSelectionChange(){this.selectionChangeDeadline=Date.now()+du;if(this.isListening)return;this.isListening=true;const t=()=>{this.isListening=false;if(Date.now()<=this.selectionChangeDeadline){this.handleSelectionChange()}};document.addEventListener("selectionchange",t,{once:true})}handleSelectionChange(){const t=document.getSelection();if(!t)return;const e=t.getRangeAt(0);if(e.collapsed!==true||e.startOffset!==0)return;const i=this.quill.scroll.find(e.startContainer);if(!(i instanceof xl)||!i.uiNode)return;const n=document.createRange();n.setStartAfter(i.uiNode);n.setEndAfter(i.uiNode);t.removeAllRanges();t.addRange(n)}}Ma.register({"blots/block":Ro,"blots/block/embed":Do,"blots/break":Co,"blots/container":Sa,"blots/cursor":Fo,"blots/embed":pa,"blots/inline":Bo,"blots/scroll":Ia,"blots/text":_o,"modules/clipboard":Bc,"modules/history":nu,"modules/keyboard":uc,"modules/uploader":au,"modules/input":uu,"modules/uiNode":qu});class bu extends al{add(t,e){let i=0;if(e==="+1"||e==="-1"){const n=this.value(t)||0;i=e==="+1"?n+1:n-1}else if(typeof e==="number"){i=e}if(i===0){this.remove(t);return true}return super.add(t,i.toString())}canAdd(t,e){return super.canAdd(t,e)||super.canAdd(t,parseInt(e,10))}value(t){return parseInt(super.value(t),10)||undefined}}const vu=new bu("indent","ql-indent",{scope:el.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class wu extends Ro{static blotName="blockquote";static tagName="blockquote"}class mu extends Ro{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(t){return this.tagName.indexOf(t.tagName)+1}}class gu extends Sa{}gu.blotName="list-container";gu.tagName="OL";class yu extends Ro{static create(t){const e=super.create();e.setAttribute("data-list",t);return e}static formats(t){return t.getAttribute("data-list")||undefined}static register(){Ma.register(gu)}constructor(t,e){super(t,e);const i=e.ownerDocument.createElement("span");const n=i=>{if(!t.isEnabled())return;const n=this.statics.formats(e,t);if(n==="checked"){this.format("list","unchecked");i.preventDefault()}else if(n==="unchecked"){this.format("list","checked");i.preventDefault()}};i.addEventListener("mousedown",n);i.addEventListener("touchstart",n);this.attachUI(i)}format(t,e){if(t===this.statics.blotName&&e){this.domNode.setAttribute("data-list",e)}else{super.format(t,e)}}}yu.blotName="list";yu.tagName="LI";gu.allowedChildren=[yu];yu.requiredContainer=gu;class ku extends Bo{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return true}optimize(t){super.optimize(t);if(this.domNode.tagName!==this.statics.tagName[0]){this.replaceWith(this.statics.blotName)}}}class xu extends ku{static blotName="italic";static tagName=["EM","I"]}class ju extends Bo{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(t){const e=super.create(t);e.setAttribute("href",this.sanitize(t));e.setAttribute("rel","noopener noreferrer");e.setAttribute("target","_blank");return e}static formats(t){return t.getAttribute("href")}static sanitize(t){return Au(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,e){if(t!==this.statics.blotName||!e){super.format(t,e)}else{this.domNode.setAttribute("href",this.constructor.sanitize(e))}}}function Au(t,e){const i=document.createElement("a");i.href=t;const n=i.href.slice(0,i.href.indexOf(":"));return e.indexOf(n)>-1}class Ou extends Bo{static blotName="script";static tagName=["SUB","SUP"];static create(t){if(t==="super"){return document.createElement("sup")}if(t==="sub"){return document.createElement("sub")}return super.create(t)}static formats(t){if(t.tagName==="SUB")return"sub";if(t.tagName==="SUP")return"super";return undefined}}class Mu extends ku{static blotName="strike";static tagName=["S","STRIKE"]}class Eu extends Bo{static blotName="underline";static tagName="U"}class Nu extends pa{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(t){if(window.katex==null){throw new Error("Formula module requires KaTeX.")}const e=super.create(t);if(typeof t==="string"){window.katex.render(t,e,{throwOnError:false,errorColor:"#f00"});e.setAttribute("data-value",t)}return e}static value(t){return t.getAttribute("data-value")}html(){const{formula:t}=this.value();return`<span>${t}</span>`}}const Tu=["alt","height","width"];class Lu extends Sl{static blotName="image";static tagName="IMG";static create(t){const e=super.create(t);if(typeof t==="string"){e.setAttribute("src",this.sanitize(t))}return e}static formats(t){return Tu.reduce(((e,i)=>{if(t.hasAttribute(i)){e[i]=t.getAttribute(i)}return e}),{})}static match(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}static sanitize(t){return Au(t,["http","https","data"])?t:"//:0"}static value(t){return t.getAttribute("src")}format(t,e){if(Tu.indexOf(t)>-1){if(e){this.domNode.setAttribute(t,e)}else{this.domNode.removeAttribute(t)}}else{super.format(t,e)}}}const $u=["height","width"];class Cu extends Do{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(t){const e=super.create(t);e.setAttribute("frameborder","0");e.setAttribute("allowfullscreen","true");e.setAttribute("src",this.sanitize(t));return e}static formats(t){return $u.reduce(((e,i)=>{if(t.hasAttribute(i)){e[i]=t.getAttribute(i)}return e}),{})}static sanitize(t){return ju.sanitize(t)}static value(t){return t.getAttribute("src")}format(t,e){if($u.indexOf(t)>-1){if(e){this.domNode.setAttribute(t,e)}else{this.domNode.removeAttribute(t)}}else{super.format(t,e)}}html(){const{video:t}=this.value();return`<a href="${t}">${t}</a>`}}const _u=new al("code-token","hljs",{scope:el.INLINE});class Su extends Bo{static formats(t,e){while(t!=null&&t!==e.domNode){if(t.classList&&t.classList.contains(Qa.className)){return super.formats(t,e)}t=t.parentNode}return undefined}constructor(t,e,i){super(t,e,i);_u.add(this.domNode,i)}format(t,e){if(t!==Su.blotName){super.format(t,e)}else if(e){_u.add(this.domNode,e)}else{_u.remove(this.domNode);this.domNode.classList.remove(this.statics.className)}}optimize(){super.optimize(...arguments);if(!_u.value(this.domNode)){this.unwrap()}}}Su.blotName="code-token";Su.className="ql-token";class zu extends Qa{static create(t){const e=super.create(t);if(typeof t==="string"){e.setAttribute("data-language",t)}return e}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,e){if(t===this.statics.blotName&&e){this.domNode.setAttribute("data-language",e)}else{super.format(t,e)}}replaceWith(t,e){this.formatAt(0,this.length(),Su.blotName,false);return super.replaceWith(t,e)}}class Bu extends Ga{attach(){super.attach();this.forceNext=false;this.scroll.emitMount(this)}format(t,e){if(t===zu.blotName){this.forceNext=true;this.children.forEach((i=>{i.format(t,e)}))}}formatAt(t,e,i,n){if(i===zu.blotName){this.forceNext=true}super.formatAt(t,e,i,n)}highlight(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(this.children.head==null)return;const i=Array.from(this.domNode.childNodes).filter((t=>t!==this.uiNode));const n=`${i.map((t=>t.textContent)).join("\n")}\n`;const r=zu.formats(this.children.head.domNode);if(e||this.forceNext||this.cachedText!==n){if(n.trim().length>0||this.cachedText==null){const e=this.children.reduce(((t,e)=>t.concat(Ho(e,false))),new $o);const i=t(n,r);e.diff(i).reduce(((t,e)=>{let{retain:i,attributes:n}=e;if(!i)return t;if(n){Object.keys(n).forEach((e=>{if([zu.blotName,Su.blotName].includes(e)){this.formatAt(t,i,e,n[e])}}))}return t+i}),0)}this.cachedText=n;this.forceNext=false}}html(t,e){const[i]=this.children.find(t);const n=i?zu.formats(i.domNode):"plain";return`<pre data-language="${n}">\n${zo(this.code(t,e))}\n</pre>`}optimize(t){super.optimize(t);if(this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const t=zu.formats(this.children.head.domNode);if(t!==this.uiNode.value){this.uiNode.value=t}}}}Bu.allowedChildren=[zu];zu.requiredContainer=Bu;zu.allowedChildren=[Su,Fo,_o,Co];const Iu=(t,e,i)=>{if(typeof t.versionString==="string"){const n=t.versionString.split(".")[0];if(parseInt(n,10)>=11){return t.highlight(i,{language:e}).value}}return t.highlight(e,i).value};class Ru extends fa{static register(){Ma.register(Su,true);Ma.register(zu,true);Ma.register(Bu,true)}constructor(t,e){super(t,e);if(this.options.hljs==null){throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.")}this.languages=this.options.languages.reduce(((t,e)=>{let{key:i}=e;t[i]=true;return t}),{});this.highlightBlot=this.highlightBlot.bind(this);this.initListener();this.initTimer()}initListener(){this.quill.on(Ma.events.SCROLL_BLOT_MOUNT,(t=>{if(!(t instanceof Bu))return;const e=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach((t=>{let{key:i,label:n}=t;const r=e.ownerDocument.createElement("option");r.textContent=n;r.setAttribute("value",i);e.appendChild(r)}));e.addEventListener("change",(()=>{t.format(zu.blotName,e.value);this.quill.root.focus();this.highlight(t,true)}));if(t.uiNode==null){t.attachUI(e);if(t.children.head){e.value=zu.formats(t.children.head.domNode)}}}))}initTimer(){let t=null;this.quill.on(Ma.events.SCROLL_OPTIMIZE,(()=>{if(t){clearTimeout(t)}t=setTimeout((()=>{this.highlight();t=null}),this.options.interval)}))}highlight(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(this.quill.selection.composing)return;this.quill.update(Ma.sources.USER);const i=this.quill.getSelection();const n=t==null?this.quill.scroll.descendants(Bu):[t];n.forEach((t=>{t.highlight(this.highlightBlot,e)}));this.quill.update(Ma.sources.SILENT);if(i!=null){this.quill.setSelection(i,Ma.sources.SILENT)}}highlightBlot(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"plain";e=this.languages[e]?e:"plain";if(e==="plain"){return zo(t).split("\n").reduce(((t,i,n)=>{if(n!==0){t.insert("\n",{[Qa.blotName]:e})}return t.insert(i)}),new $o)}const i=this.quill.root.ownerDocument.createElement("div");i.classList.add(Qa.className);i.innerHTML=Iu(this.options.hljs,e,t);return Uc(this.quill.scroll,i,[(t,e)=>{const i=_u.value(t);if(i){return e.compose((new $o).retain(e.length(),{[Su.blotName]:i}))}return e}],[(t,i)=>t.data.split("\n").reduce(((t,i,n)=>{if(n!==0)t.insert("\n",{[Qa.blotName]:e});return t.insert(i)}),i)],new WeakMap)}}Ru.DEFAULTS={hljs:(()=>window.hljs)(),interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class Du extends Ro{static blotName="table";static tagName="TD";static create(t){const e=super.create();if(t){e.setAttribute("data-row",t)}else{e.setAttribute("data-row",Uu())}return e}static formats(t){if(t.hasAttribute("data-row")){return t.getAttribute("data-row")}return undefined}cellOffset(){if(this.parent){return this.parent.children.indexOf(this)}return-1}format(t,e){if(t===Du.blotName&&e){this.domNode.setAttribute("data-row",e)}else{super.format(t,e)}}row(){return this.parent}rowOffset(){if(this.row()){return this.row().rowOffset()}return-1}table(){return this.row()&&this.row().table()}}class Hu extends Sa{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const t=this.children.head.formats();const e=this.children.tail.formats();const i=this.next.children.head.formats();const n=this.next.children.tail.formats();return t.table===e.table&&t.table===i.table&&t.table===n.table}return false}optimize(t){super.optimize(t);this.children.forEach((t=>{if(t.next==null)return;const e=t.formats();const i=t.next.formats();if(e.table!==i.table){const e=this.splitAfter(t);if(e){e.optimize()}if(this.prev){this.prev.optimize()}}}))}rowOffset(){if(this.parent){return this.parent.children.indexOf(this)}return-1}table(){return this.parent&&this.parent.parent}}class Vu extends Sa{static blotName="table-body";static tagName="TBODY"}class Fu extends Sa{static blotName="table-container";static tagName="TABLE";balanceCells(){const t=this.descendants(Hu);const e=t.reduce(((t,e)=>Math.max(e.children.length,t)),0);t.forEach((t=>{new Array(e-t.children.length).fill(0).forEach((()=>{let e;if(t.children.head!=null){e=Du.formats(t.children.head.domNode)}const i=this.scroll.create(Du.blotName,e);t.appendChild(i);i.optimize()}))}))}cells(t){return this.rows().map((e=>e.children.at(t)))}deleteColumn(t){const[e]=this.descendant(Vu);if(e==null||e.children.head==null)return;e.children.forEach((e=>{const i=e.children.at(t);if(i!=null){i.remove()}}))}insertColumn(t){const[e]=this.descendant(Vu);if(e==null||e.children.head==null)return;e.children.forEach((e=>{const i=e.children.at(t);const n=Du.formats(e.children.head.domNode);const r=this.scroll.create(Du.blotName,n);e.insertBefore(r,i)}))}insertRow(t){const[e]=this.descendant(Vu);if(e==null||e.children.head==null)return;const i=Uu();const n=this.scroll.create(Hu.blotName);e.children.head.children.forEach((()=>{const t=this.scroll.create(Du.blotName,i);n.appendChild(t)}));const r=e.children.at(t);e.insertBefore(n,r)}rows(){const t=this.children.head;if(t==null)return[];return t.children.map((t=>t))}}Fu.allowedChildren=[Vu];Vu.requiredContainer=Fu;Vu.allowedChildren=[Hu];Hu.requiredContainer=Vu;Hu.allowedChildren=[Du];Du.requiredContainer=Hu;function Uu(){const t=Math.random().toString(36).slice(2,6);return`row-${t}`}class Pu extends fa{static register(){Ma.register(Du);Ma.register(Hu);Ma.register(Vu);Ma.register(Fu)}constructor(){super(...arguments);this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Fu).forEach((t=>{t.balanceCells()}))}deleteColumn(){const[t,,e]=this.getTable();if(e==null)return;t.deleteColumn(e.cellOffset());this.quill.update(Ma.sources.USER)}deleteRow(){const[,t]=this.getTable();if(t==null)return;t.remove();this.quill.update(Ma.sources.USER)}deleteTable(){const[t]=this.getTable();if(t==null)return;const e=t.offset();t.remove();this.quill.update(Ma.sources.USER);this.quill.setSelection(e,Ma.sources.SILENT)}getTable(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.quill.getSelection();if(t==null)return[null,null,null,-1];const[e,i]=this.quill.getLine(t.index);if(e==null||e.statics.blotName!==Du.blotName){return[null,null,null,-1]}const n=e.parent;const r=n.parent.parent;return[r,n,e,i]}insertColumn(t){const e=this.quill.getSelection();if(!e)return;const[i,n,r]=this.getTable(e);if(r==null)return;const s=r.cellOffset();i.insertColumn(s+t);this.quill.update(Ma.sources.USER);let l=n.rowOffset();if(t===0){l+=1}this.quill.setSelection(e.index+l,e.length,Ma.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){const e=this.quill.getSelection();if(!e)return;const[i,n,r]=this.getTable(e);if(r==null)return;const s=n.rowOffset();i.insertRow(s+t);this.quill.update(Ma.sources.USER);if(t>0){this.quill.setSelection(e,Ma.sources.SILENT)}else{this.quill.setSelection(e.index+n.children.length,e.length,Ma.sources.SILENT)}}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,e){const i=this.quill.getSelection();if(i==null)return;const n=new Array(t).fill(0).reduce((t=>{const i=new Array(e).fill("\n").join("");return t.insert(i,{table:Uu()})}),(new $o).retain(i.index));this.quill.updateContents(n,Ma.sources.USER);this.quill.setSelection(i.index,Ma.sources.SILENT);this.balanceTables()}listenBalanceCells(){this.quill.on(Ma.events.SCROLL_OPTIMIZE,(t=>{t.some((t=>{if(["TD","TR","TBODY","TABLE"].includes(t.target.tagName)){this.quill.once(Ma.events.TEXT_CHANGE,((t,e,i)=>{if(i!==Ma.sources.USER)return;this.balanceTables()}));return true}return false}))}))}}const Zu=Go("quill:toolbar");class Ku extends fa{constructor(t,e){super(t,e);if(Array.isArray(this.options.container)){const e=document.createElement("div");e.setAttribute("role","toolbar");Gu(e,this.options.container);t.container?.parentNode?.insertBefore(e,t.container);this.container=e}else if(typeof this.options.container==="string"){this.container=document.querySelector(this.options.container)}else{this.container=this.options.container}if(!(this.container instanceof HTMLElement)){Zu.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar");this.controls=[];this.handlers={};if(this.options.handlers){Object.keys(this.options.handlers).forEach((t=>{const e=this.options.handlers?.[t];if(e){this.addHandler(t,e)}}))}Array.from(this.container.querySelectorAll("button, select")).forEach((t=>{this.attach(t)}));this.quill.on(Ma.events.EDITOR_CHANGE,(()=>{const[t]=this.quill.selection.getRange();this.update(t)}))}addHandler(t,e){this.handlers[t]=e}attach(t){let e=Array.from(t.classList).find((t=>t.indexOf("ql-")===0));if(!e)return;e=e.slice("ql-".length);if(t.tagName==="BUTTON"){t.setAttribute("type","button")}if(this.handlers[e]==null&&this.quill.scroll.query(e)==null){Zu.warn("ignoring attaching to nonexistent format",e,t);return}const i=t.tagName==="SELECT"?"change":"click";t.addEventListener(i,(i=>{let n;if(t.tagName==="SELECT"){if(t.selectedIndex<0)return;const e=t.options[t.selectedIndex];if(e.hasAttribute("selected")){n=false}else{n=e.value||false}}else{if(t.classList.contains("ql-active")){n=false}else{n=t.value||!t.hasAttribute("value")}i.preventDefault()}this.quill.focus();const[r]=this.quill.selection.getRange();if(this.handlers[e]!=null){this.handlers[e].call(this,n)}else if(this.quill.scroll.query(e).prototype instanceof Sl){n=prompt(`Enter ${e}`);if(!n)return;this.quill.updateContents((new $o).retain(r.index).delete(r.length).insert({[e]:n}),Ma.sources.USER)}else{this.quill.format(e,n,Ma.sources.USER)}this.update(r)}));this.controls.push([e,t])}update(t){const e=t==null?{}:this.quill.getFormat(t);this.controls.forEach((i=>{const[n,r]=i;if(r.tagName==="SELECT"){let i=null;if(t==null){i=null}else if(e[n]==null){i=r.querySelector("option[selected]")}else if(!Array.isArray(e[n])){let t=e[n];if(typeof t==="string"){t=t.replace(/"/g,'\\"')}i=r.querySelector(`option[value="${t}"]`)}if(i==null){r.value="";r.selectedIndex=-1}else{i.selected=true}}else if(t==null){r.classList.remove("ql-active");r.setAttribute("aria-pressed","false")}else if(r.hasAttribute("value")){const t=e[n];const i=t===r.getAttribute("value")||t!=null&&t.toString()===r.getAttribute("value")||t==null&&!r.getAttribute("value");r.classList.toggle("ql-active",i);r.setAttribute("aria-pressed",i.toString())}else{const t=e[n]!=null;r.classList.toggle("ql-active",t);r.setAttribute("aria-pressed",t.toString())}}))}}Ku.DEFAULTS={};function Wu(t,e,i){const n=document.createElement("button");n.setAttribute("type","button");n.classList.add(`ql-${e}`);n.setAttribute("aria-pressed","false");if(i!=null){n.value=i;n.setAttribute("aria-label",`${e}: ${i}`)}else{n.setAttribute("aria-label",e)}t.appendChild(n)}function Gu(t,e){if(!Array.isArray(e[0])){e=[e]}e.forEach((e=>{const i=document.createElement("span");i.classList.add("ql-formats");e.forEach((t=>{if(typeof t==="string"){Wu(i,t)}else{const e=Object.keys(t)[0];const n=t[e];if(Array.isArray(n)){Qu(i,e,n)}else{Wu(i,e,n)}}}));t.appendChild(i)}))}function Qu(t,e,i){const n=document.createElement("select");n.classList.add(`ql-${e}`);i.forEach((t=>{const e=document.createElement("option");if(t!==false){e.setAttribute("value",String(t))}else{e.setAttribute("selected","selected")}n.appendChild(e)}));t.appendChild(n)}Ku.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(t==null)return;if(t.length===0){const t=this.quill.getFormat();Object.keys(t).forEach((t=>{if(this.quill.scroll.query(t,el.INLINE)!=null){this.quill.format(t,false,Ma.sources.USER)}}))}else{this.quill.removeFormat(t.index,t.length,Ma.sources.USER)}},direction(t){const{align:e}=this.quill.getFormat();if(t==="rtl"&&e==null){this.quill.format("align","right",Ma.sources.USER)}else if(!t&&e==="right"){this.quill.format("align",false,Ma.sources.USER)}this.quill.format("direction",t,Ma.sources.USER)},indent(t){const e=this.quill.getSelection();const i=this.quill.getFormat(e);const n=parseInt(i.indent||0,10);if(t==="+1"||t==="-1"){let e=t==="+1"?1:-1;if(i.direction==="rtl")e*=-1;this.quill.format("indent",n+e,Ma.sources.USER)}},link(t){if(t===true){t=prompt("Enter link URL:")}this.quill.format("link",t,Ma.sources.USER)},list(t){const e=this.quill.getSelection();const i=this.quill.getFormat(e);if(t==="check"){if(i.list==="checked"||i.list==="unchecked"){this.quill.format("list",false,Ma.sources.USER)}else{this.quill.format("list","unchecked",Ma.sources.USER)}}else{this.quill.format("list",t,Ma.sources.USER)}}}};const Yu='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>';const Ju='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>';const Xu='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>';const th='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>';const eh='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>';const ih='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>';const nh='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>';const rh='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>';const sh='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>';const lh='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>';const oh='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>';const ah='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>';const ch='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>';const uh='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>';const hh='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>';const fh='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>';const dh='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>';const ph='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>';const qh='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>';const bh='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>';const vh='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>';const wh='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>';const mh='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>';const gh='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>';const yh='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>';const kh='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>';const xh='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>';const jh='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>';const Ah='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>';const Oh='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>';const Mh='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>';const Eh='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>';const Nh='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>';const Th={align:{"":Yu,center:Ju,right:Xu,justify:th},background:eh,blockquote:ih,bold:nh,clean:rh,code:sh,"code-block":sh,color:lh,direction:{"":oh,rtl:ah},formula:ch,header:{1:uh,2:hh,3:fh,4:dh,5:ph,6:qh},italic:bh,image:vh,indent:{"+1":wh,"-1":mh},link:gh,list:{bullet:yh,check:kh,ordered:xh},script:{sub:jh,super:Ah},strike:Oh,table:Mh,underline:Eh,video:Nh};const Lh='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let $h=0;function Ch(t,e){t.setAttribute(e,`${!(t.getAttribute(e)==="true")}`)}class _h{constructor(t){this.select=t;this.container=document.createElement("span");this.buildPicker();this.select.style.display="none";this.select.parentNode.insertBefore(this.container,this.select);this.label.addEventListener("mousedown",(()=>{this.togglePicker()}));this.label.addEventListener("keydown",(t=>{switch(t.key){case"Enter":this.togglePicker();break;case"Escape":this.escape();t.preventDefault();break}}));this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded");Ch(this.label,"aria-expanded");Ch(this.options,"aria-hidden")}buildItem(t){const e=document.createElement("span");e.tabIndex="0";e.setAttribute("role","button");e.classList.add("ql-picker-item");const i=t.getAttribute("value");if(i){e.setAttribute("data-value",i)}if(t.textContent){e.setAttribute("data-label",t.textContent)}e.addEventListener("click",(()=>{this.selectItem(e,true)}));e.addEventListener("keydown",(t=>{switch(t.key){case"Enter":this.selectItem(e,true);t.preventDefault();break;case"Escape":this.escape();t.preventDefault();break}}));return e}buildLabel(){const t=document.createElement("span");t.classList.add("ql-picker-label");t.innerHTML=Lh;t.tabIndex="0";t.setAttribute("role","button");t.setAttribute("aria-expanded","false");this.container.appendChild(t);return t}buildOptions(){const t=document.createElement("span");t.classList.add("ql-picker-options");t.setAttribute("aria-hidden","true");t.tabIndex="-1";t.id=`ql-picker-options-${$h}`;$h+=1;this.label.setAttribute("aria-controls",t.id);this.options=t;Array.from(this.select.options).forEach((e=>{const i=this.buildItem(e);t.appendChild(i);if(e.selected===true){this.selectItem(i)}}));this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach((t=>{this.container.setAttribute(t.name,t.value)}));this.container.classList.add("ql-picker");this.label=this.buildLabel();this.buildOptions()}escape(){this.close();setTimeout((()=>this.label.focus()),1)}close(){this.container.classList.remove("ql-expanded");this.label.setAttribute("aria-expanded","false");this.options.setAttribute("aria-hidden","true")}selectItem(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;const i=this.container.querySelector(".ql-selected");if(t===i)return;if(i!=null){i.classList.remove("ql-selected")}if(t==null)return;t.classList.add("ql-selected");this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t);if(t.hasAttribute("data-value")){this.label.setAttribute("data-value",t.getAttribute("data-value"))}else{this.label.removeAttribute("data-value")}if(t.hasAttribute("data-label")){this.label.setAttribute("data-label",t.getAttribute("data-label"))}else{this.label.removeAttribute("data-label")}if(e){this.select.dispatchEvent(new Event("change"));this.close()}}update(){let t;if(this.select.selectedIndex>-1){const e=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex];this.selectItem(e)}else{this.selectItem(null)}const e=t!=null&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}}class Sh extends _h{constructor(t,e){super(t);this.label.innerHTML=e;this.container.classList.add("ql-color-picker");Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach((t=>{t.classList.add("ql-primary")}))}buildItem(t){const e=super.buildItem(t);e.style.backgroundColor=t.getAttribute("value")||"";return e}selectItem(t,e){super.selectItem(t,e);const i=this.label.querySelector(".ql-color-label");const n=t?t.getAttribute("data-value")||"":"";if(i){if(i.tagName==="line"){i.style.stroke=n}else{i.style.fill=n}}}}class zh extends _h{constructor(t,e){super(t);this.container.classList.add("ql-icon-picker");Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach((t=>{t.innerHTML=e[t.getAttribute("data-value")||""]}));this.defaultItem=this.container.querySelector(".ql-selected");this.selectItem(this.defaultItem)}selectItem(t,e){super.selectItem(t,e);const i=t||this.defaultItem;if(i!=null){if(this.label.innerHTML===i.innerHTML)return;this.label.innerHTML=i.innerHTML}}}const Bh=t=>{const{overflowY:e}=getComputedStyle(t,null);return e!=="visible"&&e!=="clip"};class Ih{constructor(t,e){this.quill=t;this.boundsContainer=e||document.body;this.root=t.addContainer("ql-tooltip");this.root.innerHTML=this.constructor.TEMPLATE;if(Bh(this.quill.root)){this.quill.root.addEventListener("scroll",(()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}))}this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){const e=t.left+t.width/2-this.root.offsetWidth/2;const i=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`;this.root.style.top=`${i}px`;this.root.classList.remove("ql-flip");const n=this.boundsContainer.getBoundingClientRect();const r=this.root.getBoundingClientRect();let s=0;if(r.right>n.right){s=n.right-r.right;this.root.style.left=`${e+s}px`}if(r.left<n.left){s=n.left-r.left;this.root.style.left=`${e+s}px`}if(r.bottom>n.bottom){const e=r.bottom-r.top;const n=t.bottom-t.top+e;this.root.style.top=`${i-n}px`;this.root.classList.add("ql-flip")}return s}show(){this.root.classList.remove("ql-editing");this.root.classList.remove("ql-hidden")}}const Rh=[false,"center","right","justify"];const Dh=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"];const Hh=[false,"serif","monospace"];const Vh=["1","2","3",false];const Fh=["small",false,"large","huge"];class Uh extends ba{constructor(t,e){super(t,e);const i=e=>{if(!document.body.contains(t.root)){document.body.removeEventListener("click",i);return}if(this.tooltip!=null&&!this.tooltip.root.contains(e.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()){this.tooltip.hide()}if(this.pickers!=null){this.pickers.forEach((t=>{if(!t.container.contains(e.target)){t.close()}}))}};t.emitter.listenDOM("click",document.body,i)}addModule(t){const e=super.addModule(t);if(t==="toolbar"){this.extendToolbar(e)}return e}buildButtons(t,e){Array.from(t).forEach((t=>{const i=t.getAttribute("class")||"";i.split(/\s+/).forEach((i=>{if(!i.startsWith("ql-"))return;i=i.slice("ql-".length);if(e[i]==null)return;if(i==="direction"){t.innerHTML=e[i][""]+e[i].rtl}else if(typeof e[i]==="string"){t.innerHTML=e[i]}else{const n=t.value||"";if(n!=null&&e[i][n]){t.innerHTML=e[i][n]}}}))}))}buildPickers(t,e){this.pickers=Array.from(t).map((t=>{if(t.classList.contains("ql-align")){if(t.querySelector("option")==null){Kh(t,Rh)}if(typeof e.align==="object"){return new zh(t,e.align)}}if(t.classList.contains("ql-background")||t.classList.contains("ql-color")){const i=t.classList.contains("ql-background")?"background":"color";if(t.querySelector("option")==null){Kh(t,Dh,i==="background"?"#ffffff":"#000000")}return new Sh(t,e[i])}if(t.querySelector("option")==null){if(t.classList.contains("ql-font")){Kh(t,Hh)}else if(t.classList.contains("ql-header")){Kh(t,Vh)}else if(t.classList.contains("ql-size")){Kh(t,Fh)}}return new _h(t)}));const i=()=>{this.pickers.forEach((t=>{t.update()}))};this.quill.on(Jo.events.EDITOR_CHANGE,i)}}Uh.DEFAULTS=tl({},ba.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");if(t==null){t=document.createElement("input");t.setAttribute("type","file");t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", "));t.classList.add("ql-image");t.addEventListener("change",(()=>{const e=this.quill.getSelection(true);this.quill.uploader.upload(e,t.files);t.value=""}));this.container.appendChild(t)}t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class Ph extends Ih{constructor(t,e){super(t,e);this.textbox=this.root.querySelector('input[type="text"]');this.listen()}listen(){this.textbox.addEventListener("keydown",(t=>{if(t.key==="Enter"){this.save();t.preventDefault()}else if(t.key==="Escape"){this.cancel();t.preventDefault()}}))}cancel(){this.hide();this.restoreFocus()}edit(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"link";let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;this.root.classList.remove("ql-hidden");this.root.classList.add("ql-editing");if(this.textbox==null)return;if(e!=null){this.textbox.value=e}else if(t!==this.root.getAttribute("data-mode")){this.textbox.value=""}const i=this.quill.getBounds(this.quill.selection.savedRange);if(i!=null){this.position(i)}this.textbox.select();this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||"");this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:true})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:e}=this.quill.root;if(this.linkRange){this.quill.formatText(this.linkRange,"link",t,Jo.sources.USER);delete this.linkRange}else{this.restoreFocus();this.quill.format("link",t,Jo.sources.USER)}this.quill.root.scrollTop=e;break}case"video":{t=Zh(t)}case"formula":{if(!t)break;const e=this.quill.getSelection(true);if(e!=null){const i=e.index+e.length;this.quill.insertEmbed(i,this.root.getAttribute("data-mode"),t,Jo.sources.USER);if(this.root.getAttribute("data-mode")==="formula"){this.quill.insertText(i+1," ",Jo.sources.USER)}this.quill.setSelection(i+2,Jo.sources.USER)}break}}this.textbox.value="";this.hide()}}function Zh(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);if(e){return`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`}if(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/)){return`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`}return t}function Kh(t,e){let i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;e.forEach((e=>{const n=document.createElement("option");if(e===i){n.setAttribute("selected","selected")}else{n.setAttribute("value",String(e))}t.appendChild(n)}))}const Wh=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class Gh extends Ph{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(t,e){super(t,e);this.quill.on(Jo.events.EDITOR_CHANGE,((t,e,i,n)=>{if(t!==Jo.events.SELECTION_CHANGE)return;if(e!=null&&e.length>0&&n===Jo.sources.USER){this.show();this.root.style.left="0px";this.root.style.width="";this.root.style.width=`${this.root.offsetWidth}px`;const t=this.quill.getLines(e.index,e.length);if(t.length===1){const t=this.quill.getBounds(e);if(t!=null){this.position(t)}}else{const i=t[t.length-1];const n=this.quill.getIndex(i);const r=Math.min(i.length()-1,e.index+e.length-n);const s=this.quill.getBounds(new ta(n,r));if(s!=null){this.position(s)}}}else if(document.activeElement!==this.textbox&&this.quill.hasFocus()){this.hide()}}))}listen(){super.listen();this.root.querySelector(".ql-close").addEventListener("click",(()=>{this.root.classList.remove("ql-editing")}));this.quill.on(Jo.events.SCROLL_OPTIMIZE,(()=>{setTimeout((()=>{if(this.root.classList.contains("ql-hidden"))return;const t=this.quill.getSelection();if(t!=null){const e=this.quill.getBounds(t);if(e!=null){this.position(e)}}}),1)}))}cancel(){this.show()}position(t){const e=super.position(t);const i=this.root.querySelector(".ql-tooltip-arrow");i.style.marginLeft="";if(e!==0){i.style.marginLeft=`${-1*e-i.offsetWidth/2}px`}return e}}class Qh extends Uh{constructor(t,e){if(e.modules.toolbar!=null&&e.modules.toolbar.container==null){e.modules.toolbar.container=Wh}super(t,e);this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new Gh(this.quill,this.options.bounds);if(t.container!=null){this.tooltip.root.appendChild(t.container);this.buildButtons(t.container.querySelectorAll("button"),Th);this.buildPickers(t.container.querySelectorAll("select"),Th)}}}Qh.DEFAULTS=tl({},Uh.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(!t){this.quill.format("link",false,Ma.sources.USER)}else{this.quill.theme.tooltip.edit()}}}}}});const Yh=[[{header:["1","2","3",false]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class Jh extends Ph{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen();this.root.querySelector("a.ql-action").addEventListener("click",(t=>{if(this.root.classList.contains("ql-editing")){this.save()}else{this.edit("link",this.preview.textContent)}t.preventDefault()}));this.root.querySelector("a.ql-remove").addEventListener("click",(t=>{if(this.linkRange!=null){const t=this.linkRange;this.restoreFocus();this.quill.formatText(t,"link",false,Jo.sources.USER);delete this.linkRange}t.preventDefault();this.hide()}));this.quill.on(Jo.events.SELECTION_CHANGE,((t,e,i)=>{if(t==null)return;if(t.length===0&&i===Jo.sources.USER){const[e,i]=this.quill.scroll.descendant(ju,t.index);if(e!=null){this.linkRange=new ta(t.index-i,e.length());const n=ju.formats(e.domNode);this.preview.textContent=n;this.preview.setAttribute("href",n);this.show();const r=this.quill.getBounds(this.linkRange);if(r!=null){this.position(r)}return}}else{delete this.linkRange}this.hide()}))}show(){super.show();this.root.removeAttribute("data-mode")}}class Xh extends Uh{constructor(t,e){if(e.modules.toolbar!=null&&e.modules.toolbar.container==null){e.modules.toolbar.container=Yh}super(t,e);this.quill.container.classList.add("ql-snow")}extendToolbar(t){if(t.container!=null){t.container.classList.add("ql-snow");this.buildButtons(t.container.querySelectorAll("button"),Th);this.buildPickers(t.container.querySelectorAll("select"),Th);this.tooltip=new Jh(this.quill,this.options.bounds);if(t.container.querySelector(".ql-link")){this.quill.keyboard.addBinding({key:"k",shortKey:true},((e,i)=>{t.handlers.link.call(t,!i.format.link)}))}}}}Xh.DEFAULTS=tl({},Uh.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const t=this.quill.getSelection();if(t==null||t.length===0)return;let e=this.quill.getText(t);if(/^\S+@\S+\.\S+$/.test(e)&&e.indexOf("mailto:")!==0){e=`mailto:${e}`}const{tooltip:i}=this.quill.theme;i.edit("link",e)}else{this.quill.format("link",false,Ma.sources.USER)}}}}}});Ma.register({"attributors/attribute/direction":Xa,"attributors/class/align":Va,"attributors/class/background":Ka,"attributors/class/color":Pa,"attributors/class/direction":tc,"attributors/class/font":nc,"attributors/class/size":lc,"attributors/style/align":Fa,"attributors/style/background":Wa,"attributors/style/color":Za,"attributors/style/direction":ec,"attributors/style/font":sc,"attributors/style/size":oc},true);Ma.register({"formats/align":Va,"formats/direction":tc,"formats/indent":vu,"formats/background":Wa,"formats/color":Za,"formats/font":nc,"formats/size":lc,"formats/blockquote":wu,"formats/code-block":Qa,"formats/header":mu,"formats/list":yu,"formats/bold":ku,"formats/code":Ya,"formats/italic":xu,"formats/link":ju,"formats/script":Ou,"formats/strike":Mu,"formats/underline":Eu,"formats/formula":Nu,"formats/image":Lu,"formats/video":Cu,"modules/syntax":Ru,"modules/table":Pu,"modules/toolbar":Ku,"themes/bubble":Qh,"themes/snow":Xh,"ui/icons":Th,"ui/picker":_h,"ui/icon-picker":zh,"ui/color-picker":Sh,"ui/tooltip":Ih},true);const tf=":host{display:block;font-family:Arial, sans-serif;--ir-editor-border-color:#cacfe7}.editor-wrapper{border-radius:4px;border:1px solid var(--ir-editor-border-color, #cacfe7);overflow:hidden;height:var(--ir-editor-height, 300px)}.editor-container{min-height:300px;padding:10px}.editor-wrapper.error{border-color:var(--red, 'red') !important}.ql-container,.ql-toolbar{border:0 !important}.ql-toolbar{border-bottom:1px solid var(--ir-editor-border-color, #cacfe7) !important}";const ef=tf;const nf="/*!\n * Quill Editor v2.0.3\n * https://quilljs.com\n * Copyright (c) 2017-2024, Slab\n * Copyright (c) 2014, Jason Chen\n * Copyright (c) 2013, salesforce.com\n */.ql-container{box-sizing:border-box;font-family:Helvetica,Arial,sans-serif;font-size:13px;height:100%;margin:0;position:relative}.ql-container.ql-disabled .ql-tooltip{visibility:hidden}.ql-container:not(.ql-disabled) li[data-list=checked]>.ql-ui,.ql-container:not(.ql-disabled) li[data-list=unchecked]>.ql-ui{cursor:pointer}.ql-clipboard{left:-100000px;height:1px;overflow-y:hidden;position:absolute;top:50%}.ql-clipboard p{margin:0;padding:0}.ql-editor{box-sizing:border-box;counter-reset:list-0 list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;line-height:1.42;height:100%;outline:none;overflow-y:auto;padding:12px 15px;tab-size:4;-moz-tab-size:4;text-align:left;white-space:pre-wrap;word-wrap:break-word}.ql-editor>*{cursor:text}.ql-editor p,.ql-editor ol,.ql-editor pre,.ql-editor blockquote,.ql-editor h1,.ql-editor h2,.ql-editor h3,.ql-editor h4,.ql-editor h5,.ql-editor h6{margin:0;padding:0}@supports (counter-set:none){.ql-editor p,.ql-editor h1,.ql-editor h2,.ql-editor h3,.ql-editor h4,.ql-editor h5,.ql-editor h6{counter-set:list-0 list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9}}@supports not (counter-set:none){.ql-editor p,.ql-editor h1,.ql-editor h2,.ql-editor h3,.ql-editor h4,.ql-editor h5,.ql-editor h6{counter-reset:list-0 list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9}}.ql-editor table{border-collapse:collapse}.ql-editor td{border:1px solid #000;padding:2px 5px}.ql-editor ol{padding-left:1.5em}.ql-editor li{list-style-type:none;padding-left:1.5em;position:relative}.ql-editor li>.ql-ui:before{display:inline-block;margin-left:-1.5em;margin-right:.3em;text-align:right;white-space:nowrap;width:1.2em}.ql-editor li[data-list=checked]>.ql-ui,.ql-editor li[data-list=unchecked]>.ql-ui{color:#777}.ql-editor li[data-list=bullet]>.ql-ui:before{content:'\\2022'}.ql-editor li[data-list=checked]>.ql-ui:before{content:'\\2611'}.ql-editor li[data-list=unchecked]>.ql-ui:before{content:'\\2610'}@supports (counter-set:none){.ql-editor li[data-list]{counter-set:list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9}}@supports not (counter-set:none){.ql-editor li[data-list]{counter-reset:list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9}}.ql-editor li[data-list=ordered]{counter-increment:list-0}.ql-editor li[data-list=ordered]>.ql-ui:before{content:counter(list-0, decimal) '. '}.ql-editor li[data-list=ordered].ql-indent-1{counter-increment:list-1}.ql-editor li[data-list=ordered].ql-indent-1>.ql-ui:before{content:counter(list-1, lower-alpha) '. '}@supports (counter-set:none){.ql-editor li[data-list].ql-indent-1{counter-set:list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9}}@supports not (counter-set:none){.ql-editor li[data-list].ql-indent-1{counter-reset:list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9}}.ql-editor li[data-list=ordered].ql-indent-2{counter-increment:list-2}.ql-editor li[data-list=ordered].ql-indent-2>.ql-ui:before{content:counter(list-2, lower-roman) '. '}@supports (counter-set:none){.ql-editor li[data-list].ql-indent-2{counter-set:list-3 list-4 list-5 list-6 list-7 list-8 list-9}}@supports not (counter-set:none){.ql-editor li[data-list].ql-indent-2{counter-reset:list-3 list-4 list-5 list-6 list-7 list-8 list-9}}.ql-editor li[data-list=ordered].ql-indent-3{counter-increment:list-3}.ql-editor li[data-list=ordered].ql-indent-3>.ql-ui:before{content:counter(list-3, decimal) '. '}@supports (counter-set:none){.ql-editor li[data-list].ql-indent-3{counter-set:list-4 list-5 list-6 list-7 list-8 list-9}}@supports not (counter-set:none){.ql-editor li[data-list].ql-indent-3{counter-reset:list-4 list-5 list-6 list-7 list-8 list-9}}.ql-editor li[data-list=ordered].ql-indent-4{counter-increment:list-4}.ql-editor li[data-list=ordered].ql-indent-4>.ql-ui:before{content:counter(list-4, lower-alpha) '. '}@supports (counter-set:none){.ql-editor li[data-list].ql-indent-4{counter-set:list-5 list-6 list-7 list-8 list-9}}@supports not (counter-set:none){.ql-editor li[data-list].ql-indent-4{counter-reset:list-5 list-6 list-7 list-8 list-9}}.ql-editor li[data-list=ordered].ql-indent-5{counter-increment:list-5}.ql-editor li[data-list=ordered].ql-indent-5>.ql-ui:before{content:counter(list-5, lower-roman) '. '}@supports (counter-set:none){.ql-editor li[data-list].ql-indent-5{counter-set:list-6 list-7 list-8 list-9}}@supports not (counter-set:none){.ql-editor li[data-list].ql-indent-5{counter-reset:list-6 list-7 list-8 list-9}}.ql-editor li[data-list=ordered].ql-indent-6{counter-increment:list-6}.ql-editor li[data-list=ordered].ql-indent-6>.ql-ui:before{content:counter(list-6, decimal) '. '}@supports (counter-set:none){.ql-editor li[data-list].ql-indent-6{counter-set:list-7 list-8 list-9}}@supports not (counter-set:none){.ql-editor li[data-list].ql-indent-6{counter-reset:list-7 list-8 list-9}}.ql-editor li[data-list=ordered].ql-indent-7{counter-increment:list-7}.ql-editor li[data-list=ordered].ql-indent-7>.ql-ui:before{content:counter(list-7, lower-alpha) '. '}@supports (counter-set:none){.ql-editor li[data-list].ql-indent-7{counter-set:list-8 list-9}}@supports not (counter-set:none){.ql-editor li[data-list].ql-indent-7{counter-reset:list-8 list-9}}.ql-editor li[data-list=ordered].ql-indent-8{counter-increment:list-8}.ql-editor li[data-list=ordered].ql-indent-8>.ql-ui:before{content:counter(list-8, lower-roman) '. '}@supports (counter-set:none){.ql-editor li[data-list].ql-indent-8{counter-set:list-9}}@supports not (counter-set:none){.ql-editor li[data-list].ql-indent-8{counter-reset:list-9}}.ql-editor li[data-list=ordered].ql-indent-9{counter-increment:list-9}.ql-editor li[data-list=ordered].ql-indent-9>.ql-ui:before{content:counter(list-9, decimal) '. '}.ql-editor .ql-indent-1:not(.ql-direction-rtl){padding-left:3em}.ql-editor li.ql-indent-1:not(.ql-direction-rtl){padding-left:4.5em}.ql-editor .ql-indent-1.ql-direction-rtl.ql-align-right{padding-right:3em}.ql-editor li.ql-indent-1.ql-direction-rtl.ql-align-right{padding-right:4.5em}.ql-editor .ql-indent-2:not(.ql-direction-rtl){padding-left:6em}.ql-editor li.ql-indent-2:not(.ql-direction-rtl){padding-left:7.5em}.ql-editor .ql-indent-2.ql-direction-rtl.ql-align-right{padding-right:6em}.ql-editor li.ql-indent-2.ql-direction-rtl.ql-align-right{padding-right:7.5em}.ql-editor .ql-indent-3:not(.ql-direction-rtl){padding-left:9em}.ql-editor li.ql-indent-3:not(.ql-direction-rtl){padding-left:10.5em}.ql-editor .ql-indent-3.ql-direction-rtl.ql-align-right{padding-right:9em}.ql-editor li.ql-indent-3.ql-direction-rtl.ql-align-right{padding-right:10.5em}.ql-editor .ql-indent-4:not(.ql-direction-rtl){padding-left:12em}.ql-editor li.ql-indent-4:not(.ql-direction-rtl){padding-left:13.5em}.ql-editor .ql-indent-4.ql-direction-rtl.ql-align-right{padding-right:12em}.ql-editor li.ql-indent-4.ql-direction-rtl.ql-align-right{padding-right:13.5em}.ql-editor .ql-indent-5:not(.ql-direction-rtl){padding-left:15em}.ql-editor li.ql-indent-5:not(.ql-direction-rtl){padding-left:16.5em}.ql-editor .ql-indent-5.ql-direction-rtl.ql-align-right{padding-right:15em}.ql-editor li.ql-indent-5.ql-direction-rtl.ql-align-right{padding-right:16.5em}.ql-editor .ql-indent-6:not(.ql-direction-rtl){padding-left:18em}.ql-editor li.ql-indent-6:not(.ql-direction-rtl){padding-left:19.5em}.ql-editor .ql-indent-6.ql-direction-rtl.ql-align-right{padding-right:18em}.ql-editor li.ql-indent-6.ql-direction-rtl.ql-align-right{padding-right:19.5em}.ql-editor .ql-indent-7:not(.ql-direction-rtl){padding-left:21em}.ql-editor li.ql-indent-7:not(.ql-direction-rtl){padding-left:22.5em}.ql-editor .ql-indent-7.ql-direction-rtl.ql-align-right{padding-right:21em}.ql-editor li.ql-indent-7.ql-direction-rtl.ql-align-right{padding-right:22.5em}.ql-editor .ql-indent-8:not(.ql-direction-rtl){padding-left:24em}.ql-editor li.ql-indent-8:not(.ql-direction-rtl){padding-left:25.5em}.ql-editor .ql-indent-8.ql-direction-rtl.ql-align-right{padding-right:24em}.ql-editor li.ql-indent-8.ql-direction-rtl.ql-align-right{padding-right:25.5em}.ql-editor .ql-indent-9:not(.ql-direction-rtl){padding-left:27em}.ql-editor li.ql-indent-9:not(.ql-direction-rtl){padding-left:28.5em}.ql-editor .ql-indent-9.ql-direction-rtl.ql-align-right{padding-right:27em}.ql-editor li.ql-indent-9.ql-direction-rtl.ql-align-right{padding-right:28.5em}.ql-editor li.ql-direction-rtl{padding-right:1.5em}.ql-editor li.ql-direction-rtl>.ql-ui:before{margin-left:.3em;margin-right:-1.5em;text-align:left}.ql-editor table{table-layout:fixed;width:100%}.ql-editor table td{outline:none}.ql-editor .ql-code-block-container{font-family:monospace}.ql-editor .ql-video{display:block;max-width:100%}.ql-editor .ql-video.ql-align-center{margin:0 auto}.ql-editor .ql-video.ql-align-right{margin:0 0 0 auto}.ql-editor .ql-bg-black{background-color:#000}.ql-editor .ql-bg-red{background-color:#e60000}.ql-editor .ql-bg-orange{background-color:#f90}.ql-editor .ql-bg-yellow{background-color:#ff0}.ql-editor .ql-bg-green{background-color:#008a00}.ql-editor .ql-bg-blue{background-color:#06c}.ql-editor .ql-bg-purple{background-color:#93f}.ql-editor .ql-color-white{color:#fff}.ql-editor .ql-color-red{color:#e60000}.ql-editor .ql-color-orange{color:#f90}.ql-editor .ql-color-yellow{color:#ff0}.ql-editor .ql-color-green{color:#008a00}.ql-editor .ql-color-blue{color:#06c}.ql-editor .ql-color-purple{color:#93f}.ql-editor .ql-font-serif{font-family:Georgia,Times New Roman,serif}.ql-editor .ql-font-monospace{font-family:Monaco,Courier New,monospace}.ql-editor .ql-size-small{font-size:.75em}.ql-editor .ql-size-large{font-size:1.5em}.ql-editor .ql-size-huge{font-size:2.5em}.ql-editor .ql-direction-rtl{direction:rtl;text-align:inherit}.ql-editor .ql-align-center{text-align:center}.ql-editor .ql-align-justify{text-align:justify}.ql-editor .ql-align-right{text-align:right}.ql-editor .ql-ui{position:absolute}.ql-editor.ql-blank::before{color:rgba(0,0,0,0.6);content:attr(data-placeholder);font-style:italic;left:15px;pointer-events:none;position:absolute;right:15px}.ql-snow.ql-toolbar:after,.ql-snow .ql-toolbar:after{clear:both;content:'';display:table}.ql-snow.ql-toolbar button,.ql-snow .ql-toolbar button{background:none;border:none;cursor:pointer;display:inline-block;float:left;height:24px;padding:3px 5px;width:28px}.ql-snow.ql-toolbar button svg,.ql-snow .ql-toolbar button svg{float:left;height:100%}.ql-snow.ql-toolbar button:active:hover,.ql-snow .ql-toolbar button:active:hover{outline:none}.ql-snow.ql-toolbar input.ql-image[type=file],.ql-snow .ql-toolbar input.ql-image[type=file]{display:none}.ql-snow.ql-toolbar button:hover,.ql-snow .ql-toolbar button:hover,.ql-snow.ql-toolbar button:focus,.ql-snow .ql-toolbar button:focus,.ql-snow.ql-toolbar button.ql-active,.ql-snow .ql-toolbar button.ql-active,.ql-snow.ql-toolbar .ql-picker-label:hover,.ql-snow .ql-toolbar .ql-picker-label:hover,.ql-snow.ql-toolbar .ql-picker-label.ql-active,.ql-snow .ql-toolbar .ql-picker-label.ql-active,.ql-snow.ql-toolbar .ql-picker-item:hover,.ql-snow .ql-toolbar .ql-picker-item:hover,.ql-snow.ql-toolbar .ql-picker-item.ql-selected,.ql-snow .ql-toolbar .ql-picker-item.ql-selected{color:#06c}.ql-snow.ql-toolbar button:hover .ql-fill,.ql-snow .ql-toolbar button:hover .ql-fill,.ql-snow.ql-toolbar button:focus .ql-fill,.ql-snow .ql-toolbar button:focus .ql-fill,.ql-snow.ql-toolbar button.ql-active .ql-fill,.ql-snow .ql-toolbar button.ql-active .ql-fill,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-fill,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-fill,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-fill,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-fill,.ql-snow.ql-toolbar .ql-picker-item:hover .ql-fill,.ql-snow .ql-toolbar .ql-picker-item:hover .ql-fill,.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-fill,.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-fill,.ql-snow.ql-toolbar button:hover .ql-stroke.ql-fill,.ql-snow .ql-toolbar button:hover .ql-stroke.ql-fill,.ql-snow.ql-toolbar button:focus .ql-stroke.ql-fill,.ql-snow .ql-toolbar button:focus .ql-stroke.ql-fill,.ql-snow.ql-toolbar button.ql-active .ql-stroke.ql-fill,.ql-snow .ql-toolbar button.ql-active .ql-stroke.ql-fill,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill{fill:#06c}.ql-snow.ql-toolbar button:hover .ql-stroke,.ql-snow .ql-toolbar button:hover .ql-stroke,.ql-snow.ql-toolbar button:focus .ql-stroke,.ql-snow .ql-toolbar button:focus .ql-stroke,.ql-snow.ql-toolbar button.ql-active .ql-stroke,.ql-snow .ql-toolbar button.ql-active .ql-stroke,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke,.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke,.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke,.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke,.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke,.ql-snow.ql-toolbar button:hover .ql-stroke-miter,.ql-snow .ql-toolbar button:hover .ql-stroke-miter,.ql-snow.ql-toolbar button:focus .ql-stroke-miter,.ql-snow .ql-toolbar button:focus .ql-stroke-miter,.ql-snow.ql-toolbar button.ql-active .ql-stroke-miter,.ql-snow .ql-toolbar button.ql-active .ql-stroke-miter,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke-miter,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke-miter,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke-miter,.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke-miter,.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter{stroke:#06c}@media (pointer:coarse){.ql-snow.ql-toolbar button:hover:not(.ql-active),.ql-snow .ql-toolbar button:hover:not(.ql-active){color:#444}.ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-fill,.ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-fill,.ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill,.ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill{fill:#444}.ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke,.ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke,.ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter,.ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter{stroke:#444}}.ql-snow{box-sizing:border-box}.ql-snow *{box-sizing:border-box}.ql-snow .ql-hidden{display:none}.ql-snow .ql-out-bottom,.ql-snow .ql-out-top{visibility:hidden}.ql-snow .ql-tooltip{position:absolute;transform:translateY(10px)}.ql-snow .ql-tooltip a{cursor:pointer;text-decoration:none}.ql-snow .ql-tooltip.ql-flip{transform:translateY(-10px)}.ql-snow .ql-formats{display:inline-block;vertical-align:middle}.ql-snow .ql-formats:after{clear:both;content:'';display:table}.ql-snow .ql-stroke{fill:none;stroke:#444;stroke-linecap:round;stroke-linejoin:round;stroke-width:2}.ql-snow .ql-stroke-miter{fill:none;stroke:#444;stroke-miterlimit:10;stroke-width:2}.ql-snow .ql-fill,.ql-snow .ql-stroke.ql-fill{fill:#444}.ql-snow .ql-empty{fill:none}.ql-snow .ql-even{fill-rule:evenodd}.ql-snow .ql-thin,.ql-snow .ql-stroke.ql-thin{stroke-width:1}.ql-snow .ql-transparent{opacity:.4}.ql-snow .ql-direction svg:last-child{display:none}.ql-snow .ql-direction.ql-active svg:last-child{display:inline}.ql-snow .ql-direction.ql-active svg:first-child{display:none}.ql-snow .ql-editor h1{font-size:2em}.ql-snow .ql-editor h2{font-size:1.5em}.ql-snow .ql-editor h3{font-size:1.17em}.ql-snow .ql-editor h4{font-size:1em}.ql-snow .ql-editor h5{font-size:.83em}.ql-snow .ql-editor h6{font-size:.67em}.ql-snow .ql-editor a{text-decoration:underline}.ql-snow .ql-editor blockquote{border-left:4px solid #ccc;margin-bottom:5px;margin-top:5px;padding-left:16px}.ql-snow .ql-editor code,.ql-snow .ql-editor .ql-code-block-container{background-color:#f0f0f0;border-radius:3px}.ql-snow .ql-editor .ql-code-block-container{margin-bottom:5px;margin-top:5px;padding:5px 10px}.ql-snow .ql-editor code{font-size:85%;padding:2px 4px}.ql-snow .ql-editor .ql-code-block-container{background-color:#23241f;color:#f8f8f2;overflow:visible}.ql-snow .ql-editor img{max-width:100%}.ql-snow .ql-picker{color:#444;display:inline-block;float:left;font-size:14px;font-weight:500;height:24px;position:relative;vertical-align:middle}.ql-snow .ql-picker-label{cursor:pointer;display:inline-block;height:100%;padding-left:8px;padding-right:2px;position:relative;width:100%}.ql-snow .ql-picker-label::before{display:inline-block;line-height:22px}.ql-snow .ql-picker-options{background-color:#fff;display:none;min-width:100%;padding:4px 8px;position:absolute;white-space:nowrap}.ql-snow .ql-picker-options .ql-picker-item{cursor:pointer;display:block;padding-bottom:5px;padding-top:5px}.ql-snow .ql-picker.ql-expanded .ql-picker-label{color:#ccc;z-index:2}.ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-fill{fill:#ccc}.ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-stroke{stroke:#ccc}.ql-snow .ql-picker.ql-expanded .ql-picker-options{display:block;margin-top:-1px;top:100%;z-index:1}.ql-snow .ql-color-picker,.ql-snow .ql-icon-picker{width:28px}.ql-snow .ql-color-picker .ql-picker-label,.ql-snow .ql-icon-picker .ql-picker-label{padding:2px 4px}.ql-snow .ql-color-picker .ql-picker-label svg,.ql-snow .ql-icon-picker .ql-picker-label svg{right:4px}.ql-snow .ql-icon-picker .ql-picker-options{padding:4px 0}.ql-snow .ql-icon-picker .ql-picker-item{height:24px;width:24px;padding:2px 4px}.ql-snow .ql-color-picker .ql-picker-options{padding:3px 5px;width:152px}.ql-snow .ql-color-picker .ql-picker-item{border:1px solid transparent;float:left;height:16px;margin:2px;padding:0;width:16px}.ql-snow .ql-picker:not(.ql-color-picker):not(.ql-icon-picker) svg{position:absolute;margin-top:-9px;right:0;top:50%;width:18px}.ql-snow .ql-picker.ql-header .ql-picker-label[data-label]:not([data-label=''])::before,.ql-snow .ql-picker.ql-font .ql-picker-label[data-label]:not([data-label=''])::before,.ql-snow .ql-picker.ql-size .ql-picker-label[data-label]:not([data-label=''])::before,.ql-snow .ql-picker.ql-header .ql-picker-item[data-label]:not([data-label=''])::before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-label]:not([data-label=''])::before,.ql-snow .ql-picker.ql-size .ql-picker-item[data-label]:not([data-label=''])::before{content:attr(data-label)}.ql-snow .ql-picker.ql-header{width:98px}.ql-snow .ql-picker.ql-header .ql-picker-label::before,.ql-snow .ql-picker.ql-header .ql-picker-item::before{content:'Normal'}.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"1\"]::before,.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"1\"]::before{content:'Heading 1'}.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"2\"]::before,.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"2\"]::before{content:'Heading 2'}.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"3\"]::before,.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"3\"]::before{content:'Heading 3'}.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"4\"]::before,.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"4\"]::before{content:'Heading 4'}.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"5\"]::before,.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"5\"]::before{content:'Heading 5'}.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"6\"]::before,.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"6\"]::before{content:'Heading 6'}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"1\"]::before{font-size:2em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"2\"]::before{font-size:1.5em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"3\"]::before{font-size:1.17em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"4\"]::before{font-size:1em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"5\"]::before{font-size:.83em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"6\"]::before{font-size:.67em}.ql-snow .ql-picker.ql-font{width:108px}.ql-snow .ql-picker.ql-font .ql-picker-label::before,.ql-snow .ql-picker.ql-font .ql-picker-item::before{content:'Sans Serif'}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=serif]::before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=serif]::before{content:'Serif'}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=monospace]::before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]::before{content:'Monospace'}.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=serif]::before{font-family:Georgia,Times New Roman,serif}.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]::before{font-family:Monaco,Courier New,monospace}.ql-snow .ql-picker.ql-size{width:98px}.ql-snow .ql-picker.ql-size .ql-picker-label::before,.ql-snow .ql-picker.ql-size .ql-picker-item::before{content:'Normal'}.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=small]::before,.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=small]::before{content:'Small'}.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=large]::before,.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=large]::before{content:'Large'}.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=huge]::before,.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=huge]::before{content:'Huge'}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=small]::before{font-size:10px}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=large]::before{font-size:18px}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=huge]::before{font-size:32px}.ql-snow .ql-color-picker.ql-background .ql-picker-item{background-color:#fff}.ql-snow .ql-color-picker.ql-color .ql-picker-item{background-color:#000}.ql-code-block-container{position:relative}.ql-code-block-container .ql-ui{right:5px;top:5px}.ql-toolbar.ql-snow{border:1px solid #ccc;box-sizing:border-box;font-family:'Helvetica Neue','Helvetica','Arial',sans-serif;padding:8px}.ql-toolbar.ql-snow .ql-formats{margin-right:15px}.ql-toolbar.ql-snow .ql-picker-label{border:1px solid transparent}.ql-toolbar.ql-snow .ql-picker-options{border:1px solid transparent;box-shadow:rgba(0,0,0,0.2) 0 2px 8px}.ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-label{border-color:#ccc}.ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options{border-color:#ccc}.ql-toolbar.ql-snow .ql-color-picker .ql-picker-item.ql-selected,.ql-toolbar.ql-snow .ql-color-picker .ql-picker-item:hover{border-color:#000}.ql-toolbar.ql-snow+.ql-container.ql-snow{border-top:0}.ql-snow .ql-tooltip{background-color:#fff;border:1px solid #ccc;box-shadow:0 0 5px #ddd;color:#444;padding:5px 12px;white-space:nowrap}.ql-snow .ql-tooltip::before{content:\"Visit URL:\";line-height:26px;margin-right:8px}.ql-snow .ql-tooltip input[type=text]{display:none;border:1px solid #ccc;font-size:13px;height:26px;margin:0;padding:3px 5px;width:170px}.ql-snow .ql-tooltip a.ql-preview{display:inline-block;max-width:200px;overflow-x:hidden;text-overflow:ellipsis;vertical-align:top}.ql-snow .ql-tooltip a.ql-action::after{border-right:1px solid #ccc;content:'Edit';margin-left:16px;padding-right:8px}.ql-snow .ql-tooltip a.ql-remove::before{content:'Remove';margin-left:8px}.ql-snow .ql-tooltip a{line-height:26px}.ql-snow .ql-tooltip.ql-editing a.ql-preview,.ql-snow .ql-tooltip.ql-editing a.ql-remove{display:none}.ql-snow .ql-tooltip.ql-editing input[type=text]{display:inline-block}.ql-snow .ql-tooltip.ql-editing a.ql-action::after{border-right:0;content:'Save';padding-right:0}.ql-snow .ql-tooltip[data-mode=link]::before{content:\"Enter link:\"}.ql-snow .ql-tooltip[data-mode=formula]::before{content:\"Enter formula:\"}.ql-snow .ql-tooltip[data-mode=video]::before{content:\"Enter video:\"}.ql-snow a{color:#06c}.ql-container.ql-snow{border:1px solid #ccc}";const rf=nf;function sf(t){const e=[];const i=[];if(t.bold)i.push("bold");if(t.italic)i.push("italic");if(t.underline)i.push("underline");if(t.strike)i.push("strike");if(i.length){e.push(i)}if(t.link)e.push(["link"]);if(t.image)e.push(["image"]);if(t.video)e.push(["video"]);if(t.clean)e.push(["clean"]);return e}const lf=class{constructor(i){t(this,i);this.textChange=e(this,"textChange",7);this.value="";this.readOnly=false;this.userCanEdit=true;this.editorValue=""}componentDidLoad(){const t={modules:{toolbar:{container:this.computedToolbar,handlers:{undo:()=>{if(this.editor){this.editor.history.undo();this.updateHistoryButtons()}},redo:()=>{if(this.editor){this.editor.history.redo();this.updateHistoryButtons()}}}},history:{delay:1e3,maxStack:100,userOnly:true}},placeholder:this.placeholder,readOnly:!this.userCanEdit||this.readOnly,theme:"snow"};const e=Ma.import("ui/icons");e["undo"]='<svg title="undo" xmlns="http://www.w3.org/2000/svg" height="18" width="18" viewBox="0 0 512 512"><path class="ql-fill" d="M48.5 224L40 224c-13.3 0-24-10.7-24-24L16 72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L98.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L185 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8L48.5 224z" /></svg>';e["redo"]='<svg title="redo" xmlns="http://www.w3.org/2000/svg" height="18" width="18" viewBox="0 0 512 512"><path class="ql-fill" d="M463.5 224l8.5 0c13.3 0 24-10.7 24-24l0-128c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1c-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8l119.5 0z"/></svg>';this.editor=new Ma(this.editorContainer,t);this.editor.getModule("toolbar").addHandler("undo",(()=>{this.editor.history.undo()}));this.editor.getModule("toolbar").addHandler("redo",(()=>{this.editor.history.redo()}));if(this.value){this.setEditorValue(this.value)}this.editor.on("text-change",((t,e,i)=>{if(i==="user"&&this.maxLength){const t=this.editor.getText();const e=t.endsWith("\n")?t.length-1:t.length;if(e>this.maxLength){const t=e-this.maxLength;this.editor.deleteText(this.maxLength,t,"user");return}}const n=this.editor.root.innerHTML;this.editorValue=n;this.textChange.emit(n)}))}handleValueChange(t,e){if(!t){this.setEditorValue(t);return}if(t!==e&&t!==this.editorValue){this.setEditorValue(t)}}onReadOnlyChange(t){if(this.editor){this.editor.enable(this.userCanEdit&&!t)}}onUserCanEditChange(t){if(this.editor){this.editor.enable(t&&!this.readOnly)}}disconnectedCallback(){if(this.editor){this.editor=null}}get computedToolbar(){return this.toolbarConfig?sf(this.toolbarConfig):[[{undo:"ql-undo"},{redo:"ql-redo"}],["bold","italic","underline","strike"],["link"],["clean"]]}setEditorValue(t){if(!this.editor){return}this.editor.clipboard.dangerouslyPasteHTML(t);requestAnimationFrame((()=>{const t=this.editor.getLength();this.editor.setSelection(t-1,0)}))}updateHistoryButtons(){const t=this.el.querySelector(".ql-undo");const e=this.el.querySelector(".ql-redo");if(!this.editor)return;if(this.editor.history.stack.undo.length===0){t&&(t.disabled=true)}else{t&&(t.disabled=false)}if(this.editor.history.stack.redo.length===0){e&&(e.disabled=true)}else{e&&(e.disabled=false)}}render(){return i("div",{key:"3034946bc58f13feb540ddc78b0874661d767b62",class:{"editor-wrapper":true,error:this.error}},i("div",{key:"d6077805255266d64eaf3143304f1ed8b2dff348",ref:t=>this.editorContainer=t,class:"editor-container"}))}get el(){return n(this)}static get watchers(){return{value:["handleValueChange"],readOnly:["onReadOnlyChange"],userCanEdit:["onUserCanEditChange"]}}};lf.style=ef+rf;export{lf as ir_text_editor};
//# sourceMappingURL=p-4008176d.entry.js.map