{"version":3,"names":["irBookingListingCss","IrBookingListingStyle0","IrBookingListing","this","bookingListingService","BookingListingService","roomService","RoomService","statusColors","componentWillLoad","updateUserSelection","rowCount","booking_listing","baseurl","axios","defaults","baseURL","ticket","setToken","token","initializeApp","onBookingListingChange","async","newValue","newTotal","total_count","totalPages","Math","ceil","showCost","some","booking","financial","gross_cost","ticketChanged","oldValue","isLoading","propertyid","Promise","all","getExposedBookingsCriteria","fetchLanguage","language","getExposedBookings","Object","assign","userSelection","is_to_export","error","console","handleSideBarToggle","e","detail","editBookingItem","getPaginationBounds","totalCount","startItem","currentPage","endItem","openModal","listingModalTimeout","setTimeout","listingModal","el","querySelector","editBooking","disconnectedCallback","clearTimeout","handleResetData","stopImmediatePropagation","stopPropagation","handleResetStoreData","handleBookingChanged","bookings","map","b","booking_nbr","renderItemRange","locales","entries","Lcz_View","Lcz_Of","updateData","start_row","end_row","render","h","Host","class","propertyId","scope","_a","Lcz_Booking","_b","Lcz_BookedOn","_c","Lcz_GuestSource","_d","Lcz_Services","_e","Lcz_Dates","_f","Lcz_Amount","customSlot","message","_g","Lcz_BookingBalance","_h","Lcz_ClickToSettle","slot","_j","Lcz_Balance","_k","Lcz_Cost","_l","Lcz_Status","length","colSpan","_m","Lcz_NoDataAvailable","_o","confirmationBG","status","code","key","onClick","cause","moment","booked_on","date","format","_formatTime","hour","toString","minute","src","origin","Icon","alt","Label","guest","first_name","last_name","occupancy","adult_nbr","Lcz_P","is_in_loyalty_mode","promo_key","xmlns","viewBox","height","width","Lcz_LoyaltyDiscountApplied","fill","d","stroke","Lcz_Coupon","agent","Lcz_AgentCode","replace","name","rooms","room","roomtype","from_date","to_date","formatAmount","currency","gross_total","due_amount","description","style","gap","title","variant","icon_name","onClickHanlder","size","btn_disabled","log","selectedValue","LabelAvailable","showFirstOption","onSelectChange","data","Array","from","_","i","text","value","onModalClosed","onIrSidebarToggle","bind","open","showCloseButton","sidebarStyles","background","_p","hasPrint","hasReceipt","is_from_front_desk","hasRoomEdit","hasRoomDelete","bookingNumber","hasRoomAdd"],"sources":["src/components/ir-booking-listing/ir-booking-listing.css?tag=ir-booking-listing&encapsulation=scoped","src/components/ir-booking-listing/ir-booking-listing.tsx"],"sourcesContent":[":host {\r\n  display: block;\r\n  height: 100%;\r\n}\r\n.logo {\r\n  height: 2rem;\r\n  width: 2rem;\r\n}\r\n.card {\r\n  overflow-x: auto;\r\n}\r\n.secondary-p {\r\n  font-size: 12px !important;\r\n}\r\n.h-screen {\r\n  height: 100%;\r\n}\r\n.price-span {\r\n  margin: 0;\r\n  margin-right: 5px;\r\n}\r\n.main-container {\r\n  height: 100%;\r\n  overflow-y: auto;\r\n}\r\n.bg-ir-red {\r\n  background: #ff4961;\r\n  height: 28px;\r\n  padding-top: 0 !important;\r\n  padding-bottom: 0 !important ;\r\n}\r\n.due-btn {\r\n  border: 1px solid #ff4961;\r\n  color: #ff4961;\r\n  cursor: pointer;\r\n  padding: 1px 0.25rem !important;\r\n  font-size: 12px !important;\r\n}\r\n.due-btn:hover {\r\n  background: #ff4961;\r\n  color: white;\r\n}\r\n.booking_number {\r\n  all: unset;\r\n  cursor: pointer;\r\n}\r\n.booking_number:hover {\r\n  color: #1e9ff2;\r\n}\r\n.in-out {\r\n  width: 150px !important;\r\n}\r\n.buttons-container {\r\n  gap: 10px;\r\n}\r\ntd ul {\r\n  width: max-content !important;\r\n}\r\ntd {\r\n  width: max-content !important ;\r\n}\r\n.date-p {\r\n  width: max-content !important;\r\n  min-width: 100%;\r\n  text-align: center !important;\r\n}\r\n.booking-label-gap {\r\n  gap: 5px;\r\n}\r\n","import { Booking } from '@/models/booking.dto';\r\nimport { BookingListingService } from '@/services/booking_listing.service';\r\nimport { RoomService } from '@/services/room.service';\r\nimport booking_listing, { updateUserSelection, onBookingListingChange } from '@/stores/booking_listing.store';\r\nimport locales from '@/stores/locales.store';\r\nimport { formatAmount } from '@/utils/utils';\r\nimport { Component, Host, Prop, State, Watch, h, Element, Listen } from '@stencil/core';\r\nimport axios from 'axios';\r\nimport moment from 'moment';\r\nimport { _formatTime } from '../ir-booking-details/functions';\r\n\r\n@Component({\r\n  tag: 'ir-booking-listing',\r\n  styleUrl: 'ir-booking-listing.css',\r\n  scoped: true,\r\n})\r\nexport class IrBookingListing {\r\n  @Element() el: HTMLElement;\r\n\r\n  @Prop() language: string = '';\r\n  @Prop() ticket: string = '';\r\n  @Prop() baseurl: string = '';\r\n  @Prop() propertyid: number;\r\n  @Prop() rowCount: number = 10;\r\n\r\n  @State() isLoading = false;\r\n  @State() currentPage = 1;\r\n  @State() totalPages = 1;\r\n  @State() oldStartValue = 0;\r\n  @State() editBookingItem: { booking: Booking; cause: 'edit' | 'payment' | 'delete' } | null = null;\r\n  @State() showCost = false;\r\n  private bookingListingService = new BookingListingService();\r\n  private roomService = new RoomService();\r\n  private listingModal: HTMLIrListingModalElement;\r\n  private listingModalTimeout: NodeJS.Timeout;\r\n  private statusColors = {\r\n    '001': 'badge-warning',\r\n    '002': 'badge-success',\r\n    '003': 'badge-danger',\r\n    '004': 'badge-danger',\r\n  };\r\n\r\n  componentWillLoad() {\r\n    updateUserSelection('end_row', this.rowCount);\r\n    booking_listing.rowCount = this.rowCount;\r\n    if (this.baseurl) {\r\n      axios.defaults.baseURL = this.baseurl;\r\n    }\r\n    if (this.ticket !== '') {\r\n      this.bookingListingService.setToken(this.ticket);\r\n      this.roomService.setToken(this.ticket);\r\n      booking_listing.token = this.ticket;\r\n      this.initializeApp();\r\n    }\r\n    onBookingListingChange('userSelection', async newValue => {\r\n      const newTotal = newValue.total_count;\r\n      this.totalPages = Math.ceil(newTotal / this.rowCount);\r\n    });\r\n    onBookingListingChange('bookings', async newValue => {\r\n      this.showCost = newValue.some(booking => booking.financial.gross_cost !== null && booking.financial.gross_cost > 0);\r\n    });\r\n  }\r\n  @Watch('ticket')\r\n  async ticketChanged(newValue: string, oldValue: string) {\r\n    if (newValue !== oldValue) {\r\n      this.bookingListingService.setToken(this.ticket);\r\n      this.roomService.setToken(this.ticket);\r\n      booking_listing.token = this.ticket;\r\n      this.initializeApp();\r\n    }\r\n  }\r\n\r\n  async initializeApp() {\r\n    try {\r\n      this.isLoading = true;\r\n      updateUserSelection('property_id', this.propertyid);\r\n      await Promise.all([this.bookingListingService.getExposedBookingsCriteria(this.propertyid), this.roomService.fetchLanguage(this.language, ['_BOOKING_LIST_FRONT'])]);\r\n      await this.bookingListingService.getExposedBookings({ ...booking_listing.userSelection, is_to_export: false });\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n\r\n  handleSideBarToggle(e: CustomEvent<boolean>) {\r\n    if (e.detail && this.editBookingItem) {\r\n      this.editBookingItem = null;\r\n    }\r\n  }\r\n\r\n  getPaginationBounds() {\r\n    const totalCount = booking_listing.userSelection.total_count;\r\n    const startItem = (this.currentPage - 1) * this.rowCount;\r\n    let endItem = this.currentPage * this.rowCount;\r\n    endItem = endItem > totalCount ? totalCount : endItem;\r\n    return { startItem, endItem, totalCount };\r\n  }\r\n\r\n  openModal() {\r\n    this.listingModalTimeout = setTimeout(() => {\r\n      this.listingModal = this.el.querySelector('ir-listing-modal');\r\n      this.listingModal.editBooking = this.editBookingItem;\r\n      this.listingModal.openModal();\r\n    }, 100);\r\n  }\r\n  disconnectedCallback() {\r\n    clearTimeout(this.listingModalTimeout);\r\n  }\r\n  @Listen('resetData')\r\n  async handleResetData(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    await this.bookingListingService.getExposedBookings({ ...booking_listing.userSelection, is_to_export: false });\r\n  }\r\n\r\n  @Listen('resetBookingData')\r\n  async handleResetStoreData(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    await this.bookingListingService.getExposedBookings({ ...booking_listing.userSelection, is_to_export: false });\r\n  }\r\n  @Listen('bookingChanged')\r\n  handleBookingChanged(e: CustomEvent<Booking>) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    booking_listing.bookings = [\r\n      ...booking_listing.bookings.map(b => {\r\n        if (b.booking_nbr === e.detail.booking_nbr) {\r\n          return e.detail;\r\n        }\r\n        return b;\r\n      }),\r\n    ];\r\n  }\r\n\r\n  renderItemRange() {\r\n    const { endItem, startItem, totalCount } = this.getPaginationBounds();\r\n    return `${locales.entries.Lcz_View} ${startItem + 1} - ${endItem} ${locales.entries.Lcz_Of} ${totalCount}`;\r\n  }\r\n\r\n  async updateData() {\r\n    const { endItem, startItem } = this.getPaginationBounds();\r\n    await this.bookingListingService.getExposedBookings({\r\n      ...booking_listing.userSelection,\r\n      is_to_export: false,\r\n      start_row: startItem,\r\n      end_row: endItem,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    if (this.isLoading || this.ticket === '') {\r\n      return <ir-loading-screen></ir-loading-screen>;\r\n    }\r\n    return (\r\n      <Host>\r\n        <ir-interceptor></ir-interceptor>\r\n        <ir-toast></ir-toast>\r\n        <div class=\"p-1 main-container\">\r\n          <ir-listing-header propertyId={this.propertyid} language={this.language} baseurl={this.baseurl}></ir-listing-header>\r\n          <section>\r\n            <div class=\"card p-1 flex-fill m-0 mt-2\">\r\n              <table class=\"table table-striped table-bordered no-footer dataTable\">\r\n                <thead>\r\n                  <tr>\r\n                    <th scope=\"col\" class=\"text-left\">\r\n                      {locales.entries?.Lcz_Booking}#\r\n                    </th>\r\n                    <th scope=\"col\">{locales.entries?.Lcz_BookedOn}</th>\r\n                    <th scope=\"col\">{locales.entries?.Lcz_GuestSource}</th>\r\n                    <th scope=\"col\" class=\"text-left services-cell\">\r\n                      {locales.entries?.Lcz_Services}\r\n                    </th>\r\n                    <th scope=\"col\" class=\"in-out\">\r\n                      {locales.entries?.Lcz_Dates}\r\n                    </th>\r\n                    <th scope=\"col\">\r\n                      <span class=\"price-span\">{locales.entries?.Lcz_Amount}</span>\r\n\r\n                      <ir-tooltip\r\n                        customSlot\r\n                        message={`<span style=\"width:100%;display:block;\">${locales.entries?.Lcz_BookingBalance}</span><span>${locales.entries?.Lcz_ClickToSettle}</span>`}\r\n                      >\r\n                        <span slot=\"tooltip-trigger\" class={'m-0 btn due-btn'}>\r\n                          {locales.entries?.Lcz_Balance}\r\n                        </span>\r\n                      </ir-tooltip>\r\n                    </th>\r\n                    {this.showCost && (\r\n                      <th scope=\"col\" class=\"services-cell\">\r\n                        {locales.entries?.Lcz_Cost}\r\n                      </th>\r\n                    )}\r\n                    <th scope=\"col\">{locales.entries?.Lcz_Status}</th>\r\n                    <th scope=\"col\">\r\n                      <p class=\"sr-only\">actions</p>\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody class=\"\">\r\n                  {booking_listing.bookings.length === 0 && (\r\n                    <tr>\r\n                      <td colSpan={8}>{locales.entries?.Lcz_NoDataAvailable}</td>\r\n                    </tr>\r\n                  )}\r\n                  {booking_listing.bookings?.map(booking => {\r\n                    let confirmationBG: string = this.statusColors[booking.status.code];\r\n                    return (\r\n                      <tr key={booking.booking_nbr}>\r\n                        <td class=\"text-left\">\r\n                          <button onClick={() => (this.editBookingItem = { booking, cause: 'edit' })} class=\"booking_number\">\r\n                            {booking.booking_nbr}\r\n                          </button>\r\n                        </td>\r\n                        <td>\r\n                          <p class=\"p-0 m-0 date-p\">{moment(booking.booked_on.date, 'YYYY-MM-DD').format('DD-MMM-YYYY')}</p>\r\n                          <p class=\"p-0 m-0 secondary-p\">{_formatTime(booking.booked_on.hour.toString(), booking.booked_on.minute.toString())}</p>\r\n                        </td>\r\n                        <td>\r\n                          <div class=\"h-100 d-flex align-items-center \">\r\n                            <img class=\"mr-2 logo\" src={booking.origin.Icon} alt={booking.origin.Label} />\r\n                            <div class=\"text-left\">\r\n                              <p class=\"p-0 m-0\">\r\n                                {booking.guest.first_name} {booking.guest.last_name ?? ''} {booking.occupancy.adult_nbr}\r\n                                {locales.entries.Lcz_P}\r\n                              </p>\r\n                              <div class={'d-flex align-items-center booking-label-gap'}>\r\n                                <p class=\"p-0 m-0 secondary-p\">{booking.origin.Label}</p>\r\n                                {booking.is_in_loyalty_mode && !booking.promo_key && (\r\n                                  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" height={18} width={18}>\r\n                                    <title>{locales.entries.Lcz_LoyaltyDiscountApplied}</title>\r\n                                    <path\r\n                                      fill=\"#fc6c85\"\r\n                                      d=\"M225.8 468.2l-2.5-2.3L48.1 303.2C17.4 274.7 0 234.7 0 192.8v-3.3c0-70.4 50-130.8 119.2-144C158.6 37.9 198.9 47 231 69.6c9 6.4 17.4 13.8 25 22.3c4.2-4.8 8.7-9.2 13.5-13.3c3.7-3.2 7.5-6.2 11.5-9c0 0 0 0 0 0C313.1 47 353.4 37.9 392.8 45.4C462 58.6 512 119.1 512 189.5v3.3c0 41.9-17.4 81.9-48.1 110.4L288.7 465.9l-2.5 2.3c-8.2 7.6-19 11.9-30.2 11.9s-22-4.2-30.2-11.9zM239.1 145c-.4-.3-.7-.7-1-1.1l-17.8-20c0 0-.1-.1-.1-.1c0 0 0 0 0 0c-23.1-25.9-58-37.7-92-31.2C81.6 101.5 48 142.1 48 189.5v3.3c0 28.5 11.9 55.8 32.8 75.2L256 430.7 431.2 268c20.9-19.4 32.8-46.7 32.8-75.2v-3.3c0-47.3-33.6-88-80.1-96.9c-34-6.5-69 5.4-92 31.2c0 0 0 0-.1 .1s0 0-.1 .1l-17.8 20c-.3 .4-.7 .7-1 1.1c-4.5 4.5-10.6 7-16.9 7s-12.4-2.5-16.9-7z\"\r\n                                    />\r\n                                  </svg>\r\n                                )}\r\n                                {booking.promo_key && (\r\n                                  <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" height={18} width={18}>\r\n                                    <title>{locales.entries.Lcz_Coupon + ':' + booking.promo_key}</title>\r\n                                    <path\r\n                                      stroke-linecap=\"round\"\r\n                                      stroke-linejoin=\"round\"\r\n                                      d=\"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 0 1 0 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 0 1 0-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375Z\"\r\n                                    />\r\n                                  </svg>\r\n                                )}\r\n                              </div>\r\n                              {booking.agent && <p class=\"m-0 secondary-p\">{locales.entries.Lcz_AgentCode.replace('%1', booking.agent.name)}</p>}\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n\r\n                        <td>\r\n                          <ul>\r\n                            {booking.rooms.map(room => (\r\n                              <li>{room.roomtype.name}</li>\r\n                            ))}\r\n                          </ul>\r\n                        </td>\r\n                        <td>\r\n                          <p class=\"p-0 m-0 date-p\">{moment(booking.from_date, 'YYYY-MM-DD').format('DD-MMM-YYYY')}</p>\r\n                          <p class=\"p-0 m-0 date-p\">{moment(booking.to_date, 'YYYY-MM-DD').format('DD-MMM-YYYY')}</p>\r\n                        </td>\r\n                        <td>\r\n                          <p class=\"p-0 m-0\">{formatAmount(booking.currency.code, booking.financial?.gross_total ?? 0)}</p>\r\n                          {booking.financial.due_amount > 0 && (\r\n                            <buuton\r\n                              onClick={() => {\r\n                                this.editBookingItem = { booking, cause: 'payment' };\r\n                                this.openModal();\r\n                              }}\r\n                              class=\"btn p-0 m-0 due-btn\"\r\n                            >\r\n                              {formatAmount(booking.currency.code, booking.financial.due_amount)}\r\n                            </buuton>\r\n                          )}\r\n                        </td>\r\n                        {this.showCost && (\r\n                          <td>\r\n                            {booking.financial.gross_cost !== null && booking.financial.gross_cost === 0 ? '_' : formatAmount(booking.currency.code, booking.financial.gross_cost)}\r\n                          </td>\r\n                        )}\r\n\r\n                        <td>\r\n                          <p class={`m-0 badge ${confirmationBG}`}>{booking.status.description}</p>\r\n                        </td>\r\n                        <td>\r\n                          <div class=\"d-flex justify-content-center align-items-center\" style={{ gap: '8px' }}>\r\n                            <ir-button title=\"Edit booking\" variant=\"icon\" icon_name=\"edit\" onClickHanlder={() => (this.editBookingItem = { booking, cause: 'edit' })}></ir-button>\r\n                            <ir-button\r\n                              title=\"Delete booking\"\r\n                              style={{ '--icon-button-color': '#ff4961', '--icon-button-hover-color': '#FF1635' }}\r\n                              variant=\"icon\"\r\n                              icon_name=\"trash\"\r\n                              onClickHanlder={() => {\r\n                                this.editBookingItem = { booking, cause: 'delete' };\r\n                                this.openModal();\r\n                              }}\r\n                            ></ir-button>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n              {this.totalPages > 1 && (\r\n                <section class={'d-flex flex-column flex-md-row align-items-center justify-content-between pagination-container'}>\r\n                  <p class=\"m-0 mb-1 mb-md-0\">{this.renderItemRange()}</p>\r\n                  <div class={'d-flex align-items-center buttons-container'}>\r\n                    <ir-button\r\n                      size=\"sm\"\r\n                      btn_disabled={this.currentPage === 1}\r\n                      onClickHanlder={async () => {\r\n                        this.currentPage = 1;\r\n                        await this.updateData();\r\n                      }}\r\n                    >\r\n                      <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"14\" viewBox=\"0 0 512 512\">\r\n                        <path\r\n                          fill=\"white\"\r\n                          d=\"M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z\"\r\n                        />\r\n                      </svg>\r\n                    </ir-button>\r\n                    <ir-button\r\n                      size=\"sm\"\r\n                      btn_disabled={this.currentPage === 1}\r\n                      onClickHanlder={async () => {\r\n                        this.currentPage = this.currentPage - 1;\r\n                        console.log(this.currentPage);\r\n                        await this.updateData();\r\n                      }}\r\n                    >\r\n                      <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"8.75\" viewBox=\"0 0 320 512\">\r\n                        <path\r\n                          fill=\"white\"\r\n                          d=\"M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z\"\r\n                        />\r\n                      </svg>\r\n                    </ir-button>\r\n                    <ir-select\r\n                      selectedValue={this.currentPage.toString()}\r\n                      LabelAvailable={false}\r\n                      showFirstOption={false}\r\n                      onSelectChange={async e => {\r\n                        this.currentPage = +e.detail;\r\n                        await this.updateData();\r\n                      }}\r\n                      data={Array.from(Array(this.totalPages), (_, i) => i + 1).map(i => ({\r\n                        text: i.toString(),\r\n                        value: i.toString(),\r\n                      }))}\r\n                    ></ir-select>\r\n                    <ir-button\r\n                      size=\"sm\"\r\n                      btn_disabled={this.currentPage === this.totalPages}\r\n                      onClickHanlder={async () => {\r\n                        this.currentPage = this.currentPage + 1;\r\n                        await this.updateData();\r\n                      }}\r\n                    >\r\n                      <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"8.75\" viewBox=\"0 0 320 512\">\r\n                        <path\r\n                          fill=\"white\"\r\n                          d=\"M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z\"\r\n                        />\r\n                      </svg>\r\n                    </ir-button>\r\n                    <ir-button\r\n                      size=\"sm\"\r\n                      btn_disabled={this.currentPage === this.totalPages}\r\n                      onClickHanlder={async () => {\r\n                        this.currentPage = this.totalPages;\r\n                        console.log(this.currentPage);\r\n                        await this.updateData();\r\n                      }}\r\n                    >\r\n                      <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"14\" viewBox=\"0 0 512 512\">\r\n                        <path\r\n                          fill=\"white\"\r\n                          d=\"M470.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 256 265.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160zm-352 160l160-160c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L210.7 256 73.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0z\"\r\n                        />\r\n                      </svg>\r\n                    </ir-button>\r\n                  </div>\r\n                </section>\r\n              )}\r\n            </div>\r\n          </section>\r\n        </div>\r\n        {this.editBookingItem && <ir-listing-modal onModalClosed={() => (this.editBookingItem = null)}></ir-listing-modal>}\r\n        <ir-sidebar\r\n          onIrSidebarToggle={this.handleSideBarToggle.bind(this)}\r\n          open={this.editBookingItem !== null && this.editBookingItem.cause === 'edit'}\r\n          showCloseButton={this.editBookingItem !== null}\r\n          sidebarStyles={{ width: this.editBookingItem ? '80rem' : 'var(--sidebar-width,40rem)', background: '#F2F3F8' }}\r\n        >\r\n          {this.editBookingItem?.cause === 'edit' && (\r\n            <ir-booking-details\r\n              slot=\"sidebar-body\"\r\n              hasPrint\r\n              hasReceipt\r\n              is_from_front_desk\r\n              propertyid={this.propertyid}\r\n              hasRoomEdit\r\n              hasRoomDelete\r\n              bookingNumber={this.editBookingItem.booking.booking_nbr}\r\n              ticket={this.ticket}\r\n              baseurl={this.baseurl}\r\n              language={this.language}\r\n              hasRoomAdd\r\n            ></ir-booking-details>\r\n          )}\r\n        </ir-sidebar>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}