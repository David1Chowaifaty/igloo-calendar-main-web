import{r as t,c as e,h as i,H as s,F as o,g as a}from"./p-d239357b.js";import{a as n}from"./p-bf44a732.js";import{a as r}from"./p-6fec77c0.js";import{I as c}from"./p-1412b72f.js";import{T as h}from"./p-f8b7c0cd.js";import{R as l}from"./p-34b319c3.js";import{S as d}from"./p-0e0f732a.js";import{l as p}from"./p-4e493fea.js";import{z as f}from"./p-748cfd41.js";import"./p-c5894a47.js";import"./p-99cb260a.js";const m=".page-loader.sc-ir-interceptor{width:1.25rem;height:1.25rem;border:2.5px solid #3f3f3f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}.loaderContainer.sc-ir-interceptor{padding:20px;display:flex;align-items:center;justify-content:center;border-radius:5px;background:white}.loadingScreenContainer.sc-ir-interceptor{position:fixed;top:0;left:0;height:100vh;width:100vw;z-index:100000;background:rgba(0, 0, 0, 0.2);pointer-events:all;display:flex;align-items:center;justify-content:center}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const u=m;const g=class{constructor(i){t(this,i);this.toast=e(this,"toast",7)}handledEndpoints=["/Get_Exposed_Calendar","/ReAllocate_Exposed_Room","/Get_Exposed_Bookings","/UnBlock_Exposed_Unit"];suppressToastEndpoints=[];isShown=false;isLoading=false;isUnassignedUnit=false;endpointsCount=0;isPageLoadingStopped=null;showModal;requestUrl;baseOTPUrl;email;toast;otpModal;pendingConfig;pendingResolve;pendingReject;response;handleStopPageLoading(t){this.isLoading=false;this.isPageLoadingStopped=t.detail}componentWillLoad(){this.setupAxiosInterceptors()}setupAxiosInterceptors(){n.interceptors.request.use(this.handleRequest.bind(this),this.handleError.bind(this));n.interceptors.response.use(this.handleResponse.bind(this),this.handleError.bind(this))}extractEndpoint(t){return t.split("?")[0]}isHandledEndpoint(t){return this.handledEndpoints.includes(t)}handleRequest(t){const e=this.extractEndpoint(t.url);r[e]="pending";t.params=t.params||{};if(this.isHandledEndpoint(e)&&this.isPageLoadingStopped!==e){if(e!=="/Get_Exposed_Calendar"){this.isLoading=true}else{if(this.endpointsCount>0){this.isLoading=true}}}if(e==="/Get_Exposed_Calendar"){this.endpointsCount=this.endpointsCount+1}return t}async handleResponse(t){const e=this.extractEndpoint(t.config.url);if(this.isHandledEndpoint(e)){this.isLoading=false;this.isPageLoadingStopped=null}r[e]="done";if(e==="/Validate_Exposed_OTP"){return t}if(t.data.ExceptionCode==="OTP"){return this.handleOtpResponse({response:t,extractedUrl:e})}if(t.data.ExceptionMsg?.trim()){this.handleResponseExceptions({response:t,extractedUrl:e})}return t}handleResponseExceptions({response:t,extractedUrl:e}){this.handleError(t.data.ExceptionMsg,e,t.data.ExceptionCode);throw new c(t.data.ExceptionMsg,t.data.ExceptionCode)}handleOtpResponse({extractedUrl:t,response:e}){this.showModal=true;this.email=e.data.ExceptionMsg;const i=t.slice(1);this.baseOTPUrl=i;if(i==="Check_OTP_Necessity"){let t;try{const i=typeof e.config.data==="string"?JSON.parse(e.config.data):e.config.data;t=i.METHOD_NAME}catch(e){console.error("Failed to parse request body for METHOD_NAME",e);t=i}this.requestUrl=t}else{this.requestUrl=i}this.pendingConfig=e.config;this.response=e;return new Promise(((t,e)=>{this.pendingResolve=t;this.pendingReject=e;setTimeout((()=>{this.otpModal?.openModal()}),10)}))}handleError(t,e,i){const s=this.suppressToastEndpoints.includes(e);if(!s||s&&!i){this.toast.emit({type:"error",title:t,description:"",position:"top-right"})}return Promise.reject(t)}async handleOtpFinished(t){if(!this.pendingConfig||!this.pendingResolve||!this.pendingReject){return}const{otp:e,type:i}=t.detail;if(i==="cancel"){const t={config:this.pendingConfig,data:{cancelled:true,baseOTPUrl:this.baseOTPUrl},status:0,statusText:"OTP Cancelled",headers:{},request:{}};this.pendingResolve(t)}else if(i==="success"){if(!e){this.pendingReject(new Error("OTP cancelled by user"))}else if(this.baseOTPUrl==="Check_OTP_Necessity"){this.pendingResolve(this.response)}else{try{const t={...this.pendingConfig,data:typeof this.pendingConfig.data==="string"?JSON.parse(this.pendingConfig.data):this.pendingConfig.data||{}};const e=await n.request(t);this.pendingResolve(e)}catch(t){this.pendingReject(t)}}}this.pendingConfig=undefined;this.pendingResolve=undefined;this.pendingReject=undefined;this.showModal=false;this.baseOTPUrl=null}render(){return i(s,{key:"b89efa2c138748154cbaac42703416e5bc9a3146"},this.isLoading&&!this.isPageLoadingStopped&&i("div",{key:"6eb54b85bdd56d527bab2b5523a6640142b7e96f",class:"loadingScreenContainer"},i("div",{key:"c06b3c544a5b186fe0109e62e5ecf97379fce32a",class:"loaderContainer"},i("ir-spinner",{key:"1cb82d9c12406e5293489e219defa826c806b12b"}))),this.showModal&&i("ir-otp-modal",{key:"0fc81dd1be93382382140b5fa643159f900e2f08",email:this.email,baseOTPUrl:this.baseOTPUrl,requestUrl:this.requestUrl,ref:t=>this.otpModal=t,onOtpFinished:this.handleOtpFinished.bind(this)}))}};g.style=u;const b=".otp-input-wrapper.sc-ir-otp{display:flex;gap:0.5rem;justify-content:space-evenly}.otp-digit.sc-ir-otp{--otp-size:3rem;width:var(--otp-size) !important;height:var(--otp-size) !important;padding:0;font-size:24px;font-weight:500;text-align:center;background-color:#fff;padding:0 !important}.otp-digit.sc-ir-otp:disabled{background-color:#e9ecef;cursor:not-allowed}input[type='number'].sc-ir-otp::-webkit-inner-spin-button,input[type='number'].sc-ir-otp::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type='number'].sc-ir-otp{-moz-appearance:textfield}@media (max-width: 480px){.otp-digit.sc-ir-otp{width:35px;height:45px;font-size:20px}.otp-input-wrapper.sc-ir-otp{gap:6px}}@media (max-width: 360px){.otp-digit.sc-ir-otp{width:30px;height:40px;font-size:18px}.otp-input-wrapper.sc-ir-otp{gap:4px}}";const x=b;const w=class{constructor(i){t(this,i);this.otpChange=e(this,"otpChange",7);this.otpComplete=e(this,"otpComplete",7)}length=6;defaultValue;disabled=false;placeholder="";type="number";autoFocus=true;secure=false;numbersOnly=false;otpChange;otpComplete;otpValues=[];inputRefs=[];componentWillLoad(){this.otpValues=Array(this.length).fill("");if(this.defaultValue){this.setValue(this.defaultValue)}}componentDidLoad(){if(this.autoFocus&&this.inputRefs[0]){setTimeout((()=>{this.inputRefs[0].focus()}),0)}}handleLengthChange(t){if(t<1)return;const e=this.otpValues.length;if(t>e){this.otpValues=[...this.otpValues,...Array(t-e).fill("")]}else if(t<e){this.otpValues=this.otpValues.slice(0,t)}this.emitChanges()}handleInput=(t,e)=>{const i=t.target;let s=i.value;if(this.numbersOnly){s=s.replace(/[^0-9]/g,"")}if(s.length>1){s=s.slice(-1);i.value=s}this.otpValues[e]=s;this.emitChanges();if(s&&e<this.length-1){this.inputRefs[e+1].focus()}};handleKeyDown=(t,e)=>{switch(t.key){case"Backspace":if(!this.otpValues[e]&&e>0){this.inputRefs[e-1].focus();t.preventDefault()}break;case"Delete":this.otpValues[e]="";this.emitChanges();break;case"ArrowLeft":if(e>0){this.inputRefs[e-1].focus();t.preventDefault()}break;case"ArrowRight":if(e<this.length-1){this.inputRefs[e+1].focus();t.preventDefault()}break;case"Home":this.inputRefs[0].focus();t.preventDefault();break;case"End":this.inputRefs[this.length-1].focus();t.preventDefault();break}};handlePaste=(t,e)=>{t.preventDefault();const i=t.clipboardData?.getData("text")||"";const s=this.numbersOnly?i.replace(/[^0-9]/g,""):i;for(let t=0;t<Math.min(s.length,this.length-e);t++){this.otpValues[e+t]=s[t]}this.inputRefs.forEach(((t,e)=>{t.value=this.otpValues[e]||""}));const o=this.otpValues.findIndex((t=>!t));if(o!==-1&&o<this.length){this.inputRefs[o].focus()}else{this.inputRefs[this.length-1].focus()}this.emitChanges()};handleFocus=t=>{const e=t.target;if(e.value){setTimeout((()=>e.select()),0)}};emitChanges(){const t=this.otpValues.join("");this.otpChange.emit(t);if(this.otpValues.every((t=>t!==""))&&this.otpValues.length===this.length){this.otpComplete.emit(t)}}clear(){this.otpValues=Array(this.length).fill("");this.inputRefs.forEach((t=>{t.value=""}));this.emitChanges();if(this.inputRefs[0]){this.inputRefs[0].focus()}}setValue(t){const e=t.split("");for(let t=0;t<this.length;t++){this.otpValues[t]=t<e.length?e[t]:""}this.inputRefs.forEach(((t,e)=>{t.value=this.otpValues[e]||""}));this.emitChanges()}render(){return i(s,{key:"458851ac6bf02f350103db33f1439ede7d73948e",class:"otp-input-container"},i("div",{key:"ba64268ce86fbee4414655140bad837be0f8e9a3",class:"otp-input-wrapper"},Array(this.length).fill(null).map(((t,e)=>i("input",{ref:t=>this.inputRefs[e]=t,type:this.type,inputmode:this.numbersOnly?"numeric":"text",class:"otp-digit form-control input-sm",maxlength:"1",placeholder:this.placeholder,disabled:this.disabled,autocomplete:"one-time-code",value:this.otpValues[e],onInput:t=>this.handleInput(t,e),onKeyDown:t=>this.handleKeyDown(t,e),onPaste:t=>this.handlePaste(t,e),onFocus:this.handleFocus,"aria-label":`Digit ${e+1} of ${this.length}`})))))}static get watchers(){return{length:["handleLengthChange"]}}};w.style=x;const y=":host{display:block}:root{--otp-modal-padding:1.5rem}.modal-backdrop{background-color:rgba(0, 0, 0, 0.5) !important}.otp-modal-header{border-bottom:0px !important}.otp-modal{z-index:9999999 !important;border:none;padding:0 !important;box-sizing:border-box;border:1px solid rgba(0, 0, 0, 0.2);border-radius:0.35rem;outline:0}.otp-modal-content{background-color:white;border:none;border-radius:0.35rem;outline:0}.otp-modal-title{margin-bottom:0;line-height:1.45}.otp-modal-body{max-height:100% !important;padding:0 var(--otp-modal-padding)}.otp-modal-header{display:flex;justify-content:space-between;padding:var(--otp-modal-padding);padding-bottom:1rem;border-top-left-radius:0.35rem;border-top-right-radius:0.35rem}.otp-modal-dialog{z-index:9999999 !important}.otp-modal-footer{border-top:0 !important;display:flex;gap:0.5rem;flex-direction:column;padding:var(--otp-modal-padding);padding-top:0.5rem !important}.verification-message{max-width:90%}.modal-loading-container{height:250px;width:80vw}@media (min-width: 768px){.otp-modal-dialog,.otp-modal-content{width:fit-content !important}.otp-modal-footer{flex-direction:row;align-items:center}.modal-loading-container{width:380px !important}.verification-message{max-width:350px !important}}";const v=y;const k=class{constructor(i){t(this,i);this.otpFinished=e(this,"otpFinished",7)}language="en";resendTimer=60;requestUrl;baseOTPUrl;showResend=true;email;otpLength=6;ticket;otp="";error="";isLoading=false;timer=60;dialogRef;timerInterval;systemService=new d;roomService=new l;tokenService=new h;otpVerificationSchema=f.object({email:f.string().nonempty(),requestUrl:f.string().nonempty(),otp:f.string().length(this.otpLength)});otpFinished;isInitializing;componentWillLoad(){if(this.ticket){this.tokenService.setToken(this.ticket)}this.fetchLocale()}handleTicketChange(t,e){if(t!==e){this.tokenService.setToken(t);this.fetchLocale()}}handleKeyDownChange(t){if(t.key==="Escape"&&this.dialogRef?.open){t.preventDefault()}}async openModal(){this.resetState();if(typeof this.dialogRef.showModal==="function"){this.dialogRef.showModal()}else{this.dialogRef.setAttribute("open","")}if(this.showResend)this.startTimer();await this.focusFirstInput()}async closeModal(){if(typeof this.dialogRef.close==="function"){this.dialogRef.close()}else{this.dialogRef.removeAttribute("open")}this.otp=null;this.clearTimer()}async fetchLocale(){if(!this.tokenService.getToken()){return}this.isInitializing=true;await this.roomService.fetchLanguage(this.language,["_USER_MGT"]);this.isInitializing=false}resetState(){this.otp="";this.error="";this.isLoading=false;this.timer=60;this.clearTimer()}startTimer(){this.clearTimer();this.timerInterval=window.setInterval((()=>{if(this.timer>0){this.timer--}else{this.clearTimer()}}),1e3)}clearTimer(){if(this.timerInterval){clearInterval(this.timerInterval);this.timerInterval=null}}async focusFirstInput(){await new Promise((t=>setTimeout(t,50)));const t=this.dialogRef.querySelector("input");t&&t.focus()}handleOtpComplete=t=>{this.error="";this.otp=t.detail};async verifyOtp(){if(this.otp.length<this.otpLength)return;this.isLoading=true;this.otpVerificationSchema.parse({otp:this.otp,requestUrl:this.requestUrl,email:this.email});try{await this.systemService.validateOTP({METHOD_NAME:this.requestUrl,OTP:this.otp});this.otpFinished.emit({otp:this.otp,type:"success"});this.closeModal()}catch(t){this.error="Verification failed. Please try again."}finally{this.isLoading=false}}async resendOtp(){if(this.timer>0)return;try{await this.systemService.resendOTP({METHOD_NAME:this.requestUrl});this.timer=60;this.startTimer()}catch(t){console.log(t)}}handleCancelClicked(){if(this.baseOTPUrl==="Check_OTP_Necessity"){this.closeModal();this.otpFinished.emit({otp:null,type:"cancelled"});return}window.location.reload()}disconnectedCallback(){this.clearTimer()}render(){return i(s,{key:"b70e6fc56abbceba82d5b355bb0854392d2b462b"},i("dialog",{key:"d78c3daeb381d7f5a05c8dbae7160c3152ecd19f",ref:t=>this.dialogRef=t,class:"otp-modal","aria-modal":"true"},i("form",{key:"915b37a59a27e7cc8d8fce683a1b63cb45a03197",method:"dialog",class:"otp-modal-content"},this.isInitializing||!p.entries?i("div",{class:"d-flex align-items-center justify-content-center modal-loading-container"},i("ir-spinner",null)):i(o,null,i("header",{class:"otp-modal-header"},i("h5",{class:"otp-modal-title"},p.entries.Lcz_VerifyYourIdentity)),i("section",{class:"otp-modal-body d-flex align-items-center flex-column"},i("p",{class:"verification-message text-truncate"},p.entries.Lcz_WeSentYuoVerificationCode," ",this.email),i("ir-otp",{autoFocus:true,length:this.otpLength,defaultValue:this.otp,onOtpComplete:this.handleOtpComplete}),this.error&&i("p",{class:"text-danger small mt-1 p-0 mb-0"},this.error),this.showResend&&i(o,null,this.timer>0?i("p",{class:"small mt-1"},p.entries.Lcz_ResendCode," 00:",String(this.timer).padStart(2,"0")):i("ir-button",{class:"mt-1",btn_color:"link",onClickHandler:t=>{t.stopImmediatePropagation();t.stopPropagation();this.resendOtp()},size:"sm",text:"Didnâ€™t receive code? Resend"}))),i("footer",{class:"otp-modal-footer justify-content-auto"},i("ir-button",{class:"w-100",btn_styles:"flex-fill",text:p.entries.Lcz_Cancel,btn_color:"secondary",onClick:this.handleCancelClicked.bind(this)}),i("ir-button",{class:"w-100",btn_styles:"flex-fill",text:p.entries.Lcz_VerifyNow,isLoading:this.isLoading,btn_disabled:this.otp?.length<this.otpLength||this.isLoading,onClick:()=>this.verifyOtp()}))))))}static get watchers(){return{ticket:["handleTicketChange"]}}};k.style=v;const T="button.sc-ir-toast,p.sc-ir-toast,h3.sc-ir-toast,div.sc-ir-toast{all:unset}.sc-ir-toast-h{--rd-viewport-padding:25px;--rd-success:#2b9a66;position:fixed;bottom:0;right:0;display:flex;flex-direction:column;padding:var(--rd-viewport-padding);gap:10px;max-width:100vw;margin:0;list-style:none;z-index:2147483647;outline:none;pointer-events:none;-webkit-user-select:none;user-select:none}@media (prefers-color-scheme: dark){.sc-ir-toast-h{--rd-success:#33b074}}p.sc-ir-toast{color:hsla(222.2, 84%, 4.9%, 0.8);font-size:13px;line-height:1.3}h1.sc-ir-toast,h2.sc-ir-toast,h3.sc-ir-toast,h4.sc-ir-toast,h5.sc-ir-toast,h6.sc-ir-toast{font-weight:500;color:hsl(222.2, 84%, 4.9%);font-size:15px}[position='top-left'].sc-ir-toast-h{top:0;left:0}[position='top-right'].sc-ir-toast-h{top:0;right:0}[position='bottom-left'].sc-ir-toast-h{bottom:0;left:0}[position='bottom-right'].sc-ir-toast-h{bottom:0;right:0}.icon-container.sc-ir-toast{height:25px;width:25px;border-radius:25px;display:flex;align-items:center;justify-content:center;padding:0;margin:0}.icon-container.sc-ir-toast>svg.sc-ir-toast{margin:0;color:white;stroke-width:5px}.success.sc-ir-toast{background-color:var(--rd-success)}.error.sc-ir-toast{background-color:red}.ToastRoot.sc-ir-toast{background-color:hsl(0, 0%, 100%);border-radius:0.5rem;box-shadow:hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px;padding:15px;display:grid;grid-template-areas:'title action' 'description action';grid-template-columns:auto max-content;column-gap:15px;align-items:center;pointer-events:none;opacity:0;border:1px solid hsl(214.3, 31.8%, 91.4%);position:relative}.ToastRoot[data-state='open'].sc-ir-toast{pointer-events:all;animation:slideIn 150ms cubic-bezier(0.16, 1, 0.3, 1)}.ToastRoot[data-state='closed'].sc-ir-toast{pointer-events:none;animation:hide 100ms ease-in}@-webkit-keyframes slideIn{from{transform:translateX(var(--rd-offset-width))}to{transform:translateX(0)}}@keyframes slideIn{from{transform:translateX(var(--rd-offset-width))}to{transform:translateX(0)}}.ToastTitle.sc-ir-toast{grid-area:title;font-weight:500;color:hsl(222.2, 84%, 4.9%);font-size:15px}.ToastDescription.sc-ir-toast{grid-area:description;margin:0;margin-top:5px;color:hsla(222.2, 84%, 4.9%, 0.8);font-size:13px;line-height:1.3;overflow:hidden;text-overflow:ellipsis}.ToastAction.sc-ir-toast{grid-area:action}";const _=T;const C=class{constructor(e){t(this,e)}get element(){return a(this)}position="bottom-left";toasts=[];render(){return i("ir-toast-provider",{key:"5e2da58b75981030b3e928a8cb5db511f9588cc2"})}};C.style=_;const z=":host{--toast-shadow:var(--wa-shadow-l);--toast-translate:16px;--toast-accent-fg:#0f172a;display:block;box-sizing:border-box;max-width:min(420px, calc(100vw - 32px));pointer-events:auto;font-family:inherit}:host([data-position*='left']){--toast-translate:-16px}.toast{box-shadow:var(--toast-shadow);animation:toast-enter 220ms cubic-bezier(0.16, 1, 0.3, 1) forwards;border-radius:var(--wa-panel-border-radius)}:host([data-leaving='true']) .toast{animation:toast-exit 200ms ease forwards}:host(:focus-within) .toast{box-shadow:0 0 0 2px #93c5fd, var(--toast-shadow)}.toast__leading{width:40px;height:40px;border-radius:20px;display:flex;align-items:center;justify-content:center;color:var(--toast-accent-fg)}.toast__icon{width:20px;height:20px;fill:currentColor}.toast__body{flex:1 1 0%;min-width:0;display:flex;flex-direction:column;gap:0.25rem}.toast__title{margin:0;font-weight:600;font-size:0.95rem}.toast__description{margin:0;font-size:0.85rem;line-height:1.35;opacity:0.85}@keyframes toast-enter{from{opacity:0;transform:translateX(var(--toast-translate)) translateY(6px)}to{opacity:1;transform:translateX(0) translateY(0)}}@keyframes toast-exit{from{opacity:1;transform:translateX(0) translateY(0)}to{opacity:0;transform:translateX(calc(var(--toast-translate) * 1.25)) translateY(-4px)}}@media (prefers-reduced-motion: reduce){.toast{animation:none}:host([data-leaving='true']) .toast{animation:none}}:host([variant='success']){--toast-accent-fg:#047857}:host([variant='warning']){--toast-accent-fg:#92400e}:host([variant='danger']){--toast-accent-fg:#b91c1c}";const O=z;const P=class{constructor(i){t(this,i);this.irToastDismiss=e(this,"irToastDismiss",7);this.irToastAction=e(this,"irToastAction",7);this.irToastInteractionChange=e(this,"irToastInteractionChange",7)}toastId;label;description;variant="info";dismissible=true;actionLabel;leaving=false;position="top-right";irToastDismiss;irToastAction;irToastInteractionChange;interacting=false;setInteracting=t=>{if(this.interacting===t){return}this.interacting=t;this.irToastInteractionChange.emit({id:this.toastId,interacting:t})};getIcon(){switch(this.variant){case"success":return i("wa-icon",{slot:"icon",name:"circle-check"});case"warning":return i("wa-icon",{slot:"icon",name:"triangle-exclamation"});case"danger":return i("wa-icon",{slot:"icon",name:"triangle-exclamation"});default:return i("wa-icon",{slot:"icon",name:"circle-info"})}}get calloutVariant(){switch(this.variant){case"info":return"neutral";case"success":return"success";case"warning":return"warning";case"danger":return"danger"}}render(){return i("div",{key:"a192b346990a4079e00448eaa6e2980ead20c6c8",class:"toast","data-position":this.position,"data-leaving":this.leaving,onMouseEnter:()=>this.setInteracting(true),onMouseLeave:()=>this.setInteracting(false),onFocusin:()=>this.setInteracting(true),onFocusout:()=>this.setInteracting(false)},i("wa-callout",{key:"dd80154a7eb239a892a32b65e71ca5b8cd2a3932",variant:this.calloutVariant},this.getIcon(),i("div",{key:"23b8514744611b166076003d717ee211b9c98073",class:"toast__body"},this.label&&i("h3",{key:"454360247817969858137d24e4e768be5576ac67",class:"toast__title"},this.label),this.description&&i("p",{key:"82662a640ab448c14fc662745afcb617b05d0a93",class:"toast__description"},this.description))))}};P.style=O;const E=".sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.toast-container{position:fixed;display:flex;flex-direction:column;gap:0.75rem;z-index:10000;max-width:100vw;box-sizing:border-box;padding:1rem;pointer-events:all}.toast-container--top{top:0}.toast-container--bottom{bottom:0}.toast-container--start{left:0;align-items:flex-start}.toast-container--center{left:50%;transform:translateX(-50%);align-items:center}.toast-container--end{right:0;align-items:flex-end}.toast-container.rtl.toast-container--start{left:auto;right:0;align-items:flex-end}.toast-container.rtl.toast-container--end{right:auto;left:0;align-items:flex-start}";const I=E;const j=class{constructor(e){t(this,e)}get el(){return a(this)}position="top-end";rtl=false;duration=5e3;toasts=[];popoverRef;toastTimers=new Map;componentDidLoad(){if(this.popoverRef&&typeof this.popoverRef.showPopover==="function"){try{this.popoverRef.hidePopover?.()}catch(t){}}}disconnectedCallback(){this.toastTimers.forEach((t=>{if(t.timeoutId){clearTimeout(t.timeoutId)}}));this.toastTimers.clear()}handleToast(t){const e=t?.detail||{};const i={...e,title:e.title??"Notification"};this.addToast(i)}async addToast(t){const e=t.id??this.generateToastId();const i={id:e,type:t.type??"info",duration:t.duration??this.duration,dismissible:t.dismissible??true,leaving:false,...t};this.toasts=[...this.toasts,i];this.announceToast(i);if(this.toasts.length===1){this.showPopover()}if(i.duration&&i.duration>0){this.startTimer(i.id,i.duration)}return e}async removeToast(t){this.toasts=this.toasts.map((e=>e.id===t?{...e,leaving:true}:e));setTimeout((()=>{this.clearTimer(t);this.toasts=this.toasts.filter((e=>e.id!==t));if(this.toasts.length===0){this.hidePopover()}}),200)}async clearAllToasts(){this.toastTimers.forEach((t=>{if(t.timeoutId){clearTimeout(t.timeoutId)}}));this.toastTimers.clear();this.toasts=[];this.hidePopover()}showPopover(){if(this.popoverRef&&typeof this.popoverRef.showPopover==="function"){try{this.popoverRef.showPopover()}catch(t){}}}hidePopover(){if(this.popoverRef&&typeof this.popoverRef.hidePopover==="function"){try{this.popoverRef.hidePopover()}catch(t){}}}generateToastId(){return`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}startTimer(t,e){if(typeof window==="undefined"){return}this.clearTimer(t);const i=window.setTimeout((()=>this.removeToast(t)),e);this.toastTimers.set(t,{timeoutId:i,remaining:e,startedAt:Date.now()})}pauseTimer(t){const e=this.toastTimers.get(t);if(!e||e.timeoutId===undefined||e.startedAt===undefined){return}clearTimeout(e.timeoutId);const i=Date.now()-e.startedAt;const s=Math.max(e.remaining-i,0);this.toastTimers.set(t,{remaining:s})}resumeTimer(t){const e=this.toastTimers.get(t);if(!e||e.timeoutId!==undefined){return}if(e.remaining<=0){this.removeToast(t);return}if(typeof window==="undefined"){return}const i=window.setTimeout((()=>this.removeToast(t)),e.remaining);this.toastTimers.set(t,{timeoutId:i,remaining:e.remaining,startedAt:Date.now()})}clearTimer(t){const e=this.toastTimers.get(t);if(e?.timeoutId){clearTimeout(e.timeoutId)}this.toastTimers.delete(t)}announceToast(t){if(typeof document==="undefined"||!this.el?.shadowRoot){return}const e=document.createElement("div");e.setAttribute("role","status");e.setAttribute("aria-live",t.type==="error"||t.type==="danger"?"assertive":"polite");e.setAttribute("aria-atomic","true");e.className="sr-only";e.textContent=`${t.type}: ${t.title}${t.description?". "+t.description:""}`;this.el.shadowRoot.appendChild(e);setTimeout((()=>{e.remove()}),1e3)}getPositionClass(){const[t,e]=this.position.split("-");return`toast-container--${t} toast-container--${e}`}getAlertPosition(){const[t="top",e="end"]=this.position.split("-");const i={start:this.rtl?"right":"left",end:this.rtl?"left":"right"};const s=i[e]??"right";const o=t==="bottom"?"bottom":"top";return`${o}-${s}`}mapVariant(t){switch(t){case"success":return"success";case"warning":return"warning";case"error":case"danger":return"danger";default:return"info"}}handleToastDismiss=t=>{t.stopPropagation();this.removeToast(t.detail.id)};handleInteractionChange=t=>{t.stopPropagation();if(t.detail.interacting){this.pauseTimer(t.detail.id)}else{this.resumeTimer(t.detail.id)}};handlePopoverToggle=t=>{if(this.toasts.length>0){t.preventDefault();this.showPopover()}};render(){return i("div",{key:"0be14e9f705658433924bdfab3a9c344bc679056",ref:t=>this.popoverRef=t,popover:"manual",class:"toast-popover",onToggle:this.handlePopoverToggle},i("div",{key:"dc1d1f288d13b2dc93ed011816b9f09c2f64d3e7",class:`toast-container ${this.getPositionClass()} ${this.rtl?"rtl":""}`,role:"region","aria-label":"Notifications","aria-live":"polite",dir:this.rtl?"rtl":"ltr"},this.toasts.map((t=>i("div",{class:"toast-item",key:t.id},i("ir-toast-alert",{toastId:t.id,label:t.title,description:t.description,dismissible:t.dismissible,actionLabel:t.actionLabel,position:this.getAlertPosition(),variant:this.mapVariant(t.type),leaving:t.leaving,onIrToastDismiss:this.handleToastDismiss,onIrToastInteractionChange:this.handleInteractionChange}))))))}};j.style=I;export{g as ir_interceptor,w as ir_otp,k as ir_otp_modal,C as ir_toast,P as ir_toast_alert,j as ir_toast_provider};
//# sourceMappingURL=p-eb64c73b.entry.js.map