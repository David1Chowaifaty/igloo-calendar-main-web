import{r as t,c as e,h as i}from"./p-7eeadfc8.js";import{v as s}from"./p-4ed69de7.js";const a=":root{--sidebar-width:40rem}#container{padding:1rem;height:100%}.card{height:100%}#ir-list-item{height:100%}.cardBody{display:flex;justify-content:center;align-items:center;height:100%}.emptyBody{text-align:center}.emptyBody img{height:auto;width:100px;transform:translate(7%, 0);margin:1rem}.loader-position{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.card-head{background:#f8f8f8;padding:0.3rem}.section-title{display:flex;align-items:center;justify-content:space-between;font-weight:bold}.item-info{border-bottom:1px solid #e7e7e7}.item-info .row .col-3:last-child{text-align:end}.list-group{list-style:none;border-bottom:1px solid #e7e7e7}.list-group li{padding:0.5rem;color:#444;transition:all 0.3s ease-out}.list-group li:hover{color:#7c83eb}.list-group li.active{border-bottom:2px solid #7c83eb;color:#7c83eb}.btn-position{position:absolute;bottom:0;left:0;width:100%;padding:0.5rem;background:#f8f8f8;border-top:1px solid #e7e7e7}.test-icon{margin-right:0.2rem !important}.text-dark:hover{color:#444 !important}";const n=a;const o=class{constructor(i){t(this,i);this.fetchApi=e(this,"fetchApi",7);this.requestApiDelete=e(this,"requestApiDelete",7);this.requestApiDestinationHierarchy=e(this,"requestApiDestinationHierarchy",7);this.tabs=["General Settings","Mapping","Channel Settings"];this.hostRoom=undefined;this.mapReference=undefined;this.allowed_properties=[];this.allowed_channels=[];this.allowed_MinStayTypes=[];this.dropdownData={name:"Action",icon:"",children:[{name:"Edit",icon:"ft-edit"},{name:"Delete",icon:"ft-trash"},{name:"Disable",icon:"ft-alert-triangle"}]};this.listData=null;this.loader=false;this.mode="create";this.activeTab="General Settings";this.selectedItem=null;this.item=null;this.anyChanges=false}connectionOffHandler(){this.item=null}sendToParentHandler(t){this.anyChanges=true;this.item=t.detail}sendMappingToParentHandler(t){const e=t.detail;const i=s();this.anyChanges=true;if(this.mode==="edit"&&this.selectedItem){this.listData=this.listData.map((t=>{if(t.id===this.selectedItem.id){return Object.assign(Object.assign({},this.item),{RoomsMapping:e,status:"Active",id:i})}return t}))}else{if(this.listData===null){this.listData=[Object.assign(Object.assign({},this.item),{RoomsMapping:e,status:"Active",id:i})]}else{this.listData=[...this.listData,Object.assign(Object.assign({},this.item),{RoomsMapping:e,status:"Active",id:i})]}}this.fetchApi.emit(this.listData);this.mode="create";this.activeTab="General Settings";const a=document.querySelector("ir-sidebar");if(a){a.open=!a.open}this._reset()}_reset(){this.item=null;this.mode="create";this.activeTab="General Settings";this.selectedItem=null;this.anyChanges=false}openSidebarHandler(){const t=document.querySelector("ir-sidebar");t.open=!t.open;this.loader=true;this.mode="create";this.activeTab="General Settings";setTimeout((()=>{this.loader=false}),2e3)}requestDelete(t){this.fetchApi.emit(t.detail)}changeStatusHandler(t){this.fetchApi.emit(t.detail)}componentDidLoad(){const t=document.querySelector("ir-topbar");t.addEventListener("openSidebar",(()=>{const t=document.querySelector("ir-sidebar");t.open=!t.open;this.loader=true;this.mode="create";this.activeTab="General Settings";setTimeout((()=>{this.loader=false}),2e3)}));const e=document.querySelector("ir-list-item");e.addEventListener("openSidebar",(t=>{if(t.detail.mode==="edit"){this.mode="edit";this.selectedItem=t.detail.item;const e=document.querySelector("ir-sidebar");e.open=!e.open}}));const i=document.querySelector("ir-modal.exit");i.addEventListener("confirmModal",(()=>{s.open=false;i.closeModal();this._reset()}));const s=document.querySelector("ir-sidebar");s.addEventListener("irSidebarToggle",(t=>{if(t.detail==true&&this.anyChanges){if(this.listData){i.openModal()}}else{s.open=false;this._reset()}}))}goNext(){const t=document.querySelector("ir-mapping");if(this.activeTab=="General Settings"){if(!this.item.title||!this.item.channel||!this.item.property){const t=document.querySelector("ir-modal.alertModal-manager");if(this.mode==="edit"){return}t.openModal()}else{this.requestApiDestinationHierarchy.emit(this.item.property);this.activeTab="Mapping";this.loader=true;setTimeout((()=>{this.loader=false}),2e3)}}else if(this.activeTab=="Mapping"){t._onSaveMapping()}}_onSwitchTab(t){if(this.activeTab=="General Settings"){if(!this.item.title||!this.item.channel||!this.item.property){const t=document.querySelector("ir-modal.alertModal-manager");if(this.mode=="edit"){return}t.openModal()}else{this.activeTab=t;this.loader=true;setTimeout((()=>{this.loader=false}),2e3)}}else if(this.activeTab=="Mapping"){this.activeTab=t;this.loader=true;setTimeout((()=>{this.loader=false}),2e3)}}render(){return[i("div",{key:"8d4ada6aaacd85a2931a01825867b38749edfde6",id:"container"},i("div",{key:"8006c60935180226ceab4beec5ad2585e074146b",class:"card"},i("ir-topbar",{key:"1fdf0259ff29e1f0ca4d689f0519a2fa574516da"}),i("ir-list-item",{key:"ebdcab8d5af1f95bb8caac3cb977fc55ede5723c",id:"ir-list-item",listData:this.listData,dropdownData:this.dropdownData}))),i("ir-sidebar",{key:"493dd41b8e56d65f68c1585a01e3bf1ecb7d445c",side:"right",class:""},i("div",{key:"dca77faeb93751c56b0bee4fe822caf29aad88c0",class:"container pt-1"},i("h5",{key:"51a81567034efe5dcdf0ce21fc07dc2fb1acab88",class:"font-weight-bold"},this.mode==="create"?"Create":"Edit"," Channel")),i("ul",{key:"0aa7937cd8898669298ea10d820dd795874a136e",class:"list-group list-group-horizontal mb-2"},this.tabs.map((t=>i("li",{class:this.activeTab===t?"active":""},i("a",{class:"","data-mdb-ripple-color":"dark",onClick:()=>{this._onSwitchTab(t)}},t))))),this.loader?i("div",{class:"loader-position"},i("ir-loader",null)):i("span",null,this.activeTab=="General Settings"&&i("ir-general-settings",{allowed_channels:this.allowed_channels,allowed_MinStayTypes:this.allowed_MinStayTypes,allowed_properties:this.allowed_properties,data:this.selectedItem,mode:this.mode,class:"mb-3"}),this.activeTab=="Mapping"&&i("ir-mapping",{hostRoom:this.hostRoom,class:"mb-3",mapReference:this.mapReference,map:this.mode==="edit"?this.selectedItem.RoomsMapping:null})),i("div",{key:"eb37c655e85d2eeba062752887be0383db724aa1",class:"btn-position"},i("button",{key:"2f8c81c47b0747122fa3fbf23dcf4f4bd5c15190",type:"button",class:"btn btn-primary btn-sm btn-block",onClick:()=>this.goNext()},this.activeTab=="General Settings"?"Next":"Save"))),i("ir-modal",{key:"eaba7d79c4d92e764220324117b143955ca1185f",class:"exit",modalTitle:"Exit without saving?",modalBody:"All unsaved changes will be lost.",iconAvailable:true,icon:"ft-alert-circle warning h1"}),i("ir-modal",{key:"351a65305efcf514db6ade906d18fdf3c1c8f01a",class:"alertModal-manager",modalTitle:"Please fill all the fields!",modalBody:"There are fields that are not filled yet.",icon:"ft-alert-circle warning h1",iconAvailable:true,leftBtnActive:false,btnPosition:"center",rightBtnText:"Close",rightBtnColor:"primary"})]}};o.style=n;export{o as ir_channel_manager};
//# sourceMappingURL=p-318668c8.entry.js.map