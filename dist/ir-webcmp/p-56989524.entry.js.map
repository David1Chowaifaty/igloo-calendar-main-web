{"version":3,"names":["irListingHeaderCss","IrListingHeaderStyle0","IrListingHeader","constructor","hostRef","this","inputValue","isLoading","bookingListingService","BookingListingService","handleSearchClicked","is_to_export","test","trim","updateUserSelection","booking_listing","userSelection","book_nbr","name","Object","assign","preventPageLoad","emit","getExposedBookings","start_row","end_row","download_url","downloadFile","handleClearUserField","initializeUserSelection","render","h","Host","key","class","_a","locales","entries","Lcz_Bookings","p","withIrToastAndInterceptor","propertyid","propertyId","language","title","Lcz_CreateNewBooking","ticket","token","slot","variant","icon_name","_b","onSubmit","e","preventDefault","console","log","value","onTextChange","detail","placeholder","_c","Lcz_FindBookNbrorName","xmlns","height","width","viewBox","fill","d","_d","Lcz_Or","_e","onSelectChange","showFirstOption","data","types","map","t","id","toString","text","selectedValue","filter_type","select_id","LabelAvailable","onDateRangeChanged","stopImmediatePropagation","stopPropagation","fromDate","toDate","to_date","format","isSame","moment","to","isBefore","from","allowNullDates","booking_status","statuses","status","code","channel","channels","firstOption","_f","Lcz_All","_g","Lcz_Channels","_h","Lcz_Search","onClickHandler","_j","Lcz_Erase","_k","Lcz_ExportToExcel","irListingModalCss","IrListingModalStyle0","IrListingModal","modalTitle","isOpen","deletionStage","loadingBtn","bookingListingsService","paymentService","PaymentService","componentWillLoad","selectedDesignation","settlement_methods","closeModal","modalClosed","openModal","filterBookings","bookings","filter","booking","booking_nbr","editBooking","btnClickHandler","event","target","cause","AddPayment","amount","financial","due_amount","currency","date","designation","reference","resetData","removeExposedBooking","error","renderTitle","Lcz_MarkBookingAsPaid","replace","Lcz_SureYouWantToDeleteBookingNbr","Lcz_WantToRecoverAllotment","renderConfirmationTitle","Lcz_RecoverAndDelete","Lcz_Confirm","renderCancelationTitle","Lcz_JustDelete","Lcz_Cancel","onClick","tabindex","style","cursor","m","icon","btn_color","btn_block"],"sources":["src/components/ir-booking-listing/ir-listing-header/ir-listing-header.css?tag=ir-listing-header&encapsulation=scoped","src/components/ir-booking-listing/ir-listing-header/ir-listing-header.tsx","src/components/ir-booking-listing/ir-listing-modal/ir-listing-modal.css?tag=ir-listing-modal&encapsulation=scoped","src/components/ir-booking-listing/ir-listing-modal/ir-listing-modal.tsx"],"sourcesContent":[":host {\r\n  display: block;\r\n  margin: 0;\r\n  padding: 0;\r\n  --ir-date-range-border: #cacfe7;\r\n  --ir-date-range-width: 242px;\r\n  position: relative;\r\n}\r\nh3 {\r\n  margin: 0;\r\n}\r\nir-input-text {\r\n  width: 300px;\r\n}\r\n.booking-search-field {\r\n  margin-left: 0px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 14px;\r\n}\r\n.booking-container {\r\n  gap: 14px;\r\n}\r\n.filters-container {\r\n  gap: 10px;\r\n  justify-content: space-between;\r\n}\r\n.buttons-container {\r\n  gap: 14px;\r\n  color: #104064;\r\n}\r\n.booking-dates-container {\r\n  position: relative;\r\n  box-sizing: border-box;\r\n  background: white;\r\n  padding: 0.75rem 1rem;\r\n  height: 2rem;\r\n  border-radius: 0.21rem;\r\n  border: 1px solid #cacfe7;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  margin: 0;\r\n}\r\n\r\n.booking-dates-container span {\r\n  padding: 0;\r\n  margin: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 2rem;\r\n}\r\n\r\n.date-picker-wrapper {\r\n  position: relative;\r\n  cursor: default;\r\n  box-sizing: border-box;\r\n  padding: 0 0.5rem;\r\n  height: 2rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  flex-shrink: 0;\r\n  cursor: pointer;\r\n}\r\n.date-picker-wrapper:hover .date-display {\r\n  color: var(--blue);\r\n}\r\n.date-picker-wrapper[data-option='from-date'] {\r\n  padding-right: 0;\r\n  cursor: pointer;\r\n}\r\n.date-display {\r\n  background: inherit;\r\n  margin: 0;\r\n  padding: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 0.975rem;\r\n  line-height: 1.45;\r\n  height: 2rem;\r\n  color: #3b4781;\r\n  white-space: nowrap;\r\n  padding-right: 5px;\r\n  cursor: pointer;\r\n}\r\n\r\n.hidden-date-picker {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  opacity: 0;\r\n}\r\n\r\n/* @media only screen and (max-width: 1200px) {\r\n  .w-full {\r\n    max-width: 100%;\r\n  }\r\n} */\r\n.new-booking-container {\r\n  position: absolute;\r\n  right: 10px;\r\n  top: 5px;\r\n}\r\n.new-booking-btn {\r\n  all: unset;\r\n  cursor: pointer;\r\n  color: #104064;\r\n}\r\n.new-booking-btn:hover {\r\n  color: #0b2538;\r\n}\r\n.seperator-container {\r\n  margin-top: 10px;\r\n  justify-content: center !important;\r\n  gap: 14px;\r\n}\r\n.seperator-container span {\r\n  display: block;\r\n  height: 1px;\r\n  background: var(--gray);\r\n  width: 45%;\r\n  max-width: 200px;\r\n  margin: 0;\r\n}\r\n@media (max-width: 575.98px) {\r\n  :host {\r\n    --ir-date-range-width: 100%;\r\n  }\r\n  .flex-fill-sm-none {\r\n    flex: 1 1 auto;\r\n  }\r\n  .flex-fill-sm-none label {\r\n    width: 100px;\r\n  }\r\n  .buttons-container {\r\n    justify-content: center !important;\r\n    align-items: center !important;\r\n    gap: 40px;\r\n  }\r\n}\r\n@media (min-width: 1200px) {\r\n  .booking-search-field {\r\n    margin-left: 40px;\r\n  }\r\n}\r\n\r\n@media (min-width: 1600px) {\r\n  .flex-fill-sm-none {\r\n    flex: 0 0 auto;\r\n  }\r\n  .booking-search-field {\r\n    margin-left: 40px;\r\n  }\r\n}\r\n","import { BookingListingService } from '@/services/booking_listing.service';\nimport booking_listing, { initializeUserSelection, updateUserSelection } from '@/stores/booking_listing.store';\nimport locales from '@/stores/locales.store';\nimport { downloadFile } from '@/utils/utils';\nimport { Component, Event, EventEmitter, Host, Prop, State, h } from '@stencil/core';\nimport moment from 'moment';\n\n@Component({\n  tag: 'ir-listing-header',\n  styleUrl: 'ir-listing-header.css',\n  scoped: true,\n})\nexport class IrListingHeader {\n  @Prop() propertyId: number;\n  @Prop() language: string;\n  @Prop() p: string;\n\n  @State() inputValue: string = '';\n  @State() isLoading: 'search' | 'excel' = null;\n\n  @Event() preventPageLoad: EventEmitter<string>;\n\n  private bookingListingService = new BookingListingService();\n  // private toDateRef: HTMLIrDatePickerElement;\n\n  private async handleSearchClicked(is_to_export: boolean) {\n    if (this.inputValue !== '') {\n      if (/^-?\\d+$/.test(this.inputValue.trim())) {\n        updateUserSelection('book_nbr', this.inputValue.trim());\n      } else if (this.inputValue[3] === '-') {\n        updateUserSelection('book_nbr', this.inputValue.trim());\n      } else {\n        updateUserSelection('name', this.inputValue.trim());\n      }\n    }\n    if (this.inputValue === '' && (booking_listing.userSelection.book_nbr !== '' || booking_listing.userSelection.name !== '')) {\n      booking_listing.userSelection = {\n        ...booking_listing.userSelection,\n        name: '',\n        book_nbr: '',\n      };\n    }\n    this.isLoading = is_to_export ? 'excel' : 'search';\n    this.preventPageLoad.emit('/Get_Exposed_Bookings');\n    await this.bookingListingService.getExposedBookings({ ...booking_listing.userSelection, start_row: 0, end_row: 20, is_to_export });\n    this.isLoading = null;\n    if (booking_listing.download_url) {\n      downloadFile(booking_listing.download_url);\n    }\n  }\n  private async handleClearUserField() {\n    initializeUserSelection();\n    if (this.inputValue) {\n      this.inputValue = '';\n    }\n    await this.bookingListingService.getExposedBookings({ ...booking_listing.userSelection, start_row: 0, end_row: 20, is_to_export: false });\n  }\n  // private async handleFromDateChange(e: CustomEvent) {\n  //   e.stopImmediatePropagation();\n  //   e.stopPropagation();\n  //   const date = e.detail.start;\n  //   if (moment(booking_listing.userSelection.from, 'YYYY-MM-DD').isSame(date, 'days')) {\n  //     return;\n  //   }\n  //   let fromDate = date;\n  //   let toDate = moment(new Date(booking_listing.userSelection.to));\n  //   if (fromDate.isAfter(toDate)) {\n  //     toDate = fromDate;\n  //   }\n  //   booking_listing.userSelection = { ...booking_listing.userSelection, from: fromDate.format('YYYY-MM-DD'), to: toDate.format('YYYY-MM-DD') };\n  //   await this.toDateRef.openDatePicker();\n  // }\n  render() {\n    return (\n      <Host>\n        <section class=\"d-flex align-items-center \">\n          <div class=\"d-flex flex-fill flex-column flex-md-row align-items-md-center booking-container\">\n            <div class=\"d-flex mb-1 d-md-none align-items-center justify-content-bettween width-fill\">\n              <h3 class=\"flex-fill\">{locales.entries?.Lcz_Bookings}</h3>\n              <div>\n                <igl-book-property-container\n                  p={this.p}\n                  withIrToastAndInterceptor={false}\n                  propertyid={this.propertyId}\n                  language={this.language}\n                  title={locales.entries.Lcz_CreateNewBooking}\n                  ticket={booking_listing.token}\n                >\n                  <ir-button slot=\"trigger\" class={'new-booking-btn'} variant=\"icon\" icon_name=\"square_plus\"></ir-button>\n                </igl-book-property-container>\n              </div>\n            </div>\n            <h3 class=\"d-none d-md-block\">{locales.entries?.Lcz_Bookings}</h3>\n            <form\n              onSubmit={e => {\n                e.preventDefault();\n                console.log(this.inputValue);\n                this.handleSearchClicked(false);\n              }}\n              class=\"booking-search-field width-fill\"\n            >\n              <ir-input-text\n                class={'flex-fill'}\n                value={this.inputValue}\n                onTextChange={e => (this.inputValue = e.detail)}\n                variant=\"icon\"\n                placeholder={locales.entries?.Lcz_FindBookNbrorName}\n              >\n                <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"14\" viewBox=\"0 0 512 512\">\n                  <path\n                    fill=\"currentColor\"\n                    d=\"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z\"\n                  />\n                </svg>\n              </ir-input-text>\n              <h5 class=\"m-0 font-weight-bold d-none d-sm-block\">{locales.entries?.Lcz_Or}</h5>\n            </form>\n          </div>\n          <div class=\"d-none d-md-block\">\n            <igl-book-property-container\n              p={this.p}\n              withIrToastAndInterceptor={false}\n              propertyid={this.propertyId}\n              language={this.language}\n              title={locales.entries.Lcz_CreateNewBooking}\n              ticket={booking_listing.token}\n            >\n              <ir-button slot=\"trigger\" class={'new-booking-btn'} variant=\"icon\" icon_name=\"square_plus\"></ir-button>\n            </igl-book-property-container>\n          </div>\n        </section>\n        <section class=\"d-flex align-items-center justify-evenly seperator-container d-sm-none\">\n          <span></span>\n          <h5 class=\"m-0 font-weight-bold\">{locales.entries?.Lcz_Or}</h5>\n          <span></span>\n        </section>\n        <section class=\"d-flex flex-column align-items-sm-center flex-sm-row flex-sm-wrap filters-container justify-content-lg-start mt-1\">\n          {/* <fieldset class=\"d-flex align-items-center flex-sm-column align-items-sm-start flex-fill-sm-none\">\n            <label htmlFor=\"dateTo\"></label> */}\n          <ir-select\n            onSelectChange={e => updateUserSelection('filter_type', e.detail)}\n            showFirstOption={false}\n            data={booking_listing?.types.map(t => ({\n              value: t.id.toString(),\n              text: t.name,\n            }))}\n            class=\"flex-sm-wrap\"\n            selectedValue={booking_listing.userSelection.filter_type}\n            select_id=\"dateTo\"\n            LabelAvailable={false}\n          ></ir-select>\n          {/* <div class={'booking-dates-container'}>\n            <span>\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox={'0 0 448 512'} style={{ height: '14px', width: '14px' }}>\n                <path\n                  fill=\"currentColor\"\n                  d={\n                    'M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z'\n                  }\n                ></path>\n              </svg>\n            </span>\n            <ir-date-picker\n              id=\"fromDate\"\n              class=\"date-picker-wrapper\"\n              date={new Date(booking_listing.userSelection.from)}\n              minDate=\"2000-01-01\"\n              onDateChanged={e => this.handleFromDateChange(e)}\n            >\n              <p slot=\"trigger\" class=\"m-0 p-0 date-display\">\n                {moment(new Date(booking_listing.userSelection.from)).format('MMM DD, yyyy')}\n              </p>\n            </ir-date-picker>\n\n            <span>\n              <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"arrow-icon\" height=\"14\" width=\"14\" viewBox=\"0 0 512 512\">\n                <path\n                  fill=\"currentColor\"\n                  d=\"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z\"\n                />\n              </svg>\n            </span>\n            <ir-date-picker\n              id=\"toDate\"\n              forceDestroyOnUpdate\n              class=\"date-picker-wrapper\"\n              date={new Date(booking_listing.userSelection.to)}\n              ref={el => (this.toDateRef = el)}\n              minDate={new Date(booking_listing.userSelection.from)}\n              maxDate={moment().add(1, 'years').endOf('year').toDate()}\n              onDateChanged={e => {\n                e.stopImmediatePropagation();\n                e.stopPropagation();\n                if (e.detail.start.isSame(booking_listing.userSelection.to, 'days') || e.detail.start.isBefore(booking_listing.userSelection.from, 'days')) {\n                  return;\n                }\n                booking_listing.userSelection = { ...booking_listing.userSelection, to: e.detail.start.format('YYYY-MM-DD') };\n              }}\n            >\n              <p slot=\"trigger\" class=\"m-0 p-0 date-display\">\n                {moment(new Date(booking_listing.userSelection.to)).format('MMM DD, YYYY')}\n              </p>\n            </ir-date-picker>\n          </div> */}\n          <ir-range-picker\n            onDateRangeChanged={e => {\n              e.stopImmediatePropagation();\n              e.stopPropagation();\n              const { fromDate, toDate } = e.detail;\n              let to_date = toDate.format('YYYY-MM-DD');\n              if (\n                toDate.isSame(moment(booking_listing.userSelection.to, 'YYYY-MM-DD'), 'days') ||\n                toDate.isBefore(moment(booking_listing.userSelection.from, 'YYYY-MM-DD'), 'days')\n              ) {\n                to_date = booking_listing.userSelection.to;\n              }\n              booking_listing.userSelection = { ...booking_listing.userSelection, to: to_date, from: fromDate.format('YYYY-MM-DD') };\n            }}\n            allowNullDates={false}\n            fromDate={moment(booking_listing.userSelection.from, 'YYYY-MM-DD')}\n            toDate={moment(booking_listing.userSelection.to, 'YYYY-MM-DD')}\n          />\n          <ir-select\n            class=\"flex-sm-wrap\"\n            selectedValue={booking_listing.userSelection.booking_status}\n            onSelectChange={e => updateUserSelection('booking_status', e.detail)}\n            showFirstOption={false}\n            data={booking_listing?.statuses.map(status => ({\n              value: status.code,\n              text: status.name,\n            }))}\n            select_id=\"booking_status\"\n            LabelAvailable={false}\n          ></ir-select>\n\n          <ir-select\n            class=\"flex-sm-wrap\"\n            selectedValue={booking_listing.userSelection.channel}\n            onSelectChange={e => updateUserSelection('channel', e.detail)}\n            LabelAvailable={false}\n            data={booking_listing?.channels.map(channel => ({\n              value: channel.value,\n              text: channel.name,\n            }))}\n            select_id=\"channels\"\n            firstOption={locales.entries?.Lcz_All + ' ' + locales.entries?.Lcz_Channels}\n          ></ir-select>\n          <div class=\"d-flex flex-fill align-items-end m-0  buttons-container\">\n            <ir-button\n              title={locales.entries?.Lcz_Search}\n              variant=\"icon\"\n              icon_name=\"search\"\n              isLoading={this.isLoading === 'search'}\n              onClickHandler={() => this.handleSearchClicked(false)}\n            ></ir-button>\n            <ir-button title={locales.entries?.Lcz_Erase} variant=\"icon\" icon_name=\"eraser\" onClickHandler={() => this.handleClearUserField()}></ir-button>\n            <ir-button\n              title={locales.entries?.Lcz_ExportToExcel}\n              variant=\"icon\"\n              icon_name=\"file\"\n              isLoading={this.isLoading === 'excel'}\n              onClickHandler={() => this.handleSearchClicked(true)}\n            ></ir-button>\n          </div>\n        </section>\n      </Host>\n    );\n  }\n}\n",".backdropModal {\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  z-index: 1000;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100vh;\r\n  width: 100%;\r\n  opacity: 0;\r\n  transition: opacity 0.3s ease-in-out;\r\n  pointer-events: none;\r\n}\r\n.backdropModal.active {\r\n  cursor: pointer;\r\n  opacity: 1 !important;\r\n  pointer-events: all;\r\n}\r\n\r\n.ir-modal[data-state='opened'] {\r\n  opacity: 1;\r\n  /* transform: translate(-50%, 0); */\r\n  visibility: visible; /* Make modal visible */\r\n  pointer-events: all; /* Restore pointer events */\r\n  transition: all 0.3s ease-in-out;\r\n}\r\n.ir-alert-content {\r\n  padding: 10px;\r\n  background: white;\r\n  border-radius: 5px;\r\n}\r\n.modal {\r\n  z-index: 1001 !important;\r\n}\r\n\r\n.modal-dialog {\r\n  height: 100vh;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.ir-alert-footer {\r\n  gap: 10px;\r\n}\r\n.exit-icon {\r\n  position: absolute;\r\n  right: 10px;\r\n  top: 5px;\r\n  margin: 0;\r\n}\r\n.ir-modal {\r\n  position: fixed;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  z-index: 1050;\r\n  width: 90%;\r\n  max-width: 32rem;\r\n  overflow: hidden;\r\n  outline: 0;\r\n  opacity: 0;\r\n  transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;\r\n  visibility: hidden;\r\n  pointer-events: none;\r\n}\r\n\r\n.ir-modal.active {\r\n  opacity: 1;\r\n  transform: translate(-50%, 0);\r\n  visibility: visible; /* Make modal visible */\r\n  pointer-events: all; /* Restore pointer events */\r\n  transition: all 0.3s ease-in-out;\r\n}\r\n","import booking_listing from '@/stores/booking_listing.store';\r\nimport { Component, EventEmitter, Listen, Method, Prop, State, h, Event } from '@stencil/core';\r\nimport { Booking } from '@/models/booking.dto';\r\nimport locales from '@/stores/locales.store';\r\nimport { BookingListingService } from '@/services/booking_listing.service';\r\nimport { PaymentService } from '@/services/payment.service';\r\nimport moment from 'moment';\r\n\r\n@Component({\r\n  tag: 'ir-listing-modal',\r\n  styleUrl: 'ir-listing-modal.css',\r\n  scoped: true,\r\n})\r\nexport class IrListingModal {\r\n  @Prop() modalTitle: string = 'Modal Title';\r\n  @Prop() editBooking: { booking: Booking; cause: 'edit' | 'payment' | 'delete' | 'guest' };\r\n\r\n  @State() isOpen: boolean = false;\r\n  @State() deletionStage = 1;\r\n  @State() selectedDesignation: string;\r\n  @State() loadingBtn: 'confirm' | 'just_delete' | 'recover_and_delete' | null = null;\r\n\r\n  private bookingListingsService = new BookingListingService();\r\n  private paymentService = new PaymentService();\r\n\r\n  componentWillLoad() {\r\n    this.selectedDesignation = booking_listing.settlement_methods[0].name;\r\n  }\r\n\r\n  @Event() modalClosed: EventEmitter<null>;\r\n  @Event() resetData: EventEmitter<string>;\r\n  @Method()\r\n  async closeModal() {\r\n    this.isOpen = false;\r\n    this.deletionStage = 1;\r\n    this.selectedDesignation = booking_listing.settlement_methods[0].name;\r\n    this.modalClosed.emit(null);\r\n  }\r\n  @Method()\r\n  async openModal() {\r\n    this.isOpen = true;\r\n  }\r\n  filterBookings() {\r\n    booking_listing.bookings = booking_listing.bookings.filter(booking => booking.booking_nbr !== this.editBooking.booking.booking_nbr);\r\n  }\r\n\r\n  @Listen('clickHandler')\r\n  async btnClickHandler(event: CustomEvent) {\r\n    let target = event.target as HTMLInputElement;\r\n    let name = target.name;\r\n    try {\r\n      if (name === 'confirm') {\r\n        if (this.editBooking.cause === 'payment') {\r\n          await this.paymentService.AddPayment(\r\n            {\r\n              amount: this.editBooking.booking.financial.due_amount,\r\n              currency: this.editBooking.booking.currency,\r\n              date: moment().format('YYYY-MM-DD'),\r\n              designation: this.selectedDesignation,\r\n              id: -1,\r\n              reference: '',\r\n            },\r\n            this.editBooking.booking.booking_nbr,\r\n          );\r\n          this.resetData.emit(this.editBooking.booking.booking_nbr);\r\n          this.closeModal();\r\n        } else {\r\n          if (this.deletionStage === 2) {\r\n            this.loadingBtn = 'recover_and_delete';\r\n            await this.bookingListingsService.removeExposedBooking(this.editBooking.booking.booking_nbr, true);\r\n            this.filterBookings();\r\n          }\r\n          if (this.deletionStage === 1) {\r\n            this.deletionStage = 2;\r\n          }\r\n        }\r\n      }\r\n      if (name === 'cancel') {\r\n        if (this.deletionStage === 2) {\r\n          this.loadingBtn = 'just_delete';\r\n          await this.bookingListingsService.removeExposedBooking(this.editBooking.booking.booking_nbr, false);\r\n          this.filterBookings();\r\n        } else {\r\n          this.closeModal();\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      if (this.loadingBtn) {\r\n        this.loadingBtn = null;\r\n        this.closeModal();\r\n      }\r\n    }\r\n  }\r\n\r\n  renderTitle() {\r\n    if (this.editBooking.cause === 'payment') {\r\n      return locales.entries?.Lcz_MarkBookingAsPaid.replace('%1', this.editBooking.booking.booking_nbr);\r\n    } else {\r\n      if (this.deletionStage === 1) {\r\n        return locales.entries.Lcz_SureYouWantToDeleteBookingNbr + this.editBooking?.booking.booking_nbr;\r\n      }\r\n      return locales.entries.Lcz_WantToRecoverAllotment;\r\n    }\r\n  }\r\n  renderConfirmationTitle() {\r\n    if (this.deletionStage === 2) {\r\n      return locales.entries.Lcz_RecoverAndDelete;\r\n    }\r\n    return locales.entries.Lcz_Confirm;\r\n  }\r\n  renderCancelationTitle() {\r\n    if (this.deletionStage === 2) {\r\n      return locales.entries.Lcz_JustDelete;\r\n    }\r\n    return locales.entries.Lcz_Cancel;\r\n  }\r\n  render() {\r\n    if (!this.editBooking) {\r\n      return null;\r\n    }\r\n    return [\r\n      <div\r\n        class={`backdropModal ${this.isOpen ? 'active' : ''}`}\r\n        onClick={() => {\r\n          if (this.editBooking.cause === 'delete') {\r\n            return;\r\n          }\r\n          this.closeModal();\r\n        }}\r\n      ></div>,\r\n      <div data-state={this.isOpen ? 'opened' : 'closed'} class={`ir-modal`} tabindex=\"-1\">\r\n        {this.isOpen && (\r\n          <div class={`ir-alert-content p-2`}>\r\n            <div class={`ir-alert-header align-items-center border-0 py-0 m-0 `}>\r\n              <p class=\"p-0 my-0 mb-1\">{this.renderTitle()}</p>\r\n              <ir-icon\r\n                class=\"exit-icon\"\r\n                style={{ cursor: 'pointer' }}\r\n                onClick={() => {\r\n                  this.closeModal();\r\n                }}\r\n              >\r\n                <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"10.5\" viewBox=\"0 0 384 512\">\r\n                  <path\r\n                    fill=\"currentColor\"\r\n                    d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\"\r\n                  />\r\n                </svg>\r\n              </ir-icon>\r\n            </div>\r\n            <div class=\"modal-body text-left p-0 mb-2\">\r\n              {this.editBooking.cause === 'payment' ? (\r\n                <ir-select\r\n                  selectedValue={this.selectedDesignation}\r\n                  onSelectChange={e => (this.selectedDesignation = e.detail)}\r\n                  showFirstOption={false}\r\n                  LabelAvailable={false}\r\n                  data={booking_listing.settlement_methods.map(m => ({\r\n                    value: m.name,\r\n                    text: m.name,\r\n                  }))}\r\n                ></ir-select>\r\n              ) : null}\r\n            </div>\r\n\r\n            <div class={`ir-alert-footer border-0 d-flex justify-content-end`}>\r\n              <ir-button isLoading={this.loadingBtn === 'just_delete'} icon={''} btn_color={'secondary'} btn_block text={this.renderCancelationTitle()} name={'cancel'}></ir-button>\r\n              <ir-button\r\n                isLoading={this.loadingBtn === 'recover_and_delete'}\r\n                icon={''}\r\n                btn_color={'primary'}\r\n                btn_block\r\n                text={this.renderConfirmationTitle()}\r\n                name={'confirm'}\r\n              ></ir-button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>,\r\n    ];\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}