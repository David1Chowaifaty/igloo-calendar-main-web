{"version":3,"names":["onlineResources","isCSS","link","appCss","IrCommonStyle0","IrCommon","extraResources","disableResourceInjection","resources","componentWillLoad","this","parseRefs","componentDidLoad","initializeStyles","hrefsChanged","push","JSON","parse","appendTag","tagName","attributes","tag","document","createElement","selectorParts","Object","keys","forEach","attr","setAttribute","selector","join","existingTag","querySelector","head","appendChild","res","href","rel","type","isJS","src","render","irCustomButtonCss","IrCustomButtonStyle0","IrCustomButton","iconBtn","variant","appearance","size","withCaret","disabled","loading","pill","name","value","target","download","form","formAction","formEnctype","formMethod","formNoValidate","formTarget","clickHandler","handleButtonClick","e","emit","h","class","onClick","slot","Host","exportparts","irDialogCss","IrDialogStyle0","IrDialog","label","open","withoutHeader","lightDismiss","irDialogShow","irDialogHide","irDialogAfterShow","irDialogAfterHide","slotState","Map","slotObserver","SLOT_NAMES","updateSlotState","setupSlotListeners","disconnectedCallback","removeSlotListeners","openModal","closeModal","handleWaHide","stopImmediatePropagation","stopPropagation","detail","handleWaShow","handleWaAfterHide","handleWaAfterShow","el","addEventListener","handleSlotChange","MutationObserver","observe","childList","subtree","attributeFilter","removeEventListener","disconnect","newState","set","hasSlot","key","bind","id","style","get","__decorate","OverflowRelease","OverflowAdd","masks","price","mask","Number","scale","radix","mapToRadix","normalizeZeros","padFractionalZeros","thousandsSeparator","url","overwrite","prepare","appended","replace","commit","masked","_value","time","blocks","HH","MaskedRange","from","to","placeholderChar","mm","lazy","date","Date","pattern","min","moment","toDate","max","format","str","autofix","YYYY","MM","DD","irInputCss","IrInputStyle0","IrInput","internals","defaultValue","returnMaskedValue","hint","withClear","placeholder","readonly","passwordToggle","passwordVisible","withoutSpinButtons","required","minlength","maxlength","step","autocapitalize","autocorrect","autocomplete","autofocus","enterkeyhint","spellcheck","inputmode","withLabel","withHint","inputClass","textChange","inputBlur","inputFocus","isValid","_mask","inputRef","animationFrame","initializeMask","destroyMask","handleDisabledChange","newValue","oldValue","handleMaskPropsChange","hasMask","Boolean","resolveMask","rebuildMask","handleAriaInvalidChange","handleValueChange","updateValue","handleInput","nextValue","setFormValue","maskOpts","buildMaskOptions","customElements","whenDefined","updateComplete","nativeInput","input","IMask","unmaskedValue","on","isEmpty","trim","destroy","undefined","clearAnimationFrame","cancelAnimationFrame","resolvedMask","Array","isArray","handleChange","handleClear","handleBlur","handleFocus","focusInput","focus","blurInput","blur","displayValue","ref","String","oninput","onblur","onfocus","irPropertySwitcherCss","IrPropertySwitcherStyle0","IrPropertySwitcher","mode","ticket","baseUrl","selectedProperty","linkedProperties","displayMode","token","Token","propertyChange","storagePoller","userInfoPoller","lastSelectedAcRaw","lastUserInfoRaw","setBaseUrl","setToken","init","window","handleStorageEvent","stopSelectedAcPolling","stopUserInfoPolling","handleTicketChange","pollSelectedAcStorage","pollUserInfoStorage","startSelectedAcPolling","startUserInfoPolling","setInterval","clearInterval","async","selectedAcRaw","localStorage","getItem","selectedAc","updateSelectedProperty","fetchLinkedProperties","AC_ID","resolveDisplayMode","userInfoRaw","A_NAME","My_User","USERNAME","COUNTRY_CODE","COUNTRY_ID","COUNTRY_NAME","My_Country","L1_NAME_REF","PROPERTY_ID","PROPERTY_NAME","NAME","acId","data","axios","post","property_id","ExceptionMsg","Error","My_Result","error","console","hasSelectedAc","userInfo","userTypeCode","USER_TYPE_CODE","length","handlePropertySelected","event","applySelectedProperty","handleDropdownSelect","selectedId","item","property","find","p","propertyId","Bypass_Caching","IS_BACK_OFFICE","setItem","stringify","renderReadOnly","trigger","onClickHandler","map","toString","onIrDialogAfterHide","selectedPropertyId","properties","onPropertySelected","irPropertySwitcherDialogContentCss","IrPropertySwitcherDialogContentStyle0","IrPropertySwitcherDialogContent","propertySelected","filteredProperties","searchTerm","highlightedIndex","handleOpenChange","isOpen","requestAnimationFrame","resetSearch","handleSelectedPropertyIdChange","syncHighlightedIndex","fetchProperties","query","SEARCH_TERM","selectedIndex","getSelectedIndex","ensureHighlightedVisible","list","findIndex","getPropertyId","Math","handleSearchChange","handleKeyDown","preventDefault","selectProperty","options","querySelectorAll","option","scrollIntoView","block","inline","renderStatus","text","onKeyDown","tabIndex","padding","margin","paddingTop","selected","index","current","Debounce"],"sources":["src/common/ir.common.resources.ts","src/global/app.css?tag=ir-common","src/components/ir-common/ir-common.tsx","src/components/ui/ir-custom-button/ir-custom-button.css?tag=ir-custom-button","src/components/ui/ir-custom-button/ir-custom-button.tsx","src/components/ui/ir-dialog/ir-dialog.css?tag=ir-dialog&encapsulation=shadow","src/components/ui/ir-dialog/ir-dialog.tsx","src/components/ui/ir-input/masks.ts","src/components/ui/ir-input/ir-input.css?tag=ir-input&encapsulation=shadow","src/components/ui/ir-input/ir-input.tsx","src/components/pms-header/ir-property-switcher/ir-property-switcher.css?tag=ir-property-switcher&encapsulation=scoped","src/components/pms-header/ir-property-switcher/ir-property-switcher.tsx","src/components/pms-header/ir-property-switcher/ir-property-switcher-dialog-content.css?tag=ir-property-switcher-dialog-content&encapsulation=scoped","src/components/pms-header/ir-property-switcher/ir-property-switcher-dialog-content.tsx"],"sourcesContent":["import { IrOnlineResource } from './models';\r\nexport const onlineResources: IrOnlineResource[] = [\r\n  // {\r\n  //   isJS: true,\r\n  //   link: \"https://x.igloorooms.com/manage/micro/app-assets/required/assets/scripts/jquery.min.js\",\r\n  // },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i%7CQuicksand:300,400,500,700',\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://x.igloorooms.com/app-assets/css/bootstrap.css',\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://x.igloorooms.com/app-assets/css/bootstrap-extended.css',\r\n  },\r\n  { isCSS: true, link: 'https://x.igloorooms.com/app-assets/css/colors.css' },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://x.igloorooms.com/app-assets/css/core/menu/menu-types/horizontal-menu.css',\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://x.igloorooms.com/app-assets/css/core/colors/palette-gradient.css',\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://x.igloorooms.com/app-assets/css/components.css',\r\n  },\r\n  { isCSS: true, link: 'https://x.igloorooms.com/assets/css/style.css' },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/icheck.css',\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/custom.css',\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: 'https://x.igloorooms.com/app-assets/css/pages/login-register.css',\r\n  },\r\n  // {\r\n  //   isCSS: true,\r\n  //   link: 'https://x.igloorooms.com/manage/micro/app-assets/required/assets/scripts/daterangepicker/daterangepicker.css',\r\n  // },\r\n\r\n  // {\r\n  //   isJS: true,\r\n  //   link: \"https://x.igloorooms.com/manage/micro/app-assets/required/assets/scripts/daterangepicker/moment.min.js\",\r\n  // },\r\n  // {\r\n  //   isJS: true,\r\n  //   link: \"https://x.igloorooms.com/manage/micro/app-assets/required/assets/scripts/daterangepicker/daterangepicker.js\",\r\n  // },\r\n];\r\n","/* Web Awesome core styles */\n/* @import url('../assets/webawesome/themes/webawesome.css'); */\n@import url('../assets/webawesome/themes/default.css');\n@import url('../components/ui/ir-dialog/ir-dialog.css');\n@import url('../components/ir-drawer/ir-drawer.css');\n/* Place project-wide overrides below. */\n.my-custom-style {\n  background: #000;\n  color: white;\n}\n/* body {\n  background-color: var(--wa-color-surface-default) !important;\n} */\nhtml {\n  font-size: 14px !important;\n}\n/* body {\n  background-color: var(---wa-color-surface-default) !important;\n  color: var(--wa-color-text-normal) !important;\n} */\n\n.ir-page__container {\n  display: flex;\n  flex-direction: column;\n  gap: var(--wa-space-l, 1.5rem);\n  padding: var(--wa-space-l);\n  position: relative;\n}\n\n.ir-price {\n  font-family: inherit;\n  font-size: 1rem;\n  font-weight: 800;\n  text-align: right;\n  white-space: nowrap;\n  color: var(--wa-color-text-normal);\n  margin: 0;\n  padding: 0;\n}\n.page-title {\n  font-family: var(--wa-font-family-heading);\n  font-weight: var(--wa-font-weight-heading);\n  line-height: var(--wa-line-height-condensed);\n  text-wrap: balance;\n  font-size: var(--wa-font-size-xl);\n}\n\n:root {\n  --wa-form-control-required-content-color: var(--wa-color-danger-border-loud, #f3676c);\n}\n/* td {\n  padding: 0 !important;\n} */\n.label-on-left {\n  display: grid;\n  gap: var(--wa-space-m);\n}\nwa-card::part(base) {\n  box-sizing: border-box;\n}\nwa-input[aria-invalid='true']::part(base),\nwa-textarea[aria-invalid='true']::part(base),\nwa-select[aria-invalid='true']::part(combobox) {\n  border-color: var(--wa-color-danger-border-loud);\n  outline-color: var(--wa-color-danger-border-loud);\n  border-width: 2px;\n}\n\n/* Shared layout for form controls inside wa-select, wa-input, wa-textarea */\n@media (min-width: 768px) {\n  /* .label-on-left wa-switch::part(label) {\n    margin-inline-start: 0;\n    margin-inline-end: 0.5rem;\n  } */\n  .label-on-left {\n    align-items: center;\n    grid-template-columns: auto 1fr;\n  }\n  .label-on-left wa-switch::part(base),\n  .label-on-left wa-select::part(form-control),\n  .label-on-left wa-select,\n  .label-on-left wa-switch,\n  .label-on-left wa-input,\n  .label-on-left wa-textarea {\n    grid-column: 1 / -1;\n    grid-row-end: span 2;\n    display: grid;\n    grid-template-columns: subgrid;\n    gap: 0 var(--wa-space-l);\n    align-items: center;\n  }\n  .label-on-left wa-switch::part(base) {\n    direction: rtl;\n  }\n  .label-on-left wa-switch::part(base) > * {\n    justify-self: flex-start;\n    justify-content: flex-start;\n    direction: ltr; /* fix text direction */\n  }\n  /* Label alignment */\n  .label-on-left ::part(label) {\n    justify-content: flex-end;\n  }\n\n  /* Hint always in second column */\n  .label-on-left ::part(hint) {\n    grid-column: 2;\n  }\n}\n\n.ir-preview-print-container {\n  position: fixed;\n  inset: 0;\n  opacity: 0;\n  pointer-events: none;\n  z-index: -1;\n}\n\n@media print {\n  body.ir-preview-dialog-print-mode {\n    background: #fff !important;\n  }\n  body.ir-preview-dialog-print-mode > *:not(.ir-preview-print-container) {\n    display: none !important;\n  }\n  body.ir-preview-dialog-print-mode .ir-preview-print-container {\n    opacity: 1;\n    pointer-events: auto;\n    position: static;\n    z-index: auto;\n    width: 100%;\n    min-height: auto;\n    margin: 0 auto;\n    padding: 1.5rem;\n    box-sizing: border-box;\n  }\n}\n\n@page {\n  margin: 0.5in;\n}\n","import { Component, Prop, State, Watch } from '@stencil/core';\nimport { IrOnlineResource } from '../../common/models';\nimport { onlineResources } from '../../common/ir.common.resources';\n\n@Component({\n  tag: 'ir-common',\n  styleUrl: '../../global/app.css',\n  shadow: false,\n})\nexport class IrCommon {\n  @Prop({ reflect: true }) extraResources: string = '';\n  @Prop() disableResourceInjection: boolean;\n\n  @State() resources: IrOnlineResource[] = onlineResources;\n  componentWillLoad() {\n    this.parseRefs();\n  }\n\n  componentDidLoad() {\n    this.initializeStyles();\n  }\n\n  @Watch('extraResources')\n  hrefsChanged() {\n    this.parseRefs();\n    this.initializeStyles();\n  }\n\n  private parseRefs() {\n    if (this.disableResourceInjection) {\n      return;\n    }\n    if (this.extraResources !== '') this.resources.push(JSON.parse(this.extraResources));\n  }\n\n  private appendTag(tagName: string, attributes: any) {\n    const tag = document.createElement(tagName);\n    const selectorParts = [];\n\n    Object.keys(attributes).forEach(attr => {\n      tag.setAttribute(attr, attributes[attr]);\n      selectorParts.push(`[${attr}=\"${attributes[attr]}\"]`);\n    });\n\n    const selector = `${tagName}${selectorParts.join('')}`;\n    const existingTag = document.querySelector(selector);\n\n    if (!existingTag) {\n      document.head.appendChild(tag);\n    }\n  }\n\n  private initializeStyles() {\n    if (this.disableResourceInjection) {\n      return;\n    }\n    this.resources.forEach(res => {\n      if (res.isCSS) {\n        this.appendTag('link', {\n          href: res.link,\n          rel: 'stylesheet',\n          type: 'text/css',\n        });\n      }\n      if (res.isJS) {\n        this.appendTag('script', {\n          src: res.link,\n        });\n      }\n    });\n  }\n\n  render() {\n    return null;\n  }\n}\n",":host {\n  display: block;\n}\n.ir__custom-button {\n  width: 100%;\n}\n.ir__custom-button.--icon::part(base) {\n  height: auto;\n  width: auto;\n  padding: 0;\n}\n.ir__custom-button::part(base) {\n  height: var(--ir-c-btn-height, var(--wa-form-control-height));\n  padding: var(--ir-c-btn-padding, 0 var(--wa-form-control-padding-inline));\n  font-size: var(--ir-c-btn-font-size, auto);\n}\n.ir__custom-button.--link::part(base) {\n  height: fit-content;\n  padding: 0;\n}\n\n.ir-button__link:focus {\n  outline: none;\n}\n.ir-button__link:focus-visible {\n  outline: var(--wa-focus-ring);\n  outline-offset: var(--wa-focus-ring-offset);\n}\n.ir-button__link {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n\n  height: fit-content;\n  padding: 0;\n\n  font-family: inherit;\n  font-size: var(--wa-form-control-value-font-size);\n  font-weight: var(--wa-font-weight-action);\n  line-height: calc(var(--wa-form-control-height) - var(--border-width) * 2);\n  text-decoration: none;\n  vertical-align: middle;\n  white-space: nowrap;\n\n  border-style: var(--wa-border-style);\n  border-width: max(1px, var(--wa-form-control-border-width));\n  border-radius: var(--wa-form-control-border-radius);\n\n  transition-property: background, border, box-shadow, color;\n  transition-duration: var(--wa-transition-fast);\n  transition-timing-function: var(--wa-transition-easing);\n\n  cursor: pointer;\n  user-select: none;\n  -webkit-user-select: none;\n  color: var(--wa-color-on-quiet, var(--wa-color-brand-on-quiet));\n  background-color: transparent;\n  border-color: transparent;\n}\n.ir-button__link:hover {\n  color: var(--wa-color-on-quiet, var(--wa-color-brand-on-quiet));\n  background-color: var(--wa-color-fill-quiet, var(--wa-color-brand-fill-quiet));\n}\n.ir-button__link:active {\n  color: var(--wa-color-on-quiet, var(--wa-color-brand-on-quiet));\n  background-color: color-mix(in oklab, var(--wa-color-fill-quiet, var(--wa-color-brand-fill-quiet)), var(--wa-color-mix-active));\n}\n","import type WaButton from '@awesome.me/webawesome/dist/components/button/button';\nimport { Component, Element, Event, EventEmitter, Host, Prop, h } from '@stencil/core';\nexport type NativeButton = WaButton;\n\n@Component({\n  tag: 'ir-custom-button',\n  styleUrls: ['ir-custom-button.css'],\n  shadow: false,\n})\nexport class IrCustomButton {\n  @Element() el: HTMLIrCustomButtonElement;\n\n  @Prop() link: boolean;\n\n  @Prop({ reflect: true }) iconBtn: boolean;\n  /** The button's theme variant. Defaults to `neutral` if not within another element with a variant. */\n  @Prop() variant: NativeButton['variant'];\n\n  /** The button's visual appearance. */\n  @Prop() appearance: NativeButton['appearance'];\n\n  /** The button's size. */\n  @Prop() size: NativeButton['size'] = 'small';\n\n  /** Draws the button with a caret. Used to indicate that the button triggers a dropdown menu or similar behavior. */\n  @Prop() withCaret: NativeButton['withCaret'];\n\n  /** Disables the button. Does not apply to link buttons. */\n  @Prop() disabled: NativeButton['disabled'];\n\n  /** Draws the button in a loading state. */\n  @Prop() loading: NativeButton['loading'];\n\n  /** Draws a pill-style button with rounded edges. */\n  @Prop() pill: NativeButton['pill'];\n\n  /**\n   * The type of button. Note that the default value is `button` instead of `submit`, which is opposite of how native\n   * `<button>` elements behave. When the type is `submit`, the button will submit the surrounding form.\n   */\n  @Prop() type: NativeButton['type'] = 'button';\n\n  /**\n   * The name of the button, submitted as a name/value pair with form data, but only when this button is the submitter.\n   * This attribute is ignored when `href` is present.\n   */\n  @Prop() name: NativeButton['name'];\n\n  /**\n   * The value of the button, submitted as a pair with the button's name as part of the form data, but only when this\n   * button is the submitter. This attribute is ignored when `href` is present.\n   */\n  @Prop() value: NativeButton['value'];\n\n  /** When set, the underlying button will be rendered as an `<a>` with this `href` instead of a `<button>`. */\n  @Prop() href: NativeButton['href'];\n\n  /** Tells the browser where to open the link. Only used when `href` is present. */\n  @Prop() target: NativeButton['target'];\n\n  /** When using `href`, this attribute will map to the underlying link's `rel` attribute. */\n  @Prop() rel: NativeButton['rel'];\n\n  /** Tells the browser to download the linked file as this filename. Only used when `href` is present. */\n  @Prop() download: NativeButton['download'];\n\n  /**\n   * The \"form owner\" to associate the button with. If omitted, the closest containing form will be used instead. The\n   * value of this attribute must be an id of a form in the same document or shadow root as the button.\n   */\n  @Prop() form: NativeButton['form'];\n\n  /** Used to override the form owner's `action` attribute. */\n  @Prop() formAction: NativeButton['formAction'];\n\n  /** Used to override the form owner's `enctype` attribute.  */\n  @Prop() formEnctype: NativeButton['formEnctype'];\n\n  /** Used to override the form owner's `method` attribute.  */\n  @Prop() formMethod: NativeButton['formMethod'];\n\n  /** Used to override the form owner's `novalidate` attribute. */\n  @Prop() formNoValidate: NativeButton['formNoValidate'];\n\n  /** Used to override the form owner's `target` attribute. */\n  @Prop() formTarget: NativeButton['formTarget'];\n\n  @Event() clickHandler: EventEmitter<MouseEvent>;\n\n  private handleButtonClick(e: MouseEvent) {\n    this.clickHandler.emit(e);\n  }\n\n  render() {\n    if (this.link) {\n      return (\n        <button\n          class=\"ir-button__link\"\n          onClick={e => {\n            this.clickHandler.emit(e);\n          }}\n        >\n          <slot slot=\"start\" name=\"start\"></slot>\n          <slot></slot>\n          <slot slot=\"end\" name=\"end\"></slot>\n        </button>\n      );\n    }\n    return (\n      <Host>\n        <wa-button\n          onClick={e => {\n            this.handleButtonClick(e);\n          }}\n          /* core button props */\n          type={this.type}\n          size={this.size}\n          class={`ir__custom-button ${this.iconBtn ? '--icon' : ''} ${this.link ? '--link' : ''}`}\n          disabled={this.disabled}\n          appearance={this.link ? 'plain' : this.appearance}\n          loading={this.loading}\n          with-caret={this.withCaret}\n          variant={this.link ? 'brand' : this.variant}\n          pill={this.pill}\n          /* link-related props */\n          href={this.href}\n          target={this.target}\n          rel={this.rel}\n          download={this.download}\n          /* form-related props */\n          name={this.name}\n          value={this.value}\n          form={this.form}\n          form-action={this.formAction}\n          form-enctype={this.formEnctype}\n          form-method={this.formMethod}\n          form-no-validate={this.formNoValidate}\n          form-target={this.formTarget}\n          exportparts=\"base, start, label, end, caret, spinner\"\n        >\n          <slot slot=\"start\" name=\"start\"></slot>\n          <slot></slot>\n          <slot slot=\"end\" name=\"end\"></slot>\n        </wa-button>\n      </Host>\n    );\n  }\n}\n",".ir-dialog__footer {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  justify-content: flex-end;\n  width: 100%;\n}\n.dialog__loader-container {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 100%;\n  min-height: 50px;\n  min-width: 31rem;\n}\n","import { OverflowAdd, OverflowRelease } from '@/decorators/OverflowLock';\nimport { Component, Element, Event, EventEmitter, Method, Prop, State, h } from '@stencil/core';\n\n@Component({\n  tag: 'ir-dialog',\n  styleUrl: 'ir-dialog.css',\n  shadow: true,\n})\nexport class IrDialog {\n  @Element() el: HTMLIrDialogElement;\n  /**\n   * The dialog's label as displayed in the header.\n   * You should always include a relevant label, as it is required for proper accessibility.\n   * If you need to display HTML, use the label slot instead.\n   */\n  @Prop({ reflect: true }) label: string;\n\n  /**\n   * Indicates whether or not the dialog is open.\n   * Toggle this attribute to show and hide the dialog.\n   */\n  @Prop({ reflect: true, mutable: true }) open: boolean;\n\n  /**\n   * Disables the header.\n   * This will also remove the default close button.\n   */\n  @Prop({ reflect: true, attribute: 'without-header' }) withoutHeader: boolean;\n\n  /**\n   * When enabled, the dialog will be closed when the user clicks outside of it.\n   */\n  @Prop({ attribute: 'light-dismiss' }) lightDismiss: boolean = true;\n\n  /**\n   * Emitted when the dialog opens.\n   */\n  @Event({ bubbles: true, composed: true }) irDialogShow: EventEmitter<void>;\n\n  /**\n   * Emitted when the dialog is requested to close.\n   * Calling event.preventDefault() will prevent the dialog from closing.\n   * You can inspect event.detail.source to see which element caused the dialog to close.\n   * If the source is the dialog element itself, the user has pressed Escape or the dialog has been closed programmatically.\n   * Avoid using this unless closing the dialog will result in destructive behavior such as data loss.\n   */\n  @Event({ bubbles: true, composed: true }) irDialogHide: EventEmitter<{ source: Element }>;\n\n  /**\n   * Emitted after the dialog opens and all animations are complete.\n   */\n  @Event({ bubbles: true, composed: true }) irDialogAfterShow: EventEmitter<void>;\n\n  /**\n   * Emitted after the dialog closes and all animations are complete.\n   */\n  @Event({ bubbles: true, composed: true }) irDialogAfterHide: EventEmitter<void>;\n\n  @State() private slotState = new Map<string, boolean>();\n\n  private slotObserver: MutationObserver;\n\n  private readonly SLOT_NAMES = ['label', 'header-actions', 'footer'] as const;\n\n  componentWillLoad() {\n    this.updateSlotState();\n  }\n\n  componentDidLoad() {\n    this.setupSlotListeners();\n  }\n\n  disconnectedCallback() {\n    this.removeSlotListeners();\n  }\n  @Method()\n  async openModal() {\n    this.open = true;\n  }\n\n  @Method()\n  async closeModal() {\n    this.open = false;\n  }\n\n  @OverflowRelease()\n  private handleWaHide(e: CustomEvent<{ source: Element }>) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    if (!e.detail) {\n      return;\n    }\n    this.open = false;\n    this.irDialogHide.emit(e.detail);\n  }\n\n  @OverflowAdd()\n  private handleWaShow(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.open = true;\n    this.irDialogShow.emit();\n  }\n\n  private handleWaAfterHide(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.irDialogAfterHide.emit();\n  }\n\n  private handleWaAfterShow(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.irDialogAfterShow.emit();\n  }\n  private setupSlotListeners() {\n    // Listen to slotchange events on the host element\n    this.el.addEventListener('slotchange', this.handleSlotChange);\n\n    // Also use MutationObserver as a fallback for browsers that don't fire slotchange reliably\n    this.slotObserver = new MutationObserver(this.handleSlotChange);\n    this.slotObserver.observe(this.el, {\n      childList: true,\n      subtree: true,\n      attributes: true,\n      attributeFilter: ['slot'],\n    });\n  }\n  private removeSlotListeners() {\n    this.el.removeEventListener('slotchange', this.handleSlotChange);\n    this.slotObserver?.disconnect();\n  }\n\n  private handleSlotChange = () => {\n    this.updateSlotState();\n  };\n\n  private updateSlotState() {\n    const newState = new Map<string, boolean>();\n\n    this.SLOT_NAMES.forEach(name => {\n      newState.set(name, this.hasSlot(name));\n    });\n\n    this.slotState = newState;\n  }\n  private hasSlot(name: string): boolean {\n    return !!this.el.querySelector(`[slot=\"${name}\"]`);\n  }\n  render() {\n    return (\n      <wa-dialog\n        onwa-hide={this.handleWaHide.bind(this)}\n        onwa-show={this.handleWaShow.bind(this)}\n        onwa-after-hide={this.handleWaAfterHide.bind(this)}\n        onwa-after-show={this.handleWaAfterShow.bind(this)}\n        label={this.label}\n        id=\"dialog-overview\"\n        open={this.open}\n        style={{ '--width': 'var(--ir-dialog-width,31rem)' }}\n        without-header={this.withoutHeader}\n        lightDismiss={this.lightDismiss}\n        exportparts=\"dialog, header, header-actions, title, close-button, close-button__base, body, footer\"\n      >\n        {this.slotState.get('header-actions') && <slot name=\"header-actions\" slot=\"header-actions\"></slot>}\n        {this.slotState.get('label') && <slot name=\"label\" slot=\"label\"></slot>}\n        <slot></slot>\n        {this.slotState.get('footer') && <slot name=\"footer\" slot=\"footer\"></slot>}\n      </wa-dialog>\n    );\n  }\n}\n","import { MaskedRange } from 'imask';\nimport moment from 'moment';\n\nexport const masks = {\n  price: {\n    mask: Number,\n    scale: 2,\n    radix: '.',\n    mapToRadix: [','],\n    normalizeZeros: true,\n    padFractionalZeros: true,\n    thousandsSeparator: ',',\n  },\n  url: {\n    mask: /^\\S*$/,\n    overwrite: false,\n    prepare(appended /* string */) {\n      return appended.replace(/^https?:\\/\\//i, '');\n    },\n\n    commit(value, masked) {\n      masked._value = 'https://' + value.replace(/^https?:\\/\\//i, '');\n    },\n  },\n  time: {\n    mask: 'HH:mm',\n    blocks: {\n      HH: {\n        mask: MaskedRange,\n        from: 0,\n        to: 23,\n        placeholderChar: 'H',\n      },\n      mm: {\n        mask: MaskedRange,\n        from: 0,\n        to: 59,\n        placeholderChar: 'm',\n      },\n    },\n    lazy: false,\n    placeholderChar: '_',\n  },\n  date: {\n    mask: Date,\n    pattern: 'DD/MM/YYYY',\n    lazy: false,\n    min: moment('1900-01-01', 'YYYY-MM-DD').toDate(),\n    max: new Date(),\n    format: date => moment(date).format('DD/MM/YYYY'),\n    parse: str => moment(str, 'DD/MM/YYYY').toDate(),\n    autofix: true,\n    placeholderChar: '_',\n    blocks: {\n      YYYY: {\n        mask: MaskedRange,\n        from: 1900,\n        to: moment().format('YYYY'),\n        placeholderChar: 'Y',\n      },\n      MM: {\n        mask: MaskedRange,\n        from: 1,\n        to: 12,\n        placeholderChar: 'M',\n      },\n      DD: {\n        mask: MaskedRange,\n        from: 1,\n        to: 31,\n        placeholderChar: 'D',\n      },\n    },\n  },\n} as const;\n",":host {\n  display: block;\n}\n:host([aria-invalid='true']) wa-input::part(base),\nwa-input[aria-invalid='true']::part(base) {\n  border-color: var(--wa-color-danger-border-loud);\n  outline-color: var(--wa-color-danger-border-loud);\n  border-width: 2px;\n}\n","import WaInput from '@awesome.me/webawesome/dist/components/input/input';\nimport { AttachInternals, Component, Element, Event, EventEmitter, Host, Method, Prop, State, Watch, h } from '@stencil/core';\nimport { masks } from './masks';\nimport IMask, { FactoryArg, InputMask } from 'imask';\n\nexport type MaskName = keyof typeof masks;\nexport type MaskConfig<N extends MaskName = MaskName> = (typeof masks)[N];\nexport type MaskProp = MaskName | MaskConfig | FactoryArg;\nexport type NativeWaInput = WaInput;\n\n@Component({\n  tag: 'ir-input',\n  styleUrl: 'ir-input.css',\n  shadow: true,\n  formAssociated: true,\n})\nexport class IrInput {\n  @AttachInternals() internals: ElementInternals;\n\n  @Element() el: HTMLIrInputElement;\n\n  @Prop() name: string;\n  /** The value of the input. */\n  @Prop({ reflect: true, mutable: true }) value: string = '';\n\n  /**\n   * The type of input. Works the same as a native `<input>` element, but only a subset of types are supported. Defaults\n   * to `text`.\n   */\n  @Prop({ reflect: true }) type: NativeWaInput['type'] = 'text';\n\n  /** The default value of the form control. Primarily used for resetting the form control. */\n  @Prop({ reflect: true }) defaultValue: NativeWaInput['defaultValue'];\n\n  /** The input's size. */\n  @Prop({ reflect: true }) size: NativeWaInput['size'] = 'small';\n\n  /** The input's visual appearance. */\n  @Prop({ reflect: true }) appearance: NativeWaInput['appearance'];\n\n  /** Draws a pill-style input with rounded edges. */\n  @Prop({ reflect: true }) pill: NativeWaInput['pill'];\n\n  @Prop({ mutable: true }) returnMaskedValue: boolean = false;\n\n  /** The input's label. If you need to display HTML, use the `label` slot instead. */\n  @Prop({ reflect: true }) label: NativeWaInput['label'];\n\n  /** The input's hint. If you need to display HTML, use the `hint` slot instead. */\n  @Prop({ reflect: true }) hint: NativeWaInput['hint'];\n\n  /** Adds a clear button when the input is not empty. */\n  @Prop({ reflect: true }) withClear: NativeWaInput['withClear'];\n\n  /** Placeholder text to show as a hint when the input is empty. */\n  @Prop({ reflect: true }) placeholder: NativeWaInput['placeholder'];\n\n  /** Makes the input readonly. */\n  @Prop({ reflect: true }) readonly: NativeWaInput['readonly'];\n\n  /** Adds a button to toggle the password's visibility. Only applies to password types. */\n  @Prop({ reflect: true }) passwordToggle: NativeWaInput['passwordToggle'];\n\n  /** Determines whether or not the password is currently visible. Only applies to password input types. */\n  @Prop({ reflect: true }) passwordVisible: NativeWaInput['passwordVisible'];\n\n  /** Hides the browser's built-in increment/decrement spin buttons for number inputs. */\n  @Prop({ reflect: true }) withoutSpinButtons: NativeWaInput['withoutSpinButtons'];\n\n  /**\n   * By default, form controls are associated with the nearest containing `<form>` element. This attribute allows you\n   * to place the form control outside of a form and associate it with the form that has this `id`. The form must be in\n   * the same document or shadow root for this to work.\n   */\n  @Prop({ reflect: true }) form: NativeWaInput['form'];\n\n  /** Makes the input a required field. */\n  @Prop({ reflect: true }) required: NativeWaInput['required'];\n\n  /** A regular expression pattern to validate input against. */\n  @Prop() pattern: NativeWaInput['pattern'];\n\n  /** The minimum length of input that will be considered valid. */\n  @Prop() minlength: NativeWaInput['minlength'];\n\n  /** The maximum length of input that will be considered valid. */\n  @Prop() maxlength: NativeWaInput['maxlength'];\n\n  /** The input's minimum value. Only applies to date and number input types. */\n  @Prop() min: NativeWaInput['min'];\n\n  /** The input's maximum value. Only applies to date and number input types. */\n  @Prop() max: NativeWaInput['max'];\n\n  /**\n   * Specifies the granularity that the value must adhere to, or the special value `any` which means no stepping is\n   * implied, allowing any numeric value. Only applies to date and number input types.\n   */\n  @Prop() step: NativeWaInput['step'];\n\n  /** Controls whether and how text input is automatically capitalized as it is entered by the user. */\n  @Prop() autocapitalize: NativeWaInput['autocapitalize'];\n\n  /** Indicates whether the browser's autocorrect feature is on or off. */\n  @Prop() autocorrect: NativeWaInput['autocorrect'];\n\n  /**\n   * Specifies what permission the browser has to provide assistance in filling out form field values. Refer to\n   * [this page on MDN](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/autocomplete) for available values.\n   */\n  @Prop() autocomplete: NativeWaInput['autocomplete'] = 'off';\n\n  /** Indicates that the input should receive focus on page load. */\n  @Prop() autofocus: NativeWaInput['autofocus'];\n\n  /** Used to customize the label or icon of the Enter key on virtual keyboards. */\n  @Prop() enterkeyhint: NativeWaInput['enterkeyhint'];\n\n  /** Enables spell checking on the input. */\n  @Prop() spellcheck: NativeWaInput['spellcheck'];\n\n  /**\n   * Tells the browser what type of data will be entered by the user, allowing it to display the appropriate virtual\n   * keyboard on supportive devices.\n   */\n  @Prop() inputmode: NativeWaInput['inputmode'];\n\n  /**\n   * Used for SSR. Will determine if the SSRed component will have the label slot rendered on initial paint.\n   */\n  @Prop() withLabel: NativeWaInput['withLabel'];\n\n  /**\n   * Used for SSR. Will determine if the SSRed component will have the hint slot rendered on initial paint.\n   */\n  @Prop() withHint: NativeWaInput['withHint'];\n\n  /** Mask for the input field (optional) */\n  @Prop() mask: MaskProp;\n\n  /** Disables the input. */\n  @Prop({ reflect: true }) disabled: boolean;\n\n  /**\n   * Custom CSS classes applied to the inner `<wa-input>` element.\n   *\n   * You can also target the exposed parts `::part(input)` and `::part(base)`\n   * for deeper styling of the native input and container.\n   */\n  @Prop() inputClass: string;\n\n  @Event({ bubbles: true, composed: true, eventName: 'text-change' }) textChange: EventEmitter<string>;\n  @Event({ bubbles: true, composed: true, eventName: 'input-blur' }) inputBlur: EventEmitter<void>;\n  @Event({ bubbles: true, composed: true }) inputFocus: EventEmitter<void>;\n\n  @State() private isValid: boolean = true;\n  @State() private slotState = new Map<string, boolean>();\n\n  private _mask?: InputMask<any>;\n  private inputRef: WaInput;\n  private animationFrame: number;\n  private slotObserver: MutationObserver;\n\n  private readonly SLOT_NAMES = ['label', 'start', 'end', 'clear-icon', 'hide-password-icon', 'show-password-icon', 'hint'] as const;\n\n  componentWillLoad() {\n    if (this.mask === 'price' && typeof this.mask === 'string') {\n      this.returnMaskedValue = true;\n    }\n    this.updateSlotState();\n  }\n\n  componentDidLoad() {\n    if (this.disabled) {\n      this.inputRef.disabled = this.disabled;\n    }\n    // Find the closest form element (if any)\n    // track slotted prefix to compute width\n    this.initializeMask();\n    this.setupSlotListeners();\n  }\n  disconnectedCallback() {\n    this.destroyMask();\n    this.removeSlotListeners();\n  }\n\n  @Watch('disabled')\n  handleDisabledChange(newValue: boolean, oldValue: boolean) {\n    if (newValue !== oldValue) {\n      this.inputRef.disabled = newValue;\n    }\n  }\n\n  @Watch('mask')\n  @Watch('min')\n  @Watch('max')\n  protected handleMaskPropsChange() {\n    if (!this.inputRef) return;\n    const hasMask = Boolean(this.resolveMask());\n    if (!hasMask) {\n      this.destroyMask();\n      return;\n    }\n    this.rebuildMask();\n  }\n\n  @Watch('aria-invalid')\n  handleAriaInvalidChange(e) {\n    this.isValid = !JSON.parse(e);\n  }\n  @Watch('value')\n  handleValueChange(newValue: string, oldValue: string) {\n    if (newValue !== oldValue) {\n      if (this._mask && this.returnMaskedValue && this._mask.value !== newValue) {\n        this._mask.value = newValue;\n        this._mask.updateValue();\n      }\n    }\n  }\n  private handleInput = (nextValue: string) => {\n    if (nextValue === this.value) {\n      return;\n    }\n    if (!this.mask) {\n      this.value = nextValue ?? '';\n    }\n    this.internals.setFormValue(nextValue ?? '');\n    this.textChange.emit(nextValue ?? '');\n  };\n\n  private async initializeMask() {\n    if (!this.inputRef) return;\n\n    const maskOpts = this.buildMaskOptions();\n    if (!maskOpts) return;\n\n    await customElements.whenDefined('wa-input'); // optional, but explicit\n    await (this.inputRef as WaInput & { updateComplete: Promise<WaInput> }).updateComplete;\n\n    const nativeInput = this.inputRef.input;\n    if (!nativeInput) return;\n\n    this._mask = IMask(nativeInput, maskOpts);\n    if (this.value) {\n      if (this.returnMaskedValue) {\n        this._mask.unmaskedValue = this.value;\n      } else {\n        this._mask.value = this.value;\n      }\n    }\n    this._mask.on('accept', () => {\n      const isEmpty = this.inputRef.value.trim() === '' || this._mask.unmaskedValue === '';\n      const value = isEmpty ? '' : this.returnMaskedValue ? this._mask.unmaskedValue : this._mask.value;\n      this.handleInput(value);\n    });\n  }\n  private setupSlotListeners() {\n    // Listen to slotchange events on the host element\n    this.el.addEventListener('slotchange', this.handleSlotChange);\n\n    // Also use MutationObserver as a fallback for browsers that don't fire slotchange reliably\n    this.slotObserver = new MutationObserver(this.handleSlotChange);\n    this.slotObserver.observe(this.el, {\n      childList: true,\n      subtree: true,\n      attributes: true,\n      attributeFilter: ['slot'],\n    });\n  }\n  private removeSlotListeners() {\n    this.el.removeEventListener('slotchange', this.handleSlotChange);\n    this.slotObserver?.disconnect();\n  }\n\n  private handleSlotChange = () => {\n    this.updateSlotState();\n  };\n\n  private updateSlotState() {\n    const newState = new Map<string, boolean>();\n\n    this.SLOT_NAMES.forEach(name => {\n      newState.set(name, this.hasSlot(name));\n    });\n\n    this.slotState = newState;\n  }\n\n  private rebuildMask() {\n    this.destroyMask();\n    this.initializeMask();\n  }\n\n  private destroyMask() {\n    this._mask?.destroy();\n    this._mask = undefined;\n    this.clearAnimationFrame();\n  }\n  private clearAnimationFrame() {\n    if (this.animationFrame) {\n      cancelAnimationFrame(this.animationFrame);\n      this.animationFrame = undefined;\n    }\n  }\n  private buildMaskOptions() {\n    const resolvedMask = this.resolveMask();\n    if (!resolvedMask) return;\n\n    const maskOpts: Record<string, any> = typeof resolvedMask === 'object' && resolvedMask !== null && !Array.isArray(resolvedMask) ? { ...resolvedMask } : { mask: resolvedMask };\n\n    if (this.min !== undefined) {\n      maskOpts.min = this.min;\n    }\n    if (this.max !== undefined) {\n      maskOpts.max = this.max;\n    }\n\n    return maskOpts;\n  }\n\n  private resolveMask() {\n    if (!this.mask) return;\n    if (typeof this.mask === 'string') {\n      return masks[this.mask];\n    }\n    return this.mask;\n  }\n\n  private handleChange = (e: CustomEvent) => {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    if (!this.mask) this.handleInput((e.target as any).value);\n  };\n\n  private handleClear = (e: CustomEvent) => {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    if (this._mask) {\n      this._mask.value = '';\n    }\n    this.handleInput('');\n  };\n\n  private handleBlur = (e: CustomEvent) => {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.inputBlur.emit();\n  };\n\n  private handleFocus = (e: CustomEvent) => {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    this.inputFocus.emit();\n  };\n\n  private hasSlot(name: string): boolean {\n    return !!this.el.querySelector(`[slot=\"${name}\"]`);\n  }\n  @Method()\n  async focusInput() {\n    this.inputRef?.focus();\n  }\n\n  @Method()\n  async blurInput() {\n    this.inputRef?.blur();\n  }\n  render() {\n    let displayValue = this.value;\n    if (this._mask && this.returnMaskedValue) {\n      // IMask holds the formatted string (e.g., \"1,000.00\")\n      // this.value holds the raw number (e.g., \"1000\")\n      // We must pass \"1,000.00\" to wa-input to avoid the overwrite warning\n      displayValue = this._mask.value;\n    }\n    return (\n      <Host>\n        <wa-input\n          type={this.type}\n          name={this.name}\n          value={displayValue}\n          ref={el => (this.inputRef = el)}\n          defaultValue={this.defaultValue}\n          size={this.size}\n          appearance={this.appearance}\n          pill={this.pill}\n          aria-invalid={String(!this.isValid)}\n          label={this.label}\n          hint={this.hint}\n          withClear={this.withClear}\n          placeholder={this.placeholder}\n          readonly={this.readonly}\n          passwordToggle={this.passwordToggle}\n          passwordVisible={this.passwordVisible}\n          withoutSpinButtons={this.withoutSpinButtons}\n          form={this.form}\n          required={this.required}\n          pattern={this.pattern}\n          minlength={this.minlength}\n          maxlength={this.maxlength}\n          min={this.min}\n          max={this.max}\n          step={this.step}\n          class={this.inputClass}\n          autocapitalize={this.autocapitalize}\n          autocorrect={this.autocorrect}\n          autocomplete={this.autocomplete}\n          autofocus={this.autofocus}\n          enterkeyhint={this.enterkeyhint}\n          spellcheck={this.spellcheck}\n          inputmode={this.inputmode}\n          withLabel={this.withLabel}\n          withHint={this.withHint}\n          oninput={this.handleChange}\n          onwa-clear={this.handleClear}\n          onblur={this.handleBlur}\n          onfocus={this.handleFocus}\n          exportparts=\"base, hint, label, input, start, end, clear-button, password-toggle-button\"\n        >\n          {this.slotState.get('label') && <slot name=\"label\" slot=\"label\"></slot>}\n          {this.slotState.get('start') && <slot name=\"start\" slot=\"start\"></slot>}\n          {this.slotState.get('end') && <slot name=\"end\" slot=\"end\"></slot>}\n          {this.slotState.get('clear-icon') && <slot name=\"clear-icon\" slot=\"clear-icon\"></slot>}\n          {this.slotState.get('hide-password-icon') && <slot name=\"hide-password-icon\" slot=\"hide-password-icon\"></slot>}\n          {this.slotState.get('show-password-icon') && <slot name=\"show-password-icon\" slot=\"show-password-icon\"></slot>}\n          {this.slotState.get('hint') && <slot name=\"hint\" slot=\"hint\"></slot>}\n        </wa-input>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n.property-switcher__trigger {\n  width: 200px;\n  padding: 0;\n  margin: 0;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.property-switcher__dialog::part(body) {\n  padding: 0;\n}\n","import { Component, Element, Event, EventEmitter, Host, Prop, State, Watch, h } from '@stencil/core';\n\nimport { FetchedProperty, LinkedProperty } from '@/services/property.service';\nimport { GetACByACID } from './legacy.types';\nimport Token from '@/models/Token';\nimport axios from 'axios';\nimport WaDropdownItem from '@awesome.me/webawesome/dist/components/dropdown-item/dropdown-item';\n\ntype SwitcherMode = 'dropdown' | 'dialog' | 'read-only';\n\n@Component({\n  tag: 'ir-property-switcher',\n  styleUrl: 'ir-property-switcher.css',\n  scoped: true,\n})\nexport class IrPropertySwitcher {\n  @Element() el: HTMLIrPropertySwitcherElement;\n\n  @Prop() mode: 'dropdown' | 'dialog' = 'dialog';\n  @Prop() ticket: string;\n  @Prop() baseUrl: string;\n\n  @State() open = false;\n  @State() selectedProperty?: FetchedProperty;\n  @State() linkedProperties: LinkedProperty[] = [];\n  @State() displayMode: SwitcherMode = 'read-only';\n\n  private token = new Token();\n\n  /** Emits whenever the user selects a new property */\n  @Event({ bubbles: true, composed: true })\n  propertyChange: EventEmitter<FetchedProperty>;\n\n  private storagePoller?: number;\n  private userInfoPoller?: number;\n  private lastSelectedAcRaw: string | null = null;\n  private lastUserInfoRaw: string | null = null;\n\n  async componentWillLoad() {\n    if (this.baseUrl) this.token.setBaseUrl(this.baseUrl);\n    if (this.ticket) {\n      this.token.setToken(this.ticket);\n      this.init();\n    }\n\n    // Listen for cross-tab updates\n    window.addEventListener('storage', this.handleStorageEvent);\n  }\n\n  disconnectedCallback() {\n    this.stopSelectedAcPolling();\n    this.stopUserInfoPolling();\n    window.removeEventListener('storage', this.handleStorageEvent);\n  }\n\n  @Watch('ticket')\n  async handleTicketChange(newValue: string, oldValue: string) {\n    if (newValue !== oldValue) {\n      this.token.setToken(newValue);\n      this.init();\n    }\n  }\n\n  private async init() {\n    await this.pollSelectedAcStorage();\n    this.pollUserInfoStorage();\n\n    if (!this.selectedProperty) {\n      this.startSelectedAcPolling();\n    }\n    if (!this.lastUserInfoRaw) {\n      this.startUserInfoPolling();\n    }\n  }\n\n  private startSelectedAcPolling() {\n    if (this.storagePoller) return;\n\n    this.storagePoller = window.setInterval(this.pollSelectedAcStorage, 300);\n  }\n\n  private stopSelectedAcPolling() {\n    if (this.storagePoller) {\n      clearInterval(this.storagePoller);\n      this.storagePoller = undefined;\n    }\n  }\n\n  private startUserInfoPolling() {\n    if (this.userInfoPoller) return;\n\n    this.userInfoPoller = window.setInterval(this.pollUserInfoStorage, 300);\n  }\n\n  private stopUserInfoPolling() {\n    if (this.userInfoPoller) {\n      clearInterval(this.userInfoPoller);\n      this.userInfoPoller = undefined;\n    }\n  }\n\n  private handleStorageEvent = () => {\n    // Cross-tab change - re-enable polling briefly\n    this.startSelectedAcPolling();\n    this.startUserInfoPolling();\n  };\n\n  private pollSelectedAcStorage = async () => {\n    const selectedAcRaw = localStorage.getItem('_Selected_Ac');\n\n    // Nothing changed - skip work\n    if (selectedAcRaw === this.lastSelectedAcRaw) {\n      return;\n    }\n\n    this.lastSelectedAcRaw = selectedAcRaw;\n\n    if (!selectedAcRaw) {\n      return;\n    }\n\n    let selectedAc: GetACByACID;\n\n    try {\n      selectedAc = JSON.parse(selectedAcRaw);\n    } catch {\n      return;\n    }\n\n    // ? Storage is now valid\n    this.updateSelectedProperty(selectedAc);\n    await this.fetchLinkedProperties(selectedAc.AC_ID);\n    this.resolveDisplayMode(true);\n\n    // ?? Stop polling once initialized\n    this.stopSelectedAcPolling();\n  };\n\n  private pollUserInfoStorage = () => {\n    const userInfoRaw = localStorage.getItem('UserInfo_b');\n\n    if (userInfoRaw === this.lastUserInfoRaw) {\n      return;\n    }\n\n    this.lastUserInfoRaw = userInfoRaw;\n\n    if (!userInfoRaw) {\n      return;\n    }\n\n    this.resolveDisplayMode(!!this.selectedProperty);\n    this.stopUserInfoPolling();\n  };\n\n  private updateSelectedProperty(selectedAc: GetACByACID) {\n    this.selectedProperty = {\n      A_NAME: selectedAc.My_User?.USERNAME ?? '',\n      COUNTRY_CODE: selectedAc.COUNTRY_ID as any,\n      COUNTRY_NAME: selectedAc.My_Country?.L1_NAME_REF ?? '',\n      PROPERTY_ID: selectedAc.AC_ID,\n      PROPERTY_NAME: selectedAc.NAME,\n    };\n  }\n\n  private async fetchLinkedProperties(acId: number) {\n    try {\n      const { data } = await axios.post(`${this.baseUrl ?? ''}/Fetch_Linked_Properties`, {\n        property_id: acId,\n      });\n\n      if (data.ExceptionMsg) {\n        throw new Error(data.ExceptionMsg);\n      }\n\n      this.linkedProperties = Array.isArray(data.My_Result) ? data.My_Result : [];\n    } catch (error) {\n      console.error('Failed to fetch linked properties', error);\n      this.linkedProperties = [];\n    }\n  }\n\n  private resolveDisplayMode(hasSelectedAc: boolean) {\n    const userInfoRaw = localStorage.getItem('UserInfo_b');\n\n    let userInfo: any = null;\n    try {\n      if (userInfoRaw) userInfo = JSON.parse(userInfoRaw);\n    } catch {\n      /* noop */\n    }\n\n    const userTypeCode = String(userInfo?.USER_TYPE_CODE ?? '');\n\n    if (userTypeCode === '1' || userTypeCode === '4') {\n      this.displayMode = 'dialog';\n      return;\n    }\n\n    if (!hasSelectedAc || !this.linkedProperties.length) {\n      this.displayMode = 'read-only';\n      return;\n    }\n\n    this.displayMode = 'dropdown';\n  }\n\n  private handlePropertySelected = async (event: CustomEvent<FetchedProperty['PROPERTY_ID']>) => {\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n    await this.applySelectedProperty(event.detail);\n  };\n\n  private handleDropdownSelect = async (event: CustomEvent<{ item: WaDropdownItem }>) => {\n    const selectedId = Number(event.detail.item.value);\n    const property = this.linkedProperties.find(p => p.property_id === selectedId);\n    if (!property) return;\n\n    await this.applySelectedProperty(property.property_id);\n  };\n\n  private async applySelectedProperty(propertyId: FetchedProperty['PROPERTY_ID']) {\n    this.open = false;\n    try {\n      const { data } = await axios.post(`${this.baseUrl ?? ''}/Get_Ac_By_AC_ID_Adv`, {\n        AC_ID: propertyId,\n        Bypass_Caching: true,\n        IS_BACK_OFFICE: true,\n      });\n\n      if (data.ExceptionMsg) {\n        throw new Error(data.ExceptionMsg);\n      }\n\n      const property = data.My_Result;\n      localStorage.setItem('_Selected_Ac', JSON.stringify(property));\n      this.propertyChange.emit(property);\n      this.updateSelectedProperty(property);\n    } catch (error) {\n      console.error('Failed to fetch selected property details', error);\n    }\n\n    // Re-init via polling-safe path\n    this.startSelectedAcPolling();\n    this.startUserInfoPolling();\n  }\n\n  private renderReadOnly() {\n    return <p class=\"property-switcher__trigger\">{this.selectedProperty?.PROPERTY_NAME ?? 'Property'}</p>;\n  }\n\n  private trigger() {\n    return (\n      <ir-custom-button withCaret variant=\"neutral\" appearance=\"plain\" onClickHandler={() => (this.open = !this.open)}>\n        <p class=\"property-switcher__trigger\">{this.selectedProperty?.PROPERTY_NAME ?? 'Select property'}</p>\n      </ir-custom-button>\n    );\n  }\n\n  render() {\n    return (\n      <Host>\n        {this.displayMode === 'read-only' && this.renderReadOnly()}\n\n        {this.displayMode === 'dropdown' && (\n          <wa-dropdown\n            onwa-hide={e => {\n              e.stopPropagation();\n              e.stopImmediatePropagation();\n            }}\n            onwa-select={e => {\n              e.stopPropagation();\n              e.stopImmediatePropagation();\n              this.handleDropdownSelect(e);\n            }}\n          >\n            <ir-custom-button slot=\"trigger\" withCaret variant=\"neutral\" appearance=\"plain\">\n              {this.selectedProperty?.PROPERTY_NAME}\n            </ir-custom-button>\n            {this.linkedProperties?.map(property => (\n              <wa-dropdown-item value={property.property_id?.toString()} key={`dropdown-item-${property.property_id}`}>\n                {property.name}\n              </wa-dropdown-item>\n            ))}\n          </wa-dropdown>\n        )}\n\n        {this.displayMode === 'dialog' && (\n          <div>\n            {this.trigger()}\n            <ir-dialog\n              withoutHeader\n              open={this.open}\n              label=\"Find property\"\n              class=\"property-switcher__dialog\"\n              onIrDialogAfterHide={e => {\n                e.stopImmediatePropagation();\n                e.stopPropagation();\n                this.open = false;\n              }}\n            >\n              {this.open && (\n                <ir-property-switcher-dialog-content\n                  open={this.open}\n                  selectedPropertyId={this.selectedProperty?.PROPERTY_ID}\n                  properties={this.linkedProperties}\n                  onPropertySelected={this.handlePropertySelected}\n                />\n              )}\n            </ir-dialog>\n          </div>\n        )}\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n\n.property-switcher__search-input {\n  padding: 1rem;\n}\n\n.property-switcher__results {\n  max-height: 250px;\n  min-height: 150px;\n  overflow-y: auto;\n  padding-bottom: 1rem;\n}\n\n.property-switcher__status {\n  padding: 1rem;\n  font-size: 0.875rem;\n  color: var(--ir-color-text-muted, #646464);\n}\n","import { Component, Element, Event, EventEmitter, Host, Prop, State, Watch, h } from '@stencil/core';\nimport { Debounce } from '@/decorators/debounce';\nimport { FetchedProperty, LinkedProperty } from '@/services/property.service';\nimport axios from 'axios';\n\n/**\n * Internal component responsible for rendering the searchable list of properties inside the switcher dialog.\n * It owns the data fetching, filtering and keyboard navigation logic so the parent dialog stays lean.\n */\n@Component({\n  tag: 'ir-property-switcher-dialog-content',\n  styleUrl: 'ir-property-switcher-dialog-content.css',\n  scoped: true,\n})\nexport class IrPropertySwitcherDialogContent {\n  @Element() el: HTMLIrPropertySwitcherDialogContentElement;\n\n  /** Whether the surrounding dialog is open. Used to focus and reset the search input as needed. */\n  @Prop() open: boolean = false;\n\n  /** ID of the property that is currently selected in the parent component. */\n  @Prop() selectedPropertyId?: number;\n\n  /** Linked properties provided by the parent switcher. */\n  @Prop() properties: LinkedProperty[] = [];\n\n  /** Emits whenever the user picks a property from the list. */\n  @Event({ bubbles: true, composed: true }) propertySelected: EventEmitter<FetchedProperty['PROPERTY_ID']>;\n\n  @State() private filteredProperties: FetchedProperty[] = [];\n  @State() private searchTerm: string = '';\n  @State() private highlightedIndex: number = -1;\n\n  private inputRef?: HTMLIrInputElement;\n\n  @Watch('open')\n  handleOpenChange(isOpen: boolean) {\n    if (!isOpen) {\n      return;\n    }\n    requestAnimationFrame(() => {\n      this.inputRef?.focusInput();\n      this.resetSearch();\n    });\n  }\n\n  componentDidLoad() {\n    this.inputRef?.focusInput();\n  }\n\n  @Watch('selectedPropertyId')\n  handleSelectedPropertyIdChange() {\n    this.syncHighlightedIndex();\n  }\n\n  private resetSearch() {\n    this.searchTerm = '';\n    this.filteredProperties = [];\n    this.highlightedIndex = -1;\n  }\n\n  @Debounce(300)\n  private async fetchProperties(searchTerm: string) {\n    const query = searchTerm.trim();\n    if (!query) {\n      this.filteredProperties = [];\n      this.highlightedIndex = -1;\n      return;\n    }\n\n    try {\n      const { data } = await axios.post('/Fetch_Properties', { SEARCH_TERM: query });\n      const properties = data.My_Result;\n      this.filteredProperties = properties;\n    } catch (error) {\n      console.error('Failed to fetch properties', error);\n      this.filteredProperties = [];\n    }\n\n    if (!this.filteredProperties.length) {\n      this.highlightedIndex = -1;\n      return;\n    }\n\n    const selectedIndex = this.getSelectedIndex(this.filteredProperties);\n    this.highlightedIndex = selectedIndex >= 0 ? selectedIndex : 0;\n    requestAnimationFrame(() => this.ensureHighlightedVisible());\n  }\n\n  private getSelectedIndex(list: FetchedProperty[]) {\n    if (!this.selectedPropertyId) {\n      return -1;\n    }\n    return list.findIndex(property => this.getPropertyId(property) === this.selectedPropertyId);\n  }\n\n  private syncHighlightedIndex() {\n    if (!this.filteredProperties.length) {\n      this.highlightedIndex = -1;\n      return;\n    }\n    const selectedIndex = this.getSelectedIndex(this.filteredProperties);\n    if (selectedIndex >= 0) {\n      this.highlightedIndex = selectedIndex;\n      return;\n    }\n    this.highlightedIndex = Math.min(Math.max(this.highlightedIndex, 0), this.filteredProperties.length - 1);\n  }\n\n  private handleSearchChange = (event: CustomEvent<string>) => {\n    this.searchTerm = event.detail ?? '';\n    this.fetchProperties(this.searchTerm);\n  };\n\n  private handleKeyDown = (event: KeyboardEvent) => {\n    if (!this.filteredProperties.length) {\n      return;\n    }\n\n    switch (event.key) {\n      case 'ArrowDown':\n        event.preventDefault();\n        this.highlightedIndex = Math.min(this.filteredProperties.length - 1, this.highlightedIndex + 1);\n        this.ensureHighlightedVisible();\n        break;\n      case 'ArrowUp':\n        event.preventDefault();\n        this.highlightedIndex = Math.max(0, this.highlightedIndex - 1);\n        this.ensureHighlightedVisible();\n        break;\n      case 'Enter':\n        event.preventDefault();\n        this.selectProperty(this.filteredProperties[this.highlightedIndex]);\n        break;\n    }\n  };\n\n  private ensureHighlightedVisible() {\n    if (this.highlightedIndex < 0) {\n      return;\n    }\n    const options = this.el.querySelectorAll('wa-option');\n    const option = options?.[this.highlightedIndex];\n    option?.scrollIntoView({ block: 'nearest', inline: 'nearest' });\n  }\n\n  private selectProperty(property?: FetchedProperty | LinkedProperty) {\n    if (!property) {\n      return;\n    }\n    const propertyId = this.getPropertyId(property);\n    if (typeof propertyId !== 'number') {\n      return;\n    }\n    this.propertySelected.emit(propertyId);\n  }\n\n  private getPropertyId(property: FetchedProperty | LinkedProperty) {\n    return 'PROPERTY_ID' in property ? property.PROPERTY_ID : property.property_id;\n  }\n\n  private renderStatus(text: string) {\n    return <div class=\"property-switcher__status\">{text}</div>;\n  }\n\n  render() {\n    return (\n      <Host>\n        <ir-input\n          autofocus\n          ref={el => (this.inputRef = el)}\n          placeholder=\"Find property\"\n          class=\"property-switcher__search-input\"\n          value={this.searchTerm}\n          onText-change={this.handleSearchChange}\n          onKeyDown={this.handleKeyDown}\n          withClear\n        ></ir-input>\n        <div tabIndex={-1} class=\"property-switcher__results\">\n          {!this.searchTerm && this.properties?.length > 0 && (\n            <div>\n              <p style={{ padding: '1rem', margin: '0', paddingTop: '0' }}>\n                <small>Linked Properties</small>\n              </p>\n              {this.properties.map(property => {\n                const label = `${property.name}`;\n                return (\n                  <wa-option\n                    onClick={() => this.selectProperty(property as any)}\n                    selected={this.selectedPropertyId === property.property_id}\n                    value={property.property_id?.toString()}\n                    label={label}\n                  >\n                    {label}\n                  </wa-option>\n                );\n              })}\n              <wa-divider></wa-divider>\n            </div>\n          )}\n          {this.searchTerm && this.filteredProperties.length === 0 && this.renderStatus('No properties found')}\n          {this.filteredProperties.map((property, index) => {\n            const label = `${property.PROPERTY_NAME} ${property.COUNTRY_NAME}`;\n            return (\n              <wa-option\n                onClick={() => this.selectProperty(property)}\n                selected={this.selectedPropertyId === property.PROPERTY_ID}\n                current={this.highlightedIndex === index}\n                value={property.PROPERTY_ID?.toString()}\n                label={label}\n              >\n                {label}\n              </wa-option>\n            );\n          })}\n        </div>\n      </Host>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}