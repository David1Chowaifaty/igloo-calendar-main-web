import{h as n}from"./p-6c4ba7c0.js";import"./p-389c26bd.js";import"./p-bb593e1b.js";import{c as t}from"./p-80497476.js";const o={"000":"IN-HOUSE","001":"PENDING-CONFIRMATION","002":"CONFIRMED","003":"CHECKED-OUT"};function e(n,t){if(n===null&&t===null)return"";if(t!==null&&t!==""){return`${n!==null&&n!==void 0?n:""} , ${t!==null&&t!==void 0?t:""}`}return n}function r(n){var t;if(!n){return null}return((t=n.find((n=>n.key==="private_note")))===null||t===void 0?void 0:t.value)||null}function l(l){let s=[];const i=t=>{const e=n();const r=n(t.to_date,"YYYY-MM-DD");const s=n(t.from_date,"YYYY-MM-DD");if(s.isSame(e,"day")&&e.hour()>=12){return o["000"]}else if(e.isAfter(s,"day")&&e.isBefore(r,"day")){return o["000"]}else if(r.isSame(e,"day")&&e.hour()<12){return o["000"]}else if(r.isSame(e,"day")&&e.hour()>=12||r.isBefore(e,"day")){return o["003"]}else{return o[(l===null||l===void 0?void 0:l.status.code)||"001"]}};const c=l.rooms.filter((n=>!!n["assigned_units_pool"]));c.forEach((o=>{var c,u,a;const D=n(o.from_date,"YYYY-MM-DD").isAfter(t.fromDate)?o.from_date:t.fromDate;const E=n(o.to_date,"YYYY-MM-DD").isAfter(t.toDate)?o.to_date:t.toDate;console.log(E,D,o.from_date,o.to_date);s.push({ID:o["assigned_units_pool"],TO_DATE:E,FROM_DATE:D,PRIVATE_NOTE:r(l.extras),NO_OF_DAYS:o.days.length,ARRIVAL:l.arrival,IS_EDITABLE:true,BALANCE:(c=l.financial)===null||c===void 0?void 0:c.due_amount,STATUS:i(o),NAME:e(o.guest.first_name,o.guest.last_name),PHONE:(u=l.guest.mobile)!==null&&u!==void 0?u:"",ENTRY_DATE:"12-12-2023",PHONE_PREFIX:l.guest.country_phone_prefix,RATE:o.total,RATE_PLAN:o.rateplan.name,SPLIT_BOOKING:false,RATE_PLAN_ID:o.rateplan.id,IDENTIFIER:o.identifier,RATE_TYPE:o.roomtype.id,ADULTS_COUNT:o.occupancy.adult_nbr,CHILDREN_COUNT:o.occupancy.children_nbr,PR_ID:+o.unit.id,POOL:o["assigned_units_pool"],GUEST:l.guest,ROOMS:l.rooms,BOOKING_NUMBER:l.booking_nbr,cancelation:o.rateplan.cancelation,guarantee:o.rateplan.guarantee,TOTAL_PRICE:(a=l.financial)===null||a===void 0?void 0:a.gross_total,COUNTRY:l.guest.country_id,FROM_DATE_STR:l.format.from_date,TO_DATE_STR:l.format.to_date,adult_child_offering:o.rateplan.selected_variation.adult_child_offering,ARRIVAL_TIME:l.arrival.description,origin:l.origin,channel_booking_nbr:l.channel_booking_nbr,is_direct:l.is_direct,NOTES:l.is_direct?l.remark:null,SOURCE:{code:l.source.code,description:l.source.description,tag:l.source.tag},ota_notes:l.ota_notes,defaultDates:{from_date:o.from_date,to_date:o.to_date}})}));return s}function s(t,o){const e=n(t,"YYYY-MM-DD");const r=n(o,"YYYY-MM-DD");const l=r.diff(e,"days");return l||1}const i=t=>n(t).format("MMM DD, YYYY");const c=(n,t="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(n);const u=t=>n(t).format("DD/MM ddd");const a=(t,o)=>n(`${t}:${o}`,"HH:mm").format("hh:mm A");export{i as _,a,c as b,s as c,u as d,r as g,l as t};
//# sourceMappingURL=p-9384b2de.js.map