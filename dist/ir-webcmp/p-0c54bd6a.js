import{c as t}from"./p-c5894a47.js";import{c as n}from"./p-99cb260a.js";const e=[10,20,50,100];function i(){const t=g();return{tasksList:t,currentPage:1,mobileCurrentPage:1,pageSize:20,mobilePageSize:20,totalPages:0,totalItems:0}}const r={searchField:"",tasks:[],filteredTasks:[],selectedTasks:[],pagination:i(),filters:null,isLoading:false,isFiltersLoading:false,isExportLoading:false,archiveOpen:false,archiveData:[],archiveFilters:{from_date:null,to_date:null,filtered_by_hkm:[],filtered_by_unit:[]},archiveLoading:null,sorting:{field:"date",direction:"ASC"},modalOpen:false,sidebarOpen:false};const{state:a,onChange:s}=t(r);function o(t){a.searchField=t;a.pagination.currentPage=1;d()}function c(t){a.tasks=t;d()}function u(t){a.pagination={...a.pagination,...t}}function f(t){u({pageSize:t,currentPage:1});m()}function l(t){if(t>=1&&t<=a.pagination.totalPages){u({currentPage:t})}}function g(){if(!n.roomsInfo){return e}const t=n.roomsInfo.length;if(t<=10){return e}const i=[...Array(4)].map(((n,e)=>{const i=t*(e+1);return e===3?i<100?100:i:i}));return i}function d(){const t=a?.searchField?.toLowerCase()??"";if(!t){a.filteredTasks=[...a.tasks]}else{a.filteredTasks=a.tasks.filter((n=>n.unit?.name?.toLowerCase().includes(t)||n.status?.description?.toLowerCase().includes(t)||n.housekeeper?.toLowerCase().includes(t)))}m()}function m(){const t=a.filteredTasks.length;const n=Math.max(1,Math.ceil(t/a.pagination.pageSize));u({totalItems:t,totalPages:n,currentPage:Math.min(a.pagination.currentPage,n)})}function P(){const t=(a.pagination.currentPage-1)*a.pagination.pageSize;const n=t+a.pagination.pageSize;return a.filteredTasks.slice(t,n)}function b(){const{mobileCurrentPage:t,mobilePageSize:n}=a.pagination;const e=(t-1)*n;const i=e+n;return a.filteredTasks.slice(0,i)}function p(){const{mobileCurrentPage:t,mobilePageSize:n}=a.pagination;return!(n*(t-1)+n>=a.filteredTasks.length)}function h(t){if(!p()){return}u({mobileCurrentPage:t})}function C(t){a.selectedTasks=t}function S(){a.selectedTasks=[]}function k(t){const n=a.selectedTasks.findIndex((n=>n.id===t.id));if(n>-1){a.selectedTasks=a.selectedTasks.filter((n=>n.id!==t.id))}else{a.selectedTasks=[...a.selectedTasks,t]}}function _(t){a.selectedTasks=[...t]}function z(t){a.isLoading=t}function L(t,n){a.sorting={field:t,direction:n};a.tasks=v(a.tasks);d()}function v(t=a.filteredTasks){const{field:n,direction:e}=a.sorting;return[...t].sort(((t,i)=>{let r=t[n];let a=i[n];if(n==="status"){r=t.status?.description;a=i.status?.description}else if(n==="unit"){r=t.unit?.name;a=i.unit?.name}if(r<a)return e==="ASC"?-1:1;if(r>a)return e==="ASC"?1:-1;if(t.date<i.date)return-1;if(t.date>i.date)return 1;if(t.unit?.name<i.unit?.name)return-1;if(t.unit?.name>i.unit?.name)return 1;return 0}))}function A(){return a.tasks.filter((t=>{const n=new Date(t.date);const e=new Date;e.setHours(23,59,59,999);return n<=e}))}function j(){const t=A();return t.length>0&&a.selectedTasks.length===t.length}export{C as a,o as b,S as c,L as d,_ as e,P as f,A as g,a as h,j as i,b as j,l as k,f as l,p as m,h as n,z as s,k as t,c as u};
//# sourceMappingURL=p-0c54bd6a.js.map