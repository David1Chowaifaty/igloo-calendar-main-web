import{r as t,h as s,H as i}from"./p-c8e6073c.js";import{H as e,u as h}from"./p-1901a80b.js";import{R as a}from"./p-8ecf3008.js";import{a as r}from"./p-f5b71ff4.js";import"./p-f2b1cd85.js";import"./p-0f9965e9.js";import"./p-3ad0bf4e.js";const n=".sc-ir-housekeeping-h{display:block}";const o=n;const p=class{constructor(s){t(this,s);this.roomService=new a;this.houseKeepingService=new e;this.language="";this.ticket="";this.baseurl="";this.propertyid=undefined;this.isLoading=false}componentWillLoad(){if(this.baseurl){r.defaults.baseURL=this.baseurl}if(this.ticket!==""){this.roomService.setToken(this.ticket);this.houseKeepingService.setToken(this.ticket);h("default_properties",{token:this.ticket,property_id:this.propertyid,language:this.language});this.initializeApp()}}async handleResetData(t){t.stopImmediatePropagation();t.stopPropagation();await this.houseKeepingService.getExposedHKSetup(this.propertyid)}async ticketChanged(t,s){if(t!==s){this.roomService.setToken(this.ticket);this.houseKeepingService.setToken(this.ticket);h("default_properties",{token:this.ticket,property_id:this.propertyid,language:this.language});this.initializeApp()}}async initializeApp(){try{this.isLoading=true;await Promise.all([this.houseKeepingService.getExposedHKSetup(this.propertyid),this.roomService.fetchData(this.propertyid,this.language),this.roomService.fetchLanguage(this.language,["_HK_FRONT"])])}catch(t){console.error(t)}finally{this.isLoading=false}}render(){if(this.isLoading){return s("ir-loading-screen",null)}return s(i,null,s("ir-interceptor",null),s("ir-toast",null),s("section",{class:"p-1"},s("ir-unit-status",{class:"mb-1"}),s("ir-hk-team",{class:"mb-1"})))}static get watchers(){return{ticket:["ticketChanged"]}}};p.style=o;export{p as ir_housekeeping};
//# sourceMappingURL=p-70a276e0.entry.js.map