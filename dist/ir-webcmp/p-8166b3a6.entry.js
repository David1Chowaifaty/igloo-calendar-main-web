import{r as t,c as e,h as i}from"./p-7eeadfc8.js";import{v as s}from"./p-4ed69de7.js";const a=":root{--sidebar-width:40rem}#container{padding:1rem;height:100%}.card{height:100%}#ir-list-item{height:100%}.cardBody{display:flex;justify-content:center;align-items:center;height:100%}.emptyBody{text-align:center}.emptyBody img{height:auto;width:100px;transform:translate(7%, 0);margin:1rem}.loader-position{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.card-head{background:#f8f8f8;padding:0.3rem}.section-title{display:flex;align-items:center;justify-content:space-between;font-weight:bold}.item-info{border-bottom:1px solid #e7e7e7}.item-info .row .col-3:last-child{text-align:end}.list-group{list-style:none;border-bottom:1px solid #e7e7e7}.list-group li{padding:0.5rem;color:#444;transition:all 0.3s ease-out}.list-group li:hover{color:#7c83eb}.list-group li.active{border-bottom:2px solid #7c83eb;color:#7c83eb}.btn-position{position:absolute;bottom:0;left:0;width:100%;padding:0.5rem;background:#f8f8f8;border-top:1px solid #e7e7e7}.test-icon{margin-right:0.2rem !important}.text-dark:hover{color:#444 !important}";const n=a;const o=class{constructor(i){t(this,i);this.fetchApi=e(this,"fetchApi",7);this.requestApiDelete=e(this,"requestApiDelete",7);this.requestApiDestinationHierarchy=e(this,"requestApiDestinationHierarchy",7);this.tabs=["General Settings","Mapping","Channel Settings"];this.hostRoom=undefined;this.mapReference=undefined;this.allowed_properties=[];this.allowed_channels=[];this.allowed_MinStayTypes=[];this.dropdownData={name:"Action",icon:"",children:[{name:"Edit",icon:"ft-edit"},{name:"Delete",icon:"ft-trash"},{name:"Disable",icon:"ft-alert-triangle"}]};this.listData=null;this.loader=false;this.mode="create";this.activeTab="General Settings";this.selectedItem=null;this.item=null;this.anyChanges=false}connectionOffHandler(){this.item=null}sendToParentHandler(t){this.anyChanges=true;this.item=t.detail}sendMappingToParentHandler(t){const e=t.detail;const i=s();this.anyChanges=true;if(this.mode==="edit"&&this.selectedItem){this.listData=this.listData.map((t=>{if(t.id===this.selectedItem.id){return Object.assign(Object.assign({},this.item),{RoomsMapping:e,status:"Active",id:i})}return t}))}else{if(this.listData===null){this.listData=[Object.assign(Object.assign({},this.item),{RoomsMapping:e,status:"Active",id:i})]}else{this.listData=[...this.listData,Object.assign(Object.assign({},this.item),{RoomsMapping:e,status:"Active",id:i})]}}this.fetchApi.emit(this.listData);this.mode="create";this.activeTab="General Settings";const a=document.querySelector("ir-sidebar");if(a){a.open=!a.open}this._reset()}_reset(){this.item=null;this.mode="create";this.activeTab="General Settings";this.selectedItem=null;this.anyChanges=false}openSidebarHandler(){const t=document.querySelector("ir-sidebar");t.open=!t.open;this.loader=true;this.mode="create";this.activeTab="General Settings";setTimeout((()=>{this.loader=false}),2e3)}requestDelete(t){this.fetchApi.emit(t.detail)}changeStatusHandler(t){this.fetchApi.emit(t.detail)}componentDidLoad(){const t=document.querySelector("ir-topbar");t.addEventListener("openSidebar",(()=>{const t=document.querySelector("ir-sidebar");t.open=!t.open;this.loader=true;this.mode="create";this.activeTab="General Settings";setTimeout((()=>{this.loader=false}),2e3)}));const e=document.querySelector("ir-list-item");e.addEventListener("openSidebar",(t=>{if(t.detail.mode==="edit"){this.mode="edit";this.selectedItem=t.detail.item;const e=document.querySelector("ir-sidebar");e.open=!e.open}}));const i=document.querySelector("ir-modal.exit");i.addEventListener("confirmModal",(()=>{s.open=false;i.closeModal();this._reset()}));const s=document.querySelector("ir-sidebar");s.addEventListener("irSidebarToggle",(t=>{if(t.detail==true&&this.anyChanges){if(this.listData){i.openModal()}}else{s.open=false;this._reset()}}))}goNext(){const t=document.querySelector("ir-mapping");if(this.activeTab=="General Settings"){if(!this.item.title||!this.item.channel||!this.item.property){const t=document.querySelector("ir-modal.alertModal-manager");if(this.mode==="edit"){return}t.openModal()}else{this.requestApiDestinationHierarchy.emit(this.item.property);this.activeTab="Mapping";this.loader=true;setTimeout((()=>{this.loader=false}),2e3)}}else if(this.activeTab=="Mapping"){t._onSaveMapping()}}_onSwitchTab(t){if(this.activeTab=="General Settings"){if(!this.item.title||!this.item.channel||!this.item.property){const t=document.querySelector("ir-modal.alertModal-manager");if(this.mode=="edit"){return}t.openModal()}else{this.activeTab=t;this.loader=true;setTimeout((()=>{this.loader=false}),2e3)}}else if(this.activeTab=="Mapping"){this.activeTab=t;this.loader=true;setTimeout((()=>{this.loader=false}),2e3)}}render(){return[i("div",{key:"6805616032ee5a5f42d0091a6ec64d3f3c3370ba",id:"container"},i("div",{key:"eff67b996207717f13b2d0bdfd78dc392a6707d4",class:"card"},i("ir-topbar",{key:"0c855b007513114a3d09fd7b03407b1e2f6da8e1"}),i("ir-list-item",{key:"5d27b9cccd98e3c926578a64071e47d74125cb85",id:"ir-list-item",listData:this.listData,dropdownData:this.dropdownData}))),i("ir-sidebar",{key:"10260e04e48ec6fbb32ff167e0bdc3215a013637",side:"right",class:""},i("div",{key:"9688ac65c1483faf18631f022e2adc5bf9c582ca",class:"container pt-1"},i("h5",{key:"b72e0377da453fba32479fe9f87f544b17cfcf5d",class:"font-weight-bold"},this.mode==="create"?"Create":"Edit"," Channel")),i("ul",{key:"f0b04b7a9e6bb3b599bf929b5d47c1654f8c3357",class:"list-group list-group-horizontal mb-2"},this.tabs.map((t=>i("li",{class:this.activeTab===t?"active":""},i("a",{class:"","data-mdb-ripple-color":"dark",onClick:()=>{this._onSwitchTab(t)}},t))))),this.loader?i("div",{class:"loader-position"},i("ir-loader",null)):i("span",null,this.activeTab=="General Settings"&&i("ir-general-settings",{allowed_channels:this.allowed_channels,allowed_MinStayTypes:this.allowed_MinStayTypes,allowed_properties:this.allowed_properties,data:this.selectedItem,mode:this.mode,class:"mb-3"}),this.activeTab=="Mapping"&&i("ir-mapping",{hostRoom:this.hostRoom,class:"mb-3",mapReference:this.mapReference,map:this.mode==="edit"?this.selectedItem.RoomsMapping:null})),i("div",{key:"e56ccdbebac95097eb40f0bc27c3befec28a8803",class:"btn-position"},i("button",{key:"7d9090264b120240205210f84f6f8d09b72d1733",type:"button",class:"btn btn-primary btn-sm btn-block",onClick:()=>this.goNext()},this.activeTab=="General Settings"?"Next":"Save"))),i("ir-modal",{key:"b3a2122de581113e2b253d7dc960b521f2c71803",class:"exit",modalTitle:"Exit without saving?",modalBody:"All unsaved changes will be lost.",iconAvailable:true,icon:"ft-alert-circle warning h1"}),i("ir-modal",{key:"b7b16a8c6712d77276a8283898de592c7b285ff6",class:"alertModal-manager",modalTitle:"Please fill all the fields!",modalBody:"There are fields that are not filled yet.",icon:"ft-alert-circle warning h1",iconAvailable:true,leftBtnActive:false,btnPosition:"center",rightBtnText:"Close",rightBtnColor:"primary"})]}};o.style=n;export{o as ir_channel_manager};
//# sourceMappingURL=p-8166b3a6.entry.js.map