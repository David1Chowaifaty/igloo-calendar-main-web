{"version":3,"names":["iglBookingEventHoverCss","IglBookingEventHoverStyle0","IglBookingEventHover","constructor","hostRef","this","bubbleInfoTop","is_vacation_rental","shouldHideUnassignUnit","eventService","EventsService","hideButtons","componentWillLoad","selectedRt","bookingEvent","roomsInfo","find","r","id","RATE_TYPE","physicalrooms","length","moment","TO_DATE","isBefore","canCheckInOrCheckout","isSameOrAfter","Date","FROM_DATE","handleKeyDown","bind","componentDidLoad","document","addEventListener","disconnectedCallback","removeEventListener","handleBookingEventChange","newValue","oldValue","getBookingId","ID","hideBubble","hideBubbleInfo","emit","key","currentInfoBubbleId","event","getTotalOccupants","CHILDREN_COUNT","ADULTS_COUNT","locales","entries","Lcz_AdultsCaption","toLowerCase","_a","Lcz_Single_Adult","_b","Lcz_ChildCaption","_c","Lcz_Single_Child","getPhoneNumber","PHONE","getCountry","findCountry","COUNTRY","countries","name","getPhoneCode","PHONE_PREFIX","phone_prefix","renderPhone","is_direct","getInternalNote","INTERNAL_NOTE","getTotalPrice","TOTAL_PRICE","getArrivalTime","ARRIVAL_TIME","getRatePlan","RATE_PLAN","getEntryDate","ENTRY_DATE","isNewBooking","isCheckedIn","STATUS","isBlockedDateEvent","hasSplitBooking","hasOwnProperty","splitBookingEvents","canCheckIn","from_date","to_date","canCheckOut","calendar_data","checkin_enabled","is_automatic_check_in_out","now","ROOM_INFO","in_out","code","compareTime","toDate","createDateWithOffsetAndHour","checkin_checkout_hours","offset","_d","hour","handleBlockDateUpdate","stopImmediatePropagation","stopPropagation","opt","detail","Object","assign","data","handleEditBooking","TITLE","Lcz_EditBookingFor","handleBookingOption","getStringDateFormat","dt","getFullYear","getMonth","getDate","handleAddRoom","fromDate","setHours","from_date_str","to_date_str","eventData","NAME","BOOKING_NUMBER","ARRIVAL","ADD_ROOM_TO_BOOKING","event_type","ROOMS","GUEST","message","NOTES","SOURCE","booking","defaultDateRange","fromDateStr","toDateStr","dateDifference","editabled","handleCustomerCheckIn","adult_nbr","children_nbr","infant_nbr","occupancy","showDialog","reason","bookingNumber","roomIdentifier","IDENTIFIER","roomName","roomUnit","sidebarPayload","identifier","checkin","unit","sharing_persons","totalGuests","handleCustomerCheckOut","handleDeleteEvent","deleteButton","POOL","console","log","handleUpdateBlockedDates","isLoading","setTimeout","updateBlockedEvent","error","handleConvertBlockedDateToBooking","getRoomInfo","roomIdToFind","PR_ID","selectedRoom","room","physicalRoom","CATEGORY","ROOM_NAME","ROOMS_INFO","renderTitle","eventType","roomInfo","Lcz_AddingUnitToBooking","Lcz_Adding","Lcz_NewBookingFor","roomData","includes","STATUS_CODE","RELEASE_AFTER_HOURS","OPTIONAL_REASON","ENTRY_MINUTE","ENTRY_HOUR","block_exposed_unit_props","pr_id","STAY_STATUS_CODE","DESCRIPTION","BLOCKED_TILL_DATE","BLOCKED_TILL_HOUR","BLOCKED_TILL_MINUTE","showBookingPopup","getInfoElement","h","class","BALANCE","src","origin","Icon","alt","Label","channel_booking_nbr","formatAmount","currency","symbol","Lcz_Balance","defaultDates","showDateDifference","containerStyle","padding","margin","labelText","Lcz_ArrivalTime","content","Lcz_Occupancy","Lcz_Phone","Lcz_RatePlan","PRIVATE_NOTE","Lcz_BookingPrivateNote","display","Lcz_GuestRemark","label","Lcz_ChannelNotes","remarks","ota_notes","maxVisibleItems","_e","Lcz_InternalRemark","style","gap","role","onClickHandler","btn_block","text","Lcz_Edit","icon_name","btn_styles","size","IS_EDITABLE","Lcz_AddRoom","Lcz_CheckIn","Lcz_CheckOut","Lcz_Unassign","_","getNewBookingOptions","shouldDisplayButtons","rateplans","some","rate","is_active","Fragment","Lcz_CreateNewBooking","Lcz_AssignUnitToExistingBooking","Lcz_NoRatePlanDefined","Lcz_Blockdates","getBlockedView","isEventHover","entryHour","entryMinute","defaultData","entryDate","onDataUpdateEvent","btn_disabled","Lcz_Update","Lcz_ConvertToBooking","btn_color","Lcz_Delete","render","Host"],"sources":["src/components/igloo-calendar/igl-booking-event-hover/igl-booking-event-hover.css?tag=igl-booking-event-hover&encapsulation=scoped","src/components/igloo-calendar/igl-booking-event-hover/igl-booking-event-hover.tsx"],"sourcesContent":[":host {\r\n  display: block;\r\n  position: relative;\r\n  z-index: 100;\r\n}\r\n\r\n.btn {\r\n  padding-left: 4px !important;\r\n  padding-right: 4px !important;\r\n}\r\n.balance_amount {\r\n  color: #ff4961;\r\n  font-size: 0.75rem;\r\n}\r\n.user-notes {\r\n  margin-left: 4px;\r\n  display: -webkit-box;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-line-clamp: 5;\r\n  line-clamp: 5;\r\n  overflow: hidden;\r\n  max-width: 100%;\r\n  height: auto;\r\n}\r\n.events_btns {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n}\r\n.mx-01 {\r\n  --m: 5px;\r\n  margin-left: var(--m) !important;\r\n  margin-right: var(--m) !important;\r\n}\r\n\r\n.pointerContainerTop {\r\n  top: -26px;\r\n}\r\n\r\n.pointerContainer {\r\n  position: absolute;\r\n  height: 10px;\r\n  width: 350px;\r\n  left: var(--el-left, 50%);\r\n  transform: translateX(-50%);\r\n}\r\n\r\n.iglPopOver {\r\n  /* max-width: 350px; */\r\n  position: absolute;\r\n  background-color: #fff;\r\n  padding: 10px;\r\n  border: 1px solid #656ee7;\r\n  border-radius: 6px;\r\n  left: var(--el-left, 50%);\r\n  transform: translateX(-50%) translateY(10px);\r\n  box-shadow: 1px 0px 20px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.iglPopOver.infoBubble {\r\n  min-width: 350px;\r\n}\r\n\r\n.iglPopOver.blockedView {\r\n  max-width: 400px;\r\n  width: 400px;\r\n}\r\n\r\n.iglPopOver.newBookingOptions {\r\n  overflow-wrap: break-word !important;\r\n  min-width: 230px;\r\n  width: fit-content;\r\n}\r\n\r\n.bubblePointer {\r\n  position: absolute;\r\n  width: 0;\r\n  height: 0;\r\n  left: 50%;\r\n  border-left: 10px solid transparent;\r\n  border-right: 10px solid transparent;\r\n  transform: translate(-50%, 0px);\r\n}\r\n\r\n.bubblePointTop {\r\n  border-top: 10px solid #656ee7;\r\n}\r\n\r\n.bubblePointBottom {\r\n  border-bottom: 10px solid #656ee7;\r\n}\r\n\r\n.bubbleInfoAbove {\r\n  bottom: 35px;\r\n}\r\n\r\n.updateBtnIcon {\r\n  margin-right: 4px;\r\n}\r\n.icon-image {\r\n  height: 1.5rem;\r\n  width: 1.5rem;\r\n  margin-right: 5px;\r\n}\r\n","import { Component, Host, h, Prop, Event, EventEmitter, State, Element, Fragment, Watch } from '@stencil/core';\r\nimport { canCheckIn, findCountry, formatAmount } from '@/utils/utils';\r\nimport { ICountry } from '@/models/IBooking';\r\nimport { EventsService } from '@/services/events.service';\r\nimport moment from 'moment';\r\nimport locales from '@/stores/locales.store';\r\nimport calendar_data from '@/stores/calendar-data';\r\nimport { CalendarModalEvent } from '@/models/property-types';\r\nimport { compareTime, createDateWithOffsetAndHour } from '@/utils/booking';\r\n//import { transformNewBLockedRooms } from '../../../utils/booking';\r\n\r\n@Component({\r\n  tag: 'igl-booking-event-hover',\r\n  styleUrl: 'igl-booking-event-hover.css',\r\n  scoped: true,\r\n})\r\nexport class IglBookingEventHover {\r\n  @Element() element: HTMLIglBookingEventHoverElement;\r\n\r\n  @Prop({ mutable: true }) bookingEvent: { [key: string]: any };\r\n  @Prop() bubbleInfoTop: boolean = false;\r\n  @Prop() currency;\r\n  @Prop() countries: ICountry[];\r\n  @Prop() is_vacation_rental: boolean = false;\r\n\r\n  @State() isLoading: string;\r\n  @State() shouldHideUnassignUnit = false;\r\n  @State() canCheckInOrCheckout: boolean;\r\n\r\n  @Event() showBookingPopup: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) hideBubbleInfo: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) deleteButton: EventEmitter<string>;\r\n  @Event() bookingCreated: EventEmitter<{ pool?: string; data: any[] }>;\r\n  @Event() showDialog: EventEmitter<CalendarModalEvent>;\r\n\r\n  private eventService = new EventsService();\r\n  private hideButtons = false;\r\n\r\n  componentWillLoad() {\r\n    let selectedRt = this.bookingEvent.roomsInfo.find(r => r.id === this.bookingEvent.RATE_TYPE);\r\n    if (selectedRt) {\r\n      this.shouldHideUnassignUnit = selectedRt.physicalrooms.length === 1;\r\n    }\r\n    if (moment(this.bookingEvent.TO_DATE, 'YYYY-MM-DD').isBefore(moment())) {\r\n      this.hideButtons = true;\r\n    }\r\n\r\n    this.canCheckInOrCheckout = moment().isSameOrAfter(new Date(this.bookingEvent.FROM_DATE), 'days') && moment().isBefore(new Date(this.bookingEvent.TO_DATE), 'days');\r\n\r\n    this.handleKeyDown = this.handleKeyDown.bind(this);\r\n  }\r\n\r\n  componentDidLoad() {\r\n    document.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    document.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n  @Watch('bookingEvent')\r\n  handleBookingEventChange(newValue, oldValue) {\r\n    if (newValue !== oldValue)\r\n      this.canCheckInOrCheckout =\r\n        moment(new Date()).isSameOrAfter(new Date(this.bookingEvent.FROM_DATE), 'days') && moment(new Date()).isBefore(new Date(this.bookingEvent.TO_DATE), 'days');\r\n  }\r\n  private getBookingId() {\r\n    return this.bookingEvent.ID;\r\n  }\r\n  private hideBubble() {\r\n    this.hideBubbleInfo.emit({\r\n      key: 'hidebubble',\r\n      currentInfoBubbleId: this.getBookingId(),\r\n    });\r\n    document.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  private handleKeyDown(event: KeyboardEvent) {\r\n    if (event.key === 'Escape') {\r\n      this.hideBubble();\r\n    } else return;\r\n  }\r\n\r\n  private getTotalOccupants() {\r\n    const { CHILDREN_COUNT, ADULTS_COUNT } = this.bookingEvent;\r\n    if (CHILDREN_COUNT === 0) {\r\n      return `${ADULTS_COUNT} ${ADULTS_COUNT > 1 ? locales.entries.Lcz_AdultsCaption.toLowerCase() : locales.entries.Lcz_Single_Adult?.toLowerCase()}`;\r\n    }\r\n    return `${ADULTS_COUNT} ${ADULTS_COUNT > 1 ? locales.entries.Lcz_AdultsCaption.toLowerCase() : locales.entries.Lcz_Single_Adult?.toLowerCase()}, ${CHILDREN_COUNT} ${\r\n      CHILDREN_COUNT > 1 ? locales.entries.Lcz_ChildCaption.toLowerCase() : locales.entries.Lcz_Single_Child?.toLowerCase()\r\n    }`;\r\n  }\r\n\r\n  private getPhoneNumber() {\r\n    return this.bookingEvent.PHONE;\r\n  }\r\n\r\n  private getCountry() {\r\n    return findCountry(this.bookingEvent.COUNTRY, this.countries).name;\r\n  }\r\n  private getPhoneCode() {\r\n    if (this.bookingEvent.PHONE_PREFIX) {\r\n      return this.bookingEvent.PHONE_PREFIX;\r\n    }\r\n    return findCountry(this.bookingEvent.COUNTRY, this.countries).phone_prefix;\r\n  }\r\n  private renderPhone() {\r\n    return this.bookingEvent.COUNTRY ? `${this.bookingEvent.is_direct ? this.getPhoneCode() + '-' : ''}${this.getPhoneNumber()} - ${this.getCountry()}` : this.getPhoneNumber();\r\n  }\r\n\r\n  // private getGuestNote() {\r\n  //   return this.bookingEvent.NOTES && <p class={'user-notes p-0 my-0'}>{this.bookingEvent.NOTES}</p>;\r\n  // }\r\n\r\n  private getInternalNote() {\r\n    return this.bookingEvent.INTERNAL_NOTE;\r\n  }\r\n\r\n  private getTotalPrice() {\r\n    return this.bookingEvent.TOTAL_PRICE;\r\n  }\r\n\r\n  private getArrivalTime() {\r\n    return this.bookingEvent.ARRIVAL_TIME;\r\n  }\r\n\r\n  private getRatePlan() {\r\n    return this.bookingEvent.RATE_PLAN;\r\n  }\r\n\r\n  private getEntryDate() {\r\n    return this.bookingEvent.ENTRY_DATE;\r\n  }\r\n\r\n  private isNewBooking() {\r\n    return this.getBookingId() === 'NEW_TEMP_EVENT';\r\n  }\r\n\r\n  private isCheckedIn() {\r\n    return this.bookingEvent.STATUS === 'IN-HOUSE';\r\n  }\r\n\r\n  private isBlockedDateEvent() {\r\n    return this.bookingEvent.STATUS === 'BLOCKED' || this.bookingEvent.STATUS === 'BLOCKED-WITH-DATES';\r\n  }\r\n\r\n  private hasSplitBooking() {\r\n    return this.bookingEvent.hasOwnProperty('splitBookingEvents') && this.bookingEvent.splitBookingEvents;\r\n  }\r\n\r\n  private canCheckIn() {\r\n    // if (!calendar_data.checkin_enabled || calendar_data.is_automatic_check_in_out) {\r\n    //   return false;\r\n    // }\r\n    // if (this.isCheckedIn()) {\r\n    //   return false;\r\n    // }\r\n    // const now = moment();\r\n    // if (\r\n    //   this.canCheckInOrCheckout ||\r\n    //   (moment().isSame(new Date(this.bookingEvent.TO_DATE), 'days') &&\r\n    //     !compareTime(now.toDate(), createDateWithOffsetAndHour(calendar_data.checkin_checkout_hours?.offset, calendar_data.checkin_checkout_hours?.hour)))\r\n    // ) {\r\n    //   return true;\r\n    // }\r\n    // return false;\r\n    return canCheckIn({\r\n      from_date: this.bookingEvent.FROM_DATE,\r\n      to_date: this.bookingEvent.TO_DATE,\r\n      isCheckedIn: this.isCheckedIn(),\r\n    });\r\n  }\r\n\r\n  private canCheckOut() {\r\n    if (!calendar_data.checkin_enabled || calendar_data.is_automatic_check_in_out) {\r\n      return false;\r\n    }\r\n    if (this.isCheckedIn()) {\r\n      return true;\r\n    }\r\n    const now = moment();\r\n    if (\r\n      this.bookingEvent.ROOM_INFO?.in_out?.code === '000' &&\r\n      moment().isSameOrAfter(new Date(this.bookingEvent.TO_DATE), 'days') &&\r\n      compareTime(now.toDate(), createDateWithOffsetAndHour(calendar_data.checkin_checkout_hours?.offset, calendar_data.checkin_checkout_hours?.hour))\r\n    ) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private handleBlockDateUpdate(event: CustomEvent<{ [key: string]: any }>) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    const opt: { [key: string]: any } = event.detail;\r\n    this.bookingEvent = { ...this.bookingEvent, ...opt.data };\r\n    //console.log(\"blocked date booking event\", this.bookingEvent);\r\n  }\r\n\r\n  private handleEditBooking() {\r\n    // console.log(\"Edit booking\");\r\n    this.bookingEvent.TITLE = locales.entries.Lcz_EditBookingFor;\r\n    this.handleBookingOption('EDIT_BOOKING');\r\n  }\r\n\r\n  private getStringDateFormat(dt) {\r\n    return dt.getFullYear() + '-' + (dt.getMonth() < 9 ? '0' : '') + (dt.getMonth() + 1) + '-' + (dt.getDate() <= 9 ? '0' : '') + dt.getDate();\r\n  }\r\n\r\n  private handleAddRoom() {\r\n    let fromDate = new Date(this.bookingEvent.FROM_DATE);\r\n    fromDate.setHours(0, 0, 0, 0);\r\n    let from_date_str = this.getStringDateFormat(fromDate);\r\n\r\n    let toDate = new Date(this.bookingEvent.TO_DATE);\r\n    //toDate.setDate(toDate.getDate() + 1);\r\n    toDate.setHours(0, 0, 0, 0);\r\n    let to_date_str = this.getStringDateFormat(toDate);\r\n    // console.log(this.bookingEvent);\r\n    let eventData = {\r\n      ID: '',\r\n      NAME: '',\r\n      BOOKING_NUMBER: this.bookingEvent.BOOKING_NUMBER,\r\n      FROM_DATE: from_date_str, // \"2023-07-09\",\r\n      TO_DATE: to_date_str, // \"2023-07-11\",\r\n      roomsInfo: this.bookingEvent.roomsInfo,\r\n      ARRIVAL: this.bookingEvent.ARRIVAL,\r\n      ADD_ROOM_TO_BOOKING: this.bookingEvent.ID,\r\n      TITLE: 'Add Room to #' + this.bookingEvent.BOOKING_NUMBER,\r\n      event_type: 'ADD_ROOM',\r\n      ROOMS: this.bookingEvent.ROOMS,\r\n      GUEST: this.bookingEvent.GUEST,\r\n      message: this.bookingEvent.NOTES,\r\n      SOURCE: this.bookingEvent.SOURCE,\r\n      booking: this.bookingEvent?.booking,\r\n      defaultDateRange: {\r\n        fromDate: fromDate,\r\n        fromDateStr: '',\r\n        toDate: toDate,\r\n        toDateStr: '',\r\n        dateDifference: 0,\r\n        editabled: true,\r\n        message: 'Including 5.00% City Tax - Excluding 11.00% VAT',\r\n      },\r\n    };\r\n\r\n    this.handleBookingOption('ADD_ROOM', eventData);\r\n  }\r\n\r\n  private handleCustomerCheckIn() {\r\n    const { adult_nbr, children_nbr, infant_nbr } = this.bookingEvent.ROOM_INFO.occupancy;\r\n    this.showDialog.emit({\r\n      reason: 'checkin',\r\n      bookingNumber: this.bookingEvent.BOOKING_NUMBER,\r\n      roomIdentifier: this.bookingEvent.IDENTIFIER,\r\n      roomName: '',\r\n      roomUnit: '',\r\n      sidebarPayload: {\r\n        identifier: this.bookingEvent.IDENTIFIER,\r\n        bookingNumber: this.bookingEvent.BOOKING_NUMBER,\r\n        checkin: false,\r\n        roomName: this.bookingEvent.ROOM_INFO.unit?.name ?? '',\r\n        sharing_persons: this.bookingEvent.ROOM_INFO.sharing_persons,\r\n        totalGuests: adult_nbr + children_nbr + infant_nbr,\r\n      },\r\n    });\r\n  }\r\n\r\n  private handleCustomerCheckOut() {\r\n    this.showDialog.emit({ reason: 'checkout', bookingNumber: this.bookingEvent.BOOKING_NUMBER, roomIdentifier: this.bookingEvent.IDENTIFIER, roomName: '', roomUnit: '' });\r\n  }\r\n\r\n  private handleDeleteEvent() {\r\n    this.hideBubble();\r\n    this.deleteButton.emit(this.bookingEvent.POOL);\r\n    console.log('Delete Event');\r\n  }\r\n\r\n  private async handleUpdateBlockedDates() {\r\n    try {\r\n      this.isLoading = 'update';\r\n      setTimeout(() => {\r\n        this.hideBubble();\r\n      }, 50);\r\n      await this.eventService.updateBlockedEvent(this.bookingEvent);\r\n      this.isLoading = '';\r\n    } catch (error) {\r\n      //   toastr.error(error);\r\n    }\r\n  }\r\n\r\n  private handleConvertBlockedDateToBooking() {\r\n    this.handleBookingOption('BAR_BOOKING');\r\n  }\r\n\r\n  private getRoomInfo() {\r\n    const roomIdToFind = +this.bookingEvent.PR_ID;\r\n    let selectedRoom: any = {};\r\n\r\n    for (const room of this.bookingEvent.roomsInfo) {\r\n      for (const physicalRoom of room.physicalrooms) {\r\n        if (roomIdToFind === physicalRoom.id) {\r\n          selectedRoom.CATEGORY = room.name;\r\n          selectedRoom.ROOM_NAME = physicalRoom.name;\r\n          selectedRoom.ROOMS_INFO = room;\r\n          return selectedRoom;\r\n        }\r\n      }\r\n    }\r\n\r\n    return selectedRoom;\r\n  }\r\n  private renderTitle(eventType, roomInfo) {\r\n    switch (eventType) {\r\n      case 'EDIT_BOOKING':\r\n        return `${locales.entries.Lcz_EditBookingFor} ${roomInfo.CATEGORY} ${roomInfo.ROOM_NAME}`;\r\n      case 'ADD_ROOM':\r\n        return `${locales.entries.Lcz_AddingUnitToBooking}# ${this.bookingEvent.BOOKING_NUMBER}`;\r\n      case 'SPLIT_BOOKING':\r\n        return locales.entries.Lcz_Adding + ` ${roomInfo.CATEGORY} ${roomInfo.ROOM_NAME}`;\r\n      default:\r\n        return `${locales.entries.Lcz_NewBookingFor} ${roomInfo.CATEGORY} ${roomInfo.ROOM_NAME}`;\r\n    }\r\n  }\r\n  private handleBookingOption(eventType, roomData = null) {\r\n    const roomInfo = this.getRoomInfo();\r\n    let data = roomData ? roomData : this.bookingEvent;\r\n    data.event_type = eventType;\r\n    data.TITLE = this.renderTitle(eventType, roomInfo);\r\n\r\n    if (['003', '002', '004'].includes(this.bookingEvent.STATUS_CODE)) {\r\n      data.roomsInfo = [roomInfo.ROOMS_INFO];\r\n    }\r\n    if (eventType === 'BAR_BOOKING' && this.bookingEvent.STATUS !== 'TEMP-EVENT') {\r\n      const { FROM_DATE, TO_DATE, PR_ID, RELEASE_AFTER_HOURS, ENTRY_DATE, OPTIONAL_REASON, ENTRY_MINUTE, ENTRY_HOUR, STATUS_CODE } = this.bookingEvent;\r\n      data.block_exposed_unit_props = {\r\n        from_date: FROM_DATE,\r\n        to_date: TO_DATE,\r\n        NOTES: OPTIONAL_REASON,\r\n        pr_id: PR_ID,\r\n        STAY_STATUS_CODE: STATUS_CODE,\r\n        DESCRIPTION: RELEASE_AFTER_HOURS,\r\n        BLOCKED_TILL_DATE: ENTRY_DATE,\r\n        BLOCKED_TILL_HOUR: ENTRY_HOUR,\r\n        BLOCKED_TILL_MINUTE: ENTRY_MINUTE,\r\n      };\r\n      this.handleDeleteEvent();\r\n    }\r\n    this.showBookingPopup.emit({\r\n      key: 'add',\r\n      data: {\r\n        ...data,\r\n        //roomsInfo: [roomInfo.ROOMS_INFO],\r\n      },\r\n    });\r\n    this.hideBubbleInfo.emit({\r\n      key: 'hidebubble',\r\n      currentInfoBubbleId: this.getBookingId(),\r\n    });\r\n  }\r\n  // private renderNote() {\r\n  //   const { is_direct, ota_notes } = this.bookingEvent;\r\n  //   const guestNote = this.getGuestNote();\r\n  //   const noteLabel = locales.entries.Lcz_Note + ':';\r\n\r\n  //   if (!is_direct && ota_notes) {\r\n  //     return (\r\n  //       <div class=\"row p-0 m-0\">\r\n  //         <div class=\"col-12 px-0 text-wrap d-flex\">\r\n  //           <ota-label label={noteLabel} remarks={ota_notes}></ota-label>\r\n  //         </div>\r\n  //       </div>\r\n  //     );\r\n  //   } else if (is_direct && guestNote) {\r\n  //     return (\r\n  //       <div class=\"row p-0 m-0\">\r\n  //         <div class=\"col-12 px-0 text-wrap d-flex\">\r\n  //           <Fragment>\r\n  //             <span class=\"font-weight-bold\">{noteLabel} </span>\r\n  //             {guestNote}\r\n  //           </Fragment>\r\n  //         </div>\r\n  //       </div>\r\n  //     );\r\n  //   }\r\n  //   return null;\r\n  // }\r\n\r\n  private getInfoElement() {\r\n    return (\r\n      <div class={`iglPopOver infoBubble ${this.bubbleInfoTop ? 'bubbleInfoAbove' : ''} text-left`}>\r\n        <div class={`row p-0 m-0  ${this.bookingEvent.BALANCE > 1 ? 'pb-0' : 'pb-1'}`}>\r\n          <div class=\"px-0  col-8 font-weight-bold font-medium-1 d-flex align-items-center\">\r\n            <img src={this.bookingEvent?.origin?.Icon} alt={this.bookingEvent?.origin?.Label} class={'icon-image'} />\r\n            <p class={'p-0 m-0'}>{!this.bookingEvent.is_direct ? this.bookingEvent.channel_booking_nbr : this.bookingEvent.BOOKING_NUMBER}</p>\r\n          </div>\r\n          <div class=\"pr-0 col-4 text-right\">{formatAmount(this.currency.symbol, this.getTotalPrice())}</div>\r\n        </div>\r\n        {this.bookingEvent.BALANCE > 1 && (\r\n          <p class=\"pr-0 m-0 p-0 text-right balance_amount\">\r\n            {locales.entries.Lcz_Balance}: {formatAmount(this.currency.symbol, this.bookingEvent.BALANCE)}\r\n          </p>\r\n        )}\r\n        <div class=\"row p-0 m-0\">\r\n          <div class=\"px-0 pr-0 col-12\">\r\n            <ir-date-view from_date={this.bookingEvent.defaultDates.from_date} to_date={this.bookingEvent.defaultDates.to_date} showDateDifference={false}></ir-date-view>\r\n            {/* <span class=\"font-weight-bold\">{locales.entries.Lcz_In}: </span> */}\r\n          </div>\r\n        </div>\r\n        {this.getArrivalTime() && (\r\n          // <div class=\"row p-0 m-0\">\r\n          //   <div class=\"px-0 col-12\">\r\n          //     <span class=\"font-weight-bold\">{locales.entries.Lcz_ArrivalTime}: </span>\r\n          //     {this.getArrivalTime()}\r\n          //   </div>\r\n          // </div>\r\n          <ir-label containerStyle={{ padding: '0', margin: '0' }} class=\"m-0 p-0\" labelText={`${locales.entries.Lcz_ArrivalTime}:`} content={this.getArrivalTime()}></ir-label>\r\n        )}\r\n        {this.getTotalOccupants() && (\r\n          // <div class=\"row p-0 m-0\">\r\n          //   <div class=\"px-0  col-12\">\r\n          //     <span class=\"font-weight-bold\">{locales.entries.Lcz_Occupancy}: </span>\r\n          //     {this.getTotalOccupants()}\r\n          //   </div>\r\n          // </div>\r\n\r\n          <ir-label class=\"m-0 p-0\" containerStyle={{ padding: '0', margin: '0' }} labelText={`${locales.entries.Lcz_Occupancy}:`} content={this.getTotalOccupants()}></ir-label>\r\n        )}\r\n        {this.getPhoneNumber() && (\r\n          // <div class=\"row p-0 m-0\">\r\n          //   <div class=\"px-0  col-12 text-wrap\">\r\n          //     <span class=\"font-weight-bold\">{locales.entries.Lcz_Phone}: </span>\r\n          //     {this.renderPhone()}\r\n          //   </div>\r\n          // </div>\r\n          <ir-label containerStyle={{ padding: '0', margin: '0' }} class=\"m-0 p-0\" labelText={`${locales.entries.Lcz_Phone}:`} content={this.renderPhone()}></ir-label>\r\n        )}\r\n        {this.getRatePlan() && (\r\n          // <div class=\"row p-0 m-0\">\r\n          //   <div class=\"px-0  col-12\">\r\n          //     <span class=\"font-weight-bold\">{locales.entries.Lcz_RatePlan}: </span>\r\n          //     {this.getRatePlan()}\r\n          //   </div>\r\n          // </div>\r\n          <ir-label containerStyle={{ padding: '0', margin: '0' }} class=\"m-0 p-0\" labelText={`${locales.entries.Lcz_RatePlan}:`} content={this.getRatePlan()}></ir-label>\r\n        )}\r\n        {this.bookingEvent.PRIVATE_NOTE && (\r\n          // <div class=\"row p-0 m-0\">\r\n          //   <div class=\"px-0  col-12 text-wrap\">\r\n          //     <span class=\"font-weight-bold\">{locales.entries.Lcz_PrivateNote}: </span>\r\n          //     {this.bookingEvent.PRIVATE_NOTE}\r\n          //   </div>\r\n          // </div>\r\n          <ir-label\r\n            containerStyle={{ padding: '0', margin: '0' }}\r\n            class=\"m-0 p-0\"\r\n            labelText={`${locales.entries.Lcz_BookingPrivateNote}:`}\r\n            display=\"inline\"\r\n            content={this.bookingEvent.PRIVATE_NOTE}\r\n          ></ir-label>\r\n        )}\r\n\r\n        {/* {this.renderNote()} */}\r\n        {this.bookingEvent.is_direct ? (\r\n          <ir-label containerStyle={{ padding: '0', margin: '0' }} labelText={`${locales.entries.Lcz_GuestRemark}:`} display=\"inline\" content={this.bookingEvent.NOTES}></ir-label>\r\n        ) : (\r\n          <ota-label\r\n            class={'m-0 p-0'}\r\n            label={`${locales.entries.Lcz_ChannelNotes || 'Channel notes'}:`}\r\n            remarks={this.bookingEvent.ota_notes}\r\n            maxVisibleItems={this.bookingEvent.ota_notes?.length}\r\n          ></ota-label>\r\n        )}\r\n        {/* {this.getInternalNote() ? (\r\n          <div class=\"row p-0 m-0\">\r\n            <div class=\"col-12 px-0 text-wrap\">\r\n              {this.bookingEvent.is_direct ? (\r\n                <Fragment>\r\n                  <span class=\"font-weight-bold\">{locales.entries.Lcz_InternalRemark}: </span>\r\n                  {this.getInternalNote()}\r\n                </Fragment>\r\n              ) : (\r\n                <ota-label label={`${locales.entries.Lcz_InternalRemark}:`} remarks={this.bookingEvent.ota_notes}></ota-label>\r\n              )}\r\n            </div>\r\n          </div>\r\n        ) : null} */}\r\n        {this.getInternalNote() && <ir-label labelText={`${locales.entries.Lcz_InternalRemark}:`} content={this.getInternalNote()}></ir-label>}\r\n        <div class=\"row p-0 m-0 mt-2\">\r\n          <div class=\"full-width d-flex align-items-center\" style={{ gap: '0.25rem' }} role=\"group\">\r\n            <ir-button\r\n              style={{ '--icon-size': '0.875rem' }}\r\n              onClickHandler={() => this.handleEditBooking()}\r\n              class={'w-100'}\r\n              btn_block\r\n              text={locales.entries.Lcz_Edit}\r\n              icon_name=\"edit\"\r\n              btn_styles=\"h-100\"\r\n              size=\"sm\"\r\n            ></ir-button>\r\n            {this.bookingEvent.is_direct && this.bookingEvent.IS_EDITABLE && !this.hideButtons && (\r\n              <ir-button\r\n                style={{ '--icon-size': '0.875rem' }}\r\n                text={locales.entries.Lcz_AddRoom}\r\n                icon_name=\"square_plus\"\r\n                size=\"sm\"\r\n                class={'w-100'}\r\n                btn_styles=\"h-100\"\r\n                onClickHandler={() => this.handleAddRoom()}\r\n              ></ir-button>\r\n            )}\r\n            {this.canCheckIn() && (\r\n              <ir-button\r\n                class={'w-100'}\r\n                style={{ '--icon-size': '0.875rem' }}\r\n                text={locales.entries.Lcz_CheckIn}\r\n                onClickHandler={() => this.handleCustomerCheckIn()}\r\n                icon_name=\"edit\"\r\n                btn_styles=\"h-100\"\r\n                size=\"sm\"\r\n              ></ir-button>\r\n            )}\r\n            {this.canCheckOut() && (\r\n              <ir-button\r\n                class={'w-100'}\r\n                btn_styles=\"h-100\"\r\n                style={{ '--icon-size': '0.875rem' }}\r\n                text={locales.entries.Lcz_CheckOut}\r\n                icon_name=\"edit\"\r\n                onClickHandler={() => this.handleCustomerCheckOut()}\r\n                size=\"sm\"\r\n              ></ir-button>\r\n            )}\r\n            {this.hideButtons\r\n              ? null\r\n              : !this.shouldHideUnassignUnit && (\r\n                  <ir-button\r\n                    class={'w-100'}\r\n                    btn_styles=\"h-100\"\r\n                    style={{ '--icon-size': '0.875rem' }}\r\n                    size=\"sm\"\r\n                    text={locales.entries.Lcz_Unassign}\r\n                    icon_name=\"xmark\"\r\n                    onClickHandler={_ => {\r\n                      this.handleDeleteEvent();\r\n                    }}\r\n                  ></ir-button>\r\n                )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private getNewBookingOptions() {\r\n    const shouldDisplayButtons = this.bookingEvent.roomsInfo[0].rateplans.some(rate => rate.is_active);\r\n    return (\r\n      <div class={`iglPopOver d-flex flex-column newBookingOptions ${this.bubbleInfoTop ? 'bubbleInfoAbove' : ''} text-left`} style={{ gap: '0.5rem' }}>\r\n        {shouldDisplayButtons ? (\r\n          <Fragment>\r\n            {/* <div class={'mb-1'}> */}\r\n            <ir-button\r\n              size=\"sm\"\r\n              btn_block\r\n              data-testid=\"bar_booking_btn\"\r\n              text={locales.entries.Lcz_CreateNewBooking}\r\n              onClickHandler={_ => {\r\n                this.handleBookingOption('BAR_BOOKING');\r\n              }}\r\n            ></ir-button>\r\n            {/* </div> */}\r\n            {/* <div> */}\r\n            {this.hasSplitBooking() && (\r\n              // <div class=\"mb-1\">\r\n              <ir-button\r\n                size=\"sm\"\r\n                btn_block\r\n                text={locales.entries.Lcz_AssignUnitToExistingBooking}\r\n                onClickHandler={_ => {\r\n                  this.handleBookingOption('SPLIT_BOOKING');\r\n                }}\r\n              ></ir-button>\r\n              // </div>\r\n            )}\r\n            {/* </div> */}\r\n          </Fragment>\r\n        ) : (\r\n          <p class={'text-danger'}>{locales.entries.Lcz_NoRatePlanDefined}</p>\r\n        )}\r\n        {/* <div> */}\r\n        <ir-button\r\n          size=\"sm\"\r\n          text={locales.entries.Lcz_Blockdates}\r\n          btn_block\r\n          onClickHandler={_ => {\r\n            this.handleBookingOption('BLOCK_DATES');\r\n          }}\r\n        ></ir-button>\r\n        {/* </div> */}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private getBlockedView() {\r\n    console.log('booking event', this.bookingEvent);\r\n    // let defaultData = {RELEASE_AFTER_HOURS: 0, OPTIONAL_REASON: \"\", OUT_OF_SERVICE: false};\r\n    return (\r\n      <div class={`iglPopOver blockedView ${this.bubbleInfoTop ? 'bubbleInfoAbove' : ''} text-left`}>\r\n        <igl-block-dates-view\r\n          isEventHover={true}\r\n          entryHour={this.bookingEvent.ENTRY_HOUR}\r\n          entryMinute={this.bookingEvent.ENTRY_MINUTE}\r\n          defaultData={this.bookingEvent}\r\n          fromDate={this.bookingEvent.defaultDates.from_date}\r\n          toDate={this.bookingEvent.defaultDates.to_date}\r\n          entryDate={this.getEntryDate()}\r\n          onDataUpdateEvent={event => this.handleBlockDateUpdate(event)}\r\n        ></igl-block-dates-view>\r\n        <div class=\"row p-0 m-0 mt-2\">\r\n          <div class=\"full-width d-flex align-items-center\" style={{ gap: '0.25rem' }} role=\"group\">\r\n            <ir-button\r\n              btn_disabled={this.isLoading === 'update'}\r\n              text={locales.entries.Lcz_Update}\r\n              onClickHandler={_ => {\r\n                this.handleUpdateBlockedDates();\r\n              }}\r\n              icon_name=\"edit\"\r\n              size=\"sm\"\r\n              btn_styles=\"h-100\"\r\n              isLoading={this.isLoading === 'update'}\r\n              style={{ '--icon-size': '0.875rem' }}\r\n              btn_block\r\n              class={'w-100'}\r\n            ></ir-button>\r\n            <ir-button\r\n              class={'w-100 h-100 my-0'}\r\n              btn_block\r\n              btn_styles=\"h-100\"\r\n              size=\"sm\"\r\n              text={locales.entries.Lcz_ConvertToBooking}\r\n              onClickHandler={() => {\r\n                this.handleConvertBlockedDateToBooking();\r\n              }}\r\n            ></ir-button>\r\n\r\n            <ir-button\r\n              class={'w-100'}\r\n              btn_styles=\"h-100\"\r\n              btn_block\r\n              size=\"sm\"\r\n              style={{ '--icon-size': '0.875rem' }}\r\n              icon_name=\"trash\"\r\n              btn_color=\"danger\"\r\n              onClickHandler={_ => {\r\n                this.handleDeleteEvent();\r\n              }}\r\n              text={locales.entries.Lcz_Delete}\r\n            ></ir-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class={`pointerContainer ${this.bubbleInfoTop ? 'pointerContainerTop' : ''}`}>\r\n          <div class={`bubblePointer ${this.bubbleInfoTop ? 'bubblePointTop' : 'bubblePointBottom'}`}></div>\r\n        </div>\r\n        {this.isBlockedDateEvent() ? this.getBlockedView() : null}\r\n        {this.isNewBooking() ? this.getNewBookingOptions() : null}\r\n        {!this.isBlockedDateEvent() && !this.isNewBooking() ? this.getInfoElement() : null}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}