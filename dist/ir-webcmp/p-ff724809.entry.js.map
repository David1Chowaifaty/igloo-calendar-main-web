{"version":3,"names":["iglApplicationInfoCss","IglApplicationInfoStyle0","IglApplicationInfo","rateplanSelection","guestInfo","currency","bedPreferenceType","bookingType","roomIndex","totalNights","baseData","autoFillGuest","isButtonPressed","amount","recalculateTotalCost","variationService","VariationService","bookingService","BookingService","shouldSyncBookedByFirstName","booking_store","bookedByGuest","firstName","shouldSyncBookedByLastName","lastName","componentWillLoad","isSingleUnit","this","roomtype","id","filteredRooms","filterRooms","length","updateGuest","unit","toString","getAmount","params","roomTypeId","ratePlanId","ratePlan","prevGuest","guest","updateRoomGuest","ratePlanSelection","shouldAutoFill","bookedByGuestManuallyEdited","first_name","updateBookedByGuest","last_name","handleGuestInfoChange","is_amount_modified","handleButtonClicked","event","detail","key","getTooltipMessages","selected_variation","selectedVariation","infant_nbr","getVariationBasedOnInfants","variations","baseVariation","infants","matchingVariation","find","variation","adult_nbr","child_nbr","cancellationPolicy","applicable_policies","p","type","combined_statement","guaranteePolicy","tooltip","undefined","net","view_mode","rp_amount","tax","calculateExclusiveTax","property_id","calendar_data","property","discounted_gross_amount","result","is_frontdesk_enabled","assignable_units","forEach","Is_Fully_Available","push","name","pr_id","filteredGuestsRoom","filter","_","i","map","r","filteredResults","includes","roomtypeId","f","sort","a","b","localeCompare","tooltipId","v4","render","filteredRoomList","formattedVariation","formatVariationBasedOnInfants","h","Host","class","short_name","is_non_refundable","for","innerHTML","formatAmount","symbol","locales","entries","Lcz_Stay","style","margin","padding","fontSize","value","schema","GuestCredentials","shape","defaultValue","placeholder","trim","event_type","modifyBookingStore","size","Lcz_Assignunits","onchange","target","room","selected","is_bed_configuration_enabled","bed_preference","z","string","nonempty","Lcz_BedConfiguration","data","CODE_NAME","CODE_VALUE_EN","Number","emit","withClear","Array","from","item","iglDateRangeCss","IglDateRangeStyle0","IglDateRange","defaultData","disabled","minDate","dateLabel","maxDate","withDateDifference","variant","hint","renderAgain","dateSelectEvent","dateRangeChange","toast","fromDate","moment","toDate","add","isInvalid","initializeDates","handleDataChange","newValue","oldValue","JSON","stringify","Date","setHours","calculateTotalNights","calculateDaysBetweenDates","format","handleDateSelectEvent","handleDateChange","evt","start","end","getTime","fromDateStr","toDateStr","dateDifference","checkIn","checkOut","dates","handleAriaInvalidChange","showNights","onDateChanged","e","range","slot","Lcz_Nights","Lcz_Night","iglRatePlanCss","IglRatePlanStyle0","IglRatePlan","ratePricingMode","shouldBeDisabled","isBookDisabled","visibleInventory","buttonClicked","bookingStepChange","disableForm","is_available_to_book","updateRateplanSelection","props","currentSelections","ratePlanSelections","handleVariationChange","reserveRooms","rooms","bookProperty","resetReserved","reserveRoom","direction","roomtype_id","rate","discounted_amount","amount_per_night","formatVariation","adults","toLowerCase","children","v","updateRoomParams","isAvailableToBook","formattedVariations","split","Fragment","stopImmediatePropagation","stopPropagation","Lcz_Rate","mask","uuidv4","reserved","appearance","onClickHandler","Lcz_Select","Lcz_Book","iglRoomTypeCss","IglRoomTypeStyle0","IglRoomType","roomType","validBookingTypes","isValidBookingType","rateplans","getVisibleInventory","irAirDatePickerCss","IrAirDatePickerStyle0","IrAirDatePicker","label","inline","date","multipleDates","dateFormat","timepicker","autoClose","showOtherMonths","selectOtherMonths","customPicker","container","forceDestroyOnUpdate","emitEmptyDate","triggerContainerStyle","currentDate","dateChanged","datePickerFocus","datePickerBlur","datePicker","openDatePickerTimeout","toValidDate","componentDidLoad","initializeDatepicker","datePropChanged","newDate","oldDate","isSameDates","updatePickerDate","minDatePropChanged","newVal","oldVal","update","maxDatePropChanged","clearDatePicker","clear","d1","d2","isSame","d","isNaN","valid","destroy","selectDate","AirDatepicker","el","selectedDates","locale","localeEn","onHide","onShow","onSelect","handleDateSelect","$datepicker","classList","borderWidth","setProperty","isArray","Boolean","startDate","endDate","disconnectedCallback","clearTimeout","irCountryPickerCss","IrCountryPickerStyle0","IrCountryPicker","countries","country","error","propertyCountry","testId","autoValidate","inputValue","selectedCountry","filteredCountries","searching","countryChange","debounceTimeout","handleCountryChange","newCountry","oldCountry","filterCountries","selectCountry","setTimeout","c","scrollToSelected","dropdownItem","document","querySelector","scrollIntoView","behavior","block","shouldShowPropertyCountry","mode","console","warn","src","flag","alt","aspectRatio","height","borderRadius","onTextChange","onInputFocus","onInputBlur","onClick","irDateSelectCss","IrDateSelectStyle0","IrDateSelect","isActive","slotManagerHasSlot","isValid","static","popupId","SLOT_NAMES","slotManager","createSlotManager","airDatePickerRef","instanceCounter","initialize","hasAttribute","getAttribute","setupListeners","openDatePicker","closeDatePicker","togglePicker","handleKeyDown","preventDefault","_label","join","arrow","part","placement","flip","shift","active","role","tabindex","bind","onKeyDown","tabIndex","String","readonly","hasSlot","ref","shouldClose","__decorate","ClickOutside","irMobileInputCss","IrMobileInputStyle0","IrMobileInput","componentId","idCounter","inputId","labelId","descriptionId","errorId","countryStatusId","description","required","countryCode","mobileInputChange","mobileInputCountryChange","resolvedCountry","resolveCountry","parse","code","handleCountryCodeChange","nextCode","handleSelectedCountryChange","next","previous","handleValueChange","toUpperCase","handleCountrySelect","requestAnimationFrame","innerInput","shadowRoot","focus","describedByIds","htmlFor","marginRight","phone_prefix","inputMode","autocomplete","formattedValue"],"sources":["src/components/igloo-calendar/igl-book-property/igl-booking-form/igl-application-info/igl-application-info.css?tag=igl-application-info&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-booking-form/igl-application-info/igl-application-info.tsx","src/components/igloo-calendar/igl-date-range/igl-date-range.css?tag=igl-date-range&encapsulation=shadow","src/components/igloo-calendar/igl-date-range/igl-date-range.tsx","src/components/igloo-calendar/igl-book-property/igl-booking-overview-page/igl-room-type/igl-rate-plan/igl-rate-plan.css?tag=igl-rate-plan&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-booking-overview-page/igl-room-type/igl-rate-plan/igl-rate-plan.tsx","src/components/igloo-calendar/igl-book-property/igl-booking-overview-page/igl-room-type/igl-room-type.css?tag=igl-room-type&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-booking-overview-page/igl-room-type/igl-room-type.tsx","src/components/ui/date-picker/ir-air-date-picker/ir-air-date-picker.css?tag=ir-air-date-picker","src/components/ui/date-picker/ir-air-date-picker/ir-air-date-picker.tsx","src/components/ui/ir-country-picker/ir-country-picker.css?tag=ir-country-picker&encapsulation=scoped","src/components/ui/ir-country-picker/ir-country-picker.tsx","src/components/ui/date-picker/ir-date-select/ir-date-select.css?tag=ir-date-select&encapsulation=shadow","src/components/ui/date-picker/ir-date-select/ir-date-select.tsx","src/components/ui/ir-mobile-input/ir-mobile-input.css?tag=ir-mobile-input&encapsulation=shadow","src/components/ui/ir-mobile-input/ir-mobile-input.tsx"],"sourcesContent":["/* :host {\n  display: block;\n}\n.rate_amount {\n  display: none;\n  padding: 0;\n  margin: 0;\n}\n\n.booking-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 0.5rem;\n  gap: 0.5rem;\n}\n.non-ref-span {\n  font-size: 12px;\n  color: var(--green);\n}\n.booking-roomtype-title {\n  font-size: 1.25rem;\n  margin-right: 0.5rem;\n  margin: 0;\n  padding: 0;\n}\n\n.booking-details-container {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0;\n  margin: 0;\n}\n\n.booking-rateplan {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin: 0;\n  padding: 0;\n}\n\n.booking-rateplan-name {\n  font-weight: bold;\n  margin: 0;\n  padding: 0;\n}\n\n.booking-tooltip {\n  margin-right: 0.5rem;\n  margin: 0;\n  padding: 0;\n}\n\n.booking-variation {\n  margin: 0;\n  padding: 0;\n}\n\n.booking-price {\n  margin: 0;\n  padding: 0;\n}\n\n.booking-footer {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0;\n  margin-bottom: 0.5rem;\n}\n\n.booking-details-container {\n  display: none;\n}\n\n\n@media (min-width: 768px) {\n  .booking-header {\n    justify-content: flex-start;\n  }\n  .booking-footer,\n  .booking-price {\n    display: none;\n  }\n  .booking-details-container,\n  .rate_amount {\n    display: inline-flex;\n    gap: 0.5rem;\n  }\n}\n\n@media only screen and (min-width: 908px) {\n  .aplicationInfoContainer {\n    max-width: 100%;\n  }\n  .guest-info-container,\n  .bed-preference-container,\n  .unit-select-container {\n    max-width: 250px;\n  }\n \n} */\n:host {\n  color: var(--wa-color-text-normal);\n  font-family: var(--wa-font-family-heading);\n  line-height: var(--wa-line-height-condensed);\n  text-wrap: balance;\n  text-align: start;\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  margin-top: 1.5rem;\n}\n.fd-application-info__header {\n  display: flex;\n  /* flex-direction: column; */\n  gap: 1rem;\n  align-items: flex-start;\n  justify-content: space-between;\n}\n.fd-application-info__variation {\n  padding: 0;\n  margin: 0;\n}\n\n.fd-application-info__form {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.fd-application-info__price-inline,\n.fd-application-info__details {\n  display: none;\n}\n\n.fd-application-info__footer,\n.fd-application-info__rateplan {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n.fd-application-info__footer {\n  justify-content: space-between;\n}\n.fd-application-info__rateplan-name {\n  font-size: var(--wa-font-size-m);\n  margin: 0;\n  padding: 0;\n}\n.fd-application-info__non-refundable {\n  color: var(--wa-color-success-fill-loud);\n  margin-inline-start: 0.5rem;\n}\n.fd-application-info__roomtype-title {\n  font-size: var(--wa-font-size-l);\n}\n.fd-application-info__infant {\n  display: flex;\n  flex-direction: column;\n  gap: 0.875rem;\n}\n.fd-application-info__infant-label {\n  margin: 0;\n  padding: 0;\n  color: var(--wa-color-danger-fill-loud);\n}\n.fd-application-info__price {\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n}\n/*md*/\n@media (min-width: 768px) {\n  .fd-application-info__infant {\n    flex-direction: row;\n    align-items: center;\n  }\n  .fd-application-info__infant .fd-application-info__select {\n    max-width: 100px;\n  }\n  .fd-application-info__roomtype-title {\n    font-size: var(--wa-font-size-m);\n  }\n  .fd-application-info__header {\n    justify-content: flex-start;\n    align-items: center;\n    gap: 0.5rem;\n  }\n  .fd-application-info__form {\n    flex-direction: row;\n  }\n  .fd-application-info__price-inline {\n    display: flex;\n    flex-direction: column;\n    padding: 0;\n    margin: 0;\n    align-items: flex-end;\n    /* align-items: center; */\n  }\n  .fd-application-info__details {\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n  }\n  .fd-application-info__price,\n  .fd-application-info__footer {\n    display: none;\n  }\n}\n\n/*lg*/\n@media (min-width: 1024px) {\n}\n\n/*xl*/\n@media (min-width: 1280px) {\n}\n\n/*2xl*/\n@media (min-width: 1536px) {\n}\n","import { Component, Host, h, Prop, State, Listen, Watch, Event, EventEmitter } from '@stencil/core';\nimport { TPropertyButtonsTypes } from '@/components';\nimport { ICurrency } from '@/models/calendarData';\nimport booking_store, { IRatePlanSelection, modifyBookingStore, RatePlanGuest, updateBookedByGuest, updateRoomGuest } from '@/stores/booking.store';\nimport locales from '@/stores/locales.store';\nimport calendar_data, { isSingleUnit } from '@/stores/calendar-data';\nimport { formatAmount } from '@/utils/utils';\nimport VariationService from '@/services/variation.service';\nimport { GuestCredentials } from '../../types';\nimport { z } from 'zod';\nimport { v4 } from 'uuid';\nimport { BookingService } from '../../../../../services/booking-service/booking.service';\n\n@Component({\n  tag: 'igl-application-info',\n  styleUrl: 'igl-application-info.css',\n  scoped: true,\n})\nexport class IglApplicationInfo {\n  @Prop() rateplanSelection: IRatePlanSelection;\n  @Prop() guestInfo: RatePlanGuest | null;\n  @Prop() currency: ICurrency;\n  @Prop() bedPreferenceType = [];\n  @Prop() bookingType: string = 'PLUS_BOOKING';\n  @Prop() roomIndex: number;\n  @Prop() totalNights: number = 1;\n  @Prop() baseData: { unit: { id: string; name: string }; roomtypeId: number };\n  @Prop() autoFillGuest: boolean;\n\n  @State() isButtonPressed = false;\n  @State() amount = 0;\n\n  @Event() recalculateTotalCost: EventEmitter<void>;\n\n  private variationService = new VariationService();\n  private bookingService = new BookingService();\n  private shouldSyncBookedByFirstName = !booking_store.bookedByGuest?.firstName;\n  private shouldSyncBookedByLastName = !booking_store.bookedByGuest?.lastName;\n\n  async componentWillLoad() {\n    if (isSingleUnit(this.rateplanSelection.roomtype.id)) {\n      const filteredRooms = this.filterRooms();\n      if (filteredRooms.length > 0) this.updateGuest({ unit: filteredRooms[0]?.id?.toString() });\n    }\n    this.amount = await this.getAmount();\n  }\n\n  private updateGuest(params: Partial<RatePlanGuest>) {\n    const roomTypeId = this.rateplanSelection.roomtype.id;\n    const ratePlanId = this.rateplanSelection.ratePlan.id;\n    let prevGuest = [...this.rateplanSelection.guest];\n    prevGuest[this.roomIndex] = {\n      ...prevGuest[this.roomIndex],\n      ...params,\n    };\n    updateRoomGuest({\n      ratePlanSelection: this.rateplanSelection,\n      ratePlanId,\n      roomTypeId,\n      guest: prevGuest,\n    });\n\n    const shouldAutoFill = this.autoFillGuest && !booking_store.bookedByGuestManuallyEdited;\n    if (!shouldAutoFill) {\n      if (booking_store.bookedByGuestManuallyEdited) {\n        this.shouldSyncBookedByFirstName = false;\n        this.shouldSyncBookedByLastName = false;\n      }\n      return;\n    }\n\n    if (typeof params.first_name === 'string' && this.shouldSyncBookedByFirstName) {\n      updateBookedByGuest({\n        firstName: params.first_name,\n      });\n    }\n\n    if (typeof params.last_name === 'string' && this.shouldSyncBookedByLastName) {\n      updateBookedByGuest({\n        lastName: params.last_name,\n      });\n    }\n  }\n\n  @Watch('guestInfo')\n  async handleGuestInfoChange() {\n    if (this.rateplanSelection.is_amount_modified) {\n      return;\n    }\n    this.amount = await this.getAmount();\n  }\n\n  @Listen('buttonClicked', { target: 'body' })\n  handleButtonClicked(\n    event: CustomEvent<{\n      key: TPropertyButtonsTypes;\n      data?: CustomEvent;\n    }>,\n  ) {\n    switch (event.detail.key) {\n      case 'book':\n      case 'bookAndCheckIn':\n      case 'save':\n        this.isButtonPressed = true;\n        break;\n    }\n  }\n\n  private getTooltipMessages(): string | undefined {\n    const { ratePlan, selected_variation } = this.rateplanSelection;\n    let selectedVariation = selected_variation;\n    if (this.guestInfo?.infant_nbr) {\n      selectedVariation = this.variationService.getVariationBasedOnInfants({\n        variations: ratePlan.variations,\n        baseVariation: selected_variation,\n        infants: this.guestInfo?.infant_nbr,\n      });\n    }\n\n    if (!selectedVariation) return;\n\n    const matchingVariation = ratePlan.variations?.find(variation => variation.adult_nbr === selectedVariation.adult_nbr && variation.child_nbr === selectedVariation.child_nbr);\n\n    if (!matchingVariation) return;\n\n    const cancellationPolicy = matchingVariation.applicable_policies?.find(p => p.type === 'cancelation')?.combined_statement;\n    const guaranteePolicy = matchingVariation.applicable_policies?.find(p => p.type === 'guarantee')?.combined_statement;\n\n    let tooltip = '';\n    if (cancellationPolicy) {\n      tooltip += `<b><u>Cancellation:</u></b> ${cancellationPolicy}<br/>`;\n    }\n    if (guaranteePolicy) {\n      tooltip += `<b><u>Guarantee:</u></b> ${guaranteePolicy}`;\n    }\n    return tooltip || undefined;\n  }\n\n  private async getAmount(): Promise<number> {\n    if (this.rateplanSelection.is_amount_modified) {\n      const net = this.rateplanSelection.view_mode === '001' ? this.rateplanSelection.rp_amount : this.rateplanSelection.rp_amount * this.totalNights;\n      const tax = await this.bookingService.calculateExclusiveTax({\n        amount: net,\n        property_id: calendar_data.property.id,\n      });\n      return net + (tax ?? 0);\n    }\n    let variation = this.rateplanSelection.selected_variation;\n    if (this.guestInfo?.infant_nbr) {\n      variation = this.variationService.getVariationBasedOnInfants({\n        variations: this.rateplanSelection.ratePlan.variations,\n        baseVariation: this.rateplanSelection.selected_variation,\n        infants: this.guestInfo?.infant_nbr,\n      });\n    }\n    return variation.discounted_gross_amount;\n  }\n\n  private filterRooms(): { name: string; id: number }[] {\n    const result = [];\n    if (!calendar_data.is_frontdesk_enabled) {\n      return result;\n    }\n    this.rateplanSelection.ratePlan?.assignable_units?.forEach(unit => {\n      if (unit.Is_Fully_Available) {\n        result.push({ name: unit.name, id: unit.pr_id });\n      }\n    });\n    const filteredGuestsRoom = this.rateplanSelection.guest.filter((_, i) => i !== this.roomIndex).map(r => r.unit);\n    const filteredResults = result.filter(r => !filteredGuestsRoom.includes(r.id.toString()));\n    return this.bookingType === 'EDIT_BOOKING'\n      ? [...filteredResults, this.rateplanSelection.roomtype.id === this.baseData?.roomtypeId ? this.baseData?.unit : null]\n          .filter(f => !!f)\n          .sort((a, b) => a.name.localeCompare(b.name))\n      : filteredResults;\n  }\n  private tooltipId = `room_info_tooltip_${v4()}`;\n\n  render() {\n    const filteredRoomList = this.filterRooms();\n    const formattedVariation = this.variationService.formatVariationBasedOnInfants({\n      baseVariation: this.rateplanSelection.selected_variation,\n      infants: this.guestInfo.infant_nbr,\n      variations: this.rateplanSelection.ratePlan.variations,\n    });\n    // const amount = await this.getAmount();\n\n    return (\n      <Host class=\"fd-application-info\" data-testid={`room_info_${this.rateplanSelection.ratePlan.id}`}>\n        <div class=\"fd-application-info__header\">\n          {(this.bookingType === 'PLUS_BOOKING' || this.bookingType === 'ADD_ROOM' || this.bookingType === 'EDIT_BOOKING') && (\n            <span class=\"fd-application-info__roomtype-title\">{this.rateplanSelection.roomtype.name}</span>\n          )}\n\n          <div class=\"fd-application-info__details\">\n            <div class=\"fd-application-info__rateplan\">\n              <p class=\"fd-application-info__rateplan-name\">\n                {this.rateplanSelection.ratePlan.short_name}\n                {this.rateplanSelection.ratePlan.is_non_refundable && <span class=\"fd-application-info__non-refundable\">Non Refundable</span>}\n              </p>\n              <wa-tooltip for={this.tooltipId}>\n                <span innerHTML={this.getTooltipMessages()}></span>\n              </wa-tooltip>\n              <wa-icon name=\"circle-info\" id={this.tooltipId}></wa-icon>\n              {/* <ir-tooltip class=\"fd-application-info__tooltip\" message={this.getTooltipMessages()}></ir-tooltip> */}\n            </div>\n\n            <p class=\"fd-application-info__variation\" innerHTML={formattedVariation}></p>\n          </div>\n\n          <p class=\"fd-application-info__price\">\n            <span class=\"ir-price\">\n              {formatAmount(this.currency?.symbol, this.amount)}/{locales.entries.Lcz_Stay}\n            </span>\n            <p style={{ margin: '0', padding: '0', fontSize: '0.75rem' }}>Including taxes and fees</p>\n          </p>\n        </div>\n\n        <div class=\"fd-application-info__footer\">\n          <div class=\"fd-application-info__rateplan\">\n            <p class=\"fd-application-info__rateplan-name\">{this.rateplanSelection.ratePlan.short_name}</p>\n            <wa-tooltip for={`mobile-${this.tooltipId}`}>\n              <span innerHTML={this.getTooltipMessages()}></span>\n            </wa-tooltip>\n            <wa-icon name=\"circle-info\" id={`mobile-${this.tooltipId}`}></wa-icon>\n          </div>\n\n          <p class=\"fd-application-info__variation\" innerHTML={formattedVariation}></p>\n        </div>\n\n        <div class=\"fd-application-info__form\">\n          <ir-validator value={this.guestInfo?.first_name} schema={GuestCredentials.shape.first_name}>\n            <ir-input\n              class=\"fd-application-info__input\"\n              // aria-invalid={String(Boolean(this.isButtonPressed && this.guestInfo?.first_name === ''))}\n              value={this.guestInfo?.first_name}\n              defaultValue={this.guestInfo?.first_name}\n              data-testid=\"guest_first_name\"\n              placeholder={locales.entries['Lcz_GuestFirstname'] ?? 'Guest first name'}\n              onText-change={event => {\n                const name = event.detail.trim();\n                this.updateGuest({ first_name: name });\n                if (booking_store.event_type.type === 'EDIT_BOOKING') {\n                  modifyBookingStore('guest', {\n                    ...booking_store.guest,\n                    name,\n                  });\n                }\n              }}\n            ></ir-input>\n          </ir-validator>\n          <ir-validator value={this.guestInfo?.last_name} schema={GuestCredentials.shape.last_name}>\n            <ir-input\n              class=\"fd-application-info__input\"\n              type=\"text\"\n              // aria-invalid={String(Boolean(this.isButtonPressed && this.guestInfo?.last_name === ''))}\n              value={this.guestInfo?.last_name}\n              defaultValue={this.guestInfo?.last_name}\n              data-testid=\"guest_last_name\"\n              placeholder={locales.entries['Lcz_GuestLastname'] ?? 'Guest last name'}\n              onText-change={event => {\n                const name = event.detail.trim();\n                this.updateGuest({ last_name: name });\n                if (booking_store.event_type.type === 'EDIT_BOOKING') {\n                  modifyBookingStore('guest', {\n                    ...booking_store.guest,\n                    name,\n                  });\n                }\n              }}\n            ></ir-input>\n          </ir-validator>\n\n          {calendar_data.is_frontdesk_enabled &&\n            !isSingleUnit(this.rateplanSelection.roomtype.id) &&\n            (this.bookingType === 'PLUS_BOOKING' || this.bookingType === 'ADD_ROOM' || this.bookingType === 'EDIT_BOOKING') && (\n              <wa-select\n                with-clear\n                size=\"small\"\n                class=\"fd-application-info__select\"\n                placeholder={locales.entries.Lcz_Assignunits}\n                data-testid=\"unit\"\n                value={this.guestInfo?.unit}\n                defaultValue={this.guestInfo?.unit}\n                onchange={event =>\n                  this.updateGuest({\n                    unit: (event.target as HTMLInputElement).value,\n                  })\n                }\n              >\n                {filteredRoomList.map(room => (\n                  <wa-option value={room.id.toString()} selected={this.guestInfo?.unit === room.id.toString()}>\n                    {room.name}\n                  </wa-option>\n                ))}\n              </wa-select>\n            )}\n\n          {this.rateplanSelection.roomtype.is_bed_configuration_enabled && (\n            <ir-validator value={this.guestInfo?.bed_preference} schema={z.string().nonempty()}>\n              <wa-select\n                with-clear\n                size=\"small\"\n                class=\"fd-application-info__select\"\n                placeholder={locales.entries.Lcz_BedConfiguration}\n                data-testid=\"bed_configuration\"\n                value={this.guestInfo?.bed_preference}\n                defaultValue={this.guestInfo?.bed_preference}\n                // aria-invalid={String(Boolean(this.isButtonPressed && this.guestInfo?.bed_preference === ''))}\n                onchange={event =>\n                  this.updateGuest({\n                    bed_preference: (event.target as HTMLInputElement).value,\n                  })\n                }\n              >\n                {this.bedPreferenceType.map(data => (\n                  <wa-option value={data.CODE_NAME} selected={this.guestInfo?.bed_preference === data.CODE_NAME}>\n                    {data.CODE_VALUE_EN}\n                  </wa-option>\n                ))}\n              </wa-select>\n            </ir-validator>\n          )}\n\n          <p class=\"fd-application-info__price-inline\">\n            <span class=\"ir-price\">\n              {formatAmount(this.currency?.symbol, this.amount)}/{locales.entries.Lcz_Stay}\n            </span>\n            <p style={{ margin: '0', padding: '0', fontSize: '0.75rem' }}>Including taxes and fees</p>\n          </p>\n        </div>\n\n        {this.rateplanSelection.selected_variation.child_nbr > 0 && (\n          <div class=\"fd-application-info__infant\">\n            <p class=\"fd-application-info__infant-label\">Any of the children below 3 years?</p>\n            <wa-select\n              size=\"small\"\n              class=\"fd-application-info__select fd-application-info__select--inline\"\n              placeholder={locales.entries['No'] || 'No'}\n              value={this.guestInfo?.infant_nbr?.toString()}\n              defaultValue={this.guestInfo?.infant_nbr?.toString()}\n              onchange={event => {\n                this.updateGuest({\n                  infant_nbr: Number((event.target as HTMLInputElement).value),\n                });\n                if (this.rateplanSelection.is_amount_modified) {\n                  return;\n                }\n                this.recalculateTotalCost.emit();\n              }}\n              withClear\n            >\n              {Array.from({ length: this.rateplanSelection.selected_variation.child_nbr }, (_, i) => i + 1).map(item => (\n                <wa-option value={item.toString()} selected={this.guestInfo?.infant_nbr === item}>\n                  {item}\n                </wa-option>\n              ))}\n            </wa-select>\n          </div>\n        )}\n      </Host>\n    );\n  }\n}\n","/* @import url('../../../assets/webawesome/utilities/size.css');\n\n:host {\n  display: flex;\n  width: 100%;\n}\n\n.date-range-shell {\n  position: relative;\n  width: 100%;\n  height: var(--wa-form-control-height);\n  padding: 0 var(--wa-form-control-padding-inline);\n  display: inline-flex;\n  align-items: center;\n  gap: 0.75rem;\n  box-sizing: border-box;\n  cursor: pointer;\n  color: var(--wa-form-control-value-color);\n  font-size: var(--wa-form-control-value-size);\n  font-family: inherit;\n  font-weight: var(--wa-form-control-value-font-weight);\n  line-height: var(--wa-form-control-value-line-height);\n\n  transition: background-color var(--wa-transition-normal), border var(--wa-transition-normal), outline var(--wa-transition-fast);\n  transition-timing-function: var(--wa-transition-easing);\n}\n.date-range-shell.picker {\n  background-color: var(--wa-form-control-background-color);\n  border-color: var(--wa-form-control-border-color);\n  border-style: var(--wa-form-control-border-style);\n  border-width: var(--wa-form-control-border-width);\n  border-radius: var(--wa-form-control-border-radius);\n}\n\n.date-range-shell.disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.date-range-display.date-range-display--disabled {\n  cursor: not-allowed;\n}\n.date-range-shell:focus-within {\n  outline: var(--wa-focus-ring);\n  outline-offset: var(--wa-focus-ring-offset);\n}\n\n.date-range-input {\n  position: absolute;\n  inset: 0;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n  background: transparent;\n  border: none;\n  padding: 0;\n  margin: 0;\n}\n\n.date-range-input[data-state='disabled'] {\n  cursor: not-allowed;\n}\n\n.date-range-shell.picker .date-range-display {\n  background-color: var(--wa-form-control-background-color);\n  padding: 0 var(--wa-form-control-padding-inline);\n}\n.date-range-display {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  width: 100%;\n  pointer-events: none;\n  position: absolute;\n  inset: 0;\n  border-radius: inherit;\n  box-sizing: border-box;\n}\n\n.date-range-icon {\n  margin: 0;\n  padding: 0;\n}\n\n.date-range-date {\n  font-weight: 500;\n}\n\n.date-range-nights {\n  font-weight: 500;\n}\n\n@media (min-width: 768px) {\n  :host {\n    width: fit-content;\n  }\n  .date-range-shell {\n    min-width: 290px;\n    width: fit-content;\n  }\n} */\n:host {\n  display: flex;\n\n  min-width: 280px;\n}\n.custom-picker {\n  width: 100%;\n}\n","import { Component, h, State, Event, EventEmitter, Prop, Watch } from '@stencil/core';\nimport { IToast } from '@components/ui/ir-toast/toast';\nimport locales from '@/stores/locales.store';\nimport { calculateDaysBetweenDates } from '@/utils/booking';\nimport moment, { Moment } from 'moment';\nexport type DateRangeChangeEvent = { checkIn: Moment; checkOut: Moment };\n@Component({\n  tag: 'igl-date-range',\n  styleUrl: 'igl-date-range.css',\n  shadow: true,\n})\nexport class IglDateRange {\n  @Prop({ reflect: true }) size: 'small' | 'medium' | 'large' = 'small';\n  @Prop() defaultData: { [key: string]: any };\n  @Prop({ reflect: true }) disabled: boolean = false;\n  @Prop() minDate: string;\n  @Prop() dateLabel: string;\n  @Prop() maxDate: string;\n  @Prop() withDateDifference: boolean = true;\n  @Prop() variant: 'booking' | 'default' = 'default';\n  @Prop() hint: string;\n\n  @State() renderAgain: boolean = false;\n\n  @Event() dateSelectEvent: EventEmitter<{ [key: string]: any }>;\n  @Event({ composed: true, cancelable: true, bubbles: true }) dateRangeChange: EventEmitter<DateRangeChangeEvent>;\n  @Event() toast: EventEmitter<IToast>;\n\n  private totalNights: number = 0;\n  @State() fromDate: Date = moment().toDate();\n  @State() toDate: Date = moment().add(1, 'day').toDate();\n  @State() isInvalid: string;\n\n  componentWillLoad() {\n    this.initializeDates();\n  }\n\n  @Watch('defaultData')\n  handleDataChange(newValue: any, oldValue: any) {\n    if (JSON.stringify(newValue) !== JSON.stringify(oldValue)) {\n      this.initializeDates();\n    }\n  }\n\n  private initializeDates() {\n    if (this.defaultData) {\n      if (this.defaultData.fromDate) {\n        this.fromDate = new Date(this.defaultData.fromDate);\n        this.fromDate.setHours(0, 0, 0, 0);\n      }\n      if (this.defaultData.toDate) {\n        this.toDate = new Date(this.defaultData.toDate);\n        this.toDate.setHours(0, 0, 0, 0);\n      }\n    }\n    if (this.fromDate && this.toDate) {\n      this.calculateTotalNights();\n    }\n  }\n\n  private calculateTotalNights() {\n    this.totalNights = calculateDaysBetweenDates(moment(this.fromDate).format('YYYY-MM-DD'), moment(this.toDate).format('YYYY-MM-DD'));\n  }\n\n  private handleDateSelectEvent(key, data: any = '') {\n    this.dateSelectEvent.emit({ key, data });\n  }\n  private handleDateChange(evt) {\n    const { start, end } = evt.detail;\n    this.fromDate = start.toDate();\n    this.toDate = end.toDate();\n    this.calculateTotalNights();\n\n    this.handleDateSelectEvent('selectedDateRange', {\n      fromDate: this.fromDate.getTime(),\n      toDate: this.toDate.getTime(),\n      fromDateStr: start.format('DD MMM YYYY'),\n      toDateStr: end.format('DD MMM YYYY'),\n      dateDifference: this.totalNights,\n    });\n    this.dateRangeChange.emit({\n      checkIn: start,\n      checkOut: end,\n    });\n\n    this.renderAgain = !this.renderAgain;\n  }\n  // private renderDateSummary(showNights: boolean) {\n  //   const fromDateDisplay = moment(this.fromDate).format('MMM DD, YYYY');\n  //   const toDateDisplay = moment(this.toDate).format('MMM DD, YYYY');\n  //   const shouldRenderNights = showNights && this.totalNights > 0;\n\n  //   return (\n  //     <div\n  //       class={{\n  //         'date-range-display': true,\n  //         'date-range-display--disabled': this.disabled,\n  //       }}\n  //     >\n  //       <wa-icon variant=\"regular\" name=\"calendar\"></wa-icon>\n  //       <span class=\"date-range-date\">{fromDateDisplay}</span>\n  //       <wa-icon name=\"arrow-right\"></wa-icon>\n  //       <span class=\"date-range-date\">{toDateDisplay}</span>\n  //       {shouldRenderNights && (\n  //         <span class=\"date-range-nights\">{this.totalNights + (this.totalNights > 1 ? ` ${locales.entries.Lcz_Nights}` : ` ${locales.entries.Lcz_Night}`)}</span>\n  //       )}\n  //     </div>\n  //   );\n  // }\n  private get dates() {\n    const fromDate = moment(this.fromDate).format('YYYY-MM-DD');\n    const toDate = moment(this.toDate).format('YYYY-MM-DD');\n    return [fromDate, toDate];\n  }\n  @Watch('aria-invalid')\n  handleAriaInvalidChange(newValue) {\n    this.isInvalid = newValue;\n  }\n  render() {\n    const showNights = this.variant === 'booking' && this.withDateDifference;\n    return (\n      // <Host size={this.size}>\n      //   <div class={`date-range-shell ${this.disabled ? 'disabled' : ''} ${this.variant === 'booking' ? 'picker' : ''}`}>\n      //     <ir-date-range\n      //       maxDate={this.maxDate}\n      //       class={'date-range-input'}\n      //       disabled={this.disabled}\n      //       fromDate={this.fromDate}\n      //       toDate={this.toDate}\n      //       minDate={this.minDate}\n      //       autoApply\n      //       data-state={this.disabled ? 'disabled' : 'active'}\n      //       onDateRangeChange={evt => {\n      //         this.handleDateChange(evt);\n      //       }}\n      //     ></ir-date-range>\n      //     {this.renderDateSummary(showNights)}\n      //   </div>\n      // </Host>\n      <ir-date-select\n        disabled={this.disabled}\n        class=\"custom-picker\"\n        minDate={this.minDate}\n        aria-invalid={this.isInvalid}\n        maxDate={this.maxDate}\n        onDateChanged={e => this.handleDateChange(e)}\n        range\n        // hint={this.hint}\n        dates={this.dates}\n      >\n        <wa-icon slot=\"start\" variant=\"regular\" name=\"calendar\"></wa-icon>\n        {showNights && (\n          <span slot=\"end\" class=\"date-range-nights\">\n            {this.totalNights + (this.totalNights > 1 ? ` ${locales.entries.Lcz_Nights}` : ` ${locales.entries.Lcz_Night}`)}\n          </span>\n        )}\n      </ir-date-select>\n    );\n  }\n}\n",":host {\n  display: block;\n  margin-bottom: 1rem;\n  color: var(--wa-color-text-quiet);\n}\n\n.rate-plan {\n  display: flex;\n  flex-direction: column;\n  min-height: 32px;\n  margin-top: 0.25rem;\n  gap: 0.5rem;\n}\n\n.rate-plan--unavailable {\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.rateplan-name-container {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin: 0;\n  padding: 0;\n}\n\n.rateplan-name-container p {\n  margin: 0;\n}\n\n.rateplan-container {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n  width: 100%;\n  margin-top: 0.5rem;\n}\n\n.variation-select {\n  width: 100%;\n  max-width: 300px;\n  flex: 1;\n}\n\n.rp-select:disabled {\n  background-color: #eceff1;\n  color: #7a7a7a;\n}\n\n.rateplan-config {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n  width: 100%;\n}\n\n.rate-total-night-view {\n  display: flex;\n  flex: 1;\n  gap: 0;\n  align-items: stretch;\n}\n\n.rateplan-price-input {\n  flex: 1;\n  width: 100%;\n}\n\n.total-nights-container {\n  width: max-content;\n}\n\n.rp-select--nights {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n\n.inventory-select {\n  width: 100%;\n  max-width: 200px;\n}\n\n.edit-booking-radio {\n  display: none;\n}\n\n.mobile-only {\n  width: 100%;\n  display: block;\n}\n\n.desktop-only {\n  display: none;\n}\n\n.rate-plan-unavailable-text {\n  margin: 0;\n  color: var(--wa-color-danger-fill-loud);\n}\n.rateplan-name-container {\n  font-family: var(--wa-font-family-heading);\n  font-weight: 400;\n  line-height: var(--wa-line-height-condensed);\n  text-wrap: balance;\n}\n\n.non-ref-span {\n  font-size: 12px;\n  color: var(--wa-color-success-fill-loud);\n}\n\n.nightBorder {\n  border-left-width: 0;\n  border-top-right-radius: 3px !important;\n  border-bottom-right-radius: 3px !important;\n}\n\n:dir(rtl) .fd-rateplan__price-input::part(base),\n:dir(ltr) .fd-rateplan__nights-select::part(combobox) {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.fd-rateplan__price-input {\n  flex: 1 1 0%;\n  z-index: 1;\n}\n\n:dir(rtl) .fd-rateplan__nights-select::part(combobox),\n:dir(ltr) .fd-rateplan__price-input::part(base) {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n}\n\n:dir(rtl) .fd-rateplan__nights-select::part(combobox) {\n  border-right-width: 0;\n}\n\n:dir(ltr) .fd-rateplan__nights-select::part(combobox) {\n  border-left-width: 0;\n}\n\n.fd-rateplan__nights-select {\n  min-width: 100px;\n}\n.fd-rateplan__inventory-select {\n  min-width: 60px;\n}\n\n.fd-rateplan__nights-select[open],\n.fd-rateplan__nights-select:focus-visible,\n.fd-rateplan__nights-select:focus-within {\n  z-index: 2;\n}\n\n@media (min-width: 768px) {\n  .booking-btn {\n    width: 100%;\n  }\n  .mobile-only {\n    display: none;\n  }\n  .desktop-only {\n    display: block;\n  }\n  .edit-booking-radio {\n    display: block;\n    margin-left: 0.75rem;\n  }\n  .rateplan-container {\n    flex-direction: row;\n    align-items: center;\n    justify-content: flex-end;\n  }\n  .rateplan-config {\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n  }\n  .rateplan__booking-btn {\n    width: 95px;\n  }\n}\n\n@media (min-width: 991px) {\n  :host {\n    margin: 0;\n  }\n  .rateplan-name-container {\n    margin-bottom: 0 !important;\n  }\n  .rateplan-price-input {\n    max-width: 250px;\n  }\n  .rate-plan--available {\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n  }\n}\n\n@media only screen and (min-width: 991px) and (max-width: 1300px) {\n  .rateplan-name-container {\n    width: 40%;\n  }\n  .price-amount {\n    max-width: 150px !important;\n  }\n}\n@media (min-width: 1024px) {\n  .booking-btn {\n    width: 100px;\n  }\n  .fd-rateplan__price-input {\n    width: 170px;\n    max-width: 170px;\n  }\n  .fd-rateplan__nights-select {\n    width: 100px;\n    max-width: 100px;\n  }\n  .rate-total-night-view {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    flex: 0;\n  }\n  .fd-rateplan__inventory-select {\n    width: 100px;\n  }\n  .rateplan-config {\n    width: fit-content;\n  }\n}\n@media (min-width: 1200px) {\n  .rateplan-name-container {\n    width: 40%;\n    margin-top: 0;\n  }\n  /* .rateplan-container {\n    width: 40%;\n  } */\n}\n","import { Component, Host, Prop, h, Event, EventEmitter, Fragment } from '@stencil/core';\nimport { v4 as uuidv4 } from 'uuid';\nimport locales from '@/stores/locales.store';\nimport { RatePlan, Variation } from '@/models/property';\nimport booking_store, { IRatePlanSelection, reserveRooms, resetReserved, updateRoomParams } from '@/stores/booking.store';\n\n@Component({\n  tag: 'igl-rate-plan',\n  styleUrl: 'igl-rate-plan.css',\n  scoped: true,\n})\nexport class IglRatePlan {\n  // Used Props with type annotations\n  @Prop() ratePlan: RatePlan;\n  @Prop() roomTypeId: number;\n  @Prop() ratePricingMode: Array<{ CODE_NAME: string; CODE_VALUE_EN: string }> = [];\n  @Prop() currency!: { symbol: string };\n  @Prop() shouldBeDisabled!: boolean;\n  @Prop() bookingType: string = 'PLUS_BOOKING';\n  @Prop() isBookDisabled: boolean = false;\n  @Prop() visibleInventory!: IRatePlanSelection;\n\n  @Event() buttonClicked!: EventEmitter<{ [key: string]: any }>;\n  @Event() bookingStepChange!: EventEmitter<{ direction: 'next' | 'prev' }>;\n  // Determine if the form inputs should be disabled\n  private disableForm(): boolean {\n    const { bookingType, shouldBeDisabled, ratePlan, visibleInventory } = this;\n    if (bookingType === 'EDIT_BOOKING' && shouldBeDisabled) {\n      return false;\n    }\n    return !ratePlan.is_available_to_book || visibleInventory?.visibleInventory === 0;\n  }\n\n  // Update the rate plan selection in the booking store\n  private updateRateplanSelection(props: Partial<IRatePlanSelection>): void {\n    const { roomTypeId, ratePlan } = this;\n    const currentSelections = booking_store.ratePlanSelections;\n\n    booking_store.ratePlanSelections = {\n      ...currentSelections,\n      [roomTypeId]: {\n        ...currentSelections[roomTypeId],\n        [ratePlan.id]: {\n          ...currentSelections[roomTypeId][ratePlan.id],\n          ...props,\n        },\n      },\n    };\n  }\n\n  // Handle changes to select inputs\n  private handleDataChange(key: 'adult_child_offering' | 'rate' | 'totalRooms', evt: Event): void {\n    const value = (evt.target as HTMLInputElement | HTMLSelectElement).value;\n    if (key === 'adult_child_offering') {\n      this.handleVariationChange(value);\n    } else if (key === 'rate') {\n      this.updateRateplanSelection({ view_mode: value as any });\n    } else if (key === 'totalRooms') {\n      reserveRooms({\n        roomTypeId: this.roomTypeId,\n        ratePlanId: this.ratePlan.id,\n        rooms: Number(value),\n      });\n    }\n  }\n\n  // Navigate to the next page for booking\n  private bookProperty(): void {\n    if (this.bookingType === 'BAR_BOOKING') {\n      resetReserved();\n    }\n    this.reserveRoom();\n    this.bookingStepChange.emit({ direction: 'next' });\n    this.buttonClicked.emit({ key: 'next' });\n  }\n\n  private reserveRoom() {\n    reserveRooms({\n      roomTypeId: this.roomTypeId,\n      ratePlanId: this.ratePlan.id,\n      rooms: 1,\n      guest: [\n        {\n          last_name: booking_store.guest?.last_name,\n          first_name: booking_store.guest?.first_name,\n          unit: this.roomTypeId === booking_store.guest?.roomtype_id ? booking_store.guest?.unit : null,\n          bed_preference: this.visibleInventory.roomtype.is_bed_configuration_enabled ? booking_store.guest?.bed_preference : null,\n          infant_nbr: this.visibleInventory.selected_variation?.child_nbr > 0 ? booking_store.guest?.infant_nbr : null,\n        },\n      ],\n    });\n  }\n  // Render the rate amount\n  private get rate(): string {\n    const { visibleInventory } = this;\n    if (!visibleInventory) return '';\n    if (visibleInventory.is_amount_modified) {\n      return visibleInventory.rp_amount.toString();\n    }\n    const { selected_variation, view_mode } = visibleInventory;\n    // const amount = view_mode === '001' ? selected_variation?.discounted_gross_amount : selected_variation?.amount_per_night_gross;\n    const amount = view_mode === '001' ? selected_variation?.discounted_amount : selected_variation?.amount_per_night;\n    return amount?.toString() || '';\n  }\n\n  // Format variation for display\n  private formatVariation(variation: Variation): string {\n    if (!variation) return '';\n    const adults = `${variation.adult_nbr} ${variation.adult_nbr === 1 ? locales.entries['Lcz_Adult']?.toLowerCase() : locales.entries['Lcz_Adults']?.toLowerCase()}`;\n    const children =\n      variation.child_nbr > 0\n        ? `${variation.child_nbr} ${variation.child_nbr > 1 ? locales.entries['Lcz_Children']?.toLowerCase() : locales.entries['Lcz_Child']?.toLowerCase()}`\n        : '';\n    return children ? `${adults} ${children}` : adults;\n  }\n\n  // Get tooltip messages for the rate plan\n  private getTooltipMessages(): string | undefined {\n    const { ratePlan, visibleInventory } = this;\n    const selectedVariation = visibleInventory?.selected_variation;\n    if (!selectedVariation) return;\n\n    const matchingVariation = ratePlan.variations?.find(variation => this.formatVariation(variation) === this.formatVariation(selectedVariation));\n\n    if (!matchingVariation) return;\n\n    const cancellationPolicy = matchingVariation.applicable_policies?.find(p => p.type === 'cancelation')?.combined_statement;\n    const guaranteePolicy = matchingVariation.applicable_policies?.find(p => p.type === 'guarantee')?.combined_statement;\n\n    let tooltip = '';\n    if (cancellationPolicy) {\n      tooltip += `<b><u>Cancellation:</u></b> ${cancellationPolicy}<br/>`;\n    }\n    if (guaranteePolicy) {\n      tooltip += `<b><u>Guarantee:</u></b> ${guaranteePolicy}`;\n    }\n    return tooltip || undefined;\n  }\n\n  // Handle variation change when a different option is selected\n  private async handleVariationChange(value: string): Promise<void> {\n    const { ratePlan, roomTypeId } = this;\n    const variations = ratePlan.variations || [];\n    const selectedVariation = variations.find(v => this.formatVariation(v) === value);\n\n    if (!selectedVariation) return;\n\n    updateRoomParams({\n      params: { selected_variation: selectedVariation },\n      ratePlanId: ratePlan.id,\n      roomTypeId,\n    });\n  }\n\n  // Reset reserved rooms in the booking store\n\n  render() {\n    const { ratePlan, bookingType, currency, ratePricingMode, visibleInventory } = this;\n    const isAvailableToBook = ratePlan.is_available_to_book;\n    const disableForm = this.disableForm();\n    const selectedVariation = visibleInventory?.selected_variation;\n    const formattedVariations = ratePlan.variations?.map(v => this.formatVariation(v));\n    // if (!this.visibleInventory) {\n    //   return null;\n    // }\n    return (\n      <Host data-testid={`rp-${this.ratePlan.id}`}>\n        <div class={`rate-plan ${isAvailableToBook ? 'rate-plan--available' : 'rate-plan--unavailable'}`}>\n          <div data-testid={'rp_name'} class=\"rateplan-name-container\">\n            {bookingType === 'BAR_BOOKING' ? (\n              <p>\n                {/* <span class=\"font-weight-bold\">{ratePlan.name.split('/')[0]}</span> */}\n                <span>\n                  {ratePlan.name.split('/')[1]} {ratePlan.is_non_refundable && <span class=\"non-ref-span\">Non Refundable</span>}\n                </span>\n              </p>\n            ) : (\n              <span>\n                {ratePlan.short_name} {ratePlan.is_non_refundable && <span class=\"non-ref-span\">Non Refundable</span>}\n              </span>\n            )}\n            {isAvailableToBook && (\n              <Fragment>\n                <wa-tooltip for={`rateplan-${this.ratePlan.id}`}>\n                  <span innerHTML={this.getTooltipMessages()}></span>\n                </wa-tooltip>\n                <wa-icon name=\"circle-info\" id={`rateplan-${this.ratePlan.id}`}></wa-icon>\n              </Fragment>\n            )}\n          </div>\n\n          {isAvailableToBook ? (\n            <div class=\"rateplan-container\">\n              <wa-select\n                size=\"small\"\n                disabled={disableForm}\n                data-testid=\"adult-child-offering\"\n                onchange={evt => this.handleDataChange('adult_child_offering', evt)}\n                onwa-hide={e => {\n                  e.stopImmediatePropagation();\n                  e.stopPropagation();\n                }}\n                value={this.formatVariation(selectedVariation)}\n                defaultValue={this.formatVariation(selectedVariation)}\n              >\n                {formattedVariations?.map(variation => (\n                  <wa-option value={variation} selected={this.formatVariation(selectedVariation) === variation}>\n                    {variation}\n                  </wa-option>\n                ))}\n              </wa-select>\n\n              <div class=\"rateplan-config\">\n                <div class=\"rate-total-night-view\">\n                  {/* <ir-price-input\n                    testId={'amount_input'}\n                    disabled={disableForm}\n                    onTextChange={e =>\n                      this.updateRateplanSelection({\n                        is_amount_modified: true,\n                        rp_amount: Number(e.detail),\n                      })\n                    }\n                    aria-label={`${this.visibleInventory?.roomtype?.name} ${this.ratePlan.short_name}'s rate`}\n                    aria-describedby={`${this.ratePlan.short_name}'s rate`}\n                    class=\"ir-br-input-none price-amount rateplan-price-input\"\n                    currency={currency.symbol}\n                    value={this.renderRate()}\n                    placeholder={locales.entries.Lcz_Rate || 'Rate'}\n                  ></ir-price-input> */}\n                  <ir-input\n                    disabled={disableForm}\n                    class=\"fd-rateplan__price-input\"\n                    onText-change={e =>\n                      this.updateRateplanSelection({\n                        is_amount_modified: true,\n                        rp_amount: Number(e.detail),\n                      })\n                    }\n                    id={`rate-input-${this.ratePlan.id}`}\n                    aria-label={`${this.visibleInventory?.roomtype?.name} ${this.ratePlan.short_name}'s rate`}\n                    aria-describedby={`${this.ratePlan.short_name}'s rate`}\n                    value={this.rate}\n                    defaultValue={this.rate}\n                    placeholder={locales.entries.Lcz_Rate || 'Rate'}\n                    mask=\"price\"\n                  >\n                    <span slot=\"start\">{currency.symbol}</span>\n                  </ir-input>\n                  <wa-select\n                    data-testid={'nigh_stay_select'}\n                    disabled={disableForm}\n                    onwa-hide={e => {\n                      e.stopImmediatePropagation();\n                      e.stopPropagation();\n                    }}\n                    size=\"small\"\n                    class=\"fd-rateplan__nights-select\"\n                    id={uuidv4()}\n                    onchange={evt =>\n                      this.updateRateplanSelection({\n                        view_mode: (evt.target as HTMLSelectElement).value as any,\n                      })\n                    }\n                    value={visibleInventory?.view_mode}\n                    defaultValue={visibleInventory?.view_mode}\n                  >\n                    {ratePricingMode.map(data => (\n                      <wa-option value={data.CODE_NAME} selected={visibleInventory?.view_mode === data.CODE_NAME}>\n                        {data.CODE_VALUE_EN}\n                      </wa-option>\n                    ))}\n                  </wa-select>\n                </div>\n                {(bookingType === 'PLUS_BOOKING' || bookingType === 'ADD_ROOM') && (\n                  <wa-select\n                    data-testid={'inventory_select'}\n                    disabled={visibleInventory.visibleInventory === 0}\n                    class=\"fd-rateplan__inventory-select\"\n                    onchange={evt => this.handleDataChange('totalRooms', evt)}\n                    value={visibleInventory.reserved?.toString()}\n                    defaultValue={visibleInventory.reserved?.toString()}\n                    size=\"small\"\n                    onwa-hide={e => {\n                      e.stopImmediatePropagation();\n                      e.stopPropagation();\n                    }}\n                  >\n                    {Array.from({ length: (visibleInventory.visibleInventory || 0) + 1 }, (_, i) => i).map(i => (\n                      <wa-option value={i?.toString()} selected={visibleInventory.reserved === i}>\n                        {i}\n                      </wa-option>\n                    ))}\n                  </wa-select>\n                )}\n              </div>\n              {bookingType === 'EDIT_BOOKING' && (\n                <Fragment>\n                  {/* <div class=\"edit-booking-radio desktop-only\">\n                    <fieldset class=\"rp-fieldset\">\n                      <input\n                        data-testid={'inventory_radio'}\n                        disabled={disableForm}\n                        type=\"radio\"\n                        name=\"ratePlanGroup\"\n                        value=\"1\"\n                        onChange={() => {\n                          resetReserved();\n                          this.reserveRoom();\n                        }}\n                        checked={visibleInventory.reserved === 1}\n                      />\n                    </fieldset> \n                  \n                  </div> */}\n                  <ir-custom-button\n                    variant=\"brand\"\n                    data-testid=\"book_property\"\n                    disabled={disableForm}\n                    type=\"button\"\n                    appearance={visibleInventory.reserved === 1 ? 'accent' : 'outlined'}\n                    class=\"rateplan__booking-btn\"\n                    onClickHandler={() => {\n                      resetReserved();\n                      this.reserveRoom();\n                      this.bookProperty();\n                    }}\n                  >\n                    {/* {visibleInventory.reserved === 1 ? locales.entries.Lcz_Current : locales.entries.Lcz_Select} */}\n                    {locales.entries.Lcz_Select}\n                  </ir-custom-button>\n                </Fragment>\n              )}\n\n              {(bookingType === 'BAR_BOOKING' || bookingType === 'SPLIT_BOOKING') && (\n                <ir-custom-button\n                  data-testid=\"book\"\n                  disabled={disableForm || (bookingType === 'SPLIT_BOOKING' && this.isBookDisabled)}\n                  type=\"button\"\n                  class=\"booking-btn\"\n                  variant=\"brand\"\n                  onClickHandler={() => this.bookProperty()}\n                >\n                  {locales.entries.Lcz_Book}\n                </ir-custom-button>\n              )}\n            </div>\n          ) : (\n            <p class=\"rate-plan-unavailable-text\">{locales.entries['Lcz_NotAvailable'] || 'Not available'}</p>\n          )}\n        </div>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n.margin-bottom-8 {\n  margin-bottom: 8px !important;\n}\n.roomtype__name {\n  margin: 0;\n  padding: 0;\n  font-family: var(--wa-font-family-heading);\n  font-weight: var(--wa-font-weight-heading);\n  line-height: var(--wa-line-height-condensed);\n  text-wrap: balance;\n  margin-bottom: 0.5rem;\n  color: var(--wa-color-text-normal);\n}\n","import { RoomType } from '@/models/property';\nimport { getVisibleInventory } from '@/stores/booking.store';\nimport { Component, Host, h, Prop } from '@stencil/core';\n\n@Component({\n  tag: 'igl-room-type',\n  styleUrl: 'igl-room-type.css',\n  scoped: true,\n})\nexport class IglRoomType {\n  @Prop() roomType: RoomType;\n  @Prop() bookingType = 'PLUS_BOOKING';\n  @Prop() ratePricingMode = [];\n  @Prop() roomTypeId: number | null = null;\n  @Prop() currency;\n  @Prop() isBookDisabled: boolean;\n\n  private validBookingTypes = ['PLUS_BOOKING', 'ADD_ROOM', 'EDIT_BOOKING', 'SPLIT_BOOKING'];\n\n  render() {\n    const isValidBookingType = this.validBookingTypes.includes(this.bookingType);\n\n    return (\n      <Host>\n        {isValidBookingType && this.roomType.rateplans?.length > 0 && <h5 class=\"roomtype__name\">{this.roomType.name}</h5>}\n        {this.roomType.rateplans?.map(ratePlan => {\n          if (!!ratePlan.variations) {\n            let shouldBeDisabled = this.roomTypeId === this.roomType.id;\n            const visibleInventory = getVisibleInventory(this.roomType.id, ratePlan.id);\n            return (\n              <igl-rate-plan\n                isBookDisabled={this.isBookDisabled}\n                visibleInventory={visibleInventory}\n                key={`rate-plan-${ratePlan.id}`}\n                ratePricingMode={this.ratePricingMode}\n                class={isValidBookingType ? '' : ''}\n                currency={this.currency}\n                ratePlan={ratePlan}\n                roomTypeId={this.roomType.id}\n                bookingType={this.bookingType}\n                shouldBeDisabled={shouldBeDisabled}\n              ></igl-rate-plan>\n            );\n          }\n          return null;\n        })}\n      </Host>\n    );\n  }\n}\n","@import url('../../../../assets/air-datepicker.css');\n:host {\n  display: block;\n}\n.custom-date-picker__calendar {\n  /* --adp-background-color: var(--wa-color-neutral-0, #fff);\n  --adp-border-radius: 12px;\n  --adp-cell-border-radius: 8px; */\n  --adp-padding: 1rem;\n  /* --adp-color: var(--wa-color-neutral-900, #0f172a);\n  --adp-color-other-month: rgba(15, 23, 42, 0.35);\n  --adp-color-other-month-hover: rgba(15, 23, 42, 0.65);\n  --adp-color-disabled: rgba(15, 23, 42, 0.35);\n  --adp-nav-title-size: 1rem;\n  --adp-nav-title-weight: 600;\n  --adp-cell-background-color-selected: var(--wa-color-primary-600, #2563eb);\n  --adp-cell-background-color-selected-hover: var(--wa-color-primary-700, #1d4ed8);\n  --adp-cell-border-color: transparent;\n  --adp-day-name-color: rgba(15, 23, 42, 0.65); */\n}\n","import { Component, Element, Event, EventEmitter, Method, Prop, State, Watch } from '@stencil/core';\nimport AirDatepicker from 'air-datepicker';\nimport moment from 'moment';\nimport localeEn from 'air-datepicker/locale/en';\n\n@Component({\n  tag: 'ir-air-date-picker',\n  styleUrl: 'ir-air-date-picker.css',\n  shadow: false,\n})\nexport class IrAirDatePicker {\n  @Element() el: HTMLElement;\n\n  @Prop() withClear: boolean;\n\n  @Prop() placeholder: string;\n\n  @Prop() label: string;\n\n  @Prop() dates: string[];\n\n  /**\n   * Determines whether the date picker is rendered inline or in a pop-up.\n   * If `true`, the picker is always visible inline.\n   */\n  @Prop() inline: boolean = false;\n\n  /**\n   * The initially selected date; can be a `Date` object or a string recognized by `AirDatepicker`.\n   */\n  @Prop({ mutable: true, reflect: true }) date: string | Date | null = null;\n\n  /**\n   * Enables multiple dates.\n   * If `true`, multiple selection is allowed.\n   * If you pass a number (e.g. 3), that is the maximum number of selectable dates.\n   */\n  @Prop() multipleDates: boolean | number = false;\n\n  /**\n   * Whether the picker should allow range selection (start and end date).\n   */\n  @Prop() range: boolean = false;\n\n  /**\n   * Format for the date as it appears in the input field.\n   * Follows the `AirDatepicker` format rules.\n   */\n  @Prop() dateFormat: string = 'yyyy-MM-dd';\n\n  /**\n   * Enables the timepicker functionality (select hours and minutes).\n   */\n  @Prop() timepicker: boolean = false;\n\n  /**\n   * The earliest date that can be selected.\n   */\n  @Prop() minDate?: string | Date;\n\n  /**\n   * The latest date that can be selected.\n   */\n  @Prop() maxDate?: string | Date;\n\n  /**\n   * Disables the input and prevents interaction.\n   */\n  @Prop() disabled: boolean = false;\n\n  /**\n   * Closes the picker automatically after a date is selected.\n   */\n  @Prop() autoClose: boolean = true;\n\n  /**\n   * Shows days from previous/next month in the current month's calendar.\n   */\n  @Prop() showOtherMonths: boolean = true;\n\n  /**\n   * Allows selecting days from previous/next month shown in the current view.\n   */\n  @Prop() selectOtherMonths: boolean = true;\n\n  /**\n   * Controls how the date picker is triggered.\n   * - **`true`**: The picker can be triggered by custom UI elements (provided via a `<slot name=\"trigger\">`).\n   * - **`false`**: A default button input is used to open the picker.\n   *\n   * Defaults to `false`.\n   */\n  @Prop() customPicker: boolean = false;\n\n  /**\n   * Pass a container element if you need the date picker to be appended to a specific element\n   * for styling or positioning (particularly for arrow rendering).\n   * If not provided, it defaults to `this.el`.\n   */\n  @Prop() container?: HTMLElement;\n\n  /**\n   * If `true`, the date picker instance is destroyed and rebuilt each time the `date` prop changes.\n   * This can be useful if you need the picker to fully re-initialize in response to dynamic changes,\n   * but note that it may affect performance if triggered frequently.\n   * Defaults to `false`.\n   */\n  @Prop() forceDestroyOnUpdate: boolean = false;\n\n  /**\n   * If `true`, the component will emit a `dateChanged` event when the selected date becomes empty (null).\n   * Otherwise, empty-date changes will be ignored (no event emitted).\n   *\n   * Defaults to `false`.\n   */\n  @Prop() emitEmptyDate: boolean = false;\n\n  /**\n   * Styles for the trigger container\n   */\n  @Prop() triggerContainerStyle: string = '';\n\n  @State() currentDate: Date | null = null;\n\n  /**\n   * Emitted when the selected date changes.\n   * Returns the selected date as Moment objects.\n   */\n  @Event() dateChanged: EventEmitter<{\n    start: moment.Moment | null;\n    end: moment.Moment | null;\n    dates: Date | Date[];\n  }>;\n\n  /**\n   * Emitted when the date picker gains focus or is opened.\n   */\n  @Event() datePickerFocus: EventEmitter<void>;\n\n  /**\n   * Emitted when the date picker loses focus or is closed.\n   */\n  @Event() datePickerBlur: EventEmitter<void>;\n\n  private datePicker!: AirDatepicker<HTMLElement>;\n  private openDatePickerTimeout?: ReturnType<typeof setTimeout>;\n\n  componentWillLoad() {\n    // Sync initial @Prop to internal state\n    if (this.date) {\n      this.currentDate = this.toValidDate(this.date);\n    }\n  }\n  componentDidLoad() {\n    this.initializeDatepicker();\n  }\n\n  @Watch('date')\n  datePropChanged(newDate: string | Date | null, oldDate: string | Date | null) {\n    if (this.isSameDates(newDate, oldDate)) {\n      return;\n    }\n    this.updatePickerDate(newDate);\n  }\n\n  @Watch('minDate')\n  minDatePropChanged(newVal: string | Date, oldVal: string | Date) {\n    if (!this.datePicker) {\n      return;\n    }\n    if (!this.isSameDates(newVal, oldVal)) {\n      this.datePicker?.update({ minDate: this.toValidDate(newVal) });\n    }\n  }\n\n  @Watch('maxDate')\n  maxDatePropChanged(newVal: string | Date, oldVal: string | Date) {\n    if (!this.isSameDates(newVal, oldVal)) {\n      this.datePicker?.update({ maxDate: this.toValidDate(newVal) });\n    }\n  }\n\n  @Method()\n  async clearDatePicker() {\n    this.datePicker?.clear();\n  }\n\n  private isSameDates(d1: string | Date | null, d2: string | Date | null): boolean {\n    if (!d1 && !d2) return true;\n    if (!d1 || !d2) return false;\n    return moment(d1).isSame(moment(d2), 'day');\n  }\n\n  private toValidDate(value: string | Date | null): Date | null {\n    if (!value) return null;\n    const d = new Date(value);\n    return isNaN(d.getTime()) ? null : d;\n  }\n\n  private updatePickerDate(newDate: string | Date | null) {\n    const valid = this.toValidDate(newDate);\n\n    if (!valid) {\n      // If invalid or null, just clear\n      this.datePicker?.clear();\n      this.currentDate = null;\n      return;\n    }\n\n    // If it's a truly new date, select it\n    if (!this.isSameDates(this.currentDate, valid)) {\n      this.currentDate = valid;\n      if (this.forceDestroyOnUpdate) {\n        this.datePicker.destroy();\n        this.datePicker = null;\n        this.initializeDatepicker();\n      } else {\n        this.datePicker?.selectDate(valid);\n      }\n    }\n  }\n\n  private initializeDatepicker() {\n    if (this.datePicker) return;\n\n    this.datePicker = new AirDatepicker(this.el, {\n      container: this.container,\n      inline: true,\n      selectedDates: this.dates ? this.dates : this.currentDate ? [this.currentDate] : [],\n      multipleDates: this.multipleDates,\n      range: this.range,\n      dateFormat: this.dateFormat,\n      timepicker: this.timepicker,\n      minDate: this.toValidDate(this.minDate) ?? undefined,\n      maxDate: this.toValidDate(this.maxDate) ?? undefined,\n      autoClose: this.autoClose,\n      locale: localeEn,\n      showOtherMonths: this.showOtherMonths,\n      selectOtherMonths: this.selectOtherMonths,\n\n      onHide: () => {\n        this.datePickerBlur.emit();\n      },\n      onShow: () => {\n        this.datePickerFocus.emit();\n      },\n      onSelect: ({ date }) => this.handleDateSelect(date),\n    });\n    // this.datePicker.$datepicker.style.height = '280px';\n    this.datePicker.$datepicker?.classList.add('ir-custom-date-picker__calendar');\n    this.datePicker.$datepicker.style.borderWidth = '0px';\n    this.datePicker.$datepicker.style.setProperty('--adp-cell-background-color-selected', 'var(--wa-color-brand-fill-loud)');\n    this.datePicker.$datepicker.style.setProperty('--adp-cell-background-color-selected-hover', 'var(--wa-color-brand-fill-loud)');\n    this.datePicker.$datepicker.style.setProperty('--adp-background-color-selected-other-month', 'var(--wa-color-brand-fill-normal)');\n    this.datePicker.$datepicker.style.setProperty('--adp-background-color-selected-other-month-focused', 'var(--wa-color-brand-fill-loud)');\n    this.datePicker.$datepicker.style.setProperty('--adp-accent-color', 'var(--wa-color-brand-fill-loud)');\n    this.datePicker.$datepicker.style.setProperty('--adp-day-name-color', 'lab(48.496% 0 0)');\n    this.datePicker.$datepicker.style.setProperty('--adp-padding', '4px !important');\n  }\n  private handleDateSelect(selected: Date | Date[]) {\n    const dates = Array.isArray(selected) ? selected.filter(Boolean) : selected ? [selected] : [];\n\n    if (!dates.length || !(dates[0] instanceof Date)) {\n      if (this.emitEmptyDate) {\n        this.dateChanged.emit({\n          start: null,\n          end: null,\n          dates: selected,\n        });\n      }\n      this.currentDate = null;\n      this.date = null;\n      return;\n    }\n\n    const startDate = dates[0];\n    const endDate = this.range && dates.length > 1 ? dates[1] : startDate;\n\n    this.currentDate = startDate;\n    this.date = startDate;\n    this.dateChanged.emit({\n      start: startDate ? moment(startDate) : null,\n      end: endDate ? moment(endDate) : null,\n      dates: selected,\n    });\n  }\n  disconnectedCallback() {\n    if (this.openDatePickerTimeout) {\n      clearTimeout(this.openDatePickerTimeout);\n    }\n    this.datePicker?.destroy?.();\n  }\n\n  render() {\n    return null;\n  }\n}\n",":host {\n  display: block;\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n.combobox-menu {\n  max-height: 200px;\n  overflow: auto;\n}\n","import { ICountry } from '@/models/IBooking';\nimport { Component, Event, EventEmitter, Fragment, Prop, State, Watch, h } from '@stencil/core';\nimport { NativeWaInput } from '../ir-input/ir-input';\n\n@Component({\n  tag: 'ir-country-picker',\n  styleUrls: ['ir-country-picker.css'],\n  scoped: true,\n})\nexport class IrCountryPicker {\n  /** The input's size. */\n  @Prop({ reflect: true }) size: NativeWaInput['size'];\n\n  @Prop() variant: 'modern' | 'default' = 'default';\n  /**\n   * List of countries to display in the dropdown.\n   */\n  @Prop() countries: ICountry[] = [];\n\n  /**\n   * Currently selected country.\n   */\n  @Prop() country: ICountry;\n\n  /**\n   * Whether to show an error state on the input.\n   */\n  @Prop({ mutable: true }) error: boolean;\n\n  /**\n   * The property-associated country, shown separately if relevant.\n   */\n  @Prop() propertyCountry: ICountry;\n\n  /**\n   * The label to display for the input.\n   */\n  @Prop() label: string;\n\n  /**\n   * Test ID for automated testing.\n   */\n  @Prop() testId: string;\n\n  /**\n   * Whether to automatically validate the input.\n   */\n  @Prop() autoValidate: boolean = false;\n\n  /**\n   * The current input value typed by the user.\n   */\n  @State() inputValue: string;\n\n  /**\n   * The currently selected country object.\n   */\n  @State() selectedCountry: ICountry;\n\n  /**\n   * Filtered list of countries based on the user's input.\n   */\n  @State() filteredCountries: ICountry[] = [];\n\n  /**\n   * Whether the input is currently being used for searching.\n   */\n  @State() searching: boolean = false;\n\n  /**\n   * Event emitted when a country is selected.\n   */\n  @Event() countryChange: EventEmitter<ICountry>;\n\n  private debounceTimeout: NodeJS.Timeout;\n\n  componentWillLoad() {\n    this.filteredCountries = [...this.countries];\n    if (this.country) {\n      this.inputValue = this.country.name;\n      this.selectedCountry = this.country;\n    }\n  }\n\n  @Watch('country')\n  handleCountryChange(newCountry: ICountry, oldCountry: ICountry) {\n    if (newCountry?.id !== oldCountry?.id) {\n      this.inputValue = this.country?.name;\n      this.selectedCountry = newCountry;\n    }\n  }\n  /**\n   * Filters the list of countries based on the current input.\n   */\n  private filterCountries() {\n    if (this.inputValue === '' && this.country) {\n      this.selectCountry(null);\n    }\n    clearTimeout(this.debounceTimeout);\n    this.debounceTimeout = setTimeout(() => {\n      if (!this.inputValue) {\n        this.filteredCountries = [...this.countries];\n      } else {\n        this.filteredCountries = this.countries.filter(c => c.name.toLowerCase().includes(this.inputValue.toLowerCase()));\n      }\n    }, 300);\n  }\n  /**\n   * Selects a country and emits the change event.\n   */\n  private selectCountry(c: ICountry | null) {\n    this.selectedCountry = c;\n    this.inputValue = c?.name;\n    this.filteredCountries = [...this.countries];\n    this.countryChange.emit(c);\n  }\n  /**\n   * Scrolls to the selected country in the dropdown for accessibility.\n   */\n  private scrollToSelected() {\n    setTimeout(() => {\n      const dropdownItem = document.querySelector(`.dropdown-item.active`);\n      if (dropdownItem) {\n        dropdownItem.scrollIntoView({ behavior: 'instant', block: 'center' });\n      }\n    }, 100);\n  }\n  render() {\n    const shouldShowPropertyCountry = this.filteredCountries.length > 0 && this.propertyCountry && (!this.searching || (this.searching && this.inputValue === ''));\n    if (this.variant === 'modern') {\n      return (\n        <ir-picker\n          size={this.size}\n          label={this.label}\n          mode=\"select\"\n          value={this.selectedCountry?.id?.toString()}\n          onCombobox-select={e => {\n            const country = this.filteredCountries.find(c => c.id.toString() === e.detail.item.value);\n            if (!country) {\n              console.warn(`country not found`, e.detail.item);\n              return;\n            }\n            this.selectCountry(country);\n          }}\n        >\n          {this.filteredCountries.map(country => (\n            <ir-picker-item value={country.id?.toString()} label={country.name} key={country.id}>\n              <img src={country.flag} alt={country.name} style={{ aspectRatio: '1', height: '15px', borderRadius: '4px' }} />\n              <p class=\"pl-1 m-0\">{country.name}</p>\n            </ir-picker-item>\n          ))}\n        </ir-picker>\n      );\n    }\n    return (\n      <form class=\"dropdown m-0 p-0\">\n        <ir-input-text\n          onTextChange={e => {\n            if (!this.searching) {\n              this.searching = true;\n            }\n            this.inputValue = e.detail;\n            this.filterCountries();\n          }}\n          testId={this.testId}\n          autoValidate={this.autoValidate}\n          label={this.label}\n          error={this.error}\n          placeholder=\"\"\n          class=\"m-0 p-0\"\n          value={this.inputValue}\n          id=\"dropdownMenuCombobox\"\n          data-toggle=\"dropdown\"\n          aria-haspopup=\"true\"\n          aria-expanded=\"false\"\n          onInputFocus={() => this.scrollToSelected()}\n          onInputBlur={() => {\n            this.searching = false;\n            if (this.filteredCountries.length > 0 && this.inputValue && this.inputValue.trim() !== '') {\n              this.selectCountry(this.filteredCountries[0]);\n            }\n          }}\n        ></ir-input-text>\n\n        <div class=\"dropdown-menu combobox-menu\" aria-labelledby=\"dropdownMenuCombobox\">\n          {shouldShowPropertyCountry && (\n            <Fragment>\n              <button\n                type=\"button\"\n                class={`dropdown-item d-flex align-items-center ${this.selectedCountry?.id === this.propertyCountry.id ? 'active' : ''}`}\n                onClick={() => {\n                  this.selectCountry(this.propertyCountry);\n                }}\n              >\n                <img src={this.propertyCountry.flag} alt={this.propertyCountry.name} style={{ aspectRatio: '1', height: '15px', borderRadius: '4px' }} />\n                <p class=\"pl-1 m-0\">{this.propertyCountry.name}</p>\n              </button>\n              <div class=\"dropdown-divider\"></div>\n            </Fragment>\n          )}\n          {this.filteredCountries?.map(c => (\n            <button\n              key={c.id}\n              type=\"button\"\n              class={`dropdown-item d-flex align-items-center ${this.selectedCountry?.id === c.id ? 'active' : ''}`}\n              onClick={() => {\n                this.selectCountry(c);\n              }}\n            >\n              <img src={c.flag} alt={c.name} style={{ aspectRatio: '1', height: '15px', borderRadius: '4px' }} />\n              <p class=\"pl-1 m-0\">{c.name}</p>\n            </button>\n          ))}\n          {this.filteredCountries?.length === 0 && <p class=\"dropdown-item-text\">Invalid Country</p>}\n        </div>\n      </form>\n    );\n  }\n}\n","/* @import url('../../../../assets/webawesome/component/host.css'); */\n:host {\n  display: flex;\n  --arrow-size: 0.375rem;\n  --max-width: 25rem;\n  --show-duration: 100ms;\n  --hide-duration: 100ms;\n  /* Internal calculated properties */\n  --arrow-diagonal-size: calc((var(--arrow-size) * sin(45deg)));\n  /** Defaults for inherited CSS properties */\n  font-size: var(--wa-font-size-m);\n  line-height: var(--wa-line-height-normal);\n  text-align: start;\n  white-space: normal;\n}\n.ir-date-select__control {\n  width: 100%;\n  display: flex;\n}\n.ir-date-select__calendar {\n  display: flex;\n  flex-direction: column;\n  width: max-content;\n  max-width: var(--max-width);\n  padding: var(--wa-space-m);\n  background-color: var(--wa-color-surface-default);\n  border: var(--wa-panel-border-width) solid var(--wa-color-surface-border);\n  border-radius: var(--wa-panel-border-radius);\n  border-style: var(--wa-panel-border-style);\n  box-shadow: var(--wa-shadow-l);\n  color: var(--wa-color-text-normal);\n  user-select: none;\n  -webkit-user-select: none;\n}\n.ir-date-select__popup {\n  --arrow-size: inherit;\n  --show-duration: inherit;\n  --hide-duration: inherit;\n  pointer-events: auto;\n}\n.ir-date-select__popup::part(arrow) {\n  background-color: var(--wa-color-surface-default);\n  border-top: none;\n  border-left: none;\n  border-bottom: solid var(--wa-panel-border-width) var(--wa-color-surface-border);\n  border-right: solid var(--wa-panel-border-width) var(--wa-color-surface-border);\n  box-shadow: none;\n}\n.ir-date-select__control[aria-disabled='true'] {\n  opacity: 0.5;\n  cursor: not-allowed !important;\n  pointer-events: none;\n}\n.ir-date-select__trigger,\n.ir-date-select__input {\n  width: 100%;\n}\n","import { ClickOutside } from '@/decorators/ClickOutside';\nimport { createSlotManager } from '@/utils/slot';\nimport { Component, Element, Event, EventEmitter, Host, Method, Prop, State, Watch, h } from '@stencil/core';\nimport moment, { Moment } from 'moment';\n\n@Component({\n  tag: 'ir-date-select',\n  styleUrl: 'ir-date-select.css',\n  shadow: true,\n})\nexport class IrDateSelect {\n  @Element() el: HTMLIrDateSelectElement;\n  @Prop() withClear: boolean;\n\n  @Prop() placeholder: string;\n\n  @Prop() label: string;\n\n  @Prop() dates: string[];\n\n  /**\n   * Determines whether the date picker is rendered inline or in a pop-up.\n   * If `true`, the picker is always visible inline.\n   */\n  @Prop() inline: boolean = false;\n\n  /**\n   * The initially selected date; can be a `Date` object or a string recognized by `AirDatepicker`.\n   */\n  @Prop({ mutable: true, reflect: true }) date: string | Date | null = null;\n\n  /**\n   * Enables multiple dates.\n   * If `true`, multiple selection is allowed.\n   * If you pass a number (e.g. 3), that is the maximum number of selectable dates.\n   */\n  @Prop() multipleDates: boolean | number = false;\n\n  /**\n   * Whether the picker should allow range selection (start and end date).\n   */\n  @Prop() range: boolean = false;\n\n  /**\n   * Format for the date as it appears in the input field.\n   * Follows the `AirDatepicker` format rules.\n   */\n  @Prop() dateFormat: string = 'yyyy-MM-dd';\n\n  /**\n   * Enables the timepicker functionality (select hours and minutes).\n   */\n  @Prop() timepicker: boolean = false;\n\n  /**\n   * The earliest date that can be selected.\n   */\n  @Prop() minDate?: string | Date;\n\n  /**\n   * The latest date that can be selected.\n   */\n  @Prop() maxDate?: string | Date;\n\n  /**\n   * Disables the input and prevents interaction.\n   */\n  @Prop() disabled: boolean = false;\n\n  /**\n   * Closes the picker automatically after a date is selected.\n   */\n  @Prop() autoClose: boolean = true;\n\n  /**\n   * Shows days from previous/next month in the current month's calendar.\n   */\n  @Prop() showOtherMonths: boolean = true;\n\n  /**\n   * Allows selecting days from previous/next month shown in the current view.\n   */\n  @Prop() selectOtherMonths: boolean = true;\n\n  /**\n   * Controls how the date picker is triggered.\n   * - **`true`**: The picker can be triggered by custom UI elements (provided via a `<slot name=\"trigger\">`).\n   * - **`false`**: A default button input is used to open the picker.\n   *\n   * Defaults to `false`.\n   */\n  @Prop() customPicker: boolean = false;\n\n  /**\n   * Pass a container element if you need the date picker to be appended to a specific element\n   * for styling or positioning (particularly for arrow rendering).\n   * If not provided, it defaults to `this.el`.\n   */\n  @Prop() container?: HTMLElement;\n\n  /**\n   * If `true`, the date picker instance is destroyed and rebuilt each time the `date` prop changes.\n   * This can be useful if you need the picker to fully re-initialize in response to dynamic changes,\n   * but note that it may affect performance if triggered frequently.\n   * Defaults to `false`.\n   */\n  @Prop() forceDestroyOnUpdate: boolean = false;\n\n  /**\n   * If `true`, the component will emit a `dateChanged` event when the selected date becomes empty (null).\n   * Otherwise, empty-date changes will be ignored (no event emitted).\n   *\n   * Defaults to `false`.\n   */\n  @Prop() emitEmptyDate: boolean = false;\n\n  /**\n   * Styles for the trigger container\n   */\n  @Prop() triggerContainerStyle: string = '';\n\n  @State() isActive: boolean = false;\n  @State() currentDate: Moment;\n  @State() private slotManagerHasSlot = 0;\n  @State() isValid: string;\n\n  @Event() datePickerFocus: EventEmitter<void>;\n  @Event() datePickerBlur: EventEmitter<void>;\n  @Event() dateChanged: EventEmitter<{\n    start: moment.Moment | null;\n    end: moment.Moment | null;\n  }>;\n\n  private static instanceCounter = 0;\n  private popupId: string;\n  private readonly SLOT_NAMES = ['label', 'start', 'end', 'clear-icon', 'hide-password-icon', 'show-password-icon', 'hint'] as const;\n  // Create slot manager with state change callback\n  private slotManager = createSlotManager(\n    null as any, // Will be set in componentWillLoad\n    this.SLOT_NAMES,\n    () => {\n      // Trigger re-render when slot state changes\n      this.slotManagerHasSlot++;\n    },\n  );\n  airDatePickerRef: HTMLIrAirDatePickerElement;\n\n  componentWillLoad() {\n    IrDateSelect.instanceCounter += 1;\n    this.popupId = `ir-date-select-popup-${IrDateSelect.instanceCounter}`;\n    this.slotManager = createSlotManager(this.el, this.SLOT_NAMES, () => {\n      this.slotManagerHasSlot++;\n    });\n    this.slotManager.initialize();\n    if (this.el.hasAttribute('aria-invalid')) {\n      this.isValid = this.el.getAttribute('aria-invalid');\n    }\n  }\n\n  componentDidLoad() {\n    this.slotManager.setupListeners();\n  }\n\n  disconnectedCallback() {\n    this.slotManager.destroy();\n  }\n\n  @Watch('aria-invalid')\n  handleAriaInvalidChange(newVal: string, oldVal: string) {\n    if (newVal !== oldVal) this.isValid = newVal;\n  }\n\n  @Method()\n  async clearDatePicker() {\n    this.airDatePickerRef?.clearDatePicker();\n  }\n\n  @Method()\n  async openDatePicker() {\n    this.isActive = true;\n  }\n\n  @ClickOutside()\n  @Method()\n  async closeDatePicker() {\n    this.isActive = false;\n  }\n\n  private togglePicker() {\n    this.isActive ? this.closeDatePicker() : this.openDatePicker();\n  }\n\n  private handleKeyDown(event: KeyboardEvent) {\n    switch (event.key) {\n      case 'Enter':\n      case ' ':\n        event.preventDefault();\n        this.togglePicker();\n        break;\n      case 'Escape':\n        if (this.isActive) {\n          event.preventDefault();\n          this.closeDatePicker();\n        }\n        break;\n    }\n  }\n\n  private get _label(): string {\n    if (this.range) {\n      return this.dates.map(d => moment(d).format('MMM DD, YYYY')).join('  ');\n    }\n    if (!this.currentDate) {\n      return null;\n    }\n    return this.timepicker ? moment(this.currentDate).format('MMM DD, YYYY, HH:mm') : moment(this.currentDate).format('MMM DD, YYYY');\n  }\n\n  render() {\n    return (\n      <Host\n        class={{\n          'ir-date-select': true,\n          'ir-date-select--active': this.isActive,\n          'ir-date-select--inline': this.inline,\n          'ir-date-select--disabled': this.disabled,\n        }}\n      >\n        <wa-popup arrow part=\"base\" placement=\"bottom\" flip shift auto-size=\"vertical\" auto-size-padding={10} active={this.isActive} class=\"ir-date-select__popup\">\n          {/* Trigger */}\n          <div slot=\"anchor\" part=\"anchor\" class=\"ir-date-select__trigger\">\n            <div\n              part=\"combobox\"\n              class=\"ir-date-select__control\"\n              role=\"combobox\"\n              tabindex={this.disabled ? -1 : 0}\n              aria-haspopup=\"dialog\"\n              aria-expanded={this.isActive ? 'true' : 'false'}\n              aria-controls={this.popupId}\n              aria-disabled={this.disabled ? 'true' : 'false'}\n              aria-label=\"Select date\"\n              onClick={!this.disabled ? this.togglePicker.bind(this) : undefined}\n              onKeyDown={!this.disabled ? this.handleKeyDown.bind(this) : undefined}\n            >\n              <slot name=\"trigger\">\n                <ir-input\n                  disabled={this.disabled}\n                  class=\"ir-date-select__input\"\n                  placeholder={this.placeholder}\n                  withClear={this.withClear}\n                  tabIndex={!this.customPicker && !this.disabled ? 0 : undefined}\n                  aria-expanded={!this.customPicker ? String(this.isActive) : undefined}\n                  aria-disabled={this.disabled ? 'true' : undefined}\n                  aria-invalid={this.isValid}\n                  readonly\n                  defaultValue={this._label}\n                  label={this.label}\n                  value={this._label}\n                >\n                  {this.slotManager.hasSlot('label') && <slot name=\"label\" slot=\"label\"></slot>}\n                  {this.slotManager.hasSlot('start') && <slot name=\"start\" slot=\"start\"></slot>}\n                  {this.slotManager.hasSlot('end') && <slot name=\"end\" slot=\"end\"></slot>}\n                  {this.slotManager.hasSlot('clear-icon') && <slot name=\"clear-icon\" slot=\"clear-icon\"></slot>}\n                  {this.slotManager.hasSlot('hint') && <slot name=\"hint\" slot=\"hint\"></slot>}\n                </ir-input>\n              </slot>\n            </div>\n          </div>\n\n          {/* Popup */}\n          <div part=\"body\" id={this.popupId} class=\"ir-date-select__calendar\" role=\"dialog\" aria-modal=\"false\" aria-label=\"Date selection dialog\">\n            <ir-air-date-picker\n              ref={el => (this.airDatePickerRef = el)}\n              withClear={this.withClear}\n              placeholder={this.placeholder}\n              label={this.label}\n              dates={this.dates}\n              inline={this.inline}\n              date={this.date}\n              multipleDates={this.multipleDates}\n              range={this.range}\n              dateFormat={this.dateFormat}\n              timepicker={this.timepicker}\n              minDate={this.minDate}\n              maxDate={this.maxDate}\n              disabled={this.disabled}\n              autoClose={this.autoClose}\n              showOtherMonths={this.showOtherMonths}\n              selectOtherMonths={this.selectOtherMonths}\n              customPicker={this.customPicker}\n              container={this.container}\n              forceDestroyOnUpdate={this.forceDestroyOnUpdate}\n              emitEmptyDate={this.emitEmptyDate}\n              onDateChanged={e => {\n                e.stopImmediatePropagation();\n                e.stopPropagation();\n                this.currentDate = e.detail?.start;\n                this.dateChanged.emit(e.detail);\n                const shouldClose = this.autoClose && (!this.range || (this.range && (e.detail.dates as any).length > 1));\n                if (shouldClose) {\n                  this.togglePicker();\n                }\n              }}\n            />\n            <slot></slot>\n          </div>\n        </wa-popup>\n      </Host>\n    );\n  }\n}\n","@import url('../../../assets/webawesome/utilities/size.css');\n:host {\n  box-sizing: border-box;\n  width: 100%;\n  margin: 0 !important;\n  padding: 0 !important;\n}\n.sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0 0 0 0);\n  white-space: nowrap;\n  border: 0;\n}\n.mobile-input__logo {\n  height: var(--wa-font-size-s);\n  aspect-ratio: 4/3;\n  border-radius: 3px;\n}\n.mobile-input__required {\n  color: #f3676c !important;\n}\n.mobile-input__prefix-dropdown::part(menu) {\n  height: 300px;\n  /* padding-top: 0; */\n}\n.mobile-input__container {\n  display: flex;\n  align-items: stretch;\n  width: 100%;\n  margin-top: 0.5rem;\n}\n.mobile-input__container--disabled {\n  opacity: 0.7;\n}\n.mobile-input__phone-country {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n.mobile-input__phone {\n  flex: 1 1 0%;\n}\n.mobile-input__phone {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.mobile-input__phone--invalid {\n  border-color: var(--wa-color-danger-600);\n}\n.mobile-input__label {\n  display: inline-block;\n  position: relative;\n  color: var(--wa-form-control-label-color);\n  font-weight: var(--wa-form-control-label-font-weight);\n  line-height: var(--wa-form-control-label-line-height);\n  margin-block-start: 0.5em !important;\n}\n.mobile-input__description {\n  margin: 0.25rem 0 0.5rem;\n  color: var(--wa-color-neutral-500);\n  font-size: 0.875rem;\n}\n.mobile-input__error {\n  margin: 0.5rem 0 0;\n  color: var(--wa-color-danger-600);\n  font-size: 0.875rem;\n}\n.mobile-input__required {\n  margin-left: 0.25rem;\n  color: var(--wa-color-danger-600);\n}\n.mobile-input__trigger,\n.mobile-input__phone {\n  padding: 0 var(--wa-form-control-padding-inline);\n  color: var(--wa-form-control-value-color);\n  font-size: var(--wa-form-control-value-size);\n  font-family: inherit;\n  font-weight: var(--wa-form-control-value-font-weight);\n  line-height: var(--wa-form-control-value-line-height);\n  vertical-align: middle;\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  box-sizing: border-box;\n  background-color: var(--wa-form-control-background-color);\n  border-color: var(--wa-form-control-border-color);\n  border-style: var(--wa-form-control-border-style);\n  border-width: var(--wa-form-control-border-width);\n  border-radius: var(--wa-form-control-border-radius);\n  transition: background-color var(--wa-transition-normal), border var(--wa-transition-normal), all var(--wa-transition-normal), outline var(--wa-transition-fast);\n  transition-timing-function: var(--wa-transition-easing);\n}\n.mobile-input__container {\n  height: var(--wa-form-control-height);\n}\n.mobile-input__trigger {\n  height: 100%;\n}\n.mobile-input__trigger:focus,\n.mobile-input__phone:focus {\n  outline: none;\n}\n.mobile-input__trigger:disabled,\n.mobile-input__phone:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.mobile-input__trigger:focus-visible,\n.mobile-input__phone:focus-visible {\n  outline: var(--wa-focus-ring);\n  outline-offset: var(--wa-focus-ring-offset);\n  z-index: 2;\n}\n.mobile-input__phone::placeholder {\n  color: var(--wa-form-control-placeholder-color);\n  user-select: none;\n  -webkit-user-select: none;\n}\n.mobile-input__trigger {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  border-right: 0;\n  cursor: pointer;\n}\n.mobile-input__phone {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.mobile-input__phone {\n  cursor: text;\n}\n.mobile-input__trigger[aria-expanded='true'] {\n  outline: var(--wa-focus-ring);\n  outline-offset: var(--wa-focus-ring-offset);\n  z-index: 2;\n}\n.mobile-input__trigger[aria-expanded='true'] .mobile-input__phone-country-caret {\n  transform: rotate(-180deg);\n}\n\n.mobile-input__country-name {\n  flex: 1;\n}\n.mobile-input__country-prefix {\n  color: var(--wa-color-neutral-500);\n}\n.mobile-input__trigger[aria-invalid='true'] {\n  border-color: var(--wa-color-danger-border-loud);\n  outline-color: var(--wa-color-danger-border-loud);\n  border-width: 2px;\n}\n.phone__input {\n  flex: 1 1 0%;\n  width: 100%;\n}\n.phone__input:dir(ltr)::part(base) {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.phone__input:dir(rtl)::part(base) {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n}\n","import { Component, Element, Event, EventEmitter, Host, Prop, State, Watch, h } from '@stencil/core';\nimport { ICountry } from '@/models/IBooking';\nimport { NativeWaInput } from '../ir-input/ir-input';\n\nexport interface IrMobileInputChangeDetail {\n  country: ICountry;\n  value: string;\n  formattedValue: string;\n}\n\n@Component({\n  tag: 'ir-mobile-input',\n  styleUrls: ['ir-mobile-input.css'],\n  shadow: true,\n})\nexport class IrMobileInput {\n  @Element() el: HTMLIrMobileInputElement;\n  private static idCounter = 0;\n  private readonly componentId = ++IrMobileInput.idCounter;\n  private readonly inputId = `ir-mobile-input-${this.componentId}`;\n  private readonly labelId = `${this.inputId}-label`;\n  private readonly descriptionId = `${this.inputId}-description`;\n  private readonly errorId = `${this.inputId}-error`;\n  private readonly countryStatusId = `${this.inputId}-country-status`;\n\n  /** The input's size. */\n  @Prop({ reflect: true }) size: NativeWaInput['size'] = 'small';\n  /** Visible label for the phone input */\n  @Prop() label: string = 'Phone number';\n  /** Name attribute passed to the native input */\n  @Prop() name: string = 'phone';\n  /** Placeholder shown when the input is empty */\n  @Prop() placeholder: string = 'Enter phone number';\n  /** Help text rendered under the label */\n  @Prop() description?: string;\n  /** Error message announced to screen readers */\n  @Prop() error?: string;\n  /** Native required attribute */\n  @Prop({ reflect: true }) required: boolean = false;\n  /** Whether the control is disabled */\n  @Prop({ reflect: true }) disabled: boolean = false;\n  /** Selected country ISO code. Component updates this prop when a new country is chosen */\n  @Prop({ mutable: true, reflect: true }) countryCode?: string;\n  /** Input value without formatting. Component keeps this prop in sync */\n  @Prop({ mutable: true, reflect: true }) value: string = '';\n  /**\n   * Country list, used to populate prefix and dropdown.\n   * If not provided, fetched from the booking service.\n   */\n  @Prop({ mutable: true }) countries: ICountry[] = [];\n\n  @Event({ eventName: 'mobile-input-change' }) mobileInputChange!: EventEmitter<IrMobileInputChangeDetail>;\n  @Event({ eventName: 'mobile-input-country-change' }) mobileInputCountryChange!: EventEmitter<ICountry>;\n\n  @State() selectedCountry?: ICountry;\n  @State() isInvalid: boolean = false;\n\n  componentWillLoad() {\n    const resolvedCountry: ICountry | null = this.resolveCountry(this.countryCode) ?? null;\n    if (!resolvedCountry) {\n      return;\n    }\n    if (this.el.hasAttribute('aria-invalid')) {\n      this.isInvalid = Boolean(JSON.parse(this.el.getAttribute('aria-invalid')));\n    }\n    this.selectedCountry = resolvedCountry;\n    this.countryCode = resolvedCountry?.code;\n    this.value = this.value ?? '';\n  }\n\n  @Watch('countryCode')\n  protected handleCountryCodeChange(nextCode?: string) {\n    const resolvedCountry = this.resolveCountry(nextCode);\n    if (resolvedCountry && resolvedCountry !== this.selectedCountry) {\n      this.selectedCountry = resolvedCountry;\n    }\n  }\n\n  @Watch('selectedCountry')\n  protected handleSelectedCountryChange(next?: ICountry, previous?: ICountry) {\n    if (!next) return;\n    if (!previous || next.code !== previous.code) {\n      if (this.countryCode !== next.code) {\n        this.countryCode = next.code;\n      }\n      this.mobileInputCountryChange.emit(next);\n    }\n  }\n\n  @Watch('value')\n  protected handleValueChange(newValue: string, oldValue: string) {\n    if (newValue !== oldValue) {\n      this.value = newValue ?? '';\n    }\n  }\n\n  @Watch('aria-invalid')\n  handleAriaInvalidChange(newValue: string, oldValue: string) {\n    if (newValue !== oldValue) {\n      this.isInvalid = Boolean(newValue);\n    }\n  }\n\n  private resolveCountry(code?: string) {\n    if (!code) return undefined;\n    return this.countries.find(country => country.code.toUpperCase() === code.toUpperCase());\n  }\n  // private emitChange() {\n  //   if (!this.selectedCountry) return;\n  //   this.mobileInputChange.emit({\n  //     country: this.selectedCountry,\n  //     value: this.value ?? '',\n  //     formattedValue: this.value ?? '',\n  //   });\n  // }\n\n  private handleCountrySelect = (event: CustomEvent) => {\n    if (this.disabled) return;\n    event.stopPropagation();\n    event.stopImmediatePropagation();\n    const value = (event.detail as any)?.item?.value;\n    const selected = this.countries.find(country => country.id.toString() === `${value}`);\n    if (selected) {\n      this.selectedCountry = selected;\n    }\n    requestAnimationFrame(() => {\n      const innerInput = this.el.shadowRoot?.querySelector('ir-input')?.shadowRoot?.querySelector('input') as HTMLInputElement | undefined;\n      innerInput?.focus();\n    });\n  };\n\n  // private handlePlainInput = (event: Event) => {\n  //   const { value } = event.target as HTMLInputElement;\n  //   this.mobileInputChange.emit({ formattedValue: value, value, country: this.selectedCountry });\n  //   if (this.mask) return;\n  //   const nextValue = (event.target as HTMLInputElement)?.value ?? '';\n  //   if (nextValue !== this.value) {\n  //     this.value = nextValue;\n  //     this.displayValue = nextValue;\n  //     this.emitChange();\n  //   }\n  // };\n\n  render() {\n    const describedByIds = [this.description ? this.descriptionId : null, this.error ? this.errorId : null].filter(Boolean).join(' ') || undefined;\n\n    return (\n      <Host size={'small'} role=\"group\" aria-labelledby={this.labelId} aria-describedby={describedByIds}>\n        <label class=\"mobile-input__label\" id={this.labelId} htmlFor={this.inputId}>\n          {this.label}\n          {this.required ? (\n            <span class=\"mobile-input__required\" aria-hidden=\"true\">\n              *\n            </span>\n          ) : null}\n        </label>\n        {this.description ? (\n          <p id={this.descriptionId} class=\"mobile-input__description\">\n            {this.description}\n          </p>\n        ) : null}\n        <div class={{ 'mobile-input__container': true, 'mobile-input__container--disabled': this.disabled }}>\n          <wa-dropdown\n            onwa-show={e => {\n              e.stopPropagation();\n              e.stopImmediatePropagation();\n            }}\n            onwa-hide={e => {\n              e.stopPropagation();\n              e.stopImmediatePropagation();\n            }}\n            onwa-select={this.handleCountrySelect}\n            class=\"mobile-input__prefix-dropdown\"\n          >\n            <button\n              aria-invalid={String(this.isInvalid && !this.selectedCountry)}\n              slot=\"trigger\"\n              type=\"button\"\n              class=\"mobile-input__trigger\"\n              disabled={this.disabled}\n              aria-haspopup=\"listbox\"\n              aria-label=\"Change country calling code\"\n            >\n              <div class=\"mobile-input__phone-country\" style={{ marginRight: '1rem' }}>\n                {this.selectedCountry ? <img src={this.selectedCountry?.flag} alt={this.selectedCountry?.name} class=\"mobile-input__logo\" /> : <span>Select</span>}\n                {/* <span aria-hidden=\"true\">{this.selectedCountry?.phone_prefix}</span> */}\n              </div>\n              <wa-icon class=\"mobile-input__phone-country-caret\" name=\"chevron-down\" aria-hidden=\"true\"></wa-icon>\n            </button>\n            <span class=\"sr-only\" id={this.countryStatusId} aria-live=\"polite\">\n              {this.selectedCountry ? `Selected country ${this.selectedCountry.name} ${this.selectedCountry.phone_prefix}` : 'Select a country'}\n            </span>\n            {this.countries.map(country => (\n              <wa-dropdown-item value={country.id.toString()}>\n                <div class=\"mobile-input__phone-country\" role=\"option\" aria-selected={this.selectedCountry?.id === country.id ? 'true' : 'false'}>\n                  <img src={country.flag} alt={country.name} class=\"mobile-input__logo\" />\n                  <span class=\"mobile-input__country-name\">{country.name}</span>\n                  <span class=\"mobile-input__country-prefix\">{country.phone_prefix}</span>\n                </div>\n              </wa-dropdown-item>\n            ))}\n          </wa-dropdown>\n          <ir-input\n            aria-invalid={String(this.isInvalid && (this.value ?? '').length < 4)}\n            type=\"tel\"\n            inputMode=\"tel\"\n            autocomplete=\"off\"\n            disabled={this.disabled}\n            placeholder={this.placeholder}\n            defaultValue={this.value}\n            value={this.value}\n            class=\"phone__input\"\n            onText-change={e => {\n              const value = e.detail;\n              this.value = value;\n              this.mobileInputChange.emit({ formattedValue: value, value, country: this.selectedCountry });\n            }}\n          >\n            {this.selectedCountry && <span slot=\"start\">{this.selectedCountry?.phone_prefix}</span>}\n          </ir-input>\n        </div>\n        {this.error ? (\n          <p id={this.errorId} class=\"mobile-input__error\" role=\"alert\">\n            {this.error}\n          </p>\n        ) : null}\n      </Host>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}