import{a as t}from"./p-bf44a732.js";import{B as r}from"./p-4c059a2d.js";import{e,C as o,B as a}from"./p-c5a1fae3.js";import{z as n}from"./p-b859bcd5.js";import{c as s}from"./p-c226aa13.js";class c{constructor(){this.bookingService=new r}async reallocateEvent(r,o,a,n,s){try{console.log(r,o,a,n);const{data:c}=await t.post(`/ReAllocate_Exposed_Room`,{pool:r,destination_pr_id:o,from_date:a,to_date:n,extras:e,rateplan_id:s});if(c.ExceptionMsg!==""){throw new Error(c.ExceptionMsg)}console.log(c);return c}catch(t){console.error(t);throw new Error(t)}}async deleteEvent(r){try{const{data:e}=await t.post(`/UnBlock_Exposed_Unit`,{POOL:r});if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}return e.My_Result}catch(t){console.log(t);throw new Error(t)}}async updateBlockedEvent(t){try{const r=o(+t.RELEASE_AFTER_HOURS);await this.deleteEvent(t.POOL);const e=await this.bookingService.blockUnit(Object.assign({from_date:this.formatDate(t.FROM_DATE),to_date:this.formatDate(t.TO_DATE),pr_id:t.PR_ID,STAY_STATUS_CODE:t.OUT_OF_SERVICE?"004":t.RELEASE_AFTER_HOURS===0?"002":"003",DESCRIPTION:t.RELEASE_AFTER_HOURS||"",NOTES:t.OPTIONAL_REASON||""},r));return e}catch(t){console.error(t);throw new Error(t)}}formatDate(t){return t.split("/").join("-")}}n.object({code:n.string(),id:n.number(),symbol:n.string()});const i=n.object({NIGHTS:n.number(),PCT:n.number(),REVENUE:n.number(),SOURCE:n.string(),PROPERTY_ID:n.number(),PROPERTY_NAME:n.string(),currency:n.string()});const d=i.extend({last_year:i.optional()});const _=n.array(d).nullable();const l=n.object({AC_ID:n.string().optional(),BOOK_CASE:n.string().min(1),FROM_DATE:n.string().regex(/^\d{4}-\d{2}-\d{2}$/,"Use YYYY-MM-DD format"),TO_DATE:n.string().regex(/^\d{4}-\d{2}-\d{2}$/,"Use YYYY-MM-DD format"),WINDOW:n.coerce.number().int().nonnegative(),is_export_to_excel:n.coerce.boolean().optional().default(false),LIST_AC_ID:n.array(n.number()).nullable()});l.extend({include_previous_year:n.boolean()});const w=t=>_.parse(t);const E=t=>l.parse(t);const p=n.object({property_id:n.number(),value:n.string()});const y=n.array(n.object({id:n.number(),name:n.string()})).nullable();const u=n.object({property_id:n.number(),room_identifier:n.string(),value:n.string()});class f{async getExposedProperty(r){var e,o;try{const{data:a}=await t.post(`/Get_Exposed_Property`,r);if(a.ExceptionMsg!==""){throw new Error(a.ExceptionMsg)}const n=a.My_Result;s.property=Object.assign({},n);s.adultChildConstraints=n.adult_child_constraints;s.allowedBookingSources=n.allowed_booking_sources;s.allowed_payment_methods=n.allowed_payment_methods;s.currency=n.currency;s.is_vacation_rental=n.is_vacation_rental;s.pickup_service=n.pickup_service;s.max_nights=n.max_nights;s.roomsInfo=n.roomtypes;s.taxes=n.taxes;s.id=n.id;s.country=n.country;s.name=n.name;s.is_automatic_check_in_out=n.is_automatic_check_in_out;s.tax_statement=n.tax_statement;s.is_frontdesk_enabled=n.is_frontdesk_enabled;s.is_pms_enabled=n.is_pms_enabled;const c=(o=(e=n===null||n===void 0?void 0:n.time_constraints)===null||e===void 0?void 0:e.check_out_till)===null||o===void 0?void 0:o.split(":");s.checkin_checkout_hours={offset:n.city.gmt_offset,hour:Number(c[0]||0),minute:Number(c[1]||0)};return a}catch(t){console.log(t);throw new Error(t)}}async setPropertyCalendarExtra(r){const e=p.parse(r);const{data:o}=await t.post("/Set_Property_Calendar_Extra",e);if(o.ExceptionMsg!==""){throw new Error(o.ExceptionMsg)}return o.My_Result}async setRoomCalendarExtra(r){const e=u.parse(r);const{data:o}=await t.post("/Set_Room_Calendar_Extra",e);if(o.ExceptionMsg!==""){throw new Error(o.ExceptionMsg)}return o.My_Result}async getChannelSales(r){const e=E(r);const{data:o}=await t.post("/Get_Channel_Sales",e);if(o.ExceptionMsg!==""){throw new Error(o.ExceptionMsg)}if(r.is_export_to_excel){a(o.My_Params_Get_Channel_Sales.Link_excel)}return w(o.My_Result)}async getExposedAllowedProperties(){const{data:r}=await t.post("/Get_Exposed_Allowed_Properties",{});if(r.ExceptionMsg!==""){throw new Error(r.ExceptionMsg)}return y.parse(r.My_Result)}async getCountrySales(r){const{data:e}=await t.post("/Get_Country_Sales",r);if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}if(r.is_export_to_excel){a(e.My_Params_Get_Country_Sales.Link_excel)}return e.My_Result}async getDailyRevenueReport(r){const{data:e}=await t.post("/Get_Daily_Revenue_Report",r);if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}if(r.is_export_to_excel){a(e.My_Params_Get_Daily_Revenue_Report.Link_excel)}return e.My_Result}async setExposedCleaningFrequency(r){const{data:e}=await t.post("/Set_Exposed_Cleaning_Frequency",r);if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}return e.My_Result}async getMonthlyStats(r){const{data:e}=await t.post("/Get_Monthly_Stats",r);if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}if(r.is_export_to_excel){a(e.My_Params_Get_Monthly_Stats.Link_excel)}return e.My_Result}}export{c as E,f as P};
//# sourceMappingURL=p-a15b6739.js.map