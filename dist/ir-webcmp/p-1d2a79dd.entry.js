import{r as t,h as s,H as i}from"./p-b4b99085.js";import{T as e}from"./p-7eb52d4c.js";import{R as r}from"./p-7f3cdfe0.js";import{l as n}from"./p-2fcb9a1f.js";import"./p-bf44a732.js";import"./p-a66990e0.js";import"./p-41fabaeb.js";const l=".sc-ir-sales-by-country-h{display:block}";const a=l;const o=class{constructor(s){t(this,s);this.language="";this.ticket="";this.isLoading=true;this.token=new e;this.roomService=new r}ticketChanged(t,s){if(t===s){return}this.token.setToken(this.ticket);this.initializeApp()}async initializeApp(){try{this.isLoading=true;let t=this.propertyid;if(!this.propertyid&&!this.p){throw new Error("Property ID or username is required")}if(!t){console.log(t);const s=await this.roomService.getExposedProperty({id:0,aname:this.p,language:this.language,is_backend:true,include_units_hk_status:true});t=s.My_Result.id}this.property_id=t;const s=[this.roomService.fetchLanguage(this.language)];if(this.propertyid){s.push(this.roomService.getExposedProperty({id:this.propertyid,language:this.language,is_backend:true,include_units_hk_status:true}))}await Promise.all(s)}catch(t){console.log(t)}finally{this.isLoading=false}}render(){if(this.isLoading){return s("ir-loading-screen",null)}return s(i,null,s("ir-toast",null),s("ir-interceptor",null),s("section",{class:"p-2 d-flex flex-column",style:{gap:"1rem"}},s("div",{class:"d-flex align-items-center justify-content-between"},s("h3",{class:"mb-1 mb-md-0"},"Sales by Country"),s("ir-button",{size:"sm",btn_color:"outline",text:n.entries.Lcz_Export,onClickHandler:t=>{t.stopImmediatePropagation();t.stopPropagation()},btnStyle:{height:"100%"},iconPosition:"right",icon_name:"file",icon_style:{"--icon-size":"14px"}})),s("div",{class:"d-flex flex-column flex-lg-row mt-1 ",style:{gap:"1rem"}},s("ir-sales-filters",null),s("ir-sales-table",{class:"card"}))))}static get watchers(){return{ticket:["ticketChanged"]}}};o.style=a;export{o as ir_sales_by_country};
//# sourceMappingURL=p-1d2a79dd.entry.js.map