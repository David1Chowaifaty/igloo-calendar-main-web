{"version":3,"names":["irDeleteModalCss","IrDeleteModalStyle0","IrDeleteModal","constructor","hostRef","this","isOpen","selectedId","loadingBtn","housekeepingService","HouseKeepingService","closeModal","modalClosed","emit","openModal","btnClickHandler","event","target","name","editExposedHKM","user","newAssignedUnits","assigned_units","map","u","hkm_id","is_to_assign","unit_id","id","manageExposedAssignedUnitToHKM","housekeeping_store","default_properties","property_id","_a","__rest$1","resetData","error","console","render","h","class","onClick","tabindex","length","locales","entries","Lcz_AssignUnitsTo","Lcz_ConfirmDeletion","style","cursor","slot","xmlns","height","width","viewBox","fill","d","firstOption","Lcz_nobody","selectedValue","onSelectChange","e","detail","LabelAvailable","data","hk_criteria","housekeepers","filter","hk","m","value","toString","text","icon","btn_color","btn_block","Lcz_Cancel","isLoading","Lcz_Confirm","irHkTeamCss","IrHkTeamStyle0","IrHkTeam","currentTrigger","renderAssignedUnits","type","Lcz_Assign","Lcz_Edit","renderCurrentTrigger","isEdit","handleCloseSideBar","stopImmediatePropagation","stopPropagation","handleDeletion","deletionTimout","setTimeout","modal","el","querySelector","disconnectedCallback","clearTimeout","assigned","total","un_assigned","units_assignments","Host","label","Lcz_HousekeepingTeam","justifyContent","Lcz_TotalUnits","Lcz_Assigned","Lcz_Unassigned","Lcz_AsAnOption","Lcz_Name","Lcz_Mobile","Lcz_Username","Lcz_Note","Lcz_UnitsAssigned","title","Lcz_CreateHousekeeper","onIconClickHandler","key","phone_prefix","mobile","username","note","Lcz_EditHousekeeper","__rest","Lcz_DeleteHousekeeper","showCloseButton","open","onIrSidebarToggle","irHkUnassignedUnitsCss","IrHkUnassignedUnitsStyle0","IrHkUnassignedUnits","renderAgain","assignedUnits","Map","assignUnit","hk_id","checked","userUnit","find","unit","delete","set","assignment","has","assignUnits","values","closeSideBar","renderRooms","unassigned_units","calendar_data","roomsInfo","roomType","is_active","physicalrooms","physical_room","taken","housekeeper","assignedRoom","get","_b","onCheckChange","_c","displayContext","onClickHandler","btn_styles","isRequestPending","bind","validateForm","rules","isValid","errors","fieldName","rulesForField","required","undefined","push","minLength","maxLength","minValue","maxValue","pattern","test","String","custom","irHkUserCss","IrHkUserStyle0","IrHkUser","userInfo","password","token","language","componentWillLoad","getDefaultProperties","Object","assign","log","updateUserField","addUser","validationRules","validationResult","handleBlur","usermame","generateUserName","Lcz_EditHousekeeperProfile","Lcz_CreateHousekeeperProfile","placeholder","onTextChange","onInputBlur","_d","default_country","country","_e","disabled","Lcz_Password","Lcz_MinimumCharacter","_g","_f","Lcz_Save"],"sources":["src/components/ir-housekeeping/ir-delete-modal/ir-delete-modal.css?tag=ir-delete-modal&encapsulation=scoped","src/components/ir-housekeeping/ir-delete-modal/ir-delete-modal.tsx","src/components/ir-housekeeping/ir-hk-team/ir-hk-team.css?tag=ir-hk-team&encapsulation=scoped","src/components/ir-housekeeping/ir-hk-team/ir-hk-team.tsx","src/components/ir-housekeeping/ir-hk-unassigned-units/ir-hk-unassigned-units.css?tag=ir-hk-unassigned-units&encapsulation=scoped","src/components/ir-housekeeping/ir-hk-unassigned-units/ir-hk-unassigned-units.tsx","src/utils/validation.ts","src/components/ir-housekeeping/ir-hk-user/ir-hk-user.css?tag=ir-hk-user&encapsulation=scoped","src/components/ir-housekeeping/ir-hk-user/ir-hk-user.tsx"],"sourcesContent":[".backdropModal {\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  z-index: 1000;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100vh;\r\n  width: 100%;\r\n  opacity: 0;\r\n  transition: opacity 0.3s ease-in-out;\r\n  pointer-events: none;\r\n}\r\n.backdropModal.active {\r\n  cursor: pointer;\r\n  opacity: 1 !important;\r\n  pointer-events: all;\r\n}\r\n\r\n.ir-modal[data-state='opened'] {\r\n  opacity: 1;\r\n  /* transform: translate(-50%, 0); */\r\n  visibility: visible; /* Make modal visible */\r\n  pointer-events: all; /* Restore pointer events */\r\n  transition: all 0.3s ease-in-out;\r\n}\r\n.ir-alert-content {\r\n  padding: 10px;\r\n  background: white;\r\n  border-radius: 5px;\r\n}\r\n.modal {\r\n  z-index: 1001 !important;\r\n}\r\n\r\n.modal-dialog {\r\n  height: 100vh;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.ir-alert-footer {\r\n  gap: 10px;\r\n}\r\n.exit-icon {\r\n  position: absolute;\r\n  right: 10px;\r\n  top: 5px;\r\n  margin: 0;\r\n}\r\n.ir-modal {\r\n  position: fixed;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  z-index: 1050;\r\n  width: 90%;\r\n  max-width: 32rem;\r\n  overflow: hidden;\r\n  outline: 0;\r\n  opacity: 0;\r\n  transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;\r\n  visibility: hidden;\r\n  pointer-events: none;\r\n}\r\n\r\n.ir-modal.active {\r\n  opacity: 1;\r\n  transform: translate(-50%, 0);\r\n  visibility: visible; /* Make modal visible */\r\n  pointer-events: all; /* Restore pointer events */\r\n  transition: all 0.3s ease-in-out;\r\n}\r\n","import { Component, EventEmitter, Listen, Method, Prop, State, h, Event } from '@stencil/core';\r\nimport housekeeping_store from '@/stores/housekeeping.store';\r\nimport { HouseKeepingService } from '@/services/housekeeping.service';\r\nimport { IHouseKeepers } from '@/models/housekeeping';\r\nimport locales from '@/stores/locales.store';\r\n\r\n@Component({\r\n  tag: 'ir-delete-modal',\r\n  styleUrl: 'ir-delete-modal.css',\r\n  scoped: true,\r\n})\r\nexport class IrDeleteModal {\r\n  @Prop() user: IHouseKeepers;\r\n\r\n  @State() isOpen: boolean = false;\r\n  @State() selectedId: string = '';\r\n  @State() loadingBtn: 'confirm' | null = null;\r\n\r\n  @Event() modalClosed: EventEmitter<null>;\r\n  @Event() resetData: EventEmitter<string>;\r\n\r\n  private housekeepingService = new HouseKeepingService();\r\n\r\n  @Method()\r\n  async closeModal() {\r\n    this.isOpen = false;\r\n    this.modalClosed.emit(null);\r\n  }\r\n  @Method()\r\n  async openModal() {\r\n    this.isOpen = true;\r\n  }\r\n\r\n  @Listen('clickHandler')\r\n  async btnClickHandler(event: CustomEvent) {\r\n    let target = event.target as HTMLInputElement;\r\n    let name = target.name;\r\n    try {\r\n      if (name === 'confirm') {\r\n        this.loadingBtn = 'confirm';\r\n        if (this.selectedId === '') {\r\n          await this.housekeepingService.editExposedHKM(this.user, true);\r\n        } else {\r\n          const newAssignedUnits = this.user.assigned_units.map(u => ({ hkm_id: +this.selectedId, is_to_assign: true, unit_id: u.id }));\r\n          await this.housekeepingService.manageExposedAssignedUnitToHKM(housekeeping_store.default_properties.property_id, newAssignedUnits);\r\n          const { assigned_units, is_soft_deleted, is_active, ...user } = this.user;\r\n          await this.housekeepingService.editExposedHKM(user, true);\r\n        }\r\n        this.resetData.emit(null);\r\n      }\r\n      if (name === 'cancel') {\r\n        this.closeModal();\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      if (this.loadingBtn) {\r\n        this.loadingBtn = null;\r\n        this.closeModal();\r\n      }\r\n    }\r\n  }\r\n  render() {\r\n    if (!this.user) {\r\n      return null;\r\n    }\r\n    return [\r\n      <div\r\n        class={`backdropModal ${this.isOpen ? 'active' : ''}`}\r\n        onClick={() => {\r\n          this.closeModal();\r\n        }}\r\n      ></div>,\r\n      <div data-state={this.isOpen ? 'opened' : 'closed'} class={`ir-modal`} tabindex=\"-1\">\r\n        {this.isOpen && (\r\n          <div class={`ir-alert-content p-2`}>\r\n            <div class={`ir-alert-header align-items-center border-0 py-0 m-0 `}>\r\n              <p class=\"p-0 my-0 mb-1\">{this.user.assigned_units.length > 0 ? locales.entries.Lcz_AssignUnitsTo : locales.entries.Lcz_ConfirmDeletion}</p>\r\n              <ir-icon\r\n                class=\"exit-icon\"\r\n                style={{ cursor: 'pointer' }}\r\n                onClick={() => {\r\n                  this.closeModal();\r\n                }}\r\n              >\r\n                <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"10.5\" viewBox=\"0 0 384 512\">\r\n                  <path\r\n                    fill=\"currentColor\"\r\n                    d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\"\r\n                  />\r\n                </svg>\r\n              </ir-icon>\r\n            </div>\r\n            {this.user.assigned_units.length > 0 && (\r\n              <div class=\"modal-body text-left p-0 mb-2\">\r\n                <ir-select\r\n                  firstOption={locales.entries.Lcz_nobody}\r\n                  selectedValue={this.selectedId}\r\n                  onSelectChange={e => (this.selectedId = e.detail)}\r\n                  LabelAvailable={false}\r\n                  data={housekeeping_store.hk_criteria.housekeepers\r\n                    .filter(hk => hk.id !== this.user.id)\r\n                    .map(m => ({\r\n                      value: m.id.toString(),\r\n                      text: m.name,\r\n                    }))}\r\n                ></ir-select>\r\n              </div>\r\n            )}\r\n\r\n            <div class={`ir-alert-footer border-0 d-flex justify-content-end`}>\r\n              <ir-button icon={''} btn_color={'secondary'} btn_block text={locales.entries.Lcz_Cancel} name={'cancel'}></ir-button>\r\n              <ir-button isLoading={this.loadingBtn === 'confirm'} icon={''} btn_color={'primary'} btn_block text={locales.entries.Lcz_Confirm} name={'confirm'}></ir-button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>,\r\n    ];\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\nth,\r\ntd {\r\n  text-align: left !important;\r\n  width: fit-content !important;\r\n}\r\n/* input {\r\n  border: none;\r\n  margin: 0;\r\n  width: 120px;\r\n}\r\ninput:focus {\r\n  outline: none;\r\n} */\r\n.table-container {\r\n  padding: 10px 0;\r\n  overflow-x: auto;\r\n  max-width: 100%;\r\n  width: max-content;\r\n}\r\n.table,\r\nth,\r\ntd {\r\n  border-color: white !important;\r\n}\r\n\r\nthead {\r\n  border: 0 !important;\r\n}\r\ntable {\r\n  border: 0 !important;\r\n}\r\n.icons-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 4px;\r\n}\r\n.text-center {\r\n  text-align: center !important;\r\n}\r\n\r\n.assignments-container,\r\n.unassigned-container {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.gap-16 {\r\n  gap: 16px;\r\n}\r\n.unassigned-container {\r\n  gap: 4px;\r\n}\r\n.justify-between {\r\n  justify-content: space-between;\r\n  margin-bottom: 10px;\r\n}\r\n.assignments-container p,\r\nh4 {\r\n  margin: 0;\r\n}\r\n.outline-btn {\r\n  background: white;\r\n  border: 1px solid var(--blue);\r\n  color: var(--blue);\r\n  border-radius: 5px;\r\n  font-size: 12px;\r\n  padding: 1px 0.25rem !important;\r\n  margin: 0;\r\n}\r\n.outline-btn:hover {\r\n  color: white;\r\n  background: var(--blue);\r\n}\r\n\r\n@media only screen and (min-width: 900px) {\r\n  td {\r\n    min-width: 140px !important;\r\n    width: max-content !important;\r\n  }\r\n}\r\n@media only screen and (max-width: 900px) {\r\n  .table-container {\r\n    width: max-content !important;\r\n  }\r\n}\r\n","import { IHouseKeepers, THousekeepingTrigger } from '@/models/housekeeping';\r\nimport housekeeping_store from '@/stores/housekeeping.store';\r\nimport locales from '@/stores/locales.store';\r\nimport { Component, Host, Listen, State, h, Element } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-hk-team',\r\n  styleUrl: 'ir-hk-team.css',\r\n  scoped: true,\r\n})\r\nexport class IrHkTeam {\r\n  @Element() el: HTMLElement;\r\n  @State() currentTrigger: THousekeepingTrigger | null = null;\r\n\r\n  private deletionTimout: NodeJS.Timeout;\r\n  renderAssignedUnits(hk: IHouseKeepers) {\r\n    if (hk.assigned_units.length === 0) {\r\n      return (\r\n        <span>\r\n          0 -{' '}\r\n          <button class=\"outline-btn\" onClick={() => (this.currentTrigger = { type: 'unassigned_units', user: hk })}>\r\n            {locales.entries.Lcz_Assign}\r\n          </button>\r\n        </span>\r\n      );\r\n    }\r\n    return (\r\n      <span>\r\n        {hk.assigned_units.length} -{' '}\r\n        <button onClick={() => (this.currentTrigger = { type: 'unassigned_units', user: hk })} class=\"outline-btn\">\r\n          {locales.entries.Lcz_Edit}\r\n        </button>\r\n      </span>\r\n    );\r\n  }\r\n  renderCurrentTrigger() {\r\n    switch (this.currentTrigger?.type) {\r\n      case 'unassigned_units':\r\n        return <ir-hk-unassigned-units slot=\"sidebar-body\" user={this.currentTrigger.user}></ir-hk-unassigned-units>;\r\n      case 'user':\r\n        return <ir-hk-user slot=\"sidebar-body\" user={this.currentTrigger.user} isEdit={this.currentTrigger.isEdit}></ir-hk-user>;\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n\r\n  @Listen('closeSideBar')\r\n  handleCloseSideBar(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    this.currentTrigger = null;\r\n  }\r\n  handleDeletion(user) {\r\n    this.currentTrigger = { type: 'delete', user };\r\n    this.deletionTimout = setTimeout(() => {\r\n      const modal = this.el.querySelector('ir-delete-modal');\r\n      if (!modal) return;\r\n      modal.openModal();\r\n    }, 100);\r\n  }\r\n  disconnectedCallback() {\r\n    clearTimeout(this.deletionTimout);\r\n  }\r\n  render() {\r\n    if (!housekeeping_store.hk_criteria) {\r\n      return null;\r\n    }\r\n    const { assigned, total, un_assigned } = housekeeping_store.hk_criteria.units_assignments;\r\n\r\n    return (\r\n      <Host class=\"card p-1\">\r\n        <section>\r\n          <ir-title label={locales.entries.Lcz_HousekeepingTeam} justifyContent=\"space-between\">\r\n            <div slot=\"title-body\" class=\"assignments-container gap-16 m-0\">\r\n              <p class=\"font-weight-bold m-0 p-0\">\r\n                {total} {locales.entries.Lcz_TotalUnits}\r\n              </p>\r\n              <p class={'m-0 p-0'}>\r\n                {assigned} <span>{locales.entries.Lcz_Assigned}</span>\r\n              </p>\r\n              {un_assigned > 0 && (\r\n                <button class=\"outline-btn\" onClick={() => (this.currentTrigger = { type: 'unassigned_units', user: null })}>\r\n                  {un_assigned} {locales.entries.Lcz_Unassigned}\r\n                </button>\r\n              )}\r\n            </div>\r\n          </ir-title>\r\n          <p class={'m-0 p-0'}>{locales.entries.Lcz_AsAnOption}</p>\r\n        </section>\r\n        <section class=\"table-container\">\r\n          <table class=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th class=\"text-left\">{locales.entries.Lcz_Name}</th>\r\n                <th>{locales.entries.Lcz_Mobile}</th>\r\n                <th>{locales.entries.Lcz_Username}</th>\r\n                <th>{locales.entries.Lcz_Note}</th>\r\n                <th>{locales.entries.Lcz_UnitsAssigned}</th>\r\n                <th class=\"text-center\">\r\n                  <ir-icon\r\n                    title={locales.entries.Lcz_CreateHousekeeper}\r\n                    onIconClickHandler={() => {\r\n                      this.currentTrigger = {\r\n                        type: 'user',\r\n                        isEdit: false,\r\n                        user: null,\r\n                      };\r\n                    }}\r\n                  >\r\n                    <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"20\" width=\"17.5\" viewBox=\"0 0 448 512\">\r\n                      <path\r\n                        fill=\"currentColor\"\r\n                        d=\"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z\"\r\n                      />\r\n                    </svg>\r\n                  </ir-icon>\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {housekeeping_store.hk_criteria.housekeepers.map(hk => (\r\n                <tr key={hk.id}>\r\n                  <td class=\"text-left\">{hk.name}</td>\r\n                  <td>\r\n                    {hk.phone_prefix} {hk.mobile}\r\n                  </td>\r\n                  <td>{hk.username}</td>\r\n                  <td>{hk.note}</td>\r\n                  <td>{this.renderAssignedUnits(hk)}</td>\r\n                  <td class=\"text-center\">\r\n                    <div class=\"icons-container\">\r\n                      <ir-icon\r\n                        title={locales.entries.Lcz_EditHousekeeper}\r\n                        onIconClickHandler={() => {\r\n                          const { assigned_units, is_soft_deleted, is_active, ...user } = hk;\r\n                          this.currentTrigger = {\r\n                            type: 'user',\r\n                            isEdit: true,\r\n                            user,\r\n                          };\r\n                        }}\r\n                        icon=\"ft-save color-ir-light-blue-hover h5 pointer sm-margin-right\"\r\n                      >\r\n                        <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"20\" width=\"20\" viewBox=\"0 0 512 512\">\r\n                          <path\r\n                            fill=\"#6b6f82\"\r\n                            d=\"M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z\"\r\n                          />\r\n                        </svg>\r\n                      </ir-icon>\r\n                      <span> &nbsp;</span>\r\n                      <ir-icon title={locales.entries.Lcz_DeleteHousekeeper} icon=\"ft-trash-2 danger h5 pointer\" onIconClickHandler={() => this.handleDeletion(hk)}>\r\n                        <svg slot=\"icon\" fill=\"#ff2441\" xmlns=\"http://www.w3.org/2000/svg\" height=\"16\" width=\"14.25\" viewBox=\"0 0 448 512\">\r\n                          <path d=\"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z\" />\r\n                        </svg>\r\n                      </ir-icon>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </section>\r\n        <ir-sidebar\r\n          showCloseButton={false}\r\n          open={this.currentTrigger !== null && this.currentTrigger.type !== 'delete'}\r\n          onIrSidebarToggle={() => (this.currentTrigger = null)}\r\n          style={{\r\n            '--sidebar-width': this.currentTrigger ? (this.currentTrigger.type === 'unassigned_units' ? 'max-content' : '40rem') : 'max-content',\r\n          }}\r\n        >\r\n          {this.renderCurrentTrigger()}\r\n        </ir-sidebar>\r\n        {this.currentTrigger?.type === 'delete' && <ir-delete-modal user={this.currentTrigger.user}></ir-delete-modal>}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  --ir-root-active-color: #1e9ff2;\r\n  --ir-root-inactive-color: #d2d2d2;\r\n}\r\ntable {\r\n  width: 100%;\r\n}\r\ntd {\r\n  padding-top: 3px;\r\n  padding-bottom: 3px;\r\n}\r\ntd:last-child {\r\n  text-align: end;\r\n}\r\n.title {\r\n  min-width: 230px !important;\r\n}\r\n","import { IHouseKeepers, IPropertyHousekeepingAssignment } from '@/models/housekeeping';\r\nimport { HouseKeepingService } from '@/services/housekeeping.service';\r\nimport calendar_data from '@/stores/calendar-data';\r\nimport housekeeping_store from '@/stores/housekeeping.store';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\nimport { Component, Event, EventEmitter, Host, Prop, State, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-hk-unassigned-units',\r\n  styleUrl: 'ir-hk-unassigned-units.css',\r\n  scoped: true,\r\n})\r\nexport class IrHkUnassignedUnits {\r\n  @Prop() user: IHouseKeepers | null = null;\r\n\r\n  @State() renderAgain = false;\r\n\r\n  @Event() closeSideBar: EventEmitter<null>;\r\n  @Event() resetData: EventEmitter<null>;\r\n\r\n  private assignedUnits: Map<number, IPropertyHousekeepingAssignment> = new Map();\r\n  private housekeepingService = new HouseKeepingService();\r\n\r\n  assignUnit(unit_id: number, hk_id: number | null, checked: boolean) {\r\n    if (this.user) {\r\n      const userUnit = this.user.assigned_units.find(unit => unit.id === unit_id);\r\n      if ((checked && userUnit) || (!checked && !userUnit)) {\r\n        this.assignedUnits.delete(unit_id);\r\n      } else if (!checked && userUnit) {\r\n        this.assignedUnits.set(unit_id, { hkm_id: hk_id, is_to_assign: false, unit_id });\r\n      } else if (checked) {\r\n        const assignment: IPropertyHousekeepingAssignment = {\r\n          hkm_id: hk_id,\r\n          is_to_assign: true,\r\n          unit_id,\r\n        };\r\n        this.assignedUnits.set(unit_id, assignment);\r\n      }\r\n    } else {\r\n      if (this.assignedUnits.has(unit_id) && !hk_id) {\r\n        this.assignedUnits.delete(unit_id);\r\n        return;\r\n      } else {\r\n        this.assignedUnits.set(unit_id, {\r\n          hkm_id: hk_id,\r\n          is_to_assign: true,\r\n          unit_id,\r\n        });\r\n      }\r\n    }\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n\r\n  async assignUnits() {\r\n    try {\r\n      await this.housekeepingService.manageExposedAssignedUnitToHKM(housekeeping_store.default_properties.property_id, [...this.assignedUnits.values()]);\r\n      this.resetData.emit(null);\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      this.closeSideBar.emit(null);\r\n    }\r\n  }\r\n  renderRooms() {\r\n    if (!this.user) {\r\n      return housekeeping_store.hk_criteria.units_assignments.unassigned_units?.map(unit => (\r\n        <tr key={unit.id}>\r\n          <td class=\"mr-2\">{unit.name}</td>\r\n          <td class=\"sr-only\"></td>\r\n          <td>\r\n            <ir-select\r\n              onSelectChange={e => {\r\n                let hk_id = e.detail;\r\n                if (hk_id === '') {\r\n                  hk_id = null;\r\n                } else {\r\n                  hk_id = +hk_id;\r\n                }\r\n                this.assignUnit(unit.id, hk_id, false);\r\n              }}\r\n              LabelAvailable={false}\r\n              data={housekeeping_store.hk_criteria.housekeepers.map(hk => ({ text: hk.name, value: hk.id.toString() }))}\r\n            ></ir-select>\r\n          </td>\r\n        </tr>\r\n      ));\r\n    }\r\n    return calendar_data.roomsInfo.map(roomType => {\r\n      if (!roomType.is_active) {\r\n        return null;\r\n      }\r\n      return roomType.physicalrooms?.map(physical_room => {\r\n        let taken = !housekeeping_store.hk_criteria.units_assignments.unassigned_units?.find(unit => unit.id === physical_room.id);\r\n        let housekeeper = [];\r\n        const assignedRoom = this.assignedUnits.get(physical_room.id);\r\n        if (assignedRoom && assignedRoom.is_to_assign) {\r\n          housekeeper = [this.user];\r\n          taken = true;\r\n        } else {\r\n          if (taken) {\r\n            housekeeper = housekeeping_store.hk_criteria.housekeepers.filter(hk => hk.assigned_units.find(unit => unit.id === physical_room.id));\r\n          }\r\n        }\r\n        return (\r\n          <tr key={physical_room.id}>\r\n            <td>{physical_room.name}</td>\r\n            <td>{taken ? housekeeper[0]?.name : ''}</td>\r\n            <td>\r\n              <ir-switch\r\n                onCheckChange={e => {\r\n                  const checked = e.detail;\r\n                  this.assignUnit(physical_room.id, this.user.id, checked);\r\n                }}\r\n                checked={taken && housekeeper[0]?.id === this.user.id}\r\n              ></ir-switch>\r\n            </td>\r\n          </tr>\r\n        );\r\n      });\r\n    });\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <ir-title class=\"title px-1\" displayContext=\"sidebar\" label={!this.user ? 'Assingn Units' : `Assignment for ${this.user.name}`}></ir-title>\r\n        <section class=\"px-1\">\r\n          <table>\r\n            <thead>\r\n              <th class=\"sr-only\">room name</th>\r\n              <th class=\"sr-only\">housekeeper name</th>\r\n              <th class=\"sr-only\">actions</th>\r\n            </thead>\r\n            <tbody>{this.renderRooms()}</tbody>\r\n          </table>\r\n          <div class=\"d-flex flex-column flex-md-row align-items-md-center mt-2 w-100\">\r\n            <ir-button\r\n              onClickHandler={() => this.closeSideBar.emit(null)}\r\n              class=\"flex-fill\"\r\n              btn_styles=\"w-100  justify-content-center align-items-center\"\r\n              btn_color=\"secondary\"\r\n              text={'Cancel'}\r\n            ></ir-button>\r\n            <ir-button\r\n              isLoading={isRequestPending('/Manage_Exposed_Assigned_Unit_To_HKM')}\r\n              onClickHandler={this.assignUnits.bind(this)}\r\n              class=\"flex-fill ml-md-1\"\r\n              btn_styles=\"w-100  justify-content-center align-items-center mt-1 mt-md-0\"\r\n              text={'Confirm'}\r\n            ></ir-button>\r\n          </div>\r\n        </section>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","export type ValidationRule = {\r\n  required?: boolean;\r\n  minLength?: number;\r\n  maxLength?: number;\r\n  minValue?: number;\r\n  maxValue?: number;\r\n  pattern?: RegExp;\r\n  custom?: (value: any) => boolean;\r\n};\r\n\r\ntype ValidationResult = {\r\n  isValid: boolean;\r\n  errors: { [key: string]: string[] };\r\n};\r\n\r\nexport function validateForm<T>(data: T, rules: { [P in keyof T]?: ValidationRule }): ValidationResult {\r\n  let isValid = true;\r\n  const errors: { [key: string]: string[] } = {};\r\n\r\n  for (const fieldName in rules) {\r\n    const rulesForField = rules[fieldName];\r\n    const value = data[fieldName];\r\n    if (!rulesForField) continue;\r\n\r\n    errors[fieldName] = [];\r\n\r\n    // Required\r\n    if (rulesForField.required && (value === null || value === undefined || value === '')) {\r\n      isValid = false;\r\n      errors[fieldName].push('This field is required.');\r\n    }\r\n\r\n    // String Length\r\n    if (typeof value === 'string') {\r\n      if (rulesForField.minLength !== undefined && value.length < rulesForField.minLength) {\r\n        isValid = false;\r\n        errors[fieldName].push(`Minimum length is ${rulesForField.minLength}.`);\r\n      }\r\n      if (rulesForField.maxLength !== undefined && value.length > rulesForField.maxLength) {\r\n        isValid = false;\r\n        errors[fieldName].push(`Maximum length is ${rulesForField.maxLength}.`);\r\n      }\r\n    }\r\n\r\n    // Numeric Range\r\n    if (typeof value === 'number') {\r\n      if (rulesForField.minValue !== undefined && value < rulesForField.minValue) {\r\n        isValid = false;\r\n        errors[fieldName].push(`Minimum value is ${rulesForField.minValue}.`);\r\n      }\r\n      if (rulesForField.maxValue !== undefined && value > rulesForField.maxValue) {\r\n        isValid = false;\r\n        errors[fieldName].push(`Maximum value is ${rulesForField.maxValue}.`);\r\n      }\r\n    }\r\n\r\n    // Regular Expression\r\n    if (rulesForField.pattern && !rulesForField.pattern.test(String(value))) {\r\n      isValid = false;\r\n      errors[fieldName].push('Invalid format.');\r\n    }\r\n\r\n    // Custom Validation\r\n    if (rulesForField.custom && !rulesForField.custom(value)) {\r\n      isValid = false;\r\n      errors[fieldName].push('Custom validation failed.');\r\n    }\r\n  }\r\n\r\n  return { isValid, errors };\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n","import { THKUser } from '@/models/housekeeping';\r\nimport { HouseKeepingService } from '@/services/housekeeping.service';\r\nimport calendar_data from '@/stores/calendar-data';\r\nimport { getDefaultProperties } from '@/stores/housekeeping.store';\r\nimport locales from '@/stores/locales.store';\r\nimport { ValidationRule, validateForm } from '@/utils/validation';\r\nimport { Component, Host, Prop, State, h, Event, EventEmitter } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-hk-user',\r\n  styleUrl: 'ir-hk-user.css',\r\n  scoped: true,\r\n})\r\nexport class IrHkUser {\r\n  @Prop() user: THKUser | null = null;\r\n  @Prop() isEdit: boolean = false;\r\n\r\n  @State() isLoading: boolean = false;\r\n  @State() userInfo: THKUser = {\r\n    id: -1,\r\n    mobile: '',\r\n    name: '',\r\n    note: '',\r\n    password: '',\r\n    property_id: null,\r\n    username: null,\r\n    phone_prefix: null,\r\n  };\r\n\r\n  @State() errors: { [P in keyof THKUser]?: any } | null = null;\r\n\r\n  @Event() resetData: EventEmitter<null>;\r\n  @Event() closeSideBar: EventEmitter<null>;\r\n\r\n  private housekeepingService = new HouseKeepingService();\r\n  private default_properties = {\r\n    token: '',\r\n    language: '',\r\n  };\r\n\r\n  async componentWillLoad() {\r\n    const { token, language, property_id } = getDefaultProperties();\r\n    this.default_properties = { token, language };\r\n    if (!this.user) {\r\n      this.userInfo['property_id'] = property_id;\r\n    }\r\n    if (this.user) {\r\n      this.userInfo = { ...this.user };\r\n    }\r\n    console.log(this.userInfo);\r\n  }\r\n\r\n  updateUserField(key: keyof THKUser, value: any) {\r\n    this.userInfo = { ...this.userInfo, [key]: value };\r\n  }\r\n\r\n  async addUser() {\r\n    try {\r\n      this.isLoading = true;\r\n      const validationRules: { [P in keyof THKUser]?: ValidationRule } = {\r\n        name: { required: true },\r\n        mobile: { required: true },\r\n        password: { required: true, minLength: 5 },\r\n      };\r\n      const validationResult = validateForm(this.userInfo, validationRules);\r\n      if (!validationResult.isValid) {\r\n        this.errors = validationResult.errors;\r\n        return;\r\n      }\r\n      if (this.errors) {\r\n        this.errors = null;\r\n      }\r\n      await this.housekeepingService.editExposedHKM(this.userInfo);\r\n      this.resetData.emit(null);\r\n      this.closeSideBar.emit(null);\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n  async handleBlur(e: CustomEvent) {\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    if (this.user || !this.userInfo.name) {\r\n      return;\r\n    }\r\n    const usermame = await this.housekeepingService.generateUserName(this.userInfo.name);\r\n    this.updateUserField('username', usermame);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <ir-title class=\"px-1\" displayContext=\"sidebar\" label={this.isEdit ? locales.entries.Lcz_EditHousekeeperProfile : locales.entries.Lcz_CreateHousekeeperProfile}></ir-title>\r\n        <section class=\"px-1\">\r\n          <ir-input-text\r\n            error={this.errors?.name?.length > 0}\r\n            label={locales.entries.Lcz_Name}\r\n            placeholder={locales.entries.Lcz_Name}\r\n            onTextChange={e => this.updateUserField('name', e.detail)}\r\n            value={this.userInfo.name}\r\n            onInputBlur={this.handleBlur.bind(this)}\r\n          ></ir-input-text>\r\n          <ir-phone-input\r\n            placeholder={locales.entries.Lcz_Mobile}\r\n            error={this.errors?.mobile?.length > 0}\r\n            language={this.default_properties.language}\r\n            token={this.default_properties.token}\r\n            default_country={calendar_data.country.id}\r\n            phone_prefix={this.user?.phone_prefix}\r\n            label={locales.entries.Lcz_Mobile}\r\n            value={this.userInfo.mobile}\r\n            onTextChange={e => {\r\n              this.updateUserField('phone_prefix', e.detail.phone_prefix);\r\n              this.updateUserField('mobile', e.detail.mobile);\r\n            }}\r\n          ></ir-phone-input>\r\n\r\n          <ir-input-text\r\n            disabled={this.user !== null}\r\n            label={locales.entries.Lcz_Username}\r\n            placeholder={locales.entries.Lcz_Username}\r\n            value={this.userInfo.username}\r\n            onTextChange={e => this.updateUserField('username', e.detail)}\r\n          ></ir-input-text>\r\n\r\n          <ir-input-text\r\n            label={locales.entries.Lcz_Password}\r\n            placeholder={locales.entries.Lcz_MinimumCharacter}\r\n            value={this.userInfo.password}\r\n            type=\"password\"\r\n            error={this.errors?.password?.length > 0}\r\n            onTextChange={e => this.updateUserField('password', e.detail)}\r\n          ></ir-input-text>\r\n          <ir-input-text\r\n            label={locales.entries.Lcz_Note}\r\n            placeholder={locales.entries.Lcz_Note}\r\n            value={this.userInfo.note}\r\n            onTextChange={e => this.updateUserField('note', e.detail)}\r\n          ></ir-input-text>\r\n          <div class=\"d-flex flex-column flex-md-row align-items-md-center mt-2 w-100\">\r\n            <ir-button\r\n              onClickHandler={() => this.closeSideBar.emit(null)}\r\n              class=\"flex-fill\"\r\n              btn_styles=\"w-100  justify-content-center align-items-center\"\r\n              btn_color=\"secondary\"\r\n              text={locales.entries.Lcz_Cancel}\r\n            ></ir-button>\r\n            <ir-button\r\n              isLoading={this.isLoading}\r\n              onClickHandler={this.addUser.bind(this)}\r\n              class=\"flex-fill ml-md-1\"\r\n              btn_styles=\"w-100  justify-content-center align-items-center mt-1 mt-md-0\"\r\n              text={locales.entries.Lcz_Save}\r\n            ></ir-button>\r\n          </div>\r\n        </section>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"sSAAA,MAAMA,EAAmB,wrCACzB,MAAAC,EAAeD,E,oXCUFE,EAAa,MAL1B,WAAAC,CAAAC,G,wFAQWC,KAAAC,OAAkB,MAClBD,KAAAE,WAAqB,GACrBF,KAAAG,WAA+B,KAKhCH,KAAAI,oBAAsB,IAAIC,C,CAGlC,gBAAMC,GACJN,KAAKC,OAAS,MACdD,KAAKO,YAAYC,KAAK,K,CAGxB,eAAMC,GACJT,KAAKC,OAAS,I,CAIhB,qBAAMS,CAAgBC,GACpB,IAAIC,EAASD,EAAMC,OACnB,IAAIC,EAAOD,EAAOC,KAClB,IACE,GAAIA,IAAS,UAAW,CACtBb,KAAKG,WAAa,UAClB,GAAIH,KAAKE,aAAe,GAAI,OACpBF,KAAKI,oBAAoBU,eAAed,KAAKe,KAAM,K,KACpD,CACL,MAAMC,EAAmBhB,KAAKe,KAAKE,eAAeC,KAAIC,IAAC,CAAOC,QAASpB,KAAKE,WAAYmB,aAAc,KAAMC,QAASH,EAAEI,aACjHvB,KAAKI,oBAAoBoB,+BAA+BC,EAAmBC,mBAAmBC,YAAaX,G,MAC3GY,EAA0D5B,KAAKe,KAAdA,EAAIc,EAAAD,EAArD,wDACA5B,KAAKI,oBAAoBU,eAAeC,EAAM,K,CAEtDf,KAAK8B,UAAUtB,KAAK,K,CAEtB,GAAIK,IAAS,SAAU,CACrBb,KAAKM,Y,EAEP,MAAOyB,GACPC,QAAQD,MAAMA,E,SAEd,GAAI/B,KAAKG,WAAY,CACnBH,KAAKG,WAAa,KAClBH,KAAKM,Y,GAIX,MAAA2B,GACE,IAAKjC,KAAKe,KAAM,CACd,OAAO,I,CAET,MAAO,CACLmB,EAAA,OACEC,MAAO,iBAAiBnC,KAAKC,OAAS,SAAW,KACjDmC,QAAS,KACPpC,KAAKM,YAAY,IAGrB4B,EAAA,oBAAiBlC,KAAKC,OAAS,SAAW,SAAUkC,MAAO,WAAYE,SAAS,MAC7ErC,KAAKC,QACJiC,EAAA,OAAKC,MAAO,wBACVD,EAAA,OAAKC,MAAO,yDACVD,EAAA,KAAGC,MAAM,iBAAiBnC,KAAKe,KAAKE,eAAeqB,OAAS,EAAIC,EAAQC,QAAQC,kBAAoBF,EAAQC,QAAQE,qBACpHR,EAAA,WACEC,MAAM,YACNQ,MAAO,CAAEC,OAAQ,WACjBR,QAAS,KACPpC,KAAKM,YAAY,GAGnB4B,EAAA,OAAKW,KAAK,OAAOC,MAAM,6BAA6BC,OAAO,KAAKC,MAAM,OAAOC,QAAQ,eACnFf,EAAA,QACEgB,KAAK,eACLC,EAAE,+RAKTnD,KAAKe,KAAKE,eAAeqB,OAAS,GACjCJ,EAAA,OAAKC,MAAM,iCACTD,EAAA,aACEkB,YAAab,EAAQC,QAAQa,WAC7BC,cAAetD,KAAKE,WACpBqD,eAAgBC,GAAMxD,KAAKE,WAAasD,EAAEC,OAC1CC,eAAgB,MAChBC,KAAMlC,EAAmBmC,YAAYC,aAClCC,QAAOC,GAAMA,EAAGxC,KAAOvB,KAAKe,KAAKQ,KACjCL,KAAI8C,IAAC,CACJC,MAAOD,EAAEzC,GAAG2C,WACZC,KAAMH,EAAEnD,YAMlBqB,EAAA,OAAKC,MAAO,uDACVD,EAAA,aAAWkC,KAAM,GAAIC,UAAW,YAAaC,UAAS,KAACH,KAAM5B,EAAQC,QAAQ+B,WAAY1D,KAAM,WAC/FqB,EAAA,aAAWsC,UAAWxE,KAAKG,aAAe,UAAWiE,KAAM,GAAIC,UAAW,UAAWC,UAAS,KAACH,KAAM5B,EAAQC,QAAQiC,YAAa5D,KAAM,e,aChHtJ,MAAM6D,EAAc,4yCACpB,MAAAC,EAAeD,E,oXCSFE,EAAQ,MALrB,WAAA9E,CAAAC,G,UAOWC,KAAA6E,eAA8C,I,CAGvD,mBAAAC,CAAoBf,GAClB,GAAIA,EAAG9C,eAAeqB,SAAW,EAAG,CAClC,OACEJ,EAAA,kBACM,IACJA,EAAA,UAAQC,MAAM,cAAcC,QAAS,IAAOpC,KAAK6E,eAAiB,CAAEE,KAAM,mBAAoBhE,KAAMgD,IACjGxB,EAAQC,QAAQwC,Y,CAKzB,OACE9C,EAAA,YACG6B,EAAG9C,eAAeqB,OAAM,KAAI,IAC7BJ,EAAA,UAAQE,QAAS,IAAOpC,KAAK6E,eAAiB,CAAEE,KAAM,mBAAoBhE,KAAMgD,GAAO5B,MAAM,eAC1FI,EAAQC,QAAQyC,U,CAKzB,oBAAAC,G,MACE,QAAQtD,EAAA5B,KAAK6E,kBAAc,MAAAjD,SAAA,SAAAA,EAAEmD,MAC3B,IAAK,mBACH,OAAO7C,EAAA,0BAAwBW,KAAK,eAAe9B,KAAMf,KAAK6E,eAAe9D,OAC/E,IAAK,OACH,OAAOmB,EAAA,cAAYW,KAAK,eAAe9B,KAAMf,KAAK6E,eAAe9D,KAAMoE,OAAQnF,KAAK6E,eAAeM,SACrG,QACE,OAAO,K,CAKb,kBAAAC,CAAmB5B,GACjBA,EAAE6B,2BACF7B,EAAE8B,kBACFtF,KAAK6E,eAAiB,I,CAExB,cAAAU,CAAexE,GACbf,KAAK6E,eAAiB,CAAEE,KAAM,SAAUhE,QACxCf,KAAKwF,eAAiBC,YAAW,KAC/B,MAAMC,EAAQ1F,KAAK2F,GAAGC,cAAc,mBACpC,IAAKF,EAAO,OACZA,EAAMjF,WAAW,GAChB,I,CAEL,oBAAAoF,GACEC,aAAa9F,KAAKwF,e,CAEpB,MAAAvD,G,MACE,IAAKR,EAAmBmC,YAAa,CACnC,OAAO,I,CAET,MAAMmC,SAAEA,EAAQC,MAAEA,EAAKC,YAAEA,GAAgBxE,EAAmBmC,YAAYsC,kBAExE,OACEhE,EAACiE,EAAI,CAAChE,MAAM,YACVD,EAAA,eACEA,EAAA,YAAUkE,MAAO7D,EAAQC,QAAQ6D,qBAAsBC,eAAe,iBACpEpE,EAAA,OAAKW,KAAK,aAAaV,MAAM,oCAC3BD,EAAA,KAAGC,MAAM,4BACN6D,EAAK,IAAGzD,EAAQC,QAAQ+D,gBAE3BrE,EAAA,KAAGC,MAAO,WACP4D,EAAQ,IAAE7D,EAAA,YAAOK,EAAQC,QAAQgE,eAEnCP,EAAc,GACb/D,EAAA,UAAQC,MAAM,cAAcC,QAAS,IAAOpC,KAAK6E,eAAiB,CAAEE,KAAM,mBAAoBhE,KAAM,OACjGkF,EAAW,IAAG1D,EAAQC,QAAQiE,kBAKvCvE,EAAA,KAAGC,MAAO,WAAYI,EAAQC,QAAQkE,iBAExCxE,EAAA,WAASC,MAAM,mBACbD,EAAA,SAAOC,MAAM,SACXD,EAAA,aACEA,EAAA,UACEA,EAAA,MAAIC,MAAM,aAAaI,EAAQC,QAAQmE,UACvCzE,EAAA,UAAKK,EAAQC,QAAQoE,YACrB1E,EAAA,UAAKK,EAAQC,QAAQqE,cACrB3E,EAAA,UAAKK,EAAQC,QAAQsE,UACrB5E,EAAA,UAAKK,EAAQC,QAAQuE,mBACrB7E,EAAA,MAAIC,MAAM,eACRD,EAAA,WACE8E,MAAOzE,EAAQC,QAAQyE,sBACvBC,mBAAoB,KAClBlH,KAAK6E,eAAiB,CACpBE,KAAM,OACNI,OAAQ,MACRpE,KAAM,KACP,GAGHmB,EAAA,OAAKW,KAAK,OAAOC,MAAM,6BAA6BC,OAAO,KAAKC,MAAM,OAAOC,QAAQ,eACnFf,EAAA,QACEgB,KAAK,eACLC,EAAE,+LAOdjB,EAAA,aACGT,EAAmBmC,YAAYC,aAAa3C,KAAI6C,GAC/C7B,EAAA,MAAIiF,IAAKpD,EAAGxC,IACVW,EAAA,MAAIC,MAAM,aAAa4B,EAAGlD,MAC1BqB,EAAA,UACG6B,EAAGqD,aAAY,IAAGrD,EAAGsD,QAExBnF,EAAA,UAAK6B,EAAGuD,UACRpF,EAAA,UAAK6B,EAAGwD,MACRrF,EAAA,UAAKlC,KAAK8E,oBAAoBf,IAC9B7B,EAAA,MAAIC,MAAM,eACRD,EAAA,OAAKC,MAAM,mBACTD,EAAA,WACE8E,MAAOzE,EAAQC,QAAQgF,oBACvBN,mBAAoB,K,MACqCnG,EAAI0G,EAAK1D,EAA1D,kDACN/D,KAAK6E,eAAiB,CACpBE,KAAM,OACNI,OAAQ,KACRpE,OACD,EAEHqD,KAAK,gEAELlC,EAAA,OAAKW,KAAK,OAAOC,MAAM,6BAA6BC,OAAO,KAAKC,MAAM,KAAKC,QAAQ,eACjFf,EAAA,QACEgB,KAAK,UACLC,EAAE,2fAIRjB,EAAA,kBACAA,EAAA,WAAS8E,MAAOzE,EAAQC,QAAQkF,sBAAuBtD,KAAK,+BAA+B8C,mBAAoB,IAAMlH,KAAKuF,eAAexB,IACvI7B,EAAA,OAAKW,KAAK,OAAOK,KAAK,UAAUJ,MAAM,6BAA6BC,OAAO,KAAKC,MAAM,QAAQC,QAAQ,eACnGf,EAAA,QAAMiB,EAAE,sfAU1BjB,EAAA,cACEyF,gBAAiB,MACjBC,KAAM5H,KAAK6E,iBAAmB,MAAQ7E,KAAK6E,eAAeE,OAAS,SACnE8C,kBAAmB,IAAO7H,KAAK6E,eAAiB,KAChDlC,MAAO,CACL,kBAAmB3C,KAAK6E,eAAkB7E,KAAK6E,eAAeE,OAAS,mBAAqB,cAAgB,QAAW,gBAGxH/E,KAAKkF,0BAEPtD,EAAA5B,KAAK6E,kBAAc,MAAAjD,SAAA,SAAAA,EAAEmD,QAAS,UAAY7C,EAAA,mBAAiBnB,KAAMf,KAAK6E,eAAe9D,O,qCC7K9F,MAAM+G,EAAyB,4UAC/B,MAAAC,EAAeD,E,MCWFE,EAAmB,MALhC,WAAAlI,CAAAC,G,0FAMUC,KAAAe,KAA6B,KAE5Bf,KAAAiI,YAAc,MAKfjI,KAAAkI,cAA8D,IAAIC,IAClEnI,KAAAI,oBAAsB,IAAIC,C,CAElC,UAAA+H,CAAW9G,EAAiB+G,EAAsBC,GAChD,GAAItI,KAAKe,KAAM,CACb,MAAMwH,EAAWvI,KAAKe,KAAKE,eAAeuH,MAAKC,GAAQA,EAAKlH,KAAOD,IACnE,GAAKgH,GAAWC,IAAeD,IAAYC,EAAW,CACpDvI,KAAKkI,cAAcQ,OAAOpH,E,MACrB,IAAKgH,GAAWC,EAAU,CAC/BvI,KAAKkI,cAAcS,IAAIrH,EAAS,CAAEF,OAAQiH,EAAOhH,aAAc,MAAOC,W,MACjE,GAAIgH,EAAS,CAClB,MAAMM,EAA8C,CAClDxH,OAAQiH,EACRhH,aAAc,KACdC,WAEFtB,KAAKkI,cAAcS,IAAIrH,EAASsH,E,MAE7B,CACL,GAAI5I,KAAKkI,cAAcW,IAAIvH,KAAa+G,EAAO,CAC7CrI,KAAKkI,cAAcQ,OAAOpH,GAC1B,M,KACK,CACLtB,KAAKkI,cAAcS,IAAIrH,EAAS,CAC9BF,OAAQiH,EACRhH,aAAc,KACdC,W,EAINtB,KAAKiI,aAAejI,KAAKiI,W,CAG3B,iBAAMa,GACJ,UACQ9I,KAAKI,oBAAoBoB,+BAA+BC,EAAmBC,mBAAmBC,YAAa,IAAI3B,KAAKkI,cAAca,WACxI/I,KAAK8B,UAAUtB,KAAK,K,CACpB,MAAOuB,GACPC,QAAQD,MAAMA,E,SAEd/B,KAAKgJ,aAAaxI,KAAK,K,EAG3B,WAAAyI,G,MACE,IAAKjJ,KAAKe,KAAM,CACd,OAAOa,EAAAH,EAAmBmC,YAAYsC,kBAAkBgD,oBAAgB,MAAAtH,SAAA,SAAAA,EAAEV,KAAIuH,GAC5EvG,EAAA,MAAIiF,IAAKsB,EAAKlH,IACZW,EAAA,MAAIC,MAAM,QAAQsG,EAAK5H,MACvBqB,EAAA,MAAIC,MAAM,YACVD,EAAA,UACEA,EAAA,aACEqB,eAAgBC,IACd,IAAI6E,EAAQ7E,EAAEC,OACd,GAAI4E,IAAU,GAAI,CAChBA,EAAQ,I,KACH,CACLA,GAASA,C,CAEXrI,KAAKoI,WAAWK,EAAKlH,GAAI8G,EAAO,MAAM,EAExC3E,eAAgB,MAChBC,KAAMlC,EAAmBmC,YAAYC,aAAa3C,KAAI6C,IAAE,CAAOI,KAAMJ,EAAGlD,KAAMoD,MAAOF,EAAGxC,GAAG2C,oB,CAMrG,OAAOiF,EAAcC,UAAUlI,KAAImI,I,MACjC,IAAKA,EAASC,UAAW,CACvB,OAAO,I,CAET,OAAO1H,EAAAyH,EAASE,iBAAa,MAAA3H,SAAA,SAAAA,EAAEV,KAAIsI,I,UACjC,IAAIC,KAAS7H,EAAAH,EAAmBmC,YAAYsC,kBAAkBgD,oBAAgB,MAAAtH,SAAA,SAAAA,EAAE4G,MAAKC,GAAQA,EAAKlH,KAAOiI,EAAcjI,MACvH,IAAImI,EAAc,GAClB,MAAMC,EAAe3J,KAAKkI,cAAc0B,IAAIJ,EAAcjI,IAC1D,GAAIoI,GAAgBA,EAAatI,aAAc,CAC7CqI,EAAc,CAAC1J,KAAKe,MACpB0I,EAAQ,I,KACH,CACL,GAAIA,EAAO,CACTC,EAAcjI,EAAmBmC,YAAYC,aAAaC,QAAOC,GAAMA,EAAG9C,eAAeuH,MAAKC,GAAQA,EAAKlH,KAAOiI,EAAcjI,M,EAGpI,OACEW,EAAA,MAAIiF,IAAKqC,EAAcjI,IACrBW,EAAA,UAAKsH,EAAc3I,MACnBqB,EAAA,UAAKuH,GAAQI,EAAAH,EAAY,MAAE,MAAAG,SAAA,SAAAA,EAAEhJ,KAAO,IACpCqB,EAAA,UACEA,EAAA,aACE4H,cAAetG,IACb,MAAM8E,EAAU9E,EAAEC,OAClBzD,KAAKoI,WAAWoB,EAAcjI,GAAIvB,KAAKe,KAAKQ,GAAI+G,EAAQ,EAE1DA,QAASmB,KAASM,EAAAL,EAAY,MAAE,MAAAK,SAAA,SAAAA,EAAExI,MAAOvB,KAAKe,KAAKQ,MAGpD,GAEP,G,CAGN,MAAAU,GACE,OACEC,EAACiE,EAAI,CAAAgB,IAAA,4CACHjF,EAAA,YAAAiF,IAAA,2CAAUhF,MAAM,aAAa6H,eAAe,UAAU5D,OAAQpG,KAAKe,KAAO,gBAAkB,kBAAkBf,KAAKe,KAAKF,SACxHqB,EAAA,WAAAiF,IAAA,2CAAShF,MAAM,QACbD,EAAA,SAAAiF,IAAA,4CACEjF,EAAA,SAAAiF,IAAA,4CACEjF,EAAA,MAAAiF,IAAA,2CAAIhF,MAAM,WAAS,aACnBD,EAAA,MAAAiF,IAAA,2CAAIhF,MAAM,WAAS,oBACnBD,EAAA,MAAAiF,IAAA,2CAAIhF,MAAM,WAAS,YAErBD,EAAA,SAAAiF,IAAA,4CAAQnH,KAAKiJ,gBAEf/G,EAAA,OAAAiF,IAAA,2CAAKhF,MAAM,mEACTD,EAAA,aAAAiF,IAAA,2CACE8C,eAAgB,IAAMjK,KAAKgJ,aAAaxI,KAAK,MAC7C2B,MAAM,YACN+H,WAAW,mDACX7F,UAAU,YACVF,KAAM,WAERjC,EAAA,aAAAiF,IAAA,2CACE3C,UAAW2F,EAAiB,wCAC5BF,eAAgBjK,KAAK8I,YAAYsB,KAAKpK,MACtCmC,MAAM,oBACN+H,WAAW,gEACX/F,KAAM,c,sBCpIJkG,EAAgB1G,EAAS2G,GACvC,IAAIC,EAAU,KACd,MAAMC,EAAsC,GAE5C,IAAK,MAAMC,KAAaH,EAAO,CAC7B,MAAMI,EAAgBJ,EAAMG,GAC5B,MAAMxG,EAAQN,EAAK8G,GACnB,IAAKC,EAAe,SAEpBF,EAAOC,GAAa,GAGpB,GAAIC,EAAcC,WAAa1G,IAAU,MAAQA,IAAU2G,WAAa3G,IAAU,IAAK,CACrFsG,EAAU,MACVC,EAAOC,GAAWI,KAAK,0B,CAIzB,UAAW5G,IAAU,SAAU,CAC7B,GAAIyG,EAAcI,YAAcF,WAAa3G,EAAM3B,OAASoI,EAAcI,UAAW,CACnFP,EAAU,MACVC,EAAOC,GAAWI,KAAK,qBAAqBH,EAAcI,a,CAE5D,GAAIJ,EAAcK,YAAcH,WAAa3G,EAAM3B,OAASoI,EAAcK,UAAW,CACnFR,EAAU,MACVC,EAAOC,GAAWI,KAAK,qBAAqBH,EAAcK,a,EAK9D,UAAW9G,IAAU,SAAU,CAC7B,GAAIyG,EAAcM,WAAaJ,WAAa3G,EAAQyG,EAAcM,SAAU,CAC1ET,EAAU,MACVC,EAAOC,GAAWI,KAAK,oBAAoBH,EAAcM,Y,CAE3D,GAAIN,EAAcO,WAAaL,WAAa3G,EAAQyG,EAAcO,SAAU,CAC1EV,EAAU,MACVC,EAAOC,GAAWI,KAAK,oBAAoBH,EAAcO,Y,EAK7D,GAAIP,EAAcQ,UAAYR,EAAcQ,QAAQC,KAAKC,OAAOnH,IAAS,CACvEsG,EAAU,MACVC,EAAOC,GAAWI,KAAK,kB,CAIzB,GAAIH,EAAcW,SAAWX,EAAcW,OAAOpH,GAAQ,CACxDsG,EAAU,MACVC,EAAOC,GAAWI,KAAK,4B,EAI3B,MAAO,CAAEN,UAASC,SACpB,CCtEA,MAAMc,EAAc,kCACpB,MAAAC,EAAeD,E,MCYFE,EAAQ,MALrB,WAAA1L,CAAAC,G,0FAMUC,KAAAe,KAAuB,KACvBf,KAAAmF,OAAkB,MAEjBnF,KAAAwE,UAAqB,MACrBxE,KAAAyL,SAAoB,CAC3BlK,IAAK,EACL8F,OAAQ,GACRxG,KAAM,GACN0G,KAAM,GACNmE,SAAU,GACV/J,YAAa,KACb2F,SAAU,KACVF,aAAc,MAGPpH,KAAAwK,OAAgD,KAKjDxK,KAAAI,oBAAsB,IAAIC,EAC1BL,KAAA0B,mBAAqB,CAC3BiK,MAAO,GACPC,SAAU,G,CAGZ,uBAAMC,GACJ,MAAMF,MAAEA,EAAKC,SAAEA,EAAQjK,YAAEA,GAAgBmK,IACzC9L,KAAK0B,mBAAqB,CAAEiK,QAAOC,YACnC,IAAK5L,KAAKe,KAAM,CACdf,KAAKyL,SAAS,eAAiB9J,C,CAEjC,GAAI3B,KAAKe,KAAM,CACbf,KAAKyL,SAAQM,OAAAC,OAAA,GAAQhM,KAAKe,K,CAE5BiB,QAAQiK,IAAIjM,KAAKyL,S,CAGnB,eAAAS,CAAgB/E,EAAoBlD,GAClCjE,KAAKyL,SAAQM,OAAAC,OAAAD,OAAAC,OAAA,GAAQhM,KAAKyL,UAAQ,CAAEtE,CAACA,GAAMlD,G,CAG7C,aAAMkI,GACJ,IACEnM,KAAKwE,UAAY,KACjB,MAAM4H,EAA6D,CACjEvL,KAAM,CAAE8J,SAAU,MAClBtD,OAAQ,CAAEsD,SAAU,MACpBe,SAAU,CAAEf,SAAU,KAAMG,UAAW,IAEzC,MAAMuB,EAAmBhC,EAAarK,KAAKyL,SAAUW,GACrD,IAAKC,EAAiB9B,QAAS,CAC7BvK,KAAKwK,OAAS6B,EAAiB7B,OAC/B,M,CAEF,GAAIxK,KAAKwK,OAAQ,CACfxK,KAAKwK,OAAS,I,OAEVxK,KAAKI,oBAAoBU,eAAed,KAAKyL,UACnDzL,KAAK8B,UAAUtB,KAAK,MACpBR,KAAKgJ,aAAaxI,KAAK,K,CACvB,MAAOuB,GACPC,QAAQD,MAAMA,E,SAEd/B,KAAKwE,UAAY,K,EAGrB,gBAAM8H,CAAW9I,GACfA,EAAE6B,2BACF7B,EAAE8B,kBACF,GAAItF,KAAKe,OAASf,KAAKyL,SAAS5K,KAAM,CACpC,M,CAEF,MAAM0L,QAAiBvM,KAAKI,oBAAoBoM,iBAAiBxM,KAAKyL,SAAS5K,MAC/Eb,KAAKkM,gBAAgB,WAAYK,E,CAGnC,MAAAtK,G,kBACE,OACEC,EAACiE,EAAI,CAAAgB,IAAA,4CACHjF,EAAA,YAAAiF,IAAA,2CAAUhF,MAAM,OAAO6H,eAAe,UAAU5D,MAAOpG,KAAKmF,OAAS5C,EAAQC,QAAQiK,2BAA6BlK,EAAQC,QAAQkK,+BAClIxK,EAAA,WAAAiF,IAAA,2CAAShF,MAAM,QACbD,EAAA,iBAAAiF,IAAA,2CACEpF,QAAO8H,GAAAjI,EAAA5B,KAAKwK,UAAM,MAAA5I,SAAA,SAAAA,EAAEf,QAAI,MAAAgJ,SAAA,SAAAA,EAAEvH,QAAS,EACnC8D,MAAO7D,EAAQC,QAAQmE,SACvBgG,YAAapK,EAAQC,QAAQmE,SAC7BiG,aAAcpJ,GAAKxD,KAAKkM,gBAAgB,OAAQ1I,EAAEC,QAClDQ,MAAOjE,KAAKyL,SAAS5K,KACrBgM,YAAa7M,KAAKsM,WAAWlC,KAAKpK,QAEpCkC,EAAA,kBAAAiF,IAAA,2CACEwF,YAAapK,EAAQC,QAAQoE,WAC7B7E,QAAO+K,GAAA/C,EAAA/J,KAAKwK,UAAM,MAAAT,SAAA,SAAAA,EAAE1C,UAAM,MAAAyF,SAAA,SAAAA,EAAExK,QAAS,EACrCsJ,SAAU5L,KAAK0B,mBAAmBkK,SAClCD,MAAO3L,KAAK0B,mBAAmBiK,MAC/BoB,gBAAiB5D,EAAc6D,QAAQzL,GACvC6F,cAAc6F,EAAAjN,KAAKe,QAAI,MAAAkM,SAAA,SAAAA,EAAE7F,aACzBhB,MAAO7D,EAAQC,QAAQoE,WACvB3C,MAAOjE,KAAKyL,SAASpE,OACrBuF,aAAcpJ,IACZxD,KAAKkM,gBAAgB,eAAgB1I,EAAEC,OAAO2D,cAC9CpH,KAAKkM,gBAAgB,SAAU1I,EAAEC,OAAO4D,OAAO,IAInDnF,EAAA,iBAAAiF,IAAA,2CACE+F,SAAUlN,KAAKe,OAAS,KACxBqF,MAAO7D,EAAQC,QAAQqE,aACvB8F,YAAapK,EAAQC,QAAQqE,aAC7B5C,MAAOjE,KAAKyL,SAASnE,SACrBsF,aAAcpJ,GAAKxD,KAAKkM,gBAAgB,WAAY1I,EAAEC,UAGxDvB,EAAA,iBAAAiF,IAAA,2CACEf,MAAO7D,EAAQC,QAAQ2K,aACvBR,YAAapK,EAAQC,QAAQ4K,qBAC7BnJ,MAAOjE,KAAKyL,SAASC,SACrB3G,KAAK,WACLhD,QAAOsL,GAAAC,EAAAtN,KAAKwK,UAAM,MAAA8C,SAAA,SAAAA,EAAE5B,YAAQ,MAAA2B,SAAA,SAAAA,EAAE/K,QAAS,EACvCsK,aAAcpJ,GAAKxD,KAAKkM,gBAAgB,WAAY1I,EAAEC,UAExDvB,EAAA,iBAAAiF,IAAA,2CACEf,MAAO7D,EAAQC,QAAQsE,SACvB6F,YAAapK,EAAQC,QAAQsE,SAC7B7C,MAAOjE,KAAKyL,SAASlE,KACrBqF,aAAcpJ,GAAKxD,KAAKkM,gBAAgB,OAAQ1I,EAAEC,UAEpDvB,EAAA,OAAAiF,IAAA,2CAAKhF,MAAM,mEACTD,EAAA,aAAAiF,IAAA,2CACE8C,eAAgB,IAAMjK,KAAKgJ,aAAaxI,KAAK,MAC7C2B,MAAM,YACN+H,WAAW,mDACX7F,UAAU,YACVF,KAAM5B,EAAQC,QAAQ+B,aAExBrC,EAAA,aAAAiF,IAAA,2CACE3C,UAAWxE,KAAKwE,UAChByF,eAAgBjK,KAAKmM,QAAQ/B,KAAKpK,MAClCmC,MAAM,oBACN+H,WAAW,gEACX/F,KAAM5B,EAAQC,QAAQ+K,a","ignoreList":[]}