import{c as o}from"./p-c226aa13.js";import{l as e}from"./p-71768c2d.js";import{a as r}from"./p-bf44a732.js";const t=[{color:"#F9A9FE",design:"skew",name:""},{color:"#ffe502",design:"skew",name:""},{color:"#6FF1EF",design:"skew",name:""},{color:"#9BF091",design:"skew",name:""},{color:"#C28D6B",design:"skew",name:""},{color:"#9B84D6",design:"skew",name:""}];const c={"#31bef1":"#85d0ff","#45b16d":"#bbdbc4","#FF9149":"#ffcfbc","#a0a0a0":"#d5d5d5","#f34752":"#f8727b","#f88c91":"#f8727b","#F9A9FE":"#fcd8ff","#ffe502":"#fff2b4","#6FF1EF":"#c5f8f7","#9BF091":"#d3f8cf","#C28D6B":"#e5b08f","#9B84D6":"#beadf0"};const n={"#31bef1":"#76b0cd","#45b16d":"#7ba989","#FF9149":"#d5997c","#a0a0a0":"#a0a0a0","#f34752":"#ce7c7f","#f88c91":"#d19699","#F9A9FE":"#d1a5d4","#ffe502":"#d5c671","#6FF1EF":"#8acdcb","#9BF091":"#9ecc99","#C28D6B":"#b29788","#9B84D6":"#9e93bd"};class a{async SetAutomaticCheckInOut(o){const{data:e}=await r.post(`/Set_Automatic_Check_In_Out`,o);if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}return e}async getExposedProperty(e){var t,c;try{const{data:n}=await r.post(`/Get_Exposed_Property`,e);if(n.ExceptionMsg!==""){throw new Error(n.ExceptionMsg)}const a=n.My_Result;o.property=Object.assign(Object.assign({},a),{calendar_extra:a.calendar_extra?JSON.parse(a.calendar_extra):null});o.adultChildConstraints=a.adult_child_constraints;o.cleaning_frequency=a.cleaning_frequency;o.allowedBookingSources=a.allowed_booking_sources;o.allowed_payment_methods=a.allowed_payment_methods;o.currency=a.currency;o.is_vacation_rental=a.is_vacation_rental;o.pickup_service=a.pickup_service;o.max_nights=a.max_nights;o.roomsInfo=a.roomtypes;o.taxes=a.taxes;o.id=a.id;o.country=a.country;o.name=a.name;o.is_automatic_check_in_out=a.is_automatic_check_in_out;o.tax_statement=a.tax_statement;o.is_frontdesk_enabled=a.is_frontdesk_enabled;o.is_pms_enabled=a.is_pms_enabled;const s=(c=(t=a===null||a===void 0?void 0:a.time_constraints)===null||t===void 0?void 0:t.check_out_till)===null||c===void 0?void 0:c.split(":");o.checkin_checkout_hours={offset:a.city.gmt_offset,hour:Number(s[0]||0),minute:Number(s[1]||0)};this.initializeBookingColors();this.generateColorForegrounds();return n}catch(o){console.log(o);throw new Error(o)}}generateColorForegrounds(){var e;const r={};if(!((e=o.property)===null||e===void 0?void 0:e.calendar_legends)){return}o.property.calendar_legends.forEach((o=>{var e,t;if(o.design==="skew"){r[o.color]={foreground:"white",stripe:(e=c[o.color])!==null&&e!==void 0?e:"",checkout:(t=n[o.color])!==null&&t!==void 0?t:""}}}));t.forEach((o=>{var e,t;r[o.color]={foreground:["#C28D6B","#9B84D6"].includes(o.color)?"white":"black",stripe:(e=c[o.color])!==null&&e!==void 0?e:"",checkout:(t=n[o.color])!==null&&t!==void 0?t:""}}));o.colorsForegrounds=Object.assign({},r)}initializeBookingColors(){var e;const r=(e=o.property.calendar_extra)!==null&&e!==void 0?e:{booking_colors:[]};const c=Array.isArray(r===null||r===void 0?void 0:r.booking_colors)&&r.booking_colors.length?r.booking_colors:t;const n=c.map((o=>this.normalizeBookingColor(o)));this.syncCalendarExtra(n)}normalizeBookingColor(o){return{design:o.design||"skew",color:o.color||"#ffffff",name:o.name||""}}syncCalendarExtra(e){var r;const t=(r=o.property.calendar_extra)!==null&&r!==void 0?r:{};o.property.calendar_extra=Object.assign(Object.assign({},t),{booking_colors:e.map((o=>Object.assign({},o)))})}async fetchLanguage(o,t=["_PMS_FRONT"]){try{const{data:c}=await r.post(`https://gateway.igloorooms.com/IRBE/Get_Exposed_Language`,{code:o,sections:t});if(c.ExceptionMsg!==""){throw new Error(c.ExceptionMsg)}let n=this.transformArrayToObject(c.My_Result.entries);e.entries=Object.assign(Object.assign({},e.entries),n);e.direction=c.My_Result.direction;return{entries:n,direction:c.My_Result.direction}}catch(o){console.log(o);throw new Error(o)}}transformArrayToObject(o){let e={};for(const r of o){e[r.code]=r.description}return e}}export{a as R};
//# sourceMappingURL=p-fe80aa7c.js.map