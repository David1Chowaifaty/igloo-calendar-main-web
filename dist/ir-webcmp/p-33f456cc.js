import{c as o}from"./p-2925ded6.js";import{h as t}from"./p-6c4ba7c0.js";import{z as e}from"./p-e7d273da.js";import{q as s,e as n}from"./p-2cc619e5.js";import{a}from"./p-bf44a732.js";const r=e.string().regex(/^\d{4}-\d{2}-\d{2}$/,"Expected date in YYYY-MM-DD format");e.object({channel:e.string(),property_id:e.number().int().nullable(),balance_filter:e.string().nullable(),filter_type:e.union([e.number(),e.string()]).nullable(),from:r,to:r,name:e.string(),book_nbr:e.string(),booking_status:e.string(),userTypeCode:e.number().optional(),affiliate_id:e.number().int().default(0),is_mpo_managed:e.boolean().default(false),is_mpo_used:e.boolean().default(false),is_for_mobile:e.boolean().default(false),is_combined_view:e.boolean().default(false),start_row:e.number().int(),end_row:e.number().int(),total_count:e.number().int(),is_to_export:e.boolean(),property_ids:e.array(e.number().int()).optional()});const i={channels:[],settlement_methods:[],statuses:[],types:[],token:"",rowCount:10,bookings:[],balance_filter:[],pagination:{currentPage:1,totalPages:0,totalRecords:0,pageSize:10,showing:{from:0,to:0}},userSelection:{from:t().add(-7,"days").format("YYYY-MM-DD"),to:t().format("YYYY-MM-DD"),channel:"",balance_filter:null,property_id:null,start_row:0,end_row:20,total_count:0,filter_type:null,name:"",book_nbr:"",booking_status:"",affiliate_id:0,is_mpo_managed:false,is_mpo_used:false,is_for_mobile:false,is_combined_view:false,is_to_export:false},download_url:null};const{state:c,onChange:_}=o(i);function d(){c.userSelection={...c.userSelection,channel:"",booking_status:c.statuses[0].code,filter_type:c.types[0].id,book_nbr:"",name:"",from:t().add(-7,"days").format("YYYY-MM-DD"),to:t().format("YYYY-MM-DD"),start_row:0,end_row:c.rowCount,balance_filter:c.balance_filter[0].value}}function l(o){c.userSelection={...c.userSelection,...o}}function p(o,t){c.userSelection={...c.userSelection,[o]:t}}const f=(o,t,e)=>Math.min(Math.max(o,t),e);const u=(o,t,e)=>{if(e===0){return{from:0,to:0}}const s=(o-1)*t;return{from:s+1,to:Math.min(s+t,e)}};const m=(o,t)=>{if(o===0){return 0}return Math.ceil(o/t)};const g=(o,t)=>{const e=(o-1)*t;return{startRow:e,endRow:e+t}};function w(o){const t=o.end_row-o.start_row||c.pagination.pageSize||c.rowCount;const e=o.total_count;const s=m(e,t);const n=s===0?1:Math.floor(o.start_row/t)+1;c.rowCount=t;c.pagination={...c.pagination,pageSize:t,currentPage:n,totalPages:s,totalRecords:e,showing:u(n,t,e)}}function b(o){const t=c.pagination.pageSize||c.rowCount;const e=c.pagination.totalPages||Math.max(m(c.pagination.totalRecords,t),1);const s=f(o,1,Math.max(e,1));const{startRow:n,endRow:a}=g(s,t);l({start_row:n,end_row:a});c.pagination={...c.pagination,currentPage:s,showing:u(s,t,c.pagination.totalRecords)};return{startRow:n,endRow:a}}function h(o){const t=Math.max(o,1);c.rowCount=t;const e=c.pagination.totalRecords;const s=m(e,t);const n=s===0?1:f(c.pagination.currentPage,1,Math.max(s,1));const{startRow:a,endRow:r}=g(n,t);c.pagination={...c.pagination,pageSize:t,currentPage:n,totalPages:s,showing:u(n,t,e)};l({start_row:a,end_row:r});return{startRow:a,endRow:r}}class Y{async getExposedBookingsCriteria(o){const{data:t}=await a.post(`/Get_Exposed_Bookings_Criteria`,{property_id:o});const e=t.My_Result;c.channels=e.channels;c.settlement_methods=e.settlement_methods;c.statuses=e.statuses;c.types=e.types;c.balance_filter=e.balance_filter;d()}async getExposedBookings(o){const{property_id:t,userTypeCode:e,channel:r,property_ids:i,..._}=o;const d=s(e);const{data:l}=await a.post(`/Get_Exposed_Bookings`,{..._,extras:n,property_id:d?undefined:t,property_ids:d?i:null,channel:d?"":r});const p=l.My_Result;const f=l.My_Params_Get_Exposed_Bookings;c.bookings=[...p];c.userSelection={...c.userSelection,total_count:f.total_count};c.download_url=f.exported_data_url}async removeExposedBooking(o,t){await a.post(`/Remove_Exposed_Booking`,{booking_nbr:o,is_to_revover:t})}}export{Y as B,w as a,c as b,l as c,b as d,d as i,_ as o,h as s,p as u};
//# sourceMappingURL=p-33f456cc.js.map