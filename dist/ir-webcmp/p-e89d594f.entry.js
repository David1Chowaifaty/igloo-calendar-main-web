import{r as e,g as t,h as s,H as i}from"./p-d239357b.js";import{T as n}from"./p-f8b7c0cd.js";import{a as r}from"./p-bf44a732.js";const a=".sc-ir-queue-manager-h{display:flex;flex-direction:column;height:100%}";const o=a;const c=class{constructor(t){e(this,t)}get el(){return t(this)}ticket="";isLoading=true;tokenService=new n;data;componentWillLoad(){if(this.ticket){this.tokenService.setToken(this.ticket);this.init()}}handleTicketChange(e,t){if(e!==t&&e){this.tokenService.setToken(this.ticket);this.init()}}async init(){const{data:e}=await r.post("/Get_Q_Summary",{});if(e.ExceptionMsg){return}this.data=e.My_Result.map((e=>{const{pendingRequests:t,properties:s}=this.formatResults(e.properties);return{pendingRequests:t,properties:s,q_name:e.q_name,total_pending:e.total_pending}}));this.isLoading=false}formatResults(e){const t=[];const s=[];if(!e){return{properties:t,pendingRequests:s}}for(const i of e.split(",")){const[e,n]=i.split("|").map((e=>e.trim()));if(!e||n===undefined)continue;const r=Number(n);if(Number.isNaN(r))continue;t.push(e);s.push(r)}return{properties:t,pendingRequests:s}}render(){if(this.isLoading){return s("ir-loading-screen",null)}return s(i,null,s("div",{class:"ir-page__container"},s("h3",{class:"page-title"},"Pending Queues"),this.data.length===0&&s("ir-empty-state",{style:{marginTop:"20vh"}}),this.data.map((e=>s("wa-card",null,s("p",{slot:"header"},e.q_name," (",e.total_pending," total pending)"),s("ir-queue-chart",{label:e.q_name,labels:e.properties,values:e.pendingRequests}))))))}static get watchers(){return{ticket:["handleTicketChange"]}}};c.style=o;export{c as ir_queue_manager};
//# sourceMappingURL=p-e89d594f.entry.js.map