import{r as e,c as t,h as i,H as s,F as a,g as o}from"./p-ee49d535.js";import{o as n,z as d,v as l}from"./p-e1656223.js";import{l as c}from"./p-806fad31.js";import{c as r}from"./p-6bab2172.js";import{v as h}from"./p-4ed69de7.js";import{B as f}from"./p-3ad7e14a.js";import{i as b}from"./p-c71f0e9e.js";import{h as p}from"./p-6c4ba7c0.js";import{d as m}from"./p-0d7b0fa2.js";import"./p-4eb12235.js";import"./p-06203439.js";import"./p-b364a44f.js";const u=".sc-igl-application-info-h{display:block}@media only screen and (min-width: 908px){.aplicationInfoContainer.sc-igl-application-info{max-width:80%}.guest-info-container.sc-igl-application-info{max-width:300px}.preference-select-container.sc-igl-application-info{max-width:250px}}";const g=u;const y=class{constructor(i){e(this,i);this.dataUpdateEvent=t(this,"dataUpdateEvent",7);this.userRate=0;this.guestInfo=undefined;this.currency=undefined;this.roomsList=[];this.guestRefKey=undefined;this.bedPreferenceType=[];this.selectedUnits=[];this.bookingType="PLUS_BOOKING";this.defaultGuestPreference=undefined;this.index=undefined;this.defaultGuestRoomId=undefined;this.dateDifference=undefined;this.filterdRoomList=[];this.isButtonPressed=false;this.guestData=undefined}componentWillLoad(){if(this.guestInfo.isRateModified&&this.guestInfo.rateType===2){this.userRate=this.guestInfo.rate*this.dateDifference}else{this.userRate=this.guestInfo.rate}this.guestData=this.guestInfo?Object.assign({},this.guestInfo):{};this.guestData.roomId="";if(this.defaultGuestRoomId&&this.roomsList.filter((e=>e.id.toString()===this.defaultGuestRoomId.toString())).length>0){this.guestData.roomId=this.defaultGuestRoomId}this.guestData.preference=+this.defaultGuestPreference||"";this.updateRoomList()}componentDidLoad(){this.timeout=setTimeout((()=>{this.updateData()}),200)}disconnectedCallback(){clearTimeout(this.timeout)}async handleSelctedUnits(){this.updateRoomList()}updateRoomList(){const e=[...this.selectedUnits];e[this.index]=-1;this.filterdRoomList=this.roomsList.filter((t=>!e.includes(t.id)||t.name===""))}updateData(){this.dataUpdateEvent.emit({key:"roomRatePlanUpdate",guestRefKey:this.guestRefKey,data:Object.assign({},this.guestData)})}handleDataChange(e,t){this.guestData[e]=+t;if(t===""){this.guestData["roomName"]=t}if(e==="roomId"&&t!==""){this.guestData["roomName"]=this.filterdRoomList.find((e=>e.id===+t)).name||""}this.updateData()}handleGuestNameChange(e){this.guestData.guestName=e.target.value;this.updateData()}handleButtonClicked(e){switch(e.detail.key){case"book":case"bookAndCheckIn":case"save":this.isButtonPressed=true;break}}render(){return i(s,{key:"fbeb34b074eb187eebb9ff0410692d830cc47b45"},i("div",{key:"270a27c3bd7a27dd5011eb2da379d14d709167a6",class:"text-left mt-1 "},i("div",{key:"5613115e47ccbe0eeff926b86f6144a4f23af3a9",class:" mb-1 "},this.bookingType==="PLUS_BOOKING"||this.bookingType==="ADD_ROOM"||this.bookingType==="EDIT_BOOKING"?i("span",{class:"h5 mr-1"},this.guestInfo.roomCategoryName):null,i("span",{key:"f421cdcc4ea37c2914b9a087f0deb89552b761b7",class:" font-weight-bold"},this.guestInfo.ratePlanName.replace(this.guestInfo.roomCategoryName+"/",""),i("ir-tooltip",{key:"d0b932cd0a146d218da6ce345e85776d0a714361",class:" mr-1",message:this.guestInfo.cancelation+this.guestInfo.guarantee})),i("span",{key:"f0f2881dee8ec7c5065f735b39ec8c6dcc5816ae"},this.guestInfo.adult_child_offering)),i("div",{key:"ea3297f6ca21c7001a2e56c710a65e7393ea4376",class:"d-flex flex-column flex-md-row m-0 p-0 align-items-md-center aplicationInfoContainer "},i("div",{key:"c220e10a9dee8cfc58f035a40a37bdbab4fb61a4",class:"mr-1 flex-fill guest-info-container"},i("input",{key:"38d7bfb924e5e797f495dc65909924a06bfdf6d8",id:h(),type:"email",class:`form-control ${this.isButtonPressed&&this.guestData.guestName===""&&"border-danger"}`,placeholder:c.entries.Lcz_GuestFirstnameAndLastname,name:"guestName",onInput:e=>this.handleGuestNameChange(e),required:true,value:this.guestData.guestName})),i("div",{key:"db0dec843fe5c285db2e0fb34c9bf3cd4ee1b5a2",class:"mt-1 mt-md-0 d-flex align-items-center flex-fill"},r.is_frontdesk_enabled&&(this.bookingType==="PLUS_BOOKING"||this.bookingType==="ADD_ROOM"||this.bookingType==="EDIT_BOOKING")?i("div",{class:"mr-1 p-0 flex-fill  preference-select-container"},i("select",{class:`form-control  input-sm pr-0`,id:h(),onChange:e=>this.handleDataChange("roomId",e.target.value)},i("option",{value:"",selected:this.guestData.roomId===""},c.entries.Lcz_Assignunits),this.filterdRoomList.map((e=>i("option",{value:e.id,selected:+this.guestData.roomId===e.id},e.name))))):null,this.guestData.is_bed_configuration_enabled&&i("div",{key:"63790f8574f65d9e713fda8d9f88e7a5e5418c76",class:"mr-1 flex-fill"},i("select",{key:"e67975210ff259ce1ded36d2bc08904338bb0373",class:`form-control input-sm ${this.isButtonPressed&&(this.guestData.preference===""||this.guestData.preference===0)&&"border-danger"}`,id:h(),onChange:e=>this.handleDataChange("preference",e.target.value)},i("option",{key:"f555ef8914775de859af89e5f8f29bc519a278e3",value:"",selected:this.guestData.preference===""},c.entries.Lcz_BedConfiguration),this.bedPreferenceType.map((e=>i("option",{value:+e.CODE_NAME,selected:this.guestData.preference===+e.CODE_NAME},e.CODE_VALUE_EN))))),i("div",{key:"8bae45d2a608aebb8a149e2fe1781b49c87fb81f",class:""},n(this.currency.symbol,this.userRate),"/",c.entries.Lcz_Stay)))))}static get watchers(){return{selectedUnits:["handleSelctedUnits"]}}};y.style=g;const k=".sc-igl-block-dates-view-h{display:block}.sc-igl-block-dates-view-h .controlContainer.sc-igl-block-dates-view{width:24px}.sc-igl-block-dates-view-h .checkBoxContainer.sc-igl-block-dates-view input.sc-igl-block-dates-view{height:1.2rem !important;width:30px}.releaseTime.sc-igl-block-dates-view{padding-left:5px}.out-of-service-label.sc-igl-block-dates-view{margin-left:5px !important}";const x=k;const v=class{constructor(i){e(this,i);this.dataUpdateEvent=t(this,"dataUpdateEvent",7);this.blockDatesData={RELEASE_AFTER_HOURS:0,OPTIONAL_REASON:"",OUT_OF_SERVICE:false};this.releaseList=[];this.bookingService=new f;this.defaultData=undefined;this.fromDate=undefined;this.toDate=undefined;this.entryDate=undefined;this.entryHour=undefined;this.isEventHover=false;this.entryMinute=undefined;this.renderAgain=false}async componentWillLoad(){try{this.bookingService.setToken(r.token);this.releaseList=await this.bookingService.getBlockedInfo();if(this.defaultData){this.blockDatesData=Object.assign({},this.defaultData)}else{this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(this.releaseList[0].CODE_NAME);this.emitData()}}catch(e){}}handleOptionalReason(e){this.blockDatesData.OPTIONAL_REASON=e.target.value;this.emitData()}handleReleaseAfterChange(e){if(this.entryDate)this.entryDate=undefined;this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(e.target.value);this.renderPage();this.emitData()}emitData(){this.dataUpdateEvent.emit({key:"blockDatesData",data:Object.assign({},this.blockDatesData)})}getReleaseHoursString(){let e=this.entryDate?new Date(this.entryDate):new Date;if(this.entryDate&&this.entryHour&&this.entryMinute){e.setHours(this.entryHour,this.entryMinute,0,0)}else{e.setHours(e.getHours()+this.blockDatesData.RELEASE_AFTER_HOURS,e.getMinutes(),0,0)}return e.toLocaleString("default",{month:"short"})+" "+e.getDate()+", "+this.formatNumber(e.getHours())+":"+this.formatNumber(e.getMinutes())}formatNumber(e){return e<10?`0${e}`:e}handleOutOfService(e){this.blockDatesData.OUT_OF_SERVICE=e.target.checked;if(this.blockDatesData.OUT_OF_SERVICE){this.blockDatesData.OPTIONAL_REASON="";this.blockDatesData.RELEASE_AFTER_HOURS=0}this.renderPage();this.emitData()}renderPage(){this.renderAgain=!this.renderAgain}render(){return i(s,{key:"b3286c42dd58c2bc811d780e281e4e8bddd0fe31"},i("div",{key:"a65cf9d270a21f8c91266ece80b0096e86070a38",class:`m-0 p-0 mb-1`},i("div",{key:"eedf70b1c375bbcbb88928767660a85831fb0aa6",class:"text-left p-0"},i("ir-date-view",{key:"a4efaf916c1dd206b003bf9a6e8fa449154ed4dd",from_date:this.fromDate,dateOption:"DD MMM YYYY",showDateDifference:false,to_date:this.toDate}))),i("div",{key:"d395c4ceb9f593e6a48c9dfe5f0b276d5c0c3985",class:` mb-1 text-left ${this.isEventHover&&"p-0"}`},i("div",{key:"17fa014c6faaa57182970de8a20e39c945830ccc",class:"mb-1 "},i("label",{key:"b4b9760d3ca06dc34c38886e34949d88554b040d",class:"p-0 text-bold-700 font-medium-1 m-0 align-middle"},c.entries.Lcz_Reason,":"),i("div",{key:"e97dea2c258da1ffd5f0abc0eff712daeefb6da1",class:"p-0 m-0 pr-1  controlContainer checkBoxContainer d-inline-block align-middle"},i("input",{key:"236bcd643d7eb224bfbf1e15b386af1db9a12ab6",class:"form-control",type:"checkbox",checked:this.blockDatesData.OUT_OF_SERVICE,id:"userinput6",onChange:e=>this.handleOutOfService(e)})),i("span",{key:"bdad901e15ab698724ac26f39e447a504d654372",class:"align-middle out-of-service-label"},c.entries.Lcz_OutOfservice)),!this.blockDatesData.OUT_OF_SERVICE?i("div",null,i("div",{class:"mb-1 d-flex  align-items-center"},i("span",{class:"align-middle"},c.entries.Lcz_Or," "),i("div",{class:"d-inline-flex col pr-0 align-middle"},i("input",{class:"form-control",type:"text",placeholder:c.entries.Lcz_OptionalReason,id:"optReason",value:this.blockDatesData.OPTIONAL_REASON,onInput:e=>this.handleOptionalReason(e)}))),i("div",{class:"mb-1 w-100 pr-0 "},i("span",{class:"text-bold-700 font-medium-1"},c.entries.Lcz_AutomaticReleaseIn,": "),i("div",{class:"d-inline-block"},i("select",{class:"form-control input-sm",id:"zSmallSelect",onChange:e=>this.handleReleaseAfterChange(e)},this.releaseList.map((e=>i("option",{value:+e.CODE_NAME,selected:this.blockDatesData.RELEASE_AFTER_HOURS==+e.CODE_NAME},e.CODE_VALUE_EN))))),this.blockDatesData.RELEASE_AFTER_HOURS?i("div",{class:"d-inline-block releaseTime"},i("em",null,c.entries.Lcz_On," ",this.getReleaseHoursString())):null)):null))}};v.style=x;const w=".sc-igl-book-property-footer-h{display:block;margin:0;padding:0}.sc-igl-book-property-footer-h>*.sc-igl-book-property-footer{margin:auto;padding:auto}.gap-30.sc-igl-book-property-footer{gap:30px}";const D=w;const O=class{constructor(i){e(this,i);this.buttonClicked=t(this,"buttonClicked",7);this.eventType=undefined;this.disabled=true}isEventType(e){return e===this.eventType}editNext(e){if(this.isEventType("EDIT_BOOKING")){if(e==="Cancel"){return"flex-fill"}else{return"d-none d-md-block  flex-fill"}}return"flex-fill"}renderButton(e,t,s=false,a){return i("div",{class:this.shouldRenderTwoButtons()?` ${this.editNext(t)}`:"flex-fill"},i("ir-button",{btn_color:e==="cancel"?"secondary":"primary",text:t,btn_disabled:s,onClickHanlder:()=>{this.buttonClicked.emit({key:e})},icon_name:a,iconPostion:"right",style:{"--icon-size":"1rem"},icon_style:{paddingBottom:"1.9px"}}))}shouldRenderTwoButtons(){return this.isEventType("PLUS_BOOKING")||this.isEventType("ADD_ROOM")||this.isEventType("EDIT_BOOKING")}render(){return i(s,{key:"91ec45baaf193064de33573662cb0aa644308982"},i("div",{key:"248435e3abd5ed5bb6b095d8c2abed1cffb5c638",class:"d-flex justify-content-between gap-30 align-items-center"},this.isEventType("EDIT_BOOKING")?i(a,null,this.renderButton("cancel",c.entries.Lcz_Cancel),this.shouldRenderTwoButtons()&&this.renderButton("next",`${c.entries.Lcz_Next}`,b("/Get_Exposed_Booking_Availability"),"angles_right")):i(a,null,this.renderButton("cancel",c.entries.Lcz_Cancel),this.shouldRenderTwoButtons()&&this.renderButton("next",`${c.entries.Lcz_Next}`,false,"angles_right"))))}};O.style=D;const _=".sc-igl-book-property-header-h{display:block}.row.sc-igl-book-property-header{padding:0 0 0 15px;margin:0}.sourceContainer.sc-igl-book-property-header{max-width:350px}.message-label.sc-igl-book-property-header{font-size:80%}";const C=_;const I=class{constructor(i){e(this,i);this.splitBookingDropDownChange=t(this,"splitBookingDropDownChange",7);this.sourceDropDownChange=t(this,"sourceDropDownChange",7);this.adultChild=t(this,"adultChild",7);this.checkClicked=t(this,"checkClicked",7);this.buttonClicked=t(this,"buttonClicked",7);this.toast=t(this,"toast",7);this.spiltBookingSelected=t(this,"spiltBookingSelected",7);this.animateIrButton=t(this,"animateIrButton",7);this.animateIrSelect=t(this,"animateIrSelect",7);this.sourceOption={code:"",description:"",tag:"",id:"",type:""};this.splitBookingId="";this.bookingData="";this.minDate=undefined;this.sourceOptions=[];this.message=undefined;this.bookingDataDefaultDateRange=undefined;this.showSplitBookingOption=false;this.adultChildConstraints=undefined;this.splitBookings=undefined;this.adultChildCount=undefined;this.dateRangeData=undefined;this.bookedByInfoData=undefined;this.defaultDaterange=undefined;this.propertyId=undefined}getSplitBookingList(){return i("fieldset",{class:"d-flex flex-column text-left mb-1  flex-lg-row align-items-lg-center"},i("label",{class:"mr-lg-1"},c.entries.Lcz_Tobooking,"# "),i("div",{class:"btn-group mt-1 mt-lg-0 sourceContainer"},i("ir-autocomplete",{value:Object.keys(this.bookedByInfoData).length>1?`${this.bookedByInfoData.bookingNumber} ${this.bookedByInfoData.firstName} ${this.bookedByInfoData.lastName}`:"",from_date:p(this.bookingDataDefaultDateRange.fromDate).format("YYYY-MM-DD"),to_date:p(this.bookingDataDefaultDateRange.toDate).format("YYYY-MM-DD"),propertyId:this.propertyId,placeholder:c.entries.Lcz_BookingNumber,onComboboxValue:e=>{e.stopImmediatePropagation();this.spiltBookingSelected.emit(e.detail)},isSplitBooking:true})))}getSourceNode(){return i("fieldset",{class:"d-flex text-left  align-items-center"},i("label",{class:"mr-1"},c.entries.Lcz_Source," "),i("div",{class:"btn-group mt-0 flex-fill sourceContainer"},i("select",{class:"form-control input-sm",id:"xSmallSelect",onChange:e=>this.sourceDropDownChange.emit(e.target.value)},this.sourceOptions.map((e=>{if(e.type==="LABEL"){return i("optgroup",{label:e.value})}return i("option",{value:e.id,selected:this.sourceOption.code===e.id},e.value)})))))}handleAdultChildChange(e,t){let i={};if(t===""){i=Object.assign(Object.assign({},this.adultChildCount),{[e]:0})}else{i=Object.assign(Object.assign({},this.adultChildCount),{[e]:t})}this.adultChild.emit(i)}getAdultChildConstraints(){return i("div",{class:"mt-1 mt-lg-0 d-flex flex-column text-left"},i("div",{class:"form-group my-lg-0 text-left d-flex align-items-center justify-content-between justify-content-sm-start"},i("fieldset",null,i("div",{class:"btn-group "},i("ir-select",{onSelectChange:e=>this.handleAdultChildChange("adult",e.detail),select_id:"adult_child_select",firstOption:c.entries.Lcz_AdultsCaption,LabelAvailable:false,data:Array.from(Array(this.adultChildConstraints.adult_max_nbr),((e,t)=>t+1)).map((e=>({text:e.toString(),value:e.toString()})))}))),this.adultChildConstraints.child_max_nbr>0&&i("fieldset",null,i("div",{class:"btn-group ml-1"},i("ir-select",{onSelectChange:e=>this.handleAdultChildChange("child",e.detail),select_id:"child_select",firstOption:this.renderChildCaption(),LabelAvailable:false,data:Array.from(Array(this.adultChildConstraints.child_max_nbr),((e,t)=>t+1)).map((e=>({text:e.toString(),value:e.toString()})))}))),i("ir-button",{btn_id:"check_availability",isLoading:b("/Get_Exposed_Booking_Availability"),icon:"",size:"sm",class:"ml-2",text:c.entries.Lcz_Check,onClickHanlder:()=>this.handleButtonClicked()})))}renderChildCaption(){const e=this.adultChildConstraints.child_max_age;let t=c.entries.Lcz_Years;if(e===1){t=c.entries.Lcz_Year}return`${c.entries.Lcz_ChildCaption} < ${this.adultChildConstraints.child_max_age} ${t}`}handleButtonClicked(){if(this.isEventType("SPLIT_BOOKING")&&Object.keys(this.bookedByInfoData).length<=1){this.toast.emit({type:"error",title:c.entries.Lcz_ChooseBookingNumber,description:"",position:"top-right"})}else if(this.isEventType("ADD_ROOM")||this.isEventType("SPLIT_BOOKING")){const e=p(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date));const t=p(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date));const i=p(new Date(this.dateRangeData.fromDate));const s=p(new Date(this.dateRangeData.toDate));if(s.isBefore(t)||i.isAfter(e)){this.toast.emit({type:"error",title:`${c.entries.Lcz_CheckInDateShouldBeMAx.replace("%1",p(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date)).format("ddd, DD MMM YYYY")).replace("%2",p(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date)).format("ddd, DD MMM YYYY"))}  `,description:"",position:"top-right"});return}else if(this.adultChildCount.adult===0){this.toast.emit({type:"error",title:c.entries.Lcz_PlzSelectNumberOfGuests,description:"",position:"top-right"});this.animateIrSelect.emit("adult_child_select")}else{this.buttonClicked.emit({key:"check"})}}else if(this.minDate&&new Date(this.dateRangeData.fromDate).getTime()>new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date).getTime()){this.toast.emit({type:"error",title:`${c.entries.Lcz_CheckInDateShouldBeMAx.replace("%1",p(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date)).format("ddd, DD MMM YYYY")).replace("%2",p(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date)).format("ddd, DD MMM YYYY"))}  `,description:"",position:"top-right"})}else if(this.adultChildCount.adult===0){this.animateIrSelect.emit("adult_child_select");this.toast.emit({type:"error",title:c.entries.Lcz_PlzSelectNumberOfGuests,description:"",position:"top-right"})}else{this.buttonClicked.emit({key:"check"})}}isEventType(e){return this.bookingData.event_type===e}render(){const e=this.showSplitBookingOption?this.getSplitBookingList():this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")?false:true;return i(s,{key:"42afe5ef31fe34050fc172dbd94703f7542527fc"},this.isEventType("SPLIT_BOOKING")&&this.getSplitBookingList(),e&&this.getSourceNode(),i("div",{key:"601a75e6a7d73fe1f2db2e41eaf249b8a889a9d9",class:`d-flex flex-column flex-lg-row align-items-lg-center ${e?"mt-1":""}`},i("fieldset",{key:"2ff006d80b5b365a548d547222117d5acbbf6976",class:"mt-lg-0  "},i("igl-date-range",{key:"a46c983dafab6b5dc70b1daa91ae39b57b979d14",dateLabel:c.entries.Lcz_Dates,minDate:this.isEventType("PLUS_BOOKING")?p().add(-1,"months").startOf("month").format("YYYY-MM-DD"):this.minDate,disabled:this.isEventType("BAR_BOOKING")||this.isEventType("SPLIT_BOOKING"),defaultData:this.bookingDataDefaultDateRange})),!this.isEventType("EDIT_BOOKING")&&this.getAdultChildConstraints()),i("p",{key:"22fdd3dd81b90e58198b2f480d70ec0e2a0527f3",class:"text-right mt-1 message-label"},r.tax_statement))}};I.style=C;const B=".sc-igl-booking-overview-page-h{display:block}.sc-igl-booking-overview-page-h>*.sc-igl-booking-overview-page{margin:0;padding:auto}.scrollContent.sc-igl-booking-overview-page{height:calc(100% - 79px);overflow:auto;position:relative}.loading-container.sc-igl-booking-overview-page{display:flex;align-items:center;justify-content:center;height:100%;background:white;position:absolute;inset:0;z-index:100}.loader.sc-igl-booking-overview-page{width:1.25rem;height:1.25rem;border:2.5px solid #3f3f3f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}";const j=B;const N=class{constructor(i){e(this,i);this.roomsDataUpdate=t(this,"roomsDataUpdate",7);this.bookingData=undefined;this.propertyId=undefined;this.message=undefined;this.showSplitBookingOption=undefined;this.eventType=undefined;this.currency=undefined;this.adultChildConstraints=undefined;this.ratePricingMode=undefined;this.dateRangeData=undefined;this.defaultDaterange=undefined;this.selectedRooms=undefined;this.adultChildCount=undefined;this.sourceOptions=undefined;this.bookedByInfoData=undefined;this.initialRoomIds=undefined}getSplitBookings(){return this.bookingData.hasOwnProperty("splitBookingEvents")&&this.bookingData.splitBookingEvents||[]}isEventType(e){return e===this.eventType}setMinDate(){if(!this.isEventType("EDIT_BOOKING")){return}const e=p(this.bookingData.FROM_DATE,"YYYY-MM-DD");const t=p();if(e.isAfter(t)){return t.add(-2,"weeks").format("YYYY-MM-DD")}return e.add(-2,"weeks").format("YYYY-MM-DD")}render(){var e,t;return i(s,{key:"8eedffa03fad5bdb6fe4cbdeb5ae0e100cee88de"},i("igl-book-property-header",{key:"27e842c778192579f7cee8054ca818fa958efe77",bookedByInfoData:this.bookedByInfoData,defaultDaterange:this.defaultDaterange,dateRangeData:this.dateRangeData,minDate:this.setMinDate(),adultChildCount:this.adultChildCount,splitBookingId:this.showSplitBookingOption,bookingData:this.bookingData,sourceOptions:this.sourceOptions,message:this.message,bookingDataDefaultDateRange:this.bookingData.defaultDateRange,showSplitBookingOption:this.showSplitBookingOption,adultChildConstraints:this.adultChildConstraints,splitBookings:this.getSplitBookings(),propertyId:this.propertyId}),i("div",{key:"f2e4076005f803d9bdf5761366d57a9d5fcb71d6",class:" text-left"},b("/Get_Exposed_Booking_Availability")&&this.isEventType("EDIT_BOOKING")?i("div",{class:"loading-container"},i("div",{class:"loader"})):i(a,null,(t=(e=this.bookingData)===null||e===void 0?void 0:e.roomsInfo)===null||t===void 0?void 0:t.map((e=>i("igl-booking-rooms",{initialRoomIds:this.initialRoomIds,isBookDisabled:Object.keys(this.bookedByInfoData).length<=1,key:`room-info-${e.id}`,currency:this.currency,ratePricingMode:this.ratePricingMode,dateDifference:this.dateRangeData.dateDifference,bookingType:this.bookingData.event_type,roomTypeData:e,class:"mt-2 mb-1 p-0",roomInfoId:this.selectedRooms.has(`c_${e.id}`)?e.id:null,defaultData:this.selectedRooms.get(`c_${e.id}`),onDataUpdateEvent:e=>this.roomsDataUpdate.emit(e.detail)}))))),i("igl-book-property-footer",{key:"439de53cc29e8213c2bc058ce5686c6b1701e7a9",class:"p-0 mb-1 mt-3",eventType:this.bookingData.event_type,disabled:this.selectedRooms.size===0}))}};N.style=j;const R=".sc-igl-booking-room-rate-plan-h{display:block;margin-bottom:0.5rem}.currency.sc-igl-booking-room-rate-plan{display:block;position:absolute;margin:0;padding:0;height:auto;left:10px}.rate-input.sc-igl-booking-room-rate-plan{font-size:14px;line-height:0;padding:0;height:0;border-left:0}.rate-input-container.sc-igl-booking-room-rate-plan{display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;flex:1}.new-currency.sc-igl-booking-room-rate-plan{color:#3b4781;border:1px solid #cacfe7;font-size:0.975rem;height:2rem;background:white;border-right:0;border-top-right-radius:0;border-bottom-right-radius:0;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.input-group-prepend.sc-igl-booking-room-rate-plan span[data-state='focus'].sc-igl-booking-room-rate-plan{border-color:var(--blue)}.input-group-prepend.sc-igl-booking-room-rate-plan span[data-disabled].sc-igl-booking-room-rate-plan{background-color:#eceff1;border-color:rgba(118, 118, 118, 0.3)}@media only screen and (min-width: 1200px){.rateplan-name-container.sc-igl-booking-room-rate-plan{width:40%}.rateplan-container.sc-igl-booking-room-rate-plan{width:40%}}@media only screen and (min-width: 991px){.max-w-300.sc-igl-booking-room-rate-plan{max-width:200px}.rate-input-container.sc-igl-booking-room-rate-plan{max-width:150px}}@media only screen and (min-width: 991px) and (max-width: 1300px){.rateplan-name-container.sc-igl-booking-room-rate-plan{width:20%}}@media only screen and (max-width: 768px){.booking-btn.sc-igl-booking-room-rate-plan{width:100%}}.total-nights-container.sc-igl-booking-room-rate-plan{width:max-content}.nightBorder.sc-igl-booking-room-rate-plan{border-left-width:0;border-top-right-radius:3px !important;border-bottom-right-radius:3px !important}";const Y=R;const M=class{constructor(i){e(this,i);this.dataUpdateEvent=t(this,"dataUpdateEvent",7);this.gotoSplitPageTwoEvent=t(this,"gotoSplitPageTwoEvent",7);this.defaultData=undefined;this.ratePlanData=undefined;this.totalAvailableRooms=undefined;this.index=undefined;this.ratePricingMode=[];this.currency=undefined;this.physicalrooms=undefined;this.shouldBeDisabled=undefined;this.dateDifference=undefined;this.bookingType="PLUS_BOOKING";this.fullyBlocked=undefined;this.isBookDisabled=false;this.defaultRoomId=undefined;this.selectedRoom=undefined;this.is_bed_configuration_enabled=undefined;this.isInputFocused=false;this.selectedData=undefined;this.ratePlanChangedState=false}getAvailableRooms(e){let t=[];e.forEach((e=>{if(e.Is_Fully_Available){t.push({name:e.name,id:e.pr_id})}}));return t}componentWillLoad(){this.updateSelectedRatePlan(this.ratePlanData)}disableForm(){if(this.bookingType==="EDIT_BOOKING"&&this.shouldBeDisabled){return false}else{return this.selectedData.is_closed||this.totalAvailableRooms===0||r.is_frontdesk_enabled&&this.selectedData.physicalRooms.length===0}}setAvailableRooms(e){let t=this.getAvailableRooms(e);if(this.bookingType==="EDIT_BOOKING"&&this.shouldBeDisabled){if(this.selectedRoom){t.push({id:this.selectedRoom.roomId,name:this.selectedRoom.roomName});t.sort(((e,t)=>{if(e.name<t.name){return-1}if(e.name>t.name){return 1}return 0}))}}return t}getSelectedOffering(e){return this.ratePlanData.variations.find((t=>t.adult_child_offering===e))}updateSelectedRatePlan(e){var t;this.selectedData={is_bed_configuration_enabled:this.is_bed_configuration_enabled,ratePlanId:e.id,adult_child_offering:e.variations[0].adult_child_offering,rateType:1,totalRooms:0,rate:(t=e.variations[0].amount)!==null&&t!==void 0?t:0,ratePlanName:e.name,adultCount:e.variations[0].adult_nbr,childrenCount:e.variations[0].child_nbr,cancelation:e.cancelation,guarantee:e.guarantee,isRateModified:false,defaultSelectedRate:0,index:this.index,is_closed:e.is_closed,physicalRooms:this.setAvailableRooms(this.ratePlanData.assignable_units),dateDifference:this.dateDifference};if(this.defaultData){for(const[e,t]of Object.entries(this.defaultData)){this.selectedData[e]=t}this.selectedData["rateType"]=1}}componentDidLoad(){if(this.defaultData){this.dataUpdateEvent.emit({key:"roomRatePlanUpdate",changedKey:"physicalRooms",data:this.selectedData})}}async ratePlanDataChanged(e){this.selectedData=Object.assign(Object.assign({},this.selectedData),{adult_child_offering:e.variations[0].adult_child_offering,adultCount:e.variations[0].adult_nbr,childrenCount:e.variations[0].child_nbr,rate:this.handleRateDaysUpdate(),physicalRooms:this.setAvailableRooms(e.assignable_units)});this.dataUpdateEvent.emit({key:"roomRatePlanUpdate",changedKey:"rate",data:this.selectedData})}handleRateDaysUpdate(){if(this.selectedData.isRateModified){return this.selectedData.defaultSelectedRate}const e=this.getSelectedOffering(this.selectedData.adult_child_offering);return e?e.amount:0}handleInput(e){const t=e.target;let i=t.value.replace(/[^0-9.]/g,"");const s=/^\d*\.?\d*$/;if(!s.test(i)){i=i.substring(0,i.length-1)}t.value=i;if(i){this.selectedData.isRateModified=true;this.handleDataChange("rate",e)}else{this.selectedData=Object.assign(Object.assign({},this.selectedData),{rate:-1,totalRooms:0});this.dataUpdateEvent.emit({key:"roomRatePlanUpdate",changedKey:"rate",data:this.selectedData})}}handleDataChange(e,t){const i=t.target.value;switch(e){case"adult_child_offering":this.updateOffering(i);break;case"rate":this.updateRate(i);break;default:this.updateGenericData(e,i);break}this.dataUpdateEvent.emit({key:"roomRatePlanUpdate",changedKey:e,data:this.selectedData})}updateOffering(e){const t=this.getSelectedOffering(e);if(t){this.selectedData=Object.assign(Object.assign({},this.selectedData),{adult_child_offering:e,adultCount:t.adult_nbr,childrenCount:t.child_nbr,rate:t.amount,isRateModified:false})}}updateRate(e){const t=e===""?0:Number(e);this.selectedData=Object.assign(Object.assign({},this.selectedData),{rate:t,totalRooms:e===""?0:this.selectedData.totalRooms,defaultSelectedRate:this.selectedData.rateType===2?t/this.dateDifference:t})}updateGenericData(e,t){this.selectedData=Object.assign(Object.assign({},this.selectedData),{[e]:t===""?0:parseInt(t)})}bookProperty(){this.dataUpdateEvent.emit({key:"clearData",data:this.selectedData});this.handleDataChange("totalRooms",{target:{value:"1"}});this.gotoSplitPageTwoEvent.emit({key:"gotoSplitPage",data:""})}renderRate(){if(this.selectedData.isRateModified){console.log("selectedData.rate",this.selectedData.rate);return this.selectedData.rate===-1?"":this.selectedData.rate}return this.selectedData.rateType===1?Number(this.selectedData.rate).toFixed(2):Number(this.selectedData.rate/this.dateDifference).toFixed(2)}render(){return i(s,{key:"356b8826134664eeb825871356fc929345434317"},i("div",{key:"f6a68670c710762d14b4428dd27368fed1fa7d0e",class:"d-flex flex-column m-0 p-0 flex-lg-row align-items-lg-center justify-content-lg-between "},i("div",{key:"b1ecc1a21b1ce24fcb68656aeabb91af25e6db45",class:"rateplan-name-container"},this.bookingType==="BAR_BOOKING"?i(a,null,i("span",{class:"font-weight-bold\t"},this.ratePlanData.name.split("/")[0]),i("span",null,"/",this.ratePlanData.name.split("/")[1])):i("span",null,this.ratePlanData.short_name),i("ir-tooltip",{key:"f35615ed067566c4e8e65dd90fcae117d803399c",message:this.ratePlanData.cancelation+this.ratePlanData.guarantee})),i("div",{key:"28859d7dad14dacbc8d3fc93be1422666fca87c6",class:"d-md-flex justify-content-md-end  align-items-md-center flex-fill rateplan-container"},i("div",{key:"786c39f1bcb7d2a442254d32e66902e5fe9b21b6",class:"mt-1 mt-md-0 flex-fill max-w-300"},i("fieldset",{key:"3a393e10b166076a1b9e43130e2fe2bc81070a43",class:"position-relative"},i("select",{key:"667ee7bbb7fab977528e1d76fbdcba20a3f6cf9c",disabled:this.disableForm(),class:"form-control  input-sm",id:h(),onChange:e=>this.handleDataChange("adult_child_offering",e)},this.ratePlanData.variations.map((e=>i("option",{value:e.adult_child_offering,selected:this.selectedData.adult_child_offering===e.adult_child_offering},e.adult_child_offering)))))),i("div",{key:"b7521d7597ba65b4aa573d8118ff3ca27dc71885",class:"m-0 p-0 mt-1 mt-md-0 d-flex justify-content-between align-items-md-center ml-md-1 "},i("div",{key:"9afc78c8335b27dc6fd4bfddca1db4bcc54c52c2",class:" d-flex  m-0 p-0 rate-total-night-view  mt-0"},i("fieldset",{key:"c0139ab1092f97c10123712c1285773c44a5f886",class:"position-relative has-icon-left m-0 p-0 rate-input-container  "},i("div",{key:"e7abde4be5d1598c1d48c8f843297f9b51a2c628",class:"input-group-prepend"},i("span",{key:"595719080cc83bc5dbf3db8b81f34352224656e9","data-disabled":this.disableForm(),"data-state":this.isInputFocused?"focus":"",class:"input-group-text new-currency",id:"basic-addon1"},this.currency.symbol)),i("input",{key:"622e78e1449c4d504dc23461aa99ca404d3d6df5",onFocus:()=>this.isInputFocused=true,onBlur:()=>this.isInputFocused=false,disabled:this.disableForm(),type:"text",class:"form-control pl-0 input-sm rate-input py-0 m-0 rounded-0 rateInputBorder",value:this.renderRate(),id:h(),placeholder:c.entries.Lcz_Rate||"Rate",onInput:e=>this.handleInput(e)})),i("fieldset",{key:"8e8b4a62bb109d2b7576d994fd1c9a78103c182a",class:"position-relative m-0 total-nights-container p-0 "},i("select",{key:"0b918d53c2c4c154ee2f710ff9c9e3df9c28324d",disabled:this.disableForm(),class:"form-control input-sm m-0 nightBorder rounded-0 m-0  py-0",id:h(),onChange:e=>this.handleDataChange("rateType",e)},this.ratePricingMode.map((e=>i("option",{value:e.CODE_NAME,selected:this.selectedData.rateType===+e.CODE_NAME},e.CODE_VALUE_EN)))))),this.bookingType==="PLUS_BOOKING"||this.bookingType==="ADD_ROOM"?i("div",{class:"flex-fill  mt-lg-0 ml-1 m-0 mt-md-0 p-0"},i("fieldset",{class:"position-relative"},i("select",{disabled:this.selectedData.rate===0||this.disableForm(),class:"form-control input-sm",id:h(),onChange:e=>this.handleDataChange("totalRooms",e)},Array.from({length:this.totalAvailableRooms+1},((e,t)=>t)).map((e=>i("option",{value:e,selected:this.selectedData.totalRooms===e},e)))))):null),this.bookingType==="EDIT_BOOKING"?i(a,null,i("div",{class:" m-0 p-0  mt-lg-0  ml-md-1 mt-md-1 d-none d-md-block"},i("fieldset",{class:"position-relative"},i("input",{disabled:this.disableForm(),type:"radio",name:"ratePlanGroup",value:"1",onChange:e=>this.handleDataChange("totalRooms",e),checked:this.selectedData.totalRooms===1}))),i("button",{disabled:this.selectedData.rate===-1||this.disableForm(),type:"button",class:"btn btn-primary booking-btn mt-lg-0 btn-sm ml-md-1  mt-1 d-md-none ",onClick:()=>this.bookProperty()},this.selectedData.totalRooms===1?c.entries.Lcz_Current:c.entries.Lcz_Select)):null,this.bookingType==="BAR_BOOKING"||this.bookingType==="SPLIT_BOOKING"?i("button",{disabled:this.selectedData.rate===-1||this.disableForm()||this.bookingType==="SPLIT_BOOKING"&&this.isBookDisabled,type:"button",class:"btn btn-primary booking-btn mt-lg-0 btn-sm ml-md-1  mt-1 ",onClick:()=>this.bookProperty()},c.entries.Lcz_Book):null)))}static get watchers(){return{ratePlanData:["ratePlanDataChanged"]}}};M.style=Y;const T=".sc-igl-booking-rooms-h{display:block}.margin-bottom-8.sc-igl-booking-rooms{margin-bottom:8px !important}";const S=T;const E=class{constructor(i){e(this,i);this.dataUpdateEvent=t(this,"dataUpdateEvent",7);this.validBookingTypes=["PLUS_BOOKING","ADD_ROOM","EDIT_BOOKING","SPLIT_BOOKING"];this.roomTypeData=undefined;this.defaultData=undefined;this.bookingType="PLUS_BOOKING";this.dateDifference=undefined;this.ratePricingMode=[];this.roomInfoId=null;this.currency=undefined;this.selectedRooms=[];this.totalRooms=undefined;this.isBookDisabled=undefined;this.initialRoomIds=undefined;this.roomsDistributions=[]}componentWillLoad(){this.initializeRoomData()}initializeRoomData(){const{inventory:e,rateplans:t}=this.roomTypeData;this.totalRooms=e||0;this.selectedRooms=new Array(t.length).fill(0);this.roomsDistributions=this.calculateInitialDistributions(t,e)}handleRoomTypeData(){this.initializeRoomData()}calculateInitialDistributions(e,t){let i=new Array(e.length).fill(t);if(this.defaultData&&this.bookingType!=="EDIT_BOOKING"&&t>0){let e=[];let t=0;this.defaultData.forEach((s=>{this.selectedRooms[s.index]=s.totalRooms;i[s.index]=s.totalRooms;t+=s.totalRooms;e.push(s.index)}));if(e.length<i.length){i.forEach(((s,a)=>{if(!e.includes(a)){if(t===this.totalRooms){i[a]=0}else{i[a]=i[a]-t}}else{if(t<this.totalRooms){i[a]=this.totalRooms-t+i[a]}}}))}}else{i.fill(t)}return i}onRoomDataUpdate(e,t){e.stopImmediatePropagation();const{detail:{data:i,changedKey:s}}=e;let a=Object.assign({},i);if(s==="totalRooms"){this.handleTotalRoomsUpdate(t,a.totalRooms)}a=Object.assign(Object.assign({},a),{roomCategoryId:this.roomTypeData.id,roomCategoryName:this.roomTypeData.name,inventory:this.roomTypeData.inventory});this.dataUpdateEvent.emit({key:i.key,data:a,changedKey:s})}handleTotalRoomsUpdate(e,t){if(this.selectedRooms[e]!==t){this.selectedRooms[e]=t;this.updateRatePlanTotalRooms(e)}}updateRatePlanTotalRooms(e){const t=e=>this.selectedRooms.reduce(((t,i,s)=>s!==e?t+i:t),0);const i=this.selectedRooms.map(((i,s)=>{if(s===e){return this.roomsDistributions[s]}const a=t(s);const o=this.totalRooms-a;return o>0?o:0}));if(JSON.stringify(this.roomsDistributions)!==JSON.stringify(i)){this.roomsDistributions=[...i]}}render(){const e=this.validBookingTypes.includes(this.bookingType);return i(s,{key:"5f9a4ade4b03414ad28c3a3d6809e2c9a4be4f73"},e&&this.roomTypeData.rateplans.length>0&&i("div",{key:"7f201a4719eb91460512a4c4fb50ae3c2de3ab15",class:"font-weight-bold font-medium-1 margin-bottom-8 "},this.roomTypeData.name),this.roomTypeData.rateplans.map(((t,s)=>{if(t.variations!==null){let a=this.roomInfoId&&this.roomInfoId===this.roomTypeData.id;let o=-1;if(a&&this.initialRoomIds){o=this.initialRoomIds.roomId}return i("igl-booking-room-rate-plan",{is_bed_configuration_enabled:this.roomTypeData.is_bed_configuration_enabled,index:s,isBookDisabled:this.isBookDisabled,key:`rate-plan-${t.id}`,ratePricingMode:this.ratePricingMode,class:e?"":"",currency:this.currency,dateDifference:this.dateDifference,ratePlanData:t,totalAvailableRooms:this.roomsDistributions[s],bookingType:this.bookingType,defaultData:this.defaultData&&this.defaultData.get(`p_${t.id}`)||null,shouldBeDisabled:a,onDataUpdateEvent:e=>this.onRoomDataUpdate(e,s),physicalrooms:this.roomTypeData.physicalrooms,defaultRoomId:o,selectedRoom:this.initialRoomIds})}else{return null}})))}static get watchers(){return{roomTypeData:["handleRoomTypeData"]}}};E.style=S;const L=".sc-igl-date-range-h{display:flex;align-items:center !important;font-size:14px !important}.date-range-input.sc-igl-date-range{margin:0;padding:0;display:flex;flex:1;cursor:pointer;width:220px !important;opacity:0;user-select:none;font-size:14px !important}.iglRangeNights.sc-igl-date-range{margin:0;padding:0}.date-view.sc-igl-date-range{position:absolute;background:white;pointer-events:none;cursor:pointer;display:block;margin-left:14px;margin-right:14px;font-size:13.65px !important;display:flex;align-items:center;inset:0}.date-view.sc-igl-date-range svg.sc-igl-date-range{padding:0 !important;margin:0;margin-right:10px}.calendarPickerContainer.sc-igl-date-range{display:flex !important;position:relative !important;text-align:left;align-items:center !important;padding:0 !important;margin:0;border:1px solid var(--ir-date-range-border, #379ff2);width:var(--ir-date-range-width, 245px);transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.calendarPickerContainer.sc-igl-date-range:focus-within{border-color:#379ff2}.calendarPickerContainer[data-state='disabled'].sc-igl-date-range{border:0px;width:280px}.date-view[data-state='disabled'].sc-igl-date-range,.date-range-input[data-state='disabled'].sc-igl-date-range{margin:0;cursor:default}";const A=L;const G=class{constructor(i){e(this,i);this.dateSelectEvent=t(this,"dateSelectEvent",7);this.toast=t(this,"toast",7);this.totalNights=0;this.fromDateStr="from";this.toDateStr="to";this.defaultData=undefined;this.disabled=false;this.minDate=undefined;this.dateLabel=undefined;this.maxDate=undefined;this.withDateDifference=true;this.renderAgain=false}getStringDateFormat(e){return e.getFullYear()+"-"+(e.getMonth()<9?"0":"")+(e.getMonth()+1)+"-"+(e.getDate()<=9?"0":"")+e.getDate()}initializeDates(){let e=new Date;e.setHours(0,0,0,0);e.setDate(e.getDate()+1);if(this.defaultData){if(this.defaultData.fromDate){this.fromDate=new Date(this.defaultData.fromDate);this.fromDate.setHours(0,0,0,0);this.fromDateStr=this.getFormattedDateString(this.fromDate)}if(this.defaultData.toDate){this.toDate=new Date(this.defaultData.toDate);this.toDate.setHours(0,0,0,0);this.toDateStr=this.getFormattedDateString(this.toDate)}}if(this.fromDate&&this.toDate){this.calculateTotalNights();this.handleDateSelectEvent("selectedDateRange",{fromDate:this.fromDate.getTime(),toDate:this.toDate.getTime(),fromDateStr:this.fromDateStr,toDateStr:this.toDateStr,dateDifference:this.totalNights})}}componentWillLoad(){this.initializeDates()}handleDataChange(e,t){if(JSON.stringify(e)!==JSON.stringify(t)){this.initializeDates()}}calculateTotalNights(){this.totalNights=m(p(this.fromDate).format("YYYY-MM-DD"),p(this.toDate).format("YYYY-MM-DD"))}getFormattedDateString(e){return e.getDate()+" "+e.toLocaleString("default",{month:"short"}).toLowerCase()+" "+e.getFullYear()}handleDateSelectEvent(e,t=""){this.dateSelectEvent.emit({key:e,data:t})}handleDateChange(e){const{start:t,end:i}=e.detail;this.fromDate=t.toDate();this.toDate=i.toDate();this.calculateTotalNights();this.handleDateSelectEvent("selectedDateRange",{fromDate:this.fromDate.getTime(),toDate:this.toDate.getTime(),fromDateStr:t.format("DD MMM YYYY"),toDateStr:i.format("DD MMM YYYY"),dateDifference:this.totalNights});this.renderAgain=!this.renderAgain}render(){return i(s,{key:"ecbdcd405b3ae2648b66afa5b21dc7ca1d9a1a4e"},i("div",{key:"7965d0fc79030eb35a45f0d0962be0053469ac9f",class:"calendarPickerContainer form-control input-sm","data-state":this.disabled?"disabled":"active"},i("ir-date-picker",{key:"3bb9b93db19bfdb680b5059f5c5c775b4cde910d",maxDate:this.maxDate,class:"date-range-input",disabled:this.disabled,fromDate:this.fromDate,toDate:this.toDate,minDate:this.minDate,autoApply:true,"data-state":this.disabled?"disabled":"active",onDateChanged:e=>{this.handleDateChange(e)}}),i("div",{key:"2c9e3242d1988cc15c7c009f93a466f2bc39efaa","data-state":this.disabled?"disabled":"active",class:"date-view"},i("svg",{key:"c63837c51587096d84aeca5d7b576d56c3bdc7e3",xmlns:"http://www.w3.org/2000/svg",height:"12",width:"10.5",viewBox:"0 0 448 512"},i("path",{key:"94ee7fbea9333cce918fd7498f2ef6b90fec3e4b",fill:"currentColor",d:"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z"})),i("ir-date-view",{key:"8432a6fcddf5764aef4dd90b26e821e61ff16b87",showDateDifference:this.disabled,from_date:this.fromDate,to_date:this.toDate}))),this.withDateDifference&&i("span",{key:"3a888872e199f98662b0999105ad1af2a74f6607"},this.totalNights&&!this.disabled?i("span",{class:"iglRangeNights mx-1"},this.totalNights+(this.totalNights>1?` ${c.entries.Lcz_Nights}`:` ${c.entries.Lcz_Night}`)):""))}static get watchers(){return{defaultData:["handleDataChange"]}}};G.style=A;const P=".sc-igl-pagetwo-h{display:block}.card-title.sc-igl-pagetwo{border-bottom:1px solid #e4e5ec}.scrollContent.sc-igl-pagetwo{height:calc(100% - 79px);overflow:auto;position:relative}.background-overlay.sc-igl-pagetwo{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.25)}.formContainer.sc-igl-pagetwo{height:calc(100% - 79px);overflow:auto}.sideWindow.sc-igl-pagetwo{position:absolute;top:0;right:0;height:100%;background-color:#ffffff}.close.sc-igl-pagetwo{float:right;font-size:1.5rem;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:0.5;padding:0;background-color:transparent;border:0;appearance:none}.close-icon.sc-igl-pagetwo{position:absolute;top:18px;right:33px;outline:none}button.sc-igl-pagetwo:not(:disabled),[type='button'].sc-igl-pagetwo:not(:disabled){cursor:pointer}.row.sc-igl-pagetwo{padding:0 0 0 15px;margin:0}";const K=P;const U=class{constructor(i){e(this,i);this.dataUpdateEvent=t(this,"dataUpdateEvent",7);this.buttonClicked=t(this,"buttonClicked",7);this.showPaymentDetails=undefined;this.currency=undefined;this.isEditOrAddRoomEvent=undefined;this.dateRangeData=undefined;this.bookingData=undefined;this.showSplitBookingOption=undefined;this.language=undefined;this.bookedByInfoData=undefined;this.propertyId=undefined;this.bedPreferenceType=undefined;this.selectedRooms=undefined;this.isLoading=undefined;this.countryNodeList=undefined;this.selectedGuestData=undefined;this.defaultGuestData=undefined;this.selectedBookedByData=undefined;this.guestData=undefined;this.selectedUnits={}}componentWillLoad(){this.initializeGuestData();this.selectedBookedByData=this.bookedByInfoData}initializeGuestData(){let e=0;const t=Object.assign({},this.selectedUnits);const i=(e,t,i,s)=>{if(i&&s===2){return e*t}return e};this.selectedUnits=t;this.guestData=[];this.selectedRooms.forEach(((s,a)=>{s.forEach((s=>{t[a]=s.selectedUnits;e+=s.totalRooms*i(s.rate,this.dateRangeData.dateDifference,s.isRateModified,s.rateType);for(let e=1;e<=s.totalRooms;e++){this.guestData.push(Object.assign({guestName:"",roomId:"",preference:""},s))}}))}));this.bookingData.TOTAL_PRICE=e}handleOnApplicationInfoDataUpdateEvent(e,t){const i=e.detail;const s=`c_${i.data.roomCategoryId}`;const a=[...this.selectedUnits[s]||[]];a[t]=i.data.roomId;this.selectedUnits=Object.assign(Object.assign({},this.selectedUnits),{[s]:a});this.dataUpdateEvent.emit({key:"applicationInfoUpdateEvent",value:e.detail})}handleEventData(e,t,i){if(t==="application-info"){this.handleOnApplicationInfoDataUpdateEvent(e,i)}else{this.selectedBookedByData=e.detail.data;this.dataUpdateEvent.emit({key:"propertyBookedBy",value:e.detail})}}isGuestDataIncomplete(){if(this.selectedGuestData.length!==this.guestData.length){return true}for(const e of this.selectedGuestData){if(e.guestName===""||e.preference===""||e.roomId===""){return true}}return false}isButtonDisabled(e){const t=(e,t,i)=>{if(!e){return true}if(e===this.selectedGuestData){return this.isGuestDataIncomplete()}if(t==="selectedArrivalTime"){if(e[t]!==undefined){return e[t].code===""}else{return true}}return e[t]===i||e[t]===undefined};return this.isLoading===e||t(this.selectedGuestData,"guestName","")||t(this.selectedBookedByData,"isdCode","")||t(this.selectedBookedByData,"contactNumber","")||t(this.selectedBookedByData,"firstName","")||t(this.selectedBookedByData,"lastName","")||t(this.selectedBookedByData,"countryId",-1)||t(this.selectedBookedByData,"selectedArrivalTime","")||t(this.selectedBookedByData,"email","")}render(){return i(s,{key:"3caadd34699a7f772e12ab6f0e59b9dae07dfbc7"},i("div",{key:"4aef1239867844a5f5fbea8ae35da2aa2e11226a",class:"d-flex flex-wrap"},i("ir-date-view",{key:"8ee703e27284a3ed6f883921fb964f9334af881e",class:"mr-1 flex-fill font-weight-bold font-medium-1",from_date:this.dateRangeData.fromDateStr,to_date:this.dateRangeData.toDateStr,dateOption:"DD MMM YYYY"}),this.guestData.length>1&&i("div",{key:"9ab7a260a9db54ff59e7b7b3f98e9b74d19d288a",class:"mt-1 mt-md-0 text-right"},c.entries.Lcz_TotalPrice," ",i("span",{key:"5fb0e6bdf0beeb902825949ef0905217fce075f3",class:"font-weight-bold font-medium-1"},n(this.currency.symbol,this.bookingData.TOTAL_PRICE||"0")))),this.guestData.map(((e,t)=>i("igl-application-info",{dateDifference:this.dateRangeData.dateDifference,defaultGuestPreference:this.defaultGuestData.bed_preference,defaultGuestRoomId:this.defaultGuestData.PR_ID,currency:this.currency,bedPreferenceType:this.bedPreferenceType,index:t,selectedUnits:this.selectedUnits[`c_${e.roomCategoryId}`],guestInfo:e,guestRefKey:t,bookingType:this.bookingData.event_type,roomsList:e.physicalRooms,onDataUpdateEvent:e=>this.handleEventData(e,"application-info",t)}))),this.isEditOrAddRoomEvent||this.showSplitBookingOption?null:i("igl-property-booked-by",{propertyId:this.propertyId,countryNodeList:this.countryNodeList,language:this.language,showPaymentDetails:this.showPaymentDetails,defaultData:this.bookedByInfoData,onDataUpdateEvent:e=>{console.log("user info details",e.detail);this.handleEventData(e,"propertyBookedBy",0)}}),this.isEditOrAddRoomEvent?i("div",{class:"d-flex p-0 mb-1 mt-2"},i("div",{class:"flex-fill mr-2"},i("ir-button",{icon:"",text:c.entries.Lcz_Back,class:"full-width",btn_color:"secondary",btn_styles:"justify-content-center",onClickHanlder:()=>this.buttonClicked.emit({key:"back"})})),i("div",{class:"flex-fill"},i("ir-button",{isLoading:this.isLoading==="save",onClickHanlder:()=>this.buttonClicked.emit({key:"save"}),btn_styles:"full-width align-items-center justify-content-center",text:c.entries.Lcz_Save}))):i("div",{class:"d-flex flex-column flex-md-row p-0 mb-1 mt-2 justify-content-md-between align-items-md-center"},i("div",{class:"flex-fill mr-md-1"},i("ir-button",{icon_name:"angles_left",btn_color:"secondary",btn_styles:"full-width align-items-center justify-content-center",onClickHanlder:()=>this.buttonClicked.emit({key:"back"}),text:c.entries.Lcz_Back,style:{"--icon-size":"1rem"},icon_style:{paddingBottom:"1.9px"}})),i("div",{class:"mt-1 mt-md-0 flex-fill"},i("ir-button",{isLoading:this.isLoading==="book",btn_styles:"full-width align-items-center justify-content-center",onClickHanlder:()=>this.buttonClicked.emit({key:"book"}),text:c.entries.Lcz_Book}))))}};U.style=K;const $=".sc-igl-property-booked-by-h{display:block}.row.sc-igl-property-booked-by{padding:0 0 0 15px;margin:0}.bookedByEmailContainer.sc-igl-property-booked-by{flex:auto;max-width:350px}.bookedDetailsForm.sc-igl-property-booked-by label.sc-igl-property-booked-by{min-width:125px;max-width:125px}.bookedDetailsForm.sc-igl-property-booked-by .form-group.sc-igl-property-booked-by{margin-bottom:10px !important}.bookedDetailsForm.sc-igl-property-booked-by .checkBoxContainer.sc-igl-property-booked-by input.sc-igl-property-booked-by{height:1.2rem !important;width:30px}.controlContainer.sc-igl-property-booked-by textarea.sc-igl-property-booked-by{height:60px !important}.margin3.sc-igl-property-booked-by{margin-bottom:5px !important}@media (min-width: 768px){.bookedByEmailContainer.sc-igl-property-booked-by{margin-left:37px}}";const z=$;const H=class{constructor(i){e(this,i);this.dataUpdateEvent=t(this,"dataUpdateEvent",7);this.bookingService=new f;this.arrivalTimeList=[];this.expiryMonths=["01","02","03","04","05","06","07","08","09","10","11","12"];this.expiryYears=[];this.currentMonth="01";this.language=undefined;this.showPaymentDetails=false;this.defaultData=undefined;this.countryNodeList=[];this.propertyId=undefined;this.isButtonPressed=false;this.bookedByData={id:undefined,email:"",firstName:"",lastName:"",countryId:"",isdCode:"",contactNumber:"",selectedArrivalTime:"",emailGuest:false,message:"",cardNumber:"",cardHolderName:"",expiryMonth:"",expiryYear:""}}async componentWillLoad(){this.bookingService.setToken(r.token);this.assignCountryCode();this.initializeExpiryYears();this.initializeDateData();this.populateBookedByData()}initializeExpiryYears(){const e=(new Date).getFullYear();this.expiryYears=Array.from({length:4},((t,i)=>(e+i).toString()))}async assignCountryCode(){const e=await this.bookingService.getUserDefaultCountry();const t=e["COUNTRY_ID"];this.country=t;this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{isdCode:t.toString(),countryId:t})}initializeDateData(){const e=new Date;const t=e.getMonth()+1;this.currentMonth=t<10?`0${t}`:t.toString()}populateBookedByData(){var e;this.bookedByData=this.defaultData?Object.assign(Object.assign({},this.bookedByData),this.defaultData):{};this.arrivalTimeList=((e=this.defaultData)===null||e===void 0?void 0:e.arrivalTime)||[];this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{selectedArrivalTime:this.arrivalTimeList[0].CODE_NAME});if(!this.bookedByData.expiryMonth){this.bookedByData.expiryMonth=this.currentMonth}if(!this.bookedByData.expiryYear){this.bookedByData.expiryYear=(new Date).getFullYear()}console.log("initial bookedby data",this.bookedByData)}handleDataChange(e,t){this.bookedByData[e]=e==="emailGuest"?t.target.checked:t.target.value;this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)});if(e==="countryId"){this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{isdCode:t.target.value})}}handleNumberInput(e,t){const i=t.target;const s=i.value;const a=/^[0-9]+$/;if(!a.test(s)){i.value=s.replace(/[^0-9]/g,"")}if(s===i.value){this.handleDataChange(e,t)}}async checkUser(){try{const e=this.bookedByData.email;if(d.string().email().safeParse(e).success){const t=await this.bookingService.getUserInfo(e);if(t!==null){this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:t.id,firstName:t.first_name,lastName:t.last_name,contactNumber:t.mobile,countryId:t.country_id,isdCode:t.country_id.toString()})}else{let t=Object.assign({},this.bookedByData);t=Object.assign(Object.assign({},t),{email:e});this.bookedByData=Object.assign({},t)}}else{let e=Object.assign({},this.bookedByData);e=Object.assign(Object.assign({},e),{email:""});this.bookedByData=Object.assign({},e)}this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)})}catch(e){}}handleComboboxChange(e){e.stopImmediatePropagation();e.stopPropagation();const{key:t,data:i}=e.detail;console.log("data",i,"key",t);switch(t){case"blur":if(i!==""){this.bookedByData.email=i;this.checkUser()}else{let e=Object.assign({},this.bookedByData);e=Object.assign(Object.assign({},e),{email:""});this.bookedByData=Object.assign({},e);this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)})}break;case"select":this.bookedByData.email=i.email;this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:i.id,firstName:i.first_name,lastName:i.last_name,contactNumber:i.mobile,countryId:i.country_id,isdCode:i.country_id.toString()});this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:this.bookedByData});break}}clearEvent(){this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:"",firstName:"",lastName:"",contactNumber:"",isdCode:this.country.toString(),countryId:this.country});this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)})}handleButtonClicked(e){switch(e.detail.key){case"book":case"bookAndCheckIn":this.isButtonPressed=true;break}}render(){return i(s,{key:"5ef086b79bab0f0592fd343aff3c84bd82a5989b"},i("div",{key:"c7057f76de3004bec068836706a35a0da2754ea3",class:"text-left mt-3"},i("div",{key:"70703b4040a5c44fa21ccbafec17988e42d55073",class:"form-group d-flex flex-column flex-md-row align-items-md-center text-left "},i("label",{key:"01bf018df7aed5a1b14bb7945d9109f1c40436e9",class:"p-0 m-0 label-control mr-1 font-weight-bold"},c.entries.Lcz_BookedBy),i("div",{key:"cdaa67d8b52962463ca39531b57b80406c8bdd5e",class:"bookedByEmailContainer mt-1 mt-md-0 d-flex align-items-center"},i("ir-autocomplete",{key:"f5c7be7863ad97ead8fc120de6f242a8d0779d7a",onComboboxValue:this.handleComboboxChange.bind(this),propertyId:this.propertyId,type:"email",value:this.bookedByData.email,required:true,class:"flex-fill",placeholder:c.entries.Lcz_FindEmailAddress,onInputCleared:()=>this.clearEvent(),danger_border:this.isButtonPressed&&this.bookedByData.email!==""&&l(this.bookedByData.email)}),i("ir-tooltip",{key:"a5eea8a985777773a83d519d921f1de19272cee4",class:"ml-1",message:"Leave empty if email is unavailable"})))),i("div",{key:"5b3fc2da25fbd5a13d63150f653ac602ea442d71",class:"bookedDetailsForm text-left mt-2 font-small-3 "},i("div",{key:"b8c741156600f82da1a2b156708f47602bac6eb4",class:"d-flex flex-column flex-md-row  justify-content-md-between "},i("div",{key:"d4da198d8f3fcb3af14d637c415936a36364ff3d",class:"p-0 flex-fill "},i("div",{key:"f818eb01b70e4ace5cf745655182dab47b73c9bd",class:"form-group d-flex flex-column flex-md-row align-items-md-center p-0 flex-fill "},i("label",{key:"be44a0425e8b6e67f39d37d46f832a771c7c5e9a",class:"p-0 m-0 margin3"},c.entries.Lcz_FirstName),i("div",{key:"9db3e1cd77317ee5f50df3f172dde20dc64a1c6f",class:"p-0 m-0  controlContainer flex-fill  "},i("input",{key:"8cd63aa72d01477b857e18637e1b32ab304a4068",class:`form-control flex-fill ${this.isButtonPressed&&this.bookedByData.firstName===""&&"border-danger"}`,type:"text",placeholder:c.entries.Lcz_FirstName,id:h(),value:this.bookedByData.firstName,onInput:e=>this.handleDataChange("firstName",e),required:true}))),i("div",{key:"665ee63200d3b0a08d55ddf72566d4fa1178a7b8",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},i("label",{key:"c146222b679b8ca18b0e8093b8cbb3a6d5a91543",class:"p-0 m-0 margin3"},c.entries.Lcz_LastName),i("div",{key:"49997d09773fed91ccdb163a49b4cb462f1954c3",class:"p-0 m-0  controlContainer flex-fill"},i("input",{key:"b8235bef6c34d357c93ab011c9f6efcb20eb4aec",class:`form-control ${this.isButtonPressed&&this.bookedByData.lastName===""&&"border-danger"}`,type:"text",placeholder:c.entries.Lcz_LastName,id:h(),value:this.bookedByData.lastName,onInput:e=>this.handleDataChange("lastName",e)}))),i("div",{key:"57f4e1ac8d170618a8050f6d2a998e0bbc24712c",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},i("label",{key:"60debc03c2960f8773be463b347e398315bfa01e",class:"p-0 m-0 margin3"},c.entries.Lcz_Country),i("div",{key:"5164dd3057a95ab74e3157010dc5da6e6103082d",class:"p-0 m-0  controlContainer flex-fill"},i("select",{key:"a83e68e979d27b675c2317e094f029b09b2784f7",class:`form-control input-sm pr-0`,id:h(),onChange:e=>this.handleDataChange("countryId",e)},i("option",{key:"32d8a977f009b37116a305900b8111c1963bb77d",value:"",selected:this.bookedByData.countryId===""},c.entries.Lcz_Select),this.countryNodeList.map((e=>i("option",{value:e.id,selected:this.bookedByData.countryId===e.id},e.name)))))),i("div",{key:"31ab8a09d4d75b3067357952ce436b1100fb5e9a",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},i("label",{key:"f1a3fdb81f7a1c24b73924947445d314ad5e4e53",class:"p-0 m-0 margin3"},c.entries.Lcz_MobilePhone),i("div",{key:"7aa64c4579863a4ecb0ce20265b0490917ff464b",class:"p-0 m-0  d-flex  controlContainer flex-fill"},i("div",{key:"435ee8cf64b8a106ef7165ae5546f7f2d9c261cf",class:" p-0 m-0"},i("select",{key:"312dd46c9c06a302f317b5080149d1ec0cf5791f",class:`form-control input-sm pr-0`,id:h(),onChange:e=>this.handleDataChange("isdCode",e)},i("option",{key:"eaf684650da844153596eeb0a989b4edb3b30c99",value:"",selected:this.bookedByData.isdCode===""},c.entries.Lcz_Isd),this.countryNodeList.map((e=>i("option",{value:e.id,selected:this.bookedByData.isdCode===e.id.toString()},e.phone_prefix))))),i("div",{key:"7626601aeeec639f673e94aa8ddd35002ce8f8f9",class:"flex-fill p-0 m-0"},i("input",{key:"382910c8503a77ed533cf590f8e2cb48b76b4afd",class:`form-control\n                     \n                      `,type:"tel",placeholder:c.entries.Lcz_ContactNumber,id:h(),value:this.bookedByData.contactNumber,onInput:e=>this.handleNumberInput("contactNumber",e)})))),i("div",{key:"941c61daa10d87921025175174f20b058996aae6",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},i("label",{key:"fc1c72cf6a491c472ebd5307abaf9ce1e0255594",class:"p-0 m-0 margin3"},c.entries.Lcz_YourArrivalTime),i("div",{key:"8d80c361e10da67b1b55a728c69f4b5e3178c044",class:"p-0 m-0  controlContainer flex-fill"},i("select",{key:"44bbc6e77f06d6f26ff7130cfdf326593b28a5ab",class:`form-control input-sm pr-0 ${this.isButtonPressed&&this.bookedByData.selectedArrivalTime.code===""&&"border-danger"}`,id:h(),onChange:e=>this.handleDataChange("selectedArrivalTime",e)},this.arrivalTimeList.map((e=>i("option",{value:e.CODE_NAME,selected:this.bookedByData.selectedArrivalTime.code===e.CODE_NAME},e.CODE_VALUE_EN))))))),i("div",{key:"3baf84658097a099ab4c2242b77008880eed92e9",class:"p-0 flex-fill  ml-md-3"},i("div",{key:"26128024b57fa07413f788e85927af1504177a4f",class:"  p-0 d-flex flex-column flex-md-row align-items-md-center "},i("label",{key:"99d934a6c9a9cfe1af45515434db73d03a45181a",class:"p-0 m-0 margin3"},c.entries.Lcz_AnyMessageForUs),i("div",{key:"ef049bf008be723cfa3f7d392fa29383892af3cb",class:"p-0 m-0  controlContainer flex-fill "},i("textarea",{key:"b28f90c70f1ddff361684657467e4a3ceb46027b",id:h(),rows:4,class:"form-control ",name:"message",value:this.bookedByData.message,onInput:e=>this.handleDataChange("message",e)}))),this.showPaymentDetails&&i(a,{key:"77ffd236beee284f08a82f413e086fbf1771d69c"},i("div",{key:"29f4d2e06c35befed49bdae9707dcf38b83ad713",class:"form-group mt-md-1  p-0 d-flex flex-column flex-md-row align-items-md-center"},i("label",{key:"ed7580d52bf0aa2f17b25762796db74d1792efc0",class:"p-0 m-0 margin3"},c.entries.Lcz_CardNumber),i("div",{key:"fc2aba890bd8c4bc546d5671a536650ebc7b4621",class:"p-0 m-0  controlContainer flex-fill"},i("input",{key:"aee212316f65c0a1602bf2fb8cd17caed83c5bb5",class:"form-control",type:"text",placeholder:"",pattern:"0-9 ",id:h(),value:this.bookedByData.cardNumber,onInput:e=>this.handleNumberInput("cardNumber",e)}))),i("div",{key:"9a2d6868550c7ae6e7bbce012d4bf2fc1d76af42",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},i("label",{key:"3be542e00b98d3d79d60c866271a01f60c3f9ca9",class:"p-0 m-0 margin3"},c.entries.Lcz_CardHolderName),i("div",{key:"1840aeb9d93c2404139f4e84f2ba9d8f0f47fb00",class:"p-0 m-0  controlContainer flex-fill"},i("input",{key:"0b74990d1cbaea6553a03deb901a77b0c4353fe0",class:"form-control",type:"text",placeholder:"",pattern:"0-9 ",id:h(),value:this.bookedByData.cardHolderName,onInput:e=>this.handleDataChange("cardHolderName",e)}))),i("div",{key:"26f3de20e8b6092100f5b8c5fc2029d6e74367b6",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},i("label",{key:"34d545128c024abdc9cb07379095386c7da11042",class:"p-0 m-0 margin3"},c.entries.Lcz_ExpiryDate),i("div",{key:"343bc22e797a889998618d4c8c53da3612842bc9",class:"p-0 m-0 row  controlContainer flex-fill"},i("div",{key:"d338ac595fd409fa46a8c0cbf55f96af349599ad",class:"p-0 m-0"},i("select",{key:"050f4168a2b9dfc35470158a9b98cd28c546cd43",class:"form-control input-sm pr-0",id:h(),onChange:e=>this.handleDataChange("expiryMonth",e)},this.expiryMonths.map((e=>i("option",{value:e,selected:e===this.bookedByData.expiryMonth},e))))),i("div",{key:"d14f49107681ce62b28589309f15a76561645bac",class:"p-0 m-0 ml-1"},i("select",{key:"2189677644acdce55202ce8cf8ba373c72abffca",class:"form-control input-sm pr-0",id:h(),onChange:e=>this.handleDataChange("expiryYear",e)},this.expiryYears.map(((e,t)=>i("option",{value:e,selected:t===this.bookedByData.expiryYear},e)))))))),i("div",{key:"30e539a50322edcd05cbf7973af534a4dbe7c4fa",class:"form-group mt-1 p-0 d-flex flex-row align-items-center"},i("label",{key:"389b83eb9db3368f1d3b1db4dfddc2e5cb79da42",class:"p-0 m-0",htmlFor:"emailTheGuestId"},c.entries.Lcz_EmailTheGuest),i("div",{key:"9861d562f924f5769b4322c85db46ee91ac80f41",class:"p-0 m-0  controlContainer flex-fill checkBoxContainer"},i("input",{key:"6256c2ff73780fddfc926afd7074d77e6c9dc557",class:"form-control",type:"checkbox",checked:this.bookedByData.emailGuest,id:"emailTheGuestId",onChange:e=>this.handleDataChange("emailGuest",e)})))))))}};H.style=z;const F=".sc-ir-autocomplete-h{display:block;position:relative}.selected.sc-ir-autocomplete{color:#fff;text-decoration:none;background-color:#666ee8}input.sc-ir-autocomplete{width:100%;position:relative;border-top-left-radius:0px !important;border-left:0 !important;border-bottom-left-radius:0px !important}label.sc-ir-autocomplete{margin:0;border-top-right-radius:0px !important;border-right:0 !important;border-bottom-right-radius:0px !important;width:fit-content;display:flex;align-items:center;padding-right:3px !important;justify-content:center;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}label[data-state='focused'].sc-ir-autocomplete{border-color:var(--blue)}.combobox.sc-ir-autocomplete{margin:0;top:30px;min-width:100%;width:max-content;display:block;z-index:10000;padding:1px;background:white;box-shadow:0px 8px 16px 0px rgba(0, 0, 0, 0.2);padding:5px 0;max-height:250px;overflow-y:auto}.dropdown-item.sc-ir-autocomplete{cursor:pointer}button.sc-ir-autocomplete{all:unset;right:4px}.combobox.sc-ir-autocomplete p.sc-ir-autocomplete,span.sc-ir-autocomplete,loader-container.sc-ir-autocomplete{padding:5px 16px;margin:0px;margin-top:2px;width:100%}.combobox.sc-ir-autocomplete p.sc-ir-autocomplete{cursor:pointer}.combobox.sc-ir-autocomplete p.sc-ir-autocomplete:hover{background:#f4f5fa}.combobox.sc-ir-autocomplete p[data-selected].sc-ir-autocomplete,.combobox.sc-ir-autocomplete p[data-selected].sc-ir-autocomplete:hover{color:#fff;text-decoration:none;background-color:#666ee8}.loader.sc-ir-autocomplete{width:14px;height:14px;border:2px solid #0f0f0f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const V=F;const W=class{constructor(i){e(this,i);this.comboboxValue=t(this,"comboboxValue",7);this.inputCleared=t(this,"inputCleared",7);this.toast=t(this,"toast",7);this.bookingService=new f;this.no_result_found="";this.duration=300;this.placeholder="";this.propertyId=undefined;this.isSplitBooking=false;this.type="text";this.name="";this.inputId=h();this.required=false;this.disabled=false;this.value=undefined;this.from_date="";this.to_date="";this.danger_border=undefined;this.inputValue="";this.data=[];this.selectedIndex=-1;this.isComboBoxVisible=false;this.isLoading=true;this.isItemSelected=undefined;this.inputFocused=false}componentWillLoad(){this.bookingService.setToken(r.token);this.no_result_found=c.entries.Lcz_NoResultsFound}handleKeyDown(e){var t;const i=this.data.length;const s=this.getHeightOfPElement();if(i>0){switch(e.key){case"ArrowUp":e.preventDefault();this.selectedIndex=(this.selectedIndex-1+i)%i;this.adjustScrollPosition(s);break;case"ArrowDown":e.preventDefault();this.selectedIndex=(this.selectedIndex+1)%i;this.adjustScrollPosition(s);break;case"Enter":case" ":case"ArrowRight":e.preventDefault();this.selectItem(this.selectedIndex);break;case"Escape":(t=this.inputRef)===null||t===void 0?void 0:t.blur();this.isComboBoxVisible=false;break}}}getHeightOfPElement(){const e=this.el.querySelector(".combobox");if(e){const t=e.querySelector("p");return t?t.offsetHeight:0}return 0}adjustScrollPosition(e,t=250){const i=this.el.querySelector(".combobox");if(i){const s=2;const a=e+s;const o=a*this.selectedIndex;let n=o-t/2+e/2;n=Math.max(0,Math.min(n,i.scrollHeight-t));i.scrollTo({top:n,behavior:"auto"})}}selectItem(e){if(this.data[e]){this.isItemSelected=true;this.comboboxValue.emit({key:"select",data:this.data[e]});this.inputValue="";this.resetCombobox()}}debounceFetchData(){clearTimeout(this.debounceTimer);this.debounceTimer=setTimeout((()=>{this.fetchData()}),this.duration)}async fetchData(){try{this.isLoading=true;let e=[];if(!this.isSplitBooking){e=await this.bookingService.fetchExposedGuest(this.inputValue,this.propertyId)}else{if(this.inputValue.split(" ").length===1){e=await this.bookingService.fetchExposedBookings(this.inputValue,this.propertyId,this.from_date,this.to_date)}}this.data=e;if(!this.isComboBoxVisible){this.isComboBoxVisible=true}}catch(e){console.log("error",e)}finally{this.isLoading=false}}handleInputChange(e){this.inputValue=e.target.value;if(this.inputValue){this.debounceFetchData()}else{clearTimeout(this.debounceTimer);this.resetCombobox(false)}}handleDocumentClick(e){const t=e.target;if(!this.el.contains(t)){this.isComboBoxVisible=false}}handleBlur(){this.inputFocused=false;setTimeout((()=>{if(this.isDropdownItem(document.activeElement)){return}if(this.isSplitBooking){if(!this.isItemSelected){if(this.data.length>0){this.comboboxValue.emit({key:"blur",data:this.inputValue})}else{if(this.inputValue!==""){this.toast.emit({type:"error",description:"",title:`The Booking #${this.inputValue} is not Available`,position:"top-right"});this.inputCleared.emit()}}this.inputValue="";this.resetCombobox()}else{this.isItemSelected=false}}else{if(!this.isItemSelected){this.comboboxValue.emit({key:"blur",data:this.inputValue});this.inputValue="";this.resetCombobox()}else{this.isItemSelected=false}}}),200)}isDropdownItem(e){return e&&e.closest(".combobox")}disconnectedCallback(){var e,t,i,s;clearTimeout(this.debounceTimer);(e=this.inputRef)===null||e===void 0?void 0:e.removeEventListener("blur",this.handleBlur);(t=this.inputRef)===null||t===void 0?void 0:t.removeEventListener("click",this.selectItem);(i=this.inputRef)===null||i===void 0?void 0:i.removeEventListener("keydown",this.handleKeyDown);(s=this.inputRef)===null||s===void 0?void 0:s.removeEventListener("focus",this.handleFocus)}handleItemKeyDown(e,t){var i;if(e.key==="Enter"||e.key===" "||e.key==="ArrowRight"){this.selectItem(t);e.preventDefault()}else if(e.key==="Escape"){this.isComboBoxVisible=false;(i=this.inputRef)===null||i===void 0?void 0:i.blur();e.preventDefault()}else{return}}renderDropdown(){var e;if(this.inputValue!==""){return i("div",{class:`position-absolute border rounded combobox`},(e=this.data)===null||e===void 0?void 0:e.map(((e,t)=>i("p",{role:"button",onKeyDown:e=>this.handleItemKeyDown(e,t),"data-selected":this.selectedIndex===t,tabIndex:0,onClick:()=>this.selectItem(t)},this.isSplitBooking?i(a,null,`${e.booking_nbr} ${e.guest.first_name} ${e.guest.last_name}`):i("div",{class:"d-flex align-items-center flex-fill"},i("p",{class:"p-0 m-0"},`${e.email}`," ",i("span",{class:"p-0 m-0"},` - ${e.first_name} ${e.last_name}`)))))),this.isLoading&&i("div",{class:"loader-container d-flex align-items-center justify-content-center"},i("div",{class:"loader"})),this.data.length===0&&!this.isLoading&&i("span",{class:"text-center"},this.no_result_found))}}handleFocus(){this.isComboBoxVisible=true;this.inputFocused=true}clearInput(){this.inputValue="";this.resetCombobox();this.inputCleared.emit(null)}resetCombobox(e=true){var t;if(e){(t=this.inputRef)===null||t===void 0?void 0:t.blur()}this.data=[];this.selectedIndex=-1;this.isComboBoxVisible=false}render(){return i(s,{key:"0d78c1ce58e53a4519b223f9a942632b46c1349e"},i("div",{key:"ec3c1ed333afaccef9d6204b47d9e7b21d7f0ece",class:"d-flex align-items-center "},i("label",{key:"09fcdda1b572c1ee16d1b255f6b8b6925a0729aa","data-state":this.inputFocused?"focused":"blured",htmlFor:this.inputId,class:`form-control input-sm ${this.danger_border&&"border-danger"}`},i("svg",{key:"ec16f1d14c40f47526cf96e9e96efdabd95e5822",xmlns:"http://www.w3.org/2000/svg",height:"12",width:"12",viewBox:"0 0 512 512"},i("path",{key:"b2eae403d4d52e7d030aee7826227ab997705881",fill:"currentColor",d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"}))),i("input",{key:"e8feacce65fcf19f20a1bc147165acb5fdc2e1e4",required:this.required,disabled:this.disabled,id:this.inputId,onKeyDown:this.handleKeyDown.bind(this),class:`form-control input-sm flex-full ${this.danger_border&&"border-danger"}`,type:this.type,name:this.name,value:this.value||this.inputValue,placeholder:this.placeholder,onBlur:this.handleBlur.bind(this),onInput:this.handleInputChange.bind(this),onFocus:this.handleFocus.bind(this),ref:e=>this.inputRef=e}),this.inputValue&&i("button",{key:"27d7e432b2e7fc97561f2e0f1cc5c024b107c7cf",type:"button",class:"position-absolute d-flex align-items-center justify-content-center ",onClick:this.clearInput.bind(this)},i("p",{key:"f930549278d46d7011ca71a7bc204581bfebc885",class:"sr-only"},"clear input"),i("svg",{key:"ccb4359ce06bfd1eb878800f2875b13def476a3a",width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i("path",{key:"ef87094cdb3a2ae6e61828f9045601732f57a5f9",d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"})))),this.isComboBoxVisible&&this.renderDropdown())}get el(){return o(this)}};W.style=V;export{y as igl_application_info,v as igl_block_dates_view,O as igl_book_property_footer,I as igl_book_property_header,N as igl_booking_overview_page,M as igl_booking_room_rate_plan,E as igl_booking_rooms,G as igl_date_range,U as igl_pagetwo,H as igl_property_booked_by,W as ir_autocomplete};
//# sourceMappingURL=p-53db2fc5.entry.js.map