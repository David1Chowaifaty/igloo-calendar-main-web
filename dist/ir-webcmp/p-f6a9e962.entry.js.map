{"version":3,"names":["irDeparturesFilterCss","IrDeparturesFilterStyle0","IrDeparturesFilter","handleSearchChange","event","setDeparturesSearchTerm","detail","render","h","key","class","name","slot","withClear","placeholder","value","departuresStore","searchTerm","this","irDeparturesTableCss","IrDeparturesTableStyle0","tableCss","IrDeparturesTableStyle1","IrDeparturesTable","renderSection","bookings","showAction","length","rows","flatMap","booking","renderBookingRows","rooms","map","room","index","renderRow","rowKey","booking_nbr","identifier","isOverdueCheckout","moment","to_date","startOf","isBefore","channelBookingNumber","channel_booking_nbr","bookingNumber","origin","guest","source","overdueCheckout","checkIn","from_date","checkOut","isDirect","is_direct","statusCode","status","code","currencySymbol","currency","symbol","financial","buttons","needsCheckOutBookings","outBookings","Host","colSpan"],"sources":["src/components/ir-departures/ir-departures-filter/ir-departures-filter.css?tag=ir-departures-filter&encapsulation=scoped","src/components/ir-departures/ir-departures-filter/ir-departures-filter.tsx","src/components/ir-departures/ir-departures-table/ir-departures-table.css?tag=ir-departures-table&encapsulation=scoped","src/common/table.css?tag=ir-departures-table&encapsulation=scoped","src/components/ir-departures/ir-departures-table/ir-departures-table.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n:host {\n  display: block;\n}\n.departures-filters__container {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n@media (min-width: 768px) {\n  .departures-filters__container {\n    flex-direction: row;\n    align-items: center;\n  }\n  .departures-filters__container > * {\n    flex: 1 1 0%;\n  }\n  .departures-filters__date-picker {\n    max-width: 200px;\n  }\n  .departures-filters__search-bar {\n    max-width: 400px;\n  }\n}\n","import { departuresStore, setDeparturesSearchTerm } from '@/stores/departures.store';\nimport { Component, h } from '@stencil/core';\n\n@Component({\n  tag: 'ir-departures-filter',\n  styleUrl: 'ir-departures-filter.css',\n  scoped: true,\n})\nexport class IrDeparturesFilter {\n  private handleSearchChange = (event: CustomEvent<string>) => {\n    setDeparturesSearchTerm(event.detail ?? '');\n  };\n\n  render() {\n    return (\n      <div class=\"departures-filters__container\">\n        <ir-custom-date-picker class=\"departures-filters__date-picker\">\n          <wa-icon name=\"calendar\" slot=\"start\"></wa-icon>\n          <wa-spinner slot=\"end\"></wa-spinner>\n        </ir-custom-date-picker>\n        <ir-custom-input\n          withClear\n          class=\"departures-filters__search-bar\"\n          placeholder=\"Search guests or bookings\"\n          value={departuresStore.searchTerm}\n          onText-change={this.handleSearchChange}\n        >\n          <wa-icon name=\"magnifying-glass\" slot=\"start\"></wa-icon>\n        </ir-custom-input>\n      </div>\n    );\n  }\n}\n",":host {\n  display: flex;\n  flex-direction: column;\n  border-radius: 0.5rem;\n  overflow-x: auto;\n  min-height: 60vh;\n  max-width: 1920px;\n  border: 1px solid var(--wa-color-neutral-border-quiet, #abaeb9);\n  /* border-bottom: 0; */\n}\n:host {\n  box-sizing: border-box !important;\n}\n\n:host *,\n:host *::before,\n:host *::after {\n  box-sizing: inherit !important;\n  padding: 0;\n  margin: 0;\n}\n\n[hidden] {\n  display: none !important;\n}\n:host {\n  background: white;\n}\n.table--container {\n  flex: 1 1 0%;\n}\n.departures-table__actions-cell {\n  display: flex;\n  min-width: 100px;\n  justify-content: flex-end;\n}\n\n@media (min-width: 1024px) {\n  .departures-table__actions-cell {\n    min-width: 250px;\n  }\n}\n","/* Base styles */\n.ir-table-row td {\n  padding: 0.5rem 1rem !important;\n  text-align: left;\n  z-index: 2;\n  background-color: white;\n  white-space: nowrap;\n  /* width: max-content;\n  max-width: max-content; */\n}\n/* .ir-table-row td:last-child {\n  width: 100%; \n}*/\n/* .ir-table-row td:first-child,\n.table thead th:first-child {\n  position: sticky;\n  left: var(--ir-table-sticky-padding,-1rem);\n} */\n\n.table td {\n  border-top: 0;\n  border-bottom: 1px solid var(--wa-color-neutral-border-quiet, #abaeb9);\n  /* border-bottom: 1px solid var(--wa-color-gray-80); */\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n}\n.table tbody tr:last-child > td {\n  border-bottom: 0 !important;\n}\n.table thead th {\n  border: none !important;\n  background: #ececec;\n  background: color-mix(in oklab, var(--wa-color-neutral-fill-quiet, #f1f2f3) 60%, transparent);\n  color: #374151;\n  padding: 0.5rem 1rem !important;\n  text-align: left;\n}\n.data-table thead th {\n  background: rgb(255, 255, 255) !important;\n  padding-top: 1rem !important;\n  padding-bottom: 1rem !important;\n  border-bottom: 1px solid var(--wa-color-neutral-70) !important;\n}\n.data-table .empty-row {\n  height: 50vh !important;\n  text-align: center;\n  color: var(--wa-color-gray-60);\n}\n\n.data-table--pagination {\n  padding: 0.5rem 1rem;\n  position: sticky;\n  bottom: 0;\n  border-top: 1px solid var(--wa-color-neutral-70);\n}\n\n/* Selected Rows Styles */\n\n.selected td {\n  background: #e3f3fa !important;\n}\n.selected td {\n  color: var(--gray-dark) !important;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n}\n\n/* Sorting styles */\n.sortable,\n.ir-table-row {\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n}\n.sortable {\n  text-transform: capitalize;\n}\n.sortable:hover {\n  color: #212529;\n  background-color: #e2e8f0 !important;\n  border-color: #dae0e5;\n  cursor: pointer;\n}\n.ir-table-row:hover td {\n  background: #e2e6ea3f !important;\n  background: var(--wa-color-neutral-fill-quiet, #f1f2f3) !important;\n}\n.sortable:active {\n  color: #212529;\n  background-color: #e2e8f0;\n  border-color: #d3d9df;\n}\n.sortable svg {\n  color: var(--blue);\n}\n/* .action-row {\n  position: sticky;\n  right:var(--ir-table-sticky-padding,-1rem);\n} */\n.sticky-column {\n  position: sticky !important;\n  right: 0;\n  background-color: white;\n}\n","import { Booking } from '@/models/booking.dto';\nimport { departuresStore } from '@/stores/departures.store';\nimport { Component, Host, h } from '@stencil/core';\nimport moment from 'moment';\n@Component({\n  tag: 'ir-departures-table',\n  styleUrls: ['ir-departures-table.css', '../../../common/table.css'],\n  scoped: true,\n})\nexport class IrDeparturesTable {\n  private renderSection(bookings: Booking[], showAction = false) {\n    if (!bookings?.length) {\n      return null;\n    }\n\n    const rows = bookings.flatMap(booking => this.renderBookingRows(booking, showAction));\n    return [...rows];\n  }\n\n  private renderBookingRows(booking: Booking, showAction: boolean) {\n    return (booking.rooms ?? []).map((room, index) => this.renderRow(booking, room, index, showAction));\n  }\n\n  private renderRow(booking: Booking, room: Booking['rooms'][number], index: number, showAction: boolean) {\n    const rowKey = `${booking.booking_nbr}-${room?.identifier ?? index}`;\n    const isOverdueCheckout = moment(room.to_date, 'YYYY-MM-DD').startOf('day').isBefore(moment().startOf('day'));\n    return (\n      <tr class=\"ir-table-row\" key={rowKey}>\n        <td class=\"sticky-column\">\n          <ir-booking-number-cell channelBookingNumber={booking.channel_booking_nbr} bookingNumber={booking.booking_nbr}></ir-booking-number-cell>\n        </td>\n        <td>\n          <ir-booked-by-source-cell origin={booking.origin} guest={booking.guest} source={booking.source}></ir-booked-by-source-cell>\n        </td>\n        <td>\n          <ir-guest-name-cell name={room.guest}></ir-guest-name-cell>\n        </td>\n        <td>\n          <ir-unit-cell room={room}></ir-unit-cell>\n        </td>\n        <td>\n          <ir-dates-cell overdueCheckout={isOverdueCheckout} checkIn={room.from_date} checkOut={room.to_date}></ir-dates-cell>\n        </td>\n        <td class=\"text-right\">\n          <ir-balance-cell\n            bookingNumber={booking.booking_nbr}\n            isDirect={booking.is_direct}\n            statusCode={booking.status.code}\n            currencySymbol={booking.currency.symbol}\n            financial={booking.financial}\n          ></ir-balance-cell>\n        </td>\n        <td>\n          <div class=\"departures-table__actions-cell\">\n            {showAction ? <ir-actions-cell buttons={isOverdueCheckout ? ['overdue_check_in'] : ['check_in']}></ir-actions-cell> : 'In-house'}\n          </div>\n        </td>\n      </tr>\n    );\n  }\n\n  render() {\n    const { needsCheckOutBookings, outBookings } = departuresStore;\n    return (\n      <Host>\n        <div class=\"table--container\">\n          <table class=\"table data-table\">\n            <thead>\n              <tr>\n                <th>\n                  <span class={'departures-table__departure__cell'}>Booking#</span>\n                </th>\n                <th>\n                  <div>\n                    <p>Booked by / Source</p>\n                  </div>\n                </th>\n                <th>Guest name</th>\n                <th>Unit</th>\n                <th>Dates</th>\n                <th class=\"text-right\">Balance</th>\n                <th></th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.renderSection(needsCheckOutBookings, true)}\n              {this.renderSection(outBookings)}\n              {!needsCheckOutBookings.length && !outBookings.length && (\n                <tr>\n                  <td colSpan={7} class=\"empty-row\">\n                    No departures found.\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n        {/* <div style={{ height: '30px' }}>pagination</div> */}\n      </Host>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}