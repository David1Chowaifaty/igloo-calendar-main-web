import{r as t,h as e,H as i,c as s,F as n,g as a}from"./p-ee49d535.js";import{b as o,m as r,B as l,c,a as d,r as h,d as f,u as b,g as p,e as u,f as m}from"./p-2b2c397a.js";import{l as g}from"./p-806fad31.js";import{i as v,c as y}from"./p-d3003ac0.js";import{f as k,e as x,g as w,d as _,z as D,v as C,Z as O,r as I}from"./p-4dc453f7.js";import{v as M}from"./p-4ed69de7.js";import{h as B}from"./p-6c4ba7c0.js";import{i as Y,a as T}from"./p-c71f0e9e.js";import{T as j}from"./p-972be3f6.js";import{R as S}from"./p-a6331b77.js";import{a as E}from"./p-06203439.js";import{c as z,i as L}from"./p-cb14c0da.js";import{c as N}from"./p-4eb12235.js";import{_ as A,a as R,b as P}from"./p-b2679b77.js";class H{formatVariationBasedOnInfants(t){const e=this.getVariationBasedOnInfants(t);return this.formatVariation(e,t.infants)}calculateVariationAmount(t){var e;return((e=this.getVariationBasedOnInfants(t))===null||e===void 0?void 0:e.discounted_amount)||0}getVariationBasedOnInfants({variations:t,baseVariation:e,infants:i}){const{adult_nbr:s,child_nbr:n}=e;return t.find((t=>t.adult_nbr===s&&t.child_nbr===Math.max(0,n-Math.max(0,i))))||e}formatVariation({child_nbr:t,adult_nbr:e},i){var s,n,a,o;const r=Number(e)||0;const l=Math.max(Number(i)||0,0);const c=r>1?g.entries.Lcz_Adults.toLowerCase():g.entries.Lcz_Adult.toLowerCase();const d=t>1?g.entries.Lcz_Children.toLowerCase():g.entries.Lcz_Child.toLowerCase();const h=l>1?(n=(s=g.entries["Lcz_Infants"])!==null&&s!==void 0?s:"infants")===null||n===void 0?void 0:n.toLowerCase():(o=(a=g===null||g===void 0?void 0:g.entries["Lcz_Infant"])!==null&&a!==void 0?a:"infant")===null||o===void 0?void 0:o.toLowerCase();const f=[`${r} ${c}`,t?`${t} ${d}`:"",l?`${l} ${h}`:""];return f.filter(Boolean).join("&nbsp&nbsp&nbsp&nbsp")}}const G=".sc-igl-application-info-h{display:block}.rate_amount.sc-igl-application-info{display:none;padding:0;margin:0}.booking-header.sc-igl-application-info{display:flex;align-items:center;justify-content:space-between;margin-bottom:0.5rem;gap:0.5rem}.non-ref-span.sc-igl-application-info{font-size:12px;color:var(--green)}.booking-roomtype-title.sc-igl-application-info{font-size:1.25rem;margin-right:0.5rem;margin:0;padding:0}.booking-details-container.sc-igl-application-info{display:flex;align-items:center;justify-content:space-between;padding:0;margin:0}.booking-rateplan.sc-igl-application-info{display:flex;align-items:center;gap:0.5rem;margin:0;padding:0}.booking-rateplan-name.sc-igl-application-info{font-weight:bold;margin:0;padding:0}.booking-tooltip.sc-igl-application-info{margin-right:0.5rem;margin:0;padding:0}.booking-variation.sc-igl-application-info{margin:0;padding:0}.booking-price.sc-igl-application-info{margin:0;padding:0}.booking-footer.sc-igl-application-info{display:flex;align-items:center;justify-content:space-between;padding:0;margin-bottom:0.5rem}.booking-details-container.sc-igl-application-info{display:none}@media (min-width: 768px){.booking-header.sc-igl-application-info{justify-content:flex-start}.booking-footer.sc-igl-application-info,.booking-price.sc-igl-application-info{display:none}.booking-details-container.sc-igl-application-info,.rate_amount.sc-igl-application-info{display:inline-flex;gap:0.5rem}}@media only screen and (min-width: 908px){.aplicationInfoContainer.sc-igl-application-info{max-width:80%}.guest-info-container.sc-igl-application-info{max-width:300px}.preference-select-container.sc-igl-application-info{max-width:250px}}";const K=G;const F=class{constructor(e){t(this,e);this.variationService=new H;this.rateplanSelection=undefined;this.guestInfo=undefined;this.currency=undefined;this.bedPreferenceType=[];this.bookingType="PLUS_BOOKING";this.roomIndex=undefined;this.totalNights=1;this.baseData=undefined;this.isButtonPressed=false}componentWillLoad(){var t,e;if(v(this.rateplanSelection.roomtype.id)){const i=this.filterRooms();if(i.length>0)this.updateGuest({unit:(e=(t=i[0])===null||t===void 0?void 0:t.id)===null||e===void 0?void 0:e.toString()})}}updateGuest(t){const e=this.rateplanSelection.roomtype.id;const i=this.rateplanSelection.ratePlan.id;let s=[...this.rateplanSelection.guest];s[this.roomIndex]=Object.assign(Object.assign({},s[this.roomIndex]),t);o.ratePlanSelections=Object.assign(Object.assign({},o.ratePlanSelections),{[e]:Object.assign(Object.assign({},o.ratePlanSelections[e]),{[i]:Object.assign(Object.assign({},this.rateplanSelection),{guest:[...s]})})})}handleButtonClicked(t){switch(t.detail.key){case"book":case"bookAndCheckIn":case"save":this.isButtonPressed=true;break}}getTooltipMessages(){var t,e,i,s,n,a,o;const{ratePlan:r,selected_variation:l}=this.rateplanSelection;let c=l;if((t=this.guestInfo)===null||t===void 0?void 0:t.infant_nbr){c=this.variationService.getVariationBasedOnInfants({variations:r.variations,baseVariation:l,infants:(e=this.guestInfo)===null||e===void 0?void 0:e.infant_nbr})}if(!c)return;const d=(i=r.variations)===null||i===void 0?void 0:i.find((t=>t.adult_nbr===c.adult_nbr&&t.child_nbr===c.child_nbr));if(!d)return;const h=(n=(s=d.applicable_policies)===null||s===void 0?void 0:s.find((t=>t.type==="cancelation")))===null||n===void 0?void 0:n.combined_statement;const f=(o=(a=d.applicable_policies)===null||a===void 0?void 0:a.find((t=>t.type==="guarantee")))===null||o===void 0?void 0:o.combined_statement;let b="";if(h){b+=`<b><u>Cancellation:</u></b> ${h}<br/>`}if(f){b+=`<b><u>Guarantee:</u></b> ${f}`}return b||undefined}getAmount(){var t,e;if(this.rateplanSelection.is_amount_modified){return this.rateplanSelection.view_mode==="001"?this.rateplanSelection.rp_amount:this.rateplanSelection.rp_amount*this.totalNights}let i=this.rateplanSelection.selected_variation;if((t=this.guestInfo)===null||t===void 0?void 0:t.infant_nbr){i=this.variationService.getVariationBasedOnInfants({variations:this.rateplanSelection.ratePlan.variations,baseVariation:this.rateplanSelection.selected_variation,infants:(e=this.guestInfo)===null||e===void 0?void 0:e.infant_nbr})}return i.discounted_gross_amount}filterRooms(){var t,e,i,s;const n=[];if(!y.is_frontdesk_enabled){return n}(e=(t=this.rateplanSelection.ratePlan)===null||t===void 0?void 0:t.assignable_units)===null||e===void 0?void 0:e.forEach((t=>{if(t.Is_Fully_Available){n.push({name:t.name,id:t.pr_id})}}));const a=this.rateplanSelection.guest.filter(((t,e)=>e!==this.roomIndex)).map((t=>t.unit));const o=n.filter((t=>!a.includes(t.id.toString())));return this.bookingType==="EDIT_BOOKING"?[...o,this.rateplanSelection.roomtype.id===((i=this.baseData)===null||i===void 0?void 0:i.roomtypeId)?(s=this.baseData)===null||s===void 0?void 0:s.unit:null].filter((t=>!!t)).sort(((t,e)=>t.name.localeCompare(e.name))):o}render(){var t,s,n,a,l,c,d,h,f;const b=this.filterRooms();const p=this.variationService.formatVariationBasedOnInfants({baseVariation:this.rateplanSelection.selected_variation,infants:this.guestInfo.infant_nbr,variations:this.rateplanSelection.ratePlan.variations});return e(i,{key:"e20f00fa856652e40ce7646fbfe5ed622ed0ea1c",class:"my-2"},e("div",{key:"c7478afc5c20e8b9c3281d2bef35825e294c5948",class:"booking-header"},(this.bookingType==="PLUS_BOOKING"||this.bookingType==="ADD_ROOM"||this.bookingType==="EDIT_BOOKING")&&e("span",{key:"d8ee5fe042a910e5b062db10a2a5286215c88adf",class:"booking-roomtype-title"},this.rateplanSelection.roomtype.name),e("div",{key:"320d58e64c019c487ef1f6dd942c4bcd40f46d03",class:"booking-details-container"},e("div",{key:"0ab9c735787d3e4577637447ddfc228f28788142",class:"booking-rateplan"},e("p",{key:"348f0fb657122f8a22b2ec2387c531074aeec8f9",class:"booking-rateplan-name"},this.rateplanSelection.ratePlan.short_name," ",this.rateplanSelection.ratePlan.is_non_refundable&&e("span",{key:"d7171c22f8831e72ecc85abef9dd426dd7331db3",class:"non-ref-span"},"Non Refundable")),e("ir-tooltip",{key:"7058c546d2b85b949d61ee827dacc2f6620ec60f",class:"booking-tooltip",message:this.getTooltipMessages()})),e("p",{key:"5d85fd89cfe7c99ef5700b0ee2eff50042df50bb",class:"booking-variation",innerHTML:p})),e("p",{key:"b49e7c5884d730c596239a11ace99ec3a76c5146",class:"booking-price"},k((t=this.currency)===null||t===void 0?void 0:t.symbol,this.getAmount()),"/",g.entries.Lcz_Stay)),e("div",{key:"d76c993bf2272ae4ab9df96da7a74a8974711ef4",class:"booking-footer"},e("div",{key:"62c603b3e4d41dabccbad52ff53e2fe6532f2487",class:"booking-rateplan"},e("p",{key:"61933ce1495bfe4ddded0f59dd7a81d4f4853bcb",class:"booking-rateplan-name"},this.rateplanSelection.ratePlan.short_name),e("ir-tooltip",{key:"3e71bed258f555ca86253767574dbf2d88c05796",class:"booking-tooltip",message:this.getTooltipMessages()})),e("p",{key:"42881bb8773e05eb69668e32a88d6d90270b4bab",class:"booking-variation",innerHTML:p})),e("div",{key:"a58e58070d1b080047acfc1d83c21e1f87701a1b",class:"d-flex flex-column flex-md-row  p-0 align-items-md-center aplicationInfoContainer"},e("div",{key:"cbf700012ccc4169810d421f12c4b98da73939e6",class:"mr-1 flex-fill guest-info-container"},e("input",{key:"b5649301d755459b186843b629c98dee3b1db27f",id:M(),type:"email",class:`form-control ${this.isButtonPressed&&((s=this.guestInfo)===null||s===void 0?void 0:s.name)===""&&"border-danger"}`,placeholder:g.entries.Lcz_GuestFirstnameAndLastname,name:"guestName",onInput:t=>{const e=t.target.value;this.updateGuest({name:e});if(o.event_type.type==="EDIT_BOOKING"){r("guest",Object.assign(Object.assign({},o.guest),{name:e}))}},required:true,value:(n=this.guestInfo)===null||n===void 0?void 0:n.name})),e("div",{key:"3369637003b60ac650f6fa6d4b1a49459d6d07ff",class:"mt-1 mt-md-0 d-flex align-items-center flex-fill"},y.is_frontdesk_enabled&&!v(this.rateplanSelection.roomtype.id)&&(this.bookingType==="PLUS_BOOKING"||this.bookingType==="ADD_ROOM"||this.bookingType==="EDIT_BOOKING")&&e("div",{key:"de1a514f1cd2c6fa0b84c5a8a559f8db6a1b3229",class:"mr-1 p-0 flex-fill preference-select-container"},e("select",{key:"f9e1dd78e0b97691189c50f25d9fb12f5aa3d6de",class:"form-control input-sm pr-0",id:M(),onChange:t=>this.updateGuest({unit:t.target.value})},e("option",{key:"b4761b3e4d627a86ced6d4387d48f4308db672e1",value:"",selected:((a=this.guestInfo)===null||a===void 0?void 0:a.unit)===""},g.entries.Lcz_Assignunits),b===null||b===void 0?void 0:b.map((t=>{var i;return e("option",{value:t.id,selected:((i=this.guestInfo)===null||i===void 0?void 0:i.unit)===t.id.toString()},t.name)}))))),this.rateplanSelection.roomtype.is_bed_configuration_enabled&&e("div",{key:"ff2a7d7eb32f35c197ad7483c95753b29c293191",class:"mr-1 flex-fill"},e("select",{key:"761c4f95847e36a15c6c9b19935572d3579f5671",class:`form-control input-sm ${this.isButtonPressed&&((l=this.guestInfo)===null||l===void 0?void 0:l.bed_preference)===""&&"border-danger"}`,id:M(),onChange:t=>this.updateGuest({bed_preference:t.target.value})},e("option",{key:"81f23243b6a2cd8a2f1d69ef9a2b893591dd1985",value:"",selected:((c=this.guestInfo)===null||c===void 0?void 0:c.bed_preference)===""},g.entries.Lcz_BedConfiguration),this.bedPreferenceType.map((t=>{var i;return e("option",{value:t.CODE_NAME,selected:((i=this.guestInfo)===null||i===void 0?void 0:i.bed_preference)===t.CODE_NAME},t.CODE_VALUE_EN)})))),e("p",{key:"8c37d292f36014bd2f943605db6c73e55ac26f9d",class:"rate_amount"},k((d=this.currency)===null||d===void 0?void 0:d.symbol,this.getAmount()),"/",g.entries.Lcz_Stay)),this.rateplanSelection.selected_variation.child_nbr>0&&e("div",{key:"fcfb7cf28f31c5e73278ade710b54165ab28fd7e",style:{gap:"0.5rem",marginTop:"0.5rem"},class:"d-flex  flex-row  p-0 align-items-center aplicationInfoContainer"},e("p",{key:"ed9427ae4bfc52a0543688ba040ef9072562e1b5",class:"m-0 p-0 text-danger"},"Any of the children below 3 years?"),e("div",{key:"4d4cace54a7c4b9e1cf2ad7f9b2d0154ea235d0b",class:"mr-1 flex-fill"},e("select",{key:"29760cf2a651416b075c9f2482a903d5bdb5da32",class:`form-control input-sm ${this.isButtonPressed&&((h=this.guestInfo)===null||h===void 0?void 0:h.bed_preference)===""&&"border-danger"}`,id:M(),style:{width:"max-content"},onChange:t=>this.updateGuest({infant_nbr:Number(t.target.value)})},e("option",{key:"501ee62438d9e0ab3932d53d72384a732fe79901",value:"",selected:Number((f=this.guestInfo)===null||f===void 0?void 0:f.infant_nbr)===0},g.entries["No"]||"No"),Array.from({length:this.rateplanSelection.selected_variation.child_nbr},((t,e)=>e+1)).map((t=>{var i;return e("option",{value:t,selected:((i=this.guestInfo)===null||i===void 0?void 0:i.infant_nbr)===t},t)}))))))}};F.style=K;const V=".sc-igl-block-dates-view-h{display:block}.sc-igl-block-dates-view-h .controlContainer.sc-igl-block-dates-view{width:24px}.sc-igl-block-dates-view-h .checkBoxContainer.sc-igl-block-dates-view input.sc-igl-block-dates-view{height:1.2rem !important;width:30px}.releaseTime.sc-igl-block-dates-view{padding-left:5px}.out-of-service-label.sc-igl-block-dates-view{margin-left:5px !important}";const U=V;const W=class{constructor(e){t(this,e);this.dataUpdateEvent=s(this,"dataUpdateEvent",7);this.blockDatesData={RELEASE_AFTER_HOURS:0,OPTIONAL_REASON:"",OUT_OF_SERVICE:false};this.releaseList=[];this.bookingService=new l;this.defaultData=undefined;this.fromDate=undefined;this.toDate=undefined;this.entryDate=undefined;this.entryHour=undefined;this.isEventHover=false;this.entryMinute=undefined;this.renderAgain=false}async componentWillLoad(){try{this.releaseList=await this.bookingService.getBlockedInfo();if(this.defaultData){this.blockDatesData=Object.assign({},this.defaultData)}else{this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(this.releaseList[0].CODE_NAME);this.emitData()}}catch(t){}}handleOptionalReason(t){this.blockDatesData.OPTIONAL_REASON=t.target.value;this.emitData()}handleReleaseAfterChange(t){if(this.entryDate)this.entryDate=undefined;this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(t.target.value);this.renderPage();this.emitData()}emitData(){this.dataUpdateEvent.emit({key:"blockDatesData",data:Object.assign({},this.blockDatesData)})}getReleaseHoursString(){let t=this.entryDate?new Date(this.entryDate):new Date;if(this.entryDate&&this.entryHour&&this.entryMinute){t.setHours(this.entryHour,this.entryMinute,0,0)}else{t.setHours(t.getHours()+this.blockDatesData.RELEASE_AFTER_HOURS,t.getMinutes(),0,0)}return t.toLocaleString("default",{month:"short"})+" "+t.getDate()+", "+this.formatNumber(t.getHours())+":"+this.formatNumber(t.getMinutes())}formatNumber(t){return t<10?`0${t}`:t}handleOutOfService(t){this.blockDatesData.OUT_OF_SERVICE=t.target.checked;if(this.blockDatesData.OUT_OF_SERVICE){this.blockDatesData.OPTIONAL_REASON="";this.blockDatesData.RELEASE_AFTER_HOURS=0}this.renderPage();this.emitData()}renderPage(){this.renderAgain=!this.renderAgain}render(){return e(i,{key:"bd47c87076b88f1a27685749b6cb2fe2ebac8644"},e("div",{key:"e47719d7fb7e5cd339222bef1cf7a3cdc8c0d7c5",class:`m-0 p-0 mb-1`},e("div",{key:"b62663cb32850bdb7047d52b87483a35950cb4b1",class:"text-left p-0"},e("ir-date-view",{key:"140433c5de6cf987703cf42f8530b0109323ef35",from_date:this.fromDate,dateOption:"DD MMM YYYY",showDateDifference:false,to_date:this.toDate}))),e("div",{key:"a192149471505b441610acb8257174da9c4c08d0",class:` mb-1 text-left ${this.isEventHover&&"p-0"}`},e("div",{key:"825bcf39baac6486c0d3c7832e9e8713b08d3196",class:"mb-1 "},e("label",{key:"bd43ce09822ce7af6c1ac6a120d25db5c751d63f",class:"p-0 text-bold-700 font-medium-1 m-0 align-middle"},g.entries.Lcz_Reason,":"),e("div",{key:"764e3b1d4edd8145d448d30ed1c8b7a33116322d",class:"p-0 m-0 pr-1  controlContainer checkBoxContainer d-inline-block align-middle"},e("input",{key:"21bac22756ea7920b17586fd44360b2ca4451d29",class:"form-control",type:"checkbox",checked:this.blockDatesData.OUT_OF_SERVICE,id:"userinput6",onChange:t=>this.handleOutOfService(t)})),e("span",{key:"1fb8c1b0fd3a1348f9fed590d082c040a1e6faab",class:"align-middle out-of-service-label"},g.entries.Lcz_OutOfservice)),!this.blockDatesData.OUT_OF_SERVICE?e("div",null,e("div",{class:"mb-1 d-flex  align-items-center"},e("span",{class:"align-middle"},g.entries.Lcz_Or," "),e("div",{class:"d-inline-flex col pr-0 align-middle"},e("input",{class:"form-control",type:"text",placeholder:g.entries.Lcz_OptionalReason,id:"optReason",value:this.blockDatesData.OPTIONAL_REASON,onInput:t=>this.handleOptionalReason(t)}))),e("div",{class:"mb-1 w-100 pr-0 "},e("span",{class:"text-bold-700 font-medium-1"},g.entries.Lcz_AutomaticReleaseIn,": "),e("div",{class:"d-inline-block"},e("select",{class:"form-control input-sm",id:"zSmallSelect",onChange:t=>this.handleReleaseAfterChange(t)},this.releaseList.map((t=>e("option",{value:+t.CODE_NAME,selected:Number(this.blockDatesData.RELEASE_AFTER_HOURS)==Number(t.CODE_NAME)},t.CODE_VALUE_EN))))),this.blockDatesData.RELEASE_AFTER_HOURS?e("div",{class:"d-inline-block releaseTime"},e("em",null,g.entries.Lcz_On," ",this.getReleaseHoursString())):null)):null))}};W.style=U;var q=undefined&&undefined.__rest||function(t,e){var i={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0)i[s]=t[s];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++){if(e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n]))i[s[n]]=t[s[n]]}return i};class J{setBookingInfoFromAutoComplete(t,e){var i,s,n;t.bookedByInfoData={id:e.guest.id,email:e.guest.email,firstName:e.guest.first_name,lastName:e.guest.last_name,countryId:e.guest.country_id,isdCode:(s=(i=e.guest)===null||i===void 0?void 0:i.country_phone_prefix)!==null&&s!==void 0?s:(n=e.guest)===null||n===void 0?void 0:n.country_id.toString(),contactNumber:e.guest.mobile,selectedArrivalTime:e.arrival,emailGuest:e.guest.subscribe_to_news_letter,message:e.remark,cardNumber:"",cardHolderName:"",expiryMonth:"",expiryYear:"",bookingNumber:e.booking_nbr,rooms:e.rooms,from_date:e.from_date,to_date:e.to_date}}resetRoomsInfoAndMessage(t){t.defaultData.roomsInfo=[];t.message=""}onDataRoomUpdate(t,e,i,s,n){let a=e;const{data:o,key:r,changedKey:l}=t.detail;const c=`c_${o.roomCategoryId}`;const d=`p_${o.ratePlanId}`;if(this.shouldClearData(r)){a=new Map}this.initializeRoomCategoryIfNeeded(c,a);if(s){if(l==="rate"){if(a.has(c)&&a.get(c).has(d)){this.applyBookingEditToSelectedRoom(c,d,o,a,n,i)}}else{if(l!=="rateType"){if(l==="adult_child_offering"){if(a.has(c)&&e.get(c).has(d)){this.applyBookingEditToSelectedRoom(c,d,o,a,n,i)}}else{this.applyBookingEditToSelectedRoom(c,d,o,a,n,i)}}}}else{this.setSelectedRoomData(c,d,o,a)}this.cleanupEmptyData(c,a);return a}shouldClearData(t){return t==="clearData"||t==="EDIT_BOOKING"}initializeRoomCategoryIfNeeded(t,e){if(!e.has(t)){e.set(t,new Map)}}setSelectedRoomData(t,e,i,s){let n=s.get(t);if(i.totalRooms===0||i.inventory===0){n.delete(e)}else{s.set(t,n.set(e,Object.assign(Object.assign({},i),{selectedUnits:Array(i.totalRooms).fill(-1)})))}}cleanupEmptyData(t,e){if(e.has(t)){let i=e.get(t);if(i.size===0){e.delete(t)}}}applyBookingEditToSelectedRoom(t,e,i,s,n,a){s.clear();let o={};if(a){o=Object.assign(Object.assign({},i),{guestName:n||"",roomId:""})}else{o=Object.assign({},i)}s.set(t,(new Map).set(e,o))}generateDailyRates(t,e,i){const s=new Date(e);s.setDate(s.getDate()-1);let n=new Date(t);const a=[];while(n<=s){a.push({date:B(n).format("YYYY-MM-DD"),amount:i,cost:null});n.setDate(n.getDate()+1)}return a}extractFirstNameAndLastName(t){const e=t.split(" ");return{first_name:e[0]||null,last_name:e[1]||null}}getBookedRooms({check_in:t,check_out:e,notes:i,identifier:s,override_unit:n,unit:a}){const r=[];const l=c(B(t).format("YYYY-MM-DD"),B(e).format("YYYY-MM-DD"));const d=({is_amount_modified:t,selected_variation:e,view_mode:i,rp_amount:s,ratePlan:n},a)=>{if(t){return i==="002"?s:s/l}let o=e;if(a>0){if(!this.variationService){this.variationService=new H}o=this.variationService.getVariationBasedOnInfants({variations:n.variations,baseVariation:e,infants:a})}return Number(o.discounted_amount)/l};for(const l in o.ratePlanSelections){const c=o.ratePlanSelections[l];for(const o in c){const l=c[o];if(l.reserved>0){for(let o=0;o<l.reserved;o++){const{first_name:c,last_name:h}=this.extractFirstNameAndLastName(l.guest[o].name);r.push({identifier:s,roomtype:l.roomtype,rateplan:l.ratePlan,prepayment_amount_gross:0,unit:n?{id:a}:l.guest[o].unit?{id:l.guest[o].unit}:null,occupancy:{adult_nbr:l.selected_variation.adult_nbr,children_nbr:l.selected_variation.child_nbr-Math.max(l.guest[o].infant_nbr,0),infant_nbr:l.guest[o].infant_nbr},bed_preference:l.guest[o].bed_preference,from_date:B(t).format("YYYY-MM-DD"),to_date:B(e).format("YYYY-MM-DD"),notes:i,days:this.generateDailyRates(t,e,d(l,l.guest[o].infant_nbr)),guest:{email:null,first_name:c,last_name:h,country_id:null,city:null,mobile:null,address:null,dob:null,subscribe_to_news_letter:null,cci:null}})}}}}return r}async prepareBookUserServiceParams({context:t,sourceOption:e,check_in:i}){var s;try{if(!t||!t.dateRangeData){throw new Error("Invalid context: Missing date range data.")}const n=new Date(t.dateRangeData.fromDate);const a=new Date(t.dateRangeData.toDate);const o=(e=null)=>this.getBookedRooms({check_in:n,check_out:a,identifier:e,notes:"",override_unit:t.isEventType("BAR_BOOKING")?true:false,unit:t.isEventType("BAR_BOOKING")?t.bookingData.PR_ID:null});const r=(t,e)=>{var{pickup_info:i,extra_services:s,is_direct:n,is_in_loyalty_mode:a,promo_key:o,extras:r}=t,l=q(t,["pickup_info","extra_services","is_direct","is_in_loyalty_mode","promo_key","extras"]);return{assign_units:true,check_in:false,is_pms:true,is_direct:n,is_in_loyalty_mode:a,promo_key:o,extras:r,booking:Object.assign(Object.assign({},l),{rooms:e}),extra_services:s,pickup_info:i}};let l=null;switch(t.defaultData.event_type){case"EDIT_BOOKING":{const{booking:e,currentRoomType:i}=t.defaultData;const s=e.rooms.filter((t=>t.identifier!==i.identifier));const n=o(i.identifier);l=r(e,[...s,...n]);break}case"ADD_ROOM":case"SPLIT_BOOKING":{const{booking:e}=t.defaultData;if(!e){throw new Error("Missing booking")}console.log(e);const i=o();l=r(e,[...e===null||e===void 0?void 0:e.rooms,...i]);break}default:{const r=o();const{bookedByInfoData:c}=t;const d=e.type==="TRAVEL_AGENCY";l={assign_units:true,check_in:i,is_pms:true,is_direct:true,is_in_loyalty_mode:false,promo_key:null,extras:x,agent:d?{id:e.tag}:null,booking:{from_date:B(n).format("YYYY-MM-DD"),to_date:B(a).format("YYYY-MM-DD"),remark:c.message||null,booking_nbr:"",property:{id:t.propertyid},booked_on:{date:B().format("YYYY-MM-DD"),hour:(new Date).getHours(),minute:(new Date).getMinutes()},source:d?"":e,rooms:r,currency:t.currency,arrival:{code:c.selectedArrivalTime},guest:{email:c.email===""?null:c.email||null,first_name:c.firstName,last_name:c.lastName,country_id:c.countryId===""?null:c.countryId,city:null,mobile:c.contactNumber===null?"":c.contactNumber,country_phone_prefix:(s=c===null||c===void 0?void 0:c.isdCode)!==null&&s!==void 0?s:null,address:"",dob:null,subscribe_to_news_letter:c.emailGuest||false,cci:c.cardNumber?{nbr:c.cardNumber,holder_name:c.cardHolderName,expiry_month:c.expiryMonth,expiry_year:c.expiryYear}:null}},pickup_info:null};break}}return l}catch(t){console.error(t)}}getRoomCategoryByRoomId(t){var e;return(e=t.roomsInfo)===null||e===void 0?void 0:e.find((e=>e.id===t.RATE_TYPE))}setEditingRoomInfo(t,e){const i=this.getRoomCategoryByRoomId(t);const s=!i?"":`c_${i===null||i===void 0?void 0:i.id}`;const n=`p_${t.RATE_PLAN_ID}`;const a={adultCount:t.ADULTS_COUNT,rate:t.RATE,rateType:t.RATE_TYPE,ratePlanId:t.RATE_PLAN_ID,roomCategoryId:i?i.id:"",roomCategoryName:i?i.name:"",totalRooms:1,ratePlanName:t.RATE_PLAN,roomId:t.PR_ID,guestName:t.NAME,cancelation:t.cancelation,guarantee:t.guarantee,adult_child_offering:t.adult_child_offering};e.set(s,(new Map).set(n,a))}}const X=".sc-igl-book-property-h{position:fixed;top:0;right:0;width:100vw;height:100vh;z-index:99}.card-title.sc-igl-book-property{border-bottom:1px solid #e4e5ec;width:100%}.card-header-container.sc-igl-book-property{border-bottom:1px solid #e4e5ec;width:100%;display:flex;align-items:center;box-sizing:border-box;padding:1rem 0;justify-content:space-between}.card-header-container.sc-igl-book-property h3.sc-igl-book-property{padding:0;margin:0}.scrollContent.sc-igl-book-property{height:calc(100% - 79px);overflow:auto;position:relative}.background-overlay.sc-igl-book-property{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.25)}.formContainer.sc-igl-book-property{height:calc(100% - 79px);overflow:auto}.gap-30.sc-igl-book-property{gap:30px}.block-date.sc-igl-book-property{width:100%}.sideWindow.sc-igl-book-property{position:absolute;top:0;right:0;height:100%;background-color:#ffffff;width:100vw;overflow-y:auto;padding-bottom:85px !important}.card.sc-igl-book-property{top:0;z-index:1000}.close.sc-igl-book-property{float:right;font-size:1.5rem;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:0.5;padding:0;background-color:transparent;border:0;appearance:none}.close-icon.sc-igl-book-property{position:absolute;top:18px;right:33px;outline:none}button.sc-igl-book-property:not(:disabled),[type='button'].sc-igl-book-property:not(:disabled){cursor:pointer}@media only screen and (min-width: 1200px){.sideWindow.sc-igl-book-property{max-width:70%}}@media only screen and (min-width: 2000px){.sideWindow.sc-igl-book-property{max-width:40%}}@media only screen and (min-width: 768px) and (max-width: 1200px){.sideWindow.sc-igl-book-property{max-width:90%}}@media only screen and (min-width: 600px) and (max-width: 768px){.sideWindow.sc-igl-book-property{max-width:75%}}@media only screen and (min-width: 641px){.block-date.sc-igl-book-property{max-width:450px;padding-bottom:0 !important}}";const Z=X;const Q=class{constructor(e){t(this,e);this.closeBookingWindow=s(this,"closeBookingWindow",7);this.blockedCreated=s(this,"blockedCreated",7);this.resetBookingData=s(this,"resetBookingData",7);this.animateIrButton=s(this,"animateIrButton",7);this.animateIrSelect=s(this,"animateIrSelect",7);this.toast=s(this,"toast",7);this.initialRoomIds=null;this.showSplitBookingOption=false;this.sourceOptions=[];this.guestData=[];this.bookedByInfoData={};this.blockDatesData={};this.ratePricingMode=[];this.selectedUnits=new Map;this.bedPreferenceType=[];this.bookingService=new l;this.bookPropertyService=new J;this.updatedBooking=false;this.MAX_HISTORY_LENGTH=2;this.propertyid=undefined;this.allowedBookingSources=undefined;this.language=undefined;this.countryNodeList=undefined;this.showPaymentDetails=false;this.currency=undefined;this.bookingData=undefined;this.adultChildConstraints=undefined;this.adultChildCount={adult:0,child:0};this.renderAgain=false;this.dateRangeData=undefined;this.defaultData=undefined;this.isLoading=undefined;this.bookingHistory=[]}async componentWillLoad(){this.handleKeyDown=this.handleKeyDown.bind(this);this.initializeDefaultDateRange();if(!this.bookingData.defaultDateRange){return}console.log("testing");this.initializeDefaultData();this.wasBlockedUnit=this.defaultData.hasOwnProperty("block_exposed_unit_props");r("event_type",{type:this.defaultData.event_type});await this.fetchSetupEntriesAndInitialize();this.initializeEventData()}componentDidLoad(){document.addEventListener("keydown",this.handleKeyDown)}disconnectedCallback(){document.removeEventListener("keydown",this.handleKeyDown)}clearBooking(t){if(this.isEventType("SPLIT_BOOKING")){t.stopImmediatePropagation();t.stopPropagation();this.bookedByInfoData={};this.bookPropertyService.resetRoomsInfoAndMessage(this);this.renderPage()}}async handleSpiltBookingSelected(t){t.stopImmediatePropagation();t.stopPropagation();const{key:e,data:i}=t.detail;if(e==="select"||e==="blur"&&i!==""){const t=await this.bookingService.getExposedBooking(i.booking_nbr||i,this.language);this.defaultData=Object.assign(Object.assign({},this.defaultData),{booking:t});this.bookPropertyService.setBookingInfoFromAutoComplete(this,t);this.sourceOption=t.source;this.renderPage()}}handleAdultChildChange(t){if(this.isEventType("ADD_ROOM")||this.isEventType("SPLIT_BOOKING")){this.bookPropertyService.resetRoomsInfoAndMessage(this)}const{adult:e,child:i}=t.detail;this.adultChildCount=Object.assign({},t.detail);this.updateBookingHistory({adults:Number(e),children:Number(i)})}onDateRangeSelect(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;this.updateBookingHistory({dates:{checkIn:new Date(this.dateRangeData.fromDate),checkOut:new Date(new Date(e.data.toDate))}});console.log("date changed",e);if(e.key==="selectedDateRange"){this.dateRangeData=e.data;if(this.isEventType("ADD_ROOM")||this.isEventType("SPLIT_BOOKING")){this.defaultData.roomsInfo=[]}else if(this.adultChildCount.adult!==0){this.checkBookingAvailability()}}}handleSourceDropDown(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;const i=this.sourceOptions.find((t=>t.id===e.toString()));this.sourceOption={code:e,description:i.value||"",tag:i.tag,id:i.id,type:i.type}}gotoSplitPageTwo(){this.gotoPage("page_two")}handleButtonClicked(t){var e,i;switch(t.detail.key){case"save":this.bookUser(false);break;case"cancel":t.stopImmediatePropagation();t.stopPropagation();this.closeWindow();break;case"back":t.stopImmediatePropagation();t.stopPropagation();this.gotoPage("page_one");break;case"book":this.bookUser(false);break;case"bookAndCheckIn":this.bookUser(true);break;case"next":t.stopImmediatePropagation();t.stopPropagation();if(!((e=this.adultChildCount)===null||e===void 0?void 0:e.adult)){this.animateIrSelect.emit("adult_child_select");break}if(d()>0){this.gotoPage("page_two");break}else if(((i=this.defaultData)===null||i===void 0?void 0:i.roomsInfo.length)===0){this.animateIrButton.emit("check_availability");break}this.toast.emit({type:"error",description:g.entries.Lcz_SelectRatePlan,title:g.entries.Lcz_SelectRatePlan});break;case"check":this.checkBookingAvailability();break}}updateBookingHistory(t){var e,i,s,n,a,o,r,l;const c=this.bookingHistory[this.bookingHistory.length-1];const d={dates:{checkIn:((e=t.dates)===null||e===void 0?void 0:e.checkIn)||((i=c===null||c===void 0?void 0:c.dates)===null||i===void 0?void 0:i.checkIn)||new Date(this.dateRangeData.fromDate),checkOut:((s=t.dates)===null||s===void 0?void 0:s.checkOut)||((n=c===null||c===void 0?void 0:c.dates)===null||n===void 0?void 0:n.checkOut)||new Date(this.dateRangeData.toDate)},adults:(o=(a=t.adults)!==null&&a!==void 0?a:c===null||c===void 0?void 0:c.adults)!==null&&o!==void 0?o:this.adultChildCount.adult,children:(l=(r=t.children)!==null&&r!==void 0?r:c===null||c===void 0?void 0:c.children)!==null&&l!==void 0?l:this.adultChildCount.child};this.bookingHistory.push(d);if(this.bookingHistory.length>this.MAX_HISTORY_LENGTH){this.bookingHistory.shift()}}handleKeyDown(t){if(t.key==="Escape"){this.closeWindow()}}initializeDefaultDateRange(){this.defaultDateRange={from_date:this.bookingData.FROM_DATE,to_date:this.bookingData.TO_DATE}}initializeDefaultData(){this.defaultData=this.bookingData;this.dateRangeData=Object.assign({},this.defaultData.defaultDateRange)}async fetchSetupEntriesAndInitialize(){try{const t=await this.fetchSetupEntries();this.setSourceOptions(this.allowedBookingSources);this.setOtherProperties(t)}catch(t){console.error("Error fetching setup entries:",t)}}initializeEventData(){if(this.isEventType("EDIT_BOOKING")){this.initializeEditBookingData()}if(!this.isEventType("BAR_BOOKING")){this.bookPropertyService.resetRoomsInfoAndMessage(this)}this.initializePage()}initializeEditBookingData(){var t,e,i;this.adultChildCount={adult:this.defaultData.ADULTS_COUNT,child:this.defaultData.CHILDREN_COUNT};this.initialRoomIds={roomName:this.defaultData.roomName,ratePlanId:this.defaultData.RATE_PLAN_ID,roomId:this.defaultData.PR_ID,roomTypeId:this.defaultData.RATE_TYPE};const{currentRoomType:s}=this.defaultData;r("guest",{bed_preference:(t=s.bed_preference)===null||t===void 0?void 0:t.toString(),infant_nbr:s.occupancy.infant_nbr,name:s.guest.last_name?s.guest.first_name+" "+s.guest.last_name:s.guest.first_name,unit:(i=(e=s.unit)===null||e===void 0?void 0:e.id)===null||i===void 0?void 0:i.toString()});this.checkBookingAvailability();this.bookPropertyService.setEditingRoomInfo(this.defaultData,this.selectedUnits)}initializePage(){switch(this.defaultData.event_type){case"SPLIT_BOOKING":this.showSplitBookingOption=true;this.page="page_one";break;case"BLOCK_DATES":this.page="page_block_date";break;default:this.page="page_one";break}}async fetchSetupEntries(){return await this.bookingService.fetchSetupEntries()}isGuestDataIncomplete(){for(const t in o.ratePlanSelections){const e=o.ratePlanSelections[t];for(const t in e){const i=e[t];if(i.reserved>0){for(const t of i.guest){if(t.name===""){return true}}}}}return false}isButtonDisabled(){const t=(t,e,i)=>{if(!t){return true}if(t===this.guestData){return this.isGuestDataIncomplete()}if(e==="selectedArrivalTime"){if(t[e]!==undefined){return t[e].code===""}else{return true}}return t[e]===i||t[e]===undefined};return t(this.guestData,"guestName","")||t(this.bookedByInfoData,"firstName","")||t(this.bookedByInfoData,"lastName","")||t(this.bookedByInfoData,"selectedArrivalTime","")}setSourceOptions(t){this.sourceOptions=t.map((t=>({id:t.id,value:t.description,tag:t.tag,type:t.type})));if(this.isEventType("EDIT_BOOKING")){this.sourceOption=Object.assign({},this.defaultData.SOURCE)}else{this.sourceOption={code:t[0].code,description:t[0].description,tag:t[0].tag,type:t[0].type,id:t[0].id}}}setOtherProperties(t){this.ratePricingMode=t===null||t===void 0?void 0:t.ratePricingMode;this.bookedByInfoData.arrivalTime=t.arrivalTime;this.bedPreferenceType=t.bedPreferenceType}async checkBookingAvailability(){const t=B(this.dateRangeData.fromDate).format("YYYY-MM-DD");const e=B(this.dateRangeData.toDate).format("YYYY-MM-DD");const i=this.sourceOption["type"]==="TRAVEL_AGENCY";try{const s=this.isEventType("EDIT_BOOKING")?[this.defaultData.RATE_TYPE]:[];const n=this.isEventType("BAR_BOOKING")?this.defaultData.roomsInfo.map((t=>t.id)):[];const a=await this.bookingService.getBookingAvailability({from_date:t,to_date:e,propertyid:this.propertyid,adultChildCount:this.adultChildCount,language:this.language,room_type_ids:n,currency:this.currency,agent_id:i?this.sourceOption["tag"]:null,is_in_agent_mode:i,room_type_ids_to_update:s});if(!this.isEventType("EDIT_BOOKING")){this.defaultData.defaultDateRange.fromDate=new Date(this.dateRangeData.fromDate);this.defaultData.defaultDateRange.toDate=new Date(this.dateRangeData.toDate)}this.defaultData=Object.assign(Object.assign({},this.defaultData),{roomsInfo:a});if(this.isEventType("EDIT_BOOKING")&&!this.updatedBooking){this.updateBooking()}}catch(t){console.error("Error initializing booking availability:",t)}}updateBooking(){var t,e,i;try{const{currentRoomType:s}=this.defaultData;const n=s.roomtype.id;const a=s.rateplan.id;h({roomTypeId:n,ratePlanId:a,rooms:1,guest:[{bed_preference:(t=s.bed_preference)===null||t===void 0?void 0:t.toString(),infant_nbr:s.occupancy.infant_nbr,name:s.guest.last_name?s.guest.first_name+" "+s.guest.last_name:s.guest.first_name,unit:(i=(e=s.unit)===null||e===void 0?void 0:e.id)===null||i===void 0?void 0:i.toString()}]})}catch(t){console.error(t)}}async checkAndBlockDate(){try{const{block_exposed_unit_props:t}=this.defaultData;await this.bookingService.getBookingAvailability({from_date:t.from_date,to_date:t.to_date,propertyid:this.propertyid,adultChildCount:{adult:2,child:0},language:this.language,room_type_ids:this.defaultData.roomsInfo.map((t=>t.id)),currency:this.currency});const e=o.roomTypes.every((t=>t.is_available_to_book));if(e){await this.handleBlockDate(false)}else{console.log("Blocked date is unavailable. Continuing...")}}catch(t){console.error("Error checking and blocking date:",t)}}async closeWindow(){f();this.closeBookingWindow.emit();if(this.wasBlockedUnit&&!this.didReservation){await this.checkAndBlockDate()}document.removeEventListener("keydown",this.handleKeyDown)}isEventType(t){return this.defaultData.event_type===t}handleBlockDateUpdate(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;this.blockDatesData=e.data}handleGuestInfoUpdate(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;if(e.guestRefKey){if(this.isEventType("BAR_BOOKING")||this.isEventType("SPLIT_BOOKING")){this.guestData[e.guestRefKey]=Object.assign(Object.assign({},e.data),{roomId:this.defaultData.PR_ID})}else this.guestData[e.guestRefKey]=e.data}}handleBookedByInfoUpdate(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;this.bookedByInfoData=e.value.data}renderPage(){this.renderAgain=!this.renderAgain}gotoPage(t){this.page=t;this.renderPage()}getPageBlockDatesView(){return e(n,null,e("igl-block-dates-view",{fromDate:this.dateRangeData.fromDateStr,toDate:this.dateRangeData.toDateStr,entryDate:this.defaultData.ENTRY_DATE,onDataUpdateEvent:t=>this.handleBlockDateUpdate(t)}),e("div",{class:"p-0 mb-1 mt-2 gap-30 d-flex align-items-center justify-content-between"},e("ir-button",{text:g.entries.Lcz_Cancel,btn_color:"secondary",class:"flex-fill",onClick:()=>this.closeWindow()}),e("ir-button",{text:g.entries.Lcz_Blockdates,isLoading:Y("/Block_Exposed_Unit"),class:"flex-fill",onClick:()=>this.handleBlockDate()})))}handlePageTwoDataUpdateEvent(t){t.stopImmediatePropagation();t.stopPropagation();if(t.detail.key==="propertyBookedBy"){this.handleBookedByInfoUpdate(t)}else{this.handleGuestInfoUpdate(t)}}async handleBlockDate(t=true){const e=this.wasBlockedUnit?this.defaultData.block_exposed_unit_props:(()=>{const t=w(+this.blockDatesData.RELEASE_AFTER_HOURS);return Object.assign({from_date:_(this.defaultData.defaultDateRange.fromDate),to_date:_(this.defaultData.defaultDateRange.toDate),NOTES:this.blockDatesData.OPTIONAL_REASON||"",pr_id:this.defaultData.PR_ID.toString(),STAY_STATUS_CODE:this.blockDatesData.OUT_OF_SERVICE?"004":this.blockDatesData.RELEASE_AFTER_HOURS===0?"002":"003",DESCRIPTION:this.blockDatesData.RELEASE_AFTER_HOURS||""},t)})();await this.bookingService.blockUnit(e);if(t)this.closeWindow()}async bookUser(t){this.setLoadingState(t);if(this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")){if(this.isGuestDataIncomplete()){this.isLoading="";return}}else if(this.isButtonDisabled()){this.isLoading="";return}try{if(this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")){this.bookedByInfoData.message=this.defaultData.NOTES}this.didReservation=true;const t=await this.bookPropertyService.prepareBookUserServiceParams({context:this,sourceOption:this.sourceOption,check_in:this.isEventType("BAR_BOOKING")});await this.bookingService.doReservation(t);this.resetBookingData.emit(null)}catch(t){console.error("Error booking user:",t)}finally{this.resetLoadingState()}}setLoadingState(t){if(this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")){this.isLoading="save"}else{this.isLoading=t?"bookAndCheckIn":"book"}}resetLoadingState(){this.isLoading="";setTimeout((()=>{this.closeWindow()}),100)}getCurrentPage(t){return this.page===t}render(){return e(i,{key:"4c7d7a4ef61643e0c6e1a47390d1b2c6b9b478ef"},e("div",{key:"73c656271c628fa798ef4f4483b0864280d49112",class:"background-overlay",onClick:()=>this.closeWindow()}),e("div",{key:"304aaedb96fbd6e738379ac15d741a01778207e1",class:"sideWindow pb-5 pb-md-0 "+(this.getCurrentPage("page_block_date")?"block-date":"")},e("div",{key:"344d352c146ad7fc3d7087647f5b34a615fc765d",class:"card position-sticky mb-0 shadow-none p-0 "},e("div",{key:"c1d5960a56d9eadfa05e5b5d05e10d08a11edeb4",class:"card-header-container mb-2"},e("h3",{key:"6ab15c2710b94b60ffbc10ee09f2d38f0ace4a56",class:" text-left font-medium-2 px-2 px-md-3"},this.getCurrentPage("page_block_date")?this.defaultData.BLOCK_DATES_TITLE:this.defaultData.TITLE),e("ir-icon",{key:"812b70c9a26d37c1494f877ea71fc1d612877336",class:"px-2",onIconClickHandler:()=>{this.closeWindow()}},e("svg",{key:"36f34ed50feb2f02fb1fb24679de3366afde135f",slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",height:20,width:20},e("path",{key:"f4be7b3539087bd95b93e507686a34a7a1d27919",fill:"currentColor",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"}))))),e("div",{key:"14d43022b62b4b0f357526e78649b03ae88783ac",class:"px-2 px-md-3"},this.getCurrentPage("page_one")&&e("igl-booking-overview-page",{key:"97d5487b397bfb9d4ac80cbf26432217d17e4c5e",initialRoomIds:this.initialRoomIds,defaultDaterange:this.defaultDateRange,class:"p-0 mb-1",eventType:this.defaultData.event_type,selectedRooms:this.selectedUnits,currency:this.currency,showSplitBookingOption:this.showSplitBookingOption,ratePricingMode:this.ratePricingMode,dateRangeData:this.dateRangeData,bookingData:this.defaultData,adultChildCount:this.adultChildCount,bookedByInfoData:this.bookedByInfoData,adultChildConstraints:this.adultChildConstraints,sourceOptions:this.sourceOptions,propertyId:this.propertyid}),this.getCurrentPage("page_two")&&e("igl-booking-form",{key:"f22c8a4de3eabe4d211c1a45e045c83f4a3de054",currency:this.currency,propertyId:this.propertyid,showPaymentDetails:this.showPaymentDetails,selectedGuestData:this.guestData,countryNodeList:this.countryNodeList,isLoading:this.isLoading,selectedRooms:this.selectedUnits,bedPreferenceType:this.bedPreferenceType,dateRangeData:this.dateRangeData,bookingData:this.defaultData,showSplitBookingOption:this.showSplitBookingOption,language:this.language,bookedByInfoData:this.bookedByInfoData,defaultGuestData:this.defaultData,isEditOrAddRoomEvent:this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM"),onDataUpdateEvent:t=>this.handlePageTwoDataUpdateEvent(t)}),this.getCurrentPage("page_block_date")?this.getPageBlockDatesView():null)))}};Q.style=Z;const tt=".sc-igl-book-property-container-h{display:block;margin:0;padding:0;letter-spacing:0px !important;font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;font-size:1rem !important;font-weight:400 !important;line-height:1.45 !important;color:#6b6f82 !important;text-align:left !important}.book-container.sc-igl-book-property-container{width:min-content;margin:0;padding:0}h3.sc-igl-book-property-container{font-size:1rem}";const et=tt;const it=class{constructor(e){t(this,e);this.resetBookingData=s(this,"resetBookingData",7);this.bookingService=new l;this.roomService=new S;this.token=new j;this.language="";this.ticket="";this.p=undefined;this.propertyid=undefined;this.from_date=undefined;this.to_date=undefined;this.withIrToastAndInterceptor=true;this.bookingItem=undefined;this.showPaymentDetails=undefined;this.countryNodeList=undefined;this.calendarData={}}setRoomsData(t){var e,i;let s=new Array;if((i=(e=t.My_Result)===null||e===void 0?void 0:e.roomtypes)===null||i===void 0?void 0:i.length){s=t.My_Result.roomtypes;t.My_Result.roomtypes.forEach((t=>{t.expanded=true}))}this.calendarData.roomsInfo=s}async initializeApp(){try{if(!this.propertyid&&!this.p){throw new Error("Property ID or username is required")}const[t,e,i]=await Promise.all([this.roomService.getExposedProperty({id:this.propertyid,language:this.language,aname:this.p}),this.roomService.fetchLanguage(this.language),this.bookingService.getCountries(this.language)]);if(!g.entries){g.entries=e.entries;g.direction=e.direction}this.countryNodeList=i;const{allowed_payment_methods:s,currency:n,allowed_booking_sources:a,adult_child_constraints:o,calendar_legends:r}=t["My_Result"];this.calendarData={currency:n,allowed_booking_sources:a,adult_child_constraints:o,legendData:r};this.setRoomsData(t);const l=["001","004"];this.showPaymentDetails=s.some((t=>l.includes(t.code)))}catch(t){console.error("Error initializing app:",t)}}componentWillLoad(){if(this.ticket!==""){this.token.setToken(this.ticket);this.initializeApp()}}ticketChanged(t,e){if(t===e){return}this.token.setToken(this.ticket);this.initializeApp()}handleCloseBookingWindow(){this.bookingItem=null}handleTriggerClicked(){const t=new Date;t.setDate(t.getDate()+1);this.bookingItem={FROM_DATE:this.from_date,defaultDateRange:{fromDate:new Date,fromDateStr:"",toDate:t,toDateStr:"",dateDifference:0,message:""},TO_DATE:this.to_date,EMAIL:"",event_type:"PLUS_BOOKING",ID:"",NAME:"",PHONE:"",REFERENCE_TYPE:"",TITLE:g.entries.Lcz_NewBooking}}render(){return e(i,{key:"0acd117d26b31664eae8a208953f684e6b2c5d09"},this.withIrToastAndInterceptor&&e(n,{key:"038c95f2bcb514415a2ffaddef07af93495fdbcf"},e("ir-toast",{key:"30dfc42676b8ecf9f1c5c314d05eb425ee6e86e0"}),e("ir-interceptor",{key:"496c57e93f121ed52e1a0a8e2c83a2f07b96a386"})),e("div",{key:"91b001d2b3042f25830586a9b98054ec76d2ea2f",class:"book-container",onClick:this.handleTriggerClicked.bind(this)},e("slot",{key:"91f8d576ff13a7c9f33cfc7c5893d2b7172ef71b",name:"trigger"})),this.bookingItem&&e("igl-book-property",{key:"55ad69cdd2d48161963a45ad8a35272f3ccaa116",allowedBookingSources:this.calendarData.allowed_booking_sources,adultChildConstraints:this.calendarData.adult_child_constraints,showPaymentDetails:this.showPaymentDetails,countryNodeList:this.countryNodeList,currency:this.calendarData.currency,language:this.language,propertyid:this.propertyid,bookingData:this.bookingItem,onResetBookingData:t=>{t.stopImmediatePropagation();t.stopPropagation();this.resetBookingData.emit(null)},onCloseBookingWindow:()=>this.handleCloseBookingWindow()}))}static get watchers(){return{ticket:["ticketChanged"]}}};it.style=et;const st=".sc-igl-book-property-footer-h{display:block;margin:0;padding:0}.sc-igl-book-property-footer-h>*.sc-igl-book-property-footer{margin:auto;padding:auto}.gap-30.sc-igl-book-property-footer{gap:30px}";const nt=st;const at=class{constructor(e){t(this,e);this.buttonClicked=s(this,"buttonClicked",7);this.eventType=undefined;this.disabled=true}isEventType(t){return t===this.eventType}editNext(t){if(this.isEventType("EDIT_BOOKING")){if(t==="Cancel"){return"flex-fill"}else{return"d-none d-md-block  flex-fill"}}return"flex-fill"}renderButton(t,i,s=false,n){return e("div",{class:this.shouldRenderTwoButtons()?` ${this.editNext(i)}`:"flex-fill"},e("ir-button",{btn_color:t==="cancel"?"secondary":"primary",text:i,btn_disabled:s,onClickHandler:()=>{this.buttonClicked.emit({key:t})},icon_name:n,iconPostion:"right",style:{"--icon-size":"1rem"},icon_style:{paddingBottom:"1.9px"}}))}shouldRenderTwoButtons(){return this.isEventType("PLUS_BOOKING")||this.isEventType("ADD_ROOM")||this.isEventType("EDIT_BOOKING")}render(){return e(i,{key:"eedf3d1d6f9a9738f760aad155ebfd5e513daf87"},e("div",{key:"76d83ec36f41e3424ed69c361531af6a2e5d8f4a",class:"d-flex justify-content-between gap-30 align-items-center"},this.isEventType("EDIT_BOOKING")?e(n,null,this.renderButton("cancel",g.entries.Lcz_Cancel),this.shouldRenderTwoButtons()&&this.renderButton("next",`${g.entries.Lcz_Next}`,Y("/Get_Exposed_Booking_Availability"),"angles_right")):e(n,null,this.renderButton("cancel",g.entries.Lcz_Cancel),this.shouldRenderTwoButtons()&&this.renderButton("next",`${g.entries.Lcz_Next}`,false,"angles_right"))))}};at.style=nt;const ot=".sc-igl-book-property-header-h{display:block}.sourceContainer.sc-igl-book-property-header{max-width:350px}.message-label.sc-igl-book-property-header{font-size:80%}";const rt=ot;const lt=class{constructor(e){t(this,e);this.splitBookingDropDownChange=s(this,"splitBookingDropDownChange",7);this.sourceDropDownChange=s(this,"sourceDropDownChange",7);this.adultChild=s(this,"adultChild",7);this.checkClicked=s(this,"checkClicked",7);this.buttonClicked=s(this,"buttonClicked",7);this.toast=s(this,"toast",7);this.spiltBookingSelected=s(this,"spiltBookingSelected",7);this.animateIrButton=s(this,"animateIrButton",7);this.animateIrSelect=s(this,"animateIrSelect",7);this.sourceOption={code:"",description:"",tag:"",id:"",type:""};this.splitBookingId="";this.bookingData="";this.minDate=undefined;this.sourceOptions=[];this.message=undefined;this.bookingDataDefaultDateRange=undefined;this.showSplitBookingOption=false;this.adultChildConstraints=undefined;this.splitBookings=undefined;this.adultChildCount=undefined;this.dateRangeData=undefined;this.bookedByInfoData=undefined;this.defaultDaterange=undefined;this.propertyId=undefined}getSplitBookingList(){return e("fieldset",{class:"d-flex flex-column text-left mb-1  flex-lg-row align-items-lg-center"},e("label",{class:"mr-lg-1"},g.entries.Lcz_Tobooking,"# "),e("div",{class:"btn-group mt-1 mt-lg-0 sourceContainer"},e("ir-autocomplete",{value:Object.keys(this.bookedByInfoData).length>1?`${this.bookedByInfoData.bookingNumber} ${this.bookedByInfoData.firstName} ${this.bookedByInfoData.lastName}`:"",from_date:B(this.bookingDataDefaultDateRange.fromDate).format("YYYY-MM-DD"),to_date:B(this.bookingDataDefaultDateRange.toDate).format("YYYY-MM-DD"),propertyId:this.propertyId,placeholder:g.entries.Lcz_BookingNumber,onComboboxValue:t=>{t.stopImmediatePropagation();this.spiltBookingSelected.emit(t.detail)},isSplitBooking:true})))}getSourceNode(){return e("fieldset",{class:"d-flex text-left  align-items-center"},e("label",{class:"mr-1"},g.entries.Lcz_Source," "),e("div",{class:"btn-group mt-0 flex-fill sourceContainer"},e("select",{class:"form-control input-sm",id:"xSmallSelect",onChange:t=>this.sourceDropDownChange.emit(t.target.value)},this.sourceOptions.map((t=>{if(t.type==="LABEL"){return e("optgroup",{label:t.value})}return e("option",{value:t.id,selected:this.sourceOption.code===t.id},t.value)})))))}handleAdultChildChange(t,e){let i={};if(e===""){i=Object.assign(Object.assign({},this.adultChildCount),{[t]:0})}else{i=Object.assign(Object.assign({},this.adultChildCount),{[t]:e})}this.adultChild.emit(i)}getAdultChildConstraints(){return e("div",{class:"mt-1 mt-lg-0 d-flex flex-column text-left"},e("div",{class:"form-group  my-lg-0 text-left d-flex align-items-center justify-content-between justify-content-sm-start"},e("fieldset",null,e("div",{class:"btn-group ml-0"},e("ir-select",{class:"m-0",onSelectChange:t=>this.handleAdultChildChange("adult",t.detail),select_id:"adult_child_select",firstOption:g.entries.Lcz_AdultsCaption,LabelAvailable:false,data:Array.from(Array(this.adultChildConstraints.adult_max_nbr),((t,e)=>e+1)).map((t=>({text:t.toString(),value:t.toString()})))}))),this.adultChildConstraints.child_max_nbr>0&&e("fieldset",null,e("div",{class:"btn-group ml-1 p-0"},e("ir-select",{onSelectChange:t=>this.handleAdultChildChange("child",t.detail),select_id:"child_select",firstOption:this.renderChildCaption(),LabelAvailable:false,data:Array.from(Array(this.adultChildConstraints.child_max_nbr),((t,e)=>e+1)).map((t=>({text:t.toString(),value:t.toString()})))}))),e("ir-button",{btn_id:"check_availability",isLoading:Y("/Check_Availability"),icon:"",size:"sm",class:"ml-2",text:g.entries.Lcz_Check,onClickHandler:()=>this.handleButtonClicked()})))}renderChildCaption(){const t=this.adultChildConstraints.child_max_age;let e=g.entries.Lcz_Years;if(t===1){e=g.entries.Lcz_Year}return`${g.entries.Lcz_ChildCaption} 0 - ${this.adultChildConstraints.child_max_age} ${e}`}handleButtonClicked(){if(this.isEventType("SPLIT_BOOKING")&&Object.keys(this.bookedByInfoData).length<=1){this.toast.emit({type:"error",title:g.entries.Lcz_ChooseBookingNumber,description:"",position:"top-right"})}else if(this.isEventType("ADD_ROOM")||this.isEventType("SPLIT_BOOKING")){const t=B(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date));const e=B(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date));const i=B(new Date(this.dateRangeData.fromDate));const s=B(new Date(this.dateRangeData.toDate));if(s.isBefore(e)||i.isAfter(t)){this.toast.emit({type:"error",title:`${g.entries.Lcz_CheckInDateShouldBeMAx.replace("%1",B(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date)).format("ddd, DD MMM YYYY")).replace("%2",B(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date)).format("ddd, DD MMM YYYY"))}  `,description:"",position:"top-right"});return}else if(this.adultChildCount.adult===0){this.toast.emit({type:"error",title:g.entries.Lcz_PlzSelectNumberOfGuests,description:"",position:"top-right"});this.animateIrSelect.emit("adult_child_select")}else{this.buttonClicked.emit({key:"check"})}}else if(this.minDate&&new Date(this.dateRangeData.fromDate).getTime()>new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date).getTime()){this.toast.emit({type:"error",title:`${g.entries.Lcz_CheckInDateShouldBeMAx.replace("%1",B(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date)).format("ddd, DD MMM YYYY")).replace("%2",B(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date)).format("ddd, DD MMM YYYY"))}  `,description:"",position:"top-right"})}else if(this.adultChildCount.adult===0){this.animateIrSelect.emit("adult_child_select");this.toast.emit({type:"error",title:g.entries.Lcz_PlzSelectNumberOfGuests,description:"",position:"top-right"})}else{this.buttonClicked.emit({key:"check"})}}isEventType(t){return this.bookingData.event_type===t}render(){const t=this.showSplitBookingOption?this.getSplitBookingList():this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")?false:true;return e(i,{key:"e371d228eb4a8a4d6c8996631f637fe19c347483"},this.isEventType("SPLIT_BOOKING")&&this.getSplitBookingList(),t&&this.getSourceNode(),e("div",{key:"584fc9f8062a3e40f6d9ef1ffa1f588b03fb21a9",class:`d-flex flex-column flex-lg-row align-items-lg-center ${t?"mt-1":""}`},e("fieldset",{key:"6505b25ae251f486514911cbd328d2a5758c85ad",class:"mt-lg-0 mr-1 "},e("igl-date-range",{key:"1a9d25d200f739e89c4eb40aed15823b85b43128",variant:"booking",dateLabel:g.entries.Lcz_Dates,minDate:this.isEventType("PLUS_BOOKING")?B().add(-1,"months").startOf("month").format("YYYY-MM-DD"):this.minDate,disabled:this.isEventType("BAR_BOOKING")||this.isEventType("SPLIT_BOOKING"),defaultData:this.bookingDataDefaultDateRange})),!this.isEventType("EDIT_BOOKING")&&this.getAdultChildConstraints()),e("p",{key:"d40109f4c06e138dfd642c0052514de6808ea412",class:"text-right mt-1 message-label"},y.tax_statement))}};lt.style=rt;const ct=".sc-igl-booking-form-h{display:block}.card-title.sc-igl-booking-form{border-bottom:1px solid #e4e5ec}.scrollContent.sc-igl-booking-form{height:calc(100% - 79px);overflow:auto;position:relative}.background-overlay.sc-igl-booking-form{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.25)}.formContainer.sc-igl-booking-form{height:calc(100% - 79px);overflow:auto}.sideWindow.sc-igl-booking-form{position:absolute;top:0;right:0;height:100%;background-color:#ffffff}.close.sc-igl-booking-form{float:right;font-size:1.5rem;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:0.5;padding:0;background-color:transparent;border:0;appearance:none}.close-icon.sc-igl-booking-form{position:absolute;top:18px;right:33px;outline:none}button.sc-igl-booking-form:not(:disabled),[type='button'].sc-igl-booking-form:not(:disabled){cursor:pointer}.row.sc-igl-booking-form{padding:0 0 0 15px;margin:0}";const dt=ct;const ht=class{constructor(e){t(this,e);this.dataUpdateEvent=s(this,"dataUpdateEvent",7);this.buttonClicked=s(this,"buttonClicked",7);this.showPaymentDetails=undefined;this.currency=undefined;this.isEditOrAddRoomEvent=undefined;this.dateRangeData=undefined;this.bookingData=undefined;this.showSplitBookingOption=undefined;this.language=undefined;this.bookedByInfoData=undefined;this.propertyId=undefined;this.bedPreferenceType=undefined;this.selectedRooms=undefined;this.isLoading=undefined;this.countryNodeList=undefined;this.selectedGuestData=undefined;this.defaultGuestData=undefined;this.selectedBookedByData=undefined;this.guestData=undefined;this.selectedUnits={}}componentWillLoad(){this.initializeGuestData();this.selectedBookedByData=this.bookedByInfoData}initializeGuestData(){let t=0;const e=Object.assign({},this.selectedUnits);const i=(t,e,i,s)=>{if(i&&s===2){return t*e}return t};this.selectedUnits=e;this.guestData=[];this.selectedRooms.forEach(((s,n)=>{s.forEach((s=>{e[n]=s.selectedUnits;t+=s.totalRooms*i(s.rate,this.dateRangeData.dateDifference,s.isRateModified,s.rateType);for(let t=1;t<=s.totalRooms;t++){this.guestData.push(Object.assign({guestName:"",roomId:"",preference:""},s))}}))}));this.bookingData.TOTAL_PRICE=t}handleOnApplicationInfoDataUpdateEvent(t,e){const i=t.detail;const s=`c_${i.data.roomCategoryId}`;const n=[...this.selectedUnits[s]||[]];n[e]=i.data.roomId;this.selectedUnits=Object.assign(Object.assign({},this.selectedUnits),{[s]:n});this.dataUpdateEvent.emit({key:"applicationInfoUpdateEvent",value:t.detail})}handleEventData(t,e,i){if(e==="application-info"){this.handleOnApplicationInfoDataUpdateEvent(t,i)}else{this.selectedBookedByData=t.detail.data;this.dataUpdateEvent.emit({key:"propertyBookedBy",value:t.detail})}}isGuestDataIncomplete(){if(this.selectedGuestData.length!==this.guestData.length){return true}for(const t of this.selectedGuestData){if(t.guestName===""||t.preference===""||t.roomId===""){return true}}return false}isButtonDisabled(t){const e=(t,e,i)=>{if(!t){return true}if(t===this.selectedGuestData){return this.isGuestDataIncomplete()}if(e==="selectedArrivalTime"){if(t[e]!==undefined){return t[e].code===""}else{return true}}return t[e]===i||t[e]===undefined};return this.isLoading===t||e(this.selectedGuestData,"guestName","")||e(this.selectedBookedByData,"isdCode","")||e(this.selectedBookedByData,"contactNumber","")||e(this.selectedBookedByData,"firstName","")||e(this.selectedBookedByData,"lastName","")||e(this.selectedBookedByData,"countryId",-1)||e(this.selectedBookedByData,"selectedArrivalTime","")||e(this.selectedBookedByData,"email","")}render(){return e(i,{key:"31caaa8df94fcdb0500ec4f866a0fddc55da91bf"},e("div",{key:"cc5c9d8ad11ec53b4b6fa7a748b0d96f0279eebf",class:"d-flex flex-wrap"},e("ir-date-view",{key:"482bd45ff263718459103b95b504e13b8441bf77",class:"mr-1 flex-fill font-weight-bold font-medium-1",from_date:new Date(this.dateRangeData.fromDate),to_date:new Date(this.dateRangeData.toDate),dateOption:"DD MMM YYYY"}),this.guestData.length>1&&e("div",{key:"3ef91da4cdd13bf40162d3a9b7ecf58013a280bb",class:"mt-1 mt-md-0 text-right"},g.entries.Lcz_TotalPrice," ",e("span",{key:"21527fbf33aa9145d5f433508dbbcfdb8e618ead",class:"font-weight-bold font-medium-1"},k(this.currency.symbol,this.bookingData.TOTAL_PRICE||"0")))),Object.values(o.ratePlanSelections).map((t=>Object.values(t).map((t=>{const i=t;if(i.reserved===0){return null}return[...new Array(i.reserved)].map(((t,s)=>e("igl-application-info",{totalNights:Number(this.dateRangeData.dateDifference),bedPreferenceType:this.bedPreferenceType,currency:this.currency,guestInfo:i.guest?i.guest[s]:null,bookingType:this.bookingData.event_type,rateplanSelection:i,key:`${i.ratePlan.id}_${s}`,roomIndex:s,baseData:this.bookingData.event_type==="EDIT_BOOKING"?{roomtypeId:this.bookingData.currentRoomType.roomtype.id,unit:this.bookingData.currentRoomType.unit}:undefined})))})))),this.isEditOrAddRoomEvent||this.showSplitBookingOption?null:e("igl-property-booked-by",{propertyId:this.propertyId,countryNodeList:this.countryNodeList,language:this.language,showPaymentDetails:this.showPaymentDetails,defaultData:this.bookedByInfoData,onDataUpdateEvent:t=>{this.handleEventData(t,"propertyBookedBy",0)}}),this.isEditOrAddRoomEvent?e("div",{class:"d-flex p-0 mb-1 mt-2"},e("div",{class:"flex-fill mr-2"},e("ir-button",{icon:"",text:g.entries.Lcz_Back,class:"full-width",btn_color:"secondary",btn_styles:"justify-content-center",onClickHandler:()=>this.buttonClicked.emit({key:"back"})})),e("div",{class:"flex-fill"},e("ir-button",{isLoading:this.isLoading==="save",onClickHandler:()=>this.buttonClicked.emit({key:"save"}),btn_styles:"full-width align-items-center justify-content-center",text:g.entries.Lcz_Save}))):e("div",{class:"d-flex flex-column flex-md-row p-0 mb-1 mt-2 justify-content-md-between align-items-md-center"},e("div",{class:"flex-fill mr-md-1"},e("ir-button",{icon_name:"angles_left",btn_color:"secondary",btn_styles:"full-width align-items-center justify-content-center",onClickHandler:()=>this.buttonClicked.emit({key:"back"}),text:g.entries.Lcz_Back,style:{"--icon-size":"1rem"},icon_style:{paddingBottom:"1.9px"}})),e("div",{class:"mt-1 mt-md-0 flex-fill"},e("ir-button",{isLoading:this.isLoading==="book",btn_styles:"full-width align-items-center justify-content-center",onClickHandler:()=>this.buttonClicked.emit({key:"book"}),text:g.entries.Lcz_Book}))))}};ht.style=dt;const ft=".sc-igl-booking-overview-page-h{display:block}.sc-igl-booking-overview-page-h>*.sc-igl-booking-overview-page{margin:0;padding:auto}.scrollContent.sc-igl-booking-overview-page{height:calc(100% - 79px);overflow:auto;position:relative}.loading-container.sc-igl-booking-overview-page{display:flex;align-items:center;justify-content:center;height:100%;background:white;position:absolute;inset:0;z-index:100}.loader.sc-igl-booking-overview-page{width:1.25rem;height:1.25rem;border:2.5px solid #3f3f3f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}";const bt=ft;const pt=class{constructor(e){t(this,e);this.roomsDataUpdate=s(this,"roomsDataUpdate",7);this.bookingData=undefined;this.propertyId=undefined;this.message=undefined;this.showSplitBookingOption=undefined;this.eventType=undefined;this.currency=undefined;this.adultChildConstraints=undefined;this.ratePricingMode=undefined;this.dateRangeData=undefined;this.defaultDaterange=undefined;this.selectedRooms=undefined;this.adultChildCount=undefined;this.sourceOptions=undefined;this.bookedByInfoData=undefined;this.initialRoomIds=undefined}getSplitBookings(){return this.bookingData.hasOwnProperty("splitBookingEvents")&&this.bookingData.splitBookingEvents||[]}isEventType(t){return t===this.eventType}setMinDate(){if(!this.isEventType("EDIT_BOOKING")){return}const t=B(this.bookingData.FROM_DATE,"YYYY-MM-DD");const e=B();if(t.isAfter(e)){return e.add(-2,"weeks").format("YYYY-MM-DD")}return t.add(-2,"weeks").format("YYYY-MM-DD")}render(){var t;return e(i,{key:"61a7b2f93e71aecd044d918d2b63a206a89e1c90"},e("igl-book-property-header",{key:"d593354ee0d743795e23283ec0856d7a1b08d854",bookedByInfoData:this.bookedByInfoData,defaultDaterange:this.defaultDaterange,dateRangeData:this.dateRangeData,minDate:this.setMinDate(),adultChildCount:this.adultChildCount,splitBookingId:this.showSplitBookingOption,bookingData:this.bookingData,sourceOptions:this.sourceOptions,message:this.message,bookingDataDefaultDateRange:this.bookingData.defaultDateRange,showSplitBookingOption:this.showSplitBookingOption,adultChildConstraints:this.adultChildConstraints,splitBookings:this.getSplitBookings(),propertyId:this.propertyId}),e("div",{key:"60677cff868b32fec71c95311efa558139ca9562",class:" text-left"},Y("/Check_Availability")&&this.isEventType("EDIT_BOOKING")?e("div",{class:"loading-container"},e("div",{class:"loader"})):e(n,null,(t=o.roomTypes)===null||t===void 0?void 0:t.map((t=>e("igl-room-type",{initialRoomIds:this.initialRoomIds,isBookDisabled:Object.keys(this.bookedByInfoData).length<=1,key:`room-info-${t.id}`,currency:this.currency,ratePricingMode:this.ratePricingMode,dateDifference:this.dateRangeData.dateDifference,bookingType:this.bookingData.event_type,roomType:t,class:"mt-2 mb-1 p-0",roomInfoId:this.selectedRooms.has(`c_${t.id}`)?t.id:null,onDataUpdateEvent:t=>this.roomsDataUpdate.emit(t.detail)}))))),e("igl-book-property-footer",{key:"171bb18005cf3a5cf49d3c4cc34779ad44ae50aa",class:"p-0 mb-1 mt-3",eventType:this.bookingData.event_type}))}};pt.style=bt;const ut=".sc-igl-date-range-h{display:flex;align-items:center !important;font-size:14px !important}.date-range-input.sc-igl-date-range{margin:0;padding:0;display:flex;flex:1;cursor:pointer;width:220px !important;opacity:0;user-select:none;font-size:14px !important}.iglRangeNights.sc-igl-date-range{margin:0;padding:0}.date-view.sc-igl-date-range{position:absolute;background:white;pointer-events:none;cursor:pointer;display:block;margin-left:14px;margin-right:14px;font-size:13.65px !important;display:flex;align-items:center;inset:0}.date-view.sc-igl-date-range svg.sc-igl-date-range{padding:0 !important;margin:0;margin-right:10px}.calendarPickerContainer.sc-igl-date-range{display:flex !important;position:relative !important;text-align:left;align-items:center !important;padding:0 !important;margin:0;border:1px solid var(--ir-date-range-border, #379ff2);width:var(--ir-date-range-width, 245px);transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.calendarPickerContainer.sc-igl-date-range:focus-within{border-color:#379ff2}.calendarPickerContainer[data-state='disabled'].sc-igl-date-range{border:0px;width:280px}.date-view[data-state='disabled'].sc-igl-date-range,.date-range-input[data-state='disabled'].sc-igl-date-range{margin:0;cursor:default}.date-range-container-cn.sc-igl-date-range{position:relative;width:fit-content}.date-range-container-cn.sc-igl-date-range:focus-within .date-range-container.sc-igl-date-range{border:1px solid #379ff2}.date-range-container.sc-igl-date-range{position:relative;gap:1rem;font-size:0.975rem;line-height:1.45;border-radius:0.21rem;border:1px solid #cacfe7;color:#3b4781;padding:0.75rem 1rem;box-sizing:border-box !important;font-weight:400;background-color:#fff;background-clip:padding-box;height:2rem;pointer-events:none;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.date-range-container-cn.sc-igl-date-range .date-range-input.sc-igl-date-range{position:absolute;width:100% !important}.date-range-container.disabled.sc-igl-date-range{border:none;padding-left:0;padding-right:0}.date-range-input[data-state='disabled'].sc-igl-date-range{cursor:default}";const mt=ut;const gt=class{constructor(e){t(this,e);this.dateSelectEvent=s(this,"dateSelectEvent",7);this.toast=s(this,"toast",7);this.totalNights=0;this.fromDateStr="from";this.toDateStr="to";this.defaultData=undefined;this.disabled=false;this.minDate=undefined;this.dateLabel=undefined;this.maxDate=undefined;this.withDateDifference=true;this.variant="default";this.renderAgain=false}componentWillLoad(){this.initializeDates()}handleDataChange(t,e){if(JSON.stringify(t)!==JSON.stringify(e)){this.initializeDates()}}initializeDates(){let t=new Date;t.setHours(0,0,0,0);t.setDate(t.getDate()+1);if(this.defaultData){if(this.defaultData.fromDate){this.fromDate=new Date(this.defaultData.fromDate);this.fromDate.setHours(0,0,0,0);this.fromDateStr=this.getFormattedDateString(this.fromDate)}if(this.defaultData.toDate){this.toDate=new Date(this.defaultData.toDate);this.toDate.setHours(0,0,0,0);this.toDateStr=this.getFormattedDateString(this.toDate)}}if(this.fromDate&&this.toDate){this.calculateTotalNights()}return[this.fromDateStr,this.toDateStr]}calculateTotalNights(){this.totalNights=c(B(this.fromDate).format("YYYY-MM-DD"),B(this.toDate).format("YYYY-MM-DD"))}getFormattedDateString(t){return t.getDate()+" "+t.toLocaleString("default",{month:"short"}).toLowerCase()+" "+t.getFullYear()}handleDateSelectEvent(t,e=""){this.dateSelectEvent.emit({key:t,data:e})}handleDateChange(t){const{start:e,end:i}=t.detail;this.fromDate=e.toDate();this.toDate=i.toDate();this.calculateTotalNights();this.handleDateSelectEvent("selectedDateRange",{fromDate:this.fromDate.getTime(),toDate:this.toDate.getTime(),fromDateStr:e.format("DD MMM YYYY"),toDateStr:i.format("DD MMM YYYY"),dateDifference:this.totalNights});this.renderAgain=!this.renderAgain}render(){if(this.variant==="booking"){return e("div",{class:`p-0 m-0 date-range-container-cn`},e("ir-date-picker",{maxDate:this.maxDate,class:"date-range-input",disabled:this.disabled,fromDate:this.fromDate,toDate:this.toDate,minDate:this.minDate,autoApply:true,"data-state":this.disabled?"disabled":"active",onDateChanged:t=>{this.handleDateChange(t)}}),e("div",{class:`d-flex align-items-center m-0  date-range-container ${this.disabled?"disabled":""}`},e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"m-0 p-0",height:"14",width:"14",viewBox:"0 0 448 512"},e("path",{fill:"currentColor",d:"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z"})),e("span",null,B(this.fromDate).format("MMM DD, YYYY")),e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"m-0 p-0",height:"14",width:"14",viewBox:"0 0 512 512"},e("path",{fill:"currentColor",d:"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z"})),e("span",null,B(this.toDate).format("MMM DD, YYYY")),this.totalNights&&e("span",{class:"m-0 p-0"},this.totalNights+(this.totalNights>1?` ${g.entries.Lcz_Nights}`:` ${g.entries.Lcz_Night}`))))}return e(i,null,e("div",{class:"calendarPickerContainer form-control input-sm","data-state":this.disabled?"disabled":"active"},e("ir-date-picker",{maxDate:this.maxDate,class:"date-range-input",disabled:this.disabled,fromDate:this.fromDate,toDate:this.toDate,minDate:this.minDate,autoApply:true,"data-state":this.disabled?"disabled":"active",onDateChanged:t=>{this.handleDateChange(t)}}),e("div",{"data-state":this.disabled?"disabled":"active",class:"date-view"},e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"12",width:"10.5",viewBox:"0 0 448 512"},e("path",{fill:"currentColor",d:"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z"})),e("ir-date-view",{showDateDifference:this.disabled,from_date:this.fromDate,to_date:this.toDate}))),this.withDateDifference&&e("span",null,this.totalNights&&!this.disabled?e("span",{class:"iglRangeNights mx-1"},this.totalNights+(this.totalNights>1?` ${g.entries.Lcz_Nights}`:` ${g.entries.Lcz_Night}`)):""))}static get watchers(){return{defaultData:["handleDataChange"]}}};gt.style=mt;const vt=".sc-igl-property-booked-by-h{display:block}.row.sc-igl-property-booked-by{padding:0 0 0 15px;margin:0}.bookedByEmailContainer.sc-igl-property-booked-by{flex:auto;max-width:350px}.bookedDetailsForm.sc-igl-property-booked-by label.sc-igl-property-booked-by{min-width:125px;max-width:125px}.bookedDetailsForm.sc-igl-property-booked-by .form-group.sc-igl-property-booked-by{margin-bottom:10px !important}.bookedDetailsForm.sc-igl-property-booked-by .checkBoxContainer.sc-igl-property-booked-by input.sc-igl-property-booked-by{height:1.2rem !important;width:30px}.controlContainer.sc-igl-property-booked-by textarea.sc-igl-property-booked-by{height:60px !important}.margin3.sc-igl-property-booked-by{margin-bottom:5px !important}@media (min-width: 768px){.bookedByEmailContainer.sc-igl-property-booked-by{margin-left:37px}}";const yt=vt;const kt=class{constructor(e){t(this,e);this.dataUpdateEvent=s(this,"dataUpdateEvent",7);this.bookingService=new l;this.arrivalTimeList=[];this.expiryMonths=["01","02","03","04","05","06","07","08","09","10","11","12"];this.expiryYears=[];this.currentMonth="01";this.language=undefined;this.showPaymentDetails=false;this.defaultData=undefined;this.countryNodeList=[];this.propertyId=undefined;this.isButtonPressed=false;this.bookedByData={id:undefined,email:"",firstName:"",lastName:"",countryId:"",isdCode:"",contactNumber:"",selectedArrivalTime:"",emailGuest:false,message:"",cardNumber:"",cardHolderName:"",expiryMonth:"",expiryYear:""}}async componentWillLoad(){this.assignCountryCode();this.initializeExpiryYears();this.initializeDateData();this.populateBookedByData()}initializeExpiryYears(){const t=(new Date).getFullYear();this.expiryYears=Array.from({length:4},((e,i)=>(t+i).toString()))}async assignCountryCode(){const t=await this.bookingService.getUserDefaultCountry();const e=t["COUNTRY_ID"];this.country=e;this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{isdCode:e.toString(),countryId:e})}initializeDateData(){const t=new Date;const e=t.getMonth()+1;this.currentMonth=e<10?`0${e}`:e.toString()}populateBookedByData(){var t;this.bookedByData=this.defaultData?Object.assign(Object.assign({},this.bookedByData),this.defaultData):{};this.arrivalTimeList=((t=this.defaultData)===null||t===void 0?void 0:t.arrivalTime)||[];this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{selectedArrivalTime:this.arrivalTimeList[0].CODE_NAME});if(!this.bookedByData.expiryMonth){this.bookedByData.expiryMonth=this.currentMonth}if(!this.bookedByData.expiryYear){this.bookedByData.expiryYear=(new Date).getFullYear()}console.log("initial bookedby data",this.bookedByData)}handleDataChange(t,e){this.bookedByData[t]=t==="emailGuest"?e.target.checked:e.target.value;this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)});if(t==="countryId"){this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{isdCode:e.target.value})}}handleNumberInput(t,e){const i=e.target;const s=i.value;const n=/^[0-9]+$/;if(!n.test(s)){i.value=s.replace(/[^0-9]/g,"")}if(s===i.value){this.handleDataChange(t,e)}}async checkUser(){var t;try{const e=this.bookedByData.email;if(D.string().email().safeParse(e).success){const i=await this.bookingService.getUserInfo(e);if(i!==null){this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:i.id,firstName:i.first_name,lastName:i.last_name,contactNumber:i.mobile,countryId:i.country_id,isdCode:(t=i===null||i===void 0?void 0:i.country_phone_prefix)!==null&&t!==void 0?t:i.isdCode.toString()});console.log(this.bookedByData)}else{let t=Object.assign({},this.bookedByData);t=Object.assign(Object.assign({},t),{email:e});this.bookedByData=Object.assign({},t)}}else{let t=Object.assign({},this.bookedByData);t=Object.assign(Object.assign({},t),{email:""});this.bookedByData=Object.assign({},t)}this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)})}catch(t){}}updateGuest(t){var e;r("checkout_guest",Object.assign(Object.assign({},(e=o.checkout_guest)!==null&&e!==void 0?e:{}),t))}handleComboboxChange(t){var e;t.stopImmediatePropagation();t.stopPropagation();const{key:i,data:s}=t.detail;console.log(i,s);if(i==="blur"){if(D.string().email().safeParse(s).success){this.bookedByData.email=s;this.checkUser()}else if(this.bookedByData.email!==""&&s==""){this.bookedByData.email=""}this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:this.bookedByData})}if(i==="select"){this.bookedByData.email=s.email;this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:s.id,firstName:s.first_name,lastName:s.last_name,contactNumber:s.mobile,countryId:s.country_id,isdCode:(e=s["country_phone_prefix"])!==null&&e!==void 0?e:s===null||s===void 0?void 0:s.country_id});this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:this.bookedByData})}}clearEvent(){this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:"",firstName:"",lastName:"",contactNumber:"",isdCode:this.country.toString(),countryId:this.country});this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)})}handleButtonClicked(t){switch(t.detail.key){case"book":case"bookAndCheckIn":this.isButtonPressed=true;break}}render(){return e(i,{key:"f407625f7d40c2ef300e90fae9fc48032e9491c4"},e("div",{key:"b6b1b254d2574b44937069c638245830b61e7ce3",class:"text-left mt-3"},e("div",{key:"500a2e4a9efac6870748f127d4a481e427f9a6c5",class:"form-group d-flex flex-column flex-md-row align-items-md-center text-left "},e("label",{key:"377bed4f4380436cb6e4a5a36e0ec878a23c9677",class:"p-0 m-0 label-control mr-1 font-weight-bold"},g.entries.Lcz_BookedBy),e("div",{key:"c630805e5c0c0d342ab176270d5c505bc0daed0f",class:"bookedByEmailContainer mt-1 mt-md-0 d-flex align-items-center"},e("ir-autocomplete",{key:"a6698648da4008b748006663cd110dd9f1ed3252",onComboboxValue:this.handleComboboxChange.bind(this),propertyId:this.propertyId,type:"text",value:this.bookedByData.email,required:true,class:"flex-fill",placeholder:g.entries.Lcz_FindEmailAddress,onInputCleared:()=>this.clearEvent(),danger_border:this.isButtonPressed&&this.bookedByData.email!==""&&C(this.bookedByData.email)}),e("ir-tooltip",{key:"48c1b1e1b4daa36635e0779812fa2b7d287dd63e",class:"ml-1",message:"Leave empty if email is unavailable"})))),e("div",{key:"453f49a004135da06d21ab78d5f67c59e464ec6b",class:"bookedDetailsForm text-left mt-2 font-small-3 "},e("div",{key:"ea66db410dc2da0d2386f928a11e1b076a65310b",class:"d-flex flex-column flex-md-row  justify-content-md-between "},e("div",{key:"66722212367e11ce9278d23b6423a0b6463e704a",class:"p-0 flex-fill "},e("div",{key:"369b1ec580e2add0896261fc3978268acaa737e8",class:"form-group d-flex flex-column flex-md-row align-items-md-center p-0 flex-fill "},e("label",{key:"f82b922b13796fd4e35ee266441ecd6dca98c92a",class:"p-0 m-0 margin3"},g.entries.Lcz_FirstName),e("div",{key:"3e17c8b8553342e8c2fbb939f0de9a0fae0fbec2",class:"p-0 m-0  controlContainer flex-fill  "},e("input",{key:"f3d6a9549ae504a5e3add20cc915909617e98ceb",class:`form-control flex-fill ${this.isButtonPressed&&this.bookedByData.firstName===""&&"border-danger"}`,type:"text",placeholder:g.entries.Lcz_FirstName,id:M(),value:this.bookedByData.firstName,onInput:t=>{this.updateGuest({first_name:t.target.value});this.handleDataChange("firstName",t)},required:true}))),e("div",{key:"36c59812b0d6d35926f0aa35fd3a63131615cf7e",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{key:"696b2e687a6c6121c159963568abd33f1f48bd9f",class:"p-0 m-0 margin3"},g.entries.Lcz_LastName),e("div",{key:"638ca2280d4e18aebbe56d4a25eee3495038222f",class:"p-0 m-0  controlContainer flex-fill"},e("input",{key:"ef6a255d1a28e515e0c9c29579bc3dc9216053ca",class:`form-control ${this.isButtonPressed&&this.bookedByData.lastName===""&&"border-danger"}`,type:"text",placeholder:g.entries.Lcz_LastName,id:M(),value:this.bookedByData.lastName,onInput:t=>this.handleDataChange("lastName",t)}))),e("div",{key:"8f803557351236a3976eaf32002d9656f91a089c",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{key:"d114dd7177112108e3d33e1f45f2a79575893503",class:"p-0 m-0 margin3"},g.entries.Lcz_Country),e("div",{key:"c1e78a4bbfe36cbcc5ba2fe3c5e852b5e10622ee",class:"p-0 m-0  controlContainer flex-fill"},e("select",{key:"04e8552329505492245f8afd7e483cfd4102da8b",class:`form-control input-sm pr-0`,id:M(),onChange:t=>this.handleDataChange("countryId",t)},e("option",{key:"60d5ca4d9b24003827c7f12b5e009102708076ad",value:"",selected:this.bookedByData.countryId===""},g.entries.Lcz_Select),this.countryNodeList.map((t=>e("option",{value:t.id,selected:this.bookedByData.countryId===t.id},t.name)))))),e("div",{key:"ab7bf06ba724924974153f77e790875945238991",class:"form-group p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{key:"32a709695e1448b327b18f12a8af9d9dd19fac2e",class:"p-0 m-0 margin3"},g.entries.Lcz_MobilePhone),e("div",{key:"89f6226cd332e5b9b28bbcd0729a35645a8b0234",class:"p-0 m-0 controlContainer flex-fill"},e("ir-phone-input",{key:"941c89dbf235d5ac6c36d6e7ae373d95ca2eb496",language:this.language,value:this.bookedByData.contactNumber,phone_prefix:this.bookedByData.isdCode,default_country:this.bookedByData.countryId,onTextChange:t=>{this.handleDataChange("isdCode",{target:{value:t.detail.phone_prefix}});this.handleDataChange("contactNumber",{target:{value:t.detail.mobile}})}}))),e("div",{key:"e2e92b09540b908a3ccbcd9ea5fa598eb9876966",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{key:"0140e64d23fd48ccb1436dd03f58c832f007e7d2",class:"p-0 m-0 margin3"},g.entries.Lcz_YourArrivalTime),e("div",{key:"d0e4f32d03eb011b6e90f161ce0595cbd1350114",class:"p-0 m-0  controlContainer flex-fill"},e("select",{key:"14537fbbeee53d0c7de92f3468b13903d08fb904",class:`form-control input-sm pr-0 ${this.isButtonPressed&&this.bookedByData.selectedArrivalTime.code===""&&"border-danger"}`,id:M(),onChange:t=>this.handleDataChange("selectedArrivalTime",t)},this.arrivalTimeList.map((t=>e("option",{value:t.CODE_NAME,selected:this.bookedByData.selectedArrivalTime.code===t.CODE_NAME},t.CODE_VALUE_EN))))))),e("div",{key:"db1137a40534df534264219275b09f78c8aea049",class:"p-0 flex-fill  ml-md-3"},e("div",{key:"35d332503fc07117dcb1eeb765646569140588b6",class:"  p-0 d-flex flex-column flex-md-row align-items-md-center "},e("label",{key:"a3d5085a550cc60939734c5e4407a3dd634939e5",class:"p-0 m-0 margin3"},g.entries.Lcz_AnyMessageForUs),e("div",{key:"e1df761ddc360a9b006312a12a2e189a78eefe8c",class:"p-0 m-0  controlContainer flex-fill "},e("textarea",{key:"54b332077040a60b6a2629db49e0a0f1f42cc028",id:M(),rows:4,class:"form-control ",name:"message",value:this.bookedByData.message,onInput:t=>this.handleDataChange("message",t)}))),this.showPaymentDetails&&e(n,{key:"b8fde8d09d114f315c2a2f8fc44da606e77f7c7d"},e("div",{key:"f23d0cb5964ba1706fd778e64b17a6aea8ff962a",class:"form-group mt-md-1  p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{key:"fd08bd2ea831ee888d7f7822b0d72e7ca45894b2",class:"p-0 m-0 margin3"},g.entries.Lcz_CardNumber),e("div",{key:"09c003605cb4b0cefdf3eeae34375ea54dabc28e",class:"p-0 m-0  controlContainer flex-fill"},e("input",{key:"d82315b14f07a95e181eebdd7f5e83666064a93e",class:"form-control",type:"text",placeholder:"",pattern:"0-9 ",id:M(),value:this.bookedByData.cardNumber,onInput:t=>this.handleNumberInput("cardNumber",t)}))),e("div",{key:"0949caf3b35f234463deafafc2eecc8f0f23363d",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{key:"4c97cb70614cc7b5145fe0036d103decfa83dee9",class:"p-0 m-0 margin3"},g.entries.Lcz_CardHolderName),e("div",{key:"3f06954642dc0a32deb39b41d5fedad26efaf121",class:"p-0 m-0  controlContainer flex-fill"},e("input",{key:"b3870a37355296ab31d92866ab06060508d74129",class:"form-control",type:"text",placeholder:"",pattern:"0-9 ",id:M(),value:this.bookedByData.cardHolderName,onInput:t=>this.handleDataChange("cardHolderName",t)}))),e("div",{key:"0bb7986be3e64492ec5d30a7a3bc2b388f0f0f00",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{key:"952dc888d563b9c615e9dae0fc75b4922497f6d4",class:"p-0 m-0 margin3"},g.entries.Lcz_ExpiryDate),e("div",{key:"ad9157a880b4c4cd5b9dfe59d039e3c77030aef4",class:"p-0 m-0 row  controlContainer flex-fill"},e("div",{key:"1fff6fa222b741112de60fa6c8bb7b05d004da76",class:"p-0 m-0"},e("select",{key:"dc5b9e10fa064360c443f9c794c967634f41b0ac",class:"form-control input-sm pr-0",id:M(),onChange:t=>this.handleDataChange("expiryMonth",t)},this.expiryMonths.map((t=>e("option",{value:t,selected:t===this.bookedByData.expiryMonth},t))))),e("div",{key:"de970f23eb4151c0acaf92f28703280a06e2b1cf",class:"p-0 m-0 ml-1"},e("select",{key:"97a0d5c3c4190ce9d0ef49c36a32c714f6690e33",class:"form-control input-sm pr-0",id:M(),onChange:t=>this.handleDataChange("expiryYear",t)},this.expiryYears.map(((t,i)=>e("option",{value:t,selected:i===this.bookedByData.expiryYear},t)))))))),e("div",{key:"30aedca0847ed0d424f17a841c53996545bff6ba",class:"form-group mt-1 p-0 d-flex flex-row align-items-center"},e("label",{key:"946311ed2dc9e1bdc6f5ecf0486b57455424c628",class:"p-0 m-0",htmlFor:"emailTheGuestId"},g.entries.Lcz_EmailTheGuest),e("div",{key:"6d956b3dc083cb51b0375deb64c6a60e6d4ba168",class:"p-0 m-0  controlContainer flex-fill checkBoxContainer"},e("input",{key:"5053d867e487277a6da837d9ba98f943e6fa4f2e",class:"form-control",type:"checkbox",checked:this.bookedByData.emailGuest,id:"emailTheGuestId",onChange:t=>this.handleDataChange("emailGuest",t)})))))))}};kt.style=yt;const xt=".sc-igl-rate-plan-h{display:block;margin-bottom:0.5rem}.currency.sc-igl-rate-plan{display:block;position:absolute;margin:0;padding:0;height:auto;left:10px}.rate-input.sc-igl-rate-plan{font-size:14px;line-height:0;padding:0;height:0;border-left:0}.rate-input-container.sc-igl-rate-plan{display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;flex:1}.new-currency.sc-igl-rate-plan{color:#3b4781;border:1px solid #cacfe7;font-size:0.975rem;height:2rem;background:white;border-right:0;border-top-right-radius:0;border-bottom-right-radius:0;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.input-group-prepend.sc-igl-rate-plan span[data-state='focus'].sc-igl-rate-plan{border-color:var(--blue)}.input-group-prepend.sc-igl-rate-plan span[data-disabled].sc-igl-rate-plan{background-color:#eceff1;border-color:rgba(118, 118, 118, 0.3)}.non-ref-span.sc-igl-rate-plan{font-size:12px;color:var(--green)}@media only screen and (min-width: 1200px){.rateplan-name-container.sc-igl-rate-plan{width:40%}.rateplan-container.sc-igl-rate-plan{width:40%}}@media only screen and (min-width: 991px){.max-w-300.sc-igl-rate-plan{max-width:200px}.rate-input-container.sc-igl-rate-plan{max-width:150px}}@media only screen and (min-width: 991px) and (max-width: 1300px){.rateplan-name-container.sc-igl-rate-plan{width:20%}}@media only screen and (max-width: 768px){.booking-btn.sc-igl-rate-plan{width:100%}}.total-nights-container.sc-igl-rate-plan{width:max-content}.nightBorder.sc-igl-rate-plan{border-left-width:0;border-top-right-radius:3px !important;border-bottom-right-radius:3px !important}";const wt=xt;const _t=class{constructor(e){t(this,e);this.gotoSplitPageTwoEvent=s(this,"gotoSplitPageTwoEvent",7);this.ratePlan=undefined;this.roomTypeId=undefined;this.ratePricingMode=[];this.currency=undefined;this.shouldBeDisabled=undefined;this.bookingType="PLUS_BOOKING";this.isBookDisabled=false;this.visibleInventory=undefined}disableForm(){const{bookingType:t,shouldBeDisabled:e,ratePlan:i,visibleInventory:s}=this;if(t==="EDIT_BOOKING"&&e){return false}return!i.is_available_to_book||(s===null||s===void 0?void 0:s.visibleInventory)===0}updateRateplanSelection(t){const{roomTypeId:e,ratePlan:i}=this;const s=o.ratePlanSelections;o.ratePlanSelections=Object.assign(Object.assign({},s),{[e]:Object.assign(Object.assign({},s[e]),{[i.id]:Object.assign(Object.assign({},s[e][i.id]),t)})})}handleDataChange(t,e){const i=e.target.value;if(t==="adult_child_offering"){this.handleVariationChange(i)}else if(t==="rate"){this.updateRateplanSelection({view_mode:i})}else if(t==="totalRooms"){h({roomTypeId:this.roomTypeId,ratePlanId:this.ratePlan.id,rooms:Number(i)})}}bookProperty(){this.handleDataChange("totalRooms",{target:{value:"1"}});this.gotoSplitPageTwoEvent.emit({key:"gotoSplitPage",data:""})}renderRate(){const{visibleInventory:t}=this;if(!t)return"";if(t.is_amount_modified){return t.rp_amount.toString()}const{selected_variation:e,view_mode:i}=t;const s=i==="001"?e===null||e===void 0?void 0:e.discounted_gross_amount:e===null||e===void 0?void 0:e.amount_per_night_gross;return(s===null||s===void 0?void 0:s.toString())||""}formatVariation(t){var e,i,s,n;if(!t)return"";const a=`${t.adult_nbr} ${t.adult_nbr===1?(e=g.entries["Lcz_Adult"])===null||e===void 0?void 0:e.toLowerCase():(i=g.entries["Lcz_Adults"])===null||i===void 0?void 0:i.toLowerCase()}`;const o=t.child_nbr>0?`${t.child_nbr} ${t.child_nbr>1?(s=g.entries["Lcz_Children"])===null||s===void 0?void 0:s.toLowerCase():(n=g.entries["Lcz_Child"])===null||n===void 0?void 0:n.toLowerCase()}`:"";return o?`${a} ${o}`:a}getTooltipMessages(){var t,e,i,s,n;const{ratePlan:a,visibleInventory:o}=this;const r=o===null||o===void 0?void 0:o.selected_variation;if(!r)return;const l=(t=a.variations)===null||t===void 0?void 0:t.find((t=>this.formatVariation(t)===this.formatVariation(r)));if(!l)return;const c=(i=(e=l.applicable_policies)===null||e===void 0?void 0:e.find((t=>t.type==="cancelation")))===null||i===void 0?void 0:i.combined_statement;const d=(n=(s=l.applicable_policies)===null||s===void 0?void 0:s.find((t=>t.type==="guarantee")))===null||n===void 0?void 0:n.combined_statement;let h="";if(c){h+=`<b><u>Cancellation:</u></b> ${c}<br/>`}if(d){h+=`<b><u>Guarantee:</u></b> ${d}`}return h||undefined}async handleVariationChange(t){const{ratePlan:e,roomTypeId:i}=this;const s=e.variations||[];const n=s.find((e=>this.formatVariation(e)===t));if(!n)return;b({params:{selected_variation:n},ratePlanId:e.id,roomTypeId:i})}resetReserved(){const t=Object.entries(o.ratePlanSelections).reduce(((t,[e,i])=>{t[e]=Object.entries(i).reduce(((t,[e,i])=>{t[e]=Object.assign(Object.assign({},i),{reserved:0});return t}),{});return t}),{});o.ratePlanSelections=t}render(){var t,s,a;const{ratePlan:r,bookingType:l,currency:c,ratePricingMode:d,visibleInventory:f}=this;const b=r.is_available_to_book;const p=this.disableForm();const u=f===null||f===void 0?void 0:f.selected_variation;const m=(t=r.variations)===null||t===void 0?void 0:t.map((t=>this.formatVariation(t)));console.log(f);return e(i,{key:"5a00d42fd07d59011a155848cc366b3bb93afb14"},e("div",{key:"36a6699856237d9b717c927088dd4ff4f807df99",class:`d-flex m-0 p-0 ${b?"flex-column flex-lg-row align-items-lg-center justify-content-lg-between":"align-items-center justify-content-between"}`},e("div",{key:"22779a94227719a24f77e69d263949a20e79e638",class:"rateplan-name-container d-flex align-items-center",style:{gap:"0.5rem"}},l==="BAR_BOOKING"?e(n,null,e("span",{class:"font-weight-bold"},r.name.split("/")[0]),e("span",null,"/",r.name.split("/")[1])):e("span",null,r.short_name," ",r.is_non_refundable&&e("span",{class:"non-ref-span"},"Non Refundable")),b&&e("ir-tooltip",{key:"9ab57bc12a04f02252e9dbfcbe41bf0b88c9cbb9",message:this.getTooltipMessages()})),b?e("div",{class:"d-md-flex justify-content-md-end align-items-md-center flex-fill rateplan-container"},e("div",{class:"mt-1 mt-md-0 flex-fill max-w-300"},e("fieldset",{class:"position-relative"},e("select",{disabled:p,class:"form-control input-sm",id:M(),onChange:t=>this.handleDataChange("adult_child_offering",t)},m===null||m===void 0?void 0:m.map((t=>e("option",{value:t,selected:this.formatVariation(u)===t},t)))))),e("div",{class:"m-0 p-0 mt-1 mt-md-0 d-flex justify-content-between align-items-md-center ml-md-1"},e("div",{class:"d-flex m-0 p-0 rate-total-night-view mt-0"},e("ir-price-input",{disabled:p,onTextChange:t=>this.updateRateplanSelection({is_amount_modified:true,rp_amount:Number(t.detail)}),"aria-label":`${(a=(s=this.visibleInventory)===null||s===void 0?void 0:s.roomtype)===null||a===void 0?void 0:a.name} ${this.ratePlan.short_name}'s rate`,"aria-describedby":`${this.ratePlan.short_name}'s rate`,class:"ir-br-input-none",currency:c.symbol,value:this.renderRate(),placeholder:g.entries.Lcz_Rate||"Rate"}),e("fieldset",{class:"position-relative m-0 total-nights-container p-0"},e("select",{disabled:p,class:"form-control input-sm m-0 nightBorder rounded-0 py-0",id:M(),onChange:t=>this.updateRateplanSelection({view_mode:t.target.value})},d.map((t=>e("option",{value:t.CODE_NAME,selected:(f===null||f===void 0?void 0:f.view_mode)===t.CODE_NAME},t.CODE_VALUE_EN)))))),(l==="PLUS_BOOKING"||l==="ADD_ROOM")&&e("div",{class:"flex-fill mt-lg-0 ml-1 m-0 mt-md-0 p-0"},e("fieldset",{class:"position-relative"},e("select",{disabled:f.visibleInventory===0,class:"form-control input-sm",id:M(),onChange:t=>this.handleDataChange("totalRooms",t)},Array.from({length:(f.visibleInventory||0)+1},((t,e)=>e)).map((t=>e("option",{value:t,selected:f.reserved===t},t))))))),l==="EDIT_BOOKING"&&e(n,null,e("div",{class:"m-0 p-0 mt-lg-0 ml-md-1 mt-md-1 d-none d-md-block"},e("fieldset",{class:"position-relative"},e("input",{disabled:p,type:"radio",name:"ratePlanGroup",value:"1",onChange:()=>{this.resetReserved();h({roomTypeId:this.roomTypeId,ratePlanId:this.ratePlan.id,rooms:1,guest:[{name:o.guest.name,unit:null,bed_preference:this.visibleInventory.roomtype.is_bed_configuration_enabled?o.guest.bed_preference:null,infant_nbr:this.visibleInventory.selected_variation.child_nbr>0?o.guest.infant_nbr:null}]})},checked:f.reserved===1}))),e("button",{disabled:p,type:"button",class:"btn btn-primary booking-btn mt-lg-0 btn-sm ml-md-1 mt-1 d-md-none",onClick:()=>{this.resetReserved();h({roomTypeId:this.roomTypeId,ratePlanId:this.ratePlan.id,rooms:1,guest:[{name:o.guest.name,unit:null,bed_preference:this.visibleInventory.roomtype.is_bed_configuration_enabled?o.guest.bed_preference:null,infant_nbr:this.visibleInventory.selected_variation.child_nbr>0?o.guest.infant_nbr:null}]});this.bookProperty()}},f.reserved===1?g.entries.Lcz_Current:g.entries.Lcz_Select)),(l==="BAR_BOOKING"||l==="SPLIT_BOOKING")&&e("button",{disabled:p||l==="SPLIT_BOOKING"&&this.isBookDisabled,type:"button",class:"btn btn-primary booking-btn mt-lg-0 btn-sm ml-md-1 mt-1",onClick:()=>this.bookProperty()},g.entries.Lcz_Book)):e("p",{class:"text-danger m-0 p-0"},g.entries["Lcz_NotAvailable"]||"Not available")))}};_t.style=wt;const Dt=".sc-igl-room-type-h{display:block}.margin-bottom-8.sc-igl-room-type{margin-bottom:8px !important}";const Ct=Dt;const Ot=class{constructor(e){t(this,e);this.dataUpdateEvent=s(this,"dataUpdateEvent",7);this.validBookingTypes=["PLUS_BOOKING","ADD_ROOM","EDIT_BOOKING","SPLIT_BOOKING"];this.roomType=undefined;this.bookingType="PLUS_BOOKING";this.dateDifference=undefined;this.ratePricingMode=[];this.roomInfoId=null;this.currency=undefined;this.initialRoomIds=undefined;this.isBookDisabled=undefined;this.selectedRooms=[];this.totalRooms=undefined;this.roomsDistributions=[]}render(){var t,s;const n=this.validBookingTypes.includes(this.bookingType);return e(i,{key:"742e5d22de4746f2c334c5929f1e528ba7ad6e5a"},n&&((t=this.roomType.rateplans)===null||t===void 0?void 0:t.length)>0&&e("div",{key:"beac5558ecaef5e07b533a5e270a6cfedc5048ce",class:"font-weight-bold font-medium-1 margin-bottom-8 "},this.roomType.name),(s=this.roomType.rateplans)===null||s===void 0?void 0:s.map((t=>{if(!!t.variations){let i=this.roomInfoId&&this.roomInfoId===this.roomType.id;const s=p(this.roomType.id,t.id);console.log(s);return e("igl-rate-plan",{isBookDisabled:this.isBookDisabled,visibleInventory:s,key:`rate-plan-${t.id}`,ratePricingMode:this.ratePricingMode,class:n?"":"",currency:this.currency,ratePlan:t,roomTypeId:this.roomType.id,bookingType:this.bookingType,shouldBeDisabled:i})}return null})))}};Ot.style=Ct;const It=".sc-ir-autocomplete-h{display:block;position:relative}.selected.sc-ir-autocomplete{color:#fff;text-decoration:none;background-color:#666ee8}input.sc-ir-autocomplete{width:100%;position:relative;border-top-left-radius:0px !important;border-left:0 !important;border-bottom-left-radius:0px !important}label.sc-ir-autocomplete{margin:0;border-top-right-radius:0px !important;border-right:0 !important;border-bottom-right-radius:0px !important;width:fit-content;display:flex;align-items:center;padding-right:3px !important;justify-content:center;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}label[data-state='focused'].sc-ir-autocomplete{border-color:var(--blue)}.combobox.sc-ir-autocomplete{margin:0;top:30px;min-width:100%;width:max-content;display:block;z-index:10000;padding:1px;background:white;box-shadow:0px 8px 16px 0px rgba(0, 0, 0, 0.2);padding:5px 0;max-height:250px;overflow-y:auto}.dropdown-item.sc-ir-autocomplete{cursor:pointer}button.sc-ir-autocomplete{all:unset;right:4px}.combobox.sc-ir-autocomplete p.sc-ir-autocomplete,span.sc-ir-autocomplete,loader-container.sc-ir-autocomplete{padding:5px 16px;margin:0px;margin-top:2px;width:100%}.combobox.sc-ir-autocomplete p.sc-ir-autocomplete{cursor:pointer}.combobox.sc-ir-autocomplete p.sc-ir-autocomplete:hover{background:#f4f5fa}.combobox.sc-ir-autocomplete p[data-selected].sc-ir-autocomplete,.combobox.sc-ir-autocomplete p[data-selected].sc-ir-autocomplete:hover{color:#fff;text-decoration:none;background-color:#666ee8}.loader.sc-ir-autocomplete{width:14px;height:14px;border:2px solid #0f0f0f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const Mt=It;const Bt=class{constructor(e){t(this,e);this.comboboxValue=s(this,"comboboxValue",7);this.inputCleared=s(this,"inputCleared",7);this.toast=s(this,"toast",7);this.bookingService=new l;this.no_result_found="";this.duration=300;this.placeholder="";this.propertyId=undefined;this.isSplitBooking=false;this.type="text";this.name="";this.inputId=M();this.required=false;this.disabled=false;this.value=undefined;this.from_date="";this.to_date="";this.danger_border=undefined;this.inputValue="";this.data=[];this.selectedIndex=-1;this.isComboBoxVisible=false;this.isLoading=true;this.isItemSelected=undefined;this.inputFocused=false}componentWillLoad(){this.no_result_found=g.entries.Lcz_NoResultsFound}handleKeyDown(t){var e;const i=this.data.length;const s=this.getHeightOfPElement();if(i>0){switch(t.key){case"ArrowUp":t.preventDefault();this.selectedIndex=(this.selectedIndex-1+i)%i;this.adjustScrollPosition(s);break;case"ArrowDown":t.preventDefault();this.selectedIndex=(this.selectedIndex+1)%i;this.adjustScrollPosition(s);break;case"Enter":case" ":case"ArrowRight":t.preventDefault();this.selectItem(this.selectedIndex);break;case"Escape":(e=this.inputRef)===null||e===void 0?void 0:e.blur();this.isComboBoxVisible=false;break}}}getHeightOfPElement(){const t=this.el.querySelector(".combobox");if(t){const e=t.querySelector("p");return e?e.offsetHeight:0}return 0}adjustScrollPosition(t,e=250){const i=this.el.querySelector(".combobox");if(i){const s=2;const n=t+s;const a=n*this.selectedIndex;let o=a-e/2+t/2;o=Math.max(0,Math.min(o,i.scrollHeight-e));i.scrollTo({top:o,behavior:"auto"})}}selectItem(t){if(this.data[t]){this.isItemSelected=true;this.comboboxValue.emit({key:"select",data:this.data[t]});this.inputValue="";this.resetCombobox()}}debounceFetchData(){clearTimeout(this.debounceTimer);this.debounceTimer=setTimeout((()=>{this.fetchData()}),this.duration)}async fetchData(){try{this.isLoading=true;let t=[];if(!this.isSplitBooking){t=await this.bookingService.fetchExposedGuest(this.inputValue,this.propertyId)}else{if(this.inputValue.split(" ").length===1){t=await this.bookingService.fetchExposedBookings(this.inputValue,this.propertyId,this.from_date,this.to_date)}}this.data=t;if(!this.isComboBoxVisible){this.isComboBoxVisible=true}}catch(t){console.log("error",t)}finally{this.isLoading=false}}handleInputChange(t){this.inputValue=t.target.value;if(this.inputValue){this.debounceFetchData()}else{clearTimeout(this.debounceTimer);this.resetCombobox(false)}}handleDocumentClick(t){const e=t.target;if(!this.el.contains(e)){this.isComboBoxVisible=false}}handleBlur(){this.inputFocused=false;setTimeout((()=>{if(this.isDropdownItem(document.activeElement)){return}if(this.isSplitBooking){if(!this.isItemSelected){if(this.data.length>0){this.comboboxValue.emit({key:"blur",data:this.inputValue})}else{if(this.inputValue!==""){this.toast.emit({type:"error",description:"",title:`The Booking #${this.inputValue} is not Available`,position:"top-right"});this.inputCleared.emit()}}this.inputValue="";this.resetCombobox()}else{this.isItemSelected=false}}else{if(!this.isItemSelected){this.comboboxValue.emit({key:"blur",data:this.inputValue});this.inputValue="";this.resetCombobox()}else{this.isItemSelected=false}}}),200)}isDropdownItem(t){return t&&t.closest(".combobox")}disconnectedCallback(){var t,e,i,s;clearTimeout(this.debounceTimer);(t=this.inputRef)===null||t===void 0?void 0:t.removeEventListener("blur",this.handleBlur);(e=this.inputRef)===null||e===void 0?void 0:e.removeEventListener("click",this.selectItem);(i=this.inputRef)===null||i===void 0?void 0:i.removeEventListener("keydown",this.handleKeyDown);(s=this.inputRef)===null||s===void 0?void 0:s.removeEventListener("focus",this.handleFocus)}handleItemKeyDown(t,e){var i;if(t.key==="Enter"||t.key===" "||t.key==="ArrowRight"){this.selectItem(e);t.preventDefault()}else if(t.key==="Escape"){this.isComboBoxVisible=false;(i=this.inputRef)===null||i===void 0?void 0:i.blur();t.preventDefault()}else{return}}renderDropdown(){var t;if(this.inputValue!==""){return e("div",{class:`position-absolute border rounded combobox`},(t=this.data)===null||t===void 0?void 0:t.map(((t,i)=>e("p",{role:"button",onKeyDown:t=>this.handleItemKeyDown(t,i),"data-selected":this.selectedIndex===i,tabIndex:0,onClick:()=>this.selectItem(i)},this.isSplitBooking?e(n,null,`${t.booking_nbr} ${t.guest.first_name} ${t.guest.last_name}`):e("div",{class:"d-flex align-items-center flex-fill"},e("p",{class:"p-0 m-0"},`${t.email}`," ",e("span",{class:"p-0 m-0"},` - ${t.first_name} ${t.last_name}`)))))),this.isLoading&&e("div",{class:"loader-container d-flex align-items-center justify-content-center"},e("div",{class:"loader"})),this.data.length===0&&!this.isLoading&&e("span",{class:"text-center"},this.no_result_found))}}handleFocus(){this.isComboBoxVisible=true;this.inputFocused=true}clearInput(){this.inputValue="";this.resetCombobox();this.inputCleared.emit(null)}resetCombobox(t=true){var e;if(t){(e=this.inputRef)===null||e===void 0?void 0:e.blur()}this.data=[];this.selectedIndex=-1;this.isComboBoxVisible=false}render(){return e(i,{key:"cfc9ba94a11d06ff14019ca4a5b1a55fd62018a2"},e("div",{key:"f31d292d60b87e50f4b317dadea936aa5aae96c0",class:"d-flex align-items-center "},e("label",{key:"38a2c8f070b104f789889299a105ae47c345ef35","data-state":this.inputFocused?"focused":"blured",htmlFor:this.inputId,class:`form-control input-sm ${this.danger_border&&"border-danger"}`},e("svg",{key:"9d047c02e30683fd61989e9d4c9625c0c7d4275f",xmlns:"http://www.w3.org/2000/svg",height:"12",width:"12",viewBox:"0 0 512 512"},e("path",{key:"c5e7e6ea28a3cf61fc121a987736e457c6b274ba",fill:"currentColor",d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"}))),e("input",{key:"541844df4a7b2b1708fb66623ce4167fe7cdbed5",required:this.required,disabled:this.disabled,id:this.inputId,onKeyDown:this.handleKeyDown.bind(this),class:`form-control input-sm flex-full ${this.danger_border&&"border-danger"}`,type:this.type,name:this.name,value:this.value||this.inputValue,placeholder:this.placeholder,onBlur:this.handleBlur.bind(this),autoComplete:"none",onInput:this.handleInputChange.bind(this),onFocus:this.handleFocus.bind(this),ref:t=>this.inputRef=t}),this.inputValue&&e("button",{key:"da7c9c76bac94c292fd331c42bff36333c91fd1a",type:"button",class:"position-absolute d-flex align-items-center justify-content-center ",onClick:this.clearInput.bind(this)},e("p",{key:"81bd40819368fbf532ce3e39cd99d50ce7aa6536",class:"sr-only"},"clear input"),e("svg",{key:"b2e925eaada721852d3352d8b16eeac6c13756ea",width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e("path",{key:"b01c6b7a8536379a5e5391d5d3dbe01200a34ccf",d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"})))),this.isComboBoxVisible&&this.renderDropdown())}get el(){return a(this)}};Bt.style=Mt;class Yt{async AddPayment(t,e){try{const{data:i}=await E.post(`/Do_Payment`,{payment:Object.assign(Object.assign({},t),{book_nbr:e})});if(i.ExceptionMsg!==""){throw new Error(i.ExceptionMsg)}return i.My_Result}catch(t){console.log(t);throw new Error(t)}}async CancelPayment(t){try{const{data:e}=await E.post(`/Cancel_Payment`,{id:t});if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}return e.My_Result}catch(t){console.log(t);throw new Error(t)}}async GetExposedCancellationDueAmount(t){try{const{data:e}=await E.post(`/Get_Exposed_Cancelation_Due_Amount`,t);if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}return e.My_Result}catch(t){console.log(t);throw new Error(t)}}}const Tt=".sc-ir-booking-details-h{overflow-x:hidden;--ir-dialog-max-width:20rem}.sc-ir-booking-details-h *.sc-ir-booking-details{font-family:inherit !important}.font-medium.sc-ir-booking-details{font-weight:600}.sc-ir-booking-details-h th.sc-ir-booking-details{font-weight:600}.h-28.sc-ir-booking-details{height:2rem}.mx-01.sc-ir-booking-details{--m:5px;margin-right:var(--m) !important;margin-left:var(--m) !important}.date-margin.sc-ir-booking-details{margin-right:5px}.pickup-margin.sc-ir-booking-details{margin-bottom:7px !important}.header-date.sc-ir-booking-details{padding-left:5px !important}.pointer.sc-ir-booking-details{cursor:pointer}.sc-ir-booking-details:root{--sidebar-width:50rem}.loading-container.sc-ir-booking-details{height:100%;width:100%;display:flex;justify-content:center;align-items:center;margin:0;padding:0}.sm-padding-right.sc-ir-booking-details{padding-right:0.2rem}.sm-padding-left.sc-ir-booking-details{padding-left:0.2rem}.sm-padding-top.sc-ir-booking-details{padding-top:0.2rem}.sm-padding-bottom.sc-ir-booking-details{padding-bottom:0.2rem}.info-notes.sc-ir-booking-details{list-style:none;padding-left:0}.light-blue-bg.sc-ir-booking-details{background-color:#acecff;padding:0.2rem 0.3rem}.iframeHeight.sc-ir-booking-details{height:17.5rem}.dialog-title.sc-ir-booking-details{width:fit-content}";const jt=Tt;const St=class{constructor(e){t(this,e);this.toast=s(this,"toast",7);this.bookingChanged=s(this,"bookingChanged",7);this.closeSidebar=s(this,"closeSidebar",7);this.bookingService=new l;this.roomService=new S;this.paymentService=new Yt;this.token=new j;this.printingBaseUrl="https://gateway.igloorooms.com/PrintBooking/%1/printing?id=%2";this.language="";this.ticket="";this.bookingNumber="";this.propertyid=undefined;this.is_from_front_desk=false;this.p=undefined;this.hasPrint=false;this.hasReceipt=false;this.hasDelete=false;this.hasMenu=false;this.hasRoomEdit=false;this.hasRoomDelete=false;this.hasRoomAdd=false;this.hasCheckIn=false;this.hasCheckOut=false;this.hasCloseButton=false;this.bookingItem=null;this.statusData=[];this.showPaymentDetails=undefined;this.booking=undefined;this.countryNodeList=undefined;this.calendarData={};this.guestData=null;this.rerenderFlag=false;this.sidebarState=null;this.isUpdateClicked=false;this.pms_status=undefined;this.isPMSLogLoading=false;this.paymentActions=undefined;this.property_id=undefined;this.selectedService=undefined;this.bedPreference=undefined}componentWillLoad(){if(this.ticket!==""){this.token.setToken(this.ticket);this.initializeApp()}}ticketChanged(t,e){if(t===e){return}this.token.setToken(this.ticket);this.initializeApp()}handleSideBarEvents(t){this.sidebarState=t.detail.type}handleIconClick(t){const e=t.target;switch(e.id){case"pickup":this.sidebarState="pickup";return;case"close":this.closeSidebar.emit(null);return;case"print":this.openPrintingScreen();return;case"receipt":this.openPrintingScreen("invoice");return;case"book-delete":return;case"menu":window.location.href="https://x.igloorooms.com/manage/acbookinglist.aspx";return;case"room-add":this.bookingItem={ID:"",NAME:this.booking.guest.last_name,EMAIL:this.booking.guest.email,PHONE:this.booking.guest.mobile,REFERENCE_TYPE:"",FROM_DATE:this.booking.from_date,ARRIVAL:this.booking.arrival,TO_DATE:this.booking.to_date,TITLE:`${g.entries.Lcz_AddingUnitToBooking}# ${this.booking.booking_nbr}`,defaultDateRange:{fromDate:new Date(this.booking.from_date),fromDateStr:"",toDate:new Date(this.booking.to_date),toDateStr:"",dateDifference:0,message:""},event_type:"ADD_ROOM",booking:this.booking,BOOKING_NUMBER:this.booking.booking_nbr,ADD_ROOM_TO_BOOKING:this.booking.booking_nbr,GUEST:this.booking.guest,message:this.booking.remark,SOURCE:this.booking.source,ROOMS:this.booking.rooms};return;case"extra_service_btn":this.sidebarState="extra_service";return;case"add-payment":return}}async handleResetExposedCancellationDueAmount(t){t.stopImmediatePropagation();t.stopPropagation();const e=await this.paymentService.GetExposedCancellationDueAmount({booking_nbr:this.booking.booking_nbr,currency_id:this.booking.currency.id});this.paymentActions=[...e]}handleEditInitiated(t){this.bookingItem=t.detail}async handleResetBooking(t){t.stopPropagation();t.stopImmediatePropagation();if(t.detail){return this.booking=t.detail}await this.resetBooking()}handleEditExtraService(t){this.selectedService=t.detail;this.sidebarState="extra_service"}setRoomsData(t){var e,i;let s=new Array;if((i=(e=t.My_Result)===null||e===void 0?void 0:e.roomtypes)===null||i===void 0?void 0:i.length){s=t.My_Result.roomtypes;t.My_Result.roomtypes.forEach((t=>{t.expanded=true}))}this.calendarData.roomsInfo=s}async initializeApp(){var t,e;try{const[i,s,n,a,o]=await Promise.all([this.roomService.getExposedProperty({id:this.propertyid||0,language:this.language,aname:this.p}),this.roomService.fetchLanguage(this.language),this.bookingService.getCountries(this.language),this.bookingService.getExposedBooking(this.bookingNumber,this.language),this.bookingService.getBedPreferences()]);this.property_id=(t=i===null||i===void 0?void 0:i.My_Result)===null||t===void 0?void 0:t.id;this.bedPreference=o;if((a===null||a===void 0?void 0:a.booking_nbr)&&((e=a===null||a===void 0?void 0:a.currency)===null||e===void 0?void 0:e.id)&&a.is_direct){this.paymentService.GetExposedCancellationDueAmount({booking_nbr:a.booking_nbr,currency_id:a.currency.id}).then((t=>{this.paymentActions=t}))}if(!(g===null||g===void 0?void 0:g.entries)){g.entries=s.entries;g.direction=s.direction}this.countryNodeList=n;const r=i===null||i===void 0?void 0:i.My_Result;if(r){const{allowed_payment_methods:t,currency:e,allowed_booking_sources:s,adult_child_constraints:n,calendar_legends:a,aname:o}=r;this.printingBaseUrl=this.printingBaseUrl.replace("%1",o).replace("%2",this.bookingNumber);this.calendarData={currency:e,allowed_booking_sources:s,adult_child_constraints:n,legendData:a};this.setRoomsData(i);const l=["001","004"];this.showPaymentDetails=t===null||t===void 0?void 0:t.some((t=>l.includes(t.code)))}else{console.warn("Room response is missing 'My_Result'.")}this.guestData=a.guest;this.booking=a}catch(t){console.error("Error initializing app:",t)}}async openPrintingScreen(t="print",e="new"){if(e==="old"){if(t==="invoice"){return window.open(`https://x.igloorooms.com/manage/AcBookingEdit.aspx?IRID=${this.booking.system_id}&&PM=I&TK=${this.ticket}`)}return window.open(`https://x.igloorooms.com/manage/AcBookingEdit.aspx?IRID=${this.booking.system_id}&&PM=B&TK=${this.ticket}`)}let i=this.printingBaseUrl;if(t==="invoice"){i=i+"&mode=invoice"}const{data:s}=await E.post(`Get_ShortLiving_Token`);if(!s.ExceptionMsg){i=i+`&token=${s.My_Result}`}window.open(i)}handleCloseBookingWindow(){this.bookingItem=null}handleDeleteFinish(t){this.booking=Object.assign(Object.assign({},this.booking),{rooms:this.booking.rooms.filter((e=>e.identifier!==t.detail))})}async resetBooking(){try{const t=await this.bookingService.getExposedBooking(this.bookingNumber,this.language);this.booking=Object.assign({},t);this.bookingChanged.emit(this.booking)}catch(t){console.log(t)}}renderSidebarContent(){var t;const i=()=>{this.sidebarState=null};switch(this.sidebarState){case"guest":return e("ir-guest-info",{headerShown:true,slot:"sidebar-body",booking_nbr:this.bookingNumber,email:(t=this.booking)===null||t===void 0?void 0:t.guest.email,language:this.language,onCloseSideBar:i});case"pickup":return e("ir-pickup",{slot:"sidebar-body",defaultPickupData:this.booking.pickup_info,bookingNumber:this.booking.booking_nbr,numberOfPersons:this.booking.occupancy.adult_nbr+this.booking.occupancy.children_nbr,onCloseModal:i});case"extra_note":return e("ir-booking-extra-note",{slot:"sidebar-body",booking:this.booking,onCloseModal:()=>this.sidebarState=null});case"extra_service":return e("ir-extra-service-config",{service:this.selectedService,booking:{from_date:this.booking.from_date,to_date:this.booking.to_date,booking_nbr:this.booking.booking_nbr,currency:this.booking.currency},slot:"sidebar-body",onCloseModal:()=>{i();if(this.selectedService){this.selectedService=null}}});default:return null}}render(){if(!this.booking){return e("div",{class:"loading-container"},e("ir-spinner",null))}return[e(n,null,!this.is_from_front_desk&&e(n,null,e("ir-toast",null),e("ir-interceptor",null))),e("ir-booking-header",{booking:this.booking,hasCloseButton:this.hasCloseButton,hasDelete:this.hasDelete,hasMenu:this.hasMenu,hasPrint:this.hasPrint,hasReceipt:this.hasReceipt}),e("div",{class:"fluid-container p-1 text-left mx-0"},e("div",{class:"row m-0"},e("div",{class:"col-12 p-0 mx-0 pr-lg-1 col-lg-6"},e("ir-reservation-information",{countries:this.countryNodeList,booking:this.booking}),e("div",{class:"font-size-large d-flex justify-content-between align-items-center mb-1"},e("ir-date-view",{from_date:this.booking.from_date,to_date:this.booking.to_date}),this.hasRoomAdd&&this.booking.is_direct&&this.booking.is_editable&&e("ir-button",{id:"room-add",icon_name:"square_plus",variant:"icon",style:{"--icon-size":"1.5rem"}})),e("div",{class:"card p-0 mx-0"},this.booking.rooms.map(((t,i)=>[e("ir-room",{language:this.language,bedPreferences:this.bedPreference,isEditable:this.booking.is_editable,legendData:this.calendarData.legendData,roomsInfo:this.calendarData.roomsInfo,myRoomTypeFoodCat:t.roomtype.name,mealCodeName:t.rateplan.short_name,currency:this.booking.currency.symbol,hasRoomEdit:this.hasRoomEdit&&this.booking.status.code!=="003"&&this.booking.is_direct,hasRoomDelete:this.hasRoomDelete&&this.booking.status.code!=="003"&&this.booking.is_direct,hasCheckIn:this.hasCheckIn,hasCheckOut:this.hasCheckOut,bookingEvent:this.booking,bookingIndex:i,onDeleteFinished:this.handleDeleteFinish.bind(this)}),i!==this.booking.rooms.length-1&&e("hr",{class:"mr-2 ml-2 my-0 p-0"})]))),e("ir-pickup-view",{booking:this.booking}),e("section",null,e("div",{class:"font-size-large d-flex justify-content-between align-items-center mb-1"},e("p",{class:"font-size-large p-0 m-0 "},g.entries.Lcz_ExtraServices),e("ir-button",{id:"extra_service_btn",icon_name:"square_plus",variant:"icon",style:{"--icon-size":"1.5rem"}})),e("ir-extra-services",{booking:{booking_nbr:this.booking.booking_nbr,currency:this.booking.currency,extra_services:this.booking.extra_services}}))),e("div",{class:"col-12 p-0 m-0 pl-lg-1 col-lg-6"},e("ir-payment-details",{paymentActions:this.paymentActions,bookingDetails:this.booking})))),e("ir-sidebar",{open:this.sidebarState!==null,side:"right",id:"editGuestInfo",onIrSidebarToggle:t=>{t.stopImmediatePropagation();t.stopPropagation();this.sidebarState=null},showCloseButton:false},this.renderSidebarContent()),e(n,null,this.bookingItem&&e("igl-book-property",{allowedBookingSources:this.calendarData.allowed_booking_sources,adultChildConstraints:this.calendarData.adult_child_constraints,showPaymentDetails:this.showPaymentDetails,countryNodeList:this.countryNodeList,currency:this.calendarData.currency,language:this.language,propertyid:this.property_id,bookingData:this.bookingItem,onCloseBookingWindow:()=>this.handleCloseBookingWindow()}))]}get element(){return a(this)}static get watchers(){return{ticket:["ticketChanged"]}}};St.style=jt;const $t=".sc-ir-booking-extra-note-h{display:block}";const Et=$t;const zt=class{constructor(e){t(this,e);this.closeModal=s(this,"closeModal",7);this.resetbooking=s(this,"resetbooking",7);this.bookingService=new l;this.booking=undefined;this.isLoading=false;this.note=""}componentWillLoad(){if(this.booking.extras){this.setNote(u(this.booking.extras))}}setNote(t){this.note=t}async savePrivateNote(){try{this.isLoading=true;let t=this.booking.extras||[];const e={key:"private_note",value:this.note};if(t.length===0){t.push(e)}else{const i=t.findIndex((t=>t.key==="private_note"));if(i===-1){t.push(e)}else{t[i]=e}}const i=await this.bookingService.doReservation({assign_units:true,is_pms:true,is_direct:true,is_in_loyalty_mode:false,promo_key:null,booking:this.booking,Is_Non_Technical_Change:true,extras:t});this.resetbooking.emit(i);this.closeModal.emit(null)}catch(t){console.error(t)}finally{this.isLoading=false}}render(){return e(i,{key:"7b0928f4370f910a526f31799e4eba84f4a4c79f",class:"px-0"},e("ir-title",{key:"77736765ecfc6b2a6dc1588431cfe43af178ff54",class:"px-1",onCloseSideBar:()=>this.closeModal.emit(null),label:g.entries.Lcz_PrivateNote,displayContext:"sidebar"}),e("form",{key:"f09bb335e0363f813a33483b9f92fb2500b58efb",class:"px-1",onSubmit:t=>{t.preventDefault();this.savePrivateNote()}},e("ir-textarea",{key:"2b29cec52115ec458b1e4c87d6d6ca012f011296",placeholder:g.entries.Lcz_PrivateNote_MaxChar,label:"",value:this.note,maxLength:150,onTextChange:t=>this.setNote(t.detail)}),e("div",{key:"bcea5f40ce8269f496aa2d2e1e66ede49e5f7414",class:"d-flex flex-column flex-sm-row mt-3"},e("ir-button",{key:"682c6bce5db4760e07b61d9423460860a0f42199",onClickHandler:()=>this.closeModal.emit(null),btn_styles:"justify-content-center",class:`mb-1 mb-sm-0 flex-fill  mr-sm-1'}`,icon:"",text:g.entries.Lcz_Cancel,btn_color:"secondary"}),e("ir-button",{key:"58aad09b89fad79625ac4c3a98fe9e8130f7fe14",btn_styles:"justify-content-center align-items-center",class:"m-0 flex-fill text-center ml-sm-1",icon:"",isLoading:this.isLoading,text:g.entries.Lcz_Save,btn_color:"primary",btn_type:"submit"}))))}};zt.style=Et;const Lt=".sc-ir-booking-header-h{display:block}.confirmed.sc-ir-booking-header{color:#fff;display:flex;align-items:center}.bg-ir-green.sc-ir-booking-header{background:#629a4c;padding:0.2rem 0.3rem}.bg-ir-red.sc-ir-booking-header{background:#ff4961;padding:0.2rem 0.3rem}.bg-ir-orange.sc-ir-booking-header{background:#ff9149;padding:0.2rem 0.3rem}";const Nt=Lt;const At=class{constructor(e){t(this,e);this.toast=s(this,"toast",7);this.closeSidebar=s(this,"closeSidebar",7);this.resetbooking=s(this,"resetbooking",7);this.openSidebar=s(this,"openSidebar",7);this.confirmationBG={"001":"bg-ir-orange","002":"bg-ir-green","003":"bg-ir-red","004":"bg-ir-red"};this.bookingService=new l;this.booking=undefined;this.hasReceipt=undefined;this.hasPrint=undefined;this.hasDelete=undefined;this.hasMenu=undefined;this.hasCloseButton=undefined;this.bookingStatus=null;this.currentDialogStatus=undefined}handleSelectChange(t){t.stopPropagation();t.stopImmediatePropagation();const e=t.target;this.bookingStatus=e.selectedValue}async updateStatus(){if(!this.bookingStatus||this.bookingStatus==="-1"){this.toast.emit({type:"error",description:"",title:g.entries.Lcz_SelectStatus,position:"top-right"});return}try{await this.bookingService.changeExposedBookingStatus({book_nbr:this.booking.booking_nbr,status:this.bookingStatus});this.toast.emit({type:"success",description:"",title:g.entries.Lcz_StatusUpdatedSuccessfully,position:"top-right"});this.bookingStatus=null;this.resetbooking.emit(null)}catch(t){console.log(t)}}openDialog(t){const{type:e}=t;this.currentDialogStatus=e;this.dialogRef.openModal()}renderDialogBody(){switch(this.currentDialogStatus){case"pms":return e("ir-pms-logs",{slot:"modal-body",bookingNumber:this.booking.booking_nbr});case"events-log":return e("ir-events-log",{slot:"modal-body",bookingNumber:this.booking.booking_nbr})}}render(){return e("div",{key:"e9276a8a5c58ee175d74150872e4e0570479ce80",class:"fluid-container p-1"},e("div",{key:"deba1980ccb9fcdb74d93f387f35302315c090fb",class:"d-flex flex-column p-0 mx-0 flex-lg-row align-items-md-center justify-content-between mt-1"},e("div",{key:"7b38fc0c6658a186a9f2abb55199e8e0276a1188",class:"m-0 p-0 mb-1 mb-lg-0 mt-md-0"},e("p",{key:"775b4cf550c27b1b6982892e8c3186d5e48576fc",class:"font-size-large m-0 p-0"},`${g.entries.Lcz_Booking}#${this.booking.booking_nbr}`),e("p",{key:"2cfe549d4819d4671ea72cbba3510c1175981143",class:"m-0 p-0"},!this.booking.is_direct&&e("span",{key:"9e90398b41bc86cfb48fa760f829570071bb79e9",class:"mr-1 m-0"},this.booking.channel_booking_nbr))),e("div",{key:"aa89614654030de37d2355d8d2da709c0bb0f226",class:"d-flex justify-content-end align-items-center",style:{gap:"1rem",flexWrap:"wrap"}},e("span",{key:"e3fb5c5ea8a753e0044067feaf0318e74adec6d2",class:`confirmed btn-sm m-0  ${this.confirmationBG[this.booking.status.code]}`},this.booking.status.description),this.booking.allowed_actions.length>0&&this.booking.is_editable&&e("div",{key:"8ecee31b64605260dff946629b416849afbf9aad",class:"m-0 p-0 d-flex align-items-center",style:{gap:"0.25rem"}},e("ir-select",{key:"cf57853273322aa71ea9b2821fdddf47c2e4f55c",selectContainerStyle:"h-28",selectStyles:"d-flex status-select align-items-center h-28",firstOption:g.entries.Lcz_Select,id:"update-status",size:"sm","label-available":"false",data:this.booking.allowed_actions.map((t=>({text:t.description,value:t.code}))),textSize:"sm",class:"sm-padding-right m-0 ",selectedValue:this.bookingStatus}),e("ir-button",{key:"698766ae0dabe22e283f0fd9e8b0d5408c2fdf52",onClickHandler:this.updateStatus.bind(this),btn_styles:"h-28",isLoading:Y("/Change_Exposed_Booking_Status"),btn_disabled:Y("/Change_Exposed_Booking_Status"),id:"update-status-btn",size:"sm",text:"Update"})),e("ir-button",{key:"7e984e42fa5f7490b66ad9475c8901f30df24612",size:"sm",btn_color:"outline",text:g.entries.Lcz_EventsLog,onClickHandler:t=>{t.stopImmediatePropagation();t.stopPropagation();this.openDialog({type:"events-log"})}}),y.is_pms_enabled&&e("ir-button",{key:"648f141b9becf56e9ae1d5ad3b1591e04466cded",size:"sm",btn_color:"outline",text:g.entries.Lcz_pms,onClick:t=>{t.stopImmediatePropagation();t.stopPropagation();this.openDialog({type:"pms"})}}),this.hasReceipt&&e("ir-button",{key:"ef08fb37c64349bd816dd5e35b4253c77a61acd9",variant:"icon",id:"receipt",icon_name:"reciept",class:"",style:{"--icon-size":"1.65rem"}}),this.hasPrint&&e("ir-button",{key:"0a0a2b10b275c02b656bb1eaf90185ba4e2aa7a2",variant:"icon",id:"print",icon_name:"print",class:"",style:{"--icon-size":"1.65rem"}}),this.hasDelete&&e("ir-button",{key:"f021f4c40abc5d7364a955fae9f697ae3507585b",variant:"icon",id:"book-delete",icon_name:"trash",class:"",style:Object.assign(Object.assign({},z.danger),{"--icon-size":"1.65rem"})}),this.hasMenu&&e("ir-button",{key:"0c9f5ae12a5392feb1658863761f36b6b7569890",variant:"icon",class:"mr-1",id:"menu",icon_name:"menu_list",style:{"--icon-size":"1.65rem"}}),this.hasCloseButton&&e("ir-button",{key:"0087152641fda49c2fa911cb2fd699d368b90121",id:"close",variant:"icon",style:{"--icon-size":"1.65rem"},icon_name:"xmark",class:"ml-2",onClickHandler:t=>{t.stopPropagation();t.stopImmediatePropagation();this.closeSidebar.emit(null)}}))),e("ir-dialog",{key:"80d7a79a80f6838e885239f0a586e7b240a9e11a",onOpenChange:t=>{if(!t.detail){this.currentDialogStatus=null}},style:this.currentDialogStatus==="events-log"&&{"--ir-dialog-max-width":"400px"},ref:t=>this.dialogRef=t},this.renderDialogBody()))}};At.style=Nt;const Rt={channels:[],settlement_methods:[],statuses:[],types:[],token:"",rowCount:10,bookings:[],userSelection:{from:B().add(-7,"days").format("YYYY-MM-DD"),to:B().format("YYYY-MM-DD"),channel:"",property_id:null,start_row:0,end_row:20,total_count:0,filter_type:null,name:"",book_nbr:"",booking_status:"",affiliate_id:0,is_mpo_managed:false,is_mpo_used:false,is_for_mobile:false,is_combined_view:false,is_to_export:false},download_url:null};const{state:Pt,onChange:Ht}=N(Rt);function Gt(){Pt.userSelection=Object.assign(Object.assign({},Pt.userSelection),{channel:"",booking_status:Pt.statuses[0].code,filter_type:Pt.types[0].id,book_nbr:"",name:"",from:B().add(-7,"days").format("YYYY-MM-DD"),to:B().format("YYYY-MM-DD"),start_row:0,end_row:Pt.rowCount})}function Kt(t,e){Pt.userSelection=Object.assign(Object.assign({},Pt.userSelection),{[t]:e})}class Ft{async getExposedBookingsCriteria(t){const{data:e}=await E.post(`/Get_Exposed_Bookings_Criteria`,{property_id:t});const i=e.My_Result;Pt.channels=i.channels;Pt.settlement_methods=i.settlement_methods;Pt.statuses=i.statuses;Pt.types=i.types;Gt()}async getExposedBookings(t){const{data:e}=await E.post(`/Get_Exposed_Bookings`,Object.assign(Object.assign({},t),{extras:x}));const i=e.My_Result;const s=e.My_Params_Get_Exposed_Bookings;Pt.bookings=[...i];Pt.userSelection=Object.assign(Object.assign({},Pt.userSelection),{total_count:s.total_count});Pt.download_url=s.exported_data_url}async removeExposedBooking(t,e){await E.post(`/Remove_Exposed_Booking`,{booking_nbr:t,is_to_revover:e})}}const Vt=".sc-ir-booking-listing-h{display:block;height:100%}.logo.sc-ir-booking-listing{height:2rem;width:2rem}.card.sc-ir-booking-listing{overflow-x:auto}.secondary-p.sc-ir-booking-listing{font-size:12px !important}.room-service.sc-ir-booking-listing{display:flex;align-items:center;justify-content:space-between;gap:0.5rem;width:100%;padding:0.25rem 0}.room-name-container.sc-ir-booking-listing{background:#acecff;padding:0.1rem 0.3rem;border-radius:5px}.h-screen.sc-ir-booking-listing{height:100%}.price-span.sc-ir-booking-listing{margin:0;margin-right:5px}.main-container.sc-ir-booking-listing{height:100%;overflow-y:auto}.badge.ct_ir_badge.sc-ir-booking-listing{padding:0.2rem 0.3rem}.yellow_dot.sc-ir-booking-listing{height:0.5rem;width:0.5rem;height:0.5rem;width:0.8rem;border-radius:50%;background:rgb(244, 213, 82);margin-left:0.5rem;display:inline-flex;padding:0;margin:0}.booking_name.sc-ir-booking-listing{display:flex;align-items:center;gap:0.4rem}.bg-ir-red.sc-ir-booking-listing{background:#ff4961;padding:0.2rem 0.3rem}.due-btn.sc-ir-booking-listing{border:1px solid #ff4961;color:#ff4961;cursor:pointer;padding:1px 0.25rem !important;font-size:12px !important}.due-btn.sc-ir-booking-listing:hover{background:#ff4961;color:white}.booking_number.sc-ir-booking-listing{all:unset;cursor:pointer}.booking_number.sc-ir-booking-listing:hover{color:#1e9ff2}.in-out.sc-ir-booking-listing{width:150px !important}.buttons-container.sc-ir-booking-listing{gap:10px}td.sc-ir-booking-listing ul.sc-ir-booking-listing{width:max-content !important}td.sc-ir-booking-listing{width:max-content !important}.date-p.sc-ir-booking-listing{width:max-content !important;min-width:100%;text-align:center !important}.booking-label-gap.sc-ir-booking-listing{gap:5px}@media (min-width: 1024px){.yellow_dot.sc-ir-booking-listing{height:0.5rem;width:0.5rem}}";const Ut=Vt;const Wt=class{constructor(e){t(this,e);this.bookingListingService=new Ft;this.roomService=new S;this.token=new j;this.statusColors={"001":"badge-warning","002":"badge-success","003":"badge-danger","004":"badge-danger"};this.language="";this.ticket="";this.propertyid=undefined;this.rowCount=10;this.p=undefined;this.isLoading=false;this.currentPage=1;this.totalPages=1;this.oldStartValue=0;this.editBookingItem=null;this.showCost=false}componentWillLoad(){Kt("end_row",this.rowCount);Pt.rowCount=this.rowCount;if(this.ticket!==""){Pt.token=this.ticket;this.token.setToken(this.ticket);this.initializeApp()}Ht("userSelection",(async t=>{const e=t.total_count;this.totalPages=Math.ceil(e/this.rowCount)}));Ht("bookings",(async t=>{this.showCost=t.some((t=>t.financial.gross_cost!==null&&t.financial.gross_cost>0))}))}ticketChanged(t,e){if(t===e){return}this.token.setToken(this.ticket);Pt.token=this.ticket;this.initializeApp()}async initializeApp(){try{this.isLoading=true;if(!this.propertyid&&!this.p){throw new Error("Property ID or username is required")}let t=this.propertyid;if(!t){const e=await this.roomService.getExposedProperty({id:0,aname:this.p,language:this.language,is_backend:true});t=e.My_Result.id}const e=[this.bookingListingService.getExposedBookingsCriteria(t),this.roomService.fetchLanguage(this.language,["_BOOKING_LIST_FRONT"])];if(this.propertyid){e.unshift(this.roomService.getExposedProperty({id:this.propertyid,language:this.language,is_backend:true}))}await Promise.all(e);Kt("property_id",t);await this.bookingListingService.getExposedBookings(Object.assign(Object.assign({},Pt.userSelection),{is_to_export:false}))}catch(t){console.error(t)}finally{this.isLoading=false}}handleSideBarToggle(t){if(t.detail){this.editBookingItem=null}}getPaginationBounds(){const t=Pt.userSelection.total_count;const e=(this.currentPage-1)*this.rowCount;let i=this.currentPage*this.rowCount;i=i>t?t:i;return{startItem:e,endItem:i,totalCount:t}}openModal(){this.listingModalTimeout=setTimeout((()=>{this.listingModal=this.el.querySelector("ir-listing-modal");this.listingModal.editBooking=this.editBookingItem;this.listingModal.openModal()}),100)}disconnectedCallback(){clearTimeout(this.listingModalTimeout)}async handleResetData(t){t.stopImmediatePropagation();t.stopPropagation();await this.bookingListingService.getExposedBookings(Object.assign(Object.assign({},Pt.userSelection),{is_to_export:false}))}async handleResetStoreData(t){t.stopImmediatePropagation();t.stopPropagation();await this.bookingListingService.getExposedBookings(Object.assign(Object.assign({},Pt.userSelection),{is_to_export:false}))}handleBookingChanged(t){t.stopImmediatePropagation();t.stopPropagation();Pt.bookings=[...Pt.bookings.map((e=>{if(e.booking_nbr===t.detail.booking_nbr){return t.detail}return e}))]}renderItemRange(){const{endItem:t,startItem:e,totalCount:i}=this.getPaginationBounds();return`${g.entries.Lcz_View} ${e+1} - ${t} ${g.entries.Lcz_Of} ${i}`}async updateData(){const{endItem:t,startItem:e}=this.getPaginationBounds();await this.bookingListingService.getExposedBookings(Object.assign(Object.assign({},Pt.userSelection),{is_to_export:false,start_row:e,end_row:t}))}render(){var t,s,n,a,o,r,l,c,d,h,f,b,p,m,y,x,w,_,D,C;if(this.isLoading||this.ticket===""){return e("ir-loading-screen",null)}return e(i,null,e("ir-interceptor",null),e("ir-toast",null),e("div",{class:"p-1 main-container"},e("ir-listing-header",{propertyId:this.propertyid,p:this.p,language:this.language}),e("section",null,e("div",{class:"card p-1 flex-fill m-0 mt-2"},e("table",{class:"table table-striped table-bordered no-footer dataTable"},e("thead",null,e("tr",null,e("th",{scope:"col",class:"text-left"},(t=g.entries)===null||t===void 0?void 0:t.Lcz_Booking,"#"),e("th",{scope:"col"},(s=g.entries)===null||s===void 0?void 0:s.Lcz_BookedOn),e("th",{scope:"col"},(n=g.entries)===null||n===void 0?void 0:n.Lcz_GuestSource),e("th",{scope:"col",class:"text-left services-cell"},(a=g.entries)===null||a===void 0?void 0:a.Lcz_Services),e("th",{scope:"col",class:"in-out"},(o=g.entries)===null||o===void 0?void 0:o.Lcz_Dates),e("th",{scope:"col"},e("span",{class:"price-span"},(r=g.entries)===null||r===void 0?void 0:r.Lcz_Amount),e("ir-tooltip",{customSlot:true,message:`<span style="width:100%;display:block;">${(l=g.entries)===null||l===void 0?void 0:l.Lcz_BookingBalance}</span><span>${(c=g.entries)===null||c===void 0?void 0:c.Lcz_ClickToSettle}</span>`},e("span",{slot:"tooltip-trigger",class:"m-0 btn due-btn"},(d=g.entries)===null||d===void 0?void 0:d.Lcz_Balance))),this.showCost&&e("th",{scope:"col",class:"services-cell"},(h=g.entries)===null||h===void 0?void 0:h.Lcz_Cost),e("th",{scope:"col"},(f=g.entries)===null||f===void 0?void 0:f.Lcz_Status),e("th",{scope:"col"},e("p",{class:"sr-only"},"actions")))),e("tbody",{class:""},Pt.bookings.length===0&&e("tr",null,e("td",{colSpan:8},(b=g.entries)===null||b===void 0?void 0:b.Lcz_NoDataAvailable)),(p=Pt.bookings)===null||p===void 0?void 0:p.map((t=>{var i,s,n;let a=this.statusColors[t.status.code];return e("tr",{key:t.booking_nbr},e("td",{class:"text-left"},e("button",{onClick:()=>this.editBookingItem={booking:t,cause:"edit"},class:"booking_number"},t.booking_nbr)),e("td",null,e("p",{class:"p-0 m-0 date-p"},B(t.booked_on.date,"YYYY-MM-DD").format("DD-MMM-YYYY")),e("p",{class:"p-0 m-0 secondary-p"},A(t.booked_on.hour.toString(),t.booked_on.minute.toString()))),e("td",null,e("div",{class:"h-100 d-flex align-items-center ",style:{width:"max-content"}},e("img",{class:"mr-2 logo",src:t.origin.Icon,alt:t.origin.Label}),e("div",{class:"text-left"},e("div",{class:"d-flex align-items-center"},t.guest.nbr_confirmed_bookings>1&&!t.agent&&e("div",{class:"m-0 p-0"},e("ir-tooltip",{message:`${g.entries.Lcz_BookingsNbr}`.replace("%1",t.guest.nbr_confirmed_bookings.toString()),customSlot:true},e("div",{class:"d-flex align-items-center my-0 p-0",slot:"tooltip-trigger",style:{marginRight:"0.5rem"}},e("ir-icons",{style:{"--icon-size":"0.875rem"},color:"#FB0AAD",name:"heart-fill"})))),e("div",{class:"booking_name m-0 p-0"},e("button",{class:"booking_number p-0 m-0 ",onClick:()=>{this.editBookingItem={booking:t,cause:"guest"}}},t.guest.first_name," ",(i=t.guest.last_name)!==null&&i!==void 0?i:""),e("span",{class:"p-0 m-0"},t.occupancy.adult_nbr,g.entries.Lcz_P),u(t.extras)&&e("span",{class:"yellow_dot"}))),e("div",{class:"d-flex align-items-center booking-label-gap"},e("p",{class:"p-0 m-0 secondary-p"},t.origin.Label),t.is_in_loyalty_mode&&!t.promo_key&&e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",height:18,width:18},e("title",null,g.entries.Lcz_LoyaltyDiscountApplied),e("path",{fill:"#fc6c85",d:"M225.8 468.2l-2.5-2.3L48.1 303.2C17.4 274.7 0 234.7 0 192.8v-3.3c0-70.4 50-130.8 119.2-144C158.6 37.9 198.9 47 231 69.6c9 6.4 17.4 13.8 25 22.3c4.2-4.8 8.7-9.2 13.5-13.3c3.7-3.2 7.5-6.2 11.5-9c0 0 0 0 0 0C313.1 47 353.4 37.9 392.8 45.4C462 58.6 512 119.1 512 189.5v3.3c0 41.9-17.4 81.9-48.1 110.4L288.7 465.9l-2.5 2.3c-8.2 7.6-19 11.9-30.2 11.9s-22-4.2-30.2-11.9zM239.1 145c-.4-.3-.7-.7-1-1.1l-17.8-20c0 0-.1-.1-.1-.1c0 0 0 0 0 0c-23.1-25.9-58-37.7-92-31.2C81.6 101.5 48 142.1 48 189.5v3.3c0 28.5 11.9 55.8 32.8 75.2L256 430.7 431.2 268c20.9-19.4 32.8-46.7 32.8-75.2v-3.3c0-47.3-33.6-88-80.1-96.9c-34-6.5-69 5.4-92 31.2c0 0 0 0-.1 .1s0 0-.1 .1l-17.8 20c-.3 .4-.7 .7-1 1.1c-4.5 4.5-10.6 7-16.9 7s-12.4-2.5-16.9-7z"})),t.promo_key&&e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",height:18,width:18},e("title",null,g.entries.Lcz_Coupon+":"+t.promo_key),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 0 1 0 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 0 1 0-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375Z"})))))),e("td",null,e("ul",null,t.rooms.map((t=>{var i,s,n,a,o,r,l;return e("li",null,e("div",{class:"room-service"},e("p",{class:"m-0 p-0"},t.roomtype.name),t.unit&&!v(t.roomtype.id)&&(((s=(i=t.unit)===null||i===void 0?void 0:i.name)===null||s===void 0?void 0:s.length)>4?e("ir-tooltip",{customSlot:true,message:(n=t.unit)===null||n===void 0?void 0:n.name},e("p",{class:"room-name-container cursor-pointer m-0",slot:"tooltip-trigger"},(o=(a=t.unit)===null||a===void 0?void 0:a.name)===null||o===void 0?void 0:o.substring(0,4))):e("p",{class:"room-name-container  m-0"},(l=(r=t.unit)===null||r===void 0?void 0:r.name)===null||l===void 0?void 0:l.substring(0,4)))))})),t.extra_services&&e("li",null,g.entries.Lcz_ExtraServices))),e("td",null,e("p",{class:"p-0 m-0 date-p"},B(t.from_date,"YYYY-MM-DD").format("DD-MMM-YYYY")),e("p",{class:"p-0 m-0 date-p"},B(t.to_date,"YYYY-MM-DD").format("DD-MMM-YYYY"))),e("td",null,e("p",{class:"p-0 m-0"},k(t.currency.symbol,(n=(s=t.financial)===null||s===void 0?void 0:s.gross_total)!==null&&n!==void 0?n:0)),t.financial.due_amount>0&&e("buuton",{onClick:()=>{this.editBookingItem={booking:t,cause:"payment"};this.openModal()},class:"btn p-0 m-0 due-btn"},k(t.currency.symbol,t.financial.due_amount))),this.showCost&&e("td",null,t.financial.gross_cost!==null&&t.financial.gross_cost===0?"_":k(t.currency.symbol,t.financial.gross_cost)),e("td",null,e("p",{class:`m-0 badge ${a} ct_ir_badge`},t.status.description)),e("td",null,e("div",{class:"d-flex justify-content-center align-items-center",style:{gap:"8px"}},e("ir-button",{title:"Edit booking",variant:"icon",icon_name:"edit",onClickHandler:()=>this.editBookingItem={booking:t,cause:"edit"}}),e("ir-button",{title:"Delete booking",style:{"--icon-button-color":"#ff4961","--icon-button-hover-color":"#FF1635"},variant:"icon",icon_name:"trash",onClickHandler:()=>{this.editBookingItem={booking:t,cause:"delete"};this.openModal()}}))))})))),this.totalPages>1&&e("section",{class:"d-flex flex-column flex-md-row align-items-center justify-content-between pagination-container"},e("p",{class:"m-0 mb-1 mb-md-0"},this.renderItemRange()),e("div",{class:"d-flex align-items-center buttons-container"},e("ir-button",{size:"sm",btn_disabled:this.currentPage===1,onClickHandler:async()=>{this.currentPage=1;await this.updateData()},icon_name:"angles_left",style:{"--icon-size":"0.875rem"}}),e("ir-button",{size:"sm",btn_disabled:this.currentPage===1,onClickHandler:async()=>{this.currentPage=this.currentPage-1;await this.updateData()},icon_name:"angle_left",style:{"--icon-size":"0.875rem"}}),e("ir-select",{selectedValue:this.currentPage.toString(),LabelAvailable:false,showFirstOption:false,onSelectChange:async t=>{this.currentPage=+t.detail;await this.updateData()},data:Array.from(Array(this.totalPages),((t,e)=>e+1)).map((t=>({text:t.toString(),value:t.toString()})))}),e("ir-button",{size:"sm",btn_disabled:this.currentPage===this.totalPages,onClickHandler:async()=>{this.currentPage=this.currentPage+1;await this.updateData()},icon_name:"angle_right",style:{"--icon-size":"0.875rem"}}),e("ir-button",{size:"sm",btn_disabled:this.currentPage===this.totalPages,onClickHandler:async()=>{this.currentPage=this.totalPages;console.log(this.currentPage);await this.updateData()},icon_name:"angles_right",style:{"--icon-size":"0.875rem"}})))))),this.editBookingItem&&e("ir-listing-modal",{onModalClosed:()=>this.editBookingItem=null}),e("ir-sidebar",{onIrSidebarToggle:this.handleSideBarToggle.bind(this),open:this.editBookingItem!==null&&["edit","guest"].includes(this.editBookingItem.cause),showCloseButton:false,sidebarStyles:((m=this.editBookingItem)===null||m===void 0?void 0:m.cause)==="guest"?{background:"white"}:{width:this.editBookingItem?"80rem":"var(--sidebar-width,40rem)",background:"#F2F3F8"}},((y=this.editBookingItem)===null||y===void 0?void 0:y.cause)==="edit"&&e("ir-booking-details",{slot:"sidebar-body",p:this.p,hasPrint:true,hasReceipt:true,is_from_front_desk:true,propertyid:this.propertyid,hasRoomEdit:true,hasRoomDelete:true,hasCloseButton:true,onCloseSidebar:()=>this.editBookingItem=null,bookingNumber:this.editBookingItem.booking.booking_nbr,ticket:this.ticket,language:this.language,hasRoomAdd:true}),((x=this.editBookingItem)===null||x===void 0?void 0:x.cause)==="guest"&&e("ir-guest-info",{slot:"sidebar-body",headerShown:true,booking_nbr:(_=(w=this.editBookingItem)===null||w===void 0?void 0:w.booking)===null||_===void 0?void 0:_.booking_nbr,email:(C=(D=this.editBookingItem)===null||D===void 0?void 0:D.booking)===null||C===void 0?void 0:C.guest.email,language:this.language,onCloseSideBar:()=>this.editBookingItem=null})))}get el(){return a(this)}static get watchers(){return{ticket:["ticketChanged"]}}};Wt.style=Ut;const qt=".sc-ir-button-h{--icon-button-color:#6b6f82;--icon-button-hover-color:#104064}.button-icon.sc-ir-button{padding:0;margin-top:0}.button-icon[data-state='loading'].sc-ir-button{display:none}.button-text.sc-ir-button{padding:0 5px}.bounce-3.sc-ir-button{animation:bounce 1s 1}.ir-button-class.sc-ir-button{display:inline-flex !important;justify-content:center;align-items:center;box-sizing:border-box}.btn-outline.sc-ir-button{background:transparent;border:1px solid #104064;color:#104064}.btn-outline.sc-ir-button:hover,.btn-outline.sc-ir-button:active{background:#104064;color:white}.icon-button.sc-ir-button{all:unset;box-sizing:border-box;border-radius:0.25rem;display:inline-flex;align-items:center;justify-content:center;color:var(--icon-button-color);padding:0.2rem;transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.icon-button.sc-ir-button:hover{color:var(--icon-button-hover-color)}.icon-button.sc-ir-button:hover.hovered_bg{background:var('--ir-icon-bg-hover', #f6f6f6)}.icon-button.sc-ir-button:disabled{pointer-events:none}.icon-loader.sc-ir-button{margin:0;padding:0;width:var(--icon-size, 1.25rem);height:var(--icon-size, 1.25rem);border-radius:50%;background:radial-gradient(farthest-side, var(--icon-button-color) 94%, #0000) top/2px 2px no-repeat, conic-gradient(#0000 30%, var(--icon-button-color));-webkit-mask:radial-gradient(farthest-side, #0000 calc(100% - 2px), var(--icon-button-color) 0);mask:radial-gradient(farthest-side, #0000 calc(100% - 2px), var(--icon-button-color) 0);animation:l13 1s infinite linear}.btn_loader.sc-ir-button{width:15px;height:10px;--c:no-repeat linear-gradient(#ffffff 0 0);background:var(--c) 0% 50%, var(--c) 50% 50%, var(--c) 100% 50%;background-size:20% 100%;animation:l1 1s infinite linear}@keyframes l13{100%{transform:rotate(1turn)}}@keyframes l1{0%{background-size:20% 100%, 20% 100%, 20% 100%}33%{background-size:20% 10%, 20% 100%, 20% 100%}50%{background-size:20% 100%, 20% 10%, 20% 100%}66%{background-size:20% 100%, 20% 100%, 20% 10%}100%{background-size:20% 100%, 20% 100%, 20% 100%}}@keyframes bounce{0%,100%{transform:scale(1);animation-timing-function:cubic-bezier(0.8, 0, 1, 1)}50%{transform:scale(1.2);animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}}@keyframes ping{75%,100%{transform:scale(1.2)}}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const Jt=qt;const Xt=class{constructor(e){t(this,e);this.clickHandler=s(this,"clickHandler",7);this.name=undefined;this.text=undefined;this.icon="ft-save";this.btn_color="primary";this.size="md";this.textSize="md";this.btn_block=true;this.btn_disabled=false;this.btn_type="button";this.isLoading=false;this.btn_styles=undefined;this.btn_id=M();this.variant="default";this.icon_name=undefined;this.visibleBackgroundOnHover=false;this.iconPostion="left";this.icon_style=undefined}handleButtonAnimation(t){if(!this.buttonEl||t.detail!==this.btn_id){return}t.stopImmediatePropagation();t.stopPropagation();this.buttonEl.classList.remove("bounce-3");this.buttonEl.classList.add("bounce-3")}render(){if(this.variant==="icon"){return e("button",{id:this.btn_id,class:`icon-button ${this.btn_styles} ${this.visibleBackgroundOnHover?"hovered_bg":""}`,ref:t=>this.buttonEl=t,onClick:()=>this.clickHandler.emit(),type:this.btn_type,disabled:this.btn_disabled},this.isLoading?e("span",{class:"icon-loader"}):e("ir-icons",{class:"m-0 p-0",name:this.icon_name}))}let t=this.btn_block?"btn-block":"";return e("button",{id:this.btn_id,ref:t=>this.buttonEl=t,onClick:()=>this.clickHandler.emit(),class:`btn btn-${this.btn_color} ${this.btn_styles} ir-button-class  btn-${this.size} text-${this.textSize} ${t}`,type:this.btn_type,disabled:this.btn_disabled||this.isLoading},this.icon_name&&this.iconPostion==="left"&&e("ir-icons",{name:this.icon_name,style:this.icon_style}),this.text&&e("span",{class:"button-text m-0"},this.text),this.isLoading?e("div",{class:"btn_loader m-0 p-0"}):this.iconPostion==="right"&&e("ir-icons",{style:this.icon_style,name:this.icon_name}))}};Xt.style=Jt;const Zt=".sc-ir-combobox-h{display:block;position:relative;padding:0;margin:0}ul.sc-ir-combobox{position:absolute;margin:0;margin-top:2px;width:max-content;max-height:80px;border-radius:0.21rem;z-index:10000;padding:1px;background:white;box-shadow:0px 8px 16px 0px rgba(0, 0, 0, 0.2);padding:5px 0;max-height:250px;overflow-y:auto;min-width:100%}ul[data-position='bottom-right'].sc-ir-combobox{right:0}.list-item-image.sc-ir-combobox{height:1rem;aspect-ratio:4/3;border-radius:4px;margin-right:10px}.dropdown-item.sc-ir-combobox{cursor:pointer}ul.sc-ir-combobox li.sc-ir-combobox,span.sc-ir-combobox,loader-container.sc-ir-combobox{padding:0px 16px;margin:0px;margin-top:2px;width:100%;border-radius:2px}ul.sc-ir-combobox li.sc-ir-combobox{cursor:pointer}ul.sc-ir-combobox li.sc-ir-combobox{display:flex;align-items:center;flex-wrap:wrap;gap:3px}ul.sc-ir-combobox li.sc-ir-combobox p.sc-ir-combobox{margin:0;padding:0}ul.sc-ir-combobox li.sc-ir-combobox:hover{background:#f4f5fa}ul.sc-ir-combobox li[data-selected].sc-ir-combobox,ul.sc-ir-combobox li[data-selected].sc-ir-combobox:hover{color:#fff;text-decoration:none;background-color:#666ee8}";const Qt=Zt;const te=class{constructor(e){t(this,e);this.comboboxValueChange=s(this,"comboboxValueChange",7);this.inputCleared=s(this,"inputCleared",7);this.toast=s(this,"toast",7);this.data=[];this.duration=300;this.placeholder=undefined;this.value=undefined;this.disabled=false;this.autoFocus=false;this.input_id=M();this.selectedIndex=-1;this.actualIndex=-1;this.isComboBoxVisible=false;this.isLoading=true;this.isItemSelected=undefined;this.inputValue="";this.filteredData=[];this.componentShouldAutoFocus=false}componentWillLoad(){this.filteredData=this.data}componentDidLoad(){if(this.autoFocus){this.focusInput()}}watchHandler(t,e){if(t!==e&&t===true){this.focusInput()}}handleKeyDown(t){var e;const i=this.filteredData.length;if(i>0){switch(t.key){case"ArrowUp":t.preventDefault();this.selectedIndex=(this.selectedIndex-1+i)%i;this.adjustScrollPosition();break;case"ArrowDown":t.preventDefault();this.selectedIndex=(this.selectedIndex+1)%i;this.adjustScrollPosition();break;case"Escape":(e=this.inputRef)===null||e===void 0?void 0:e.blur();this.isComboBoxVisible=false;break}}}focusInput(){requestAnimationFrame((()=>{var t;(t=this.inputRef)===null||t===void 0?void 0:t.focus()}))}adjustScrollPosition(){var t;const e=(t=this.el)===null||t===void 0?void 0:t.querySelector(`[data-selected]`);if(!e)return;e.scrollIntoView({block:"center"})}selectItem(t){if(this.filteredData[t]){this.isItemSelected=true;this.comboboxValueChange.emit({key:"select",data:this.filteredData[t].id});this.inputValue="";this.resetCombobox();if(this.autoFocus){this.focusInput()}}}debounceFetchData(){clearTimeout(this.debounceTimer);this.debounceTimer=setTimeout((()=>{this.fetchData()}),this.duration)}handleFocus(){this.isComboBoxVisible=true}clearInput(){this.inputValue="";this.resetCombobox();this.inputCleared.emit(null)}resetCombobox(t=true){var e;if(t){(e=this.inputRef)===null||e===void 0?void 0:e.blur()}this.selectedIndex=-1;this.isComboBoxVisible=false}async fetchData(){try{this.isLoading=true;this.filteredData=this.data.filter((t=>t.name.toLowerCase().startsWith(this.inputValue)));this.selectedIndex=-1}catch(t){console.log("error",t)}finally{this.isLoading=false}}handleInputChange(t){this.inputValue=t.target.value;if(this.inputValue){this.debounceFetchData()}else{this.filteredData=this.data}}handleDocumentClick(t){const e=t.target;if(!this.el.contains(e)){this.isComboBoxVisible=false}}handleBlur(){this.blurTimout=setTimeout((()=>{if(!this.isItemSelected){this.inputValue="";this.resetCombobox()}else{this.isItemSelected=false}}),300)}isDropdownItem(t){return t&&t.closest(".combobox")}disconnectedCallback(){var t,e,i,s;clearTimeout(this.debounceTimer);clearTimeout(this.blurTimout);(t=this.inputRef)===null||t===void 0?void 0:t.removeEventListener("blur",this.handleBlur);(e=this.inputRef)===null||e===void 0?void 0:e.removeEventListener("click",this.selectItem);(i=this.inputRef)===null||i===void 0?void 0:i.removeEventListener("keydown",this.handleKeyDown);(s=this.inputRef)===null||s===void 0?void 0:s.removeEventListener("focus",this.handleFocus)}handleItemKeyDown(t,e){var i;if(t.key==="Enter"||t.key===" "||t.key==="ArrowRight"){this.selectItem(e);t.preventDefault()}else if(t.key==="Escape"){this.isComboBoxVisible=false;(i=this.inputRef)===null||i===void 0?void 0:i.blur();t.preventDefault()}}renderDropdown(){var t;if(!this.isComboBoxVisible){return null}return e("ul",{"data-position":this.filteredData.length>0&&this.filteredData[0].occupancy?"bottom-right":"bottom-left"},(t=this.filteredData)===null||t===void 0?void 0:t.map(((t,i)=>e("li",{onMouseEnter:()=>this.selectedIndex=i,role:"button",key:t.id,onKeyDown:t=>this.handleItemKeyDown(t,i),"data-selected":this.selectedIndex===i,tabIndex:0,onClick:()=>this.selectItem(i)},t.image&&e("img",{src:t.image,class:"list-item-image"}),e("p",null,t.name),t.occupancy&&e(n,null,e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},e("path",{fill:"currentColor",d:"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"})),e("p",null,t.occupancy))))),this.filteredData.length===0&&!this.isLoading&&e("span",{class:"text-center"},g.entries.Lcz_NoResultsFound))}handleSubmit(t){t.preventDefault();t.stopPropagation();console.log("object");if(!this.filteredData.length){return}this.selectItem(this.selectedIndex===-1?0:this.selectedIndex)}render(){return e("form",{key:"957d7f92dbdb85ef0135671f4c7c6316025f0a29",onSubmit:this.handleSubmit.bind(this),class:"m-0 p-0"},e("input",{key:"c3196f75dfdc023503853c2b7e231ebaa511d13a",type:"text",class:"form-control bg-white",id:this.input_id,ref:t=>this.inputRef=t,disabled:this.disabled,value:this.value,placeholder:this.placeholder,onKeyDown:this.handleKeyDown.bind(this),onBlur:this.handleBlur.bind(this),onInput:this.handleInputChange.bind(this),onFocus:this.handleFocus.bind(this),autoFocus:this.autoFocus}),this.renderDropdown())}get el(){return a(this)}static get watchers(){return{isComboBoxVisible:["watchHandler"]}}};te.style=Qt;const ee=[{isCSS:true,link:"https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i%7CQuicksand:300,400,500,700"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/bootstrap.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/bootstrap-extended.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/colors.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/core/menu/menu-types/horizontal-menu.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/core/colors/palette-gradient.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/components.css"},{isCSS:true,link:"https://x.igloorooms.com/assets/css/style.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/icheck.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/custom.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/pages/login-register.css"}];const ie=class{constructor(e){t(this,e);this.extraResources="";this.resources=ee}componentWillLoad(){this.parseRefs()}componentDidLoad(){this.initializeStyles()}hrefsChanged(){this.parseRefs();this.initializeStyles()}parseRefs(){if(this.extraResources!=="")this.resources.push(JSON.parse(this.extraResources))}appendTag(t,e){const i=document.createElement(t);const s=[];Object.keys(e).forEach((t=>{i.setAttribute(t,e[t]);s.push(`[${t}="${e[t]}"]`)}));const n=`${t}${s.join("")}`;const a=document.querySelector(n);if(!a){document.head.appendChild(i)}}initializeStyles(){this.resources.forEach((t=>{if(t.isCSS){this.appendTag("link",{href:t.link,rel:"stylesheet",type:"text/css"})}if(t.isJS){this.appendTag("script",{src:t.link})}}))}render(){return e(i,{key:"bac823826af9d855bdfb19d0322da7aab5d9ba30"},e("slot",{key:"5bb44fd84aec2ac353d4b265502f043ba6061821"}))}static get watchers(){return{extraResources:["hrefsChanged"]}}};const se="input.sc-ir-date-picker{all:unset;box-sizing:border-box !important;padding:0;margin:0;width:100%;text-align:center}input.sc-ir-date-picker:disabled{text-align:start;font-size:14px;width:100%}.sc-ir-date-picker-h{position:relative;box-sizing:border-box}.icon.sc-ir-date-picker{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}";const ne=se;const ae=class{constructor(e){t(this,e);this.dateChanged=s(this,"dateChanged",7);this.fromDate=undefined;this.toDate=undefined;this.date=undefined;this.opens=undefined;this.autoApply=undefined;this.firstDay=1;this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];this.daysOfWeek=["Su","Mo","Tu","We","Th","Fr","Sa"];this.format="MMM DD, YYYY";this.separator=" - ";this.applyLabel="Apply";this.cancelLabel="Cancel";this.fromLabel="Form";this.toLabel="To";this.customRangeLabel="Custom";this.weekLabel="W";this.disabled=false;this.singleDatePicker=false;this.minDate=undefined;this.maxDate=undefined;this.maxSpan={days:240}}handleMinDateChange(){$(this.dateRangeInput).data("daterangepicker").remove();this.initializeDateRangePicker()}datePropChanged(){this.updateDateRangePickerDates()}async openDatePicker(){this.openDatePickerTimeout=setTimeout((()=>{this.dateRangeInput.click()}),20)}updateDateRangePickerDates(){const t=$(this.dateRangeInput).data("daterangepicker");if(!t){console.error("Date range picker not initialized.");return}if(this.singleDatePicker){const e=this.date?B(this.date):B();t.setStartDate(e);t.setEndDate(e)}else{const e=this.fromDate?B(this.fromDate):B();const i=this.toDate?B(this.toDate):e.clone().add(1,"days");t.setStartDate(e);t.setEndDate(i)}}componentWillLoad(){if(!document.getElementById("ir-daterangepicker-style")){const t=document.createElement("style");t.id="ir-daterangepicker-style";t.textContent=`\n        .daterangepicker {\n          margin-top: 14px;\n        }\n      `;document.head.appendChild(t)}}componentDidLoad(){this.dateRangeInput=this.element.querySelector(".date-range-input");this.initializeDateRangePicker();this.updateDateRangePickerDates()}initializeDateRangePicker(){$(this.dateRangeInput).daterangepicker({singleDatePicker:this.singleDatePicker,opens:this.opens,startDate:B(this.fromDate),endDate:B(this.toDate),minDate:B(this.minDate||B(new Date).format("YYYY-MM-DD")),maxDate:this.maxDate?B(this.maxDate):undefined,maxSpan:this.maxSpan,autoApply:this.autoApply,locale:{format:this.format,separator:this.separator,applyLabel:this.applyLabel,cancelLabel:this.cancelLabel,fromLabel:this.fromLabel,toLabel:this.toLabel,customRangeLabel:this.customRangeLabel,weekLabel:this.weekLabel,daysOfWeek:this.daysOfWeek,monthNames:this.monthNames,firstDay:this.firstDay}},((t,e)=>{this.dateChanged.emit({start:t,end:e})}))}disconnectedCallback(){if(this.openDatePickerTimeout){clearTimeout(this.openDatePickerTimeout)}$(this.dateRangeInput).data("daterangepicker").remove()}render(){return e(i,{key:"a2522a6938b9c8b97cff8aa93ac7a743124a1bbf"},e("input",{key:"5d96397aa2676c857011b1d78fd1ba5c060e02b0",class:"date-range-input",type:"text",disabled:this.disabled}))}get element(){return a(this)}static get watchers(){return{minDate:["handleMinDateChange"],date:["datePropChanged"]}}};ae.style=ne;const oe=".sc-ir-date-view-h{display:block;font-size:13.65px !important;width:100%}.mx-01.sc-ir-date-view{--m:5px;margin-right:var(--m) !important;margin-left:var(--m) !important}";const re=oe;const le=class{constructor(e){t(this,e);this.from_date=undefined;this.to_date=undefined;this.showDateDifference=true;this.dateOption="YYYY-MM-DD";this.dates=undefined}componentWillLoad(){this.initializeDates()}handleFromDateChange(t,e){if(t!==e){this.initializeDates()}}handleToDateChange(t,e){if(t!==e){this.initializeDates()}}initializeDates(){this.convertDate("from_date",this.from_date);this.convertDate("to_date",this.to_date);const t=B(this.dates.from_date,"MMM DD, YYYY").format("YYYY-MM-DD");const e=B(this.dates.to_date,"MMM DD, YYYY").format("YYYY-MM-DD");this.dates.date_diffrence=c(t,e)}convertDate(t,e){this.dates=this.dates||{from_date:"",to_date:"",date_diffrence:0};if(!e){return}if(typeof e==="string"){this.dates[t]=B(e,this.dateOption).format("MMM DD, YYYY")}else if(e instanceof Date){this.dates[t]=B(e).format("MMM DD, YYYY")}else if(B.isMoment(e)){this.dates[t]=e.format("MMM DD, YYYY")}else{console.error("Unsupported date type")}}render(){return e(i,{key:"bad56961c0ecbfe1a992f1bbe1954b4ac7bf8a3e",class:"d-flex align-items-center"},e("span",{key:"b2df47d248883b1f1b3e045527d9056c115c4055"},this.dates.from_date)," ",e("svg",{key:"26e887407fa53d3663fa71eb88b9428ad74b10c1",xmlns:"http://www.w3.org/2000/svg",class:"mx-01",height:"14",width:"14",viewBox:"0 0 512 512"},e("path",{key:"d9152eb2b88bbdf704870ff6d4877ee013220993",fill:"currentColor",d:"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z"})),e("span",{key:"6b01a1bcefc231f89c10263b8ee2b53f8c7cec6b"},this.dates.to_date," ",this.showDateDifference&&e("span",{key:"2e88f72655522a200a1997c7d87b41391731e7a3",class:"mx-01"},this.dates.date_diffrence,"   ",this.dates.date_diffrence>1?` ${g.entries.Lcz_Nights}`:` ${g.entries.Lcz_Night}`)))}static get watchers(){return{from_date:["handleFromDateChange"],to_date:["handleToDateChange"]}}};le.style=re;const ce=":host{display:block;margin:0;padding:0;box-sizing:border-box}.backdrop{opacity:0;background:rgba(0, 0, 0, 0.2);position:fixed;inset:0;z-index:99999998}.backdrop[data-state='opened']{animation:overlayShow 150ms cubic-bezier(0.16, 1, 0.3, 1) forwards}.backdrop[data-state='closed']{opacity:0;pointer-events:none}.modal-container{box-sizing:border-box;margin:0;box-shadow:hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px;position:fixed;z-index:99999999;overflow-y:auto;top:50%;left:50%;background:white;transform:translate(-50%, -50%);width:90%;min-height:fit-content;height:fit-content;max-width:var(--ir-dialog-max-width, 40rem);max-height:85vh;border-radius:8px;padding:0;animation:contentShow 300ms cubic-bezier(0.16, 1, 0.3, 1)}.modal-footer ::slotted(*){flex-direction:row;align-items:center;justify-content:end;gap:8px;--ir-btn-width:inherit}.modal-footer{--ir-btn-width:100%}.modal-title ::slotted(*){font-size:18px;font-weight:600;color:#101828;margin-bottom:8px}.modal-body ::slotted(*){font-size:14px;font-weight:400;color:#475467;padding:0;margin:0}@keyframes overlayShow{from{opacity:0}to{opacity:1}}@keyframes contentShow{from{opacity:0;transform:translate(-50%, -48%) scale(0.96)}to{opacity:1;transform:translate(-50%, -50%) scale(1)}}.dialog-close-button{position:absolute;top:15px;right:15px}";const de=ce;const he=class{constructor(e){t(this,e);this.openChange=s(this,"openChange",7);this.open=false;this.isOpen=false}componentWillLoad(){if(this.open){this.openModal()}}componentDidLoad(){this.prepareFocusTrap()}async openModal(){this.isOpen=true;document.body.style.overflow="hidden";setTimeout((()=>{this.prepareFocusTrap()}),10);this.openChange.emit(this.isOpen)}async closeModal(){console.log("close");if(!this.isOpen){return}document.body.style.overflow="visible";this.isOpen=false;this.openChange.emit(this.isOpen)}handleOpenChange(){if(this.open){this.openModal()}else{this.closeModal()}}prepareFocusTrap(){const t='button,ir-dropdown ,[href], input, select, textarea, [tabindex]:not([tabindex="-1"])';const e=this.el.shadowRoot.querySelectorAll(t);if(e.length===0)return;this.firstFocusableElement=e[0];this.lastFocusableElement=e[e.length-1];this.firstFocusableElement.focus()}handleKeyDown(t){if(!this.isOpen){return}let e=t.key==="Tab";if(t.key==="Escape"&&this.isOpen){this.closeModal()}if(!e){return}if(!t.shiftKey&&document.activeElement===this.lastFocusableElement){this.firstFocusableElement.focus();t.preventDefault()}if(t.shiftKey&&document.activeElement===this.firstFocusableElement){this.lastFocusableElement.focus();t.preventDefault()}}disconnectedCallback(){document.body.style.overflow="visible"}render(){return e(i,{key:"661889786e1ca6ce705eeba1d791a6af916d35e5"},e("div",{key:"335ca9c5410f6e5b29d382037b28f71a9ece52e5",class:"backdrop","data-state":this.isOpen?"opened":"closed",onClick:()=>this.closeModal()}),this.isOpen&&e("div",{key:"169c81ff4a9e3449fdd3807534cb5dcf7f8d678c",class:"modal-container",tabIndex:-1,role:"dialog","aria-labelledby":"dialog1Title","aria-describedby":"dialog1Desc"},e("ir-icon",{key:"4112cd9a6fdc58c7028a430831e1ccd3f146ef69",id:"close",class:"dialog-close-button",onIconClickHandler:()=>this.closeModal()},e("svg",{key:"2e2e141cfe5c4ed26689893353bda3eb85b1e5f4",slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",height:18,width:18},e("path",{key:"2b4c09e651e34361bdd6b287f638d622bea74723",fill:"#104064",class:"currentColor",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"}))),e("div",{key:"57ba52900856a965ba9e2c4601273ec66091390b",class:"modal-title",id:"dialog1Title"},e("slot",{key:"0185481dd7d0aef5d7a0b2ef3e984debed8c8e08",name:"modal-title"})),e("div",{key:"1e5c90699e26e03ca84531eeee4058d59628bc00",class:"modal-body",id:"dialog1Desc"},e("slot",{key:"fde33c40c20a8a265286fe20d5a06761d276b9ea",name:"modal-body"})),e("div",{key:"9822aafbd830177435f6d172aebc8caf4c911a71",class:"modal-footer"},e("slot",{key:"fb6ed36e90dab51fffee8fac2cc2714043200aeb",name:"modal-footer"}))))}get el(){return a(this)}static get watchers(){return{open:["handleOpenChange"]}}};he.style=de;const fe=".sc-ir-events-log-h{display:block}.beta.sc-ir-events-log{background:var(--red);color:white;padding:0.2rem 0.3rem;font-size:12px;border-radius:4px;margin:0}.event-row.sc-ir-events-log{padding-bottom:0.5rem}.list-title.sc-ir-events-log{margin:0;padding:0;font-size:14px;font-weight:bold;width:fit-content}.list-item.sc-ir-events-log{margin:0;padding:0;font-size:14px;margin-left:5px;width:fit-content}.list-item.green.sc-ir-events-log{color:#629a4c;font-weight:600}.list-item.red.sc-ir-events-log{color:#ff4961;font-weight:600}.dates-row.sc-ir-events-log{display:flex;align-items:center;gap:0.875rem}";const be=fe;const pe=class{constructor(e){t(this,e);this.bookingService=new l;this.bookingNumber=undefined;this.bookingEvents=undefined}componentWillLoad(){this.init()}async init(){try{this.bookingEvents=await this.bookingService.getExposedBookingEvents(this.bookingNumber)}catch(t){console.error(t)}}render(){var t;return e("div",{key:"d9a06f7fe92433d1a5bdea2cc85688f1bd122d24",class:"p-1"},e("div",{key:"ead554f8f918496043a96b8e58978fbe023e70b2",class:"d-flex  align-items-center",style:{gap:"0.5rem"}},e("h3",{key:"8eca420c0d4bfccb048cdce85a21454a06c65e77",class:" text-left p-0 m-0  dialog-title "},g.entries.Lcz_EventsLog),e("span",{key:"800966e0e692caf1348ecded315af65fe576ae51",class:"m-0 beta"},"Beta")),Y("/Get_Exposed_Booking_Events")?e("div",{class:"d-flex align-items-center justify-content-center dialog-container-height"},e("ir-spinner",null)):e(n,null,e("table",{class:" dialog-container-height"},e("thead",{style:{opacity:"0"}},e("tr",null,e("th",null,"date"),e("th",null,"user"),e("th",null,"status"))),e("tbody",null,(t=this.bookingEvents)===null||t===void 0?void 0:t.map((t=>e("tr",{key:t.id,class:"pb-1"},e("td",{class:"event-row dates-row"},e("span",null,t.date),e("span",null,String(t.hour).padStart(2,"0"),":",String(t.minute).padStart(2,"0"),":",String(t.second).padStart(2,"0"))),e("td",{class:"pl-3 event-row "},t.type),e("td",{class:"pl-1 event-row "},t.user))))))))}};pe.style=be;const ue=".sc-ir-extra-service-h{display:block}.extra-service-container.sc-ir-extra-service{display:flex;align-items:center;justify-content:space-between;gap:0.5rem}.extra-service-container.sc-ir-extra-service *.sc-ir-extra-service{padding:0;margin:0;box-sizing:border-box}.extra-service-actions.sc-ir-extra-service{display:flex;align-items:center;gap:0.5rem}.extra-service-conditional-date.sc-ir-extra-service{margin-top:0.5rem}";const me=ue;const ge=class{constructor(e){t(this,e);this.editExtraService=s(this,"editExtraService",7);this.resetBookingData=s(this,"resetBookingData",7);this.bookingService=new l;this.service=undefined;this.bookingNumber=undefined;this.currencySymbol=undefined}async deleteService(){try{await this.bookingService.doBookingExtraService({service:this.service,is_remove:true,booking_nbr:this.bookingNumber});this.resetBookingData.emit(null)}catch(t){console.log(t)}}render(){return e(i,{key:"46520f1758b75147b0dad767768c8aca7a05022f"},e("div",{key:"dfdf3fa59ee831a7c6fac7896b19934271a6bd56",class:"p-1"},e("div",{key:"5ecbe67bdcc1d56e9dbedcd8e8f83c3acb58dc44",class:"extra-service-container"},e("p",{key:"6a34416c31a489488f5df059206f1fc73efb44d6",class:"extra-service-description"},this.service.description),e("div",{key:"0e7e67ebfe04550a8514bede32bc1c08d5c17212",class:"extra-service-actions"},this.service.price&&e("p",{key:"668a0b06d29ad18c9bcc72222d5b1605de244e5a",class:"extra-service-price p-0 m-0 font-weight-bold"},k(this.currencySymbol,this.service.price)),e("ir-button",{key:"d82803f8f9b4071aa87dbfdf7c721ad26c0be1c6",id:`serviceEdit-${this.service.booking_system_id}`,class:"extra-service-edit-btn m-0 p-0",variant:"icon",icon_name:"edit",style:z.secondary,onClickHandler:()=>this.editExtraService.emit(this.service)}),e("ir-button",{key:"ed6ad635ce54992efcc4f1d39e4e4dc915633777",class:"extra-service-delete-btn m-0 p-0",variant:"icon",onClickHandler:()=>this.irModalRef.openModal(),id:`roomDelete-${this.service.booking_system_id}`,icon_name:"trash",style:z.danger}))),e("div",{key:"58d3cf3c4f90a7093bf3c5658ef35e8e02bf359d",class:"extra-service-conditional-date"},this.service.start_date&&this.service.end_date?e("ir-date-view",{class:"extra-service-date-view mr-1",from_date:this.service.start_date,to_date:this.service.end_date,showDateDifference:false}):this.service.start_date&&e("p",{class:"extra-service-date-view"},B(new Date(this.service.start_date)).format("MMM DD, YYYY")))),e("ir-modal",{key:"d23c6529b89f86cc806b80e434c21e4ee6a5f9f2",autoClose:false,ref:t=>this.irModalRef=t,isLoading:Y("/Do_Booking_Extra_Service"),onConfirmModal:this.deleteService.bind(this),iconAvailable:true,icon:"ft-alert-triangle danger h1",leftBtnText:g.entries.Lcz_Cancel,rightBtnText:g.entries.Lcz_Delete,leftBtnColor:"secondary",rightBtnColor:"danger",modalTitle:g.entries.Lcz_Confirmation,modalBody:`${g.entries["Lcz_AreYouSureDoYouWantToRemove "]} ${g.entries.Lcz_ThisService} ${g.entries.Lcz_FromThisBooking}`}))}};ge.style=me;const ve=D.object({booking_system_id:D.number().optional(),cost:D.coerce.number().nullable(),currency_id:D.number().min(1),description:D.string().min(1),end_date:D.string().nullable(),price:D.coerce.number(),start_date:D.string().nullable(),system_id:D.number().optional()});const ye=".sc-ir-extra-service-config-h{display:block;--ir-input-border-color:#cacfe7}.sc-ir-extra-service-config-h .input-group-text.sc-ir-extra-service-config{border-color:var(--ir-input-border-color)}.currency-ph.sc-ir-extra-service-config{padding:0;margin:0;color:#3b4781;display:flex;align-items:center;justify-content:center;padding:0 0 0 0.25rem;border-top:1px solid var(--ir-input-border-color);border-bottom:1px solid var(--ir-input-border-color);border-left:1px solid transparent;transition:border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;transition:border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.service-description-input.sc-ir-extra-service-config{height:70px !important}.service-description.sc-ir-extra-service-config .input-group-prepend.sc-ir-extra-service-config{background-color:#f4f5fa;border:1px solid var(--ir-input-border-color);border-top-left-radius:0.25rem;border-bottom-left-radius:0.25rem}.service-date-container.sc-ir-extra-service-config{padding:0;margin:0;display:flex;align-items:center;position:relative;width:100%;justify-content:center}.service-date-container.sc-ir-extra-service-config .btn-container.sc-ir-extra-service-config{position:absolute;right:5px;margin:0;display:flex;align-items:center;justify-content:center;padding:0}.service-description.sc-ir-extra-service-config .input-group-text.sc-ir-extra-service-config{height:fit-content;border:0;padding-top:0.75rem !important}.price-input-group.sc-ir-extra-service-config:focus-within .currency-ph.sc-ir-extra-service-config,.cost-input-group.sc-ir-extra-service-config:focus-within .currency-ph.sc-ir-extra-service-config{border-top:1px solid #1e9ff2;border-bottom:1px solid #1e9ff2;border-left:1px solid #1e9ff2}.currency-ph[data-state='error'].sc-ir-extra-service-config{border-color:var(--red, #ff4961)}.price-input.sc-ir-extra-service-config:focus{border-right-width:1px !important}.is-invalid.sc-ir-extra-service-config{background-image:none !important}.price-input.sc-ir-extra-service-config,.cost-input.sc-ir-extra-service-config{border-left:0}.row-group.sc-ir-extra-service-config{display:flex;flex-direction:column;gap:0.5rem}@media (min-width: 640px){.row-group.sc-ir-extra-service-config{flex-direction:row;align-items:center;gap:0}.cost-label.sc-ir-extra-service-config{border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}.until-prepend.sc-ir-extra-service-config,.cost-input-placeholder.sc-ir-extra-service-config{border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.date-from.sc-ir-extra-service-config,.price-input.sc-ir-extra-service-config{border-right-width:0 !important;border-top-right-radius:0 !important;border-bottom-right-radius:0 !important}}";const ke=ye;const xe=class{constructor(e){t(this,e);this.closeModal=s(this,"closeModal",7);this.resetBookingData=s(this,"resetBookingData",7);this.bookingService=new l;this.booking=undefined;this.service=undefined;this.s_service=undefined;this.error=undefined;this.fromDateClicked=undefined;this.toDateClicked=undefined}componentWillLoad(){if(this.service){this.s_service=Object.assign({},this.service)}}async saveAmenity(){try{ve.parse(this.s_service);await this.bookingService.doBookingExtraService({service:this.s_service,booking_nbr:this.booking.booking_nbr,is_remove:false});this.resetBookingData.emit(null);this.closeModal.emit(null)}catch(t){if(t instanceof O){this.error=true}console.error(t)}}updateService(t){let e=this.s_service;if(!e){e={cost:null,description:null,end_date:null,start_date:null,price:null,currency_id:this.booking.currency.id}}this.s_service=Object.assign(Object.assign({},e),t)}validatePrice(){var t,e,i,s;if(((t=this.s_service)===null||t===void 0?void 0:t.price)===undefined||((i=(e=this.s_service)===null||e===void 0?void 0:e.price)===null||i===void 0?void 0:i.toString())===""){return false}const n=ve.pick({price:true});const a=n.safeParse({price:(s=this.s_service)===null||s===void 0?void 0:s.price});return a.success}render(){var t,s,n,a,o,r,l,c,d,h,f,b,p,u;return e(i,{key:"7971d90556e296196b49c54770fc0d4888b7ea46",class:"p-0"},e("ir-title",{key:"4c18d7989bb9d6ca5631a137bbed9b15a389c8a3",class:"px-1",onCloseSideBar:()=>this.closeModal.emit(null),label:g.entries.Lcz_ExtraServices,displayContext:"sidebar"}),e("section",{key:"0f199439ee0cf187e4255e9c6dd2fbd111ff5d3b",class:"px-1"},e("fieldset",{key:"edc46420c33d74598718d808e84cb61879f6b16e",class:"input-group mb-1 mt-3 service-description"},e("div",{key:"e3c8f0f6762a258cd7cde0f34d72f578196a72f9",class:"input-group-prepend"},e("span",{key:"ff5b30376b74daac10af1d9735ff0ce006678eaa",class:"input-group-text"},g.entries.Lcz_Description)),e("textarea",{key:"0fb31ec0436d554f57d5edcef00a6739551fd079",value:(t=this.s_service)===null||t===void 0?void 0:t.description,class:`form-control service-description-input ${this.error&&!((s=this.s_service)===null||s===void 0?void 0:s.description)?"is-invalid":""}`,style:{height:"7rem"},maxLength:250,onChange:t=>this.updateService({description:t.target.value}),"aria-label":"Amenity description"})),e("div",{key:"60f000cc7969664d57ce6a4fa5259057255574e4",class:"row-group mb-1"},e("div",{key:"ebd71ecce35cec80b9b0097e72df44ec4aadc076",class:"input-group"},e("div",{key:"25e7d9c0360530aa5ed3778e5fb937de7c08271f",class:"input-group-prepend"},e("span",{key:"095e517e669962eb4b28b962ba6f8a243fa3bcee",class:"input-group-text",id:"basic-addon1"},g.entries.Lcz_DatesOn)),e("div",{key:"a7acc6cf2b8c002f8402438f07982555a4ad5956",class:"form-control p-0 m-0 d-flex align-items-center justify-content-center date-from"},e("div",{key:"6caf8be96f21485b0e47aecb34f24eea2e693266",class:"service-date-container"},e("ir-date-picker",{key:"0abc3d9604af8dd54e770061ce84e417e1060747",date:((n=this.s_service)===null||n===void 0?void 0:n.start_date)?new Date((a=this.s_service)===null||a===void 0?void 0:a.start_date):new Date(this.booking.from_date),class:`hidden-date-picker ${!((o=this.s_service)===null||o===void 0?void 0:o.start_date)?"hidden-date s":""}`,autoApply:true,singleDatePicker:true,minDate:this.booking.from_date,maxDate:this.booking.to_date,onDateChanged:t=>this.updateService({start_date:t.detail.start.format("YYYY-MM-DD")})}),((r=this.s_service)===null||r===void 0?void 0:r.start_date)&&e("div",{key:"8a7d455c64e0f8720a223317623f3d37b63f63c4",class:"btn-container"},e("ir-button",{key:"309e12e630e2f70ad175cdc7acdb5e0bff8a1b8b",title:"clear",id:"close",variant:"icon",style:{"--icon-size":"0.875rem"},icon_name:"xmark-fill",class:"ml-2",onClickHandler:t=>{t.stopImmediatePropagation();t.stopPropagation();this.updateService({start_date:null})}}))))),e("div",{key:"2934cd32db91a20813bdca498ac698b0788e381d",class:"input-group"},e("div",{key:"a0b4f602cec66e91d0a225327ba3d57f474df7b2",class:"input-group-prepend "},e("span",{key:"f9343949a02c2c75187ebbb4300706f0150eea17",class:"input-group-text until-prepend",id:"basic-addon1"},g.entries.Lcz_TillAndIncluding)),e("div",{key:"2e15e9a7f2e60caf33c609a23b476bd7c8fc92d5",class:"form-control p-0 m-0 d-flex align-items-center justify-content-center"},e("div",{key:"6cef47e3b9a01efe93668b3a303b93eada5c829c",class:"service-date-container"},e("ir-date-picker",{key:"0aca02483c6e18a8c4663c1f8abccefe004df009",date:((l=this.s_service)===null||l===void 0?void 0:l.end_date)?new Date((c=this.s_service)===null||c===void 0?void 0:c.end_date):new Date(this.booking.to_date),class:`hidden-date-picker ${!((d=this.s_service)===null||d===void 0?void 0:d.end_date)?"hidden-dates":""}`,autoApply:true,singleDatePicker:true,minDate:this.booking.from_date,maxDate:this.booking.to_date,onDateChanged:t=>{t.stopImmediatePropagation();t.stopPropagation();this.updateService({end_date:t.detail.start.format("YYYY-MM-DD")})}}),((h=this.s_service)===null||h===void 0?void 0:h.end_date)&&e("div",{key:"5a56730984f849a5f96288f6b57834eff5b35a4d",class:"btn-container"},e("ir-button",{key:"cbe555509b7b6edd8c1c187d9b5cf41d764d478b",title:"clear",id:"close",variant:"icon",style:{"--icon-size":"0.875rem"},icon_name:"xmark-fill",class:"ml-2",onClickHandler:t=>{t.stopImmediatePropagation();t.stopPropagation();this.updateService({end_date:null})}})))))),e("div",{key:"5439a4ffdb578b3479ea0122ce6f7f0a1e611bf8",class:"row-group"},e("ir-price-input",{key:"58b9b95ef459a13021a4e50f77f67f5beb695df1",label:"Price",currency:this.booking.currency.symbol,class:"ir-br-input-none",value:(b=(f=this.s_service)===null||f===void 0?void 0:f.price)===null||b===void 0?void 0:b.toString(),zod:ve.pick({price:true}),"aria-label":g.entries.Lcz_Price,wrapKey:"price","aria-describedby":"service price",autoValidate:false,"data-state":this.error&&!this.validatePrice()?"error":"",onTextChange:t=>this.updateService({price:parseFloat(t.detail)})}),e("ir-price-input",{key:"e8d2bb1ffa195136f0d2c77f1b425a4078e4f1ba",autoValidate:false,label:g.entries.Lcz_Cost,labelStyle:"cost-label",currency:this.booking.currency.symbol,value:(u=(p=this.s_service)===null||p===void 0?void 0:p.cost)===null||u===void 0?void 0:u.toString(),zod:ve.pick({cost:true}),onTextChange:t=>this.updateService({cost:parseFloat(t.detail)}),wrapKey:"cost","aria-label":"Cost","aria-describedby":"service cost"})),e("div",{key:"ff20ae4c217a35d9b576ef55d67dd34976f41aec",class:"d-flex flex-column flex-sm-row mt-3"},e("ir-button",{key:"ba5a65345f87414246fb011d471df1f425a0dd5a",onClick:()=>this.closeModal.emit(null),btn_styles:"justify-content-center",class:`mb-1 mb-sm-0 flex-fill mr-sm-1`,icon:"",text:g.entries.Lcz_Cancel,btn_color:"secondary"}),e("ir-button",{key:"a667fc67ffaf1dd4f66f1430dd825956329f593c",btn_styles:"justify-content-center align-items-center",class:"m-0 flex-fill text-center",icon:"",isLoading:Y("/Do_Booking_Extra_Service"),text:g.entries.Lcz_Save,btn_color:"primary",onClick:this.saveAmenity.bind(this)}))))}};xe.style=ke;const we=".sc-ir-extra-services-h{display:block}";const _e=we;const De=class{constructor(e){t(this,e);this.booking=undefined}render(){var t;return e(i,{key:"f548331073ceeefe7213876d2c4d5ed166759fa6",class:"card p-0 "},(t=this.booking.extra_services)===null||t===void 0?void 0:t.map(((t,i)=>e(n,null,e("ir-extra-service",{bookingNumber:this.booking.booking_nbr,currencySymbol:this.booking.currency.symbol,key:t.booking_system_id,service:t}),i!==this.booking.extra_services.length-1&&e("hr",{class:"mr-2 ml-2 my-0 p-0"})))))}};De.style=_e;const Ce=".input-group-text.sc-ir-guest-info{min-width:10rem;text-align:left}.mobilePrefixSelect.sc-ir-guest-info{border-right-width:0;border-top-right-radius:0;border-bottom-right-radius:0}.mobilePrefixInput.sc-ir-guest-info{border-top-left-radius:0;border-bottom-left-radius:0}.check-container.sc-ir-guest-info{position:relative;cursor:pointer;font-size:14px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;align-items:center}.check-container.sc-ir-guest-info input.sc-ir-guest-info{position:relative;opacity:0;cursor:pointer;height:0;width:0}.check-container.sc-ir-guest-info .checkmark.sc-ir-guest-info{position:relative;top:0;left:0;height:20px;width:20px;border:1px solid #cacfe7;border-radius:4px;transition:all 0.3s ease}.check-container.sc-ir-guest-info input.sc-ir-guest-info:checked~.checkmark.sc-ir-guest-info{background-color:#1e9ff2;border-color:#1e9ff2}.checkmark.sc-ir-guest-info:after{content:'';position:absolute;display:none}.check-container.sc-ir-guest-info input.sc-ir-guest-info:checked~.checkmark.sc-ir-guest-info:after{display:block}.check-label.sc-ir-guest-info{margin-left:10px !important}.check-container.sc-ir-guest-info .checkmark.sc-ir-guest-info:after{left:6px;top:3px;width:6px;height:10px;border:solid white;border-width:0 2px 2px 0;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.ir-card-header.sc-ir-guest-info{width:100%;border-bottom:1px solid #e4e5ec}.close-icon.sc-ir-guest-info{margin:0}.border-theme.sc-ir-guest-info{border:1px solid #cacfe7}";const Oe=Ce;const Ie=class{constructor(e){t(this,e);this.closeSideBar=s(this,"closeSideBar",7);this.resetbooking=s(this,"resetbooking",7);this.bookingService=new l;this.roomService=new S;this.token=new j;this.language=undefined;this.headerShown=undefined;this.email=undefined;this.booking_nbr=undefined;this.ticket=undefined;this.countries=undefined;this.submit=false;this.guest=null;this.isLoading=false}async componentWillLoad(){if(this.ticket){this.token.setToken(this.ticket)}if(!!this.token.getToken())await this.init()}ticketChanged(t,e){if(t===e){return}this.token.setToken(this.ticket);this.init()}async init(){try{const[t,e,i]=await Promise.all([this.bookingService.fetchGuest(this.email),this.bookingService.getCountries(this.language),!g||!g.entries||Object.keys(g.entries).length===0?this.roomService.fetchLanguage(this.language):Promise.resolve(null)]);if(i){g.entries=i.entries;g.direction=i.direction}this.countries=e;this.guest=t}catch(t){console.log(t)}}handleInputChange(t){this.guest=Object.assign(Object.assign({},this.guest),t)}async editGuest(){var t;try{this.isLoading=true;await this.bookingService.editExposedGuest(this.guest,(t=this.booking_nbr)!==null&&t!==void 0?t:null);this.closeSideBar.emit(null);this.resetbooking.emit(null)}catch(t){console.log(t)}finally{this.isLoading=false;console.log("done")}}render(){var t,i,s,n,a,o,r;if(!this.guest){return null}return[e("div",{class:"p-0"},this.headerShown&&e("div",{class:"position-sticky mb-1 shadow-none p-0"},e("div",{class:"d-flex align-items-center justify-content-between ir-card-header py-1 p-0"},e("h3",{class:"card-title text-left font-medium-2 px-1 my-0"},g.entries.Lcz_GuestDetails),e("ir-icon",{class:"close close-icon px-1",onIconClickHandler:()=>{this.closeSideBar.emit(null)}},e("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",height:20,width:20},e("path",{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"}))))),e("div",{class:"card-content collapse show"},e("div",{class:this.headerShown?"card-body px-1":"pt-0"},e("ir-input-text",{placeholder:"",label:g.entries.Lcz_FirstName,name:"firstName",submited:this.submit,value:(t=this.guest)===null||t===void 0?void 0:t.first_name,required:true,onTextChange:t=>this.handleInputChange({first_name:t.detail})}),e("ir-input-text",{placeholder:"",label:g.entries.Lcz_LastName,name:"lastName",submited:this.submit,value:(i=this.guest)===null||i===void 0?void 0:i.last_name,required:true,onTextChange:t=>this.handleInputChange({last_name:t.detail})}),e("ir-input-text",{placeholder:"",label:g.entries.Lcz_Email,name:"email",submited:this.submit,value:(s=this.guest)===null||s===void 0?void 0:s.email,required:true,onTextChange:t=>this.handleInputChange({email:t.detail})}),e("ir-input-text",{placeholder:"",label:g.entries.Lcz_AlternativeEmail,name:"altEmail",value:(n=this.guest)===null||n===void 0?void 0:n.alternative_email,onTextChange:t=>this.handleInputChange({alternative_email:t.detail})}),e("ir-select",{selectContainerStyle:"mb-1",required:true,name:"country",submited:this.submit,label:g.entries.Lcz_Country,selectedValue:(o=(a=this.guest.country_id)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:"",data:this.countries.map((t=>({value:t.id.toString(),text:t.name}))),firstOption:"...",onSelectChange:t=>this.handleInputChange({country_id:t.detail})}),e("ir-phone-input",{onTextChange:t=>{t.stopImmediatePropagation();t.stopPropagation();const{mobile:e,phone_prefix:i}=t.detail;if(e!==this.guest.mobile){this.handleInputChange({mobile:e})}if(i!==this.guest.country_phone_prefix)this.handleInputChange({country_phone_prefix:i})},phone_prefix:this.guest.country_phone_prefix,value:this.guest.mobile,language:this.language,label:g.entries.Lcz_MobilePhone}),e("div",{class:"mb-2"},e("ir-textarea",{variant:"prepend",onTextChange:t=>this.handleInputChange({notes:t.detail}),value:(r=this.guest)===null||r===void 0?void 0:r.notes,label:g.entries.Lcz_PrivateNote})),e("div",{class:"p-0 m-0"},e("label",{class:`check-container m-0 p-0`},e("input",{class:"m-0 p-0",type:"checkbox",name:"newsletter",checked:this.guest.subscribe_to_news_letter,onInput:t=>this.handleInputChange({subscribe_to_news_letter:t.target.checked})}),e("span",{class:"checkmark m-0 p-0"}),e("span",{class:"m-0 p-0  check-label"},g.entries.Lcz_Newsletter))),e("hr",null),e("ir-button",{isLoading:this.isLoading,btn_disabled:this.isLoading,btn_styles:"d-flex align-items-center justify-content-center",text:g.entries.Lcz_Save,onClickHandler:this.editGuest.bind(this),color:"btn-primary"}))))]}static get watchers(){return{ticket:["ticketChanged"]}}};Ie.style=Oe;const Me=".sc-ir-icon-h{margin:0;padding:0}.icon-button.sc-ir-icon{all:unset;margin:0;padding:0;color:#6b6f82}.icon-button.sc-ir-icon:hover{cursor:pointer;color:#104064}";const Be=Me;const Ye=class{constructor(e){t(this,e);this.iconClickHandler=s(this,"iconClickHandler",7);this.icon="ft-check"}render(){return e("button",{key:"93ccff02a6f339b8da6734f47074951ffee47bd9",class:"icon-button",onClick:()=>this.iconClickHandler.emit()},e("slot",{key:"94e52c587296e5145eb83e19724b2b478bade529",name:"icon"}))}};Ye.style=Be;const Te=".sc-ir-icons-h{display:block;box-sizing:border-box;margin:0;padding:0}.icon.sc-ir-icons{height:var(--icon-size, 1.25rem);width:var(--icon-size, 1.25rem);margin:0;padding:0}";const je=Te;const Se=class{constructor(e){t(this,e);this.name=undefined;this.svgClassName=undefined;this.color=undefined}render(){const t=L[this.name]||null;if(!t){return null}return e("svg",{xmlns:"http://www.w3.org/2000/svg",color:this.color,viewBox:t.viewBox,class:`icon ${this.svgClassName}`},e("path",{fill:"currentColor",d:t.d}))}};Se.style=je;const $e=".sc-ir-input-text-h{margin:0;padding:0}.border-theme.sc-ir-input-text{border:1px solid #cacfe7}.icon-container.sc-ir-input-text{color:#3b4781;border:1px solid #cacfe7;font-size:0.975rem;height:2rem;background:rgb(255, 255, 255);padding-right:0 !important;border-right:0;border-top-right-radius:0;border-bottom-right-radius:0;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}input.sc-ir-input-text:focus{border-color:#1e9ff2 !important}.input-container.sc-ir-input-text{display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;flex:1}.input-container.sc-ir-input-text input.sc-ir-input-text{padding-left:5px !important;padding-right:5px !important;border-left:0;border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.icon-container[data-state='focus'].sc-ir-input-text{border-color:var(--blue)}.icon-container[data-disabled].sc-ir-input-text{background-color:#eceff1;border-color:rgba(118, 118, 118, 0.3)}.danger-border.sc-ir-input-text{border-color:var(--red)}";const Ee=$e;const ze=class{constructor(e){t(this,e);this.textChange=s(this,"textChange",7);this.inputBlur=s(this,"inputBlur",7);this.name=undefined;this.value=undefined;this.label="<label>";this.placeholder="<placeholder>";this.inputStyles="";this.required=undefined;this.LabelAvailable=true;this.readonly=false;this.type="text";this.submited=false;this.inputStyle=true;this.size="md";this.textSize="md";this.labelPosition="left";this.labelBackground=null;this.labelColor="dark";this.labelBorder="theme";this.labelWidth=3;this.variant="default";this.disabled=false;this.error=false;this.valid=undefined;this.initial=true;this.inputFocused=false;this.isError=false}connectedCallback(){}disconnectedCallback(){}watchHandler(t){if(t!==""&&this.required){this.valid=true}}watchHandler2(t){if(t&&this.required){this.initial=false}}handleAriaInvalidChange(t){if(t==="true"){this.isError=true}else{this.isError=false}}handleInputChange(t){this.initial=false;if(this.required){this.valid=t.target.checkValidity();const e=t.target.value;this.textChange.emit(e)}else{this.textChange.emit(t.target.value)}}render(){const t=M();if(this.variant==="icon"){return e("fieldset",{class:"position-relative has-icon-left input-container"},e("label",{htmlFor:t,class:"input-group-prepend bg-white m-0"},e("span",{"data-disabled":this.disabled,"data-state":this.inputFocused?"focus":"",class:`input-group-text icon-container bg-white ${(this.error||this.isError)&&"danger-border"}`,id:"basic-addon1"},e("slot",{name:"icon"}))),e("input",{type:this.type,onFocus:()=>this.inputFocused=true,required:this.required,onBlur:t=>{this.inputFocused=false;this.inputBlur.emit(t)},disabled:this.disabled,class:`form-control bg-white pl-0 input-sm rate-input py-0 m-0 rateInputBorder ${(this.error||this.isError)&&"danger-border"}`,id:t,value:this.value,placeholder:this.placeholder,onInput:this.handleInputChange.bind(this)}))}let i="form-control";let s=e("div",{class:`input-group-prepend col-${this.labelWidth} p-0 text-${this.labelColor}`},e("label",{class:`input-group-text ${this.labelPosition==="right"?"justify-content-end":this.labelPosition==="center"?"justify-content-center":""} ${this.labelBackground?"bg-"+this.labelBackground:""} flex-grow-1 text-${this.labelColor} border-${this.labelBorder==="none"?0:this.labelBorder} `},this.label,this.required?"*":""));if(!this.LabelAvailable){s=""}if(this.inputStyle===false){i=""}if(this.required&&!this.valid&&!this.initial){i=`${i} border-danger`}return e("div",{class:"form-group"},e("div",{class:"input-group row m-0"},s,e("input",{readOnly:this.readonly,type:this.type,class:`${i} ${this.error||this.isError?"border-danger":""} form-control-${this.size} text-${this.textSize} col-${this.LabelAvailable?12-this.labelWidth:12} ${this.readonly&&"bg-white"} ${this.inputStyles}`,onBlur:t=>this.inputBlur.emit(t),placeholder:this.placeholder,value:this.value,onInput:this.handleInputChange.bind(this),required:this.required,disabled:this.disabled})))}static get watchers(){return{value:["watchHandler"],submited:["watchHandler2"],"aria-invalid":["handleAriaInvalidChange"]}}};ze.style=Ee;const Le=".page-loader.sc-ir-interceptor{width:1.25rem;height:1.25rem;border:2.5px solid #3f3f3f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}.loaderContainer.sc-ir-interceptor{padding:20px;display:flex;align-items:center;justify-content:center;border-radius:5px;background:white}.loadingScreenContainer.sc-ir-interceptor{position:fixed;top:0;left:0;height:100vh;width:100vw;z-index:100000;background:rgba(0, 0, 0, 0.2);pointer-events:all;display:flex;align-items:center;justify-content:center}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const Ne=Le;const Ae=class{constructor(e){t(this,e);this.toast=s(this,"toast",7);this.isShown=false;this.isLoading=false;this.isUnassignedUnit=false;this.endpointsCount=0;this.isPageLoadingStoped=null;this.handledEndpoints=["/Get_Exposed_Calendar","/ReAllocate_Exposed_Room","/Get_Exposed_Bookings"]}handleStopPageLoading(t){this.isLoading=false;this.isPageLoadingStoped=t.detail}componentWillLoad(){this.setupAxiosInterceptors()}setupAxiosInterceptors(){E.interceptors.request.use(this.handleRequest.bind(this),this.handleError.bind(this));E.interceptors.response.use(this.handleResponse.bind(this),this.handleError.bind(this))}extractEndpoint(t){return t.split("?")[0]}isHandledEndpoint(t){return this.handledEndpoints.includes(t)}handleRequest(t){const e=this.extractEndpoint(t.url);T[e]="pending";t.params=t.params||{};if(this.isHandledEndpoint(e)&&this.isPageLoadingStoped!==e){if(e!=="/Get_Exposed_Calendar"){this.isLoading=true}else{if(this.endpointsCount>0){this.isLoading=true}}}if(e==="/Get_Exposed_Calendar"){this.endpointsCount=this.endpointsCount+1}return t}handleResponse(t){var e;const i=this.extractEndpoint(t.config.url);if(this.isHandledEndpoint(i)){this.isLoading=false;this.isPageLoadingStoped=null}T[i]="done";if((e=t.data.ExceptionMsg)===null||e===void 0?void 0:e.trim()){this.handleError(t.data.ExceptionMsg);throw new Error(t.data.ExceptionMsg)}return t}handleError(t){this.toast.emit({type:"error",title:t,description:"",position:"top-right"});return Promise.reject(t)}render(){return e(i,{key:"3be6a854e8ae903930ae99b50151c5aab86da801"},this.isLoading&&!this.isPageLoadingStoped&&e("div",{key:"bf172b777a80de711ba028c180fdc784f20d8fef",class:"loadingScreenContainer"},e("div",{key:"bac328fe76e41f2a2147e9c7d58e0f2ca0ee072d",class:"loaderContainer"},e("span",{key:"a57c0310d6f69dc0ac17a64b4f9c0ce8d0825ace",class:"page-loader"}))))}};Ae.style=Ne;const Re=".logo.sc-ir-label{height:1.5rem;width:1.5rem}.sc-ir-label-h{display:flex;gap:5px;align-items:center}.icon.sc-ir-label{margin-left:3px;padding:0;margin-top:0;display:flex;align-items:center}.label_message.sc-ir-label{margin:0 3px;padding:0}.label_title.sc-ir-label{min-width:max-content;padding:0;margin:0;font-weight:600}.label_placeholder.sc-ir-label{color:#cacfe7;padding:0 !important;margin:0 !important}.icon-container.sc-ir-label{margin:0;padding:0}.country.sc-ir-label{height:16px;width:23px;border-radius:3px}svg.sc-ir-label{margin:0;padding:0}.label_wrapper_inline.sc-ir-label{display:inline;max-width:100%;gap:5px;margin-bottom:5px}.label_wrapper_flex.sc-ir-label{display:flex;align-items:center;gap:5px;max-width:100%;margin-bottom:5px}.label_title.sc-ir-label{font-weight:600;white-space:nowrap;display:inline}.label_message.sc-ir-label{display:inline;white-space:normal;word-break:break-word}";const Pe=Re;const He=class{constructor(e){t(this,e);this.labelText=undefined;this.content=undefined;this.display="flex";this.renderContentAsHtml=false;this.image=null;this.isCountryImage=false;this.imageStyle="";this.ignoreEmptyContent=false;this.placeholder=undefined}render(){var t,s,n;if(!this.placeholder&&!this.content&&!this.ignoreEmptyContent){return null}return e(i,{class:this.image?"align-items-center":""},e("div",{class:`${this.display==="inline"?"label_wrapper_inline":"label_wrapper_flex"}`},this.labelText&&e("p",{class:"label_title"},this.labelText),e("slot",{name:"prefix"}),this.image&&e("img",{src:this.image.src,alt:(t=this.image.alt)!==null&&t!==void 0?t:this.image.src,class:`p-0 m-0 ${this.isCountryImage?"country":"logo"} ${(s=this.image.style)!==null&&s!==void 0?s:""} ${(n=this.imageStyle)!==null&&n!==void 0?n:""}`}),this.content?this.renderContentAsHtml?e("p",{class:"label_message",innerHTML:this.content}):e("p",{class:"label_message"},this.content):e("p",{class:"label_placeholder"},this.placeholder),e("slot",null),e("slot",{name:"suffix"})))}};He.style=Pe;const Ge=".sc-ir-listing-header-h{display:block;margin:0;padding:0;--ir-date-range-border:#cacfe7;--ir-date-range-width:242px;position:relative}h3.sc-ir-listing-header{margin:0}ir-input-text.sc-ir-listing-header{width:300px}.booking-search-field.sc-ir-listing-header{margin-left:0px;display:flex;align-items:center;gap:14px}.booking-container.sc-ir-listing-header{gap:14px}.filters-container.sc-ir-listing-header{gap:10px;justify-content:space-between}.buttons-container.sc-ir-listing-header{gap:14px;color:#104064}.booking-dates-container.sc-ir-listing-header{position:relative;box-sizing:border-box;background:white;padding:0.75rem 1rem;height:2rem;border-radius:0.21rem;border:1px solid #cacfe7;display:flex;align-items:center;gap:0.5rem;margin:0}.booking-dates-container.sc-ir-listing-header span.sc-ir-listing-header{padding:0;margin:0;display:flex;align-items:center;justify-content:center;height:2rem}.date-picker-wrapper.sc-ir-listing-header{position:relative;cursor:default;box-sizing:border-box;padding:0 0.5rem;height:2rem;display:flex;align-items:center;gap:5px;flex-shrink:0;cursor:pointer}.date-picker-wrapper.sc-ir-listing-header:hover .date-display.sc-ir-listing-header{color:var(--blue)}.date-picker-wrapper[data-option='from-date'].sc-ir-listing-header{padding-right:0;cursor:pointer}.date-display.sc-ir-listing-header{background:inherit;margin:0;padding:0;display:flex;align-items:center;font-size:0.975rem;line-height:1.45;height:2rem;color:#3b4781;white-space:nowrap;padding-right:5px;cursor:pointer}.hidden-date-picker.sc-ir-listing-header{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0}.new-booking-container.sc-ir-listing-header{position:absolute;right:10px;top:5px}.new-booking-btn.sc-ir-listing-header{all:unset;cursor:pointer;color:#104064}.new-booking-btn.sc-ir-listing-header:hover{color:#0b2538}.seperator-container.sc-ir-listing-header{margin-top:10px;justify-content:center !important;gap:14px}.seperator-container.sc-ir-listing-header span.sc-ir-listing-header{display:block;height:1px;background:var(--gray);width:45%;max-width:200px;margin:0}@media (max-width: 575.98px){.sc-ir-listing-header-h{--ir-date-range-width:100%}.flex-fill-sm-none.sc-ir-listing-header{flex:1 1 auto}.flex-fill-sm-none.sc-ir-listing-header label.sc-ir-listing-header{width:100px}.buttons-container.sc-ir-listing-header{justify-content:center !important;align-items:center !important;gap:40px}}@media (min-width: 1200px){.booking-search-field.sc-ir-listing-header{margin-left:40px}}@media (min-width: 1600px){.flex-fill-sm-none.sc-ir-listing-header{flex:0 0 auto}.booking-search-field.sc-ir-listing-header{margin-left:40px}}";const Ke=Ge;const Fe=class{constructor(e){t(this,e);this.preventPageLoad=s(this,"preventPageLoad",7);this.bookingListingService=new Ft;this.propertyId=undefined;this.language=undefined;this.p=undefined;this.inputValue="";this.isLoading=null}async handleSearchClicked(t){if(this.inputValue!==""){if(/^-?\d+$/.test(this.inputValue.trim())){Kt("book_nbr",this.inputValue.trim())}else if(this.inputValue[3]==="-"){Kt("book_nbr",this.inputValue.trim())}else{Kt("name",this.inputValue.trim())}}if(this.inputValue===""&&(Pt.userSelection.book_nbr!==""||Pt.userSelection.name!=="")){Pt.userSelection=Object.assign(Object.assign({},Pt.userSelection),{name:"",book_nbr:""})}this.isLoading=t?"excel":"search";this.preventPageLoad.emit("/Get_Exposed_Bookings");await this.bookingListingService.getExposedBookings(Object.assign(Object.assign({},Pt.userSelection),{start_row:0,end_row:20,is_to_export:t}));this.isLoading=null;if(Pt.download_url){const t=Pt.download_url;this.downloadUrlTag.href=t;this.downloadUrlTag.download=t;this.downloadUrlTag.click();Pt.download_url=null}}async handleClearUserField(){Gt();if(this.inputValue){this.inputValue=""}await this.bookingListingService.getExposedBookings(Object.assign(Object.assign({},Pt.userSelection),{start_row:0,end_row:20,is_to_export:false}))}async handleFromDateChange(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail.start;let i=e;let s=B(new Date(Pt.userSelection.to));if(i.isAfter(s)){s=i}Pt.userSelection=Object.assign(Object.assign({},Pt.userSelection),{from:i.format("YYYY-MM-DD"),to:s.format("YYYY-MM-DD")});await this.toDateRef.openDatePicker()}render(){var t,s,n,a,o,r,l,c,d,h;return e(i,{key:"bf5455220e81220bac71f139a87852b2fd90c197"},e("a",{key:"0256610ac333ff02f2cc0c9230a16b494452bfc9",ref:t=>this.downloadUrlTag=t},e("p",{key:"8cc39a3d24e33f482e7285df6c1cf1f40fd5a6bd",class:"sr-only"},"download url")),e("section",{key:"f02aee2027cae3ea3993649a4152c32199ccbb0e",class:"d-flex align-items-center "},e("div",{key:"64c53042ecbb2f189e3a21fa9d53527e2a603ec9",class:"d-flex flex-fill flex-column flex-md-row align-items-md-center booking-container"},e("div",{key:"82424c2167ba07c9ad9b62fc5e7a3fdf8c2ac553",class:"d-flex mb-1 d-md-none align-items-center justify-content-bettween width-fill"},e("h3",{key:"07ccbd196ee57b378d6e5359e137ec53b56ce23c",class:"flex-fill"},(t=g.entries)===null||t===void 0?void 0:t.Lcz_Bookings),e("div",{key:"f3909803d374165b01d8ba14d46c8b2cb8a8062e"},e("igl-book-property-container",{key:"5c08d90cbf40ac81db8501456ef990b8b5ec5395",p:this.p,withIrToastAndInterceptor:false,propertyid:this.propertyId,language:this.language,title:g.entries.Lcz_CreateNewBooking,ticket:Pt.token},e("ir-button",{key:"6350c6d8e33b29bb5003810c9d55f4cc7d79a85f",slot:"trigger",class:"new-booking-btn",variant:"icon",icon_name:"square_plus"})))),e("h3",{key:"dae4f5f297e387a6559468f25ce3e420dfbfd596",class:"d-none d-md-block"},(s=g.entries)===null||s===void 0?void 0:s.Lcz_Bookings),e("form",{key:"506fe3ef2c1c10ef5b2b2f9067430c8f9f32a3af",onSubmit:t=>{t.preventDefault();console.log(this.inputValue);this.handleSearchClicked(false)},class:"booking-search-field width-fill"},e("ir-input-text",{key:"a4f7fdaed9dc4f8400e0373d50fabe02b90c2ae1",class:"flex-fill",value:this.inputValue,onTextChange:t=>this.inputValue=t.detail,variant:"icon",placeholder:(n=g.entries)===null||n===void 0?void 0:n.Lcz_FindBookNbrorName},e("svg",{key:"bff16849422ccc520072ed11dd10a92dc40c1d69",slot:"icon",xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 512 512"},e("path",{key:"f2c4042b0b88b6407adbdb18759e42c7fd2eacb7",fill:"currentColor",d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"}))),e("h5",{key:"bee572db5f007d71de0f5cf1672b50ea34eddc4e",class:"m-0 font-weight-bold d-none d-sm-block"},(a=g.entries)===null||a===void 0?void 0:a.Lcz_Or))),e("div",{key:"6c4228123fd9991e5e83bc75c7e0528f9078c17b",class:"d-none d-md-block"},e("igl-book-property-container",{key:"18c428b67bff96ec402e0db7c602cf24a9ceb1c7",p:this.p,withIrToastAndInterceptor:false,propertyid:this.propertyId,language:this.language,title:g.entries.Lcz_CreateNewBooking,ticket:Pt.token},e("ir-button",{key:"d6b7d94add40e7d53eb87970e2d4b1c635b1d1a1",slot:"trigger",class:"new-booking-btn",variant:"icon",icon_name:"square_plus"})))),e("section",{key:"66d2b8379515f48fe913ffce8422ee3a2d5f1aa6",class:"d-flex align-items-center justify-evenly seperator-container d-sm-none"},e("span",{key:"ecf06957bfb0bc884025ee3476111c57e8208be8"}),e("h5",{key:"582a42f18d15d492af35fc74f3523af0e205293d",class:"m-0 font-weight-bold"},(o=g.entries)===null||o===void 0?void 0:o.Lcz_Or),e("span",{key:"d1c9d568fa83070ee54ff0c4e82ab3f4670fefd1"})),e("section",{key:"a5115d4558255203c93b4ce3771622fcf558197e",class:"d-flex flex-column align-items-sm-center flex-sm-row flex-sm-wrap filters-container justify-content-lg-start mt-1"},e("ir-select",{key:"0d673ae5609a2701715cf24cab6b3760a9c455f8",onSelectChange:t=>Kt("filter_type",t.detail),showFirstOption:false,data:Pt===null||Pt===void 0?void 0:Pt.types.map((t=>({value:t.id.toString(),text:t.name}))),class:"flex-sm-wrap",selectedValue:Pt.userSelection.filter_type,select_id:"dateTo",LabelAvailable:false}),e("div",{key:"b5c4dc2d7d2ade22e255327f4e31c01ff1ab6bfc",class:"booking-dates-container"},e("span",{key:"876a0424ac7cd070e6f752d7818ca9e5cf1c2a90"},e("svg",{key:"b81c07dc67b28e9d447bf9ceac86a5595ee3f6ff",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",style:{height:"14px",width:"14px"}},e("path",{key:"89746f344a13328ece053493ca008ca44497eafd",fill:"currentColor",d:"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z"}))),e("div",{key:"1f62258034dd314eebfb6217f32daabae12eb2b2",class:"date-picker-wrapper","data-option":"from-date"},e("p",{key:"a4a1d7a7d07b1ab7f3bcfd18c6d62342516b04bb",class:"date-display",title:"from date"},B(new Date(Pt.userSelection.from)).format("MMM DD, yyyy")),e("ir-date-picker",{key:"5c0a3dcd1d5c3cb0ba3cb22eb049e4bd86f3d7f0",date:new Date(Pt.userSelection.from),class:"hidden-date-picker",autoApply:true,singleDatePicker:true,minDate:"2000-01-01",onDateChanged:this.handleFromDateChange.bind(this)})),e("span",{key:"03b997cb8dd02201bc45db44e89f9026641d5b17"},e("svg",{key:"70801e59ad8934c7bb037ade523185bf5042cf2d",xmlns:"http://www.w3.org/2000/svg",class:"arrow-icon",height:"14",width:"14",viewBox:"0 0 512 512"},e("path",{key:"cceefb7a3904ed733eabd3b121750e967e580fdb",fill:"currentColor",d:"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z"}))),e("div",{key:"1dd59b6ca0ffd52ca5b5022598bfc569415dcf9e","data-option":"to-date",class:"date-picker-wrapper"},e("p",{key:"0f04b445ec05d7fbbf428c33ac424601368a3868",class:"date-display",title:"to date"},B(new Date(Pt.userSelection.to)).format("MMM DD, YYYY")),e("ir-date-picker",{key:"3399b2cc874cba9f92b82108519111e4568e8f3a",date:new Date(Pt.userSelection.to),class:"hidden-date-picker",ref:t=>this.toDateRef=t,autoApply:true,singleDatePicker:true,minDate:Pt.userSelection.from,onDateChanged:t=>{t.stopImmediatePropagation();t.stopPropagation();Pt.userSelection=Object.assign(Object.assign({},Pt.userSelection),{to:t.detail.start.format("YYYY-MM-DD")})}}))),e("ir-select",{key:"5f34f00e673c84caae6b4ee3780db2e62ae98e6d",class:"flex-sm-wrap",selectedValue:Pt.userSelection.booking_status,onSelectChange:t=>Kt("booking_status",t.detail),showFirstOption:false,data:Pt===null||Pt===void 0?void 0:Pt.statuses.map((t=>({value:t.code,text:t.name}))),select_id:"booking_status",LabelAvailable:false}),e("ir-select",{key:"ee4d72945fd923cb130f9e68b554ea3782794f1f",class:"flex-sm-wrap",selectedValue:Pt.userSelection.channel,onSelectChange:t=>Kt("channel",t.detail),LabelAvailable:false,data:Pt===null||Pt===void 0?void 0:Pt.channels.map((t=>({value:t.value,text:t.name}))),select_id:"channels",firstOption:((r=g.entries)===null||r===void 0?void 0:r.Lcz_All)+" "+((l=g.entries)===null||l===void 0?void 0:l.Lcz_Channels)}),e("div",{key:"7dab661005ad03f82f8a6f524754a88ec6cd16cf",class:"d-flex flex-fill align-items-end m-0  buttons-container"},e("ir-button",{key:"e3c22a302db497b28ae497c3ca719b43c9d7eb66",title:(c=g.entries)===null||c===void 0?void 0:c.Lcz_Search,variant:"icon",icon_name:"search",isLoading:this.isLoading==="search",onClickHandler:()=>this.handleSearchClicked(false)}),e("ir-button",{key:"a24e8ecf97ee555dd292f4e6ab9fb0b5f5fe0117",title:(d=g.entries)===null||d===void 0?void 0:d.Lcz_Erase,variant:"icon",icon_name:"eraser",onClickHandler:()=>this.handleClearUserField()}),e("ir-button",{key:"141f8cdf513646e60b378106f70e8cc34de8968c",title:(h=g.entries)===null||h===void 0?void 0:h.Lcz_ExportToExcel,variant:"icon",icon_name:"file",isLoading:this.isLoading==="excel",onClickHandler:()=>this.handleSearchClicked(true)}))))}};Fe.style=Ke;const Ve=".backdropModal.sc-ir-listing-modal{background-color:rgba(0, 0, 0, 0.5);z-index:1000;position:fixed;top:0;left:0;height:100vh;width:100%;opacity:0;transition:opacity 0.3s ease-in-out;pointer-events:none}.backdropModal.active.sc-ir-listing-modal{cursor:pointer;opacity:1 !important;pointer-events:all}.ir-modal[data-state='opened'].sc-ir-listing-modal{opacity:1;visibility:visible;pointer-events:all;transition:all 0.3s ease-in-out}.ir-alert-content.sc-ir-listing-modal{padding:10px;background:white;border-radius:5px}.modal.sc-ir-listing-modal{z-index:1001 !important}.modal-dialog.sc-ir-listing-modal{height:100vh;display:flex;align-items:center}.ir-alert-footer.sc-ir-listing-modal{gap:10px}.exit-icon.sc-ir-listing-modal{position:absolute;right:10px;top:5px;margin:0}.ir-modal.sc-ir-listing-modal{position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);z-index:1050;width:90%;max-width:32rem;overflow:hidden;outline:0;opacity:0;transition:transform 0.3s ease-in-out, opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;visibility:hidden;pointer-events:none}.ir-modal.active.sc-ir-listing-modal{opacity:1;transform:translate(-50%, 0);visibility:visible;pointer-events:all;transition:all 0.3s ease-in-out}";const Ue=Ve;const We=class{constructor(e){t(this,e);this.modalClosed=s(this,"modalClosed",7);this.resetData=s(this,"resetData",7);this.bookingListingsService=new Ft;this.paymentService=new Yt;this.modalTitle="Modal Title";this.editBooking=undefined;this.isOpen=false;this.deletionStage=1;this.selectedDesignation=undefined;this.loadingBtn=null}componentWillLoad(){this.selectedDesignation=Pt.settlement_methods[0].name}async closeModal(){this.isOpen=false;this.deletionStage=1;this.selectedDesignation=Pt.settlement_methods[0].name;this.modalClosed.emit(null)}async openModal(){this.isOpen=true}filterBookings(){Pt.bookings=Pt.bookings.filter((t=>t.booking_nbr!==this.editBooking.booking.booking_nbr))}async btnClickHandler(t){let e=t.target;let i=e.name;try{if(i==="confirm"){if(this.editBooking.cause==="payment"){await this.paymentService.AddPayment({amount:this.editBooking.booking.financial.due_amount,currency:this.editBooking.booking.currency,date:B().format("YYYY-MM-DD"),designation:this.selectedDesignation,id:-1,reference:""},this.editBooking.booking.booking_nbr);this.resetData.emit(this.editBooking.booking.booking_nbr);this.closeModal()}else{if(this.deletionStage===2){this.loadingBtn="recover_and_delete";await this.bookingListingsService.removeExposedBooking(this.editBooking.booking.booking_nbr,true);this.filterBookings()}if(this.deletionStage===1){this.deletionStage=2}}}if(i==="cancel"){if(this.deletionStage===2){this.loadingBtn="just_delete";await this.bookingListingsService.removeExposedBooking(this.editBooking.booking.booking_nbr,false);this.filterBookings()}else{this.closeModal()}}}catch(t){console.error(t)}finally{if(this.loadingBtn){this.loadingBtn=null;this.closeModal()}}}renderTitle(){var t,e;if(this.editBooking.cause==="payment"){return(t=g.entries)===null||t===void 0?void 0:t.Lcz_MarkBookingAsPaid.replace("%1",this.editBooking.booking.booking_nbr)}else{if(this.deletionStage===1){return g.entries.Lcz_SureYouWantToDeleteBookingNbr+((e=this.editBooking)===null||e===void 0?void 0:e.booking.booking_nbr)}return g.entries.Lcz_WantToRecoverAllotment}}renderConfirmationTitle(){if(this.deletionStage===2){return g.entries.Lcz_RecoverAndDelete}return g.entries.Lcz_Confirm}renderCancelationTitle(){if(this.deletionStage===2){return g.entries.Lcz_JustDelete}return g.entries.Lcz_Cancel}render(){if(!this.editBooking){return null}return[e("div",{class:`backdropModal ${this.isOpen?"active":""}`,onClick:()=>{if(this.editBooking.cause==="delete"){return}this.closeModal()}}),e("div",{"data-state":this.isOpen?"opened":"closed",class:`ir-modal`,tabindex:"-1"},this.isOpen&&e("div",{class:`ir-alert-content p-2`},e("div",{class:`ir-alert-header align-items-center border-0 py-0 m-0 `},e("p",{class:"p-0 my-0 mb-1"},this.renderTitle()),e("ir-icon",{class:"exit-icon",style:{cursor:"pointer"},onClick:()=>{this.closeModal()}},e("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",height:"14",width:"10.5",viewBox:"0 0 384 512"},e("path",{fill:"currentColor",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"})))),e("div",{class:"modal-body text-left p-0 mb-2"},this.editBooking.cause==="payment"?e("ir-select",{selectedValue:this.selectedDesignation,onSelectChange:t=>this.selectedDesignation=t.detail,showFirstOption:false,LabelAvailable:false,data:Pt.settlement_methods.map((t=>({value:t.name,text:t.name})))}):null),e("div",{class:`ir-alert-footer border-0 d-flex justify-content-end`},e("ir-button",{isLoading:this.loadingBtn==="just_delete",icon:"",btn_color:"secondary",btn_block:true,text:this.renderCancelationTitle(),name:"cancel"}),e("ir-button",{isLoading:this.loadingBtn==="recover_and_delete",icon:"",btn_color:"primary",btn_block:true,text:this.renderConfirmationTitle(),name:"confirm"}))))]}};We.style=Ue;const qe=".sc-ir-loading-screen-h{display:fixed;height:100vh;width:100vw;z-index:1000;top:0;left:0;display:flex;align-items:center;justify-content:center;background:white}.loader.sc-ir-loading-screen{width:1.25rem;height:1.25rem;border:2.5px solid #3f3f3f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}.loaderContainer.sc-ir-loading-screen{position:absolute;z-index:100001;padding:20px;top:50%;left:50%;transform:translate(-50%, -50%);background:white;display:flex;align-items:center;justify-content:center;gap:20px;border-radius:5px}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const Je=qe;const Xe=class{constructor(e){t(this,e);this.message=""}render(){return e(i,{key:"4057b32c19a271dec113dde7e5abd0507fed667e"},e("span",{key:"dd0beeba49aaefcb8177c20b1aa5c42a405eefb4",class:"loader"}))}};Xe.style=Je;const Ze=".backdropModal.sc-ir-modal{background-color:rgba(0, 0, 0, 0.5);z-index:1000;position:fixed;top:0;left:0;height:100vh;width:100%;opacity:0;transition:opacity 0.3s ease-in-out;pointer-events:none}.backdropModal.active.sc-ir-modal{cursor:pointer;opacity:1 !important;pointer-events:all}.ir-modal[data-state='opened'].sc-ir-modal{opacity:1;visibility:visible;pointer-events:all;transition:all 0.3s ease-in-out}.ir-alert-content.sc-ir-modal{padding:10px;background:white;border-radius:5px}.modal.sc-ir-modal{z-index:1001 !important}.modal-dialog.sc-ir-modal{height:100vh;display:flex;align-items:center}.ir-alert-footer.sc-ir-modal{gap:10px}.ir-modal.sc-ir-modal{position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);z-index:1050;width:90%;max-width:32rem;overflow:hidden;outline:0;opacity:0;transition:transform 0.3s ease-in-out, opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;visibility:hidden;pointer-events:none}.ir-modal.active.sc-ir-modal{opacity:1;transform:translate(-50%, 0);visibility:visible;pointer-events:all;transition:all 0.3s ease-in-out}";const Qe=Ze;const ti=class{constructor(e){t(this,e);this.confirmModal=s(this,"confirmModal",7);this.cancelModal=s(this,"cancelModal",7);this.modalTitle="Modal Title";this.modalBody="Modal Body";this.rightBtnActive=true;this.leftBtnActive=true;this.rightBtnText="Confirm";this.leftBtnText="Close";this.isLoading=false;this.autoClose=true;this.rightBtnColor="primary";this.leftBtnColor="secondary";this.btnPosition="right";this.iconAvailable=false;this.icon="";this.isOpen=false;this.item={}}async closeModal(){this.isOpen=false}async openModal(){this.isOpen=true}btnClickHandler(t){let e=t.target;let i=e.name;if(i===this.leftBtnText){this.cancelModal.emit();this.item={};this.closeModal()}else if(i===this.rightBtnText){this.confirmModal.emit(this.item);this.item={};if(this.autoClose){this.closeModal()}}}render(){return[e("div",{key:"529321b5859057bc954145cfb298d08628d9b9b1",class:`backdropModal ${this.isOpen?"active":""}`,onClick:()=>{this.cancelModal.emit();if(this.autoClose&&!this.isLoading){this.closeModal()}}}),e("div",{key:"7ae7916f8821427797ebd7e85a700744200c8967","data-state":this.isOpen?"opened":"closed",class:`ir-modal`,tabindex:"-1"},e("div",{key:"34a12454e80b47147c1b773ea2da8c3c9993516b",class:`ir-alert-content p-2`},e("div",{key:"bb07b6473df3156919159cde9306ef3a1a27f697",class:`ir-alert-header align-items-center border-0 py-0 m-0 `}),e("div",{key:"43b7ff33a68c92da1eb62be3c5b7c9b94c1ac7cd",class:"modal-body text-left p-0 mb-2"},e("div",{key:"69a3d052aa15496bf08a5f6e35602f46ab32ae4e"},this.modalBody)),e("div",{key:"4b2aeaae027883492acb3191b281f69726560f66",class:`ir-alert-footer border-0  d-flex justify-content-${this.btnPosition==="center"?"center":this.btnPosition==="left"?"start":"end"}`},this.leftBtnActive&&e("ir-button",{key:"2a962ba2226106a53bb06bd1f064a42a794bf76b",btn_disabled:this.isLoading,icon:"",btn_color:this.leftBtnColor,btn_block:true,text:this.leftBtnText,name:this.leftBtnText}),this.rightBtnActive&&e("ir-button",{key:"3ae92d267f9eacba29d775ecc53192bacc2487d1",icon:"",btn_color:this.rightBtnColor,btn_disabled:this.isLoading,isLoading:this.isLoading,btn_block:true,text:this.rightBtnText,name:this.rightBtnText}))))]}};ti.style=Qe;const ei=".sc-ir-payment-actions-h{display:block}.sc-ir-payment-actions-h p.sc-ir-payment-actions,.sc-ir-payment-actions-h div.sc-ir-payment-actions,.sc-ir-payment-actions-h span.sc-ir-payment-actions,.sc-ir-payment-actions-h ir-icons.sc-ir-payment-actions{box-sizing:border-box;padding:0;margin:0}.action-container.sc-ir-payment-actions td.sc-ir-payment-actions{padding:0px 0.5rem;padding-bottom:0.5rem}.action-container.sc-ir-payment-actions .amount_action.sc-ir-payment-actions{padding-inline-start:0}.overdue_action.sc-ir-payment-actions{color:#ff4961;border-radius:0.25rem;display:flex;align-items:center;gap:0.5rem}.future_action.sc-ir-payment-actions{border-radius:0.25rem;color:#1e9ff2;display:flex;align-items:center;justify-content:start;gap:0.5rem}.date_action.sc-ir-payment-actions{font-weight:500}.amount_action.sc-ir-payment-actions{font-weight:600}";const ii=ei;const si=class{constructor(e){t(this,e);this.generatePayment=s(this,"generatePayment",7);this.booking=undefined;this.paymentAction=undefined}render(){var t,s;if(((t=this.paymentAction)===null||t===void 0?void 0:t.filter((t=>t.amount!==0)).length)==0){return null}return e(i,null,e("div",{class:"my-1"},e("span",{class:"font-medium"},"Payment actions")),e("table",null,e("thead",null,e("th",null,e("p",{class:"sr-only"},"Amount")),e("th",null,e("p",{class:"sr-only"},"Due date")),e("th",null,e("p",{class:"sr-only"},"Pay")),e("th",null,e("p",{class:"sr-only"},"Status"))),e("tbody",null,(s=this.paymentAction)===null||s===void 0?void 0:s.map((t=>{if(!t.due_on){return null}return e("tr",{class:"action-container"},e("td",{class:"amount_action"},k(t.currency.symbol,t.amount)),e("td",{class:"date_action"},B(new Date(t.due_on)).format("ddd, DD MMM YYYY")),t.amount>0&&e("td",null,e("ir-button",{btn_color:"outline",text:"Pay",size:"sm",onClickHandler:()=>this.generatePayment.emit(t)})),t.type==="overdue"&&t.amount>0&&e("td",null,e("div",{class:"overdue_action"},e("svg",{height:16,width:16,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},e("path",{fill:"currentColor",d:"M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})),e("span",null,"Overdue"))),t.type==="future"&&t.amount>0&&e("td",null,e("div",{class:"future_action "},e("svg",{xmlns:"http://www.w3.org/2000/svg",height:16,width:16,viewBox:"0 0 512 512"},e("path",{fill:"currentColor",d:"M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"})),e("span",null,B(new Date(t.due_on)).isSame(new Date)?"Today":"Future"))))})))))}};si.style=ii;const ni=".sm-margin-right.sc-ir-payment-details{margin-right:5px !important;background:#000}.action_icons.sc-ir-payment-details{width:60px}.w-60.sc-ir-payment-details{width:100px;padding:0 5px}.payments-height.sc-ir-payment-details{height:30px}.payment_date.sc-ir-payment-details{width:100px}.iframeHeight.sc-ir-payment-details{height:max-content;height:22.5rem}.designation.sc-ir-payment-details{width:120px}.total-cost-container.sc-ir-payment-details{background:#7cbebe;color:white;padding:0.5rem;border-radius:5px}.payment-actions.sc-ir-payment-details{display:flex;align-items:center;justify-content:center;height:100%;gap:0.5rem}.payment_action_beta_container.sc-ir-payment-details{border:1px solid var(--red);position:relative;padding:4px;box-sizing:border-box;border-radius:4px}.beta.sc-ir-payment-details{position:absolute;top:4px;background:var(--red);color:white;padding:0.2rem 0.3rem;font-size:12px;border-radius:4px;right:4px;margin:0}";const ai=ni;const oi=class{constructor(e){t(this,e);this.resetBookingData=s(this,"resetBookingData",7);this.resetExposedCancelationDueAmount=s(this,"resetExposedCancelationDueAmount",7);this.toast=s(this,"toast",7);this.paymentService=new Yt;this.bookingService=new l;this.paymentBackground="white";this.bookingDetails=undefined;this.paymentActions=undefined;this.newTableRow=false;this.collapsedPayment=false;this.collapsedGuarantee=false;this.flag=false;this.confirmModal=false;this.toBeDeletedItem=undefined;this.paymentDetailsUrl="";this.paymentExceptionMessage="";this.modal_mode=null;this.itemToBeAdded=undefined}handlePaymentGeneration(t){const e=t.detail;this.newTableRow=true;this.itemToBeAdded=Object.assign(Object.assign({},this.itemToBeAdded),{amount:e.amount,date:e.due_on});this.paymentBackground="rgba(250, 253, 174)"}async componentWillLoad(){var t;try{const e=this.bookingDetails.agent&&((t=this.bookingDetails.extras)===null||t===void 0?void 0:t.find((t=>t.key==="agent_payment_mode")));this.hasAgentWithCode001=(e===null||e===void 0?void 0:e.value)==="001";this.initializeItemToBeAdded()}catch(t){if(this.bookingDetails.guest.cci){return}if(!this.bookingDetails.is_direct&&this.bookingDetails.channel_booking_nbr){this.paymentExceptionMessage=t}}}initializeItemToBeAdded(){this.itemToBeAdded={id:-1,date:B().format("YYYY-MM-DD"),amount:null,currency:this.bookingDetails.currency,designation:"",reference:""};this.paymentBackground="white"}async _processPaymentSave(){if(this.itemToBeAdded.amount===null){this.toast.emit({type:"error",title:g.entries.Lcz_EnterAmount,description:"",position:"top-right"});return}if(Number(this.itemToBeAdded.amount)>Number(this.bookingDetails.financial.due_amount)){this.modal_mode="save";this.openModal();return}this._handleSave()}async _handleSave(){this.paymentBackground="white";try{await this.paymentService.AddPayment(this.itemToBeAdded,this.bookingDetails.booking_nbr);this.initializeItemToBeAdded();this.resetBookingData.emit(null);this.resetExposedCancelationDueAmount.emit(null)}catch(t){console.log(t)}}handlePaymentInputChange(t,e,i){this.paymentBackground="white";if(t==="amount"){if(!isNaN(e)||e===""){if(e===""){this.itemToBeAdded=Object.assign(Object.assign({},this.itemToBeAdded),{[t]:null})}else{this.itemToBeAdded=Object.assign(Object.assign({},this.itemToBeAdded),{[t]:parseFloat(e)})}}else if(i&&i.target){let t=i.target;let e=t.value;e=e.replace(/[^\d-]|(?<!^)-/g,"");t.value=e}}else{this.itemToBeAdded=Object.assign(Object.assign({},this.itemToBeAdded),{[t]:e})}}async cancelPayment(){try{await this.paymentService.CancelPayment(this.toBeDeletedItem.id);const t=this.bookingDetails.financial.payments.filter((t=>t.id!==this.toBeDeletedItem.id));this.bookingDetails=Object.assign(Object.assign({},this.bookingDetails),{financial:Object.assign(Object.assign({},this.bookingDetails.financial),{payments:t})});this.confirmModal=!this.confirmModal;this.resetBookingData.emit(null);this.resetExposedCancelationDueAmount.emit(null);this.toBeDeletedItem=null;this.modal_mode=null}catch(t){console.log(t)}}async handleConfirmModal(t){this.paymentBackground="white";t.stopImmediatePropagation();t.stopPropagation();if(this.modal_mode==="delete"){await this.cancelPayment()}else{await this._handleSave()}}openModal(){const t=document.querySelector(".delete-record-modal");t.openModal()}async handleCancelModal(t){t.stopImmediatePropagation();t.stopPropagation();try{this.paymentBackground="white";if(this.modal_mode==="save"){this.initializeItemToBeAdded()}}catch(t){console.log(t)}}handleBookingDetails(){if(this.newTableRow){this.newTableRow=false}}handleDateChange(t){this.handlePaymentInputChange("date",t.detail.end.format("YYYY-MM-DD"))}_renderTableRow(t,i="normal"){var s,a;return e(n,null,e("tr",null,e("td",{class:"border payments-height border-light border-bottom-0 text-center"},i==="normal"?e("span",{class:"sm-padding-left"},R(t.date)):e("ir-date-picker",{date:((s=this.itemToBeAdded)===null||s===void 0?void 0:s.date)?new Date(this.itemToBeAdded.date):new Date,minDate:B().add(-2,"months").startOf("month").format("YYYY-MM-DD"),singleDatePicker:true,autoApply:true,onDateChanged:this.handleDateChange.bind(this)})),e("td",{class:"border payments-height border-light border-bottom-0 text-center "},i==="normal"?e("span",{class:"sm-padding-right"},k(this.bookingDetails.currency.symbol,t.amount)):e("input",{type:"text",class:"border-0 text-center form-control py-0 m-0 w-100",value:this.itemToBeAdded.amount,onBlur:t=>{t.target.value=Number(this.itemToBeAdded.amount).toFixed(2)},onInput:t=>this.handlePaymentInputChange("amount",+t.target.value,t)})),e("td",{class:"border payments-height border-light border-bottom-0 text-center"},i==="normal"?e("span",{class:"sm-padding-left"},t.designation):e("input",{class:"border-0 w-100 form-control py-0 m-0",onInput:t=>this.handlePaymentInputChange("designation",t.target.value),type:"text"})),e("td",{rowSpan:2,class:"border payments-height border-light border-bottom-0 text-center"},e("div",{class:"payment-actions"},i==="add"&&e("ir-button",{variant:"icon",icon_name:"save",style:z.secondary,isLoading:i==="add"&&Y("/Do_Payment"),class:"m-0",onClickHandler:()=>{this._processPaymentSave()}}),e("ir-button",{variant:"icon",icon_name:"trash",style:z.danger,isLoading:((a=this.toBeDeletedItem)===null||a===void 0?void 0:a.id)===(t===null||t===void 0?void 0:t.id)&&Y("/Cancel_Payment"),onClickHandler:i==="add"?()=>{this.newTableRow=false;this.initializeItemToBeAdded()}:()=>{this.modal_mode="delete";this.toBeDeletedItem=t;this.openModal()}})))),e("tr",null,e("td",{colSpan:3,class:"border border-light payments-height border-bottom-0 text-center"},i==="normal"?e("span",{class:"sm-padding-left "},t.reference):e("input",{class:"border-0 w-100  form-control py-0 m-0",onKeyPress:t=>{if(t.key==="Enter"){this.newTableRow=false;this._handleSave()}},onInput:t=>this.handlePaymentInputChange("reference",t.target.value),type:"text"}))))}bookingGuarantee(){var t,i,s,n,a,o,r,l,c,d,h,f,b,p,u,m,v,y,k,x,w,_,D,C,O,I,M,B;if(this.bookingDetails.is_direct&&!this.bookingDetails.guest.cci){return null}return e("div",null,e("div",{class:"d-flex align-items-center"},e("span",{class:"mr-1 font-medium"},g.entries.Lcz_BookingGuarantee," ",this.hasAgentWithCode001&&`(${g.entries.Lcz_OnCredit})`),e("ir-button",{id:"drawer-icon","data-toggle":"collapse","data-target":`.guarrantee`,"aria-expanded":this.collapsedGuarantee?"true":"false","aria-controls":"myCollapse",class:"sm-padding-right pointer",variant:"icon",icon_name:"credit_card",onClickHandler:async()=>{if(!this.bookingDetails.is_direct&&this.bookingDetails.channel_booking_nbr&&!this.bookingDetails.guest.cci){this.paymentDetailsUrl=await this.bookingService.getPCICardInfoURL(this.bookingDetails.booking_nbr)}this.collapsedGuarantee=!this.collapsedGuarantee}})),e("div",{class:"collapse guarrantee "},this.bookingDetails.guest.cci?[e("div",null,((i=(t=this.bookingDetails)===null||t===void 0?void 0:t.guest)===null||i===void 0?void 0:i.cci)&&"Card:"," ",e("span",null,((a=(n=(s=this.bookingDetails)===null||s===void 0?void 0:s.guest)===null||n===void 0?void 0:n.cci)===null||a===void 0?void 0:a.nbr)||"")," ",((l=(r=(o=this.bookingDetails)===null||o===void 0?void 0:o.guest)===null||r===void 0?void 0:r.cci)===null||l===void 0?void 0:l.expiry_month)&&"Expiry: ",e("span",null," ",((h=(d=(c=this.bookingDetails)===null||c===void 0?void 0:c.guest)===null||d===void 0?void 0:d.cci)===null||h===void 0?void 0:h.expiry_month)||""," ",((p=(b=(f=this.bookingDetails)===null||f===void 0?void 0:f.guest)===null||b===void 0?void 0:b.cci)===null||p===void 0?void 0:p.expiry_year)&&"/"+((v=(m=(u=this.bookingDetails)===null||u===void 0?void 0:u.guest)===null||m===void 0?void 0:m.cci)===null||v===void 0?void 0:v.expiry_year))),e("div",null,((k=(y=this.bookingDetails)===null||y===void 0?void 0:y.guest)===null||k===void 0?void 0:k.cci.holder_name)&&"Name:"," ",e("span",null,((_=(w=(x=this.bookingDetails)===null||x===void 0?void 0:x.guest)===null||w===void 0?void 0:w.cci)===null||_===void 0?void 0:_.holder_name)||"")," ",((O=(C=(D=this.bookingDetails)===null||D===void 0?void 0:D.guest)===null||C===void 0?void 0:C.cci)===null||O===void 0?void 0:O.cvc)&&"- CVC:"," ",e("span",null," ",((B=(M=(I=this.bookingDetails)===null||I===void 0?void 0:I.guest)===null||M===void 0?void 0:M.cci)===null||B===void 0?void 0:B.cvc)||""))]:this.paymentDetailsUrl?e("iframe",{src:this.paymentDetailsUrl,width:"100%",class:"iframeHeight",frameborder:"0",name:"payment"}):e("div",{class:"text-center"},this.paymentExceptionMessage)))}_renderDueDate(t){return e("tr",null,e("td",{class:"pr-1"},R(t.date)),e("td",{class:"pr-1"},k(this.bookingDetails.currency.symbol,t.amount)),e("td",{class:"pr-1"},t.description),e("td",{class:"collapse font-size-small roomName"},t.room))}render(){var t,i;if(!this.bookingDetails.financial){return null}return[e("div",{class:"card m-0"},e("div",{class:"p-1"},this.bookingDetails.financial.gross_cost>0&&this.bookingDetails.financial.gross_cost!==null&&e("div",{class:"mb-2 h4 total-cost-container"},g.entries.Lcz_TotalCost,": ",e("span",null,k(this.bookingDetails.currency.symbol,this.bookingDetails.financial.gross_cost))),e("div",{class:" h4"},"Balance: ",e("span",{class:"danger font-weight-bold"},k(this.bookingDetails.currency.symbol,this.bookingDetails.financial.due_amount))),e("div",{class:"mb-2 h4"},"Collected:"," ",e("span",{class:""},k(this.bookingDetails.currency.symbol,this.bookingDetails.financial.payments?this.bookingDetails.financial.payments.reduce(((t,e)=>t+e.amount),0):0))),this.bookingGuarantee(),((t=this.paymentActions)===null||t===void 0?void 0:t.filter((t=>t.amount!==0)).length)>0&&this.bookingDetails.is_direct&&e("div",{class:"payment_action_beta_container"},e("p",{class:"beta"},"Beta"),e("ir-payment-actions",{paymentAction:this.paymentActions,booking:this.bookingDetails})),e("div",{class:"mt-2 d-flex  flex-column rounded payment-container"},e("div",{class:"d-flex align-items-center justify-content-between"},e("span",{class:"font-medium"},g.entries.Lcz_Payments," history"),e("ir-button",{id:"add-payment",variant:"icon",icon_name:"square_plus",style:{"--icon-size":"1.5rem"},onClickHandler:()=>{this.newTableRow=true}})),e("table",{class:"mt-1",style:{backgroundColor:this.paymentBackground}},e("thead",null,e("tr",null,e("th",{class:"border border-light border-bottom-0 text-center payment_date"},g.entries.Lcz_Dates),e("th",{class:"border border-light border-bottom-0 text-center w-60"},g.entries.Lcz_Amount),e("th",{class:"border border-light border-bottom-0 text-center designation"},g.entries.Lcz_Designation),e("th",{class:"border border-light border-bottom-0 text-center action_icons"},e("span",{class:"sr-only"},"payment actions")))),e("tbody",null,(i=this.bookingDetails.financial.payments)===null||i===void 0?void 0:i.map((t=>this._renderTableRow(t))),this.newTableRow?this._renderTableRow(null,"add"):null))))),e("ir-modal",{item:this.toBeDeletedItem,class:"delete-record-modal",modalTitle:g.entries.Lcz_Confirmation,modalBody:this.modal_mode==="delete"?g.entries.Lcz_IfDeletedPermantlyLost:g.entries.Lcz_EnteringAmountGreaterThanDue,iconAvailable:true,icon:"ft-alert-triangle danger h1",leftBtnText:g.entries.Lcz_Cancel,rightBtnText:this.modal_mode==="delete"?g.entries.Lcz_Delete:g.entries.Lcz_Confirm,leftBtnColor:"secondary",rightBtnColor:this.modal_mode==="delete"?"danger":"primary",onConfirmModal:this.handleConfirmModal.bind(this),onCancelModal:this.handleCancelModal.bind(this)})]}static get watchers(){return{bookingDetails:["handleBookingDetails"]}}};oi.style=ai;const ri=".sc-ir-phone-input-h{display:block}.input-container.sc-ir-phone-input{display:flex;align-items:center;padding:0 !important}.input-container.sc-ir-phone-input:focus-within{border-color:#1e9ff2}.border-theme.sc-ir-phone-input{border-color:#cacfe7}.input-container.sc-ir-phone-input input.sc-ir-phone-input{flex:1;border:0}.input-container.sc-ir-phone-input input.sc-ir-phone-input:focus{outline:none}.dropdown-trigger.sc-ir-phone-input{display:flex;align-items:center;gap:8px;background:white;border:0;border-right:1px solid #cacfe7}.ir-dropdown-container.sc-ir-phone-input{position:absolute;z-index:1000;bottom:-30px;width:100%;left:0;background:white}.input-container.sc-ir-phone-input label.sc-ir-phone-input{display:flex;align-items:center;justify-content:center;margin:0;padding:0 5px}.flag.sc-ir-phone-input{height:1rem;aspect-ratio:4/3;border-radius:3px}.is-invalid.sc-ir-phone-input{border-color:#ff4961}.phone_prefix_label.sc-ir-phone-input{padding:0 0.5rem;margin:0}";const li=ri;const ci=class{constructor(e){t(this,e);this.textChange=s(this,"textChange",7);this.countries=[];this.bookingService=new l;this.label=undefined;this.value="";this.disabled=false;this.error=false;this.token=undefined;this.language=undefined;this.default_country=null;this.phone_prefix=null;this.placeholder=undefined;this.inputValue="";this.isDropdownVisible=false;this.currentCountry=undefined}async componentWillLoad(){const t=await this.bookingService.getCountries(this.language);this.countries=t;if(this.phone_prefix){this.setCountryFromPhonePrefix()}else{if(this.default_country){this.setCurrentCountry(this.default_country)}}this.inputValue=this.value}handleValueChange(t,e){if(t!==e){this.inputValue=t}}handlePhoneChange(t,e){if(t!==e){this.setCountryFromPhonePrefix()}}handleDocumentClick(t){const e=t.target;if(!this.el.contains(e)){this.isDropdownVisible=false}}handleInputChange(t){var e;let i=t.target;let s=i.value;s=s.replace(/[^+\d]+/g,"");i.value=s;this.inputValue=s;this.textChange.emit({phone_prefix:(e=this.currentCountry)===null||e===void 0?void 0:e.phone_prefix,mobile:this.inputValue})}setCountryFromPhonePrefix(){var t;let e=this.countries.find((t=>t.phone_prefix===this.phone_prefix));if(!e){e=this.countries.find((t=>t.id.toString()===this.phone_prefix));if(!e){return}}this.currentCountry=Object.assign({},e);this.textChange.emit({phone_prefix:(t=this.currentCountry)===null||t===void 0?void 0:t.phone_prefix,mobile:this.value})}setCurrentCountry(t){var e;const i=this.countries.find((e=>e.id===t));if(!i){throw new Error("Invalid country id")}this.currentCountry=Object.assign({},i);this.textChange.emit({phone_prefix:(e=this.currentCountry)===null||e===void 0?void 0:e.phone_prefix,mobile:this.value})}render(){var t,s;return e(i,{key:"fe89975d889f9ccb6aa83c0e8da595fadbc9d8d4"},e("div",{key:"696b6d790865ad97390d1723065aa82f02ee7acf",class:"form-group mr-0"},e("div",{key:"0f823217b1e657c1b3a349702d857c09cc0133b4",class:"input-group row m-0 p-0 position-relative"},this.label&&e("div",{key:"a578d8ee415880630212830ec9f7d18b36df299e",class:`input-group-prepend col-3 p-0 text-dark border-none`},e("label",{key:"b975cb312ec7056d8f3fed904598835fe3f29bf1",class:`input-group-text  border-theme flex-grow-1 text-dark  `},this.label)),e("div",{key:"e4924da3a8453c608ab279eeb568b9925261d0f0",class:"form-control  input-container  flex-fill"+(this.error?" is-invalid":"")},e("button",{key:"72eb04c6b05f86063e772aa3114a45a8388d5d19",onClick:()=>this.isDropdownVisible=!this.isDropdownVisible,class:"dropdown-trigger"},this.currentCountry?e("img",{src:(t=this.currentCountry)===null||t===void 0?void 0:t.flag,class:"flag"}):e("p",{class:"p-0 m-0 "},g.entries.Lcz_Select),e("svg",{key:"e458628b5a8e9a7ffe0a40d0252f2136e7382aa4",xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},e("path",{key:"14347ee32d11e6d8a44d31250e4f9aace6e604f6",d:"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"}))),e("p",{key:"2a8bbc3f7a24123d2bef6f8201539c0c8f9a4bc8",class:"phone_prefix_label"},(s=this.currentCountry)===null||s===void 0?void 0:s.phone_prefix),e("input",{key:"fd66fbf94a809a4163521ccf8a6dc635ef94d0fb",type:"text",placeholder:this.placeholder,required:true,value:this.inputValue,disabled:this.disabled,onInput:t=>this.handleInputChange(t)}))," ",this.isDropdownVisible&&e("div",{key:"46be933c64d211a219dfe55a36eca83961224a6f",class:"ir-dropdown-container"},e("ir-combobox",{key:"e551ba70e7c8e29bb0523fd1bb162121228fdcfa",onComboboxValueChange:t=>{this.setCurrentCountry(+t.detail.data);this.isDropdownVisible=false},class:"bg-white",autoFocus:true,placeholder:"Search country",data:this.countries.map((t=>({id:t.id.toString(),name:`${t.name} (${t.phone_prefix})`,image:t.flag})))})))))}get el(){return a(this)}static get watchers(){return{value:["handleValueChange"],phone_prefix:["handlePhoneChange"]}}};ci.style=li;class di{async savePickup(t,e,i){try{const s=t.arrival_time.split(":");await E.post(`/Do_Pickup`,{booking_nbr:e,is_remove:i,currency:t.currency,date:t.arrival_date,details:t.flight_details,hour:s[0],minute:s[1],nbr_of_units:t.number_of_vehicles,selected_option:t.selected_option,total:+t.due_upon_booking})}catch(t){console.log(t)}}transformDefaultPickupData(t){const e=t.hour&&t.minute?I(t.hour)+":"+I(t.minute):"";return{arrival_date:t.date,arrival_time:e,currency:t.currency,due_upon_booking:t.total.toFixed(2),flight_details:t.details,location:t.selected_option.location.id,number_of_vehicles:t.nbr_of_units,selected_option:t.selected_option,vehicle_type_code:t.selected_option.vehicle.code}}getAvailableLocations(t){let e=[];y.pickup_service.allowed_options.forEach((i=>{if(e.filter((t=>t.value===i.location.id)).length===0){e.push({text:t+" "+i.location.description,value:i.location.id})}}));return e}validateForm(t){if(t.arrival_time.split(":").length!==2){return{error:true,cause:"arrival_time"}}if(t.flight_details===""){return{error:true,cause:"flight_details"}}if(t.vehicle_type_code===""){return{error:true,cause:"vehicle_type_code"}}if(t.number_of_vehicles===0){return{error:true,cause:"number_of_vehicles"}}return{error:false}}getNumberOfVehicles(t,e){let i=Math.ceil(e/t);let s=i>1?i:1;let n=i>1?2:3;return Array.from({length:i+n},((t,e)=>s+e))}getPickUpPersonStatus(t){const e=y.pickup_service.allowed_pricing_models.find((e=>e.code===t));if(!e){return null}return e.description}updateDue(t){const e=this.getPickUpPersonStatus(t.code);if(!e){return}if(e==="Person"){return t.amount*t.numberOfPersons}else{return t.amount*t.number_of_vehicles}}}const hi=".sc-ir-pickup-h{display:block}.custom-card-container.sc-ir-pickup{display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #e4e5ec}.card-title.sc-ir-pickup{flex:1}.border-theme.sc-ir-pickup{border:1px solid #cacfe7}";const fi=hi;const bi=class{constructor(e){t(this,e);this.closeModal=s(this,"closeModal",7);this.resetBookingData=s(this,"resetBookingData",7);this.pickupService=new di;this.defaultPickupData=undefined;this.numberOfPersons=0;this.bookingNumber=undefined;this.isLoading=false;this.allowedOptionsByLocation=[];this.pickupData={location:-1,flight_details:"",due_upon_booking:"",number_of_vehicles:1,vehicle_type_code:"",currency:undefined,arrival_time:"",arrival_date:B().format("YYYY-MM-DD"),selected_option:undefined};this.vehicleCapacity=[];this.cause=null}componentWillLoad(){if(this.defaultPickupData){const t=this.pickupService.transformDefaultPickupData(this.defaultPickupData);this.vehicleCapacity=this.pickupService.getNumberOfVehicles(t.selected_option.vehicle.capacity,this.numberOfPersons);this.allowedOptionsByLocation=y.pickup_service.allowed_options.filter((e=>e.location.id===t.location));this.pickupData=Object.assign({},t)}}handleLocationChange(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;if(e===""){this.updatePickupData("location",-1)}if(e!==""){this.allowedOptionsByLocation=y.pickup_service.allowed_options.filter((t=>t.location.id.toString()===e));let t=this.allowedOptionsByLocation[0];if(!t){return}this.vehicleCapacity=this.pickupService.getNumberOfVehicles(t.vehicle.capacity,this.numberOfPersons);this.pickupData=Object.assign(Object.assign({},this.pickupData),{location:e,selected_option:t,number_of_vehicles:this.vehicleCapacity[0],due_upon_booking:this.pickupService.updateDue({amount:t.amount,code:t.pricing_model.code,numberOfPersons:this.numberOfPersons,number_of_vehicles:this.vehicleCapacity[0]}).toFixed(2),vehicle_type_code:t.vehicle.code,currency:t.currency});const i=this.el.querySelector("#pickup-time");if(!i){setTimeout((()=>{this.initializeInputMask()}),100)}}}initializeInputMask(){const t=this.el.querySelector("#pickup-time");if(t){Inputmask("Hh:Mm",{placeholder:"HH:mm",definitions:{H:{validator:"[0-2]"},h:{validator:function(t,e,i){var s=e.buffer[i-1];if(s==="2"){return/[0-3]/.test(t)}else{return/[0-9]/.test(t)}}},M:{validator:"[0-5]"},m:{validator:"[0-9]"}},insertMode:true,showMaskOnHover:false,inputmode:"numeric",alias:"datetime",oncomplete:()=>{this.updatePickupData("arrival_time",t.value)},oncleared:()=>{this.updatePickupData("arrival_time","")},onincomplete:()=>{this.updatePickupData("arrival_time",t.value)}}).mask(t)}}handleVehicleQuantityChange(t){if(t.detail===""){return}const e=+t.detail;this.pickupData=Object.assign(Object.assign({},this.pickupData),{number_of_vehicles:e,due_upon_booking:this.pickupService.updateDue({amount:this.pickupData.selected_option.amount,code:this.pickupData.selected_option.pricing_model.code,numberOfPersons:this.numberOfPersons,number_of_vehicles:e}).toFixed(2)})}componentDidLoad(){if(this.defaultPickupData){this.initializeInputMask()}}handleVehicleTypeChange(t){if(t.detail===""){this.pickupData=Object.assign(Object.assign({},this.pickupData),{due_upon_booking:"",vehicle_type_code:""});return}let e=y.pickup_service.allowed_options.find((e=>e.location.id===+this.pickupData.location&&e.vehicle.code===t.detail));if(!e){return}this.vehicleCapacity=[...this.pickupService.getNumberOfVehicles(e.vehicle.capacity,this.numberOfPersons)];this.pickupData=Object.assign(Object.assign({},this.pickupData),{selected_option:e,number_of_vehicles:this.vehicleCapacity[0],due_upon_booking:this.pickupService.updateDue({amount:e.amount,code:e.pricing_model.code,numberOfPersons:this.numberOfPersons,number_of_vehicles:this.vehicleCapacity[0]}).toFixed(2),vehicle_type_code:e.vehicle.code})}updatePickupData(t,e){this.pickupData=Object.assign(Object.assign({},this.pickupData),{[t]:e})}async savePickup(){try{this.isLoading=true;const t=this.pickupService.validateForm(this.pickupData);if(t.error){this.cause=t.cause;return}if(this.cause){this.cause=null}await this.pickupService.savePickup(this.pickupData,this.bookingNumber,this.defaultPickupData!==null&&this.pickupData.location===-1);this.resetBookingData.emit(null);this.closeModal.emit(null)}catch(t){console.error(t)}finally{this.isLoading=false}}render(){return e(i,{key:"03088aeedc9520c454caf9535dfe713e0dcede30",class:"p-0"},e("ir-title",{key:"294259ff7a99ef1be595b70741b5dbf941590e1d",class:"px-1",onCloseSideBar:()=>this.closeModal.emit(null),label:g.entries.Lcz_Pickup,displayContext:"sidebar"}),e("section",{key:"c4c93ecadf2da31f9c16ba3dc9f0bf542a0ecea9",class:"px-1"},e("ir-select",{key:"bf701ef2bcf409841169ce8277161abdc67b670d",selectedValue:this.pickupData.location,selectContainerStyle:"mb-1",onSelectChange:this.handleLocationChange.bind(this),firstOption:g.entries.Lcz_Pickup_NoThankYou,class:"m-0 mb-1",LabelAvailable:false,data:this.pickupService.getAvailableLocations(g.entries.Lcz_Pickup_YesFrom)}),this.pickupData.location>0&&e(n,{key:"9e3bc6630364c1fba7df9f0f85034b6ed457dc86"},e("div",{key:"f4862f46a294150f6330773045c9bd4b714383e3",class:"d-flex"},e("div",{key:"74cad65b8d115cacd17665126b874255cfa1b5e3",class:"form-group  mr-1"},e("div",{key:"9744d3c1d8bd3a8decb682fd71f32796af76a480",class:"input-group row m-0"},e("div",{key:"3af602a361b99c9b3be8ffe0cf0ff5cc12f20849",class:`input-group-prepend col-5 p-0 text-dark border-0`},e("label",{key:"bfb8b7eb246fca8f97e74c0ce2a40a1ca921e5cd",class:`input-group-text  flex-grow-1 text-dark border-theme `},g.entries.Lcz_ArrivalDate)),e("div",{key:"b0ee3f9344eedcac9ab92a467f7dd5c41697b9a3",class:"form-control form-control-md col-7 d-flex align-items-center pl-0"},e("ir-date-picker",{key:"9cce5524ad2aeacfabdd5f05c94057a65c3d5259",minDate:B().format("YYYY-MM-DD"),autoApply:true,singleDatePicker:true,onDateChanged:t=>{this.updatePickupData("arrival_date",t.detail.start.format("YYYY-MM-DD"))}})))),e("div",{key:"c6c60184488e58405cb1dd0b4400b85043735018",class:"form-group"},e("div",{key:"839ff5dfb92c227bc55b9dee55bcffcfe7f26e8e",class:"input-group  row m-0"},e("div",{key:"49230b5ad09984fc79da17fe731e3d5fb260172a",class:`input-group-prepend col-4 col-sm-3 p-0 text-dark border-0`},e("label",{key:"73a76e0fbc7c81d83fbbda01c1ad3614c48c1619",htmlFor:"pickup",class:`input-group-text flex-grow-1 text-dark border-theme`},g.entries.Lcz_Time)),e("input",{key:"6ad8d3b7ebe00e3ac8bda8041221dc87fe6fe504",type:"text",value:this.pickupData.arrival_time,id:"pickup-time",class:`form-control col-8 col-sm-4 ${this.cause==="arrival_time"&&"border-danger"}`})))),e("ir-input-text",{key:"3d944cf462b6ea003b8a582934e624237a43764b",value:this.pickupData.flight_details,label:g.entries.Lcz_FlightDetails,onTextChange:t=>this.updatePickupData("flight_details",t.detail),placeholder:"",inputStyles:this.cause==="flight_details"?"border-danger":""}),e("ir-select",{key:"8b5a91d53cf5113e53789a9f87006d1e90de2104",selectContainerStyle:"mb-1",selectStyles:this.cause==="vehicle_type_code"?"border-danger":"",onSelectChange:this.handleVehicleTypeChange.bind(this),firstOption:g.entries.Lcz_Select,selectedValue:this.pickupData.vehicle_type_code,class:"m-0",LabelAvailable:false,data:this.allowedOptionsByLocation.map((t=>({text:t.vehicle.description,value:t.vehicle.code})))}),e("div",{key:"1d011d08c5b4276a76f0d71793846ae44809de9a",class:"d-flex flex-column flex-md-row"},e("ir-select",{key:"42cb78494bce66aa99f487e44292c42c681270bb",labelBorder:"theme",selectContainerStyle:"mb-1",onSelectChange:this.handleVehicleQuantityChange.bind(this),selectStyles:this.cause==="number_of_vehicles"?"border-danger":"",selectedValue:this.pickupData.number_of_vehicles,labelWidth:7,class:"m-0  mb-md-0 mr-md-1 flex-fill",label:g.entries.Lcz_NbrOfVehicles,data:this.vehicleCapacity.map((t=>({text:t,value:t})))}),e("ir-input-text",{key:"c3ba905640be7e0ffaf10064720e834a81b06a10",labelBorder:"theme",readonly:true,value:this.pickupData.due_upon_booking,labelWidth:7,label:`${g.entries.Lcz_DueUponBooking}  ${this.pickupData.currency.symbol}`,placeholder:"",class:""}))),e("div",{key:"28e8e9e0708e3249d9c5404738f0a90382224cf6",class:"d-flex flex-column flex-sm-row mt-3"},e("ir-button",{key:"0856cde6ea3e9e9482bc7a7c1a5a1336f9f80993",onClick:()=>this.closeModal.emit(null),btn_styles:"justify-content-center",class:`mb-1 mb-sm-0 flex-fill  ${this.defaultPickupData||this.pickupData.location!==-1?"mr-sm-1":""}`,icon:"",text:g.entries.Lcz_Cancel,btn_color:"secondary"}),(this.defaultPickupData||this.pickupData.location!==-1)&&e("ir-button",{key:"d002428791ec9fa097eaa7961e1a35273b70f7dc",btn_styles:"justify-content-center align-items-center",class:"m-0 flex-fill text-center",icon:"",isLoading:this.isLoading,text:g.entries.Lcz_Save,btn_color:"primary",onClick:this.savePickup.bind(this)}))))}get el(){return a(this)}};bi.style=fi;const pi=".sc-ir-pickup-view-h{display:block}";const ui=pi;const mi=class{constructor(e){t(this,e);this.booking=undefined}render(){if(!y.pickup_service.is_enabled||!this.booking.is_editable){return null}return e(i,null,e("div",{class:"mb-1"},e("div",{class:"d-flex w-100 mb-1 align-items-center justify-content-between"},e("p",{class:"font-size-large p-0 m-0 "},g.entries.Lcz_Pickup),e("ir-button",{id:"pickup",variant:"icon",icon_name:"edit",style:Object.assign(Object.assign({},z.secondary),{"--icon-size":"1.5rem"})})),this.booking.pickup_info&&e("div",{class:"card"},e("div",{class:"p-1"},e("div",{class:"d-flex align-items-center py-0 my-0 pickup-margin"},e("p",{class:"font-weight-bold mr-1 py-0 my-0"},g.entries.Lcz_Date,": ",e("span",{class:"font-weight-normal"},B(this.booking.pickup_info.date,"YYYY-MM-DD").format("MMM DD, YYYY"))),this.booking.pickup_info.hour&&this.booking.pickup_info.minute&&e("p",{class:"font-weight-bold flex-fill py-0 my-0"},g.entries.Lcz_Time,":",e("span",{class:"font-weight-normal"}," ",A(this.booking.pickup_info.hour.toString(),this.booking.pickup_info.minute.toString()))),e("p",{class:"font-weight-bold py-0 my-0"},g.entries.Lcz_DueUponBooking,":"," ",e("span",{class:"font-weight-normal"},this.booking.pickup_info.currency.symbol,this.booking.pickup_info.total))),e("p",{class:"font-weight-bold py-0 my-0"},g.entries.Lcz_FlightDetails,":",e("span",{class:"font-weight-normal"}," ",`${this.booking.pickup_info.details}`)),e("p",{class:"py-0 my-0 pickup-margin"},`${this.booking.pickup_info.selected_option.vehicle.description}`),e("p",{class:"font-weight-bold py-0 my-0 pickup-margin"},g.entries.Lcz_NbrOfVehicles,":",e("span",{class:"font-weight-normal"}," ",`${this.booking.pickup_info.nbr_of_units}`)),e("p",{class:"small py-0 my-0 pickup-margin"},y.pickup_service.pickup_instruction.description,y.pickup_service.pickup_cancelation_prepayment.description)))))}};mi.style=ui;const gi=".sc-ir-pms-logs-h{display:block}.dialog-container-height.sc-ir-pms-logs{height:4rem}.list-title.sc-ir-pms-logs{margin:0;padding:0;font-size:14px;font-weight:bold;width:fit-content}.list-item.sc-ir-pms-logs{margin:0;padding:0;font-size:14px;margin-left:5px;width:fit-content}.list-item.green.sc-ir-pms-logs{color:#629a4c;font-weight:600}.list-item.red.sc-ir-pms-logs{color:#ff4961;font-weight:600}";const vi=gi;const yi=class{constructor(e){t(this,e);this.bookingService=new l;this.bookingNumber=undefined;this.pmsLogs=undefined}componentWillLoad(){this.init()}async init(){try{this.pmsLogs=await this.bookingService.fetchPMSLogs(this.bookingNumber)}catch(t){console.error(t)}}render(){var t,i,s,n,a,o,r,l;return e("div",{key:"b8bb65a5b4892f644c7d12877f9ba8fa2a72fbd8",class:"p-1"},e("h3",{key:"6d6c37bec9a9b394614719d77502ea267bc82150",class:" text-left mb-1 dialog-title "},g.entries.Lcz_PMS_Logs),Y("/Get_Exposed_PMS_Logs")?e("div",{class:"d-flex align-items-center justify-content-center dialog-container-height"},e("ir-spinner",null)):e("div",{class:"dialog-container-height"},e("div",{class:"d-flex align-items-center ",style:{paddingBottom:"0.5rem"}},e("p",{class:"list-title p-0 m-0"},g.entries.Lcz_SentAt),((t=this.pmsLogs)===null||t===void 0?void 0:t.sent_date)?e("p",{class:"list-item"},(i=this.pmsLogs)===null||i===void 0?void 0:i.sent_date," ",A((s=this.pmsLogs)===null||s===void 0?void 0:s.sent_hour.toString(),(n=this.pmsLogs)===null||n===void 0?void 0:n.sent_minute.toString())):e("p",{class:`list-item ${((a=this.pmsLogs)===null||a===void 0?void 0:a.sent_date)?"green":"red"}`},((o=this.pmsLogs)===null||o===void 0?void 0:o.is_acknowledged)?g.entries.Lcz_YES:g.entries.Lcz_NO)),e("div",{class:"d-flex align-items-center p-0 m-0"},e("h4",{class:"list-title p-0 m-0"},g.entries.Lcz_Acknowledged),e("p",{class:`list-item  ${((r=this.pmsLogs)===null||r===void 0?void 0:r.is_acknowledged)?"green":"red"}`},((l=this.pmsLogs)===null||l===void 0?void 0:l.is_acknowledged)?g.entries.Lcz_YES:g.entries.Lcz_NO))))}};yi.style=vi;const ki=".sc-ir-price-input-h{display:block;--ir-input-border-color:#cacfe7;flex:1 1 0%}.sc-ir-price-input-h .input-group-text.sc-ir-price-input{border-color:var(--ir-input-border-color)}.sc-ir-price-input-h .form-control.sc-ir-price-input,.currency-label.sc-ir-price-input{font-size:14px !important}.ir-bl-lbl-none.sc-ir-price-input,.ir-bl-input-none.sc-ir-price-input{border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.ir-br-lbl-none.sc-ir-price-input,.ir-br-input-none.sc-ir-price-input{border-top-right-radius:0 !important;border-bottom-right-radius:0 !important}.ir-br-none.sc-ir-price-input{border-right:none}.ir-bl-none.sc-ir-price-input{border-left:none}.rate-input-container.sc-ir-price-input{display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;flex:1;padding:0 !important}[class='special-style'].sc-ir-price-input-h .rate-input.sc-ir-price-input{background:black !important}.rate-input.sc-ir-price-input{font-size:0.875rem;line-height:0;padding:0;height:0;box-sizing:border-box;border-left:0;padding-left:0px !important;border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.currency-label.with-label.sc-ir-price-input{border-radius:0}.currency-label.sc-ir-price-input{box-sizing:border-box;color:#3b4781;border:1px solid #cacfe7;font-size:0.875rem;height:2rem;background:white;border-right:0;border-top-right-radius:0;border-bottom-right-radius:0;pointer-events:none;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.currency-label.disabled.sc-ir-price-input,.rate-input.sc-ir-price-input:disabled{background-color:#eceff1;border-color:rgba(118, 118, 118, 0.3)}.price-input-group.sc-ir-price-input:focus-within .currency-label.sc-ir-price-input{border-top:1px solid #1e9ff2;border-bottom:1px solid #1e9ff2;border-left:1px solid #1e9ff2}[data-state='error'].sc-ir-price-input-h .currency-label.sc-ir-price-input,[data-state='error'].sc-ir-price-input-h .rate-input.sc-ir-price-input,.error.sc-ir-price-input{border-color:var(--red, #ff4961) !important}.price-input.sc-ir-price-input:focus{border-right-width:1px !important}.is-invalid.sc-ir-price-input{background-image:none !important}";const xi=ki;const wi=class{constructor(e){t(this,e);this.textChange=s(this,"textChange",7);this.inputBlur=s(this,"inputBlur",7);this.inputFocus=s(this,"inputFocus",7);this.handleInputChange=t=>{const e=t.target;this.value=e.value;this.textChange.emit(this.value)};this.handleBlur=()=>{this.validateInput(this.value);if(this.value){this.value=parseFloat(this.value).toFixed(2)}this.inputBlur.emit(this.value)};this.handleFocus=()=>{this.inputFocus.emit()};this.label=undefined;this.inputStyle=undefined;this.labelStyle=undefined;this.disabled=undefined;this.currency=undefined;this.autoValidate=true;this.wrapKey=undefined;this.zod=undefined;this.placeholder="";this.value="";this.required=false;this.minValue=undefined;this.maxValue=undefined;this.error=undefined}componentWillLoad(){if(this.el.id){this.id=this.el.id}else{this.id=M()}}hasSpecialClass(t){return this.el.classList.contains(t)}validateInput(t){if(!this.autoValidate){return}if(this.zod){try{this.zod.parse(this.wrapKey?{[this.wrapKey]:t}:t);this.error=false}catch(t){console.log(t);this.error=true}}}render(){var t,i;return e("fieldset",{key:"0128236a01ea9ea53b650ae9f4470d06f0cf4c6b",class:"input-group price-input-group m-0 p-0"},this.label&&e("div",{key:"6c799fe9b25425c877788d491359dc3fd8778ad4",class:"input-group-prepend"},e("span",{key:"604a3520715023ddcf9769a772511b1044b21233",class:`input-group-text \n                ${this.labelStyle}\n              ${this.hasSpecialClass("ir-bl-lbl-none")?"ir-bl-lbl-none":""}\n              ${this.hasSpecialClass("ir-br-lbl-none")?"ir-br-lbl-none":""}\n              ${this.hasSpecialClass("ir-br-none")?"ir-br-none":""} \n              ${this.hasSpecialClass("ir-bl-none")?"ir-bl-none":""} \n              `},e("label",{key:"300ae9dafa5de94d475c4d527b399e996f443c10",class:"p-0 m-0 ",htmlFor:this.id},this.label))),e("div",{key:"a324193af6515cd38caa5dd364ec9a141554ae8c",class:"position-relative has-icon-left rate-input-container"},this.currency&&e("div",{key:"9ee30dc082ffd379de2f390349a4a20106b64ab0",class:`input-group-prepend`},e("span",{key:"af3742f529fc2c3de39d14838ef2b9a4dc89817c",class:`input-group-text ${this.disabled?"disabled":""} currency-label ${this.error?"error":""} ${this.label?"with-label":""}`},this.currency)),e("input",{key:"1fbb0a6051c8efa74c78da6bcd4dda2cd5076304",disabled:this.disabled,id:this.id,class:`form-control input-sm rate-input \n              ${this.inputStyle}\n              ${this.hasSpecialClass("ir-br-input-none")?"ir-br-input-none":""} \n              ${this.hasSpecialClass("ir-bl-input-none")?"ir-bl-input-none":""} \n              ${this.error?"error":""} py-0 m-0 ${this.currency?"ir-bl-none":""}`,onInput:this.handleInputChange,onBlur:this.handleBlur,onFocus:this.handleFocus,type:"number",step:"0.01","aria-label":(t=this.el.ariaLabel)!==null&&t!==void 0?t:"price-input","aria-describedby":(i=this.el.ariaDescription)!==null&&i!==void 0?i:"price-input",value:this.value})))}get el(){return a(this)}};wi.style=xi;const _i=".sc-ir-reservation-information-h{display:block}";const Di=_i;const Ci=class{constructor(e){t(this,e);this.openSidebar=s(this,"openSidebar",7);this.booking=undefined;this.countries=undefined;this.userCountry=null}componentWillLoad(){var t,e,i;const s=(e=(t=this.booking)===null||t===void 0?void 0:t.guest)===null||e===void 0?void 0:e.country_id;this.userCountry=s?((i=this.countries)===null||i===void 0?void 0:i.find((t=>t.id===s)))||null:null}handleEditClick(t,e){t.stopImmediatePropagation();t.stopPropagation();this.openSidebar.emit({type:e})}renderPhoneNumber(){const{mobile:t,country_phone_prefix:e,country_id:i}=this.booking.guest;if(!t){return null}if(this.booking.is_direct){if(e){return e+" "+t}if(i){const e=this.countries.find((t=>t.id===i));if(!e){throw new Error("Invalid country id")}return e.phone_prefix+" "+t}}return t}render(){var t,i,s,n,a,o;const r=u(this.booking.extras);return e("div",{key:"04d40a8729c1a86632f6bd511e8cba71a2e26cbb",class:"card"},e("div",{key:"1696c44925362d5da7636f1ff1e8273ed0ab1e28",class:"p-1"},e("p",{key:"188c46ac8d1da65ed82331b1ef7b5912e3a10ce0"},this.booking.property.name||""),e("ir-label",{key:"2790ec0a69a0b2c79a77b03c02d88a3dde27bf45",labelText:`${g.entries.Lcz_Source}:`,content:this.booking.origin.Label,image:{src:this.booking.origin.Icon,alt:this.booking.origin.Label}}),e("ir-label",{key:"27a003c52e745d0bb10cf658b19cc6d79a787b3b",renderContentAsHtml:true,labelText:`${g.entries.Lcz_BookedOn}:`,content:`${R(this.booking.booked_on.date)}&nbsp&nbsp&nbsp&nbsp${A(this.booking.booked_on.hour.toString(),this.booking.booked_on.minute.toString())}`}),e("ir-label",{key:"c88611939a10a84e88b643005cee0024305d5785",labelText:`${g.entries.Lcz_BookedBy}:`,content:`${this.booking.guest.first_name} ${this.booking.guest.last_name}`},((t=this.booking.guest)===null||t===void 0?void 0:t.nbr_confirmed_bookings)>1&&!this.booking.agent&&e("div",{key:"19209789b7cea7ef71065e7e19f12245ed38dd3b",class:"m-0 p-0",slot:"prefix"},e("ir-tooltip",{key:"4367a4e96ff214afc91b91cfea390c4e431de8e0",message:`${g.entries.Lcz_BookingsNbr}`.replace("%1",this.booking.guest.nbr_confirmed_bookings.toString()),customSlot:true},e("div",{key:"e9c99c08b173e11184593d01e317a3e73d89ca39",class:"d-flex align-items-center m-0 p-0",slot:"tooltip-trigger",style:{gap:"0.25rem"}},e("p",{key:"4f43bb925b2b34eb1b0e9a12706ca977c23aa531",class:"p-0 m-0",style:{color:"#FB0AAD"}},this.booking.guest.nbr_confirmed_bookings),e("ir-icons",{key:"bc04680529c007ca6d5b02fd18c5f9d8bd6ac94a",style:{"--icon-size":"1rem"},color:"#FB0AAD",name:"heart-fill"})))),e("ir-button",{key:"d6d4f893fd4ffc59e23d6de823b7c09b85fb221b",slot:"suffix",variant:"icon",icon_name:"edit",style:Object.assign(Object.assign({},z.secondary),{"--icon-size":"1.1rem"}),onClickHandler:t=>this.handleEditClick(t,"guest")})),this.booking.guest.mobile&&e("ir-label",{key:"a3a308c9636d5c5354ee2c7b89fddda192f661cc",labelText:`${g.entries.Lcz_Phone}:`,content:this.renderPhoneNumber()}),!this.booking.agent&&e("ir-label",{key:"07d1c4b9e27e53df240533440ebaaf5adc2292f2",labelText:`${g.entries.Lcz_Email}:`,content:this.booking.guest.email}),this.booking.guest.alternative_email&&e("ir-label",{key:"ff81b2c489162398a2ec01ddf0006df840a6296f",labelText:`${g.entries.Lcz_AlternativeEmail}:`,content:this.booking.guest.alternative_email}),((s=(i=this.booking)===null||i===void 0?void 0:i.guest)===null||s===void 0?void 0:s.address)&&e("ir-label",{key:"634c44b5adfdcde6c1eceb176975f72f3563e4c6",labelText:`${g.entries.Lcz_Address}:`,content:this.booking.guest.address}),this.userCountry&&e("ir-label",{key:"b781e45a22115e07e047531a48f34f0985534fa6",labelText:`${g.entries.Lcz_Country}:`,isCountryImage:true,content:this.userCountry.name,image:{src:this.userCountry.flag,alt:this.userCountry.name}}),((n=this.booking.guest)===null||n===void 0?void 0:n.notes)&&e("ir-label",{key:"15b9f4ca3cbc852fd8f44068a71b08df4c8c953b",display:"inline",labelText:`${g.entries.Lcz_GuestPrivateNote}:`,content:(a=this.booking.guest)===null||a===void 0?void 0:a.notes}),this.booking.is_direct&&e("ir-label",{key:"303adb627e92de67b85b31498c76cad1943c9dec",labelText:`${g.entries.Lcz_ArrivalTime}:`,content:this.booking.arrival.description}),this.booking.promo_key&&e("ir-label",{key:"be1e3bfdccc521e4357f63b9aa2a741750e82cb4",labelText:`${g.entries.Lcz_Coupon}:`,content:this.booking.promo_key}),this.booking.is_in_loyalty_mode&&!this.booking.promo_key&&e("div",{key:"9f64611db0697614efafd5a6763fbfe22924bc21",class:"d-flex align-items-center"},e("svg",{key:"e83a5da9f72506d6795d7b80220d75b033d6a007",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",height:18,width:18},e("path",{key:"8466e3c5cc30c85b5bdfcf471c7efd0c43e0e2f9",fill:"#fc6c85",d:"M225.8 468.2l-2.5-2.3L48.1 303.2C17.4 274.7 0 234.7 0 192.8v-3.3c0-70.4 50-130.8 119.2-144C158.6 37.9 198.9 47 231 69.6c9 6.4 17.4 13.8 25 22.3c4.2-4.8 8.7-9.2 13.5-13.3c3.7-3.2 7.5-6.2 11.5-9c0 0 0 0 0 0C313.1 47 353.4 37.9 392.8 45.4C462 58.6 512 119.1 512 189.5v3.3c0 41.9-17.4 81.9-48.1 110.4L288.7 465.9l-2.5 2.3c-8.2 7.6-19 11.9-30.2 11.9s-22-4.2-30.2-11.9zM239.1 145c-.4-.3-.7-.7-1-1.1l-17.8-20c0 0-.1-.1-.1-.1c0 0 0 0 0 0c-23.1-25.9-58-37.7-92-31.2C81.6 101.5 48 142.1 48 189.5v3.3c0 28.5 11.9 55.8 32.8 75.2L256 430.7 431.2 268c20.9-19.4 32.8-46.7 32.8-75.2v-3.3c0-47.3-33.6-88-80.1-96.9c-34-6.5-69 5.4-92 31.2c0 0 0 0-.1 .1s0 0-.1 .1l-17.8 20c-.3 .4-.7 .7-1 1.1c-4.5 4.5-10.6 7-16.9 7s-12.4-2.5-16.9-7z"})),e("p",{key:"b4c293690e2073a28a109458d47ae80e924d5039",class:"m-0 p-0 ml-1"},g.entries.Lcz_LoyaltyDiscountApplied)),this.booking.is_direct?e("ir-label",{labelText:`${g.entries.Lcz_GuestRemark}:`,display:"inline",content:this.booking.remark}):e("ota-label",{class:"m-0 p-0",label:`${g.entries.Lcz_ChannelNotes||"Channel notes"}:`,remarks:this.booking.ota_notes,maxVisibleItems:(o=this.booking.ota_notes)===null||o===void 0?void 0:o.length}),e("div",{key:"cef360eb45feff872d0d75c4a9fded9ab42bb00f",class:"d-flex align-items-center justify-content-between"},e("ir-label",{key:"3f3a7a5a235ea0df77f1046c41a00befbfda487d",labelText:`${g.entries.Lcz_BookingPrivateNote}:`,placeholder:g.entries.Lcz_VisibleToHotelOnly,content:r,display:r?"inline":"flex"}),e("ir-button",{key:"e60e8d2ba257d21998d463d033b784f53313f9c1",variant:"icon",icon_name:"edit",style:z.secondary,onClickHandler:t=>this.handleEditClick(t,"extra_note")}))))}};Ci.style=Di;const Oi=".light-blue-bg.sc-ir-room{background:#acecff;padding:0.1rem 0.3rem;border-radius:5px}.room_statements.sc-ir-room{display:block;width:100%}.room_statements.sc-ir-room span.sc-ir-room{display:inline;white-space:normal;line-height:1.5;word-break:break-word}.room_statements.sc-ir-room b.sc-ir-room{display:inline;margin-right:5px}.payment-container.sc-ir-room{position:absolute;right:1rem;height:fit-content}.sc-ir-room-h{position:relative}.sm-mr.sc-ir-room{margin-right:3px}.subtotal_row.sc-ir-room{padding-top:8px;font-weight:600}.room_actions_btns.sc-ir-room{gap:0.5rem}.night-cost.sc-ir-room{color:#7cbebe}.mx-0-5.sc-ir-room{margin-left:2px !important;margin-right:2px !important}.tax-width.sc-ir-room{font-size:10px}.sm-mb-1.sc-ir-room{margin-bottom:5px !important}.sm-mt-1.sc-ir-room{margin-top:5px !important}.mx-01.sc-ir-room{--m:5px;margin-right:var(--m) !important;margin-left:var(--m) !important}";const Ii=Oi;const Mi=class{constructor(e){t(this,e);this.deleteFinished=s(this,"deleteFinished",7);this.pressCheckIn=s(this,"pressCheckIn",7);this.pressCheckOut=s(this,"pressCheckOut",7);this.editInitiated=s(this,"editInitiated",7);this.bookingEvent=undefined;this.bookingIndex=undefined;this.isEditable=undefined;this.mealCodeName=undefined;this.myRoomTypeFoodCat=undefined;this.currency="USD";this.language="en";this.legendData=undefined;this.roomsInfo=undefined;this.bedPreferences=undefined;this.hasRoomEdit=false;this.hasRoomDelete=false;this.hasRoomAdd=false;this.hasCheckIn=false;this.hasCheckOut=false;this.collapsed=false;this.item=undefined;this.isLoading=false;this.isModelOpen=false}componentWillLoad(){if(this.bookingEvent){this.item=this.bookingEvent.rooms[this.bookingIndex]}}handleBookingEventChange(){this.item=this.bookingEvent.rooms[this.bookingIndex]}handleClick(t){let e=t.target;if(e.id=="checkin"){this.pressCheckIn.emit(this.item)}else if(e.id=="checkout"){this.pressCheckOut.emit(this.item)}}getDateStr(t,e="default"){return t.getDate()+" "+t.toLocaleString(e,{month:"short"})+" "+t.getFullYear()}handleEditClick(){var t,e,i,s,n,a;this.editInitiated.emit({event_type:"EDIT_BOOKING",ID:this.item["assigned_units_pool"],NAME:m(this.item.guest.first_name,this.item.guest.last_name),EMAIL:this.bookingEvent.guest.email,PHONE:this.bookingEvent.guest.mobile,REFERENCE_TYPE:"",FROM_DATE:this.bookingEvent.from_date,TO_DATE:this.bookingEvent.to_date,TITLE:`${g.entries.Lcz_EditBookingFor} ${(e=(t=this.item)===null||t===void 0?void 0:t.roomtype)===null||e===void 0?void 0:e.name} ${((s=(i=this.item)===null||i===void 0?void 0:i.unit)===null||s===void 0?void 0:s.name)||""}`,defaultDateRange:{dateDifference:this.item.days.length,fromDate:new Date(this.item.from_date+"T00:00:00"),fromDateStr:this.getDateStr(new Date(this.item.from_date+"T00:00:00")),toDate:new Date(this.item.to_date+"T00:00:00"),toDateStr:this.getDateStr(new Date(this.item.to_date+"T00:00:00")),message:""},bed_preference:this.item.bed_preference,adult_child_offering:this.item.rateplan.selected_variation.adult_child_offering,ADULTS_COUNT:this.item.rateplan.selected_variation.adult_nbr,ARRIVAL:this.bookingEvent.arrival,ARRIVAL_TIME:this.bookingEvent.arrival.description,BOOKING_NUMBER:this.bookingEvent.booking_nbr,cancelation:this.item.rateplan.cancelation,channel_booking_nbr:this.bookingEvent.channel_booking_nbr,CHILDREN_COUNT:this.item.rateplan.selected_variation.child_nbr,COUNTRY:this.bookingEvent.guest.country_id,ENTRY_DATE:this.bookingEvent.from_date,FROM_DATE_STR:this.bookingEvent.format.from_date,guarantee:this.item.rateplan.guarantee,GUEST:this.bookingEvent.guest,IDENTIFIER:this.item.identifier,is_direct:this.bookingEvent.is_direct,IS_EDITABLE:this.bookingEvent.is_editable,NO_OF_DAYS:this.item.days.length,NOTES:this.bookingEvent.remark,origin:this.bookingEvent.origin,POOL:this.item["assigned_units_pool"],PR_ID:(n=this.item.unit)===null||n===void 0?void 0:n.id,RATE:this.item.total,RATE_PLAN:this.item.rateplan.name,RATE_PLAN_ID:this.item.rateplan.id,RATE_TYPE:this.item.roomtype.id,ROOMS:this.bookingEvent.rooms,SOURCE:this.bookingEvent.source,SPLIT_BOOKING:false,STATUS:"IN-HOUSE",TO_DATE_STR:this.bookingEvent.format.to_date,TOTAL_PRICE:this.bookingEvent.total,legendData:this.legendData,roomsInfo:this.roomsInfo,roomName:((a=this.item.unit)===null||a===void 0?void 0:a.name)||"",PICKUP_INFO:this.bookingEvent.pickup_info,booking:this.bookingEvent,currentRoomType:this.item})}handleDeleteClick(){this.modal.openModal()}async deleteRoom(){try{this.isLoading=true;let t=[...this.bookingEvent.rooms];t=t.filter((t=>t.identifier!==this.item.identifier));const e={assign_units:true,check_in:true,is_pms:true,is_direct:true,booking:{booking_nbr:this.bookingEvent.booking_nbr,from_date:this.bookingEvent.from_date,to_date:this.bookingEvent.to_date,remark:this.bookingEvent.remark,property:this.bookingEvent.property,source:this.bookingEvent.source,currency:this.bookingEvent.currency,arrival:this.bookingEvent.arrival,guest:this.bookingEvent.guest,rooms:t}};console.log("body:",e);const{data:i}=await E.post(`/DoReservation`,e);if(i.ExceptionMsg!==""){throw new Error(i.ExceptionMsg)}this.modal.closeModal();this.deleteFinished.emit(this.item.identifier)}catch(t){}finally{this.isLoading=false}}formatVariation({adult_nbr:t,child_nbr:e},{infant_nbr:i}){const s=e;const n=t>1?g.entries.Lcz_Adults.toLowerCase():g.entries.Lcz_Adult.toLowerCase();const a=s>1?g.entries.Lcz_Children.toLowerCase():g.entries.Lcz_Child.toLowerCase();const o=i>1?g.entries.Lcz_Infants.toLowerCase():g.entries.Lcz_Infant.toLowerCase();const r=[`${t} ${n}`,s?`${s} ${a}`:"",i?`${i} ${o}`:""];return r.filter(Boolean).join("&nbsp&nbsp&nbsp&nbsp")}getBedName(){var t;const e=this.bedPreferences.find((t=>t.CODE_NAME===this.item.bed_preference.toString()));if(!e){throw new Error(`bed with code ${this.item.bed_preference} not found`)}return(t=e[`CODE_VALUE_${this.language}`])!==null&&t!==void 0?t:e.CODE_VALUE_EN}render(){var t,s;return e(i,{key:"48beda7d05a2b633f4c5963c6f5486a1ed5ae41b",class:"p-1 d-flex m-0"},e("ir-button",{key:"d09342ae7f9d966a462e0a40a17a3bae9f9f139b",variant:"icon",id:"drawer-icon","data-toggle":"collapse","data-target":`#roomCollapse-${(t=this.item.identifier)===null||t===void 0?void 0:t.split(" ").join("")}`,"aria-expanded":this.collapsed?"true":"false","aria-controls":"myCollapse",class:"mr-1",icon_name:this.collapsed?"closed_eye":"open_eye",onClickHandler:()=>{this.collapsed=!this.collapsed},style:{"--icon-size":"1.6rem"}}),e("div",{key:"e080afb61f6ee745b5c2351067bf9211202633a3",class:"flex-fill m-0 "},e("div",{key:"2ebc517cc39e8966adf835c4ae7f99d6b68b033e",class:"d-flex align-items-start justify-content-between sm-mb-1"},e("p",{key:"0ff00be4cc4aa0716f7420a51023e4b8d3d245ee",class:"m-0 p-0"},e("span",{key:"819d438a544f0de84595316c6e742e406989c76a",class:"m-0 p-0",style:{fontWeight:"600"}},this.myRoomTypeFoodCat||""," ")," ",this.mealCodeName," ",this.item.rateplan.is_non_refundable&&` - ${g.entries.Lcz_NonRefundable}`," "),e("div",{key:"ad5983ded286033459951dc64aa810a9ac0fb8a1",class:"d-flex m-0 p-0 align-items-center room_actions_btns"},e("span",{key:"55de58c5b7678557ced33e73611416284a126dee",class:"p-0 m-0 font-weight-bold"},k(this.currency,this.item["gross_total"])),this.hasRoomEdit&&this.isEditable&&e("ir-button",{key:"14bad7ca67a41b512c835e8787103282d87c452f",id:`roomEdit-${this.item.identifier}`,variant:"icon",icon_name:"edit",style:z.secondary,onClickHandler:this.handleEditClick.bind(this)}),this.hasRoomDelete&&this.isEditable&&e("ir-button",{key:"e91b0e0877eb7111d7ea04d13ae6c705bcc09508",variant:"icon",onClickHandler:this.handleDeleteClick.bind(this),id:`roomDelete-${this.item.identifier}`,icon_name:"trash",style:z.danger}))),e("div",{key:"1eede00670986a25c874ebf3ceb278c50138c9b0",class:"d-flex align-items-center sm-mb-1"},e("ir-date-view",{key:"3cf47f207eedeb8b8bd7055c3712226a0c759088",class:"mr-1",from_date:this.item.from_date,to_date:this.item.to_date,showDateDifference:false}),this.hasCheckIn&&e("ir-button",{key:"4f3713ed11d7bf84bcaaf3d398fb334cc905805d",id:"checkin",icon:"",class:"mr-1",btn_color:"info",size:"sm",text:"Check in"}),this.hasCheckOut&&e("ir-button",{key:"9ed32f993a295965f15c813ed562c11343268845",id:"checkout",icon:"",btn_color:"info",size:"sm",text:"Check out"})),!v(this.item.roomtype.id)&&y.is_frontdesk_enabled&&this.item.unit&&e("div",{key:"efa15ee00237aafc3826a0883ca0ee98af5ab537",class:"d-flex justify-content-end"},e("span",{key:"a77fc20eb0429883aa2710c52d329b4c138f108d",class:`light-blue-bg ${this.hasCheckIn||this.hasCheckOut?"mr-2":""} `},this.item.unit.name)),e("div",{key:"4e2e2e16374c9a72daa65233bf90452a3cc74d6a"},e("span",{key:"311c9f6275faab725cc3a248c0ac470437eaff53",class:"mr-1"},`${this.item.guest.first_name||""} ${this.item.guest.last_name||""}`),this.item.rateplan.selected_variation.adult_nbr>0&&e("span",{key:"bf0cafd9e3eaf23b1a3ed5e107e94cc04332138f",class:"mr-1",innerHTML:this.formatVariation(this.item.rateplan.selected_variation,this.item.occupancy)}," "),this.item.bed_preference&&e("span",{key:"51210f7903a767a4a7c3be705615eeaaad181141"},"(",this.getBedName(),")")),e("div",{key:"0494aff27603b11bf8cb4e6c1b9d1e5becb01367",class:"collapse",id:`roomCollapse-${(s=this.item.identifier)===null||s===void 0?void 0:s.split(" ").join("")}`},e("div",{key:"e52ee847423f566ea96d48eea911b4a3b74c8033",class:"d-flex sm-mb-1 sm-mt-1"},e("div",{key:"fe55baaa5604b6c2548ab1f169f3041dccc76fb9",class:" sm-padding-top"},e("p",{key:"0a7709d21ebc7130165244b35c206de5bc020cb3",class:"sm-padding-right",style:{fontWeight:"600"}},`${g.entries.Lcz_Breakdown}:`)),e("div",{key:"5d5697f6cd3b6f3f7b07c69449f6ad40753b9ce1",class:"flex-fill"},e("table",{key:"eaccaee3e00f5dcab3ee6248bdac9b28beef2de2"},this.item.days.length>0&&this.item.days.map((t=>e("tr",null,e("td",{class:"pr-2 text-right"},P(t.date)),e("td",{class:"text-right"},k(this.currency,t.amount)),t.cost>0&&t.cost!==null&&e("td",{class:"pl-2 text-left night-cost"},k(this.currency,t.cost))))),e("tr",{key:"2dba1fd3630bc2378d13a0fb88b0741619e4f996",class:""},e("th",{key:"d23ebf5b8a429060b8d39625ca7f00dd022f9363",class:"text-right pr-2 subtotal_row"},g.entries.Lcz_SubTotal),e("th",{key:"3f4145c936a13f2d47678282b3519c99066f39e0",class:"text-right subtotal_row"},k(this.currency,this.item.total)),this.item.gross_cost>0&&this.item.gross_cost!==null&&e("th",{key:"6b7f2c9af83ca2d04bc1fbe59e850c122c9df013",class:"pl-2 text-right night-cost"},k(this.currency,this.item.cost))),this.bookingEvent.is_direct?e(n,null,(()=>{const t=y.taxes.filter((t=>t.pct>0));return t.map((t=>e("tr",null,e("td",{class:"text-right pr-2"},t.is_exlusive?g.entries.Lcz_Excluding:g.entries.Lcz_Including," ",t.name," (",t.pct,"%)"),e("td",{class:"text-right"},k(this.currency,this.item.total*t.pct/100)),this.item.gross_cost>0&&this.item.gross_cost!==null&&e("td",{class:"pl-2 text-right night-cost"},k(this.currency,this.item.cost*t.pct/100)))))})()):e(n,null,(()=>{const t=this.item.ota_taxes.filter((t=>t.amount>0));return t.map((t=>e("tr",null,e("td",{class:"text-right pr-2"},t.is_exlusive?g.entries.Lcz_Excluding:g.entries.Lcz_Including," ",t.name),e("td",{class:"text-right"},t.currency.symbol,t.amount))))})())))),this.bookingEvent.is_direct&&e(n,{key:"4341c4a6ff0afc35e33bb693b508135d575fdedf"},this.item.rateplan.cancelation&&e("ir-label",{key:"c3fa25bc561cbab241c631a3ffde0b6b85f56e40",labelText:`${g.entries.Lcz_Cancellation}:`,content:this.item.rateplan.cancelation||"",renderContentAsHtml:true}),this.item.rateplan.guarantee&&e("ir-label",{key:"04e473baa78cc18180da245654bca5037408ebe3",labelText:`${g.entries.Lcz_Guarantee}:`,content:this.item.rateplan.guarantee||"",renderContentAsHtml:true})))),e("ir-modal",{key:"e448df7a4c6157eeab0e670e82f0db3964c08c09",autoClose:false,ref:t=>this.modal=t,isLoading:this.isLoading,onConfirmModal:this.deleteRoom.bind(this),iconAvailable:true,icon:"ft-alert-triangle danger h1",leftBtnText:g.entries.Lcz_Cancel,rightBtnText:g.entries.Lcz_Delete,leftBtnColor:"secondary",rightBtnColor:"danger",modalTitle:g.entries.Lcz_Confirmation,modalBody:`${g.entries["Lcz_AreYouSureDoYouWantToRemove "]} ${this.item.roomtype.name} ${this.item.unit?this.item.unit.name:""} ${g.entries.Lcz_FromThisBooking}`}))}get element(){return a(this)}static get watchers(){return{bookingEvent:["handleBookingEventChange"]}}};Mi.style=Ii;const Bi=".border-theme.sc-ir-select{border:1px solid #cacfe7}@keyframes bounce{0%,100%{transform:scale(1);animation-timing-function:cubic-bezier(0.8, 0, 1, 1)}50%{transform:scale(1.2);animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}}.bounce-3.sc-ir-select{animation:bounce 1s 1}";const Yi=Bi;const Ti=class{constructor(e){t(this,e);this.selectChange=s(this,"selectChange",7);this.count=0;this.name=undefined;this.data=undefined;this.label="<label>";this.selectStyles=undefined;this.selectContainerStyle=undefined;this.selectedValue=null;this.required=undefined;this.LabelAvailable=true;this.firstOption="Select";this.selectStyle=true;this.showFirstOption=true;this.submited=false;this.size="md";this.textSize="md";this.labelPosition="left";this.labelBackground=null;this.labelColor="dark";this.labelBorder="theme";this.labelWidth=3;this.select_id=M();this.initial=true;this.valid=false}watchHandler(t){if(t!==null&&this.required){this.valid=true}}watchHandler2(t){if(t&&this.required){this.initial=false}}handleButtonAnimation(t){console.log(t.detail,this.select_id,t.detail===this.select_id);if(!this.selectEl||t.detail!==this.select_id){return}console.log("first1");t.stopImmediatePropagation();t.stopPropagation();this.selectEl.classList.add("border-danger")}componentwillload(){}disconnectedCallback(){}handleSelectChange(t){this.selectEl.classList.remove("border-danger");if(this.required){this.initial=false;this.valid=t.target.checkValidity();this.selectedValue=t.target.value;this.selectChange.emit(this.selectedValue)}else{this.selectedValue=t.target.value;this.selectChange.emit(this.selectedValue)}}render(){let t="form-control";let i=e("div",{key:"6e496ca832f125eb9876ec4495b74003789edfbf",class:`input-group-prepend col-${this.labelWidth} p-0 text-${this.labelColor}`},e("label",{key:"813ba99577cbef2412530a31eb2896eab497891b",htmlFor:this.select_id,class:`input-group-text ${this.labelPosition==="right"?"justify-content-end":this.labelPosition==="center"?"justify-content-center":""} ${this.labelBackground?"bg-"+this.labelBackground:""} flex-grow-1 text-${this.labelColor} border-${this.labelBorder==="none"?0:this.labelBorder} `},this.label,this.required?"*":""));if(this.selectStyle===false){t=""}if(this.required&&!this.valid&&!this.initial){t=`${t} border-danger`}if(!this.LabelAvailable){i=""}return e("div",{key:"c992064972738f09d0cfa00719e3db7e5ad2636d",class:`form-group m-0 ${this.selectContainerStyle}`},e("div",{key:"d3f50f3c084fea4a5118a4617f671412b4902c26",class:"input-group row m-0"},i,e("select",{key:"ed9123ca73d80193c5d4b164015c4ca11418752d",ref:t=>this.selectEl=t,id:this.select_id,class:`${this.selectStyles} ${t} form-control-${this.size} text-${this.textSize} col-${this.LabelAvailable?12-this.labelWidth:12}`,onInput:this.handleSelectChange.bind(this),required:this.required},this.showFirstOption&&e("option",{key:"0372d5b2133cd3eebecb2a9e70a83b59ffa68829",value:""},this.firstOption),this.data.map((t=>{if(this.selectedValue===t.value){return e("option",{selected:true,value:t.value},t.text)}else{return e("option",{value:t.value},t.text)}})))))}static get watchers(){return{selectedValue:["watchHandler"],submited:["watchHandler2"]}}};Ti.style=Yi;const ji=".backdrop{position:fixed;top:0;left:0;width:100%;height:100vh;cursor:pointer;background:rgba(0, 0, 0, 0.5);z-index:99;transition:all 0.5s;opacity:0;pointer-events:none;transition:all 0.5s}.backdrop.active{opacity:1;pointer-events:all}.sidebar-right{position:fixed;top:0;right:-120%;bottom:0;width:var(--sidebar-width, 40rem);max-width:100%;box-shadow:0 0 10px rgba(0, 0, 0, 0.1);transition:all 0.5s;z-index:100;overflow-y:hidden;color:var(--sidebar-color, #000);background-color:var(--sidebar-backgound, #fff);padding:var(--ir-sidebar-padding, 0.5rem 0)}.sidebar-right.active{right:0;overflow-y:auto}.sidebar-left{position:fixed;top:0;left:-100%;bottom:0;width:var(--sidebar-width, 30rem);max-width:100%;box-shadow:0 0 10px rgba(0, 0, 0, 0.1);transition:all 0.5s;z-index:200;overflow-y:hidden;color:var(--sidebar-color, #000);background:var(--sidebar-backgound, #fff);padding:var(--ir-sidebar-padding, 0.5rem 0)}.sidebar-title{display:flex;align-items:center;justify-content:space-between;padding:0 1rem;border-bottom:1px solid #e4e5ec}.sidebar-title p{font-weight:500;font-size:1.2rem}.sidebar-left.active{left:0;overflow-y:scroll}.close{position:absolute;top:0.5rem;right:1rem;width:1rem;height:1rem;cursor:pointer}";const Si=ji;const $i=class{constructor(e){t(this,e);this.irSidebarToggle=s(this,"irSidebarToggle",7);this.name=undefined;this.side="right";this.showCloseButton=true;this.open=false;this.sidebarStyles=undefined;this.label=undefined}applyStyles(){for(const t in this.sidebarStyles){if(this.sidebarStyles.hasOwnProperty(t)){this.sidebarRef.style[t]=this.sidebarStyles[t]}}}handleSidebarStylesChange(){this.applyStyles()}componentWillLoad(){this.handleKeyDown=this.handleKeyDown.bind(this)}componentDidLoad(){this.applyStyles();document.addEventListener("keydown",this.handleKeyDown)}handleKeyDown(t){if(t.key==="Escape"){return this.toggleSidebar()}else{return}}disconnectedCallback(){document.removeEventListener("keydown",this.handleKeyDown)}async toggleSidebar(){this.irSidebarToggle.emit(this.open)}render(){let t="";if(this.open){t="active"}else{t=""}return[e("div",{key:"4182a0595abf729c52d816ee68da832475b9a2ee",class:`backdrop ${t}`,onClick:()=>{this.toggleSidebar()}}),e("div",{key:"e06173c2c3c27a5f28b2b20b1b3bbd46c8b26d65",ref:t=>this.sidebarRef=t,class:`sidebar-${this.side} ${t}`},this.showCloseButton&&e("div",{key:"2b00f9e6de1dac61796659102e936fa49d4571db",class:"sidebar-title"},e("p",{key:"507161d78b907d1bb38e337a14918bd61a93fc73",class:"p-0 m-0"},this.label),e("div",{key:"3013b802f3aa42e7da186aefbe8a3c6178f6a1bb",class:"p-0 m-0 sidebar-icon-container"},e("ir-icon",{key:"d1096aff47063965e796eb1a7a44b615b4d26985",class:"",onIconClickHandler:()=>{this.toggleSidebar()}},e("svg",{key:"9998bf29034eee7a76a7eea23bea21fee1476758",slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",height:20,width:20},e("path",{key:"42535afbbb5e54024d4e262c656cab98f3e15e04",fill:"#6b6f82",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"}))))),e("slot",{key:"09487a382c878965b980ee9eeeb544c2c421263f",name:"sidebar-body"}))]}static get watchers(){return{sidebarStyles:["handleSidebarStylesChange"]}}};$i.style=Si;const Ei=":host{width:var(--ir-spinner-size, 1.25rem);height:var(--ir-spinner-size, 1.25rem);border:var(--ir-spinner-border-width, 2.5px) solid var(--ir-spinner-color, #3f3f3f);border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const zi=Ei;const Li=class{constructor(e){t(this,e);this.size=undefined;this.borderWidth=undefined;this.unit="rem";this.color=undefined}componentWillLoad(){this.initStyles()}handleSpinnerSizeChange(){this.initStyles()}handleSpinnerBorderWidthChange(){this.initStyles()}handleSpinnerUnitChange(){this.initStyles()}handleSpinnerColorChange(){this.initStyles()}initStyles(){if(this.size){this.applyCssElement(`${this.size}${this.unit}`,"--ir-spinner-size")}if(this.borderWidth){this.applyCssElement(`${this.borderWidth}${this.unit}`,"--ir-spinner-size")}if(this.color){this.applyCssElement(`${this.color}`,"--ir-spinner-color")}}applyCssElement(t,e){this.el.style.setProperty(e,t)}render(){return e(i,{key:"ed47baea38e5fa0e103fd314025361ca0eef85c3"})}get el(){return a(this)}static get watchers(){return{size:["handleSpinnerSizeChange"],borderWidth:["handleSpinnerBorderWidthChange"],unit:["handleSpinnerUnitChange"],color:["handleSpinnerColorChange"]}}};Li.style=zi;const Ni=".prepend-textarea.sc-ir-textarea{padding:0 !important}.ta-prepend-text.sc-ir-textarea{width:100%}";const Ai=Ni;const Ri=class{constructor(e){t(this,e);this.textChange=s(this,"textChange",7);this.rows=3;this.cols=5;this.text="";this.label="<label>";this.placeholder="<placeholder>";this.value="";this.maxLength=250;this.textareaClassname=undefined;this.variant="default";this.labelWidth=3;this.error=false}handleAriaInvalidChange(t){this.error=t==="true"}connectedCallback(){}disconnectedCallback(){}render(){if(this.variant==="prepend"){return e("fieldset",{class:"input-group"},e("div",{class:`input-group-prepend col-${this.labelWidth} prepend-textarea`},e("span",{class:"input-group-text ta-prepend-text"},this.label)),e("textarea",{value:this.value,class:`form-control`,style:{height:"7rem"},maxLength:this.maxLength,onChange:t=>this.textChange.emit(t.target.value),"aria-label":this.label}))}return e("div",{class:"form-group"},e("label",null,this.label),e("textarea",{maxLength:this.maxLength,rows:this.rows,value:this.value,class:`form-control ${this.textareaClassname} ${this.error?"border-danger":""}`,placeholder:this.placeholder,onInput:t=>this.textChange.emit(t.target.value)}))}static get watchers(){return{"aria-invalid":["handleAriaInvalidChange"]}}};Ri.style=Ai;const Pi=".sc-ir-title-h{padding:0px 0;margin-bottom:20px;display:flex;align-items:center;width:100%}[display-context='sidebar'].sc-ir-title-h{padding:15px 0;justify-content:space-between !important;width:100% !important;border-bottom:1px solid #e4e5ec !important;border-color:#e4e5ec !important}.title-body.sc-ir-title{margin:0;padding:0}@media only screen and (max-width: 641px){.sc-ir-title-h{flex-direction:column;gap:8px;align-items:flex-start}[display-context='sidebar'].sc-ir-title-h{flex-direction:row}}";const Hi=Pi;const Gi=class{constructor(e){t(this,e);this.closeSideBar=s(this,"closeSideBar",7);this.label=undefined;this.displayContext="default";this.justifyContent="start"}componentDidLoad(){this.el.style.justifyContent=this.justifyContent}handleJustifyContentChange(t,e){if(t!==e){this.el.style.justifyContent=t}}render(){return e(i,{key:"3221d80239c3854b46af31007ca974500e7c3f43"},e("h4",{key:"d557c35c494d19ee154a1709ad35232c35692191",class:"text-left font-medium-2 py-0 my-0"},this.label),this.displayContext==="sidebar"&&e("ir-icon",{key:"32bfea0609bdd1832bcca33d400f64c1acbc94c8",class:"close",onIconClickHandler:()=>{this.closeSideBar.emit(null)}},e("svg",{key:"b514f7ce24774b42b75e8842f722392a68bc3e5e",slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",height:20,width:20},e("path",{key:"79ac4cee0e86afe4c825f6e5e25c42a6dcd90d21",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"}))),this.displayContext!=="sidebar"&&e("div",{key:"dc5ff03111f2b8ef9c0543526aab7c971baef5ce",class:"title-body"},e("slot",{key:"8873a5f0b7f127bab031e68c6e2182fbf9ea6de0",name:"title-body"})))}get el(){return a(this)}static get watchers(){return{justifyContent:["handleJustifyContentChange"]}}};Gi.style=Hi;const Ki="button.sc-ir-toast,p.sc-ir-toast,h3.sc-ir-toast,div.sc-ir-toast{all:unset}.sc-ir-toast-h{--rd-viewport-padding:25px;--rd-success:#2b9a66;position:fixed;bottom:0;right:0;display:flex;flex-direction:column;padding:var(--rd-viewport-padding);gap:10px;max-width:100vw;margin:0;list-style:none;z-index:2147483647;outline:none;pointer-events:none;-webkit-user-select:none;user-select:none}@media (prefers-color-scheme: dark){.sc-ir-toast-h{--rd-success:#33b074}}p.sc-ir-toast{color:hsla(222.2, 84%, 4.9%, 0.8);font-size:13px;line-height:1.3}h1.sc-ir-toast,h2.sc-ir-toast,h3.sc-ir-toast,h4.sc-ir-toast,h5.sc-ir-toast,h6.sc-ir-toast{font-weight:500;color:hsl(222.2, 84%, 4.9%);font-size:15px}[position='top-left'].sc-ir-toast-h{top:0;left:0}[position='top-right'].sc-ir-toast-h{top:0;right:0}[position='bottom-left'].sc-ir-toast-h{bottom:0;left:0}[position='bottom-right'].sc-ir-toast-h{bottom:0;right:0}.icon-container.sc-ir-toast{height:25px;width:25px;border-radius:25px;display:flex;align-items:center;justify-content:center;padding:0;margin:0}.icon-container.sc-ir-toast>svg.sc-ir-toast{margin:0;color:white;stroke-width:5px}.success.sc-ir-toast{background-color:var(--rd-success)}.error.sc-ir-toast{background-color:red}.ToastRoot.sc-ir-toast{background-color:hsl(0, 0%, 100%);border-radius:0.5rem;box-shadow:hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px;padding:15px;display:grid;grid-template-areas:'title action' 'description action';grid-template-columns:auto max-content;column-gap:15px;align-items:center;pointer-events:none;opacity:0;border:1px solid hsl(214.3, 31.8%, 91.4%);position:relative}.ToastRoot[data-state='open'].sc-ir-toast{pointer-events:all;animation:slideIn 150ms cubic-bezier(0.16, 1, 0.3, 1)}.ToastRoot[data-state='closed'].sc-ir-toast{pointer-events:none;animation:hide 100ms ease-in}@-webkit-keyframes slideIn{from{transform:translateX(var(--rd-offset-width))}to{transform:translateX(0)}}@keyframes slideIn{from{transform:translateX(var(--rd-offset-width))}to{transform:translateX(0)}}.ToastTitle.sc-ir-toast{grid-area:title;font-weight:500;color:hsl(222.2, 84%, 4.9%);font-size:15px}.ToastDescription.sc-ir-toast{grid-area:description;margin:0;margin-top:5px;color:hsla(222.2, 84%, 4.9%, 0.8);font-size:13px;line-height:1.3;overflow:hidden;text-overflow:ellipsis}.ToastAction.sc-ir-toast{grid-area:action}";const Fi=Ki;const Vi=class{constructor(e){t(this,e);this.position="bottom-left";this.toasts=[]}onToast(t){const e=t.detail;this.showToast(e)}showToast(t){const e={positionClass:"toast-top-right",closeButton:true,timeOut:t.duration||5e3};switch(t.type){case"success":toastr.success(t.title,"",e);break;case"error":toastr.error(t.title,"",e);break}}render(){return e(i,{key:"6ebe3a97397818e2e8ca5b5846599f33deff216a"})}get element(){return a(this)}};Vi.style=Fi;const Ui=".sc-ir-tooltip-h{position:relative}.tooltip-icon.sc-ir-tooltip{margin:0 5px;padding:0}.tooltip-inner-custom.sc-ir-tooltip{min-width:max-content !important}";const Wi=Ui;const qi=class{constructor(e){t(this,e);this.message=undefined;this.withHtml=true;this.customSlot=false;this.open=undefined}toggleOpen(t){if(this.tooltipTimeout){clearTimeout(this.tooltipTimeout)}if(t){this.tooltipTimeout=setTimeout((()=>{this.open=true}),300)}else{this.open=false}}render(){return e(i,{key:"9252173e03e551764e825a55d9610c4a1e5fbe45",class:"m-0 p-0"},e("span",{key:"91799653a64d4f61b2fda97a403bb774f9799318",class:"m-0 p-0 d-flex align-items-center justify-content-center",onMouseEnter:()=>this.toggleOpen(true),onMouseLeave:()=>this.toggleOpen(false)},!this.customSlot?e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"m-0 p-0",height:"16",width:"16",viewBox:"0 0 512 512"},e("path",{fill:"#6b6f82",d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"})):e("slot",{name:"tooltip-trigger"})),this.open&&e("div",{key:"1cbb43c8aa3b59d2c0b856d31eaefca97be37725",class:"tooltip bottom show position-absolute",role:"tooltip"},e("div",{key:"738e2cbd3a38d23cb0ceb3e1db033b28d32b52a8",class:"tooltip-arrow"}),e("div",{key:"eae3ebe9945a536d37ec890fec8361f6051560ef",class:`tooltip-inner fit ${this.customSlot&&"tooltip-inner-custom"}`},e("span",{key:"44eb742c0e758fd958a63856d98c4ab9e853cfee",innerHTML:this.message}))))}};qi.style=Wi;const Ji="*.sc-ota-label{margin:0;padding:0}.sc-ota-label-h{display:flex;margin-bottom:5px;gap:5px;width:100%}strong.sc-ota-label{margin:0;padding:0}ul.sc-ota-label{margin:0 3px;padding:0;list-style:none;overflow:hidden;width:100%;word-wrap:break-word !important;overflow-wrap:break-word !important}li.sc-ota-label{width:100%;line-height:1.5;margin:0;padding:0;word-wrap:break-word !important;overflow-wrap:break-word !important}button.sc-ota-label{background:white;color:var(--blue);padding:0;margin:0;margin-left:3px;font-size:12px;border:0}button.sc-ota-label:hover{color:#355270}";const Xi=Ji;const Zi=class{constructor(e){t(this,e);this.toggleShowAll=()=>{this.showAll=!this.showAll};this.label=undefined;this.remarks=undefined;this.maxVisibleItems=3;this.showAll=false}render(){if(!this.remarks){return null}const t=this.showAll?this.remarks:this.remarks.slice(0,this.maxVisibleItems);return e(i,null,e("strong",null,this.label),e("ul",null,t.map(((i,s)=>e("li",{key:M()},"- ",i.statement," ",this.remarks.length>this.maxVisibleItems&&s===t.length-1&&e("button",{onClick:this.toggleShowAll},this.showAll?g.entries.Lcz_ShowLess:g.entries.Lcz_ShowMore))))))}};Zi.style=Xi;export{F as igl_application_info,W as igl_block_dates_view,Q as igl_book_property,it as igl_book_property_container,at as igl_book_property_footer,lt as igl_book_property_header,ht as igl_booking_form,pt as igl_booking_overview_page,gt as igl_date_range,kt as igl_property_booked_by,_t as igl_rate_plan,Ot as igl_room_type,Bt as ir_autocomplete,St as ir_booking_details,zt as ir_booking_extra_note,At as ir_booking_header,Wt as ir_booking_listing,Xt as ir_button,te as ir_combobox,ie as ir_common,ae as ir_date_picker,le as ir_date_view,he as ir_dialog,pe as ir_events_log,ge as ir_extra_service,xe as ir_extra_service_config,De as ir_extra_services,Ie as ir_guest_info,Ye as ir_icon,Se as ir_icons,ze as ir_input_text,Ae as ir_interceptor,He as ir_label,Fe as ir_listing_header,We as ir_listing_modal,Xe as ir_loading_screen,ti as ir_modal,si as ir_payment_actions,oi as ir_payment_details,ci as ir_phone_input,bi as ir_pickup,mi as ir_pickup_view,yi as ir_pms_logs,wi as ir_price_input,Ci as ir_reservation_information,Mi as ir_room,Ti as ir_select,$i as ir_sidebar,Li as ir_spinner,Ri as ir_textarea,Gi as ir_title,Vi as ir_toast,qi as ir_tooltip,Zi as ota_label};
//# sourceMappingURL=p-29b38702.entry.js.map