{"version":3,"names":["irUserManagementTableCss","IrUserManagementTableStyle0","tableCss","IrUserManagementTableStyle1","IrUserManagementTable","constructor","hostRef","this","users","currentTrigger","user","handleUserActiveChange","e","stopImmediatePropagation","stopPropagation","sleep","console","log","toast","emit","position","title","description","type","render","h","Host","key","class","_a","locales","entries","Lcz_Username","Lcz_Email","_b","Lcz_Mobile","style","paddingLeft","Lcz_CreateHousekeeper","onIconClickHandler","isEdit","slot","xmlns","height","width","viewBox","fill","d","map","i","id","username","email","phone_prefix","mobile","role","moment","last_signed_in","format","created_at","onCheckChange","checked","is_active","gap","Lcz_EditHousekeeper","icon","Lcz_DeleteHousekeeper","modalRef","openModal","showCloseButton","open","_c","onIrSidebarToggle","_d","renderCurrentTrigger","autoClose","modalBody","_e","rightBtnColor","rightBtnText","Lcz_Delete","onConfirmModal","removeUser","bind","ref","el","closeModal","isSuperAdmin","onCloseSideBar"],"sources":["src/components/ir-user-management/ir-user-management-table/ir-user-management-table.css?tag=ir-user-management-table&encapsulation=scoped","src/common/table.css?tag=ir-user-management-table&encapsulation=scoped","src/components/ir-user-management/ir-user-management-table/ir-user-management-table.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n.table th,\n.table td {\n  white-space: nowrap;\n  width: max-content !important;\n  background: white;\n  padding: 0.25rem 1rem !important;\n}\n","/* Base styles */\n.ir-table-row td {\n  padding: 0.5rem 1rem !important;\n  text-align: left;\n  z-index: 2;\n  background-color: white;\n  white-space: nowrap;\n  width: max-content;\n  max-width: max-content;\n}\n.ir-table-row td:last-child {\n  width: 100%;\n}\n\n.table td {\n  border-top: 0;\n  border-bottom: 1px solid #e3ebf3;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n}\n/* .table thead th:first-child {\n  border-top-left-radius: 0.5rem;\n  }\n  .table thead th:last-child {\n    border-top-right-radius: 0.5rem;\n    } */\n.table thead th {\n  border: none !important;\n  background: #ececec;\n  color: #374151;\n  padding: 0.5rem 1rem !important;\n  text-align: left;\n}\n\n/* Selected Rows Styles */\n\n.selected td {\n  background: #e3f3fa !important;\n}\n.selected td {\n  color: var(--gray-dark) !important;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n}\n\n/* Sorting styles */\n.sortable {\n  text-transform: capitalize;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n}\n.sortable:hover {\n  color: #212529;\n  background-color: #e2e8f0 !important;\n  border-color: #dae0e5;\n  cursor: pointer;\n}\n.sortable:active {\n  color: #212529;\n  background-color: #e2e8f0;\n  border-color: #d3d9df;\n}\n.sortable svg {\n  color: var(--blue);\n}\n","import locales from '@/stores/locales.store';\nimport { Component, Event, EventEmitter, Host, Prop, State, h } from '@stencil/core';\nimport { User } from '../types';\nimport moment from 'moment';\nimport { IToast } from '@components/ui/ir-toast/toast';\nimport { sleep } from '@/utils/utils';\n\n@Component({\n  tag: 'ir-user-management-table',\n  styleUrls: ['ir-user-management-table.css', '../../../common/table.css'],\n  scoped: true,\n})\nexport class IrUserManagementTable {\n  @Prop() users: User[] = [];\n  @Prop() isSuperAdmin: boolean;\n\n  @State() currentTrigger: any = null;\n  @State() user: User = null;\n\n  @Event() toast: EventEmitter<IToast>;\n  private modalRef: HTMLIrModalElement;\n\n  private async handleUserActiveChange(e: CustomEvent, user: User) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    await sleep(300);\n    console.log(user);\n    this.toast.emit({\n      position: 'top-right',\n      title: 'Saved Successfully',\n      description: '',\n      type: 'success',\n    });\n  }\n  render() {\n    return (\n      <Host>\n        <section class=\"table-container h-100 p-1 w-100 m-0 table-responsive\">\n          <table class=\"table\">\n            <thead>\n              <tr>\n                <th class=\"text-left\">{locales.entries.Lcz_Username ?? 'Username'}</th>\n                <th class=\"text-left\">{locales.entries.Lcz_Email}</th>\n                <th class=\"text-left\">{locales.entries.Lcz_Mobile ?? 'Mobile'}</th>\n                <th class=\"text-left\">Role</th>\n                <th class=\"text-left\">Last signed in</th>\n                <th class=\"text-left\">Created at</th>\n                <th>Active</th>\n\n                <th>\n                  <ir-icon\n                    style={{ paddingLeft: '0.875rem' }}\n                    data-testid=\"new_user\"\n                    title={locales.entries.Lcz_CreateHousekeeper}\n                    onIconClickHandler={() => {\n                      this.currentTrigger = {\n                        type: 'user',\n                        isEdit: false,\n                        user: null,\n                      };\n                    }}\n                  >\n                    <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"20\" width=\"17.5\" viewBox=\"0 0 448 512\">\n                      <path\n                        fill=\"currentColor\"\n                        d=\"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z\"\n                      />\n                    </svg>\n                  </ir-icon>\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.users.map((user, i) => (\n                <tr key={user.id} class=\"ir-table-row\">\n                  <td class=\"text-left\">{user.username}</td>\n                  <td class=\"text-left w-100\">{user.email}</td>\n                  <td class=\"text-left\">\n                    {user.phone_prefix} {user.mobile}\n                  </td>\n                  <td class=\"text-left\">{user.role}</td>\n                  <td class=\"text-left\">{moment(user.last_signed_in, 'YYYY-MM-DD').format('MMM, DD YYYY')}</td>\n                  <td class=\"text-left\">{moment(user.created_at, 'YYYY-MM-DD').format('MMM, DD YYYY')}</td>\n                  <td>{i > 0 && <ir-switch onCheckChange={e => this.handleUserActiveChange(e, user)} checked={user.is_active}></ir-switch>}</td>\n                  <td class=\"\">\n                    <div class=\"icons-container d-flex align-items-center\" style={{ gap: '0.5rem' }}>\n                      <ir-icon\n                        data-testid=\"edit\"\n                        title={locales.entries.Lcz_EditHousekeeper}\n                        onIconClickHandler={() => {\n                          this.currentTrigger = {\n                            type: 'user',\n                            isEdit: true,\n                            user,\n                          };\n                        }}\n                        icon=\"ft-save color-ir-light-blue-hover h5 pointer sm-margin-right\"\n                      >\n                        <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"20\" width=\"20\" viewBox=\"0 0 512 512\">\n                          <path\n                            fill=\"#6b6f82\"\n                            d=\"M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z\"\n                          />\n                        </svg>\n                      </ir-icon>\n                      {i > 0 && (\n                        <ir-icon\n                          data-testid=\"delete\"\n                          title={locales.entries.Lcz_DeleteHousekeeper}\n                          icon=\"ft-trash-2 danger h5 pointer\"\n                          onIconClickHandler={() => {\n                            this.user = user;\n                            this.modalRef.openModal();\n                          }}\n                        >\n                          <svg slot=\"icon\" fill=\"#ff2441\" xmlns=\"http://www.w3.org/2000/svg\" height=\"16\" width=\"14.25\" viewBox=\"0 0 448 512\">\n                            <path d=\"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z\" />\n                          </svg>\n                        </ir-icon>\n                      )}\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </section>\n        <ir-sidebar\n          showCloseButton={false}\n          open={this.currentTrigger !== null && this.currentTrigger?.type !== 'delete'}\n          onIrSidebarToggle={() => (this.currentTrigger = null)}\n          style={{\n            '--sidebar-block-padding': '0',\n            '--sidebar-width': this.currentTrigger ? (this.currentTrigger?.type === 'unassigned_units' ? 'max-content' : '40rem') : 'max-content',\n          }}\n        >\n          {this.renderCurrentTrigger()}\n        </ir-sidebar>\n        <ir-modal\n          autoClose={false}\n          modalBody={`Are you sure you want to delete ${this.user?.username}?`}\n          rightBtnColor=\"danger\"\n          rightBtnText={locales.entries.Lcz_Delete}\n          onConfirmModal={this.removeUser.bind(this)}\n          ref={el => (this.modalRef = el)}\n        ></ir-modal>\n      </Host>\n    );\n  }\n  private async removeUser(e: CustomEvent) {\n    try {\n      e.stopImmediatePropagation();\n      e.stopPropagation();\n    } finally {\n      this.user = null;\n      this.modalRef.closeModal();\n    }\n  }\n  private renderCurrentTrigger() {\n    if (!this.currentTrigger) {\n      return null;\n    }\n    return (\n      <ir-user-form-panel\n        isSuperAdmin={this.isSuperAdmin}\n        onCloseSideBar={() => (this.currentTrigger = null)}\n        slot=\"sidebar-body\"\n        user={this.currentTrigger?.user}\n        isEdit={this.currentTrigger?.isEdit}\n      ></ir-user-form-panel>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}