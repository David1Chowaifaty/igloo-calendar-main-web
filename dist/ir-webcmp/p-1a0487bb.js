import{n}from"./p-77f2d4d8.js";import{c as t}from"./p-2925ded6.js";import{h as o}from"./p-6c4ba7c0.js";const r={bookings:[],filteredBookings:[],paginatedBookings:[],futureBookings:[],needsCheckInBookings:[],inHouseBookings:[],searchTerm:"",pagination:{currentPage:1,pageSize:20,total:0,totalPages:1,showing:{from:0,to:0}},today:b()};const{state:e,onChange:s}=t(r);function u(n=[]){e.bookings=Array.isArray(n)?[...n]:[];h()}function i(n){e.searchTerm=n??"";h()}function a(n){const t=B(n,Math.max(e.pagination.totalPages,1));e.pagination={...e.pagination,currentPage:t,showing:l(t,e.pagination.pageSize,e.pagination.total)};h()}function c(n){const t=Number.isFinite(n)&&n>0?Math.floor(n):0;const o=w(t,e.pagination.pageSize);const r=B(e.pagination.currentPage,Math.max(o,1));e.pagination={...e.pagination,total:t,totalPages:Math.max(o,1),currentPage:r,showing:l(r,e.pagination.pageSize,t)}}function f(n){if(!Number.isFinite(n)||n<=0){return}const t=Math.floor(n);e.pagination={...e.pagination,pageSize:t,currentPage:1,showing:l(1,t,e.pagination.total)};h()}function g(n){e.today=o(n,"YYYY-MM-DD").format("YYYY-MM-DD");e.pagination={...e.pagination,currentPage:1,showing:l(1,e.pagination.pageSize,e.pagination.total)};h()}function h(){const n=M(e.bookings,e.today);const t=m(n,e.searchTerm);e.filteredBookings=t;e.paginatedBookings=t;const o=d(t);e.needsCheckInBookings=o.needsCheckIn;e.inHouseBookings=o.inHouse;e.futureBookings=o.futureRooms}function M(n,t){if(!t){return[]}return n}function m(n,t){const o=t?.trim().toLowerCase();if(!o){return n}return n.filter((n=>Y(n,o)))}function Y(n,t){if(!t){return true}const o=n.booking_nbr?.toLowerCase()??"";if(o.includes(t)){return true}if(P(n.guest).includes(t)){return true}return(n.rooms??[]).some((n=>P(n.guest).includes(t)))}function d(n){return n.reduce(((n,t)=>{const o=t.rooms??[];const r=o.filter((n=>p(n)));if(r.length){n.needsCheckIn.push({...t,rooms:r})}const e=o.filter((n=>D(n)));if(e.length){n.inHouse.push({...t,rooms:e})}const s=o.filter((n=>k(n)));if(s.length){n.futureRooms.push({...t,rooms:s})}return n}),{needsCheckIn:[],inHouse:[],futureRooms:[]})}function p(t){if(!t.unit){return false}return n({from_date:t.from_date,to_date:t.to_date,isCheckedIn:t.in_out.code==="001"})}function k(n){const t=n.in_out?.code??"";return t==="000"&&o().startOf("date").isBefore(o(n.from_date,"YYYY-MM-DD").startOf("day"))}function D(n){return n.in_out?.code==="001"}function P(n){const t=`${n?.first_name??""} ${n?.last_name??""}`.trim();return t.toLowerCase()}function b(){return o().format("YYYY-MM-DD")}function l(n,t,o){if(!o||!t){return{from:0,to:0}}const r=(n-1)*t+1;return{from:Math.max(r,1),to:Math.min(r+t-1,o)}}function w(n,t){if(!n||!t){return 0}return Math.ceil(n/t)}function B(n,t){if(!Number.isFinite(n)||n<=0){return 1}const o=Math.floor(n);return Math.min(Math.max(o,1),Math.max(t,1))}u();export{e as a,g as b,f as c,c as d,a as e,u as i,s as o,i as s};
//# sourceMappingURL=p-1a0487bb.js.map