import{r as t,c as s,h as e,H as i}from"./p-jhiFt_tX.js";import{T as a}from"./p-BnpC3RGN.js";import{H as r,u as l}from"./p-CX35S_uk.js";import{R as o}from"./p-rIgZVkqP.js";import{c as n}from"./p-CT3GgrvE.js";import"./p-BSI30sps.js";import"./p-BFTU3MAI.js";import"./p-vROPuQAY.js";import"./p-DRfRlSCW.js";const h=".sc-ir-housekeeping-h{display:block}";const c=class{constructor(e){t(this,e);this.toast=s(this,"toast");this.language="";this.ticket="";this.isLoading=false;this.roomService=new o;this.houseKeepingService=new r;this.token=new a}componentWillLoad(){if(this.ticket!==""){this.token.setToken(this.ticket);this.initializeApp()}}async handleResetData(t){t.stopImmediatePropagation();t.stopPropagation();await this.houseKeepingService.getExposedHKSetup(this.propertyid)}ticketChanged(t,s){if(t===s){return}this.token.setToken(this.ticket);this.initializeApp()}async initializeApp(){try{this.isLoading=true;let t=this.propertyid;if(!t){const s=await this.roomService.getExposedProperty({id:0,aname:this.p,language:this.language,is_backend:true,include_sales_rate_plans:true});t=s.My_Result.id}l("default_properties",{token:this.ticket,property_id:t,language:this.language});const s=[this.houseKeepingService.getExposedHKSetup(t),this.roomService.fetchLanguage(this.language,["_HK_FRONT"])];if(this.propertyid){s.unshift(this.roomService.getExposedProperty({id:t,language:this.language,is_backend:true,include_sales_rate_plans:true}))}await Promise.all(s)}catch(t){console.error(t)}finally{this.isLoading=false}}saveAutomaticCheckInCheckout(t){t.stopImmediatePropagation();t.stopPropagation();try{this.roomService.SetAutomaticCheckInOut({property_id:this.propertyid,flag:t.detail==="auto"});this.toast.emit({position:"top-right",title:"Saved Successfully",description:"",type:"success"})}catch(t){console.log(t)}}render(){if(this.isLoading){return e("ir-loading-screen",null)}return e(i,null,e("ir-interceptor",null),e("ir-toast",null),e("section",{class:"p-1"},e("h3",{class:"mb-2"},"Housekeeping & Check-In Setup"),e("div",{class:"card p-1"},e("ir-title",{borderShown:true,label:"Check-In Mode"}),e("div",{class:"d-flex align-items-center"},e("p",{class:"my-0 py-0 mr-1  "},"Check in & Check out guests automatically:"),e("ir-select",{LabelAvailable:false,showFirstOption:false,selectedValue:n.is_automatic_check_in_out?"auto":"manual",onSelectChange:t=>this.saveAutomaticCheckInCheckout(t),data:[{text:`Yes, as per the property's policy.`,value:"auto"},{text:"No, I will do it manually. ",value:"manual"}]}))),e("ir-hk-team",{class:"mb-1"})))}static get watchers(){return{ticket:["ticketChanged"]}}};c.style=h;export{c as ir_housekeeping};
//# sourceMappingURL=p-4fca6dce.entry.js.map