{"version":3,"names":["irDeparturesTableCss","IrDeparturesTableStyle0","tableCss","IrDeparturesTableStyle1","IrDeparturesTable","checkoutRoom","requestPageChange","requestPageSizeChange","renderSection","bookings","showAction","isFuture","length","rows","flatMap","booking","this","renderBookingRows","rooms","map","room","index","renderRow","rowKey","booking_nbr","identifier","isOverdueCheckout","moment","to_date","startOf","isBefore","h","class","key","origin","channelBookingNumber","channel_booking_nbr","source","bookingNumber","guest","name","overdueCheckout","checkIn","from_date","checkOut","isDirect","is_direct","statusCode","status","code","currencySymbol","currency","symbol","financial","onIrAction","e","stopImmediatePropagation","stopPropagation","emit","buttons","handlePageChange","event","detail","handlePageSizeChange","render","needsCheckOutBookings","futureRooms","outBookings","pagination","departuresStore","Host","colSpan","showing","total","pages","totalPages","pageSize","currentPage","allowPageSizeChange","pageSizes","recordLabel","locales","entries","Lcz_Bookings","onPageChange","onPageSizeChange"],"sources":["src/components/ir-departures/ir-departures-table/ir-departures-table.css?tag=ir-departures-table&encapsulation=scoped","src/common/table.css?tag=ir-departures-table&encapsulation=scoped","src/components/ir-departures/ir-departures-table/ir-departures-table.tsx"],"sourcesContent":[":host {\n  display: flex;\n  flex-direction: column;\n  border-radius: 0.5rem;\n  overflow-x: auto;\n  min-height: 60vh;\n  max-width: 1920px;\n  border: 1px solid var(--wa-color-neutral-border-quiet, #abaeb9);\n  /* border-bottom: 0; */\n}\n:host {\n  box-sizing: border-box !important;\n}\n\n:host *,\n:host *::before,\n:host *::after {\n  box-sizing: inherit !important;\n  padding: 0;\n  margin: 0;\n}\n\n[hidden] {\n  display: none !important;\n}\n:host {\n  background: white;\n}\n.table--container {\n  flex: 1 1 0%;\n}\n.departures-table__actions-cell {\n  display: flex;\n  min-width: 100px;\n  justify-content: flex-end;\n}\n\n@media (min-width: 1024px) {\n  .departures-table__actions-cell {\n    min-width: 250px;\n  }\n}\n","/* Base styles */\n.ir-table-row td {\n  padding: 0.5rem 1rem !important;\n  text-align: left;\n  z-index: 2;\n  background-color: var(--wa-color-surface-default);\n  white-space: nowrap;\n  color: var(--wa-color-text-normal);\n  box-sizing: border-box;\n  /* width: max-content;\n  max-width: max-content; */\n}\n/* .ir-table-row td:last-child {\n  width: 100%; \n}*/\n/* .ir-table-row td:first-child,\n.table thead th:first-child {\n  position: sticky;\n  left: var(--ir-table-sticky-padding,-1rem);\n} */\n.table--container {\n  flex: 1 1 0%;\n}\n.table--container {\n  overflow-x: auto;\n}\n.table td {\n  border-top: 0;\n  border-bottom: 1px solid var(--wa-color-neutral-border-quiet, #abaeb9);\n  /* border-bottom: 1px solid var(--wa-color-gray-80); */\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n}\n.table tbody tr:last-child > td {\n  border-bottom: 0 !important;\n}\n.table thead th {\n  border: none !important;\n  background: #ececec;\n  background: color-mix(in oklab, var(--wa-color-neutral-fill-quiet, #f1f2f3) 60%, transparent);\n  color: #374151;\n  padding: 0.5rem 1rem !important;\n  text-align: left;\n}\n.data-table thead th {\n  box-sizing: border-box;\n  background: var(--wa-color-surface-default) !important;\n  padding-top: 0.5rem !important;\n  padding-bottom: 0.5rem !important;\n  border-bottom: 1px solid var(--wa-color-neutral-90) !important;\n  color: var(--wa-color-text-normal);\n}\n.data-table .empty-row {\n  height: 50vh !important;\n  text-align: center;\n  color: var(--wa-color-gray-60);\n}\n\n.data-table--pagination {\n  padding: 0.5rem 1rem;\n  position: sticky;\n  bottom: 0;\n  background: var(--wa-color-surface-default);\n  border-top: 1px solid var(--wa-color-neutral-90);\n}\n\n/* Selected Rows Styles */\n\n.selected td {\n  background: #e3f3fa !important;\n}\n.selected td {\n  color: var(--gray-dark) !important;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n}\n\n/* Sorting styles */\n.sortable,\n.ir-table-row {\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n}\n.sortable {\n  text-transform: capitalize;\n}\n.sortable:hover {\n  color: #212529;\n  background-color: #e2e8f0 !important;\n  border-color: #dae0e5;\n  cursor: pointer;\n}\n.ir-table-row:hover td {\n  background: #e2e6ea3f !important;\n  background: var(--wa-color-neutral-fill-quiet, #f1f2f3) !important;\n}\n.sortable:active {\n  color: #212529;\n  background-color: #e2e8f0;\n  border-color: #d3d9df;\n}\n.sortable svg {\n  color: var(--blue);\n}\n/* .action-row {\n  position: sticky;\n  right:var(--ir-table-sticky-padding,-1rem);\n} */\n.sticky-column {\n  position: sticky !important;\n  right: 0;\n  background-color: white;\n}\n","import type { PaginationChangeEvent } from '@/components/ir-pagination/ir-pagination';\nimport { Booking } from '@/models/booking.dto';\nimport { departuresStore } from '@/stores/departures.store';\nimport locales from '@/stores/locales.store';\nimport { Component, Event, EventEmitter, Host, h } from '@stencil/core';\nimport moment from 'moment';\nexport type CheckoutRoomEvent = {\n  booking: Booking;\n  identifier: string;\n};\n@Component({\n  tag: 'ir-departures-table',\n  styleUrls: ['ir-departures-table.css', '../../../common/table.css'],\n  scoped: true,\n})\nexport class IrDeparturesTable {\n  @Event() checkoutRoom: EventEmitter<CheckoutRoomEvent>;\n  @Event() requestPageChange: EventEmitter<PaginationChangeEvent>;\n  @Event() requestPageSizeChange: EventEmitter<PaginationChangeEvent>;\n\n  private renderSection({ bookings, showAction = false, isFuture = false }: { bookings: Booking[]; showAction?: boolean; isFuture?: boolean }) {\n    if (!bookings?.length) {\n      return null;\n    }\n\n    const rows = bookings.flatMap(booking => this.renderBookingRows({ booking, showAction, isFuture }));\n    return [...rows];\n  }\n\n  private renderBookingRows({ booking, isFuture, showAction }: { booking: Booking; showAction?: boolean; isFuture?: boolean }) {\n    return (booking.rooms ?? []).map((room, index) => this.renderRow(booking, room, index, showAction, isFuture));\n  }\n\n  private renderRow(booking: Booking, room: Booking['rooms'][number], index: number, showAction: boolean, isFuture) {\n    const rowKey = `${booking.booking_nbr}-${room?.identifier ?? index}`;\n    const isOverdueCheckout = moment(room.to_date, 'YYYY-MM-DD').startOf('day').isBefore(moment().startOf('day'));\n    return (\n      <tr class=\"ir-table-row\" key={rowKey}>\n        <td class=\"sticky-column\">\n          <ir-booking-number-cell\n            origin={booking.origin}\n            channelBookingNumber={booking.channel_booking_nbr}\n            source={booking.source}\n            bookingNumber={booking.booking_nbr}\n          ></ir-booking-number-cell>\n        </td>\n        <td>\n          <ir-booked-by-cell guest={booking.guest}></ir-booked-by-cell>\n        </td>\n        <td>\n          <ir-guest-name-cell name={room.guest}></ir-guest-name-cell>\n        </td>\n        <td>\n          <ir-unit-cell room={room}></ir-unit-cell>\n        </td>\n        <td>\n          <ir-dates-cell overdueCheckout={isOverdueCheckout} checkIn={room.from_date} checkOut={room.to_date}></ir-dates-cell>\n        </td>\n        <td class=\"text-right\">\n          <ir-balance-cell\n            bookingNumber={booking.booking_nbr}\n            isDirect={booking.is_direct}\n            statusCode={booking.status.code}\n            currencySymbol={booking.currency.symbol}\n            financial={booking.financial}\n          ></ir-balance-cell>\n        </td>\n        <td>\n          <div class=\"departures-table__actions-cell\">\n            {showAction ? (\n              <ir-actions-cell\n                onIrAction={e => {\n                  e.stopImmediatePropagation();\n                  e.stopPropagation();\n                  this.checkoutRoom.emit({\n                    booking: booking,\n                    identifier: room.identifier,\n                  });\n                }}\n                buttons={isOverdueCheckout ? ['overdue_check_out'] : ['check_out']}\n              ></ir-actions-cell>\n            ) : isFuture ? (\n              ''\n            ) : (\n              'In-house'\n            )}\n          </div>\n        </td>\n      </tr>\n    );\n  }\n\n  private handlePageChange(event: CustomEvent<PaginationChangeEvent>) {\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n    this.requestPageChange.emit(event.detail);\n  }\n\n  private handlePageSizeChange(event: CustomEvent<PaginationChangeEvent>) {\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n    this.requestPageSizeChange.emit(event.detail);\n  }\n\n  render() {\n    const { needsCheckOutBookings, futureRooms, outBookings, pagination } = departuresStore;\n    return (\n      <Host>\n        <div class=\"table--container\">\n          <table class=\"table data-table\">\n            <thead>\n              <tr>\n                <th>\n                  <span class={'departures-table__departure__cell'}>Booking#</span>\n                </th>\n                <th>\n                  <div>\n                    <p>Booked by</p>\n                  </div>\n                </th>\n                <th>Guest name</th>\n                <th>Unit</th>\n                <th>Dates</th>\n                <th class=\"text-center\">Balance</th>\n                <th></th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.renderSection({ bookings: futureRooms, isFuture: true })}\n              {this.renderSection({ bookings: needsCheckOutBookings, showAction: true })}\n              {this.renderSection({ bookings: outBookings })}\n              {!needsCheckOutBookings.length && !outBookings.length && (\n                <tr>\n                  <td colSpan={7} class=\"empty-row\">\n                    <ir-empty-state></ir-empty-state>\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n        {(needsCheckOutBookings.length > 0 || outBookings.length > 0 || futureRooms.length > 0) && (\n          <ir-pagination\n            class=\"data-table--pagination\"\n            showing={pagination.showing}\n            total={pagination.total}\n            pages={pagination.totalPages}\n            pageSize={pagination.pageSize}\n            currentPage={pagination.currentPage}\n            allowPageSizeChange={false}\n            pageSizes={[pagination.pageSize]}\n            recordLabel={locales.entries?.Lcz_Bookings ?? 'Bookings'}\n            onPageChange={event => this.handlePageChange(event as CustomEvent<PaginationChangeEvent>)}\n            onPageSizeChange={event => this.handlePageSizeChange(event as CustomEvent<PaginationChangeEvent>)}\n          ></ir-pagination>\n        )}\n      </Host>\n    );\n  }\n}\n"],"mappings":"6RAAA,MAAMA,EAAuB,i0BAC7B,MAAAC,EAAeD,ECDf,MAAME,EAAW,kyFACjB,MAAAC,EAAeD,E,MCcFE,EAAiB,M,sLACnBC,aACAC,kBACAC,sBAED,aAAAC,EAAcC,SAAEA,EAAQC,WAAEA,EAAa,MAAKC,SAAEA,EAAW,QAC/D,IAAKF,GAAUG,OAAQ,CACrB,OAAO,I,CAGT,MAAMC,EAAOJ,EAASK,SAAQC,GAAWC,KAAKC,kBAAkB,CAAEF,UAASL,aAAYC,eACvF,MAAO,IAAIE,E,CAGL,iBAAAI,EAAkBF,QAAEA,EAAOJ,SAAEA,EAAQD,WAAEA,IAC7C,OAAQK,EAAQG,OAAS,IAAIC,KAAI,CAACC,EAAMC,IAAUL,KAAKM,UAAUP,EAASK,EAAMC,EAAOX,EAAYC,I,CAG7F,SAAAW,CAAUP,EAAkBK,EAAgCC,EAAeX,EAAqBC,GACtG,MAAMY,EAAS,GAAGR,EAAQS,eAAeJ,GAAMK,YAAcJ,IAC7D,MAAMK,EAAoBC,EAAOP,EAAKQ,QAAS,cAAcC,QAAQ,OAAOC,SAASH,IAASE,QAAQ,QACtG,OACEE,EAAA,MAAIC,MAAM,eAAeC,IAAKV,GAC5BQ,EAAA,MAAIC,MAAM,iBACRD,EAAA,0BACEG,OAAQnB,EAAQmB,OAChBC,qBAAsBpB,EAAQqB,oBAC9BC,OAAQtB,EAAQsB,OAChBC,cAAevB,EAAQS,eAG3BO,EAAA,UACEA,EAAA,qBAAmBQ,MAAOxB,EAAQwB,SAEpCR,EAAA,UACEA,EAAA,sBAAoBS,KAAMpB,EAAKmB,SAEjCR,EAAA,UACEA,EAAA,gBAAcX,KAAMA,KAEtBW,EAAA,UACEA,EAAA,iBAAeU,gBAAiBf,EAAmBgB,QAAStB,EAAKuB,UAAWC,SAAUxB,EAAKQ,WAE7FG,EAAA,MAAIC,MAAM,cACRD,EAAA,mBACEO,cAAevB,EAAQS,YACvBqB,SAAU9B,EAAQ+B,UAClBC,WAAYhC,EAAQiC,OAAOC,KAC3BC,eAAgBnC,EAAQoC,SAASC,OACjCC,UAAWtC,EAAQsC,aAGvBtB,EAAA,UACEA,EAAA,OAAKC,MAAM,kCACRtB,EACCqB,EAAA,mBACEuB,WAAYC,IACVA,EAAEC,2BACFD,EAAEE,kBACFzC,KAAKX,aAAaqD,KAAK,CACrB3C,QAASA,EACTU,WAAYL,EAAKK,YACjB,EAEJkC,QAASjC,EAAoB,CAAC,qBAAuB,CAAC,eAEtDf,EAAQ,GACR,a,CAUN,gBAAAiD,CAAiBC,GACvBA,EAAML,2BACNK,EAAMJ,kBACNzC,KAAKV,kBAAkBoD,KAAKG,EAAMC,O,CAG5B,oBAAAC,CAAqBF,GAC3BA,EAAML,2BACNK,EAAMJ,kBACNzC,KAAKT,sBAAsBmD,KAAKG,EAAMC,O,CAGxC,MAAAE,GACE,MAAMC,sBAAEA,EAAqBC,YAAEA,EAAWC,YAAEA,EAAWC,WAAEA,GAAeC,EACxE,OACEtC,EAACuC,EAAI,CAAArC,IAAA,4CACHF,EAAA,OAAAE,IAAA,2CAAKD,MAAM,oBACTD,EAAA,SAAAE,IAAA,2CAAOD,MAAM,oBACXD,EAAA,SAAAE,IAAA,4CACEF,EAAA,MAAAE,IAAA,4CACEF,EAAA,MAAAE,IAAA,4CACEF,EAAA,QAAAE,IAAA,2CAAMD,MAAO,qCAAmC,aAElDD,EAAA,MAAAE,IAAA,4CACEF,EAAA,OAAAE,IAAA,4CACEF,EAAA,KAAAE,IAAA,2DAGJF,EAAA,MAAAE,IAAA,0DACAF,EAAA,MAAAE,IAAA,oDACAF,EAAA,MAAAE,IAAA,qDACAF,EAAA,MAAAE,IAAA,2CAAID,MAAM,eAAa,WACvBD,EAAA,MAAAE,IAAA,+CAGJF,EAAA,SAAAE,IAAA,4CACGjB,KAAKR,cAAc,CAAEC,SAAUyD,EAAavD,SAAU,OACtDK,KAAKR,cAAc,CAAEC,SAAUwD,EAAuBvD,WAAY,OAClEM,KAAKR,cAAc,CAAEC,SAAU0D,KAC9BF,EAAsBrD,SAAWuD,EAAYvD,QAC7CmB,EAAA,MAAAE,IAAA,4CACEF,EAAA,MAAAE,IAAA,2CAAIsC,QAAS,EAAGvC,MAAM,aACpBD,EAAA,kBAAAE,IAAA,mDAOVgC,EAAsBrD,OAAS,GAAKuD,EAAYvD,OAAS,GAAKsD,EAAYtD,OAAS,IACnFmB,EAAA,iBAAAE,IAAA,2CACED,MAAM,yBACNwC,QAASJ,EAAWI,QACpBC,MAAOL,EAAWK,MAClBC,MAAON,EAAWO,WAClBC,SAAUR,EAAWQ,SACrBC,YAAaT,EAAWS,YACxBC,oBAAqB,MACrBC,UAAW,CAACX,EAAWQ,UACvBI,YAAaC,EAAQC,SAASC,cAAgB,WAC9CC,aAAcvB,GAAS7C,KAAK4C,iBAAiBC,GAC7CwB,iBAAkBxB,GAAS7C,KAAK+C,qBAAqBF,K","ignoreList":[]}