import{r as e,h as t,H as i,c as a,F as r,g as o}from"./p-acddcbeb.js";import{b as n,m as s,B as l,c,r as d,a as h,d as u,u as p,g as f,Z as b}from"./p-dff15312.js";import{l as g,c as m}from"./p-867e3ee1.js";import{i as w,c as y}from"./p-58b5d957.js";import{f as v,e as k,h as x,g as _,d as D,i as C,c as M,a as S,t as Y,b as E,j as T,k as I,z,l as O,m as A,n as B,o as R,p as P,Z as N,q as L,r as F,v as H,s as U,u as j,w as V,x as G,y as q,A as K,B as W,C as X,D as J,E as Q,F as Z,G as ee,H as te,I as ie,J as ae,K as re,L as oe,M as ne,N as se,O as le,P as ce,Q as de,R as he,S as ue}from"./p-bfcb4bca.js";import{v as pe}from"./p-4ed69de7.js";import{h as fe}from"./p-6c4ba7c0.js";import{i as be,a as ge}from"./p-9742b06d.js";import{T as me}from"./p-f8b7c0cd.js";import{R as we}from"./p-ad82d7d1.js";import{a as ye}from"./p-bf44a732.js";import{H as ve,h as ke,g as xe,u as _e}from"./p-c514eeee.js";import{c as De,i as Ce}from"./p-834ed596.js";import{_ as Me,a as Se,b as Ye}from"./p-b2679b77.js";import{P as Ee,B as Te,u as Ie,b as ze,s as Oe,o as Ae,a as Be,c as Re,d as Pe,i as Ne}from"./p-14a3d00a.js";import{c as Le}from"./p-0462f723.js";import{M as $e,I as Fe}from"./p-74ecaeca.js";class He{formatVariationBasedOnInfants(e){const t=this.getVariationBasedOnInfants(e);return this.formatVariation(t,e.infants)}calculateVariationAmount(e){return this.getVariationBasedOnInfants(e)?.discounted_amount||0}getVariationBasedOnInfants({variations:e,baseVariation:t,infants:i}){const{adult_nbr:a,child_nbr:r}=t;return e.find((e=>e.adult_nbr===a&&e.child_nbr===Math.max(0,r-Math.max(0,i))))||t}formatVariation({child_nbr:e,adult_nbr:t},i){const a=Number(t)||0;const r=Math.max(Number(i)||0,0);const o=a>1?g.entries.Lcz_Adults.toLowerCase():g.entries.Lcz_Adult.toLowerCase();const n=e>1?g.entries.Lcz_Children.toLowerCase():g.entries.Lcz_Child.toLowerCase();const s=r>1?(g.entries["Lcz_Infants"]??"infants")?.toLowerCase():(g?.entries["Lcz_Infant"]??"infant")?.toLowerCase();const l=[`${a} ${o}`,e?`${e} ${n}`:"",r?`${r} ${s}`:""];return l.filter(Boolean).join("&nbsp&nbsp&nbsp&nbsp")}}const Ue=".sc-igl-application-info-h{display:block}.rate_amount.sc-igl-application-info{display:none;padding:0;margin:0}.booking-header.sc-igl-application-info{display:flex;align-items:center;justify-content:space-between;margin-bottom:0.5rem;gap:0.5rem}.non-ref-span.sc-igl-application-info{font-size:12px;color:var(--green)}.booking-roomtype-title.sc-igl-application-info{font-size:1.25rem;margin-right:0.5rem;margin:0;padding:0}.booking-details-container.sc-igl-application-info{display:flex;align-items:center;justify-content:space-between;padding:0;margin:0}.booking-rateplan.sc-igl-application-info{display:flex;align-items:center;gap:0.5rem;margin:0;padding:0}.booking-rateplan-name.sc-igl-application-info{font-weight:bold;margin:0;padding:0}.booking-tooltip.sc-igl-application-info{margin-right:0.5rem;margin:0;padding:0}.booking-variation.sc-igl-application-info{margin:0;padding:0}.booking-price.sc-igl-application-info{margin:0;padding:0}.booking-footer.sc-igl-application-info{display:flex;align-items:center;justify-content:space-between;padding:0;margin-bottom:0.5rem}.booking-details-container.sc-igl-application-info{display:none}@media (min-width: 768px){.booking-header.sc-igl-application-info{justify-content:flex-start}.booking-footer.sc-igl-application-info,.booking-price.sc-igl-application-info{display:none}.booking-details-container.sc-igl-application-info,.rate_amount.sc-igl-application-info{display:inline-flex;gap:0.5rem}}@media only screen and (min-width: 908px){.aplicationInfoContainer.sc-igl-application-info{max-width:100%}.guest-info-container.sc-igl-application-info,.bed-preference-container.sc-igl-application-info,.unit-select-container.sc-igl-application-info{max-width:250px}}";const je=Ue;const Ve=class{constructor(t){e(this,t)}rateplanSelection;guestInfo;currency;bedPreferenceType=[];bookingType="PLUS_BOOKING";roomIndex;totalNights=1;baseData;isButtonPressed=false;variationService=new He;componentWillLoad(){if(w(this.rateplanSelection.roomtype.id)){const e=this.filterRooms();if(e.length>0)this.updateGuest({unit:e[0]?.id?.toString()})}}updateGuest(e){const t=this.rateplanSelection.roomtype.id;const i=this.rateplanSelection.ratePlan.id;let a=[...this.rateplanSelection.guest];a[this.roomIndex]={...a[this.roomIndex],...e};n.ratePlanSelections={...n.ratePlanSelections,[t]:{...n.ratePlanSelections[t],[i]:{...this.rateplanSelection,guest:[...a]}}}}handleButtonClicked(e){switch(e.detail.key){case"book":case"bookAndCheckIn":case"save":this.isButtonPressed=true;break}}getTooltipMessages(){const{ratePlan:e,selected_variation:t}=this.rateplanSelection;let i=t;if(this.guestInfo?.infant_nbr){i=this.variationService.getVariationBasedOnInfants({variations:e.variations,baseVariation:t,infants:this.guestInfo?.infant_nbr})}if(!i)return;const a=e.variations?.find((e=>e.adult_nbr===i.adult_nbr&&e.child_nbr===i.child_nbr));if(!a)return;const r=a.applicable_policies?.find((e=>e.type==="cancelation"))?.combined_statement;const o=a.applicable_policies?.find((e=>e.type==="guarantee"))?.combined_statement;let n="";if(r){n+=`<b><u>Cancellation:</u></b> ${r}<br/>`}if(o){n+=`<b><u>Guarantee:</u></b> ${o}`}return n||undefined}getAmount(){if(this.rateplanSelection.is_amount_modified){return this.rateplanSelection.view_mode==="001"?this.rateplanSelection.rp_amount:this.rateplanSelection.rp_amount*this.totalNights}let e=this.rateplanSelection.selected_variation;if(this.guestInfo?.infant_nbr){e=this.variationService.getVariationBasedOnInfants({variations:this.rateplanSelection.ratePlan.variations,baseVariation:this.rateplanSelection.selected_variation,infants:this.guestInfo?.infant_nbr})}return e.discounted_gross_amount}filterRooms(){const e=[];if(!y.is_frontdesk_enabled){return e}this.rateplanSelection.ratePlan?.assignable_units?.forEach((t=>{if(t.Is_Fully_Available){e.push({name:t.name,id:t.pr_id})}}));const t=this.rateplanSelection.guest.filter(((e,t)=>t!==this.roomIndex)).map((e=>e.unit));const i=e.filter((e=>!t.includes(e.id.toString())));return this.bookingType==="EDIT_BOOKING"?[...i,this.rateplanSelection.roomtype.id===this.baseData?.roomtypeId?this.baseData?.unit:null].filter((e=>!!e)).sort(((e,t)=>e.name.localeCompare(t.name))):i}render(){const e=this.filterRooms();const a=this.variationService.formatVariationBasedOnInfants({baseVariation:this.rateplanSelection.selected_variation,infants:this.guestInfo.infant_nbr,variations:this.rateplanSelection.ratePlan.variations});return t(i,{key:"c2e6990bc5b1a9b23c772d9e46d21294a84e8207",class:"my-2","data-testid":`room_info_${this.rateplanSelection.ratePlan.id}`},t("div",{key:"779e7b24b1601af26f9a10a2f8f8517d8b8ec05e",class:"booking-header"},(this.bookingType==="PLUS_BOOKING"||this.bookingType==="ADD_ROOM"||this.bookingType==="EDIT_BOOKING")&&t("span",{key:"9413ec7854a9a250c865ddd3114915ef8355f295",class:"booking-roomtype-title"},this.rateplanSelection.roomtype.name),t("div",{key:"e21bad842a4367efaac9163025cbbee1f7d39c42",class:"booking-details-container"},t("div",{key:"3ae85e6eefc1dfcd6c55309c57486fd62438d889",class:"booking-rateplan"},t("p",{key:"d83ad1e3cf500c0a776f60ae9cddff5625f90bad",class:"booking-rateplan-name"},this.rateplanSelection.ratePlan.short_name," ",this.rateplanSelection.ratePlan.is_non_refundable&&t("span",{key:"7ac90960fc99a44a8f1cb5c59c87405ad4039a6d",class:"non-ref-span"},"Non Refundable")),t("ir-tooltip",{key:"6da870274f38f4054412cbbc468c8a19a07b3e2f",class:"booking-tooltip",message:this.getTooltipMessages()})),t("p",{key:"9c596af7f6e9c7842df2d40e99ae495d73d6b5bd",class:"booking-variation",innerHTML:a})),t("p",{key:"2f93367f79053cf4faa1634683e854b5d7f6abd5",class:"booking-price"},v(this.currency?.symbol,this.getAmount()),"/",g.entries.Lcz_Stay)),t("div",{key:"ff536acaaf193208e9c706d1084ffef7822ba9ce",class:"booking-footer"},t("div",{key:"cf27f327b52def68e08ccb9dd676d42b9e963bcc",class:"booking-rateplan"},t("p",{key:"c018565c86afe4e94ac0822700e2c47fd4244da3",class:"booking-rateplan-name"},this.rateplanSelection.ratePlan.short_name),t("ir-tooltip",{key:"a9d325e9c60f56361086db51abc991cb9405beb7",class:"booking-tooltip",message:this.getTooltipMessages()})),t("p",{key:"7c10925bf6db5a6f19957440979248e4f4f16a3c",class:"booking-variation",innerHTML:a})),t("div",{key:"f84fd00de39ccc7d79e19c2fc14e327aa7d43daf",class:"d-flex flex-column flex-md-row  p-0 align-items-md-center aplicationInfoContainer"},t("div",{key:"1e10e9df662500845daa3f926990916c6f1b1ec1",class:"mr-md-1 mb-1 mb-md-0 flex-fill guest-info-container"},t("input",{key:"bbea675012e784caaf8c13dc61a029b359ae7419",id:pe(),type:"text","data-testid":"guest_first_name",class:`form-control ${this.isButtonPressed&&this.guestInfo?.first_name===""&&"border-danger"}`,placeholder:g.entries["Lcz_GuestFirstname"]??"Guest first name",name:"guestFirstName",onInput:e=>{const t=e.target.value;this.updateGuest({first_name:t});if(n.event_type.type==="EDIT_BOOKING"){s("guest",{...n.guest,name:t})}},required:true,value:this.guestInfo?.first_name})),t("div",{key:"a8533ca5ae1ffc24e16d14f3fcedd54cb9f97aa2",class:"mr-md-1 flex-fill guest-info-container"},t("input",{key:"2be1ff3eb86b45b34715b413bbfd0bd85a39a4b9",id:pe(),type:"text",class:`form-control ${this.isButtonPressed&&this.guestInfo?.last_name===""&&"border-danger"}`,placeholder:g.entries["Lcz_GuestLastname"]??"Guest last name",name:"guestLastName","data-testid":"guest_last_name",onInput:e=>{const t=e.target.value;this.updateGuest({last_name:t});if(n.event_type.type==="EDIT_BOOKING"){s("guest",{...n.guest,name:t})}},required:true,value:this.guestInfo?.last_name})),y.is_frontdesk_enabled&&!w(this.rateplanSelection.roomtype.id)&&(this.bookingType==="PLUS_BOOKING"||this.bookingType==="ADD_ROOM"||this.bookingType==="EDIT_BOOKING")&&t("div",{key:"0a1574ea65808b33b9ddd37e9a021e9ac84c9e27",class:"mt-1 mt-md-0 d-flex align-items-center flex-fill"},t("div",{key:"f8de9317fb4f53198c60b1c407f758d10d296933",class:"mr-md-1 p-0 flex-fill preference-select-container"},t("select",{key:"bb9dec41b4a2f9981d05c6c272a418c7a819e57c","data-testid":"unit",class:"form-control input-sm pr-0",id:pe(),onChange:e=>this.updateGuest({unit:e.target.value})},t("option",{key:"0a557d3694a70882974bb938f5990e81a8be54f5",value:"",selected:this.guestInfo?.unit===""},g.entries.Lcz_Assignunits),e?.map((e=>t("option",{value:e.id,selected:this.guestInfo?.unit===e.id.toString()},e.name)))))),this.rateplanSelection.roomtype.is_bed_configuration_enabled&&t("div",{key:"88ba07e29d081c9d3f4bd68f5917d9162c0e695f",class:"mt-1 mt-md-0 mr-md-1 flex-fill"},t("select",{key:"7d951c52398b59c459a906d41343e577d5bab15c","data-testid":"bed_configuration",class:`form-control input-sm ${this.isButtonPressed&&this.guestInfo?.bed_preference===""&&"border-danger"}`,id:pe(),onChange:e=>this.updateGuest({bed_preference:e.target.value})},t("option",{key:"d7c9c13700a258bacaf642dbfc5b412271fe0231",value:"",selected:this.guestInfo?.bed_preference===""},g.entries.Lcz_BedConfiguration),this.bedPreferenceType.map((e=>t("option",{value:e.CODE_NAME,selected:this.guestInfo?.bed_preference===e.CODE_NAME},e.CODE_VALUE_EN))))),t("p",{key:"c521cc7c13e431fe5ac53f71d864076ae982b3c0",class:"rate_amount"},v(this.currency?.symbol,this.getAmount()),"/",g.entries.Lcz_Stay)),this.rateplanSelection.selected_variation.child_nbr>0&&t("div",{key:"5740ea5e80e091c1ec66d860190514f8b102ca93",style:{gap:"0.5rem",marginTop:"0.5rem"},class:"d-flex  flex-row  p-0 align-items-center aplicationInfoContainer"},t("p",{key:"907b649671cf26d174569bd604a08aee87380759",class:"m-0 p-0 text-danger"},"Any of the children below 3 years?"),t("div",{key:"44b36c047bbd72f5dd410b46984b5b8974a5af01",class:"mr-1 flex-fill"},t("select",{key:"fb1d00c81f68117c704f03ddbd544892995b3221",class:`form-control input-sm ${this.isButtonPressed&&this.guestInfo?.bed_preference===""&&"border-danger"}`,id:pe(),style:{width:"max-content"},onChange:e=>this.updateGuest({infant_nbr:Number(e.target.value)})},t("option",{key:"588a3ecbd7fea6568141e36d5e6036b2eef6daff",value:"",selected:Number(this.guestInfo?.infant_nbr)===0},g.entries["No"]||"No"),Array.from({length:this.rateplanSelection.selected_variation.child_nbr},((e,t)=>t+1)).map((e=>t("option",{value:e,selected:this.guestInfo?.infant_nbr===e},e)))))))}};Ve.style=je;const Ge=".sc-igl-block-dates-view-h{display:block}.sc-igl-block-dates-view-h .controlContainer.sc-igl-block-dates-view{width:24px}.sc-igl-block-dates-view-h .checkBoxContainer.sc-igl-block-dates-view input.sc-igl-block-dates-view{height:1.2rem !important;width:30px}.releaseTime.sc-igl-block-dates-view{padding-left:5px}.out-of-service-label.sc-igl-block-dates-view{margin-left:5px !important}";const qe=Ge;const Ke=class{constructor(t){e(this,t);this.dataUpdateEvent=a(this,"dataUpdateEvent",7)}defaultData;fromDate;toDate;entryDate;entryHour;isEventHover=false;entryMinute;renderAgain=false;dataUpdateEvent;blockDatesData={RELEASE_AFTER_HOURS:0,OPTIONAL_REASON:"",OUT_OF_SERVICE:false};releaseList=[];bookingService=new l;async componentWillLoad(){try{this.releaseList=await this.bookingService.getBlockedInfo();if(this.defaultData){this.blockDatesData={...this.defaultData}}else{this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(this.releaseList[0].CODE_NAME);this.emitData()}}catch(e){}}handleOptionalReason(e){this.blockDatesData.OPTIONAL_REASON=e.target.value;this.emitData()}handleReleaseAfterChange(e){if(this.entryDate)this.entryDate=undefined;this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(e.target.value);this.renderPage();this.emitData()}emitData(){this.dataUpdateEvent.emit({key:"blockDatesData",data:{...this.blockDatesData}})}getReleaseHoursString(){let e=this.entryDate?new Date(this.entryDate):new Date;if(this.entryDate&&this.entryHour&&this.entryMinute){e.setHours(this.entryHour,this.entryMinute,0,0)}else{e.setHours(e.getHours()+this.blockDatesData.RELEASE_AFTER_HOURS,e.getMinutes(),0,0)}return e.toLocaleString("default",{month:"short"})+" "+e.getDate()+", "+this.formatNumber(e.getHours())+":"+this.formatNumber(e.getMinutes())}formatNumber(e){return e<10?`0${e}`:e}handleOutOfService(e){this.blockDatesData.OUT_OF_SERVICE=e.target.checked;if(this.blockDatesData.OUT_OF_SERVICE){this.blockDatesData.OPTIONAL_REASON="";this.blockDatesData.RELEASE_AFTER_HOURS=0}this.renderPage();this.emitData()}renderPage(){this.renderAgain=!this.renderAgain}render(){console.log({fromDate:this.fromDate,toDate:this.toDate});return t(i,{key:"101274b1aed5b38211ad6a63b65c4b981beee983"},t("div",{key:"f1f84447fbceb879ae7164d033c0a612ab8ae271",class:`m-0 p-0 mb-1`},t("div",{key:"757a09a24b5b2bc3754f54caf9f6200bfa449775",class:"text-left p-0"},t("ir-date-view",{key:"655587d76b6421316e5b827a70388437da039e42",from_date:this.fromDate,dateOption:"YYYY-MM-DD",showDateDifference:false,to_date:this.toDate}))),t("div",{key:"98585f2a06c1c911e2e5c0a30ecace87b7a927f8",class:` mb-1 text-left ${this.isEventHover&&"p-0"}`},t("div",{key:"c3de8500dfbd76244136b0b6cfcd73bb74f674c2",class:"mb-1 "},t("label",{key:"aed962c6c8345b4e74a20d1c8328bae7290851ab",class:"p-0 text-bold-700 font-medium-1 m-0 align-middle"},g.entries.Lcz_Reason,":"),t("div",{key:"0c9110b18022f1c7062230fc9d46c062f407571c",class:"p-0 m-0 pr-1  controlContainer checkBoxContainer d-inline-block align-middle"},t("input",{key:"d5a603661f60334e8b012a83bcbc2d405cadb0d0",class:"form-control",type:"checkbox",checked:this.blockDatesData.OUT_OF_SERVICE,id:"userinput6",onChange:e=>this.handleOutOfService(e)})),t("span",{key:"919e4741f836cbfd8fe90d555a0850d656e952b7",class:"align-middle out-of-service-label"},g.entries.Lcz_OutOfservice)),!this.blockDatesData.OUT_OF_SERVICE?t("div",null,t("div",{class:"mb-1 d-flex  align-items-center"},t("span",{class:"align-middle"},g.entries.Lcz_Or," "),t("div",{class:"d-inline-flex col pr-0 align-middle"},t("input",{class:"form-control",type:"text",placeholder:g.entries.Lcz_OptionalReason,id:"optReason",value:this.blockDatesData.OPTIONAL_REASON,onInput:e=>this.handleOptionalReason(e)}))),t("div",{class:"mb-1 w-100 pr-0 "},t("span",{class:"text-bold-700 font-medium-1"},g.entries.Lcz_AutomaticReleaseIn,": "),t("div",{class:"d-inline-block"},t("select",{class:"form-control input-sm",id:"zSmallSelect",onChange:e=>this.handleReleaseAfterChange(e)},this.releaseList.map((e=>t("option",{value:+e.CODE_NAME,selected:Number(this.blockDatesData.RELEASE_AFTER_HOURS)==Number(e.CODE_NAME)},e.CODE_VALUE_EN))))),this.blockDatesData.RELEASE_AFTER_HOURS?t("div",{class:"d-inline-block releaseTime"},t("em",null,g.entries.Lcz_On," ",this.getReleaseHoursString())):null)):null))}};Ke.style=qe;class We{variationService;setBookingInfoFromAutoComplete(e,t){e.bookedByInfoData={id:t.guest.id,email:t.guest.email,firstName:t.guest.first_name,lastName:t.guest.last_name,countryId:t.guest.country_id,isdCode:t.guest?.country_phone_prefix??t.guest?.country_id.toString(),contactNumber:t.guest.mobile,selectedArrivalTime:t.arrival,emailGuest:t.guest.subscribe_to_news_letter,message:t.remark,cardNumber:"",cardHolderName:"",expiryMonth:"",expiryYear:"",bookingNumber:t.booking_nbr,rooms:t.rooms,from_date:t.from_date,to_date:t.to_date}}resetRoomsInfoAndMessage(e){e.defaultData.roomsInfo=[];e.message=""}onDataRoomUpdate(e,t,i,a,r){let o=t;const{data:n,key:s,changedKey:l}=e.detail;const c=`c_${n.roomCategoryId}`;const d=`p_${n.ratePlanId}`;if(this.shouldClearData(s)){o=new Map}this.initializeRoomCategoryIfNeeded(c,o);if(a){if(l==="rate"){if(o.has(c)&&o.get(c).has(d)){this.applyBookingEditToSelectedRoom(c,d,n,o,r,i)}}else{if(l!=="rateType"){if(l==="adult_child_offering"){if(o.has(c)&&t.get(c).has(d)){this.applyBookingEditToSelectedRoom(c,d,n,o,r,i)}}else{this.applyBookingEditToSelectedRoom(c,d,n,o,r,i)}}}}else{this.setSelectedRoomData(c,d,n,o)}this.cleanupEmptyData(c,o);return o}shouldClearData(e){return e==="clearData"||e==="EDIT_BOOKING"}initializeRoomCategoryIfNeeded(e,t){if(!t.has(e)){t.set(e,new Map)}}setSelectedRoomData(e,t,i,a){let r=a.get(e);if(i.totalRooms===0||i.inventory===0){r.delete(t)}else{a.set(e,r.set(t,{...i,selectedUnits:Array(i.totalRooms).fill(-1)}))}}cleanupEmptyData(e,t){if(t.has(e)){let i=t.get(e);if(i.size===0){t.delete(e)}}}applyBookingEditToSelectedRoom(e,t,i,a,r,o){a.clear();let n={};if(o){n={...i,guestName:r||"",roomId:""}}else{n={...i}}a.set(e,(new Map).set(t,n))}calculateAmount({is_amount_modified:e,selected_variation:t,view_mode:i,rp_amount:a}){const r=t.nights.length;if(e){return i==="002"?a:a/r}}generateDailyRates(e,t){let i=e.selected_variation;const a=e.is_amount_modified?this.calculateAmount(e):null;if(e.guest[t].infant_nbr>0&&!e.is_amount_modified){if(!this.variationService){this.variationService=new He}i=this.variationService.getVariationBasedOnInfants({variations:e.ratePlan.variations,baseVariation:e.selected_variation,infants:e.guest[t].infant_nbr})}return i.nights.map((e=>({date:e.night,amount:a??e.discounted_amount,cost:null})))}getBookedRooms({check_in:e,check_out:t,notes:i,identifier:a,override_unit:r,unit:o,auto_check_in:s}){const l=[];for(const c in n.ratePlanSelections){const d=n.ratePlanSelections[c];for(const n in d){const c=d[n];if(c.reserved>0){for(let n=0;n<c.reserved;n++){const{first_name:d,last_name:h}=c.guest[n];l.push({identifier:a,roomtype:c.roomtype,rateplan:c.ratePlan,prepayment_amount_gross:0,unit:r?{id:o}:c.guest[n].unit?{id:c.guest[n].unit}:null,occupancy:{adult_nbr:c.selected_variation.adult_nbr,children_nbr:Number(c.selected_variation.child_nbr??0)-Math.max(Number(c.guest[n].infant_nbr??0),0),infant_nbr:c.guest[n].infant_nbr},bed_preference:c.guest[n].bed_preference,from_date:fe(e).format("YYYY-MM-DD"),to_date:fe(t).format("YYYY-MM-DD"),notes:i,check_in:s,days:this.generateDailyRates(c,n),guest:{email:null,first_name:d,last_name:h,country_id:null,city:null,mobile:null,address:null,dob:null,subscribe_to_news_letter:null,cci:null}})}}}}return l}async prepareBookUserServiceParams({context:e,sourceOption:t,check_in:i}){try{if(!e||!e.dateRangeData){throw new Error("Invalid context: Missing date range data.")}const a=new Date(e.dateRangeData.fromDate);const r=new Date(e.dateRangeData.toDate);const o=(t=null,i=false)=>this.getBookedRooms({check_in:a,check_out:r,identifier:t,notes:"",override_unit:e.isEventType("BAR_BOOKING")?true:false,unit:e.isEventType("BAR_BOOKING")?e.bookingData.PR_ID:null,auto_check_in:i});const s=({pickup_info:e,extra_services:t,is_direct:i,is_in_loyalty_mode:a,promo_key:r,extras:o,...n},s)=>({assign_units:true,is_pms:true,is_direct:i,is_backend:true,is_in_loyalty_mode:a,promo_key:r,extras:o,booking:{...n,rooms:s},extra_services:t,pickup_info:e});let l=null;console.log({event_type:e.defaultData.event_type,defaultData:e.defaultData});switch(e.defaultData.event_type){case"EDIT_BOOKING":{const{booking:t,currentRoomType:i}=e.defaultData;const a=t.rooms.filter((e=>e.identifier!==i.identifier));console.log("currentRoomType",i);const r=o(i.identifier,i.in_out?.code==="001");l=s(t,[...a,...r]);break}case"ADD_ROOM":case"SPLIT_BOOKING":{const{booking:t}=e.defaultData;if(!t){throw new Error("Missing booking")}const i=o();const a=t.rooms;l=s(t,[...a,...i]);break}default:{const s=o(null,i);const{bookedByInfoData:c}=e;const d=t.type==="TRAVEL_AGENCY";l={assign_units:true,is_pms:true,is_direct:true,is_backend:true,is_in_loyalty_mode:false,promo_key:null,extras:[...k.filter((e=>e.key!=="payment_code")),{key:"payment_code",value:n.selectedPaymentMethod?.code}],agent:d?{id:t.tag}:null,booking:{from_date:fe(a).format("YYYY-MM-DD"),to_date:fe(r).format("YYYY-MM-DD"),remark:c.message||null,booking_nbr:"",property:{id:e.propertyid},booked_on:{date:fe().format("YYYY-MM-DD"),hour:(new Date).getHours(),minute:(new Date).getMinutes()},source:d?"":t,rooms:s,currency:e.currency,arrival:{code:c.selectedArrivalTime},guest:{email:c.email===""?null:c.email||null,first_name:c.firstName,last_name:c.lastName,country_id:c.countryId===""?null:c.countryId,city:null,mobile:c.contactNumber===null?"":c.contactNumber,country_phone_prefix:c?.isdCode??null,address:"",dob:null,subscribe_to_news_letter:c.emailGuest||false,cci:c.cardNumber?{nbr:c.cardNumber,holder_name:c.cardHolderName,expiry_month:c.expiryMonth,expiry_year:c.expiryYear}:null}},pickup_info:null};break}}return l}catch(e){console.error(e)}}getRoomCategoryByRoomId(e){return e.roomsInfo?.find((t=>t.id===e.RATE_TYPE))}setEditingRoomInfo(e,t){const i=this.getRoomCategoryByRoomId(e);const a=!i?"":`c_${i?.id}`;const r=`p_${e.RATE_PLAN_ID}`;const o={adultCount:e.ADULTS_COUNT,rate:e.RATE,rateType:e.RATE_TYPE,ratePlanId:e.RATE_PLAN_ID,roomCategoryId:i?i.id:"",roomCategoryName:i?i.name:"",totalRooms:1,ratePlanName:e.RATE_PLAN,roomId:e.PR_ID,guestName:e.NAME,cancelation:e.cancelation,guarantee:e.guarantee,adult_child_offering:e.adult_child_offering};t.set(a,(new Map).set(r,o))}}const Xe=".sc-igl-book-property-h{position:fixed;top:0;right:0;width:100vw;min-height:100vh;z-index:99;overflow:hidden}.card-title.sc-igl-book-property{border-bottom:1px solid #e4e5ec;width:100%}.card-header-container.sc-igl-book-property{border-bottom:1px solid #e4e5ec;width:100%;display:flex;align-items:center;box-sizing:border-box;padding:1rem 0;justify-content:space-between}.loading-container.sc-igl-book-property{height:100%;width:100%;display:flex;justify-content:center;align-items:center;margin:0;padding:0}.card-header-container.sc-igl-book-property h3.sc-igl-book-property{padding:0;margin:0}.background-overlay.sc-igl-book-property{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.25)}.formContainer.sc-igl-book-property{height:calc(100% - 79px);overflow:auto}.gap-30.sc-igl-book-property{gap:30px}.block-date.sc-igl-book-property{width:100%}.sideWindow.sc-igl-book-property{position:absolute;inset:0;left:unset;background-color:#ffffff;width:100%;overflow:auto;animation:slideInFromRight 0.5s}.card.sc-igl-book-property{top:0;z-index:1000}.close.sc-igl-book-property{float:right;font-size:1.5rem;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:0.5;padding:0;background-color:transparent;border:0;appearance:none}.close-icon.sc-igl-book-property{position:absolute;top:18px;right:33px;outline:none}button.sc-igl-book-property:not(:disabled),[type='button'].sc-igl-book-property:not(:disabled){cursor:pointer}.sheet-footer.sc-igl-book-property{width:100%}@media only screen and (min-width: 1200px){.sideWindow.sc-igl-book-property{max-width:70%}}@media only screen and (min-width: 2000px){.sideWindow.sc-igl-book-property{max-width:40%}}@media only screen and (min-width: 768px) and (max-width: 1200px){.sideWindow.sc-igl-book-property{max-width:90%}}@media only screen and (min-width: 600px) and (max-width: 768px){.sideWindow.sc-igl-book-property{max-width:75%}}@media only screen and (min-width: 641px){.block-date.sc-igl-book-property{max-width:450px;padding-bottom:0 !important}}@keyframes slideInFromRight{from{transform:translateX(120%)}to{transform:translateX(0)}}@keyframes slideOutToRight{from{transform:translateX(0)}to{transform:translateX(120%)}}.sideWindow--exit.sc-igl-book-property{animation:slideOutToRight 0.5s forwards}";const Je=Xe;const Qe=".sc-igl-book-property-h{height:100%}.sheet-container.sc-igl-book-property{display:flex !important;flex-direction:column !important;background:white;height:100vh;gap:1rem;z-index:1000}.sheet-container.sc-igl-book-property{height:-webkit-fill-available;height:100vh;height:100dvh}.sheet-footer.sc-igl-book-property{position:sticky;bottom:0;z-index:20;background:white;border-top:1px solid #e4e5ec;display:flex;flex-direction:column;padding:1rem;gap:0.5rem}.sheet-header.sc-igl-book-property{position:sticky;top:0;z-index:10;background:white}.sheet-body.sc-igl-book-property{flex:1 1 0%}@media (min-width: 768px){.sheet-footer.sc-igl-book-property{flex-direction:row;align-items:center}}";const Ze=Qe;const et=class{constructor(t){e(this,t);this.closeBookingWindow=a(this,"closeBookingWindow",7);this.blockedCreated=a(this,"blockedCreated",7);this.resetBookingEvt=a(this,"resetBookingEvt",7);this.animateIrButton=a(this,"animateIrButton",7);this.animateIrSelect=a(this,"animateIrSelect",7);this.toast=a(this,"toast",7)}propertyid;allowedBookingSources;language;countries;showPaymentDetails=false;currency;bookingData;adultChildConstraints;adultChildCount={adult:0,child:0};renderAgain=false;dateRangeData;defaultData;isLoading;bookingHistory=[];closeBookingWindow;blockedCreated;resetBookingEvt;animateIrButton;animateIrSelect;toast;initialRoomIds=null;sourceOption;page;showSplitBookingOption=false;sourceOptions=[];guestData=[];bookedByInfoData={};blockDatesData={};ratePricingMode=[];selectedUnits=new Map;bedPreferenceType=[];bookingService=new l;bookPropertyService=new We;defaultDateRange;updatedBooking=false;MAX_HISTORY_LENGTH=2;didReservation;wasBlockedUnit;_sourceOptions;async componentWillLoad(){console.log("<==>roomtypes<==>",n?.roomTypes);if(n.roomTypes){s("roomTypes",[]);s("ratePlanSelections",{})}this.handleKeyDown=this.handleKeyDown.bind(this);this.initializeDefaultDateRange();if(!this.bookingData.defaultDateRange){return}this.initializeDefaultData();this.wasBlockedUnit=this.defaultData.hasOwnProperty("block_exposed_unit_props");s("event_type",{type:this.defaultData.event_type});this.fetchSetupEntriesAndInitialize()}componentDidLoad(){document.addEventListener("keydown",this.handleKeyDown);x(true)}disconnectedCallback(){document.removeEventListener("keydown",this.handleKeyDown)}clearBooking(e){if(this.isEventType("SPLIT_BOOKING")){e.stopImmediatePropagation();e.stopPropagation();this.bookedByInfoData={};this.bookPropertyService.resetRoomsInfoAndMessage(this);this.renderPage()}}async handleSpiltBookingSelected(e){e.stopImmediatePropagation();e.stopPropagation();const{key:t,data:i}=e.detail;if(t==="select"||t==="blur"&&i!==""){const e=await this.bookingService.getExposedBooking(i.booking_nbr||i,this.language);this.defaultData={...this.defaultData,booking:e};this.bookPropertyService.setBookingInfoFromAutoComplete(this,e);this.sourceOption=e.source;this.renderPage()}}handleAdultChildChange(e){if(this.isEventType("ADD_ROOM")||this.isEventType("SPLIT_BOOKING")){this.bookPropertyService.resetRoomsInfoAndMessage(this)}const{adult:t,child:i}=e.detail;this.adultChildCount={...e.detail};this.updateBookingHistory({adults:Number(t),children:Number(i)})}onDateRangeSelect(e){e.stopImmediatePropagation();e.stopPropagation();const t=e.detail;this.updateBookingHistory({dates:{checkIn:new Date(this.dateRangeData.fromDate),checkOut:new Date(new Date(t.data.toDate))}});console.log("date changed",t);if(t.key==="selectedDateRange"){this.dateRangeData=t.data;if(this.isEventType("ADD_ROOM")||this.isEventType("SPLIT_BOOKING")){this.defaultData.roomsInfo=[]}else if(this.adultChildCount.adult!==0){this.checkBookingAvailability()}}}handleSourceDropDown(e){e.stopImmediatePropagation();e.stopPropagation();const t=e.detail;const i=this.sourceOptions.find((e=>e.id===t.toString()));this.sourceOption={code:t,description:i.value||"",tag:i.tag,id:i.id,type:i.type}}gotoSplitPageTwo(){this.gotoPage("page_two")}handleButtonClicked(e){switch(e.detail.key){case"save":this.bookUser(false);break;case"cancel":e.stopImmediatePropagation();e.stopPropagation();this.closeWindow();break;case"back":e.stopImmediatePropagation();e.stopPropagation();if(this.isEventType("BAR_BOOKING")){d()}this.gotoPage("page_one");break;case"book":this.bookUser(false);break;case"bookAndCheckIn":this.bookUser(true);break;case"next":e.stopImmediatePropagation();e.stopPropagation();if(!this.adultChildCount?.adult){this.animateIrSelect.emit("adult_child_select");break}if(c()>0){this.gotoPage("page_two");break}else if(this.defaultData?.roomsInfo.length===0){this.animateIrButton.emit("check_availability");break}this.toast.emit({type:"error",description:g.entries.Lcz_SelectRatePlan,title:g.entries.Lcz_SelectRatePlan});break;case"check":this.checkBookingAvailability();break}}updateBookingHistory(e){const t=this.bookingHistory[this.bookingHistory.length-1];const i={dates:{checkIn:e.dates?.checkIn||t?.dates?.checkIn||new Date(this.dateRangeData.fromDate),checkOut:e.dates?.checkOut||t?.dates?.checkOut||new Date(this.dateRangeData.toDate)},adults:e.adults??t?.adults??this.adultChildCount.adult,children:e.children??t?.children??this.adultChildCount.child};this.bookingHistory.push(i);if(this.bookingHistory.length>this.MAX_HISTORY_LENGTH){this.bookingHistory.shift()}}handleKeyDown(e){if(e.key==="Escape"){this.closeWindow()}}initializeDefaultDateRange(){this.defaultDateRange={from_date:this.bookingData.FROM_DATE,to_date:this.bookingData.TO_DATE}}initializeDefaultData(){this.defaultData=this.bookingData;this.dateRangeData={...this.defaultData.defaultDateRange}}async fetchSetupEntriesAndInitialize(){try{const e=await this.fetchSetupEntries();this.setSourceOptions(this.allowedBookingSources);this.setOtherProperties(e);this.initializeEventData()}catch(e){console.error("Error fetching setup entries:",e)}}initializeEventData(){if(this.isEventType("EDIT_BOOKING")){this.initializeEditBookingData()}if(!this.isEventType("BAR_BOOKING")){this.bookPropertyService.resetRoomsInfoAndMessage(this)}this.initializePage()}initializeEditBookingData(){this.adultChildCount={adult:this.defaultData.ADULTS_COUNT,child:this.defaultData.CHILDREN_COUNT};this.initialRoomIds={roomName:this.defaultData.roomName,ratePlanId:this.defaultData.RATE_PLAN_ID,roomId:this.defaultData.PR_ID,roomTypeId:this.defaultData.RATE_TYPE};const{currentRoomType:e,GUEST:t}=this.defaultData;console.log(t);s("guest",{bed_preference:e.bed_preference?.toString(),infant_nbr:e.occupancy.infant_nbr,first_name:t.first_name??"",last_name:t.last_name??"",unit:e.unit?.id?.toString()});this.checkBookingAvailability();this.bookPropertyService.setEditingRoomInfo(this.defaultData,this.selectedUnits)}initializePage(){switch(this.defaultData.event_type){case"SPLIT_BOOKING":this.showSplitBookingOption=true;this.page="page_one";break;case"BLOCK_DATES":this.page="page_block_date";break;default:this.page="page_one";break}}async fetchSetupEntries(){return await this.bookingService.fetchSetupEntries()}isGuestDataIncomplete(){for(const e in n.ratePlanSelections){const t=n.ratePlanSelections[e];for(const e in t){const i=t[e];if(i.reserved>0){for(const e of i.guest){if(e.first_name===""||e.last_name===""){return true}}}}}return false}isButtonDisabled(){const e=(e,t,i)=>{if(!e){return true}if(e===this.guestData){return this.isGuestDataIncomplete()}if(t==="selectedArrivalTime"){if(e[t]!==undefined){return e[t].code===""}else{return true}}return e[t]===i||e[t]===undefined};return e(this.guestData,"guestName","")||e(this.bookedByInfoData,"firstName","")||e(this.bookedByInfoData,"lastName","")||e(this.bookedByInfoData,"selectedArrivalTime","")}setSourceOptions(e){this.sourceOptions=e.map((e=>({id:e.id,value:e.description,tag:e.tag,type:e.type})));this._sourceOptions=this.isEventType("BAR_BOOKING")?this.getFilteredSourceOptions():this.sourceOptions;if(this.isEventType("EDIT_BOOKING")){this.sourceOption={...this.defaultData.SOURCE}}else{let e=this._sourceOptions.find((e=>e.type!=="LABEL"));console.log({option:e});this.sourceOption={code:e.code,description:e.description,tag:e.tag,type:e.type,id:e.id}}}getFilteredSourceOptions(){const e=new Set;const t=this.bookingData?.roomsInfo?.some((t=>{const i=t?.rateplans??[];if(i.length===0)return false;const a=i.every((e=>(e?.agents?.length??0)>0));if(a){i.forEach((t=>{(t?.agents??[]).forEach((t=>e.add(t?.id?.toString())))}))}return a}))??false;if(!t){return this.sourceOptions}return(this.sourceOptions??[]).filter((t=>{if(t?.type==="LABEL")return true;const i=t?.tag;const a=i!=null&&e.has(i);return a}))}setOtherProperties(e){this.ratePricingMode=e?.ratePricingMode;this.bookedByInfoData.arrivalTime=e.arrivalTime;this.bedPreferenceType=e.bedPreferenceType}async checkBookingAvailability(){h();const e=fe(this.dateRangeData.fromDate).format("YYYY-MM-DD");const t=fe(this.dateRangeData.toDate).format("YYYY-MM-DD");console.log({sourceOption:this.sourceOption});const i=this.sourceOption["type"]==="TRAVEL_AGENCY";try{const a=this.isEventType("EDIT_BOOKING")?[this.defaultData.RATE_TYPE]:[];const r=this.isEventType("BAR_BOOKING")?this.defaultData.roomsInfo.map((e=>e.id)):[];const o=await this.bookingService.getBookingAvailability({from_date:e,to_date:t,propertyid:this.propertyid,adultChildCount:this.adultChildCount,language:this.language,room_type_ids:r,currency:this.currency,agent_id:i?this.sourceOption["tag"]:null,is_in_agent_mode:i,room_type_ids_to_update:a});if(!this.isEventType("EDIT_BOOKING")){this.defaultData.defaultDateRange.fromDate=new Date(this.dateRangeData.fromDate);this.defaultData.defaultDateRange.toDate=new Date(this.dateRangeData.toDate)}this.defaultData={...this.defaultData,roomsInfo:o};if(this.isEventType("EDIT_BOOKING")&&!this.updatedBooking){this.updateBooking()}}catch(e){console.error("Error initializing booking availability:",e)}}updateBooking(){try{const{currentRoomType:e,GUEST:t}=this.defaultData;const i=e.roomtype.id;const a=e.rateplan.id;const r={bed_preference:e.bed_preference?.toString(),infant_nbr:e.occupancy.infant_nbr,last_name:t.last_name,first_name:t.first_name,unit:e.unit?.id?.toString(),roomtype_id:e.roomtype.id};s("guest",r);u({roomTypeId:i,ratePlanId:a,rooms:1,guest:[r]})}catch(e){console.error(e)}}async checkAndBlockDate(){try{const{block_exposed_unit_props:e}=this.defaultData;await this.bookingService.getBookingAvailability({from_date:e.from_date,to_date:e.to_date,propertyid:this.propertyid,adultChildCount:{adult:2,child:0},language:this.language,room_type_ids:this.defaultData.roomsInfo.map((e=>e.id)),currency:this.currency});const t=n.roomTypes.every((e=>{if(e.is_available_to_book){return true}return e.inventory>0&&e["not_available_reason"]==="ALL-RATES-PLAN-NOT-BOOKABLE"}));if(t){await this.handleBlockDate(false)}else{console.log("Blocked date is unavailable. Continuing...")}}catch(e){console.error("Error checking and blocking date:",e)}}async closeWindow(){h();x(false);if(this.wasBlockedUnit&&!this.didReservation){await this.checkAndBlockDate()}const e=document.querySelector(".sideWindow");if(!e)return;e.classList.add("sideWindow--exit");setTimeout((()=>{this.closeBookingWindow.emit();document.removeEventListener("keydown",this.handleKeyDown)}),300)}isEventType(e){return this.defaultData.event_type===e}handleBlockDateUpdate(e){e.stopImmediatePropagation();e.stopPropagation();const t=e.detail;this.blockDatesData=t.data}handleGuestInfoUpdate(e){e.stopImmediatePropagation();e.stopPropagation();const t=e.detail;if(t.guestRefKey){if(this.isEventType("BAR_BOOKING")||this.wasBlockedUnit||this.isEventType("SPLIT_BOOKING")){this.guestData[t.guestRefKey]={...t.data,roomId:this.defaultData.PR_ID}}else this.guestData[t.guestRefKey]=t.data}}handleBookedByInfoUpdate(e){e.stopImmediatePropagation();e.stopPropagation();const t=e.detail;this.bookedByInfoData=t.value.data}renderPage(){this.renderAgain=!this.renderAgain}gotoPage(e){this.page=e;this.renderPage()}getPageBlockDatesView(){return t(r,null,t("igl-block-dates-view",{fromDate:this.defaultData.FROM_DATE,toDate:this.defaultData.TO_DATE,entryDate:this.defaultData.ENTRY_DATE,onDataUpdateEvent:e=>this.handleBlockDateUpdate(e)}))}handlePageTwoDataUpdateEvent(e){e.stopImmediatePropagation();e.stopPropagation();if(e.detail.key==="propertyBookedBy"){this.handleBookedByInfoUpdate(e)}else{this.handleGuestInfoUpdate(e)}}async handleBlockDate(e=true){const t=this.wasBlockedUnit?this.defaultData.block_exposed_unit_props:(()=>{const e=_(+this.blockDatesData.RELEASE_AFTER_HOURS);return{from_date:D(this.defaultData.defaultDateRange.fromDate),to_date:D(this.defaultData.defaultDateRange.toDate),NOTES:this.blockDatesData.OPTIONAL_REASON||"",pr_id:this.defaultData.PR_ID.toString(),STAY_STATUS_CODE:this.blockDatesData.OUT_OF_SERVICE?"004":this.blockDatesData.RELEASE_AFTER_HOURS===0?"002":"003",DESCRIPTION:this.blockDatesData.RELEASE_AFTER_HOURS||"",...e}})();await this.bookingService.blockUnit(t);if(e)this.closeWindow()}async bookUser(e){this.setLoadingState(e);if(this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")){if(this.isGuestDataIncomplete()){this.isLoading="";return}}else if(this.isButtonDisabled()){this.isLoading="";return}try{const t=this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM");if(t){this.bookedByInfoData.message=this.defaultData.NOTES}this.didReservation=true;let i=y.property.allowed_booking_sources.find((e=>e.id===this.sourceOption.id))||this.sourceOption;const a=await this.bookPropertyService.prepareBookUserServiceParams({context:this,sourceOption:i,check_in:e});await this.bookingService.doReservation(a);await this.adjustBlockedDatesAfterReservation(a);this.resetBookingEvt.emit(null)}catch(e){console.error("Error booking user:",e)}finally{this.resetLoadingState()}}async adjustBlockedDatesAfterReservation(e){if(!this.wasBlockedUnit){return}const t=fe(this.defaultData.block_exposed_unit_props.from_date,"YYYY-MM-DD");const i=fe(e.booking.from_date,"YYYY-MM-DD");const a=fe(this.defaultData.block_exposed_unit_props.to_date,"YYYY-MM-DD");const r=fe(e.booking.to_date,"YYYY-MM-DD");if(r.isBefore(a,"days")){const e={...this.defaultData.block_exposed_unit_props,from_date:r.format("YYYY-MM-DD")};await this.bookingService.blockUnit(e)}if(i.isAfter(t,"days")){const e={...this.defaultData.block_exposed_unit_props,to_date:i.format("YYYY-MM-DD")};await this.bookingService.blockUnit(e)}return}setLoadingState(e){if(this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")){this.isLoading="save"}else{this.isLoading=e?"bookAndCheckIn":"book"}}resetLoadingState(){this.isLoading="";setTimeout((()=>{this.closeWindow()}),100)}getCurrentPage(e){return this.page===e}render(){return t(i,{key:"da40c9b868bba783fe7c2e3d8bb4a05210c71bad","data-testid":"book_property_sheet h-100"},t("div",{key:"3204f45c333bad31a490b0556e434ad89f94ca7d",class:"background-overlay",onClick:()=>this.closeWindow()}),t("div",{key:"e24a1cd48aeec1bcdb1e279328a268d49bca566e",class:"sideWindow sheet-container "+(this.getCurrentPage("page_block_date")?"block-date":"")},be("/Get_Setup_Entries_By_TBL_NAME_MULTI")?t("div",{class:"loading-container"},t("ir-spinner",null)):t(r,null,t("div",{class:"sheet-header"},t("div",{class:"card-header-container mb-2"},t("h3",{class:"text-left font-medium-2 px-2"},this.getCurrentPage("page_block_date")?this.defaultData.BLOCK_DATES_TITLE:this.defaultData.TITLE),t("ir-icon",{class:"px-2",onIconClickHandler:()=>{this.closeWindow()}},t("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",height:20,width:20},t("path",{fill:"currentColor",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"}))))),t("div",{class:"px-2 sheet-body"},this.getCurrentPage("page_one")&&t("igl-booking-overview-page",{wasBlockedUnit:this.wasBlockedUnit,initialRoomIds:this.initialRoomIds,defaultDaterange:this.defaultDateRange,eventType:this.defaultData.event_type,selectedRooms:this.selectedUnits,currency:this.currency,showSplitBookingOption:this.showSplitBookingOption,ratePricingMode:this.ratePricingMode,dateRangeData:this.dateRangeData,bookingData:this.defaultData,adultChildCount:this.adultChildCount,bookedByInfoData:this.bookedByInfoData,adultChildConstraints:this.adultChildConstraints,sourceOptions:this._sourceOptions,propertyId:this.propertyid}),this.getCurrentPage("page_two")&&t("igl-booking-form",{currency:this.currency,propertyId:this.propertyid,showPaymentDetails:this.showPaymentDetails,selectedGuestData:this.guestData,countries:this.countries,isLoading:this.isLoading,selectedRooms:this.selectedUnits,bedPreferenceType:this.bedPreferenceType,dateRangeData:this.dateRangeData,bookingData:this.defaultData,showSplitBookingOption:this.showSplitBookingOption,language:this.language,bookedByInfoData:this.bookedByInfoData,defaultGuestData:this.defaultData,isEditOrAddRoomEvent:this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM"),onDataUpdateEvent:e=>this.handlePageTwoDataUpdateEvent(e)}),this.getCurrentPage("page_block_date")?this.getPageBlockDatesView():null),this.getCurrentPage("page_block_date")?t("div",{class:"sheet-footer"},t("ir-button",{text:g.entries.Lcz_Cancel,btn_color:"secondary",class:"flex-fill",onClick:()=>this.closeWindow()}),t("ir-button",{text:g.entries.Lcz_Blockdates,isLoading:be("/Block_Exposed_Unit"),class:"flex-fill",onClick:()=>this.handleBlockDate()})):t("igl-book-property-footer",{page:this.page,dateRangeData:this.dateRangeData,isEditOrAddRoomEvent:this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM"),isLoading:this.isLoading,class:"sheet-footer",eventType:this.bookingData.event_type}))))}};et.style=Je+Ze;const tt=".sc-igl-book-property-container-h{display:block;margin:0;padding:0;letter-spacing:0px !important;font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;font-size:1rem !important;font-weight:400 !important;line-height:1.45 !important;color:#6b6f82 !important;text-align:left !important}.book-container.sc-igl-book-property-container{width:min-content;margin:0;padding:0}h3.sc-igl-book-property-container{font-size:1rem}";const it=tt;const at=class{constructor(t){e(this,t);this.resetBookingData=a(this,"resetBookingData",7)}language="";ticket="";p;propertyid;from_date;to_date;withIrToastAndInterceptor=true;bookingItem;showPaymentDetails;countries;calendarData={};resetBookingData;bookingService=new l;roomService=new we;token=new me;setRoomsData(e){let t=new Array;if(e.My_Result?.roomtypes?.length){t=e.My_Result.roomtypes;e.My_Result.roomtypes.forEach((e=>{e.expanded=true}))}this.calendarData.roomsInfo=t}async initializeApp(){try{if(!this.propertyid&&!this.p){throw new Error("Property ID or username is required")}const[e,t,i]=await Promise.all([this.roomService.getExposedProperty({id:this.propertyid,language:this.language,aname:this.p}),this.roomService.fetchLanguage(this.language),this.bookingService.getCountries(this.language)]);if(!g.entries){g.entries=t.entries;g.direction=t.direction}this.countries=i;const{allowed_payment_methods:a,currency:r,allowed_booking_sources:o,adult_child_constraints:n,calendar_legends:s}=e["My_Result"];this.calendarData={currency:r,allowed_booking_sources:o,adult_child_constraints:n,legendData:s};this.setRoomsData(e);const l=["001","004"];this.showPaymentDetails=a.some((e=>l.includes(e.code)))}catch(e){console.error("Error initializing app:",e)}}componentWillLoad(){if(this.ticket!==""){this.token.setToken(this.ticket);this.initializeApp()}}ticketChanged(e,t){if(e===t){return}this.token.setToken(this.ticket);this.initializeApp()}handleCloseBookingWindow(){this.bookingItem=null}handleTriggerClicked(){const e=new Date;e.setDate(e.getDate()+1);this.bookingItem={FROM_DATE:this.from_date,defaultDateRange:{fromDate:new Date,fromDateStr:"",toDate:e,toDateStr:"",dateDifference:0,message:""},TO_DATE:this.to_date,EMAIL:"",event_type:"PLUS_BOOKING",ID:"",NAME:"",PHONE:"",REFERENCE_TYPE:"",TITLE:g.entries.Lcz_NewBooking}}render(){return t(i,{key:"c36b20b82ba5c5dff2a92f0dae7f8429375ca606"},this.withIrToastAndInterceptor&&t(r,{key:"be826dbdf1cb6917e7a303d909736e79553c7ae8"},t("ir-toast",{key:"46e36a8f0de2721bc6822c305b6e89192dd0fff7"}),t("ir-interceptor",{key:"ca4d0dee290ba0ee1d6e150c20779b619d9e5e7f"})),t("div",{key:"8240eaef24062f462c5179e2efd96a56e29a9f4f",class:"book-container",onClick:this.handleTriggerClicked.bind(this)},t("slot",{key:"5350ec9e343fe57d9353d357260688df3cad840c",name:"trigger"})),this.bookingItem&&t("igl-book-property",{key:"eed06be64423d93e9dc64c6aa409c35234917c01",allowedBookingSources:this.calendarData.allowed_booking_sources,adultChildConstraints:this.calendarData.adult_child_constraints,showPaymentDetails:this.showPaymentDetails,countries:this.countries,currency:this.calendarData.currency,language:this.language,propertyid:this.propertyid,bookingData:this.bookingItem,onResetBookingEvt:e=>{e.stopImmediatePropagation();e.stopPropagation();this.resetBookingData.emit(null)},onCloseBookingWindow:()=>this.handleCloseBookingWindow()}))}static get watchers(){return{ticket:["ticketChanged"]}}};at.style=it;const rt=".sc-igl-book-property-footer-h{width:100% !important;background:#000}";const ot=rt;const nt=class{constructor(t){e(this,t);this.buttonClicked=a(this,"buttonClicked",7)}eventType;disabled=true;page;isEditOrAddRoomEvent;dateRangeData;isLoading;buttonClicked;isEventType(e){return e===this.eventType}editNext(e){if(this.isEventType("EDIT_BOOKING")){if(e==="Cancel"){return"flex-fill"}else{return"d-none d-md-block  flex-fill"}}return"flex-fill"}renderButton({label:e,type:i,disabled:a,icon_name:r,isLoading:o,icon_position:n="right"}){return t("div",{class:this.shouldRenderTwoButtons()?` ${this.editNext(e)}`:"flex-fill"},t("ir-button",{isLoading:o,btn_color:i==="cancel"||i==="back"?"secondary":"primary",text:e,btn_disabled:a,onClickHandler:()=>{this.buttonClicked.emit({key:i})},class:"full-width",btn_styles:"justify-content-center",icon_name:r,iconPosition:n,style:{"--icon-size":"1rem"},icon_style:{paddingBottom:"1.9px"}}))}shouldRenderTwoButtons(){return this.isEventType("PLUS_BOOKING")||this.isEventType("ADD_ROOM")||this.isEventType("EDIT_BOOKING")}render(){if(this.page==="page_one"){return t(i,null,this.isEventType("EDIT_BOOKING")?t(r,null,this.renderButton({type:"cancel",label:g.entries.Lcz_Cancel}),this.shouldRenderTwoButtons()&&this.renderButton({type:"next",label:`${g.entries.Lcz_Next}`,disabled:be("/Get_Exposed_Booking_Availability"),icon_name:"angles_right"})):t(r,null,this.renderButton({type:"cancel",label:g.entries.Lcz_Cancel}),this.shouldRenderTwoButtons()&&this.renderButton({type:"next",label:`${g.entries.Lcz_Next}`,icon_name:"angles_right"})))}const e=y.checkin_enabled&&fe(new Date(this.dateRangeData?.fromDate)).isSame(new Date,"day");return t(r,null,this.isEditOrAddRoomEvent?t(r,null,this.renderButton({type:"back",icon_position:"left",label:g.entries.Lcz_Back,icon_name:"angles_left"}),this.renderButton({type:"save",label:g.entries.Lcz_Save,isLoading:this.isLoading==="save"})):t(r,null,this.renderButton({type:"back",icon_position:"left",label:g.entries.Lcz_Back,icon_name:"angles_left"}),this.renderButton({type:"book",label:g.entries.Lcz_Book,isLoading:this.isLoading==="book"}),e&&this.renderButton({type:"bookAndCheckIn",label:g.entries.Lcz_BookAndChekcIn,isLoading:this.isLoading==="bookAndCheckIn"})))}};nt.style=ot;const st=".sc-igl-book-property-header-h{display:block}.sourceContainer.sc-igl-book-property-header{max-width:350px}.message-label.sc-igl-book-property-header{font-size:80%}";const lt=st;const ct=class{constructor(t){e(this,t);this.splitBookingDropDownChange=a(this,"splitBookingDropDownChange",7);this.sourceDropDownChange=a(this,"sourceDropDownChange",7);this.adultChild=a(this,"adultChild",7);this.checkClicked=a(this,"checkClicked",7);this.buttonClicked=a(this,"buttonClicked",7);this.toast=a(this,"toast",7);this.spiltBookingSelected=a(this,"spiltBookingSelected",7);this.animateIrButton=a(this,"animateIrButton",7);this.animateIrSelect=a(this,"animateIrSelect",7)}splitBookingId="";bookingData="";minDate;sourceOptions=[];message;bookingDataDefaultDateRange;showSplitBookingOption=false;adultChildConstraints;splitBookings;adultChildCount;dateRangeData;bookedByInfoData;defaultDaterange;propertyId;wasBlockedUnit;splitBookingDropDownChange;sourceDropDownChange;adultChild;checkClicked;buttonClicked;toast;spiltBookingSelected;animateIrButton;animateIrSelect;sourceOption={code:"",description:"",tag:"",id:"",type:""};getSplitBookingList(){return t("fieldset",{class:"d-flex flex-column text-left mb-1  flex-lg-row align-items-lg-center"},t("label",{class:"mr-lg-1"},g.entries.Lcz_Tobooking,"# "),t("div",{class:"btn-group mt-1 mt-lg-0 sourceContainer"},t("ir-autocomplete",{value:Object.keys(this.bookedByInfoData).length>1?`${this.bookedByInfoData.bookingNumber} ${this.bookedByInfoData.firstName} ${this.bookedByInfoData.lastName}`:"",from_date:fe(this.bookingDataDefaultDateRange.fromDate).format("YYYY-MM-DD"),to_date:fe(this.bookingDataDefaultDateRange.toDate).format("YYYY-MM-DD"),propertyId:this.propertyId,placeholder:g.entries.Lcz_BookingNumber,onComboboxValue:e=>{e.stopImmediatePropagation();this.spiltBookingSelected.emit(e.detail)},isSplitBooking:true})))}getSourceNode(){return t("fieldset",{class:"d-flex text-left  align-items-center"},t("label",{class:"mr-1"},g.entries.Lcz_Source," "),t("div",{class:"btn-group mt-0 flex-fill sourceContainer"},t("select",{class:"form-control input-sm",id:"xSmallSelect",onChange:e=>this.sourceDropDownChange.emit(e.target.value)},this.sourceOptions.map((e=>{if(e.type==="LABEL"){return t("optgroup",{label:e.value})}return t("option",{value:e.id,selected:this.sourceOption.code===e.id},e.value)})))))}handleAdultChildChange(e,t){let i={};if(t===""){i={...this.adultChildCount,[e]:0}}else{i={...this.adultChildCount,[e]:t}}s("bookingAvailabilityParams",{from_date:this.bookingDataDefaultDateRange.fromDate,to_date:this.bookingDataDefaultDateRange.toDate,adult_nbr:i?.["adult"]??0,child_nbr:i?.["child"]??0});this.adultChild.emit(i)}getAdultChildConstraints(){return t("div",{class:"mt-1 mt-lg-0 d-flex flex-column text-left"},t("div",{class:"form-group  my-lg-0 text-left d-flex align-items-center justify-content-between justify-content-sm-start"},t("fieldset",null,t("div",{class:"btn-group ml-0"},t("ir-select",{testId:"adult_number",class:"m-0",selectedValue:this.adultChildCount?.adult?.toString(),onSelectChange:e=>this.handleAdultChildChange("adult",e.detail),selectId:"adult_select",firstOption:g.entries.Lcz_AdultsCaption,data:Array.from(Array(this.adultChildConstraints.adult_max_nbr),((e,t)=>t+1)).map((e=>({text:e.toString(),value:e.toString()})))}))),this.adultChildConstraints.child_max_nbr>0&&t("fieldset",null,t("div",{class:"btn-group ml-1 p-0"},t("ir-select",{selectedValue:this.adultChildCount?.child?.toString(),testId:"child_number",onSelectChange:e=>this.handleAdultChildChange("child",e.detail),selectId:"child_select",firstOption:this.renderChildCaption(),data:Array.from(Array(this.adultChildConstraints.child_max_nbr),((e,t)=>t+1)).map((e=>({text:e.toString(),value:e.toString()})))}))),t("ir-button",{btn_id:"check_availability",isLoading:be("/Check_Availability"),size:"sm",class:"ml-2",text:g.entries.Lcz_Check,onClickHandler:()=>this.handleButtonClicked()})))}renderChildCaption(){const e=this.adultChildConstraints.child_max_age;let t=g.entries.Lcz_Years;if(e===1){t=g.entries.Lcz_Year}return`${g.entries.Lcz_ChildCaption} 0 - ${this.adultChildConstraints.child_max_age} ${t}`}handleButtonClicked(){if(this.isEventType("SPLIT_BOOKING")&&Object.keys(this.bookedByInfoData).length<=1){this.toast.emit({type:"error",title:g.entries.Lcz_ChooseBookingNumber,description:"",position:"top-right"})}else if(this.isEventType("ADD_ROOM")||this.isEventType("SPLIT_BOOKING")){const e=fe(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date));const t=fe(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date));const i=fe(new Date(this.dateRangeData.fromDate));const a=fe(new Date(this.dateRangeData.toDate));if(a.isBefore(t)||i.isAfter(e)){this.toast.emit({type:"error",title:`${g.entries.Lcz_CheckInDateShouldBeMAx.replace("%1",fe(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date)).format("ddd, DD MMM YYYY")).replace("%2",fe(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date)).format("ddd, DD MMM YYYY"))}  `,description:"",position:"top-right"});return}else if(this.adultChildCount.adult===0){this.toast.emit({type:"error",title:g.entries.Lcz_PlzSelectNumberOfGuests,description:"",position:"top-right"});this.animateIrSelect.emit("adult_child_select")}else{this.buttonClicked.emit({key:"check"})}}else if(this.minDate&&new Date(this.dateRangeData.fromDate).getTime()>new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date).getTime()){this.toast.emit({type:"error",title:`${g.entries.Lcz_CheckInDateShouldBeMAx.replace("%1",fe(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date)).format("ddd, DD MMM YYYY")).replace("%2",fe(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date)).format("ddd, DD MMM YYYY"))}  `,description:"",position:"top-right"})}else if(this.adultChildCount.adult===0){this.animateIrSelect.emit("adult_child_select");this.toast.emit({type:"error",title:g.entries.Lcz_PlzSelectNumberOfGuests,description:"",position:"top-right"})}else{this.buttonClicked.emit({key:"check"})}}isEventType(e){return this.bookingData.event_type===e}getMinDate(){if(this.isEventType("PLUS_BOOKING")){return fe().add(-1,"months").startOf("month").format("YYYY-MM-DD")}if(this.wasBlockedUnit){return this.bookingData?.block_exposed_unit_props.from_date}return this.minDate}getMaxDate(){if(!this.bookingData?.block_exposed_unit_props){return undefined}return this.bookingData?.block_exposed_unit_props.to_date}render(){const e=this.showSplitBookingOption?this.getSplitBookingList():this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")?false:true;return t(i,{key:"77f9f6993d8542f55cad01b233cc8eccb9364856"},this.isEventType("SPLIT_BOOKING")&&this.getSplitBookingList(),e&&this.getSourceNode(),t("div",{key:"2e8b381cc1373fc6e3a5b0359e5d25529810162e",class:`d-flex flex-column flex-lg-row align-items-lg-center ${e?"mt-1":""}`},t("fieldset",{key:"80fe139a3b37c244d8a253aa6f63fd00c51154d6",class:"mt-lg-0 mr-1 "},t("igl-date-range",{key:"200e68ffa29de66dbf5ffd4a0287e07dbf6ce9ff","data-testid":"date_picker",variant:"booking",dateLabel:g.entries.Lcz_Dates,maxDate:this.getMaxDate(),minDate:this.getMinDate(),disabled:this.isEventType("BAR_BOOKING")&&!this.wasBlockedUnit||this.isEventType("SPLIT_BOOKING"),defaultData:this.bookingDataDefaultDateRange})),!this.isEventType("EDIT_BOOKING")&&this.getAdultChildConstraints()),t("p",{key:"816776d6336e876391ea660c5682b003ec200c74",class:"text-right mt-1 message-label"},y.tax_statement))}};ct.style=lt;class dt{bookingService=new l;async reallocateEvent(e,t,i,a,r){try{console.log(e,t,i,a);const{data:o}=await ye.post(`/ReAllocate_Exposed_Room`,{pool:e,destination_pr_id:t,from_date:i,to_date:a,extras:k,rateplan_id:r});if(o.ExceptionMsg!==""){throw new Error(o.ExceptionMsg)}console.log(o);return o}catch(e){console.error(e);throw new Error(e)}}async deleteEvent(e){try{const{data:t}=await ye.post(`/UnBlock_Exposed_Unit`,{POOL:e});if(t.ExceptionMsg!==""){throw new Error(t.ExceptionMsg)}return t.My_Result}catch(e){console.log(e);throw new Error(e)}}async updateBlockedEvent(e){try{const t=_(+e.RELEASE_AFTER_HOURS);await this.deleteEvent(e.POOL);const i=await this.bookingService.blockUnit({from_date:this.formatDate(e.FROM_DATE),to_date:this.formatDate(e.TO_DATE),pr_id:e.PR_ID,STAY_STATUS_CODE:e.OUT_OF_SERVICE?"004":e.RELEASE_AFTER_HOURS===0?"002":"003",DESCRIPTION:e.RELEASE_AFTER_HOURS||"",NOTES:e.OPTIONAL_REASON||"",...t});return i}catch(e){console.error(e);throw new Error(e)}}formatDate(e){return e.split("/").join("-")}}function ht(){return(e,t,i)=>{const a=e.connectedCallback;const r=e.disconnectedCallback;const o=e.componentDidUnload;e.connectedCallback=function(...e){const i=ft(this);if(i){const e=this[t]?.bind(this);if(e){ut(this,i,e)}}return a?.apply(this,e)};e.disconnectedCallback=function(...e){const t=ft(this);if(t){pt(t)}return r?.apply(this,e)};e.componentDidUnload=function(...e){const t=ft(this);if(t){pt(t)}return o?.apply(this,e)};return i}}function ut(e,t,i){if(!t||!gt())return;if(t.__irClickOutsideCleanup__)return;const a=a=>{if(bt(t,a)){return}i.call(e,a)};window.addEventListener("click",a,true);t.__irClickOutsideCleanup__=()=>{window.removeEventListener("click",a,true)}}function pt(e){if(!e||!gt())return;e.__irClickOutsideCleanup__?.();delete e.__irClickOutsideCleanup__}function ft(e){if(!gt())return null;try{return o(e)}catch{return null}}function bt(e,t){if(!t)return false;const i=typeof t.composedPath==="function"?t.composedPath():[];if(Array.isArray(i)&&i.includes(e)){return true}const a=t.target;if(!a)return false;if(e===a)return true;if(typeof e.contains==="function"&&e.contains(a))return true;return!!e.shadowRoot?.contains(a)}function gt(){return typeof window!=="undefined"&&typeof document!=="undefined"}const mt=".sc-igl-booking-event-h{display:block;position:absolute;--ota-bar-width:2px;--stripe-period:20px;--split-border-width:5px;--split-border-color:#000000}.bookingEventBase.sc-igl-booking-event{position:absolute;width:100%;height:100%;border-radius:4px;background-color:rgb(49, 190, 241);transform:skewX(-22deg);cursor:pointer}.bookingEventBase.leftSplit.sc-igl-booking-event{border-left:var(--split-border-width) solid var(--split-border-color)}.bookingEventBase.rightSplit.sc-igl-booking-event{border-right:var(--split-border-width) solid var(--split-border-color)}.bookingEventBase.fullSplit.sc-igl-booking-event{border-right:var(--split-border-width) solid var(--split-border-color);border-left:var(--split-border-width) solid var(--split-border-color)}.bookingEventBase.fullSplit.skewedLeft.sc-igl-booking-event,.bookingEventBase.leftSplit.skewedLeft.sc-igl-booking-event{border-left:0}.bookingEventBase.fullSplit.skewedRight.sc-igl-booking-event,.bookingEventBase.leftSplit.skewedRight.sc-igl-booking-event{border-right:0}.bookingEvent.sc-igl-booking-event{cursor:pointer}.ota-booking-event.sc-igl-booking-event{border-width:var(--ota-bar-width) !important}.bookingEventHiddenBase.sc-igl-booking-event{position:absolute;top:0;left:-4px;width:calc(100% + 8px)}.bookingEventBase.skewedLeft.sc-igl-booking-event::before,.bookingEventBase.skewedRight.sc-igl-booking-event::before{content:'';position:absolute;top:0;bottom:0;width:50%;height:100%;left:-4px;background-color:var(--ir-event-bg);border-radius:4px}.bookingEventBase.skewedLeft.sc-igl-booking-event::before{transform-origin:right;transform:skewX(22deg);border-top-left-radius:0;border-bottom-left-radius:0}.bookingEventBase.fullSplit.skewedLeft.sc-igl-booking-event::before,.bookingEventBase.leftSplit.skewedLeft.sc-igl-booking-event::before{border-left:var(--split-border-width) solid var(--split-border-color) !important;z-index:2;background-color:transparent}.bookingEventBase.fullSplit.skewedRight.sc-igl-booking-event::before,.bookingEventBase.leftRight.skewedRight.sc-igl-booking-event::before{border-right:var(--split-border-width) solid var(--split-border-color) !important;z-index:2;background-color:transparent}.bookingEventBase.skewedRight.sc-igl-booking-event::before{transform-origin:left;transform:skewX(22deg 0deg);border-top-right-radius:0;border-bottom-right-radius:0}.bookingEventBase.border.skewedLeft.sc-igl-booking-event::before{border:var(--ota-bar-width) solid #424242;border-right:0;border-left:0;border-top-right-radius:0;border-bottom-right-radius:0;top:calc(var(--ota-bar-width) * -1);height:20px;left:-4px}.bookingEventBase.border.skewedRight.sc-igl-booking-event::before{border:var(--ota-bar-width) solid #424242;border-left:0;border-right:0;border-top-left-radius:0;border-bottom-left-radius:0;top:calc(var(--ota-bar-width) * -1);height:20px;right:-4px}.bookingEventBase.striped-bar.fullSplit.skewedLeft.vertical.sc-igl-booking-event::after,.bookingEventBase.striped-bar.leftSplit.skewedLeft.vertical.sc-igl-booking-event::after{z-index:1;border-left:var(--split-border-width) solid var(--split-border-color)}.bookingEventBase.striped-bar.fullSplit.skewedRight.vertical.sc-igl-booking-event::after,.bookingEventBase.striped-bar.rightSplit.skewedRight.vertical.sc-igl-booking-event::after{z-index:1;border-right:var(--split-border-width) solid var(--split-border-color)}.bookingEventBase.striped-bar.vertical.sc-igl-booking-event::after{--stripe-angle:360deg}.bookingEventBase.striped-bar.sc-igl-booking-event::after{content:'';position:absolute;inset:0;border-radius:4px;background:repeating-linear-gradient(\n    var(--stripe-angle, 45deg),\n    var(--ir-event-bg) 0,\n    var(--ir-event-bg) calc(var(--stripe-period) / 2),\n    var(--ir-event-bg-stripe-color) calc(var(--stripe-period) / 2),\n    var(--ir-event-bg-stripe-color) var(--stripe-period)\n  );backface-visibility:hidden}.bookingEventBase.skewedRight.striped-bar.sc-igl-booking-event::after,.bookingEventBase.border.skewedRight.sc-igl-booking-event::after{right:-8px}.bookingEventBase.skewedLeft.striped-bar.sc-igl-booking-event::after,.bookingEventBase.border.skewedLeft.sc-igl-booking-event::after{left:-8px}.bookingEventBase.striped-bar.animated.sc-igl-booking-event::after{background-size:28.28px 28.28px;backface-visibility:hidden;animation:stripes 0.8s linear infinite;will-change:background-position}@keyframes stripes{0%{background-position:0 0}100%{background-position:28.28px 0}}.bookingEventDragHandle.sc-igl-booking-event{position:absolute;top:0;width:15px;height:100%;opacity:0.1;background-color:rgba(0, 0, 0, 0.15);transform:skewX(-22deg);border-radius:4px;cursor:pointer}.sc-igl-booking-event-h:hover .bookingEventDragHandle.sc-igl-booking-event{display:block;opacity:1}.newEvent.sc-igl-booking-event-h:hover .bookingEventDragHandle.sc-igl-booking-event{display:none;opacity:1}.leftSide.sc-igl-booking-event{left:0}.rightSide.sc-igl-booking-event{right:0}.leftSide.skewedLeft.sc-igl-booking-event{transform:skewX(0)}.rightSide.skewedRight.sc-igl-booking-event{transform:skewX(0)}.bookingEventTitle.sc-igl-booking-event{position:relative;top:2px;left:5px;max-width:calc(100% - 10px);color:#fff;font-size:0.8em;overflow:hidden;text-overflow:ellipsis;-webkit-user-select:none;user-select:none;-webkit-user-drag:none;cursor:pointer}.legend_circle.sc-igl-booking-event{width:10px;height:10px;margin:3px 3px 3px 2px;border:1px solid #fff;border-radius:100%}.noteIcon.sc-igl-booking-event{position:absolute;bottom:-8px;left:2px}.balanceIcon.sc-igl-booking-event{position:absolute;top:-8px;right:2px}.splitBooking.sc-igl-booking-event{border-right:2px solid #000000}";const wt=mt;var yt=undefined&&undefined.__decorate||function(e,t,i,a){var r=arguments.length,o=r<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,i):a,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,a);else for(var s=e.length-1;s>=0;s--)if(n=e[s])o=(r<3?n(o):r>3?n(t,i,o):n(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};const vt=class{constructor(t){e(this,t);this.hideBubbleInfo=a(this,"hideBubbleInfo",7);this.updateEventData=a(this,"updateEventData",7);this.dragOverEventData=a(this,"dragOverEventData",7);this.showRoomNightsDialog=a(this,"showRoomNightsDialog",7);this.showDialog=a(this,"showDialog",7);this.resetStretchedBooking=a(this,"resetStretchedBooking",7);this.toast=a(this,"toast",7);this.updateBookingEvent=a(this,"updateBookingEvent",7)}get element(){return o(this)}currency;is_vacation_rental=false;language;bookingEvent;allBookingEvents=[];countries;hideBubbleInfo;updateEventData;dragOverEventData;showRoomNightsDialog;showDialog;resetStretchedBooking;toast;updateBookingEvent;renderElement=false;position;isShrinking=null;dayWidth=0;eventSpace=8;vertSpace=10;showInfoPopup=false;bubbleInfoTopSide=false;isStretch=false;eventsService=new dt;bookingService=new l;resizeSide="";isDragging=false;initialX;initialY;currentX;currentY;initialWidth;initialLeft;finalWidth;dragInitPos;dragEndPos;elementRect;isTouchStart;moveDifferenceX;moveDifferenceY;animationFrameId=null;handleMouseMoveBind=this.handleMouseMove.bind(this);handleMouseUpBind=this.handleMouseUp.bind(this);role="";componentWillLoad(){}componentDidLoad(){if(this.isNewEvent()){if(!this.bookingEvent.hideBubble){setTimeout((async()=>{if(["003","002","004"].includes(this.bookingEvent.STATUS_CODE)){this.showEventInfo(true)}else if(["IN-HOUSE","CONFIRMED","PENDING-CONFIRMATION","CHECKED-OUT"].includes(this.bookingEvent.STATUS)){await this.fetchAndAssignBookingData()}else{this.showEventInfo(true)}this.renderAgain()}),1)}}}disconnectedCallback(){if(this.animationFrameId){cancelAnimationFrame(this.animationFrameId)}}hideBubbleInfoPopup(e){if(e.detail.currentInfoBubbleId!=this.getBookingId()||e.detail.key==="hidebubble"&&e.detail.currentInfoBubbleId===this.getBookingId()){this.showInfoPopup=false;this.renderAgain()}}async moveBookingToHandler(e){try{if(e.detail.bookingId!==this.getBookingId()){this.showEventInfo(false);return}if(e.detail.moveToDay==="revert"||e.detail.toRoomId==="revert"){e.detail.moveToDay=this.bookingEvent.FROM_DATE;e.detail.toRoomId=e.detail.fromRoomId;if(this.isTouchStart&&this.moveDifferenceX<=5&&this.moveDifferenceY<=5&&!this.isStretch){if(C(this.bookingEvent.STATUS_CODE)){this.showEventInfo(true)}else if(["IN-HOUSE","CONFIRMED","PENDING-CONFIRMATION","CHECKED-OUT"].includes(this.bookingEvent.STATUS)){await this.fetchAndAssignBookingData()}}else{this.animationFrameId=requestAnimationFrame((()=>{this.resetBookingToInitialPosition()}));return}}else{if(this.isTouchStart&&this.moveDifferenceX<=5&&this.moveDifferenceY<=5&&!this.isStretch){if(C(this.bookingEvent.STATUS_CODE)){this.showEventInfo(true)}else if(["IN-HOUSE","CONFIRMED","PENDING-CONFIRMATION","CHECKED-OUT"].includes(this.bookingEvent.STATUS)){await this.fetchAndAssignBookingData()}}else{const{pool:t,to_date:i,from_date:a,toRoomId:r}=e.detail;const o=fe(i,"YYYY-MM-DD").add(-1,"days").format("YYYY-MM-DD");console.log(this.findRoomType(Number(this.bookingEvent.PR_ID)),this.findRoomType(Number(r)));if((!fe(this.bookingEvent.TO_DATE,"YYYY-MM-DD").isSame(fe(i,"YYYY-MM-DD"),"dates")||this.findRoomType(Number(this.bookingEvent.PR_ID))!==this.findRoomType(Number(r)))&&(M.disabled_cells.get(`${r}_${a}`)?.disabled||M.disabled_cells.get(`${r}_${i}`)?.disabled&&M.disabled_cells.get(`${r}_${o}`)?.disabled)&&!this.isStretch){this.reset("This room isnt available for the entire selected period. Please choose different dates or a different room.")}if(this.checkIfSlotOccupied(r,a,i)){this.reset("Overlapping Dates")}if(t){if(C(this.bookingEvent.STATUS_CODE)){await this.eventsService.reallocateEvent(t,r,a,i).catch((()=>{this.resetBookingToInitialPosition()}))}else{if(this.isShrinking||!this.isStretch){const{description:t,status:o,newRatePlans:n}=this.getModalDescription(r,a,i);let s=false;if(o==="400"){s=true}const l=this.bookingEvent.defaultDates.from_date;const c=this.bookingEvent.defaultDates.to_date;const d=S(l,c);let h=null;let u=l;let p=c;if(this.isShrinking){if(fe(a,"YYYY-MM-DD").isAfter(fe(l,"YYYY-MM-DD"))&&fe(i,"YYYY-MM-DD").isBefore(fe(c,"YYYY-MM-DD"))){u=l;p=i}else{h=fe(a,"YYYY-MM-DD").isAfter(fe(l,"YYYY-MM-DD"))?"left":fe(i,"YYYY-MM-DD").isBefore(fe(c,"YYYY-MM-DD"))?"right":null;if(h==="left"){u=a}if(h==="right"){p=i}}}else{console.log("stretching");if(fe(a,"YYYY-MM-DD").isBefore(fe(l,"YYYY-MM-DD"))){u=a;const e=fe(a,"YYYY-MM-DD").add(d,"days");p=e.isBefore(fe(i,"YYYY-MM-DD"),"days")?i:e.format("YYYY-MM-DD")}else if(fe(i,"YYYY-MM-DD").isAfter(fe(c,"YYYY-MM-DD"))){p=i;u=fe(i,"YYYY-MM-DD").subtract(d,"days").format("YYYY-MM-DD")}}console.warn({fromDate:u,toDate:p});this.showDialog.emit({reason:"reallocate",...e.detail,description:t,title:"",rateplans:n,hideConfirmButton:s,from_date:u,to_date:p})}else{const e=this.bookingEvent.defaultDates.from_date;const o=this.bookingEvent.defaultDates.to_date;const n=(e,t)=>{let i=e;let a=0;while(i!==t){if(M.disabled_cells.get(`${r}_${i}`)?.disabled){a++}i=fe(i,"YYYY-MM-DD").add(1,"days").format("YYYY-MM-DD")}if(a>=1){this.reset(g.entries.Lcz_ThisUnitIsNotAvailable)}};if(fe(o,"YYYY-MM-DD").isBefore(fe(i),"dates")){n(o,i)}else if(fe(e,"YYYY-MM-DD").isAfter(fe(a,"YYYY-MM-DD"),"dates")){n(a,e)}const s={booking:this.bookingEvent,bookingNumber:this.bookingEvent.BOOKING_NUMBER,identifier:this.bookingEvent.IDENTIFIER,to_date:i,pool:t,from_date:a,defaultDates:this.bookingEvent.defaultDates};if(!this.bookingEvent.is_direct){this.showDialog.emit({reason:"stretch",...s})}else{this.showRoomNightsDialog.emit(s)}}}this.isShrinking=null}}}}catch(e){this.toast.emit({position:"top-right",title:e.message,description:"",type:"error"});console.log("something went wrong")}}closeEventBubble(){this.showEventInfo(false)}async fetchAndAssignBookingData(){try{console.log("clicked on book#",this.bookingEvent.BOOKING_NUMBER);const e=["IN-HOUSE","CONFIRMED","PENDING-CONFIRMATION","CHECKED-OUT"];if(!e.includes(this.bookingEvent.STATUS)){return}const t=await this.bookingService.getExposedBooking(this.bookingEvent.BOOKING_NUMBER,"en");const i={...t};const a=t.rooms.filter((e=>e["assigned_units_pool"]===this.bookingEvent.ID));if(a.length===0){throw new Error(`booking#${this.bookingEvent.BOOKING_NUMBER} has an empty array`)}if(a.some((e=>e["assigned_units_pool"]===null))){throw new Error(`booking#${this.bookingEvent.BOOKING_NUMBER} has an empty pool`)}t.rooms=a;const r=Y(t)[0];const{ID:o,TO_DATE:n,FROM_DATE:s,NO_OF_DAYS:l,STATUS:c,NAME:d,IDENTIFIER:h,origin:u,TOTAL_PRICE:p,PR_ID:f,POOL:b,BOOKING_NUMBER:g,NOTES:m,is_direct:w,BALANCE:y,channel_booking_nbr:v,...k}=r;this.bookingEvent={...k,...this.bookingEvent,channel_booking_nbr:v,booking:t,base_booking:i,DEPARTURE_TIME:k.DEPARTURE_TIME,PHONE:k.PHONE,PHONE_PREFIX:k.PHONE_PREFIX,PRIVATE_NOTE:k.PRIVATE_NOTE,origin:u,BALANCE:y,TOTAL_PRICE:p,ROOM_INFO:{...this.bookingEvent.ROOM_INFO,sharing_persons:k.ROOM_INFO.sharing_persons}};this.updateBookingEvent.emit(this.bookingEvent);this.showEventInfo(true)}catch(e){console.error(e.message)}}reset(e){this.animationFrameId=requestAnimationFrame((()=>{this.resetBookingToInitialPosition()}));throw new Error(e)}findRoomType=e=>{let t=this.bookingEvent.roomsInfo.filter((t=>t.physicalrooms.some((t=>t.id===+e))));if(t.length){return t[0].id}return null};buildBarIds(){const e=this.getBookingId();return{bar:`event_${e}`,lateCheckout:`event_late_checkout_${e}`,balance:`event_balance_${e}`}}getModalDescription(e,t,i){if(!this.bookingEvent.is_direct){if(this.isShrinking){return{description:g.entries.Lcz_OTA_Modification_Alter,status:"200"}}else{if(fe(t,"YYYY-MM-DD").isSame(fe(this.bookingEvent.FROM_DATE,"YYYY-MM-DD"))&&fe(i,"YYYY-MM-DD").isSame(fe(this.bookingEvent.TO_DATE,"YYYY-MM-DD"))){const t=this.findRoomType(this.bookingEvent.PR_ID);const i=this.findRoomType(e);if(t===i){return{description:`${g.entries.Lcz_AreYouSureWantToMoveAnotherUnit}?`,status:"200"}}else{const e=E({rateplan_id:this.bookingEvent.RATE_PLAN_ID,roomTypeId:i,roomTypes:y?.property?.roomtypes});return{description:g.entries.Lcz_OTA_Modification_Alter,status:"200",newRatePlans:Array.isArray(e)?e:undefined}}}return{description:g.entries.Lcz_CannotChangeCHBookings+".",status:"400"}}}else{if(!this.isShrinking){const t=this.findRoomType(Number(this.bookingEvent.PR_ID));const i=this.findRoomType(Number(e));if(t===i){console.log("same rt");if(this.bookingEvent.PR_ID.toString()===e.toString()){return{description:g.entries.Lcz_ConfrmModiication+".",status:"200"}}return{description:`${g.entries.Lcz_AreYouSureWantToMoveAnotherUnit}?`,status:"200"}}else{const e=E({rateplan_id:this.bookingEvent.RATE_PLAN_ID,roomTypeId:i,roomTypes:y?.property?.roomtypes});return{description:g.entries.Lcz_SameRatesWillBeKept,status:"200",newRatePlans:Array.isArray(e)?e:undefined}}}return{description:g.entries.Lcz_ConfrmModiication+".",status:"200"}}}resetBookingToInitialPosition(){if(this.isStretch){this.element.style.left=`${this.initialLeft}px`;this.element.style.width=`${this.initialWidth}px`;this.isStretch=false;this.finalWidth=this.initialWidth;this.isShrinking=null}else{this.element.style.top=`${this.dragInitPos.top}px`;this.element.style.left=`${this.dragInitPos.left}px`}}handleRevertBooking(e){if(this.bookingEvent.POOL===e.detail){this.resetBookingToInitialPosition()}}checkIfSlotOccupied(e,t,i){const a=fe(t,"YYYY-MM-DD");const r=fe(i,"YYYY-MM-DD");const o=this.allBookingEvents.some((t=>{if(t.POOL===this.bookingEvent.POOL){return false}const i=fe(t.FROM_DATE,"YYYY-MM-DD").add(1,"days");const o=fe(t.TO_DATE,"YYYY-MM-DD");return t.PR_ID===+e&&r.isSameOrAfter(i)&&a.isBefore(o)}));return o}renderAgain(){this.renderElement=!this.renderElement}getUniqueId(){return(new Date).getTime()}isSplitBooking(){return!!this.bookingEvent.SPLIT_BOOKING}isNewEvent(){return this.getBookingId()==="NEW_TEMP_EVENT"}isHighlightEventType(){return this.getEventType()==="HIGH_LIGHT"}getBookingId(){return this.bookingEvent.ID}getBookingStatus(){return this.bookingEvent.STATUS}getBookedBy(){return this.bookingEvent.NAME}getBookedRoomId(){return this.bookingEvent.PR_ID}getEventStartingDate(){return new Date(this.bookingEvent.FROM_DATE)}getEventEndingDate(){return new Date(this.bookingEvent.TO_DATE)}getEventType(){return this.bookingEvent.event_type}getEventLegend(){let e=this.bookingEvent?.legendData.statusId[this.getBookingStatus()];let t=this.isNewEvent()?{color:"#f9f9c9"}:{};return{...this.bookingEvent?.legendData[e.id],...e,...t}}getLegendOfStatus(e){let t=this.bookingEvent?.legendData.statusId[e];return{...this.bookingEvent.legendData[t.id],...t}}getNoteNode(){if(this.bookingEvent.NOTES||this.bookingEvent.INTERNAL_NOTE||this.bookingEvent.PRIVATE_NOTE){return this.getLegendOfStatus("NOTES")}return null}getBalanceNode(){if(this.bookingEvent.BALANCE!==null&&this.bookingEvent.BALANCE>=1){return this.getLegendOfStatus("OUTSTANDING-BALANCE")}return null}setStayDays(e){this.bookingEvent.NO_OF_DAYS=e;this.renderAgain()}getStayDays(){return this.bookingEvent.NO_OF_DAYS}getPosition(){let e=this.getEventStartingDate();let t=".room_"+this.getBookedRoomId()+"_"+e.getDate()+"_"+(e.getMonth()+1)+"_"+e.getFullYear();let i=document.querySelector(".bodyContainer");let a=document.querySelector(t);let r={top:"0",left:"0",width:"0",height:"20px"};if(!a&&i&&a.getBoundingClientRect()&&i.getBoundingClientRect()){console.warn("Failed to locate event cell",t,this.bookingEvent);return r}let o=i.getBoundingClientRect();let n=a.getBoundingClientRect();this.dayWidth=this.dayWidth||n.width;r.top=n.top+n.height/2-this.vertSpace-o.top+"px";r.left=n.left+(!this.isNewEvent()&&fe(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE))?0:this.dayWidth/2)+this.eventSpace/2-o.left+"px";r.width=(this.getStayDays()+(!this.isNewEvent()&&fe(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE))?.5:0))*this.dayWidth-this.eventSpace+"px";return r}getNumber(e){return e?parseFloat(e):0}startDragging(e,t){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();if(this.isNewEvent()||this.isHighlightEventType()){return null}this.resizeSide=t;this.isDragging=true;this.showEventInfo(false);this.isStretch=t!=="move";if(t==="move"){this.initialX=e.clientX||e.touches[0].clientX;this.initialY=e.clientY||e.touches[0].clientY;this.elementRect=this.element.getBoundingClientRect();const t=0;const i=0;this.dragInitPos={id:this.getBookingId(),fromRoomId:this.getBookedRoomId(),top:this.getNumber(this.element.style.top)+i,left:this.getNumber(this.element.style.left)+t};this.dragInitPos.x=this.dragInitPos.left;this.dragInitPos.y=this.dragInitPos.top;this.dragEndPos={...this.dragInitPos};this.element.style.top=`${this.dragInitPos.top}px`;this.element.style.left=`${this.dragInitPos.left}px`;this.isTouchStart=true;this.dragOverEventData.emit({id:"CALCULATE_DRAG_OVER_BOUNDS",data:this.dragInitPos})}else{this.initialWidth=this.element.offsetWidth;this.initialLeft=this.element.offsetLeft;this.initialX=e.clientX||e.touches[0].clientX;this.dragOverEventData.emit({id:"CALCULATE_DRAG_OVER_BOUNDS",data:{id:this.getBookingId(),fromRoomId:this.getBookedRoomId(),top:this.getNumber(this.element.style.top),left:this.initialLeft,x:this.initialX,y:e.clientY||e.touches[0].clientY}})}document.addEventListener("mousemove",this.handleMouseMoveBind);document.addEventListener("touchmove",this.handleMouseMoveBind);document.addEventListener("pointermove",this.handleMouseMoveBind);document.addEventListener("mouseup",this.handleMouseUpBind);document.addEventListener("touchup",this.handleMouseUpBind);document.addEventListener("pointerup",this.handleMouseUpBind)}handleMouseMove(e){if(this.isDragging){this.currentX=e.clientX||e.touches[0].clientX;let t=this.currentX-this.initialX;if(this.resizeSide==="move"){this.currentY=e.clientY||e.touches[0].clientY;let i=this.currentY-this.initialY;this.element.style.top=`${this.dragInitPos.top+i}px`;this.element.style.left=`${this.dragInitPos.left+t}px`;this.dragEndPos={id:this.getBookingId(),fromRoomId:this.getBookedRoomId(),top:this.dragInitPos.top+i,left:this.dragInitPos.left+t};this.dragEndPos.x=this.dragEndPos.left;this.dragEndPos.y=this.dragEndPos.top;this.dragOverEventData.emit({id:"DRAG_OVER",data:this.dragEndPos})}else{if(this.role==="fullSplit"){return}const e=!this.bookingEvent.is_direct&&!C(this.bookingEvent.STATUS_CODE);let i=this.initialWidth;if(this.resizeSide=="rightSide"){i=this.initialWidth+t;i=Math.min(i,this.initialX+this.element.offsetWidth);i=Math.max(this.dayWidth-this.eventSpace,i);this.isShrinking=t<0;if(!this.isShrinking&&e){return}if(this.role==="rightSplit"){return}this.element.style.width=`${i}px`}else if(this.resizeSide=="leftSide"){this.isShrinking=t>0;if(!this.isShrinking&&e){return}if(this.role==="leftSplit"){return}i=Math.max(this.dayWidth-this.eventSpace,this.initialWidth-t);let a=this.initialLeft+(this.initialWidth-i);this.element.style.left=`${a}px`;this.element.style.width=`${i}px`}this.finalWidth=i}}else{console.log("still mouse move listening...")}}handleMouseUp(){if(this.isDragging){if(this.resizeSide==="move"){if(this.isTouchStart){this.moveDifferenceX=Math.abs(this.dragEndPos.x-this.dragInitPos.x);this.moveDifferenceY=Math.abs(this.dragEndPos.y-this.dragInitPos.y)}this.dragOverEventData.emit({id:"DRAG_OVER_END",data:{...this.dragEndPos,pool:this.bookingEvent.POOL,nbOfDays:this.bookingEvent.NO_OF_DAYS}})}else{const e=this.finalWidth-(!this.isNewEvent()&&fe(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE))?this.dayWidth/2:0);const t=Math.round(e/this.dayWidth);console.log(e,this.dayWidth,t);let i=this.getStayDays();if(i!=t&&!isNaN(t)){if(this.resizeSide=="leftSide"){this.element.style.left=`${this.initialLeft+(i-t)*this.dayWidth}px`}else{if(t<i){this.isShrinking=true}}this.dragOverEventData.emit({id:"STRETCH_OVER_END",data:{id:this.getBookingId(),fromRoomId:+this.getBookedRoomId(),x:+this.element.style.left.replace("px",""),y:+this.element.style.top.replace("px",""),pool:this.bookingEvent.POOL,nbOfDays:t}});const e=!this.isNewEvent()&&fe(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE))?+this.dayWidth/2:0;this.element.style.width=`${t*this.dayWidth-this.eventSpace+e}px`}else{this.element.style.left=`${this.initialLeft}px`;this.element.style.width=`${t*this.dayWidth-this.eventSpace}px`}}}else{console.log("still mouse up listening...")}this.isDragging=false;document.removeEventListener("mousemove",this.handleMouseMoveBind);document.removeEventListener("touchmove",this.handleMouseMoveBind);document.removeEventListener("pointermove",this.handleMouseMoveBind);document.removeEventListener("mouseup",this.handleMouseUpBind);document.removeEventListener("touchup",this.handleMouseUpBind);document.removeEventListener("pointerup",this.handleMouseUpBind)}updateData(e){this.updateEventData.emit(e)}calculateHoverPosition(){const e=this.element.getBoundingClientRect();const t=e.width;const i=e.left;const a=window.innerWidth;let r;if(t<=a){r=t/2}else{r=a/2-i}return{position:"absolute",left:`${r}px`,transform:"translateX(-50%)"}}renderEventBookingNumber(){if(this.bookingEvent.STATUS==="TEMP-EVENT"||this.bookingEvent.ID==="NEW_TEMP_EVENT"){return""}if(C(this.bookingEvent.STATUS_CODE)){return""}if(!this.bookingEvent.is_direct){return` - ${this.bookingEvent.channel_booking_nbr}`}return` - ${this.bookingEvent.BOOKING_NUMBER}`}showEventInfo(e){if(this.isHighlightEventType()||this.bookingEvent.hideBubble){return null}if(e){let e=document.querySelector(".calendarScrollContainer");let t=e.getBoundingClientRect();let i=this.element.getBoundingClientRect();let a=t.height/2+t.top+50;if(i.top<a){this.bubbleInfoTopSide=false}else{this.bubbleInfoTopSide=true}}if(e){this.hideBubbleInfo.emit({key:"hidePopup",currentInfoBubbleId:this.getBookingId()})}this.showInfoPopup=e;this.renderAgain()}isDepartureAfterHotelCheckout(){const e=this.bookingEvent.DEPARTURE_TIME;if(!e?.code){return false}const t=fe(y.property.time_constraints.check_out_till,"HH:mm");const i=fe(e.description,"HH:mm");return t.isBefore(i)}computeSplitRole(){const e=T(this.bookingEvent.ROOMS);let t=null;if(e){t=I(e,this.bookingEvent.IDENTIFIER)??""}return t}render(){let e=this.getEventLegend();let a=this.getNoteNode();let o=this.getBalanceNode();let n=this.bookingEvent.ROOM_INFO?.calendar_extra?this.bookingEvent.ROOM_INFO.calendar_extra?.booking_color?.color??e.color:e.color;const{foreground:s,stripe:l}=y.colorsForegrounds?.[n]??{foreground:"",checkout:""};n=this.bookingEvent.STATUS==="CHECKED-OUT"?e.color:n;const c=this.isDepartureAfterHotelCheckout();const{balance:d,bar:h,lateCheckout:u}=this.buildBarIds();const p=this.computeSplitRole();return t(i,{key:"7277f6262466ea8b72dca41a48886ad423534b7c",class:`bookingEvent  ${this.isNewEvent()||this.isHighlightEventType()?"newEvent":""} ${e.clsName} `,style:this.getPosition(),id:h},t("div",{key:"7cea756b0373f8aaecdd5af8c6834d8f23e50384",class:{bookingEventBase:true,skewedLeft:!this.isNewEvent()&&fe(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE)),skewedRight:!this.isNewEvent()&&fe(new Date(this.bookingEvent.defaultDates.to_date)).isAfter(new Date(this.bookingEvent.TO_DATE)),"striped-bar vertical":this.bookingEvent.STATUS==="IN-HOUSE","striped-bar animated":C(this.bookingEvent.STATUS_CODE)&&this.bookingEvent.STATUS_CODE==="003","border border-dark ota-booking-event":!this.bookingEvent.is_direct&&!C(this.bookingEvent.STATUS_CODE)&&this.bookingEvent.STATUS!=="TEMP-EVENT"&&this.bookingEvent.ID!=="NEW_TEMP_EVENT",[p]:true},style:{backgroundColor:n,"--ir-event-bg":n,"--ir-event-bg-stripe-color":l},onTouchStart:e=>this.startDragging(e,"move"),onMouseDown:e=>this.startDragging(e,"move")}),c&&t("wa-tooltip",{key:"47c43497ff66fab9bcca00aaa028ab13ff650786",for:u},"Departure time: ",this.bookingEvent.DEPARTURE_TIME?.description),o&&t("wa-tooltip",{key:"3eca1364fc229d874bf775cdf590ce8ff6ee93ff",for:d},"Balance: ",v(y.property.currency.symbol,this.bookingEvent.BALANCE)),a?t("div",{class:"legend_circle noteIcon",style:{backgroundColor:a.color}}):null,(o||c)&&t("div",{key:"0197b83fdecf5c0b7dc220f4840bb3043f9e704c",class:"balanceIcon d-flex"},c&&t("div",{key:"2f16582be5e7cdd3ba7088e4f2c090c5473b2d3a",id:u,class:"legend_circle",style:{backgroundColor:"#999999"}}),o?t("div",{id:d,class:"legend_circle",style:{backgroundColor:"#f34752"}}):null),t("div",{key:"393639ef3e3f45615ac7a0ec6f3d10f567b33cfc",class:"bookingEventTitle",style:{color:s},onTouchStart:e=>this.startDragging(e,"move"),onMouseDown:e=>this.startDragging(e,"move")},this.getBookedBy(),this.renderEventBookingNumber()),t(r,{key:"a7bdcf856e820c2c7a391da171f9582a600ccbf8"},t("div",{key:"8108f53b090f7238da075c9680d4a74204a15efe",class:`bookingEventDragHandle leftSide ${!this.isNewEvent()&&fe(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE))?"skewedLeft":""}\n            ${!this.isNewEvent()&&fe(new Date(this.bookingEvent.defaultDates.to_date)).isAfter(new Date(this.bookingEvent.TO_DATE))?"skewedRight":""}`,onTouchStart:e=>this.startDragging(e,"leftSide"),onMouseDown:e=>this.startDragging(e,"leftSide")}),t("div",{key:"470f8f2844165b45ead0c5e42e7ea8c17db75885",class:`bookingEventDragHandle rightSide ${!this.isNewEvent()&&fe(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE))?"skewedLeft":""}\n              ${!this.isNewEvent()&&fe(new Date(this.bookingEvent.defaultDates.to_date)).isAfter(new Date(this.bookingEvent.TO_DATE))?"skewedRight":""}`,onTouchStart:e=>this.startDragging(e,"rightSide"),onMouseDown:e=>this.startDragging(e,"rightSide")})),this.showInfoPopup?t("igl-booking-event-hover",{is_vacation_rental:this.is_vacation_rental,countries:this.countries,currency:this.currency,class:"top",bookingEvent:this.bookingEvent,bubbleInfoTop:this.bubbleInfoTopSide,style:this.calculateHoverPosition()}):null)}};yt([ht()],vt.prototype,"closeEventBubble",null);vt.style=wt;z.object({code:z.string(),id:z.number(),symbol:z.string()});const kt=z.object({NIGHTS:z.number(),PCT:z.number(),REVENUE:z.number(),SOURCE:z.string(),PROPERTY_ID:z.number(),PROPERTY_NAME:z.string(),currency:z.string()});const xt=kt.extend({last_year:kt.optional()});const _t=z.array(xt).nullable();const Dt=z.object({AC_ID:z.string().optional(),BOOK_CASE:z.string().min(1),FROM_DATE:z.string().regex(/^\d{4}-\d{2}-\d{2}$/,"Use YYYY-MM-DD format"),TO_DATE:z.string().regex(/^\d{4}-\d{2}-\d{2}$/,"Use YYYY-MM-DD format"),WINDOW:z.coerce.number().int().nonnegative(),is_export_to_excel:z.coerce.boolean().optional().default(false),LIST_AC_ID:z.array(z.number()).nullable()});Dt.extend({include_previous_year:z.boolean()});const Ct=e=>_t.parse(e);const Mt=e=>Dt.parse(e);const St=z.object({property_id:z.number(),value:z.string()});const Yt=z.array(z.object({id:z.number(),name:z.string()})).nullable();const Et=z.object({property_id:z.number(),room_identifier:z.string(),value:z.string()});class Tt{async getExposedProperty(e){try{const{data:t}=await ye.post(`/Get_Exposed_Property`,e);if(t.ExceptionMsg!==""){throw new Error(t.ExceptionMsg)}const i=t.My_Result;y.property={...i};y.adultChildConstraints=i.adult_child_constraints;y.allowedBookingSources=i.allowed_booking_sources;y.allowed_payment_methods=i.allowed_payment_methods;y.currency=i.currency;y.is_vacation_rental=i.is_vacation_rental;y.pickup_service=i.pickup_service;y.max_nights=i.max_nights;y.roomsInfo=i.roomtypes;y.taxes=i.taxes;y.id=i.id;y.country=i.country;y.name=i.name;y.is_automatic_check_in_out=i.is_automatic_check_in_out;y.tax_statement=i.tax_statement;y.is_frontdesk_enabled=i.is_frontdesk_enabled;y.is_pms_enabled=i.is_pms_enabled;const a=i?.time_constraints?.check_out_till?.split(":");y.checkin_checkout_hours={offset:i.city.gmt_offset,hour:Number(a[0]||0),minute:Number(a[1]||0)};return t}catch(e){console.log(e);throw new Error(e)}}async setPropertyCalendarExtra(e){const t=St.parse(e);const{data:i}=await ye.post("/Set_Property_Calendar_Extra",t);if(i.ExceptionMsg!==""){throw new Error(i.ExceptionMsg)}return i.My_Result}async setRoomCalendarExtra(e){const t=Et.parse(e);const{data:i}=await ye.post("/Set_Room_Calendar_Extra",t);if(i.ExceptionMsg!==""){throw new Error(i.ExceptionMsg)}return i.My_Result}async getChannelSales(e){const t=Mt(e);const{data:i}=await ye.post("/Get_Channel_Sales",t);if(i.ExceptionMsg!==""){throw new Error(i.ExceptionMsg)}if(e.is_export_to_excel){O(i.My_Params_Get_Channel_Sales.Link_excel)}return Ct(i.My_Result)}async getExposedAllowedProperties(){const{data:e}=await ye.post("/Get_Exposed_Allowed_Properties",{});if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}return Yt.parse(e.My_Result)}async getCountrySales(e){const{data:t}=await ye.post("/Get_Country_Sales",e);if(t.ExceptionMsg!==""){throw new Error(t.ExceptionMsg)}if(e.is_export_to_excel){O(t.My_Params_Get_Country_Sales.Link_excel)}return t.My_Result}async getDailyRevenueReport(e){const{data:t}=await ye.post("/Get_Daily_Revenue_Report",e);if(t.ExceptionMsg!==""){throw new Error(t.ExceptionMsg)}if(e.is_export_to_excel){O(t.My_Params_Get_Daily_Revenue_Report.Link_excel)}return t.My_Result}async setExposedCleaningFrequency(e){const{data:t}=await ye.post("/Set_Exposed_Cleaning_Frequency",e);if(t.ExceptionMsg!==""){throw new Error(t.ExceptionMsg)}return t.My_Result}async getMonthlyStats(e){const{data:t}=await ye.post("/Get_Monthly_Stats",e);if(t.ExceptionMsg!==""){throw new Error(t.ExceptionMsg)}if(e.is_export_to_excel){O(t.My_Params_Get_Monthly_Stats.Link_excel)}return t.My_Result}}const It=".sc-igl-booking-event-hover-h{display:block;position:relative;z-index:100}.btn.sc-igl-booking-event-hover{padding-left:4px !important;padding-right:4px !important}.balance_amount.sc-igl-booking-event-hover{color:#ff4961;font-size:0.75rem}.user-notes.sc-igl-booking-event-hover{margin-left:4px;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:5;line-clamp:5;overflow:hidden;max-width:100%;height:auto}.booking-event-hover__color-picker-trigger.sc-igl-booking-event-hover{all:unset;border:1px solid #e0e0e0;padding:0.25rem 0.25rem;border-radius:0.21rem;cursor:pointer}.events_btns.sc-igl-booking-event-hover{display:inline-flex;align-items:center;justify-content:center;gap:0.5rem}.mx-01.sc-igl-booking-event-hover{--m:5px;margin-left:var(--m) !important;margin-right:var(--m) !important}.pointerContainerTop.sc-igl-booking-event-hover{top:-26px}.pointerContainer.sc-igl-booking-event-hover{position:absolute;height:10px;width:350px;left:var(--el-left, 50%);transform:translateX(-50%)}.ota-notes.sc-igl-booking-event-hover{width:450px}.iglPopOver.sc-igl-booking-event-hover{position:absolute;background-color:#fff;padding:10px;border:1px solid #656ee7;border-radius:6px;left:var(--el-left, 50%);transform:translateX(-50%) translateY(10px);box-shadow:1px 0px 20px rgba(0, 0, 0, 0.2)}.iglPopOver.infoBubble.sc-igl-booking-event-hover{min-width:350px}.iglPopOver.blockedView.sc-igl-booking-event-hover{max-width:400px;width:400px}.iglPopOver.newBookingOptions.sc-igl-booking-event-hover{overflow-wrap:break-word !important;min-width:230px;width:fit-content}.bubblePointer.sc-igl-booking-event-hover{position:absolute;width:0;height:0;left:50%;border-left:10px solid transparent;border-right:10px solid transparent;transform:translate(-50%, 0px)}.bubblePointTop.sc-igl-booking-event-hover{border-top:10px solid #656ee7}.bubblePointBottom.sc-igl-booking-event-hover{border-bottom:10px solid #656ee7}.bubbleInfoAbove.sc-igl-booking-event-hover{bottom:35px}.updateBtnIcon.sc-igl-booking-event-hover{margin-right:4px}.icon-image.sc-igl-booking-event-hover{height:1.5rem;width:1.5rem;margin-right:5px}";const zt=It;const Ot=class{constructor(t){e(this,t);this.showBookingPopup=a(this,"showBookingPopup",7);this.hideBubbleInfo=a(this,"hideBubbleInfo",7);this.deleteButton=a(this,"deleteButton",7);this.bookingCreated=a(this,"bookingCreated",7);this.showDialog=a(this,"showDialog",7);this.openCalendarSidebar=a(this,"openCalendarSidebar",7)}get element(){return o(this)}bookingEvent;bubbleInfoTop=false;currency;countries;is_vacation_rental=false;isLoading;shouldHideUnassignUnit=false;canCheckInOrCheckout;bookingColor=null;showBookingPopup;hideBubbleInfo;deleteButton;bookingCreated;showDialog;openCalendarSidebar;eventService=new dt;hideButtons=false;propertyService=new Tt;baseColor;componentWillLoad(){let e=this.bookingEvent.roomsInfo.find((e=>e.id===this.bookingEvent.RATE_TYPE));if(e){this.shouldHideUnassignUnit=e.physicalrooms.length===1}if(fe(this.bookingEvent.TO_DATE,"YYYY-MM-DD").isBefore(fe())){this.hideButtons=true}this.baseColor=this.getEventLegend().color;this.bookingColor=this.bookingEvent.ROOM_INFO?.calendar_extra?this.bookingEvent.ROOM_INFO?.calendar_extra?.booking_color:null;this.canCheckInOrCheckout=fe().isSameOrAfter(new Date(this.bookingEvent.FROM_DATE),"days")&&fe().isBefore(new Date(this.bookingEvent.TO_DATE),"days")}handleBookingEventChange(e,t){if(e!==t)this.canCheckInOrCheckout=fe(new Date).isSameOrAfter(new Date(this.bookingEvent.FROM_DATE),"days")&&fe(new Date).isBefore(new Date(this.bookingEvent.TO_DATE),"days")}handleListenKeyDown(e){if(e.key==="Escape"){e.stopPropagation();this.hideBubble()}else return}getEventLegend(){let e=this.bookingEvent?.legendData.statusId[this.bookingEvent.STATUS];return{...this.bookingEvent?.legendData[e.id],...e}}getBookingId(){return this.bookingEvent.ID}hideBubble(){this.hideBubbleInfo.emit({key:"hidebubble",currentInfoBubbleId:this.getBookingId()})}getTotalOccupants(){const{CHILDREN_COUNT:e,ADULTS_COUNT:t}=this.bookingEvent;if(e===0){return`${t} ${t>1?g.entries.Lcz_AdultsCaption.toLowerCase():g.entries.Lcz_Single_Adult?.toLowerCase()}`}return`${t} ${t>1?g.entries.Lcz_AdultsCaption.toLowerCase():g.entries.Lcz_Single_Adult?.toLowerCase()}, ${e} ${e>1?g.entries.Lcz_ChildCaption.toLowerCase():g.entries.Lcz_Single_Child?.toLowerCase()}`}getPhoneNumber(){return this.bookingEvent.PHONE}getCountry(){return A(this.bookingEvent.COUNTRY,this.countries).name}getPhoneCode(){if(this.bookingEvent.PHONE_PREFIX){return this.bookingEvent.PHONE_PREFIX}return A(this.bookingEvent.COUNTRY,this.countries).phone_prefix}renderPhone(){return this.bookingEvent.COUNTRY?`${this.bookingEvent.is_direct?this.getPhoneCode()+"-":""}${this.getPhoneNumber()} - ${this.getCountry()}`:this.getPhoneNumber()}getInternalNote(){return this.bookingEvent.INTERNAL_NOTE}getTotalPrice(){return this.bookingEvent.TOTAL_PRICE}getArrivalTime(){return this.bookingEvent.ARRIVAL_TIME}getRatePlan(){if(!this.bookingEvent){return}const e=this.bookingEvent?.booking?.rooms?.find((e=>e.assigned_units_pool===this.bookingEvent.ID));if(!e){console.warn(`Couldn't find room with pool ${this.bookingEvent.ID}`);return null}let t="";t+=e.rateplan["short_name"];if(e.rateplan["is_non_refundable"]){t+=` - ${g.entries.Lcz_NonRefundable}`}return t}getEntryDate(){return this.bookingEvent.ENTRY_DATE}isNewBooking(){return this.getBookingId()==="NEW_TEMP_EVENT"}isCheckedIn(){return this.bookingEvent.STATUS==="IN-HOUSE"}isBlockedDateEvent(){return this.bookingEvent.STATUS==="BLOCKED"||this.bookingEvent.STATUS==="BLOCKED-WITH-DATES"}hasSplitBooking(){return this.bookingEvent.hasOwnProperty("splitBookingEvents")&&this.bookingEvent.splitBookingEvents}canCheckIn(){return B({from_date:this.bookingEvent.FROM_DATE,to_date:this.bookingEvent.TO_DATE,isCheckedIn:this.isCheckedIn()})}canCheckOut(){if(!y.checkin_enabled||y.is_automatic_check_in_out){return false}if(this.isCheckedIn()){return true}const e=fe();if(this.bookingEvent.ROOM_INFO?.in_out?.code==="000"&&fe().isSameOrAfter(new Date(this.bookingEvent.TO_DATE),"days")&&R(e.toDate(),P(y.checkin_checkout_hours?.offset,y.checkin_checkout_hours?.hour))){return true}return false}handleBlockDateUpdate(e){e.stopImmediatePropagation();e.stopPropagation();const t=e.detail;this.bookingEvent={...this.bookingEvent,...t.data}}handleEditBooking(){this.bookingEvent.TITLE=g.entries.Lcz_EditBookingFor;this.handleBookingOption("EDIT_BOOKING")}getStringDateFormat(e){return e.getFullYear()+"-"+(e.getMonth()<9?"0":"")+(e.getMonth()+1)+"-"+(e.getDate()<=9?"0":"")+e.getDate()}handleAddRoom(){let e=new Date(this.bookingEvent.FROM_DATE);e.setHours(0,0,0,0);let t=this.getStringDateFormat(e);let i=new Date(this.bookingEvent.TO_DATE);i.setHours(0,0,0,0);let a=this.getStringDateFormat(i);let r={ID:"",NAME:"",BOOKING_NUMBER:this.bookingEvent.BOOKING_NUMBER,FROM_DATE:t,TO_DATE:a,roomsInfo:this.bookingEvent.roomsInfo,ARRIVAL:this.bookingEvent.ARRIVAL,ADD_ROOM_TO_BOOKING:this.bookingEvent.ID,TITLE:"Add Room to #"+this.bookingEvent.BOOKING_NUMBER,event_type:"ADD_ROOM",ROOMS:this.bookingEvent.ROOMS,GUEST:this.bookingEvent.GUEST,message:this.bookingEvent.NOTES,SOURCE:this.bookingEvent.SOURCE,booking:this.bookingEvent?.base_booking,defaultDateRange:{fromDate:e,fromDateStr:"",toDate:i,toDateStr:"",dateDifference:0,editabled:true,message:"Including 5.00% City Tax - Excluding 11.00% VAT"}};this.handleBookingOption("ADD_ROOM",r)}handleCustomerCheckIn(){const{adult_nbr:e,children_nbr:t,infant_nbr:i}=this.bookingEvent.ROOM_INFO.occupancy;this.showDialog.emit({reason:"checkin",bookingNumber:this.bookingEvent.BOOKING_NUMBER,roomIdentifier:this.bookingEvent.IDENTIFIER,roomName:"",roomUnit:"",sidebarPayload:{identifier:this.bookingEvent.IDENTIFIER,bookingNumber:this.bookingEvent.BOOKING_NUMBER,checkin:false,roomName:this.bookingEvent.ROOM_INFO.unit?.name??"",sharing_persons:this.bookingEvent.ROOM_INFO.sharing_persons,totalGuests:e+t+i}})}handleCustomerCheckOut(){this.showDialog.emit({reason:"checkout",bookingNumber:this.bookingEvent.BOOKING_NUMBER,roomIdentifier:this.bookingEvent.IDENTIFIER,roomName:"",roomUnit:""})}handleDeleteEvent(){this.hideBubble();this.deleteButton.emit(this.bookingEvent.POOL);console.log("Delete Event")}async handleUpdateBlockedDates(){try{this.isLoading="update";setTimeout((()=>{this.hideBubble()}),50);await this.eventService.updateBlockedEvent(this.bookingEvent);this.isLoading=""}catch(e){}}handleConvertBlockedDateToBooking(){this.handleBookingOption("BAR_BOOKING")}getRoomInfo(){const e=+this.bookingEvent.PR_ID;let t={};for(const i of this.bookingEvent.roomsInfo){for(const a of i.physicalrooms){if(e===a.id){t.CATEGORY=i.name;t.ROOM_NAME=a.name;t.ROOMS_INFO=i;return t}}}return t}renderTitle(e,t){switch(e){case"EDIT_BOOKING":return`${g.entries.Lcz_EditBookingFor} ${t.CATEGORY} ${t.ROOM_NAME}`;case"ADD_ROOM":return`${g.entries.Lcz_AddingUnitToBooking}# ${this.bookingEvent.BOOKING_NUMBER}`;case"SPLIT_BOOKING":return g.entries.Lcz_Adding+` ${t.CATEGORY} ${t.ROOM_NAME}`;default:return`${g.entries.Lcz_NewBookingFor} ${t.CATEGORY} ${t.ROOM_NAME}`}}handleBookingOption(e,t=null){const i=this.getRoomInfo();let a=t?t:this.bookingEvent;a.event_type=e;a.TITLE=this.renderTitle(e,i);if(["003","002","004"].includes(this.bookingEvent.STATUS_CODE)){a.roomsInfo=[i.ROOMS_INFO]}if(e==="BAR_BOOKING"&&this.bookingEvent.STATUS!=="TEMP-EVENT"){const{FROM_DATE:e,TO_DATE:t,PR_ID:i,RELEASE_AFTER_HOURS:r,ENTRY_DATE:o,OPTIONAL_REASON:n,ENTRY_MINUTE:s,ENTRY_HOUR:l,STATUS_CODE:c}=this.bookingEvent;a.block_exposed_unit_props={from_date:e,to_date:t,NOTES:n,pr_id:i,STAY_STATUS_CODE:c,DESCRIPTION:r,BLOCKED_TILL_DATE:o,BLOCKED_TILL_HOUR:l,BLOCKED_TILL_MINUTE:s};this.handleDeleteEvent()}this.showBookingPopup.emit({key:"add",data:{...a}});this.hideBubbleInfo.emit({key:"hidebubble",currentInfoBubbleId:this.getBookingId()})}getOTANotes(e=3){if(!this.bookingEvent.ota_notes||this.bookingEvent.ota_notes?.length===0){return null}const t=[...this.bookingEvent.ota_notes];const i="<br>- ";if(t.length>e){t[e-1]={statement:`${t[e-1].statement} <span style="color: #1e9ff2;">more...</span>`}}return t.slice(0,e).map((e=>`${i}${e.statement}`)).join("")}canSplitBooking(){const e=this.bookingEvent?.defaultDates?.from_date;const t=this.bookingEvent?.defaultDates?.to_date;const i=fe(e,"YYYY-MM-DD",true).startOf("day");const a=fe(t,"YYYY-MM-DD",true).startOf("day");if(!i.isValid()||!a.isValid())return false;const r=a.diff(i,"days");if(r<2)return false;const o=fe().startOf("day");if(a.diff(o,"days")<1)return false;return true}getInfoElement(){return t("div",{class:`iglPopOver infoBubble ${this.bubbleInfoTop?"bubbleInfoAbove":""} text-left`},t("div",{class:`d-flex p-0 m-0  ${this.bookingEvent.BALANCE>1?"pb-0":"pb-1"}`},t("div",{class:"px-0  font-weight-bold font-medium-1 d-flex align-items-center",style:{flex:"1 1 0%"}},t("img",{src:this.bookingEvent?.origin?.Icon,alt:this.bookingEvent?.origin?.Label,class:"icon-image"}),t("p",{class:"p-0 m-0"},!this.bookingEvent.is_direct?this.bookingEvent.channel_booking_nbr:this.bookingEvent.BOOKING_NUMBER)),t("div",{class:"pr-0  text-right d-flex align-items-center",style:{gap:"0.5rem"}},t("ir-dropdown",{caret:false,onOptionChange:async e=>{const t=e.detail==="none"?null:y.property.calendar_extra?.booking_colors.find((t=>t.color===e.detail));await this.propertyService.setRoomCalendarExtra({property_id:y.property.id,room_identifier:this.bookingEvent.IDENTIFIER,value:JSON.stringify({booking_color:t})});this.bookingColor=t},style:{"--ir-dropdown-menu-min-width":"fit-content",width:"1.5rem"}},t("button",{class:"booking-event-hover__color-picker-trigger",slot:"trigger"},this.bookingColor?t("div",{style:{height:"1rem",width:"1rem",background:this.bookingColor?.color,borderRadius:"0.21rem"}}):t("ir-icons",{class:"p-0 m-0 d-flex align-items-center",style:{"--icon-size":"1rem",height:"1rem",width:"1rem",background:this.baseColor,color:"white",borderRadius:"0.21rem",padding:"0.25rem"},name:"ban"})),t("ir-dropdown-item",{value:"none"},t("ir-icons",{class:"p-0 m-0 d-flex align-items-center",style:{"--icon-size":"1rem",height:"1rem",width:"1rem"},name:"ban"})),y.property.calendar_extra?.booking_colors.map((e=>t("ir-dropdown-item",{value:e.color},t("div",{style:{height:"1rem",width:"1rem",borderRadius:"0.21rem",background:e.color}}))))),v(this.currency.symbol,this.getTotalPrice()))),this.bookingEvent.BALANCE>1&&t("p",{class:"pr-0 m-0 p-0 text-right balance_amount"},g.entries.Lcz_Balance,": ",v(this.currency.symbol,this.bookingEvent.BALANCE)),t("div",{class:"row p-0 m-0"},t("div",{class:"px-0 pr-0 col-12"},t("ir-date-view",{from_date:this.bookingEvent.defaultDates.from_date,to_date:this.bookingEvent.defaultDates.to_date,showDateDifference:false}))),this.bookingEvent.NAME&&t("ir-label",{containerStyle:{padding:"0",margin:"0"},class:"m-0 p-0",labelText:`Guest name:`,content:this.bookingEvent.NAME}),this.getArrivalTime()&&t("ir-label",{containerStyle:{padding:"0",margin:"0"},class:"m-0 p-0",labelText:`${g.entries.Lcz_ArrivalTime}:`,content:this.getArrivalTime()}),this.getTotalOccupants()&&t("ir-label",{class:"m-0 p-0",containerStyle:{padding:"0",margin:"0"},labelText:`${g.entries.Lcz_Occupancy}:`,content:this.getTotalOccupants()}),this.getPhoneNumber()&&t("ir-label",{containerStyle:{padding:"0",margin:"0"},class:"m-0 p-0",labelText:`${g.entries.Lcz_Phone}:`,content:this.renderPhone()}),this.getRatePlan()&&t("ir-label",{containerStyle:{padding:"0",margin:"0"},class:"m-0 p-0",labelText:`${g.entries.Lcz_RatePlan}:`,content:this.getRatePlan()}),this.bookingEvent.DEPARTURE_TIME?.code!=="000"&&t("ir-label",{containerStyle:{padding:"0",margin:"0"},class:"m-0 p-0",labelText:`Departure time:`,content:this.bookingEvent.DEPARTURE_TIME?.description}),this.bookingEvent.PRIVATE_NOTE&&t("ir-label",{containerStyle:{padding:"0",margin:"0"},class:"m-0 p-0",labelText:`${g.entries.Lcz_BookingPrivateNote}:`,display:"inline",content:this.bookingEvent.PRIVATE_NOTE}),this.bookingEvent.is_direct&&t("ir-label",{containerStyle:{padding:"0",margin:"0"},labelText:`${g.entries.Lcz_GuestRemark}:`,display:"inline",content:this.bookingEvent.NOTES}),t("ir-label",{containerStyle:{padding:"0",margin:"0"},labelText:`${g.entries.Lcz_ChannelNotes}:`,display:"inline",content:this.getOTANotes(),renderContentAsHtml:true}),this.getInternalNote()&&t("ir-label",{labelText:`${g.entries.Lcz_InternalRemark}:`,content:this.getInternalNote()}),t("div",{class:"row p-0 m-0 mt-2"},t("div",{class:"full-width d-flex align-items-center",style:{gap:"0.25rem"},role:"group"},t("ir-button",{style:{"--icon-size":"0.875rem"},onClickHandler:()=>this.handleEditBooking(),class:"w-100",btn_block:true,text:g.entries.Lcz_Edit,btn_styles:"h-100",size:"sm"}),this.bookingEvent.is_direct&&this.bookingEvent.IS_EDITABLE&&!this.hideButtons&&t("ir-button",{style:{"--icon-size":"0.875rem"},text:g.entries.Lcz_AddRoom,size:"sm",class:"w-100",btn_styles:"h-100",onClickHandler:()=>this.handleAddRoom()}),this.canSplitBooking()&&t("ir-button",{class:"w-100",style:{"--icon-size":"0.875rem"},text:"Split",onClickHandler:()=>this.handleSplitBooking(),btn_styles:"h-100",size:"sm"}),this.canCheckIn()&&t("ir-button",{class:"w-100",style:{"--icon-size":"0.875rem"},text:g.entries.Lcz_CheckIn,onClickHandler:()=>this.handleCustomerCheckIn(),btn_styles:"h-100",size:"sm"}),this.canCheckOut()&&t("ir-button",{class:"w-100",btn_styles:"h-100",style:{"--icon-size":"0.875rem"},text:g.entries.Lcz_CheckOut,onClickHandler:()=>this.handleCustomerCheckOut(),size:"sm"}),this.hideButtons?null:!this.shouldHideUnassignUnit&&t("ir-button",{class:"w-100",btn_styles:"h-100",style:{"--icon-size":"0.875rem"},size:"sm",text:g.entries.Lcz_Unassign,onClickHandler:e=>{this.handleDeleteEvent()}}))))}handleSplitBooking(){this.hideBubble();this.openCalendarSidebar.emit({type:"split",payload:{booking:this.bookingEvent.base_booking,identifier:this.bookingEvent.IDENTIFIER}})}getNewBookingOptions(){const e=this.bookingEvent.roomsInfo[0].rateplans.some((e=>e.is_active));return t("div",{class:`iglPopOver d-flex flex-column newBookingOptions ${this.bubbleInfoTop?"bubbleInfoAbove":""} text-left`,style:{gap:"0.5rem"}},e?t(r,null,t("ir-button",{size:"sm",btn_block:true,"data-testid":"bar_booking_btn",text:g.entries.Lcz_CreateNewBooking,onClickHandler:e=>{this.handleBookingOption("BAR_BOOKING")}}),this.hasSplitBooking()&&t("ir-button",{size:"sm",btn_block:true,text:g.entries.Lcz_AssignUnitToExistingBooking,onClickHandler:e=>{this.handleBookingOption("SPLIT_BOOKING")}})):t("p",{class:"text-danger"},g.entries.Lcz_NoRatePlanDefined),t("ir-button",{size:"sm",text:g.entries.Lcz_Blockdates,btn_block:true,onClickHandler:e=>{this.handleBookingOption("BLOCK_DATES")}}))}getBlockedView(){console.log("booking event",this.bookingEvent);return t("div",{class:`iglPopOver blockedView ${this.bubbleInfoTop?"bubbleInfoAbove":""} text-left`},t("igl-block-dates-view",{isEventHover:true,entryHour:this.bookingEvent.ENTRY_HOUR,entryMinute:this.bookingEvent.ENTRY_MINUTE,defaultData:this.bookingEvent,fromDate:this.bookingEvent.defaultDates.from_date,toDate:this.bookingEvent.defaultDates.to_date,entryDate:this.getEntryDate(),onDataUpdateEvent:e=>this.handleBlockDateUpdate(e)}),t("div",{class:"row p-0 m-0 mt-2"},t("div",{class:"full-width d-flex align-items-center",style:{gap:"0.25rem"},role:"group"},t("ir-button",{btn_disabled:this.isLoading==="update",text:g.entries.Lcz_Update,onClickHandler:e=>{this.handleUpdateBlockedDates()},icon_name:"edit",size:"sm",btn_styles:"h-100",isLoading:this.isLoading==="update",style:{"--icon-size":"0.875rem"},btn_block:true,class:"w-100"}),t("ir-button",{class:"w-100 h-100 my-0",btn_block:true,btn_styles:"h-100",size:"sm",text:g.entries.Lcz_ConvertSplitBooking,onClickHandler:()=>{this.handleConvertBlockedDateToBooking()}}),t("ir-button",{class:"w-100",btn_styles:"h-100",btn_block:true,size:"sm",style:{"--icon-size":"0.875rem"},icon_name:"trash",btn_color:"danger",onClickHandler:e=>{this.handleDeleteEvent()},text:g.entries.Lcz_Delete}))))}render(){return t(i,{key:"77570fb96bf6c7a31c2a3d3840a13ad1a49cec16"},t("div",{key:"f38eb826fafcee368bae5633353e962f053fbf5d",class:`pointerContainer ${this.bubbleInfoTop?"pointerContainerTop":""}`},t("div",{key:"cbee74d9e5564b2ee3f7d732e16ec7704bd50b09",class:`bubblePointer ${this.bubbleInfoTop?"bubblePointTop":"bubblePointBottom"}`})),this.isBlockedDateEvent()?this.getBlockedView():null,this.isNewBooking()?this.getNewBookingOptions():null,!this.isBlockedDateEvent()&&!this.isNewBooking()?this.getInfoElement():null)}static get watchers(){return{bookingEvent:["handleBookingEventChange"]}}};Ot.style=zt;const At=".sc-igl-booking-form-h{display:flex;flex-direction:column}";const Bt=At;const Rt=class{constructor(t){e(this,t);this.dataUpdateEvent=a(this,"dataUpdateEvent",7);this.buttonClicked=a(this,"buttonClicked",7)}showPaymentDetails;currency;isEditOrAddRoomEvent;dateRangeData;bookingData;showSplitBookingOption;language;bookedByInfoData;propertyId;bedPreferenceType;selectedRooms;isLoading;countries;selectedGuestData;defaultGuestData;selectedBookedByData;guestData;selectedUnits={};dataUpdateEvent;buttonClicked;componentWillLoad(){this.initializeGuestData();this.selectedBookedByData=this.bookedByInfoData}initializeGuestData(){let e=0;const t={...this.selectedUnits};const i=(e,t,i,a)=>{if(i&&a===2){return e*t}return e};this.selectedUnits=t;this.guestData=[];this.selectedRooms.forEach(((a,r)=>{a.forEach((a=>{t[r]=a.selectedUnits;e+=a.totalRooms*i(a.rate,this.dateRangeData.dateDifference,a.isRateModified,a.rateType);for(let e=1;e<=a.totalRooms;e++){this.guestData.push({guestName:"",roomId:"",preference:"",...a})}}))}));this.bookingData.TOTAL_PRICE=e}handleOnApplicationInfoDataUpdateEvent(e,t){const i=e.detail;const a=`c_${i.data.roomCategoryId}`;const r=[...this.selectedUnits[a]||[]];r[t]=i.data.roomId;this.selectedUnits={...this.selectedUnits,[a]:r};this.dataUpdateEvent.emit({key:"applicationInfoUpdateEvent",value:e.detail})}handleEventData(e,t,i){if(t==="application-info"){this.handleOnApplicationInfoDataUpdateEvent(e,i)}else{this.selectedBookedByData=e.detail.data;this.dataUpdateEvent.emit({key:"propertyBookedBy",value:e.detail})}}isGuestDataIncomplete(){if(this.selectedGuestData.length!==this.guestData.length){return true}for(const e of this.selectedGuestData){if(e.guestName===""||e.preference===""||e.roomId===""){return true}}return false}isButtonDisabled(e){const t=(e,t,i)=>{if(!e){return true}if(e===this.selectedGuestData){return this.isGuestDataIncomplete()}if(t==="selectedArrivalTime"){if(e[t]!==undefined){return e[t].code===""}else{return true}}return e[t]===i||e[t]===undefined};return this.isLoading===e||t(this.selectedGuestData,"guestName","")||t(this.selectedBookedByData,"isdCode","")||t(this.selectedBookedByData,"contactNumber","")||t(this.selectedBookedByData,"firstName","")||t(this.selectedBookedByData,"lastName","")||t(this.selectedBookedByData,"countryId",-1)||t(this.selectedBookedByData,"selectedArrivalTime","")||t(this.selectedBookedByData,"email","")}render(){return t("div",{key:"00e76925601991f8af6dbf3217115e5ebbb450c5",class:"d-flex flex-column h-100"},t("div",{key:"fd57b91dda0c0cf44ed5118e4a6d4d1b664df32d",class:"d-flex flex-wrap"},t("ir-date-view",{key:"407ce5b98ad942bd2588c3f930a8e1ca5c770098",class:"mr-1 flex-fill font-weight-bold font-medium-1",from_date:new Date(this.dateRangeData.fromDate),to_date:new Date(this.dateRangeData.toDate),dateOption:"DD MMM YYYY"}),this.guestData.length>1&&t("div",{key:"6a63ee8bf23a8c77d97717a2a34ada93959c53bf",class:"mt-1 mt-md-0 text-right"},g.entries.Lcz_TotalPrice," ",t("span",{key:"94aee72dcc60a12535408c4aabbd129bd8250fc9",class:"font-weight-bold font-medium-1"},v(this.currency.symbol,this.bookingData.TOTAL_PRICE||"0")))),Object.values(n.ratePlanSelections).map((e=>Object.values(e).map((e=>{const i=e;if(i.reserved===0){return null}return[...new Array(i.reserved)].map(((e,a)=>t("igl-application-info",{totalNights:Number(this.dateRangeData.dateDifference),bedPreferenceType:this.bedPreferenceType,currency:this.currency,guestInfo:i.guest?i.guest[a]:null,bookingType:this.bookingData.event_type,rateplanSelection:i,key:`${i.ratePlan.id}_${a}`,roomIndex:a,baseData:this.bookingData.event_type==="EDIT_BOOKING"?{roomtypeId:this.bookingData.currentRoomType.roomtype.id,unit:this.bookingData.currentRoomType.unit}:undefined})))})))),this.isEditOrAddRoomEvent||this.showSplitBookingOption?null:t("igl-property-booked-by",{propertyId:this.propertyId,countries:this.countries,language:this.language,showPaymentDetails:this.showPaymentDetails,defaultData:this.bookedByInfoData,onDataUpdateEvent:e=>{this.handleEventData(e,"propertyBookedBy",0)}}))}};Rt.style=Bt;const Pt=".sc-igl-booking-overview-page-h{display:block}.sc-igl-booking-overview-page-h>*.sc-igl-booking-overview-page{margin:0;padding:auto}.scrollContent.sc-igl-booking-overview-page{height:calc(100% - 79px);overflow:auto;position:relative}.loading-container.sc-igl-booking-overview-page{display:flex;align-items:center;justify-content:center;height:100%;background:white;position:absolute;inset:0;z-index:100}.loader.sc-igl-booking-overview-page{width:1.25rem;height:1.25rem;border:2.5px solid #3f3f3f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}";const Nt=Pt;const Lt=class{constructor(t){e(this,t);this.roomsDataUpdate=a(this,"roomsDataUpdate",7)}bookingData;propertyId;message;showSplitBookingOption;eventType;currency;adultChildConstraints;ratePricingMode;dateRangeData;defaultDaterange;selectedRooms;adultChildCount;sourceOptions;bookedByInfoData;initialRoomIds;wasBlockedUnit;roomsDataUpdate;getSplitBookings(){return this.bookingData.hasOwnProperty("splitBookingEvents")&&this.bookingData.splitBookingEvents||[]}isEventType(e){return e===this.eventType}setMinDate(){if(!this.isEventType("EDIT_BOOKING")){return}const e=fe(this.bookingData.FROM_DATE,"YYYY-MM-DD");const t=fe();if(e.isAfter(t)){return t.add(-2,"weeks").format("YYYY-MM-DD")}return e.add(-2,"weeks").format("YYYY-MM-DD")}render(){return t(i,{key:"abcae09f280a0201c4ed2b7507dcbbeb9743a76c"},t("igl-book-property-header",{key:"cbca704d8159165dc54abbb0659568f13211e938",wasBlockedUnit:this.wasBlockedUnit,bookedByInfoData:this.bookedByInfoData,defaultDaterange:this.defaultDaterange,dateRangeData:this.dateRangeData,minDate:this.setMinDate(),adultChildCount:this.adultChildCount,splitBookingId:this.showSplitBookingOption,bookingData:this.bookingData,sourceOptions:this.sourceOptions,message:this.message,bookingDataDefaultDateRange:this.bookingData.defaultDateRange,showSplitBookingOption:this.showSplitBookingOption,adultChildConstraints:this.adultChildConstraints,splitBookings:this.getSplitBookings(),propertyId:this.propertyId}),t("div",{key:"463d692859bb9a444ba5710d789387d4f482ec9a",class:" text-left"},be("/Check_Availability")&&this.isEventType("EDIT_BOOKING")?t("div",{class:"loading-container"},t("div",{class:"loader"})):t(r,null,n.roomTypes?.map((e=>t("igl-room-type",{initialRoomIds:this.initialRoomIds,isBookDisabled:Object.keys(this.bookedByInfoData).length<=1,key:`room-type-${e.id}`,currency:this.currency,ratePricingMode:this.ratePricingMode,dateDifference:this.dateRangeData.dateDifference,bookingType:this.bookingData.event_type,roomType:e,class:"mt-2 mb-1 p-0","data-testid":`room_type_${e.id}`,id:e.id.toString(),roomInfoId:this.selectedRooms.has(`c_${e.id}`)?e.id:null,onDataUpdateEvent:e=>this.roomsDataUpdate.emit(e.detail)}))))))}};Lt.style=Nt;class $t{isActive=false;onIntercept;constructor(e){this.onIntercept=e.onIntercept??(()=>{});if(e.autoActivate){this.activate()}}activate(){if(this.isActive)return;window.addEventListener("beforeunload",this.handleBeforeUnload,{capture:true});this.isActive=true}deactivate(){if(!this.isActive)return;window.removeEventListener("beforeunload",this.handleBeforeUnload,{capture:true});this.isActive=false}handleBeforeUnload=e=>{this.onIntercept();e.preventDefault();e.returnValue=""}}const Ft=".sc-igl-bulk-block-h{display:flex;flex-direction:column;flex:1 1 0%;height:100%}.bulk-sheet-container.sc-igl-bulk-block{display:flex;flex-direction:column;flex:1;min-height:0;gap:1rem}.animated-container.sc-igl-bulk-block{transition:all 0.5s ease}.physical-room.sc-igl-bulk-block{margin-left:1rem !important;padding-top:0.5rem}.physical-room.sc-igl-bulk-block>td.sc-igl-bulk-block:last-child{padding-left:1rem}.room-type-list.sc-igl-bulk-block{padding:0;margin:0}.room-type-list.sc-igl-bulk-block>li.sc-igl-bulk-block,.physical-room.sc-igl-bulk-block,.room-type-row.sc-igl-bulk-block{list-style:none}";const Ht=Ft;const Ut=".sc-igl-bulk-block-h{height:100%}.sheet-container.sc-igl-bulk-block{display:flex !important;flex-direction:column !important;background:white;height:100vh;gap:1rem;z-index:1000}.sheet-container.sc-igl-bulk-block{height:-webkit-fill-available;height:100vh;height:100dvh}.sheet-footer.sc-igl-bulk-block{position:sticky;bottom:0;z-index:20;background:white;border-top:1px solid #e4e5ec;display:flex;flex-direction:column;padding:1rem;gap:0.5rem}.sheet-header.sc-igl-bulk-block{position:sticky;top:0;z-index:10;background:white}.sheet-body.sc-igl-bulk-block{flex:1 1 0%}@media (min-width: 768px){.sheet-footer.sc-igl-bulk-block{flex-direction:row;align-items:center}}";const jt=Ut;const Vt=class{constructor(t){e(this,t);this.closeModal=a(this,"closeModal",7);this.toast=a(this,"toast",7)}maxDatesLength=8;property_id;selectedRoomTypes=new Map;selectedUnit=null;errors;isLoading;blockState="block";dates=[{from:null,to:null}];closeModal;toast;sidebar;dateRefs=[];reloadInterceptor;minDate=fe().format("YYYY-MM-DD");bookingService=new l;datesSchema=z.array(z.object({from:z.any().refine((e=>fe.isMoment(e)),{message:"Invalid 'from' date; expected a Moment object."}).transform((e=>e.format("YYYY-MM-DD"))),to:z.any().refine((e=>fe.isMoment(e)),{message:"Invalid 'to' date; expected a Moment object."}).transform((e=>e.format("YYYY-MM-DD")))}));unitSections;datesSections;componentDidLoad(){this.reloadInterceptor=new $t({autoActivate:false});this.sidebar=document.querySelector("ir-sidebar")}disconnectedCallback(){this.reloadInterceptor.deactivate()}async addBlockDates(){try{this.errors=null;this.isLoading=true;const e=this.datesSchema.parse(this.dates);if(!this.selectedUnit){this.unitSections.scrollIntoView({behavior:"smooth",block:"center"});this.errors="rooms";return}if(this.blockState==="block"){await this.bookingService.blockAvailabilityForBrackets({unit_id:this.selectedUnit?.unit_id,description:"",property_id:y.property.id,block_status_code:"002",brackets:e.map((e=>({from_date:e.from,to_date:e.to})))})}else{await this.bookingService.unBlockUnitByPeriod({unit_id:this.selectedUnit?.unit_id,from_date:e[0].from,to_date:e[0].to})}this.activate();this.deactivate();this.toast.emit({type:"success",title:g.entries.Lcz_RequestSubmittedSuccessfully,description:""});this.isLoading=false;this.closeModal.emit()}catch(e){console.log(e);if(e instanceof N){this.datesSections.scrollIntoView({behavior:"smooth",block:"center"});this.errors="dates"}}finally{this.isLoading=false}}activate(){this.reloadInterceptor.activate();if(this.sidebar)this.sidebar.preventClose=true}deactivate(){this.reloadInterceptor.deactivate();if(this.sidebar)this.sidebar.preventClose=false}handleDateChange({index:e,date:t,key:i}){const a=[...this.dates];a[e]={...a[e],[i]:t};if(i==="from"&&a[e].to?.isBefore(t,"dates")){a[e].to=null}for(let i=e+1;i<a.length;i++){const e=a[i]?.from;if(e&&e.isSameOrBefore(t,"day")){a[i]={from:null,to:null}}}this.dates=a;setTimeout((()=>{if(i==="from"){this.dateRefs[e]?.to.openDatePicker()}else{const e=a.findIndex((e=>e.from===null));if(e>-1){this.dateRefs[e]?.from.openDatePicker()}}}),100)}addDateRow(){const e=this.dates[this.dates.length-1];if(!e.from||!e.to){this.errors="dates";return}this.errors=null;this.dates=[...this.dates,{from:null,to:null}];setTimeout((()=>{this.dateRefs[this.dates.length-1].to?.scrollIntoView({behavior:"smooth",block:"center"})}),100)}render(){return t("form",{key:"d2b1cf0bd4b31b67d5873dc92cc09b150e34bf03",class:"bulk-sheet-container",onSubmit:e=>{e.preventDefault();this.addBlockDates()}},t("div",{key:"a31d9ce9ce2f9eee794cea3c433666527992ea54",class:"sheet-body px-1"},t("div",{key:"08268dcd20a051883e434833d8d4e6d2b4547da7",class:"text-muted text-left pt-0 my-0 d-flex align-items-center pb-1",style:{gap:"0.5rem"}},t("p",{key:"c54cfcc3eea6751678a6a7e3d102c8252bd26a2d",class:"m-0 p-0"},"Select the unit to"),t("ir-select",{key:"1f0689a8fd1612993ef0f94e92de99e901406621",showFirstOption:false,selectedValue:this.blockState,data:[{text:"Block",value:"block"},{text:"Unblock",value:"unblock"}],onSelectChange:e=>{this.blockState=e.detail}})),t("div",{key:"c7de6f89aef9ff8b2bf7cc55f8d9a15aeabd4a41"},this.errors==="rooms"&&t("p",{key:"850960c18e5c359ba37d102553a519eb84260703",class:"text-danger text-left smaller p-0 ",style:{"margin-bottom":"0.5rem"}},y.is_vacation_rental?g.entries.Lcz_PlzSelectOneListing:g.entries.Lcz_PlzSelectOneUnit),t("ul",{key:"ddde10b1f061152be683add2066d4b9e035fdf34",class:"room-type-list",ref:e=>this.unitSections=e},y.roomsInfo.map((e=>t(r,null,t("li",{key:`roomTypeRow-${e.id}`,class:`room-type-row`},t("div",{class:"d-flex choice-row"},t("span",{class:"pl-1 text-left room-type-name"},e.name))),e.physicalrooms.map(((i,a)=>{const r=a===e.physicalrooms.length-1?"pb-1":"";return t("li",{key:`physicalRoom-${i.id}-${a}`,class:`physical-room ${r}`},t("div",{class:"d-flex choice-row"},t("ir-radio",{class:"pl-1 ",name:"unit",checked:this.selectedUnit?.unit_id===i.id,onCheckChange:()=>this.selectedUnit={roomtype_id:e.id,unit_id:i.id},label:i.name})))}))))))),t("table",{key:"63919ad06f19672d7f35c95ceb07add61c3e92e7",class:"mt-1",ref:e=>this.datesSections=e},t("thead",{key:"b46bf2cc8d4065d0458c57707458dd3a795409aa"},t("tr",{key:"b5aa34c87104c34f809690abd629ac0c5ee5b0e6"},t("th",{key:"d989a4ced64f17cdc238b1b57f74794efdad37d0",class:"text-left"},g.entries.Lcz_From),t("th",{key:"abd85346627b286f196740633fe624f7888c02f8",class:"text-left"},g.entries.Lcz_ToExclusive),t("td",{key:"3d31503a081c680ac07283c0aca58f8e5ab09d12"},this.dates.length!==this.maxDatesLength&&this.blockState==="block"&&t("ir-button",{key:"14adc377a4a51bf5de48741ad7609d4af33a78ff",variant:"icon",icon_name:"plus",onClickHandler:()=>{this.addDateRow()}})))),t("tbody",{key:"c41fef76d23e477fa324abf9d4e3715d79a1225d"},this.dates.map(((e,i)=>{if(!this.dateRefs[i]){this.dateRefs[i]={}}const a=i>0?this.dates[i-1]?.to.clone().add(1,"days")?.format("YYYY-MM-DD")??this.minDate:this.minDate;const r=this.dates[i].from?this.dates[i]?.from.clone().add(1,"days")?.format("YYYY-MM-DD"):this.minDate;return t("tr",{key:`date_${i}`},t("td",{class:"pr-1 pb-1"},t("ir-date-picker",{ref:e=>{this.dateRefs[i].from=e},forceDestroyOnUpdate:true,minDate:a,"data-testid":"pickup_arrival_date",date:e.from?.format("YYYY-MM-DD"),emitEmptyDate:true,"aria-invalid":String(this.errors==="dates"&&!e.from),onDateChanged:e=>{e.stopImmediatePropagation();e.stopPropagation();this.handleDateChange({index:i,date:e.detail.start,key:"from"})},onDatePickerFocus:e=>{e.stopImmediatePropagation();e.stopPropagation();if(i===0){return}const t=this.dates.findIndex((e=>!e.from||!e.to));if(!this.dates[t]?.from){this.dateRefs[t]?.from.openDatePicker();return}if(!this.dates[t]?.to){this.dateRefs[t].to.openDatePicker()}}},t("input",{type:"text",slot:"trigger",value:e.from?e.from.format("MMM DD, YYYY"):null,class:`form-control input-sm ${this.errors==="dates"&&!e.to?"border-danger":""} text-center`,style:{width:"100%"}}))),t("td",{class:"pr-1 pb-1"},t("ir-date-picker",{forceDestroyOnUpdate:true,ref:e=>{this.dateRefs[i].to=e},"data-testid":"pickup_arrival_date",date:e.to?.format("YYYY-MM-DD"),emitEmptyDate:true,minDate:r,"aria-invalid":String(this.errors==="dates"&&!e.to),onDateChanged:e=>{e.stopImmediatePropagation();e.stopPropagation();this.handleDateChange({index:i,date:e.detail.start,key:"to"})},maxDate:e.from?fe(e.from).add(3,"months").format("YYYY-MM-DD"):undefined,onDatePickerFocus:e=>{e.stopImmediatePropagation();e.stopPropagation();const t=this.dates.findIndex((e=>!e.from||!e.to));if(!this.dates[t]?.from){this.dateRefs[t]?.from?.openDatePicker();return}if(!this.dates[t]?.to){this.dateRefs[t].to.openDatePicker()}}},t("input",{type:"text",slot:"trigger",value:e.to?e.to.format("MMM DD, YYYY"):null,class:`form-control input-sm \n                          ${this.errors==="dates"&&!e.to?"border-danger":""}\n                          text-center`,style:{width:"100%"}}))),i>0&&t("td",{class:"pb-1"},t("ir-button",{variant:"icon",icon_name:"minus",onClickHandler:()=>{this.dates=this.dates.filter(((e,t)=>t!==i))}})))}))))),t("div",{key:"df83f05e163840542eec16caafb9398239fda5c3",class:"sheet-footer"},t("ir-button",{key:"6794eb047e690e8a522e84a1a6b77ffccf1b694d",text:g.entries.Lcz_Cancel,btn_color:"secondary",class:"flex-fill",onClickHandler:()=>this.closeModal.emit(null)}),t("ir-button",{key:"fa7546a1a61669fff080a3d91dff6567cd287fa4",isLoading:this.isLoading,text:g.entries.Lcz_Confirm,btn_type:"submit",class:"flex-fill"})))}};Vt.style=Ht+jt;const Gt=".bulk-operations-sheet-container.sc-igl-bulk-operations{display:flex;flex-direction:column;height:auto !important;min-height:100vh;background:white !important}.animated-container.sc-igl-bulk-operations{transition:all 0.5s ease}.tabs.sc-igl-bulk-operations{position:sticky;top:var(--ir-tabs-top, 54px);background-color:white;z-index:9999999;padding-top:1rem;margin-bottom:1rem}";const qt=Gt;const Kt=".sc-igl-bulk-operations-h{height:100%}.sheet-container.sc-igl-bulk-operations{display:flex !important;flex-direction:column !important;background:white;height:100vh;gap:1rem;z-index:1000}.sheet-container.sc-igl-bulk-operations{height:-webkit-fill-available;height:100vh;height:100dvh}.sheet-footer.sc-igl-bulk-operations{position:sticky;bottom:0;z-index:20;background:white;border-top:1px solid #e4e5ec;display:flex;flex-direction:column;padding:1rem;gap:0.5rem}.sheet-header.sc-igl-bulk-operations{position:sticky;top:0;z-index:10;background:white}.sheet-body.sc-igl-bulk-operations{flex:1 1 0%}@media (min-width: 768px){.sheet-footer.sc-igl-bulk-operations{flex-direction:row;align-items:center}}";const Wt=Kt;const Xt=class{constructor(t){e(this,t);this.closeModal=a(this,"closeModal",7);this.toast=a(this,"toast",7)}maxDatesLength=8;property_id;closeModal;toast;selectedTab;tabs=[{id:"stop-sale",label:"Stop/Open Sale"},{id:"block",label:"Block Unit"}];tabsEl;titleEl;componentDidLoad(){this.tabsEl.style.setProperty("--ir-tabs-top",this.titleEl?.getBoundingClientRect()?.height?.toString()+"px")}render(){return t("div",{key:"490eda0ebec1511cb6361cde66fb64a810657675",class:"bulk-operations-sheet-container"},t("div",{key:"b6091a4f6459e23481ede63a6fcf71b5568d59cc",class:"sheet-header d-flex align-items-center"},t("ir-title",{key:"e74ed590f9e06f5c0b72ab53b0f71e5354f09ac3",ref:e=>this.titleEl=e,onCloseSideBar:e=>{e.stopImmediatePropagation();e.stopPropagation();this.closeModal.emit(null)},class:"px-1 mb-0",label:"Bulk Operations",displayContext:"sidebar"})),t("ir-tabs",{key:"11bf6ac148a57c550152c1043adee8577d97cee0",ref:e=>this.tabsEl=e,class:"tabs",tabs:this.tabs,onTabChanged:e=>this.selectedTab=e.detail}),this.selectedTab?.id==="stop-sale"?t("igl-bulk-stop-sale",{maxDatesLength:this.maxDatesLength,property_id:this.property_id}):t("igl-bulk-block",{maxDatesLength:this.maxDatesLength,property_id:this.property_id}))}};Xt.style=qt+Wt;const Jt=".sc-igl-bulk-stop-sale-h{display:flex;flex-direction:column;flex:1 1 0%;height:100%}.bulk-sheet-container.sc-igl-bulk-stop-sale{display:flex;flex-direction:column;flex:1;min-height:0;gap:1rem}.animated-container.sc-igl-bulk-stop-sale{transition:all 0.5s ease}.days-checkbox.sc-igl-bulk-stop-sale{gap:0.5rem}";const Qt=Jt;const Zt=".sc-igl-bulk-stop-sale-h{height:100%}.sheet-container.sc-igl-bulk-stop-sale{display:flex !important;flex-direction:column !important;background:white;height:100vh;gap:1rem;z-index:1000}.sheet-container.sc-igl-bulk-stop-sale{height:-webkit-fill-available;height:100vh;height:100dvh}.sheet-footer.sc-igl-bulk-stop-sale{position:sticky;bottom:0;z-index:20;background:white;border-top:1px solid #e4e5ec;display:flex;flex-direction:column;padding:1rem;gap:0.5rem}.sheet-header.sc-igl-bulk-stop-sale{position:sticky;top:0;z-index:10;background:white}.sheet-body.sc-igl-bulk-stop-sale{flex:1 1 0%}@media (min-width: 768px){.sheet-footer.sc-igl-bulk-stop-sale{flex-direction:row;align-items:center}}";const ei=Zt;const ti=class{constructor(t){e(this,t);this.closeModal=a(this,"closeModal",7);this.toast=a(this,"toast",7)}maxDatesLength=8;property_id;selectedRoomTypes=[];errors;isLoading;dates=[{from:null,to:null}];selectedWeekdays=new Set(Array(7).fill(null).map(((e,t)=>t)));closeModal;toast;sidebar;dateRefs=[];reloadInterceptor;minDate=fe().format("YYYY-MM-DD");bookingService=new l;getDayIndex(e){return fe(e,"YYYY-MM-DD").day()}datesSchema=z.array(z.object({from:z.any().refine((e=>fe.isMoment(e)),{message:"Invalid 'from' date; expected a Moment object."}).transform((e=>e.format("YYYY-MM-DD"))),to:z.any().refine((e=>fe.isMoment(e)),{message:"Invalid 'to' date; expected a Moment object."}).transform((e=>e.format("YYYY-MM-DD")))}));unitSections;weekdaysSections;datesSections;componentDidLoad(){this.reloadInterceptor=new $t({autoActivate:false});this.sidebar=document.querySelector("ir-sidebar")}disconnectedCallback(){this.reloadInterceptor.deactivate()}async addBlockDates(){const e=e=>{const t=[];for(const i of e){let e=i.from;const a=fe(i.to,"YYYY-MM-DD").add(1,"days").format("YYYY-MM-DD");while(e!==a){const i=fe(e,"YYYY-MM-DD").add(1,"days").format("YYYY-MM-DD");if(!this.selectedWeekdays.has(this.getDayIndex(e))){e=i;continue}for(const i of this.selectedRoomTypes){t.push({room_type_id:i.id,night:e})}e=i}}return t};const t=e=>{const t=new Map(M.disabled_cells);const i=new Map(y.roomsInfo.map(((e,t)=>[e.id,{roomType:e,index:t}])));const a=new Map(M.days.map(((e,t)=>[e.value,t])));const r=new Map;for(const o of e){for(const e of o.restrictions){const{night:n,room_type_id:s}=e;const{roomType:l}=i.get(s);if(!l)continue;const c=a.get(n);if(c===undefined){console.warn(`Couldn't find date ${n}`);continue}const d=M.days[c];const h=`${s}_${n}`;let u=r.get(h);if(!u){u=d.rate.find((e=>e.id===s));if(!u){console.warn(`Couldn't find room type ${s}`);continue}r.set(h,u)}const p=u.exposed_inventory.rts===0;for(const e of l.physicalrooms){const i=`${e.id}_${n}`;t.set(i,{disabled:o.is_closed?true:p,reason:o.is_closed?"stop_sale":p?"inventory":"stop_sale"})}}}M["disabled_cells"]=new Map(t)};try{this.errors=null;this.isLoading=true;const i=this.datesSchema.parse(this.dates);if(this.selectedRoomTypes.length===0){this.unitSections.scrollIntoView({behavior:"smooth",block:"center"});this.errors="rooms";return}if(this.selectedWeekdays.size===0){this.weekdaysSections.scrollIntoView({behavior:"smooth",block:"center"});this.errors="weekdays";return}this.activate();const a=e(i);const r=this.selectedRoomTypes.every((e=>e.result==="open"));const o=this.selectedRoomTypes.every((e=>e.result==="closed"));if(o||r){const e={is_closed:o,restrictions:a,property_id:this.property_id};await this.bookingService.setExposedRestrictionPerRoomType(e);t([e])}else{const e=[];for(const t of this.selectedRoomTypes){const i=a.filter((e=>e.room_type_id===t.id));e.push({is_closed:t.result==="closed",restrictions:i,property_id:this.property_id})}await Promise.all(e.map((e=>this.bookingService.setExposedRestrictionPerRoomType(e))));t(e)}this.deactivate();this.toast.emit({type:"success",title:g.entries.Lcz_RequestSubmittedSuccessfully,description:""});this.isLoading=false;this.closeModal.emit()}catch(e){console.log(e);if(e instanceof N){this.datesSections.scrollIntoView({behavior:"smooth",block:"end"});this.errors="dates"}}finally{this.isLoading=false}}activate(){this.reloadInterceptor.activate();if(this.sidebar)this.sidebar.preventClose=true}deactivate(){this.reloadInterceptor.deactivate();if(this.sidebar)this.sidebar.preventClose=false}handleDateChange({index:e,date:t,key:i}){const a=[...this.dates];a[e]={...a[e],[i]:t};if(i==="from"&&a[e].to?.isBefore(t,"dates")){a[e].to=null}for(let i=e+1;i<a.length;i++){const e=a[i]?.from;if(e&&e.isSameOrBefore(t,"day")){a[i]={from:null,to:null}}}this.dates=a;setTimeout((()=>{if(i==="from"){this.dateRefs[e]?.to.openDatePicker()}else{const e=a.findIndex((e=>e.from===null));if(e>-1){this.dateRefs[e]?.from.openDatePicker()}}}),100)}addDateRow(){const e=this.dates[this.dates.length-1];if(!e.from||!e.to){this.errors="dates";return}this.errors=null;this.dates=[...this.dates,{from:null,to:null}];setTimeout((()=>{this.dateRefs[this.dates.length-1].to?.scrollIntoView({behavior:"smooth",block:"center"})}),100)}render(){return t("form",{key:"5562d4126780e80fe0150f5dc3140ce16767f84a",class:"bulk-sheet-container",onSubmit:e=>{e.preventDefault();this.addBlockDates()}},t("div",{key:"eebdf60cfd616989173512444becbc3e5e6155c7",class:"sheet-body px-1"},t("div",{key:"6989696850ae23fe20e5818d791b8eae78ddbd84",class:"text-muted text-left py-0 my-0"},t("p",{key:"a2e4772f1bd0e136d490b04d03dedd83c3863ef4"},"Select the types to stop or open sales for all related rate plans")),t("div",{key:"c4c6eb73d898f7d4595d8498d5963cba2b6e309c"},this.errors==="rooms"&&t("p",{key:"6789a3bf4fcbc7903e154915734d3ba91b09dfaf",class:"text-danger text-left smaller p-0 ",style:{"margin-bottom":"0.5rem"}},y.is_vacation_rental?g.entries.Lcz_PlzSelectOneListing:g.entries.Lcz_PlzSelectOneUnit),t("table",{key:"f2dbb912408acbad566a33407a26ea1b1b69d1c1",ref:e=>this.unitSections=e},t("thead",{key:"0833d47483d0f34fe63c956243e44e0e318af0f7"},t("tr",{key:"0ee5a9d2f4c4a857e884469a9c898311674cb0e4"},t("th",{key:"5243b5f97e67e762d4be9a62835a29d50d22087f",class:"sr-only"},"choice"),t("th",{key:"f09592e1cedbb81f2da2f4ca03e7313d1f275589",class:"sr-only"},"room type"))),t("tbody",{key:"68d348fd2d44c07faf3a300cb318edcb5ec685a5"},y.roomsInfo.map(((e,i)=>{const a=i===y.roomsInfo.length-1?"":"pb-1";return t("tr",{key:e.id},t("td",{class:`choice-row ${a}`},t("div",{class:"d-flex justify-content-end"},t("ir-select",{firstOption:`${g.entries.Lcz_Select}...`,data:[{value:"open",text:g.entries.Lcz_Open},{value:"closed",text:g.entries.Lcz_StopSale}],onSelectChange:t=>{const i=t.detail;const a=this.selectedRoomTypes.filter((t=>t.id!==e.id));if(i){a.push({id:e.id,result:i})}this.selectedRoomTypes=a}}))),t("td",{class:`pl-1 text-left ${a}`},e.name))}))))),t("p",{key:"aed9d623987ba10b0ce84a38c47493fbbc562f35",class:"text-left mt-2 text-muted"},"Included days"),this.errors==="weekdays"&&t("p",{key:"aff1ddb07fc1f0fb4a12294a688a11d1471aad82",class:"text-danger text-left smaller m-0 p-0"},"Please select at least one day"),t("ir-weekday-selector",{key:"65344765d42de10d7fbe9aea64b94b7cc3447b0d",ref:e=>this.weekdaysSections=e,weekdays:Array.from(this.selectedWeekdays),onWeekdayChange:e=>{e.stopPropagation();e.stopImmediatePropagation();this.selectedWeekdays=new Set(e.detail)}}),t("table",{key:"eeb88a7827428df6a7493c91626c0fd981e2f1a1",class:"mt-1",ref:e=>this.datesSections=e},t("thead",{key:"4addd7681b6b6e6b9f533353d3c80e191cdd7a2f"},t("tr",{key:"48796539f10af43d5ed843440e26bdbbb9c52d5e"},t("th",{key:"f3220d70c9ae50a1373af7be6e636bf4ced7ebc6",class:"text-left"},g.entries.Lcz_From),t("th",{key:"904251a12cacbddf45617f42409fb5cfef318c5f",class:"text-left"},g.entries.Lcz_ToExclusive),t("td",{key:"2ecb811f88e257becb4dd2d86d77d4ae817a1fa2"},this.dates.length!==this.maxDatesLength&&t("ir-button",{key:"beed10435007e83f7ba0e4b59e115e96ea9fe195",variant:"icon",icon_name:"plus",onClickHandler:()=>{this.addDateRow()}})))),t("tbody",{key:"5356139594d3045483e0ee607d35f621c3dbbf30"},this.dates.map(((e,i)=>{if(!this.dateRefs[i]){this.dateRefs[i]={}}const a=i>0?this.dates[i-1]?.to.clone().add(1,"days")?.format("YYYY-MM-DD")??this.minDate:this.minDate;const r=this.dates[i].from?this.dates[i]?.from.clone()?.format("YYYY-MM-DD"):this.minDate;return t("tr",{key:`date_${i}`},t("td",{class:"pr-1 pb-1"},t("ir-date-picker",{ref:e=>{this.dateRefs[i].from=e},forceDestroyOnUpdate:true,minDate:a,"data-testid":"pickup_arrival_date",date:e.from?.format("YYYY-MM-DD"),emitEmptyDate:true,"aria-invalid":String(this.errors==="dates"&&!e.from),onDateChanged:e=>{e.stopImmediatePropagation();e.stopPropagation();this.handleDateChange({index:i,date:e.detail.start,key:"from"})},onDatePickerFocus:e=>{e.stopImmediatePropagation();e.stopPropagation();if(i===0){return}const t=this.dates.findIndex((e=>!e.from||!e.to));if(!this.dates[t]?.from){this.dateRefs[t]?.from.openDatePicker();return}if(!this.dates[t]?.to){this.dateRefs[t].to.openDatePicker()}}},t("input",{type:"text",slot:"trigger",value:e.from?e.from.format("MMM DD, YYYY"):null,class:`form-control input-sm ${this.errors==="dates"&&!e.to?"border-danger":""} text-center`,style:{width:"100%"}}))),t("td",{class:"pr-1 pb-1"},t("ir-date-picker",{forceDestroyOnUpdate:true,ref:e=>{this.dateRefs[i].to=e},"data-testid":"pickup_arrival_date",date:e.to?.format("YYYY-MM-DD"),emitEmptyDate:true,minDate:r,"aria-invalid":String(this.errors==="dates"&&!e.to),onDateChanged:e=>{e.stopImmediatePropagation();e.stopPropagation();this.handleDateChange({index:i,date:e.detail.start,key:"to"})},onDatePickerFocus:e=>{e.stopImmediatePropagation();e.stopPropagation();const t=this.dates.findIndex((e=>!e.from||!e.to));if(!this.dates[t]?.from){this.dateRefs[t]?.from?.openDatePicker();return}if(!this.dates[t]?.to){this.dateRefs[t].to.openDatePicker()}}},t("input",{type:"text",slot:"trigger",value:e.to?e.to.format("MMM DD, YYYY"):null,class:`form-control input-sm \n                          ${this.errors==="dates"&&!e.to?"border-danger":""}\n                          text-center`,style:{width:"100%"}}))),i>0&&t("td",{class:"pb-1"},t("ir-button",{variant:"icon",icon_name:"minus",onClickHandler:()=>{this.dates=this.dates.filter(((e,t)=>t!==i))}})))}))))),t("div",{key:"e05da211e5bc95004e76711b045a8c5a396099b5",class:"sheet-footer"},t("ir-button",{key:"c033d43d71a79301041c1f789404357c3d8b797c",text:g.entries.Lcz_Cancel,btn_color:"secondary",class:"flex-fill",onClickHandler:()=>this.closeModal.emit(null)}),t("ir-button",{key:"9613fee5f1e6b72afe1370c44047dc705d28445e",isLoading:this.isLoading,text:g.entries.Lcz_Save,btn_type:"submit",class:"flex-fill"})))}};ti.style=Qt+ei;const ii=".sc-igl-cal-body-h{display:block}.bodyContainer.sc-igl-cal-body{position:relative}.roomRow.sc-igl-cal-body{width:max-content}.roomRow.sc-igl-cal-body:first-child{margin-top:80px}.categoryName.sc-igl-cal-body{font-weight:bold;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.cellData[data-dirty-room='true'].sc-igl-cal-body::after{content:'';position:absolute;bottom:0;height:100%;left:30%;right:30%;background-color:#d4d0be !important}.cellData.disabled.sc-igl-cal-body{background:rgba(153, 153, 153, 15%);cursor:var(--cell-cursor, not-allowed);transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.roomRow.sc-igl-cal-body .room.sc-igl-cal-body{cursor:pointer;transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.roomRow.sc-igl-cal-body .room.sc-igl-cal-body:hover{background:#e0e0e0}.roomRow.sc-igl-cal-body .room.sc-igl-cal-body:hover[data-hk-enabled='false']{background:white;cursor:default}.cellData.sc-igl-cal-body{width:58px;height:30px;display:inline-grid;border-top:1px solid #e0e0e0;border-left:1px solid #e0e0e0;vertical-align:top}.triangle-button.sc-igl-cal-body{--size:10px;position:absolute;right:-6px;top:-1px;width:0;height:0;padding:0;border:none;background:transparent;cursor:pointer;width:0;height:0;border-left:var(--size) solid transparent;border-right:var(--size) solid transparent;border-bottom:var(--size) solid var(--in-toggle-color);transform:rotate(45deg)}.cellData.sc-igl-cal-body:nth-child(2){border-left:0px}.cellData.sc-igl-cal-body:last-child{border-right:1px solid rgba(186, 191, 199, 0.5)}.roomHeaderCell.sc-igl-cal-body{position:-webkit-sticky;position:sticky;left:0;background:#fff;border-right:1px solid #ccc;width:170px;z-index:1}.currentDay.sc-igl-cal-body{background-color:#e3f3fa}.dragOverHighlight.sc-igl-cal-body{background-color:#f5f5dc !important}.selectedDay.sc-igl-cal-body{background-color:#f9f9c9 !important}.categoryTitle.sc-igl-cal-body{grid-template-columns:1fr 20px;padding-left:10px;cursor:pointer;height:40px;font-size:0.9em}.categoryTitle.sc-igl-cal-body>.sc-igl-cal-body:nth-child(1){white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.roomTitle.sc-igl-cal-body{padding-left:20px;font-size:0.9em;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.roomTitle.sc-igl-cal-body>.sc-igl-cal-body:nth-child(1){white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.roomTitle.pl10.sc-igl-cal-body{padding-left:10px}.categoryPriceColumn.sc-igl-cal-body{align-items:center;height:40px;-webkit-user-select:none;user-select:none;position:relative}.bookingEventsContainer.sc-igl-cal-body{position:absolute;top:0;left:0}";const ai=ii;const ri=class{constructor(t){e(this,t);this.addBookingDatasEvent=a(this,"addBookingDatasEvent",7);this.showBookingPopup=a(this,"showBookingPopup",7);this.scrollPageToRoom=a(this,"scrollPageToRoom",7)}isScrollViewDragging;propertyId;calendarData;today;currency;language;countries;highlightedDate;dragOverElement="";renderAgain=false;selectedRoom;isLoading=null;addBookingDatasEvent;showBookingPopup;scrollPageToRoom;selectedRooms={};fromRoomId=-1;newEvent;currentDate=new Date;hkModal;housekeepingService=new ve;bookingMap=new Map;interactiveTitle=[];dayRateMap=new Map;componentWillLoad(){this.currentDate.setHours(0,0,0,0);this.bookingMap=this.getBookingMap(this.getBookingData());M.days.forEach((e=>{this.dayRateMap.set(e.day,e.rate)}));this.updateDisabledCellsCache()}handleCalendarDataChange(){this.bookingMap=this.getBookingMap(this.getBookingData());this.updateDisabledCellsCache()}dragOverHighlightElementHandler(e){this.dragOverElement=e.detail.dragOverElement}gotoRoom(e){let t=e.detail.roomId;let i=this.getRoomCategoryByRoomId(t);if(!i.expanded){this.toggleCategory(i);setTimeout((()=>{this.scrollToRoom(t)}),10)}else{this.scrollToRoom(t)}}addToBeAssignedEvents(e){this.addBookingDatas(e.detail.data);this.renderElement()}closeWindow(){let e=this.getBookingData().findIndex((e=>e.ID==="NEW_TEMP_EVENT"));if(e!==-1){this.getBookingData().splice(e,1);console.log("removed item..");this.renderElement()}}scrollToRoom(e){this.scrollPageToRoom.emit({key:"scrollPageToRoom",id:e,refClass:"room_"+e})}getRoomCategoryByRoomId(e){return this.calendarData.roomsInfo.find((t=>this.getCategoryRooms(t).find((t=>this.getRoomId(t)===e))))}getCategoryName(e){return e.name}getCategoryId(e){return e.id}getTotalPhysicalRooms(e){return this.getCategoryRooms(e).length}getCategoryRooms(e){return e&&e.physicalrooms||[]}getRoomName(e){return e.name}getRoomId(e){return e.id}getRoomById(e,t){return e.find((e=>this.getRoomId(e)===t))}getBookingData(){return this.calendarData.bookingEvents}addBookingDatas(e){this.addBookingDatasEvent.emit(e)}getSelectedCellRefName(e,t){return"room_"+e+"_"+t.currentDate}getSplitBookingEvents(e){console.log(e.FROM_DATE);return this.getBookingData().some((t=>{if(!["003","002","004"].includes(t.STATUS_CODE)){if(new Date(e.FROM_DATE).getTime()>=new Date(t.FROM_DATE).getTime()&&new Date(e.FROM_DATE).getTime()<=new Date(t.TO_DATE).getTime()){return t}}}))}addNewEvent(e){let i=Object.keys(this.selectedRooms);let a,r;if(this.selectedRooms[i[0]].currentDate<this.selectedRooms[i[1]].currentDate){a=new Date(this.selectedRooms[i[0]].currentDate);r=new Date(this.selectedRooms[i[1]].currentDate)}else{a=new Date(this.selectedRooms[i[1]].currentDate);r=new Date(this.selectedRooms[i[0]].currentDate)}const o=Math.round(Math.abs((r.getTime()-a.getTime())/864e5));this.newEvent={ID:"NEW_TEMP_EVENT",NAME:t("span",null,""),EMAIL:"",PHONE:"",convertBooking:false,REFERENCE_TYPE:"PHONE",FROM_DATE:a.getFullYear()+"-"+this.getTwoDigitNumStr(a.getMonth()+1)+"-"+this.getTwoDigitNumStr(a.getDate()),TO_DATE:r.getFullYear()+"-"+this.getTwoDigitNumStr(r.getMonth()+1)+"-"+this.getTwoDigitNumStr(r.getDate()),BALANCE:"",NOTES:"",RELEASE_AFTER_HOURS:0,PR_ID:this.selectedRooms[i[0]].roomId,ENTRY_DATE:"",NO_OF_DAYS:o,ADULTS_COUNT:1,COUNTRY:"",INTERNAL_NOTE:"",RATE:"",TOTAL_PRICE:"",RATE_PLAN:"",ARRIVAL_TIME:"",TITLE:g.entries.Lcz_NewBookingFor,roomsInfo:[e],CATEGORY:e.name,event_type:"BAR_BOOKING",STATUS:"TEMP-EVENT",defaultDateRange:{fromDate:null,fromDateStr:"",toDate:null,toDateStr:"",dateDifference:o,editable:false,message:"Including 5.00% City Tax - Excluding 11.00% VAT"}};let n=e.name+" "+this.getRoomName(this.getRoomById(this.getCategoryRooms(e),this.selectedRooms[i[0]].roomId));this.newEvent.BLOCK_DATES_TITLE=`${g.entries.Lcz_BlockDatesFor} ${n}`;this.newEvent.TITLE+=n;this.newEvent.defaultDateRange.toDate=new Date(this.newEvent.TO_DATE+"T00:00:00");this.newEvent.defaultDateRange.fromDate=new Date(this.newEvent.FROM_DATE+"T00:00:00");this.newEvent.defaultDateRange.fromDateStr=this.getDateStr(this.newEvent.defaultDateRange.fromDate);this.newEvent.defaultDateRange.toDateStr=this.getDateStr(this.newEvent.defaultDateRange.toDate);this.newEvent.ENTRY_DATE=(new Date).toISOString();this.newEvent.legendData=this.calendarData.formattedLegendData;let s=this.getSplitBookingEvents(this.newEvent);if(s){this.newEvent.splitBookingEvents=s}this.getBookingData().push(this.newEvent);return this.newEvent}getTwoDigitNumStr(e){return e<=9?"0"+e:e}getDateStr(e,t="default"){return e.getDate()+" "+e.toLocaleString(t,{month:"short"})+" "+e.getFullYear()}removeNewEvent(){this.calendarData.bookingEvents=this.calendarData.bookingEvents.filter((e=>e.ID!=="NEW_TEMP_EVENT"));this.newEvent=null}clickCell(e,t,i){if(!this.isScrollViewDragging&&t.currentDate>=this.currentDate.getTime()){let a=this.getSelectedCellRefName(e,t);if(this.selectedRooms.hasOwnProperty(a)){this.removeNewEvent();delete this.selectedRooms[a];this.renderElement();return}else if(Object.keys(this.selectedRooms).length!=1||this.fromRoomId!=e){this.removeNewEvent();this.selectedRooms={};this.selectedRooms[a]={...t,roomId:e};this.fromRoomId=e;this.renderElement()}else{const r=Object.keys(this.selectedRooms);const o=fe(this.selectedRooms[r[0]].value,"YYYY-MM-DD");const n=fe(t.value,"YYYY-MM-DD");let s=o.clone().add(1,"days");let l=0;while(s.isBefore(n,"day")){const t=s.format("YYYY-MM-DD");if(this.isCellDisabled(e,t)){l++}s.add(1,"days")}if(l>=1){this.selectedRooms={};this.fromRoomId=e;this.renderElement();return}this.selectedRooms[a]={...t,roomId:e};this.addNewEvent(i);this.selectedRooms={};this.renderElement();this.showNewBookingPopup(this.newEvent)}}}showNewBookingPopup(e){console.log(e)}renderElement(){this.renderAgain=!this.renderAgain}getBookingMap(e){const t=new Map;const i=fe().startOf("day");for(const a of e){const e=fe(a.FROM_DATE,"YYYY-MM-DD").startOf("day");const r=fe(a.TO_DATE,"YYYY-MM-DD").startOf("day");if(i.isSameOrAfter(e)&&i.isSameOrBefore(r)){if(!t.has(a.PR_ID)){t.set(a.PR_ID,a.BOOKING_NUMBER)}else{if(R(fe().toDate(),P(y.checkin_checkout_hours?.offset,y.checkin_checkout_hours?.hour))){t.set(a.PR_ID,a.BOOKING_NUMBER)}}}}return t}getGeneralCategoryDayColumns(e,i=false,a){return M.days.map((o=>t("div",{class:`cellData  font-weight-bold categoryPriceColumn ${e+"_"+o.day} ${o.day===this.today||o.day===this.highlightedDate?"currentDay":""}`},i?t(r,null,t("span",{class:"categoryName"},o.rate[a].exposed_inventory.rts)):"")))}getGeneralRoomDayColumns(e,i,a){return this.calendarData.days.map((r=>{const o=this.isCellDisabled(Number(e),r.value);const n=fe(r.value,"YYYY-MM-DD").add(-1,"days").format("YYYY-MM-DD");const s=o&&Object.keys(this.selectedRooms).length===0||o&&this.isCellDisabled(Number(e),n);const l=this.selectedRooms.hasOwnProperty(this.getSelectedCellRefName(e,r));const c=r.day===this.today||r.day===this.highlightedDate;const d=M.cleaningTasks.has(+e)?M.cleaningTasks.get(+e):null;const h=["001","003"].includes(y.cleaning_frequency?.code)?false:d?.has(r.value);return t("div",{class:`cellData position-relative roomCell ${o?"disabled":""} ${"room_"+e+"_"+r.day} ${c?"currentDay":""} ${this.dragOverElement===e+"_"+r.day?"dragOverHighlight":""} ${l?"selectedDay":""}`,style:!s&&{"--cell-cursor":"default"},onClick:()=>{if(s){return}this.clickCell(Number(e),r,i)},"aria-label":a,role:"gridcell","data-room-id":e,"data-date":r.value,"aria-current":c?"date":undefined,"data-room-name":a,"data-dirty-room":String(h),"aria-disabled":String(s),"aria-selected":Boolean(l)})}))}toggleCategory(e){e.expanded=!e.expanded;this.renderElement()}getRoomCategoryRow(e,i){if(this.getTotalPhysicalRooms(e)<=1||!e.is_active){return null}return t("div",{class:"roomRow"},t("div",{class:`cellData text-left align-items-center roomHeaderCell categoryTitle ${"category_"+this.getCategoryId(e)}`,onClick:()=>this.toggleCategory(e)},t("div",{class:"categoryName"},t("ir-interactive-title",{popoverTitle:this.getCategoryName(e)})),e.expanded?t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",height:14,width:14},t("path",{fill:"#6b6f82",d:"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"})):t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",height:14,width:14},t("path",{fill:"#6b6f82",d:"M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"}))),this.getGeneralCategoryDayColumns("category_"+this.getCategoryId(e),true,i))}getRoomsByCategory(e){if(!e.expanded){return null}return this.getCategoryRooms(e)?.map((i=>{if(!i.is_active){return null}const a=this.getTotalPhysicalRooms(e)<=1;const r=a?this.getCategoryName(e):this.getRoomName(i);return t("div",{class:"roomRow"},t("div",{class:`cellData room text-left align-items-center roomHeaderCell  roomTitle ${this.getTotalPhysicalRooms(e)<=1?"pl10":""} ${"room_"+this.getRoomId(i)}`,"data-room-name":r,"data-hk-enabled":String(y.housekeeping_enabled),"data-room":this.getRoomId(i),onClick:()=>{if(!y.housekeeping_enabled){return}this.selectedRoom=i;this.hkModal.openModal()},onMouseEnter:()=>{this.interactiveTitle[i.id]?.style?.setProperty("--ir-interactive-hk-bg","#e0e0e0")},onMouseLeave:()=>{this.interactiveTitle[i.id]?.style?.removeProperty("--ir-interactive-hk-bg")}},t("ir-interactive-title",{ref:e=>{if(e)this.interactiveTitle[i.id]=e},style:i.hk_status==="003"&&{"--dot-color":"#ededed"},hkStatus:y.housekeeping_enabled&&i.hk_status!=="001",popoverTitle:r},i.hk_status!=="001"&&t("div",{slot:"end",class:"d-flex align-items-center",style:{gap:"0.5rem"}},i.hk_status==="004"?t("svg",{height:14,width:14,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"},t("title",null,"Inspected"),t("path",{fill:"green",d:"M530.8 134.1C545.1 144.5 548.3 164.5 537.9 178.8L281.9 530.8C276.4 538.4 267.9 543.1 258.5 543.9C249.1 544.7 240 541.2 233.4 534.6L105.4 406.6C92.9 394.1 92.9 373.8 105.4 361.3C117.9 348.8 138.2 348.8 150.7 361.3L252.2 462.8L486.2 141.1C496.6 126.8 516.6 123.6 530.9 134z"})):t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"12",width:"13.5",viewBox:"0 0 576 512",style:{display:"block"}},i.hk_status==="002"&&t("title",null,"This unit is dirty"),t("path",{fill:"currentColor",d:"M566.6 54.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192-34.7-34.7c-4.2-4.2-10-6.6-16-6.6c-12.5 0-22.6 10.1-22.6 22.6l0 29.1L364.3 320l29.1 0c12.5 0 22.6-10.1 22.6-22.6c0-6-2.4-11.8-6.6-16l-34.7-34.7 192-192zM341.1 353.4L222.6 234.9c-42.7-3.7-85.2 11.7-115.8 42.3l-8 8C76.5 307.5 64 337.7 64 369.2c0 6.8 7.1 11.2 13.2 8.2l51.1-25.5c5-2.5 9.5 4.1 5.4 7.9L7.3 473.4C2.7 477.6 0 483.6 0 489.9C0 502.1 9.9 512 22.1 512l173.3 0c38.8 0 75.9-15.4 103.4-42.8c30.6-30.6 45.9-73.1 42.3-115.8z"}))))),this.getGeneralRoomDayColumns(this.getRoomId(i),e,r))}))}getRoomRows(){return this.calendarData.roomsInfo?.map(((e,i)=>{if(e.is_active){return t(r,null,this.getRoomCategoryRow(e,i),e.expanded&&this.getRoomsByCategory(e))}else{return null}}))}async confirmHousekeepingUpdate(e,t){e.stopImmediatePropagation();e.stopPropagation();try{this.isLoading=t==="004"?"right":"middle";await this.housekeepingService.setExposedUnitHKStatus({property_id:this.propertyId,status:{code:t},unit:{id:this.selectedRoom?.id}});if(["001","004"].includes(t)){await this.housekeepingService.executeHKAction({actions:[{description:"Cleaned",hkm_id:this.selectedRoom?.housekeeper?.id||null,unit_id:this.selectedRoom?.id,booking_nbr:this.bookingMap.get(this.selectedRoom?.id)??null,status:t}]})}}finally{this.isLoading=null;this.selectedRoom=null;this.hkModal.closeModal()}}render(){return t(i,{key:"f178ed726d15da34c63e123783f0ab08279cde5d"},t("div",{key:"f47ef9a62eb18ec249e02d33232f6d8fd502318a",class:"bodyContainer"},this.getRoomRows(),t("div",{key:"f104114a74a2b9b3d627edea71ddf7f808688e28",class:"bookingEventsContainer preventPageScroll"},this.getBookingData()?.map((e=>t("igl-booking-event",{"data-testid":`booking_${e.BOOKING_NUMBER}`,"data-room-name":e.roomsInfo?.find((t=>t.id===e.RATE_TYPE))?.physicalrooms.find((t=>t.id===e.PR_ID))?.name,language:this.language,is_vacation_rental:this.calendarData.is_vacation_rental,countries:this.countries,currency:this.currency,"data-component-id":e.ID,bookingEvent:e,allBookingEvents:this.getBookingData()}))))),t("ir-modal",{key:"357cad9e008c16ba4026e8d401009a3a8ac89864",ref:e=>this.hkModal=e,leftBtnText:g?.entries?.Lcz_Cancel,middleBtnText:this.renderModalMiddleButtonText(),middleBtnActive:true,rightBtnText:this.renderModalRightButtonText(),modalBody:this.renderModalBody(),onConfirmModal:e=>this.confirmHousekeepingUpdate(e,"004"),onMiddleModal:e=>this.confirmHousekeepingUpdate(e,this.selectedRoom?.hk_status==="002"?"001":"002"),autoClose:false,isMiddleButtonLoading:this.isLoading==="middle",isLoading:this.isLoading==="right",onCancelModal:e=>{e.stopImmediatePropagation();e.stopPropagation();this.selectedRoom=null;this.hkModal.closeModal()}}))}renderModalBody(){if(!this.selectedRoom){return null}return t("p",null,"Update unit ",this.selectedRoom?.name," to ...")}renderModalMiddleButtonText(){if(!this.selectedRoom){return null}return this.selectedRoom.hk_status==="002"?"Clean":"Dirty"}renderModalRightButtonText(){if(!this.selectedRoom){return null}return this.selectedRoom.hk_status!=="004"?"Clean & Inspected":"Clean"}updateDisabledCellsCache(){M.disabled_cells.clear();this.calendarData.roomsInfo?.forEach(((e,t)=>{if(e.is_active){this.getCategoryRooms(e)?.forEach((e=>{if(e.is_active){this.calendarData.days.forEach((i=>{const a=this.getCellKey(e.id,i.value);M.disabled_cells.set(a,{disabled:!i.rate[t].is_available_to_book,reason:"stop_sale"})}))}}))}}))}getCellKey(e,t){return`${e}_${t}`}isCellDisabled(e,t){const i=this.getCellKey(e,t);if(!M.disabled_cells.has(i)){return false}const{disabled:a}=M.disabled_cells.get(i);return a}static get watchers(){return{calendarData:["handleCalendarDataChange"]}}};ri.style=ai;const oi=".sc-igl-cal-footer-h{display:block;position:sticky;bottom:0;width:max-content;z-index:3}.footerCell.sc-igl-cal-footer{display:-moz-inline-grid;display:-ms-inline-grid;display:inline-grid;position:-webkit-sticky;position:sticky;bottom:0;width:58px;height:40px;background:#fff;vertical-align:top;border-top:1px solid #e0e0e0}.bottomLeftCell.sc-igl-cal-footer{left:-1px;z-index:2;width:170px;text-align:left;padding-left:15px;color:#000000}.footerCell.sc-igl-cal-footer i.sc-igl-cal-footer{margin-right:5px}.legendBtn.sc-igl-cal-footer{color:#41bff3;cursor:pointer}.legendBtn.sc-igl-cal-footer:hover{color:#1e29ca}.isOnline.sc-igl-cal-footer i.sc-igl-cal-footer{color:#2f9c3f;font-weight:bold}.isOffline.sc-igl-cal-footer i.sc-igl-cal-footer{font-weight:bold}.isOffline.sc-igl-cal-footer{color:#a40000}.dayTitle.sc-igl-cal-footer{font-size:0.8em;font-weight:600;display:grid;user-select:none}.currentDay.sc-igl-cal-footer .dayTitle.sc-igl-cal-footer{font-weight:bold}.currentDay.sc-igl-cal-footer{background-color:#e3f3fa}.dayCapacityPercent.sc-igl-cal-footer{font-size:0.75em}.badge-pill.sc-igl-cal-footer{padding-left:1em;padding-right:1em;font-size:0.7em;margin-bottom:2px}.weekend.sc-igl-cal-footer{font-weight:bold;color:black}";const ni=oi;const si=class{constructor(t){e(this,t);this.optionEvent=a(this,"optionEvent",7)}optionEvent;calendarData;isLegendOpen=false;today;highlightedDate;_today=fe().format("YYYY-MM-DD");handleOptionEvent(e,t=""){this.optionEvent.emit({key:e,data:t})}render(){return t(i,{key:"45b29a6cea11a6d62e42baff511fd69e646bfb77",class:"footerContainer"},t("div",{key:"eba0d027156608f2caaf2ff45b6db8f618465206",class:"footerCell bottomLeftCell align-items-center preventPageScroll",style:{paddingLeft:"10px"}},t("button",{key:"ebacf976b09abc3f193146cce8ce4f41c3575146",class:"m-0 p-0 btn btn-sm  legendBtn d-flex align-items-center",style:{gap:"0.25rem"},onClick:()=>this.handleOptionEvent("showLegend")},this.isLegendOpen?t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640",height:16,width:16},t("path",{fill:"currentColor",d:"M105.4 297.4C92.9 309.9 92.9 330.2 105.4 342.7L265.4 502.7C277.9 515.2 298.2 515.2 310.7 502.7C323.2 490.2 323.2 469.9 310.7 457.4L173.3 320L310.6 182.6C323.1 170.1 323.1 149.8 310.6 137.3C298.1 124.8 277.8 124.8 265.3 137.3L105.3 297.3zM457.4 137.4L297.4 297.4C284.9 309.9 284.9 330.2 297.4 342.7L457.4 502.7C469.9 515.2 490.2 515.2 502.7 502.7C515.2 490.2 515.2 469.9 502.7 457.4L365.3 320L502.6 182.6C515.1 170.1 515.1 149.8 502.6 137.3C490.1 124.8 469.8 124.8 457.3 137.3z"})):t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640",height:16,width:16},t("path",{fill:"currentColor",d:"M535.1 342.6C547.6 330.1 547.6 309.8 535.1 297.3L375.1 137.3C362.6 124.8 342.3 124.8 329.8 137.3C317.3 149.8 317.3 170.1 329.8 182.6L467.2 320L329.9 457.4C317.4 469.9 317.4 490.2 329.9 502.7C342.4 515.2 362.7 515.2 375.2 502.7L535.2 342.7zM183.1 502.6L343.1 342.6C355.6 330.1 355.6 309.8 343.1 297.3L183.1 137.3C170.6 124.8 150.3 124.8 137.8 137.3C125.3 149.8 125.3 170.1 137.8 182.6L275.2 320L137.9 457.4C125.4 469.9 125.4 490.2 137.9 502.7C150.4 515.2 170.7 515.2 183.2 502.7z"})),t("span",{key:"15680380d945fd46a1dd501afa9f9dfb8ac23046"},g.entries.Lcz_Legend),t("span",{key:"5626a9d9b9833cb43fbd077f6ca0013d09fab884"},"v1.05"),t("ir-new-badge",{key:"359c6bef4d1e014a471c63306c941c25a9805baf",style:{marginLeft:"0.25rem"}}))),this.calendarData.days.map((e=>t("div",{class:"footerCell align-items-center"},t("div",{class:{"dayTitle full-height align-items-center":true,weekend:L(e.value),currentDay:e.value===this._today||this.highlightedDate===e.day}},e.dayDisplayName)))))}};si.style=ni;class li{async getUnassignedDates(e,t,i){try{const{data:a}=await ye.post(`/Get_UnAssigned_Dates`,{propertyid:e,from_date:t,to_date:i});if(a.ExceptionMsg!==""){throw new Error(a.ExceptionMsg)}return this.convertUnassignedDates(a.My_Result)}catch(e){console.error(e);throw new Error(e)}}async getUnassignedRooms(e,t,i,a,r){try{const{data:o}=await ye.post(`/Get_Aggregated_UnAssigned_Rooms`,{propertyid:t,specific_date:i});if(o.ExceptionMsg!==""){throw new Error(o.ExceptionMsg)}return this.transformToAssignable(e,o,a,r)}catch(e){console.error(e);throw new Error(e)}}async assignUnit(e){try{const{data:t}=await ye.post(`/Assign_Exposed_Room`,{...e,extras:k});if(t.ExceptionMsg!==""){throw new Error(t.ExceptionMsg)}console.log(t);return t["My_Result"]}catch(e){console.error(e);throw new Error(e)}}cleanSpacesAndSpecialChars(e){const t=/[^a-zA-Z0-9]+/g;return e.replace(t,"")}transformToAssignable(e,t,i,a){const r=[];t.My_Result.forEach((t=>{t.unassigned_rooms.forEach((t=>{let o={roomTypeName:t.room_type_name,ID:t.identifier,NAME:t.guest_name,identifier:t.identifier,FROM_DATE:t.unassigned_date,TO_DATE:t.unassigned_date,BOOKING_NUMBER:t.book_nbr,STATUS:"IN-HOUSE",defaultDateRange:{fromDate:undefined,toDate:undefined,fromDateTimeStamp:0,toDateTimeStamp:0,fromDateStr:"",toDateStr:"",dateDifference:0},NO_OF_DAYS:1,roomsInfo:i,legendData:a,availableRooms:[],RT_ID:this.getRoomTypeId(t.room_type_name,i)};this.updateAvailableRooms(e,t,o,a,i);this.addDefaultDateRange(o);r.push(o)}))}));return r}addDefaultDateRange(e){e.defaultDateRange.fromDate=new Date(e.FROM_DATE+"T00:00:00");e.defaultDateRange.fromDateStr=D(e.defaultDateRange.fromDate);e.defaultDateRange.fromDateTimeStamp=e.defaultDateRange.fromDate.getTime();e.defaultDateRange.toDate=new Date(e.TO_DATE+"T00:00:00");e.defaultDateRange.toDateStr=D(e.defaultDateRange.toDate);e.defaultDateRange.toDateTimeStamp=e.defaultDateRange.toDate.getTime();e.defaultDateRange.dateDifference=e.NO_OF_DAYS}getRoomTypeId(e,t){return t.find((t=>this.cleanSpacesAndSpecialChars(t.name)===this.cleanSpacesAndSpecialChars(e)))?.id||null}updateAvailableRooms(e,t,i,a,r){const o=[];t.assignable_units.forEach((t=>{if(t.Is_Fully_Available&&!t.Is_Not_Available){const n=F(t.from_date,t.to_date);const s=fe(new Date(e.from_date)).isAfter(fe(new Date(t.from_date)))?e.from_date:t.from_date;const l=fe(new Date(e.to_date)).isBefore(fe(new Date(t.to_date)))&&fe(new Date(e.to_date)).isAfter(fe(new Date(t.from_date)))?e.to_date:t.to_date;o.push({RT_ID:i.RT_ID,STATUS:"PENDING-CONFIRMATION",FROM_DATE:s,roomName:t.name,PR_ID:t.pr_id,TO_DATE:l,NO_OF_DAYS:n,ID:"NEW_TEMP_EVENT",NAME:"",NOTES:"",BALANCE:"",INTERNAL_NOTE:"",hideBubble:true,legendData:a,roomsInfo:r});i.TO_DATE=t.to_date;i.NO_OF_DAYS=n}}));i.availableRooms=o}convertUnassignedDates(e){let t={};e.forEach((e=>{let i=new Date(e.date);i.setHours(0,0,0,0);t[i.getTime()]={categories:{},dateStr:e.description}}));return t}}const ci={unassigned_dates:{}};let{state:di,onChange:hi}=m(ci);function ui(e){di.unassigned_dates={...di.unassigned_dates,...e}}function pi(){return di.unassigned_dates}function fi(e,t){const i=bi(e);const a=bi(t);Object.keys(di.unassigned_dates).forEach((e=>{const t=parseInt(e);if(i<=t&&t<=a){delete di.unassigned_dates[e]}}))}function bi(e){const t=new Date(e);t.setHours(0,0,0,0);return t.getTime()}const gi=".sc-igl-cal-header-h{display:block;position:absolute;top:0;height:100%}.svg-icon.sc-igl-cal-header{height:20px;width:20px}.darkGrey.sc-igl-cal-header{background:#ececec}.btn.sc-igl-cal-header{pointer-events:auto}.dayTitle.weekend.sc-igl-cal-header{font-weight:bold;color:#1e9ff2;color:black}.stickyCell.sc-igl-cal-header{display:-ms-inline-grid;display:-moz-inline-grid;display:inline-grid;position:-webkit-sticky;position:sticky;top:0px;height:82px;display:inline-block;vertical-align:top;z-index:2}.headersContainer.sc-igl-cal-header{background-color:#ffffff}.headerCell.sc-igl-cal-header{display:inline-grid;width:58px;height:58px;vertical-align:top;background-color:#ffffff;border-bottom:1px solid #e0e0e0}.monthsContainer.sc-igl-cal-header{height:20px;background-color:#ffffff;margin-bottom:0.2em}.monthCell.sc-igl-cal-header{display:inline-grid;height:20px;background-color:#ececec;border-right:1px solid #c7c7c7;vertical-align:top}.monthCell.sc-igl-cal-header:nth-child(odd){background-color:#dddddd}.monthTitle.sc-igl-cal-header{overflow:hidden;text-overflow:ellipsis;font-size:0.9em;text-transform:uppercase;font-weight:bold;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.topLeftCell.sc-igl-cal-header{left:0px;z-index:3;width:170px;background-color:#ffffff;display:-ms-inline-grid;display:-moz-inline-grid;display:inline-grid}.datePickerHidden.sc-igl-cal-header{position:absolute;height:100%;width:100%;opacity:0;cursor:pointer;z-index:1}.date_btn.sc-igl-cal-header{cursor:pointer;display:flex;align-items:center;justify-content:center;position:relative}.date_btn.sc-igl-cal-header:hover{background:#f6f6f6;border-radius:0.3rem}.caledarBtns.sc-igl-cal-header{position:relative;cursor:pointer;padding:0.4rem}.caledarBtns.sc-igl-cal-header:hover{background-color:#f6f6f6}.dayTitle.sc-igl-cal-header{font-size:0.8em;font-weight:600;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.currentDay.sc-igl-cal-header .dayTitle.sc-igl-cal-header{font-weight:bold}.currentDay.sc-igl-cal-header{background-color:#e3f3fa}.dayCapacityPercent.sc-igl-cal-header{font-size:0.75em;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.badge-pill.sc-igl-cal-header{padding:3px 1em;font-size:0.8em;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.pointer.sc-igl-cal-header{cursor:pointer}.searchContiner.sc-igl-cal-header{padding-left:10px;padding-right:10px}.searchListContainer.sc-igl-cal-header{background:#fff;border:1px solid #ccc;border-bottom:none}.searchListItem.sc-igl-cal-header{background:white;border-bottom:1px solid #ccc;padding-left:8px}.badge-light.sc-igl-cal-header{background-color:#999999;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.min-width-full.sc-igl-cal-header{min-width:100%}.header__fd-actions.sc-igl-cal-header{display:flex;width:170px;box-sizing:border-box;gap:0.875rem;flex-direction:column}";const mi=gi;const wi=class{constructor(t){e(this,t);this.optionEvent=a(this,"optionEvent",7);this.gotoRoomEvent=a(this,"gotoRoomEvent",7);this.gotoToBeAssignedDate=a(this,"gotoToBeAssignedDate",7)}optionEvent;gotoRoomEvent;gotoToBeAssignedDate;calendarData;today;propertyid;unassignedDates;to_date;highlightedDate;renderAgain=false;unassignedRoomsNumber={};roomsList=[];toBeAssignedService=new li;dateRef;componentWillLoad(){try{this.initializeRoomsList();if(!this.calendarData.is_vacation_rental){hi("unassigned_dates",(e=>{if(Object.keys(e).length>0){this.fetchAndAssignUnassignedRooms()}}))}}catch(e){console.error("Error in componentWillLoad:",e)}}handleCalendarDataChanged(){this.fetchAndAssignUnassignedRooms()}initializeRoomsList(){this.roomsList=[];this.calendarData.roomsInfo.forEach((e=>{this.roomsList=this.roomsList.concat(...e.physicalrooms)}))}async fetchAndAssignUnassignedRooms(){await this.assignRoomsToDate()}async assignRoomsToDate(){try{const{fromDate:e,toDate:t,data:i}=this.unassignedDates;let a=new Date(e);a.setHours(0,0,0,0);let r=a.getTime();while(r<=new Date(t).getTime()){const e=fe(r).format("D_M_YYYY");if(i[r]){const t=await this.toBeAssignedService.getUnassignedRooms({from_date:this.calendarData.from_date,to_date:this.calendarData.to_date},this.propertyid,D(new Date(r)),this.calendarData.roomsInfo,this.calendarData.formattedLegendData);this.unassignedRoomsNumber[e]=t.length}else if(this.unassignedRoomsNumber[e]){const t=this.unassignedRoomsNumber[e]-1;this.unassignedRoomsNumber[e]=t<0?0:t}const t=fe(r).add(1,"days").toDate();t.setHours(0,0,0,0);r=t.getTime();this.renderView()}}catch(e){console.error(e)}}handleReduceAvailableUnitEvent(e){e.stopImmediatePropagation();e.stopPropagation();const{fromDate:t,toDate:i}=e.detail;let a=new Date(t).getTime();while(a<new Date(i).getTime()){const e=fe(a).format("D_M_YYYY");this.unassignedRoomsNumber[e]=this.unassignedRoomsNumber[e]-1;a=fe(a).add(1,"days").toDate().getTime()}this.renderView()}showToBeAssigned(e){if(this.unassignedRoomsNumber[e.day]||0){this.handleOptionEvent("showAssigned");setTimeout((()=>{this.gotoToBeAssignedDate.emit({key:"gotoToBeAssignedDate",data:e.currentDate})}),100)}}handleOptionEvent(e,t=""){this.optionEvent.emit({key:e,data:t})}handleDateSelect(e){if(Object.keys(e.detail).length>0){this.handleOptionEvent("calendar",e.detail)}}handleClearSearch(){this.renderView()}handleFilterRooms(e){const t=e.target;let i=t.value.trim();i=i.toLowerCase();if(i===""){this.handleClearSearch()}this.renderView()}handleScrollToRoom(e){this.handleClearSearch();this.gotoRoomEvent.emit({key:"gotoRoom",roomId:e})}getStringDateFormat(e){return e.getFullYear()+"-"+(e.getMonth()<9?"0":"")+(e.getMonth()+1)+"-"+(e.getDate()<=9?"0":"")+e.getDate()}getNewBookingModel(){let e=new Date;e.setHours(0,0,0,0);let t=this.getStringDateFormat(e);e.setDate(e.getDate()+1);e.setHours(0,0,0,0);let i=this.getStringDateFormat(e);return{ID:"",NAME:"",EMAIL:"",PHONE:"",REFERENCE_TYPE:"PHONE",FROM_DATE:t,TO_DATE:i,roomsInfo:this.calendarData.roomsInfo,TITLE:g.entries.Lcz_NewBooking,event_type:"PLUS_BOOKING",legendData:this.calendarData.formattedLegendData,defaultDateRange:{fromDate:new Date(t),fromDateStr:"",toDate:new Date(i),toDateStr:"",dateDifference:0,editabled:true,message:""}}}renderView(){this.renderAgain=!this.renderAgain}render(){return t(i,{key:"a6a4e9ef339739dc5d159bfe2e3786dfc2b31b2e"},t("div",{key:"f9d52b8cdd4ccd52f68bbce36df304bd6deac937",class:"stickyCell align-items-center topLeftCell preventPageScroll"},t("div",{key:"8c8e713009264e2df39fbf980367d3278b81bb6b",class:"header__fd-actions"},t("div",{key:"65c47206a6b3c00346c656bfc06e63b42e5d51bf",class:"row justify-content-around no-gutters"},!this.calendarData.is_vacation_rental&&t("ir-button",{key:"1f4401db96f17dc4b593767a03aaea41a2f11e1d",variant:"icon",icon_name:"server",style:{...De.secondary,"--icon-size":"1.5rem"},"data-toggle":"tooltip","data-placement":"bottom",title:g.entries.Lcz_UnassignedUnitsTooltip,onClickHandler:()=>this.handleOptionEvent("showAssigned"),btn_styles:"caledarBtns",visibleBackgroundOnHover:true}),t("ir-date-picker",{key:"dbbf8c752319c23657220d5f0b14acab72dbca0a",minDate:fe().add(-2,"months").startOf("month").format("YYYY-MM-DD"),onDateChanged:e=>{console.log("evt",e);this.handleDateSelect(e)},class:"date_btn",title:g.entries.Lcz_Navigate,"data-toggle":"tooltip","data-placement":"bottom"},t("ir-button",{key:"aa94ba2e289ca826ffea1eb46670571d3f8278ee",slot:"trigger",btn_styles:"caledarBtns",variant:"icon",icon_name:"calendar",style:{...De.secondary,"--icon-size":"1.5rem"},onClickHandler:()=>this.handleOptionEvent("calendar"),visibleBackgroundOnHover:true,ref:e=>this.dateRef=e})),t("ir-button",{key:"393b2bfd4307568b76c2991c594630e4b1aa7043",variant:"icon",btn_styles:"caledarBtns",class:"pointer",icon_name:"clock",visibleBackgroundOnHover:true,style:{...De.secondary,"--icon-size":"1.5rem"},"data-toggle":"tooltip","data-placement":"bottom",title:g.entries.Lcz_Today,onClickHandler:()=>this.handleOptionEvent("gotoToday")}),t("ir-button",{key:"0830237744b67c1e731c357a60c175abfd2d0cd9",variant:"icon",btn_styles:"caledarBtns",icon_name:"plus","data-toggle":"tooltip","data-placement":"bottom","data-testid":"new_booking_btn",title:g.entries.Lcz_CreateNewBooking,visibleBackgroundOnHover:true,style:{...De.secondary,"--icon-size":"1.5rem"},onClickHandler:()=>this.handleOptionEvent("add",this.getNewBookingModel())}),t("ir-button",{key:"542400b75e3b58f6d8241c5874e5f17cf82ede6f",variant:"icon",btn_styles:"caledarBtns",icon_name:"calendar-xmark","data-toggle":"tooltip","data-placement":"bottom","data-testid":"new_bulk_btn",title:g.entries.Lcz_StopOpenSale,visibleBackgroundOnHover:true,style:{...De.secondary,"--icon-size":"1.5rem"},onClickHandler:()=>this.handleOptionEvent("bulk",this.getNewBookingModel())})),t("div",{key:"681549c381a16d1c964fbeadd095f1d1b52e7e13",class:"searchContiner"},t("ir-picker",{key:"b7e90dc74aa2a47996edb6eda6e23c073a714d2c",size:"small","onCombobox-select":e=>{this.handleScrollToRoom(Number(e.detail.item.value))}},this.roomsList.map((e=>t("ir-picker-item",{label:e.name,value:e.id},e.name))))))),t("div",{key:"d00f83ec4c0bc5bad0f70331b7197941f0fe33de",class:"stickyCell headersContainer"},t("div",{key:"babfabb471caa327e8e016aa696f55ac66117b73",class:"monthsContainer"},this.calendarData.monthsInfo.map((e=>t("div",{class:"monthCell",style:{width:e.daysCount*58+"px"}},t("div",{class:"monthTitle"},e.monthName))))),this.calendarData.days.map((e=>t("div",{class:`headerCell align-items-center ${"day-"+e.day} ${e.day===this.today||e.day===this.highlightedDate?"currentDay":""}`,"data-day":e.day},!this.calendarData.is_vacation_rental&&t("div",{class:"preventPageScroll"},t("span",{class:`badge badge-${this.unassignedRoomsNumber[e.day]||e.unassigned_units_nbr!==0?"info pointer":"light"} badge-pill`,onClick:()=>this.showToBeAssigned(e)},this.unassignedRoomsNumber[e.day]||e.unassigned_units_nbr)),t("div",{class:{dayTitle:true,weekend:L(e.value)}},e.dayDisplayName),t("div",{class:"dayCapacityPercent"},e.occupancy,"%"))))))}static get watchers(){return{unassignedDates:["handleCalendarDataChanged"]}}};wi.style=mi;const yi=".sc-igl-date-range-h{display:flex;align-items:center !important;font-size:14px !important}.date-range-input.sc-igl-date-range{margin:0;padding:0;display:flex;flex:1;cursor:pointer;width:100%;user-select:none;font-size:14px !important}.iglRangeNights.sc-igl-date-range{margin:0;padding:0}.date-view.sc-igl-date-range{position:absolute;background:white;pointer-events:none;cursor:pointer;display:block;margin-left:14px;margin-right:14px;font-size:13.65px !important;display:flex;align-items:center;inset:0}.date-view.sc-igl-date-range svg.sc-igl-date-range{padding:0 !important;margin:0;margin-right:10px}.calendarPickerContainer.sc-igl-date-range{display:flex !important;position:relative !important;text-align:left;align-items:center !important;padding:0 !important;margin:0;border:1px solid var(--ir-date-range-border, #379ff2);width:var(--ir-date-range-width, 245px);transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.calendarPickerContainer.sc-igl-date-range:focus-within{border-color:#379ff2}.calendarPickerContainer[data-state='disabled'].sc-igl-date-range{border:0px;width:280px}.date-view[data-state='disabled'].sc-igl-date-range,.date-range-input[data-state='disabled'].sc-igl-date-range{margin:0;cursor:default}.date-range-container-cn.sc-igl-date-range{position:relative;width:fit-content}.date-range-container-cn.sc-igl-date-range:focus-within .date-range-container.sc-igl-date-range{border:1px solid #379ff2}.date-range-container.sc-igl-date-range{position:relative;gap:1rem;font-size:0.975rem;line-height:1.45;border-radius:0.21rem;border:1px solid #cacfe7;color:#3b4781;padding:0.75rem 1rem;box-sizing:border-box !important;font-weight:400;background-color:#fff;background-clip:padding-box;height:2rem;pointer-events:none;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.date-range-container-cn.sc-igl-date-range .date-range-input.sc-igl-date-range{position:absolute;width:100% !important;inset:0;cursor:pointer}.date-range-container.disabled.sc-igl-date-range{border:none;padding-left:0;padding-right:0}.date-range-input[data-state='disabled'].sc-igl-date-range{cursor:default}";const vi=yi;const ki=class{constructor(t){e(this,t);this.dateSelectEvent=a(this,"dateSelectEvent",7);this.toast=a(this,"toast",7)}defaultData;disabled=false;minDate;dateLabel;maxDate;withDateDifference=true;variant="default";renderAgain=false;dateSelectEvent;toast;totalNights=0;fromDate;toDate;fromDateStr="from";toDateStr="to";componentWillLoad(){this.initializeDates()}handleDataChange(e,t){if(JSON.stringify(e)!==JSON.stringify(t)){this.initializeDates()}}initializeDates(){let e=new Date;e.setHours(0,0,0,0);e.setDate(e.getDate()+1);if(this.defaultData){if(this.defaultData.fromDate){this.fromDate=new Date(this.defaultData.fromDate);this.fromDate.setHours(0,0,0,0);this.fromDateStr=this.getFormattedDateString(this.fromDate)}if(this.defaultData.toDate){this.toDate=new Date(this.defaultData.toDate);this.toDate.setHours(0,0,0,0);this.toDateStr=this.getFormattedDateString(this.toDate)}}if(this.fromDate&&this.toDate){this.calculateTotalNights()}return[this.fromDateStr,this.toDateStr]}calculateTotalNights(){this.totalNights=S(fe(this.fromDate).format("YYYY-MM-DD"),fe(this.toDate).format("YYYY-MM-DD"))}getFormattedDateString(e){return e.getDate()+" "+e.toLocaleString("default",{month:"short"}).toLowerCase()+" "+e.getFullYear()}handleDateSelectEvent(e,t=""){this.dateSelectEvent.emit({key:e,data:t})}handleDateChange(e){const{start:t,end:i}=e.detail;this.fromDate=t.toDate();this.toDate=i.toDate();this.calculateTotalNights();this.handleDateSelectEvent("selectedDateRange",{fromDate:this.fromDate.getTime(),toDate:this.toDate.getTime(),fromDateStr:t.format("DD MMM YYYY"),toDateStr:i.format("DD MMM YYYY"),dateDifference:this.totalNights});this.renderAgain=!this.renderAgain}render(){if(this.variant==="booking"){return t("div",{class:`p-0 m-0 date-range-container-cn`},t("ir-date-range",{maxDate:this.maxDate,class:"date-range-input",disabled:this.disabled,fromDate:this.fromDate,toDate:this.toDate,minDate:this.minDate,autoApply:true,"data-state":this.disabled?"disabled":"active",onDateChanged:e=>{this.handleDateChange(e)}}),t("div",{class:`d-flex align-items-center m-0  date-range-container ${this.disabled?"disabled":""}`},t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"m-0 p-0",height:"14",width:"14",viewBox:"0 0 448 512"},t("path",{fill:"currentColor",d:"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z"})),t("span",null,fe(this.fromDate).format("MMM DD, YYYY")),t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"m-0 p-0",height:"14",width:"14",viewBox:"0 0 512 512"},t("path",{fill:"currentColor",d:"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z"})),t("span",null,fe(this.toDate).format("MMM DD, YYYY")),this.totalNights&&t("span",{class:"m-0 p-0"},this.totalNights+(this.totalNights>1?` ${g.entries.Lcz_Nights}`:` ${g.entries.Lcz_Night}`))))}return t(i,null,t("div",{class:`p-0 m-0 date-range-container-cn`},t("ir-date-range",{maxDate:this.maxDate,class:"date-range-input",disabled:this.disabled,fromDate:this.fromDate,toDate:this.toDate,minDate:this.minDate,autoApply:true,"data-state":this.disabled?"disabled":"active",onDateChanged:e=>{this.handleDateChange(e)}}),t("div",{class:`d-flex align-items-center m-0  date-range-container ${this.disabled?"disabled":""}`},t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"m-0 p-0",height:"14",width:"14",viewBox:"0 0 448 512"},t("path",{fill:"currentColor",d:"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z"})),t("span",null,fe(this.fromDate).format("MMM DD, YYYY")),t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"m-0 p-0",height:"14",width:"14",viewBox:"0 0 512 512"},t("path",{fill:"currentColor",d:"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z"})),t("span",null,fe(this.toDate).format("MMM DD, YYYY")))))}static get watchers(){return{defaultData:["handleDataChange"]}}};ki.style=vi;const xi=".sc-igl-legends-h{display:block}.legendHeader.sc-igl-legends{font-weight:500;letter-spacing:0.05rem;font-size:1.12rem;padding-top:5px;margin-bottom:1rem}.legendCloseBtn.sc-igl-legends{position:absolute;top:50%;right:0;cursor:pointer;font-size:1.75em;line-height:1em;padding:0.4rem;display:flex;align-items:center;justify-content:center;border-radius:3px;transform:translateY(-50%)}.legendCloseBtn.sc-igl-legends:hover{background-color:#f6f6f6}.stickyHeader.sc-igl-legends{position:-webkit-sticky;position:sticky;top:0;background-color:#ffffff;z-index:1}.legendRow.sc-igl-legends{position:relative;vertical-align:middle;margin-bottom:0.3rem}.legendRow.sc-igl-legends div.sc-igl-legends{display:inline-block;vertical-align:middle}.legend_skew.sc-igl-legends,.legend_skew-bordered.sc-igl-legends,.legend_skewsplit.sc-igl-legends{transform:skew(-22deg);width:15px;height:16px;border-radius:4px;background-color:var(--ir-skew-background)}.legend_skew.striped.vertical.sc-igl-legends{--stripe-period:17px;--stripe-angle:360deg}.legend_skew.striped.sc-igl-legends{--stripe-period:6px;background:repeating-linear-gradient(\n    var(--stripe-angle, 45deg),\n    var(--ir-skew-background) 0,\n    var(--ir-skew-background) calc(var(--stripe-period) / 2),\n    var(--ir-event-bg-stripe-color) calc(var(--stripe-period) / 2),\n    var(--ir-event-bg-stripe-color) var(--stripe-period)\n  )}.legend_skew.split.sc-igl-legends{border-right:4px solid black}.legend_skew-bordered.sc-igl-legends{border:1px solid black}.legend_dirty-unit.sc-igl-legends{background-color:white !important;border:1px solid #e0e0e0;height:12px;width:20px;margin-right:1rem;position:relative}.legend_dirty-unit.sc-igl-legends::after{content:'';position:absolute;bottom:0;height:100%;left:30%;right:30%;background-color:#d4d0be !important}.legend_circle.sc-igl-legends{border-radius:100%;width:10px;height:10px;margin:3px 3px 3px 2px}.legend_skewsplit.sc-igl-legends{border-right:2px solid #000000}.headerCell.sc-igl-legends .blueColor.sc-igl-legends{background-color:#31bef1}.greenColor.sc-igl-legends{background-color:#45b16d}.yellowColor.sc-igl-legends{background-color:#f4d552}.greyColor.sc-igl-legends{background-color:#a0a0a0}.redColor.sc-igl-legends{background-color:#f34752}.pinkColor.sc-igl-legends{background-color:#f9b4b7}.legendCalendar.sc-igl-legends .legendRow.sc-igl-legends{margin-bottom:0}.legendCalendar.sc-igl-legends .legendRow.sc-igl-legends:first-child .legendCal.sc-igl-legends{background-color:#ececec}.legendCalendar.sc-igl-legends .legendRow.sc-igl-legends div.sc-igl-legends{display:inline-block;vertical-align:middle;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.total-availability.sc-igl-legends{font-size:1em !important}.legendCalendar.sc-igl-legends .legendCal.sc-igl-legends{width:80px;height:25px;text-align:center;display:inline-grid !important;align-content:center;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.legendCalendar.sc-igl-legends .legendCal.sc-igl-legends .badge.sc-igl-legends{margin-top:0.2rem;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.legendCalendar.sc-igl-legends .legendCal.legendCal-h2.sc-igl-legends{height:40px;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.br-t.sc-igl-legends{border-top:1px solid #a0a0a0}.br-s.sc-igl-legends{border-left:1px solid #a0a0a0;border-right:1px solid #a0a0a0}.br-bt.sc-igl-legends{border-bottom:1px solid #a0a0a0}.highphenLegend.sc-igl-legends{font-size:0.9em;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.highphenLegend.sc-igl-legends::before{width:12px;height:0.5px;content:' ';background-color:#000000;vertical-align:middle;display:inline-block;margin-left:5px;margin-right:5px;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.badge-pill.sc-igl-legends{padding:3px 1em;font-size:0.8em;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.legendRow-editor.sc-igl-legends{vertical-align:top}.legendColorCell.sc-igl-legends{display:flex;align-items:center;gap:0.5rem;padding-right:0.5rem}.legendColorPicker.sc-igl-legends{appearance:none;border:none;background:none;cursor:pointer;width:30px;height:30px;padding:0}.legendColorPicker.sc-igl-legends::-webkit-color-swatch{border:1px solid #e0e0e0;border-radius:4px}.legendColorPicker.sc-igl-legends::-moz-color-swatch{border:1px solid #e0e0e0;border-radius:4px}.legendDetailsCell.sc-igl-legends{min-width:220px}.legendInput.sc-igl-legends,.legendTextarea.sc-igl-legends{width:100%;border:1px solid #d8d8d8;border-radius:4px;padding:0.4rem 0.6rem;font-size:0.85rem;display:block}.legendInput.sc-igl-legends{margin-bottom:0.4rem}.legendTextarea.sc-igl-legends{resize:vertical}.legendActionsCell.sc-igl-legends{width:32px;text-align:right}.legendRemoveBtn.sc-igl-legends{border:none;background:none;cursor:pointer;font-size:1.2rem;line-height:1;color:#a0a0a0;padding:0}.legendRemoveBtn.sc-igl-legends:hover,.legendRemoveBtn.sc-igl-legends:focus{color:#5c5c5c}.legendEditorFooter.sc-igl-legends{margin-top:0.75rem;display:flex;align-items:center;gap:1rem}.legendAddBtn.sc-igl-legends{border:1px solid #d8d8d8;border-radius:4px;background-color:#ffffff;padding:0.35rem 0.75rem;font-size:0.85rem;cursor:pointer}.legendAddBtn.sc-igl-legends:hover,.legendAddBtn.sc-igl-legends:focus{border-color:#b3b3b3}.legendStatus.sc-igl-legends{font-size:0.75rem}.legendStatus.saving.sc-igl-legends{color:#6b6f82}.legendStatus.success.sc-igl-legends{color:#2e7d32}.legendStatus.error.sc-igl-legends{color:#d32f2f}.headerCell.sc-igl-legends{width:70px;display:flex;align-items:center;justify-content:center}.dayTitle.sc-igl-legends{font-size:0.8em;font-weight:600;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.dayCapacityPercent.sc-igl-legends{font-size:0.75em;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.legend_rectangle.sc-igl-legends{height:12px;width:20px;margin-right:1rem}";const _i=xi;const Di=class{constructor(t){e(this,t);this.optionEvent=a(this,"optionEvent",7)}optionEvent;legendData;propertyService=new Tt;bookingColors=[];saveState="idle";saveError;loadingIndex=[];saveTimeout;disconnectedCallback(){if(this.saveTimeout){clearTimeout(this.saveTimeout)}}handleSaveStateChange(e){if(e==="error"||e==="idle"){this.loadingIndex=[]}}handleOptionEvent(e,t=""){this.optionEvent.emit({key:e,data:t})}syncCalendarExtra(e){const t=y.property.calendar_extra??{};y.property.calendar_extra={...t,booking_colors:e.map((e=>({...e})))}}get propertyId(){return y.property?.id??y.property.id??null}updateBookingColor(e,t){const i=y.property.calendar_extra?.booking_colors.map(((i,a)=>a===e?{...i,...t}:i));this.syncCalendarExtra(i);if(this.saveState==="saved"){this.saveState="idle"}}async persistBookingColors(){const e=this.propertyId;if(!e){return}if(this.saveState==="saving"){return}this.saveState="saving";this.saveError=undefined;try{await this.propertyService.setPropertyCalendarExtra({property_id:e,value:JSON.stringify(y.property.calendar_extra)});this.saveState="saved";if(this.saveTimeout){clearTimeout(this.saveTimeout)}this.saveTimeout=window.setTimeout((()=>{this.saveState="idle";this.saveTimeout=undefined}),2e3)}catch(e){this.saveState="error";this.saveError=e instanceof Error?e.message:String(e)}}handleNameInput(e,t){this.updateBookingColor(e,{name:t})}handleBlur(e){this.persistBookingColors();if(!this.loadingIndex.includes(e)){this.loadingIndex=[...this.loadingIndex,e]}}handleLoaderComplete(e){this.loadingIndex=this.loadingIndex.filter((t=>t!==e))}render(){return t(i,{key:"376686df1590c2bc6cee71fbccb951e81c7d4d02",class:"legendContainer pr-1 text-left pb-4"},t("div",{key:"544b2ebdf226b8eae9117167084ad8fd354a86bc",class:"w-full"},t("div",{key:"03155075937096b6dffad2c0f557b78d9476ae90",class:"w-full"},t("div",{key:"17b7cebad1b34d5a05de2a8e1970869982f571cc",class:"stickyHeader pt-1 "},t("p",{key:"c9e75170184c475e1e0eced1e69d69ed2d7ff4c9",class:"legendHeader"},g.entries.Lcz_Legend),t("div",{key:"f79d71818bb2b51c559b54b473ee4052487cc59a",class:"legendCloseBtn",onClick:()=>this.handleOptionEvent("closeSideMenu")},t("svg",{key:"3815edd8c20af316eb34e7e59cbc4577678ba5b2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",height:18,width:18},t("path",{key:"b7d7c0ad1209e72ecb65df2e5e383c5f89d4d4e6",fill:"#6b6f82",d:"M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z"}))),t("hr",{key:"a449d6f817ebe030aebfa11401de789d5bccb141"})),t("div",{key:"cd9724d736786e06b35ce129858ffe717fe26732",class:"mt-2 pl-1"},t("table",{key:"d4d44853f92718947a43829303d78eaf6c333f86"},(()=>{const e=this.legendData.find((e=>e.id==="14"));return t("tr",null,t("td",null,t("div",{class:`legend_${e.design}`,style:{"--ir-skew-background":e.color}})),t("td",null,t("div",{class:"d-flex align-items-center",style:{gap:"0.5rem"}},t("span",{class:"font-small-3"},e.name),t("ir-new-badge",null))))})(),this.legendData.map((e=>{if(["1","2","3","14"].includes(e.id)){return null}const i=y.colorsForegrounds[e?.color];return t("tr",{key:`legend_${e.id}`,class:"legendRow "},t("td",null,e.design==="broom"?t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"12",width:"13.5",viewBox:"0 0 576 512",style:{display:"block"}},t("path",{fill:"black",d:"M566.6 54.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192-34.7-34.7c-4.2-4.2-10-6.6-16-6.6c-12.5 0-22.6 10.1-22.6 22.6l0 29.1L364.3 320l29.1 0c12.5 0 22.6-10.1 22.6-22.6c0-6-2.4-11.8-6.6-16l-34.7-34.7 192-192zM341.1 353.4L222.6 234.9c-42.7-3.7-85.2 11.7-115.8 42.3l-8 8C76.5 307.5 64 337.7 64 369.2c0 6.8 7.1 11.2 13.2 8.2l51.1-25.5c5-2.5 9.5 4.1 5.4 7.9L7.3 473.4C2.7 477.6 0 483.6 0 489.9C0 502.1 9.9 512 22.1 512l173.3 0c38.8 0 75.9-15.4 103.4-42.8c30.6-30.6 45.9-73.1 42.3-115.8z"})):e.design==="check"?t("svg",{height:14,width:14,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"},t("path",{fill:"green",d:"M530.8 134.1C545.1 144.5 548.3 164.5 537.9 178.8L281.9 530.8C276.4 538.4 267.9 543.1 258.5 543.9C249.1 544.7 240 541.2 233.4 534.6L105.4 406.6C92.9 394.1 92.9 373.8 105.4 361.3C117.9 348.8 138.2 348.8 150.7 361.3L252.2 462.8L486.2 141.1C496.6 126.8 516.6 123.6 530.9 134z"})):t("div",{class:`legend_${e.design} ${["1","7"].includes(e.id.toString())?`striped ${e.id.toString()==="1"?"vertical":""}`:""}`,style:{"--ir-skew-background":e.color,"--ir-event-bg-stripe-color":i?.stripe,backgroundColor:e.color}})),t("td",null,t("div",{class:"d-flex align-items-center",style:{gap:"0.5rem"}},t("span",{class:"font-small-3"},e.name))))})),t("tr",{key:"0d3981bfd9cdc2c520fedacb5c71b56242fd5bec"},t("td",{key:"08762afebf76d85e8123c6e758c4c2e6d8a2f86d",colSpan:2},t("hr",{key:"dfe7efc159e9011cc56b60eec9c913bd6d87d625",style:{marginTop:"0.5rem",marginBottom:"0.5rem"}}))),t("tr",{key:"6eda2a9333e307d5fcb165ab92da551dc1317199"},t("th",{key:"53d9981929908d5fc94717157814b1d5fc38fbd2",colSpan:2,class:"",style:{paddingBottom:"0.5rem"}},t("div",{key:"7ab670de37d2cd08bccfc9a574054e46bcb645d5",class:"d-flex align-items-center",style:{gap:"0.5rem"}},t("span",{key:"09361edde4fd059abf8807ad3d18d088b9ffdcb0"},"Default colors")))),this.legendData.map((e=>{if(!["1","2","3"].includes(e.id)){return null}const i=y.colorsForegrounds[e?.color];return t("tr",{key:`legend_${e.id}`,class:"legendRow "},t("td",null,e.design==="broom"?t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"12",width:"13.5",viewBox:"0 0 576 512",style:{display:"block"}},t("path",{fill:"black",d:"M566.6 54.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192-34.7-34.7c-4.2-4.2-10-6.6-16-6.6c-12.5 0-22.6 10.1-22.6 22.6l0 29.1L364.3 320l29.1 0c12.5 0 22.6-10.1 22.6-22.6c0-6-2.4-11.8-6.6-16l-34.7-34.7 192-192zM341.1 353.4L222.6 234.9c-42.7-3.7-85.2 11.7-115.8 42.3l-8 8C76.5 307.5 64 337.7 64 369.2c0 6.8 7.1 11.2 13.2 8.2l51.1-25.5c5-2.5 9.5 4.1 5.4 7.9L7.3 473.4C2.7 477.6 0 483.6 0 489.9C0 502.1 9.9 512 22.1 512l173.3 0c38.8 0 75.9-15.4 103.4-42.8c30.6-30.6 45.9-73.1 42.3-115.8z"})):e.design==="check"?t("svg",{height:14,width:14,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"},t("path",{fill:"green",d:"M530.8 134.1C545.1 144.5 548.3 164.5 537.9 178.8L281.9 530.8C276.4 538.4 267.9 543.1 258.5 543.9C249.1 544.7 240 541.2 233.4 534.6L105.4 406.6C92.9 394.1 92.9 373.8 105.4 361.3C117.9 348.8 138.2 348.8 150.7 361.3L252.2 462.8L486.2 141.1C496.6 126.8 516.6 123.6 530.9 134z"})):t("div",{class:`legend_${e.design} ${["1","7"].includes(e.id.toString())?`striped ${e.id.toString()==="1"?"vertical":""}`:""}`,style:{"--ir-skew-background":e.color,"--ir-event-bg-stripe-color":i?.stripe,backgroundColor:e.color}})),t("td",null,t("div",{class:"d-flex align-items-center",style:{gap:"0.5rem"}},t("span",{class:"font-small-3"},e.name),e.id==="14"&&t("ir-new-badge",null))))})),t("tr",{key:"4943068397f449db2b58092c9e4784880bda5097"},t("td",{key:"94e95390fc12236d4452dddee4b25a5e4d25591f",colSpan:2},t("hr",{key:"5e22d9ff010fdbe50698bb234640abc00ab93d6a",style:{marginTop:"0.5rem",marginBottom:"0.5rem"}}))),t("tr",{key:"4a819ab6d8c938b1be8f75b2351ed94d7e4c6526"},t("th",{key:"f09699afc6fdb75bbbb56d29709864dbcc6667c1",colSpan:2,style:{paddingBottom:"0.5rem"}},t("div",{key:"6b521fb5faecfb2b4155e7239e1d06067239eae6",class:"d-flex align-items-center",style:{gap:"0.5rem"}},t("span",{key:"de5a126bb71ca7ca8096313a8d45e746b7bf2e35"},"Use your own colors"),t("ir-new-badge",{key:"2e5004d8c72800ec0a9792e2c3455c9f182e39bf"})))),y.property.calendar_extra?.booking_colors.map(((e,i)=>{const a=`legend_${e.design}`;return t("tr",{key:`legend_${i}`,class:"legendRow "},t("td",null,t("div",{class:a,style:{backgroundColor:e.color}})),t("td",{class:"legendDetailsCell"},t("div",{class:"d-flex align-items-center",style:{gap:"0.5rem"}},t("ir-input-text",{class:"legendTextarea border-0 m-0 p-0",value:e.name,inputContainerStyle:{margin:"0"},placeholder:"Reason for this color",onTextChange:e=>this.handleNameInput(i,e.detail),onInputBlur:()=>this.handleBlur(i)}),this.loadingIndex.includes(i)&&(this.saveState==="saving"||this.saveState==="saved")?t("ir-success-loader",{onLoaderComplete:()=>this.handleLoaderComplete(i)}):null)))})))),t("hr",{key:"c90d0d77f5759414f5fc2af0a74a15bed5ba8178",style:{marginTop:"1rem",marginBottom:"0.5rem"}}),t("div",{key:"03b9e2fac9fe09ac6a3537e398f6acbc5e4cbd29",class:"mt-1"},t("div",{key:"49191fe8180080f37abc81e1ee9583f740c5ec0c",class:"legendCalendar"},t("div",{key:"91fbf1af4a1c4d16247aedd2b82cdbf39931b554",class:"legendRow align-items-center"},t("div",{key:"81a675ba3f7e1e372059f46f3953e6c027400727",class:"legendCal br-t br-s br-bt"},t("strong",{key:"ecd7676778e35780e45eb4feaa18dca4f1259b18"},"MAR 2022")),t("div",{key:"9d03028e4d87361ffa624113880ed8468eabbb5d",class:"highphenLegend"},g.entries.Lcz_MonthAndYear)),t("div",{key:"fcc1db522c110d28a14eaa66d8acc8a4c54a3ce9",class:"legendRow"},t("div",{key:"0f2c32be3529ebecb24e7865d2e897cd2034852a",class:"legendCal headerCell align-items-center br-s"},t("span",{key:"8fdeb1c2d16eb930959c32be6fbb619d6af5de91",class:"badge badge-info  badge-pill"},"3")),t("div",{key:"181863812f85d5f813f2c9b6bcaebd0f6342a2b8",class:"highphenLegend"},t("div",{key:"015342ad8d95464accabc979da008bc6b80e641a"},g.entries.Lcz_UnassignedUnits))),t("div",{key:"91584f31a5816f44f5c7998ebe8692a6e963d577",class:"legendRow"},t("div",{key:"c1d80aab7144d119014db3c842595a13fb0a29b1",class:"legendCal dayTitle br-s"},"Fri 18"),t("div",{key:"e9a497de76cc6bbaebadd3cc48e99a12cf67873c",class:"highphenLegend"},g.entries.Lcz_Date)),t("div",{key:"1f10e2a271cd76d4ff8446b7a9998400d437ed11",class:"legendRow"},t("div",{key:"fdf90668b4613318addb0365e20951e97154c311",class:"legendCal br-s br-bt dayCapacityPercent"},"15%"),t("div",{key:"a13221012c54e9e13149a8772fdb4140c3875d7e",class:"highphenLegend"},g.entries.Lcz_Occupancy)),t("div",{key:"3f02899d18abff73e25f723a8d4d185d4cf7850b",class:"legendRow"},t("div",{key:"526e05c9c782e9c244f476731bc2693bfb6c624c",class:"legendCal br-s br-bt  font-weight-bold total-availability"},"20"),t("div",{key:"0adb1a9d8034ad9b5371a953fed15c28c0cd78ae",class:"highphenLegend"},g.entries.Lcz_TotalAvailability)))))))}static get watchers(){return{saveState:["handleSaveStateChange"]}}};Di.style=_i;const Ci=".sc-igl-property-booked-by-h{display:block}.bookedByEmailContainer.sc-igl-property-booked-by{flex:auto;max-width:350px}.bookedDetailsForm.sc-igl-property-booked-by label.sc-igl-property-booked-by{min-width:125px;max-width:125px}.row.sc-igl-booking-form.sc-igl-property-booked-by{padding:0 !important}.bookedDetailsForm.sc-igl-property-booked-by .form-group.sc-igl-property-booked-by{margin-bottom:10px !important}.bookedDetailsForm.sc-igl-property-booked-by .checkBoxContainer.sc-igl-property-booked-by input.sc-igl-property-booked-by{height:1.2rem !important;width:30px}.property-booked-by__money-transfer-description.sc-igl-property-booked-by *.sc-igl-property-booked-by{margin:0 !important;margin-bottom:0 !important;margin-top:0 !important}.property-booked-by__money-transfer-description.sc-igl-property-booked-by,.property-booked-by__money-transfer-description.sc-igl-property-booked-by .sc-igl-property-booked-by:where(*,*.sc-igl-property-booked-by::before,*.sc-igl-property-booked-by::after){margin:0.5rem !important}.controlContainer.sc-igl-property-booked-by textarea.sc-igl-property-booked-by{height:60px !important}.margin3.sc-igl-property-booked-by{margin-bottom:5px !important}@media (min-width: 768px){.bookedByEmailContainer.sc-igl-property-booked-by{margin-left:37px}}";const Mi=Ci;const Si=class{constructor(t){e(this,t);this.dataUpdateEvent=a(this,"dataUpdateEvent",7)}language;showPaymentDetails=false;defaultData;countries=[];propertyId;isButtonPressed=false;bookedByData={id:undefined,email:"",firstName:"",lastName:"",countryId:"",isdCode:"",contactNumber:"",selectedArrivalTime:"",emailGuest:false,message:"",cardNumber:"",cardHolderName:"",expiryMonth:"",expiryYear:""};dataUpdateEvent;bookingService=new l;arrivalTimeList=[];expiryMonths=["01","02","03","04","05","06","07","08","09","10","11","12"];expiryYears=[];currentMonth="01";country;paymentMethods=[];componentWillLoad(){this.assignCountryCode();this.initializeExpiryYears();this.initializeDateData();this.populateBookedByData();this.paymentMethods=y.property.allowed_payment_methods.filter((e=>e.is_active&&!e.is_payment_gateway));if(this.paymentMethods.length>0){s("selectedPaymentMethod",{code:this.paymentMethods[0].code})}}handleButtonClicked(e){switch(e.detail.key){case"book":case"bookAndCheckIn":this.isButtonPressed=true;break}}initializeExpiryYears(){const e=(new Date).getFullYear();this.expiryYears=Array.from({length:12},((t,i)=>(e+i).toString()))}async assignCountryCode(){const e=await this.bookingService.getUserDefaultCountry();const t=e["COUNTRY_ID"];this.country=t;this.bookedByData={...this.bookedByData,isdCode:t.toString(),countryId:t}}initializeDateData(){const e=new Date;const t=e.getMonth()+1;this.currentMonth=t<10?`0${t}`:t.toString()}populateBookedByData(){this.bookedByData=this.defaultData?{...this.bookedByData,...this.defaultData}:{};this.arrivalTimeList=this.defaultData?.arrivalTime||[];this.bookedByData={...this.bookedByData,selectedArrivalTime:this.arrivalTimeList[0].CODE_NAME};if(!this.bookedByData.expiryMonth){this.bookedByData.expiryMonth=this.currentMonth}if(!this.bookedByData.expiryYear){this.bookedByData.expiryYear=(new Date).getFullYear()}}handleDataChange(e,t){this.bookedByData[e]=e==="emailGuest"?t.target.checked:t.target.value;this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:{...this.bookedByData}});if(e==="countryId"){this.bookedByData={...this.bookedByData,isdCode:t.target.value}}}handleCountryChange(e){this.bookedByData={...this.bookedByData,isdCode:e,countryId:e};this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:{...this.bookedByData}})}handleNumberInput(e,t){const i=t.target;const a=i.value;const r=/^[0-9]+$/;if(!r.test(a)){i.value=a.replace(/[^0-9]/g,"")}if(a===i.value){this.handleDataChange(e,t)}}async checkUser(){try{const e=this.bookedByData.email;if(z.string().email().safeParse(e).success){const t=await this.bookingService.getUserInfo(e);if(t!==null){this.bookedByData={...this.bookedByData,id:t.id,firstName:t.first_name,lastName:t.last_name,contactNumber:t.mobile_without_prefix,countryId:t.country_id,isdCode:t?.country_phone_prefix??t.isdCode.toString()};console.log(this.bookedByData)}else{let t={...this.bookedByData};t={...t,email:e};this.bookedByData={...t}}}else{let e={...this.bookedByData};e={...e,email:""};this.bookedByData={...e}}this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:{...this.bookedByData}})}catch(e){}}updateGuest(e){s("checkout_guest",{...n.checkout_guest??{},...e})}handleComboboxChange(e){e.stopImmediatePropagation();e.stopPropagation();const{key:t,data:i}=e.detail;console.log(t,i);if(t==="blur"){if(z.string().email().safeParse(i).success){this.bookedByData.email=i;this.checkUser()}else if(this.bookedByData.email!==""&&i==""){this.bookedByData.email=""}this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:this.bookedByData})}if(t==="select"){this.bookedByData.email=i.email;this.bookedByData={...this.bookedByData,id:i.id,firstName:i.first_name,lastName:i.last_name,contactNumber:i.mobile_without_prefix,countryId:i.country_id,isdCode:i["country_phone_prefix"]??i?.country_id};this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:this.bookedByData})}}clearEvent(){this.bookedByData={...this.bookedByData,id:"",firstName:"",lastName:"",contactNumber:"",isdCode:this.country.toString(),countryId:this.country};this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:{...this.bookedByData}})}render(){return t(i,{key:"f876d5d2e2e7e66d1f3ab78055c943b8c2f10c68"},t("div",{key:"f395b7c10f4a5da079536f9b2d39ab11c6270d26",class:"text-left mt-3"},t("div",{key:"4786d6eedf275b9bb7de99b019e7e61f651cf332",class:"form-group d-flex flex-column flex-md-row align-items-md-center text-left "},t("label",{key:"b90dd9e70e5f58d29bdb31230a1aa17f34ceb11c",class:"p-0 m-0 label-control mr-1 font-weight-bold"},g.entries.Lcz_BookedBy),t("div",{key:"df61f5900ec1986e92f76ce69eb8785013bdb0a1",class:"bookedByEmailContainer mt-1 mt-md-0 d-flex align-items-center"},t("ir-autocomplete",{key:"d205b05ae1d47a412811bed9863f548bc31b42ad",testId:"main_guest_email",onComboboxValue:this.handleComboboxChange.bind(this),propertyId:this.propertyId,type:"text",value:this.bookedByData.email,required:true,class:"flex-fill",placeholder:g.entries.Lcz_FindEmailAddress,onInputCleared:()=>this.clearEvent(),danger_border:this.isButtonPressed&&this.bookedByData.email!==""&&H(this.bookedByData.email)}),t("ir-tooltip",{key:"9fd20f80f95188acc736e5d101f5b0fd2fdd3138",class:"ml-1",message:"Leave empty if email is unavailable"})))),t("div",{key:"018e2f7ac8ad949179d082d5323effa9eee5be52",class:"bookedDetailsForm text-left mt-2 font-small-3 "},t("div",{key:"10340b95e215fb0e7025d99b541bebab7d186207",class:"d-flex flex-column flex-md-row  justify-content-md-between "},t("div",{key:"49e5e46b104b4e6d27062e7b00eeb2a66b29fd62",class:"p-0 flex-fill "},t("div",{key:"839bf08aff978946d58fa054bb214b06a1b415f3",class:"form-group d-flex flex-column flex-md-row align-items-md-center p-0 flex-fill "},t("label",{key:"ad6b465ae7e52776c85163a54c4daf17444664e8",class:"p-0 m-0 margin3"},g.entries.Lcz_FirstName),t("div",{key:"c38b41f333c867d2423ffbd274cd9c7d25171a8b",class:"p-0 m-0  controlContainer flex-fill  "},t("input",{key:"ec574fd5aa4149a19ad8f37e1ec46376a316b9b6","data-testid":"main_guest_first_name",class:`form-control flex-fill ${this.isButtonPressed&&this.bookedByData.firstName===""&&"border-danger"}`,type:"text",placeholder:g.entries.Lcz_FirstName,id:pe(),value:this.bookedByData.firstName,onInput:e=>{this.updateGuest({first_name:e.target.value});this.handleDataChange("firstName",e)},required:true}))),t("div",{key:"cee1d9db0c88f978fb67659a367d4f0a960e7bdf",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},t("label",{key:"609f9bdd1172d32c04ff1869b4ed74bf6355ced1",class:"p-0 m-0 margin3"},g.entries.Lcz_LastName),t("div",{key:"2446b2f825849d6ef14b001daeaa5a60173ade67",class:"p-0 m-0  controlContainer flex-fill"},t("input",{key:"29e8ddb4440b5a08108171ea233d68e4195fbf01","data-testid":"main_guest_last_name",class:`form-control ${this.isButtonPressed&&this.bookedByData.lastName===""&&"border-danger"}`,type:"text",placeholder:g.entries.Lcz_LastName,id:pe(),value:this.bookedByData.lastName,onInput:e=>this.handleDataChange("lastName",e)}))),t("div",{key:"00a97c5ad5e7fa42aaf6eadfc89a270ace664279",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},t("label",{key:"3d5842ab9edc2a2596ec1665632b741a4947c750",class:"p-0 m-0 margin3"},g.entries.Lcz_Country),t("ir-country-picker",{key:"941d9fae2003b4e5f7c134981d0030959d5f3657",testId:"main_guest_country",class:"flex-grow-1 m-0",onCountryChange:e=>this.handleCountryChange(e.detail.id),countries:this.countries,country:this.countries.find((e=>e.id===this.bookedByData.countryId))})),t("div",{key:"f1b1f88324108c93572e97e382ab4ac003f77834",class:"form-group p-0 d-flex flex-column flex-md-row align-items-md-center"},t("label",{key:"78b90cebd5540359993d8f35363ac64f2b2f5e5d",class:"p-0 m-0 margin3"},g.entries.Lcz_MobilePhone),t("div",{key:"f156043a3853d53c7502758bfd39cd02b6cd2df1",class:"p-0 m-0 controlContainer flex-fill"},t("ir-phone-input",{key:"6c3e1ac2f31752ff73780d71eb80166ae2c64535",testId:"main_guest_phone",language:this.language,value:this.bookedByData.contactNumber,phone_prefix:this.bookedByData.isdCode,default_country:this.bookedByData.countryId,onTextChange:e=>{this.handleDataChange("isdCode",{target:{value:e.detail.phone_prefix}});this.handleDataChange("contactNumber",{target:{value:e.detail.mobile}})}}))),t("div",{key:"4bb8eda795172337777630b03e1baf5fc3534080",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},t("label",{key:"707dd9c6a4f6dab5759f805fb858e463493dde2d",class:"p-0 m-0 margin3"},g.entries.Lcz_YourArrivalTime),t("div",{key:"1e9f19174938798f6a8f0ff938212141071f2c55",class:"p-0 m-0  controlContainer flex-fill"},t("select",{key:"0b5d95fff3d82f7dc23a113d89c4c6b6314126e4","data-testid":"arrival_time",class:`form-control input-sm pr-0 ${this.isButtonPressed&&this.bookedByData.selectedArrivalTime.code===""&&"border-danger"}`,id:pe(),onChange:e=>this.handleDataChange("selectedArrivalTime",e)},this.arrivalTimeList.map((e=>t("option",{value:e.CODE_NAME,selected:this.bookedByData.selectedArrivalTime.code===e.CODE_NAME},e.CODE_VALUE_EN))))))),t("div",{key:"5afbb6c71c0ba0ab52f40c2938a26f10c1fc689e",class:"p-0 flex-fill  ml-md-3"},t("div",{key:"39a7cd424d4ea91f9c35beccf0318aa5001bc475",class:"  p-0 d-flex flex-column flex-md-row align-items-md-center "},t("label",{key:"b7a069a1347d6f39535182e6750d990aadc7523a",class:"p-0 m-0 margin3"},g.entries.Lcz_AnyMessageForUs),t("div",{key:"839f44b65f273f495cb0029c47570780728bdbbb",class:"p-0 m-0  controlContainer flex-fill "},t("textarea",{key:"d8f50d940ff56516b844d0c2d005c3752004a1ff","data-testid":"note",id:pe(),rows:4,class:"form-control ",name:"message",value:this.bookedByData.message,onInput:e=>this.handleDataChange("message",e)}))),this.paymentMethods.length>1&&t("div",{key:"92b907b0dec8ee240070894e91131a780f1801dd",class:"form-group mt-md-1 mt-1 p-0 d-flex flex-column flex-md-row align-items-md-center"},t("label",{key:"2dcf8ee9599ecc746c3b80152e200ae6a068b1d8",class:"p-0 m-0 margin3"},"Payment Method"),t("div",{key:"7ad946c3a75ba60122c8c4221c0e9318b2d2bd23",class:"p-0 m-0  controlContainer flex-fill"},t("ir-select",{key:"862d3b762e883b8ae17516fa6747f3ae3db255ca",showFirstOption:false,selectedValue:n?.selectedPaymentMethod?.code,data:this.paymentMethods.map((e=>({text:e.description,value:e.code}))),onSelectChange:e=>s("selectedPaymentMethod",{code:e.detail})}))),n.selectedPaymentMethod?.code==="001"&&t(r,{key:"49d27409905d066096bbedaa8924c284d08ecb11"},t("div",{key:"9703f6801e7638a7f89ded4477b348901228a6a1",class:"form-group mt-md-1  p-0 d-flex flex-column flex-md-row align-items-md-center"},t("label",{key:"fc9cbb2c13f3b8befc51fe04a48d7db895ca9755",class:"p-0 m-0 margin3"},g.entries.Lcz_CardNumber),t("div",{key:"3ab135a8ce4da1634f7a2fcb3785e7243353ea60",class:"p-0 m-0  controlContainer flex-fill"},t("input",{key:"2ed3bd997159889f1b943c6f78d288e8f5ad7fcf",class:"form-control",type:"text",placeholder:"",pattern:"0-9 ",id:pe(),value:this.bookedByData.cardNumber,onInput:e=>this.handleNumberInput("cardNumber",e)}))),t("div",{key:"074e008c081aef06b595fa73ad9a734f6fd37819",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},t("label",{key:"34d23006e0baa6eb207e8e6c0459021f86ccfff9",class:"p-0 m-0 margin3"},g.entries.Lcz_CardHolderName),t("div",{key:"9c8c9b2b2f24b4f1569d872b7d4b57dc2cd89029",class:"p-0 m-0  controlContainer flex-fill"},t("input",{key:"e8ef894a9d5459f3e0260dc97848fd36c934f6fa",class:"form-control",type:"text",placeholder:"",pattern:"0-9 ",id:pe(),value:this.bookedByData.cardHolderName,onInput:e=>this.handleDataChange("cardHolderName",e)}))),t("div",{key:"4e0880ea1275649bd998fc9244038a02a1030b86",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},t("label",{key:"791416041f9dc46711399bcdc7fd70472240eb6f",class:"p-0 m-0 margin3"},g.entries.Lcz_ExpiryDate),t("div",{key:"f9fb7f706aeecfc98b09bac51cfb37f86e0dd73a",class:"p-0 m-0 row  controlContainer flex-fill"},t("div",{key:"75c561b9bd072fa28981ebe782477fcd770a792a",class:"p-0 m-0"},t("select",{key:"00fdf9eba243b9f852e05710427dd61d17311e4e",class:"form-control input-sm pr-0",id:pe(),onChange:e=>this.handleDataChange("expiryMonth",e)},this.expiryMonths.map((e=>t("option",{value:e,selected:e===this.bookedByData.expiryMonth},e))))),t("div",{key:"9458258f1635ba7e8d73d6ecda5e15c28ea3274c",class:"p-0 m-0 ml-1"},t("select",{key:"09ff4869b7b312f3885ccd4a1424b08215a732b1",class:"form-control input-sm pr-0",id:pe(),onChange:e=>this.handleDataChange("expiryYear",e)},this.expiryYears.map(((e,i)=>t("option",{value:e,selected:i===this.bookedByData.expiryYear},e)))))))),n.selectedPaymentMethod?.code==="005"&&t("div",{key:"3082d628e2bdc4516e7bd3949dd129395bceec97",class:"form-group mt-md-1 mt-1 p-0 d-flex flex-column flex-md-row align-items-md-center"},t("label",{key:"96dcb1d8f16de2295c570670b7d3f47bef82b4f4",class:"p-0 m-0 margin3"}),t("div",{key:"98935151a6e1ae2f5df3fdfd6d451ab96caeaa6a",class:"p-0 m-0  controlContainer flex-fill"},t("div",{key:"755a9a7602adbf987a98f3485bfd4f3ab86eb8c2",class:"property-booked-by__money-transfer-description",innerHTML:this.paymentMethods.find((e=>e.code==="005"))?.localizables.find((e=>e.language.code.toLowerCase()==="en"))?.description}))),t("div",{key:"cff8afd91cd81023daabdf33a7eca5f1169864a4",class:"form-group mt-1 p-0 d-flex flex-row align-items-center"},t("label",{key:"a07c31fb7ce06c029168579b845789e762454a69",class:"p-0 m-0",htmlFor:"emailTheGuestId"},g.entries.Lcz_EmailTheGuest),t("div",{key:"2dbe59842139b33c9cdd13f5e146fec8f139a3e0",class:"p-0 m-0  controlContainer flex-fill checkBoxContainer"},t("input",{key:"420b0396a437e44590f043983663d734245bc421",class:"form-control",type:"checkbox",checked:this.bookedByData.emailGuest,id:"emailTheGuestId",onChange:e=>this.handleDataChange("emailGuest",e)})))))))}};Si.style=Mi;const Yi=".sc-igl-rate-plan-h{display:block;margin-bottom:0.5rem}.currency.sc-igl-rate-plan{display:block;position:absolute;margin:0;padding:0;height:auto;left:10px}.rate-input.sc-igl-rate-plan{font-size:14px;line-height:0;padding:0;height:0;border-left:0}.rate-input-container.sc-igl-rate-plan{display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;flex:1}.new-currency.sc-igl-rate-plan{color:#3b4781;border:1px solid #cacfe7;font-size:0.975rem;height:2rem;background:white;border-right:0;border-top-right-radius:0;border-bottom-right-radius:0;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.input-group-prepend.sc-igl-rate-plan span[data-state='focus'].sc-igl-rate-plan{border-color:var(--blue)}.input-group-prepend.sc-igl-rate-plan span[data-disabled].sc-igl-rate-plan{background-color:#eceff1;border-color:rgba(118, 118, 118, 0.3)}.non-ref-span.sc-igl-rate-plan{font-size:12px;color:var(--green)}.rateplan-name-container.sc-igl-rate-plan{margin-bottom:0.5rem !important}.rateplan-container.sc-igl-rate-plan{margin-top:0.5rem}@media only screen and (min-width: 1200px){.rateplan-name-container.sc-igl-rate-plan{width:40%;margin-top:0}.rateplan-container.sc-igl-rate-plan{width:40%}}@media only screen and (min-width: 991px){.max-w-300.sc-igl-rate-plan{max-width:200px}.rate-input-container.sc-igl-rate-plan{max-width:50px}.rateplan-name-container.sc-igl-rate-plan{margin-bottom:0 !important}}@media only screen and (min-width: 991px) and (max-width: 1300px){.rateplan-name-container.sc-igl-rate-plan{width:40%}.price-amount.sc-igl-rate-plan{max-width:150px !important}}@media only screen and (max-width: 768px){.booking-btn.sc-igl-rate-plan{width:100%}}.total-nights-container.sc-igl-rate-plan{width:max-content}.nightBorder.sc-igl-rate-plan{border-left-width:0;border-top-right-radius:3px !important;border-bottom-right-radius:3px !important}";const Ei=Yi;const Ti=class{constructor(t){e(this,t);this.buttonClicked=a(this,"buttonClicked",7)}ratePlan;roomTypeId;ratePricingMode=[];currency;shouldBeDisabled;bookingType="PLUS_BOOKING";isBookDisabled=false;visibleInventory;buttonClicked;disableForm(){const{bookingType:e,shouldBeDisabled:t,ratePlan:i,visibleInventory:a}=this;if(e==="EDIT_BOOKING"&&t){return false}return!i.is_available_to_book||a?.visibleInventory===0}updateRateplanSelection(e){const{roomTypeId:t,ratePlan:i}=this;const a=n.ratePlanSelections;n.ratePlanSelections={...a,[t]:{...a[t],[i.id]:{...a[t][i.id],...e}}}}handleDataChange(e,t){const i=t.target.value;if(e==="adult_child_offering"){this.handleVariationChange(i)}else if(e==="rate"){this.updateRateplanSelection({view_mode:i})}else if(e==="totalRooms"){u({roomTypeId:this.roomTypeId,ratePlanId:this.ratePlan.id,rooms:Number(i)})}}bookProperty(){if(this.bookingType==="BAR_BOOKING"){d()}this.reserveRoom();this.buttonClicked.emit({key:"next"})}reserveRoom(){u({roomTypeId:this.roomTypeId,ratePlanId:this.ratePlan.id,rooms:1,guest:[{last_name:n.guest?.last_name,first_name:n.guest?.first_name,unit:this.roomTypeId===n.guest?.roomtype_id?n.guest?.unit:null,bed_preference:this.visibleInventory.roomtype.is_bed_configuration_enabled?n.guest?.bed_preference:null,infant_nbr:this.visibleInventory.selected_variation?.child_nbr>0?n.guest?.infant_nbr:null}]})}renderRate(){const{visibleInventory:e}=this;if(!e)return"";if(e.is_amount_modified){return e.rp_amount.toString()}const{selected_variation:t,view_mode:i}=e;const a=i==="001"?t?.discounted_amount:t?.amount_per_night_gross;return a?.toString()||""}formatVariation(e){if(!e)return"";const t=`${e.adult_nbr} ${e.adult_nbr===1?g.entries["Lcz_Adult"]?.toLowerCase():g.entries["Lcz_Adults"]?.toLowerCase()}`;const i=e.child_nbr>0?`${e.child_nbr} ${e.child_nbr>1?g.entries["Lcz_Children"]?.toLowerCase():g.entries["Lcz_Child"]?.toLowerCase()}`:"";return i?`${t} ${i}`:t}getTooltipMessages(){const{ratePlan:e,visibleInventory:t}=this;const i=t?.selected_variation;if(!i)return;const a=e.variations?.find((e=>this.formatVariation(e)===this.formatVariation(i)));if(!a)return;const r=a.applicable_policies?.find((e=>e.type==="cancelation"))?.combined_statement;const o=a.applicable_policies?.find((e=>e.type==="guarantee"))?.combined_statement;let n="";if(r){n+=`<b><u>Cancellation:</u></b> ${r}<br/>`}if(o){n+=`<b><u>Guarantee:</u></b> ${o}`}return n||undefined}async handleVariationChange(e){const{ratePlan:t,roomTypeId:i}=this;const a=t.variations||[];const r=a.find((t=>this.formatVariation(t)===e));if(!r)return;p({params:{selected_variation:r},ratePlanId:t.id,roomTypeId:i})}render(){const{ratePlan:e,bookingType:a,currency:o,ratePricingMode:n,visibleInventory:s}=this;const l=e.is_available_to_book;const c=this.disableForm();const h=s?.selected_variation;const u=e.variations?.map((e=>this.formatVariation(e)));return t(i,{key:"3e4b55334a3f58f47def86758f69b3f67c0a3367","data-testid":`rp-${this.ratePlan.id}`},t("div",{key:"50d177449bc3b8d239aace885a07fd7cc09b3ea3",class:`d-flex mt-1  p-0 ${l?"flex-column flex-lg-row align-items-lg-center justify-content-lg-between":"align-items-center justify-content-between"}`},t("div",{key:"fbf751dc739ffcb170d185ea40cf82377dcc27e7","data-testid":"rp_name",class:"rateplan-name-container m-0 p-0  d-flex align-items-center",style:{gap:"0.5rem"}},a==="BAR_BOOKING"?t("p",{class:"m-0 p-0"},t("span",null,e.name.split("/")[1]," ",e.is_non_refundable&&t("span",{class:"non-ref-span"},"Non Refundable"))):t("span",null,e.short_name," ",e.is_non_refundable&&t("span",{class:"non-ref-span"},"Non Refundable")),l&&t("ir-tooltip",{key:"4d197d8d452a066e6c76e3a4d4e0b624cfa8fd02",message:this.getTooltipMessages()})),l?t("div",{class:"d-md-flex m-md-0  justify-content-md-end align-items-md-center flex-fill rateplan-container"},t("div",{class:"flex-fill max-w-300 flex-grow-1"},t("fieldset",{class:"position-relative flex-grow-1 w-100"},t("select",{disabled:c,"data-testid":"adult-child-offering",class:"form-control input-sm flex-grow-1 w-100",id:pe(),onChange:e=>this.handleDataChange("adult_child_offering",e)},u?.map((e=>t("option",{value:e,selected:this.formatVariation(h)===e},e)))))),t("div",{class:"m-0 p-0 mt-1 mt-md-0 d-flex justify-content-between align-items-md-center ml-md-1"},t("div",{class:"d-flex m-0 p-0 rate-total-night-view mt-0 flex-grow-1"},t("ir-price-input",{testId:"amount_input",disabled:c,onTextChange:e=>this.updateRateplanSelection({is_amount_modified:true,rp_amount:Number(e.detail)}),"aria-label":`${this.visibleInventory?.roomtype?.name} ${this.ratePlan.short_name}'s rate`,"aria-describedby":`${this.ratePlan.short_name}'s rate`,class:"ir-br-input-none price-amount w-100 flex-grow-1",currency:o.symbol,value:this.renderRate(),placeholder:g.entries.Lcz_Rate||"Rate"}),t("fieldset",{class:"position-relative m-0 total-nights-container p-0"},t("select",{"data-testid":"nigh_stay_select",disabled:c,class:"form-control input-sm m-0 nightBorder rounded-0 py-0",id:pe(),onChange:e=>this.updateRateplanSelection({view_mode:e.target.value})},n.map((e=>t("option",{value:e.CODE_NAME,selected:s?.view_mode===e.CODE_NAME},e.CODE_VALUE_EN)))))),(a==="PLUS_BOOKING"||a==="ADD_ROOM")&&t("div",{class:"flex-fill mt-0 ml-1 m-0 mt-md-0 p-0"},t("fieldset",{class:"position-relative"},t("select",{"data-testid":"inventory_select",disabled:s.visibleInventory===0,class:"form-control input-sm",id:pe(),onChange:e=>this.handleDataChange("totalRooms",e)},Array.from({length:(s.visibleInventory||0)+1},((e,t)=>t)).map((e=>t("option",{value:e,selected:s.reserved===e},e))))))),a==="EDIT_BOOKING"&&t(r,null,t("div",{class:"m-0 p-0 ml-md-1 mt-md-0 d-none d-md-block"},t("fieldset",{class:"position-relative"},t("input",{"data-testid":"inventory_radio",disabled:c,type:"radio",name:"ratePlanGroup",value:"1",onChange:()=>{d();this.reserveRoom()},checked:s.reserved===1}))),t("button",{"data-testid":"book_property",disabled:c,type:"button",class:"btn btn-primary booking-btn mt-lg-0 btn-sm ml-md-1 mt-1 d-md-none",onClick:()=>{d();this.reserveRoom();this.bookProperty()}},s.reserved===1?g.entries.Lcz_Current:g.entries.Lcz_Select)),(a==="BAR_BOOKING"||a==="SPLIT_BOOKING")&&t("button",{"data-testid":"book",disabled:c||a==="SPLIT_BOOKING"&&this.isBookDisabled,type:"button",class:"btn btn-primary booking-btn mt-md-0 btn-sm ml-md-1 mt-1",onClick:()=>this.bookProperty()},g.entries.Lcz_Book)):t("p",{class:"text-danger m-0 p-0"},g.entries["Lcz_NotAvailable"]||"Not available")))}};Ti.style=Ei;const Ii=".sc-igl-reallocation-dialog-h{display:block;text-align:start}.dialog-body.sc-igl-reallocation-dialog{display:grid;gap:1.5rem}.dialog-body__description.sc-igl-reallocation-dialog{margin:0}.dialog-footer.sc-igl-reallocation-dialog{display:flex;justify-content:flex-end;gap:0.75rem}";const zi=Ii;const Oi=class{constructor(t){e(this,t);this.dialogClose=a(this,"dialogClose",7);this.revertBooking=a(this,"revertBooking",7);this.resetModalState=a(this,"resetModalState",7)}get hostEl(){return o(this)}data;selectedRateplan;showRateplanError=false;dialogClose;revertBooking;resetModalState;dialogEl;rateplanSelectEl;eventsService=new dt;handleDataChange(e){this.resetState(e);if(e){this.dialogEl?.openModal()}else{this.dialogEl?.closeModal()}}async reallocateUnit(){if(!this.data){return}if(!this.validateRateplanSelection()){return}const{pool:e,toRoomId:t,from_date:i,to_date:a}=this.data;try{await this.eventsService.reallocateEvent(e,t,i,a,this.data.rateplans?Number(this.selectedRateplan):undefined)}catch(t){console.log(t);this.revertBooking.emit(e)}finally{this.dialogEl?.closeModal();this.resetModalState.emit()}}get rateplanOptions(){if(!Array.isArray(this.data?.rateplans)){return[]}return this.data.rateplans.map((e=>({...e,text:this.formatRateplanLabel(e)})))}formatRateplanLabel(e){if(!e){return""}const t=e.custom_text?` | ${e.custom_text}`:"";return`${e.text}${t}`.trim()}hasRateplanRequirement(){return this.rateplanOptions.length>0}validateRateplanSelection(){if(!this.hasRateplanRequirement()){return true}if(!this.selectedRateplan){this.showRateplanError=true;this.focusRateplanSelect();return false}return true}focusRateplanSelect(){const e=this.rateplanSelectEl?.shadowRoot?.querySelector("select")??this.rateplanSelectEl?.querySelector("select");if(e){e.focus()}}resetState(e){if(!e){this.selectedRateplan=undefined;this.showRateplanError=false;return}this.selectedRateplan=undefined;this.showRateplanError=false}handleDialogVisibilityChange=e=>{this.dialogClose.emit(false)};handleRateplanChange=e=>{this.selectedRateplan=e;this.showRateplanError=false};handleCancelClick=()=>{this.dialogEl?.closeModal();this.dialogClose.emit(false)};render(){const e=this.hasRateplanRequirement();return t("ir-dialog",{key:"b936141de9f3a1791ceb934c1ea2773ca05e45f8",label:"Alert",ref:e=>this.dialogEl=e,onIrDialogHide:this.handleDialogVisibilityChange},this.data&&t(r,{key:"c47b6da4b6d4f4f73d2206c5de3cab76356d2427"},t("div",{key:"7117867a6dea593fe87d21cec97373c2c856b823",class:"dialog-body"},t("p",{key:"8a2d70d82fb244580013b9d087e5995c87676378",class:"text-left dialog-body__description m-0 p-0"},this.data.description),e&&t("wa-select",{key:"27df2e2cde969c73192cc2e13a53ab92c8fc6caf","onwa-hide":e=>{e.stopImmediatePropagation();e.stopPropagation()},defaultValue:"","onwa-show":e=>{e.stopImmediatePropagation();e.stopPropagation()},size:"small","aria-invalid":String(this.showRateplanError),onchange:e=>this.handleRateplanChange(e.target.value)},t("wa-option",{key:"28d08191fe41ee18177b01214c606496718dcc25",value:""},"Select rate plan..."),this.rateplanOptions.map((e=>t("wa-option",{key:e.value,value:e.value},e.text))))),t("div",{key:"e1887d6fb8a503b1f89b75a6600065c75125d4b3",class:"dialog-footer",slot:"footer"},t("ir-custom-button",{key:"52a26e4d951f2d755095e5e16566662100191e73",appearance:"filled",variant:"neutral",onClickHandler:this.handleCancelClick,size:"medium"},"Cancel"),t("ir-custom-button",{key:"44024c277fe3c0ef9e6457630542e738c41ab9fa",variant:"brand",onClickHandler:()=>this.reallocateUnit(),size:"medium",loading:be("/ReAllocate_Exposed_Room")},"Confirm"))))}static get watchers(){return{data:["handleDataChange"]}}};Oi.style=zi;const Ai=".sc-igl-room-type-h{display:block}.margin-bottom-8.sc-igl-room-type{margin-bottom:8px !important}";const Bi=Ai;const Ri=class{constructor(t){e(this,t);this.dataUpdateEvent=a(this,"dataUpdateEvent",7)}roomType;bookingType="PLUS_BOOKING";dateDifference;ratePricingMode=[];roomInfoId=null;currency;initialRoomIds;isBookDisabled;selectedRooms=[];totalRooms;roomsDistributions=[];dataUpdateEvent;validBookingTypes=["PLUS_BOOKING","ADD_ROOM","EDIT_BOOKING","SPLIT_BOOKING"];render(){const e=this.validBookingTypes.includes(this.bookingType);return t(i,{key:"61ef4b9feb3b35ed4465cfece59109bcf7aa041e"},e&&this.roomType.rateplans?.length>0&&t("div",{key:"8ebfd679180eaaf0ad2ff89b11ccaf603d0cb2b9",class:"font-weight-bold font-medium-1 margin-bottom-8 "},this.roomType.name),this.roomType.rateplans?.map((i=>{if(!!i.variations){let a=this.roomInfoId&&this.roomInfoId===this.roomType.id;const r=f(this.roomType.id,i.id);return t("igl-rate-plan",{isBookDisabled:this.isBookDisabled,visibleInventory:r,key:`rate-plan-${i.id}`,ratePricingMode:this.ratePricingMode,class:e?"":"",currency:this.currency,ratePlan:i,roomTypeId:this.roomType.id,bookingType:this.bookingType,shouldBeDisabled:a})}return null})))}};Ri.style=Bi;const Pi=z.object({roomtype_id:z.coerce.number(),unit_id:z.coerce.number(),rateplan_id:z.coerce.number()});const Ni=".sc-igl-split-booking-h{display:block}.sc-igl-split-booking-h{display:flex;flex-direction:column;flex:1 1 0%;height:100%}.bulk-sheet-container.sc-igl-split-booking{display:flex;flex-direction:column;flex:1;min-height:0;gap:1rem}.animated-container.sc-igl-split-booking{transition:all 0.5s ease}.physical-room.sc-igl-split-booking{margin-left:1rem !important}.physical-room.sc-igl-split-booking>td.sc-igl-split-booking:last-child{padding-left:1rem}.room-type-list.sc-igl-split-booking{padding:0;margin:0}.room-type-list.sc-igl-split-booking>li.sc-igl-split-booking,.physical-room.sc-igl-split-booking,.room-type-row.sc-igl-split-booking{list-style:none}";const Li=Ni;const $i=".sc-igl-split-booking-h{height:100%}.sheet-container.sc-igl-split-booking{display:flex !important;flex-direction:column !important;background:white;height:100vh;gap:1rem;z-index:1000}.sheet-container.sc-igl-split-booking{height:-webkit-fill-available;height:100vh;height:100dvh}.sheet-footer.sc-igl-split-booking{position:sticky;bottom:0;z-index:20;background:white;border-top:1px solid #e4e5ec;display:flex;flex-direction:column;padding:1rem;gap:0.5rem}.sheet-header.sc-igl-split-booking{position:sticky;top:0;z-index:10;background:white}.sheet-body.sc-igl-split-booking{flex:1 1 0%}@media (min-width: 768px){.sheet-footer.sc-igl-split-booking{flex-direction:row;align-items:center}}";const Fi=$i;const Hi=class{constructor(t){e(this,t);this.closeModal=a(this,"closeModal",7)}booking;identifier;selectedDates;room;roomTypes=[];selectedUnit={};isLoading;errors;mealPlanOptions=null;closeModal;defaultDates;bookingService=new l;componentWillLoad(){this.room=this.getRoom();this.defaultDates={...this.generateDates(this.room)};this.selectedDates={...this.defaultDates};console.log(this.booking)}getRoom(){if(!this.booking){throw new Error("Missing booking")}if(!this.identifier){throw new Error("Missing Identifier")}const e=this.booking.rooms.find((e=>e.identifier===this.identifier));if(!e){throw new Error(`Couldn't find room with identifier ${this.identifier}`)}return e}generateDates(e){let t=fe(e.from_date,"YYYY-MM-DD");const i=fe(e.to_date,"YYYY-MM-DD").add(-1,"days");const a=fe();if(t.isBefore(a)){t=a.clone()}if(t.isSame(a)){return{from_date:t,to_date:i}}if(t.isSameOrAfter(a)){return{from_date:t.clone().add(1,"days"),to_date:i}}return{from_date:a.clone().add(1,"days"),to_date:i}}async checkBookingAvailability(){h();const e=this.selectedDates.from_date.format("YYYY-MM-DD");const t=this.selectedDates.to_date.format("YYYY-MM-DD");const i=this.booking.agent!==null;try{const a=await this.bookingService.getBookingAvailability({from_date:e,to_date:t,propertyid:this.booking.property.id,adultChildCount:{adult:1,child:0},language:"en",room_type_ids:[],currency:this.booking.currency,agent_id:i?this.booking.agent.id:null,is_in_agent_mode:i,room_type_ids_to_update:[]});this.roomTypes=a}catch(e){console.error("Error initializing booking availability:",e)}}async doReservation(){try{this.isLoading=true;this.errors=null;const e=Pi.parse(this.selectedUnit);const t=this.booking.rooms.filter((e=>e.identifier!==this.identifier));const i=this.room.in_out?.code==="001"?fe().isBefore(this.selectedDates.from_date)?false:true:false;let a=[...t,{...this.room,from_date:this.room.from_date,to_date:this.selectedDates.from_date.format("YYYY-MM-DD"),days:this.room.days.filter((e=>fe(e.date,"YYYY-MM-DD").isBefore(this.selectedDates.from_date,"dates"))),departure_time:null},{...this.room,identifier:null,in_out:i?this.room.in_out:{code:"000"},check_in:i,assigned_units_pool:null,parent_room_identifier:this.room.identifier,is_split:true,roomtype:{id:e.roomtype_id},rateplan:{id:e.rateplan_id||this.room.rateplan.id},departure_time:this.room.departure_time,unit:{id:e.unit_id},from_date:this.selectedDates.from_date.format("YYYY-MM-DD"),days:this.room.days.filter((e=>fe(e.date,"YYYY-MM-DD").isSameOrAfter(this.selectedDates.from_date,"dates")))}];const r={assign_units:true,is_pms:true,is_direct:this.booking.is_direct,is_backend:true,is_in_loyalty_mode:this.booking.is_in_loyalty_mode,promo_key:this.booking.promo_key,extras:this.booking.extras,agent:this.booking.agent,booking:{from_date:this.booking.from_date,to_date:this.booking.to_date,remark:this.booking.remark,booking_nbr:this.booking.booking_nbr,property:this.booking.property,booked_on:this.booking.booked_on,source:this.booking.source,rooms:a,currency:this.booking.currency,arrival:this.booking.arrival,guest:this.booking.guest},pickup_info:this.booking.pickup_info};console.log(r);await this.bookingService.doReservation(r);this.closeModal.emit(null)}catch(e){const t={};if(e instanceof N){console.error(e);e.issues.forEach((e=>{t[e.path[0]]=true}));this.errors={...t}}}finally{this.isLoading=false}}updateSelectedUnit(e){const t={...this.selectedUnit,...e};const i=y?.property?.roomtypes;const a=E({rateplan_id:this.room.rateplan.id.toString(),roomTypeId:t?.roomtype_id,roomTypes:i});const r=Object.prototype.hasOwnProperty.call(e,"rateplan_id");if(Array.isArray(a)){this.mealPlanOptions=a;if(!r){delete t.rateplan_id}}else{this.mealPlanOptions=null;if(!r){if(a){t.rateplan_id=Number(a.value)}else{delete t.rateplan_id}}}this.selectedUnit=t}render(){return t("form",{key:"4e2a32eea55bdfd2a90e77159f50183adf80d5c9",onSubmit:e=>{e.preventDefault();this.doReservation()},class:"sheet-container"},t("ir-title",{key:"28b27ade2ccf1d185374f557907a91da2af59d7e",class:"px-1 sheet-header mb-0",displayContext:"sidebar",onCloseSideBar:()=>this.closeModal.emit(),label:`Split unit ${this.room?.unit["name"]}`}),t("section",{key:"8f60c6ef971902c68f73e6c4a8c519d289d671fc",class:"px-1 sheet-body"},t("div",{key:"49348203471ce491bea1c34b90453ba3937dac35",class:"d-flex align-items-center",style:{gap:"0.5rem"}},t("div",{key:"dc1ed8e126cd7a11bcc4efa236fb468926a25c19"},t("ir-date-view",{key:"00fad800dcf46b989658be646e6e05912e2710ca",from_date:this.room.from_date,to_date:this.room.to_date,showDateDifference:false})),t("p",{key:"c91144d6c63820441e8fb2e3e4b3ece73f639238",class:"m-0 p-0"},this.room.rateplan.short_name," ",this.room.rateplan.is_non_refundable?g.entries.Lcz_NonRefundable:"")),t("div",{key:"fb1327ba65a4c1e22f2740c5d8dbbcaca0b1f5ea",class:"d-flex align-items-center mt-1",style:{gap:"0.5rem"}},t("span",{key:"f7d5ba40c04316edc407089ebbfd3d7a276e418d"},"From:"),t("ir-date-picker",{key:"29cfdd213dd9bfb398321e2b1c09795e647a862b","data-testid":"pickup_arrival_date",date:this.selectedDates?.from_date?.format("YYYY-MM-DD"),maxDate:this.defaultDates?.to_date.format("YYYY-MM-DD"),minDate:this.defaultDates?.from_date.format("YYYY-MM-DD"),emitEmptyDate:true,onDateChanged:e=>{this.selectedDates={...this.selectedDates,from_date:e.detail.start}}},t("input",{key:"079804d42576881a168c75e6b0199454c4660bd0",type:"text",slot:"trigger",value:this.selectedDates.from_date?this.selectedDates.from_date.format("MMM DD, YYYY"):null,class:`form-control input-sm  text-center`,style:{width:"120px"}})),t("ir-button",{key:"1c506902aa81f457b925b8e527bf7211c305a4f1",isLoading:be("/Check_Availability"),text:"Check available units",size:"sm",onClick:()=>this.checkBookingAvailability()})),this.errors?.roomtype_id&&t("p",{key:"245730a13555d6ea7c3e375a42fd6c7720c217dd",class:"text-danger text-left mt-2"},"Please select a room"),t("ul",{key:"9e0d8ec3ecb8320d1374fb08baac21d0cb27fcfb",class:"room-type-list mt-2"},this.roomTypes?.map((e=>{if(!e.is_available_to_book){return null}const i=(()=>{const t=new Map;for(const i of e.rateplans??[]){for(const e of i.assignable_units??[]){if(e.Is_Fully_Available){t.set(e.pr_id,e.name)}}}return Array.from(t,(([e,t])=>({id:e,name:t})))})();return t(r,null,t("li",{key:`roomTypeRow-${e.id}`,class:`room-type-row`},t("div",{class:"d-flex choice-row"},t("span",{class:"text-left room-type-name"},e.name))),i.map(((i,a)=>{const r=a===e.physicalrooms.length-1?"pb-1":"";const o=this.selectedUnit?.unit_id===i.id&&Array.isArray(this.mealPlanOptions)&&this.mealPlanOptions.length>0;return t("li",{key:`physicalRoom-${i.id}-${a}`,class:`physical-room ${r}`},t("div",{class:"d-flex choice-row align-items-center",style:{gap:"0.5rem"}},t("ir-radio",{class:"pl-1",name:"unit",checked:this.selectedUnit?.unit_id===i.id,onCheckChange:()=>this.updateSelectedUnit({roomtype_id:e.id,unit_id:i.id}),label:i.name}),o&&t("ir-select",{firstOption:"Select a new rateplan...",error:this.errors?.rateplan_id&&!this.selectedUnit?.rateplan_id,onSelectChange:e=>{const t=e.detail===null||e.detail===undefined||e.detail===""?undefined:Number(e.detail);this.updateSelectedUnit({rateplan_id:t})},data:this.mealPlanOptions.map((e=>({...e,text:e.text+`${e.custom_text?" | ":""}${e.custom_text}`})))})))})))})))),t("div",{key:"a31e0404f5394fe2b45816e398445f98fd07b6c9",class:"sheet-footer"},t("ir-button",{key:"cef8222b8bab83e04a42d61afab2b292ddc8e1af",text:g.entries.Lcz_Cancel,btn_color:"secondary",class:"flex-fill",onClickHandler:()=>this.closeModal.emit(null)}),t("ir-button",{key:"643d8ee794cfd4b3be3a6538d46d2058c965af2a",isLoading:this.isLoading,text:g.entries.Lcz_Confirm,btn_type:"submit",class:"flex-fill"})))}};Hi.style=Li+Fi;const Ui=".sc-igl-tba-booking-view-h{display:block}.guestTitle.sc-igl-tba-booking-view{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:2px;margin-bottom:5px;margin-top:5px;padding-left:5px;padding-right:5px}.guestTitle.selectedOrder.sc-igl-tba-booking-view{background-color:#f9f9c9}.pointer.sc-igl-tba-booking-view{cursor:pointer}hr.sc-igl-tba-booking-view{margin-top:8px;margin-bottom:0px}.bookingContainer.sc-igl-tba-booking-view{background-color:#ececec}.actionsContainer.sc-igl-tba-booking-view{display:flex;align-items:center;padding:5px !important;width:100%;gap:16px}.room-select.sc-igl-tba-booking-view{flex:1}.selectContainer.sc-igl-tba-booking-view{width:195px;margin-right:8px}.buttonsContainer.sc-igl-tba-booking-view{box-sizing:border-box;display:flex;align-items:center;justify-content:flex-end;padding:0;margin:0;gap:0.5rem}";const ji=Ui;const Vi=class{constructor(t){e(this,t);this.highlightToBeAssignedBookingEvent=a(this,"highlightToBeAssignedBookingEvent",7);this.openCalendarSidebar=a(this,"openCalendarSidebar",7);this.addToBeAssignedEvent=a(this,"addToBeAssignedEvent",7);this.scrollPageToRoom=a(this,"scrollPageToRoom",7);this.assignRoomEvent=a(this,"assignRoomEvent",7)}calendarData;selectedDate;eventData={};categoriesData={};categoryId;categoryIndex;eventIndex;renderAgain=false;selectedRoom=-1;isLoading=null;highlightSection=false;allRoomsList=[];toBeAssignedService=new li;highlightToBeAssignedBookingEvent;openCalendarSidebar;addToBeAssignedEvent;scrollPageToRoom;assignRoomEvent;componentShouldUpdate(e,t,i){if(i==="selectedDate"&&e!==t){this.highlightSection=false;this.selectedRoom=-1;return true}else if(i==="eventData"&&e!==t){this.selectedRoom=-1;return true}return true}componentWillLoad(){if(this.categoryIndex===0&&this.eventIndex===0){setTimeout((()=>{this.handleHighlightAvailability()}),100)}}highlightBookingEvent(e){let t=e.detail.data;if(t.bookingId!=this.eventData.ID){this.highlightSection=false;this.selectedRoom=-1;this.renderView()}else{this.highlightSection=true;this.renderView()}}onSelectRoom(e){if(e.stopImmediatePropagation){e.stopImmediatePropagation();e.stopPropagation()}this.selectedRoom=parseInt(e.target.value)}async handleAssignUnit(e,t=false){try{e.stopImmediatePropagation();e.stopPropagation();if(this.selectedRoom){this.isLoading=t?"checkin":"default";const e=await this.toBeAssignedService.assignUnit({booking_nbr:this.eventData.BOOKING_NUMBER,identifier:this.eventData.ID,pr_id:this.selectedRoom,check_in:t});const i=e.rooms.find((e=>e.identifier===this.eventData.identifier));console.log("room=>",i);if(i&&t){const{adult_nbr:e,children_nbr:t,infant_nbr:a}=i.occupancy;window.dispatchEvent(new CustomEvent("openCalendarSidebar",{detail:{type:"room-guests",payload:{identifier:this.eventData.ID,bookingNumber:this.eventData.BOOKING_NUMBER,checkin:false,roomName:i.unit?.name??"",sharing_persons:i.sharing_persons,totalGuests:e+t+a}},bubbles:true,composed:true}));console.log("event emitted directly to window ")}let a={...this.eventData,PR_ID:this.selectedRoom};this.addToBeAssignedEvent.emit({key:"tobeAssignedEvents",data:[a]});this.assignRoomEvent.emit({key:"assignRoom",data:a})}}catch(e){console.log(e)}finally{this.isLoading=null}}handleHighlightAvailability(){this.highlightToBeAssignedBookingEvent.emit({key:"highlightBookingId",data:{bookingId:this.eventData.ID,fromDate:this.eventData.FROM_DATE}});if(!this.selectedDate){return}let e=[];let t=[];e=this.eventData.availableRooms.map((e=>{t.push({calendar_cell:null,id:e.PR_ID,name:e.roomName});return{...e,defaultDateRange:this.eventData.defaultDateRange,identifier:this.eventData.identifier}}));this.allRoomsList=t;this.addToBeAssignedEvent.emit({key:"tobeAssignedEvents",data:e});this.scrollPageToRoom.emit({key:"scrollPageToRoom",id:this.categoryId,refClass:"category_"+this.categoryId});this.renderView()}handleCloseAssignment(e){e.stopImmediatePropagation();e.stopPropagation();this.highlightSection=false;this.highlightToBeAssignedBookingEvent.emit({key:"highlightBookingId",data:{bookingId:"----"}});this.onSelectRoom({target:{value:""}});this.selectedRoom=-1;this.addToBeAssignedEvent.emit({key:"tobeAssignedEvents",data:[]});this.renderView()}renderView(){this.renderAgain=!this.renderAgain}canCheckIn(){return B({from_date:this.eventData.FROM_DATE,to_date:this.eventData.TO_DATE})}render(){return t(i,{key:"c41a4783e0ef2f437f447fd6c68d49584c1920fb"},t("div",{key:"65f5eb059de1fa5a2e63c5afd0137dc535de2af2",class:"bookingContainer",onClick:()=>this.handleHighlightAvailability()},t("div",{key:"3a79fe086d172bc093b7823f98b8503892081288",class:`guestTitle ${this.highlightSection?"selectedOrder":""} pointer font-small-3`,"data-toggle":"tooltip","data-placement":"top","data-original-title":"Click to assign unit"},`Book# ${this.eventData.BOOKING_NUMBER} - ${this.eventData.NAME}`),t("div",{key:"258f17e8f580722f0a1280416871139f9755e3d0",class:"row m-0 p-0 actionsContainer"},t("select",{key:"d94e8b546eb11aa1dcec34ca644f0826861b2b33",class:"form-control input-sm room-select flex-grow-1",id:pe(),onChange:e=>this.onSelectRoom(e)},t("option",{key:"8ce3722c530f6f58652745808a845000b5cbfd39",value:"",selected:this.selectedRoom==-1},g.entries.Lcz_AssignUnit),this.allRoomsList.map((e=>t("option",{value:e.id,selected:this.selectedRoom==e.id},e.name)))),this.highlightSection?t("div",{class:"buttonsContainer bg-red"},t("button",{type:"button",class:"btn btn-secondary btn-sm mx-0",onClick:e=>this.handleCloseAssignment(e)},t("svg",{class:"m-0 p-0",xmlns:"http://www.w3.org/2000/svg",height:"12",width:"9",viewBox:"0 0 384 512"},t("path",{fill:"currentColor",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"})))):null),t("div",{key:"2f3e8bd07e78067750ae3410a0baf8b5df4558b1",class:"d-flex align-items-center ",style:{gap:"0.5rem",paddingInline:"5px"}},t("ir-button",{key:"89d6846efac24e96398ff4cb5f2a9d2301fe48a8",isLoading:this.isLoading==="default",size:"sm",class:"flex-grow-1",text:g.entries.Lcz_Assign,onClickHandler:e=>this.handleAssignUnit(e),btn_disabled:this.selectedRoom===-1}),this.canCheckIn()&&t("ir-button",{key:"c481d30977678c24439ffb1d565fe9685e296d0d",isLoading:this.isLoading==="checkin",size:"sm",class:"flex-grow-1",text:g.entries.Lcz_AssignedAndChecIn,onClickHandler:e=>this.handleAssignUnit(e,true),btn_disabled:this.selectedRoom===-1})),t("hr",{key:"a7fcfc28e517587d6bf2f2b164d7536bf171d18f"})))}};Vi.style=ji;const Gi=".sc-igl-tba-category-view-h{display:block}";const qi=Gi;const Ki=class{constructor(t){e(this,t);this.assignUnitEvent=a(this,"assignUnitEvent",7)}calendarData;selectedDate;categoriesData={};categoryId;eventDatas;categoryIndex;renderAgain=false;assignUnitEvent;handleAssignRoomEvent(e){e.stopImmediatePropagation();e.stopPropagation();const t=e.detail;this.eventDatas=this.eventDatas.filter((e=>e.ID!=t.data.ID));this.calendarData.bookingEvents.push(t.data);this.assignUnitEvent.emit({key:"assignUnit",data:{RT_ID:this.categoryId,selectedDate:this.selectedDate,assignEvent:t.data,calendarData:this.calendarData}});this.renderView()}getEventView(e,i){return i.map(((i,a)=>t("igl-tba-booking-view",{calendarData:this.calendarData,selectedDate:this.selectedDate,eventData:i,categoriesData:this.categoriesData,categoryId:e,categoryIndex:this.categoryIndex,eventIndex:a,onAssignRoomEvent:e=>this.handleAssignRoomEvent(e)})))}renderView(){this.renderAgain=!this.renderAgain}render(){return t(i,{key:"7b5d9f9ae7599006b6aae5503ce92777b1e4447c"},t("div",{key:"135ac55e3fac12fadf7d6d9e6af8ecec96487e8d",class:"sectionContainer"},t("div",{key:"f35ac1136c3c4fa2eaba3f7c9af9954e0ca3eaf3",class:"font-weight-bold mt-1 font-small-3"},this.categoriesData[this.categoryId]?.name),this.getEventView(this.categoryId,this.eventDatas)))}};Ki.style=qi;const Wi=".sc-igl-to-be-assigned-h{display:block}.custom-dropdown.sc-igl-to-be-assigned{cursor:pointer;padding:5px 10px;width:min-content;margin-left:auto;margin-right:auto}.dropdown-toggle.sc-igl-to-be-assigned{all:unset;display:flex;width:max-content;align-items:center;gap:10px}.close_btn_style.sc-igl-to-be-assigned{padding:0.4rem}.close_btn_style.sc-igl-to-be-assigned:hover{background-color:#f6f6f6}.dropdown-menu.sc-igl-to-be-assigned{max-height:250px;overflow-y:auto}.tobeAssignedHeader.sc-igl-to-be-assigned{font-weight:500;letter-spacing:0.05rem;font-size:1.12rem;padding:0;margin:0}.assignment_header.sc-igl-to-be-assigned{display:flex;align-items:center;justify-content:space-between;padding-top:5px;margin-bottom:1rem}.dropdown-toggle.sc-igl-to-be-assigned::after{content:none;display:none}.dropdown-toggle.sc-igl-to-be-assigned .caret-icon.sc-igl-to-be-assigned{transition:transform 0.2s ease}.show.sc-igl-to-be-assigned .caret-icon.sc-igl-to-be-assigned{transform:rotate(-180deg)}.stickyHeader.sc-igl-to-be-assigned{position:-webkit-sticky;position:sticky;top:0;background-color:#ffffff;z-index:1}.pointer.sc-igl-to-be-assigned{cursor:pointer}.dots.sc-igl-to-be-assigned{display:flex;align-items:center;justify-content:center;margin:0 3px;padding:0}.dot.sc-igl-to-be-assigned{width:5px;height:5px;margin:5px 4px 0;background-color:#6b6f82;border-radius:50%;animation:dotFlashing 1s infinite linear alternate}.dot.sc-igl-to-be-assigned:nth-child(2){animation-delay:0.2s}.dot.sc-igl-to-be-assigned:nth-child(3){animation-delay:0.4s}@keyframes dotFlashing{0%{opacity:0}50%,100%{opacity:1}}";const Xi=Wi;const Ji=class{constructor(t){e(this,t);this.optionEvent=a(this,"optionEvent",7);this.reduceAvailableUnitEvent=a(this,"reduceAvailableUnitEvent",7);this.showBookingPopup=a(this,"showBookingPopup",7);this.addToBeAssignedEvent=a(this,"addToBeAssignedEvent",7);this.highlightToBeAssignedBookingEvent=a(this,"highlightToBeAssignedBookingEvent",7)}unassignedDatesProp;propertyid;from_date;to_date;calendarData;loadingMessage;showDatesList=false;renderAgain=false;orderedDatesList=[];noScroll=false;optionEvent;reduceAvailableUnitEvent;showBookingPopup;addToBeAssignedEvent;highlightToBeAssignedBookingEvent;isGotoToBeAssignedDate=false;isLoading=true;selectedDate=null;data={};today=new Date;categoriesData={};toBeAssignedService=new li;unassignedDates;componentWillLoad(){this.reArrangeData();this.loadingMessage=g.entries.Lcz_FetchingUnAssignedUnits}handleUnassignedDatesToBeAssignedChange(e){const{fromDate:t,toDate:i,data:a}=e;let r=new Date(t);r.setHours(0);r.setMinutes(0);r.setSeconds(0);let o=r.getTime();while(o<=new Date(i).getTime()){if(a&&!a[o]&&this.unassignedDates.hasOwnProperty(o)){delete this.unassignedDates[o]}else if(a&&a[o]){this.unassignedDates[o]=a[o]}o=fe(o).add(1,"days").toDate().getTime()}this.data={...this.unassignedDates};this.orderedDatesList=Object.keys(this.data).sort(((e,t)=>parseInt(e)-parseInt(t)));if(this.orderedDatesList.length){if(!this.data.hasOwnProperty(this.selectedDate)){this.selectedDate=this.orderedDatesList.length?this.orderedDatesList[0]:null}this.showForDate(this.selectedDate,false);this.renderView()}else{this.selectedDate=null}}handleAssignUnit(e){const t=e.detail;const i=t.data;e.stopImmediatePropagation();e.stopPropagation();if(t?.key==="assignUnit"&&this.data){if(i?.selectedDate&&this.data[i.selectedDate]){if(this.data[i.selectedDate]?.categories&&Object.keys(this.data[i.selectedDate]?.categories||{})?.length===1){this.isLoading=true;this.noScroll=true}if(i?.RT_ID&&this.data[i.selectedDate]?.categories&&this.data[i.selectedDate].categories[i.RT_ID]&&Array.isArray(this.data[i.selectedDate].categories[i.RT_ID])&&i?.assignEvent?.ID){this.data[i.selectedDate].categories[i.RT_ID]=this.data[i.selectedDate].categories[i.RT_ID].filter((e=>e&&e.ID!==i.assignEvent.ID))}if(i?.calendarData){this.calendarData=i.calendarData}this.renderView()}}}async updateCategories(e,t){try{let i={};const a=await this.toBeAssignedService.getUnassignedRooms({from_date:t.from_date,to_date:t.to_date},this.propertyid,D(new Date(+e)),t.roomsInfo,t.formattedLegendData);a.forEach((e=>{if(!i.hasOwnProperty(e.RT_ID)){i[e.RT_ID]=[e]}else{i[e.RT_ID].push(e)}}));this.unassignedDates[e].categories=i}catch(e){}}async reArrangeData(){try{this.today.setHours(0,0,0,0);this.calendarData.roomsInfo.forEach((e=>{this.categoriesData[e.id]={name:e.name,roomsList:e.physicalrooms,roomIds:e.physicalrooms.map((e=>e.id))}}));this.selectedDate=null;this.unassignedDates=pi();console.log(this.unassignedDates);this.data=this.unassignedDates;this.orderedDatesList=Object.keys(this.data).sort(((e,t)=>parseInt(e)-parseInt(t)));if(!this.selectedDate&&this.orderedDatesList.length){this.selectedDate=this.orderedDatesList[0]}}catch(e){console.error("Error fetching unassigned dates:",e)}}async componentDidLoad(){setTimeout((()=>{if(!this.isGotoToBeAssignedDate&&Object.keys(this.unassignedDates).length>0){const e=Object.keys(this.unassignedDates)[0];this.showForDate(e)}}),100)}async gotoDate(e){this.isGotoToBeAssignedDate=true;this.showForDate(e.detail.data);this.showDatesList=false;this.renderView()}handleToBeAssignedDate(e){this.showBookingPopup.emit({key:"calendar",data:new Date(e.detail.data.fromDate).getTime()-864e5,noScroll:false})}async showForDate(e,t=true){try{if(t){this.isLoading=true}if(this.showDatesList){this.showUnassignedDate()}await this.updateCategories(e,this.calendarData);this.addToBeAssignedEvent.emit({key:"tobeAssignedEvents",data:[]});this.showBookingPopup.emit({key:"calendar",data:parseInt(e)-864e5,noScroll:this.noScroll});if(this.isGotoToBeAssignedDate){this.isGotoToBeAssignedDate=false}this.isLoading=false;this.selectedDate=e;this.renderView()}catch(e){}}getDay(e){const t=new Date(e);const i="default";const a=this.getLocalizedDayOfWeek(t,i);return a+" "+t.getDate()+", "+t.getFullYear()}getLocalizedDayOfWeek(e,t){const i={weekday:"short"};return e.toLocaleDateString(t,i)}handleOptionEvent(e,t=""){this.highlightToBeAssignedBookingEvent.emit({key:"highlightBookingId",data:{bookingId:"----"}});this.addToBeAssignedEvent.emit({key:"tobeAssignedEvents",data:[]});this.optionEvent.emit({key:e,data:t})}showUnassignedDate(){this.showDatesList=!this.showDatesList}getToBeAssignedEntities(){}getCategoryView(){if(this.orderedDatesList.length&&this.selectedDate&&this.data[this.selectedDate]){return Object.entries(this.data[this.selectedDate].categories).map((([e,i],a)=>t("igl-tba-category-view",{calendarData:this.calendarData,selectedDate:this.selectedDate,categoryId:e,categoryIndex:a,categoriesData:this.categoriesData,eventDatas:i,onAssignUnitEvent:e=>this.handleAssignUnit(e)})))}else{return null}}renderView(){this.renderAgain=!this.renderAgain}render(){return t(i,{key:"fcde98d071cd510fe105222f26b4121f1e6b60c6",class:"tobeAssignedContainer pr-1 text-left"},t("div",{key:"1bf1d6fcd41ae9c6b85de8aeeb6bbfc25ec7827b"},t("div",{key:"20f58f413a909e49c90e660a00fbccb618c9f965"},t("div",{key:"9e7f0c54e877dec98b268c0c8d62b382da586a09",class:"stickyHeader pt-1"},t("div",{key:"b7d3c3bc254e4150a4ee0dcf7735ff479a47d3ae",class:"assignment_header"},t("p",{key:"79d7f37e47d9030d04b7963817d9909052da6b78",class:"tobeAssignedHeader "},g.entries.Lcz_Assignments),t("ir-button",{key:"7c7458eda8c9d69a1dee640ce849082090cc0ee5",class:"close_btn",variant:"icon",btn_styles:"close_btn_style",icon_name:"double_caret_left",style:De.secondary,onClickHandler:()=>this.handleOptionEvent("closeSideMenu"),visibleBackgroundOnHover:true})),t("hr",{key:"4c1a5d01e6f9d4a8dba35c1553c0aeb68fcb653f"}),Object.keys(this.data).length===0?t("p",null,g.entries.Lcz_AllBookingsAreAssigned):this.isLoading?t("p",{class:"d-flex align-items-center"},t("span",{class:"p-0"},this.loadingMessage),t("div",{class:"dots"},t("div",{class:"dot"}),t("div",{class:"dot"}),t("div",{class:"dot"}))):t(r,null,this.orderedDatesList.length?t("div",{class:`custom-dropdown border border-light rounded text-center `+(this.showDatesList?"show":""),id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},t("div",{class:"dropdown-toggle"},t("span",{class:"font-weight-bold"},this.data[this.selectedDate].dateStr),t("svg",{class:"caret-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",height:14,width:14},t("path",{fill:"#6b6f82",d:"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"}))),t("div",{class:"dropdown-menu dropdown-menu-right full-width","aria-labelledby":"dropdownMenuButton"},this.orderedDatesList?.map((e=>t("div",{class:"dropdown-item pointer",onClick:()=>this.showForDate(e)},this.data[e].dateStr))))):g.entries.Lcz_AllBookingsAreAssigned)),!this.isLoading&&t("div",{key:"640121617d52801d51072fa1cf95c76d697c8016",class:"scrollabledArea"},this.orderedDatesList.length?Object.keys(this.data[this.selectedDate].categories).length?this.getCategoryView():t("div",{class:"mt-1"},g.entries.Lcz_AllAssignForThisDay):null))))}static get watchers(){return{unassignedDatesProp:["handleUnassignedDatesToBeAssignedChange"]}}};Ji.style=Xi;const Qi=Object.create(null);Qi["open"]="0";Qi["close"]="1";Qi["ping"]="2";Qi["pong"]="3";Qi["message"]="4";Qi["upgrade"]="5";Qi["noop"]="6";const Zi=Object.create(null);Object.keys(Qi).forEach((e=>{Zi[Qi[e]]=e}));const ea={type:"error",data:"parser error"};const ta=typeof Blob==="function"||typeof Blob!=="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]";const ia=typeof ArrayBuffer==="function";const aa=e=>typeof ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer;const ra=({type:e,data:t},i,a)=>{if(ta&&t instanceof Blob){if(i){return a(t)}else{return oa(t,a)}}else if(ia&&(t instanceof ArrayBuffer||aa(t))){if(i){return a(t)}else{return oa(new Blob([t]),a)}}return a(Qi[e]+(t||""))};const oa=(e,t)=>{const i=new FileReader;i.onload=function(){const e=i.result.split(",")[1];t("b"+(e||""))};return i.readAsDataURL(e)};function na(e){if(e instanceof Uint8Array){return e}else if(e instanceof ArrayBuffer){return new Uint8Array(e)}else{return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}}let sa;function la(e,t){if(ta&&e.data instanceof Blob){return e.data.arrayBuffer().then(na).then(t)}else if(ia&&(e.data instanceof ArrayBuffer||aa(e.data))){return t(na(e.data))}ra(e,false,(e=>{if(!sa){sa=new TextEncoder}t(sa.encode(e))}))}const ca="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";const da=typeof Uint8Array==="undefined"?[]:new Uint8Array(256);for(let e=0;e<ca.length;e++){da[ca.charCodeAt(e)]=e}const ha=e=>{let t=e.length*.75,i=e.length,a,r=0,o,n,s,l;if(e[e.length-1]==="="){t--;if(e[e.length-2]==="="){t--}}const c=new ArrayBuffer(t),d=new Uint8Array(c);for(a=0;a<i;a+=4){o=da[e.charCodeAt(a)];n=da[e.charCodeAt(a+1)];s=da[e.charCodeAt(a+2)];l=da[e.charCodeAt(a+3)];d[r++]=o<<2|n>>4;d[r++]=(n&15)<<4|s>>2;d[r++]=(s&3)<<6|l&63}return c};const ua=typeof ArrayBuffer==="function";const pa=(e,t)=>{if(typeof e!=="string"){return{type:"message",data:ba(e,t)}}const i=e.charAt(0);if(i==="b"){return{type:"message",data:fa(e.substring(1),t)}}const a=Zi[i];if(!a){return ea}return e.length>1?{type:Zi[i],data:e.substring(1)}:{type:Zi[i]}};const fa=(e,t)=>{if(ua){const i=ha(e);return ba(i,t)}else{return{base64:true,data:e}}};const ba=(e,t)=>{switch(t){case"blob":if(e instanceof Blob){return e}else{return new Blob([e])}case"arraybuffer":default:if(e instanceof ArrayBuffer){return e}else{return e.buffer}}};const ga=String.fromCharCode(30);const ma=(e,t)=>{const i=e.length;const a=new Array(i);let r=0;e.forEach(((e,o)=>{ra(e,false,(e=>{a[o]=e;if(++r===i){t(a.join(ga))}}))}))};const wa=(e,t)=>{const i=e.split(ga);const a=[];for(let e=0;e<i.length;e++){const r=pa(i[e],t);a.push(r);if(r.type==="error"){break}}return a};function ya(){return new TransformStream({transform(e,t){la(e,(i=>{const a=i.length;let r;if(a<126){r=new Uint8Array(1);new DataView(r.buffer).setUint8(0,a)}else if(a<65536){r=new Uint8Array(3);const e=new DataView(r.buffer);e.setUint8(0,126);e.setUint16(1,a)}else{r=new Uint8Array(9);const e=new DataView(r.buffer);e.setUint8(0,127);e.setBigUint64(1,BigInt(a))}if(e.data&&typeof e.data!=="string"){r[0]|=128}t.enqueue(r);t.enqueue(i)}))}})}let va;function ka(e){return e.reduce(((e,t)=>e+t.length),0)}function xa(e,t){if(e[0].length===t){return e.shift()}const i=new Uint8Array(t);let a=0;for(let r=0;r<t;r++){i[r]=e[0][a++];if(a===e[0].length){e.shift();a=0}}if(e.length&&a<e[0].length){e[0]=e[0].slice(a)}return i}function _a(e,t){if(!va){va=new TextDecoder}const i=[];let a=0;let r=-1;let o=false;return new TransformStream({transform(n,s){i.push(n);while(true){if(a===0){if(ka(i)<1){break}const e=xa(i,1);o=(e[0]&128)===128;r=e[0]&127;if(r<126){a=3}else if(r===126){a=1}else{a=2}}else if(a===1){if(ka(i)<2){break}const e=xa(i,2);r=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0);a=3}else if(a===2){if(ka(i)<8){break}const e=xa(i,8);const t=new DataView(e.buffer,e.byteOffset,e.length);const o=t.getUint32(0);if(o>Math.pow(2,53-32)-1){s.enqueue(ea);break}r=o*Math.pow(2,32)+t.getUint32(4);a=3}else{if(ka(i)<r){break}const e=xa(i,r);s.enqueue(pa(o?e:va.decode(e),t));a=0}if(r===0||r>e){s.enqueue(ea);break}}}})}const Da=4;function Ca(e){if(e)return Ma(e)}function Ma(e){for(var t in Ca.prototype){e[t]=Ca.prototype[t]}return e}Ca.prototype.on=Ca.prototype.addEventListener=function(e,t){this._callbacks=this._callbacks||{};(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t);return this};Ca.prototype.once=function(e,t){function i(){this.off(e,i);t.apply(this,arguments)}i.fn=t;this.on(e,i);return this};Ca.prototype.off=Ca.prototype.removeListener=Ca.prototype.removeAllListeners=Ca.prototype.removeEventListener=function(e,t){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length){delete this._callbacks["$"+e];return this}var a;for(var r=0;r<i.length;r++){a=i[r];if(a===t||a.fn===t){i.splice(r,1);break}}if(i.length===0){delete this._callbacks["$"+e]}return this};Ca.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=new Array(arguments.length-1),i=this._callbacks["$"+e];for(var a=1;a<arguments.length;a++){t[a-1]=arguments[a]}if(i){i=i.slice(0);for(var a=0,r=i.length;a<r;++a){i[a].apply(this,t)}}return this};Ca.prototype.emitReserved=Ca.prototype.emit;Ca.prototype.listeners=function(e){this._callbacks=this._callbacks||{};return this._callbacks["$"+e]||[]};Ca.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Sa=(()=>{const e=typeof Promise==="function"&&typeof Promise.resolve==="function";if(e){return e=>Promise.resolve().then(e)}else{return(e,t)=>t(e,0)}})();const Ya=(()=>{if(typeof self!=="undefined"){return self}else if(typeof window!=="undefined"){return window}else{return Function("return this")()}})();const Ea="arraybuffer";function Ta(){}function Ia(e,...t){return t.reduce(((t,i)=>{if(e.hasOwnProperty(i)){t[i]=e[i]}return t}),{})}const za=Ya.setTimeout;const Oa=Ya.clearTimeout;function Aa(e,t){if(t.useNativeTimers){e.setTimeoutFn=za.bind(Ya);e.clearTimeoutFn=Oa.bind(Ya)}else{e.setTimeoutFn=Ya.setTimeout.bind(Ya);e.clearTimeoutFn=Ya.clearTimeout.bind(Ya)}}const Ba=1.33;function Ra(e){if(typeof e==="string"){return Pa(e)}return Math.ceil((e.byteLength||e.size)*Ba)}function Pa(e){let t=0,i=0;for(let a=0,r=e.length;a<r;a++){t=e.charCodeAt(a);if(t<128){i+=1}else if(t<2048){i+=2}else if(t<55296||t>=57344){i+=3}else{a++;i+=4}}return i}function Na(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function La(e){let t="";for(let i in e){if(e.hasOwnProperty(i)){if(t.length)t+="&";t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i])}}return t}function $a(e){let t={};let i=e.split("&");for(let e=0,a=i.length;e<a;e++){let a=i[e].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}class Fa extends Error{constructor(e,t,i){super(e);this.description=t;this.context=i;this.type="TransportError"}}class Ha extends Ca{constructor(e){super();this.writable=false;Aa(this,e);this.opts=e;this.query=e.query;this.socket=e.socket;this.supportsBinary=!e.forceBase64}onError(e,t,i){super.emitReserved("error",new Fa(e,t,i));return this}open(){this.readyState="opening";this.doOpen();return this}close(){if(this.readyState==="opening"||this.readyState==="open"){this.doClose();this.onClose()}return this}send(e){if(this.readyState==="open"){this.write(e)}}onOpen(){this.readyState="open";this.writable=true;super.emitReserved("open")}onData(e){const t=pa(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed";super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){if(this.opts.port&&(this.opts.secure&&Number(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)){return":"+this.opts.port}else{return""}}_query(e){const t=La(e);return t.length?"?"+t:""}}class Ua extends Ha{constructor(){super(...arguments);this._polling=false}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused";e()};if(this._polling||!this.writable){let e=0;if(this._polling){e++;this.once("pollComplete",(function(){--e||t()}))}if(!this.writable){e++;this.once("drain",(function(){--e||t()}))}}else{t()}}_poll(){this._polling=true;this.doPoll();this.emitReserved("poll")}onData(e){const t=e=>{if("opening"===this.readyState&&e.type==="open"){this.onOpen()}if("close"===e.type){this.onClose({description:"transport closed by the server"});return false}this.onPacket(e)};wa(e,this.socket.binaryType).forEach(t);if("closed"!==this.readyState){this._polling=false;this.emitReserved("pollComplete");if("open"===this.readyState){this._poll()}}}doClose(){const e=()=>{this.write([{type:"close"}])};if("open"===this.readyState){e()}else{this.once("open",e)}}write(e){this.writable=false;ma(e,(e=>{this.doWrite(e,(()=>{this.writable=true;this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http";const t=this.query||{};if(false!==this.opts.timestampRequests){t[this.opts.timestampParam]=Na()}if(!this.supportsBinary&&!t.sid){t.b64=1}return this.createUri(e,t)}}let ja=false;try{ja=typeof XMLHttpRequest!=="undefined"&&"withCredentials"in new XMLHttpRequest}catch(e){}const Va=ja;function Ga(){}class qa extends Ua{constructor(e){super(e);if(typeof location!=="undefined"){const t="https:"===location.protocol;let i=location.port;if(!i){i=t?"443":"80"}this.xd=typeof location!=="undefined"&&e.hostname!==location.hostname||i!==e.port}}doWrite(e,t){const i=this.request({method:"POST",data:e});i.on("success",t);i.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this));e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)}));this.pollXhr=e}}class Ka extends Ca{constructor(e,t,i){super();this.createRequest=e;Aa(this,i);this._opts=i;this._method=i.method||"GET";this._uri=t;this._data=undefined!==i.data?i.data:null;this._create()}_create(){var e;const t=Ia(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(t);try{i.open(this._method,this._uri,true);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(true);for(let e in this._opts.extraHeaders){if(this._opts.extraHeaders.hasOwnProperty(e)){i.setRequestHeader(e,this._opts.extraHeaders[e])}}}}catch(e){}if("POST"===this._method){try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}}try{i.setRequestHeader("Accept","*/*")}catch(e){}(e=this._opts.cookieJar)===null||e===void 0?void 0:e.addCookies(i);if("withCredentials"in i){i.withCredentials=this._opts.withCredentials}if(this._opts.requestTimeout){i.timeout=this._opts.requestTimeout}i.onreadystatechange=()=>{var e;if(i.readyState===3){(e=this._opts.cookieJar)===null||e===void 0?void 0:e.parseCookies(i.getResponseHeader("set-cookie"))}if(4!==i.readyState)return;if(200===i.status||1223===i.status){this._onLoad()}else{this.setTimeoutFn((()=>{this._onError(typeof i.status==="number"?i.status:0)}),0)}};i.send(this._data)}catch(e){this.setTimeoutFn((()=>{this._onError(e)}),0);return}if(typeof document!=="undefined"){this._index=Ka.requestsCount++;Ka.requests[this._index]=this}}_onError(e){this.emitReserved("error",e,this._xhr);this._cleanup(true)}_cleanup(e){if("undefined"===typeof this._xhr||null===this._xhr){return}this._xhr.onreadystatechange=Ga;if(e){try{this._xhr.abort()}catch(e){}}if(typeof document!=="undefined"){delete Ka.requests[this._index]}this._xhr=null}_onLoad(){const e=this._xhr.responseText;if(e!==null){this.emitReserved("data",e);this.emitReserved("success");this._cleanup()}}abort(){this._cleanup()}}Ka.requestsCount=0;Ka.requests={};if(typeof document!=="undefined"){if(typeof attachEvent==="function"){attachEvent("onunload",Wa)}else if(typeof addEventListener==="function"){const e="onpagehide"in Ya?"pagehide":"unload";addEventListener(e,Wa,false)}}function Wa(){for(let e in Ka.requests){if(Ka.requests.hasOwnProperty(e)){Ka.requests[e].abort()}}}const Xa=function(){const e=Qa({xdomain:false});return e&&e.responseType!==null}();class Ja extends qa{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Xa&&!t}request(e={}){Object.assign(e,{xd:this.xd},this.opts);return new Ka(Qa,this.uri(),e)}}function Qa(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||Va)){return new XMLHttpRequest}}catch(e){}if(!t){try{return new(Ya[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}}const Za=typeof navigator!=="undefined"&&typeof navigator.product==="string"&&navigator.product.toLowerCase()==="reactnative";class er extends Ha{get name(){return"websocket"}doOpen(){const e=this.uri();const t=this.opts.protocols;const i=Za?{}:Ia(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");if(this.opts.extraHeaders){i.headers=this.opts.extraHeaders}try{this.ws=this.createSocket(e,t,i)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType;this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{if(this.opts.autoUnref){this.ws._socket.unref()}this.onOpen()};this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e});this.ws.onmessage=e=>this.onData(e.data);this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=false;for(let t=0;t<e.length;t++){const i=e[t];const a=t===e.length-1;ra(i,this.supportsBinary,(e=>{try{this.doWrite(i,e)}catch(e){}if(a){Sa((()=>{this.writable=true;this.emitReserved("drain")}),this.setTimeoutFn)}}))}}doClose(){if(typeof this.ws!=="undefined"){this.ws.onerror=()=>{};this.ws.close();this.ws=null}}uri(){const e=this.opts.secure?"wss":"ws";const t=this.query||{};if(this.opts.timestampRequests){t[this.opts.timestampParam]=Na()}if(!this.supportsBinary){t.b64=1}return this.createUri(e,t)}}const tr=Ya.WebSocket||Ya.MozWebSocket;class ir extends er{createSocket(e,t,i){return!Za?t?new tr(e,t):new tr(e):new tr(e,t,i)}doWrite(e,t){this.ws.send(t)}}class ar extends Ha{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)}));this._transport.ready.then((()=>{this._transport.createBidirectionalStream().then((e=>{const t=_a(Number.MAX_SAFE_INTEGER,this.socket.binaryType);const i=e.readable.pipeThrough(t).getReader();const a=ya();a.readable.pipeTo(e.writable);this._writer=a.writable.getWriter();const r=()=>{i.read().then((({done:e,value:t})=>{if(e){return}this.onPacket(t);r()})).catch((e=>{}))};r();const o={type:"open"};if(this.query.sid){o.data=`{"sid":"${this.query.sid}"}`}this._writer.write(o).then((()=>this.onOpen()))}))}))}write(e){this.writable=false;for(let t=0;t<e.length;t++){const i=e[t];const a=t===e.length-1;this._writer.write(i).then((()=>{if(a){Sa((()=>{this.writable=true;this.emitReserved("drain")}),this.setTimeoutFn)}}))}}doClose(){var e;(e=this._transport)===null||e===void 0?void 0:e.close()}}const rr={websocket:ir,webtransport:ar,polling:Ja};const or=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;const nr=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function sr(e){if(e.length>8e3){throw"URI too long"}const t=e,i=e.indexOf("["),a=e.indexOf("]");if(i!=-1&&a!=-1){e=e.substring(0,i)+e.substring(i,a).replace(/:/g,";")+e.substring(a,e.length)}let r=or.exec(e||""),o={},n=14;while(n--){o[nr[n]]=r[n]||""}if(i!=-1&&a!=-1){o.source=t;o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":");o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":");o.ipv6uri=true}o.pathNames=lr(o,o["path"]);o.queryKey=cr(o,o["query"]);return o}function lr(e,t){const i=/\/{2,9}/g,a=t.replace(i,"/").split("/");if(t.slice(0,1)=="/"||t.length===0){a.splice(0,1)}if(t.slice(-1)=="/"){a.splice(a.length-1,1)}return a}function cr(e,t){const i={};t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,a){if(t){i[t]=a}}));return i}const dr=typeof addEventListener==="function"&&typeof removeEventListener==="function";const hr=[];if(dr){addEventListener("offline",(()=>{hr.forEach((e=>e()))}),false)}class ur extends Ca{constructor(e,t){super();this.binaryType=Ea;this.writeBuffer=[];this._prevBufferLen=0;this._pingInterval=-1;this._pingTimeout=-1;this._maxPayload=-1;this._pingTimeoutTime=Infinity;if(e&&"object"===typeof e){t=e;e=null}if(e){const i=sr(e);t.hostname=i.host;t.secure=i.protocol==="https"||i.protocol==="wss";t.port=i.port;if(i.query)t.query=i.query}else if(t.host){t.hostname=sr(t.host).host}Aa(this,t);this.secure=null!=t.secure?t.secure:typeof location!=="undefined"&&"https:"===location.protocol;if(t.hostname&&!t.port){t.port=this.secure?"443":"80"}this.hostname=t.hostname||(typeof location!=="undefined"?location.hostname:"localhost");this.port=t.port||(typeof location!=="undefined"&&location.port?location.port:this.secure?"443":"80");this.transports=[];this._transportsByName={};t.transports.forEach((e=>{const t=e.prototype.name;this.transports.push(t);this._transportsByName[t]=e}));this.opts=Object.assign({path:"/engine.io",agent:false,withCredentials:false,upgrade:true,timestampParam:"t",rememberUpgrade:false,addTrailingSlash:true,rejectUnauthorized:true,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:false},t);this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":"");if(typeof this.opts.query==="string"){this.opts.query=$a(this.opts.query)}if(dr){if(this.opts.closeOnBeforeunload){this._beforeunloadEventListener=()=>{if(this.transport){this.transport.removeAllListeners();this.transport.close()}};addEventListener("beforeunload",this._beforeunloadEventListener,false)}if(this.hostname!=="localhost"){this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})};hr.push(this._offlineEventListener)}}if(this.opts.withCredentials){this._cookieJar=Ta()}this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=Da;t.transport=e;if(this.id)t.sid=this.id;const i=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](i)}_open(){if(this.transports.length===0){this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);return}const e=this.opts.rememberUpgrade&&ur.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open();this.setTransport(t)}setTransport(e){if(this.transport){this.transport.removeAllListeners()}this.transport=e;e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",(e=>this._onClose("transport close",e)))}onOpen(){this.readyState="open";ur.priorWebsocketSuccess="websocket"===this.transport.name;this.emitReserved("open");this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){this.emitReserved("packet",e);this.emitReserved("heartbeat");switch(e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong");this.emitReserved("ping");this.emitReserved("pong");this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data;this._onError(t);break;case"message":this.emitReserved("data",e.data);this.emitReserved("message",e.data);break}}}onHandshake(e){this.emitReserved("handshake",e);this.id=e.sid;this.transport.query.sid=e.sid;this._pingInterval=e.pingInterval;this._pingTimeout=e.pingTimeout;this._maxPayload=e.maxPayload;this.onOpen();if("closed"===this.readyState)return;this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e;this._pingTimeoutTimer=this.setTimeoutFn((()=>{this._onClose("ping timeout")}),e);if(this.opts.autoUnref){this._pingTimeoutTimer.unref()}}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen);this._prevBufferLen=0;if(0===this.writeBuffer.length){this.emitReserved("drain")}else{this.flush()}}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e);this._prevBufferLen=e.length;this.emitReserved("flush")}}_getWritablePackets(){const e=this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1;if(!e){return this.writeBuffer}let t=1;for(let e=0;e<this.writeBuffer.length;e++){const i=this.writeBuffer[e].data;if(i){t+=Ra(i)}if(e>0&&t>this._maxPayload){return this.writeBuffer.slice(0,e)}t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return true;const e=Date.now()>this._pingTimeoutTime;if(e){this._pingTimeoutTime=0;Sa((()=>{this._onClose("ping timeout")}),this.setTimeoutFn)}return e}write(e,t,i){this._sendPacket("message",e,t,i);return this}send(e,t,i){this._sendPacket("message",e,t,i);return this}_sendPacket(e,t,i,a){if("function"===typeof t){a=t;t=undefined}if("function"===typeof i){a=i;i=null}if("closing"===this.readyState||"closed"===this.readyState){return}i=i||{};i.compress=false!==i.compress;const r={type:e,data:t,options:i};this.emitReserved("packetCreate",r);this.writeBuffer.push(r);if(a)this.once("flush",a);this.flush()}close(){const e=()=>{this._onClose("forced close");this.transport.close()};const t=()=>{this.off("upgrade",t);this.off("upgradeError",t);e()};const i=()=>{this.once("upgrade",t);this.once("upgradeError",t)};if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";if(this.writeBuffer.length){this.once("drain",(()=>{if(this.upgrading){i()}else{e()}}))}else if(this.upgrading){i()}else{e()}}return this}_onError(e){ur.priorWebsocketSuccess=false;if(this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening"){this.transports.shift();return this._open()}this.emitReserved("error",e);this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){this.clearTimeoutFn(this._pingTimeoutTimer);this.transport.removeAllListeners("close");this.transport.close();this.transport.removeAllListeners();if(dr){if(this._beforeunloadEventListener){removeEventListener("beforeunload",this._beforeunloadEventListener,false)}if(this._offlineEventListener){const e=hr.indexOf(this._offlineEventListener);if(e!==-1){hr.splice(e,1)}}}this.readyState="closed";this.id=null;this.emitReserved("close",e,t);this.writeBuffer=[];this._prevBufferLen=0}}}ur.protocol=Da;class pr extends ur{constructor(){super(...arguments);this._upgrades=[]}onOpen(){super.onOpen();if("open"===this.readyState&&this.opts.upgrade){for(let e=0;e<this._upgrades.length;e++){this._probe(this._upgrades[e])}}}_probe(e){let t=this.createTransport(e);let i=false;ur.priorWebsocketSuccess=false;const a=()=>{if(i)return;t.send([{type:"ping",data:"probe"}]);t.once("packet",(e=>{if(i)return;if("pong"===e.type&&"probe"===e.data){this.upgrading=true;this.emitReserved("upgrading",t);if(!t)return;ur.priorWebsocketSuccess="websocket"===t.name;this.transport.pause((()=>{if(i)return;if("closed"===this.readyState)return;c();this.setTransport(t);t.send([{type:"upgrade"}]);this.emitReserved("upgrade",t);t=null;this.upgrading=false;this.flush()}))}else{const e=new Error("probe error");e.transport=t.name;this.emitReserved("upgradeError",e)}}))};function r(){if(i)return;i=true;c();t.close();t=null}const o=e=>{const i=new Error("probe error: "+e);i.transport=t.name;r();this.emitReserved("upgradeError",i)};function n(){o("transport closed")}function s(){o("socket closed")}function l(e){if(t&&e.name!==t.name){r()}}const c=()=>{t.removeListener("open",a);t.removeListener("error",o);t.removeListener("close",n);this.off("close",s);this.off("upgrading",l)};t.once("open",a);t.once("error",o);t.once("close",n);this.once("close",s);this.once("upgrading",l);if(this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"){this.setTimeoutFn((()=>{if(!i){t.open()}}),200)}else{t.open()}}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades);super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let i=0;i<e.length;i++){if(~this.transports.indexOf(e[i]))t.push(e[i])}return t}}class fr extends pr{constructor(e,t={}){const i=typeof e==="object"?e:t;if(!i.transports||i.transports&&typeof i.transports[0]==="string"){i.transports=(i.transports||["polling","websocket","webtransport"]).map((e=>rr[e])).filter((e=>!!e))}super(e,i)}}function br(e,t="",i){let a=e;i=i||typeof location!=="undefined"&&location;if(null==e)e=i.protocol+"//"+i.host;if(typeof e==="string"){if("/"===e.charAt(0)){if("/"===e.charAt(1)){e=i.protocol+e}else{e=i.host+e}}if(!/^(https?|wss?):\/\//.test(e)){if("undefined"!==typeof i){e=i.protocol+"//"+e}else{e="https://"+e}}a=sr(e)}if(!a.port){if(/^(http|ws)$/.test(a.protocol)){a.port="80"}else if(/^(http|ws)s$/.test(a.protocol)){a.port="443"}}a.path=a.path||"/";const r=a.host.indexOf(":")!==-1;const o=r?"["+a.host+"]":a.host;a.id=a.protocol+"://"+o+":"+a.port+t;a.href=a.protocol+"://"+o+(i&&i.port===a.port?"":":"+a.port);return a}const gr=typeof ArrayBuffer==="function";const mr=e=>typeof ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer;const wr=Object.prototype.toString;const yr=typeof Blob==="function"||typeof Blob!=="undefined"&&wr.call(Blob)==="[object BlobConstructor]";const vr=typeof File==="function"||typeof File!=="undefined"&&wr.call(File)==="[object FileConstructor]";function kr(e){return gr&&(e instanceof ArrayBuffer||mr(e))||yr&&e instanceof Blob||vr&&e instanceof File}function xr(e,t){if(!e||typeof e!=="object"){return false}if(Array.isArray(e)){for(let t=0,i=e.length;t<i;t++){if(xr(e[t])){return true}}return false}if(kr(e)){return true}if(e.toJSON&&typeof e.toJSON==="function"&&arguments.length===1){return xr(e.toJSON(),true)}for(const t in e){if(Object.prototype.hasOwnProperty.call(e,t)&&xr(e[t])){return true}}return false}function _r(e){const t=[];const i=e.data;const a=e;a.data=Dr(i,t);a.attachments=t.length;return{packet:a,buffers:t}}function Dr(e,t){if(!e)return e;if(kr(e)){const i={_placeholder:true,num:t.length};t.push(e);return i}else if(Array.isArray(e)){const i=new Array(e.length);for(let a=0;a<e.length;a++){i[a]=Dr(e[a],t)}return i}else if(typeof e==="object"&&!(e instanceof Date)){const i={};for(const a in e){if(Object.prototype.hasOwnProperty.call(e,a)){i[a]=Dr(e[a],t)}}return i}return e}function Cr(e,t){e.data=Mr(e.data,t);delete e.attachments;return e}function Mr(e,t){if(!e)return e;if(e&&e._placeholder===true){const i=typeof e.num==="number"&&e.num>=0&&e.num<t.length;if(i){return t[e.num]}else{throw new Error("illegal attachments")}}else if(Array.isArray(e)){for(let i=0;i<e.length;i++){e[i]=Mr(e[i],t)}}else if(typeof e==="object"){for(const i in e){if(Object.prototype.hasOwnProperty.call(e,i)){e[i]=Mr(e[i],t)}}}return e}const Sr=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];const Yr=5;var Er;(function(e){e[e["CONNECT"]=0]="CONNECT";e[e["DISCONNECT"]=1]="DISCONNECT";e[e["EVENT"]=2]="EVENT";e[e["ACK"]=3]="ACK";e[e["CONNECT_ERROR"]=4]="CONNECT_ERROR";e[e["BINARY_EVENT"]=5]="BINARY_EVENT";e[e["BINARY_ACK"]=6]="BINARY_ACK"})(Er||(Er={}));class Tr{constructor(e){this.replacer=e}encode(e){if(e.type===Er.EVENT||e.type===Er.ACK){if(xr(e)){return this.encodeAsBinary({type:e.type===Er.EVENT?Er.BINARY_EVENT:Er.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}}return[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;if(e.type===Er.BINARY_EVENT||e.type===Er.BINARY_ACK){t+=e.attachments+"-"}if(e.nsp&&"/"!==e.nsp){t+=e.nsp+","}if(null!=e.id){t+=e.id}if(null!=e.data){t+=JSON.stringify(e.data,this.replacer)}return t}encodeAsBinary(e){const t=_r(e);const i=this.encodeAsString(t.packet);const a=t.buffers;a.unshift(i);return a}}function Ir(e){return Object.prototype.toString.call(e)==="[object Object]"}class zr extends Ca{constructor(e){super();this.reviver=e}add(e){let t;if(typeof e==="string"){if(this.reconstructor){throw new Error("got plaintext data when reconstructing a packet")}t=this.decodeString(e);const i=t.type===Er.BINARY_EVENT;if(i||t.type===Er.BINARY_ACK){t.type=i?Er.EVENT:Er.ACK;this.reconstructor=new Or(t);if(t.attachments===0){super.emitReserved("decoded",t)}}else{super.emitReserved("decoded",t)}}else if(kr(e)||e.base64){if(!this.reconstructor){throw new Error("got binary data when not reconstructing a packet")}else{t=this.reconstructor.takeBinaryData(e);if(t){this.reconstructor=null;super.emitReserved("decoded",t)}}}else{throw new Error("Unknown type: "+e)}}decodeString(e){let t=0;const i={type:Number(e.charAt(0))};if(Er[i.type]===undefined){throw new Error("unknown packet type "+i.type)}if(i.type===Er.BINARY_EVENT||i.type===Er.BINARY_ACK){const a=t+1;while(e.charAt(++t)!=="-"&&t!=e.length){}const r=e.substring(a,t);if(r!=Number(r)||e.charAt(t)!=="-"){throw new Error("Illegal attachments")}i.attachments=Number(r)}if("/"===e.charAt(t+1)){const a=t+1;while(++t){const i=e.charAt(t);if(","===i)break;if(t===e.length)break}i.nsp=e.substring(a,t)}else{i.nsp="/"}const a=e.charAt(t+1);if(""!==a&&Number(a)==a){const a=t+1;while(++t){const i=e.charAt(t);if(null==i||Number(i)!=i){--t;break}if(t===e.length)break}i.id=Number(e.substring(a,t+1))}if(e.charAt(++t)){const a=this.tryParse(e.substr(t));if(zr.isPayloadValid(i.type,a)){i.data=a}else{throw new Error("invalid payload")}}return i}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return false}}static isPayloadValid(e,t){switch(e){case Er.CONNECT:return Ir(t);case Er.DISCONNECT:return t===undefined;case Er.CONNECT_ERROR:return typeof t==="string"||Ir(t);case Er.EVENT:case Er.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]==="number"||typeof t[0]==="string"&&Sr.indexOf(t[0])===-1);case Er.ACK:case Er.BINARY_ACK:return Array.isArray(t)}}destroy(){if(this.reconstructor){this.reconstructor.finishedReconstruction();this.reconstructor=null}}}class Or{constructor(e){this.packet=e;this.buffers=[];this.reconPack=e}takeBinaryData(e){this.buffers.push(e);if(this.buffers.length===this.reconPack.attachments){const e=Cr(this.reconPack,this.buffers);this.finishedReconstruction();return e}return null}finishedReconstruction(){this.reconPack=null;this.buffers=[]}}const Ar=Object.freeze({__proto__:null,protocol:Yr,get PacketType(){return Er},Encoder:Tr,Decoder:zr});function Br(e,t,i){e.on(t,i);return function a(){e.off(t,i)}}const Rr=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Pr extends Ca{constructor(e,t,i){super();this.connected=false;this.recovered=false;this.receiveBuffer=[];this.sendBuffer=[];this._queue=[];this._queueSeq=0;this.ids=0;this.acks={};this.flags={};this.io=e;this.nsp=t;if(i&&i.auth){this.auth=i.auth}this._opts=Object.assign({},i);if(this.io._autoConnect)this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Br(e,"open",this.onopen.bind(this)),Br(e,"packet",this.onpacket.bind(this)),Br(e,"error",this.onerror.bind(this)),Br(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){if(this.connected)return this;this.subEvents();if(!this.io["_reconnecting"])this.io.open();if("open"===this.io._readyState)this.onopen();return this}open(){return this.connect()}send(...e){e.unshift("message");this.emit.apply(this,e);return this}emit(e,...t){var i,a,r;if(Rr.hasOwnProperty(e)){throw new Error('"'+e.toString()+'" is a reserved event name')}t.unshift(e);if(this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile){this._addToQueue(t);return this}const o={type:Er.EVENT,data:t};o.options={};o.options.compress=this.flags.compress!==false;if("function"===typeof t[t.length-1]){const e=this.ids++;const i=t.pop();this._registerAckCallback(e,i);o.id=e}const n=(a=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||a===void 0?void 0:a.writable;const s=this.connected&&!((r=this.io.engine)===null||r===void 0?void 0:r._hasPingExpired());const l=this.flags.volatile&&!n;if(l);else if(s){this.notifyOutgoingListeners(o);this.packet(o)}else{this.sendBuffer.push(o)}this.flags={};return this}_registerAckCallback(e,t){var i;const a=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(a===undefined){this.acks[e]=t;return}const r=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++){if(this.sendBuffer[t].id===e){this.sendBuffer.splice(t,1)}}t.call(this,new Error("operation has timed out"))}),a);const o=(...e)=>{this.io.clearTimeoutFn(r);t.apply(this,e)};o.withError=true;this.acks[e]=o}emitWithAck(e,...t){return new Promise(((i,a)=>{const r=(e,t)=>e?a(e):i(t);r.withError=true;t.push(r);this.emit(e,...t)}))}_addToQueue(e){let t;if(typeof e[e.length-1]==="function"){t=e.pop()}const i={id:this._queueSeq++,tryCount:0,pending:false,args:e,flags:Object.assign({fromQueue:true},this.flags)};e.push(((e,...a)=>{if(i!==this._queue[0]){return}const r=e!==null;if(r){if(i.tryCount>this._opts.retries){this._queue.shift();if(t){t(e)}}}else{this._queue.shift();if(t){t(null,...a)}}i.pending=false;return this._drainQueue()}));this._queue.push(i);this._drainQueue()}_drainQueue(e=false){if(!this.connected||this._queue.length===0){return}const t=this._queue[0];if(t.pending&&!e){return}t.pending=true;t.tryCount++;this.flags=t.flags;this.emit.apply(this,t.args)}packet(e){e.nsp=this.nsp;this.io._packet(e)}onopen(){if(typeof this.auth=="function"){this.auth((e=>{this._sendConnectPacket(e)}))}else{this._sendConnectPacket(this.auth)}}_sendConnectPacket(e){this.packet({type:Er.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){if(!this.connected){this.emitReserved("connect_error",e)}}onclose(e,t){this.connected=false;delete this.id;this.emitReserved("disconnect",e,t);this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach((e=>{const t=this.sendBuffer.some((t=>String(t.id)===e));if(!t){const t=this.acks[e];delete this.acks[e];if(t.withError){t.call(this,new Error("socket has been disconnected"))}}}))}onpacket(e){const t=e.nsp===this.nsp;if(!t)return;switch(e.type){case Er.CONNECT:if(e.data&&e.data.sid){this.onconnect(e.data.sid,e.data.pid)}else{this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"))}break;case Er.EVENT:case Er.BINARY_EVENT:this.onevent(e);break;case Er.ACK:case Er.BINARY_ACK:this.onack(e);break;case Er.DISCONNECT:this.ondisconnect();break;case Er.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data;this.emitReserved("connect_error",t);break}}onevent(e){const t=e.data||[];if(null!=e.id){t.push(this.ack(e.id))}if(this.connected){this.emitEvent(t)}else{this.receiveBuffer.push(Object.freeze(t))}}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const i of t){i.apply(this,e)}}super.emit.apply(this,e);if(this._pid&&e.length&&typeof e[e.length-1]==="string"){this._lastOffset=e[e.length-1]}}ack(e){const t=this;let i=false;return function(...a){if(i)return;i=true;t.packet({type:Er.ACK,id:e,data:a})}}onack(e){const t=this.acks[e.id];if(typeof t!=="function"){return}delete this.acks[e.id];if(t.withError){e.data.unshift(null)}t.apply(this,e.data)}onconnect(e,t){this.id=e;this.recovered=t&&this._pid===t;this._pid=t;this.connected=true;this.emitBuffered();this.emitReserved("connect");this._drainQueue(true)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e)));this.receiveBuffer=[];this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e);this.packet(e)}));this.sendBuffer=[]}ondisconnect(){this.destroy();this.onclose("io server disconnect")}destroy(){if(this.subs){this.subs.forEach((e=>e()));this.subs=undefined}this.io["_destroy"](this)}disconnect(){if(this.connected){this.packet({type:Er.DISCONNECT})}this.destroy();if(this.connected){this.onclose("io client disconnect")}return this}close(){return this.disconnect()}compress(e){this.flags.compress=e;return this}get volatile(){this.flags.volatile=true;return this}timeout(e){this.flags.timeout=e;return this}onAny(e){this._anyListeners=this._anyListeners||[];this._anyListeners.push(e);return this}prependAny(e){this._anyListeners=this._anyListeners||[];this._anyListeners.unshift(e);return this}offAny(e){if(!this._anyListeners){return this}if(e){const t=this._anyListeners;for(let i=0;i<t.length;i++){if(e===t[i]){t.splice(i,1);return this}}}else{this._anyListeners=[]}return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){this._anyOutgoingListeners=this._anyOutgoingListeners||[];this._anyOutgoingListeners.push(e);return this}prependAnyOutgoing(e){this._anyOutgoingListeners=this._anyOutgoingListeners||[];this._anyOutgoingListeners.unshift(e);return this}offAnyOutgoing(e){if(!this._anyOutgoingListeners){return this}if(e){const t=this._anyOutgoingListeners;for(let i=0;i<t.length;i++){if(e===t[i]){t.splice(i,1);return this}}}else{this._anyOutgoingListeners=[]}return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const i of t){i.apply(this,e.data)}}}}function Nr(e){e=e||{};this.ms=e.min||100;this.max=e.max||1e4;this.factor=e.factor||2;this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0;this.attempts=0}Nr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random();var i=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-i:e+i}return Math.min(e,this.max)|0};Nr.prototype.reset=function(){this.attempts=0};Nr.prototype.setMin=function(e){this.ms=e};Nr.prototype.setMax=function(e){this.max=e};Nr.prototype.setJitter=function(e){this.jitter=e};class Lr extends Ca{constructor(e,t){var i;super();this.nsps={};this.subs=[];if(e&&"object"===typeof e){t=e;e=undefined}t=t||{};t.path=t.path||"/socket.io";this.opts=t;Aa(this,t);this.reconnection(t.reconnection!==false);this.reconnectionAttempts(t.reconnectionAttempts||Infinity);this.reconnectionDelay(t.reconnectionDelay||1e3);this.reconnectionDelayMax(t.reconnectionDelayMax||5e3);this.randomizationFactor((i=t.randomizationFactor)!==null&&i!==void 0?i:.5);this.backoff=new Nr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==t.timeout?2e4:t.timeout);this._readyState="closed";this.uri=e;const a=t.parser||Ar;this.encoder=new a.Encoder;this.decoder=new a.Decoder;this._autoConnect=t.autoConnect!==false;if(this._autoConnect)this.open()}reconnection(e){if(!arguments.length)return this._reconnection;this._reconnection=!!e;if(!e){this.skipReconnect=true}return this}reconnectionAttempts(e){if(e===undefined)return this._reconnectionAttempts;this._reconnectionAttempts=e;return this}reconnectionDelay(e){var t;if(e===undefined)return this._reconnectionDelay;this._reconnectionDelay=e;(t=this.backoff)===null||t===void 0?void 0:t.setMin(e);return this}randomizationFactor(e){var t;if(e===undefined)return this._randomizationFactor;this._randomizationFactor=e;(t=this.backoff)===null||t===void 0?void 0:t.setJitter(e);return this}reconnectionDelayMax(e){var t;if(e===undefined)return this._reconnectionDelayMax;this._reconnectionDelayMax=e;(t=this.backoff)===null||t===void 0?void 0:t.setMax(e);return this}timeout(e){if(!arguments.length)return this._timeout;this._timeout=e;return this}maybeReconnectOnOpen(){if(!this._reconnecting&&this._reconnection&&this.backoff.attempts===0){this.reconnect()}}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new fr(this.uri,this.opts);const t=this.engine;const i=this;this._readyState="opening";this.skipReconnect=false;const a=Br(t,"open",(function(){i.onopen();e&&e()}));const r=t=>{this.cleanup();this._readyState="closed";this.emitReserved("error",t);if(e){e(t)}else{this.maybeReconnectOnOpen()}};const o=Br(t,"error",r);if(false!==this._timeout){const e=this._timeout;const i=this.setTimeoutFn((()=>{a();r(new Error("timeout"));t.close()}),e);if(this.opts.autoUnref){i.unref()}this.subs.push((()=>{this.clearTimeoutFn(i)}))}this.subs.push(a);this.subs.push(o);return this}connect(e){return this.open(e)}onopen(){this.cleanup();this._readyState="open";this.emitReserved("open");const e=this.engine;this.subs.push(Br(e,"ping",this.onping.bind(this)),Br(e,"data",this.ondata.bind(this)),Br(e,"error",this.onerror.bind(this)),Br(e,"close",this.onclose.bind(this)),Br(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){Sa((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let i=this.nsps[e];if(!i){i=new Pr(this,e,t);this.nsps[e]=i}else if(this._autoConnect&&!i.active){i.connect()}return i}_destroy(e){const t=Object.keys(this.nsps);for(const e of t){const t=this.nsps[e];if(t.active){return}}this._close()}_packet(e){const t=this.encoder.encode(e);for(let i=0;i<t.length;i++){this.engine.write(t[i],e.options)}}cleanup(){this.subs.forEach((e=>e()));this.subs.length=0;this.decoder.destroy()}_close(){this.skipReconnect=true;this._reconnecting=false;this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var i;this.cleanup();(i=this.engine)===null||i===void 0?void 0:i.close();this.backoff.reset();this._readyState="closed";this.emitReserved("close",e,t);if(this._reconnection&&!this.skipReconnect){this.reconnect()}}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts){this.backoff.reset();this.emitReserved("reconnect_failed");this._reconnecting=false}else{const t=this.backoff.duration();this._reconnecting=true;const i=this.setTimeoutFn((()=>{if(e.skipReconnect)return;this.emitReserved("reconnect_attempt",e.backoff.attempts);if(e.skipReconnect)return;e.open((t=>{if(t){e._reconnecting=false;e.reconnect();this.emitReserved("reconnect_error",t)}else{e.onreconnect()}}))}),t);if(this.opts.autoUnref){i.unref()}this.subs.push((()=>{this.clearTimeoutFn(i)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=false;this.backoff.reset();this.emitReserved("reconnect",e)}}const $r={};function Fr(e,t){if(typeof e==="object"){t=e;e=undefined}t=t||{};const i=br(e,t.path||"/socket.io");const a=i.source;const r=i.id;const o=i.path;const n=$r[r]&&o in $r[r]["nsps"];const s=t.forceNew||t["force new connection"]||false===t.multiplex||n;let l;if(s){l=new Lr(a,t)}else{if(!$r[r]){$r[r]=new Lr(a,t)}l=$r[r]}if(i.query&&!t.query){t.query=i.queryKey}return l.socket(i.path,t)}Object.assign(Fr,{Manager:Lr,Socket:Pr,io:Fr,connect:Fr});class Hr{queue=[];isProcessing=false;flushTimer=null;options;processor;constructor(e,t){this.processor=e;this.options={maxQueueSize:1e4,onError:e=>console.error("Queue processing error:",e),onBatchProcessed:()=>{},...t}}offer(e){if(this.queue.length>=this.options.maxQueueSize){return false}const t={data:e,timestamp:Date.now(),id:this.generateId()};this.queue.push(t);this.scheduleFlush();return true}offerAll(e){let t=0;for(const i of e){if(this.offer(i)){t++}else{break}}return t}size(){return this.queue.length}isEmpty(){return this.queue.length===0}async flush(){if(this.flushTimer){clearTimeout(this.flushTimer);this.flushTimer=null}await this.processBatch()}clear(){this.queue=[];if(this.flushTimer){clearTimeout(this.flushTimer);this.flushTimer=null}}async shutdown(){await this.flush()}scheduleFlush(){if(this.queue.length>=this.options.batchSize){this.processBatch();return}if(!this.flushTimer){this.flushTimer=setTimeout((()=>{this.processBatch()}),this.options.flushInterval)}}async processBatch(){if(this.isProcessing||this.queue.length===0){return}this.isProcessing=true;try{const e=Math.min(this.options.batchSize,this.queue.length);const t=this.queue.splice(0,e);const i=t.map((e=>e.data));const a=Date.now();await this.processor(i);const r=Date.now()-a;this.options.onBatchProcessed(e,r);if(this.flushTimer){clearTimeout(this.flushTimer);this.flushTimer=null}if(this.queue.length>0){this.scheduleFlush()}}catch(e){this.options.onError(e)}finally{this.isProcessing=false}}generateId(){return pe()}}const Ur=".sc-igloo-calendar-h{display:block;position:relative;background-color:#ffffff;height:100%;text-align:center}.igl-calendar.sc-igloo-calendar{display:grid;grid-template-columns:1fr;height:100%}.calendarScrollContainer.sc-igloo-calendar{width:100%;height:100%;overflow:auto;position:relative;white-space:nowrap;border-left:2px solid grey}.showToBeAssigned.sc-igloo-calendar,.showLegend.sc-igloo-calendar{grid-template-columns:330px 1fr}#calendarContainer.sc-igloo-calendar{position:absolute}.legendContainer.sc-igloo-calendar,.tobeAssignedContainer.sc-igloo-calendar{display:none;height:100%;overflow-y:auto;padding-left:0.5em !important;padding-right:0.5em !important}.showToBeAssigned.sc-igloo-calendar .tobeAssignedContainer.sc-igloo-calendar{display:block}.showLegend.sc-igloo-calendar .legendContainer.sc-igloo-calendar{display:block}.tobeBooked.sc-igloo-calendar{padding-top:8px;padding-bottom:8px;text-align:left}";const jr=Ur;const Vr=class{constructor(t){e(this,t);this.dragOverHighlightElement=a(this,"dragOverHighlightElement",7);this.moveBookingTo=a(this,"moveBookingTo",7);this.calculateUnassignedDates=a(this,"calculateUnassignedDates",7);this.reduceAvailableUnitEvent=a(this,"reduceAvailableUnitEvent",7);this.revertBooking=a(this,"revertBooking",7);this.openCalendarSidebar=a(this,"openCalendarSidebar",7);this.showRoomNightsDialog=a(this,"showRoomNightsDialog",7)}propertyid;from_date;to_date;language;loadingMessage;currencyName;ticket="";p;baseUrl;get element(){return o(this)}calendarData=new Object;property_id;days=new Array;scrollViewDragging=false;dialogData=null;bookingItem=null;editBookingItem=null;showLegend=false;showPaymentDetails=false;showToBeAssigned=false;unassignedDates={};roomNightsData=null;renderAgain=false;showBookProperty=false;highlightedDate;calDates;isAuthenticated=false;calendarSidebarState;dragOverHighlightElement;moveBookingTo;calculateUnassignedDates;reduceAvailableUnitEvent;revertBooking;openCalendarSidebar;showRoomNightsDialog;bookingService=new l;roomService=new we;eventsService=new dt;toBeAssignedService=new li;housekeepingService=new ve;countries=[];visibleCalendarCells={x:[],y:[]};scrollContainer;today="";reachedEndOfCalendar=false;socket;token=new me;calendarModalEl;salesQueue=new Hr(this.processSalesBatch.bind(this),{batchSize:50,flushInterval:1e3,maxQueueSize:5e3,onError:e=>console.error("Batch Sales Update Error:",e)});availabilityQueue=new Hr(this.processAvailabilityBatch.bind(this),{batchSize:50,flushInterval:1e3,maxQueueSize:5e3,onError:e=>console.error("Batch Availability Update Error:",e)});roomTypeIdsCache=new Map;tasksEndDate;dialogEl;componentWillLoad(){if(this.baseUrl){this.token.setBaseUrl(this.baseUrl)}this.init()}componentDidLoad(){this.scrollToElement(this.today)}async handleDeleteEvent(e){try{e.stopImmediatePropagation();e.preventDefault();await this.eventsService.deleteEvent(e.detail)}catch(e){}}async handleCalendarSidebarEvents(e){console.log("hit ");e.stopImmediatePropagation();e.stopPropagation();this.calendarSidebarState=e.detail}scrollPageToRoom(e){let t=e.detail.refClass;this.scrollContainer=this.scrollContainer||this.element.querySelector(".calendarScrollContainer");const i=this.element.querySelector(".topLeftCell");const a=this.element.querySelector("."+t);if(a){this.scrollContainer.scrollTo({top:0});const e=a.getBoundingClientRect();const t=this.scrollContainer.getBoundingClientRect();const r=i.getBoundingClientRect();this.scrollContainer.scrollTo({top:e.top-t.top-r.height-e.height})}}handleShowDialog(e){e.stopImmediatePropagation();e.stopPropagation();this.dialogData=e.detail;if(this.dialogData.reason!=="reallocate"){this.calendarModalEl?.openModal()}}handleShowRoomNightsDialog(e){this.roomNightsData=e.detail}handleBookingDatasChange(e){e.stopPropagation();e.stopImmediatePropagation();let t=[...this.calendarData.bookingEvents];t=t.filter((e=>e.ID!=="NEW_TEMP_EVENT"));t.push(...e.detail.filter((e=>e.STATUS==="PENDING-CONFIRMATION")));this.updateBookingEventsDateRange(e.detail);this.calendarData={...this.calendarData,bookingEvents:t}}handleUpdateBookingEvent(e){e.stopPropagation();e.stopImmediatePropagation();const t=e.detail;this.calendarData={...this.calendarData,bookingEvents:this.calendarData.bookingEvents.map((e=>{if(t.ID===e.ID){return t}return e}))}}showBookingPopupEventDataHandler(e){e.preventDefault();e.stopImmediatePropagation();this.onOptionSelect(e)}updateEventDataHandler(e){let t=this.calendarData.bookingEvents.find((t=>t.id===e.detail.id));if(t&&e.detail&&e.detail.data){Object.entries(e.detail.data).forEach((([e,i])=>{t[e]=i}))}}dragOverEventDataHandler(e){if(e.detail.id==="CALCULATE_DRAG_OVER_BOUNDS"){let t=document.querySelector("igl-cal-header .topLeftCell");let i=document.querySelectorAll(".headersContainer .headerCell");let a=document.querySelectorAll(".bodyContainer .roomRow .roomTitle");this.visibleCalendarCells={x:[],y:[]};i.forEach((e=>{const i=e;this.visibleCalendarCells.x.push({left:i.offsetLeft+t.offsetWidth,width:i.offsetWidth,id:i.getAttribute("data-day")})}));a.forEach((e=>{const t=e;this.visibleCalendarCells.y.push({top:t.offsetTop,height:t.offsetHeight,id:t.getAttribute("data-room")})}));this.highlightDragOver(true,e.detail.data)}else if(e.detail.id==="DRAG_OVER"){this.highlightDragOver(true,e.detail.data)}else if(e.detail.id==="DRAG_OVER_END"){this.highlightDragOver(false,e.detail.data)}else if(e.detail.id==="STRETCH_OVER_END"){this.highlightDragOver(false,e.detail.data)}}ticketChanged(e,t){if(e===t){return}this.token.setToken(this.ticket);this.initializeApp()}init(){this.calDates={from:this.from_date,to:this.to_date};if(this.ticket!==""){this.token.setToken(this.ticket);this.initializeApp()}this.calDates={from:this.from_date,to:this.to_date};hi("unassigned_dates",(e=>{if(Object.keys(e).length===0&&this.highlightedDate!==""){this.highlightedDate=""}}))}renderModalBody(){switch(this.dialogData?.reason){case"checkin":{return`Are you sure you want to Check In this unit?`}case"checkout":{return"Are you sure you want to Check Out this unit?"}case"reallocate":return this.dialogData?.description||"";case"stretch":return"Warning ";default:return"Unknown modal content"}}setUpCalendarData(e,t){this.calendarData.currency=e["My_Result"].currency;this.calendarData.allowedBookingSources=e["My_Result"].allowed_booking_sources;this.calendarData.adultChildConstraints=e["My_Result"].adult_child_constraints;this.calendarData.legendData=this.getLegendData(e);this.calendarData.is_vacation_rental=e["My_Result"].is_vacation_rental;this.calendarData.from_date=t.My_Params_Get_Rooming_Data.FROM;this.calendarData.to_date=t.My_Params_Get_Rooming_Data.TO;this.calendarData.startingDate=new Date(t.My_Params_Get_Rooming_Data.FROM).getTime();this.calendarData.endingDate=new Date(t.My_Params_Get_Rooming_Data.TO).getTime();this.calendarData.formattedLegendData=U(this.calendarData.legendData);let i=t.myBookings||[];i=i.filter((e=>{const t=fe(e.TO_DATE,"YYYY-MM-DD");const i=fe(e.FROM_DATE,"YYYY-MM-DD");return!t.isSame(i)}));this.calendarData.bookingEvents=i;this.calendarData.toBeAssignedEvents=[]}async initializeApp(){try{let e=this.propertyid;if(!this.propertyid&&!this.p){throw new Error("Property ID or username is required")}let t=null;if(!e){console.log(e);const i=await this.roomService.getExposedProperty({id:0,aname:this.p,language:this.language,is_backend:true,include_units_hk_status:true,include_sales_rate_plans:true});t=i;e=i.My_Result.id}this.property_id=e;const i=[this.bookingService.getCalendarData(e,this.from_date,this.to_date),this.bookingService.getCountries(this.language),this.roomService.fetchLanguage(this.language),this.housekeepingService.getExposedHKSetup(this.property_id)];if(this.propertyid){i.push(this.roomService.getExposedProperty({id:this.propertyid,language:this.language,is_backend:true,include_units_hk_status:true,include_sales_rate_plans:true}))}const a=await Promise.all(i);this.tasksEndDate=fe().add(30,"days").format("YYYY-MM-DD");this.getHousekeepingTasks({from_date:fe().format("YYYY-MM-DD"),to_date:this.tasksEndDate});if(!t){t=a[a.length-1]}const[r,o]=a;M.days=r.days;M.months=r.months;this.setRoomsData(t);this.countries=o;this.setUpCalendarData(t,r);let n=t["My_Result"]["allowed_payment_methods"];this.showPaymentDetails=n.some((e=>e.code==="001"||e.code==="004"));this.updateBookingEventsDateRange(this.calendarData.bookingEvents);this.updateBookingEventsDateRange(this.calendarData.toBeAssignedEvents);this.today=this.transformDateForScroll(new Date);let s=new Date(this.calendarData.startingDate);s.setHours(0,0,0,0);this.days=r.days;this.calendarData.days=this.days;this.calendarData.monthsInfo=r.months;M.fromDate=this.calendarData.from_date;M.toDate=this.calendarData.to_date;setTimeout((()=>{this.scrollToElement(this.today)}),200);if(!this.calendarData.is_vacation_rental){const e=await this.toBeAssignedService.getUnassignedDates(this.property_id,this.from_date,this.to_date);this.unassignedDates={fromDate:this.from_date,toDate:this.to_date,data:{...this.unassignedDates,...e}};this.calendarData={...this.calendarData,unassignedDates:e};ui(e)}this.socket=Fr("https://realtime.igloorooms.com/");this.socket.on("MSG",(async e=>{await this.handleSocketMessage(e)}))}catch(e){console.error("Initializing Calendar Error",e)}}async getHousekeepingTasks({from_date:e,to_date:t}){const{tasks:i}=await this.housekeepingService.getHkTasks({property_id:this.property_id,from_date:e,to_date:t,housekeepers:[],cleaning_frequency:(y.cleaning_frequency??ke?.hk_criteria?.cleaning_frequencies[0])?.code,dusty_window:ke?.hk_criteria?.dusty_periods[0]?.code,highlight_window:ke?.hk_criteria?.highlight_checkin_options[0]?.code});j(i)}async handleSocketMessage(e){const t=JSON.parse(e);if(!t){return}const{REASON:i,KEY:a,PAYLOAD:r}=t;if(a.toString()!==this.property_id.toString()){return}let o;if(["DELETE_CALENDAR_POOL","GET_UNASSIGNED_DATES"].includes(i)){o=r}else{o=JSON.parse(r)}console.log({[i]:o});const n={DORESERVATION:this.handleDoReservation,BLOCK_EXPOSED_UNIT:this.handleBlockExposedUnit,ASSIGN_EXPOSED_ROOM:this.handleAssignExposedRoom,REALLOCATE_EXPOSED_ROOM_BLOCK:this.handleReallocateExposedRoomBlock,DELETE_CALENDAR_POOL:this.handleDeleteCalendarPool,GET_UNASSIGNED_DATES:this.handleGetUnassignedDates,UPDATE_CALENDAR_AVAILABILITY:e=>this.availabilityQueue.offer(e),CHANGE_IN_DUE_AMOUNT:this.handleChangeInDueAmount,CHANGE_IN_BOOK_STATUS:this.handleChangeInBookStatus,NON_TECHNICAL_CHANGE_IN_BOOKING:this.handleNonTechnicalChangeInBooking,ROOM_STATUS_CHANGED:this.handleRoomStatusChanged,UNIT_HK_STATUS_CHANGED:this.handleUnitHKStatusChanged,SHARING_PERSONS_UPDATED:this.handleSharingPersonsUpdated,ROOM_TYPE_CLOSE:e=>this.salesQueue.offer({...e,is_available_to_book:false}),ROOM_TYPE_OPEN:e=>this.salesQueue.offer({...e,is_available_to_book:true}),HK_SKIP:this.handleHkSkip,SET_ROOM_CALENDAR_EXTRA:this.handleRoomCalendarExtra};const s=n[i];if(s){await s.call(this,o)}else{console.warn(`Unhandled REASON: ${i}`)}}handleRoomCalendarExtra(e){this.calendarData={...this.calendarData,bookingEvents:[...this.calendarData.bookingEvents.map((t=>{if(t.IDENTIFIER===e.room_identifier){const i=e.value?JSON.parse(e.value):null;const a=i?t.ROOM_INFO.calendar?{...t.ROOM_INFO.calendar,...i}:i:null;return{...t,ROOM_INFO:{...t.ROOM_INFO,calendar_extra:a}}}return t}))]}}handleSharingPersonsUpdated(e){console.log("sharing persons updated",e);this.calendarData={...this.calendarData,bookingEvents:[...this.calendarData.bookingEvents.map((t=>{if(t.IDENTIFIER===e.identifier){const i=e.guests?.find((e=>e.is_main));return{...t,NAME:V(i.first_name,i.last_name),ROOM_INFO:{...t.ROOM_INFO,sharing_persons:e.guests}}}return t}))]}}handleRoomStatusChanged(e){this.calendarData={...this.calendarData,bookingEvents:[...this.calendarData.bookingEvents.map((t=>{if(t.IDENTIFIER===e.room_identifier){const i=G({from_date:t.FROM_DATE,to_date:t.TO_DATE,in_out:{...t.ROOM_INFO.in_out,code:e.status},status_code:t.BASE_STATUS_CODE});return{...t,CHECKIN:e.status==="001",CHECKOUT:e.status==="002",STATUS:i}}return t}))]}}handleHkSkip(e){q({date:e.DATE,unitId:e.PR_ID})}handleUnitHKStatusChanged(e){console.log("hk unit change",e);const t=[...this.calendarData.roomsInfo];const i=t.findIndex((t=>t.id===e.ROOM_CATEGORY_ID));if(i!==-1){const a={...t[i]};const r=a.physicalrooms.findIndex((t=>t.id===e.PR_ID));if(r!==-1){const o=[...a.physicalrooms];const n={...o[r]};n.hk_status=e.HKS_CODE;o[r]=n;a.physicalrooms=o;t[i]=a;this.calendarData={...this.calendarData,roomsInfo:t}}}const a={date:fe().format("YYYY-MM-DD"),unitId:e.PR_ID};if(e.HKS_CODE==="002"){K(a)}else{q(a)}}async handleDoReservation(e){const t=Y(e);this.AddOrUpdateRoomBookings(t)}async handleBlockExposedUnit(e){const t=[await W(e)];this.AddOrUpdateRoomBookings(t)}async handleAssignExposedRoom(e){console.log(e);const t=Y(e);this.AddOrUpdateRoomBookings(t)}async handleReallocateExposedRoomBlock(e){await this.handleBlockExposedUnit(e)}async handleDeleteCalendarPool(e){console.log("delete calendar pool");this.calendarData={...this.calendarData,bookingEvents:this.calendarData.bookingEvents.filter((t=>t.POOL!==e))}}async handleGetUnassignedDates(e){const t=this.parseDateRange(e);if(!this.calendarData.is_vacation_rental&&new Date(t.FROM_DATE).getTime()>=this.calendarData.startingDate&&new Date(t.TO_DATE).getTime()<=this.calendarData.endingDate){const e=await this.toBeAssignedService.getUnassignedDates(this.property_id,D(new Date(t.FROM_DATE)),D(new Date(t.TO_DATE)));ui(e);this.unassignedDates={fromDate:D(new Date(t.FROM_DATE)),toDate:D(new Date(t.TO_DATE)),data:e};if(Object.keys(e).length===0){fi(D(new Date(t.FROM_DATE)),D(new Date(t.TO_DATE)));this.reduceAvailableUnitEvent.emit({fromDate:D(new Date(t.FROM_DATE)),toDate:D(new Date(t.TO_DATE))})}}}parseDateRange(e){const t={};const i=e.split("|");i.forEach((e=>{const i=e.split(":");t[i[0]]=i[1]}));return t}handleChangeInDueAmount(e){this.calendarData={...this.calendarData,bookingEvents:this.calendarData.bookingEvents.map((t=>{if(e.pools.includes(t.ID)){return{...t,BALANCE:e.due_amount}}return t}))}}handleChangeInBookStatus(e){this.calendarData={...this.calendarData,bookingEvents:this.calendarData.bookingEvents.map((t=>{if(e.pools.includes(t.ID)){return{...t,STATUS:t.STATUS!=="IN-HOUSE"?X[e.status_code]:e.status_code==="001"?X[e.status_code]:"IN-HOUSE"}}return t}))}}handleNonTechnicalChangeInBooking(e){this.calendarData={...this.calendarData,bookingEvents:this.calendarData.bookingEvents.map((t=>{if(t.BOOKING_NUMBER===e.booking_nbr){return{...t,PRIVATE_NOTE:J(e.extras)}}return t}))}}checkBookingAvailability(e){return this.calendarData.bookingEvents.some((t=>t.ID===e.ID||t.FROM_DATE===e.FROM_DATE&&t.TO_DATE===e.TO_DATE&&t.PR_ID===e.PR_ID))}updateBookingEventsDateRange(e){e.forEach((e=>{e.legendData=this.calendarData.formattedLegendData;e.defaultDateRange={};e.defaultDateRange.fromDate=new Date(e.FROM_DATE+"T00:00:00");e.defaultDateRange.fromDateStr=this.getDateStr(e.defaultDateRange.fromDate);e.defaultDateRange.fromDateTimeStamp=e.defaultDateRange.fromDate.getTime();e.defaultDateRange.toDate=new Date(e.TO_DATE+"T00:00:00");e.defaultDateRange.toDateStr=this.getDateStr(e.defaultDateRange.toDate);e.defaultDateRange.toDateTimeStamp=e.defaultDateRange.toDate.getTime();e.defaultDateRange.dateDifference=e.NO_OF_DAYS;e.roomsInfo=[...this.calendarData.roomsInfo];if(!C(e.STATUS_CODE)){e.STATUS=G({in_out:e.ROOM_INFO?.in_out,from_date:e.FROM_DATE,to_date:e.TO_DATE,status_code:e.BASE_STATUS_CODE})}}))}processSalesBatch(e){const t=[...M.days];const i=new Map(M.disabled_cells);for(const a of e){const e=t.findIndex((e=>e.value===a.night));if(e===-1){console.warn(`Couldn't find day ${a.night}`);continue}let r=this.roomTypeIdsCache.get(a.rate_plan_id);if(r==="skip"){continue}if(!r){const i=t[e].rate.findIndex((e=>e.rateplans.some((e=>e.id===a.rate_plan_id))));if(i===-1){this.roomTypeIdsCache.set(a.rate_plan_id,"skip");console.warn(`Couldn't find room type for rate plan ${a.rate_plan_id}`);continue}const o=t[e].rate[i];const n=o.rateplans.findIndex((e=>e.id===a.rate_plan_id));r={id:i,index:n};this.roomTypeIdsCache.set(a.rate_plan_id,r)}const{id:o,index:n}=r;const s=t[e].rate[o];const l=s.rateplans.map(((e,t)=>t===n?{...e,is_available_to_book:a.is_available_to_book}:e));const c=l.some((e=>e.is_available_to_book));t[e].rate[o]={...s,rateplans:l,is_available_to_book:c};for(const a of s.physicalrooms){const r=`${a.id}_${t[e].value}`;i.set(r,{disabled:!c,reason:"stop_sale"})}}M["disabled_cells"]=new Map(i);M.days=t}processAvailabilityBatch(e){let t=[...M.days];const i=new Map(M.disabled_cells);for(const a of e){const e=t.findIndex((e=>e.value===a.date));if(e===-1){console.warn(`Couldn't find day ${a.date}`);return}const r=t[e].rate.findIndex((e=>e.id===a.room_type_id));if(r===-1){console.warn(`Couldn't find room type ${a.room_type_id}`);return}const o=t[e].rate[r];o.exposed_inventory.rts=a.availability;const n=o.rateplans.every((e=>!e.is_available_to_book));for(const e of o.physicalrooms){const t=`${e.id}_${a.date}`;i.set(t,{disabled:a.availability===0,reason:n?"stop_sale":"inventory"})}}M["disabled_cells"]=new Map(i);M.days=[...t]}setRoomsData(e){let t=new Array;if(e.My_Result?.roomtypes?.length){t=e.My_Result.roomtypes;e.My_Result.roomtypes.forEach((e=>{e.expanded=true}))}y.roomsInfo=t;this.calendarData.roomsInfo=t}getLegendData(e){return e["My_Result"].calendar_legends}getDateStr(e,t="default"){return e.getDate()+" "+e.toLocaleString(t,{month:"short"})+" "+e.getFullYear()}scrollToElement(e){this.scrollContainer=this.scrollContainer||this.element.querySelector(".calendarScrollContainer");const t=this.element.querySelector(".topLeftCell");const i=this.element.querySelector(".day-"+e);if(i){this.scrollContainer.scrollTo({left:0});const e=i.getBoundingClientRect();const a=this.scrollContainer.getBoundingClientRect();const r=t.getBoundingClientRect();this.scrollContainer.scrollTo({left:e.left-a.left-r.width-e.width})}}AddOrUpdateRoomBookings(e,t=undefined){let i=[...this.calendarData.bookingEvents];e.forEach((e=>{if(!this.checkBookingAvailability(e)){i=i.filter((t=>t.ID!==e.ID))}}));this.updateBookingEventsDateRange(e);if(t){i=i.filter((e=>e.POOL===t))}e.forEach((e=>{if(!i.some((t=>t.ID===e.ID))){i.push(e)}}));this.calendarData={...this.calendarData,bookingEvents:i};const a=e=>{const t=fe(this.tasksEndDate,"YYYY-MM-DD");return fe(e.FROM_DATE,"YYYY-MM-DD").isSameOrBefore(t,"date")||fe(e.TO_DATE,"YYYY-MM-DD").isSameOrBefore(t,"date")};if(e.some(a)){this.getHousekeepingTasks({from_date:fe().format("YYYY-MM-DD"),to_date:this.tasksEndDate})}}transformDateForScroll(e){return fe(e).format("D_M_YYYY")}shouldRenderCalendarView(){return this.calendarData&&this.calendarData.days&&this.calendarData.days.length}onOptionSelect(e){const t=e.detail;const i=this.element.querySelector("#iglooCalendar");switch(t.key){case"showAssigned":i.classList.remove("showLegend");i.classList.remove("showToBeAssigned");i.classList.toggle("showToBeAssigned");this.showLegend=false;this.showToBeAssigned=true;break;case"showLegend":i.classList.remove("showToBeAssigned");i.classList.remove("showLegend");i.classList.toggle("showLegend");this.showLegend=!this.showLegend;this.showToBeAssigned=false;break;case"calendar":let e=new Date;if(t.data.start!==undefined&&t.data.end!==undefined){e=t.data.start.toDate();this.handleDateSearch(t.data)}else{e=new Date(t.data);e.setDate(e.getDate()+1);if(!t?.noScroll){this.scrollToElement(e.getDate()+"_"+(e.getMonth()+1)+"_"+e.getFullYear())}}this.highlightedDate=this.transformDateForScroll(e);break;case"search":break;case"bulk":this.calendarSidebarState={type:"bulk-blocks",payload:null};break;case"add":if(t.data.event_type!=="EDIT_BOOKING"){this.bookingItem=t.data}else{this.editBookingItem=t.data}break;case"gotoToday":this.scrollToElement(this.today);break;case"closeSideMenu":this.closeSideMenu();this.highlightedDate="";this.showBookProperty=false;break}}async addDatesToCalendar(e,t){const[i]=await Promise.all([this.bookingService.getCalendarData(this.property_id,e,t)]);const a=i.myBookings||[];this.updateBookingEventsDateRange(a);if(new Date(e).getTime()<new Date(this.calendarData.startingDate).getTime()){this.calendarData.startingDate=new Date(e).getTime();this.calendarData.from_date=e;M.fromDate=this.calendarData.from_date;this.days=[...i.days,...this.days];let r=[...i.months];if(this.calendarData.monthsInfo[0].monthName===i.months[i.months.length-1].monthName){this.calendarData.monthsInfo[0].daysCount=this.calendarData.monthsInfo[0].daysCount+i.months[i.months.length-1].daysCount;r.pop()}let o=JSON.parse(JSON.stringify(a));o=o.filter((e=>{const t=this.calendarData.bookingEvents.findIndex((t=>t.ID===e.ID));if(t!==-1){this.calendarData.bookingEvents[t].FROM_DATE=e.FROM_DATE;this.calendarData.bookingEvents[t].NO_OF_DAYS=S(e.FROM_DATE,this.calendarData.bookingEvents[t].TO_DATE);return false}return true}));M.days=this.days;this.calendarData={...this.calendarData,days:this.days,monthsInfo:[...r,...this.calendarData.monthsInfo],bookingEvents:[...this.calendarData.bookingEvents,...o]};if(Math.abs(fe().diff(fe(e,"YYYY-MM-DD"),"days"))<=10){const i=await this.toBeAssignedService.getUnassignedDates(this.property_id,e,t);this.calendarData.unassignedDates={...this.calendarData.unassignedDates,...i};this.unassignedDates={fromDate:e,toDate:t,data:i};ui(i)}}else{this.calendarData.endingDate=new Date(t).getTime();this.calendarData.to_date=t;M.toDate=this.calendarData.to_date;let r=[...i.months];this.days=[...this.days,...i.days];if(this.calendarData.monthsInfo[this.calendarData.monthsInfo.length-1].monthName===i.months[0].monthName){this.calendarData.monthsInfo[this.calendarData.monthsInfo.length-1].daysCount=this.calendarData.monthsInfo[this.calendarData.monthsInfo.length-1].daysCount+i.months[0].daysCount;r.shift()}let o=JSON.parse(JSON.stringify(a));o=o.filter((e=>{const t=this.calendarData.bookingEvents.findIndex((t=>t.ID===e.ID));if(t!==-1){this.calendarData.bookingEvents[t].TO_DATE=e.TO_DATE;this.calendarData.bookingEvents[t].NO_OF_DAYS=S(this.calendarData.bookingEvents[t].FROM_DATE,e.TO_DATE);return false}return true}));M.days=this.days;this.calendarData={...this.calendarData,days:this.days,monthsInfo:[...this.calendarData.monthsInfo,...r],bookingEvents:[...this.calendarData.bookingEvents,...o]};const n=await this.toBeAssignedService.getUnassignedDates(this.property_id,e,t);this.calendarData.unassignedDates={...this.calendarData.unassignedDates,...n};this.unassignedDates={fromDate:e,toDate:t,data:n};ui(n)}}async handleDateSearch(e){const t=fe(e.start).toDate();const i=fe(this.calDates.from).toDate();const a=e.end.toDate();const r=this.calendarData.endingDate;if(t.getTime()<new Date(this.calDates.from).getTime()){await this.addDatesToCalendar(fe(t).add(-1,"days").format("YYYY-MM-DD"),fe(i).add(-1,"days").format("YYYY-MM-DD"));this.calDates={...this.calDates,from:e.start.add(-1,"days").format("YYYY-MM-DD")};this.scrollToElement(this.transformDateForScroll(t))}else if(t.getTime()>i.getTime()&&t.getTime()<r&&a.getTime()<r){this.scrollToElement(this.transformDateForScroll(t))}else if(t.getTime()>r){const e=Q(new Date(this.calendarData.endingDate));await this.addDatesToCalendar(e,fe(a).add(2,"months").format("YYYY-MM-DD"));this.scrollToElement(this.transformDateForScroll(t))}}closeSideMenu(){this.showLegend=false;this.showToBeAssigned=false}scrollViewDragPos={top:0,left:0,x:0,y:0};dragScrollContent(e){this.scrollViewDragging=false;let t=e&&e.target?this.hasAncestorWithClass(e.target,"preventPageScroll"):false;if(!t&&e.buttons===1){this.scrollViewDragPos={left:this.scrollContainer.scrollLeft,top:this.scrollContainer.scrollTop,x:e.clientX,y:e.clientY};document.addEventListener("mousemove",this.onScrollContentMoveHandler);document.addEventListener("mouseup",this.onScrollContentMoveEndHandler)}}onScrollContentMoveHandler=e=>{if(e.buttons!==1){return}const t=e.clientX-this.scrollViewDragPos.x;const i=e.clientY-this.scrollViewDragPos.y;this.scrollContainer.scrollTop=this.scrollViewDragPos.top-i;this.scrollContainer.scrollLeft=this.scrollViewDragPos.left-t;if(Math.abs(t)>5||Math.abs(i)>5){this.scrollViewDragging=true}};onScrollContentMoveEndHandler=()=>{document.removeEventListener("mousemove",this.onScrollContentMoveHandler);document.removeEventListener("mouseup",this.onScrollContentMoveEndHandler)};calendarScrolling(){if(this.scrollContainer){if(this.highlightedDate){const e=document.querySelector(`.day-${this.highlightedDate}`);if(e){const{left:t,right:i}=e.getBoundingClientRect();const a=t>=0&&i<=window.innerWidth;if(!a){this.highlightedDate=""}}}const e=this.scrollContainer.getBoundingClientRect();let t=170;let i=e.width-t;let a=e.x+t;let r=e.x+e.width;let o=Array.from(this.element.querySelectorAll(".monthCell"));if(o.length){o.map((async e=>{let t=e.getBoundingClientRect();if(o.indexOf(e)===o.length-1){if(t.x+t.width<=r&&!this.reachedEndOfCalendar){this.reachedEndOfCalendar=true;const e=Z(new Date(this.calendarData.endingDate));const t=Q(new Date(this.calendarData.endingDate));await this.addDatesToCalendar(t,e);this.reachedEndOfCalendar=false}}if(t.x+t.width<a);else if(t.x>r);else{let o=e.querySelector(".monthTitle");let n=0;let s=t.width;if(t.x<a){n=Math.abs(t.x)-a;n=t.x<0?Math.abs(t.x)+a:Math.abs(n);s=t.x+t.width>r?i:t.x+t.width-a}else{s=i-s>s?s:i-t.x+a}o.style.marginLeft=n+"px";o.style.width=s+"px"}}))}}}hasAncestorWithClass(e,t){let i=e;while(i!==null){if(i.matches(`.${t}`)){return true}i=i.parentElement}return false}async highlightDragOver(e,t){let i,a;if(t){i=this.visibleCalendarCells.x.find((e=>e.left<t.x&&t.x<=e.left+e.width));a=this.visibleCalendarCells.y.find((e=>e.top<t.y&&t.y<=e.top+e.height))}if(e&&i&&a){this.dragOverHighlightElement.emit({dragOverElement:a.id+"_"+i.id})}else{this.dragOverHighlightElement.emit({dragOverElement:""})}if(!e){this.moveBookingTo.emit({bookingId:t.id,fromRoomId:t.fromRoomId,toRoomId:a&&a.id||"revert",moveToDay:i&&i.id||"revert",pool:t.pool,from_date:ee(i&&i.id),to_date:te(i&&i.id,t.nbOfDays)})}}handleModalConfirm(){const e=()=>{this.dialogData=null};try{switch(this.dialogData?.reason){case"checkin":case"checkout":{const{bookingNumber:t,roomIdentifier:i}=this.dialogData;const a=this.dialogData.reason==="checkin"?"001":"002";this.bookingService.handleExposedRoomInOut({booking_nbr:t,room_identifier:i,status:a}).finally(e);if(this.dialogData.reason==="checkin"){this.openCalendarSidebar.emit({type:"room-guests",payload:this.dialogData.sidebarPayload})}break}case"stretch":const{reason:t,...i}=this.dialogData;this.showRoomNightsDialog.emit(i);break;case"reallocate":{if(!this.dialogData){console.warn("No dialog data available for reallocation.");return}const{pool:t,toRoomId:i,from_date:a,to_date:r}=this.dialogData;this.eventsService.reallocateEvent(t,i,a,r).then(e).catch((()=>{console.error("Reallocation failed. Reverting booking.");this.revertBooking.emit(t)})).finally(e);break}default:e();break}}catch(t){console.error("Error handling modal confirm:",t);e()}}handleModalCancel(){if(this.dialogData?.reason==="reallocate"||this.dialogData?.reason==="stretch"){this.revertBooking.emit(this.dialogData.pool)}this.dialogData=null}handleRoomNightsDialogClose(e){if(e.detail.type==="cancel"){this.revertBooking.emit(this.roomNightsData.pool)}this.roomNightsData=null}handleSideBarToggle(e){if(e.detail){this.calendarSidebarState=null;if(this.editBookingItem){this.editBookingItem=null}if(this.roomNightsData){this.revertBooking.emit(this.roomNightsData.pool);this.roomNightsData=null}if(this.dialogData?.reason==="reallocate"){this.revertBooking.emit(this.dialogData.pool);this.dialogData=null}}}handleCloseBookingWindow(){this.bookingItem=null}get isSidebarOpen(){if(this.editBookingItem&&this.editBookingItem.event_type==="EDIT_BOOKING"){return true}if(this.roomNightsData){return true}if(this.calendarSidebarState){const e=this.calendarSidebarState.type;return e==="split"||e==="bulk-blocks"}return false}render(){return t(i,{key:"eeacca9bceed71d1ade7ddc4e280a88a33ff4dfa"},t("ir-toast",{key:"c3b34a4525c673fb2757067c45386bf06d5dac10"}),t("ir-interceptor",{key:"6d86e886d7009d91393f5eb0b458b20c0a0812e4"}),t("div",{key:"c6a2f775659ff23cef4559d25b38ee66bcdbf3b9",id:"iglooCalendar",class:{"igl-calendar":true,showToBeAssigned:this.showToBeAssigned,showLegend:this.showLegend}},this.shouldRenderCalendarView()?t(r,{"data-testid":"ir-calendar"},this.showToBeAssigned&&t("igl-to-be-assigned",{unassignedDatesProp:this.unassignedDates,to_date:this.to_date,from_date:this.from_date,propertyid:this.property_id,class:"tobeAssignedContainer",calendarData:this.calendarData,onOptionEvent:e=>this.onOptionSelect(e)}),this.showLegend&&t("igl-legends",{class:"legendContainer",legendData:this.calendarData.legendData,onOptionEvent:e=>this.onOptionSelect(e)}),t("div",{class:"calendarScrollContainer",onMouseDown:e=>this.dragScrollContent(e),onScroll:()=>this.calendarScrolling()},t("div",{id:"calendarContainer"},t("igl-cal-header",{unassignedDates:this.unassignedDates,to_date:this.to_date,propertyid:this.property_id,today:this.today,calendarData:this.calendarData,highlightedDate:this.highlightedDate,onOptionEvent:e=>this.onOptionSelect(e)}),t("igl-cal-body",{propertyId:this.property_id,language:this.language,countries:this.countries,currency:this.calendarData.currency,today:this.today,highlightedDate:this.highlightedDate,isScrollViewDragging:this.scrollViewDragging,calendarData:this.calendarData}),t("igl-cal-footer",{isLegendOpen:this.showLegend,highlightedDate:this.highlightedDate,today:this.today,calendarData:this.calendarData,onOptionEvent:e=>this.onOptionSelect(e)})))):t("ir-loading-screen",{message:"Preparing Calendar Data"})),this.bookingItem&&t("igl-book-property",{key:"17af79ed38df0d64f9064f80bce587c73c242dd5",allowedBookingSources:this.calendarData.allowedBookingSources,adultChildConstraints:this.calendarData.adultChildConstraints,showPaymentDetails:this.showPaymentDetails,countries:this.countries,currency:this.calendarData.currency,language:this.language,propertyid:this.property_id,bookingData:this.bookingItem,onCloseBookingWindow:()=>this.handleCloseBookingWindow()}),t("ir-sidebar",{key:"0dc41d8a3bdf0332d9a041cf215f5bd35a2de4a4",onIrSidebarToggle:this.handleSideBarToggle.bind(this),open:this.isSidebarOpen,showCloseButton:false,sidebarStyles:{width:this.calendarSidebarState?.type==="room-guests"?"60rem":this.editBookingItem?"80rem":"var(--sidebar-width,40rem)",background:this.editBookingItem?"#F2F3F8":"white"}},this.roomNightsData&&t("ir-room-nights",{key:"e4feef25890dc62fbf6c67be37129710edb83da2",slot:"sidebar-body",pool:this.roomNightsData.pool,onCloseRoomNightsDialog:this.handleRoomNightsDialogClose.bind(this),language:this.language,bookingNumber:this.roomNightsData.bookingNumber,identifier:this.roomNightsData.identifier,toDate:this.roomNightsData.to_date,fromDate:this.roomNightsData.from_date,defaultDates:this.roomNightsData.defaultDates,ticket:this.ticket,propertyId:this.property_id}),this.calendarSidebarState?.type==="split"&&t("igl-split-booking",{key:"54aede22c4ab512029275e83995187dfe06e6a41",slot:"sidebar-body",booking:this.calendarSidebarState?.payload?.booking,identifier:this.calendarSidebarState?.payload?.identifier,onCloseModal:()=>this.calendarSidebarState=null}),this.editBookingItem&&this.editBookingItem.event_type==="EDIT_BOOKING"&&t("ir-booking-details",{key:"03a4bfe0aa516040da98fe92dbc0b988979d5c33",slot:"sidebar-body",hasPrint:true,hasReceipt:true,hasCloseButton:true,onCloseSidebar:()=>this.editBookingItem=null,is_from_front_desk:true,propertyid:this.property_id,hasRoomEdit:true,hasRoomDelete:true,bookingNumber:this.editBookingItem.BOOKING_NUMBER,ticket:this.ticket,language:this.language,hasRoomAdd:true}),this.calendarSidebarState?.type==="bulk-blocks"&&t("igl-bulk-operations",{key:"c099a504e75145f83d47156c8be7dc5c95c0d2a7",slot:"sidebar-body",property_id:this.property_id,onCloseModal:()=>this.calendarSidebarState=null})),t("ir-room-guests",{key:"bcb7521dc9b6e8be8b2f2ba8a0a779ea8d5f3c7d",open:this.calendarSidebarState?.type==="room-guests",countries:this.countries,language:this.language,identifier:this.calendarSidebarState?.payload?.identifier,bookingNumber:this.calendarSidebarState?.payload?.bookingNumber,roomName:this.calendarSidebarState?.payload?.roomName,totalGuests:this.calendarSidebarState?.payload?.totalGuests,sharedPersons:this.calendarSidebarState?.payload?.sharing_persons,checkIn:this.calendarSidebarState?.payload?.checkin,onCloseModal:()=>this.calendarSidebarState=null}),t("igl-reallocation-dialog",{key:"55ba2fad584203dcaa84c9b55c7178835e7a05ee",onResetModalState:()=>this.dialogData=null,onDialogClose:()=>this.handleModalCancel(),data:this.dialogData?.reason==="reallocate"?this.dialogData:undefined}),t("ir-modal",{key:"4503c7d483f2690e2e2284364d3ebf9056f1eee9",ref:e=>this.calendarModalEl=e,modalTitle:"",rightBtnActive:this.dialogData?.reason==="reallocate"?!this.dialogData.hideConfirmButton:true,leftBtnText:g?.entries?.Lcz_Cancel,rightBtnText:g?.entries?.Lcz_Confirm,modalBody:this.renderModalBody(),onConfirmModal:this.handleModalConfirm.bind(this),onCancelModal:this.handleModalCancel.bind(this)}))}static get watchers(){return{ticket:["ticketChanged"]}}};Vr.style=jr;const Gr=":host{--ir-acc-duration:220ms;--ir-acc-ease:cubic-bezier(0.2, 0.8, 0.2, 1);--ir-acc-border:#e5e7eb;--ir-acc-radius:6px;--ir-acc-bg:#fff;--ir-acc-focus:#3b82f6;--ir-acc-space-2:0.5rem;--ir-acc-space-3:0.75rem;--ir-acc-space-4:1rem;display:block}.ir-accordion{border:1px solid var(--ir-acc-border);border-radius:var(--ir-acc-radius);background:var(--ir-acc-bg);overflow:hidden}.ir-accordion__trigger{display:flex;align-items:center;justify-content:flex-start;gap:var(--ir-acc-space-2);width:100%;padding:var(--ir-acc-space-4);background:transparent;border:none;cursor:pointer;text-align:left;font:inherit;color:inherit;transition:background-color 0.15s ease}.ir-accordion__trigger:hover:not(:disabled){background:rgba(0, 0, 0, 0.02)}.ir-accordion__trigger:disabled{opacity:0.6;cursor:not-allowed}.ir-accordion__trigger:focus,.ir-accordion__trigger:focus-visible{outline:2px solid var(--ir-acc-focus);outline-offset:-2px}.ir-accordion__trigger:focus:not(:focus-visible){outline:none}.ir-accordion__caret{flex-shrink:0;transition:transform var(--ir-acc-duration) var(--ir-acc-ease);transform:rotate(-90deg)}.ir-accordion[data-open='true'] .ir-accordion__caret,.ir-accordion__caret.is-open{transform:rotate(0deg)}.ir-accordion__trigger-content{flex:1;min-width:0;}.ir-accordion__content{transition:height var(--ir-acc-duration) var(--ir-acc-ease);will-change:height}.ir-accordion__content:not([data-expanded='true']){height:0 !important;overflow:hidden !important;visibility:hidden}.ir-accordion__content[data-expanded='true']{visibility:visible}.ir-accordion__content-inner{padding:var(--ir-acc-space-3) var(--ir-acc-space-4)}@media (prefers-reduced-motion: reduce){.ir-accordion__caret{transition:none}.ir-accordion__content{transition:none}}";const qr=Gr;let Kr=0;const Wr=class{constructor(t){e(this,t);this.irToggle=a(this,"ir-toggle",7)}get host(){return o(this)}defaultExpanded=false;expanded;caret=true;caretIcon="angle-down";irToggle;_expanded=false;detailsEl;contentEl;contentId=`ir-accordion-content-${++Kr}`;isAnimating=false;cleanupAnimation;componentWillLoad(){this._expanded=this.expanded??this.defaultExpanded}disconnectedCallback(){if(this.cleanupAnimation){this.cleanupAnimation()}}watchExpanded(e){if(e!==undefined&&e!==this._expanded){this.updateExpansion(e,false)}}updateExpansion(e,t=true){if(this.isAnimating){return}const i=this._expanded;this._expanded=e;if(i!==e){if(e){this.show()}else{this.hide()}if(t){this.irToggle.emit({expanded:e})}}}async show(){if(!this.detailsEl||!this.contentEl||this.isAnimating)return;this.isAnimating=true;this.cleanupPreviousAnimation();const e=this.detailsEl.offsetHeight;this.detailsEl.style.height=`${e}px`;this.detailsEl.style.overflow="hidden";this.detailsEl.setAttribute("data-expanded","true");const t=this.contentEl.scrollHeight;requestAnimationFrame((()=>{if(!this.detailsEl)return;this.detailsEl.style.height=`${t}px`;const e=e=>{if(e.target===this.detailsEl&&e.propertyName==="height"){this.finishOpenAnimation()}};this.cleanupAnimation=()=>{if(this.detailsEl){this.detailsEl.removeEventListener("transitionend",e)}this.isAnimating=false};this.detailsEl.addEventListener("transitionend",e);setTimeout((()=>{if(this.isAnimating){this.finishOpenAnimation()}}),300)}))}async hide(){if(!this.detailsEl||!this.contentEl||this.isAnimating)return;this.isAnimating=true;this.cleanupPreviousAnimation();const e=this.detailsEl.scrollHeight;this.detailsEl.style.height=`${e}px`;this.detailsEl.style.overflow="hidden";requestAnimationFrame((()=>{if(!this.detailsEl)return;this.detailsEl.style.height="0px";const e=e=>{if(e.target===this.detailsEl&&e.propertyName==="height"){this.finishCloseAnimation()}};this.cleanupAnimation=()=>{if(this.detailsEl){this.detailsEl.removeEventListener("transitionend",e)}this.isAnimating=false};this.detailsEl.addEventListener("transitionend",e);setTimeout((()=>{if(this.isAnimating){this.finishCloseAnimation()}}),300)}))}finishOpenAnimation(){if(this.cleanupAnimation){this.cleanupAnimation();this.cleanupAnimation=undefined}if(this.detailsEl){this.detailsEl.style.height="";this.detailsEl.style.overflow=""}this.expanded=true;this.isAnimating=false}finishCloseAnimation(){if(this.cleanupAnimation){this.cleanupAnimation();this.cleanupAnimation=undefined}if(this.detailsEl){this.detailsEl.style.height="";this.detailsEl.style.overflow="";this.detailsEl.removeAttribute("data-expanded")}this.expanded=false;this.isAnimating=false}cleanupPreviousAnimation(){if(this.cleanupAnimation){this.cleanupAnimation();this.cleanupAnimation=undefined}this.isAnimating=false}onTriggerClick=()=>{if(this.isAnimating){return}const e=!this._expanded;this.irToggle.emit({expanded:e});this.updateExpansion(e,true)};onTriggerKeyDown=e=>{if((e.key==="Enter"||e.key===" ")&&!this.isAnimating){e.preventDefault();this.onTriggerClick()}};render(){const e=this._expanded;return t(i,{key:"e7a59f4b232a2b86195a27eff908dbffac10c12e"},t("div",{key:"b337e246b7904acb0e0789ffc63b1bfe30b976c7",part:"base",class:"ir-accordion","data-open":e?"true":"false"},t("button",{key:"716403b8a531efccc40afc6d97e79047952d10c7",type:"button",class:"ir-accordion__trigger","aria-expanded":e?"true":"false","aria-controls":this.contentId,"aria-busy":this.isAnimating?"true":"false",onClick:this.onTriggerClick,onKeyDown:this.onTriggerKeyDown,disabled:this.isAnimating,part:"trigger"},this.caret&&t("ir-icons",{key:"3fb3f17fa9b2aae1d8a4a0420cb9fcabe46afdcd",name:"angle-down",class:`ir-accordion__caret ${e?"is-open":""}`,"aria-hidden":"true"}),t("div",{key:"e2ca0e99df7350b9ccbf1851bdfcb6e9c7e99fed",class:"ir-accordion__trigger-content"},t("slot",{key:"4a461b12637396118a43a25272535ed8ea2b4a9e",name:"trigger"}))),t("div",{key:"7e6a9ad37cef3ac09fb3bb3f09431a9a974ebd63",class:"ir-accordion__content",id:this.contentId,ref:e=>this.detailsEl=e,"data-expanded":e?"true":null,role:"region","aria-hidden":e?"false":"true"},t("div",{key:"970a4db55a4b5cb6f21e7791f273cc6ca574daf8",class:"ir-accordion__content-inner",part:"content",ref:e=>this.contentEl=e},t("slot",{key:"596ab04d74a6dc26e4829999fc673312d3931cf0"})))))}static get watchers(){return{expanded:["watchExpanded"]}}};Wr.style=qr;const Xr=".sc-ir-actions-cell-h{box-sizing:border-box !important}.sc-ir-actions-cell-h *.sc-ir-actions-cell,.sc-ir-actions-cell-h *.sc-ir-actions-cell::before,.sc-ir-actions-cell-h *.sc-ir-actions-cell::after{box-sizing:inherit !important;padding:0;margin:0}[hidden].sc-ir-actions-cell{display:none !important}.sc-ir-actions-cell-h{display:flex;justify-content:flex-end}";const Jr=Xr;const Qr=class{constructor(t){e(this,t);this.irAction=a(this,"irAction",7)}buttons=[];irAction;getLabel(e){switch(e){case"check_in":return"Check in";case"check_out":return"Check out";case"overdue_check_in":return"Overdue check-in";case"overdue_check_out":return"Overdue check-out";case"edit":return"icon";case"delete":return"icon";default:return""}}getVariant(e){switch(e){case"overdue_check_in":case"overdue_check_out":return"neutral";case"edit":return"neutral";case"delete":return"danger";default:return"brand"}}getAppearance(e){switch(e){case"edit":case"delete":return"plain";default:return"accent"}}onClick(e){this.irAction.emit({action:e})}renderButton(e){const i=this.getLabel(e);const a=this.getVariant(e);const r=this.getAppearance(e);if(!i)return null;return t("ir-custom-button",{variant:a,appearance:r,"data-action":e,onClick:()=>this.onClick(e)},i!=="icon"&&i,e==="edit"&&t("wa-icon",{name:"edit",style:{fontSize:"1.2rem"}}),e==="delete"&&t("wa-icon",{name:"trash-can",style:{fontSize:"1.2rem"}}))}render(){return t(i,{key:"109d238e40d993d7cd814a69b5f620d1b67c9dfd"},this.buttons.map((e=>this.renderButton(e))))}};Qr.style=Jr;const Zr=({message:e,href:i,class:a})=>t("div",{class:a},t("wa-tooltip",{for:"help-button"},e),t("wa-button",{id:"help-button",href:i,size:"small",target:"_blank","aria-label":e,appearance:"plain",variant:"neutral"},t("wa-icon",{name:"circle-info",style:{fontSize:"1rem"}})));class eo{bookingService;_booking=null;constructor(e){this.bookingService=e}get booking(){return this._booking}set booking(e){this._booking=e}async fetchGroupedApplicablePolicies(e){if(!this._booking){throw new Error("Booking must be defined before fetching applicable policies.")}if(["003","004"].includes(this._booking.status.code)||!this._booking.is_direct){return}const{rooms:t,booking_nbr:i,currency:a,property:r}=this._booking;const o=this.groupRoomsForRequest(t??[]);try{const n=[];o.forEach((o=>{const s={booking_nbr:i,currency_id:a.id,language:e.language,property_id:r.id,rate_plan_id:o.ratePlanId,room_type_id:o.roomTypeId,is_preserve_history:true};if(o.identifiers.length>1){o.identifiers.forEach((e=>{n.push(this.bookingService.getExposedApplicablePolicies({...s,room_identifier:e}).then((i=>({grouping:{...o,rooms:t.filter((t=>t.identifier===e))},policies:i}))))}))}else{n.push(this.bookingService.getExposedApplicablePolicies(s).then((e=>({grouping:o,policies:e}))))}}));const s=await Promise.all(n);const l=this.buildPoliciesByType(s);const c=this.buildCancellationStatements(s);const d=this.calculateGuaranteeAmount(s);return{policiesByType:l,cancellationStatements:c,guaranteeAmount:d}}catch(e){const t=e instanceof Error?e.message:String(e);throw new Error(`Failed to fetch applicable policies: ${t}`)}}groupRoomsForRequest(e){if(!e.length){throw new Error("Cannot request applicable policies without booking rooms.")}const t=new Map;e.forEach((e=>{if(!e.rateplan?.id||!e.roomtype?.id){throw new Error("Room is missing rate plan or room type information.")}const i=`${e.roomtype.id}-${e.rateplan.id}`;const a=typeof e.identifier==="string"?e.identifier:null;if(!t.has(i)){t.set(i,{ratePlanId:e.rateplan.id,roomTypeId:e.roomtype.id,identifiers:a?[a]:[],rooms:[e]});return}const r=t.get(i);r.rooms.push(e);if(a&&!r.identifiers.includes(a)){r.identifiers.push(a)}}));return[...t.values()]}buildPoliciesByType(e){const t=e.flatMap((e=>e.policies??[]));return this.groupPoliciesByType(t)}groupPoliciesByType(e){return e.reduce(((e,t)=>{e[t.type]=e[t.type]?[...e[t.type],t]:[t];return e}),{})}buildCancellationStatements(e){if(!this._booking){return[]}const t=[];e.forEach((({grouping:e,policies:i})=>{if(!i?.length){return}const a=i.find((e=>e.type==="cancelation"));if(!a){return}e.rooms.forEach((e=>{const i=fe(e.from_date,"YYYY-MM-DD",true);if(!i.isValid()){return}const r=a.brackets.filter((e=>{const t=fe(e.due_on,"YYYY-MM-DD",true);return t.isValid()&&t.isBefore(i,"day")}));const o=r.some((e=>e.amount>0));let n;if(o){n=r.map(((e,t)=>{if(e.amount>0){return e}const i=r[t+1];if(i?.amount&&i.amount>0){return e}return undefined})).filter((e=>Boolean(e)))}else{n=[...r]}n=[...this.mergeBracketsByAmount(n)];if(!e.rateplan.is_non_refundable){const t=fe(e.from_date,"YYYY-MM-DD",true);const i=fe(e.to_date,"YYYY-MM-DD",true);const a=i.isValid()&&t.isValid()?i.diff(t,"days"):0;const r=a>1?t.clone().add(1,"day").format("YYYY-MM-DD"):t.format("YYYY-MM-DD");n.push({amount:e.total,amount_formatted:"",code:"",currency_id:this._booking.currency.id,due_on:r,due_on_formatted:"",gross_amount:e.gross_total,gross_amount_formatted:"",statement:"100% of total price"});n.sort(((e,t)=>{const i=fe(e.due_on,"YYYY-MM-DD",true);const a=fe(t.due_on,"YYYY-MM-DD",true);return i.valueOf()-a.valueOf()}))}t.push({...a,brackets:n,roomType:e.roomtype,ratePlan:e.rateplan,checkInDate:e.from_date,grossTotal:e.gross_total})}))}));return t}calculateGuaranteeAmount(e){return e.reduce(((e,{grouping:t,policies:i})=>{if(!i?.length){return e}const a=i.find((e=>e.type==="guarantee"));if(!a){return e}const r=this.selectCurrentBracket(a.brackets);if(!r){return e}const o=t.rooms.length*(r.gross_amount??0);return e+o}),0)}selectCurrentBracket(e){const t=fe().startOf("day");for(const i of e){const e=fe(i.due_on,"YYYY-MM-DD",true);if(!e.isValid()){continue}if(t.isSameOrAfter(e,"day")){return i}}return null}mergeBracketsByAmount(e){if(e.length<=1){return[...e]}return e.reduce(((e,t)=>{const i=e[e.length-1];if(!i||i.gross_amount!==t.gross_amount){e.push(t)}return e}),[])}}const to=".sc-ir-applicable-policies-h{display:flex;flex-direction:column;gap:1rem}.applicable-policies__container.sc-ir-applicable-policies{display:flex;align-items:center;gap:1rem;flex-wrap:wrap;margin-bottom:1rem}.applicable-policies__title.sc-ir-applicable-policies{font-size:1rem;font-weight:700;padding:0;margin:0}.applicable-policies__no-penalty.sc-ir-applicable-policies{padding:0;margin:0;font-size:0.875rem}.applicable-policies__statements.sc-ir-applicable-policies{box-sizing:border-box;padding:0}.applicable-policies__statements.sc-ir-applicable-policies::part(message){max-height:245px;overflow-y:auto;display:flex;flex-direction:column;padding:1em;gap:0.5rem}.applicable-policies__highlighted-bracket.sc-ir-applicable-policies{color:var(--wa-color-brand-50)}.applicable-policies__statement.sc-ir-applicable-policies{display:flex;flex-direction:column;border-bottom:1px solid var(--wa-color-neutral-70);padding-bottom:0.5rem}.applicable-policies__statement.sc-ir-applicable-policies:last-child{border-bottom:0;padding-bottom:0}.applicable-policies__room.sc-ir-applicable-policies{padding:0;margin:0;padding-bottom:0.5rem}.applicable-policies__bracket.sc-ir-applicable-policies{display:grid;grid-template-columns:repeat(2, 1fr);gap:0.25rem;font-size:0.875rem;padding-bottom:0.5rem}.applicable-policies__bracket-dates.sc-ir-applicable-policies{display:flex;align-items:center;gap:0.5rem;padding:0;margin:0}.applicable-policies__amount.sc-ir-applicable-policies{text-align:right;padding:0;margin:0;font-weight:600}.applicable-policies__statement-text.sc-ir-applicable-policies{padding:0;margin:0}.applicable-policies__brackets-table.sc-ir-applicable-policies{display:none}.applicable-policies__guarantee.sc-ir-applicable-policies{box-sizing:border-box;padding:0.5rem 1rem;margin-bottom:0.5rem;font-size:0.875rem}.applicable-policies__guarantee.sc-ir-applicable-policies::part(message){display:flex;align-items:center;justify-content:space-between}.applicable-policies__guarantee-info.sc-ir-applicable-policies{display:flex;align-items:center;gap:0.5rem}.applicable-policies__guarantee-date.sc-ir-applicable-policies{color:var(--text-muted, #666);padding:0;margin:0}.applicable-policies__guarantee-amount.sc-ir-applicable-policies{font-weight:600;color:var(--text-strong, #222);padding:0;margin:0}.applicable-policies__guarantee-label.sc-ir-applicable-policies{color:var(--wa-color-danger-50);font-weight:700;padding:0;margin:0}.applicable-policies__guarantee-action.sc-ir-applicable-policies{width:fit-content}@media (min-width: 768px){.applicable-policies__brackets.sc-ir-applicable-policies{display:none}.applicable-policies__brackets-table.sc-ir-applicable-policies{display:block;width:100%;font-size:0.875rem}.applicable-policies__brackets-table.sc-ir-applicable-policies table.sc-ir-applicable-policies{width:100%}.applicable-policies__amount.sc-ir-applicable-policies,.applicable-policies__bracket-dates.sc-ir-applicable-policies{white-space:nowrap}.applicable-policies__statement-text.sc-ir-applicable-policies{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}";const io=to;const ao=class{constructor(t){e(this,t);this.generatePayment=a(this,"generatePayment",7)}booking;propertyId;language="en";cancellationStatements=[];isLoading=false;guaranteeAmount;generatePayment;shouldShowCancellationBrackets=true;applicablePoliciesService=new eo(new l);componentWillLoad(){this.loadApplicablePolicies()}handleBookingChange(){this.loadApplicablePolicies()}async loadApplicablePolicies(){this.isLoading=true;try{this.applicablePoliciesService.booking=this.booking;const{cancellationStatements:e,guaranteeAmount:t}=await this.applicablePoliciesService.fetchGroupedApplicablePolicies({language:this.language});this.guaranteeAmount=t;this.cancellationStatements=[...e]}catch(e){console.error(e)}finally{this.isLoading=false}}formatPreviousBracketDueOn(e,t){if(e.isSame(t,"year")){return e.format("MMM DD")}return e.format("MMM DD, YYYY")}getBracketLabelsAndArrowState({bracket:e,index:t,brackets:i,checkInDate:a}){if(!e||!i||t<0||t>=i.length){return{leftLabel:null,rightLabel:null,showArrow:false}}const r=fe(this.booking.booked_on.date,"YYYY-MM-DD");const o=fe(e.due_on,"YYYY-MM-DD");if(!r.isValid()||!o.isValid()){console.warn("Invalid date encountered in getBracketLabelsAndArrowState");return{leftLabel:null,rightLabel:null,showArrow:false}}if(i.length===1){return this.handleSingleBracket(o,a)}const n=this.handleMultipleBrackets(e,t,i,a);return n}handleSingleBracket(e,t){const i=fe(t,"YYYY-MM-DD");if(e.isSame(i,"days")){return{leftLabel:`${i.format("MMM DD")} onwards`,showArrow:false,rightLabel:""}}return{leftLabel:e.format("MMM DD"),showArrow:true,rightLabel:fe(t,"YYYY-MM-DD").format("MMM DD, YYYY")}}handleMultipleBrackets(e,t,i,a){const r=fe(e.due_on,"YYYY-MM-DD");const o=fe(a,"YYYY-MM-DD");if(t===0){const a=i[t+1];if(!a){return{leftLabel:null,rightLabel:null,showArrow:false}}let r=fe(a.due_on,"YYYY-MM-DD");if(!r.isValid()){return{leftLabel:null,rightLabel:null,showArrow:false}}if(e.amount===0){r=r.clone().add(-1,"days")}return{leftLabel:"Until",showArrow:false,rightLabel:r.isSame(o,"dates")?r.clone().add(-1,"days").format("MMM DD, YYYY"):r.format("MMM DD, YYYY")}}if(fe(e.due_on,"YYYY-MM-DD").isSameOrAfter(o,"days")){return{leftLabel:`${o.format("MMM DD")} onwards`,showArrow:false,rightLabel:""}}if(t===i.length-1){return{leftLabel:r.clone().format("MMM DD"),showArrow:true,rightLabel:fe(a).format("MMM DD, YYYY")}}const n=i[t+1];if(!n){return{leftLabel:null,rightLabel:null,showArrow:false}}const s=fe(n.due_on,"YYYY-MM-DD");if(!s.isValid()){return{leftLabel:null,rightLabel:null,showArrow:false}}const l=s.isAfter(o,"days")?o:s.clone();const c=r.isSame(l.clone().add(-1,"days"),"days");return{leftLabel:this.formatPreviousBracketDueOn(r,l),showArrow:!c,rightLabel:c?"":l.add(-1,"days").format("MMM DD, YYYY")}}generateCancellationStatement(){const e="if cancelled today";const{cancelation_penality_as_if_today:t}=this.booking.financial;if(t===0){if(this.booking.financial.collected>0){return`No refund ${e}`}return`No payment required ${e}`}return`${t<0?"Refund":"Charge"} ${v(y.currency.symbol,Math.abs(t))} ${e}`}_getCurrentBracket(e){if(!Array.isArray(e)||e.length===0)return null;const t=fe().startOf("day");const i=e.map((e=>({b:e,date:fe(e.due_on,"YYYY-MM-DD",true).startOf("day")}))).filter((e=>e.date.isValid())).sort(((e,t)=>e.date.valueOf()-t.date.valueOf()));if(i.length===0)return null;if(t.isBefore(i[0].date,"day")){return i[0].date}for(let e=0;e<i.length-1;e++){const a=i[e].date;const r=i[e+1].date;if(t.isSameOrAfter(a,"day")&&t.isBefore(r,"day")){return a}}return i[i.length-1].date}render(){if(this.isLoading){return null}const e=this.booking.financial.collected-this.guaranteeAmount;return t(i,null,this.guaranteeAmount!==0&&t("section",null,t("wa-callout",{variant:"danger",class:"applicable-policies__guarantee"},t("div",{class:"applicable-policies__guarantee-info"},t("p",{class:"applicable-policies__guarantee-date"},fe(this.booking.booked_on.date,"YYYY-MM-DD").format("MMM DD, YYYY")),t("p",{class:"applicable-policies__guarantee-amount"},t("span",{class:"px-1"},v(y.currency.symbol,e<0?Math.abs(e):this.guaranteeAmount))),t("p",{class:"applicable-policies__guarantee-label"},"Guarantee ",e<0?"balance":"")),e<0&&t("div",{class:"applicable-policies__guarantee-action"},t("ir-custom-button",{onClickHandler:()=>{this.generatePayment.emit({amount:Math.abs(e),currency:y.currency,due_on:fe().format("YYYY-MM-DD"),pay_type_code:null,reason:"",type:"OVERDUE"})},size:"small"},"Pay")))),t("section",null,t("div",{class:"applicable-policies__container"},t("div",{class:"d-flex align-items-center",style:{gap:"0.5rem"}},t("p",{class:"applicable-policies__title font-size-large p-0 m-0"},"Cancellation Schedule"),t(Zr,{message:"Help",href:"https://help.igloorooms.com/extranet/booking-details/guarantee-and-cancellation"})),t("p",{class:"applicable-policies__no-penalty"},this.generateCancellationStatement())),this.cancellationStatements?.length>0&&this.cancellationStatements.every((e=>e.brackets.length>0))&&this.shouldShowCancellationBrackets&&t("wa-callout",{variant:"brand",class:"applicable-policies__statements"},this.cancellationStatements?.map((e=>{const i=this._getCurrentBracket(e.brackets);return t("div",{class:"applicable-policies__statement"},this.cancellationStatements.length>1&&t("p",{class:"applicable-policies__room"},t("b",null,e.roomType.name)," ",e.ratePlan["short_name"]," ",e.ratePlan.is_non_refundable?` - ${g.entries.Lcz_NonRefundable}`:""),t("div",{class:"applicable-policies__brackets"},e.brackets.map(((a,r)=>{const{leftLabel:o,rightLabel:n,showArrow:s}=this.getBracketLabelsAndArrowState({index:r,bracket:a,brackets:e.brackets,checkInDate:e.checkInDate});const l=fe(a.due_on,"YYYY-MM-DD").isSame(i,"date");return t("div",{class:{"applicable-policies__bracket":true,"applicable-policies__highlighted-bracket":l}},t("p",{class:"applicable-policies__bracket-dates"},o," ",s&&t("ir-icons",{name:"arrow_right",class:"applicable-policies__icon",style:{"--icon-size":"0.875rem"}})," ",n),t("p",{class:"applicable-policies__amount"},v(y.currency.symbol,a.gross_amount)),t("p",{class:"applicable-policies__statement-text"},a.amount===0?"No penalty":a.statement))}))),t("div",{class:"applicable-policies__brackets-table"},t("table",null,t("tbody",null,e.brackets.map(((a,r)=>{const{leftLabel:o,rightLabel:n,showArrow:s}=this.getBracketLabelsAndArrowState({index:r,bracket:a,brackets:e.brackets,checkInDate:e.checkInDate});const l=fe(a.due_on,"YYYY-MM-DD").isSame(i,"date");return t("tr",{class:{"applicable-policies__highlighted-bracket":l}},t("td",{class:"applicable-policies__bracket-dates"},o," ",s&&t("ir-icons",{name:"arrow_right",class:"applicable-policies__icon",style:{"--icon-size":"0.875rem"}})," ",n),t("td",{class:"applicable-policies__amount px-1"},v(y.currency.symbol,a.gross_amount)),t("td",{class:"applicable-policies__statement-text"},a.amount===0?"No penalty":a.statement))}))))))})))))}static get watchers(){return{booking:["handleBookingChange"]}}};ao.style=io;const ro={bookings:[],filteredBookings:[],paginatedBookings:[],futureBookings:[],needsCheckInBookings:[],inHouseBookings:[],searchTerm:"",pagination:{currentPage:1,pageSize:20,total:0,totalPages:1,showing:{from:0,to:0}},today:_o()};const{state:oo,onChange:no}=m(ro);function so(e=[]){oo.bookings=Array.isArray(e)?[...e]:[];fo()}function lo(e){oo.searchTerm=e??"";fo()}function co(e){const t=Mo(e,Math.max(oo.pagination.totalPages,1));oo.pagination={...oo.pagination,currentPage:t,showing:Do(t,oo.pagination.pageSize,oo.pagination.total)};fo()}function ho(e){const t=Number.isFinite(e)&&e>0?Math.floor(e):0;const i=Co(t,oo.pagination.pageSize);const a=Mo(oo.pagination.currentPage,Math.max(i,1));oo.pagination={...oo.pagination,total:t,totalPages:Math.max(i,1),currentPage:a,showing:Do(a,oo.pagination.pageSize,t)}}function uo(e){if(!Number.isFinite(e)||e<=0){return}const t=Math.floor(e);oo.pagination={...oo.pagination,pageSize:t,currentPage:1,showing:Do(1,t,oo.pagination.total)};fo()}function po(e){oo.today=fe(e,"YYYY-MM-DD").format("YYYY-MM-DD");oo.pagination={...oo.pagination,currentPage:1,showing:Do(1,oo.pagination.pageSize,oo.pagination.total)};fo()}function fo(){const e=bo(oo.bookings,oo.today);const t=go(e,oo.searchTerm);oo.filteredBookings=t;oo.paginatedBookings=t;const i=wo(t);oo.needsCheckInBookings=i.needsCheckIn;oo.inHouseBookings=i.inHouse;oo.futureBookings=i.futureRooms}function bo(e,t){if(!t){return[]}return e}function go(e,t){const i=t?.trim().toLowerCase();if(!i){return e}return e.filter((e=>mo(e,i)))}function mo(e,t){if(!t){return true}const i=e.booking_nbr?.toLowerCase()??"";if(i.includes(t)){return true}if(xo(e.guest).includes(t)){return true}return(e.rooms??[]).some((e=>xo(e.guest).includes(t)))}function wo(e){return e.reduce(((e,t)=>{const i=t.rooms??[];const a=i.filter((e=>yo(e)));if(a.length){e.needsCheckIn.push({...t,rooms:a})}const r=i.filter((e=>ko(e)));if(r.length){e.inHouse.push({...t,rooms:r})}const o=i.filter((e=>vo(e)));if(o.length){e.futureRooms.push({...t,rooms:o})}return e}),{needsCheckIn:[],inHouse:[],futureRooms:[]})}function yo(e){if(!e.unit){return false}return B({from_date:e.from_date,to_date:e.to_date,isCheckedIn:e.in_out.code==="001"})}function vo(e){const t=e.in_out?.code??"";return t==="000"&&fe().startOf("date").isBefore(fe(e.from_date,"YYYY-MM-DD").startOf("day"))}function ko(e){return e.in_out?.code==="001"}function xo(e){const t=`${e?.first_name??""} ${e?.last_name??""}`.trim();return t.toLowerCase()}function _o(){return fe().format("YYYY-MM-DD")}function Do(e,t,i){if(!i||!t){return{from:0,to:0}}const a=(e-1)*t+1;return{from:Math.max(a,1),to:Math.min(a+t-1,i)}}function Co(e,t){if(!e||!t){return 0}return Math.ceil(e/t)}function Mo(e,t){if(!Number.isFinite(e)||e<=0){return 1}const i=Math.floor(e);return Math.min(Math.max(i,1),Math.max(t,1))}so();const So=".page-title.sc-ir-arrivals{font-family:var(--wa-font-family-heading);font-weight:var(--wa-font-weight-heading);line-height:var(--wa-line-height-condensed);text-wrap:balance;font-size:var(--wa-font-size-xl)}";const Yo=So;const Eo=class{constructor(t){e(this,t)}ticket;propertyid;language="en";p;pageSize=20;bookingNumber;booking;paymentEntries;isPageLoading;payment;roomGuestState=null;countries;tokenService=new me;roomService=new we;bookingService=new l;paymentFolioRef;componentWillLoad(){if(this.ticket){this.tokenService.setToken(this.ticket);this.init()}uo(this.pageSize);no("today",(e=>{this.getBookings()}))}handlePageSizeChange(e,t){if(e!==t)uo(e)}handleTicketChange(e,t){if(e!==t&&e){this.tokenService.setToken(this.ticket);this.init()}}handleBookingPayment(e){e.stopImmediatePropagation();e.stopPropagation();const{booking_nbr:t,payment:i}=e.detail;this.booking=oo.bookings.find((e=>e.booking_nbr===t));const a=this.paymentEntries.types.find((e=>e.CODE_NAME===i.payment_type.code));this.payment={...i,payment_type:{code:a.CODE_NAME,description:a.CODE_VALUE_EN,operation:a.NOTES}};this.paymentFolioRef.openFolio()}handleOpen(e){this.bookingNumber=e.detail}async init(){try{this.isPageLoading=true;if(!this.propertyid&&!this.p){throw new Error("Missing credentials")}const[e,t,i,a]=await Promise.all([this.roomService.getExposedProperty({id:this.propertyid||0,language:this.language,aname:this.p}),this.roomService.fetchLanguage(this.language),this.bookingService.getCountries(this.language),this.bookingService.getSetupEntriesByTableNameMulti(["_BED_PREFERENCE_TYPE","_DEPARTURE_TIME","_PAY_TYPE","_PAY_TYPE_GROUP","_PAY_METHOD"]),this.getBookings()]);this.countries=i;const{pay_type:r,pay_type_group:o,pay_method:n}=this.bookingService.groupEntryTablesResult(a);this.paymentEntries={types:r,groups:o,methods:n}}catch(e){}finally{this.isPageLoading=false}}async getBookings(){const{bookings:e,total_count:t}=await this.bookingService.getRoomsToCheckIn({property_id:this.propertyid?.toString(),check_in_date:oo.today,page_index:oo.pagination.currentPage,page_size:oo.pagination.pageSize});ho(t??0);so(e)}async handlePaginationChange(e){e.stopImmediatePropagation();e.stopPropagation();const t=e.detail?.currentPage??1;if(t===oo.pagination.currentPage){return}co(t);await this.getBookings()}async handlePaginationPageSizeChange(e){e.stopImmediatePropagation();e.stopPropagation();const t=e.detail?.pageSize;if(!Number.isFinite(t)){return}const i=Math.floor(Number(t));if(i===oo.pagination.pageSize){return}uo(i);await this.getBookings()}handleCheckingRoom(e){e.stopImmediatePropagation();e.stopPropagation();this.roomGuestState=e.detail}render(){if(this.isPageLoading){return t("ir-loading-screen",null)}return t(i,null,t("ir-toast",null),t("ir-interceptor",{handledEndpoints:["/Get_Rooms_To_Check_in"]}),t("div",{class:"ir-page__container"},t("h3",{class:"page-title"},"Arrivals"),t("ir-arrivals-filters",null),t("ir-arrivals-table",{onCheckInRoom:e=>this.handleCheckingRoom(e),onRequestPageChange:e=>this.handlePaginationChange(e),onRequestPageSizeChange:e=>this.handlePaginationPageSizeChange(e)}),t("ir-drawer",{onDrawerHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.bookingNumber=null},withoutHeader:true,open:!!this.bookingNumber,style:{"--ir-drawer-width":"80rem","--ir-drawer-background-color":"#F2F3F8","--ir-drawer-padding-left":"0","--ir-drawer-padding-top":"0","--ir-drawer-padding-bottom":"0","--ir-drawer-padding-right":"0"}},this.bookingNumber&&t("ir-booking-details",{hasPrint:true,hasReceipt:true,hasCloseButton:true,onCloseSidebar:()=>this.bookingNumber=null,is_from_front_desk:true,propertyid:this.propertyid,hasRoomEdit:true,hasRoomDelete:true,bookingNumber:this.bookingNumber.toString(),ticket:this.ticket,language:this.language,hasRoomAdd:true})),t("ir-payment-folio",{style:{height:"auto"},bookingNumber:this.booking?.booking_nbr,paymentEntries:this.paymentEntries,payment:this.payment,mode:"payment-action",ref:e=>this.paymentFolioRef=e,onCloseModal:()=>{this.booking=null;this.payment=null}}),t("ir-room-guests",{open:this.roomGuestState!==null,countries:this.countries,language:this.language,identifier:this.roomGuestState?.identifier,bookingNumber:this.roomGuestState?.booking_nbr?.toString(),roomName:this.roomGuestState?.roomName,totalGuests:this.roomGuestState?.totalGuests,sharedPersons:this.roomGuestState?.sharing_persons,checkIn:this.roomGuestState?.checkin,onCloseModal:()=>this.roomGuestState=null})))}static get watchers(){return{pageSize:["handlePageSizeChange"],ticket:["handleTicketChange"]}}};Eo.style=Yo;const To=".sc-ir-arrivals-filters-h{display:block}.arrivals-filters__container.sc-ir-arrivals-filters{display:flex;flex-direction:column;gap:1rem}@media (min-width: 768px){.arrivals-filters__container.sc-ir-arrivals-filters{flex-direction:row;align-items:center}.arrivals-filters__container.sc-ir-arrivals-filters>*.sc-ir-arrivals-filters{flex:1 1 0%}.arrivals-filters__date-picker.sc-ir-arrivals-filters{max-width:200px}.arrivals-filters__search-bar.sc-ir-arrivals-filters{max-width:400px}}";const Io=To;const zo=class{constructor(t){e(this,t)}handleSearchChange=e=>{lo(e.detail??"")};render(){return t("div",{key:"34549f8402830be91a2dae1dd0c974442a3a24ed",class:"arrivals-filters__container"},t("ir-custom-date-picker",{key:"a0c5410096bfa0a10350cd966d35247c75824a11",onDateChanged:e=>po(e.detail.start.format("YYYY-MM-DD")),date:oo.today,class:"arrivals-filters__date-picker"},t("wa-icon",{key:"ba68dc7f503379a534ede9d02b976ca9ff861d61",name:"calendar",slot:"start"}),be("/Get_Rooms_To_Check_in")&&t("wa-spinner",{key:"ec7719dec58d0f29a6975d35a2c7d5d93f022125",slot:"end"})),t("ir-custom-input",{key:"af2fe2f1689f517fa31950d32bdcabccced25341",withClear:true,class:"arrivals-filters__search-bar",placeholder:"Search guests or bookings",value:oo.searchTerm,"onText-change":this.handleSearchChange},t("wa-icon",{key:"cba3428d6d2478176411d1e17cf902b983c6020b",name:"magnifying-glass",slot:"start"})))}};zo.style=Io;const Oo=".sc-ir-arrivals-table-h{display:flex;flex-direction:column;border-radius:0.5rem;overflow-x:auto;min-height:60vh;max-width:1920px;border:1px solid var(--wa-color-neutral-border-quiet, #abaeb9);background-color:white}.sc-ir-arrivals-table-h{box-sizing:border-box !important}.sc-ir-arrivals-table-h *.sc-ir-arrivals-table,.sc-ir-arrivals-table-h *.sc-ir-arrivals-table::before,.sc-ir-arrivals-table-h *.sc-ir-arrivals-table::after{box-sizing:inherit !important;padding:0;margin:0}[hidden].sc-ir-arrivals-table{display:none !important}.arrivals-table__actions-cell.sc-ir-arrivals-table{display:flex;min-width:100px;justify-content:flex-end}@media (min-width: 1024px){.arrivals-table__actions-cell.sc-ir-arrivals-table{min-width:250px}}";const Ao=Oo;const Bo=".ir-table-row.sc-ir-arrivals-table td.sc-ir-arrivals-table{padding:0.5rem 1rem !important;text-align:left;z-index:2;background-color:var(--wa-color-surface-default);white-space:nowrap;color:var(--wa-color-text-normal);box-sizing:border-box}.table--container.sc-ir-arrivals-table{flex:1 1 0%}.table--container.sc-ir-arrivals-table{overflow-x:auto}.table.sc-ir-arrivals-table td.sc-ir-arrivals-table{border-top:0;border-bottom:1px solid var(--wa-color-neutral-border-quiet, #abaeb9);transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.table.sc-ir-arrivals-table tbody.sc-ir-arrivals-table tr.sc-ir-arrivals-table:last-child>td.sc-ir-arrivals-table{border-bottom:0 !important}.table.sc-ir-arrivals-table thead.sc-ir-arrivals-table th.sc-ir-arrivals-table{border:none !important;background:#ececec;background:color-mix(in oklab, var(--wa-color-neutral-fill-quiet, #f1f2f3) 60%, transparent);color:#374151;padding:0.5rem 1rem !important;text-align:left}.data-table.sc-ir-arrivals-table thead.sc-ir-arrivals-table th.sc-ir-arrivals-table{box-sizing:border-box;background:var(--wa-color-surface-default) !important;padding-top:0.5rem !important;padding-bottom:0.5rem !important;border-bottom:1px solid var(--wa-color-neutral-90) !important;color:var(--wa-color-text-normal)}.data-table.sc-ir-arrivals-table .empty-row.sc-ir-arrivals-table{height:50vh !important;text-align:center;color:var(--wa-color-gray-60)}.data-table--pagination.sc-ir-arrivals-table{padding:0.5rem 1rem;position:sticky;bottom:0;background:var(--wa-color-surface-default);border-top:1px solid var(--wa-color-neutral-90)}.selected.sc-ir-arrivals-table td.sc-ir-arrivals-table{background:#e3f3fa !important}.selected.sc-ir-arrivals-table td.sc-ir-arrivals-table{color:var(--gray-dark) !important;transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.sortable.sc-ir-arrivals-table,.ir-table-row.sc-ir-arrivals-table{transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.sortable.sc-ir-arrivals-table{text-transform:capitalize}.sortable.sc-ir-arrivals-table:hover{color:#212529;background-color:#e2e8f0 !important;border-color:#dae0e5;cursor:pointer}.ir-table-row.sc-ir-arrivals-table:hover td.sc-ir-arrivals-table{background:#e2e6ea3f !important;background:var(--wa-color-neutral-fill-quiet, #f1f2f3) !important}.sortable.sc-ir-arrivals-table:active{color:#212529;background-color:#e2e8f0;border-color:#d3d9df}.sortable.sc-ir-arrivals-table svg.sc-ir-arrivals-table{color:var(--blue)}.sticky-column.sc-ir-arrivals-table{position:sticky !important;right:0;background-color:white}";const Ro=Bo;const Po=class{constructor(t){e(this,t);this.requestPageChange=a(this,"requestPageChange",7);this.requestPageSizeChange=a(this,"requestPageSizeChange",7);this.checkInRoom=a(this,"checkInRoom",7)}selectedBooking;requestPageChange;requestPageSizeChange;checkInRoom;renderSection(e,t=false){if(!e?.length){return null}const i=e.flatMap((e=>this.renderBookingRows(e,t)));return[...i]}renderBookingRows(e,t){return(e.rooms??[]).map(((i,a)=>this.renderRow(e,i,a,t)))}async handleActionsClicked(e){e.stopImmediatePropagation();e.stopPropagation();switch(e.detail.action){case"check_in":case"overdue_check_in":const t=this.selectedBooking.rooms[0];const{adult_nbr:i,children_nbr:a,infant_nbr:r}=t.occupancy;this.checkInRoom.emit({identifier:t.identifier,sharing_persons:t.sharing_persons,booking_nbr:this.selectedBooking.booking_nbr,checkin:true,roomName:t.unit?.name,totalGuests:i+a+r});return;default:console.warn(e.detail.action+" not handled")}}renderRow(e,i,a,r){const o=`${e.booking_nbr}-${i?.identifier??a}`;const n=fe(i.from_date,"YYYY-MM-DD").startOf("day").isBefore(fe().startOf("day"),"dates");return t("tr",{class:"ir-table-row",key:o},t("td",{class:"sticky-column"},t("ir-booking-number-cell",{source:e.source,origin:e.origin,channelBookingNumber:e.channel_booking_nbr,bookingNumber:e.booking_nbr})),t("td",null,t("ir-booked-by-cell",{guest:e.guest})),t("td",null,t("ir-guest-name-cell",{name:i.guest})),t("td",null,t("ir-unit-cell",{room:i})),t("td",null,t("ir-dates-cell",{overdueCheckin:n,checkIn:i.from_date,checkOut:i.to_date})),t("td",{class:"text-center"},t("ir-balance-cell",{bookingNumber:e.booking_nbr,isDirect:e.is_direct,statusCode:e.status.code,currencySymbol:e.currency.symbol,financial:e.financial})),t("td",null,t("div",{class:"arrivals-table__actions-cell"},r?t("ir-actions-cell",{buttons:n?["overdue_check_in"]:["check_in"],onIrAction:t=>{this.selectedBooking=e;this.handleActionsClicked(t)}}):i.in_out.code==="001"?"In-house":"")))}handlePageChange(e){e.stopImmediatePropagation();e.stopPropagation();this.requestPageChange.emit(e.detail)}handlePageSizeChange(e){e.stopImmediatePropagation();e.stopPropagation();this.requestPageSizeChange.emit(e.detail)}render(){const{needsCheckInBookings:e,inHouseBookings:a,futureBookings:r,pagination:o}=oo;return t(i,{key:"553070d130b886cb25cdef7d48668a80c347ac6e"},t("div",{key:"c88db77626b1e5e03ce08ac075802bd7aaee2a26",class:"table--container"},t("table",{key:"d664860bbf4c39735717677956f86a387e2ae58b",class:"table data-table"},t("thead",{key:"7b5b2128a06f132fb3e1e62ee6709e980a170c21"},t("tr",{key:"dd16786a617a1d4817f19763a3513b49103eb55d"},t("th",{key:"088574bf80becfa2070ba7214f5459aeb558fcbe"},t("span",{key:"2dab42e28a697aee10bdd1c931436fb95ee5c790",class:"arrivals-table__departure__cell"},"Booking#")),t("th",{key:"1de0ae1347503e8816bfa276ae1139e34ad24a5d"},t("div",{key:"c343755c93f740f6aa7bfc9409b3339382a04b59"},t("p",{key:"78184f0ed5278186169e2285d0c3de125db7edd9"},"Booked by"))),t("th",{key:"66bf936b00cc9be3d84cf55d585f15e7d5df0bc7"},"Guest name"),t("th",{key:"e90197183ff087fba9c48fc8872400626ad06ef9"},"Unit"),t("th",{key:"d3972f24256d1709ec4cf854ef9c2f61a4629775"},"Dates"),t("th",{key:"11de63abff917312bbf063546231d022a9f4a8fc",class:"text-center"},"Balance"),t("th",{key:"84c4c103662480f21dee36fa30aeeed61cbaa3a6"}))),t("tbody",{key:"a4020e75cdedd8c3dcfb113b254a8bafe1e8019f"},this.renderSection(r),this.renderSection(e,true),this.renderSection(a),!e.length&&!a.length&&t("tr",{key:"27a68fcb99988c08203531761b5b463157ba3fe3"},t("td",{key:"b5e538de8dd799d95271851051be39d58b888f69",colSpan:7,class:"empty-row"},"No arrivals found."))))),t("ir-pagination",{key:"b93d7873364a48550fe5a1a2c2590327f1e19b8a",class:"data-table--pagination",showing:o.showing,total:o.total,pages:o.totalPages,pageSize:o.pageSize,currentPage:o.currentPage,allowPageSizeChange:false,pageSizes:[o.pageSize],recordLabel:g.entries?.Lcz_Bookings??"Bookings",onPageChange:e=>this.handlePageChange(e),onPageSizeChange:e=>this.handlePageSizeChange(e)}))}};Po.style=Ao+Ro;const No=".sc-ir-autocomplete-h{display:block;position:relative}.selected.sc-ir-autocomplete{color:#fff;text-decoration:none;background-color:#666ee8}input.sc-ir-autocomplete{width:100%;position:relative;border-top-left-radius:0px !important;border-left:0 !important;border-bottom-left-radius:0px !important}label.sc-ir-autocomplete{margin:0;border-top-right-radius:0px !important;border-right:0 !important;border-bottom-right-radius:0px !important;width:fit-content;display:flex;align-items:center;padding-right:3px !important;justify-content:center;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}label[data-state='focused'].sc-ir-autocomplete{border-color:var(--blue)}.combobox.sc-ir-autocomplete{margin:0;top:30px;min-width:100%;width:max-content;display:block;z-index:10000;padding:1px;background:white;box-shadow:0px 8px 16px 0px rgba(0, 0, 0, 0.2);padding:5px 0;max-height:250px;overflow-y:auto}.dropdown-item.sc-ir-autocomplete{cursor:pointer}button.sc-ir-autocomplete{all:unset;right:4px}.combobox.sc-ir-autocomplete p.sc-ir-autocomplete,span.sc-ir-autocomplete,loader-container.sc-ir-autocomplete{padding:5px 16px;margin:0px;margin-top:2px;width:100%}.combobox.sc-ir-autocomplete p.sc-ir-autocomplete{cursor:pointer}.combobox.sc-ir-autocomplete p.sc-ir-autocomplete:hover{background:#f4f5fa}.combobox.sc-ir-autocomplete p[data-selected].sc-ir-autocomplete,.combobox.sc-ir-autocomplete p[data-selected].sc-ir-autocomplete:hover{color:#fff;text-decoration:none;background-color:#666ee8}.loader.sc-ir-autocomplete{width:14px;height:14px;border:2px solid #0f0f0f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const Lo=No;const $o=class{constructor(t){e(this,t);this.comboboxValue=a(this,"comboboxValue",7);this.inputCleared=a(this,"inputCleared",7);this.toast=a(this,"toast",7)}duration=300;placeholder="";propertyId;isSplitBooking=false;type="text";name="";inputId=pe();required=false;disabled=false;value;from_date="";to_date="";danger_border;testId;inputValue="";data=[];selectedIndex=-1;isComboBoxVisible=false;isLoading=true;isItemSelected;inputFocused=false;comboboxValue;inputCleared;toast;get el(){return o(this)}inputRef;debounceTimer;bookingService=new l;no_result_found="";componentWillLoad(){this.no_result_found=g.entries.Lcz_NoResultsFound}handleKeyDown(e){const t=this.data.length;const i=this.getHeightOfPElement();if(t>0){switch(e.key){case"ArrowUp":e.preventDefault();this.selectedIndex=(this.selectedIndex-1+t)%t;this.adjustScrollPosition(i);break;case"ArrowDown":e.preventDefault();this.selectedIndex=(this.selectedIndex+1)%t;this.adjustScrollPosition(i);break;case"Enter":case" ":case"ArrowRight":e.preventDefault();this.selectItem(this.selectedIndex);break;case"Escape":this.inputRef?.blur();this.isComboBoxVisible=false;break}}}getHeightOfPElement(){const e=this.el.querySelector(".combobox");if(e){const t=e.querySelector("p");return t?t.offsetHeight:0}return 0}adjustScrollPosition(e,t=250){const i=this.el.querySelector(".combobox");if(i){const a=2;const r=e+a;const o=r*this.selectedIndex;let n=o-t/2+e/2;n=Math.max(0,Math.min(n,i.scrollHeight-t));i.scrollTo({top:n,behavior:"auto"})}}selectItem(e){if(this.data[e]){this.isItemSelected=true;this.comboboxValue.emit({key:"select",data:this.data[e]});this.inputValue="";this.resetCombobox()}}debounceFetchData(){clearTimeout(this.debounceTimer);this.debounceTimer=setTimeout((()=>{this.fetchData()}),this.duration)}async fetchData(){try{this.isLoading=true;let e=[];if(!this.isSplitBooking){e=await this.bookingService.fetchExposedGuest(this.inputValue,this.propertyId)}else{if(this.inputValue.split(" ").length===1){e=await this.bookingService.fetchExposedBookings(this.inputValue,this.propertyId,this.from_date,this.to_date)}}this.data=e;if(!this.isComboBoxVisible){this.isComboBoxVisible=true}}catch(e){console.log("error",e)}finally{this.isLoading=false}}handleInputChange(e){this.inputValue=e.target.value;if(this.inputValue){this.debounceFetchData()}else{clearTimeout(this.debounceTimer);this.resetCombobox(false)}}handleDocumentClick(e){const t=e.target;if(!this.el.contains(t)){this.isComboBoxVisible=false}}handleBlur(){this.inputFocused=false;setTimeout((()=>{if(this.isDropdownItem(document.activeElement)){return}if(this.isSplitBooking){if(!this.isItemSelected){if(this.data.length>0){this.comboboxValue.emit({key:"blur",data:this.inputValue})}else{if(this.inputValue!==""){this.toast.emit({type:"error",description:"",title:`The Booking #${this.inputValue} is not Available`,position:"top-right"});this.inputCleared.emit()}}this.inputValue="";this.resetCombobox()}else{this.isItemSelected=false}}else{if(!this.isItemSelected){this.comboboxValue.emit({key:"blur",data:this.inputValue});this.inputValue="";this.resetCombobox()}else{this.isItemSelected=false}}}),200)}isDropdownItem(e){return e&&e.closest(".combobox")}disconnectedCallback(){clearTimeout(this.debounceTimer);this.inputRef?.removeEventListener("blur",this.handleBlur);this.inputRef?.removeEventListener("click",this.selectItem);this.inputRef?.removeEventListener("keydown",this.handleKeyDown);this.inputRef?.removeEventListener("focus",this.handleFocus)}handleItemKeyDown(e,t){if(e.key==="Enter"||e.key===" "||e.key==="ArrowRight"){this.selectItem(t);e.preventDefault()}else if(e.key==="Escape"){this.isComboBoxVisible=false;this.inputRef?.blur();e.preventDefault()}else{return}}renderDropdown(){if(this.inputValue!==""){return t("div",{class:`position-absolute dropdown-menu  rounded combobox`},this.data?.map(((e,i)=>t("p",{role:"button",class:"dropdown-item",onKeyDown:e=>this.handleItemKeyDown(e,i),"data-selected":this.selectedIndex===i,tabIndex:0,onClick:()=>this.selectItem(i)},this.isSplitBooking?t(r,null,`${e.booking_nbr} ${e.guest.first_name} ${e.guest.last_name}`):t("div",{class:"d-flex align-items-center flex-fill"},t("p",{class:"p-0 m-0"},`${e.email}`," ",t("span",{class:"p-0 m-0"},` - ${e.first_name} ${e.last_name}`)))))),this.isLoading&&t("div",{class:"loader-container d-flex align-items-center justify-content-center"},t("div",{class:"loader"})),this.data.length===0&&!this.isLoading&&t("span",{class:"text-center"},this.no_result_found))}}handleFocus(){this.isComboBoxVisible=true;this.inputFocused=true}clearInput(){this.inputValue="";this.resetCombobox();this.inputCleared.emit(null)}resetCombobox(e=true){if(e){this.inputRef?.blur()}this.data=[];this.selectedIndex=-1;this.isComboBoxVisible=false}render(){return t(i,{key:"c75318f92a615afa4c2b944ccd8fb742aa3efdba"},t("div",{key:"77d32ce42631ab05d679bd67b2f6b59f1fe2f5f1",class:"d-flex align-items-center "},t("label",{key:"486aeb5f68a3d086eccd11803980865542e76a2b","data-state":this.inputFocused?"focused":"blured",htmlFor:this.inputId,class:`form-control input-sm ${this.danger_border&&"border-danger"}`},t("svg",{key:"5cec71f07d9c47f183870d6940b59041bc916484",xmlns:"http://www.w3.org/2000/svg",height:"12",width:"12",viewBox:"0 0 512 512"},t("path",{key:"d11c2552328ad407cf702dc4996a458862177211",fill:"currentColor",d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"}))),t("input",{key:"a2d2d896e570930a8933aa7e38245a50f88fd87e","data-testid":this.testId,required:this.required,disabled:this.disabled,id:this.inputId,onKeyDown:this.handleKeyDown.bind(this),class:`form-control input-sm flex-full ${this.danger_border&&"border-danger"}`,type:this.type,name:this.name,value:this.value||this.inputValue,placeholder:this.placeholder,onBlur:this.handleBlur.bind(this),autoComplete:"none",onInput:this.handleInputChange.bind(this),onFocus:this.handleFocus.bind(this),ref:e=>this.inputRef=e}),this.inputValue&&t("button",{key:"b05234cd93816dd613e0ea751608987ba81c99bc",type:"button",class:"position-absolute d-flex align-items-center justify-content-center ",onClick:this.clearInput.bind(this)},t("p",{key:"d3b0f36529198e51bbcf150d0dd82c0a7f4e17f0",class:"sr-only"},"clear input"),t("svg",{key:"275470f19fc0a2a555c09ceae56f4b4f079215d7",width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t("path",{key:"eb48dd60d074ae75b6bf23519d0869e2b4be9025",d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"})))),this.isComboBoxVisible&&this.renderDropdown())}};$o.style=Lo;const Fo=".sc-ir-balance-cell-h{box-sizing:border-box !important}.sc-ir-balance-cell-h *.sc-ir-balance-cell,.sc-ir-balance-cell-h *.sc-ir-balance-cell::before,.sc-ir-balance-cell-h *.sc-ir-balance-cell::after{box-sizing:inherit !important;padding:0;margin:0}[hidden].sc-ir-balance-cell{display:none !important}.sc-ir-balance-cell-h{display:flex;flex-direction:column;align-items:center;font-size:0.93rem}[display='inline'].sc-ir-balance-cell-h{display:flex;flex-direction:row;gap:0.5rem}.cell-label.sc-ir-balance-cell{font-weight:700}.balance_button-container.sc-ir-balance-cell{display:flex;align-items:center;justify-content:flex-end}";const Ho=Fo;const Uo=class{constructor(t){e(this,t);this.payBookingBalance=a(this,"payBookingBalance",7)}label;display="block";financial;statusCode;isDirect;bookingNumber;currencySymbol;payBookingBalance;render(){return t(i,{key:"2cdcf05890fbed25993acc150ea14f5556a0af81"},this.label&&t("p",{key:"08ffcd2868bee101061377cac2e934e280e4d9b5",class:"cell-label"},this.label,":"),t("p",{key:"595c2512b02c5eef985b1155bb7c508a39c9065a",class:"ir-price"},v(this.currencySymbol,this.financial.gross_total)),t("div",{key:"1ac05790dd522e32ab434cb5cc69e59acfec26d5",class:"balance_button-container"},["003","004"].includes(this.statusCode)&&this.isDirect?this.financial.cancelation_penality_as_if_today!==0&&this.financial.due_amount!==0&&t("ir-custom-button",{onClickHandler:()=>{this.payBookingBalance.emit({booking_nbr:this.bookingNumber,payment:{amount:Math.abs(this.financial.cancelation_penality_as_if_today),currency:y.property.currency,date:fe().format("YYYY-MM-DD"),designation:null,payment_method:null,payment_type:{code:this.financial.cancelation_penality_as_if_today<0?"010":"001",description:null,operation:null},id:-1,reference:""}})},style:{"--ir-c-btn-height":"fit-content","--ir-c-btn-padding":"0.25rem","--ir-c-btn-font-size":"0.725rem"},size:"small",variant:"danger",appearance:"outlined"},t("span",null,this.financial.cancelation_penality_as_if_today<0?"Refund":"Charge"," "),v(this.currencySymbol,Math.abs(this.financial.cancelation_penality_as_if_today))):this.financial.due_amount!==0&&t("ir-custom-button",{onClickHandler:()=>{this.payBookingBalance.emit({booking_nbr:this.bookingNumber,payment:{amount:this.financial.due_amount,currency:y.property.currency,date:fe().format("YYYY-MM-DD"),designation:null,payment_method:null,payment_type:{code:"001",description:null,operation:null},id:-1,reference:""}})},style:{"--ir-c-btn-height":"fit-content","--ir-c-btn-padding":"0.25rem","--ir-c-btn-font-size":"0.725rem"},size:"small",variant:"danger",appearance:"outlined"},v(this.currencySymbol,this.financial.due_amount))))}};Uo.style=Ho;const jo=".sc-ir-billing-h{display:flex;flex-direction:column;height:100%}.billing__container.sc-ir-billing{display:flex;flex-direction:column;gap:var(--wa-space-l)}.billing__section-title-row.sc-ir-billing{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem}.billing__section-title.sc-ir-billing{margin:0;padding:0;font-family:var(--wa-font-family-heading);font-weight:var(--wa-font-weight-heading);line-height:var(--wa-line-height-condensed);text-wrap:balance;font-size:var(--wa-font-size-m)}.billing__actions-row.sc-ir-billing{display:flex;align-items:center;justify-content:flex-end;gap:0.5rem}.billing__invoice-nbr.sc-ir-billing{margin:0;padding:0}.billing__invoice-nbr.--secondary.sc-ir-billing{font-size:0.75rem}.billing__price-col.sc-ir-billing{text-align:end !important}.billing__cards.sc-ir-billing{display:flex;flex-direction:column;gap:var(--wa-space-m);padding-bottom:var(--wa-space-l) !important}.billing__card.sc-ir-billing{display:block}.billing__card-header.sc-ir-billing{display:flex;justify-content:space-between;align-items:center;margin-bottom:0.5rem}.billing__card-header-info.sc-ir-billing{display:flex;flex-direction:column}.billing__card-number.sc-ir-billing{margin:0;font-weight:var(--wa-font-weight-heading);font-family:var(--wa-font-family-heading)}.billing__card-type.sc-ir-billing{margin:0;font-size:var(--wa-font-size-xs);color:var(--wa-color-text-secondary)}.billing__card-download-btn.sc-ir-billing{display:flex;align-items:center}.billing__card-details.sc-ir-billing{display:flex;gap:var(--wa-space-xs);justify-content:space-between}.billing__card-detail.sc-ir-billing{display:flex;flex-direction:column}.billing__card-detail-label.sc-ir-billing{margin:0;font-size:var(--wa-font-size-xs);color:var(--wa-color-text-quiet)}.billing__card-detail-label.--amount.sc-ir-billing{text-align:end !important}.billing__card-detail-value.sc-ir-billing{margin:0;font-weight:var(--wa-font-weight-regular);font-size:var(--wa-font-size-s)}.billing__card-void-btn.sc-ir-billing{flex:1 1 0%}.billing__card-footer.sc-ir-billing{display:flex}.table-container.sc-ir-billing{display:none}.billing__card.sc-ir-billing::part(footer){padding-top:1rem;padding-bottom:1rem}@media (min-width: 768px){.billing__cards.sc-ir-billing{display:none}.table-container.sc-ir-billing{display:block}}";const Vo=jo;const Go=".ir-table-row.sc-ir-billing td.sc-ir-billing{padding:0.5rem 1rem !important;text-align:left;z-index:2;background-color:var(--wa-color-surface-default);white-space:nowrap;color:var(--wa-color-text-normal);box-sizing:border-box}.table--container.sc-ir-billing{flex:1 1 0%}.table--container.sc-ir-billing{overflow-x:auto}.table.sc-ir-billing td.sc-ir-billing{border-top:0;border-bottom:1px solid var(--wa-color-neutral-border-quiet, #abaeb9);transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.table.sc-ir-billing tbody.sc-ir-billing tr.sc-ir-billing:last-child>td.sc-ir-billing{border-bottom:0 !important}.table.sc-ir-billing thead.sc-ir-billing th.sc-ir-billing{border:none !important;background:#ececec;background:color-mix(in oklab, var(--wa-color-neutral-fill-quiet, #f1f2f3) 60%, transparent);color:#374151;padding:0.5rem 1rem !important;text-align:left}.data-table.sc-ir-billing thead.sc-ir-billing th.sc-ir-billing{box-sizing:border-box;background:var(--wa-color-surface-default) !important;padding-top:0.5rem !important;padding-bottom:0.5rem !important;border-bottom:1px solid var(--wa-color-neutral-90) !important;color:var(--wa-color-text-normal)}.data-table.sc-ir-billing .empty-row.sc-ir-billing{height:50vh !important;text-align:center;color:var(--wa-color-gray-60)}.data-table--pagination.sc-ir-billing{padding:0.5rem 1rem;position:sticky;bottom:0;background:var(--wa-color-surface-default);border-top:1px solid var(--wa-color-neutral-90)}.selected.sc-ir-billing td.sc-ir-billing{background:#e3f3fa !important}.selected.sc-ir-billing td.sc-ir-billing{color:var(--gray-dark) !important;transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.sortable.sc-ir-billing,.ir-table-row.sc-ir-billing{transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.sortable.sc-ir-billing{text-transform:capitalize}.sortable.sc-ir-billing:hover{color:#212529;background-color:#e2e8f0 !important;border-color:#dae0e5;cursor:pointer}.ir-table-row.sc-ir-billing:hover td.sc-ir-billing{background:#e2e6ea3f !important;background:var(--wa-color-neutral-fill-quiet, #f1f2f3) !important}.sortable.sc-ir-billing:active{color:#212529;background-color:#e2e8f0;border-color:#d3d9df}.sortable.sc-ir-billing svg.sc-ir-billing{color:var(--blue)}.sticky-column.sc-ir-billing{position:sticky !important;right:0;background-color:white}";const qo=Go;const Ko=class{constructor(t){e(this,t);this.billingClose=a(this,"billingClose",7)}booking;isOpen=null;isLoading="page";invoiceInfo;selectedInvoice=null;billingClose;bookingService=new l;componentWillLoad(){this.init()}async handleInvoiceCreation(e){e.stopImmediatePropagation();e.stopPropagation();this.invoiceInfo=await this.bookingService.getBookingInvoiceInfo({booking_nbr:this.booking.booking_nbr})}async init(){try{this.isLoading="page";this.invoiceInfo=await this.bookingService.getBookingInvoiceInfo({booking_nbr:this.booking.booking_nbr})}catch(e){console.error(e)}finally{this.isLoading=null}}async voidInvoice(e){this.isLoading="void";e.stopImmediatePropagation();e.stopPropagation();await this.bookingService.voidInvoice({invoice_nbr:this.selectedInvoice,reason:""});this.invoiceInfo=await this.bookingService.getBookingInvoiceInfo({booking_nbr:this.booking.booking_nbr});this.isLoading=null;this.selectedInvoice=null}get invoices(){const e=[];for(const t of this.invoiceInfo.invoices){if(t.status.code==="VALID"){e.push(t)}else{e.push({...t,status:{code:"VALID",description:""}});e.push({...t,date:t.credit_note.date})}}return e.sort(((e,t)=>{const i=fe(e.date??e.credit_note?.date,"YYYY-MM-DD");const a=fe(t.date??t.credit_note?.date,"YYYY-MM-DD");return i.diff(a)}))}async printInvoice(e){try{const{My_Result:t}=await this.bookingService.printInvoice({invoice_nbr:e.nbr,mode:e.credit_note?"creditnote":"invoice"});window.open(t.url)}catch(e){console.error(e)}}render(){if(this.isLoading==="page"){return t("div",{class:"drawer__loader-container"},t("ir-spinner",null))}return t(r,null,t("div",{class:"billing__container"},t("section",null,t("div",{class:"billing__section-title-row"},t("h4",{class:"billing__section-title"},"Issued documents"),t("ir-custom-button",{variant:"brand",onClickHandler:e=>{e.stopImmediatePropagation();e.stopPropagation();this.isOpen="invoice"}},"Issue invoice")),t("div",{class:"table-container"},t("table",{class:"table"},t("thead",null,t("tr",null,t("th",null,"Date"),t("th",null,"Number"),t("th",{class:"billing__price-col"},"Amount"),t("th",null))),t("tbody",null,this.invoices?.map((e=>{const i=e.status.code==="VALID";return t("tr",{class:"ir-table-row"},t("td",null,e.status.code==="VALID"?fe(e.date,"YYYY-MM-DD").format("MMM DD, YYYY"):fe(e.credit_note.date,"YYYY-MM-DD").format("MMM DD, YYYY")),t("td",null,t("p",{class:"billing__invoice-nbr"},t("b",null,i?"Invoice":"Credit note",":")," ",i?e.nbr:e.credit_note.nbr),!i&&t("p",{class:"billing__invoice-nbr --secondary"},e.nbr)),t("td",{class:"billing__price-col"},t("span",{class:"ir-price",style:{fontWeight:"400"}},v(e.currency.symbol,e.total_amount))),t("td",null,t("div",{class:"billing__actions-row"},t("wa-dropdown",{"onwa-hide":e=>{e.stopImmediatePropagation();e.stopPropagation()},"onwa-select":async t=>{switch(t.detail.item.value){case"print":this.printInvoice(e);break;case"void":this.selectedInvoice=e.nbr;break}}},t("h3",null,"Issued by: ",e.credit_note?e.credit_note.user:e.user),t("wa-divider",null),t("h3",null,"Actions"),t("wa-dropdown-item",{value:"print"},"Print to pdf",be("/Print_Invoice")&&t("wa-spinner",{slot:"details"})),i&&!e.credit_note&&t("wa-dropdown-item",{variant:"danger",value:"void"},"Void with credit note"),t("ir-custom-button",{slot:"trigger",id:`pdf-${e.system_id}`,variant:"neutral",appearance:"plain"},t("wa-icon",{name:"ellipsis-vertical",style:{fontSize:"1rem"}}))))))}))))),t("div",{class:"billing__cards"},this.invoices?.map((e=>{const i=e.status.code==="VALID";return t("wa-card",{key:e.nbr,class:"billing__card"},t("div",{class:"billing__card-header"},t("div",{class:"billing__card-header-info"},t("p",{class:"billing__card-number"},i?"Invoice":"Credit note",":",i?e.nbr:e.credit_note.nbr),t("p",{class:"billing__card-type"},i?"":e.nbr)),t("wa-tooltip",{for:`mobile-pdf-${e.system_id}`},"Download pdf"),t("ir-custom-button",{onClickHandler:()=>this.printInvoice(e),loading:be("/Print_Invoice"),id:`mobile-pdf-${e.system_id}`,variant:"neutral",appearance:"plain",class:"billing__card-download-btn"},t("wa-icon",{name:"file-pdf",style:{fontSize:"1rem"}}))),t("div",{class:"billing__card-details"},t("div",{class:"billing__card-detail"},t("p",{class:"billing__card-detail-label"},"Date"),t("p",{class:"billing__card-detail-value"}," ",i?fe(e.date,"YYYY-MM-DD").format("MMM DD, YYYY"):fe(e.credit_note.date,"YYYY-MM-DD").format("MMM DD, YYYY"))),t("div",{class:"billing__card-detail"},t("p",{class:"billing__card-detail-label --amount"},"Amount"),t("p",{class:"billing__card-detail-value"},v(e.currency.symbol,e.total_amount??0)))),i&&!e.credit_note&&t("div",{slot:"footer",class:"billing__card-footer"},t("ir-custom-button",{onClickHandler:()=>{this.selectedInvoice=e.nbr},variant:"danger",appearance:"outlined",class:"billing__card-void-btn"},"Void with credit note")))}))),this.invoiceInfo.invoices?.length===0&&t("ir-empty-state",null))),t("ir-invoice",{invoiceInfo:this.invoiceInfo,onInvoiceClose:e=>{e.stopImmediatePropagation();e.stopPropagation();this.isOpen=null},open:this.isOpen==="invoice",booking:this.booking}),t("ir-dialog",{label:"Alert",open:this.selectedInvoice!==null,lightDismiss:false,onIrDialogHide:e=>{e.stopImmediatePropagation();e.stopPropagation()},onIrDialogAfterHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.selectedInvoice=null}},t("p",null,"Confirm that you want to void this invoice and generate a corresponding credit note."),t("div",{slot:"footer",class:"ir-dialog__footer"},t("ir-custom-button",{"data-dialog":"close",size:"medium",appearance:"filled",variant:"neutral"},"Cancel"),t("ir-custom-button",{loading:this.isLoading==="void",onClickHandler:this.voidInvoice.bind(this),size:"medium",variant:"danger"},"Confirm"))))}};Ko.style=Vo+qo;const Wo=".sc-ir-billing-drawer-h{display:block}";const Xo=Wo;const Jo=class{constructor(t){e(this,t);this.billingClose=a(this,"billingClose",7)}open;booking;billingClose;render(){return t("ir-drawer",{key:"65aaa2d676e387aa72639c23b041a9233e1f137e",style:{"--ir-drawer-width":"50rem","--ir-drawer-background-color":"var(--wa-color-surface-default)","--ir-drawer-padding-left":"var(--spacing)","--ir-drawer-padding-right":"var(--spacing)","--ir-drawer-padding-top":"var(--spacing)","--ir-drawer-padding-bottom":"var(--spacing)"},onDrawerHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.billingClose.emit()},open:this.open,label:"Billing"},this.open&&t("ir-billing",{key:"dd437f7195c0638422cfadd4affc913db22f26c0",booking:this.booking}))}};Jo.style=Xo;const Qo=".sc-ir-booked-by-cell-h{box-sizing:border-box !important}.sc-ir-booked-by-cell-h *.sc-ir-booked-by-cell,.sc-ir-booked-by-cell-h *.sc-ir-booked-by-cell::before,.sc-ir-booked-by-cell-h *.sc-ir-booked-by-cell::after{box-sizing:inherit !important;padding:0;margin:0}[hidden].sc-ir-booked-by-cell{display:none !important}.sc-ir-booked-by-cell-h{display:block;font-size:0.93rem}[display='inline'].sc-ir-booked-by-cell-h{display:inline-flex;align-items:center;gap:1rem}.booked-by-source__logo.sc-ir-booked-by-cell{width:1.5625rem}.booked-by-cell__description.sc-ir-booked-by-cell{font-size:0.875rem}.cell-label.sc-ir-booked-by-cell{font-weight:700}.booked-by-source__private-note.sc-ir-booked-by-cell{height:0.5rem;width:0.5rem;border-radius:50%;background:rgb(244, 213, 82);display:inline-flex;padding:0;margin:0}.booked-by-source__container.sc-ir-booked-by-cell{display:flex;align-items:center;gap:0.5rem}";const Zo=Qo;const en=class{constructor(t){e(this,t);this.guestSelected=a(this,"guestSelected",7)}label;cellId;display="block";guest;identifier;totalPersons;promoKey;showRepeatGuestBadge=false;showPersons=false;showPrivateNoteDot=false;showLoyaltyIcon=false;showPromoIcon=false;clickableGuest=false;guestSelected;handleGuestClick(e){e.stopImmediatePropagation();e.stopPropagation();this.guestSelected.emit(this.identifier)}render(){const e=`repeat-guest-badge-${this.guest.id}_${this.cellId??this.identifier}`;const a=`loyalty-badge-${this.guest.id}_${this.cellId??this.identifier}`;const o=`coupon-badge-${this.guest.id}_${this.cellId??this.identifier}`;const n=`${this.guest.first_name} ${this.guest.last_name}`;return t(i,{key:"ae66869cecfa275164d80114ea49378c3613e8b1"},this.label&&t("p",{key:"df3d5cf589b76ee69b29a30630d872ca7c705c77",class:"cell-label"},this.label,":"),t("div",{key:"4d640e45802c989821a65a0b0b05319d3afda6df",class:"booked-by-source__container"},this.clickableGuest?t("ir-custom-button",{size:"medium",onClickHandler:this.handleGuestClick.bind(this),variant:"brand",appearance:"plain",link:true},n):t("p",null,n),this.showRepeatGuestBadge&&t(r,{key:"b2a3be7804ea38f1f1e59c166bff167233bf97e7"},t("wa-tooltip",{key:"8b1eb802d550da9ef06f954284b36cdee0070a99",for:e},`${g.entries.Lcz_BookingsNbr}`.replace("%1",this.guest.nbr_confirmed_bookings.toString())),t("wa-icon",{key:"9377463552fd6cc68980562038fb9809ab0d3673",name:"heart",style:{color:"#FB0AAD"},id:e})),this.showPersons&&t("p",{key:"cec7a53649be7d3c2104d001e41df6ba1145abde"},this.totalPersons,g.entries.Lcz_P),this.showPrivateNoteDot&&t("span",{key:"50ff48a31ca318765a9b5a2d381903a80cc01b0a",class:"booked-by-source__private-note"})),t("div",{key:"a7a212c61c12d008e11cc3c47c12dde2f10981cf",class:"booked-by-source__container"},this.showLoyaltyIcon&&t(r,{key:"1c8ae79712b9c5ab14708e3345dbe92720ce1752"},t("wa-tooltip",{key:"c657d3608494bf63403e1da8294bb0c6569c3dfc",for:a},g.entries.Lcz_LoyaltyDiscountApplied),t("wa-icon",{key:"86feaae5d196bbe798463e07ba046fd9e41f990d",name:"heart",variant:"regular",style:{color:"#fc6c85"},id:a})),this.showPromoIcon&&t(r,{key:"7d79511eda8a350a4e4ec94efea36ab644c0bcc8"},t("wa-tooltip",{key:"bfe1224c4297c67b9627a44754287eb08acbb525",for:o},g.entries.Lcz_Coupon,": ",this.promoKey),t("wa-icon",{key:"3e7df16cd417ce88fa6c5d9db7aabbafeeb78330",id:o,name:"ticket"}))))}};en.style=Zo;const tn=".sc-ir-booked-on-cell-h{box-sizing:border-box !important}.sc-ir-booked-on-cell-h *.sc-ir-booked-on-cell,.sc-ir-booked-on-cell-h *.sc-ir-booked-on-cell::before,.sc-ir-booked-on-cell-h *.sc-ir-booked-on-cell::after{box-sizing:inherit !important;padding:0;margin:0}[hidden].sc-ir-booked-on-cell{display:none !important}.sc-ir-booked-on-cell-h{display:flex;flex-direction:column;text-align:center;width:fit-content;font-size:0.93rem}[display='inline'].sc-ir-booked-on-cell-h{display:flex;gap:0.5rem;flex-direction:row;align-items:center;text-align:center}.cell-label.sc-ir-booked-on-cell{font-weight:700}@media (min-width: 1024px){.booked-on-cell__time.sc-ir-booked-on-cell{font-size:0.875rem}}";const an=tn;const rn=class{constructor(t){e(this,t)}display="block";bookedOn;label;render(){const{date:e,hour:a,minute:r}=this.bookedOn;return t(i,{key:"d619499ce1f0520d2fa16cf2b382c04324db46d1"},this.label&&t("p",{key:"3b9dcdf2142c1a950a5b72cb8b7e109b60bac63c",class:"cell-label"},this.label,":"),t("p",{key:"8344673df5f38cd53d3a07fca4bc6edb6c50ad96",class:"booked-on-cell__date"},fe(e,"YYYY-MM-DD").format("DD MMM YYYY")),t("p",{key:"7eeaf741e35fdb3da59360594e9d7ada8062e406",class:"booked-on-cell__time"},Me(a.toString(),r.toString())))}};rn.style=an;const on=".sc-ir-booking-billing-recipient-h{display:block;padding:0 !important;box-sizing:border-box}.billing-recipient__room.sc-ir-booking-billing-recipient::part(label){display:flex;align-items:center;gap:var(--wa-space-xl);width:100%}.billing-recipient__guest-name.sc-ir-booking-billing-recipient{font-weight:500}.billing-recipient__room-details.sc-ir-booking-billing-recipient{display:flex;gap:6px;align-items:center;font-size:0.875rem;color:var(--wa-color-neutral-600)}.billing-recipient__roomtype.sc-ir-booking-billing-recipient{font-weight:600}";const nn=on;const sn=class{constructor(t){e(this,t);this.recipientChange=a(this,"recipientChange",7)}booking;selectedRecipient;rooms=[];recipientChange;initialValue;bookingCompanyFormRef;componentWillLoad(){this.initializeDefaultValue()}handleBookingChange(){this.initializeDefaultValue()}initializeDefaultValue(){this.initialValue="guest";this.selectedRecipient=this.initialValue;this.filterRoomGuests()}handleRecipientChange(e){this.selectedRecipient=e;switch(e){case"company":if(!this.booking.company_name){this.bookingCompanyFormRef.openCompanyForm();return}break}this.recipientChange.emit(this.selectedRecipient)}filterRoomGuests(){const e=e=>e?.toLocaleLowerCase()?.trim();const{guest:t}=this.booking;let i=[];const a=new Set;const r=`${e(t.first_name)}_${e(t.last_name)}`;a.add(r);for(const t of this.booking.rooms){const r=`${e(t.guest.first_name)}_${e(t.guest.last_name)}`;if(a.has(r)){continue}a.add(r);i.push(t)}this.rooms=[...i]}render(){return t(i,{key:"713d9a671f2021013ea5af607dabf3b26bc48bcd"},t("wa-radio-group",{key:"1809c2f56d20c721544a9004da28e64d390056f6",defaultValue:this.initialValue,onchange:e=>this.handleRecipientChange(e.target.value),label:"Bill to",orientation:"vertical",name:`${this.booking?.booking_nbr}-bill-to`,value:this.selectedRecipient,size:"small"},t("wa-radio",{key:"1f8c6f434d3a0316b0742573f70161c6f138bd1f",appearance:"button",value:"guest"},this.booking?.guest.first_name," ",this.booking.guest.last_name),this.rooms.map(((e,i)=>t("wa-radio",{appearance:"button",class:"billing-recipient__room",value:`room__${e.guest.first_name} ${e.guest.last_name}`,key:e.guest?.id??`guest_${i}`},t("span",{class:"billing-recipient__guest-name"},e.guest.first_name," ",e.guest.last_name)))),t("wa-radio",{key:"24cbe0d8ca14911044f4d3ebe1c423c8fedb97da",appearance:"button",value:"company"},this.booking.company_name?this.booking.company_name:"Company")),t("ir-booking-company-dialog",{key:"93041cc8d18bde25da17a6d0cc99c86c3da17547",onCompanyFormClosed:()=>{if(this.selectedRecipient==="company"&&!this.booking.company_name){this.handleRecipientChange(this.initialValue)}},onResetBookingEvt:e=>{this.booking={...e.detail};if(!this.booking.company_name){this.handleRecipientChange(this.initialValue)}},booking:this.booking,ref:e=>this.bookingCompanyFormRef=e}))}static get watchers(){return{booking:["handleBookingChange"]}}};sn.style=nn;const ln=".sc-ir-booking-company-dialog-h{display:block}";const cn=ln;const dn=class{constructor(t){e(this,t);this.companyFormClosed=a(this,"companyFormClosed",7);this.resetBookingEvt=a(this,"resetBookingEvt",7)}booking;open;companyFormClosed;resetBookingEvt;async openCompanyForm(){this.open=true}render(){const e=`${this.booking.booking_nbr}-${pe()}`;return t("ir-dialog",{key:"47d18b8a195033f152c68726aec92cca5bd194ef",open:this.open,onIrDialogHide:e=>{e.stopPropagation();e.stopImmediatePropagation();this.open=false;this.companyFormClosed.emit()},label:"Company",id:"dialog-overview"},this.open&&t("ir-booking-company-form",{key:"fb7f36e99acd538beb349d8596ea297e796ddfc8",onResetBookingEvt:e=>{e.stopImmediatePropagation();e.stopPropagation();this.resetBookingEvt.emit(e.detail)},formId:e,booking:this.booking}),t("div",{key:"c4e936c81f21159727cc2b39a6c12418eb2e77fa",slot:"footer",class:"ir-dialog__footer"},t("ir-custom-button",{key:"c216683b25b9f7c4c6ed8cf4127773aad5babdcf",size:"medium",appearance:"filled",variant:"neutral","data-dialog":"close"},"Cancel"),t("ir-custom-button",{key:"7140bdb608f004f41e9523f7f14d995d4e8e4978",type:"submit",form:e,loading:be("/Do_Reservation"),size:"medium",variant:"brand"},"Save")))}};dn.style=cn;const hn=".sc-ir-booking-company-form-h{display:block}.booking-company__form.sc-ir-booking-company-form{display:flex;flex-direction:column;gap:1rem}";const un=hn;const pn=class{constructor(t){e(this,t);this.resetBookingEvt=a(this,"resetBookingEvt",7)}booking;formId;open;isLoading;formData;resetBookingEvt;bookingService=new l;componentWillLoad(){this.formData={company_name:this.booking.company_name,company_tax_nbr:this.booking.company_tax_nbr}}updateGuest(e){this.formData={...this.formData,...e}}async saveCompany(){try{const e={assign_units:true,is_pms:true,is_direct:this.booking.is_direct,is_backend:true,is_in_loyalty_mode:this.booking.is_in_loyalty_mode,promo_key:this.booking.promo_key,extras:this.booking.extras,agent:this.booking.agent,booking:{...this.formData,from_date:this.booking.from_date,to_date:this.booking.to_date,remark:this.booking.remark,booking_nbr:this.booking.booking_nbr,property:this.booking.property,booked_on:this.booking.booked_on,source:this.booking.source,rooms:this.booking.rooms,currency:this.booking.currency,arrival:this.booking.arrival,guest:this.booking.guest},pickup_info:this.booking.pickup_info};await this.bookingService.doReservation(e);this.resetBookingEvt.emit({...this.booking,...this.formData});this.open=false}catch(e){}}render(){return t("form",{key:"142ffb0198b805299a8200073a0118be4f8b300e",id:this.formId,onSubmit:e=>{e.preventDefault();this.saveCompany()},class:"booking-company__form"},t("ir-custom-input",{key:"5da547c1478fc848e23336edb7585a9c9f56d0de",value:this.formData.company_name,"onText-change":e=>this.updateGuest({company_name:e.detail}),label:"Name",autofocus:true,placeholder:"XYZ LTD"}),t("ir-custom-input",{key:"ab6ab47b6151051ef291b52918a3870a11404651",value:this.formData.company_tax_nbr,"onText-change":e=>this.updateGuest({company_tax_nbr:e.detail}),label:"Tax ID",placeholder:"VAT 123456"}))}};pn.style=un;const fn=".sc-ir-booking-details-h{overflow-x:hidden;--ir-dialog-max-width:20rem;text-align:start;padding:var(--wa-space-l);position:relative;font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important}.sc-ir-booking-details-h *.sc-ir-booking-details{box-sizing:border-box;font-family:inherit !important;font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important}.font-medium.sc-ir-booking-details{font-weight:600}.sc-ir-booking-details-h th.sc-ir-booking-details{font-weight:600}.booking-details__date-view-header.sc-ir-booking-details{font-size:1.1rem !important}.booking-details__booking-info.sc-ir-booking-details{display:grid;padding:var(--wa-space-m);gap:var(--wa-space-l)}.booking-details__info-column.sc-ir-booking-details{display:flex;flex-direction:column;gap:var(--wa-space-l)}@media (min-width: 890px){.booking-details__booking-info.sc-ir-booking-details{grid-template-columns:repeat(2, 1fr)}}@media (min-width: 1024px){.booking-details__booking-info.sc-ir-booking-details{gap:var(--wa-space-xl)}}.card.room-group.sc-ir-booking-details{margin-bottom:1rem !important}.card.room-group.sc-ir-booking-details:last-child{margin-bottom:1.81rem !important}.h-28.sc-ir-booking-details{height:2rem}.mx-01.sc-ir-booking-details{--m:5px;margin-right:var(--m) !important;margin-left:var(--m) !important}.date-margin.sc-ir-booking-details{margin-right:5px}.pickup-margin.sc-ir-booking-details{margin-bottom:7px !important}.header-date.sc-ir-booking-details{padding-left:5px !important}.pointer.sc-ir-booking-details{cursor:pointer}.sc-ir-booking-details:root{--sidebar-width:50rem}.loading-container.sc-ir-booking-details{height:100%;width:100%;display:flex;justify-content:center;align-items:center;margin:0;padding:0}.sm-padding-right.sc-ir-booking-details{padding-right:0.2rem}.sm-padding-left.sc-ir-booking-details{padding-left:0.2rem}.sm-padding-top.sc-ir-booking-details{padding-top:0.2rem}.sm-padding-bottom.sc-ir-booking-details{padding-bottom:0.2rem}.info-notes.sc-ir-booking-details{list-style:none;padding-left:0}.light-blue-bg.sc-ir-booking-details{background-color:#acecff;padding:0.2rem 0.3rem}.iframeHeight.sc-ir-booking-details{height:17.5rem}.dialog-title.sc-ir-booking-details{width:fit-content}";const bn=fn;const gn=class{constructor(t){e(this,t);this.toast=a(this,"toast",7);this.bookingChanged=a(this,"bookingChanged",7);this.closeSidebar=a(this,"closeSidebar",7)}get element(){return o(this)}language="en";ticket="";bookingNumber="";propertyid;is_from_front_desk=false;p;hasPrint=false;hasReceipt=false;hasDelete=false;hasMenu=false;hasRoomEdit=false;hasRoomDelete=false;hasRoomAdd=false;hasCheckIn=false;hasCheckOut=false;hasCloseButton=false;bookingItem=null;statusData=[];showPaymentDetails;booking;countries;calendarData={};guestData=null;rerenderFlag=false;sidebarState=null;sidebarPayload;isUpdateClicked=false;pms_status;isPMSLogLoading=false;paymentActions;property_id;selectedService;bedPreference;roomGuest;modalState=null;departureTime;paymentEntries;splitIndex;toast;bookingChanged;closeSidebar;bookingService=new l;roomService=new we;paymentService=new Ee;token=new me;printingBaseUrl="https://gateway.igloorooms.com/PrintBooking/%1/printing?id=%2";modalRef;paymentFolioRef;componentWillLoad(){if(this.ticket!==""){this.token.setToken(this.ticket);this.initializeApp()}}ticketChanged(e,t){if(e===t){return}this.token.setToken(this.ticket);this.initializeApp()}handleSideBarEvents(e){this.sidebarState=e.detail.type;this.sidebarPayload=e.detail.payload;if(this.sidebarState==="payment-folio"){this.paymentFolioRef.openFolio()}}handleIconClick(e){const t=e.target;switch(t.id){case"pickup":this.sidebarState="pickup";return;case"close":this.closeSidebar.emit(null);return;case"email":this.modalState={type:"email",message:g.entries.Lcz_EmailBookingto.replace("%1",this.booking.guest.email),loading:be("/Send_Booking_Confirmation_Email")};this.modalRef.openModal();return;case"print":this.openPrintingScreen({mode:"printing"});return;case"invoice":this.sidebarState="invoice";return;case"book-delete":return;case"menu":window.location.href="https://x.igloorooms.com/manage/acbookinglist.aspx";return;case"room-add":this.bookingItem={ID:"",NAME:this.booking.guest.last_name,EMAIL:this.booking.guest.email,PHONE:this.booking.guest.mobile,REFERENCE_TYPE:"",FROM_DATE:this.booking.from_date,ARRIVAL:this.booking.arrival,TO_DATE:this.booking.to_date,TITLE:`${g.entries.Lcz_AddingUnitToBooking}# ${this.booking.booking_nbr}`,defaultDateRange:{fromDate:new Date(this.booking.from_date),fromDateStr:"",toDate:new Date(this.booking.to_date),toDateStr:"",dateDifference:0,message:""},event_type:"ADD_ROOM",booking:this.booking,BOOKING_NUMBER:this.booking.booking_nbr,ADD_ROOM_TO_BOOKING:this.booking.booking_nbr,GUEST:this.booking.guest,message:this.booking.remark,SOURCE:this.booking.source,ROOMS:this.booking.rooms};return;case"extra_service_btn":this.sidebarState="extra_service";return;case"add-payment":return}}async handleResetExposedCancellationDueAmount(e){e.stopImmediatePropagation();e.stopPropagation();const t=await this.paymentService.GetExposedCancellationDueAmount({booking_nbr:this.booking.booking_nbr,currency_id:this.booking.currency.id});this.paymentActions=[...t]}handleEditInitiated(e){this.bookingItem=e.detail}handleRoomGuestsUpdate(e){const{identifier:t,guests:i}=e.detail;const a=[...this.booking.rooms];let r=a.findIndex((e=>e.identifier===t));if(r===-1){return}const o=a[r];const n={...o,sharing_persons:i};a[r]=n;this.booking={...this.booking,rooms:[...a]};this.splitIndex=T(this.booking.rooms)}async handleResetBooking(e){if(e.detail){this.booking=e.detail;this.splitIndex=T(this.booking.rooms);return}await this.resetBooking()}handleEditExtraService(e){this.selectedService=e.detail;console.log(this.selectedService);this.sidebarState="extra_service"}handleOpenPrintScreen(e){this.openPrintingScreen(e.detail)}setRoomsData(e){let t=new Array;if(e.My_Result?.roomtypes?.length){t=e.My_Result.roomtypes;e.My_Result.roomtypes.forEach((e=>{e.expanded=true}))}this.calendarData.roomsInfo=t}async initializeApp(){try{const[e,t,i,a,r]=await Promise.all([this.roomService.getExposedProperty({id:this.propertyid||0,language:this.language,aname:this.p}),this.roomService.fetchLanguage(this.language),this.bookingService.getCountries(this.language),this.bookingService.getExposedBooking(this.bookingNumber,this.language),this.bookingService.getSetupEntriesByTableNameMulti(["_BED_PREFERENCE_TYPE","_DEPARTURE_TIME","_PAY_TYPE","_PAY_TYPE_GROUP","_PAY_METHOD"])]);this.property_id=e?.My_Result?.id;const{bed_preference_type:o,departure_time:n,pay_type:s,pay_type_group:l,pay_method:c}=this.bookingService.groupEntryTablesResult(r);this.bedPreference=o;this.departureTime=n;this.paymentEntries={types:s,groups:l,methods:c};if(!g?.entries){g.entries=t.entries;g.direction=t.direction}this.countries=i;const d=e?.My_Result;if(d){const{allowed_payment_methods:t,currency:i,allowed_booking_sources:a,adult_child_constraints:r,calendar_legends:o,aname:n}=d;this.printingBaseUrl=this.printingBaseUrl.replace("%1",n).replace("%2",this.bookingNumber);this.calendarData={currency:i,allowed_booking_sources:a,adult_child_constraints:r,legendData:o};this.setRoomsData(e);const s=["001","004"];this.showPaymentDetails=t?.some((e=>s.includes(e.code)))}else{console.warn("Room response is missing 'My_Result'.")}this.guestData=a.guest;this.booking=a;this.splitIndex=T(this.booking.rooms)}catch(e){console.error("Error initializing app:",e)}}async openPrintingScreen(e,t="new"){const{mode:i}=e;if(t==="old"){if(i==="invoice"){return window.open(`https://x.igloorooms.com/manage/AcBookingEdit.aspx?IRID=${encodeURIComponent(this.booking.system_id)}&&PM=I&TK=${encodeURIComponent(this.ticket)}`)}return window.open(`https://x.igloorooms.com/manage/AcBookingEdit.aspx?IRID=${encodeURIComponent(this.booking.system_id)}&&PM=B&TK=${encodeURIComponent(this.ticket)}`)}let a=this.printingBaseUrl;a+=`&mode=${encodeURIComponent(i)}`;if("payload"in e&&e.payload){const t=e.payload;const i=Object.entries(t).map((([e,t])=>{const i=encodeURIComponent(e);const a=encodeURIComponent(String(t));return`${i}=${a}`})).join("&");a+=`&${i}`}const{data:r}=await ye.post(`Get_ShortLiving_Token`);if(!r.ExceptionMsg){a+=`&token=${encodeURIComponent(r.My_Result)}`}window.open(a)}handleCloseBookingWindow(){this.bookingItem=null}handleDeleteFinish=e=>{this.booking={...this.booking,rooms:this.booking.rooms.filter((t=>t.identifier!==e.detail))};this.splitIndex=T(this.booking.rooms)};async resetBooking(){try{const e=await this.bookingService.getExposedBooking(this.bookingNumber,this.language);this.booking={...e};this.splitIndex=T(this.booking.rooms);this.bookingChanged.emit(this.booking)}catch(e){console.log(e)}}async handleModalConfirm(){switch(this.modalState.type){case"email":await this.bookingService.sendBookingConfirmationEmail(this.booking.booking_nbr,this.language);break}this.modalState=null;this.modalRef.closeModal()}computeRoomGroups(e){const t=new Map;e.forEach(((e,i)=>t.set(e.identifier,i)));if(!e.length){return{groups:[],indexById:t,hasSplitGroups:false}}const i=e=>{let t=Number.MAX_SAFE_INTEGER;for(const i of e){const e=Date.parse(i?.from_date??"");if(!Number.isNaN(e)){t=Math.min(t,e)}}return t};const a=this.splitIndex??T(e);if(!a){const a=[...e].sort(((e,i)=>{const a=Date.parse(e?.from_date??"")-Date.parse(i?.from_date??"");if(!Number.isNaN(a)&&a!==0){return a}return(t.get(e.identifier)??0)-(t.get(i.identifier)??0)}));return{groups:[{rooms:a,order:0,isSplit:false,sortKey:i(a)}],indexById:t,hasSplitGroups:false}}const r=new Map(e.map((e=>[e.identifier,e])));const o=[];const n=new Set;for(const e of a.heads){const s=a.chainOf.get(e)??[e];const l=s.map((e=>r.get(e))).filter((e=>Boolean(e)));if(!l.length)continue;const c=s.some((e=>{const t=a.parentOf.get(e);const i=a.childrenOf.get(e)??[];return Boolean(t)||i.length>0}))||l.some((e=>Boolean(e?.is_split)));if(c){l.forEach((e=>n.add(e.identifier)));const e=Math.min(...l.map((e=>t.get(e.identifier)??Number.MAX_SAFE_INTEGER)));o.push({rooms:l,order:e,sortKey:i(l),isSplit:true})}}for(const a of e){if(!n.has(a.identifier)){const e=t.get(a.identifier)??Number.MAX_SAFE_INTEGER;const r=[a];o.push({rooms:r,order:e,sortKey:i(r),isSplit:false})}}o.sort(((e,t)=>{if(e.sortKey!==t.sortKey){return e.sortKey-t.sortKey}return e.order-t.order}));const s=o.some((e=>e.isSplit));if(!s){const e=o.map((e=>e.rooms)).reduce(((e,t)=>e.concat(t)),[]).sort(((e,i)=>{const a=Date.parse(e?.from_date??"")-Date.parse(i?.from_date??"");if(!Number.isNaN(a)&&a!==0){return a}return(t.get(e.identifier)??0)-(t.get(i.identifier)??0)}));return{groups:[{rooms:e,order:0,sortKey:i(e),isSplit:false}],indexById:t,hasSplitGroups:false}}return{groups:o,indexById:t,hasSplitGroups:true}}renderRoomItem(e,i,a=true){const r=this.handleRoomCheckin(e);const o=this.handleRoomCheckout(e);return t("ir-room",{key:e.identifier,room:e,property_id:this.property_id,language:this.language,departureTime:this.departureTime,bedPreferences:this.bedPreference,isEditable:this.booking.is_editable,legendData:this.calendarData.legendData,roomsInfo:this.calendarData.roomsInfo,myRoomTypeFoodCat:e.roomtype.name,mealCodeName:e.rateplan.short_name,includeDepartureTime:a,currency:this.booking.currency.symbol,hasRoomEdit:this.hasRoomEdit&&this.booking.status.code!=="003"&&this.booking.is_direct,hasRoomDelete:this.hasRoomDelete&&this.booking.status.code!=="003"&&this.booking.is_direct,hasCheckIn:r,hasCheckOut:o,booking:this.booking,bookingIndex:i,onDeleteFinished:this.handleDeleteFinish})}renderRooms(){const e=this.booking?.rooms??[];if(!e.length){return null}const{groups:i,indexById:a,hasSplitGroups:o}=this.computeRoomGroups(e);if(!o){const e=i[0].rooms;return e.map(((i,o)=>t(r,null,this.renderRoomItem(i,a.get(i.identifier)??o),o<e.length-1?t("wa-divider",null):null)))}return t(r,null,t("div",{class:"d-flex flex-column",style:{gap:"1rem"}},i.map(((e,o)=>{const n=o===i.length-1;return t("div",{class:`${n?"":"room-group"}`,key:`room-group-${e.order}-${o}`},e.rooms.map(((i,o)=>t(r,null,this.renderRoomItem(i,a.get(i.identifier)??o,o===e.rooms.length-1),o<e.rooms.length-1?t("wa-divider",null):null))),!n&&t("wa-divider",{style:{"--width":"3px"}}))}))))}render(){if(!this.booking){return t("div",{class:"loading-container"},t("ir-spinner",null))}const e=this.renderRooms();return[t(r,null,!this.is_from_front_desk&&t(r,null,t("ir-toast",{style:{height:"0"}}),t("ir-interceptor",{style:{height:"0"}}))),t("ir-booking-header",{booking:this.booking,hasCloseButton:this.hasCloseButton,hasDelete:this.hasDelete,hasMenu:this.hasMenu,hasPrint:this.hasPrint,hasReceipt:this.hasReceipt,hasEmail:["001","002"].includes(this.booking?.status?.code)}),t("div",{class:"booking-details__booking-info"},t("div",{class:"booking-details__info-column"},t("ir-reservation-information",{countries:this.countries,booking:this.booking}),t("wa-card",null,t("ir-date-view",{class:"booking-details__date-view-header",slot:"header",from_date:this.booking.from_date,to_date:this.booking.to_date}),this.hasRoomAdd&&this.booking.is_editable&&t(r,null,t("wa-tooltip",{for:"room-add"},"Add unit"),t("ir-custom-button",{slot:"header-actions",id:"room-add",appearance:"plain",size:"small",variant:"neutral"},t("wa-icon",{name:"plus",style:{fontSize:"1rem"},label:"Add unit"}))),e),t("ir-pickup-view",{booking:this.booking}),t("section",null,t("ir-extra-services",{booking:{booking_nbr:this.booking.booking_nbr,currency:this.booking.currency,extra_services:this.booking.extra_services}}))),t("ir-payment-details",{class:"booking-details__info-column",propertyId:this.property_id,paymentEntries:this.paymentEntries,paymentActions:this.paymentActions,booking:this.booking})),t("ir-dialog",{label:"Send Email",onIrDialogHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.modalRef.closeModal();this.modalState=null},ref:e=>this.modalRef=e},t("p",null,this.modalState?.message),t("div",{slot:"footer",class:"ir-dialog__footer"},t("ir-custom-button",{"data-dialog":"close",size:"medium",appearance:"filled",variant:"neutral"},g.entries.Lcz_Cancel),t("ir-custom-button",{loading:be("/Send_Booking_Confirmation_Email"),onClickHandler:e=>{e.stopImmediatePropagation();e.stopPropagation();this.handleModalConfirm()},size:"medium",variant:"brand"},g.entries.Lcz_Confirm))),t("ir-room-guests",{open:this.sidebarState==="room-guest",countries:this.countries,language:this.language,identifier:this.sidebarPayload?.identifier,bookingNumber:this.booking.booking_nbr,roomName:this.sidebarPayload?.roomName,totalGuests:this.sidebarPayload?.totalGuests,sharedPersons:this.sidebarPayload?.sharing_persons,slot:"sidebar-body",checkIn:this.sidebarPayload?.checkin,onCloseModal:()=>this.sidebarState=null}),t("ir-extra-service-config",{open:this.sidebarState==="extra_service",service:this.selectedService,booking:{from_date:this.booking.from_date,to_date:this.booking.to_date,booking_nbr:this.booking.booking_nbr,currency:this.booking.currency},slot:"sidebar-body",onCloseModal:e=>{e.stopImmediatePropagation();e.stopPropagation();this.sidebarState=null;if(this.selectedService){this.selectedService=null}}}),t("ir-pickup",{open:this.sidebarState==="pickup",bookingDates:{from:this.booking.from_date,to:this.booking.to_date},defaultPickupData:this.booking.pickup_info,bookingNumber:this.booking.booking_nbr,numberOfPersons:this.booking.occupancy.adult_nbr+this.booking.occupancy.children_nbr,onCloseModal:()=>{this.sidebarState=null}}),t("ir-billing-drawer",{open:this.sidebarState==="invoice",onBillingClose:e=>{e.stopImmediatePropagation();e.stopPropagation();this.sidebarState=null},booking:this.booking}),t("ir-guest-info-drawer",{onGuestInfoDrawerClosed:()=>{this.sidebarState=null},booking_nbr:this.bookingNumber,email:this.booking?.guest.email,language:this.language,open:this.sidebarState==="guest"}),t("ir-payment-folio",{style:{height:"auto"},bookingNumber:this.booking.booking_nbr,paymentEntries:this.paymentEntries,payment:this.sidebarPayload?.payment,mode:this.sidebarPayload?.mode,ref:e=>this.paymentFolioRef=e,onCloseModal:()=>this.sidebarState=null}),t(r,null,this.bookingItem&&t("igl-book-property",{allowedBookingSources:this.calendarData.allowed_booking_sources,adultChildConstraints:this.calendarData.adult_child_constraints,showPaymentDetails:this.showPaymentDetails,countries:this.countries,currency:this.calendarData.currency,language:this.language,propertyid:this.property_id,bookingData:this.bookingItem,onCloseBookingWindow:()=>this.handleCloseBookingWindow()}))]}handleRoomCheckout(e){if(!y.checkin_enabled||y.is_automatic_check_in_out){return false}return e.in_out.code==="001"}handleRoomCheckin(e){if(!y.checkin_enabled||y.is_automatic_check_in_out){return false}if(!e.unit){return false}if(e.in_out&&e.in_out.code!=="000"){return false}if(fe().isSameOrAfter(fe(e.from_date,"YYYY-MM-DD"),"days")&&fe().isBefore(fe(e.to_date,"YYYY-MM-DD"),"days")){return true}return false}static get watchers(){return{ticket:["ticketChanged"]}}};gn.style=bn;const mn=".sc-ir-booking-email-logs-h{display:block}";const wn=mn;const yn=class{constructor(t){e(this,t)}ticket;data;bookingNumber;token=new me;componentWillLoad(){if(this.ticket){this.token.setToken(this.ticket)}}handleTicketChange(){if(this.ticket){this.token.setToken(this.ticket)}}render(){return t(i,{key:"a9300892ea9cc33eb41c998ac849a4a5479351de",class:"p-1"},t("ir-interceptor",{key:"6a1df67b1c6c0ed7c67222037f68142349fa094d",handledEndpoints:["/Get_Email_log_By_BOOK_NBR"]}),t("ir-toast",{key:"190c1c453d261f4ce21da830cec43957fc495a3c"}),t("div",{key:"7d4111cf9628cc99adede2a4ee9456e525b3034b",class:"d-flex align-items-center mb-1",style:{gap:"0.5rem"}},t("ir-input-text",{key:"e69829f564df5238c68b05c11047c2c9106480b0",class:"m-0",inputContainerStyle:{margin:"0"},value:this.bookingNumber,onTextChange:e=>this.bookingNumber=e.detail,placeholder:"booking number"}),t("ir-button",{key:"f7699fb8bdb2e89a50a1fe2033ea8a50db92aaac",size:"sm",text:"search",onClickHandler:async()=>{const{data:e}=await ye.post("/Get_Email_log_By_BOOK_NBR",{BOOK_NBR:this.bookingNumber});if(e.ExceptionMsg){return}this.data=e.My_Result}})),t("p",{key:"b48b0ff9ac828d9b71316ddba0f3e42aad057633"},JSON.stringify(this.data,null,2)))}static get watchers(){return{ticket:["handleTicketChange"]}}};yn.style=wn;const vn=".sc-ir-booking-extra-note-h{display:block}";const kn=vn;const xn=class{constructor(t){e(this,t);this.closeModal=a(this,"closeModal",7);this.resetBookingEvt=a(this,"resetBookingEvt",7)}open;booking;isLoading=false;note="";closeModal;resetBookingEvt;bookingService=new l;componentWillLoad(){if(this.booking.extras){this.setNote(J(this.booking.extras))}}setNote(e){this.note=e}async savePrivateNote(){try{this.isLoading=true;let e=this.booking.extras||[];const t={key:"private_note",value:this.note};if(e.length===0){e.push(t)}else{const i=e.findIndex((e=>e.key==="private_note"));if(i===-1){e.push(t)}else{e[i]=t}}const i=await this.bookingService.doReservation({assign_units:true,is_pms:true,is_direct:true,is_in_loyalty_mode:false,promo_key:null,booking:this.booking,Is_Non_Technical_Change:true,extras:e});this.resetBookingEvt.emit(i);this.closeDialog()}catch(e){console.error(e)}finally{this.isLoading=false}}async openDialog(){this.open=true}async closeDialog(){this.open=false}render(){return t("ir-dialog",{key:"28fbdc486e3fbcbcef1c02a054d6d379e09dd51e",label:"Private note",open:this.open,onIrDialogHide:()=>{this.open=false}},t("wa-textarea",{key:"41d121c66e91ce04b787a2c3c95ae86b1e9a5aab",size:"small",placeholder:g.entries.Lcz_PrivateNote_MaxChar,defaultValue:this.note,onchange:e=>this.setNote(e.target.value),value:this.note}),t("div",{key:"4366f7b4005d44f497cc430afc68846d754e1844",slot:"footer",class:"ir-dialog__footer"},t("ir-custom-button",{key:"80506040080e616509f25e34a7482eed852a1918","data-dialog":"close",size:"medium",variant:"neutral",appearance:"filled",onClickHandler:()=>this.closeModal.emit(null),class:`flex-fill'}`},g.entries.Lcz_Cancel),t("ir-custom-button",{key:"d019a7c16c61e7f20cc4693254ee8d6f4ab25b44",size:"medium",onClickHandler:()=>this.savePrivateNote(),variant:"brand",loading:this.isLoading},g.entries.Lcz_Save)))}};xn.style=kn;const _n=".sc-ir-booking-guarantee-h{display:block}.sc-ir-booking-guarantee-h{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important}.sc-ir-booking-guarantee-h *.sc-ir-booking-guarantee{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important}.iframeHeight.sc-ir-booking-guarantee{height:max-content;height:22.5rem}";const Dn=_n;const Cn=class{constructor(t){e(this,t)}booking;bookingService;collapsed=false;paymentDetailsUrl="";paymentExceptionMessage="";async componentWillLoad(){}formatCurrency(e,t,i="en-US"){if(!t||e<0){return""}return new Intl.NumberFormat(i,{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}checkPaymentCode(e){return y.allowed_payment_methods?.find((t=>t.code===e))?.description??null}getPaymentMethod(){let e=null;const t=this.booking?.extras?.find((e=>e.key==="payment_code"));if(this.booking.agent){const i=this.booking?.extras?.find((e=>e.key==="agent_payment_mode"));if(i){e=i.value==="001"?g.entries.Lcz_OnCredit:t?this.checkPaymentCode(t.value):null}}else if(t){e=t.value==="000"?"No card info required upon booking":this.checkPaymentCode(t.value)}return e}async handleToggleCollapse(){if(!this.booking.is_direct&&this.booking.channel_booking_nbr&&!this.booking.guest.cci&&!this.collapsed){this.paymentDetailsUrl=await this.bookingService.getPCICardInfoURL(this.booking.booking_nbr)}this.collapsed=!this.collapsed}shouldShowGuarantee(){const e=this.booking.is_direct?this.getPaymentMethod():null;return this.booking.is_direct?Boolean(e||this.booking.guest.cci):true}shouldShowToggleButton(){return!this.booking.is_direct||this.booking.is_direct&&this.booking.guest.cci}renderCreditCardInfo(){const{cci:e}=this.booking.guest;if(!e)return null;return[t("div",null,e&&"Card:"," ",t("span",null,e.nbr||""),e.expiry_month&&" Expiry: ",t("span",null,e.expiry_month||"",e.expiry_year&&"/"+e.expiry_year)),t("div",null,e.holder_name&&"Name:"," ",t("span",null,e.holder_name||""),e.cvc&&" - CVC:"," ",t("span",null,e.cvc||""))]}renderCollapsedContent(){if(this.booking.guest.cci){return this.renderCreditCardInfo()}if(this.paymentDetailsUrl){return t("iframe",{src:this.paymentDetailsUrl,width:"100%",class:"iframeHeight",frameborder:"0",name:"payment"})}return t("div",{class:"text-center"},this.paymentExceptionMessage)}renderOtaGuarantee(){const{ota_guarante:e}=this.booking;if(!e||this.booking.is_direct)return null;return t("div",null,t("ir-label",{content:e.card_type+`${e.is_virtual?" (virtual)":""}`,labelText:`${g.entries.Lcz_CardType}:`}),t("ir-label",{content:e.cardholder_name,labelText:`${g.entries.Lcz_CardHolderName}:`}),t("ir-label",{content:e.card_number,labelText:`${g.entries.Lcz_CardNumber}:`}),t("ir-label",{content:this.formatCurrency(ie(Number(e.meta?.virtual_card_current_balance),Number(e.meta?.virtual_card_decimal_places)),e.meta?.virtual_card_currency_code),labelText:`${g.entries.Lcz_CardBalance}:`}))}render(){if(!this.shouldShowGuarantee()){return null}const e=this.booking.is_direct?this.getPaymentMethod():null;return t("div",{class:"mb-1"},t("div",{class:"d-flex align-items-center"},t("span",{class:"mr-1 font-medium"},g.entries.Lcz_BookingGuarantee,e&&t("span",null,": ",e)),this.shouldShowToggleButton()&&t("ir-button",{id:"drawer-icon","data-toggle":"collapse","data-target":".guarrantee","aria-expanded":this.collapsed?"true":"false","aria-controls":"myCollapse",class:"sm-padding-right pointer",variant:"icon",icon_name:"credit_card",onClickHandler:this.handleToggleCollapse.bind(this)})),t("div",{class:"collapse guarrantee"},this.renderCollapsedContent()),this.renderOtaGuarantee())}};Cn.style=Dn;const Mn=".sc-ir-booking-header-h{display:block}.confirmed.sc-ir-booking-header{color:#fff;display:flex;align-items:center}.bg-ir-green.sc-ir-booking-header{background:#629a4c;padding:0.2rem 0.3rem}.bg-ir-red.sc-ir-booking-header{background:#ff4961;padding:0.2rem 0.3rem}.bg-ir-orange.sc-ir-booking-header{background:#ff9149;padding:0.2rem 0.3rem}";const Sn=Mn;const Yn=class{constructor(t){e(this,t);this.toast=a(this,"toast",7);this.closeSidebar=a(this,"closeSidebar",7);this.resetBookingEvt=a(this,"resetBookingEvt",7);this.openSidebar=a(this,"openSidebar",7)}booking;hasReceipt;hasPrint;hasDelete;hasMenu;hasCloseButton;hasEmail=true;bookingStatus=null;currentDialogStatus;toast;closeSidebar;resetBookingEvt;openSidebar;dialogRef;bookingService=new l;alertMessage=`ALERT! Modifying an OTA booking will create a discrepancy between igloorooms and the source. Future guest modifications on the OTA may require manual adjustmentsofthebooking.`;modalEl;handleSelectChange(e){e.stopPropagation();e.stopImmediatePropagation();const t=e.target;this.bookingStatus=t.selectedValue}async updateStatus(){if(!this.bookingStatus||this.bookingStatus==="-1"){this.toast.emit({type:"error",description:"",title:g.entries.Lcz_SelectStatus,position:"top-right"});return}try{await this.bookingService.changeExposedBookingStatus({book_nbr:this.booking.booking_nbr,status:this.bookingStatus});this.toast.emit({type:"success",description:"",title:g.entries.Lcz_StatusUpdatedSuccessfully,position:"top-right"});this.bookingStatus=null;this.modalEl.closeModal();this.resetBookingEvt.emit(null)}catch(e){console.log(e)}}openDialog(e){const{type:t}=e;this.currentDialogStatus=t;this.dialogRef.openModal()}renderDialogBody(){switch(this.currentDialogStatus){case"pms":return t("ir-pms-logs",{bookingNumber:this.booking.booking_nbr});case"events-log":return t("ir-events-log",{booking:this.booking,bookingNumber:this.booking.booking_nbr})}}render(){const e=this.booking.ota_manipulations?this.booking.ota_manipulations[this.booking.ota_manipulations.length-1]:null;return t("div",{key:"3c6fa7e2f757c29d234827f256db3833b4d12252",class:"fluid-container px-1"},t("div",{key:"b0693032d726e2ede7b948a4537ac4a695b9bac5",class:"d-flex flex-column p-0 mx-0 flex-lg-row align-items-md-center justify-content-between"},t("div",{key:"7e669ced290b54b3a8d16e5a617cd0189cc71624",class:"m-0 p-0 mb-1 mb-lg-0 mt-md-0"},t("div",{key:"4d230fdcbeefde7e1b013967f82740fab2a5cab8",class:"d-flex align-items-center",style:{gap:"0.5rem"}},t("p",{key:"8480c4cf2619270046b023d2fb4e753d98513a27",style:{color:"black"},class:"font-size-large m-0 p-0"},`${g.entries.Lcz_Booking}#${this.booking.booking_nbr}`),t("wa-dropdown",{key:"05f6e3ff8caa841b6e81e241f48ac702bc2648c2","onwa-hide":e=>{e.stopImmediatePropagation();e.stopPropagation()},"onwa-select":e=>{this.bookingStatus=e.detail.item.value;this.modalEl.openModal()}},t("ir-custom-button",{key:"c3c427a44f7c28ff28d8ccb59a6d4d47aee566f3",slot:"trigger",withCaret:true,appearance:"outlined",size:"small",variant:"brand"},t("ir-booking-status-tag",{key:"8fb50fed65e600296bd5a1aeddd8782265c994e1",slot:"start",status:this.booking.status,isRequestToCancel:this.booking.is_requested_to_cancel}),t("span",{key:"d837da4d407c82929222e7cf421cd8946f7f6365"},"Update status")),this.booking.allowed_actions.map((e=>t("wa-dropdown-item",{variant:["CANC_RA","NOSHOW_RA"].includes(e.code)?"danger":"default",value:e.code},e.description))))),t("p",{key:"89c0703aaff3c05be66d72bc4640571e411822f5",class:"m-0 p-0"},!this.booking.is_direct&&t("span",{key:"0e6047680611ac348bb0252dbab76df6d618440f",class:"mr-1 m-0"},this.booking.channel_booking_nbr))),t("div",{key:"75acfcf758c40ef187b1337cc9284287930358cc",class:"d-flex justify-content-end align-items-center",style:{gap:"1rem",flexWrap:"wrap"}},t("div",{key:"6efac98e3b8e05ed8122d6bb015a006c777bf297",class:"d-flex flex-column align-items-center"},e&&t("ir-popover",{key:"004f2650c1c929156774d76c778a48074926a9e4",trigger:"hover",renderContentAsHtml:true,content:`<div><p>Modified by ${e.user} at ${e.date} ${e.hour}:${e.minute}.</p>\n                <p>${this.alertMessage}</p></div>`},t("p",{key:"c95c0185e9f4f23fe26aff988d1f1a1bfe53b334",class:"mx-0 p-0 small text-danger",style:{marginTop:"0.25rem",marginBottom:"0"}},t("b",{key:"246da69540e9b2d75e3c1257052d3aef956ffc2d"},"Modified")))),this.booking.allowed_actions.length>0&&this.booking.is_editable&&t("div",{key:"da942262417ed28b687c1e4ac8f59c52657d07e8",class:"m-0 p-0 d-flex align-items-center",style:{gap:"0.25rem"}}),t("ir-custom-button",{key:"3bfbd2d6841b4031975b7875e29b1e78660f1258",onClickHandler:e=>{e.stopImmediatePropagation();e.stopPropagation();this.openDialog({type:"events-log"})},appearance:"outlined",size:"small",variant:"brand"},"Events log"),t("ir-custom-button",{key:"1b1f576ccf4778284cb73e686ba6c1cac5f1fccc",onClickHandler:e=>{e.stopImmediatePropagation();e.stopPropagation();this.openDialog({type:"pms"})},appearance:"outlined",size:"small",variant:"brand"},"PMS"),this.hasReceipt&&t(r,{key:"4aab51d4370046e1ac99b442a063b4eb2e67bfa9"},t("ir-custom-button",{key:"1ac92add63cfc4fcd4a3bf3d87c32e9459fea3d5",id:"invoice",variant:"brand",size:"small",appearance:"outlined"},"Billing")),this.hasPrint&&t(r,{key:"e7a5db5f332f84eb8e18310f932fa7cad3074654"},t("wa-tooltip",{key:"f2e2a23b4ce89528c50e0233be4ad535b2753e85",for:"print"},"Print booking"),t("ir-custom-button",{key:"4dcea2f7e441ff4c2863538db5c69cd37514fcb7",id:"print",variant:"brand",size:"small",appearance:"outlined"},t("wa-icon",{key:"e5d4a208e097e5861e8f30b8b05dda311e2306ef",label:"Print",name:"print",style:{fontSize:"1.2rem"}}))),this.hasEmail&&t(r,{key:"af7655b09fe9ada5bcc2a9737092ffed9c0e023c"},t("wa-tooltip",{key:"deff9cde18f0b738c4fc195e226c3a213cbe1733",for:"email"},"Email this booking to guest"),t("ir-custom-button",{key:"917635a879822b93e6b4a395fcce4244fdc4130e",id:"email",variant:"brand",size:"small",appearance:"outlined"},t("wa-icon",{key:"5f761f179c189aeac6443166af8328019995659b",name:"envelope",style:{fontSize:"1.2rem"},label:"Email this booking"}))),this.hasDelete&&t(r,{key:"d6f7d82035e638dee9469240f9216c40954a126e"},t("wa-tooltip",{key:"209a116617136e27988e7b0851173b2c5439c20b",for:"book-delete"},"Delete this booking"),t("ir-custom-button",{key:"b0ccbc15dd5dfaacbe4cc7f345d99c7c611ab046",id:"book-delete",variant:"danger",size:"small",appearance:"plain"},t("wa-icon",{key:"b55793944aa78ebf237584ec010400684b4cc51d",name:"envelope",style:{fontSize:"1.65rem"},label:"Email this booking"}))),this.hasMenu&&t(r,{key:"e9759f686858bd855bfc5529e5199b5e14ae15e1"},t("wa-tooltip",{key:"f3f068e9650d93a103e9e58171508c705e4d67cc",for:"menu"},"Go back"),t("ir-custom-button",{key:"baef59001c673db3fb9b7e4fd24ca8144a15e4e8",id:"menu",variant:"neutral",size:"small",appearance:"plain"},t("wa-icon",{key:"297e48060b4863d198a565a857f14695ddef30b0",name:"list",style:{fontSize:"1.65rem"},label:"Go back"}))),this.hasCloseButton&&t("ir-custom-button",{key:"486cf76ebe03a30945c71accc7094b2991690506",onClickHandler:e=>{e.stopPropagation();e.stopImmediatePropagation();this.closeSidebar.emit(null)},id:"close",variant:"neutral",size:"small",appearance:"plain"},t("wa-icon",{key:"934d4ea92f0bf121a5b64ddc2b54ee0559c45d40",name:"xmark",style:{fontSize:"1.65rem"},label:"Go back"})))),t("ir-dialog",{key:"12e9ea79ecd8f875de0908ee7fdfcc313b00dbb8",onIrDialogHide:e=>{this.currentDialogStatus=null},label:this.currentDialogStatus==="pms"?g.entries.Lcz_PMS_Logs:g.entries.Lcz_EventsLog,style:this.currentDialogStatus==="events-log"&&{"--ir-dialog-max-width":"max-content"},ref:e=>this.dialogRef=e},this.renderDialogBody()),t("ir-dialog",{key:"e4dea3308010d2786cb3e4416ce527b3a0c4f5f3",ref:e=>this.modalEl=e,label:"Alert",lightDismiss:false,onIrDialogHide:e=>{e.stopImmediatePropagation();e.stopPropagation()},onIrDialogAfterHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.bookingStatus=null}},t("p",{key:"69ee4a59176dd6b749517f7dcc62bbf9f10ba148"},this.booking.is_direct?"Are you sure you want to update this booking status?":g.entries.Lcz_OTA_Modification_Alter),t("div",{key:"bd71452191265a03f5ae9e7213e2ef6fa2685034",class:"ir-dialog__footer",slot:"footer"},t("ir-custom-button",{key:"630eaaff88703b2ca55386c745b981b962ba3b50","data-dialog":"close",size:"medium",appearance:"filled",variant:"neutral"},g?.entries?.Lcz_Cancel),t("ir-custom-button",{key:"1507e8eba033ec6ba71aa29640d97e8689379769",onClickHandler:e=>{e.stopImmediatePropagation();e.stopPropagation();this.updateStatus()},size:"medium",variant:"brand",loading:be("/Change_Exposed_Booking_Status")},g?.entries?.Lcz_Confirm))))}};Yn.style=Sn;function En(){const e=new URLSearchParams(window.location.search);const t={};for(const[i,a]of e.entries()){t[i]=a}return t}const Tn=".sc-ir-booking-listing-h{display:block;padding:var(--wa-space-l);position:relative}";const In=Tn;const zn=class{constructor(t){e(this,t)}get el(){return o(this)}language="";ticket="";propertyid;rowCount=20;p;baseUrl;userType;isLoading=false;editBookingItem=null;showCost=false;paymentEntries;payment;booking;bookingListingService=new Te;bookingService=new l;roomService=new we;propertyService=new Tt;token=new me;listingModal;listingModalTimeout;allowedProperties;havePrivilege;paymentFolioRef;componentWillLoad(){if(this.baseUrl){this.token.setBaseUrl(this.baseUrl)}Ie("end_row",this.rowCount);ze.rowCount=this.rowCount;Oe(this.rowCount);if(this.ticket!==""){ze.token=this.ticket;this.token.setToken(this.ticket);this.initializeApp()}Ae("userSelection",(e=>{Be(e)}));Ae("bookings",(e=>{this.showCost=e.some((e=>e.financial.gross_cost!==null&&e.financial.gross_cost>0))}))}ticketChanged(e,t){if(e===t){return}this.token.setToken(this.ticket);ze.token=this.ticket;this.initializeApp()}async fetchBookings(){await this.bookingListingService.getExposedBookings({...ze.userSelection,is_to_export:false})}async initializeApp(){try{this.isLoading=true;this.havePrivilege=ae(this.userType);let e=this.propertyid;if(!this.havePrivilege){if(!this.propertyid&&!this.p){throw new Error("Property ID or username is required")}if(!e){const t=await this.roomService.getExposedProperty({id:0,aname:this.p,language:this.language,is_backend:true});e=t.My_Result.id}}const t=[this.bookingService.getSetupEntriesByTableNameMulti(["_PAY_TYPE","_PAY_TYPE_GROUP","_PAY_METHOD"]),this.bookingListingService.getExposedBookingsCriteria(this.havePrivilege?null:e),this.roomService.fetchLanguage(this.language,["_BOOKING_LIST_FRONT"])];let i=null;if(this.propertyid&&!this.havePrivilege){t.push(this.roomService.getExposedProperty({id:this.propertyid,language:this.language,is_backend:true}))}if(this.havePrivilege){i=t.length;t.push(this.propertyService.getExposedAllowedProperties())}const a=await Promise.all(t);const[r]=a;const{pay_type:o,pay_type_group:n,pay_method:s}=this.bookingService.groupEntryTablesResult(r);this.paymentEntries={groups:n,methods:s,types:o};this.allowedProperties=i!==null?a[i]?.map((e=>e.id)):null;Ie("property_id",e);Re({property_ids:this.allowedProperties,userTypeCode:this.userType});await this.fetchBookings()}catch(e){console.error("Error initializing app:",e)}finally{this.isLoading=false}}handleSideBarToggle(e){if(e.detail){this.editBookingItem=null}}geSearchFiltersFromParams(){const e=En();if(e){console.log("update params");let t={};if(e.e){t["end_row"]=Number(e.e)}if(e.s){t["start_row"]=Number(e.s)}if(e.status){t["booking_status"]=e.status}if(e.filter){t["filter_type"]=e.filter}if(e.from){t["from"]=e.from}if(e.to){t["to"]=e.to}Re(t)}console.log("params=>",e)}openModal(){this.listingModalTimeout=setTimeout((()=>{this.listingModal=this.el.querySelector("ir-listing-modal");this.listingModal.editBooking=this.editBookingItem;this.listingModal.openModal()}),100)}disconnectedCallback(){clearTimeout(this.listingModalTimeout)}async handlePaginationChange(e){e.stopImmediatePropagation();e.stopPropagation();if(!e.detail){return}Pe(e.detail.currentPage);await this.fetchBookings()}async handlePaginationPageSizeChange(e){if(!e.detail||!e.detail.pageSize){return}e.stopImmediatePropagation();e.stopPropagation();Oe(e.detail.pageSize);await this.fetchBookings()}async handleResetData(e){e.stopImmediatePropagation();e.stopPropagation();await this.fetchBookings()}async handleResetStoreData(e){e.stopImmediatePropagation();e.stopPropagation();await this.fetchBookings()}handleBookingChanged(e){e.stopImmediatePropagation();e.stopPropagation();ze.bookings=[...ze.bookings.map((t=>{if(t.booking_nbr===e.detail.booking_nbr){return e.detail}return t}))]}handleBookingPayment(e){e.stopImmediatePropagation();e.stopPropagation();const{booking_nbr:t,payment:i}=e.detail;this.booking=this.findBooking(t);const a=this.paymentEntries.types.find((e=>e.CODE_NAME===i.payment_type.code));this.payment={...i,payment_type:{code:a.CODE_NAME,description:a.CODE_VALUE_EN,operation:a.NOTES}};this.paymentFolioRef.openFolio()}handleSelectGuestEvent(e){e.stopImmediatePropagation();e.stopPropagation();const t=this.findBooking(e.detail);if(!t){return}this.editBookingItem={booking:t,cause:"guest"}}handleOpen(e){e.stopImmediatePropagation();const t=this.findBooking(e.detail);if(!t){return}this.editBookingItem={booking:t,cause:"edit"}}findBooking(e){return ze.bookings.find((t=>t.booking_nbr===e))}render(){if(this.isLoading||this.ticket===""){return t("ir-loading-screen",null)}return t(i,null,t("ir-interceptor",null),t("ir-toast",null),t("div",{class:"main-container"},t("ir-listing-header",{propertyId:this.propertyid,p:this.p,language:this.language}),t("section",{class:"mt-2"},t("ir-booking-listing-table",null))),t("ir-drawer",{style:{"--ir-drawer-width":"80rem","--ir-drawer-background-color":"#F2F3F8","--ir-drawer-padding-left":"0","--ir-drawer-padding-top":"0","--ir-drawer-padding-bottom":"0","--ir-drawer-padding-right":"0"},onDrawerHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.editBookingItem=null},withoutHeader:true,open:this.editBookingItem?.cause==="edit"},this.editBookingItem?.booking&&t("ir-booking-details",{hasPrint:true,hasReceipt:true,hasCloseButton:true,onCloseSidebar:()=>this.editBookingItem=null,is_from_front_desk:true,propertyid:this.propertyid,hasRoomEdit:true,hasRoomDelete:true,bookingNumber:this.editBookingItem.booking?.booking_nbr.toString(),ticket:this.ticket,language:this.language,hasRoomAdd:true})),t("ir-guest-info-drawer",{onGuestInfoDrawerClosed:()=>{this.editBookingItem=null},booking_nbr:this.editBookingItem?.booking?.booking_nbr,email:this.editBookingItem?.booking?.guest.email,language:this.language,open:this.editBookingItem?.cause==="guest"}),t("ir-payment-folio",{style:{height:"auto"},bookingNumber:this.booking?.booking_nbr,paymentEntries:this.paymentEntries,payment:this.payment,mode:"payment-action",ref:e=>this.paymentFolioRef=e,onCloseModal:()=>{this.booking=null;this.payment=null}}))}static get watchers(){return{ticket:["ticketChanged"]}}};zn.style=In;const On=".sc-ir-booking-listing-mobile-card-h{display:block}.mobile-card__header.sc-ir-booking-listing-mobile-card{display:flex;align-items:center;justify-content:space-between;gap:0.75rem}.mobile-card__body.sc-ir-booking-listing-mobile-card{display:flex;flex-direction:column;gap:0.5rem}.mobile-card__text-center.sc-ir-booking-listing-mobile-card{text-align:center}.mobile-card__rooms.sc-ir-booking-listing-mobile-card{display:flex;flex-wrap:wrap;gap:0.25rem;align-items:center}.mobile-card__room.sc-ir-booking-listing-mobile-card{display:flex;align-items:center;gap:0.25rem}.mobile-card__room-divider.sc-ir-booking-listing-mobile-card{font-size:0.93rem;line-height:1}.mobile-card__extra-services.sc-ir-booking-listing-mobile-card{font-size:0.93rem}.mobile-card__dates.sc-ir-booking-listing-mobile-card{display:flex;align-items:center}.mobile-card__actions.sc-ir-booking-listing-mobile-card{display:flex;gap:0.5rem}.mobile-card__action-button.sc-ir-booking-listing-mobile-card{flex:1 1 0%}";const An=On;const Bn=class{constructor(t){e(this,t);this.irBookingCardAction=a(this,"irBookingCardAction",7)}booking;totalPersons;lastManipulation;extraServicesLabel;irBookingCardAction;emitAction(e){if(!this.booking){return}this.irBookingCardAction.emit({action:e,booking:this.booking})}renderRooms(){if(!this.booking?.rooms?.length){return null}return this.booking.rooms.map(((e,i)=>t("div",{class:"mobile-card__room",key:e.identifier??i},t("ir-unit-cell",{room:e}),i<this.booking.rooms.length-1&&t("span",{class:"mobile-card__room-divider"},","))))}render(){if(!this.booking){return null}const e=`${this.booking.booking_nbr}`;return t("wa-card",null,t("div",{slot:"header",class:"mobile-card__header"},t("ir-booking-number-cell",{origin:this.booking.origin,source:this.booking.source,channelBookingNumber:this.booking.channel_booking_nbr,bookingNumber:this.booking.booking_nbr}),t("ir-status-activity-cell",{lastManipulation:this.lastManipulation,showManipulationBadge:!!this.lastManipulation,showModifiedBadge:!this.lastManipulation&&this.booking.events?.length>0&&this.booking.events[0].type.toLowerCase()==="modified",status:this.booking.status,isRequestToCancel:this.booking.is_requested_to_cancel,bookingNumber:this.booking.booking_nbr})),t("div",{class:"mobile-card__body"},t("ir-booked-by-cell",{display:"inline",class:"mobile-card__text-center",label:"Booked by",clickableGuest:true,showRepeatGuestBadge:this.booking.guest.nbr_confirmed_bookings>1&&!this.booking.agent,guest:this.booking.guest,identifier:e,cellId:`mobile-${e}`,showPersons:true,showPrivateNoteDot:J(this.booking.extras),totalPersons:this.totalPersons?.toString(),showPromoIcon:!!this.booking.promo_key,promoKey:this.booking.promo_key,showLoyaltyIcon:this.booking.is_in_loyalty_mode&&!this.booking.promo_key}),t("div",{class:"mobile-card__rooms"},this.renderRooms(),this.booking.extra_services&&this.extraServicesLabel&&t("p",{class:"mobile-card__extra-services"},this.extraServicesLabel)),t("ir-booked-on-cell",{display:"inline",label:"Booked on",bookedOn:this.booking.booked_on}),t("div",{class:"mobile-card__dates"},t("ir-dates-cell",{display:"inline",checkInLabel:"Check-in",checkoutLabel:"Check-out",checkIn:this.booking.from_date,checkOut:this.booking.to_date})),t("ir-balance-cell",{display:"inline",label:"Amount",bookingNumber:this.booking.booking_nbr,isDirect:this.booking.is_direct,statusCode:this.booking.status.code,currencySymbol:this.booking.currency.symbol,financial:this.booking.financial})),t("div",{slot:"footer",class:"mobile-card__actions"},t("ir-custom-button",{class:"mobile-card__action-button",onClickHandler:()=>this.emitAction("edit"),appearance:"outlined"},"Edit"),t("ir-custom-button",{class:"mobile-card__action-button",onClickHandler:()=>this.emitAction("delete"),variant:"danger"},"Delete")))}};Bn.style=An;const Rn=".sc-ir-booking-listing-table-h{box-sizing:border-box !important}.sc-ir-booking-listing-table-h *.sc-ir-booking-listing-table,.sc-ir-booking-listing-table-h *.sc-ir-booking-listing-table::before,.sc-ir-booking-listing-table-h *.sc-ir-booking-listing-table::after{box-sizing:inherit !important;padding:0;margin:0}[hidden].sc-ir-booking-listing-table{display:none !important}.table--container.sc-ir-booking-listing-table{flex:1 1 0%}.arrivals-table__actions-cell.sc-ir-booking-listing-table{display:flex;min-width:100px;justify-content:flex-end}.table--container.sc-ir-booking-listing-table{display:none;overflow-x:auto}.card--container.sc-ir-booking-listing-table{display:flex;flex-direction:column;gap:1rem}@media (min-width: 768px){.sc-ir-booking-listing-table-h{display:flex;flex-direction:column;border-radius:0.5rem;overflow-x:auto;min-height:60vh;max-width:1920px;border:1px solid var(--wa-color-neutral-border-quiet, #abaeb9);background-color:white}.table--container.sc-ir-booking-listing-table{display:block}.card--container.sc-ir-booking-listing-table{display:none}.arrivals-table__actions-cell.sc-ir-booking-listing-table{min-width:250px}}";const Pn=Rn;const Nn=".ir-table-row.sc-ir-booking-listing-table td.sc-ir-booking-listing-table{padding:0.5rem 1rem !important;text-align:left;z-index:2;background-color:var(--wa-color-surface-default);white-space:nowrap;color:var(--wa-color-text-normal);box-sizing:border-box}.table--container.sc-ir-booking-listing-table{flex:1 1 0%}.table--container.sc-ir-booking-listing-table{overflow-x:auto}.table.sc-ir-booking-listing-table td.sc-ir-booking-listing-table{border-top:0;border-bottom:1px solid var(--wa-color-neutral-border-quiet, #abaeb9);transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.table.sc-ir-booking-listing-table tbody.sc-ir-booking-listing-table tr.sc-ir-booking-listing-table:last-child>td.sc-ir-booking-listing-table{border-bottom:0 !important}.table.sc-ir-booking-listing-table thead.sc-ir-booking-listing-table th.sc-ir-booking-listing-table{border:none !important;background:#ececec;background:color-mix(in oklab, var(--wa-color-neutral-fill-quiet, #f1f2f3) 60%, transparent);color:#374151;padding:0.5rem 1rem !important;text-align:left}.data-table.sc-ir-booking-listing-table thead.sc-ir-booking-listing-table th.sc-ir-booking-listing-table{box-sizing:border-box;background:var(--wa-color-surface-default) !important;padding-top:0.5rem !important;padding-bottom:0.5rem !important;border-bottom:1px solid var(--wa-color-neutral-90) !important;color:var(--wa-color-text-normal)}.data-table.sc-ir-booking-listing-table .empty-row.sc-ir-booking-listing-table{height:50vh !important;text-align:center;color:var(--wa-color-gray-60)}.data-table--pagination.sc-ir-booking-listing-table{padding:0.5rem 1rem;position:sticky;bottom:0;background:var(--wa-color-surface-default);border-top:1px solid var(--wa-color-neutral-90)}.selected.sc-ir-booking-listing-table td.sc-ir-booking-listing-table{background:#e3f3fa !important}.selected.sc-ir-booking-listing-table td.sc-ir-booking-listing-table{color:var(--gray-dark) !important;transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.sortable.sc-ir-booking-listing-table,.ir-table-row.sc-ir-booking-listing-table{transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.sortable.sc-ir-booking-listing-table{text-transform:capitalize}.sortable.sc-ir-booking-listing-table:hover{color:#212529;background-color:#e2e8f0 !important;border-color:#dae0e5;cursor:pointer}.ir-table-row.sc-ir-booking-listing-table:hover td.sc-ir-booking-listing-table{background:#e2e6ea3f !important;background:var(--wa-color-neutral-fill-quiet, #f1f2f3) !important}.sortable.sc-ir-booking-listing-table:active{color:#212529;background-color:#e2e8f0;border-color:#d3d9df}.sortable.sc-ir-booking-listing-table svg.sc-ir-booking-listing-table{color:var(--blue)}.sticky-column.sc-ir-booking-listing-table{position:sticky !important;right:0;background-color:white}";const Ln=Nn;const $n=class{constructor(t){e(this,t);this.openBookingDetails=a(this,"openBookingDetails",7);this.requestPageChange=a(this,"requestPageChange",7);this.requestPageSizeChange=a(this,"requestPageSizeChange",7)}booking_nbr;isLoading;openBookingDetails;requestPageChange;requestPageSizeChange;bookingListingsService=new Te;async deleteBooking(){if(!this.booking_nbr){return}try{this.isLoading=true;await this.bookingListingsService.removeExposedBooking(this.booking_nbr,true)}catch(e){}finally{this.isLoading=false}}calculateTotalPersons(e){const t=({adult_nbr:e,children_nbr:t,infant_nbr:i})=>(e??0)+(t??0)+(i??0);return e.rooms.reduce(((e,i)=>t(i.occupancy)+e),0)}handleIrActions({action:e,booking:t}){switch(e){case"edit":this.openBookingDetails.emit(t.booking_nbr);break;case"delete":this.booking_nbr=t.booking_nbr;break;default:console.warn(`${e} not handled`)}}handlePageChange(e){e.stopImmediatePropagation();e.stopPropagation();this.requestPageChange.emit(e.detail)}handlePageSizeChange(e){e.stopImmediatePropagation();e.stopPropagation();this.requestPageSizeChange.emit(e.detail)}renderRow(e){const i=`${e.booking_nbr}`;const a=this.calculateTotalPersons(e);const r=e.ota_manipulations?e.ota_manipulations[e.ota_manipulations.length-1]:null;return t("tr",{class:"ir-table-row",key:i},t("td",null,t("ir-booking-number-cell",{origin:e.origin,source:e.source,channelBookingNumber:e.channel_booking_nbr,bookingNumber:e.booking_nbr})),t("td",null,t("ir-booked-on-cell",{bookedOn:e.booked_on})),t("td",{class:"text-center"},t("ir-booked-by-cell",{class:"text-center",clickableGuest:true,showRepeatGuestBadge:e.guest.nbr_confirmed_bookings>1&&!e.agent,guest:e.guest,identifier:e.booking_nbr,showPersons:true,showPrivateNoteDot:J(e.extras),totalPersons:a?.toString(),showPromoIcon:!!e.promo_key,promoKey:e.promo_key,showLoyaltyIcon:e.is_in_loyalty_mode&&!e.promo_key})),t("td",null,t("ir-dates-cell",{checkIn:e.from_date,checkOut:e.to_date})),t("td",null,t("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"}},e.rooms.map((e=>t("ir-unit-cell",{key:e.identifier,room:e}))),e.extra_services&&t("p",{style:{fontSize:"0.93rem"}},g.entries.Lcz_ExtraServices))),t("td",{class:"text-center"},t("ir-balance-cell",{"data-css":"center",bookingNumber:e.booking_nbr,isDirect:e.is_direct,statusCode:e.status.code,currencySymbol:e.currency.symbol,financial:e.financial})),t("td",{class:"text-center"},t("ir-status-activity-cell",{lastManipulation:r,showManipulationBadge:!!r,showModifiedBadge:!r&&e.events?.length>0&&e.events[0].type.toLowerCase()==="modified",status:e.status,isRequestToCancel:e.is_requested_to_cancel,bookingNumber:e.booking_nbr})),t("td",null,t("div",{class:""},t("ir-actions-cell",{onIrAction:t=>{t.stopImmediatePropagation();t.stopPropagation();this.handleIrActions({action:t.detail.action,booking:e})},buttons:["edit","delete"]}))))}render(){const e=ze.pagination;return t(i,{key:"e100fad134e56277ef2d0f85a3b6e201744e64cd"},t("div",{key:"64e9d5ec5abf1884d97fe4a9f03d8203a923b272",class:"table--container"},t("table",{key:"7cdaae9cc387a4a9d18bcb4121dc5d74f4866a7b",class:"table data-table"},t("thead",{key:"08d63d074111c029365cc4e804e775d82a21c13d"},t("tr",{key:"76f64a8115b9875b9179cf795ab1c8b0e5b6427c"},t("th",{key:"fb0952f90be03ee9783ace11868cd8a1141dd58c"},t("span",{key:"aafa5d726c671a1b2cc504f7885f91bd5478661b",class:"arrivals-table__departure__cell"},"Booking#")),t("th",{key:"5c5a9edaac8731d0c0d569405adb002d274bad7c"},"Booked on"),t("th",{key:"4cb946e50ac3fdf4d244f90b097d0845021c1ce2"},t("div",{key:"8d94fdf791cd403c45495491c039c45f4a293adc"},t("p",{key:"7a6b9b783efffe4cf07b5c2b1f45e5ffbf097246"},"Booked by"))),t("th",{key:"b3eae71044721ef62243a828c87645e6807828ff"},"Dates"),t("th",{key:"2f1a9e2691824731809e953e792e5b6b9f0e85c2"},"Services"),t("th",{key:"628fd14f2b86d55464f9a391db01401f9ec062e9",class:"text-center"},t("p",{key:"7aa95b11f5484411e93193a40f3894b302ec8504"},"Amount "),t("wa-tooltip",{key:"63abef33aa07c3c782e77596d65f490aeb6d0aab",for:"balance-info"},"Booking balance click to settle."),t("div",{key:"5b6bae20623f2c18b043bcb54fed9934f8b4b88b",style:{width:"fit-content",marginLeft:"auto",marginRight:"auto"}},t("ir-custom-button",{key:"688fe4e57998bb67ac9e95a5170e4d7524c9c9d5",id:"balance-info",style:{"--ir-c-btn-height":"fit-content","--ir-c-btn-padding":"0.25rem","--ir-c-btn-font-size":"0.725rem"},size:"small",variant:"danger",appearance:"outlined"},"Balance"))),t("th",{key:"8e85ab75627a2fa7fa891f4e6d7bf05ece6327f5",class:"text-center"},"Status"),t("th",{key:"86c94491a351d428f4cf4d08d47fba245c569dae"}))),t("tbody",{key:"e1d4a074f6d4fd36e02d86a499fac8bdc1018cc7"},ze.bookings.length===0&&t("tr",{key:"e985d6a0bafa5d7f2032ebb908219cf4cae86e22"},t("td",{key:"55f4c85fd7f8277f71dd90a737d13c53b5fa1b0f",colSpan:8,class:"empty-row"},"No bookings found")),ze.bookings?.map((e=>this.renderRow(e)))))),t("div",{key:"431c480f4d702432dbc0a65313da1ede81338a77",class:"card--container"},ze.bookings.map((e=>{const i=`mobile--${e.booking_nbr}`;const a=this.calculateTotalPersons(e);const r=e.ota_manipulations?e.ota_manipulations[e.ota_manipulations.length-1]:null;return t("ir-booking-listing-mobile-card",{key:i,booking:e,totalPersons:a,lastManipulation:r,extraServicesLabel:g.entries.Lcz_ExtraServices,onIrBookingCardAction:e=>{e.stopImmediatePropagation();e.stopPropagation();this.handleIrActions({action:e.detail.action,booking:e.detail.booking})}})}))),e.totalRecords>0&&t("ir-pagination",{key:"b6e7ca77ef91016a9c1970f43491d90a5074f03b",class:"data-table--pagination",showing:e.showing,total:e.totalRecords,pages:e.totalPages,pageSize:e.pageSize,currentPage:e.currentPage,allowPageSizeChange:false,pageSizes:[e.pageSize],recordLabel:g.entries?.Lcz_Bookings??"bookings",onPageChange:e=>this.handlePageChange(e),onPageSizeChange:e=>this.handlePageSizeChange(e)}),t("ir-dialog",{key:"39d435dd35533b1642048d51bb4bf8dd4bf21ccd",label:"Delete",open:!!this.booking_nbr,onIrDialogHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.booking_nbr=null},lightDismiss:false},t("span",{key:"e51a8006050f1925311af92ed7df509fce92d70e"},g.entries.Lcz_SureYouWantToDeleteBookingNbr+this.booking_nbr),t("div",{key:"d027d27a97da863bbac37f61c961705d918aa1bc",slot:"footer",class:"ir-dialog__footer"},t("ir-custom-button",{key:"1e76484e4b190ebf9aa6e301c6eaca4031b79669",onClickHandler:e=>{e.stopImmediatePropagation();e.stopPropagation();this.booking_nbr=null},size:"medium",variant:"neutral",appearance:"filled"},"Cancel"),t("ir-custom-button",{key:"8110b23b8469ccb58228ce32adeb72293b244bf9",onClickHandler:e=>{e.stopImmediatePropagation();e.stopPropagation();this.deleteBooking()},loading:this.isLoading,size:"medium",variant:"danger"},"Confirm"))))}};$n.style=Pn+Ln;const Fn=".sc-ir-booking-number-cell-h{box-sizing:border-box !important}.sc-ir-booking-number-cell-h *.sc-ir-booking-number-cell,.sc-ir-booking-number-cell-h *.sc-ir-booking-number-cell::before,.sc-ir-booking-number-cell-h *.sc-ir-booking-number-cell::after{box-sizing:inherit !important;padding:0;margin:0}[hidden].sc-ir-booking-number-cell{display:none !important}.sc-ir-booking-number-cell-h{display:flex;gap:1rem;align-items:center;font-size:0.93rem}.booking-nbr-cell__channel_nbr.sc-ir-booking-number-cell{font-size:0.75rem;padding:0;margin:0}.booking-nbr-cell__container.sc-ir-booking-number-cell{display:flex;flex-direction:column;align-self:flex-start}.booked-by-source__logo.sc-ir-booking-number-cell{width:1.5625rem;background-color:white}";const Hn=Fn;const Un=class{constructor(t){e(this,t);this.openBookingDetails=a(this,"openBookingDetails",7)}bookingNumber;source;origin;channelBookingNumber;openBookingDetails;render(){return t(i,{key:"ec0d7975548e143919ecdc0ed0c6166b460ea4de"},this.channelBookingNumber&&t("wa-tooltip",{key:"8cce1fae26634942597e94b2714f32832ad59bfc",for:`source-logo__${this.bookingNumber}`},this.origin.Label),t("img",{key:"0031489c9f14482c03b5e992a5f4186b9f0e0996",class:"booked-by-source__logo",id:`source-logo__${this.bookingNumber}`,src:this.origin.Icon,alt:this.origin.Label}),t("div",{key:"a5229537661e3598bf1c16f10309d9d4894e1712",class:"booking-nbr-cell__container"},t("div",{key:"dfb07069bf5c79476881b9e5ffc79b259fd5ad63",style:{width:"fit-content"}},t("ir-custom-button",{key:"6d6a7cea7e14f68ad06617831e2c64c77e90b341",size:"medium",onClickHandler:()=>this.openBookingDetails.emit(this.bookingNumber),link:true,variant:"brand",appearance:"plain"},this.bookingNumber)),t("p",{key:"619f7fe6db245ef6c04f067cfe3a412999de1078",class:"booking-nbr-cell__channel_nbr"},this.channelBookingNumber?this.channelBookingNumber:this.origin.Label)))}};Un.style=Hn;const jn=".sc-ir-booking-status-tag-h{display:block}";const Vn=jn;const Gn=class{constructor(t){e(this,t)}status;isRequestToCancel;badgeVariant={"001":"warning","002":"success","003":"danger","004":"danger"};render(){return t("wa-badge",{key:"677d743082018bda82b5f7e1762f1380271449f0",style:{padding:"0.375em 0.625em",letterSpacing:"0.03rem"},variant:this.badgeVariant[this.isRequestToCancel?"003":this.status.code]},this.status.description.toUpperCase())}};Gn.style=Vn;const qn=".sc-ir-button-h{--icon-button-color:#6b6f82;--icon-button-hover-color:#104064}.button-icon.sc-ir-button{padding:0;margin-top:0}.button-icon[data-state='loading'].sc-ir-button{display:none}.button-text.sc-ir-button{padding:0 5px}.bounce-3.sc-ir-button{animation:bounce 1s 1}.btn-link.sc-ir-button{color:var(--blue, #1e9ff2)}.ir-button-class.sc-ir-button{display:inline-flex !important;justify-content:center;align-items:center;box-sizing:border-box}.btn-outline.sc-ir-button{background:transparent;border:1px solid #104064;color:#104064}.btn-outline.sc-ir-button:hover,.btn-outline.sc-ir-button:active{background:#104064;color:white}.icon-button.sc-ir-button{all:unset;box-sizing:border-box;border-radius:0.25rem;display:inline-flex;align-items:center;justify-content:center;color:var(--icon-button-color);padding:0.2rem;transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.icon-button.sc-ir-button:hover{color:var(--icon-button-hover-color)}.icon-button.sc-ir-button:hover.hovered_bg{background:var('--ir-icon-bg-hover', #f6f6f6)}.icon-button.sc-ir-button:disabled{pointer-events:none}.icon-loader.sc-ir-button{margin:0;padding:0;width:var(--icon-size, 1.25rem);height:var(--icon-size, 1.25rem);border-radius:50%;background:radial-gradient(farthest-side, var(--icon-button-color) 94%, #0000) top/2px 2px no-repeat, conic-gradient(#0000 30%, var(--icon-button-color));-webkit-mask:radial-gradient(farthest-side, #0000 calc(100% - 2px), var(--icon-button-color) 0);mask:radial-gradient(farthest-side, #0000 calc(100% - 2px), var(--icon-button-color) 0);animation:l13 1s infinite linear}.btn_loader.sc-ir-button{width:15px;height:10px;--c:no-repeat linear-gradient(#ffffff 0 0);background:var(--c) 0% 50%, var(--c) 50% 50%, var(--c) 100% 50%;background-size:20% 100%;animation:l1 1s infinite linear}@keyframes l13{100%{transform:rotate(1turn)}}@keyframes l1{0%{background-size:20% 100%, 20% 100%, 20% 100%}33%{background-size:20% 10%, 20% 100%, 20% 100%}50%{background-size:20% 100%, 20% 10%, 20% 100%}66%{background-size:20% 100%, 20% 100%, 20% 10%}100%{background-size:20% 100%, 20% 100%, 20% 100%}}@keyframes bounce{0%,100%{transform:scale(1);animation-timing-function:cubic-bezier(0.8, 0, 1, 1)}50%{transform:scale(1.2);animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}}@keyframes ping{75%,100%{transform:scale(1.2)}}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const Kn=qn;const Wn=class{constructor(t){e(this,t);this.clickHandler=a(this,"clickHandler",7)}name;text;btn_color="primary";size="md";textSize="md";btn_block=true;btn_disabled=false;btn_type="button";isLoading=false;btn_styles;btn_id=pe();variant="default";icon_name;visibleBackgroundOnHover=false;iconPosition="left";icon_style;btnStyle;labelStyle;renderContentAsHtml=false;clickHandler;buttonEl;handleButtonAnimation(e){if(!this.buttonEl||e.detail!==this.btn_id){return}e.stopImmediatePropagation();e.stopPropagation();this.buttonEl.classList.remove("bounce-3");this.buttonEl.classList.add("bounce-3")}async bounce(){this.buttonEl.classList.remove("bounce-3");this.buttonEl.classList.add("bounce-3")}render(){const e=this.btn_disabled||this.isLoading;if(this.variant==="icon"){return t("button",{id:this.btn_id,class:`icon-button ${this.btn_styles} ${this.visibleBackgroundOnHover?"hovered_bg":""}`,ref:e=>this.buttonEl=e,onClick:()=>this.clickHandler.emit(),type:this.btn_type,disabled:e},this.isLoading?t("span",{class:"icon-loader"}):t("ir-icons",{class:"m-0 p-0",name:this.icon_name}))}let i=this.btn_block?"btn-block":"";return t("button",{id:this.btn_id,ref:e=>this.buttonEl=e,onClick:()=>this.clickHandler.emit(),class:`btn btn-${this.btn_color} ${this.btn_styles} ir-button-class  btn-${this.size} text-${this.textSize} ${i}`,type:this.btn_type,style:this.btnStyle,disabled:e},this.icon_name&&this.iconPosition==="left"&&t("ir-icons",{name:this.icon_name,style:this.icon_style}),this.text&&(this.renderContentAsHtml?t("span",{class:"button-text m-0",innerHTML:this.text,style:this.labelStyle}):t("span",{style:this.labelStyle,class:"button-text m-0"},this.text)),this.isLoading?t("div",{class:"btn_loader m-0 p-0"}):this.iconPosition==="right"&&t("ir-icons",{style:this.icon_style,name:this.icon_name}))}};Wn.style=Kn;const Xn=".sc-ir-checkbox-h{display:flex;align-items:center;width:fit-content}button.sc-ir-checkbox{all:unset}.CheckboxRoot.sc-ir-checkbox{background-color:white;width:20px;height:20px;border-radius:4px;display:flex;align-items:center;justify-content:center;border:1px solid #cacfe7;border-radius:4px;transition:all 0.3s ease}.CheckboxRoot.sc-ir-checkbox:disabled{background-color:#eceff1;border-color:rgba(118, 118, 118, 0.3);pointer-events:none}.CheckboxRoot[data-state='checked'].sc-ir-checkbox{background-color:#1e9ff2;color:white;border-color:#1e9ff2}input[type='checkbox'].sc-ir-checkbox{background-color:initial;cursor:default;appearance:auto;box-sizing:border-box;margin:3px 3px 3px 4px;padding:initial;border:initial}.checkbox.sc-ir-checkbox{transform:translateX(-100%);position:absolute;pointer-events:none;opacity:0;margin:0px;width:20px;height:20px}";const Jn=Xn;const Qn=class{constructor(t){e(this,t);this.checkChange=a(this,"checkChange",7)}checked=false;label;checkboxId=pe();name;indeterminate;disabled;labelClass;currentChecked=false;checkChange;checkboxRef;componentWillLoad(){this.currentChecked=this.checked}componentDidLoad(){if(this.checkboxRef){this.checkboxRef.setAttribute("aria-checked",JSON.stringify(this.checked))}}handleCheckedChange(e){if(e===this.currentChecked){return}this.currentChecked=this.checked}handleCheckChange(){this.currentChecked=!this.currentChecked;if(this.checkboxRef){this.checkboxRef.setAttribute("aria-checked",JSON.stringify(this.currentChecked))}this.checkChange.emit(this.currentChecked)}render(){return t(i,{key:"fb6e416aa691e463a40eba034df29225493e9215"},t("button",{key:"73ad2b49cf867666246ec42d17c83ad58649c74a",disabled:this.disabled,name:this.name,onClick:this.handleCheckChange.bind(this),id:this.checkboxId,"data-state":this.currentChecked||this.indeterminate?"checked":"unchecked",value:"on",ref:e=>this.checkboxRef=e,type:"button",role:"checkbox",class:"CheckboxRoot"},this.currentChecked&&t("svg",{key:"f2d6dd1b99544f8390f7e9168712fdf2594dfd42",xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},t("path",{key:"7f2983f21f9c3e8e6b2b059c38a572f04fa8681d",fill:"currentColor",d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"})),this.indeterminate&&t("svg",{key:"f617afe03d5aecf460a88e3a40479f810fe6563a",xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},t("path",{key:"1e1b857ae82df55d513171b9da25a2911c513a4d",fill:"currentColor",d:"M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z"}))),t("input",{key:"a4f0807bee3358656beabd4447f36b28f56047df",type:"checkbox",indeterminate:this.indeterminate,"aria-hidden":"true",tabindex:"-1",value:"on",checked:this.currentChecked,class:"checkbox"}),this.label&&t("label",{key:"b7159aaa5b450c3f06fdef95b9360a5866f8ed57",htmlFor:this.checkboxId,class:this.labelClass},this.label))}static get watchers(){return{checked:["handleCheckedChange"]}}};Qn.style=Jn;const Zn=":host{display:block}";const es=Zn;const ts=class{constructor(t){e(this,t);this.checkoutDialogClosed=a(this,"checkoutDialogClosed",7)}open;booking;identifier;isLoading="page";buttons=new Set;invoiceInfo;checkoutDialogClosed;bookingService=new l;async checkoutRoom({e,source:t}){try{e.stopImmediatePropagation();e.stopPropagation();this.isLoading=t;await this.bookingService.handleExposedRoomInOut({booking_nbr:this.booking.booking_nbr,room_identifier:this.identifier,status:"002"});this.isLoading=null;this.checkoutDialogClosed.emit({reason:t==="checkout&invoice"?"openInvoice":"checkout"})}catch(e){console.error(e)}}handleOpenChange(e,t){if(e!==t){this.init()}}async init(){if(!this.open){return}try{this.isLoading="page";this.invoiceInfo=await this.bookingService.getBookingInvoiceInfo({booking_nbr:this.booking.booking_nbr});this.setupButtons()}catch(e){}finally{this.isLoading=null}}setupButtons(){const e=this.invoiceInfo.invoiceable_items.filter((e=>e.type==="BSA"&&e.reason?.code!=="001"));const t=e.length===0;if(t){this.buttons.add("checkout");return}this.buttons.add("invoice_checkout");if(e.length>1){this.buttons.add("checkout_without_invoice")}}render(){return t("ir-dialog",{key:"de39dc8dcc6ea0c4eb375ebf49b5b48d3caa293f",open:this.open,label:"Alert",style:{"--ir-dialog-width":"fit-content"},onIrDialogHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.checkoutDialogClosed.emit({reason:"cancel"})}},this.isLoading==="page"?t("div",{class:"dialog__loader-container"},t("ir-spinner",null)):t("p",{style:{width:"calc(31rem - var(--spacing))"}},"Are you sure you want to Check Out this unit?"),t("div",{key:"d1065e5fd34268508b69206b7c5d8657991d7516",slot:"footer",class:"ir-dialog__footer"},t(r,{key:"59673636189c97109ade2cc2e9426ed6e4e5fbed"},t("ir-custom-button",{key:"a18661b052addba32075dd04ffd48fe6a32d4e28",size:"medium","data-dialog":"close",appearance:"filled",variant:"neutral"},g.entries.Lcz_Cancel),this.buttons.has("checkout")&&t("ir-custom-button",{key:"0b29613051a997d87c50b20740b59ce617954f55",size:"medium",onClickHandler:e=>this.checkoutRoom({e,source:"checkout"}),variant:"brand",loading:this.isLoading==="checkout"},"Checkout"),this.buttons.has("checkout_without_invoice")&&t("ir-custom-button",{key:"5221900006e15c1e789a75f89b934ed8dfa917e5",loading:this.isLoading==="skipCheckout",size:"medium",onClickHandler:e=>this.checkoutRoom({e,source:"skipCheckout"}),variant:"brand",appearance:this.buttons.has("invoice_checkout")?"outlined":"accent"},"Checkout without invoice"),this.buttons.has("invoice_checkout")&&t("ir-custom-button",{key:"537b06020e156e70d91918b7f90fa72ccd286ecb",size:"medium",loading:this.isLoading==="checkout&invoice",onClickHandler:e=>{this.checkoutRoom({e,source:"checkout&invoice"})},variant:"brand",appearance:"accent"},"Checkout & invoice"))))}static get watchers(){return{open:["handleOpenChange"]}}};ts.style=es;const is=".sc-ir-combobox-h{display:block;position:relative;padding:0;margin:0;box-sizing:border-box}ul.sc-ir-combobox{position:absolute;box-sizing:border-box;margin:0;margin-top:2px;width:max-content;max-height:80px;border-radius:0.21rem;z-index:10000;padding:1px;background:white;box-shadow:0px 8px 16px 0px rgba(0, 0, 0, 0.2);padding:5px 0;max-height:250px;overflow-y:auto;min-width:100%}ul[data-position='bottom-right'].sc-ir-combobox{right:0}.list-item-image.sc-ir-combobox{height:1rem;aspect-ratio:4/3;border-radius:4px;margin-right:10px}.dropdown-item.sc-ir-combobox{cursor:pointer}ul.sc-ir-combobox li.sc-ir-combobox,span.sc-ir-combobox,loader-container.sc-ir-combobox{padding:0px 16px;margin:0px;margin-top:2px;width:100%;border-radius:2px}ul.sc-ir-combobox li.sc-ir-combobox{cursor:pointer}ul.sc-ir-combobox li.sc-ir-combobox{display:flex;align-items:center;flex-wrap:wrap;gap:3px}ul.sc-ir-combobox li.sc-ir-combobox p.sc-ir-combobox{margin:0;padding:0}ul.sc-ir-combobox li.sc-ir-combobox:hover{background:#f4f5fa}ul.sc-ir-combobox li[data-selected].sc-ir-combobox,ul.sc-ir-combobox li[data-selected].sc-ir-combobox:hover{color:#fff;text-decoration:none;background-color:#666ee8}";const as=is;const rs=class{constructor(t){e(this,t);this.comboboxValueChange=a(this,"comboboxValueChange",7);this.inputCleared=a(this,"inputCleared",7);this.toast=a(this,"toast",7)}get el(){return o(this)}data=[];duration=300;placeholder;value;disabled=false;autoFocus=false;input_id=pe();selectedIndex=-1;actualIndex=-1;isComboBoxVisible=false;isLoading=true;isItemSelected;inputValue="";filteredData=[];componentShouldAutoFocus=false;comboboxValueChange;inputCleared;toast;inputRef;debounceTimer;blurTimeout;componentWillLoad(){this.filteredData=this.data}componentDidLoad(){if(this.autoFocus){this.focusInput()}}watchHandler(e,t){if(e!==t&&e===true){this.focusInput()}}handleDocumentClick(e){const t=e.target;if(!this.el.contains(t)){this.isComboBoxVisible=false}}disconnectedCallback(){clearTimeout(this.debounceTimer);clearTimeout(this.blurTimeout);this.inputRef?.removeEventListener("blur",this.handleBlur);this.inputRef?.removeEventListener("click",this.selectItem);this.inputRef?.removeEventListener("keydown",this.handleKeyDown);this.inputRef?.removeEventListener("focus",this.handleFocus)}handleKeyDown(e){const t=this.filteredData.length;if(t>0){switch(e.key){case"ArrowUp":e.preventDefault();this.selectedIndex=(this.selectedIndex-1+t)%t;this.adjustScrollPosition();break;case"ArrowDown":e.preventDefault();this.selectedIndex=(this.selectedIndex+1)%t;this.adjustScrollPosition();break;case"Escape":e.stopImmediatePropagation();e.stopPropagation();this.inputRef?.blur();this.isComboBoxVisible=false;break}}}focusInput(){requestAnimationFrame((()=>{this.inputRef?.focus()}))}adjustScrollPosition(){const e=this.el?.querySelector(`[data-selected]`);if(!e)return;e.scrollIntoView({block:"center"})}selectItem(e){if(this.filteredData[e]){this.isItemSelected=true;this.comboboxValueChange.emit({key:"select",data:this.filteredData[e].id});this.inputValue="";this.resetCombobox();if(this.autoFocus){this.focusInput()}}}debounceFetchData(){clearTimeout(this.debounceTimer);this.debounceTimer=setTimeout((()=>{this.fetchData()}),this.duration)}handleFocus(){this.isComboBoxVisible=true}resetCombobox(e=true){if(e){this.inputRef?.blur()}this.selectedIndex=-1;this.isComboBoxVisible=false}async fetchData(){try{this.isLoading=true;this.filteredData=this.data.filter((e=>e.name.toLowerCase().startsWith(this.inputValue)));this.selectedIndex=-1}catch(e){console.log("error",e)}finally{this.isLoading=false}}handleInputChange(e){this.inputValue=e.target.value;if(this.inputValue){this.debounceFetchData()}else{this.filteredData=this.data}}handleBlur(){this.blurTimeout=setTimeout((()=>{if(!this.isItemSelected){this.inputValue="";this.resetCombobox()}else{this.isItemSelected=false}}),300)}handleItemKeyDown(e,t){if(e.key==="Enter"||e.key===" "||e.key==="ArrowRight"){this.selectItem(t);e.preventDefault()}else if(e.key==="Escape"){this.isComboBoxVisible=false;this.inputRef?.blur();e.preventDefault()}}renderDropdown(){if(!this.isComboBoxVisible){return null}return t("ul",{"data-position":this.filteredData.length>0&&this.filteredData[0].occupancy?"bottom-right":"bottom-left"},this.filteredData?.map(((e,i)=>t("li",{onMouseEnter:()=>this.selectedIndex=i,role:"button",key:e.id,onKeyDown:e=>this.handleItemKeyDown(e,i),"data-selected":this.selectedIndex===i,tabIndex:0,onClick:()=>this.selectItem(i)},e.image&&t("img",{src:e.image,class:"list-item-image"}),t("p",null,e.name),e.occupancy&&t(r,null,t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},t("path",{fill:"currentColor",d:"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"})),t("p",null,e.occupancy))))),this.filteredData.length===0&&!this.isLoading&&t("span",{class:"text-center"},g.entries.Lcz_NoResultsFound))}handleSubmit(e){e.preventDefault();e.stopPropagation();console.log("object");if(!this.filteredData.length){return}this.selectItem(this.selectedIndex===-1?0:this.selectedIndex)}render(){return t("form",{key:"171615249ee58fe315273fae3c25586dae682ac1",onSubmit:this.handleSubmit.bind(this),class:"m-0 p-0"},t("input",{key:"857721088a184fdac5ebbea33ad2b26b7c472df0",type:"text",class:"form-control bg-white",id:this.input_id,ref:e=>this.inputRef=e,disabled:this.disabled,value:this.value,placeholder:this.placeholder,onKeyDown:this.handleKeyDown.bind(this),onBlur:this.handleBlur.bind(this),onInput:this.handleInputChange.bind(this),onFocus:this.handleFocus.bind(this),autoFocus:this.autoFocus}),this.renderDropdown())}static get watchers(){return{isComboBoxVisible:["watchHandler"]}}};rs.style=as;const os=[{isCSS:true,link:"https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i%7CQuicksand:300,400,500,700"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/bootstrap.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/bootstrap-extended.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/colors.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/core/menu/menu-types/horizontal-menu.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/core/colors/palette-gradient.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/components.css"},{isCSS:true,link:"https://x.igloorooms.com/assets/css/style.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/icheck.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/custom.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/pages/login-register.css"}];const ns="/* Web Awesome core styles */\n/* @import url('../assets/webawesome/themes/webawesome.css'); */\n/* Generates --wa-color-{hue}-on tokens for pairing with any palette's key colors */\n:where(:root),\n:host {\n  /**\n    * Conditional tokens to check if the key color is >= 60\n    * Key colors are the most colorful tint in a scale, recorded as --wa-color-{hue} in each palette\n    * The numeric value of the key is isolated as --wa-color-{hue}-key\n    * If key < 60, the result is 0%\n    * If key >= 60, the result is 100%\n    * Intended to be used in the color-mix() functions below\n    */\n\n  --wa-color-red-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-red-key), 1) * 100%));\n  --wa-color-orange-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-orange-key), 1) * 100%));\n  --wa-color-yellow-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-yellow-key), 1) * 100%));\n  --wa-color-green-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-green-key), 1) * 100%));\n  --wa-color-cyan-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-cyan-key), 1) * 100%));\n  --wa-color-blue-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-blue-key), 1) * 100%));\n  --wa-color-indigo-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-indigo-key), 1) * 100%));\n  --wa-color-purple-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-purple-key), 1) * 100%));\n  --wa-color-pink-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-pink-key), 1) * 100%));\n  --wa-color-gray-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-gray-key), 1) * 100%));\n\n  /**\n    * Tokens to set text color with appropriate WCAG 2.1 contrast\n    * If key < 60, the text color is white\n    * If key >= 60, the text color is {hue}-10\n    */\n\n  --wa-color-red-on: color-mix(in oklab, var(--wa-color-red-10) var(--wa-color-red-gte-60), white);\n  --wa-color-orange-on: color-mix(in oklab, var(--wa-color-orange-10) var(--wa-color-orange-gte-60), white);\n  --wa-color-yellow-on: color-mix(in oklab, var(--wa-color-yellow-10) var(--wa-color-yellow-gte-60), white);\n  --wa-color-green-on: color-mix(in oklab, var(--wa-color-green-10) var(--wa-color-green-gte-60), white);\n  --wa-color-cyan-on: color-mix(in oklab, var(--wa-color-cyan-10) var(--wa-color-cyan-gte-60), white);\n  --wa-color-blue-on: color-mix(in oklab, var(--wa-color-blue-10) var(--wa-color-blue-gte-60), white);\n  --wa-color-indigo-on: color-mix(in oklab, var(--wa-color-indigo-10) var(--wa-color-indigo-gte-60), white);\n  --wa-color-purple-on: color-mix(in oklab, var(--wa-color-purple-10) var(--wa-color-purple-gte-60), white);\n  --wa-color-pink-on: color-mix(in oklab, var(--wa-color-pink-10) var(--wa-color-pink-gte-60), white);\n  --wa-color-gray-on: color-mix(in oklab, var(--wa-color-gray-10) var(--wa-color-gray-gte-60), white);\n}\n\n@layer wa-color-variant {\n  :where(:root), /* default */\n  .wa-brand-blue {\n    --wa-color-brand-95: var(--wa-color-blue-95);\n    --wa-color-brand-90: var(--wa-color-blue-90);\n    --wa-color-brand-80: var(--wa-color-blue-80);\n    --wa-color-brand-70: var(--wa-color-blue-70);\n    --wa-color-brand-60: var(--wa-color-blue-60);\n    --wa-color-brand-50: var(--wa-color-blue-50);\n    --wa-color-brand-40: var(--wa-color-blue-40);\n    --wa-color-brand-30: var(--wa-color-blue-30);\n    --wa-color-brand-20: var(--wa-color-blue-20);\n    --wa-color-brand-10: var(--wa-color-blue-10);\n    --wa-color-brand-05: var(--wa-color-blue-05);\n    --wa-color-brand: var(--wa-color-blue);\n    --wa-color-brand-on: var(--wa-color-blue-on);\n  }\n\n  .wa-brand-red {\n    --wa-color-brand-95: var(--wa-color-red-95);\n    --wa-color-brand-90: var(--wa-color-red-90);\n    --wa-color-brand-80: var(--wa-color-red-80);\n    --wa-color-brand-70: var(--wa-color-red-70);\n    --wa-color-brand-60: var(--wa-color-red-60);\n    --wa-color-brand-50: var(--wa-color-red-50);\n    --wa-color-brand-40: var(--wa-color-red-40);\n    --wa-color-brand-30: var(--wa-color-red-30);\n    --wa-color-brand-20: var(--wa-color-red-20);\n    --wa-color-brand-10: var(--wa-color-red-10);\n    --wa-color-brand-05: var(--wa-color-red-05);\n    --wa-color-brand: var(--wa-color-red);\n    --wa-color-brand-on: var(--wa-color-red-on);\n  }\n\n  .wa-brand-orange {\n    --wa-color-brand-95: var(--wa-color-orange-95);\n    --wa-color-brand-90: var(--wa-color-orange-90);\n    --wa-color-brand-80: var(--wa-color-orange-80);\n    --wa-color-brand-70: var(--wa-color-orange-70);\n    --wa-color-brand-60: var(--wa-color-orange-60);\n    --wa-color-brand-50: var(--wa-color-orange-50);\n    --wa-color-brand-40: var(--wa-color-orange-40);\n    --wa-color-brand-30: var(--wa-color-orange-30);\n    --wa-color-brand-20: var(--wa-color-orange-20);\n    --wa-color-brand-10: var(--wa-color-orange-10);\n    --wa-color-brand-05: var(--wa-color-orange-05);\n    --wa-color-brand: var(--wa-color-orange);\n    --wa-color-brand-on: var(--wa-color-orange-on);\n  }\n\n  .wa-brand-yellow {\n    --wa-color-brand-95: var(--wa-color-yellow-95);\n    --wa-color-brand-90: var(--wa-color-yellow-90);\n    --wa-color-brand-80: var(--wa-color-yellow-80);\n    --wa-color-brand-70: var(--wa-color-yellow-70);\n    --wa-color-brand-60: var(--wa-color-yellow-60);\n    --wa-color-brand-50: var(--wa-color-yellow-50);\n    --wa-color-brand-40: var(--wa-color-yellow-40);\n    --wa-color-brand-30: var(--wa-color-yellow-30);\n    --wa-color-brand-20: var(--wa-color-yellow-20);\n    --wa-color-brand-10: var(--wa-color-yellow-10);\n    --wa-color-brand-05: var(--wa-color-yellow-05);\n    --wa-color-brand: var(--wa-color-yellow);\n    --wa-color-brand-on: var(--wa-color-yellow-on);\n  }\n\n  .wa-brand-green {\n    --wa-color-brand-95: var(--wa-color-green-95);\n    --wa-color-brand-90: var(--wa-color-green-90);\n    --wa-color-brand-80: var(--wa-color-green-80);\n    --wa-color-brand-70: var(--wa-color-green-70);\n    --wa-color-brand-60: var(--wa-color-green-60);\n    --wa-color-brand-50: var(--wa-color-green-50);\n    --wa-color-brand-40: var(--wa-color-green-40);\n    --wa-color-brand-30: var(--wa-color-green-30);\n    --wa-color-brand-20: var(--wa-color-green-20);\n    --wa-color-brand-10: var(--wa-color-green-10);\n    --wa-color-brand-05: var(--wa-color-green-05);\n    --wa-color-brand: var(--wa-color-green);\n    --wa-color-brand-on: var(--wa-color-green-on);\n  }\n\n  .wa-brand-cyan {\n    --wa-color-brand-95: var(--wa-color-cyan-95);\n    --wa-color-brand-90: var(--wa-color-cyan-90);\n    --wa-color-brand-80: var(--wa-color-cyan-80);\n    --wa-color-brand-70: var(--wa-color-cyan-70);\n    --wa-color-brand-60: var(--wa-color-cyan-60);\n    --wa-color-brand-50: var(--wa-color-cyan-50);\n    --wa-color-brand-40: var(--wa-color-cyan-40);\n    --wa-color-brand-30: var(--wa-color-cyan-30);\n    --wa-color-brand-20: var(--wa-color-cyan-20);\n    --wa-color-brand-10: var(--wa-color-cyan-10);\n    --wa-color-brand-05: var(--wa-color-cyan-05);\n    --wa-color-brand: var(--wa-color-cyan);\n    --wa-color-brand-on: var(--wa-color-cyan-on);\n  }\n\n  .wa-brand-indigo {\n    --wa-color-brand-95: var(--wa-color-indigo-95);\n    --wa-color-brand-90: var(--wa-color-indigo-90);\n    --wa-color-brand-80: var(--wa-color-indigo-80);\n    --wa-color-brand-70: var(--wa-color-indigo-70);\n    --wa-color-brand-60: var(--wa-color-indigo-60);\n    --wa-color-brand-50: var(--wa-color-indigo-50);\n    --wa-color-brand-40: var(--wa-color-indigo-40);\n    --wa-color-brand-30: var(--wa-color-indigo-30);\n    --wa-color-brand-20: var(--wa-color-indigo-20);\n    --wa-color-brand-10: var(--wa-color-indigo-10);\n    --wa-color-brand-05: var(--wa-color-indigo-05);\n    --wa-color-brand: var(--wa-color-indigo);\n    --wa-color-brand-on: var(--wa-color-indigo-on);\n  }\n\n  .wa-brand-purple {\n    --wa-color-brand-95: var(--wa-color-purple-95);\n    --wa-color-brand-90: var(--wa-color-purple-90);\n    --wa-color-brand-80: var(--wa-color-purple-80);\n    --wa-color-brand-70: var(--wa-color-purple-70);\n    --wa-color-brand-60: var(--wa-color-purple-60);\n    --wa-color-brand-50: var(--wa-color-purple-50);\n    --wa-color-brand-40: var(--wa-color-purple-40);\n    --wa-color-brand-30: var(--wa-color-purple-30);\n    --wa-color-brand-20: var(--wa-color-purple-20);\n    --wa-color-brand-10: var(--wa-color-purple-10);\n    --wa-color-brand-05: var(--wa-color-purple-05);\n    --wa-color-brand: var(--wa-color-purple);\n    --wa-color-brand-on: var(--wa-color-purple-on);\n  }\n\n  .wa-brand-pink {\n    --wa-color-brand-95: var(--wa-color-pink-95);\n    --wa-color-brand-90: var(--wa-color-pink-90);\n    --wa-color-brand-80: var(--wa-color-pink-80);\n    --wa-color-brand-70: var(--wa-color-pink-70);\n    --wa-color-brand-60: var(--wa-color-pink-60);\n    --wa-color-brand-50: var(--wa-color-pink-50);\n    --wa-color-brand-40: var(--wa-color-pink-40);\n    --wa-color-brand-30: var(--wa-color-pink-30);\n    --wa-color-brand-20: var(--wa-color-pink-20);\n    --wa-color-brand-10: var(--wa-color-pink-10);\n    --wa-color-brand-05: var(--wa-color-pink-05);\n    --wa-color-brand: var(--wa-color-pink);\n    --wa-color-brand-on: var(--wa-color-pink-on);\n  }\n\n  .wa-brand-gray {\n    --wa-color-brand-95: var(--wa-color-gray-95);\n    --wa-color-brand-90: var(--wa-color-gray-90);\n    --wa-color-brand-80: var(--wa-color-gray-80);\n    --wa-color-brand-70: var(--wa-color-gray-70);\n    --wa-color-brand-60: var(--wa-color-gray-60);\n    --wa-color-brand-50: var(--wa-color-gray-50);\n    --wa-color-brand-40: var(--wa-color-gray-40);\n    --wa-color-brand-30: var(--wa-color-gray-30);\n    --wa-color-brand-20: var(--wa-color-gray-20);\n    --wa-color-brand-10: var(--wa-color-gray-10);\n    --wa-color-brand-05: var(--wa-color-gray-05);\n    --wa-color-brand: var(--wa-color-gray);\n    --wa-color-brand-on: var(--wa-color-gray-on);\n  }\n}\n\n@layer wa-color-variant {\n  :where(:root), /* default */\n  .wa-neutral-gray {\n    --wa-color-neutral-95: var(--wa-color-gray-95);\n    --wa-color-neutral-90: var(--wa-color-gray-90);\n    --wa-color-neutral-80: var(--wa-color-gray-80);\n    --wa-color-neutral-70: var(--wa-color-gray-70);\n    --wa-color-neutral-60: var(--wa-color-gray-60);\n    --wa-color-neutral-50: var(--wa-color-gray-50);\n    --wa-color-neutral-40: var(--wa-color-gray-40);\n    --wa-color-neutral-30: var(--wa-color-gray-30);\n    --wa-color-neutral-20: var(--wa-color-gray-20);\n    --wa-color-neutral-10: var(--wa-color-gray-10);\n    --wa-color-neutral-05: var(--wa-color-gray-05);\n    --wa-color-neutral: var(--wa-color-gray);\n    --wa-color-neutral-on: var(--wa-color-gray-on);\n  }\n\n  .wa-neutral-red {\n    --wa-color-neutral-95: var(--wa-color-red-95);\n    --wa-color-neutral-90: var(--wa-color-red-90);\n    --wa-color-neutral-80: var(--wa-color-red-80);\n    --wa-color-neutral-70: var(--wa-color-red-70);\n    --wa-color-neutral-60: var(--wa-color-red-60);\n    --wa-color-neutral-50: var(--wa-color-red-50);\n    --wa-color-neutral-40: var(--wa-color-red-40);\n    --wa-color-neutral-30: var(--wa-color-red-30);\n    --wa-color-neutral-20: var(--wa-color-red-20);\n    --wa-color-neutral-10: var(--wa-color-red-10);\n    --wa-color-neutral-05: var(--wa-color-red-05);\n    --wa-color-neutral: var(--wa-color-red);\n    --wa-color-neutral-on: var(--wa-color-red-on);\n  }\n\n  .wa-neutral-orange {\n    --wa-color-neutral-95: var(--wa-color-orange-95);\n    --wa-color-neutral-90: var(--wa-color-orange-90);\n    --wa-color-neutral-80: var(--wa-color-orange-80);\n    --wa-color-neutral-70: var(--wa-color-orange-70);\n    --wa-color-neutral-60: var(--wa-color-orange-60);\n    --wa-color-neutral-50: var(--wa-color-orange-50);\n    --wa-color-neutral-40: var(--wa-color-orange-40);\n    --wa-color-neutral-30: var(--wa-color-orange-30);\n    --wa-color-neutral-20: var(--wa-color-orange-20);\n    --wa-color-neutral-10: var(--wa-color-orange-10);\n    --wa-color-neutral-05: var(--wa-color-orange-05);\n    --wa-color-neutral: var(--wa-color-orange);\n    --wa-color-neutral-on: var(--wa-color-orange-on);\n  }\n\n  .wa-neutral-yellow {\n    --wa-color-neutral-95: var(--wa-color-yellow-95);\n    --wa-color-neutral-90: var(--wa-color-yellow-90);\n    --wa-color-neutral-80: var(--wa-color-yellow-80);\n    --wa-color-neutral-70: var(--wa-color-yellow-70);\n    --wa-color-neutral-60: var(--wa-color-yellow-60);\n    --wa-color-neutral-50: var(--wa-color-yellow-50);\n    --wa-color-neutral-40: var(--wa-color-yellow-40);\n    --wa-color-neutral-30: var(--wa-color-yellow-30);\n    --wa-color-neutral-20: var(--wa-color-yellow-20);\n    --wa-color-neutral-10: var(--wa-color-yellow-10);\n    --wa-color-neutral-05: var(--wa-color-yellow-05);\n    --wa-color-neutral: var(--wa-color-yellow);\n    --wa-color-neutral-on: var(--wa-color-yellow-on);\n  }\n\n  .wa-neutral-green {\n    --wa-color-neutral-95: var(--wa-color-green-95);\n    --wa-color-neutral-90: var(--wa-color-green-90);\n    --wa-color-neutral-80: var(--wa-color-green-80);\n    --wa-color-neutral-70: var(--wa-color-green-70);\n    --wa-color-neutral-60: var(--wa-color-green-60);\n    --wa-color-neutral-50: var(--wa-color-green-50);\n    --wa-color-neutral-40: var(--wa-color-green-40);\n    --wa-color-neutral-30: var(--wa-color-green-30);\n    --wa-color-neutral-20: var(--wa-color-green-20);\n    --wa-color-neutral-10: var(--wa-color-green-10);\n    --wa-color-neutral-05: var(--wa-color-green-05);\n    --wa-color-neutral: var(--wa-color-green);\n    --wa-color-neutral-on: var(--wa-color-green-on);\n  }\n\n  .wa-neutral-cyan {\n    --wa-color-neutral-95: var(--wa-color-cyan-95);\n    --wa-color-neutral-90: var(--wa-color-cyan-90);\n    --wa-color-neutral-80: var(--wa-color-cyan-80);\n    --wa-color-neutral-70: var(--wa-color-cyan-70);\n    --wa-color-neutral-60: var(--wa-color-cyan-60);\n    --wa-color-neutral-50: var(--wa-color-cyan-50);\n    --wa-color-neutral-40: var(--wa-color-cyan-40);\n    --wa-color-neutral-30: var(--wa-color-cyan-30);\n    --wa-color-neutral-20: var(--wa-color-cyan-20);\n    --wa-color-neutral-10: var(--wa-color-cyan-10);\n    --wa-color-neutral-05: var(--wa-color-cyan-05);\n    --wa-color-neutral: var(--wa-color-cyan);\n    --wa-color-neutral-on: var(--wa-color-cyan-on);\n  }\n\n  .wa-neutral-blue {\n    --wa-color-neutral-95: var(--wa-color-blue-95);\n    --wa-color-neutral-90: var(--wa-color-blue-90);\n    --wa-color-neutral-80: var(--wa-color-blue-80);\n    --wa-color-neutral-70: var(--wa-color-blue-70);\n    --wa-color-neutral-60: var(--wa-color-blue-60);\n    --wa-color-neutral-50: var(--wa-color-blue-50);\n    --wa-color-neutral-40: var(--wa-color-blue-40);\n    --wa-color-neutral-30: var(--wa-color-blue-30);\n    --wa-color-neutral-20: var(--wa-color-blue-20);\n    --wa-color-neutral-10: var(--wa-color-blue-10);\n    --wa-color-neutral-05: var(--wa-color-blue-05);\n    --wa-color-neutral: var(--wa-color-blue);\n    --wa-color-neutral-on: var(--wa-color-blue-on);\n  }\n\n  .wa-neutral-indigo {\n    --wa-color-neutral-95: var(--wa-color-indigo-95);\n    --wa-color-neutral-90: var(--wa-color-indigo-90);\n    --wa-color-neutral-80: var(--wa-color-indigo-80);\n    --wa-color-neutral-70: var(--wa-color-indigo-70);\n    --wa-color-neutral-60: var(--wa-color-indigo-60);\n    --wa-color-neutral-50: var(--wa-color-indigo-50);\n    --wa-color-neutral-40: var(--wa-color-indigo-40);\n    --wa-color-neutral-30: var(--wa-color-indigo-30);\n    --wa-color-neutral-20: var(--wa-color-indigo-20);\n    --wa-color-neutral-10: var(--wa-color-indigo-10);\n    --wa-color-neutral-05: var(--wa-color-indigo-05);\n    --wa-color-neutral: var(--wa-color-indigo);\n    --wa-color-neutral-on: var(--wa-color-indigo-on);\n  }\n\n  .wa-neutral-purple {\n    --wa-color-neutral-95: var(--wa-color-purple-95);\n    --wa-color-neutral-90: var(--wa-color-purple-90);\n    --wa-color-neutral-80: var(--wa-color-purple-80);\n    --wa-color-neutral-70: var(--wa-color-purple-70);\n    --wa-color-neutral-60: var(--wa-color-purple-60);\n    --wa-color-neutral-50: var(--wa-color-purple-50);\n    --wa-color-neutral-40: var(--wa-color-purple-40);\n    --wa-color-neutral-30: var(--wa-color-purple-30);\n    --wa-color-neutral-20: var(--wa-color-purple-20);\n    --wa-color-neutral-10: var(--wa-color-purple-10);\n    --wa-color-neutral-05: var(--wa-color-purple-05);\n    --wa-color-neutral: var(--wa-color-purple);\n    --wa-color-neutral-on: var(--wa-color-purple-on);\n  }\n\n  .wa-neutral-pink {\n    --wa-color-neutral-95: var(--wa-color-pink-95);\n    --wa-color-neutral-90: var(--wa-color-pink-90);\n    --wa-color-neutral-80: var(--wa-color-pink-80);\n    --wa-color-neutral-70: var(--wa-color-pink-70);\n    --wa-color-neutral-60: var(--wa-color-pink-60);\n    --wa-color-neutral-50: var(--wa-color-pink-50);\n    --wa-color-neutral-40: var(--wa-color-pink-40);\n    --wa-color-neutral-30: var(--wa-color-pink-30);\n    --wa-color-neutral-20: var(--wa-color-pink-20);\n    --wa-color-neutral-10: var(--wa-color-pink-10);\n    --wa-color-neutral-05: var(--wa-color-pink-05);\n    --wa-color-neutral: var(--wa-color-pink);\n    --wa-color-neutral-on: var(--wa-color-pink-on);\n  }\n}\n\n@layer wa-color-variant {\n  :where(:root), /* default */\n  .wa-success-green {\n    --wa-color-success-95: var(--wa-color-green-95);\n    --wa-color-success-90: var(--wa-color-green-90);\n    --wa-color-success-80: var(--wa-color-green-80);\n    --wa-color-success-70: var(--wa-color-green-70);\n    --wa-color-success-60: var(--wa-color-green-60);\n    --wa-color-success-50: var(--wa-color-green-50);\n    --wa-color-success-40: var(--wa-color-green-40);\n    --wa-color-success-30: var(--wa-color-green-30);\n    --wa-color-success-20: var(--wa-color-green-20);\n    --wa-color-success-10: var(--wa-color-green-10);\n    --wa-color-success-05: var(--wa-color-green-05);\n    --wa-color-success: var(--wa-color-green);\n    --wa-color-success-on: var(--wa-color-green-on);\n  }\n\n  .wa-success-red {\n    --wa-color-success-95: var(--wa-color-red-95);\n    --wa-color-success-90: var(--wa-color-red-90);\n    --wa-color-success-80: var(--wa-color-red-80);\n    --wa-color-success-70: var(--wa-color-red-70);\n    --wa-color-success-60: var(--wa-color-red-60);\n    --wa-color-success-50: var(--wa-color-red-50);\n    --wa-color-success-40: var(--wa-color-red-40);\n    --wa-color-success-30: var(--wa-color-red-30);\n    --wa-color-success-20: var(--wa-color-red-20);\n    --wa-color-success-10: var(--wa-color-red-10);\n    --wa-color-success-05: var(--wa-color-red-05);\n    --wa-color-success: var(--wa-color-red);\n    --wa-color-success-on: var(--wa-color-red-on);\n  }\n\n  .wa-success-orange {\n    --wa-color-success-95: var(--wa-color-orange-95);\n    --wa-color-success-90: var(--wa-color-orange-90);\n    --wa-color-success-80: var(--wa-color-orange-80);\n    --wa-color-success-70: var(--wa-color-orange-70);\n    --wa-color-success-60: var(--wa-color-orange-60);\n    --wa-color-success-50: var(--wa-color-orange-50);\n    --wa-color-success-40: var(--wa-color-orange-40);\n    --wa-color-success-30: var(--wa-color-orange-30);\n    --wa-color-success-20: var(--wa-color-orange-20);\n    --wa-color-success-10: var(--wa-color-orange-10);\n    --wa-color-success-05: var(--wa-color-orange-05);\n    --wa-color-success: var(--wa-color-orange);\n    --wa-color-success-on: var(--wa-color-orange-on);\n  }\n\n  .wa-success-yellow {\n    --wa-color-success-95: var(--wa-color-yellow-95);\n    --wa-color-success-90: var(--wa-color-yellow-90);\n    --wa-color-success-80: var(--wa-color-yellow-80);\n    --wa-color-success-70: var(--wa-color-yellow-70);\n    --wa-color-success-60: var(--wa-color-yellow-60);\n    --wa-color-success-50: var(--wa-color-yellow-50);\n    --wa-color-success-40: var(--wa-color-yellow-40);\n    --wa-color-success-30: var(--wa-color-yellow-30);\n    --wa-color-success-20: var(--wa-color-yellow-20);\n    --wa-color-success-10: var(--wa-color-yellow-10);\n    --wa-color-success-05: var(--wa-color-yellow-05);\n    --wa-color-success: var(--wa-color-yellow);\n    --wa-color-success-on: var(--wa-color-yellow-on);\n  }\n\n  .wa-success-cyan {\n    --wa-color-success-95: var(--wa-color-cyan-95);\n    --wa-color-success-90: var(--wa-color-cyan-90);\n    --wa-color-success-80: var(--wa-color-cyan-80);\n    --wa-color-success-70: var(--wa-color-cyan-70);\n    --wa-color-success-60: var(--wa-color-cyan-60);\n    --wa-color-success-50: var(--wa-color-cyan-50);\n    --wa-color-success-40: var(--wa-color-cyan-40);\n    --wa-color-success-30: var(--wa-color-cyan-30);\n    --wa-color-success-20: var(--wa-color-cyan-20);\n    --wa-color-success-10: var(--wa-color-cyan-10);\n    --wa-color-success-05: var(--wa-color-cyan-05);\n    --wa-color-success: var(--wa-color-cyan);\n    --wa-color-success-on: var(--wa-color-cyan-on);\n  }\n\n  .wa-success-blue {\n    --wa-color-success-95: var(--wa-color-blue-95);\n    --wa-color-success-90: var(--wa-color-blue-90);\n    --wa-color-success-80: var(--wa-color-blue-80);\n    --wa-color-success-70: var(--wa-color-blue-70);\n    --wa-color-success-60: var(--wa-color-blue-60);\n    --wa-color-success-50: var(--wa-color-blue-50);\n    --wa-color-success-40: var(--wa-color-blue-40);\n    --wa-color-success-30: var(--wa-color-blue-30);\n    --wa-color-success-20: var(--wa-color-blue-20);\n    --wa-color-success-10: var(--wa-color-blue-10);\n    --wa-color-success-05: var(--wa-color-blue-05);\n    --wa-color-success: var(--wa-color-blue);\n    --wa-color-success-on: var(--wa-color-blue-on);\n  }\n\n  .wa-success-indigo {\n    --wa-color-success-95: var(--wa-color-indigo-95);\n    --wa-color-success-90: var(--wa-color-indigo-90);\n    --wa-color-success-80: var(--wa-color-indigo-80);\n    --wa-color-success-70: var(--wa-color-indigo-70);\n    --wa-color-success-60: var(--wa-color-indigo-60);\n    --wa-color-success-50: var(--wa-color-indigo-50);\n    --wa-color-success-40: var(--wa-color-indigo-40);\n    --wa-color-success-30: var(--wa-color-indigo-30);\n    --wa-color-success-20: var(--wa-color-indigo-20);\n    --wa-color-success-10: var(--wa-color-indigo-10);\n    --wa-color-success-05: var(--wa-color-indigo-05);\n    --wa-color-success: var(--wa-color-indigo);\n    --wa-color-success-on: var(--wa-color-indigo-on);\n  }\n\n  .wa-success-purple {\n    --wa-color-success-95: var(--wa-color-purple-95);\n    --wa-color-success-90: var(--wa-color-purple-90);\n    --wa-color-success-80: var(--wa-color-purple-80);\n    --wa-color-success-70: var(--wa-color-purple-70);\n    --wa-color-success-60: var(--wa-color-purple-60);\n    --wa-color-success-50: var(--wa-color-purple-50);\n    --wa-color-success-40: var(--wa-color-purple-40);\n    --wa-color-success-30: var(--wa-color-purple-30);\n    --wa-color-success-20: var(--wa-color-purple-20);\n    --wa-color-success-10: var(--wa-color-purple-10);\n    --wa-color-success-05: var(--wa-color-purple-05);\n    --wa-color-success: var(--wa-color-purple);\n    --wa-color-success-on: var(--wa-color-purple-on);\n  }\n\n  .wa-success-pink {\n    --wa-color-success-95: var(--wa-color-pink-95);\n    --wa-color-success-90: var(--wa-color-pink-90);\n    --wa-color-success-80: var(--wa-color-pink-80);\n    --wa-color-success-70: var(--wa-color-pink-70);\n    --wa-color-success-60: var(--wa-color-pink-60);\n    --wa-color-success-50: var(--wa-color-pink-50);\n    --wa-color-success-40: var(--wa-color-pink-40);\n    --wa-color-success-30: var(--wa-color-pink-30);\n    --wa-color-success-20: var(--wa-color-pink-20);\n    --wa-color-success-10: var(--wa-color-pink-10);\n    --wa-color-success-05: var(--wa-color-pink-05);\n    --wa-color-success: var(--wa-color-pink);\n    --wa-color-success-on: var(--wa-color-pink-on);\n  }\n\n  .wa-success-gray {\n    --wa-color-success-95: var(--wa-color-gray-95);\n    --wa-color-success-90: var(--wa-color-gray-90);\n    --wa-color-success-80: var(--wa-color-gray-80);\n    --wa-color-success-70: var(--wa-color-gray-70);\n    --wa-color-success-60: var(--wa-color-gray-60);\n    --wa-color-success-50: var(--wa-color-gray-50);\n    --wa-color-success-40: var(--wa-color-gray-40);\n    --wa-color-success-30: var(--wa-color-gray-30);\n    --wa-color-success-20: var(--wa-color-gray-20);\n    --wa-color-success-10: var(--wa-color-gray-10);\n    --wa-color-success-05: var(--wa-color-gray-05);\n    --wa-color-success: var(--wa-color-gray);\n    --wa-color-success-on: var(--wa-color-gray-on);\n  }\n}\n\n@layer wa-color-variant {\n  :where(:root), /* default */\n  .wa-warning-yellow {\n    --wa-color-warning-95: var(--wa-color-yellow-95);\n    --wa-color-warning-90: var(--wa-color-yellow-90);\n    --wa-color-warning-80: var(--wa-color-yellow-80);\n    --wa-color-warning-70: var(--wa-color-yellow-70);\n    --wa-color-warning-60: var(--wa-color-yellow-60);\n    --wa-color-warning-50: var(--wa-color-yellow-50);\n    --wa-color-warning-40: var(--wa-color-yellow-40);\n    --wa-color-warning-30: var(--wa-color-yellow-30);\n    --wa-color-warning-20: var(--wa-color-yellow-20);\n    --wa-color-warning-10: var(--wa-color-yellow-10);\n    --wa-color-warning-05: var(--wa-color-yellow-05);\n    --wa-color-warning: var(--wa-color-yellow);\n    --wa-color-warning-on: var(--wa-color-yellow-on);\n  }\n\n  .wa-warning-red {\n    --wa-color-warning-95: var(--wa-color-red-95);\n    --wa-color-warning-90: var(--wa-color-red-90);\n    --wa-color-warning-80: var(--wa-color-red-80);\n    --wa-color-warning-70: var(--wa-color-red-70);\n    --wa-color-warning-60: var(--wa-color-red-60);\n    --wa-color-warning-50: var(--wa-color-red-50);\n    --wa-color-warning-40: var(--wa-color-red-40);\n    --wa-color-warning-30: var(--wa-color-red-30);\n    --wa-color-warning-20: var(--wa-color-red-20);\n    --wa-color-warning-10: var(--wa-color-red-10);\n    --wa-color-warning-05: var(--wa-color-red-05);\n    --wa-color-warning: var(--wa-color-red);\n    --wa-color-warning-on: var(--wa-color-red-on);\n  }\n\n  .wa-warning-orange {\n    --wa-color-warning-95: var(--wa-color-orange-95);\n    --wa-color-warning-90: var(--wa-color-orange-90);\n    --wa-color-warning-80: var(--wa-color-orange-80);\n    --wa-color-warning-70: var(--wa-color-orange-70);\n    --wa-color-warning-60: var(--wa-color-orange-60);\n    --wa-color-warning-50: var(--wa-color-orange-50);\n    --wa-color-warning-40: var(--wa-color-orange-40);\n    --wa-color-warning-30: var(--wa-color-orange-30);\n    --wa-color-warning-20: var(--wa-color-orange-20);\n    --wa-color-warning-10: var(--wa-color-orange-10);\n    --wa-color-warning-05: var(--wa-color-orange-05);\n    --wa-color-warning: var(--wa-color-orange);\n    --wa-color-warning-on: var(--wa-color-orange-on);\n  }\n\n  .wa-warning-green {\n    --wa-color-warning-95: var(--wa-color-green-95);\n    --wa-color-warning-90: var(--wa-color-green-90);\n    --wa-color-warning-80: var(--wa-color-green-80);\n    --wa-color-warning-70: var(--wa-color-green-70);\n    --wa-color-warning-60: var(--wa-color-green-60);\n    --wa-color-warning-50: var(--wa-color-green-50);\n    --wa-color-warning-40: var(--wa-color-green-40);\n    --wa-color-warning-30: var(--wa-color-green-30);\n    --wa-color-warning-20: var(--wa-color-green-20);\n    --wa-color-warning-10: var(--wa-color-green-10);\n    --wa-color-warning-05: var(--wa-color-green-05);\n    --wa-color-warning: var(--wa-color-green);\n    --wa-color-warning-on: var(--wa-color-green-on);\n  }\n\n  .wa-warning-cyan {\n    --wa-color-warning-95: var(--wa-color-cyan-95);\n    --wa-color-warning-90: var(--wa-color-cyan-90);\n    --wa-color-warning-80: var(--wa-color-cyan-80);\n    --wa-color-warning-70: var(--wa-color-cyan-70);\n    --wa-color-warning-60: var(--wa-color-cyan-60);\n    --wa-color-warning-50: var(--wa-color-cyan-50);\n    --wa-color-warning-40: var(--wa-color-cyan-40);\n    --wa-color-warning-30: var(--wa-color-cyan-30);\n    --wa-color-warning-20: var(--wa-color-cyan-20);\n    --wa-color-warning-10: var(--wa-color-cyan-10);\n    --wa-color-warning-05: var(--wa-color-cyan-05);\n    --wa-color-warning: var(--wa-color-cyan);\n    --wa-color-warning-on: var(--wa-color-cyan-on);\n  }\n\n  .wa-warning-blue {\n    --wa-color-warning-95: var(--wa-color-blue-95);\n    --wa-color-warning-90: var(--wa-color-blue-90);\n    --wa-color-warning-80: var(--wa-color-blue-80);\n    --wa-color-warning-70: var(--wa-color-blue-70);\n    --wa-color-warning-60: var(--wa-color-blue-60);\n    --wa-color-warning-50: var(--wa-color-blue-50);\n    --wa-color-warning-40: var(--wa-color-blue-40);\n    --wa-color-warning-30: var(--wa-color-blue-30);\n    --wa-color-warning-20: var(--wa-color-blue-20);\n    --wa-color-warning-10: var(--wa-color-blue-10);\n    --wa-color-warning-05: var(--wa-color-blue-05);\n    --wa-color-warning: var(--wa-color-blue);\n    --wa-color-warning-on: var(--wa-color-blue-on);\n  }\n\n  .wa-warning-indigo {\n    --wa-color-warning-95: var(--wa-color-indigo-95);\n    --wa-color-warning-90: var(--wa-color-indigo-90);\n    --wa-color-warning-80: var(--wa-color-indigo-80);\n    --wa-color-warning-70: var(--wa-color-indigo-70);\n    --wa-color-warning-60: var(--wa-color-indigo-60);\n    --wa-color-warning-50: var(--wa-color-indigo-50);\n    --wa-color-warning-40: var(--wa-color-indigo-40);\n    --wa-color-warning-30: var(--wa-color-indigo-30);\n    --wa-color-warning-20: var(--wa-color-indigo-20);\n    --wa-color-warning-10: var(--wa-color-indigo-10);\n    --wa-color-warning-05: var(--wa-color-indigo-05);\n    --wa-color-warning: var(--wa-color-indigo);\n    --wa-color-warning-on: var(--wa-color-indigo-on);\n  }\n\n  .wa-warning-purple {\n    --wa-color-warning-95: var(--wa-color-purple-95);\n    --wa-color-warning-90: var(--wa-color-purple-90);\n    --wa-color-warning-80: var(--wa-color-purple-80);\n    --wa-color-warning-70: var(--wa-color-purple-70);\n    --wa-color-warning-60: var(--wa-color-purple-60);\n    --wa-color-warning-50: var(--wa-color-purple-50);\n    --wa-color-warning-40: var(--wa-color-purple-40);\n    --wa-color-warning-30: var(--wa-color-purple-30);\n    --wa-color-warning-20: var(--wa-color-purple-20);\n    --wa-color-warning-10: var(--wa-color-purple-10);\n    --wa-color-warning-05: var(--wa-color-purple-05);\n    --wa-color-warning: var(--wa-color-purple);\n    --wa-color-warning-on: var(--wa-color-purple-on);\n  }\n\n  .wa-warning-pink {\n    --wa-color-warning-95: var(--wa-color-pink-95);\n    --wa-color-warning-90: var(--wa-color-pink-90);\n    --wa-color-warning-80: var(--wa-color-pink-80);\n    --wa-color-warning-70: var(--wa-color-pink-70);\n    --wa-color-warning-60: var(--wa-color-pink-60);\n    --wa-color-warning-50: var(--wa-color-pink-50);\n    --wa-color-warning-40: var(--wa-color-pink-40);\n    --wa-color-warning-30: var(--wa-color-pink-30);\n    --wa-color-warning-20: var(--wa-color-pink-20);\n    --wa-color-warning-10: var(--wa-color-pink-10);\n    --wa-color-warning-05: var(--wa-color-pink-05);\n    --wa-color-warning: var(--wa-color-pink);\n    --wa-color-warning-on: var(--wa-color-pink-on);\n  }\n\n  .wa-warning-gray {\n    --wa-color-warning-95: var(--wa-color-gray-95);\n    --wa-color-warning-90: var(--wa-color-gray-90);\n    --wa-color-warning-80: var(--wa-color-gray-80);\n    --wa-color-warning-70: var(--wa-color-gray-70);\n    --wa-color-warning-60: var(--wa-color-gray-60);\n    --wa-color-warning-50: var(--wa-color-gray-50);\n    --wa-color-warning-40: var(--wa-color-gray-40);\n    --wa-color-warning-30: var(--wa-color-gray-30);\n    --wa-color-warning-20: var(--wa-color-gray-20);\n    --wa-color-warning-10: var(--wa-color-gray-10);\n    --wa-color-warning-05: var(--wa-color-gray-05);\n    --wa-color-warning: var(--wa-color-gray);\n    --wa-color-warning-on: var(--wa-color-gray-on);\n  }\n}\n\n@layer wa-color-variant {\n  :where(:root), /* default */\n  .wa-danger-red {\n    --wa-color-danger-95: var(--wa-color-red-95);\n    --wa-color-danger-90: var(--wa-color-red-90);\n    --wa-color-danger-80: var(--wa-color-red-80);\n    --wa-color-danger-70: var(--wa-color-red-70);\n    --wa-color-danger-60: var(--wa-color-red-60);\n    --wa-color-danger-50: var(--wa-color-red-50);\n    --wa-color-danger-40: var(--wa-color-red-40);\n    --wa-color-danger-30: var(--wa-color-red-30);\n    --wa-color-danger-20: var(--wa-color-red-20);\n    --wa-color-danger-10: var(--wa-color-red-10);\n    --wa-color-danger-05: var(--wa-color-red-05);\n    --wa-color-danger: var(--wa-color-red);\n    --wa-color-danger-on: var(--wa-color-red-on);\n  }\n\n  .wa-danger-orange {\n    --wa-color-danger-95: var(--wa-color-orange-95);\n    --wa-color-danger-90: var(--wa-color-orange-90);\n    --wa-color-danger-80: var(--wa-color-orange-80);\n    --wa-color-danger-70: var(--wa-color-orange-70);\n    --wa-color-danger-60: var(--wa-color-orange-60);\n    --wa-color-danger-50: var(--wa-color-orange-50);\n    --wa-color-danger-40: var(--wa-color-orange-40);\n    --wa-color-danger-30: var(--wa-color-orange-30);\n    --wa-color-danger-20: var(--wa-color-orange-20);\n    --wa-color-danger-10: var(--wa-color-orange-10);\n    --wa-color-danger-05: var(--wa-color-orange-05);\n    --wa-color-danger: var(--wa-color-orange);\n    --wa-color-danger-on: var(--wa-color-orange-on);\n  }\n\n  .wa-danger-yellow {\n    --wa-color-danger-95: var(--wa-color-yellow-95);\n    --wa-color-danger-90: var(--wa-color-yellow-90);\n    --wa-color-danger-80: var(--wa-color-yellow-80);\n    --wa-color-danger-70: var(--wa-color-yellow-70);\n    --wa-color-danger-60: var(--wa-color-yellow-60);\n    --wa-color-danger-50: var(--wa-color-yellow-50);\n    --wa-color-danger-40: var(--wa-color-yellow-40);\n    --wa-color-danger-30: var(--wa-color-yellow-30);\n    --wa-color-danger-20: var(--wa-color-yellow-20);\n    --wa-color-danger-10: var(--wa-color-yellow-10);\n    --wa-color-danger-05: var(--wa-color-yellow-05);\n    --wa-color-danger: var(--wa-color-yellow);\n    --wa-color-danger-on: var(--wa-color-yellow-on);\n  }\n\n  .wa-danger-green {\n    --wa-color-danger-95: var(--wa-color-green-95);\n    --wa-color-danger-90: var(--wa-color-green-90);\n    --wa-color-danger-80: var(--wa-color-green-80);\n    --wa-color-danger-70: var(--wa-color-green-70);\n    --wa-color-danger-60: var(--wa-color-green-60);\n    --wa-color-danger-50: var(--wa-color-green-50);\n    --wa-color-danger-40: var(--wa-color-green-40);\n    --wa-color-danger-30: var(--wa-color-green-30);\n    --wa-color-danger-20: var(--wa-color-green-20);\n    --wa-color-danger-10: var(--wa-color-green-10);\n    --wa-color-danger-05: var(--wa-color-green-05);\n    --wa-color-danger: var(--wa-color-green);\n    --wa-color-danger-on: var(--wa-color-green-on);\n  }\n\n  .wa-danger-cyan {\n    --wa-color-danger-95: var(--wa-color-cyan-95);\n    --wa-color-danger-90: var(--wa-color-cyan-90);\n    --wa-color-danger-80: var(--wa-color-cyan-80);\n    --wa-color-danger-70: var(--wa-color-cyan-70);\n    --wa-color-danger-60: var(--wa-color-cyan-60);\n    --wa-color-danger-50: var(--wa-color-cyan-50);\n    --wa-color-danger-40: var(--wa-color-cyan-40);\n    --wa-color-danger-30: var(--wa-color-cyan-30);\n    --wa-color-danger-20: var(--wa-color-cyan-20);\n    --wa-color-danger-10: var(--wa-color-cyan-10);\n    --wa-color-danger-05: var(--wa-color-cyan-05);\n    --wa-color-danger: var(--wa-color-cyan);\n    --wa-color-danger-on: var(--wa-color-cyan-on);\n  }\n\n  .wa-danger-blue {\n    --wa-color-danger-95: var(--wa-color-blue-95);\n    --wa-color-danger-90: var(--wa-color-blue-90);\n    --wa-color-danger-80: var(--wa-color-blue-80);\n    --wa-color-danger-70: var(--wa-color-blue-70);\n    --wa-color-danger-60: var(--wa-color-blue-60);\n    --wa-color-danger-50: var(--wa-color-blue-50);\n    --wa-color-danger-40: var(--wa-color-blue-40);\n    --wa-color-danger-30: var(--wa-color-blue-30);\n    --wa-color-danger-20: var(--wa-color-blue-20);\n    --wa-color-danger-10: var(--wa-color-blue-10);\n    --wa-color-danger-05: var(--wa-color-blue-05);\n    --wa-color-danger: var(--wa-color-blue);\n    --wa-color-danger-on: var(--wa-color-blue-on);\n  }\n\n  .wa-danger-indigo {\n    --wa-color-danger-95: var(--wa-color-indigo-95);\n    --wa-color-danger-90: var(--wa-color-indigo-90);\n    --wa-color-danger-80: var(--wa-color-indigo-80);\n    --wa-color-danger-70: var(--wa-color-indigo-70);\n    --wa-color-danger-60: var(--wa-color-indigo-60);\n    --wa-color-danger-50: var(--wa-color-indigo-50);\n    --wa-color-danger-40: var(--wa-color-indigo-40);\n    --wa-color-danger-30: var(--wa-color-indigo-30);\n    --wa-color-danger-20: var(--wa-color-indigo-20);\n    --wa-color-danger-10: var(--wa-color-indigo-10);\n    --wa-color-danger-05: var(--wa-color-indigo-05);\n    --wa-color-danger: var(--wa-color-indigo);\n    --wa-color-danger-on: var(--wa-color-indigo-on);\n  }\n\n  .wa-danger-purple {\n    --wa-color-danger-95: var(--wa-color-purple-95);\n    --wa-color-danger-90: var(--wa-color-purple-90);\n    --wa-color-danger-80: var(--wa-color-purple-80);\n    --wa-color-danger-70: var(--wa-color-purple-70);\n    --wa-color-danger-60: var(--wa-color-purple-60);\n    --wa-color-danger-50: var(--wa-color-purple-50);\n    --wa-color-danger-40: var(--wa-color-purple-40);\n    --wa-color-danger-30: var(--wa-color-purple-30);\n    --wa-color-danger-20: var(--wa-color-purple-20);\n    --wa-color-danger-10: var(--wa-color-purple-10);\n    --wa-color-danger-05: var(--wa-color-purple-05);\n    --wa-color-danger: var(--wa-color-purple);\n    --wa-color-danger-on: var(--wa-color-purple-on);\n  }\n\n  .wa-danger-pink {\n    --wa-color-danger-95: var(--wa-color-pink-95);\n    --wa-color-danger-90: var(--wa-color-pink-90);\n    --wa-color-danger-80: var(--wa-color-pink-80);\n    --wa-color-danger-70: var(--wa-color-pink-70);\n    --wa-color-danger-60: var(--wa-color-pink-60);\n    --wa-color-danger-50: var(--wa-color-pink-50);\n    --wa-color-danger-40: var(--wa-color-pink-40);\n    --wa-color-danger-30: var(--wa-color-pink-30);\n    --wa-color-danger-20: var(--wa-color-pink-20);\n    --wa-color-danger-10: var(--wa-color-pink-10);\n    --wa-color-danger-05: var(--wa-color-pink-05);\n    --wa-color-danger: var(--wa-color-pink);\n    --wa-color-danger-on: var(--wa-color-pink-on);\n  }\n\n  .wa-danger-gray {\n    --wa-color-danger-95: var(--wa-color-gray-95);\n    --wa-color-danger-90: var(--wa-color-gray-90);\n    --wa-color-danger-80: var(--wa-color-gray-80);\n    --wa-color-danger-70: var(--wa-color-gray-70);\n    --wa-color-danger-60: var(--wa-color-gray-60);\n    --wa-color-danger-50: var(--wa-color-gray-50);\n    --wa-color-danger-40: var(--wa-color-gray-40);\n    --wa-color-danger-30: var(--wa-color-gray-30);\n    --wa-color-danger-20: var(--wa-color-gray-20);\n    --wa-color-danger-10: var(--wa-color-gray-10);\n    --wa-color-danger-05: var(--wa-color-gray-05);\n    --wa-color-danger: var(--wa-color-gray);\n    --wa-color-danger-on: var(--wa-color-gray-on);\n  }\n}\n\n\n\n@layer wa-color-palette {\n  :where(:root),\n  .wa-palette-default {\n    --wa-color-red-95: #fff0ef /* oklch(96.667% 0.01632 22.08) */;\n    --wa-color-red-90: #ffdedc /* oklch(92.735% 0.03679 21.966) */;\n    --wa-color-red-80: #ffb8b6 /* oklch(84.803% 0.08289 20.771) */;\n    --wa-color-red-70: #fd8f90 /* oklch(76.801% 0.13322 20.052) */;\n    --wa-color-red-60: #f3676c /* oklch(68.914% 0.17256 20.646) */;\n    --wa-color-red-50: #dc3146 /* oklch(58.857% 0.20512 20.223) */;\n    --wa-color-red-40: #b30532 /* oklch(48.737% 0.19311 18.413) */;\n    --wa-color-red-30: #8a132c /* oklch(41.17% 0.1512 16.771) */;\n    --wa-color-red-20: #631323 /* oklch(33.297% 0.11208 14.847) */;\n    --wa-color-red-10: #3e0913 /* oklch(24.329% 0.08074 15.207) */;\n    --wa-color-red-05: #2a040b /* oklch(19.016% 0.06394 13.71) */;\n    --wa-color-red: var(--wa-color-red-50);\n    --wa-color-red-key: 50;\n\n    --wa-color-orange-95: #fff0e6 /* oklch(96.426% 0.02105 56.133) */;\n    --wa-color-orange-90: #ffdfca /* oklch(92.468% 0.04529 55.325) */;\n    --wa-color-orange-80: #ffbb94 /* oklch(84.588% 0.09454 50.876) */;\n    --wa-color-orange-70: #ff9266 /* oklch(76.744% 0.14429 42.309) */;\n    --wa-color-orange-60: #f46a45 /* oklch(68.848% 0.17805 35.951) */;\n    --wa-color-orange-50: #cd491c /* oklch(58.195% 0.17597 37.577) */;\n    --wa-color-orange-40: #9f3501 /* oklch(47.889% 0.14981 39.957) */;\n    --wa-color-orange-30: #802700 /* oklch(40.637% 0.1298 39.149) */;\n    --wa-color-orange-20: #601b00 /* oklch(33.123% 0.10587 39.117) */;\n    --wa-color-orange-10: #3c0d00 /* oklch(24.043% 0.07768 38.607) */;\n    --wa-color-orange-05: #280600 /* oklch(18.644% 0.0607 38.252) */;\n    --wa-color-orange: var(--wa-color-orange-60);\n    --wa-color-orange-key: 60;\n\n    --wa-color-yellow-95: #fef3cd /* oklch(96.322% 0.05069 93.748) */;\n    --wa-color-yellow-90: #ffe495 /* oklch(92.377% 0.10246 91.296) */;\n    --wa-color-yellow-80: #fac22b /* oklch(84.185% 0.16263 85.991) */;\n    --wa-color-yellow-70: #ef9d00 /* oklch(75.949% 0.16251 72.13) */;\n    --wa-color-yellow-60: #da7e00 /* oklch(67.883% 0.15587 62.246) */;\n    --wa-color-yellow-50: #b45f04 /* oklch(57.449% 0.13836 56.585) */;\n    --wa-color-yellow-40: #8c4602 /* oklch(47.319% 0.11666 54.663) */;\n    --wa-color-yellow-30: #6f3601 /* oklch(40.012% 0.09892 54.555) */;\n    --wa-color-yellow-20: #532600 /* oklch(32.518% 0.08157 53.927) */;\n    --wa-color-yellow-10: #331600 /* oklch(23.846% 0.05834 56.02) */;\n    --wa-color-yellow-05: #220c00 /* oklch(18.585% 0.04625 54.588) */;\n    --wa-color-yellow: var(--wa-color-yellow-80);\n    --wa-color-yellow-key: 80;\n\n    --wa-color-green-95: #e3f9e3 /* oklch(96.006% 0.03715 145.28) */;\n    --wa-color-green-90: #c2f2c1 /* oklch(91.494% 0.08233 144.35) */;\n    --wa-color-green-80: #93da98 /* oklch(82.445% 0.11601 146.11) */;\n    --wa-color-green-70: #5dc36f /* oklch(73.554% 0.15308 147.59) */;\n    --wa-color-green-60: #00ac49 /* oklch(64.982% 0.18414 148.83) */;\n    --wa-color-green-50: #00883c /* oklch(54.765% 0.15165 149.77) */;\n    --wa-color-green-40: #036730 /* oklch(45.004% 0.11963 151.06) */;\n    --wa-color-green-30: #0a5027 /* oklch(37.988% 0.09487 151.62) */;\n    --wa-color-green-20: #0a3a1d /* oklch(30.876% 0.07202 152.23) */;\n    --wa-color-green-10: #052310 /* oklch(22.767% 0.05128 152.45) */;\n    --wa-color-green-05: #031608 /* oklch(17.84% 0.03957 151.36) */;\n    --wa-color-green: var(--wa-color-green-60);\n    --wa-color-green-key: 60;\n\n    --wa-color-cyan-95: #e3f6fb /* oklch(96.063% 0.02111 215.26) */;\n    --wa-color-cyan-90: #c5ecf7 /* oklch(91.881% 0.04314 216.7) */;\n    --wa-color-cyan-80: #7fd6ec /* oklch(82.906% 0.08934 215.86) */;\n    --wa-color-cyan-70: #2fbedc /* oklch(74.18% 0.12169 215.86) */;\n    --wa-color-cyan-60: #00a3c0 /* oklch(65.939% 0.11738 216.42) */;\n    --wa-color-cyan-50: #078098 /* oklch(55.379% 0.09774 217.32) */;\n    --wa-color-cyan-40: #026274 /* oklch(45.735% 0.08074 216.18) */;\n    --wa-color-cyan-30: #014c5b /* oklch(38.419% 0.06817 216.88) */;\n    --wa-color-cyan-20: #003844 /* oklch(31.427% 0.05624 217.32) */;\n    --wa-color-cyan-10: #002129 /* oklch(22.851% 0.04085 217.17) */;\n    --wa-color-cyan-05: #00151b /* oklch(18.055% 0.03231 217.31) */;\n    --wa-color-cyan: var(--wa-color-cyan-70);\n    --wa-color-cyan-key: 70;\n\n    --wa-color-blue-95: #e8f3ff /* oklch(95.944% 0.01996 250.38) */;\n    --wa-color-blue-90: #d1e8ff /* oklch(92.121% 0.03985 248.26) */;\n    --wa-color-blue-80: #9fceff /* oklch(83.572% 0.08502 249.92) */;\n    --wa-color-blue-70: #6eb3ff /* oklch(75.256% 0.1308 252.03) */;\n    --wa-color-blue-60: #3e96ff /* oklch(67.196% 0.17661 254.97) */;\n    --wa-color-blue-50: #0071ec /* oklch(56.972% 0.20461 257.29) */;\n    --wa-color-blue-40: #0053c0 /* oklch(47.175% 0.1846 259.19) */;\n    --wa-color-blue-30: #003f9c /* oklch(39.805% 0.16217 259.98) */;\n    --wa-color-blue-20: #002d77 /* oklch(32.436% 0.1349 260.35) */;\n    --wa-color-blue-10: #001a4e /* oklch(23.965% 0.10161 260.68) */;\n    --wa-color-blue-05: #000f35 /* oklch(18.565% 0.07904 260.75) */;\n    --wa-color-blue: var(--wa-color-blue-50);\n    --wa-color-blue-key: 50;\n\n    --wa-color-indigo-95: #f0f2ff /* oklch(96.341% 0.0175 279.06) */;\n    --wa-color-indigo-90: #dfe5ff /* oklch(92.527% 0.0359 275.35) */;\n    --wa-color-indigo-80: #bcc7ff /* oklch(84.053% 0.07938 275.91) */;\n    --wa-color-indigo-70: #9da9ff /* oklch(75.941% 0.12411 276.95) */;\n    --wa-color-indigo-60: #808aff /* oklch(67.977% 0.17065 277.16) */;\n    --wa-color-indigo-50: #6163f2 /* oklch(57.967% 0.20943 277.04) */;\n    --wa-color-indigo-40: #4945cb /* oklch(48.145% 0.20042 277.08) */;\n    --wa-color-indigo-30: #3933a7 /* oklch(40.844% 0.17864 277.26) */;\n    --wa-color-indigo-20: #292381 /* oklch(33.362% 0.15096 277.21) */;\n    --wa-color-indigo-10: #181255 /* oklch(24.534% 0.11483 277.73) */;\n    --wa-color-indigo-05: #0d0a3a /* oklch(19.092% 0.08825 276.76) */;\n    --wa-color-indigo: var(--wa-color-indigo-50);\n    --wa-color-indigo-key: 50;\n\n    --wa-color-purple-95: #f7f0ff /* oklch(96.49% 0.02119 306.84) */;\n    --wa-color-purple-90: #eedfff /* oklch(92.531% 0.04569 306.6) */;\n    --wa-color-purple-80: #ddbdff /* oklch(84.781% 0.09615 306.52) */;\n    --wa-color-purple-70: #ca99ff /* oklch(76.728% 0.14961 305.27) */;\n    --wa-color-purple-60: #b678f5 /* oklch(68.906% 0.1844 304.96) */;\n    --wa-color-purple-50: #9951db /* oklch(58.603% 0.20465 304.87) */;\n    --wa-color-purple-40: #7936b3 /* oklch(48.641% 0.18949 304.79) */;\n    --wa-color-purple-30: #612692 /* oklch(41.23% 0.16836 304.92) */;\n    --wa-color-purple-20: #491870 /* oklch(33.663% 0.14258 305.12) */;\n    --wa-color-purple-10: #2d0b48 /* oklch(24.637% 0.10612 304.95) */;\n    --wa-color-purple-05: #1e0532 /* oklch(19.393% 0.08461 305.26) */;\n    --wa-color-purple: var(--wa-color-purple-50);\n    --wa-color-purple-key: 50;\n\n    --wa-color-pink-95: #feeff9 /* oklch(96.676% 0.02074 337.69) */;\n    --wa-color-pink-90: #feddf0 /* oklch(93.026% 0.04388 342.45) */;\n    --wa-color-pink-80: #fcb5d8 /* oklch(84.928% 0.09304 348.21) */;\n    --wa-color-pink-70: #f78dbf /* oklch(77.058% 0.14016 351.19) */;\n    --wa-color-pink-60: #e66ba3 /* oklch(69.067% 0.16347 353.69) */;\n    --wa-color-pink-50: #c84382 /* oklch(58.707% 0.17826 354.82) */;\n    --wa-color-pink-40: #9e2a6c /* oklch(48.603% 0.16439 350.08) */;\n    --wa-color-pink-30: #7d1e58 /* oklch(41.017% 0.14211 347.77) */;\n    --wa-color-pink-20: #5e1342 /* oklch(33.442% 0.11808 347.01) */;\n    --wa-color-pink-10: #3c0828 /* oklch(24.601% 0.08768 347.8) */;\n    --wa-color-pink-05: #28041a /* oklch(19.199% 0.06799 346.97) */;\n    --wa-color-pink: var(--wa-color-pink-50);\n    --wa-color-pink-key: 50;\n\n    --wa-color-gray-95: #f1f2f3 /* oklch(96.067% 0.00172 247.84) */;\n    --wa-color-gray-90: #e4e5e9 /* oklch(92.228% 0.0055 274.96) */;\n    --wa-color-gray-80: #c7c9d0 /* oklch(83.641% 0.00994 273.33) */;\n    --wa-color-gray-70: #abaeb9 /* oklch(75.183% 0.01604 273.78) */;\n    --wa-color-gray-60: #9194a2 /* oklch(66.863% 0.02088 276.18) */;\n    --wa-color-gray-50: #717584 /* oklch(56.418% 0.02359 273.77) */;\n    --wa-color-gray-40: #545868 /* oklch(46.281% 0.02644 274.26) */;\n    --wa-color-gray-30: #424554 /* oklch(39.355% 0.02564 276.27) */;\n    --wa-color-gray-20: #2f323f /* oklch(31.97% 0.02354 274.82) */;\n    --wa-color-gray-10: #1b1d26 /* oklch(23.277% 0.01762 275.14) */;\n    --wa-color-gray-05: #101219 /* oklch(18.342% 0.01472 272.42) */;\n    --wa-color-gray: var(--wa-color-gray-40);\n    --wa-color-gray-key: 40;\n  }\n}\n\n\n@layer wa-theme {\n  :where(:root),\n  .wa-theme-default,\n  .wa-light,\n  .wa-dark .wa-invert,\n  .wa-light .wa-theme-default,\n  .wa-dark .wa-theme-default.wa-invert,\n  .wa-dark .wa-theme-default .wa-invert {\n    /* #region Colors (Light) ~~~~~~~~~~~~~~~~~~~~~ */\n    color-scheme: light;\n    color: var(--wa-color-text-normal);\n\n    --wa-color-surface-raised: white;\n    --wa-color-surface-default: white;\n    --wa-color-surface-lowered: var(--wa-color-neutral-95);\n    --wa-color-surface-border: var(--wa-color-neutral-90);\n\n    --wa-color-text-normal: var(--wa-color-neutral-10);\n    --wa-color-text-quiet: var(--wa-color-neutral-40);\n    --wa-color-text-link: var(--wa-color-brand-40);\n\n    --wa-color-overlay-modal: color-mix(in oklab, var(--wa-color-neutral-05) 50%, transparent);\n    --wa-color-overlay-inline: color-mix(in oklab, var(--wa-color-neutral-80) 25%, transparent);\n\n    --wa-color-shadow: color-mix(\n      in oklab,\n      var(--wa-color-neutral-05) calc(var(--wa-shadow-blur-scale) * 4% + 8%),\n      transparent\n    );\n\n    --wa-color-focus: var(--wa-color-brand-60);\n\n    --wa-color-mix-hover: black 10%;\n    --wa-color-mix-active: black 20%;\n\n    --wa-color-brand-fill-quiet: var(--wa-color-brand-95);\n    --wa-color-brand-fill-normal: var(--wa-color-brand-90);\n    --wa-color-brand-fill-loud: var(--wa-color-brand-50);\n    --wa-color-brand-border-quiet: var(--wa-color-brand-90);\n    --wa-color-brand-border-normal: var(--wa-color-brand-80);\n    --wa-color-brand-border-loud: var(--wa-color-brand-60);\n    --wa-color-brand-on-quiet: var(--wa-color-brand-40);\n    --wa-color-brand-on-normal: var(--wa-color-brand-30);\n    --wa-color-brand-on-loud: white;\n\n    --wa-color-success-fill-quiet: var(--wa-color-success-95);\n    --wa-color-success-fill-normal: var(--wa-color-success-90);\n    --wa-color-success-fill-loud: var(--wa-color-success-50);\n    --wa-color-success-border-quiet: var(--wa-color-success-90);\n    --wa-color-success-border-normal: var(--wa-color-success-80);\n    --wa-color-success-border-loud: var(--wa-color-success-60);\n    --wa-color-success-on-quiet: var(--wa-color-success-40);\n    --wa-color-success-on-normal: var(--wa-color-success-30);\n    --wa-color-success-on-loud: white;\n\n    --wa-color-warning-fill-quiet: var(--wa-color-warning-95);\n    --wa-color-warning-fill-normal: var(--wa-color-warning-90);\n    --wa-color-warning-fill-loud: var(--wa-color-warning-50);\n    --wa-color-warning-border-quiet: var(--wa-color-warning-90);\n    --wa-color-warning-border-normal: var(--wa-color-warning-80);\n    --wa-color-warning-border-loud: var(--wa-color-warning-60);\n    --wa-color-warning-on-quiet: var(--wa-color-warning-40);\n    --wa-color-warning-on-normal: var(--wa-color-warning-30);\n    --wa-color-warning-on-loud: white;\n\n    --wa-color-danger-fill-quiet: var(--wa-color-danger-95);\n    --wa-color-danger-fill-normal: var(--wa-color-danger-90);\n    --wa-color-danger-fill-loud: var(--wa-color-danger-50);\n    --wa-color-danger-border-quiet: var(--wa-color-danger-90);\n    --wa-color-danger-border-normal: var(--wa-color-danger-80);\n    --wa-color-danger-border-loud: var(--wa-color-danger-60);\n    --wa-color-danger-on-quiet: var(--wa-color-danger-40);\n    --wa-color-danger-on-normal: var(--wa-color-danger-30);\n    --wa-color-danger-on-loud: white;\n\n    --wa-color-neutral-fill-quiet: var(--wa-color-neutral-95);\n    --wa-color-neutral-fill-normal: var(--wa-color-neutral-90);\n    --wa-color-neutral-fill-loud: var(--wa-color-neutral-20);\n    --wa-color-neutral-border-quiet: var(--wa-color-neutral-90);\n    --wa-color-neutral-border-normal: var(--wa-color-neutral-80);\n    --wa-color-neutral-border-loud: var(--wa-color-neutral-60);\n    --wa-color-neutral-on-quiet: var(--wa-color-neutral-40);\n    --wa-color-neutral-on-normal: var(--wa-color-neutral-30);\n    --wa-color-neutral-on-loud: white;\n    /* #endregion */\n  }\n\n  .wa-dark,\n  .wa-invert,\n  .wa-dark .wa-theme-default,\n  .wa-light .wa-theme-default.wa-invert,\n  .wa-light .wa-theme-default .wa-invert {\n    /* #region Colors (Dark) ~~~~~~~~~~~~~~~~~~~~~~ */\n    color-scheme: dark;\n    color: var(--wa-color-text-normal);\n\n    --wa-color-surface-raised: var(--wa-color-neutral-10);\n    --wa-color-surface-default: var(--wa-color-neutral-05);\n    --wa-color-surface-lowered: color-mix(in oklab, var(--wa-color-surface-default), black 20%);\n    --wa-color-surface-border: var(--wa-color-neutral-20);\n\n    --wa-color-text-normal: var(--wa-color-neutral-95);\n    --wa-color-text-quiet: var(--wa-color-neutral-60);\n    --wa-color-text-link: var(--wa-color-brand-70);\n\n    --wa-color-overlay-modal: color-mix(in oklab, black 60%, transparent);\n    --wa-color-overlay-inline: color-mix(in oklab, var(--wa-color-neutral-50) 10%, transparent);\n\n    --wa-color-shadow: color-mix(\n      in oklab,\n      var(--wa-color-surface-lowered) calc(var(--wa-shadow-blur-scale) * 32% + 40%),\n      transparent\n    );\n\n    --wa-color-focus: var(--wa-color-brand-60);\n\n    --wa-color-mix-hover: black 8%;\n    --wa-color-mix-active: black 16%;\n\n    --wa-color-brand-fill-quiet: var(--wa-color-brand-10);\n    --wa-color-brand-fill-normal: var(--wa-color-brand-20);\n    --wa-color-brand-fill-loud: var(--wa-color-brand-50);\n    --wa-color-brand-border-quiet: var(--wa-color-brand-20);\n    --wa-color-brand-border-normal: var(--wa-color-brand-30);\n    --wa-color-brand-border-loud: var(--wa-color-brand-40);\n    --wa-color-brand-on-quiet: var(--wa-color-brand-60);\n    --wa-color-brand-on-normal: var(--wa-color-brand-70);\n    --wa-color-brand-on-loud: white;\n\n    --wa-color-success-fill-quiet: var(--wa-color-success-10);\n    --wa-color-success-fill-normal: var(--wa-color-success-20);\n    --wa-color-success-fill-loud: var(--wa-color-success-50);\n    --wa-color-success-border-quiet: var(--wa-color-success-20);\n    --wa-color-success-border-normal: var(--wa-color-success-30);\n    --wa-color-success-border-loud: var(--wa-color-success-40);\n    --wa-color-success-on-quiet: var(--wa-color-success-60);\n    --wa-color-success-on-normal: var(--wa-color-success-70);\n    --wa-color-success-on-loud: white;\n\n    --wa-color-warning-fill-quiet: var(--wa-color-warning-10);\n    --wa-color-warning-fill-normal: var(--wa-color-warning-20);\n    --wa-color-warning-fill-loud: var(--wa-color-warning-50);\n    --wa-color-warning-border-quiet: var(--wa-color-warning-20);\n    --wa-color-warning-border-normal: var(--wa-color-warning-30);\n    --wa-color-warning-border-loud: var(--wa-color-warning-40);\n    --wa-color-warning-on-quiet: var(--wa-color-warning-60);\n    --wa-color-warning-on-normal: var(--wa-color-warning-70);\n    --wa-color-warning-on-loud: white;\n\n    --wa-color-danger-fill-quiet: var(--wa-color-danger-10);\n    --wa-color-danger-fill-normal: var(--wa-color-danger-20);\n    --wa-color-danger-fill-loud: var(--wa-color-danger-50);\n    --wa-color-danger-border-quiet: var(--wa-color-danger-20);\n    --wa-color-danger-border-normal: var(--wa-color-danger-30);\n    --wa-color-danger-border-loud: var(--wa-color-danger-40);\n    --wa-color-danger-on-quiet: var(--wa-color-danger-60);\n    --wa-color-danger-on-normal: var(--wa-color-danger-70);\n    --wa-color-danger-on-loud: white;\n\n    --wa-color-neutral-fill-quiet: var(--wa-color-neutral-10);\n    --wa-color-neutral-fill-normal: var(--wa-color-neutral-20);\n    --wa-color-neutral-fill-loud: var(--wa-color-neutral-90);\n    --wa-color-neutral-border-quiet: var(--wa-color-neutral-20);\n    --wa-color-neutral-border-normal: var(--wa-color-neutral-30);\n    --wa-color-neutral-border-loud: var(--wa-color-neutral-40);\n    --wa-color-neutral-on-quiet: var(--wa-color-neutral-60);\n    --wa-color-neutral-on-normal: var(--wa-color-neutral-70);\n    --wa-color-neutral-on-loud: var(--wa-color-neutral-05);\n    /* #endregion */\n  }\n\n  :where(:root),\n  .wa-theme-default,\n  .wa-light,\n  .wa-dark,\n  .wa-invert {\n    font-family: var(--wa-font-family-body);\n\n    /* #region Fonts ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-font-family-body: ui-sans-serif, system-ui, sans-serif;\n    --wa-font-family-heading: var(--wa-font-family-body);\n    --wa-font-family-code: ui-monospace, monospace;\n    --wa-font-family-longform: ui-serif, serif;\n\n    /* Font sizes use a ratio of 1.125 to scale sizes proportionally.\n     * For larger font sizes, each size is twice 1.125x larger to maximize impact.\n     * Each value uses `rem` units and is rounded to the nearest whole pixel when rendered. */\n    --wa-font-size-scale: 1;\n    --wa-font-size-2xs: round(calc(var(--wa-font-size-xs) / 1.125), 1px); /* 11px */\n    --wa-font-size-xs: round(calc(var(--wa-font-size-s) / 1.125), 1px); /* 12px */\n    --wa-font-size-s: round(calc(var(--wa-font-size-m) / 1.125), 1px); /* 14px */\n    --wa-font-size-m: calc(1rem * var(--wa-font-size-scale)); /* 16px */\n    --wa-font-size-l: round(calc(var(--wa-font-size-m) * 1.125 * 1.125), 1px); /* 20px */\n    --wa-font-size-xl: round(calc(var(--wa-font-size-l) * 1.125 * 1.125), 1px); /* 25px */\n    --wa-font-size-2xl: round(calc(var(--wa-font-size-xl) * 1.125 * 1.125), 1px); /* 32px */\n    --wa-font-size-3xl: round(calc(var(--wa-font-size-2xl) * 1.125 * 1.125), 1px); /* 41px */\n    --wa-font-size-4xl: round(calc(var(--wa-font-size-3xl) * 1.125 * 1.125), 1px); /* 52px */\n\n    --wa-font-size-smaller: round(calc(1em / 1.125), 1px);\n    --wa-font-size-larger: round(calc(1em * 1.125 * 1.125), 1px);\n\n    --wa-font-weight-light: 300;\n    --wa-font-weight-normal: 400;\n    --wa-font-weight-semibold: 500;\n    --wa-font-weight-bold: 600;\n\n    --wa-font-weight-body: var(--wa-font-weight-normal);\n    --wa-font-weight-heading: var(--wa-font-weight-bold);\n    --wa-font-weight-code: var(--wa-font-weight-normal);\n    --wa-font-weight-longform: var(--wa-font-weight-normal);\n    --wa-font-weight-action: var(--wa-font-weight-semibold);\n\n    --wa-line-height-condensed: 1.2;\n    --wa-line-height-normal: 1.6;\n    --wa-line-height-expanded: 2;\n\n    --wa-link-decoration-default: underline color-mix(in oklab, currentColor 70%, transparent) dotted;\n    --wa-link-decoration-hover: underline;\n    /* #endregion */\n\n    /* #region Space ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-space-scale: 1;\n    --wa-space-3xs: calc(var(--wa-space-scale) * 0.125rem); /* 2px */\n    --wa-space-2xs: calc(var(--wa-space-scale) * 0.25rem); /* 4px */\n    --wa-space-xs: calc(var(--wa-space-scale) * 0.5rem); /* 8px */\n    --wa-space-s: calc(var(--wa-space-scale) * 0.75rem); /* 12px */\n    --wa-space-m: calc(var(--wa-space-scale) * 1rem); /* 16px */\n    --wa-space-l: calc(var(--wa-space-scale) * 1.5rem); /* 24px */\n    --wa-space-xl: calc(var(--wa-space-scale) * 2rem); /* 32px */\n    --wa-space-2xl: calc(var(--wa-space-scale) * 2.5rem); /* 40px */\n    --wa-space-3xl: calc(var(--wa-space-scale) * 3rem); /* 48px */\n    --wa-space-4xl: calc(var(--wa-space-scale) * 4rem); /* 64px */\n\n    --wa-content-spacing: var(--wa-space-l);\n    /* #endregion */\n\n    /* #region Borders ~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-border-style: solid;\n\n    --wa-border-width-scale: 1;\n    --wa-border-width-s: calc(var(--wa-border-width-scale) * 0.0625rem);\n    --wa-border-width-m: calc(var(--wa-border-width-scale) * 0.125rem);\n    --wa-border-width-l: calc(var(--wa-border-width-scale) * 0.1875rem);\n    /* #endregion */\n\n    /* #region Rounding ~~~~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-border-radius-scale: 1;\n    --wa-border-radius-s: calc(var(--wa-border-radius-scale) * 0.1875rem);\n    --wa-border-radius-m: calc(var(--wa-border-radius-scale) * 0.375rem);\n    --wa-border-radius-l: calc(var(--wa-border-radius-scale) * 0.75rem);\n\n    --wa-border-radius-pill: 9999px;\n    --wa-border-radius-circle: 50%;\n    --wa-border-radius-square: 0px;\n    /* #endregion */\n\n    /* #region Focus ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-focus-ring-style: solid;\n    --wa-focus-ring-width: 0.1875rem; /* 3px */\n    --wa-focus-ring: var(--wa-focus-ring-style) var(--wa-focus-ring-width) var(--wa-color-focus);\n    --wa-focus-ring-offset: 0.0625rem; /* 1px */\n    /* #endregion */\n\n    /* #region Shadows ~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-shadow-offset-x-scale: 0;\n    --wa-shadow-offset-x-s: calc(var(--wa-shadow-offset-x-scale) * 0.125rem);\n    --wa-shadow-offset-x-m: calc(var(--wa-shadow-offset-x-scale) * 0.25rem);\n    --wa-shadow-offset-x-l: calc(var(--wa-shadow-offset-x-scale) * 0.5rem);\n\n    --wa-shadow-offset-y-scale: 1;\n    --wa-shadow-offset-y-s: calc(var(--wa-shadow-offset-y-scale) * 0.125rem);\n    --wa-shadow-offset-y-m: calc(var(--wa-shadow-offset-y-scale) * 0.25rem);\n    --wa-shadow-offset-y-l: calc(var(--wa-shadow-offset-y-scale) * 0.5rem);\n\n    --wa-shadow-blur-scale: 1;\n    --wa-shadow-blur-s: calc(var(--wa-shadow-blur-scale) * 0.125rem);\n    --wa-shadow-blur-m: calc(var(--wa-shadow-blur-scale) * 0.25rem);\n    --wa-shadow-blur-l: calc(var(--wa-shadow-blur-scale) * 0.5rem);\n\n    --wa-shadow-spread-scale: -0.5;\n    --wa-shadow-spread-s: calc(var(--wa-shadow-spread-scale) * 0.125rem);\n    --wa-shadow-spread-m: calc(var(--wa-shadow-spread-scale) * 0.25rem);\n    --wa-shadow-spread-l: calc(var(--wa-shadow-spread-scale) * 0.5rem);\n\n    --wa-shadow-s: var(--wa-shadow-offset-x-s) var(--wa-shadow-offset-y-s) var(--wa-shadow-blur-s)\n      var(--wa-shadow-spread-s) var(--wa-color-shadow);\n    --wa-shadow-m: var(--wa-shadow-offset-x-m) var(--wa-shadow-offset-y-m) var(--wa-shadow-blur-m)\n      var(--wa-shadow-spread-m) var(--wa-color-shadow);\n    --wa-shadow-l: var(--wa-shadow-offset-x-l) var(--wa-shadow-offset-y-l) var(--wa-shadow-blur-l)\n      var(--wa-shadow-spread-l) var(--wa-color-shadow);\n    /* #endregion */\n\n    /* #region Transitions ~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-transition-easing: ease;\n    --wa-transition-slow: 300ms;\n    --wa-transition-normal: 150ms;\n    --wa-transition-fast: 75ms;\n    /* #endregion */\n\n    /* #region Components ~~~~~~~~~~~~~~~~~~~~~~~ */\n    /* Form Controls */\n    --wa-form-control-background-color: var(--wa-color-surface-default);\n\n    --wa-form-control-border-color: var(--wa-color-neutral-border-loud);\n    --wa-form-control-border-style: var(--wa-border-style);\n    --wa-form-control-border-width: var(--wa-border-width-s);\n    --wa-form-control-border-radius: var(--wa-border-radius-m);\n\n    --wa-form-control-activated-color: var(--wa-color-brand-fill-loud);\n\n    --wa-form-control-label-color: var(--wa-color-text-normal);\n    --wa-form-control-label-font-weight: var(--wa-font-weight-semibold);\n    --wa-form-control-label-line-height: var(--wa-line-height-condensed);\n\n    --wa-form-control-value-color: var(--wa-color-text-normal);\n    --wa-form-control-value-font-weight: var(--wa-font-weight-body);\n    --wa-form-control-value-line-height: var(--wa-line-height-condensed);\n\n    --wa-form-control-hint-color: var(--wa-color-text-quiet);\n    --wa-form-control-hint-font-weight: var(--wa-font-weight-body);\n    --wa-form-control-hint-line-height: var(--wa-line-height-normal);\n\n    --wa-form-control-placeholder-color: var(--wa-color-gray-50);\n\n    --wa-form-control-required-content: '*';\n    --wa-form-control-required-content-color: inherit;\n    --wa-form-control-required-content-offset: 0.1em;\n\n    --wa-form-control-padding-block: 0.75em;\n    --wa-form-control-padding-inline: 1em;\n    --wa-form-control-height: round(\n      calc(2 * var(--wa-form-control-padding-block) + 1em * var(--wa-form-control-value-line-height)),\n      1px\n    );\n    --wa-form-control-toggle-size: round(1.25em, 1px);\n\n    /* Panels */\n    --wa-panel-border-style: var(--wa-border-style);\n    --wa-panel-border-width: var(--wa-border-width-s);\n    --wa-panel-border-radius: var(--wa-border-radius-l);\n\n    /* Tooltips */\n    --wa-tooltip-arrow-size: 0.375rem;\n\n    --wa-tooltip-background-color: var(--wa-color-text-normal);\n\n    --wa-tooltip-border-color: var(--wa-tooltip-background-color);\n    --wa-tooltip-border-style: var(--wa-border-style);\n    --wa-tooltip-border-width: var(--wa-border-width-s);\n    --wa-tooltip-border-radius: var(--wa-border-radius-s);\n\n    --wa-tooltip-content-color: var(--wa-color-surface-default);\n    --wa-tooltip-font-size: var(--wa-font-size-s);\n    --wa-tooltip-line-height: var(--wa-line-height-normal);\n    /* #endregion */\n  }\n}\n\n\n/* Place project-wide overrides below. */\n.my-custom-style {\n  background: #000;\n  color: white;\n}\n/* body {\n  background-color: var(--wa-color-surface-default) !important;\n} */\nhtml {\n  font-size: 14px !important;\n}\n/* body {\n  background-color: var(---wa-color-surface-default) !important;\n  color: var(--wa-color-text-normal) !important;\n} */\n.ir-page__container {\n  display: flex;\n  flex-direction: column;\n  gap: var(--wa-space-l, 1.5rem);\n  padding: var(--wa-space-l);\n  position: relative;\n}\n.ir-price {\n  font-family: inherit;\n  font-size: 1rem;\n  font-weight: 800;\n  text-align: right;\n  white-space: nowrap;\n  color: var(--wa-color-text-normal);\n}\n.page-title {\n  font-family: var(--wa-font-family-heading);\n  font-weight: var(--wa-font-weight-heading);\n  line-height: var(--wa-line-height-condensed);\n  text-wrap: balance;\n  font-size: var(--wa-font-size-xl);\n}\n\n:root {\n  --wa-form-control-required-content-color: var(--wa-color-danger-border-loud, #f3676c);\n}\n/* td {\n  padding: 0 !important;\n} */\n.label-on-left {\n  display: grid;\n  gap: var(--wa-space-m);\n}\nwa-card::part(base) {\n  box-sizing: border-box;\n}\nwa-input[aria-invalid='true']::part(base),\nwa-textarea[aria-invalid='true']::part(base),\nwa-select[aria-invalid='true']::part(combobox) {\n  border-color: var(--wa-color-danger-border-loud);\n  outline-color: var(--wa-color-danger-border-loud);\n  border-width: 2px;\n}\n\n/* Shared layout for form controls inside wa-select, wa-input, wa-textarea */\n@media (min-width: 768px) {\n  /* .label-on-left wa-switch::part(label) {\n    margin-inline-start: 0;\n    margin-inline-end: 0.5rem;\n  } */\n  .label-on-left {\n    align-items: center;\n    grid-template-columns: auto 1fr;\n  }\n  .label-on-left wa-switch::part(base),\n  .label-on-left wa-select::part(form-control),\n  .label-on-left wa-select,\n  .label-on-left wa-switch,\n  .label-on-left wa-input,\n  .label-on-left wa-textarea {\n    grid-column: 1 / -1;\n    grid-row-end: span 2;\n    display: grid;\n    grid-template-columns: subgrid;\n    gap: 0 var(--wa-space-l);\n    align-items: center;\n  }\n  .label-on-left wa-switch::part(base) {\n    direction: rtl;\n  }\n  .label-on-left wa-switch::part(base) > * {\n    justify-self: flex-start;\n    justify-content: flex-start;\n    direction: ltr; /* fix text direction */\n  }\n  /* Label alignment */\n  .label-on-left ::part(label) {\n    justify-content: flex-end;\n  }\n\n  /* Hint always in second column */\n  .label-on-left ::part(hint) {\n    grid-column: 2;\n  }\n}\n";const ss=ns;const ls=class{constructor(t){e(this,t)}extraResources="";resources=os;componentWillLoad(){this.parseRefs()}componentDidLoad(){this.initializeStyles()}hrefsChanged(){this.parseRefs();this.initializeStyles()}parseRefs(){if(this.extraResources!=="")this.resources.push(JSON.parse(this.extraResources))}appendTag(e,t){const i=document.createElement(e);const a=[];Object.keys(t).forEach((e=>{i.setAttribute(e,t[e]);a.push(`[${e}="${t[e]}"]`)}));const r=`${e}${a.join("")}`;const o=document.querySelector(r);if(!o){document.head.appendChild(i)}}initializeStyles(){this.resources.forEach((e=>{if(e.isCSS){this.appendTag("link",{href:e.link,rel:"stylesheet",type:"text/css"})}if(e.isJS){this.appendTag("script",{src:e.link})}}))}render(){return null}static get watchers(){return{extraResources:["hrefsChanged"]}}};ls.style=ss;const cs=".sc-ir-country-picker-h{display:block;margin:0;padding:0;box-sizing:border-box}.combobox-menu.sc-ir-country-picker{max-height:200px;overflow:auto}";const ds=cs;const hs=class{constructor(t){e(this,t);this.countryChange=a(this,"countryChange",7)}size;variant="default";countries=[];country;error;propertyCountry;label;testId;autoValidate=false;inputValue;selectedCountry;filteredCountries=[];searching=false;countryChange;debounceTimeout;componentWillLoad(){this.filteredCountries=[...this.countries];if(this.country){this.inputValue=this.country.name;this.selectedCountry=this.country}}handleCountryChange(e,t){if(e?.id!==t?.id){this.inputValue=this.country?.name;this.selectedCountry=e}}filterCountries(){if(this.inputValue===""&&this.country){this.selectCountry(null)}clearTimeout(this.debounceTimeout);this.debounceTimeout=setTimeout((()=>{if(!this.inputValue){this.filteredCountries=[...this.countries]}else{this.filteredCountries=this.countries.filter((e=>e.name.toLowerCase().includes(this.inputValue.toLowerCase())))}}),300)}selectCountry(e){this.selectedCountry=e;this.inputValue=e?.name;this.filteredCountries=[...this.countries];this.countryChange.emit(e)}scrollToSelected(){setTimeout((()=>{const e=document.querySelector(`.dropdown-item.active`);if(e){e.scrollIntoView({behavior:"instant",block:"center"})}}),100)}render(){const e=this.filteredCountries.length>0&&this.propertyCountry&&(!this.searching||this.searching&&this.inputValue==="");if(this.variant==="modern"){return t("ir-picker",{size:this.size,label:this.label,mode:"select",value:this.selectedCountry?.id?.toString(),"onCombobox-select":e=>{const t=this.filteredCountries.find((t=>t.id.toString()===e.detail.item.value));if(!t){console.warn(`country not found`,e.detail.item);return}this.selectCountry(t)}},this.filteredCountries.map((e=>t("ir-picker-item",{value:e.id?.toString(),label:e.name,key:e.id},t("img",{src:e.flag,alt:e.name,style:{aspectRatio:"1",height:"15px",borderRadius:"4px"}}),t("p",{class:"pl-1 m-0"},e.name)))))}return t("form",{class:"dropdown m-0 p-0"},t("ir-input-text",{onTextChange:e=>{if(!this.searching){this.searching=true}this.inputValue=e.detail;this.filterCountries()},testId:this.testId,autoValidate:this.autoValidate,label:this.label,error:this.error,placeholder:"",class:"m-0 p-0",value:this.inputValue,id:"dropdownMenuCombobox","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",onInputFocus:()=>this.scrollToSelected(),onInputBlur:()=>{this.searching=false;if(this.filteredCountries.length>0&&this.inputValue&&this.inputValue.trim()!==""){this.selectCountry(this.filteredCountries[0])}}}),t("div",{class:"dropdown-menu combobox-menu","aria-labelledby":"dropdownMenuCombobox"},e&&t(r,null,t("button",{type:"button",class:`dropdown-item d-flex align-items-center ${this.selectedCountry?.id===this.propertyCountry.id?"active":""}`,onClick:()=>{this.selectCountry(this.propertyCountry)}},t("img",{src:this.propertyCountry.flag,alt:this.propertyCountry.name,style:{aspectRatio:"1",height:"15px",borderRadius:"4px"}}),t("p",{class:"pl-1 m-0"},this.propertyCountry.name)),t("div",{class:"dropdown-divider"})),this.filteredCountries?.map((e=>t("button",{key:e.id,type:"button",class:`dropdown-item d-flex align-items-center ${this.selectedCountry?.id===e.id?"active":""}`,onClick:()=>{this.selectCountry(e)}},t("img",{src:e.flag,alt:e.name,style:{aspectRatio:"1",height:"15px",borderRadius:"4px"}}),t("p",{class:"pl-1 m-0"},e.name)))),this.filteredCountries?.length===0&&t("p",{class:"dropdown-item-text"},"Invalid Country")))}static get watchers(){return{country:["handleCountryChange"]}}};hs.style=ds;const us=":host{display:block}.ir__custom-button{width:100%}.ir__custom-button.--icon::part(base){height:auto;width:auto;padding:0}.ir__custom-button::part(base){height:var(--ir-c-btn-height, var(--wa-form-control-height));padding:var(--ir-c-btn-padding, 0 var(--wa-form-control-padding-inline));font-size:var(--ir-c-btn-font-size, auto)}.ir__custom-button.--link::part(base){height:fit-content;padding:0}";const ps=us;const fs=class{constructor(t){e(this,t);this.clickHandler=a(this,"clickHandler",7)}link;iconBtn;variant;appearance;size="small";withCaret;disabled;loading;pill;type="button";name;value;href;target;rel;download;form;formAction;formEnctype;formMethod;formNoValidate;formTarget;clickHandler;buttonEl;componentDidLoad(){this.buttonEl.addEventListener("click",this.handleButtonClick)}disconnectedCallback(){this.buttonEl.removeEventListener("click",this.handleButtonClick)}handleButtonClick=e=>{this.clickHandler.emit(e)};render(){return t(i,{key:"8d0c39f199e3da00a72a1ca7f13d841d0b5319d4"},t("wa-button",{key:"f475edbcf270935579aa62bf438433703b09fb1c",ref:e=>this.buttonEl=e,type:this.type,size:this.size,class:`ir__custom-button ${this.iconBtn?"--icon":""} ${this.link?"--link":""}`,disabled:this.disabled,appearance:this.link?"plain":this.appearance,loading:this.loading,"with-caret":this.withCaret,variant:this.link?"brand":this.variant,pill:this.pill,href:this.href,target:this.target,rel:this.rel,download:this.download,name:this.name,value:this.value,form:this.form,"form-action":this.formAction,"form-enctype":this.formEnctype,"form-method":this.formMethod,"form-no-validate":this.formNoValidate,"form-target":this.formTarget},t("slot",{key:"8592a0974caa1765964424ad61a92730df5cd22e",slot:"start",name:"start"}),t("slot",{key:"b22bbd024bbd1d8925318ae2b05f8caf051e1b91"}),t("slot",{key:"35654d9a6410c6373be97bb941a8441521fce931",slot:"end",name:"end"})))}};fs.style=ps;var bs={exports:{}};(function(e,t){!function(t,i){e.exports=i()}(Le,(function(){return function(){var e={d:function(t,i){for(var a in i)e.o(i,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:i[a]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t={};e.d(t,{default:function(){return H}});var i={days:"days",months:"months",years:"years",day:"day",month:"month",year:"year",eventChangeViewDate:"changeViewDate",eventChangeCurrentView:"changeCurrentView",eventChangeFocusDate:"changeFocusDate",eventChangeSelectedDate:"changeSelectedDate",eventChangeTime:"changeTime",eventChangeLastSelectedDate:"changeLastSelectedDate",actionSelectDate:"selectDate",actionUnselectDate:"unselectDate",cssClassWeekend:"-weekend-"},a={classes:"",inline:!1,locale:{days:["","","","","","",""],daysShort:["","","","","","",""],daysMin:["","","","","","",""],months:["","","","","","","","","","","",""],monthsShort:["","","","","","","","","","","",""],today:"",clear:"",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1},startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"T",toggleSelected:!0,keyboardNav:!0,selectedDates:!1,container:"",isMobile:!1,visible:!1,position:"bottom left",offset:12,view:i.days,minView:i.days,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:", ",range:!1,dynamicRange:!0,buttons:!1,monthsField:"monthsShort",showEvent:"focus",autoClose:!1,fixedHeight:!1,prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:!1,onChangeViewDate:!1,onChangeView:!1,onRenderCell:!1,onShow:!1,onHide:!1,onClickDayName:!1};function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return"string"==typeof e?t.querySelector(e):e}function o(){let{tagName:e="div",className:t="",innerHtml:i="",id:a="",attrs:r={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=document.createElement(e);return t&&o.classList.add(...t.split(" ")),a&&(o.id=a),i&&(o.innerHTML=i),r&&n(o,r),o}function n(e,t){for(let[i,a]of Object.entries(t))void 0!==a&&e.setAttribute(i,a);return e}function s(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function l(e){let t=e.getHours(),{hours:i,dayPeriod:a}=c(t);return{year:e.getFullYear(),month:e.getMonth(),fullMonth:e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,date:e.getDate(),fullDate:e.getDate()<10?"0"+e.getDate():e.getDate(),day:e.getDay(),hours:t,fullHours:d(t),hours12:i,dayPeriod:a,fullHours12:d(i),minutes:e.getMinutes(),fullMinutes:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes()}}function c(e){return{dayPeriod:e>11?"pm":"am",hours:e%12==0?12:e%12}}function d(e){return e<10?"0"+e:e}function h(e){let t=10*Math.floor(e.getFullYear()/10);return[t,t+9]}function u(){let e=[];for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return i.forEach((t=>{if("object"==typeof t)for(let i in t)t[i]&&e.push(i);else t&&e.push(t)})),e.join(" ")}function p(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.days;if(!e||!t)return!1;let r=l(e),o=l(t);return{[i.days]:r.date===o.date&&r.month===o.month&&r.year===o.year,[i.months]:r.month===o.month&&r.year===o.year,[i.years]:r.year===o.year}[a]}function f(e,t,i){let a=g(e,!1).getTime(),r=g(t,!1).getTime();return i?a>=r:a>r}function b(e,t){return!f(e,t,!0)}function g(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=new Date(e.getTime());return"boolean"!=typeof t||t||function(e){e.setHours(0,0,0,0)}(i),i}function m(e,t,i){e.length?e.forEach((e=>{e.addEventListener(t,i)})):e.addEventListener(t,i)}function w(e,t){return!(!e||e===document||e instanceof DocumentFragment)&&(e.matches(t)?e:w(e.parentNode,t))}function y(e,t,i){return e>i?i:e<t?t:e}function v(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];return i.filter((e=>e)).forEach((t=>{for(let[i,a]of Object.entries(t))if(void 0!==a&&"[object Object]"===a.toString()){let t=void 0!==e[i]?e[i].toString():void 0,r=a.toString(),o=Array.isArray(a)?[]:{};e[i]=e[i]?t!==r?o:e[i]:o,v(e[i],a)}else e[i]=a})),e}function k(e){let t=e;return e instanceof Date||("string"==typeof e&&/^\d{4}-\d{2}-\d{2}$/.test(e)&&(e+="T00:00:00"),t=new Date(e)),isNaN(t.getTime())&&(console.log(`Unable to convert value "${e}" to Date object`),t=!1),t}function x(e){let t="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+t+")("+e+")($|<|"+t+")","g")}function _(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class D{constructor(){let{type:e,date:t,dp:i,opts:a,body:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_(this,"focus",(()=>{this.$cell.classList.add("-focus-"),this.focused=!0})),_(this,"removeFocus",(()=>{this.$cell.classList.remove("-focus-"),this.focused=!1})),_(this,"select",(()=>{this.$cell.classList.add("-selected-"),this.selected=!0})),_(this,"removeSelect",(()=>{this.$cell.classList.remove("-selected-","-range-from-","-range-to-"),this.selected=!1})),_(this,"onChangeSelectedDate",(()=>{this.isDisabled||(this._handleSelectedStatus(),this.opts.range&&this._handleRangeStatus())})),_(this,"onChangeFocusDate",(e=>{if(!e)return void(this.focused&&this.removeFocus());let t=p(e,this.date,this.type);t?this.focus():!t&&this.focused&&this.removeFocus(),this.opts.range&&this._handleRangeStatus()})),_(this,"render",(()=>(this.$cell.innerHTML=this._getHtml(),this._handleClasses(),this.$cell))),this.type=e,this.singleType=this.type.slice(0,-1),this.date=t,this.dp=i,this.opts=a,this.body=r,this.customData=!1,this.init()}init(){var e;let{onRenderCell:t}=this.opts;t&&(this.customData=t({date:this.date,cellType:this.singleType,datepicker:this.dp})),this._createElement(),this._bindDatepickerEvents(),null!==(e=this.customData)&&void 0!==e&&e.disabled&&this.dp.disableDate(this.date)}_bindDatepickerEvents(){this.dp.on(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(i.eventChangeFocusDate,this.onChangeFocusDate)}unbindDatepickerEvents(){this.dp.off(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(i.eventChangeFocusDate,this.onChangeFocusDate)}_createElement(){var e;let{year:t,month:i,date:a}=l(this.date),r=(null===(e=this.customData)||void 0===e?void 0:e.attrs)||{};this.$cell=o({attrs:{"data-year":t,"data-month":i,"data-date":a,...r}}),this.$cell.adpCell=this}_getClassName(){var e;let t=new Date,{selectOtherMonths:a,selectOtherYears:r}=this.opts,{minDate:o,maxDate:n,isDateDisabled:s}=this.dp,{day:c}=l(this.date),d=this._isOutOfMinMaxRange(),h=s(this.date),f=u("air-datepicker-cell",`-${this.singleType}-`,{"-current-":p(t,this.date,this.type),"-min-date-":o&&p(o,this.date,this.type),"-max-date-":n&&p(n,this.date,this.type)}),b="";switch(this.type){case i.days:b=u({"-weekend-":this.dp.isWeekend(c),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!a||d||h});break;case i.months:b=u({"-disabled-":d});break;case i.years:b=u({"-other-decade-":this.isOtherDecade,"-disabled-":d||this.isOtherDecade&&!r})}return u(f,b,null===(e=this.customData)||void 0===e?void 0:e.classes).split(" ")}_getHtml(){var e;let{year:t,month:a,date:r}=l(this.date),{showOtherMonths:o,showOtherYears:n}=this.opts;if(null!==(e=this.customData)&&void 0!==e&&e.html)return this.customData.html;switch(this.type){case i.days:return!o&&this.isOtherMonth?"":r;case i.months:return this.dp.locale[this.opts.monthsField][a];case i.years:return!n&&this.isOtherDecade?"":t}}_isOutOfMinMaxRange(){let{minDate:e,maxDate:t}=this.dp,{type:a,date:r}=this,{month:o,year:n,date:s}=l(r),c=a===i.days,d=a===i.years,h=!!e&&new Date(n,d?e.getMonth():o,c?s:e.getDate()),u=!!t&&new Date(n,d?t.getMonth():o,c?s:t.getDate());return e&&t?b(h,e)||f(u,t):e?b(h,e):t?f(u,t):void 0}destroy(){this.unbindDatepickerEvents()}_handleRangeStatus(){const{selectedDates:e,focusDate:t,rangeDateTo:i,rangeDateFrom:a}=this.dp,r=e.length;if(!r)return;let o=a,n=i;if(1===r&&t){const i=f(t,e[0]);o=i?e[0]:t,n=i?t:e[0]}let s=u({"-in-range-":o&&n&&(l=this.date,c=o,d=n,f(l,c)&&b(l,d)),"-range-from-":o&&p(this.date,o,this.type),"-range-to-":n&&p(this.date,n,this.type)});var l,c,d;this.$cell.classList.remove("-range-from-","-range-to-","-in-range-"),s&&this.$cell.classList.add(...s.split(" "))}_handleSelectedStatus(){let e=this.dp._checkIfDateIsSelected(this.date,this.type);e?this.select():!e&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){p(this.dp.focusDate,this.date,this.type)&&this.focus()}_handleClasses(){this.$cell.setAttribute("class",""),this._handleInitialFocusStatus(),this.dp.hasSelectedDates&&(this._handleSelectedStatus(),this.dp.opts.range&&this._handleRangeStatus()),this.$cell.classList.add(...this._getClassName())}get isDisabled(){return this.$cell.matches(".-disabled-")}get isOtherMonth(){return this.dp.isOtherMonth(this.date)}get isOtherDecade(){return this.dp.isOtherDecade(this.date)}}function C(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let M={[i.days]:`<div class="air-datepicker-body--day-names"></div><div class="air-datepicker-body--cells -${i.days}-"></div>`,[i.months]:`<div class="air-datepicker-body--cells -${i.months}-"></div>`,[i.years]:`<div class="air-datepicker-body--cells -${i.years}-"></div>`};const S=".air-datepicker-cell";class Y{constructor(e){let{dp:t,type:a,opts:r}=e;C(this,"handleClick",(e=>{let t=e.target.closest(S).adpCell;if(t.isDisabled)return;if(!this.dp.isMinViewReached)return void this.dp.down();let i=this.dp._checkIfDateIsSelected(t.date,t.type);i?this.dp._handleAlreadySelectedDates(i,t.date):this.dp.selectDate(t.date)})),C(this,"handleDayNameClick",(e=>{let t=e.target.getAttribute("data-day-index");this.opts.onClickDayName({dayIndex:Number(t),datepicker:this.dp})})),C(this,"onChangeCurrentView",(e=>{e!==this.type?this.hide():(this.show(),this.render())})),C(this,"onMouseOverCell",(e=>{let t=w(e.target,S);this.dp.setFocusDate(!!t&&t.adpCell.date)})),C(this,"onMouseOutCell",(()=>{this.dp.setFocusDate(!1)})),C(this,"onClickBody",(e=>{let{onClickDayName:t}=this.opts,i=e.target;i.closest(S)&&this.handleClick(e),t&&i.closest(".air-datepicker-body--day-name")&&this.handleDayNameClick(e)})),C(this,"onMouseDown",(e=>{this.pressed=!0;let t=w(e.target,S),i=t&&t.adpCell;p(i.date,this.dp.rangeDateFrom)&&(this.rangeFromFocused=!0),p(i.date,this.dp.rangeDateTo)&&(this.rangeToFocused=!0)})),C(this,"onMouseMove",(e=>{if(!this.pressed||!this.dp.isMinViewReached)return;e.preventDefault();let t=w(e.target,S),i=t&&t.adpCell,{selectedDates:a,rangeDateTo:r,rangeDateFrom:o}=this.dp;if(!i||i.isDisabled)return;let{date:n}=i;if(2===a.length){if(this.rangeFromFocused&&!f(n,r)){let{hours:e,minutes:t}=l(o);n.setHours(e),n.setMinutes(t),this.dp.rangeDateFrom=n,this.dp.replaceDate(o,n)}if(this.rangeToFocused&&!b(n,o)){let{hours:e,minutes:t}=l(r);n.setHours(e),n.setMinutes(t),this.dp.rangeDateTo=n,this.dp.replaceDate(r,n)}}})),C(this,"onMouseUp",(()=>{this.pressed=!1,this.rangeFromFocused=!1,this.rangeToFocused=!1})),C(this,"onChangeViewDate",((e,t)=>{if(!this.isVisible)return;let a=h(e),r=h(t);switch(this.dp.currentView){case i.days:if(p(e,t,i.months))return;break;case i.months:if(p(e,t,i.years))return;break;case i.years:if(a[0]===r[0]&&a[1]===r[1])return}this.render()})),C(this,"render",(()=>{this.destroyCells(),this._generateCells(),this.cells.forEach((e=>{this.$cells.appendChild(e.render())}))})),this.dp=t,this.type=a,this.opts=r,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.type===i.days&&this.renderDayNames(),this.render(),this._bindEvents(),this._bindDatepickerEvents()}_bindEvents(){let{range:e,dynamicRange:t}=this.opts;m(this.$el,"mouseover",this.onMouseOverCell),m(this.$el,"mouseout",this.onMouseOutCell),m(this.$el,"click",this.onClickBody),e&&t&&(m(this.$el,"mousedown",this.onMouseDown),m(this.$el,"mousemove",this.onMouseMove),m(window.document,"mouseup",this.onMouseUp))}_bindDatepickerEvents(){this.dp.on(i.eventChangeViewDate,this.onChangeViewDate),this.dp.on(i.eventChangeCurrentView,this.onChangeCurrentView)}_buildBaseHtml(){this.$el=o({className:`air-datepicker-body -${this.type}-`,innerHtml:M[this.type]}),this.$names=r(".air-datepicker-body--day-names",this.$el),this.$cells=r(".air-datepicker-body--cells",this.$el)}_getDayNamesHtml(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dp.locale.firstDay,t="",a=this.dp.isWeekend,{onClickDayName:r}=this.opts,o=e,n=0;for(;n<7;){let e=o%7;t+=`<div class="${u("air-datepicker-body--day-name",{[i.cssClassWeekend]:a(e),"-clickable-":!!r})}" data-day-index='${e}'>${this.dp.locale.daysMin[e]}</div>`,n++,o++}return t}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCell(e){let{type:t,dp:i,opts:a}=this;return new D({type:t,dp:i,opts:a,date:e,body:this})}_generateCells(){Y.getDatesFunction(this.type)(this.dp,(e=>{this.cells.push(this._generateCell(e))}))}show(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}hide(){this.isVisible=!1,this.$el.classList.add("-hidden-")}destroyCells(){this.cells.forEach((e=>e.destroy())),this.cells=[],this.$cells.innerHTML=""}destroy(){this.destroyCells(),this.dp.off(i.eventChangeViewDate,this.onChangeViewDate),this.dp.off(i.eventChangeCurrentView,this.onChangeCurrentView)}static getDaysDates(e,t){let{viewDate:i,opts:{fixedHeight:a},locale:{firstDay:r}}=e,o=s(i),{year:n,month:c}=l(i),d=new Date(n,c,1),h=new Date(n,c,o),u=d.getDay()-r,p=6-h.getDay()+r;u=u<0?u+7:u,p=p>6?p-7:p;let f=function(e,t){let{year:i,month:a,date:r}=l(e);return new Date(i,a,r-t)}(d,u),b=o+u+p,g=f.getDate(),{year:m,month:w}=l(f),y=0;a&&(b=42);const v=[];for(;y<b;){let e=new Date(m,w,g+y);t&&t(e),v.push(e),y++}return v}static getMonthsDates(e,t){let{year:i}=e.parsedViewDate,a=0,r=[];for(;a<12;){const e=new Date(i,a);r.push(e),t&&t(e),a++}return r}static getYearsDates(e,t){let i=h(e.viewDate),a=i[0]-1,r=i[1]+1,o=a,n=[];for(;o<=r;){const e=new Date(o,0);n.push(e),t&&t(e),o++}return n}static getDatesFunction(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.days;return{[i.days]:Y.getDaysDates,[i.months]:Y.getMonthsDates,[i.years]:Y.getYearsDates}[e]}}function E(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class T{constructor(e){let{dp:t,opts:i}=e;E(this,"onClickNav",(e=>{let t=w(e.target,".air-datepicker-nav--action");if(!t)return;let i=t.dataset.action;this.dp[i]()})),E(this,"onChangeViewDate",(()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()})),E(this,"onChangeCurrentView",(()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()})),E(this,"onClickNavTitle",(()=>{this.dp.isFinalView||this.dp.up()})),E(this,"update",(()=>{let{prevHtml:e,nextHtml:t}=this.opts;this.$prev.innerHTML=e,this.$next.innerHTML=t,this._resetNavStatus(),this.render(),this.handleNavStatus()})),E(this,"renderDelay",(()=>{setTimeout(this.render)})),E(this,"render",(()=>{this.$title.innerHTML=this._getTitle(),function(e,t){for(let i in t)t[i]?e.classList.add(i):e.classList.remove(i)}(this.$title,{"-disabled-":this.dp.isFinalView})})),this.dp=t,this.opts=i,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDatepickerEvents()}_defineDOM(){this.$title=r(".air-datepicker-nav--title",this.$el),this.$prev=r('[data-action="prev"]',this.$el),this.$next=r('[data-action="next"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav),this.$title.addEventListener("click",this.onClickNavTitle)}_bindDatepickerEvents(){this.dp.on(i.eventChangeViewDate,this.onChangeViewDate),this.dp.on(i.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.on(i.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.on(i.eventChangeTime,this.render))}destroy(){this.dp.off(i.eventChangeViewDate,this.onChangeViewDate),this.dp.off(i.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.off(i.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.off(i.eventChangeTime,this.render))}_createElement(){this.$el=o({tagName:"nav",className:"air-datepicker-nav"})}_getTitle(){let{dp:e,opts:t}=this,i=t.navTitles[e.currentView];return"function"==typeof i?i(e):e.formatDate(e.viewDate,i)}handleNavStatus(){let{disableNavWhenOutOfRange:e}=this.opts,{minDate:t,maxDate:a}=this.dp;if(!t&&!a||!e)return;let{year:r,month:o}=this.dp.parsedViewDate,n=!!t&&l(t),s=!!a&&l(a);switch(this.dp.currentView){case i.days:t&&n.month>=o&&n.year>=r&&this._disableNav("prev"),a&&s.month<=o&&s.year<=r&&this._disableNav("next");break;case i.months:t&&n.year>=r&&this._disableNav("prev"),a&&s.year<=r&&this._disableNav("next");break;case i.years:{let e=h(this.dp.viewDate);t&&n.year>=e[0]&&this._disableNav("prev"),a&&s.year<=e[1]&&this._disableNav("next");break}}}_disableNav(e){r('[data-action="'+e+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){!function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];e.length?e.forEach((e=>{e.classList.remove(...i)})):e.classList.remove(...i)}(this.$el.querySelectorAll(".air-datepicker-nav--action"),"-disabled-")}_buildBaseHtml(){let{prevHtml:e,nextHtml:t}=this.opts;this.$el.innerHTML=`<div class="air-datepicker-nav--action" data-action="prev">${e}</div><div class="air-datepicker-nav--title"></div><div class="air-datepicker-nav--action" data-action="next">${t}</div>`}get isNavIsFunction(){let{navTitles:e}=this.opts;return Object.keys(e).find((t=>"function"==typeof e[t]))}}var I={today:{content:e=>e.locale.today,onClick:e=>e.setViewDate(new Date)},clear:{content:e=>e.locale.clear,onClick:e=>e.clear()}};class z{constructor(e){let{dp:t,opts:i}=e;this.dp=t,this.opts=i,this.init()}init(){this.createElement(),this.render()}createElement(){this.$el=o({className:"air-datepicker-buttons"})}destroy(){this.$el.parentNode.removeChild(this.$el)}clearHtml(){return this.$el.innerHTML="",this}generateButtons(){let{buttons:e}=this.opts;Array.isArray(e)||(e=[e]),e.forEach((e=>{let t=e;"string"==typeof e&&I[e]&&(t=I[e]);let i=this.createButton(t);t.onClick&&this.attachEventToButton(i,t.onClick),this.$el.appendChild(i)}))}attachEventToButton(e,t){e.addEventListener("click",(()=>{t(this.dp)}))}createButton(e){let{content:t,className:i,tagName:a="button",attrs:r={}}=e;return o({tagName:a,innerHtml:`<span tabindex='-1'>${"function"==typeof t?t(this.dp):t}</span>`,className:u("air-datepicker-button",i),attrs:r})}render(){this.generateButtons()}}function O(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class A{constructor(){let{opts:e,dp:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};O(this,"toggleTimepickerIsActive",(e=>{this.dp.timepickerIsActive=e})),O(this,"onChangeSelectedDate",(e=>{let{date:t,updateTime:i=!1}=e;t&&(this.setMinMaxTime(t),this.setCurrentTime(!!i&&t),this.addTimeToDate(t))})),O(this,"onChangeLastSelectedDate",(e=>{e&&(this.setTime(e),this.render())})),O(this,"onChangeInputRange",(e=>{let t=e.target;this[t.getAttribute("name")]=t.value,this.updateText(),this.dp.trigger(i.eventChangeTime,{hours:this.hours,minutes:this.minutes})})),O(this,"onMouseEnterLeave",(e=>{let t=e.target.getAttribute("name"),i=this.$minutesText;"hours"===t&&(i=this.$hoursText),i.classList.toggle("-focus-")})),O(this,"onFocus",(()=>{this.toggleTimepickerIsActive(!0)})),O(this,"onBlur",(()=>{this.toggleTimepickerIsActive(!1)})),this.opts=e,this.dp=t;let{timeFormat:a}=this.dp.locale;a&&(a.match(x("h"))||a.match(x("hh")))&&(this.ampm=!0),this.init()}init(){this.setTime(this.dp.lastSelectedDate||this.dp.viewDate),this.createElement(),this.buildHtml(),this.defineDOM(),this.render(),this.bindDatepickerEvents(),this.bindDOMEvents()}bindDatepickerEvents(){this.dp.on(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(i.eventChangeLastSelectedDate,this.onChangeLastSelectedDate)}bindDOMEvents(){let e="input";navigator.userAgent.match(/trident/gi)&&(e="change"),m(this.$ranges,e,this.onChangeInputRange),m(this.$ranges,"mouseenter",this.onMouseEnterLeave),m(this.$ranges,"mouseleave",this.onMouseEnterLeave),m(this.$ranges,"focus",this.onFocus),m(this.$ranges,"mousedown",this.onFocus),m(this.$ranges,"blur",this.onBlur)}createElement(){this.$el=o({className:u("air-datepicker-time",{"-am-pm-":this.dp.ampm})})}destroy(){this.dp.off(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(i.eventChangeLastSelectedDate,this.onChangeLastSelectedDate),this.$el.parentNode.removeChild(this.$el)}buildHtml(){let{ampm:e,hours:t,displayHours:i,minutes:a,minHours:r,minMinutes:o,maxHours:n,maxMinutes:s,dayPeriod:l,opts:{hoursStep:c,minutesStep:h}}=this;this.$el.innerHTML=`<div class="air-datepicker-time--current">   <span class="air-datepicker-time--current-hours">${d(i)}</span>   <span class="air-datepicker-time--current-colon">:</span>   <span class="air-datepicker-time--current-minutes">${d(a)}</span>   `+(e?`<span class='air-datepicker-time--current-ampm'>${l}</span>`:"")+'</div><div class="air-datepicker-time--sliders">   <div class="air-datepicker-time--row">'+`      <input type="range" name="hours" value="${t}" min="${r}" max="${n}" step="${c}"/>   </div>   <div class="air-datepicker-time--row">`+`      <input type="range" name="minutes" value="${a}" min="${o}" max="${s}" step="${h}"/>   </div></div>`}defineDOM(){let e=e=>r(e,this.$el);this.$ranges=this.$el.querySelectorAll('[type="range"]'),this.$hours=e('[name="hours"]'),this.$minutes=e('[name="minutes"]'),this.$hoursText=e(".air-datepicker-time--current-hours"),this.$minutesText=e(".air-datepicker-time--current-minutes"),this.$ampm=e(".air-datepicker-time--current-ampm")}setTime(e){this.setMinMaxTime(e),this.setCurrentTime(e)}addTimeToDate(e){e&&(e.setHours(this.hours),e.setMinutes(this.minutes))}setMinMaxTime(e){if(this.setMinMaxTimeFromOptions(),e){let{minDate:t,maxDate:i}=this.dp;t&&p(e,t)&&this.setMinTimeFromMinDate(t),i&&p(e,i)&&this.setMaxTimeFromMaxDate(i)}}setCurrentTime(e){let{hours:t,minutes:i}=e?l(e):this;this.hours=y(t,this.minHours,this.maxHours),this.minutes=y(i,this.minMinutes,this.maxMinutes)}setMinMaxTimeFromOptions(){let{minHours:e,minMinutes:t,maxHours:i,maxMinutes:a}=this.opts;this.minHours=y(e,0,23),this.minMinutes=y(t,0,59),this.maxHours=y(i,0,23),this.maxMinutes=y(a,0,59)}setMinTimeFromMinDate(e){let{lastSelectedDate:t}=this.dp;this.minHours=e.getHours(),t&&t.getHours()>e.getHours()?this.minMinutes=this.opts.minMinutes:this.minMinutes=e.getMinutes()}setMaxTimeFromMaxDate(e){let{lastSelectedDate:t}=this.dp;this.maxHours=e.getHours(),t&&t.getHours()<e.getHours()?this.maxMinutes=this.opts.maxMinutes:this.maxMinutes=e.getMinutes()}updateSliders(){n(this.$hours,{min:this.minHours,max:this.maxHours}).value=this.hours,n(this.$minutes,{min:this.minMinutes,max:this.maxMinutes}).value=this.minutes}updateText(){this.$hoursText.innerHTML=d(this.displayHours),this.$minutesText.innerHTML=d(this.minutes),this.ampm&&(this.$ampm.innerHTML=this.dayPeriod)}set hours(e){this._hours=e;let{hours:t,dayPeriod:i}=c(e);this.displayHours=this.ampm?t:e,this.dayPeriod=i}get hours(){return this._hours}render(){this.updateSliders(),this.updateText()}}function B(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class R{constructor(e){let{dp:t,opts:i}=e;B(this,"pressedKeys",new Set),B(this,"hotKeys",new Map([[[["Control","ArrowRight"],["Control","ArrowUp"]],e=>e.month++],[[["Control","ArrowLeft"],["Control","ArrowDown"]],e=>e.month--],[[["Shift","ArrowRight"],["Shift","ArrowUp"]],e=>e.year++],[[["Shift","ArrowLeft"],["Shift","ArrowDown"]],e=>e.year--],[[["Alt","ArrowRight"],["Alt","ArrowUp"]],e=>e.year+=10],[[["Alt","ArrowLeft"],["Alt","ArrowDown"]],e=>e.year-=10],[["Control","Shift","ArrowUp"],(e,t)=>t.up()]])),B(this,"handleHotKey",(e=>{let t=this.hotKeys.get(e),i=l(this.getInitialFocusDate());t(i,this.dp);let{year:a,month:r,date:o}=i,n=s(new Date(a,r));n<o&&(o=n);let c=this.dp.getClampedDate(new Date(a,r,o));this.dp.setFocusDate(c,{viewDateTransition:!0})})),B(this,"isHotKeyPressed",(()=>{let e=!1,t=this.pressedKeys.size,i=e=>this.pressedKeys.has(e);for(let[a]of this.hotKeys){if(e)break;if(Array.isArray(a[0]))a.forEach((r=>{e||t!==r.length||(e=r.every(i)&&a)}));else{if(t!==a.length)continue;e=a.every(i)&&a}}return e})),B(this,"isArrow",(e=>e>=37&&e<=40)),B(this,"onKeyDown",(e=>{let{key:t,which:i}=e,{dp:a,dp:{focusDate:r},opts:o}=this;this.registerKey(t);let n=this.isHotKeyPressed();if(n)return e.preventDefault(),void this.handleHotKey(n);if(this.isArrow(i))return e.preventDefault(),void this.focusNextCell(t);if("Enter"===t){if(a.currentView!==o.minView)return void a.down();if(r){let e=a._checkIfDateIsSelected(r);return void(e?a._handleAlreadySelectedDates(e,r):a.selectDate(r))}}"Escape"===t&&this.dp.hide()})),B(this,"onKeyUp",(e=>{this.removeKey(e.key)})),this.dp=t,this.opts=i,this.init()}init(){this.bindKeyboardEvents()}bindKeyboardEvents(){let{$el:e}=this.dp;e.addEventListener("keydown",this.onKeyDown),e.addEventListener("keyup",this.onKeyUp)}destroy(){let{$el:e}=this.dp;e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("keyup",this.onKeyUp),this.hotKeys=null,this.pressedKeys=null}getInitialFocusDate(){let{focusDate:e,currentView:t,selectedDates:a,parsedViewDate:{year:r,month:o}}=this.dp,n=e||a[a.length-1];if(!n)switch(t){case i.days:n=new Date(r,o,(new Date).getDate());break;case i.months:n=new Date(r,o,1);break;case i.years:n=new Date(r,0,1)}return n}focusNextCell(e){let t=this.getInitialFocusDate(),{currentView:a}=this.dp,{days:r,months:o,years:n}=i,s=l(t),c=s.year,d=s.month,h=s.date;switch(e){case"ArrowLeft":a===r&&(h-=1),a===o&&(d-=1),a===n&&(c-=1);break;case"ArrowUp":a===r&&(h-=7),a===o&&(d-=3),a===n&&(c-=4);break;case"ArrowRight":a===r&&(h+=1),a===o&&(d+=1),a===n&&(c+=1);break;case"ArrowDown":a===r&&(h+=7),a===o&&(d+=3),a===n&&(c+=4)}let u=this.dp.getClampedDate(new Date(c,d,h));this.dp.setFocusDate(u,{viewDateTransition:!0})}registerKey(e){this.pressedKeys.add(e)}removeKey(e){this.pressedKeys.delete(e)}}let P={on(e,t){this.__events||(this.__events={}),this.__events[e]?this.__events[e].push(t):this.__events[e]=[t]},off(e,t){this.__events&&this.__events[e]&&(this.__events[e]=this.__events[e].filter((e=>e!==t)))},removeAllEvents(){this.__events={}},trigger(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];this.__events&&this.__events[e]&&this.__events[e].forEach((e=>{e(...i)}))}};function N(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let L="",$="",F=!1;class H{static buildGlobalContainer(e){F=!0,L=o({className:e,id:e}),r("body").appendChild(L)}constructor(e,t){var n=this;if(N(this,"viewIndexes",[i.days,i.months,i.years]),N(this,"next",(()=>{let{year:e,month:t}=this.parsedViewDate;switch(this.currentView){case i.days:this.setViewDate(new Date(e,t+1,1));break;case i.months:this.setViewDate(new Date(e+1,t,1));break;case i.years:this.setViewDate(new Date(e+10,0,1))}})),N(this,"prev",(()=>{let{year:e,month:t}=this.parsedViewDate;switch(this.currentView){case i.days:this.setViewDate(new Date(e,t-1,1));break;case i.months:this.setViewDate(new Date(e-1,t,1));break;case i.years:this.setViewDate(new Date(e-10,0,1))}})),N(this,"_finishHide",(()=>{this.hideAnimation=!1,this._destroyComponents(),this.$container.removeChild(this.$datepicker)})),N(this,"setPosition",(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("function"==typeof(e=e||n.opts.position))return void(n.customHide=e({$datepicker:n.$datepicker,$target:n.$el,$pointer:n.$pointer,isViewChange:t,done:n._finishHide}));let i,a,{isMobile:r}=n.opts,o=n.$el.getBoundingClientRect(),s=n.$el.getBoundingClientRect(),l=n.$datepicker.offsetParent,c=n.$el.offsetParent,d=n.$datepicker.getBoundingClientRect(),h=e.split(" "),u=window.scrollY,p=window.scrollX,f=n.opts.offset,b=h[0],g=h[1];if(r)n.$datepicker.style.cssText="left: 50%; top: 50%";else{if(l===c&&l!==document.body&&(s={top:n.$el.offsetTop,left:n.$el.offsetLeft,width:o.width,height:n.$el.offsetHeight},u=0,p=0),l!==c&&l!==document.body){let e=l.getBoundingClientRect();s={top:o.top-e.top,left:o.left-e.left,width:o.width,height:o.height},u=0,p=0}switch(b){case"top":i=s.top-d.height-f;break;case"right":a=s.left+s.width+f;break;case"bottom":i=s.top+s.height+f;break;case"left":a=s.left-d.width-f}switch(g){case"top":i=s.top;break;case"right":a=s.left+s.width-d.width;break;case"bottom":i=s.top+s.height-d.height;break;case"left":a=s.left;break;case"center":/left|right/.test(b)?i=s.top+s.height/2-d.height/2:a=s.left+s.width/2-d.width/2}n.$datepicker.style.cssText=`left: ${a+p}px; top: ${i+u}px`}})),N(this,"_setInputValue",(()=>{let{opts:e,$altField:t,locale:{dateFormat:i}}=this,{altFieldDateFormat:a,altField:r}=e;r&&t&&(t.value=this._getInputValue(a)),this.$el.value=this._getInputValue(i)})),N(this,"_getInputValue",(e=>{let{selectedDates:t,opts:i}=this,{multipleDates:a,multipleDatesSeparator:r}=i;if(!t.length)return"";let o="function"==typeof e,n=o?e(a?t:t[0]):t.map((t=>this.formatDate(t,e)));return n=o?n:n.join(r),n})),N(this,"_checkIfDateIsSelected",(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.days,a=!1;return n.selectedDates.some((i=>{let r=p(e,i,t);return a=r&&i,r})),a})),N(this,"_scheduleCallAfterTransition",(e=>{this._cancelScheduledCall(),e&&e(!1),this._onTransitionEnd=()=>{e&&e(!0)},this.$datepicker.addEventListener("transitionend",this._onTransitionEnd,{once:!0})})),N(this,"_cancelScheduledCall",(()=>{this.$datepicker.removeEventListener("transitionend",this._onTransitionEnd)})),N(this,"setViewDate",(e=>{if(!((e=k(e))instanceof Date))return;if(p(e,this.viewDate))return;let t=this.viewDate;this.viewDate=e;let{onChangeViewDate:a}=this.opts;if(a){let{month:e,year:t}=this.parsedViewDate;a({month:e,year:t,decade:this.curDecade})}this.trigger(i.eventChangeViewDate,e,t)})),N(this,"setFocusDate",(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!e||(e=k(e))instanceof Date)&&(n.focusDate=e,n.trigger(i.eventChangeFocusDate,e,t))})),N(this,"setCurrentView",(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.viewIndexes.includes(e)){if(n.currentView=e,n.elIsInput&&n.visible&&n.setPosition(void 0,!0),n.trigger(i.eventChangeCurrentView,e),!n.views[e]){let t=n.views[e]=new Y({dp:n,opts:n.opts,type:e});n.shouldUpdateDOM&&n.$content.appendChild(t.$el)}n.opts.onChangeView&&!t.silent&&n.opts.onChangeView(e)}})),N(this,"_updateLastSelectedDate",(e=>{this.lastSelectedDate=e,this.trigger(i.eventChangeLastSelectedDate,e)})),N(this,"destroy",(()=>{if(this.isDestroyed)return;let{showEvent:e,isMobile:t}=this.opts,i=this.$datepicker.parentNode;i&&i.removeChild(this.$datepicker),this.$el.removeEventListener(e,this._onFocus),this.$el.removeEventListener("blur",this._onBlur),window.removeEventListener("resize",this._onResize),t&&this._removeMobileAttributes(),this.keyboardNav&&this.keyboardNav.destroy(),this.views=null,this.nav=null,this.$datepicker=null,this.opts={},this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDates=[],this.rangeDateFrom=null,this.rangeDateTo=null,this.isDestroyed=!0})),N(this,"update",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=v({},n.opts),{silent:r}=t;v(n.opts,e);let{timepicker:o,buttons:s,range:l,selectedDates:c,isMobile:d}=n.opts,h=n.visible||n.treatAsInline;n._createMinMaxDates(),n._limitViewDateByMaxMinDates(),n._handleLocale(),c&&(n.selectedDates=[],n.selectDate(c,{silent:r})),e.view&&n.setCurrentView(e.view,{silent:r}),n._setInputValue(),a.range&&!l?(n.rangeDateTo=!1,n.rangeDateFrom=!1):!a.range&&l&&n.selectedDates.length&&(n.rangeDateFrom=n.selectedDates[0],n.rangeDateTo=n.selectedDates[1]),a.timepicker&&!o?(h&&n.timepicker.destroy(),n.timepicker=!1,n.$timepicker.parentNode.removeChild(n.$timepicker)):!a.timepicker&&o&&n._addTimepicker(),!a.buttons&&s?n._addButtons():a.buttons&&!s?(n.buttons.destroy(),n.$buttons.parentNode.removeChild(n.$buttons)):h&&a.buttons&&s&&n.buttons.clearHtml().render(),!a.isMobile&&d?(n.treatAsInline||$||n._createMobileOverlay(),n._addMobileAttributes(),n.visible&&n._showMobileOverlay()):a.isMobile&&!d&&(n._removeMobileAttributes(),n.visible&&($.classList.remove("-active-"),"function"!=typeof n.opts.position&&n.setPosition())),h&&(n.nav.update(),n.views[n.currentView].render(),n.currentView===i.days&&n.views[n.currentView].renderDayNames())})),N(this,"disableDate",((e,t)=>{(Array.isArray(e)?e:[e]).forEach((e=>{let i=k(e);if(!i)return;let a=t?"delete":"add";this.disabledDates[a](this.formatDate(i,"yyyy-MM-dd"));let r=this.getCell(i,this.currentViewSingular);r&&r.adpCell.render()}),[])})),N(this,"enableDate",(e=>{this.disableDate(e,!0)})),N(this,"isDateDisabled",(e=>{let t=k(e);return this.disabledDates.has(this.formatDate(t,"yyyy-MM-dd"))})),N(this,"isOtherMonth",(e=>{let{month:t}=l(e);return t!==this.parsedViewDate.month})),N(this,"isOtherYear",(e=>{let{year:t}=l(e);return t!==this.parsedViewDate.year})),N(this,"isOtherDecade",(e=>{let{year:t}=l(e),[i,a]=h(this.viewDate);return t<i||t>a})),N(this,"_onChangeSelectedDate",(e=>{let{silent:t}=e;setTimeout((()=>{this._setInputValue(),this.opts.onSelect&&!t&&this._triggerOnSelect()}))})),N(this,"_onChangeFocusedDate",(function(e){let{viewDateTransition:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return;let i=!1;t&&(i=n.isOtherMonth(e)||n.isOtherYear(e)||n.isOtherDecade(e)),i&&n.setViewDate(e),n.opts.onFocus&&n.opts.onFocus({datepicker:n,date:e})})),N(this,"_onChangeTime",(e=>{let{hours:t,minutes:i}=e,a=new Date,{lastSelectedDate:r,opts:{onSelect:o}}=this,n=r;r||(n=a);let s=this.getCell(n,this.currentViewSingular),l=s&&s.adpCell;l&&l.isDisabled||(n.setHours(t),n.setMinutes(i),r?(this._setInputValue(),o&&this._triggerOnSelect()):this.selectDate(n))})),N(this,"_onFocus",(e=>{this.visible||this.show()})),N(this,"_onBlur",(e=>{this.inFocus||!this.visible||this.opts.isMobile||this.hide()})),N(this,"_onMouseDown",(e=>{this.inFocus=!0})),N(this,"_onMouseUp",(e=>{this.inFocus=!1,this.$el.focus()})),N(this,"_onResize",(()=>{this.visible&&"function"!=typeof this.opts.position&&this.setPosition()})),N(this,"_onClickOverlay",(()=>{this.visible&&this.hide()})),N(this,"getViewDates",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.days;return Y.getDatesFunction(e)(n)})),N(this,"isWeekend",(e=>this.opts.weekends.includes(e))),N(this,"getClampedDate",(e=>{let{minDate:t,maxDate:i}=this,a=e;return i&&f(e,i)?a=i:t&&b(e,t)&&(a=t),a})),this.$el=r(e),!this.$el)return;this.$datepicker=o({className:"air-datepicker"}),this.opts=v({},a,t),this.$customContainer=!!this.opts.container&&r(this.opts.container),this.$altField=r(this.opts.altField||!1);let{view:s,startDate:c}=this.opts;c||(this.opts.startDate=new Date),"INPUT"===this.$el.nodeName&&(this.elIsInput=!0),this.inited=!1,this.visible=!1,this.viewDate=k(this.opts.startDate),this.focusDate=!1,this.initialReadonly=this.$el.getAttribute("readonly"),this.customHide=!1,this.currentView=s,this.selectedDates=[],this.disabledDates=new Set,this.isDestroyed=!1,this.views={},this.keys=[],this.rangeDateFrom="",this.rangeDateTo="",this.timepickerIsActive=!1,this.treatAsInline=this.opts.inline||!this.elIsInput,this.init()}init(){let{opts:e,treatAsInline:t,opts:{inline:i,isMobile:a,selectedDates:o,keyboardNav:n,onlyTimepicker:s}}=this,l=r("body");(!F||F&&L&&!l.contains(L))&&!i&&this.elIsInput&&!this.$customContainer&&H.buildGlobalContainer(H.defaultGlobalContainerId),!a||$||t||this._createMobileOverlay(),this._handleLocale(),this._bindSubEvents(),this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this.elIsInput&&(i||this._bindEvents(),n&&!s&&(this.keyboardNav=new R({dp:this,opts:e}))),o&&this.selectDate(o,{silent:!0}),this.opts.visible&&!t&&this.show(),a&&!t&&this.$el.setAttribute("readonly",!0),t&&this._createComponents()}_createMobileOverlay(){$=o({className:"air-datepicker-overlay"}),L.appendChild($)}_createComponents(){let{opts:e,treatAsInline:t,opts:{inline:i,buttons:a,timepicker:r,position:o,classes:n,onlyTimepicker:s,isMobile:l}}=this;this._buildBaseHtml(),this.elIsInput&&(i||this._setPositionClasses(o)),!i&&this.elIsInput||this.$datepicker.classList.add("-inline-"),n&&this.$datepicker.classList.add(...n.split(" ")),s&&this.$datepicker.classList.add("-only-timepicker-"),l&&!t&&this._addMobileAttributes(),this.views[this.currentView]=new Y({dp:this,type:this.currentView,opts:e}),this.nav=new T({dp:this,opts:e}),r&&this._addTimepicker(),a&&this._addButtons(),this.$content.appendChild(this.views[this.currentView].$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){for(let e in this.views)this.views[e].destroy();this.views={},this.nav.destroy(),this.timepicker&&this.timepicker.destroy()}_addMobileAttributes(){$.addEventListener("click",this._onClickOverlay),this.$datepicker.classList.add("-is-mobile-"),this.$el.setAttribute("readonly",!0)}_removeMobileAttributes(){$.removeEventListener("click",this._onClickOverlay),this.$datepicker.classList.remove("-is-mobile-"),this.initialReadonly||""===this.initialReadonly||this.$el.removeAttribute("readonly")}_createMinMaxDates(){let{minDate:e,maxDate:t}=this.opts;this.minDate=!!e&&k(e),this.maxDate=!!t&&k(t)}_addTimepicker(){this.$timepicker=o({className:"air-datepicker--time"}),this.$datepicker.appendChild(this.$timepicker),this.timepicker=new A({dp:this,opts:this.opts}),this.$timepicker.appendChild(this.timepicker.$el)}_addButtons(){this.$buttons=o({className:"air-datepicker--buttons"}),this.$datepicker.appendChild(this.$buttons),this.buttons=new z({dp:this,opts:this.opts}),this.$buttons.appendChild(this.buttons.$el)}_bindSubEvents(){this.on(i.eventChangeSelectedDate,this._onChangeSelectedDate),this.on(i.eventChangeFocusDate,this._onChangeFocusedDate),this.on(i.eventChangeTime,this._onChangeTime)}_buildBaseHtml(){let{inline:e}=this.opts;var t,i;this.elIsInput?e?(t=this.$datepicker,(i=this.$el).parentNode.insertBefore(t,i.nextSibling)):this.$container.appendChild(this.$datepicker):this.$el.appendChild(this.$datepicker),this.$datepicker.innerHTML='<i class="air-datepicker--pointer"></i><div class="air-datepicker--navigation"></div><div class="air-datepicker--content"></div>',this.$content=r(".air-datepicker--content",this.$datepicker),this.$pointer=r(".air-datepicker--pointer",this.$datepicker),this.$nav=r(".air-datepicker--navigation",this.$datepicker)}_handleLocale(){let{locale:e,dateFormat:t,firstDay:i,timepicker:a,onlyTimepicker:r,timeFormat:o,dateTimeSeparator:n}=this.opts;var s;this.locale=(s=e,JSON.parse(JSON.stringify(s))),t&&(this.locale.dateFormat=t),void 0!==o&&""!==o&&(this.locale.timeFormat=o);let{timeFormat:l}=this.locale;if(""!==i&&(this.locale.firstDay=i),a&&"function"!=typeof t){let e=l?n:"";this.locale.dateFormat=[this.locale.dateFormat,l||""].join(e)}r&&"function"!=typeof t&&(this.locale.dateFormat=this.locale.timeFormat)}_setPositionClasses(e){if("function"==typeof e)return void this.$datepicker.classList.add("-custom-position-");let t=(e=e.split(" "))[0],i=`air-datepicker -${t}-${e[1]}- -from-${t}-`;this.$datepicker.classList.add(...i.split(" "))}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$el.addEventListener("blur",this._onBlur),this.$datepicker.addEventListener("mousedown",this._onMouseDown),this.$datepicker.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}_limitViewDateByMaxMinDates(){let{viewDate:e,minDate:t,maxDate:i}=this;i&&f(e,i)&&this.setViewDate(i),t&&b(e,t)&&this.setViewDate(t)}formatDate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewDate,t=arguments.length>1?arguments[1]:void 0;if(e=k(e),!(e instanceof Date))return;let i=t,a=this.locale,r=l(e),o=r.dayPeriod,n=h(e),s=H.replacer,c={T:e.getTime(),m:r.minutes,mm:r.fullMinutes,h:r.hours12,hh:r.fullHours12,H:r.hours,HH:r.fullHours,aa:o,AA:o.toUpperCase(),E:a.daysShort[r.day],EEEE:a.days[r.day],d:r.date,dd:r.fullDate,M:r.month+1,MM:r.fullMonth,MMM:a.monthsShort[r.month],MMMM:a.months[r.month],yy:r.year.toString().slice(-2),yyyy:r.year,yyyy1:n[0],yyyy2:n[1]};for(let[e,t]of Object.entries(c))i=s(i,x(e),t);return i}down(e){this._handleUpDownActions(e,"down")}up(e){this._handleUpDownActions(e,"up")}selectDate(e){let t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{currentView:r,parsedViewDate:o,selectedDates:n}=this,{updateTime:s}=a,{moveToOtherMonthsOnSelect:l,moveToOtherYearsOnSelect:c,multipleDates:d,range:h,autoClose:u,onBeforeSelect:p}=this.opts,b=n.length;if(Array.isArray(e))return e.forEach((e=>{this.selectDate(e,a)})),new Promise((e=>{setTimeout(e)}));if((e=k(e))instanceof Date){if(p&&!p({date:e,datepicker:this}))return Promise.resolve();if(r===i.days&&e.getMonth()!==o.month&&l&&(t=new Date(e.getFullYear(),e.getMonth(),1)),r===i.years&&e.getFullYear()!==o.year&&c&&(t=new Date(e.getFullYear(),0,1)),t&&this.setViewDate(t),d&&!h){if(b===d)return;this._checkIfDateIsSelected(e)||n.push(e)}else if(h)switch(b){case 1:n.push(e),this.rangeDateTo||(this.rangeDateTo=e),f(this.rangeDateFrom,this.rangeDateTo)&&(this.rangeDateTo=this.rangeDateFrom,this.rangeDateFrom=e),this.selectedDates=[this.rangeDateFrom,this.rangeDateTo];break;case 2:this.selectedDates=[e],this.rangeDateFrom=e,this.rangeDateTo="";break;default:this.selectedDates=[e],this.rangeDateFrom=e}else this.selectedDates=[e];return this.trigger(i.eventChangeSelectedDate,{action:i.actionSelectDate,silent:null==a?void 0:a.silent,date:e,updateTime:s}),this._updateLastSelectedDate(e),u&&!this.timepickerIsActive&&this.visible&&(d||h?h&&1===b&&this.hide():this.hide()),new Promise((e=>{setTimeout(e)}))}}unselectDate(e){let t=this.selectedDates,a=this;if((e=k(e))instanceof Date)return t.some(((r,o)=>{if(p(r,e))return t.splice(o,1),a.selectedDates.length?(a.rangeDateTo="",a.rangeDateFrom=t[0],a._updateLastSelectedDate(a.selectedDates[a.selectedDates.length-1])):(a.rangeDateFrom="",a.rangeDateTo="",a._updateLastSelectedDate(!1)),this.trigger(i.eventChangeSelectedDate,{action:i.actionUnselectDate,date:e}),!0}))}replaceDate(e,t){let a=this.selectedDates.find((t=>p(t,e,this.currentView))),r=this.selectedDates.indexOf(a);r<0||p(this.selectedDates[r],t,this.currentView)||(this.selectedDates[r]=t,this.trigger(i.eventChangeSelectedDate,{action:i.actionSelectDate,date:t,updateTime:!0}),this._updateLastSelectedDate(t))}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.selectedDates=[],this.rangeDateFrom=!1,this.rangeDateTo=!1,this.lastSelectedDate=!1,this.trigger(i.eventChangeSelectedDate,{action:i.actionUnselectDate,silent:e.silent}),new Promise((e=>{setTimeout(e)}))}show(){let{onShow:e,isMobile:t}=this.opts;this._cancelScheduledCall(),this.visible||this.hideAnimation||this._createComponents(),this.setPosition(this.opts.position),this.$datepicker.classList.add("-active-"),this.visible=!0,e&&this._scheduleCallAfterTransition(e),t&&this._showMobileOverlay()}hide(){let{onHide:e,isMobile:t}=this.opts,i=this._hasTransition();this.visible=!1,this.hideAnimation=!0,this.$datepicker.classList.remove("-active-"),this.customHide&&this.customHide(),this.elIsInput&&this.$el.blur(),this._scheduleCallAfterTransition((t=>{!this.customHide&&(t&&i||!t&&!i)&&this._finishHide(),e&&e(t)})),t&&$.classList.remove("-active-")}_triggerOnSelect(){let e=[],t=[],{selectedDates:i,locale:a,opts:{onSelect:r,multipleDates:o,range:n}}=this,s=o||n,l="function"==typeof a.dateFormat;i.length&&(e=i.map(g),t=l?o?a.dateFormat(e):e.map((e=>a.dateFormat(e))):e.map((e=>this.formatDate(e,a.dateFormat)))),r({date:s?e:e[0],formattedDate:s?t:t[0],datepicker:this})}_handleAlreadySelectedDates(e,t){let{selectedDates:i,rangeDateFrom:a,rangeDateTo:r}=this,{range:o,toggleSelected:n}=this.opts,s=i.length,l="function"==typeof n?n({datepicker:this,date:t}):n,c=Boolean(o&&1===s&&e),d=c?g(t):t;o&&!l&&(2!==s&&this.selectDate(d),2===s&&p(a,r))||(l?this.unselectDate(d):this._updateLastSelectedDate(c?d:e))}_handleUpDownActions(e,t){if(!((e=k(e||this.focusDate||this.viewDate))instanceof Date))return;let i="up"===t?this.viewIndex+1:this.viewIndex-1;i>2&&(i=2),i<0&&(i=0),this.setViewDate(new Date(e.getFullYear(),e.getMonth(),1)),this.setCurrentView(this.viewIndexes[i])}getCell(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.day;if(!((e=k(e))instanceof Date))return;let{year:a,month:r,date:o}=l(e),n=`[data-year="${a}"]`,s=`[data-month="${r}"]`,c={[i.day]:`${n}${s}[data-date="${o}"]`,[i.month]:`${n}${s}`,[i.year]:`${n}`};return this.views[this.currentView]?this.views[this.currentView].$el.querySelector(c[t]):void 0}_showMobileOverlay(){$.classList.add("-active-")}_hasTransition(){return window.getComputedStyle(this.$datepicker).getPropertyValue("transition-duration").split(", ").reduce(((e,t)=>parseFloat(t)+e),0)>0}get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return l(this.viewDate)}get currentViewSingular(){return this.currentView.slice(0,-1)}get curDecade(){return h(this.viewDate)}get viewIndex(){return this.viewIndexes.indexOf(this.currentView)}get isFinalView(){return this.currentView===i.years}get hasSelectedDates(){return this.selectedDates.length>0}get isMinViewReached(){return this.currentView===this.opts.minView||this.currentView===i.days}get $container(){return this.$customContainer||L}static replacer(e,t,i){return e.replace(t,(function(e,t,a,r){return t+i+r}))}}var U;return N(H,"defaults",a),N(H,"version","3.5.3"),N(H,"defaultGlobalContainerId","air-datepicker-global-container"),U=H.prototype,Object.assign(U,P),t.default}()}))})(bs);const gs=bs.exports;var ms={};Object.defineProperty(ms,"__esModule",{value:true});var ws=ms.default=void 0;var ys={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",dateFormat:"MM/dd/yyyy",timeFormat:"hh:mm aa",firstDay:0};ws=ms.default=ys;const vs='.air-datepicker-cell.-year-.-other-decade-,.air-datepicker-cell.-day-.-other-month-{color:var(--adp-color-other-month)}.air-datepicker-cell.-year-.-other-decade-:hover,.air-datepicker-cell.-day-.-other-month-:hover{color:var(--adp-color-other-month-hover)}.-disabled-.-focus-.air-datepicker-cell.-year-.-other-decade-,.-disabled-.-focus-.air-datepicker-cell.-day-.-other-month-{color:var(--adp-color-other-month)}.-selected-.air-datepicker-cell.-year-.-other-decade-,.-selected-.air-datepicker-cell.-day-.-other-month-{color:#fff;background:var(--adp-background-color-selected-other-month)}.-selected-.-focus-.air-datepicker-cell.-year-.-other-decade-,.-selected-.-focus-.air-datepicker-cell.-day-.-other-month-{background:var(--adp-background-color-selected-other-month-focused)}.-in-range-.air-datepicker-cell.-year-.-other-decade-,.-in-range-.air-datepicker-cell.-day-.-other-month-{background-color:var(--adp-background-color-in-range);color:var(--adp-color)}.-in-range-.-focus-.air-datepicker-cell.-year-.-other-decade-,.-in-range-.-focus-.air-datepicker-cell.-day-.-other-month-{background-color:var(--adp-background-color-in-range-focused)}.air-datepicker-cell.-year-.-other-decade-:empty,.air-datepicker-cell.-day-.-other-month-:empty{background:none;border:none}.air-datepicker-cell{border-radius:var(--adp-cell-border-radius);box-sizing:border-box;cursor:pointer;display:flex;position:relative;align-items:center;justify-content:center;z-index:1}.air-datepicker-cell.-focus-{background:var(--adp-cell-background-color-hover)}.air-datepicker-cell.-current-{color:var(--adp-color-current-date)}.air-datepicker-cell.-current-.-focus-{color:var(--adp-color)}.air-datepicker-cell.-current-.-in-range-{color:var(--adp-color-current-date)}.air-datepicker-cell.-disabled-{cursor:default;color:var(--adp-color-disabled)}.air-datepicker-cell.-disabled-.-focus-{color:var(--adp-color-disabled)}.air-datepicker-cell.-disabled-.-in-range-{color:var(--adp-color-disabled-in-range)}.air-datepicker-cell.-disabled-.-current-.-focus-{color:var(--adp-color-disabled)}.air-datepicker-cell.-in-range-{background:var(--adp-cell-background-color-in-range);border-radius:0}.air-datepicker-cell.-in-range-:hover,.air-datepicker-cell.-in-range-.-focus-{background:var(--adp-cell-background-color-in-range-hover)}.air-datepicker-cell.-range-from-{border:1px solid var(--adp-cell-border-color-in-range);background-color:var(--adp-cell-background-color-in-range);border-radius:var(--adp-cell-border-radius) 0 0 var(--adp-cell-border-radius)}.air-datepicker-cell.-range-to-{border:1px solid var(--adp-cell-border-color-in-range);background-color:var(--adp-cell-background-color-in-range);border-radius:0 var(--adp-cell-border-radius) var(--adp-cell-border-radius) 0}.air-datepicker-cell.-range-to-.-range-from-{border-radius:var(--adp-cell-border-radius)}.air-datepicker-cell.-selected-{color:#fff;border:none;background:var(--adp-cell-background-color-selected)}.air-datepicker-cell.-selected-.-current-{color:#fff;background:var(--adp-cell-background-color-selected)}.air-datepicker-cell.-selected-.-focus-{background:var(--adp-cell-background-color-selected-hover)}\n.air-datepicker-body{transition:all var(--adp-transition-duration) var(--adp-transition-ease)}.air-datepicker-body.-hidden-{display:none}.air-datepicker-body--day-names{display:grid;grid-template-columns:repeat(7, var(--adp-day-cell-width));margin:8px 0 3px}.air-datepicker-body--day-name{color:var(--adp-day-name-color);display:flex;align-items:center;justify-content:center;flex:1;text-align:center;text-transform:uppercase;font-size:.8em}.air-datepicker-body--day-name.-clickable-{cursor:pointer}.air-datepicker-body--day-name.-clickable-:hover{color:var(--adp-day-name-color-hover)}.air-datepicker-body--cells{display:grid}.air-datepicker-body--cells.-days-{grid-template-columns:repeat(7, var(--adp-day-cell-width));grid-auto-rows:var(--adp-day-cell-height)}.air-datepicker-body--cells.-months-{grid-template-columns:repeat(3, 1fr);grid-auto-rows:var(--adp-month-cell-height)}.air-datepicker-body--cells.-years-{grid-template-columns:repeat(4, 1fr);grid-auto-rows:var(--adp-year-cell-height)}\n.air-datepicker-nav{display:flex;justify-content:space-between;border-bottom:1px solid var(--adp-border-color-inner);min-height:var(--adp-nav-height);padding:var(--adp-padding);box-sizing:content-box}.-only-timepicker- .air-datepicker-nav{display:none}.air-datepicker-nav--title,.air-datepicker-nav--action{display:flex;cursor:pointer;align-items:center;justify-content:center}.air-datepicker-nav--action{width:var(--adp-nav-action-size);border-radius:var(--adp-border-radius);-webkit-user-select:none;-moz-user-select:none;user-select:none}.air-datepicker-nav--action:hover{background:var(--adp-background-color-hover)}.air-datepicker-nav--action:active{background:var(--adp-background-color-active)}.air-datepicker-nav--action.-disabled-{visibility:hidden}.air-datepicker-nav--action svg{width:32px;height:32px}.air-datepicker-nav--action path{fill:none;stroke:var(--adp-nav-arrow-color);stroke-width:2px}.air-datepicker-nav--title{border-radius:var(--adp-border-radius);padding:0 8px}.air-datepicker-nav--title i{font-style:normal;color:var(--adp-nav-color-secondary);margin-left:.3em}.air-datepicker-nav--title:hover{background:var(--adp-background-color-hover)}.air-datepicker-nav--title:active{background:var(--adp-background-color-active)}.air-datepicker-nav--title.-disabled-{cursor:default;background:none}\n.air-datepicker-buttons{display:grid;grid-auto-columns:1fr;grid-auto-flow:column}.air-datepicker-button{display:inline-flex;color:var(--adp-btn-color);border-radius:var(--adp-btn-border-radius);cursor:pointer;height:var(--adp-btn-height);border:none;background:rgba(255,255,255,0)}.air-datepicker-button:hover{color:var(--adp-btn-color-hover);background:var(--adp-btn-background-color-hover)}.air-datepicker-button:focus{color:var(--adp-btn-color-hover);background:var(--adp-btn-background-color-hover);outline:none}.air-datepicker-button:active{background:var(--adp-btn-background-color-active)}.air-datepicker-button span{outline:none;display:flex;align-items:center;justify-content:center;width:100%;height:100%}\n.air-datepicker-time{display:grid;grid-template-columns:max-content 1fr;grid-column-gap:12px;align-items:center;position:relative;padding:0 var(--adp-time-padding-inner)}.-only-timepicker- .air-datepicker-time{border-top:none}.air-datepicker-time--current{display:flex;align-items:center;flex:1;font-size:14px;text-align:center}.air-datepicker-time--current-colon{margin:0 2px 3px;line-height:1}.air-datepicker-time--current-hours,.air-datepicker-time--current-minutes{line-height:1;font-size:19px;font-family:"Century Gothic",CenturyGothic,AppleGothic,sans-serif;position:relative;z-index:1}.air-datepicker-time--current-hours:after,.air-datepicker-time--current-minutes:after{content:"";background:var(--adp-background-color-hover);border-radius:var(--adp-border-radius);position:absolute;left:-2px;top:-3px;right:-2px;bottom:-2px;z-index:-1;opacity:0}.air-datepicker-time--current-hours.-focus-:after,.air-datepicker-time--current-minutes.-focus-:after{opacity:1}.air-datepicker-time--current-ampm{text-transform:uppercase;align-self:flex-end;color:var(--adp-time-day-period-color);margin-left:6px;font-size:11px;margin-bottom:1px}.air-datepicker-time--row{display:flex;align-items:center;font-size:11px;height:17px;background:linear-gradient(to right, var(--adp-time-track-color), var(--adp-time-track-color)) left 50%/100% var(--adp-time-track-height) no-repeat}.air-datepicker-time--row:first-child{margin-bottom:4px}.air-datepicker-time--row input[type=range]{background:none;cursor:pointer;flex:1;height:100%;width:100%;padding:0;margin:0;-webkit-appearance:none}.air-datepicker-time--row input[type=range]::-webkit-slider-thumb{-webkit-appearance:none}.air-datepicker-time--row input[type=range]::-ms-tooltip{display:none}.air-datepicker-time--row input[type=range]:hover::-webkit-slider-thumb{border-color:var(--adp-time-track-color-hover)}.air-datepicker-time--row input[type=range]:hover::-moz-range-thumb{border-color:var(--adp-time-track-color-hover)}.air-datepicker-time--row input[type=range]:hover::-ms-thumb{border-color:var(--adp-time-track-color-hover)}.air-datepicker-time--row input[type=range]:focus{outline:none}.air-datepicker-time--row input[type=range]:focus::-webkit-slider-thumb{background:var(--adp-cell-background-color-selected);border-color:var(--adp-cell-background-color-selected)}.air-datepicker-time--row input[type=range]:focus::-moz-range-thumb{background:var(--adp-cell-background-color-selected);border-color:var(--adp-cell-background-color-selected)}.air-datepicker-time--row input[type=range]:focus::-ms-thumb{background:var(--adp-cell-background-color-selected);border-color:var(--adp-cell-background-color-selected)}.air-datepicker-time--row input[type=range]::-webkit-slider-thumb{box-sizing:border-box;height:12px;width:12px;border-radius:3px;border:1px solid var(--adp-time-track-color);background:#fff;cursor:pointer;-webkit-transition:background var(--adp-transition-duration);transition:background var(--adp-transition-duration)}.air-datepicker-time--row input[type=range]::-moz-range-thumb{box-sizing:border-box;height:12px;width:12px;border-radius:3px;border:1px solid var(--adp-time-track-color);background:#fff;cursor:pointer;-moz-transition:background var(--adp-transition-duration);transition:background var(--adp-transition-duration)}.air-datepicker-time--row input[type=range]::-ms-thumb{box-sizing:border-box;height:12px;width:12px;border-radius:3px;border:1px solid var(--adp-time-track-color);background:#fff;cursor:pointer;-ms-transition:background var(--adp-transition-duration);transition:background var(--adp-transition-duration)}.air-datepicker-time--row input[type=range]::-webkit-slider-thumb{margin-top:calc(var(--adp-time-thumb-size)/2*-1)}.air-datepicker-time--row input[type=range]::-webkit-slider-runnable-track{border:none;height:var(--adp-time-track-height);cursor:pointer;color:rgba(0,0,0,0);background:rgba(0,0,0,0)}.air-datepicker-time--row input[type=range]::-moz-range-track{border:none;height:var(--adp-time-track-height);cursor:pointer;color:rgba(0,0,0,0);background:rgba(0,0,0,0)}.air-datepicker-time--row input[type=range]::-ms-track{border:none;height:var(--adp-time-track-height);cursor:pointer;color:rgba(0,0,0,0);background:rgba(0,0,0,0)}.air-datepicker-time--row input[type=range]::-ms-fill-lower{background:rgba(0,0,0,0)}.air-datepicker-time--row input[type=range]::-ms-fill-upper{background:rgba(0,0,0,0)}\n.air-datepicker{--adp-font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";--adp-font-size: 14px;--adp-width: 246px;--adp-z-index: 100;--adp-padding: 4px;--adp-grid-areas: "nav" "body" "timepicker" "buttons";--adp-transition-duration: .3s;--adp-transition-ease: ease-out;--adp-transition-offset: 8px;--adp-background-color: #fff;--adp-background-color-hover: #f0f0f0;--adp-background-color-active: #eaeaea;--adp-background-color-in-range: rgba(92, 196, 239, .1);--adp-background-color-in-range-focused: rgba(92, 196, 239, .2);--adp-background-color-selected-other-month-focused: #8ad5f4;--adp-background-color-selected-other-month: #a2ddf6;--adp-color: #4a4a4a;--adp-color-secondary: #9c9c9c;--adp-accent-color: #4eb5e6;--adp-color-current-date: var(--adp-accent-color);--adp-color-other-month: #dedede;--adp-color-disabled: #aeaeae;--adp-color-disabled-in-range: #939393;--adp-color-other-month-hover: #c5c5c5;--adp-border-color: #dbdbdb;--adp-border-color-inner: #efefef;--adp-border-radius: 4px;--adp-border-color-inline: #d7d7d7;--adp-nav-height: 32px;--adp-nav-arrow-color: var(--adp-color-secondary);--adp-nav-action-size: 32px;--adp-nav-color-secondary: var(--adp-color-secondary);--adp-day-name-color: #ff9a19;--adp-day-name-color-hover: #8ad5f4;--adp-day-cell-width: 1fr;--adp-day-cell-height: 32px;--adp-month-cell-height: 42px;--adp-year-cell-height: 56px;--adp-pointer-size: 10px;--adp-poiner-border-radius: 2px;--adp-pointer-offset: 14px;--adp-cell-border-radius: 4px;--adp-cell-background-color-hover: var(--adp-background-color-hover);--adp-cell-background-color-selected: #5cc4ef;--adp-cell-background-color-selected-hover: #45bced;--adp-cell-background-color-in-range: rgba(92, 196, 239, 0.1);--adp-cell-background-color-in-range-hover: rgba(92, 196, 239, 0.2);--adp-cell-border-color-in-range: var(--adp-cell-background-color-selected);--adp-btn-height: 32px;--adp-btn-color: var(--adp-accent-color);--adp-btn-color-hover: var(--adp-color);--adp-btn-border-radius: var(--adp-border-radius);--adp-btn-background-color-hover: var(--adp-background-color-hover);--adp-btn-background-color-active: var(--adp-background-color-active);--adp-time-track-height: 1px;--adp-time-track-color: #dedede;--adp-time-track-color-hover: #b1b1b1;--adp-time-thumb-size: 12px;--adp-time-padding-inner: 10px;--adp-time-day-period-color: var(--adp-color-secondary);--adp-mobile-font-size: 16px;--adp-mobile-nav-height: 40px;--adp-mobile-width: 320px;--adp-mobile-day-cell-height: 38px;--adp-mobile-month-cell-height: 48px;--adp-mobile-year-cell-height: 64px}.air-datepicker-overlay{--adp-overlay-background-color: rgba(0, 0, 0, .3);--adp-overlay-transition-duration: .3s;--adp-overlay-transition-ease: ease-out;--adp-overlay-z-index: 99}\n.air-datepicker{background:var(--adp-background-color);border:1px solid var(--adp-border-color);box-shadow:0 4px 12px rgba(0,0,0,.15);border-radius:var(--adp-border-radius);box-sizing:content-box;display:grid;grid-template-columns:1fr;grid-template-rows:repeat(4, max-content);grid-template-areas:var(--adp-grid-areas);font-family:var(--adp-font-family),sans-serif;font-size:var(--adp-font-size);color:var(--adp-color);width:var(--adp-width);position:absolute;transition:opacity var(--adp-transition-duration) var(--adp-transition-ease),transform var(--adp-transition-duration) var(--adp-transition-ease);z-index:var(--adp-z-index)}.air-datepicker:not(.-custom-position-){opacity:0}.air-datepicker.-from-top-{transform:translateY(calc(var(--adp-transition-offset) * -1))}.air-datepicker.-from-right-{transform:translateX(var(--adp-transition-offset))}.air-datepicker.-from-bottom-{transform:translateY(var(--adp-transition-offset))}.air-datepicker.-from-left-{transform:translateX(calc(var(--adp-transition-offset) * -1))}.air-datepicker.-active-:not(.-custom-position-){transform:translate(0, 0);opacity:1}.air-datepicker.-active-.-custom-position-{transition:none}.air-datepicker.-inline-{border-color:var(--adp-border-color-inline);box-shadow:none;position:static;left:auto;right:auto;opacity:1;transform:none}.air-datepicker.-inline- .air-datepicker--pointer{display:none}.air-datepicker.-is-mobile-{--adp-font-size: var(--adp-mobile-font-size);--adp-day-cell-height: var(--adp-mobile-day-cell-height);--adp-month-cell-height: var(--adp-mobile-month-cell-height);--adp-year-cell-height: var(--adp-mobile-year-cell-height);--adp-nav-height: var(--adp-mobile-nav-height);--adp-nav-action-size: var(--adp-mobile-nav-height);position:fixed;width:var(--adp-mobile-width);border:none}.air-datepicker.-is-mobile- *{-webkit-tap-highlight-color:rgba(0,0,0,0)}.air-datepicker.-is-mobile- .air-datepicker--pointer{display:none}.air-datepicker.-is-mobile-:not(.-custom-position-){transform:translate(-50%, calc(-50% + var(--adp-transition-offset)))}.air-datepicker.-is-mobile-.-active-:not(.-custom-position-){transform:translate(-50%, -50%)}.air-datepicker.-custom-position-{transition:none}.air-datepicker-global-container{position:absolute;left:0;top:0}.air-datepicker--pointer{--pointer-half-size: calc(var(--adp-pointer-size) / 2);position:absolute;width:var(--adp-pointer-size);height:var(--adp-pointer-size);z-index:-1}.air-datepicker--pointer:after{content:"";position:absolute;background:#fff;border-top:1px solid var(--adp-border-color-inline);border-right:1px solid var(--adp-border-color-inline);border-top-right-radius:var(--adp-poiner-border-radius);width:var(--adp-pointer-size);height:var(--adp-pointer-size);box-sizing:border-box}.-top-left- .air-datepicker--pointer,.-top-center- .air-datepicker--pointer,.-top-right- .air-datepicker--pointer,[data-popper-placement^=top] .air-datepicker--pointer{top:calc(100% - var(--pointer-half-size) + 1px)}.-top-left- .air-datepicker--pointer:after,.-top-center- .air-datepicker--pointer:after,.-top-right- .air-datepicker--pointer:after,[data-popper-placement^=top] .air-datepicker--pointer:after{transform:rotate(135deg)}.-right-top- .air-datepicker--pointer,.-right-center- .air-datepicker--pointer,.-right-bottom- .air-datepicker--pointer,[data-popper-placement^=right] .air-datepicker--pointer{right:calc(100% - var(--pointer-half-size) + 1px)}.-right-top- .air-datepicker--pointer:after,.-right-center- .air-datepicker--pointer:after,.-right-bottom- .air-datepicker--pointer:after,[data-popper-placement^=right] .air-datepicker--pointer:after{transform:rotate(225deg)}.-bottom-left- .air-datepicker--pointer,.-bottom-center- .air-datepicker--pointer,.-bottom-right- .air-datepicker--pointer,[data-popper-placement^=bottom] .air-datepicker--pointer{bottom:calc(100% - var(--pointer-half-size) + 1px)}.-bottom-left- .air-datepicker--pointer:after,.-bottom-center- .air-datepicker--pointer:after,.-bottom-right- .air-datepicker--pointer:after,[data-popper-placement^=bottom] .air-datepicker--pointer:after{transform:rotate(315deg)}.-left-top- .air-datepicker--pointer,.-left-center- .air-datepicker--pointer,.-left-bottom- .air-datepicker--pointer,[data-popper-placement^=left] .air-datepicker--pointer{left:calc(100% - var(--pointer-half-size) + 1px)}.-left-top- .air-datepicker--pointer:after,.-left-center- .air-datepicker--pointer:after,.-left-bottom- .air-datepicker--pointer:after,[data-popper-placement^=left] .air-datepicker--pointer:after{transform:rotate(45deg)}.-top-left- .air-datepicker--pointer,.-bottom-left- .air-datepicker--pointer{left:var(--adp-pointer-offset)}.-top-right- .air-datepicker--pointer,.-bottom-right- .air-datepicker--pointer{right:var(--adp-pointer-offset)}.-top-center- .air-datepicker--pointer,.-bottom-center- .air-datepicker--pointer{left:calc(50% - var(--adp-pointer-size)/2)}.-left-top- .air-datepicker--pointer,.-right-top- .air-datepicker--pointer{top:var(--adp-pointer-offset)}.-left-bottom- .air-datepicker--pointer,.-right-bottom- .air-datepicker--pointer{bottom:var(--adp-pointer-offset)}.-left-center- .air-datepicker--pointer,.-right-center- .air-datepicker--pointer{top:calc(50% - var(--adp-pointer-size)/2)}.air-datepicker--navigation{grid-area:nav}.air-datepicker--content{box-sizing:content-box;padding:var(--adp-padding);grid-area:body}.-only-timepicker- .air-datepicker--content{display:none}.air-datepicker--time{grid-area:timepicker}.air-datepicker--buttons{grid-area:buttons}.air-datepicker--buttons,.air-datepicker--time{padding:var(--adp-padding);border-top:1px solid var(--adp-border-color-inner)}.air-datepicker-overlay{position:fixed;background:var(--adp-overlay-background-color);left:0;top:0;width:0;height:0;opacity:0;transition:opacity var(--adp-overlay-transition-duration) var(--adp-overlay-transition-ease),left 0s,height 0s,width 0s;transition-delay:0s,var(--adp-overlay-transition-duration),var(--adp-overlay-transition-duration),var(--adp-overlay-transition-duration);z-index:var(--adp-overlay-z-index)}.air-datepicker-overlay.-active-{opacity:1;width:100%;height:100%;transition:opacity var(--adp-overlay-transition-duration) var(--adp-overlay-transition-ease),height 0s,width 0s}\n\n/* Generates --wa-color-{hue}-on tokens for pairing with any palette\'s key colors */\n:where(:root),\n:host {\n  /**\n    * Conditional tokens to check if the key color is >= 60\n    * Key colors are the most colorful tint in a scale, recorded as --wa-color-{hue} in each palette\n    * The numeric value of the key is isolated as --wa-color-{hue}-key\n    * If key < 60, the result is 0%\n    * If key >= 60, the result is 100%\n    * Intended to be used in the color-mix() functions below\n    */\n\n  --wa-color-red-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-red-key), 1) * 100%));\n  --wa-color-orange-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-orange-key), 1) * 100%));\n  --wa-color-yellow-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-yellow-key), 1) * 100%));\n  --wa-color-green-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-green-key), 1) * 100%));\n  --wa-color-cyan-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-cyan-key), 1) * 100%));\n  --wa-color-blue-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-blue-key), 1) * 100%));\n  --wa-color-indigo-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-indigo-key), 1) * 100%));\n  --wa-color-purple-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-purple-key), 1) * 100%));\n  --wa-color-pink-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-pink-key), 1) * 100%));\n  --wa-color-gray-gte-60: calc(100% - (clamp(0, 60 - var(--wa-color-gray-key), 1) * 100%));\n\n  /**\n    * Tokens to set text color with appropriate WCAG 2.1 contrast\n    * If key < 60, the text color is white\n    * If key >= 60, the text color is {hue}-10\n    */\n\n  --wa-color-red-on: color-mix(in oklab, var(--wa-color-red-10) var(--wa-color-red-gte-60), white);\n  --wa-color-orange-on: color-mix(in oklab, var(--wa-color-orange-10) var(--wa-color-orange-gte-60), white);\n  --wa-color-yellow-on: color-mix(in oklab, var(--wa-color-yellow-10) var(--wa-color-yellow-gte-60), white);\n  --wa-color-green-on: color-mix(in oklab, var(--wa-color-green-10) var(--wa-color-green-gte-60), white);\n  --wa-color-cyan-on: color-mix(in oklab, var(--wa-color-cyan-10) var(--wa-color-cyan-gte-60), white);\n  --wa-color-blue-on: color-mix(in oklab, var(--wa-color-blue-10) var(--wa-color-blue-gte-60), white);\n  --wa-color-indigo-on: color-mix(in oklab, var(--wa-color-indigo-10) var(--wa-color-indigo-gte-60), white);\n  --wa-color-purple-on: color-mix(in oklab, var(--wa-color-purple-10) var(--wa-color-purple-gte-60), white);\n  --wa-color-pink-on: color-mix(in oklab, var(--wa-color-pink-10) var(--wa-color-pink-gte-60), white);\n  --wa-color-gray-on: color-mix(in oklab, var(--wa-color-gray-10) var(--wa-color-gray-gte-60), white);\n}\n\n@layer wa-color-variant {\n  :where(:root), /* default */\n  .wa-brand-blue {\n    --wa-color-brand-95: var(--wa-color-blue-95);\n    --wa-color-brand-90: var(--wa-color-blue-90);\n    --wa-color-brand-80: var(--wa-color-blue-80);\n    --wa-color-brand-70: var(--wa-color-blue-70);\n    --wa-color-brand-60: var(--wa-color-blue-60);\n    --wa-color-brand-50: var(--wa-color-blue-50);\n    --wa-color-brand-40: var(--wa-color-blue-40);\n    --wa-color-brand-30: var(--wa-color-blue-30);\n    --wa-color-brand-20: var(--wa-color-blue-20);\n    --wa-color-brand-10: var(--wa-color-blue-10);\n    --wa-color-brand-05: var(--wa-color-blue-05);\n    --wa-color-brand: var(--wa-color-blue);\n    --wa-color-brand-on: var(--wa-color-blue-on);\n  }\n\n  .wa-brand-red {\n    --wa-color-brand-95: var(--wa-color-red-95);\n    --wa-color-brand-90: var(--wa-color-red-90);\n    --wa-color-brand-80: var(--wa-color-red-80);\n    --wa-color-brand-70: var(--wa-color-red-70);\n    --wa-color-brand-60: var(--wa-color-red-60);\n    --wa-color-brand-50: var(--wa-color-red-50);\n    --wa-color-brand-40: var(--wa-color-red-40);\n    --wa-color-brand-30: var(--wa-color-red-30);\n    --wa-color-brand-20: var(--wa-color-red-20);\n    --wa-color-brand-10: var(--wa-color-red-10);\n    --wa-color-brand-05: var(--wa-color-red-05);\n    --wa-color-brand: var(--wa-color-red);\n    --wa-color-brand-on: var(--wa-color-red-on);\n  }\n\n  .wa-brand-orange {\n    --wa-color-brand-95: var(--wa-color-orange-95);\n    --wa-color-brand-90: var(--wa-color-orange-90);\n    --wa-color-brand-80: var(--wa-color-orange-80);\n    --wa-color-brand-70: var(--wa-color-orange-70);\n    --wa-color-brand-60: var(--wa-color-orange-60);\n    --wa-color-brand-50: var(--wa-color-orange-50);\n    --wa-color-brand-40: var(--wa-color-orange-40);\n    --wa-color-brand-30: var(--wa-color-orange-30);\n    --wa-color-brand-20: var(--wa-color-orange-20);\n    --wa-color-brand-10: var(--wa-color-orange-10);\n    --wa-color-brand-05: var(--wa-color-orange-05);\n    --wa-color-brand: var(--wa-color-orange);\n    --wa-color-brand-on: var(--wa-color-orange-on);\n  }\n\n  .wa-brand-yellow {\n    --wa-color-brand-95: var(--wa-color-yellow-95);\n    --wa-color-brand-90: var(--wa-color-yellow-90);\n    --wa-color-brand-80: var(--wa-color-yellow-80);\n    --wa-color-brand-70: var(--wa-color-yellow-70);\n    --wa-color-brand-60: var(--wa-color-yellow-60);\n    --wa-color-brand-50: var(--wa-color-yellow-50);\n    --wa-color-brand-40: var(--wa-color-yellow-40);\n    --wa-color-brand-30: var(--wa-color-yellow-30);\n    --wa-color-brand-20: var(--wa-color-yellow-20);\n    --wa-color-brand-10: var(--wa-color-yellow-10);\n    --wa-color-brand-05: var(--wa-color-yellow-05);\n    --wa-color-brand: var(--wa-color-yellow);\n    --wa-color-brand-on: var(--wa-color-yellow-on);\n  }\n\n  .wa-brand-green {\n    --wa-color-brand-95: var(--wa-color-green-95);\n    --wa-color-brand-90: var(--wa-color-green-90);\n    --wa-color-brand-80: var(--wa-color-green-80);\n    --wa-color-brand-70: var(--wa-color-green-70);\n    --wa-color-brand-60: var(--wa-color-green-60);\n    --wa-color-brand-50: var(--wa-color-green-50);\n    --wa-color-brand-40: var(--wa-color-green-40);\n    --wa-color-brand-30: var(--wa-color-green-30);\n    --wa-color-brand-20: var(--wa-color-green-20);\n    --wa-color-brand-10: var(--wa-color-green-10);\n    --wa-color-brand-05: var(--wa-color-green-05);\n    --wa-color-brand: var(--wa-color-green);\n    --wa-color-brand-on: var(--wa-color-green-on);\n  }\n\n  .wa-brand-cyan {\n    --wa-color-brand-95: var(--wa-color-cyan-95);\n    --wa-color-brand-90: var(--wa-color-cyan-90);\n    --wa-color-brand-80: var(--wa-color-cyan-80);\n    --wa-color-brand-70: var(--wa-color-cyan-70);\n    --wa-color-brand-60: var(--wa-color-cyan-60);\n    --wa-color-brand-50: var(--wa-color-cyan-50);\n    --wa-color-brand-40: var(--wa-color-cyan-40);\n    --wa-color-brand-30: var(--wa-color-cyan-30);\n    --wa-color-brand-20: var(--wa-color-cyan-20);\n    --wa-color-brand-10: var(--wa-color-cyan-10);\n    --wa-color-brand-05: var(--wa-color-cyan-05);\n    --wa-color-brand: var(--wa-color-cyan);\n    --wa-color-brand-on: var(--wa-color-cyan-on);\n  }\n\n  .wa-brand-indigo {\n    --wa-color-brand-95: var(--wa-color-indigo-95);\n    --wa-color-brand-90: var(--wa-color-indigo-90);\n    --wa-color-brand-80: var(--wa-color-indigo-80);\n    --wa-color-brand-70: var(--wa-color-indigo-70);\n    --wa-color-brand-60: var(--wa-color-indigo-60);\n    --wa-color-brand-50: var(--wa-color-indigo-50);\n    --wa-color-brand-40: var(--wa-color-indigo-40);\n    --wa-color-brand-30: var(--wa-color-indigo-30);\n    --wa-color-brand-20: var(--wa-color-indigo-20);\n    --wa-color-brand-10: var(--wa-color-indigo-10);\n    --wa-color-brand-05: var(--wa-color-indigo-05);\n    --wa-color-brand: var(--wa-color-indigo);\n    --wa-color-brand-on: var(--wa-color-indigo-on);\n  }\n\n  .wa-brand-purple {\n    --wa-color-brand-95: var(--wa-color-purple-95);\n    --wa-color-brand-90: var(--wa-color-purple-90);\n    --wa-color-brand-80: var(--wa-color-purple-80);\n    --wa-color-brand-70: var(--wa-color-purple-70);\n    --wa-color-brand-60: var(--wa-color-purple-60);\n    --wa-color-brand-50: var(--wa-color-purple-50);\n    --wa-color-brand-40: var(--wa-color-purple-40);\n    --wa-color-brand-30: var(--wa-color-purple-30);\n    --wa-color-brand-20: var(--wa-color-purple-20);\n    --wa-color-brand-10: var(--wa-color-purple-10);\n    --wa-color-brand-05: var(--wa-color-purple-05);\n    --wa-color-brand: var(--wa-color-purple);\n    --wa-color-brand-on: var(--wa-color-purple-on);\n  }\n\n  .wa-brand-pink {\n    --wa-color-brand-95: var(--wa-color-pink-95);\n    --wa-color-brand-90: var(--wa-color-pink-90);\n    --wa-color-brand-80: var(--wa-color-pink-80);\n    --wa-color-brand-70: var(--wa-color-pink-70);\n    --wa-color-brand-60: var(--wa-color-pink-60);\n    --wa-color-brand-50: var(--wa-color-pink-50);\n    --wa-color-brand-40: var(--wa-color-pink-40);\n    --wa-color-brand-30: var(--wa-color-pink-30);\n    --wa-color-brand-20: var(--wa-color-pink-20);\n    --wa-color-brand-10: var(--wa-color-pink-10);\n    --wa-color-brand-05: var(--wa-color-pink-05);\n    --wa-color-brand: var(--wa-color-pink);\n    --wa-color-brand-on: var(--wa-color-pink-on);\n  }\n\n  .wa-brand-gray {\n    --wa-color-brand-95: var(--wa-color-gray-95);\n    --wa-color-brand-90: var(--wa-color-gray-90);\n    --wa-color-brand-80: var(--wa-color-gray-80);\n    --wa-color-brand-70: var(--wa-color-gray-70);\n    --wa-color-brand-60: var(--wa-color-gray-60);\n    --wa-color-brand-50: var(--wa-color-gray-50);\n    --wa-color-brand-40: var(--wa-color-gray-40);\n    --wa-color-brand-30: var(--wa-color-gray-30);\n    --wa-color-brand-20: var(--wa-color-gray-20);\n    --wa-color-brand-10: var(--wa-color-gray-10);\n    --wa-color-brand-05: var(--wa-color-gray-05);\n    --wa-color-brand: var(--wa-color-gray);\n    --wa-color-brand-on: var(--wa-color-gray-on);\n  }\n}\n\n@layer wa-color-variant {\n  :where(:root), /* default */\n  .wa-neutral-gray {\n    --wa-color-neutral-95: var(--wa-color-gray-95);\n    --wa-color-neutral-90: var(--wa-color-gray-90);\n    --wa-color-neutral-80: var(--wa-color-gray-80);\n    --wa-color-neutral-70: var(--wa-color-gray-70);\n    --wa-color-neutral-60: var(--wa-color-gray-60);\n    --wa-color-neutral-50: var(--wa-color-gray-50);\n    --wa-color-neutral-40: var(--wa-color-gray-40);\n    --wa-color-neutral-30: var(--wa-color-gray-30);\n    --wa-color-neutral-20: var(--wa-color-gray-20);\n    --wa-color-neutral-10: var(--wa-color-gray-10);\n    --wa-color-neutral-05: var(--wa-color-gray-05);\n    --wa-color-neutral: var(--wa-color-gray);\n    --wa-color-neutral-on: var(--wa-color-gray-on);\n  }\n\n  .wa-neutral-red {\n    --wa-color-neutral-95: var(--wa-color-red-95);\n    --wa-color-neutral-90: var(--wa-color-red-90);\n    --wa-color-neutral-80: var(--wa-color-red-80);\n    --wa-color-neutral-70: var(--wa-color-red-70);\n    --wa-color-neutral-60: var(--wa-color-red-60);\n    --wa-color-neutral-50: var(--wa-color-red-50);\n    --wa-color-neutral-40: var(--wa-color-red-40);\n    --wa-color-neutral-30: var(--wa-color-red-30);\n    --wa-color-neutral-20: var(--wa-color-red-20);\n    --wa-color-neutral-10: var(--wa-color-red-10);\n    --wa-color-neutral-05: var(--wa-color-red-05);\n    --wa-color-neutral: var(--wa-color-red);\n    --wa-color-neutral-on: var(--wa-color-red-on);\n  }\n\n  .wa-neutral-orange {\n    --wa-color-neutral-95: var(--wa-color-orange-95);\n    --wa-color-neutral-90: var(--wa-color-orange-90);\n    --wa-color-neutral-80: var(--wa-color-orange-80);\n    --wa-color-neutral-70: var(--wa-color-orange-70);\n    --wa-color-neutral-60: var(--wa-color-orange-60);\n    --wa-color-neutral-50: var(--wa-color-orange-50);\n    --wa-color-neutral-40: var(--wa-color-orange-40);\n    --wa-color-neutral-30: var(--wa-color-orange-30);\n    --wa-color-neutral-20: var(--wa-color-orange-20);\n    --wa-color-neutral-10: var(--wa-color-orange-10);\n    --wa-color-neutral-05: var(--wa-color-orange-05);\n    --wa-color-neutral: var(--wa-color-orange);\n    --wa-color-neutral-on: var(--wa-color-orange-on);\n  }\n\n  .wa-neutral-yellow {\n    --wa-color-neutral-95: var(--wa-color-yellow-95);\n    --wa-color-neutral-90: var(--wa-color-yellow-90);\n    --wa-color-neutral-80: var(--wa-color-yellow-80);\n    --wa-color-neutral-70: var(--wa-color-yellow-70);\n    --wa-color-neutral-60: var(--wa-color-yellow-60);\n    --wa-color-neutral-50: var(--wa-color-yellow-50);\n    --wa-color-neutral-40: var(--wa-color-yellow-40);\n    --wa-color-neutral-30: var(--wa-color-yellow-30);\n    --wa-color-neutral-20: var(--wa-color-yellow-20);\n    --wa-color-neutral-10: var(--wa-color-yellow-10);\n    --wa-color-neutral-05: var(--wa-color-yellow-05);\n    --wa-color-neutral: var(--wa-color-yellow);\n    --wa-color-neutral-on: var(--wa-color-yellow-on);\n  }\n\n  .wa-neutral-green {\n    --wa-color-neutral-95: var(--wa-color-green-95);\n    --wa-color-neutral-90: var(--wa-color-green-90);\n    --wa-color-neutral-80: var(--wa-color-green-80);\n    --wa-color-neutral-70: var(--wa-color-green-70);\n    --wa-color-neutral-60: var(--wa-color-green-60);\n    --wa-color-neutral-50: var(--wa-color-green-50);\n    --wa-color-neutral-40: var(--wa-color-green-40);\n    --wa-color-neutral-30: var(--wa-color-green-30);\n    --wa-color-neutral-20: var(--wa-color-green-20);\n    --wa-color-neutral-10: var(--wa-color-green-10);\n    --wa-color-neutral-05: var(--wa-color-green-05);\n    --wa-color-neutral: var(--wa-color-green);\n    --wa-color-neutral-on: var(--wa-color-green-on);\n  }\n\n  .wa-neutral-cyan {\n    --wa-color-neutral-95: var(--wa-color-cyan-95);\n    --wa-color-neutral-90: var(--wa-color-cyan-90);\n    --wa-color-neutral-80: var(--wa-color-cyan-80);\n    --wa-color-neutral-70: var(--wa-color-cyan-70);\n    --wa-color-neutral-60: var(--wa-color-cyan-60);\n    --wa-color-neutral-50: var(--wa-color-cyan-50);\n    --wa-color-neutral-40: var(--wa-color-cyan-40);\n    --wa-color-neutral-30: var(--wa-color-cyan-30);\n    --wa-color-neutral-20: var(--wa-color-cyan-20);\n    --wa-color-neutral-10: var(--wa-color-cyan-10);\n    --wa-color-neutral-05: var(--wa-color-cyan-05);\n    --wa-color-neutral: var(--wa-color-cyan);\n    --wa-color-neutral-on: var(--wa-color-cyan-on);\n  }\n\n  .wa-neutral-blue {\n    --wa-color-neutral-95: var(--wa-color-blue-95);\n    --wa-color-neutral-90: var(--wa-color-blue-90);\n    --wa-color-neutral-80: var(--wa-color-blue-80);\n    --wa-color-neutral-70: var(--wa-color-blue-70);\n    --wa-color-neutral-60: var(--wa-color-blue-60);\n    --wa-color-neutral-50: var(--wa-color-blue-50);\n    --wa-color-neutral-40: var(--wa-color-blue-40);\n    --wa-color-neutral-30: var(--wa-color-blue-30);\n    --wa-color-neutral-20: var(--wa-color-blue-20);\n    --wa-color-neutral-10: var(--wa-color-blue-10);\n    --wa-color-neutral-05: var(--wa-color-blue-05);\n    --wa-color-neutral: var(--wa-color-blue);\n    --wa-color-neutral-on: var(--wa-color-blue-on);\n  }\n\n  .wa-neutral-indigo {\n    --wa-color-neutral-95: var(--wa-color-indigo-95);\n    --wa-color-neutral-90: var(--wa-color-indigo-90);\n    --wa-color-neutral-80: var(--wa-color-indigo-80);\n    --wa-color-neutral-70: var(--wa-color-indigo-70);\n    --wa-color-neutral-60: var(--wa-color-indigo-60);\n    --wa-color-neutral-50: var(--wa-color-indigo-50);\n    --wa-color-neutral-40: var(--wa-color-indigo-40);\n    --wa-color-neutral-30: var(--wa-color-indigo-30);\n    --wa-color-neutral-20: var(--wa-color-indigo-20);\n    --wa-color-neutral-10: var(--wa-color-indigo-10);\n    --wa-color-neutral-05: var(--wa-color-indigo-05);\n    --wa-color-neutral: var(--wa-color-indigo);\n    --wa-color-neutral-on: var(--wa-color-indigo-on);\n  }\n\n  .wa-neutral-purple {\n    --wa-color-neutral-95: var(--wa-color-purple-95);\n    --wa-color-neutral-90: var(--wa-color-purple-90);\n    --wa-color-neutral-80: var(--wa-color-purple-80);\n    --wa-color-neutral-70: var(--wa-color-purple-70);\n    --wa-color-neutral-60: var(--wa-color-purple-60);\n    --wa-color-neutral-50: var(--wa-color-purple-50);\n    --wa-color-neutral-40: var(--wa-color-purple-40);\n    --wa-color-neutral-30: var(--wa-color-purple-30);\n    --wa-color-neutral-20: var(--wa-color-purple-20);\n    --wa-color-neutral-10: var(--wa-color-purple-10);\n    --wa-color-neutral-05: var(--wa-color-purple-05);\n    --wa-color-neutral: var(--wa-color-purple);\n    --wa-color-neutral-on: var(--wa-color-purple-on);\n  }\n\n  .wa-neutral-pink {\n    --wa-color-neutral-95: var(--wa-color-pink-95);\n    --wa-color-neutral-90: var(--wa-color-pink-90);\n    --wa-color-neutral-80: var(--wa-color-pink-80);\n    --wa-color-neutral-70: var(--wa-color-pink-70);\n    --wa-color-neutral-60: var(--wa-color-pink-60);\n    --wa-color-neutral-50: var(--wa-color-pink-50);\n    --wa-color-neutral-40: var(--wa-color-pink-40);\n    --wa-color-neutral-30: var(--wa-color-pink-30);\n    --wa-color-neutral-20: var(--wa-color-pink-20);\n    --wa-color-neutral-10: var(--wa-color-pink-10);\n    --wa-color-neutral-05: var(--wa-color-pink-05);\n    --wa-color-neutral: var(--wa-color-pink);\n    --wa-color-neutral-on: var(--wa-color-pink-on);\n  }\n}\n\n@layer wa-color-variant {\n  :where(:root), /* default */\n  .wa-success-green {\n    --wa-color-success-95: var(--wa-color-green-95);\n    --wa-color-success-90: var(--wa-color-green-90);\n    --wa-color-success-80: var(--wa-color-green-80);\n    --wa-color-success-70: var(--wa-color-green-70);\n    --wa-color-success-60: var(--wa-color-green-60);\n    --wa-color-success-50: var(--wa-color-green-50);\n    --wa-color-success-40: var(--wa-color-green-40);\n    --wa-color-success-30: var(--wa-color-green-30);\n    --wa-color-success-20: var(--wa-color-green-20);\n    --wa-color-success-10: var(--wa-color-green-10);\n    --wa-color-success-05: var(--wa-color-green-05);\n    --wa-color-success: var(--wa-color-green);\n    --wa-color-success-on: var(--wa-color-green-on);\n  }\n\n  .wa-success-red {\n    --wa-color-success-95: var(--wa-color-red-95);\n    --wa-color-success-90: var(--wa-color-red-90);\n    --wa-color-success-80: var(--wa-color-red-80);\n    --wa-color-success-70: var(--wa-color-red-70);\n    --wa-color-success-60: var(--wa-color-red-60);\n    --wa-color-success-50: var(--wa-color-red-50);\n    --wa-color-success-40: var(--wa-color-red-40);\n    --wa-color-success-30: var(--wa-color-red-30);\n    --wa-color-success-20: var(--wa-color-red-20);\n    --wa-color-success-10: var(--wa-color-red-10);\n    --wa-color-success-05: var(--wa-color-red-05);\n    --wa-color-success: var(--wa-color-red);\n    --wa-color-success-on: var(--wa-color-red-on);\n  }\n\n  .wa-success-orange {\n    --wa-color-success-95: var(--wa-color-orange-95);\n    --wa-color-success-90: var(--wa-color-orange-90);\n    --wa-color-success-80: var(--wa-color-orange-80);\n    --wa-color-success-70: var(--wa-color-orange-70);\n    --wa-color-success-60: var(--wa-color-orange-60);\n    --wa-color-success-50: var(--wa-color-orange-50);\n    --wa-color-success-40: var(--wa-color-orange-40);\n    --wa-color-success-30: var(--wa-color-orange-30);\n    --wa-color-success-20: var(--wa-color-orange-20);\n    --wa-color-success-10: var(--wa-color-orange-10);\n    --wa-color-success-05: var(--wa-color-orange-05);\n    --wa-color-success: var(--wa-color-orange);\n    --wa-color-success-on: var(--wa-color-orange-on);\n  }\n\n  .wa-success-yellow {\n    --wa-color-success-95: var(--wa-color-yellow-95);\n    --wa-color-success-90: var(--wa-color-yellow-90);\n    --wa-color-success-80: var(--wa-color-yellow-80);\n    --wa-color-success-70: var(--wa-color-yellow-70);\n    --wa-color-success-60: var(--wa-color-yellow-60);\n    --wa-color-success-50: var(--wa-color-yellow-50);\n    --wa-color-success-40: var(--wa-color-yellow-40);\n    --wa-color-success-30: var(--wa-color-yellow-30);\n    --wa-color-success-20: var(--wa-color-yellow-20);\n    --wa-color-success-10: var(--wa-color-yellow-10);\n    --wa-color-success-05: var(--wa-color-yellow-05);\n    --wa-color-success: var(--wa-color-yellow);\n    --wa-color-success-on: var(--wa-color-yellow-on);\n  }\n\n  .wa-success-cyan {\n    --wa-color-success-95: var(--wa-color-cyan-95);\n    --wa-color-success-90: var(--wa-color-cyan-90);\n    --wa-color-success-80: var(--wa-color-cyan-80);\n    --wa-color-success-70: var(--wa-color-cyan-70);\n    --wa-color-success-60: var(--wa-color-cyan-60);\n    --wa-color-success-50: var(--wa-color-cyan-50);\n    --wa-color-success-40: var(--wa-color-cyan-40);\n    --wa-color-success-30: var(--wa-color-cyan-30);\n    --wa-color-success-20: var(--wa-color-cyan-20);\n    --wa-color-success-10: var(--wa-color-cyan-10);\n    --wa-color-success-05: var(--wa-color-cyan-05);\n    --wa-color-success: var(--wa-color-cyan);\n    --wa-color-success-on: var(--wa-color-cyan-on);\n  }\n\n  .wa-success-blue {\n    --wa-color-success-95: var(--wa-color-blue-95);\n    --wa-color-success-90: var(--wa-color-blue-90);\n    --wa-color-success-80: var(--wa-color-blue-80);\n    --wa-color-success-70: var(--wa-color-blue-70);\n    --wa-color-success-60: var(--wa-color-blue-60);\n    --wa-color-success-50: var(--wa-color-blue-50);\n    --wa-color-success-40: var(--wa-color-blue-40);\n    --wa-color-success-30: var(--wa-color-blue-30);\n    --wa-color-success-20: var(--wa-color-blue-20);\n    --wa-color-success-10: var(--wa-color-blue-10);\n    --wa-color-success-05: var(--wa-color-blue-05);\n    --wa-color-success: var(--wa-color-blue);\n    --wa-color-success-on: var(--wa-color-blue-on);\n  }\n\n  .wa-success-indigo {\n    --wa-color-success-95: var(--wa-color-indigo-95);\n    --wa-color-success-90: var(--wa-color-indigo-90);\n    --wa-color-success-80: var(--wa-color-indigo-80);\n    --wa-color-success-70: var(--wa-color-indigo-70);\n    --wa-color-success-60: var(--wa-color-indigo-60);\n    --wa-color-success-50: var(--wa-color-indigo-50);\n    --wa-color-success-40: var(--wa-color-indigo-40);\n    --wa-color-success-30: var(--wa-color-indigo-30);\n    --wa-color-success-20: var(--wa-color-indigo-20);\n    --wa-color-success-10: var(--wa-color-indigo-10);\n    --wa-color-success-05: var(--wa-color-indigo-05);\n    --wa-color-success: var(--wa-color-indigo);\n    --wa-color-success-on: var(--wa-color-indigo-on);\n  }\n\n  .wa-success-purple {\n    --wa-color-success-95: var(--wa-color-purple-95);\n    --wa-color-success-90: var(--wa-color-purple-90);\n    --wa-color-success-80: var(--wa-color-purple-80);\n    --wa-color-success-70: var(--wa-color-purple-70);\n    --wa-color-success-60: var(--wa-color-purple-60);\n    --wa-color-success-50: var(--wa-color-purple-50);\n    --wa-color-success-40: var(--wa-color-purple-40);\n    --wa-color-success-30: var(--wa-color-purple-30);\n    --wa-color-success-20: var(--wa-color-purple-20);\n    --wa-color-success-10: var(--wa-color-purple-10);\n    --wa-color-success-05: var(--wa-color-purple-05);\n    --wa-color-success: var(--wa-color-purple);\n    --wa-color-success-on: var(--wa-color-purple-on);\n  }\n\n  .wa-success-pink {\n    --wa-color-success-95: var(--wa-color-pink-95);\n    --wa-color-success-90: var(--wa-color-pink-90);\n    --wa-color-success-80: var(--wa-color-pink-80);\n    --wa-color-success-70: var(--wa-color-pink-70);\n    --wa-color-success-60: var(--wa-color-pink-60);\n    --wa-color-success-50: var(--wa-color-pink-50);\n    --wa-color-success-40: var(--wa-color-pink-40);\n    --wa-color-success-30: var(--wa-color-pink-30);\n    --wa-color-success-20: var(--wa-color-pink-20);\n    --wa-color-success-10: var(--wa-color-pink-10);\n    --wa-color-success-05: var(--wa-color-pink-05);\n    --wa-color-success: var(--wa-color-pink);\n    --wa-color-success-on: var(--wa-color-pink-on);\n  }\n\n  .wa-success-gray {\n    --wa-color-success-95: var(--wa-color-gray-95);\n    --wa-color-success-90: var(--wa-color-gray-90);\n    --wa-color-success-80: var(--wa-color-gray-80);\n    --wa-color-success-70: var(--wa-color-gray-70);\n    --wa-color-success-60: var(--wa-color-gray-60);\n    --wa-color-success-50: var(--wa-color-gray-50);\n    --wa-color-success-40: var(--wa-color-gray-40);\n    --wa-color-success-30: var(--wa-color-gray-30);\n    --wa-color-success-20: var(--wa-color-gray-20);\n    --wa-color-success-10: var(--wa-color-gray-10);\n    --wa-color-success-05: var(--wa-color-gray-05);\n    --wa-color-success: var(--wa-color-gray);\n    --wa-color-success-on: var(--wa-color-gray-on);\n  }\n}\n\n@layer wa-color-variant {\n  :where(:root), /* default */\n  .wa-warning-yellow {\n    --wa-color-warning-95: var(--wa-color-yellow-95);\n    --wa-color-warning-90: var(--wa-color-yellow-90);\n    --wa-color-warning-80: var(--wa-color-yellow-80);\n    --wa-color-warning-70: var(--wa-color-yellow-70);\n    --wa-color-warning-60: var(--wa-color-yellow-60);\n    --wa-color-warning-50: var(--wa-color-yellow-50);\n    --wa-color-warning-40: var(--wa-color-yellow-40);\n    --wa-color-warning-30: var(--wa-color-yellow-30);\n    --wa-color-warning-20: var(--wa-color-yellow-20);\n    --wa-color-warning-10: var(--wa-color-yellow-10);\n    --wa-color-warning-05: var(--wa-color-yellow-05);\n    --wa-color-warning: var(--wa-color-yellow);\n    --wa-color-warning-on: var(--wa-color-yellow-on);\n  }\n\n  .wa-warning-red {\n    --wa-color-warning-95: var(--wa-color-red-95);\n    --wa-color-warning-90: var(--wa-color-red-90);\n    --wa-color-warning-80: var(--wa-color-red-80);\n    --wa-color-warning-70: var(--wa-color-red-70);\n    --wa-color-warning-60: var(--wa-color-red-60);\n    --wa-color-warning-50: var(--wa-color-red-50);\n    --wa-color-warning-40: var(--wa-color-red-40);\n    --wa-color-warning-30: var(--wa-color-red-30);\n    --wa-color-warning-20: var(--wa-color-red-20);\n    --wa-color-warning-10: var(--wa-color-red-10);\n    --wa-color-warning-05: var(--wa-color-red-05);\n    --wa-color-warning: var(--wa-color-red);\n    --wa-color-warning-on: var(--wa-color-red-on);\n  }\n\n  .wa-warning-orange {\n    --wa-color-warning-95: var(--wa-color-orange-95);\n    --wa-color-warning-90: var(--wa-color-orange-90);\n    --wa-color-warning-80: var(--wa-color-orange-80);\n    --wa-color-warning-70: var(--wa-color-orange-70);\n    --wa-color-warning-60: var(--wa-color-orange-60);\n    --wa-color-warning-50: var(--wa-color-orange-50);\n    --wa-color-warning-40: var(--wa-color-orange-40);\n    --wa-color-warning-30: var(--wa-color-orange-30);\n    --wa-color-warning-20: var(--wa-color-orange-20);\n    --wa-color-warning-10: var(--wa-color-orange-10);\n    --wa-color-warning-05: var(--wa-color-orange-05);\n    --wa-color-warning: var(--wa-color-orange);\n    --wa-color-warning-on: var(--wa-color-orange-on);\n  }\n\n  .wa-warning-green {\n    --wa-color-warning-95: var(--wa-color-green-95);\n    --wa-color-warning-90: var(--wa-color-green-90);\n    --wa-color-warning-80: var(--wa-color-green-80);\n    --wa-color-warning-70: var(--wa-color-green-70);\n    --wa-color-warning-60: var(--wa-color-green-60);\n    --wa-color-warning-50: var(--wa-color-green-50);\n    --wa-color-warning-40: var(--wa-color-green-40);\n    --wa-color-warning-30: var(--wa-color-green-30);\n    --wa-color-warning-20: var(--wa-color-green-20);\n    --wa-color-warning-10: var(--wa-color-green-10);\n    --wa-color-warning-05: var(--wa-color-green-05);\n    --wa-color-warning: var(--wa-color-green);\n    --wa-color-warning-on: var(--wa-color-green-on);\n  }\n\n  .wa-warning-cyan {\n    --wa-color-warning-95: var(--wa-color-cyan-95);\n    --wa-color-warning-90: var(--wa-color-cyan-90);\n    --wa-color-warning-80: var(--wa-color-cyan-80);\n    --wa-color-warning-70: var(--wa-color-cyan-70);\n    --wa-color-warning-60: var(--wa-color-cyan-60);\n    --wa-color-warning-50: var(--wa-color-cyan-50);\n    --wa-color-warning-40: var(--wa-color-cyan-40);\n    --wa-color-warning-30: var(--wa-color-cyan-30);\n    --wa-color-warning-20: var(--wa-color-cyan-20);\n    --wa-color-warning-10: var(--wa-color-cyan-10);\n    --wa-color-warning-05: var(--wa-color-cyan-05);\n    --wa-color-warning: var(--wa-color-cyan);\n    --wa-color-warning-on: var(--wa-color-cyan-on);\n  }\n\n  .wa-warning-blue {\n    --wa-color-warning-95: var(--wa-color-blue-95);\n    --wa-color-warning-90: var(--wa-color-blue-90);\n    --wa-color-warning-80: var(--wa-color-blue-80);\n    --wa-color-warning-70: var(--wa-color-blue-70);\n    --wa-color-warning-60: var(--wa-color-blue-60);\n    --wa-color-warning-50: var(--wa-color-blue-50);\n    --wa-color-warning-40: var(--wa-color-blue-40);\n    --wa-color-warning-30: var(--wa-color-blue-30);\n    --wa-color-warning-20: var(--wa-color-blue-20);\n    --wa-color-warning-10: var(--wa-color-blue-10);\n    --wa-color-warning-05: var(--wa-color-blue-05);\n    --wa-color-warning: var(--wa-color-blue);\n    --wa-color-warning-on: var(--wa-color-blue-on);\n  }\n\n  .wa-warning-indigo {\n    --wa-color-warning-95: var(--wa-color-indigo-95);\n    --wa-color-warning-90: var(--wa-color-indigo-90);\n    --wa-color-warning-80: var(--wa-color-indigo-80);\n    --wa-color-warning-70: var(--wa-color-indigo-70);\n    --wa-color-warning-60: var(--wa-color-indigo-60);\n    --wa-color-warning-50: var(--wa-color-indigo-50);\n    --wa-color-warning-40: var(--wa-color-indigo-40);\n    --wa-color-warning-30: var(--wa-color-indigo-30);\n    --wa-color-warning-20: var(--wa-color-indigo-20);\n    --wa-color-warning-10: var(--wa-color-indigo-10);\n    --wa-color-warning-05: var(--wa-color-indigo-05);\n    --wa-color-warning: var(--wa-color-indigo);\n    --wa-color-warning-on: var(--wa-color-indigo-on);\n  }\n\n  .wa-warning-purple {\n    --wa-color-warning-95: var(--wa-color-purple-95);\n    --wa-color-warning-90: var(--wa-color-purple-90);\n    --wa-color-warning-80: var(--wa-color-purple-80);\n    --wa-color-warning-70: var(--wa-color-purple-70);\n    --wa-color-warning-60: var(--wa-color-purple-60);\n    --wa-color-warning-50: var(--wa-color-purple-50);\n    --wa-color-warning-40: var(--wa-color-purple-40);\n    --wa-color-warning-30: var(--wa-color-purple-30);\n    --wa-color-warning-20: var(--wa-color-purple-20);\n    --wa-color-warning-10: var(--wa-color-purple-10);\n    --wa-color-warning-05: var(--wa-color-purple-05);\n    --wa-color-warning: var(--wa-color-purple);\n    --wa-color-warning-on: var(--wa-color-purple-on);\n  }\n\n  .wa-warning-pink {\n    --wa-color-warning-95: var(--wa-color-pink-95);\n    --wa-color-warning-90: var(--wa-color-pink-90);\n    --wa-color-warning-80: var(--wa-color-pink-80);\n    --wa-color-warning-70: var(--wa-color-pink-70);\n    --wa-color-warning-60: var(--wa-color-pink-60);\n    --wa-color-warning-50: var(--wa-color-pink-50);\n    --wa-color-warning-40: var(--wa-color-pink-40);\n    --wa-color-warning-30: var(--wa-color-pink-30);\n    --wa-color-warning-20: var(--wa-color-pink-20);\n    --wa-color-warning-10: var(--wa-color-pink-10);\n    --wa-color-warning-05: var(--wa-color-pink-05);\n    --wa-color-warning: var(--wa-color-pink);\n    --wa-color-warning-on: var(--wa-color-pink-on);\n  }\n\n  .wa-warning-gray {\n    --wa-color-warning-95: var(--wa-color-gray-95);\n    --wa-color-warning-90: var(--wa-color-gray-90);\n    --wa-color-warning-80: var(--wa-color-gray-80);\n    --wa-color-warning-70: var(--wa-color-gray-70);\n    --wa-color-warning-60: var(--wa-color-gray-60);\n    --wa-color-warning-50: var(--wa-color-gray-50);\n    --wa-color-warning-40: var(--wa-color-gray-40);\n    --wa-color-warning-30: var(--wa-color-gray-30);\n    --wa-color-warning-20: var(--wa-color-gray-20);\n    --wa-color-warning-10: var(--wa-color-gray-10);\n    --wa-color-warning-05: var(--wa-color-gray-05);\n    --wa-color-warning: var(--wa-color-gray);\n    --wa-color-warning-on: var(--wa-color-gray-on);\n  }\n}\n\n@layer wa-color-variant {\n  :where(:root), /* default */\n  .wa-danger-red {\n    --wa-color-danger-95: var(--wa-color-red-95);\n    --wa-color-danger-90: var(--wa-color-red-90);\n    --wa-color-danger-80: var(--wa-color-red-80);\n    --wa-color-danger-70: var(--wa-color-red-70);\n    --wa-color-danger-60: var(--wa-color-red-60);\n    --wa-color-danger-50: var(--wa-color-red-50);\n    --wa-color-danger-40: var(--wa-color-red-40);\n    --wa-color-danger-30: var(--wa-color-red-30);\n    --wa-color-danger-20: var(--wa-color-red-20);\n    --wa-color-danger-10: var(--wa-color-red-10);\n    --wa-color-danger-05: var(--wa-color-red-05);\n    --wa-color-danger: var(--wa-color-red);\n    --wa-color-danger-on: var(--wa-color-red-on);\n  }\n\n  .wa-danger-orange {\n    --wa-color-danger-95: var(--wa-color-orange-95);\n    --wa-color-danger-90: var(--wa-color-orange-90);\n    --wa-color-danger-80: var(--wa-color-orange-80);\n    --wa-color-danger-70: var(--wa-color-orange-70);\n    --wa-color-danger-60: var(--wa-color-orange-60);\n    --wa-color-danger-50: var(--wa-color-orange-50);\n    --wa-color-danger-40: var(--wa-color-orange-40);\n    --wa-color-danger-30: var(--wa-color-orange-30);\n    --wa-color-danger-20: var(--wa-color-orange-20);\n    --wa-color-danger-10: var(--wa-color-orange-10);\n    --wa-color-danger-05: var(--wa-color-orange-05);\n    --wa-color-danger: var(--wa-color-orange);\n    --wa-color-danger-on: var(--wa-color-orange-on);\n  }\n\n  .wa-danger-yellow {\n    --wa-color-danger-95: var(--wa-color-yellow-95);\n    --wa-color-danger-90: var(--wa-color-yellow-90);\n    --wa-color-danger-80: var(--wa-color-yellow-80);\n    --wa-color-danger-70: var(--wa-color-yellow-70);\n    --wa-color-danger-60: var(--wa-color-yellow-60);\n    --wa-color-danger-50: var(--wa-color-yellow-50);\n    --wa-color-danger-40: var(--wa-color-yellow-40);\n    --wa-color-danger-30: var(--wa-color-yellow-30);\n    --wa-color-danger-20: var(--wa-color-yellow-20);\n    --wa-color-danger-10: var(--wa-color-yellow-10);\n    --wa-color-danger-05: var(--wa-color-yellow-05);\n    --wa-color-danger: var(--wa-color-yellow);\n    --wa-color-danger-on: var(--wa-color-yellow-on);\n  }\n\n  .wa-danger-green {\n    --wa-color-danger-95: var(--wa-color-green-95);\n    --wa-color-danger-90: var(--wa-color-green-90);\n    --wa-color-danger-80: var(--wa-color-green-80);\n    --wa-color-danger-70: var(--wa-color-green-70);\n    --wa-color-danger-60: var(--wa-color-green-60);\n    --wa-color-danger-50: var(--wa-color-green-50);\n    --wa-color-danger-40: var(--wa-color-green-40);\n    --wa-color-danger-30: var(--wa-color-green-30);\n    --wa-color-danger-20: var(--wa-color-green-20);\n    --wa-color-danger-10: var(--wa-color-green-10);\n    --wa-color-danger-05: var(--wa-color-green-05);\n    --wa-color-danger: var(--wa-color-green);\n    --wa-color-danger-on: var(--wa-color-green-on);\n  }\n\n  .wa-danger-cyan {\n    --wa-color-danger-95: var(--wa-color-cyan-95);\n    --wa-color-danger-90: var(--wa-color-cyan-90);\n    --wa-color-danger-80: var(--wa-color-cyan-80);\n    --wa-color-danger-70: var(--wa-color-cyan-70);\n    --wa-color-danger-60: var(--wa-color-cyan-60);\n    --wa-color-danger-50: var(--wa-color-cyan-50);\n    --wa-color-danger-40: var(--wa-color-cyan-40);\n    --wa-color-danger-30: var(--wa-color-cyan-30);\n    --wa-color-danger-20: var(--wa-color-cyan-20);\n    --wa-color-danger-10: var(--wa-color-cyan-10);\n    --wa-color-danger-05: var(--wa-color-cyan-05);\n    --wa-color-danger: var(--wa-color-cyan);\n    --wa-color-danger-on: var(--wa-color-cyan-on);\n  }\n\n  .wa-danger-blue {\n    --wa-color-danger-95: var(--wa-color-blue-95);\n    --wa-color-danger-90: var(--wa-color-blue-90);\n    --wa-color-danger-80: var(--wa-color-blue-80);\n    --wa-color-danger-70: var(--wa-color-blue-70);\n    --wa-color-danger-60: var(--wa-color-blue-60);\n    --wa-color-danger-50: var(--wa-color-blue-50);\n    --wa-color-danger-40: var(--wa-color-blue-40);\n    --wa-color-danger-30: var(--wa-color-blue-30);\n    --wa-color-danger-20: var(--wa-color-blue-20);\n    --wa-color-danger-10: var(--wa-color-blue-10);\n    --wa-color-danger-05: var(--wa-color-blue-05);\n    --wa-color-danger: var(--wa-color-blue);\n    --wa-color-danger-on: var(--wa-color-blue-on);\n  }\n\n  .wa-danger-indigo {\n    --wa-color-danger-95: var(--wa-color-indigo-95);\n    --wa-color-danger-90: var(--wa-color-indigo-90);\n    --wa-color-danger-80: var(--wa-color-indigo-80);\n    --wa-color-danger-70: var(--wa-color-indigo-70);\n    --wa-color-danger-60: var(--wa-color-indigo-60);\n    --wa-color-danger-50: var(--wa-color-indigo-50);\n    --wa-color-danger-40: var(--wa-color-indigo-40);\n    --wa-color-danger-30: var(--wa-color-indigo-30);\n    --wa-color-danger-20: var(--wa-color-indigo-20);\n    --wa-color-danger-10: var(--wa-color-indigo-10);\n    --wa-color-danger-05: var(--wa-color-indigo-05);\n    --wa-color-danger: var(--wa-color-indigo);\n    --wa-color-danger-on: var(--wa-color-indigo-on);\n  }\n\n  .wa-danger-purple {\n    --wa-color-danger-95: var(--wa-color-purple-95);\n    --wa-color-danger-90: var(--wa-color-purple-90);\n    --wa-color-danger-80: var(--wa-color-purple-80);\n    --wa-color-danger-70: var(--wa-color-purple-70);\n    --wa-color-danger-60: var(--wa-color-purple-60);\n    --wa-color-danger-50: var(--wa-color-purple-50);\n    --wa-color-danger-40: var(--wa-color-purple-40);\n    --wa-color-danger-30: var(--wa-color-purple-30);\n    --wa-color-danger-20: var(--wa-color-purple-20);\n    --wa-color-danger-10: var(--wa-color-purple-10);\n    --wa-color-danger-05: var(--wa-color-purple-05);\n    --wa-color-danger: var(--wa-color-purple);\n    --wa-color-danger-on: var(--wa-color-purple-on);\n  }\n\n  .wa-danger-pink {\n    --wa-color-danger-95: var(--wa-color-pink-95);\n    --wa-color-danger-90: var(--wa-color-pink-90);\n    --wa-color-danger-80: var(--wa-color-pink-80);\n    --wa-color-danger-70: var(--wa-color-pink-70);\n    --wa-color-danger-60: var(--wa-color-pink-60);\n    --wa-color-danger-50: var(--wa-color-pink-50);\n    --wa-color-danger-40: var(--wa-color-pink-40);\n    --wa-color-danger-30: var(--wa-color-pink-30);\n    --wa-color-danger-20: var(--wa-color-pink-20);\n    --wa-color-danger-10: var(--wa-color-pink-10);\n    --wa-color-danger-05: var(--wa-color-pink-05);\n    --wa-color-danger: var(--wa-color-pink);\n    --wa-color-danger-on: var(--wa-color-pink-on);\n  }\n\n  .wa-danger-gray {\n    --wa-color-danger-95: var(--wa-color-gray-95);\n    --wa-color-danger-90: var(--wa-color-gray-90);\n    --wa-color-danger-80: var(--wa-color-gray-80);\n    --wa-color-danger-70: var(--wa-color-gray-70);\n    --wa-color-danger-60: var(--wa-color-gray-60);\n    --wa-color-danger-50: var(--wa-color-gray-50);\n    --wa-color-danger-40: var(--wa-color-gray-40);\n    --wa-color-danger-30: var(--wa-color-gray-30);\n    --wa-color-danger-20: var(--wa-color-gray-20);\n    --wa-color-danger-10: var(--wa-color-gray-10);\n    --wa-color-danger-05: var(--wa-color-gray-05);\n    --wa-color-danger: var(--wa-color-gray);\n    --wa-color-danger-on: var(--wa-color-gray-on);\n  }\n}\n\n\n\n@layer wa-color-palette {\n  :where(:root),\n  .wa-palette-default {\n    --wa-color-red-95: #fff0ef /* oklch(96.667% 0.01632 22.08) */;\n    --wa-color-red-90: #ffdedc /* oklch(92.735% 0.03679 21.966) */;\n    --wa-color-red-80: #ffb8b6 /* oklch(84.803% 0.08289 20.771) */;\n    --wa-color-red-70: #fd8f90 /* oklch(76.801% 0.13322 20.052) */;\n    --wa-color-red-60: #f3676c /* oklch(68.914% 0.17256 20.646) */;\n    --wa-color-red-50: #dc3146 /* oklch(58.857% 0.20512 20.223) */;\n    --wa-color-red-40: #b30532 /* oklch(48.737% 0.19311 18.413) */;\n    --wa-color-red-30: #8a132c /* oklch(41.17% 0.1512 16.771) */;\n    --wa-color-red-20: #631323 /* oklch(33.297% 0.11208 14.847) */;\n    --wa-color-red-10: #3e0913 /* oklch(24.329% 0.08074 15.207) */;\n    --wa-color-red-05: #2a040b /* oklch(19.016% 0.06394 13.71) */;\n    --wa-color-red: var(--wa-color-red-50);\n    --wa-color-red-key: 50;\n\n    --wa-color-orange-95: #fff0e6 /* oklch(96.426% 0.02105 56.133) */;\n    --wa-color-orange-90: #ffdfca /* oklch(92.468% 0.04529 55.325) */;\n    --wa-color-orange-80: #ffbb94 /* oklch(84.588% 0.09454 50.876) */;\n    --wa-color-orange-70: #ff9266 /* oklch(76.744% 0.14429 42.309) */;\n    --wa-color-orange-60: #f46a45 /* oklch(68.848% 0.17805 35.951) */;\n    --wa-color-orange-50: #cd491c /* oklch(58.195% 0.17597 37.577) */;\n    --wa-color-orange-40: #9f3501 /* oklch(47.889% 0.14981 39.957) */;\n    --wa-color-orange-30: #802700 /* oklch(40.637% 0.1298 39.149) */;\n    --wa-color-orange-20: #601b00 /* oklch(33.123% 0.10587 39.117) */;\n    --wa-color-orange-10: #3c0d00 /* oklch(24.043% 0.07768 38.607) */;\n    --wa-color-orange-05: #280600 /* oklch(18.644% 0.0607 38.252) */;\n    --wa-color-orange: var(--wa-color-orange-60);\n    --wa-color-orange-key: 60;\n\n    --wa-color-yellow-95: #fef3cd /* oklch(96.322% 0.05069 93.748) */;\n    --wa-color-yellow-90: #ffe495 /* oklch(92.377% 0.10246 91.296) */;\n    --wa-color-yellow-80: #fac22b /* oklch(84.185% 0.16263 85.991) */;\n    --wa-color-yellow-70: #ef9d00 /* oklch(75.949% 0.16251 72.13) */;\n    --wa-color-yellow-60: #da7e00 /* oklch(67.883% 0.15587 62.246) */;\n    --wa-color-yellow-50: #b45f04 /* oklch(57.449% 0.13836 56.585) */;\n    --wa-color-yellow-40: #8c4602 /* oklch(47.319% 0.11666 54.663) */;\n    --wa-color-yellow-30: #6f3601 /* oklch(40.012% 0.09892 54.555) */;\n    --wa-color-yellow-20: #532600 /* oklch(32.518% 0.08157 53.927) */;\n    --wa-color-yellow-10: #331600 /* oklch(23.846% 0.05834 56.02) */;\n    --wa-color-yellow-05: #220c00 /* oklch(18.585% 0.04625 54.588) */;\n    --wa-color-yellow: var(--wa-color-yellow-80);\n    --wa-color-yellow-key: 80;\n\n    --wa-color-green-95: #e3f9e3 /* oklch(96.006% 0.03715 145.28) */;\n    --wa-color-green-90: #c2f2c1 /* oklch(91.494% 0.08233 144.35) */;\n    --wa-color-green-80: #93da98 /* oklch(82.445% 0.11601 146.11) */;\n    --wa-color-green-70: #5dc36f /* oklch(73.554% 0.15308 147.59) */;\n    --wa-color-green-60: #00ac49 /* oklch(64.982% 0.18414 148.83) */;\n    --wa-color-green-50: #00883c /* oklch(54.765% 0.15165 149.77) */;\n    --wa-color-green-40: #036730 /* oklch(45.004% 0.11963 151.06) */;\n    --wa-color-green-30: #0a5027 /* oklch(37.988% 0.09487 151.62) */;\n    --wa-color-green-20: #0a3a1d /* oklch(30.876% 0.07202 152.23) */;\n    --wa-color-green-10: #052310 /* oklch(22.767% 0.05128 152.45) */;\n    --wa-color-green-05: #031608 /* oklch(17.84% 0.03957 151.36) */;\n    --wa-color-green: var(--wa-color-green-60);\n    --wa-color-green-key: 60;\n\n    --wa-color-cyan-95: #e3f6fb /* oklch(96.063% 0.02111 215.26) */;\n    --wa-color-cyan-90: #c5ecf7 /* oklch(91.881% 0.04314 216.7) */;\n    --wa-color-cyan-80: #7fd6ec /* oklch(82.906% 0.08934 215.86) */;\n    --wa-color-cyan-70: #2fbedc /* oklch(74.18% 0.12169 215.86) */;\n    --wa-color-cyan-60: #00a3c0 /* oklch(65.939% 0.11738 216.42) */;\n    --wa-color-cyan-50: #078098 /* oklch(55.379% 0.09774 217.32) */;\n    --wa-color-cyan-40: #026274 /* oklch(45.735% 0.08074 216.18) */;\n    --wa-color-cyan-30: #014c5b /* oklch(38.419% 0.06817 216.88) */;\n    --wa-color-cyan-20: #003844 /* oklch(31.427% 0.05624 217.32) */;\n    --wa-color-cyan-10: #002129 /* oklch(22.851% 0.04085 217.17) */;\n    --wa-color-cyan-05: #00151b /* oklch(18.055% 0.03231 217.31) */;\n    --wa-color-cyan: var(--wa-color-cyan-70);\n    --wa-color-cyan-key: 70;\n\n    --wa-color-blue-95: #e8f3ff /* oklch(95.944% 0.01996 250.38) */;\n    --wa-color-blue-90: #d1e8ff /* oklch(92.121% 0.03985 248.26) */;\n    --wa-color-blue-80: #9fceff /* oklch(83.572% 0.08502 249.92) */;\n    --wa-color-blue-70: #6eb3ff /* oklch(75.256% 0.1308 252.03) */;\n    --wa-color-blue-60: #3e96ff /* oklch(67.196% 0.17661 254.97) */;\n    --wa-color-blue-50: #0071ec /* oklch(56.972% 0.20461 257.29) */;\n    --wa-color-blue-40: #0053c0 /* oklch(47.175% 0.1846 259.19) */;\n    --wa-color-blue-30: #003f9c /* oklch(39.805% 0.16217 259.98) */;\n    --wa-color-blue-20: #002d77 /* oklch(32.436% 0.1349 260.35) */;\n    --wa-color-blue-10: #001a4e /* oklch(23.965% 0.10161 260.68) */;\n    --wa-color-blue-05: #000f35 /* oklch(18.565% 0.07904 260.75) */;\n    --wa-color-blue: var(--wa-color-blue-50);\n    --wa-color-blue-key: 50;\n\n    --wa-color-indigo-95: #f0f2ff /* oklch(96.341% 0.0175 279.06) */;\n    --wa-color-indigo-90: #dfe5ff /* oklch(92.527% 0.0359 275.35) */;\n    --wa-color-indigo-80: #bcc7ff /* oklch(84.053% 0.07938 275.91) */;\n    --wa-color-indigo-70: #9da9ff /* oklch(75.941% 0.12411 276.95) */;\n    --wa-color-indigo-60: #808aff /* oklch(67.977% 0.17065 277.16) */;\n    --wa-color-indigo-50: #6163f2 /* oklch(57.967% 0.20943 277.04) */;\n    --wa-color-indigo-40: #4945cb /* oklch(48.145% 0.20042 277.08) */;\n    --wa-color-indigo-30: #3933a7 /* oklch(40.844% 0.17864 277.26) */;\n    --wa-color-indigo-20: #292381 /* oklch(33.362% 0.15096 277.21) */;\n    --wa-color-indigo-10: #181255 /* oklch(24.534% 0.11483 277.73) */;\n    --wa-color-indigo-05: #0d0a3a /* oklch(19.092% 0.08825 276.76) */;\n    --wa-color-indigo: var(--wa-color-indigo-50);\n    --wa-color-indigo-key: 50;\n\n    --wa-color-purple-95: #f7f0ff /* oklch(96.49% 0.02119 306.84) */;\n    --wa-color-purple-90: #eedfff /* oklch(92.531% 0.04569 306.6) */;\n    --wa-color-purple-80: #ddbdff /* oklch(84.781% 0.09615 306.52) */;\n    --wa-color-purple-70: #ca99ff /* oklch(76.728% 0.14961 305.27) */;\n    --wa-color-purple-60: #b678f5 /* oklch(68.906% 0.1844 304.96) */;\n    --wa-color-purple-50: #9951db /* oklch(58.603% 0.20465 304.87) */;\n    --wa-color-purple-40: #7936b3 /* oklch(48.641% 0.18949 304.79) */;\n    --wa-color-purple-30: #612692 /* oklch(41.23% 0.16836 304.92) */;\n    --wa-color-purple-20: #491870 /* oklch(33.663% 0.14258 305.12) */;\n    --wa-color-purple-10: #2d0b48 /* oklch(24.637% 0.10612 304.95) */;\n    --wa-color-purple-05: #1e0532 /* oklch(19.393% 0.08461 305.26) */;\n    --wa-color-purple: var(--wa-color-purple-50);\n    --wa-color-purple-key: 50;\n\n    --wa-color-pink-95: #feeff9 /* oklch(96.676% 0.02074 337.69) */;\n    --wa-color-pink-90: #feddf0 /* oklch(93.026% 0.04388 342.45) */;\n    --wa-color-pink-80: #fcb5d8 /* oklch(84.928% 0.09304 348.21) */;\n    --wa-color-pink-70: #f78dbf /* oklch(77.058% 0.14016 351.19) */;\n    --wa-color-pink-60: #e66ba3 /* oklch(69.067% 0.16347 353.69) */;\n    --wa-color-pink-50: #c84382 /* oklch(58.707% 0.17826 354.82) */;\n    --wa-color-pink-40: #9e2a6c /* oklch(48.603% 0.16439 350.08) */;\n    --wa-color-pink-30: #7d1e58 /* oklch(41.017% 0.14211 347.77) */;\n    --wa-color-pink-20: #5e1342 /* oklch(33.442% 0.11808 347.01) */;\n    --wa-color-pink-10: #3c0828 /* oklch(24.601% 0.08768 347.8) */;\n    --wa-color-pink-05: #28041a /* oklch(19.199% 0.06799 346.97) */;\n    --wa-color-pink: var(--wa-color-pink-50);\n    --wa-color-pink-key: 50;\n\n    --wa-color-gray-95: #f1f2f3 /* oklch(96.067% 0.00172 247.84) */;\n    --wa-color-gray-90: #e4e5e9 /* oklch(92.228% 0.0055 274.96) */;\n    --wa-color-gray-80: #c7c9d0 /* oklch(83.641% 0.00994 273.33) */;\n    --wa-color-gray-70: #abaeb9 /* oklch(75.183% 0.01604 273.78) */;\n    --wa-color-gray-60: #9194a2 /* oklch(66.863% 0.02088 276.18) */;\n    --wa-color-gray-50: #717584 /* oklch(56.418% 0.02359 273.77) */;\n    --wa-color-gray-40: #545868 /* oklch(46.281% 0.02644 274.26) */;\n    --wa-color-gray-30: #424554 /* oklch(39.355% 0.02564 276.27) */;\n    --wa-color-gray-20: #2f323f /* oklch(31.97% 0.02354 274.82) */;\n    --wa-color-gray-10: #1b1d26 /* oklch(23.277% 0.01762 275.14) */;\n    --wa-color-gray-05: #101219 /* oklch(18.342% 0.01472 272.42) */;\n    --wa-color-gray: var(--wa-color-gray-40);\n    --wa-color-gray-key: 40;\n  }\n}\n\n\n@layer wa-theme {\n  :where(:root),\n  .wa-theme-default,\n  .wa-light,\n  .wa-dark .wa-invert,\n  .wa-light .wa-theme-default,\n  .wa-dark .wa-theme-default.wa-invert,\n  .wa-dark .wa-theme-default .wa-invert {\n    /* #region Colors (Light) ~~~~~~~~~~~~~~~~~~~~~ */\n    color-scheme: light;\n    color: var(--wa-color-text-normal);\n\n    --wa-color-surface-raised: white;\n    --wa-color-surface-default: white;\n    --wa-color-surface-lowered: var(--wa-color-neutral-95);\n    --wa-color-surface-border: var(--wa-color-neutral-90);\n\n    --wa-color-text-normal: var(--wa-color-neutral-10);\n    --wa-color-text-quiet: var(--wa-color-neutral-40);\n    --wa-color-text-link: var(--wa-color-brand-40);\n\n    --wa-color-overlay-modal: color-mix(in oklab, var(--wa-color-neutral-05) 50%, transparent);\n    --wa-color-overlay-inline: color-mix(in oklab, var(--wa-color-neutral-80) 25%, transparent);\n\n    --wa-color-shadow: color-mix(\n      in oklab,\n      var(--wa-color-neutral-05) calc(var(--wa-shadow-blur-scale) * 4% + 8%),\n      transparent\n    );\n\n    --wa-color-focus: var(--wa-color-brand-60);\n\n    --wa-color-mix-hover: black 10%;\n    --wa-color-mix-active: black 20%;\n\n    --wa-color-brand-fill-quiet: var(--wa-color-brand-95);\n    --wa-color-brand-fill-normal: var(--wa-color-brand-90);\n    --wa-color-brand-fill-loud: var(--wa-color-brand-50);\n    --wa-color-brand-border-quiet: var(--wa-color-brand-90);\n    --wa-color-brand-border-normal: var(--wa-color-brand-80);\n    --wa-color-brand-border-loud: var(--wa-color-brand-60);\n    --wa-color-brand-on-quiet: var(--wa-color-brand-40);\n    --wa-color-brand-on-normal: var(--wa-color-brand-30);\n    --wa-color-brand-on-loud: white;\n\n    --wa-color-success-fill-quiet: var(--wa-color-success-95);\n    --wa-color-success-fill-normal: var(--wa-color-success-90);\n    --wa-color-success-fill-loud: var(--wa-color-success-50);\n    --wa-color-success-border-quiet: var(--wa-color-success-90);\n    --wa-color-success-border-normal: var(--wa-color-success-80);\n    --wa-color-success-border-loud: var(--wa-color-success-60);\n    --wa-color-success-on-quiet: var(--wa-color-success-40);\n    --wa-color-success-on-normal: var(--wa-color-success-30);\n    --wa-color-success-on-loud: white;\n\n    --wa-color-warning-fill-quiet: var(--wa-color-warning-95);\n    --wa-color-warning-fill-normal: var(--wa-color-warning-90);\n    --wa-color-warning-fill-loud: var(--wa-color-warning-50);\n    --wa-color-warning-border-quiet: var(--wa-color-warning-90);\n    --wa-color-warning-border-normal: var(--wa-color-warning-80);\n    --wa-color-warning-border-loud: var(--wa-color-warning-60);\n    --wa-color-warning-on-quiet: var(--wa-color-warning-40);\n    --wa-color-warning-on-normal: var(--wa-color-warning-30);\n    --wa-color-warning-on-loud: white;\n\n    --wa-color-danger-fill-quiet: var(--wa-color-danger-95);\n    --wa-color-danger-fill-normal: var(--wa-color-danger-90);\n    --wa-color-danger-fill-loud: var(--wa-color-danger-50);\n    --wa-color-danger-border-quiet: var(--wa-color-danger-90);\n    --wa-color-danger-border-normal: var(--wa-color-danger-80);\n    --wa-color-danger-border-loud: var(--wa-color-danger-60);\n    --wa-color-danger-on-quiet: var(--wa-color-danger-40);\n    --wa-color-danger-on-normal: var(--wa-color-danger-30);\n    --wa-color-danger-on-loud: white;\n\n    --wa-color-neutral-fill-quiet: var(--wa-color-neutral-95);\n    --wa-color-neutral-fill-normal: var(--wa-color-neutral-90);\n    --wa-color-neutral-fill-loud: var(--wa-color-neutral-20);\n    --wa-color-neutral-border-quiet: var(--wa-color-neutral-90);\n    --wa-color-neutral-border-normal: var(--wa-color-neutral-80);\n    --wa-color-neutral-border-loud: var(--wa-color-neutral-60);\n    --wa-color-neutral-on-quiet: var(--wa-color-neutral-40);\n    --wa-color-neutral-on-normal: var(--wa-color-neutral-30);\n    --wa-color-neutral-on-loud: white;\n    /* #endregion */\n  }\n\n  .wa-dark,\n  .wa-invert,\n  .wa-dark .wa-theme-default,\n  .wa-light .wa-theme-default.wa-invert,\n  .wa-light .wa-theme-default .wa-invert {\n    /* #region Colors (Dark) ~~~~~~~~~~~~~~~~~~~~~~ */\n    color-scheme: dark;\n    color: var(--wa-color-text-normal);\n\n    --wa-color-surface-raised: var(--wa-color-neutral-10);\n    --wa-color-surface-default: var(--wa-color-neutral-05);\n    --wa-color-surface-lowered: color-mix(in oklab, var(--wa-color-surface-default), black 20%);\n    --wa-color-surface-border: var(--wa-color-neutral-20);\n\n    --wa-color-text-normal: var(--wa-color-neutral-95);\n    --wa-color-text-quiet: var(--wa-color-neutral-60);\n    --wa-color-text-link: var(--wa-color-brand-70);\n\n    --wa-color-overlay-modal: color-mix(in oklab, black 60%, transparent);\n    --wa-color-overlay-inline: color-mix(in oklab, var(--wa-color-neutral-50) 10%, transparent);\n\n    --wa-color-shadow: color-mix(\n      in oklab,\n      var(--wa-color-surface-lowered) calc(var(--wa-shadow-blur-scale) * 32% + 40%),\n      transparent\n    );\n\n    --wa-color-focus: var(--wa-color-brand-60);\n\n    --wa-color-mix-hover: black 8%;\n    --wa-color-mix-active: black 16%;\n\n    --wa-color-brand-fill-quiet: var(--wa-color-brand-10);\n    --wa-color-brand-fill-normal: var(--wa-color-brand-20);\n    --wa-color-brand-fill-loud: var(--wa-color-brand-50);\n    --wa-color-brand-border-quiet: var(--wa-color-brand-20);\n    --wa-color-brand-border-normal: var(--wa-color-brand-30);\n    --wa-color-brand-border-loud: var(--wa-color-brand-40);\n    --wa-color-brand-on-quiet: var(--wa-color-brand-60);\n    --wa-color-brand-on-normal: var(--wa-color-brand-70);\n    --wa-color-brand-on-loud: white;\n\n    --wa-color-success-fill-quiet: var(--wa-color-success-10);\n    --wa-color-success-fill-normal: var(--wa-color-success-20);\n    --wa-color-success-fill-loud: var(--wa-color-success-50);\n    --wa-color-success-border-quiet: var(--wa-color-success-20);\n    --wa-color-success-border-normal: var(--wa-color-success-30);\n    --wa-color-success-border-loud: var(--wa-color-success-40);\n    --wa-color-success-on-quiet: var(--wa-color-success-60);\n    --wa-color-success-on-normal: var(--wa-color-success-70);\n    --wa-color-success-on-loud: white;\n\n    --wa-color-warning-fill-quiet: var(--wa-color-warning-10);\n    --wa-color-warning-fill-normal: var(--wa-color-warning-20);\n    --wa-color-warning-fill-loud: var(--wa-color-warning-50);\n    --wa-color-warning-border-quiet: var(--wa-color-warning-20);\n    --wa-color-warning-border-normal: var(--wa-color-warning-30);\n    --wa-color-warning-border-loud: var(--wa-color-warning-40);\n    --wa-color-warning-on-quiet: var(--wa-color-warning-60);\n    --wa-color-warning-on-normal: var(--wa-color-warning-70);\n    --wa-color-warning-on-loud: white;\n\n    --wa-color-danger-fill-quiet: var(--wa-color-danger-10);\n    --wa-color-danger-fill-normal: var(--wa-color-danger-20);\n    --wa-color-danger-fill-loud: var(--wa-color-danger-50);\n    --wa-color-danger-border-quiet: var(--wa-color-danger-20);\n    --wa-color-danger-border-normal: var(--wa-color-danger-30);\n    --wa-color-danger-border-loud: var(--wa-color-danger-40);\n    --wa-color-danger-on-quiet: var(--wa-color-danger-60);\n    --wa-color-danger-on-normal: var(--wa-color-danger-70);\n    --wa-color-danger-on-loud: white;\n\n    --wa-color-neutral-fill-quiet: var(--wa-color-neutral-10);\n    --wa-color-neutral-fill-normal: var(--wa-color-neutral-20);\n    --wa-color-neutral-fill-loud: var(--wa-color-neutral-90);\n    --wa-color-neutral-border-quiet: var(--wa-color-neutral-20);\n    --wa-color-neutral-border-normal: var(--wa-color-neutral-30);\n    --wa-color-neutral-border-loud: var(--wa-color-neutral-40);\n    --wa-color-neutral-on-quiet: var(--wa-color-neutral-60);\n    --wa-color-neutral-on-normal: var(--wa-color-neutral-70);\n    --wa-color-neutral-on-loud: var(--wa-color-neutral-05);\n    /* #endregion */\n  }\n\n  :where(:root),\n  .wa-theme-default,\n  .wa-light,\n  .wa-dark,\n  .wa-invert {\n    font-family: var(--wa-font-family-body);\n\n    /* #region Fonts ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-font-family-body: ui-sans-serif, system-ui, sans-serif;\n    --wa-font-family-heading: var(--wa-font-family-body);\n    --wa-font-family-code: ui-monospace, monospace;\n    --wa-font-family-longform: ui-serif, serif;\n\n    /* Font sizes use a ratio of 1.125 to scale sizes proportionally.\n     * For larger font sizes, each size is twice 1.125x larger to maximize impact.\n     * Each value uses `rem` units and is rounded to the nearest whole pixel when rendered. */\n    --wa-font-size-scale: 1;\n    --wa-font-size-2xs: round(calc(var(--wa-font-size-xs) / 1.125), 1px); /* 11px */\n    --wa-font-size-xs: round(calc(var(--wa-font-size-s) / 1.125), 1px); /* 12px */\n    --wa-font-size-s: round(calc(var(--wa-font-size-m) / 1.125), 1px); /* 14px */\n    --wa-font-size-m: calc(1rem * var(--wa-font-size-scale)); /* 16px */\n    --wa-font-size-l: round(calc(var(--wa-font-size-m) * 1.125 * 1.125), 1px); /* 20px */\n    --wa-font-size-xl: round(calc(var(--wa-font-size-l) * 1.125 * 1.125), 1px); /* 25px */\n    --wa-font-size-2xl: round(calc(var(--wa-font-size-xl) * 1.125 * 1.125), 1px); /* 32px */\n    --wa-font-size-3xl: round(calc(var(--wa-font-size-2xl) * 1.125 * 1.125), 1px); /* 41px */\n    --wa-font-size-4xl: round(calc(var(--wa-font-size-3xl) * 1.125 * 1.125), 1px); /* 52px */\n\n    --wa-font-size-smaller: round(calc(1em / 1.125), 1px);\n    --wa-font-size-larger: round(calc(1em * 1.125 * 1.125), 1px);\n\n    --wa-font-weight-light: 300;\n    --wa-font-weight-normal: 400;\n    --wa-font-weight-semibold: 500;\n    --wa-font-weight-bold: 600;\n\n    --wa-font-weight-body: var(--wa-font-weight-normal);\n    --wa-font-weight-heading: var(--wa-font-weight-bold);\n    --wa-font-weight-code: var(--wa-font-weight-normal);\n    --wa-font-weight-longform: var(--wa-font-weight-normal);\n    --wa-font-weight-action: var(--wa-font-weight-semibold);\n\n    --wa-line-height-condensed: 1.2;\n    --wa-line-height-normal: 1.6;\n    --wa-line-height-expanded: 2;\n\n    --wa-link-decoration-default: underline color-mix(in oklab, currentColor 70%, transparent) dotted;\n    --wa-link-decoration-hover: underline;\n    /* #endregion */\n\n    /* #region Space ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-space-scale: 1;\n    --wa-space-3xs: calc(var(--wa-space-scale) * 0.125rem); /* 2px */\n    --wa-space-2xs: calc(var(--wa-space-scale) * 0.25rem); /* 4px */\n    --wa-space-xs: calc(var(--wa-space-scale) * 0.5rem); /* 8px */\n    --wa-space-s: calc(var(--wa-space-scale) * 0.75rem); /* 12px */\n    --wa-space-m: calc(var(--wa-space-scale) * 1rem); /* 16px */\n    --wa-space-l: calc(var(--wa-space-scale) * 1.5rem); /* 24px */\n    --wa-space-xl: calc(var(--wa-space-scale) * 2rem); /* 32px */\n    --wa-space-2xl: calc(var(--wa-space-scale) * 2.5rem); /* 40px */\n    --wa-space-3xl: calc(var(--wa-space-scale) * 3rem); /* 48px */\n    --wa-space-4xl: calc(var(--wa-space-scale) * 4rem); /* 64px */\n\n    --wa-content-spacing: var(--wa-space-l);\n    /* #endregion */\n\n    /* #region Borders ~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-border-style: solid;\n\n    --wa-border-width-scale: 1;\n    --wa-border-width-s: calc(var(--wa-border-width-scale) * 0.0625rem);\n    --wa-border-width-m: calc(var(--wa-border-width-scale) * 0.125rem);\n    --wa-border-width-l: calc(var(--wa-border-width-scale) * 0.1875rem);\n    /* #endregion */\n\n    /* #region Rounding ~~~~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-border-radius-scale: 1;\n    --wa-border-radius-s: calc(var(--wa-border-radius-scale) * 0.1875rem);\n    --wa-border-radius-m: calc(var(--wa-border-radius-scale) * 0.375rem);\n    --wa-border-radius-l: calc(var(--wa-border-radius-scale) * 0.75rem);\n\n    --wa-border-radius-pill: 9999px;\n    --wa-border-radius-circle: 50%;\n    --wa-border-radius-square: 0px;\n    /* #endregion */\n\n    /* #region Focus ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-focus-ring-style: solid;\n    --wa-focus-ring-width: 0.1875rem; /* 3px */\n    --wa-focus-ring: var(--wa-focus-ring-style) var(--wa-focus-ring-width) var(--wa-color-focus);\n    --wa-focus-ring-offset: 0.0625rem; /* 1px */\n    /* #endregion */\n\n    /* #region Shadows ~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-shadow-offset-x-scale: 0;\n    --wa-shadow-offset-x-s: calc(var(--wa-shadow-offset-x-scale) * 0.125rem);\n    --wa-shadow-offset-x-m: calc(var(--wa-shadow-offset-x-scale) * 0.25rem);\n    --wa-shadow-offset-x-l: calc(var(--wa-shadow-offset-x-scale) * 0.5rem);\n\n    --wa-shadow-offset-y-scale: 1;\n    --wa-shadow-offset-y-s: calc(var(--wa-shadow-offset-y-scale) * 0.125rem);\n    --wa-shadow-offset-y-m: calc(var(--wa-shadow-offset-y-scale) * 0.25rem);\n    --wa-shadow-offset-y-l: calc(var(--wa-shadow-offset-y-scale) * 0.5rem);\n\n    --wa-shadow-blur-scale: 1;\n    --wa-shadow-blur-s: calc(var(--wa-shadow-blur-scale) * 0.125rem);\n    --wa-shadow-blur-m: calc(var(--wa-shadow-blur-scale) * 0.25rem);\n    --wa-shadow-blur-l: calc(var(--wa-shadow-blur-scale) * 0.5rem);\n\n    --wa-shadow-spread-scale: -0.5;\n    --wa-shadow-spread-s: calc(var(--wa-shadow-spread-scale) * 0.125rem);\n    --wa-shadow-spread-m: calc(var(--wa-shadow-spread-scale) * 0.25rem);\n    --wa-shadow-spread-l: calc(var(--wa-shadow-spread-scale) * 0.5rem);\n\n    --wa-shadow-s: var(--wa-shadow-offset-x-s) var(--wa-shadow-offset-y-s) var(--wa-shadow-blur-s)\n      var(--wa-shadow-spread-s) var(--wa-color-shadow);\n    --wa-shadow-m: var(--wa-shadow-offset-x-m) var(--wa-shadow-offset-y-m) var(--wa-shadow-blur-m)\n      var(--wa-shadow-spread-m) var(--wa-color-shadow);\n    --wa-shadow-l: var(--wa-shadow-offset-x-l) var(--wa-shadow-offset-y-l) var(--wa-shadow-blur-l)\n      var(--wa-shadow-spread-l) var(--wa-color-shadow);\n    /* #endregion */\n\n    /* #region Transitions ~~~~~~~~~~~~~~~~~~~~~~ */\n    --wa-transition-easing: ease;\n    --wa-transition-slow: 300ms;\n    --wa-transition-normal: 150ms;\n    --wa-transition-fast: 75ms;\n    /* #endregion */\n\n    /* #region Components ~~~~~~~~~~~~~~~~~~~~~~~ */\n    /* Form Controls */\n    --wa-form-control-background-color: var(--wa-color-surface-default);\n\n    --wa-form-control-border-color: var(--wa-color-neutral-border-loud);\n    --wa-form-control-border-style: var(--wa-border-style);\n    --wa-form-control-border-width: var(--wa-border-width-s);\n    --wa-form-control-border-radius: var(--wa-border-radius-m);\n\n    --wa-form-control-activated-color: var(--wa-color-brand-fill-loud);\n\n    --wa-form-control-label-color: var(--wa-color-text-normal);\n    --wa-form-control-label-font-weight: var(--wa-font-weight-semibold);\n    --wa-form-control-label-line-height: var(--wa-line-height-condensed);\n\n    --wa-form-control-value-color: var(--wa-color-text-normal);\n    --wa-form-control-value-font-weight: var(--wa-font-weight-body);\n    --wa-form-control-value-line-height: var(--wa-line-height-condensed);\n\n    --wa-form-control-hint-color: var(--wa-color-text-quiet);\n    --wa-form-control-hint-font-weight: var(--wa-font-weight-body);\n    --wa-form-control-hint-line-height: var(--wa-line-height-normal);\n\n    --wa-form-control-placeholder-color: var(--wa-color-gray-50);\n\n    --wa-form-control-required-content: \'*\';\n    --wa-form-control-required-content-color: inherit;\n    --wa-form-control-required-content-offset: 0.1em;\n\n    --wa-form-control-padding-block: 0.75em;\n    --wa-form-control-padding-inline: 1em;\n    --wa-form-control-height: round(\n      calc(2 * var(--wa-form-control-padding-block) + 1em * var(--wa-form-control-value-line-height)),\n      1px\n    );\n    --wa-form-control-toggle-size: round(1.25em, 1px);\n\n    /* Panels */\n    --wa-panel-border-style: var(--wa-border-style);\n    --wa-panel-border-width: var(--wa-border-width-s);\n    --wa-panel-border-radius: var(--wa-border-radius-l);\n\n    /* Tooltips */\n    --wa-tooltip-arrow-size: 0.375rem;\n\n    --wa-tooltip-background-color: var(--wa-color-text-normal);\n\n    --wa-tooltip-border-color: var(--wa-tooltip-background-color);\n    --wa-tooltip-border-style: var(--wa-border-style);\n    --wa-tooltip-border-width: var(--wa-border-width-s);\n    --wa-tooltip-border-radius: var(--wa-border-radius-s);\n\n    --wa-tooltip-content-color: var(--wa-color-surface-default);\n    --wa-tooltip-font-size: var(--wa-font-size-s);\n    --wa-tooltip-line-height: var(--wa-line-height-normal);\n    /* #endregion */\n  }\n}\n\n\n:host {\n  display: inline-block;\n}\n\n:host(.custom-date-picker--disabled) {\n  cursor: not-allowed;\n}\n\n.custom-date-picker__popup {\n  --arrow-color: var(--wa-color-neutral-0, #fff);\n  --arrow-size: 10px;\n}\n\n.custom-date-picker__popup::part(popup) {\n  background: transparent;\n  border: none;\n  padding: 0;\n  box-shadow: none;\n}\n.custom-date-picker__trigger {\n  cursor: pointer;\n}\n/* Unified invalid state (no conflicts) */\n\n.picker-surface {\n  background: var(--wa-color-neutral-0, #fff);\n  border-radius: 0.75rem;\n  box-shadow: 0 12px 40px rgba(15, 23, 42, 0.18);\n  padding: 0.25rem 1rem;\n}\n\n.picker-surface__input {\n  position: absolute;\n  left: -9999px;\n  width: 0;\n  height: 0;\n  opacity: 0;\n  pointer-events: none;\n}\n\n.custom-date-picker__calendar {\n  --adp-background-color: var(--wa-color-neutral-0, #fff);\n  --adp-border-radius: 12px;\n  --adp-cell-border-radius: 8px;\n  --adp-padding: 1rem;\n  --adp-color: var(--wa-color-neutral-900, #0f172a);\n  --adp-color-other-month: rgba(15, 23, 42, 0.35);\n  --adp-color-other-month-hover: rgba(15, 23, 42, 0.65);\n  --adp-color-disabled: rgba(15, 23, 42, 0.35);\n  --adp-nav-title-size: 1rem;\n  --adp-nav-title-weight: 600;\n  --adp-cell-background-color-selected: var(--wa-color-primary-600, #2563eb);\n  --adp-cell-background-color-selected-hover: var(--wa-color-primary-700, #1d4ed8);\n  --adp-cell-border-color: transparent;\n  --adp-day-name-color: rgba(15, 23, 42, 0.65);\n}\n\n.custom-date-picker__calendar .air-datepicker-body--day-name {\n  font-weight: 600;\n}\n\n.custom-date-picker__calendar .air-datepicker-nav--action svg {\n  stroke: currentColor;\n}\n';const ks=vs;var xs=undefined&&undefined.__decorate||function(e,t,i,a){var r=arguments.length,o=r<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,i):a,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,a);else for(var s=e.length-1;s>=0;s--)if(n=e[s])o=(r<3?n(o):r>3?n(t,i,o):n(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};const _s=class{constructor(t){e(this,t);this.dateChanged=a(this,"dateChanged",7);this.datePickerFocus=a(this,"datePickerFocus",7);this.datePickerBlur=a(this,"datePickerBlur",7)}get el(){return o(this)}withClear;placeholder;label;inline=false;date=null;multipleDates=false;range=false;dateFormat="yyyy-MM-dd";timepicker=false;minDate;maxDate;disabled=false;autoClose=true;showOtherMonths=true;selectOtherMonths=true;customPicker=false;container;forceDestroyOnUpdate=false;emitEmptyDate=false;triggerContainerStyle="";currentDate=null;isActive=false;isPickerInvalid;dateChanged;datePickerFocus;datePickerBlur;pickerRef;calendarContainerRef;datePicker;componentWillLoad(){const e=this.el.hasAttribute("aria-invalid");if(e){this.isPickerInvalid=JSON.parse(this.el.getAttribute("aria-invalid"))}if(this.date){const e=this.toValidDate(this.date);if(e){this.currentDate=e}}}componentDidLoad(){this.initializeDatepicker()}disconnectedCallback(){this.datePicker?.destroy?.()}handleClickOutside(){if(this.isActive){this.closePopup()}}datePropChanged(e,t){if(this.isSameDates(e,t)){return}this.updatePickerDate(e)}minDatePropChanged(e,t){if(!this.datePicker){return}if(!this.isSameDates(e,t)){this.datePicker.update({minDate:this.toValidDate(e)})}}maxDatePropChanged(e,t){if(!this.datePicker){return}if(!this.isSameDates(e,t)){this.datePicker.update({maxDate:this.toValidDate(e)})}}handleDisabledChange(e){if(e){this.closePopup()}}handleAriaInvalidChange(e){this.isPickerInvalid=JSON.parse(e)}async openDatePicker(){if(!this.disabled){this.openPopup()}}async clearDatePicker(){this.datePicker?.clear();this.currentDate=null;this.date=null;if(this.emitEmptyDate){this.dateChanged.emit({start:null,end:null})}}openPopup(){if(this.isActive)return;this.isActive=true;this.datePickerFocus.emit()}closePopup(){if(!this.isActive)return;this.isActive=false;this.datePickerBlur.emit()}handleAnchorClick=e=>{e.stopPropagation();e.stopImmediatePropagation();e.preventDefault();if(this.disabled){return}if(this.isActive){this.closePopup()}else{this.openPopup()}};handleAnchorKeyDown=e=>{if(this.customPicker||this.disabled)return;if(e.key==="Enter"||e.key===" "){e.preventDefault();this.isActive?this.closePopup():this.openPopup()}};isSameDates(e,t){if(!e&&!t)return true;if(!e||!t)return false;return fe(e).isSame(fe(t),"day")}toValidDate(e){if(!e)return null;const t=e instanceof Date?e:new Date(e);return isNaN(t.getTime())?null:t}updatePickerDate(e){const t=this.toValidDate(e);if(!t){this.datePicker?.clear({silent:true});this.currentDate=null;return}if(this.currentDate&&this.isSameDates(this.currentDate,t)){return}this.currentDate=t;if(this.forceDestroyOnUpdate&&this.datePicker){this.datePicker.destroy();this.datePicker=undefined;this.initializeDatepicker()}else{this.datePicker?.selectDate(t,{silent:true})}}initializeDatepicker(){if(this.datePicker||!this.pickerRef){return}const e=this.container??this.calendarContainerRef??this.el;this.datePicker=new gs(this.pickerRef,{container:e,inline:true,selectedDates:this.currentDate?[this.currentDate]:[],multipleDates:this.multipleDates,range:this.range,dateFormat:this.dateFormat,timepicker:this.timepicker,minDate:this.minDate,maxDate:this.maxDate,autoClose:this.autoClose,locale:ws,showOtherMonths:this.showOtherMonths,selectOtherMonths:this.selectOtherMonths,onSelect:({date:e})=>this.handleDateSelect(e)});this.datePicker.$datepicker?.classList.add("ir-custom-date-picker__calendar");this.datePicker.$datepicker.style.borderWidth="0px";this.datePicker.$datepicker.style.setProperty("--adp-cell-background-color-selected","var(--wa-color-brand-50)");this.datePicker.$datepicker.style.setProperty("--adp-cell-background-color-selected-hover","var(--wa-color-brand-50)");this.datePicker.$datepicker.style.setProperty("--adp-accent-color","var(--wa-color-brand-50)");this.datePicker.$datepicker.style.setProperty("--adp-day-name-color","lab(48.496% 0 0)")}handleDateSelect(e){const t=Array.isArray(e)?e.filter(Boolean):e?[e]:[];if(!t.length||!(t[0]instanceof Date)){if(this.emitEmptyDate){this.dateChanged.emit({start:null,end:null})}this.currentDate=null;this.date=null;return}const i=t[0];const a=this.range&&t.length>1?t[1]:i;this.currentDate=i;this.date=i;this.dateChanged.emit({start:i?fe(i):null,end:a?fe(a):null});const r=this.autoClose&&(!this.range||this.range&&t.length>1);if(r){this.closePopup()}}getTriggerLabel(){if(!this.currentDate){return null}return this.timepicker?fe(this.currentDate).format("MMM DD, YYYY, HH:mm"):fe(this.currentDate).format("MMM DD, YYYY")}render(){const e=`custom-date-picker__trigger ${this.triggerContainerStyle} ${this.disabled?"custom-date-picker__trigger--disabled":""}`;return t(i,{key:"1de5744d9dc0bee29f2b1d3c5daf0836a568635d",class:{"custom-date-picker":true,"custom-date-picker--open":this.isActive,"custom-date-picker--disabled":this.disabled}},t("wa-popup",{key:"7d1e590ecf1f374a93340055b1457878cd22e6a4",distance:8,class:"custom-date-picker__popup",arrow:true,"arrow-placement":"anchor",flip:true,shift:true,active:this.isActive},t("ir-custom-input",{key:"a83375fa669d745fcab5ddfd35878416378d83e5",placeholder:this.placeholder,withClear:this.withClear,tabIndex:!this.customPicker&&!this.disabled?0:undefined,"aria-expanded":!this.customPicker?String(this.isActive):undefined,"aria-disabled":this.disabled?"true":undefined,onKeyDown:this.handleAnchorKeyDown,"aria-invalid":String(this.isPickerInvalid),class:e,onClick:this.handleAnchorClick,readonly:true,slot:"anchor",value:this.getTriggerLabel(),label:this.label},t("slot",{key:"ae2d67586d060e2f48c3b0584acfbf008f617eea",name:"start",slot:"start"}),t("slot",{key:"3d9861d2aba0315a66104f00dea06a4d50095056",name:"end",slot:"end"})),t("div",{key:"67e6fd774865d119ab3595f1476270425ffc279c",class:"picker-surface"},t("div",{key:"7be84d43e150d2c64848ece2a7b01ea67589cf62",class:"picker-surface__calendar",ref:e=>this.calendarContainerRef=e}),t("input",{key:"da3606334b333be37156fa72a6804390017f2b79",type:"text",class:"picker-surface__input",ref:e=>this.pickerRef=e,"aria-hidden":"true",tabIndex:-1,readOnly:true}))))}static get watchers(){return{date:["datePropChanged"],minDate:["minDatePropChanged"],maxDate:["maxDatePropChanged"],disabled:["handleDisabledChange"],"aria-invalid":["handleAriaInvalidChange"]}}};xs([ht()],_s.prototype,"handleClickOutside",null);_s.style=ks;const Ds={price:{mask:Number,scale:2,radix:".",mapToRadix:[","],normalizeZeros:true,padFractionalZeros:true,thousandsSeparator:","},url:{mask:/^\S*$/,overwrite:false,prepare(e){return e.replace(/^https?:\/\//i,"")},commit(e,t){t._value="https://"+e.replace(/^https?:\/\//i,"")}},time:{mask:"HH:mm",blocks:{HH:{mask:$e,from:0,to:23,placeholderChar:"H"},mm:{mask:$e,from:0,to:59,placeholderChar:"m"}},lazy:false,placeholderChar:"_"},date:{mask:Date,pattern:"DD/MM/YYYY",lazy:false,min:fe("1900-01-01","YYYY-MM-DD").toDate(),max:new Date,format:e=>fe(e).format("DD/MM/YYYY"),parse:e=>fe(e,"DD/MM/YYYY").toDate(),autofix:true,placeholderChar:"_",blocks:{YYYY:{mask:$e,from:1900,to:fe().format("YYYY"),placeholderChar:"Y"},MM:{mask:$e,from:1,to:12,placeholderChar:"M"},DD:{mask:$e,from:1,to:31,placeholderChar:"D"}}}};const Cs=":host{display:block}";const Ms=Cs;const Ss=class{constructor(t){e(this,t);this.textChange=a(this,"text-change",7);this.inputBlur=a(this,"input-blur",7);this.inputFocus=a(this,"inputFocus",7)}value="";type="text";defaultValue;size="small";appearance;pill;returnMaskedValue=false;label;hint;withClear;placeholder;readonly;passwordToggle;passwordVisible;withoutSpinButtons;form;required;pattern;minlength;maxlength;min;max;step;autocapitalize;autocorrect;autocomplete;autofocus;enterkeyhint;spellcheck;inputmode;withLabel;withHint;mask;textChange;inputBlur;inputFocus;isValid=true;_mask;inputRef;animationFrame;componentWillLoad(){if(this.mask==="price"&&typeof this.mask==="string"){this.returnMaskedValue=true}}componentDidLoad(){this.initializeMask()}disconnectedCallback(){this.destroyMask()}handleMaskPropsChange(){if(!this.inputRef)return;const e=Boolean(this.resolveMask());if(!e){this.destroyMask();return}this.rebuildMask()}handleAriaInvalidChange(e){this.isValid=!JSON.parse(e)}handleInput=e=>{this.value=e??"";this.textChange.emit(this.value)};async initializeMask(){if(!this.inputRef)return;const e=this.buildMaskOptions();if(!e)return;await customElements.whenDefined("wa-input");await this.inputRef.updateComplete;const t=this.inputRef.input;if(!t)return;this._mask=Fe(t,e);if(this.value){if(this.returnMaskedValue){this._mask.unmaskedValue=this.value}else{this._mask.value=this.value}}this._mask.on("accept",(()=>{const e=this.inputRef.value.trim()===""||this._mask.unmaskedValue==="";const t=e?"":this.returnMaskedValue?this._mask.unmaskedValue:this._mask.value;this.handleInput(t)}))}rebuildMask(){this.destroyMask();this.initializeMask()}destroyMask(){this._mask?.destroy();this._mask=undefined;this.clearAnimationFrame()}clearAnimationFrame(){if(this.animationFrame){cancelAnimationFrame(this.animationFrame);this.animationFrame=undefined}}buildMaskOptions(){const e=this.resolveMask();if(!e)return;const t=typeof e==="object"&&e!==null&&!Array.isArray(e)?{...e}:{mask:e};if(this.min!==undefined){t.min=this.min}if(this.max!==undefined){t.max=this.max}return t}resolveMask(){if(!this.mask)return;if(typeof this.mask==="string"){return Ds[this.mask]}return this.mask}handleChange=e=>{e.stopImmediatePropagation();e.stopPropagation();if(!this.mask)this.handleInput(e.target.value)};handleClear=e=>{e.stopImmediatePropagation();e.stopPropagation();if(this._mask){this._mask.value=""}this.handleInput("")};handleBlur=e=>{e.stopImmediatePropagation();e.stopPropagation();this.inputBlur.emit()};handleFocus=e=>{e.stopImmediatePropagation();e.stopPropagation();this.inputFocus.emit()};render(){let e=this.value;if(this._mask&&this.returnMaskedValue){e=this._mask.value}return t(i,{key:"47545377bf913cb78e4b308d03fc418f1346f5ed"},t("wa-input",{key:"cf684c267f0125ee9aa36baaef5cb8b5fb9caa5b",type:this.type,value:e,ref:e=>this.inputRef=e,defaultValue:this.defaultValue,size:this.size,appearance:this.appearance,pill:this.pill,"aria-invalid":String(!this.isValid),label:this.label,hint:this.hint,withClear:this.withClear,placeholder:this.placeholder,readonly:this.readonly,passwordToggle:this.passwordToggle,passwordVisible:this.passwordVisible,withoutSpinButtons:this.withoutSpinButtons,form:this.form,required:this.required,pattern:this.pattern,minlength:this.minlength,maxlength:this.maxlength,min:this.min,max:this.max,step:this.step,autocapitalize:this.autocapitalize,autocorrect:this.autocorrect,autocomplete:this.autocomplete,autofocus:this.autofocus,enterkeyhint:this.enterkeyhint,spellcheck:this.spellcheck,inputmode:this.inputmode,withLabel:this.withLabel,withHint:this.withHint,onchange:this.handleChange,"onwa-clear":this.handleClear,onblur:this.handleBlur,onfocus:this.handleFocus},t("slot",{key:"b134eac7201348d25531361178171b07b1b80a1e",name:"label",slot:"label"}),t("slot",{key:"e133cef1c4114a6304611abefd96948ee46b2e95",name:"start",slot:"start"}),t("slot",{key:"914024d2189bbc5bfed7b71e3a4cacbb1769d8c6",name:"end",slot:"end"}),t("slot",{key:"8fd9b72c68cc816b040afb04c23da547c95c1043",name:"clear-icon",slot:"clear-icon"}),t("slot",{key:"ea7dde711e6ed64decb136d4631758e76eb97b47",name:"hide-password-icon",slot:"hide-password-icon"}),t("slot",{key:"e4f7d6af8c7d2f2bceb35376bf660cb311446d53",name:"show-password-icon",slot:"show-password-icon"}),t("slot",{key:"bd9b736c79231f4e42970f0fa6d51ad226dbd637",name:"hint",slot:"hint"})))}static get watchers(){return{mask:["handleMaskPropsChange"],min:["handleMaskPropsChange"],max:["handleMaskPropsChange"],"aria-invalid":["handleAriaInvalidChange"]}}};Ss.style=Ms;const Ys=".sc-ir-daily-revenue-h{display:block}.daily-revenue__meta.sc-ir-daily-revenue{display:flex;flex-direction:column;gap:1rem}.daily-revenue__table.sc-ir-daily-revenue{flex:1 1 0%}@media (min-width: 768px){.daily-revenue__meta.sc-ir-daily-revenue{flex-direction:row}}";const Es=Ys;const Ts=class{constructor(t){e(this,t);this.preventPageLoad=a(this,"preventPageLoad",7)}language="";ticket="";propertyid;p;isPageLoading;property_id;groupedPayment;previousDateGroupedPayments;isLoading;filters={date:fe().format("YYYY-MM-DD"),users:null};sideBarEvent;tokenService=new me;roomService=new we;propertyService=new Tt;bookingService=new l;paymentEntries;preventPageLoad;componentWillLoad(){if(this.ticket){this.tokenService.setToken(this.ticket);this.initializeApp()}}ticketChanged(e,t){if(e===t){return}this.tokenService.setToken(this.ticket);this.initializeApp()}handleOpenSidebar(e){e.stopImmediatePropagation();e.stopPropagation();this.sideBarEvent=e.detail}handleFetchNewReports(e){e.stopImmediatePropagation();e.stopPropagation();this.filters={...e.detail};this.getPaymentReports()}async handleResetBooking(e){e.stopPropagation();e.stopImmediatePropagation();this.getPaymentReports(false,true)}handleSidebarClose=e=>{e.stopImmediatePropagation();e.stopPropagation();this.sideBarEvent=null};renderSidebarBody(){if(!this.sideBarEvent){return}switch(this.sideBarEvent.type){case"booking":return t("ir-booking-details",{slot:"sidebar-body",hasPrint:true,hasReceipt:true,hasCloseButton:true,onCloseSidebar:this.handleSidebarClose,is_from_front_desk:true,propertyid:this.property_id,hasRoomEdit:true,hasRoomDelete:true,bookingNumber:this.sideBarEvent.payload.bookingNumber.toString(),ticket:this.ticket,language:this.language,hasRoomAdd:true});default:return null}}async initializeApp(){this.isPageLoading=true;try{let e=this.propertyid;if(!e&&!this.p){throw new Error("Property ID or username is required")}if(!e){const t=await this.roomService.getExposedProperty({id:0,aname:this.p,language:this.language,is_backend:true,include_units_hk_status:true});e=t.My_Result.id}this.property_id=e;const t=[this.bookingService.getSetupEntriesByTableNameMulti(["_PAY_TYPE","_PAY_TYPE_GROUP","_PAY_METHOD"]),this.getPaymentReports(),this.roomService.fetchLanguage(this.language)];if(e){t.push(this.roomService.getExposedProperty({id:e,language:this.language,is_backend:true,include_units_hk_status:true}))}const[i]=await Promise.all(t);const{pay_type:a,pay_type_group:r,pay_method:o}=this.bookingService.groupEntryTablesResult(i);this.paymentEntries={groups:r,methods:o,types:a}}catch(e){console.log(e)}finally{this.isPageLoading=false}}groupPaymentsByName(e){const t=new Map;for(const i of e){const e=`${i.payTypeCode}_${i.payMethodCode}`;const a=t.get(e)??[];t.set(e,[...a,i])}return new Map([...t.entries()].sort((([e],[t])=>{const i=Number(e);const a=Number(t);if(!isNaN(i)&&!isNaN(a)){return i-a}return e.localeCompare(t)})))}async getPaymentReports(e=false,t=false){try{const i=e=>({method:e.METHOD,payTypeCode:e.PAY_TYPE_CODE,payMethodCode:e.PAY_METHOD_CODE,amount:e.AMOUNT,date:e.DATE,hour:e.HOUR,minute:e.MINUTE,user:e.USER,currency:e.CURRENCY,bookingNbr:e.BOOKING_NBR,id:pe()});this.isLoading=e?"export":"filter";const a=[this.propertyService.getDailyRevenueReport({date:this.filters.date,property_id:this.property_id?.toString(),is_export_to_excel:e})];if(!e&&!t){a.push(this.propertyService.getDailyRevenueReport({date:fe(this.filters.date,"YYYY-MM-DD").add(-1,"days").format("YYYY-MM-DD"),property_id:this.property_id?.toString(),is_export_to_excel:e}))}const r=await Promise.all(a);if(!e){if(r[0]){this.groupedPayment=this.groupPaymentsByName(r[0]?.map(i))}else{this.groupedPayment=new Map}if(r[1])this.previousDateGroupedPayments=this.groupPaymentsByName(r[1]?.map(i))}}catch(e){console.log(e)}finally{this.isLoading=null}}render(){if(this.isPageLoading){return t("ir-loading-screen",null)}return t(i,null,t("ir-toast",null),t("ir-interceptor",null),t("section",{class:"p-2 d-flex flex-column",style:{gap:"1rem"}},t("div",{class:"d-flex align-items-center justify-content-between"},t("h3",{class:"mb-1 mb-md-0"},"Daily Revenue"),t("ir-button",{size:"sm",btn_color:"outline",isLoading:this.isLoading==="export",text:g.entries?.Lcz_Export,onClickHandler:async e=>{e.stopImmediatePropagation();e.stopPropagation();await this.getPaymentReports(true)},btnStyle:{height:"100%"},iconPosition:"right",icon_name:"file",icon_style:{"--icon-size":"14px"}})),t("ir-revenue-summary",{previousDateGroupedPayments:this.previousDateGroupedPayments,groupedPayments:this.groupedPayment,paymentEntries:this.paymentEntries}),t("div",{class:"daily-revenue__meta"},t("ir-daily-revenue-filters",{isLoading:this.isLoading==="filter",payments:this.groupedPayment}),t("ir-revenue-table",{filters:this.filters,class:"daily-revenue__table",paymentEntries:this.paymentEntries,payments:this.groupedPayment}))),t("ir-sidebar",{sidebarStyles:{width:this.sideBarEvent?.type==="booking"?"80rem":"var(--sidebar-width,40rem)",background:this.sideBarEvent?.type==="booking"?"#F2F3F8":"white"},open:Boolean(this.sideBarEvent),showCloseButton:false,onIrSidebarToggle:this.handleSidebarClose},this.renderSidebarBody()))}static get watchers(){return{ticket:["ticketChanged"]}}};Ts.style=Es;const Is=".sc-ir-daily-revenue-filters-h{display:block}.revenue-filter__date-picker-icon.sc-ir-daily-revenue-filters{position:absolute;inset:0;left:0.75rem;display:flex;align-items:center;width:fit-content;transform:translateY(-0.15rem)}.sc-ir-daily-revenue-filters-h{display:block;height:100%}@media (min-width: 768px){.sc-ir-daily-revenue-filters-h{width:300px}.collapse-btn.sc-ir-daily-revenue-filters{display:none}#dailyRevenueFiltersCollapse.collapse.sc-ir-daily-revenue-filters:not(.show){display:block}}";const zs=Is;const Os=class{constructor(t){e(this,t);this.fetchNewReports=a(this,"fetchNewReports",7)}payments;isLoading;collapsed=false;users=new Set;filters;baseFilters={date:fe().format("YYYY-MM-DD"),users:null};fetchNewReports;componentWillLoad(){this.filters={...this.baseFilters};this.updateGuests()}handlePaymentChange(){this.updateGuests()}updateGuests(){const e=new Set;this.payments.forEach((t=>{t.forEach((t=>{e.add(t.user)}))}));this.users=new Set(e)}applyFiltersEvt(e){e.stopImmediatePropagation();e.stopPropagation();this.fetchNewReports.emit(this.filters)}resetFilters(e){e.stopImmediatePropagation();e.stopPropagation();this.filters={...this.baseFilters};this.fetchNewReports.emit(this.filters)}updateFilter(e){this.filters={...this.filters,...e}}render(){return t("div",{key:"3fc8f79a2361c775e5df9769f467fc970bcb3b98",class:"card mb-0 p-1 d-flex flex-column sales-filters-card"},t("div",{key:"478d8a95d66d9dbcc2c539caa74de2fd764ba6e2",class:"d-flex align-items-center justify-content-between sales-filters-header"},t("div",{key:"50e04a019e014fc23fe2e1b760964656bfb6d50a",class:"d-flex align-items-center",style:{gap:"0.5rem"}},t("svg",{key:"550e2508c1b6090ad37d2a70152088b30d345dd8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",height:18,width:18},t("path",{key:"db6b5a55c926c36f0db480ff22925c9e12b57f80",fill:"currentColor",d:"M3.9 54.9C10.5 40.9 24.5 32 40 32l432 0c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9 320 448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6l0-79.1L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"})),t("h4",{key:"624fe5eaa74cc84faa5a68a9ade3f20be73ef764",class:"m-0 p-0 flex-grow-1"},g.entries.Lcz_Filters)),t("ir-button",{key:"8229e75bb0a655ca26227cd99769c17d38e6ed49",variant:"icon",id:"drawer-icon","data-toggle":"collapse","data-target":"#dailyRevenueFiltersCollapse","aria-expanded":this.collapsed?"true":"false","aria-controls":"dailyRevenueFiltersCollapse",class:"mr-1 collapse-btn toggle-collapse-btn",icon_name:this.collapsed?"closed_eye":"open_eye",onClickHandler:()=>{this.collapsed=!this.collapsed},style:{"--icon-size":"1.6rem"}})),t("div",{key:"d9bbee81568d7770ae1d6641b090b360f85924bc",class:"m-0 p-0 collapse filters-section",id:"dailyRevenueFiltersCollapse"},t("div",{key:"bfa53001f7afa1c013543a571f9f6f40df5346a3",class:"d-flex flex-column",style:{gap:"0.5rem"}},t("fieldset",{key:"7466fa8ca624b7db9d8a048b16cc2b5e5739df8a",class:"pt-1 filter-group"},t("label",{key:"c1bbfa526cdaa781123702e625c0b452a6ee86d8",htmlFor:"rooms",class:"m-0 px-0",style:{paddingBottom:"0.25rem"}},"Select a date"),t("div",{key:"ea88302c40f30e657bb6be96b0ec0483dcfaf6fb",class:"w-100 d-flex"},t("style",{key:"5331aea4cfff50549b48ff99b2768b538dce779b"},`\n                  .ir-date-picker-trigger{\n                    width:100%;\n                  }\n                  `),t("ir-date-picker",{key:"b20052f821cb398ddac45c7bb6944d40ed58c4b9","data-testid":"pickup_date",date:this.filters?.date,class:"w-100",emitEmptyDate:true,maxDate:fe().format("YYYY-MM-DD"),onDateChanged:e=>{e.stopImmediatePropagation();e.stopPropagation();this.updateFilter({date:e.detail.start?.format("YYYY-MM-DD")})}},t("input",{key:"5196cd559c5072608496d66b2e22a8dc1495dc31",slot:"trigger",type:"text",value:this?.filters?.date,class:`revenue-table__date-picker-input form-control w-100 input-sm  text-left`,style:{width:"100%"}})))),t("div",{key:"9f6313277026f7ad5623a696725b0a764c4e974f",class:"d-flex mt-1 align-items-center justify-content-end filter-actions",style:{gap:"1rem"}},t("ir-button",{key:"be6a4544d11ba233fc763759402a3b767bcc8300",btn_type:"button","data-testid":"reset",text:g.entries.Lcz_Reset,size:"sm",btn_color:"secondary",onClickHandler:e=>this.resetFilters(e)}),t("ir-button",{key:"ed995bd5f49d0dcd45bcfd53b584fd75a328a9a4",btn_type:"button","data-testid":"apply",isLoading:this.isLoading,text:g.entries.Lcz_Apply,size:"sm",onClickHandler:e=>this.applyFiltersEvt(e)})))))}static get watchers(){return{payments:["handlePaymentChange"]}}};Os.style=zs;var As="top";var Bs="bottom";var Rs="right";var Ps="left";var Ns="auto";var Ls=[As,Bs,Rs,Ps];var $s="start";var Fs="end";var Hs="clippingParents";var Us="viewport";var js="popper";var Vs="reference";var Gs=Ls.reduce((function(e,t){return e.concat([t+"-"+$s,t+"-"+Fs])}),[]);var qs=[].concat(Ls,[Ns]).reduce((function(e,t){return e.concat([t,t+"-"+$s,t+"-"+Fs])}),[]);var Ks="beforeRead";var Ws="read";var Xs="afterRead";var Js="beforeMain";var Qs="main";var Zs="afterMain";var el="beforeWrite";var tl="write";var il="afterWrite";var al=[Ks,Ws,Xs,Js,Qs,Zs,el,tl,il];function rl(e){return e?(e.nodeName||"").toLowerCase():null}function ol(e){if(e==null){return window}if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t?t.defaultView||window:window}return e}function nl(e){var t=ol(e).Element;return e instanceof t||e instanceof Element}function sl(e){var t=ol(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function ll(e){if(typeof ShadowRoot==="undefined"){return false}var t=ol(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function cl(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var i=t.styles[e]||{};var a=t.attributes[e]||{};var r=t.elements[e];if(!sl(r)||!rl(r)){return}Object.assign(r.style,i);Object.keys(a).forEach((function(e){var t=a[e];if(t===false){r.removeAttribute(e)}else{r.setAttribute(e,t===true?"":t)}}))}))}function dl(e){var t=e.state;var i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,i.popper);t.styles=i;if(t.elements.arrow){Object.assign(t.elements.arrow.style,i.arrow)}return function(){Object.keys(t.elements).forEach((function(e){var a=t.elements[e];var r=t.attributes[e]||{};var o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:i[e]);var n=o.reduce((function(e,t){e[t]="";return e}),{});if(!sl(a)||!rl(a)){return}Object.assign(a.style,n);Object.keys(r).forEach((function(e){a.removeAttribute(e)}))}))}}const hl={name:"applyStyles",enabled:true,phase:"write",fn:cl,effect:dl,requires:["computeStyles"]};function ul(e){return e.split("-")[0]}var pl=Math.max;var fl=Math.min;var bl=Math.round;function gl(){var e=navigator.userAgentData;if(e!=null&&e.brands&&Array.isArray(e.brands)){return e.brands.map((function(e){return e.brand+"/"+e.version})).join(" ")}return navigator.userAgent}function ml(){return!/^((?!chrome|android).)*safari/i.test(gl())}function wl(e,t,i){if(t===void 0){t=false}if(i===void 0){i=false}var a=e.getBoundingClientRect();var r=1;var o=1;if(t&&sl(e)){r=e.offsetWidth>0?bl(a.width)/e.offsetWidth||1:1;o=e.offsetHeight>0?bl(a.height)/e.offsetHeight||1:1}var n=nl(e)?ol(e):window,s=n.visualViewport;var l=!ml()&&i;var c=(a.left+(l&&s?s.offsetLeft:0))/r;var d=(a.top+(l&&s?s.offsetTop:0))/o;var h=a.width/r;var u=a.height/o;return{width:h,height:u,top:d,right:c+h,bottom:d+u,left:c,x:c,y:d}}function yl(e){var t=wl(e);var i=e.offsetWidth;var a=e.offsetHeight;if(Math.abs(t.width-i)<=1){i=t.width}if(Math.abs(t.height-a)<=1){a=t.height}return{x:e.offsetLeft,y:e.offsetTop,width:i,height:a}}function vl(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t)){return true}else if(i&&ll(i)){var a=t;do{if(a&&e.isSameNode(a)){return true}a=a.parentNode||a.host}while(a)}return false}function kl(e){return ol(e).getComputedStyle(e)}function xl(e){return["table","td","th"].indexOf(rl(e))>=0}function _l(e){return((nl(e)?e.ownerDocument:e.document)||window.document).documentElement}function Dl(e){if(rl(e)==="html"){return e}return e.assignedSlot||e.parentNode||(ll(e)?e.host:null)||_l(e)}function Cl(e){if(!sl(e)||kl(e).position==="fixed"){return null}return e.offsetParent}function Ml(e){var t=/firefox/i.test(gl());var i=/Trident/i.test(gl());if(i&&sl(e)){var a=kl(e);if(a.position==="fixed"){return null}}var r=Dl(e);if(ll(r)){r=r.host}while(sl(r)&&["html","body"].indexOf(rl(r))<0){var o=kl(r);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none"){return r}else{r=r.parentNode}}return null}function Sl(e){var t=ol(e);var i=Cl(e);while(i&&xl(i)&&kl(i).position==="static"){i=Cl(i)}if(i&&(rl(i)==="html"||rl(i)==="body"&&kl(i).position==="static")){return t}return i||Ml(e)||t}function Yl(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function El(e,t,i){return pl(e,fl(t,i))}function Tl(e,t,i){var a=El(e,t,i);return a>i?i:a}function Il(){return{top:0,right:0,bottom:0,left:0}}function zl(e){return Object.assign({},Il(),e)}function Ol(e,t){return t.reduce((function(t,i){t[i]=e;return t}),{})}var Al=function e(t,i){t=typeof t==="function"?t(Object.assign({},i.rects,{placement:i.placement})):t;return zl(typeof t!=="number"?t:Ol(t,Ls))};function Bl(e){var t;var i=e.state,a=e.name,r=e.options;var o=i.elements.arrow;var n=i.modifiersData.popperOffsets;var s=ul(i.placement);var l=Yl(s);var c=[Ps,Rs].indexOf(s)>=0;var d=c?"height":"width";if(!o||!n){return}var h=Al(r.padding,i);var u=yl(o);var p=l==="y"?As:Ps;var f=l==="y"?Bs:Rs;var b=i.rects.reference[d]+i.rects.reference[l]-n[l]-i.rects.popper[d];var g=n[l]-i.rects.reference[l];var m=Sl(o);var w=m?l==="y"?m.clientHeight||0:m.clientWidth||0:0;var y=b/2-g/2;var v=h[p];var k=w-u[d]-h[f];var x=w/2-u[d]/2+y;var _=El(v,x,k);var D=l;i.modifiersData[a]=(t={},t[D]=_,t.centerOffset=_-x,t)}function Rl(e){var t=e.state,i=e.options;var a=i.element,r=a===void 0?"[data-popper-arrow]":a;if(r==null){return}if(typeof r==="string"){r=t.elements.popper.querySelector(r);if(!r){return}}if(!vl(t.elements.popper,r)){return}t.elements.arrow=r}const Pl={name:"arrow",enabled:true,phase:"main",fn:Bl,effect:Rl,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Nl(e){return e.split("-")[1]}var Ll={top:"auto",right:"auto",bottom:"auto",left:"auto"};function $l(e,t){var i=e.x,a=e.y;var r=t.devicePixelRatio||1;return{x:bl(i*r)/r||0,y:bl(a*r)/r||0}}function Fl(e){var t;var i=e.popper,a=e.popperRect,r=e.placement,o=e.variation,n=e.offsets,s=e.position,l=e.gpuAcceleration,c=e.adaptive,d=e.roundOffsets,h=e.isFixed;var u=n.x,p=u===void 0?0:u,f=n.y,b=f===void 0?0:f;var g=typeof d==="function"?d({x:p,y:b}):{x:p,y:b};p=g.x;b=g.y;var m=n.hasOwnProperty("x");var w=n.hasOwnProperty("y");var y=Ps;var v=As;var k=window;if(c){var x=Sl(i);var _="clientHeight";var D="clientWidth";if(x===ol(i)){x=_l(i);if(kl(x).position!=="static"&&s==="absolute"){_="scrollHeight";D="scrollWidth"}}x=x;if(r===As||(r===Ps||r===Rs)&&o===Fs){v=Bs;var C=h&&x===k&&k.visualViewport?k.visualViewport.height:x[_];b-=C-a.height;b*=l?1:-1}if(r===Ps||(r===As||r===Bs)&&o===Fs){y=Rs;var M=h&&x===k&&k.visualViewport?k.visualViewport.width:x[D];p-=M-a.width;p*=l?1:-1}}var S=Object.assign({position:s},c&&Ll);var Y=d===true?$l({x:p,y:b},ol(i)):{x:p,y:b};p=Y.x;b=Y.y;if(l){var E;return Object.assign({},S,(E={},E[v]=w?"0":"",E[y]=m?"0":"",E.transform=(k.devicePixelRatio||1)<=1?"translate("+p+"px, "+b+"px)":"translate3d("+p+"px, "+b+"px, 0)",E))}return Object.assign({},S,(t={},t[v]=w?b+"px":"",t[y]=m?p+"px":"",t.transform="",t))}function Hl(e){var t=e.state,i=e.options;var a=i.gpuAcceleration,r=a===void 0?true:a,o=i.adaptive,n=o===void 0?true:o,s=i.roundOffsets,l=s===void 0?true:s;var c={placement:ul(t.placement),variation:Nl(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};if(t.modifiersData.popperOffsets!=null){t.styles.popper=Object.assign({},t.styles.popper,Fl(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:n,roundOffsets:l})))}if(t.modifiersData.arrow!=null){t.styles.arrow=Object.assign({},t.styles.arrow,Fl(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:false,roundOffsets:l})))}t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Ul={name:"computeStyles",enabled:true,phase:"beforeWrite",fn:Hl,data:{}};var jl={passive:true};function Vl(e){var t=e.state,i=e.instance,a=e.options;var r=a.scroll,o=r===void 0?true:r,n=a.resize,s=n===void 0?true:n;var l=ol(t.elements.popper);var c=[].concat(t.scrollParents.reference,t.scrollParents.popper);if(o){c.forEach((function(e){e.addEventListener("scroll",i.update,jl)}))}if(s){l.addEventListener("resize",i.update,jl)}return function(){if(o){c.forEach((function(e){e.removeEventListener("scroll",i.update,jl)}))}if(s){l.removeEventListener("resize",i.update,jl)}}}const Gl={name:"eventListeners",enabled:true,phase:"write",fn:function e(){},effect:Vl,data:{}};var ql={left:"right",right:"left",bottom:"top",top:"bottom"};function Kl(e){return e.replace(/left|right|bottom|top/g,(function(e){return ql[e]}))}var Wl={start:"end",end:"start"};function Xl(e){return e.replace(/start|end/g,(function(e){return Wl[e]}))}function Jl(e){var t=ol(e);var i=t.pageXOffset;var a=t.pageYOffset;return{scrollLeft:i,scrollTop:a}}function Ql(e){return wl(_l(e)).left+Jl(e).scrollLeft}function Zl(e,t){var i=ol(e);var a=_l(e);var r=i.visualViewport;var o=a.clientWidth;var n=a.clientHeight;var s=0;var l=0;if(r){o=r.width;n=r.height;var c=ml();if(c||!c&&t==="fixed"){s=r.offsetLeft;l=r.offsetTop}}return{width:o,height:n,x:s+Ql(e),y:l}}function ec(e){var t;var i=_l(e);var a=Jl(e);var r=(t=e.ownerDocument)==null?void 0:t.body;var o=pl(i.scrollWidth,i.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0);var n=pl(i.scrollHeight,i.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0);var s=-a.scrollLeft+Ql(e);var l=-a.scrollTop;if(kl(r||i).direction==="rtl"){s+=pl(i.clientWidth,r?r.clientWidth:0)-o}return{width:o,height:n,x:s,y:l}}function tc(e){var t=kl(e),i=t.overflow,a=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+r+a)}function ic(e){if(["html","body","#document"].indexOf(rl(e))>=0){return e.ownerDocument.body}if(sl(e)&&tc(e)){return e}return ic(Dl(e))}function ac(e,t){var i;if(t===void 0){t=[]}var a=ic(e);var r=a===((i=e.ownerDocument)==null?void 0:i.body);var o=ol(a);var n=r?[o].concat(o.visualViewport||[],tc(a)?a:[]):a;var s=t.concat(n);return r?s:s.concat(ac(Dl(n)))}function rc(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function oc(e,t){var i=wl(e,false,t==="fixed");i.top=i.top+e.clientTop;i.left=i.left+e.clientLeft;i.bottom=i.top+e.clientHeight;i.right=i.left+e.clientWidth;i.width=e.clientWidth;i.height=e.clientHeight;i.x=i.left;i.y=i.top;return i}function nc(e,t,i){return t===Us?rc(Zl(e,i)):nl(t)?oc(t,i):rc(ec(_l(e)))}function sc(e){var t=ac(Dl(e));var i=["absolute","fixed"].indexOf(kl(e).position)>=0;var a=i&&sl(e)?Sl(e):e;if(!nl(a)){return[]}return t.filter((function(e){return nl(e)&&vl(e,a)&&rl(e)!=="body"}))}function lc(e,t,i,a){var r=t==="clippingParents"?sc(e):[].concat(t);var o=[].concat(r,[i]);var n=o[0];var s=o.reduce((function(t,i){var r=nc(e,i,a);t.top=pl(r.top,t.top);t.right=fl(r.right,t.right);t.bottom=fl(r.bottom,t.bottom);t.left=pl(r.left,t.left);return t}),nc(e,n,a));s.width=s.right-s.left;s.height=s.bottom-s.top;s.x=s.left;s.y=s.top;return s}function cc(e){var t=e.reference,i=e.element,a=e.placement;var r=a?ul(a):null;var o=a?Nl(a):null;var n=t.x+t.width/2-i.width/2;var s=t.y+t.height/2-i.height/2;var l;switch(r){case As:l={x:n,y:t.y-i.height};break;case Bs:l={x:n,y:t.y+t.height};break;case Rs:l={x:t.x+t.width,y:s};break;case Ps:l={x:t.x-i.width,y:s};break;default:l={x:t.x,y:t.y}}var c=r?Yl(r):null;if(c!=null){var d=c==="y"?"height":"width";switch(o){case $s:l[c]=l[c]-(t[d]/2-i[d]/2);break;case Fs:l[c]=l[c]+(t[d]/2-i[d]/2);break}}return l}function dc(e,t){if(t===void 0){t={}}var i=t,a=i.placement,r=a===void 0?e.placement:a,o=i.strategy,n=o===void 0?e.strategy:o,s=i.boundary,l=s===void 0?Hs:s,c=i.rootBoundary,d=c===void 0?Us:c,h=i.elementContext,u=h===void 0?js:h,p=i.altBoundary,f=p===void 0?false:p,b=i.padding,g=b===void 0?0:b;var m=zl(typeof g!=="number"?g:Ol(g,Ls));var w=u===js?Vs:js;var y=e.rects.popper;var v=e.elements[f?w:u];var k=lc(nl(v)?v:v.contextElement||_l(e.elements.popper),l,d,n);var x=wl(e.elements.reference);var _=cc({reference:x,element:y,strategy:"absolute",placement:r});var D=rc(Object.assign({},y,_));var C=u===js?D:x;var M={top:k.top-C.top+m.top,bottom:C.bottom-k.bottom+m.bottom,left:k.left-C.left+m.left,right:C.right-k.right+m.right};var S=e.modifiersData.offset;if(u===js&&S){var Y=S[r];Object.keys(M).forEach((function(e){var t=[Rs,Bs].indexOf(e)>=0?1:-1;var i=[As,Bs].indexOf(e)>=0?"y":"x";M[e]+=Y[i]*t}))}return M}function hc(e,t){if(t===void 0){t={}}var i=t,a=i.placement,r=i.boundary,o=i.rootBoundary,n=i.padding,s=i.flipVariations,l=i.allowedAutoPlacements,c=l===void 0?qs:l;var d=Nl(a);var h=d?s?Gs:Gs.filter((function(e){return Nl(e)===d})):Ls;var u=h.filter((function(e){return c.indexOf(e)>=0}));if(u.length===0){u=h}var p=u.reduce((function(t,i){t[i]=dc(e,{placement:i,boundary:r,rootBoundary:o,padding:n})[ul(i)];return t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}function uc(e){if(ul(e)===Ns){return[]}var t=Kl(e);return[Xl(e),t,Xl(t)]}function pc(e){var t=e.state,i=e.options,a=e.name;if(t.modifiersData[a]._skip){return}var r=i.mainAxis,o=r===void 0?true:r,n=i.altAxis,s=n===void 0?true:n,l=i.fallbackPlacements,c=i.padding,d=i.boundary,h=i.rootBoundary,u=i.altBoundary,p=i.flipVariations,f=p===void 0?true:p,b=i.allowedAutoPlacements;var g=t.options.placement;var m=ul(g);var w=m===g;var y=l||(w||!f?[Kl(g)]:uc(g));var v=[g].concat(y).reduce((function(e,i){return e.concat(ul(i)===Ns?hc(t,{placement:i,boundary:d,rootBoundary:h,padding:c,flipVariations:f,allowedAutoPlacements:b}):i)}),[]);var k=t.rects.reference;var x=t.rects.popper;var _=new Map;var D=true;var C=v[0];for(var M=0;M<v.length;M++){var S=v[M];var Y=ul(S);var E=Nl(S)===$s;var T=[As,Bs].indexOf(Y)>=0;var I=T?"width":"height";var z=dc(t,{placement:S,boundary:d,rootBoundary:h,altBoundary:u,padding:c});var O=T?E?Rs:Ps:E?Bs:As;if(k[I]>x[I]){O=Kl(O)}var A=Kl(O);var B=[];if(o){B.push(z[Y]<=0)}if(s){B.push(z[O]<=0,z[A]<=0)}if(B.every((function(e){return e}))){C=S;D=false;break}_.set(S,B)}if(D){var R=f?3:1;var P=function e(t){var i=v.find((function(e){var i=_.get(e);if(i){return i.slice(0,t).every((function(e){return e}))}}));if(i){C=i;return"break"}};for(var N=R;N>0;N--){var L=P(N);if(L==="break")break}}if(t.placement!==C){t.modifiersData[a]._skip=true;t.placement=C;t.reset=true}}const fc={name:"flip",enabled:true,phase:"main",fn:pc,requiresIfExists:["offset"],data:{_skip:false}};function bc(e,t,i){if(i===void 0){i={x:0,y:0}}return{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function gc(e){return[As,Rs,Bs,Ps].some((function(t){return e[t]>=0}))}function mc(e){var t=e.state,i=e.name;var a=t.rects.reference;var r=t.rects.popper;var o=t.modifiersData.preventOverflow;var n=dc(t,{elementContext:"reference"});var s=dc(t,{altBoundary:true});var l=bc(n,a);var c=bc(s,r,o);var d=gc(l);var h=gc(c);t.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:h};t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":h})}const wc={name:"hide",enabled:true,phase:"main",requiresIfExists:["preventOverflow"],fn:mc};function yc(e,t,i){var a=ul(e);var r=[Ps,As].indexOf(a)>=0?-1:1;var o=typeof i==="function"?i(Object.assign({},t,{placement:e})):i,n=o[0],s=o[1];n=n||0;s=(s||0)*r;return[Ps,Rs].indexOf(a)>=0?{x:s,y:n}:{x:n,y:s}}function vc(e){var t=e.state,i=e.options,a=e.name;var r=i.offset,o=r===void 0?[0,0]:r;var n=qs.reduce((function(e,i){e[i]=yc(i,t.rects,o);return e}),{});var s=n[t.placement],l=s.x,c=s.y;if(t.modifiersData.popperOffsets!=null){t.modifiersData.popperOffsets.x+=l;t.modifiersData.popperOffsets.y+=c}t.modifiersData[a]=n}const kc={name:"offset",enabled:true,phase:"main",requires:["popperOffsets"],fn:vc};function xc(e){var t=e.state,i=e.name;t.modifiersData[i]=cc({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const _c={name:"popperOffsets",enabled:true,phase:"read",fn:xc,data:{}};function Dc(e){return e==="x"?"y":"x"}function Cc(e){var t=e.state,i=e.options,a=e.name;var r=i.mainAxis,o=r===void 0?true:r,n=i.altAxis,s=n===void 0?false:n,l=i.boundary,c=i.rootBoundary,d=i.altBoundary,h=i.padding,u=i.tether,p=u===void 0?true:u,f=i.tetherOffset,b=f===void 0?0:f;var g=dc(t,{boundary:l,rootBoundary:c,padding:h,altBoundary:d});var m=ul(t.placement);var w=Nl(t.placement);var y=!w;var v=Yl(m);var k=Dc(v);var x=t.modifiersData.popperOffsets;var _=t.rects.reference;var D=t.rects.popper;var C=typeof b==="function"?b(Object.assign({},t.rects,{placement:t.placement})):b;var M=typeof C==="number"?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C);var S=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null;var Y={x:0,y:0};if(!x){return}if(o){var E;var T=v==="y"?As:Ps;var I=v==="y"?Bs:Rs;var z=v==="y"?"height":"width";var O=x[v];var A=O+g[T];var B=O-g[I];var R=p?-D[z]/2:0;var P=w===$s?_[z]:D[z];var N=w===$s?-D[z]:-_[z];var L=t.elements.arrow;var $=p&&L?yl(L):{width:0,height:0};var F=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Il();var H=F[T];var U=F[I];var j=El(0,_[z],$[z]);var V=y?_[z]/2-R-j-H-M.mainAxis:P-j-H-M.mainAxis;var G=y?-_[z]/2+R+j+U+M.mainAxis:N+j+U+M.mainAxis;var q=t.elements.arrow&&Sl(t.elements.arrow);var K=q?v==="y"?q.clientTop||0:q.clientLeft||0:0;var W=(E=S==null?void 0:S[v])!=null?E:0;var X=O+V-W-K;var J=O+G-W;var Q=El(p?fl(A,X):A,O,p?pl(B,J):B);x[v]=Q;Y[v]=Q-O}if(s){var Z;var ee=v==="x"?As:Ps;var te=v==="x"?Bs:Rs;var ie=x[k];var ae=k==="y"?"height":"width";var re=ie+g[ee];var oe=ie-g[te];var ne=[As,Ps].indexOf(m)!==-1;var se=(Z=S==null?void 0:S[k])!=null?Z:0;var le=ne?re:ie-_[ae]-D[ae]-se+M.altAxis;var ce=ne?ie+_[ae]+D[ae]-se-M.altAxis:oe;var de=p&&ne?Tl(le,ie,ce):El(p?le:re,ie,p?ce:oe);x[k]=de;Y[k]=de-ie}t.modifiersData[a]=Y}const Mc={name:"preventOverflow",enabled:true,phase:"main",fn:Cc,requiresIfExists:["offset"]};function Sc(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Yc(e){if(e===ol(e)||!sl(e)){return Jl(e)}else{return Sc(e)}}function Ec(e){var t=e.getBoundingClientRect();var i=bl(t.width)/e.offsetWidth||1;var a=bl(t.height)/e.offsetHeight||1;return i!==1||a!==1}function Tc(e,t,i){if(i===void 0){i=false}var a=sl(t);var r=sl(t)&&Ec(t);var o=_l(t);var n=wl(e,r,i);var s={scrollLeft:0,scrollTop:0};var l={x:0,y:0};if(a||!a&&!i){if(rl(t)!=="body"||tc(o)){s=Yc(t)}if(sl(t)){l=wl(t,true);l.x+=t.clientLeft;l.y+=t.clientTop}else if(o){l.x=Ql(o)}}return{x:n.left+s.scrollLeft-l.x,y:n.top+s.scrollTop-l.y,width:n.width,height:n.height}}function Ic(e){var t=new Map;var i=new Set;var a=[];e.forEach((function(e){t.set(e.name,e)}));function r(e){i.add(e.name);var o=[].concat(e.requires||[],e.requiresIfExists||[]);o.forEach((function(e){if(!i.has(e)){var a=t.get(e);if(a){r(a)}}}));a.push(e)}e.forEach((function(e){if(!i.has(e.name)){r(e)}}));return a}function zc(e){var t=Ic(e);return al.reduce((function(e,i){return e.concat(t.filter((function(e){return e.phase===i})))}),[])}function Oc(e){var t;return function(){if(!t){t=new Promise((function(i){Promise.resolve().then((function(){t=undefined;i(e())}))}))}return t}}function Ac(e){var t=e.reduce((function(e,t){var i=e[t.name];e[t.name]=i?Object.assign({},i,t,{options:Object.assign({},i.options,t.options),data:Object.assign({},i.data,t.data)}):t;return e}),{});return Object.keys(t).map((function(e){return t[e]}))}var Bc={placement:"bottom",modifiers:[],strategy:"absolute"};function Rc(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++){t[i]=arguments[i]}return!t.some((function(e){return!(e&&typeof e.getBoundingClientRect==="function")}))}function Pc(e){if(e===void 0){e={}}var t=e,i=t.defaultModifiers,a=i===void 0?[]:i,r=t.defaultOptions,o=r===void 0?Bc:r;return function e(t,i,r){if(r===void 0){r=o}var n={placement:"bottom",orderedModifiers:[],options:Object.assign({},Bc,o),modifiersData:{},elements:{reference:t,popper:i},attributes:{},styles:{}};var s=[];var l=false;var c={state:n,setOptions:function e(r){var s=typeof r==="function"?r(n.options):r;h();n.options=Object.assign({},o,n.options,s);n.scrollParents={reference:nl(t)?ac(t):t.contextElement?ac(t.contextElement):[],popper:ac(i)};var l=zc(Ac([].concat(a,n.options.modifiers)));n.orderedModifiers=l.filter((function(e){return e.enabled}));d();return c.update()},forceUpdate:function e(){if(l){return}var t=n.elements,i=t.reference,a=t.popper;if(!Rc(i,a)){return}n.rects={reference:Tc(i,Sl(a),n.options.strategy==="fixed"),popper:yl(a)};n.reset=false;n.placement=n.options.placement;n.orderedModifiers.forEach((function(e){return n.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<n.orderedModifiers.length;r++){if(n.reset===true){n.reset=false;r=-1;continue}var o=n.orderedModifiers[r],s=o.fn,d=o.options,h=d===void 0?{}:d,u=o.name;if(typeof s==="function"){n=s({state:n,options:h,name:u,instance:c})||n}}},update:Oc((function(){return new Promise((function(e){c.forceUpdate();e(n)}))})),destroy:function e(){h();l=true}};if(!Rc(t,i)){return c}c.setOptions(r).then((function(e){if(!l&&r.onFirstUpdate){r.onFirstUpdate(e)}}));function d(){n.orderedModifiers.forEach((function(e){var t=e.name,i=e.options,a=i===void 0?{}:i,r=e.effect;if(typeof r==="function"){var o=r({state:n,name:t,instance:c,options:a});var l=function e(){};s.push(o||l)}}))}function h(){s.forEach((function(e){return e()}));s=[]}return c}}var Nc=[Gl,_c,Ul,hl,kc,fc,Mc,Pl,wc];var Lc=Pc({defaultModifiers:Nc});const $c='.air-datepicker-cell.-year-.-other-decade-,.air-datepicker-cell.-day-.-other-month-{color:var(--adp-color-other-month)}.air-datepicker-cell.-year-.-other-decade-:hover,.air-datepicker-cell.-day-.-other-month-:hover{color:var(--adp-color-other-month-hover)}.-disabled-.-focus-.air-datepicker-cell.-year-.-other-decade-,.-disabled-.-focus-.air-datepicker-cell.-day-.-other-month-{color:var(--adp-color-other-month)}.-selected-.air-datepicker-cell.-year-.-other-decade-,.-selected-.air-datepicker-cell.-day-.-other-month-{color:#fff;background:var(--adp-background-color-selected-other-month)}.-selected-.-focus-.air-datepicker-cell.-year-.-other-decade-,.-selected-.-focus-.air-datepicker-cell.-day-.-other-month-{background:var(--adp-background-color-selected-other-month-focused)}.-in-range-.air-datepicker-cell.-year-.-other-decade-,.-in-range-.air-datepicker-cell.-day-.-other-month-{background-color:var(--adp-background-color-in-range);color:var(--adp-color)}.-in-range-.-focus-.air-datepicker-cell.-year-.-other-decade-,.-in-range-.-focus-.air-datepicker-cell.-day-.-other-month-{background-color:var(--adp-background-color-in-range-focused)}.air-datepicker-cell.-year-.-other-decade-:empty,.air-datepicker-cell.-day-.-other-month-:empty{background:none;border:none}.air-datepicker-cell{border-radius:var(--adp-cell-border-radius);box-sizing:border-box;cursor:pointer;display:flex;position:relative;align-items:center;justify-content:center;z-index:1}.air-datepicker-cell.-focus-{background:var(--adp-cell-background-color-hover)}.air-datepicker-cell.-current-{color:var(--adp-color-current-date)}.air-datepicker-cell.-current-.-focus-{color:var(--adp-color)}.air-datepicker-cell.-current-.-in-range-{color:var(--adp-color-current-date)}.air-datepicker-cell.-disabled-{cursor:default;color:var(--adp-color-disabled)}.air-datepicker-cell.-disabled-.-focus-{color:var(--adp-color-disabled)}.air-datepicker-cell.-disabled-.-in-range-{color:var(--adp-color-disabled-in-range)}.air-datepicker-cell.-disabled-.-current-.-focus-{color:var(--adp-color-disabled)}.air-datepicker-cell.-in-range-{background:var(--adp-cell-background-color-in-range);border-radius:0}.air-datepicker-cell.-in-range-:hover,.air-datepicker-cell.-in-range-.-focus-{background:var(--adp-cell-background-color-in-range-hover)}.air-datepicker-cell.-range-from-{border:1px solid var(--adp-cell-border-color-in-range);background-color:var(--adp-cell-background-color-in-range);border-radius:var(--adp-cell-border-radius) 0 0 var(--adp-cell-border-radius)}.air-datepicker-cell.-range-to-{border:1px solid var(--adp-cell-border-color-in-range);background-color:var(--adp-cell-background-color-in-range);border-radius:0 var(--adp-cell-border-radius) var(--adp-cell-border-radius) 0}.air-datepicker-cell.-range-to-.-range-from-{border-radius:var(--adp-cell-border-radius)}.air-datepicker-cell.-selected-{color:#fff;border:none;background:var(--adp-cell-background-color-selected)}.air-datepicker-cell.-selected-.-current-{color:#fff;background:var(--adp-cell-background-color-selected)}.air-datepicker-cell.-selected-.-focus-{background:var(--adp-cell-background-color-selected-hover)}.air-datepicker-body{transition:all var(--adp-transition-duration) var(--adp-transition-ease)}.air-datepicker-body.-hidden-{display:none}.air-datepicker-body--day-names{display:grid;grid-template-columns:repeat(7, var(--adp-day-cell-width));margin:8px 0 3px}.air-datepicker-body--day-name{color:var(--adp-day-name-color);display:flex;align-items:center;justify-content:center;flex:1;text-align:center;text-transform:uppercase;font-size:.8em}.air-datepicker-body--day-name.-clickable-{cursor:pointer}.air-datepicker-body--day-name.-clickable-:hover{color:var(--adp-day-name-color-hover)}.air-datepicker-body--cells{display:grid}.air-datepicker-body--cells.-days-{grid-template-columns:repeat(7, var(--adp-day-cell-width));grid-auto-rows:var(--adp-day-cell-height)}.air-datepicker-body--cells.-months-{grid-template-columns:repeat(3, 1fr);grid-auto-rows:var(--adp-month-cell-height)}.air-datepicker-body--cells.-years-{grid-template-columns:repeat(4, 1fr);grid-auto-rows:var(--adp-year-cell-height)}.air-datepicker-nav{display:flex;justify-content:space-between;border-bottom:1px solid var(--adp-border-color-inner);min-height:var(--adp-nav-height);padding:var(--adp-padding);box-sizing:content-box}.-only-timepicker- .air-datepicker-nav{display:none}.air-datepicker-nav--title,.air-datepicker-nav--action{display:flex;cursor:pointer;align-items:center;justify-content:center}.air-datepicker-nav--action{width:var(--adp-nav-action-size);border-radius:var(--adp-border-radius);-webkit-user-select:none;-moz-user-select:none;user-select:none}.air-datepicker-nav--action:hover{background:var(--adp-background-color-hover)}.air-datepicker-nav--action:active{background:var(--adp-background-color-active)}.air-datepicker-nav--action.-disabled-{visibility:hidden}.air-datepicker-nav--action svg{width:32px;height:32px}.air-datepicker-nav--action path{fill:none;stroke:var(--adp-nav-arrow-color);stroke-width:2px}.air-datepicker-nav--title{border-radius:var(--adp-border-radius);padding:0 8px}.air-datepicker-nav--title i{font-style:normal;color:var(--adp-nav-color-secondary);margin-left:.3em}.air-datepicker-nav--title:hover{background:var(--adp-background-color-hover)}.air-datepicker-nav--title:active{background:var(--adp-background-color-active)}.air-datepicker-nav--title.-disabled-{cursor:default;background:none}.air-datepicker-buttons{display:grid;grid-auto-columns:1fr;grid-auto-flow:column}.air-datepicker-button{display:inline-flex;color:var(--adp-btn-color);border-radius:var(--adp-btn-border-radius);cursor:pointer;height:var(--adp-btn-height);border:none;background:rgba(255,255,255,0)}.air-datepicker-button:hover{color:var(--adp-btn-color-hover);background:var(--adp-btn-background-color-hover)}.air-datepicker-button:focus{color:var(--adp-btn-color-hover);background:var(--adp-btn-background-color-hover);outline:none}.air-datepicker-button:active{background:var(--adp-btn-background-color-active)}.air-datepicker-button span{outline:none;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.air-datepicker-time{display:grid;grid-template-columns:max-content 1fr;grid-column-gap:12px;align-items:center;position:relative;padding:0 var(--adp-time-padding-inner)}.-only-timepicker- .air-datepicker-time{border-top:none}.air-datepicker-time--current{display:flex;align-items:center;flex:1;font-size:14px;text-align:center}.air-datepicker-time--current-colon{margin:0 2px 3px;line-height:1}.air-datepicker-time--current-hours,.air-datepicker-time--current-minutes{line-height:1;font-size:19px;font-family:"Century Gothic",CenturyGothic,AppleGothic,sans-serif;position:relative;z-index:1}.air-datepicker-time--current-hours:after,.air-datepicker-time--current-minutes:after{content:"";background:var(--adp-background-color-hover);border-radius:var(--adp-border-radius);position:absolute;left:-2px;top:-3px;right:-2px;bottom:-2px;z-index:-1;opacity:0}.air-datepicker-time--current-hours.-focus-:after,.air-datepicker-time--current-minutes.-focus-:after{opacity:1}.air-datepicker-time--current-ampm{text-transform:uppercase;align-self:flex-end;color:var(--adp-time-day-period-color);margin-left:6px;font-size:11px;margin-bottom:1px}.air-datepicker-time--row{display:flex;align-items:center;font-size:11px;height:17px;background:linear-gradient(to right, var(--adp-time-track-color), var(--adp-time-track-color)) left 50%/100% var(--adp-time-track-height) no-repeat}.air-datepicker-time--row:first-child{margin-bottom:4px}.air-datepicker-time--row input[type=range]{background:none;cursor:pointer;flex:1;height:100%;width:100%;padding:0;margin:0;-webkit-appearance:none}.air-datepicker-time--row input[type=range]::-webkit-slider-thumb{-webkit-appearance:none}.air-datepicker-time--row input[type=range]::-ms-tooltip{display:none}.air-datepicker-time--row input[type=range]:hover::-webkit-slider-thumb{border-color:var(--adp-time-track-color-hover)}.air-datepicker-time--row input[type=range]:hover::-moz-range-thumb{border-color:var(--adp-time-track-color-hover)}.air-datepicker-time--row input[type=range]:hover::-ms-thumb{border-color:var(--adp-time-track-color-hover)}.air-datepicker-time--row input[type=range]:focus{outline:none}.air-datepicker-time--row input[type=range]:focus::-webkit-slider-thumb{background:var(--adp-cell-background-color-selected);border-color:var(--adp-cell-background-color-selected)}.air-datepicker-time--row input[type=range]:focus::-moz-range-thumb{background:var(--adp-cell-background-color-selected);border-color:var(--adp-cell-background-color-selected)}.air-datepicker-time--row input[type=range]:focus::-ms-thumb{background:var(--adp-cell-background-color-selected);border-color:var(--adp-cell-background-color-selected)}.air-datepicker-time--row input[type=range]::-webkit-slider-thumb{box-sizing:border-box;height:12px;width:12px;border-radius:3px;border:1px solid var(--adp-time-track-color);background:#fff;cursor:pointer;-webkit-transition:background var(--adp-transition-duration);transition:background var(--adp-transition-duration)}.air-datepicker-time--row input[type=range]::-moz-range-thumb{box-sizing:border-box;height:12px;width:12px;border-radius:3px;border:1px solid var(--adp-time-track-color);background:#fff;cursor:pointer;-moz-transition:background var(--adp-transition-duration);transition:background var(--adp-transition-duration)}.air-datepicker-time--row input[type=range]::-ms-thumb{box-sizing:border-box;height:12px;width:12px;border-radius:3px;border:1px solid var(--adp-time-track-color);background:#fff;cursor:pointer;-ms-transition:background var(--adp-transition-duration);transition:background var(--adp-transition-duration)}.air-datepicker-time--row input[type=range]::-webkit-slider-thumb{margin-top:calc(var(--adp-time-thumb-size)/2*-1)}.air-datepicker-time--row input[type=range]::-webkit-slider-runnable-track{border:none;height:var(--adp-time-track-height);cursor:pointer;color:rgba(0,0,0,0);background:rgba(0,0,0,0)}.air-datepicker-time--row input[type=range]::-moz-range-track{border:none;height:var(--adp-time-track-height);cursor:pointer;color:rgba(0,0,0,0);background:rgba(0,0,0,0)}.air-datepicker-time--row input[type=range]::-ms-track{border:none;height:var(--adp-time-track-height);cursor:pointer;color:rgba(0,0,0,0);background:rgba(0,0,0,0)}.air-datepicker-time--row input[type=range]::-ms-fill-lower{background:rgba(0,0,0,0)}.air-datepicker-time--row input[type=range]::-ms-fill-upper{background:rgba(0,0,0,0)}.air-datepicker{--adp-font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";--adp-font-size:14px;--adp-width:246px;--adp-z-index:100;--adp-padding:4px;--adp-grid-areas:"nav" "body" "timepicker" "buttons";--adp-transition-duration:.3s;--adp-transition-ease:ease-out;--adp-transition-offset:8px;--adp-background-color:#fff;--adp-background-color-hover:#f0f0f0;--adp-background-color-active:#eaeaea;--adp-background-color-in-range:rgba(92, 196, 239, .1);--adp-background-color-in-range-focused:rgba(92, 196, 239, .2);--adp-background-color-selected-other-month-focused:#8ad5f4;--adp-background-color-selected-other-month:#a2ddf6;--adp-color:#4a4a4a;--adp-color-secondary:#9c9c9c;--adp-accent-color:#4eb5e6;--adp-color-current-date:var(--adp-accent-color);--adp-color-other-month:#dedede;--adp-color-disabled:#aeaeae;--adp-color-disabled-in-range:#939393;--adp-color-other-month-hover:#c5c5c5;--adp-border-color:#dbdbdb;--adp-border-color-inner:#efefef;--adp-border-radius:4px;--adp-border-color-inline:#d7d7d7;--adp-nav-height:32px;--adp-nav-arrow-color:var(--adp-color-secondary);--adp-nav-action-size:32px;--adp-nav-color-secondary:var(--adp-color-secondary);--adp-day-name-color:#ff9a19;--adp-day-name-color-hover:#8ad5f4;--adp-day-cell-width:1fr;--adp-day-cell-height:32px;--adp-month-cell-height:42px;--adp-year-cell-height:56px;--adp-pointer-size:10px;--adp-poiner-border-radius:2px;--adp-pointer-offset:14px;--adp-cell-border-radius:4px;--adp-cell-background-color-hover:var(--adp-background-color-hover);--adp-cell-background-color-selected:#5cc4ef;--adp-cell-background-color-selected-hover:#45bced;--adp-cell-background-color-in-range:rgba(92, 196, 239, 0.1);--adp-cell-background-color-in-range-hover:rgba(92, 196, 239, 0.2);--adp-cell-border-color-in-range:var(--adp-cell-background-color-selected);--adp-btn-height:32px;--adp-btn-color:var(--adp-accent-color);--adp-btn-color-hover:var(--adp-color);--adp-btn-border-radius:var(--adp-border-radius);--adp-btn-background-color-hover:var(--adp-background-color-hover);--adp-btn-background-color-active:var(--adp-background-color-active);--adp-time-track-height:1px;--adp-time-track-color:#dedede;--adp-time-track-color-hover:#b1b1b1;--adp-time-thumb-size:12px;--adp-time-padding-inner:10px;--adp-time-day-period-color:var(--adp-color-secondary);--adp-mobile-font-size:16px;--adp-mobile-nav-height:40px;--adp-mobile-width:320px;--adp-mobile-day-cell-height:38px;--adp-mobile-month-cell-height:48px;--adp-mobile-year-cell-height:64px}.air-datepicker-overlay{--adp-overlay-background-color:rgba(0, 0, 0, .3);--adp-overlay-transition-duration:.3s;--adp-overlay-transition-ease:ease-out;--adp-overlay-z-index:99}.air-datepicker{background:var(--adp-background-color);border:1px solid var(--adp-border-color);box-shadow:0 4px 12px rgba(0,0,0,.15);border-radius:var(--adp-border-radius);box-sizing:content-box;display:grid;grid-template-columns:1fr;grid-template-rows:repeat(4, max-content);grid-template-areas:var(--adp-grid-areas);font-family:var(--adp-font-family),sans-serif;font-size:var(--adp-font-size);color:var(--adp-color);width:var(--adp-width);position:absolute;transition:opacity var(--adp-transition-duration) var(--adp-transition-ease),transform var(--adp-transition-duration) var(--adp-transition-ease);z-index:var(--adp-z-index)}.air-datepicker:not(.-custom-position-){opacity:0}.air-datepicker.-from-top-{transform:translateY(calc(var(--adp-transition-offset) * -1))}.air-datepicker.-from-right-{transform:translateX(var(--adp-transition-offset))}.air-datepicker.-from-bottom-{transform:translateY(var(--adp-transition-offset))}.air-datepicker.-from-left-{transform:translateX(calc(var(--adp-transition-offset) * -1))}.air-datepicker.-active-:not(.-custom-position-){transform:translate(0, 0);opacity:1}.air-datepicker.-active-.-custom-position-{transition:none}.air-datepicker.-inline-{border-color:var(--adp-border-color-inline);box-shadow:none;position:static;left:auto;right:auto;opacity:1;transform:none}.air-datepicker.-inline- .air-datepicker--pointer{display:none}.air-datepicker.-is-mobile-{--adp-font-size:var(--adp-mobile-font-size);--adp-day-cell-height:var(--adp-mobile-day-cell-height);--adp-month-cell-height:var(--adp-mobile-month-cell-height);--adp-year-cell-height:var(--adp-mobile-year-cell-height);--adp-nav-height:var(--adp-mobile-nav-height);--adp-nav-action-size:var(--adp-mobile-nav-height);position:fixed;width:var(--adp-mobile-width);border:none}.air-datepicker.-is-mobile- *{-webkit-tap-highlight-color:rgba(0,0,0,0)}.air-datepicker.-is-mobile- .air-datepicker--pointer{display:none}.air-datepicker.-is-mobile-:not(.-custom-position-){transform:translate(-50%, calc(-50% + var(--adp-transition-offset)))}.air-datepicker.-is-mobile-.-active-:not(.-custom-position-){transform:translate(-50%, -50%)}.air-datepicker.-custom-position-{transition:none}.air-datepicker-global-container{position:absolute;left:0;top:0}.air-datepicker--pointer{--pointer-half-size:calc(var(--adp-pointer-size) / 2);position:absolute;width:var(--adp-pointer-size);height:var(--adp-pointer-size);z-index:-1}.air-datepicker--pointer:after{content:"";position:absolute;background:#fff;border-top:1px solid var(--adp-border-color-inline);border-right:1px solid var(--adp-border-color-inline);border-top-right-radius:var(--adp-poiner-border-radius);width:var(--adp-pointer-size);height:var(--adp-pointer-size);box-sizing:border-box}.-top-left- .air-datepicker--pointer,.-top-center- .air-datepicker--pointer,.-top-right- .air-datepicker--pointer,[data-popper-placement^=top] .air-datepicker--pointer{top:calc(100% - var(--pointer-half-size) + 1px)}.-top-left- .air-datepicker--pointer:after,.-top-center- .air-datepicker--pointer:after,.-top-right- .air-datepicker--pointer:after,[data-popper-placement^=top] .air-datepicker--pointer:after{transform:rotate(135deg)}.-right-top- .air-datepicker--pointer,.-right-center- .air-datepicker--pointer,.-right-bottom- .air-datepicker--pointer,[data-popper-placement^=right] .air-datepicker--pointer{right:calc(100% - var(--pointer-half-size) + 1px)}.-right-top- .air-datepicker--pointer:after,.-right-center- .air-datepicker--pointer:after,.-right-bottom- .air-datepicker--pointer:after,[data-popper-placement^=right] .air-datepicker--pointer:after{transform:rotate(225deg)}.-bottom-left- .air-datepicker--pointer,.-bottom-center- .air-datepicker--pointer,.-bottom-right- .air-datepicker--pointer,[data-popper-placement^=bottom] .air-datepicker--pointer{bottom:calc(100% - var(--pointer-half-size) + 1px)}.-bottom-left- .air-datepicker--pointer:after,.-bottom-center- .air-datepicker--pointer:after,.-bottom-right- .air-datepicker--pointer:after,[data-popper-placement^=bottom] .air-datepicker--pointer:after{transform:rotate(315deg)}.-left-top- .air-datepicker--pointer,.-left-center- .air-datepicker--pointer,.-left-bottom- .air-datepicker--pointer,[data-popper-placement^=left] .air-datepicker--pointer{left:calc(100% - var(--pointer-half-size) + 1px)}.-left-top- .air-datepicker--pointer:after,.-left-center- .air-datepicker--pointer:after,.-left-bottom- .air-datepicker--pointer:after,[data-popper-placement^=left] .air-datepicker--pointer:after{transform:rotate(45deg)}.-top-left- .air-datepicker--pointer,.-bottom-left- .air-datepicker--pointer{left:var(--adp-pointer-offset)}.-top-right- .air-datepicker--pointer,.-bottom-right- .air-datepicker--pointer{right:var(--adp-pointer-offset)}.-top-center- .air-datepicker--pointer,.-bottom-center- .air-datepicker--pointer{left:calc(50% - var(--adp-pointer-size)/2)}.-left-top- .air-datepicker--pointer,.-right-top- .air-datepicker--pointer{top:var(--adp-pointer-offset)}.-left-bottom- .air-datepicker--pointer,.-right-bottom- .air-datepicker--pointer{bottom:var(--adp-pointer-offset)}.-left-center- .air-datepicker--pointer,.-right-center- .air-datepicker--pointer{top:calc(50% - var(--adp-pointer-size)/2)}.air-datepicker--navigation{grid-area:nav}.air-datepicker--content{box-sizing:content-box;padding:var(--adp-padding);grid-area:body}.-only-timepicker- .air-datepicker--content{display:none}.air-datepicker--time{grid-area:timepicker}.air-datepicker--buttons{grid-area:buttons}.air-datepicker--buttons,.air-datepicker--time{padding:var(--adp-padding);border-top:1px solid var(--adp-border-color-inner)}.air-datepicker-overlay{position:fixed;background:var(--adp-overlay-background-color);left:0;top:0;width:0;height:0;opacity:0;transition:opacity var(--adp-overlay-transition-duration) var(--adp-overlay-transition-ease),left 0s,height 0s,width 0s;transition-delay:0s,var(--adp-overlay-transition-duration),var(--adp-overlay-transition-duration),var(--adp-overlay-transition-duration);z-index:var(--adp-overlay-z-index)}.air-datepicker-overlay.-active-{opacity:1;width:100%;height:100%;transition:opacity var(--adp-overlay-transition-duration) var(--adp-overlay-transition-ease),height 0s,width 0s}:host{display:block}.air-datepicker{font-size:auto}.air-datepicker-body--day-name{color:#000;font-weight:700}.air-datepicker-cell.-selected-,.air-datepicker-cell.-selected-.-focus-,.air-datepicker-cell.-selected-.-current-{background:#1e9ff2}.air-datepicker-cell.-disabled-{text-decoration:line-through}.air-datepicker-cell.-current-{color:#1e9ff2}.ir-date-picker-trigger{position:relative;box-sizing:border-box;width:fit-content;height:fit-content}.ir-date-picker-element{position:absolute;inset:0;opacity:0;cursor:pointer}';const Fc=$c;const Hc=class{constructor(t){e(this,t);this.dateChanged=a(this,"dateChanged",7);this.datePickerFocus=a(this,"datePickerFocus",7);this.datePickerBlur=a(this,"datePickerBlur",7)}get el(){return o(this)}inline=false;date=null;multipleDates=false;range=false;dateFormat="yyyy-MM-dd";timepicker=false;minDate;maxDate;disabled=false;autoClose=true;showOtherMonths=true;selectOtherMonths=true;customPicker=true;container;forceDestroyOnUpdate=false;emitEmptyDate=false;triggerContainerStyle="";currentDate=null;dateChanged;datePickerFocus;datePickerBlur;pickerRef;datePicker;openDatePickerTimeout;triggerSlot=null;componentWillLoad(){if(this.date){this.currentDate=this.toValidDate(this.date)}}componentDidLoad(){this.initializeDatepicker();this.setupTriggerFocusHandling()}setupTriggerFocusHandling(){if(!this.customPicker)return;const e=this.el.querySelector('[slot="trigger"]');if(!e)return;this.triggerSlot=e;this.triggerSlot.addEventListener("focus",this.handleTriggerFocus.bind(this));this.triggerSlot.addEventListener("click",this.handleTriggerClick.bind(this))}handleTriggerFocus(){if(this.disabled)return;this.openDatePicker()}handleTriggerClick(e){if(this.disabled)return;e.preventDefault();this.openDatePicker()}datePropChanged(e,t){if(this.isSameDates(e,t)){return}this.updatePickerDate(e)}minDatePropChanged(e,t){if(!this.datePicker){return}if(!this.isSameDates(e,t)){this.datePicker?.update({minDate:this.toValidDate(e)})}}maxDatePropChanged(e,t){if(!this.isSameDates(e,t)){this.datePicker?.update({maxDate:this.toValidDate(e)})}}async openDatePicker(){this.openDatePickerTimeout=setTimeout((()=>{this.pickerRef.focus()}),20)}async clearDatePicker(){this.datePicker?.clear()}isSameDates(e,t){if(!e&&!t)return true;if(!e||!t)return false;return fe(e).isSame(fe(t),"day")}toValidDate(e){if(!e)return null;const t=new Date(e);return isNaN(t.getTime())?null:t}updatePickerDate(e){const t=this.toValidDate(e);if(!t){this.datePicker?.clear();this.currentDate=null;return}if(!this.isSameDates(this.currentDate,t)){this.currentDate=t;if(this.forceDestroyOnUpdate){this.datePicker.destroy();this.datePicker=null;this.initializeDatepicker()}else{this.datePicker?.selectDate(t)}}}initializeDatepicker(){if(this.datePicker)return;this.datePicker=new gs(this.pickerRef,{container:this.container,inline:this.inline,selectedDates:this.date?[this.date]:[],multipleDates:this.multipleDates,range:this.range,dateFormat:this.dateFormat,timepicker:this.timepicker,minDate:this.minDate,maxDate:this.maxDate,autoClose:this.autoClose,locale:ws,showOtherMonths:this.showOtherMonths,selectOtherMonths:this.selectOtherMonths,onHide:()=>{this.datePickerBlur.emit()},onShow:()=>{this.datePickerFocus.emit()},onSelect:({date:e})=>{if(!e||!(e instanceof Date)){if(this.emitEmptyDate){this.dateChanged.emit({start:null,end:null})}return}this.currentDate=e;this.date=e;this.dateChanged.emit({start:fe(e),end:fe(e)})},position({$datepicker:e,$target:t,$pointer:i,done:a}){let r=Lc(t,e,{placement:"top",modifiers:[{name:"flip",options:{padding:{top:0}}},{name:"offset",options:{offset:[0,10]}},{name:"arrow",options:{element:i}}]});return function e(){r.destroy();a()}}});this.datePicker.$datepicker.style.height="280px";this.datePicker.$datepicker?.classList.add("ir-custom-date-picker__calendar");this.datePicker.$datepicker.style.setProperty("--adp-cell-background-color-selected","var(--wa-color-brand-50)");this.datePicker.$datepicker.style.setProperty("--adp-cell-background-color-selected-hover","var(--wa-color-brand-50)");this.datePicker.$datepicker.style.setProperty("--adp-accent-color","var(--wa-color-brand-50)");this.datePicker.$datepicker.style.setProperty("--adp-day-name-color","lab(48.496% 0 0)")}disconnectedCallback(){if(this.openDatePickerTimeout){clearTimeout(this.openDatePickerTimeout)}if(this.triggerSlot){this.triggerSlot.removeEventListener("focus",this.handleTriggerFocus);this.triggerSlot.removeEventListener("click",this.handleTriggerClick)}this.datePicker?.destroy?.()}render(){return t("div",{key:"3fe327d0ede4bec61c895dba413f6652a22ab23b",class:`ir-date-picker-trigger ${this.triggerContainerStyle}`},this.customPicker&&t("slot",{key:"cd65113f9982fe6c1f303269a9dff3ddf4456539",name:"trigger"}),t("input",{key:"0ebf9413fe048088ac801a1d24786f2b00a41018",type:"text",disabled:this.disabled,class:this.customPicker?"ir-date-picker-element":"form-control input-sm",ref:e=>this.pickerRef=e}))}static get watchers(){return{date:["datePropChanged"],minDate:["minDatePropChanged"],maxDate:["maxDatePropChanged"]}}};Hc.style=Fc;const Uc=".sc-ir-date-range-h{display:block;width:100%}.date-range-input.sc-ir-date-range{width:100%}";const jc=Uc;const Vc=class{constructor(t){e(this,t);this.dateChanged=a(this,"dateChanged",7)}get element(){return o(this)}fromDate;toDate;date;opens;autoApply;firstDay=1;monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];daysOfWeek=["Su","Mo","Tu","We","Th","Fr","Sa"];format="MMM DD, YYYY";separator=" - ";applyLabel="Apply";cancelLabel="Cancel";fromLabel="Form";toLabel="To";customRangeLabel="Custom";weekLabel="W";disabled=false;singleDatePicker=false;minDate;maxDate;maxSpan={days:240};dateChanged;openDatePickerTimeout;dateRangeInput;componentWillLoad(){if(!document.getElementById("ir-daterangepicker-style")){const e=document.createElement("style");e.id="ir-daterangepicker-style";e.textContent=`\n        .daterangepicker {\n          margin-top: 14px;\n        }\n      `;document.head.appendChild(e)}}componentDidLoad(){this.dateRangeInput=this.element.querySelector(".date-range-input");this.initializeDateRangePicker();this.updateDateRangePickerDates()}disconnectedCallback(){if(this.openDatePickerTimeout){clearTimeout(this.openDatePickerTimeout)}$(this.dateRangeInput).data("daterangepicker").remove()}handleMinDateChange(){$(this.dateRangeInput).data("daterangepicker").remove();this.initializeDateRangePicker()}datePropChanged(){this.updateDateRangePickerDates()}async openDatePicker(){this.openDatePickerTimeout=setTimeout((()=>{this.dateRangeInput.click()}),20)}updateDateRangePickerDates(){const e=$(this.dateRangeInput).data("daterangepicker");if(!e){console.error("Date range picker not initialized.");return}if(this.singleDatePicker){const t=this.date?fe(this.date):fe();e.setStartDate(t);e.setEndDate(t)}else{const t=this.fromDate?fe(this.fromDate):fe();const i=this.toDate?fe(this.toDate):t.clone().add(1,"days");e.setStartDate(t);e.setEndDate(i)}}initializeDateRangePicker(){$(this.dateRangeInput).daterangepicker({singleDatePicker:this.singleDatePicker,opens:this.opens,startDate:fe(this.fromDate),endDate:fe(this.toDate),minDate:fe(this.minDate||fe(new Date).format("YYYY-MM-DD")),maxDate:this.maxDate?fe(this.maxDate):undefined,maxSpan:this.maxSpan,autoApply:this.autoApply,locale:{format:this.format,separator:this.separator,applyLabel:this.applyLabel,cancelLabel:this.cancelLabel,fromLabel:this.fromLabel,toLabel:this.toLabel,customRangeLabel:this.customRangeLabel,weekLabel:this.weekLabel,daysOfWeek:this.daysOfWeek,monthNames:this.monthNames,firstDay:this.firstDay}},((e,t)=>{this.dateChanged.emit({start:e,end:t})}))}render(){return t(i,{key:"9c6fa1d5731b5fbe73f63e6d66e6c431a047c9eb"},t("input",{key:"22fba44776dea0122bad7cbe1da3729659bc1298",class:"date-range-input",type:"button",disabled:this.disabled}))}static get watchers(){return{minDate:["handleMinDateChange"],date:["datePropChanged"]}}};Vc.style=jc;const Gc=".sc-ir-date-view-h{display:block;font-size:13.65px !important;width:100%}.mx-01.sc-ir-date-view{--m:5px;margin-right:var(--m) !important;margin-left:var(--m) !important}";const qc=Gc;const Kc=class{constructor(t){e(this,t)}from_date;to_date;showDateDifference=true;dateOption="YYYY-MM-DD";dates;componentWillLoad(){this.initializeDates()}handleFromDateChange(e,t){if(e!==t){this.initializeDates()}}handleToDateChange(e,t){if(e!==t){this.initializeDates()}}initializeDates(){this.convertDate("from_date",this.from_date);this.convertDate("to_date",this.to_date);const e=fe(this.dates.from_date,"MMM DD, YYYY").format("YYYY-MM-DD");const t=fe(this.dates.to_date,"MMM DD, YYYY").format("YYYY-MM-DD");this.dates.date_difference=S(e,t)}convertDate(e,t){this.dates=this.dates||{from_date:"",to_date:"",date_difference:0};if(!t){return}if(typeof t==="string"){this.dates[e]=fe(t,this.dateOption).format("MMM DD, YYYY")}else if(t instanceof Date){this.dates[e]=fe(t).format("MMM DD, YYYY")}else if(fe.isMoment(t)){this.dates[e]=t.format("MMM DD, YYYY")}else{console.error("Unsupported date type")}}render(){return t(i,{key:"7f138be0fcc3eb5d853950fcf988bd2479913dd5",class:"d-flex align-items-center"},t("span",{key:"e1348d1d9dfdfbb9b87b59199628c98a5531c5af"},this.dates.from_date)," ",t("svg",{key:"ba068785537675450a37fb060df8443f9c3d0acc",xmlns:"http://www.w3.org/2000/svg",class:"mx-01",height:"14",width:"14",viewBox:"0 0 512 512"},t("path",{key:"154e0ac2aba3965f9baed86cf9f9dd3a488ebd9f",fill:"currentColor",d:"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z"})),t("span",{key:"f816d47468ace34dd4b1e8de3e18c6acaf6e7b33"},this.dates.to_date," ",this.showDateDifference&&t("span",{key:"b588e31184b49b68f8c32b1902fd03e33c5ddb1a",class:"mx-01"},this.dates.date_difference,"   ",this.dates.date_difference>1?` ${g.entries.Lcz_Nights}`:` ${g.entries.Lcz_Night}`)))}static get watchers(){return{from_date:["handleFromDateChange"],to_date:["handleToDateChange"]}}};Kc.style=qc;const Wc=".sc-ir-dates-cell-h{box-sizing:border-box !important}.sc-ir-dates-cell-h *.sc-ir-dates-cell,.sc-ir-dates-cell-h *.sc-ir-dates-cell::before,.sc-ir-dates-cell-h *.sc-ir-dates-cell::after{box-sizing:inherit !important;padding:0;margin:0}[hidden].sc-ir-dates-cell{display:none !important}.sc-ir-dates-cell-h{display:block;font-size:0.93rem}[display='inline'].sc-ir-dates-cell-h{display:inline-flex;align-items:center;justify-content:space-between;gap:1rem}.date-cell__container.sc-ir-dates-cell{display:flex;align-items:center;gap:0.25rem}.date-cell__label.sc-ir-dates-cell{font-weight:700}";const Xc=Wc;const Jc=class{constructor(t){e(this,t)}display="block";checkIn;checkOut;checkInLabel;checkoutLabel;overdueCheckin;overdueCheckout;formatDate(e){return fe(e,"YYYY-MM-DD").format("DD MMM YYYY")}render(){return t(i,{key:"6560a20f0ae74e6d0b9a07985c647df857340e28"},t("div",{key:"8669c36a3739d92fe2b626051d519876f9ab3edc",class:"date-cell__container"},this.checkInLabel&&t("span",{key:"dffe6b9d327a3ffe5be8c893cf1884a6f2577f48",class:"date-cell__label"},this.checkInLabel,": "),t("p",{key:"b4887bcee2d017bed291b89f7261a9411b40a3e2",style:{fontWeight:this.overdueCheckin?"bold":"auto"}},this.formatDate(this.checkIn))),t("div",{key:"a06e37f3926bca01d89394527a302c773b274c26",class:"date-cell__container"},this.checkoutLabel&&t("span",{key:"dd2b8a2e9e09a25442b89f0421f485cbb704b154",class:"date-cell__label"},this.checkoutLabel,": "),t("p",{key:"125011717eea205d0d8a88b07d2ff41491a48970",style:{fontWeight:this.overdueCheckout?"bold":"auto"}},this.formatDate(this.checkOut))))}};Jc.style=Xc;const Qc=".backdropModal{background-color:rgba(0, 0, 0, 0.5);z-index:1000;position:fixed;top:0;left:0;height:100vh;width:100%;opacity:0;transition:opacity 0.3s ease-in-out;pointer-events:none}.backdropModal.active{cursor:pointer;opacity:1 !important;pointer-events:all}.ir-modal[data-state='opened']{opacity:1;visibility:visible;pointer-events:all;transition:all 0.3s ease-in-out}.ir-alert-content{padding:10px;background:white;border-radius:5px}.modal{z-index:1001 !important}.modal-dialog{height:100vh;display:flex;align-items:center}.ir-alert-footer{gap:10px}.ir-modal{position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);z-index:1050;width:90%;max-width:32rem;overflow:hidden;outline:0;opacity:0;transition:transform 0.3s ease-in-out, opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;visibility:hidden;pointer-events:none}.ir-modal.active{opacity:1;transform:translate(-50%, 0);visibility:visible;pointer-events:all;transition:all 0.3s ease-in-out}";const Zc=Qc;const ed=class{constructor(t){e(this,t);this.modalClosed=a(this,"modalClosed",7);this.resetData=a(this,"resetData",7)}user;isOpen=false;selectedId="";loadingBtn=null;modalClosed;resetData;housekeepingService=new ve;async closeModal(){this.isOpen=false;this.modalClosed.emit(null)}async openModal(){this.isOpen=true}async btnClickHandler(e){let t=e.target;let i=t.name;try{if(i==="confirm"){this.loadingBtn="confirm";if(this.selectedId===""){await this.housekeepingService.editExposedHKM(this.user,true)}else{const e=this.user.assigned_units.map((e=>({hkm_id:+this.selectedId,is_to_assign:true,unit_id:e.id})));await this.housekeepingService.manageExposedAssignedUnitToHKM(ke.default_properties.property_id,e);const{assigned_units:t,is_soft_deleted:i,is_active:a,...r}=this.user;await this.housekeepingService.editExposedHKM(r,true)}this.resetData.emit(null)}if(i==="cancel"){this.closeModal()}}catch(e){console.error(e)}finally{if(this.loadingBtn){this.loadingBtn=null;this.closeModal()}}}render(){if(!this.user){return}return[t("div",{class:`backdropModal ${this.isOpen?"active":""}`,onClick:()=>{this.closeModal()}}),t("div",{"data-state":this.isOpen?"opened":"closed",class:`ir-modal`,tabindex:"-1"},t("div",{class:`ir-alert-content p-2`},t("div",{class:`r-alert-header mb-1 d-flex align-items-center justify-content-between border-0 py-0 m-0 `},t("p",{class:"m-0 p-0"},this.user.assigned_units.length>0?g.entries.Lcz_AssignUnitsTo:g.entries.Lcz_ConfirmDeletion),t("ir-button",{class:"exit-icon",variant:"icon",icon_name:"xmark",onClickHandler:()=>this.closeModal()})),t("div",{class:"modal-body text-left p-0 mb-2"},this.user.assigned_units.length>0&&t("div",{class:"modal-body text-left p-0 mb-2"},t("ir-select",{firstOption:g.entries.Lcz_nobody,selectedValue:this.selectedId,onSelectChange:e=>this.selectedId=e.detail,data:ke.hk_criteria.housekeepers.filter((e=>e.id!==this.user.id)).map((e=>({value:e.id.toString(),text:e.name}))).sort(((e,t)=>e.text.toLowerCase().localeCompare(t.text.toLowerCase())))}))),t("div",{class:`ir-alert-footer border-0  d-flex justify-content-end`},t("ir-button",{btn_color:"secondary",btn_block:true,text:g.entries.Lcz_Cancel,name:"cancel"}),t("ir-button",{isLoading:this.loadingBtn==="confirm",btn_color:"primary",btn_block:true,text:g.entries.Lcz_Confirm,name:"confirm"}))))]}};ed.style=Zc;const td={bookings:[],filteredBookings:[],paginatedBookings:[],needsCheckOutBookings:[],futureRooms:[],outBookings:[],searchTerm:"",pagination:{page:1,pageSize:20,total:0,totalPages:1,currentPage:1,showing:{from:0,to:0}},today:kd()};const{state:id,onChange:ad}=m(td);function rd(e=[]){id.bookings=Array.isArray(e)?[...e]:[];pd()}function od(e){const t=Number.isFinite(e)&&e>0?Math.floor(e):0;const i=nd(t,id.pagination.pageSize);const a=sd(id.pagination.currentPage,Math.max(i,1));id.pagination={...id.pagination,total:t,totalPages:Math.max(i,1),currentPage:a,showing:ld(a,id.pagination.pageSize,t)}}function nd(e,t){if(!e||!t){return 0}return Math.ceil(e/t)}function sd(e,t){if(!Number.isFinite(e)||e<=0){return 1}const i=Math.floor(e);return Math.min(Math.max(i,1),Math.max(t,1))}function ld(e,t,i){if(!i||!t){return{from:0,to:0}}const a=(e-1)*t+1;return{from:Math.max(a,1),to:Math.min(a+t-1,i)}}function cd(e){id.searchTerm=e??"";pd()}function dd(e){const t=sd(e,Math.max(id.pagination.totalPages,1));id.pagination={...id.pagination,currentPage:t,showing:ld(t,id.pagination.pageSize,id.pagination.total)};pd()}function hd(e){if(!Number.isFinite(e)||e<=0){return}const t=Math.floor(e);id.pagination={...id.pagination,pageSize:t,currentPage:1,showing:ld(1,t,id.pagination.total)};pd()}function ud(e){id.today=fe(e,"YYYY-MM-DD").format("YYYY-MM-DD");pd()}function pd(){const e=fd(id.searchTerm);id.filteredBookings=e;id.paginatedBookings=e;const t=gd(e);id.needsCheckOutBookings=t.needsCheckOut;id.outBookings=t.out;id.futureRooms=t.futureRooms}function fd(e){const t=id.bookings;const i=e?.trim().toLowerCase();if(!i){return t}return t.filter((e=>bd(e,i)))}function bd(e,t){if(!t){return true}const i=e.booking_nbr?.toLowerCase()??"";if(i.includes(t)){return true}if(vd(e.guest).includes(t)){return true}return(e.rooms??[]).some((e=>vd(e.guest).includes(t)))}function gd(e){return e.reduce(((e,t)=>{const i=t.rooms??[];const a=i.filter((e=>md(e)));if(a.length){e.needsCheckOut.push({...t,rooms:a})}const r=i.filter((e=>wd(e)));if(r.length){e.out.push({...t,rooms:r})}const o=i.filter((e=>yd(e)));if(o.length){e.out.push({...t,rooms:o})}return e}),{needsCheckOut:[],out:[],futureRooms:[]})}function md(e){return re({to_date:e.to_date,inOutCode:e.in_out.code})}function wd(e){return e.in_out?.code==="002"}function yd(e){return fe().isBefore(fe(e.to_date,"YYYY-MM-DD"),"date")}function vd(e){const t=`${e?.first_name??""} ${e?.last_name??""}`.trim();return t.toLowerCase()}function kd(){return fe().format("YYYY-MM-DD")}rd();const xd=".page-title.sc-ir-departures{font-family:var(--wa-font-family-heading);font-weight:var(--wa-font-weight-heading);line-height:var(--wa-line-height-condensed);text-wrap:balance;font-size:var(--wa-font-size-xl)}";const _d=xd;const Dd=class{constructor(t){e(this,t)}ticket;propertyid;language="en";p;bookingNumber;booking;paymentEntries;isPageLoading;payment;checkoutState=null;invoiceState=null;tokenService=new me;roomService=new we;bookingService=new l;paymentFolioRef;componentWillLoad(){if(this.ticket){this.tokenService.setToken(this.ticket);this.init()}ad("today",(e=>{this.getBookings()}))}handleTicketChange(e,t){if(e!==t&&e){this.tokenService.setToken(this.ticket);this.init()}}handleOpen(e){this.bookingNumber=e.detail}handleBookingPayment(e){e.stopImmediatePropagation();e.stopPropagation();const{booking_nbr:t,payment:i}=e.detail;this.booking=id.bookings.find((e=>e.booking_nbr===t));const a=this.paymentEntries.types.find((e=>e.CODE_NAME===i.payment_type.code));this.payment={...i,payment_type:{code:a.CODE_NAME,description:a.CODE_VALUE_EN,operation:a.NOTES}};this.paymentFolioRef.openFolio()}async init(){try{this.isPageLoading=true;const[e,t,i]=await Promise.all([this.roomService.getExposedProperty({id:this.propertyid||0,language:this.language,aname:this.p}),this.roomService.fetchLanguage(this.language),this.bookingService.getSetupEntriesByTableNameMulti(["_BED_PREFERENCE_TYPE","_DEPARTURE_TIME","_PAY_TYPE","_PAY_TYPE_GROUP","_PAY_METHOD"]),this.getBookings()]);const{pay_type:a,pay_type_group:r,pay_method:o}=this.bookingService.groupEntryTablesResult(i);this.paymentEntries={types:a,groups:r,methods:o}}catch(e){}finally{this.isPageLoading=false}}async getBookings(){const{bookings:e,total_count:t}=await this.bookingService.getRoomsToCheckout({property_id:this.propertyid?.toString(),check_out_date:id.today,page_index:id.pagination.currentPage,page_size:id.pagination.pageSize});od(t??0);rd(e)}handleCheckoutRoom(e){e.stopImmediatePropagation();e.stopPropagation();this.checkoutState=e.detail}async handlePaginationChange(e){e.stopImmediatePropagation();e.stopPropagation();const t=e.detail?.currentPage??1;if(t===id.pagination.currentPage){return}dd(t);await this.getBookings()}async handleCheckoutDialogClosed(e){e.stopImmediatePropagation();e.stopPropagation();const t={...this.checkoutState};this.checkoutState=null;switch(e.detail.reason){case"checkout":await this.getBookings();break;case"openInvoice":this.invoiceState={...t};await this.getBookings();break}}async handlePaginationPageSizeChange(e){e.stopImmediatePropagation();e.stopPropagation();const t=e.detail?.pageSize;if(!Number.isFinite(t)){return}const i=Math.floor(Number(t));if(i===id.pagination.pageSize){return}hd(i);await this.getBookings()}handleInvoiceClose(e){e.stopImmediatePropagation();e.stopPropagation();this.invoiceState=null}render(){if(this.isPageLoading){return t("ir-loading-screen",null)}return t(i,null,t("ir-toast",null),t("ir-interceptor",{handledEndpoints:["/Get_Rooms_To_Check_Out"]}),t("div",{class:"ir-page__container"},t("h3",{class:"page-title"},"Departures"),t("ir-departures-filter",null),t("ir-departures-table",{onCheckoutRoom:e=>this.handleCheckoutRoom(e),onRequestPageChange:e=>this.handlePaginationChange(e),onRequestPageSizeChange:e=>this.handlePaginationPageSizeChange(e)})),t("ir-drawer",{onDrawerHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.bookingNumber=null},withoutHeader:true,open:!!this.bookingNumber,style:{"--ir-drawer-width":"80rem","--ir-drawer-background-color":"#F2F3F8","--ir-drawer-padding-left":"0","--ir-drawer-padding-right":"0","--ir-drawer-padding-top":"0","--ir-drawer-padding-bottom":"0"}},this.bookingNumber&&t("ir-booking-details",{hasPrint:true,hasReceipt:true,hasCloseButton:true,onCloseSidebar:()=>this.bookingNumber=null,is_from_front_desk:true,propertyid:this.propertyid,hasRoomEdit:true,hasRoomDelete:true,bookingNumber:this.bookingNumber.toString(),ticket:this.ticket,language:this.language,hasRoomAdd:true})),t("ir-payment-folio",{style:{height:"auto"},bookingNumber:this.booking?.booking_nbr,paymentEntries:this.paymentEntries,payment:this.payment,mode:"payment-action",ref:e=>this.paymentFolioRef=e,onCloseModal:()=>{this.booking=null;this.payment=null}}),t("ir-checkout-dialog",{booking:this.checkoutState?.booking,identifier:this.checkoutState?.identifier,open:this.checkoutState!==null,onCheckoutDialogClosed:e=>this.handleCheckoutDialogClosed(e)}),t("ir-invoice",{onInvoiceClose:e=>this.handleInvoiceClose(e),booking:this.invoiceState?.booking,roomIdentifier:this.invoiceState?.identifier,open:this.invoiceState!==null}))}static get watchers(){return{ticket:["handleTicketChange"]}}};Dd.style=_d;const Cd=".sc-ir-departures-filter-h{display:block}.sc-ir-departures-filter-h{display:block}.departures-filters__container.sc-ir-departures-filter{display:flex;flex-direction:column;gap:1rem}@media (min-width: 768px){.departures-filters__container.sc-ir-departures-filter{flex-direction:row;align-items:center}.departures-filters__container.sc-ir-departures-filter>*.sc-ir-departures-filter{flex:1 1 0%}.departures-filters__date-picker.sc-ir-departures-filter{max-width:200px}.departures-filters__search-bar.sc-ir-departures-filter{max-width:400px}}";const Md=Cd;const Sd=class{constructor(t){e(this,t)}handleSearchChange=e=>{cd(e.detail??"")};render(){return t("div",{key:"501b60a928283c691308842e15565bd13c9af350",class:"departures-filters__container"},t("ir-custom-date-picker",{key:"ee809452ddda506a7a36bb529b76d289d010bb7d",onDateChanged:e=>{e.stopImmediatePropagation();e.stopPropagation();ud(e.detail.start.format("YYYY-MM-DD"))},date:id.today,class:"departures-filters__date-picker"},t("wa-icon",{key:"48021ee13b7fd73952cfc2cf841dc8127654cb40",name:"calendar",slot:"start"})),t("ir-custom-input",{key:"797572768f2d9dcbd863e24847c02efd604862b6",withClear:true,class:"departures-filters__search-bar",placeholder:"Search guests or bookings",value:id.searchTerm,"onText-change":this.handleSearchChange},t("wa-icon",{key:"891dea45b9e159f5d697d924ea8d7a5a530a1b4d",name:"magnifying-glass",slot:"start"})))}};Sd.style=Md;const Yd=".sc-ir-departures-table-h{display:flex;flex-direction:column;border-radius:0.5rem;overflow-x:auto;min-height:60vh;max-width:1920px;border:1px solid var(--wa-color-neutral-border-quiet, #abaeb9)}.sc-ir-departures-table-h{box-sizing:border-box !important}.sc-ir-departures-table-h *.sc-ir-departures-table,.sc-ir-departures-table-h *.sc-ir-departures-table::before,.sc-ir-departures-table-h *.sc-ir-departures-table::after{box-sizing:inherit !important;padding:0;margin:0}[hidden].sc-ir-departures-table{display:none !important}.sc-ir-departures-table-h{background:white}.table--container.sc-ir-departures-table{flex:1 1 0%}.departures-table__actions-cell.sc-ir-departures-table{display:flex;min-width:100px;justify-content:flex-end}@media (min-width: 1024px){.departures-table__actions-cell.sc-ir-departures-table{min-width:250px}}";const Ed=Yd;const Td=".ir-table-row.sc-ir-departures-table td.sc-ir-departures-table{padding:0.5rem 1rem !important;text-align:left;z-index:2;background-color:var(--wa-color-surface-default);white-space:nowrap;color:var(--wa-color-text-normal);box-sizing:border-box}.table--container.sc-ir-departures-table{flex:1 1 0%}.table--container.sc-ir-departures-table{overflow-x:auto}.table.sc-ir-departures-table td.sc-ir-departures-table{border-top:0;border-bottom:1px solid var(--wa-color-neutral-border-quiet, #abaeb9);transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.table.sc-ir-departures-table tbody.sc-ir-departures-table tr.sc-ir-departures-table:last-child>td.sc-ir-departures-table{border-bottom:0 !important}.table.sc-ir-departures-table thead.sc-ir-departures-table th.sc-ir-departures-table{border:none !important;background:#ececec;background:color-mix(in oklab, var(--wa-color-neutral-fill-quiet, #f1f2f3) 60%, transparent);color:#374151;padding:0.5rem 1rem !important;text-align:left}.data-table.sc-ir-departures-table thead.sc-ir-departures-table th.sc-ir-departures-table{box-sizing:border-box;background:var(--wa-color-surface-default) !important;padding-top:0.5rem !important;padding-bottom:0.5rem !important;border-bottom:1px solid var(--wa-color-neutral-90) !important;color:var(--wa-color-text-normal)}.data-table.sc-ir-departures-table .empty-row.sc-ir-departures-table{height:50vh !important;text-align:center;color:var(--wa-color-gray-60)}.data-table--pagination.sc-ir-departures-table{padding:0.5rem 1rem;position:sticky;bottom:0;background:var(--wa-color-surface-default);border-top:1px solid var(--wa-color-neutral-90)}.selected.sc-ir-departures-table td.sc-ir-departures-table{background:#e3f3fa !important}.selected.sc-ir-departures-table td.sc-ir-departures-table{color:var(--gray-dark) !important;transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.sortable.sc-ir-departures-table,.ir-table-row.sc-ir-departures-table{transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.sortable.sc-ir-departures-table{text-transform:capitalize}.sortable.sc-ir-departures-table:hover{color:#212529;background-color:#e2e8f0 !important;border-color:#dae0e5;cursor:pointer}.ir-table-row.sc-ir-departures-table:hover td.sc-ir-departures-table{background:#e2e6ea3f !important;background:var(--wa-color-neutral-fill-quiet, #f1f2f3) !important}.sortable.sc-ir-departures-table:active{color:#212529;background-color:#e2e8f0;border-color:#d3d9df}.sortable.sc-ir-departures-table svg.sc-ir-departures-table{color:var(--blue)}.sticky-column.sc-ir-departures-table{position:sticky !important;right:0;background-color:white}";const Id=Td;const zd=class{constructor(t){e(this,t);this.checkoutRoom=a(this,"checkoutRoom",7);this.requestPageChange=a(this,"requestPageChange",7);this.requestPageSizeChange=a(this,"requestPageSizeChange",7)}checkoutRoom;requestPageChange;requestPageSizeChange;renderSection({bookings:e,showAction:t=false,isFuture:i=false}){if(!e?.length){return null}const a=e.flatMap((e=>this.renderBookingRows({booking:e,showAction:t,isFuture:i})));return[...a]}renderBookingRows({booking:e,isFuture:t,showAction:i}){return(e.rooms??[]).map(((a,r)=>this.renderRow(e,a,r,i,t)))}renderRow(e,i,a,r,o){const n=`${e.booking_nbr}-${i?.identifier??a}`;const s=fe(i.to_date,"YYYY-MM-DD").startOf("day").isBefore(fe().startOf("day"));return t("tr",{class:"ir-table-row",key:n},t("td",{class:"sticky-column"},t("ir-booking-number-cell",{origin:e.origin,channelBookingNumber:e.channel_booking_nbr,source:e.source,bookingNumber:e.booking_nbr})),t("td",null,t("ir-booked-by-cell",{guest:e.guest})),t("td",null,t("ir-guest-name-cell",{name:i.guest})),t("td",null,t("ir-unit-cell",{room:i})),t("td",null,t("ir-dates-cell",{overdueCheckout:s,checkIn:i.from_date,checkOut:i.to_date})),t("td",{class:"text-right"},t("ir-balance-cell",{bookingNumber:e.booking_nbr,isDirect:e.is_direct,statusCode:e.status.code,currencySymbol:e.currency.symbol,financial:e.financial})),t("td",null,t("div",{class:"departures-table__actions-cell"},r?t("ir-actions-cell",{onIrAction:t=>{t.stopImmediatePropagation();t.stopPropagation();this.checkoutRoom.emit({booking:e,identifier:i.identifier})},buttons:s?["overdue_check_out"]:["check_out"]}):o?"":"In-house")))}handlePageChange(e){e.stopImmediatePropagation();e.stopPropagation();this.requestPageChange.emit(e.detail)}handlePageSizeChange(e){e.stopImmediatePropagation();e.stopPropagation();this.requestPageSizeChange.emit(e.detail)}render(){const{needsCheckOutBookings:e,futureRooms:a,outBookings:r,pagination:o}=id;return t(i,{key:"5e680808347f125d4bd453a8d103b90addea9655"},t("div",{key:"c48f1875566358f2554ca8821b088b681c00e7eb",class:"table--container"},t("table",{key:"00a26a2b8339c49be2b064206f95e2237ccc44b6",class:"table data-table"},t("thead",{key:"95b180755057faf97b6e2a13471ea33cedc4caa9"},t("tr",{key:"f1adc6f4fffe5e699080547ccb7f8043dc728373"},t("th",{key:"fb3d68b02cf1f66ce4ae29eec036fabb9fc90d63"},t("span",{key:"73e6181227051812956e34cb5dd79bc8a75cab68",class:"departures-table__departure__cell"},"Booking#")),t("th",{key:"fa547aaaf579e76b9f4148d9207df3d3d3c47001"},t("div",{key:"275a60da41d99942380cd54d2897f4819c6bb208"},t("p",{key:"1cd1fb19b47843fbc9e95c69974b44affca5e40c"},"Booked by"))),t("th",{key:"55355e624599358c08f46291a66fbd3e1e7969e6"},"Guest name"),t("th",{key:"2e41dd39010ac520167e2affa1d9448fdcc09781"},"Unit"),t("th",{key:"d2af1f3258225362bfba9e6a48ae6fb49111b073"},"Dates"),t("th",{key:"c50b267d26a15f301d56da1ad8d2f30c2102f7bc",class:"text-center"},"Balance"),t("th",{key:"ed92286d1222ab69bf902b6b5e0db6cabedee7de"}))),t("tbody",{key:"9cfcf2b901567f497e87931005c90878c195ed54"},this.renderSection({bookings:a,isFuture:true}),this.renderSection({bookings:e,showAction:true}),this.renderSection({bookings:r}),!e.length&&!r.length&&t("tr",{key:"16ee8613741b43616cdfafafd1839ed1f59aabc3"},t("td",{key:"eb6a7c4758b59275ecca3c198c7ffd9899d13f62",colSpan:7,class:"empty-row"},t("ir-empty-state",{key:"f85d45e76880e43cfbb3d714d0e86ec0e89e44c3"})))))),(e.length>0||r.length>0||a.length>0)&&t("ir-pagination",{key:"5cb2138b76059d153239acfb046043e1c363d785",class:"data-table--pagination",showing:o.showing,total:o.total,pages:o.totalPages,pageSize:o.pageSize,currentPage:o.currentPage,allowPageSizeChange:false,pageSizes:[o.pageSize],recordLabel:g.entries?.Lcz_Bookings??"Bookings",onPageChange:e=>this.handlePageChange(e),onPageSizeChange:e=>this.handlePageSizeChange(e)}))}};zd.style=Ed+Id;function Od(e="data-ir-overflow"){return(t,i,a)=>{const r=a?.value;a.value=function(...t){const i=jd(this);if(i){Fd(i,e)}return r?.apply(this,t)};return a}}function Ad(e="data-ir-overflow"){return(t,i,a)=>{const r=a?.value;a.value=function(...t){const i=jd(this);if(i){Hd(i,e)}return r?.apply(this,t)};return a}}const Bd=new Map;const Rd="data-overflow-locks";const Pd="overflow-style-";function Nd(e){if(!Vd())return;const t=Pd+e;if(document.getElementById(t))return;const i=document.documentElement.scrollHeight>window.innerHeight;const a=i?window.innerWidth-document.documentElement.clientWidth:0;const r=`\n    /* Auto-inserted overflow lock for "${e}" */\n    body[${Rd}~="${e}"] {\n      overflow: hidden !important;\n      /* margin-inline-end respects LTR/RTL direction */\n      margin-inline-end: ${a}px !important;\n    }\n  `.trim();const o=document.createElement("style");o.id=t;o.textContent=r;document.head.appendChild(o)}function Ld(e){if(!Vd())return;Nd(e);const t=document.body;const i=(t.getAttribute(Rd)||"").trim();const a=new Set(i?i.split(/\s+/):[]);if(!a.has(e)){a.add(e);t.setAttribute(Rd,Array.from(a).join(" "))}}function $d(e){if(!Vd())return;const t=document.body;const i=(t.getAttribute(Rd)||"").trim();if(!i)return;const a=new Set(i.split(/\s+/));if(a.delete(e)){const e=Array.from(a).join(" ");if(e)t.setAttribute(Rd,e);else t.removeAttribute(Rd)}}function Fd(e,t){if(!e||!Vd())return;e.__overflowTags__||=new Map;const i=e.__overflowTags__;const a=i.get(t)??0;i.set(t,a+1);let r=Bd.get(t);if(!r){r={hosts:new Set,count:0};Bd.set(t,r)}if(a===0){r.hosts.add(e)}r.count+=1;if(r.count===1){Ld(t)}Ud(e)}function Hd(e,t){if(!e||!Vd())return;const i=e.__overflowTags__;if(!i)return;const a=i.get(t);if(!a)return;if(a>1){i.set(t,a-1)}else{i.delete(t);if(i.size===0){delete e.__overflowTags__}}const r=Bd.get(t);if(!r)return;r.count=Math.max(0,r.count-1);if(a===1){r.hosts.delete(e)}if(r.count===0){Bd.delete(t);$d(t)}}function Ud(e){if(!e||!Vd()||typeof MutationObserver==="undefined")return;if(e.__overflowObserver__)return;const t=new MutationObserver((()=>{if(!e.isConnected){const i=e.__overflowTags__?Array.from(e.__overflowTags__.entries()):[];i.forEach((([t,i])=>{for(let a=0;a<i;a+=1){Hd(e,t)}}));t.disconnect();delete e.__overflowObserver__}}));t.observe(document.documentElement,{childList:true,subtree:true});e.__overflowObserver__=t}function jd(e){if(!Vd())return null;try{return o(e)}catch{return null}}function Vd(){return typeof window!=="undefined"&&typeof document!=="undefined"}const Gd=":host{display:block;box-sizing:border-box;font:inherit;color:inherit}.dialog{border:none;margin:auto;padding:0;background:transparent;color:inherit;width:min(90vw, var(--ir-dialog-max-width, 40rem));max-width:var(--ir-dialog-max-width, 40rem);min-width:var(--ir-dialog-min-width, auto)}.dialog::backdrop{background:rgba(0, 0, 0, 0.35);backdrop-filter:blur(2px);animation:overlayShow 160ms cubic-bezier(0.16, 1, 0.3, 1)}.ir-dialog__footer{display:flex;align-items:center;gap:0.5rem;justify-content:flex-end;width:100%}.dialog__loader-container{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;width:100%;min-height:50px;min-width:31rem}.dialog__content{box-sizing:border-box;display:flex;flex-direction:column;background:#ffffff;border-radius:8px;box-shadow:hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px;max-height:min(85vh, 100%);overflow:hidden;padding:1rem}.dialog[open] .dialog__content{animation:contentShow 300ms cubic-bezier(0.16, 1, 0.3, 1)}.dialog__header,.dialog__body,.dialog__footer{padding:0}.dialog__header{display:flex;align-items:flex-start;gap:16px}.dialog__header slot[name='modal-title']::slotted(*){margin:0}.dialog__body{flex:1 1 auto;overflow:auto;padding-bottom:2rem}.dialog__body ::slotted(*){font-size:14px;font-weight:400;color:#475467;margin:0}.dialog__footer{display:flex;align-items:center;justify-content:flex-end;gap:12px}.dialog__footer ::slotted(*){--ir-btn-width:auto}.dialog__close-button{margin-left:auto;border:none;background:transparent;padding:4px;border-radius:999px;color:#104064;cursor:pointer;display:inline-flex;align-items:center;justify-content:center}.dialog__close-button:hover{background:rgba(16, 64, 100, 0.08)}.dialog__close-button:focus-visible{outline:2px solid #104064;outline-offset:2px}.dialog__close-button svg{display:block}.dialog__header slot[name='modal-title']::slotted(*){font-size:18px;font-weight:600;color:#101828}@keyframes overlayShow{from{opacity:0}to{opacity:1}}@keyframes contentShow{from{opacity:0;transform:translateY(-8px) scale(0.98)}to{opacity:1;transform:translateY(0) scale(1)}}";const qd=Gd;var Kd=undefined&&undefined.__decorate||function(e,t,i,a){var r=arguments.length,o=r<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,i):a,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,a);else for(var s=e.length-1;s>=0;s--)if(n=e[s])o=(r<3?n(o):r>3?n(t,i,o):n(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};const Wd=class{constructor(t){e(this,t);this.irDialogShow=a(this,"irDialogShow",7);this.irDialogHide=a(this,"irDialogHide",7);this.irDialogAfterShow=a(this,"irDialogAfterShow",7);this.irDialogAfterHide=a(this,"irDialogAfterHide",7)}label;open;withoutHeader;lightDismiss=true;irDialogShow;irDialogHide;irDialogAfterShow;irDialogAfterHide;async openModal(){this.open=true}async closeModal(){this.open=false}handleWaHide(e){e.stopImmediatePropagation();e.stopPropagation();if(!e.detail){return}this.open=false;this.irDialogHide.emit(e.detail)}handleWaShow(e){e.stopImmediatePropagation();e.stopPropagation();this.open=true;this.irDialogShow.emit()}handleWaAfterHide(e){e.stopImmediatePropagation();e.stopPropagation();this.irDialogAfterHide.emit()}handleWaAfterShow(e){e.stopImmediatePropagation();e.stopPropagation();this.irDialogAfterShow.emit()}render(){return t("wa-dialog",{key:"4985a017f4a210836d6c7d6117b6c654af1bfa8a","onwa-hide":this.handleWaHide.bind(this),"onwa-show":this.handleWaShow.bind(this),"onwa-after-hide":this.handleWaAfterHide.bind(this),"onwa-after-show":this.handleWaAfterShow.bind(this),label:this.label,id:"dialog-overview",open:this.open,style:{"--width":"var(--ir-dialog-width,31rem)"},"without-header":this.withoutHeader,lightDismiss:this.lightDismiss},t("slot",{key:"c604ce08de2c3ef95e280f3daf4eb9ca15d88067",name:"header-actions",slot:"header-actions"}),t("slot",{key:"ae2af1bc0d7dad3b4ba48403766d786868b427b7",name:"label",slot:"label"}),t("slot",{key:"b2047c2822b731967fdf9420c43061e129b9606d"}),t("slot",{key:"eeda92c2aa17ff8596a0b7444475174e3f9132d7",name:"footer",slot:"footer"}))}};Kd([Ad()],Wd.prototype,"handleWaHide",null);Kd([Od()],Wd.prototype,"handleWaShow",null);Wd.style=qd;const Xd=".ir__drawer{text-align:left !important}.ir__drawer::part(header){border-bottom:1px solid var(--wa-color-surface-border);padding-bottom:calc(var(--spacing) / 2);background-color:var(--ir-drawer-background-color, var(--wa-color-surface-default))}.ir__drawer::part(body){background-color:var(--ir-drawer-background-color, var(--wa-color-surface-default));padding:0;padding-left:var(--ir-drawer-padding-left, var(--spacing));padding-right:var(--ir-drawer-padding-right, var(--spacing));padding-top:var(--ir-drawer-padding-top, var(--spacing));padding-bottom:var(--ir-drawer-padding-bottom, var(--spacing))}.ir__drawer::part(footer){background-color:var(--ir-drawer-background-color, var(--wa-color-surface-default));padding-top:calc(var(--spacing) / 2);border-top:1px solid var(--wa-color-surface-border)}.ir__drawer-footer{display:flex;align-items:center;gap:0.5rem;width:100%}.ir__drawer-footer>*{flex:1 1 0%}.drawer__loader-container{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;width:100%}";const Jd=Xd;var Qd=undefined&&undefined.__decorate||function(e,t,i,a){var r=arguments.length,o=r<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,i):a,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,a);else for(var s=e.length-1;s>=0;s--)if(n=e[s])o=(r<3?n(o):r>3?n(t,i,o):n(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};const Zd=class{constructor(t){e(this,t);this.drawerShow=a(this,"drawerShow",7);this.drawerHide=a(this,"drawerHide",7)}open;label;placement;withoutHeader;lightDismiss=true;drawerShow;drawerHide;onDrawerShow=e=>{this.emitDrawerShow(e)};onDrawerHide=e=>{this.emitDrawerHide(e)};emitDrawerShow(e){e.stopImmediatePropagation();e.stopPropagation();this.drawerShow.emit()}emitDrawerHide(e){e.stopImmediatePropagation();e.stopPropagation();if(!e.detail){return}this.drawerHide.emit(e.detail)}render(){return t("wa-drawer",{key:"371f260a3c17c4db84115a8f585e5dc63a664126","onwa-show":this.onDrawerShow,"onwa-hide":this.onDrawerHide,class:"ir__drawer",style:{"--size":"var(--ir-drawer-width,40rem)"},open:this.open,label:this.label,placement:this.placement,withoutHeader:this.withoutHeader,lightDismiss:this.lightDismiss},t("slot",{key:"3c900614ef2eb914edde28fb12e69d77c0459f22",slot:"label",name:"label"}),t("slot",{key:"16e1703b7fa102148ec84f0296ff508dbc329144",slot:"header-actions",name:"header-actions"}),t("slot",{key:"78117aab2cb0c367beb49d73d6442796a36e5bda"}),t("slot",{key:"72f2cee6ba4f5a7380543d9fda6b7c2f2d640867",slot:"footer",name:"footer"}))}};Qd([Od()],Zd.prototype,"emitDrawerShow",null);Qd([Ad()],Zd.prototype,"emitDrawerHide",null);Zd.style=Jd;const eh=".dropdown-menu.sc-ir-dropdown{z-index:1000;width:100%;max-height:300px;min-width:var(--ir-dropdown-menu-min-width, 11rem) !important;overflow-y:auto}.dropdown.nav-item.show.sc-ir-dropdown .dropdown-menu.sc-ir-dropdown{display:block}.caret-icon.sc-ir-dropdown{position:absolute;top:50%;transform:translateY(-55%);right:0.25rem;z-index:99999}.dropdown-trigger.sc-ir-dropdown{position:relative}.caret-icon.disabled.sc-ir-dropdown{opacity:0.5 !important;pointer-events:none !important;cursor:not-allowed !important}";const th=eh;const ih=class{constructor(t){e(this,t);this.optionChange=a(this,"optionChange",7)}get el(){return o(this)}value;disabled=false;caret=true;isOpen=false;selectedOption;focusedIndex=-1;itemChildren=[];mo=null;documentClickHandler;isComponentConnected=true;updateQueued=false;optionChange;componentWillLoad(){this.selectedOption=this.value;this.documentClickHandler=this.handleDocumentClick.bind(this);this.collectItemChildren();this.mo=new MutationObserver((()=>{if(!this.updateQueued){this.updateQueued=true;requestAnimationFrame((()=>{if(this.isComponentConnected){this.collectItemChildren();this.updateQueued=false}}))}}));this.mo.observe(this.el,{childList:true,subtree:true})}componentDidLoad(){document.addEventListener("click",this.documentClickHandler,{passive:true});requestAnimationFrame((()=>{if(this.isComponentConnected){this.updateItemElements();if(this.value){this.updateDropdownItemValue(this.value)}}}))}disconnectedCallback(){this.isComponentConnected=false;document.removeEventListener("click",this.documentClickHandler);this.mo?.disconnect();this.mo=null}handleDocumentKeyDown(e){if(!this.isOpen||!this.isComponentConnected)return;if(e.key==="Escape"){this.closeDropdown()}}handleDropdownItemSelect(e){if(!this.isComponentConnected)return;e.stopPropagation();this.selectOption(e.detail);e.target.setAttribute("aria-selected","true")}handleDropdownItemRegister(){if(!this.isComponentConnected)return;this.collectItemChildren()}handleDropdownItemUnregister(){if(!this.isComponentConnected)return;this.collectItemChildren()}handleValueChange(e,t){if(e!==t&&this.isComponentConnected){this.updateDropdownItemValue(e)}}updateDropdownItemValue(e){this.itemChildren.forEach((e=>e.removeAttribute("aria-selected")));const t=this.itemChildren.find((t=>t.value===e));if(t){t.setAttribute("aria-selected","true")}}getSelectedItemIndex(){if(!this.value)return-1;return this.itemChildren.findIndex((e=>e.value===this.value))}openDropdown(){try{this.isOpen=true;this.focusedIndex=this.getSelectedItemIndex();this.updateItemElements();if(this.focusedIndex>=0){requestAnimationFrame((()=>{this.scrollToSelectedItem()}))}}catch(e){console.log(e)}}closeDropdown(){this.isOpen=false;this.focusedIndex=-1;this.removeItemFocus()}handleDocumentClick=e=>{if(!this.isComponentConnected||!this.el.contains(e.target)){this.closeDropdown()}};collectItemChildren(){if(!this.isComponentConnected)return;const e=Array.from(this.el.querySelectorAll("ir-dropdown-item"));this.itemChildren=e;this.updateItemElements()}updateItemElements(){if(!this.isComponentConnected)return;this.itemChildren.forEach(((e,t)=>{e.setAttribute("data-slot-index",String(t));e.setAttribute("role","option");e.setAttribute("tabindex","-1")}))}removeItemFocus(){this.itemChildren.forEach((e=>{e.classList.remove("focused","active")}))}focusItemElement(e){this.removeItemFocus();if(e>=0&&e<this.itemChildren.length){const t=this.itemChildren[e];t.classList.add("focused");t.scrollIntoView({block:"nearest",behavior:"smooth"})}}selectItemElement(e){if(e>=0&&e<this.itemChildren.length){const t=this.itemChildren[e];t.click()}}scrollToSelectedItem(){if(this.focusedIndex>=0&&this.focusedIndex<this.itemChildren.length){const e=this.itemChildren[this.focusedIndex];if(e){e.scrollIntoView({block:"nearest",behavior:"smooth",inline:"nearest"})}}}handleKeyDown=e=>{if(!this.isComponentConnected||this.disabled)return;const t=this.itemChildren.length-1;switch(e.key){case"ArrowDown":e.preventDefault();if(!this.isOpen){this.openDropdown();if(this.focusedIndex>=0&&this.focusedIndex<t){this.focusedIndex++;this.focusItemElement(this.focusedIndex)}else if(this.focusedIndex===-1){this.focusedIndex=0;this.focusItemElement(this.focusedIndex)}else if(this.focusedIndex===t){this.focusedIndex=0;this.focusItemElement(this.focusedIndex)}}else if(t>=0){this.focusedIndex=this.focusedIndex<t?this.focusedIndex+1:0;this.focusItemElement(this.focusedIndex)}break;case"ArrowUp":e.preventDefault();if(!this.isOpen){this.openDropdown();if(this.focusedIndex>0){this.focusedIndex--;this.focusItemElement(this.focusedIndex)}else if(this.focusedIndex===-1){this.focusedIndex=t;this.focusItemElement(this.focusedIndex)}else if(this.focusedIndex===0){this.focusedIndex=t;this.focusItemElement(this.focusedIndex)}}else if(t>=0){this.focusedIndex=this.focusedIndex>0?this.focusedIndex-1:t;this.focusItemElement(this.focusedIndex)}break;case"Enter":e.preventDefault();if(this.isOpen&&this.focusedIndex>=0){this.selectItemElement(this.focusedIndex)}else if(!this.isOpen){this.openDropdown()}break;case"Escape":e.preventDefault();this.closeDropdown();break;case"Tab":if(this.isOpen){this.closeDropdown()}break}};selectOption(e){this.selectedOption=e;this.value=e;this.optionChange.emit(e);this.closeDropdown()}render(){return t(i,{key:"459b3ecb8b84d3bf03d8a7c863a37d71be6c5919",class:`dropdown ${this.isOpen?"show":""}`},t("div",{key:"57ec4bf651b236e25700baaa6c77ce4e5f8d78f5",onClick:()=>{if(this.disabled)return;if(this.isOpen){this.closeDropdown()}else{this.openDropdown()}},"aria-disabled":String(this.disabled),class:`dropdown-trigger ${this.disabled?"disabled":""}`,onKeyDown:this.handleKeyDown,tabindex:"0"},t("slot",{key:"5e4c93fa7f437b4157ccd193653a5bfe2f454f0d",name:"trigger"}),this.caret&&t("div",{key:"6621bbb4d93c302688c8cd1a8e99d2022786a1e5",class:`caret-icon ${this.disabled?"disabled":""}`},t("ir-icons",{key:"a03f3ce566c7f7893c637c57df0d6807091e9d84",name:!this.isOpen?"angle-down":"angle-up"}))),t("div",{key:"c4800255e91d1f1e905ce8ff235fa107ea999fff",class:"dropdown-menu",role:"listbox","aria-expanded":this.isOpen.toString()},t("slot",{key:"f5998ab55c080021d49fe0d125abdb9f9556b4d5"})))}static get watchers(){return{value:["handleValueChange"]}}};ih.style=th;const ah=".sc-ir-dropdown-item-h{display:block;cursor:pointer}[hidden].sc-ir-dropdown-item-h{display:none !important}.focused.sc-ir-dropdown-item-h{background:#f4f5fa !important}.active.sc-ir-dropdown-item-h,[aria-selected='true'].sc-ir-dropdown-item-h,.sc-ir-dropdown-item-h:active{outline:none;background-color:var(--blue, #1e9ff2) !important;color:white !important}.dropdown-item.sc-ir-dropdown-item-h{padding:0.25rem 1rem !important;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}";const rh=ah;const oh=class{constructor(t){e(this,t);this.dropdownItemSelect=a(this,"dropdownItemSelect",7);this.dropdownItemRegister=a(this,"dropdownItemRegister",7);this.dropdownItemUnregister=a(this,"dropdownItemUnregister",7)}get el(){return o(this)}isComponentConnected=true;hasRegistered=false;value;label;html_content;hidden=false;dropdownItemSelect;dropdownItemRegister;dropdownItemUnregister;componentDidLoad(){if(this.isComponentConnected&&!this.hasRegistered){this.hasRegistered=true;requestAnimationFrame((()=>{if(this.isComponentConnected){this.dropdownItemRegister.emit()}}))}}disconnectedCallback(){this.isComponentConnected=false;if(this.hasRegistered&&this.el.parentElement){const e=this.el.closest("ir-dropdown");if(e&&document.contains(e)){this.dropdownItemUnregister.emit()}}this.hasRegistered=false}async matchesQuery(e){if(!this.isComponentConnected)return false;const t=e.toLowerCase();const i=(this.label??this.el.textContent??"").toLowerCase();return i.includes(t)}async setHidden(e){if(this.isComponentConnected){this.hidden=e}}handleClick=e=>{e.stopPropagation();if(!this.isComponentConnected)return;this.dropdownItemSelect.emit(this.value)};render(){return t(i,{key:"b08cff08901c2c0ea4d87a65c94379b4acc3479f",role:"option",tabindex:"-1","aria-selected":"false",class:{"dropdown-item":true,hidden:this.hidden},onClick:this.handleClick,"data-value":this.value},this.html_content?t("span",{innerHTML:this.html_content}):t("slot",null))}};oh.style=rh;const nh=":host{display:'flex';align-items:center;justify-content:center;gap:1rem;flex-direction:column;color:var(--wa-color-neutral-60)}";const sh=nh;const lh=class{constructor(t){e(this,t)}message="No records found";render(){return t(i,{key:"f51e8a4c77d058d39aa1dfb9520b4ffbb6278669"},t("slot",{key:"890d873c22da39173f10f648d2f983f664c06617",name:"icon"},t("wa-icon",{key:"925b25de4d0704645c69fe493b6745eeccd1700a",name:"ban",style:{transform:"rotate(90deg)",fontSize:"2rem"}})),t("p",{key:"31de7e096836b0d96bf05251417b63286b12fbc8",part:"message"},"No records found"),t("slot",{key:"2f45fbb2c1c4e34fb66ec81809007472e0e41478"}))}};lh.style=sh;const ch=".sc-ir-events-log-h{display:block}.beta.sc-ir-events-log{background:var(--red);color:white;padding:0.2rem 0.3rem;font-size:12px;border-radius:4px;margin:0}.event-row.sc-ir-events-log{padding-bottom:0.5rem}.list-title.sc-ir-events-log{margin:0;padding:0;font-size:14px;font-weight:bold;width:fit-content}.list-item.sc-ir-events-log{margin:0;padding:0;font-size:14px;margin-left:5px;width:fit-content}.list-item.green.sc-ir-events-log{color:#629a4c;font-weight:600}.list-item.red.sc-ir-events-log{color:#ff4961;font-weight:600}.dates-row.sc-ir-events-log{display:flex;align-items:center;gap:0.875rem}";const dh=ch;const hh=class{constructor(t){e(this,t)}bookingNumber;booking;bookingEvents;componentWillLoad(){this.init()}async init(){try{this.bookingEvents=this.booking.events}catch(e){console.error(e)}}render(){return t("div",{key:"59de2bcf54403067cafc421dee57dfe87ea445ce",class:""},be("/Get_Exposed_Booking_Events")?t("div",{class:"d-flex align-items-center justify-content-center dialog-container-height"},t("ir-spinner",null)):t(r,null,t("table",{class:" dialog-container-height"},t("thead",{class:"sr-only"},t("tr",null,t("th",null,"date"),t("th",null,"user"),t("th",null,"status"))),t("tbody",null,this.bookingEvents?.map((e=>t("tr",{key:e.id,class:"pb-1"},t("td",{class:"event-row dates-row"},t("span",null,e.date),t("span",null,String(e.hour).padStart(2,"0"),":",String(e.minute).padStart(2,"0"),":",String(e.second).padStart(2,"0"))),t("td",{class:"pl-3 event-row "},e.type),t("td",{class:"pl-1 event-row "},e.user))))))))}};hh.style=dh;const uh=".sc-ir-extra-service-h{display:block}.extra-service-container.sc-ir-extra-service{display:flex;align-items:start;justify-content:space-between;gap:0.5rem}.extra-service-container.sc-ir-extra-service *.sc-ir-extra-service{padding:0;margin:0;box-sizing:border-box}.extra-service-actions.sc-ir-extra-service{display:flex;align-items:center;gap:0.5rem}.extra-service-conditional-date.sc-ir-extra-service{margin-top:0.5rem}.extra-service-price.sc-ir-extra-service{white-space:nowrap}.extra-service-description.sc-ir-extra-service{word-break:break-all}";const ph=uh;const fh=class{constructor(t){e(this,t);this.editExtraService=a(this,"editExtraService",7);this.resetBookingEvt=a(this,"resetBookingEvt",7)}service;bookingNumber;currencySymbol;editExtraService;resetBookingEvt;irModalRef;bookingService=new l;async deleteService(){try{await this.bookingService.doBookingExtraService({service:this.service,is_remove:true,booking_nbr:this.bookingNumber});this.irModalRef.closeModal();this.resetBookingEvt.emit(null)}catch(e){console.log(e)}}render(){return t(i,{key:"da229b3875c5a062c1f9f78961730c17a82ae505"},t("div",{key:"e58704ba35313adc5b25b2b74022abd8fb72c68f"},t("div",{key:"d2a2a094102064fe40c568fd1eb3f44484848129",class:"extra-service-container"},t("p",{key:"f49e94d745df2a82598917310b474d6f3be28697",class:"extra-service-description"},this.service.description),t("div",{key:"d04ee92e15216e11803863fc9bbdf1fad8c96bdc",class:"extra-service-actions"},!!this.service.price&&this.service.price>0&&t("p",{key:"f2222509f1f06c630db3719276066db95feb0530",class:"extra-service-price p-0 m-0 font-weight-bold"},v(this.currencySymbol,this.service.price)),t("div",{key:"da384a1e16bd0fe357368d178f8e90454d398fec",class:"d-flex align-items-center"},t("wa-tooltip",{key:"75449df2743c52c6c15faa3d0479cf9b84ccf92f",for:`edit-extra-service-${this.service.booking_system_id}`},"Edit service"),t("ir-custom-button",{key:"5a461e0a65858968d05799be3f5f5c62263f9e65",id:`edit-extra-service-${this.service.booking_system_id}`,onClickHandler:e=>{e.stopImmediatePropagation();e.stopPropagation();this.editExtraService.emit(this.service)},iconBtn:true,appearance:"plain",variant:"neutral"},t("wa-icon",{key:"0652f6e4387e4cda92894eab2fc6ffab7c4fb0bf",name:"edit",label:"Edit",style:{fontSize:"1rem"}})),t("wa-tooltip",{key:"6002141b34d563d1e14b1bda605f5cf6be7b569e",for:`delete-extra-service-${this.service.booking_system_id}`},"Delete service"),t("ir-custom-button",{key:"a6f9d14c923d000a10b433afa227b18461443a3f",iconBtn:true,id:`delete-extra-service-${this.service.booking_system_id}`,onClickHandler:e=>{e.stopImmediatePropagation();e.stopPropagation();this.irModalRef.openModal()},appearance:"plain",variant:"danger"},t("wa-icon",{key:"39aba2ff23e19501339521799a8071755b707eed",name:"trash-can",label:"Edit",style:{fontSize:"1rem"}}))))),t("div",{key:"46687cd5bd01d853ce3a820eac84af725d3fef9e",class:"extra-service-conditional-date"},this.service.start_date&&this.service.end_date?t("ir-date-view",{class:"extra-service-date-view mr-1",from_date:this.service.start_date,to_date:this.service.end_date,showDateDifference:false}):this.service.start_date&&t("p",{class:"extra-service-date-view"},fe(new Date(this.service.start_date)).format("MMM DD, YYYY")))),t("ir-dialog",{key:"3584b0af1d4e6a8f06bd24b9974ba57ff0f3f33d",onIrDialogHide:e=>{e.stopImmediatePropagation();e.stopPropagation()},label:"Alert",ref:e=>this.irModalRef=e,lightDismiss:false},`${g.entries["Lcz_AreYouSureDoYouWantToRemove "]} ${g.entries.Lcz_ThisService} ${g.entries.Lcz_FromThisBooking}`,t("div",{key:"0d3fb25e051bd3c5322588687a61ba224bbde34b",slot:"footer",class:"ir-dialog__footer"},t("ir-custom-button",{key:"5a9b8b9cb967ebf7f4335503a4a93ad11587e6d0",appearance:"filled",variant:"neutral",size:"medium","data-dialog":"close"},g.entries.Lcz_Cancel),t("ir-custom-button",{key:"dc4579f0a19de65a90e2fc9da1bac1c494dec7f9",onClickHandler:()=>this.deleteService(),loading:be("/Do_Booking_Extra_Service"),variant:"danger",size:"medium"},g.entries.Lcz_Delete))))}};fh.style=ph;const bh=".sc-ir-extra-service-config-h{display:block;--ir-input-border-color:#cacfe7}.sc-ir-extra-service-config-h .input-group-text.sc-ir-extra-service-config{border-color:var(--ir-input-border-color)}.currency-ph.sc-ir-extra-service-config{padding:0;margin:0;color:#3b4781;display:flex;align-items:center;justify-content:center;padding:0 0 0 0.25rem;border-top:1px solid var(--ir-input-border-color);border-bottom:1px solid var(--ir-input-border-color);border-left:1px solid transparent;transition:border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;transition:border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.service-description-input.sc-ir-extra-service-config{height:70px !important}.service-description.sc-ir-extra-service-config .input-group-prepend.sc-ir-extra-service-config{background-color:#f4f5fa;border:1px solid var(--ir-input-border-color);border-top-left-radius:0.25rem;border-bottom-left-radius:0.25rem}.service-date-container.sc-ir-extra-service-config{padding:0;margin:0;display:flex;align-items:center;position:relative;width:100%;justify-content:center}.service-date-container.sc-ir-extra-service-config .btn-container.sc-ir-extra-service-config{position:absolute;right:5px;margin:0;display:flex;align-items:center;justify-content:center;padding:0}.service-description.sc-ir-extra-service-config .input-group-text.sc-ir-extra-service-config{height:fit-content;border:0;padding-top:0.75rem !important}.price-input-group.sc-ir-extra-service-config:focus-within .currency-ph.sc-ir-extra-service-config,.cost-input-group.sc-ir-extra-service-config:focus-within .currency-ph.sc-ir-extra-service-config{border-top:1px solid #1e9ff2;border-bottom:1px solid #1e9ff2;border-left:1px solid #1e9ff2}.currency-ph[data-state='error'].sc-ir-extra-service-config{border-color:var(--red, #ff4961)}.price-input.sc-ir-extra-service-config:focus{border-right-width:1px !important}.is-invalid.sc-ir-extra-service-config{background-image:none !important}.price-input.sc-ir-extra-service-config,.cost-input.sc-ir-extra-service-config{border-left:0}.row-group.sc-ir-extra-service-config{display:flex;flex-direction:column;gap:0.5rem}.extra-service-config__container.sc-ir-extra-service-config{display:flex;flex-direction:column;gap:1rem}@media (min-width: 640px){.row-group.sc-ir-extra-service-config{flex-direction:row;align-items:center;gap:0}.cost-label.sc-ir-extra-service-config{border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}.until-prepend.sc-ir-extra-service-config,.cost-input-placeholder.sc-ir-extra-service-config{border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.date-from.sc-ir-extra-service-config,.price-input.sc-ir-extra-service-config{border-right-width:0 !important;border-top-right-radius:0 !important;border-bottom-right-radius:0 !important}}.date-focused.sc-ir-extra-service-config{border-color:#1e9ff2}";const gh=bh;const mh=class{constructor(t){e(this,t);this.closeModal=a(this,"closeModal",7)}booking;service;open;closeModal;closeDialog(){this.closeModal.emit()}render(){return t("ir-drawer",{key:"de2bfa2e42395b3710b1813678c58eba9c6096da",style:{"--ir-drawer-width":"40rem","--ir-drawer-background-color":"var(--wa-color-surface-default)","--ir-drawer-padding-left":"var(--spacing)","--ir-drawer-padding-right":"var(--spacing)","--ir-drawer-padding-top":"var(--spacing)","--ir-drawer-padding-bottom":"var(--spacing)"},open:this.open,onDrawerHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.closeDialog()},label:g.entries.Lcz_ExtraServices},this.open&&t("ir-extra-service-config-form",{key:"4c55d9f8e07f36b7ed3cf109486cd98b79c274ff",onCloseModal:e=>{e.stopImmediatePropagation();e.stopPropagation();this.closeDialog()},booking:this.booking,service:this.service}),t("div",{key:"b63f866259a094c4d22ebbd1eae480dcc62bd6f8",slot:"footer",class:"ir__drawer-footer"},t("ir-custom-button",{key:"6aab7d9d3ced5f2d42130863bcf1ee54472bb904",class:`flex-fill`,size:"medium",appearance:"filled",variant:"neutral","data-drawer":"close"},g.entries.Lcz_Cancel),t("ir-custom-button",{key:"ba6ed41af8c4fdbdde63aa5a1892fb405a7b461c",type:"submit",loading:be("/Do_Booking_Extra_Service"),form:"extra-service-config-form",size:"medium",class:`flex-fill`,variant:"brand"},g.entries.Lcz_Save)))}};mh.style=gh;const wh=z.object({type:z.object({code:z.union([z.string().min(3),z.literal("")]).optional(),description:z.union([z.string(),z.literal("")]).optional()}),number:z.union([z.string().min(2),z.literal("")]).optional().nullable()});const yh=z.object({id:z.number().optional(),first_name:z.union([z.string().min(2),z.literal("")]).optional(),last_name:z.union([z.string().min(2),z.literal("")]).optional(),country_id:z.coerce.number().min(0).optional(),dob:z.string().nullable().optional().refine((e=>e===undefined||fe(e,"DD/MM/YYYY",true).isValid()||e===""||e===null),"Invalid date format").transform((e=>{if(e===undefined||e===""||e===null)return null;const t=fe(e,"DD/MM/YYYY",true).isValid();return t?null:fe(e,"DD/MM/YYYY").format("YYYY-MM-DD")})),id_info:wh.optional(),is_main:z.boolean().default(false)});function vh(e){yh.parse(e);const t=e=>e!==null&&e!==undefined&&e.trim()!=="";const i=[];if(e.is_main){if(!t(e.first_name)){i.push({path:["first_name"],code:oe.custom,message:"First name is required for main guest"})}if(!t(e.last_name)){i.push({path:["last_name"],code:oe.custom,message:"Last name is required for main guest"})}}const a=t(e.first_name)||t(e.last_name)||t(e.dob)||e.country_id!==null&&e.country_id!==undefined&&e.country_id>0||t(e.id_info?.number);if(a){if(!t(e.first_name)){i.push({path:["first_name"],code:oe.custom,message:"First name is required when other guest information is provided"})}if(!t(e.last_name)){i.push({path:["last_name"],code:oe.custom,message:"Last name is required when other guest information is provided"})}}if(i.length>=1){throw new N(i)}}const kh=z.object({booking_system_id:z.number().optional(),cost:z.coerce.number().nullable(),currency_id:z.number().min(1),description:z.string().min(1),end_date:z.string().nullable().optional().default(null),start_date:z.string().nullable().optional().default(null),price:z.coerce.number().min(.01),system_id:z.number().optional()});const xh=".sc-ir-extra-service-config-form-h{display:block;--ir-input-border-color:#cacfe7}.sc-ir-extra-service-config-form-h .input-group-text.sc-ir-extra-service-config-form{border-color:var(--ir-input-border-color)}.currency-ph.sc-ir-extra-service-config-form{padding:0;margin:0;color:#3b4781;display:flex;align-items:center;justify-content:center;padding:0 0 0 0.25rem;border-top:1px solid var(--ir-input-border-color);border-bottom:1px solid var(--ir-input-border-color);border-left:1px solid transparent;transition:border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;transition:border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.service-description-input.sc-ir-extra-service-config-form{height:70px !important}.service-description.sc-ir-extra-service-config-form .input-group-prepend.sc-ir-extra-service-config-form{background-color:#f4f5fa;border:1px solid var(--ir-input-border-color);border-top-left-radius:0.25rem;border-bottom-left-radius:0.25rem}.service-date-container.sc-ir-extra-service-config-form{padding:0;margin:0;display:flex;align-items:center;position:relative;width:100%;justify-content:center}.service-date-container.sc-ir-extra-service-config-form .btn-container.sc-ir-extra-service-config-form{position:absolute;right:5px;margin:0;display:flex;align-items:center;justify-content:center;padding:0}.service-description.sc-ir-extra-service-config-form .input-group-text.sc-ir-extra-service-config-form{height:fit-content;border:0;padding-top:0.75rem !important}.price-input-group.sc-ir-extra-service-config-form:focus-within .currency-ph.sc-ir-extra-service-config-form,.cost-input-group.sc-ir-extra-service-config-form:focus-within .currency-ph.sc-ir-extra-service-config-form{border-top:1px solid #1e9ff2;border-bottom:1px solid #1e9ff2;border-left:1px solid #1e9ff2}.currency-ph[data-state='error'].sc-ir-extra-service-config-form{border-color:var(--red, #ff4961)}.price-input.sc-ir-extra-service-config-form:focus{border-right-width:1px !important}.is-invalid.sc-ir-extra-service-config-form{background-image:none !important}.price-input.sc-ir-extra-service-config-form,.cost-input.sc-ir-extra-service-config-form{border-left:0}.row-group.sc-ir-extra-service-config-form{display:flex;flex-direction:column;gap:0.5rem}.extra-service-config__container.sc-ir-extra-service-config-form{display:flex;flex-direction:column;gap:1rem}@media (min-width: 640px){.row-group.sc-ir-extra-service-config-form{flex-direction:row;align-items:center;gap:0}.cost-label.sc-ir-extra-service-config-form{border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}.until-prepend.sc-ir-extra-service-config-form,.cost-input-placeholder.sc-ir-extra-service-config-form{border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.date-from.sc-ir-extra-service-config-form,.price-input.sc-ir-extra-service-config-form{border-right-width:0 !important;border-top-right-radius:0 !important;border-bottom-right-radius:0 !important}}.date-focused.sc-ir-extra-service-config-form{border-color:#1e9ff2}";const _h=xh;const Dh=class{constructor(t){e(this,t);this.closeModal=a(this,"closeModal",7);this.resetBookingEvt=a(this,"resetBookingEvt",7)}booking;service;s_service;error;fromDateClicked;toDateClicked;autoValidate;closeModal;resetBookingEvt;bookingService=new l;componentWillLoad(){if(this.service){this.s_service={...this.service}}}handleServiceChange(){if(this.service){this.s_service={...this.service}}}async saveAmenity(){try{this.autoValidate=true;kh.parse(this.s_service??{});await this.bookingService.doBookingExtraService({service:this.s_service,booking_nbr:this.booking.booking_nbr,is_remove:false});this.resetBookingEvt.emit(null);this.closeDialog()}catch(e){if(e instanceof N){this.error=true}console.error(e)}}closeDialog(){this.closeModal.emit()}updateService(e){let t=this.s_service;if(!t){t={cost:null,description:null,end_date:null,start_date:null,price:null,currency_id:this.booking.currency.id}}this.s_service={...t,...e}}render(){return t("form",{key:"d188ce1bda1bb3c88d1d1022ed1fd8daba3c2fc5",id:"extra-service-config-form",onSubmit:async e=>{e.preventDefault();this.saveAmenity()},class:"extra-service-config__container"},t("ir-validator",{key:"c4028e02b7886142bb05a95a0145ebd495a9e746",id:"amenity description-validator",schema:kh.shape.description},t("wa-textarea",{key:"45917b484d167b5023b6601ec6de6744acd5fce3",size:"small",defaultValue:this.s_service?.description,value:this.s_service?.description,onchange:e=>this.updateService({description:e.target.value}),id:"amenity-description","aria-label":"Amenity description",maxlength:250,label:g.entries.Lcz_Description})),t("ir-custom-date-picker",{key:"fc2f0177410ed07c17ae8fb531ff8e01c3ff5078",placeholder:"Select date",withClear:true,label:"Dates on",emitEmptyDate:true,date:this.s_service?.start_date,minDate:this.booking.from_date,maxDate:this.booking.to_date,onDateChanged:e=>this.updateService({start_date:e.detail.start?.format("YYYY-MM-DD")})}),t("ir-custom-date-picker",{key:"5048bf361e2bb5b7677a88d1003f6a380916d000",withClear:true,emitEmptyDate:true,placeholder:"Select date",date:this.s_service?.end_date,minDate:this.s_service?.start_date??this.booking.from_date,maxDate:this.booking.to_date,onDateChanged:e=>{e.stopImmediatePropagation();e.stopPropagation();this.updateService({end_date:e.detail.start?.format("YYYY-MM-DD")})},label:"Till and including"}),t("ir-validator",{key:"c93819853a37ca5e49d2e48b727e7bdb776a4f97",value:this.s_service?.price??null,schema:kh.shape.price},t("ir-custom-input",{key:"d5057bf3358ec244bacc6a5265f7b0d7277db273","onText-change":e=>{this.updateService({price:Number(e.detail)})},defaultValue:this.s_service?.price?.toString(),value:this.s_service?.price?.toString(),mask:"price",type:"text",label:g.entries.Lcz_Price},t("span",{key:"0d2d16a8aa21cf091486aa70e901a16544e491d1",slot:"start"},this.booking.currency.symbol))),t("ir-validator",{key:"30bcf898aeb5e0e35905e11cda6a491935a8c26e",value:this.s_service?.cost??null,schema:kh.shape.cost},t("ir-custom-input",{key:"821b07bbab7574239b5783952a3b70f6f3776a7b",defaultValue:this.s_service?.cost?.toString(),"onText-change":e=>this.updateService({cost:Number(e.detail)}),value:this.s_service?.cost?.toString(),mask:"price",label:g.entries.Lcz_Cost},t("span",{key:"239956cada4946285f225bea0389b7b8c7a08f02",slot:"start"},this.booking.currency.symbol))))}static get watchers(){return{service:["handleServiceChange"]}}};Dh.style=_h;const Ch=".sc-ir-extra-services-h{display:block}";const Mh=Ch;const Sh=class{constructor(t){e(this,t)}booking;render(){return t(i,{key:"82734c29bc703c5fec765c656851a3bf162ecdfd"},t("wa-card",{key:"bda2ace4caa81237435660658422ea955a62ee69"},t("p",{key:"0b31db261550d251f53acae6a97ea231467629ba",slot:"header",class:"font-size-large p-0 m-0 "},g.entries.Lcz_ExtraServices),t("wa-tooltip",{key:"d3768edede85018b02d602429a277ac78ebdf94a",for:"extra_service_btn"},"Add extra service"),t("ir-custom-button",{key:"3d079749ef12a5678e8d087f8148f21f50445fa4",slot:"header-actions",id:"extra_service_btn",size:"small",appearance:"plain",variant:"neutral"},t("wa-icon",{key:"a6d1caa6c187de2d5bd91a10a26d09a2da7b3857",name:"plus",style:{fontSize:"1rem"}})),(this.booking.extra_services??[])?.length===0&&t("div",{key:"2b8fb572dc3ca689f9324b5fb4fe4066e557d00e",class:"text-center p-1"},t("p",{key:"12df8d2bce03c6bc95426e6f20edcf9a5ded2911",class:"text-muted"},"No extra service recorded yet")),this.booking.extra_services?.map(((e,i)=>t(r,null,t("ir-extra-service",{bookingNumber:this.booking.booking_nbr,currencySymbol:this.booking.currency.symbol,key:e.booking_system_id,service:e}),i!==this.booking.extra_services.length-1&&t("wa-divider",null))))))}};Sh.style=Mh;const Yh=".sc-ir-filters-panel-h{display:block;height:100%}.filters-panel.sc-ir-filters-panel{height:100%}.filters-panel.sc-ir-filters-panel>.card.sc-ir-filters-panel{height:100%}.filters-panel__header.sc-ir-filters-panel{display:flex;align-items:center;justify-content:space-between}.filters-panel__title-group.sc-ir-filters-panel{display:flex;align-items:center;flex:1 1 auto;gap:0.5rem}.filters-panel__header-actions.sc-ir-filters-panel{display:flex;align-items:center;gap:0.5rem}.filters-panel__content.sc-ir-filters-panel{margin-top:0.5rem}.filters-panel__content.collapse.sc-ir-filters-panel:not(.show){display:none}.filters-panel__content-inner.sc-ir-filters-panel{display:flex;flex-direction:column}.filters-panel__footer.sc-ir-filters-panel{display:flex;align-items:center;gap:1rem;margin-top:0.75rem}.filters-panel__footer--start.sc-ir-filters-panel{justify-content:flex-start}.filters-panel__footer--center.sc-ir-filters-panel{justify-content:center}.filters-panel__footer--end.sc-ir-filters-panel{justify-content:flex-end}.filters-panel__footer--space-between.sc-ir-filters-panel{justify-content:space-between}.filters-panel__footer--space-around.sc-ir-filters-panel{justify-content:space-around}@media (min-width: 768px){.filters-panel--persistent.sc-ir-filters-panel .collapse-btn.sc-ir-filters-panel{display:none}.filters-panel--persistent.sc-ir-filters-panel .filters-panel__content.collapse.sc-ir-filters-panel:not(.show){display:block}}";const Eh=Yh;let Th=0;const Ih=class{constructor(t){e(this,t);this.filterToggle=a(this,"irFilterToggle",7);this.filterApply=a(this,"irFilterApply",7);this.filterReset=a(this,"irFilterReset",7)}filterTitle=g.entries.Lcz_Filters;collapseId;showCollapseButton=true;defaultCollapsed=false;collapsed;persistentOnDesktop=true;panelClass;cardClass="sales-filters-card";headerClass;contentClass;contentGap="0.5rem";actionsAlign="end";hideDefaultActions=false;collapseIconOpen="open_eye";collapseIconClosed="closed_eye";applyLabel=g.entries.Lcz_Apply;resetLabel=g.entries.Lcz_Reset;disableApply=false;disableReset=false;isApplyLoading=false;actionTestId="filter";filterToggle;filterApply;filterReset;internalCollapsed=false;generatedCollapseId=`ir-filters-panel-${++Th}`;componentWillLoad(){this.internalCollapsed=this.collapsed??this.defaultCollapsed}handleCollapsedChange(e){if(typeof e==="boolean"&&e!==this.internalCollapsed){this.internalCollapsed=e}}get targetId(){return this.collapseId||this.generatedCollapseId}toggleCollapse(e){e?.stopPropagation();const t=!this.internalCollapsed;this.internalCollapsed=t;this.collapsed=t;this.filterToggle.emit({collapsed:t})}handleReset(e){e.stopPropagation();this.filterReset.emit()}handleApply(e){e.stopPropagation();this.filterApply.emit()}renderDefaultIcon(){return t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",height:18,width:18},t("path",{fill:"currentColor",d:"M3.9 54.9C10.5 40.9 24.5 32 40 32l432 0c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9 320 448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6l0-79.1L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"}))}renderCollapseButton(e){if(!this.showCollapseButton){return null}return t("ir-button",{variant:"icon","aria-expanded":!e?"true":"false","aria-controls":this.targetId,class:"collapse-btn toggle-collapse-btn",icon_name:e?this.collapseIconClosed:this.collapseIconOpen,visibleBackgroundOnHover:true,onClickHandler:this.toggleCollapse.bind(this),btn_type:"button",style:{"--icon-size":"1.6rem"}})}render(){const e=this.internalCollapsed;const i={"filters-panel":true,"filters-panel--persistent":this.persistentOnDesktop};if(this.panelClass){i[this.panelClass]=true}const a={"filters-panel__header":true};if(this.headerClass){a[this.headerClass]=true}const r={"filters-panel__content-inner":true};if(this.contentClass){r[this.contentClass]=true}const o={"filters-panel__footer":true,"filter-actions":true,"d-flex":true,"align-items-center":true,[`filters-panel__footer--${this.actionsAlign}`]:true};const n=`card mb-0 p-1 d-flex flex-column ${this.cardClass||""}`.trim();return t("div",{key:"fde98b14768ef673055e85a6aff37260786f8461",class:i},t("div",{key:"1f052524be0b6024d3e090544f911b587d39f3e7",class:n},t("div",{key:"e40df00c425116bfb4a5531db811039e6416362f",class:a},t("div",{key:"6202c8fed0290a57ac80490391f0d4fa368adbdd",class:"filters-panel__title-group"},t("slot",{key:"81b41c7254d79f58f79333a110157f54dd2a0080",name:"header-icon"},this.renderDefaultIcon()),this.filterTitle&&t("h4",{key:"74079de33fd20e44335049724e8a9e7ec1198ed3",class:"filters-panel__title m-0 p-0 flex-grow-1"},this.filterTitle),t("slot",{key:"288fa0cf91c8e714c6623f67eff843774285e18d",name:"header-title-extra"})),t("div",{key:"d9dda00a3af2f305d2f3db590e7c614bee5b24b4",class:"filters-panel__header-actions"},t("slot",{key:"dd396cbda5e3ea71cae2b7b4dd414ae60ccf598a",name:"header-actions"}),this.renderCollapseButton(e))),t("div",{key:"817ce1dcb1ceab6f5ad035c770c761d0d0e2abbf",id:this.targetId,class:{"filters-panel__content":true,collapse:true,show:!e},"aria-hidden":e?"true":"false"},t("div",{key:"b36da6bf623a1c1615fb841240a802dc2053ce73",class:r,style:{gap:this.contentGap}},t("slot",{key:"ec9f863d74dcb20de22815bb1f7d8ec2121e9277"}),!this.hideDefaultActions&&t("div",{key:"5ea3becc3780d6d14de52326b99c58cc5a8de312",class:o},t("slot",{key:"074a6f87e8766ce5e75d13a36b4dc8bc3be59d6a",name:"actions"},t("ir-button",{key:"2018b115d0f0f46dfa44ef0c829181166974127a",btn_type:"button","data-testid":`${this.actionTestId}-reset`,text:this.resetLabel,size:"sm",btn_color:"secondary",btn_disabled:this.disableReset,onClickHandler:this.handleReset.bind(this)}),t("ir-button",{key:"ca7d5066f4111b3cb190a94e14b8bf843d8e1fac",btn_type:"button","data-testid":`${this.actionTestId}-apply`,isLoading:this.isApplyLoading,text:this.applyLabel,size:"sm",btn_disabled:this.disableApply,onClickHandler:this.handleApply.bind(this)})))))))}static get watchers(){return{collapsed:["handleCollapsedChange"]}}};Ih.style=Eh;const zh=e=>z.string().trim().min(1,e);const Oh=z.string().trim().email("Enter a valid email address").or(z.literal("")).optional().nullable();const Ah=z.object({first_name:zh("First name is required"),last_name:zh("Last name is required"),email:zh("Email is required").email("Enter a valid email address"),alternative_email:Oh,country_id:z.number({required_error:"Country is required"}).int("Country is required").positive("Country is required"),mobile:zh("Mobile number is required").min(5,"Mobile number is too short"),country_phone_prefix:zh("Country code is required"),notes:z.string().max(2e3,"Private note cannot exceed 2000 characters").optional()});const Bh=".sc-ir-guest-info-drawer-h{display:block}.drawer-form.sc-ir-guest-info-drawer{margin:0}.drawer-loading.sc-ir-guest-info-drawer{display:flex;align-items:center;justify-content:center;padding:2rem 1rem}.drawer-footer.sc-ir-guest-info-drawer{display:flex;gap:0.5rem}.loading-container.sc-ir-guest-info-drawer{height:100%;width:100%;display:flex;justify-content:center;align-items:center;margin:0;padding:0}";const Rh=Bh;const Ph=class{constructor(t){e(this,t);this.guestInfoDrawerClosed=a(this,"guestInfoDrawerClosed",7);this.resetBookingEvt=a(this,"resetBookingEvt",7);this.toast=a(this,"toast",7)}open;language="en";email;booking_nbr;ticket;guest=null;countries=[];isLoading=true;autoValidate=false;guestInfoDrawerClosed;resetBookingEvt;toast;get hostElement(){return o(this)}bookingService=new l;roomService=new we;token=new me;componentWillLoad(){if(this.ticket){this.token.setToken(this.ticket)}if(this.open&&!!this.token.getToken()){this.init()}}ticketChanged(e,t){if(e===t){return}this.token.setToken(this.ticket);this.init()}openChanged(e){if(!e){return}if(!!this.token.getToken()&&(!this.guest||!this.countries.length)){this.init()}}async init(){if(!this.open){return}try{this.isLoading=true;const[e,t,i]=await Promise.all([this.bookingService.fetchGuest(this.email),this.bookingService.getCountries(this.language),!g||!g.entries||Object.keys(g.entries).length===0?this.roomService.fetchLanguage(this.language):Promise.resolve(null)]);if(i){g.entries=i.entries;g.direction=i.direction}this.countries=t;this.guest=e?{...e,mobile:e.mobile_without_prefix}:null}catch(e){console.error(e)}finally{this.isLoading=false}}handleGuestChanged=e=>{this.guest={...this.guest,...e.detail}};handleDrawerHide=e=>{e.stopImmediatePropagation();e.stopPropagation();this.guestInfoDrawerClosed.emit({source:e.detail?.source??this.hostElement})};handleCancel=()=>{this.guestInfoDrawerClosed.emit({source:this.hostElement})};async editGuest(){try{this.autoValidate=true;Ah.parse(this.guest);await this.bookingService.editExposedGuest(this.guest,this.booking_nbr??null);this.toast.emit({type:"success",description:"",title:"Saved Successfully",position:"top-right"});this.resetBookingEvt.emit(null);this.guestInfoDrawerClosed.emit({source:this.hostElement})}catch(e){console.error(e)}}render(){const e=g?.entries?.Lcz_GuestDetails||"Guest info";return t("ir-drawer",{key:"946b2521f67486a8bc82574480fed92ce447ba87",open:this.open,label:e,onDrawerHide:this.handleDrawerHide,style:{"--ir-drawer-width":"40rem","--ir-drawer-background-color":"var(--wa-color-surface-default)","--ir-drawer-padding-left":"var(--spacing)","--ir-drawer-padding-right":"var(--spacing)","--ir-drawer-padding-top":"var(--spacing)","--ir-drawer-padding-bottom":"var(--spacing)"}},this.isLoading?t("div",{class:"loading-container"},t("wa-spinner",{style:{fontSize:"2rem"}})):t("ir-guest-info-form",{guest:this.guest,countries:this.countries,language:this.language,autoValidate:this.autoValidate,onGuestChanged:this.handleGuestChanged}),t("div",{key:"3dd48cc0b41bf77a34362b97d7881b9ee8e9e056",slot:"footer",class:"ir__drawer-footer"},t("ir-custom-button",{key:"f9502e50689a51ed4fa4c088a072a3d1ff834925",size:"medium",appearance:"filled",variant:"neutral",type:"button",onClickHandler:this.handleCancel},g.entries?.Lcz_Cancel||"Cancel"),t("ir-custom-button",{key:"e3f9223e4c0ca8c39c8df43f43e45e6760300c63",size:"medium",variant:"brand",onClick:()=>this.editGuest(),loading:be("/Edit_Exposed_Guest"),disabled:this.isLoading},g.entries?.Lcz_Save||"Save")))}static get watchers(){return{ticket:["ticketChanged"],open:["openChanged"]}}};Ph.style=Rh;const Nh=".sc-ir-guest-info-form-h{display:flex;flex-direction:column;gap:var(--wa-space-m, 1rem)}";const Lh=Nh;const $h=class{constructor(t){e(this,t);this.guestChanged=a(this,"guestChanged",7)}guest;language;countries;autoValidate=false;guestChanged;handleInputChange(e){this.guestChanged.emit(e)}render(){return t(i,{key:"f6daae2a016ca7a5f5d47e21f75218d31aa7893f"},t("ir-validator",{key:"9fc64ea8fc8224c5ff81dde00633690273ebdb7e",schema:Ah.shape.first_name,value:this.guest?.first_name??"",autovalidate:this.autoValidate,valueEvent:"text-change input input-change",blurEvent:"input-blur blur"},t("ir-custom-input",{key:"0fe056de91d0d10943b4874116936676c0420296",id:"firstName",value:this.guest?.first_name,required:true,"onText-change":e=>this.handleInputChange({first_name:e.detail}),label:g.entries?.Lcz_FirstName})),t("ir-validator",{key:"99afb414d907e9f8c31f10423bcf76b07687551b",schema:Ah.shape.last_name,value:this.guest?.last_name??"",autovalidate:this.autoValidate,valueEvent:"text-change input input-change",blurEvent:"input-blur blur"},t("ir-custom-input",{key:"e8f2d885a5731cb7956f3d055c3ef3a6239a4e5f",value:this.guest?.last_name,required:true,id:"lastName","onText-change":e=>this.handleInputChange({last_name:e.detail}),label:g.entries?.Lcz_LastName})),t("ir-validator",{key:"c5915e9ffa3bfc9a98d90809c300be3fb7f2b318",schema:Ah.shape.email,value:this.guest?.email??"",autovalidate:this.autoValidate,valueEvent:"text-change input input-change",blurEvent:"input-blur blur"},t("ir-custom-input",{key:"154a58b31845d7e5870783e673c1d7a304fc5250",label:g.entries?.Lcz_Email,id:"email",value:this.guest?.email,required:true,"onText-change":e=>this.handleInputChange({email:e.detail})})),t("ir-validator",{key:"d481516daf699dfde7467102376c745431a849b7",schema:Ah.shape.alternative_email,value:this.guest?.alternative_email??"",autovalidate:this.autoValidate,valueEvent:"text-change input input-change",blurEvent:"input-blur blur"},t("ir-custom-input",{key:"71ed797d31dc6d75cbf2461129fdcc06295d8629",label:g.entries?.Lcz_AlternativeEmail,id:"altEmail",value:this.guest?.alternative_email,"onText-change":e=>this.handleInputChange({alternative_email:e.detail})})),t("ir-validator",{key:"a17ecdc7fa581042ca40d0d8efa8359857bcbd4f",schema:Ah.shape.country_id,value:this.guest?.country_id??undefined,autovalidate:this.autoValidate,valueEvent:"countryChange"},t("ir-country-picker",{key:"131c31baebb04a77d9845e5c2ffc860ac9d00bfd",size:"small",variant:"modern",country:this.countries.find((e=>e.id===this.guest?.country_id)),label:g.entries?.Lcz_Country,onCountryChange:e=>this.handleInputChange({country_id:e.detail.id}),countries:this.countries})),t("ir-validator",{key:"670439c35ec6ab3e4d0b30eaa8167381c155ec47",schema:Ah.shape.mobile,value:this.guest?.mobile??"",autovalidate:this.autoValidate,valueEvent:"mobile-input-change"},t("ir-mobile-input",{key:"f4da263f62e73f8a9ea133da09305738c4d7187b",size:"small","onMobile-input-change":e=>{this.handleInputChange({mobile:e.detail.formattedValue})},"onMobile-input-country-change":e=>this.handleInputChange({country_phone_prefix:e.detail.phone_prefix}),value:this.guest?.mobile??"",required:true,countryCode:this.countries.find((e=>e.phone_prefix===this.guest?.country_phone_prefix))?.code,countries:this.countries})),t("ir-validator",{key:"97d908de56bbb43a4b02207dd1e781f2e5b1fe33",schema:Ah.shape.notes,value:this.guest?.notes??"",autovalidate:this.autoValidate,valueEvent:"wa-change change input",blurEvent:"wa-blur blur"},t("wa-textarea",{key:"0db1974934429ebe4c22eb5b2769fa936974df4b",size:"small",onchange:e=>this.handleInputChange({notes:e.target.value}),value:this.guest?.notes??"",label:g.entries?.Lcz_PrivateNote})))}};$h.style=Lh;const Fh=".sc-ir-guest-name-cell-h{box-sizing:border-box !important}.sc-ir-guest-name-cell-h *.sc-ir-guest-name-cell,.sc-ir-guest-name-cell-h *.sc-ir-guest-name-cell::before,.sc-ir-guest-name-cell-h *.sc-ir-guest-name-cell::after{box-sizing:inherit !important;padding:0;margin:0}[hidden].sc-ir-guest-name-cell{display:none !important}.sc-ir-guest-name-cell-h{display:block;font-size:0.93rem}";const Hh=Fh;const Uh=class{constructor(t){e(this,t)}name;render(){return t(i,{key:"14cb879db039e6808a0e4c0959ec0a1ab8181129"},this.name.first_name," ",this.name.last_name)}};Uh.style=Hh;const jh=".sc-ir-hk-archive-h{display:block}.unit-name.sc-ir-hk-archive{max-width:100px;display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0 !important;margin:0 !important;text-align:start}.table.sc-ir-hk-archive th.sc-ir-hk-archive,.table.sc-ir-hk-archive td.sc-ir-hk-archive{white-space:nowrap;width:fit-content;max-width:max-content !important;border:0;text-align:start;background-color:white;padding:0.25rem !important}.table.sc-ir-hk-archive th.sc-ir-hk-archive:first-child,.table.sc-ir-hk-archive td.sc-ir-hk-archive:first-child{padding-left:0 !important}";const Vh=jh;const Gh=class{constructor(t){e(this,t)}propertyId;language="en";ticket;filters={from_date:null,to_date:null,filtered_by_hkm:[],filtered_by_unit:[]};data=[];isLoading=null;fetchedData=false;selectedBooking;minSelectableDate=fe().subtract(90,"days").toDate();houseKeepingService=new ve;units=[];handleSideBarToggle(e){e.stopImmediatePropagation();e.stopPropagation();this.selectedBooking=null}componentWillLoad(){this.setUpUnits()}setUpUnits(){const e=[];y.roomsInfo.forEach((t=>{t.physicalrooms.forEach((t=>{e.push({id:t.id,name:t.name})}))}));this.units=e}async getArchivedTasks(e=false){const t=await this.houseKeepingService.getArchivedHKTasks({property_id:Number(this.propertyId),...this.filters,is_export_to_excel:e});this.data=[...t?.tasks||[]]?.map((e=>({...e,id:pe()})));this.fetchedData=true;return{tasks:t?.tasks,url:t?.url}}handleDateRangeChange(e){e.stopImmediatePropagation();e.stopPropagation();const{fromDate:t,toDate:i}=e.detail;this.updateFilters({from_date:t?t.format("YYYY-MM-DD"):null,to_date:i?i.format("YYYY-MM-DD"):null})}updateFilters(e){this.filters={...this.filters,...e}}async searchArchive(e){try{e.stopImmediatePropagation();e.stopPropagation();this.isLoading="search";await this.getArchivedTasks()}catch(e){console.log(e)}finally{this.isLoading=null}}async exportArchive(e){try{e.stopImmediatePropagation();e.stopPropagation();this.isLoading="excel";const{url:t}=await this.getArchivedTasks(true);O(t)}catch(e){console.log(e)}finally{this.isLoading=null}}render(){return t(i,{key:"ffbf6e14103f66e3162148d7437b441ae6117149"},t("ir-title",{key:"eaff42cc3f59adf8f50f77b151a85edb883cbb72",class:"px-1",label:"Cleaning Archives (90 days)",displayContext:"sidebar"}),t("section",{key:"fc59012724e2835d53181be8c7fe1a2813ded7fa",class:"px-1"},t("div",{key:"bff9e6ab7592fb616dd891e9aa311add295b032f",class:"d-flex"},t("ir-select",{key:"bfca34795328e67e58d537a407101e9c8b2ed4b0",class:"w-100",showFirstOption:false,data:[{text:"All units",value:"000"},,...this.units?.map((e=>({text:e.name,value:e.id.toString()}))).sort(((e,t)=>e.text.toLowerCase().localeCompare(t.text.toLowerCase())))],onSelectChange:e=>{e.stopImmediatePropagation();e.stopPropagation();if(e.detail==="000"){this.updateFilters({filtered_by_unit:[]})}else{this.updateFilters({filtered_by_unit:[e.detail]})}}}),ke?.hk_criteria?.housekeepers.length>1&&t("ir-select",{key:"b22373f15f8983132a72a5ae40b749d6c974b686",class:"ml-1 w-100",selectedValue:this.filters?.filtered_by_hkm?.length===ke.hk_criteria.housekeepers.length?"000":this.filters?.filtered_by_hkm[0]?.toString(),showFirstOption:false,data:[{text:"All housekeepers",value:"000"},...ke?.hk_criteria?.housekeepers.map((e=>({text:e.name,value:e.id.toString()}))).sort(((e,t)=>e.text.toLowerCase().localeCompare(t.text.toLowerCase())))],onSelectChange:e=>{if(e.detail==="000"){this.updateFilters({filtered_by_hkm:[]})}else{this.updateFilters({filtered_by_hkm:[e.detail]})}}})),t("div",{key:"8d0034b556334720b75cfdd93e654b7681ae60df",class:"d-flex mt-1 align-items-center"},t("ir-range-picker",{key:"116031acee115380fed91a177b814bdfcd7559b8",maxDate:fe().format("YYYY-MM-DD"),minDate:this.minSelectableDate,class:"mr-1",fromDate:this.filters.from_date?fe(this.filters.from_date,"YYYY-MM-DD"):null,toDate:this.filters.to_date?fe(this.filters.to_date,"YYYY-MM-DD"):null}),t("ir-button",{key:"3721498818dd782f714ce704e567babc22d10b6b",title:g.entries?.Lcz_Search,variant:"icon",icon_name:"search",class:"mr-1",isLoading:this.isLoading==="search",onClickHandler:e=>this.searchArchive(e)}),t("ir-button",{key:"5a8204b6f6ab1e91714403537759061b8d11c2af",title:g.entries?.Lcz_ExportToExcel,variant:"icon",icon_name:"file",isLoading:this.isLoading==="excel",onClickHandler:e=>this.exportArchive(e)})),this.fetchedData&&t(r,{key:"5e2ab76c93c1aa6518c230f6cbf2d4ea65064611"},this.data?.length===0&&!be("/Get_Archived_HK_Tasks")?t("p",{class:"text-center mt-2"},g.entries.Lcz_NoResultsFound):t("table",{class:"mt-2 table"},t("thead",null,t("th",{class:"pl-0"},g.entries.Lcz_Period),t("th",null,g.entries.Lcz_Housekeeper),t("th",null,g.entries.Lcz_Unit),t("th",null,g.entries.Lcz_BookingNumber)),t("tbody",null,this.data?.map((e=>t("tr",{key:e.id},t("td",{class:"pl-0"},e.date),t("td",null,e.house_keeper),t("td",null,t("ir-tooltip",{message:e.unit,customSlot:true,containerStyle:{width:"fit-content"}},t("span",{slot:"tooltip-trigger",class:`unit-name`},e.unit))),t("td",null,e.booking_nbr?t("ir-button",{btn_color:"link",btnStyle:{width:"fit-content",padding:"0",margin:"0"},labelStyle:{padding:"0"},text:e.booking_nbr.toString(),onClick:()=>{this.selectedBooking=e.booking_nbr}}):g.entries.Lcz_WasVacant)))))))),t("ir-sidebar",{key:"d8b64b6065995d5941befed15096177e50453d9a",onIrSidebarToggle:this.handleSideBarToggle.bind(this),open:!!this.selectedBooking,showCloseButton:false,sidebarStyles:{width:"80rem",background:"#F2F3F8"}},this.selectedBooking&&t("ir-booking-details",{key:"76e8161cd9b72e51e6eae9b6d9d9b53092dc440d",slot:"sidebar-body",hasPrint:true,hasReceipt:true,hasCloseButton:true,onCloseSidebar:()=>this.selectedBooking=null,is_from_front_desk:true,propertyid:Number(this.propertyId),hasRoomEdit:true,hasRoomDelete:true,bookingNumber:this.selectedBooking?.toString(),language:this.language,hasRoomAdd:true,ticket:this.ticket})))}};Gh.style=Vh;const qh=[10,20,50,100];function Kh(){const e=au();return{tasksList:e,currentPage:1,mobileCurrentPage:1,pageSize:20,mobilePageSize:20,totalPages:0,totalItems:0}}const Wh={searchField:"",tasks:[],filteredTasks:[],selectedTasks:[],pagination:Kh(),filters:null,isLoading:false,isFiltersLoading:false,isExportLoading:false,archiveOpen:false,archiveData:[],archiveFilters:{from_date:null,to_date:null,filtered_by_hkm:[],filtered_by_unit:[]},archiveLoading:null,sorting:{field:"date",direction:"ASC"},modalOpen:false,sidebarOpen:false};const{state:Xh,onChange:Jh}=m(Wh);function Qh(e){Xh.searchField=e;Xh.pagination.currentPage=1;ru()}function Zh(e){Xh.tasks=e;ru()}function eu(e){Xh.pagination={...Xh.pagination,...e}}function tu(e){eu({pageSize:e,currentPage:1});ou()}function iu(e){if(e>=1&&e<=Xh.pagination.totalPages){eu({currentPage:e})}}function au(){if(!y.roomsInfo){return qh}const e=y.roomsInfo.length;if(e<=10){return qh}const t=[...Array(4)].map(((t,i)=>{const a=e*(i+1);return i===3?a<100?100:a:a}));return t}function ru(){const e=Xh?.searchField?.toLowerCase()??"";if(!e){Xh.filteredTasks=[...Xh.tasks]}else{Xh.filteredTasks=Xh.tasks.filter((t=>t.unit?.name?.toLowerCase().includes(e)||t.status?.description?.toLowerCase().includes(e)||t.housekeeper?.toLowerCase().includes(e)))}ou()}function ou(){const e=Xh.filteredTasks.length;const t=Math.max(1,Math.ceil(e/Xh.pagination.pageSize));eu({totalItems:e,totalPages:t,currentPage:Math.min(Xh.pagination.currentPage,t)})}function nu(){const e=(Xh.pagination.currentPage-1)*Xh.pagination.pageSize;const t=e+Xh.pagination.pageSize;return Xh.filteredTasks.slice(e,t)}function su(){const{mobileCurrentPage:e,mobilePageSize:t}=Xh.pagination;const i=(e-1)*t;const a=i+t;return Xh.filteredTasks.slice(0,a)}function lu(){const{mobileCurrentPage:e,mobilePageSize:t}=Xh.pagination;return!(t*(e-1)+t>=Xh.filteredTasks.length)}function cu(e){if(!lu()){return}eu({mobileCurrentPage:e})}function du(e){Xh.selectedTasks=e}function hu(){Xh.selectedTasks=[]}function uu(e){const t=Xh.selectedTasks.findIndex((t=>t.id===e.id));if(t>-1){Xh.selectedTasks=Xh.selectedTasks.filter((t=>t.id!==e.id))}else{Xh.selectedTasks=[...Xh.selectedTasks,e]}}function pu(e){Xh.selectedTasks=[...e]}function fu(e){Xh.isLoading=e}function bu(e,t){Xh.sorting={field:e,direction:t};Xh.tasks=gu(Xh.tasks);ru()}function gu(e=Xh.filteredTasks){const{field:t,direction:i}=Xh.sorting;return[...e].sort(((e,a)=>{let r=e[t];let o=a[t];if(t==="status"){r=e.status?.description;o=a.status?.description}else if(t==="unit"){r=e.unit?.name;o=a.unit?.name}if(r<o)return i==="ASC"?-1:1;if(r>o)return i==="ASC"?1:-1;if(e.date<a.date)return-1;if(e.date>a.date)return 1;if(e.unit?.name<a.unit?.name)return-1;if(e.unit?.name>a.unit?.name)return 1;return 0}))}function mu(){return Xh.tasks.filter((e=>{const t=new Date(e.date);const i=new Date;i.setHours(23,59,59,999);return t<=i}))}function wu(){const e=mu();return e.length>0&&Xh.selectedTasks.length===e.length}const yu=".sc-ir-hk-tasks-h{display:block;box-sizing:border-box}.sc-ir-hk-tasks-h *.sc-ir-hk-tasks{box-sizing:border-box}.tasks-view.sc-ir-hk-tasks{display:flex;flex-direction:column}@media (min-width: 1024px){.tasks-view.sc-ir-hk-tasks{flex-direction:row}}";const vu=yu;const ku=class{constructor(t){e(this,t);this.clearSelectedHkTasks=a(this,"clearSelectedHkTasks",7)}get el(){return o(this)}language="";ticket="";propertyid;p;baseUrl;isLoading=false;isCleaningLoading=false;selectedDuration="";selectedHouseKeeper="0";selectedRoom=null;archiveOpened=false;property_id;isSidebarOpen;isApplyFiltersLoading;filters;modalCauses;clearSelectedHkTasks;hkNameCache={};roomService=new we;houseKeepingService=new ve;token=new me;table_sorting=new Map;modal;componentWillLoad(){if(this.baseUrl){this.token.setBaseUrl(this.baseUrl)}if(this.ticket!==""){this.token.setToken(this.ticket);this.init()}}ticketChanged(e,t){if(e===t){return}this.token.setToken(this.ticket);this.init()}handleCloseSidebar(e){e.stopImmediatePropagation();e.stopPropagation();this.isSidebarOpen=false}handleSortingChanged(e){e.stopImmediatePropagation();e.stopPropagation();const{field:t,direction:i}=e.detail;console.log(e.detail);if(t==="date"){return}this.table_sorting.set(t,i)}handleSkipSelectedTask(e){e.stopImmediatePropagation();e.stopPropagation();this.modalCauses={task:e.detail,cause:"skip"};this.modal?.openModal()}async init(){try{this.isLoading=true;fu(true);let e=this.propertyid;if(!this.propertyid&&!this.p){throw new Error("Property ID or username is required")}if(!e){console.log(e);const t=await this.roomService.getExposedProperty({id:0,aname:this.p,language:this.language,is_backend:true,include_units_hk_status:true});e=t.My_Result.id}this.property_id=e;const t=[this.houseKeepingService.getExposedHKSetup(this.property_id),this.roomService.fetchLanguage(this.language)];if(this.propertyid){t.push(this.roomService.getExposedProperty({id:this.propertyid,language:this.language,is_backend:true,include_units_hk_status:true}))}await Promise.all(t);const i=await this.houseKeepingService.getHkTasks({property_id:this.property_id,from_date:fe().format("YYYY-MM-DD"),to_date:fe().format("YYYY-MM-DD"),housekeepers:[],cleaning_frequency:(y.cleaning_frequency??ke?.hk_criteria?.cleaning_frequencies[0])?.code,dusty_window:ke?.hk_criteria?.dusty_periods[0]?.code,highlight_window:ke?.hk_criteria?.highlight_checkin_options[0]?.code});if(i?.tasks){this.updateTasks(i.tasks)}}catch(e){console.log(e)}finally{this.isLoading=false;fu(false)}}buildHousekeeperNameCache(){this.hkNameCache={};ke.hk_criteria?.housekeepers?.forEach((e=>{if(e.id!=null&&e.name!=null){this.hkNameCache[e.id]=e.name}}))}updateTasks(e){this.buildHousekeeperNameCache();Zh(e.map((e=>({...e,id:pe(),housekeeper:(()=>{const t=this.hkNameCache[e.hkm_id];if(t){return t}const i=ke.hk_criteria?.housekeepers?.find((t=>t.id===e.hkm_id))?.name;this.hkNameCache[e.hkm_id]=i;return i})()}))))}async handleHeaderButtonPress(e){e.stopImmediatePropagation();e.stopPropagation();const{name:t}=e.detail;switch(t){case"cleaned":case"clean-inspect":this.modal?.openModal();this.modalCauses={task:null,cause:"clean",status:t==="clean-inspect"?"004":"001"};break;case"export":const e=Array.from(this.table_sorting.entries()).map((([e,t])=>({key:e,value:t})));console.log(e);const{url:i}=await this.fetchTasksWithFilters(true);O(i);break;case"archive":this.isSidebarOpen=true;break}}handleSelectedTaskCleaningEvent(e){e.stopImmediatePropagation();e.stopPropagation();this.modalCauses={...e.detail,cause:"clean"};this.modal?.openModal()}async handleModalConfirmation(e){try{e.stopImmediatePropagation();e.stopPropagation();if(Xh.selectedTasks.length===0){return}this.isCleaningLoading=true;if(this.modalCauses?.cause==="skip"){const{booking_nbr:e,date:t,unit:i}=this.modalCauses.task;await this.houseKeepingService.editHkSkip({BOOK_NBR:e,DATE:t,COMMENT:"",HK_SKIP_ID:-1,HK_SKIP_REASON_CODE:"001",PR_ID:i.id})}else{await this.houseKeepingService.executeHKAction({actions:Xh.selectedTasks.map((e=>({description:"Cleaned",hkm_id:e.hkm_id===0?null:e.hkm_id,unit_id:e.unit.id,booking_nbr:e.booking_nbr,status:this.modalCauses?.status??"001"})))})}await this.fetchTasksWithFilters()}finally{hu();if(this.modalCauses){this.modalCauses=null}this.isCleaningLoading=false;this.modal.closeModal()}}async applyFilters(e){try{this.isApplyFiltersLoading=true;e.stopImmediatePropagation();e.stopPropagation();this.filters={...e.detail};await this.fetchTasksWithFilters()}catch(e){console.log(e)}finally{this.isApplyFiltersLoading=false}}async fetchTasksWithFilters(e=false){const{cleaning_periods:t,housekeepers:i,cleaning_frequencies:a,dusty_units:r,highlight_check_ins:o}=this.filters??{};const{tasks:n,url:s}=await this.houseKeepingService.getHkTasks({housekeepers:i,cleaning_frequency:a?.code,dusty_window:r?.code,highlight_window:o?.code,property_id:this.property_id,from_date:fe().format("YYYY-MM-DD"),to_date:t?.code||fe().format("YYYY-MM-DD"),is_export_to_excel:e});console.log(n);if(n){this.updateTasks(n)}return{tasks:n,url:s}}render(){if(this.isLoading){return t("ir-loading-screen",null)}return t(i,{"data-testid":"hk_tasks_base"},t("ir-toast",null),t("ir-interceptor",null),t("section",{class:"p-1 d-flex flex-column",style:{gap:"1rem"}},t("h3",null,"Housekeeping Tasks"),t("div",{class:"tasks-view ",style:{gap:"1rem"}},t("ir-tasks-filters",{isLoading:this.isApplyFiltersLoading,onApplyFilters:e=>{this.applyFilters(e)}}),t("div",{class:"d-flex w-100 flex-column",style:{gap:"1rem"}},t("ir-tasks-table",{onRowSelectChange:e=>{e.stopImmediatePropagation();e.stopPropagation();du(e.detail)},class:"flex-grow-1 w-100"})))),t("ir-modal",{autoClose:false,ref:e=>this.modal=e,isLoading:this.isCleaningLoading,onConfirmModal:this.handleModalConfirmation.bind(this),onCancelModal:()=>{if(this.modalCauses){hu();this.modalCauses=null}},iconAvailable:true,icon:"ft-alert-triangle danger h1",leftBtnText:g.entries.Lcz_Cancel,rightBtnText:g.entries.Lcz_Confirm,leftBtnColor:"secondary",rightBtnColor:"primary",modalTitle:g.entries.Lcz_Confirmation,modalBody:this.modalCauses?this.modalCauses?.cause==="clean"?this.modalCauses.task?`Update ${this.modalCauses?.task?.unit?.name} to Clean`:"Update selected unit(s) to Clean":"Skip cleaning and reschedule for tomorrow.":"Update selected unit(s) to Clean"}),t("ir-sidebar",{open:this.isSidebarOpen,id:"editGuestInfo",onIrSidebarToggle:e=>{e.stopImmediatePropagation();e.stopPropagation();this.isSidebarOpen=false},showCloseButton:false},this.isSidebarOpen&&t("ir-hk-archive",{ticket:this.token.getToken(),propertyId:this.property_id,slot:"sidebar-body"})))}static get watchers(){return{ticket:["ticketChanged"]}}};ku.style=vu;const xu=".icons-container.sc-ir-hk-team{display:flex;align-items:center;justify-content:end;gap:4px}.text-center.sc-ir-hk-team{text-align:center !important}.assignments-container.sc-ir-hk-team,.unassigned-container.sc-ir-hk-team{display:flex;align-items:center}.gap-16.sc-ir-hk-team{gap:16px}.unassigned-container.sc-ir-hk-team{gap:4px}.justify-between.sc-ir-hk-team{justify-content:space-between;margin-bottom:10px}.assignments-container.sc-ir-hk-team p.sc-ir-hk-team,h4.sc-ir-hk-team{margin:0}.outline-btn.sc-ir-hk-team{background:white;border:1px solid var(--blue);color:var(--blue);border-radius:5px;font-size:12px;padding:1px 0.25rem !important;margin:0}.outline-btn.sc-ir-hk-team:hover{color:white;background:var(--blue)}";const _u=xu;const Du=".ir-table-row.sc-ir-hk-team td.sc-ir-hk-team{padding:0.5rem 1rem !important;text-align:left;z-index:2;background-color:var(--wa-color-surface-default);white-space:nowrap;color:var(--wa-color-text-normal);box-sizing:border-box}.table--container.sc-ir-hk-team{flex:1 1 0%}.table--container.sc-ir-hk-team{overflow-x:auto}.table.sc-ir-hk-team td.sc-ir-hk-team{border-top:0;border-bottom:1px solid var(--wa-color-neutral-border-quiet, #abaeb9);transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.table.sc-ir-hk-team tbody.sc-ir-hk-team tr.sc-ir-hk-team:last-child>td.sc-ir-hk-team{border-bottom:0 !important}.table.sc-ir-hk-team thead.sc-ir-hk-team th.sc-ir-hk-team{border:none !important;background:#ececec;background:color-mix(in oklab, var(--wa-color-neutral-fill-quiet, #f1f2f3) 60%, transparent);color:#374151;padding:0.5rem 1rem !important;text-align:left}.data-table.sc-ir-hk-team thead.sc-ir-hk-team th.sc-ir-hk-team{box-sizing:border-box;background:var(--wa-color-surface-default) !important;padding-top:0.5rem !important;padding-bottom:0.5rem !important;border-bottom:1px solid var(--wa-color-neutral-90) !important;color:var(--wa-color-text-normal)}.data-table.sc-ir-hk-team .empty-row.sc-ir-hk-team{height:50vh !important;text-align:center;color:var(--wa-color-gray-60)}.data-table--pagination.sc-ir-hk-team{padding:0.5rem 1rem;position:sticky;bottom:0;background:var(--wa-color-surface-default);border-top:1px solid var(--wa-color-neutral-90)}.selected.sc-ir-hk-team td.sc-ir-hk-team{background:#e3f3fa !important}.selected.sc-ir-hk-team td.sc-ir-hk-team{color:var(--gray-dark) !important;transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.sortable.sc-ir-hk-team,.ir-table-row.sc-ir-hk-team{transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.sortable.sc-ir-hk-team{text-transform:capitalize}.sortable.sc-ir-hk-team:hover{color:#212529;background-color:#e2e8f0 !important;border-color:#dae0e5;cursor:pointer}.ir-table-row.sc-ir-hk-team:hover td.sc-ir-hk-team{background:#e2e6ea3f !important;background:var(--wa-color-neutral-fill-quiet, #f1f2f3) !important}.sortable.sc-ir-hk-team:active{color:#212529;background-color:#e2e8f0;border-color:#d3d9df}.sortable.sc-ir-hk-team svg.sc-ir-hk-team{color:var(--blue)}.sticky-column.sc-ir-hk-team{position:sticky !important;right:0;background-color:white}";const Cu=Du;const Mu=class{constructor(t){e(this,t)}get el(){return o(this)}currentTrigger=null;deletionTimout;renderAssignedUnits(e){if(e.assigned_units.length===0){return t("span",null,"0 -"," ",t("button",{class:"outline-btn",onClick:()=>this.currentTrigger={type:"unassigned_units",user:e}},g.entries.Lcz_Assign))}return t("span",null,e.assigned_units.length," -"," ",t("button",{onClick:()=>this.currentTrigger={type:"unassigned_units",user:e},class:"outline-btn"},"Edit"))}renderCurrentTrigger(){switch(this.currentTrigger?.type){case"unassigned_units":return t("ir-hk-unassigned-units",{slot:"sidebar-body",user:this.currentTrigger.user});case"user":return t("ir-hk-user",{slot:"sidebar-body",user:this.currentTrigger.user,isEdit:this.currentTrigger.isEdit});default:return null}}handleCloseSideBar(e){e.stopImmediatePropagation();e.stopPropagation();this.currentTrigger=null}handleDeletion(e){this.currentTrigger={type:"delete",user:e};this.deletionTimout=setTimeout((()=>{const e=this.el.querySelector("ir-delete-modal");if(!e)return;e.openModal()}),100)}disconnectedCallback(){clearTimeout(this.deletionTimout)}render(){if(!ke.hk_criteria){return null}const{assigned:e,total:a,un_assigned:r}=ke.hk_criteria.units_assignments;return t(i,{class:"card p-1"},t("section",null,t("ir-title",{label:g.entries.Lcz_HousekeepingTeam,justifyContent:"space-between"},t("div",{slot:"title-body",class:"assignments-container gap-16 m-0"},t("p",{class:"font-weight-bold m-0 p-0"},a," ",g.entries.Lcz_TotalUnits),t("p",{class:"m-0 p-0"},e," ",t("span",null,g.entries.Lcz_Assigned)),r>0&&t("button",{class:"outline-btn",onClick:()=>this.currentTrigger={type:"unassigned_units",user:null}},r," ",g.entries.Lcz_Unassigned))),t("p",{class:"m-0 p-0"},g.entries.Lcz_AsAnOption)),t("section",{class:"mt-1 table-responsive"},t("table",{class:"table"},t("thead",null,t("tr",null,t("th",{class:"text-left"},g.entries.Lcz_Name),t("th",null,g.entries.Lcz_Mobile),t("th",null,g.entries.Lcz_Username),t("th",null,g.entries.Lcz_UnitsAssigned),t("th",null,t("ir-icon",{class:"pl-1","data-testid":"new_user",title:g.entries.Lcz_CreateHousekeeper,onIconClickHandler:()=>{this.currentTrigger={type:"user",isEdit:false,user:null}}},t("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",height:"20",width:"17.5",viewBox:"0 0 448 512"},t("path",{fill:"currentColor",d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"})))))),t("tbody",null,ke.hk_criteria.housekeepers.map((e=>t("tr",{key:e.id,class:"ir-table-row"},t("td",{class:"text-left"},t("div",{class:"d-flex align-items-center",style:{gap:"0.5rem"}},e.name?.length>25?t("ir-popover",{trigger:"hover",content:e.name},t("span",null,e.name.slice(0,25),"...")):e.name,e.note&&t("ir-popover",{content:e.note},t("ir-button",{variant:"icon",icon_name:"note","data-toggle":"tooltip","data-placement":"bottom",title:"Click to view note"})))),t("td",{class:""},e.phone_prefix," ",e.mobile),t("td",null,e.username),t("td",null,this.renderAssignedUnits(e)),t("td",{class:""},t("div",{class:"icons-container"},t("ir-icon",{"data-testid":"edit",title:g.entries.Lcz_EditHousekeeper,onIconClickHandler:()=>{const{assigned_units:t,is_soft_deleted:i,is_active:a,...r}=e;this.currentTrigger={type:"user",isEdit:true,user:r}},icon:"ft-save color-ir-light-blue-hover h5 pointer sm-margin-right"},t("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",height:"20",width:"20",viewBox:"0 0 512 512"},t("path",{fill:"#6b6f82",d:"M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"}))),t("span",null," "),t("ir-icon",{"data-testid":"delete",title:g.entries.Lcz_DeleteHousekeeper,icon:"ft-trash-2 danger h5 pointer",onIconClickHandler:()=>this.handleDeletion(e)},t("svg",{slot:"icon",fill:"#ff2441",xmlns:"http://www.w3.org/2000/svg",height:"16",width:"14.25",viewBox:"0 0 448 512"},t("path",{d:"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"}))))))))))),t("ir-sidebar",{showCloseButton:false,open:this.currentTrigger!==null&&this.currentTrigger.type!=="delete",onIrSidebarToggle:()=>this.currentTrigger=null,style:{"--sidebar-width":this.currentTrigger?this.currentTrigger.type==="unassigned_units"?"max-content":"40rem":"max-content"}},this.renderCurrentTrigger()),this.currentTrigger?.type==="delete"&&t("ir-delete-modal",{user:this.currentTrigger.user}))}};Mu.style=_u+Cu;const Su=".sc-ir-hk-unassigned-units-h{display:block;--ir-root-active-color:#1e9ff2;--ir-root-inactive-color:#d2d2d2}table.sc-ir-hk-unassigned-units{width:100%}td.sc-ir-hk-unassigned-units{padding-top:3px;padding-bottom:3px}td.sc-ir-hk-unassigned-units:last-child{text-align:end}.title.sc-ir-hk-unassigned-units{min-width:230px !important}";const Yu=Su;const Eu=".sc-ir-hk-unassigned-units-h{height:100%}.sheet-container.sc-ir-hk-unassigned-units{display:flex !important;flex-direction:column !important;background:white;height:100vh;gap:1rem;z-index:1000}.sheet-container.sc-ir-hk-unassigned-units{height:-webkit-fill-available;height:100vh;height:100dvh}.sheet-footer.sc-ir-hk-unassigned-units{position:sticky;bottom:0;z-index:20;background:white;border-top:1px solid #e4e5ec;display:flex;flex-direction:column;padding:1rem;gap:0.5rem}.sheet-header.sc-ir-hk-unassigned-units{position:sticky;top:0;z-index:10;background:white}.sheet-body.sc-ir-hk-unassigned-units{flex:1 1 0%}@media (min-width: 768px){.sheet-footer.sc-ir-hk-unassigned-units{flex-direction:row;align-items:center}}";const Tu=Eu;const Iu=class{constructor(t){e(this,t);this.closeSideBar=a(this,"closeSideBar",7);this.resetData=a(this,"resetData",7)}user=null;renderAgain=false;closeSideBar;resetData;assignedUnits=new Map;housekeepingService=new ve;assignUnit(e,t,i){if(this.user){const a=this.user.assigned_units.find((t=>t.id===e));if(i&&a||!i&&!a){this.assignedUnits.delete(e)}else if(!i&&a){this.assignedUnits.set(e,{hkm_id:t,is_to_assign:false,unit_id:e})}else if(i){const i={hkm_id:t,is_to_assign:true,unit_id:e};this.assignedUnits.set(e,i)}}else{if(this.assignedUnits.has(e)&&!t){this.assignedUnits.delete(e);return}else{this.assignedUnits.set(e,{hkm_id:t,is_to_assign:true,unit_id:e})}}this.renderAgain=!this.renderAgain}async assignUnits(){try{await this.housekeepingService.manageExposedAssignedUnitToHKM(ke.default_properties.property_id,[...this.assignedUnits.values()]);this.resetData.emit(null)}catch(e){console.error(e)}finally{this.closeSideBar.emit(null)}}renderRooms(){if(!this.user){return ke.hk_criteria.units_assignments.unassigned_units?.map((e=>t("tr",{key:e.id},t("td",{class:""},e.name),t("td",{class:"sr-only"}),t("td",{class:"pl-1"},t("ir-select",{onSelectChange:t=>{let i=t.detail;if(i===""){i=null}else{i=+i}this.assignUnit(e.id,i,false)},data:ke.hk_criteria.housekeepers.map((e=>({text:e.name,value:e.id.toString()})))})))))}return y.roomsInfo.map((e=>{console.log(e);if(!e.is_active){return null}return e.physicalrooms?.map((e=>{if(!e["is_active"]){return null}let i=!ke.hk_criteria.units_assignments.unassigned_units?.find((t=>t.id.toString()===e.id.toString()));let a=[];const r=this.assignedUnits.get(e.id);if(r&&r.is_to_assign){a=[this.user];i=true}else{if(i){a=ke.hk_criteria.housekeepers.filter((t=>t.assigned_units.find((t=>t.id===e.id))))}}return t("tr",{key:e.id},t("td",null,e.name),t("td",null,i?a[0]?.name:""),t("td",null,t("ir-switch",{onCheckChange:t=>{const i=t.detail;this.assignUnit(e.id,this.user.id,i)},checked:i&&a[0]?.id===this.user.id})))}))}))}render(){return t("div",{key:"090c820f6ac7f8c38d06b031054b642c237f169e",class:"sheet-container"},t("ir-title",{key:"1bbac2965e2dade65efd571550b335d00cbb0d8a",class:"title sheet-header px-1",displayContext:"sidebar",label:!this.user?"Assingn Units":`Assignment for ${this.user.name}`}),t("section",{key:"68442922b67d7cc1dd5bd54cd07344cb9afded3a",class:"px-1 sheet-body"},t("table",{key:"224861ed92d05dec335eac9806c887495f59a1bc"},t("thead",{key:"5643a0dc8df57d0d9a09e22c79f54f9ddedfb42c"},t("th",{key:"600d0b8c86bf1a4cb35e5f03d69770a1302553e3",class:"sr-only"},g.entries.Lcz_RoomName),t("th",{key:"230fa371c653e72e9d05bfd7c3a3ad0a81f69003",class:"sr-only"},g.entries.Lcz_HousekeeperName),t("th",{key:"c82fd29d73df76d7f0780bcb56a1ebe4096ee476",class:"sr-only"},g.entries.Lcz_Actions)),t("tbody",{key:"18df5da339965b17870405e7f35f152a8e8c7fd0"},this.renderRooms()))),t("div",{key:"61a66bdac945ac7df605c63ac7d6881dcbe4b981",class:"sheet-footer"},t("ir-button",{key:"d23db2132babccc65b52200028bdd8393e06f003",onClickHandler:()=>this.closeSideBar.emit(null),class:"flex-fill",btn_styles:"w-100 justify-content-center align-items-center",btn_color:"secondary",text:g.entries.Lcz_Cancel}),t("ir-button",{key:"82d1265f125bb11679040fc7fccb557ec25dee42",isLoading:be("/Manage_Exposed_Assigned_Unit_To_HKM"),onClickHandler:this.assignUnits.bind(this),class:"flex-fill",btn_styles:"w-100  justify-content-center align-items-center",text:g.entries.Lcz_Confirm})))}};Iu.style=Yu+Tu;class zu{async sendVerificationEmail(){await ne(400)}async checkUserExistence(e){const{data:t}=await ye.post("/CheckUserExistence",e);return t.My_Result}async handleExposedUser(e){const{base_user_type_code:t,property_id:i,...a}=e;let r={...a};if([1,4].includes(Number(t))){r={...r,property_id:i}}const{data:o}=await ye.post("/Handle_Exposed_User",r);console.warn("data<==>",o);return o.My_Result}async getExposedPropertyUsers({property_id:e}){const{data:t}=await ye.post("/Get_Exposed_Property_Users",{property_id:e});return t.My_Result}}const Ou={PASSWORD:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()\-_=+]).{8,16}$/};const Au=".sc-ir-hk-user-h{display:block}";const Bu=Au;const Ru=".sc-ir-hk-user-h{height:100%}.sheet-container.sc-ir-hk-user{display:flex !important;flex-direction:column !important;background:white;height:100vh;gap:1rem;z-index:1000}.sheet-container.sc-ir-hk-user{height:-webkit-fill-available;height:100vh;height:100dvh}.sheet-footer.sc-ir-hk-user{position:sticky;bottom:0;z-index:20;background:white;border-top:1px solid #e4e5ec;display:flex;flex-direction:column;padding:1rem;gap:0.5rem}.sheet-header.sc-ir-hk-user{position:sticky;top:0;z-index:10;background:white}.sheet-body.sc-ir-hk-user{flex:1 1 0%}@media (min-width: 768px){.sheet-footer.sc-ir-hk-user{flex-direction:row;align-items:center}}";const Pu=Ru;const Nu=class{constructor(t){e(this,t);this.resetData=a(this,"resetData",7);this.closeSideBar=a(this,"closeSideBar",7)}user=null;isEdit=false;isLoading=false;autoValidate=false;userInfo={id:-1,mobile:"",name:"",note:"",password:"",property_id:null,username:null,phone_prefix:null};errors=null;showPasswordValidation=false;isUsernameTaken;resetData;closeSideBar;housekeepingService=new ve;default_properties={token:"",language:""};housekeeperSchema=z.object({name:z.string().min(2),mobile:z.string().min(1).max(14),password:z.string().nullable().refine((e=>{if(this.user&&!this.userInfo?.password){return true}return Ou.PASSWORD.test(e)}),{message:"Password must be at least 8 characters long."}),username:z.string().min(3).refine((async e=>{if(this.user&&this.user.username===e){return true}if(e.length>=3){return!await(new zu).checkUserExistence({UserName:e})}return true}),{message:"Username already exists."})});async componentWillLoad(){const{token:e,language:t,property_id:i}=xe();this.default_properties={token:e,language:t};if(!this.user){this.userInfo["property_id"]=i}if(this.user){this.autoValidate=true;this.userInfo={...this.user,password:""}}}updateUserField(e,t){this.userInfo={...this.userInfo,[e]:t}}async addUser(){try{this.isLoading=true;if(!this.autoValidate){this.autoValidate=true}const e={...this.userInfo,password:this.user&&this.userInfo.password===""?this.user.password:this.userInfo.password};console.log("toValidateUserInfo",e);await this.housekeeperSchema.parseAsync(e);if(this.errors){this.errors=null}await this.housekeepingService.editExposedHKM(e);this.resetData.emit(null);this.closeSideBar.emit(null)}catch(e){const t={};if(e instanceof N){e.issues.map((e=>{t[e.path[0]]=true}));this.errors=t}console.error(e)}finally{this.isLoading=false}}async handleBlur(e){e.stopImmediatePropagation();e.stopPropagation();if(this.user||!this.userInfo.name){return}const t=await this.housekeepingService.generateUserName(this.userInfo.name);this.updateUserField("username",t)}render(){return t("div",{key:"8cf5899d1717023a0e9bece3769a04426d6a30ca",class:"sheet-container"},t("ir-title",{key:"a0f19a3aa572c6def78d94ba2e56aa48ec352721",class:"px-1 sheet-header",displayContext:"sidebar",label:this.isEdit?g.entries.Lcz_EditHousekeeperProfile:g.entries.Lcz_CreateHousekeeperProfile}),t("section",{key:"9a539872f796c7cb08a1b717e9b466d1b32b3a58",class:"px-1 sheet-body"},t("ir-input-text",{key:"1e36de154665fa882c3ff6c2d50606a4a1389794",testId:"name",zod:this.housekeeperSchema.pick({name:true}),wrapKey:"name",autoValidate:this.autoValidate,error:this.errors?.name,label:g.entries.Lcz_Name,placeholder:g.entries.Lcz_Name,onTextChange:e=>this.updateUserField("name",e.detail),value:this.userInfo.name,onInputBlur:this.handleBlur.bind(this),maxLength:40}),t("ir-phone-input",{key:"76da94799cae9bf20b9a945b0cc9845c03763786",testId:"phone",placeholder:g.entries.Lcz_Mobile,error:this.errors?.mobile&&!this.userInfo?.mobile,language:this.default_properties.language,token:this.default_properties.token,default_country:y.country.id,phone_prefix:this.user?.phone_prefix,label:g.entries.Lcz_Mobile,value:this.userInfo.mobile,onTextChange:e=>{this.updateUserField("phone_prefix",e.detail.phone_prefix);this.updateUserField("mobile",e.detail.mobile)}}),t("div",{key:"0816bf8e934f9236d9b0b199037b39ac0084a088",class:"mb-1"},t("ir-textarea",{key:"ae91f18cbb941944b8b8da2050ddbde3a494d427",testId:"note",variant:"prepend",maxLength:250,label:g.entries.Lcz_Note,placeholder:g.entries.Lcz_Note,value:this.userInfo.note,onTextChange:e=>this.updateUserField("note",e.detail)})),t("ir-input-text",{key:"c910ab94b9bb3383eec27778abeaef8f4c1476de",testId:"username",zod:this.housekeeperSchema.pick({username:true}),wrapKey:"username",error:this.errors?.username,asyncParse:true,autoValidate:this.user?this.userInfo?.username!==this.user.username?true:false:this.autoValidate,errorMessage:this.errors?.username&&this.userInfo?.username?.length>=3?g.entries.Lcz_UsernameAlreadyExists:undefined,label:g.entries.Lcz_Username,placeholder:g.entries.Lcz_Username,value:this.userInfo.username,onTextChange:e=>this.updateUserField("username",e.detail)}),t("ir-input-text",{key:"f23eae43f5cb92dfcc621d0eeea03b358fecb442",testId:"password",autoValidate:this.user?!this.userInfo?.password?false:true:this.autoValidate,label:g.entries.Lcz_Password,value:this.userInfo.password,type:"password",maxLength:16,zod:this.housekeeperSchema.pick({password:true}),wrapKey:"password",error:this.errors?.password,onInputFocus:()=>this.showPasswordValidation=true,onInputBlur:()=>{},onTextChange:e=>this.updateUserField("password",e.detail)}),this.showPasswordValidation&&t("ir-password-validator",{key:"10ecaf7fcd52fa3a572a53cd84df89f2a2f561fa",password:this.userInfo.password})),t("div",{key:"54d34cb9a985222a337ef0284cf74ea301f62ab8",class:"sheet-footer"},t("ir-button",{key:"5dd4cc277f2a398ea3c02d73a0788a353b002060","data-testid":"cancel",onClickHandler:()=>this.closeSideBar.emit(null),class:"flex-fill",btn_styles:"w-100  justify-content-center align-items-center",btn_color:"secondary",text:g.entries.Lcz_Cancel}),t("ir-button",{key:"63204360ff88ef6342b21a3793438f4fb6be592c","data-testid":"save",isLoading:this.isLoading,onClickHandler:this.addUser.bind(this),class:"flex-fill",btn_styles:"w-100 justify-content-center align-items-center",text:g.entries.Lcz_Save})))}};Nu.style=Bu+Pu;const Lu=".sc-ir-housekeeping-h{display:block}";const $u=Lu;const Fu=class{constructor(t){e(this,t);this.toast=a(this,"toast",7)}language="";ticket="";propertyid;p;baseUrl;isLoading=false;toast;roomService=new we;houseKeepingService=new ve;propertyService=new Tt;token=new me;modal;selectedCleaningFrequency;componentWillLoad(){if(this.baseUrl){this.token.setBaseUrl(this.baseUrl)}if(this.ticket!==""){this.token.setToken(this.ticket);this.initializeApp()}}async handleResetData(e){e.stopImmediatePropagation();e.stopPropagation();await this.houseKeepingService.getExposedHKSetup(this.propertyid)}ticketChanged(e,t){if(e===t){return}this.token.setToken(this.ticket);this.initializeApp()}async initializeApp(){try{this.isLoading=true;let e=this.propertyid;if(!e){const t=await this.roomService.getExposedProperty({id:0,aname:this.p,language:this.language,is_backend:true,include_sales_rate_plans:true});e=t.My_Result.id}_e("default_properties",{token:this.ticket,property_id:e,language:this.language});const t=[];if(y.housekeeping_enabled){t.push(this.houseKeepingService.getExposedHKSetup(e))}t.push(this.roomService.fetchLanguage(this.language,["_HK_FRONT","_PMS_FRONT"]));if(this.propertyid){t.push(this.roomService.getExposedProperty({id:e,language:this.language,is_backend:true,include_sales_rate_plans:true}))}await Promise.all(t);this.selectedCleaningFrequency=y.cleaning_frequency?.code}catch(e){console.error(e)}finally{this.isLoading=false}}async saveAutomaticCheckInCheckout(e){e.stopImmediatePropagation();e.stopPropagation();try{await this.roomService.SetAutomaticCheckInOut({property_id:ke.default_properties.property_id,flag:e.detail==="auto"});this.toast.emit({position:"top-right",title:"Saved Successfully",description:"",type:"success"})}catch(e){console.log(e)}}async saveCleaningFrequency(e){e.stopImmediatePropagation();e.stopPropagation();try{await this.propertyService.setExposedCleaningFrequency({property_id:ke.default_properties.property_id,code:this.selectedCleaningFrequency});y.cleaning_frequency={code:this.selectedCleaningFrequency,description:""};this.toast.emit({position:"top-right",title:"Saved Successfully",description:"",type:"success"});this.modal.closeModal()}catch(e){console.log(e)}}render(){if(this.isLoading){return t("ir-loading-screen",null)}console.log(y.cleaning_frequency);return t(i,null,t("ir-interceptor",null),t("ir-toast",null),t("section",{class:"p-1"},t("h3",{class:"mb-2"},g.entries.Lcz_HouseKeepingAndCheckInSetup),t("div",{class:"card p-1"},t("ir-title",{borderShown:true,label:"Operations Settings"}),t("div",{class:"d-flex align-items-center mb-1"},t("p",{class:"my-0 py-0 mr-1"},g.entries.Lcz_CheckInOutGuestsAutomatically),t("ir-select",{showFirstOption:false,selectedValue:y.is_automatic_check_in_out?"auto":"manual",onSelectChange:e=>this.saveAutomaticCheckInCheckout(e),data:[{text:g.entries.Lcz_YesAsPerPropertyPolicy,value:"auto"},{text:g.entries.Lcz_NoIWillDoItManually,value:"manual"}]})),t("div",{class:"d-flex align-items-center"},t("p",{class:"my-0 py-0 mr-1"},g.entries.Lcz_CleaningFrequency,":"),t("ir-select",{showFirstOption:false,selectedValue:this.selectedCleaningFrequency,onSelectChange:e=>{e.stopImmediatePropagation();e.stopPropagation();this.selectedCleaningFrequency=e.detail;this.modal.openModal()},data:ke?.hk_criteria?.cleaning_frequencies.map((e=>({text:e.description,value:e.code})))}))),y.housekeeping_enabled&&t("ir-hk-team",{class:"mb-1"}),t("ir-modal",{autoClose:false,ref:e=>this.modal=e,isLoading:be("/Set_Exposed_Cleaning_Frequency"),onConfirmModal:this.saveCleaningFrequency.bind(this),iconAvailable:true,onCancelModal:()=>{this.selectedCleaningFrequency=y.cleaning_frequency?.code},icon:"ft-alert-triangle danger h1",leftBtnText:g.entries.Lcz_Cancel,rightBtnText:g.entries.Lcz_Confirm,leftBtnColor:"secondary",rightBtnColor:"primary",modalTitle:g.entries.Lcz_Confirmation,modalBody:"This action will reschedule all cleaning tasks. Do you want to continue?"})))}static get watchers(){return{ticket:["ticketChanged"]}}};Fu.style=$u;const Hu=".sc-ir-icon-h{margin:0;padding:0}.icon-button.sc-ir-icon{all:unset;margin:0;padding:0;color:#6b6f82}.icon-button.sc-ir-icon:hover{cursor:pointer;color:#104064}";const Uu=Hu;const ju=class{constructor(t){e(this,t);this.iconClickHandler=a(this,"iconClickHandler",7)}icon="ft-check";type="button";iconClickHandler;render(){return t("button",{key:"2ce10db0710f2e5a3307a3e67bc08533210777a8",type:this.type,class:"icon-button",onClick:()=>this.iconClickHandler.emit()},t("slot",{key:"9669ef0486ce3f7ec28e747d8488de7d7b7b5702",name:"icon"}))}};ju.style=Uu;const Vu=".sc-ir-icons-h{display:block;box-sizing:border-box;margin:0;padding:0}.icon.sc-ir-icons{height:var(--icon-size, 1.25rem);width:var(--icon-size, 1.25rem);margin:0;padding:0}";const Gu=Vu;const qu=class{constructor(t){e(this,t)}name;svgClassName;color;render(){const e=Ce[this.name]||null;if(!e){return null}return t("svg",{xmlns:"http://www.w3.org/2000/svg",color:this.color,viewBox:e.viewBox,class:`icon ${this.svgClassName}`},t("path",{fill:"currentColor",d:e.d}))}};qu.style=Gu;const Ku=".sc-ir-input-text-h{--ir-bg:#fff;--ir-primary:#1e9ff2;--ir-danger:#ff4961;--ir-border:#cacfe7;--ir-disabled-fg:#9aa1ac;--ir-readonly-bg:#f8f9fa;--ir-input-color:#3b4781;--ir-placeholder-color:#bbbfc6;--ir-floating-input-border:var(--ir-border);--ir-floating-input-border-radius:0.21rem;--ir-floating-input-height:2rem;--ir-focus-ring:none;--ir-focus-border-color:var(--ir-primary);--ir-floating-input-font-size:0.975rem;--ir-floating-input-line-height:1.45;--ir-floating-input-padding-y:0.75rem;--ir-floating-input-padding-x:1rem;--ir-floating-input-padding-x-with-affix:2rem;--ir-floating-label-fg:#6c757d;--ir-floating-label-fg-focus:#495057;--ir-floating-label-bg:#fff;--ir-floating-label-scale:0.88;--ir-floating-label-float-translateY:-70%;--ir-floating-label-resting-offset-inline:0.9rem;--ir-floating-label-resting-offset-inline-with-prefix:1.8rem;--ir-floating-input-affix-size:1rem;--ir-floating-input-affix-color:#6c757d;margin:0;padding:0;display:inline}.sc-ir-input-text-h{--blue:var(--ir-primary);--red:var(--ir-danger)}.border-theme.sc-ir-input-text{border:1px solid var(--ir-border)}.icon-container.sc-ir-input-text{color:#3b4781;border:1px solid var(--ir-border);font-size:var(--ir-floating-input-font-size);height:var(--ir-floating-input-height);background:var(--ir-bg);padding-right:0 !important;border-right:0;border-top-right-radius:0;border-bottom-right-radius:0;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}input.sc-ir-input-text:focus{border-color:var(--ir-primary) !important}.error-message.sc-ir-input-text{font-size:0.875rem;padding:0;margin:0.5rem 0 0;color:var(--ir-danger)}.ir-input[data-state='empty'].sc-ir-input-text{color:var(--ir-placeholder-color)}.input-container.sc-ir-input-text{display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;flex:1}.input-container.sc-ir-input-text input.sc-ir-input-text{padding-left:5px !important;padding-right:5px !important;border-left:0;border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.icon-container[data-state='focus'].sc-ir-input-text{border-color:var(--ir-primary)}.icon-container[data-disabled].sc-ir-input-text{background-color:#eceff1;border-color:rgba(118, 118, 118, 0.3)}.danger-border.sc-ir-input-text{border-color:var(--ir-danger)}.ir-floating-group.sc-ir-input-text{position:relative;display:block;border:1px solid var(--ir-floating-input-border);border-radius:var(--ir-floating-input-border-radius);background:var(--ir-bg);transition:border-color 120ms ease, box-shadow 120ms ease;padding:0}.ir-floating-group.sc-ir-input-text:focus-within{border-color:var(--ir-focus-border-color);box-shadow:var(--ir-focus-ring)}.ir-floating-group.has-error.sc-ir-input-text,.has-error.sc-ir-input-text .ir-floating-group.sc-ir-input-text{border-color:var(--ir-danger)}.ir-floating-group.is-disabled.sc-ir-input-text{background-color:#f1f3f5}.ir-floating-group.is-readonly.sc-ir-input-text{background-color:var(--ir-readonly-bg)}.ir-floating-input.sc-ir-input-text{width:100%;display:block;border:0;outline:0;background:transparent;color:var(--ir-input-color);font-size:var(--ir-floating-input-font-size);line-height:var(--ir-floating-input-line-height);border-radius:var(--ir-floating-input-border-radius);box-shadow:none;padding:var(--ir-floating-input-padding-y) var(--ir-floating-input-padding-x);height:var(--ir-floating-input-height)}.ir-floating-input.danger-border.sc-ir-input-text{box-shadow:none}.ir-floating-label.sc-ir-input-text{position:absolute;top:50%;transform:translateY(-50%);pointer-events:none;padding:0 0.4rem;color:var(--ir-floating-label-fg);background:transparent;transition:transform 120ms ease, color 120ms ease, top 120ms ease, background-color 120ms ease, opacity 120ms ease;opacity:0.95;line-height:1}.ir-floating-label.sc-ir-input-text:dir(rtl){right:var(--ir-floating-label-resting-offset-inline)}.ir-floating-label.sc-ir-input-text:dir(ltr){left:var(--ir-floating-label-resting-offset-inline)}.ir-floating-group.sc-ir-input-text:focus-within .ir-floating-label.sc-ir-input-text,.ir-floating-input.sc-ir-input-text:not(:placeholder-shown)+.ir-floating-label.sc-ir-input-text,.ir-floating-group[data-has-value='true'].sc-ir-input-text .ir-floating-label.sc-ir-input-text{top:0;transform:translateY(var(--ir-floating-label-float-translateY)) scale(var(--ir-floating-label-scale));background:var(--ir-floating-label-bg);color:var(--ir-floating-label-fg-focus);font-size:12px;padding:0}.ir-floating-group.has-error.sc-ir-input-text .ir-floating-label.sc-ir-input-text,.has-error.sc-ir-input-text .ir-floating-group.sc-ir-input-text .ir-floating-label.sc-ir-input-text{color:var(--ir-danger)}.ir-floating-group.is-disabled.sc-ir-input-text .ir-floating-label.sc-ir-input-text{color:var(--ir-disabled-fg)}@supports (-webkit-touch-callout: none){.ir-floating-input.sc-ir-input-text{border-radius:var(--ir-floating-input-border-radius)}}.prefix-container.sc-ir-input-text,.suffix-container.sc-ir-input-text{position:absolute;top:0;bottom:0;display:inline-flex;align-items:center;color:var(--ir-floating-input-affix-color);pointer-events:none}.prefix-container.sc-ir-input-text:dir(ltr){left:0.5rem}.suffix-container.sc-ir-input-text:dir(ltr){right:0.5rem}.prefix-container.sc-ir-input-text:dir(rtl){right:0.5rem}.suffix-container.sc-ir-input-text:dir(rtl){left:0.5rem}.sc-ir-input-text-s>[slot='prefix'],.sc-ir-input-text-s>[slot='suffix']{display:inline-flex;width:var(--ir-floating-input-affix-size);height:var(--ir-floating-input-affix-size)}.ir-floating-group[data-have-prefix='true'].sc-ir-input-text .ir-floating-input.sc-ir-input-text{padding:var(--ir-floating-input-padding-y) var(--ir-floating-input-padding-x-with-affix)}.ir-floating-group[data-have-prefix='true'].sc-ir-input-text .ir-floating-label.sc-ir-input-text:dir(ltr){left:var(--ir-floating-label-resting-offset-inline-with-prefix)}.ir-floating-group[data-have-prefix='true'].sc-ir-input-text .ir-floating-label.sc-ir-input-text:dir(rtl){right:var(--ir-floating-label-resting-offset-inline-with-prefix)}.no-slot.sc-ir-input-text{display:none}";const Wu=Ku;const Xu=class{constructor(t){e(this,t);this.textChange=a(this,"textChange",7);this.inputBlur=a(this,"inputBlur",7);this.inputFocus=a(this,"inputFocus",7)}get el(){return o(this)}name;value;label;placeholder;inputStyles="";required;readonly=false;type="text";submitted=false;inputStyle=true;textSize="md";labelPosition="left";labelBackground=null;labelColor="dark";labelBorder="theme";labelWidth=3;variant="default";disabled=false;error=false;mask;autoValidate=true;zod;asyncParse;wrapKey;inputForcedStyle;testId;maxLength;clearBaseStyles;errorMessage;autoComplete;inputContainerStyle;labelContainerClassname;inputFocused=false;textChange;inputBlur;inputFocus;inputRef;maskInstance;id;hasPrefixSlot;hasSuffixSlot;componentWillLoad(){if(this.el.id){this.id=this.el.id}else{this.id=pe()}this.hasPrefixSlot=this.haveSlotPresent("prefix");this.hasSuffixSlot=this.haveSlotPresent("suffix")}componentDidLoad(){if(this.mask)this.initMask()}handleMaskChange(){this.initMask()}handleValueChange(e,t){if(e!==t){this.validateInput(this.value)}}initMask(){if(!this.mask||this.maskInstance){return}this.maskInstance=Fe(this.inputRef,this.mask);this.maskInstance.on("accept",(()=>{const e=this.inputRef.value.trim()===""||this.maskInstance.unmaskedValue==="";if(e){this.inputRef.value="";this.textChange.emit(null)}else{this.inputRef.value=this.maskInstance.value;this.textChange.emit(this.maskInstance.value)}}))}haveSlotPresent(e){const t=this.el.querySelector(`[slot="${e}"]`);return t!==null}async validateInput(e,t=false){if(!this.autoValidate&&!t){if(this.error){this.updateErrorState(false)}return}if(this.zod){try{if(!this.asyncParse){this.zod.parse(this.wrapKey?{[this.wrapKey]:e}:e)}else{await this.zod.parseAsync(this.wrapKey?{[this.wrapKey]:e}:e)}if(this.error){this.updateErrorState(false)}}catch(e){console.log(e);this.updateErrorState(true)}}}handleInputChange(e){const t=e.target.value;const i=t==="";if(this.maskInstance){this.maskInstance.value=t}const a=i?null:this.maskInstance?this.maskInstance.value:t;this.textChange.emit(a)}updateErrorState(e){this.error=e;this.inputRef.setAttribute("aria-invalid",e?"true":"false")}handleBlur(e){this.validateInput(this.value,this.submitted);this.inputFocused=false;this.inputBlur.emit(e)}renderFloatingLabel(){const e=this.label||this.placeholder||"";const i=!!(this.value&&String(this.value).length>0);return t("div",{class:"form-group",style:this.inputContainerStyle},t("div",{class:`ir-floating-group ${this.error?"has-error":""} ${this.disabled?"is-disabled":""} ${this.readonly?"is-readonly":""}`,"data-has-value":String(i),"data-focused":String(this.inputFocused),"data-have-prefix":String(this.hasPrefixSlot),"data-have-suffix":String(this.hasSuffixSlot),part:"form-group"},t("span",{part:"prefix-container",class:{"prefix-container":true,"no-slot":!this.hasPrefixSlot}},t("slot",{name:"prefix"})),t("input",{part:"input","data-state":!!this.value?undefined:this.mask?"empty":undefined,maxLength:this.maxLength,"data-testid":this.testId,style:this.inputForcedStyle,id:this.id,name:this.name,ref:e=>this.inputRef=e,readOnly:this.readonly,type:this.type,class:`ir-input ir-floating-input ${this.inputStyles||""} ${this.error?"danger-border":""} text-${this.textSize}`,onBlur:this.handleBlur.bind(this),onFocus:e=>{this.inputFocused=true;this.inputFocus.emit(e)},placeholder:" ",autoComplete:this.autoComplete,autocomplete:this.autoComplete,value:this.value,onInput:this.handleInputChange.bind(this),required:this.required,disabled:this.disabled,"aria-invalid":String(this.error),"aria-required":String(this.required)}),t("label",{part:"label",htmlFor:this.id,class:"ir-floating-label"},e,this.required?" *":""),t("span",{part:"suffix-container",class:{"suffix-container":true,"no-slot":!this.hasSuffixSlot}},t("slot",{name:"suffix"}))),this.errorMessage&&this.error&&t("p",{part:"error-message",class:"error-message"},this.errorMessage))}render(){if(this.variant==="floating-label"){return this.renderFloatingLabel()}if(this.variant==="icon"){return t("fieldset",{class:"position-relative has-icon-left input-container"},t("label",{htmlFor:this.id,class:"input-group-prepend bg-white m-0"},t("span",{"data-disabled":this.disabled,"data-state":this.inputFocused?"focus":"",class:`input-group-text icon-container bg-white ${this.error?"danger-border":""}`,id:"basic-addon1"},t("slot",{name:"icon"}))),t("input",{maxLength:this.maxLength,"data-testid":this.testId,style:this.inputForcedStyle,"data-state":!!this.value?undefined:this.mask?"empty":undefined,id:this.id,ref:e=>this.inputRef=e,readOnly:this.readonly,type:this.type,class:`ir-input form-control bg-white pl-0 input-sm rate-input py-0 m-0 rateInputBorder ${this.error?"danger-border":""}`,onBlur:this.handleBlur.bind(this),onFocus:e=>{this.inputFocused=true;this.inputFocus.emit(e)},placeholder:this.placeholder,value:this.value,onInput:this.handleInputChange.bind(this),required:this.required,disabled:this.disabled,autoComplete:this.autoComplete}))}return t("div",{class:"form-group",style:this.inputContainerStyle},t("div",{class:"input-group row m-0"},this.label&&t("div",{class:`input-group-prepend col-${this.labelWidth} ${this.labelContainerClassname} p-0 text-${this.labelColor}`},t("label",{htmlFor:this.id,class:`input-group-text ${this.labelPosition==="right"?"justify-content-end":this.labelPosition==="center"?"justify-content-center":""} ${this.labelBackground?"bg-"+this.labelBackground:""} flex-grow-1 text-${this.labelColor} border-${this.labelBorder==="none"?0:this.labelBorder} `},this.label,this.required?"*":"")),t("input",{maxLength:this.maxLength,"data-testid":this.testId,style:this.inputForcedStyle,"data-state":!!this.value?undefined:this.mask?"empty":undefined,id:this.id,ref:e=>this.inputRef=e,readOnly:this.readonly,type:this.type,class:this.clearBaseStyles?`${this.inputStyles}`:`${this.error?"border-danger":""} form-control text-${this.textSize} col-${this.label?12-this.labelWidth:12} ${this.readonly?"bg-white":""} ${this.inputStyles}`,onBlur:this.handleBlur.bind(this),onFocus:e=>{this.inputFocused=true;this.inputFocus.emit(e)},placeholder:this.placeholder,autoComplete:this.autoComplete,autocomplete:this.autoComplete,value:this.value,onInput:this.handleInputChange.bind(this),required:this.required,disabled:this.disabled})),this.errorMessage&&this.error&&t("p",{class:"error-message"},this.errorMessage))}static get watchers(){return{mask:["handleMaskChange"],value:["handleValueChange"]}}};Xu.style=Wu;const Ju=".sc-ir-interactive-title-h{display:block;width:100%;--hk-green:green}*.sc-ir-interactive-title{box-sizing:border-box}.popover-title.sc-ir-interactive-title{position:relative;width:100%;height:100%;margin:0;padding:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;z-index:10;left:0;display:flex;align-items:center}.popover-container.sc-ir-interactive-title{position:absolute;bottom:0px;left:var(--ir-popover-left, 10px);background:rgb(0, 0, 0);color:white;min-width:100%;box-shadow:rgba(0, 0, 0, 0.2) 0px 2px 10px;z-index:9999;padding:3.5px 7px;border-radius:5px;pointer-events:none;opacity:0;transition:all 100ms ease;font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;font-style:normal;font-weight:400;line-height:1.45;text-decoration:none;text-shadow:none;font-size:0.875rem}.popover-container[data-state='show'].sc-ir-interactive-title{opacity:1}.hk-dot.sc-ir-interactive-title{inset:0;position:absolute;display:flex;align-items:center;justify-content:center;width:fit-content;padding:4px;left:auto;transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;padding-inline:var(--ir-popover-left);background:var(--ir-interactive-hk-bg, white);color:var(--dot-color, black)}.hk-dot.sc-ir-interactive-title-s>*[name='end']{height:12px}";const Qu=Ju;const Zu=class{constructor(t){e(this,t)}get el(){return o(this)}popoverTitle="";irPopoverLeft="10px";hkStatus=false;cropSize=20;broomTooltip;lastRenderedTitle="";titleContainerRef;popoverInstance;initializePopoverIfNeeded(e,t){if(this.lastRenderedTitle===t&&this.popoverInstance){return}this.disposePopover();const i=document.createElement("span");i.style.visibility="hidden";i.style.position="absolute";i.style.whiteSpace="nowrap";i.textContent=t;document.body.appendChild(i);const a=i.offsetWidth;document.body.removeChild(i);const r=e.clientWidth;const o=this.hkStatus?20:0;const n=a+o>r;if(n&&typeof $!=="undefined"){try{this.popoverInstance=$(e).popover({trigger:"hover",content:t,placement:"top",html:false,sanitize:true,delay:{show:300,hide:100}})}catch(e){console.error("Failed to initialize popover:",e)}}this.lastRenderedTitle=t}disposePopover(){if(this.popoverInstance&&typeof $!=="undefined"){try{$(this.titleContainerRef).popover("dispose");this.popoverInstance=null}catch(e){console.error("Failed to dispose popover:",e)}}}disconnectedCallback(){this.disposePopover()}render(){const e=this.popoverTitle||"";const a=e.length>this.cropSize;const r=a?e.slice(0,this.cropSize)+"...":e;return t(i,{key:"d91026873c9a0e23f0438e7e4e6b2e67483f3d11",style:{"--ir-popover-left":this.irPopoverLeft}},t("p",{key:"5d57fcb6429d446c5eeda93a34756eb36b4e2e47",ref:t=>{this.titleContainerRef=t;if(t&&e){setTimeout((()=>this.initializePopoverIfNeeded(t,e)),0)}},class:"popover-title",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"flex",alignItems:"center",gap:"4px"}},t("span",{key:"979828fea8c661845f3d22ed358c8c0f5fc11cc4",class:"cropped-title",style:{flexShrink:"1",minWidth:"0",overflow:"hidden",textOverflow:"ellipsis"}},r),this.hkStatus&&t("div",{key:"120805745293e163b7d79bf4fc45f24f4329e51c",title:this.broomTooltip,class:"hk-dot",style:{flexShrink:"0"}},t("slot",{key:"56333b73354a4253810aa26ccb3735abbdc47cd8",name:"end"}))))}};Zu.style=Qu;class ep extends Error{code;constructor(e,t){super(e);this.name="InterceptorError";this.code=t;Object.setPrototypeOf(this,ep.prototype)}}const tp=".page-loader.sc-ir-interceptor{width:1.25rem;height:1.25rem;border:2.5px solid #3f3f3f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}.loaderContainer.sc-ir-interceptor{padding:20px;display:flex;align-items:center;justify-content:center;border-radius:5px;background:white}.loadingScreenContainer.sc-ir-interceptor{position:fixed;top:0;left:0;height:100vh;width:100vw;z-index:100000;background:rgba(0, 0, 0, 0.2);pointer-events:all;display:flex;align-items:center;justify-content:center}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const ip=tp;const ap=class{constructor(t){e(this,t);this.toast=a(this,"toast",7)}handledEndpoints=["/Get_Exposed_Calendar","/ReAllocate_Exposed_Room","/Get_Exposed_Bookings","/UnBlock_Exposed_Unit"];suppressToastEndpoints=[];isShown=false;isLoading=false;isUnassignedUnit=false;endpointsCount=0;isPageLoadingStopped=null;showModal;requestUrl;baseOTPUrl;email;toast;otpModal;pendingConfig;pendingResolve;pendingReject;response;handleStopPageLoading(e){this.isLoading=false;this.isPageLoadingStopped=e.detail}componentWillLoad(){this.setupAxiosInterceptors()}setupAxiosInterceptors(){ye.interceptors.request.use(this.handleRequest.bind(this),this.handleError.bind(this));ye.interceptors.response.use(this.handleResponse.bind(this),this.handleError.bind(this))}extractEndpoint(e){return e.split("?")[0]}isHandledEndpoint(e){return this.handledEndpoints.includes(e)}handleRequest(e){const t=this.extractEndpoint(e.url);ge[t]="pending";e.params=e.params||{};if(this.isHandledEndpoint(t)&&this.isPageLoadingStopped!==t){if(t!=="/Get_Exposed_Calendar"){this.isLoading=true}else{if(this.endpointsCount>0){this.isLoading=true}}}if(t==="/Get_Exposed_Calendar"){this.endpointsCount=this.endpointsCount+1}return e}async handleResponse(e){const t=this.extractEndpoint(e.config.url);if(this.isHandledEndpoint(t)){this.isLoading=false;this.isPageLoadingStopped=null}ge[t]="done";if(t==="/Validate_Exposed_OTP"){return e}if(e.data.ExceptionCode==="OTP"){return this.handleOtpResponse({response:e,extractedUrl:t})}if(e.data.ExceptionMsg?.trim()){this.handleResponseExceptions({response:e,extractedUrl:t})}return e}handleResponseExceptions({response:e,extractedUrl:t}){this.handleError(e.data.ExceptionMsg,t,e.data.ExceptionCode);throw new ep(e.data.ExceptionMsg,e.data.ExceptionCode)}handleOtpResponse({extractedUrl:e,response:t}){this.showModal=true;this.email=t.data.ExceptionMsg;const i=e.slice(1);this.baseOTPUrl=i;if(i==="Check_OTP_Necessity"){let e;try{const i=typeof t.config.data==="string"?JSON.parse(t.config.data):t.config.data;e=i.METHOD_NAME}catch(t){console.error("Failed to parse request body for METHOD_NAME",t);e=i}this.requestUrl=e}else{this.requestUrl=i}this.pendingConfig=t.config;this.response=t;return new Promise(((e,t)=>{this.pendingResolve=e;this.pendingReject=t;setTimeout((()=>{this.otpModal?.openModal()}),10)}))}handleError(e,t,i){const a=this.suppressToastEndpoints.includes(t);if(!a||a&&!i){this.toast.emit({type:"error",title:e,description:"",position:"top-right"})}return Promise.reject(e)}async handleOtpFinished(e){if(!this.pendingConfig||!this.pendingResolve||!this.pendingReject){return}const{otp:t,type:i}=e.detail;if(i==="cancel"){const e={config:this.pendingConfig,data:{cancelled:true,baseOTPUrl:this.baseOTPUrl},status:0,statusText:"OTP Cancelled",headers:{},request:{}};this.pendingResolve(e)}else if(i==="success"){if(!t){this.pendingReject(new Error("OTP cancelled by user"))}else if(this.baseOTPUrl==="Check_OTP_Necessity"){this.pendingResolve(this.response)}else{try{const e={...this.pendingConfig,data:typeof this.pendingConfig.data==="string"?JSON.parse(this.pendingConfig.data):this.pendingConfig.data||{}};const t=await ye.request(e);this.pendingResolve(t)}catch(e){this.pendingReject(e)}}}this.pendingConfig=undefined;this.pendingResolve=undefined;this.pendingReject=undefined;this.showModal=false;this.baseOTPUrl=null}render(){return t(i,{key:"5ae7926d2d6250be859a9ab2a963b9588f8ea680"},this.isLoading&&!this.isPageLoadingStopped&&t("div",{key:"90c876c95f7f39477d6e03e6e7a63e38185091f0",class:"loadingScreenContainer"},t("div",{key:"c5a095a0ccf1d4466cfb5f4a9bfba20b46736349",class:"loaderContainer"},t("ir-spinner",{key:"2fcb84b90ac04223cfb43c2d10248205b23af89e"}))),this.showModal&&t("ir-otp-modal",{key:"6cfe5f60f91df27b1a9246a2e867a9b377f1ec80",email:this.email,baseOTPUrl:this.baseOTPUrl,requestUrl:this.requestUrl,ref:e=>this.otpModal=e,onOtpFinished:this.handleOtpFinished.bind(this)}))}};ap.style=ip;const rp="";const op=rp;const np=class{constructor(t){e(this,t);this.invoiceOpen=a(this,"invoiceOpen",7);this.invoiceClose=a(this,"invoiceClose",7)}open;booking;for="booking";roomIdentifier;autoPrint=false;invoiceInfo;invoiceOpen;invoiceClose;async openDrawer(){this.open=true;this.invoiceOpen.emit()}async closeDrawer(){this.open=false;this.invoiceClose.emit()}viewMode="invoice";isLoading;_id=`invoice-form__${pe()}`;render(){return t(i,{key:"97d05c76facccc5268e7888166fbc75fcf14c67c"},t("ir-drawer",{key:"e75dafa1786345c58b91ebc337f8acec49d714a4",style:{"--ir-drawer-width":"40rem","--ir-drawer-background-color":"var(--wa-color-surface-default)","--ir-drawer-padding-left":"var(--spacing)","--ir-drawer-padding-right":"var(--spacing)","--ir-drawer-padding-top":"var(--spacing)","--ir-drawer-padding-bottom":"var(--spacing)"},label:"Invoice",open:this.open,onDrawerHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.closeDrawer()}},t("div",{key:"2b655461fd3a5b4738a0964ce8638d718bed2bf7",class:"d-flex align-items-center",slot:"header-actions"},t("wa-switch",{key:"dea6cba32571f6b11953fe0fa2b4d29188a2bf26",onchange:e=>{if(e.target.checked){this.viewMode="proforma"}else{this.viewMode="invoice"}}},"Pro-forma")),this.open&&t("ir-invoice-form",{key:"7d3bde2889e7d6709aa3f7cb440d54a98a51f8a3",viewMode:this.viewMode,for:this.for,roomIdentifier:this.roomIdentifier,booking:this.booking,autoPrint:this.autoPrint,formId:this._id,invoiceInfo:this.invoiceInfo,onLoadingChange:e=>this.isLoading=e.detail}),t("div",{key:"ee0ac917957a5f4525fae267aa65c934d7c181d1",slot:"footer",class:"ir__drawer-footer"},t("ir-custom-button",{key:"a34e940777ac03d67a854ad511b4054a9884d6a7",size:"medium",appearance:"filled",class:"w-100 flex-fill",variant:"neutral",onClickHandler:()=>{this.closeDrawer()}},"Cancel"),t("ir-custom-button",{key:"8c85f3885e63a9c7305e1baa726a09bc87f6b76e",loading:this.isLoading,value:"invoice",type:"submit",form:this._id,class:"w-100 flex-fill",size:"medium",variant:"brand"},"Confirm"))))}};np.style=op;const sp="@layer wa-utilities {\n  .sc-ir-invoice-form-h[size='small'],\n  .wa-size-s {\n    font-size: var(--wa-font-size-s);\n  }\n\n  .sc-ir-invoice-form-h[size='medium'],\n  .wa-size-m {\n    font-size: var(--wa-font-size-m);\n  }\n\n  .sc-ir-invoice-form-h[size='large'],\n  .wa-size-l {\n    font-size: var(--wa-font-size-l);\n  }\n}\n\n.sc-ir-invoice-form-h {\n  display: block;\n  height: 100%;\n}\n.ir-invoice__container.sc-ir-invoice-form {\n  display: grid;\n  gap: var(--wa-space-l);\n  box-sizing: border-box;\n}\n.ir-invoice__service.sc-ir-invoice-form:last-child {\n  border-bottom-left-radius: var(--wa-border-radius-m);\n  border-bottom-right-radius: var(--wa-border-radius-m);\n}\n.ir-invoice__service.sc-ir-invoice-form:first-child {\n  border-top-left-radius: var(--wa-border-radius-m);\n  border-top-right-radius: var(--wa-border-radius-m);\n  border-top: var(--wa-form-control-border-width) var(--wa-form-control-border-style) var(--wa-form-control-border-color);\n}\n.ir-invoice__service.sc-ir-invoice-form {\n  border-bottom: var(--wa-form-control-border-width) var(--wa-form-control-border-style) var(--wa-form-control-border-color);\n  border-left: var(--wa-form-control-border-width) var(--wa-form-control-border-style) var(--wa-form-control-border-color);\n  border-right: var(--wa-form-control-border-width) var(--wa-form-control-border-style) var(--wa-form-control-border-color);\n  background-color: var(--wa-color-surface-default);\n  \n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n  width: 100%;\n}\n.ir-invoice__service.sc-ir-invoice-form:not(:disabled):hover {\n  background-color: color-mix(in srgb, var(--wa-color-surface-default) 95%, var(--wa-color-mix-hover));\n}\n.ir-invoice__checkbox.sc-ir-invoice-form, .ir-invoice__checkbox.sc-ir-invoice-form::part(base) {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  box-sizing: border-box;\n}\n.ir-invoice__checkbox.sc-ir-invoice-form::part(base) {\n  min-height: var(--wa-form-control-height);\n  padding: 0 var(--wa-form-control-padding-inline);\n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n  width: 100%;\n}\n.ir-invoice__checkbox.group.sc-ir-invoice-form::part(base) {\n  padding-block: var(--wa-form-control-padding-inline);\n  align-items: flex-start;\n}\n.ir-invoice__checkbox.sc-ir-invoice-form::part(label) {\n  display: flex;\n  width: 100%;\n}\n.ir-invoice__room-checkbox-container.sc-ir-invoice-form {\n  display: flex;\n  gap: 0.5rem;\n  width: 100%;\n  justify-content: space-between;\n  text-align: start;\n}\n.ir-invoice__room-checkbox-container.group.sc-ir-invoice-form {\n  flex-direction: column;\n}\n.ir-invoice__checkbox-price.sc-ir-invoice-form {\n  font-weight: 700;\n  color: var(--wa-color-neutral-900);\n  white-space: nowrap;\n  text-align: right;\n  flex: 1 1 0%;\n}\n.ir-invoice__form-control-label.sc-ir-invoice-form {\n  display: inline-flex;\n  color: var(--wa-form-control-label-color);\n  font-weight: var(--wa-form-control-label-font-weight);\n  line-height: var(--wa-form-control-label-line-height);\n  margin-block-end: 0.5em;\n}";const lp=sp;const cp=class{constructor(t){e(this,t);this.invoiceOpen=a(this,"invoiceOpen",7);this.invoiceClose=a(this,"invoiceClose",7);this.invoiceCreated=a(this,"invoiceCreated",7);this.loadingChange=a(this,"loadingChange",7)}viewMode="invoice";formId;open;booking;for="booking";roomIdentifier;autoPrint=false;invoiceInfo;selectedRecipient;isLoading;selectedItemKeys=new Set;invoicableKey;toBeInvoicedItems;invoiceDate=fe();notInvoiceableItemKeys=new Set;splitDisabledKeys=new Set;invoiceOpen;invoiceClose;invoiceCreated;loadingChange;room;bookingService=new l;invoiceTarget;componentWillLoad(){this.init()}handleViewModeChange(){this.enforceNonInvoiceableSelections()}handleBookingChange(){if(this.booking){this.selectedRecipient=this.booking.guest.id.toString();if(this.for==="room"&&this.roomIdentifier){this.room=this.booking.rooms.find((e=>e.identifier===this.roomIdentifier))}}this.setUpDisabledItems()}handleInvoiceInfoChange(){this.setupInvoicables(this.invoiceInfo)}setUpDisabledItems(){if(!this.booking||!this.invoicableKey?.size){this.notInvoiceableItemKeys=new Set;this.splitDisabledKeys=new Set;return}const e=(this.invoiceDate??fe()).clone().startOf("day");const t=new Set;this.splitDisabledKeys=new Set;const i=(i,a,r)=>{if(r?.checkedOut){return}if(typeof i!=="number"||!this.invoicableKey.has(i)||!a){return}const o=fe(a,"YYYY-MM-DD",true);if(o.isValid()&&e.isBefore(o.clone().startOf("day"))){t.add(i)}};const a=this.booking.rooms??[];a.forEach((e=>{i(e.system_id,e.to_date,{checkedOut:e?.in_out?.code==="002"})}));const r=this.booking.pickup_info;if(r){i(r?.system_id,r?.from_date??r?.date)}(this.booking.extra_services??[]).forEach((e=>{i(e.system_id,e?.from_date??e.start_date??e.end_date??this.booking.from_date)}));const o=T(a);if(o){const e=new Map(a.map((e=>[e.identifier,e])));o.heads.forEach((i=>{const a=o.chainOf.get(i)??[];if(a.length<=1){return}const r=a[a.length-1];const n=e.get(r);if(!n){return}const s=n.in_out?.code==="002";a.forEach((i=>{const a=e.get(i);if(!a||typeof a.system_id!=="number"||!this.invoicableKey.has(a.system_id)){return}if(s){t.delete(a.system_id);return}t.add(a.system_id);this.splitDisabledKeys.add(a.system_id)}))}))}this.notInvoiceableItemKeys=t;this.enforceNonInvoiceableSelections(t)}enforceNonInvoiceableSelections(e=this.notInvoiceableItemKeys??new Set){if(!e.size){return}const t=new Set(this.selectedItemKeys);let i=false;e.forEach((e=>{const a=this.splitDisabledKeys.has(e);if(this.viewMode==="proforma"&&!a){if(!t.has(e)){t.add(e);i=true}return}if(t.delete(e)){i=true}}));if(i){this.syncSelectedItems(t)}}syncSelectedItems(e){this.selectedItemKeys=e;const t=[];e.forEach((e=>{const i=this.invoicableKey?.get(e);if(i){t.push(i)}}));this.toBeInvoicedItems=t}canInvoiceRoom(e){return Boolean(e&&this.invoicableKey?.has(e.system_id))}hasInvoiceableRooms(e){return e.some((e=>this.canInvoiceRoom(e)))}getInvoiceableRoomIds(e){const t=[];e.forEach((e=>{if(this.canInvoiceRoom(e)){t.push(e.system_id)}}));return t}async init(){try{this.isLoading=true;let e=this.invoiceInfo;if(!this.invoiceInfo){e=await this.bookingService.getBookingInvoiceInfo({booking_nbr:this.booking.booking_nbr})}this.setupInvoicables(e);if(this.booking){this.selectedRecipient=this.booking.guest.id.toString();if(this.for==="room"&&this.roomIdentifier){this.room=this.booking.rooms.find((e=>e.identifier===this.roomIdentifier))}}this.invoiceTarget=await this.bookingService.getSetupEntriesByTableName("_INVOICE_TARGET")}catch(e){console.error(e)}finally{this.isLoading=false}}setupInvoicables(e){const t=(e.invoiceable_items??[]).filter((e=>e.is_invoiceable));this.invoicableKey=new Map(t.map((e=>[e.key,e])));this.syncSelectedItems(new Set(t.map((e=>e.key))));this.setUpDisabledItems()}async handleConfirmInvoice(e=false){try{this.loadingChange.emit(true);const t=this.selectedRecipient?.startsWith("room__")?this.selectedRecipient.replace("room__","").trim():"";let i;const a=e=>{let t=this.invoiceTarget.find((e=>e.CODE_NAME==="001"));if(!t){throw new Error(`Invalid code ${e}`)}return{code:t.CODE_NAME,description:t.CODE_VALUE_EN}};if(this.selectedRecipient==="guest"){i=a("002")}else{i=a("001")}const r={booking_nbr:this.booking.booking_nbr,currency:{id:this.booking.currency.id},Date:this.invoiceDate.format("YYYY-MM-DD"),items:this.toBeInvoicedItems,target:i,billed_to_name:t};await this.bookingService.issueInvoice({is_proforma:e,invoice:r});this.invoiceClose.emit()}catch(e){console.error(e)}finally{this.loadingChange.emit(false)}}getMinDate(){if(this.for==="room"){return this.room.to_date}const e=()=>{let e=fe();for(const t of this.booking.rooms){const i=fe(t.to_date,"YYYY-MM-DD");if(i.isBefore(e)){e=i.clone()}}return e};return e().format("YYYY-MM-DD")}getMaxDate(){return fe().format("YYYY-MM-DD")}computeRoomGroups(e){const t=new Map;e.forEach(((e,i)=>t.set(e.identifier,i)));if(!e.length){return{groups:[],indexById:t,hasSplitGroups:false}}const i=e=>{let t=Number.MAX_SAFE_INTEGER;for(const i of e){const e=Date.parse(i?.from_date??"");if(!Number.isNaN(e)){t=Math.min(t,e)}}return t};const a=T(e);if(!a){const a=[...e].sort(((e,i)=>{const a=Date.parse(e?.from_date??"")-Date.parse(i?.from_date??"");if(!Number.isNaN(a)&&a!==0){return a}return(t.get(e.identifier)??0)-(t.get(i.identifier)??0)}));return{groups:[{rooms:a,order:0,isSplit:false,sortKey:i(a)}],indexById:t,hasSplitGroups:false}}const r=new Map(e.map((e=>[e.identifier,e])));const o=[];const n=new Set;for(const e of a.heads){const s=a.chainOf.get(e)??[e];const l=s.map((e=>r.get(e))).filter((e=>Boolean(e)));if(!l.length)continue;const c=s.some((e=>{const t=a.parentOf.get(e);const i=a.childrenOf.get(e)??[];return Boolean(t)||i.length>0}))||l.some((e=>Boolean(e?.is_split)));if(c){l.forEach((e=>n.add(e.identifier)));const e=Math.min(...l.map((e=>t.get(e.identifier)??Number.MAX_SAFE_INTEGER)));o.push({rooms:l,order:e,sortKey:i(l),isSplit:true})}}for(const a of e){if(!n.has(a.identifier)){const e=t.get(a.identifier)??Number.MAX_SAFE_INTEGER;const r=[a];o.push({rooms:r,order:e,sortKey:i(r),isSplit:false})}}o.sort(((e,t)=>{if(e.sortKey!==t.sortKey){return e.sortKey-t.sortKey}return e.order-t.order}));const s=o.some((e=>e.isSplit));if(!s){const e=o.map((e=>e.rooms)).reduce(((e,t)=>e.concat(t)),[]).sort(((e,i)=>{const a=Date.parse(e?.from_date??"")-Date.parse(i?.from_date??"");if(!Number.isNaN(a)&&a!==0){return a}return(t.get(e.identifier)??0)-(t.get(i.identifier)??0)}));return{groups:[{rooms:e,order:0,sortKey:i(e),isSplit:false}],indexById:t,hasSplitGroups:false}}return{groups:o,indexById:t,hasSplitGroups:true}}renderRooms(){const e=this.booking?.rooms??[];if(!e.length||!this.invoicableKey?.size){return null}const{groups:i,hasSplitGroups:a}=this.computeRoomGroups(e);if(!a){const e=i[0].rooms;const a=e.filter((e=>this.canInvoiceRoom(e)));if(!a.length){return null}return a.map((e=>{const i=this.isSelected([e.system_id]);const a=this.isDisabled([e.system_id]);return t("div",{class:"ir-invoice__service",key:e.identifier},t("wa-checkbox",{disabled:a,size:"small",onchange:t=>{const i=t.target.checked;this.handleCheckChange({checked:i,system_id:e.system_id})},defaultChecked:i,checked:i,class:"ir-invoice__checkbox"},t("div",{class:"ir-invoice__room-checkbox-container"},t("b",null,e.roomtype.name),t("span",null,e.rateplan.short_name),t("span",{class:"ir-invoice__checkbox-price"},v(this.booking.currency.symbol,e.gross_total)))))}))}return i.map((e=>{if(!this.hasInvoiceableRooms(e.rooms)){return null}const i=this.getInvoiceableRoomIds(e.rooms);const a=this.isDisabled(i);const r=this.isSelected(i);return t("div",{class:"ir-invoice__service",key:e.order},t("wa-checkbox",{disabled:a,size:"small",onchange:e=>{const t=e.target.checked;this.handleCheckChange({checked:t,system_ids:i})},defaultChecked:r,checked:r,class:"ir-invoice__checkbox group"},t("div",{class:"ir-invoice__room-checkbox-container group"},e.rooms.map((e=>{if(!this.canInvoiceRoom(e)){return null}return t("div",{class:"d-flex align-items-center",style:{gap:"0.5rem"}},t("b",null,e.roomtype.name),t("span",null,e.rateplan.short_name),t("span",{class:"ir-invoice__checkbox-price"},v(this.booking.currency.symbol,e.gross_total)))})))))}))}handleCheckChange({checked:e,system_id:t,system_ids:i}){if(!this.invoicableKey){return}const a=[...Array.isArray(i)?i:[],...typeof t==="number"?[t]:[]].filter((e=>typeof e==="number"));if(!a.length){return}if(this.viewMode==="invoice"&&a.some((e=>this.notInvoiceableItemKeys.has(e)))){return}const r=new Set(this.selectedItemKeys);let o=false;a.forEach((t=>{if(!this.invoicableKey.has(t)){return}if(e){if(!r.has(t)){r.add(t);o=true}}else if(r.delete(t)){o=true}}));if(o){this.syncSelectedItems(r)}}isSelected(e=[]){if(!e?.length){return false}for(const t of e){if(typeof t==="number"&&this.selectedItemKeys.has(t)){return true}}return false}isDisabled(e=[]){if(this.viewMode==="proforma"||!e?.length){return false}return e.some((e=>typeof e==="number"&&this.notInvoiceableItemKeys.has(e)))}renderPickup(){const e=this.booking.pickup_info?.["system_id"];if(!this.invoicableKey?.has(e)){return null}const i=this.isSelected([e]);const a=this.isDisabled([e]);return t("div",{class:"ir-invoice__service"},t("wa-checkbox",{disabled:a,size:"small",onchange:t=>{const i=t.target.checked;this.handleCheckChange({checked:i,system_id:e})},defaultChecked:i,checked:i,class:"ir-invoice__checkbox"},t("div",{class:"ir-invoice__room-checkbox-container"},t("span",null,"Pickup"),t("span",{class:"ir-invoice__checkbox-price"},v(this.booking.currency.symbol,this.booking.pickup_info.selected_option.amount)))))}render(){if(this.isLoading){return t("div",{class:"drawer__loader-container"},t("ir-spinner",null))}return t(i,{size:"small"},t("form",{id:this.formId,onSubmit:e=>{e.preventDefault();const t=e.submitter;const i=this.viewMode==="proforma"||t?.value==="pro-forma";this.handleConfirmInvoice(i)},class:"ir-invoice__container"},t("ir-custom-date-picker",{onDateChanged:e=>{this.invoiceDate=e.detail.start;this.setUpDisabledItems()},label:"Date",date:this.invoiceDate.format("YYYY-MM-DD"),minDate:this.getMinDate(),maxDate:this.getMaxDate()}),t("ir-booking-billing-recipient",{onRecipientChange:e=>this.selectedRecipient=e.detail,booking:this.booking}),t("div",{class:"ir-invoice__services"},t("p",{class:"ir-invoice__form-control-label"},"Choose what to invoice ",t("span",{style:{color:"var(--wa-color-gray-60)",paddingLeft:"0.5rem"}}," (Disabled services are not eligible to be invoiced yet)")),t("div",{class:"ir-invoice__services-container"},this.renderRooms(),this.booking.pickup_info&&this.renderPickup(),this.booking.extra_services?.map((e=>{const i=e.system_id;if(!this.invoicableKey?.has(i)){return null}const a=this.isSelected([i]);const r=this.isDisabled([i]);return t("div",{key:e.system_id,class:"ir-invoice__service"},t("wa-checkbox",{disabled:r,size:"small",onchange:e=>{const t=e.target.checked;this.handleCheckChange({checked:t,system_id:i})},defaultChecked:a,class:"ir-invoice__checkbox",checked:a},t("div",{class:"ir-invoice__room-checkbox-container"},t("span",null,e.description),t("span",{class:"ir-invoice__checkbox-price"},v(this.booking.currency.symbol,e.price)))))}))))))}static get watchers(){return{viewMode:["handleViewModeChange"],booking:["handleBookingChange"],invoiceInfo:["handleInvoiceInfoChange"]}}};cp.style=lp;const dp=".logo.sc-ir-label{height:1.5rem;width:1.5rem}.sc-ir-label-h{display:flex;gap:5px;align-items:center}[data-empty].sc-ir-label-h{display:none !important}.icon.sc-ir-label{margin-left:3px;padding:0;margin-top:0;display:flex;align-items:center}.label_message.sc-ir-label{margin:0 3px;padding:0}.label_title.sc-ir-label{min-width:max-content;padding:0;margin:0;font-weight:600}.label_placeholder.sc-ir-label{color:#cacfe7;color:var(--wa-color-neutral-70);padding:0 !important;margin:0 !important}.icon-container.sc-ir-label{margin:0;padding:0}.country.sc-ir-label{height:16px;width:23px;border-radius:3px}svg.sc-ir-label{margin:0;padding:0}.label_wrapper_inline.sc-ir-label{display:inline;max-width:100%;gap:5px}.label_wrapper_flex.sc-ir-label{display:flex;align-items:center;gap:5px;max-width:100%}.label_title.sc-ir-label{font-weight:600;white-space:nowrap;display:inline}.label_message.sc-ir-label{display:inline;white-space:normal;word-break:break-word}";const hp=dp;const up=class{constructor(t){e(this,t)}labelText;content;display="flex";renderContentAsHtml=false;image=null;isCountryImage=false;imageStyle="";ignoreEmptyContent=false;placeholder;containerStyle;render(){if(!this.placeholder&&!this.content&&!this.ignoreEmptyContent){return t(i,{"data-empty":true})}return t(i,{class:this.image?"align-items-center":""},t("div",{class:`${this.display==="inline"?"label_wrapper_inline":"label_wrapper_flex"} `,style:this.containerStyle},this.labelText&&t("p",{class:"label_title"},this.labelText),t("slot",{name:"prefix"}),this.image&&t("img",{src:this.image.src,alt:this.image.alt??this.image.src,class:`p-0 m-0 ${this.isCountryImage?"country":"logo"} ${this.image.style??""} ${this.imageStyle??""}`}),this.content?this.renderContentAsHtml?t("p",{class:"label_message",innerHTML:this.content}):t("p",{class:"label_message"},this.content):t("p",{class:"label_placeholder"},this.placeholder),t("slot",null),t("slot",{name:"suffix"})))}};up.style=hp;const pp=".sc-ir-listing-header-h{display:block;margin:0;padding:0;--ir-date-range-border:#cacfe7;--ir-date-range-width:242px;position:relative}h3.sc-ir-listing-header{margin:0}ir-input-text.sc-ir-listing-header{width:300px}.booking-search-field.sc-ir-listing-header{margin-left:0px;display:flex;align-items:center;gap:14px}.booking-container.sc-ir-listing-header{gap:14px}.filters-container.sc-ir-listing-header{gap:10px;justify-content:space-between}.buttons-container.sc-ir-listing-header{gap:14px;color:#104064}.booking-dates-container.sc-ir-listing-header{position:relative;box-sizing:border-box;background:white;padding:0.75rem 1rem;height:2rem;border-radius:0.21rem;border:1px solid #cacfe7;display:flex;align-items:center;gap:0.5rem;margin:0}.booking-dates-container.sc-ir-listing-header span.sc-ir-listing-header{padding:0;margin:0;display:flex;align-items:center;justify-content:center;height:2rem}.date-picker-wrapper.sc-ir-listing-header{position:relative;cursor:default;box-sizing:border-box;padding:0 0.5rem;height:2rem;display:flex;align-items:center;gap:5px;flex-shrink:0;cursor:pointer}.date-picker-wrapper.sc-ir-listing-header:hover .date-display.sc-ir-listing-header{color:var(--blue)}.date-picker-wrapper[data-option='from-date'].sc-ir-listing-header{padding-right:0;cursor:pointer}.date-display.sc-ir-listing-header{background:inherit;margin:0;padding:0;display:flex;align-items:center;font-size:0.975rem;line-height:1.45;height:2rem;color:#3b4781;white-space:nowrap;padding-right:5px;cursor:pointer}.hidden-date-picker.sc-ir-listing-header{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0}.new-booking-container.sc-ir-listing-header{position:absolute;right:10px;top:5px}.new-booking-btn.sc-ir-listing-header{all:unset;cursor:pointer;color:#104064}.new-booking-btn.sc-ir-listing-header:hover{color:#0b2538}.seperator-container.sc-ir-listing-header{margin-top:10px;justify-content:center !important;gap:14px}.seperator-container.sc-ir-listing-header span.sc-ir-listing-header{display:block;height:1px;background:var(--gray);width:45%;max-width:200px;margin:0}@media (max-width: 575.98px){.sc-ir-listing-header-h{--ir-date-range-width:100%}.flex-fill-sm-none.sc-ir-listing-header{flex:1 1 auto}.flex-fill-sm-none.sc-ir-listing-header label.sc-ir-listing-header{width:100px}.buttons-container.sc-ir-listing-header{justify-content:center !important;align-items:center !important;gap:40px}}@media (min-width: 1200px){.booking-search-field.sc-ir-listing-header{margin-left:40px;width:100%;max-width:400px}}@media (min-width: 1600px){.flex-fill-sm-none.sc-ir-listing-header{flex:0 0 auto}.booking-search-field.sc-ir-listing-header{margin-left:40px}}";const fp=pp;const bp=class{constructor(t){e(this,t);this.preventPageLoad=a(this,"preventPageLoad",7)}propertyId;language;p;inputValue="";isLoading=null;preventPageLoad;bookingListingService=new Te;async handleSearchClicked(e){if(this.inputValue!==""){if(/^-?\d+$/.test(this.inputValue.trim())){Ie("book_nbr",this.inputValue.trim())}else if(this.inputValue[3]==="-"){Ie("book_nbr",this.inputValue.trim())}else{Ie("name",this.inputValue.trim())}}if(this.inputValue===""&&(ze.userSelection.book_nbr!==""||ze.userSelection.name!=="")){ze.userSelection={...ze.userSelection,name:"",book_nbr:""}}this.isLoading=e?"excel":"search";this.preventPageLoad.emit("/Get_Exposed_Bookings");await this.bookingListingService.getExposedBookings({...ze.userSelection,start_row:0,end_row:20,is_to_export:e});this.isLoading=null;if(ze.download_url){O(ze.download_url)}}async handleClearUserField(){Ne();if(this.inputValue){this.inputValue=""}await this.bookingListingService.getExposedBookings({...ze.userSelection,start_row:0,end_row:20,is_to_export:false})}render(){const e=ae(ze.userSelection.userTypeCode);return t(i,{key:"5a2cfd6d6e4033ea0e3bc99e7994bd29d8392c37"},t("section",{key:"40e26ca62005997946229175a5a7ce82cdb5722d",class:"d-flex align-items-center "},t("div",{key:"3315baabe46c3f84ec9e493cf4899cdfe1454421",class:"d-flex flex-fill flex-column flex-md-row align-items-md-center booking-container"},t("div",{key:"6bee5dc073b847e17898a005d07e1ac3cd6474f4",class:"d-flex mb-1 d-md-none align-items-center justify-content-bettween width-fill"},t("h3",{key:"04e86e4591752a7c2c91fac3b42239ccda5543fe",class:"page-title"},g.entries?.Lcz_Bookings),t("div",{key:"dca72ce576f9881aceecfe6d9b2fc1a53e877398"},!e&&t("igl-book-property-container",{key:"b5642e3f8bdad46f9b4a1c7a4263a2a646464d8b",p:this.p,withIrToastAndInterceptor:false,propertyid:this.propertyId,language:this.language,title:g.entries.Lcz_CreateNewBooking,ticket:ze.token},t("ir-custom-button",{key:"21d42a0e325325fae3459a816da009facc84e966",id:"new-booking",class:"new-booking-btn",variant:"brand",appearance:"plain",slot:"trigger"},t("wa-icon",{key:"dbe6364e3927ba33751feca0d1677d10c9875428",name:"plus",style:{fontSize:"1.2rem"}}))))),t("h3",{key:"0d27390d525d05797233ab74a35991fe83628d3e",class:"d-none d-md-block page-title"},g.entries?.Lcz_Bookings),t("form",{key:"5d3761e49b2e5c305ba7641a47593a137fad0b3a",onSubmit:e=>{e.preventDefault();console.log(this.inputValue);this.handleSearchClicked(false)},class:"booking-search-field width-fill"},t("ir-custom-input",{key:"d098ca307343bc72c8f007fad9eee1a7161cf91f",class:"flex-fill w-100",value:this.inputValue,"onText-change":e=>this.inputValue=e.detail,size:"small",placeholder:g.entries?.Lcz_FindBookNbrorName},t("wa-icon",{key:"db81167d972b06f598c9d8ae1a5fec0b26a68289",name:"magnifying-glass",slot:"start"})),t("h5",{key:"f38f1d7814437dcc99e74df4a634d059f145f788",class:"m-0 font-weight-bold d-none d-sm-block"},g.entries?.Lcz_Or))),t("div",{key:"56a7f4638b7a1d9f1a8120142c4c9afc232501f8",class:"d-none d-md-block"},t("wa-tooltip",{key:"28b1b7f7ad7a94eae2ed13d770cd33117cc2bdf5",for:"new-booking"},"Create new booking"),!e&&t("igl-book-property-container",{key:"1d6b0d4b8aa61f966fd9613223539bfbb4607834",p:this.p,withIrToastAndInterceptor:false,propertyid:this.propertyId,language:this.language,title:g.entries.Lcz_CreateNewBooking,ticket:ze.token},t("ir-custom-button",{key:"4a6c955133c65ff7c3fcb4aef62a5262dbe91620",id:"new-booking",variant:"brand",appearance:"plain",slot:"trigger"},t("wa-icon",{key:"64e494bdd22521a13e1b797f0d4a238243f990ca",name:"plus",style:{fontSize:"1.2rem"}}))))),t("section",{key:"3c04bad66e40389d50f1a6e08102adfd7204f905",class:"d-flex align-items-center justify-evenly seperator-container d-sm-none"},t("span",{key:"a0dd9860d9482181590078faf34043dec232047d"}),t("h5",{key:"00e57727e772593c918d593d979af6b1ac57c8ba",class:"m-0 font-weight-bold"},g.entries?.Lcz_Or),t("span",{key:"a22763a1f34eca1cacc08ac7122ee91ed2e79304"})),t("section",{key:"3fcb753389a9976ebcc5bfcccacdf897e161927a",class:"d-flex flex-column align-items-sm-center flex-sm-row flex-sm-wrap filters-container justify-content-lg-start mt-1"},t("wa-select",{key:"5aa486496089609d498393731c68a2e5d7ad3658",onchange:e=>{Ie("filter_type",e.target.value)},value:ze.userSelection.filter_type?.toString(),size:"small",defaultValue:ze?.types[0]?.id?.toString()},ze?.types.map((e=>t("wa-option",{key:e.id,value:e.id?.toString()},e.name)))),t("ir-range-picker",{key:"d06b0f16faa2c0691deca0c219cad8b4e5a41652",onDateRangeChanged:e=>{e.stopImmediatePropagation();e.stopPropagation();const{fromDate:t,toDate:i}=e.detail;let a=i.format("YYYY-MM-DD");if(i.isSame(fe(ze.userSelection.to,"YYYY-MM-DD"),"days")||i.isBefore(fe(ze.userSelection.from,"YYYY-MM-DD"),"days")){a=ze.userSelection.to}ze.userSelection={...ze.userSelection,to:a,from:t.format("YYYY-MM-DD")}},allowNullDates:false,fromDate:fe(ze.userSelection.from,"YYYY-MM-DD"),toDate:fe(ze.userSelection.to,"YYYY-MM-DD")}),t("wa-select",{key:"37da5b6c953e0efba5f92ec124de11971d191289",onchange:e=>{Ie("booking_status",e.target.value)},value:ze.userSelection.booking_status,size:"small",defaultValue:ze?.statuses[0]?.code},ze?.statuses.map((e=>t("wa-option",{key:e.code,value:e.code},e.name)))),!ae(ze.userSelection.userTypeCode)&&t("wa-select",{key:"57e296ad848e12462a605595df316cfaae2e483e",onchange:e=>{Ie("channel",e.target.value)},value:ze.userSelection.channel,size:"small",defaultValue:ze?.channels[0]?.value},ze?.channels.map((e=>t("wa-option",{key:e.value,value:e.value},e.name)))),t("wa-select",{key:"b328f9bf914100163d8bab9f444ca4910e9db815",onchange:e=>{Ie("balance_filter",e.target.value)},value:ze.userSelection.balance_filter,size:"small",defaultValue:ze?.balance_filter[0]?.value},ze?.balance_filter.map((e=>t("wa-option",{key:e.value,value:e.value},e.name)))),t("div",{key:"a875f91ebac127e9860d30bd4b42155c56900c69",class:"d-flex flex-fill align-items-end m-0"},t("wa-tooltip",{key:"bb939af28d6487e2142aef16d72363b08b44652a",for:"search-btn"},g.entries?.Lcz_Search),t("ir-custom-button",{key:"d1acf83117cc9da449241c1af5f9a211971d73bd",id:"search-btn",loading:this.isLoading==="search",onClickHandler:()=>this.handleSearchClicked(false),variant:"neutral",appearance:"plain"},t("wa-icon",{key:"c73f93137fa33a4068f87d2b574b7d56bc789544",name:"magnifying-glass",style:{fontSize:"1.2rem"}})),t("wa-tooltip",{key:"55833b993c1277747f5cbf390fce512e5a391cb5",for:"clear-btn"},g.entries?.Lcz_Erase),t("ir-custom-button",{key:"51962daab79df947c3164354c655130902f14b3d",id:"clear-btn",variant:"neutral",appearance:"plain",onClickHandler:()=>this.handleClearUserField()},t("wa-icon",{key:"fb811db61268052cf0e50750fd51e44e7b4f47d5",name:"eraser",style:{fontSize:"1.2rem"}})),t("wa-tooltip",{key:"6f3b88608f0300f0fe47516261b88eb2257afdbf",for:"excel-btn"},g.entries?.Lcz_ExportToExcel),t("ir-custom-button",{key:"2d987dd4eaf0961e742e6289925556abb4886885",loading:this.isLoading==="excel",id:"excel-btn",variant:"neutral",appearance:"plain",onClickHandler:()=>this.handleSearchClicked(true)},t("wa-icon",{key:"d11a56ce7892d3963c2de77041077f6b7438bf91",name:"file-excel",variant:"regular",style:{fontSize:"1.2rem"}})))))}};bp.style=fp;const gp=".loader__container.sc-ir-loading-screen{position:fixed;z-index:1000;inset:0;display:flex;align-items:center;justify-content:center;background:white;margin:0 !important;padding:0 !important}.loader.sc-ir-loading-screen{width:1.25rem;height:1.25rem;border:2.5px solid #3f3f3f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}.loaderContainer.sc-ir-loading-screen{position:absolute;z-index:100001;padding:20px;top:50%;left:50%;transform:translate(-50%, -50%);background:white;display:flex;align-items:center;justify-content:center;gap:20px;border-radius:5px}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const mp=gp;const wp=class{constructor(t){e(this,t)}message="";render(){return t("div",{key:"100feff23fd91de910ba78570b9d39b01faaf42a",class:"loader__container"},t("wa-spinner",{key:"77ad70e8f950625f940256ec4d969d27a6602120",style:{fontSize:"2.5rem"}}))}};wp.style=mp;class yp{async authenticate(e){const{data:t}=await ye.post("/Authenticate",e);if(t.ExceptionMsg!==""){throw new Error(t.ExceptionMsg)}return t["My_Result"]}async changeUserPwd(e){const{data:t}=await ye.post("/Change_User_Pwd",e);if(t.ExceptionMsg?.trim()){throw new Error(t.ExceptionMsg?.trim())}return t.My_Result}}const vp=".sc-ir-login-h{height:100vh;display:grid;align-content:center;padding:2rem;box-sizing:border-box;background:url(https://x.igloorooms.com/bg.jpg);background-position:center;background-repeat:no-repeat;background-size:cover}p.sc-ir-login,input.sc-ir-login,button.sc-ir-login{margin:0}p.sc-ir-login,input.sc-ir-login,button.sc-ir-login,div.sc-ir-login,section.sc-ir-login,form.sc-ir-login{box-sizing:border-box}.form-container.sc-ir-login{padding:1rem;display:flex;flex-direction:column;height:100%;background:white;border-radius:0.25rem;gap:1rem;width:100%;max-width:38rem;margin-left:auto;margin-right:auto}.separator-container.sc-ir-login{display:flex;align-items:center;gap:0.5rem;padding-top:1.5rem;padding-bottom:1rem}.separator-container.sc-ir-login p.sc-ir-login{color:#6b6f82;font-size:1rem}.separator.sc-ir-login{flex:1 1 0%;height:1px;background:#dadada}.login-btn.sc-ir-login{margin-top:1rem}.logo.sc-ir-login{align-self:center}.app_links.sc-ir-login{display:flex;align-items:center;justify-content:center;gap:1rem;padding-block:0.5rem}.app_links.sc-ir-login a.sc-ir-login img.sc-ir-login{width:70%}.password_toggle.sc-ir-login{all:unset;position:absolute;top:2px;right:1rem}";const kp=vp;const xp=class{constructor(t){e(this,t);this.authFinish=a(this,"authFinish",7)}username;password;showPassword=false;authFinish;authService=new yp;token=new me;async handleSignIn(e){e.preventDefault();try{const e=await this.authService.authenticate({password:this.password,username:this.username});this.token.setToken(e);this.authFinish.emit({token:e,code:"succsess"})}catch(e){console.log(e.message)}}render(){return t(i,{key:"17c702ce36fbd4ba02cc51431324337f629deb87"},t("ir-interceptor",{key:"10c61ca42feaff1efe0a0957dbc75eca1804f4f9"}),t("ir-toast",{key:"b8f42f731b44a23181278587a84a1c13e696c547"}),t("form",{key:"7871db7e4d6b99da08b662bd4624a59ec3d3a9bf",onSubmit:this.handleSignIn.bind(this),class:"card form-container px-2"},t("img",{key:"fa126816c29c9e54094005c3287df58f6107e9c5",class:"logo",src:"https://x.igloorooms.com/app-assets/images/logo/logo-dark.png",alt:"Login to igloorooms extranet"}),t("div",{key:"44f6643700ff978c944ba7eb0b0a2dff09186eda",class:"separator-container"},t("div",{key:"29b1be3d7ff0b8638fd229d2b809c6552c026cc6",class:"separator"}),t("p",{key:"95fe218e2d02932b5016d2922949fd5338c9886a"},"Sign in to manage your property"),t("div",{key:"4ffcf0af1421916ccd75fdd516bc8dca3d9656fe",class:"separator"})),t("ir-input-text",{key:"4732f900ee3494d40c38f5bbd00d5492ae7f3ada",value:this.username,onTextChange:e=>this.username=e.detail,variant:"icon",label:"",placeholder:"Username"},t("ir-icons",{key:"6f206f534d3d76ed7d304677f785f46d1dad7cfd",name:"user",slot:"icon"})),t("div",{key:"f11b21cc8fa60c81d061a7b3ba691f00e322ee25",class:"position-relative"},t("ir-input-text",{key:"505297919836cd5f48fa2a7d5058e373f62d4de2",value:this.password,onTextChange:e=>this.password=e.detail,variant:"icon",label:"",placeholder:"Password",type:this.showPassword?"text":"password"},t("ir-icons",{key:"8da2b9c745f41147f871f66c8022770306674cd5",name:"key",slot:"icon"})),t("button",{key:"8f645df849f90689dfadda4ce242e8ff547fc3cc",type:"button",class:"password_toggle",onClick:()=>this.showPassword=!this.showPassword},t("ir-icons",{key:"d22da85e8b879bfcd4b8f40e8915e59036063d93",name:!this.showPassword?"open_eye":"closed_eye"}))),t("ir-button",{key:"7ea742d21cbef87ede40f1d979f3588333c7fbe5",isLoading:be("/Authenticate"),btn_type:"submit",iconPosition:"left",icon_name:"unlock",text:"Login",size:"md",class:"login-btn"}),t("div",{key:"6be524580f860e646a5099949519f1345ffc00d9",class:"card-body text-center p-0 app_links"},t("a",{key:"462cb1cc9c87f26e1c5de997cd8a5cbd0eb7a2ea",href:"https://apps.apple.com/lb/app/igloorooms/id1607846173",target:"_new"},t("img",{key:"29f1808a22a77bc37033cc7e809c52f4fa843018",src:"https://x.igloorooms.com/assets/images/svg/AppStore_ios.svg",alt:"Install igloorooms iOS App"})),t("a",{key:"a5319a13b4b36ebb271167579afe64d4141d8567",href:"https://play.google.com/store/apps/details?id=com.iglooroomsapp",target:"_new"},t("img",{key:"a2cc73b958508d41118104c3bf97c904a086172b",src:"https://x.igloorooms.com/assets/images/svg/AppStore_android.svg",alt:"Install igloorooms Android App"}))),t("a",{key:"088b7dacd4f642f12946670c2dcd43ecb0dd517d",href:"https://info.igloorooms.com/signup",class:"btn btn-outline-danger btn-block btn-md mt-2",target:"_new"},"New to igloorooms?"),t("p",{key:"4b195e8d35ea238d050007f718ab2b215855454f",class:"font-small-3  my-1"},"By logging in, you accept our"," ",t("span",{key:"b763f917acb0b5ddabad1aab03ed70891dc3faa5"},t("a",{key:"ebe6195e4fd3fcbc83d97702b6b6c599a7871f52",href:"https://info.igloorooms.com/privacy/",target:"_new"},"Privacy and Cookies Policies"))," ","Need help? support@igloorooms.com")))}};xp.style=kp;const _p=".sc-ir-m-combobox-h{position:relative;display:block}.input-wrapper.sc-ir-m-combobox{position:relative;width:100%}.prefix-container.sc-ir-m-combobox,.suffix-container.sc-ir-m-combobox{position:absolute;top:0;bottom:0;display:inline-flex;align-items:center;color:var(--ir-combobox-affix-color, #6c757d);pointer-events:none}.dropdown-item.sc-ir-m-combobox{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.prefix-container.sc-ir-m-combobox{left:0.5rem}.suffix-container.sc-ir-m-combobox{right:0.5rem}.sc-ir-m-combobox-s>[slot='prefix'],.sc-ir-m-combobox-s>[slot='suffix']{display:inline-flex;width:var(--ir-combobox-affix-size, 1rem);height:var(--ir-combobox-affix-size, 1rem)}.has-prefix.sc-ir-m-combobox-h input.form-control.sc-ir-m-combobox{padding-left:calc(0.75rem + var(--ir-combobox-affix-size, 1rem))}.has-suffix.sc-ir-m-combobox-h input.form-control.sc-ir-m-combobox{padding-right:calc(0.75rem + var(--ir-combobox-affix-size, 1rem))}.dropdown.sc-ir-m-combobox{position:absolute;top:100%;left:0;z-index:1000;width:100%}.dropdown-menu.sc-ir-m-combobox{max-height:var(--ir-combobox-height, 200px);overflow-y:auto;min-width:100%;width:var(--ir-combobox-width, 100%) !important;scroll-behavior:smooth}.dropdown-item.loading.sc-ir-m-combobox,.dropdown-item.no-results.sc-ir-m-combobox{color:#6c757d;cursor:default;pointer-events:none}.dropdown-item.sc-ir-m-combobox{padding:0.5rem 1rem !important}.dropdown-item.active.sc-ir-m-combobox,.dropdown-item.sc-ir-m-combobox:active,.dropdown-item.focused.sc-ir-m-combobox{background-color:var(--blue, #1e9ff2) !important;color:white !important}[slot='dropdown-content'].sc-ir-m-combobox .dropdown-item.focused.sc-ir-m-combobox,[slot='dropdown-content'].sc-ir-m-combobox .dropdown-item.active.sc-ir-m-combobox{background-color:#1e9ff2 !important;color:white !important}[slot='dropdown-content'].sc-ir-m-combobox [data-option].focused.sc-ir-m-combobox,[slot='dropdown-content'].sc-ir-m-combobox [data-option].active.sc-ir-m-combobox{background-color:#1e9ff2 !important;color:white !important}";const Dp=_p;const Cp=class{constructor(t){e(this,t);this.optionChange=a(this,"optionChange",7);this.searchQuery=a(this,"searchQuery",7)}get el(){return o(this)}placeholder;defaultOption;dataMode="static";options=[];debounceDelay=300;loading=false;useSlot=false;isOpen=false;selectedOption;focusedIndex=-1;filteredOptions=[];slotElements=[];hasPrefix=false;hasSuffix=false;itemChildren=[];optionChange;searchQuery;async selectOptionFromSlot(e){this.selectOption(e)}inputRef;dropdownRef;id=pe();dropdownId=`dropdown-${this.id}`;debounceTimeout;prefixSlotRef;suffixSlotRef;mo=null;get isCompositionMode(){return this.itemChildren.length>0}watchOptionsChanged(e){this.filteredOptions=e||[];if(this.useSlot){this.updateSlotElements()}}watchDefaultValueChanged(e){if(e!==this.selectedOption.value){this.applyDefaultOption()}}watchUseSlotChanged(){if(this.useSlot){setTimeout((()=>this.updateSlotElements()),0)}}componentWillLoad(){this.initializeOptions();this.collectItemChildren();this.mo=new MutationObserver((()=>this.collectItemChildren()));this.mo.observe(this.el,{childList:true,subtree:true})}componentDidLoad(){document.addEventListener("click",this.handleDocumentClick.bind(this));if(this.useSlot){setTimeout((()=>this.updateSlotElements()),0)}setTimeout((()=>this.updateAffixPresence()),0);setTimeout((()=>{this.applyDefaultOption()}),0);this.prefixSlotRef?.addEventListener("slotchange",this.updateAffixPresence);this.suffixSlotRef?.addEventListener("slotchange",this.updateAffixPresence)}disconnectedCallback(){document.removeEventListener("click",this.handleDocumentClick.bind(this));if(this.debounceTimeout)clearTimeout(this.debounceTimeout);this.prefixSlotRef?.removeEventListener("slotchange",this.updateAffixPresence);this.suffixSlotRef?.removeEventListener("slotchange",this.updateAffixPresence);this.mo?.disconnect()}handleDocumentKeyDown(e){if(!this.isOpen)return;if(e.key==="Escape"){this.closeDropdown();this.inputRef?.focus()}}handleComboboxItemSelect(e){e.stopPropagation();console.log(e.detail);this.selectOption(e.detail)}handleComboboxItemRegister(){this.collectItemChildren()}handleComboboxItemUnregister(){this.collectItemChildren()}applyDefaultOption(){if(!this.defaultOption||!Array.isArray(this.options))return;const e=this.options.find((e=>e.value===this.defaultOption));if(e)this.selectedOption={...e}}initializeOptions(){this.filteredOptions=this.options.length>0?this.options:[]}handleDocumentClick=e=>{if(!this.el.contains(e.target)){this.closeDropdown()}};openDropdown(){this.isOpen=true;if(this.isCompositionMode||this.useSlot){this.focusedIndex=-1;setTimeout((()=>this.isCompositionMode?this.updateSlotElementsForItems():this.updateSlotElements()),0)}else{this.focusedIndex=this.selectedOption?this.filteredOptions.findIndex((e=>e.value===this.selectedOption.value)):-1}}emitSearchQuery(e){if(this.debounceTimeout){clearTimeout(this.debounceTimeout)}this.debounceTimeout=setTimeout((()=>{this.searchQuery.emit(e)}),this.debounceDelay)}closeDropdown(){this.isOpen=false;this.focusedIndex=-1;this.removeSlotFocus()}updateSlotElements(){if(!this.useSlot||!this.dropdownRef)return;const e=this.dropdownRef.querySelector('slot[name="dropdown-content"]');if(e){const t=e.assignedElements?e.assignedElements():Array.from(this.el.querySelectorAll('[slot="dropdown-content"] [data-option]'));this.slotElements=t.length>0?t:Array.from(this.dropdownRef.querySelectorAll('[data-option], .dropdown-item[style*="cursor"]'));this.slotElements.forEach(((e,t)=>{e.setAttribute("data-slot-index",t.toString());e.setAttribute("role","option");e.setAttribute("tabindex","-1")}))}}updateAffixPresence=()=>{try{const e=this.prefixSlotRef&&this.prefixSlotRef.assignedElements?this.prefixSlotRef.assignedElements():Array.from(this.el.querySelectorAll('[slot="prefix"]'));const t=this.suffixSlotRef&&this.suffixSlotRef.assignedElements?this.suffixSlotRef.assignedElements():Array.from(this.el.querySelectorAll('[slot="suffix"]'));this.hasPrefix=Array.isArray(e)?e.length>0:false;this.hasSuffix=Array.isArray(t)?t.length>0:false}catch(e){const t=this.el.querySelector('[slot="prefix"]');const i=this.el.querySelector('[slot="suffix"]');this.hasPrefix=!!t;this.hasSuffix=!!i}};removeSlotFocus(){this.slotElements.forEach((e=>{e.classList.remove("focused","active");e.removeAttribute("aria-selected")}))}focusSlotElement(e){this.removeSlotFocus();if(e>=0&&e<this.slotElements.length){const t=this.slotElements[e];t.classList.add("focused","active");t.setAttribute("aria-selected","true");t.scrollIntoView({block:"nearest"})}}selectSlotElement(e){if(e>=0&&e<this.slotElements.length){const t=this.slotElements[e];t.click()}}handleKeyDown=e=>{const t=this.useSlot?this.slotElements.length-1:this.filteredOptions.length-1;switch(e.key){case"ArrowDown":e.preventDefault();if(!this.isOpen){this.openDropdown()}else{this.focusedIndex=Math.min(this.focusedIndex+1,t);if(this.useSlot){this.focusSlotElement(this.focusedIndex)}else{this.scrollToFocusedOption()}}break;case"ArrowUp":e.preventDefault();if(this.isOpen){this.focusedIndex=Math.max(this.focusedIndex-1,0);if(this.useSlot){this.focusSlotElement(this.focusedIndex)}else{this.scrollToFocusedOption()}}break;case"Enter":e.preventDefault();if(this.isOpen&&this.focusedIndex>=0){if(this.useSlot){this.selectSlotElement(this.focusedIndex)}else{this.selectOption(this.filteredOptions[this.focusedIndex])}}else if(!this.isOpen){this.openDropdown()}break;case"Escape":e.preventDefault();this.closeDropdown();break;case"Tab":if(this.isOpen){this.closeDropdown()}break}};selectOption(e){this.selectedOption=e;this.optionChange.emit(e);this.closeDropdown();this.inputRef?.focus()}scrollToFocusedOption(){if(this.focusedIndex<0||!this.dropdownRef||this.useSlot)return;const e=this.dropdownRef.querySelector(`#${this.dropdownId}-option-${this.focusedIndex}`);if(e){e.scrollIntoView({block:"nearest"})}}handleInput=e=>{const t=e.target;const i=t.value;if(this.dataMode==="external"&&!this.isCompositionMode){this.emitSearchQuery(i)}else if(this.isCompositionMode){this.filterComposition(i)}else{const e=this.options.length>0?this.options:[];this.filteredOptions=i?e.filter((e=>e.label.toLowerCase().includes(i.toLowerCase()))):e}this.focusedIndex=-1;if(!this.isOpen){this.openDropdown()}};collectItemChildren(){const e=Array.from(this.el.querySelectorAll("ir-m-combobox-item"));this.itemChildren=e;console.log(e);if(this.isCompositionMode){this.useSlot=true;setTimeout((()=>this.updateSlotElementsForItems()),0)}}updateSlotElementsForItems(){this.slotElements=this.itemChildren;this.slotElements.forEach(((e,t)=>{e.setAttribute("data-slot-index",String(t));e.setAttribute("role","option");e.setAttribute("tabindex","-1")}))}async filterComposition(e){const t=await Promise.all(this.itemChildren.map((t=>t.matchesQuery(e))));await Promise.all(this.itemChildren.map(((i,a)=>i.setHidden(e?!t[a]:false))));this.updateSlotElementsForItems()}render(){return t(i,{key:"9c7e756dbc120cc83bd6bb9865a5faabf661fcde",class:{"has-prefix":this.hasPrefix,"has-suffix":this.hasSuffix}},t("div",{key:"1bb5bb70405322eee57c132078b495bf36c00704",class:"input-wrapper"},t("span",{key:"d5e9d50b6ebbad8c255f00840f177d02239c6814",class:"prefix-container","aria-hidden":!this.hasPrefix},t("slot",{key:"965c2cf9a65a2d2660c3c31432362684d29d46e5",name:"prefix",ref:e=>this.prefixSlotRef=e})),t("input",{key:"45d6aeeba4be6158ed08730edbdcff04605f8e67",ref:e=>this.inputRef=e,type:"text",class:"form-control",role:"combobox",id:this.id,value:this.selectedOption?.label||"",placeholder:this.placeholder,"aria-expanded":String(this.isOpen),"aria-autocomplete":"list","aria-controls":this.dropdownId,"data-reference":"parent","aria-haspopup":"listbox","aria-activedescendant":this.focusedIndex>=0?`${this.dropdownId}-option-${this.focusedIndex}`:null,"aria-label":"Combobox","aria-required":true,onKeyDown:this.handleKeyDown,onInput:this.handleInput}),t("span",{key:"57776dd5a059331b4131213f8edd8630f9dc0a08",class:"suffix-container","aria-hidden":!this.hasSuffix},t("slot",{key:"6832b5937576341f83185202711ffb2bc9c62dd1",name:"suffix",ref:e=>this.suffixSlotRef=e}))),t("div",{key:"ee734aa3fcfe1afc7a3739fbc9f7c356cb4d90c4",class:`dropdown ${this.isOpen?"show":""}`},t("div",{key:"77dad16427a978fbeac3c0253f97bfc3f2506593",ref:e=>this.dropdownRef=e,class:`dropdown-menu ${this.isOpen?"show":""}`,id:this.dropdownId,role:"listbox","aria-expanded":String(this.isOpen)},this.isCompositionMode?t("slot",null):this.useSlot?t("slot",{name:"dropdown-content"}):[this.loading&&t("div",{class:"dropdown-item loading"},"Loading..."),!this.loading&&this.filteredOptions.length===0&&t("div",{class:"dropdown-item no-results"},"No results found"),!this.loading&&this.filteredOptions.map(((e,i)=>t("button",{id:`${this.dropdownId}-option-${i}`,class:`dropdown-item ${this.focusedIndex===i?"active":""}`,role:"option","aria-selected":this.selectedOption?.value===e.value?"true":"false",onClick:()=>this.selectOption(e),onMouseEnter:()=>this.focusedIndex=i,innerHTML:e.html_content},e.html_content?null:e.label)))])))}static get watchers(){return{options:["watchOptionsChanged"],defaultOption:["watchDefaultValueChanged"],useSlot:["watchUseSlotChanged"]}}};Cp.style=Dp;const Mp={AF:"##-###-####",AX:"(###)###-##-##",AL:"(###)###-###",DZ:"##-###-####",AS:"(684)###-####",AD:"###-###",AO:"(###)###-###",AI:"(264)###-####",AQ:"1##-###",AG:"(268)###-####",AR:"(###)###-####",AM:"##-###-###",AW:"###-####",AC:"####",AU:"#-####-####",AT:"(###)###-####",AZ:"##-###-##-##",BS:"(242)###-####",BH:"####-####",BD:"1###-######",BB:"(246)###-####",BY:"(##)###-##-##",BE:"(###)###-###",BZ:"###-####",BJ:"##-##-####",BM:"(441)###-####",BT:["17-###-###","77-###-###","#-###-###"],BO:"#-###-####",BA:["##-####","##-#####"],BW:"##-###-###",BR:["(##)####-####","(##)#####-####"],IO:"###-####",BN:"###-####",BG:"(###)###-###",BF:"##-##-####",BI:"##-##-####",KH:"##-###-###",CM:"####-####",CA:"(###)###-####",CV:"(###)##-##",KY:"(345)###-####",CF:"##-##-####",TD:"##-##-##-##",CL:"#-####-####",CN:["(###)####-###","(###)####-####","##-#####-#####"],CX:"#-####-####",CC:"#-####-####",CO:"(###)###-####",KM:"##-#####",CG:"##-#####",CK:"##-###",CR:"####-####",HR:"##-###-###",CU:"#-###-####",CY:"##-###-###",CZ:"(###)###-###",CD:"(###)###-###",DK:"##-##-##-##",DJ:"##-##-##-##",DM:"(767)###-####",DO:["(809)###-####","(829)###-####","(849)###-####"],EC:["#-###-####","##-###-####"],EG:"(###)###-####",SV:"##-##-####",GQ:"##-###-####",ER:"#-###-###",EE:["###-####","####-####"],SZ:"##-##-####",ET:"##-###-####",FK:"#####",FO:"## ## ##",FJ:"##-#####",FI:"## ### ####",FR:"# ## ## ## ##",GF:"### ## ## ##",PF:"## ## ## ##",GA:"# ## ## ##",GM:"### ####",GE:"(###)###-###",DE:["###-###","(##) ####-####","(###) ####-####","(####) ###-####","(3####) ##-####"],GH:"03# ### ####",GI:"###-#####",GR:"(###)###-####",GL:"##-##-##",GD:"(473)###-####",GP:"### ## ## ##",GU:"671 ### ####",GT:"#-###-####",GG:"(####)######",GN:"##-###-###",GW:"#-######",GY:"###-####",HT:"##-##-####",VA:"06 698#####",HN:"####-####",HK:"####-####",HU:"## ### ####",IS:"###-####",IN:"(####)###-###",ID:["##-###-##","##-###-###","##-###-####","(8##)###-###","(8##)###-##-###"],IR:"(###)###-####",IQ:"(###)###-####",IE:"(###)###-###",IM:"(####)######",IL:["#-###-####","5#-###-####"],IT:"(###)####-###",CI:"##-###-###",JM:"(876)###-####",JP:["(###)###-###","##-####-####"],JE:"(####)####-######",JO:"#-####-####",KZ:["(###) ### ## ##","(####) ## ## ##","(#####) # ## ##"],KE:"###-######",KI:"##-###",KP:["###-###","####-####","##-###-###","###-####-###","191-###-####","####-#############"],KR:"##-###-####",XK:["##-###-###","###-###-###"],KW:"####-####",KG:"(###)###-###",LA:["##-###-###","(20##)###-###"],LV:"##-###-###",LB:["#-###-###","##-###-###"],LS:"#-###-####",LR:"##-###-###",LY:["##-###-###","21-###-####"],LI:"(###)###-####",LT:"(###)##-###",LU:"(###)###-###",MO:"####-####",MG:"##-##-#####",MW:["1-###-###","#-####-####"],MY:["#-###-###","##-###-###","(###)###-###","##-###-####"],MV:"###-####",ML:"##-##-####",MT:"####-####",MH:"###-####",MQ:"(###)##-##-##",MR:"##-##-####",MU:"###-####",YT:"#####-####",MX:["##-##-####","(###)###-####"],FM:"###-####",MD:"####-####",MC:["##-###-###","(###)###-###"],MN:"##-##-####",ME:"##-###-###",MS:"(664)###-####",MA:"##-####-###",MZ:"##-###-###",MM:["###-###","#-###-###","##-###-###"],NA:"##-###-####",NR:"###-####",NP:"##-###-###",NL:"##-###-####",NC:"##-####",NZ:["#-###-###","(###)###-###","(###)###-####"],NI:"####-####",NE:"##-##-####",NG:["##-###-##","##-###-###","(###)###-####"],NU:"####",NF:"3##-###",MK:"##-###-###",MP:"(670)###-####",NO:"(###)##-###",OM:"##-###-###",PK:"(###)###-####",PW:"###-####",PS:"##-###-####",PA:"###-####",PG:"(###)##-###",PY:"(###)###-###",PE:"(###)###-###",PH:"(###)###-####",PN:"###-###-###",PL:"(###)###-###",PT:"##-###-####",PR:["(787) ### ####","(939) ### ####"],QA:"####-####",RE:"#####-####",RO:"##-###-####",RU:"(###)###-##-##",RW:"(###)###-###",BL:"###-##-##-##",SH:"####",KN:"(869)###-####",LC:"(758)###-####",MF:"(###)###-###",PM:"##-####",VC:"(784)###-####",WS:"##-####",SM:"####-######",ST:"##-#####",SA:["#-###-####","5#-####-####"],SN:"##-###-####",RS:"##-###-####",SC:"#-###-###",SL:"##-######",SG:"####-####",SX:"(721)###-####",SK:"(###)###-###",SI:"##-###-###",SB:["#####","###-####"],SO:["#-###-###","##-###-###"],ZA:"##-###-####",GS:"#####",SS:"##-###-####",ES:"(###)###-###",LK:"##-###-####",SD:"##-###-####",SR:["###-###","###-####"],SJ:"(###)##-###",SE:"##-###-####",CH:"##-###-####",SY:"##-####-###",TW:["####-####","#-####-####"],TJ:"##-###-####",TZ:"##-###-####",TH:["##-###-###","##-###-####"],TL:["###-####","77#-#####","78#-#####"],TG:"##-###-###",TK:"####",TO:"#####",TT:"(868)###-####",TN:"##-###-###",TR:"(###)###-####",TM:"#-###-####",TC:"(249)###-###",TV:["2####","90####"],UG:"(###)###-###",UA:"(##)###-##-##",AE:["#-###-####","5#-###-####"],GB:"##-####-####",US:"(###)###-####",UY:"#-###-##-##",UZ:"##-###-####",VU:["#####","##-#####"],VE:"(###)###-####",VN:["##-####-###","(###)####-###"],VG:"(284)###-####",VI:"(340)###-####",WF:"##-####",YE:["#-###-###","##-###-###","###-###-###"],ZM:"##-###-####",ZW:"#-######"};const Sp="@layer wa-utilities {\n  :host([size='small']),\n  .wa-size-s {\n    font-size: var(--wa-font-size-s);\n  }\n\n  :host([size='medium']),\n  .wa-size-m {\n    font-size: var(--wa-font-size-m);\n  }\n\n  :host([size='large']),\n  .wa-size-l {\n    font-size: var(--wa-font-size-l);\n  }\n}\n\n:host {\n  box-sizing: border-box;\n  width: 100%;\n  margin: 0 !important;\n  padding: 0 !important;\n}\n.sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0 0 0 0);\n  white-space: nowrap;\n  border: 0;\n}\n.mobile-input__logo {\n  height: var(--wa-font-size-s);\n  aspect-ratio: 4/3;\n  border-radius: 3px;\n}\n.mobile-input__required {\n  color: #f3676c !important;\n}\n.mobile-input__prefix-dropdown::part(menu) {\n  height: 300px;\n  /* padding-top: 0; */\n}\n.mobile-input__container {\n  display: flex;\n  align-items: stretch;\n  width: 100%;\n  margin-top: 0.5rem;\n}\n.mobile-input__container--disabled {\n  opacity: 0.7;\n}\n.mobile-input__phone-country {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n.mobile-input__phone {\n  flex: 1 1 0%;\n}\n.mobile-input__phone {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.mobile-input__phone--invalid {\n  border-color: var(--wa-color-danger-600);\n}\n.mobile-input__label {\n  display: inline-block;\n  position: relative;\n  color: var(--wa-form-control-label-color);\n  font-weight: var(--wa-form-control-label-font-weight);\n  line-height: var(--wa-form-control-label-line-height);\n  margin-block-start: 0.5em !important;\n}\n.mobile-input__description {\n  margin: 0.25rem 0 0.5rem;\n  color: var(--wa-color-neutral-500);\n  font-size: 0.875rem;\n}\n.mobile-input__error {\n  margin: 0.5rem 0 0;\n  color: var(--wa-color-danger-600);\n  font-size: 0.875rem;\n}\n.mobile-input__required {\n  margin-left: 0.25rem;\n  color: var(--wa-color-danger-600);\n}\n.mobile-input__trigger,\n.mobile-input__phone {\n  padding: 0 var(--wa-form-control-padding-inline);\n  color: var(--wa-form-control-value-color);\n  font-size: var(--wa-form-control-value-size);\n  font-family: inherit;\n  font-weight: var(--wa-form-control-value-font-weight);\n  line-height: var(--wa-form-control-value-line-height);\n  vertical-align: middle;\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  box-sizing: border-box;\n  background-color: var(--wa-form-control-background-color);\n  border-color: var(--wa-form-control-border-color);\n  border-style: var(--wa-form-control-border-style);\n  border-width: var(--wa-form-control-border-width);\n  border-radius: var(--wa-form-control-border-radius);\n  transition: background-color var(--wa-transition-normal), border var(--wa-transition-normal), all var(--wa-transition-normal), outline var(--wa-transition-fast);\n  transition-timing-function: var(--wa-transition-easing);\n}\n.mobile-input__container {\n  height: var(--wa-form-control-height);\n}\n.mobile-input__trigger {\n  height: 100%;\n}\n.mobile-input__trigger:focus,\n.mobile-input__phone:focus {\n  outline: none;\n}\n.mobile-input__trigger:disabled,\n.mobile-input__phone:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.mobile-input__trigger:focus-visible,\n.mobile-input__phone:focus-visible {\n  outline: var(--wa-focus-ring);\n  outline-offset: var(--wa-focus-ring-offset);\n  z-index: 2;\n}\n.mobile-input__phone::placeholder {\n  color: var(--wa-form-control-placeholder-color);\n  user-select: none;\n  -webkit-user-select: none;\n}\n.mobile-input__trigger {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  border-right: 0;\n  cursor: pointer;\n}\n.mobile-input__phone {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.mobile-input__phone {\n  cursor: text;\n}\n.mobile-input__trigger[aria-expanded='true'] {\n  outline: var(--wa-focus-ring);\n  outline-offset: var(--wa-focus-ring-offset);\n  z-index: 2;\n}\n.mobile-input__trigger[aria-expanded='true'] .mobile-input__phone-country-caret {\n  transform: rotate(-180deg);\n}\n\n.mobile-input__country-name {\n  flex: 1;\n}\n.mobile-input__country-prefix {\n  color: var(--wa-color-neutral-500);\n}\n";const Yp=Sp;const Ep=class{constructor(t){e(this,t);this.mobileInputChange=a(this,"mobile-input-change",7);this.mobileInputCountryChange=a(this,"mobile-input-country-change",7)}static idCounter=0;componentId=++Ep.idCounter;inputId=`ir-mobile-input-${this.componentId}`;labelId=`${this.inputId}-label`;descriptionId=`${this.inputId}-description`;errorId=`${this.inputId}-error`;countryStatusId=`${this.inputId}-country-status`;inputRef;mask;size="small";label="Phone number";name="phone";placeholder="Enter phone number";description;error;required=false;disabled=false;countryCode;value="";countries=[];mobileInputChange;mobileInputCountryChange;selectedCountry;displayValue="";componentWillLoad(){const e=this.resolveCountry(this.countryCode)??null;if(!e){return}this.selectedCountry=e;this.countryCode=e?.code;this.displayValue=this.value??""}componentDidLoad(){requestAnimationFrame((()=>this.initializeMask()))}disconnectedCallback(){this.destroyMask()}handleCountryCodeChange(e){const t=this.resolveCountry(e);if(t&&t!==this.selectedCountry){this.selectedCountry=t}}handleSelectedCountryChange(e,t){if(!e)return;if(!t||e.code!==t.code){if(this.countryCode!==e.code){this.countryCode=e.code}this.rebuildMask();this.mobileInputCountryChange.emit(e)}}handleValueChange(e,t){if(e!==t){if(this.mask){this.mask.value=e}}}resolveCountry(e){if(!e)return undefined;return this.countries.find((t=>t.code.toUpperCase()===e.toUpperCase()))}initializeMask(){if(!this.inputRef)return;const e=this.buildMaskOptions(this.selectedCountry);if(!e){this.destroyMask();return}this.mask=Fe(this.inputRef,e);if(this.value){this.mask.unmaskedValue=this.value}this.displayValue=this.mask.value;this.mask.on("accept",(()=>{if(!this.mask)return;const e=this.mask.unmaskedValue??"";if(e!==this.value){this.value=e}this.displayValue=this.mask.value;this.emitChange()}))}rebuildMask(){this.destroyMask();this.initializeMask()}destroyMask(){if(this.mask){this.mask.destroy();this.mask=undefined}this.displayValue=this.value??""}buildMaskOptions(e){if(!e)return undefined;const t=e.code?.toUpperCase();if(!t)return undefined;const i=Mp[t];if(!i)return undefined;const a=e=>e.replace(/#/g,"0");if(Array.isArray(i)){return{mask:i.map((e=>({mask:this.selectedCountry.phone_prefix+" "+a(e)}))),lazy:false,placeholderChar:"_"}}return{mask:this.selectedCountry.phone_prefix+" "+a(i),lazy:false,placeholderChar:"_"}}emitChange(){if(!this.selectedCountry)return;this.mobileInputChange.emit({country:this.selectedCountry,value:this.value??"",formattedValue:this.displayValue??""})}handleCountrySelect=e=>{if(this.disabled)return;e.stopPropagation();e.stopImmediatePropagation();const t=e.detail?.item?.value;const i=this.countries.find((e=>e.id.toString()===`${t}`));if(i){this.selectedCountry=i}requestAnimationFrame((()=>{this.inputRef?.focus()}))};handlePlainInput=e=>{if(this.mask)return;const t=e.target?.value??"";if(t!==this.value){this.value=t;this.displayValue=t;this.emitChange()}};render(){const e=[this.description?this.descriptionId:null,this.error?this.errorId:null].filter(Boolean).join(" ")||undefined;return t(i,{key:"97ab91e6194c10d3deaabd52e786e2c43a8ae86c",size:"small",role:"group","aria-labelledby":this.labelId,"aria-describedby":e},t("label",{key:"f4777767ad6f69b246110bdcc0a2e035cf351793",class:"mobile-input__label",id:this.labelId,htmlFor:this.inputId},this.label,this.required?t("span",{class:"mobile-input__required","aria-hidden":"true"},"*"):null),this.description?t("p",{id:this.descriptionId,class:"mobile-input__description"},this.description):null,t("div",{key:"f17e8eb8bb8ec55a10b50ad9ea04d0bb989df66e",class:{"mobile-input__container":true,"mobile-input__container--disabled":this.disabled}},t("wa-dropdown",{key:"4cf4752091cc73860b1b7cf085b6c3fa16678d37","onwa-show":e=>{e.stopPropagation();e.stopImmediatePropagation()},"onwa-hide":e=>{e.stopPropagation();e.stopImmediatePropagation()},"onwa-select":this.handleCountrySelect,class:"mobile-input__prefix-dropdown"},t("button",{key:"68910725596da004a7bd86182157c6dbe8ac2920",slot:"trigger",type:"button",class:"mobile-input__trigger",disabled:this.disabled,"aria-haspopup":"listbox","aria-label":"Change country calling code"},t("div",{key:"45d59ba47d9c199596a2a29f893e8432a0abee22",class:"mobile-input__phone-country",style:{marginRight:"1rem"}},this.selectedCountry?t("img",{src:this.selectedCountry?.flag,alt:this.selectedCountry?.name,class:"mobile-input__logo"}):t("span",null,"Select")),t("wa-icon",{key:"1ba85588a0833cfe447543c23ac05a47879bf2cb",class:"mobile-input__phone-country-caret",name:"chevron-down","aria-hidden":"true"})),t("span",{key:"b43bae5543291c3b4ac58ba33b716d2129fc40db",class:"sr-only",id:this.countryStatusId,"aria-live":"polite"},this.selectedCountry?`Selected country ${this.selectedCountry.name} ${this.selectedCountry.phone_prefix}`:"Select a country"),this.countries.map((e=>t("wa-dropdown-item",{value:e.id.toString()},t("div",{class:"mobile-input__phone-country",role:"option","aria-selected":this.selectedCountry?.id===e.id?"true":"false"},t("img",{src:e.flag,alt:e.name,class:"mobile-input__logo"}),t("span",{class:"mobile-input__country-name"},e.name),t("span",{class:"mobile-input__country-prefix"},e.phone_prefix)))))),t("input",{key:"0c471d5c7ceb05c35eef333cb473d09ea809cf24",ref:e=>this.inputRef=e,id:this.inputId,class:{"mobile-input__phone":true,"mobile-input__phone--invalid":Boolean(this.error)},name:this.name,type:"tel",inputmode:"tel",autocomplete:"tel","aria-required":this.required?"true":undefined,"aria-invalid":this.error?"true":"false","aria-describedby":e,disabled:this.disabled,placeholder:this.placeholder,value:this.displayValue,onInput:this.handlePlainInput})),this.error?t("p",{id:this.errorId,class:"mobile-input__error",role:"alert"},this.error):null)}static get watchers(){return{countryCode:["handleCountryCodeChange"],selectedCountry:["handleSelectedCountryChange"],value:["handleValueChange"]}}};Ep.style=Yp;const Tp=".backdropModal.sc-ir-modal{background-color:rgba(0, 0, 0, 0.5);z-index:1000;position:fixed;top:0;left:0;height:100vh;width:100%;opacity:0;transition:opacity 0.3s ease-in-out;pointer-events:none}.backdropModal.active.sc-ir-modal{cursor:pointer;opacity:1 !important;pointer-events:all}.ir-modal[data-state='opened'].sc-ir-modal{opacity:1;visibility:visible;pointer-events:all;transition:all 0.3s ease-in-out}.ir-alert-content.sc-ir-modal{padding:1rem;background:white;border-radius:5px}.ir-alert-header.sc-ir-modal{display:flex;font-size:1rem;font-weight:700}.modal.sc-ir-modal{z-index:1001 !important}.modal-dialog.sc-ir-modal{height:100vh;display:flex;align-items:center}.ir-alert-footer.sc-ir-modal{gap:10px}.ir-modal.sc-ir-modal{position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);z-index:1050;width:90%;max-width:32rem;overflow:hidden;outline:0;opacity:0;transition:transform 0.3s ease-in-out, opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;visibility:hidden;pointer-events:none}.ir-modal.active.sc-ir-modal{opacity:1;transform:translate(-50%, 0);visibility:visible;pointer-events:all;transition:all 0.3s ease-in-out}";const Ip=Tp;const zp=class{constructor(t){e(this,t);this.confirmModal=a(this,"confirmModal",7);this.cancelModal=a(this,"cancelModal",7);this.middleModal=a(this,"middleModal",7)}modalTitle="Modal Title";modalBody="Modal Body";showTitle;rightBtnActive=true;leftBtnActive=true;middleBtnActive=false;rightBtnText="Confirm";leftBtnText="Close";middleBtnText="More";isLoading=false;isMiddleButtonLoading=false;autoClose=true;rightBtnColor="primary";leftBtnColor="secondary";middleBtnColor="info";btnPosition="right";iconAvailable=false;icon="";isOpen=false;item={};async openModal(){this.isOpen=true}async closeModal(){this.isOpen=false}confirmModal;cancelModal;middleModal;btnClickHandler(e){let t=e.target;let i=t.name;if(i===this.leftBtnText){this.cancelModal.emit();this.item={};this.closeModal()}else if(i===this.middleBtnText){this.middleModal.emit(this.item);this.item={};if(this.autoClose)this.closeModal()}else if(i===this.rightBtnText){this.confirmModal.emit(this.item);this.item={};if(this.autoClose){this.closeModal()}}}render(){return[t("div",{key:"4cb785dbc4bef3034056002cb4c67cfd8a0ccfea",class:`backdropModal ${this.isOpen?"active":""}`,onClick:()=>{this.cancelModal.emit();if(this.autoClose&&!this.isLoading){this.closeModal()}}}),t("div",{key:"1f5d14e06a4cb2fc9260b317fd94acb36a751144","data-state":this.isOpen?"opened":"closed",class:`ir-modal`,tabindex:"-1"},t("div",{key:"cd9ee53e1b5651ccdb7dc9ffe3463f440f1e4e7a",class:`ir-alert-content p-2`},this.showTitle&&t("div",{key:"67869b752d07a543c61987eb2188c473feb993da",class:`ir-alert-header`},t("p",{key:"9649c827015448a8bc5598687c7f99f6707c9c8b"},this.modalTitle)),t("div",{key:"778993230a5c9b12b32feb232b0f8592f9a84fca",class:"modal-body text-left p-0 mb-2"},t("div",{key:"3a35184824bf4e6e00f39129603137b258d064a6"},this.modalBody)),t("div",{key:"d0acf9449d5f723b897333e2652707ab394e589b",class:`ir-alert-footer border-0  d-flex justify-content-${this.btnPosition==="center"?"center":this.btnPosition==="left"?"start":"end"}`},this.leftBtnActive&&t("ir-button",{key:"6b50b982a109f1d752453cfb95b208c7ec6797ee",btn_disabled:this.isLoading,btn_color:this.leftBtnColor,btn_block:true,text:this.leftBtnText,name:this.leftBtnText}),this.middleBtnActive&&t("ir-button",{key:"00ab6021acc07e1ab7fe295466f9bbff5dd41546",btn_disabled:this.isMiddleButtonLoading,btn_color:this.middleBtnColor,btn_block:true,text:this.middleBtnText,isLoading:this.isMiddleButtonLoading,name:this.middleBtnText}),this.rightBtnActive&&t("ir-button",{key:"40026bc7b2feeb94773a2f19b6918dd66d165147",btn_color:this.rightBtnColor,btn_disabled:this.isLoading,isLoading:this.isLoading,btn_block:true,text:this.rightBtnText,name:this.rightBtnText}))))]}};zp.style=Ip;const Op=".sc-ir-monthly-bookings-report-h{display:block}";const Ap=Op;const Bp=class{constructor(t){e(this,t)}language="";ticket="";propertyid;p;isPageLoading=true;isLoading=null;reports=[];filters;property_id;stats;baseFilters;tokenService=new me;roomService=new we;propertyService=new Tt;componentWillLoad(){this.baseFilters={date:{description:fe().format("MMMM YYYY"),firstOfMonth:fe().startOf("month").format("YYYY-MM-DD"),lastOfMonth:fe().endOf("month").format("YYYY-MM-DD")},include_previous_year:false};this.filters=this.baseFilters;if(this.ticket){this.tokenService.setToken(this.ticket);this.init()}}handleTicketChange(e,t){if(e!==t){this.tokenService.setToken(this.ticket);this.init()}}handleApplyFiltersChange(e){e.stopImmediatePropagation();e.stopPropagation();this.filters=e.detail;this.getReports()}async init(){try{let e=this.propertyid;if(!this.propertyid&&!this.p){throw new Error("Property ID or username is required")}if(!e){console.log(e);const t=await this.roomService.getExposedProperty({id:0,aname:this.p,language:this.language,is_backend:true,include_units_hk_status:true});e=t.My_Result.id}this.property_id=e;const t=[this.roomService.fetchLanguage(this.language),this.getReports()];if(this.propertyid){t.push(this.roomService.getExposedProperty({id:this.propertyid,language:this.language,is_backend:true,include_units_hk_status:true}))}await Promise.all(t)}catch(e){console.log(e)}finally{this.isPageLoading=false}}async getReports(e=false){try{const t=e=>({day:e.Date,units_booked:e.Units_booked,occupancy_percent:e.Occupancy,adr:e.ADR,rooms_revenue:e.Rooms_Revenue,total_guests:e?.Total_Guests});this.isLoading=e?"export":"filter";const{date:i,include_previous_year:a}=this.filters;const r=[this.propertyService.getMonthlyStats({from_date:i.firstOfMonth,to_date:i.lastOfMonth,property_id:this.property_id,is_export_to_excel:e})];if(a){r.push(this.propertyService.getMonthlyStats({from_date:fe(i.firstOfMonth,"YYYY-MM-DD").add(-1,"year").format("YYYY-MM-DD"),to_date:fe(i.lastOfMonth,"YYYY-MM-DD").add(-1,"years").format("YYYY-MM-DD"),property_id:this.property_id}))}const o=await Promise.all(r);const n=o[0];let s=[];const{DailyStats:l,...c}=n;this.stats={...c};if(a&&o[e?0:1]){const i=o[e?0:1];let a=i.DailyStats.map(t);s=l.map(t).map((e=>{const t=a.find((t=>t.day===fe(e.day,"YYYY-MM-DD").add(-1,"years").format("YYYY-MM-DD")));return{...e,last_year:t??null}}))}else{s=l.map(t)}this.reports=[...s]}catch(e){console.log(e)}finally{this.isLoading=null}}render(){if(this.isPageLoading){return t("ir-loading-screen",null)}return t(i,null,t("ir-toast",null),t("ir-interceptor",null),t("section",{class:"p-2 d-flex flex-column",style:{gap:"1rem"}},t("div",{class:"d-flex align-items-center justify-content-between"},t("h3",{class:"mb-1 mb-md-0"},"Daily Occupancy"),t("ir-button",{size:"sm",btn_color:"outline",isLoading:this.isLoading==="export",text:g.entries?.Lcz_Export,onClickHandler:async e=>{e.stopImmediatePropagation();e.stopPropagation();await this.getReports(true)},btnStyle:{height:"100%"},iconPosition:"right",icon_name:"file",icon_style:{"--icon-size":"14px"}})),t("section",null,t("div",{class:"d-flex flex-column flex-md-row w-100",style:{gap:"1rem",alignItems:"stretch"}},t("ir-stats-card",{icon:this.stats?.Occupancy_Difference_From_Previous_Month<0?"arrow-trend-down":"arrow-trend-up",cardTitle:"Average Occupancy",value:this.stats.AverageOccupancy?this.stats?.AverageOccupancy.toFixed(2)+"%":null,subtitle:`${this.stats?.Occupancy_Difference_From_Previous_Month<0?"":"+"}${this.stats?.Occupancy_Difference_From_Previous_Month.toFixed(2)}% from last month`}),t("ir-stats-card",{icon:"hotel",cardTitle:"Total Units",value:this.stats?.TotalUnitsBooked?this.stats?.TotalUnitsBooked.toString():null,subtitle:"Booked"}),t("ir-stats-card",{icon:"user_group",cardTitle:"Total Guests",value:this.stats?.Total_Guests?.toString(),subtitle:"Stayed"}),t("ir-stats-card",{icon:"calendar",cardTitle:"Peak Days",value:this.stats?.PeakDays.length===0?null:this.stats?.PeakDays?.map((e=>fe(e.Date,"YYYY-MM-DD").format("D").concat("th"))).join(" - "),subtitle:`${Math.max(...this.stats.PeakDays?.map((e=>e.OccupancyPercent))||[])}% occupancy`})),t("div",{class:"d-flex flex-column flex-lg-row mt-1 ",style:{gap:"1rem"}},t("ir-monthly-bookings-report-filter",{isLoading:this.isLoading==="filter",class:"filters-card",baseFilters:this.baseFilters}),t("ir-monthly-bookings-report-table",{reports:this.reports})))))}static get watchers(){return{ticket:["handleTicketChange"]}}};Bp.style=Ap;const Rp=".sc-ir-monthly-bookings-report-filter-h{display:flex;height:100%;flex:1 1 0%}.sales-filters-card.sc-ir-monthly-bookings-report-filter{min-width:max-content;flex:1 1 0%}#salesFiltersCollapse.collapse.sc-ir-monthly-bookings-report-filter:not(.show){display:block}";const Pp=Rp;const Np=class{constructor(t){e(this,t);this.applyFilters=a(this,"applyFilters",7)}isLoading;baseFilters;filters;collapsed=false;window;applyFilters;dates=[];componentWillLoad(){this.dates=this.generateMonths();this.filters=this.baseFilters}updateFilter(e){this.filters={...this.filters,...e}}applyFiltersEvt(e){e.stopImmediatePropagation();e.stopPropagation();this.applyFilters.emit(this.filters)}resetFilters(e){e.stopImmediatePropagation();e.stopPropagation();this.filters=this.baseFilters;this.applyFilters.emit(this.filters)}generateMonths(){const e=fe().startOf("month");const t=fe().subtract(1,"year").startOf("month");const i=[];const a="YYYY-MM-DD";let r=t.clone();while(r.format(a)!==e.format(a)){i.push({description:r.format("MMMM YYYY"),firstOfMonth:r.format("YYYY-MM-DD"),lastOfMonth:r.clone().endOf("month").format("YYYY-MM-DD")});r.add(1,"month")}i.push({description:e.format("MMMM YYYY"),firstOfMonth:e.format("YYYY-MM-DD"),lastOfMonth:e.clone().endOf("month").format("YYYY-MM-DD")});return i.reverse()}render(){return t("div",{key:"1495db888999317ae35376bf80fc756f17cfb346",class:"card mb-0 p-1 d-flex flex-column sales-filters-card"},t("div",{key:"6ccbfd04aa4ae2944ff90df9c8c812fa511ed825",class:"d-flex align-items-center justify-content-between sales-filters-header"},t("div",{key:"6dc042a493e8840dd05eb33c3316661343632ffa",class:"d-flex align-items-center",style:{gap:"0.5rem"}},t("svg",{key:"2ad9d3ca49706715f0ff1abe4c76864980ad040a",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",height:18,width:18},t("path",{key:"e2f4bd6877a4dfd6d5863f50f1d1e94daf3e3c85",fill:"currentColor",d:"M3.9 54.9C10.5 40.9 24.5 32 40 32l432 0c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9 320 448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6l0-79.1L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"})),t("h4",{key:"2ad3f8bd51ef54fd01e0819108e88cbeab411b4b",class:"m-0 p-0 flex-grow-1"},g.entries?.Lcz_Filters||"Filters"))),t("div",{key:"45b02abecc4531fd259d8ad38f7882a0b5ff7a9e",class:"m-0 p-0 collapse filters-section",id:"salesFiltersCollapse"},t("fieldset",{key:"f7aa3045da820eccd41ddc0ab42c59c701fa2cdc",class:"pt-1 filter-group"},t("label",{key:"be0f03acfeabfcf506fdf02d850953becbe3e59f",htmlFor:"rooms",class:"m-0 px-0",style:{paddingBottom:"0.25rem"}},"For"),t("ir-select",{key:"ed32f472c1b7f04fec074ef1abcbaeb4a30d7528",showFirstOption:false,selectedValue:this.filters?.date?.description,onSelectChange:e=>{this.updateFilter({date:this.dates.find((t=>t.description===e.detail))})},data:this.dates.map((e=>({text:e.description,value:e.description})))})),t("div",{key:"418607cc6ce81b963a4ad300dfb0cc9411678e2e",class:"d-flex align-items-center mt-1 mb-2 compare-year-toggle",style:{gap:"0.5rem"}},t("label",{key:"aef9bab29932cf1c397bec4ffea6b591b8366c35",htmlFor:"compare-prev-year",style:{paddingBottom:"0.25rem"}},"Compare with previous year"),t("ir-checkbox",{key:"1a93ddcb698da3621f1f1164b9617f5083181205",checked:this.filters?.include_previous_year,checkboxId:"compare-prev-year",onCheckChange:e=>{e.stopImmediatePropagation();e.stopPropagation();this.updateFilter({include_previous_year:e.detail})}})),t("div",{key:"e737fe8e1181ed5144b1ae7aa4ac4f76d5c77e4e",class:"d-flex align-items-center justify-content-end filter-actions",style:{gap:"1rem"}},t("ir-button",{key:"01e0691e95b4b086063c4f556175ad7057380b65",btn_type:"button","data-testid":"reset",text:g.entries?.Lcz_Reset??"Reset",size:"sm",btn_color:"secondary",onClickHandler:e=>this.resetFilters(e)}),t("ir-button",{key:"6f2e3b63c0396f11225a49f883a20fc8e054cf61",btn_type:"button","data-testid":"apply",isLoading:this.isLoading,text:g.entries?.Lcz_Apply??"Apply",size:"sm",onClickHandler:e=>this.applyFiltersEvt(e)}))))}};Np.style=Pp;const Lp=".sc-ir-monthly-bookings-report-table-h{display:block}.future-report.sc-ir-monthly-bookings-report-table td.sc-ir-monthly-bookings-report-table{background-color:hsla(210, 16%, 85.2%, 0.25) !important}.legend.sc-ir-monthly-bookings-report-table{height:12px;aspect-ratio:1;background:#000;border-radius:4px}.secondary.sc-ir-monthly-bookings-report-table{background:#6692b3}.progress-main.sc-ir-monthly-bookings-report-table{width:450px !important}";const $p=Lp;const Fp=".ir-table-row.sc-ir-monthly-bookings-report-table td.sc-ir-monthly-bookings-report-table{padding:0.5rem 1rem !important;text-align:left;z-index:2;background-color:var(--wa-color-surface-default);white-space:nowrap;color:var(--wa-color-text-normal);box-sizing:border-box}.table--container.sc-ir-monthly-bookings-report-table{flex:1 1 0%}.table--container.sc-ir-monthly-bookings-report-table{overflow-x:auto}.table.sc-ir-monthly-bookings-report-table td.sc-ir-monthly-bookings-report-table{border-top:0;border-bottom:1px solid var(--wa-color-neutral-border-quiet, #abaeb9);transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.table.sc-ir-monthly-bookings-report-table tbody.sc-ir-monthly-bookings-report-table tr.sc-ir-monthly-bookings-report-table:last-child>td.sc-ir-monthly-bookings-report-table{border-bottom:0 !important}.table.sc-ir-monthly-bookings-report-table thead.sc-ir-monthly-bookings-report-table th.sc-ir-monthly-bookings-report-table{border:none !important;background:#ececec;background:color-mix(in oklab, var(--wa-color-neutral-fill-quiet, #f1f2f3) 60%, transparent);color:#374151;padding:0.5rem 1rem !important;text-align:left}.data-table.sc-ir-monthly-bookings-report-table thead.sc-ir-monthly-bookings-report-table th.sc-ir-monthly-bookings-report-table{box-sizing:border-box;background:var(--wa-color-surface-default) !important;padding-top:0.5rem !important;padding-bottom:0.5rem !important;border-bottom:1px solid var(--wa-color-neutral-90) !important;color:var(--wa-color-text-normal)}.data-table.sc-ir-monthly-bookings-report-table .empty-row.sc-ir-monthly-bookings-report-table{height:50vh !important;text-align:center;color:var(--wa-color-gray-60)}.data-table--pagination.sc-ir-monthly-bookings-report-table{padding:0.5rem 1rem;position:sticky;bottom:0;background:var(--wa-color-surface-default);border-top:1px solid var(--wa-color-neutral-90)}.selected.sc-ir-monthly-bookings-report-table td.sc-ir-monthly-bookings-report-table{background:#e3f3fa !important}.selected.sc-ir-monthly-bookings-report-table td.sc-ir-monthly-bookings-report-table{color:var(--gray-dark) !important;transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.sortable.sc-ir-monthly-bookings-report-table,.ir-table-row.sc-ir-monthly-bookings-report-table{transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.sortable.sc-ir-monthly-bookings-report-table{text-transform:capitalize}.sortable.sc-ir-monthly-bookings-report-table:hover{color:#212529;background-color:#e2e8f0 !important;border-color:#dae0e5;cursor:pointer}.ir-table-row.sc-ir-monthly-bookings-report-table:hover td.sc-ir-monthly-bookings-report-table{background:#e2e6ea3f !important;background:var(--wa-color-neutral-fill-quiet, #f1f2f3) !important}.sortable.sc-ir-monthly-bookings-report-table:active{color:#212529;background-color:#e2e8f0;border-color:#d3d9df}.sortable.sc-ir-monthly-bookings-report-table svg.sc-ir-monthly-bookings-report-table{color:var(--blue)}.sticky-column.sc-ir-monthly-bookings-report-table{position:sticky !important;right:0;background-color:white}";const Hp=Fp;const Up=class{constructor(t){e(this,t)}reports=[];render(){return t(i,{key:"dc30a42e3f8fb7342f7a30162a08652ecfc95da6",class:"card p-1  table-container table-responsive"},t("table",{key:"1f4258edecb2490eace8b66ea8bd505249e6d3f1",class:"table"},t("thead",{key:"c8e367ef1c1bc386ffecfc25f1da35e086ba78b6",class:"table-header"},t("tr",{key:"30cf247667103d0a837cf406fca3852ef6bca66b"},t("th",{key:"28f2ef9293f7f89888b6fd156d9239fd2456753c",class:"text-center"},"Date"),t("th",{key:"6b6824dc364ed0957d9a80b74dd3588af6bb6d4c",class:"text-center"},"Units booked"),t("th",{key:"6d47a05ffc31b2a2084950952139ad91aca147cc",class:"text-center"},"Total guests"),t("th",{key:"55bfb3b50d124343b0ebc34d3bc0f5062dc5fea4",class:"text-right"},t("ir-tooltip",{key:"08af866ab6a5e2054c58f925e9462a67312a9d21",customSlot:true,message:"Average Daily Rate",alignment:"end"},t("span",{key:"5663ac747da1f18ecd7ed18aafc7ef548a573214",slot:"tooltip-trigger"},"ADR"))),t("th",{key:"4159b35ce73a7191d1fe75432c96c53482361fef",class:"text-right"},"Rooms revenue"),t("th",{key:"b73d154a304a66d94e2ef1fa964ff9e34cb18bcf",class:""},"Occupancy"))),t("tbody",{key:"2e6c9865817a9e598c95c4519cb7321da1a6f0c5"},this.reports.length===0&&t("tr",{key:"2ff2f0c41152fea0f04367e99ae5ab302ebf880a"},t("td",{key:"e65a3870ea162ab7a3b69d949b621c797a19d0a9",colSpan:3,class:"text-center",style:{height:"30vh"}},"No data found")),this.reports.map((e=>{const i=`${parseFloat(e.occupancy_percent.toString()).toFixed(2)}%`;const a=e.last_year?`${parseFloat(e.last_year.occupancy_percent.toString()).toFixed(2)}%`:null;const r=fe(e.day,"YYYY-MM-DD");const o=fe().isBefore(r,"dates");return t("tr",{key:e.day,class:`ir-table-row ${o?"future-report":""}`},t("td",{class:"text-center"},r.format("D")),t("td",{class:"text-center"},t("div",{class:"d-flex flex-column",style:{gap:"0.5rem"}},t("p",{class:`p-0 m-0 ${e.last_year?.units_booked?"font-weight-bold":""}`},e.units_booked),e.last_year?.units_booked>0&&t("p",{class:"p-0 m-0"},e.last_year?.units_booked))),t("td",{class:"text-center"},t("div",{class:"d-flex flex-column",style:{gap:"0.5rem"}},t("p",{class:`p-0 m-0 ${e.last_year?.total_guests?"font-weight-bold":""}`},e.total_guests),e.last_year?.total_guests>0&&t("p",{class:"p-0 m-0"},e.last_year?.total_guests))),t("td",{class:"text-right"},t("div",{class:"d-flex flex-column",style:{gap:"0.5rem"}},t("p",{class:`p-0 m-0 ${e.last_year?.adr?"font-weight-bold":""}`},v(y.currency.symbol,e.adr)),e.last_year?.adr>0&&t("p",{class:"p-0 m-0"},v(y.currency.symbol,e.last_year.adr)))),t("td",{class:"text-right"},t("div",{class:"d-flex flex-column",style:{gap:"0.5rem"}},t("p",{class:`p-0 m-0 ${e.last_year?.rooms_revenue?"font-weight-bold":""}`},v(y.currency.symbol,e.rooms_revenue)),e.last_year?.rooms_revenue>0&&t("p",{class:"p-0 m-0"},v(y.currency.symbol,e.last_year.rooms_revenue)))),t("td",null,t("div",{class:"d-flex flex-column",style:{gap:"0.5rem"}},t("ir-progress-indicator",{percentage:i}),e.last_year?.occupancy_percent>0&&t("ir-progress-indicator",{percentage:a,color:"secondary"}))))}))),t("tfoot",{key:"3082248d5b486f631e94bcadb0994c6262d3e5dc"},t("tr",{key:"efa6555a1d72f642f4497d3560038f514c1539ab"},t("td",{key:"05301bdc61f6c04d411484339b770c0d8d70788e",colSpan:5}),t("td",{key:"4df2f96e9b334bf336c7d55735c5c677aefd58b7",colSpan:1,class:"text-right",style:{whiteSpace:"nowrap"}},t("div",{key:"f8e95ae43ae3f3b96b2b10b5891576c8b29a1942",class:"d-flex align-items-center justify-content-end",style:{gap:"1rem",paddingTop:"0.5rem"}},t("div",{key:"31efe5db64303df452eb8c57ee4a32504e1fb1a3",class:"d-flex align-items-center",style:{gap:"0.5rem"}},t("div",{key:"fab8f48f6e893608d72f80d901f128d12afe000c",class:"legend bg-primary"}),t("p",{key:"36b59044d2b5caf2ecebaaa2cc0495e33d45f5a5",class:"p-0 m-0"},"Selected period ")),t("div",{key:"962fb3cb344e459ba37a7ad5abd82eafbaa01bb7",class:"d-flex align-items-center",style:{gap:"0.5rem"}},t("div",{key:"8951487658f04a049ad5cf94c6ee8e292dd7946a",class:"legend secondary"}),t("p",{key:"08c4490228a8e724db89e6b0ae90781e21db43cf",class:"p-0 m-0"},"Previous year"))))))))}};Up.style=$p+Hp;const jp=":host{display:inline-flex}.new-badge{font-weight:400;text-align:center;vertical-align:middle !important;text-transform:uppercase;letter-spacing:0.02em;line-height:1;display:inline-flex;align-items:center;justify-content:center;width:fit-content;white-space:nowrap;background:#ff4961;color:white;padding:0.2rem 0.3rem;font-size:0.75rem !important;border-radius:4px}";const Vp=jp;const Gp=class{constructor(t){e(this,t)}render(){return t(i,{key:"e15b88240305a4b5229bebc630dfafe20bcd6344"},t("span",{key:"55a9baef8299fcdccdcc611685ec86913fe74302",class:"new-badge"},"new"))}};Gp.style=Vp;const qp=".otp-input-wrapper.sc-ir-otp{display:flex;gap:0.5rem;justify-content:space-evenly}.otp-digit.sc-ir-otp{--otp-size:3rem;width:var(--otp-size) !important;height:var(--otp-size) !important;padding:0;font-size:24px;font-weight:500;text-align:center;background-color:#fff;padding:0 !important}.otp-digit.sc-ir-otp:disabled{background-color:#e9ecef;cursor:not-allowed}input[type='number'].sc-ir-otp::-webkit-inner-spin-button,input[type='number'].sc-ir-otp::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type='number'].sc-ir-otp{-moz-appearance:textfield}@media (max-width: 480px){.otp-digit.sc-ir-otp{width:35px;height:45px;font-size:20px}.otp-input-wrapper.sc-ir-otp{gap:6px}}@media (max-width: 360px){.otp-digit.sc-ir-otp{width:30px;height:40px;font-size:18px}.otp-input-wrapper.sc-ir-otp{gap:4px}}";const Kp=qp;const Wp=class{constructor(t){e(this,t);this.otpChange=a(this,"otpChange",7);this.otpComplete=a(this,"otpComplete",7)}length=6;defaultValue;disabled=false;placeholder="";type="number";autoFocus=true;secure=false;numbersOnly=false;otpChange;otpComplete;otpValues=[];inputRefs=[];componentWillLoad(){this.otpValues=Array(this.length).fill("");if(this.defaultValue){this.setValue(this.defaultValue)}}componentDidLoad(){if(this.autoFocus&&this.inputRefs[0]){setTimeout((()=>{this.inputRefs[0].focus()}),0)}}handleLengthChange(e){if(e<1)return;const t=this.otpValues.length;if(e>t){this.otpValues=[...this.otpValues,...Array(e-t).fill("")]}else if(e<t){this.otpValues=this.otpValues.slice(0,e)}this.emitChanges()}handleInput=(e,t)=>{const i=e.target;let a=i.value;if(this.numbersOnly){a=a.replace(/[^0-9]/g,"")}if(a.length>1){a=a.slice(-1);i.value=a}this.otpValues[t]=a;this.emitChanges();if(a&&t<this.length-1){this.inputRefs[t+1].focus()}};handleKeyDown=(e,t)=>{switch(e.key){case"Backspace":if(!this.otpValues[t]&&t>0){this.inputRefs[t-1].focus();e.preventDefault()}break;case"Delete":this.otpValues[t]="";this.emitChanges();break;case"ArrowLeft":if(t>0){this.inputRefs[t-1].focus();e.preventDefault()}break;case"ArrowRight":if(t<this.length-1){this.inputRefs[t+1].focus();e.preventDefault()}break;case"Home":this.inputRefs[0].focus();e.preventDefault();break;case"End":this.inputRefs[this.length-1].focus();e.preventDefault();break}};handlePaste=(e,t)=>{e.preventDefault();const i=e.clipboardData?.getData("text")||"";const a=this.numbersOnly?i.replace(/[^0-9]/g,""):i;for(let e=0;e<Math.min(a.length,this.length-t);e++){this.otpValues[t+e]=a[e]}this.inputRefs.forEach(((e,t)=>{e.value=this.otpValues[t]||""}));const r=this.otpValues.findIndex((e=>!e));if(r!==-1&&r<this.length){this.inputRefs[r].focus()}else{this.inputRefs[this.length-1].focus()}this.emitChanges()};handleFocus=e=>{const t=e.target;if(t.value){setTimeout((()=>t.select()),0)}};emitChanges(){const e=this.otpValues.join("");this.otpChange.emit(e);if(this.otpValues.every((e=>e!==""))&&this.otpValues.length===this.length){this.otpComplete.emit(e)}}clear(){this.otpValues=Array(this.length).fill("");this.inputRefs.forEach((e=>{e.value=""}));this.emitChanges();if(this.inputRefs[0]){this.inputRefs[0].focus()}}setValue(e){const t=e.split("");for(let e=0;e<this.length;e++){this.otpValues[e]=e<t.length?t[e]:""}this.inputRefs.forEach(((e,t)=>{e.value=this.otpValues[t]||""}));this.emitChanges()}render(){return t(i,{key:"f21c70e442fa427fe5b59ec42eaa0aa5adc802e1",class:"otp-input-container"},t("div",{key:"313c7f673a6ece484c2c121c8a25c89d4ca07380",class:"otp-input-wrapper"},Array(this.length).fill(null).map(((e,i)=>t("input",{ref:e=>this.inputRefs[i]=e,type:this.type,inputmode:this.numbersOnly?"numeric":"text",class:"otp-digit form-control input-sm",maxlength:"1",placeholder:this.placeholder,disabled:this.disabled,autocomplete:"one-time-code",value:this.otpValues[i],onInput:e=>this.handleInput(e,i),onKeyDown:e=>this.handleKeyDown(e,i),onPaste:e=>this.handlePaste(e,i),onFocus:this.handleFocus,"aria-label":`Digit ${i+1} of ${this.length}`})))))}static get watchers(){return{length:["handleLengthChange"]}}};Wp.style=Kp;class Xp{async validateOTP(e){const{data:t}=await ye.post("/Validate_Exposed_OTP",e);if(t.ExceptionMsg!==""){throw new Error(t.ExceptionMsg)}return t}async resendOTP(e){const{data:t}=await ye.post("/Resend_Exposed_OTP",e);if(t.ExceptionMsg!==""){throw new Error(t.ExceptionMsg)}return t}async checkOTPNecessity(e){const{data:t}=await ye.post("/Check_OTP_Necessity",e);return t}}const Jp=":host{display:block}:root{--otp-modal-padding:1.5rem}.modal-backdrop{background-color:rgba(0, 0, 0, 0.5) !important}.otp-modal-header{border-bottom:0px !important}.otp-modal{z-index:9999999 !important;border:none;padding:0 !important;box-sizing:border-box;border:1px solid rgba(0, 0, 0, 0.2);border-radius:0.35rem;outline:0}.otp-modal-content{background-color:white;border:none;border-radius:0.35rem;outline:0}.otp-modal-title{margin-bottom:0;line-height:1.45}.otp-modal-body{max-height:100% !important;padding:0 var(--otp-modal-padding)}.otp-modal-header{display:flex;justify-content:space-between;padding:var(--otp-modal-padding);padding-bottom:1rem;border-top-left-radius:0.35rem;border-top-right-radius:0.35rem}.otp-modal-dialog{z-index:9999999 !important}.otp-modal-footer{border-top:0 !important;display:flex;gap:0.5rem;flex-direction:column;padding:var(--otp-modal-padding);padding-top:0.5rem !important}.verification-message{max-width:90%}.modal-loading-container{height:250px;width:80vw}@media (min-width: 768px){.otp-modal-dialog,.otp-modal-content{width:fit-content !important}.otp-modal-footer{flex-direction:row;align-items:center}.modal-loading-container{width:380px !important}.verification-message{max-width:350px !important}}";const Qp=Jp;const Zp=class{constructor(t){e(this,t);this.otpFinished=a(this,"otpFinished",7)}language="en";resendTimer=60;requestUrl;baseOTPUrl;showResend=true;email;otpLength=6;ticket;otp="";error="";isLoading=false;timer=60;dialogRef;timerInterval;systemService=new Xp;roomService=new we;tokenService=new me;otpVerificationSchema=z.object({email:z.string().nonempty(),requestUrl:z.string().nonempty(),otp:z.string().length(this.otpLength)});otpFinished;isInitializing;componentWillLoad(){if(this.ticket){this.tokenService.setToken(this.ticket)}this.fetchLocale()}handleTicketChange(e,t){if(e!==t){this.tokenService.setToken(e);this.fetchLocale()}}handleKeyDownChange(e){if(e.key==="Escape"&&this.dialogRef?.open){e.preventDefault()}}async openModal(){this.resetState();if(typeof this.dialogRef.showModal==="function"){this.dialogRef.showModal()}else{this.dialogRef.setAttribute("open","")}if(this.showResend)this.startTimer();await this.focusFirstInput()}async closeModal(){if(typeof this.dialogRef.close==="function"){this.dialogRef.close()}else{this.dialogRef.removeAttribute("open")}this.otp=null;this.clearTimer()}async fetchLocale(){if(!this.tokenService.getToken()){return}this.isInitializing=true;await this.roomService.fetchLanguage(this.language,["_USER_MGT"]);this.isInitializing=false}resetState(){this.otp="";this.error="";this.isLoading=false;this.timer=60;this.clearTimer()}startTimer(){this.clearTimer();this.timerInterval=window.setInterval((()=>{if(this.timer>0){this.timer--}else{this.clearTimer()}}),1e3)}clearTimer(){if(this.timerInterval){clearInterval(this.timerInterval);this.timerInterval=null}}async focusFirstInput(){await new Promise((e=>setTimeout(e,50)));const e=this.dialogRef.querySelector("input");e&&e.focus()}handleOtpComplete=e=>{this.error="";this.otp=e.detail};async verifyOtp(){if(this.otp.length<this.otpLength)return;this.isLoading=true;this.otpVerificationSchema.parse({otp:this.otp,requestUrl:this.requestUrl,email:this.email});try{await this.systemService.validateOTP({METHOD_NAME:this.requestUrl,OTP:this.otp});this.otpFinished.emit({otp:this.otp,type:"success"});this.closeModal()}catch(e){this.error="Verification failed. Please try again."}finally{this.isLoading=false}}async resendOtp(){if(this.timer>0)return;try{await this.systemService.resendOTP({METHOD_NAME:this.requestUrl});this.timer=60;this.startTimer()}catch(e){console.log(e)}}handleCancelClicked(){if(this.baseOTPUrl==="Check_OTP_Necessity"){this.closeModal();this.otpFinished.emit({otp:null,type:"cancelled"});return}window.location.reload()}disconnectedCallback(){this.clearTimer()}render(){return t(i,{key:"ea4fc13a8b71189d7461747624d33b4e847df2da"},t("dialog",{key:"dcdbd37d53a7dd9b2cc70b651115f0c18fffd9a8",ref:e=>this.dialogRef=e,class:"otp-modal","aria-modal":"true"},t("form",{key:"27e04a5555b6ea8a377df3ae63982448cd38862e",method:"dialog",class:"otp-modal-content"},this.isInitializing||!g.entries?t("div",{class:"d-flex align-items-center justify-content-center modal-loading-container"},t("ir-spinner",null)):t(r,null,t("header",{class:"otp-modal-header"},t("h5",{class:"otp-modal-title"},g.entries.Lcz_VerifyYourIdentity)),t("section",{class:"otp-modal-body d-flex align-items-center flex-column"},t("p",{class:"verification-message text-truncate"},g.entries.Lcz_WeSentYuoVerificationCode," ",this.email),t("ir-otp",{autoFocus:true,length:this.otpLength,defaultValue:this.otp,onOtpComplete:this.handleOtpComplete}),this.error&&t("p",{class:"text-danger small mt-1 p-0 mb-0"},this.error),this.showResend&&t(r,null,this.timer>0?t("p",{class:"small mt-1"},g.entries.Lcz_ResendCode," 00:",String(this.timer).padStart(2,"0")):t("ir-button",{class:"mt-1",btn_color:"link",onClickHandler:e=>{e.stopImmediatePropagation();e.stopPropagation();this.resendOtp()},size:"sm",text:"Didnt receive code? Resend"}))),t("footer",{class:"otp-modal-footer justify-content-auto"},t("ir-button",{class:"w-100",btn_styles:"flex-fill",text:g.entries.Lcz_Cancel,btn_color:"secondary",onClick:this.handleCancelClicked.bind(this)}),t("ir-button",{class:"w-100",btn_styles:"flex-fill",text:g.entries.Lcz_VerifyNow,isLoading:this.isLoading,btn_disabled:this.otp?.length<this.otpLength||this.isLoading,onClick:()=>this.verifyOtp()}))))))}static get watchers(){return{ticket:["handleTicketChange"]}}};Zp.style=Qp;const ef=".sc-ir-pagination-h{display:block;font-family:var(--font-family, inherit);font-size:var(--font-size, 0.875rem);color:var(--text-color, #333)}.pagination-container.sc-ir-pagination{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:0.75rem;padding:0.5rem 0;min-height:2.5rem}.pagination__current-page-select.sc-ir-pagination{margin-left:0.5rem;margin-right:0.5rem;max-width:70px}.pagination-container--disabled.sc-ir-pagination{opacity:0.6;pointer-events:none}.pagination-info.sc-ir-pagination{margin:0;color:var(--text-muted, #6c757d);font-size:var(--font-size-sm, 0.875rem);white-space:nowrap;padding:0}.buttons-container.sc-ir-pagination{display:flex;align-items:center;flex-wrap:wrap}.buttons-container.sc-ir-pagination ir-button.sc-ir-pagination{flex-shrink:0}.buttons-container.sc-ir-pagination ir-select.sc-ir-pagination{flex-shrink:0}.page-size-select.sc-ir-pagination{margin:0 0.5rem;min-width:5rem}@media (min-width: 768px){.pagination-container.sc-ir-pagination{flex-direction:row;align-items:center;justify-content:space-between;gap:1.25rem}.pagination-info.sc-ir-pagination{order:0}.buttons-container.sc-ir-pagination{justify-content:flex-end}}@media (max-width: 480px){.pagination-container.sc-ir-pagination{gap:0.5rem}.buttons-container.sc-ir-pagination{justify-content:center;gap:0.125rem}.pagination-info.sc-ir-pagination{text-align:center;width:100%}}@media (prefers-contrast: high){.pagination-info.sc-ir-pagination{color:var(--text-color, #000)}.pagination-container--disabled.sc-ir-pagination{opacity:0.8}}@media (prefers-reduced-motion: reduce){*.sc-ir-pagination{transition:none !important}}";const tf=ef;const af=class{constructor(t){e(this,t);this.pageChange=a(this,"pageChange",7);this.pageSizeChange=a(this,"pageSizeChange",7);this.firstPage=a(this,"firstPage",7);this.lastPage=a(this,"lastPage",7);this.previousPage=a(this,"previousPage",7);this.nextPage=a(this,"nextPage",7)}pages=0;pageSizes;allowPageSizeChange;total=0;currentPage=1;showing={from:0,to:0};showTotalRecords=true;recordLabel="";disabled=false;pageSize=10;pageChange;pageSizeChange;firstPage;lastPage;previousPage;nextPage;validateCurrentPage(e){if(e<1){console.warn("currentPage must be greater than 0")}if(e>this.pages){console.warn("currentPage cannot be greater than total pages")}}validatePages(e){if(e<0){console.warn("pages must be greater than or equal to 0")}}renderItemRange(){if(!this.showTotalRecords){return""}const e=Math.max(this.showing.from,1);const t=Math.min(this.showing.to,this.total);return`${"View"} ${e} - ${t} ${"of"} ${this.total} ${this.recordLabel}`}handlePageChange(e,t="direct"){if(this.disabled||e<1||e>this.pages||e===this.currentPage){return}const i={currentPage:e,totalPages:this.pages,pageSize:this.pageSize};switch(t){case"first":this.firstPage.emit(i);break;case"previous":this.previousPage.emit(i);break;case"next":this.nextPage.emit(i);break;case"last":this.lastPage.emit(i);break}this.pageChange.emit(i)}handlePageSizeChange(e){const t={currentPage:this.currentPage,totalPages:this.pages,pageSize:e};this.pageSizeChange.emit(t)}shouldRender(){return this.pages>0&&this.total>0}render(){if(!this.shouldRender()){return null}const e=this.currentPage===1;const i=this.currentPage===this.pages;return t("div",{class:{"pagination-container":true,"pagination-container--disabled":this.disabled},role:"navigation","aria-label":"Pagination Navigation"},this.showTotalRecords&&t("p",{class:"pagination-info","aria-live":"polite"},this.renderItemRange()),t("div",{class:"buttons-container"},this.allowPageSizeChange&&this.pageSizes&&t("ir-select",{class:"page-size-select",selectedValue:String(this.pageSize),data:this.pageSizes.map((e=>({text:`${e} ${this.recordLabel}`,value:String(e)}))),showFirstOption:false,onSelectChange:e=>this.handlePageSizeChange(Number(e.detail))}),this.pages>1&&t(r,null,t("ir-custom-button",{"aria-label":"Go to first page",onClickHandler:()=>this.handlePageChange(1,"first"),disabled:e||this.disabled,variant:"neutral",appearance:"plain"},t("wa-icon",{name:"angles-left",label:"Go to first page"})),t("ir-custom-button",{onClickHandler:()=>this.handlePageChange(this.currentPage-1,"previous"),variant:"neutral",appearance:"plain",disabled:e||this.disabled,"aria-label":"Go to previous page"},t("wa-icon",{name:"angle-left",label:"Go to previous page"})),t("wa-select",{value:this.currentPage?.toString(),class:"pagination__current-page-select",onchange:e=>this.handlePageChange(+e.target.value,"direct"),"aria-label":`Current page ${this.currentPage} of ${this.pages}`,disabled:this.disabled,size:"small",defaultValue:"1"},Array.from(Array(this.pages),((e,t)=>t+1)).map((e=>t("wa-option",{value:e.toString(),key:`${this.recordLabel}-${e}`},e)))),t("ir-custom-button",{"aria-label":"Go to next page",onClickHandler:()=>this.handlePageChange(this.currentPage+1,"next"),disabled:i||this.disabled,variant:"neutral",appearance:"plain"},t("wa-icon",{name:"angle-right",label:"Go to next page"})),t("ir-custom-button",{onClickHandler:()=>this.handlePageChange(this.pages,"last"),variant:"neutral",appearance:"plain",disabled:i||this.disabled,"aria-label":"Go to last page"},t("wa-icon",{name:"angles-right",label:"Go to last page"})))))}static get watchers(){return{currentPage:["validateCurrentPage"],pages:["validatePages"]}}};af.style=tf;const rf=".sc-ir-password-validator-h{display:block}";const of=rf;const nf=class{constructor(t){e(this,t);this.passwordValidationChange=a(this,"passwordValidationChange",7)}password="";passwordValidationChange;handlePasswordChange(e,t){if(e!==t){this.passwordValidationChange.emit(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()\-_=+]).{8,16}$/.test(e))}}get validLength(){if(!this.password){return false}return this.password.length>=8&&this.password.length<=16}get hasUppercase(){if(!this.password){return false}return/[A-Z]/.test(this.password)}get hasLowercase(){if(!this.password){return false}return/[a-z]/.test(this.password)}get hasDigit(){if(!this.password){return false}return/[0-9]/.test(this.password)}get hasSpecialChar(){if(!this.password){return false}return/[!@#$%^&*()\-_=+]/.test(this.password)}render(){return t("div",{key:"eca9417e38b22449204094e5030147bcdb88da02",class:"m-0 p-0"},t("requirement-check",{key:"b2240a47ea4f5475271f19f90e4926b4e691f4f7",isValid:this.validLength,text:"Minimum 8 characters"}),t("requirement-check",{key:"2a6965b0887ac886b7d2046f76519eebf2ff0fb2",isValid:this.hasUppercase,text:"At least one uppercase letter"}),t("requirement-check",{key:"9bd18b6ef1ccb15f3b643f223c3ff4a4706f3b43",isValid:this.hasLowercase,text:"At least one lowercase letter"}),t("requirement-check",{key:"1218436f220be87fa33c034ec1110eda38e637ea",isValid:this.hasDigit,text:"At least one digit"}),t("requirement-check",{key:"f1a13c68e52354d3761cc4cb0a59b92fa9275380",isValid:this.hasSpecialChar,text:"At least one special character"}))}static get watchers(){return{password:["handlePasswordChange"]}}};nf.style=of;const sf=".sc-ir-payment-details-h{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important}.sc-ir-payment-details-h *.sc-ir-payment-details{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important}.sm-margin-right.sc-ir-payment-details{margin-right:5px !important;background:#000}.action_icons.sc-ir-payment-details{width:60px}.w-60.sc-ir-payment-details{width:100px;padding:0 5px}.payments-height.sc-ir-payment-details{height:30px}.payment_date.sc-ir-payment-details{width:100px}.iframeHeight.sc-ir-payment-details{height:max-content;height:22.5rem}.designation.sc-ir-payment-details{width:120px}.total-cost-container.sc-ir-payment-details{background:#7cbebe;color:white;padding:0.5rem;border-radius:5px}";const lf=sf;const cf=class{constructor(t){e(this,t);this.resetBookingEvt=a(this,"resetBookingEvt",7);this.resetExposedCancellationDueAmount=a(this,"resetExposedCancellationDueAmount",7);this.toast=a(this,"toast",7);this.openSidebar=a(this,"openSidebar",7);this.openPrintScreen=a(this,"openPrintScreen",7)}booking;paymentActions;propertyId;paymentEntries;confirmModal=false;toBeDeletedItem=null;modalMode=null;resetBookingEvt;resetExposedCancellationDueAmount;toast;openSidebar;openPrintScreen;paymentService=new Ee;bookingService=new l;dialogRef;handlePaymentGeneration(e){const t=e.detail;const i=this.paymentEntries?.types?.find((e=>e.CODE_NAME===(this.booking.status.code==="003"?t.pay_type_code:"001")));this.openSidebar.emit({type:"payment-folio",payload:{payment:{...t,date:fe().format("YYYY-MM-DD"),id:-1,amount:t.amount,payment_type:i?{code:i.CODE_NAME,description:i.CODE_VALUE_EN,operation:i.NOTES}:null,designation:i?.CODE_VALUE_EN??null},mode:"payment-action"}})}handleAddPayment=e=>{let t={id:-1,date:fe().format("YYYY-MM-DD"),amount:null,currency:y.currency,designation:null,reference:null};if(e){const{amount:i,type:a}=e;const r=this.paymentEntries.methods.find((e=>e.CODE_NAME==="001"));const o={code:r.CODE_NAME,description:r.CODE_VALUE_EN,operation:r.NOTES};const n=this.paymentEntries.types.find((e=>e.CODE_NAME===(a==="cancellation-penalty"?"001":"010")));t={...t,amount:i,designation:n.CODE_VALUE_EN,payment_type:{code:n.CODE_NAME,description:n.CODE_VALUE_EN,operation:n.NOTES},payment_method:a==="refund"?undefined:o};this.openSidebar.emit({type:"payment-folio",payload:{payment:t,mode:"payment-action"}});return}this.openSidebar.emit({type:"payment-folio",payload:{payment:t,mode:"new"}})};handleEditPayment=e=>{this.openSidebar.emit({type:"payment-folio",payload:{payment:e,mode:"edit"}})};handleDeletePayment=e=>{this.modalMode="delete";this.toBeDeletedItem=e;this.dialogRef.openModal()};async handleIssueReceipt(e){if(e.receipt_nbr){this.openPrintScreen.emit({mode:"receipt",payload:{pid:e.id.toString(),rnb:e.receipt_nbr}});return}const t=await this.bookingService.getNextValue({starter:"RC"});this.openPrintScreen.emit({mode:"receipt",payload:{pid:e.id.toString(),rnb:`RC-${t.My_Result}`}})}async cancelPayment(){try{await this.paymentService.CancelPayment(this.toBeDeletedItem.id);const e=this.booking.financial.payments.filter((e=>e.id!==this.toBeDeletedItem.id));this.booking={...this.booking,financial:{...this.booking.financial,payments:e}};this.confirmModal=false;this.resetBookingEvt.emit(null);this.resetExposedCancellationDueAmount.emit(null);this.toBeDeletedItem=null;this.modalMode=null}catch(e){console.error("Error canceling payment:",e);this.toast.emit({type:"error",title:"Error",description:"Failed to cancel payment. Please try again.",position:"top-right"})}}handleConfirmModal=async e=>{e.stopImmediatePropagation();e.stopPropagation();if(this.modalMode==="delete"){await this.cancelPayment()}};handleCancelModal=e=>{e.stopImmediatePropagation();e.stopPropagation();this.modalMode=null;this.toBeDeletedItem=null};hasValidFinancialData(){return Boolean(this.booking?.financial)}shouldShowRefundButton(){if(!this.booking.is_direct){return false}if(this.booking.financial.due_amount===0){return false}if(this.booking.financial.cancelation_penality_as_if_today===0){return false}if(this.booking.is_requested_to_cancel||["003","004"].includes(this.booking.status.code)){return this.booking.financial.cancelation_penality_as_if_today<0}return false}shouldCancellationButton(){if(!this.booking.is_direct){return false}if(this.booking.financial.due_amount===0){return false}if(this.booking.financial.cancelation_penality_as_if_today===0){return false}if(["003","004"].includes(this.booking.status.code)&&this.booking.financial.cancelation_penality_as_if_today>0){return true}return false}render(){if(!this.hasValidFinancialData()){return null}const{financial:e,currency:i}=this.booking;return[t("wa-card",null,t("ir-payment-summary",{isBookingCancelled:["003","004"].includes(this.booking.status.code),totalCost:e.gross_cost,balance:e.due_amount,collected:this.booking.financial.collected+this.booking.financial.refunds,currency:i}),t("ir-booking-guarantee",{booking:this.booking,bookingService:this.bookingService}),!["003","004"].includes(this.booking.status.code)&&this.booking.is_direct&&t("ir-applicable-policies",{propertyId:this.propertyId,booking:this.booking}),this.shouldShowRefundButton()&&t("div",{class:"d-flex mt-1"},t("ir-custom-button",{variant:"brand",appearance:"outlined",onClickHandler:()=>{this.handleAddPayment({type:"refund",amount:Math.abs(this.booking.financial.cancelation_penality_as_if_today)})}},`Refund ${v(i.symbol,Math.abs(this.booking.financial.cancelation_penality_as_if_today))}`)),this.shouldCancellationButton()&&t("div",{class:"d-flex mt-1"},t("ir-custom-button",{variant:"brand",appearance:"outlined",onClickHandler:()=>{this.handleAddPayment({type:"cancellation-penalty",amount:Math.abs(this.booking.financial.cancelation_penality_as_if_today)})}},`Charge cancellation penalty ${v(i.symbol,this.booking.financial.cancelation_penality_as_if_today)}`))),t("ir-payments-folio",{payments:e.payments||[],onAddPayment:()=>this.handleAddPayment(),onEditPayment:e=>this.handleEditPayment(e.detail),onDeletePayment:e=>this.handleDeletePayment(e.detail),onIssueReceipt:e=>this.handleIssueReceipt(e.detail)}),t("ir-dialog",{onIrDialogHide:e=>{e.stopImmediatePropagation();e.stopPropagation()},onIrDialogAfterHide:e=>{this.handleCancelModal(e)},ref:e=>this.dialogRef=e,label:"Alert",lightDismiss:this.modalMode!=="delete"},t("p",null,this.modalMode==="delete"?g.entries.Lcz_IfDeletedPermantlyLost:g.entries.Lcz_EnteringAmountGreaterThanDue),t("div",{slot:"footer",class:"ir-dialog__footer"},t("ir-custom-button",{size:"medium","data-dialog":"close",variant:"neutral",appearance:"filled"},g.entries.Lcz_Cancel),t("ir-custom-button",{size:"medium",onClickHandler:e=>this.handleConfirmModal(e),variant:this.modalMode==="delete"?"danger":"brand"},this.modalMode==="delete"?g.entries.Lcz_Delete:g.entries.Lcz_Confirm)))]}};cf.style=lf;const df=".sc-ir-payment-folio-h{display:block;--payment-type-badge-bg:#ff4961;text-align:start}.payment-type-badge.sc-ir-payment-folio{background:var(--payment-type-badge-bg);color:white;padding:0.2rem 0.3rem !important;font-size:12px;border-radius:4px;margin:0;text-transform:capitalize}.credit-badge.sc-ir-payment-folio{--payment-type-badge-bg:#629a4c}.debit-badge.sc-ir-payment-folio{--payment-type-badge-bg:#ff4961}.dropdown-item-payment.sc-ir-payment-folio{display:flex;align-items:center;gap:1rem;box-sizing:border-box;justify-content:space-between}.input-group-text.sc-ir-payment-folio{border-color:#cacfe7 !important}.payment-folio__payment-type-option.sc-ir-payment-folio{display:flex;align-items:center;justify-content:space-between}.payment-folio__form.sc-ir-payment-folio{display:grid;gap:var(--wa-space-m, 1rem)}";const hf=df;const uf="YYYY-MM-DD";const pf=class{constructor(t){e(this,t);this.closeModal=a(this,"closeModal",7)}paymentEntries;bookingNumber;payment={date:fe().format(uf),amount:0,designation:undefined,currency:null,reference:null,id:-1};mode;isLoading=null;isOpen;closeModal;async openFolio(){this.isOpen=true}async closeFolio(){this.isOpen=false;this.closeModal.emit(null)}_id=`ir__folio-form-${pe()}`;render(){return t("ir-drawer",{key:"f31698f3a1f91d25541cb068950a9216e8d3be23",placement:"start",style:{"--ir-drawer-width":"40rem","--ir-drawer-background-color":"var(--wa-color-surface-default)","--ir-drawer-padding-left":"var(--spacing)","--ir-drawer-padding-right":"var(--spacing)","--ir-drawer-padding-top":"var(--spacing)","--ir-drawer-padding-bottom":"var(--spacing)"},label:this.payment?.id!==-1?"Edit Folio Entry":"New Folio Entry",open:this.isOpen,onDrawerHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.closeFolio()}},this.isOpen&&t("ir-payment-folio-form",{key:"8108780a16283ff2d831a6ea9ffee540aaad4b68",formId:this._id,onLoadingChanged:e=>this.isLoading=e.detail,onCloseModal:e=>{e.stopImmediatePropagation();e.stopPropagation();this.closeFolio()},paymentEntries:this.paymentEntries,bookingNumber:this.bookingNumber,payment:this.payment,mode:this.mode}),t("div",{key:"64109e89e195398072e8164980caaa596363e94c",slot:"footer",class:"w-100 d-flex align-items-center",style:{gap:"var(--wa-space-xs)"}},t("ir-custom-button",{key:"a6c3401c4adc5fc7d4b25ff3900c48d18d3252ba",class:"flex-fill",size:"medium","data-drawer":"close",appearance:"filled",variant:"neutral",onClickHandler:()=>this.closeFolio()},"Cancel"),t("ir-custom-button",{key:"2d8b7dfe6630a310558e2002950eb2c2a4c6263c",form:this._id,loading:this.isLoading==="save",class:"flex-fill",size:"medium",type:"submit",value:"save",appearance:"accent",variant:"brand"},"Save")))}};pf.style=hf;function ff(e){try{const{groups:t,types:i}=z.object({types:b.array().min(1),groups:b.array().min(1),methods:b.array().min(1)}).parse(e);const a=[...i];const r=e=>e.map((e=>a.find((t=>t.CODE_NAME===e)))).filter((e=>Boolean(e)));const o=e=>{const i=t.find((t=>t.CODE_NAME===e));return i?i.CODE_VALUE_EN.split(","):[]};let n={};t.forEach((e=>{n[e.CODE_NAME]=r(o(e.CODE_NAME))}));return n}catch(e){console.log(e);return{}}}const bf=["001","010"];const gf=".sc-ir-payment-folio-form-h{display:block;--payment-type-badge-bg:#ff4961;text-align:start}.payment-type-badge.sc-ir-payment-folio-form{background:var(--payment-type-badge-bg);color:white;padding:0.2rem 0.3rem !important;font-size:12px;border-radius:4px;margin:0;text-transform:capitalize}.credit-badge.sc-ir-payment-folio-form{--payment-type-badge-bg:#629a4c}.debit-badge.sc-ir-payment-folio-form{--payment-type-badge-bg:#ff4961}.dropdown-item-payment.sc-ir-payment-folio-form{display:flex;align-items:center;gap:1rem;box-sizing:border-box;justify-content:space-between}.input-group-text.sc-ir-payment-folio-form{border-color:#cacfe7 !important}.payment-folio__payment-type-option.sc-ir-payment-folio-form{display:flex;align-items:center;justify-content:space-between}.payment-folio__form.sc-ir-payment-folio-form{display:grid;gap:var(--wa-space-m, 1rem)}";const mf=gf;const wf="YYYY-MM-DD";const yf=e=>{if(!e){return false}return bf.includes(e)};const vf=z.object({code:z.string().min(3).max(4),description:z.string(),operation:z.union([z.literal("CR"),z.literal("DB")])});const kf=z.object({code:z.string().min(3).max(4),description:z.string(),operation:z.string().optional().nullable()});const xf=z.object({id:z.number().nullable().optional(),date:z.string().regex(/^\d{4}-\d{2}-\d{2}$/).refine((e=>{const t=fe(e,wf,true);return t.isValid()}),{message:`Invalid date`}),amount:z.coerce.number().min(0),reference:z.string().optional().nullable(),payment_type:vf,payment_method:kf.nullable().optional()});const _f=xf.superRefine(((e,t)=>{if(yf(e.payment_type?.code)&&!e.payment_method?.code){t.addIssue({code:z.ZodIssueCode.custom,path:["payment_method"],message:"Payment method is required for this transaction type."})}}));let Df=0;const Cf=class{constructor(t){e(this,t);this.closeModal=a(this,"closeModal",7);this.resetBookingEvt=a(this,"resetBookingEvt",7);this.resetExposedCancellationDueAmount=a(this,"resetExposedCancellationDueAmount",7);this.loadingChanged=a(this,"loadingChanged",7)}paymentEntries;bookingNumber;formId;payment={date:fe().format(wf),amount:0,designation:undefined,currency:null,reference:null,id:-1};mode;isLoading=null;errors={};autoValidate=false;folioData;_paymentTypes={};closeModal;resetBookingEvt;resetExposedCancellationDueAmount;loadingChanged;today=fe().format(wf);paymentService=new Ee;componentId=`ir-payment-folio-form-${++Df}`;controlIds={date:`${this.componentId}-date`,transactionType:`${this.componentId}-transaction-type`,paymentMethod:`${this.componentId}-payment-method`,amount:`${this.componentId}-amount`,reference:`${this.componentId}-reference`};componentWillLoad(){if(this.payment){this.folioData={...this.payment}}this.syncPaymentTypes()}handlePaymentChange(e,t){if(e!==t&&e){this.folioData={...e};this.syncPaymentTypes()}}handlePaymentEntriesChange(e,t){if(e!==t){this.syncPaymentTypes()}}updateFolioData(e){this.folioData={...this.folioData??{},...e}}requiresPaymentMethod(e){return yf(e)}getDefaultPaymentMethod(){const e=this.paymentEntries?.methods?.[0];if(!e){return null}return{code:e.CODE_NAME,description:e.CODE_VALUE_EN,operation:e.NOTES}}stopEventPropagation(e){e.stopImmediatePropagation();e.stopPropagation()}syncPaymentTypes(){if(!this.paymentEntries){this._paymentTypes={};return}const e=ff(this.paymentEntries);if(this.mode==="payment-action"&&this.payment?.payment_type?.code==="001"){const{PAYMENTS:t,CANCELLATION:i}=e;this._paymentTypes={PAYMENTS:t,CANCELLATION:i};return}this._paymentTypes=e}async savePayment(e=false){try{this.isLoading=e?"save-print":"save";this.loadingChanged.emit(this.isLoading);this.autoValidate=true;this.errors={};const t=_f.parse({...this.folioData??{},amount:this.folioData?.amount??undefined});const{payment_type:i,payment_method:a,...r}=t;const o={...r,payment_type:i,payment_method:a?a:undefined,id:r.id??this.payment?.id??-1,date:r.date??this.payment?.date??this.today,amount:r.amount??0,currency:y.currency,reference:r.reference??"",designation:i?.description||""};await this.paymentService.AddPayment(o,this.bookingNumber);this.resetBookingEvt.emit(null);this.resetExposedCancellationDueAmount.emit(null);this.closeModal.emit()}catch(e){const t={};if(e instanceof N){e.issues.forEach((e=>{const i=e.path[0]?.toString();if(i){t[i]=true}}))}console.error("Failed to save payment folio entry",e);this.errors=t}finally{this.isLoading=null;this.loadingChanged.emit(null)}}handleDropdownChange(e){this.updateFolioData({designation:e});if(!e){this.updateFolioData({payment_type:null,payment_method:null});return}const t=this.paymentEntries?.types?.find((t=>t.CODE_NAME===e));if(!t){console.warn(`Invalid payment type ${e}`);this.updateFolioData({payment_type:null,payment_method:null});return}this.updateFolioData({payment_type:{code:t.CODE_NAME,description:t.CODE_VALUE_EN,operation:t.NOTES},payment_method:this.requiresPaymentMethod(t.CODE_NAME)?null:this.getDefaultPaymentMethod()})}handlePaymentMethodDropdownChange(e){const t=this.paymentEntries?.methods?.find((t=>t.CODE_NAME===e));if(!t){console.warn(`Invalid payment method ${e}`);this.updateFolioData({payment_method:null});return}this.updateFolioData({payment_method:{code:t.CODE_NAME,description:t.CODE_VALUE_EN,operation:t.NOTES}})}renderDropdownItems(){const e=Object.values(this._paymentTypes??{});if(!e.length){return null}return e.map(((e,i)=>t(r,null,e.map((e=>t("wa-option",{key:e.CODE_NAME,value:e.CODE_NAME,label:e.CODE_VALUE_EN},t("div",{class:"payment-folio__payment-type-option"},t("span",null,e.CODE_VALUE_EN),t("wa-badge",{variant:e.NOTES==="CR"?"success":"danger",style:{fontSize:"var(--wa-font-size-s)"}},e.NOTES==="CR"?"credit":"debit"))))),i!==Object.values(this._paymentTypes).length-1&&t("wa-divider",null))))}render(){return t("form",{key:"ae4168bb6622b5673b21d1487e14009c2639557b",onSubmit:e=>{e.preventDefault();const t=e.submitter;if(t?.value==="save"){this.savePayment()}},class:"payment-folio__form",id:this.formId},t("ir-custom-date-picker",{key:"e920c8a7632a2e8630645fd57f8c2e20adb90ab8",id:this.controlIds.date,label:"Date","aria-invalid":this.errors?.date&&!this.folioData?.date?"true":"false","data-testid":"pickup_date",onDateChanged:e=>{this.updateFolioData({date:e.detail.start?.format(wf)})},minDate:fe().add(-2,"months").format("YYYY-MM-DD"),emitEmptyDate:true,maxDate:this.today,date:this.folioData?.date}),t("ir-validator",{key:"8d51ec239f10cbb5759c807d3c8ba4d283b313b0",value:this.folioData?.payment_type?.code,autovalidate:this.autoValidate,schema:vf.shape.code,valueEvent:"change wa-change select-change",blurEvent:"wa-hide"},t("wa-select",{key:"a7b76e8cc49b86d667fe4c71a78b559c622d2075",id:this.controlIds.transactionType,size:"small","onwa-hide":e=>this.stopEventPropagation(e),"onwa-show":e=>this.stopEventPropagation(e),placeholder:"Select...",label:"Transaction type",defaultValue:this.folioData?.payment_type?.code,value:this.folioData?.payment_type?.code,disabled:this.mode==="payment-action",onchange:e=>{this.stopEventPropagation(e);this.handleDropdownChange(e.target.value)}},t("wa-option",{key:"c25694c419afe91202efe823714bd8fea68be0ae",value:""},"Select..."),this.renderDropdownItems())),this.requiresPaymentMethod(this.folioData?.payment_type?.code)&&t("ir-validator",{key:"665096c5f29f784e90d974f763f72b1ba59f85ae",value:this.folioData?.payment_method?.code??"",autovalidate:this.autoValidate,schema:kf.shape.code,valueEvent:"change wa-change select-change",blurEvent:"wa-hide"},t("wa-select",{key:"371c059298c7350fad77dfa73a709a5b9a91d51d",id:this.controlIds.paymentMethod,size:"small",label:`${this.folioData.payment_type?.code==="001"?"Payment":"Refund"} method`,"onwa-show":e=>this.stopEventPropagation(e),"onwa-hide":e=>this.stopEventPropagation(e),defaultValue:this.folioData?.payment_method?.code,value:this.folioData?.payment_method?.code??"",onchange:e=>{this.stopEventPropagation(e);this.handlePaymentMethodDropdownChange(e.target.value)}},t("wa-option",{key:"0b3454c43c821523bf95f3fa3552426738220260",value:""},"Select..."),this.paymentEntries?.methods?.map((e=>t("wa-option",{key:e.CODE_NAME,label:e.CODE_VALUE_EN,value:e.CODE_NAME},e.CODE_VALUE_EN))))),t("ir-validator",{key:"0baa3289bcc9be8ffcdb05db4ea71c545e2ea048",value:this.folioData?.amount?.toString()??undefined,autovalidate:this.autoValidate,schema:xf.shape.amount,valueEvent:"text-change input input-change",blurEvent:"input-blur"},t("ir-custom-input",{key:"7deaceddaca9afaa9f1c48d2377133d6a46cb027",id:this.controlIds.amount,"aria-invalid":String(!!this.errors?.amount),value:this.folioData?.amount?.toString()??"",label:"Amount",mask:"price",min:0,"onText-change":e=>this.updateFolioData({amount:!e.detail?undefined:Number(e.detail)})},t("span",{key:"b23dba7894fe07aeaf12c9abd88e59af6d294ccf",slot:"start"},y.currency.symbol))),t("ir-validator",{key:"408936904f2857ca98f377f92253be8350f6fd03",value:this.folioData?.reference??"",autovalidate:this.autoValidate,schema:xf.shape.reference,valueEvent:"text-change input input-change",blurEvent:"input-blur"},t("ir-custom-input",{key:"1ecfbb7bb4196de0dbbe26a7d9be83a578ca848a",id:this.controlIds.reference,value:this.folioData?.reference??"",label:"Reference",maxlength:50,"onText-change":e=>this.updateFolioData({reference:e.detail??""})})))}static get watchers(){return{payment:["handlePaymentChange"],paymentEntries:["handlePaymentEntriesChange"]}}};Cf.style=mf;const Mf=".payment-item__payment-item.sc-ir-payment-item{display:flex;flex-direction:column;min-height:2.5rem}.payment-item__payment-item.sc-ir-payment-item p.sc-ir-payment-item{padding:0;margin:0;box-sizing:border-box}.payment-item__payment-body.sc-ir-payment-item{display:flex;flex-direction:column}.payment-item__payment-fields.sc-ir-payment-item{display:flex;align-items:center;justify-content:space-between}.payment-item__payment-body.sc-ir-payment-item .payment-item__payment-reference.sc-ir-payment-item,.payment-item__payment-body.sc-ir-payment-item .payment-item__payment-description.sc-ir-payment-item{display:none}.payment-item__payment-toolbar.sc-ir-payment-item{display:flex;align-items:center;justify-content:space-between}.payment-item__payment-toolbar.sc-ir-payment-item .payment-item__payment-amount.sc-ir-payment-item{display:none}.payment-item__action-button.sc-ir-payment-item{cursor:pointer}.payment-item__payment-amount.sc-ir-payment-item{font-weight:700;white-space:nowrap}.payment-item__payment-amount.is-credit.sc-ir-payment-item{color:var(--wa-color-success-50)}.payment-item__payment-amount.is-debit.sc-ir-payment-item{color:var(--wa-color-danger-50)}.payment-item__payment-reference.sc-ir-payment-item{font-size:12px}@media (min-width: 640px){.payment-item__payment-item.sc-ir-payment-item{flex-direction:row;align-items:center;gap:1rem}.payment-item__payment-item.sc-ir-payment-item:hover{background:var(--wa-color-neutral-fill-quiet, #f1f2f3)}.payment-item__payment-item.sc-ir-payment-item .payment-item__payment-actions.sc-ir-payment-item{display:inline-flex}.payment-item__payment-body.sc-ir-payment-item .payment-item__payment-reference.sc-ir-payment-item,.payment-item__payment-body.sc-ir-payment-item .payment-item__payment-description.sc-ir-payment-item,.payment-item__payment-item.sc-ir-payment-item .payment-item__payment-amount.sc-ir-payment-item{display:inline-flex}.payment-item__payment-fields.sc-ir-payment-item .payment-item__payment-amount.sc-ir-payment-item,.payment-item__payment-toolbar.sc-ir-payment-item .payment-item__payment-description.sc-ir-payment-item,.payment-item__payment-item.sc-ir-payment-item .payment-item__payment-reference.sc-ir-payment-item,.payment-item__payment-actions.sc-ir-payment-item{display:none}.payment-item__payment-description.sc-ir-payment-item{padding:0 0.5rem !important}.payment-item__payment-body.sc-ir-payment-item .payment-item__payment-reference.sc-ir-payment-item{display:inline-flex;align-items:center}.payment-item__payment-body.sc-ir-payment-item{flex:1 1 0%;justify-content:flex-start}.payment-item__payment-fields.sc-ir-payment-item{justify-content:flex-start;gap:0.5rem}.payment-item__payment-toolbar.sc-ir-payment-item{gap:0.5rem;align-items:center}}";const Sf=Mf;const Yf=class{constructor(t){e(this,t);this.editPayment=a(this,"editPayment",7);this.deletePayment=a(this,"deletePayment",7);this.issueReceipt=a(this,"issueReceipt",7)}payment;editPayment;deletePayment;issueReceipt;_id=pe();render(){const e=this.payment.payment_type.operation==="CR";const i=(bf.includes(this.payment.payment_type?.code)?`${this.payment.payment_type?.description}: ${this.payment.payment_method.description}`:this.payment.payment_type.description)??this.payment.designation;return t("div",{key:"975efda06d42fafcaf2406f7b410d644f97ce119",class:"payment-item__payment-item"},t("div",{key:"4b9c0e754125693cacacd569618f388ea64b8059",class:"payment-item__payment-body",part:"payment-body"},t("div",{key:"fe0ed3312e70c62050b5a9c250e9717726d51dc3",class:"payment-item__payment-fields",part:"payment-fields"},t("p",{key:"1ca29b776e9fc30a96d5ba735c59a3059f6048ce",class:"payment-item__payment-date"},fe(this.payment.date,"YYYY-MM-DD").format("MMM DD, YYYY")),t("p",{key:"62d30c96b6f8d539e7deef2ebf0eb27330146b73",class:`payment-item__payment-amount ${e?"is-credit":"is-debit"}`},v(this.payment.currency.symbol,this.payment.amount)),t("p",{key:"c4bb5cd51a94dbdfb4129e4e91c8b5776049f289",class:"payment-item__payment-description"},i)),this.payment.reference&&t("p",{key:"80578ef745c4b1407cba21d6f76553c8a2c81c51",class:"payment-item__payment-reference"},this.payment?.reference)),t("div",{key:"23e794088d3a347624272aa091f7243ff2cdfff7",class:"payment-item__payment-toolbar"},t("p",{key:"3adb18a0ff89f727fe8f49ad1dada8653f9214e6",class:`payment-item__payment-amount ${e?"is-credit":"is-debit"}`},v(this.payment.currency.symbol,this.payment.amount)),t("p",{key:"a762aa292f963f8957e051cf77cfb3cd024d31ac",class:"payment-item__payment-description"},i),t("div",{key:"350fdfa2411d6cab8153344be2e63344c7f18d2c",class:"payment-item__payment-actions"},t("div",{key:"738ee81565063211a9ac1d9eb54e63904d0125ad",class:"d-flex align-items-center"},t("wa-tooltip",{key:"acd35b677ae91c8043a96f95784b5c1db815a51c",for:this._id},"User: ",this.payment.time_stamp.user),t("wa-icon",{key:"a813bcc8097be164f4626e4b7d137bb94a1d2646",name:"user",id:this._id}),t("wa-dropdown",{key:"efce17b008071913812681bec2e748655a64efaa","onwa-hide":e=>{e.stopImmediatePropagation();e.stopPropagation()},"onwa-select":e=>{switch(e.detail.item.value){case"edit":this.editPayment.emit(this.payment);break;case"delete":this.deletePayment.emit(this.payment);break;case"receipt":this.issueReceipt.emit(this.payment);break}}},t("ir-custom-button",{key:"cbcfc9c1cac56062c4570ccb99a3eb0763540298",slot:"trigger",appearance:"plain"},t("wa-icon",{key:"2ee2d4d69282fdfa079f9cd2a49cc6de9ca7414b",name:"ellipsis-vertical"})),this.payment.payment_type.code==="001"&&t("wa-dropdown-item",{key:"8a5c3f81212731965c85a2dd63f69a2cb7acc26f",value:"receipt"},t("wa-icon",{key:"bbac27273d3e85e13fad46a7671239ab3450c387",name:"receipt",slot:"icon"}),"Print Receipt"),t("wa-dropdown-item",{key:"fd10e9ab856a1fdefe9f9a4fe4ba9e2771411850",value:"edit"},t("wa-icon",{key:"8a872f06444f1c507ad1e9e46777978ffc5c8ccf",slot:"icon",name:"edit"}),"Edit"),t("wa-dropdown-item",{key:"1cf0120bbd7a897d002e09c656234537d656426d",value:"delete",variant:"danger"},t("wa-icon",{key:"4e45afca69a47b099896e115c48534c1ff08a5a2",slot:"icon",name:"trash"}),"Delete"))))),this.payment.reference&&t("p",{key:"e59c35660f503e1c455ccbac3019bed3d87b4d8c",class:"payment-item__payment-reference"},this.payment?.reference))}};Yf.style=Sf;const Ef=".sc-ir-payment-summary-h{display:block}.sc-ir-payment-summary-h{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important}.sc-ir-payment-summary-h *.sc-ir-payment-summary{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important}";const Tf=Ef;const If=class{constructor(t){e(this,t)}totalCost;balance;collected;currency;isBookingCancelled;shouldShowTotalCost(){return this.totalCost>0&&this.totalCost!==null}render(){return t("div",{key:"336c5af2578684dce7bd19992ad0b20782656512",class:" m-0"},this.shouldShowTotalCost()&&t("div",{key:"b9576c27e5a095873b8377ca18d23e641fe036fa",class:"mb-2 h4 total-cost-container"},g.entries.Lcz_TotalCost,":",t("span",{key:"f5e91ab25ec8ac4d4dc8af0cbde15cbd475237ba"},v(this.currency.symbol,this.totalCost))),t("div",{key:"2d6fdfa1b3fbb17e93a6b0a6f8eab6f4991da362",class:"h4 d-flex align-items-center justify-content-between"},t("span",{key:"b61aa6abb4a4a2fa9852bd785e0d71080895f040"},g.entries.Lcz_Balance,": "),t("span",{key:"35aa21ee877cc8b4257e3d24d64a093a4cc656a9",class:"danger font-weight-bold"},v(this.currency.symbol,this.balance))),!this.isBookingCancelled&&t("div",{key:"8a5924fd25080f9d9bb4dc1f805fe657f829ea4b",class:"mb-2 h4 d-flex align-items-center justify-content-between"},t("span",{key:"084a73d518478e173ef095a5dca13d2e4afb8f84"},g.entries.Lcz_Collected,": "),t("span",{key:"0ee497e5ac6d6960fbce6ee0ee206e20824f3532"},v(this.currency.symbol,this.collected))))}};If.style=Tf;const zf=".sc-ir-payments-folio-h{display:block}.payment-divider.sc-ir-payments-folio{margin:0;padding:0}";const Of=zf;const Af=class{constructor(t){e(this,t);this.addPayment=a(this,"addPayment",7);this.editPayment=a(this,"editPayment",7);this.deletePayment=a(this,"deletePayment",7);this.issueReceipt=a(this,"issueReceipt",7)}payments=[];addPayment;editPayment;deletePayment;issueReceipt;handleAddPayment=()=>{this.addPayment.emit()};handleEditPayment=e=>{this.editPayment.emit(e)};handleDeletePayment=e=>{this.deletePayment.emit(e)};handleIssueReceipt(e){this.issueReceipt.emit(e)}hasPayments(){return this.payments&&this.payments.length>0}renderPaymentItem(e,i){return[t("ir-payment-item",{key:e.id,payment:e,onDeletePayment:e=>{e.stopImmediatePropagation();e.stopPropagation();this.handleDeletePayment(e.detail)},onEditPayment:e=>{e.stopImmediatePropagation();e.stopPropagation();this.handleEditPayment(e.detail)},onIssueReceipt:e=>{e.stopImmediatePropagation();e.stopPropagation();this.handleIssueReceipt(e.detail)}}),i<this.payments.length-1&&t("wa-divider",{class:"payment-divider"})]}renderEmptyState(){return t("div",{class:"text-center p-1"},t("p",{class:"text-muted"},"No payments recorded yet"))}render(){return t("wa-card",{key:"968100c4f314511d37076708a46650b953d6324a",class:" payments-container"},t("div",{key:"65a065091c2a717e932899081d09949353612291",slot:"header",class:"d-flex align-items-center",style:{gap:"0.5rem"}},t("p",{key:"d54eaa605172b3ad4a86e6d44bcd76fdc5a102b6",class:"font-size-large p-0 m-0"},"Guest Folio"),t(Zr,{key:"7662222d0ba114385359004c744a6653201f8003",message:"Help",href:"https://help.igloorooms.com/extranet/booking-details/guest-folio"})),t("wa-tooltip",{key:"d7d343f70065336aae6ff62326d27775b05c7ae4",for:"create-payment"},"Add Payment"),t("ir-custom-button",{key:"1363db6eac820603c21788134baf025786818711",slot:"header-actions",id:"create-payment",size:"small",variant:"neutral",appearance:"plain",onClickHandler:this.handleAddPayment},t("wa-icon",{key:"d9c50aa2e4ae938a675f266144d71deb6e5f0638",name:"plus",style:{fontSize:"1rem"}})),this.hasPayments()?this.payments.map(((e,t)=>this.renderPaymentItem(e,t))):this.renderEmptyState())}};Af.style=Of;const Bf=".sc-ir-phone-input-h{display:block}.input-container.sc-ir-phone-input{display:flex;align-items:center;padding:0 !important}.input-container.sc-ir-phone-input:focus-within{border-color:#1e9ff2}.border-theme.sc-ir-phone-input{border-color:#cacfe7}.input-container.sc-ir-phone-input input.sc-ir-phone-input{flex:1;border:0}.input-container.sc-ir-phone-input input.sc-ir-phone-input:focus{outline:none}.dropdown-trigger.sc-ir-phone-input{display:flex;align-items:center;gap:8px;background:white;border:0;border-right:1px solid #cacfe7}.ir-dropdown-container.sc-ir-phone-input{position:absolute;z-index:1000;bottom:-30px;width:100%;left:0;background:white}.input-container.sc-ir-phone-input label.sc-ir-phone-input{display:flex;align-items:center;justify-content:center;margin:0;padding:0 5px}.flag.sc-ir-phone-input{height:1rem;aspect-ratio:4/3;border-radius:3px}.is-invalid.sc-ir-phone-input{border-color:#ff4961}.phone_prefix_label.sc-ir-phone-input{padding:0 0.5rem;margin:0}.sc-ir-phone-input-h{--ir-floating-label-fg:#6c757d;--ir-floating-label-fg-focus:#495057;--ir-floating-label-bg:#fff;--ir-floating-label-scale:0.88;--ir-floating-label-float-translateY:-70%;--ir-floating-label-resting-offset-inline:0.9rem;--ir-floating-phone-input-radius:0.21rem;--ir-floating-phone-input-height:2rem;--ir-danger:#dc3545;--ir-disabled-fg:#9aa0a6}.sc-ir-phone-input-h .input-container.has-floating.sc-ir-phone-input{position:relative;padding-top:0.9rem}.sc-ir-phone-input-h .floating-label.sc-ir-phone-input{position:absolute;top:50%;transform:translateY(-50%);pointer-events:none;position:absolute;padding:0 0.4rem;z-index:10;color:var(--ir-floating-label-fg);background:white;transition:transform 120ms ease, color 120ms ease, top 120ms ease, background-color 120ms ease, opacity 120ms ease;opacity:0.95;line-height:1;white-space:nowrap}.sc-ir-phone-input-h .floating-label.sc-ir-phone-input:dir(rtl){right:95px}.sc-ir-phone-input-h .floating-label.sc-ir-phone-input:dir(ltr){left:95px}.sc-ir-phone-input-h .floating-label.active.sc-ir-phone-input{top:0;transform:translateY(var(--ir-floating-label-float-translateY)) scale(var(--ir-floating-label-scale));background:var(--ir-floating-label-bg);color:var(--ir-floating-label-fg-focus);font-size:12px;padding:0;opacity:0.95}.phone-input__container.sc-ir-phone-input{display:flex;align-items:flex-end}.phone-input__prefix.sc-ir-phone-input{width:150px}.phone-input__prefix.sc-ir-phone-input::part(input),.phone-input__prefix.sc-ir-phone-input::part(end){display:none}.phone-input__prefix.sc-ir-phone-input:dir(ltr)::part(base),.phone-input__phone.sc-ir-phone-input:dir(rtl)::part(base){border-top-right-radius:0;border-bottom-right-radius:0}.phone-input__prefix.sc-ir-phone-input:dir(rtl)::part(base),.phone-input__phone.sc-ir-phone-input:dir(ltr)::part(base){border-top-left-radius:0;border-bottom-left-radius:0}.phone-input__phone.sc-ir-phone-input{flex:1 1 0%}.phone-input__prefix.sc-ir-phone-input::part(start){width:100% !important}.phone-input__prefix.sc-ir-phone-input .dropdown-trigger.sc-ir-phone-input{border-right:0;width:100% !important;display:flex;align-items:center;justify-content:space-between}";const Rf=Bf;const Pf=class{constructor(t){e(this,t);this.textChange=a(this,"textChange",7)}get el(){return o(this)}mode="default";label;value="";disabled=false;error=false;token;language;default_country=null;phone_prefix=null;placeholder;countries=[];testId;floatingLabel;textChange;inputValue="";isDropdownVisible=false;currentCountry;hasFocus=false;bookingService=new l;inputId=`ir-phone-input-${Math.random().toString(36).slice(2)}`;labelId=`ir-phone-input-label-${Math.random().toString(36).slice(2)}`;async componentWillLoad(){if(this.countries.length===0){const e=await this.bookingService.getCountries(this.language);this.countries=e}if(this.phone_prefix){this.setCountryFromPhonePrefix()}else{if(this.default_country){this.setCurrentCountry(this.default_country)}}this.inputValue=this.value}handleValueChange(e,t){if(e!==t){this.inputValue=e}}handlePhoneChange(e,t){if(e!==t){this.setCountryFromPhonePrefix()}}handleDocumentClick(e){const t=e.target;if(!this.el.contains(t)){this.isDropdownVisible=false}}handleInputChange(e){let t=e.target;let i=t.value;i=i.replace(/[^+\d]+/g,"");t.value=i;this.inputValue=i;this.textChange.emit({phone_prefix:this.currentCountry?.phone_prefix,mobile:this.inputValue})}setCountryFromPhonePrefix(){let e=this.countries.find((e=>e.phone_prefix===this.phone_prefix));if(!e){e=this.countries.find((e=>e.id.toString()===this.phone_prefix));if(!e){return}}this.currentCountry={...e};this.textChange.emit({phone_prefix:this.currentCountry?.phone_prefix,mobile:this.value})}setCurrentCountry(e){const t=this.countries.find((t=>t.id===e));if(!t){throw new Error("Invalid country id")}this.currentCountry={...t};this.textChange.emit({phone_prefix:this.currentCountry?.phone_prefix,mobile:this.value})}render(){const e=this.floatingLabel&&this.label;const a=!!this.label&&!e;const r=this.hasFocus||!!this.inputValue;if(this.mode==="modern"){return t(i,null,t("div",{class:"phone-input__container"},t("wa-input",{class:"phone-input__prefix",label:this.label,readonly:true},t("button",{slot:"start",type:"button",onClick:()=>this.isDropdownVisible=!this.isDropdownVisible,class:"dropdown-trigger"},this.currentCountry?t("img",{src:this.currentCountry?.flag,class:"flag"}):t("p",{class:"p-0 m-0 "},g.entries.Lcz_Select),this.currentCountry&&t("span",null,this.currentCountry.phone_prefix),t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},t("path",{d:"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"})))),t("wa-input",{onchange:e=>this.handleInputChange(e),max:14,value:this.inputValue,class:"phone-input__phone",placeholder:this.placeholder})),this.isDropdownVisible&&t("div",null,t("ir-combobox",{onComboboxValueChange:e=>{this.setCurrentCountry(+e.detail.data);this.isDropdownVisible=false},class:"bg-white",autoFocus:true,placeholder:"Search country",data:this.countries.map((e=>({id:e.id.toString(),name:`${e.name} (${e.phone_prefix})`,image:e.flag})))})))}return t(i,null,t("div",{class:"form-group mr-0"},t("div",{class:"input-group row m-0 p-0 position-relative"},a&&t("div",{class:`input-group-prepend col-3 p-0 text-dark border-none`},t("label",{class:`input-group-text border-theme flex-grow-1 text-dark`},this.label)),t("div",{class:"form-control  input-container  flex-fill"+(this.error?" is-invalid":"")},t("button",{type:"button",onClick:()=>this.isDropdownVisible=!this.isDropdownVisible,class:"dropdown-trigger"},this.currentCountry?t("img",{src:this.currentCountry?.flag,class:"flag"}):t("p",{class:"p-0 m-0 "},g.entries.Lcz_Select),t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},t("path",{d:"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"}))),t("p",{class:"phone_prefix_label"},this.currentCountry?.phone_prefix),e&&t("label",{id:this.labelId,class:`floating-label ${r?"active":""}`,htmlFor:this.inputId},this.label),t("input",{"data-testid":this.testId,maxLength:14,type:"text",placeholder:this.placeholder,required:true,value:this.inputValue,disabled:this.disabled,onInput:e=>this.handleInputChange(e),onFocus:()=>{this.hasFocus=true},onBlur:()=>{this.hasFocus=false}})),this.isDropdownVisible&&t("div",{class:"ir-dropdown-container"},t("ir-combobox",{onComboboxValueChange:e=>{this.setCurrentCountry(+e.detail.data);this.isDropdownVisible=false},class:"bg-white",autoFocus:true,placeholder:"Search country",data:this.countries.map((e=>({id:e.id.toString(),name:`${e.name} (${e.phone_prefix})`,image:e.flag})))})))))}static get watchers(){return{value:["handleValueChange"],phone_prefix:["handlePhoneChange"]}}};Pf.style=Rf;const Nf=":host{display:block;width:100%}.menu{display:flex;flex-direction:column;min-width:max-content;margin:0px;padding:0.5rem 0;border:var(--wa-border-style) var(--wa-border-width-s) var(--wa-color-surface-border);border-radius:var(--wa-border-radius-m);background-color:var(--wa-color-surface-raised);box-shadow:var(--wa-shadow-m);color:var(--wa-color-text-normal);text-align:start;user-select:none;overflow:auto;max-width:var(--auto-size-available-width) !important;max-height:var(--auto-size-available-height) !important}.results{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;max-height:min(60vh, 24rem);overflow-y:auto}.group{display:flex;flex-direction:column;gap:0.35rem}.group__label{font-size:0.75rem;text-transform:uppercase;letter-spacing:0.08em;color:var(--wa-color-text-muted);margin:0 0.25rem}.group__options{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:0.25rem}.option{display:flex;align-items:center;gap:0.75rem;padding:0.75rem;border-radius:var(--wa-border-radius-m);cursor:pointer;transition:background-color 120ms ease, box-shadow 120ms ease}.option__leading{color:var(--wa-color-text-muted);display:flex;align-items:center;justify-content:center;font-size:1rem}.option__leading wa-icon{font-size:1.15rem}.option__content{display:flex;flex-direction:column;gap:0.15rem;flex:1}.option__label{font-weight:600}.option__description{font-size:0.85rem;color:var(--wa-color-text-muted)}.option__suffix{margin-inline-start:auto;display:flex;align-items:center;gap:0.5rem}.option__meta{padding:0.15rem 0.45rem;border-radius:var(--wa-border-radius-pill, 999px);background-color:var(--wa-color-surface, rgba(255, 255, 255, 0.08));font-size:0.75rem;color:var(--wa-color-text-normal)}.option__shortcut{display:flex;gap:0.25rem}.option__shortcut kbd{border-radius:var(--wa-border-radius-s);border:1px solid var(--wa-color-surface-border);padding:0.15rem 0.35rem;font-size:0.75rem;font-family:inherit;background-color:var(--wa-color-surface, rgba(255, 255, 255, 0.04))}.option--active{background-color:var(--wa-color-surface-hover, rgba(255, 255, 255, 0.06));box-shadow:inset 0 0 0 1px var(--wa-color-surface-border)}.empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:0.35rem;padding:2rem 1rem;text-align:center;color:var(--wa-color-text-muted)}.empty-state wa-icon{font-size:1.25rem}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0}";const Lf=Nf;const $f=class{constructor(t){e(this,t);this.comboboxSelect=a(this,"combobox-select",7)}value="";loading=false;mode="default";pill=false;placeholder="";label;defaultValue;size;appearance;static idCounter=0;componentId=++$f.idCounter;listboxId=`ir-combobox-listbox-${this.componentId}`;listboxLabelId=`ir-combobox-label-${this.componentId}`;emptyStateId=`ir-combobox-empty-${this.componentId}`;inputRef;nativeInput;slotRef;get hostEl(){return o(this)}isOpen=false;query="";activeIndex=-1;filteredItems=[];liveRegionMessage="";slottedPickerItems=[];comboboxSelect;componentWillLoad(){const e=Array.from(this.hostEl?.querySelectorAll("ir-picker-item")??[]);if(e.length){this.processPickerItems(e)}else{this.updateLiveRegion(0)}}componentDidRender(){if(this.inputRef){this.nativeInput=this.inputRef.input}this.applyAriaAttributes()}async open(){if(this.isOpen){this.focusInput();return}this.isOpen=true;requestAnimationFrame((()=>this.focusInput()));if(this.filteredItems.length){const e=this.filteredItems.findIndex((e=>e.value===this.value));if(e>=0){const t=this.findNearestEnabledIndex(e+1,1);if(t>=0){this.activeIndex=t}else{this.focusEdgeItem("start")}}else if(this.activeIndex===-1){this.focusEdgeItem("start")}}this.scrollSelectedIntoView()}async close(){this.isOpen=false}handleKeyDown(e){this.handleInputKeydown(e)}handleDocumentClick(e){if(!this.isOpen)return;const t=e.composedPath?e.composedPath():[];if(t.length&&t.includes(this.hostEl)||this.hostEl.contains(e.target))return;this.closeCombobox()}handleDocumentFocus(e){if(!this.isOpen)return;if(this.hostEl.contains(e.target))return;this.closeCombobox()}handleActiveIndexChange(){this.updateActiveItemIndicators();this.applyAriaAttributes();this.scrollActiveOptionIntoView()}handleValueChange(e){this.updateSelectedFromValue(e);this.syncQueryWithValue(e);if(this.mode==="select"){this.applyFilter("",{updateQuery:false})}}closeCombobox(e={}){this.isOpen=false;if(e.restoreFocus){this.focusInput()}}handleInput=e=>{const t=e.target;this.applyFilter(t?.value??"");this.open()};handleInputFocus=()=>{if(!this.isOpen){this.open()}};handleInputKeydown=e=>{switch(e.key){case"ArrowDown":e.preventDefault();this.open();this.moveActiveIndex(1);break;case"ArrowUp":e.preventDefault();this.open();this.moveActiveIndex(-1);break;case"Enter":if(!this.isOpen)return;e.preventDefault();this.selectActiveItem();break;case"Escape":if(!this.isOpen)return;e.preventDefault();this.closeCombobox({restoreFocus:true});break;case"Home":if(!this.isOpen)return;e.preventDefault();this.focusEdgeItem("start");break;case"End":if(!this.isOpen)return;e.preventDefault();this.focusEdgeItem("end");break;case"Tab":this.closeCombobox();break}};applyFilter(e,t={}){const{updateQuery:i=true}=t;if(i){this.query=e}const a=e.trim().toLowerCase();const r=this.slottedPickerItems;const o=a?r.filter((e=>this.matchesQuery(e,a))):[...r];const n=this.activeIndex>=0?this.filteredItems[this.activeIndex]:undefined;this.filteredItems=o;this.updateItemVisibility(o);let s=n?o.indexOf(n):-1;if(o.length===0){this.activeIndex=-1}else{if(s===-1){s=this.findNearestEnabledIndex(0,1)}this.activeIndex=s}this.updateActiveItemIndicators();const l=a?`"${e.trim()}"`:undefined;this.updateLiveRegion(o.length,l)}syncQueryWithValue(e){if(this.mode!=="select"){return}if(!e){this.query="";return}const t=this.slottedPickerItems.find((t=>t.value===e));if(t){this.query=this.getItemDisplayLabel(t)}}selectActiveItem(){if(this.activeIndex<0)return;const e=this.filteredItems[this.activeIndex];if(!e||e.disabled)return;this.handleSelection(e)}handleSelection(e){const t={value:e.value,label:this.getItemDisplayLabel(e),disabled:e.disabled};this.value=e.value;this.updateSelectedFromValue();this.comboboxSelect.emit({item:t});this.closeCombobox({restoreFocus:true});if(this.mode==="select"){this.query=this.getItemDisplayLabel(e);this.applyFilter("",{updateQuery:false})}else{this.applyFilter("")}this.activeIndex=-1}focusInput(){this.inputRef?.focus();this.nativeInput?.focus()}applyAriaAttributes(){if(!this.nativeInput)return;this.nativeInput.setAttribute("role","combobox");this.nativeInput.setAttribute("aria-autocomplete","list");this.nativeInput.setAttribute("aria-expanded",String(this.isOpen));this.nativeInput.setAttribute("aria-controls",this.listboxId);if(this.activeIndex>=0){const e=this.filteredItems[this.activeIndex];if(e?.id){this.nativeInput.setAttribute("aria-activedescendant",e.id)}}else{this.nativeInput.removeAttribute("aria-activedescendant")}}scrollActiveOptionIntoView(){if(this.activeIndex<0)return;const e=this.filteredItems[this.activeIndex];if(!e)return;this.runAfterNextFrame((()=>{e.scrollIntoView({block:"center"})}))}scrollSelectedIntoView(){if(!this.isOpen||!this.value){return}const e=this.filteredItems.find((e=>e.value===this.value))??this.slottedPickerItems.find((e=>e.value===this.value));if(!e){return}this.runAfterNextFrame((()=>{e.scrollIntoView({block:"center"})}))}capturePickerItemsFromSlot(e=this.slotRef){if(!e){return}const t=e.assignedElements({flatten:true});const i=t.filter((e=>e.tagName==="IR-PICKER-ITEM"));this.processPickerItems(i)}processPickerItems(e){this.slottedPickerItems=[...e];this.ensureItemIds();this.applyFilter(this.query);this.updateSelectedFromValue(this.value);this.syncQueryWithValue(this.value);if(this.mode==="select"&&this.value){this.applyFilter("",{updateQuery:false})}}ensureItemIds(){this.slottedPickerItems.forEach(((e,t)=>{if(!e.id){e.id=`${this.listboxId}-option-${t}`}}))}getItemDisplayLabel(e){return e.label||e.textContent?.trim()||""}matchesQuery(e,t){const i=`${e.label??""} ${e.value??""}`.toLowerCase();return i.includes(t)}updateItemVisibility(e){const t=new Set(e);this.slottedPickerItems.forEach((e=>{const i=t.has(e);e.hidden=!i;if(i){e.removeAttribute("aria-hidden")}else{e.setAttribute("aria-hidden","true")}e.active=false}))}updateSelectedFromValue(e=this.value){if(!this.slottedPickerItems.length){return}this.slottedPickerItems.forEach((t=>{t.selected=Boolean(e)&&t.value===e}))}updateActiveItemIndicators(){this.slottedPickerItems.forEach((e=>e.active=false));if(this.activeIndex<0){return}const e=this.filteredItems[this.activeIndex];if(e){e.active=true}}findNearestEnabledIndex(e,t){const i=this.filteredItems;const a=i.length;if(!a){return-1}let r=(e%a+a)%a;let o=0;while(o<a){const e=i[r];if(e&&!e.disabled){return r}r=((r+t)%a+a)%a;o+=1}return-1}focusEdgeItem(e){if(!this.filteredItems.length){this.activeIndex=-1;return}const t=e==="start"?1:-1;const i=e==="start"?0:this.filteredItems.length-1;this.activeIndex=this.findNearestEnabledIndex(i,t)}moveActiveIndex(e){const t=this.filteredItems.length>0;if(!t){this.activeIndex=-1;return}if(this.activeIndex===-1){this.focusEdgeItem(e===1?"start":"end");return}this.activeIndex=this.findNearestEnabledIndex(this.activeIndex+e,e)}findPickerItemFromEvent(e){const t=typeof e.composedPath==="function"?e.composedPath():[];for(const e of t){if(e&&e.tagName==="IR-PICKER-ITEM"){return e}}return undefined}handleResultsClick=e=>{const t=this.findPickerItemFromEvent(e);if(!t||t.disabled){return}e.preventDefault();this.handleSelection(t)};handleResultsPointerDown=e=>{const t=this.findPickerItemFromEvent(e);if(!t){return}e.preventDefault()};handleSlotChange=e=>{const t=e.target;this.slotRef=t;this.capturePickerItemsFromSlot(t)};render(){const e=this.filteredItems.length>0;const a=e?undefined:this.emptyStateId;return t(i,{key:"9053fbe8e7fc13e7a8c309caf706cf225e9ef0c1"},t("wa-popup",{key:"5a2aaef12589265593744f78e16b8bba857cfe8e",flip:true,shift:true,sync:"width","auto-size":"vertical","auto-size-padding":10,active:this.isOpen},t("wa-input",{key:"277aa2b64d676bae6e331e8eda2eb469fec600bb",slot:"anchor",class:"search-bar",size:this.size,value:this.query,ref:e=>this.inputRef=e,appearance:this.appearance,label:this.label,pill:this.pill,autocomplete:"off",placeholder:this.placeholder||"Search",oninput:this.handleInput,onfocus:this.handleInputFocus,"onwa-clear":()=>{this.applyFilter("");this.open()}},this.loading&&t("wa-spinner",{key:"b872b831af31210909afbd8b267381b6ded77d7b",slot:"end"}),t("wa-icon",{key:"1d0088b32db6e72e5b3a95bfccb1b2a3072dec57",slot:"start",name:"magnifying-glass","aria-hidden":"true"})),!this.loading&&t("div",{key:"550f9ee5dd32b0bda004877fba48bef03e305b4c",class:"menu",role:"presentation"},t("p",{key:"dd9be93053853fee7e28927c5782e2caf8693c00",class:"sr-only",id:this.listboxLabelId},"Available search shortcuts"),t("ul",{key:"1f20e4da089f4e3849bdd888b5d9283d3e6ecf43",class:"results",id:this.listboxId,role:"listbox","aria-labelledby":this.listboxLabelId,"aria-describedby":a,onClick:this.handleResultsClick,onPointerDown:this.handleResultsPointerDown},t("slot",{key:"b027f492fcc7198e88b47d41bea566424428a051",onSlotchange:this.handleSlotChange}),!e&&t("li",{key:"5c7b8034cf9db480b26a05980ac17b662f8a1947",class:"empty-state",role:"presentation",id:this.emptyStateId},t("wa-icon",{key:"d20437dd5c5fba96214a347c1efd39ab0f5d01c7",name:"circle-info","aria-hidden":"true"}),t("p",{key:"58409fb65e7de8551e5b5487c3861c73d8568341"},"No results found"))))),t("span",{key:"3f1cd7d7db661626b58dabec6103ea7669abe3e6",class:"sr-only","aria-live":"polite"},this.liveRegionMessage))}updateLiveRegion(e,t){if(!e){this.liveRegionMessage=t?`No results for ${t}`:"No results available";return}const i=e===1?"result":"results";this.liveRegionMessage=t?`${e} ${i} for ${t}`:`${e} ${i} available`}runAfterNextFrame(e){if(typeof requestAnimationFrame==="function"){requestAnimationFrame((()=>e()));return}setTimeout(e,0)}static get watchers(){return{activeIndex:["handleActiveIndexChange"],value:["handleValueChange"]}}};$f.style=Lf;const Ff=":host{box-sizing:border-box !important}:host *,:host *::before,:host *::after{box-sizing:inherit !important;padding:0;margin:0}[hidden]{display:none !important}:host{box-sizing:border-box;display:block}:host([hidden]){display:none !important}.picker-item__container{all:unset;box-sizing:border-box;width:100%;color:var(--wa-color-text-normal);user-select:none;position:relative;display:flex;align-items:center;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;font-size:inherit;font-family:inherit;font-optical-sizing:inherit;font-size-adjust:inherit;font-kerning:inherit;font-feature-settings:inherit;font-variation-settings:inherit;padding:0;padding:0.5em 1em 0.5em 0.25em !important;line-height:var(--wa-line-height-condensed);transition:fill var(--wa-transition-normal) var(--wa-transition-easing);cursor:pointer;gap:0.5rem;scroll-margin:0.25rem}.picker-item__content{display:flex;align-items:center;gap:0.5rem}.picker-item__container:hover{background-color:var(--wa-color-neutral-fill-normal);color:var(--wa-color-neutral-on-normal)}.picker-item__check{opacity:0}:host([active]) .picker-item__container{background-color:var(--wa-color-brand-fill-loud);color:var(--wa-color-brand-on-loud);opacity:1}:host([selected]) .picker-item__container{font-weight:600}:host([selected]) .picker-item__check{opacity:1}:host([aria-disabled='true']) .picker-item__container,.picker-item__container:disabled{cursor:not-allowed;opacity:0.5}";const Hf=Ff;const Uf=class{constructor(t){e(this,t)}value;label;disabled=false;active=false;selected=false;render(){return t(i,{key:"33e85516cbe48b88fb86e08bbc5e956dd1758926",role:"option","aria-selected":this.selected?"true":"false","aria-disabled":this.disabled?"true":"false"},t("button",{key:"910ef0fbbcaf30c4f8b9496ccf6551cd5806dd67",class:`picker-item__container`,type:"button",tabindex:"-1",disabled:this.disabled,part:"base"},t("wa-icon",{key:"ec1518e00da501d327b5bffc8e804da0a3968b21",class:"picker-item__check",name:"check"}),t("div",{key:"82ed26f039fb861ce7f4f858566de36a7d0c53fd",class:"picker-item__content",part:"content"},t("slot",{key:"496486e8e38f94ffca9c14fb91d3aa6b93659028"}))))}};Uf.style=Hf;const jf="";const Vf=jf;const Gf=class{constructor(t){e(this,t);this.closeModal=a(this,"closeModal",7)}defaultPickupData;numberOfPersons=0;bookingNumber;bookingDates;open;isLoading=false;canSubmitPickup=false;closeModal;_id=`pickup-form-${pe()}`;render(){return t("ir-drawer",{key:"51a7aa6c1094d06479183d031eb17be9ba7a4622",style:{"--ir-drawer-width":"40rem","--ir-drawer-background-color":"var(--wa-color-surface-default)","--ir-drawer-padding-left":"var(--spacing)","--ir-drawer-padding-right":"var(--spacing)","--ir-drawer-padding-top":"var(--spacing)","--ir-drawer-padding-bottom":"var(--spacing)"},label:g.entries.Lcz_Pickup,open:this.open,onDrawerHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.closeModal.emit()}},this.open&&t("ir-pickup-form",{key:"1455268c7697c5941544b3dafc1890c4af1aca2b",onCanSubmitPickupChange:e=>{e.stopImmediatePropagation();e.stopPropagation();this.canSubmitPickup=e.detail},defaultPickupData:this.defaultPickupData,numberOfPersons:this.numberOfPersons,bookingNumber:this.bookingNumber,bookingDates:this.bookingDates,onLoadingChange:e=>this.isLoading=e.detail,onCloseModal:e=>{e.stopImmediatePropagation();e.stopPropagation();this.closeModal.emit()},formId:this._id}),t("div",{key:"b87e00eeee84a5ff4f73f2c648c4b82dcd2fff5c",slot:"footer",class:"ir__drawer-footer"},t("ir-custom-button",{key:"b18eb516d752c94a3c3b4ba1da48c6f2148996c5",class:`flex-fill`,size:"medium",appearance:"filled",variant:"neutral","data-drawer":"close"},g.entries.Lcz_Cancel),this.canSubmitPickup&&t("ir-custom-button",{key:"4c1a385f028f1b119e8feb53cb0b6ac31f7c896c",type:"submit",loading:this.isLoading,form:this._id,size:"medium",class:`flex-fill`,variant:"brand"},g.entries.Lcz_Save)))}};Gf.style=Vf;class qf{async savePickup(e,t,i){try{if(!e.currency||!e.selected_option){throw new Error("Cannot save pickup without a selected option and currency.")}const a=e.arrival_time.split(":");await ye.post(`/Do_Pickup`,{booking_nbr:t,is_remove:i,currency:e.currency,date:e.arrival_date,details:e.flight_details,hour:a[0],minute:a[1],nbr_of_units:e.number_of_vehicles,selected_option:e.selected_option,total:+e.due_upon_booking})}catch(e){console.log(e)}}transformDefaultPickupData(e){const t=e.hour&&e.minute?se(e.hour)+":"+se(e.minute):"";return{arrival_date:e.date,arrival_time:t,currency:e.currency,due_upon_booking:e.total.toFixed(2),flight_details:e.details,location:e.selected_option.location.id,number_of_vehicles:e.nbr_of_units,selected_option:e.selected_option,vehicle_type_code:e.selected_option.vehicle.code}}getAvailableLocations(e){let t=[];y.pickup_service.allowed_options.forEach((i=>{if(t.filter((e=>e.value===i.location.id)).length===0){t.push({text:e+" "+i.location.description,value:i.location.id})}}));return t}createPickupSchema(e,t,i){const a=Boolean(i?.allowRemoval);const r=e=>{if(typeof e==="number"){return e}if(typeof e==="string"&&e.trim()!==""){const t=Number(e);return Number.isNaN(t)?e:t}return e};const o=z.string().min(1,{message:"Arrival date is required."}).regex(/^\d{4}-\d{2}-\d{2}$/,{message:"Invalid date format, expected YYYY-MM-DD."});return z.object({location:z.preprocess(r,z.number().int()).refine((e=>a?e===-1||e>0:e>0),{message:"Please select a pickup option."}),arrival_date:z.preprocess((e=>typeof e==="string"?e:e??""),o).refine((i=>{const a=fe(i,"YYYY-MM-DD",true);const r=fe(e,"YYYY-MM-DD",true);const o=fe(t,"YYYY-MM-DD",true);return a.isValid()&&r.isValid()&&o.isValid()&&a.isBetween(r,o,undefined,"[]")}),{message:`Arrival date must be between ${e} and ${t}.`}),arrival_time:z.string().regex(/^\d{2}:\d{2}$/,{message:"Invalid time format. Expected HH:MM"}).refine((e=>{const[t,i]=e.split(":").map(Number);return t>=0&&t<=23&&i>=0&&i<=59}),{message:"Time values are out of range"}),flight_details:z.preprocess((e=>typeof e==="string"?e:""),z.string().nonempty({message:"Flight details cannot be empty."})),vehicle_type_code:z.preprocess((e=>typeof e==="string"?e:""),z.string().nonempty({message:"Vehicle type code cannot be empty."})),number_of_vehicles:z.preprocess(r,z.number().int().min(1,{message:"At least one vehicle is required."}))})}validateForm(e,t){return t.safeParse(e)}getNumberOfVehicles(e,t){let i=Math.ceil(t/e);let a=i>1?i:1;let r=i>1?2:3;return Array.from({length:i+r},((e,t)=>a+t))}getPickUpPersonStatus(e){const t=y.pickup_service.allowed_pricing_models.find((t=>t.code===e));if(!t){return null}return t.description}updateDue(e){const t=this.getPickUpPersonStatus(e.code);if(!t){return}if(t==="Person"){return e.amount*e.numberOfPersons}else{return e.amount*e.number_of_vehicles}}}const Kf=".sc-ir-pickup-form-h{display:block}.custom-card-container.sc-ir-pickup-form{display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #e4e5ec}.card-title.sc-ir-pickup-form{flex:1}.border-theme.sc-ir-pickup-form{border:1px solid #cacfe7}.pickup__container.sc-ir-pickup-form{display:flex;flex-direction:column;gap:1rem}@media (min-width: 768px){.price-input-container.sc-ir-pickup-form{max-width:290px}}";const Wf=Kf;const Xf=class{constructor(t){e(this,t);this.closeModal=a(this,"closeModal",7);this.canSubmitPickupChange=a(this,"canSubmitPickupChange",7);this.loadingChange=a(this,"loadingChange",7);this.resetBookingEvt=a(this,"resetBookingEvt",7)}get el(){return o(this)}formId;defaultPickupData;numberOfPersons=0;bookingNumber;bookingDates;isLoading=false;allowedOptionsByLocation=[];pickupData={location:-1,flight_details:"",due_upon_booking:"",number_of_vehicles:1,vehicle_type_code:"",currency:undefined,arrival_time:"",arrival_date:null,selected_option:undefined};vehicleCapacity=[];autoValidate=false;closeModal;canSubmitPickupChange;loadingChange;resetBookingEvt;pickupService=new qf;pickupSchema;get shouldRenderDetails(){return this.pickupData.location>0}get isRemovalRequest(){return Boolean(this.defaultPickupData&&this.pickupData.location===-1)}get canSubmitPickup(){return this.defaultPickupData!==null||this.shouldRenderDetails}lastCanSubmit=false;handleSubmitPickupChange(){const e=this.canSubmitPickup;if(e!==this.lastCanSubmit){this.lastCanSubmit=e;this.canSubmitPickupChange.emit(e)}}componentWillLoad(){if(this.defaultPickupData){const e=this.pickupService.transformDefaultPickupData(this.defaultPickupData);this.vehicleCapacity=this.pickupService.getNumberOfVehicles(e.selected_option.vehicle.capacity,this.numberOfPersons);this.allowedOptionsByLocation=y.pickup_service.allowed_options.filter((t=>t.location.id===e.location));this.pickupData={...e}}this.pickupSchema=this.pickupService.createPickupSchema(this.bookingDates.from,this.bookingDates.to,{allowRemoval:this.defaultPickupData!==null});this.lastCanSubmit=this.canSubmitPickup;this.canSubmitPickupChange.emit(this.lastCanSubmit)}handleLocationChange(e){if(e===""){this.allowedOptionsByLocation=[];this.vehicleCapacity=[];this.updatePickupData("location",-1);return}const t=Number(e);this.allowedOptionsByLocation=y.pickup_service.allowed_options.filter((e=>e.location.id===t));const i=this.allowedOptionsByLocation[0];if(!i){this.vehicleCapacity=[];this.pickupData={...this.pickupData,location:t,selected_option:undefined,vehicle_type_code:"",number_of_vehicles:1,due_upon_booking:"",currency:undefined};return}this.vehicleCapacity=this.pickupService.getNumberOfVehicles(i.vehicle.capacity,this.numberOfPersons);const a=this.computeDueAmount(i,this.vehicleCapacity[0]);this.pickupData={...this.pickupData,location:t,selected_option:i,number_of_vehicles:this.vehicleCapacity[0],due_upon_booking:a,vehicle_type_code:i.vehicle.code,currency:i.currency}}handleVehicleQuantityChange(e){if(!e||Number.isNaN(e)||!this.pickupData.selected_option){return}const t=this.computeDueAmount(this.pickupData.selected_option,e);this.pickupData={...this.pickupData,number_of_vehicles:e,due_upon_booking:t}}handleVehicleTypeChange(e){if(!e||this.pickupData.location<=0){return}const t=y.pickup_service.allowed_options.find((t=>t.location.id===this.pickupData.location&&t.vehicle.code===e));if(!t){return}this.vehicleCapacity=this.pickupService.getNumberOfVehicles(t.vehicle.capacity,this.numberOfPersons);const i=this.computeDueAmount(t,this.vehicleCapacity[0]);this.pickupData={...this.pickupData,selected_option:t,number_of_vehicles:this.vehicleCapacity[0],due_upon_booking:i,vehicle_type_code:t.vehicle.code,currency:t.currency}}computeDueAmount(e,t){const i=this.pickupService.updateDue({amount:e.amount,code:e.pricing_model.code,numberOfPersons:this.numberOfPersons,number_of_vehicles:t});return(i??0).toFixed(2)}updatePickupData(e,t){this.pickupData={...this.pickupData,[e]:t}}async savePickup(){if(!this.canSubmitPickup){return}try{this.isLoading=true;this.loadingChange.emit(this.isLoading);const e=this.isRemovalRequest;if(!e){this.autoValidate=true;const e=this.pickupService.validateForm(this.pickupData,this.pickupSchema);if(!e.success){return}}await this.pickupService.savePickup(this.pickupData,this.bookingNumber,e);this.resetBookingEvt.emit(null);this.closeModal.emit(null)}catch(e){console.error(e)}finally{this.isLoading=false;this.loadingChange.emit(this.isLoading)}}render(){return t("form",{key:"f760922db42ab5e054bc4366e8da721637642e71",id:this.formId,class:"pickup__container",onSubmit:async e=>{e.preventDefault();await this.savePickup()}},t("ir-validator",{key:"e792694af0312abce46771f8a06b877dc953cd91",schema:this.pickupSchema.shape.location,autovalidate:this.autoValidate,value:this.pickupData.location,valueEvent:"change wa-change select-change",blurEvent:"wa-hide blur"},t("wa-select",{key:"fabc22a1f5813fd7920d3d0baa7f6dd6225ee27b",size:"small",onchange:e=>this.handleLocationChange(e.target.value),defaultValue:this.pickupData.location===-1?"":this.pickupData.location?.toString(),value:this.pickupData.location===-1?"":this.pickupData.location?.toString()},t("wa-option",{key:"b4d35a4d46a34735486fb37b7af0584cefcdfa7e",value:""},g.entries.Lcz_Pickup_NoThankYou),this.pickupService.getAvailableLocations(g.entries.Lcz_Pickup_YesFrom).map((e=>t("wa-option",{key:`pickup-location-${e.value}`,value:e.value?.toString()},e.text))))),this.shouldRenderDetails&&t("div",{key:"d888d3f8304117be3ad1a2de7841273e00a83e7a",class:"pickup__container","data-testid":"pickup_body"},t("ir-validator",{key:"68b1ad0fd2056b3cf7da44edb1f5ac2d0a5248ea",schema:this.pickupSchema.shape.arrival_date,autovalidate:this.autoValidate,value:this.pickupData.arrival_date??"",valueEvent:"dateChanged",blurEvent:"datePickerBlur blur"},t("ir-custom-date-picker",{key:"1acfff57ebbe5b884045ab5a6ad37c12e9ad3144",date:this.pickupData.arrival_date,minDate:this.bookingDates.from,maxDate:this.bookingDates?.to,emitEmptyDate:true,onDateChanged:e=>{this.updatePickupData("arrival_date",e.detail.start?.format("YYYY-MM-DD")??null)},label:g.entries.Lcz_ArrivalDate})),t("ir-validator",{key:"1a8b79606897d04484d36e5c78d83587bc641b73",schema:this.pickupSchema.shape.arrival_time,autovalidate:this.autoValidate,value:this.pickupData.arrival_time,valueEvent:"text-change input input-change",blurEvent:"input-blur blur"},t("ir-custom-input",{key:"b060605d151d68b9c81a76ed3312b0188e5c1e91",value:this.pickupData.arrival_time,"onText-change":e=>{this.updatePickupData("arrival_time",e.detail)},mask:"time",label:g.entries.Lcz_Time})),t("ir-validator",{key:"d6a2ac933bec29723acd5e9518629ace98289758",schema:this.pickupSchema.shape.flight_details,autovalidate:this.autoValidate,value:this.pickupData.flight_details,valueEvent:"text-change input input-change",blurEvent:"input-blur blur"},t("ir-custom-input",{key:"6ef5f4aa8f63bbdf6b225812ae5d43e7b178dd1f","onText-change":e=>this.updatePickupData("flight_details",e.detail),value:this.pickupData.flight_details,label:g.entries.Lcz_FlightDetails})),t("ir-validator",{key:"770577df3c65ef80b08dddcdf1012f9aba8e7521",schema:this.pickupSchema.shape.vehicle_type_code,autovalidate:this.autoValidate,value:this.pickupData.vehicle_type_code,valueEvent:"change wa-change select-change",blurEvent:"wa-hide blur"},t("wa-select",{key:"5486e6d400cca6091a9722225a0766a4a759b3a5",size:"small",onchange:e=>this.handleVehicleTypeChange(e.target.value),value:this.pickupData.vehicle_type_code,defaultValue:this.pickupData.vehicle_type_code},this.allowedOptionsByLocation.map((e=>t("wa-option",{value:e.vehicle.code,key:e.vehicle.code},e.vehicle.description))))),t("ir-validator",{key:"bc60b50d6cb981a6b5195efba5920ebb77e4c911",schema:this.pickupSchema.shape.number_of_vehicles,autovalidate:this.autoValidate,value:this.pickupData.number_of_vehicles,valueEvent:"change wa-change select-change",blurEvent:"wa-hide blur"},t("wa-select",{key:"75ad8186913a104acad814176a1da7511ea73c9c",size:"small",defaultValue:this.pickupData.number_of_vehicles?.toString(),value:this.pickupData.number_of_vehicles?.toString(),label:g.entries.Lcz_NbrOfVehicles,onchange:e=>{this.handleVehicleQuantityChange(Number(e.target.value))}},this.vehicleCapacity.map((e=>t("wa-option",{key:`capacity_${e}`,value:e.toString()},e))))),t("ir-custom-input",{key:"06aa8886b9afb6477686ede7c8d7930c005f060a",mask:"price",readonly:true,label:`${g.entries.Lcz_DueUponBooking}`,value:this.pickupData.due_upon_booking},t("span",{key:"89d7bf6203363a7883cb88c93022987ee594559a",slot:"start"},this.pickupData.currency?.symbol))))}static get watchers(){return{defaultPickupData:["handleSubmitPickupChange"],pickupData:["handleSubmitPickupChange"]}}};Xf.style=Wf;const Jf=".sc-ir-pickup-view-h{display:block}.pickup-info.sc-ir-pickup-view{display:flex;flex-direction:column;gap:0.75rem}.pickup-info__summary.sc-ir-pickup-view{display:flex;flex-wrap:wrap;gap:0.5rem;justify-content:space-between;align-items:center;color:#1f2a37}.pickup-info__datetime.sc-ir-pickup-view{font-weight:600;margin:0}.pickup-info__due.sc-ir-pickup-view{margin:0;color:#1f2a37}.pickup-info__details.sc-ir-pickup-view{display:flex;flex-direction:column;gap:0.3rem;color:#1f2a37}.pickup-info__line.sc-ir-pickup-view{margin:0;display:flex;flex-wrap:wrap;gap:0.25rem}.pickup-info__label.sc-ir-pickup-view{font-weight:600}.pickup-info__divider.sc-ir-pickup-view{opacity:0.4}.pickup-info__note.sc-ir-pickup-view{margin:0;color:#6b7280;font-size:0.875rem}@media (max-width: 600px){.pickup-info__summary.sc-ir-pickup-view{flex-direction:column;align-items:flex-start}}";const Qf=Jf;const Zf=class{constructor(t){e(this,t)}booking;render(){if(!y.pickup_service.is_enabled||!this.booking.is_editable){return null}return t(i,null,t("wa-card",null,t("p",{slot:"header",class:"font-size-large p-0 m-0 "},g.entries.Lcz_Pickup),t("wa-tooltip",{for:"pickup"},this.booking.pickup_info?"Edit":"Add"," pickup"),t("ir-custom-button",{slot:"header-actions",id:"pickup",size:"small",appearance:"plain",variant:"neutral"},t("wa-icon",{name:"edit",style:{fontSize:"1rem"}})),this.booking.pickup_info?t("div",{class:"pickup-info"},t("div",{class:"pickup-info__summary"},t("div",null,t("p",{class:"pickup-info__datetime"},fe(this.booking.pickup_info.date,"YYYY-MM-DD").format("MMM DD, YYYY"),this.booking.pickup_info.hour&&this.booking.pickup_info.minute&&t("span",null,"  ",Me(this.booking.pickup_info.hour.toString(),this.booking.pickup_info.minute.toString())))),t("p",{class:"pickup-info__due"},t("strong",null,this.booking.pickup_info.currency.symbol,this.booking.pickup_info.total))),t("div",{class:"pickup-info__details"},t("ir-label",{display:"inline",labelText:`${g.entries.Lcz_FlightDetails}:`,content:this.booking.pickup_info.details}),t("p",{class:"pickup-info__line"},t("span",{class:"pickup-info__label"},"Vehicle:"),t("span",null,this.booking.pickup_info.selected_option.vehicle.description)),t("p",{class:"pickup-info__line"},t("span",{class:"pickup-info__label"},g.entries.Lcz_NbrOfVehicles,":"),t("strong",null,this.booking.pickup_info.nbr_of_units))),t("p",{class:"pickup-info__note"},y.pickup_service.pickup_instruction.description,y.pickup_service.pickup_cancelation_prepayment.description)):t("div",{class:"text-center p-1"},t("p",{class:"text-muted"},"No pickup recorded yet"))))}};Zf.style=Qf;const eb=".sc-ir-pms-logs-h{display:block}.dialog-container-height.sc-ir-pms-logs{height:4rem}.list-title.sc-ir-pms-logs{margin:0;padding:0;font-weight:600;white-space:nowrap;display:inline}.list-item.sc-ir-pms-logs{margin:0;padding:0;font-size:14px;margin-left:5px;width:fit-content}.list-item.green.sc-ir-pms-logs{color:#629a4c;font-weight:600}.list-item.red.sc-ir-pms-logs{color:#ff4961;font-weight:600}";const tb=eb;const ib=class{constructor(t){e(this,t)}bookingNumber;pmsLogs;bookingService=new l;componentWillLoad(){this.init()}async init(){try{this.pmsLogs=await this.bookingService.fetchPMSLogs(this.bookingNumber)}catch(e){console.error(e)}}render(){return t("div",{key:"af316191d6330c10b2b180e8c5ba5beb515fbf13",class:""},be("/Get_Exposed_PMS_Logs")?t("div",{class:"d-flex align-items-center justify-content-center dialog-container-height"},t("ir-spinner",null)):t("div",{class:"dialog-container-height"},t("div",{class:"d-flex align-items-center ",style:{paddingBottom:"0.5rem"}},t("p",{class:"list-title p-0 m-0"},g.entries.Lcz_SentAt,":"),this.pmsLogs?.sent_date?t("p",{class:"list-item"},this.pmsLogs?.sent_date," ",Me(this.pmsLogs?.sent_hour.toString(),this.pmsLogs?.sent_minute.toString())):t("p",{class:`list-item ${this.pmsLogs?.sent_date?"green":"red"}`},this.pmsLogs?.is_acknowledged?g.entries.Lcz_YES:g.entries.Lcz_NO)),t("div",{class:"d-flex align-items-center p-0 m-0"},t("p",{class:"list-title p-0 m-0"},g.entries.Lcz_Acknowledged),t("p",{class:`list-item  ${this.pmsLogs?.is_acknowledged?"green":"red"}`},this.pmsLogs?.is_acknowledged?g.entries.Lcz_YES:g.entries.Lcz_NO))))}};ib.style=tb;const ab=":host{display:block;width:100%}*{box-sizing:border-box}.popover-trigger{all:unset;cursor:pointer}.popover-trigger:hover,.popover-trigger:focus{color:#000}";const rb=ab;const ob=class{constructor(t){e(this,t)}get el(){return o(this)}content;irPopoverLeft="10px";placement="auto";trigger="focus";renderContentAsHtml=false;initialized=false;popoverTrigger;componentDidLoad(){if(this.initialized){return}this.initializePopover()}initializePopover(){$(this.popoverTrigger).popover({trigger:this.trigger,content:this.content,placement:this.placement,html:this.renderContentAsHtml});this.initialized=true}disconnectedCallback(){$(this.popoverTrigger).popover("dispose")}render(){return t(i,{key:"919ac1f63f118582f17c49673898b16189484fbd",style:{"--ir-popover-left":this.irPopoverLeft}},this.trigger!=="focus"?t("p",{ref:e=>this.popoverTrigger=e,class:"popover-title m-0 p-0",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer"}},t("slot",null)):t("button",{tabindex:"0",class:"popover-trigger",ref:e=>this.popoverTrigger=e},t("slot",null)))}};ob.style=rb;const nb=".sc-ir-price-input-h{display:block;--ir-input-border-color:#cacfe7;flex:1 1 0%}.sc-ir-price-input-h .input-group-text.sc-ir-price-input{border-color:var(--ir-input-border-color)}.sc-ir-price-input-h .form-control.sc-ir-price-input,.currency-label.sc-ir-price-input{font-size:14px !important}.ir-bl-lbl-none.sc-ir-price-input,.ir-bl-input-none.sc-ir-price-input{border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.rate-input.sc-ir-price-input:read-only{background:white !important}.ir-br-lbl-none.sc-ir-price-input,.ir-br-input-none.sc-ir-price-input{border-top-right-radius:0 !important;border-bottom-right-radius:0 !important}.ir-br-none.sc-ir-price-input{border-right:none}.ir-bl-none.sc-ir-price-input{border-left:none}.rate-input-container.sc-ir-price-input{display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;flex:1;padding:0 !important}[class='special-style'].sc-ir-price-input-h .rate-input.sc-ir-price-input{background:black !important}.rate-input.sc-ir-price-input{font-size:0.875rem;line-height:0;padding:0;height:0;box-sizing:border-box;border-left:0;padding-left:0px !important;border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.currency-label.with-label.sc-ir-price-input{border-radius:0}.currency-label.sc-ir-price-input{box-sizing:border-box;color:#3b4781;border:1px solid #cacfe7;font-size:0.875rem;height:2rem;background:white;border-right:0;border-top-right-radius:0;border-bottom-right-radius:0;pointer-events:none;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.currency-label.disabled.sc-ir-price-input,.rate-input.sc-ir-price-input:disabled{background-color:#eceff1;border-color:rgba(118, 118, 118, 0.3)}.price-input-group.sc-ir-price-input:focus-within .currency-label.sc-ir-price-input{border-top:1px solid #1e9ff2;border-bottom:1px solid #1e9ff2;border-left:1px solid #1e9ff2}[data-state='error'].sc-ir-price-input-h .currency-label.sc-ir-price-input,[data-state='error'].sc-ir-price-input-h .rate-input.sc-ir-price-input,.error.sc-ir-price-input{border-color:var(--red, #ff4961) !important}.price-input.sc-ir-price-input:focus{border-right-width:1px !important}.is-invalid.sc-ir-price-input{background-image:none !important}";const sb=nb;const lb=class{constructor(t){e(this,t);this.textChange=a(this,"textChange",7);this.inputBlur=a(this,"inputBlur",7);this.inputFocus=a(this,"inputFocus",7)}get el(){return o(this)}label;readOnly;inputStyle;labelStyle;disabled;currency;autoValidate=true;wrapKey;zod;placeholder="";value="";required=false;minValue;maxValue;testId;error;containerClassname;labelContainerClassname;textChange;inputBlur;inputFocus;id;opts={mask:Number,scale:2,radix:".",mapToRadix:[","],normalizeZeros:true,padFractionalZeros:true,thousandsSeparator:","};mask;inputRef;componentWillLoad(){if(this.el.id){this.id=this.el.id}else{this.id=pe()}}componentDidLoad(){if(!this.mask){this.initializeMask()}}initializeMask(){const e={...this.opts};if(this.minValue!==undefined){e["min"]=this.minValue}if(this.maxValue!==undefined){e["max"]=this.maxValue}this.mask=Fe(this.inputRef,e);if(this.value){this.mask.value=this.value}this.mask.on("accept",(()=>{const e=this.inputRef.value.trim()===""||this.mask.unmaskedValue==="";if(e){this.value="";this.textChange.emit(null)}else{this.value=this.mask.unmaskedValue;this.textChange.emit(this.value)}}))}hasSpecialClass(e){return this.el.classList.contains(e)}validateInput(e){if(!this.autoValidate){return}if(this.zod){try{this.zod.parse(this.wrapKey?{[this.wrapKey]:e}:e);this.error=false}catch(e){console.log(e);this.error=true}}}handleInputChange=()=>{this.validateInput(this.value)};handleBlur=()=>{this.validateInput(this.value);if(this.value){const e=parseFloat(this.value);this.value=e.toFixed(2);if(this.mask){this.mask.value=this.value}}this.inputBlur.emit(this.value)};handleFocus=()=>{this.inputFocus.emit()};render(){return t("fieldset",{key:"737308a49d59201de32089330df3e4e831acdbc1",class:`${this.containerClassname} input-group price-input-group m-0 p-0 `},this.label&&t("div",{key:"3d1c1ba277b56ffba4842d0db4a4aed505314063",class:`input-group-prepend ${this.labelContainerClassname}`},t("span",{key:"6bc2d4f87919989f7b0dee9ec1085efffce42a56",class:`input-group-text \n                ${this.labelStyle}\n              ${this.hasSpecialClass("ir-bl-lbl-none")?"ir-bl-lbl-none":""}\n              ${this.hasSpecialClass("ir-br-lbl-none")?"ir-br-lbl-none":""}\n              ${this.hasSpecialClass("ir-br-none")?"ir-br-none":""} \n              ${this.hasSpecialClass("ir-bl-none")?"ir-bl-none":""} \n              `},t("label",{key:"e12efb07bca69ce32fbea1670ef477dc5ca1abf9",class:"p-0 m-0 ",htmlFor:this.id},this.label))),t("div",{key:"576aeb8e53007c6af8e97edc141d6647dc711125",class:"position-relative has-icon-left rate-input-container"},this.currency&&t("div",{key:"6ad7d8ccff61775d5293d6a805c2736270538df9"},t("span",{key:"479b4f529549a7aa867370ff4d1c5820251a9a74",class:`input-group-text ${this.disabled?"disabled":""} currency-label ${this.error?"error":""} ${this.label?"with-label":""}`},this.currency)),t("input",{key:"0e316df26217fa3d5c7fbfdd0631b13564b82220",ref:e=>this.inputRef=e,"data-testid":this.testId,disabled:this.disabled,id:this.id,class:`form-control input-sm rate-input \n              ${this.inputStyle}\n              ${this.hasSpecialClass("ir-br-input-none")?"ir-br-input-none":""} \n              ${this.hasSpecialClass("ir-bl-input-none")?"ir-bl-input-none":""} \n              ${this.error?"error":""} py-0 m-0 ${this.currency?"ir-bl-none":""}`,onInput:this.handleInputChange,onBlur:this.handleBlur,onFocus:this.handleFocus,type:"text",placeholder:this.placeholder,readOnly:this.readOnly,"aria-label":this.el.ariaLabel??"price-input","aria-describedby":this.el.ariaDescription??"price-input"})))}};lb.style=sb;const cb=".sc-ir-progress-indicator-h{display:block}.secondary-progress.sc-ir-progress-indicator{background:#6692b3}";const db=cb;const hb=class{constructor(t){e(this,t)}percentage;color="primary";render(){return t(i,{key:"e397e5707de161a3cae4795856ae9b1fd169b267",class:"progress-main"},t("span",{key:"6c4df74060ce0d673803a9e350a88956b7503bd6",class:"progress-totle"},this.percentage),t("div",{key:"facab498b174bcaca27543ca6292e5125e47c881",class:"progress-line"},t("div",{key:"7586d124cb72ed96552652f3839934bef9455dff",class:`progress ${this.color==="primary"?"bg-primary":"secondary-progress"} mb-0`,style:{width:this.percentage}})))}};hb.style=db;const ub=".sc-ir-radio-h{display:block}.checkmark.sc-ir-radio{top:50% !important;transform:translateY(-50%) !important}";const pb=ub;const fb=class{constructor(t){e(this,t);this.checkChange=a(this,"checkChange",7)}get el(){return o(this)}checked=false;label;radioBoxId=pe();name;indeterminate;disabled;labelClass;currentChecked=false;checkChange;radioRef;componentWillLoad(){this.currentChecked=this.checked}componentDidLoad(){if(this.radioRef){this.radioRef.setAttribute("aria-checked",JSON.stringify(this.checked))}}handleCheckedChange(e){if(e===this.currentChecked){return}this.currentChecked=this.checked}handleCheckChange(){this.currentChecked=!this.currentChecked;if(this.radioRef){this.radioRef.setAttribute("aria-checked",JSON.stringify(this.currentChecked))}this.checkChange.emit(this.currentChecked)}render(){return t("div",{key:"f8fb71afef43d2355445d2f22d6611333ed6ffa7",class:"input-group"},t("label",{key:"2681a0296c4148d3cf04c058c27bf221ba4418a0",class:"check-container radio-container align-items-center m-0 py-0"},t("span",{key:"1e54de8a104da7879ada21a7faa6769761f4023d"},this.label),t("input",{key:"a6fd44ba3bd985ce954b1fa71c825a60466222ee",class:"p-0 m-0",type:"radio",value:"000",name:this.el.name,title:"",onChange:()=>{this.handleCheckChange()},checked:this.currentChecked,ref:e=>this.radioRef=e}),t("span",{key:"b018dd2a59c473a61f95b3d2659a7bf9d92c12d0",class:"checkmark"})))}static get watchers(){return{checked:["handleCheckedChange"]}}};fb.style=pb;const bb="@layer wa-utilities {\n  .sc-ir-range-picker-h[size='small'],\n  .wa-size-s {\n    font-size: var(--wa-font-size-s);\n  }\n\n  .sc-ir-range-picker-h[size='medium'],\n  .wa-size-m {\n    font-size: var(--wa-font-size-m);\n  }\n\n  .sc-ir-range-picker-h[size='large'],\n  .wa-size-l {\n    font-size: var(--wa-font-size-l);\n  }\n}\n\n.sc-ir-range-picker-h {\n  display: block;\n  --ir-range-gap: 0.5rem;\n}\n\n.range-picker__container.sc-ir-range-picker {\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: var(--ir-range-gap);\n  box-sizing: border-box;\n}\n.range-picker__container.focused.sc-ir-range-picker {\n  outline: var(--wa-focus-ring);\n  outline-offset: var(--wa-focus-ring-offset);\n}\n\n.range-picker__icon--hidden.sc-ir-range-picker, .range-picker__date-picker--hidden.sc-ir-range-picker {\n  opacity: 0;\n}\n\n.range-picker__overlay.sc-ir-range-picker {\n  position: absolute;\n  inset: 0;\n  background-color: white;\n  z-index: 1;\n  display: none;\n  pointer-events: none;\n  padding: 0;\n  margin: 0;\n  cursor: pointer;\n  gap: var(--ir-range-gap);\n}\n\n.range-picker__overlay--active.sc-ir-range-picker {\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  pointer-events: auto;\n  border-radius: inherit;\n  padding-inline: 0.5rem;\n}\n.range-picker__date-picker.sc-ir-range-picker:hover .range-picker__date-picker-button.sc-ir-range-picker, .range-picker__date-picker.focused.sc-ir-range-picker .range-picker__date-picker-button.sc-ir-range-picker {\n  color: var(--wa-color-fill-loud, var(--wa-color-brand-50));\n}\n.range-picker__date-picker-button.sc-ir-range-picker {\n  background: inherit;\n  margin: 0;\n  padding: 0;\n  display: flex;\n  align-items: center;\n  font-size: 0.975rem;\n  line-height: 1.45;\n  height: 2rem;\n  color: #3b4781;\n  white-space: nowrap;\n  cursor: pointer;\n  padding-inline: 0.5rem;\n}\n\n.range-picker__calendar-icon.sc-ir-range-picker, .range-picker__arrow-icon.sc-ir-range-picker {\n  height: 14px;\n  width: 14px;\n}\n\n.range-picker__container.sc-ir-range-picker {\n  height: var(--wa-form-control-height);\n  padding: 0 1rem !important;\n  color: var(--wa-form-control-value-color);\n  font-size: var(--wa-form-control-value-size);\n  font-family: inherit;\n  font-weight: var(--wa-form-control-value-font-weight);\n  line-height: var(--wa-form-control-value-line-height);\n  vertical-align: middle;\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  box-sizing: border-box;\n  background-color: var(--wa-form-control-background-color);\n  border-color: var(--wa-form-control-border-color);\n  border-style: var(--wa-form-control-border-style);\n  border-width: var(--wa-form-control-border-width);\n  border-radius: var(--wa-form-control-border-radius);\n  transition: background-color var(--wa-transition-normal), border var(--wa-transition-normal), all var(--wa-transition-normal), outline var(--wa-transition-fast);\n  transition-timing-function: var(--wa-transition-easing);\n}";const gb=bb;const mb=class{constructor(t){e(this,t);this.dateRangeChanged=a(this,"dateRangeChanged",7)}minDate;maxDate;fromDate;toDate;withOverlay=true;allowNullDates=true;lastFocusedPicker;dateRangeChanged;minSelectableDate=fe().subtract(90,"days").toDate();fromDatePicker;toDatePicker;date_container;focusTimeout;async handleDateChanged(e){e.stopImmediatePropagation();e.stopPropagation();const t=e.detail.start?fe(e.detail.start):null;if(!this.lastFocusedPicker){return}if(e.target.id==="fromDate"){let e=this.toDate;if(!t){this.dateRangeChanged.emit({fromDate:null,toDate:null,wasFocused:!!this.lastFocusedPicker});return}if(!e||e.isBefore(t,"day")){e=t}this.dateRangeChanged.emit({fromDate:t,toDate:e,wasFocused:!!this.lastFocusedPicker});await this.toDatePicker.openDatePicker()}else{if(!t){this.dateRangeChanged.emit({fromDate:this.fromDate,toDate:this.fromDate,wasFocused:!!this.lastFocusedPicker});return}this.dateRangeChanged.emit({fromDate:this.fromDate,toDate:t,wasFocused:!!this.lastFocusedPicker})}this.lastFocusedPicker=null}handleDatePickerFocus(e){e.stopPropagation();clearTimeout(this.focusTimeout);this.date_container.classList.add("focused");e.target.classList.add("focused")}handleDatePickerBlur(e){e.stopPropagation();e.target.classList.remove("focused");this.focusTimeout=setTimeout((()=>{this.date_container.classList.remove("focused")}),10)}disconnectedCallback(){clearTimeout(this.focusTimeout)}renderDatePicker(e,i,a,r,o={}){return t("ir-date-picker",{class:{"range-picker__date-picker":true,"range-picker__date-picker--hidden":this.withOverlay&&!this.fromDate},customPicker:true,ref:e=>r(e),minDate:a,maxDate:this.maxDate,date:i?.toDate(),id:e,onDatePickerFocus:()=>{this.lastFocusedPicker=e},emitEmptyDate:this.allowNullDates,...o},t("p",{class:"range-picker__date-picker-button",slot:"trigger"},i?.format("YYYY-MM-DD")??"2025-03-02"))}render(){return t(i,{key:"fe06f00bbc8a3ced322a2b49f5bab7600c8722de",size:"small"},t("div",{key:"96f2c7666132ede42759610fd613e29858d1084a",class:"range-picker__container",ref:e=>this.date_container=e},this.withOverlay&&t("div",{key:"0efedad4915c9685ffd2826887d09c066a8267e4",class:{"range-picker__overlay":true,"range-picker__overlay--active":!this.fromDate},onClick:()=>this.fromDatePicker.openDatePicker()},t("wa-icon",{key:"5f01e46526c9bd851d006977a06e0cf3a61094d1",name:"calendar"}),t("p",{key:"6f529314b1e5b1c8e78bce8590ff63580c610bc5",class:"m-0"},t("slot",{key:"383b7e8cef72e381ffc960ef57e31358e9ed9cf6",name:"message"},"Cleaned on"))),t("svg",{key:"e2dc281720c8a9d19167409f6e51a12cc0fb9e2d",class:{"range-picker__calendar-icon":true,"range-picker__icon--hidden":this.withOverlay&&!this.fromDate},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",style:{height:"14px",width:"14px"}},t("path",{key:"3a9b7d01e75163afef1960dc5db2b7724f0cf091",fill:"currentColor",d:"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z"})),this.renderDatePicker("fromDate",this.fromDate,this.minDate,(e=>this.fromDatePicker=e)),t("svg",{key:"eeeb7db5204a180e6633a8f9141cd431bc7cf981",class:{"range-picker__arrow-icon":true,"range-picker__icon--hidden":this.withOverlay&&!this.fromDate},xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 512 512"},t("path",{key:"ed02ea14923f3b4eb398ac51b288ab7b177ae697",fill:"currentColor",d:"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z"})),this.renderDatePicker("toDate",this.toDate,this.fromDate?.toDate()||this.minSelectableDate,(e=>this.toDatePicker=e),{forceDestroyOnUpdate:false})))}};mb.style=gb;const wb=".sc-ir-reservation-information-h{display:block}.reservation-information.sc-ir-reservation-information{display:flex;flex-direction:column;gap:0.5rem !important}.reservation-information__property-name.sc-ir-reservation-information{margin:0;font-weight:600;margin-bottom:1rem}.reservation-information__row.sc-ir-reservation-information{display:flex;align-items:center;justify-content:space-between;gap:0.5rem}.reservation-information.sc-ir-reservation-information>ir-label.sc-ir-reservation-information,.reservation-information.sc-ir-reservation-information>ota-label.sc-ir-reservation-information,.reservation-information__row.sc-ir-reservation-information ir-label.sc-ir-reservation-information{display:flex;align-items:center}";const yb=wb;const vb=class{constructor(t){e(this,t);this.openSidebar=a(this,"openSidebar",7)}booking;countries;userCountry=null;isOpen;openSidebar;reservationInformationEl;irBookingCompanyFormRef;irBookingExtraNoteRef;componentWillLoad(){const e=this.booking?.guest?.country_id;this.userCountry=e?this.countries?.find((t=>t.id===e))||null:null}componentDidLoad(){this.setDynamicLabelHeight()}componentDidUpdate(){this.setDynamicLabelHeight()}handleEditClick(e,t){e.stopImmediatePropagation();e.stopPropagation();this.openSidebar.emit({type:t})}renderPhoneNumber(){const{mobile_without_prefix:e,country_phone_prefix:t,country_id:i}=this.booking.guest;if(!e){return null}if(t){return t+" "+e}if(i){const t=this.countries.find((e=>e.id===i));if(!t){throw new Error("Invalid country id")}return t.phone_prefix+" "+e}return e}setDynamicLabelHeight(){if(!this.reservationInformationEl){return}requestAnimationFrame((()=>{const e=this.reservationInformationEl?.querySelectorAll("ir-label, ota-label, .reservation-information__row");if(!e||e.length===0){return}const t=Array.from(e).map((e=>e.getBoundingClientRect().height)).filter((e=>e>0));if(!t.length){return}const i=Math.max(...t,32);this.reservationInformationEl.style.setProperty("--ir-reservation-label-height",`${i}px`)}))}render(){const e=J(this.booking.extras);return t("wa-card",{key:"e163c49d4b351f13d4dc11dbaafa4f5088f1be10"},t("div",{key:"9dfa1877761e2fa710388d5a348dc8c9d8599a23",class:"reservation-information",ref:e=>this.reservationInformationEl=e},t("p",{key:"bfb8597150ca8295ac6ab3d6806eff5bb26da62a",class:"reservation-information__property-name"},this.booking.property.name||""),t("ir-label",{key:"83684304f54a98782a921288ad8d431f34f82370",labelText:`${g.entries.Lcz_Source}:`,content:this.booking.origin.Label,image:{src:this.booking.origin.Icon,alt:this.booking.origin.Label}}),t("ir-label",{key:"ad18ce6e188a5eb90cd20cc1af41984bace6ad45",renderContentAsHtml:true,labelText:`${g.entries.Lcz_BookedOn}:`,content:`${Se(this.booking.booked_on.date)}&nbsp&nbsp&nbsp&nbsp${Me(this.booking.booked_on.hour.toString(),this.booking.booked_on.minute.toString())}`}),t("div",{key:"39a2aa07228820f4f661d37b37cb4b00567e8adf",class:"reservation-information__row"},t("ir-label",{key:"d55af053ba8ea0c007a128d748e9341212a1fa0b",labelText:`${g.entries.Lcz_BookedBy}:`,content:`${this.booking.guest.first_name} ${this.booking.guest.last_name}`},this.booking.guest?.nbr_confirmed_bookings>1&&!this.booking.agent&&t("div",{key:"a5a0c7b57ee85748d2e5f06eb2218177764e99e9",class:"m-0 p-0 ",slot:"prefix"},t("wa-tooltip",{key:"52dfb02a94d6e86576e723d21e4d151123243b70",for:"guests_nbr_confirmed_bookings"},`${g.entries.Lcz_BookingsNbr}`.replace("%1",this.booking.guest.nbr_confirmed_bookings.toString())),t("div",{key:"fceabec14d8df9fbd56ba79f4a8c7f17f4d129c4",style:{color:"#FB0AAD"},id:"guests_nbr_confirmed_bookings"},t("span",{key:"5117a95aa518885390e75a17f9e9a78fe8b17d9c"}," ",this.booking.guest.nbr_confirmed_bookings),t("wa-icon",{key:"7c7a33a1814add3f8f8d9bfbcb9587cb0ffd9b77",name:"heart",style:{color:"#FB0AAD"}})))),t("wa-tooltip",{key:"1c55e7b17ee4f2ccba10474b362f82c5b7cd93e6",for:`edit_guest-details`},"Edit guest details"),t("ir-custom-button",{key:"04638094ec97cf391d091f9e099c5c99e7c4b8e8",iconBtn:true,id:`edit_guest-details`,onClickHandler:e=>this.handleEditClick(e,"guest"),appearance:"plain",variant:"neutral"},t("wa-icon",{key:"57e4647f685bb800a4c1e8cb9cb3b2fdaa8f6530",name:"edit",label:"Edit guest details",style:{fontSize:"1rem"}}))),t("div",{key:"9f4807bc1d48ab1d99afa633e53e0d5057471b12",class:"reservation-information__row"},t("ir-label",{key:"1cf2f23f70796ef9a2a9874ff650429bc83f5bc8",labelText:`Company:`,placeholder:"No company name provided",content:`${this.booking.company_name??""}${this.booking.company_tax_nbr?` - ${this.booking.company_tax_nbr}`:""}`,display:"flex"}),t("wa-tooltip",{key:"b75cebe8e1be5d4a15b87b60161ba43c95579c92",for:`edit_create-company-info`},"Add company info"),t("ir-custom-button",{key:"c4c753577c8299833fb7ec8d218e932597a9f9a0",iconBtn:true,id:`edit_create-company-info`,onClickHandler:e=>{e.stopImmediatePropagation();e.stopPropagation();this.irBookingCompanyFormRef.openCompanyForm()},appearance:"plain",variant:"neutral"},t("wa-icon",{key:"5e16ea6aac255267ea3c48cfbda0eda6f45ab78f",name:"edit",label:"Add or modify company info",style:{fontSize:"1rem"}}))),this.booking.guest.mobile&&t("ir-label",{key:"88312e08094adad9f443ea701476af7462e456b0",labelText:`${g.entries.Lcz_Phone}:`,content:this.renderPhoneNumber()}),!this.booking.agent&&t("ir-label",{key:"7a7f9452460acc9e8dd2b458635ad58c7d5d98c8",labelText:`${g.entries.Lcz_Email}:`,content:this.booking.guest.email}),this.booking.guest.alternative_email&&t("ir-label",{key:"0b5616b9165321068a758600276c57e81b060050",labelText:`${g.entries.Lcz_AlternativeEmail}:`,content:this.booking.guest.alternative_email}),this.booking?.guest?.address&&t("ir-label",{key:"7a0f8c73f3fd55603866d1a854468fdad122dc4e",labelText:`${g.entries.Lcz_Address}:`,content:this.booking.guest.address}),this.userCountry&&t("ir-label",{key:"10bde7cb9040f68ed0568d72997e845d3b91ee86",labelText:`${g.entries.Lcz_Country}:`,isCountryImage:true,content:this.userCountry.name,image:{src:this.userCountry.flag,alt:this.userCountry.name}}),this.booking.guest?.notes&&t("ir-label",{key:"ec7835fb436e85043fcff4d558cd1328eccc28e6",display:"inline",labelText:`${g.entries.Lcz_GuestPrivateNote}:`,content:this.booking.guest?.notes}),this.booking.is_direct&&t("ir-label",{key:"2a15d6a07cfa89a679c6f2608ba193f69395b218",labelText:`${g.entries.Lcz_ArrivalTime}:`,content:this.booking.arrival.description}),this.booking.promo_key&&t("ir-label",{key:"3226dc2fcf52c9f7315060df045bcf8a116c62fe",labelText:`${g.entries.Lcz_Coupon}:`,content:this.booking.promo_key}),this.booking.is_in_loyalty_mode&&!this.booking.promo_key&&t("div",{key:"c1326e25d210945d87a73de33f230dcfb787fe71",class:"d-flex align-items-center"},t("svg",{key:"eb187ac695af34c42239ca0d3ba39215405c75c6",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",height:18,width:18},t("path",{key:"036c927f86f5362e38298f54e8b98f703d0c4e2f",fill:"#fc6c85",d:"M225.8 468.2l-2.5-2.3L48.1 303.2C17.4 274.7 0 234.7 0 192.8v-3.3c0-70.4 50-130.8 119.2-144C158.6 37.9 198.9 47 231 69.6c9 6.4 17.4 13.8 25 22.3c4.2-4.8 8.7-9.2 13.5-13.3c3.7-3.2 7.5-6.2 11.5-9c0 0 0 0 0 0C313.1 47 353.4 37.9 392.8 45.4C462 58.6 512 119.1 512 189.5v3.3c0 41.9-17.4 81.9-48.1 110.4L288.7 465.9l-2.5 2.3c-8.2 7.6-19 11.9-30.2 11.9s-22-4.2-30.2-11.9zM239.1 145c-.4-.3-.7-.7-1-1.1l-17.8-20c0 0-.1-.1-.1-.1c0 0 0 0 0 0c-23.1-25.9-58-37.7-92-31.2C81.6 101.5 48 142.1 48 189.5v3.3c0 28.5 11.9 55.8 32.8 75.2L256 430.7 431.2 268c20.9-19.4 32.8-46.7 32.8-75.2v-3.3c0-47.3-33.6-88-80.1-96.9c-34-6.5-69 5.4-92 31.2c0 0 0 0-.1 .1s0 0-.1 .1l-17.8 20c-.3 .4-.7 .7-1 1.1c-4.5 4.5-10.6 7-16.9 7s-12.4-2.5-16.9-7z"})),t("p",{key:"850905460e11ef0029ad81b5412dea7c1c2295d4",class:"m-0 p-0 ml-1"},g.entries.Lcz_LoyaltyDiscountApplied)),this.booking.is_direct?t("ir-label",{labelText:`${g.entries.Lcz_GuestRemark}:`,display:"inline",content:this.booking.remark}):t("ota-label",{class:"m-0 p-0",label:`${g.entries.Lcz_ChannelNotes||"Channel notes"}:`,remarks:this.booking.ota_notes,maxVisibleItems:this.booking.ota_notes?.length}),t("div",{key:"f74d4f0c19c396e3318718bcd434b4df5a050e3e",class:"reservation-information__row"},t("ir-label",{key:"c45c90bf6a5dbf90420c72f0515f366e3c9d33b7",labelText:`${g.entries.Lcz_BookingPrivateNote}:`,placeholder:g.entries.Lcz_VisibleToHotelOnly,content:e,display:e?"inline":"flex"}),t("wa-tooltip",{key:"1cd15ad229e624dbe5ad2851535398f0475a2e88",for:`edit_create-extra-note`},e?"Edit":"Create"," private note"),t("ir-custom-button",{key:"169ea99232c7591c63c6ead5810354beb7b29e9b",iconBtn:true,id:`edit_create-extra-note`,onClickHandler:()=>{this.irBookingExtraNoteRef.openDialog()},appearance:"plain",variant:"neutral"},t("wa-icon",{key:"71b2359bbb7e274e2cd17eddc9771a21a62ae3e7",style:{fontSize:"1rem"},name:"edit",label:"Edit or create private note"}))),t("ir-booking-extra-note",{key:"db9307ac48a576d35d4a98f8e051ce9552674a09",booking:this.booking,ref:e=>this.irBookingExtraNoteRef=e}),t("ir-booking-company-dialog",{key:"ff2f0a8e08c2598beb0ac874679d4a486199e9f7",booking:this.booking,ref:e=>this.irBookingCompanyFormRef=e})))}};vb.style=yb;const kb=".base-host.sc-ir-reset-password{height:100vh;display:grid;align-content:center;padding:2rem;box-sizing:border-box;background-position:center;background-repeat:no-repeat;background-size:cover;background:white}p.sc-ir-reset-password,input.sc-ir-reset-password,button.sc-ir-reset-password{margin:0}p.sc-ir-reset-password,input.sc-ir-reset-password,button.sc-ir-reset-password,div.sc-ir-reset-password,section.sc-ir-reset-password,form.sc-ir-reset-password{box-sizing:border-box}.lock-icon.sc-ir-reset-password{align-self:center}.form-container.sc-ir-reset-password{padding:1rem;display:flex;flex-direction:column;height:100%;background:white;border-radius:0.25rem;gap:1rem;width:100%;max-width:38rem;margin-left:auto;margin-right:auto}.separator-container.sc-ir-reset-password{display:flex;align-items:center;gap:0.5rem;padding-top:1.5rem;padding-bottom:1rem}.separator-container.sc-ir-reset-password p.sc-ir-reset-password{color:#6b6f82;font-size:1rem}.separator.sc-ir-reset-password{flex:1 1 0%;height:1px;background:#dadada}.login-btn.sc-ir-reset-password{margin-top:1rem}.logo.sc-ir-reset-password{align-self:center}.app_links.sc-ir-reset-password{display:flex;align-items:center;justify-content:center;gap:1rem;padding-block:0.5rem}.app_links.sc-ir-reset-password a.sc-ir-reset-password img.sc-ir-reset-password{width:70%}.password_toggle.sc-ir-reset-password{all:unset;position:absolute;top:2px;right:1rem}";const xb=kb;const _b=".sc-ir-reset-password-h{height:100%}.sheet-container.sc-ir-reset-password{display:flex !important;flex-direction:column !important;background:white;height:100vh;gap:1rem;z-index:1000}.sheet-container.sc-ir-reset-password{height:-webkit-fill-available;height:100vh;height:100dvh}.sheet-footer.sc-ir-reset-password{position:sticky;bottom:0;z-index:20;background:white;border-top:1px solid #e4e5ec;display:flex;flex-direction:column;padding:1rem;gap:0.5rem}.sheet-header.sc-ir-reset-password{position:sticky;top:0;z-index:10;background:white}.sheet-body.sc-ir-reset-password{flex:1 1 0%}@media (min-width: 768px){.sheet-footer.sc-ir-reset-password{flex-direction:row;align-items:center}}";const Db=_b;const Cb=class{constructor(t){e(this,t);this.closeSideBar=a(this,"closeSideBar",7)}get el(){return o(this)}username;old_pwd;ticket;skip2Fa;language="en";confirmPassword;password;showValidator=false;autoValidate=false;error={};submitted=false;isLoading=false;isFetching=false;closeSideBar;token=new me;authService=new yp;systemService=new Xp;roomService=new we;initialized=false;componentWillLoad(){if(this.ticket){this.token.setToken(this.ticket)}}componentDidLoad(){this.init()}handleTicketChange(e,t){if(e!==t){this.token.setToken(this.ticket);this.init()}}async init(){if(!this.ticket||this.initialized){return}const[e]=await Promise.all([this.roomService.fetchLanguage(this.language,["_USER_MGT"]),this.systemService.checkOTPNecessity({METHOD_NAME:"Change_User_Pwd"})]);g.entries=e.entries;g.direction=e.direction;this.initialized=false}ResetPasswordSchema=z.object({password:z.string().regex(Ou.PASSWORD),confirm_password:z.string().nullable().refine((e=>{if(!Ou.PASSWORD.test(e)){return false}return e===this.password}),{message:"Password must be at least 8 characters long."})});async handleChangePassword(e){e.preventDefault();try{this.error={};this.isLoading=true;this.autoValidate=true;this.ResetPasswordSchema.parse({password:this.password,confirm_password:this.confirmPassword});await this.authService.changeUserPwd({username:this.username,new_pwd:this.password,old_pwd:this.old_pwd});if(!this.skip2Fa){window.history.back()}if(this.el.slot==="sidebar-body"){this.closeSideBar.emit()}}catch(e){if(e instanceof N){let t={};e.issues.map((e=>{const i=e.path[0];console.log(i,e);if(i==="password"){this.showValidator=true}t[i]=true}));this.error=t}}finally{this.isLoading=false}}handleOtpFinished(e){if(e.detail.type==="success"){return}if(this.el.slot!=="sidebar-body"){window.history.back()}else{this.closeSideBar.emit()}}render(){const e=this.el.slot==="sidebar-body";return t("div",{key:"1dcdc3b95f14116a8a71f8fff7477713a80bb254",class:{"base-host":!e,"h-100":e}},t(r,{key:"cd1d03aed796bfe32dc0347ab602720a856379bb"},!e&&t(r,{key:"19b8050ab0c9b123d68cb910dac847e0c285fbb3"},t("ir-interceptor",{key:"e52b8288bbaa160062e92e7080fcdefd0fbd1162",suppressToastEndpoints:["/Change_User_Pwd"]}),t("ir-toast",{key:"32aa93d0bd6040644cd5957df0f95e9f8fa05c5e"})),t("form",{key:"adc3ec3459557a06a1ebb390bad3f8f171faf61e",onSubmit:this.handleChangePassword.bind(this),class:{"sheet-container":e}},e&&t("ir-title",{key:"8ecae7968046ca5dda95fd96e7b907cddf4148d0",class:"px-1 sheet-header",displayContext:"sidebar",label:"Change Password"}),t("div",{key:"f4b4d4a13a1bfad4eec43c2228e4c25f76fff26f",class:{"form-container":true,"sheet-body px-1":e,"px-2":!e}},t("svg",{key:"ccce7fbbafd3572078828251cf492cb450e734fc",class:"lock-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",height:24,width:24},t("path",{key:"bad2fcde744bbf5662a569c30b113570ef19f47a",fill:"currentColor",d:"M144 144l0 48 160 0 0-48c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192l0-48C80 64.5 144.5 0 224 0s144 64.5 144 144l0 48 16 0c35.3 0 64 28.7 64 64l0 192c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 256c0-35.3 28.7-64 64-64l16 0z"})),t("div",{key:"4d84456882fe44cb5e96496c251a6970b6304553",class:"text-center mb-2"},t("h4",{key:"e51c2448f7c9e1197900fa651860e706386dd35d",class:"mb-1"},g?.entries?.Lcz_SetNewPassword),this.submitted?t("p",null,"An email has been sent to your address. Please check your inbox to confirm the password change."):t("p",null,"Your new password must be different to previously used password")),!this.submitted&&t("section",{key:"e04f73c2d8351556eecdf1c43b62d5efce777aef"},t("div",{key:"d19a03fc2c746060df93248edac0621bb4dc0dc0",class:"mb-2"},t("div",{key:"05f6d9d1344a520a8b94f6af981bea736cfc4ef1",class:"m-0 p-0"},t("div",{key:"e5d9e0ae4eb1010615372f0fc8aadb5e775b67ff",class:"position-relative"},t("ir-input-text",{key:"d15ae5557190d7abad9b56c54409c4887034d18d",error:this.error?.password,autoValidate:this.autoValidate,value:this.password,onTextChange:e=>this.password=e.detail,label:"",class:"m-0 p-0",inputStyles:"m-0",zod:this.ResetPasswordSchema.pick({password:true}),wrapKey:"password",placeholder:g.entries?.Lcz_NewPassword,onInputFocus:()=>this.showValidator=true,type:"password"})),this.showValidator&&t("ir-password-validator",{key:"47b6a1e9b219b70dce4890dae876334ea1c74c9e",class:"mb-1",password:this.password})),t("div",{key:"f608f9d456af19bc1633d0a527931173c0647ff4",class:"position-relative"},t("ir-input-text",{key:"932e4803e78ae24a0b42114baffa10403e20bf40",error:this.error?.confirm_password,autoValidate:this.autoValidate,zod:this.ResetPasswordSchema.pick({confirm_password:true}),wrapKey:"confirm_password",value:this.confirmPassword,onTextChange:e=>this.confirmPassword=e.detail,label:"",placeholder:g.entries?.Lcz_ConfirmPassword,type:"password"}))),!e&&t("div",{key:"7696cac0c4690e28b6fe5573fb35a0ac1fee3f68",class:"d-flex flex-column mt-2 flex-sm-row align-items-sm-center",style:{gap:"0.5rem"}},t("ir-button",{key:"e4e996adaca4c8d9028d4dd6b79a748b1897f689",btn_styles:"flex-fill",onClickHandler:()=>window.history.back(),class:"flex-fill",text:g.entries?.Lcz_Cancel,size:"md",btn_color:"secondary"}),t("ir-button",{key:"b19231374546a1f6d621d71b17cbcf3b5fd79455",btn_styles:"flex-fill",class:"flex-fill",isLoading:this.isLoading,btn_type:"submit",text:g.entries?.Lcz_ChangePassword,size:"md"})))),e&&t("div",{key:"c2fbea311856d4c15e05c6fa41aa0d16622625dd",class:"sheet-footer w-full"},t("ir-button",{key:"0da5d576d771b4590ea2fc438d00473c8dab0ce9",text:g.entries.Lcz_Cancel,onClickHandler:()=>this.closeSideBar.emit(null),class:"flex-fill",btn_color:"secondary",btn_styles:"w-100 justify-content-center align-items-center",size:"md"}),t("ir-button",{key:"69876aa5cde00984e169e3c6c8a81fd2e9b23356",isLoading:this.isLoading,class:"flex-fill",btn_type:"submit",btn_styles:"w-100 justify-content-center align-items-center",text:g.entries.Lcz_ChangePassword,size:"md"})))))}static get watchers(){return{ticket:["handleTicketChange"]}}};Cb.style=xb+Db;const Mb=".sc-ir-revenue-row-h{--ir-border:#e5e7eb}.ir-revenue-row__accordion.sc-ir-revenue-row::part(base),.ir-revenue-row.sc-ir-revenue-row{border:0;border-radius:0;border-bottom:1px solid var(--ir-border, #e5e7eb);background:#fff;padding:0}.ir-revenue-row__header.sc-ir-revenue-row{display:flex;align-items:center;justify-content:space-between;padding:var(--ir-space-4, 1rem);border-bottom:1px solid var(--ir-border, #e5e7eb)}.ir-revenue-row__accordion.sc-ir-revenue-row::part(trigger),.ir-revenue-row__title.sc-ir-revenue-row{display:inline-flex;align-items:center;gap:0.5rem;background:transparent;border:0;padding:0;cursor:pointer;text-align:left;width:100%;justify-content:space-between;padding:0.5rem;color:rgb(83, 83, 83)}.ir-revenue-row__title.sc-ir-revenue-row{padding:0}.ir-revenue-row__header-left.sc-ir-revenue-row{display:flex;align-items:center;gap:0.5rem}.ir-revenue-row__accordion.sc-ir-revenue-row::part(trigger):hover{background:#f4f5fa}.ir-revenue-row__group.sc-ir-revenue-row{margin:0}.ir-revenue-row__badge.sc-ir-revenue-row{background:lightgray;border-radius:0.25rem;font-size:0.75rem;padding:0 0.5rem;margin-left:0.375rem}.ir-revenue-row__total.sc-ir-revenue-row{font-weight:700;margin:0}.ir-revenue-row__accordion.sc-ir-revenue-row::part(content){padding:0.25rem 1rem}.ir-revenue-row__detail.sc-ir-revenue-row{display:block;border-bottom:1px solid var(--ir-border, #e5e7eb)}.ir-revenue-row__detail.sc-ir-revenue-row:last-child{border-bottom:none}@media (min-width: 1024px){.ir-revenue-row__header-left.sc-ir-revenue-row{width:40vw}.ir-revenue-row__accordion.sc-ir-revenue-row::part(trigger),.ir-revenue-row__title.sc-ir-revenue-row{justify-content:flex-start}}";const Sb=Mb;let Yb=0;const Eb=class{constructor(t){e(this,t)}get host(){return o(this)}payments=[];groupName;contentId=`ir-rr-content-${++Yb}`;render(){const e=this.payments.reduce(((e,t)=>e+t.amount),0);return t(i,{key:"29f94954df57ff38e140fcca9c0a3aaefe3a52ea"},t("ir-accordion",{key:"b31e1e936693abadca45c1ecec27f0a6a772eed0",class:"ir-revenue-row__accordion"},t("div",{key:"b917859c8968d82f33fe2b5c8f601fda094a4ca3",slot:"trigger",class:"ir-revenue-row__title"},t("div",{key:"5627446cdca2d8e0e7c35266d925e76d5ddf6522",class:"ir-revenue-row__header-left"},t("p",{key:"cd2f83bf1f23aa29729e9d4f7016e16916b00b8b",class:"ir-revenue-row__group"},this.groupName," ",t("span",{key:"44251666ff23eee0498ccc3779759e68d017296e",class:"ir-revenue-row__badge","aria-label":`${this.payments.length} transactions`},this.payments.length))),t("p",{key:"57c6735196803c006a37c23033593600731f34cd",class:"ir-revenue-row__total"},v(y.currency.symbol,e))),t("div",{key:"cfbee09a9b716582c397ffeb8f184ec99d489471",class:"ir-revenue-row__details",id:this.contentId},t("div",{key:"6ca656afac36678169df7dfe10283152b1ff4357",class:"ir-revenue-row__details-inner"},this.payments.map((e=>t("ir-revenue-row-details",{class:"ir-revenue-row__detail",id:e.id,payment:e,key:e.id})))))))}};Eb.style=Sb;const Tb=".sc-ir-revenue-row-details-h{border-bottom:1px solid var(--ir-border, #e5e7eb);font-size:0.875rem}.ir-revenue-row-detail.sc-ir-revenue-row-details,.ir-revenue-row-detail__info.sc-ir-revenue-row-details{display:flex;gap:0.5rem;padding:0.25rem;flex-direction:column}.ir-revenue-row-detail.sc-ir-revenue-row-details:hover{background:#f4f5fa}.ir-revenue-row-detail__booking.sc-ir-revenue-row-details{display:inline-flex}.ir-revenue-row-detail__booking-btn.sc-ir-revenue-row-details{display:inline-flex}.ir-revenue-row-detail.sc-ir-revenue-row-details:last-child{border-bottom:none}.ir-revenue-row-detail__label.sc-ir-revenue-row-details{font-weight:500;color:var(--ir-muted, #6b7280);margin-right:0.25rem}.ir-revenue-row-detail__amount.sc-ir-revenue-row-details{font-weight:600;text-align:right;white-space:nowrap;flex:1 1 0%}.ir-revenue-row-detail__amount.negative.sc-ir-revenue-row-details{color:var(--ir-danger, #dc2626)}.ir-revenue-row-detail__meta.sc-ir-revenue-row-details{display:flex;align-items:center}.ir-revenue-row-detail__amount.sc-ir-revenue-row-details{display:none}.ir-revenue-row-detail__time.sc-ir-revenue-row-details{display:flex;gap:0.5rem}.ir-revenue-row-detail__time.sc-ir-revenue-row-details .ir-revenue-row-detail__amount.sc-ir-revenue-row-details{display:flex;flex:1 1 0%;justify-content:end}@media (min-width: 640px){.ir-revenue-row-detail.sc-ir-revenue-row-details,.ir-revenue-row-detail__info.sc-ir-revenue-row-details{flex-direction:row;align-items:center;gap:1rem}.ir-revenue-row-detail__amount.sc-ir-revenue-row-details{display:inline-flex;justify-content:flex-end}.ir-revenue-row-detail__time.sc-ir-revenue-row-details .ir-revenue-row-detail__amount.sc-ir-revenue-row-details{display:none}}@media (min-width: 1024px){.ir-revenue-row-detail__info.sc-ir-revenue-row-details{width:calc(40vw + 1.375rem - 0.25rem)}.ir-revenue-row-detail__amount.sc-ir-revenue-row-details{justify-content:flex-start}}";const Ib=Tb;const zb=class{constructor(t){e(this,t);this.revenueOpenSidebar=a(this,"revenueOpenSidebar",7)}payment;revenueOpenSidebar;render(){return t(i,{key:"94fd16fdfac59217d03a99b43e09715dfa13a88b"},t("div",{key:"e97884dafa8b26afa97cce8d5675318b4407f6f8",class:"ir-revenue-row-detail"},t("div",{key:"b2b71a6197a137c24673f312029dcf89d719eb3c",class:"ir-revenue-row-detail__info"},t("div",{key:"424072d6f48bc0af25a320637075844ea45d085e",class:"ir-revenue-row-detail__time"},t("span",{key:"3a8714f71080bf3aad704e175c9b9868102d56f7",class:"ir-revenue-row-detail__label"},this.payment.date),t("span",{key:"37cd781cad102eb974a0b77318a918b0f2911abb",class:"ir-revenue-row-detail__value"},Me(this.payment.hour.toString(),this.payment.minute.toString())),t("div",{key:"2c71d9e190f17478afb4a08af17f9c9c99e6b211",class:"ir-revenue-row-detail__amount"},v(y.currency.symbol,this.payment.amount))),t("div",{key:"4cbabe66fed598c205560a946aa7147bfbfcd149",class:"ir-revenue-row-detail__meta"},t("div",{key:"8d49531e6dd73fc6f03f60a6764a894166e7e690",class:"ir-revenue-row-detail__user"},t("span",{key:"63ec28148989eed8191101b06e1d1af9e82ddac8",class:"ir-revenue-row-detail__label"},"User:"),t("span",{key:"23b805353eec92c03e81cb5bacaae348f275cf7f",class:"ir-revenue-row-detail__value"},this.payment.user)),t("div",{key:"853ab0ca46cbc0d76bda692dd9ac2e1be2d7d77b",class:"ir-revenue-row-detail__booking"},t("ir-button",{key:"7c1467ba8838897f44137d79ef8e2d57f020b82b",variant:"default",btn_color:"link",text:this.payment.bookingNbr,class:"ir-revenue-row-detail__booking-btn",size:"sm",onClickHandler:e=>{e.stopImmediatePropagation();e.stopPropagation();this.revenueOpenSidebar.emit({payload:{bookingNumber:Number(this.payment.bookingNbr)},type:"booking"})},btnStyle:{width:"fit-content",margin:"0",padding:"0",fontSize:"inherit",textAlign:"center",lineHeight:"1.2"}})))),t("div",{key:"c81f8181de4d8ebbc203fbf09bf56d2628df3271",class:"ir-revenue-row-detail__amount"},v(y.currency.symbol,this.payment.amount))))}};zb.style=Ib;const Ob=".ir-revenue-summary__mobile.sc-ir-revenue-summary{display:flex;align-items:center;gap:1rem}.ir-revenue-summary__tablet.sc-ir-revenue-summary{display:none;grid-template-columns:repeat(3, 1fr);gap:1rem}.stats-card__payments-value.sc-ir-revenue-summary{padding:0;margin:0;color:#629a4c}.stats-card__refund-value.sc-ir-revenue-summary{padding:0;margin:0;color:#ff4961}@media (min-width: 768px){.ir-revenue-summary__tablet.sc-ir-revenue-summary{display:grid}.ir-revenue-summary__mobile.sc-ir-revenue-summary{display:none}}";const Ab=Ob;const Bb=class{constructor(t){e(this,t)}groupedPayments=new Map;previousDateGroupedPayments=new Map;paymentEntries;calculateTotalPayments(e){let t=0;e.forEach(((e,i)=>{if(i.split("_")[0]==="001"){t+=this.calculateTotalValue(e)}}));return t}calculateTotalRefunds(e){const t="010";const i=[];e.forEach(((e,a)=>{if(a.split("_")[0]===t){i.push(...e)}}));return this.calculateTotalValue(i)}calculateTotalValue(e){return e.reduce(((e,t)=>e+t.amount),0)}getTrendIcon(e,t){if(e===t){return undefined}return e>t?"arrow-trend-up":"arrow-trend-down"}render(){const e=this.calculateTotalPayments(this.groupedPayments);const a=this.calculateTotalRefunds(this.groupedPayments);const r=e+a;const o=this.calculateTotalPayments(this.previousDateGroupedPayments);const n=this.calculateTotalRefunds(this.previousDateGroupedPayments);const s=o+n;return t(i,{key:"4ea90d9220fa7f24f53789d8089b81230961d572"},t("div",{key:"3cdd44ab87b6fcc06645c15ef9014d9764aefa89",class:"ir-revenue-summary__mobile"},t("ir-stats-card",{key:"103a89a49cec328bc91ac7b4bc191cde5b56b644",icon:"arrow-trend-up",value:v(y.currency.symbol,e),cardTitle:"Payments"},t("p",{key:"865c6ef33e04b5e9fc4f2c1bc179fd34e9919557",class:"stats-card__payments-value",slot:"value"},v(y.currency.symbol,e))),t("ir-stats-card",{key:"b6303755bc742e3fbe384221455e02c3e1adc926",value:"123$",class:"refunds-card",icon:"arrow-trend-down",cardTitle:"Refunds"},t("p",{key:"2af8e3fa83ddff80afcce9cb1197c9f16abc5bd3",class:"stats-card__refund-value",slot:"value"},v(y.currency.symbol,a)))),t("div",{key:"08625c5950dd7b9e9dfdd5e9c06aeb7ee2dff72b",class:"ir-revenue-summary__tablet"},t("ir-stats-card",{key:"fac54fb50971f63e0c3d9de164faafc41cf987a8",icon:"arrow-trend-up",value:v(y.currency.symbol,e),cardTitle:"Payments",subtitle:`Previous day  ${v(y.currency.symbol,o)}`},t("p",{key:"8d313fe96b2d627acf36e23bbf730e6d01d1f614",class:"stats-card__payments-value",slot:"value"},v(y.currency.symbol,e))),t("ir-stats-card",{key:"a7811173811f0eb5d548e7f955638187eca787e5",value:"123$",class:"refunds-card",icon:"arrow-trend-down",cardTitle:"Refunds",subtitle:`Previous day  ${v(y.currency.symbol,n)}`},t("p",{key:"9065751bb47d0df5fae0427374faae5b1d4aae16",class:"stats-card__refund-value",slot:"value"},v(y.currency.symbol,a))),t("ir-stats-card",{key:"cd6126f01a374503349873025e5b12faaa9a904b",icon:this.getTrendIcon(r,s),value:v(y.currency.symbol,r),cardTitle:"Difference",subtitle:`Previous day  ${v(y.currency.symbol,s)}`})))}};Bb.style=Ab;const Rb=".sc-ir-revenue-table-h{overflow-x:hidden;font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important}.sc-ir-revenue-table-h *.sc-ir-revenue-table{font-family:inherit !important;font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important}.revenue-table__header.sc-ir-revenue-table,.revenue-table__method_header.sc-ir-revenue-table{box-sizing:border-box;display:flex;align-items:center;justify-content:space-between;padding:0.5rem 1rem}.revenue-table__header.sc-ir-revenue-table{background:#ececec;color:#374151}.revenue-table__header.sc-ir-revenue-table p.sc-ir-revenue-table,.revenue-table__method_header.sc-ir-revenue-table p.sc-ir-revenue-table{padding:0;margin:0;font-size:1rem;font-weight:700}.revenue-table__method_header.sc-ir-revenue-table{color:black}.revenue-table__title-section.sc-ir-revenue-table{display:flex;align-items:center;justify-content:center;padding-bottom:0.875rem}.revenue-table__table.sc-ir-revenue-table{min-height:50vh}@media (min-width: 1024px){.revenue-table__header.sc-ir-revenue-table,.revenue-table__method_header.sc-ir-revenue-table{width:100%;justify-content:flex-start}.revenue-table__header.sc-ir-revenue-table p.sc-ir-revenue-table:first-child,.revenue-table__method_header.sc-ir-revenue-table p.sc-ir-revenue-table:first-child{width:calc(40vw + 1.375rem + 0.5rem + 1rem)}}";const Pb=Rb;const Nb=class{constructor(t){e(this,t)}payments=new Map;paymentEntries;filters;payTypesObj;payMethodObj;groupType="method";componentWillLoad(){const e=e=>{let t={};this.paymentEntries[e].forEach((e=>{t={...t,[e.CODE_NAME]:e.CODE_VALUE_EN}}));return t};this.payTypesObj=e("types");this.payMethodObj=e("methods")}regroupPaymentsByMethod(){const e=new Map;const t=this.payments;if(!(t instanceof Map)||t.size===0)return e;const i=e=>{if(typeof e!=="string")return["UNKNOWN","UNKNOWN"];const[t,...i]=e.split("_");const a=i.join("_");const r=t&&t.trim()||"UNKNOWN";const o=a&&a.trim()||"UNKNOWN";return[r,o]};for(const[a,r]of t.entries()){const[t,o]=i(a);const n=Array.isArray(r)?r.filter(Boolean):[];if(n.length===0){if(!e.has(o))e.set(o,new Map);if(!e.get(o).has(t)){e.get(o).set(t,[])}continue}const s=e.get(o)??new Map;const l=s.get(t)??[];s.set(t,l.concat(n));e.set(o,s)}return e}render(){const e=this.payments instanceof Map&&this.payments.size>0;return t("div",{key:"9449ab82be8d4ccce2cf3033a835953f9181fb2c",class:"card p-1 revenue-table__table"},e?t(r,null,t("div",{class:"revenue-table__header"},t("p",null,"Method"),t("p",null,"Amount")),this.groupType==="type"&&Array.from(this.payments.entries()).map((([e,i])=>{const[a,r]=e.split("_");const o=bf.includes(a)?`${this.payTypesObj[a]??a}: ${this.payMethodObj[r]??r}`:this.payTypesObj[a]??a;return t("ir-revenue-row",{key:e,payments:i,groupName:o})})),this.groupType==="method"&&Array.from(this.regroupPaymentsByMethod().entries()).flatMap((([e,i])=>{const a=Array.from(i.entries()).reduce(((e,[t,i])=>e+i.reduce(((e,t)=>e+t.amount),0)),0);return t("div",{key:`method_${e}`},t("div",{class:"revenue-table__method_header"},t("p",null,this.payMethodObj[e]??e),t("p",null,v(y.currency.symbol,a))),Array.from(i.entries()).map((([e,i])=>{const a=bf.includes(e)?`${this.payTypesObj[e]??e}`:this.payTypesObj[e]??e;return t("div",{key:`type_${e}`,class:"px-1"},t("ir-revenue-row",{payments:i,groupName:a}))})))}))):t("p",{class:"text-center my-auto mx-auto"},"There are no payment transactions recorded for the selected date."))}};Nb.style=Pb;const Lb=".light-blue-bg.sc-ir-room{background:#acecff;padding:0.1rem 0.3rem;border-radius:5px;display:block;max-width:100px;box-sizing:border-box;display:inline-block;overflow:hidden;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:default}.room_statements.sc-ir-room{display:block;width:100%}.room_statements.sc-ir-room{display:block;width:100%}.room_statements.sc-ir-room span.sc-ir-room{display:inline;white-space:normal;line-height:1.5;word-break:break-word}.room_statements.sc-ir-room b.sc-ir-room{display:inline;margin-right:5px}.payment-container.sc-ir-room{position:absolute;right:1rem;height:fit-content}.sc-ir-room-h{position:relative}.subtotal_row.sc-ir-room{padding-top:8px;font-weight:600}.room_actions_btns.sc-ir-room{gap:0.5rem}.night-cost.sc-ir-room{color:#7cbebe}.room_actions_btns.sc-ir-room{white-space:nowrap;width:max-content}.room_actions_btns.sc-ir-room{flex:1 1 0%;display:flex;justify-content:flex-end}.mx-0-5.sc-ir-room{margin-left:2px !important;margin-right:2px !important}.tax-width.sc-ir-room{font-size:10px}.mx-01.sc-ir-room{--m:5px;margin-right:var(--m) !important;margin-left:var(--m) !important}*.sc-ir-room-h{box-sizing:border-box}.booking-room__collapse-btn.sc-ir-room{all:unset;display:inline-flex;align-items:center;align-self:flex-start;height:fit-content;border-radius:calc(var(--wa-panel-border-radius) - var(--wa-panel-border-width));aspect-ratio:1;cursor:pointer;transition:rotate var(--wa-transition-normal) var(--wa-transition-easing)}.booking-room__collapse-btn[data-state='opened'].sc-ir-room{rotate:90deg}.booking-room__collapse-btn[data-state='opened'].sc-ir-room:dir(rtl){rotate:-90deg}.booking-room__collapse-btn.sc-ir-room:focus-visible{outline:var(--wa-focus-ring);outline-offset:calc(var(--wa-panel-border-width) + var(--wa-focus-ring-offset))}.booking-room__header-row.sc-ir-room{display:flex;gap:var(--wa-space-sm, 0.5rem);margin:0}.booking-room__price-row.sc-ir-room{display:flex;align-items:center;gap:var(--wa-space-xs)}.booking-room__summary-row.sc-ir-room{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:var(--wa-space-xs, 0.25rem)}.booking-room__summary-text.sc-ir-room,.booking-room__text-reset.sc-ir-room{margin:0;padding:0}.booking-room__summary-highlight.sc-ir-room{font-weight:600}.booking-room__dates-row.sc-ir-room{display:flex;flex-wrap:wrap;gap:var(--wa-space-xs, 0.25rem);align-items:center}.booking-room__date-view.sc-ir-room{flex:1 1 150px;min-width:140px;width:fit-content}.booking-room__guest-row.sc-ir-room{display:flex;flex-wrap:wrap;align-items:center;gap:0.5rem}.booking-room__guest-name.sc-ir-room{font-weight:600}.booking-room__bed-info.sc-ir-room{color:var(--wa-color-neutral-700)}.booking-room__departure-row.sc-ir-room{display:flex;flex-wrap:wrap;align-items:center;gap:0.5rem}.booking-room__departure-label.sc-ir-room{font-weight:500}.booking-room_summary.sc-ir-room{display:grid;gap:0.5rem}.booking-room__actions.sc-ir-room{display:flex;align-items:center}.booking-room__breakdown-row.sc-ir-room{display:flex;flex-direction:column;gap:0.5rem;margin:0.5rem 0}@media (min-width: 640px){.booking-room__breakdown-row.sc-ir-room{flex-direction:row;align-items:flex-start}}.booking-room__breakdown-label-wrapper.sc-ir-room{flex:0 0 auto;padding-top:0.25rem}.booking-room__breakdown-label.sc-ir-room{margin:0;padding-right:0.5rem;font-weight:600;white-space:nowrap}.booking-room__breakdown-table.sc-ir-room{flex:1 1 auto;overflow-x:auto}.booking-room__cell.sc-ir-room{padding:0.125rem 0;line-height:1.3;white-space:nowrap}.booking-room__cell--right.sc-ir-room{text-align:right}.booking-room__cell--left.sc-ir-room{text-align:left}.booking-room__cell--pad-right.sc-ir-room{padding-right:0.5rem}.booking-room__cell--pad-left.sc-ir-room{padding-left:0.5rem}.booking-room__details.sc-ir-room,.booking-room__details.sc-ir-room::part(base),.booking-room__details.sc-ir-room::part(header),.booking-room__details.sc-ir-room::part(content){width:100%;box-sizing:border-box;padding:0}.booking-room__details.sc-ir-room::part(header){align-items:flex-start}.booking-room__price.sc-ir-room{font-weight:700;color:var(--wa-color-neutral-900);white-space:nowrap;text-align:right}";const $b=Lb;const Fb=class{constructor(t){e(this,t);this.deleteFinished=a(this,"deleteFinished",7);this.toast=a(this,"toast",7);this.pressCheckIn=a(this,"pressCheckIn",7);this.pressCheckOut=a(this,"pressCheckOut",7);this.editInitiated=a(this,"editInitiated",7);this.resetbooking=a(this,"resetbooking",7);this.openSidebar=a(this,"openSidebar",7)}get element(){return o(this)}booking;bookingIndex;isEditable;room;property_id;includeDepartureTime;mealCodeName;myRoomTypeFoodCat;currency="USD";language="en";legendData;roomsInfo;bedPreferences;departureTime;hasRoomEdit=false;hasRoomDelete=false;hasRoomAdd=false;hasCheckIn=false;hasCheckOut=false;collapsed=true;isLoading=false;modalReason=null;mainGuest;isModelOpen=false;isOpen=false;deleteFinished;toast;pressCheckIn;pressCheckOut;editInitiated;resetbooking;openSidebar;modal;bookingService=new l;dialogRef;componentWillLoad(){this.mainGuest=this.getMainGuest()}handleClick(e){let t=e.target;if(t.id=="checkin"){this.pressCheckIn.emit(this.room)}else if(t.id=="checkout"){this.pressCheckOut.emit(this.room)}}handleRoomDataChange(){this.mainGuest=this.getMainGuest()}getDateStr(e,t="default"){return e.getDate()+" "+e.toLocaleString(t,{month:"short"})+" "+e.getFullYear()}handleEditClick(){this.editInitiated.emit({event_type:"EDIT_BOOKING",ID:this.room["assigned_units_pool"],NAME:V(this.mainGuest?.first_name,this.mainGuest?.last_name),EMAIL:this.booking.guest.email,PHONE:this.booking.guest.mobile,REFERENCE_TYPE:"",FROM_DATE:this.booking.from_date,TO_DATE:this.booking.to_date,TITLE:`${g.entries.Lcz_EditBookingFor} ${this.room?.roomtype?.name} ${this.room?.unit?.name||""}`,defaultDateRange:{dateDifference:this.room.days.length,fromDate:new Date(this.room.from_date+"T00:00:00"),fromDateStr:this.getDateStr(new Date(this.room.from_date+"T00:00:00")),toDate:new Date(this.room.to_date+"T00:00:00"),toDateStr:this.getDateStr(new Date(this.room.to_date+"T00:00:00")),message:""},bed_preference:this.room.bed_preference,adult_child_offering:this.room.rateplan.selected_variation.adult_child_offering,ADULTS_COUNT:this.room.rateplan.selected_variation.adult_nbr,ARRIVAL:this.booking.arrival,ARRIVAL_TIME:this.booking.arrival.description,BOOKING_NUMBER:this.booking.booking_nbr,cancelation:this.room.rateplan.cancelation,channel_booking_nbr:this.booking.channel_booking_nbr,CHILDREN_COUNT:this.room.rateplan.selected_variation.child_nbr,COUNTRY:this.booking.guest.country_id,ENTRY_DATE:this.booking.from_date,FROM_DATE_STR:this.booking.format.from_date,guarantee:this.room.rateplan.guarantee,GUEST:this.mainGuest,IDENTIFIER:this.room.identifier,is_direct:this.booking.is_direct,IS_EDITABLE:this.booking.is_editable,NO_OF_DAYS:this.room.days.length,NOTES:this.booking.remark,origin:this.booking.origin,POOL:this.room["assigned_units_pool"],PR_ID:this.room.unit?.id,RATE:this.room.total,RATE_PLAN:this.room.rateplan.name,RATE_PLAN_ID:this.room.rateplan.id,RATE_TYPE:this.room.roomtype.id,ROOMS:this.booking.rooms,SOURCE:this.booking.source,SPLIT_BOOKING:false,STATUS:"IN-HOUSE",TO_DATE_STR:this.booking.format.to_date,TOTAL_PRICE:this.booking.total,legendData:this.legendData,roomsInfo:this.roomsInfo,roomName:this.room.unit?.name||"",PICKUP_INFO:this.booking.pickup_info,booking:this.booking,currentRoomType:this.room})}openModal(e){if(!e){return}this.modalReason=e;this.modal.openModal()}async handleModalConfirmation(e){try{e.stopImmediatePropagation();e.stopPropagation();if(!this.modalReason){return}this.isLoading=true;switch(this.modalReason){case"delete":await this.deleteRoom();break;case"checkin":case"checkout":await this.bookingService.handleExposedRoomInOut({booking_nbr:this.booking.booking_nbr,room_identifier:this.room.identifier,status:this.modalReason==="checkin"?"001":"002"});this.resetbooking.emit(null);break}}catch(e){console.log(e)}finally{this.isLoading=false;this.modalReason=null;this.modal.closeModal()}}async deleteRoom(){let e=[...this.booking.rooms];e=e.filter((e=>e.identifier!==this.room.identifier));const t={assign_units:true,check_in:true,is_pms:true,is_direct:true,booking:{booking_nbr:this.booking.booking_nbr,from_date:this.booking.from_date,to_date:this.booking.to_date,remark:this.booking.remark,property:this.booking.property,source:this.booking.source,currency:this.booking.currency,arrival:this.booking.arrival,guest:this.booking.guest,rooms:e},extras:this.booking.extras,pickup_info:this.booking.pickup_info};await this.bookingService.doReservation(t);this.deleteFinished.emit(this.room.identifier)}async updateDepartureTime(e){try{await this.bookingService.setDepartureTime({property_id:this.property_id,code:e,room_identifier:this.room.identifier});this.toast.emit({type:"success",description:"",title:"Saved Successfully",position:"top-right"})}catch(e){console.log(e)}}formatVariation({infant_nbr:e,adult_nbr:t,children_nbr:i}){const a=t>0?t:0;const r=i>0?i:0;const o=e>0?e:0;const n=a>1?g.entries.Lcz_Adults.toLowerCase():g.entries.Lcz_Adult.toLowerCase();const s=r>1?g.entries.Lcz_Children.toLowerCase():g.entries.Lcz_Child.toLowerCase();const l=o>1?g.entries.Lcz_Infants.toLowerCase():g.entries.Lcz_Infant.toLowerCase();const c=[];if(a>0){c.push(`${a} ${n}`)}if(r>0){c.push(`${r} ${s}`)}if(o>0){c.push(`${o} ${l}`)}return c.join("&nbsp&nbsp&nbsp&nbsp")}getSmokingLabel(){if(this.booking.is_direct){if(!this.room.smoking_option){return null}const e=y.roomsInfo.find((e=>e.id===this.room.roomtype.id));if(e){const t=e["smoking_option"]?.allowed_smoking_options;if(t){return t.find((e=>e.code===this.room.smoking_option))?.description}return null}return null}return this.room.ota_meta?.smoking_preferences}getBedName(){if(this.booking.is_direct){const e=this.bedPreferences.find((e=>e.CODE_NAME===this.room?.bed_preference?.toString()));if(!e){return}return e[`CODE_VALUE_${this.language}`]??e.CODE_VALUE_EN}return this.room.ota_meta?.bed_preferences}renderModalMessage(){switch(this.modalReason){case"delete":return`${g.entries["Lcz_AreYouSureDoYouWantToRemove "]} ${this.room.roomtype.name} ${this.room.unit?this.room.unit.name:""} ${g.entries.Lcz_FromThisBooking}`;case"checkin":return`Are you sure you want to Check In this unit?\n`;case"checkout":return`Are you sure you want to Check Out this unit?`;default:return""}}handleCheckIn(){const{adult_nbr:e,children_nbr:t,infant_nbr:i}=this.room.occupancy;if(this.room.sharing_persons.length<e+t+i){return this.showGuestModal()}return this.renderModalMessage()}getMainGuest(){return this.room.sharing_persons?.find((e=>e.is_main))}render(){const e=this.getBedName();return t(i,{key:"08c08bca827c9c43963ad1645e258cc5ceebd642"},t("div",{key:"f7fba8d138ee84f3ef4ccd2c7f6c415c152d1043",class:"booking-room__header-row"},t("button",{key:"484e02e6d9e934cd71d3493c72c9d13d1d8dd344","data-state":this.collapsed?"closed":"opened",class:"booking-room__collapse-btn",onClick:()=>this.collapsed=!this.collapsed},t("wa-icon",{key:"88c82cb9171d1c087b55d54ff4f743ef80ebc0a3",name:"chevron-right"})),t("div",{key:"f4c70e7992feabbe1faa41284daa34186cf84658",style:{width:"100%",cursor:"default"}},t("div",{key:"236d9e0dae8c0a161a258f540a3e84edae23db7d",class:"booking-room_summary",style:{width:"100%",cursor:"default"}},t("div",{key:"fea0b8aeeb94d02cebbeabe40a7b5bc273b493f4",class:"booking-room__summary-row"},t("p",{key:"3bd944e6ea6fe5fb3330371e436ee7db06fff2d4",class:"booking-room__summary-text"},t("span",{key:"1ad2e6c52a051ee165ea45648b6d8ed37ccb5f8c",class:"booking-room__summary-highlight"},this.myRoomTypeFoodCat||""," ")," ",this.mealCodeName," ",this.room.rateplan.is_non_refundable&&` - ${g.entries.Lcz_NonRefundable}`," "),t("div",{key:"0821dc31259fdf1c41ecad6badc3049548146593",class:"booking-room__price-row"},t("span",{key:"a79aabb3a05be521f5c1dc02296e402b34bcdbd7",class:"booking-room__price"},v(this.currency,this.room["gross_total"])),t("div",{key:"26035855cfe62c39d3b96387d5abd07a7e75d9c4",class:"booking-room__actions"},this.hasRoomEdit&&this.isEditable&&t(r,{key:"fa8cc8340d9f00b0d37959cb704b84a10135bb58"},t("wa-tooltip",{key:"132234466765cc573ffea1780c5f0c41779e3300",for:`edit-room-${this.room.identifier}`},"Edit ",this.room.roomtype.name),t("ir-custom-button",{key:"b0594b69fc8016a6b3b297f19ba84897db89d242",iconBtn:true,id:`edit-room-${this.room.identifier}`,class:"booking-room__edit-button",onClickHandler:this.handleEditClick.bind(this),variant:"neutral",size:"small",appearance:"plain"},t("wa-icon",{key:"93f1dc385e6a45b192671d5358207ce8955b32af",label:"Edit room",class:"booking-room__edit-icon",name:"edit",style:{fontSize:"1rem"}}))),this.hasRoomDelete&&this.isEditable&&t(r,{key:"6fdefc0159bf846bad0c196e51b6c6445e747396"},t("wa-tooltip",{key:"a06520a8cca51f9627104f74d5d227991cc0f023",for:`delete-room-${this.room.identifier}`},"Delete ",this.room.roomtype.name),t("ir-custom-button",{key:"00f6de38a8023e91345eeede64866be85c7f3c07",iconBtn:true,id:`delete-room-${this.room.identifier}`,class:"booking-room__delete-button",onClickHandler:this.openModal.bind(this,"delete"),variant:"danger",size:"small",appearance:"plain"},t("wa-icon",{key:"480c5312491e3a15ee2790c8a779fc287e1bd238",label:"Delete room",class:"booking-room__delete-icon",name:"trash-can",style:{fontSize:"1rem"}})))))),t("div",{key:"7a80b2298e796fa3a784b9356c2563af2b19d749",class:"booking-room__dates-row"},t("ir-date-view",{key:"edddc1d759a0f73be587050bc2060787d115acae",class:"booking-room__date-view",from_date:this.room.from_date,to_date:this.room.to_date,showDateDifference:false}),!w(this.room.roomtype.id)&&y.is_frontdesk_enabled&&this.room.unit&&t("ir-unit-tag",{key:"1fbd6763ae8112561f3ac059788d5bb0e8a6b621",unit:this.room.unit.name}),this.hasCheckIn&&t("ir-custom-button",{key:"c07176c189b1761aaa70d546bc74279dc9a6df02",onClickHandler:this.handleCheckIn.bind(this),id:"checkin",appearance:"outlined",variant:"brand"},g.entries.Lcz_CheckIn),this.hasCheckOut&&t("ir-custom-button",{key:"2d487a987c7a08b4185c197d9a930c83e8f247db",appearance:"outlined",variant:"brand",onClickHandler:()=>{this.modalReason="checkout"},id:"checkout"},g.entries.Lcz_CheckOut)),t("div",{key:"7260211a257a2bb3563b830756014fa0efad30af",class:"booking-room__guest-row"},t("p",{key:"695226067e95e2d6150789f55c244fa9bd036ad9",class:"booking-room__text-reset booking-room__guest-name"},`${this.mainGuest.first_name||""} ${this.mainGuest.last_name||""}`),this.room.rateplan.selected_variation.adult_nbr>0&&(this.room.unit?t(r,null,t("wa-tooltip",{for:`view-guest-btn-${this.room.identifier}`},"View guests"),t("ir-custom-button",{link:true,onClickHandler:()=>this.showGuestModal(),id:`view-guest-btn-${this.room.identifier}`,variant:"brand",appearance:"plain"},t("span",{innerHTML:this.formatVariation(this.room.occupancy)}))):t("span",{innerHTML:this.formatVariation(this.room.occupancy)})),e&&t("p",{key:"3e9e68ed9549b88ceb9e2e121b4ed62b1cfeb3c0",class:"booking-room__text-reset booking-room__bed-info"},"(",e,")")),this.includeDepartureTime&&t("div",{key:"e5e989a6e3212cbf7ad2cac87101046f41e802c5",class:"booking-room__departure-row"},t("p",{key:"8dc7fbf4d907048c761a6cb74ffe424ac347d1f0",class:"booking-room__text-reset booking-room__departure-label"},"Expected departure time:"),t("wa-select",{key:"76265cdfadb48b99c3739adf5c76687da1d46c10",onchange:e=>{this.updateDepartureTime(e.target.value)},style:{width:"140px"},size:"small",placeholder:"Not provided",value:this.room.departure_time?.code,defaultValue:this.room.departure_time?.code},this.departureTime?.map((e=>t("wa-option",{key:e.CODE_NAME,value:e.CODE_NAME},e[`CODE_VALUE_${this.language?.toUpperCase()}`]??e[`CODE_VALUE_EN`])))))),!this.collapsed&&t("div",{key:"a26d93fc265c9f9d942193aa92bcda0c49bf031f",class:"booking-room__details-container"},t("div",{key:"4385e6ab384963307405e0bfb2a50563c43d914f",class:"booking-room__breakdown-row"},t("div",{key:"f865967ec6b18882e37f6052a16f33a1eb0f5fe1",class:"booking-room__breakdown-label-wrapper"},t("p",{key:"d746772beb84bf86f5376fd005bc94d9029031eb",class:"booking-room__breakdown-label"},`${g.entries.Lcz_Breakdown}:`)),t("div",{key:"8933e559ef2aef2627537c807c2bd3ff7d13d84c",class:"booking-room__breakdown-table"},t("table",{key:"e1ce702557deeb7cd9eaa1821d38b2d0b1382ca8"},this.room.days.length>0&&this.room.days.map((e=>t("tr",null,t("td",{class:"booking-room__cell booking-room__cell--right booking-room__cell--pad-right"},Ye(e.date)),t("td",{class:"booking-room__cell booking-room__cell--right"},v(this.currency,e.amount)),e.cost>0&&e.cost!==null&&t("td",{class:"booking-room__cell booking-room__cell--left booking-room__cell--pad-left night-cost"},v(this.currency,e.cost))))),t("tr",{key:"6616f9ccc89ac8fc5fb85a5df0f46ddb50fba2bd",class:""},t("th",{key:"b4a35c934e4142e75b85bb1e29ead54edd30eda7",class:"booking-room__cell booking-room__cell--right booking-room__cell--pad-right subtotal_row"},g.entries.Lcz_SubTotal),t("th",{key:"222d10155ad51db3594494c458642bedae0af893",class:"booking-room__cell booking-room__cell--right subtotal_row"},v(this.currency,this.room.total)),this.room.gross_cost>0&&this.room.gross_cost!==null&&t("th",{key:"06668ff8ae37533c3d8631a5822058d05b8315d1",class:"booking-room__cell booking-room__cell--right booking-room__cell--pad-left night-cost"},v(this.currency,this.room.cost))),this.booking.is_direct?t(r,null,(()=>{const e=y.taxes.filter((e=>e.pct>0));return e.map((e=>t("tr",null,t("td",{class:"booking-room__cell booking-room__cell--right booking-room__cell--pad-right"},e.is_exlusive?g.entries.Lcz_Excluding:g.entries.Lcz_Including," ",e.name," (",e.pct,"%)"),t("td",{class:"booking-room__cell booking-room__cell--right"},v(this.currency,this.room.total*e.pct/100)),this.room.gross_cost>0&&this.room.gross_cost!==null&&t("td",{class:"booking-room__cell booking-room__cell--right booking-room__cell--pad-left night-cost"},v(this.currency,this.room.cost*e.pct/100)))))})()):t(r,null,(()=>{const e=this.room.ota_taxes.filter((e=>e.amount>0));return e.map((e=>t("tr",null,t("td",{class:"booking-room__cell booking-room__cell--right booking-room__cell--pad-right"},e.is_exlusive?g.entries.Lcz_Excluding:g.entries.Lcz_Including," ",e.name),t("td",{class:"booking-room__cell booking-room__cell--right"},e.currency.symbol,e.amount))))})())))),t("ir-label",{key:"9daa17282271a0ac81302a9ae38efeaeedb22e47",labelText:`${g.entries.Lcz_SmokingOptions}:`,display:"inline",content:this.getSmokingLabel()}),this.booking.is_direct&&t(r,{key:"ef288f47396135dd86534ccdcadd31162324ff00"},this.room.rateplan.cancelation&&t("ir-label",{key:"44c95495ff6bf40cd178009bb6443844da1b19f7",labelText:`${g.entries.Lcz_Cancellation}:`,display:"inline",content:this.room.rateplan.cancelation||"",renderContentAsHtml:true}),this.room.rateplan.guarantee&&t("ir-label",{key:"97f58b9dcd0277ccab31882baa2c9b3ca42ac2e3",labelText:`${g.entries.Lcz_Guarantee}:`,display:"inline",content:this.room.rateplan.guarantee||"",renderContentAsHtml:true})),this.room.ota_meta&&t("div",{key:"20c4821eeb72d20a4bb72f943d36a531a2028f35"},t("ir-label",{key:"08181164636f9f870875758ac3118e5e77d81f1f",labelText:`${g.entries.Lcz_MealPlan}:`,display:"inline",content:this.room.ota_meta.meal_plan}),t("ir-label",{key:"1d855d7fd78e5a05e2f659ef6e3275fe44d7a9c5",labelText:`${g.entries.Lcz_Policies}:`,display:"inline",content:this.room.ota_meta.policies}))))),t("ir-dialog",{key:"31f5e7c51ffcae7bf8faf81c177c6dc9b914b03a",label:this.modalReason==="delete"?"Alert":g.entries.Lcz_Confirmation,ref:e=>this.modal=e,onIrDialogHide:e=>{e.stopImmediatePropagation();e.stopPropagation()},onIrDialogAfterHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.modalReason=null},lightDismiss:this.modalReason==="checkin"},t("p",{key:"1ce51bd821ac7072dd8b93fc5ed9a3973cc32161"},this.renderModalMessage()),t("div",{key:"9a0c6fdc602bf26ce99e43ec8df020257f001741",slot:"footer",class:"ir-dialog__footer"},t("ir-custom-button",{key:"b8868f04d87a73dac8e7321afc48aa917dc8837f",size:"medium","data-dialog":"close",appearance:"filled",variant:"neutral"},g.entries.Lcz_Cancel),t("ir-custom-button",{key:"b00600fb6c6c843e578edbb2f96b220ebbeef8ab",size:"medium",loading:this.isLoading,onClickHandler:e=>this.handleModalConfirmation(e),variant:this.modalReason==="delete"?"danger":"brand"},this.modalReason==="delete"?g.entries.Lcz_Delete:g.entries.Lcz_Confirm))),t("ir-checkout-dialog",{key:"7bed0693b199e2ed44e9810a561edd8e12f2c546",onCheckoutDialogClosed:e=>{e.stopImmediatePropagation();e.stopPropagation();this.modalReason=null;if(e.detail.reason==="openInvoice"){this.isOpen=true}},identifier:this.room.identifier,open:this.modalReason==="checkout",booking:this.booking}),t("ir-invoice",{key:"f22532dc3b2d97e4800fbf61bbb13c522e9d52e4",onInvoiceClose:e=>{e.stopImmediatePropagation();e.stopPropagation();this.isOpen=false},open:this.isOpen,booking:this.booking,roomIdentifier:this.room.identifier}))}showGuestModal(){const{adult_nbr:e,children_nbr:t,infant_nbr:i}=this.room.occupancy;this.openSidebar.emit({type:"room-guest",payload:{roomName:this.room.unit?.name,sharing_persons:this.room.sharing_persons,totalGuests:e+t+i,checkin:this.hasCheckIn,identifier:this.room.identifier}})}static get watchers(){return{room:["handleRoomDataChange"]}}};Fb.style=$b;const Hb="";const Ub=Hb;const jb=class{constructor(t){e(this,t);this.closeModal=a(this,"closeModal",7)}open;roomName;identifier;sharedPersons=[];totalGuests=0;countries;checkIn;language="en";bookingNumber;closeModal;render(){return t("ir-drawer",{key:"84ffca3909d356dc1c46a3440700cde40d32a7e9",style:{"--ir-drawer-width":"60rem","--ir-drawer-background-color":"var(--wa-color-surface-default)","--ir-drawer-padding-left":"var(--spacing)","--ir-drawer-padding-right":"var(--spacing)","--ir-drawer-padding-top":"var(--spacing)","--ir-drawer-padding-bottom":"var(--spacing)"},label:`Room ${this.roomName}`,open:this.open,onDrawerHide:e=>{e.stopImmediatePropagation();e.stopPropagation();this.closeModal.emit()}},this.open&&t("ir-room-guests-form",{key:"fb20ff5070abd19c10cbc8cc9d62fc733b9ab73f",sharedPersons:this.sharedPersons,roomName:this.roomName,countries:this.countries,totalGuests:this.totalGuests,identifier:this.identifier,bookingNumber:this.bookingNumber,checkIn:this.checkIn,language:this.language}),t("div",{key:"5e230932dc9be07e88bc96e3448ccc2cfe6d7172",slot:"footer",class:"ir__drawer-footer"},t("ir-custom-button",{key:"a5847887f60d92e70abe8e588e742a84b874cdaa",size:"medium","data-drawer":"close",appearance:"filled",variant:"neutral"},g?.entries?.Lcz_Cancel),t("ir-custom-button",{key:"ed897c3b2d67fca4d0c9d56b045ab19edf38289c",loading:be("/Handle_Exposed_Room_Guests"),size:"medium",form:`room-guests__${this.identifier}`,type:"submit",variant:"brand"},this.checkIn?g.entries.Lcz_CheckIn:g.entries.Lcz_Save)))}};jb.style=Ub;const Vb={id:-1,full_name:"",country_id:null,dob:"",id_info:{type:{code:null,description:null},number:""},address:null,alternative_email:null,cci:null,city:null,country:undefined,country_phone_prefix:null,email:null,first_name:"",last_name:"",mobile:null,nbr_confirmed_bookings:0,notes:null,password:null,subscribe_to_news_letter:null};const Gb={mask:Date,pattern:"DD/MM/YYYY",lazy:false,min:fe("1900-01-01","YYYY-MM-DD").toDate(),max:new Date,format:e=>fe(e).format("DD/MM/YYYY"),parse:e=>fe(e,"DD/MM/YYYY").toDate(),autofix:true,placeholderChar:"_",blocks:{YYYY:{mask:$e,from:1900,to:(new Date).getFullYear(),placeholderChar:"Y"},MM:{mask:$e,from:1,to:12,placeholderChar:"M"},DD:{mask:$e,from:1,to:31,placeholderChar:"D"}}};const qb=".sc-ir-room-guests-form-h{display:block;height:100%;position:relative;text-align:start !important;padding-bottom:1rem !important}.id-select.sc-ir-room-guests-form{border-top-right-radius:0;border-bottom-right-radius:0;border-right-width:0}.sc-ir-room-guests-form-h{display:block;width:100%}.guests-labels.sc-ir-room-guests-form{display:none}.sharing_persons_label.sc-ir-room-guests-form{display:none}.loading-container.sc-ir-room-guests-form{height:100%;width:100%;display:flex;justify-content:center;align-items:center;margin:0;padding:0}.guest_document.sc-ir-room-guests-form input.sc-ir-room-guests-form{border-top-left-radius:0;border-bottom-left-radius:0}.guests-labels.sc-ir-room-guests-form *.sc-ir-room-guests-form,.sharing_persons_label.sc-ir-room-guests-form{margin-bottom:0.5rem;padding-bottom:0}.room-guest__info-container.sc-ir-room-guests-form{display:flex;flex:1 1 0%;align-items:center}.room-guest__document.sc-ir-room-guests-form::part(base):dir(ltr),.room-guest__id-info.sc-ir-room-guests-form::part(combobox):dir(rtl){border-top-left-radius:0;border-bottom-left-radius:0}.room-guest__document.sc-ir-room-guests-form{flex:1 1 0%}.room-guest__id-info.sc-ir-room-guests-form::part(combobox):dir(ltr),.room-guest__document.sc-ir-room-guests-form::part(base):dir(rtl){border-top-right-radius:0;border-bottom-right-radius:0}.room-guest__id-info.sc-ir-room-guests-form::part(combobox):dir(ltr){border-right-width:0}.room-guest__id-info.sc-ir-room-guests-form::part(combobox):dir(rtl){border-left-width:0}.room-guest__id-info[open].sc-ir-room-guests-form,.room-guest__id-info.sc-ir-room-guests-form:focus-visible,.room-guest__id-info.sc-ir-room-guests-form:focus-within{z-index:2}.room-guest__section.sc-ir-room-guests-form{display:flex;flex-direction:column;margin-bottom:1rem}.room-guest__section.sc-ir-room-guests-form p.sc-ir-room-guests-form{margin:0;padding:0}.guest_label.sc-ir-room-guests-form{width:100px;display:inline-block;position:relative;color:var(--wa-form-control-label-color);font-weight:var(--wa-form-control-label-font-weight);line-height:var(--wa-form-control-label-line-height);margin-bottom:0.5em !important}@media (min-width: 768px){.sharing_persons_label.sc-ir-room-guests-form{display:block}.guest_country_picker.sc-ir-room-guests-form{margin-bottom:3px}.room-guest__section.sc-ir-room-guests-form{display:block}.guest-grid.sc-ir-room-guests-form{display:grid;grid-template-columns:minmax(0, 120px) \n      minmax(0, 120px) \n      minmax(0, 120px) \n      minmax(0, 120px) \n      minmax(0, 1fr);gap:0.5rem;align-items:flex-start}.guest_label.sc-ir-room-guests-form,.sharing_persons_heading.sc-ir-room-guests-form,.main_guest_heading.sc-ir-room-guests-form{display:none}}";const Kb=qb;const Wb=class{constructor(t){e(this,t);this.closeModal=a(this,"closeModal",7);this.resetBookingEvt=a(this,"resetBookingEvt",7);this.updateRoomGuests=a(this,"updateRoomGuests",7)}roomName;identifier;sharedPersons=[];totalGuests=0;countries;checkIn;language="en";bookingNumber;guests=[];idTypes=[];error={};isLoading;propertyCountry;autoValidate=false;closeModal;resetBookingEvt;updateRoomGuests;bookingService=new l;componentWillLoad(){this.init();this.initializeGuests()}async init(){try{this.isLoading=true;const[e,t]=await Promise.all([this.bookingService.getUserDefaultCountry(),this.bookingService.getSetupEntriesByTableName("_ID_TYPE")]);this.idTypes=t;if(e){this.propertyCountry=this.countries.find((t=>t.id===e.COUNTRY_ID))}}catch(e){console.error(e)}finally{this.isLoading=false}}initializeGuests(){let e=[];if(this.totalGuests>this.sharedPersons.length){const t=this.totalGuests-this.sharedPersons.length;e=[...this.sharedPersons,...Array(t).fill({...Vb,id_info:{...Vb.id_info,type:{code:this.idTypes[0]?.CODE_NAME||"001",description:this.idTypes[0]?.CODE_VALUE_EN||""},number:""}})]}else{e=[...this.sharedPersons]}e=e.map((e=>({...e,dob:new Date(e.dob).getFullYear()===1900?null:e.dob})));this.guests=e.map((e=>({...e,dob:e.dob?fe(new Date(e.dob)).format("DD/MM/YYYY"):"",country_id:e.country?e.country.id:null})))}updateGuestInfo(e,t){const i=[...this.guests];let a=i[e];a={...a,...t};i[e]=a;this.guests=[...i]}async saveGuests(){try{this.error={};this.autoValidate=true;console.log({sharedPersons:this.sharedPersons,guests:this.guests});for(const e of this.guests){vh(e)}await this.bookingService.handleExposedRoomGuests({booking_nbr:this.bookingNumber,identifier:this.identifier,guests:this.guests.map((e=>{if(!e.first_name&&e.id===-1){return null}return{...e,dob:e.dob?fe(e.dob,"DD/MM/YYYY").format("YYYY-MM-DD"):null}})).filter(Boolean)});if(this.checkIn){await this.bookingService.handleExposedRoomInOut({booking_nbr:this.bookingNumber,room_identifier:this.identifier,status:"001"})}this.closeModal.emit(null);this.updateRoomGuests.emit({identifier:this.identifier,guests:this.guests});this.resetBookingEvt.emit()}catch(e){console.log(e);if(e instanceof N){let t={};e.issues.forEach((e=>{t[e.path[e.path.length-1]]=true}));this.error={...t}}}}render(){if(this.isLoading){return t("div",{class:"loading-container"},t("ir-spinner",null))}return t("form",{id:`room-guests__${this.identifier}`,class:"sheet-container",style:{minWidth:"300px"},onSubmit:e=>{e.preventDefault();this.saveGuests()}},t("section",{class:"sheet-body"},t("div",{class:""},t("div",{class:"guest-grid guests-labels"},t("p",{class:""},g.entries.Lcz_MainGuest),t("p",{class:""}),t("p",{class:" "},g.entries.Lcz_DOB),t("p",{class:""},g.entries.Lcz_Nationality),t("p",{class:" "},g.entries.Lcz_Documents)),t("h5",{class:"main_guest_heading"},g.entries.Lcz_MainGuest),this.guests.map(((e,i)=>{let a=true;try{vh(e)}catch(e){a=false}return t(r,null,i===1&&t("div",{class:"d-flex mx-0 px-0"},t("h5",{class:"mx-0 px-0 sharing_persons_heading"},g.entries.Lcz_PersonsSharingRoom),t("p",{class:"mx-0 px-0 sharing_persons_label"},g.entries.Lcz_PersonsSharingRoom)),t("div",{key:i,class:"guest-grid"},t("div",{class:"room-guest__section"},t("label",{htmlFor:`first_name_${i}`,class:"guest_label"},"First name"),t("ir-validator",{class:"flex-grow-1",schema:yh.shape.first_name},t("ir-custom-input",{"aria-invalid":String(!!this.error["first_name"]&&!a),size:"small",id:`first_name_${i}`,placeholder:"First name","onText-change":e=>this.updateGuestInfo(i,{first_name:e.detail}),value:e.first_name,maxlength:40}))),t("div",{class:"room-guest__section"},t("label",{class:"guest_label"},"Last name"),t("ir-validator",{class:"flex-grow-1",schema:yh.shape.last_name},t("ir-custom-input",{"aria-invalid":String(!!this.error["last_name"]&&!a),size:"small",id:`last_name_${i}`,placeholder:"Last name","onText-change":e=>this.updateGuestInfo(i,{first_name:e.detail}),value:e.last_name,maxlength:40}))),t("div",{class:"room-guest__section"},t("p",{class:"guest_label"},g.entries.Lcz_DOB),t("ir-validator",{class:"flex-grow-1",schema:yh.shape.dob},t("ir-custom-input",{"aria-invalid":String(!!this.error["dob"]&&!a),id:`dob_${i}`,mask:Gb,size:"small",placeholder:"","onText-change":e=>{this.updateGuestInfo(i,{dob:e.detail})},value:e.dob}))),t("div",{class:"room-guest__section"},t("p",{class:"guest_label"},g.entries.Lcz_Nationality),t("div",{class:"flex-grow-1"},t("ir-country-picker",{size:"small",variant:"modern","aria-invalid":String(!!this.error["country_id"]&&!e.country_id),propertyCountry:this.propertyCountry,id:`{locales.entries.Lcz_Nationality}_${i}`,error:!!this.error["country_id"]&&!e.country_id,country:this.countries?.find((t=>t.id?.toString()===e.country?.id?.toString())),onCountryChange:e=>this.updateGuestInfo(i,{country_id:e.detail?.id?.toString()??null,country:e.detail}),countries:this.countries}))),t("div",{class:"room-guest__section"},t("p",{class:"guest_label"},g.entries.Lcz_Documents),t("div",{class:"room-guest__info-container flex-grow-1"},t("wa-select",{class:"room-guest__id-info",defaultValue:this.idTypes[0]?.CODE_NAME,value:e.id_info?.type?.code,onchange:e=>{this.updateGuestInfo(i,{id_info:{...this.guests[i].id_info,type:{code:e.target.value,description:""}}})},size:"small"},this.idTypes?.map((e=>{const i=e[`CODE_VALUE_${this.language.toUpperCase()}`]??e[`CODE_VALUE_EN`];return t("wa-option",{value:e["CODE_NAME"],label:i},i)}))),t("wa-input",{size:"small","aria-invalid":String(!!this.error["number"]&&!a),class:"room-guest__document",defaultValue:e?.id_info?.number,value:e?.id_info?.number,maxlength:18,placeholder:"12345",onchange:e=>this.updateGuestInfo(i,{id_info:{...this.guests[i].id_info,number:e.target.value}})})))))})))))}};Wb.style=Kb;const Xb=".sc-ir-room-nights-h{display:block;box-sizing:border-box;margin:0;position:relative}.loading-container.sc-ir-room-nights{position:relative;height:100%;width:100%;display:flex;align-items:center;justify-content:center}.close-icon.sc-ir-room-nights{position:absolute;top:18px;right:33px;outline:none}.close.sc-ir-room-nights{float:right;font-size:1.5rem;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:0.5;padding:0;background-color:transparent;border:0;appearance:none}.card.sc-ir-room-nights{top:0;z-index:1000}.card-title.sc-ir-room-nights{border-bottom:1px solid #e4e5ec;width:100%}.irfontgreen.sc-ir-room-nights{color:#0e930e}.currency.sc-ir-room-nights{display:block;position:absolute;margin:0;padding:0;height:auto;left:10px}.rate-input.sc-ir-room-nights{font-size:14px;line-height:0;padding:0;height:0;border-left:0;border-radius:0.25rem !important}.rate-input-container.sc-ir-room-nights{display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;flex:1}.new-currency.sc-ir-room-nights{color:#3b4781;border:1px solid #cacfe7;font-size:0.975rem;height:2rem;background:rgb(255, 255, 255);padding-right:0 !important;border-right:0;border-top-right-radius:0;border-bottom-right-radius:0;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.input-group-prepend.sc-ir-room-nights span[data-state='focus'].sc-ir-room-nights{border-color:var(--blue)}.input-group-prepend.sc-ir-room-nights span[data-disabled].sc-ir-room-nights{background-color:#eceff1;border-color:rgba(118, 118, 118, 0.3)}.rateInputBorder.sc-ir-room-nights{padding-left:5px !important;padding-right:5px !important;border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}";const Jb=Xb;const Qb=".sc-ir-room-nights-h{height:100%}.sheet-container.sc-ir-room-nights{display:flex !important;flex-direction:column !important;background:white;height:100vh;gap:1rem;z-index:1000}.sheet-container.sc-ir-room-nights{height:-webkit-fill-available;height:100vh;height:100dvh}.sheet-footer.sc-ir-room-nights{position:sticky;bottom:0;z-index:20;background:white;border-top:1px solid #e4e5ec;display:flex;flex-direction:column;padding:1rem;gap:0.5rem}.sheet-header.sc-ir-room-nights{position:sticky;top:0;z-index:10;background:white}.sheet-body.sc-ir-room-nights{flex:1 1 0%}@media (min-width: 768px){.sheet-footer.sc-ir-room-nights{flex-direction:row;align-items:center}}";const Zb=Qb;const eg=class{constructor(t){e(this,t);this.closeRoomNightsDialog=a(this,"closeRoomNightsDialog",7)}bookingNumber;propertyId;language;identifier;toDate;fromDate;pool;ticket;defaultDates;bookingEvent;selectedRoom;rates=[];isLoading=false;initialLoading=false;inventory=null;isEndDateBeforeFromDate=false;defaultTotalNights=0;isInputFocused=-1;dates={from_date:new Date,to_date:new Date};closeRoomNightsDialog;bookingService=new l;componentWillLoad(){this.dates={from_date:new Date(this.fromDate),to_date:new Date(this.toDate)};this.init()}isButtonDisabled(){return this.isLoading||this.rates.some((e=>e.amount===-1))||this.inventory===0||this.inventory===null}async init(){try{const{from_date:e}=this.defaultDates;if(fe(e,"YYYY-MM-DD").isBefore(fe(this.fromDate,"YYYY-MM-DD"))){this.dates.from_date=new Date(e)}else{this.dates.from_date=new Date(this.fromDate)}this.dates.to_date=new Date(this.toDate);this.bookingEvent=await this.bookingService.getExposedBooking(this.bookingNumber,this.language);if(this.bookingEvent){const e=this.bookingEvent.rooms.filter((e=>e.identifier===this.identifier));this.selectedRoom=e[0];const t=this.selectedRoom?.days[this.selectedRoom.days.length-1];if(fe(this.toDate).add(-1,"days").isSame(fe(t.date))){console.log("here1");const e=await this.fetchBookingAvailability(this.fromDate,this.selectedRoom.days[0].date,this.selectedRoom.rateplan.id);const t=le(this.selectedRoom.days[0].date,this.fromDate);this.isEndDateBeforeFromDate=true;this.rates=[...t.map((i=>({amount:e/t.length,date:i,cost:null}))),...this.selectedRoom.days];this.defaultTotalNights=this.rates.length-this.selectedRoom.days.length}else{console.log("here2");console.log(t);const e=await this.fetchBookingAvailability(this.bookingEvent.to_date,fe(this.toDate,"YYYY-MM-DD").format("YYYY-MM-DD"),this.selectedRoom.rateplan.id);const i=le(t.date,this.toDate);this.rates=[...this.selectedRoom.days,...i.map((t=>({amount:e/i.length,date:t,cost:null})))]}}}catch(e){console.log(e)}}handleInput(e,t){let i=e;let a=[...this.rates];i=i.replace(/[^0-9.]/g,"");if(i===""){a[t].amount=-1}else{if(!isNaN(Number(i))){a[t].amount=Number(i)}}this.rates=a}async fetchBookingAvailability(e,t,i){try{this.initialLoading=true;const a=await this.bookingService.getBookingAvailability({from_date:e,to_date:t,propertyid:this.propertyId,adultChildCount:{adult:this.selectedRoom.rateplan.selected_variation.adult_nbr,child:this.selectedRoom.rateplan.selected_variation.child_nbr},language:this.language,currency:this.bookingEvent.currency,room_type_ids:[this.selectedRoom.roomtype.id],rate_plan_ids:[i]});console.log(a[0],i);this.inventory=a[0].inventory;const r=a[0].rateplans.find((e=>e.id===i));if(!r||!r.variations){this.inventory=null;return null}const o=r.variations?.find((e=>e.adult_nbr===this.selectedRoom.rateplan.selected_variation.adult_nbr&&e.child_nbr===this.selectedRoom.rateplan.selected_variation.child_nbr));if(!o){return null}return o.discounted_gross_amount}catch(e){console.error(e)}finally{this.initialLoading=false}}renderInputField(e,i,a){return t("div",{class:"col-3 ml-1 position-relative  m-0 p-0 rate-input-container"},t("ir-price-input",{value:a.amount>0?a.amount.toString():"",disabled:this.inventory===0||this.inventory===null,currency:i,"aria-label":"rate","aria-describedby":"rate cost",onTextChange:t=>this.handleInput(t.detail,e)}))}renderReadOnlyField(e,i){return t("p",{class:"col-9 ml-1 m-0 p-0"},`${e}${Number(i.amount).toFixed(2)}`)}renderRateFields(e,t,i){if(this.isEndDateBeforeFromDate){if(e<this.defaultTotalNights){return this.renderInputField(e,t,i)}else{return this.renderReadOnlyField(t,i)}}else{return e<this.selectedRoom.days.length?this.renderReadOnlyField(t,i):this.renderInputField(e,t,i)}}renderDates(){const e=this.bookingEvent.currency.symbol;return t("div",{class:"mt-2 m-0"},this.rates?.map(((i,a)=>t("div",{class:"row m-0 mt-1 align-items-center"},t("p",{class:"col-2 m-0 p-0"},ce(i.date)),this.renderRateFields(a,e,i)))))}async handleRoomConfirmation(){try{this.isLoading=true;let e=[...this.bookingEvent.rooms];let t=e.findIndex((e=>e.identifier===this.identifier));if(t===-1){throw new Error("Invalid Pool")}e[t]={...e[t],days:this.rates,to_date:fe(this.dates.to_date).format("YYYY-MM-DD"),from_date:fe(this.dates.from_date).format("YYYY-MM-DD")};const i={assign_units:true,check_in:true,is_pms:true,is_direct:true,pickup_info:this.bookingEvent.pickup_info,extra_services:this.bookingEvent.extra_services,booking:{booking_nbr:this.bookingNumber,from_date:fe(this.dates.from_date).format("YYYY-MM-DD"),to_date:fe(this.dates.to_date).format("YYYY-MM-DD"),remark:this.bookingEvent.remark,property:this.bookingEvent.property,source:this.bookingEvent.source,currency:this.bookingEvent.currency,arrival:this.bookingEvent.arrival,guest:this.bookingEvent.guest,rooms:e}};await this.bookingService.doReservation(i);this.closeRoomNightsDialog.emit({type:"confirm",pool:this.pool})}catch(e){}finally{this.isLoading=false}}render(){if(!this.bookingEvent){return t("div",{class:"loading-container"},t("ir-loading-screen",null))}return t("div",{class:"sheet-container"},t("ir-title",{class:"p-1 sheet-header",onCloseSideBar:()=>this.closeRoomNightsDialog.emit({type:"cancel",pool:this.pool}),label:`${g.entries.Lcz_AddingRoomNightsTo} ${this.selectedRoom?.roomtype?.name} ${(this.selectedRoom?.unit).name}`,displayContext:"sidebar"}),t("section",{class:"text-left px-1 pt-0 sheet-body"},t("p",{class:"font-medium-1"},`${g.entries.Lcz_Booking}#`," ",this.bookingNumber),this.initialLoading?t("p",{class:"mt-2 text-secondary"},g.entries["Lcz_CheckingRoomAvailability "]):t(r,null,t("p",{class:"font-weight-bold font-medium-1"},`${de(fe(this.dates.from_date).format("YYYY-MM-DD"),"YYYY-MM-DD")} - ${de(fe(this.dates.to_date).format("YYYY-MM-DD"),"YYYY-MM-DD")}`),t("p",{class:"font-medium-1 mb-0"},`${this.selectedRoom.rateplan.name}`," ",this.selectedRoom.rateplan.is_non_refundable&&t("span",{class:"irfontgreen"},g.entries.Lcz_NonRefundable)),(this.inventory===0||this.inventory===null)&&t("p",{class:"font-medium-1 text danger"},g.entries.Lcz_NoAvailabilityForAdditionalNights),this.selectedRoom.rateplan.custom_text&&t("p",{class:"text-secondary mt-0"},this.selectedRoom.rateplan.custom_text),this.renderDates())),t("section",{class:"sheet-footer"},t("ir-button",{btn_color:"secondary",btn_disabled:this.isLoading,text:g?.entries.Lcz_Cancel,class:"full-width",btn_styles:"justify-content-center",onClickHandler:()=>this.closeRoomNightsDialog.emit({type:"cancel",pool:this.pool})}),this.inventory>0&&this.inventory!==null&&t("ir-button",{isLoading:this.isLoading,text:g?.entries.Lcz_Confirm,btn_disabled:this.isButtonDisabled(),class:"full-width",btn_styles:"justify-content-center",onClickHandler:this.handleRoomConfirmation.bind(this)})))}};eg.style=Jb+Zb;const tg=".sc-ir-sales-by-channel-h{display:block}";const ig=tg;const ag=class{constructor(t){e(this,t)}language="";ticket="";propertyid;p;mode;isLoading=null;isPageLoading=true;salesData;channelSalesFilters;allowedProperties=[];propertyID;token=new me;roomService=new we;propertyService=new Tt;baseFilters={FROM_DATE:fe().add(-7,"days").format("YYYY-MM-DD"),TO_DATE:fe().format("YYYY-MM-DD"),BOOK_CASE:"001",WINDOW:7,include_previous_year:false,is_export_to_excel:false};componentWillLoad(){this.channelSalesFilters=this.baseFilters;if(this.ticket){this.token.setToken(this.ticket);this.initializeApp()}}ticketChanged(e,t){if(e===t){return}this.token.setToken(this.ticket);this.initializeApp()}async initializeApp(){try{if(!this.mode){throw new Error("Missing required 'mode'. Please set it to either 'property' or 'mpo'.")}if(!this.propertyid&&this.mode==="property"&&!this.p){throw new Error("Missing Property ID or aname")}if(this.mode==="property"){const e=await this.propertyService.getExposedProperty({id:Number(this.propertyid??0),aname:this.p,language:this.language,is_backend:true});this.propertyID=e.My_Result.id}const e=[,this.roomService.fetchLanguage(this.language)];if(this.mode==="mpo"){e.unshift(this.propertyService.getExposedAllowedProperties());const[t]=await Promise.all(e);this.allowedProperties=[...t]}this.baseFilters={...this.baseFilters,LIST_AC_ID:this.allowedProperties?.map((e=>e.id))};this.channelSalesFilters={...this.baseFilters};await this.getChannelSales()}catch(e){console.log(e)}finally{this.isPageLoading=false}}async getChannelSales(e=false){try{const{include_previous_year:t,LIST_AC_ID:i,...a}=this.channelSalesFilters;this.isLoading=e?"export":"filter";const r=await this.propertyService.getChannelSales({is_export_to_excel:e,...a,AC_ID:this.propertyID?this.propertyID.toString():undefined,...a,LIST_AC_ID:this.propertyID?null:i});const o=!e&&t;let n=[];if(o){const e=await this.propertyService.getChannelSales({AC_ID:this.propertyID?this.propertyID.toString():undefined,...a,LIST_AC_ID:this.propertyID?null:i,FROM_DATE:fe(a.FROM_DATE).subtract(1,"year").format("YYYY-MM-DD"),TO_DATE:fe(a.TO_DATE).subtract(1,"year").format("YYYY-MM-DD")});n=r.map((t=>{const i=e.find((e=>e.SOURCE.toLowerCase()===t.SOURCE.toLowerCase()));return{...t,last_year:i?i:null}}))}else{n=r.map((e=>({...e,last_year:null})))}const s=e=>{if(!e||e.length===0)return e;const t=e=>e?.currency??null;const i=e=>{const i=e.SOURCE.toString().toLowerCase().trim();const a=t(e);return`${i}__${a??"null"}`};const a=(e,t)=>(e??0)+(t??0);const r=(e,t)=>{if(!t)return e;if(!e)return{...t};return{NIGHTS:a(e.NIGHTS,t.NIGHTS),PCT:a(e.PCT,t.PCT),REVENUE:a(e.REVENUE,t.REVENUE),SOURCE:e.SOURCE,PROPERTY_ID:e.PROPERTY_ID,PROPERTY_NAME:e.PROPERTY_NAME,currency:e.currency}};const o=new Map;for(const t of e){const e=i(t);const n=o.get(e);if(!n){o.set(e,{...t})}else{const i={...n,NIGHTS:a(n.NIGHTS,t.NIGHTS),PCT:0,REVENUE:a(n.REVENUE,t.REVENUE),last_year:r(n.last_year,t.last_year)};o.set(e,i)}}const n=Array.from(o.values());const s=n.reduce(((e,t)=>e+(t.REVENUE??0)),0);if(s>0){for(const e of n){e.PCT=e.REVENUE/s*100;if(e.last_year){const t=n.reduce(((e,t)=>e+(t.last_year?.REVENUE??0)),0);if(t>0){e.last_year.PCT=e.last_year.REVENUE/t*100}}}}return n};this.salesData=[...s(n)]}catch(e){console.error("Failed to fetch sales data:",e)}finally{this.isLoading=null}}render(){if(this.isPageLoading){return t("ir-loading-screen",null)}return t(i,null,t("ir-toast",null),t("ir-interceptor",null),t("section",{class:"p-2 d-flex flex-column",style:{gap:"1rem"}},t("div",{class:"d-flex align-items-center justify-content-between"},t("h3",{class:"mb-1 mb-md-0"},"Sales by Channel"),t("ir-button",{size:"sm",btn_color:"outline",isLoading:this.isLoading==="export",text:g.entries.Lcz_Export,onClickHandler:async e=>{e.stopImmediatePropagation();e.stopPropagation();await this.getChannelSales(true)},btnStyle:{height:"100%"},iconPosition:"right",icon_name:"file",icon_style:{"--icon-size":"14px"}})),t("div",{class:"d-flex flex-column flex-lg-row mt-1 ",style:{gap:"1rem"}},t("ir-sales-by-channel-filters",{isLoading:this.isLoading==="filter",onApplyFilters:e=>{e.stopImmediatePropagation();e.stopPropagation();this.channelSalesFilters={...e.detail};this.getChannelSales()},allowedProperties:this.allowedProperties,baseFilters:this.baseFilters}),t("ir-sales-by-channel-table",{mode:this.mode,allowedProperties:this.allowedProperties,class:"card mb-0",records:this.salesData}))))}static get watchers(){return{ticket:["ticketChanged"]}}};ag.style=ig;const rg=".sc-ir-sales-by-channel-filters-h{display:block}";const og=rg;const ng=class{constructor(t){e(this,t);this.applyFilters=a(this,"applyFilters",7)}isLoading;baseFilters;allowedProperties;filters;window;applyFilters;componentWillLoad(){this.filters={...this.baseFilters};this.window=this.baseFilters.WINDOW}updateFilter(e){this.filters={...this.filters,...e}}render(){console.log(this.filters);return t("ir-filters-panel",{key:"5ade8bc2086e0256eb30e457940607bf20737d25",isApplyLoading:this.isLoading,onIrFilterApply:()=>{this.applyFilters.emit(this.filters)},onIrFilterReset:()=>{this.filters={...this.baseFilters};this.applyFilters.emit(this.filters)}},t("fieldset",{key:"9f166980633091366b0d4d909bcfedaa3aebb9bc",class:"pt-1 filter-group"},t("label",{key:"ee56035df1f70436ba71b90268fd6440f0ccd643",htmlFor:"rooms",class:"m-0 px-0",style:{paddingBottom:"0.25rem"}},"Rooms"),t("ir-select",{key:"185384d4defcd700fcec7d81c430b72c75818ca6",selectedValue:this.filters?.BOOK_CASE,selectId:"rooms",showFirstOption:false,onSelectChange:e=>this.updateFilter({BOOK_CASE:e.detail}),data:[{text:"Booked",value:"001"},{text:"Stayed",value:"002"}]})),this.allowedProperties.length>1&&t("fieldset",{key:"68187410c1f3b481435c22a0f024419b22b65dcd",class:"filter-group"},t("label",{key:"56069a2e3a4f3ea11b6d8e1c6c4e4c1f8641779c",htmlFor:"rooms",class:"m-0 px-0",style:{paddingBottom:"0.25rem"}},"Properties"),t("ir-m-combobox",{key:"ebe882b32c3cf41955ee697d2add49b654c5a7cb",defaultOption:this.filters?.LIST_AC_ID?.length===this.allowedProperties?.length?"all":this.filters?.LIST_AC_ID[0]?.toString(),onOptionChange:e=>{const t=e.detail.value;if(t==="all"){this.updateFilter({LIST_AC_ID:this.allowedProperties.map((e=>e.id))})}else this.updateFilter({LIST_AC_ID:this.allowedProperties.filter((e=>e.id===Number(t))).map((e=>e.id))})},options:[{label:"All",value:"all"},...this.allowedProperties.map((e=>({label:e.name,value:e.id.toString()})))]})),t("fieldset",{key:"c66e9403e49f35f8baf4af17e660dc857fae7dca",class:"filter-group"},t("label",{key:"b6090e103c3ae3d5e0767f93993236c81f5fbd9a",htmlFor:"period",class:"px-0 m-0",style:{paddingBottom:"0.25rem"}},"Selected period"),t("div",{key:"614903c15629fa6112dfb4d4d46c8d78c637cd31",class:"d-flex flex-column date-filter-group",style:{gap:"0.5rem"}},t("ir-select",{key:"db9c6706c256a6afa89307dca485d6360fccacdb",selectedValue:this.window?.toString(),onSelectChange:e=>{const t=Number(e.detail);const i=fe();this.updateFilter({WINDOW:t,TO_DATE:i.format("YYYY-MM-DD"),FROM_DATE:i.add(-t,"days").format("YYYY-MM-DD")});this.window=e.detail},selectId:"period",firstOption:"...",data:[{text:"For the past 7 days",value:"7"},{text:"For the past 14 days",value:"14"},{text:"For the past 30 days",value:"30"},{text:"For the past 60 days",value:"60"},{text:"For the past 90 days",value:"90"},{text:"For the past 365 days",value:"365"}]}),t("p",{key:"a66d75d21f24f9c4dbe87d88260eba9291c4b946",class:"m-0 p-0 text-center"},"Or"),t("ir-range-picker",{key:"d3c3f668e253ff8ac3e7fa82cd98de1ff45868ff",onDateRangeChanged:e=>{e.stopImmediatePropagation();e.stopPropagation();const{fromDate:t,toDate:i,wasFocused:a}=e.detail;this.updateFilter({FROM_DATE:t.format("YYYY-MM-DD"),TO_DATE:i.format("YYYY-MM-DD")});if(a)this.window=null},fromDate:fe(this.filters.FROM_DATE,"YYYY-MM-DD"),toDate:fe(this.filters.TO_DATE,"YYYY-MM-DD"),maxDate:fe().format("YYYY-MM-DD"),withOverlay:false}))),t("div",{key:"2e3554765e137e5a2be3eb54d9827bb5637014e5",class:"d-flex align-items-center mt-1 mb-2 compare-year-toggle",style:{gap:"0.5rem"}},t("label",{key:"34b0c8ebfd42d3f743e7b3c6f5a95ee8e4a3ac05",htmlFor:"compare-prev-year",style:{paddingBottom:"0.25rem"}},"Compare with previous year"),t("ir-checkbox",{key:"9bf1ee3832f3f21ff289fc5e7158cf0cb92ae68e",checked:this.filters?.include_previous_year,checkboxId:"compare-prev-year",onCheckChange:e=>{e.stopImmediatePropagation();e.stopPropagation();this.updateFilter({include_previous_year:e.detail})}})))}};ng.style=og;const sg=".sc-ir-sales-by-channel-table-h{display:block;width:100%}.legend.sc-ir-sales-by-channel-table{height:12px;aspect-ratio:1;background:#000;border-radius:4px}.secondary.sc-ir-sales-by-channel-table{background:#6692b3}.channel-cell.sc-ir-sales-by-channel-table{width:100%}.task-row.sc-ir-sales-by-channel-table,.table.sc-ir-sales-by-channel-table th.sc-ir-sales-by-channel-table,.table.sc-ir-sales-by-channel-table td.sc-ir-sales-by-channel-table{white-space:nowrap;max-width:max-content !important;padding:0.25rem 1rem !important}.sales-by-channel-table__progress-col.sc-ir-sales-by-channel-table{width:50%}.sales-by-channel-table__progress-col.single.sc-ir-sales-by-channel-table{display:none !important}@media (min-width: 768px){.sales-by-channel-table__progress-col.single.sc-ir-sales-by-channel-table{display:table-cell !important}}.outer-container.sc-ir-sales-by-channel-table{padding:1rem;box-sizing:border-box}.table.sc-ir-sales-by-channel-table tfoot.sc-ir-sales-by-channel-table td.sc-ir-sales-by-channel-table{border-bottom:0}.flag.sc-ir-sales-by-channel-table{height:16px;width:23px;border-radius:3px}";const lg=sg;const cg=".ir-table-row.sc-ir-sales-by-channel-table td.sc-ir-sales-by-channel-table{padding:0.5rem 1rem !important;text-align:left;z-index:2;background-color:var(--wa-color-surface-default);white-space:nowrap;color:var(--wa-color-text-normal);box-sizing:border-box}.table--container.sc-ir-sales-by-channel-table{flex:1 1 0%}.table--container.sc-ir-sales-by-channel-table{overflow-x:auto}.table.sc-ir-sales-by-channel-table td.sc-ir-sales-by-channel-table{border-top:0;border-bottom:1px solid var(--wa-color-neutral-border-quiet, #abaeb9);transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.table.sc-ir-sales-by-channel-table tbody.sc-ir-sales-by-channel-table tr.sc-ir-sales-by-channel-table:last-child>td.sc-ir-sales-by-channel-table{border-bottom:0 !important}.table.sc-ir-sales-by-channel-table thead.sc-ir-sales-by-channel-table th.sc-ir-sales-by-channel-table{border:none !important;background:#ececec;background:color-mix(in oklab, var(--wa-color-neutral-fill-quiet, #f1f2f3) 60%, transparent);color:#374151;padding:0.5rem 1rem !important;text-align:left}.data-table.sc-ir-sales-by-channel-table thead.sc-ir-sales-by-channel-table th.sc-ir-sales-by-channel-table{box-sizing:border-box;background:var(--wa-color-surface-default) !important;padding-top:0.5rem !important;padding-bottom:0.5rem !important;border-bottom:1px solid var(--wa-color-neutral-90) !important;color:var(--wa-color-text-normal)}.data-table.sc-ir-sales-by-channel-table .empty-row.sc-ir-sales-by-channel-table{height:50vh !important;text-align:center;color:var(--wa-color-gray-60)}.data-table--pagination.sc-ir-sales-by-channel-table{padding:0.5rem 1rem;position:sticky;bottom:0;background:var(--wa-color-surface-default);border-top:1px solid var(--wa-color-neutral-90)}.selected.sc-ir-sales-by-channel-table td.sc-ir-sales-by-channel-table{background:#e3f3fa !important}.selected.sc-ir-sales-by-channel-table td.sc-ir-sales-by-channel-table{color:var(--gray-dark) !important;transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.sortable.sc-ir-sales-by-channel-table,.ir-table-row.sc-ir-sales-by-channel-table{transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.sortable.sc-ir-sales-by-channel-table{text-transform:capitalize}.sortable.sc-ir-sales-by-channel-table:hover{color:#212529;background-color:#e2e8f0 !important;border-color:#dae0e5;cursor:pointer}.ir-table-row.sc-ir-sales-by-channel-table:hover td.sc-ir-sales-by-channel-table{background:#e2e6ea3f !important;background:var(--wa-color-neutral-fill-quiet, #f1f2f3) !important}.sortable.sc-ir-sales-by-channel-table:active{color:#212529;background-color:#e2e8f0;border-color:#d3d9df}.sortable.sc-ir-sales-by-channel-table svg.sc-ir-sales-by-channel-table{color:var(--blue)}.sticky-column.sc-ir-sales-by-channel-table{position:sticky !important;right:0;background-color:white}";const dg=cg;const hg=class{constructor(t){e(this,t)}records;allowedProperties;mode;visibleCount=10;properties=new Map;componentWillLoad(){this.setupProperties()}handlePropertiesChange(){this.setupProperties()}setupProperties(){const e=new Map;for(const t of this.allowedProperties){e.set(t.id,t.name)}this.properties=new Map(e)}handleLoadMore=()=>{this.visibleCount=Math.min(this.visibleCount+10,this.records.length)};render(){const e=this.records.slice(0,this.visibleCount);const i=this.mode==="property";return t("div",{key:"1a0fb55342cf1650e5024196e219124eb4d9973d",class:"table-container h-100 p-1 m-0 mb-2 table-responsive"},t("table",{key:"a3f1c16851ea90b55a9aa8d37cf24a765b1a8c43",class:"table","data-testid":"hk_tasks_table"},t("thead",{key:"2ffb3f2add4b8e009396dace3a46dc117e45b4f9",class:"table-header"},t("tr",{key:"107be02e807f79a53732aa27009891b6f0aaa43c"},t("th",{key:"24b1a3db3572d9628359ef6edf10d55ceba817be",class:"text-left"},"Channel"),t("th",{key:"e513aecc19c0f8d096bd009c52e8f5ce72503680",class:"text-center"},"Room nights"),t("th",{key:"288a75736559cfa05bf20a9dd95e9f12bd504ed0",class:"text-right"},"Room Revenue"),t("th",{key:"093adc912de17ac6f34220806c0145a8c776122b",class:`sales-by-channel-table__progress-col ${!i?"single":""}`}))),t("tbody",{key:"7e84b4b1d2e9d48813eabf600eb5af17f4de0002"},this.records.length===0&&t("tr",{key:"61532eb455c7099e84c0324adec921fce61e98f0"},t("td",{key:"47a7fb9be743638feaf13c6cc6db564931a4bcd2",colSpan:5,style:{height:"300px"}},"No data found.")),e.map((e=>{const a=`${parseFloat(e.PCT.toString()).toFixed(2)}%`;const r=e.last_year?`${parseFloat(e.last_year.PCT.toString()).toFixed(2)}%`:null;return t("tr",{"data-testid":`record_row`,class:{"task-table-row ir-table-row":true}},t("td",{class:"text-left"},t("div",{class:"d-flex flex-column",style:{gap:"0.25rem"}},t("p",{class:`p-0 m-0 ${e.last_year?.SOURCE?"font-weight-bold":""}`},e.SOURCE),e.last_year?.SOURCE&&t("p",{class:"p-0 mx-0",style:{marginTop:"0.25rem",marginBottom:"0"}},e.last_year.SOURCE))),t("td",{class:"text-center"},t("div",{class:"d-flex flex-column",style:{gap:"0.25rem"}},t("p",{class:`p-0 m-0 ${e.last_year?.NIGHTS?"font-weight-bold":""}`},e.NIGHTS),e.last_year?.NIGHTS&&t("p",{class:"p-0 mx-0",style:{marginTop:"0.25rem",marginBottom:"0"}},e.last_year.NIGHTS))),t("td",{class:"text-right "},t("div",{class:"d-flex flex-column",style:{gap:"0.25rem"}},t("p",{class:`p-0 m-0 ${e.last_year?.REVENUE?"font-weight-bold":""}`},v(e.currency,e.REVENUE)),e.last_year?.REVENUE&&t("p",{class:"p-0 mx-0",style:{marginTop:"0.25rem",marginBottom:"0"}},v(e.currency,e.last_year.REVENUE)))),t("td",{class:`sales-by-channel-table__progress-col ${!i?"single":""}`},i&&t("div",{class:"d-flex flex-column",style:{gap:"0.5rem"}},t("ir-progress-indicator",{percentage:a}),e.last_year?.PCT&&t("ir-progress-indicator",{percentage:r,color:"secondary"}))))}))),i&&t("tfoot",{key:"296072f0e0ac39c2f0da1da385908fa938e377ef"},t("tr",{key:"75cf5d9dabd8f28246d03ecdfc85df2321a58785",style:{fontSize:"12px"}},t("td",{key:"9aec1f8b9fe0946c999d42e47ca76a05e8f3224f",colSpan:4},t("div",{key:"525124e752f42f01446b5874eec3f97dc110c872",class:"d-flex align-items-center justify-content-end",style:{gap:"1rem",paddingTop:"0.5rem"}},t("div",{key:"bc1124c8d0941d53e927430da6b2560f97dff305",class:"d-flex align-items-center",style:{gap:"0.5rem"}},t("div",{key:"81d2b677d4f25e63c51103f0265745d4183b785d",class:"legend bg-primary"}),t("p",{key:"10eec27bb2b75d72cc0aee6179db793300af151e",class:"p-0 m-0"},"Selected period ")),t("div",{key:"aba3033f9d159e3cb9ec68f03822856b70be8069",class:"d-flex align-items-center",style:{gap:"0.5rem"}},t("div",{key:"035dd4916a9ffecb17738aed8fd7dff5415c0b61",class:"legend secondary"}),t("p",{key:"a53278fdd4c285504efa206eeb5bb1078df8a1f1",class:"p-0 m-0"},"Previous year"))))))),this.visibleCount<this.records.length&&t("div",{key:"88ca82b140a89f151a47ecafb4e804c909a51ae2",class:"d-flex mx-auto"},t("ir-button",{key:"a1995a04700af3484397941413e604f024338662",class:"mx-auto",size:"sm",text:"Load More",onClickHandler:this.handleLoadMore})))}static get watchers(){return{allowedProperties:["handlePropertiesChange"]}}};hg.style=lg+dg;const ug=".sc-ir-sales-by-country-h{display:block}";const pg=ug;const fg=class{constructor(t){e(this,t)}language="";ticket="";propertyid;p;isLoading=null;isPageLoading=true;property_id;salesData;salesFilters;countries=new Map;token=new me;roomService=new we;propertyService=new Tt;bookingService=new l;baseFilters={FROM_DATE:fe().add(-7,"days").format("YYYY-MM-DD"),TO_DATE:fe().format("YYYY-MM-DD"),BOOK_CASE:"001",WINDOW:7,include_previous_year:false};componentWillLoad(){this.salesFilters=this.baseFilters;if(this.ticket){this.token.setToken(this.ticket);this.initializeApp()}}ticketChanged(e,t){if(e===t){return}this.token.setToken(this.ticket);this.initializeApp()}async initializeApp(){try{let e=this.propertyid;if(!this.propertyid&&!this.p){throw new Error("Property ID or username is required")}if(!e){console.log(e);const t=await this.roomService.getExposedProperty({id:0,aname:this.p,language:this.language,is_backend:true,include_units_hk_status:true});e=t.My_Result.id}this.property_id=e;const t=[this.bookingService.getCountries(this.language),this.roomService.fetchLanguage(this.language),this.getCountrySales()];if(this.propertyid){t.push(this.roomService.getExposedProperty({id:this.propertyid,language:this.language,is_backend:true,include_units_hk_status:true}))}const[i]=await Promise.all(t);const a=new Map;i.map((e=>{a.set(e.id,{flag:e.flag,name:e.name})}));this.countries=a}catch(e){console.log(e)}finally{this.isPageLoading=false}}async getCountrySales(e=false){const t=e=>({country:e.COUNTRY,country_id:e.COUNTRY_ID,nights:e.NIGHTS,percentage:e.PCT,revenue:e.REVENUE,number_of_guests:e.Total_Guests});try{const{include_previous_year:i,...a}=this.salesFilters;this.isLoading=e?"export":"filter";const r=await this.propertyService.getCountrySales({AC_ID:this.property_id,is_export_to_excel:e,...a});const o=!e&&i;let n=[];if(o){const e=await this.propertyService.getCountrySales({AC_ID:this.property_id,is_export_to_excel:false,...a,FROM_DATE:fe(a.FROM_DATE).subtract(1,"year").format("YYYY-MM-DD"),TO_DATE:fe(a.TO_DATE).subtract(1,"year").format("YYYY-MM-DD")});n=r.map((i=>{const a=e.find((e=>e.COUNTRY.toLowerCase()===i.COUNTRY.toLowerCase()));return{id:pe(),...t(i),last_year:a?t(a):null}}))}else{n=r.map((e=>({id:pe(),...t(e),last_year:null})))}this.salesData=[...n]}catch(e){console.error("Failed to fetch sales data:",e)}finally{this.isLoading=null}}render(){if(this.isPageLoading){return t("ir-loading-screen",null)}return t(i,null,t("ir-toast",null),t("ir-interceptor",null),t("section",{class:"p-2 d-flex flex-column",style:{gap:"1rem"}},t("div",{class:"d-flex align-items-center justify-content-between"},t("h3",{class:"mb-1 mb-md-0"},"Sales by Country"),t("ir-button",{size:"sm",btn_color:"outline",isLoading:this.isLoading==="export",text:g.entries.Lcz_Export,onClickHandler:async e=>{e.stopImmediatePropagation();e.stopPropagation();await this.getCountrySales(true)},btnStyle:{height:"100%"},iconPosition:"right",icon_name:"file",icon_style:{"--icon-size":"14px"}})),t("ir-sales-by-country-summary",{salesReports:this.salesData}),t("div",{class:"d-flex flex-column flex-lg-row mt-1 ",style:{gap:"1rem"}},t("ir-sales-filters",{isLoading:this.isLoading==="filter",onApplyFilters:e=>{e.stopImmediatePropagation();e.stopPropagation();this.salesFilters=e.detail;this.getCountrySales()},class:"filters-card",baseFilters:this.baseFilters}),t("ir-sales-table",{mappedCountries:this.countries,class:"card mb-0",records:this.salesData}))))}static get watchers(){return{ticket:["ticketChanged"]}}};fg.style=pg;const bg=".sc-ir-sales-by-country-summary-h{display:block}.sales-by-country-summary__container.sc-ir-sales-by-country-summary{display:grid;grid-template-columns:repeat(1, 1fr);gap:0.5rem}@media (min-width: 640px){.sales-by-country-summary__container.sc-ir-sales-by-country-summary{grid-template-columns:repeat(3, 1fr);gap:1rem}}";const gg=bg;const mg=class{constructor(t){e(this,t)}salesReports;calculateTotalValues(e,t=false){return this.salesReports?.reduce(((i,a)=>{const r=t?a.last_year?a.last_year[e]:0:a[e];return i+r}),0)}getIcon(e,t){if(this.salesReports?.length&&this.salesReports[0].last_year){return e>t?"arrow-trend-up":"arrow-trend-down"}return}render(){const e=this.calculateTotalValues("nights");const i=this.calculateTotalValues("number_of_guests");const a=this.calculateTotalValues("revenue");const r=this.calculateTotalValues("nights",true);const o=this.calculateTotalValues("number_of_guests",true);const n=this.calculateTotalValues("revenue",true);return t("div",{key:"c581eed42574af3ee2581de3e578cabf15130685",class:"sales-by-country-summary__container"},t("ir-stats-card",{key:"03234a9bb8ef26d00706174b03463a172484ab4f",cardTitle:"Total Room Nights",icon:this.getIcon(e,r),value:e.toString(),subtitle:r?`Last year ${r}`:undefined}),t("ir-stats-card",{key:"051402a3edf55f2ed8cba0ef1b9fecd4e15881a1",icon:this.getIcon(i,o),cardTitle:"Total Guests",value:i.toString(),subtitle:o?`Last year ${o}`:undefined}),t("ir-stats-card",{key:"5c57d7f4b79325688c4a3128101099ac680c593f",icon:this.getIcon(a,n),cardTitle:"Total Revenue",value:v(y.currency.symbol,a),subtitle:n?`Last year ${v(y.currency.symbol,n)}`:undefined}))}};mg.style=gg;const wg=".sc-ir-sales-filters-h{display:block;height:100%;flex:1 1 0%}@media (min-width: 768px){.collapse-btn.sc-ir-sales-filters{display:none}#salesFiltersCollapse.collapse.sc-ir-sales-filters:not(.show){display:block}}";const yg=wg;const vg=class{constructor(t){e(this,t);this.applyFilters=a(this,"applyFilters",7)}isLoading;baseFilters;filters;collapsed=false;window;applyFilters;componentWillLoad(){this.filters=this.baseFilters;this.window=this.baseFilters.WINDOW.toString()}updateFilter(e){this.filters={...this.filters,...e}}applyFiltersEvt(e){e.stopImmediatePropagation();e.stopPropagation();this.applyFilters.emit(this.filters)}resetFilters(e){e.stopImmediatePropagation();e.stopPropagation();this.filters=this.baseFilters;this.applyFilters.emit(this.filters)}render(){return t("div",{key:"e153811deec1b5992367423a7a630ac3d8d0571e",class:"card mb-0 p-1 d-flex flex-column sales-filters-card"},t("div",{key:"c9fe36f9a9fa58801346a54d5edeeb387c01ad4a",class:"d-flex align-items-center justify-content-between sales-filters-header"},t("div",{key:"1d78aa8e2a67862ab26e6a2cb6288db99911ecaa",class:"d-flex align-items-center",style:{gap:"0.5rem"}},t("svg",{key:"a9edc44c59c48f35becf77fc0b6771622e73a013",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",height:18,width:18},t("path",{key:"53a11cd65873445bbddf07fe4b16aaebcd55c8c4",fill:"currentColor",d:"M3.9 54.9C10.5 40.9 24.5 32 40 32l432 0c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9 320 448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6l0-79.1L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"})),t("h4",{key:"f8397e996b1c04cf4221abbcbe66090b0cc6bf27",class:"m-0 p-0 flex-grow-1"},g.entries.Lcz_Filters)),t("ir-button",{key:"b07a76ca1718b313de9fe54329334f7467bdbb93",variant:"icon",id:"drawer-icon","data-toggle":"collapse","data-target":"#salesFiltersCollapse","aria-expanded":this.collapsed?"true":"false","aria-controls":"salesFiltersCollapse",class:"mr-1 collapse-btn toggle-collapse-btn",icon_name:this.collapsed?"closed_eye":"open_eye",onClickHandler:()=>{this.collapsed=!this.collapsed},style:{"--icon-size":"1.6rem"}})),t("div",{key:"be37eb256035bb47e11d67a01ba6c687733a5141",class:"m-0 p-0 collapse filters-section",id:"salesFiltersCollapse"},t("div",{key:"d3c24a6ecff965099a33fc0aa36e35019eb0aa6b",class:"d-flex flex-column",style:{gap:"0.5rem"}},t("fieldset",{key:"9415175773c546e8658266944e899f1806e69020",class:"pt-1 filter-group"},t("label",{key:"55eff991032cb55678b845b63d8790a9f7153c92",htmlFor:"rooms",class:"m-0 px-0",style:{paddingBottom:"0.25rem"}},"Rooms"),t("ir-select",{key:"af3e44c025cda857f0f48dd1d0e104293010d93b",selectedValue:this.filters?.BOOK_CASE,selectId:"rooms",showFirstOption:false,onSelectChange:e=>this.updateFilter({BOOK_CASE:e.detail}),data:[{text:"Booked",value:"001"},{text:"Stayed",value:"002"}]})),t("fieldset",{key:"14d64cf17646336e30da9d2615b8d9f58c8e293d",class:"pt-1 filter-group"},t("label",{key:"5afd2aa95fad1dc36b887e8359189f854c10c5e3",htmlFor:"period",class:"px-0 m-0",style:{paddingBottom:"0.25rem"}},"Selected period"),t("div",{key:"376ee2fbb4f52193111b6b8575deeae6cd68283b",class:"d-flex flex-column date-filter-group",style:{gap:"0.5rem"}},t("ir-select",{key:"a6e4206578b3c885e92178ebfef0c51169b6000a",selectedValue:this.window,onSelectChange:e=>{const t=Number(e.detail);const i=fe();this.updateFilter({WINDOW:t,TO_DATE:i.format("YYYY-MM-DD"),FROM_DATE:i.add(-t,"days").format("YYYY-MM-DD")});this.window=e.detail},selectId:"period",firstOption:"...",data:[{text:"For the past 7 days",value:"7"},{text:"For the past 14 days",value:"14"},{text:"For the past 30 days",value:"30"},{text:"For the past 60 days",value:"60"},{text:"For the past 90 days",value:"90"},{text:"For the past 365 days",value:"365"}]}),t("p",{key:"b922c641e2ed176c1257e009dede087f2f1d66b1",class:"m-0 p-0 text-center"},"Or"),t("ir-range-picker",{key:"fc9c70191b5d8310fd865edfff821f7718f42f11",onDateRangeChanged:e=>{e.stopImmediatePropagation();e.stopPropagation();const{fromDate:t,toDate:i,wasFocused:a}=e.detail;this.updateFilter({FROM_DATE:t.format("YYYY-MM-DD"),TO_DATE:i.format("YYYY-MM-DD")});if(a)this.window=""},fromDate:fe(this.filters.FROM_DATE,"YYYY-MM-DD"),toDate:fe(this.filters.TO_DATE,"YYYY-MM-DD"),maxDate:fe().format("YYYY-MM-DD"),withOverlay:false}))),t("div",{key:"bea7ad25a22319e8c6ffc8067d747b46f4e0fe55",class:"d-flex align-items-center mt-1 mb-2 compare-year-toggle",style:{gap:"0.5rem"}},t("label",{key:"1c9c70fd450c9a333a60f5b28f54b99c342d337b",htmlFor:"compare-prev-year",style:{paddingBottom:"0.25rem"}},"Compare with previous year"),t("ir-checkbox",{key:"2b32b08fad49a0b051df00334b1100abea43ce7f",checked:this.filters?.include_previous_year,checkboxId:"compare-prev-year",onCheckChange:e=>{e.stopImmediatePropagation();e.stopPropagation();this.updateFilter({include_previous_year:e.detail})}})),t("div",{key:"74da9b4603464fb3b58782a061c59810052c1a73",class:"d-flex align-items-center justify-content-end filter-actions",style:{gap:"1rem"}},t("ir-button",{key:"f564848259114a590a6580e138ddcfcadc9dbdd9",btn_type:"button","data-testid":"reset",text:g.entries.Lcz_Reset,size:"sm",btn_color:"secondary",onClickHandler:e=>this.resetFilters(e)}),t("ir-button",{key:"d9fd09fc759d47f808d4268e92fca899a0a765e4",btn_type:"button","data-testid":"apply",isLoading:this.isLoading,text:g.entries.Lcz_Apply,size:"sm",onClickHandler:e=>this.applyFiltersEvt(e)})))))}};vg.style=yg;const kg=".sc-ir-sales-table-h{display:block;width:100%}.legend.sc-ir-sales-table{height:12px;aspect-ratio:1;background:#000;border-radius:4px}.secondary.sc-ir-sales-table{background:#6692b3}.channel-cell.sc-ir-sales-table{width:100%}.task-row.sc-ir-sales-table,.table.sc-ir-sales-table th.sc-ir-sales-table,.table.sc-ir-sales-table td.sc-ir-sales-table{white-space:nowrap;max-width:max-content !important;padding:0.25rem 1rem !important}.outer-container.sc-ir-sales-table{padding:1rem;box-sizing:border-box}.table.sc-ir-sales-table tfoot.sc-ir-sales-table td.sc-ir-sales-table{border-bottom:0}.flag.sc-ir-sales-table{height:16px;width:23px;border-radius:3px}";const xg=kg;const _g=".ir-table-row.sc-ir-sales-table td.sc-ir-sales-table{padding:0.5rem 1rem !important;text-align:left;z-index:2;background-color:var(--wa-color-surface-default);white-space:nowrap;color:var(--wa-color-text-normal);box-sizing:border-box}.table--container.sc-ir-sales-table{flex:1 1 0%}.table--container.sc-ir-sales-table{overflow-x:auto}.table.sc-ir-sales-table td.sc-ir-sales-table{border-top:0;border-bottom:1px solid var(--wa-color-neutral-border-quiet, #abaeb9);transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.table.sc-ir-sales-table tbody.sc-ir-sales-table tr.sc-ir-sales-table:last-child>td.sc-ir-sales-table{border-bottom:0 !important}.table.sc-ir-sales-table thead.sc-ir-sales-table th.sc-ir-sales-table{border:none !important;background:#ececec;background:color-mix(in oklab, var(--wa-color-neutral-fill-quiet, #f1f2f3) 60%, transparent);color:#374151;padding:0.5rem 1rem !important;text-align:left}.data-table.sc-ir-sales-table thead.sc-ir-sales-table th.sc-ir-sales-table{box-sizing:border-box;background:var(--wa-color-surface-default) !important;padding-top:0.5rem !important;padding-bottom:0.5rem !important;border-bottom:1px solid var(--wa-color-neutral-90) !important;color:var(--wa-color-text-normal)}.data-table.sc-ir-sales-table .empty-row.sc-ir-sales-table{height:50vh !important;text-align:center;color:var(--wa-color-gray-60)}.data-table--pagination.sc-ir-sales-table{padding:0.5rem 1rem;position:sticky;bottom:0;background:var(--wa-color-surface-default);border-top:1px solid var(--wa-color-neutral-90)}.selected.sc-ir-sales-table td.sc-ir-sales-table{background:#e3f3fa !important}.selected.sc-ir-sales-table td.sc-ir-sales-table{color:var(--gray-dark) !important;transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.sortable.sc-ir-sales-table,.ir-table-row.sc-ir-sales-table{transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.sortable.sc-ir-sales-table{text-transform:capitalize}.sortable.sc-ir-sales-table:hover{color:#212529;background-color:#e2e8f0 !important;border-color:#dae0e5;cursor:pointer}.ir-table-row.sc-ir-sales-table:hover td.sc-ir-sales-table{background:#e2e6ea3f !important;background:var(--wa-color-neutral-fill-quiet, #f1f2f3) !important}.sortable.sc-ir-sales-table:active{color:#212529;background-color:#e2e8f0;border-color:#d3d9df}.sortable.sc-ir-sales-table svg.sc-ir-sales-table{color:var(--blue)}.sticky-column.sc-ir-sales-table{position:sticky !important;right:0;background-color:white}";const Dg=_g;const Cg=class{constructor(t){e(this,t)}records=[];mappedCountries;visibleCount=10;handleLoadMore=()=>{this.visibleCount=Math.min(this.visibleCount+10,this.records.length)};render(){const e=this.records.slice(0,this.visibleCount);return t("div",{key:"b86c6064780756a89cb3ce43e56b26bdc7083c23",class:"table-container h-100 p-1 m-0 mb-2 table-responsive"},t("table",{key:"8ccf55518549eb22fa18d2dd6a5fe49bdf681ee6",class:"table","data-testid":"hk_tasks_table"},t("thead",{key:"0ed899b08124b17dff25c4edc46d02f442b8b2f2",class:"table-header"},t("tr",{key:"1b5fa9d8850ec277d1bd4f6d09434c453aa35a9e"},t("th",{key:"6e99113423826063e6fb473c3daf5f37068e3b82",class:"text-left"},"Country"),t("th",{key:"c4895c05b20c235cd55e6d70d51e91c2c58a24e7",class:"text-center"},"Room nights"),t("th",{key:"9e100973e20b634d3d9bc26d135f13f3bb24264b",class:"text-center"},"No of guests"),t("th",{key:"ca0875c2549d1e311358acfc37a8a5e3550ba13d",class:"text-right"},"Revenue"),t("th",{key:"f6a411791035d610aa3b49f6b46d5114243f4c98",class:""}))),t("tbody",{key:"15b14bdd00e2230d709bb69f0cd06f13178ca35f"},this.records.length===0&&t("tr",{key:"6287416fb93cfe8ff2552ed13efb271876872957"},t("td",{key:"3d3988f862acf799198ca8883635c4f358f7ac2f",colSpan:5,style:{height:"300px"}},"No data found.")),e.map((e=>{const i=`${parseFloat(e.percentage.toString()).toFixed(2)}%`;const a=e.last_year?`${parseFloat(e.last_year.percentage.toString()).toFixed(2)}%`:null;const r=this.mappedCountries.get(e.country_id);return t("tr",{"data-testid":`record_row`,class:{"task-table-row ir-table-row":true},key:e.id},t("td",{class:"text-left"},t("div",{class:"d-flex align-items-center",style:{gap:"0.5rem"}},r?.flag&&t("img",{class:"flag",alt:r.name,src:r.flag}),t("span",null,r?.name??e.country))),t("td",{class:"text-center"},t("div",{class:"d-flex flex-column",style:{gap:"0.25rem"}},t("p",{class:`p-0 m-0 ${e.last_year?.nights?"font-weight-bold":""}`},e.nights),e.last_year?.nights&&t("p",{class:"p-0 mx-0",style:{marginTop:"0.25rem",marginBottom:"0"}},e.last_year.nights))),t("td",{class:"text-center"},t("div",{class:"d-flex flex-column",style:{gap:"0.25rem"}},t("p",{class:`p-0 m-0 ${e.last_year?.number_of_guests?"font-weight-bold":""}`},e.number_of_guests),e.last_year?.number_of_guests&&t("p",{class:"p-0 mx-0",style:{marginTop:"0.25rem",marginBottom:"0"}},e.last_year.number_of_guests))),t("td",{class:"text-right"},t("div",{class:"d-flex flex-column",style:{gap:"0.25rem"}},t("p",{class:`p-0 m-0 ${e.last_year?.revenue?"font-weight-bold":""}`},v(y.currency.symbol,e.revenue)),e.last_year?.revenue&&t("p",{class:"p-0 mx-0",style:{marginTop:"0.25rem",marginBottom:"0"}},v(y.currency.symbol,e.last_year.revenue)))),t("td",null,t("div",{class:"d-flex flex-column",style:{gap:"0.5rem"}},t("ir-progress-indicator",{percentage:i}),e.last_year?.percentage&&t("ir-progress-indicator",{percentage:a,color:"secondary"}))))}))),t("tfoot",{key:"1c041eb23593af58973fdc562999d73a844ea87b"},t("tr",{key:"2e5a23e37ce432903d405560f169a838645a3fa3",style:{fontSize:"12px"}},t("td",{key:"434f1b71bb70af1f1f8c65f920a52a6dcf46e13b",colSpan:4}),t("td",{key:"c70e9e2b898c2df05034657b24c6bb6ab0b5b136",style:{width:"250px"}},t("div",{key:"1fb4d204053c9d45a19995540f1373daa5cc1ccf",class:"d-flex align-items-center justify-content-end",style:{gap:"1rem",paddingTop:"0.5rem"}},t("div",{key:"2ff18dd9e6861a089a2941304f57e8ac0af868a3",class:"d-flex align-items-center",style:{gap:"0.5rem"}},t("div",{key:"aa2747257ee9c1dca577119bc017cac5ca502230",class:"legend bg-primary"}),t("p",{key:"27a2842948ebcecfff4fba80b1125ef303c5add3",class:"p-0 m-0"},"Selected period ")),t("div",{key:"23615bbe7625cdb5d503fd7270236065b6f014e4",class:"d-flex align-items-center",style:{gap:"0.5rem"}},t("div",{key:"7108611e9435034aba9a3f575559b450d8bbce71",class:"legend secondary"}),t("p",{key:"2b7e15cdb58df35d724af24ddfb83e07407e41ae",class:"p-0 m-0"},"Previous year"))))))),this.visibleCount<this.records.length&&t("div",{key:"2f016a33a67d6be4c251a2b5787ae0b01ef4826e",class:"d-flex mx-auto"},t("ir-button",{key:"3a4630a315505dafb2248874deed7bd394e0db39",class:"mx-auto",size:"sm",text:"Load More",onClickHandler:this.handleLoadMore})))}};Cg.style=xg+Dg;const Mg=".nav{background:white;padding:0.25rem 0}.nav-tabs{border-bottom:0}.nav-link{color:inherit}.active{color:var(--blue)}.ir-page__container{background:#f4f5fa}.secure-header{background:#fff;border-bottom:1px solid rgba(0, 0, 0, 0.08);padding:0.75rem 1rem;position:sticky;top:0;z-index:10}.secure-header__top{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:1rem}.secure-header__aname{display:flex;flex-direction:column;gap:0.25rem;margin:0}.secure-header__label{font-size:0.85rem;font-weight:600;color:#5a5a5a;margin:0}.secure-header__aname-input{display:flex;align-items:center;gap:0.5rem}.secure-header__aname-input .form-control{max-width:7rem;padding:0.25rem 0.5rem}.secure-header__tabs{margin-top:0.75rem;padding-top:0.5rem;border-top:1px solid rgba(0, 0, 0, 0.05);overflow-x:auto}.secure-tabs{display:flex;flex-wrap:wrap;gap:0.5rem;list-style:none;padding:0;margin:0}.secure-tabs__item{flex:0 1 auto}.secure-tabs__btn{border:1px solid transparent;border-radius:999px;padding:0.35rem 0.85rem;background:transparent;color:inherit;font-size:0.9rem;transition:all 0.2s ease}.secure-tabs__btn:hover{border-color:rgba(0, 0, 0, 0.1)}.secure-tabs__btn.active{border-color:rgba(0, 0, 0, 0.15);color:var(--blue)}";const Sg=Mg;const Yg=class{constructor(t){e(this,t)}propertyid;p;bookingNumber;ticket;isAuthenticated=false;currentPage;inputValue;token=new me;dates={};componentWillLoad(){const e=he();this.generateDates();if(this.ticket){this.isAuthenticated=true;this.token.setToken(this.ticket);this.propertyid=this.propertyid}if(e){this.isAuthenticated=true;this.token.setToken(e.token)}this.inputValue=this.p}handlePChange(){this.inputValue=this.p}handleTicketChange(e,t){if(e!==t){this.isAuthenticated=true;this.token.setToken(this.ticket);this.propertyid=this.propertyid}}generateDates(){var e=new Date;e.setDate(e.getDate()-1);var t=e.toISOString().substring(0,10);e.setDate(e.getDate()+60);var i=e.toISOString().substring(0,10);this.dates={from_date:t,to_date:i}}routes=[{name:"Housekeepers",value:"hk"},{name:"Tasks",value:"tasks"},{name:"Front",value:"front"},{name:"Users",value:"users"},{name:"Sales By Country",value:"country-sales"},{name:"Daily Occupancy",value:"daily-occupancy"},{name:"Daily Revenue",value:"daily-revenue"},{name:"Email logs",value:"email-logs"},{name:"Booking Listing",value:"booking-listing"},{name:"Sales by Channel",value:"channel-sales"},{name:"Arrivals",value:"arrivals"},{name:"Departures",value:"departures"}];handleAuthFinish(e){const t=e.detail.token;this.token.setToken(t);this.isAuthenticated=true;ue({login:{method:"direct",isLoggedIn:true,token:t}})}render(){if(!this.isAuthenticated)return t(i,null,t("ir-login",{onAuthFinish:this.handleAuthFinish.bind(this)}));return t("div",{class:"ir-page__container p-0"},t("section",{class:"secure-header"},t("div",{class:"secure-header__top"},t("form",{class:"secure-header__aname",onSubmit:e=>{e.preventDefault();if(this.inputValue){const e=new URL(window.location.href);e.searchParams.set("aname",this.inputValue);window.history.pushState({},"",e)}this.logout()}},t("label",{class:"secure-header__label",htmlFor:"aname-input"},"AName"),t("div",{class:"secure-header__aname-input"},t("ir-custom-input",{id:"aname-input",type:"text",value:this.inputValue,"onText-change":e=>this.inputValue=e.detail,placeholder:"AName","aria-label":"AName"}),t("ir-custom-button",{variant:"brand",type:"submit",id:"button-save"},"Save"))),t("ir-custom-button",{variant:"danger",onClick:()=>{this.logout()}},"Logout")),t("nav",{class:"secure-header__tabs","aria-label":"Secure screens navigation"},t("ul",{class:"secure-tabs"},this.routes.map((e=>t("li",{key:e.name,class:"secure-tabs__item"},t("button",{type:"button",class:{"secure-tabs__btn":true,active:this.currentPage===e.value},"aria-current":this.currentPage===e.value?"page":undefined,onClick:()=>{this.currentPage=e.value}},e.name))))))),this.renderPage())}logout(){sessionStorage.removeItem("backend_anchor");window.location.reload()}renderPage(){switch(this.currentPage){case"tasks":return t("ir-hk-tasks",{p:this.p,propertyid:this.propertyid,language:"en",ticket:this.token.getToken()});case"front":return t("igloo-calendar",{currencyName:"USD",propertyid:this.propertyid,p:this.p,ticket:this.token.getToken(),from_date:this.dates.from_date,to_date:this.dates.to_date,language:"en"});case"hk":return t("ir-housekeeping",{p:this.p,propertyid:this.propertyid,language:"en",ticket:this.token.getToken()});case"users":return t("ir-user-management",{userTypeCode:5,p:this.p,propertyid:this.propertyid,language:"en",ticket:this.token.getToken()});case"country-sales":return t("ir-sales-by-country",{p:this.p,propertyid:this.propertyid,language:"en",ticket:this.token.getToken()});case"daily-occupancy":return t("ir-monthly-bookings-report",{p:this.p,propertyid:this.propertyid,language:"en",ticket:this.token.getToken()});case"daily-revenue":return t("ir-daily-revenue",{p:this.p,propertyid:this.propertyid,language:"en",ticket:this.token.getToken()});case"email-logs":return t("ir-booking-email-logs",{ticket:this.token.getToken()});case"booking-listing":return t("ir-booking-listing",{p:this.p,language:"en",propertyid:this.propertyid,ticket:this.token.getToken()});case"channel-sales":return t("ir-sales-by-channel",{language:"en",propertyid:this.propertyid.toString(),ticket:this.token.getToken()});case"arrivals":return t("ir-arrivals",{language:"en",propertyid:this.propertyid,ticket:this.token.getToken()});case"departures":return t("ir-departures",{language:"en",propertyid:this.propertyid,ticket:this.token.getToken()});default:return null}}static get watchers(){return{p:["handlePChange"],ticket:["handleTicketChange"]}}};Yg.style=Sg;const Eg=".border-theme.sc-ir-select{border:1px solid #cacfe7}@keyframes bounce{0%,100%{transform:scale(1);animation-timing-function:cubic-bezier(0.8, 0, 1, 1)}50%{transform:scale(1.2);animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}}.bounce-3.sc-ir-select{animation:bounce 1s 1}.sc-ir-select-h{--ir-floating-label-fg:#6c757d;--ir-floating-label-fg-focus:#495057;--ir-floating-label-bg:#fff;--ir-floating-label-scale:0.88;--ir-floating-label-float-translateY:-70%;--ir-floating-label-resting-offset-inline:0.9rem;--ir-floating-select-radius:0.21rem;--ir-floating-select-height:2rem;--ir-danger:#dc3545;--ir-disabled-fg:#9aa0a6}.floating-select.sc-ir-select{height:var(--ir-floating-select-height);border-radius:var(--ir-floating-select-radius) !important}.sc-ir-select-h .ir-floating-group.sc-ir-select,.sc-ir-select-h .ir-select-wrapper.sc-ir-select{position:relative}.sc-ir-select-h .ir-floating-group.has-floating.sc-ir-select,.sc-ir-select-h .ir-select-wrapper.has-floating.sc-ir-select{padding-top:0.9rem}.sc-ir-select-h .ir-floating-label.sc-ir-select,.sc-ir-select-h .floating-label.sc-ir-select{position:absolute;top:0;transform:translateY(-50%);pointer-events:none;padding:0 0.4rem;z-index:10;color:var(--ir-floating-label-fg);background:white;transition:transform 120ms ease, color 120ms ease, top 120ms ease, background-color 120ms ease, opacity 120ms ease;opacity:0.95;line-height:1;white-space:nowrap}.sc-ir-select-h .ir-floating-label.sc-ir-select:dir(rtl),.sc-ir-select-h .floating-label.sc-ir-select:dir(rtl){right:var(--ir-floating-label-resting-offset-inline)}.sc-ir-select-h .ir-floating-label.sc-ir-select:dir(ltr),.sc-ir-select-h .floating-label.sc-ir-select:dir(ltr){left:var(--ir-floating-label-resting-offset-inline)}.sc-ir-select-h .ir-floating-group.sc-ir-select:focus-within .ir-floating-label.sc-ir-select,.sc-ir-select-h .ir-floating-input.sc-ir-select:not(:placeholder-shown)+.ir-floating-label.sc-ir-select,.sc-ir-select-h .ir-floating-group[data-has-value='true'].sc-ir-select .ir-floating-label.sc-ir-select,.sc-ir-select-h .ir-floating-group.sc-ir-select:focus-within .floating-label.sc-ir-select,.sc-ir-select-h .ir-floating-input.sc-ir-select:not(:placeholder-shown)+.floating-label.sc-ir-select,.sc-ir-select-h .ir-floating-group[data-has-value='true'].sc-ir-select .floating-label.sc-ir-select,.sc-ir-select-h .floating-label.active.sc-ir-select{top:0;transform:translateY(var(--ir-floating-label-float-translateY)) scale(var(--ir-floating-label-scale));background:var(--ir-floating-label-bg);color:var(--ir-floating-label-fg-focus);font-size:12px;padding:0;opacity:0.95}.sc-ir-select-h .ir-floating-group.has-floating.sc-ir-select select.sc-ir-select,.sc-ir-select-h .ir-select-wrapper.has-floating.sc-ir-select select.sc-ir-select,.sc-ir-select-h .ir-floating-group.has-floating.sc-ir-select .ir-floating-input.sc-ir-select{padding-top:0.9rem}.sc-ir-select-h .ir-floating-group.has-error.sc-ir-select .ir-floating-label.sc-ir-select,.sc-ir-select-h .has-error.sc-ir-select .ir-floating-group.sc-ir-select .ir-floating-label.sc-ir-select,.sc-ir-select-h .ir-floating-group.has-error.sc-ir-select .floating-label.sc-ir-select,.sc-ir-select-h .has-error.sc-ir-select .ir-floating-group.sc-ir-select .floating-label.sc-ir-select{color:var(--ir-danger)}.sc-ir-select-h .ir-floating-group.is-disabled.sc-ir-select .ir-floating-label.sc-ir-select,.sc-ir-select-h .ir-floating-group.is-disabled.sc-ir-select .floating-label.sc-ir-select{color:var(--ir-disabled-fg)}@supports (-webkit-touch-callout: none){.sc-ir-select-h .ir-floating-input.sc-ir-select{border-radius:var(--ir-floating-input-border-radius)}}";const Tg=Eg;const Ig=class{constructor(t){e(this,t);this.selectChange=a(this,"selectChange",7)}name;data;label;selectStyles;selectForcedStyles;selectContainerStyle;selectedValue=null;required;firstOption="Select";showFirstOption=true;size="md";textSize="md";labelPosition="left";labelBackground=null;labelColor="dark";labelBorder="theme";labelWidth=3;selectId=pe();testId;disabled;error=false;floatingLabel;initial=true;valid=false;selectChange;selectEl;labelId=`ir-select-label-${pe()}`;watchHandler(e){if(e!==null&&this.required){this.valid=true}}handleButtonAnimation(e){if(!this.selectEl||e.detail!==this.selectId){return}e.stopImmediatePropagation();e.stopPropagation();this.selectEl.classList.add("border-danger")}handleSelectChange(e){this.selectEl.classList.remove("border-danger");if(this.required){this.initial=false;this.valid=e.target.checkValidity();this.selectedValue=e.target.value;this.selectChange.emit(this.selectedValue)}else{this.selectedValue=e.target.value;this.selectChange.emit(this.selectedValue)}}count=0;render(){let e=["form-control"];if(this.floatingLabel){e.push("floating-select")}else{e.push(`col-${this.label?12-this.labelWidth:12}`)}if(this.required&&!this.valid&&!this.initial){e.push("border-danger")}let i=this.label?this.floatingLabel?t("label",{id:this.labelId,class:`floating-label active`,htmlFor:this.selectId},this.label,this.required?"*":""):t("div",{class:`input-group-prepend col-${this.labelWidth} p-0 text-${this.labelColor}`},t("label",{htmlFor:this.selectId,class:`input-group-text ${this.labelPosition==="right"?"justify-content-end":this.labelPosition==="center"?"justify-content-center":""} ${this.labelBackground?"bg-"+this.labelBackground:""} flex-grow-1 text-${this.labelColor} border-${this.labelBorder==="none"?0:this.labelBorder} `},this.label,this.required?"*":"")):null;return t("div",{key:"8a600424f3da50da54ce0d06fbfbe4440293bc0e",class:`form-group m-0 ${this.selectContainerStyle}`},t("div",{key:"c4d2b56fb059703c1e19f7e41bc675d79c2796e2",class:"input-group row m-0"},i,t("select",{key:"dd9b6c505f8b4090119a67af51f05bce9a1efd9c",disabled:this.disabled,"aria-invalid":this.error?"true":"false","data-testid":this.testId,style:this.selectForcedStyles,ref:e=>this.selectEl=e,id:this.selectId,class:`${this.selectStyles} ${this.error?"border-danger":""} ${e.join(" ")} form-control-${this.size} text-${this.textSize} `,onInput:this.handleSelectChange.bind(this),required:this.required},this.showFirstOption&&t("option",{key:"3217e401a6b09ed4c55508ce44d965eafcb6b886",value:""},this.firstOption),this.data.map((e=>t("option",{selected:this.selectedValue===e.value,value:e.value},e.text))))))}static get watchers(){return{selectedValue:["watchHandler"]}}};Ig.style=Tg;const zg=".backdrop{position:fixed;top:0;left:0;width:100%;height:100vh;cursor:pointer;background:rgba(0, 0, 0, 0.5);z-index:99;transition:all 0.5s;opacity:0;pointer-events:none;transition:all 0.5s}.backdrop.active{opacity:1;pointer-events:all}.sidebar-right{position:fixed;top:0;right:-120%;bottom:0;width:var(--sidebar-width, 40rem);max-width:100%;box-shadow:0 0 10px rgba(0, 0, 0, 0.1);transition:all 0.5s;z-index:100;overflow-y:hidden;color:var(--sidebar-color, #000);background-color:var(--sidebar-backgound, #fff);padding-block:var(--ir-sidebar-padding-block, 0);padding-inline:var(--ir-sidebar-padding-inline, 0.5rem);padding-top:var(--ir-sidebar-padding-top, unset);padding-bottom:var(--ir-sidebar-padding-bottom, unset);padding-left:var(--ir-sidebar-padding-left, unset);padding-right:var(--ir-sidebar-padding-right, unset)}.sidebar-right.active{right:0;overflow-y:auto}.sidebar-left{position:fixed;top:0;left:-120%;bottom:0;width:var(--sidebar-width, 40rem);max-width:100%;box-shadow:0 0 10px rgba(0, 0, 0, 0.1);transition:all 0.5s;z-index:100;overflow-y:hidden;color:var(--sidebar-color, #000);background-color:var(--sidebar-backgound, #fff);padding-block:var(--ir-sidebar-padding-block, 0);padding-inline:var(--ir-sidebar-padding-inline, 0.5rem);padding-top:var(--ir-sidebar-padding-top, unset);padding-bottom:var(--ir-sidebar-padding-bottom, unset);padding-left:var(--ir-sidebar-padding-left, unset);padding-right:var(--ir-sidebar-padding-right, unset)}.sidebar-title{display:flex;align-items:center;justify-content:space-between;padding:0 1rem;border-bottom:1px solid #e4e5ec}.sidebar-title p{font-weight:500;font-size:1.2rem}.sidebar-left.active{left:0;overflow-y:auto}.close{position:absolute;top:0.5rem;right:1rem;width:1rem;height:1rem;cursor:pointer}";const Og=zg;const Ag=class{constructor(t){e(this,t);this.irSidebarToggle=a(this,"irSidebarToggle",7);this.beforeSidebarClose=a(this,"beforeSidebarClose",7)}get el(){return o(this)}name;side="right";showCloseButton=true;open=false;sidebarStyles;label;preventClose;irSidebarToggle;beforeSidebarClose;sidebarRef;componentDidLoad(){this.applyStyles()}handleSidebarStylesChange(){this.applyStyles()}handleOpenChange(e,t){if(e!==t){x(e)}}handleKeyDown(e){if(e.key==="Escape"&&this.open){e.stopImmediatePropagation();e.stopPropagation();return this.toggleSidebar()}else{return}}async toggleSidebar(){if(this.preventClose){this.beforeSidebarClose.emit();return}this.irSidebarToggle.emit(this.open)}applyStyles(){for(const e in this.sidebarStyles){if(this.sidebarStyles.hasOwnProperty(e)){this.sidebarRef.style[e]=this.sidebarStyles[e]}}}render(){let e="";if(this.open){e="active"}else{e=""}return[t("div",{key:"38d4858b69fce7fbfadbe9c7e96e6a10b327f277",class:`backdrop ${e}`,onClick:()=>{this.toggleSidebar()}}),t("div",{key:"0a11b58f1ade4bb81f8024b6c862eea8d4c8b942",ref:e=>this.sidebarRef=e,class:`sidebar-${this.side} ${e}`},this.showCloseButton&&t("div",{key:"c17e17176d5ff2767edf3c155bfa000af228cbf1",class:"sidebar-title"},t("p",{key:"15d498ac97f3c3b6685472e29d7ab456aaee7143",class:"p-0 m-0"},this.label),t("div",{key:"6e29777735ae08337ec0b1755978235d7f8877e6",class:"p-0 m-0 sidebar-icon-container"},t("ir-icon",{key:"b6f3b10f601d95371519cc833048e552385e906b",class:"",onIconClickHandler:()=>{this.toggleSidebar()}},t("svg",{key:"53c4db18ac188955ab802524fb06807994c5f1c6",slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",height:20,width:20},t("path",{key:"fb7777c2c465d455fe26768a05277360b36cf8cd",fill:"#6b6f82",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"}))))),t("slot",{key:"22c4750b83a2723dcceb92444ff6025a73d58f4c",name:"sidebar-body"}))]}static get watchers(){return{sidebarStyles:["handleSidebarStylesChange"],open:["handleOpenChange"]}}};Ag.style=Og;const Bg="";const Rg=Bg;const Pg=class{constructor(t){e(this,t)}get el(){return o(this)}size;borderWidth;unit="rem";color;componentWillLoad(){this.initStyles()}handleSpinnerSizeChange(){this.initStyles()}handleSpinnerBorderWidthChange(){this.initStyles()}handleSpinnerUnitChange(){this.initStyles()}handleSpinnerColorChange(){this.initStyles()}initStyles(){if(this.size){this.applyCssElement(`${this.size}${this.unit}`,"--ir-spinner-size")}if(this.borderWidth){this.applyCssElement(`${this.borderWidth}${this.unit}`,"--ir-spinner-size")}if(this.color){this.applyCssElement(`${this.color}`,"--ir-spinner-color")}}applyCssElement(e,t){this.el.style.setProperty(t,e)}render(){return t(i,{key:"1803b431a6adf8a62160ae1a8cea8c95bcc91a8d"},t("wa-spinner",{key:"a437d9a58718476b293bbf5a84f85cc6578eb812",style:{fontSize:"2rem"}}))}static get watchers(){return{size:["handleSpinnerSizeChange"],borderWidth:["handleSpinnerBorderWidthChange"],unit:["handleSpinnerUnitChange"],color:["handleSpinnerColorChange"]}}};Pg.style=Rg;const Ng=".sc-ir-stats-card-h{display:block}";const Lg=Ng;const $g=class{constructor(t){e(this,t)}icon;cardTitle;subtitle;value;render(){if(!this.value){return null}return t(i,{class:"card p-1 d-flex flex-column flex-fill m-0",style:{gap:"0.5rem"}},t("div",{class:"d-flex align-items-center justify-content-between"},t("slot",{slot:"card-header"},t("p",{class:"m-0 p-0"},t("slot",{name:"title"},this.cardTitle)),t("ir-icons",{name:this.icon}))),t("slot",{name:"card-body"},t("h4",{class:"m-0 p-0"},t("b",{class:"m-0 p-0"},t("slot",{name:"value"},this.value)))),t("slot",{name:"card-footer"},this.subtitle&&t("p",{class:"m-0 p-0 small text-muted"},t("slot",{name:"subtitle"},this.subtitle))))}};$g.style=Lg;const Fg=".sc-ir-status-activity-cell-h{box-sizing:border-box !important}.sc-ir-status-activity-cell-h *.sc-ir-status-activity-cell,.sc-ir-status-activity-cell-h *.sc-ir-status-activity-cell::before,.sc-ir-status-activity-cell-h *.sc-ir-status-activity-cell::after{box-sizing:inherit !important;padding:0;margin:0}[hidden].sc-ir-status-activity-cell{display:none !important}.sc-ir-status-activity-cell-h{display:block;font-size:0.93rem}.status-activity__manipulation.sc-ir-status-activity-cell{color:var(--wa-color-danger)}.status-activity__modified.sc-ir-status-activity-cell,.status-activity__manipulation.sc-ir-status-activity-cell{font-size:0.875rem}";const Hg=Fg;const Ug=class{constructor(t){e(this,t)}isRequestToCancel;status;showModifiedBadge;showManipulationBadge;lastManipulation;bookingNumber;render(){return t(i,{key:"ed281af8caedc90aca19c1cbf1b620717d91eebf"},t("ir-booking-status-tag",{key:"27ffc4a3499a9143e64899750787010ea6ec3d0f",status:this.status,isRequestToCancel:this.isRequestToCancel}),this.showModifiedBadge&&t("p",{key:"58321a32b43a7fbd895f5c2210948c4e2f500dcb",class:"status-activity__modified"},"Modified"),this.showManipulationBadge&&t(r,{key:"355d81e19ae2fe2e4957fe46eec04c040306c0e8"},t("wa-tooltip",{key:"3c6d95f602aaec49ae42715750f83724511c3d91",for:`manipulation_badge_${this.bookingNumber}`},`Modified by ${this.lastManipulation.user} at ${this.lastManipulation.date} ${this.lastManipulation.hour}:${this.lastManipulation.minute}`),t("p",{key:"fc91beb75be9f581efb67aab08f9ef7cf27d6b28",class:"status-activity__manipulation",id:`manipulation_badge_${this.bookingNumber}`},"Modified")))}};Ug.style=Hg;const jg=":host{display:block}.spinner{transform-origin:center;animation:spinner_svv2 0.75s infinite linear}@keyframes spinner_svv2{100%{transform:rotate(360deg)}}";const Vg=jg;const Gg=class{constructor(t){e(this,t);this.loaderComplete=a(this,"loaderComplete",7)}spinnerDuration=1500;successDuration=1e3;autoStart=true;active=true;loaderComplete;phase="spinner";spinnerTimer;successTimer;componentWillLoad(){if(this.autoStart&&this.active){this.startCycle()}}disconnectedCallback(){this.clearTimers()}onActiveChange(e){if(e){if(this.autoStart){this.startCycle()}}else{this.resetCycle()}}onDurationChange(){if(this.active&&this.autoStart){this.startCycle()}}startCycle(){this.clearTimers();this.phase="spinner";const e=Math.max(0,Number(this.spinnerDuration)||0);if(e===0){this.showSuccess();return}this.spinnerTimer=window.setTimeout((()=>this.showSuccess()),e)}showSuccess(){this.phase="success";const e=Math.max(0,Number(this.successDuration)||0);if(e===0){this.handleCompletion();return}this.successTimer=window.setTimeout((()=>this.handleCompletion()),e)}handleCompletion(){this.loaderComplete.emit();this.active=false}resetCycle(){this.clearTimers();this.phase="spinner"}clearTimers(){if(this.spinnerTimer){clearTimeout(this.spinnerTimer);this.spinnerTimer=undefined}if(this.successTimer){clearTimeout(this.successTimer);this.successTimer=undefined}}render(){return t(i,{key:"58af05cf4a044efdf82ff357a386220bb8f77083"},this.phase==="spinner"?t("svg",{part:"spinner",width:"18",height:"18",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},t("path",{d:"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z",class:"spinner"})):t("ir-icons",{part:"check",name:"check",style:{color:"#45b16d"}}))}static get watchers(){return{active:["onActiveChange"],spinnerDuration:["onDurationChange"],successDuration:["onDurationChange"]}}};Gg.style=Vg;const qg=".sc-ir-switch-h{display:block;position:relative;box-sizing:border-box;--ir-root-width:36px;--ir-root-height:20px}.hidden-input.sc-ir-switch{transform:translateX(-100%);position:absolute;pointer-events:none;opacity:0;margin:0;width:var(--ir-root-width);height:var(--ir-root-height)}.SwitchRoot.sc-ir-switch{all:unset;padding:0;margin:0;width:var(--ir-root-width);height:var(--ir-root-height);background-color:var(--ir-root-inactive-color, #ff4961);position:relative;box-shadow:rgba(0, 0, 0, 0.2) 0px 2px 10px;--webkit-tap-highlight-color:rgba(0, 0, 0, 0);border-radius:9999px;box-sizing:border-box}.SwitchRoot.sc-ir-switch:disabled{opacity:80%}.SwitchRoot.sc-ir-switch:focus-visible{outline:1px solid var(--ir-root-active-color, rgb(55, 188, 155));outline-offset:1px}.SwitchRoot[data-state='checked'].sc-ir-switch{background-color:var(--ir-root-active-color, rgb(55, 188, 155))}.SwitchThumb.sc-ir-switch{padding:0;margin:0;display:block;width:calc(var(--ir-root-height) - 3px);height:calc(var(--ir-root-height) - 3px);border-radius:9999px;background:white;box-shadow:rgba(0, 0, 0, 0.2) 0px;transition:transform 100ms ease 0s;transform:translateX(2px);will-change:transform}.SwitchThumb[data-state='checked'].sc-ir-switch{transform:translateX(calc(var(--ir-root-height) - 3px))}";const Kg=qg;const Wg=class{constructor(t){e(this,t);this.checkChange=a(this,"checkChange",7)}checked=false;switchId;disabled=false;checkChange;switchRoot;_id="";componentWillLoad(){this._id=this.generateRandomId(10)}componentDidLoad(){if(!this.switchRoot){return}this.switchRoot.setAttribute("aria-checked",this.checked?"true":"false")}generateRandomId(e){let t="";const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";const a=i.length;for(let r=0;r<e;r++){t+=i.charAt(Math.floor(Math.random()*a))}return t}handleCheckChange(){this.checked=!this.checked;this.switchRoot.setAttribute("aria-checked",this.checked?"true":"false");this.checkChange.emit(this.checked)}render(){return t(i,{key:"e00dd546ff31f5bef8ea26a43e157aa778793e53"},t("button",{key:"2389a50f26050742b09316d37fa55ef27c416395",disabled:this.disabled,ref:e=>this.switchRoot=e,type:"button",id:this.switchId||this._id,onClick:this.handleCheckChange.bind(this),role:"switch","data-state":this.checked?"checked":"unchecked",value:"on",class:"SwitchRoot"},t("span",{key:"7b8ea2068d7c19d913be25f158983102930fa8b7",class:"SwitchThumb","data-state":this.checked?"checked":"unchecked"})),t("input",{key:"72b9c63b8bc388e7573417e05f2e3fc19a85a968",type:"checkbox",checked:this.checked,"aria-hidden":"true",tabIndex:-1,value:"on",class:"hidden-input"}))}};Wg.style=Kg;const Xg=".sc-ir-tabs-h{display:flex;align-items:center;position:relative;overflow-x:auto;gap:1rem;padding:0 1rem}.tab.sc-ir-tabs{font-size:0.95rem;font-weight:400;cursor:pointer;position:relative;margin:0;padding:0rem;padding-bottom:1rem;transition:color 0.3s ease;user-select:none;background-color:transparent;border:none;outline:none;flex:1 1 0%;text-align:center;white-space:nowrap}.tab[data-disabled].sc-ir-tabs{cursor:auto}.tab.sc-ir-tabs:hover{opacity:80%}.tab[data-state='selected'].sc-ir-tabs,.tab[data-state='selected'].sc-ir-tabs:hover{color:var(--blue, #1e9ff2);opacity:100%}.active-indicator.sc-ir-tabs{padding:0;bottom:0px;position:absolute;height:3px;border-radius:4px;transition:transform 0.3s ease, width 0.3s ease;background:var(--blue, #1e9ff2)}";const Jg=Xg;const Qg=class{constructor(t){e(this,t);this.tabChanged=a(this,"tabChanged",7)}get el(){return o(this)}tabs=[];initialTab;disabled=false;ariaLabel="Tabs";_selectedTab;tabChanged;activeIndicator;animationFrameId;componentWillLoad(){const e=this.tabs?.find((e=>e.id===this.initialTab));if(e){this.selectTab(e)}else if(this.tabs?.length>0){this.selectTab(this.tabs[0])}}disconnectedCallback(){if(this.animationFrameId){cancelAnimationFrame(this.animationFrameId)}}updateActiveIndicator(){if(this.animationFrameId){cancelAnimationFrame(this.animationFrameId)}requestAnimationFrame((()=>{const e=this.el.querySelector(`.tab[data-state="selected"]`);if(e){const{left:t,width:i}=e.getBoundingClientRect();const a=this.el.getBoundingClientRect().left;const r=t-a-this.remSize;this.activeIndicator.style.width=`${i-this.remSize}px`;this.activeIndicator.style.transform=`translateX(${r}px)`}}))}remSize=(()=>{const e=getComputedStyle(document.documentElement).fontSize;return parseFloat(e)})();selectTab(e){if(this.disabled)return;this._selectedTab=e;this.updateActiveIndicator();this.tabChanged.emit(e)}handleKeyDown(e,t){if(this.disabled)return;const i=this.tabs.findIndex((e=>e.id===t.id));let a=i;switch(e.key){case"ArrowRight":e.preventDefault();a=(i+1)%this.tabs.length;break;case"ArrowLeft":e.preventDefault();a=i===0?this.tabs.length-1:i-1;break;case"Home":e.preventDefault();a=0;break;case"End":e.preventDefault();a=this.tabs.length-1;break;case"Enter":case" ":e.preventDefault();this.selectTab(t);return;default:return}const r=this.tabs[a];if(r){this.selectTab(r);requestAnimationFrame((()=>{const e=this.el.querySelector(`button.tab[data-tab-id="${r.id}"]`);if(e){e.focus()}}))}}render(){return t(i,{key:"cf3747656a15e830ce413e4a8732897e66badb41",role:"tablist","aria-label":this.ariaLabel,"aria-orientation":"horizontal"},this.tabs.map((e=>t("button",{class:"tab",key:e.id,type:"button","data-tab-id":e.id,role:"tab",tabindex:this._selectedTab?.id===e.id?0:-1,"aria-selected":this._selectedTab?.id===e.id?"true":"false","aria-controls":`tabpanel-${e.id}`,id:`tab-${e.id}`,disabled:this.disabled,"data-state":this._selectedTab?.id===e.id?"selected":undefined,onClick:()=>this.selectTab(e),onKeyDown:t=>this.handleKeyDown(t,e)},e.label))),t("span",{key:"1acec6b0b11a8dd6edf7dcf673bb278b306dbd6f",class:"active-indicator",ref:e=>this.activeIndicator=e}))}};Qg.style=Jg;const Zg="";const em=Zg;const tm=class{constructor(t){e(this,t);this.cleanSelectedTask=a(this,"cleanSelectedTask",7);this.skipSelectedTask=a(this,"skipSelectedTask",7)}task;isCheckable;isSkippable;cleanSelectedTask;skipSelectedTask;render(){const e="Mark as clean";const a=this.task.housekeeper?`${e} for ${this.task.housekeeper.slice(0,20)}`:e;const o=this.task.housekeeper?`Clean & Inspect for ${this.task.housekeeper.slice(0,20)}`:e;return t(i,{key:"4fe8552cfa2b1101232a4b46bf5479fff4722bc0",class:"card p-1 flex-fill m-0",style:{gap:"0.5rem"}},t("div",{key:"09e9c6ff904fd3b69d6ac9886575cd3ffa1d331e",class:"d-flex align items-center p-0 m-0 justify-content-between",style:{gap:"0.5rem"}},t("div",{key:"6ef375de9ae0ecb1457b3a382645e611629dd32f",class:"d-flex align items-center p-0 m-0",style:{gap:"0.5rem"}},t("p",{key:"1e799c127cb0e3814dcb544e45f4803ecaf65608",class:"m-0 p-0"},this.task.formatted_date),t("span",{key:"843b06f6f9a0270dd5f9c71d5f533ad5e32a2f9e"},"-"),t("p",{key:"381af7a412c870a7eb6abc416b955697678e10cd",class:"m-0 p-0"},"Unit ",t("b",{key:"c2cfe31b908c8418b31ea46c642416c3eb605611"},this.task.unit.name)))),t("p",{key:"32908116b9fe0e609d0ceabdf330b59f22e201c1",class:"m-0 p-0"},this.task.status.description," ",t("span",{key:"1ab3fa2a5be8640917af59e482497c2820722266",style:{marginLeft:"0.5rem"}},this.task.hint)),t("p",{key:"529ee605b91d710ebe473355aa52fdf9e34a162d",class:"m-0 p-0 d-flex align-items-center mb-1",style:{gap:"1rem"}},t("span",{key:"ac34071a148f2e6486832c7a20140797dbea6be7",class:"m-0 p-0 d-flex align-items-center",style:{gap:"0.5rem"}},t("svg",{key:"f73033fd7c3d207d47478b164af18cc9cd14093d",width:"16",height:"16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},t("path",{key:"f021138928528c1d4aa9473a2efd411e83e2e2a8",fill:"currentColor",d:"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"})),t("span",{key:"9205286febece5fcf6209ad60dc7eea20e15f15c"},t("b",{key:"be2662d0eb18a4ee08b81f47690d41035e7ef185"},this.task.adult)," Adults")),t("span",{key:"0ee46307ee4bc1d75db3370247ea323bcde60011",class:"m-0 p-0 d-flex align-items-center",style:{gap:"0.5rem"}},t("svg",{key:"a967dbe89ee37ec52503b3b4d0c70408fdbe22c7",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 320 512"},t("path",{key:"beca96f0509743440e17c147d35f2631e16b8fc0",fill:"currentColor",d:"M96 64a64 64 0 1 1 128 0A64 64 0 1 1 96 64zm48 320l0 96c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-192.2L59.1 321c-9.4 15-29.2 19.4-44.1 10S-4.5 301.9 4.9 287l39.9-63.3C69.7 184 113.2 160 160 160s90.3 24 115.2 63.6L315.1 287c9.4 15 4.9 34.7-10 44.1s-34.7 4.9-44.1-10L240 287.8 240 480c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-96-32 0z"})),t("span",{key:"1b784f28dff49133705cf8e566a9d709b03093ac"},t("b",{key:"240090f45dd25f0048ef10d9ad68247783bd5def"},this.task.child)," Children")),t("span",{key:"224e70c80081ad86e1776b290a95c01c6075aa03",class:"m-0 p-0 d-flex align-items-center",style:{gap:"0.5rem"}},t("svg",{key:"9ba9f5211ea784396746b88e96d2138d7449e4f2",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-baby-icon lucide-baby"},t("path",{key:"d1d867d302191227663ea1453f37576557559378",d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5"}),t("path",{key:"6f5c2cfca240dac7595fc3d776dd13fae6296d8b",d:"M15 12h.01"}),t("path",{key:"32c56f158104a6ecd5e0d43cc7a37af200dd6a73",d:"M19.38 6.813A9 9 0 0 1 20.8 10.2a2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1"}),t("path",{key:"2d0fc81eaeb08d198c91700ee6ad56b869f22b48",d:"M9 12h.01"})),t("span",{key:"9fe6ba04c0c4e08ab3b24d9d2cc69a6d908b0df3"},t("b",{key:"1a4b7160957990c9956206a1013e45bda5ddad7c"},this.task.infant)," Infants"))),this.isCheckable&&t(r,{key:"4fd1d727d170fb5d5e7315c4f3c53ad878eb9ff2"},t("div",{key:"f92b09833ba59072dfd6ea3ed70d239ff5001e2c"},t("ir-button",{key:"cffc9b6a8ea7708fdf33dea3adb7fcb7502d56bf",onClickHandler:()=>{uu(this.task);this.cleanSelectedTask.emit({task:this.task,status:"001"})},size:"sm",text:a,labelStyle:{textAlign:"left !important"},btn_styles:"text-left"})),t("div",{key:"75e77961ed3a145f509e6b381aed8314eb8911c4"},t("ir-button",{key:"1805241dc9f8e26ea726c01717b2923b0002c0da",onClickHandler:()=>{uu(this.task);this.cleanSelectedTask.emit({task:this.task,status:"004"})},size:"sm",text:o,labelStyle:{textAlign:"left !important"},btn_styles:"text-left"}))),this.isSkippable&&t("div",{key:"a1abc21096c9a765091767b72f55ff88e96d5b7b"},t("ir-button",{key:"71d04b77cd7e6610f533b2d1484629c1541b569d",onClickHandler:()=>{this.skipSelectedTask.emit(this.task)},size:"sm",text:"Skip",labelStyle:{textAlign:"left !important"},btn_styles:"text-left"})))}};tm.style=em;const im=".sc-ir-tasks-filters-h{display:block;min-width:20vw;height:100%;flex:1}@media (min-width: 1024px){.collapse-btn.sc-ir-tasks-filters{display:none}#hkTasksFiltersCollapse.collapse.sc-ir-tasks-filters:not(.show){display:block}}";const am=im;const rm=class{constructor(t){e(this,t);this.applyFilters=a(this,"applyFilters",7)}isLoading;filters={cleaning_periods:{code:""},housekeepers:"000",cleaning_frequencies:{code:""},dusty_units:{code:""},highlight_check_ins:{code:""}};collapsed=false;applyFilters;baseFilters;componentWillLoad(){this.baseFilters={cleaning_periods:ke?.hk_criteria?.cleaning_periods[0],housekeepers:[],cleaning_frequencies:y.cleaning_frequency??ke?.hk_criteria?.cleaning_frequencies[0],dusty_units:ke?.hk_criteria?.dusty_periods[0],highlight_check_ins:ke?.hk_criteria?.highlight_checkin_options[0]};this.filters={...this.baseFilters,housekeepers:"000"}}updateFilter(e){this.filters={...this.filters,...e}}applyFiltersEvt(e){e.stopImmediatePropagation();e.stopPropagation();this.applyFilters.emit({...this.filters,housekeepers:this.filters.housekeepers==="000"?this.baseFilters.housekeepers:[{id:Number(this.filters.housekeepers)}]})}resetFilters(e){e.stopImmediatePropagation();e.stopPropagation();this.filters={...this.baseFilters,housekeepers:"000"};this.applyFilters.emit({...this.filters,housekeepers:this.filters.housekeepers==="000"?this.baseFilters.housekeepers:[{id:Number(this.filters.housekeepers)}]})}render(){return t("div",{key:"f159714c6968bb3d6ac4adb0f8c12399dff96c93",class:"card mb-0 p-1 d-flex flex-column"},t("div",{key:"9a3d285e73dc8dbf28642c823c320e13f0cc170c",class:"d-flex align-items-center justify-content-between"},t("div",{key:"4378e400bcdf5a9e9e5f0c06ef1e376b384a696e",class:"d-flex align-items-center",style:{gap:"0.5rem"}},t("svg",{key:"6c8beb3ca2f09bdd87bc75be57941e44a15f5398",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",height:18,width:18},t("path",{key:"e3c8697332ded77549dafdcea7fd6f91ff6af982",fill:"currentColor",d:"M3.9 54.9C10.5 40.9 24.5 32 40 32l432 0c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9 320 448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6l0-79.1L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"})),t("h4",{key:"8ffa6b15de15dd6a0abd15b59641704d0e916357",class:"m-0 p-0 flex-grow-1"},g.entries.Lcz_Filters)),t("ir-button",{key:"4aec1934b3c1672847209fd69114c2f2bb826171",variant:"icon",id:"drawer-icon","data-toggle":"collapse","data-target":"#hkTasksFiltersCollapse","aria-expanded":this.collapsed?"true":"false","aria-controls":"hkTasksFiltersCollapse",class:"mr-1 collapse-btn",icon_name:this.collapsed?"closed_eye":"open_eye",onClickHandler:()=>{this.collapsed=!this.collapsed},style:{"--icon-size":"1.6rem"}})),t("div",{key:"086e0985c310e16c14ffc9f265e629fb78b8b27d",class:"m-0 p-0 collapse",id:"hkTasksFiltersCollapse"},t("div",{key:"e487bee13e2c37537a0302be4ec41df8810ff51c",class:"d-flex flex-column",style:{gap:"0.5rem"}},t("fieldset",{key:"3fd970b25c42e26d0e702000d9159bf07b5384b2",class:"pt-1"},t("p",{key:"d147ea9582d559b4ff1357d0876f269f2cede237",class:"m-0 pt-0 px-0",style:{paddingBottom:"0.25rem"}},g.entries.Lcz_Period),t("ir-select",{key:"32ff52116241ac78ef9eea65b2047eab830a8f8d",testId:"period",selectedValue:this.filters?.cleaning_periods?.code,showFirstOption:false,data:ke?.hk_criteria?.cleaning_periods.map((e=>({text:e.description,value:e.code}))),onSelectChange:e=>{this.updateFilter({cleaning_periods:{code:e.detail}})}})),ke?.hk_criteria?.housekeepers.length>1&&t("fieldset",{key:"96b9183b2ec703286e3a3c433bceb13b8a1e99a5"},t("p",{key:"84ac93d8e02efea7dcd6f400de2f8ada542586c0",class:"m-0 pt-0 px-0",style:{paddingBottom:"0.25rem"}},g.entries.Lcz_Housekeepers),t("ir-select",{key:"a1df9435abc49c667b9280c62c7962e839b82382",testId:"housekeepers",selectedValue:this.filters?.housekeepers,showFirstOption:false,data:[{text:g.entries.Lcz_Allhousekeepers,value:"000"},...ke?.hk_criteria?.housekeepers.map((e=>({text:e.name,value:e.id.toString()}))).sort(((e,t)=>e.text.toLowerCase().localeCompare(t.text.toLowerCase())))],onSelectChange:e=>{this.updateFilter({housekeepers:e.detail})}})),t("fieldset",{key:"889643a67b77b1b132cd44a977371ef25163c8e5"},t("p",{key:"e72de914270de38834b38e0241ccb4923ca4b86e",class:"m-0 pt-0 px-0",style:{paddingBottom:"0.25rem"}},"Include dusty units"),t("ir-select",{key:"bcfbc089f958690b0e1f803bdf97abd08c21fecf",testId:"dusty_units",showFirstOption:false,selectedValue:this.filters?.dusty_units?.code,data:ke.hk_criteria?.dusty_periods?.map((e=>({text:e.description,value:e.code}))),onSelectChange:e=>{e.stopImmediatePropagation();e.stopPropagation();this.updateFilter({dusty_units:{code:e.detail}})}})),t("fieldset",{key:"631165dd87076d4000b050de86f88efbd371d8ea",class:"mb-1"},t("p",{key:"375ddae1d2ec80119b8cd418511f0ee981d2bab0",class:"m-0 pt-0 px-0",style:{paddingBottom:"0.25rem"}},g.entries["Lcz_HighlightCheck-insFrom"]),t("ir-select",{key:"9fadecf2fc8a797a55ad052922002341b2921ff4",testId:"highlight_check_ins",selectedValue:this.filters?.highlight_check_ins?.code,showFirstOption:false,onSelectChange:e=>{this.updateFilter({highlight_check_ins:{code:e.detail}})},data:ke.hk_criteria?.highlight_checkin_options?.map((e=>({text:e.description,value:e.code})))})),t("div",{key:"4bc48cd95c4c288ec90767a530cb9ac5b18c75d0",class:"d-flex align-items-center justify-content-end",style:{gap:"1rem"}},t("ir-button",{key:"ea3d2a81d792037e1eb70044ae532c1bdc92d863",btn_type:"button","data-testid":"reset",text:g.entries.Lcz_Reset,size:"sm",btn_color:"secondary",onClickHandler:e=>this.resetFilters(e)}),t("ir-button",{key:"916156a2873650a6815364fe7ccfff8e14e720a3",btn_type:"button","data-testid":"apply",isLoading:this.isLoading,text:g.entries.Lcz_Apply,size:"sm",onClickHandler:e=>this.applyFiltersEvt(e)})))))}};rm.style=am;const om=".sc-ir-tasks-header-h{display:flex;gap:1rem;flex-wrap:wrap}.action-buttons.sc-ir-tasks-header{display:flex;align-items:center}.search-filter-container.sc-ir-tasks-header{flex:1 1 0%}.clean-button.sc-ir-tasks-header{display:none}@media (min-width: 640px){.sc-ir-tasks-header-h{flex-direction:row;justify-content:space-between;align-items:center;margin-bottom:1rem}.search-filter-container.sc-ir-tasks-header{display:flex}.action-buttons.sc-ir-tasks-header{justify-content:stretch}.clean-button.sc-ir-tasks-header{display:flex}}";const nm=om;const sm=class{constructor(t){e(this,t);this.headerButtonPress=a(this,"headerButtonPress",7)}btnRef;headerButtonPress;handleCleanedButtonAnimation(e){e.stopImmediatePropagation();e.stopPropagation();this.btnRef.bounce()}render(){return t(i,{key:"39a5eec4515a868addd8412979c8ba67ae15dd47"},t("div",{key:"3571d1492e714662439cdb95fc3ef591b668592e",class:"search-filter-container",style:{gap:"1rem"}},t("ir-input-text",{key:"7578cd8445cd81163a7afcbe024508c8f3659aea",class:"search-filter-input",placeholder:"Search unit",variant:"icon",value:Xh.searchField,onTextChange:e=>Qh(e.detail)},t("ir-icons",{key:"226798a38bb3566208345a6b89b0034a4ae79fec",name:"search",slot:"icon"}))),t("div",{key:"20970267957731d56b4fbc64ae6eb2403fe88af2",class:"action-buttons",style:{gap:"1rem"}},t("ir-button",{key:"1bb2f88bcdc017349c17ffb22109816118ca03df",size:"sm",btn_color:"outline",text:g.entries.Lcz_Export,onClickHandler:e=>{e.stopImmediatePropagation();e.stopPropagation();this.headerButtonPress.emit({name:"export"})},btnStyle:{height:"100%"},iconPosition:"right",icon_name:"file",icon_style:{"--icon-size":"14px"}}),t("ir-button",{key:"25e68a2124c422df7d78c57dfe7d15dc54e07e87",size:"sm",btn_color:"outline",text:g.entries.Lcz_Archives,btnStyle:{height:"100%"},onClickHandler:e=>{e.stopImmediatePropagation();e.stopPropagation();this.headerButtonPress.emit({name:"archive"})}}),t("ir-button",{key:"c574b4d75658553ee6630df6a23146d5a5064bce",class:"clean-button",onClickHandler:e=>{e.stopImmediatePropagation();e.stopPropagation();this.headerButtonPress.emit({name:"cleaned"})},btnStyle:{height:"100%"},size:"sm",btn_disabled:!(Xh.selectedTasks.length>0),text:"Cleaned",ref:e=>this.btnRef=e}),t("ir-button",{key:"c2c307e3952342941b2ec01622973df347451308",class:"clean-button",onClickHandler:e=>{e.stopImmediatePropagation();e.stopPropagation();this.headerButtonPress.emit({name:"clean-inspect"})},btnStyle:{height:"100%"},size:"sm",btn_disabled:!(Xh.selectedTasks.length>0),text:"Clean & Inspect",ref:e=>this.btnRef=e})))}};sm.style=nm;const lm=".sc-ir-tasks-table-h{display:flex;align-items:center}.selected-row.sc-ir-tasks-table{background-color:rgba(0, 0, 255, 0.1)}.selected-row.sc-ir-tasks-table:hover{background-color:rgba(0, 0, 255, 0.15)}.header-content.sc-ir-tasks-table{height:100%}.highlighted-unit.sc-ir-tasks-table{background:#000;color:white;padding:0.2rem 0.3rem;border-radius:4px}.table-container.sc-ir-tasks-table{height:100%}.task-table-row.sc-ir-tasks-table td.sc-ir-tasks-table{background:white !important}.task-table-row.sc-ir-tasks-table:hover td.sc-ir-tasks-table{background:#e2e6ea3f !important}.table-container.sc-ir-tasks-table{display:none}.mobile-tasks-container.sc-ir-tasks-table{display:flex;flex-direction:column;gap:1rem}@media (min-width: 640px){.mobile-tasks-container.sc-ir-tasks-table{display:none}.table-container.sc-ir-tasks-table{display:flex}}";const cm=lm;const dm=".ir-table-row.sc-ir-tasks-table td.sc-ir-tasks-table{padding:0.5rem 1rem !important;text-align:left;z-index:2;background-color:var(--wa-color-surface-default);white-space:nowrap;color:var(--wa-color-text-normal);box-sizing:border-box}.table--container.sc-ir-tasks-table{flex:1 1 0%}.table--container.sc-ir-tasks-table{overflow-x:auto}.table.sc-ir-tasks-table td.sc-ir-tasks-table{border-top:0;border-bottom:1px solid var(--wa-color-neutral-border-quiet, #abaeb9);transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.table.sc-ir-tasks-table tbody.sc-ir-tasks-table tr.sc-ir-tasks-table:last-child>td.sc-ir-tasks-table{border-bottom:0 !important}.table.sc-ir-tasks-table thead.sc-ir-tasks-table th.sc-ir-tasks-table{border:none !important;background:#ececec;background:color-mix(in oklab, var(--wa-color-neutral-fill-quiet, #f1f2f3) 60%, transparent);color:#374151;padding:0.5rem 1rem !important;text-align:left}.data-table.sc-ir-tasks-table thead.sc-ir-tasks-table th.sc-ir-tasks-table{box-sizing:border-box;background:var(--wa-color-surface-default) !important;padding-top:0.5rem !important;padding-bottom:0.5rem !important;border-bottom:1px solid var(--wa-color-neutral-90) !important;color:var(--wa-color-text-normal)}.data-table.sc-ir-tasks-table .empty-row.sc-ir-tasks-table{height:50vh !important;text-align:center;color:var(--wa-color-gray-60)}.data-table--pagination.sc-ir-tasks-table{padding:0.5rem 1rem;position:sticky;bottom:0;background:var(--wa-color-surface-default);border-top:1px solid var(--wa-color-neutral-90)}.selected.sc-ir-tasks-table td.sc-ir-tasks-table{background:#e3f3fa !important}.selected.sc-ir-tasks-table td.sc-ir-tasks-table{color:var(--gray-dark) !important;transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.sortable.sc-ir-tasks-table,.ir-table-row.sc-ir-tasks-table{transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.sortable.sc-ir-tasks-table{text-transform:capitalize}.sortable.sc-ir-tasks-table:hover{color:#212529;background-color:#e2e8f0 !important;border-color:#dae0e5;cursor:pointer}.ir-table-row.sc-ir-tasks-table:hover td.sc-ir-tasks-table{background:#e2e6ea3f !important;background:var(--wa-color-neutral-fill-quiet, #f1f2f3) !important}.sortable.sc-ir-tasks-table:active{color:#212529;background-color:#e2e8f0;border-color:#d3d9df}.sortable.sc-ir-tasks-table svg.sc-ir-tasks-table{color:var(--blue)}.sticky-column.sc-ir-tasks-table{position:sticky !important;right:0;background-color:white}";const hm=dm;const um=class{constructor(t){e(this,t);this.animateCleanedButton=a(this,"animateCleanedButton",7);this.rowSelectChange=a(this,"rowSelectChange",7);this.sortingChanged=a(this,"sortingChanged",7);this.skipSelectedTask=a(this,"skipSelectedTask",7)}tasks=[];animateCleanedButton;rowSelectChange;sortingChanged;skipSelectedTask;componentWillLoad(){if(this.tasks&&this.tasks.length>0){bu("date","ASC")}}handleSort(e){let t=Xh.sorting.direction;if(Xh.sorting.field===e){t=Xh.sorting.direction==="ASC"?"DESC":"ASC"}else{t="ASC"}bu(e,t);this.sortingChanged.emit({field:e,direction:t})}handleClearSelectedHkTasks(e){e.stopImmediatePropagation();e.stopPropagation();hu()}handleTasksChange(e){if(e?.length){hu()}}toggleSelection(e){uu(e);this.animateCleanedButton.emit(null);this.emitSelectedTasks()}emitSelectedTasks(){this.rowSelectChange.emit(Xh.selectedTasks)}get allSelected(){return wu()}toggleSelectAll(){if(this.allSelected){hu()}else{pu(mu());this.animateCleanedButton.emit(null)}this.emitSelectedTasks()}isCheckable(e){return fe(e.date,"YYYY-MM-DD").isSameOrBefore(fe(),"days")}isSkippable(e){const t=fe().isSame(fe(e.date,"YYYY-MM-DD"),"date");return t&&e.status.code==="IH"}render(){const e=ke?.hk_criteria?.housekeepers?.length>1;const a=nu();const r=su();return t(i,{key:"cf8d22aa87fbcb2184b2bd0232b96695a58f8aec",class:"flex-fill"},t("section",{key:"a31ff874f2c2661cdf0ced699b5f1e847e8f8027",class:"mobile-tasks-container flex-fill"},t("div",{key:"01c3355ae4f01cd4c6a3aa71eb28c087e2da4de7",class:"card p-1 m-0"},t("ir-tasks-header",{key:"6f656334812575b37bbf6b783f164cb5d9589f22"})),r?.length===0&&t("p",{key:"49f9ebcf1d941225e99bc4434ca499fe561874b7",class:"mx-auto"},g.entries.Lcz_NoTasksFound),r.map((e=>{const i=this.isCheckable(e);const a=this.isSkippable(e);return t("ir-tasks-card",{task:e,isSkippable:a,key:e.id,isCheckable:i})})),t("ir-tasks-table-pagination",{key:"22a76ce4ac74e5368d131643a1cf8a0c4f7da6bb"})),t("div",{key:"c5e2ee4cb586d5f16c8763c27008f8c732de578f",class:"card table-container flex-fill p-1 m-0"},t("ir-tasks-header",{key:"52fa0c4a1a2181d20c385f5ca214a5be9a046a5e"}),t("div",{key:"dbd2e3dd08830a03c3c2259d783f0fafc504748e",class:"table-responsive mb-auto"},t("table",{key:"a1403a4976766e50e07437efbd6f51d7ad3f782d",class:"table","data-testid":"hk_tasks_table"},t("thead",{key:"63d923464daa485d0f16cf56d0e5ccc8ac993b38",class:"table-header"},t("tr",{key:"dcb9d7b47781abd0794db5ca2ed287129c568c12"},t("th",{key:"681e9a2310ecc30a284f6432bc41cd2b94938fcd",class:"task-row"},t("ir-checkbox",{key:"1787b72d305cb7b283fa2d7df37823e8aa3de41c",indeterminate:Xh.selectedTasks.length>0&&Xh.selectedTasks.length<mu().length,checked:this.allSelected,onCheckChange:()=>this.toggleSelectAll()})),t("th",{key:"893de1bfe70accf166752ab12b514b8b83ebf64e",class:"extra-padding"},g.entries.Lcz_Period),t("th",{key:"0875e7444e45f98b9301d05d93dc298967f866dd",class:"extra-padding"},this.tasks.length>1&&this.tasks.length+" ",g.entries.Lcz_Unit),t("th",{key:"b7013325a0df23e25f6395600077dbdbc5a46c14",class:"sortable extra-padding",onClick:()=>this.handleSort("status")},t("div",{key:"e7f437d10694985c211ed575fcb4698aeecc2370",class:"d-flex align-items-center",style:{gap:"0.5rem"}},t("span",{key:"976a06ebdcebd101f6b207d3b10ccdaa4dccc2d9"},g.entries.Lcz_Status),t("svg",{key:"613abb94a771d5883893c9ffd71124bb7bdb7a6e",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-arrow-up-down"},t("path",{key:"98d7200f048306d510cb4f3bc95f463aa46186b7",d:"m21 16-4 4-4-4"}),t("path",{key:"cdd76ffd5caab15cdd9a74737077395a25c6b566",d:"M17 20V4"}),t("path",{key:"1f27c242a5166c30a1dc7c2dc21ed070789481f6",d:"m3 8 4-4 4 4"}),t("path",{key:"b6269f5e698e09005e55ef7f6ce242e190a5ec9e",d:"M7 4v16"})))),t("th",{key:"86afccdead2281715909451be5dce4c990ab8847",class:"extra-padding text-left"},g.entries.Lcz_Hint),t("th",{key:"6a27ecb0ac09bb815d0f2a906eb442a713e06547",class:"text-left"},g.entries.Lcz_A,"d"),t("th",{key:"918332eb8780a74726e1ee25621910728dd38563",class:"text-left"},g.entries.Lcz_C,"h"),t("th",{key:"2fa5e7af1b16e802ffdc87cd2b2513f04b42a28a",class:"text-left text-left"},g.entries.Lcz_I,"n"),e&&t("th",{key:"e7689b0e3e74ee43e61a52798eb65137246bbf70",style:{textAlign:"start"},class:"sortable extra-padding",onClick:()=>this.handleSort("housekeeper")},t("div",{key:"01896abcd12e064111fab3980e12b48a0d0a9f3e",class:"d-flex align-items-center",style:{gap:"0.5rem"}},t("span",{key:"f9c025ad6e6cd3f147ab752c749c084eef37f495"},g.entries.Lcz_Housekeeper),t("svg",{key:"56de6985c9dbd2a55e0d6dffa9c037f76c6a08c8",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-arrow-up-down"},t("path",{key:"2d939093edf38f672695db24db0b30b8c0fd669d",d:"m21 16-4 4-4-4"}),t("path",{key:"50225188bff4befdab9d75dcbf660b7ef151d668",d:"M17 20V4"}),t("path",{key:"20ea7295c60b027be3ff072a9d6027607e57f2c4",d:"m3 8 4-4 4 4"}),t("path",{key:"9dcadcd82ba0140dcdf1258b8c41864c69b33d70",d:"M7 4v16"})))),t("th",{key:"9de10afa182849d2b8097695b431e846687b064e"}))),t("tbody",{key:"99a9a93ff552f987a36f35ed2d96d6dcdc85f7df"},a.length===0&&t("tr",{key:"732636302a0decdecfd27ebd2cadc28ff60181a3",class:"ir-table-row"},t("td",{key:"5cc219d541b421111cc7b8a4cb383143cc148647",colSpan:9,class:"text-left"},t("div",{key:"39b651584dbd3d7c61dd82d951c382f182b60317",style:{height:"300px"},class:"d-flex align-items-center justify-content-center"},t("span",{key:"0ff8dc576cc3e9556afcbfdbe9f982c1b152ded9"}," ",g.entries.Lcz_NoTasksFound)))),a?.map((i=>{const a=Xh.selectedTasks.some((e=>e.id===i.id));const r=this.isCheckable(i);return t("tr",{"data-date":i.date,"data-testid":`hk_task_row`,"data-assigned":i.housekeeper?"true":"false",style:r&&{cursor:"pointer"},onClick:()=>{if(!r){return}this.toggleSelection(i)},class:{selected:a,"task-table-row ir-table-row":true},key:i.id},t("td",{class:"task-row "},r&&t("ir-checkbox",{checked:a})),t("td",{class:"task-row extra-padding"},i.formatted_date),t("td",{class:"task-row extra-padding"},t("span",{class:{"highlighted-unit":i.is_highlight}},i.unit.name)),t("td",{class:"task-row extra-padding text-left"},i.status.description),t("td",{class:"task-row extra-padding text-left"},i.hint),t("td",{class:"task-row text-left"},i.adult),t("td",{class:"task-row text-left"},i.child),t("td",{class:"task-row text-left"},i.infant),e&&t("td",{class:" task-row extra-padding",style:{textAlign:"start"}},i.housekeeper??g.entries.Lcz_Unassigned),t("td",null,this.isSkippable(i)&&t("ir-button",{text:"Skip",size:"sm",onClickHandler:()=>{this.skipSelectedTask.emit(i)}})))}))))),t("div",{key:"1fb91ea35df48750cd02c976929bd246013e872b",class:"mt-auto"},t("ir-tasks-table-pagination",{key:"051c6484af6ab03169ca943963b0699c3795e168"}))))}static get watchers(){return{tasks:["handleTasksChange"]}}};um.style=cm+hm;const pm=".sc-ir-tasks-table-pagination-h{display:block;margin-top:auto}.page-item.active.sc-ir-tasks-table-pagination .page-link.sc-ir-tasks-table-pagination{background-color:var(--blue)}.tasks-pagination.sc-ir-tasks-table-pagination{display:none !important}@media (min-width: 640px){.tasks-load-more.sc-ir-tasks-table-pagination{display:none}.tasks-pagination.sc-ir-tasks-table-pagination{display:flex !important}}";const fm=pm;const bm=class{constructor(t){e(this,t)}render(){const{currentPage:e,pageSize:a,totalPages:r,mobileCurrentPage:o}=Xh.pagination;const n=Xh.tasks?.length??0;const s=n===0?0:(e-1)*a+1;const l=Math.min(e*a,n);const c=Xh.pagination.tasksList[0]>n?Xh.pagination.tasksList.slice(0,1):Xh.pagination.tasksList;return t(i,{key:"ad20c7dbe1d97e6e47ec6acb4020600dca942478"},lu()&&t("ir-button",{key:"93b17157673b1d1d06c11e58a8de3b157fc5654d",size:"sm",class:"tasks-load-more",text:"Load more",onClickHandler:()=>cu(o+1)}),t("ir-pagination",{key:"777568284a4d7c5fdbccf8591d7bd3fbe7aa2b85",showing:{from:s,to:l},class:"tasks-pagination",total:n,pages:r,pageSize:a,currentPage:e,pageSizes:c,onPageChange:e=>iu(e.detail.currentPage),onPageSizeChange:e=>tu(e.detail.pageSize),showTotalRecords:true,recordLabel:"tasks"}))}};bm.style=fm;const gm=".prepend-textarea.sc-ir-textarea{padding:0 !important}.ta-prepend-text.sc-ir-textarea{width:100%}";const mm=gm;const wm=class{constructor(t){e(this,t);this.textChange=a(this,"textChange",7)}rows=3;cols=5;text="";label="<label>";placeholder="<placeholder>";value="";maxLength=250;textareaClassname;variant="default";labelWidth=3;styles;testId;error=false;textChange;handleAriaInvalidChange(e){this.error=e==="true"}render(){if(this.variant==="prepend"){return t("fieldset",{class:"input-group"},t("div",{class:`input-group-prepend col-${this.labelWidth} prepend-textarea`},t("span",{class:"input-group-text ta-prepend-text"},this.label)),t("textarea",{"data-testid":this.testId,value:this.value,class:`form-control`,style:{height:"7rem",...this.styles},maxLength:this.maxLength,onChange:e=>this.textChange.emit(e.target.value),"aria-label":this.label}))}return t("div",{class:"form-group"},t("label",null,this.label),t("textarea",{"data-testid":this.testId,style:this.styles,maxLength:this.maxLength,rows:this.rows,value:this.value,class:`form-control ${this.textareaClassname} ${this.error?"border-danger":""}`,placeholder:this.placeholder,onInput:e=>this.textChange.emit(e.target.value)}))}static get watchers(){return{"aria-invalid":["handleAriaInvalidChange"]}}};wm.style=mm;const ym=".sc-ir-title-h{padding:0px 0;margin-bottom:20px;display:flex;align-items:center;width:100%}[border-shown].sc-ir-title-h{border-bottom:1px solid #e4e5ec !important;border-color:#e4e5ec !important;padding-bottom:15px}[display-context='sidebar'].sc-ir-title-h{padding:15px 0;justify-content:space-between !important;width:100% !important;border-bottom:1px solid #e4e5ec !important;border-color:#e4e5ec !important}.title-body.sc-ir-title{margin:0;padding:0}.label.sc-ir-title{font-family:inherit !important}@media only screen and (max-width: 641px){.sc-ir-title-h{flex-direction:column;gap:8px;align-items:flex-start}[display-context='sidebar'].sc-ir-title-h{flex-direction:row}}";const vm=ym;const km=class{constructor(t){e(this,t);this.closeSideBar=a(this,"closeSideBar",7)}label;borderShown;displayContext="default";justifyContent="start";closeSideBar;get el(){return o(this)}componentDidLoad(){this.el.style.justifyContent=this.justifyContent}handleJustifyContentChange(e,t){if(e!==t){this.el.style.justifyContent=e}}render(){return t(i,{key:"182da9b8b6773d073b5aeadefb1838639eb36f1e"},t("h4",{key:"f7991ac7176780f7baaa14d73fd04ff482ccecdf",class:"text-left label font-medium-2 py-0 my-0"},this.label),this.displayContext==="sidebar"&&t("ir-icon",{key:"49ea58095ac97927a50b6b21c67d1d9f85ca054d",class:"close",onIconClickHandler:()=>{this.closeSideBar.emit(null)}},t("svg",{key:"1b1f8a9d73de9e3cec54aeccc6a1fe11f0e36047",slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",height:20,width:20},t("path",{key:"1678a8d8c89abd402018ac187b6bf288440c78d9",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"}))),this.displayContext!=="sidebar"&&t("div",{key:"c396fa5f3165388322bbf272e29ab3d391b73b74",class:"title-body"},t("slot",{key:"716f75cf246e5e7c773deb2447c2a10759f2ffce",name:"title-body"})))}static get watchers(){return{justifyContent:["handleJustifyContentChange"]}}};km.style=vm;const xm="button.sc-ir-toast,p.sc-ir-toast,h3.sc-ir-toast,div.sc-ir-toast{all:unset}.sc-ir-toast-h{--rd-viewport-padding:25px;--rd-success:#2b9a66;position:fixed;bottom:0;right:0;display:flex;flex-direction:column;padding:var(--rd-viewport-padding);gap:10px;max-width:100vw;margin:0;list-style:none;z-index:2147483647;outline:none;pointer-events:none;-webkit-user-select:none;user-select:none}@media (prefers-color-scheme: dark){.sc-ir-toast-h{--rd-success:#33b074}}p.sc-ir-toast{color:hsla(222.2, 84%, 4.9%, 0.8);font-size:13px;line-height:1.3}h1.sc-ir-toast,h2.sc-ir-toast,h3.sc-ir-toast,h4.sc-ir-toast,h5.sc-ir-toast,h6.sc-ir-toast{font-weight:500;color:hsl(222.2, 84%, 4.9%);font-size:15px}[position='top-left'].sc-ir-toast-h{top:0;left:0}[position='top-right'].sc-ir-toast-h{top:0;right:0}[position='bottom-left'].sc-ir-toast-h{bottom:0;left:0}[position='bottom-right'].sc-ir-toast-h{bottom:0;right:0}.icon-container.sc-ir-toast{height:25px;width:25px;border-radius:25px;display:flex;align-items:center;justify-content:center;padding:0;margin:0}.icon-container.sc-ir-toast>svg.sc-ir-toast{margin:0;color:white;stroke-width:5px}.success.sc-ir-toast{background-color:var(--rd-success)}.error.sc-ir-toast{background-color:red}.ToastRoot.sc-ir-toast{background-color:hsl(0, 0%, 100%);border-radius:0.5rem;box-shadow:hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px;padding:15px;display:grid;grid-template-areas:'title action' 'description action';grid-template-columns:auto max-content;column-gap:15px;align-items:center;pointer-events:none;opacity:0;border:1px solid hsl(214.3, 31.8%, 91.4%);position:relative}.ToastRoot[data-state='open'].sc-ir-toast{pointer-events:all;animation:slideIn 150ms cubic-bezier(0.16, 1, 0.3, 1)}.ToastRoot[data-state='closed'].sc-ir-toast{pointer-events:none;animation:hide 100ms ease-in}@-webkit-keyframes slideIn{from{transform:translateX(var(--rd-offset-width))}to{transform:translateX(0)}}@keyframes slideIn{from{transform:translateX(var(--rd-offset-width))}to{transform:translateX(0)}}.ToastTitle.sc-ir-toast{grid-area:title;font-weight:500;color:hsl(222.2, 84%, 4.9%);font-size:15px}.ToastDescription.sc-ir-toast{grid-area:description;margin:0;margin-top:5px;color:hsla(222.2, 84%, 4.9%, 0.8);font-size:13px;line-height:1.3;overflow:hidden;text-overflow:ellipsis}.ToastAction.sc-ir-toast{grid-area:action}";const _m=xm;const Dm=class{constructor(t){e(this,t)}get element(){return o(this)}position="bottom-left";toasts=[];onToast(e){const t=e.detail;this.showToast(t)}showToast(e){const t={positionClass:"toast-top-right",closeButton:true,timeOut:e.duration||5e3};switch(e.type){case"success":toastr.success(e.title,"",t);break;case"error":toastr.error(e.title,"",t);break}}render(){return t(i,{key:"848e16f2b5dca881a69c014d494ed60ba162dbc9"})}};Dm.style=_m;const Cm=".sc-ir-tooltip-h{position:relative}.tooltip-icon.sc-ir-tooltip{margin:0 5px;padding:0}.tooltip-inner-custom.sc-ir-tooltip{min-width:max-content !important}";const Mm=Cm;const Sm=class{constructor(t){e(this,t)}message;withHtml=true;customSlot=false;containerStyle;containerClass;alignment="center";open;tooltipTimeout;toggleOpen(e){if(this.tooltipTimeout){clearTimeout(this.tooltipTimeout)}if(e){this.tooltipTimeout=setTimeout((()=>{this.open=true}),300)}else{this.open=false}}render(){const e=(()=>{switch(this.alignment){case"start":return"justify-content-start";case"end":return"justify-content-end";case"center":return"justify-content-center";default:return"justify-content-center"}})();return t(i,{class:"m-0 p-0"},t("span",{style:this.containerStyle,class:`m-0 p-0 d-flex align-items-center ${e} ${this.containerClass}`,onMouseEnter:()=>this.toggleOpen(true),onMouseLeave:()=>this.toggleOpen(false)},!this.customSlot?t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"m-0 p-0",height:"16",width:"16",viewBox:"0 0 512 512"},t("path",{fill:"#6b6f82",d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"})):t("slot",{name:"tooltip-trigger"})),this.open&&t("div",{class:"tooltip bottom show position-absolute",role:"tooltip"},t("div",{class:"tooltip-arrow"}),t("div",{class:`tooltip-inner fit ${this.customSlot&&"tooltip-inner-custom"}`},t("span",{innerHTML:this.message}))))}};Sm.style=Mm;const Ym=".sc-ir-unit-cell-h{box-sizing:border-box !important}.sc-ir-unit-cell-h *.sc-ir-unit-cell,.sc-ir-unit-cell-h *.sc-ir-unit-cell::before,.sc-ir-unit-cell-h *.sc-ir-unit-cell::after{box-sizing:inherit !important;padding:0;margin:0}[hidden].sc-ir-unit-cell{display:none !important}.sc-ir-unit-cell-h{display:flex;align-items:center;gap:0.5rem;font-size:0.93rem}";const Em=Ym;const Tm=class{constructor(t){e(this,t)}room;render(){return t(i,{key:"a46a2a5c5ec3b918d49f0c13e63b83385b4c6f6b"},t("p",{key:"0bd05b606e2e0d7a45acbe1b71f7a8f68d880075"},this.room.roomtype.name),this.room.unit&&t("ir-unit-tag",{key:"9a1929b45ba3ba22ff7651f223b7e294b8890675",unit:this.room.unit.name}))}};Tm.style=Em;const Im=".sc-ir-unit-tag-h{display:inline-flex;box-sizing:border-box;height:fit-content;width:fit-content;padding:0;margin:0}.unit-tag__content.sc-ir-unit-tag{max-width:50px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box}.unit-tag__el.sc-ir-unit-tag{height:1.4rem;overflow:hidden}.unit-tag__el.sc-ir-unit-tag::part(base){padding-top:0;padding-bottom:0;height:fit-content;box-sizing:border-box;height:fit-content}";const zm=Im;const Om=class{constructor(t){e(this,t)}unit;showTooltip=false;_id=pe();resizeObserver;contentElement;measurementFrame;setContentRef=e=>{if(this.resizeObserver){this.resizeObserver.disconnect()}this.contentElement=e||undefined;if(!this.contentElement){return}this.attachResizeObserver();this.scheduleTooltipUpdate()};componentDidLoad(){this.attachResizeObserver();this.scheduleTooltipUpdate()}disconnectedCallback(){this.resizeObserver?.disconnect();if(this.measurementFrame){cancelAnimationFrame(this.measurementFrame);this.measurementFrame=undefined}}onUnitChange(){this.scheduleTooltipUpdate()}attachResizeObserver(){if(typeof window==="undefined"||!this.contentElement||typeof ResizeObserver==="undefined"){return}if(!this.resizeObserver){this.resizeObserver=new ResizeObserver((()=>this.scheduleTooltipUpdate()))}this.resizeObserver.observe(this.contentElement)}scheduleTooltipUpdate(){if(typeof window==="undefined"){return}if(this.measurementFrame){cancelAnimationFrame(this.measurementFrame)}this.measurementFrame=requestAnimationFrame((()=>{this.measurementFrame=undefined;this.updateTooltipState()}))}updateTooltipState(){if(typeof window==="undefined"){return}const e=this.contentElement;if(!e||!this.unit){if(this.showTooltip){this.showTooltip=false}return}const t=e.scrollWidth>e.clientWidth;if(t!==this.showTooltip){this.showTooltip=t}}render(){return t(r,{key:"9af74200b726d14dafa97935afab31054cdbbf6c"},this.showTooltip&&t("wa-tooltip",{key:"4d318cd4b7981d3e1afb0acce99b25d5578aecf5",for:this._id},this.unit),t("wa-tag",{key:"094ed1f5d4e04b6f7151c327b4767b0dcc8bd24e",id:this._id,class:"unit-tag__el",size:"small",appearance:"filled",variant:"brand"},t("span",{key:"a35d472f306988efae7011923902251fe999dd08",class:"unit-tag__content",ref:this.setContentRef},this.unit)))}static get watchers(){return{unit:["onUnitChange"]}}};Om.style=zm;var Am={exports:{}};(function(e,t){((i,a)=>{function r(e){for(var t={},i=0;i<e.length;i++)t[e[i].toUpperCase()]=e[i];return t}var o=500,n="user-agent",s="",l="?",c="function",d="undefined",h="object",u="string",p="browser",f="cpu",b="device",g="engine",m="os",w="result",y="name",v="type",k="vendor",x="version",_="architecture",D="major",C="model",M="console",S="mobile",Y="tablet",E="smarttv",T="wearable",I="xr",z="embedded",O="inapp",A="brands",B="formFactors",R="fullVersionList",P="platform",N="platformVersion",L="bitness",$="sec-ch-ua",F=$+"-full-version-list",H=$+"-arch",U=$+"-"+L,j=$+"-form-factors",V=$+"-"+S,G=$+"-"+C,q=$+"-"+P,K=q+"-version",W=[A,R,S,C,P,N,_,B,L],X="Amazon",J="Apple",Q="ASUS",Z="BlackBerry",ee="Google",te="Huawei",ie="Microsoft",ae="Motorola",re="Nvidia",oe="OnePlus",ne="OPPO",se="Samsung",le="Sony",ce="Xiaomi",de="Zebra",he="Chromium",ue="Chromecast",pe="Firefox",fe="Opera",be="Facebook",ge="Mobile ",me=" Browser",we="Windows",ye=typeof i!==d,ve=ye&&i.navigator?i.navigator:a,ke=ve&&ve.userAgentData?ve.userAgentData:a,xe=function(e,t){if(typeof e===h&&0<e.length){for(var i in e)if(Me(e[i])==Me(t))return!0;return!1}return!!De(e)&&-1!==Me(t).indexOf(Me(e))},_e=function(e,t){for(var i in e)return/^(browser|cpu|device|engine|os)$/.test(i)||!!t&&_e(e[i])},De=function(e){return typeof e===u},Ce=function(e){if(!e)return a;for(var t,i=[],r=Ee(/\\?\"/g,e).split(","),o=0;o<r.length;o++)-1<r[o].indexOf(";")?(t=Ie(r[o]).split(";v="),i[o]={brand:t[0],version:t[1]}):i[o]=Ie(r[o]);return i},Me=function(e){return De(e)?e.toLowerCase():e},Se=function(e){return De(e)?Ee(/[^\d\.]/g,e).split(".")[0]:a},Ye=function(e){for(var t in e){t=e[t];typeof t==h&&2==t.length?this[t[0]]=t[1]:this[t]=a}return this},Ee=function(e,t){return De(t)?t.replace(e,s):t},Te=function(e){return Ee(/\\?\"/g,e)},Ie=function(e,t){if(De(e))return e=Ee(/^\s\s*/,e),typeof t===d?e:e.substring(0,o)},ze=function(e,t){if(e&&t)for(var i,r,o,n,s,l=0;l<t.length&&!n;){for(var d=t[l],u=t[l+1],p=i=0;p<d.length&&!n&&d[p];)if(n=d[p++].exec(e))for(r=0;r<u.length;r++)s=n[++i],typeof(o=u[r])===h&&0<o.length?2===o.length?typeof o[1]==c?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3===o.length?typeof o[1]!==c||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):a:this[o[0]]=s?o[1].call(this,s,o[2]):a:4===o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):a):this[o]=s||a;l+=2}},Oe=function(e,t){for(var i in t)if(typeof t[i]===h&&0<t[i].length){for(var r=0;r<t[i].length;r++)if(xe(t[i][r],e))return i===l?a:i}else if(xe(t[i],e))return i===l?a:i;return t.hasOwnProperty("*")?t["*"]:e},Ae={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Be={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:"Watch",xr:["VR","XR"],"?":["Desktop","Unknown"],"*":a},Re={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[x,[y,ge+"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[x,[y,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[y,x],[/opios[\/ ]+([\w\.]+)/i],[x,[y,fe+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[x,[y,fe+" GX"]],[/\bopr\/([\w\.]+)/i],[x,[y,fe]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[x,[y,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[x,[y,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon|otter|dooble|(?:lg |qute)browser)\/([-\w\.]+)/i,/(heytap|ovi|115|surf)browser\/([\d\.]+)/i,/(ecosia|weibo)(?:__| \w+@)([\d\.]+)/i],[y,x],[/quark(?:pc)?\/([-\w\.]+)/i],[x,[y,"Quark"]],[/\bddg\/([\w\.]+)/i],[x,[y,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[x,[y,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[x,[y,"WeChat"]],[/konqueror\/([\w\.]+)/i],[x,[y,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[x,[y,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[x,[y,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[x,[y,"Smart Lenovo"+me]],[/(avast|avg)\/([\w\.]+)/i],[[y,/(.+)/,"$1 Secure"+me],x],[/\bfocus\/([\w\.]+)/i],[x,[y,pe+" Focus"]],[/\bopt\/([\w\.]+)/i],[x,[y,fe+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[x,[y,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[x,[y,"Dolphin"]],[/coast\/([\w\.]+)/i],[x,[y,fe+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[x,[y,"MIUI"+me]],[/fxios\/([\w\.-]+)/i],[x,[y,ge+pe]],[/\bqihoobrowser\/?([\w\.]*)/i],[x,[y,"360"]],[/\b(qq)\/([\w\.]+)/i],[[y,/(.+)/,"$1Browser"],x],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[y,/(.+)/,"$1"+me],x],[/samsungbrowser\/([\w\.]+)/i],[x,[y,se+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[x,[y,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[y,"Sogou Mobile"],x],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[y,x],[/(lbbrowser|rekonq)/i],[y],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[x,y],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[y,be],x,[v,O]],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(instagram|snapchat)[\/ ]([-\w\.]+)/i],[y,x,[v,O]],[/\bgsa\/([\w\.]+) .*safari\//i],[x,[y,"GSA"],[v,O]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[x,[y,"TikTok"],[v,O]],[/\[(linkedin)app\]/i],[y,[v,O]],[/(chromium)[\/ ]([-\w\.]+)/i],[y,x],[/headlesschrome(?:\/([\w\.]+)| )/i],[x,[y,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[y,"Chrome WebView"],x],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[x,[y,"Android"+me]],[/chrome\/([\w\.]+) mobile/i],[x,[y,ge+"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[y,x],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[x,[y,ge+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[y,ge+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[x,y],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[y,[x,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[y,x],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[y,ge+pe],x],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[y,"Netscape"],x],[/(wolvic|librewolf)\/([\w\.]+)/i],[y,x],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[x,[y,pe+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[y,[x,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[y,[x,/[^\d\.]+./,s]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[_,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[_,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[_,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[_,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[_,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[_,/ower/,s,Me]],[/ sun4\w[;\)]/i],[[_,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[_,Me]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[C,[k,se],[v,Y]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[C,[k,se],[v,S]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[C,[k,J],[v,S]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[C,[k,J],[v,Y]],[/(macintosh);/i],[C,[k,J]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[C,[k,"Sharp"],[v,S]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[C,[k,"Honor"],[v,Y]],[/honor([-\w ]+)[;\)]/i],[C,[k,"Honor"],[v,S]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[C,[k,te],[v,Y]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[C,[k,te],[v,S]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[C,/_/g," "],[k,ce],[v,Y]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[C,/_/g," "],[k,ce],[v,S]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[C,[k,ne],[v,S]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[C,[k,Oe,{OnePlus:["304","403","203"],"*":ne}],[v,Y]],[/(vivo (5r?|6|8l?|go|one|s|x[il]?[2-4]?)[\w\+ ]*)(?: bui|\))/i],[C,[k,"BLU"],[v,S]],[/; vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[C,[k,"Vivo"],[v,S]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[C,[k,"Realme"],[v,S]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto(?! 360)[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[C,[k,ae],[v,S]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[C,[k,ae],[v,Y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[C,[k,"LG"],[v,Y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+(?!.*(?:browser|netcast|android tv|watch))(\w+)/i,/\blg-?([\d\w]+) bui/i],[C,[k,"LG"],[v,S]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[C,[k,"Lenovo"],[v,Y]],[/(nokia) (t[12][01])/i],[k,C,[v,Y]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[C,/_/g," "],[v,S],[k,"Nokia"]],[/(pixel (c|tablet))\b/i],[C,[k,ee],[v,Y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[C,[k,ee],[v,S]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[C,[k,le],[v,S]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[C,"Xperia Tablet"],[k,le],[v,Y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[C,[k,oe],[v,S]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[C,[k,X],[v,Y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[C,/(.+)/g,"Fire Phone $1"],[k,X],[v,S]],[/(playbook);[-\w\),; ]+(rim)/i],[C,k,[v,Y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[C,[k,Z],[v,S]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[C,[k,Q],[v,Y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[C,[k,Q],[v,S]],[/(nexus 9)/i],[C,[k,"HTC"],[v,Y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[k,[C,/_/g," "],[v,S]],[/tcl (xess p17aa)/i,/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])(_\w(\w|\w\w))?(\)| bui)/i],[C,[k,"TCL"],[v,Y]],[/droid [\w\.]+; (418(?:7d|8v)|5087z|5102l|61(?:02[dh]|25[adfh]|27[ai]|56[dh]|59k|65[ah])|a509dl|t(?:43(?:0w|1[adepqu])|50(?:6d|7[adju])|6(?:09dl|10k|12b|71[efho]|76[hjk])|7(?:66[ahju]|67[hw]|7[045][bh]|71[hk]|73o|76[ho]|79w|81[hks]?|82h|90[bhsy]|99b)|810[hs]))(_\w(\w|\w\w))?(\)| bui)/i],[C,[k,"TCL"],[v,S]],[/(itel) ((\w+))/i],[[k,Me],C,[v,Oe,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[C,[k,"Acer"],[v,Y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[C,[k,"Meizu"],[v,S]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[C,[k,"Ulefone"],[v,S]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[C,[k,"Energizer"],[v,S]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[C,[k,"Cat"],[v,S]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[C,[k,"Smartfren"],[v,S]],[/droid.+; (a(?:015|06[35]|142p?))/i],[C,[k,"Nothing"],[v,S]],[/; (x67 5g|tikeasy \w+|ac[1789]\d\w+)( b|\))/i,/archos ?(5|gamepad2?|([\w ]*[t1789]|hello) ?\d+[\w ]*)( b|\))/i],[C,[k,"Archos"],[v,Y]],[/archos ([\w ]+)( b|\))/i,/; (ac[3-6]\d\w{2,8})( b|\))/i],[C,[k,"Archos"],[v,S]],[/(imo) (tab \w+)/i,/(infinix) (x1101b?)/i],[k,C,[v,Y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (blu|hmd|imo|tcl)[_ ]([\w\+ ]+?)(?: bui|\)|; r)/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i,/(oppo) ?([\w ]+) bui/i],[k,C,[v,S]],[/(kobo)\s(ereader|touch)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[k,C,[v,Y]],[/(surface duo)/i],[C,[k,ie],[v,Y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[C,[k,"Fairphone"],[v,S]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[C,[k,re],[v,Y]],[/(sprint) (\w+)/i],[k,C,[v,S]],[/(kin\.[onetw]{3})/i],[[C,/\./g," "],[k,ie],[v,S]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[C,[k,de],[v,Y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[C,[k,de],[v,S]],[/smart-tv.+(samsung)/i],[k,[v,E]],[/hbbtv.+maple;(\d+)/i],[[C,/^/,"SmartTV"],[k,se],[v,E]],[/tcast.+(lg)e?. ([-\w]+)/i],[k,C,[v,E]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[k,"LG"],[v,E]],[/(apple) ?tv/i],[k,[C,J+" TV"],[v,E]],[/crkey.*devicetype\/chromecast/i],[[C,ue+" Third Generation"],[k,ee],[v,E]],[/crkey.*devicetype\/([^/]*)/i],[[C,/^/,"Chromecast "],[k,ee],[v,E]],[/fuchsia.*crkey/i],[[C,ue+" Nest Hub"],[k,ee],[v,E]],[/crkey/i],[[C,ue],[k,ee],[v,E]],[/(portaltv)/i],[C,[k,be],[v,E]],[/droid.+aft(\w+)( bui|\))/i],[C,[k,X],[v,E]],[/(shield \w+ tv)/i],[C,[k,re],[v,E]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[C,[k,"Sharp"],[v,E]],[/(bravia[\w ]+)( bui|\))/i],[C,[k,le],[v,E]],[/(mi(tv|box)-?\w+) bui/i],[C,[k,ce],[v,E]],[/Hbbtv.*(technisat) (.*);/i],[k,C,[v,E]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[k,Ie],[C,Ie],[v,E]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[C,[v,E]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[v,E]],[/(ouya)/i,/(nintendo) (\w+)/i],[k,C,[v,M]],[/droid.+; (shield)( bui|\))/i],[C,[k,re],[v,M]],[/(playstation \w+)/i],[C,[k,le],[v,M]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[C,[k,ie],[v,M]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[C,[k,se],[v,T]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[k,C,[v,T]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[C,[k,ne],[v,T]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[C,[k,J],[v,T]],[/(opwwe\d{3})/i],[C,[k,oe],[v,T]],[/(moto 360)/i],[C,[k,ae],[v,T]],[/(smartwatch 3)/i],[C,[k,le],[v,T]],[/(g watch r)/i],[C,[k,"LG"],[v,T]],[/droid.+; (wt63?0{2,3})\)/i],[C,[k,de],[v,T]],[/droid.+; (glass) \d/i],[C,[k,ee],[v,I]],[/(pico) (4|neo3(?: link|pro)?)/i],[k,C,[v,I]],[/(quest( \d| pro)?s?).+vr/i],[C,[k,be],[v,I]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[k,[v,z]],[/(aeobc)\b/i],[C,[k,X],[v,z]],[/(homepod).+mac os/i],[C,[k,J],[v,z]],[/windows iot/i],[[v,z]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+?(mobile|vr|\d) safari/i],[C,[v,Oe,{mobile:"Mobile",xr:"VR","*":Y}]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[v,Y]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[v,S]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[C,[k,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[x,[y,"EdgeHTML"]],[/(arkweb)\/([\w\.]+)/i],[y,x],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[x,[y,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[y,x],[/ladybird\//i],[[y,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[x,y]],os:[[/microsoft (windows) (vista|xp)/i],[y,x],[/(windows (?:phone(?: os)?|mobile|iot))[\/ ]?([\d\.\w ]*)/i],[y,[x,Oe,Ae]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[x,Oe,Ae],[y,we]],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[x,/_/g,"."],[y,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[y,"macOS"],[x,/_/g,"."]],[/android ([\d\.]+).*crkey/i],[x,[y,ue+" Android"]],[/fuchsia.*crkey\/([\d\.]+)/i],[x,[y,ue+" Fuchsia"]],[/crkey\/([\d\.]+).*devicetype\/smartspeaker/i],[x,[y,ue+" SmartSpeaker"]],[/linux.*crkey\/([\d\.]+)/i],[x,[y,ue+" Linux"]],[/crkey\/([\d\.]+)/i],[x,[y,ue]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[x,y],[/(ubuntu) ([\w\.]+) like android/i],[[y,/(.+)/,"$1 Touch"],x],[/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen|webos)\w*[-\/\.; ]?([\d\.]*)/i],[y,x],[/\(bb(10);/i],[x,[y,Z]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[x,[y,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[x,[y,pe+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[x,[y,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[x,[y,"watchOS"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[y,"Chrome OS"],x],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/(pico) .+os([\w\.]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux)(?: arm\w*| x86\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[y,x],[/(sunos) ?([\w\.\d]*)/i],[[y,"Solaris"],x],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[y,x]]},Pe=(fe={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}},Ye.call(fe.init,[[p,[y,x,D,v]],[f,[_]],[b,[v,C,k]],[g,[y,x]],[m,[y,x]]]),Ye.call(fe.isIgnore,[[p,[x,D]],[g,[x]],[m,[x]]]),Ye.call(fe.isIgnoreRgx,[[p,/ ?browser$/i],[m,/ ?os$/i]]),Ye.call(fe.toString,[[p,[y,x]],[f,[_]],[b,[k,C]],[g,[y,x]],[m,[y,x]]]),fe),Ne=function(e,t){var i=Pe.init[t],a=Pe.isIgnore[t]||0,r=Pe.isIgnoreRgx[t]||0,o=Pe.toString[t]||0;function n(){Ye.call(this,i)}return n.prototype.getItem=function(){return e},n.prototype.withClientHints=function(){return ke?ke.getHighEntropyValues(W).then((function(t){return e.setCH(new Le(t,!1)).parseCH().get()})):e.parseCH().get()},n.prototype.withFeatureCheck=function(){return e.detectFeature().get()},t!=w&&(n.prototype.is=function(e){var t,i=!1;for(t in this)if(this.hasOwnProperty(t)&&!xe(a,t)&&Me(r?Ee(r,this[t]):this[t])==Me(r?Ee(r,e):e)){if(i=!0,e!=d)break}else if(e==d&&i){i=!i;break}return i},n.prototype.toString=function(){var e,t=s;for(e in o)typeof this[o[e]]!==d&&(t+=(t?" ":s)+this[o[e]]);return t||d}),ke||(n.prototype.then=function(e){function t(){for(var e in i)i.hasOwnProperty(e)&&(this[e]=i[e])}var i=this,a=(t.prototype={is:n.prototype.is,toString:n.prototype.toString},new t);return e(a),a}),new n};function Le(e,t){if(e=e||{},Ye.call(this,W),t)Ye.call(this,[[A,Ce(e[$])],[R,Ce(e[F])],[S,/\?1/.test(e[V])],[C,Te(e[G])],[P,Te(e[q])],[N,Te(e[K])],[_,Te(e[H])],[B,Ce(e[j])],[L,Te(e[U])]]);else for(var i in e)this.hasOwnProperty(i)&&typeof e[i]!==d&&(this[i]=e[i])}function $e(e,t,i,r){return this.get=function(e){return e?this.data.hasOwnProperty(e)?this.data[e]:a:this.data},this.set=function(e,t){return this.data[e]=t,this},this.setCH=function(e){return this.uaCH=e,this},this.detectFeature=function(){if(ve&&ve.userAgent==this.ua)switch(this.itemType){case p:ve.brave&&typeof ve.brave.isBrave==c&&this.set(y,"Brave");break;case b:!this.get(v)&&ke&&ke[S]&&this.set(v,S),"Macintosh"==this.get(C)&&ve&&typeof ve.standalone!==d&&ve.maxTouchPoints&&2<ve.maxTouchPoints&&this.set(C,"iPad").set(v,Y);break;case m:!this.get(y)&&ke&&ke[P]&&this.set(y,ke[P]);break;case w:var e=this.data,t=function(t){return e[t].getItem().detectFeature().get()};this.set(p,t(p)).set(f,t(f)).set(b,t(b)).set(g,t(g)).set(m,t(m))}return this},this.parseUA=function(){return this.itemType!=w&&ze.call(this.data,this.ua,this.rgxMap),this.itemType==p&&this.set(D,Se(this.get(x))),this},this.parseCH=function(){var e,t=this.uaCH,i=this.rgxMap;switch(this.itemType){case p:case g:var r,o=t[R]||t[A];if(o)for(var n in o){var s=o[n].brand||o[n],n=o[n].version;this.itemType!=p||/not.a.brand/i.test(s)||r&&(!/chrom/i.test(r)||s==he)||(s=Oe(s,{Chrome:"Google Chrome",Edge:"Microsoft Edge","Chrome WebView":"Android WebView","Chrome Headless":"HeadlessChrome","Huawei Browser":"HuaweiBrowser","MIUI Browser":"Miui Browser","Opera Mobi":"OperaMobile",Yandex:"YaBrowser"}),this.set(y,s).set(x,n).set(D,Se(n)),r=s),this.itemType==g&&s==he&&this.set(x,n)}break;case f:var l=t[_];l&&("64"==t[L]&&(l+="64"),ze.call(this.data,l+";",i));break;case b:if(t[S]&&this.set(v,S),t[C]&&(this.set(C,t[C]),this.get(v)&&this.get(k)||(ze.call(l={},"droid 9; "+t[C]+")",i),!this.get(v)&&l.type&&this.set(v,l.type),!this.get(k)&&l.vendor&&this.set(k,l.vendor))),t[B]){if("string"!=typeof t[B])for(var c=0;!e&&c<t[B].length;)e=Oe(t[B][c++],Be);else e=Oe(t[B],Be);this.set(v,e)}break;case m:var d,l=t[P];l&&(d=t[N],l==we&&(d=13<=parseInt(Se(d),10)?"11":"10"),this.set(y,l).set(x,d)),this.get(y)==we&&"Xbox"==t[C]&&this.set(y,"Xbox").set(x,a);break;case w:var h=this.data,l=function(e){return h[e].getItem().setCH(t).parseCH().get()};this.set(p,l(p)).set(f,l(f)).set(b,l(b)).set(g,l(g)).set(m,l(m))}return this},Ye.call(this,[["itemType",e],["ua",t],["uaCH",r],["rgxMap",i],["data",Ne(this,e)]]),this}function Fe(e,t,i){var r,l,d,y,v;return typeof e===h?(t=_e(e,!0)?(typeof t===h&&(i=t),e):(i=e,a),e=a):typeof e!==u||_e(t,!0)||(i=t,t=a),i&&typeof i.append===c&&(r={},i.forEach((function(e,t){r[t]=e})),i=r),this instanceof Fe?(l=typeof e===u?e:i&&i[n]?i[n]:ve&&ve.userAgent?ve.userAgent:s,d=new Le(i,!0),y=t?((e,t)=>{var i,a={},r=t;if(!_e(t))for(var o in r={},t)for(var n in t[o])r[n]=t[o][n].concat(r[n]||[]);for(i in e)a[i]=r[i]&&r[i].length%2==0?r[i].concat(e[i]):e[i];return a})(Re,t):Re,Ye.call(this,[["getBrowser",(v=function(e){return e==w?function(){return new $e(e,l,y,d).set("ua",l).set(p,this.getBrowser()).set(f,this.getCPU()).set(b,this.getDevice()).set(g,this.getEngine()).set(m,this.getOS()).get()}:function(){return new $e(e,l,y[e],d).parseUA().get()}})(p)],["getCPU",v(f)],["getDevice",v(b)],["getEngine",v(g)],["getOS",v(m)],["getResult",v(w)],["getUA",function(){return l}],["setUA",function(e){return De(e)&&(l=e.length>o?Ie(e,o):e),this}]]).setUA(l),this):new Fe(e,t,i).getResult()}Fe.VERSION="2.0.3",Fe.BROWSER=r([y,x,D,v]),Fe.CPU=r([_]),Fe.DEVICE=r([C,k,v,M,S,E,Y,T,z]),Fe.ENGINE=Fe.OS=r([y,x]),(t=e.exports?e.exports=Fe:t).UAParser=Fe;var He,Ue=ye&&(i.jQuery||i.Zepto);Ue&&!Ue.ua&&(He=new Fe,Ue.ua=He.getResult(),Ue.ua.get=function(){return He.getUA()},Ue.ua.set=function(e){He.setUA(e);var t,i=He.getResult();for(t in i)Ue.ua[t]=i[t]})})("object"==typeof window?window:Le)})(Am,Am.exports);const Bm=".sc-ir-user-form-panel-h{--font-family-sans-serif:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;--font-family-monospace:'Quicksand', Georgia, 'Times New Roman', Times, serif !important}.logins-history-section.sc-ir-user-form-panel{margin-top:1.5rem}.sc-ir-user-form-panel-h h4.sc-ir-user-form-panel{font-family:inherit !important}.logins-history-list.sc-ir-user-form-panel{border-radius:8px;list-style-type:none;padding:0;margin:0;margin-top:1rem}.login-entry.sc-ir-user-form-panel{padding:0.25rem 0rem;border-bottom:1px solid #e4e5ec}.login-entry.sc-ir-user-form-panel:last-child{border:none}.login-meta.sc-ir-user-form-panel{display:flex;gap:0.5rem}.login-datetime.sc-ir-user-form-panel,.login-location.sc-ir-user-form-panel{margin:0;font-size:0.75rem;color:#374151;font-weight:500}.login-user-agent.sc-ir-user-form-panel{font-size:0.75rem;color:#6b7280;margin:0;word-break:break-word}.login-user-agent.sc-ir-user-form-panel{font-size:0.75rem;color:#4b5563;margin-top:0.5rem;line-height:1.4}.login-user-agent.sc-ir-user-form-panel p.sc-ir-user-form-panel{margin:0}.ua-browser.sc-ir-user-form-panel{font-weight:600;color:#1f2937}.ua-os.sc-ir-user-form-panel{color:#374151}.ua-device.sc-ir-user-form-panel{font-style:italic;color:#6b7280}.login-location.sc-ir-user-form-panel{font-size:0.75rem;color:#4b5563;display:flex;flex-wrap:wrap;gap:0.25rem;align-items:center}.login-location.sc-ir-user-form-panel span.sc-ir-user-form-panel{display:flex;align-items:center;gap:0.25rem}.login-location.sc-ir-user-form-panel i.sc-ir-user-form-panel{font-size:0.75rem;color:#9ca3af}";const Rm=Bm;const Pm=".sc-ir-user-form-panel-h{height:100%}.sheet-container.sc-ir-user-form-panel{display:flex !important;flex-direction:column !important;background:white;height:100vh;gap:1rem;z-index:1000}.sheet-container.sc-ir-user-form-panel{height:-webkit-fill-available;height:100vh;height:100dvh}.sheet-footer.sc-ir-user-form-panel{position:sticky;bottom:0;z-index:20;background:white;border-top:1px solid #e4e5ec;display:flex;flex-direction:column;padding:1rem;gap:0.5rem}.sheet-header.sc-ir-user-form-panel{position:sticky;top:0;z-index:10;background:white}.sheet-body.sc-ir-user-form-panel{flex:1 1 0%}@media (min-width: 768px){.sheet-footer.sc-ir-user-form-panel{flex-direction:row;align-items:center}}";const Nm=Pm;const Lm=class{constructor(t){e(this,t);this.resetData=a(this,"resetData",7);this.closeSideBar=a(this,"closeSideBar",7)}user;userTypes=Map;isEdit=false;language="en";property_id;haveAdminPrivileges;superAdminId="5";userTypeCode;allowedUsersTypes=[];baseUserTypeCode;isLoading=false;autoValidate=false;showFullHistory=false;userInfo={type:"",id:-1,is_active:true,sign_ins:null,created_on:null,mobile:"",name:"",note:"",password:"",email:"",property_id:null,username:null,phone_prefix:null};errors=null;showPasswordValidation=false;isUsernameTaken;isOpen;emailErrorMessage;resetData;closeSideBar;housekeepingService=new ve;userService=new zu;disableFields=false;isPropertyAdmin=false;token=new me;mobileMask={};userSchema=z.object({mobile:z.string().optional(),email:z.string().email(),password:z.string().nullable().refine((e=>{if(this.user&&!this.userInfo?.password){return true}return Ou.PASSWORD.test(e)}),{message:"Password must be at least 8 characters long."}),type:z.union([z.literal(1),z.literal(Number(this.superAdminId?.toString()??"5")),z.coerce.string().nonempty().min(2)]),username:z.string().min(3).refine((async e=>{if(this.user&&this.user.username){return true}if(e.length>=3){return!await(new zu).checkUserExistence({UserName:e})}return true}),{message:"Username already exists."})});async componentWillLoad(){if(!this.user){this.userInfo["property_id"]=this.property_id}if(this.user){this.autoValidate=true;this.userInfo={...this.user,password:""}}this.isPropertyAdmin=this.userTypeCode.toString()==="17";if(this.isPropertyAdmin){this.updateUserField("type","17")}this.mobileMask={mask:`{${y.country.phone_prefix}} 000000000000`,lazy:false,autofix:true,placeholderChar:""}}updateUserField(e,t){this.userInfo={...this.userInfo,[e]:t}}async createOrUpdateUser(){try{console.log("hello world");this.isLoading=true;this.emailErrorMessage=undefined;if(!this.autoValidate){this.autoValidate=true}const e={...this.userInfo,base_user_type_code:this.baseUserTypeCode,property_id:this.property_id,password:this.user&&this.userInfo.password===""?this.user.password:this.userInfo.password,type:Number(this.userInfo.type)};console.log("toValidateUserInfo",{...e,mobile:e.mobile?.split(" ")?.join("")?.replace(y.country.phone_prefix,"")??""});await this.userSchema.parseAsync({...e,mobile:e.mobile?.split(" ")?.join("")?.replace(y.country.phone_prefix,"")??""});if(this.errors){this.errors=null}await this.userService.handleExposedUser(e);this.resetData.emit(null);this.closeSideBar.emit(null)}catch(e){console.log(e);const t={};if(e instanceof N){console.error(e);e.issues.map((e=>{t[e.path[0]]=true}))}else if(e instanceof ep&&e.code==="EMAIL_EXISTS"){t["email"]=true;this.emailErrorMessage="This email is already in use. Please create another one."}this.errors=t}finally{this.isLoading=false}}async handleBlur(e){e.stopImmediatePropagation();e.stopPropagation();if(this.user||!this.userInfo.name){return}const t=await this.housekeepingService.generateUserName(this.userInfo.name);this.updateUserField("username",t)}render(){return t("form",{key:"3eb18adac29fdd02a04003e1c5c590cd7b637435",class:"sheet-container",onSubmit:async e=>{e.preventDefault();await this.createOrUpdateUser()}},t("ir-title",{key:"c6bf16327c505605062cc7d3b5b7f83709ebd8fd",class:"px-1 sheet-header",displayContext:"sidebar",label:this.isEdit?this.user.username:"Create New User"}),t("section",{key:"6633c519ffd6e349bb0a8d8eff7094643fcc112f",class:"px-1 sheet-body"},t("ir-input-text",{key:"0da97fe8a732f86dc746f5513ac6c0bb7b839c2f",testId:"email",zod:this.userSchema.pick({email:true}),wrapKey:"email",autoValidate:this.autoValidate,error:this.errors?.email,label:g.entries.Lcz_Email,placeholder:"",onTextChange:e=>this.updateUserField("email",e.detail),value:this.userInfo.email,onInputBlur:this.handleBlur.bind(this),maxLength:40,errorMessage:this.emailErrorMessage}),t("ir-input-text",{key:"e3d2747ced6389729d3d83a608c8d02873d89291",testId:"mobile",disabled:this.disableFields,zod:this.userSchema.pick({mobile:true}),wrapKey:"mobile",error:this.errors?.mobile,asyncParse:true,autoValidate:this.user?this.userInfo?.mobile!==this.user.mobile?true:false:this.autoValidate,label:g.entries.Lcz_Mobile,mask:this.mobileMask,placeholder:"",value:this.userInfo.mobile,onTextChange:e=>this.updateUserField("mobile",e.detail)}),this.user&&this.user?.type?.toString()===this.superAdminId||this.isPropertyAdmin?null:t("div",{class:"mb-1"},t("ir-select",{testId:"user_type",error:this.errors?.type&&!this.userInfo.type,disabled:this.disableFields,label:"Role",data:this.allowedUsersTypes.map((e=>({text:e.value,value:e.code}))),firstOption:g.entries.Lcz_Select,selectedValue:this.userInfo.type?.toString(),onSelectChange:e=>this.updateUserField("type",e.detail)})),this.user?.type?.toString()!=="5"&&t(r,{key:"acde35a5d990abe4770b5a626453c8231f0e6347"},t("input",{key:"005b70f474922a9ae54b336d9a8b0f1605007628",type:"text",name:"dummy",style:{display:"none"}}),t("ir-input-text",{key:"6483e34a80fe42720934774e85c6fc064a4d86af",testId:"username",zod:this.userSchema.pick({username:true}),wrapKey:"username",autoValidate:this.autoValidate,error:this.errors?.username,label:g.entries.Lcz_Username,disabled:this.disableFields,placeholder:"",onTextChange:e=>this.updateUserField("username",e.detail),value:this.userInfo.username,maxLength:40,autoComplete:"off"})),!this.user?t(r,null,t("input",{type:"text",name:"dummy",style:{display:"none"}}),t("ir-input-text",{testId:"password",autoValidate:this.user?!this.userInfo?.password?false:true:this.autoValidate,label:g.entries.Lcz_Password,value:this.userInfo.password,autoComplete:"off",type:"password",maxLength:16,zod:this.userSchema.pick({password:true}),wrapKey:"password",error:this.errors?.password,onInputFocus:()=>this.showPasswordValidation=true,onInputBlur:()=>{},onTextChange:e=>this.updateUserField("password",e.detail)}),this.showPasswordValidation&&t("ir-password-validator",{class:"mb-1",password:this.userInfo.password})):t("div",{class:"d-flex mt-2 align-items-center justify-content-between"},t("h4",{class:"m-0 p-0 logins-history-title"},g.entries.Lcz_Password),t("ir-button",{size:"sm",btn_styles:"pr-0",onClickHandler:()=>this.isOpen=true,text:g.entries.Lcz_ChangePassword,btn_color:"link"})),this.user?.sign_ins?.length>0&&t("section",{key:"8ee99478462ea2d7507273a2f2fff0389695efa3",class:"logins-history-section mt-2"},t("div",{key:"e67ada42f169f278254184eee6b71df63023a4a4",class:"d-flex align-items-center logins-history-title-container justify-content-between"},t("h4",{key:"18d5102cc554647f3a10cce39aa3b47c7914496d",class:"logins-history-title m-0 p-0"},"Recent sign-ins"),this.user.sign_ins.length>5&&t("ir-button",{key:"3fe1fe746ed97e9c0e35067fe6439548f2471207",btn_styles:"pr-0",text:!this.showFullHistory?g.entries.Lcz_ViewAll:g.entries.Lcz_ViewLess,btn_color:"link",size:"sm",onClickHandler:()=>this.showFullHistory=!this.showFullHistory})),t("ul",{key:"01110e7587aaaec4af93c8d941394d77a1fb1e95",class:"logins-history-list"},this.user.sign_ins.slice(0,this.showFullHistory?this.user.sign_ins.length:5).map(((e,i)=>{const a=Am.exports.UAParser(e.user_agent);return t("li",{class:"login-entry",key:e.date+"_"+i},t("div",{class:"login-meta"},t("p",{class:"login-datetime"},fe(e.date,"YYYY-MM-DD").format("DD-MMM-YYYY")," ",Me(e.hour?.toString(),e.minute?.toString())," |"),t("p",{class:"login-location"},t("span",{class:"login-ip"},g.entries.Lcz_IP,": ",e.ip)," ","|",t("span",{class:"login-country"},g.entries.Lcz_Location,": ",e.country)," ","|",t("span",{class:"login-os"},"OS: ",a.os.name??"N/A"," ",a.os.version))))})))),t("ir-sidebar",{key:"b69921976a50fffc0306ef887e7f7c66ef92f00f",open:this.isOpen,showCloseButton:false,style:{"--sidebar-block-padding":"0"},onIrSidebarToggle:e=>{e.stopImmediatePropagation();e.stopPropagation();this.isOpen=false}},this.isOpen&&t("ir-reset-password",{key:"9b130e65b6c50cc435a35da414926d745204ae5c",ticket:this.token.getToken(),skip2Fa:true,username:this.user.username,onCloseSideBar:e=>{e.stopImmediatePropagation();e.stopPropagation();this.isOpen=false},slot:"sidebar-body"}))),t("div",{key:"b34731eedf0fd920c20861513ff3c46c86e1042e",class:"sheet-footer"},t("ir-button",{key:"a0f89210a5b1bb91723eb84bcc0d721e73573c46","data-testid":"cancel",onClickHandler:()=>this.closeSideBar.emit(null),class:"flex-fill",btn_styles:"w-100 justify-content-center align-items-center",btn_color:"secondary",text:g.entries.Lcz_Cancel}),t("ir-button",{key:"6e653d0bca52f0af8d415128d0797176ce1d9d88","data-testid":"save",isLoading:this.isLoading,class:"flex-fill",btn_type:"submit",btn_styles:"w-100 justify-content-center align-items-center",text:g.entries.Lcz_Save})))}};Lm.style=Rm+Nm;const $m=".sc-ir-user-management-h{display:block;height:100%}";const Fm=$m;const Hm=class{constructor(t){e(this,t)}language="";baseUrl;ticket;propertyid;p;isSuperAdmin=true;userTypeCode;baseUserTypeCode;userId;isLoading=true;users=[];property_id;allowedUsersTypes=[];token=new me;roomService=new we;userService=new zu;bookingService=new l;userTypes=new Map;socket;superAdminId="5";componentWillLoad(){if(this.baseUrl){this.token.setBaseUrl(this.baseUrl)}if(this.ticket){this.token.setToken(this.ticket);this.initializeApp()}}ticketChanged(e,t){if(e===t){return}this.token.setToken(this.ticket);this.initializeApp()}async handleResetData(e){e.stopImmediatePropagation();e.stopPropagation();await this.fetchUsers()}async initializeApp(){try{if(this.baseUrl){this.token.setBaseUrl(this.baseUrl)}this.isLoading=true;let e=this.propertyid;if(!this.propertyid&&!this.p){throw new Error("Property ID or username is required")}if(!e){console.log(e);const t=await this.roomService.getExposedProperty({id:0,aname:this.p,language:this.language,is_backend:true,include_units_hk_status:true});e=t.My_Result.id}this.property_id=e;const t=[this.fetchUserTypes(),this.fetchUsers(),this.roomService.fetchLanguage(this.language,["_USER_MGT"])];if(this.propertyid){t.push(this.roomService.getExposedProperty({id:this.propertyid,language:this.language,is_backend:true,include_units_hk_status:true}))}await Promise.all(t);this.socket=Fr("https://realtime.igloorooms.com/");this.socket.on("MSG",(async e=>{await this.handleSocketMessage(e)}))}catch(e){console.log(e)}finally{this.isLoading=false}}async handleSocketMessage(e){const t=JSON.parse(e);if(!t){return}const{REASON:i,KEY:a,PAYLOAD:r}=t;if(a.toString()!==this.property_id.toString()){return}let o=JSON.parse(r);console.log(a,o);const n={EMAIL_VERIFIED:this.updateUserVerificationStatus};const s=n[i];if(s){await s.call(this,o)}else{console.warn(`Unhandled REASON: ${i}`)}}updateUserVerificationStatus(e){const t=[...this.users];const i=t.findIndex((t=>t.id===e.id));if(i===-1){console.warn(`User ${e.id} not found`);return}t[i]={...t[i],is_email_verified:true};this.users=t}async fetchUsers(){const e=await this.userService.getExposedPropertyUsers({property_id:this.propertyid});this.users=[...e].sort(((e,t)=>{const i=e=>{const t=e.type.toString();if(t===this.superAdminId)return 0;if(t==="17")return 1;return 2};const a=i(e),r=i(t);if(a!==r){return a-r}return e.username.localeCompare(t.username)}))}async fetchUserTypes(){const e=await Promise.all([this.bookingService.getSetupEntriesByTableName("_USER_TYPE"),this.bookingService.getLov()]);const t=e[1]?.My_Result?.allowed_user_types;for(const i of e[0]){const e=i[`CODE_VALUE_${this.language?.toUpperCase()??"EN"}`];if(t.find((e=>e.code===i.CODE_NAME))){this.allowedUsersTypes.push({code:i.CODE_NAME,value:e})}this.userTypes.set(i.CODE_NAME.toString(),e)}}disconnectedCallback(){this.socket.disconnect()}render(){if(this.isLoading){return t(i,null,t("ir-toast",null),t("ir-interceptor",null),t("ir-loading-screen",null))}return t(i,null,t("ir-toast",null),t("ir-interceptor",{suppressToastEndpoints:["/Change_User_Pwd","/Handle_Exposed_User"]}),t("section",{class:"p-2 d-flex flex-column",style:{gap:"1rem"}},t("div",{class:"d-flex  pb-2 align-items-center justify-content-between"},t("h3",{class:"mb-1 mb-md-0"},g.entries.Lcz_ExtranetUsers)),t("div",{class:"",style:{gap:"1rem"}},t("ir-user-management-table",{property_id:this.property_id,baseUserTypeCode:this.baseUserTypeCode,allowedUsersTypes:this.allowedUsersTypes,userTypeCode:this.userTypeCode,haveAdminPrivileges:[this.superAdminId,"17"].includes(this.userTypeCode?.toString()),userTypes:this.userTypes,class:"card",isSuperAdmin:this.userTypeCode?.toString()===this.superAdminId,users:this.users}))))}static get watchers(){return{ticket:["ticketChanged"]}}};Hm.style=Fm;const Um=".sc-ir-user-management-table-h{display:block}.badge.sc-ir-user-management-table{border:none;padding:0.2rem 0.3rem}.badge.sc-ir-user-management-table:disabled{cursor:default}";const jm=Um;const Vm=".ir-table-row.sc-ir-user-management-table td.sc-ir-user-management-table{padding:0.5rem 1rem !important;text-align:left;z-index:2;background-color:var(--wa-color-surface-default);white-space:nowrap;color:var(--wa-color-text-normal);box-sizing:border-box}.table--container.sc-ir-user-management-table{flex:1 1 0%}.table--container.sc-ir-user-management-table{overflow-x:auto}.table.sc-ir-user-management-table td.sc-ir-user-management-table{border-top:0;border-bottom:1px solid var(--wa-color-neutral-border-quiet, #abaeb9);transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.table.sc-ir-user-management-table tbody.sc-ir-user-management-table tr.sc-ir-user-management-table:last-child>td.sc-ir-user-management-table{border-bottom:0 !important}.table.sc-ir-user-management-table thead.sc-ir-user-management-table th.sc-ir-user-management-table{border:none !important;background:#ececec;background:color-mix(in oklab, var(--wa-color-neutral-fill-quiet, #f1f2f3) 60%, transparent);color:#374151;padding:0.5rem 1rem !important;text-align:left}.data-table.sc-ir-user-management-table thead.sc-ir-user-management-table th.sc-ir-user-management-table{box-sizing:border-box;background:var(--wa-color-surface-default) !important;padding-top:0.5rem !important;padding-bottom:0.5rem !important;border-bottom:1px solid var(--wa-color-neutral-90) !important;color:var(--wa-color-text-normal)}.data-table.sc-ir-user-management-table .empty-row.sc-ir-user-management-table{height:50vh !important;text-align:center;color:var(--wa-color-gray-60)}.data-table--pagination.sc-ir-user-management-table{padding:0.5rem 1rem;position:sticky;bottom:0;background:var(--wa-color-surface-default);border-top:1px solid var(--wa-color-neutral-90)}.selected.sc-ir-user-management-table td.sc-ir-user-management-table{background:#e3f3fa !important}.selected.sc-ir-user-management-table td.sc-ir-user-management-table{color:var(--gray-dark) !important;transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.sortable.sc-ir-user-management-table,.ir-table-row.sc-ir-user-management-table{transition:color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out}.sortable.sc-ir-user-management-table{text-transform:capitalize}.sortable.sc-ir-user-management-table:hover{color:#212529;background-color:#e2e8f0 !important;border-color:#dae0e5;cursor:pointer}.ir-table-row.sc-ir-user-management-table:hover td.sc-ir-user-management-table{background:#e2e6ea3f !important;background:var(--wa-color-neutral-fill-quiet, #f1f2f3) !important}.sortable.sc-ir-user-management-table:active{color:#212529;background-color:#e2e8f0;border-color:#d3d9df}.sortable.sc-ir-user-management-table svg.sc-ir-user-management-table{color:var(--blue)}.sticky-column.sc-ir-user-management-table{position:sticky !important;right:0;background-color:white}";const Gm=Vm;const qm=class{constructor(t){e(this,t);this.toast=a(this,"toast",7);this.resetData=a(this,"resetData",7)}users=[];isSuperAdmin;userTypes=new Map;userTypeCode;haveAdminPrivileges;superAdminId="5";allowedUsersTypes=[];baseUserTypeCode;property_id;currentTrigger=null;user=null;modalType;canDelete;canEdit;canCreate;toast;resetData;modalRef;userService=new zu;systemService=new Xp;componentWillLoad(){this.assignPermissions()}handleChange(e,t){if(e!==t){this.assignPermissions()}}assignPermissions(){this.canCreate=this.haveAdminPrivileges;this.canDelete=this.haveAdminPrivileges;this.canEdit=true}async handleUserActiveChange(e,t){e.stopImmediatePropagation();e.stopPropagation();const i=await this.verifyAdminAction({type:"user",mode:"update",user:t});if(i==="cancelled"){return}await this.userService.handleExposedUser({email:t.email,id:t.id,is_active:e.detail,mobile:t.mobile,password:t.password,type:t.type,username:t.username,base_user_type_code:this.baseUserTypeCode,property_id:this.property_id});this.toast.emit({position:"top-right",title:"Saved Successfully",description:"",type:"success"})}async executeUserAction(e){try{e.stopImmediatePropagation();e.stopPropagation();await this.userService.handleExposedUser({email:this.user.email,id:this.user.id,is_active:this.user.is_active,is_email_verified:this.modalType==="verify"?false:this.user.is_email_verified,mobile:this.user.mobile,password:this.user.password,type:this.user.type,username:this.user.username,is_to_remove:this.modalType==="delete"});this.resetData.emit(null)}finally{this.resetModalState();this.modalRef.closeModal()}}renderCurrentTrigger(){if(!this.currentTrigger){return null}return t("ir-user-form-panel",{property_id:this.property_id,baseUserTypeCode:this.baseUserTypeCode,superAdminId:this.superAdminId,allowedUsersTypes:this.allowedUsersTypes,userTypeCode:this.userTypeCode,haveAdminPrivileges:this.haveAdminPrivileges,onCloseSideBar:()=>this.currentTrigger=null,slot:"sidebar-body",user:this.currentTrigger?.user,isEdit:this.currentTrigger?.isEdit})}openModal(e,t){if(!this.modalRef||!e){return}this.user=e;this.modalType=t;this.modalRef.openModal()}maskEmail(e){if(!e||!e.includes("@"))return"";const[t,i]=e.split("@");const a=t.slice(0,1);const r="*".repeat(Math.max(t.length-1,1));return`${a}${r}@${i}`}resetModalState(){this.user=null;this.modalType=null}async verifyAdminAction(e){const t=await this.systemService.checkOTPNecessity({METHOD_NAME:"Handle_Exposed_User"});if(t?.cancelled){return"cancelled"}const{mode:i,...a}=e;if(i==="edit"||i==="create"){this.currentTrigger={...a,isEdit:i==="edit"}}return"ok"}render(){return t(i,{key:"ce3c5821c637c67f46938afa4f7015baeb811d93"},t("section",{key:"fe52e309c9e68b8b9d04cb6814917d4a366dcd95",class:"table-container h-100 p-1 w-100 m-0 table-responsive"},t("table",{key:"b0cb607b57b7b8ec4d9d3e85d6fa0c8b66705494",class:"table"},t("thead",{key:"831ad9cdd4fc38421540c3a85c2d3cf8f5300288"},t("tr",{key:"3839828382c09c0246be59057de42d8996e815df"},t("th",{key:"ccdd8d92a320ba9c00fe5df8dda60be4e5c3f00c",class:"text-left"},g.entries.Lcz_Username??"Username"),t("th",{key:"253da85324533b0ae0b074f56ea7370f1c3838a1",class:"text-left"},g.entries.Lcz_Email),t("th",{key:"55bd6f4a6597b486ab7e12360859ea9bec090374",class:"text-left"},g.entries.Lcz_Mobile??"Mobile"),t("th",{key:"c5654686d3fbc94e93ab83d0d8045a93b7e89bf6",class:"text-left"},g.entries.Lcz_Role),t("th",{key:"86f4cf0d40f20b2b90c361855bdb4f74dff5437a",class:"text-left small",style:{fontWeight:"bold"}},t("p",{key:"76fa30625ba756603763d3e7ee8a9a8ab77b6ae2",class:"m-0 p-0 "},g.entries.Lcz_CreatedAt),t("p",{key:"933035b9ee3d8d1f68d0245d2343208eb5b0afbc",class:"m-0 p-0"},g.entries.Lcz_LastSignedIn)),this.haveAdminPrivileges&&t("th",{key:"e67d68952bf063b6ce8e4e0ce54d9172a307fb74"},g.entries.Lcz_Active),t("th",{key:"883707f8d7235a21cc307d59ef55b8dec22ace36",class:"action-row"},this.canCreate&&t("ir-icon",{key:"9e4d2893556a9ec13b8faf49c245cc37288cd9f5",style:{paddingLeft:"0.875rem"},"data-testid":"new_user",title:g.entries.Lcz_CreateUser,onIconClickHandler:()=>{this.verifyAdminAction({type:"user",mode:"create",user:null})}},t("svg",{key:"a286d78d14bb07e2381d1566aae6d144ebd51c8b",slot:"icon",xmlns:"http://www.w3.org/2000/svg",height:"20",width:"17.5",viewBox:"0 0 448 512"},t("path",{key:"737e837cc1d3bccbd2ebf2d45f6a128c28d0648b",fill:"currentColor",d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"})))))),t("tbody",{key:"11a7135636abb52f8105539325d60186cf357b56"},this.users.map((e=>{const i=e.type.toString()===this.superAdminId;const a=e.sign_ins?e.sign_ins[0]:null;const r=a?fe(a.date,"YYYY-MM-DD"):null;const o=r?fe().diff(r,"days")>30:false;return t("tr",{key:e.id,class:"ir-table-row"},t("td",null,e.username),t("td",null,e.email,this.haveAdminPrivileges&&t("span",{style:{marginLeft:"0.5rem"},class:`small ${e.is_email_verified?"text-success":"text-danger"}`},e.is_email_verified?g.entries.Lcz_Verified:g.entries.Lcz_NotVerified)),t("td",null,e.mobile??"N/A"),t("td",null,e.type.toString()===this.superAdminId?g.entries.Lcz_SuperAdmin:this.userTypes.get(e.type.toString())),t("td",{class:"small"},t("p",{class:"m-0 p-0"},new Date(e.created_on).getFullYear()===1900||!e.created_on?"N/A":fe(e.created_on,"YYYY-MM-DD").format("DD-MMM-YYYY")),t("p",{class:`m-0 p-0 ${o?"text-danger":""}`},a&&new Date(a.date).getFullYear()>1900?fe(a.date,"YYYY-MM-DD").format("DD-MMM-YYYY")+" "+Me(a.hour.toString(),a.minute.toString()):"N/A")),this.haveAdminPrivileges&&t("td",null,this.haveAdminPrivileges&&!this.isSuperAdmin&&e.type.toString()==="17"?null:!i&&t("ir-switch",{onCheckChange:t=>this.handleUserActiveChange(t,e),checked:e.is_active})),t("td",{class:"action-row"},(this.canEdit||this.canDelete)&&(!this.isSuperAdmin&&!i||this.isSuperAdmin)&&t("div",{class:"icons-container  d-flex align-items-center",style:{gap:"0.5rem"}},this.canEdit&&t("ir-icon",{"data-testid":"edit",title:g.entries.Lcz_EditUser,onIconClickHandler:()=>{this.verifyAdminAction({type:"user",mode:"edit",user:e})},icon:"ft-save color-ir-light-blue-hover h5 pointer sm-margin-right"},t("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",height:"20",width:"20",viewBox:"0 0 512 512"},t("path",{fill:"#6b6f82",d:"M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"}))),this.canDelete&&!i&&(this.isSuperAdmin||e.type.toString()!=="17")&&t("ir-icon",{"data-testid":"delete",title:g.entries.Lcz_DeleteUser,icon:"ft-trash-2 danger h5 pointer",onIconClickHandler:async()=>{const t=await this.verifyAdminAction({type:"user",mode:"delete",user:e});if(t==="cancelled"){return}this.openModal(e,"delete")}},t("svg",{slot:"icon",fill:"#ff2441",xmlns:"http://www.w3.org/2000/svg",height:"16",width:"14.25",viewBox:"0 0 448 512"},t("path",{d:"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"}))))))}))))),t("ir-sidebar",{key:"b1a88a3909ec1d3356653b09584a4f3b6ab51d73",open:this.currentTrigger!==null&&this.currentTrigger?.type!=="delete",onIrSidebarToggle:()=>this.currentTrigger=null,showCloseButton:false,style:{"--sidebar-block-padding":"0","--sidebar-width":this.currentTrigger?this.currentTrigger?.type==="unassigned_units"?"max-content":"40rem":"max-content"}},this.renderCurrentTrigger()),t("ir-modal",{key:"549d38d0e2c8a18b443222fc33e15a6b81198b6b",autoClose:false,modalBody:this.modalType==="delete"?`${g.entries.Lcz_AreYouSureToDelete} ${this.user?.username}?`:`${g.entries.Lcz_AreYouSureToUnverify} ${this.maskEmail(this.user?.email)}`,rightBtnColor:"danger",isLoading:be("/Handle_Exposed_User"),onCancelModal:this.resetModalState.bind(this),rightBtnText:this.modalType==="verify"?g.entries.Lcz_Confirm:g.entries.Lcz_Delete,onConfirmModal:this.executeUserAction.bind(this),ref:e=>this.modalRef=e}))}static get watchers(){return{haveAdminPrivileges:["handleChange"]}}};qm.style=jm+Gm;const Km=":host{display:block}";const Wm=Km;const Xm=class{constructor(t){e(this,t);this.validationChange=a(this,"irValidationChange",7);this.valueChange=a(this,"irValueChange",7)}get el(){return o(this)}schema;value;autovalidate;form;valueEvent="input input-change value-change select-change";blurEvent="blur input-blur select-blur";validationDebounce=200;validationChange;valueChange;isValid=true;autoValidateActive=false;childEl;formEl;slotEl;currentValue;hasInteracted=false;validationTimer;valueEventsBound=[];blurEventsBound=[];componentWillLoad(){if(!this.schema){throw new Error("<ir-validator> requires a `schema` prop.")}this.syncAutovalidateFlag(this.autovalidate)}componentDidLoad(){this.slotEl=this.el.shadowRoot?.querySelector("slot");this.slotEl?.addEventListener("slotchange",this.handleSlotChange);this.initializeChildReference();this.attachFormListener()}disconnectedCallback(){this.teardownChildListeners();this.detachFormListener();this.slotEl?.removeEventListener("slotchange",this.handleSlotChange);this.clearValidationTimer()}handleSchemaChange(){if(this.autoValidateActive&&this.hasInteracted){this.flushValidation()}}handleAutoValidatePropChange(e){this.syncAutovalidateFlag(e);if(this.autoValidateActive){this.flushValidation()}}handleFormPropChange(){this.detachFormListener();this.attachFormListener()}handleValueEventChange(e,t){if(e===t)return;this.rebindChildListeners()}handleBlurEventChange(e,t){if(e===t)return;this.rebindChildListeners()}syncAutovalidateFlag(e){this.autoValidateActive=JSON.parse(String(e??false))}parseEvents(e){if(!e)return[];return e.split(/[\s,]+/).map((e=>e.trim())).filter(Boolean)}handleValuePropChange(e,t){if(Object.is(e,t))return;this.updateValue(e,{suppressValidation:true,emitChange:false});if(this.autoValidateActive&&this.hasInteracted){this.flushValidation()}}handleSlotChange=()=>{this.initializeChildReference()};initializeChildReference(){const e=this.pickSingleChild();if(e===this.childEl)return;this.teardownChildListeners();if(!e)return;this.childEl=e;this.hasInteracted=false;this.registerChildListeners();const t=this.readValueFromChild();this.updateValue(t,{suppressValidation:!this.autoValidateActive,emitChange:true});if(!this.autoValidateActive){this.updateAriaValidity(this.isValid)}}pickSingleChild(){const e=this.slotEl?.assignedElements({flatten:true})??Array.from(this.el.children);const t=e.filter((e=>e.nodeType===Node.ELEMENT_NODE));if(t.length===0){console.warn("<ir-validator> requires exactly one child element but found none.");return undefined}if(t.length>1){console.warn(`<ir-validator> requires exactly one child element but found ${t.length}. Using the first.`)}return t[0]}registerChildListeners(){if(!this.childEl)return;this.unbindChildListeners();this.valueEventsBound=this.parseEvents(this.valueEvent);this.blurEventsBound=this.parseEvents(this.blurEvent);this.valueEventsBound.forEach((e=>this.childEl.addEventListener(e,this.handleValueEvent)));this.blurEventsBound.forEach((e=>this.childEl.addEventListener(e,this.handleBlurEvent)))}unbindChildListeners(){if(!this.childEl)return;this.valueEventsBound.forEach((e=>this.childEl.removeEventListener(e,this.handleValueEvent)));this.blurEventsBound.forEach((e=>this.childEl.removeEventListener(e,this.handleBlurEvent)));this.valueEventsBound=[];this.blurEventsBound=[]}teardownChildListeners(){if(this.childEl){this.unbindChildListeners();this.childEl=undefined}this.clearValidationTimer()}rebindChildListeners(){if(!this.childEl)return;this.registerChildListeners()}handleValueEvent=e=>{if(!this.childEl)return;const t=this.extractEventValue(e);this.hasInteracted=true;this.updateValue(t)};handleBlurEvent=()=>{if(!this.childEl)return;this.hasInteracted=true;if(this.autoValidateActive){this.flushValidation()}};extractEventValue(e){if("detail"in e&&e["detail"]&&typeof e["detail"]==="object"&&"value"in e.detail){return e.detail.value}const t=e.target;if(t&&"value"in t){return t.value}return this.readValueFromChild()}readValueFromChild(){if(this.value!==undefined){return this.value}if(!this.childEl)return undefined;if("value"in this.childEl){return this.childEl.value}return this.childEl.getAttribute?.("value")}updateValue(e,t={}){const i=this.currentValue;this.currentValue=e;if(t.emitChange!==false&&!Object.is(i,e)){this.valueChange.emit({value:this.currentValue})}if(!t.suppressValidation&&this.autoValidateActive&&this.hasInteracted){this.scheduleValidation()}}validateCurrentValue(e=false){if(!this.schema)return true;const t=this.currentValue??this.readValueFromChild();this.currentValue=t;const i=this.schema.safeParse(t);const a=i.success;const r=this.isValid;this.isValid=a;const o=e||this.autoValidateActive&&this.hasInteracted;if(o){this.updateAriaValidity(a);if(r!==a){this.emitValidationChange()}}return a}updateAriaValidity(e){if(!this.childEl)return;if(e){this.childEl.removeAttribute("aria-invalid")}else{this.childEl.setAttribute("aria-invalid","true")}}emitValidationChange(){this.validationChange.emit({valid:this.isValid,value:this.currentValue})}attachFormListener(){this.formEl=this.resolveFormRef();this.formEl?.addEventListener("submit",this.handleFormSubmit,true)}detachFormListener(){this.formEl?.removeEventListener("submit",this.handleFormSubmit,true);this.formEl=undefined}resolveFormRef(){if(typeof document!=="undefined"&&this.form){const e=document.getElementById(this.form);if(e&&e instanceof HTMLFormElement){return e}}return this.el.closest("form")}handleFormSubmit=()=>{this.hasInteracted=true;const e=this.flushValidation();if(!e&&!this.autoValidateActive){this.autoValidateActive=true}};scheduleValidation(e=false){this.clearValidationTimer();const t=Number(this.validationDebounce);if(e||!isFinite(t)||t<=0){return this.validateCurrentValue(true)}this.validationTimer=setTimeout((()=>{this.validationTimer=undefined;this.validateCurrentValue(true)}),t);return this.isValid}flushValidation(){return this.scheduleValidation(true)}clearValidationTimer(){if(this.validationTimer!==undefined){clearTimeout(this.validationTimer);this.validationTimer=undefined}}render(){return t(i,{key:"dcfc4a6d56ba9da0748e4adcbe4c1e23b6b9da48"},t("slot",{key:"40bf6b36c484785fde318440aa7b0aa649f5ace6"}))}static get watchers(){return{schema:["handleSchemaChange"],autovalidate:["handleAutoValidatePropChange"],form:["handleFormPropChange"],valueEvent:["handleValueEventChange"],blurEvent:["handleBlurEventChange"],value:["handleValuePropChange"]}}};Xm.style=Wm;const Jm=".sc-ir-weekday-selector-h{display:block}.days-checkbox.sc-ir-weekday-selector{gap:0.5rem}";const Qm=Jm;const Zm=class{constructor(t){e(this,t);this.weekdayChange=a(this,"weekdayChange",7)}weekdays=[];selectedWeekdays=new Set(this.weekdays);weekdayChange;_weekdays=[{value:1,label:"M"},{value:2,label:"T"},{value:3,label:"W"},{value:4,label:"Th"},{value:5,label:"Fr"},{value:6,label:"Sa"},{value:0,label:"Su"}];handleWeekdayChange(e,t){if(e.length!==t.length&&e.length!==this.selectedWeekdays.size){this.selectedWeekdays=new Set(e)}}toggleWeekDays({checked:e,weekDay:t}){const i=new Set(this.selectedWeekdays);if(e){if(!this.selectedWeekdays.has(t)){i.add(t);this.selectedWeekdays=new Set(i)}}else{i.delete(t);this.selectedWeekdays=new Set(i)}this.weekdayChange.emit(Array.from(this.selectedWeekdays))}render(){return t(i,{key:"e574dacec9c8f0d1e4967665a7da3ba2a4a5fa26",class:"my-1 d-flex align-items-center",style:{gap:"1.1rem"}},this._weekdays.map((e=>t("ir-checkbox",{checked:this.selectedWeekdays.has(e.value),onCheckChange:t=>this.toggleWeekDays({checked:t.detail,weekDay:e.value}),label:e.label,labelClass:"m-0 p-0",class:"days-checkbox"}))))}static get watchers(){return{weekdays:["handleWeekdayChange"]}}};Zm.style=Qm;const ew="*.sc-ota-label{margin:0;padding:0}.sc-ota-label-h{display:flex;margin-bottom:5px;gap:5px}.label_title.sc-ota-label{min-width:max-content;padding:0;margin:0;font-weight:600}.ota-message-list.sc-ota-label{margin:0 3px;padding:0;overflow:hidden;width:100%;word-wrap:break-word !important;overflow-wrap:break-word !important}.ota-message-item.sc-ota-label{width:100%;line-height:1.5;margin:0;padding:0;word-wrap:break-word !important;overflow-wrap:break-word !important}.ota-message-item.sc-ota-label::before{content:'- ';margin-right:0.25rem}.ota-visibility-toggle.sc-ota-label{background:white;color:var(--blue);padding:0;margin:0;margin-left:3px;font-size:12px;border:0}.ota-visibility-toggle.sc-ota-label:hover{color:#355270}.ota-message-list.sc-ota-label{margin:0 3px;padding:0;overflow:hidden;width:100%;word-wrap:break-word !important;overflow-wrap:break-word !important;white-space:normal;list-style:none}.ota-message-item.sc-ota-label{width:100%;line-height:1.5;margin:0 0 0 1.2em;padding:0;word-wrap:break-word !important;overflow-wrap:break-word !important;white-space:normal;position:relative}";const tw=ew;const iw=class{constructor(t){e(this,t)}label;remarks;maxVisibleItems=3;showAll=false;toggleShowAll=()=>{this.showAll=!this.showAll};render(){if(!this.remarks){return null}const e=this.showAll?this.remarks:this.remarks.slice(0,this.maxVisibleItems);return t(i,null,t("p",{class:"label_title"},this.label),t("ul",{class:"ota-message-list"},e.map(((i,a)=>t("li",{key:pe(),class:"ota-message-item"},i.statement," ",this.remarks.length>this.maxVisibleItems&&a===e.length-1&&t("button",{class:"ota-visibility-toggle",onClick:this.toggleShowAll},this.showAll?g.entries.Lcz_ShowLess:g.entries.Lcz_ShowMore))))))}};iw.style=tw;const aw=".sc-requirement-check-h{display:block;font-size:0.875rem}.valid.sc-requirement-check{color:var(--green, #28d094)}.requirement.sc-requirement-check{display:flex;align-items:center;gap:0.5rem}";const rw=aw;const ow=class{constructor(t){e(this,t)}isValid=false;text="";render(){return t("div",{key:"63c0099c0ae571618e4b56e38e84b45bd5eaa49a",class:{requirement:true,valid:this.isValid}},t("ir-icons",{key:"758a6980b9f0b257eefea9d1eacbef6d6e2fb0a5",style:{"--icon-size":"0.875rem"},name:this.isValid?"check":"xmark"}),t("span",{key:"b8e3304578f1a9a3e7786ee7fed0fee0d65206eb"},this.text))}};ow.style=rw;export{Ve as igl_application_info,Ke as igl_block_dates_view,et as igl_book_property,at as igl_book_property_container,nt as igl_book_property_footer,ct as igl_book_property_header,vt as igl_booking_event,Ot as igl_booking_event_hover,Rt as igl_booking_form,Lt as igl_booking_overview_page,Vt as igl_bulk_block,Xt as igl_bulk_operations,ti as igl_bulk_stop_sale,ri as igl_cal_body,si as igl_cal_footer,wi as igl_cal_header,ki as igl_date_range,Di as igl_legends,Si as igl_property_booked_by,Ti as igl_rate_plan,Oi as igl_reallocation_dialog,Ri as igl_room_type,Hi as igl_split_booking,Vi as igl_tba_booking_view,Ki as igl_tba_category_view,Ji as igl_to_be_assigned,Vr as igloo_calendar,Wr as ir_accordion,Qr as ir_actions_cell,ao as ir_applicable_policies,Eo as ir_arrivals,zo as ir_arrivals_filters,Po as ir_arrivals_table,$o as ir_autocomplete,Uo as ir_balance_cell,Ko as ir_billing,Jo as ir_billing_drawer,en as ir_booked_by_cell,rn as ir_booked_on_cell,sn as ir_booking_billing_recipient,dn as ir_booking_company_dialog,pn as ir_booking_company_form,gn as ir_booking_details,yn as ir_booking_email_logs,xn as ir_booking_extra_note,Cn as ir_booking_guarantee,Yn as ir_booking_header,zn as ir_booking_listing,Bn as ir_booking_listing_mobile_card,$n as ir_booking_listing_table,Un as ir_booking_number_cell,Gn as ir_booking_status_tag,Wn as ir_button,Qn as ir_checkbox,ts as ir_checkout_dialog,rs as ir_combobox,ls as ir_common,hs as ir_country_picker,fs as ir_custom_button,_s as ir_custom_date_picker,Ss as ir_custom_input,Ts as ir_daily_revenue,Os as ir_daily_revenue_filters,Hc as ir_date_picker,Vc as ir_date_range,Kc as ir_date_view,Jc as ir_dates_cell,ed as ir_delete_modal,Dd as ir_departures,Sd as ir_departures_filter,zd as ir_departures_table,Wd as ir_dialog,Zd as ir_drawer,ih as ir_dropdown,oh as ir_dropdown_item,lh as ir_empty_state,hh as ir_events_log,fh as ir_extra_service,mh as ir_extra_service_config,Dh as ir_extra_service_config_form,Sh as ir_extra_services,Ih as ir_filters_panel,Ph as ir_guest_info_drawer,$h as ir_guest_info_form,Uh as ir_guest_name_cell,Gh as ir_hk_archive,ku as ir_hk_tasks,Mu as ir_hk_team,Iu as ir_hk_unassigned_units,Nu as ir_hk_user,Fu as ir_housekeeping,ju as ir_icon,qu as ir_icons,Xu as ir_input_text,Zu as ir_interactive_title,ap as ir_interceptor,np as ir_invoice,cp as ir_invoice_form,up as ir_label,bp as ir_listing_header,wp as ir_loading_screen,xp as ir_login,Cp as ir_m_combobox,Ep as ir_mobile_input,zp as ir_modal,Bp as ir_monthly_bookings_report,Np as ir_monthly_bookings_report_filter,Up as ir_monthly_bookings_report_table,Gp as ir_new_badge,Wp as ir_otp,Zp as ir_otp_modal,af as ir_pagination,nf as ir_password_validator,cf as ir_payment_details,pf as ir_payment_folio,Cf as ir_payment_folio_form,Yf as ir_payment_item,If as ir_payment_summary,Af as ir_payments_folio,Pf as ir_phone_input,$f as ir_picker,Uf as ir_picker_item,Gf as ir_pickup,Xf as ir_pickup_form,Zf as ir_pickup_view,ib as ir_pms_logs,ob as ir_popover,lb as ir_price_input,hb as ir_progress_indicator,fb as ir_radio,mb as ir_range_picker,vb as ir_reservation_information,Cb as ir_reset_password,Eb as ir_revenue_row,zb as ir_revenue_row_details,Bb as ir_revenue_summary,Nb as ir_revenue_table,Fb as ir_room,jb as ir_room_guests,Wb as ir_room_guests_form,eg as ir_room_nights,ag as ir_sales_by_channel,ng as ir_sales_by_channel_filters,hg as ir_sales_by_channel_table,fg as ir_sales_by_country,mg as ir_sales_by_country_summary,vg as ir_sales_filters,Cg as ir_sales_table,Yg as ir_secure_tasks,Ig as ir_select,Ag as ir_sidebar,Pg as ir_spinner,$g as ir_stats_card,Ug as ir_status_activity_cell,Gg as ir_success_loader,Wg as ir_switch,Qg as ir_tabs,tm as ir_tasks_card,rm as ir_tasks_filters,sm as ir_tasks_header,um as ir_tasks_table,bm as ir_tasks_table_pagination,wm as ir_textarea,km as ir_title,Dm as ir_toast,Sm as ir_tooltip,Tm as ir_unit_cell,Om as ir_unit_tag,Lm as ir_user_form_panel,Hm as ir_user_management,qm as ir_user_management_table,Xm as ir_validator,Zm as ir_weekday_selector,iw as ota_label,ow as requirement_check};
//# sourceMappingURL=p-e0e38a33.entry.js.map