import{r as t,h as s,H as e}from"./p-b4b99085.js";import{T as i}from"./p-59b1956e.js";import{b as a,m as r}from"./p-fe1ba86a.js";import"./p-bf44a732.js";import"./p-6c4ba7c0.js";import"./p-a66990e0.js";import"./p-41fabaeb.js";import"./p-2fcb9a1f.js";const n=".sc-ir-secure-tasks-h{display:block;height:100%}.nav.sc-ir-secure-tasks{background:white;padding:0.25rem 0}.nav-tabs.sc-ir-secure-tasks{border-bottom:0}.nav-link.sc-ir-secure-tasks{color:inherit}.active.sc-ir-secure-tasks{color:var(--blue)}";const o=n;const c=class{constructor(s){t(this,s);this.isAuthenticated=false;this.token=new i;this.dates={};this.routes=[{name:"Housekeepers",value:"hk"},{name:"Tasks",value:"tasks"},{name:"Front",value:"front"},{name:"Users",value:"users"}]}componentWillLoad(){const t=a();this.generateDates();if(t){this.isAuthenticated=true;this.token.setToken(t.token)}this.inputValue=this.p}handlePChange(){this.inputValue=this.p}generateDates(){var t=new Date;t.setDate(t.getDate()-1);var s=t.toISOString().substring(0,10);t.setDate(t.getDate()+60);var e=t.toISOString().substring(0,10);this.dates={from_date:s,to_date:e}}handleAuthFinish(t){const s=t.detail.token;this.token.setToken(s);this.isAuthenticated=true;r({login:{method:"direct",isLoggedIn:true,token:s}})}render(){if(!this.isAuthenticated)return s(e,null,s("ir-login",{onAuthFinish:this.handleAuthFinish.bind(this)}));return s(e,null,s("div",{class:"px-1 nav flex-column flex-sm-row d-flex align-items-center justify-content-between"},s("div",{class:"d-flex  align-items-center"},s("div",{class:"d-flex align-items-center p-0 m-0",style:{gap:"0.5rem"}},s("h4",{class:"m-0 p-0"},"AName: "),s("form",{class:"input-group",onSubmit:t=>{t.preventDefault();if(this.inputValue){const t=new URL(window.location.href);t.searchParams.set("aname",this.inputValue);window.history.pushState({},"",t)}this.logout()}},s("input",{type:"text",value:this.inputValue,onInput:t=>this.inputValue=t.target.value,style:{maxWidth:"60px"},class:"form-control",placeholder:"AName","aria-label":"AName","aria-describedby":"button-save"}),s("div",{class:"input-group-append"},s("button",{class:"btn btn-sm btn-outline-secondary",type:"submit",id:"button-save"},"save")))),s("ul",{class:"nav  m-0 p-0"},this.routes.map((t=>s("li",{key:t.name,class:" nav-item"},s("a",{class:{"nav-link":true,active:this.currentPage===t.value},href:"#",onClick:()=>{this.currentPage=t.value}},t.name)))))),s("button",{class:"btn btn-sm btn-primary",onClick:()=>{this.logout()}},"Logout")),this.renderPage())}logout(){sessionStorage.removeItem("backend_anchor");window.location.reload()}renderPage(){switch(this.currentPage){case"tasks":return s("ir-hk-tasks",{p:this.p,propertyid:this.propertyid,language:"en",ticket:this.token.getToken()});case"front":return s("igloo-calendar",{currencyName:"USD",propertyid:this.propertyid,p:this.p,ticket:this.token.getToken(),from_date:this.dates.from_date,to_date:this.dates.to_date,language:"en"});case"hk":return s("ir-housekeeping",{p:this.p,propertyid:this.propertyid,language:"en",ticket:this.token.getToken()});case"users":return s("ir-user-management",{userTypeCode:5,p:this.p,propertyid:this.propertyid,language:"en",ticket:this.token.getToken()});default:return null}}static get watchers(){return{p:["handlePChange"]}}};c.style=o;export{c as ir_secure_tasks};
//# sourceMappingURL=p-37b6b6cf.entry.js.map