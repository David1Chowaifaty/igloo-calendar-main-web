import{r as t,h as e,H as s}from"./p-b4b99085.js";import{T as i}from"./p-a93581f3.js";import{H as a,I as n}from"./p-792550e2.js";import"./p-bf44a732.js";import"./p-6c4ba7c0.js";import"./p-7fc0c3ea.js";import"./p-29b13e62.js";import"./p-41fabaeb.js";import"./p-2fcb9a1f.js";const r=":host{display:block;height:100%}.nav{background:white;padding:0.25rem 0}.nav-tabs{border-bottom:0}.nav-link{color:inherit}.active{color:var(--blue)}";const o=r;const h=class{constructor(e){t(this,e);this.isAuthenticated=false;this.token=new i;this.dates={};this.routes=[{name:"Housekeepers",value:"hk"},{name:"Tasks",value:"tasks"},{name:"Front",value:"front"},{name:"Users",value:"users"}]}componentWillLoad(){const t=a();this.generateDates();if(t){this.isAuthenticated=true;this.token.setToken(t.token)}this.inputValue=this.p}handlePChange(){this.inputValue=this.p}generateDates(){var t=new Date;t.setDate(t.getDate()-1);var e=t.toISOString().substring(0,10);t.setDate(t.getDate()+60);var s=t.toISOString().substring(0,10);this.dates={from_date:e,to_date:s}}handleAuthFinish(t){const e=t.detail.token;this.token.setToken(e);this.isAuthenticated=true;n({login:{method:"direct",isLoggedIn:true,token:e}})}render(){if(!this.isAuthenticated)return e(s,null,e("ir-login",{onAuthFinish:this.handleAuthFinish.bind(this)}));return e(s,null,e("div",{class:"px-1 nav flex-column flex-sm-row d-flex align-items-center justify-content-between"},e("div",{class:"d-flex  align-items-center"},e("div",{class:"d-flex align-items-center p-0 m-0",style:{gap:"0.5rem"}},e("h4",{class:"m-0 p-0"},"AName: "),e("form",{class:"input-group",onSubmit:t=>{t.preventDefault();if(this.inputValue){const t=new URL(window.location.href);t.searchParams.set("aname",this.inputValue);window.history.pushState({},"",t)}this.logout()}},e("input",{type:"text",value:this.inputValue,onInput:t=>this.inputValue=t.target.value,style:{maxWidth:"60px"},class:"form-control",placeholder:"AName","aria-label":"AName","aria-describedby":"button-save"}),e("div",{class:"input-group-append"},e("button",{class:"btn btn-sm btn-outline-secondary",type:"submit",id:"button-save"},"save")))),e("ul",{class:"nav  m-0 p-0"},this.routes.map((t=>e("li",{key:t.name,class:" nav-item"},e("a",{class:{"nav-link":true,active:this.currentPage===t.value},href:"#",onClick:()=>{this.currentPage=t.value}},t.name)))))),e("button",{class:"btn btn-sm btn-primary",onClick:()=>{this.logout()}},"Logout")),this.renderPage())}logout(){sessionStorage.removeItem("backend_anchor");window.location.reload()}renderPage(){switch(this.currentPage){case"tasks":return e("ir-hk-tasks",{p:this.p,propertyid:this.propertyid,language:"en",ticket:this.token.getToken()});case"front":return e("igloo-calendar",{currencyName:"USD",propertyid:this.propertyid,p:this.p,ticket:this.token.getToken(),from_date:this.dates.from_date,to_date:this.dates.to_date,language:"en"});case"hk":return e("ir-housekeeping",{p:this.p,propertyid:this.propertyid,language:"en",ticket:this.token.getToken()});case"users":return e("ir-user-management",{userTypeCode:5,p:this.p,propertyid:this.propertyid,language:"en",ticket:this.token.getToken()});default:return null}}static get watchers(){return{p:["handlePChange"]}}};h.style=o;export{h as ir_secure_tasks};
//# sourceMappingURL=p-8d6b7f38.entry.js.map