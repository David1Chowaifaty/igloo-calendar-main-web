{"version":3,"names":["iglBookingEventHoverCss","IglBookingEventHoverStyle0","IglBookingEventHover","constructor","hostRef","this","bubbleInfoTop","is_vacation_rental","shouldHideUnassignUnit","eventService","EventsService","hideButtons","componentWillLoad","selectedRt","bookingEvent","roomsInfo","find","r","id","RATE_TYPE","physicalrooms","length","moment","TO_DATE","isBefore","canCheckInOrCheckout","isSameOrAfter","Date","FROM_DATE","handleBookingEventChange","newValue","oldValue","getBookingId","ID","hideBubble","hideBubbleInfo","emit","key","currentInfoBubbleId","handleListenKeyDown","e","stopPropagation","getTotalOccupants","CHILDREN_COUNT","ADULTS_COUNT","locales","entries","Lcz_AdultsCaption","toLowerCase","_a","Lcz_Single_Adult","_b","Lcz_ChildCaption","_c","Lcz_Single_Child","getPhoneNumber","PHONE","getCountry","findCountry","COUNTRY","countries","name","getPhoneCode","PHONE_PREFIX","phone_prefix","renderPhone","is_direct","getInternalNote","INTERNAL_NOTE","getTotalPrice","TOTAL_PRICE","getArrivalTime","ARRIVAL_TIME","getRatePlan","currentRoom","booking","rooms","room","assigned_units_pool","console","warn","str","rateplan","Lcz_NonRefundable","getEntryDate","ENTRY_DATE","isNewBooking","isCheckedIn","STATUS","isBlockedDateEvent","hasSplitBooking","hasOwnProperty","splitBookingEvents","canCheckIn","from_date","to_date","canCheckOut","calendar_data","checkin_enabled","is_automatic_check_in_out","now","ROOM_INFO","in_out","code","compareTime","toDate","createDateWithOffsetAndHour","checkin_checkout_hours","offset","_d","hour","handleBlockDateUpdate","event","stopImmediatePropagation","opt","detail","Object","assign","data","handleEditBooking","TITLE","Lcz_EditBookingFor","handleBookingOption","getStringDateFormat","dt","getFullYear","getMonth","getDate","handleAddRoom","fromDate","setHours","from_date_str","to_date_str","eventData","NAME","BOOKING_NUMBER","ARRIVAL","ADD_ROOM_TO_BOOKING","event_type","ROOMS","GUEST","message","NOTES","SOURCE","defaultDateRange","fromDateStr","toDateStr","dateDifference","editabled","handleCustomerCheckIn","adult_nbr","children_nbr","infant_nbr","occupancy","showDialog","reason","bookingNumber","roomIdentifier","IDENTIFIER","roomName","roomUnit","sidebarPayload","identifier","checkin","unit","sharing_persons","totalGuests","handleCustomerCheckOut","handleDeleteEvent","deleteButton","POOL","log","handleUpdateBlockedDates","isLoading","setTimeout","updateBlockedEvent","error","handleConvertBlockedDateToBooking","getRoomInfo","roomIdToFind","PR_ID","selectedRoom","physicalRoom","CATEGORY","ROOM_NAME","ROOMS_INFO","renderTitle","eventType","roomInfo","Lcz_AddingUnitToBooking","Lcz_Adding","Lcz_NewBookingFor","roomData","includes","STATUS_CODE","RELEASE_AFTER_HOURS","OPTIONAL_REASON","ENTRY_MINUTE","ENTRY_HOUR","block_exposed_unit_props","pr_id","STAY_STATUS_CODE","DESCRIPTION","BLOCKED_TILL_DATE","BLOCKED_TILL_HOUR","BLOCKED_TILL_MINUTE","showBookingPopup","getOTANotes","maxVisible","ota_notes","channel_notes","separator","statement","slice","map","o","join","getInfoElement","h","class","BALANCE","src","origin","Icon","alt","Label","channel_booking_nbr","formatAmount","currency","symbol","Lcz_Balance","defaultDates","showDateDifference","containerStyle","padding","margin","labelText","Lcz_ArrivalTime","content","Lcz_Occupancy","Lcz_Phone","Lcz_RatePlan","_e","DEPARTURE_TIME","_f","description","PRIVATE_NOTE","Lcz_BookingPrivateNote","display","Lcz_GuestRemark","Lcz_ChannelNotes","renderContentAsHtml","Lcz_InternalRemark","style","gap","role","onClickHandler","btn_block","text","Lcz_Edit","icon_name","btn_styles","size","IS_EDITABLE","Lcz_AddRoom","Lcz_CheckIn","Lcz_CheckOut","Lcz_Unassign","_","getNewBookingOptions","shouldDisplayButtons","rateplans","some","rate","is_active","Fragment","Lcz_CreateNewBooking","Lcz_AssignUnitToExistingBooking","Lcz_NoRatePlanDefined","Lcz_Blockdates","getBlockedView","isEventHover","entryHour","entryMinute","defaultData","entryDate","onDataUpdateEvent","btn_disabled","Lcz_Update","Lcz_ConvertSplitBooking","btn_color","Lcz_Delete","render","Host"],"sources":["src/components/igloo-calendar/igl-booking-event-hover/igl-booking-event-hover.css?tag=igl-booking-event-hover&encapsulation=scoped","src/components/igloo-calendar/igl-booking-event-hover/igl-booking-event-hover.tsx"],"sourcesContent":[":host {\n  display: block;\n  position: relative;\n  z-index: 100;\n}\n\n.btn {\n  padding-left: 4px !important;\n  padding-right: 4px !important;\n}\n.balance_amount {\n  color: #ff4961;\n  font-size: 0.75rem;\n}\n.user-notes {\n  margin-left: 4px;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 5;\n  line-clamp: 5;\n  overflow: hidden;\n  max-width: 100%;\n  height: auto;\n}\n.events_btns {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n}\n.mx-01 {\n  --m: 5px;\n  margin-left: var(--m) !important;\n  margin-right: var(--m) !important;\n}\n\n.pointerContainerTop {\n  top: -26px;\n}\n\n.pointerContainer {\n  position: absolute;\n  height: 10px;\n  width: 350px;\n  left: var(--el-left, 50%);\n  transform: translateX(-50%);\n}\n.ota-notes {\n  width: 450px;\n}\n\n.iglPopOver {\n  /* max-width: 350px; */\n  position: absolute;\n  background-color: #fff;\n  padding: 10px;\n  border: 1px solid #656ee7;\n  border-radius: 6px;\n  left: var(--el-left, 50%);\n  transform: translateX(-50%) translateY(10px);\n  box-shadow: 1px 0px 20px rgba(0, 0, 0, 0.2);\n}\n\n.iglPopOver.infoBubble {\n  min-width: 350px;\n}\n\n.iglPopOver.blockedView {\n  max-width: 400px;\n  width: 400px;\n}\n\n.iglPopOver.newBookingOptions {\n  overflow-wrap: break-word !important;\n  min-width: 230px;\n  width: fit-content;\n}\n\n.bubblePointer {\n  position: absolute;\n  width: 0;\n  height: 0;\n  left: 50%;\n  border-left: 10px solid transparent;\n  border-right: 10px solid transparent;\n  transform: translate(-50%, 0px);\n}\n\n.bubblePointTop {\n  border-top: 10px solid #656ee7;\n}\n\n.bubblePointBottom {\n  border-bottom: 10px solid #656ee7;\n}\n\n.bubbleInfoAbove {\n  bottom: 35px;\n}\n\n.updateBtnIcon {\n  margin-right: 4px;\n}\n.icon-image {\n  height: 1.5rem;\n  width: 1.5rem;\n  margin-right: 5px;\n}\n","import { Component, Host, h, Prop, Event, EventEmitter, State, Element, Fragment, Watch, Listen } from '@stencil/core';\nimport { canCheckIn, findCountry, formatAmount } from '@/utils/utils';\nimport { ICountry } from '@/models/IBooking';\nimport { EventsService } from '@/services/events.service';\nimport moment from 'moment';\nimport locales from '@/stores/locales.store';\nimport calendar_data from '@/stores/calendar-data';\nimport { CalendarModalEvent } from '@/models/property-types';\nimport { compareTime, createDateWithOffsetAndHour } from '@/utils/booking';\nimport { IOtaNotes } from '@/models/booking.dto';\n//import { transformNewBLockedRooms } from '../../../utils/booking';\n\n@Component({\n  tag: 'igl-booking-event-hover',\n  styleUrl: 'igl-booking-event-hover.css',\n  scoped: true,\n})\nexport class IglBookingEventHover {\n  @Element() element: HTMLIglBookingEventHoverElement;\n\n  @Prop({ mutable: true }) bookingEvent: { [key: string]: any };\n  @Prop() bubbleInfoTop: boolean = false;\n  @Prop() currency;\n  @Prop() countries: ICountry[];\n  @Prop() is_vacation_rental: boolean = false;\n\n  @State() isLoading: string;\n  @State() shouldHideUnassignUnit = false;\n  @State() canCheckInOrCheckout: boolean;\n\n  @Event() showBookingPopup: EventEmitter;\n  @Event({ bubbles: true, composed: true }) hideBubbleInfo: EventEmitter;\n  @Event({ bubbles: true, composed: true }) deleteButton: EventEmitter<string>;\n  @Event() bookingCreated: EventEmitter<{ pool?: string; data: any[] }>;\n  @Event() showDialog: EventEmitter<CalendarModalEvent>;\n\n  private eventService = new EventsService();\n  private hideButtons = false;\n\n  componentWillLoad() {\n    let selectedRt = this.bookingEvent.roomsInfo.find(r => r.id === this.bookingEvent.RATE_TYPE);\n    if (selectedRt) {\n      this.shouldHideUnassignUnit = selectedRt.physicalrooms.length === 1;\n    }\n    if (moment(this.bookingEvent.TO_DATE, 'YYYY-MM-DD').isBefore(moment())) {\n      this.hideButtons = true;\n    }\n\n    this.canCheckInOrCheckout = moment().isSameOrAfter(new Date(this.bookingEvent.FROM_DATE), 'days') && moment().isBefore(new Date(this.bookingEvent.TO_DATE), 'days');\n  }\n\n  @Watch('bookingEvent')\n  handleBookingEventChange(newValue, oldValue) {\n    if (newValue !== oldValue)\n      this.canCheckInOrCheckout =\n        moment(new Date()).isSameOrAfter(new Date(this.bookingEvent.FROM_DATE), 'days') && moment(new Date()).isBefore(new Date(this.bookingEvent.TO_DATE), 'days');\n  }\n  private getBookingId() {\n    return this.bookingEvent.ID;\n  }\n  private hideBubble() {\n    this.hideBubbleInfo.emit({\n      key: 'hidebubble',\n      currentInfoBubbleId: this.getBookingId(),\n    });\n  }\n  @Listen('keydown', { target: 'body' })\n  handleListenKeyDown(e: KeyboardEvent) {\n    if (e.key === 'Escape') {\n      e.stopPropagation();\n      this.hideBubble();\n    } else return;\n  }\n\n  private getTotalOccupants() {\n    const { CHILDREN_COUNT, ADULTS_COUNT } = this.bookingEvent;\n    if (CHILDREN_COUNT === 0) {\n      return `${ADULTS_COUNT} ${ADULTS_COUNT > 1 ? locales.entries.Lcz_AdultsCaption.toLowerCase() : locales.entries.Lcz_Single_Adult?.toLowerCase()}`;\n    }\n    return `${ADULTS_COUNT} ${ADULTS_COUNT > 1 ? locales.entries.Lcz_AdultsCaption.toLowerCase() : locales.entries.Lcz_Single_Adult?.toLowerCase()}, ${CHILDREN_COUNT} ${\n      CHILDREN_COUNT > 1 ? locales.entries.Lcz_ChildCaption.toLowerCase() : locales.entries.Lcz_Single_Child?.toLowerCase()\n    }`;\n  }\n\n  private getPhoneNumber() {\n    return this.bookingEvent.PHONE;\n  }\n\n  private getCountry() {\n    return findCountry(this.bookingEvent.COUNTRY, this.countries).name;\n  }\n  private getPhoneCode() {\n    if (this.bookingEvent.PHONE_PREFIX) {\n      return this.bookingEvent.PHONE_PREFIX;\n    }\n    return findCountry(this.bookingEvent.COUNTRY, this.countries).phone_prefix;\n  }\n  private renderPhone() {\n    return this.bookingEvent.COUNTRY ? `${this.bookingEvent.is_direct ? this.getPhoneCode() + '-' : ''}${this.getPhoneNumber()} - ${this.getCountry()}` : this.getPhoneNumber();\n  }\n\n  // private getGuestNote() {\n  //   return this.bookingEvent.NOTES && <p class={'user-notes p-0 my-0'}>{this.bookingEvent.NOTES}</p>;\n  // }\n\n  private getInternalNote() {\n    return this.bookingEvent.INTERNAL_NOTE;\n  }\n\n  private getTotalPrice() {\n    return this.bookingEvent.TOTAL_PRICE;\n  }\n\n  private getArrivalTime() {\n    return this.bookingEvent.ARRIVAL_TIME;\n  }\n\n  private getRatePlan() {\n    if (!this.bookingEvent) {\n      return;\n    }\n    const currentRoom = this.bookingEvent?.booking?.rooms?.find(room => room.assigned_units_pool === this.bookingEvent.ID);\n    if (!currentRoom) {\n      console.warn(`Couldn't find room with pool ${this.bookingEvent.ID}`);\n      return null;\n    }\n    let str = '';\n    str += currentRoom.rateplan['short_name'];\n    if (currentRoom.rateplan['is_non_refundable']) {\n      str += ` - ${locales.entries.Lcz_NonRefundable}`;\n    }\n    return str;\n  }\n\n  private getEntryDate() {\n    return this.bookingEvent.ENTRY_DATE;\n  }\n\n  private isNewBooking() {\n    return this.getBookingId() === 'NEW_TEMP_EVENT';\n  }\n\n  private isCheckedIn() {\n    return this.bookingEvent.STATUS === 'IN-HOUSE';\n  }\n\n  private isBlockedDateEvent() {\n    return this.bookingEvent.STATUS === 'BLOCKED' || this.bookingEvent.STATUS === 'BLOCKED-WITH-DATES';\n  }\n\n  private hasSplitBooking() {\n    return this.bookingEvent.hasOwnProperty('splitBookingEvents') && this.bookingEvent.splitBookingEvents;\n  }\n\n  private canCheckIn() {\n    // if (!calendar_data.checkin_enabled || calendar_data.is_automatic_check_in_out) {\n    //   return false;\n    // }\n    // if (this.isCheckedIn()) {\n    //   return false;\n    // }\n    // const now = moment();\n    // if (\n    //   this.canCheckInOrCheckout ||\n    //   (moment().isSame(new Date(this.bookingEvent.TO_DATE), 'days') &&\n    //     !compareTime(now.toDate(), createDateWithOffsetAndHour(calendar_data.checkin_checkout_hours?.offset, calendar_data.checkin_checkout_hours?.hour)))\n    // ) {\n    //   return true;\n    // }\n    // return false;\n    return canCheckIn({\n      from_date: this.bookingEvent.FROM_DATE,\n      to_date: this.bookingEvent.TO_DATE,\n      isCheckedIn: this.isCheckedIn(),\n    });\n  }\n\n  private canCheckOut() {\n    if (!calendar_data.checkin_enabled || calendar_data.is_automatic_check_in_out) {\n      return false;\n    }\n    if (this.isCheckedIn()) {\n      return true;\n    }\n    const now = moment();\n    if (\n      this.bookingEvent.ROOM_INFO?.in_out?.code === '000' &&\n      moment().isSameOrAfter(new Date(this.bookingEvent.TO_DATE), 'days') &&\n      compareTime(now.toDate(), createDateWithOffsetAndHour(calendar_data.checkin_checkout_hours?.offset, calendar_data.checkin_checkout_hours?.hour))\n    ) {\n      return true;\n    }\n    return false;\n  }\n\n  private handleBlockDateUpdate(event: CustomEvent<{ [key: string]: any }>) {\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n    const opt: { [key: string]: any } = event.detail;\n    this.bookingEvent = { ...this.bookingEvent, ...opt.data };\n    //console.log(\"blocked date booking event\", this.bookingEvent);\n  }\n\n  private handleEditBooking() {\n    // console.log(\"Edit booking\");\n    this.bookingEvent.TITLE = locales.entries.Lcz_EditBookingFor;\n    this.handleBookingOption('EDIT_BOOKING');\n  }\n\n  private getStringDateFormat(dt) {\n    return dt.getFullYear() + '-' + (dt.getMonth() < 9 ? '0' : '') + (dt.getMonth() + 1) + '-' + (dt.getDate() <= 9 ? '0' : '') + dt.getDate();\n  }\n\n  private handleAddRoom() {\n    let fromDate = new Date(this.bookingEvent.FROM_DATE);\n    fromDate.setHours(0, 0, 0, 0);\n    let from_date_str = this.getStringDateFormat(fromDate);\n\n    let toDate = new Date(this.bookingEvent.TO_DATE);\n    //toDate.setDate(toDate.getDate() + 1);\n    toDate.setHours(0, 0, 0, 0);\n    let to_date_str = this.getStringDateFormat(toDate);\n    // console.log(this.bookingEvent);\n    let eventData = {\n      ID: '',\n      NAME: '',\n      BOOKING_NUMBER: this.bookingEvent.BOOKING_NUMBER,\n      FROM_DATE: from_date_str, // \"2023-07-09\",\n      TO_DATE: to_date_str, // \"2023-07-11\",\n      roomsInfo: this.bookingEvent.roomsInfo,\n      ARRIVAL: this.bookingEvent.ARRIVAL,\n      ADD_ROOM_TO_BOOKING: this.bookingEvent.ID,\n      TITLE: 'Add Room to #' + this.bookingEvent.BOOKING_NUMBER,\n      event_type: 'ADD_ROOM',\n      ROOMS: this.bookingEvent.ROOMS,\n      GUEST: this.bookingEvent.GUEST,\n      message: this.bookingEvent.NOTES,\n      SOURCE: this.bookingEvent.SOURCE,\n      booking: this.bookingEvent?.booking,\n      defaultDateRange: {\n        fromDate: fromDate,\n        fromDateStr: '',\n        toDate: toDate,\n        toDateStr: '',\n        dateDifference: 0,\n        editabled: true,\n        message: 'Including 5.00% City Tax - Excluding 11.00% VAT',\n      },\n    };\n\n    this.handleBookingOption('ADD_ROOM', eventData);\n  }\n\n  private handleCustomerCheckIn() {\n    const { adult_nbr, children_nbr, infant_nbr } = this.bookingEvent.ROOM_INFO.occupancy;\n    this.showDialog.emit({\n      reason: 'checkin',\n      bookingNumber: this.bookingEvent.BOOKING_NUMBER,\n      roomIdentifier: this.bookingEvent.IDENTIFIER,\n      roomName: '',\n      roomUnit: '',\n      sidebarPayload: {\n        identifier: this.bookingEvent.IDENTIFIER,\n        bookingNumber: this.bookingEvent.BOOKING_NUMBER,\n        checkin: false,\n        roomName: this.bookingEvent.ROOM_INFO.unit?.name ?? '',\n        sharing_persons: this.bookingEvent.ROOM_INFO.sharing_persons,\n        totalGuests: adult_nbr + children_nbr + infant_nbr,\n      },\n    });\n  }\n\n  private handleCustomerCheckOut() {\n    this.showDialog.emit({ reason: 'checkout', bookingNumber: this.bookingEvent.BOOKING_NUMBER, roomIdentifier: this.bookingEvent.IDENTIFIER, roomName: '', roomUnit: '' });\n  }\n\n  private handleDeleteEvent() {\n    this.hideBubble();\n    this.deleteButton.emit(this.bookingEvent.POOL);\n    console.log('Delete Event');\n  }\n\n  private async handleUpdateBlockedDates() {\n    try {\n      this.isLoading = 'update';\n      setTimeout(() => {\n        this.hideBubble();\n      }, 50);\n      await this.eventService.updateBlockedEvent(this.bookingEvent);\n      this.isLoading = '';\n    } catch (error) {\n      //   toastr.error(error);\n    }\n  }\n\n  private handleConvertBlockedDateToBooking() {\n    this.handleBookingOption('BAR_BOOKING');\n  }\n\n  private getRoomInfo() {\n    const roomIdToFind = +this.bookingEvent.PR_ID;\n    let selectedRoom: any = {};\n\n    for (const room of this.bookingEvent.roomsInfo) {\n      for (const physicalRoom of room.physicalrooms) {\n        if (roomIdToFind === physicalRoom.id) {\n          selectedRoom.CATEGORY = room.name;\n          selectedRoom.ROOM_NAME = physicalRoom.name;\n          selectedRoom.ROOMS_INFO = room;\n          return selectedRoom;\n        }\n      }\n    }\n\n    return selectedRoom;\n  }\n  private renderTitle(eventType, roomInfo) {\n    switch (eventType) {\n      case 'EDIT_BOOKING':\n        return `${locales.entries.Lcz_EditBookingFor} ${roomInfo.CATEGORY} ${roomInfo.ROOM_NAME}`;\n      case 'ADD_ROOM':\n        return `${locales.entries.Lcz_AddingUnitToBooking}# ${this.bookingEvent.BOOKING_NUMBER}`;\n      case 'SPLIT_BOOKING':\n        return locales.entries.Lcz_Adding + ` ${roomInfo.CATEGORY} ${roomInfo.ROOM_NAME}`;\n      default:\n        return `${locales.entries.Lcz_NewBookingFor} ${roomInfo.CATEGORY} ${roomInfo.ROOM_NAME}`;\n    }\n  }\n  private handleBookingOption(eventType, roomData = null) {\n    const roomInfo = this.getRoomInfo();\n    let data = roomData ? roomData : this.bookingEvent;\n    data.event_type = eventType;\n    data.TITLE = this.renderTitle(eventType, roomInfo);\n\n    if (['003', '002', '004'].includes(this.bookingEvent.STATUS_CODE)) {\n      data.roomsInfo = [roomInfo.ROOMS_INFO];\n    }\n    if (eventType === 'BAR_BOOKING' && this.bookingEvent.STATUS !== 'TEMP-EVENT') {\n      const { FROM_DATE, TO_DATE, PR_ID, RELEASE_AFTER_HOURS, ENTRY_DATE, OPTIONAL_REASON, ENTRY_MINUTE, ENTRY_HOUR, STATUS_CODE } = this.bookingEvent;\n      data.block_exposed_unit_props = {\n        from_date: FROM_DATE,\n        to_date: TO_DATE,\n        NOTES: OPTIONAL_REASON,\n        pr_id: PR_ID,\n        STAY_STATUS_CODE: STATUS_CODE,\n        DESCRIPTION: RELEASE_AFTER_HOURS,\n        BLOCKED_TILL_DATE: ENTRY_DATE,\n        BLOCKED_TILL_HOUR: ENTRY_HOUR,\n        BLOCKED_TILL_MINUTE: ENTRY_MINUTE,\n      };\n      this.handleDeleteEvent();\n    }\n    this.showBookingPopup.emit({\n      key: 'add',\n      data: {\n        ...data,\n        //roomsInfo: [roomInfo.ROOMS_INFO],\n      },\n    });\n    this.hideBubbleInfo.emit({\n      key: 'hidebubble',\n      currentInfoBubbleId: this.getBookingId(),\n    });\n  }\n  // private renderNote() {\n  //   const { is_direct, ota_notes } = this.bookingEvent;\n  //   const guestNote = this.getGuestNote();\n  //   const noteLabel = locales.entries.Lcz_Note + ':';\n\n  //   if (!is_direct && ota_notes) {\n  //     return (\n  //       <div class=\"row p-0 m-0\">\n  //         <div class=\"col-12 px-0 text-wrap d-flex\">\n  //           <ota-label label={noteLabel} remarks={ota_notes}></ota-label>\n  //         </div>\n  //       </div>\n  //     );\n  //   } else if (is_direct && guestNote) {\n  //     return (\n  //       <div class=\"row p-0 m-0\">\n  //         <div class=\"col-12 px-0 text-wrap d-flex\">\n  //           <Fragment>\n  //             <span class=\"font-weight-bold\">{noteLabel} </span>\n  //             {guestNote}\n  //           </Fragment>\n  //         </div>\n  //       </div>\n  //     );\n  //   }\n  //   return null;\n  // }\n  private getOTANotes(maxVisible: number = 3) {\n    if (!this.bookingEvent.ota_notes || this.bookingEvent.ota_notes?.length === 0) {\n      return null;\n    }\n    const channel_notes: IOtaNotes[] = [...this.bookingEvent.ota_notes];\n    const separator = '<br>- ';\n    if (channel_notes.length > maxVisible) {\n      channel_notes[maxVisible - 1] = { statement: `${channel_notes[maxVisible - 1].statement} <span style=\"color: #1e9ff2;\">more...</span>` };\n    }\n    return channel_notes\n      .slice(0, maxVisible)\n      .map(o => `${separator}${o.statement}`)\n      .join('');\n  }\n\n  private getInfoElement() {\n    return (\n      <div class={`iglPopOver infoBubble ${this.bubbleInfoTop ? 'bubbleInfoAbove' : ''} text-left`}>\n        <div class={`row p-0 m-0  ${this.bookingEvent.BALANCE > 1 ? 'pb-0' : 'pb-1'}`}>\n          <div class=\"px-0  col-8 font-weight-bold font-medium-1 d-flex align-items-center\">\n            <img src={this.bookingEvent?.origin?.Icon} alt={this.bookingEvent?.origin?.Label} class={'icon-image'} />\n            <p class={'p-0 m-0'}>{!this.bookingEvent.is_direct ? this.bookingEvent.channel_booking_nbr : this.bookingEvent.BOOKING_NUMBER}</p>\n          </div>\n          <div class=\"pr-0 col-4 text-right\">{formatAmount(this.currency.symbol, this.getTotalPrice())}</div>\n        </div>\n        {this.bookingEvent.BALANCE > 1 && (\n          <p class=\"pr-0 m-0 p-0 text-right balance_amount\">\n            {locales.entries.Lcz_Balance}: {formatAmount(this.currency.symbol, this.bookingEvent.BALANCE)}\n          </p>\n        )}\n        <div class=\"row p-0 m-0\">\n          <div class=\"px-0 pr-0 col-12\">\n            <ir-date-view from_date={this.bookingEvent.defaultDates.from_date} to_date={this.bookingEvent.defaultDates.to_date} showDateDifference={false}></ir-date-view>\n            {/* <span class=\"font-weight-bold\">{locales.entries.Lcz_In}: </span> */}\n          </div>\n        </div>\n        {this.getArrivalTime() && (\n          // <div class=\"row p-0 m-0\">\n          //   <div class=\"px-0 col-12\">\n          //     <span class=\"font-weight-bold\">{locales.entries.Lcz_ArrivalTime}: </span>\n          //     {this.getArrivalTime()}\n          //   </div>\n          // </div>\n          <ir-label containerStyle={{ padding: '0', margin: '0' }} class=\"m-0 p-0\" labelText={`${locales.entries.Lcz_ArrivalTime}:`} content={this.getArrivalTime()}></ir-label>\n        )}\n        {this.getTotalOccupants() && (\n          // <div class=\"row p-0 m-0\">\n          //   <div class=\"px-0  col-12\">\n          //     <span class=\"font-weight-bold\">{locales.entries.Lcz_Occupancy}: </span>\n          //     {this.getTotalOccupants()}\n          //   </div>\n          // </div>\n\n          <ir-label class=\"m-0 p-0\" containerStyle={{ padding: '0', margin: '0' }} labelText={`${locales.entries.Lcz_Occupancy}:`} content={this.getTotalOccupants()}></ir-label>\n        )}\n        {this.getPhoneNumber() && (\n          // <div class=\"row p-0 m-0\">\n          //   <div class=\"px-0  col-12 text-wrap\">\n          //     <span class=\"font-weight-bold\">{locales.entries.Lcz_Phone}: </span>\n          //     {this.renderPhone()}\n          //   </div>\n          // </div>\n          <ir-label containerStyle={{ padding: '0', margin: '0' }} class=\"m-0 p-0\" labelText={`${locales.entries.Lcz_Phone}:`} content={this.renderPhone()}></ir-label>\n        )}\n        {this.getRatePlan() && (\n          // <div class=\"row p-0 m-0\">\n          //   <div class=\"px-0  col-12\">\n          //     <span class=\"font-weight-bold\">{locales.entries.Lcz_RatePlan}: </span>\n          //     {this.getRatePlan()}\n          //   </div>\n          // </div>\n          <ir-label containerStyle={{ padding: '0', margin: '0' }} class=\"m-0 p-0\" labelText={`${locales.entries.Lcz_RatePlan}:`} content={this.getRatePlan()}></ir-label>\n        )}\n        {this.bookingEvent.DEPARTURE_TIME?.code !== '000' && (\n          <ir-label containerStyle={{ padding: '0', margin: '0' }} class=\"m-0 p-0\" labelText={`Departure time:`} content={this.bookingEvent.DEPARTURE_TIME?.description}></ir-label>\n        )}\n        {this.bookingEvent.PRIVATE_NOTE && (\n          // <div class=\"row p-0 m-0\">\n          //   <div class=\"px-0  col-12 text-wrap\">\n          //     <span class=\"font-weight-bold\">{locales.entries.Lcz_PrivateNote}: </span>\n          //     {this.bookingEvent.PRIVATE_NOTE}\n          //   </div>\n          // </div>\n          <ir-label\n            containerStyle={{ padding: '0', margin: '0' }}\n            class=\"m-0 p-0\"\n            labelText={`${locales.entries.Lcz_BookingPrivateNote}:`}\n            display=\"inline\"\n            content={this.bookingEvent.PRIVATE_NOTE}\n          ></ir-label>\n        )}\n\n        {/* {this.renderNote()} */}\n        {/* {this.bookingEvent.is_direct ? (\n          <ir-label containerStyle={{ padding: '0', margin: '0' }} labelText={`${locales.entries.Lcz_GuestRemark}:`} display=\"inline\" content={this.bookingEvent.NOTES}></ir-label>\n        ) : (\n          <ota-label\n            class={'m-0 p-0 ota-notes'}\n            label={`${locales.entries.Lcz_ChannelNotes || 'Channel notes'}:`}\n            remarks={this.bookingEvent.ota_notes}\n            maxVisibleItems={this.bookingEvent.ota_notes?.length}\n          ></ota-label>\n        )} */}\n        {this.bookingEvent.is_direct && (\n          <ir-label containerStyle={{ padding: '0', margin: '0' }} labelText={`${locales.entries.Lcz_GuestRemark}:`} display=\"inline\" content={this.bookingEvent.NOTES}></ir-label>\n        )}\n        <ir-label\n          containerStyle={{ padding: '0', margin: '0' }}\n          labelText={`${locales.entries.Lcz_ChannelNotes}:`}\n          display=\"inline\"\n          content={this.getOTANotes()}\n          renderContentAsHtml\n        ></ir-label>\n\n        {/* {this.getInternalNote() ? (\n          <div class=\"row p-0 m-0\">\n            <div class=\"col-12 px-0 text-wrap\">\n              {this.bookingEvent.is_direct ? (\n                <Fragment>\n                  <span class=\"font-weight-bold\">{locales.entries.Lcz_InternalRemark}: </span>\n                  {this.getInternalNote()}\n                </Fragment>\n              ) : (\n                <ota-label label={`${locales.entries.Lcz_InternalRemark}:`} remarks={this.bookingEvent.ota_notes}></ota-label>\n              )}\n            </div>\n          </div>\n        ) : null} */}\n        {this.getInternalNote() && <ir-label labelText={`${locales.entries.Lcz_InternalRemark}:`} content={this.getInternalNote()}></ir-label>}\n        <div class=\"row p-0 m-0 mt-2\">\n          <div class=\"full-width d-flex align-items-center\" style={{ gap: '0.25rem' }} role=\"group\">\n            <ir-button\n              style={{ '--icon-size': '0.875rem' }}\n              onClickHandler={() => this.handleEditBooking()}\n              class={'w-100'}\n              btn_block\n              text={locales.entries.Lcz_Edit}\n              icon_name=\"edit\"\n              btn_styles=\"h-100\"\n              size=\"sm\"\n            ></ir-button>\n            {this.bookingEvent.is_direct && this.bookingEvent.IS_EDITABLE && !this.hideButtons && (\n              <ir-button\n                style={{ '--icon-size': '0.875rem' }}\n                text={locales.entries.Lcz_AddRoom}\n                icon_name=\"square_plus\"\n                size=\"sm\"\n                class={'w-100'}\n                btn_styles=\"h-100\"\n                onClickHandler={() => this.handleAddRoom()}\n              ></ir-button>\n            )}\n            {this.canCheckIn() && (\n              <ir-button\n                class={'w-100'}\n                style={{ '--icon-size': '0.875rem' }}\n                text={locales.entries.Lcz_CheckIn}\n                onClickHandler={() => this.handleCustomerCheckIn()}\n                icon_name=\"edit\"\n                btn_styles=\"h-100\"\n                size=\"sm\"\n              ></ir-button>\n            )}\n            {this.canCheckOut() && (\n              <ir-button\n                class={'w-100'}\n                btn_styles=\"h-100\"\n                style={{ '--icon-size': '0.875rem' }}\n                text={locales.entries.Lcz_CheckOut}\n                icon_name=\"edit\"\n                onClickHandler={() => this.handleCustomerCheckOut()}\n                size=\"sm\"\n              ></ir-button>\n            )}\n            {this.hideButtons\n              ? null\n              : !this.shouldHideUnassignUnit && (\n                  <ir-button\n                    class={'w-100'}\n                    btn_styles=\"h-100\"\n                    style={{ '--icon-size': '0.875rem' }}\n                    size=\"sm\"\n                    text={locales.entries.Lcz_Unassign}\n                    icon_name=\"xmark\"\n                    onClickHandler={_ => {\n                      this.handleDeleteEvent();\n                    }}\n                  ></ir-button>\n                )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  private getNewBookingOptions() {\n    const shouldDisplayButtons = this.bookingEvent.roomsInfo[0].rateplans.some(rate => rate.is_active);\n    return (\n      <div class={`iglPopOver d-flex flex-column newBookingOptions ${this.bubbleInfoTop ? 'bubbleInfoAbove' : ''} text-left`} style={{ gap: '0.5rem' }}>\n        {shouldDisplayButtons ? (\n          <Fragment>\n            {/* <div class={'mb-1'}> */}\n            <ir-button\n              size=\"sm\"\n              btn_block\n              data-testid=\"bar_booking_btn\"\n              text={locales.entries.Lcz_CreateNewBooking}\n              onClickHandler={_ => {\n                this.handleBookingOption('BAR_BOOKING');\n              }}\n            ></ir-button>\n            {/* </div> */}\n            {/* <div> */}\n            {this.hasSplitBooking() && (\n              // <div class=\"mb-1\">\n              <ir-button\n                size=\"sm\"\n                btn_block\n                text={locales.entries.Lcz_AssignUnitToExistingBooking}\n                onClickHandler={_ => {\n                  this.handleBookingOption('SPLIT_BOOKING');\n                }}\n              ></ir-button>\n              // </div>\n            )}\n            {/* </div> */}\n          </Fragment>\n        ) : (\n          <p class={'text-danger'}>{locales.entries.Lcz_NoRatePlanDefined}</p>\n        )}\n        {/* <div> */}\n        <ir-button\n          size=\"sm\"\n          text={locales.entries.Lcz_Blockdates}\n          btn_block\n          onClickHandler={_ => {\n            this.handleBookingOption('BLOCK_DATES');\n          }}\n        ></ir-button>\n        {/* </div> */}\n      </div>\n    );\n  }\n\n  private getBlockedView() {\n    console.log('booking event', this.bookingEvent);\n    // let defaultData = {RELEASE_AFTER_HOURS: 0, OPTIONAL_REASON: \"\", OUT_OF_SERVICE: false};\n    return (\n      <div class={`iglPopOver blockedView ${this.bubbleInfoTop ? 'bubbleInfoAbove' : ''} text-left`}>\n        <igl-block-dates-view\n          isEventHover={true}\n          entryHour={this.bookingEvent.ENTRY_HOUR}\n          entryMinute={this.bookingEvent.ENTRY_MINUTE}\n          defaultData={this.bookingEvent}\n          fromDate={this.bookingEvent.defaultDates.from_date}\n          toDate={this.bookingEvent.defaultDates.to_date}\n          entryDate={this.getEntryDate()}\n          onDataUpdateEvent={event => this.handleBlockDateUpdate(event)}\n        ></igl-block-dates-view>\n        <div class=\"row p-0 m-0 mt-2\">\n          <div class=\"full-width d-flex align-items-center\" style={{ gap: '0.25rem' }} role=\"group\">\n            <ir-button\n              btn_disabled={this.isLoading === 'update'}\n              text={locales.entries.Lcz_Update}\n              onClickHandler={_ => {\n                this.handleUpdateBlockedDates();\n              }}\n              icon_name=\"edit\"\n              size=\"sm\"\n              btn_styles=\"h-100\"\n              isLoading={this.isLoading === 'update'}\n              style={{ '--icon-size': '0.875rem' }}\n              btn_block\n              class={'w-100'}\n            ></ir-button>\n            <ir-button\n              class={'w-100 h-100 my-0'}\n              btn_block\n              btn_styles=\"h-100\"\n              size=\"sm\"\n              text={locales.entries.Lcz_ConvertSplitBooking}\n              onClickHandler={() => {\n                this.handleConvertBlockedDateToBooking();\n              }}\n            ></ir-button>\n\n            <ir-button\n              class={'w-100'}\n              btn_styles=\"h-100\"\n              btn_block\n              size=\"sm\"\n              style={{ '--icon-size': '0.875rem' }}\n              icon_name=\"trash\"\n              btn_color=\"danger\"\n              onClickHandler={_ => {\n                this.handleDeleteEvent();\n              }}\n              text={locales.entries.Lcz_Delete}\n            ></ir-button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <Host>\n        <div class={`pointerContainer ${this.bubbleInfoTop ? 'pointerContainerTop' : ''}`}>\n          <div class={`bubblePointer ${this.bubbleInfoTop ? 'bubblePointTop' : 'bubblePointBottom'}`}></div>\n        </div>\n        {this.isBlockedDateEvent() ? this.getBlockedView() : null}\n        {this.isNewBooking() ? this.getNewBookingOptions() : null}\n        {!this.isBlockedDateEvent() && !this.isNewBooking() ? this.getInfoElement() : null}\n      </Host>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}