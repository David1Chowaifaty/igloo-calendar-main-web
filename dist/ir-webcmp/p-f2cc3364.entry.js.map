{"version":3,"names":["irUserManagementCss","IrUserManagementStyle0","IrUserManagement","constructor","hostRef","this","language","ticket","isSuperAdmin","isLoading","users","id","mobile","name","note","password","property_id","phone_prefix","username","email","is_active","last_signed_in","created_at","role","token","Token","roomService","RoomService","ticketChanged","newValue","oldValue","setToken","initializeApp","propertyId","propertyid","p","Error","console","log","propertyData","getExposedProperty","aname","is_backend","include_units_hk_status","My_Result","requests","fetchLanguage","push","Promise","all","error","render","h","Host","class","style","gap"],"sources":["src/components/ir-user-management/ir-user-management.css?tag=ir-user-management&encapsulation=scoped","src/components/ir-user-management/ir-user-management.tsx"],"sourcesContent":[":host {\n  display: block;\n  height: 100%;\n}\n","import Token from '@/models/Token';\nimport { RoomService } from '@/services/room.service';\nimport { Component, Host, Prop, State, Watch, h } from '@stencil/core';\nimport { User } from './types';\n\n@Component({\n  tag: 'ir-user-management',\n  styleUrl: 'ir-user-management.css',\n  scoped: true,\n})\nexport class IrUserManagement {\n  @Prop() language: string = '';\n  @Prop() ticket: string = '';\n  @Prop() propertyid: number;\n  @Prop() p: string;\n  @Prop() isSuperAdmin: boolean = true;\n\n  @State() isLoading = true;\n  @State() users: User[] = [\n    {\n      id: 1,\n      mobile: '1234567890',\n      name: 'Alice Johnson',\n      note: 'Admin user',\n      password: 'securePass1',\n      property_id: 101,\n      phone_prefix: '+1',\n      username: 'alicej',\n      email: 'alice.johnson@example.com',\n      is_active: true,\n      last_signed_in: '2025-04-08',\n      created_at: '2023-09-15',\n      role: 'super admin',\n    },\n    {\n      id: 2,\n      mobile: '2345678901',\n      name: 'Bob Smith',\n      note: 'Temporary access',\n      password: 'securePass2',\n      property_id: 102,\n      phone_prefix: '+44',\n      username: 'bobsmith',\n      email: 'bob.smith@example.com',\n      is_active: false,\n      last_signed_in: '2025-03-27',\n      created_at: '2023-11-20',\n      role: 'admin',\n    },\n    {\n      id: 3,\n      mobile: '3456789012',\n      name: 'Carla Reyes',\n      note: 'Manager account',\n      password: 'securePass3',\n      property_id: 103,\n      phone_prefix: '+61',\n      username: 'carlar',\n      email: 'carla.reyes@example.com',\n      is_active: true,\n      last_signed_in: '2025-02-19',\n      created_at: '2024-01-05',\n      role: 'frontdesk',\n    },\n    {\n      id: 4,\n      mobile: '4567890123',\n      name: 'Daniel Kim',\n      note: 'Viewer only',\n      password: 'securePass4',\n      property_id: 104,\n      phone_prefix: '+81',\n      username: 'danielk',\n      email: 'daniel.kim@example.com',\n      is_active: false,\n      last_signed_in: '2025-01-10',\n      created_at: '2022-08-23',\n      role: 'frontdesk',\n    },\n    {\n      id: 5,\n      mobile: '5678901234',\n      name: 'Eva Liu',\n      note: 'Editor role',\n      password: 'securePass5',\n      property_id: 105,\n      phone_prefix: '+86',\n      username: 'evaliu',\n      email: 'eva.liu@example.com',\n      is_active: true,\n      last_signed_in: '2025-04-01',\n      created_at: '2023-12-12',\n      role: 'admin',\n    },\n  ];\n  @State() property_id: number;\n\n  private token = new Token();\n  private roomService = new RoomService();\n\n  @Watch('ticket')\n  ticketChanged(newValue: string, oldValue: string) {\n    if (newValue === oldValue) {\n      return;\n    }\n    this.token.setToken(this.ticket);\n    this.initializeApp();\n  }\n  private async initializeApp() {\n    try {\n      this.isLoading = true;\n      let propertyId = this.propertyid;\n      if (!this.propertyid && !this.p) {\n        throw new Error('Property ID or username is required');\n      }\n      // let roomResp = null;\n      if (!propertyId) {\n        console.log(propertyId);\n        const propertyData = await this.roomService.getExposedProperty({\n          id: 0,\n          aname: this.p,\n          language: this.language,\n          is_backend: true,\n          include_units_hk_status: true,\n        });\n        // roomResp = propertyData;\n        propertyId = propertyData.My_Result.id;\n      }\n      this.property_id = propertyId;\n      const requests = [this.roomService.fetchLanguage(this.language)];\n      if (this.propertyid) {\n        requests.push(\n          this.roomService.getExposedProperty({\n            id: this.propertyid,\n            language: this.language,\n            is_backend: true,\n            include_units_hk_status: true,\n          }),\n        );\n      }\n\n      await Promise.all(requests);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n  render() {\n    if (this.isLoading) {\n      return <ir-loading-screen></ir-loading-screen>;\n    }\n    return (\n      <Host>\n        <ir-toast></ir-toast>\n        <ir-interceptor></ir-interceptor>\n        <section class=\"p-2 d-flex flex-column\" style={{ gap: '1rem' }}>\n          <div class=\"d-flex  pb-2 align-items-center justify-content-between\">\n            <h3 class=\"mb-1 mb-md-0\">Extranet Users</h3>\n          </div>\n          <div class=\"\" style={{ gap: '1rem' }}>\n            <ir-user-management-table class=\"card\" isSuperAdmin={this.isSuperAdmin} users={this.users}></ir-user-management-table>\n          </div>\n        </section>\n      </Host>\n    );\n  }\n}\n"],"mappings":"0NAAA,MAAMA,EAAsB,sDAC5B,MAAAC,EAAeD,E,MCSFE,EAAgB,MAL7B,WAAAC,CAAAC,G,UAMUC,KAAAC,SAAmB,GACnBD,KAAAE,OAAiB,GAGjBF,KAAAG,aAAwB,KAEvBH,KAAAI,UAAY,KACZJ,KAAAK,MAAgB,CACvB,CACEC,GAAI,EACJC,OAAQ,aACRC,KAAM,gBACNC,KAAM,aACNC,SAAU,cACVC,YAAa,IACbC,aAAc,KACdC,SAAU,SACVC,MAAO,4BACPC,UAAW,KACXC,eAAgB,aAChBC,WAAY,aACZC,KAAM,eAER,CACEZ,GAAI,EACJC,OAAQ,aACRC,KAAM,YACNC,KAAM,mBACNC,SAAU,cACVC,YAAa,IACbC,aAAc,MACdC,SAAU,WACVC,MAAO,wBACPC,UAAW,MACXC,eAAgB,aAChBC,WAAY,aACZC,KAAM,SAER,CACEZ,GAAI,EACJC,OAAQ,aACRC,KAAM,cACNC,KAAM,kBACNC,SAAU,cACVC,YAAa,IACbC,aAAc,MACdC,SAAU,SACVC,MAAO,0BACPC,UAAW,KACXC,eAAgB,aAChBC,WAAY,aACZC,KAAM,aAER,CACEZ,GAAI,EACJC,OAAQ,aACRC,KAAM,aACNC,KAAM,cACNC,SAAU,cACVC,YAAa,IACbC,aAAc,MACdC,SAAU,UACVC,MAAO,yBACPC,UAAW,MACXC,eAAgB,aAChBC,WAAY,aACZC,KAAM,aAER,CACEZ,GAAI,EACJC,OAAQ,aACRC,KAAM,UACNC,KAAM,cACNC,SAAU,cACVC,YAAa,IACbC,aAAc,MACdC,SAAU,SACVC,MAAO,sBACPC,UAAW,KACXC,eAAgB,aAChBC,WAAY,aACZC,KAAM,UAKFlB,KAAAmB,MAAQ,IAAIC,EACZpB,KAAAqB,YAAc,IAAIC,C,CAG1B,aAAAC,CAAcC,EAAkBC,GAC9B,GAAID,IAAaC,EAAU,CACzB,M,CAEFzB,KAAKmB,MAAMO,SAAS1B,KAAKE,QACzBF,KAAK2B,e,CAEC,mBAAMA,GACZ,IACE3B,KAAKI,UAAY,KACjB,IAAIwB,EAAa5B,KAAK6B,WACtB,IAAK7B,KAAK6B,aAAe7B,KAAK8B,EAAG,CAC/B,MAAM,IAAIC,MAAM,sC,CAGlB,IAAKH,EAAY,CACfI,QAAQC,IAAIL,GACZ,MAAMM,QAAqBlC,KAAKqB,YAAYc,mBAAmB,CAC7D7B,GAAI,EACJ8B,MAAOpC,KAAK8B,EACZ7B,SAAUD,KAAKC,SACfoC,WAAY,KACZC,wBAAyB,OAG3BV,EAAaM,EAAaK,UAAUjC,E,CAEtCN,KAAKW,YAAciB,EACnB,MAAMY,EAAW,CAACxC,KAAKqB,YAAYoB,cAAczC,KAAKC,WACtD,GAAID,KAAK6B,WAAY,CACnBW,EAASE,KACP1C,KAAKqB,YAAYc,mBAAmB,CAClC7B,GAAIN,KAAK6B,WACT5B,SAAUD,KAAKC,SACfoC,WAAY,KACZC,wBAAyB,O,OAKzBK,QAAQC,IAAIJ,E,CAClB,MAAOK,GACPb,QAAQC,IAAIY,E,SAEZ7C,KAAKI,UAAY,K,EAGrB,MAAA0C,GACE,GAAI9C,KAAKI,UAAW,CAClB,OAAO2C,EAAA,yB,CAET,OACEA,EAACC,EAAI,KACHD,EAAA,iBACAA,EAAA,uBACAA,EAAA,WAASE,MAAM,yBAAyBC,MAAO,CAAEC,IAAK,SACpDJ,EAAA,OAAKE,MAAM,2DACTF,EAAA,MAAIE,MAAM,gBAAc,mBAE1BF,EAAA,OAAKE,MAAM,GAAGC,MAAO,CAAEC,IAAK,SAC1BJ,EAAA,4BAA0BE,MAAM,OAAO9C,aAAcH,KAAKG,aAAcE,MAAOL,KAAKK,U","ignoreList":[]}