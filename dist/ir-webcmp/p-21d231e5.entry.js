import{r as t,c as i,h as s,F as e,g as o,H as r}from"./p-61950c14.js";import{l as h}from"./p-e19fbf2a.js";import{v as n}from"./p-4ed69de7.js";import{I as a}from"./p-051d4d3b.js";import{B as c}from"./p-d3ead2bf.js";import"./p-0db2e55e.js";import"./p-bf44a732.js";import"./p-74d02696.js";import"./p-6b428cce.js";import"./p-7f64bb6e.js";const l=".sc-ir-combobox-h{display:block;position:relative;padding:0;margin:0;box-sizing:border-box}ul.sc-ir-combobox{position:absolute;box-sizing:border-box;margin:0;margin-top:2px;width:max-content;max-height:80px;border-radius:0.21rem;z-index:10000;padding:1px;background:white;box-shadow:0px 8px 16px 0px rgba(0, 0, 0, 0.2);padding:5px 0;max-height:250px;overflow-y:auto;min-width:100%}ul[data-position='bottom-right'].sc-ir-combobox{right:0}.list-item-image.sc-ir-combobox{height:1rem;aspect-ratio:4/3;border-radius:4px;margin-right:10px}.dropdown-item.sc-ir-combobox{cursor:pointer}ul.sc-ir-combobox li.sc-ir-combobox,span.sc-ir-combobox,loader-container.sc-ir-combobox{padding:0px 16px;margin:0px;margin-top:2px;width:100%;border-radius:2px}ul.sc-ir-combobox li.sc-ir-combobox{cursor:pointer}ul.sc-ir-combobox li.sc-ir-combobox{display:flex;align-items:center;flex-wrap:wrap;gap:3px}ul.sc-ir-combobox li.sc-ir-combobox p.sc-ir-combobox{margin:0;padding:0}ul.sc-ir-combobox li.sc-ir-combobox:hover{background:#f4f5fa}ul.sc-ir-combobox li[data-selected].sc-ir-combobox,ul.sc-ir-combobox li[data-selected].sc-ir-combobox:hover{color:#fff;text-decoration:none;background-color:#666ee8}";const d=l;const p=class{constructor(s){t(this,s);this.comboboxValueChange=i(this,"comboboxValueChange",7);this.inputCleared=i(this,"inputCleared",7);this.toast=i(this,"toast",7);this.data=[];this.duration=300;this.disabled=false;this.autoFocus=false;this.input_id=n();this.selectedIndex=-1;this.actualIndex=-1;this.isComboBoxVisible=false;this.isLoading=true;this.inputValue="";this.filteredData=[];this.componentShouldAutoFocus=false}componentWillLoad(){this.filteredData=this.data}componentDidLoad(){if(this.autoFocus){this.focusInput()}}watchHandler(t,i){if(t!==i&&t===true){this.focusInput()}}handleKeyDown(t){var i;const s=this.filteredData.length;if(s>0){switch(t.key){case"ArrowUp":t.preventDefault();this.selectedIndex=(this.selectedIndex-1+s)%s;this.adjustScrollPosition();break;case"ArrowDown":t.preventDefault();this.selectedIndex=(this.selectedIndex+1)%s;this.adjustScrollPosition();break;case"Escape":(i=this.inputRef)===null||i===void 0?void 0:i.blur();this.isComboBoxVisible=false;break}}}focusInput(){requestAnimationFrame((()=>{var t;(t=this.inputRef)===null||t===void 0?void 0:t.focus()}))}adjustScrollPosition(){var t;const i=(t=this.el)===null||t===void 0?void 0:t.querySelector(`[data-selected]`);if(!i)return;i.scrollIntoView({block:"center"})}selectItem(t){if(this.filteredData[t]){this.isItemSelected=true;this.comboboxValueChange.emit({key:"select",data:this.filteredData[t].id});this.inputValue="";this.resetCombobox();if(this.autoFocus){this.focusInput()}}}debounceFetchData(){clearTimeout(this.debounceTimer);this.debounceTimer=setTimeout((()=>{this.fetchData()}),this.duration)}handleFocus(){this.isComboBoxVisible=true}clearInput(){this.inputValue="";this.resetCombobox();this.inputCleared.emit(null)}resetCombobox(t=true){var i;if(t){(i=this.inputRef)===null||i===void 0?void 0:i.blur()}this.selectedIndex=-1;this.isComboBoxVisible=false}async fetchData(){try{this.isLoading=true;this.filteredData=this.data.filter((t=>t.name.toLowerCase().startsWith(this.inputValue)));this.selectedIndex=-1}catch(t){console.log("error",t)}finally{this.isLoading=false}}handleInputChange(t){this.inputValue=t.target.value;if(this.inputValue){this.debounceFetchData()}else{this.filteredData=this.data}}handleDocumentClick(t){const i=t.target;if(!this.el.contains(i)){this.isComboBoxVisible=false}}handleBlur(){this.blurTimout=setTimeout((()=>{if(!this.isItemSelected){this.inputValue="";this.resetCombobox()}else{this.isItemSelected=false}}),300)}isDropdownItem(t){return t&&t.closest(".combobox")}disconnectedCallback(){var t,i,s,e;clearTimeout(this.debounceTimer);clearTimeout(this.blurTimout);(t=this.inputRef)===null||t===void 0?void 0:t.removeEventListener("blur",this.handleBlur);(i=this.inputRef)===null||i===void 0?void 0:i.removeEventListener("click",this.selectItem);(s=this.inputRef)===null||s===void 0?void 0:s.removeEventListener("keydown",this.handleKeyDown);(e=this.inputRef)===null||e===void 0?void 0:e.removeEventListener("focus",this.handleFocus)}handleItemKeyDown(t,i){var s;if(t.key==="Enter"||t.key===" "||t.key==="ArrowRight"){this.selectItem(i);t.preventDefault()}else if(t.key==="Escape"){this.isComboBoxVisible=false;(s=this.inputRef)===null||s===void 0?void 0:s.blur();t.preventDefault()}}renderDropdown(){var t;if(!this.isComboBoxVisible){return null}return s("ul",{"data-position":this.filteredData.length>0&&this.filteredData[0].occupancy?"bottom-right":"bottom-left"},(t=this.filteredData)===null||t===void 0?void 0:t.map(((t,i)=>s("li",{onMouseEnter:()=>this.selectedIndex=i,role:"button",key:t.id,onKeyDown:t=>this.handleItemKeyDown(t,i),"data-selected":this.selectedIndex===i,tabIndex:0,onClick:()=>this.selectItem(i)},t.image&&s("img",{src:t.image,class:"list-item-image"}),s("p",null,t.name),t.occupancy&&s(e,null,s("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},s("path",{fill:"currentColor",d:"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"})),s("p",null,t.occupancy))))),this.filteredData.length===0&&!this.isLoading&&s("span",{class:"text-center"},h.entries.Lcz_NoResultsFound))}handleSubmit(t){t.preventDefault();t.stopPropagation();console.log("object");if(!this.filteredData.length){return}this.selectItem(this.selectedIndex===-1?0:this.selectedIndex)}render(){return s("form",{key:"957d7f92dbdb85ef0135671f4c7c6316025f0a29",onSubmit:this.handleSubmit.bind(this),class:"m-0 p-0"},s("input",{key:"c3196f75dfdc023503853c2b7e231ebaa511d13a",type:"text",class:"form-control bg-white",id:this.input_id,ref:t=>this.inputRef=t,disabled:this.disabled,value:this.value,placeholder:this.placeholder,onKeyDown:this.handleKeyDown.bind(this),onBlur:this.handleBlur.bind(this),onInput:this.handleInputChange.bind(this),onFocus:this.handleFocus.bind(this),autoFocus:this.autoFocus}),this.renderDropdown())}get el(){return o(this)}static get watchers(){return{isComboBoxVisible:["watchHandler"]}}};p.style=d;const u=".sc-ir-input-text-h{margin:0;padding:0;display:inline}.border-theme.sc-ir-input-text{border:1px solid #cacfe7}.icon-container.sc-ir-input-text{color:#3b4781;border:1px solid #cacfe7;font-size:0.975rem;height:2rem;background:rgb(255, 255, 255);padding-right:0 !important;border-right:0;border-top-right-radius:0;border-bottom-right-radius:0;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}input.sc-ir-input-text:focus{border-color:#1e9ff2 !important}.ir-input[data-state='empty'].sc-ir-input-text{color:#bbbfc6}.input-container.sc-ir-input-text{display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;flex:1}.input-container.sc-ir-input-text input.sc-ir-input-text{padding-left:5px !important;padding-right:5px !important;border-left:0;border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.icon-container[data-state='focus'].sc-ir-input-text{border-color:var(--blue)}.icon-container[data-disabled].sc-ir-input-text{background-color:#eceff1;border-color:rgba(118, 118, 118, 0.3)}.danger-border.sc-ir-input-text{border-color:var(--red)}";const b=u;const f=class{constructor(s){t(this,s);this.textChange=i(this,"textChange",7);this.inputBlur=i(this,"inputBlur",7);this.inputFocus=i(this,"inputFocus",7);this.label="";this.placeholder="";this.inputStyles="";this.LabelAvailable=true;this.readonly=false;this.type="text";this.submitted=false;this.inputStyle=true;this.size="md";this.textSize="md";this.labelPosition="left";this.labelBackground=null;this.labelColor="dark";this.labelBorder="theme";this.labelWidth=3;this.variant="default";this.disabled=false;this.error=false;this.autoValidate=true;this.initial=true;this.inputFocused=false;this.isError=false}componentWillLoad(){if(this.el.id){this.id=this.el.id}else{this.id=n()}}componentDidLoad(){if(this.mask)this.initMask()}handleMaskChange(){this.initMask()}watchHandler2(t){if(t&&this.required){this.initial=false}}handleErrorChange(t,i){if(t!==i){this.validateInput(this.value,true)}}handleAriaInvalidChange(t){if(t==="true"){this.isError=true}else{this.isError=false}}validateInput(t,i=false){if(!this.autoValidate&&!i){return}if(this.zod){try{this.zod.parse(this.wrapKey?{[this.wrapKey]:t}:t);this.error=false}catch(t){console.log(t);this.error=true}}}handleInputChange(t){this.initial=false;const i=t.target.value;if(this.maskInstance){this.maskInstance.value=i}const s=this.maskInstance?this.maskInstance.value:i;this.textChange.emit(s)}initMask(){if(!this.mask||this.maskInstance){return}this.maskInstance=a(this.inputRef,this.mask);this.maskInstance.on("accept",(()=>{this.inputRef.value=this.maskInstance.value;this.textChange.emit(this.maskInstance.value)}))}handleBlur(t){this.validateInput(this.value,this.submitted);this.inputFocused=false;this.inputBlur.emit(t)}render(){if(this.variant==="icon"){return s("fieldset",{class:"position-relative has-icon-left input-container"},s("label",{htmlFor:this.id,class:"input-group-prepend bg-white m-0"},s("span",{"data-disabled":this.disabled,"data-state":this.inputFocused?"focus":"",class:`input-group-text icon-container bg-white ${(this.error||this.isError)&&"danger-border"}`,id:"basic-addon1"},s("slot",{name:"icon"}))),s("input",{"data-state":!!this.value?"":this.mask?"empty":"",ref:t=>this.inputRef=t,type:this.type,onFocus:t=>{this.inputFocused=true;this.inputFocus.emit(t)},required:this.required,onBlur:this.handleBlur.bind(this),disabled:this.disabled,class:`ir-input form-control bg-white pl-0 input-sm rate-input py-0 m-0 rateInputBorder ${(this.error||this.isError)&&"danger-border"}`,id:this.id,value:this.value,placeholder:this.placeholder,onInput:this.handleInputChange.bind(this)}))}let t="form-control";let i=s("div",{class:`input-group-prepend col-${this.labelWidth} p-0 text-${this.labelColor}`},s("label",{htmlFor:this.id,class:` input-group-text ${this.labelPosition==="right"?"justify-content-end":this.labelPosition==="center"?"justify-content-center":""} ${this.labelBackground?"bg-"+this.labelBackground:""} flex-grow-1 text-${this.labelColor} border-${this.labelBorder==="none"?0:this.labelBorder} `},this.label,this.required?"*":""));if(!this.LabelAvailable){i=""}if(this.inputStyle===false){t=""}if(this.required&&!this.initial){t=`${t} border-danger`}return s("div",{class:"form-group"},s("div",{class:"input-group row m-0"},i,s("input",{"data-state":!!this.value?"":this.mask?"empty":"",id:this.id,ref:t=>this.inputRef=t,readOnly:this.readonly,type:this.type,class:`ir-input ${t} ${this.error||this.isError?"border-danger":""} form-control-${this.size} text-${this.textSize} col-${this.LabelAvailable?12-this.labelWidth:12} ${this.readonly&&"bg-white"} ${this.inputStyles}`,onBlur:this.handleBlur.bind(this),onFocus:t=>{this.inputFocused=true;this.inputFocus.emit(t)},placeholder:this.placeholder,value:this.value,onInput:this.handleInputChange.bind(this),required:this.required,disabled:this.disabled})))}get el(){return o(this)}static get watchers(){return{mask:["handleMaskChange"],submitted:["watchHandler2"],error:["handleErrorChange"],"aria-invalid":["handleAriaInvalidChange"]}}};f.style=b;const m=".sc-ir-phone-input-h{display:block}.input-container.sc-ir-phone-input{display:flex;align-items:center;padding:0 !important}.input-container.sc-ir-phone-input:focus-within{border-color:#1e9ff2}.border-theme.sc-ir-phone-input{border-color:#cacfe7}.input-container.sc-ir-phone-input input.sc-ir-phone-input{flex:1;border:0}.input-container.sc-ir-phone-input input.sc-ir-phone-input:focus{outline:none}.dropdown-trigger.sc-ir-phone-input{display:flex;align-items:center;gap:8px;background:white;border:0;border-right:1px solid #cacfe7}.ir-dropdown-container.sc-ir-phone-input{position:absolute;z-index:1000;bottom:-30px;width:100%;left:0;background:white}.input-container.sc-ir-phone-input label.sc-ir-phone-input{display:flex;align-items:center;justify-content:center;margin:0;padding:0 5px}.flag.sc-ir-phone-input{height:1rem;aspect-ratio:4/3;border-radius:3px}.is-invalid.sc-ir-phone-input{border-color:#ff4961}.phone_prefix_label.sc-ir-phone-input{padding:0 0.5rem;margin:0}";const g=m;const x=class{constructor(s){t(this,s);this.textChange=i(this,"textChange",7);this.value="";this.disabled=false;this.error=false;this.default_country=null;this.phone_prefix=null;this.countries=[];this.inputValue="";this.isDropdownVisible=false;this.bookingService=new c}async componentWillLoad(){if(this.countries.length===0){const t=await this.bookingService.getCountries(this.language);this.countries=t}if(this.phone_prefix){this.setCountryFromPhonePrefix()}else{if(this.default_country){this.setCurrentCountry(this.default_country)}}this.inputValue=this.value}handleValueChange(t,i){if(t!==i){this.inputValue=t}}handlePhoneChange(t,i){if(t!==i){this.setCountryFromPhonePrefix()}}handleDocumentClick(t){const i=t.target;if(!this.el.contains(i)){this.isDropdownVisible=false}}handleInputChange(t){var i;let s=t.target;let e=s.value;e=e.replace(/[^+\d]+/g,"");s.value=e;this.inputValue=e;this.textChange.emit({phone_prefix:(i=this.currentCountry)===null||i===void 0?void 0:i.phone_prefix,mobile:this.inputValue})}setCountryFromPhonePrefix(){var t;console.log(this.phone_prefix);let i=this.countries.find((t=>t.phone_prefix===this.phone_prefix));if(!i){i=this.countries.find((t=>t.id.toString()===this.phone_prefix));if(!i){return}}console.log(i);this.currentCountry=Object.assign({},i);this.textChange.emit({phone_prefix:(t=this.currentCountry)===null||t===void 0?void 0:t.phone_prefix,mobile:this.value})}setCurrentCountry(t){var i;const s=this.countries.find((i=>i.id===t));if(!s){throw new Error("Invalid country id")}this.currentCountry=Object.assign({},s);this.textChange.emit({phone_prefix:(i=this.currentCountry)===null||i===void 0?void 0:i.phone_prefix,mobile:this.value})}render(){var t,i;return s(r,{key:"38653fc253bdefb8fb56e4c6b55e404757cab807"},s("div",{key:"276224711487988228122c1c858d7e53ce481836",class:"form-group mr-0"},s("div",{key:"7aaae48a8bbdf0b06f450c2f863abdceeb597d20",class:"input-group row m-0 p-0 position-relative"},this.label&&s("div",{key:"ce928835cb21f174248349d0d4797c77da482a55",class:`input-group-prepend col-3 p-0 text-dark border-none`},s("label",{key:"6eb21f4a895adac078e38b2dc5fbf43fea59a2e9",class:`input-group-text  border-theme flex-grow-1 text-dark  `},this.label)),s("div",{key:"7c19fbdff518fe88b230598aa8d3b7e1354170ad",class:"form-control  input-container  flex-fill"+(this.error?" is-invalid":"")},s("button",{key:"f97c0bfe73c697771d67d0a58bf7dbc86be5c29e",onClick:()=>this.isDropdownVisible=!this.isDropdownVisible,class:"dropdown-trigger"},this.currentCountry?s("img",{src:(t=this.currentCountry)===null||t===void 0?void 0:t.flag,class:"flag"}):s("p",{class:"p-0 m-0 "},h.entries.Lcz_Select),s("svg",{key:"7c6de2778d36ac1be1071c6a2d9e053bf1567810",xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},s("path",{key:"ae2a4a0d28902d5124b8b2f6991145dc80266da3",d:"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"}))),s("p",{key:"0530421a89a5ad923e7e0f7b720cd0c355e3b952",class:"phone_prefix_label"},(i=this.currentCountry)===null||i===void 0?void 0:i.phone_prefix),s("input",{key:"48b725020ba3d253061393ba01ab4cc51878bd8e",type:"text",placeholder:this.placeholder,required:true,value:this.inputValue,disabled:this.disabled,onInput:t=>this.handleInputChange(t)}))," ",this.isDropdownVisible&&s("div",{key:"f2e74ec8b18e9ec3e1a1a33897f7b780b61e418a",class:"ir-dropdown-container"},s("ir-combobox",{key:"78a77d68ba37f02374f4c18f75bb3974409702ae",onComboboxValueChange:t=>{this.setCurrentCountry(+t.detail.data);this.isDropdownVisible=false},class:"bg-white",autoFocus:true,placeholder:"Search country",data:this.countries.map((t=>({id:t.id.toString(),name:`${t.name} (${t.phone_prefix})`,image:t.flag})))})))))}get el(){return o(this)}static get watchers(){return{value:["handleValueChange"],phone_prefix:["handlePhoneChange"]}}};x.style=g;export{p as ir_combobox,f as ir_input_text,x as ir_phone_input};
//# sourceMappingURL=p-21d231e5.entry.js.map