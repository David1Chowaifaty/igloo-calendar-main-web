import{r as t,c as e,h as i,F as s,H as o,a as n}from"./p-jhiFt_tX.js";import{B as h}from"./p-DLvnDCq4.js";import{t as r,n as l,k as a,o as d,l as c,p as b,q as u,f as g}from"./p-BmNCZzJ5.js";import{h as p}from"./p-Mki5YqAR.js";import{E as f}from"./p-BH_FZFQb.js";import{l as v}from"./p-DRfRlSCW.js";import{c as m}from"./p-CT3GgrvE.js";import"./p-BdhGE_xS.js";import"./p-E-ZsRS8r.js";import"./p-vROPuQAY.js";import"./p-DeW5X45W.js";const k=".sc-igl-booking-event-h{display:block;position:absolute}.bookingEventBase.sc-igl-booking-event{position:absolute;background-color:rgb(49, 190, 241);width:100%;height:100%;border-radius:4px;transform:skewX(-22deg)}.bookingEventBase.skewedLeft.sc-igl-booking-event::before{content:'';position:absolute;top:0px;bottom:0;left:-4px;width:50%;height:100%;background-color:var(--ir-event-bg);transform-origin:right;transform:skewX(22deg);border-radius:4px;border-top-left-radius:0;border-bottom-left-radius:0}.bookingEventBase.skewedRight.sc-igl-booking-event::before{content:'';position:absolute;top:0;bottom:0;right:-4px;width:50%;height:100%;background-color:var(--ir-event-bg);transform-origin:left;transform:skewX(22deg);border-radius:4px;border-top-right-radius:0;border-bottom-right-radius:0}.bookingEventBase.border.skewedLeft.sc-igl-booking-event::before{border:2px solid #424242;border-right:0;border-left:0;border-top-right-radius:0;border-bottom-right-radius:0;top:-1px;height:20px;left:-4px}.ota-booking-event.sc-igl-booking-event{border-width:2px !important}.bookingEventBase.border.skewedRight.sc-igl-booking-event::before{border:2px solid #424242;border-left:0;border-right:0;border-top-left-radius:0;border-bottom-left-radius:0;top:-1px;height:20px;right:-4px}.bookingEvent.sc-igl-booking-event{cursor:pointer}.bookingEventBase.sc-igl-booking-event{cursor:pointer}.bookingEventHiddenBase.sc-igl-booking-event{position:absolute;top:0;left:-4px;width:calc(100% + 8)}.bookingEventDragHandle.sc-igl-booking-event{position:absolute;top:0;width:15px;height:100%;opacity:0.1;background-color:rgba(0, 0, 0, 0.15);transform:skewX(-22deg);border-radius:4px;cursor:pointer}.splitBooking.sc-igl-booking-event{border-right:2px solid #000000}.sc-igl-booking-event-h:hover .bookingEventDragHandle.sc-igl-booking-event{display:block;opacity:1}.newEvent.sc-igl-booking-event-h:hover .bookingEventDragHandle.sc-igl-booking-event{display:none;opacity:1}.leftSide.sc-igl-booking-event{left:0}.leftSide.skewedLeft.sc-igl-booking-event{transform:skewX(0)}.rightSide.skewedRight.sc-igl-booking-event{transform:skewX(0)}.rightSide.sc-igl-booking-event{right:0}.bookingEventTitle.sc-igl-booking-event{color:#fff;font-size:0.8em;position:relative;max-width:calc(100% - 10px);overflow:hidden;text-overflow:ellipsis;top:2px;left:5px;-webkit-user-select:none;user-select:none;-webkit-user-drag:none;cursor:pointer}.legend_circle.sc-igl-booking-event{border-radius:100%;width:10px;height:10px;margin:3px 3px 3px 2px;border:1px solid #fff}.noteIcon.sc-igl-booking-event{position:absolute;bottom:-8px;left:2px}.balanceIcon.sc-igl-booking-event{position:absolute;top:-8px;right:2px}";var D=undefined&&undefined.__rest||function(t,e){var i={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0)i[s]=t[s];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var o=0,s=Object.getOwnPropertySymbols(t);o<s.length;o++){if(e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o]))i[s[o]]=t[s[o]]}return i};const w=class{constructor(i){t(this,i);this.hideBubbleInfo=e(this,"hideBubbleInfo");this.updateEventData=e(this,"updateEventData");this.dragOverEventData=e(this,"dragOverEventData");this.showRoomNightsDialog=e(this,"showRoomNightsDialog");this.showDialog=e(this,"showDialog");this.resetStreachedBooking=e(this,"resetStreachedBooking");this.toast=e(this,"toast");this.updateBookingEvent=e(this,"updateBookingEvent");this.is_vacation_rental=false;this.allBookingEvents=[];this.renderElement=false;this.isShrinking=null;this.dayWidth=0;this.eventSpace=8;this.vertSpace=10;this.showInfoPopup=false;this.bubbleInfoTopSide=false;this.isStreatch=false;this.eventsService=new f;this.bookingService=new h;this.resizeSide="";this.isDragging=false;this.animationFrameId=null;this.handleMouseMoveBind=this.handleMouseMove.bind(this);this.handleMouseUpBind=this.handleMouseUp.bind(this);this.handleClickOutsideBind=this.handleClickOutside.bind(this)}componentWillLoad(){window.addEventListener("click",this.handleClickOutsideBind)}async fetchAndAssignBookingData(){try{console.log("clicked on book#",this.bookingEvent.BOOKING_NUMBER);const t=["IN-HOUSE","CONFIRMED","PENDING-CONFIRMATION","CHECKED-OUT"];if(!t.includes(this.bookingEvent.STATUS)){return}const e=await this.bookingService.getExposedBooking(this.bookingEvent.BOOKING_NUMBER,"en");const i=e.rooms.filter((t=>t["assigned_units_pool"]===this.bookingEvent.ID));if(i.length===0){throw new Error(`booking#${this.bookingEvent.BOOKING_NUMBER} has an empty array`)}if(i.some((t=>t["assigned_units_pool"]===null))){throw new Error(`booking#${this.bookingEvent.BOOKING_NUMBER} has an empty pool`)}e.rooms=i;const s=r(e)[0];const o=D(s,["ID","TO_DATE","FROM_DATE","NO_OF_DAYS","STATUS","NAME","IDENTIFIER","PR_ID","POOL","BOOKING_NUMBER","NOTES","is_direct","BALANCE"]);this.bookingEvent=Object.assign(Object.assign(Object.assign({},o),this.bookingEvent),{booking:e,PHONE:o.PHONE,PHONE_PREFIX:o.PHONE_PREFIX,PRIVATE_NOTE:o.PRIVATE_NOTE});this.updateBookingEvent.emit(this.bookingEvent);this.showEventInfo(true)}catch(t){console.error(t.message)}}componentDidLoad(){if(this.isNewEvent()){if(!this.bookingEvent.hideBubble){setTimeout((async()=>{if(["003","002","004"].includes(this.bookingEvent.STATUS_CODE)){this.showEventInfo(true)}else if(["IN-HOUSE","CONFIRMED","PENDING-CONFIRMATION","CHECKED-OUT"].includes(this.bookingEvent.STATUS)){await this.fetchAndAssignBookingData()}else{this.showEventInfo(true)}this.renderAgain()}),1)}}}disconnectedCallback(){window.removeEventListener("click",this.handleClickOutsideBind);if(this.animationFrameId){cancelAnimationFrame(this.animationFrameId)}}handleClickOutside(t){const e=t.target;if(!this.element.contains(e)){this.showEventInfo(false)}}hideBubbleInfoPopup(t){if(t.detail.currentInfoBubbleId!=this.getBookingId()||t.detail.key==="hidebubble"&&t.detail.currentInfoBubbleId===this.getBookingId()){this.showInfoPopup=false;this.renderAgain()}}async moveBookingToHandler(t){try{if(t.detail.bookingId!==this.getBookingId()){this.showEventInfo(false);return}if(t.detail.moveToDay==="revert"||t.detail.toRoomId==="revert"){t.detail.moveToDay=this.bookingEvent.FROM_DATE;t.detail.toRoomId=t.detail.fromRoomId;if(this.isTouchStart&&this.moveDiffereneX<=5&&this.moveDiffereneY<=5&&!this.isStreatch){if(l(this.bookingEvent.STATUS_CODE)){this.showEventInfo(true)}else if(["IN-HOUSE","CONFIRMED","PENDING-CONFIRMATION","CHECKED-OUT"].includes(this.bookingEvent.STATUS)){await this.fetchAndAssignBookingData()}}else{this.animationFrameId=requestAnimationFrame((()=>{this.resetBookingToInitialPosition()}));return}}else{if(this.isTouchStart&&this.moveDiffereneX<=5&&this.moveDiffereneY<=5&&!this.isStreatch){if(l(this.bookingEvent.STATUS_CODE)){this.showEventInfo(true)}else if(["IN-HOUSE","CONFIRMED","PENDING-CONFIRMATION","CHECKED-OUT"].includes(this.bookingEvent.STATUS)){await this.fetchAndAssignBookingData()}}else{const{pool:e,to_date:i,from_date:s,toRoomId:o}=t.detail;if(this.checkIfSlotOccupied(o,s,i)){this.animationFrameId=requestAnimationFrame((()=>{this.resetBookingToInitialPosition()}));throw new Error("Overlapping Dates")}if(e){if(l(this.bookingEvent.STATUS_CODE)){await this.eventsService.reallocateEvent(e,o,s,i).catch((()=>{this.resetBookingToInitialPosition()}))}else{if(this.isShrinking||!this.isStreatch){const{description:e,status:n}=this.getModalDescription(o,s,i);let h=false;if(n==="400"){h=true}const r=this.bookingEvent.defaultDates.from_date;const l=this.bookingEvent.defaultDates.to_date;const d=a(r,l);let c=null;let b=r;let u=l;if(this.isShrinking){if(p(s,"YYYY-MM-DD").isAfter(p(r,"YYYY-MM-DD"))&&p(i,"YYYY-MM-DD").isBefore(p(l,"YYYY-MM-DD"))){b=r;u=i}else{c=p(s,"YYYY-MM-DD").isAfter(p(r,"YYYY-MM-DD"))?"left":p(i,"YYYY-MM-DD").isBefore(p(l,"YYYY-MM-DD"))?"right":null;if(c==="left"){b=s}if(c==="right"){u=i}}}else{if(p(s,"YYYY-MM-DD").isBefore(p(r,"YYYY-MM-DD"))){b=s;const t=p(s,"YYYY-MM-DD").add(d,"days");u=t.isBefore(p(i,"YYYY-MM-DD"),"days")?i:t.format("YYYY-MM-DD")}else if(p(i,"YYYY-MM-DD").isAfter(p(l,"YYYY-MM-DD"))){u=i;b=p(i,"YYYY-MM-DD").subtract(d,"days").format("YYYY-MM-DD")}}console.warn({fromDate:b,toDate:u});this.showDialog.emit(Object.assign(Object.assign({reason:"reallocate"},t.detail),{description:e,title:"",hideConfirmButton:h,from_date:b,to_date:u}))}else{this.showRoomNightsDialog.emit({bookingNumber:this.bookingEvent.BOOKING_NUMBER,identifier:this.bookingEvent.IDENTIFIER,to_date:i,pool:e,from_date:s,defaultDates:this.bookingEvent.defaultDates})}}this.isShrinking=null}}}}catch(t){this.toast.emit({position:"top-right",title:t.message,description:"",type:"error"});console.log("something went wrong")}}getModalDescription(t,e,i){const s=t=>{let e=this.bookingEvent.roomsInfo.filter((e=>e.physicalrooms.some((e=>e.id===+t))));if(e.length){return e[0].id}return null};if(!this.bookingEvent.is_direct){if(this.isShrinking){return{description:`${v.entries.Lcz_YouWillLoseFutureUpdates}.`,status:"200"}}else{if(p(e,"YYYY-MM-DD").isSame(p(this.bookingEvent.FROM_DATE,"YYYY-MM-DD"))&&p(i,"YYYY-MM-DD").isSame(p(this.bookingEvent.TO_DATE,"YYYY-MM-DD"))){const e=s(this.bookingEvent.PR_ID);const i=s(t);if(e===i){return{description:`${v.entries.Lcz_AreYouSureWantToMoveAnotherUnit}?`,status:"200"}}else{return{description:`${v.entries.Lcz_YouWillLoseFutureUpdates} ${this.bookingEvent.origin?this.bookingEvent.origin.Label:""}. ${v.entries.Lcz_SameRatesWillBeKept+"."}`,status:"200"}}}return{description:v.entries.Lcz_CannotChangeCHBookings+".",status:"400"}}}else{if(!this.isShrinking){const e=s(Number(this.bookingEvent.PR_ID));const i=s(Number(t));if(e===i){console.log("same rt");if(this.bookingEvent.PR_ID.toString()===t.toString()){return{description:v.entries.Lcz_ConfrmModiication+".",status:"200"}}return{description:`${v.entries.Lcz_AreYouSureWantToMoveAnotherUnit}?`,status:"200"}}else{return{description:v.entries.Lcz_SameRatesWillBeKept+".",status:"200"}}}return{description:v.entries.Lcz_ConfrmModiication+".",status:"200"}}}resetBookingToInitialPosition(){if(this.isStreatch){this.element.style.left=`${this.initialLeft}px`;this.element.style.width=`${this.initialWidth}px`;this.isStreatch=false;this.finalWidth=this.initialWidth;this.isShrinking=null}else{this.element.style.top=`${this.dragInitPos.top}px`;this.element.style.left=`${this.dragInitPos.left}px`}}handleRevertBooking(t){if(this.bookingEvent.POOL===t.detail){this.resetBookingToInitialPosition()}}checkIfSlotOccupied(t,e,i){const s=p(e,"YYYY-MM-DD");const o=p(i,"YYYY-MM-DD");const n=this.allBookingEvents.some((e=>{if(e.POOL===this.bookingEvent.POOL){return false}const i=p(e.FROM_DATE,"YYYY-MM-DD").add(1,"days");const n=p(e.TO_DATE,"YYYY-MM-DD");return e.PR_ID===+t&&o.isSameOrAfter(i)&&s.isBefore(n)}));return n}renderAgain(){this.renderElement=!this.renderElement}getUniqueId(){return(new Date).getTime()}isSplitBooking(){return!!this.bookingEvent.SPLIT_BOOKING}isNewEvent(){return this.getBookingId()==="NEW_TEMP_EVENT"}isHighlightEventType(){return this.getEventType()==="HIGH_LIGHT"}getBookingId(){return this.bookingEvent.ID}getBookingStatus(){return this.bookingEvent.STATUS}getBookedBy(){return this.bookingEvent.NAME}getBookedRoomId(){return this.bookingEvent.PR_ID}getEventStartingDate(){return new Date(this.bookingEvent.FROM_DATE)}getEventEndingDate(){return new Date(this.bookingEvent.TO_DATE)}getEventType(){return this.bookingEvent.event_type}getEventLegend(){var t,e;let i=(t=this.bookingEvent)===null||t===void 0?void 0:t.legendData.statusId[this.getBookingStatus()];let s=this.isNewEvent()?{color:"#f9f9c9"}:{};return Object.assign(Object.assign(Object.assign({},(e=this.bookingEvent)===null||e===void 0?void 0:e.legendData[i.id]),i),s)}getLegendOfStatus(t){var e;let i=(e=this.bookingEvent)===null||e===void 0?void 0:e.legendData.statusId[t];return Object.assign(Object.assign({},this.bookingEvent.legendData[i.id]),i)}getNoteNode(){if(this.bookingEvent.NOTES||this.bookingEvent.INTERNAL_NOTE||this.bookingEvent.PRIVATE_NOTE){return this.getLegendOfStatus("NOTES")}return null}getBalanceNode(){if(this.bookingEvent.BALANCE!==null&&this.bookingEvent.BALANCE>=1){return this.getLegendOfStatus("OUTSTANDING-BALANCE")}return null}setStayDays(t){this.bookingEvent.NO_OF_DAYS=t;this.renderAgain()}getStayDays(){return this.bookingEvent.NO_OF_DAYS}getPosition(){let t=this.getEventStartingDate();let e=".room_"+this.getBookedRoomId()+"_"+t.getDate()+"_"+(t.getMonth()+1)+"_"+t.getFullYear();let i=document.querySelector(".bodyContainer");let s=document.querySelector(e);let o={top:"0",left:"0",width:"0",height:"20px"};if(s&&i&&s.getBoundingClientRect()&&i.getBoundingClientRect()){let t=i.getBoundingClientRect();let e=s.getBoundingClientRect();this.dayWidth=this.dayWidth||e.width;o.top=e.top+e.height/2-this.vertSpace-t.top+"px";o.left=e.left+(!this.isNewEvent()&&p(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE))?0:this.dayWidth/2)+this.eventSpace/2-t.left+"px";o.width=(this.getStayDays()+(!this.isNewEvent()&&p(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE))?.5:0))*this.dayWidth-this.eventSpace+"px"}else{console.log(this.bookingEvent);console.log("Locating event cell failed ",e)}return o}getNumber(t){return t?parseFloat(t):0}startDragging(t,e){t.preventDefault();t.stopPropagation();t.stopImmediatePropagation();if(this.isNewEvent()||this.isHighlightEventType()){return null}this.resizeSide=e;this.isDragging=true;this.showEventInfo(false);this.isStreatch=e!=="move";if(e==="move"){this.initialX=t.clientX||t.touches[0].clientX;this.initialY=t.clientY||t.touches[0].clientY;this.elementRect=this.element.getBoundingClientRect();const e=0;const i=0;this.dragInitPos={id:this.getBookingId(),fromRoomId:this.getBookedRoomId(),top:this.getNumber(this.element.style.top)+i,left:this.getNumber(this.element.style.left)+e};this.dragInitPos.x=this.dragInitPos.left;this.dragInitPos.y=this.dragInitPos.top;this.dragEndPos=Object.assign({},this.dragInitPos);this.element.style.top=`${this.dragInitPos.top}px`;this.element.style.left=`${this.dragInitPos.left}px`;this.isTouchStart=true;this.dragOverEventData.emit({id:"CALCULATE_DRAG_OVER_BOUNDS",data:this.dragInitPos})}else{this.initialWidth=this.element.offsetWidth;this.initialLeft=this.element.offsetLeft;this.initialX=t.clientX||t.touches[0].clientX;this.dragOverEventData.emit({id:"CALCULATE_DRAG_OVER_BOUNDS",data:{id:this.getBookingId(),fromRoomId:this.getBookedRoomId(),top:this.getNumber(this.element.style.top),left:this.initialLeft,x:this.initialX,y:t.clientY||t.touches[0].clientY}})}document.addEventListener("mousemove",this.handleMouseMoveBind);document.addEventListener("touchmove",this.handleMouseMoveBind);document.addEventListener("pointermove",this.handleMouseMoveBind);document.addEventListener("mouseup",this.handleMouseUpBind);document.addEventListener("touchup",this.handleMouseUpBind);document.addEventListener("pointerup",this.handleMouseUpBind)}handleMouseMove(t){if(this.isDragging){this.currentX=t.clientX||t.touches[0].clientX;let e=this.currentX-this.initialX;if(this.resizeSide==="move"){this.currentY=t.clientY||t.touches[0].clientY;let i=this.currentY-this.initialY;this.element.style.top=`${this.dragInitPos.top+i}px`;this.element.style.left=`${this.dragInitPos.left+e}px`;this.dragEndPos={id:this.getBookingId(),fromRoomId:this.getBookedRoomId(),top:this.dragInitPos.top+i,left:this.dragInitPos.left+e};this.dragEndPos.x=this.dragEndPos.left;this.dragEndPos.y=this.dragEndPos.top;this.dragOverEventData.emit({id:"DRAG_OVER",data:this.dragEndPos})}else{if(!this.bookingEvent.is_direct&&!l(this.bookingEvent.STATUS_CODE)){return}let t=this.initialWidth;if(this.resizeSide=="rightSide"){t=this.initialWidth+e;t=Math.min(t,this.initialX+this.element.offsetWidth);t=Math.max(this.dayWidth-this.eventSpace,t);this.element.style.width=`${t}px`;this.isShrinking=e<0}else if(this.resizeSide=="leftSide"){this.isShrinking=e>0;t=Math.max(this.dayWidth-this.eventSpace,this.initialWidth-e);let i=this.initialLeft+(this.initialWidth-t);this.element.style.left=`${i}px`;this.element.style.width=`${t}px`}this.finalWidth=t}}else{console.log("still mouse move listening...")}}handleMouseUp(){if(this.isDragging){if(this.resizeSide==="move"){if(this.isTouchStart){this.moveDiffereneX=Math.abs(this.dragEndPos.x-this.dragInitPos.x);this.moveDiffereneY=Math.abs(this.dragEndPos.y-this.dragInitPos.y)}this.dragOverEventData.emit({id:"DRAG_OVER_END",data:Object.assign(Object.assign({},this.dragEndPos),{pool:this.bookingEvent.POOL,nbOfDays:this.bookingEvent.NO_OF_DAYS})})}else{const t=this.finalWidth-(!this.isNewEvent()&&p(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE))?this.dayWidth/2:0);const e=Math.round(t/this.dayWidth);console.log(t,this.dayWidth,e);let i=this.getStayDays();if(i!=e&&!isNaN(e)){if(this.resizeSide=="leftSide"){this.element.style.left=`${this.initialLeft+(i-e)*this.dayWidth}px`}else{if(e<i){this.isShrinking=true}}this.dragOverEventData.emit({id:"STRETCH_OVER_END",data:{id:this.getBookingId(),fromRoomId:+this.getBookedRoomId(),x:+this.element.style.left.replace("px",""),y:+this.element.style.top.replace("px",""),pool:this.bookingEvent.POOL,nbOfDays:e}});const t=!this.isNewEvent()&&p(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE))?+this.dayWidth/2:0;this.element.style.width=`${e*this.dayWidth-this.eventSpace+t}px`}else{this.element.style.left=`${this.initialLeft}px`;this.element.style.width=`${e*this.dayWidth-this.eventSpace}px`}}}else{console.log("still mouse up listening...")}this.isDragging=false;document.removeEventListener("mousemove",this.handleMouseMoveBind);document.removeEventListener("touchmove",this.handleMouseMoveBind);document.removeEventListener("pointermove",this.handleMouseMoveBind);document.removeEventListener("mouseup",this.handleMouseUpBind);document.removeEventListener("touchup",this.handleMouseUpBind);document.removeEventListener("pointerup",this.handleMouseUpBind)}updateData(t){this.updateEventData.emit(t)}calculateHoverPosition(){const t=this.element.getBoundingClientRect();const e=t.width;const i=t.left;const s=window.innerWidth;let o;if(e<=s){o=e/2}else{o=s/2-i}return{position:"absolute",left:`${o}px`,transform:"translateX(-50%)"}}renderEventBookingNumber(){if(this.bookingEvent.STATUS==="TEMP-EVENT"||this.bookingEvent.ID==="NEW_TEMP_EVENT"){return""}if(l(this.bookingEvent.STATUS_CODE)){return""}if(!this.bookingEvent.is_direct){return` - ${this.bookingEvent.channel_booking_nbr}`}return` - ${this.bookingEvent.BOOKING_NUMBER}`}showEventInfo(t){if(this.isHighlightEventType()||this.bookingEvent.hideBubble){return null}if(t){let t=document.querySelector(".calendarScrollContainer");let e=t.getBoundingClientRect();let i=this.element.getBoundingClientRect();let s=e.height/2+e.top+50;if(i.top<s){this.bubbleInfoTopSide=false}else{this.bubbleInfoTopSide=true}}if(t){this.hideBubbleInfo.emit({key:"hidePopup",currentInfoBubbleId:this.getBookingId()})}this.showInfoPopup=t;this.renderAgain()}render(){let t=this.getEventLegend();let e=this.getNoteNode();let n=this.getBalanceNode();return i(o,{key:"a1180dc57ab3af8d2b6dc2a59472d1a59de807f0",class:`bookingEvent  ${this.isNewEvent()||this.isHighlightEventType()?"newEvent":""} ${t.clsName} `,style:this.getPosition(),id:"event_"+this.getBookingId()},i("div",{key:"f7e71627d32f462eb932e3578fc090555c2911e0",class:`bookingEventBase  ${!this.isNewEvent()&&p(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE))?"skewedLeft":""}\n          ${!this.isNewEvent()&&p(new Date(this.bookingEvent.defaultDates.to_date)).isAfter(new Date(this.bookingEvent.TO_DATE))?"skewedRight":""}\n          ${!this.bookingEvent.is_direct&&!l(this.bookingEvent.STATUS_CODE)&&this.bookingEvent.STATUS!=="TEMP-EVENT"&&this.bookingEvent.ID!=="NEW_TEMP_EVENT"&&"border border-dark ota-booking-event"}  ${this.isSplitBooking()?"splitBooking":""}`,style:{backgroundColor:t.color,"--ir-event-bg":t.color},onTouchStart:t=>this.startDragging(t,"move"),onMouseDown:t=>this.startDragging(t,"move")}),e?i("div",{class:"legend_circle noteIcon",style:{backgroundColor:e.color}}):null,n?i("div",{class:"legend_circle balanceIcon",style:{backgroundColor:n.color}}):null,i("div",{key:"ead7e25209707779293792f62f111e0163464cca",class:"bookingEventTitle",onTouchStart:t=>this.startDragging(t,"move"),onMouseDown:t=>this.startDragging(t,"move")},this.getBookedBy(),this.renderEventBookingNumber()),(this.bookingEvent.is_direct||l(this.bookingEvent.STATUS_CODE))&&i(s,{key:"46e3274c8fb7d0a8896bbc3cdfe80d889afb5509"},i("div",{key:"d9b8021df3ca15425f27e99ec5042bd687a8ea73",class:`bookingEventDragHandle leftSide ${!this.isNewEvent()&&p(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE))?"skewedLeft":""}\n            ${!this.isNewEvent()&&p(new Date(this.bookingEvent.defaultDates.to_date)).isAfter(new Date(this.bookingEvent.TO_DATE))?"skewedRight":""}`,onTouchStart:t=>this.startDragging(t,"leftSide"),onMouseDown:t=>this.startDragging(t,"leftSide")}),i("div",{key:"527a2f9043a7f80b1c4f4088da9a3d13171ffc2e",class:`bookingEventDragHandle rightSide ${!this.isNewEvent()&&p(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE))?"skewedLeft":""}\n              ${!this.isNewEvent()&&p(new Date(this.bookingEvent.defaultDates.to_date)).isAfter(new Date(this.bookingEvent.TO_DATE))?"skewedRight":""}`,onTouchStart:t=>this.startDragging(t,"rightSide"),onMouseDown:t=>this.startDragging(t,"rightSide")})),this.showInfoPopup?i("igl-booking-event-hover",{is_vacation_rental:this.is_vacation_rental,countries:this.countries,currency:this.currency,class:"top",bookingEvent:this.bookingEvent,bubbleInfoTop:this.bubbleInfoTopSide,style:this.calculateHoverPosition()}):null)}get element(){return n(this)}};w.style=k;const E=".sc-igl-booking-event-hover-h{display:block;position:relative;z-index:100}.btn.sc-igl-booking-event-hover{padding-left:4px !important;padding-right:4px !important}.balance_amount.sc-igl-booking-event-hover{color:#ff4961;font-size:0.75rem}.user-notes.sc-igl-booking-event-hover{margin-left:4px;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:5;line-clamp:5;overflow:hidden;max-width:100%;height:auto}.events_btns.sc-igl-booking-event-hover{display:inline-flex;align-items:center;justify-content:center;gap:0.5rem}.mx-01.sc-igl-booking-event-hover{--m:5px;margin-left:var(--m) !important;margin-right:var(--m) !important}.pointerContainerTop.sc-igl-booking-event-hover{top:-26px}.pointerContainer.sc-igl-booking-event-hover{position:absolute;height:10px;width:350px;left:var(--el-left, 50%);transform:translateX(-50%)}.iglPopOver.sc-igl-booking-event-hover{position:absolute;background-color:#fff;padding:10px;border:1px solid #656ee7;border-radius:6px;left:var(--el-left, 50%);transform:translateX(-50%) translateY(10px);box-shadow:1px 0px 20px rgba(0, 0, 0, 0.2)}.iglPopOver.infoBubble.sc-igl-booking-event-hover{min-width:350px}.iglPopOver.blockedView.sc-igl-booking-event-hover{max-width:400px;width:400px}.iglPopOver.newBookingOptions.sc-igl-booking-event-hover{overflow-wrap:break-word !important;min-width:230px;width:fit-content}.bubblePointer.sc-igl-booking-event-hover{position:absolute;width:0;height:0;left:50%;border-left:10px solid transparent;border-right:10px solid transparent;transform:translate(-50%, 0px)}.bubblePointTop.sc-igl-booking-event-hover{border-top:10px solid #656ee7}.bubblePointBottom.sc-igl-booking-event-hover{border-bottom:10px solid #656ee7}.bubbleInfoAbove.sc-igl-booking-event-hover{bottom:35px}.updateBtnIcon.sc-igl-booking-event-hover{margin-right:4px}.icon-image.sc-igl-booking-event-hover{height:1.5rem;width:1.5rem;margin-right:5px}";const x=class{constructor(i){t(this,i);this.showBookingPopup=e(this,"showBookingPopup");this.hideBubbleInfo=e(this,"hideBubbleInfo");this.deleteButton=e(this,"deleteButton");this.bookingCreated=e(this,"bookingCreated");this.showDialog=e(this,"showDialog");this.bubbleInfoTop=false;this.is_vacation_rental=false;this.shouldHideUnassignUnit=false;this.eventService=new f;this.hideButtons=false}componentWillLoad(){let t=this.bookingEvent.roomsInfo.find((t=>t.id===this.bookingEvent.RATE_TYPE));if(t){this.shouldHideUnassignUnit=t.physicalrooms.length===1}if(p(this.bookingEvent.TO_DATE,"YYYY-MM-DD").isBefore(p())){this.hideButtons=true}this.canCheckInOrCheckout=p().isSameOrAfter(new Date(this.bookingEvent.FROM_DATE),"days")&&p().isBefore(new Date(this.bookingEvent.TO_DATE),"days");this.handleKeyDown=this.handleKeyDown.bind(this)}componentDidLoad(){document.addEventListener("keydown",this.handleKeyDown)}disconnectedCallback(){document.removeEventListener("keydown",this.handleKeyDown)}handleBookingEventChange(t,e){if(t!==e)this.canCheckInOrCheckout=p(new Date).isSameOrAfter(new Date(this.bookingEvent.FROM_DATE),"days")&&p(new Date).isBefore(new Date(this.bookingEvent.TO_DATE),"days")}getBookingId(){return this.bookingEvent.ID}hideBubble(){this.hideBubbleInfo.emit({key:"hidebubble",currentInfoBubbleId:this.getBookingId()});document.removeEventListener("keydown",this.handleKeyDown)}handleKeyDown(t){if(t.key==="Escape"){this.hideBubble()}else return}getTotalOccupants(){var t,e,i;const{CHILDREN_COUNT:s,ADULTS_COUNT:o}=this.bookingEvent;if(s===0){return`${o} ${o>1?v.entries.Lcz_AdultsCaption.toLowerCase():(t=v.entries.Lcz_Single_Adult)===null||t===void 0?void 0:t.toLowerCase()}`}return`${o} ${o>1?v.entries.Lcz_AdultsCaption.toLowerCase():(e=v.entries.Lcz_Single_Adult)===null||e===void 0?void 0:e.toLowerCase()}, ${s} ${s>1?v.entries.Lcz_ChildCaption.toLowerCase():(i=v.entries.Lcz_Single_Child)===null||i===void 0?void 0:i.toLowerCase()}`}getPhoneNumber(){return this.bookingEvent.PHONE}getCountry(){return d(this.bookingEvent.COUNTRY,this.countries).name}getPhoneCode(){if(this.bookingEvent.PHONE_PREFIX){return this.bookingEvent.PHONE_PREFIX}return d(this.bookingEvent.COUNTRY,this.countries).phone_prefix}renderPhone(){return this.bookingEvent.COUNTRY?`${this.bookingEvent.is_direct?this.getPhoneCode()+"-":""}${this.getPhoneNumber()} - ${this.getCountry()}`:this.getPhoneNumber()}getInternalNote(){return this.bookingEvent.INTERNAL_NOTE}getTotalPrice(){return this.bookingEvent.TOTAL_PRICE}getArrivalTime(){return this.bookingEvent.ARRIVAL_TIME}getRatePlan(){return this.bookingEvent.RATE_PLAN}getEntryDate(){return this.bookingEvent.ENTRY_DATE}isNewBooking(){return this.getBookingId()==="NEW_TEMP_EVENT"}isCheckedIn(){return this.bookingEvent.STATUS==="IN-HOUSE"}isBlockedDateEvent(){return this.bookingEvent.STATUS==="BLOCKED"||this.bookingEvent.STATUS==="BLOCKED-WITH-DATES"}hasSplitBooking(){return this.bookingEvent.hasOwnProperty("splitBookingEvents")&&this.bookingEvent.splitBookingEvents}canCheckIn(){return c({from_date:this.bookingEvent.FROM_DATE,to_date:this.bookingEvent.TO_DATE,isCheckedIn:this.isCheckedIn()})}canCheckOut(){var t,e,i,s;if(!m.checkin_enabled||m.is_automatic_check_in_out){return false}if(this.isCheckedIn()){return true}const o=p();if(((e=(t=this.bookingEvent.ROOM_INFO)===null||t===void 0?void 0:t.in_out)===null||e===void 0?void 0:e.code)==="000"&&p().isSameOrAfter(new Date(this.bookingEvent.TO_DATE),"days")&&b(o.toDate(),u((i=m.checkin_checkout_hours)===null||i===void 0?void 0:i.offset,(s=m.checkin_checkout_hours)===null||s===void 0?void 0:s.hour))){return true}return false}handleBlockDateUpdate(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;this.bookingEvent=Object.assign(Object.assign({},this.bookingEvent),e.data)}handleEditBooking(){this.bookingEvent.TITLE=v.entries.Lcz_EditBookingFor;this.handleBookingOption("EDIT_BOOKING")}getStringDateFormat(t){return t.getFullYear()+"-"+(t.getMonth()<9?"0":"")+(t.getMonth()+1)+"-"+(t.getDate()<=9?"0":"")+t.getDate()}handleAddRoom(){var t;let e=new Date(this.bookingEvent.FROM_DATE);e.setHours(0,0,0,0);let i=this.getStringDateFormat(e);let s=new Date(this.bookingEvent.TO_DATE);s.setHours(0,0,0,0);let o=this.getStringDateFormat(s);let n={ID:"",NAME:"",BOOKING_NUMBER:this.bookingEvent.BOOKING_NUMBER,FROM_DATE:i,TO_DATE:o,roomsInfo:this.bookingEvent.roomsInfo,ARRIVAL:this.bookingEvent.ARRIVAL,ADD_ROOM_TO_BOOKING:this.bookingEvent.ID,TITLE:"Add Room to #"+this.bookingEvent.BOOKING_NUMBER,event_type:"ADD_ROOM",ROOMS:this.bookingEvent.ROOMS,GUEST:this.bookingEvent.GUEST,message:this.bookingEvent.NOTES,SOURCE:this.bookingEvent.SOURCE,booking:(t=this.bookingEvent)===null||t===void 0?void 0:t.booking,defaultDateRange:{fromDate:e,fromDateStr:"",toDate:s,toDateStr:"",dateDifference:0,editabled:true,message:"Including 5.00% City Tax - Excluding 11.00% VAT"}};this.handleBookingOption("ADD_ROOM",n)}handleCustomerCheckIn(){var t,e;const{adult_nbr:i,children_nbr:s,infant_nbr:o}=this.bookingEvent.ROOM_INFO.occupancy;this.showDialog.emit({reason:"checkin",bookingNumber:this.bookingEvent.BOOKING_NUMBER,roomIdentifier:this.bookingEvent.IDENTIFIER,roomName:"",roomUnit:"",sidebarPayload:{identifier:this.bookingEvent.IDENTIFIER,bookingNumber:this.bookingEvent.BOOKING_NUMBER,checkin:false,roomName:(e=(t=this.bookingEvent.ROOM_INFO.unit)===null||t===void 0?void 0:t.name)!==null&&e!==void 0?e:"",sharing_persons:this.bookingEvent.ROOM_INFO.sharing_persons,totalGuests:i+s+o}})}handleCustomerCheckOut(){this.showDialog.emit({reason:"checkout",bookingNumber:this.bookingEvent.BOOKING_NUMBER,roomIdentifier:this.bookingEvent.IDENTIFIER,roomName:"",roomUnit:""})}handleDeleteEvent(){this.hideBubble();this.deleteButton.emit(this.bookingEvent.POOL);console.log("Delete Event")}async handleUpdateBlockedDates(){try{this.isLoading="update";setTimeout((()=>{this.hideBubble()}),50);await this.eventService.updateBlockedEvent(this.bookingEvent);this.isLoading=""}catch(t){}}handleConvertBlockedDateToBooking(){this.handleBookingOption("BAR_BOOKING")}getRoomInfo(){const t=+this.bookingEvent.PR_ID;let e={};for(const i of this.bookingEvent.roomsInfo){for(const s of i.physicalrooms){if(t===s.id){e.CATEGORY=i.name;e.ROOM_NAME=s.name;e.ROOMS_INFO=i;return e}}}return e}renderTitle(t,e){switch(t){case"EDIT_BOOKING":return`${v.entries.Lcz_EditBookingFor} ${e.CATEGORY} ${e.ROOM_NAME}`;case"ADD_ROOM":return`${v.entries.Lcz_AddingUnitToBooking}# ${this.bookingEvent.BOOKING_NUMBER}`;case"SPLIT_BOOKING":return v.entries.Lcz_Adding+` ${e.CATEGORY} ${e.ROOM_NAME}`;default:return`${v.entries.Lcz_NewBookingFor} ${e.CATEGORY} ${e.ROOM_NAME}`}}handleBookingOption(t,e=null){const i=this.getRoomInfo();let s=e?e:this.bookingEvent;s.event_type=t;s.TITLE=this.renderTitle(t,i);if(["003","002","004"].includes(this.bookingEvent.STATUS_CODE)){s.roomsInfo=[i.ROOMS_INFO]}if(t==="BAR_BOOKING"&&this.bookingEvent.STATUS!=="TEMP-EVENT"){const{FROM_DATE:t,TO_DATE:e,PR_ID:i,RELEASE_AFTER_HOURS:o,ENTRY_DATE:n,OPTIONAL_REASON:h,ENTRY_MINUTE:r,ENTRY_HOUR:l,STATUS_CODE:a}=this.bookingEvent;s.block_exposed_unit_props={from_date:t,to_date:e,NOTES:h,pr_id:i,STAY_STATUS_CODE:a,DESCRIPTION:o,BLOCKED_TILL_DATE:n,BLOCKED_TILL_HOUR:l,BLOCKED_TILL_MINUTE:r};this.handleDeleteEvent()}this.showBookingPopup.emit({key:"add",data:Object.assign({},s)});this.hideBubbleInfo.emit({key:"hidebubble",currentInfoBubbleId:this.getBookingId()})}getInfoElement(){var t,e,s,o,n;return i("div",{class:`iglPopOver infoBubble ${this.bubbleInfoTop?"bubbleInfoAbove":""} text-left`},i("div",{class:`row p-0 m-0  ${this.bookingEvent.BALANCE>1?"pb-0":"pb-1"}`},i("div",{class:"px-0  col-8 font-weight-bold font-medium-1 d-flex align-items-center"},i("img",{src:(e=(t=this.bookingEvent)===null||t===void 0?void 0:t.origin)===null||e===void 0?void 0:e.Icon,alt:(o=(s=this.bookingEvent)===null||s===void 0?void 0:s.origin)===null||o===void 0?void 0:o.Label,class:"icon-image"}),i("p",{class:"p-0 m-0"},!this.bookingEvent.is_direct?this.bookingEvent.channel_booking_nbr:this.bookingEvent.BOOKING_NUMBER)),i("div",{class:"pr-0 col-4 text-right"},g(this.currency.symbol,this.getTotalPrice()))),this.bookingEvent.BALANCE>1&&i("p",{class:"pr-0 m-0 p-0 text-right balance_amount"},v.entries.Lcz_Balance,": ",g(this.currency.symbol,this.bookingEvent.BALANCE)),i("div",{class:"row p-0 m-0"},i("div",{class:"px-0 pr-0 col-12"},i("ir-date-view",{from_date:this.bookingEvent.defaultDates.from_date,to_date:this.bookingEvent.defaultDates.to_date,showDateDifference:false}))),this.getArrivalTime()&&i("ir-label",{containerStyle:{padding:"0",margin:"0"},class:"m-0 p-0",labelText:`${v.entries.Lcz_ArrivalTime}:`,content:this.getArrivalTime()}),this.getTotalOccupants()&&i("ir-label",{class:"m-0 p-0",containerStyle:{padding:"0",margin:"0"},labelText:`${v.entries.Lcz_Occupancy}:`,content:this.getTotalOccupants()}),this.getPhoneNumber()&&i("ir-label",{containerStyle:{padding:"0",margin:"0"},class:"m-0 p-0",labelText:`${v.entries.Lcz_Phone}:`,content:this.renderPhone()}),this.getRatePlan()&&i("ir-label",{containerStyle:{padding:"0",margin:"0"},class:"m-0 p-0",labelText:`${v.entries.Lcz_RatePlan}:`,content:this.getRatePlan()}),this.bookingEvent.PRIVATE_NOTE&&i("ir-label",{containerStyle:{padding:"0",margin:"0"},class:"m-0 p-0",labelText:`${v.entries.Lcz_BookingPrivateNote}:`,display:"inline",content:this.bookingEvent.PRIVATE_NOTE}),this.bookingEvent.is_direct?i("ir-label",{containerStyle:{padding:"0",margin:"0"},labelText:`${v.entries.Lcz_GuestRemark}:`,display:"inline",content:this.bookingEvent.NOTES}):i("ota-label",{class:"m-0 p-0",label:`${v.entries.Lcz_ChannelNotes||"Channel notes"}:`,remarks:this.bookingEvent.ota_notes,maxVisibleItems:(n=this.bookingEvent.ota_notes)===null||n===void 0?void 0:n.length}),this.getInternalNote()&&i("ir-label",{labelText:`${v.entries.Lcz_InternalRemark}:`,content:this.getInternalNote()}),i("div",{class:"row p-0 m-0 mt-2"},i("div",{class:"full-width d-flex align-items-center",style:{gap:"0.25rem"},role:"group"},i("ir-button",{style:{"--icon-size":"0.875rem"},onClickHandler:()=>this.handleEditBooking(),class:"w-100",btn_block:true,text:v.entries.Lcz_Edit,icon_name:"edit",btn_styles:"h-100",size:"sm"}),this.bookingEvent.is_direct&&this.bookingEvent.IS_EDITABLE&&!this.hideButtons&&i("ir-button",{style:{"--icon-size":"0.875rem"},text:v.entries.Lcz_AddRoom,icon_name:"square_plus",size:"sm",class:"w-100",btn_styles:"h-100",onClickHandler:()=>this.handleAddRoom()}),this.canCheckIn()&&i("ir-button",{class:"w-100",style:{"--icon-size":"0.875rem"},text:v.entries.Lcz_CheckIn,onClickHandler:()=>this.handleCustomerCheckIn(),icon_name:"edit",btn_styles:"h-100",size:"sm"}),this.canCheckOut()&&i("ir-button",{class:"w-100",btn_styles:"h-100",style:{"--icon-size":"0.875rem"},text:v.entries.Lcz_CheckOut,icon_name:"edit",onClickHandler:()=>this.handleCustomerCheckOut(),size:"sm"}),this.hideButtons?null:!this.shouldHideUnassignUnit&&i("ir-button",{class:"w-100",btn_styles:"h-100",style:{"--icon-size":"0.875rem"},size:"sm",text:v.entries.Lcz_Unassign,icon_name:"xmark",onClickHandler:t=>{this.handleDeleteEvent()}}))))}getNewBookingOptions(){const t=this.bookingEvent.roomsInfo[0].rateplans.some((t=>t.is_active));return i("div",{class:`iglPopOver d-flex flex-column newBookingOptions ${this.bubbleInfoTop?"bubbleInfoAbove":""} text-left`,style:{gap:"0.5rem"}},t?i(s,null,i("ir-button",{size:"sm",btn_block:true,"data-testid":"bar_booking_btn",text:v.entries.Lcz_CreateNewBooking,onClickHandler:t=>{this.handleBookingOption("BAR_BOOKING")}}),this.hasSplitBooking()&&i("ir-button",{size:"sm",btn_block:true,text:v.entries.Lcz_AssignUnitToExistingBooking,onClickHandler:t=>{this.handleBookingOption("SPLIT_BOOKING")}})):i("p",{class:"text-danger"},v.entries.Lcz_NoRatePlanDefined),i("ir-button",{size:"sm",text:v.entries.Lcz_Blockdates,btn_block:true,onClickHandler:t=>{this.handleBookingOption("BLOCK_DATES")}}))}getBlockedView(){console.log("booking event",this.bookingEvent);return i("div",{class:`iglPopOver blockedView ${this.bubbleInfoTop?"bubbleInfoAbove":""} text-left`},i("igl-block-dates-view",{isEventHover:true,entryHour:this.bookingEvent.ENTRY_HOUR,entryMinute:this.bookingEvent.ENTRY_MINUTE,defaultData:this.bookingEvent,fromDate:this.bookingEvent.defaultDates.from_date,toDate:this.bookingEvent.defaultDates.to_date,entryDate:this.getEntryDate(),onDataUpdateEvent:t=>this.handleBlockDateUpdate(t)}),i("div",{class:"row p-0 m-0 mt-2"},i("div",{class:"full-width d-flex align-items-center",style:{gap:"0.25rem"},role:"group"},i("ir-button",{btn_disabled:this.isLoading==="update",text:v.entries.Lcz_Update,onClickHandler:t=>{this.handleUpdateBlockedDates()},icon_name:"edit",size:"sm",btn_styles:"h-100",isLoading:this.isLoading==="update",style:{"--icon-size":"0.875rem"},btn_block:true,class:"w-100"}),i("ir-button",{class:"w-100 h-100 my-0",btn_block:true,btn_styles:"h-100",size:"sm",text:v.entries.Lcz_ConvertToBooking,onClickHandler:()=>{this.handleConvertBlockedDateToBooking()}}),i("ir-button",{class:"w-100",btn_styles:"h-100",btn_block:true,size:"sm",style:{"--icon-size":"0.875rem"},icon_name:"trash",btn_color:"danger",onClickHandler:t=>{this.handleDeleteEvent()},text:v.entries.Lcz_Delete}))))}render(){return i(o,{key:"d47cc77f89b9b870dac40d9be7927e5d8b427196"},i("div",{key:"72cb66a9c42bdc32852bcdfa58f360fce4e82fa1",class:`pointerContainer ${this.bubbleInfoTop?"pointerContainerTop":""}`},i("div",{key:"8e1d0917d5d3af1877661c562a75e1f3754c74a1",class:`bubblePointer ${this.bubbleInfoTop?"bubblePointTop":"bubblePointBottom"}`})),this.isBlockedDateEvent()?this.getBlockedView():null,this.isNewBooking()?this.getNewBookingOptions():null,!this.isBlockedDateEvent()&&!this.isNewBooking()?this.getInfoElement():null)}get element(){return n(this)}static get watchers(){return{bookingEvent:["handleBookingEventChange"]}}};x.style=E;const O=".sc-ir-interactive-title-h{display:block;width:100%;--hk-green:green}*.sc-ir-interactive-title{box-sizing:border-box}.popover-title.sc-ir-interactive-title{position:relative;width:100%;height:100%;margin:0;padding:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;z-index:10;left:0;display:flex;align-items:center}.popover-container.sc-ir-interactive-title{position:absolute;bottom:0px;left:var(--ir-popover-left, 10px);background:rgb(0, 0, 0);color:white;min-width:100%;box-shadow:rgba(0, 0, 0, 0.2) 0px 2px 10px;z-index:9999;padding:3.5px 7px;border-radius:5px;pointer-events:none;opacity:0;transition:all 100ms ease;font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;font-style:normal;font-weight:400;line-height:1.45;text-decoration:none;text-shadow:none;font-size:0.875rem}.popover-container[data-state='show'].sc-ir-interactive-title{opacity:1}.hk-dot.sc-ir-interactive-title{inset:0;position:absolute;display:flex;align-items:center;justify-content:center;width:fit-content;padding:4px;left:auto;padding-inline:var(--ir-popover-left);color:var(--dot-color, #ffffff)}";const _=class{constructor(e){t(this,e);this.irPopoverLeft="10px";this.cropSize=15}componentWillLoad(){this.croppedTitle=this.popoverTitle}componentDidLoad(){this.initializePopover()}initializePopover(){const t=this.el.querySelector(".popover-title");if(t){const e=t.scrollWidth>t.offsetWidth;if(e){this.croppedTitle=this.popoverTitle.slice(0,this.cropSize)+"...";this.croppedTitleEl.innerHTML=this.croppedTitle;$(t).popover({trigger:"hover",content:this.popoverTitle,placement:"top"})}else{$(t).popover("dispose")}}}render(){return i(o,{key:"63d8bd9348f08096eb525f0007b73b5fbd6ae7d3",style:{"--ir-popover-left":this.irPopoverLeft}},i("p",{key:"c4cfa3fe73ef931d2064c32f0627f775d2e05b76",class:"popover-title",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},i("span",{key:"8e78e9a60f07e70176eb191790cc0d7a008cd5f8",ref:t=>this.croppedTitleEl=t,class:"croppedTitle"},this.croppedTitle),this.hkStatus&&i("div",{key:"5d9442cb82098eaba8b4c84a2307606d80c32251",title:"This unit is dirty",class:`hk-dot`},i("svg",{key:"2d2a683354e29f5f12a13afc8b12aa2584c05394",xmlns:"http://www.w3.org/2000/svg",height:"12",width:"13.5",viewBox:"0 0 576 512"},i("path",{key:"37ffd34a7141dce486a4255d4f04637a9dd30159",d:"M566.6 54.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192-34.7-34.7c-4.2-4.2-10-6.6-16-6.6c-12.5 0-22.6 10.1-22.6 22.6l0 29.1L364.3 320l29.1 0c12.5 0 22.6-10.1 22.6-22.6c0-6-2.4-11.8-6.6-16l-34.7-34.7 192-192zM341.1 353.4L222.6 234.9c-42.7-3.7-85.2 11.7-115.8 42.3l-8 8C76.5 307.5 64 337.7 64 369.2c0 6.8 7.1 11.2 13.2 8.2l51.1-25.5c5-2.5 9.5 4.1 5.4 7.9L7.3 473.4C2.7 477.6 0 483.6 0 489.9C0 502.1 9.9 512 22.1 512l173.3 0c38.8 0 75.9-15.4 103.4-42.8c30.6-30.6 45.9-73.1 42.3-115.8z"})))))}get el(){return n(this)}};_.style=O;export{w as igl_booking_event,x as igl_booking_event_hover,_ as ir_interactive_title};
//# sourceMappingURL=p-61a61231.entry.js.map