import{c as t}from"./p-2925ded6.js";import{c as n}from"./p-d6d6fb27.js";const e=[10,20,50,100];function i(){const t=d();return{tasksList:t,currentPage:1,mobileCurrentPage:1,pageSize:20,mobilePageSize:20,totalPages:0,totalItems:0}}const r={searchField:"",tasks:[],filteredTasks:[],selectedTasks:[],pagination:i(),filters:null,isLoading:false,isFiltersLoading:false,isExportLoading:false,archiveOpen:false,archiveData:[],archiveFilters:{from_date:null,to_date:null,filtered_by_hkm:[],filtered_by_unit:[]},archiveLoading:null,sorting:{field:"date",direction:"ASC"},modalOpen:false,sidebarOpen:false};const{state:s,onChange:a}=t(r);function o(t){s.searchField=t;s.pagination.currentPage=1;g()}function c(t){s.tasks=t;g()}function u(t){s.pagination={...s.pagination,...t}}function f(t){u({pageSize:t,currentPage:1});m()}function l(t){if(t>=1&&t<=s.pagination.totalPages){u({currentPage:t})}}function d(){if(!n.roomsInfo){return e}const t=n.roomsInfo.length;if(t<=10){return e}const i=[...Array(4)].map(((n,e)=>{const i=t*(e+1);return e===3?i<100?100:i:i}));return i}function g(){const t=s?.searchField?.toLowerCase()??"";if(!t){s.filteredTasks=[...s.tasks]}else{s.filteredTasks=s.tasks.filter((n=>n.unit?.name?.toLowerCase().includes(t)||n.status?.description?.toLowerCase().includes(t)||n.housekeeper?.toLowerCase().includes(t)))}m()}function m(){const t=s.filteredTasks.length;const n=Math.max(1,Math.ceil(t/s.pagination.pageSize));u({totalItems:t,totalPages:n,currentPage:Math.min(s.pagination.currentPage,n)})}function P(){const t=(s.pagination.currentPage-1)*s.pagination.pageSize;const n=t+s.pagination.pageSize;return s.filteredTasks.slice(t,n)}function b(){const{mobileCurrentPage:t,mobilePageSize:n}=s.pagination;const e=(t-1)*n;const i=e+n;return s.filteredTasks.slice(0,i)}function p(){const{mobileCurrentPage:t,mobilePageSize:n}=s.pagination;return!(n*(t-1)+n>=s.filteredTasks.length)}function h(t){if(!p()){return}u({mobileCurrentPage:t})}function C(t){s.selectedTasks=t}function S(){s.selectedTasks=[]}function k(t){const n=s.selectedTasks.findIndex((n=>n.id===t.id));if(n>-1){s.selectedTasks=s.selectedTasks.filter((n=>n.id!==t.id))}else{s.selectedTasks=[...s.selectedTasks,t]}}function _(t){s.selectedTasks=[...t]}function z(t){s.isLoading=t}function L(t,n){s.sorting={field:t,direction:n};s.tasks=v(s.tasks);g()}function v(t=s.filteredTasks){const{field:n,direction:e}=s.sorting;return[...t].sort(((t,i)=>{let r=t[n];let s=i[n];if(n==="status"){r=t.status?.description;s=i.status?.description}else if(n==="unit"){r=t.unit?.name;s=i.unit?.name}if(r<s)return e==="ASC"?-1:1;if(r>s)return e==="ASC"?1:-1;if(t.date<i.date)return-1;if(t.date>i.date)return 1;if(t.unit?.name<i.unit?.name)return-1;if(t.unit?.name>i.unit?.name)return 1;return 0}))}function A(){return s.tasks.filter((t=>{const n=new Date(t.date);const e=new Date;e.setHours(23,59,59,999);return n<=e}))}function j(){const t=A();return t.length>0&&s.selectedTasks.length===t.length}export{C as a,o as b,S as c,L as d,_ as e,P as f,A as g,s as h,j as i,b as j,l as k,f as l,p as m,h as n,z as s,k as t,c as u};
//# sourceMappingURL=p-aaeca94b.js.map