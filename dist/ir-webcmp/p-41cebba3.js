import{c as n}from"./p-2925ded6.js";import{d as t}from"./p-15acbbbe.js";const o={bookings:[],filteredBookings:[],paginatedBookings:[],needsCheckInBookings:[],inHouseBookings:[],searchTerm:"",pagination:{page:1,pageSize:20,total:0,totalPages:1},today:m()};const{state:r,onChange:e}=n(o);function s(n=t){r.bookings=Array.isArray(n)?[...n]:[];u()}function c(n){r.searchTerm=n??"";u()}function u(){const n=i(r.bookings,r.today);const t=a(n,r.searchTerm);const o=t.length;const{pageSize:e}=r.pagination;const s=o===0?1:Math.ceil(o/e);const c=$(r.pagination.page,1,s);const u=(c-1)*e;const f=t.slice(u,u+e);r.filteredBookings=t;r.pagination={...r.pagination,total:o,totalPages:s,page:c};r.paginatedBookings=f;const p=g(f);r.needsCheckInBookings=p.needsCheckIn;r.inHouseBookings=p.inHouse}function i(n,t){if(!t){return[]}return n.map((n=>{const o=(n.rooms??[]).filter((n=>k(n.from_date)===t));if(!o.length){return null}return{...n,rooms:o}})).filter((n=>Boolean(n)))}function a(n,t){const o=t?.trim().toLowerCase();if(!o){return n}return n.filter((n=>f(n,o)))}function f(n,t){if(!t){return true}const o=n.booking_nbr?.toLowerCase()??"";if(o.includes(t)){return true}if(l(n.guest).includes(t)){return true}return(n.rooms??[]).some((n=>l(n.guest).includes(t)))}function g(n){return n.reduce(((n,t)=>{const o=t.rooms??[];const r=o.filter((n=>p(n)));if(r.length){n.needsCheckIn.push({...t,rooms:r})}const e=o.filter((n=>d(n)));if(e.length){n.inHouse.push({...t,rooms:e})}return n}),{needsCheckIn:[],inHouse:[]})}function p(n){const t=n.in_out?.code??"";return t==="000"}function d(n){return n.in_out?.code==="001"}function l(n){const t=`${n?.first_name??""} ${n?.last_name??""}`.trim();return t.toLowerCase()}function m(){return h(new Date)}function h(n){if(n instanceof Date){const t=n.getFullYear();const o=`${n.getMonth()+1}`.padStart(2,"0");const r=`${n.getDate()}`.padStart(2,"0");return`${t}-${o}-${r}`}return k(n)}function k(n){if(!n){return""}return n.slice(0,10)}function $(n,t,o){return Math.min(Math.max(n,t),o)}s();export{r as a,c as s};
//# sourceMappingURL=p-41cebba3.js.map