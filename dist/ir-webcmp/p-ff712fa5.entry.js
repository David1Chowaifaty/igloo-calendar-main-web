import{r as e,h as t,H as s,c as i,g as a,F as l}from"./p-7eeadfc8.js";import{c as n,t as c,u as d,a as o,b as r,d as h}from"./p-dcedaea5.js";import{l as p}from"./p-303d487c.js";import{c as f}from"./p-b191c18a.js";const b=".sc-ir-channel-general-h{display:block}.label-style.sc-ir-channel-general{width:100px;text-align:end;padding-right:10px !important}.connection-testing-container.sc-ir-channel-general{display:flex;align-items:center;justify-content:space-between;margin-top:10px !important}.connection-title.sc-ir-channel-general{border-bottom:1px solid #e4e5ec}.ml-18.sc-ir-channel-general{margin-left:18% !important}svg.sc-ir-channel-general{margin-right:5px}";const m=b;const u=class{constructor(t){e(this,t);this.channel_status=null;this.buttonClicked=false;this.connection_status_message="";this.status=false}componentWillLoad(){var e;if(this.channel_status!=="create"||!n.isConnectedToChannel){return}this.connection_status_message=n.isConnectedToChannel?(e=p.entries)===null||e===void 0?void 0:e.Lcz_ConnectedChannel:"";this.status=true}handleTestConnectionClicked(e){var t,s,i;e.preventDefault();this.buttonClicked=true;if(this.channel_status!=="create"||!((t=n.channel_settings)===null||t===void 0?void 0:t.hotel_id)||n.isConnectedToChannel){return}const a=c();this.status=a;this.connection_status_message=a?(s=p.entries)===null||s===void 0?void 0:s.Lcz_ConnectedChannel:(i=p.entries)===null||i===void 0?void 0:i.Lcz_IncorrectConnection;this.buttonClicked=false}render(){var e,i,a,l,c,r,h,f,b;return t(s,{key:"ee122887652e8baa761ca6e5360c81e042d6cffb"},t("section",{key:"eb72c81b1034f5ac2403fc0ba2632b4ad522af9f",class:"ml-18"},t("fieldset",{key:"e15f164b9feda1bb04c46b2dc702d4abe6655aa2",class:"d-flex align-items-center"},t("label",{key:"2077cd27b280ee8d953c0ebf64e3d8e90c539570",htmlFor:"hotel_channels",class:"m-0 p-0 label-style"},(e=p.entries)===null||e===void 0?void 0:e.Lcz_Channel),t("ir-combobox",{key:"1581a17b161e62512f4cb90c46c2a0faf8301442",input_id:"hotel_channels",disabled:n.isConnectedToChannel,class:"flex-fill",value:(i=n.selectedChannel)===null||i===void 0?void 0:i.name,onComboboxValueChange:e=>{o(e.detail.data.toString())},data:n.channels.map((e=>({id:e.id,name:e.name})))})),t("fieldset",{key:"b18f507a32acd67a2584f62787eafdc1aec56b2c",class:"d-flex align-items-center mt-1"},t("label",{key:"d6de8a282f785c0b75b757507726949a916ad25f",htmlFor:"hotel_title",class:"m-0 p-0 label-style"},(a=p.entries)===null||a===void 0?void 0:a.Lcz_Title),t("div",{key:"73b9f51b35ce372b6bc86cea71654ff0387ebca2",class:"flex-fill"},t("input",{key:"ed93cc864ed04d0388287ee4b618ae61924653d0",id:"hotel_title",value:(l=n.channel_settings)===null||l===void 0?void 0:l.hotel_title,onInput:e=>d("hotel_title",e.target.value),class:"form-control  flex-fill"})))),n.selectedChannel&&t("form",{onSubmit:this.handleTestConnectionClicked.bind(this),class:"mt-3 connection-container"},t("h3",{class:"text-left font-medium-2  py-0 my-0 connection-title py-1 mb-2"},(c=p.entries)===null||c===void 0?void 0:c.Lcz_ConnectionSettings),t("div",{class:"ml-18"},t("fieldset",{class:"d-flex align-items-center my-1"},t("label",{htmlFor:"hotel_id",class:"m-0 p-0 label-style"},(r=p.entries)===null||r===void 0?void 0:r.Lcz_HotelID),t("div",{class:"flex-fill"},t("input",{id:"hotel_id",disabled:n.isConnectedToChannel,class:`form-control  flex-fill bg-white ${this.buttonClicked&&!((h=n.channel_settings)===null||h===void 0?void 0:h.hotel_id)&&"border-danger"}`,value:(f=n.channel_settings)===null||f===void 0?void 0:f.hotel_id,onInput:e=>d("hotel_id",e.target.value)}))),t("div",{class:"connection-testing-container"},t("div",{class:"d-flex align-items-center"},this.connection_status_message&&(this.status?t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"12",width:"12",viewBox:"0 0 512 512"},t("path",{fill:"var(--green)",d:"M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-111 111-47-47c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64c9.4 9.4 24.6 9.4 33.9 0L369 209z"})):t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"12",width:"12",viewBox:"0 0 512 512"},t("path",{fill:"var(--yellow)",d:"M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"}))),t("span",null,this.connection_status_message)),t("button",{class:"btn btn-outline-secondary btn-sm",type:"submit"},(b=p.entries)===null||b===void 0?void 0:b.Lcz_TestConnection)))))}};u.style=m;const g=".sc-ir-channel-header-h{display:block;position:relative;padding:0;margin:0;border-bottom:1px solid #e4e5ec}ul.sc-ir-channel-header{display:flex;align-items:center;gap:2rem;padding:0}.tab.sc-ir-channel-header{font-size:0.95rem;font-weight:600;cursor:pointer;position:relative;margin:0;padding:0;transition:color 0.3s ease;user-select:none}.tab[data-disabled].sc-ir-channel-header{cursor:auto}.tab.sc-ir-channel-header:hover{opacity:80%}.tab[data-state='selected'].sc-ir-channel-header,.tab[data-state='selected'].sc-ir-channel-header:hover{color:var(--blue);opacity:100%}.active-indicator.sc-ir-channel-header{padding:0;bottom:0px;position:absolute;height:3px;border-radius:4px;transition:transform 0.3s ease, width 0.3s ease;background:var(--blue)}";const v=g;const w=class{constructor(t){e(this,t);this.tabChanged=i(this,"tabChanged",7);this.headerTitles=[];this.selectedIndex=0}componentDidLoad(){this.updateActiveIndicator()}disconnectedCallback(){if(this.animationFrameId){cancelAnimationFrame(this.animationFrameId)}}handleTabSelection(e){this.selectedIndex=e;this.updateActiveIndicator();this.tabChanged.emit(this.headerTitles[this.selectedIndex].id)}updateActiveIndicator(){if(this.animationFrameId){cancelAnimationFrame(this.animationFrameId)}requestAnimationFrame((()=>{const e=this.el.querySelector(`li.tab[data-state="selected"]`);if(e){const{left:t,width:s}=e.getBoundingClientRect();const i=this.el.getBoundingClientRect().left;const a=t-i;this.activeIndicator.style.width=`${s}px`;this.activeIndicator.style.transform=`translateX(${a}px)`}}))}render(){return t(s,{key:"a512a18c6280c6875a8d5028eb12656bb5c0cae9"},t("ul",{key:"490d4ebcdb6dd37a1834ed5ddccdd7c32ed49d35"},this.headerTitles.map(((e,s)=>t("li",{class:`tab ${e.disabled?"text-light":""}`,key:e.id,onClick:()=>{if(!e.disabled)this.handleTabSelection(s)},"data-disabled":e.disabled,"data-state":this.selectedIndex===s?"selected":""},e.name)))),t("span",{key:"1b5cbbf8e45eb214b8423f466d3d63fddea0b4dc",class:"active-indicator",ref:e=>this.activeIndicator=e}))}get el(){return a(this)}};w.style=v;class x{removedMapping(e,t){let s=[...n.mappedChannels];if(t){const t=f.roomsInfo.find((t=>t.id.toString()===e));s=s.filter((e=>t.rateplans.find((t=>t.id.toString()===e.ir_id))===undefined))}n.mappedChannels=s.filter((t=>t.ir_id!==e))}checkMappingExists(e,t,s){const i=n.mappedChannels.find((t=>t.channel_id===e));if(!i){if(!t){const e=n.mappedChannels.find((e=>e.channel_id.toString()===s));if(!e){return{hide:true,result:undefined,occupancy:undefined}}}return{hide:false,result:undefined,occupancy:undefined}}if(t){const e=f.roomsInfo.find((e=>e.id.toString()===i.ir_id));return{hide:false,occupancy:e.occupancy_default.adult_nbr,result:e}}if(!s){throw new Error("Missing room type id")}const a=n.mappedChannels.find((e=>e.channel_id.toString()===s));const l=f.roomsInfo.find((e=>e.id.toString()===a.ir_id));if(!l){throw new Error("Invalid Room type")}return{hide:false,occupancy:l.occupancy_default.adult_nbr,result:l.rateplans.find((e=>e.id.toString()===i.ir_id))}}getAppropriateRooms(e,t){if(e){const e=f.roomsInfo.filter((e=>n.mappedChannels.find((t=>t.ir_id.toString()===e.id.toString()))===undefined&&e.is_active));return e.map((e=>({id:e.id.toString(),name:e.name})))}if(!t){throw new Error("Missing roomType id")}const s=n.mappedChannels.find((e=>e.channel_id.toString()===t));if(!s){throw new Error("Invalid room type id")}const i=f.roomsInfo.find((e=>e.id.toString()===s.ir_id));return i.rateplans.filter((e=>n.mappedChannels.find((t=>e.id.toString()===t.ir_id))===undefined)).map((e=>({id:e.id.toString(),name:e.name})))}}const y=".sc-ir-channel-mapping-h{display:block;box-sizing:border-box;font-size:14px !important}.map-row.sc-ir-channel-mapping{display:flex;align-items:center;justify-content:space-between}.map-row.sc-ir-channel-mapping span.sc-ir-channel-mapping{width:49%}.submap-text.sc-ir-channel-mapping{padding-left:10px}.text-blue.sc-ir-channel-mapping{color:var(--blue)}.text-red.sc-ir-channel-mapping{color:var(--red)}.refresh-btn.sc-ir-channel-mapping{all:unset;color:var(--blue);cursor:pointer}.selected-map.sc-ir-channel-mapping svg.sc-ir-channel-mapping{margin:0 10px !important;flex-wrap:wrap}.selected-map.sc-ir-channel-mapping{flex:1}.selected-map-title.sc-ir-channel-mapping{flex:1}";const k=y;const z=class{constructor(t){e(this,t);this.mappingService=new x;this.activeMapField="";this.availableRooms=[]}setActiveField(e,t,s){const i=this.mappingService.getAppropriateRooms(t,s);if(i){this.availableRooms=i}this.activeMapField=e}renderMappingStatus(e,s,i,a){var n;if(e.hide){return t("td",null)}if(e.result){return t(l,null,t("td",{class:"px-2 d-sm-none text-blue d-flex align-items-center"},t("span",{class:"m-0 p-0 d-flex align-items-center selected-map"},t("span",{class:"selected-map-title"},e.result.name),t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},t("path",{fill:"var(--blue)",d:"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"})),e.occupancy),t("ir-icon",{class:"ml-1 p-0",onIconClickHandler:()=>this.mappingService.removedMapping(e.result.id.toString(),i)},t("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},t("path",{fill:"var(--blue)",d:"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"})))),t("td",{class:"px-2 d-none text-blue d-sm-flex align-items-center"},t("span",{class:"m-0 p-0 d-flex align-items-center selected-map"},e.result.name,t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},t("path",{fill:"var(--blue)",d:"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"})),e.occupancy),t("ir-icon",{class:"ml-1 p-0",onIconClickHandler:()=>this.mappingService.removedMapping(e.result.id.toString(),i)},t("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},t("path",{fill:"var(--blue)",d:"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"})))))}return t("td",{class:"px-2"},this.activeMapField===s?t("ir-combobox",{autoFocus:true,placeholder:(n=p.entries)===null||n===void 0?void 0:n.Lcz_ConnectedChannel,data:this.availableRooms,onComboboxValueChange:e=>{r(e.detail.data,this.activeMapField,i);this.activeMapField=""}}):t("span",{class:"cursor-pointer text-danger",onClick:()=>this.setActiveField(s,i,a)},p.entries.Lcz_NotMapped))}render(){var e,i,a,c,d;return t(s,{key:"e178bdd96e2468616bcf838e264f34cf453f7a83"},t("div",{key:"1bfc38eed0754b72a1f9f129da99e6de8b77f2be",class:"d-flex w-100 justify-content-end"},t("button",{key:"d5e00a55bbe3eb60d71441b7b760a3eccd81a852",onClick:()=>{h()},class:"btn refresh-btn"},(e=p.entries)===null||e===void 0?void 0:e.Lcz_Refresh)),t("table",{key:"e65f2a3a32299ae4d2cfd48568134486f9f1d894",class:"m-0 p-0 w-100"},t("thead",{key:"99e4fa0dd783fa0c1a42fea604365d3b631e88dc",class:"py-1"},t("tr",{key:"b5eed8a01d6b2ecae4cee1247020de316677115d",class:"py-1"},t("th",{key:"a06bdf500600f9f8d1c3b79d45027d17b00e592c",scope:"col",class:"py-1 pr-3"},(i=n.selectedChannel)===null||i===void 0?void 0:i.name),t("td",{key:"61c554db6de757892db7383a71966effcc1e7b4b"},t("svg",{key:"642ded5d05c8805fc83f91af0f1541526e8f0ca9",xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},t("path",{key:"077403ee9ba95b7c9501a562e9102b01f9437c43",d:"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"}))),t("th",{key:"f0dfe26af3482e358952dd2a4929d9f1befe67ee",scope:"col",class:"px-2"},"Igloorooms"))),t("tbody",{key:"0e64ba684abeb5d3ca8076f64383f6744cc55206"},(d=(c=(a=n.selectedChannel)===null||a===void 0?void 0:a.property)===null||c===void 0?void 0:c.room_types)===null||d===void 0?void 0:d.map((e=>{const s=this.mappingService.checkMappingExists(e.id,true);return t(l,null,t("tr",{key:e.id,class:"mb-1"},t("td",null,e.name),t("td",null,t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},t("path",{d:"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"}))),this.renderMappingStatus(s,e.id,true)),e.rate_plans.map((s=>{const i=this.mappingService.checkMappingExists(s.id,false,e.id);return t("tr",{key:s.id,class:""},t("td",{class:"submap-text mb-1"},s.name),t("td",null,!i.hide&&t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},t("path",{fill:"currentColor",d:"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"}))),this.renderMappingStatus(i,s.id,false,e.id))})),t("tr",null,t("td",{class:"py-1"}),t("td",null),t("td",null)))})))))}};z.style=k;export{u as ir_channel_general,w as ir_channel_header,z as ir_channel_mapping};
//# sourceMappingURL=p-ff712fa5.entry.js.map