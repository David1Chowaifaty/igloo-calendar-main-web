{"version":3,"names":["irInterceptorCss","IrInterceptorStyle0","IrInterceptor","constructor","hostRef","this","handledEndpoints","suppressToastEndpoints","isShown","isLoading","isUnassignedUnit","endpointsCount","isPageLoadingStopped","handleStopPageLoading","e","detail","componentWillLoad","setupAxiosInterceptors","axios","interceptors","request","use","handleRequest","bind","handleError","response","handleResponse","extractEndpoint","url","split","isHandledEndpoint","includes","config","extractedUrl","interceptor_requests","params","data","ExceptionCode","handleOtpResponse","_a","ExceptionMsg","trim","handleResponseExceptions","InterceptorError","showModal","email","name","slice","baseOTPUrl","methodName","body","JSON","parse","METHOD_NAME","console","error","requestUrl","pendingConfig","Promise","resolve","reject","pendingResolve","pendingReject","setTimeout","otpModal","openModal","code","shouldSuppressToast","toast","emit","type","title","description","position","handleOtpFinished","ev","otp","cancelResp","cancelled","status","statusText","headers","Error","retryConfig","Object","assign","resp","err","undefined","render","h","Host","key","class","ref","el","onOtpFinished","irOtpCss","IrOtpStyle0","IrOtp","length","disabled","placeholder","autoFocus","secure","numbersOnly","otpValues","inputRefs","handleInput","event","index","input","target","value","replace","emitChanges","focus","handleKeyDown","preventDefault","handlePaste","pastedData","clipboardData","getData","filteredData","i","Math","min","forEach","idx","nextEmptyIndex","findIndex","val","handleFocus","select","Array","fill","defaultValue","setValue","componentDidLoad","handleLengthChange","newLength","oldLength","otpValue","join","otpChange","every","otpComplete","clear","valueArray","map","_","inputmode","maxlength","autocomplete","onInput","onKeyDown","onPaste","onFocus","irOtpModalCss","IrOtpModalStyle0","IrOtpModal","language","resendTimer","showResend","otpLength","timer","systemService","SystemService","roomService","RoomService","tokenService","Token","otpVerificationSchema","z","object","string","nonempty","handleOtpComplete","ticket","setToken","fetchLocale","handleTicketChange","newValue","oldValue","handleKeyDownChange","dialogRef","open","resetState","setAttribute","startTimer","focusFirstInput","closeModal","close","removeAttribute","clearTimer","getToken","isInitializing","fetchLanguage","timerInterval","window","setInterval","clearInterval","r","first","querySelector","verifyOtp","validateOTP","OTP","otpFinished","resendOtp","resendOTP","log","handleCancelClicked","location","reload","disconnectedCallback","method","locales","entries","Fragment","Lcz_VerifyYourIdentity","Lcz_WeSentYuoVerificationCode","onOtpComplete","Lcz_ResendCode","String","padStart","btn_color","onClickHandler","stopImmediatePropagation","stopPropagation","size","text","btn_styles","Lcz_Cancel","onClick","Lcz_VerifyNow","btn_disabled","irSpinnerCss","IrSpinnerStyle0","IrSpinner","unit","initStyles","handleSpinnerSizeChange","handleSpinnerBorderWidthChange","handleSpinnerUnitChange","handleSpinnerColorChange","applyCssElement","borderWidth","color","style","setProperty"],"sources":["src/components/ir-interceptor/ir-interceptor.css?tag=ir-interceptor&encapsulation=scoped","src/components/ir-interceptor/ir-interceptor.tsx","src/components/ir-otp-modal/ir-otp/ir-otp.css?tag=ir-otp&encapsulation=scoped","src/components/ir-otp-modal/ir-otp/ir-otp.tsx","src/components/ir-otp-modal/ir-otp-modal.css?tag=ir-otp-modal","src/components/ir-otp-modal/ir-otp-modal.tsx","src/components/ui/ir-spinner/ir-spinner.css?tag=ir-spinner&encapsulation=shadow","src/components/ui/ir-spinner/ir-spinner.tsx"],"sourcesContent":["/* .loader {\n  width: 1.25rem;\n  height: 1.25rem;\n  border: 2.5px solid #ffffff;\n  border-bottom-color: transparent;\n  border-radius: 50%;\n  display: inline-block;\n  box-sizing: border-box;\n  animation: rotation 1s linear infinite;\n}\n.loaderContainer {\n  padding: 1rem 2rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 30px;\n  gap: 1rem;\n  background: rgb(36, 36, 36);\n  color: white;\n  box-sizing: border-box;\n  opacity: 0;\n  animation: 300ms ease-in-out fadeIn forwards;\n}\n.loaderContainer p {\n  margin: 0;\n  padding: 0;\n  font-weight: 500;\n}\n.loadingScreenContainer {\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 100vw;\n  z-index: 100000;\n  background: rgba(255, 255, 255, 0.4);\n  pointer-events: all;\n  display: flex;\n  align-items: end;\n  justify-content: center;\n  padding: 2rem;\n  box-sizing: border-box;\n}\n@keyframes fadeIn {\n  0% {\n    opacity: 0;\n    transform: translateY(40px);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0px);\n  }\n} */\n.page-loader {\n  width: 1.25rem;\n  height: 1.25rem;\n  border: 2.5px solid #3f3f3f;\n  border-bottom-color: transparent;\n  border-radius: 50%;\n  display: inline-block;\n  box-sizing: border-box;\n  animation: rotation 1s linear infinite;\n}\n.loaderContainer {\n  padding: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 5px;\n  background: white;\n}\n.loadingScreenContainer {\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 100vw;\n  z-index: 100000;\n  background: rgba(0, 0, 0, 0.2);\n  pointer-events: all;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n@keyframes rotation {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n","import { Component, Event, EventEmitter, Host, Listen, Prop, State, h } from '@stencil/core';\nimport axios, { AxiosRequestConfig, AxiosResponse } from 'axios';\nimport { IToast } from '@components/ui/ir-toast/toast';\nimport interceptor_requests from '@/stores/ir-interceptor.store';\nimport { InterceptorError } from './InterceptorError';\n\n@Component({\n  tag: 'ir-interceptor',\n  styleUrl: 'ir-interceptor.css',\n  scoped: true,\n})\nexport class IrInterceptor {\n  /**\n   * List of endpoint paths that should trigger loader logic and OTP handling.\n   */\n  @Prop({ reflect: true }) handledEndpoints = ['/Get_Exposed_Calendar', '/ReAllocate_Exposed_Room', '/Get_Exposed_Bookings', '/UnBlock_Exposed_Unit'];\n\n  /**\n   * List of endpoints for which to suppress toast messages.\n   */\n  @Prop() suppressToastEndpoints: string[] = [];\n\n  /**\n   * Indicates whether the loader is visible.\n   */\n  @State() isShown = false;\n\n  /**\n   * Global loading indicator toggle.\n   */\n  @State() isLoading = false;\n\n  /**\n   * Indicates if the intercepted request involves unassigned units.\n   */\n  @State() isUnassignedUnit = false;\n\n  /**\n   * Count of `/Get_Exposed_Calendar` calls in progress.\n   */\n  @State() endpointsCount = 0;\n\n  /**\n   * Identifier of the endpoint that manually disabled page loader.\n   */\n  @State() isPageLoadingStopped: string | null = null;\n\n  /**\n   * Controls visibility of the OTP modal.\n   */\n  @State() showModal: boolean;\n\n  /**\n   * Request path (used in OTP handling).\n   */\n  @State() requestUrl: string;\n\n  /**\n   * The OTP endpoint path.\n   */\n  @State() baseOTPUrl: string;\n\n  /**\n   * Email for OTP prompt.\n   */\n  @State() email: string;\n\n  /**\n   * Emits a toast notification (`type`, `title`, `description`, `position`).\n   */\n  @Event({ bubbles: true, composed: true }) toast: EventEmitter<IToast>;\n\n  private otpModal: HTMLIrOtpModalElement;\n\n  private pendingConfig?: AxiosRequestConfig;\n  private pendingResolve?: (resp: AxiosResponse) => void;\n  private pendingReject?: (err: any) => void;\n  private response?: AxiosResponse;\n\n  @Listen('preventPageLoad', { target: 'body' })\n  handleStopPageLoading(e: CustomEvent) {\n    this.isLoading = false;\n    this.isPageLoadingStopped = e.detail;\n  }\n  componentWillLoad() {\n    this.setupAxiosInterceptors();\n  }\n  /**\n   * Sets up Axios request and response interceptors.\n   */\n  private setupAxiosInterceptors() {\n    axios.interceptors.request.use(this.handleRequest.bind(this), this.handleError.bind(this));\n    axios.interceptors.response.use(this.handleResponse.bind(this), this.handleError.bind(this));\n  }\n  /**\n   * Removes query params from URL for consistent endpoint matching.\n   */\n  private extractEndpoint(url: string): string {\n    return url.split('?')[0];\n  }\n\n  /**\n   * Returns true if the given endpoint is listed as \"handled\".\n   */\n  private isHandledEndpoint(url: string): boolean {\n    return this.handledEndpoints.includes(url);\n  }\n  /**\n   * Handles outbound Axios requests.\n   * - Triggers global loader for certain endpoints\n   * - Tracks `/Get_Exposed_Calendar` calls separately\n   */\n  private handleRequest(config: AxiosRequestConfig) {\n    const extractedUrl = this.extractEndpoint(config.url);\n    interceptor_requests[extractedUrl] = 'pending';\n    config.params = config.params || {};\n    // if (this.ticket) {\n    //   config.params.Ticket = this.ticket;\n    // }\n    if (this.isHandledEndpoint(extractedUrl) && this.isPageLoadingStopped !== extractedUrl) {\n      if (extractedUrl !== '/Get_Exposed_Calendar') {\n        this.isLoading = true;\n      } else {\n        if (this.endpointsCount > 0) {\n          this.isLoading = true;\n        }\n      }\n    }\n    if (extractedUrl === '/Get_Exposed_Calendar') {\n      this.endpointsCount = this.endpointsCount + 1;\n    }\n    return config;\n  }\n  /**\n   * Handles inbound Axios responses:\n   * - Resets loader\n   * - Handles OTP flows and exception messages\n   */\n  private async handleResponse(response: AxiosResponse) {\n    const extractedUrl = this.extractEndpoint(response.config.url);\n    if (this.isHandledEndpoint(extractedUrl)) {\n      this.isLoading = false;\n      this.isPageLoadingStopped = null;\n    }\n    interceptor_requests[extractedUrl] = 'done';\n    if (extractedUrl === '/Validate_Exposed_OTP') {\n      return response;\n    }\n    if (response.data.ExceptionCode === 'OTP') {\n      return this.handleOtpResponse({ response, extractedUrl });\n    }\n    if (response.data.ExceptionMsg?.trim()) {\n      this.handleResponseExceptions({ response, extractedUrl });\n    }\n    return response;\n  }\n  /**\n   * Handles and throws known API exception messages.\n   */\n  private handleResponseExceptions({ response, extractedUrl }: { response: AxiosResponse; extractedUrl: string }) {\n    this.handleError(response.data.ExceptionMsg, extractedUrl, response.data.ExceptionCode);\n    throw new InterceptorError(response.data.ExceptionMsg, response.data.ExceptionCode);\n  }\n  /**\n   * Handles OTP-required API responses:\n   * - Shows OTP modal\n   * - Stores request context\n   * - Defers resolution to OTP modal\n   */\n  private handleOtpResponse({ extractedUrl, response }: { response: AxiosResponse; extractedUrl: string }) {\n    this.showModal = true;\n    this.email = response.data.ExceptionMsg;\n    const name = extractedUrl.slice(1);\n    this.baseOTPUrl = name;\n    if (name === 'Check_OTP_Necessity') {\n      let methodName: string;\n      try {\n        const body = typeof response.config.data === 'string' ? JSON.parse(response.config.data) : response.config.data;\n        methodName = body.METHOD_NAME;\n      } catch (e) {\n        console.error('Failed to parse request body for METHOD_NAME', e);\n        methodName = name; // fallback\n      }\n      this.requestUrl = methodName;\n    } else {\n      this.requestUrl = name;\n    }\n\n    this.pendingConfig = response.config;\n    this.response = response;\n    return new Promise<AxiosResponse>((resolve, reject) => {\n      this.pendingResolve = resolve;\n      this.pendingReject = reject;\n      setTimeout(() => {\n        this.otpModal?.openModal();\n      }, 10);\n    });\n  }\n  /**\n   * Displays error toasts unless the endpoint is configured to suppress them.\n   */\n  private handleError(error: string, url: string, code: string) {\n    const shouldSuppressToast = this.suppressToastEndpoints.includes(url);\n    if (!shouldSuppressToast || (shouldSuppressToast && !code)) {\n      this.toast.emit({\n        type: 'error',\n        title: error,\n        description: '',\n        position: 'top-right',\n      });\n    }\n    return Promise.reject(error);\n  }\n  /**\n   * Handles the OTP modal completion.\n   * Retries the request or cancels based on user action.\n   */\n  private async handleOtpFinished(ev: CustomEvent) {\n    if (!this.pendingConfig || !this.pendingResolve || !this.pendingReject) {\n      return;\n    }\n\n    const { otp, type } = ev.detail;\n    if (type === 'cancel') {\n      const cancelResp = {\n        config: this.pendingConfig,\n        data: { cancelled: true, baseOTPUrl: this.baseOTPUrl },\n        status: 0,\n        statusText: 'OTP Cancelled',\n        headers: {},\n        request: {},\n      } as AxiosResponse;\n      this.pendingResolve(cancelResp);\n    } else if (type === 'success') {\n      if (!otp) {\n        this.pendingReject(new Error('OTP cancelled by user'));\n      } else if (this.baseOTPUrl === 'Check_OTP_Necessity') {\n        // don't resend, just resolve with the original response\n        this.pendingResolve(this.response!);\n      } else {\n        try {\n          const retryConfig: AxiosRequestConfig = {\n            ...this.pendingConfig,\n            data: typeof this.pendingConfig.data === 'string' ? JSON.parse(this.pendingConfig.data) : this.pendingConfig.data || {},\n          };\n          const resp = await axios.request(retryConfig);\n          this.pendingResolve(resp);\n        } catch (err) {\n          this.pendingReject(err);\n        }\n      }\n    }\n\n    // common clean-up\n    this.pendingConfig = undefined;\n    this.pendingResolve = undefined;\n    this.pendingReject = undefined;\n    this.showModal = false;\n    this.baseOTPUrl = null;\n  }\n\n  render() {\n    return (\n      <Host>\n        {this.isLoading && !this.isPageLoadingStopped && (\n          <div class=\"loadingScreenContainer\">\n            <div class=\"loaderContainer\">\n              <span class=\"page-loader\"></span>\n            </div>\n          </div>\n        )}\n        {this.showModal && (\n          <ir-otp-modal\n            email={this.email}\n            baseOTPUrl={this.baseOTPUrl}\n            requestUrl={this.requestUrl}\n            ref={el => (this.otpModal = el)}\n            onOtpFinished={this.handleOtpFinished.bind(this)}\n          ></ir-otp-modal>\n        )}\n      </Host>\n    );\n  }\n}\n",".otp-input-wrapper {\n  display: flex;\n  gap: 0.5rem;\n  justify-content: space-evenly;\n}\n\n.otp-digit {\n  --otp-size: 3rem;\n  width: var(--otp-size) !important;\n  height: var(--otp-size) !important;\n  padding: 0;\n  font-size: 24px;\n  font-weight: 500;\n  text-align: center;\n  background-color: #fff;\n  padding: 0 !important;\n}\n\n.otp-digit:disabled {\n  background-color: #e9ecef;\n  cursor: not-allowed;\n}\n\n/* Remove up/down arrows from number inputs */\ninput[type='number']::-webkit-inner-spin-button,\ninput[type='number']::-webkit-outer-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n\ninput[type='number'] {\n  -moz-appearance: textfield;\n}\n\n/* Make inputs responsive */\n@media (max-width: 480px) {\n  .otp-digit {\n    width: 35px;\n    height: 45px;\n    font-size: 20px;\n  }\n\n  .otp-input-wrapper {\n    gap: 6px;\n  }\n}\n\n@media (max-width: 360px) {\n  .otp-digit {\n    width: 30px;\n    height: 40px;\n    font-size: 18px;\n  }\n\n  .otp-input-wrapper {\n    gap: 4px;\n  }\n}\n","import { Component, Event, EventEmitter, h, Host, Prop, State, Watch } from '@stencil/core';\n\n@Component({\n  tag: 'ir-otp',\n  styleUrl: 'ir-otp.css',\n  scoped: true,\n})\nexport class IrOtp {\n  /**\n   * The length of the OTP code\n   */\n  @Prop() length: number = 6;\n  /**\n   * The default OTP code\n   */\n  @Prop() defaultValue: string;\n\n  /**\n   * Whether the input is disabled\n   */\n  @Prop() disabled: boolean = false;\n\n  /**\n   * Placeholder character to display\n   */\n  @Prop() placeholder: string = '';\n\n  /**\n   * Input type - can be 'text', 'password', 'number', or 'tel'\n   */\n  @Prop() type: 'text' | 'password' | 'number' | 'tel' = 'number';\n\n  /**\n   * Auto focus on the first input when component loads\n   */\n  @Prop() autoFocus: boolean = true;\n\n  /**\n   * Whether to mask the input (show dots instead of text)\n   */\n  @Prop() secure: boolean = false;\n\n  /**\n   * Allow only numbers (0-9) as input\n   */\n  @Prop() numbersOnly: boolean = false;\n\n  /**\n   * Event emitted when the OTP value changes\n   */\n  @Event() otpChange: EventEmitter<string>;\n\n  /**\n   * Event emitted when the OTP is complete\n   */\n  @Event() otpComplete: EventEmitter<string>;\n\n  /**\n   * Current OTP value as an array of characters\n   */\n  @State() otpValues: string[] = [];\n\n  /**\n   * Reference to input elements\n   */\n  private inputRefs: HTMLInputElement[] = [];\n\n  /**\n   * Initialize the component\n   */\n  componentWillLoad() {\n    this.otpValues = Array(this.length).fill('');\n    if (this.defaultValue) {\n      this.setValue(this.defaultValue);\n    }\n  }\n\n  /**\n   * Focus the first input after component renders\n   */\n  componentDidLoad() {\n    if (this.autoFocus && this.inputRefs[0]) {\n      setTimeout(() => {\n        this.inputRefs[0].focus();\n      }, 0);\n    }\n  }\n\n  /**\n   * Watch for length changes and update the OTP values array\n   */\n  @Watch('length')\n  handleLengthChange(newLength: number) {\n    if (newLength < 1) return;\n\n    const oldLength = this.otpValues.length;\n\n    if (newLength > oldLength) {\n      // Add empty slots\n      this.otpValues = [...this.otpValues, ...Array(newLength - oldLength).fill('')];\n    } else if (newLength < oldLength) {\n      // Remove extra slots\n      this.otpValues = this.otpValues.slice(0, newLength);\n    }\n\n    this.emitChanges();\n  }\n\n  /**\n   * Update the current OTP value at the specified index\n   */\n  handleInput = (event: Event, index: number) => {\n    const input = event.target as HTMLInputElement;\n    let value = input.value;\n\n    // For number input type, restrict to digits only\n    if (this.numbersOnly) {\n      value = value.replace(/[^0-9]/g, '');\n    }\n\n    // Take only the last character if someone enters multiple\n    if (value.length > 1) {\n      value = value.slice(-1);\n      input.value = value;\n    }\n\n    this.otpValues[index] = value;\n    this.emitChanges();\n\n    // Move to next input if this one is filled\n    if (value && index < this.length - 1) {\n      this.inputRefs[index + 1].focus();\n    }\n  };\n\n  /**\n   * Handle keyboard navigation\n   */\n  handleKeyDown = (event: KeyboardEvent, index: number) => {\n    switch (event.key) {\n      case 'Backspace':\n        if (!this.otpValues[index] && index > 0) {\n          // If current field is empty and backspace is pressed, go to previous field\n          this.inputRefs[index - 1].focus();\n          // Prevent default to avoid browser navigation\n          event.preventDefault();\n        }\n        break;\n      case 'Delete':\n        // Clear current input on delete\n        this.otpValues[index] = '';\n        this.emitChanges();\n        break;\n      case 'ArrowLeft':\n        // Move to previous input on left arrow\n        if (index > 0) {\n          this.inputRefs[index - 1].focus();\n          event.preventDefault();\n        }\n        break;\n      case 'ArrowRight':\n        // Move to next input on right arrow\n        if (index < this.length - 1) {\n          this.inputRefs[index + 1].focus();\n          event.preventDefault();\n        }\n        break;\n      case 'Home':\n        // Move to first input\n        this.inputRefs[0].focus();\n        event.preventDefault();\n        break;\n      case 'End':\n        // Move to last input\n        this.inputRefs[this.length - 1].focus();\n        event.preventDefault();\n        break;\n    }\n  };\n\n  /**\n   * Handle paste event to populate the OTP fields\n   */\n  handlePaste = (event: ClipboardEvent, index: number) => {\n    event.preventDefault();\n    const pastedData = event.clipboardData?.getData('text') || '';\n\n    // If numbersOnly is enabled, filter non-number characters\n    const filteredData = this.numbersOnly ? pastedData.replace(/[^0-9]/g, '') : pastedData;\n\n    // Fill OTP values with pasted data\n    for (let i = 0; i < Math.min(filteredData.length, this.length - index); i++) {\n      this.otpValues[index + i] = filteredData[i];\n    }\n\n    // Update inputs with new values\n    this.inputRefs.forEach((input, idx) => {\n      input.value = this.otpValues[idx] || '';\n    });\n\n    // Focus on the next empty input or the last one\n    const nextEmptyIndex = this.otpValues.findIndex(val => !val);\n    if (nextEmptyIndex !== -1 && nextEmptyIndex < this.length) {\n      this.inputRefs[nextEmptyIndex].focus();\n    } else {\n      this.inputRefs[this.length - 1].focus();\n    }\n\n    this.emitChanges();\n  };\n\n  /**\n   * Focus handler to select all text when focused\n   */\n  handleFocus = (event: FocusEvent) => {\n    const input = event.target as HTMLInputElement;\n    if (input.value) {\n      setTimeout(() => input.select(), 0);\n    }\n  };\n\n  /**\n   * Helper method to emit change events\n   */\n  private emitChanges() {\n    const otpValue = this.otpValues.join('');\n    this.otpChange.emit(otpValue);\n\n    // If all fields are filled, trigger the complete event\n    if (this.otpValues.every(val => val !== '') && this.otpValues.length === this.length) {\n      this.otpComplete.emit(otpValue);\n    }\n  }\n\n  /**\n   * Manually clear all inputs\n   */\n  public clear() {\n    this.otpValues = Array(this.length).fill('');\n    this.inputRefs.forEach(input => {\n      input.value = '';\n    });\n    this.emitChanges();\n\n    // Focus the first input after clearing\n    if (this.inputRefs[0]) {\n      this.inputRefs[0].focus();\n    }\n  }\n\n  /**\n   * Set OTP values programmatically\n   */\n  public setValue(value: string) {\n    const valueArray = value.split('');\n\n    for (let i = 0; i < this.length; i++) {\n      this.otpValues[i] = i < valueArray.length ? valueArray[i] : '';\n    }\n\n    // Update the actual input elements\n    this.inputRefs.forEach((input, idx) => {\n      input.value = this.otpValues[idx] || '';\n    });\n\n    this.emitChanges();\n  }\n\n  render() {\n    return (\n      <Host class=\"otp-input-container\">\n        <div class=\"otp-input-wrapper\">\n          {Array(this.length)\n            .fill(null)\n            .map((_, index) => (\n              <input\n                ref={el => (this.inputRefs[index] = el as HTMLInputElement)}\n                type={this.type}\n                inputmode={this.numbersOnly ? 'numeric' : 'text'}\n                class=\"otp-digit form-control input-sm\"\n                maxlength=\"1\"\n                placeholder={this.placeholder}\n                disabled={this.disabled}\n                autocomplete=\"one-time-code\"\n                value={this.otpValues[index]}\n                onInput={e => this.handleInput(e, index)}\n                onKeyDown={e => this.handleKeyDown(e, index)}\n                onPaste={e => this.handlePaste(e, index)}\n                onFocus={this.handleFocus}\n                aria-label={`Digit ${index + 1} of ${this.length}`}\n              />\n            ))}\n        </div>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n:root {\n  --otp-modal-padding: 1.5rem;\n}\n.modal-backdrop {\n  background-color: rgba(0, 0, 0, 0.5) !important;\n}\n.otp-modal-header {\n  border-bottom: 0px !important;\n}\n.otp-modal {\n  z-index: 9999999 !important;\n  border: none;\n  padding: 0 !important;\n  box-sizing: border-box;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 0.35rem;\n  outline: 0;\n}\n.otp-modal-content {\n  background-color: white;\n  border: none;\n  border-radius: 0.35rem;\n  outline: 0;\n}\n.otp-modal-title {\n  margin-bottom: 0;\n  line-height: 1.45;\n}\n.otp-modal-body {\n  max-height: 100% !important;\n  padding: 0 var(--otp-modal-padding);\n}\n.otp-modal-header {\n  display: flex;\n  justify-content: space-between;\n  padding: var(--otp-modal-padding);\n  padding-bottom: 1rem;\n  border-top-left-radius: 0.35rem;\n  border-top-right-radius: 0.35rem;\n}\n.otp-modal-dialog {\n  z-index: 9999999 !important;\n}\n.otp-modal-footer {\n  border-top: 0 !important;\n  display: flex;\n  gap: 0.5rem;\n  flex-direction: column;\n  padding: var(--otp-modal-padding);\n  padding-top: 0.5rem !important;\n}\n.verification-message {\n  max-width: 90%;\n}\n.modal-loading-container {\n  height: 250px;\n  width: 80vw;\n}\n@media (min-width: 768px) {\n  .otp-modal-dialog,\n  .otp-modal-content {\n    width: fit-content !important;\n  }\n  .otp-modal-footer {\n    flex-direction: row;\n    align-items: center;\n  }\n  .modal-loading-container {\n    width: 380px !important;\n  }\n  .verification-message {\n    max-width: 350px !important;\n  }\n}\n","import Token from '@/models/Token';\nimport { RoomService } from '@/services/room.service';\nimport { SystemService } from '@/services/system.service';\nimport locales from '@/stores/locales.store';\nimport { Component, Event, EventEmitter, Fragment, Host, Listen, Method, Prop, State, Watch, h } from '@stencil/core';\nimport { z } from 'zod';\n\n@Component({\n  tag: 'ir-otp-modal',\n  styleUrl: 'ir-otp-modal.css',\n  scoped: false,\n})\nexport class IrOtpModal {\n  @Prop() language: string = 'en';\n  /** Number of seconds to wait before allowing OTP resend */\n  @Prop() resendTimer = 60;\n\n  /** URL or endpoint used to validate the OTP */\n  @Prop() requestUrl: string;\n  /** URL or endpoint used to validate the OTP */\n  @Prop() baseOTPUrl: string;\n\n  /** Whether the resend option should be visible */\n  @Prop() showResend: boolean = true;\n\n  /** User's email address to display in the modal and send the OTP to */\n  @Prop() email: string;\n\n  /** Number of digits the OTP should have */\n  @Prop() otpLength: number = 6;\n\n  /** ticket for verifying and resending the verification code */\n  @Prop() ticket: string;\n\n  @State() otp = '';\n  @State() error = '';\n  @State() isLoading = false;\n  @State() timer = 60;\n\n  private dialogRef: HTMLDialogElement;\n\n  private timerInterval: number;\n  private systemService = new SystemService();\n  private roomService = new RoomService();\n  private tokenService = new Token();\n\n  private otpVerificationSchema = z.object({ email: z.string().nonempty(), requestUrl: z.string().nonempty(), otp: z.string().length(this.otpLength) });\n\n  /** Emits the final OTP (or empty on cancel) */\n  @Event({ bubbles: true, composed: true }) otpFinished: EventEmitter<{\n    otp: string;\n    type: 'success' | 'cancelled';\n  }>;\n  @State() isInitializing: boolean;\n\n  componentWillLoad() {\n    if (this.ticket) {\n      this.tokenService.setToken(this.ticket);\n    }\n    this.fetchLocale();\n  }\n\n  @Watch('ticket')\n  handleTicketChange(newValue: string, oldValue: string) {\n    if (newValue !== oldValue) {\n      this.tokenService.setToken(newValue);\n      this.fetchLocale();\n    }\n  }\n\n  @Listen('keydown', { target: 'document' })\n  handleKeyDownChange(e: KeyboardEvent) {\n    if (e.key === 'Escape' && this.dialogRef?.open) {\n      e.preventDefault();\n    }\n  }\n  /** Open & reset everything */\n  @Method()\n  async openModal() {\n    this.resetState();\n    // $(this.modalRef).modal({ backdrop: 'static', keyboard: false });\n    // $(this.modalRef).modal('show');\n    if (typeof this.dialogRef.showModal === 'function') {\n      this.dialogRef.showModal();\n    } else {\n      // fallback for browsers without dialog support\n      this.dialogRef.setAttribute('open', '');\n    }\n    if (this.showResend) this.startTimer();\n    await this.focusFirstInput();\n  }\n\n  /** Hide & clear timer */\n  @Method()\n  async closeModal() {\n    // $(this.modalRef).modal('hide');\n    if (typeof this.dialogRef.close === 'function') {\n      this.dialogRef.close();\n    } else {\n      this.dialogRef.removeAttribute('open');\n    }\n    this.otp = null;\n    this.clearTimer();\n  }\n  private async fetchLocale() {\n    if (!this.tokenService.getToken()) {\n      return;\n    }\n    this.isInitializing = true;\n    await this.roomService.fetchLanguage(this.language, ['_USER_MGT']);\n    this.isInitializing = false;\n  }\n\n  private resetState() {\n    this.otp = '';\n    this.error = '';\n    this.isLoading = false;\n    this.timer = 60;\n    this.clearTimer();\n  }\n\n  private startTimer() {\n    this.clearTimer();\n    this.timerInterval = window.setInterval(() => {\n      if (this.timer > 0) {\n        this.timer--;\n      } else {\n        this.clearTimer();\n      }\n    }, 1000);\n  }\n\n  private clearTimer() {\n    if (this.timerInterval) {\n      clearInterval(this.timerInterval);\n      this.timerInterval = null;\n    }\n  }\n\n  private async focusFirstInput() {\n    await new Promise(r => setTimeout(r, 50));\n    const first = this.dialogRef.querySelector('input');\n    first && (first as HTMLInputElement).focus();\n  }\n\n  private handleOtpComplete = (e: CustomEvent<string>) => {\n    this.error = '';\n    this.otp = e.detail;\n  };\n\n  private async verifyOtp() {\n    if (this.otp.length < this.otpLength) return;\n    this.isLoading = true;\n    this.otpVerificationSchema.parse({\n      otp: this.otp,\n      requestUrl: this.requestUrl,\n      email: this.email,\n    });\n    try {\n      await this.systemService.validateOTP({ METHOD_NAME: this.requestUrl, OTP: this.otp });\n      this.otpFinished.emit({ otp: this.otp, type: 'success' });\n      this.closeModal();\n    } catch (err) {\n      this.error = 'Verification failed. Please try again.';\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  private async resendOtp() {\n    if (this.timer > 0) return;\n    // Resend otp\n    try {\n      await this.systemService.resendOTP({ METHOD_NAME: this.requestUrl });\n      this.timer = 60;\n      this.startTimer();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  private handleCancelClicked() {\n    if (this.baseOTPUrl === 'Check_OTP_Necessity') {\n      this.closeModal();\n      this.otpFinished.emit({\n        otp: null,\n        type: 'cancelled',\n      });\n      return;\n    }\n    window.location.reload();\n  }\n  disconnectedCallback() {\n    this.clearTimer();\n  }\n  render() {\n    return (\n      <Host>\n        <dialog ref={el => (this.dialogRef = el)} class=\"otp-modal\" aria-modal=\"true\">\n          <form method=\"dialog\" class=\"otp-modal-content\">\n            {this.isInitializing || !locales.entries ? (\n              <div class={'d-flex align-items-center justify-content-center modal-loading-container'}>\n                <ir-spinner></ir-spinner>\n              </div>\n            ) : (\n              <Fragment>\n                <header class=\"otp-modal-header\">\n                  <h5 class=\"otp-modal-title\">{locales.entries.Lcz_VerifyYourIdentity}</h5>\n                </header>\n\n                <section class=\"otp-modal-body d-flex align-items-center flex-column\">\n                  <p class=\"verification-message text-truncate\">\n                    {locales.entries.Lcz_WeSentYuoVerificationCode} {this.email}\n                  </p>\n                  <ir-otp autoFocus length={this.otpLength} defaultValue={this.otp} onOtpComplete={this.handleOtpComplete}></ir-otp>\n\n                  {this.error && <p class=\"text-danger small mt-1 p-0 mb-0\">{this.error}</p>}\n\n                  {this.showResend && (\n                    <Fragment>\n                      {this.timer > 0 ? (\n                        <p class=\"small mt-1\">\n                          {locales.entries.Lcz_ResendCode} 00:{String(this.timer).padStart(2, '0')}\n                        </p>\n                      ) : (\n                        <ir-button\n                          class=\"mt-1\"\n                          btn_color=\"link\"\n                          onClickHandler={e => {\n                            e.stopImmediatePropagation();\n                            e.stopPropagation();\n                            this.resendOtp();\n                          }}\n                          size=\"sm\"\n                          text={'Didnâ€™t receive code? Resend'}\n                        ></ir-button>\n                      )}\n                    </Fragment>\n                  )}\n                </section>\n\n                <footer class=\"otp-modal-footer justify-content-auto\">\n                  <ir-button class=\"w-100\" btn_styles=\"flex-fill\" text={locales.entries.Lcz_Cancel} btn_color=\"secondary\" onClick={this.handleCancelClicked.bind(this)}></ir-button>\n                  <ir-button\n                    class=\"w-100\"\n                    btn_styles=\"flex-fill\"\n                    text={locales.entries.Lcz_VerifyNow}\n                    isLoading={this.isLoading}\n                    btn_disabled={this.otp?.length < this.otpLength || this.isLoading}\n                    onClick={() => this.verifyOtp()}\n                  ></ir-button>\n                </footer>\n              </Fragment>\n            )}\n          </form>\n        </dialog>\n      </Host>\n    );\n  }\n}\n",":host {\n  width: var(--ir-spinner-size, 1.25rem);\n  height: var(--ir-spinner-size, 1.25rem);\n  border: var(--ir-spinner-border-width, 2.5px) solid var(--ir-spinner-color, #3f3f3f);\n  border-bottom-color: transparent;\n  border-radius: 50%;\n  display: inline-block;\n  box-sizing: border-box;\n  animation: rotation 1s linear infinite;\n}\n\n@keyframes rotation {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n","import { Component, Element, Host, Prop, Watch, h } from '@stencil/core';\n\n@Component({\n  tag: 'ir-spinner',\n  styleUrl: 'ir-spinner.css',\n  shadow: true,\n})\nexport class IrSpinner {\n  @Element() el: HTMLIrSpinnerElement;\n  /**\n   * Size of the spinner (diameter).\n   * Example: `size={2}` with `unit=\"rem\"` sets spinner to `2rem`.\n   */\n  @Prop() size: number;\n\n  /**\n   * Thickness of the spinner's border.\n   * Example: `borderWidth={4}` renders a `4px` or `4rem` thick border.\n   */\n  @Prop() borderWidth: number;\n\n  /**\n   * CSS unit used for `size` and `borderWidth`.\n   * Can be `'px'` or `'rem'`.\n   */\n  @Prop() unit: 'px' | 'rem' = 'rem';\n\n  /**\n   * Color of the spinner.\n   * Accepts any valid CSS color string.\n   */\n  @Prop() color: string;\n\n  componentWillLoad() {\n    this.initStyles();\n  }\n  @Watch('size')\n  handleSpinnerSizeChange() {\n    this.initStyles();\n  }\n  @Watch('borderWidth')\n  handleSpinnerBorderWidthChange() {\n    this.initStyles();\n  }\n  @Watch('unit')\n  handleSpinnerUnitChange() {\n    this.initStyles();\n  }\n  @Watch('color')\n  handleSpinnerColorChange() {\n    this.initStyles();\n  }\n  /**\n   * Applies CSS custom properties based on current prop values.\n   */\n  private initStyles() {\n    if (this.size) {\n      this.applyCssElement(`${this.size}${this.unit}`, '--ir-spinner-size');\n    }\n    if (this.borderWidth) {\n      this.applyCssElement(`${this.borderWidth}${this.unit}`, '--ir-spinner-size');\n    }\n    if (this.color) {\n      this.applyCssElement(`${this.color}`, '--ir-spinner-color');\n    }\n  }\n  /**\n   * Helper function to set CSS custom properties on the host element.\n   *\n   * @param value - The CSS value to apply\n   * @param key - The CSS custom property name (e.g., `--ir-spinner-size`)\n   */\n  private applyCssElement(value: string, key: '--ir-spinner-color' | '--ir-spinner-border-width' | '--ir-spinner-size' | (string & {})) {\n    this.el.style.setProperty(key, value);\n  }\n  render() {\n    return <Host></Host>;\n  }\n}\n"],"mappings":"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","ignoreList":[]}