import{r as e,c as t,h as i,H as s}from"./p-d239357b.js";import{B as a}from"./p-ae6a57a8.js";import{l}from"./p-4e493fea.js";import"./p-bf44a732.js";import"./p-748cfd41.js";import"./p-ae2f332f.js";import"./p-6c4ba7c0.js";import"./p-99cb260a.js";import"./p-c5894a47.js";import"./p-8af1cf5e.js";const c=".sc-igl-block-dates-view-h{display:block}.sc-igl-block-dates-view-h .controlContainer.sc-igl-block-dates-view{width:24px}.sc-igl-block-dates-view-h .checkBoxContainer.sc-igl-block-dates-view input.sc-igl-block-dates-view{height:1.2rem !important;width:30px}.releaseTime.sc-igl-block-dates-view{padding-left:5px}.out-of-service-label.sc-igl-block-dates-view{margin-left:5px !important}";const d=c;const n=class{constructor(i){e(this,i);this.dataUpdateEvent=t(this,"dataUpdateEvent",7)}defaultData;fromDate;toDate;entryDate;entryHour;isEventHover=false;entryMinute;renderAgain=false;dataUpdateEvent;blockDatesData={RELEASE_AFTER_HOURS:0,OPTIONAL_REASON:"",OUT_OF_SERVICE:false};releaseList=[];bookingService=new a;async componentWillLoad(){try{this.releaseList=await this.bookingService.getBlockedInfo();if(this.defaultData){this.blockDatesData={...this.defaultData}}else{this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(this.releaseList[0].CODE_NAME);this.emitData()}}catch(e){}}handleOptionalReason(e){this.blockDatesData.OPTIONAL_REASON=e.target.value;this.emitData()}handleReleaseAfterChange(e){if(this.entryDate)this.entryDate=undefined;this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(e.target.value);this.renderPage();this.emitData()}emitData(){this.dataUpdateEvent.emit({key:"blockDatesData",data:{...this.blockDatesData}})}getReleaseHoursString(){let e=this.entryDate?new Date(this.entryDate):new Date;if(this.entryDate&&this.entryHour&&this.entryMinute){e.setHours(this.entryHour,this.entryMinute,0,0)}else{e.setHours(e.getHours()+this.blockDatesData.RELEASE_AFTER_HOURS,e.getMinutes(),0,0)}return e.toLocaleString("default",{month:"short"})+" "+e.getDate()+", "+this.formatNumber(e.getHours())+":"+this.formatNumber(e.getMinutes())}formatNumber(e){return e<10?`0${e}`:e}handleOutOfService(e){this.blockDatesData.OUT_OF_SERVICE=e.target.checked;if(this.blockDatesData.OUT_OF_SERVICE){this.blockDatesData.OPTIONAL_REASON="";this.blockDatesData.RELEASE_AFTER_HOURS=0}this.renderPage();this.emitData()}renderPage(){this.renderAgain=!this.renderAgain}render(){return i(s,{key:"f68f28b892336bfbde96aa3303b6f3f68b1a56f7"},i("div",{key:"751ab9e4fd878fe3c4b0ba1bc7eb544296054360",class:`m-0 p-0 mb-1`},i("div",{key:"5cfa6fe547fe5f1967b66cf667ddf1188209f16a",class:"text-left p-0"},i("ir-date-view",{key:"5a5e5dc4634d3fa29d29a58b802d1afb9e2866ea",from_date:this.fromDate,dateOption:"YYYY-MM-DD",showDateDifference:false,to_date:this.toDate}))),i("div",{key:"769ec4f32e0687e1f68a18225792bed552795dba",class:` mb-1 text-left ${this.isEventHover&&"p-0"}`},i("div",{key:"5be4e69ed6a901f0f82d280c6a79f00fd09c00b1",class:"mb-1 "},i("label",{key:"0d4b1d5860c6715d65581d474c8f8faf6e20cb05",class:"p-0 text-bold-700 font-medium-1 m-0 align-middle"},l.entries.Lcz_Reason,":"),i("div",{key:"6aba24d25cc23e2cee9858f3934db2a77e0a7a2c",class:"p-0 m-0 pr-1  controlContainer checkBoxContainer d-inline-block align-middle"},i("input",{key:"af5a30f0a8e8eca50132dddd584db20c5608d740",class:"form-control",type:"checkbox",checked:this.blockDatesData.OUT_OF_SERVICE,id:"userinput6",onChange:e=>this.handleOutOfService(e)})),i("span",{key:"2ae5cb8034377c1cde1b94934ac0904a05cb6738",class:"align-middle out-of-service-label"},l.entries.Lcz_OutOfservice)),!this.blockDatesData.OUT_OF_SERVICE?i("div",null,i("div",{class:"mb-1 d-flex  align-items-center"},i("span",{class:"align-middle"},l.entries.Lcz_Or," "),i("div",{class:"d-inline-flex col pr-0 align-middle"},i("input",{class:"form-control",type:"text",placeholder:l.entries.Lcz_OptionalReason,id:"optReason",value:this.blockDatesData.OPTIONAL_REASON,onInput:e=>this.handleOptionalReason(e)}))),i("div",{class:"mb-1 w-100 pr-0 "},i("span",{class:"text-bold-700 font-medium-1"},l.entries.Lcz_AutomaticReleaseIn,": "),i("div",{class:"d-inline-block"},i("select",{class:"form-control input-sm",id:"zSmallSelect",onChange:e=>this.handleReleaseAfterChange(e)},this.releaseList.map((e=>i("option",{value:+e.CODE_NAME,selected:Number(this.blockDatesData.RELEASE_AFTER_HOURS)==Number(e.CODE_NAME)},e.CODE_VALUE_EN))))),this.blockDatesData.RELEASE_AFTER_HOURS?i("div",{class:"d-inline-block releaseTime"},i("em",null,l.entries.Lcz_On," ",this.getReleaseHoursString())):null)):null))}};n.style=d;export{n as igl_block_dates_view};
//# sourceMappingURL=p-1c69b9d8.entry.js.map