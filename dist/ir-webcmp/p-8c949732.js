import{c as n}from"./p-a973aec7.js";import{c as t}from"./p-00df8713.js";const i=[10,20,50,100];function e(){const n=d();return{tasksList:n,currentPage:1,mobileCurrentPage:1,pageSize:20,mobilePageSize:20,totalPages:0,totalItems:0}}const o={searchField:"",tasks:[],filteredTasks:[],selectedTasks:[],pagination:e(),filters:null,isLoading:false,isFiltersLoading:false,isExportLoading:false,archiveOpen:false,archiveData:[],archiveFilters:{from_date:null,to_date:null,filtered_by_hkm:[],filtered_by_unit:[]},archiveLoading:null,sorting:{field:"date",direction:"ASC"},modalOpen:false,sidebarOpen:false};const{state:r,onChange:a}=n(o);function s(n){r.searchField=n;r.pagination.currentPage=1;v()}function l(n){r.tasks=n;v()}function u(n){r.pagination=Object.assign(Object.assign({},r.pagination),n)}function c(n){u({pageSize:n,currentPage:1});g()}function f(n){if(n>=1&&n<=r.pagination.totalPages){u({currentPage:n})}}function d(){if(!t.roomsInfo){return i}const n=t.roomsInfo.length;if(n<=10){return i}const e=[...Array(4)].map(((t,i)=>{const e=n*(i+1);return i===3?e<100?100:e:e}));return e}function v(){var n,t;const i=(t=(n=r===null||r===void 0?void 0:r.searchField)===null||n===void 0?void 0:n.toLowerCase())!==null&&t!==void 0?t:"";if(!i){r.filteredTasks=[...r.tasks]}else{r.filteredTasks=r.tasks.filter((n=>{var t,e,o,r,a;return((e=(t=n.unit)===null||t===void 0?void 0:t.name)===null||e===void 0?void 0:e.toLowerCase().includes(i))||((r=(o=n.status)===null||o===void 0?void 0:o.description)===null||r===void 0?void 0:r.toLowerCase().includes(i))||((a=n.housekeeper)===null||a===void 0?void 0:a.toLowerCase().includes(i))}))}g()}function g(){const n=r.filteredTasks.length;const t=Math.max(1,Math.ceil(n/r.pagination.pageSize));u({totalItems:n,totalPages:t,currentPage:Math.min(r.pagination.currentPage,t)})}function m(){const n=(r.pagination.currentPage-1)*r.pagination.pageSize;const t=n+r.pagination.pageSize;return r.filteredTasks.slice(n,t)}function b(){const{mobileCurrentPage:n,mobilePageSize:t}=r.pagination;const i=(n-1)*t;const e=i+t;return r.filteredTasks.slice(0,e)}function P(){const{mobileCurrentPage:n,mobilePageSize:t}=r.pagination;return!(t*(n-1)+t>=r.filteredTasks.length)}function p(n){if(!P()){return}u({mobileCurrentPage:n})}function h(n){r.selectedTasks=n}function C(){r.selectedTasks=[]}function S(n){const t=r.selectedTasks.findIndex((t=>t.id===n.id));if(t>-1){r.selectedTasks=r.selectedTasks.filter((t=>t.id!==n.id))}else{r.selectedTasks=[...r.selectedTasks,n]}}function k(n){r.selectedTasks=[...n]}function _(n){r.isLoading=n}function j(n,t){r.sorting={field:n,direction:t};r.tasks=z(r.tasks);v()}function z(n=r.filteredTasks){const{field:t,direction:i}=r.sorting;return[...n].sort(((n,e)=>{var o,r,a,s,l,u,c,f;let d=n[t];let v=e[t];if(t==="status"){d=(o=n.status)===null||o===void 0?void 0:o.description;v=(r=e.status)===null||r===void 0?void 0:r.description}else if(t==="unit"){d=(a=n.unit)===null||a===void 0?void 0:a.name;v=(s=e.unit)===null||s===void 0?void 0:s.name}if(d<v)return i==="ASC"?-1:1;if(d>v)return i==="ASC"?1:-1;if(n.date<e.date)return-1;if(n.date>e.date)return 1;if(((l=n.unit)===null||l===void 0?void 0:l.name)<((u=e.unit)===null||u===void 0?void 0:u.name))return-1;if(((c=n.unit)===null||c===void 0?void 0:c.name)>((f=e.unit)===null||f===void 0?void 0:f.name))return 1;return 0}))}function L(){return r.tasks.filter((n=>{const t=new Date(n.date);const i=new Date;i.setHours(23,59,59,999);return t<=i}))}function O(){const n=L();return n.length>0&&r.selectedTasks.length===n.length}export{h as a,s as b,C as c,j as d,k as e,m as f,L as g,r as h,O as i,b as j,f as k,c as l,P as m,p as n,_ as s,S as t,l as u};
//# sourceMappingURL=p-8c949732.js.map