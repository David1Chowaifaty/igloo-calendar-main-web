import{r as t,c as e,h as i,g as s,H as n}from"./p-c956c3dc.js";import{v as a}from"./p-4ed69de7.js";import{l as o,c as r}from"./p-e8598257.js";import{T as c}from"./p-5872a6ca.js";import{a as d}from"./p-4456199b.js";import{c as l}from"./p-6b3eae37.js";import{i as h,a as u}from"./p-73a802d5.js";import{R as f}from"./p-991a68c8.js";import{B as p}from"./p-ae2c38b0.js";import"./p-92cee5c3.js";import"./p-6c4ba7c0.js";import"./p-b2b8de47.js";const b=".button-icon.sc-ir-button{padding:0;margin-top:0}.button-icon[data-state='loading'].sc-ir-button{display:none}.button-text.sc-ir-button{padding:0 5px}.bounce-3.sc-ir-button{animation:bounce 1s 1}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.loader.sc-ir-button{width:15px;height:10px;--c:no-repeat linear-gradient(#ffffff 0 0);background:var(--c) 0% 50%, var(--c) 50% 50%, var(--c) 100% 50%;background-size:20% 100%;animation:l1 1s infinite linear}@keyframes l1{0%{background-size:20% 100%, 20% 100%, 20% 100%}33%{background-size:20% 10%, 20% 100%, 20% 100%}50%{background-size:20% 100%, 20% 10%, 20% 100%}66%{background-size:20% 100%, 20% 100%, 20% 10%}100%{background-size:20% 100%, 20% 100%, 20% 100%}}@keyframes bounce{0%,100%{transform:scale(1);animation-timing-function:cubic-bezier(0.8, 0, 1, 1)}50%{transform:scale(1.2);animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}}@keyframes ping{75%,100%{transform:scale(1.2)}}";const m=b;const g=class{constructor(i){t(this,i);this.clickHanlder=e(this,"clickHanlder",7);this.name=undefined;this.text=undefined;this.icon="ft-save";this.btn_color="primary";this.size="md";this.textSize="md";this.btn_block=true;this.btn_disabled=false;this.btn_type="button";this.isLoading=false;this.btn_styles=undefined;this.btn_id=a()}handleButtonAnimation(t){if(!this.buttonEl||t.detail!==this.btn_id){return}t.stopImmediatePropagation();t.stopPropagation();this.buttonEl.classList.remove("bounce-3");this.buttonEl.classList.add("bounce-3")}render(){let t=this.btn_block?"btn-block":"";return i("button",{key:"fbb609c012602e7dc65cd565896d48f2126572e1",id:this.btn_id,ref:t=>this.buttonEl=t,onClick:()=>this.clickHanlder.emit(),class:`btn btn-${this.btn_color} ${this.btn_styles} d-flex align-items-center btn-${this.size} text-${this.textSize} ${t}`,type:this.btn_type,disabled:this.btn_disabled},i("span",{key:"ff649c0bb9c4ade46ba48cd0cceb383e9a298190",class:"button-icon","data-state":this.isLoading?"loading":""},i("slot",{key:"0ec9cf3c8b445258bfcabc11ee46214240c1ca15",name:"icon"})),this.text&&i("span",{class:"button-text m-0"},this.text),this.isLoading&&i("div",{class:"loader m-0 p-0"}))}};g.style=m;const x=".sc-ir-combobox-h{display:block;position:relative;padding:0;margin:0}ul.sc-ir-combobox{position:absolute;margin:0;margin-top:2px;width:100%;max-height:80px;border-radius:0.21rem;z-index:10000;padding:1px;background:white;box-shadow:0px 8px 16px 0px rgba(0, 0, 0, 0.2);padding:5px 0;max-height:250px;overflow-y:auto}.dropdown-item.sc-ir-combobox{cursor:pointer}ul.sc-ir-combobox li.sc-ir-combobox,span.sc-ir-combobox,loader-container.sc-ir-combobox{padding:0px 16px;margin:0px;margin-top:2px;width:100%;border-radius:2px}ul.sc-ir-combobox li.sc-ir-combobox{cursor:pointer}ul.sc-ir-combobox li.sc-ir-combobox:hover{background:#f4f5fa}ul.sc-ir-combobox li[data-selected].sc-ir-combobox,ul.sc-ir-combobox li[data-selected].sc-ir-combobox:hover{color:#fff;text-decoration:none;background-color:#666ee8}";const k=x;const y=class{constructor(i){t(this,i);this.comboboxValueChange=e(this,"comboboxValueChange",7);this.inputCleared=e(this,"inputCleared",7);this.toast=e(this,"toast",7);this.data=[];this.duration=300;this.placeholder=undefined;this.value=undefined;this.disabled=false;this.autoFocus=false;this.input_id=a();this.selectedIndex=-1;this.actualIndex=-1;this.isComboBoxVisible=false;this.isLoading=true;this.isItemSelected=undefined;this.inputValue="";this.filteredData=[];this.componentShouldAutoFocus=false}componentWillLoad(){this.filteredData=this.data}componentDidLoad(){if(this.autoFocus){this.focusInput()}}watchHandler(t,e){if(t!==e&&t===true){this.focusInput()}}handleKeyDown(t){var e;const i=this.filteredData.length;if(i>0){switch(t.key){case"ArrowUp":t.preventDefault();this.selectedIndex=(this.selectedIndex-1+i)%i;this.adjustScrollPosition();break;case"ArrowDown":t.preventDefault();this.selectedIndex=(this.selectedIndex+1)%i;this.adjustScrollPosition();break;case"Escape":(e=this.inputRef)===null||e===void 0?void 0:e.blur();this.isComboBoxVisible=false;break}}}focusInput(){requestAnimationFrame((()=>{var t;(t=this.inputRef)===null||t===void 0?void 0:t.focus()}))}adjustScrollPosition(){var t;const e=(t=this.el)===null||t===void 0?void 0:t.querySelector(`[data-selected]`);if(!e)return;e.scrollIntoView({block:"center"})}selectItem(t){if(this.filteredData[t]){this.isItemSelected=true;this.comboboxValueChange.emit({key:"select",data:this.filteredData[t].id});this.inputValue="";this.resetCombobox();if(this.autoFocus){this.focusInput()}}}debounceFetchData(){clearTimeout(this.debounceTimer);this.debounceTimer=setTimeout((()=>{this.fetchData()}),this.duration)}handleFocus(){this.isComboBoxVisible=true}clearInput(){this.inputValue="";this.resetCombobox();this.inputCleared.emit(null)}resetCombobox(t=true){var e;if(t){(e=this.inputRef)===null||e===void 0?void 0:e.blur()}this.selectedIndex=-1;this.isComboBoxVisible=false}async fetchData(){try{this.isLoading=true;this.filteredData=this.data.filter((t=>t.name.toLowerCase().startsWith(this.inputValue)));this.selectedIndex=-1}catch(t){console.log("error",t)}finally{this.isLoading=false}}handleInputChange(t){this.inputValue=t.target.value;if(this.inputValue){this.debounceFetchData()}else{this.filteredData=this.data}}handleDocumentClick(t){const e=t.target;if(!this.el.contains(e)){this.isComboBoxVisible=false}}handleBlur(){this.blurTimout=setTimeout((()=>{if(!this.isItemSelected){this.inputValue="";this.resetCombobox()}else{this.isItemSelected=false}}),300)}isDropdownItem(t){return t&&t.closest(".combobox")}disconnectedCallback(){var t,e,i,s;clearTimeout(this.debounceTimer);clearTimeout(this.blurTimout);(t=this.inputRef)===null||t===void 0?void 0:t.removeEventListener("blur",this.handleBlur);(e=this.inputRef)===null||e===void 0?void 0:e.removeEventListener("click",this.selectItem);(i=this.inputRef)===null||i===void 0?void 0:i.removeEventListener("keydown",this.handleKeyDown);(s=this.inputRef)===null||s===void 0?void 0:s.removeEventListener("focus",this.handleFocus)}handleItemKeyDown(t,e){var i;if(t.key==="Enter"||t.key===" "||t.key==="ArrowRight"){this.selectItem(e);t.preventDefault()}else if(t.key==="Escape"){this.isComboBoxVisible=false;(i=this.inputRef)===null||i===void 0?void 0:i.blur();t.preventDefault()}}renderDropdown(){var t;if(!this.isComboBoxVisible){return null}return i("ul",null,(t=this.filteredData)===null||t===void 0?void 0:t.map(((t,e)=>i("li",{onMouseEnter:()=>this.selectedIndex=e,role:"button",key:t.id,onKeyDown:t=>this.handleItemKeyDown(t,e),"data-selected":this.selectedIndex===e,tabIndex:0,onClick:()=>this.selectItem(e)},t.name))),this.filteredData.length===0&&!this.isLoading&&i("span",{class:"text-center"},o.entries.Lcz_NoResultsFound))}handleSubmit(t){t.preventDefault();t.stopPropagation();console.log("object");if(!this.filteredData.length){return}this.selectItem(this.selectedIndex===-1?0:this.selectedIndex)}render(){return i("form",{key:"3127d91e43a834a88149e534f710f63447c6d145",onSubmit:this.handleSubmit.bind(this),class:"m-0 p-0"},i("input",{key:"c4efcdb135d3997e99bc316530d3d8b957eacd2e",type:"text",class:"form-control bg-white",id:this.input_id,ref:t=>this.inputRef=t,disabled:this.disabled,value:this.value,placeholder:this.placeholder,onKeyDown:this.handleKeyDown.bind(this),onBlur:this.handleBlur.bind(this),onInput:this.handleInputChange.bind(this),onFocus:this.handleFocus.bind(this),autoFocus:this.autoFocus}),this.renderDropdown())}get el(){return s(this)}static get watchers(){return{isComboBoxVisible:["watchHandler"]}}};y.style=k;const v=[{isCSS:true,link:"https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i%7CQuicksand:300,400,500,700"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/bootstrap.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/bootstrap-extended.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/colors.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/core/menu/menu-types/horizontal-menu.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/core/colors/palette-gradient.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/components.css"},{isCSS:true,link:"https://x.igloorooms.com/assets/css/style.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/icheck.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/custom.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/pages/login-register.css"}];const w=class{constructor(e){t(this,e);this.extraResources="";this.resources=v}componentWillLoad(){this.parseRefs()}componentDidLoad(){this.initializeStyles()}hrefsChanged(){this.parseRefs();this.initializeStyles()}parseRefs(){if(this.extraResources!=="")this.resources.push(JSON.parse(this.extraResources))}appendTag(t,e){const i=document.createElement(t);const s=[];Object.keys(e).forEach((t=>{i.setAttribute(t,e[t]);s.push(`[${t}="${e[t]}"]`)}));const n=`${t}${s.join("")}`;const a=document.querySelector(n);if(!a){document.head.appendChild(i)}}initializeStyles(){this.resources.forEach((t=>{if(t.isCSS){this.appendTag("link",{href:t.link,rel:"stylesheet",type:"text/css"})}if(t.isJS){this.appendTag("script",{src:t.link})}}))}render(){return i(n,{key:"198628fc63c832e49fcf0364034dee4a0fa4e8ae"},i("slot",{key:"73f64bcf05f3875eaffb41e75c8ebbcb68acc2a4"}))}static get watchers(){return{extraResources:["hrefsChanged"]}}};const _={default_properties:undefined,hk_criteria:undefined};const{state:C}=r(_);function S(t,e){C[t]=e}function $(){return C.default_properties}class j extends c{async getExposedHKSetup(t){const e=this.getToken();if(!e){throw new Error("Missing token")}const{data:i}=await d.post(`/Get_Exposed_HK_Setup?Ticket=${e}`,{property_id:t});S("hk_criteria",i["My_Result"]);return i["My_Result"]}async setExposedInspectionMode(t,e){const i=this.getToken();if(!i){throw new Error("Missing token")}const{data:s}=await d.post(`/Set_Exposed_Inspection_Mode?Ticket=${i}`,{property_id:t,mode:e});return s["My_Result"]}async manageExposedAssignedUnitToHKM(t,e){const i=this.getToken();if(!i){throw new Error("Missing token")}const{data:s}=await d.post(`/Manage_Exposed_Assigned_Unit_To_HKM?Ticket=${i}`,{property_id:t,links:e});return s["My_Result"]}async editExposedHKM(t,e=false){const i=this.getToken();if(!i){throw new Error("Missing token")}const{data:s}=await d.post(`/Edit_Exposed_HKM?Ticket=${i}`,Object.assign(Object.assign({},t),{is_to_remove:e}));return s["My_Result"]}}const z=".backdropModal.sc-ir-delete-modal{background-color:rgba(0, 0, 0, 0.5);z-index:1000;position:fixed;top:0;left:0;height:100vh;width:100%;opacity:0;transition:opacity 0.3s ease-in-out;pointer-events:none}.backdropModal.active.sc-ir-delete-modal{cursor:pointer;opacity:1 !important;pointer-events:all}.ir-modal[data-state='opened'].sc-ir-delete-modal{opacity:1;visibility:visible;pointer-events:all;transition:all 0.3s ease-in-out}.ir-alert-content.sc-ir-delete-modal{padding:10px;background:white;border-radius:5px}.modal.sc-ir-delete-modal{z-index:1001 !important}.modal-dialog.sc-ir-delete-modal{height:100vh;display:flex;align-items:center}.ir-alert-footer.sc-ir-delete-modal{gap:10px}.exit-icon.sc-ir-delete-modal{position:absolute;right:10px;top:5px;margin:0}.ir-modal.sc-ir-delete-modal{position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);z-index:1050;width:90%;max-width:32rem;overflow:hidden;outline:0;opacity:0;transition:transform 0.3s ease-in-out, opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;visibility:hidden;pointer-events:none}.ir-modal.active.sc-ir-delete-modal{opacity:1;transform:translate(-50%, 0);visibility:visible;pointer-events:all;transition:all 0.3s ease-in-out}";const H=z;var L=undefined&&undefined.__rest||function(t,e){var i={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0)i[s]=t[s];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++){if(e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n]))i[s[n]]=t[s[n]]}return i};const M=class{constructor(i){t(this,i);this.modalClosed=e(this,"modalClosed",7);this.resetData=e(this,"resetData",7);this.housekeepingService=new j;this.user=undefined;this.isOpen=false;this.selectedId="";this.loadingBtn=null}componentWillLoad(){this.housekeepingService.setToken(C.default_properties.token)}async closeModal(){this.isOpen=false;this.modalClosed.emit(null)}async openModal(){this.isOpen=true}async btnClickHandler(t){let e=t.target;let i=e.name;try{if(i==="confirm"){this.loadingBtn="confirm";if(this.selectedId===""){await this.housekeepingService.editExposedHKM(this.user,true)}else{const t=this.user.assigned_units.map((t=>({hkm_id:+this.selectedId,is_to_assign:true,unit_id:t.id})));await this.housekeepingService.manageExposedAssignedUnitToHKM(C.default_properties.property_id,t);const e=this.user,i=L(e,["assigned_units","is_soft_deleted","is_active"]);await this.housekeepingService.editExposedHKM(i,true)}this.resetData.emit(null)}if(i==="cancel"){this.closeModal()}}catch(t){console.error(t)}finally{if(this.loadingBtn){this.loadingBtn=null;this.closeModal()}}}render(){if(!this.user){return null}return[i("div",{class:`backdropModal ${this.isOpen?"active":""}`,onClick:()=>{this.closeModal()}}),i("div",{"data-state":this.isOpen?"opened":"closed",class:`ir-modal`,tabindex:"-1"},this.isOpen&&i("div",{class:`ir-alert-content p-2`},i("div",{class:`ir-alert-header align-items-center border-0 py-0 m-0 `},i("p",{class:"p-0 my-0 mb-1"},"Assign units to"),i("ir-icon",{class:"exit-icon",style:{cursor:"pointer"},onClick:()=>{this.closeModal()}},i("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",height:"14",width:"10.5",viewBox:"0 0 384 512"},i("path",{fill:"currentColor",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"})))),i("div",{class:"modal-body text-left p-0 mb-2"},i("ir-select",{firstOption:"nobody",selectedValue:this.selectedId,onSelectChange:t=>this.selectedId=t.detail,LabelAvailable:false,data:C.hk_criteria.housekeepers.filter((t=>t.id!==this.user.id)).map((t=>({value:t.id.toString(),text:t.name})))})),i("div",{class:`ir-alert-footer border-0 d-flex justify-content-end`},i("ir-button",{icon:"",btn_color:"secondary",btn_block:true,text:"Cancel",name:"cancel"}),i("ir-button",{isLoading:this.loadingBtn==="confirm",icon:"",btn_color:"primary",btn_block:true,text:"confirm",name:"confirm"}))))]}};M.style=H;const T=".sc-ir-hk-team-h{display:block}th.sc-ir-hk-team,td.sc-ir-hk-team{text-align:left !important;width:fit-content !important}input.sc-ir-hk-team{border:none;margin:0;width:120px}input.sc-ir-hk-team:focus{outline:none}.table-container.sc-ir-hk-team{padding:10px 0;overflow-x:auto;max-width:100%;width:max-content}.table.sc-ir-hk-team,th.sc-ir-hk-team,td.sc-ir-hk-team{border-color:white !important}thead.sc-ir-hk-team{border:0 !important}table.sc-ir-hk-team{border:0 !important}.icons-container.sc-ir-hk-team{display:flex;align-items:center;justify-content:center;gap:4px}.text-center.sc-ir-hk-team{text-align:center !important}.assignments-container.sc-ir-hk-team,.unassigned-container.sc-ir-hk-team{display:flex;align-items:center;gap:8px}.font-semibold.sc-ir-hk-team{font-weight:700}.unassigned-container.sc-ir-hk-team{gap:4px}.justify-between.sc-ir-hk-team{justify-content:space-between;margin-bottom:10px}.assignments-container.sc-ir-hk-team p.sc-ir-hk-team,h4.sc-ir-hk-team{margin:0}.outline-btn.sc-ir-hk-team{background:white;border:1px solid var(--blue);color:var(--blue);border-radius:5px;font-size:12px;padding:1px 0.25rem !important;margin:0}.outline-btn.sc-ir-hk-team:hover{color:white;background:var(--blue)}@media only screen and (min-width: 900px){td.sc-ir-hk-team{min-width:140px !important}}@media only screen and (max-width: 900px){.table-container.sc-ir-hk-team{width:100%}}";const E=T;var I=undefined&&undefined.__rest||function(t,e){var i={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0)i[s]=t[s];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++){if(e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n]))i[s[n]]=t[s[n]]}return i};const A=class{constructor(e){t(this,e);this.currentTrigger=null}renderAssignedUnits(t){if(t.assigned_units.length===0){return i("span",null,"0 -"," ",i("button",{class:"outline-btn",onClick:()=>this.currentTrigger={type:"unassigned_units",user:t}},"Assign"))}return i("span",null,t.assigned_units.length," -"," ",i("button",{onClick:()=>this.currentTrigger={type:"unassigned_units",user:t},class:"outline-btn"},"Edit"))}renderCurrentTrigger(){var t;switch((t=this.currentTrigger)===null||t===void 0?void 0:t.type){case"unassigned_units":return i("ir-hk-unassigned-units",{slot:"sidebar-body",user:this.currentTrigger.user});case"user":return i("ir-hk-user",{slot:"sidebar-body",user:this.currentTrigger.user,isEdit:this.currentTrigger.isEdit});default:return null}}handleCloseSideBar(t){t.stopImmediatePropagation();t.stopPropagation();this.currentTrigger=null}handleDeletion(t){this.currentTrigger={type:"delete",user:t};this.deletionTimout=setTimeout((()=>{const t=this.el.querySelector("ir-delete-modal");if(!t)return;t.openModal()}),100)}disconnectedCallback(){clearTimeout(this.deletionTimout)}render(){var t,e;const{assigned:s,total:a,un_assigned:o}=C.hk_criteria.units_assignments;return i(n,{key:"aacfec15a45c0ce2fa4699789d544a6baa7908f7",class:"card p-1"},i("section",{key:"993bfa7e628b216831d413550dc7155a0ef1d919"},i("div",{key:"52ee590f56eac4f9db4d9f23cfbd8415d581ee38",class:"assignments-container align-items-start align-items-md-center flex-column flex-md-row justify-between"},i("h4",{key:"c77887b7ab6556722267c02b6f43b5a514941455"},"Room or Unit Status"),i("div",{key:"72ca18f0b9ea80fed13131a0735260a729832473",class:"assignments-container"},i("p",{key:"6865c0cd93e5cd115f8470316bbd3e1dc882db11"},a," ",i("span",{key:"9d857b139a42f2ad9a8c874d95e6d7d071dcbb11",class:"font-semibold"},"Total units")),i("p",{key:"b12aa3704046b64168f47c994a9c1763ceba9aa3"},s," ",i("span",{key:"3ea96dfb4f543481218be0cb993503f35e30d0de",class:"font-semibold"},"Assigned")),i("div",{key:"08fb17ed3bce81a31992a08009db9676a3526544",class:"unassigned-container"},i("p",{key:"034ad26a6e49a7dd28c66489fb3c966f09456585"},o)," ",i("button",{key:"b1918658590bde2c85c1b00a3e5d3ea84e8205ae",class:"outline-btn",onClick:()=>this.currentTrigger={type:"unassigned_units",user:null}},"Unassigned")))),i("p",{key:"27bcc710cff5c0e8ab39f8cf5af2c6941746c155"},"As an option, create housekeepers (as individuals or teams) and assign units to them to notify them separately.")),i("section",{key:"deed0564beb23919bf5039ad59987d8d0b1bf9fd",class:"table-container"},i("table",{key:"ac2e599f18c519e4f853a7ccd32fbf567f39a9b6",class:"table"},i("thead",{key:"78ad2e279010b4fdd266ae18f7f80d48b5ff33a6"},i("tr",{key:"d965ab0d596826cbe22344f33d8b74264a00fb94"},i("th",{key:"842601c71a42032474ff42a39cf330a2c18a6fff"},"Name"),i("th",{key:"7006263bfc52e5684781e75f8ef615f653ad1cec"},"Mobile"),i("th",{key:"6d3608a524849c26f8322897f36b28acc018f0b7"},"Username"),i("th",{key:"1b36956b86e655f808e76a19d6787ae93267ae40"},"Note"),i("th",{key:"7bd547ed3af1bfd6e06e8b2a7440c8b629a59ccb"},"Units assigned"),i("th",{key:"948b93b7653736394b382145a6e4124da10654b0",class:"text-center"},i("ir-icon",{key:"fe7ef3920418353c705761656691a259f6c09174",onIconClickHandler:()=>{this.currentTrigger={type:"user",isEdit:false,user:null}}},i("svg",{key:"997ab2fc677fe2bc4f5520ae5b692aeb50e733ce",slot:"icon",xmlns:"http://www.w3.org/2000/svg",height:"20",width:"17.5",viewBox:"0 0 448 512"},i("path",{key:"0546b158fc406ac4098d4390e6f6bdd03ab636d3",fill:"currentColor",d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"})))))),i("tbody",{key:"e2ed69a6b097318ce18673094214063e848d8d6a"},C.hk_criteria.housekeepers.map((t=>i("tr",{key:t.id},i("td",null,t.name),i("td",null,t.mobile),i("td",null,t.username),i("td",null,t.note),i("td",null,this.renderAssignedUnits(t)),i("td",{class:"text-center"},i("div",{class:"icons-container"},i("ir-icon",{onIconClickHandler:()=>{const e=I(t,["assigned_units","is_soft_deleted","is_active"]);this.currentTrigger={type:"user",isEdit:true,user:e}},icon:"ft-save color-ir-light-blue-hover h5 pointer sm-margin-right"},i("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",height:"20",width:"20",viewBox:"0 0 512 512"},i("path",{fill:"#6b6f82",d:"M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"}))),i("span",null," Â "),i("ir-icon",{icon:"ft-trash-2 danger h5 pointer",onIconClickHandler:()=>this.handleDeletion(t)},i("svg",{slot:"icon",fill:"#ff2441",xmlns:"http://www.w3.org/2000/svg",height:"16",width:"14.25",viewBox:"0 0 448 512"},i("path",{d:"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"}))))))))))),i("ir-sidebar",{key:"3de64d7dc3229daaecb14df0ab398a367c4c93a6",sidebarStyles:{maxWidth:((t=this.currentTrigger)===null||t===void 0?void 0:t.type)==="unassigned_units"?"max-content":"100%"},showCloseButton:false,open:this.currentTrigger!==null&&this.currentTrigger.type!=="delete",onIrSidebarToggle:()=>this.currentTrigger=null},this.renderCurrentTrigger()),((e=this.currentTrigger)===null||e===void 0?void 0:e.type)==="delete"&&i("ir-delete-modal",{user:this.currentTrigger.user}))}get el(){return s(this)}};A.style=E;const D=".sc-ir-hk-unassigned-units-h{display:block;--ir-root-active-color:#1e9ff2;--ir-root-inactive-color:#d2d2d2}ul.sc-ir-hk-unassigned-units{margin:0;padding:0}ul.sc-ir-hk-unassigned-units li.sc-ir-hk-unassigned-units{margin:0;padding:0;display:flex;margin-bottom:5px;justify-content:space-between}ul.sc-ir-hk-unassigned-units li.sc-ir-hk-unassigned-units p.sc-ir-hk-unassigned-units{padding:0;margin:0;width:min-content}.title.sc-ir-hk-unassigned-units{width:max-content;padding-right:10px}";const B=D;const O=class{constructor(i){t(this,i);this.closeSideBar=e(this,"closeSideBar",7);this.resetData=e(this,"resetData",7);this.assignedUnits=new Map;this.housekeepingService=new j;this.user=null;this.renderAgain=false}componentWillLoad(){this.housekeepingService.setToken(C.default_properties.token)}assignUnit(t,e,i){if(this.user){const s=this.user.assigned_units.find((e=>e.id===t));if(i&&s||!i&&!s){this.assignedUnits.delete(t)}else if(!i&&s){this.assignedUnits.set(t,{hkm_id:e,is_to_assign:false,unit_id:t})}else if(i){const i={hkm_id:e,is_to_assign:true,unit_id:t};this.assignedUnits.set(t,i)}}else{if(this.assignedUnits.has(t)&&!e){this.assignedUnits.delete(t);return}else{this.assignedUnits.set(t,{hkm_id:e,is_to_assign:true,unit_id:t})}}this.renderAgain=!this.renderAgain}async assignUnits(){try{await this.housekeepingService.manageExposedAssignedUnitToHKM(C.default_properties.property_id,[...this.assignedUnits.values()]);this.resetData.emit(null)}catch(t){console.error(t)}finally{this.closeSideBar.emit(null)}}renderRooms(){if(!this.user){return C.hk_criteria.units_assignments.unassigned_units.map((t=>i("li",{key:t.id},i("p",{class:"mr-2"},t.name),i("ir-select",{class:"ml-4",onSelectChange:e=>{let i=e.detail;if(i===""){i=null}else{i=+i}this.assignUnit(t.id,i,false)},LabelAvailable:false,data:C.hk_criteria.housekeepers.map((t=>({text:t.name,value:t.id.toString()})))}))))}return l.roomsInfo.map((t=>{var e;if(!t.is_active){return null}return(e=t.physicalrooms)===null||e===void 0?void 0:e.map((t=>{var e,s;let n=!C.hk_criteria.units_assignments.unassigned_units.find((e=>e.id===t.id));let a=[];const o=this.assignedUnits.get(t.id);if(o&&o.is_to_assign){a=[this.user];n=true}else{if(n){a=C.hk_criteria.housekeepers.filter((e=>e.assigned_units.find((e=>e.id===t.id))))}}return i("li",{key:t.id},i("div",{class:"d-flex mr-3"},i("p",{class:"mr-2"},t.name)," ",i("span",null,n?(e=a[0])===null||e===void 0?void 0:e.name:"")),i("ir-switch",{onCheckChange:e=>{const i=e.detail;this.assignUnit(t.id,this.user.id,i)},checked:n&&((s=a[0])===null||s===void 0?void 0:s.id)===this.user.id}))}))}))}render(){return i(n,{key:"f307e1da45b39889eeea3cf10aeb7a2a696038ba",class:"px-1"},i("div",{key:"8532e0a686f363f361b5e889e44b3c88794915cc",class:"d-flex align-items-center py-1 justify-content-between"},i("h3",{key:"dbb4719b9303fd4b144cd0abd8e9e5e6bac245f1",class:"text-left font-medium-2 title py-0 my-0"},!this.user?"Assingn Units":`Assignment for ${this.user.name}`),i("ir-icon",{key:"4f5f120921afbccc8921d739c95aec988a55e3cd",class:"ml-1 m-0 p-0 close",onIconClickHandler:()=>{this.closeSideBar.emit(null)}},i("svg",{key:"f019c64d757aaa716cb46daba34774da7e66b5f3",slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",height:20,width:20},i("path",{key:"85e14550fd2e939f9228cf27674091a4899b7245",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"})))),i("section",{key:"832f7d72957e33fb2622e2c90018865f7217cb6a",class:"pt-1 pb-1 border-top"},i("ul",{key:"87ea6bca9b779e6fa15053a4fa07658f41fa914f"},this.renderRooms()),i("div",{key:"c23107de6ff652f808d9011065bd10015a1a97f2",class:"d-flex flex-column flex-md-row align-items-md-center mt-2 w-100"},i("ir-button",{key:"53b69129977abc331a99a0af0aabf50546b807d0",onClickHanlder:()=>this.closeSideBar.emit(null),class:"flex-fill",btn_styles:"w-100  justify-content-center align-items-center",btn_color:"secondary",text:"Cancel"}),i("ir-button",{key:"cd58462336c67760f9a2f4856635458dcaa30d7c",isLoading:h("/Manage_Exposed_Assigned_Unit_To_HKM"),onClickHanlder:this.assignUnits.bind(this),class:"flex-fill ml-md-1",btn_styles:"w-100  justify-content-center align-items-center mt-1 mt-md-0",text:"Confirm"}))))}};O.style=B;function R(t,e){let i=true;const s={};for(const n in e){const a=e[n];const o=t[n];if(!a)continue;s[n]=[];if(a.required&&(o===null||o===undefined||o==="")){i=false;s[n].push("This field is required.")}if(typeof o==="string"){if(a.minLength!==undefined&&o.length<a.minLength){i=false;s[n].push(`Minimum length is ${a.minLength}.`)}if(a.maxLength!==undefined&&o.length>a.maxLength){i=false;s[n].push(`Maximum length is ${a.maxLength}.`)}}if(typeof o==="number"){if(a.minValue!==undefined&&o<a.minValue){i=false;s[n].push(`Minimum value is ${a.minValue}.`)}if(a.maxValue!==undefined&&o>a.maxValue){i=false;s[n].push(`Maximum value is ${a.maxValue}.`)}}if(a.pattern&&!a.pattern.test(String(o))){i=false;s[n].push("Invalid format.")}if(a.custom&&!a.custom(o)){i=false;s[n].push("Custom validation failed.")}}return{isValid:i,errors:s}}const V=".sc-ir-hk-user-h{display:block}.top-border.sc-ir-hk-user{border-top:1px solid #e4e5ec}";const U=V;const K=class{constructor(i){t(this,i);this.resetData=e(this,"resetData",7);this.closeSideBar=e(this,"closeSideBar",7);this.housekeepingService=new j;this.default_properties={token:"",language:""};this.user=null;this.isEdit=false;this.isLoading=false;this.userInfo={id:-1,mobile:"",name:"",note:"",password:"",property_id:null,username:"",phone_prefix:null};this.errors=null}async componentWillLoad(){const{token:t,language:e,property_id:i}=$();this.default_properties={token:t,language:e};this.housekeepingService.setToken(t);if(!this.user){this.userInfo["property_id"]=i}if(this.user){this.userInfo=Object.assign({},this.user)}console.log(this.userInfo)}updateUserField(t,e){this.userInfo=Object.assign(Object.assign({},this.userInfo),{[t]:e})}async addUser(){try{this.isLoading=true;const t={name:{required:true},mobile:{required:true},password:{minLength:5}};const e=R(this.userInfo,t);if(!e.isValid){this.errors=e.errors;return}if(this.errors){this.errors=null}await this.housekeepingService.editExposedHKM(this.userInfo);this.resetData.emit(null);this.closeSideBar.emit(null)}catch(t){console.error(t)}finally{this.isLoading=false}}render(){var t,e,s,a,o,r,c;return i(n,{key:"d8d405c2afcb942fa77823c788ea1c3d32aa1104",class:"px-1"},i("div",{key:"9d8a4f0f680bf57f9df142f6dedc9d4d216a0c11",class:"d-flex align-items-center py-1 justify-content-between"},i("h3",{key:"340fd8a2c124b506c2c7ae66ed06bf40faa4b26b",class:"text-left font-medium-2  py-0 my-0"},this.isEdit?"Edit":"Create"," housekeeper profile"),i("ir-icon",{key:"43427a39fc32b1c955c8539a8ea86db8a9d5511d",class:"m-0 p-0 close",onIconClickHandler:()=>{this.closeSideBar.emit(null)}},i("svg",{key:"10c9a0f53de986036d08e56f7546d68d752ad7c9",slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",height:20,width:20},i("path",{key:"e0b726ae93fb8711784b56ad5421cb99207791ee",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"})))),i("section",{key:"c5cdec2a27d0c6dcd84eb6499c053cc5d28a70f2",class:"pt-3 border-top"},i("ir-input-text",{key:"f2de1428a49f736a31c56e1c343f6514fe5a13ff",error:((e=(t=this.errors)===null||t===void 0?void 0:t.name)===null||e===void 0?void 0:e.length)>0,label:"Name",placeholder:"",onTextChange:t=>this.updateUserField("name",t.detail),value:this.userInfo.name}),i("ir-phone-input",{key:"400b1a3e2e3317de1d0803d66ef67d906109115b",error:((a=(s=this.errors)===null||s===void 0?void 0:s.mobile)===null||a===void 0?void 0:a.length)>0,language:this.default_properties.language,token:this.default_properties.token,default_country:l.country.id,phone_prefix:(o=this.user)===null||o===void 0?void 0:o.phone_prefix,label:"Mobile",value:this.userInfo.mobile,onTextChange:t=>{this.updateUserField("phone_prefix",t.detail.phone_prefix);this.updateUserField("mobile",t.detail.mobile)}}),i("ir-input-text",{key:"3623a36572e0c287382734d4173482108d51db5f",label:"Username",placeholder:"",value:this.userInfo.username,onTextChange:t=>this.updateUserField("username",t.detail)}),i("ir-input-text",{key:"c9ffffdeb24cf0f75c93f20198a85bc8104ac6ea",label:"Password",placeholder:"",value:this.userInfo.password,type:"password",error:((c=(r=this.errors)===null||r===void 0?void 0:r.password)===null||c===void 0?void 0:c.length)>0,onTextChange:t=>this.updateUserField("password",t.detail)}),i("ir-input-text",{key:"9c3b2eb777f8601efffa3980af4d224865e7d3cf",label:"Note",placeholder:"",value:this.userInfo.note,onTextChange:t=>this.updateUserField("note",t.detail)}),i("div",{key:"e84e9ef0e3bbdb6ab32bdd256f3274dbbe3a81fd",class:"d-flex flex-column flex-md-row align-items-md-center mt-2 w-100"},i("ir-button",{key:"1823bd8a7b6b000bcea4c6d1131e5d36f4689dc5",onClickHanlder:()=>this.closeSideBar.emit(null),class:"flex-fill",btn_styles:"w-100  justify-content-center align-items-center",btn_color:"secondary",text:"Cancel"}),i("ir-button",{key:"a227180b1e00d2f53cc47e24a0620436bc187cdd",isLoading:this.isLoading,onClickHanlder:this.addUser.bind(this),class:"flex-fill ml-md-1",btn_styles:"w-100  justify-content-center align-items-center mt-1 mt-md-0",text:"Save"}))))}};K.style=U;const W=".sc-ir-housekeeping-h{display:block}";const F=W;const q=class{constructor(e){t(this,e);this.roomService=new f;this.houseKeepingService=new j;this.language="";this.ticket="";this.baseurl="";this.propertyid=undefined;this.isLoading=false}componentWillLoad(){if(this.baseurl){d.defaults.baseURL=this.baseurl}if(this.ticket!==""){this.roomService.setToken(this.ticket);this.houseKeepingService.setToken(this.ticket);S("default_properties",{token:this.ticket,property_id:this.propertyid,language:this.language});this.initializeApp()}}async handleResetData(t){t.stopImmediatePropagation();t.stopPropagation();await this.houseKeepingService.getExposedHKSetup(this.propertyid)}async ticketChanged(t,e){if(t!==e){this.roomService.setToken(this.ticket);this.houseKeepingService.setToken(this.ticket);S("default_properties",{token:this.ticket,property_id:this.propertyid,language:this.language});this.initializeApp()}}async initializeApp(){try{this.isLoading=true;await Promise.all([this.houseKeepingService.getExposedHKSetup(this.propertyid),this.roomService.fetchData(this.propertyid,this.language)])}catch(t){console.error(t)}finally{this.isLoading=false}}render(){if(this.isLoading){return i("ir-loading-screen",null)}return i(n,null,i("ir-interceptor",null),i("ir-toast",null),i("section",{class:"p-1"},i("ir-unit-status",{class:"mb-1"}),i("ir-hk-team",{class:"mb-1"})))}static get watchers(){return{ticket:["ticketChanged"]}}};q.style=F;const P=".sc-ir-icon-h{margin:0;padding:0}.icon-button.sc-ir-icon{all:unset;margin:0;padding:0;color:#104064}.icon-button.sc-ir-icon:hover{cursor:pointer;color:#1a6aa7}";const X=P;const N=class{constructor(i){t(this,i);this.iconClickHandler=e(this,"iconClickHandler",7);this.icon="ft-check"}render(){return i("button",{key:"5da84289b57ca2ec563d70a18ce32a386f5bb8ba",class:"icon-button",onClick:()=>this.iconClickHandler.emit()},i("slot",{key:"cbb0cf0be5d3c3a4eed5f770ab191083324f3526",name:"icon"}))}};N.style=X;const G=".sc-ir-input-text-h{margin:0;padding:0}.border-theme.sc-ir-input-text{border:1px solid #cacfe7}.icon-container.sc-ir-input-text{color:#3b4781;border:1px solid #cacfe7;font-size:0.975rem;height:2rem;background:rgb(255, 255, 255);padding-right:0 !important;border-right:0;border-top-right-radius:0;border-bottom-right-radius:0;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}input.sc-ir-input-text:focus{border-color:#1e9ff2 !important}.input-container.sc-ir-input-text{display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;flex:1}.input-container.sc-ir-input-text input.sc-ir-input-text{padding-left:5px !important;padding-right:5px !important;border-left:0;border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.icon-container[data-state='focus'].sc-ir-input-text{border-color:var(--blue)}.icon-container[data-disabled].sc-ir-input-text{background-color:#eceff1;border-color:rgba(118, 118, 118, 0.3)}.danger-border.sc-ir-input-text{border-color:var(--red)}";const J=G;const Q=class{constructor(i){t(this,i);this.textChange=e(this,"textChange",7);this.name=undefined;this.value=undefined;this.label="<label>";this.placeholder="<placeholder>";this.inputStyles="";this.required=undefined;this.LabelAvailable=true;this.readonly=false;this.type="text";this.submited=false;this.inputStyle=true;this.size="md";this.textSize="md";this.labelPosition="left";this.labelBackground=null;this.labelColor="dark";this.labelBorder="theme";this.labelWidth=3;this.variant="default";this.disabled=false;this.error=false;this.valid=undefined;this.initial=true;this.inputFocused=false}connectedCallback(){}disconnectedCallback(){}watchHandler(t){if(t!==""&&this.required){this.valid=true}}watchHandler2(t){if(t&&this.required){this.initial=false}}handleInputChange(t){this.initial=false;if(this.required){this.valid=t.target.checkValidity();const e=t.target.value;this.textChange.emit(e)}else{this.textChange.emit(t.target.value)}}render(){const t=a();if(this.variant==="icon"){return i("fieldset",{class:"position-relative has-icon-left input-container"},i("label",{htmlFor:t,class:"input-group-prepend bg-white m-0"},i("span",{"data-disabled":this.disabled,"data-state":this.inputFocused?"focus":"",class:`input-group-text icon-container bg-white ${this.error&&"danger-border"}`,id:"basic-addon1"},i("slot",{name:"icon"}))),i("input",{type:"text",onFocus:()=>this.inputFocused=true,required:this.required,onBlur:()=>this.inputFocused=false,disabled:this.disabled,class:`form-control bg-white pl-0 input-sm rate-input py-0 m-0 rateInputBorder ${this.error&&"danger-border"}`,id:t,value:this.value,placeholder:this.placeholder,onInput:this.handleInputChange.bind(this)}))}let e="form-control";let s=i("div",{class:`input-group-prepend col-${this.labelWidth} p-0 text-${this.labelColor}`},i("label",{class:`input-group-text ${this.labelPosition==="right"?"justify-content-end":this.labelPosition==="center"?"justify-content-center":""} ${this.labelBackground?"bg-"+this.labelBackground:""} flex-grow-1 text-${this.labelColor} border-${this.labelBorder==="none"?0:this.labelBorder} `},this.label,this.required?"*":""));if(!this.LabelAvailable){s=""}if(this.inputStyle===false){e=""}if(this.required&&!this.valid&&!this.initial){e=`${e} border-danger`}return i("div",{class:"form-group"},i("div",{class:"input-group row m-0"},s,i("input",{readOnly:this.readonly,type:this.type,class:`${e} ${this.error?"border-danger":""} form-control-${this.size} text-${this.textSize} col-${this.LabelAvailable?12-this.labelWidth:12} ${this.readonly&&"bg-white"} ${this.inputStyles}`,placeholder:this.placeholder,value:this.value,onInput:this.handleInputChange.bind(this),required:this.required})))}static get watchers(){return{value:["watchHandler"],submited:["watchHandler2"]}}};Q.style=J;const Y=".loader.sc-ir-interceptor{width:1.25rem;height:1.25rem;border:2.5px solid #3f3f3f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}.loaderContainer.sc-ir-interceptor{padding:20px;display:flex;align-items:center;justify-content:center;border-radius:5px;background:white}.loadingScreenContainer.sc-ir-interceptor{position:fixed;top:0;left:0;height:100vh;width:100vw;z-index:100000;background:rgba(0, 0, 0, 0.2);pointer-events:all;display:flex;align-items:center;justify-content:center}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const Z=Y;const tt=class{constructor(i){t(this,i);this.toast=e(this,"toast",7);this.isShown=false;this.isLoading=false;this.isUnassignedUnit=false;this.handledEndpoints=["/ReAllocate_Exposed_Room","/Do_Payment","/Get_Exposed_Bookings"]}componentWillLoad(){this.setupAxiosInterceptors()}setupAxiosInterceptors(){d.interceptors.request.use(this.handleRequest.bind(this),this.handleError.bind(this));d.interceptors.response.use(this.handleResponse.bind(this),this.handleError.bind(this))}extractEndpoint(t){return t.split("?")[0]}isHandledEndpoint(t){return this.handledEndpoints.includes(t)}handleRequest(t){const e=this.extractEndpoint(t.url);u[e]="pending";if(this.isHandledEndpoint(e)){this.isLoading=true}return t}handleResponse(t){var e;const i=this.extractEndpoint(t.config.url);if(this.isHandledEndpoint(i)){this.isLoading=false}u[i]="done";if((e=t.data.ExceptionMsg)===null||e===void 0?void 0:e.trim()){this.handleError(t.data.ExceptionMsg);throw new Error(t.data.ExceptionMsg)}return t}handleError(t){this.toast.emit({type:"error",title:t,description:"",position:"top-right"});return Promise.reject(t)}render(){return i(n,{key:"539d3eaf1d89939b98a7cd64d70f096806ee3131"},this.isLoading&&i("div",{class:"loadingScreenContainer"},i("div",{class:"loaderContainer"},i("span",{class:"loader"}))))}};tt.style=Z;const et=".sc-ir-loading-screen-h{display:fixed;height:100vh;width:100vw;z-index:1000;top:0;left:0;display:flex;align-items:center;justify-content:center;background:white}.loader.sc-ir-loading-screen{width:1.25rem;height:1.25rem;border:2.5px solid #3f3f3f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}.loaderContainer.sc-ir-loading-screen{position:absolute;z-index:100001;padding:20px;top:50%;left:50%;transform:translate(-50%, -50%);background:white;display:flex;align-items:center;justify-content:center;gap:20px;border-radius:5px}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const it=et;const st=class{constructor(e){t(this,e);this.message=""}render(){return i(n,{key:"159e3217895ff1578b0d3ff13f107e02382d3d74"},i("span",{key:"1d75ba7b398f16e4a358e3e2b20aedf87e8f78fa",class:"loader"}))}};st.style=it;const nt=".sc-ir-phone-input-h{display:block}.input-container.sc-ir-phone-input{display:flex;align-items:center;padding:0 !important}.input-container.sc-ir-phone-input:focus-within{border-color:#1e9ff2}.input-container.sc-ir-phone-input input.sc-ir-phone-input{flex:1;border:0}.input-container.sc-ir-phone-input input.sc-ir-phone-input:focus{outline:none}.dropdown-trigger.sc-ir-phone-input{display:flex;align-items:center;gap:8px;background:white;border:0;border-right:1px solid #cacfe7}.ir-dropdown-container.sc-ir-phone-input{position:absolute;z-index:1000;bottom:-30px;width:100%;left:0;background:white}.input-container.sc-ir-phone-input label.sc-ir-phone-input{display:flex;align-items:center;justify-content:center;margin:0;padding:0 5px}.flag.sc-ir-phone-input{height:18px;width:24px;border-radius:3px}.is-invalid.sc-ir-phone-input{border-color:#ff4961}";const at=nt;const ot=class{constructor(i){t(this,i);this.textChange=e(this,"textChange",7);this.countries=[];this.bookingService=new p;this.label=undefined;this.value="";this.disabled=false;this.error=false;this.token=undefined;this.language=undefined;this.default_country=null;this.phone_prefix=null;this.inputValue="";this.isDropdownVisible=false;this.currentCountry=undefined}async componentWillLoad(){if(!this.token){throw new Error("Missing token")}this.bookingService.setToken(this.token);const t=await this.bookingService.getCountries(this.language);this.countries=t;if(this.phone_prefix){this.setCountryFromPhonePrefix()}else{if(this.default_country){this.setCurrentCountry(this.default_country)}}this.inputValue=this.value}handleDocumentClick(t){const e=t.target;if(!this.el.contains(e)){this.isDropdownVisible=false}}handleInputChange(t){var e;let i=t.target;let s=i.value;s=s.replace(/[^+\d]+/g,"");i.value=s;this.inputValue=s;this.textChange.emit({phone_prefix:(e=this.currentCountry)===null||e===void 0?void 0:e.phone_prefix,mobile:this.inputValue})}setCountryFromPhonePrefix(){var t;const e=this.countries.find((t=>t.phone_prefix===this.phone_prefix));if(!e){throw new Error("Invalid country id")}this.currentCountry=Object.assign({},e);this.textChange.emit({phone_prefix:(t=this.currentCountry)===null||t===void 0?void 0:t.phone_prefix,mobile:this.value})}setCurrentCountry(t){var e;const i=this.countries.find((e=>e.id===t));if(!i){throw new Error("Invalid country id")}this.currentCountry=Object.assign({},i);this.textChange.emit({phone_prefix:(e=this.currentCountry)===null||e===void 0?void 0:e.phone_prefix,mobile:this.value})}render(){var t,e;return i(n,{key:"2c809ac5c9af76085137f46cbf27c2c6a319561e"},i("div",{key:"d5440840bd88eb0688393254f618186ef293234d",class:"form-group mr-0"},i("div",{key:"5b8f61d6f4c1e8d2bce23d10b590e19eca038d62",class:"input-group row m-0 p-0 position-relative"},this.label&&i("div",{class:`input-group-prepend col-3 p-0 text-dark border-none`},i("label",{class:`input-group-text  border-theme flex-grow-1 text-dark  `},this.label)),i("div",{key:"5872fd2209fb93ab0c42df2a178801e9b2ef8690",class:"form-control  input-container  flex-fill"+(this.error?" is-invalid":"")},i("button",{key:"4d47235b56a178dd0fdaff2f6bc0a947313769de",onClick:()=>this.isDropdownVisible=!this.isDropdownVisible,class:"dropdown-trigger"},i("img",{key:"26148b13229ada0d7eb9e7974b28658da1441c0f",src:(t=this.currentCountry)===null||t===void 0?void 0:t.flag,class:"flag"}),i("svg",{key:"d4109db7fd9cc9b8a7877073783f5614332433df",xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},i("path",{key:"d1de6d228a4044440427d06b0740d4051c7400c8",d:"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"}))),i("label",{key:"96fd7b9a23b546295ba6a39c83670cd68e1b4b7d"},(e=this.currentCountry)===null||e===void 0?void 0:e.phone_prefix),i("input",{key:"6a04e5319311e8d85b66fed61f22f2aa7e9ccdf5",type:"text",required:true,value:this.inputValue,disabled:this.disabled,onInput:t=>this.handleInputChange(t)}))," ",this.isDropdownVisible&&i("div",{class:"ir-dropdown-container"},i("ir-combobox",{onComboboxValueChange:t=>{this.setCurrentCountry(+t.detail.data);this.isDropdownVisible=false},class:"bg-white",autoFocus:true,placeholder:"Search country",data:this.countries.map((t=>({id:t.id.toString(),name:`${t.name} (${t.phone_prefix})`})))}))),this.error&&i("div",{class:"invalid-feedback"},"Please enter a valid phone number.")))}get el(){return s(this)}};ot.style=at;const rt=".border-theme.sc-ir-select{border:1px solid #cacfe7}@keyframes bounce{0%,100%{transform:scale(1);animation-timing-function:cubic-bezier(0.8, 0, 1, 1)}50%{transform:scale(1.2);animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}}.bounce-3.sc-ir-select{animation:bounce 1s 1}";const ct=rt;const dt=class{constructor(i){t(this,i);this.selectChange=e(this,"selectChange",7);this.count=0;this.name=undefined;this.data=undefined;this.label="<label>";this.selectStyles=undefined;this.selectContainerStyle=undefined;this.selectedValue=null;this.required=undefined;this.LabelAvailable=true;this.firstOption="Select";this.selectStyle=true;this.showFirstOption=true;this.submited=false;this.size="md";this.textSize="md";this.labelPosition="left";this.labelBackground=null;this.labelColor="dark";this.labelBorder="theme";this.labelWidth=3;this.select_id=a();this.initial=true;this.valid=false}watchHandler(t){if(t!==null&&this.required){this.valid=true}}watchHandler2(t){if(t&&this.required){this.initial=false}}handleButtonAnimation(t){console.log(t.detail,this.select_id,t.detail===this.select_id);if(!this.selectEl||t.detail!==this.select_id){return}console.log("first1");t.stopImmediatePropagation();t.stopPropagation();this.selectEl.classList.add("border-danger")}componentwillload(){}disconnectedCallback(){}handleSelectChange(t){this.selectEl.classList.remove("border-danger");if(this.required){this.initial=false;this.valid=t.target.checkValidity();this.selectedValue=t.target.value;this.selectChange.emit(this.selectedValue)}else{this.selectedValue=t.target.value;this.selectChange.emit(this.selectedValue)}}render(){let t="form-control";let e=i("div",{key:"f5e640fac6435f269aa640cf0f5cd5fb2d4aa5f7",class:`input-group-prepend col-${this.labelWidth} p-0 text-${this.labelColor}`},i("label",{key:"561e3b5ee8783478fa23d6efe6f6a28627709a88",htmlFor:this.select_id,class:`input-group-text ${this.labelPosition==="right"?"justify-content-end":this.labelPosition==="center"?"justify-content-center":""} ${this.labelBackground?"bg-"+this.labelBackground:""} flex-grow-1 text-${this.labelColor} border-${this.labelBorder==="none"?0:this.labelBorder} `},this.label,this.required?"*":""));if(this.selectStyle===false){t=""}if(this.required&&!this.valid&&!this.initial){t=`${t} border-danger`}if(!this.LabelAvailable){e=""}return i("div",{key:"ca3bac1c885f33a1bdb804ca50c1f5c866623853",class:`form-group m-0 ${this.selectContainerStyle}`},i("div",{key:"e9f64511c6d62b7dd91ad3de610c39523fbf4562",class:"input-group row m-0"},e,i("select",{key:"7e96305d6a0ca0870d1b4874a56e66da9e635c92",ref:t=>this.selectEl=t,id:this.select_id,class:`${this.selectStyles} ${t} form-control-${this.size} text-${this.textSize} col-${this.LabelAvailable?12-this.labelWidth:12}`,onInput:this.handleSelectChange.bind(this),required:this.required},this.showFirstOption&&i("option",{value:""},this.firstOption),this.data.map((t=>{if(this.selectedValue===t.value){return i("option",{selected:true,value:t.value},t.text)}else{return i("option",{value:t.value},t.text)}})))))}static get watchers(){return{selectedValue:["watchHandler"],submited:["watchHandler2"]}}};dt.style=ct;const lt=".backdrop{position:fixed;top:0;left:0;width:100%;height:100vh;cursor:pointer;background:rgba(0, 0, 0, 0.5);z-index:99;transition:all 0.5s;opacity:0;pointer-events:none;transition:all 0.5s}.backdrop.active{opacity:1;pointer-events:all}.sidebar-right{position:fixed;top:0;right:-120%;bottom:0;width:var(--sidebar-width, 40rem);max-width:100%;box-shadow:0 0 10px rgba(0, 0, 0, 0.1);transition:all 0.5s;z-index:100;overflow-y:hidden;color:var(--sidebar-color, #000);background-color:var(--sidebar-backgound, #fff);padding:0.5rem 0}.sidebar-right.active{right:0;overflow-y:auto}.sidebar-left{position:fixed;top:0;left:-100%;bottom:0;width:var(--sidebar-width, 30rem);max-width:100%;box-shadow:0 0 10px rgba(0, 0, 0, 0.1);transition:all 0.5s;z-index:200;overflow-y:hidden;color:var(--sidebar-color, #000);background:var(--sidebar-backgound, #fff);padding:0.5rem}.sidebar-left.active{left:0;overflow-y:scroll}.close{position:absolute;top:0.5rem;right:1rem;width:1rem;height:1rem;cursor:pointer}";const ht=lt;const ut=class{constructor(i){t(this,i);this.irSidebarToggle=e(this,"irSidebarToggle",7);this.name=undefined;this.side="right";this.showCloseButton=true;this.open=false;this.sidebarStyles=undefined}applyStyles(){for(const t in this.sidebarStyles){if(this.sidebarStyles.hasOwnProperty(t)){this.sidebarRef.style[t]=this.sidebarStyles[t]}}}handleSidebarStylesChange(){this.applyStyles()}componentWillLoad(){this.handleKeyDown=this.handleKeyDown.bind(this)}componentDidLoad(){this.applyStyles();document.addEventListener("keydown",this.handleKeyDown)}handleKeyDown(t){if(t.key==="Escape"){return this.toggleSidebar()}else{return}}disconnectedCallback(){document.removeEventListener("keydown",this.handleKeyDown)}async toggleSidebar(){this.irSidebarToggle.emit(this.open)}render(){let t="";if(this.open){t="active"}else{t=""}return[i("div",{key:"26b6454f7c13ca0b800fe4f16fc7b0b7c5ccd01c",class:`backdrop ${t}`,onClick:()=>{this.toggleSidebar()}}),i("div",{key:"1a786af4505fea52cca0e058be6c83fa458a2624",ref:t=>this.sidebarRef=t,class:`sidebar-${this.side} ${t}`},this.showCloseButton&&i("ir-icon",{class:"close",onIconClickHandler:()=>{this.toggleSidebar()}},i("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",height:20,width:20},i("path",{fill:"#6b6f82",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"}))),i("slot",{key:"af78058ac355ec112ac7c1069255d998adeb72a9",name:"sidebar-body"}))]}static get watchers(){return{sidebarStyles:["handleSidebarStylesChange"]}}};ut.style=ht;const ft=".sc-ir-switch-h{display:block;position:relative;box-sizing:border-box;--ir-root-width:36px;--ir-root-height:20px}.hidden-input.sc-ir-switch{transform:translateX(-100%);position:absolute;pointer-events:none;opacity:0;margin:0;width:var(--ir-root-width);height:var(--ir-root-height)}.SwitchRoot.sc-ir-switch{all:unset;padding:0;margin:0;width:var(--ir-root-width);height:var(--ir-root-height);background-color:var(--ir-root-inactive-color, #ff4961);position:relative;box-shadow:rgba(0, 0, 0, 0.2) 0px 2px 10px;--webkit-tap-highlight-color:rgba(0, 0, 0, 0);border-radius:9999px;box-sizing:border-box}.SwitchRoot.sc-ir-switch:disabled{opacity:80%}.SwitchRoot.sc-ir-switch:focus-visible{outline:1px solid var(--ir-root-active-color, rgb(55, 188, 155));outline-offset:1px}.SwitchRoot[data-state='checked'].sc-ir-switch{background-color:var(--ir-root-active-color, rgb(55, 188, 155))}.SwitchThumb.sc-ir-switch{padding:0;margin:0;display:block;width:calc(var(--ir-root-height) - 3px);height:calc(var(--ir-root-height) - 3px);border-radius:9999px;background:white;box-shadow:rgba(0, 0, 0, 0.2) 0px;transition:transform 100ms ease 0s;transform:translateX(2px);will-change:transform}.SwitchThumb[data-state='checked'].sc-ir-switch{transform:translateX(calc(var(--ir-root-height) - 3px))}";const pt=ft;const bt=class{constructor(i){t(this,i);this.checkChange=e(this,"checkChange",7);this._id="";this.checked=false;this.switchId=undefined;this.disabled=false}componentWillLoad(){this._id=this.generateRandomId(10)}componentDidLoad(){if(!this.switchRoot){return}this.switchRoot.setAttribute("aria-checked",this.checked?"true":"false")}generateRandomId(t){let e="";const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";const s=i.length;for(let n=0;n<t;n++){e+=i.charAt(Math.floor(Math.random()*s))}return e}handleCheckChange(){this.checked=!this.checked;this.switchRoot.setAttribute("aria-checked",this.checked?"true":"false");this.checkChange.emit(this.checked)}render(){return i(n,{key:"0d5812a41115352d093854591da1e540b1a705a5"},i("button",{key:"47f31d25f4f81c010f5eff4647f19433191fe2c2",disabled:this.disabled,ref:t=>this.switchRoot=t,type:"button",id:this.switchId||this._id,onClick:this.handleCheckChange.bind(this),role:"switch","data-state":this.checked?"checked":"unchecked",value:"on",class:"SwitchRoot"},i("span",{key:"d28ce8203409c6afbad4abf6e4e5142391b21aae",class:"SwitchThumb","data-state":this.checked?"checked":"unchecked"})),i("input",{key:"f2d1491d637fdb9b03c150384b16274afbfd898e",type:"checkbox",checked:this.checked,"aria-hidden":"true",tabIndex:-1,value:"on",class:"hidden-input"}))}};bt.style=pt;const mt="button.sc-ir-toast,p.sc-ir-toast,h3.sc-ir-toast,div.sc-ir-toast{all:unset}.sc-ir-toast-h{--rd-viewport-padding:25px;--rd-success:#2b9a66;position:fixed;bottom:0;right:0;display:flex;flex-direction:column;padding:var(--rd-viewport-padding);gap:10px;max-width:100vw;margin:0;list-style:none;z-index:2147483647;outline:none;pointer-events:none;-webkit-user-select:none;user-select:none}@media (prefers-color-scheme: dark){.sc-ir-toast-h{--rd-success:#33b074}}p.sc-ir-toast{color:hsla(222.2, 84%, 4.9%, 0.8);font-size:13px;line-height:1.3}h1.sc-ir-toast,h2.sc-ir-toast,h3.sc-ir-toast,h4.sc-ir-toast,h5.sc-ir-toast,h6.sc-ir-toast{font-weight:500;color:hsl(222.2, 84%, 4.9%);font-size:15px}[position='top-left'].sc-ir-toast-h{top:0;left:0}[position='top-right'].sc-ir-toast-h{top:0;right:0}[position='bottom-left'].sc-ir-toast-h{bottom:0;left:0}[position='bottom-right'].sc-ir-toast-h{bottom:0;right:0}.icon-container.sc-ir-toast{height:25px;width:25px;border-radius:25px;display:flex;align-items:center;justify-content:center;padding:0;margin:0}.icon-container.sc-ir-toast>svg.sc-ir-toast{margin:0;color:white;stroke-width:5px}.success.sc-ir-toast{background-color:var(--rd-success)}.error.sc-ir-toast{background-color:red}.ToastRoot.sc-ir-toast{background-color:hsl(0, 0%, 100%);border-radius:0.5rem;box-shadow:hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px;padding:15px;display:grid;grid-template-areas:'title action' 'description action';grid-template-columns:auto max-content;column-gap:15px;align-items:center;pointer-events:none;opacity:0;border:1px solid hsl(214.3, 31.8%, 91.4%);position:relative}.ToastRoot[data-state='open'].sc-ir-toast{pointer-events:all;animation:slideIn 150ms cubic-bezier(0.16, 1, 0.3, 1)}.ToastRoot[data-state='closed'].sc-ir-toast{pointer-events:none;animation:hide 100ms ease-in}@-webkit-keyframes slideIn{from{transform:translateX(var(--rd-offset-width))}to{transform:translateX(0)}}@keyframes slideIn{from{transform:translateX(var(--rd-offset-width))}to{transform:translateX(0)}}.ToastTitle.sc-ir-toast{grid-area:title;font-weight:500;color:hsl(222.2, 84%, 4.9%);font-size:15px}.ToastDescription.sc-ir-toast{grid-area:description;margin:0;margin-top:5px;color:hsla(222.2, 84%, 4.9%, 0.8);font-size:13px;line-height:1.3;overflow:hidden;text-overflow:ellipsis}.ToastAction.sc-ir-toast{grid-area:action}";const gt=mt;const xt=class{constructor(e){t(this,e);this.position="bottom-left";this.toasts=[]}onToast(t){const e=t.detail;this.showToast(e)}showToast(t){const e={positionClass:"toast-top-right",closeButton:true,timeOut:t.duration||5e3};switch(t.type){case"success":toastr.success(t.title,"",e);break;case"error":toastr.error(t.title,"",e);break}}render(){return i(n,{key:"e0e67252a8759bb24081a31ce40e5a4aa59aa9b7"})}get element(){return s(this)}};xt.style=gt;const kt=".sc-ir-unit-status-h{display:block}.circle.sc-ir-unit-status{display:inline-flex;border-radius:50%}.green.sc-ir-unit-status{background:#629a4c}.red.sc-ir-unit-status{background:#ff4961}.orange.sc-ir-unit-status{background:#ff9149}.table-container.sc-ir-unit-status{width:100%;overflow-x:auto}.black.sc-ir-unit-status{background:#000}table.sc-ir-unit-status{width:max-content}td.sc-ir-unit-status{min-width:140px;text-align:center}.smallcircle.sc-ir-unit-status{height:7px;width:7px}.bigcircle.sc-ir-unit-status{height:7px;width:7px}.status-container.sc-ir-unit-status,.action-container.sc-ir-unit-status{display:flex;align-items:center;gap:8px}.status-container.sc-ir-unit-status p.sc-ir-unit-status{margin:0}";const yt=kt;const vt=class{constructor(e){t(this,e);this.housekeepingService=new j}componentWillLoad(){this.housekeepingService.setToken(C.default_properties.token)}async handleSelectChange(t){t.stopPropagation();t.stopImmediatePropagation();const e=t.detail;let i;if(e===""){i={is_active:false,window:-1}}else{i={is_active:true,window:+e}}await this.housekeepingService.setExposedInspectionMode(C.default_properties.property_id,i)}render(){var t;return i(n,{key:"b9ccf4be982331f2c522260533953b5a677e89ce",class:"card p-1"},i("h4",{key:"13627659ed3993acb46ab9d7ac831837e915e74f"},"Room or Unit Status"),i("div",{key:"1ba270de17b94c4d5d7e8849fbfe25a0aadc45e3",class:"table-container"},i("table",{key:"be220c8f3c42e1c8588e37b947954d4702571125"},i("thead",{key:"42c194a9a5cf5019d32a922ed04aa16e657470cc"},i("tr",{key:"816a825e3bae7f27c5553e845ece70a2cf97b215"},i("th",{key:"c06f105e12276ed44faa25e18a079b17c55b60e4"},"Status"),i("th",{key:"730b935e970d663808eb7d2ff56c6fe3e001908f",class:"text-center"},"Code"),i("th",{key:"733d6fef846e6e202dd3813652dd7dacbc314bd8"},"Action"))),i("tbody",{key:"2ad964668de00f4847d3696d825d8035821146c8"},(t=C.hk_criteria.statuses)===null||t===void 0?void 0:t.map((t=>{var e;return i("tr",{key:t.code},i("td",null,i("div",{class:"status-container"},i("span",{class:`circle ${t.style.shape} ${t.style.color}`}),i("p",null,t.description))),i("td",null,t.code),i("td",null,i("div",{class:"action-container"},i("p",{class:"m-0"},t.action),((e=t.inspection_mode)===null||e===void 0?void 0:e.is_active)&&i("div",null,i("ir-select",{LabelAvailable:false,firstOption:"No",onSelectChange:this.handleSelectChange.bind(this),data:Array.from(Array(t.inspection_mode.window+1),((t,e)=>e)).map((t=>{const e=t===0?"Yes on the same day.":t.toString()+" day prior.";return{text:e,value:t.toString()}}))})))))}))))))}};vt.style=yt;export{g as ir_button,y as ir_combobox,w as ir_common,M as ir_delete_modal,A as ir_hk_team,O as ir_hk_unassigned_units,K as ir_hk_user,q as ir_housekeeping,N as ir_icon,Q as ir_input_text,tt as ir_interceptor,st as ir_loading_screen,ot as ir_phone_input,dt as ir_select,ut as ir_sidebar,bt as ir_switch,xt as ir_toast,vt as ir_unit_status};
//# sourceMappingURL=p-49a0083c.entry.js.map