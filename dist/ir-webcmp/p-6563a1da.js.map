{"version":3,"names":["initialState","channels","settlement_methods","statuses","types","token","rowCount","bookings","balance_filter","userSelection","from","moment","add","format","to","channel","property_id","start_row","end_row","total_count","filter_type","name","book_nbr","booking_status","affiliate_id","is_mpo_managed","is_mpo_used","is_for_mobile","is_combined_view","is_to_export","download_url","state","booking_listing","onChange","onBookingListingChange","createStore","initializeUserSelection","Object","assign","code","id","value","updateUserSelections","params","updateUserSelection","key","BookingListingService","getExposedBookingsCriteria","data","axios","post","result","My_Result","getExposedBookings","extras","header","My_Params_Get_Exposed_Bookings","exported_data_url","removeExposedBooking","booking_nbr","is_to_revover"],"sources":["src/stores/booking_listing.store.ts","src/services/booking_listing.service.ts"],"sourcesContent":["import { IExposedBookingsCriteria } from '@/models/IrBookingListing';\nimport { Booking } from '@/models/booking.dto';\nimport { createStore } from '@stencil/store';\nimport moment from 'moment';\n\nexport interface IBookingListingStore extends IExposedBookingsCriteria {\n  token: string;\n  userSelection: IUserListingSelection;\n  bookings: Booking[];\n  download_url: string | null;\n  rowCount: number;\n  balance_filter: { name: string; value: string }[];\n}\nexport interface IUserListingSelection {\n  channel: string;\n  property_id: number;\n  balance_filter: string;\n  filter_type: number | string;\n  from: string;\n  to: string;\n  name: string;\n  book_nbr: string;\n  booking_status: string;\n  affiliate_id: 0;\n  is_mpo_managed: false;\n  is_mpo_used: false;\n  is_for_mobile: false;\n  is_combined_view: false;\n  start_row: number;\n  end_row: number;\n  total_count: number;\n  is_to_export: boolean;\n}\n\nconst initialState: IBookingListingStore = {\n  channels: [],\n  settlement_methods: [],\n  statuses: [],\n  types: [],\n  token: '',\n  rowCount: 10,\n  bookings: [],\n  balance_filter: [],\n  userSelection: {\n    from: moment().add(-7, 'days').format('YYYY-MM-DD'),\n    to: moment().format('YYYY-MM-DD'),\n    channel: '',\n    balance_filter: null,\n    property_id: null,\n    start_row: 0,\n    end_row: 20,\n    total_count: 0,\n    filter_type: null,\n    name: '',\n    book_nbr: '',\n    booking_status: '',\n    affiliate_id: 0,\n    is_mpo_managed: false,\n    is_mpo_used: false,\n    is_for_mobile: false,\n    is_combined_view: false,\n    is_to_export: false,\n  },\n  download_url: null,\n};\n\nexport const { state: booking_listing, onChange: onBookingListingChange } = createStore<IBookingListingStore>(initialState);\nexport function initializeUserSelection() {\n  //booking_listing.channels[0].name\n  booking_listing.userSelection = {\n    ...booking_listing.userSelection,\n    channel: '',\n    booking_status: booking_listing.statuses[0].code,\n    filter_type: booking_listing.types[0].id,\n    book_nbr: '',\n    name: '',\n    from: moment().add(-7, 'days').format('YYYY-MM-DD'),\n    to: moment().format('YYYY-MM-DD'),\n    start_row: 0,\n    end_row: booking_listing.rowCount,\n    balance_filter: booking_listing.balance_filter[0].value,\n  };\n}\nexport function updateUserSelections(params: Partial<IUserListingSelection>) {\n  booking_listing.userSelection = {\n    ...booking_listing.userSelection,\n    ...params,\n  };\n}\nexport function updateUserSelection(key: keyof IUserListingSelection, value: any) {\n  booking_listing.userSelection = {\n    ...booking_listing.userSelection,\n    [key]: value,\n  };\n}\nexport default booking_listing;\n","import booking_listing, { IUserListingSelection, initializeUserSelection } from '@/stores/booking_listing.store';\nimport { extras } from '@/utils/utils';\nimport axios from 'axios';\n\nexport class BookingListingService {\n  public async getExposedBookingsCriteria(property_id: number) {\n    const { data } = await axios.post(`/Get_Exposed_Bookings_Criteria`, {\n      property_id,\n    });\n    const result = data.My_Result;\n    booking_listing.channels = result.channels;\n    booking_listing.settlement_methods = result.settlement_methods;\n    booking_listing.statuses = result.statuses;\n    booking_listing.types = result.types;\n    booking_listing.balance_filter = result.balance_filter;\n    initializeUserSelection();\n  }\n\n  public async getExposedBookings(params: IUserListingSelection) {\n    const { data } = await axios.post(`/Get_Exposed_Bookings`, { ...params, extras });\n    const result = data.My_Result;\n    const header = data.My_Params_Get_Exposed_Bookings;\n    booking_listing.bookings = [...result];\n    booking_listing.userSelection = {\n      ...booking_listing.userSelection,\n      total_count: header.total_count,\n    };\n    booking_listing.download_url = header.exported_data_url;\n  }\n  public async removeExposedBooking(booking_nbr: string, is_to_revover: boolean) {\n    await axios.post(`/Remove_Exposed_Booking`, {\n      booking_nbr,\n      is_to_revover,\n    });\n  }\n}\n"],"mappings":"yGAkCA,MAAMA,EAAqC,CACzCC,SAAU,GACVC,mBAAoB,GACpBC,SAAU,GACVC,MAAO,GACPC,MAAO,GACPC,SAAU,GACVC,SAAU,GACVC,eAAgB,GAChBC,cAAe,CACbC,KAAMC,IAASC,KAAK,EAAG,QAAQC,OAAO,cACtCC,GAAIH,IAASE,OAAO,cACpBE,QAAS,GACTP,eAAgB,KAChBQ,YAAa,KACbC,UAAW,EACXC,QAAS,GACTC,YAAa,EACbC,YAAa,KACbC,KAAM,GACNC,SAAU,GACVC,eAAgB,GAChBC,aAAc,EACdC,eAAgB,MAChBC,YAAa,MACbC,cAAe,MACfC,iBAAkB,MAClBC,aAAc,OAEhBC,aAAc,M,MAGDC,MAAOC,EAAiBC,SAAUC,GAA2BC,EAAkCnC,G,SAC9FoC,IAEdJ,EAAgBvB,cAAa4B,OAAAC,OAAAD,OAAAC,OAAA,GACxBN,EAAgBvB,eAAa,CAChCM,QAAS,GACTQ,eAAgBS,EAAgB7B,SAAS,GAAGoC,KAC5CnB,YAAaY,EAAgB5B,MAAM,GAAGoC,GACtClB,SAAU,GACVD,KAAM,GACNX,KAAMC,IAASC,KAAK,EAAG,QAAQC,OAAO,cACtCC,GAAIH,IAASE,OAAO,cACpBI,UAAW,EACXC,QAASc,EAAgB1B,SACzBE,eAAgBwB,EAAgBxB,eAAe,GAAGiC,OAEtD,C,SACgBC,EAAqBC,GACnCX,EAAgBvB,cAAa4B,OAAAC,OAAAD,OAAAC,OAAA,GACxBN,EAAgBvB,eAChBkC,EAEP,C,SACgBC,EAAoBC,EAAkCJ,GACpET,EAAgBvB,cAAa4B,OAAAC,OAAAD,OAAAC,OAAA,GACxBN,EAAgBvB,eAAa,CAChCoC,CAACA,GAAMJ,GAEX,C,MC1FaK,EACJ,gCAAMC,CAA2B/B,GACtC,MAAMgC,KAAEA,SAAeC,EAAMC,KAAK,iCAAkC,CAClElC,gBAEF,MAAMmC,EAASH,EAAKI,UACpBpB,EAAgB/B,SAAWkD,EAAOlD,SAClC+B,EAAgB9B,mBAAqBiD,EAAOjD,mBAC5C8B,EAAgB7B,SAAWgD,EAAOhD,SAClC6B,EAAgB5B,MAAQ+C,EAAO/C,MAC/B4B,EAAgBxB,eAAiB2C,EAAO3C,eACxC4B,G,CAGK,wBAAMiB,CAAmBV,GAC9B,MAAMK,KAAEA,SAAeC,EAAMC,KAAK,wBAAuBb,OAAAC,OAAAD,OAAAC,OAAA,GAAOK,GAAM,CAAEW,YACxE,MAAMH,EAASH,EAAKI,UACpB,MAAMG,EAASP,EAAKQ,+BACpBxB,EAAgBzB,SAAW,IAAI4C,GAC/BnB,EAAgBvB,cAAa4B,OAAAC,OAAAD,OAAAC,OAAA,GACxBN,EAAgBvB,eAAa,CAChCU,YAAaoC,EAAOpC,cAEtBa,EAAgBF,aAAeyB,EAAOE,iB,CAEjC,0BAAMC,CAAqBC,EAAqBC,SAC/CX,EAAMC,KAAK,0BAA2B,CAC1CS,cACAC,iB","ignoreList":[]}