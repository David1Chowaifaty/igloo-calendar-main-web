import{r as t,c as i,h as e,H as s}from"./p-c956c3dc.js";import{B as o}from"./p-bde93f7c.js";import{R as n}from"./p-2b57e40c.js";import{c as a}from"./p-5b9e0f52.js";import{l as r}from"./p-e8598257.js";import{a as h}from"./p-f5b71ff4.js";import"./p-28026c73.js";const c=".sc-igl-book-property-container-h{display:block;margin:0;padding:0;letter-spacing:0px !important;font-family:'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;font-size:1rem !important;font-weight:400 !important;line-height:1.45 !important;color:#6b6f82 !important;text-align:left !important}.book-container.sc-igl-book-property-container{width:min-content;margin:0;padding:0}h3.sc-igl-book-property-container{font-size:1rem}";const d=c;const l=class{constructor(e){t(this,e);this.resetBookingData=i(this,"resetBookingData",7);this.bookingService=new o;this.roomService=new n;this.language="";this.ticket="";this.baseurl="";this.propertyid=undefined;this.from_date=undefined;this.to_date=undefined;this.bookingItem=undefined;this.showPaymentDetails=undefined;this.countryNodeList=undefined;this.calendarData={}}setRoomsData(t){var i,e;let s=new Array;if((e=(i=t.My_Result)===null||i===void 0?void 0:i.roomtypes)===null||e===void 0?void 0:e.length){s=t.My_Result.roomtypes;t.My_Result.roomtypes.forEach((t=>{t.expanded=true}))}this.calendarData.roomsInfo=s}async initializeApp(){try{const[t,i,e]=await Promise.all([this.roomService.fetchData(this.propertyid,this.language),this.roomService.fetchLanguage(this.language),this.bookingService.getCountries(this.language)]);console.log(i);if(!r.entries){r.entries=i.entries;r.direction=i.direction}this.countryNodeList=e;const{allowed_payment_methods:s,currency:o,allowed_booking_sources:n,adult_child_constraints:a,calendar_legends:h}=t["My_Result"];this.calendarData={currency:o,allowed_booking_sources:n,adult_child_constraints:a,legendData:h};this.setRoomsData(t);const c=["001","004"];this.showPaymentDetails=s.some((t=>c.includes(t.code)))}catch(t){console.error("Error initializing app:",t)}}componentWillLoad(){if(this.baseurl){h.defaults.baseURL=this.baseurl}if(this.ticket!==""){a.token=this.ticket;this.bookingService.setToken(this.ticket);this.roomService.setToken(this.ticket);this.initializeApp()}}async ticketChanged(){a.token=this.ticket;this.bookingService.setToken(this.ticket);this.roomService.setToken(this.ticket);this.initializeApp()}handleCloseBookingWindow(){this.bookingItem=null}handleTriggerClicked(){const t=new Date;t.setDate(t.getDate()+1);this.bookingItem={FROM_DATE:this.from_date,defaultDateRange:{fromDate:new Date,fromDateStr:"",toDate:t,toDateStr:"",dateDifference:0,message:""},TO_DATE:this.to_date,EMAIL:"",event_type:"PLUS_BOOKING",ID:"",NAME:"",PHONE:"",REFERENCE_TYPE:"",TITLE:r.entries.Lcz_NewBooking}}render(){return e(s,{key:"7a8f07fb99c7bacc98aec1edd9b40dbb70001ede"},e("ir-toast",{key:"5d5305f9a51ca109d060c60d7f58e36a42e608df"}),e("ir-interceptor",{key:"f26fef91aa119ab958d3a120f7222399c5d2c07f"}),e("div",{key:"ae38267441056e0ff806703ee760db69633dbaa3",class:"book-container",onClick:this.handleTriggerClicked.bind(this)},e("slot",{key:"6b2c8e70ba1f7e0a4443d3a983882718749508dc",name:"trigger"})),this.bookingItem&&e("igl-book-property",{allowedBookingSources:this.calendarData.allowed_booking_sources,adultChildConstraints:this.calendarData.adult_child_constraints,showPaymentDetails:this.showPaymentDetails,countryNodeList:this.countryNodeList,currency:this.calendarData.currency,language:this.language,propertyid:this.propertyid,bookingData:this.bookingItem,onResetBookingData:t=>{t.stopImmediatePropagation();t.stopPropagation();this.resetBookingData.emit(null)},onCloseBookingWindow:()=>this.handleCloseBookingWindow()}))}static get watchers(){return{ticket:["ticketChanged"]}}};l.style=d;export{l as igl_book_property_container};
//# sourceMappingURL=p-48d4f96b.entry.js.map