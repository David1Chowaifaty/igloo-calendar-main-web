{"version":3,"names":["iglBookingEventCss","IglBookingEventStyle0","IglBookingEvent","constructor","hostRef","this","is_vacation_rental","allBookingEvents","renderElement","isShrinking","dayWidth","eventSpace","vertSpace","showInfoPopup","bubbleInfoTopSide","isStreatch","eventsService","EventsService","bookingService","BookingService","resizeSide","isDragging","animationFrameId","handleMouseMoveBind","handleMouseMove","bind","handleMouseUpBind","handleMouseUp","handleClickOutsideBind","handleClickOutside","componentWillLoad","window","addEventListener","fetchAndAssignBookingData","console","log","bookingEvent","BOOKING_NUMBER","validStatuses","includes","STATUS","data","getExposedBooking","filteredRooms","rooms","filter","room","ID","length","Error","some","transformedBooking","transformNewBooking","otherBookingData","__rest","Object","assign","booking","PHONE","PHONE_PREFIX","PRIVATE_NOTE","updateBookingEvent","emit","showEventInfo","error","message","componentDidLoad","isNewEvent","hideBubble","setTimeout","async","STATUS_CODE","renderAgain","disconnectedCallback","removeEventListener","cancelAnimationFrame","event","clickedElement","target","element","contains","hideBubbleInfoPopup","detail","currentInfoBubbleId","getBookingId","key","moveBookingToHandler","bookingId","moveToDay","toRoomId","FROM_DATE","fromRoomId","isTouchStart","moveDiffereneX","moveDiffereneY","isBlockUnit","requestAnimationFrame","resetBookingToInitialPosition","pool","to_date","from_date","checkIfSlotOccupied","reallocateEvent","catch","description","status","getModalDescription","hideConfirmButton","oldFromDate","defaultDates","oldToDate","diffDays","calculateDaysBetweenDates","shrinkingDirection","fromDate","toDate","moment","isAfter","isBefore","newToDate","add","format","subtract","warn","showDialog","reason","title","showRoomNightsDialog","bookingNumber","identifier","IDENTIFIER","toast","position","type","findRoomType","roomId","roomType","roomsInfo","physicalrooms","r","id","is_direct","locales","entries","Lcz_YouWillLoseFutureUpdates","isSame","TO_DATE","initialRT","PR_ID","targetRT","Lcz_AreYouSureWantToMoveAnotherUnit","origin","Label","Lcz_SameRatesWillBeKept","Lcz_CannotChangeCHBookings","Number","toString","Lcz_ConfrmModiication","style","left","initialLeft","width","initialWidth","finalWidth","top","dragInitPos","handleRevertBooking","POOL","fromTime","toTime","isOccupied","eventFromTime","eventToTime","isSameOrAfter","getUniqueId","Date","getTime","isSplitBooking","SPLIT_BOOKING","isHighlightEventType","getEventType","getBookingStatus","getBookedBy","NAME","getBookedRoomId","getEventStartingDate","getEventEndingDate","event_type","getEventLegend","_a","legendData","statusId","orderRide","color","_b","getLegendOfStatus","aStatusId","getNoteNode","NOTES","INTERNAL_NOTE","getBalanceNode","BALANCE","setStayDays","aStayDays","NO_OF_DAYS","getStayDays","getPosition","startingDate","startingCellClass","getDate","getMonth","getFullYear","bodyContainer","document","querySelector","startingCell","pos","height","getBoundingClientRect","bodyContainerRect","boundingRect","getNumber","aData","parseFloat","startDragging","side","preventDefault","stopPropagation","stopImmediatePropagation","initialX","clientX","touches","initialY","clientY","elementRect","offsetX","offsetY","x","y","dragEndPos","dragOverEventData","offsetWidth","offsetLeft","currentX","distanceX","currentY","distanceY","newWidth","Math","min","max","newLeft","abs","nbOfDays","numberOfDays","round","initialStayDays","isNaN","replace","offset","updateData","updateEventData","calculateHoverPosition","barRect","barWidth","barLeft","screenWidth","innerWidth","hoverLeft","transform","renderEventBookingNumber","channel_booking_nbr","showInfo","midPoint","hideBubbleInfo","render","legend","noteNode","balanceNode","h","Host","class","clsName","backgroundColor","onTouchStart","onMouseDown","Fragment","countries","currency","bubbleInfoTop","iglCalBodyCss","IglCalBodyStyle0","IglCalBody","dragOverElement","selectedRooms","currentDate","housekeepingService","HouseKeepingService","bookingMap","Map","interactiveTitle","setHours","getBookingMap","getBookingData","handleCalendarDataChange","dragOverHighlightElementHandler","gotoRoom","category","getRoomCategoryByRoomId","expanded","toggleCategory","scrollToRoom","addToBeAssignedEvents","addBookingDatas","scrollPageToRoom","refClass","calendarData","find","roomCategory","getCategoryRooms","getRoomId","getCategoryName","name","getCategoryId","getTotalPhysicalRooms","getRoomName","roomInfo","getRoomById","physicalRooms","physical_room","bookingEvents","addBookingDatasEvent","getSelectedCellRefName","selectedDay","getSplitBookingEvents","newEvent","closeWindow","ind","findIndex","ev","splice","addNewEvent","keys","startDate","endDate","EMAIL","convertBooking","REFERENCE_TYPE","getTwoDigitNumStr","RELEASE_AFTER_HOURS","ENTRY_DATE","ADULTS_COUNT","COUNTRY","RATE","TOTAL_PRICE","RATE_PLAN","ARRIVAL_TIME","TITLE","Lcz_NewBookingFor","CATEGORY","defaultDateRange","fromDateStr","toDateStr","dateDifference","editable","popupTitle","BLOCK_DATES_TITLE","Lcz_BlockDatesFor","getDateStr","toISOString","formattedLegendData","splitBookingEvents","push","num","date","locale","toLocaleString","month","removeNewEvent","events","clickCell","isScrollViewDragging","refKey","hasOwnProperty","showNewBookingPopup","bookings","today","startOf","isSameOrBefore","has","set","compareTime","createDateWithOffsetAndHour","calendar_data","checkin_checkout_hours","hour","getGeneralCategoryDayColumns","addClass","isCategory","index","calendar_dates","days","map","dayInfo","day","highlightedDate","rate","exposed_inventory","rts","getGeneralRoomDayColumns","roomName","onClick","getRoomCategoryRow","is_active","popoverTitle","xmlns","viewBox","fill","d","getRoomsByCategory","selectedRoom","hkModal","openModal","onMouseEnter","setProperty","onMouseLeave","removeProperty","ref","el","hk_status","hkStatus","getRoomRows","confirmHousekeepingUpdate","e","isLoading","newStatusCode","setExposedUnitHKStatus","property_id","propertyId","code","unit","executeHKAction","actions","hkm_id","_c","housekeeper","unit_id","_d","booking_nbr","_f","get","_e","closeModal","RATE_TYPE","language","leftBtnText","Lcz_Cancel","rightBtnText","Lcz_Update","modalBody","renderModalBody","onConfirmModal","autoClose","onCancelModal","iglCalFooterCss","IglCalFooterStyle0","IglCalFooter","handleOptionEvent","optionEvent","Lcz_Legend","dayDisplayName","iglCalHeaderCss","IglCalHeaderStyle0","IglCalHeader","unassignedRoomsNumber","searchValue","searchList","roomsList","toBeAssignedService","ToBeAssignedService","initializeRoomsList","handleUnAssignedDatesChange","newValue","fetchAndAssignUnassignedRooms","handleCalendarDataChanged","forEach","concat","assignRoomsToDate","unassignedDates","dt","selectedDate","result","getUnassignedRooms","propertyid","dateToFormattedString","res","newEndDate","renderView","handleReduceAvailableUnitEvent","showToBeAssigned","gotoToBeAssignedDate","handleDateSelect","handleClearSearch","handleFilterRooms","inputElement","value","trim","toLowerCase","toLocaleLowerCase","indexOf","handleScrollToRoom","gotoRoomEvent","getStringDateFormat","getNewBookingModel","setDate","Lcz_NewBooking","editabled","variant","icon_name","colorVariants","secondary","Lcz_UnassignedUnitsTooltip","onClickHandler","btn_styles","visibleBackgroundOnHover","minDate","onDateChanged","evt","Lcz_Navigate","slot","dateRef","Lcz_Today","Lcz_CreateNewBooking","placeholder","Lcz_FindUnit","onInput","monthsInfo","monthInfo","daysCount","monthName","unassigned_units_nbr","occupancy","iglLegendsCss","IglLegendsStyle0","IglLegends","legendInfo","design","Lcz_MonthAndYear","Lcz_UnassignedUnits","Lcz_Date","Lcz_Occupancy","Lcz_TotalAvailability","iglTbaCategoryViewCss","IglTbaCategoryViewStyle0","IglTbaCategoryView","categoriesData","handleAssignRoomEvent","opt","eventDatas","eventData","assignUnitEvent","RT_ID","categoryId","assignEvent","getEventView","categoryIndex","eventIndex","onAssignRoomEvent","iglToBeAssignedCss","IglToBeAssignedStyle0","IglToBeAssigned","showDatesList","orderedDatesList","noScroll","isGotoToBeAssignedDate","reArrangeData","loadingMessage","Lcz_FetchingUnAssignedUnits","handleUnassignedDatesToBeAssignedChange","setMinutes","setSeconds","sort","a","b","parseInt","showForDate","handleAssignUnit","categories","Array","isArray","updateCategories","categorisedRooms","roomIds","getUnassignedDates","firstKey","gotoDate","handleToBeAssignedDate","showBookingPopup","dateStamp","withLoading","showUnassignedDate","addToBeAssignedEvent","getDay","dayOfWeek","getLocalizedDayOfWeek","options","weekday","toLocaleDateString","highlightToBeAssignedBookingEvent","getToBeAssignedEntities","getCategoryView","onAssignUnitEvent","Lcz_Assignments","Lcz_AllBookingsAreAssigned","dateStr","ordDate","Lcz_AllAssignForThisDay","irInteractiveTitleCss","IrInteractiveTitleStyle0","IrInteractiveTitle","irPopoverLeft","cropSize","croppedTitle","initializePopover","titleElement","iconElement","croppedTitleEl","containerWidth","textWidth","scrollWidth","iconWidth","isOverflowing","slice","innerHTML","$","popover","trigger","content","placement","whiteSpace","overflow","textOverflow","irRoomNightsCss","IrRoomNightsStyle0","IrRoomNights","rates","initialLoading","inventory","isEndDateBeforeFromDate","defaultTotalNights","isInputFocused","dates","init","isButtonDisabled","amount","lastDay","fetchBookingAvailability","rateplan","newDatesArr","getDaysArray","cost","handleInput","inputValue","rate_plan_id","bookingAvailability","getBookingAvailability","adultChildCount","adult","selected_variation","adult_nbr","child","child_nbr","room_type_ids","roomtype","rate_plan_ids","rate_plan","rateplans","variations","variation","discounted_gross_amount","renderInputField","currency_symbol","disabled","onTextChange","renderReadOnlyField","toFixed","renderRateFields","renderDates","symbol","convertDatePrice","handleRoomConfirmation","oldRooms","selectedRoomIndex","body","assign_units","check_in","is_pms","pickup_info","extra_services","remark","property","source","arrival","guest","doReservation","closeRoomNightsDialog","Lcz_AddingRoomNightsTo","icon","Lcz_Booking","formatDate","is_non_refundable","Lcz_NonRefundable","Lcz_NoAvailabilityForAdditionalNights","custom_text","btn_color","btn_disabled","text","Lcz_Confirm"],"sources":["src/components/igloo-calendar/igl-booking-event/igl-booking-event.css?tag=igl-booking-event&encapsulation=scoped","src/components/igloo-calendar/igl-booking-event/igl-booking-event.tsx","src/components/igloo-calendar/igl-cal-body/igl-cal-body.css?tag=igl-cal-body&encapsulation=scoped","src/components/igloo-calendar/igl-cal-body/igl-cal-body.tsx","src/components/igloo-calendar/igl-cal-footer/igl-cal-footer.css?tag=igl-cal-footer&encapsulation=scoped","src/components/igloo-calendar/igl-cal-footer/igl-cal-footer.tsx","src/components/igloo-calendar/igl-cal-header/igl-cal-header.css?tag=igl-cal-header&encapsulation=scoped","src/components/igloo-calendar/igl-cal-header/igl-cal-header.tsx","src/components/igloo-calendar/igl-legends/igl-legends.css?tag=igl-legends&encapsulation=scoped","src/components/igloo-calendar/igl-legends/igl-legends.tsx","src/components/igloo-calendar/igl-to-be-assigned/igl-tba-category-view/igl-tba-category-view.css?tag=igl-tba-category-view&encapsulation=scoped","src/components/igloo-calendar/igl-to-be-assigned/igl-tba-category-view/igl-tba-category-view.tsx","src/components/igloo-calendar/igl-to-be-assigned/igl-to-be-assigned.css?tag=igl-to-be-assigned&encapsulation=scoped","src/components/igloo-calendar/igl-to-be-assigned/igl-to-be-assigned.tsx","src/components/ui/ir-interactive-title/ir-interactive-title.css?tag=ir-interactive-title&encapsulation=scoped","src/components/ui/ir-interactive-title/ir-interactive-title.tsx","src/components/igloo-calendar/ir-room-nights/ir-room-nights.css?tag=ir-room-nights&encapsulation=scoped","src/components/igloo-calendar/ir-room-nights/ir-room-nights.tsx"],"sourcesContent":[":host {\n  display: block;\n  position: absolute;\n  --ota-bar-width: 2px;\n}\n\n.bookingEventBase {\n  position: absolute;\n  background-color: rgb(49, 190, 241);\n  width: 100%;\n  height: 100%;\n  border-radius: 4px;\n  transform: skewX(-22deg);\n}\n\n.bookingEventBase.skewedLeft::before {\n  content: '';\n  position: absolute;\n  top: 0px;\n  bottom: 0;\n  left: -4px;\n  width: 50%;\n  height: 100%;\n  background-color: var(--ir-event-bg);\n  transform-origin: right;\n  transform: skewX(22deg);\n  border-radius: 4px;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.bookingEventBase.skewedRight::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: -4px;\n  width: 50%;\n  height: 100%;\n  background-color: var(--ir-event-bg);\n  transform-origin: left;\n  transform: skewX(22deg);\n  border-radius: 4px;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n}\n.bookingEventBase.border.skewedLeft::before {\n  border: var(--ota-bar-width) solid #424242;\n  border-right: 0;\n  border-left: 0;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  top: calc(var(--ota-bar-width) * -1);\n  height: 20px;\n  left: -4px;\n}\n.ota-booking-event {\n  border-width: var(--ota-bar-width) !important;\n}\n.bookingEventBase.border.skewedRight::before {\n  border: var(--ota-bar-width) solid #424242;\n  border-left: 0;\n  border-right: 0;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n  top: calc(var(--ota-bar-width) * -1);\n  height: 20px;\n  right: -4px;\n}\n.bookingEvent {\n  cursor: pointer;\n}\n.bookingEventBase {\n  cursor: pointer;\n}\n.bookingEventHiddenBase {\n  position: absolute;\n  top: 0;\n  left: -4px;\n  width: calc(100% + 8);\n}\n\n.bookingEventDragHandle {\n  position: absolute;\n  top: 0;\n  width: 15px;\n  height: 100%;\n  opacity: 0.1;\n  background-color: rgba(0, 0, 0, 0.15);\n  transform: skewX(-22deg);\n  border-radius: 4px;\n  /* display: none; */\n  cursor: pointer;\n}\n\n.splitBooking {\n  border-right: 2px solid #000000;\n}\n\n:host:hover .bookingEventDragHandle {\n  display: block;\n  opacity: 1;\n}\n\n:host.newEvent:hover .bookingEventDragHandle {\n  display: none;\n  opacity: 1;\n}\n\n.leftSide {\n  left: 0;\n}\n.leftSide.skewedLeft {\n  transform: skewX(0);\n}\n.rightSide.skewedRight {\n  transform: skewX(0);\n}\n.rightSide {\n  right: 0;\n}\n\n.bookingEventTitle {\n  color: #fff;\n  font-size: 0.8em;\n  position: relative;\n  max-width: calc(100% - 10px);\n  overflow: hidden;\n  text-overflow: ellipsis;\n  top: 2px;\n  left: 5px;\n  -webkit-user-select: none;\n  user-select: none;\n  -webkit-user-drag: none;\n  cursor: pointer;\n}\n\n.legend_circle {\n  border-radius: 100%;\n  width: 10px;\n  height: 10px;\n  margin: 3px 3px 3px 2px;\n  border: 1px solid #fff;\n}\n\n.noteIcon {\n  position: absolute;\n  bottom: -8px;\n  left: 2px;\n}\n\n.balanceIcon {\n  position: absolute;\n  top: -8px;\n  right: 2px;\n}\n","import { Component, Element, Event, EventEmitter, Fragment, Host, Listen, Prop, State, h } from '@stencil/core';\nimport { BookingService } from '@/services/booking.service';\nimport { calculateDaysBetweenDates, transformNewBooking } from '@/utils/booking';\nimport { isBlockUnit } from '@/utils/utils';\nimport { IRoomNightsData, CalendarModalEvent } from '@/models/property-types';\nimport moment from 'moment';\nimport { IToast } from '@components/ui/ir-toast/toast';\nimport { EventsService } from '@/services/events.service';\nimport locales from '@/stores/locales.store';\nimport { ICountry } from '@/models/IBooking';\n\n@Component({\n  tag: 'igl-booking-event',\n  styleUrl: 'igl-booking-event.css',\n  scoped: true,\n})\nexport class IglBookingEvent {\n  @Element() private element: HTMLElement;\n\n  @Prop() currency;\n  @Prop() is_vacation_rental: boolean = false;\n  @Prop() language: string;\n  @Prop({ mutable: true }) bookingEvent: { [key: string]: any };\n  @Prop() allBookingEvents: { [key: string]: any } = [];\n  @Prop() countries: ICountry[];\n\n  @Event({ bubbles: true, composed: true }) hideBubbleInfo: EventEmitter;\n  @Event() updateEventData: EventEmitter;\n  @Event() dragOverEventData: EventEmitter;\n  @Event() showRoomNightsDialog: EventEmitter<IRoomNightsData>;\n  @Event() showDialog: EventEmitter<CalendarModalEvent>;\n  @Event() resetStreachedBooking: EventEmitter<string>;\n  @Event() toast: EventEmitter<IToast>;\n  @Event() updateBookingEvent: EventEmitter<{ [key: string]: any }>;\n\n  @State() renderElement: boolean = false;\n  @State() position: { [key: string]: any };\n  @State() isShrinking: boolean | null = null;\n\n  dayWidth: number = 0;\n  eventSpace: number = 8;\n\n  vertSpace: number = 10;\n\n  /* show bubble */\n  private showInfoPopup: boolean = false;\n  private bubbleInfoTopSide: boolean = false;\n  private isStreatch = false;\n  /*Services */\n  private eventsService = new EventsService();\n  private bookingService = new BookingService();\n  /* Resize props */\n  resizeSide: string = '';\n  isDragging: boolean = false;\n  initialX: number;\n  initialY: number;\n  currentX: number;\n  currentY: number;\n  initialWidth: number;\n  initialLeft: number;\n  finalWidth: number;\n  dragInitPos: { [key: string]: any };\n  dragEndPos: { [key: string]: any };\n  elementRect: { [key: string]: any };\n  isTouchStart: boolean;\n  moveDiffereneX: number;\n  moveDiffereneY: number;\n  private animationFrameId: number | null = null;\n\n  handleMouseMoveBind = this.handleMouseMove.bind(this);\n  handleMouseUpBind = this.handleMouseUp.bind(this);\n  handleClickOutsideBind = this.handleClickOutside.bind(this);\n\n  componentWillLoad() {\n    window.addEventListener('click', this.handleClickOutsideBind);\n  }\n\n  async fetchAndAssignBookingData() {\n    try {\n      console.log('clicked on book#', this.bookingEvent.BOOKING_NUMBER);\n\n      const validStatuses = ['IN-HOUSE', 'CONFIRMED', 'PENDING-CONFIRMATION', 'CHECKED-OUT'];\n      if (!validStatuses.includes(this.bookingEvent.STATUS)) {\n        return;\n      }\n\n      const data = await this.bookingService.getExposedBooking(this.bookingEvent.BOOKING_NUMBER, 'en');\n      const filteredRooms = data.rooms.filter(room => room['assigned_units_pool'] === this.bookingEvent.ID);\n\n      if (filteredRooms.length === 0) {\n        throw new Error(`booking#${this.bookingEvent.BOOKING_NUMBER} has an empty array`);\n      }\n\n      if (filteredRooms.some(room => room['assigned_units_pool'] === null)) {\n        throw new Error(`booking#${this.bookingEvent.BOOKING_NUMBER} has an empty pool`);\n      }\n\n      data.rooms = filteredRooms;\n\n      const transformedBooking = transformNewBooking(data)[0];\n      const { ID, TO_DATE, FROM_DATE, NO_OF_DAYS, STATUS, NAME, IDENTIFIER, PR_ID, POOL, BOOKING_NUMBER, NOTES, is_direct, BALANCE, ...otherBookingData } = transformedBooking;\n      this.bookingEvent = {\n        ...otherBookingData,\n        ...this.bookingEvent,\n        booking: data,\n        PHONE: otherBookingData.PHONE,\n        PHONE_PREFIX: otherBookingData.PHONE_PREFIX,\n        PRIVATE_NOTE: otherBookingData.PRIVATE_NOTE,\n      };\n      this.updateBookingEvent.emit(this.bookingEvent);\n      this.showEventInfo(true);\n    } catch (error) {\n      console.error(error.message);\n    }\n  }\n\n  componentDidLoad() {\n    if (this.isNewEvent()) {\n      if (!this.bookingEvent.hideBubble) {\n        /* auto matically open the popup, calling the method shows bubble either top or bottom based on available space. */\n        setTimeout(async () => {\n          if (['003', '002', '004'].includes(this.bookingEvent.STATUS_CODE)) {\n            this.showEventInfo(true);\n          } else if (['IN-HOUSE', 'CONFIRMED', 'PENDING-CONFIRMATION', 'CHECKED-OUT'].includes(this.bookingEvent.STATUS)) {\n            await this.fetchAndAssignBookingData();\n          } else {\n            this.showEventInfo(true);\n          }\n          this.renderAgain();\n        }, 1);\n      }\n    }\n  }\n\n  disconnectedCallback() {\n    window.removeEventListener('click', this.handleClickOutsideBind);\n    if (this.animationFrameId) {\n      cancelAnimationFrame(this.animationFrameId);\n    }\n  }\n\n  @Listen('click', { target: 'window' })\n  handleClickOutside(event: Event) {\n    const clickedElement = event.target as HTMLElement;\n    // Check if the clicked element is not within the target div\n    if (!this.element.contains(clickedElement)) {\n      // The click occurred outside the target div\n      this.showEventInfo(false);\n    }\n  }\n\n  @Listen('hideBubbleInfo', { target: 'window' })\n  hideBubbleInfoPopup(event: CustomEvent) {\n    if (event.detail.currentInfoBubbleId != this.getBookingId() || (event.detail.key === 'hidebubble' && event.detail.currentInfoBubbleId === this.getBookingId())) {\n      this.showInfoPopup = false;\n      this.renderAgain();\n    }\n  }\n\n  @Listen('moveBookingTo', { target: 'window' })\n  async moveBookingToHandler(event: CustomEvent) {\n    try {\n      if (event.detail.bookingId !== this.getBookingId()) {\n        this.showEventInfo(false);\n        return;\n      }\n\n      if (event.detail.moveToDay === 'revert' || event.detail.toRoomId === 'revert') {\n        event.detail.moveToDay = this.bookingEvent.FROM_DATE;\n        event.detail.toRoomId = event.detail.fromRoomId;\n        if (this.isTouchStart && this.moveDiffereneX <= 5 && this.moveDiffereneY <= 5 && !this.isStreatch) {\n          if (isBlockUnit(this.bookingEvent.STATUS_CODE)) {\n            this.showEventInfo(true);\n          } else if (['IN-HOUSE', 'CONFIRMED', 'PENDING-CONFIRMATION', 'CHECKED-OUT'].includes(this.bookingEvent.STATUS)) {\n            await this.fetchAndAssignBookingData();\n          }\n        } else {\n          this.animationFrameId = requestAnimationFrame(() => {\n            this.resetBookingToInitialPosition();\n          });\n          return;\n        }\n      } else {\n        if (this.isTouchStart && this.moveDiffereneX <= 5 && this.moveDiffereneY <= 5 && !this.isStreatch) {\n          if (isBlockUnit(this.bookingEvent.STATUS_CODE)) {\n            this.showEventInfo(true);\n          } else if (['IN-HOUSE', 'CONFIRMED', 'PENDING-CONFIRMATION', 'CHECKED-OUT'].includes(this.bookingEvent.STATUS)) {\n            await this.fetchAndAssignBookingData();\n          }\n        } else {\n          const { pool, to_date, from_date, toRoomId } = event.detail as any;\n          if (this.checkIfSlotOccupied(toRoomId, from_date, to_date)) {\n            this.animationFrameId = requestAnimationFrame(() => {\n              this.resetBookingToInitialPosition();\n            });\n            throw new Error('Overlapping Dates');\n          }\n          if (pool) {\n            if (isBlockUnit(this.bookingEvent.STATUS_CODE)) {\n              // let fromDate = moment(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(moment(new Date(from_date)))\n              //   ? this.bookingEvent.defaultDates.from_date\n              //   : from_date;\n              // console.log('room', fromDate, this.bookingEvent.defaultDates.from_date, from_date);\n              await this.eventsService.reallocateEvent(pool, toRoomId, from_date, to_date).catch(() => {\n                this.resetBookingToInitialPosition();\n              });\n            } else {\n              if (this.isShrinking || !this.isStreatch) {\n                // try {\n                //   if (this.bookingEvent.PR_ID.toString() === toRoomId.toString()) {\n                //     await this.eventsService.reallocateEvent(pool, toRoomId, from_date, to_date);\n                //     return;\n                //   }\n                // } catch (error) {\n                //   this.resetBookingToInitialPosition();\n                //   return;\n                // }\n                const { description, status } = this.getModalDescription(toRoomId, from_date, to_date);\n                let hideConfirmButton = false;\n                if (status === '400') {\n                  hideConfirmButton = true;\n                }\n                const oldFromDate = this.bookingEvent.defaultDates.from_date;\n                const oldToDate = this.bookingEvent.defaultDates.to_date;\n                const diffDays = calculateDaysBetweenDates(oldFromDate, oldToDate);\n\n                let shrinkingDirection = null;\n                let fromDate = oldFromDate;\n                let toDate = oldToDate;\n                if (this.isShrinking) {\n                  if (moment(from_date, 'YYYY-MM-DD').isAfter(moment(oldFromDate, 'YYYY-MM-DD')) && moment(to_date, 'YYYY-MM-DD').isBefore(moment(oldToDate, 'YYYY-MM-DD'))) {\n                    fromDate = oldFromDate;\n                    toDate = to_date;\n                  } else {\n                    shrinkingDirection = moment(from_date, 'YYYY-MM-DD').isAfter(moment(oldFromDate, 'YYYY-MM-DD'))\n                      ? 'left'\n                      : moment(to_date, 'YYYY-MM-DD').isBefore(moment(oldToDate, 'YYYY-MM-DD'))\n                      ? 'right'\n                      : null;\n                    if (shrinkingDirection === 'left') {\n                      fromDate = from_date;\n                    }\n\n                    if (shrinkingDirection === 'right') {\n                      toDate = to_date;\n                    }\n                  }\n                } else {\n                  if (moment(from_date, 'YYYY-MM-DD').isBefore(moment(oldFromDate, 'YYYY-MM-DD'))) {\n                    fromDate = from_date;\n                    const newToDate = moment(from_date, 'YYYY-MM-DD').add(diffDays, 'days');\n                    toDate = newToDate.isBefore(moment(to_date, 'YYYY-MM-DD'), 'days') ? to_date : newToDate.format('YYYY-MM-DD');\n                  } else if (moment(to_date, 'YYYY-MM-DD').isAfter(moment(oldToDate, 'YYYY-MM-DD'))) {\n                    toDate = to_date;\n                    fromDate = moment(to_date, 'YYYY-MM-DD').subtract(diffDays, 'days').format('YYYY-MM-DD');\n                  }\n                }\n                console.warn({ fromDate, toDate });\n                this.showDialog.emit({ reason: 'reallocate', ...event.detail, description, title: '', hideConfirmButton, from_date: fromDate, to_date: toDate });\n              } else {\n                // if (this.checkIfSlotOccupied(toRoomId, from_date, to_date)) {\n                //   this.animationFrameId = requestAnimationFrame(() => {\n                //     this.resetBookingToInitialPosition();\n                //   });\n                //   throw new Error('Overlapping Dates');\n                // } else {\n                this.showRoomNightsDialog.emit({\n                  bookingNumber: this.bookingEvent.BOOKING_NUMBER,\n                  identifier: this.bookingEvent.IDENTIFIER,\n                  to_date,\n                  pool,\n                  from_date,\n                  defaultDates: this.bookingEvent.defaultDates,\n                });\n                // }\n              }\n            }\n            this.isShrinking = null;\n          }\n        }\n      }\n    } catch (error) {\n      this.toast.emit({\n        position: 'top-right',\n        title: error.message,\n        description: '',\n        type: 'error',\n      });\n      console.log('something went wrong');\n    }\n  }\n  private getModalDescription(toRoomId: number, from_date, to_date): { status: '200' | '400'; description: string } {\n    const findRoomType = (roomId: number) => {\n      let roomType = this.bookingEvent.roomsInfo.filter(room => room.physicalrooms.some(r => r.id === +roomId));\n      if (roomType.length) {\n        return roomType[0].id;\n      }\n      return null;\n    };\n    if (!this.bookingEvent.is_direct) {\n      if (this.isShrinking) {\n        return {\n          description: `${locales.entries.Lcz_YouWillLoseFutureUpdates}.`,\n          status: '200',\n        };\n      } else {\n        if (\n          moment(from_date, 'YYYY-MM-DD').isSame(moment(this.bookingEvent.FROM_DATE, 'YYYY-MM-DD')) &&\n          moment(to_date, 'YYYY-MM-DD').isSame(moment(this.bookingEvent.TO_DATE, 'YYYY-MM-DD'))\n        ) {\n          const initialRT = findRoomType(this.bookingEvent.PR_ID);\n          const targetRT = findRoomType(toRoomId);\n          if (initialRT === targetRT) {\n            return { description: `${locales.entries.Lcz_AreYouSureWantToMoveAnotherUnit}?`, status: '200' };\n          } else {\n            return {\n              description: `${locales.entries.Lcz_YouWillLoseFutureUpdates} ${this.bookingEvent.origin ? this.bookingEvent.origin.Label : ''}. ${\n                locales.entries.Lcz_SameRatesWillBeKept + '.'\n              }`,\n              status: '200',\n            };\n          }\n        }\n        return { description: locales.entries.Lcz_CannotChangeCHBookings + '.', status: '400' };\n      }\n    } else {\n      if (!this.isShrinking) {\n        const initialRT = findRoomType(Number(this.bookingEvent.PR_ID));\n        const targetRT = findRoomType(Number(toRoomId));\n        if (initialRT === targetRT) {\n          console.log('same rt');\n          if (this.bookingEvent.PR_ID.toString() === toRoomId.toString()) {\n            //TODO add the description\n            return { description: locales.entries.Lcz_ConfrmModiication + '.', status: '200' };\n          }\n          return { description: `${locales.entries.Lcz_AreYouSureWantToMoveAnotherUnit}?`, status: '200' };\n        } else {\n          return {\n            description: locales.entries.Lcz_SameRatesWillBeKept + '.',\n            status: '200',\n          };\n        }\n      }\n      return { description: locales.entries.Lcz_ConfrmModiication + '.', status: '200' };\n    }\n  }\n  private resetBookingToInitialPosition() {\n    if (this.isStreatch) {\n      this.element.style.left = `${this.initialLeft}px`;\n      this.element.style.width = `${this.initialWidth}px`;\n      this.isStreatch = false;\n      this.finalWidth = this.initialWidth;\n      this.isShrinking = null;\n    } else {\n      this.element.style.top = `${this.dragInitPos.top}px`;\n      this.element.style.left = `${this.dragInitPos.left}px`;\n    }\n  }\n  @Listen('revertBooking', { target: 'window' })\n  handleRevertBooking(event: CustomEvent<string>) {\n    if (this.bookingEvent.POOL === event.detail) {\n      this.resetBookingToInitialPosition();\n    }\n  }\n  checkIfSlotOccupied(toRoomId, from_date, to_date) {\n    const fromTime = moment(from_date, 'YYYY-MM-DD');\n    const toTime = moment(to_date, 'YYYY-MM-DD');\n    const isOccupied = this.allBookingEvents.some(event => {\n      if (event.POOL === this.bookingEvent.POOL) {\n        return false;\n      }\n      const eventFromTime = moment(event.FROM_DATE, 'YYYY-MM-DD').add(1, 'days');\n      const eventToTime = moment(event.TO_DATE, 'YYYY-MM-DD');\n      return event.PR_ID === +toRoomId && toTime.isSameOrAfter(eventFromTime) && fromTime.isBefore(eventToTime);\n    });\n    return isOccupied;\n  }\n\n  renderAgain() {\n    this.renderElement = !this.renderElement;\n  }\n\n  getUniqueId() {\n    return new Date().getTime();\n  }\n\n  isSplitBooking() {\n    return !!this.bookingEvent.SPLIT_BOOKING;\n  }\n\n  isNewEvent() {\n    return this.getBookingId() === 'NEW_TEMP_EVENT';\n  }\n\n  isHighlightEventType() {\n    return this.getEventType() === 'HIGH_LIGHT';\n  }\n\n  getBookingId() {\n    return this.bookingEvent.ID;\n  }\n\n  getBookingStatus() {\n    return this.bookingEvent.STATUS;\n  }\n\n  getBookedBy() {\n    return this.bookingEvent.NAME;\n  }\n\n  getBookedRoomId() {\n    return this.bookingEvent.PR_ID;\n  }\n\n  getEventStartingDate() {\n    return new Date(this.bookingEvent.FROM_DATE);\n  }\n\n  getEventEndingDate() {\n    return new Date(this.bookingEvent.TO_DATE);\n  }\n\n  getEventType() {\n    return this.bookingEvent.event_type;\n  }\n\n  getEventLegend() {\n    // console.log(this.getBookingStatus());\n    let status = this.bookingEvent?.legendData.statusId[this.getBookingStatus()];\n    let orderRide = this.isNewEvent() ? { color: '#f9f9c9' } : {};\n    return {\n      ...this.bookingEvent?.legendData[status.id],\n      ...status,\n      ...orderRide,\n    };\n  }\n\n  getLegendOfStatus(aStatusId) {\n    // console.log(aStatusId);\n    let status = this.bookingEvent?.legendData.statusId[aStatusId];\n    return { ...this.bookingEvent.legendData[status.id], ...status };\n  }\n\n  getNoteNode() {\n    if (this.bookingEvent.NOTES || this.bookingEvent.INTERNAL_NOTE || this.bookingEvent.PRIVATE_NOTE) {\n      return this.getLegendOfStatus('NOTES');\n    }\n    return null;\n  }\n\n  getBalanceNode() {\n    if (this.bookingEvent.BALANCE !== null && this.bookingEvent.BALANCE >= 1) {\n      return this.getLegendOfStatus('OUTSTANDING-BALANCE');\n    }\n    return null;\n  }\n\n  setStayDays(aStayDays: number) {\n    this.bookingEvent.NO_OF_DAYS = aStayDays;\n    this.renderAgain();\n    // this.updateData({id: this.getBookedRoomId(), data: { NO_OF_DAYS: aStayDays }});\n  }\n\n  getStayDays() {\n    return this.bookingEvent.NO_OF_DAYS;\n  }\n\n  getPosition() {\n    let startingDate = this.getEventStartingDate();\n    let startingCellClass = '.room_' + this.getBookedRoomId() + '_' + startingDate.getDate() + '_' + (startingDate.getMonth() + 1) + '_' + startingDate.getFullYear();\n    let bodyContainer = document.querySelector('.bodyContainer');\n    let startingCell = document.querySelector(startingCellClass);\n    let pos = { top: '0', left: '0', width: '0', height: '20px' };\n    if (startingCell && bodyContainer && startingCell.getBoundingClientRect() && bodyContainer.getBoundingClientRect()) {\n      let bodyContainerRect = bodyContainer.getBoundingClientRect();\n      let boundingRect = startingCell.getBoundingClientRect();\n      this.dayWidth = this.dayWidth || boundingRect.width;\n      pos.top = boundingRect.top + boundingRect.height / 2 - this.vertSpace - bodyContainerRect.top + 'px';\n      // pos.left = boundingRect.left + this.dayWidth / 2 + this.eventSpace / 2 - bodyContainerRect.left + 'px';\n      // pos.width = this.getStayDays() * this.dayWidth - this.eventSpace + 'px';\n      pos.left =\n        boundingRect.left +\n        (!this.isNewEvent() && moment(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE)) ? 0 : this.dayWidth / 2) +\n        this.eventSpace / 2 -\n        bodyContainerRect.left +\n        'px';\n      pos.width =\n        (this.getStayDays() + (!this.isNewEvent() && moment(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE)) ? 0.5 : 0)) *\n          this.dayWidth -\n        this.eventSpace +\n        'px';\n    } else {\n      console.log(this.bookingEvent);\n      console.log('Locating event cell failed ', startingCellClass);\n    }\n    //console.log(pos);\n    return pos;\n  }\n\n  getNumber(aData) {\n    return aData ? parseFloat(aData) : 0;\n  }\n\n  startDragging(event: any, side: string) {\n    event.preventDefault();\n    event.stopPropagation();\n    event.stopImmediatePropagation();\n\n    if (this.isNewEvent() || this.isHighlightEventType()) {\n      return null;\n    }\n\n    this.resizeSide = side;\n    this.isDragging = true;\n\n    this.showEventInfo(false);\n    this.isStreatch = side !== 'move';\n    if (side === 'move') {\n      this.initialX = event.clientX || event.touches[0].clientX;\n      this.initialY = event.clientY || event.touches[0].clientY;\n      this.elementRect = this.element.getBoundingClientRect();\n      const offsetX = 0;\n      const offsetY = 0;\n      this.dragInitPos = {\n        id: this.getBookingId(),\n        fromRoomId: this.getBookedRoomId(),\n        top: this.getNumber(this.element.style.top) + offsetY,\n        left: this.getNumber(this.element.style.left) + offsetX,\n      };\n      this.dragInitPos.x = this.dragInitPos.left;\n      this.dragInitPos.y = this.dragInitPos.top;\n      this.dragEndPos = { ...this.dragInitPos };\n      this.element.style.top = `${this.dragInitPos.top}px`;\n      this.element.style.left = `${this.dragInitPos.left}px`;\n      this.isTouchStart = true; // !!(event.touches && event.touches.length);\n      this.dragOverEventData.emit({\n        id: 'CALCULATE_DRAG_OVER_BOUNDS',\n        data: this.dragInitPos,\n      });\n    } else {\n      this.initialWidth = this.element.offsetWidth;\n      this.initialLeft = this.element.offsetLeft;\n      this.initialX = event.clientX || event.touches[0].clientX;\n      this.dragOverEventData.emit({\n        id: 'CALCULATE_DRAG_OVER_BOUNDS',\n        data: {\n          id: this.getBookingId(),\n          fromRoomId: this.getBookedRoomId(),\n          top: this.getNumber(this.element.style.top),\n          left: this.initialLeft,\n          x: this.initialX,\n          y: event.clientY || event.touches[0].clientY,\n        },\n      });\n    }\n\n    document.addEventListener('mousemove', this.handleMouseMoveBind);\n    document.addEventListener('touchmove', this.handleMouseMoveBind);\n    document.addEventListener('pointermove', this.handleMouseMoveBind);\n\n    document.addEventListener('mouseup', this.handleMouseUpBind);\n    document.addEventListener('touchup', this.handleMouseUpBind);\n    document.addEventListener('pointerup', this.handleMouseUpBind);\n  }\n\n  handleMouseMove(event: any) {\n    if (this.isDragging) {\n      this.currentX = event.clientX || event.touches[0].clientX;\n      let distanceX = this.currentX - this.initialX;\n      if (this.resizeSide === 'move') {\n        this.currentY = event.clientY || event.touches[0].clientY;\n        let distanceY = this.currentY - this.initialY;\n        this.element.style.top = `${this.dragInitPos.top + distanceY}px`;\n        this.element.style.left = `${this.dragInitPos.left + distanceX}px`;\n        this.dragEndPos = {\n          id: this.getBookingId(),\n          fromRoomId: this.getBookedRoomId(),\n          top: this.dragInitPos.top + distanceY,\n          left: this.dragInitPos.left + distanceX,\n        };\n        this.dragEndPos.x = this.dragEndPos.left; // + 18;\n        this.dragEndPos.y = this.dragEndPos.top; // + (this.elementRect.height/2);\n        this.dragOverEventData.emit({ id: 'DRAG_OVER', data: this.dragEndPos });\n      } else {\n        if (!this.bookingEvent.is_direct && !isBlockUnit(this.bookingEvent.STATUS_CODE)) {\n          return;\n        }\n        let newWidth = this.initialWidth;\n        if (this.resizeSide == 'rightSide') {\n          newWidth = this.initialWidth + distanceX;\n          newWidth = Math.min(newWidth, this.initialX + this.element.offsetWidth);\n          newWidth = Math.max(this.dayWidth - this.eventSpace, newWidth);\n          this.element.style.width = `${newWidth}px`;\n          this.isShrinking = distanceX < 0;\n        } else if (this.resizeSide == 'leftSide') {\n          this.isShrinking = distanceX > 0;\n          newWidth = Math.max(this.dayWidth - this.eventSpace, this.initialWidth - distanceX);\n          let newLeft = this.initialLeft + (this.initialWidth - newWidth);\n          this.element.style.left = `${newLeft}px`;\n          this.element.style.width = `${newWidth}px`;\n        }\n        this.finalWidth = newWidth;\n      }\n    } else {\n      console.log('still mouse move listening...');\n    }\n  }\n\n  handleMouseUp() {\n    if (this.isDragging) {\n      if (this.resizeSide === 'move') {\n        // console.log(\"Initial X::\"+this.dragInitPos.x);\n        // console.log(\"Initial Y::\"+this.dragInitPos.y);\n        // console.log(\"End X::\"+this.dragEndPos.x);\n        // console.log(\"End Y::\"+this.dragEndPos.y);\n        if (this.isTouchStart) {\n          this.moveDiffereneX = Math.abs(this.dragEndPos.x - this.dragInitPos.x);\n          this.moveDiffereneY = Math.abs(this.dragEndPos.y - this.dragInitPos.y);\n        }\n        this.dragOverEventData.emit({\n          id: 'DRAG_OVER_END',\n          data: {\n            ...this.dragEndPos,\n            pool: this.bookingEvent.POOL,\n            nbOfDays: this.bookingEvent.NO_OF_DAYS,\n          },\n        });\n      } else {\n        const finalWidth =\n          this.finalWidth -\n          (!this.isNewEvent() && moment(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE)) ? this.dayWidth / 2 : 0);\n        const numberOfDays = Math.round(finalWidth / this.dayWidth);\n        console.log(finalWidth, this.dayWidth, numberOfDays);\n        let initialStayDays = this.getStayDays();\n        if (initialStayDays != numberOfDays && !isNaN(numberOfDays)) {\n          //this.setStayDays(numberOfDays);\n          if (this.resizeSide == 'leftSide') {\n            this.element.style.left = `${this.initialLeft + (initialStayDays - numberOfDays) * this.dayWidth}px`;\n            // set FROM_DATE = TO_DATE - numberOfDays\n          } else {\n            if (numberOfDays < initialStayDays) {\n              this.isShrinking = true;\n            }\n            // set TO_DATE = FROM_DATE + numberOfDays\n          }\n          // const nbrOfDays =\n          // !this.isNewEvent() && moment(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE)) ? numberOfDays - 1 : numberOfDays;\n          this.dragOverEventData.emit({\n            id: 'STRETCH_OVER_END',\n            data: {\n              id: this.getBookingId(),\n              fromRoomId: +this.getBookedRoomId(),\n              x: +this.element.style.left.replace('px', ''),\n              y: +this.element.style.top.replace('px', ''),\n              pool: this.bookingEvent.POOL,\n              nbOfDays: numberOfDays,\n            },\n          });\n          const offset = !this.isNewEvent() && moment(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE)) ? +this.dayWidth / 2 : 0;\n          this.element.style.width = `${numberOfDays * this.dayWidth - this.eventSpace + offset}px`;\n        } else {\n          this.element.style.left = `${this.initialLeft}px`;\n          this.element.style.width = `${numberOfDays * this.dayWidth - this.eventSpace}px`;\n        }\n      }\n    } else {\n      console.log('still mouse up listening...');\n    }\n    this.isDragging = false;\n\n    document.removeEventListener('mousemove', this.handleMouseMoveBind);\n    document.removeEventListener('touchmove', this.handleMouseMoveBind);\n    document.removeEventListener('pointermove', this.handleMouseMoveBind);\n\n    document.removeEventListener('mouseup', this.handleMouseUpBind);\n    document.removeEventListener('touchup', this.handleMouseUpBind);\n    document.removeEventListener('pointerup', this.handleMouseUpBind);\n  }\n\n  updateData(data: any) {\n    this.updateEventData.emit(data);\n  }\n  private calculateHoverPosition() {\n    const barRect = this.element.getBoundingClientRect();\n    const barWidth = barRect.width;\n    const barLeft = barRect.left;\n    const screenWidth = window.innerWidth;\n\n    let hoverLeft;\n\n    if (barWidth <= screenWidth) {\n      hoverLeft = barWidth / 2;\n    } else {\n      hoverLeft = screenWidth / 2 - barLeft;\n    }\n    return {\n      position: 'absolute',\n      left: `${hoverLeft}px`,\n      transform: 'translateX(-50%)',\n    };\n  }\n  renderEventBookingNumber() {\n    if (this.bookingEvent.STATUS === 'TEMP-EVENT' || this.bookingEvent.ID === 'NEW_TEMP_EVENT') {\n      return '';\n    }\n    if (isBlockUnit(this.bookingEvent.STATUS_CODE)) {\n      return '';\n    }\n    if (!this.bookingEvent.is_direct) {\n      return ` - ${this.bookingEvent.channel_booking_nbr}`;\n    }\n    return ` - ${this.bookingEvent.BOOKING_NUMBER}`;\n  }\n  showEventInfo(showInfo) {\n    // if (this.isHighlightEventType() || this.bookingEvent.hideBubble) {\n    //   return null;\n    // }\n\n    // if (showInfo) {\n    //   // Calculate which side we need to show the bubble, top side or bottom.\n    //   let bodyContainer = document.querySelector('.calendarScrollContainer');\n    //   let bodyContainerRect: { [key: string]: any } = bodyContainer.getBoundingClientRect();\n    //   let elementRect: { [key: string]: any } = this.element.getBoundingClientRect();\n    //   let midPoint = bodyContainerRect.height / 2 + bodyContainerRect.top + 50;\n    //   // let topDifference = elementRect.top - bodyContainerRect.top;\n    //   // let bottomDifference = bodyContainerRect.bottom - elementRect.bottom;\n\n    //   if (elementRect.top < midPoint) {\n    //     this.bubbleInfoTopSide = false;\n    //   } else {\n    //     this.bubbleInfoTopSide = true;\n    //   }\n    // }\n\n    // // showInfo = true;\n    // if (showInfo) {\n    //   this.hideBubbleInfo.emit({\n    //     key: 'hidePopup',\n    //     currentInfoBubbleId: this.getBookingId(),\n    //   });\n    // }\n    // this.showInfoPopup = showInfo;\n    // this.renderAgain();\n    if (this.isHighlightEventType() || this.bookingEvent.hideBubble) {\n      return null;\n    }\n\n    if (showInfo) {\n      // Calculate which side we need to show the bubble, top side or bottom.\n      let bodyContainer = document.querySelector('.calendarScrollContainer');\n      let bodyContainerRect: { [key: string]: any } = bodyContainer.getBoundingClientRect();\n      let elementRect: { [key: string]: any } = this.element.getBoundingClientRect();\n      let midPoint = bodyContainerRect.height / 2 + bodyContainerRect.top + 50;\n\n      if (elementRect.top < midPoint) {\n        this.bubbleInfoTopSide = false;\n      } else {\n        this.bubbleInfoTopSide = true;\n      }\n    }\n\n    if (showInfo) {\n      this.hideBubbleInfo.emit({\n        key: 'hidePopup',\n        currentInfoBubbleId: this.getBookingId(),\n      });\n    }\n    this.showInfoPopup = showInfo;\n    this.renderAgain();\n  }\n\n  render() {\n    // onMouseLeave={()=>this.showEventInfo(false)}\n    let legend = this.getEventLegend();\n    let noteNode = this.getNoteNode();\n    let balanceNode = this.getBalanceNode();\n    // console.log(this.bookingEvent.BOOKING_NUMBER === '46231881' ? this.bookingEvent : '');\n    return (\n      <Host\n        class={`bookingEvent  ${this.isNewEvent() || this.isHighlightEventType() ? 'newEvent' : ''} ${legend.clsName} `}\n        style={this.getPosition()}\n        id={'event_' + this.getBookingId()}\n      >\n        {/* onMouseOver={() =>this.showEventInfo(true)}  */}\n        <div\n          class={`bookingEventBase  ${\n            !this.isNewEvent() && moment(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE)) ? 'skewedLeft' : ''\n          }\n          ${!this.isNewEvent() && moment(new Date(this.bookingEvent.defaultDates.to_date)).isAfter(new Date(this.bookingEvent.TO_DATE)) ? 'skewedRight' : ''}\n          ${\n            !this.bookingEvent.is_direct &&\n            !isBlockUnit(this.bookingEvent.STATUS_CODE) &&\n            this.bookingEvent.STATUS !== 'TEMP-EVENT' &&\n            this.bookingEvent.ID !== 'NEW_TEMP_EVENT' &&\n            'border border-dark ota-booking-event'\n          }  ${this.isSplitBooking() ? 'splitBooking' : ''}`}\n          style={{ 'backgroundColor': legend.color, '--ir-event-bg': legend.color }}\n          onTouchStart={event => this.startDragging(event, 'move')}\n          onMouseDown={event => this.startDragging(event, 'move')}\n        ></div>\n        {noteNode ? <div class=\"legend_circle noteIcon\" style={{ backgroundColor: noteNode.color }}></div> : null}\n        {balanceNode ? <div class=\"legend_circle balanceIcon\" style={{ backgroundColor: balanceNode.color }}></div> : null}\n        {/* onMouseOver={() => this.showEventInfo(true)}  */}\n        <div class=\"bookingEventTitle\" onTouchStart={event => this.startDragging(event, 'move')} onMouseDown={event => this.startDragging(event, 'move')}>\n          {this.getBookedBy()}\n          {this.renderEventBookingNumber()}\n        </div>\n\n        {(this.bookingEvent.is_direct || isBlockUnit(this.bookingEvent.STATUS_CODE)) && (\n          <Fragment>\n            <div\n              class={`bookingEventDragHandle leftSide ${\n                !this.isNewEvent() && moment(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE)) ? 'skewedLeft' : ''\n              }\n            ${!this.isNewEvent() && moment(new Date(this.bookingEvent.defaultDates.to_date)).isAfter(new Date(this.bookingEvent.TO_DATE)) ? 'skewedRight' : ''}`}\n              onTouchStart={event => this.startDragging(event, 'leftSide')}\n              onMouseDown={event => this.startDragging(event, 'leftSide')}\n            ></div>\n            <div\n              class={`bookingEventDragHandle rightSide ${\n                !this.isNewEvent() && moment(new Date(this.bookingEvent.defaultDates.from_date)).isBefore(new Date(this.bookingEvent.FROM_DATE)) ? 'skewedLeft' : ''\n              }\n              ${!this.isNewEvent() && moment(new Date(this.bookingEvent.defaultDates.to_date)).isAfter(new Date(this.bookingEvent.TO_DATE)) ? 'skewedRight' : ''}`}\n              onTouchStart={event => this.startDragging(event, 'rightSide')}\n              onMouseDown={event => this.startDragging(event, 'rightSide')}\n            ></div>\n          </Fragment>\n        )}\n\n        {this.showInfoPopup ? (\n          <igl-booking-event-hover\n            is_vacation_rental={this.is_vacation_rental}\n            countries={this.countries}\n            currency={this.currency}\n            class=\"top\"\n            bookingEvent={this.bookingEvent}\n            bubbleInfoTop={this.bubbleInfoTopSide}\n            style={this.calculateHoverPosition()}\n          ></igl-booking-event-hover>\n        ) : null}\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n\n.bodyContainer {\n  position: relative;\n}\n\n.roomRow {\n  width: max-content;\n}\n\n.roomRow:first-child {\n  margin-top: 80px;\n}\n.categoryName {\n  font-weight: bold;\n  -webkit-user-select: none;\n  user-select: none;\n  -webkit-user-drag: none;\n}\n.roomRow .room {\n  cursor: pointer;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n}\n.roomRow .room:hover {\n  background: #e0e0e0;\n}\n.cellData {\n  width: 58px;\n  height: 30px;\n  display: inline-grid;\n  border-top: 1px solid #e0e0e0;\n  border-left: 1px solid #e0e0e0;\n  vertical-align: top;\n}\n\n.cellData:nth-child(2) {\n  border-left: 0px;\n}\n\n.cellData:last-child {\n  border-right: 1px solid rgba(186, 191, 199, 0.5);\n}\n\n.roomHeaderCell {\n  position: -webkit-sticky;\n  position: sticky;\n  left: 0;\n  background: #fff;\n  border-right: 1px solid #ccc;\n  width: 170px;\n  z-index: 1;\n}\n\n.currentDay {\n  background-color: #e3f3fa;\n}\n\n.dragOverHighlight {\n  background-color: #f5f5dc !important;\n}\n\n.selectedDay {\n  background-color: #f9f9c9 !important;\n}\n\n.categoryTitle {\n  grid-template-columns: 1fr 20px;\n  padding-left: 10px;\n  cursor: pointer;\n  height: 40px;\n  font-size: 0.9em;\n}\n.categoryTitle > :nth-child(1) {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.roomTitle {\n  padding-left: 20px;\n  font-size: 0.9em;\n  -webkit-user-select: none;\n  user-select: none;\n  -webkit-user-drag: none;\n}\n\n.roomTitle > :nth-child(1) {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.roomTitle.pl10 {\n  padding-left: 10px;\n}\n\n.categoryPriceColumn {\n  align-items: center;\n  height: 40px;\n  -webkit-user-select: none;\n  user-select: none;\n}\n\n/* BOOKING EVENT */\n.bookingEventsContainer {\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n","import { Component, Host, Listen, Prop, State, h, Event, EventEmitter, Watch } from '@stencil/core';\nimport calendar_dates from '@/stores/calendar-dates.store';\nimport locales from '@/stores/locales.store';\nimport { PhysicalRoom, RoomType } from '@/models/booking.dto';\nimport { HouseKeepingService } from '@/services/housekeeping.service';\nimport { ICountry } from '@/models/IBooking';\nimport moment from 'moment';\nimport { compareTime, createDateWithOffsetAndHour } from '@/utils/booking';\nimport calendar_data from '@/stores/calendar-data';\n\nexport type RoomCategory = RoomType & { expanded: boolean };\n\n@Component({\n  tag: 'igl-cal-body',\n  styleUrl: 'igl-cal-body.css',\n  scoped: true,\n})\nexport class IglCalBody {\n  @Prop() isScrollViewDragging: boolean;\n  @Prop() propertyId: number;\n  @Prop() calendarData: { [key: string]: any };\n  @Prop() today: String;\n  @Prop() currency;\n  @Prop() language: string;\n  @Prop() countries: ICountry[];\n  @Prop() highlightedDate: string;\n\n  @State() dragOverElement: string = '';\n  @State() renderAgain: boolean = false;\n  @State() selectedRoom: PhysicalRoom;\n  @State() isLoading: boolean;\n\n  @Event() addBookingDatasEvent: EventEmitter<any[]>;\n  @Event() showBookingPopup: EventEmitter;\n  @Event({ bubbles: true, composed: true }) scrollPageToRoom: EventEmitter;\n\n  private selectedRooms: { [key: string]: any } = {};\n  private fromRoomId: number = -1;\n  private newEvent: { [key: string]: any };\n  private currentDate = new Date();\n  private hkModal: HTMLIrModalElement;\n  private housekeepingService = new HouseKeepingService();\n  private bookingMap = new Map<string | number, string | number>();\n  private interactiveTitle: HTMLIrInteractiveTitleElement[] = [];\n\n  componentWillLoad() {\n    this.currentDate.setHours(0, 0, 0, 0);\n    this.bookingMap = this.getBookingMap(this.getBookingData());\n    console.log(this.bookingMap);\n  }\n  @Watch('calendarData')\n  handleCalendarDataChange() {\n    this.bookingMap = this.getBookingMap(this.getBookingData());\n  }\n  @Listen('dragOverHighlightElement', { target: 'window' })\n  dragOverHighlightElementHandler(event: CustomEvent) {\n    this.dragOverElement = event.detail.dragOverElement;\n  }\n\n  @Listen('gotoRoomEvent', { target: 'window' })\n  gotoRoom(event: CustomEvent) {\n    let roomId = event.detail.roomId;\n    let category = this.getRoomCategoryByRoomId(roomId);\n    if (!category.expanded) {\n      this.toggleCategory(category);\n      setTimeout(() => {\n        this.scrollToRoom(roomId);\n      }, 10);\n    } else {\n      this.scrollToRoom(roomId);\n    }\n  }\n\n  @Listen('addToBeAssignedEvent', { target: 'window' })\n  addToBeAssignedEvents(event: CustomEvent) {\n    // let roomId = event.detail.roomId;\n    this.addBookingDatas(event.detail.data);\n    this.renderElement();\n  }\n\n  scrollToRoom(roomId) {\n    this.scrollPageToRoom.emit({\n      key: 'scrollPageToRoom',\n      id: roomId,\n      refClass: 'room_' + roomId,\n    });\n  }\n\n  getRoomCategoryByRoomId(roomId) {\n    return this.calendarData.roomsInfo.find(roomCategory => {\n      return this.getCategoryRooms(roomCategory).find(room => this.getRoomId(room) === roomId);\n    });\n  }\n\n  getCategoryName(roomCategory) {\n    return roomCategory.name;\n  }\n\n  getCategoryId(roomCategory) {\n    return roomCategory.id;\n  }\n\n  getTotalPhysicalRooms(roomCategory) {\n    return this.getCategoryRooms(roomCategory).length;\n  }\n\n  getCategoryRooms(roomCategory: RoomCategory) {\n    return (roomCategory && roomCategory.physicalrooms) || [];\n  }\n\n  getRoomName(roomInfo) {\n    return roomInfo.name;\n  }\n\n  getRoomId(roomInfo) {\n    return roomInfo.id;\n  }\n\n  getRoomById(physicalRooms, roomId) {\n    return physicalRooms.find(physical_room => this.getRoomId(physical_room) === roomId);\n  }\n\n  getBookingData() {\n    return this.calendarData.bookingEvents;\n  }\n\n  addBookingDatas(aData) {\n    this.addBookingDatasEvent.emit(aData);\n  }\n\n  getSelectedCellRefName(roomId, selectedDay) {\n    return 'room_' + roomId + '_' + selectedDay.currentDate;\n  }\n\n  // getSplitBookingEvents(newEvent) {\n  //   return this.getBookingData().some(bookingEvent => !['003', '002', '004'].includes(bookingEvent.STATUS_CODE) && newEvent.FROM_DATE === bookingEvent.FROM_DATE);\n  // }\n  getSplitBookingEvents(newEvent) {\n    console.log(newEvent.FROM_DATE);\n    return this.getBookingData().some(bookingEvent => {\n      if (!['003', '002', '004'].includes(bookingEvent.STATUS_CODE)) {\n        if (\n          new Date(newEvent.FROM_DATE).getTime() >= new Date(bookingEvent.FROM_DATE).getTime() &&\n          new Date(newEvent.FROM_DATE).getTime() <= new Date(bookingEvent.TO_DATE).getTime()\n        ) {\n          return bookingEvent;\n        }\n      }\n    });\n  }\n  @Listen('closeBookingWindow', { target: 'window' })\n  closeWindow() {\n    let ind = this.getBookingData().findIndex(ev => ev.ID === 'NEW_TEMP_EVENT');\n    if (ind !== -1) {\n      this.getBookingData().splice(ind, 1);\n      console.log('removed item..');\n      this.renderElement();\n    }\n  }\n\n  addNewEvent(roomCategory) {\n    let keys = Object.keys(this.selectedRooms);\n    let startDate, endDate;\n\n    if (this.selectedRooms[keys[0]].currentDate < this.selectedRooms[keys[1]].currentDate) {\n      startDate = new Date(this.selectedRooms[keys[0]].currentDate);\n      endDate = new Date(this.selectedRooms[keys[1]].currentDate);\n    } else {\n      startDate = new Date(this.selectedRooms[keys[1]].currentDate);\n      endDate = new Date(this.selectedRooms[keys[0]].currentDate);\n    }\n\n    this.newEvent = {\n      ID: 'NEW_TEMP_EVENT',\n      NAME: <span>&nbsp;</span>,\n      EMAIL: '',\n      PHONE: '',\n      convertBooking: false,\n      REFERENCE_TYPE: 'PHONE',\n      FROM_DATE: startDate.getFullYear() + '-' + this.getTwoDigitNumStr(startDate.getMonth() + 1) + '-' + this.getTwoDigitNumStr(startDate.getDate()),\n      TO_DATE: endDate.getFullYear() + '-' + this.getTwoDigitNumStr(endDate.getMonth() + 1) + '-' + this.getTwoDigitNumStr(endDate.getDate()),\n      BALANCE: '',\n      NOTES: '',\n      RELEASE_AFTER_HOURS: 0,\n      PR_ID: this.selectedRooms[keys[0]].roomId,\n      ENTRY_DATE: '',\n      NO_OF_DAYS: (endDate - startDate) / 86400000,\n      ADULTS_COUNT: 1,\n      COUNTRY: '',\n      INTERNAL_NOTE: '',\n      RATE: '',\n      TOTAL_PRICE: '',\n      RATE_PLAN: '',\n      ARRIVAL_TIME: '',\n      TITLE: locales.entries.Lcz_NewBookingFor,\n      roomsInfo: [roomCategory],\n      CATEGORY: roomCategory.name,\n      event_type: 'BAR_BOOKING',\n      STATUS: 'TEMP-EVENT',\n      defaultDateRange: {\n        fromDate: null,\n        fromDateStr: '',\n        toDate: null,\n        toDateStr: '',\n        dateDifference: (endDate - startDate) / 86400000,\n        editable: false,\n        message: 'Including 5.00% City Tax - Excluding 11.00% VAT',\n      },\n    };\n\n    let popupTitle = roomCategory.name + ' ' + this.getRoomName(this.getRoomById(this.getCategoryRooms(roomCategory), this.selectedRooms[keys[0]].roomId));\n    this.newEvent.BLOCK_DATES_TITLE = `${locales.entries.Lcz_BlockDatesFor} ${popupTitle}`;\n    this.newEvent.TITLE += popupTitle;\n    this.newEvent.defaultDateRange.toDate = new Date(this.newEvent.TO_DATE + 'T00:00:00');\n    this.newEvent.defaultDateRange.fromDate = new Date(this.newEvent.FROM_DATE + 'T00:00:00');\n    this.newEvent.defaultDateRange.fromDateStr = this.getDateStr(this.newEvent.defaultDateRange.fromDate);\n    this.newEvent.defaultDateRange.toDateStr = this.getDateStr(this.newEvent.defaultDateRange.toDate);\n    this.newEvent.ENTRY_DATE = new Date().toISOString();\n    this.newEvent.legendData = this.calendarData.formattedLegendData;\n\n    let splitBookingEvents = this.getSplitBookingEvents(this.newEvent);\n    if (splitBookingEvents) {\n      this.newEvent.splitBookingEvents = splitBookingEvents;\n    }\n\n    this.getBookingData().push(this.newEvent);\n    return this.newEvent;\n  }\n\n  getTwoDigitNumStr(num) {\n    return num <= 9 ? '0' + num : num;\n  }\n\n  getDateStr(date, locale = 'default') {\n    return date.getDate() + ' ' + date.toLocaleString(locale, { month: 'short' }) + ' ' + date.getFullYear();\n  }\n\n  removeNewEvent() {\n    this.calendarData.bookingEvents = this.calendarData.bookingEvents.filter(events => events.ID !== 'NEW_TEMP_EVENT');\n    this.newEvent = null;\n  }\n\n  clickCell(roomId, selectedDay, roomCategory) {\n    if (!this.isScrollViewDragging && selectedDay.currentDate >= this.currentDate.getTime()) {\n      let refKey = this.getSelectedCellRefName(roomId, selectedDay);\n      if (this.selectedRooms.hasOwnProperty(refKey)) {\n        this.removeNewEvent();\n        delete this.selectedRooms[refKey];\n        this.renderElement();\n        return;\n      } else if (Object.keys(this.selectedRooms).length != 1 || this.fromRoomId != roomId) {\n        this.removeNewEvent();\n        this.selectedRooms = {};\n        this.selectedRooms[refKey] = { ...selectedDay, roomId };\n        this.fromRoomId = roomId;\n        this.renderElement();\n      } else {\n        // create bar;\n        this.selectedRooms[refKey] = { ...selectedDay, roomId };\n        this.addNewEvent(roomCategory);\n        this.selectedRooms = {};\n        this.renderElement();\n        this.showNewBookingPopup(this.newEvent);\n      }\n    }\n  }\n\n  showNewBookingPopup(data) {\n    console.log(data);\n    // this.showBookingPopup.emit({key: \"add\", data});\n  }\n\n  renderElement() {\n    this.renderAgain = !this.renderAgain;\n  }\n  private getBookingMap(bookings: any[]): Map<string | number, string | number> {\n    const bookingMap = new Map<string | number, string | number>();\n    const today = moment().startOf('day');\n\n    for (const booking of bookings) {\n      const fromDate = moment(booking.FROM_DATE, 'YYYY-MM-DD').startOf('day');\n      const toDate = moment(booking.TO_DATE, 'YYYY-MM-DD').startOf('day');\n\n      // Check if today is between fromDate and toDate, inclusive.\n      if (today.isSameOrAfter(fromDate) && today.isSameOrBefore(toDate)) {\n        if (!bookingMap.has(booking.PR_ID)) {\n          bookingMap.set(booking.PR_ID, booking.BOOKING_NUMBER);\n        } else {\n          if (compareTime(moment().toDate(), createDateWithOffsetAndHour(calendar_data.checkin_checkout_hours?.offset, calendar_data.checkin_checkout_hours?.hour))) {\n            bookingMap.set(booking.PR_ID, booking.BOOKING_NUMBER);\n          }\n        }\n      }\n    }\n\n    return bookingMap;\n  }\n  getGeneralCategoryDayColumns(addClass: string, isCategory: boolean = false, index: number) {\n    return calendar_dates.days.map(dayInfo => {\n      return (\n        <div\n          class={`cellData  font-weight-bold categoryPriceColumn ${addClass + '_' + dayInfo.day} ${\n            dayInfo.day === this.today || dayInfo.day === this.highlightedDate ? 'currentDay' : ''\n          }`}\n        >\n          {isCategory ? (\n            <span class={'categoryName'}>\n              {dayInfo.rate[index].exposed_inventory.rts}\n              {/* <br />\n              {dayInfo.rate[index].exposed_inventory.offline} */}\n            </span>\n          ) : (\n            ''\n          )}\n        </div>\n      );\n    });\n  }\n\n  getGeneralRoomDayColumns(roomId: string, roomCategory: RoomCategory, roomName: string) {\n    // onDragOver={event => this.handleDragOver(event)} onDrop={event => this.handleDrop(event, addClass+\"_\"+dayInfo.day)}\n    return this.calendarData.days.map(dayInfo => {\n      return (\n        <div\n          class={`cellData ${'room_' + roomId + '_' + dayInfo.day} ${dayInfo.day === this.today || dayInfo.day === this.highlightedDate ? 'currentDay' : ''} ${\n            this.dragOverElement === roomId + '_' + dayInfo.day ? 'dragOverHighlight' : ''\n          } ${this.selectedRooms.hasOwnProperty(this.getSelectedCellRefName(roomId, dayInfo)) ? 'selectedDay' : ''}`}\n          onClick={() => this.clickCell(roomId, dayInfo, roomCategory)}\n          data-date={moment(dayInfo.currentDate).format('YYYY-MM-DD')}\n          data-room-name={roomName}\n        ></div>\n      );\n    });\n  }\n\n  toggleCategory(roomCategory: RoomCategory) {\n    roomCategory.expanded = !roomCategory.expanded;\n    this.renderElement();\n  }\n\n  getRoomCategoryRow(roomCategory: RoomCategory, index: number) {\n    if (this.getTotalPhysicalRooms(roomCategory) <= 1 || !roomCategory.is_active) {\n      return null;\n    }\n    return (\n      <div class=\"roomRow\">\n        <div\n          class={`cellData text-left align-items-center roomHeaderCell categoryTitle ${'category_' + this.getCategoryId(roomCategory)}`}\n          onClick={() => this.toggleCategory(roomCategory)}\n        >\n          <div class={'categoryName'}>\n            <ir-interactive-title popoverTitle={this.getCategoryName(roomCategory)}></ir-interactive-title>\n            {/* <ir-popover popoverTitle={this.getCategoryName(roomCategory)}></ir-popover> */}\n          </div>\n          {roomCategory.expanded ? (\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\" height={14} width={14}>\n              <path\n                fill=\"#6b6f82\"\n                d=\"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z\"\n              />\n            </svg>\n          ) : (\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\" height={14} width={14}>\n              <path\n                fill=\"#6b6f82\"\n                d=\"M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z\"\n              />\n            </svg>\n          )}\n          {/* <i class={`la la-angle-${roomCategory.expanded ? 'down' : 'right'}`}></i> */}\n        </div>\n        {this.getGeneralCategoryDayColumns('category_' + this.getCategoryId(roomCategory), true, index)}\n      </div>\n    );\n  }\n\n  /**\n   * Renders a list of active rooms for an expanded room category. Returns an array of JSX elements, including headers and day columns, or an empty array if the category is collapsed or contains no active rooms.\n   *\n   * @param {RoomCategory} roomCategory - The category containing room details.\n   * @returns {JSX.Element[]} - JSX elements for the active rooms or an empty array.\n   */\n  private getRoomsByCategory(roomCategory: RoomCategory) {\n    // Check accordion is expanded.\n    if (!roomCategory.expanded) {\n      return [];\n    }\n\n    return this.getCategoryRooms(roomCategory)?.map(room => {\n      if (!room.is_active) {\n        return null;\n      }\n      return (\n        <div class=\"roomRow\">\n          <div\n            class={`cellData room text-left align-items-center roomHeaderCell  roomTitle ${this.getTotalPhysicalRooms(roomCategory) <= 1 ? 'pl10' : ''} ${\n              'room_' + this.getRoomId(room)\n            }`}\n            data-room={this.getRoomId(room)}\n            onClick={() => {\n              console.log(room);\n              this.selectedRoom = room;\n              this.hkModal.openModal();\n            }}\n            onMouseEnter={() => {\n              this.interactiveTitle[room.id]?.style?.setProperty('--ir-interactive-hk-bg', '#e0e0e0');\n            }}\n            onMouseLeave={() => {\n              this.interactiveTitle[room.id]?.style?.removeProperty('--ir-interactive-hk-bg');\n            }}\n          >\n            {/* <div>{this.getTotalPhysicalRooms(roomCategory) <= 1 ? this.getCategoryName(roomCategory) : this.getRoomName(room)}</div> */}\n            {/* <ir-popover popoverTitle={this.getTotalPhysicalRooms(roomCategory) <= 1 ? this.getCategoryName(roomCategory) : this.getRoomName(room)}></ir-popover> */}\n            <ir-interactive-title\n              ref={el => {\n                if (el) this.interactiveTitle[room.id] = el;\n              }}\n              style={room.hk_status === '003' && { '--dot-color': '#999999' }}\n              hkStatus={room.hk_status !== '001'}\n              popoverTitle={this.getTotalPhysicalRooms(roomCategory) <= 1 ? this.getCategoryName(roomCategory) : this.getRoomName(room)}\n            ></ir-interactive-title>\n          </div>\n          {this.getGeneralRoomDayColumns(this.getRoomId(room), roomCategory, room.name)}\n        </div>\n      );\n    });\n  }\n\n  getRoomRows() {\n    return this.calendarData.roomsInfo?.map((roomCategory, index) => {\n      if (roomCategory.is_active) {\n        return [this.getRoomCategoryRow(roomCategory, index), this.getRoomsByCategory(roomCategory)];\n      } else {\n        return null;\n      }\n    });\n  }\n  private async confirmHousekeepingUpdate(e: CustomEvent) {\n    e.stopImmediatePropagation();\n    e.stopPropagation();\n    try {\n      this.isLoading = true;\n      const newStatusCode = this.selectedRoom?.hk_status === '001' ? '002' : '001';\n      await this.housekeepingService.setExposedUnitHKStatus({\n        property_id: this.propertyId,\n        // housekeeper: this.selectedRoom?.housekeeper ? { id: this.selectedRoom?.housekeeper?.id } : null,\n        status: {\n          code: newStatusCode,\n        },\n        unit: {\n          id: this.selectedRoom?.id,\n        },\n      });\n      if (newStatusCode === '001') {\n        await this.housekeepingService.executeHKAction({\n          actions: [\n            {\n              description: 'Cleaned',\n              hkm_id: this.selectedRoom?.housekeeper.id || null,\n              unit_id: this.selectedRoom?.id,\n              booking_nbr: this.bookingMap.get(this.selectedRoom?.id) ?? null,\n            },\n          ],\n        });\n      }\n    } finally {\n      this.isLoading = false;\n      this.selectedRoom = null;\n      this.hkModal.closeModal();\n    }\n  }\n  render() {\n    // onDragStart={event => this.handleDragStart(event)} draggable={true}\n    return (\n      <Host>\n        <div class=\"bodyContainer\">\n          {this.getRoomRows()}\n          <div class=\"bookingEventsContainer preventPageScroll\">\n            {this.getBookingData()?.map(bookingEvent => {\n              return (\n                <igl-booking-event\n                  data-testid={`booking_${bookingEvent.BOOKING_NUMBER}`}\n                  data-room-name={bookingEvent.roomsInfo?.find(r => r.id === bookingEvent.RATE_TYPE)?.physicalrooms.find(r => r.id === bookingEvent.PR_ID)?.name}\n                  language={this.language}\n                  is_vacation_rental={this.calendarData.is_vacation_rental}\n                  countries={this.countries}\n                  currency={this.currency}\n                  data-component-id={bookingEvent.ID}\n                  bookingEvent={bookingEvent}\n                  allBookingEvents={this.getBookingData()}\n                ></igl-booking-event>\n              );\n            })}\n          </div>\n        </div>\n        <ir-modal\n          ref={el => (this.hkModal = el)}\n          leftBtnText={locales?.entries?.Lcz_Cancel}\n          rightBtnText={locales?.entries?.Lcz_Update}\n          modalBody={this.renderModalBody()}\n          onConfirmModal={this.confirmHousekeepingUpdate.bind(this)}\n          autoClose={false}\n          isLoading={this.isLoading}\n          onCancelModal={e => {\n            e.stopImmediatePropagation();\n            e.stopPropagation();\n            this.selectedRoom = null;\n            this.hkModal.closeModal();\n          }}\n        ></ir-modal>\n      </Host>\n    );\n  }\n\n  private renderModalBody() {\n    if (!this.selectedRoom) {\n      return null;\n    }\n    return (\n      <p>\n        Update unit {this.selectedRoom?.name} to <b>{this.selectedRoom?.hk_status === '001' ? 'Dirty' : 'Clean'}?</b>\n      </p>\n      // <ir-select\n      //   LabelAvailable={false}\n      //   showFirstOption={false}\n      //   selectedValue={this.selectedRoom?.hk_status === '001' ? '001' : '002'}\n      //   data={[\n      //     { text: 'Clean', value: '001' },\n      //     { text: 'Dirty', value: '002' },\n      //   ]}\n      //   onSelectChange={e => (this.selectedHKStatus = e.detail)}\n      // ></ir-select>\n    );\n  }\n}\n",":host {\r\n  display: block;\r\n  position: sticky;\r\n  bottom: 0;\r\n  width: max-content;\r\n  z-index: 3;\r\n}\r\n\r\n.footerCell {\r\n  display: -moz-inline-grid;\r\n  display: -ms-inline-grid;\r\n  display: inline-grid;\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  bottom: 0;\r\n  width: 58px;\r\n  height: 40px;\r\n  /* color: #b8b6b7; */\r\n  background: #fff;\r\n  vertical-align: top;\r\n  border-top: 1px solid #e0e0e0;\r\n}\r\n\r\n.bottomLeftCell {\r\n  left: -1px;\r\n  z-index: 2;\r\n  width: 170px;\r\n  text-align: left;\r\n  padding-left: 15px;\r\n  color: #000000;\r\n}\r\n\r\n.footerCell i {\r\n  margin-right: 5px;\r\n}\r\n\r\n.legendBtn {\r\n  color: #41bff3;\r\n  cursor: pointer;\r\n}\r\n\r\n.isOnline i {\r\n  color: #2f9c3f;\r\n  font-weight: bold;\r\n}\r\n\r\n.isOffline i {\r\n  font-weight: bold;\r\n}\r\n\r\n.isOffline {\r\n  color: #a40000;\r\n}\r\n\r\n.dayTitle {\r\n  font-size: 0.8em;\r\n  font-weight: 600;\r\n  display: grid;\r\n  user-select: none;\r\n  /* height: 100%;\r\n  \r\n  align-items: center;\r\n  text-align: center;\r\n  width: 100%; */\r\n}\r\n\r\n.currentDay .dayTitle {\r\n  font-weight: bold;\r\n  /* color: #262b31; */\r\n}\r\n\r\n.currentDay {\r\n  background-color: #e3f3fa;\r\n}\r\n\r\n.dayCapacityPercent {\r\n  font-size: 0.75em;\r\n}\r\n\r\n.badge-pill {\r\n  padding-left: 1em;\r\n  padding-right: 1em;\r\n  font-size: 0.7em;\r\n  margin-bottom: 2px;\r\n}\r\n","import locales from '@/stores/locales.store';\nimport { Component, Event, EventEmitter, Host, Prop, h } from '@stencil/core';\n\n@Component({\n  tag: 'igl-cal-footer',\n  styleUrl: 'igl-cal-footer.css',\n  scoped: true,\n})\nexport class IglCalFooter {\n  @Event() optionEvent: EventEmitter<{ [key: string]: any }>;\n  @Prop() calendarData: { [key: string]: any };\n  @Prop() today: String;\n  @Prop() highlightedDate: string;\n\n  // private isOnline:boolean = false;\n\n  handleOptionEvent(key, data = '') {\n    this.optionEvent.emit({ key, data });\n  }\n\n  render() {\n    return (\n      <Host class=\"footerContainer\">\n        <div class=\"footerCell bottomLeftCell align-items-center preventPageScroll\">\n          <div class=\"legendBtn\" onClick={() => this.handleOptionEvent('showLegend')}>\n            <i class=\"la la-square\"></i>\n            <u>{locales.entries.Lcz_Legend}</u>\n            <span> - v1.005</span>\n          </div>\n          {/* <div class={`${this.isOnline ? 'isOnline' : 'isOffline'}`}>\n            <i class=\"la la-share-alt isOffline\"></i><span>{this.isOnline ? \"Connected\": \"Offline\"}</span>\n          </div> */}\n        </div>\n        {this.calendarData.days.map(dayInfo => (\n          <div class=\"footerCell align-items-center\">\n            <div class={`dayTitle full-height align-items-center ${dayInfo.day === this.today || this.highlightedDate === dayInfo.day ? 'currentDay' : ''}`}>\n              {dayInfo.dayDisplayName}\n            </div>\n\n            {/* <div class=\"dayTitle\">{dayInfo.dayDisplayName}</div>\n              <div class=\"dayCapacityPercent\">28.57%</div>\n              <div class=\"preventPageScroll\">\n                <span class=\"badge badge-primary badge-pill\">\n                  {index}\n                </span>\n              </div> */}\n          </div>\n        ))}\n      </Host>\n    );\n  }\n}\n",":host {\r\n  display: block;\r\n  position: absolute;\r\n  top: 0;\r\n  height: 100%;\r\n}\r\n.svg-icon {\r\n  height: 20px;\r\n  width: 20px;\r\n}\r\n.darkGrey {\r\n  background: #ececec;\r\n}\r\n.btn {\r\n  pointer-events: auto;\r\n}\r\n\r\n.stickyCell {\r\n  display: -ms-inline-grid;\r\n  display: -moz-inline-grid;\r\n  display: inline-grid;\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  top: 0px;\r\n  height: 82px;\r\n  display: inline-block;\r\n  vertical-align: top;\r\n  z-index: 2;\r\n}\r\n\r\n.headersContainer {\r\n  background-color: #ffffff;\r\n}\r\n\r\n.headerCell {\r\n  display: inline-grid;\r\n  width: 58px;\r\n  height: 58px;\r\n  vertical-align: top;\r\n  background-color: #ffffff;\r\n  border-bottom: 1px solid #e0e0e0;\r\n}\r\n\r\n.monthsContainer {\r\n  height: 20px;\r\n  background-color: #ffffff;\r\n  margin-bottom: 0.2em;\r\n}\r\n\r\n.monthCell {\r\n  display: inline-grid;\r\n  height: 20px;\r\n  background-color: #ececec;\r\n  border-right: 1px solid #c7c7c7;\r\n  vertical-align: top;\r\n}\r\n\r\n.monthCell:nth-child(odd) {\r\n  background-color: #dddddd;\r\n}\r\n\r\n.monthTitle {\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  font-size: 0.9em;\r\n  text-transform: uppercase;\r\n  font-weight: bold;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.topLeftCell {\r\n  left: 0px;\r\n  z-index: 3;\r\n  width: 170px;\r\n  background-color: #ffffff;\r\n  display: -ms-inline-grid;\r\n  display: -moz-inline-grid;\r\n  display: inline-grid;\r\n}\r\n.datePickerHidden {\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n  opacity: 0;\r\n  cursor: pointer;\r\n  /* z-index: 1; */\r\n  z-index: 1;\r\n}\r\n\r\n.date_btn {\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  position: relative;\r\n}\r\n\r\n.date_btn:hover {\r\n  background: #f6f6f6;\r\n  border-radius: 0.3rem;\r\n}\r\n.caledarBtns {\r\n  position: relative;\r\n  cursor: pointer;\r\n  padding: 0.4rem;\r\n}\r\n\r\n.caledarBtns:hover {\r\n  background-color: #f6f6f6;\r\n}\r\n\r\n.dayTitle {\r\n  font-size: 0.8em;\r\n  font-weight: 600;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.currentDay .dayTitle {\r\n  font-weight: bold;\r\n}\r\n\r\n.currentDay {\r\n  background-color: #e3f3fa;\r\n}\r\n\r\n.dayCapacityPercent {\r\n  font-size: 0.75em;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.badge-pill {\r\n  padding: 3px 1em;\r\n  font-size: 0.8em;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.pointer {\r\n  cursor: pointer;\r\n}\r\n\r\n.searchContiner {\r\n  padding-left: 10px;\r\n  padding-right: 10px;\r\n}\r\n\r\n.searchListContainer {\r\n  background: #fff;\r\n  border: 1px solid #ccc;\r\n  border-bottom: none;\r\n}\r\n\r\n.searchListItem {\r\n  background: white;\r\n  border-bottom: 1px solid #ccc;\r\n  padding-left: 8px;\r\n}\r\n\r\n.badge-light {\r\n  background-color: #999999;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n.min-width-full {\r\n  min-width: 100%;\r\n}\r\n","import { Component, Event, EventEmitter, Host, Prop, h, State, Listen, Watch } from '@stencil/core';\nimport { ToBeAssignedService } from '@/services/toBeAssigned.service';\nimport { dateToFormattedString } from '@/utils/utils';\nimport moment from 'moment';\nimport locales from '@/stores/locales.store';\nimport { handleUnAssignedDatesChange } from '@/stores/unassigned_dates.store';\nimport { colorVariants } from '@/components/ui/ir-icons/icons';\n\n@Component({\n  tag: 'igl-cal-header',\n  styleUrl: 'igl-cal-header.css',\n  scoped: true,\n})\nexport class IglCalHeader {\n  @Event() optionEvent: EventEmitter<{ [key: string]: any }>;\n  @Event({ bubbles: true, composed: true }) gotoRoomEvent: EventEmitter<{\n    [key: string]: any;\n  }>;\n  @Event({ bubbles: true, composed: true }) gotoToBeAssignedDate: EventEmitter<{\n    [key: string]: any;\n  }>;\n  @Prop() calendarData: { [key: string]: any };\n  @Prop() today: String;\n  @Prop() propertyid: number;\n  @Prop() unassignedDates;\n  @Prop() to_date: string;\n  @Prop() highlightedDate: string;\n  @State() renderAgain: boolean = false;\n  @State() unassignedRoomsNumber: any = {};\n  private searchValue: string = '';\n  private searchList: { [key: string]: any }[] = [];\n  private roomsList: { [key: string]: any }[] = [];\n  private toBeAssignedService = new ToBeAssignedService();\n  dateRef: HTMLIrButtonElement;\n  componentWillLoad() {\n    try {\n      this.initializeRoomsList();\n\n      if (!this.calendarData.is_vacation_rental) {\n        handleUnAssignedDatesChange('unassigned_dates', newValue => {\n          if (Object.keys(newValue).length > 0) {\n            this.fetchAndAssignUnassignedRooms();\n          }\n        });\n      }\n    } catch (error) {\n      console.error('Error in componentWillLoad:', error);\n    }\n  }\n  @Watch('unassignedDates')\n  handleCalendarDataChanged() {\n    this.fetchAndAssignUnassignedRooms();\n  }\n  private initializeRoomsList() {\n    this.roomsList = [];\n    this.calendarData.roomsInfo.forEach(category => {\n      this.roomsList = this.roomsList.concat(...category.physicalrooms);\n    });\n  }\n\n  private async fetchAndAssignUnassignedRooms() {\n    await this.assignRoomsToDate();\n  }\n\n  private async assignRoomsToDate() {\n    try {\n      const { fromDate, toDate, data } = this.unassignedDates;\n      let dt = new Date(fromDate);\n      dt.setHours(0, 0, 0, 0);\n      let endDate = dt.getTime();\n      while (endDate <= new Date(toDate).getTime()) {\n        const selectedDate = moment(endDate).format('D_M_YYYY');\n        if (data[endDate]) {\n          const result = await this.toBeAssignedService.getUnassignedRooms(\n            { from_date: this.calendarData.from_date, to_date: this.calendarData.to_date },\n            this.propertyid,\n            dateToFormattedString(new Date(endDate)),\n            this.calendarData.roomsInfo,\n            this.calendarData.formattedLegendData,\n          );\n          this.unassignedRoomsNumber[selectedDate] = result.length;\n        } else if (this.unassignedRoomsNumber[selectedDate]) {\n          const res = this.unassignedRoomsNumber[selectedDate] - 1;\n          this.unassignedRoomsNumber[selectedDate] = res < 0 ? 0 : res;\n        }\n        const newEndDate = moment(endDate).add(1, 'days').toDate();\n        newEndDate.setHours(0, 0, 0, 0);\n        endDate = newEndDate.getTime();\n        this.renderView();\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  @Listen('reduceAvailableUnitEvent', { target: 'window' })\n  handleReduceAvailableUnitEvent(event: CustomEvent<{ fromDate: string; toDate: string }>) {\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n    const { fromDate, toDate } = event.detail;\n    let endDate = new Date(fromDate).getTime();\n    while (endDate < new Date(toDate).getTime()) {\n      const selectedDate = moment(endDate).format('D_M_YYYY');\n      this.unassignedRoomsNumber[selectedDate] = this.unassignedRoomsNumber[selectedDate] - 1;\n      endDate = moment(endDate).add(1, 'days').toDate().getTime();\n    }\n    this.renderView();\n  }\n\n  showToBeAssigned(dayInfo) {\n    if (this.unassignedRoomsNumber[dayInfo.day] || 0) {\n      this.handleOptionEvent('showAssigned');\n      setTimeout(() => {\n        this.gotoToBeAssignedDate.emit({\n          key: 'gotoToBeAssignedDate',\n          data: dayInfo.currentDate,\n        });\n      }, 100);\n    } else {\n      // do nothing as the value is 0;\n    }\n  }\n\n  handleOptionEvent(key, data: any = '') {\n    this.optionEvent.emit({ key, data });\n  }\n\n  handleDateSelect(event: CustomEvent) {\n    if (Object.keys(event.detail).length > 0) {\n      this.handleOptionEvent('calendar', event.detail);\n    }\n  }\n\n  handleClearSearch() {\n    this.searchValue = '';\n    this.searchList = [];\n    this.renderView();\n  }\n\n  handleFilterRooms(event: Event) {\n    const inputElement = event.target as HTMLInputElement;\n    let value = inputElement.value.trim();\n    this.searchValue = value;\n    value = value.toLowerCase();\n    if (value === '') {\n      this.handleClearSearch();\n    } else {\n      this.searchList = this.roomsList.filter(room => room.name.toLocaleLowerCase().indexOf(value) != -1);\n    }\n    this.renderView();\n  }\n\n  handleScrollToRoom(roomId) {\n    this.handleClearSearch();\n    this.gotoRoomEvent.emit({ key: 'gotoRoom', roomId });\n  }\n\n  getStringDateFormat(dt) {\n    return dt.getFullYear() + '-' + (dt.getMonth() < 9 ? '0' : '') + (dt.getMonth() + 1) + '-' + (dt.getDate() <= 9 ? '0' : '') + dt.getDate();\n  }\n\n  getNewBookingModel() {\n    let today = new Date();\n    today.setHours(0, 0, 0, 0);\n    let from_date = this.getStringDateFormat(today);\n    today.setDate(today.getDate() + 1);\n    today.setHours(0, 0, 0, 0);\n    let to_date = this.getStringDateFormat(today);\n    return {\n      ID: '',\n      NAME: '',\n      EMAIL: '',\n      PHONE: '',\n      REFERENCE_TYPE: 'PHONE',\n      FROM_DATE: from_date, // \"2023-07-09\",\n      TO_DATE: to_date, // \"2023-07-11\",\n      roomsInfo: this.calendarData.roomsInfo,\n      TITLE: locales.entries.Lcz_NewBooking,\n      event_type: 'PLUS_BOOKING',\n      legendData: this.calendarData.formattedLegendData,\n      defaultDateRange: {\n        fromDate: new Date(from_date), //new Date(\"2023-09-10\"),\n        fromDateStr: '', //\"10 Sep 2023\",\n        toDate: new Date(to_date), //new Date(\"2023-09-15\"),\n        toDateStr: '', // \"15 Sep 2023\",\n        dateDifference: 0,\n        editabled: true,\n        message: '',\n      },\n    };\n  }\n\n  renderView() {\n    this.renderAgain = !this.renderAgain;\n  }\n\n  render() {\n    return (\n      <Host>\n        <div class=\"stickyCell align-items-center topLeftCell preventPageScroll\">\n          <div class=\"row justify-content-around no-gutters\">\n            {/* {!this.calendarData.is_vacation_rental && (\n              <div\n                class=\"caledarBtns\"\n                onClick={() => this.handleOptionEvent('showAssigned')}\n                data-toggle=\"tooltip\"\n                data-placement=\"bottom\"\n                title={locales.entries.Lcz_UnassignedUnitsTooltip}\n              >\n\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" class=\"svg-icon\">\n                  <path\n                    fill=\"#6b6f82\"\n                    d=\"M448 160H320V128H448v32zM48 64C21.5 64 0 85.5 0 112v64c0 26.5 21.5 48 48 48H464c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H48zM448 352v32H192V352H448zM48 288c-26.5 0-48 21.5-48 48v64c0 26.5 21.5 48 48 48H464c26.5 0 48-21.5 48-48V336c0-26.5-21.5-48-48-48H48z\"\n                  />\n                </svg>\n              </div>\n            )} */}\n            {/* <div class=\"caledarBtns\" onClick={() => this.handleOptionEvent('calendar')} data-toggle=\"tooltip\" data-placement=\"bottom\" title={locales.entries.Lcz_Navigate}>\n          \n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\" class={'svg-icon'}>\n                <path\n                  fill=\"#6b6f82\"\n                  d=\"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z\"\n                />\n              </svg>\n\n              </div> */}\n            {/* <div class=\"caledarBtns\" onClick={() => this.handleOptionEvent('gotoToday')} data-toggle=\"tooltip\" data-placement=\"bottom\" title={locales.entries.Lcz_Today}>\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" class=\"svg-icon\">\n              <path\n                  fill=\"#6b6f82\"\n                  d=\"M464 256A208 208 0 1 1 48 256a208 208 0 1 1 416 0zM0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z\"\n                />\n                </svg>\n                </div> */}\n            {!this.calendarData.is_vacation_rental && (\n              <ir-button\n                variant=\"icon\"\n                icon_name=\"server\"\n                style={{ ...colorVariants.secondary, '--icon-size': '1.5rem' }}\n                data-toggle=\"tooltip\"\n                data-placement=\"bottom\"\n                title={locales.entries.Lcz_UnassignedUnitsTooltip}\n                onClickHandler={() => this.handleOptionEvent('showAssigned')}\n                btn_styles=\"caledarBtns\"\n                visibleBackgroundOnHover\n              ></ir-button>\n            )}\n            <ir-date-picker\n              minDate={moment().add(-2, 'months').startOf('month').format('YYYY-MM-DD')}\n              // autoApply\n              // singleDatePicker\n              onDateChanged={evt => {\n                console.log('evt', evt);\n                this.handleDateSelect(evt);\n              }}\n              // class=\"datePickerHidden\"\n              class={'date_btn'}\n              title={locales.entries.Lcz_Navigate}\n              data-toggle=\"tooltip\"\n              data-placement=\"bottom\"\n            >\n              <ir-button\n                slot=\"trigger\"\n                btn_styles=\"caledarBtns\"\n                variant=\"icon\"\n                icon_name=\"calendar\"\n                style={{ ...colorVariants.secondary, '--icon-size': '1.5rem' }}\n                onClickHandler={() => this.handleOptionEvent('calendar')}\n                visibleBackgroundOnHover\n                ref={el => (this.dateRef = el)}\n              ></ir-button>\n            </ir-date-picker>\n\n            <ir-button\n              variant=\"icon\"\n              btn_styles=\"caledarBtns\"\n              class={'pointer'}\n              icon_name=\"clock\"\n              visibleBackgroundOnHover\n              style={{ ...colorVariants.secondary, '--icon-size': '1.5rem' }}\n              data-toggle=\"tooltip\"\n              data-placement=\"bottom\"\n              title={locales.entries.Lcz_Today}\n              onClickHandler={() => this.handleOptionEvent('gotoToday')}\n            ></ir-button>\n            <ir-button\n              variant=\"icon\"\n              btn_styles=\"caledarBtns\"\n              icon_name=\"plus\"\n              data-toggle=\"tooltip\"\n              data-placement=\"bottom\"\n              data-testid=\"new_booking_btn\"\n              title={locales.entries.Lcz_CreateNewBooking}\n              visibleBackgroundOnHover\n              style={{ ...colorVariants.secondary, '--icon-size': '1.5rem' }}\n              onClickHandler={() => this.handleOptionEvent('add', this.getNewBookingModel())}\n            ></ir-button>\n            {/* <div\n              class=\"caledarBtns\"\n              onClick={() => this.handleOptionEvent('add', this.getNewBookingModel())}\n              data-toggle=\"tooltip\"\n              data-placement=\"bottom\"\n              title={locales.entries.Lcz_CreateNewBooking}\n            >\n\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\" class=\"svg-icon\">\n                <path\n                  fill=\"#6b6f82\"\n                  d=\"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z\"\n                />\n              </svg>\n            </div> */}\n          </div>\n          <div class=\"row justify-content-around no-gutters searchContiner\">\n            <fieldset class={`form-group position-relative ${this.searchValue != '' ? 'show' : ''}`}>\n              <input\n                type=\"text\"\n                class=\"form-control form-control-sm input-sm\"\n                id=\"iconLeft7\"\n                value={this.searchValue}\n                placeholder={locales.entries.Lcz_FindUnit}\n                onInput={event => this.handleFilterRooms(event)}\n              />\n              {this.searchValue !== '' ? (\n                <div\n                  class=\"form-control-position pointer\"\n                  onClick={() => this.handleClearSearch()}\n                  data-toggle=\"tooltip\"\n                  data-placement=\"top\"\n                  data-original-title=\"Clear Selection\"\n                >\n                  <i class=\"la la-close font-small-4\"></i>\n                </div>\n              ) : null}\n\n              {this.searchList.length ? (\n                <div class=\"position-absolute searchListContainer dropdown-menu dropdown-menu-left min-width-full\">\n                  {this.searchList.map(room => (\n                    <div class=\"searchListItem1 dropdown-item px-1 text-left pointer\" onClick={() => this.handleScrollToRoom(room.id)}>\n                      {room.name}\n                    </div>\n                  ))}\n                </div>\n              ) : null}\n            </fieldset>\n          </div>\n        </div>\n        <div class=\"stickyCell headersContainer\">\n          <div class=\"monthsContainer\">\n            {this.calendarData.monthsInfo.map(monthInfo => (\n              <div class=\"monthCell\" style={{ width: monthInfo.daysCount * 58 + 'px' }}>\n                <div class=\"monthTitle\">{monthInfo.monthName}</div>\n              </div>\n            ))}\n          </div>\n          {this.calendarData.days.map(dayInfo => (\n            <div\n              class={`headerCell align-items-center ${'day-' + dayInfo.day} ${dayInfo.day === this.today || dayInfo.day === this.highlightedDate ? 'currentDay' : ''}`}\n              data-day={dayInfo.day}\n            >\n              {!this.calendarData.is_vacation_rental && (\n                <div class=\"preventPageScroll\">\n                  <span\n                    class={`badge badge-${this.unassignedRoomsNumber[dayInfo.day] || dayInfo.unassigned_units_nbr !== 0 ? 'info pointer' : 'light'} badge-pill`}\n                    onClick={() => this.showToBeAssigned(dayInfo)}\n                  >\n                    {this.unassignedRoomsNumber[dayInfo.day] || dayInfo.unassigned_units_nbr}\n                  </span>\n                </div>\n              )}\n              <div class=\"dayTitle\">{dayInfo.dayDisplayName}</div>\n              <div class=\"dayCapacityPercent\">{dayInfo.occupancy}%</div>\n            </div>\n          ))}\n        </div>\n      </Host>\n    );\n  }\n}\n",":host {\r\n  display: block;\r\n}\r\n\r\n/* Legend */\r\n\r\n.legendHeader {\r\n  font-weight: 500;\r\n  letter-spacing: 0.05rem;\r\n  font-size: 1.12rem;\r\n  padding-top: 5px;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.legendCloseBtn {\r\n  position: absolute;\r\n  top: 50%;\r\n  right: 0;\r\n  cursor: pointer;\r\n  font-size: 1.75em;\r\n  line-height: 1em;\r\n  padding: 0.4rem;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 3px;\r\n  transform: translateY(-50%);\r\n}\r\n\r\n.legendCloseBtn:hover {\r\n  background-color: #f6f6f6;\r\n}\r\n\r\n.stickyHeader {\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  top: 0;\r\n  background-color: #ffffff;\r\n  z-index: 1;\r\n}\r\n\r\n.legendRow {\r\n  position: relative;\r\n  vertical-align: middle;\r\n  margin-bottom: 0.3rem;\r\n}\r\n\r\n.legendRow div {\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n}\r\n\r\n.legend_skew,\r\n.legend_skew-bordered,\r\n.legend_skewsplit {\r\n  transform: skew(-30deg);\r\n  width: 15px;\r\n  height: 16px;\r\n}\r\n.legend_skew-bordered {\r\n  border: 1px solid black;\r\n}\r\n\r\n.legend_circle {\r\n  border-radius: 100%;\r\n  width: 10px;\r\n  height: 10px;\r\n  margin: 3px 3px 3px 2px;\r\n}\r\n\r\n.legend_skewsplit {\r\n  border-right: 2px solid #000000;\r\n}\r\n.headerCell .blueColor {\r\n  background-color: #31bef1;\r\n}\r\n.greenColor {\r\n  background-color: #45b16d;\r\n}\r\n.yellowColor {\r\n  background-color: #f4d552;\r\n}\r\n.greyColor {\r\n  background-color: #a0a0a0;\r\n}\r\n.redColor {\r\n  background-color: #f34752;\r\n}\r\n.pinkColor {\r\n  background-color: #f9b4b7;\r\n}\r\n\r\n/* Legend Calendar */\r\n\r\n.legendCalendar .legendRow {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.legendCalendar .legendRow:first-child .legendCal {\r\n  background-color: #ececec;\r\n}\r\n\r\n.legendCalendar .legendRow div {\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n.total-availability {\r\n  font-size: 1em !important;\r\n}\r\n.legendCalendar .legendCal {\r\n  width: 80px;\r\n  height: 25px;\r\n  text-align: center;\r\n  display: inline-grid !important;\r\n  align-content: center;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.legendCalendar .legendCal .badge {\r\n  margin-top: 0.2rem;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.legendCalendar .legendCal.legendCal-h2 {\r\n  height: 40px;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.br-t {\r\n  border-top: 1px solid #a0a0a0;\r\n}\r\n.br-s {\r\n  border-left: 1px solid #a0a0a0;\r\n  border-right: 1px solid #a0a0a0;\r\n}\r\n.br-bt {\r\n  border-bottom: 1px solid #a0a0a0;\r\n}\r\n\r\n.highphenLegend {\r\n  font-size: 0.9em;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.highphenLegend::before {\r\n  width: 12px;\r\n  height: 0.5px;\r\n  content: ' ';\r\n  background-color: #000000;\r\n  vertical-align: middle;\r\n  display: inline-block;\r\n  margin-left: 5px;\r\n  margin-right: 5px;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n/* .badge-pill {\r\n  padding: 4px 1.1em;\r\n  font-size: 0.9em;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n} */\r\n.badge-pill {\r\n  padding: 3px 1em;\r\n  font-size: 0.8em;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.headerCell {\r\n  width: 70px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.dayTitle {\r\n  font-size: 0.8em;\r\n  font-weight: 600;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n.dayCapacityPercent {\r\n  font-size: 0.75em;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n","import locales from '@/stores/locales.store';\r\nimport { Component, Event, EventEmitter, Host, Prop, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'igl-legends',\r\n  styleUrl: 'igl-legends.css',\r\n  scoped: true,\r\n})\r\nexport class IglLegends {\r\n  @Event() optionEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Prop() legendData: { [key: string]: any };\r\n  handleOptionEvent(key, data = '') {\r\n    this.optionEvent.emit({ key, data });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host class=\"legendContainer pr-1 text-left\">\r\n        <div class={'w-full'}>\r\n          <div class={'w-full'}>\r\n            <div class=\"stickyHeader pt-1 \">\r\n              <p class=\"legendHeader\">{locales.entries.Lcz_Legend}</p>\r\n              <div class=\"legendCloseBtn\" onClick={() => this.handleOptionEvent('closeSideMenu')}>\r\n                {/* <i class=\"ft-chevrons-left\"></i> */}\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" height={18} width={18}>\r\n                  <path\r\n                    fill=\"#6b6f82\"\r\n                    d=\"M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z\"\r\n                  />\r\n                </svg>\r\n              </div>\r\n              <hr />\r\n            </div>\r\n            <div class=\"mt-2 pl-1\">\r\n              {this.legendData.map(legendInfo => (\r\n                <div class=\"legendRow \">\r\n                  <div class={`legend_${legendInfo.design} mr-1`} style={{ backgroundColor: legendInfo.color }}></div>\r\n                  <span class=\"font-small-3\">{legendInfo.name}</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n            <hr />\r\n            <div class=\"mt-2\">\r\n              <div class=\"legendCalendar\">\r\n                <div class=\"legendRow align-items-center\">\r\n                  <div class=\"legendCal br-t br-s br-bt\">\r\n                    <strong>MAR 2022</strong>\r\n                  </div>\r\n                  <div class=\"highphenLegend\">{locales.entries.Lcz_MonthAndYear}</div>\r\n                </div>\r\n                <div class=\"legendRow\">\r\n                  <div class=\"legendCal headerCell align-items-center br-s\">\r\n                    <span class=\"badge badge-info  badge-pill\">3</span>\r\n                  </div>\r\n                  <div class=\"highphenLegend\">\r\n                    <div>{locales.entries.Lcz_UnassignedUnits}</div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"legendRow\">\r\n                  <div class=\"legendCal dayTitle br-s\">Fri 18</div>\r\n                  <div class=\"highphenLegend\">{locales.entries.Lcz_Date}</div>\r\n                </div>\r\n                <div class=\"legendRow\">\r\n                  <div class=\"legendCal br-s br-bt dayCapacityPercent\">15%</div>\r\n                  <div class=\"highphenLegend\">{locales.entries.Lcz_Occupancy}</div>\r\n                </div>\r\n                <div class=\"legendRow\">\r\n                  <div class=\"legendCal br-s br-bt  font-weight-bold total-availability\">20</div>\r\n                  <div class=\"highphenLegend\">{locales.entries.Lcz_TotalAvailability}</div>\r\n                </div>\r\n                {/* <div class=\"legendRow align-items-center\">\r\n                  <div class=\"legendCal br-s br-bt font-small-2\">15</div>\r\n                  <div class=\"highphenLegend\">\r\n                    <div>{locales.entries.Lcz_OfflineAvailability}</div>\r\n                  </div>\r\n                </div> */}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n","import { Component, Host, Prop, State, h, Event, EventEmitter } from '@stencil/core';\n\n@Component({\n  tag: 'igl-tba-category-view',\n  styleUrl: 'igl-tba-category-view.css',\n  scoped: true,\n})\nexport class IglTbaCategoryView {\n  @Prop() calendarData: { [key: string]: any };\n  @Prop() selectedDate;\n  @Prop() categoriesData: { [key: string]: any } = {};\n  @Prop() categoryId;\n  @Prop({ mutable: true }) eventDatas;\n  @Prop() categoryIndex;\n\n  @State() renderAgain: boolean = false;\n\n  @Event() assignUnitEvent: EventEmitter<{ [key: string]: any }>;\n\n  handleAssignRoomEvent(event: CustomEvent<{ [key: string]: any }>) {\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n\n    const opt: { [key: string]: any } = event.detail;\n    this.eventDatas = this.eventDatas.filter(eventData => eventData.ID != opt.data.ID);\n    this.calendarData.bookingEvents.push(opt.data);\n    this.assignUnitEvent.emit({\n      key: 'assignUnit',\n      data: {\n        RT_ID: this.categoryId,\n        selectedDate: this.selectedDate,\n        assignEvent: opt.data,\n        calendarData: this.calendarData,\n      },\n    });\n    // if(this.localEventDatas.length){\n    this.renderView();\n    // }\n  }\n\n  getEventView(categoryId, eventDatas) {\n    return eventDatas.map((eventData, ind) => (\n      <igl-tba-booking-view\n        calendarData={this.calendarData}\n        selectedDate={this.selectedDate}\n        eventData={eventData}\n        categoriesData={this.categoriesData}\n        categoryId={categoryId}\n        categoryIndex={this.categoryIndex}\n        eventIndex={ind}\n        onAssignRoomEvent={evt => this.handleAssignRoomEvent(evt)}\n      ></igl-tba-booking-view>\n    ));\n  }\n\n  renderView() {\n    this.renderAgain = !this.renderAgain;\n  }\n\n  render() {\n    return (\n      <Host>\n        <div class=\"sectionContainer\">\n          <div class=\"font-weight-bold mt-1 font-small-3\">{this.categoriesData[this.categoryId]?.name}</div>\n          {this.getEventView(this.categoryId, this.eventDatas)}\n        </div>\n      </Host>\n    );\n  }\n}\n",":host {\r\n  display: block;\r\n}\r\n.custom-dropdown {\r\n  cursor: pointer;\r\n  padding: 5px 10px;\r\n  width: min-content;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n}\r\n.dropdown-toggle {\r\n  all: unset;\r\n  display: flex;\r\n  width: max-content;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n.close_btn_style {\r\n  padding: 0.4rem;\r\n}\r\n.close_btn_style:hover {\r\n  background-color: #f6f6f6;\r\n}\r\n.dropdown-menu {\r\n  max-height: 250px;\r\n  overflow-y: auto;\r\n}\r\n.tobeAssignedHeader {\r\n  font-weight: 500;\r\n  letter-spacing: 0.05rem;\r\n  font-size: 1.12rem;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n.assignment_header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding-top: 5px;\r\n  margin-bottom: 1rem;\r\n}\r\n.dropdown-toggle::after {\r\n  content: none;\r\n  display: none;\r\n}\r\n.dropdown-toggle .caret-icon {\r\n  transition: transform 0.2s ease;\r\n}\r\n.show .caret-icon {\r\n  transform: rotate(-180deg);\r\n}\r\n.stickyHeader {\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  top: 0;\r\n  background-color: #ffffff;\r\n  z-index: 1;\r\n}\r\n.pointer {\r\n  cursor: pointer;\r\n}\r\n\r\n.dots {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin: 0 3px;\r\n  padding: 0;\r\n}\r\n.dot {\r\n  width: 5px;\r\n  height: 5px;\r\n  margin: 5px 4px 0;\r\n  background-color: #6b6f82;\r\n  border-radius: 50%;\r\n  animation: dotFlashing 1s infinite linear alternate;\r\n}\r\n.dot:nth-child(2) {\r\n  animation-delay: 0.2s;\r\n}\r\n.dot:nth-child(3) {\r\n  animation-delay: 0.4s;\r\n}\r\n\r\n@keyframes dotFlashing {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  50%,\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n","import { Component, Host, h, Prop, Event, EventEmitter, State, Listen, Fragment, Watch } from '@stencil/core';\nimport { ToBeAssignedService } from '@/services/toBeAssigned.service';\nimport { dateToFormattedString } from '@/utils/utils';\nimport moment from 'moment';\nimport locales from '@/stores/locales.store';\nimport { getUnassignedDates } from '@/stores/unassigned_dates.store';\nimport { colorVariants } from '@/components/ui/ir-icons/icons';\n//import { updateCategories } from '@/utils/events.utils';\n\n@Component({\n  tag: 'igl-to-be-assigned',\n  styleUrl: 'igl-to-be-assigned.css',\n  scoped: true,\n})\nexport class IglToBeAssigned {\n  @Prop() unassignedDatesProp: any;\n  @Prop() propertyid: number;\n  @Prop() from_date: string;\n  @Prop() to_date: string;\n  @Prop({ mutable: true }) calendarData: { [key: string]: any };\n\n  @State() loadingMessage: string;\n  @State() showDatesList: boolean = false;\n  @State() renderAgain: boolean = false;\n  @State() orderedDatesList: any[] = [];\n  @State() noScroll = false;\n\n  @Event() optionEvent: EventEmitter<{ [key: string]: any }>;\n  @Event({ bubbles: true, composed: true })\n  reduceAvailableUnitEvent: EventEmitter<{ [key: string]: any }>;\n  @Event() showBookingPopup: EventEmitter;\n  @Event({ bubbles: true, composed: true }) addToBeAssignedEvent: EventEmitter;\n  @Event({ bubbles: true, composed: true })\n  highlightToBeAssignedBookingEvent: EventEmitter;\n\n  private isGotoToBeAssignedDate: boolean = false;\n  private isLoading: boolean = true;\n  private selectedDate = null;\n  private data: { [key: string]: any } = {};\n  private today = new Date();\n  private categoriesData: { [key: string]: any } = {};\n  private toBeAssignedService: ToBeAssignedService = new ToBeAssignedService();\n  private unassignedDates: any;\n\n  componentWillLoad() {\n    this.reArrangeData();\n    this.loadingMessage = locales.entries.Lcz_FetchingUnAssignedUnits;\n  }\n\n  @Watch('unassignedDatesProp')\n  handleUnassignedDatesToBeAssignedChange(newValue: any) {\n    const { fromDate, toDate, data } = newValue;\n    let dt = new Date(fromDate);\n    dt.setHours(0);\n    dt.setMinutes(0);\n    dt.setSeconds(0);\n    let endDate = dt.getTime();\n    while (endDate <= new Date(toDate).getTime()) {\n      if (data && !data[endDate] && this.unassignedDates.hasOwnProperty(endDate)) {\n        delete this.unassignedDates[endDate];\n      } else if (data && data[endDate]) {\n        this.unassignedDates[endDate] = data[endDate];\n      }\n      endDate = moment(endDate).add(1, 'days').toDate().getTime();\n    }\n    this.data = { ...this.unassignedDates };\n    this.orderedDatesList = Object.keys(this.data).sort((a, b) => parseInt(a) - parseInt(b));\n\n    if (this.orderedDatesList.length) {\n      if (!this.data.hasOwnProperty(this.selectedDate)) {\n        this.selectedDate = this.orderedDatesList.length ? this.orderedDatesList[0] : null;\n      }\n      this.showForDate(this.selectedDate, false);\n      this.renderView();\n    } else {\n      this.selectedDate = null;\n    }\n  }\n  handleAssignUnit(event: CustomEvent<{ [key: string]: any }>) {\n    const opt: { [key: string]: any } = event.detail;\n    const data = opt.data;\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n\n    if (opt?.key === 'assignUnit' && this.data) {\n      // Verify data.selectedDate exists in this.data\n      if (data?.selectedDate && this.data[data.selectedDate]) {\n        // Check if categories exist and there's only one category\n        if (this.data[data.selectedDate]?.categories && Object.keys(this.data[data.selectedDate]?.categories || {})?.length === 1) {\n          this.isLoading = true;\n          this.noScroll = true;\n        }\n\n        // Make sure all required properties exist before filtering\n        if (\n          data?.RT_ID &&\n          this.data[data.selectedDate]?.categories &&\n          this.data[data.selectedDate].categories[data.RT_ID] &&\n          Array.isArray(this.data[data.selectedDate].categories[data.RT_ID]) &&\n          data?.assignEvent?.ID\n        ) {\n          this.data[data.selectedDate].categories[data.RT_ID] = this.data[data.selectedDate].categories[data.RT_ID].filter(\n            eventData => eventData && eventData.ID !== data.assignEvent.ID,\n          );\n        }\n\n        // Only update calendarData if it exists in the data\n        if (data?.calendarData) {\n          this.calendarData = data.calendarData;\n        }\n\n        this.renderView();\n      }\n    }\n  }\n\n  async updateCategories(key, calendarData) {\n    try {\n      //console.log(\"called\")\n      let categorisedRooms = {};\n      const result = await this.toBeAssignedService.getUnassignedRooms(\n        { from_date: calendarData.from_date, to_date: calendarData.to_date },\n        this.propertyid,\n        dateToFormattedString(new Date(+key)),\n        calendarData.roomsInfo,\n        calendarData.formattedLegendData,\n      );\n      result.forEach(room => {\n        if (!categorisedRooms.hasOwnProperty(room.RT_ID)) {\n          categorisedRooms[room.RT_ID] = [room];\n        } else {\n          categorisedRooms[room.RT_ID].push(room);\n        }\n      });\n      this.unassignedDates[key].categories = categorisedRooms;\n    } catch (error) {\n      //  toastr.error(error);\n    }\n  }\n\n  async reArrangeData() {\n    try {\n      this.today.setHours(0, 0, 0, 0);\n      this.calendarData.roomsInfo.forEach(category => {\n        this.categoriesData[category.id] = {\n          name: category.name,\n          roomsList: category.physicalrooms,\n          roomIds: category.physicalrooms.map(room => {\n            return room.id;\n          }),\n        };\n      });\n\n      this.selectedDate = null;\n      //this.unassignedDates = await this.toBeAssignedService.getUnassignedDates(this.propertyid, dateToFormattedString(new Date()), this.to_date);\n      this.unassignedDates = getUnassignedDates();\n      console.log(this.unassignedDates);\n\n      this.data = this.unassignedDates;\n      this.orderedDatesList = Object.keys(this.data).sort((a, b) => parseInt(a) - parseInt(b));\n\n      if (!this.selectedDate && this.orderedDatesList.length) {\n        this.selectedDate = this.orderedDatesList[0];\n      }\n    } catch (error) {\n      console.error('Error fetching unassigned dates:', error);\n      //  toastr.error(error);\n    }\n  }\n  async componentDidLoad() {\n    setTimeout(() => {\n      if (!this.isGotoToBeAssignedDate && Object.keys(this.unassignedDates).length > 0) {\n        //console.log(this.isGotoToBeAssignedDate);\n        const firstKey = Object.keys(this.unassignedDates)[0];\n\n        this.showForDate(firstKey);\n      }\n    }, 100);\n  }\n  @Listen('gotoToBeAssignedDate', { target: 'window' })\n  async gotoDate(event: CustomEvent) {\n    this.isGotoToBeAssignedDate = true;\n    this.showForDate(event.detail.data);\n    this.showDatesList = false;\n    this.renderView();\n  }\n  @Listen('highlightToBeAssignedBookingEvent')\n  handleToBeAssignedDate(e: CustomEvent) {\n    this.showBookingPopup.emit({\n      key: 'calendar',\n      data: new Date(e.detail.data.fromDate).getTime() - 86400000,\n      noScroll: false,\n    });\n  }\n  async showForDate(dateStamp, withLoading = true) {\n    try {\n      if (withLoading) {\n        this.isLoading = true;\n      }\n      if (this.showDatesList) {\n        this.showUnassignedDate();\n      }\n      await this.updateCategories(dateStamp, this.calendarData);\n      this.addToBeAssignedEvent.emit({ key: 'tobeAssignedEvents', data: [] });\n      this.showBookingPopup.emit({\n        key: 'calendar',\n        data: parseInt(dateStamp) - 86400000,\n        noScroll: this.noScroll,\n      });\n      if (this.isGotoToBeAssignedDate) {\n        this.isGotoToBeAssignedDate = false;\n      }\n      this.isLoading = false;\n      this.selectedDate = dateStamp;\n      this.renderView();\n    } catch (error) {\n      // toastr.error(error);\n    }\n  }\n\n  getDay(dt) {\n    const currentDate = new Date(dt);\n    const locale = 'default'; //'en-US';\n    const dayOfWeek = this.getLocalizedDayOfWeek(currentDate, locale);\n    // const monthName = currentDate.toLocaleString(\"default\", { month: 'short' })\n    return dayOfWeek + ' ' + currentDate.getDate() + ', ' + currentDate.getFullYear();\n  }\n\n  getLocalizedDayOfWeek(date, locale) {\n    const options = { weekday: 'short' };\n    return date.toLocaleDateString(locale, options);\n  }\n\n  handleOptionEvent(key, data = '') {\n    this.highlightToBeAssignedBookingEvent.emit({\n      key: 'highlightBookingId',\n      data: { bookingId: '----' },\n    });\n    this.addToBeAssignedEvent.emit({ key: 'tobeAssignedEvents', data: [] });\n    this.optionEvent.emit({ key, data });\n  }\n\n  showUnassignedDate() {\n    this.showDatesList = !this.showDatesList;\n  }\n\n  getToBeAssignedEntities() {\n    // toBeAssignedEvents\n  }\n\n  getCategoryView() {\n    if (this.orderedDatesList.length && this.selectedDate && this.data[this.selectedDate]) {\n      return Object.entries(this.data[this.selectedDate].categories).map(([id, eventDatas], ind) => (\n        <igl-tba-category-view\n          calendarData={this.calendarData}\n          selectedDate={this.selectedDate}\n          categoryId={id}\n          categoryIndex={ind}\n          categoriesData={this.categoriesData}\n          eventDatas={eventDatas}\n          onAssignUnitEvent={evt => this.handleAssignUnit(evt)}\n        ></igl-tba-category-view>\n      ));\n    } else {\n      return null;\n    }\n  }\n\n  renderView() {\n    this.renderAgain = !this.renderAgain;\n  }\n\n  render() {\n    return (\n      <Host class=\"tobeAssignedContainer pr-1 text-left\">\n        <div>\n          <div>\n            <div class=\"stickyHeader pt-1\">\n              <div class={'assignment_header'}>\n                <p class=\"tobeAssignedHeader \">{locales.entries.Lcz_Assignments}</p>\n                <ir-button\n                  class=\"close_btn\"\n                  variant=\"icon\"\n                  btn_styles=\"close_btn_style\"\n                  icon_name=\"double_caret_left\"\n                  style={colorVariants.secondary}\n                  onClickHandler={() => this.handleOptionEvent('closeSideMenu')}\n                  visibleBackgroundOnHover\n                ></ir-button>\n              </div>\n              <hr />\n              {Object.keys(this.data).length === 0 ? (\n                <p>{locales.entries.Lcz_AllBookingsAreAssigned}</p>\n              ) : this.isLoading ? (\n                <p class=\"d-flex align-items-center\">\n                  <span class=\"p-0\">{this.loadingMessage}</span>\n                  <div class=\"dots\">\n                    <div class=\"dot\"></div>\n                    <div class=\"dot\"></div>\n                    <div class=\"dot\"></div>\n                  </div>\n                </p>\n              ) : (\n                <Fragment>\n                  {this.orderedDatesList.length ? (\n                    <div\n                      class={`custom-dropdown border border-light rounded text-center ` + (this.showDatesList ? 'show' : '')}\n                      id=\"dropdownMenuButton\"\n                      data-toggle=\"dropdown\"\n                      aria-haspopup=\"true\"\n                      aria-expanded=\"false\"\n                    >\n                      <div\n                        class={'dropdown-toggle'}\n                        //onClick={() => this.showUnassignedDate()}\n                      >\n                        <span class=\"font-weight-bold\">{this.data[this.selectedDate].dateStr}</span>\n                        <svg class={'caret-icon'} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\" height={14} width={14}>\n                          <path\n                            fill=\"#6b6f82\"\n                            d=\"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z\"\n                          />\n                        </svg>\n                      </div>\n                      <div class=\"dropdown-menu dropdown-menu-right full-width\" aria-labelledby=\"dropdownMenuButton\">\n                        {this.orderedDatesList?.map(ordDate => (\n                          <div class=\"dropdown-item pointer\" onClick={() => this.showForDate(ordDate)}>\n                            {this.data[ordDate].dateStr}\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  ) : (\n                    locales.entries.Lcz_AllBookingsAreAssigned\n                  )}\n                </Fragment>\n              )}\n            </div>\n            {!this.isLoading && (\n              <div class=\"scrollabledArea\">\n                {this.orderedDatesList.length ? (\n                  Object.keys(this.data[this.selectedDate].categories).length ? (\n                    this.getCategoryView()\n                  ) : (\n                    <div class=\"mt-1\">{locales.entries.Lcz_AllAssignForThisDay}</div>\n                  )\n                ) : null}\n              </div>\n            )}\n          </div>\n        </div>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n  width: 100%;\n  --hk-green: green;\n}\n* {\n  box-sizing: border-box;\n}\n.popover-title {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  z-index: 10;\n  left: 0;\n  display: flex;\n  align-items: center;\n}\n.popover-container {\n  position: absolute;\n  bottom: 0px;\n  left: var(--ir-popover-left, 10px);\n  background: rgb(0, 0, 0);\n  color: white;\n  min-width: 100%;\n  box-shadow: rgba(0, 0, 0, 0.2) 0px 2px 10px;\n  z-index: 9999;\n  padding: 3.5px 7px;\n  border-radius: 5px;\n  pointer-events: none;\n  opacity: 0;\n  transition: all 100ms ease;\n  font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 1.45;\n  text-decoration: none;\n  text-shadow: none;\n  font-size: 0.875rem;\n}\n.popover-container[data-state='show'] {\n  opacity: 1;\n}\n.hk-dot {\n  inset: 0;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: fit-content;\n  padding: 4px;\n  left: auto;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n  padding-inline: var(--ir-popover-left);\n  background: var(--ir-interactive-hk-bg, white);\n  color: var(--dot-color, black);\n}\n/* .hk-dot::after {\n  content: '';\n  height: 8px;\n  aspect-ratio: 1;\n  border-radius: 9999999px;\n  background: var(--dot-color, #ffffff);\n} */\n","import { Component, Host, Prop, h, Element } from '@stencil/core';\n\n@Component({\n  tag: 'ir-interactive-title',\n  styleUrl: 'ir-interactive-title.css',\n  scoped: true,\n})\nexport class IrInteractiveTitle {\n  @Element() el: HTMLElement;\n\n  @Prop() popoverTitle: string;\n  @Prop() irPopoverLeft: string = '10px';\n  @Prop() hkStatus: boolean;\n  @Prop() cropSize: number = 15;\n\n  private croppedTitle: string;\n  private croppedTitleEl: HTMLSpanElement;\n\n  // private hkStatusColors = {\n  //   green: '#57f707',\n  //   red: 'rgb(199, 139, 36)',\n  //   orange: '#ff9149',\n  //   black: '#ff4961',\n  // };\n  componentWillLoad() {\n    this.croppedTitle = this.popoverTitle;\n  }\n  componentDidLoad() {\n    this.initializePopover();\n  }\n\n  // initializePopover() {\n  //   const titleElement = this.el.querySelector('.popover-title') as HTMLElement;\n\n  //   if (titleElement) {\n  //     const isOverflowing = titleElement.scrollWidth > titleElement.offsetWidth;\n\n  //     if (isOverflowing) {\n  //       this.croppedTitle = this.popoverTitle.slice(0, this.cropSize) + '...';\n  //       this.croppedTitleEl.innerHTML = this.croppedTitle;\n\n  //       $(titleElement).popover({\n  //         trigger: 'hover',\n  //         content: this.popoverTitle,\n  //         placement: 'top',\n  //       });\n  //     } else {\n  //       $(titleElement).popover('dispose');\n  //     }\n  //   }\n  // }\n  private initializePopover() {\n    const titleElement = this.el.querySelector('.popover-title') as HTMLElement;\n    const iconElement = this.el.querySelector('.hk-dot') as HTMLElement;\n\n    if (!titleElement || !this.croppedTitleEl) {\n      return;\n    }\n    const containerWidth = titleElement.offsetWidth;\n    const textWidth = this.croppedTitleEl.scrollWidth;\n    const iconWidth = iconElement ? iconElement.offsetWidth : 0;\n    const isOverflowing = textWidth + iconWidth > containerWidth;\n\n    if (isOverflowing) {\n      this.croppedTitle = this.popoverTitle.slice(0, this.cropSize) + '...';\n      this.croppedTitleEl.innerHTML = this.croppedTitle;\n\n      $(titleElement).popover({\n        trigger: 'hover',\n        content: this.popoverTitle,\n        placement: 'top',\n      });\n    } else {\n      $(titleElement).popover('dispose');\n    }\n  }\n  render() {\n    return (\n      <Host style={{ '--ir-popover-left': this.irPopoverLeft }}>\n        <p\n          class=\"popover-title\"\n          style={{\n            whiteSpace: 'nowrap',\n            overflow: 'hidden',\n            textOverflow: 'ellipsis',\n          }}\n        >\n          <span ref={el => (this.croppedTitleEl = el)} class=\"croppedTitle\">\n            {this.croppedTitle}\n          </span>\n          {/* {this.hkStatus && this.hkStatusColors[this.hkStatus] && <div title=\"occupied\" style={{ '--dot-color': this.hkStatusColors[this.hkStatus] }} class={`hk-dot`}></div>} */}\n          {this.hkStatus && (\n            <div title=\"This unit is dirty\" class={`hk-dot`}>\n              <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"12\" width=\"13.5\" viewBox=\"0 0 576 512\">\n                <path\n                  fill=\"currentColor\"\n                  d=\"M566.6 54.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192-34.7-34.7c-4.2-4.2-10-6.6-16-6.6c-12.5 0-22.6 10.1-22.6 22.6l0 29.1L364.3 320l29.1 0c12.5 0 22.6-10.1 22.6-22.6c0-6-2.4-11.8-6.6-16l-34.7-34.7 192-192zM341.1 353.4L222.6 234.9c-42.7-3.7-85.2 11.7-115.8 42.3l-8 8C76.5 307.5 64 337.7 64 369.2c0 6.8 7.1 11.2 13.2 8.2l51.1-25.5c5-2.5 9.5 4.1 5.4 7.9L7.3 473.4C2.7 477.6 0 483.6 0 489.9C0 502.1 9.9 512 22.1 512l173.3 0c38.8 0 75.9-15.4 103.4-42.8c30.6-30.6 45.9-73.1 42.3-115.8z\"\n                />\n              </svg>\n            </div>\n          )}\n        </p>\n      </Host>\n    );\n  }\n}\n",":host {\r\n  display: block;\r\n  box-sizing: border-box;\r\n  margin: 0;\r\n  position: relative;\r\n}\r\n.loading-container {\r\n  position: relative;\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.close-icon {\r\n  position: absolute;\r\n  top: 18px;\r\n  right: 33px;\r\n  outline: none;\r\n}\r\n.close {\r\n  float: right;\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n  line-height: 1;\r\n  color: #000;\r\n  text-shadow: 0 1px 0 #fff;\r\n  opacity: 0.5;\r\n\r\n  padding: 0;\r\n  background-color: transparent;\r\n  border: 0;\r\n  appearance: none;\r\n}\r\n.card {\r\n  top: 0;\r\n  z-index: 1000;\r\n}\r\n.card-title {\r\n  border-bottom: 1px solid #e4e5ec;\r\n  width: 100%;\r\n}\r\n.irfontgreen {\r\n  color: #0e930e;\r\n}\r\n.currency {\r\n  display: block;\r\n  position: absolute;\r\n  margin: 0;\r\n  padding: 0;\r\n  height: auto;\r\n  left: 10px;\r\n}\r\n.rate-input {\r\n  font-size: 14px;\r\n  line-height: 0;\r\n  padding: 0;\r\n  height: 0;\r\n  border-left: 0;\r\n  border-radius: 0.25rem !important;\r\n}\r\n.rate-input-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  box-sizing: border-box;\r\n  flex: 1;\r\n}\r\n.new-currency {\r\n  color: #3b4781;\r\n  border: 1px solid #cacfe7;\r\n  font-size: 0.975rem;\r\n  height: 2rem;\r\n  background: rgb(255, 255, 255);\r\n  padding-right: 0 !important;\r\n  border-right: 0;\r\n  border-top-right-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n  transition: border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n}\r\n.input-group-prepend span[data-state='focus'] {\r\n  border-color: var(--blue);\r\n}\r\n.input-group-prepend span[data-disabled] {\r\n  background-color: #eceff1;\r\n  border-color: rgba(118, 118, 118, 0.3);\r\n}\r\n.rateInputBorder {\r\n  padding-left: 5px !important;\r\n  padding-right: 5px !important;\r\n  border-top-left-radius: 0 !important;\r\n  border-bottom-left-radius: 0 !important;\r\n}\r\n","import { Component, Host, Prop, State, h, Event, EventEmitter, Fragment } from '@stencil/core';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport { convertDatePrice, formatDate, getDaysArray } from '@/utils/utils';\r\nimport { Booking, Day, IUnit, Room } from '@/models/booking.dto';\r\nimport { IRoomNightsDataEventPayload } from '@/models/property-types';\r\nimport moment from 'moment';\r\nimport locales from '@/stores/locales.store';\r\nimport { Variation } from '@/models/property';\r\n\r\n@Component({\r\n  tag: 'ir-room-nights',\r\n  styleUrl: 'ir-room-nights.css',\r\n  scoped: true,\r\n})\r\nexport class IrRoomNights {\r\n  @Prop() bookingNumber: string;\r\n  @Prop() propertyId: number;\r\n  @Prop() language: string;\r\n  @Prop() identifier: string;\r\n  @Prop() toDate: string;\r\n  @Prop() fromDate: string;\r\n  @Prop() pool: string;\r\n  @Prop() ticket: string;\r\n  @Prop() defaultDates: { from_date: string; to_date: string };\r\n\r\n  @State() bookingEvent: Booking;\r\n  @State() selectedRoom: Room;\r\n  @State() rates: Day[] = [];\r\n  @State() isLoading = false;\r\n  @State() initialLoading = false;\r\n  @State() inventory: number | null = null;\r\n  @State() isEndDateBeforeFromDate: boolean = false;\r\n  @State() defaultTotalNights = 0;\r\n  @State() isInputFocused = -1;\r\n  @State() dates: { from_date: Date; to_date: Date } = { from_date: new Date(), to_date: new Date() };\r\n\r\n  @Event() closeRoomNightsDialog: EventEmitter<IRoomNightsDataEventPayload>;\r\n\r\n  private bookingService = new BookingService();\r\n\r\n  componentWillLoad() {\r\n    this.dates = { from_date: new Date(this.fromDate), to_date: new Date(this.toDate) };\r\n    this.init();\r\n  }\r\n\r\n  isButtonDisabled() {\r\n    return this.isLoading || this.rates.some(rate => rate.amount === -1) || this.inventory === 0 || this.inventory === null;\r\n  }\r\n  async init() {\r\n    try {\r\n      const { from_date } = this.defaultDates;\r\n      if (moment(from_date, 'YYYY-MM-DD').isBefore(moment(this.fromDate, 'YYYY-MM-DD'))) {\r\n        this.dates.from_date = new Date(from_date);\r\n      } else {\r\n        this.dates.from_date = new Date(this.fromDate);\r\n      }\r\n      this.dates.to_date = new Date(this.toDate);\r\n      this.bookingEvent = await this.bookingService.getExposedBooking(this.bookingNumber, this.language);\r\n      if (this.bookingEvent) {\r\n        const filteredRooms = this.bookingEvent.rooms.filter(room => room.identifier === this.identifier);\r\n        this.selectedRoom = filteredRooms[0];\r\n        const lastDay = this.selectedRoom?.days[this.selectedRoom.days.length - 1];\r\n        //let first_rate = this.selectedRoom.days[0].amount;\r\n        if (moment(this.toDate).add(-1, 'days').isSame(moment(lastDay.date))) {\r\n          console.log('here1');\r\n          const amount = await this.fetchBookingAvailability(this.fromDate, this.selectedRoom.days[0].date, this.selectedRoom.rateplan.id);\r\n          const newDatesArr = getDaysArray(this.selectedRoom.days[0].date, this.fromDate);\r\n          this.isEndDateBeforeFromDate = true;\r\n          this.rates;\r\n          this.rates = [\r\n            ...newDatesArr.map(day => ({\r\n              amount: amount / newDatesArr.length,\r\n              date: day,\r\n              cost: null,\r\n            })),\r\n            ...this.selectedRoom.days,\r\n          ];\r\n          this.defaultTotalNights = this.rates.length - this.selectedRoom.days.length;\r\n        } else {\r\n          console.log('here2');\r\n          console.log(lastDay);\r\n          const amount = await this.fetchBookingAvailability(this.bookingEvent.to_date, moment(this.toDate, 'YYYY-MM-DD').format('YYYY-MM-DD'), this.selectedRoom.rateplan.id);\r\n          const newDatesArr = getDaysArray(lastDay.date, this.toDate);\r\n          this.rates = [\r\n            ...this.selectedRoom.days,\r\n            ...newDatesArr.map(day => ({\r\n              amount: amount / newDatesArr.length,\r\n              date: day,\r\n              cost: null,\r\n            })),\r\n          ];\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  private handleInput(event: string, index: number) {\r\n    let inputValue = event;\r\n    let days = [...this.rates];\r\n    inputValue = inputValue.replace(/[^0-9.]/g, '');\r\n    if (inputValue === '') {\r\n      days[index].amount = -1;\r\n    } else {\r\n      if (!isNaN(Number(inputValue))) {\r\n        days[index].amount = Number(inputValue);\r\n      }\r\n    }\r\n    this.rates = days;\r\n  }\r\n  async fetchBookingAvailability(from_date: string, to_date: string, rate_plan_id: number) {\r\n    try {\r\n      this.initialLoading = true;\r\n      const bookingAvailability = await this.bookingService.getBookingAvailability({\r\n        from_date,\r\n        to_date,\r\n        propertyid: this.propertyId,\r\n        adultChildCount: {\r\n          adult: this.selectedRoom.rateplan.selected_variation.adult_nbr,\r\n          child: this.selectedRoom.rateplan.selected_variation.child_nbr,\r\n        },\r\n        language: this.language,\r\n        currency: this.bookingEvent.currency,\r\n        room_type_ids: [this.selectedRoom.roomtype.id],\r\n        rate_plan_ids: [rate_plan_id],\r\n      });\r\n      console.log(bookingAvailability[0], rate_plan_id);\r\n      this.inventory = bookingAvailability[0].inventory;\r\n      const rate_plan = bookingAvailability[0].rateplans.find(rate => rate.id === rate_plan_id);\r\n      if (!rate_plan || !rate_plan.variations) {\r\n        this.inventory = null;\r\n        return null;\r\n      }\r\n      const selected_variation: Variation = rate_plan.variations?.find(\r\n        variation =>\r\n          variation.adult_nbr === this.selectedRoom.rateplan.selected_variation.adult_nbr && variation.child_nbr === this.selectedRoom.rateplan.selected_variation.child_nbr,\r\n      );\r\n      if (!selected_variation) {\r\n        return null;\r\n      }\r\n      return selected_variation.discounted_gross_amount;\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      this.initialLoading = false;\r\n    }\r\n  }\r\n\r\n  private renderInputField(index: number, currency_symbol: string, day: Day) {\r\n    return (\r\n      <div class=\"col-3 ml-1 position-relative  m-0 p-0 rate-input-container\">\r\n        <ir-price-input\r\n          value={day.amount > 0 ? day.amount.toString() : ''}\r\n          disabled={this.inventory === 0 || this.inventory === null}\r\n          currency={currency_symbol}\r\n          aria-label=\"rate\"\r\n          aria-describedby=\"rate cost\"\r\n          onTextChange={e => this.handleInput(e.detail, index)}\r\n        ></ir-price-input>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private renderReadOnlyField(currency_symbol: string, day: Day) {\r\n    return <p class=\"col-9 ml-1 m-0 p-0\">{`${currency_symbol}${Number(day.amount).toFixed(2)}`}</p>;\r\n  }\r\n  private renderRateFields(index: number, currency_symbol: string, day: Day) {\r\n    if (this.isEndDateBeforeFromDate) {\r\n      if (index < this.defaultTotalNights) {\r\n        return this.renderInputField(index, currency_symbol, day);\r\n      } else {\r\n        return this.renderReadOnlyField(currency_symbol, day);\r\n      }\r\n    } else {\r\n      return index < this.selectedRoom.days.length ? this.renderReadOnlyField(currency_symbol, day) : this.renderInputField(index, currency_symbol, day);\r\n    }\r\n  }\r\n  renderDates() {\r\n    const currency_symbol = this.bookingEvent.currency.symbol;\r\n    // const currency_symbol = getCurrencySymbol(this.bookingEvent.currency.code);\r\n    return (\r\n      <div class={'mt-2 m-0'}>\r\n        {this.rates?.map((day, index) => (\r\n          <div class={'row m-0 mt-1 align-items-center'}>\r\n            <p class={'col-2 m-0 p-0'}>{convertDatePrice(day.date)}</p>\r\n            {this.renderRateFields(index, currency_symbol, day)}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n  async handleRoomConfirmation() {\r\n    try {\r\n      this.isLoading = true;\r\n      let oldRooms = [...this.bookingEvent.rooms];\r\n      let selectedRoomIndex = oldRooms.findIndex(room => room.identifier === this.identifier);\r\n      if (selectedRoomIndex === -1) {\r\n        throw new Error('Invalid Pool');\r\n      }\r\n      oldRooms[selectedRoomIndex] = {\r\n        ...oldRooms[selectedRoomIndex],\r\n        days: this.rates,\r\n        to_date: moment(this.dates.to_date).format('YYYY-MM-DD'),\r\n        from_date: moment(this.dates.from_date).format('YYYY-MM-DD'),\r\n      };\r\n      const body = {\r\n        assign_units: true,\r\n        check_in: true,\r\n        is_pms: true,\r\n        is_direct: true,\r\n        pickup_info: this.bookingEvent.pickup_info,\r\n        extra_services: this.bookingEvent.extra_services,\r\n        booking: {\r\n          booking_nbr: this.bookingNumber,\r\n          from_date: moment(this.dates.from_date).format('YYYY-MM-DD'),\r\n          to_date: moment(this.dates.to_date).format('YYYY-MM-DD'),\r\n          remark: this.bookingEvent.remark,\r\n          property: this.bookingEvent.property,\r\n          source: this.bookingEvent.source,\r\n          currency: this.bookingEvent.currency,\r\n          arrival: this.bookingEvent.arrival,\r\n          guest: this.bookingEvent.guest,\r\n          rooms: oldRooms,\r\n        },\r\n      };\r\n      await this.bookingService.doReservation(body);\r\n      this.closeRoomNightsDialog.emit({ type: 'confirm', pool: this.pool });\r\n    } catch (error) {\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n  render() {\r\n    if (!this.bookingEvent) {\r\n      return (\r\n        <div class=\"loading-container\">\r\n          <ir-loading-screen></ir-loading-screen>\r\n        </div>\r\n      );\r\n    }\r\n    console.log(this.inventory);\r\n    return (\r\n      <Host>\r\n        <div class=\"card position-sticky mb-0 shadow-none p-0 \">\r\n          <div class=\"d-flex mt-2 align-items-center justify-content-between \">\r\n            <h3 class=\"card-title text-left pb-1 font-medium-2 px-2\">\r\n              {locales.entries.Lcz_AddingRoomNightsTo} {this.selectedRoom?.roomtype?.name} {(this.selectedRoom?.unit as IUnit).name}\r\n            </h3>\r\n            <button type=\"button\" class=\"close close-icon\" onClick={() => this.closeRoomNightsDialog.emit({ type: 'cancel', pool: this.pool })}>\r\n              <ir-icon icon=\"ft-x\" class={'m-0'}></ir-icon>\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <section class={'text-left px-2'}>\r\n          <p class={'font-medium-1'}>\r\n            {`${locales.entries.Lcz_Booking}#`} {this.bookingNumber}\r\n          </p>\r\n          {this.initialLoading ? (\r\n            <p class={'mt-2 text-secondary'}>{locales.entries['Lcz_CheckingRoomAvailability ']}</p>\r\n          ) : (\r\n            <Fragment>\r\n              <p class={'font-weight-bold font-medium-1'}>{`${formatDate(moment(this.dates.from_date).format('YYYY-MM-DD'), 'YYYY-MM-DD')} - ${formatDate(\r\n                moment(this.dates.to_date).format('YYYY-MM-DD'),\r\n                'YYYY-MM-DD',\r\n              )}`}</p>\r\n              <p class={'font-medium-1 mb-0'}>\r\n                {`${this.selectedRoom.rateplan.name}`} {this.selectedRoom.rateplan.is_non_refundable && <span class={'irfontgreen'}>{locales.entries.Lcz_NonRefundable}</span>}\r\n              </p>\r\n              {(this.inventory === 0 || this.inventory === null) && <p class=\"font-medium-1 text danger\">{locales.entries.Lcz_NoAvailabilityForAdditionalNights}</p>}\r\n\r\n              {this.selectedRoom.rateplan.custom_text && <p class={'text-secondary mt-0'}>{this.selectedRoom.rateplan.custom_text}</p>}\r\n              {this.renderDates()}\r\n            </Fragment>\r\n          )}\r\n        </section>\r\n        <section class={'d-flex align-items-center mt-2 px-2'}>\r\n          <ir-button\r\n            btn_color=\"secondary\"\r\n            btn_disabled={this.isLoading}\r\n            text={locales?.entries.Lcz_Cancel}\r\n            class=\"full-width\"\r\n            btn_styles=\"justify-content-center\"\r\n            onClickHandler={() => this.closeRoomNightsDialog.emit({ type: 'cancel', pool: this.pool })}\r\n          ></ir-button>\r\n\r\n          {this.inventory > 0 && this.inventory !== null && (\r\n            <ir-button\r\n              isLoading={this.isLoading}\r\n              text={locales?.entries.Lcz_Confirm}\r\n              btn_disabled={this.isButtonDisabled()}\r\n              class=\"ml-1 full-width\"\r\n              btn_styles=\"justify-content-center\"\r\n              onClickHandler={this.handleRoomConfirmation.bind(this)}\r\n            ></ir-button>\r\n          )}\r\n        </section>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}