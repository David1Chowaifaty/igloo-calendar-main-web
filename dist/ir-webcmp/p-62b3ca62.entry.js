import{r as i,c as t,h as e,H as r,g as n}from"./p-53d64953.js";const s=":host{--ir-acc-duration:220ms;--ir-acc-ease:cubic-bezier(0.2, 0.8, 0.2, 1);--ir-acc-border:#e5e7eb;--ir-acc-radius:6px;--ir-acc-bg:#fff;--ir-acc-focus:#3b82f6;--ir-acc-space-2:0.5rem;--ir-acc-space-3:0.75rem;--ir-acc-space-4:1rem;display:block}.ir-accordion{border:1px solid var(--ir-acc-border);border-radius:var(--ir-acc-radius);background:var(--ir-acc-bg);overflow:hidden}.ir-accordion__trigger{display:flex;align-items:center;justify-content:flex-start;gap:var(--ir-acc-space-2);width:100%;padding:var(--ir-acc-space-4);background:transparent;border:none;cursor:pointer;text-align:left;font:inherit;color:inherit;transition:background-color 0.15s ease}.ir-accordion__trigger:hover:not(:disabled){background:rgba(0, 0, 0, 0.02)}.ir-accordion__trigger:disabled{opacity:0.6;cursor:not-allowed}.ir-accordion__trigger:focus{outline:2px solid var(--ir-acc-focus);outline-offset:-2px}.ir-accordion__trigger:focus:not(:focus-visible){outline:none}.ir-accordion__caret{flex-shrink:0;transition:transform var(--ir-acc-duration) var(--ir-acc-ease);transform:rotate(-90deg)}.ir-accordion[data-open='true'] .ir-accordion__caret,.ir-accordion__caret.is-open{transform:rotate(0deg)}.ir-accordion__trigger-content{flex:1;min-width:0;}.ir-accordion__content{transition:height var(--ir-acc-duration) var(--ir-acc-ease);will-change:height}.ir-accordion__content:not([data-expanded='true']){height:0 !important;overflow:hidden !important;visibility:hidden}.ir-accordion__content[data-expanded='true']{visibility:visible}.ir-accordion__content-inner{padding:var(--ir-acc-space-3) var(--ir-acc-space-4)}@media (prefers-reduced-motion: reduce){.ir-accordion__caret{transition:none}.ir-accordion__content{transition:none}}@supports selector(:focus-visible){.ir-accordion__trigger:focus{outline:none}}";const a=s;let o=0;const c=class{constructor(e){i(this,e);this.irToggle=t(this,"irToggle",7);this.defaultExpanded=false;this.showCaret=true;this.caretIcon="angle-down";this._expanded=false;this.contentId=`ir-accordion-content-${++o}`;this.isAnimating=false;this.onTriggerClick=()=>{if(this.isAnimating){return}const i=!this._expanded;if(this.expanded!==undefined){this.irToggle.emit({expanded:i})}else{this.updateExpansion(i,true)}};this.onTriggerKeyDown=i=>{if((i.key==="Enter"||i.key===" ")&&!this.isAnimating){i.preventDefault();this.onTriggerClick()}}}componentWillLoad(){var i;this._expanded=(i=this.expanded)!==null&&i!==void 0?i:this.defaultExpanded}disconnectedCallback(){if(this.cleanupAnimation){this.cleanupAnimation()}}watchExpanded(i){if(i!==undefined&&i!==this._expanded){this.updateExpansion(i,false)}}updateExpansion(i,t=true){if(this.isAnimating){return}const e=this._expanded;this._expanded=i;if(e!==i){if(i){this.openWithAnimation()}else{this.closeWithAnimation()}if(t){this.irToggle.emit({expanded:i})}}}openWithAnimation(){console.log("openWithAnimation called",{detailsEl:!!this.detailsEl,contentEl:!!this.contentEl,isAnimating:this.isAnimating});if(!this.detailsEl||!this.contentEl||this.isAnimating){console.log("openWithAnimation aborted - missing elements or already animating");return}this.isAnimating=true;this.cleanupPreviousAnimation();const i=this.detailsEl.offsetHeight;console.log("Start height:",i);this.detailsEl.style.height=`${i}px`;this.detailsEl.style.overflow="hidden";this.detailsEl.setAttribute("data-expanded","true");const t=this.contentEl.scrollHeight;console.log("Target height:",t);requestAnimationFrame((()=>{if(!this.detailsEl||!this.isAnimating){console.log("requestAnimationFrame aborted");return}console.log("Setting height to:",t);this.detailsEl.style.height=`${t}px`;const i=i=>{console.log("Transition end event:",i.propertyName,i.target===this.detailsEl);if(i.target===this.detailsEl&&i.propertyName==="height"){this.finishOpenAnimation()}};this.cleanupAnimation=()=>{if(this.detailsEl){this.detailsEl.removeEventListener("transitionend",i)}};this.detailsEl.addEventListener("transitionend",i);setTimeout((()=>{if(this.isAnimating){console.log("Fallback timeout triggered for open animation");this.finishOpenAnimation()}}),250)}))}closeWithAnimation(){if(!this.detailsEl||!this.contentEl||this.isAnimating)return;this.isAnimating=true;this.cleanupPreviousAnimation();const i=this.detailsEl.scrollHeight;this.detailsEl.style.height=`${i}px`;this.detailsEl.style.overflow="hidden";requestAnimationFrame((()=>{if(!this.detailsEl||!this.isAnimating)return;this.detailsEl.style.height="0px";const i=i=>{if(i.target===this.detailsEl&&i.propertyName==="height"){this.finishCloseAnimation()}};this.cleanupAnimation=()=>{if(this.detailsEl){this.detailsEl.removeEventListener("transitionend",i)}};this.detailsEl.addEventListener("transitionend",i);setTimeout((()=>{if(this.isAnimating){this.finishCloseAnimation()}}),250)}))}finishOpenAnimation(){if(this.cleanupAnimation){this.cleanupAnimation();this.cleanupAnimation=undefined}if(this.detailsEl){this.detailsEl.style.height="";this.detailsEl.style.overflow=""}this.isAnimating=false}finishCloseAnimation(){if(this.cleanupAnimation){this.cleanupAnimation();this.cleanupAnimation=undefined}if(this.detailsEl){this.detailsEl.style.height="";this.detailsEl.style.overflow="";this.detailsEl.removeAttribute("data-expanded")}this.isAnimating=false}cleanupPreviousAnimation(){if(this.cleanupAnimation){this.cleanupAnimation();this.cleanupAnimation=undefined}this.isAnimating=false}render(){const i=this._expanded;console.log(i);return e(r,{key:"512315a15a1a6690aadf6402bdf1eef37a8640b6"},e("div",{key:"ca5a5b9cd233dfbd7e6cd86442caa0da5c77970f",class:"ir-accordion","data-open":i?"true":"false"},e("button",{key:"9bcee8c400d9c082d79a3ad6029e61708b417fdb",type:"button",class:"ir-accordion__trigger","aria-expanded":i?"true":"false","aria-controls":this.contentId,"aria-busy":this.isAnimating?"true":"false",onClick:this.onTriggerClick,onKeyDown:this.onTriggerKeyDown,disabled:this.isAnimating},this.showCaret&&e("ir-icons",{key:"8164064d5fb12f9ce1bfed89971e01efde21dfc3",name:"angle-down",class:`ir-accordion__caret ${i?"is-open":""}`,"aria-hidden":"true"}),e("div",{key:"41ef0077b8cc670b5af31aa5862c256ab59e9649",class:"ir-accordion__trigger-content"},e("slot",{key:"d0dd6b41b8177b0b57d0685c889776ffe4cdbb7e",name:"trigger"}))),e("div",{key:"2389aa0047f5b5442d30615239837b87e49bf042",class:"ir-accordion__content",id:this.contentId,ref:i=>this.detailsEl=i,"data-expanded":i?"true":null,role:"region","aria-hidden":i?"false":"true"},e("div",{key:"564cbe3611396dcaffc4a3e63c6b9405e0910d73",class:"ir-accordion__content-inner",ref:i=>this.contentEl=i},e("slot",{key:"fe762287c9ce74b9d7101b3ce6688dbf5b9bc4c9",name:"body"})))))}get host(){return n(this)}static get watchers(){return{expanded:["watchExpanded"]}}};c.style=a;export{c as ir_accordion};
//# sourceMappingURL=p-62b3ca62.entry.js.map