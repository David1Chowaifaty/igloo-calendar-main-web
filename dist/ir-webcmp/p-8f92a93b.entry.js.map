{"version":3,"names":["iglToastProviderCss","IglToastProviderStyle0","IglToastProvider","static","document","createElement","showPopover","toastTimers","Map","toasts","getToastStack","this","ensureGlobalStyles","toastStack","className","supportsPopover","setAttribute","style","cssText","body","contains","appendChild","componentDidLoad","openStackPopover","stack","closeStackPopover","hidePopover","stylesInjected","styleId","getElementById","id","textContent","head","show","message","options","console","log","Date","now","Math","random","toast","variant","duration","undefined","closable","icon","renderToastToStack","timer","window","setTimeout","hide","set","get","clearTimeout","delete","toastEl","querySelector","classList","add","remove","children","length","parentElement","filter","t","iconHtml","getIconPath","closeButton","innerHTML","escapeHtml","closeBtn","addEventListener","remainingTime","pauseStart","requestAnimationFrame","text","div","icons","render"],"sources":["src/components/igl-toast-provider/igl-toast-provider.css?tag=igl-toast-provider","src/components/igl-toast-provider/igl-toast-provider.tsx"],"sourcesContent":[":host {\n  display: none;\n}\n\n/* These styles are injected globally via the toast stack */\n.toast {\n  display: flex;\n  align-items: flex-start;\n  gap: 12px;\n  min-width: 300px;\n  max-width: 500px;\n  padding: 16px;\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;\n  font-size: 14px;\n  line-height: 1.5;\n  opacity: 0;\n  transform: translateX(400px);\n  transition: all 0.25s ease;\n}\n\n.toast--show {\n  opacity: 1;\n  transform: translateX(0);\n}\n\n.toast--hiding {\n  opacity: 0;\n  transform: translateX(400px) scale(0.9);\n}\n\n/* Variants */\n.toast--primary {\n  background: #0ea5e9;\n  color: white;\n}\n\n.toast--success {\n  background: #22c55e;\n  color: white;\n}\n\n.toast--warning {\n  background: #f59e0b;\n  color: white;\n}\n\n.toast--danger {\n  background: #ef4444;\n  color: white;\n}\n\n.toast--neutral {\n  background: #f3f4f6;\n  color: #1f2937;\n  border: 1px solid #e5e7eb;\n}\n\n/* Icon */\n.toast__icon {\n  flex-shrink: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 20px;\n  height: 20px;\n}\n\n.toast__icon-svg {\n  width: 100%;\n  height: 100%;\n}\n\n/* Message */\n.toast__message {\n  flex: 1;\n  padding-top: 2px;\n}\n\n/* Close button */\n.toast__close {\n  flex-shrink: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n  padding: 0;\n  border: none;\n  background: transparent;\n  color: inherit;\n  cursor: pointer;\n  border-radius: 4px;\n  transition: background-color 0.15s ease;\n  opacity: 0.8;\n}\n\n.toast__close:hover {\n  opacity: 1;\n  background: rgba(0, 0, 0, 0.1);\n}\n\n.toast--neutral .toast__close:hover {\n  background: rgba(0, 0, 0, 0.05);\n}\n\n.toast__close svg {\n  width: 16px;\n  height: 16px;\n  fill: currentColor;\n}\n","import { Component, Method, State, Element } from '@stencil/core';\nexport interface Toast {\n  id: string;\n  message: string;\n  variant?: 'primary' | 'success' | 'warning' | 'danger' | 'neutral';\n  duration?: number;\n  closable?: boolean;\n  icon?: string;\n}\n\n@Component({\n  tag: 'igl-toast-provider',\n  styleUrl: 'igl-toast-provider.css',\n  shadow: false,\n  scoped: false,\n})\nexport class IglToastProvider {\n  private static toastStack: HTMLDivElement;\n  private static stylesInjected = false;\n  private static readonly supportsPopover = typeof document !== 'undefined' && typeof (document.createElement('div') as any).showPopover === 'function';\n  private toastTimers: Map<string, number> = new Map();\n\n  @Element() el: HTMLElement;\n  @State() toasts: Toast[] = [];\n\n  private static getToastStack() {\n    this.ensureGlobalStyles();\n\n    if (!this.toastStack) {\n      this.toastStack = document.createElement('div');\n      this.toastStack.className = 'toast-stack';\n      if (this.supportsPopover) {\n        this.toastStack.setAttribute('popover', 'manual');\n      }\n      this.toastStack.setAttribute('role', 'status');\n      this.toastStack.setAttribute('aria-live', 'polite');\n      this.toastStack.style.cssText = `\n        position: fixed;\n        top: calc(env(safe-area-inset-top, 0px) + 20px);\n        right: 20px;\n        z-index: 2147483647;\n        display: flex;\n        flex-direction: column;\n        gap: 12px;\n        pointer-events: none;\n      `;\n    }\n\n    if (!document.body.contains(this.toastStack)) {\n      document.body.appendChild(this.toastStack);\n    }\n\n    return this.toastStack;\n  }\n\n  componentDidLoad() {\n    // Ensure toast stack is ready when the component mounts\n    IglToastProvider.getToastStack();\n  }\n\n  private static openStackPopover() {\n    if (!this.supportsPopover || !this.toastStack) {\n      return;\n    }\n\n    const stack = this.toastStack as any;\n    if (typeof stack.showPopover === 'function') {\n      try {\n        stack.showPopover();\n      } catch {\n        /* Popover is already open */\n      }\n    }\n  }\n\n  private static closeStackPopover() {\n    if (!this.supportsPopover || !this.toastStack) {\n      return;\n    }\n\n    const stack = this.toastStack as any;\n    if (typeof stack.hidePopover === 'function') {\n      try {\n        stack.hidePopover();\n      } catch {\n        /* Ignore errors when popover already closed */\n      }\n    }\n  }\n\n  private static ensureGlobalStyles() {\n    if (this.stylesInjected) {\n      return;\n    }\n\n    const styleId = 'ir-toast-provider-styles';\n    if (document.getElementById(styleId)) {\n      this.stylesInjected = true;\n      return;\n    }\n\n    const style = document.createElement('style');\n    style.id = styleId;\n    style.textContent = `\n      .toast-stack {\n        position: fixed;\n        top: calc(env(safe-area-inset-top, 0px) + 20px);\n        right: 20px;\n        z-index: 2147483647;\n        display: flex;\n        flex-direction: column;\n        gap: 12px;\n        pointer-events: none;\n      }\n\n      .toast {\n        display: flex;\n        align-items: flex-start;\n        gap: 12px;\n        min-width: 300px;\n        max-width: 500px;\n        padding: 16px;\n        border-radius: 8px;\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;\n        font-size: 14px;\n        line-height: 1.5;\n        opacity: 0;\n        transform: translateX(400px);\n        transition: all 0.25s ease;\n        pointer-events: auto;\n        background: var(--ir-toast-bg, #0ea5e9);\n        color: var(--ir-toast-color, #fff);\n      }\n\n      .toast--show {\n        opacity: 1;\n        transform: translateX(0);\n      }\n\n      .toast--hiding {\n        opacity: 0;\n        transform: translateX(400px) scale(0.9);\n      }\n\n      .toast--primary {\n        --ir-toast-bg: #0ea5e9;\n        --ir-toast-color: #fff;\n      }\n\n      .toast--success {\n        --ir-toast-bg: #22c55e;\n        --ir-toast-color: #fff;\n      }\n\n      .toast--warning {\n        --ir-toast-bg: #f59e0b;\n        --ir-toast-color: #fff;\n      }\n\n      .toast--danger {\n        --ir-toast-bg: #ef4444;\n        --ir-toast-color: #fff;\n      }\n\n      .toast--neutral {\n        --ir-toast-bg: #f3f4f6;\n        --ir-toast-color: #1f2937;\n        border: 1px solid #e5e7eb;\n      }\n\n      .toast__icon {\n        flex-shrink: 0;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: 20px;\n        height: 20px;\n      }\n\n      .toast__icon-svg {\n        width: 100%;\n        height: 100%;\n      }\n\n      .toast__message {\n        flex: 1;\n        padding-top: 2px;\n      }\n\n      .toast__close {\n        flex-shrink: 0;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: 24px;\n        height: 24px;\n        padding: 0;\n        border: none;\n        background: transparent;\n        color: inherit;\n        cursor: pointer;\n        border-radius: 4px;\n        transition: background-color 0.15s ease;\n        opacity: 0.8;\n      }\n\n      .toast__close:hover {\n        opacity: 1;\n        background: rgba(0, 0, 0, 0.1);\n      }\n\n      .toast--neutral .toast__close:hover {\n        background: rgba(0, 0, 0, 0.05);\n      }\n\n      .toast__close svg {\n        width: 16px;\n        height: 16px;\n        fill: currentColor;\n      }\n    `;\n\n    document.head.appendChild(style);\n    this.stylesInjected = true;\n  }\n\n  @Method()\n  async show(\n    message: string,\n    options: {\n      variant?: 'primary' | 'success' | 'warning' | 'danger' | 'neutral';\n      duration?: number;\n      closable?: boolean;\n      icon?: string;\n    } = {},\n  ) {\n    console.log('show clicked');\n    const id = `toast-${Date.now()}-${Math.random()}`;\n    const toast: Toast = {\n      id,\n      message,\n      variant: options.variant || 'primary',\n      duration: options.duration !== undefined ? options.duration : 3000,\n      closable: options.closable !== undefined ? options.closable : true,\n      icon: options.icon,\n    };\n\n    this.toasts = [...this.toasts, toast];\n\n    // Create toast element and append to stack\n    this.renderToastToStack(toast);\n\n    // Auto-hide after duration\n    if (toast.duration > 0) {\n      const timer = window.setTimeout(() => {\n        this.hide(id);\n      }, toast.duration);\n      this.toastTimers.set(id, timer);\n    }\n\n    return id;\n  }\n\n  @Method()\n  async hide(id: string) {\n    // Clear timer\n    const timer = this.toastTimers.get(id);\n    if (timer) {\n      clearTimeout(timer);\n      this.toastTimers.delete(id);\n    }\n\n    // Remove from DOM\n    const stack = IglToastProvider.toastStack;\n    if (!stack) {\n      return;\n    }\n\n    const toastEl = stack.querySelector(`[data-toast-id=\"${id}\"]`);\n    if (toastEl) {\n      toastEl.classList.add('toast--hiding');\n      setTimeout(() => {\n        toastEl.remove();\n\n        // Remove stack if empty\n        if (stack.children.length === 0) {\n          IglToastProvider.closeStackPopover();\n          if (!IglToastProvider.supportsPopover && stack.parentElement) {\n            stack.remove();\n          }\n        }\n      }, 250);\n    }\n\n    // Remove from state\n    this.toasts = this.toasts.filter(t => t.id !== id);\n  }\n\n  private renderToastToStack(toast: Toast) {\n    const stack = IglToastProvider.getToastStack();\n    const toastEl = document.createElement('wa-callout');\n    toastEl.setAttribute('data-toast-id', toast.id);\n    toastEl.className = `toast toast--${toast.variant}`;\n    toastEl.style.cssText = 'pointer-events: auto;';\n\n    const iconHtml = toast.icon\n      ? `<div class=\"toast__icon\">\n          <svg class=\"toast__icon-svg\" width=\"20\" height=\"20\" viewBox=\"0 0 20 20\">\n            ${this.getIconPath(toast.icon)}\n          </svg>\n        </div>`\n      : '';\n\n    const closeButton = toast.closable\n      ? `<button class=\"toast__close\" aria-label=\"Close\">\n          <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\">\n            <path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"/>\n          </svg>\n        </button>`\n      : '';\n\n    toastEl.innerHTML = `\n      ${iconHtml}\n      <div class=\"toast__message\">${this.escapeHtml(toast.message)}</div>\n      ${closeButton}\n    `;\n\n    // Add close handler\n    if (toast.closable) {\n      const closeBtn = toastEl.querySelector('.toast__close');\n      closeBtn?.addEventListener('click', () => this.hide(toast.id));\n    }\n\n    // Add pause/resume on hover\n    if (toast.duration > 0) {\n      let remainingTime = toast.duration;\n      let pauseStart = 0;\n\n      toastEl.addEventListener('mouseenter', () => {\n        pauseStart = Date.now();\n        const timer = this.toastTimers.get(toast.id);\n        if (timer) {\n          clearTimeout(timer);\n        }\n      });\n\n      toastEl.addEventListener('mouseleave', () => {\n        if (pauseStart > 0) {\n          remainingTime -= Date.now() - pauseStart;\n          const timer = window.setTimeout(() => {\n            this.hide(toast.id);\n          }, remainingTime);\n          this.toastTimers.set(toast.id, timer);\n          pauseStart = 0;\n        }\n      });\n    }\n\n    IglToastProvider.openStackPopover();\n    stack.appendChild(toastEl);\n\n    // Trigger animation\n    requestAnimationFrame(() => {\n      toastEl.classList.add('toast--show');\n    });\n  }\n\n  private escapeHtml(text: string): string {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n\n  private getIconPath(icon: string): string {\n    const icons: Record<string, string> = {\n      'check-circle':\n        '<path fill=\"currentColor\" d=\"M10 0a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm4.854 7.854l-5 5a.5.5 0 0 1-.708 0l-3-3a.5.5 0 0 1 .708-.708L9 11.293l4.646-4.647a.5.5 0 0 1 .708.708z\"/>',\n      'info-circle': '<path fill=\"currentColor\" d=\"M10 0a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm1 14a1 1 0 1 1-2 0v-4a1 1 0 1 1 2 0v4zm-1-6a1 1 0 1 1 0-2 1 1 0 0 1 0 2z\"/>',\n      'exclamation-triangle':\n        '<path fill=\"currentColor\" d=\"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\"/>',\n      'x-circle':\n        '<path fill=\"currentColor\" d=\"M10 0a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm3.854 12.146a.5.5 0 0 1-.708.708L10 9.707l-3.146 3.147a.5.5 0 0 1-.708-.708L9.293 9 6.146 5.854a.5.5 0 1 1 .708-.708L10 8.293l3.146-3.147a.5.5 0 0 1 .708.708L10.707 9l3.147 3.146z\"/>',\n    };\n    return icons[icon] || icons['info-circle'];\n  }\n\n  render() {\n    // This component doesn't render anything in its own shadow DOM\n    // All toasts are rendered directly to document.body\n    return null;\n  }\n}\n"],"mappings":"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","ignoreList":[]}