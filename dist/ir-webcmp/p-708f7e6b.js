import{a as t}from"./p-bf44a732.js";import{c as o}from"./p-c5894a47.js";import{h as e}from"./p-6c4ba7c0.js";import{z as n}from"./p-e7d273da.js";import{i as a,e as s}from"./p-4591e2d3.js";class r{async AddPayment(o,e){try{const{data:n}=await t.post(`/Do_Payment`,{payment:{...o,book_nbr:e}});if(n.ExceptionMsg!==""){throw new Error(n.ExceptionMsg)}return n.My_Result}catch(t){console.log(t);throw new Error(t)}}async CancelPayment(o){try{const{data:e}=await t.post(`/Cancel_Payment`,{id:o});if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}return e.My_Result}catch(t){console.log(t);throw new Error(t)}}async GetExposedCancellationDueAmount(o){try{const{data:e}=await t.post(`/Get_Exposed_Cancelation_Due_Amount`,o);if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}return e.My_Result}catch(t){console.log(t);throw new Error(t)}}}const i=n.string().regex(/^\d{4}-\d{2}-\d{2}$/,"Expected date in YYYY-MM-DD format");n.object({channel:n.string(),property_id:n.number().int().nullable(),balance_filter:n.string().nullable(),filter_type:n.union([n.number(),n.string()]).nullable(),from:i,to:i,name:n.string(),book_nbr:n.string(),booking_status:n.string(),userTypeCode:n.number().optional(),affiliate_id:n.number().int().default(0),is_mpo_managed:n.boolean().default(false),is_mpo_used:n.boolean().default(false),is_for_mobile:n.boolean().default(false),is_combined_view:n.boolean().default(false),start_row:n.number().int(),end_row:n.number().int(),total_count:n.number().int(),is_to_export:n.boolean(),property_ids:n.array(n.number().int()).optional()});const c={channels:[],settlement_methods:[],statuses:[],types:[],token:"",rowCount:10,bookings:[],balance_filter:[],pagination:{currentPage:1,totalPages:0,totalRecords:0,pageSize:10,showing:{from:0,to:0}},userSelection:{from:e().add(-7,"days").format("YYYY-MM-DD"),to:e().format("YYYY-MM-DD"),channel:"",balance_filter:null,property_id:null,start_row:0,end_row:20,total_count:0,filter_type:null,name:"",book_nbr:"",booking_status:"",affiliate_id:0,is_mpo_managed:false,is_mpo_used:false,is_for_mobile:false,is_combined_view:false,is_to_export:false},download_url:null};const{state:_,onChange:l}=o(c);function d(){_.userSelection={..._.userSelection,channel:"",booking_status:_.statuses[0].code,filter_type:_.types[0].id,book_nbr:"",name:"",from:e().add(-7,"days").format("YYYY-MM-DD"),to:e().format("YYYY-MM-DD"),start_row:0,end_row:_.rowCount,balance_filter:_.balance_filter[0].value}}function p(t){_.userSelection={..._.userSelection,...t}}function f(t,o){_.userSelection={..._.userSelection,[t]:o}}const w=(t,o,e)=>Math.min(Math.max(t,o),e);const u=(t,o,e)=>{if(e===0){return{from:0,to:0}}const n=(t-1)*o;return{from:n+1,to:Math.min(n+o,e)}};const m=(t,o)=>{if(t===0){return 0}return Math.ceil(t/o)};const g=(t,o)=>{const e=(t-1)*o;return{startRow:e,endRow:e+o}};function h(t){const o=t.end_row-t.start_row||_.pagination.pageSize||_.rowCount;const e=t.total_count;const n=m(e,o);const a=n===0?1:Math.floor(t.start_row/o)+1;_.rowCount=o;_.pagination={..._.pagination,pageSize:o,currentPage:a,totalPages:n,totalRecords:e,showing:u(a,o,e)}}function y(t){const o=_.pagination.pageSize||_.rowCount;const e=_.pagination.totalPages||Math.max(m(_.pagination.totalRecords,o),1);const n=w(t,1,Math.max(e,1));const{startRow:a,endRow:s}=g(n,o);p({start_row:a,end_row:s});_.pagination={..._.pagination,currentPage:n,showing:u(n,o,_.pagination.totalRecords)};return{startRow:a,endRow:s}}function b(t){const o=Math.max(t,1);_.rowCount=o;const e=_.pagination.totalRecords;const n=m(e,o);const a=n===0?1:w(_.pagination.currentPage,1,Math.max(n,1));const{startRow:s,endRow:r}=g(a,o);_.pagination={..._.pagination,pageSize:o,currentPage:a,totalPages:n,showing:u(a,o,e)};p({start_row:s,end_row:r});return{startRow:s,endRow:r}}class Y{async getExposedBookingsCriteria(o){const{data:e}=await t.post(`/Get_Exposed_Bookings_Criteria`,{property_id:o});const n=e.My_Result;_.channels=n.channels;_.settlement_methods=n.settlement_methods;_.statuses=n.statuses;_.types=n.types;_.balance_filter=n.balance_filter;d()}async getExposedBookings(o,e){const{property_id:n,userTypeCode:r,channel:i,property_ids:c,...l}=o;const d=a(r);const{data:p}=await t.post(`/Get_Exposed_Bookings`,{...l,extras:s,property_id:d?undefined:n,property_ids:d?c:null,channel:d?"":i});const f=p.My_Result;const w=p.My_Params_Get_Exposed_Bookings;if(e?.append){_.bookings=[..._.bookings,...f]}else{_.bookings=[...f]}_.userSelection={..._.userSelection,total_count:w.total_count};_.download_url=w.exported_data_url}async removeExposedBooking(o,e){await t.post(`/Remove_Exposed_Booking`,{booking_nbr:o,is_to_revover:e})}}export{Y as B,r as P,h as a,_ as b,p as c,y as d,d as i,l as o,b as s,f as u};
//# sourceMappingURL=p-708f7e6b.js.map