import{r as t,h as e,H as i,c as s,F as o}from"./p-jhiFt_tX.js";import{b as a,m as n,B as l,c as d,r,a as c,u as h,g as f}from"./p-CGjL5hiZ.js";import{l as b}from"./p-DRfRlSCW.js";import{i as p,c as u}from"./p-CT3GgrvE.js";import{f as m,k as g,e as y,g as v,d as k,w as _}from"./p-BGsjhPqm.js";import{v as x}from"./p-DD3477fe.js";import{h as O}from"./p-Mki5YqAR.js";import{i as w}from"./p-CZSi6r0A.js";import{l as D}from"./p-DeW5X45W.js";import"./p-BdhGE_xS.js";import"./p-E-ZsRS8r.js";import"./p-vROPuQAY.js";class I{formatVariationBasedOnInfants(t){const e=this.getVariationBasedOnInfants(t);return this.formatVariation(e,t.infants)}calculateVariationAmount(t){var e;return((e=this.getVariationBasedOnInfants(t))===null||e===void 0?void 0:e.discounted_amount)||0}getVariationBasedOnInfants({variations:t,baseVariation:e,infants:i}){const{adult_nbr:s,child_nbr:o}=e;return t.find((t=>t.adult_nbr===s&&t.child_nbr===Math.max(0,o-Math.max(0,i))))||e}formatVariation({child_nbr:t,adult_nbr:e},i){var s,o,a,n;const l=Number(e)||0;const d=Math.max(Number(i)||0,0);const r=l>1?b.entries.Lcz_Adults.toLowerCase():b.entries.Lcz_Adult.toLowerCase();const c=t>1?b.entries.Lcz_Children.toLowerCase():b.entries.Lcz_Child.toLowerCase();const h=d>1?(o=(s=b.entries["Lcz_Infants"])!==null&&s!==void 0?s:"infants")===null||o===void 0?void 0:o.toLowerCase():(n=(a=b===null||b===void 0?void 0:b.entries["Lcz_Infant"])!==null&&a!==void 0?a:"infant")===null||n===void 0?void 0:n.toLowerCase();const f=[`${l} ${r}`,t?`${t} ${c}`:"",d?`${d} ${h}`:""];return f.filter(Boolean).join("&nbsp&nbsp&nbsp&nbsp")}}const B=".sc-igl-application-info-h{display:block}.rate_amount.sc-igl-application-info{display:none;padding:0;margin:0}.booking-header.sc-igl-application-info{display:flex;align-items:center;justify-content:space-between;margin-bottom:0.5rem;gap:0.5rem}.non-ref-span.sc-igl-application-info{font-size:12px;color:var(--green)}.booking-roomtype-title.sc-igl-application-info{font-size:1.25rem;margin-right:0.5rem;margin:0;padding:0}.booking-details-container.sc-igl-application-info{display:flex;align-items:center;justify-content:space-between;padding:0;margin:0}.booking-rateplan.sc-igl-application-info{display:flex;align-items:center;gap:0.5rem;margin:0;padding:0}.booking-rateplan-name.sc-igl-application-info{font-weight:bold;margin:0;padding:0}.booking-tooltip.sc-igl-application-info{margin-right:0.5rem;margin:0;padding:0}.booking-variation.sc-igl-application-info{margin:0;padding:0}.booking-price.sc-igl-application-info{margin:0;padding:0}.booking-footer.sc-igl-application-info{display:flex;align-items:center;justify-content:space-between;padding:0;margin-bottom:0.5rem}.booking-details-container.sc-igl-application-info{display:none}@media (min-width: 768px){.booking-header.sc-igl-application-info{justify-content:flex-start}.booking-footer.sc-igl-application-info,.booking-price.sc-igl-application-info{display:none}.booking-details-container.sc-igl-application-info,.rate_amount.sc-igl-application-info{display:inline-flex;gap:0.5rem}}@media only screen and (min-width: 908px){.aplicationInfoContainer.sc-igl-application-info{max-width:100%}.guest-info-container.sc-igl-application-info{max-width:300px}.preference-select-container.sc-igl-application-info{max-width:250px}}";const C=class{constructor(e){t(this,e);this.bedPreferenceType=[];this.bookingType="PLUS_BOOKING";this.totalNights=1;this.isButtonPressed=false;this.variationService=new I}componentWillLoad(){var t,e;if(p(this.rateplanSelection.roomtype.id)){const i=this.filterRooms();if(i.length>0)this.updateGuest({unit:(e=(t=i[0])===null||t===void 0?void 0:t.id)===null||e===void 0?void 0:e.toString()})}}updateGuest(t){const e=this.rateplanSelection.roomtype.id;const i=this.rateplanSelection.ratePlan.id;let s=[...this.rateplanSelection.guest];s[this.roomIndex]=Object.assign(Object.assign({},s[this.roomIndex]),t);a.ratePlanSelections=Object.assign(Object.assign({},a.ratePlanSelections),{[e]:Object.assign(Object.assign({},a.ratePlanSelections[e]),{[i]:Object.assign(Object.assign({},this.rateplanSelection),{guest:[...s]})})})}handleButtonClicked(t){switch(t.detail.key){case"book":case"bookAndCheckIn":case"save":this.isButtonPressed=true;break}}getTooltipMessages(){var t,e,i,s,o,a,n;const{ratePlan:l,selected_variation:d}=this.rateplanSelection;let r=d;if((t=this.guestInfo)===null||t===void 0?void 0:t.infant_nbr){r=this.variationService.getVariationBasedOnInfants({variations:l.variations,baseVariation:d,infants:(e=this.guestInfo)===null||e===void 0?void 0:e.infant_nbr})}if(!r)return;const c=(i=l.variations)===null||i===void 0?void 0:i.find((t=>t.adult_nbr===r.adult_nbr&&t.child_nbr===r.child_nbr));if(!c)return;const h=(o=(s=c.applicable_policies)===null||s===void 0?void 0:s.find((t=>t.type==="cancelation")))===null||o===void 0?void 0:o.combined_statement;const f=(n=(a=c.applicable_policies)===null||a===void 0?void 0:a.find((t=>t.type==="guarantee")))===null||n===void 0?void 0:n.combined_statement;let b="";if(h){b+=`<b><u>Cancellation:</u></b> ${h}<br/>`}if(f){b+=`<b><u>Guarantee:</u></b> ${f}`}return b||undefined}getAmount(){var t,e;if(this.rateplanSelection.is_amount_modified){return this.rateplanSelection.view_mode==="001"?this.rateplanSelection.rp_amount:this.rateplanSelection.rp_amount*this.totalNights}let i=this.rateplanSelection.selected_variation;if((t=this.guestInfo)===null||t===void 0?void 0:t.infant_nbr){i=this.variationService.getVariationBasedOnInfants({variations:this.rateplanSelection.ratePlan.variations,baseVariation:this.rateplanSelection.selected_variation,infants:(e=this.guestInfo)===null||e===void 0?void 0:e.infant_nbr})}return i.discounted_gross_amount}filterRooms(){var t,e,i,s;const o=[];if(!u.is_frontdesk_enabled){return o}(e=(t=this.rateplanSelection.ratePlan)===null||t===void 0?void 0:t.assignable_units)===null||e===void 0?void 0:e.forEach((t=>{if(t.Is_Fully_Available){o.push({name:t.name,id:t.pr_id})}}));const a=this.rateplanSelection.guest.filter(((t,e)=>e!==this.roomIndex)).map((t=>t.unit));const n=o.filter((t=>!a.includes(t.id.toString())));return this.bookingType==="EDIT_BOOKING"?[...n,this.rateplanSelection.roomtype.id===((i=this.baseData)===null||i===void 0?void 0:i.roomtypeId)?(s=this.baseData)===null||s===void 0?void 0:s.unit:null].filter((t=>!!t)).sort(((t,e)=>t.name.localeCompare(e.name))):n}render(){var t,s,o,l,d,r,c,h,f,g,y,v,k;const _=this.filterRooms();const O=this.variationService.formatVariationBasedOnInfants({baseVariation:this.rateplanSelection.selected_variation,infants:this.guestInfo.infant_nbr,variations:this.rateplanSelection.ratePlan.variations});return e(i,{key:"f7c5ded8eca2dfffd456c0ee6b98c189434c7f46",class:"my-2","data-testid":`room_info_${this.rateplanSelection.ratePlan.id}`},e("div",{key:"c70fc9323f4f0dc379baccb843a6f8f34943b974",class:"booking-header"},(this.bookingType==="PLUS_BOOKING"||this.bookingType==="ADD_ROOM"||this.bookingType==="EDIT_BOOKING")&&e("span",{key:"81a51d67e379ccb2e0d304021c9f2d165652aafd",class:"booking-roomtype-title"},this.rateplanSelection.roomtype.name),e("div",{key:"afa6b938f2a567a39c0105563fb9b126cc194754",class:"booking-details-container"},e("div",{key:"2bc11a62771ac8198af44536866f8b373cb01c46",class:"booking-rateplan"},e("p",{key:"f6cb673ddf942b9dbb8f16197892315b479844ae",class:"booking-rateplan-name"},this.rateplanSelection.ratePlan.short_name," ",this.rateplanSelection.ratePlan.is_non_refundable&&e("span",{key:"9e6708fc32961ce796d5bd80ead2a69914306d5f",class:"non-ref-span"},"Non Refundable")),e("ir-tooltip",{key:"34c64fc8278a6a25e02f34bef3c6ce35db03a866",class:"booking-tooltip",message:this.getTooltipMessages()})),e("p",{key:"1bffe85f638bc5379672fe6ff0a64e1fa8eadea6",class:"booking-variation",innerHTML:O})),e("p",{key:"5a5aa68180cf25ee330a8f225283e20069ea1288",class:"booking-price"},m((t=this.currency)===null||t===void 0?void 0:t.symbol,this.getAmount()),"/",b.entries.Lcz_Stay)),e("div",{key:"25efa0f149be325180e1491b4cfa7557c9eff307",class:"booking-footer"},e("div",{key:"cba78c5385de6891bca1de11fbca0c365a0302a1",class:"booking-rateplan"},e("p",{key:"209de3d41656f77975778d36a54fdd54cbdca523",class:"booking-rateplan-name"},this.rateplanSelection.ratePlan.short_name),e("ir-tooltip",{key:"b2513841e8ccba4a3536b06cab259d1f7387fed6",class:"booking-tooltip",message:this.getTooltipMessages()})),e("p",{key:"f85510ebaa0ba4129d83aeda1790de2b3f182aab",class:"booking-variation",innerHTML:O})),e("div",{key:"4240cbb549a026f69de3e6ab59ce64da7eb110fd",class:"d-flex flex-column flex-md-row  p-0 align-items-md-center aplicationInfoContainer"},e("div",{key:"9813beae55cbb018b1663f6c8564a4937a841b0a",class:"mr-md-1 mb-1 mb-md-0 flex-fill guest-info-container"},e("input",{key:"beae0d894d04b078e225c80dcfdf17670cc59bd5",id:x(),type:"text","data-testid":"guest_first_name",class:`form-control ${this.isButtonPressed&&((s=this.guestInfo)===null||s===void 0?void 0:s.first_name)===""&&"border-danger"}`,placeholder:(o=b.entries["Lcz_GuestFirstname"])!==null&&o!==void 0?o:"Guest first name",name:"guestFirstName",onInput:t=>{const e=t.target.value;this.updateGuest({first_name:e});if(a.event_type.type==="EDIT_BOOKING"){n("guest",Object.assign(Object.assign({},a.guest),{name:e}))}},required:true,value:(l=this.guestInfo)===null||l===void 0?void 0:l.first_name})),e("div",{key:"be3a21e99424de9a83d6c8ac1234d7d229f53bb6",class:"mr-md-1 flex-fill guest-info-container"},e("input",{key:"e9e68b5cc6e2c922bfd24b8f79fe8db11cfd8a35",id:x(),type:"text",class:`form-control ${this.isButtonPressed&&((d=this.guestInfo)===null||d===void 0?void 0:d.last_name)===""&&"border-danger"}`,placeholder:(r=b.entries["Lcz_GuestLastname"])!==null&&r!==void 0?r:"Guest last name",name:"guestLastName","data-testid":"guest_last_name",onInput:t=>{const e=t.target.value;this.updateGuest({last_name:e});if(a.event_type.type==="EDIT_BOOKING"){n("guest",Object.assign(Object.assign({},a.guest),{name:e}))}},required:true,value:(c=this.guestInfo)===null||c===void 0?void 0:c.last_name})),u.is_frontdesk_enabled&&!p(this.rateplanSelection.roomtype.id)&&(this.bookingType==="PLUS_BOOKING"||this.bookingType==="ADD_ROOM"||this.bookingType==="EDIT_BOOKING")&&e("div",{key:"583396e6ea338a3c4ecc24451fc9bbf7318ba54c",class:"mt-1 mt-md-0 d-flex align-items-center flex-fill"},e("div",{key:"76cf13af00cdc05f6fb309c3455ff617d1c04b67",class:"mr-md-1 p-0 flex-fill preference-select-container"},e("select",{key:"3275156816506f2125c35afc0fb039ce23390433","data-testid":"unit",class:"form-control input-sm pr-0",id:x(),onChange:t=>this.updateGuest({unit:t.target.value})},e("option",{key:"f50f47e56613d64e0b1a7b4a0947396ee17b7748",value:"",selected:((h=this.guestInfo)===null||h===void 0?void 0:h.unit)===""},b.entries.Lcz_Assignunits),_===null||_===void 0?void 0:_.map((t=>{var i;return e("option",{value:t.id,selected:((i=this.guestInfo)===null||i===void 0?void 0:i.unit)===t.id.toString()},t.name)}))))),this.rateplanSelection.roomtype.is_bed_configuration_enabled&&e("div",{key:"ec2d86d5639b423e0fc449a8cf9f9db46ca97006",class:"mt-1 mt-md-0 mr-md-1 flex-fill"},e("select",{key:"2a92ff826d0e73b17164d0e104dca426f5a23cc5","data-testid":"bed_configuration",class:`form-control input-sm ${this.isButtonPressed&&((f=this.guestInfo)===null||f===void 0?void 0:f.bed_preference)===""&&"border-danger"}`,id:x(),onChange:t=>this.updateGuest({bed_preference:t.target.value})},e("option",{key:"76c18a38c0de5f4a456bbf64be056441e28654d8",value:"",selected:((g=this.guestInfo)===null||g===void 0?void 0:g.bed_preference)===""},b.entries.Lcz_BedConfiguration),this.bedPreferenceType.map((t=>{var i;return e("option",{value:t.CODE_NAME,selected:((i=this.guestInfo)===null||i===void 0?void 0:i.bed_preference)===t.CODE_NAME},t.CODE_VALUE_EN)})))),e("p",{key:"eed4f7f432400d26026da47f108b50c0e5a3c94a",class:"rate_amount"},m((y=this.currency)===null||y===void 0?void 0:y.symbol,this.getAmount()),"/",b.entries.Lcz_Stay)),this.rateplanSelection.selected_variation.child_nbr>0&&e("div",{key:"fa9654ae18542e6c83bef9be2a9f2441af0603f6",style:{gap:"0.5rem",marginTop:"0.5rem"},class:"d-flex  flex-row  p-0 align-items-center aplicationInfoContainer"},e("p",{key:"6024df59dfe62fdbdf746de939aa20e431da5bc3",class:"m-0 p-0 text-danger"},"Any of the children below 3 years?"),e("div",{key:"48090d562aec17755c55defc0cf31415b2e19b77",class:"mr-1 flex-fill"},e("select",{key:"d38b73b6a4acc0704de1715aa35427dc1c3f7580",class:`form-control input-sm ${this.isButtonPressed&&((v=this.guestInfo)===null||v===void 0?void 0:v.bed_preference)===""&&"border-danger"}`,id:x(),style:{width:"max-content"},onChange:t=>this.updateGuest({infant_nbr:Number(t.target.value)})},e("option",{key:"d56249489e66f4bc24b3c7895d3ae8985eace983",value:"",selected:Number((k=this.guestInfo)===null||k===void 0?void 0:k.infant_nbr)===0},b.entries["No"]||"No"),Array.from({length:this.rateplanSelection.selected_variation.child_nbr},((t,e)=>e+1)).map((t=>{var i;return e("option",{value:t,selected:((i=this.guestInfo)===null||i===void 0?void 0:i.infant_nbr)===t},t)}))))))}};C.style=B;const N=".sc-igl-block-dates-view-h{display:block}.sc-igl-block-dates-view-h .controlContainer.sc-igl-block-dates-view{width:24px}.sc-igl-block-dates-view-h .checkBoxContainer.sc-igl-block-dates-view input.sc-igl-block-dates-view{height:1.2rem !important;width:30px}.releaseTime.sc-igl-block-dates-view{padding-left:5px}.out-of-service-label.sc-igl-block-dates-view{margin-left:5px !important}";const j=class{constructor(e){t(this,e);this.dataUpdateEvent=s(this,"dataUpdateEvent");this.isEventHover=false;this.renderAgain=false;this.blockDatesData={RELEASE_AFTER_HOURS:0,OPTIONAL_REASON:"",OUT_OF_SERVICE:false};this.releaseList=[];this.bookingService=new l}async componentWillLoad(){try{this.releaseList=await this.bookingService.getBlockedInfo();if(this.defaultData){this.blockDatesData=Object.assign({},this.defaultData)}else{this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(this.releaseList[0].CODE_NAME);this.emitData()}}catch(t){}}handleOptionalReason(t){this.blockDatesData.OPTIONAL_REASON=t.target.value;this.emitData()}handleReleaseAfterChange(t){if(this.entryDate)this.entryDate=undefined;this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(t.target.value);this.renderPage();this.emitData()}emitData(){this.dataUpdateEvent.emit({key:"blockDatesData",data:Object.assign({},this.blockDatesData)})}getReleaseHoursString(){let t=this.entryDate?new Date(this.entryDate):new Date;if(this.entryDate&&this.entryHour&&this.entryMinute){t.setHours(this.entryHour,this.entryMinute,0,0)}else{t.setHours(t.getHours()+this.blockDatesData.RELEASE_AFTER_HOURS,t.getMinutes(),0,0)}return t.toLocaleString("default",{month:"short"})+" "+t.getDate()+", "+this.formatNumber(t.getHours())+":"+this.formatNumber(t.getMinutes())}formatNumber(t){return t<10?`0${t}`:t}handleOutOfService(t){this.blockDatesData.OUT_OF_SERVICE=t.target.checked;if(this.blockDatesData.OUT_OF_SERVICE){this.blockDatesData.OPTIONAL_REASON="";this.blockDatesData.RELEASE_AFTER_HOURS=0}this.renderPage();this.emitData()}renderPage(){this.renderAgain=!this.renderAgain}render(){console.log({fromDate:this.fromDate,toDate:this.toDate});return e(i,{key:"4ffc45122df7d7705bab33d7e386dd326a481fcc"},e("div",{key:"2a9d45fb706d53bb4910a82f6bee7f15422ff3d3",class:`m-0 p-0 mb-1`},e("div",{key:"ce124218d25985a495c0a2e33b1889cc37da71b8",class:"text-left p-0"},e("ir-date-view",{key:"8e5432df65a71d2cadffb925022d7bf9a9cbdcd5",from_date:this.fromDate,dateOption:"YYYY-MM-DD",showDateDifference:false,to_date:this.toDate}))),e("div",{key:"3dba37945542c68e16746de93c826df72754ffd0",class:` mb-1 text-left ${this.isEventHover&&"p-0"}`},e("div",{key:"68cdc2ef1bf3ece43240193c540ac12a7944f502",class:"mb-1 "},e("label",{key:"83d62cc392e0e773a3cd54e0cf521072c601b338",class:"p-0 text-bold-700 font-medium-1 m-0 align-middle"},b.entries.Lcz_Reason,":"),e("div",{key:"3f108642e21c5c4bdeff720193cca2fa77296de1",class:"p-0 m-0 pr-1  controlContainer checkBoxContainer d-inline-block align-middle"},e("input",{key:"21a8cdefd347cc9d3b1eb8305eb52abc3fcec981",class:"form-control",type:"checkbox",checked:this.blockDatesData.OUT_OF_SERVICE,id:"userinput6",onChange:t=>this.handleOutOfService(t)})),e("span",{key:"0af733e59e7133a7efaea6fb3c1f843570e7c9a7",class:"align-middle out-of-service-label"},b.entries.Lcz_OutOfservice)),!this.blockDatesData.OUT_OF_SERVICE?e("div",null,e("div",{class:"mb-1 d-flex  align-items-center"},e("span",{class:"align-middle"},b.entries.Lcz_Or," "),e("div",{class:"d-inline-flex col pr-0 align-middle"},e("input",{class:"form-control",type:"text",placeholder:b.entries.Lcz_OptionalReason,id:"optReason",value:this.blockDatesData.OPTIONAL_REASON,onInput:t=>this.handleOptionalReason(t)}))),e("div",{class:"mb-1 w-100 pr-0 "},e("span",{class:"text-bold-700 font-medium-1"},b.entries.Lcz_AutomaticReleaseIn,": "),e("div",{class:"d-inline-block"},e("select",{class:"form-control input-sm",id:"zSmallSelect",onChange:t=>this.handleReleaseAfterChange(t)},this.releaseList.map((t=>e("option",{value:+t.CODE_NAME,selected:Number(this.blockDatesData.RELEASE_AFTER_HOURS)==Number(t.CODE_NAME)},t.CODE_VALUE_EN))))),this.blockDatesData.RELEASE_AFTER_HOURS?e("div",{class:"d-inline-block releaseTime"},e("em",null,b.entries.Lcz_On," ",this.getReleaseHoursString())):null)):null))}};j.style=N;var T=undefined&&undefined.__rest||function(t,e){var i={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0)i[s]=t[s];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var o=0,s=Object.getOwnPropertySymbols(t);o<s.length;o++){if(e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o]))i[s[o]]=t[s[o]]}return i};class Y{setBookingInfoFromAutoComplete(t,e){var i,s,o;t.bookedByInfoData={id:e.guest.id,email:e.guest.email,firstName:e.guest.first_name,lastName:e.guest.last_name,countryId:e.guest.country_id,isdCode:(s=(i=e.guest)===null||i===void 0?void 0:i.country_phone_prefix)!==null&&s!==void 0?s:(o=e.guest)===null||o===void 0?void 0:o.country_id.toString(),contactNumber:e.guest.mobile,selectedArrivalTime:e.arrival,emailGuest:e.guest.subscribe_to_news_letter,message:e.remark,cardNumber:"",cardHolderName:"",expiryMonth:"",expiryYear:"",bookingNumber:e.booking_nbr,rooms:e.rooms,from_date:e.from_date,to_date:e.to_date}}resetRoomsInfoAndMessage(t){t.defaultData.roomsInfo=[];t.message=""}onDataRoomUpdate(t,e,i,s,o){let a=e;const{data:n,key:l,changedKey:d}=t.detail;const r=`c_${n.roomCategoryId}`;const c=`p_${n.ratePlanId}`;if(this.shouldClearData(l)){a=new Map}this.initializeRoomCategoryIfNeeded(r,a);if(s){if(d==="rate"){if(a.has(r)&&a.get(r).has(c)){this.applyBookingEditToSelectedRoom(r,c,n,a,o,i)}}else{if(d!=="rateType"){if(d==="adult_child_offering"){if(a.has(r)&&e.get(r).has(c)){this.applyBookingEditToSelectedRoom(r,c,n,a,o,i)}}else{this.applyBookingEditToSelectedRoom(r,c,n,a,o,i)}}}}else{this.setSelectedRoomData(r,c,n,a)}this.cleanupEmptyData(r,a);return a}shouldClearData(t){return t==="clearData"||t==="EDIT_BOOKING"}initializeRoomCategoryIfNeeded(t,e){if(!e.has(t)){e.set(t,new Map)}}setSelectedRoomData(t,e,i,s){let o=s.get(t);if(i.totalRooms===0||i.inventory===0){o.delete(e)}else{s.set(t,o.set(e,Object.assign(Object.assign({},i),{selectedUnits:Array(i.totalRooms).fill(-1)})))}}cleanupEmptyData(t,e){if(e.has(t)){let i=e.get(t);if(i.size===0){e.delete(t)}}}applyBookingEditToSelectedRoom(t,e,i,s,o,a){s.clear();let n={};if(a){n=Object.assign(Object.assign({},i),{guestName:o||"",roomId:""})}else{n=Object.assign({},i)}s.set(t,(new Map).set(e,n))}generateDailyRates(t,e,i){const s=new Date(e);s.setDate(s.getDate()-1);let o=new Date(t);const a=[];while(o<=s){a.push({date:O(o).format("YYYY-MM-DD"),amount:i,cost:null});o.setDate(o.getDate()+1)}return a}getBookedRooms({check_in:t,check_out:e,notes:i,identifier:s,override_unit:o,unit:n,auto_check_in:l}){const d=[];const r=g(O(t).format("YYYY-MM-DD"),O(e).format("YYYY-MM-DD"));const c=({is_amount_modified:t,selected_variation:e,view_mode:i,rp_amount:s,ratePlan:o},a)=>{if(t){return i==="002"?s:s/r}let n=e;if(a>0){if(!this.variationService){this.variationService=new I}n=this.variationService.getVariationBasedOnInfants({variations:o.variations,baseVariation:e,infants:a})}return Number(n.discounted_amount)/r};for(const r in a.ratePlanSelections){const h=a.ratePlanSelections[r];for(const a in h){const r=h[a];if(r.reserved>0){for(let a=0;a<r.reserved;a++){const{first_name:h,last_name:f}=r.guest[a];d.push({identifier:s,roomtype:r.roomtype,rateplan:r.ratePlan,prepayment_amount_gross:0,unit:o?{id:n}:r.guest[a].unit?{id:r.guest[a].unit}:null,occupancy:{adult_nbr:r.selected_variation.adult_nbr,children_nbr:r.selected_variation.child_nbr-Math.max(r.guest[a].infant_nbr,0),infant_nbr:r.guest[a].infant_nbr},bed_preference:r.guest[a].bed_preference,from_date:O(t).format("YYYY-MM-DD"),to_date:O(e).format("YYYY-MM-DD"),notes:i,check_in:l,days:this.generateDailyRates(t,e,c(r,r.guest[a].infant_nbr)),guest:{email:null,first_name:h,last_name:f,country_id:null,city:null,mobile:null,address:null,dob:null,subscribe_to_news_letter:null,cci:null}})}}}}return d}async prepareBookUserServiceParams({context:t,sourceOption:e,check_in:i}){var s,o;try{if(!t||!t.dateRangeData){throw new Error("Invalid context: Missing date range data.")}const a=new Date(t.dateRangeData.fromDate);const n=new Date(t.dateRangeData.toDate);const l=(e=null,i=false)=>this.getBookedRooms({check_in:a,check_out:n,identifier:e,notes:"",override_unit:t.isEventType("BAR_BOOKING")?true:false,unit:t.isEventType("BAR_BOOKING")?t.bookingData.PR_ID:null,auto_check_in:i});const d=(t,e)=>{var{pickup_info:i,extra_services:s,is_direct:o,is_in_loyalty_mode:a,promo_key:n,extras:l}=t,d=T(t,["pickup_info","extra_services","is_direct","is_in_loyalty_mode","promo_key","extras"]);return{assign_units:true,is_pms:true,is_direct:o,is_in_loyalty_mode:a,promo_key:n,extras:l,booking:Object.assign(Object.assign({},d),{rooms:e}),extra_services:s,pickup_info:i}};let r=null;switch(t.defaultData.event_type){case"EDIT_BOOKING":{const{booking:e,currentRoomType:i}=t.defaultData;const o=e.rooms.filter((t=>t.identifier!==i.identifier));console.log("currentRoomType",i);const a=l(i.identifier,((s=i.in_out)===null||s===void 0?void 0:s.code)==="001");r=d(e,[...o,...a]);break}case"ADD_ROOM":case"SPLIT_BOOKING":{const{booking:e}=t.defaultData;if(!e){throw new Error("Missing booking")}console.log(e);const i=l();r=d(e,[...e===null||e===void 0?void 0:e.rooms,...i]);break}default:{const s=l(null,i);const{bookedByInfoData:d}=t;const c=e.type==="TRAVEL_AGENCY";r={assign_units:true,is_pms:true,is_direct:true,is_in_loyalty_mode:false,promo_key:null,extras:y,agent:c?{id:e.tag}:null,booking:{from_date:O(a).format("YYYY-MM-DD"),to_date:O(n).format("YYYY-MM-DD"),remark:d.message||null,booking_nbr:"",property:{id:t.propertyid},booked_on:{date:O().format("YYYY-MM-DD"),hour:(new Date).getHours(),minute:(new Date).getMinutes()},source:c?"":e,rooms:s,currency:t.currency,arrival:{code:d.selectedArrivalTime},guest:{email:d.email===""?null:d.email||null,first_name:d.firstName,last_name:d.lastName,country_id:d.countryId===""?null:d.countryId,city:null,mobile:d.contactNumber===null?"":d.contactNumber,country_phone_prefix:(o=d===null||d===void 0?void 0:d.isdCode)!==null&&o!==void 0?o:null,address:"",dob:null,subscribe_to_news_letter:d.emailGuest||false,cci:d.cardNumber?{nbr:d.cardNumber,holder_name:d.cardHolderName,expiry_month:d.expiryMonth,expiry_year:d.expiryYear}:null}},pickup_info:null};break}}return r}catch(t){console.error(t)}}getRoomCategoryByRoomId(t){var e;return(e=t.roomsInfo)===null||e===void 0?void 0:e.find((e=>e.id===t.RATE_TYPE))}setEditingRoomInfo(t,e){const i=this.getRoomCategoryByRoomId(t);const s=!i?"":`c_${i===null||i===void 0?void 0:i.id}`;const o=`p_${t.RATE_PLAN_ID}`;const a={adultCount:t.ADULTS_COUNT,rate:t.RATE,rateType:t.RATE_TYPE,ratePlanId:t.RATE_PLAN_ID,roomCategoryId:i?i.id:"",roomCategoryName:i?i.name:"",totalRooms:1,ratePlanName:t.RATE_PLAN,roomId:t.PR_ID,guestName:t.NAME,cancelation:t.cancelation,guarantee:t.guarantee,adult_child_offering:t.adult_child_offering};e.set(s,(new Map).set(o,a))}}const E=".sc-igl-book-property-h{position:fixed;top:0;right:0;width:100vw;height:100vh;z-index:99}.card-title.sc-igl-book-property{border-bottom:1px solid #e4e5ec;width:100%}.card-header-container.sc-igl-book-property{border-bottom:1px solid #e4e5ec;width:100%;display:flex;align-items:center;box-sizing:border-box;padding:1rem 0;justify-content:space-between}.card-header-container.sc-igl-book-property h3.sc-igl-book-property{padding:0;margin:0}.scrollContent.sc-igl-book-property{height:calc(100% - 79px);overflow:auto;position:relative}.background-overlay.sc-igl-book-property{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.25)}.formContainer.sc-igl-book-property{height:calc(100% - 79px);overflow:auto}.gap-30.sc-igl-book-property{gap:30px}.block-date.sc-igl-book-property{width:100%}.sideWindow.sc-igl-book-property{position:absolute;top:0;right:0;height:100%;background-color:#ffffff;width:100vw;overflow-y:auto;padding-bottom:85px !important}.card.sc-igl-book-property{top:0;z-index:1000}.close.sc-igl-book-property{float:right;font-size:1.5rem;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:0.5;padding:0;background-color:transparent;border:0;appearance:none}.close-icon.sc-igl-book-property{position:absolute;top:18px;right:33px;outline:none}button.sc-igl-book-property:not(:disabled),[type='button'].sc-igl-book-property:not(:disabled){cursor:pointer}@media only screen and (min-width: 1200px){.sideWindow.sc-igl-book-property{max-width:70%}}@media only screen and (min-width: 2000px){.sideWindow.sc-igl-book-property{max-width:40%}}@media only screen and (min-width: 768px) and (max-width: 1200px){.sideWindow.sc-igl-book-property{max-width:90%}}@media only screen and (min-width: 600px) and (max-width: 768px){.sideWindow.sc-igl-book-property{max-width:75%}}@media only screen and (min-width: 641px){.block-date.sc-igl-book-property{max-width:450px;padding-bottom:0 !important}}";const M=class{constructor(e){t(this,e);this.closeBookingWindow=s(this,"closeBookingWindow");this.blockedCreated=s(this,"blockedCreated");this.resetBookingEvt=s(this,"resetBookingEvt");this.animateIrButton=s(this,"animateIrButton");this.animateIrSelect=s(this,"animateIrSelect");this.toast=s(this,"toast");this.showPaymentDetails=false;this.adultChildCount={adult:0,child:0};this.renderAgain=false;this.bookingHistory=[];this.initialRoomIds=null;this.showSplitBookingOption=false;this.sourceOptions=[];this.guestData=[];this.bookedByInfoData={};this.blockDatesData={};this.ratePricingMode=[];this.selectedUnits=new Map;this.bedPreferenceType=[];this.bookingService=new l;this.bookPropertyService=new Y;this.updatedBooking=false;this.MAX_HISTORY_LENGTH=2}async componentWillLoad(){this.handleKeyDown=this.handleKeyDown.bind(this);this.initializeDefaultDateRange();if(!this.bookingData.defaultDateRange){return}this.initializeDefaultData();this.wasBlockedUnit=this.defaultData.hasOwnProperty("block_exposed_unit_props");n("event_type",{type:this.defaultData.event_type});await this.fetchSetupEntriesAndInitialize();this.initializeEventData()}componentDidLoad(){document.addEventListener("keydown",this.handleKeyDown)}disconnectedCallback(){document.removeEventListener("keydown",this.handleKeyDown)}clearBooking(t){if(this.isEventType("SPLIT_BOOKING")){t.stopImmediatePropagation();t.stopPropagation();this.bookedByInfoData={};this.bookPropertyService.resetRoomsInfoAndMessage(this);this.renderPage()}}async handleSpiltBookingSelected(t){t.stopImmediatePropagation();t.stopPropagation();const{key:e,data:i}=t.detail;if(e==="select"||e==="blur"&&i!==""){const t=await this.bookingService.getExposedBooking(i.booking_nbr||i,this.language);this.defaultData=Object.assign(Object.assign({},this.defaultData),{booking:t});this.bookPropertyService.setBookingInfoFromAutoComplete(this,t);this.sourceOption=t.source;this.renderPage()}}handleAdultChildChange(t){if(this.isEventType("ADD_ROOM")||this.isEventType("SPLIT_BOOKING")){this.bookPropertyService.resetRoomsInfoAndMessage(this)}const{adult:e,child:i}=t.detail;this.adultChildCount=Object.assign({},t.detail);this.updateBookingHistory({adults:Number(e),children:Number(i)})}onDateRangeSelect(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;this.updateBookingHistory({dates:{checkIn:new Date(this.dateRangeData.fromDate),checkOut:new Date(new Date(e.data.toDate))}});console.log("date changed",e);if(e.key==="selectedDateRange"){this.dateRangeData=e.data;if(this.isEventType("ADD_ROOM")||this.isEventType("SPLIT_BOOKING")){this.defaultData.roomsInfo=[]}else if(this.adultChildCount.adult!==0){this.checkBookingAvailability()}}}handleSourceDropDown(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;const i=this.sourceOptions.find((t=>t.id===e.toString()));this.sourceOption={code:e,description:i.value||"",tag:i.tag,id:i.id,type:i.type}}gotoSplitPageTwo(){this.gotoPage("page_two")}handleButtonClicked(t){var e,i;switch(t.detail.key){case"save":this.bookUser(false);break;case"cancel":t.stopImmediatePropagation();t.stopPropagation();this.closeWindow();break;case"back":t.stopImmediatePropagation();t.stopPropagation();this.gotoPage("page_one");break;case"book":this.bookUser(false);break;case"bookAndCheckIn":this.bookUser(true);break;case"next":t.stopImmediatePropagation();t.stopPropagation();if(!((e=this.adultChildCount)===null||e===void 0?void 0:e.adult)){this.animateIrSelect.emit("adult_child_select");break}if(d()>0){this.gotoPage("page_two");break}else if(((i=this.defaultData)===null||i===void 0?void 0:i.roomsInfo.length)===0){this.animateIrButton.emit("check_availability");break}this.toast.emit({type:"error",description:b.entries.Lcz_SelectRatePlan,title:b.entries.Lcz_SelectRatePlan});break;case"check":this.checkBookingAvailability();break}}updateBookingHistory(t){var e,i,s,o,a,n,l,d;const r=this.bookingHistory[this.bookingHistory.length-1];const c={dates:{checkIn:((e=t.dates)===null||e===void 0?void 0:e.checkIn)||((i=r===null||r===void 0?void 0:r.dates)===null||i===void 0?void 0:i.checkIn)||new Date(this.dateRangeData.fromDate),checkOut:((s=t.dates)===null||s===void 0?void 0:s.checkOut)||((o=r===null||r===void 0?void 0:r.dates)===null||o===void 0?void 0:o.checkOut)||new Date(this.dateRangeData.toDate)},adults:(n=(a=t.adults)!==null&&a!==void 0?a:r===null||r===void 0?void 0:r.adults)!==null&&n!==void 0?n:this.adultChildCount.adult,children:(d=(l=t.children)!==null&&l!==void 0?l:r===null||r===void 0?void 0:r.children)!==null&&d!==void 0?d:this.adultChildCount.child};this.bookingHistory.push(c);if(this.bookingHistory.length>this.MAX_HISTORY_LENGTH){this.bookingHistory.shift()}}handleKeyDown(t){if(t.key==="Escape"){this.closeWindow()}}initializeDefaultDateRange(){this.defaultDateRange={from_date:this.bookingData.FROM_DATE,to_date:this.bookingData.TO_DATE}}initializeDefaultData(){this.defaultData=this.bookingData;this.dateRangeData=Object.assign({},this.defaultData.defaultDateRange)}async fetchSetupEntriesAndInitialize(){try{const t=await this.fetchSetupEntries();this.setSourceOptions(this.allowedBookingSources);this.setOtherProperties(t)}catch(t){console.error("Error fetching setup entries:",t)}}initializeEventData(){if(this.isEventType("EDIT_BOOKING")){this.initializeEditBookingData()}if(!this.isEventType("BAR_BOOKING")){this.bookPropertyService.resetRoomsInfoAndMessage(this)}this.initializePage()}initializeEditBookingData(){var t,e,i,s,o;this.adultChildCount={adult:this.defaultData.ADULTS_COUNT,child:this.defaultData.CHILDREN_COUNT};this.initialRoomIds={roomName:this.defaultData.roomName,ratePlanId:this.defaultData.RATE_PLAN_ID,roomId:this.defaultData.PR_ID,roomTypeId:this.defaultData.RATE_TYPE};const{currentRoomType:a,GUEST:l}=this.defaultData;console.log(l);n("guest",{bed_preference:(t=a.bed_preference)===null||t===void 0?void 0:t.toString(),infant_nbr:a.occupancy.infant_nbr,first_name:(e=l.first_name)!==null&&e!==void 0?e:"",last_name:(i=l.last_name)!==null&&i!==void 0?i:"",unit:(o=(s=a.unit)===null||s===void 0?void 0:s.id)===null||o===void 0?void 0:o.toString()});this.checkBookingAvailability();this.bookPropertyService.setEditingRoomInfo(this.defaultData,this.selectedUnits)}initializePage(){switch(this.defaultData.event_type){case"SPLIT_BOOKING":this.showSplitBookingOption=true;this.page="page_one";break;case"BLOCK_DATES":this.page="page_block_date";break;default:this.page="page_one";break}}async fetchSetupEntries(){return await this.bookingService.fetchSetupEntries()}isGuestDataIncomplete(){for(const t in a.ratePlanSelections){const e=a.ratePlanSelections[t];for(const t in e){const i=e[t];if(i.reserved>0){for(const t of i.guest){if(t.first_name===""||t.last_name===""){return true}}}}}return false}isButtonDisabled(){const t=(t,e,i)=>{if(!t){return true}if(t===this.guestData){return this.isGuestDataIncomplete()}if(e==="selectedArrivalTime"){if(t[e]!==undefined){return t[e].code===""}else{return true}}return t[e]===i||t[e]===undefined};return t(this.guestData,"guestName","")||t(this.bookedByInfoData,"firstName","")||t(this.bookedByInfoData,"lastName","")||t(this.bookedByInfoData,"selectedArrivalTime","")}setSourceOptions(t){this.sourceOptions=t.map((t=>({id:t.id,value:t.description,tag:t.tag,type:t.type})));if(this.isEventType("EDIT_BOOKING")){this.sourceOption=Object.assign({},this.defaultData.SOURCE)}else{this.sourceOption={code:t[0].code,description:t[0].description,tag:t[0].tag,type:t[0].type,id:t[0].id}}}setOtherProperties(t){this.ratePricingMode=t===null||t===void 0?void 0:t.ratePricingMode;this.bookedByInfoData.arrivalTime=t.arrivalTime;this.bedPreferenceType=t.bedPreferenceType}async checkBookingAvailability(){r();const t=O(this.dateRangeData.fromDate).format("YYYY-MM-DD");const e=O(this.dateRangeData.toDate).format("YYYY-MM-DD");const i=this.sourceOption["type"]==="TRAVEL_AGENCY";try{const s=this.isEventType("EDIT_BOOKING")?[this.defaultData.RATE_TYPE]:[];const o=this.isEventType("BAR_BOOKING")?this.defaultData.roomsInfo.map((t=>t.id)):[];const a=await this.bookingService.getBookingAvailability({from_date:t,to_date:e,propertyid:this.propertyid,adultChildCount:this.adultChildCount,language:this.language,room_type_ids:o,currency:this.currency,agent_id:i?this.sourceOption["tag"]:null,is_in_agent_mode:i,room_type_ids_to_update:s});if(!this.isEventType("EDIT_BOOKING")){this.defaultData.defaultDateRange.fromDate=new Date(this.dateRangeData.fromDate);this.defaultData.defaultDateRange.toDate=new Date(this.dateRangeData.toDate)}this.defaultData=Object.assign(Object.assign({},this.defaultData),{roomsInfo:a});if(this.isEventType("EDIT_BOOKING")&&!this.updatedBooking){this.updateBooking()}}catch(t){console.error("Error initializing booking availability:",t)}}updateBooking(){var t,e,i;try{const{currentRoomType:s,GUEST:o}=this.defaultData;const a=s.roomtype.id;const l=s.rateplan.id;console.log({GUEST:o});const d={bed_preference:(t=s.bed_preference)===null||t===void 0?void 0:t.toString(),infant_nbr:s.occupancy.infant_nbr,last_name:o.last_name,first_name:o.first_name,unit:(i=(e=s.unit)===null||e===void 0?void 0:e.id)===null||i===void 0?void 0:i.toString(),roomtype_id:s.roomtype.id};n("guest",d);c({roomTypeId:a,ratePlanId:l,rooms:1,guest:[d]})}catch(t){console.error(t)}}async checkAndBlockDate(){try{const{block_exposed_unit_props:t}=this.defaultData;await this.bookingService.getBookingAvailability({from_date:t.from_date,to_date:t.to_date,propertyid:this.propertyid,adultChildCount:{adult:2,child:0},language:this.language,room_type_ids:this.defaultData.roomsInfo.map((t=>t.id)),currency:this.currency});const e=a.roomTypes.every((t=>t.is_available_to_book));if(e){await this.handleBlockDate(false)}else{console.log("Blocked date is unavailable. Continuing...")}}catch(t){console.error("Error checking and blocking date:",t)}}async closeWindow(){r();this.closeBookingWindow.emit();if(this.wasBlockedUnit&&!this.didReservation){await this.checkAndBlockDate()}document.removeEventListener("keydown",this.handleKeyDown)}isEventType(t){return this.defaultData.event_type===t}handleBlockDateUpdate(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;this.blockDatesData=e.data}handleGuestInfoUpdate(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;if(e.guestRefKey){if(this.isEventType("BAR_BOOKING")||this.isEventType("SPLIT_BOOKING")){this.guestData[e.guestRefKey]=Object.assign(Object.assign({},e.data),{roomId:this.defaultData.PR_ID})}else this.guestData[e.guestRefKey]=e.data}}handleBookedByInfoUpdate(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;this.bookedByInfoData=e.value.data}renderPage(){this.renderAgain=!this.renderAgain}gotoPage(t){this.page=t;this.renderPage()}getPageBlockDatesView(){return e(o,null,e("igl-block-dates-view",{fromDate:this.defaultData.FROM_DATE,toDate:this.defaultData.TO_DATE,entryDate:this.defaultData.ENTRY_DATE,onDataUpdateEvent:t=>this.handleBlockDateUpdate(t)}),e("div",{class:"p-0 mb-1 mt-2 gap-30 d-flex align-items-center justify-content-between"},e("ir-button",{text:b.entries.Lcz_Cancel,btn_color:"secondary",class:"flex-fill",onClick:()=>this.closeWindow()}),e("ir-button",{text:b.entries.Lcz_Blockdates,isLoading:w("/Block_Exposed_Unit"),class:"flex-fill",onClick:()=>this.handleBlockDate()})))}handlePageTwoDataUpdateEvent(t){t.stopImmediatePropagation();t.stopPropagation();if(t.detail.key==="propertyBookedBy"){this.handleBookedByInfoUpdate(t)}else{this.handleGuestInfoUpdate(t)}}async handleBlockDate(t=true){const e=this.wasBlockedUnit?this.defaultData.block_exposed_unit_props:(()=>{const t=v(+this.blockDatesData.RELEASE_AFTER_HOURS);return Object.assign({from_date:k(this.defaultData.defaultDateRange.fromDate),to_date:k(this.defaultData.defaultDateRange.toDate),NOTES:this.blockDatesData.OPTIONAL_REASON||"",pr_id:this.defaultData.PR_ID.toString(),STAY_STATUS_CODE:this.blockDatesData.OUT_OF_SERVICE?"004":this.blockDatesData.RELEASE_AFTER_HOURS===0?"002":"003",DESCRIPTION:this.blockDatesData.RELEASE_AFTER_HOURS||""},t)})();await this.bookingService.blockUnit(e);if(t)this.closeWindow()}async bookUser(t){this.setLoadingState(t);if(this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")){if(this.isGuestDataIncomplete()){this.isLoading="";return}}else if(this.isButtonDisabled()){this.isLoading="";return}try{if(this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")){this.bookedByInfoData.message=this.defaultData.NOTES}this.didReservation=true;const e=await this.bookPropertyService.prepareBookUserServiceParams({context:this,sourceOption:this.sourceOption,check_in:t});await this.bookingService.doReservation(e);this.resetBookingEvt.emit(null)}catch(t){console.error("Error booking user:",t)}finally{this.resetLoadingState()}}setLoadingState(t){if(this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")){this.isLoading="save"}else{this.isLoading=t?"bookAndCheckIn":"book"}}resetLoadingState(){this.isLoading="";setTimeout((()=>{this.closeWindow()}),100)}getCurrentPage(t){return this.page===t}render(){return e(i,{key:"0ce8ac191938c11f60c04b9faff196c45f187e2f","data-testid":"book_property_sheet"},e("div",{key:"9834c1880767e7014f6424c3bea8f4f9a2e19db7",class:"background-overlay",onClick:()=>this.closeWindow()}),e("div",{key:"44e15d04ca8f61156ce9802269a4f66f2f5f2fdd",class:"sideWindow pb-5 pb-md-0 "+(this.getCurrentPage("page_block_date")?"block-date":"")},e("div",{key:"8766a6f65dd2b78f7b7b9aaf47b27473154cc409",class:"card position-sticky mb-0 shadow-none p-0 "},e("div",{key:"0d0bc078544d534867edc09d11430816af4bba08",class:"card-header-container mb-2"},e("h3",{key:"e6dc60ea8787c106f2761018fdd769b2d19d4c1b",class:" text-left font-medium-2 px-2 px-md-3"},this.getCurrentPage("page_block_date")?this.defaultData.BLOCK_DATES_TITLE:this.defaultData.TITLE),e("ir-icon",{key:"3adfce0e3e069735fbd9779b599dc757b8d31656",class:"px-2",onIconClickHandler:()=>{this.closeWindow()}},e("svg",{key:"f723174667a4d0c8d0c899e37bdaa25d62a27a4b",slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",height:20,width:20},e("path",{key:"4d03ec2f0c8aebed5062ad88f8a9ff8538498358",fill:"currentColor",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"}))))),e("div",{key:"c9bb9606908b72750af3da1cbcca48f66cbea9f0",class:"px-2 px-md-3"},this.getCurrentPage("page_one")&&e("igl-booking-overview-page",{key:"60e4ab295560d27f417b4f9cd8e648b2a3856aed",initialRoomIds:this.initialRoomIds,defaultDaterange:this.defaultDateRange,class:"p-0 mb-1",eventType:this.defaultData.event_type,selectedRooms:this.selectedUnits,currency:this.currency,showSplitBookingOption:this.showSplitBookingOption,ratePricingMode:this.ratePricingMode,dateRangeData:this.dateRangeData,bookingData:this.defaultData,adultChildCount:this.adultChildCount,bookedByInfoData:this.bookedByInfoData,adultChildConstraints:this.adultChildConstraints,sourceOptions:this.sourceOptions,propertyId:this.propertyid}),this.getCurrentPage("page_two")&&e("igl-booking-form",{key:"c59c18ab8c8843c0b6778bc0cfd338bab32d8723",currency:this.currency,propertyId:this.propertyid,showPaymentDetails:this.showPaymentDetails,selectedGuestData:this.guestData,countries:this.countries,isLoading:this.isLoading,selectedRooms:this.selectedUnits,bedPreferenceType:this.bedPreferenceType,dateRangeData:this.dateRangeData,bookingData:this.defaultData,showSplitBookingOption:this.showSplitBookingOption,language:this.language,bookedByInfoData:this.bookedByInfoData,defaultGuestData:this.defaultData,isEditOrAddRoomEvent:this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM"),onDataUpdateEvent:t=>this.handlePageTwoDataUpdateEvent(t)}),this.getCurrentPage("page_block_date")?this.getPageBlockDatesView():null)))}};M.style=E;const G=".sc-igl-book-property-footer-h{display:block;margin:0;padding:0}.sc-igl-book-property-footer-h>*.sc-igl-book-property-footer{margin:auto;padding:auto}.gap-30.sc-igl-book-property-footer{gap:30px}";const A=class{constructor(e){t(this,e);this.buttonClicked=s(this,"buttonClicked");this.disabled=true}isEventType(t){return t===this.eventType}editNext(t){if(this.isEventType("EDIT_BOOKING")){if(t==="Cancel"){return"flex-fill"}else{return"d-none d-md-block  flex-fill"}}return"flex-fill"}renderButton(t,i,s=false,o){return e("div",{class:this.shouldRenderTwoButtons()?` ${this.editNext(i)}`:"flex-fill"},e("ir-button",{btn_color:t==="cancel"?"secondary":"primary",text:i,btn_disabled:s,onClickHandler:()=>{this.buttonClicked.emit({key:t})},icon_name:o,iconPosition:"right",style:{"--icon-size":"1rem"},icon_style:{paddingBottom:"1.9px"}}))}shouldRenderTwoButtons(){return this.isEventType("PLUS_BOOKING")||this.isEventType("ADD_ROOM")||this.isEventType("EDIT_BOOKING")}render(){return e(i,{key:"bd00491c082b60527772f3193d4d85354f7a7eb2"},e("div",{key:"78f664ec54eef5aef70c58550885945958d76dd4",class:"d-flex justify-content-between gap-30 align-items-center"},this.isEventType("EDIT_BOOKING")?e(o,null,this.renderButton("cancel",b.entries.Lcz_Cancel),this.shouldRenderTwoButtons()&&this.renderButton("next",`${b.entries.Lcz_Next}`,w("/Get_Exposed_Booking_Availability"),"angles_right")):e(o,null,this.renderButton("cancel",b.entries.Lcz_Cancel),this.shouldRenderTwoButtons()&&this.renderButton("next",`${b.entries.Lcz_Next}`,false,"angles_right"))))}};A.style=G;const R=".sc-igl-book-property-header-h{display:block}.sourceContainer.sc-igl-book-property-header{max-width:350px}.message-label.sc-igl-book-property-header{font-size:80%}";const S=class{constructor(e){t(this,e);this.splitBookingDropDownChange=s(this,"splitBookingDropDownChange");this.sourceDropDownChange=s(this,"sourceDropDownChange");this.adultChild=s(this,"adultChild");this.checkClicked=s(this,"checkClicked");this.buttonClicked=s(this,"buttonClicked");this.toast=s(this,"toast");this.spiltBookingSelected=s(this,"spiltBookingSelected");this.animateIrButton=s(this,"animateIrButton");this.animateIrSelect=s(this,"animateIrSelect");this.splitBookingId="";this.bookingData="";this.sourceOptions=[];this.showSplitBookingOption=false;this.sourceOption={code:"",description:"",tag:"",id:"",type:""}}getSplitBookingList(){return e("fieldset",{class:"d-flex flex-column text-left mb-1  flex-lg-row align-items-lg-center"},e("label",{class:"mr-lg-1"},b.entries.Lcz_Tobooking,"# "),e("div",{class:"btn-group mt-1 mt-lg-0 sourceContainer"},e("ir-autocomplete",{value:Object.keys(this.bookedByInfoData).length>1?`${this.bookedByInfoData.bookingNumber} ${this.bookedByInfoData.firstName} ${this.bookedByInfoData.lastName}`:"",from_date:O(this.bookingDataDefaultDateRange.fromDate).format("YYYY-MM-DD"),to_date:O(this.bookingDataDefaultDateRange.toDate).format("YYYY-MM-DD"),propertyId:this.propertyId,placeholder:b.entries.Lcz_BookingNumber,onComboboxValue:t=>{t.stopImmediatePropagation();this.spiltBookingSelected.emit(t.detail)},isSplitBooking:true})))}getSourceNode(){return e("fieldset",{class:"d-flex text-left  align-items-center"},e("label",{class:"mr-1"},b.entries.Lcz_Source," "),e("div",{class:"btn-group mt-0 flex-fill sourceContainer"},e("select",{class:"form-control input-sm",id:"xSmallSelect",onChange:t=>this.sourceDropDownChange.emit(t.target.value)},this.sourceOptions.map((t=>{if(t.type==="LABEL"){return e("optgroup",{label:t.value})}return e("option",{value:t.id,selected:this.sourceOption.code===t.id},t.value)})))))}handleAdultChildChange(t,e){var i,s;let o={};if(e===""){o=Object.assign(Object.assign({},this.adultChildCount),{[t]:0})}else{o=Object.assign(Object.assign({},this.adultChildCount),{[t]:e})}n("bookingAvailabilityParams",{from_date:this.bookingDataDefaultDateRange.fromDate,to_date:this.bookingDataDefaultDateRange.toDate,adult_nbr:(i=o===null||o===void 0?void 0:o["adult"])!==null&&i!==void 0?i:0,child_nbr:(s=o===null||o===void 0?void 0:o["child"])!==null&&s!==void 0?s:0});this.adultChild.emit(o)}getAdultChildConstraints(){var t,i,s,o;return e("div",{class:"mt-1 mt-lg-0 d-flex flex-column text-left"},e("div",{class:"form-group  my-lg-0 text-left d-flex align-items-center justify-content-between justify-content-sm-start"},e("fieldset",null,e("div",{class:"btn-group ml-0"},e("ir-select",{testId:"adult_number",class:"m-0",selectedValue:(i=(t=this.adultChildCount)===null||t===void 0?void 0:t.adult)===null||i===void 0?void 0:i.toString(),onSelectChange:t=>this.handleAdultChildChange("adult",t.detail),select_id:"adult_select",firstOption:b.entries.Lcz_AdultsCaption,LabelAvailable:false,data:Array.from(Array(this.adultChildConstraints.adult_max_nbr),((t,e)=>e+1)).map((t=>({text:t.toString(),value:t.toString()})))}))),this.adultChildConstraints.child_max_nbr>0&&e("fieldset",null,e("div",{class:"btn-group ml-1 p-0"},e("ir-select",{selectedValue:(o=(s=this.adultChildCount)===null||s===void 0?void 0:s.child)===null||o===void 0?void 0:o.toString(),testId:"child_number",onSelectChange:t=>this.handleAdultChildChange("child",t.detail),select_id:"child_select",firstOption:this.renderChildCaption(),LabelAvailable:false,data:Array.from(Array(this.adultChildConstraints.child_max_nbr),((t,e)=>e+1)).map((t=>({text:t.toString(),value:t.toString()})))}))),e("ir-button",{btn_id:"check_availability",isLoading:w("/Check_Availability"),icon:"",size:"sm",class:"ml-2",text:b.entries.Lcz_Check,onClickHandler:()=>this.handleButtonClicked()})))}renderChildCaption(){const t=this.adultChildConstraints.child_max_age;let e=b.entries.Lcz_Years;if(t===1){e=b.entries.Lcz_Year}return`${b.entries.Lcz_ChildCaption} 0 - ${this.adultChildConstraints.child_max_age} ${e}`}handleButtonClicked(){if(this.isEventType("SPLIT_BOOKING")&&Object.keys(this.bookedByInfoData).length<=1){this.toast.emit({type:"error",title:b.entries.Lcz_ChooseBookingNumber,description:"",position:"top-right"})}else if(this.isEventType("ADD_ROOM")||this.isEventType("SPLIT_BOOKING")){const t=O(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date));const e=O(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date));const i=O(new Date(this.dateRangeData.fromDate));const s=O(new Date(this.dateRangeData.toDate));if(s.isBefore(e)||i.isAfter(t)){this.toast.emit({type:"error",title:`${b.entries.Lcz_CheckInDateShouldBeMAx.replace("%1",O(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date)).format("ddd, DD MMM YYYY")).replace("%2",O(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date)).format("ddd, DD MMM YYYY"))}  `,description:"",position:"top-right"});return}else if(this.adultChildCount.adult===0){this.toast.emit({type:"error",title:b.entries.Lcz_PlzSelectNumberOfGuests,description:"",position:"top-right"});this.animateIrSelect.emit("adult_child_select")}else{this.buttonClicked.emit({key:"check"})}}else if(this.minDate&&new Date(this.dateRangeData.fromDate).getTime()>new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date).getTime()){this.toast.emit({type:"error",title:`${b.entries.Lcz_CheckInDateShouldBeMAx.replace("%1",O(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date)).format("ddd, DD MMM YYYY")).replace("%2",O(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date)).format("ddd, DD MMM YYYY"))}  `,description:"",position:"top-right"})}else if(this.adultChildCount.adult===0){this.animateIrSelect.emit("adult_child_select");this.toast.emit({type:"error",title:b.entries.Lcz_PlzSelectNumberOfGuests,description:"",position:"top-right"})}else{this.buttonClicked.emit({key:"check"})}}isEventType(t){return this.bookingData.event_type===t}render(){const t=this.showSplitBookingOption?this.getSplitBookingList():this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")?false:true;return e(i,{key:"8a493acd5162c153bf1bb75c08113952db1f21a4"},this.isEventType("SPLIT_BOOKING")&&this.getSplitBookingList(),t&&this.getSourceNode(),e("div",{key:"1d85800c0e2f7527c8498b258678dc82dfa8deed",class:`d-flex flex-column flex-lg-row align-items-lg-center ${t?"mt-1":""}`},e("fieldset",{key:"b51396939774c316305b0f0ff7b41c75aa3adbf5",class:"mt-lg-0 mr-1 "},e("igl-date-range",{key:"78bdf78a5066582d1d0b8c81dd3396ead4b6e611","data-testid":"date_picker",variant:"booking",dateLabel:b.entries.Lcz_Dates,minDate:this.isEventType("PLUS_BOOKING")?O().add(-1,"months").startOf("month").format("YYYY-MM-DD"):this.minDate,disabled:this.isEventType("BAR_BOOKING")||this.isEventType("SPLIT_BOOKING"),defaultData:this.bookingDataDefaultDateRange})),!this.isEventType("EDIT_BOOKING")&&this.getAdultChildConstraints()),e("p",{key:"062c9d04f0e9692a52da6f4a96c7503ecb7847f2",class:"text-right mt-1 message-label"},u.tax_statement))}};S.style=R;const P=".sc-igl-booking-form-h{display:block}.card-title.sc-igl-booking-form{border-bottom:1px solid #e4e5ec}.scrollContent.sc-igl-booking-form{height:calc(100% - 79px);overflow:auto;position:relative}.background-overlay.sc-igl-booking-form{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.25)}.formContainer.sc-igl-booking-form{height:calc(100% - 79px);overflow:auto}.sideWindow.sc-igl-booking-form{position:absolute;top:0;right:0;height:100%;background-color:#ffffff}.close.sc-igl-booking-form{float:right;font-size:1.5rem;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:0.5;padding:0;background-color:transparent;border:0;appearance:none}.close-icon.sc-igl-booking-form{position:absolute;top:18px;right:33px;outline:none}button.sc-igl-booking-form:not(:disabled),[type='button'].sc-igl-booking-form:not(:disabled){cursor:pointer}.row.sc-igl-booking-form{padding:0 0 0 15px;margin:0}";const K=class{constructor(e){t(this,e);this.dataUpdateEvent=s(this,"dataUpdateEvent");this.buttonClicked=s(this,"buttonClicked");this.selectedUnits={}}componentWillLoad(){this.initializeGuestData();this.selectedBookedByData=this.bookedByInfoData}initializeGuestData(){let t=0;const e=Object.assign({},this.selectedUnits);const i=(t,e,i,s)=>{if(i&&s===2){return t*e}return t};this.selectedUnits=e;this.guestData=[];this.selectedRooms.forEach(((s,o)=>{s.forEach((s=>{e[o]=s.selectedUnits;t+=s.totalRooms*i(s.rate,this.dateRangeData.dateDifference,s.isRateModified,s.rateType);for(let t=1;t<=s.totalRooms;t++){this.guestData.push(Object.assign({guestName:"",roomId:"",preference:""},s))}}))}));this.bookingData.TOTAL_PRICE=t}handleOnApplicationInfoDataUpdateEvent(t,e){const i=t.detail;const s=`c_${i.data.roomCategoryId}`;const o=[...this.selectedUnits[s]||[]];o[e]=i.data.roomId;this.selectedUnits=Object.assign(Object.assign({},this.selectedUnits),{[s]:o});this.dataUpdateEvent.emit({key:"applicationInfoUpdateEvent",value:t.detail})}handleEventData(t,e,i){if(e==="application-info"){this.handleOnApplicationInfoDataUpdateEvent(t,i)}else{this.selectedBookedByData=t.detail.data;this.dataUpdateEvent.emit({key:"propertyBookedBy",value:t.detail})}}isGuestDataIncomplete(){if(this.selectedGuestData.length!==this.guestData.length){return true}for(const t of this.selectedGuestData){if(t.guestName===""||t.preference===""||t.roomId===""){return true}}return false}isButtonDisabled(t){const e=(t,e,i)=>{if(!t){return true}if(t===this.selectedGuestData){return this.isGuestDataIncomplete()}if(e==="selectedArrivalTime"){if(t[e]!==undefined){return t[e].code===""}else{return true}}return t[e]===i||t[e]===undefined};return this.isLoading===t||e(this.selectedGuestData,"guestName","")||e(this.selectedBookedByData,"isdCode","")||e(this.selectedBookedByData,"contactNumber","")||e(this.selectedBookedByData,"firstName","")||e(this.selectedBookedByData,"lastName","")||e(this.selectedBookedByData,"countryId",-1)||e(this.selectedBookedByData,"selectedArrivalTime","")||e(this.selectedBookedByData,"email","")}render(){var t;const s=u.checkin_enabled&&O(new Date((t=this.dateRangeData)===null||t===void 0?void 0:t.fromDate)).isSame(new Date,"day");return e(i,{key:"b006227d7799b892b3bb77beb01932dc377c44a1"},e("div",{key:"52b4393b6381b33637b0e960bdeac72c0ffef0e8",class:"d-flex flex-wrap"},e("ir-date-view",{key:"5e8ba63981ced2490f8ddea41aa2b8534cd26e15",class:"mr-1 flex-fill font-weight-bold font-medium-1",from_date:new Date(this.dateRangeData.fromDate),to_date:new Date(this.dateRangeData.toDate),dateOption:"DD MMM YYYY"}),this.guestData.length>1&&e("div",{key:"7834026eafa418457dc77da4f5101eea53977384",class:"mt-1 mt-md-0 text-right"},b.entries.Lcz_TotalPrice," ",e("span",{key:"63c7460a8ecd1266d491ada9af771734e97f59f2",class:"font-weight-bold font-medium-1"},m(this.currency.symbol,this.bookingData.TOTAL_PRICE||"0")))),Object.values(a.ratePlanSelections).map((t=>Object.values(t).map((t=>{const i=t;if(i.reserved===0){return null}return[...new Array(i.reserved)].map(((t,s)=>e("igl-application-info",{totalNights:Number(this.dateRangeData.dateDifference),bedPreferenceType:this.bedPreferenceType,currency:this.currency,guestInfo:i.guest?i.guest[s]:null,bookingType:this.bookingData.event_type,rateplanSelection:i,key:`${i.ratePlan.id}_${s}`,roomIndex:s,baseData:this.bookingData.event_type==="EDIT_BOOKING"?{roomtypeId:this.bookingData.currentRoomType.roomtype.id,unit:this.bookingData.currentRoomType.unit}:undefined})))})))),this.isEditOrAddRoomEvent||this.showSplitBookingOption?null:e("igl-property-booked-by",{propertyId:this.propertyId,countries:this.countries,language:this.language,showPaymentDetails:this.showPaymentDetails,defaultData:this.bookedByInfoData,onDataUpdateEvent:t=>{this.handleEventData(t,"propertyBookedBy",0)}}),this.isEditOrAddRoomEvent?e("div",{class:"d-flex p-0 mb-1 mt-2"},e("div",{class:"flex-fill mr-2"},e("ir-button",{icon:"",text:b.entries.Lcz_Back,class:"full-width",btn_color:"secondary",btn_styles:"justify-content-center",onClickHandler:()=>this.buttonClicked.emit({key:"back"})})),e("div",{class:"flex-fill"},e("ir-button",{isLoading:this.isLoading==="save",onClickHandler:()=>this.buttonClicked.emit({key:"save"}),btn_styles:"full-width align-items-center justify-content-center",text:b.entries.Lcz_Save}))):e("div",{class:"d-flex flex-column flex-md-row p-0 mb-1 mt-2 justify-content-md-between align-items-md-center"},e("div",{class:"flex-fill mr-md-1"},e("ir-button",{icon_name:"angles_left",btn_color:"secondary",btn_styles:"full-width align-items-center justify-content-center",onClickHandler:()=>this.buttonClicked.emit({key:"back"}),text:b.entries.Lcz_Back,style:{"--icon-size":"1rem"},icon_style:{paddingBottom:"1.9px"}})),e("div",{class:`mt-1 mt-md-0 flex-fill ${s?"mr-md-1":""}`},e("ir-button",{isLoading:this.isLoading==="book",btn_styles:"full-width align-items-center justify-content-center",onClickHandler:()=>this.buttonClicked.emit({key:"book"}),text:b.entries.Lcz_Book})),s&&e("div",{class:"mt-1 mt-md-0 flex-fill"},e("ir-button",{isLoading:this.isLoading==="bookAndCheckIn",btn_styles:"full-width align-items-center justify-content-center",onClickHandler:()=>this.buttonClicked.emit({key:"bookAndCheckIn"}),text:b.entries.Lcz_BookAndChekcIn}))))}};K.style=P;const $=".sc-igl-booking-overview-page-h{display:block}.sc-igl-booking-overview-page-h>*.sc-igl-booking-overview-page{margin:0;padding:auto}.scrollContent.sc-igl-booking-overview-page{height:calc(100% - 79px);overflow:auto;position:relative}.loading-container.sc-igl-booking-overview-page{display:flex;align-items:center;justify-content:center;height:100%;background:white;position:absolute;inset:0;z-index:100}.loader.sc-igl-booking-overview-page{width:1.25rem;height:1.25rem;border:2.5px solid #3f3f3f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}";const L=class{constructor(e){t(this,e);this.roomsDataUpdate=s(this,"roomsDataUpdate")}getSplitBookings(){return this.bookingData.hasOwnProperty("splitBookingEvents")&&this.bookingData.splitBookingEvents||[]}isEventType(t){return t===this.eventType}setMinDate(){if(!this.isEventType("EDIT_BOOKING")){return}const t=O(this.bookingData.FROM_DATE,"YYYY-MM-DD");const e=O();if(t.isAfter(e)){return e.add(-2,"weeks").format("YYYY-MM-DD")}return t.add(-2,"weeks").format("YYYY-MM-DD")}render(){var t;return e(i,{key:"b149601d0138600cbb20a9c3f577b85246ca3660"},e("igl-book-property-header",{key:"6aec6ccf96001b3a478a1ee83d3a083a97b9bfe4",bookedByInfoData:this.bookedByInfoData,defaultDaterange:this.defaultDaterange,dateRangeData:this.dateRangeData,minDate:this.setMinDate(),adultChildCount:this.adultChildCount,splitBookingId:this.showSplitBookingOption,bookingData:this.bookingData,sourceOptions:this.sourceOptions,message:this.message,bookingDataDefaultDateRange:this.bookingData.defaultDateRange,showSplitBookingOption:this.showSplitBookingOption,adultChildConstraints:this.adultChildConstraints,splitBookings:this.getSplitBookings(),propertyId:this.propertyId}),e("div",{key:"75b76ec416d05336f7ad94f68f1e04ce4bf08687",class:" text-left"},w("/Check_Availability")&&this.isEventType("EDIT_BOOKING")?e("div",{class:"loading-container"},e("div",{class:"loader"})):e(o,null,(t=a.roomTypes)===null||t===void 0?void 0:t.map((t=>e("igl-room-type",{initialRoomIds:this.initialRoomIds,isBookDisabled:Object.keys(this.bookedByInfoData).length<=1,key:`room-type-${t.id}`,currency:this.currency,ratePricingMode:this.ratePricingMode,dateDifference:this.dateRangeData.dateDifference,bookingType:this.bookingData.event_type,roomType:t,class:"mt-2 mb-1 p-0","data-testid":`room_type_${t.id}`,id:t.id.toString(),roomInfoId:this.selectedRooms.has(`c_${t.id}`)?t.id:null,onDataUpdateEvent:t=>this.roomsDataUpdate.emit(t.detail)}))))),e("igl-book-property-footer",{key:"b12d6b4eb25a8e0c5fe950e7d727e98277207873",class:"p-0 mb-1 mt-3",eventType:this.bookingData.event_type}))}};L.style=$;const U=".sc-igl-property-booked-by-h{display:block}.row.sc-igl-property-booked-by{padding:0 0 0 15px;margin:0}.bookedByEmailContainer.sc-igl-property-booked-by{flex:auto;max-width:350px}.bookedDetailsForm.sc-igl-property-booked-by label.sc-igl-property-booked-by{min-width:125px;max-width:125px}.row.sc-igl-booking-form.sc-igl-property-booked-by{padding:0 !important}.bookedDetailsForm.sc-igl-property-booked-by .form-group.sc-igl-property-booked-by{margin-bottom:10px !important}.bookedDetailsForm.sc-igl-property-booked-by .checkBoxContainer.sc-igl-property-booked-by input.sc-igl-property-booked-by{height:1.2rem !important;width:30px}.controlContainer.sc-igl-property-booked-by textarea.sc-igl-property-booked-by{height:60px !important}.margin3.sc-igl-property-booked-by{margin-bottom:5px !important}@media (min-width: 768px){.bookedByEmailContainer.sc-igl-property-booked-by{margin-left:37px}}";const z=class{constructor(e){t(this,e);this.dataUpdateEvent=s(this,"dataUpdateEvent");this.showPaymentDetails=false;this.countries=[];this.isButtonPressed=false;this.bookingService=new l;this.arrivalTimeList=[];this.expiryMonths=["01","02","03","04","05","06","07","08","09","10","11","12"];this.expiryYears=[];this.currentMonth="01";this.bookedByData={id:undefined,email:"",firstName:"",lastName:"",countryId:"",isdCode:"",contactNumber:"",selectedArrivalTime:"",emailGuest:false,message:"",cardNumber:"",cardHolderName:"",expiryMonth:"",expiryYear:""}}async componentWillLoad(){this.assignCountryCode();this.initializeExpiryYears();this.initializeDateData();this.populateBookedByData()}initializeExpiryYears(){const t=(new Date).getFullYear();this.expiryYears=Array.from({length:4},((e,i)=>(t+i).toString()))}async assignCountryCode(){const t=await this.bookingService.getUserDefaultCountry();const e=t["COUNTRY_ID"];this.country=e;this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{isdCode:e.toString(),countryId:e})}initializeDateData(){const t=new Date;const e=t.getMonth()+1;this.currentMonth=e<10?`0${e}`:e.toString()}populateBookedByData(){var t;this.bookedByData=this.defaultData?Object.assign(Object.assign({},this.bookedByData),this.defaultData):{};this.arrivalTimeList=((t=this.defaultData)===null||t===void 0?void 0:t.arrivalTime)||[];this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{selectedArrivalTime:this.arrivalTimeList[0].CODE_NAME});if(!this.bookedByData.expiryMonth){this.bookedByData.expiryMonth=this.currentMonth}if(!this.bookedByData.expiryYear){this.bookedByData.expiryYear=(new Date).getFullYear()}console.log("initial bookedby data",this.bookedByData)}handleDataChange(t,e){this.bookedByData[t]=t==="emailGuest"?e.target.checked:e.target.value;this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)});if(t==="countryId"){this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{isdCode:e.target.value})}}handleCountryChange(t){this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{isdCode:t,countryId:t});this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)})}handleNumberInput(t,e){const i=e.target;const s=i.value;const o=/^[0-9]+$/;if(!o.test(s)){i.value=s.replace(/[^0-9]/g,"")}if(s===i.value){this.handleDataChange(t,e)}}async checkUser(){var t;try{const e=this.bookedByData.email;if(D.z.string().email().safeParse(e).success){const i=await this.bookingService.getUserInfo(e);if(i!==null){this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:i.id,firstName:i.first_name,lastName:i.last_name,contactNumber:i.mobile_without_prefix,countryId:i.country_id,isdCode:(t=i===null||i===void 0?void 0:i.country_phone_prefix)!==null&&t!==void 0?t:i.isdCode.toString()});console.log(this.bookedByData)}else{let t=Object.assign({},this.bookedByData);t=Object.assign(Object.assign({},t),{email:e});this.bookedByData=Object.assign({},t)}}else{let t=Object.assign({},this.bookedByData);t=Object.assign(Object.assign({},t),{email:""});this.bookedByData=Object.assign({},t)}this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)})}catch(t){}}updateGuest(t){var e;n("checkout_guest",Object.assign(Object.assign({},(e=a.checkout_guest)!==null&&e!==void 0?e:{}),t))}handleComboboxChange(t){var e;t.stopImmediatePropagation();t.stopPropagation();const{key:i,data:s}=t.detail;console.log(i,s);if(i==="blur"){if(D.z.string().email().safeParse(s).success){this.bookedByData.email=s;this.checkUser()}else if(this.bookedByData.email!==""&&s==""){this.bookedByData.email=""}this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:this.bookedByData})}if(i==="select"){this.bookedByData.email=s.email;this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:s.id,firstName:s.first_name,lastName:s.last_name,contactNumber:s.mobile_without_prefix,countryId:s.country_id,isdCode:(e=s["country_phone_prefix"])!==null&&e!==void 0?e:s===null||s===void 0?void 0:s.country_id});this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:this.bookedByData})}}clearEvent(){this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:"",firstName:"",lastName:"",contactNumber:"",isdCode:this.country.toString(),countryId:this.country});this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)})}handleButtonClicked(t){switch(t.detail.key){case"book":case"bookAndCheckIn":this.isButtonPressed=true;break}}render(){return e(i,{key:"dbcb2886c6205445c06421f5efd507c627ac395c"},e("div",{key:"be496477079a9f3e693409be7995db6d7cd9ccd0",class:"text-left mt-3"},e("div",{key:"733c122de9464f20a51e0ccb7666349b090052f1",class:"form-group d-flex flex-column flex-md-row align-items-md-center text-left "},e("label",{key:"c0ed8d8d216e556a89444a3b16a99a3670ff67d4",class:"p-0 m-0 label-control mr-1 font-weight-bold"},b.entries.Lcz_BookedBy),e("div",{key:"4b4bd722d9d4a98a366fa41dffc76fba398ed118",class:"bookedByEmailContainer mt-1 mt-md-0 d-flex align-items-center"},e("ir-autocomplete",{key:"6bec57d062768296a6399b360196284f47f79a46",testId:"main_guest_email",onComboboxValue:this.handleComboboxChange.bind(this),propertyId:this.propertyId,type:"text",value:this.bookedByData.email,required:true,class:"flex-fill",placeholder:b.entries.Lcz_FindEmailAddress,onInputCleared:()=>this.clearEvent(),danger_border:this.isButtonPressed&&this.bookedByData.email!==""&&_(this.bookedByData.email)}),e("ir-tooltip",{key:"9ae4168bd792220b85c996d178a223843a4602f5",class:"ml-1",message:"Leave empty if email is unavailable"})))),e("div",{key:"a9e0a25ed45100262a1cbcc883d0d517861a2b15",class:"bookedDetailsForm text-left mt-2 font-small-3 "},e("div",{key:"c64f1b4f7c653153daf4f0a681d853ad0b86a2d7",class:"d-flex flex-column flex-md-row  justify-content-md-between "},e("div",{key:"ace0d4b53711dc674a4cde450ae7c25b48923b86",class:"p-0 flex-fill "},e("div",{key:"74a7c16763d2cef0910b5f594112c1206671c074",class:"form-group d-flex flex-column flex-md-row align-items-md-center p-0 flex-fill "},e("label",{key:"e5f7aebebe228b51a81a4355c55084ed750d1005",class:"p-0 m-0 margin3"},b.entries.Lcz_FirstName),e("div",{key:"76e0b7cd183f7a33b8398900525c25548f0610b6",class:"p-0 m-0  controlContainer flex-fill  "},e("input",{key:"b17a14a95fff49bd1ad22bcf4ca8c3fffdf37a52","data-testid":"main_guest_first_name",class:`form-control flex-fill ${this.isButtonPressed&&this.bookedByData.firstName===""&&"border-danger"}`,type:"text",placeholder:b.entries.Lcz_FirstName,id:x(),value:this.bookedByData.firstName,onInput:t=>{this.updateGuest({first_name:t.target.value});this.handleDataChange("firstName",t)},required:true}))),e("div",{key:"437ff3e59d08ffd9c3b2db5da6db388046ec6392",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{key:"1300eed5ef42f9ae73a1857399fcdb9e61438d7f",class:"p-0 m-0 margin3"},b.entries.Lcz_LastName),e("div",{key:"6825ae60afbcef09179895df8a4506517762fe4d",class:"p-0 m-0  controlContainer flex-fill"},e("input",{key:"185fc39e67771117de235d1106ecc637561e9974","data-testid":"main_guest_last_name",class:`form-control ${this.isButtonPressed&&this.bookedByData.lastName===""&&"border-danger"}`,type:"text",placeholder:b.entries.Lcz_LastName,id:x(),value:this.bookedByData.lastName,onInput:t=>this.handleDataChange("lastName",t)}))),e("div",{key:"6c88298b9592d4e6581432f3bc15b216776729f6",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{key:"28cffea4ffb663e60577487cbc87a29afa0800ab",class:"p-0 m-0 margin3"},b.entries.Lcz_Country),e("ir-country-picker",{key:"ee5197271d92523f841c540e30ca65093120f977",testId:"main_guest_country",class:"flex-grow-1 m-0",onCountryChange:t=>this.handleCountryChange(t.detail.id),countries:this.countries,country:this.countries.find((t=>t.id===this.bookedByData.countryId))})),e("div",{key:"944d8c4efd9bb035df3b5963f1dcb56247627d21",class:"form-group p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{key:"ddf57b2ecaa34727f5b00bc487141bfe9b9390cd",class:"p-0 m-0 margin3"},b.entries.Lcz_MobilePhone),e("div",{key:"7b5589ef74bcfde9bb085e52c4a18e5650c2fe8f",class:"p-0 m-0 controlContainer flex-fill"},e("ir-phone-input",{key:"ff37329779dfcf42dfce59807d3623220ad418a5",testId:"main_guest_phone",language:this.language,value:this.bookedByData.contactNumber,phone_prefix:this.bookedByData.isdCode,default_country:this.bookedByData.countryId,onTextChange:t=>{this.handleDataChange("isdCode",{target:{value:t.detail.phone_prefix}});this.handleDataChange("contactNumber",{target:{value:t.detail.mobile}})}}))),e("div",{key:"4e5b41e8ccb9d7151e44aa927e4564b627273e79",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{key:"12871cf6abe76fa8a22d2a361501a50ee7c0a3c3",class:"p-0 m-0 margin3"},b.entries.Lcz_YourArrivalTime),e("div",{key:"320be9468c2529bc0898781696f6d2d03bdef124",class:"p-0 m-0  controlContainer flex-fill"},e("select",{key:"52d1548ae9e4945824c6cd67f60997dd3ad33c97","data-testid":"arrival_time",class:`form-control input-sm pr-0 ${this.isButtonPressed&&this.bookedByData.selectedArrivalTime.code===""&&"border-danger"}`,id:x(),onChange:t=>this.handleDataChange("selectedArrivalTime",t)},this.arrivalTimeList.map((t=>e("option",{value:t.CODE_NAME,selected:this.bookedByData.selectedArrivalTime.code===t.CODE_NAME},t.CODE_VALUE_EN))))))),e("div",{key:"d63da0acc1d08e4d134323dc81a95dcff0e1516c",class:"p-0 flex-fill  ml-md-3"},e("div",{key:"dfab9d501502b1fb5b6760eca5fac7c2e070129b",class:"  p-0 d-flex flex-column flex-md-row align-items-md-center "},e("label",{key:"c1d9474e1b6ca51f42346112842834b5c44f768f",class:"p-0 m-0 margin3"},b.entries.Lcz_AnyMessageForUs),e("div",{key:"dcf004afd641350d0f38b64b9a9dcef0759f591d",class:"p-0 m-0  controlContainer flex-fill "},e("textarea",{key:"1573809bd4d40bd309fbf62cbbd6c172f17e59a0","data-testid":"note",id:x(),rows:4,class:"form-control ",name:"message",value:this.bookedByData.message,onInput:t=>this.handleDataChange("message",t)}))),this.showPaymentDetails&&e(o,{key:"55115690403ca32153c9089ff67f1fb01bcf364f"},e("div",{key:"816db14460c9d0e3a971a9944a7c3ead1778a027",class:"form-group mt-md-1  p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{key:"d2e3ecea48a62e130cdc0bf28b952d2eaf470d85",class:"p-0 m-0 margin3"},b.entries.Lcz_CardNumber),e("div",{key:"7292d3acca38da8e54a18fe7bb9b80560a3090cb",class:"p-0 m-0  controlContainer flex-fill"},e("input",{key:"aad5a7b9b8f33ba7ec2e4b8a6bebf8bd502f0d90",class:"form-control",type:"text",placeholder:"",pattern:"0-9 ",id:x(),value:this.bookedByData.cardNumber,onInput:t=>this.handleNumberInput("cardNumber",t)}))),e("div",{key:"91574942a6d4ad2e2b29f68ee852c05512214c15",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{key:"90f839c725bcf3f5255698f37675a6f7e873d450",class:"p-0 m-0 margin3"},b.entries.Lcz_CardHolderName),e("div",{key:"eaf4ea1468797eb56341655eaeee000951f3c672",class:"p-0 m-0  controlContainer flex-fill"},e("input",{key:"26e4b07708d9e6a9f6fbeb26ad0a4aa76dc2c771",class:"form-control",type:"text",placeholder:"",pattern:"0-9 ",id:x(),value:this.bookedByData.cardHolderName,onInput:t=>this.handleDataChange("cardHolderName",t)}))),e("div",{key:"dc7bd5262030ef8dd2ba3ee818f0bc8ad091f795",class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{key:"09e241c4e8cd005ffbcf5dcafa514eeccea5946f",class:"p-0 m-0 margin3"},b.entries.Lcz_ExpiryDate),e("div",{key:"4e7c1cb3fe57039abf5eb01dcb6d91822990af09",class:"p-0 m-0 row  controlContainer flex-fill"},e("div",{key:"0be9deda49ad550e1d8e066b8e66e0971d77a08c",class:"p-0 m-0"},e("select",{key:"efd8ea8e1ef4578458c621984b0312721c5ed856",class:"form-control input-sm pr-0",id:x(),onChange:t=>this.handleDataChange("expiryMonth",t)},this.expiryMonths.map((t=>e("option",{value:t,selected:t===this.bookedByData.expiryMonth},t))))),e("div",{key:"210f7b0e23119654747c55bc8b012841bb1ddd92",class:"p-0 m-0 ml-1"},e("select",{key:"72dda6b9fd99d4b1483acfc14a2bf158a64f059c",class:"form-control input-sm pr-0",id:x(),onChange:t=>this.handleDataChange("expiryYear",t)},this.expiryYears.map(((t,i)=>e("option",{value:t,selected:i===this.bookedByData.expiryYear},t)))))))),e("div",{key:"e71a6e88aa0f05dcad1854d7b43439340a7b2861",class:"form-group mt-1 p-0 d-flex flex-row align-items-center"},e("label",{key:"a93837531cc88aa09cff62d7789121a815fd218c",class:"p-0 m-0",htmlFor:"emailTheGuestId"},b.entries.Lcz_EmailTheGuest),e("div",{key:"503228d349ff709a5648193fdb8dea351e67f92b",class:"p-0 m-0  controlContainer flex-fill checkBoxContainer"},e("input",{key:"7b91131274cf35ac29500b71c5efd968af563841",class:"form-control",type:"checkbox",checked:this.bookedByData.emailGuest,id:"emailTheGuestId",onChange:t=>this.handleDataChange("emailGuest",t)})))))))}};z.style=U;const V=".sc-igl-rate-plan-h{display:block;margin-bottom:0.5rem}.currency.sc-igl-rate-plan{display:block;position:absolute;margin:0;padding:0;height:auto;left:10px}.rate-input.sc-igl-rate-plan{font-size:14px;line-height:0;padding:0;height:0;border-left:0}.rate-input-container.sc-igl-rate-plan{display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;flex:1}.new-currency.sc-igl-rate-plan{color:#3b4781;border:1px solid #cacfe7;font-size:0.975rem;height:2rem;background:white;border-right:0;border-top-right-radius:0;border-bottom-right-radius:0;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.input-group-prepend.sc-igl-rate-plan span[data-state='focus'].sc-igl-rate-plan{border-color:var(--blue)}.input-group-prepend.sc-igl-rate-plan span[data-disabled].sc-igl-rate-plan{background-color:#eceff1;border-color:rgba(118, 118, 118, 0.3)}.non-ref-span.sc-igl-rate-plan{font-size:12px;color:var(--green)}.rateplan-name-container.sc-igl-rate-plan{margin-bottom:0.5rem !important}.rateplan-container.sc-igl-rate-plan{margin-top:0.5rem}@media only screen and (min-width: 1200px){.rateplan-name-container.sc-igl-rate-plan{width:40%;margin-top:0}.rateplan-container.sc-igl-rate-plan{width:40%}}@media only screen and (min-width: 991px){.max-w-300.sc-igl-rate-plan{max-width:200px}.rate-input-container.sc-igl-rate-plan{max-width:50px}.rateplan-name-container.sc-igl-rate-plan{margin-bottom:0 !important}}@media only screen and (min-width: 991px) and (max-width: 1300px){.rateplan-name-container.sc-igl-rate-plan{width:40%}.price-amount.sc-igl-rate-plan{max-width:150px !important}}@media only screen and (max-width: 768px){.booking-btn.sc-igl-rate-plan{width:100%}}.total-nights-container.sc-igl-rate-plan{width:max-content}.nightBorder.sc-igl-rate-plan{border-left-width:0;border-top-right-radius:3px !important;border-bottom-right-radius:3px !important}";const H=class{constructor(e){t(this,e);this.buttonClicked=s(this,"buttonClicked");this.ratePricingMode=[];this.bookingType="PLUS_BOOKING";this.isBookDisabled=false}disableForm(){const{bookingType:t,shouldBeDisabled:e,ratePlan:i,visibleInventory:s}=this;if(t==="EDIT_BOOKING"&&e){return false}return!i.is_available_to_book||(s===null||s===void 0?void 0:s.visibleInventory)===0}updateRateplanSelection(t){const{roomTypeId:e,ratePlan:i}=this;const s=a.ratePlanSelections;a.ratePlanSelections=Object.assign(Object.assign({},s),{[e]:Object.assign(Object.assign({},s[e]),{[i.id]:Object.assign(Object.assign({},s[e][i.id]),t)})})}handleDataChange(t,e){const i=e.target.value;if(t==="adult_child_offering"){this.handleVariationChange(i)}else if(t==="rate"){this.updateRateplanSelection({view_mode:i})}else if(t==="totalRooms"){c({roomTypeId:this.roomTypeId,ratePlanId:this.ratePlan.id,rooms:Number(i)})}}bookProperty(){if(this.bookingType==="BAR_BOOKING"){this.resetReserved()}this.reserveRoom();this.buttonClicked.emit({key:"next"})}reserveRoom(){var t,e,i,s,o;c({roomTypeId:this.roomTypeId,ratePlanId:this.ratePlan.id,rooms:1,guest:[{last_name:(t=a.guest)===null||t===void 0?void 0:t.last_name,first_name:(e=a.guest)===null||e===void 0?void 0:e.first_name,unit:this.roomTypeId===((i=a.guest)===null||i===void 0?void 0:i.roomtype_id)?(s=a.guest)===null||s===void 0?void 0:s.unit:null,bed_preference:this.visibleInventory.roomtype.is_bed_configuration_enabled?(o=a.guest)===null||o===void 0?void 0:o.bed_preference:null,infant_nbr:this.visibleInventory.selected_variation.child_nbr>0?a.guest.infant_nbr:null}]})}renderRate(){const{visibleInventory:t}=this;if(!t)return"";if(t.is_amount_modified){return t.rp_amount.toString()}const{selected_variation:e,view_mode:i}=t;const s=i==="001"?e===null||e===void 0?void 0:e.discounted_amount:e===null||e===void 0?void 0:e.amount_per_night_gross;return(s===null||s===void 0?void 0:s.toString())||""}formatVariation(t){var e,i,s,o;if(!t)return"";const a=`${t.adult_nbr} ${t.adult_nbr===1?(e=b.entries["Lcz_Adult"])===null||e===void 0?void 0:e.toLowerCase():(i=b.entries["Lcz_Adults"])===null||i===void 0?void 0:i.toLowerCase()}`;const n=t.child_nbr>0?`${t.child_nbr} ${t.child_nbr>1?(s=b.entries["Lcz_Children"])===null||s===void 0?void 0:s.toLowerCase():(o=b.entries["Lcz_Child"])===null||o===void 0?void 0:o.toLowerCase()}`:"";return n?`${a} ${n}`:a}getTooltipMessages(){var t,e,i,s,o;const{ratePlan:a,visibleInventory:n}=this;const l=n===null||n===void 0?void 0:n.selected_variation;if(!l)return;const d=(t=a.variations)===null||t===void 0?void 0:t.find((t=>this.formatVariation(t)===this.formatVariation(l)));if(!d)return;const r=(i=(e=d.applicable_policies)===null||e===void 0?void 0:e.find((t=>t.type==="cancelation")))===null||i===void 0?void 0:i.combined_statement;const c=(o=(s=d.applicable_policies)===null||s===void 0?void 0:s.find((t=>t.type==="guarantee")))===null||o===void 0?void 0:o.combined_statement;let h="";if(r){h+=`<b><u>Cancellation:</u></b> ${r}<br/>`}if(c){h+=`<b><u>Guarantee:</u></b> ${c}`}return h||undefined}async handleVariationChange(t){const{ratePlan:e,roomTypeId:i}=this;const s=e.variations||[];const o=s.find((e=>this.formatVariation(e)===t));if(!o)return;h({params:{selected_variation:o},ratePlanId:e.id,roomTypeId:i})}resetReserved(){const t=Object.entries(a.ratePlanSelections).reduce(((t,[e,i])=>{t[e]=Object.entries(i).reduce(((t,[e,i])=>{t[e]=Object.assign(Object.assign({},i),{reserved:0});return t}),{});return t}),{});a.ratePlanSelections=t}render(){var t,s,a;const{ratePlan:n,bookingType:l,currency:d,ratePricingMode:r,visibleInventory:c}=this;const h=n.is_available_to_book;const f=this.disableForm();const p=c===null||c===void 0?void 0:c.selected_variation;const u=(t=n.variations)===null||t===void 0?void 0:t.map((t=>this.formatVariation(t)));return e(i,{key:"fdcd41d62f90a01ae2121f8a38d8164da4c5f18a","data-testid":`rp-${this.ratePlan.id}`},e("div",{key:"aa2aa994a45c1c08fb8a1ebb35beabf951858792",class:`d-flex mt-1  p-0 ${h?"flex-column flex-lg-row align-items-lg-center justify-content-lg-between":"align-items-center justify-content-between"}`},e("div",{key:"4c7e4665f9be6bb44c174fcec0b20c8a0cf64fe2","data-testid":"rp_name",class:"rateplan-name-container m-0 p-0  d-flex align-items-center",style:{gap:"0.5rem"}},l==="BAR_BOOKING"?e("p",{class:"m-0 p-0"},e("span",null,n.name.split("/")[1]," ",n.is_non_refundable&&e("span",{class:"non-ref-span"},"Non Refundable"))):e("span",null,n.short_name," ",n.is_non_refundable&&e("span",{class:"non-ref-span"},"Non Refundable")),h&&e("ir-tooltip",{key:"8a64b7d0b8af5b971b30fc4506c8cd774443b33f",message:this.getTooltipMessages()})),h?e("div",{class:"d-md-flex m-md-0  justify-content-md-end align-items-md-center flex-fill rateplan-container"},e("div",{class:"flex-fill max-w-300 flex-grow-1"},e("fieldset",{class:"position-relative flex-grow-1 w-100"},e("select",{disabled:f,"data-testid":"adult-child-offering",class:"form-control input-sm flex-grow-1 w-100",id:x(),onChange:t=>this.handleDataChange("adult_child_offering",t)},u===null||u===void 0?void 0:u.map((t=>e("option",{value:t,selected:this.formatVariation(p)===t},t)))))),e("div",{class:"m-0 p-0 mt-1 mt-md-0 d-flex justify-content-between align-items-md-center ml-md-1"},e("div",{class:"d-flex m-0 p-0 rate-total-night-view mt-0 flex-grow-1"},e("ir-price-input",{testId:"amount_input",disabled:f,onTextChange:t=>this.updateRateplanSelection({is_amount_modified:true,rp_amount:Number(t.detail)}),"aria-label":`${(a=(s=this.visibleInventory)===null||s===void 0?void 0:s.roomtype)===null||a===void 0?void 0:a.name} ${this.ratePlan.short_name}'s rate`,"aria-describedby":`${this.ratePlan.short_name}'s rate`,class:"ir-br-input-none price-amount w-100 flex-grow-1",currency:d.symbol,value:this.renderRate(),placeholder:b.entries.Lcz_Rate||"Rate"}),e("fieldset",{class:"position-relative m-0 total-nights-container p-0"},e("select",{"data-testid":"nigh_stay_select",disabled:f,class:"form-control input-sm m-0 nightBorder rounded-0 py-0",id:x(),onChange:t=>this.updateRateplanSelection({view_mode:t.target.value})},r.map((t=>e("option",{value:t.CODE_NAME,selected:(c===null||c===void 0?void 0:c.view_mode)===t.CODE_NAME},t.CODE_VALUE_EN)))))),(l==="PLUS_BOOKING"||l==="ADD_ROOM")&&e("div",{class:"flex-fill mt-0 ml-1 m-0 mt-md-0 p-0"},e("fieldset",{class:"position-relative"},e("select",{"data-testid":"inventory_select",disabled:c.visibleInventory===0,class:"form-control input-sm",id:x(),onChange:t=>this.handleDataChange("totalRooms",t)},Array.from({length:(c.visibleInventory||0)+1},((t,e)=>e)).map((t=>e("option",{value:t,selected:c.reserved===t},t))))))),l==="EDIT_BOOKING"&&e(o,null,e("div",{class:"m-0 p-0 ml-md-1 mt-md-0 d-none d-md-block"},e("fieldset",{class:"position-relative"},e("input",{"data-testid":"inventory_radio",disabled:f,type:"radio",name:"ratePlanGroup",value:"1",onChange:()=>{this.resetReserved();this.reserveRoom()},checked:c.reserved===1}))),e("button",{"data-testid":"book_property",disabled:f,type:"button",class:"btn btn-primary booking-btn mt-lg-0 btn-sm ml-md-1 mt-1 d-md-none",onClick:()=>{this.resetReserved();this.reserveRoom();this.bookProperty()}},c.reserved===1?b.entries.Lcz_Current:b.entries.Lcz_Select)),(l==="BAR_BOOKING"||l==="SPLIT_BOOKING")&&e("button",{"data-testid":"book",disabled:f||l==="SPLIT_BOOKING"&&this.isBookDisabled,type:"button",class:"btn btn-primary booking-btn mt-md-0 btn-sm ml-md-1 mt-1",onClick:()=>this.bookProperty()},b.entries.Lcz_Book)):e("p",{class:"text-danger m-0 p-0"},b.entries["Lcz_NotAvailable"]||"Not available")))}};H.style=V;const W=".sc-igl-room-type-h{display:block}.margin-bottom-8.sc-igl-room-type{margin-bottom:8px !important}";const F=class{constructor(e){t(this,e);this.dataUpdateEvent=s(this,"dataUpdateEvent");this.bookingType="PLUS_BOOKING";this.ratePricingMode=[];this.roomInfoId=null;this.selectedRooms=[];this.roomsDistributions=[];this.validBookingTypes=["PLUS_BOOKING","ADD_ROOM","EDIT_BOOKING","SPLIT_BOOKING"]}render(){var t,s;const o=this.validBookingTypes.includes(this.bookingType);return e(i,{key:"f2da8bb4da6cd05dfcc373cb104fd0d9a398c826"},o&&((t=this.roomType.rateplans)===null||t===void 0?void 0:t.length)>0&&e("div",{key:"5d716137f94e291ed43f6e004e0998197c2e99d7",class:"font-weight-bold font-medium-1 margin-bottom-8 "},this.roomType.name),(s=this.roomType.rateplans)===null||s===void 0?void 0:s.map((t=>{if(!!t.variations){let i=this.roomInfoId&&this.roomInfoId===this.roomType.id;const s=f(this.roomType.id,t.id);return e("igl-rate-plan",{isBookDisabled:this.isBookDisabled,visibleInventory:s,key:`rate-plan-${t.id}`,ratePricingMode:this.ratePricingMode,class:o?"":"",currency:this.currency,ratePlan:t,roomTypeId:this.roomType.id,bookingType:this.bookingType,shouldBeDisabled:i})}return null})))}};F.style=W;export{C as igl_application_info,j as igl_block_dates_view,M as igl_book_property,A as igl_book_property_footer,S as igl_book_property_header,K as igl_booking_form,L as igl_booking_overview_page,z as igl_property_booked_by,H as igl_rate_plan,F as igl_room_type};
//# sourceMappingURL=p-be727616.entry.js.map