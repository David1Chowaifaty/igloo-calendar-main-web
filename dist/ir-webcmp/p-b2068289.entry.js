import{r as t,c as e,h as i,H as s,a}from"./p-jhiFt_tX.js";import{B as n}from"./p-BAN1QQay.js";import{l as r}from"./p-DRfRlSCW.js";import"./p-BSI30sps.js";import"./p-BFTU3MAI.js";import"./p-Xv5_FAQM.js";import"./p-Mki5YqAR.js";import"./p-DeW5X45W.js";import"./p-vROPuQAY.js";import"./p-CT3GgrvE.js";const o=".sc-ir-phone-input-h{display:block}.input-container.sc-ir-phone-input{display:flex;align-items:center;padding:0 !important}.input-container.sc-ir-phone-input:focus-within{border-color:#1e9ff2}.border-theme.sc-ir-phone-input{border-color:#cacfe7}.input-container.sc-ir-phone-input input.sc-ir-phone-input{flex:1;border:0}.input-container.sc-ir-phone-input input.sc-ir-phone-input:focus{outline:none}.dropdown-trigger.sc-ir-phone-input{display:flex;align-items:center;gap:8px;background:white;border:0;border-right:1px solid #cacfe7}.ir-dropdown-container.sc-ir-phone-input{position:absolute;z-index:1000;bottom:-30px;width:100%;left:0;background:white}.input-container.sc-ir-phone-input label.sc-ir-phone-input{display:flex;align-items:center;justify-content:center;margin:0;padding:0 5px}.flag.sc-ir-phone-input{height:1rem;aspect-ratio:4/3;border-radius:3px}.is-invalid.sc-ir-phone-input{border-color:#ff4961}.phone_prefix_label.sc-ir-phone-input{padding:0 0.5rem;margin:0}";const h=class{constructor(i){t(this,i);this.textChange=e(this,"textChange");this.value="";this.disabled=false;this.error=false;this.default_country=null;this.phone_prefix=null;this.countries=[];this.inputValue="";this.isDropdownVisible=false;this.bookingService=new n}async componentWillLoad(){if(this.countries.length===0){const t=await this.bookingService.getCountries(this.language);this.countries=t}if(this.phone_prefix){this.setCountryFromPhonePrefix()}else{if(this.default_country){this.setCurrentCountry(this.default_country)}}this.inputValue=this.value}handleValueChange(t,e){if(t!==e){this.inputValue=t}}handlePhoneChange(t,e){if(t!==e){this.setCountryFromPhonePrefix()}}handleDocumentClick(t){const e=t.target;if(!this.el.contains(e)){this.isDropdownVisible=false}}handleInputChange(t){var e;let i=t.target;let s=i.value;s=s.replace(/[^+\d]+/g,"");i.value=s;this.inputValue=s;this.textChange.emit({phone_prefix:(e=this.currentCountry)===null||e===void 0?void 0:e.phone_prefix,mobile:this.inputValue})}setCountryFromPhonePrefix(){var t;let e=this.countries.find((t=>t.phone_prefix===this.phone_prefix));if(!e){e=this.countries.find((t=>t.id.toString()===this.phone_prefix));if(!e){return}}this.currentCountry=Object.assign({},e);this.textChange.emit({phone_prefix:(t=this.currentCountry)===null||t===void 0?void 0:t.phone_prefix,mobile:this.value})}setCurrentCountry(t){var e;const i=this.countries.find((e=>e.id===t));if(!i){throw new Error("Invalid country id")}this.currentCountry=Object.assign({},i);this.textChange.emit({phone_prefix:(e=this.currentCountry)===null||e===void 0?void 0:e.phone_prefix,mobile:this.value})}render(){var t,e;return i(s,{key:"0fa3f457d0432839c5747711478a3f61f76732ab"},i("div",{key:"351c866026e659dd92120473d301388efaea3971",class:"form-group mr-0"},i("div",{key:"aa7c2077c2faa5c7086c603833546b592ab2b83d",class:"input-group row m-0 p-0 position-relative"},this.label&&i("div",{key:"365487e3746e9c59b0c2093adf40e288c2c1836e",class:`input-group-prepend col-3 p-0 text-dark border-none`},i("label",{key:"f59311730b104bb2e2b853508b08943d93bf75e1",class:`input-group-text  border-theme flex-grow-1 text-dark  `},this.label)),i("div",{key:"068b77d1e2d82345e34510b7c80fe84cb6fa4abf",class:"form-control  input-container  flex-fill"+(this.error?" is-invalid":"")},i("button",{key:"d2a7776916a5e1e259fa10c8c61f28833dd06e08",onClick:()=>this.isDropdownVisible=!this.isDropdownVisible,class:"dropdown-trigger"},this.currentCountry?i("img",{src:(t=this.currentCountry)===null||t===void 0?void 0:t.flag,class:"flag"}):i("p",{class:"p-0 m-0 "},r.entries.Lcz_Select),i("svg",{key:"56686f5e37d606b9558e3781d72a0561e73a7c45",xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},i("path",{key:"882cafa743fc7bfc42dced55782c78e367dd9f91",d:"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"}))),i("p",{key:"71b19e46154da166c5b05f17c644c71f67f572a3",class:"phone_prefix_label"},(e=this.currentCountry)===null||e===void 0?void 0:e.phone_prefix),i("input",{key:"3f186134e34218a71f4514868eeb90a7381936d7","data-testid":this.testId,maxLength:14,type:"text",placeholder:this.placeholder,required:true,value:this.inputValue,disabled:this.disabled,onInput:t=>this.handleInputChange(t)})),this.isDropdownVisible&&i("div",{key:"6241cbda40e0e247c59ead02ff6cf0eaf4d8da73",class:"ir-dropdown-container"},i("ir-combobox",{key:"68a07c18660aed612ec844d6c70eb2a1c58a9095",onComboboxValueChange:t=>{this.setCurrentCountry(+t.detail.data);this.isDropdownVisible=false},class:"bg-white",autoFocus:true,placeholder:"Search country",data:this.countries.map((t=>({id:t.id.toString(),name:`${t.name} (${t.phone_prefix})`,image:t.flag})))})))))}get el(){return a(this)}static get watchers(){return{value:["handleValueChange"],phone_prefix:["handlePhoneChange"]}}};h.style=o;const p=".prepend-textarea.sc-ir-textarea{padding:0 !important}.ta-prepend-text.sc-ir-textarea{width:100%}";const l=class{constructor(i){t(this,i);this.textChange=e(this,"textChange");this.rows=3;this.cols=5;this.text="";this.label="<label>";this.placeholder="<placeholder>";this.value="";this.maxLength=250;this.variant="default";this.labelWidth=3;this.error=false}handleAriaInvalidChange(t){this.error=t==="true"}connectedCallback(){}disconnectedCallback(){}render(){if(this.variant==="prepend"){return i("fieldset",{class:"input-group"},i("div",{class:`input-group-prepend col-${this.labelWidth} prepend-textarea`},i("span",{class:"input-group-text ta-prepend-text"},this.label)),i("textarea",{"data-testid":this.testId,value:this.value,class:`form-control`,style:Object.assign({height:"7rem"},this.styles),maxLength:this.maxLength,onChange:t=>this.textChange.emit(t.target.value),"aria-label":this.label}))}return i("div",{class:"form-group"},i("label",null,this.label),i("textarea",{"data-testid":this.testId,style:this.styles,maxLength:this.maxLength,rows:this.rows,value:this.value,class:`form-control ${this.textareaClassname} ${this.error?"border-danger":""}`,placeholder:this.placeholder,onInput:t=>this.textChange.emit(t.target.value)}))}static get watchers(){return{"aria-invalid":["handleAriaInvalidChange"]}}};l.style=p;export{h as ir_phone_input,l as ir_textarea};
//# sourceMappingURL=p-b2068289.entry.js.map