{"file":"slot-30fa3487.js","mappings":"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","names":["getElement"],"sources":["src/decorators/ClickOutside.ts","src/utils/slot.ts"],"sourcesContent":["import { getElement, ComponentInterface } from '@stencil/core';\nimport { HTMLStencilElement } from '@stencil/core/internal';\n\n/**\n * Call this function as soon as the click outside of annotated method's host is done.\n * @example\n```\n@ClickOutside()\ncallback() {\n  // this will run when click outside of element (host component) is done.\n}\n```\n */\nexport function ClickOutside() {\n  return (proto: ComponentInterface, methodName: string, descriptor: PropertyDescriptor) => {\n    const originalConnected = proto.connectedCallback;\n    const originalDisconnected = proto.disconnectedCallback;\n    const originalDidUnload = proto.componentDidUnload;\n\n    proto.connectedCallback = function (...args: any[]) {\n      const host = getClickOutsideHost(this);\n      if (host) {\n        const callback = (this as any)[methodName]?.bind(this);\n        if (callback) {\n          registerClickOutside(this, host, callback);\n        }\n      }\n\n      return originalConnected?.apply(this, args);\n    };\n\n    proto.disconnectedCallback = function (...args: any[]) {\n      const host = getClickOutsideHost(this);\n      if (host) {\n        unregisterClickOutside(host);\n      }\n\n      return originalDisconnected?.apply(this, args);\n    };\n\n    proto.componentDidUnload = function (...args: any[]) {\n      const host = getClickOutsideHost(this);\n      if (host) {\n        unregisterClickOutside(host);\n      }\n\n      return originalDidUnload?.apply(this, args);\n    };\n\n    return descriptor;\n  };\n}\n\n/**\n * Register callback function for HTMLElement to be executed when user clicks outside of element.\n * @example\n```\n<span \n    ref={spanEl => registerClickOutside(this, spanEl, () => this.test())}>\n      Hello, World!\n</span>;\n```\n */\nexport function registerClickOutside(component: ComponentInterface, element: HTMLClickOutsideElement, callback: (event: Event) => void): void {\n  if (!element || !isDomAvailable()) return;\n  if (element.__irClickOutsideCleanup__) return;\n\n  const handler = (event: Event) => {\n    if (isEventInsideHost(element as any, event)) {\n      return;\n    }\n\n    callback.call(component, event);\n  };\n\n  window.addEventListener('click', handler, true);\n\n  element.__irClickOutsideCleanup__ = () => {\n    window.removeEventListener('click', handler, true);\n  };\n}\n\nexport function unregisterClickOutside(element: HTMLClickOutsideElement | null | undefined): void {\n  if (!element || !isDomAvailable()) return;\n  element.__irClickOutsideCleanup__?.();\n  delete element.__irClickOutsideCleanup__;\n}\n\nexport interface HTMLClickOutsideElement extends HTMLStencilElement {\n  __irClickOutsideCleanup__?: () => void;\n}\n\nfunction getClickOutsideHost(instance: any): HTMLClickOutsideElement | null {\n  if (!isDomAvailable()) return null;\n\n  try {\n    return getElement(instance) as HTMLClickOutsideElement;\n  } catch {\n    return null;\n  }\n}\n\nfunction isEventInsideHost(host: HTMLElement, event: Event): boolean {\n  if (!event) return false;\n\n  const path = typeof event.composedPath === 'function' ? event.composedPath() : [];\n  if (Array.isArray(path) && path.includes(host)) {\n    return true;\n  }\n\n  const target = event.target as Node | null;\n  if (!target) return false;\n\n  if (host === target) return true;\n  if (typeof (host as any).contains === 'function' && host.contains(target)) return true;\n\n  return !!host.shadowRoot?.contains(target);\n}\n\nfunction isDomAvailable(): boolean {\n  return typeof window !== 'undefined' && typeof document !== 'undefined';\n}\n","/**\n * SlotManager - A reusable service for managing slot state in Stencil components\n *\n * Usage:\n * 1. Create an instance in your component\n * 2. Initialize in componentWillLoad()\n * 3. Setup observers in componentDidLoad()\n * 4. Cleanup in disconnectedCallback()\n * 5. Check slot state using hasSlot()\n */\nexport class SlotManager {\n  private slotState = new Map<string, boolean>();\n  private slotObserver: MutationObserver | null = null;\n  private isInitialized = false;\n\n  constructor(private readonly hostElement: HTMLElement, private readonly slotNames: readonly string[], private readonly onStateChange?: () => void) {}\n\n  /**\n   * Initialize the slot state. Call this in componentWillLoad()\n   */\n  initialize(): void {\n    this.updateSlotState();\n    this.isInitialized = true;\n  }\n\n  /**\n   * Setup slot listeners and observers. Call this in componentDidLoad()\n   */\n  setupListeners(): void {\n    if (!this.isInitialized) {\n      console.warn('SlotManager: initialize() must be called before setupListeners()');\n      return;\n    }\n\n    // Listen to slotchange events\n    this.hostElement.addEventListener('slotchange', this.handleSlotChange);\n\n    // Use MutationObserver as a fallback for browsers that don't fire slotchange reliably\n    this.slotObserver = new MutationObserver(this.handleSlotChange);\n    this.slotObserver.observe(this.hostElement, {\n      childList: true,\n      subtree: true,\n      attributes: true,\n      attributeFilter: ['slot'],\n    });\n  }\n\n  /**\n   * Remove all listeners and cleanup. Call this in disconnectedCallback()\n   */\n  destroy(): void {\n    this.hostElement.removeEventListener('slotchange', this.handleSlotChange);\n    this.slotObserver?.disconnect();\n    this.slotObserver = null;\n    this.slotState.clear();\n    this.isInitialized = false;\n  }\n\n  /**\n   * Check if a specific slot has content\n   */\n  hasSlot(name: string): boolean {\n    return this.slotState.get(name) ?? false;\n  }\n\n  /**\n   * Get all slot states as a Map\n   */\n  getSlotState(): ReadonlyMap<string, boolean> {\n    return this.slotState;\n  }\n\n  /**\n   * Get all slot names that have content\n   */\n  getActiveSlots(): string[] {\n    return Array.from(this.slotState.entries())\n      .filter(([_, hasContent]) => hasContent)\n      .map(([name]) => name);\n  }\n\n  /**\n   * Manually trigger a slot state update\n   */\n  refresh(): void {\n    this.updateSlotState();\n  }\n\n  private handleSlotChange = (): void => {\n    this.updateSlotState();\n    this.onStateChange?.();\n  };\n\n  private updateSlotState(): void {\n    const newState = new Map<string, boolean>();\n\n    this.slotNames.forEach(name => {\n      newState.set(name, this.checkSlotHasContent(name));\n    });\n\n    this.slotState = newState;\n  }\n\n  private checkSlotHasContent(name: string): boolean {\n    return Array.from(this.hostElement.children).some(child => child.getAttribute('slot') === name);\n  }\n}\n\n/**\n * Convenience function to create a SlotManager with automatic lifecycle management\n * Returns helper methods that can be called directly in lifecycle hooks\n */\nexport function createSlotManager(hostElement: HTMLElement, slotNames: readonly string[], onStateChange?: () => void) {\n  const manager = new SlotManager(hostElement, slotNames, onStateChange);\n\n  return {\n    manager,\n    // Lifecycle hooks\n    initialize: () => manager.initialize(),\n    setupListeners: () => manager.setupListeners(),\n    destroy: () => manager.destroy(),\n    // Query methods\n    hasSlot: (name: string) => manager.hasSlot(name),\n    getSlotState: () => manager.getSlotState(),\n    getActiveSlots: () => manager.getActiveSlots(),\n    refresh: () => manager.refresh(),\n  };\n}\n"],"version":3}