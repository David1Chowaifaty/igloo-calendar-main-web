{"version":3,"file":"igl-cal-body.igl-cal-footer.igl-cal-header.igl-legends.igl-to-be-assigned.ir-room-nights.entry.cjs.js","sources":["src/components/igloo-calendar/igl-cal-body/igl-cal-body.css?tag=igl-cal-body&encapsulation=scoped","src/components/igloo-calendar/igl-cal-body/igl-cal-body.tsx","src/components/igloo-calendar/igl-cal-footer/igl-cal-footer.css?tag=igl-cal-footer&encapsulation=scoped","src/components/igloo-calendar/igl-cal-footer/igl-cal-footer.tsx","src/components/igloo-calendar/igl-cal-header/igl-cal-header.css?tag=igl-cal-header&encapsulation=scoped","src/components/igloo-calendar/igl-cal-header/igl-cal-header.tsx","src/components/igloo-calendar/igl-legends/igl-legends.css?tag=igl-legends&encapsulation=scoped","src/components/igloo-calendar/igl-legends/igl-legends.tsx","src/components/igloo-calendar/igl-to-be-assigned/igl-to-be-assigned.css?tag=igl-to-be-assigned&encapsulation=scoped","src/components/igloo-calendar/igl-to-be-assigned/igl-to-be-assigned.tsx","src/components/igloo-calendar/ir-room-nights/ir-room-nights.css?tag=ir-room-nights&encapsulation=scoped","src/components/igloo-calendar/ir-room-nights/ir-room-nights.tsx"],"sourcesContent":[":host {\r\n  display: block;\r\n}\r\n\r\n.bodyContainer {\r\n  position: relative;\r\n}\r\n\r\n.roomRow {\r\n  width: max-content;\r\n}\r\n\r\n.roomRow:first-child {\r\n  margin-top: 80px;\r\n}\r\n.categoryName {\r\n  font-weight: bold;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n.roomRow .room {\r\n  cursor: pointer;\r\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\r\n}\r\n.roomRow .room:hover {\r\n  background: #e0e0e0;\r\n}\r\n.cellData {\r\n  width: 58px;\r\n  height: 30px;\r\n  display: inline-grid;\r\n  border-top: 1px solid #e0e0e0;\r\n  border-left: 1px solid #e0e0e0;\r\n  vertical-align: top;\r\n}\r\n\r\n.cellData:nth-child(2) {\r\n  border-left: 0px;\r\n}\r\n\r\n.cellData:last-child {\r\n  border-right: 1px solid rgba(186, 191, 199, 0.5);\r\n}\r\n\r\n.roomHeaderCell {\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  left: 0;\r\n  background: #fff;\r\n  border-right: 1px solid #ccc;\r\n  width: 170px;\r\n  z-index: 1;\r\n}\r\n\r\n.currentDay {\r\n  background-color: #e3f3fa;\r\n}\r\n\r\n.dragOverHighlight {\r\n  background-color: #f5f5dc !important;\r\n}\r\n\r\n.selectedDay {\r\n  background-color: #f9f9c9 !important;\r\n}\r\n\r\n.categoryTitle {\r\n  grid-template-columns: 1fr 20px;\r\n  padding-left: 10px;\r\n  cursor: pointer;\r\n  height: 40px;\r\n  font-size: 0.9em;\r\n}\r\n.categoryTitle > :nth-child(1) {\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.roomTitle {\r\n  padding-left: 20px;\r\n  font-size: 0.9em;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.roomTitle > :nth-child(1) {\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.roomTitle.pl10 {\r\n  padding-left: 10px;\r\n}\r\n\r\n.categoryPriceColumn {\r\n  align-items: center;\r\n  height: 40px;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n}\r\n\r\n/* BOOKING EVENT */\r\n.bookingEventsContainer {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n}\r\n","import { Component, Host, Listen, Prop, State, h, Event, EventEmitter } from '@stencil/core';\r\nimport calendar_dates from '@/stores/calendar-dates.store';\r\nimport locales from '@/stores/locales.store';\r\nimport { PhysicalRoom, RoomType } from '@/models/booking.dto';\r\nimport { isRequestPending } from '@/stores/ir-interceptor.store';\r\nimport { HouseKeepingService } from '@/services/housekeeping.service';\r\nimport { ICountry } from '@/models/IBooking';\r\nimport moment from 'moment';\r\n\r\nexport type RoomCategory = RoomType & { expanded: boolean };\r\n\r\n@Component({\r\n  tag: 'igl-cal-body',\r\n  styleUrl: 'igl-cal-body.css',\r\n  scoped: true,\r\n})\r\nexport class IglCalBody {\r\n  @Prop() isScrollViewDragging: boolean;\r\n  @Prop() propertyId: number;\r\n  @Prop() calendarData: { [key: string]: any };\r\n  @Prop() today: String;\r\n  @Prop() currency;\r\n  @Prop() language: string;\r\n  @Prop() countries: ICountry[];\r\n  @Prop() highlightedDate: string;\r\n\r\n  @State() dragOverElement: string = '';\r\n  @State() renderAgain: boolean = false;\r\n  @State() selectedRoom: PhysicalRoom;\r\n\r\n  @Event() addBookingDatasEvent: EventEmitter<any[]>;\r\n  @Event() showBookingPopup: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) scrollPageToRoom: EventEmitter;\r\n\r\n  private selectedRooms: { [key: string]: any } = {};\r\n  private fromRoomId: number = -1;\r\n  private newEvent: { [key: string]: any };\r\n  private currentDate = new Date();\r\n  private hkModal: HTMLIrModalElement;\r\n  private housekeepingService = new HouseKeepingService();\r\n\r\n  componentWillLoad() {\r\n    this.currentDate.setHours(0, 0, 0, 0);\r\n  }\r\n\r\n  @Listen('dragOverHighlightElement', { target: 'window' })\r\n  dragOverHighlightElementHandler(event: CustomEvent) {\r\n    this.dragOverElement = event.detail.dragOverElement;\r\n  }\r\n\r\n  @Listen('gotoRoomEvent', { target: 'window' })\r\n  gotoRoom(event: CustomEvent) {\r\n    let roomId = event.detail.roomId;\r\n    let category = this.getRoomCategoryByRoomId(roomId);\r\n    if (!category.expanded) {\r\n      this.toggleCategory(category);\r\n      setTimeout(() => {\r\n        this.scrollToRoom(roomId);\r\n      }, 10);\r\n    } else {\r\n      this.scrollToRoom(roomId);\r\n    }\r\n  }\r\n\r\n  @Listen('addToBeAssignedEvent', { target: 'window' })\r\n  addToBeAssignedEvents(event: CustomEvent) {\r\n    // let roomId = event.detail.roomId;\r\n    this.addBookingDatas(event.detail.data);\r\n    this.renderElement();\r\n  }\r\n\r\n  scrollToRoom(roomId) {\r\n    this.scrollPageToRoom.emit({\r\n      key: 'scrollPageToRoom',\r\n      id: roomId,\r\n      refClass: 'room_' + roomId,\r\n    });\r\n  }\r\n\r\n  getRoomCategoryByRoomId(roomId) {\r\n    return this.calendarData.roomsInfo.find(roomCategory => {\r\n      return this.getCategoryRooms(roomCategory).find(room => this.getRoomId(room) === roomId);\r\n    });\r\n  }\r\n\r\n  getCategoryName(roomCategory) {\r\n    return roomCategory.name;\r\n  }\r\n\r\n  getCategoryId(roomCategory) {\r\n    return roomCategory.id;\r\n  }\r\n\r\n  getTotalPhysicalRooms(roomCategory) {\r\n    return this.getCategoryRooms(roomCategory).length;\r\n  }\r\n\r\n  getCategoryRooms(roomCategory: RoomCategory) {\r\n    return (roomCategory && roomCategory.physicalrooms) || [];\r\n  }\r\n\r\n  getRoomName(roomInfo) {\r\n    return roomInfo.name;\r\n  }\r\n\r\n  getRoomId(roomInfo) {\r\n    return roomInfo.id;\r\n  }\r\n\r\n  getRoomById(physicalRooms, roomId) {\r\n    return physicalRooms.find(physical_room => this.getRoomId(physical_room) === roomId);\r\n  }\r\n\r\n  getBookingData() {\r\n    return this.calendarData.bookingEvents;\r\n  }\r\n\r\n  addBookingDatas(aData) {\r\n    this.addBookingDatasEvent.emit(aData);\r\n  }\r\n\r\n  getSelectedCellRefName(roomId, selectedDay) {\r\n    return 'room_' + roomId + '_' + selectedDay.currentDate;\r\n  }\r\n\r\n  // getSplitBookingEvents(newEvent) {\r\n  //   return this.getBookingData().some(bookingEvent => !['003', '002', '004'].includes(bookingEvent.STATUS_CODE) && newEvent.FROM_DATE === bookingEvent.FROM_DATE);\r\n  // }\r\n  getSplitBookingEvents(newEvent) {\r\n    console.log(newEvent.FROM_DATE);\r\n    return this.getBookingData().some(bookingEvent => {\r\n      if (!['003', '002', '004'].includes(bookingEvent.STATUS_CODE)) {\r\n        if (\r\n          new Date(newEvent.FROM_DATE).getTime() >= new Date(bookingEvent.FROM_DATE).getTime() &&\r\n          new Date(newEvent.FROM_DATE).getTime() <= new Date(bookingEvent.TO_DATE).getTime()\r\n        ) {\r\n          return bookingEvent;\r\n        }\r\n      }\r\n    });\r\n  }\r\n  @Listen('closeBookingWindow', { target: 'window' })\r\n  closeWindow() {\r\n    let ind = this.getBookingData().findIndex(ev => ev.ID === 'NEW_TEMP_EVENT');\r\n    if (ind !== -1) {\r\n      this.getBookingData().splice(ind, 1);\r\n      console.log('removed item..');\r\n      this.renderElement();\r\n    }\r\n  }\r\n\r\n  addNewEvent(roomCategory) {\r\n    let keys = Object.keys(this.selectedRooms);\r\n    let startDate, endDate;\r\n\r\n    if (this.selectedRooms[keys[0]].currentDate < this.selectedRooms[keys[1]].currentDate) {\r\n      startDate = new Date(this.selectedRooms[keys[0]].currentDate);\r\n      endDate = new Date(this.selectedRooms[keys[1]].currentDate);\r\n    } else {\r\n      startDate = new Date(this.selectedRooms[keys[1]].currentDate);\r\n      endDate = new Date(this.selectedRooms[keys[0]].currentDate);\r\n    }\r\n\r\n    this.newEvent = {\r\n      ID: 'NEW_TEMP_EVENT',\r\n      NAME: <span>&nbsp;</span>,\r\n      EMAIL: '',\r\n      PHONE: '',\r\n      convertBooking: false,\r\n      REFERENCE_TYPE: 'PHONE',\r\n      FROM_DATE: startDate.getFullYear() + '-' + this.getTwoDigitNumStr(startDate.getMonth() + 1) + '-' + this.getTwoDigitNumStr(startDate.getDate()),\r\n      TO_DATE: endDate.getFullYear() + '-' + this.getTwoDigitNumStr(endDate.getMonth() + 1) + '-' + this.getTwoDigitNumStr(endDate.getDate()),\r\n      BALANCE: '',\r\n      NOTES: '',\r\n      RELEASE_AFTER_HOURS: 0,\r\n      PR_ID: this.selectedRooms[keys[0]].roomId,\r\n      ENTRY_DATE: '',\r\n      NO_OF_DAYS: (endDate - startDate) / 86400000,\r\n      ADULTS_COUNT: 1,\r\n      COUNTRY: '',\r\n      INTERNAL_NOTE: '',\r\n      RATE: '',\r\n      TOTAL_PRICE: '',\r\n      RATE_PLAN: '',\r\n      ARRIVAL_TIME: '',\r\n      TITLE: locales.entries.Lcz_NewBookingFor,\r\n      roomsInfo: [roomCategory],\r\n      CATEGORY: roomCategory.name,\r\n      event_type: 'BAR_BOOKING',\r\n      STATUS: 'TEMP-EVENT',\r\n      defaultDateRange: {\r\n        fromDate: null,\r\n        fromDateStr: '',\r\n        toDate: null,\r\n        toDateStr: '',\r\n        dateDifference: (endDate - startDate) / 86400000,\r\n        editable: false,\r\n        message: 'Including 5.00% City Tax - Excluding 11.00% VAT',\r\n      },\r\n    };\r\n\r\n    let popupTitle = roomCategory.name + ' ' + this.getRoomName(this.getRoomById(this.getCategoryRooms(roomCategory), this.selectedRooms[keys[0]].roomId));\r\n    this.newEvent.BLOCK_DATES_TITLE = `${locales.entries.Lcz_BlockDatesFor} ${popupTitle}`;\r\n    this.newEvent.TITLE += popupTitle;\r\n    this.newEvent.defaultDateRange.toDate = new Date(this.newEvent.TO_DATE + 'T00:00:00');\r\n    this.newEvent.defaultDateRange.fromDate = new Date(this.newEvent.FROM_DATE + 'T00:00:00');\r\n    this.newEvent.defaultDateRange.fromDateStr = this.getDateStr(this.newEvent.defaultDateRange.fromDate);\r\n    this.newEvent.defaultDateRange.toDateStr = this.getDateStr(this.newEvent.defaultDateRange.toDate);\r\n    this.newEvent.ENTRY_DATE = new Date().toISOString();\r\n    this.newEvent.legendData = this.calendarData.formattedLegendData;\r\n\r\n    let splitBookingEvents = this.getSplitBookingEvents(this.newEvent);\r\n    if (splitBookingEvents) {\r\n      this.newEvent.splitBookingEvents = splitBookingEvents;\r\n    }\r\n\r\n    this.getBookingData().push(this.newEvent);\r\n    return this.newEvent;\r\n  }\r\n\r\n  getTwoDigitNumStr(num) {\r\n    return num <= 9 ? '0' + num : num;\r\n  }\r\n\r\n  getDateStr(date, locale = 'default') {\r\n    return date.getDate() + ' ' + date.toLocaleString(locale, { month: 'short' }) + ' ' + date.getFullYear();\r\n  }\r\n\r\n  removeNewEvent() {\r\n    this.calendarData.bookingEvents = this.calendarData.bookingEvents.filter(events => events.ID !== 'NEW_TEMP_EVENT');\r\n    this.newEvent = null;\r\n  }\r\n\r\n  clickCell(roomId, selectedDay, roomCategory) {\r\n    if (!this.isScrollViewDragging && selectedDay.currentDate >= this.currentDate.getTime()) {\r\n      let refKey = this.getSelectedCellRefName(roomId, selectedDay);\r\n      if (this.selectedRooms.hasOwnProperty(refKey)) {\r\n        this.removeNewEvent();\r\n        delete this.selectedRooms[refKey];\r\n        this.renderElement();\r\n        return;\r\n      } else if (Object.keys(this.selectedRooms).length != 1 || this.fromRoomId != roomId) {\r\n        this.removeNewEvent();\r\n        this.selectedRooms = {};\r\n        this.selectedRooms[refKey] = { ...selectedDay, roomId };\r\n        this.fromRoomId = roomId;\r\n        this.renderElement();\r\n      } else {\r\n        // create bar;\r\n        this.selectedRooms[refKey] = { ...selectedDay, roomId };\r\n        this.addNewEvent(roomCategory);\r\n        this.selectedRooms = {};\r\n        this.renderElement();\r\n        this.showNewBookingPopup(this.newEvent);\r\n      }\r\n    }\r\n  }\r\n\r\n  showNewBookingPopup(data) {\r\n    console.log(data);\r\n    // this.showBookingPopup.emit({key: \"add\", data});\r\n  }\r\n\r\n  renderElement() {\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n\r\n  getGeneralCategoryDayColumns(addClass: string, isCategory: boolean = false, index: number) {\r\n    return calendar_dates.days.map(dayInfo => {\r\n      return (\r\n        <div\r\n          class={`cellData  font-weight-bold categoryPriceColumn ${addClass + '_' + dayInfo.day} ${\r\n            dayInfo.day === this.today || dayInfo.day === this.highlightedDate ? 'currentDay' : ''\r\n          }`}\r\n        >\r\n          {isCategory ? (\r\n            <span class={'categoryName'}>\r\n              {dayInfo.rate[index].exposed_inventory.rts}\r\n              {/* <br />\r\n              {dayInfo.rate[index].exposed_inventory.offline} */}\r\n            </span>\r\n          ) : (\r\n            ''\r\n          )}\r\n        </div>\r\n      );\r\n    });\r\n  }\r\n\r\n  getGeneralRoomDayColumns(roomId: string, roomCategory: RoomCategory, roomName: string) {\r\n    // onDragOver={event => this.handleDragOver(event)} onDrop={event => this.handleDrop(event, addClass+\"_\"+dayInfo.day)}\r\n    return this.calendarData.days.map(dayInfo => {\r\n      return (\r\n        <div\r\n          class={`cellData ${'room_' + roomId + '_' + dayInfo.day} ${dayInfo.day === this.today || dayInfo.day === this.highlightedDate ? 'currentDay' : ''} ${\r\n            this.dragOverElement === roomId + '_' + dayInfo.day ? 'dragOverHighlight' : ''\r\n          } ${this.selectedRooms.hasOwnProperty(this.getSelectedCellRefName(roomId, dayInfo)) ? 'selectedDay' : ''}`}\r\n          onClick={() => this.clickCell(roomId, dayInfo, roomCategory)}\r\n          data-date={moment(dayInfo.currentDate).format('YYYY-MM-DD')}\r\n          data-room-name={roomName}\r\n        ></div>\r\n      );\r\n    });\r\n  }\r\n\r\n  toggleCategory(roomCategory: RoomCategory) {\r\n    roomCategory.expanded = !roomCategory.expanded;\r\n    this.renderElement();\r\n  }\r\n\r\n  getRoomCategoryRow(roomCategory: RoomCategory, index: number) {\r\n    if (this.getTotalPhysicalRooms(roomCategory) <= 1 || !roomCategory.is_active) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div class=\"roomRow\">\r\n        <div\r\n          class={`cellData text-left align-items-center roomHeaderCell categoryTitle ${'category_' + this.getCategoryId(roomCategory)}`}\r\n          onClick={() => this.toggleCategory(roomCategory)}\r\n        >\r\n          <div class={'categoryName'}>\r\n            <ir-interactive-title popoverTitle={this.getCategoryName(roomCategory)}></ir-interactive-title>\r\n            {/* <ir-popover popoverTitle={this.getCategoryName(roomCategory)}></ir-popover> */}\r\n          </div>\r\n          {roomCategory.expanded ? (\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\" height={14} width={14}>\r\n              <path\r\n                fill=\"#6b6f82\"\r\n                d=\"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z\"\r\n              />\r\n            </svg>\r\n          ) : (\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\" height={14} width={14}>\r\n              <path\r\n                fill=\"#6b6f82\"\r\n                d=\"M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z\"\r\n              />\r\n            </svg>\r\n          )}\r\n          {/* <i class={`la la-angle-${roomCategory.expanded ? 'down' : 'right'}`}></i> */}\r\n        </div>\r\n        {this.getGeneralCategoryDayColumns('category_' + this.getCategoryId(roomCategory), true, index)}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Renders a list of active rooms for an expanded room category. Returns an array of JSX elements, including headers and day columns, or an empty array if the category is collapsed or contains no active rooms.\r\n   *\r\n   * @param {RoomCategory} roomCategory - The category containing room details.\r\n   * @returns {JSX.Element[]} - JSX elements for the active rooms or an empty array.\r\n   */\r\n  private getRoomsByCategory(roomCategory: RoomCategory) {\r\n    // Check accordion is expanded.\r\n    if (!roomCategory.expanded) {\r\n      return [];\r\n    }\r\n\r\n    return this.getCategoryRooms(roomCategory)?.map(room => {\r\n      if (!room.is_active) {\r\n        return null;\r\n      }\r\n      return (\r\n        <div class=\"roomRow\">\r\n          <div\r\n            class={`cellData room text-left align-items-center roomHeaderCell  roomTitle ${this.getTotalPhysicalRooms(roomCategory) <= 1 ? 'pl10' : ''} ${\r\n              'room_' + this.getRoomId(room)\r\n            }`}\r\n            data-room={this.getRoomId(room)}\r\n            onClick={() => {\r\n              this.selectedRoom = room;\r\n              this.hkModal.openModal();\r\n            }}\r\n          >\r\n            {/* <div>{this.getTotalPhysicalRooms(roomCategory) <= 1 ? this.getCategoryName(roomCategory) : this.getRoomName(room)}</div> */}\r\n            {/* <ir-popover popoverTitle={this.getTotalPhysicalRooms(roomCategory) <= 1 ? this.getCategoryName(roomCategory) : this.getRoomName(room)}></ir-popover> */}\r\n            <ir-interactive-title\r\n              hkStatus={room.hk_status !== '001'}\r\n              popoverTitle={this.getTotalPhysicalRooms(roomCategory) <= 1 ? this.getCategoryName(roomCategory) : this.getRoomName(room)}\r\n            ></ir-interactive-title>\r\n          </div>\r\n          {this.getGeneralRoomDayColumns(this.getRoomId(room), roomCategory, room.name)}\r\n        </div>\r\n      );\r\n    });\r\n  }\r\n\r\n  getRoomRows() {\r\n    return this.calendarData.roomsInfo?.map((roomCategory, index) => {\r\n      if (roomCategory.is_active) {\r\n        return [this.getRoomCategoryRow(roomCategory, index), this.getRoomsByCategory(roomCategory)];\r\n      } else {\r\n        return null;\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    // onDragStart={event => this.handleDragStart(event)} draggable={true}\r\n    return (\r\n      <Host>\r\n        <div class=\"bodyContainer\">\r\n          {this.getRoomRows()}\r\n          <div class=\"bookingEventsContainer preventPageScroll\">\r\n            {this.getBookingData()?.map(bookingEvent => {\r\n              return (\r\n                <igl-booking-event\r\n                  data-testid={`booking_${bookingEvent.BOOKING_NUMBER}`}\r\n                  data-room-name={bookingEvent.roomsInfo?.find(r => r.id === bookingEvent.RATE_TYPE)?.physicalrooms.find(r => r.id === bookingEvent.PR_ID)?.name}\r\n                  language={this.language}\r\n                  is_vacation_rental={this.calendarData.is_vacation_rental}\r\n                  countries={this.countries}\r\n                  currency={this.currency}\r\n                  data-component-id={bookingEvent.ID}\r\n                  bookingEvent={bookingEvent}\r\n                  allBookingEvents={this.getBookingData()}\r\n                ></igl-booking-event>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n        <ir-modal\r\n          ref={el => (this.hkModal = el)}\r\n          leftBtnText={locales?.entries?.Lcz_Cancel}\r\n          rightBtnText={locales?.entries?.Lcz_Update}\r\n          modalBody={this.renderModalBody()}\r\n          onConfirmModal={async e => {\r\n            e.stopImmediatePropagation();\r\n            e.stopPropagation();\r\n            await this.housekeepingService.setExposedUnitHKStatus({\r\n              property_id: this.propertyId,\r\n              // housekeeper: this.selectedRoom?.housekeeper ? { id: this.selectedRoom?.housekeeper?.id } : null,\r\n              status: {\r\n                code: this.selectedRoom?.hk_status === '001' ? '002' : '001',\r\n              },\r\n              unit: {\r\n                id: this.selectedRoom?.id,\r\n              },\r\n            });\r\n            this.selectedRoom = null;\r\n            this.hkModal.closeModal();\r\n          }}\r\n          autoClose={false}\r\n          isLoading={isRequestPending('/Set_Exposed_Unit_HK_Status')}\r\n          onCancelModal={e => {\r\n            e.stopImmediatePropagation();\r\n            e.stopPropagation();\r\n            this.selectedRoom = null;\r\n            this.hkModal.closeModal();\r\n          }}\r\n        ></ir-modal>\r\n      </Host>\r\n    );\r\n  }\r\n\r\n  private renderModalBody() {\r\n    if (!this.selectedRoom) {\r\n      return null;\r\n    }\r\n    return (\r\n      <p>\r\n        Update unit {this.selectedRoom?.name} to <b>{this.selectedRoom?.hk_status === '001' ? 'Dirty' : 'Clean'}?</b>\r\n      </p>\r\n      // <ir-select\r\n      //   LabelAvailable={false}\r\n      //   showFirstOption={false}\r\n      //   selectedValue={this.selectedRoom?.hk_status === '001' ? '001' : '002'}\r\n      //   data={[\r\n      //     { text: 'Clean', value: '001' },\r\n      //     { text: 'Dirty', value: '002' },\r\n      //   ]}\r\n      //   onSelectChange={e => (this.selectedHKStatus = e.detail)}\r\n      // ></ir-select>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  position: sticky;\r\n  bottom: 0;\r\n  width: max-content;\r\n  z-index: 3;\r\n}\r\n\r\n.footerCell {\r\n  display: -moz-inline-grid;\r\n  display: -ms-inline-grid;\r\n  display: inline-grid;\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  bottom: 0;\r\n  width: 58px;\r\n  height: 40px;\r\n  /* color: #b8b6b7; */\r\n  background: #fff;\r\n  vertical-align: top;\r\n  border-top: 1px solid #e0e0e0;\r\n}\r\n\r\n.bottomLeftCell {\r\n  left: -1px;\r\n  z-index: 2;\r\n  width: 170px;\r\n  text-align: left;\r\n  padding-left: 15px;\r\n  color: #000000;\r\n}\r\n\r\n.footerCell i {\r\n  margin-right: 5px;\r\n}\r\n\r\n.legendBtn {\r\n  color: #41bff3;\r\n  cursor: pointer;\r\n}\r\n\r\n.isOnline i {\r\n  color: #2f9c3f;\r\n  font-weight: bold;\r\n}\r\n\r\n.isOffline i {\r\n  font-weight: bold;\r\n}\r\n\r\n.isOffline {\r\n  color: #a40000;\r\n}\r\n\r\n.dayTitle {\r\n  font-size: 0.8em;\r\n  font-weight: 600;\r\n  display: grid;\r\n  user-select: none;\r\n  /* height: 100%;\r\n  \r\n  align-items: center;\r\n  text-align: center;\r\n  width: 100%; */\r\n}\r\n\r\n.currentDay .dayTitle {\r\n  font-weight: bold;\r\n  /* color: #262b31; */\r\n}\r\n\r\n.currentDay {\r\n  background-color: #e3f3fa;\r\n}\r\n\r\n.dayCapacityPercent {\r\n  font-size: 0.75em;\r\n}\r\n\r\n.badge-pill {\r\n  padding-left: 1em;\r\n  padding-right: 1em;\r\n  font-size: 0.7em;\r\n  margin-bottom: 2px;\r\n}\r\n","import locales from '@/stores/locales.store';\r\nimport { Component, Event, EventEmitter, Host, Prop, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'igl-cal-footer',\r\n  styleUrl: 'igl-cal-footer.css',\r\n  scoped: true,\r\n})\r\nexport class IglCalFooter {\r\n  @Event() optionEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Prop() calendarData: { [key: string]: any };\r\n  @Prop() today: String;\r\n  @Prop() highlightedDate: string;\r\n\r\n  // private isOnline:boolean = false;\r\n\r\n  handleOptionEvent(key, data = '') {\r\n    this.optionEvent.emit({ key, data });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host class=\"footerContainer\">\r\n        <div class=\"footerCell bottomLeftCell align-items-center preventPageScroll\">\r\n          <div class=\"legendBtn\" onClick={() => this.handleOptionEvent('showLegend')}>\r\n            <i class=\"la la-square\"></i>\r\n            <u>{locales.entries.Lcz_Legend}</u>\r\n            <span> - v99.198</span>\r\n          </div>\r\n          {/* <div class={`${this.isOnline ? 'isOnline' : 'isOffline'}`}>\r\n            <i class=\"la la-share-alt isOffline\"></i><span>{this.isOnline ? \"Connected\": \"Offline\"}</span>\r\n          </div> */}\r\n        </div>\r\n        {this.calendarData.days.map(dayInfo => (\r\n          <div class=\"footerCell align-items-center\">\r\n            <div class={`dayTitle full-height align-items-center ${dayInfo.day === this.today || this.highlightedDate === dayInfo.day ? 'currentDay' : ''}`}>\r\n              {dayInfo.dayDisplayName}\r\n            </div>\r\n\r\n            {/* <div class=\"dayTitle\">{dayInfo.dayDisplayName}</div>\r\n              <div class=\"dayCapacityPercent\">28.57%</div>\r\n              <div class=\"preventPageScroll\">\r\n                <span class=\"badge badge-primary badge-pill\">\r\n                  {index}\r\n                </span>\r\n              </div> */}\r\n          </div>\r\n        ))}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  position: absolute;\r\n  top: 0;\r\n  height: 100%;\r\n}\r\n.svg-icon {\r\n  height: 20px;\r\n  width: 20px;\r\n}\r\n.darkGrey {\r\n  background: #ececec;\r\n}\r\n.btn {\r\n  pointer-events: auto;\r\n}\r\n\r\n.stickyCell {\r\n  display: -ms-inline-grid;\r\n  display: -moz-inline-grid;\r\n  display: inline-grid;\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  top: 0px;\r\n  height: 82px;\r\n  display: inline-block;\r\n  vertical-align: top;\r\n  z-index: 2;\r\n}\r\n\r\n.headersContainer {\r\n  background-color: #ffffff;\r\n}\r\n\r\n.headerCell {\r\n  display: inline-grid;\r\n  width: 58px;\r\n  height: 58px;\r\n  vertical-align: top;\r\n  background-color: #ffffff;\r\n  border-bottom: 1px solid #e0e0e0;\r\n}\r\n\r\n.monthsContainer {\r\n  height: 20px;\r\n  background-color: #ffffff;\r\n  margin-bottom: 0.2em;\r\n}\r\n\r\n.monthCell {\r\n  display: inline-grid;\r\n  height: 20px;\r\n  background-color: #ececec;\r\n  border-right: 1px solid #c7c7c7;\r\n  vertical-align: top;\r\n}\r\n\r\n.monthCell:nth-child(odd) {\r\n  background-color: #dddddd;\r\n}\r\n\r\n.monthTitle {\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  font-size: 0.9em;\r\n  text-transform: uppercase;\r\n  font-weight: bold;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.topLeftCell {\r\n  left: 0px;\r\n  z-index: 3;\r\n  width: 170px;\r\n  background-color: #ffffff;\r\n  display: -ms-inline-grid;\r\n  display: -moz-inline-grid;\r\n  display: inline-grid;\r\n}\r\n.datePickerHidden {\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n  opacity: 0;\r\n  cursor: pointer;\r\n  /* z-index: 1; */\r\n  z-index: 1;\r\n}\r\n\r\n.date_btn {\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  position: relative;\r\n}\r\n\r\n.date_btn:hover {\r\n  background: #f6f6f6;\r\n  border-radius: 0.3rem;\r\n}\r\n.caledarBtns {\r\n  position: relative;\r\n  cursor: pointer;\r\n  padding: 0.4rem;\r\n}\r\n\r\n.caledarBtns:hover {\r\n  background-color: #f6f6f6;\r\n}\r\n\r\n.dayTitle {\r\n  font-size: 0.8em;\r\n  font-weight: 600;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.currentDay .dayTitle {\r\n  font-weight: bold;\r\n}\r\n\r\n.currentDay {\r\n  background-color: #e3f3fa;\r\n}\r\n\r\n.dayCapacityPercent {\r\n  font-size: 0.75em;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.badge-pill {\r\n  padding: 3px 1em;\r\n  font-size: 0.8em;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.pointer {\r\n  cursor: pointer;\r\n}\r\n\r\n.searchContiner {\r\n  padding-left: 10px;\r\n  padding-right: 10px;\r\n}\r\n\r\n.searchListContainer {\r\n  background: #fff;\r\n  border: 1px solid #ccc;\r\n  border-bottom: none;\r\n}\r\n\r\n.searchListItem {\r\n  background: white;\r\n  border-bottom: 1px solid #ccc;\r\n  padding-left: 8px;\r\n}\r\n\r\n.badge-light {\r\n  background-color: #999999;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n.min-width-full {\r\n  min-width: 100%;\r\n}\r\n","import { Component, Event, EventEmitter, Host, Prop, h, State, Listen, Watch } from '@stencil/core';\r\nimport { ToBeAssignedService } from '@/services/toBeAssigned.service';\r\nimport { dateToFormattedString } from '@/utils/utils';\r\nimport moment from 'moment';\r\nimport locales from '@/stores/locales.store';\r\nimport { handleUnAssignedDatesChange } from '@/stores/unassigned_dates.store';\r\nimport { colorVariants } from '@/components/ui/ir-icons/icons';\r\n\r\n@Component({\r\n  tag: 'igl-cal-header',\r\n  styleUrl: 'igl-cal-header.css',\r\n  scoped: true,\r\n})\r\nexport class IglCalHeader {\r\n  @Event() optionEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Event({ bubbles: true, composed: true }) gotoRoomEvent: EventEmitter<{\r\n    [key: string]: any;\r\n  }>;\r\n  @Event({ bubbles: true, composed: true }) gotoToBeAssignedDate: EventEmitter<{\r\n    [key: string]: any;\r\n  }>;\r\n  @Prop() calendarData: { [key: string]: any };\r\n  @Prop() today: String;\r\n  @Prop() propertyid: number;\r\n  @Prop() unassignedDates;\r\n  @Prop() to_date: string;\r\n  @Prop() highlightedDate: string;\r\n  @State() renderAgain: boolean = false;\r\n  @State() unassignedRoomsNumber: any = {};\r\n  private searchValue: string = '';\r\n  private searchList: { [key: string]: any }[] = [];\r\n  private roomsList: { [key: string]: any }[] = [];\r\n  private toBeAssignedService = new ToBeAssignedService();\r\n  dateRef: HTMLIrButtonElement;\r\n  componentWillLoad() {\r\n    try {\r\n      this.initializeRoomsList();\r\n\r\n      if (!this.calendarData.is_vacation_rental) {\r\n        handleUnAssignedDatesChange('unassigned_dates', newValue => {\r\n          if (Object.keys(newValue).length > 0) {\r\n            this.fetchAndAssignUnassignedRooms();\r\n          }\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error in componentWillLoad:', error);\r\n    }\r\n  }\r\n  @Watch('unassignedDates')\r\n  handleCalendarDataChanged() {\r\n    this.fetchAndAssignUnassignedRooms();\r\n  }\r\n  private initializeRoomsList() {\r\n    this.roomsList = [];\r\n    this.calendarData.roomsInfo.forEach(category => {\r\n      this.roomsList = this.roomsList.concat(...category.physicalrooms);\r\n    });\r\n  }\r\n\r\n  private async fetchAndAssignUnassignedRooms() {\r\n    await this.assignRoomsToDate();\r\n  }\r\n\r\n  private async assignRoomsToDate() {\r\n    try {\r\n      const { fromDate, toDate, data } = this.unassignedDates;\r\n      let dt = new Date(fromDate);\r\n      dt.setHours(0, 0, 0, 0);\r\n      let endDate = dt.getTime();\r\n      while (endDate <= new Date(toDate).getTime()) {\r\n        const selectedDate = moment(endDate).format('D_M_YYYY');\r\n        if (data[endDate]) {\r\n          const result = await this.toBeAssignedService.getUnassignedRooms(\r\n            { from_date: this.calendarData.from_date, to_date: this.calendarData.to_date },\r\n            this.propertyid,\r\n            dateToFormattedString(new Date(endDate)),\r\n            this.calendarData.roomsInfo,\r\n            this.calendarData.formattedLegendData,\r\n          );\r\n          this.unassignedRoomsNumber[selectedDate] = result.length;\r\n        } else if (this.unassignedRoomsNumber[selectedDate]) {\r\n          const res = this.unassignedRoomsNumber[selectedDate] - 1;\r\n          this.unassignedRoomsNumber[selectedDate] = res < 0 ? 0 : res;\r\n        }\r\n        const newEndDate = moment(endDate).add(1, 'days').toDate();\r\n        newEndDate.setHours(0, 0, 0, 0);\r\n        endDate = newEndDate.getTime();\r\n        this.renderView();\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  @Listen('reduceAvailableUnitEvent', { target: 'window' })\r\n  handleReduceAvailableUnitEvent(event: CustomEvent<{ fromDate: string; toDate: string }>) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    const { fromDate, toDate } = event.detail;\r\n    let endDate = new Date(fromDate).getTime();\r\n    while (endDate < new Date(toDate).getTime()) {\r\n      const selectedDate = moment(endDate).format('D_M_YYYY');\r\n      this.unassignedRoomsNumber[selectedDate] = this.unassignedRoomsNumber[selectedDate] - 1;\r\n      endDate = moment(endDate).add(1, 'days').toDate().getTime();\r\n    }\r\n    this.renderView();\r\n  }\r\n\r\n  showToBeAssigned(dayInfo) {\r\n    if (this.unassignedRoomsNumber[dayInfo.day] || 0) {\r\n      this.handleOptionEvent('showAssigned');\r\n      setTimeout(() => {\r\n        this.gotoToBeAssignedDate.emit({\r\n          key: 'gotoToBeAssignedDate',\r\n          data: dayInfo.currentDate,\r\n        });\r\n      }, 100);\r\n    } else {\r\n      // do nothing as the value is 0;\r\n    }\r\n  }\r\n\r\n  handleOptionEvent(key, data: any = '') {\r\n    this.optionEvent.emit({ key, data });\r\n  }\r\n\r\n  handleDateSelect(event: CustomEvent) {\r\n    if (Object.keys(event.detail).length > 0) {\r\n      this.handleOptionEvent('calendar', event.detail);\r\n    }\r\n  }\r\n\r\n  handleClearSearch() {\r\n    this.searchValue = '';\r\n    this.searchList = [];\r\n    this.renderView();\r\n  }\r\n\r\n  handleFilterRooms(event: Event) {\r\n    const inputElement = event.target as HTMLInputElement;\r\n    let value = inputElement.value.trim();\r\n    this.searchValue = value;\r\n    value = value.toLowerCase();\r\n    if (value === '') {\r\n      this.handleClearSearch();\r\n    } else {\r\n      this.searchList = this.roomsList.filter(room => room.name.toLocaleLowerCase().indexOf(value) != -1);\r\n    }\r\n    this.renderView();\r\n  }\r\n\r\n  handleScrollToRoom(roomId) {\r\n    this.handleClearSearch();\r\n    this.gotoRoomEvent.emit({ key: 'gotoRoom', roomId });\r\n  }\r\n\r\n  getStringDateFormat(dt) {\r\n    return dt.getFullYear() + '-' + (dt.getMonth() < 9 ? '0' : '') + (dt.getMonth() + 1) + '-' + (dt.getDate() <= 9 ? '0' : '') + dt.getDate();\r\n  }\r\n\r\n  getNewBookingModel() {\r\n    let today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n    let from_date = this.getStringDateFormat(today);\r\n    today.setDate(today.getDate() + 1);\r\n    today.setHours(0, 0, 0, 0);\r\n    let to_date = this.getStringDateFormat(today);\r\n    return {\r\n      ID: '',\r\n      NAME: '',\r\n      EMAIL: '',\r\n      PHONE: '',\r\n      REFERENCE_TYPE: 'PHONE',\r\n      FROM_DATE: from_date, // \"2023-07-09\",\r\n      TO_DATE: to_date, // \"2023-07-11\",\r\n      roomsInfo: this.calendarData.roomsInfo,\r\n      TITLE: locales.entries.Lcz_NewBooking,\r\n      event_type: 'PLUS_BOOKING',\r\n      legendData: this.calendarData.formattedLegendData,\r\n      defaultDateRange: {\r\n        fromDate: new Date(from_date), //new Date(\"2023-09-10\"),\r\n        fromDateStr: '', //\"10 Sep 2023\",\r\n        toDate: new Date(to_date), //new Date(\"2023-09-15\"),\r\n        toDateStr: '', // \"15 Sep 2023\",\r\n        dateDifference: 0,\r\n        editabled: true,\r\n        message: '',\r\n      },\r\n    };\r\n  }\r\n\r\n  renderView() {\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"stickyCell align-items-center topLeftCell preventPageScroll\">\r\n          <div class=\"row justify-content-around no-gutters\">\r\n            {/* {!this.calendarData.is_vacation_rental && (\r\n              <div\r\n                class=\"caledarBtns\"\r\n                onClick={() => this.handleOptionEvent('showAssigned')}\r\n                data-toggle=\"tooltip\"\r\n                data-placement=\"bottom\"\r\n                title={locales.entries.Lcz_UnassignedUnitsTooltip}\r\n              >\r\n\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" class=\"svg-icon\">\r\n                  <path\r\n                    fill=\"#6b6f82\"\r\n                    d=\"M448 160H320V128H448v32zM48 64C21.5 64 0 85.5 0 112v64c0 26.5 21.5 48 48 48H464c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H48zM448 352v32H192V352H448zM48 288c-26.5 0-48 21.5-48 48v64c0 26.5 21.5 48 48 48H464c26.5 0 48-21.5 48-48V336c0-26.5-21.5-48-48-48H48z\"\r\n                  />\r\n                </svg>\r\n              </div>\r\n            )} */}\r\n            {/* <div class=\"caledarBtns\" onClick={() => this.handleOptionEvent('calendar')} data-toggle=\"tooltip\" data-placement=\"bottom\" title={locales.entries.Lcz_Navigate}>\r\n          \r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\" class={'svg-icon'}>\r\n                <path\r\n                  fill=\"#6b6f82\"\r\n                  d=\"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z\"\r\n                />\r\n              </svg>\r\n\r\n              </div> */}\r\n            {/* <div class=\"caledarBtns\" onClick={() => this.handleOptionEvent('gotoToday')} data-toggle=\"tooltip\" data-placement=\"bottom\" title={locales.entries.Lcz_Today}>\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" class=\"svg-icon\">\r\n              <path\r\n                  fill=\"#6b6f82\"\r\n                  d=\"M464 256A208 208 0 1 1 48 256a208 208 0 1 1 416 0zM0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z\"\r\n                />\r\n                </svg>\r\n                </div> */}\r\n            {!this.calendarData.is_vacation_rental && (\r\n              <ir-button\r\n                variant=\"icon\"\r\n                icon_name=\"server\"\r\n                style={{ ...colorVariants.secondary, '--icon-size': '1.5rem' }}\r\n                data-toggle=\"tooltip\"\r\n                data-placement=\"bottom\"\r\n                title={locales.entries.Lcz_UnassignedUnitsTooltip}\r\n                onClickHandler={() => this.handleOptionEvent('showAssigned')}\r\n                btn_styles=\"caledarBtns\"\r\n                visibleBackgroundOnHover\r\n              ></ir-button>\r\n            )}\r\n            <ir-date-picker\r\n              minDate={moment().add(-2, 'months').startOf('month').format('YYYY-MM-DD')}\r\n              // autoApply\r\n              // singleDatePicker\r\n              onDateChanged={evt => {\r\n                console.log('evt', evt);\r\n                this.handleDateSelect(evt);\r\n              }}\r\n              // class=\"datePickerHidden\"\r\n              class={'date_btn'}\r\n              title={locales.entries.Lcz_Navigate}\r\n              data-toggle=\"tooltip\"\r\n              data-placement=\"bottom\"\r\n            >\r\n              <ir-button\r\n                slot=\"trigger\"\r\n                btn_styles=\"caledarBtns\"\r\n                variant=\"icon\"\r\n                icon_name=\"calendar\"\r\n                style={{ ...colorVariants.secondary, '--icon-size': '1.5rem' }}\r\n                onClickHandler={() => this.handleOptionEvent('calendar')}\r\n                visibleBackgroundOnHover\r\n                ref={el => (this.dateRef = el)}\r\n              ></ir-button>\r\n            </ir-date-picker>\r\n\r\n            <ir-button\r\n              variant=\"icon\"\r\n              btn_styles=\"caledarBtns\"\r\n              class={'pointer'}\r\n              icon_name=\"clock\"\r\n              visibleBackgroundOnHover\r\n              style={{ ...colorVariants.secondary, '--icon-size': '1.5rem' }}\r\n              data-toggle=\"tooltip\"\r\n              data-placement=\"bottom\"\r\n              title={locales.entries.Lcz_Today}\r\n              onClickHandler={() => this.handleOptionEvent('gotoToday')}\r\n            ></ir-button>\r\n            <ir-button\r\n              variant=\"icon\"\r\n              btn_styles=\"caledarBtns\"\r\n              icon_name=\"plus\"\r\n              data-toggle=\"tooltip\"\r\n              data-placement=\"bottom\"\r\n              data-testid=\"new_booking_btn\"\r\n              title={locales.entries.Lcz_CreateNewBooking}\r\n              visibleBackgroundOnHover\r\n              style={{ ...colorVariants.secondary, '--icon-size': '1.5rem' }}\r\n              onClickHandler={() => this.handleOptionEvent('add', this.getNewBookingModel())}\r\n            ></ir-button>\r\n            {/* <div\r\n              class=\"caledarBtns\"\r\n              onClick={() => this.handleOptionEvent('add', this.getNewBookingModel())}\r\n              data-toggle=\"tooltip\"\r\n              data-placement=\"bottom\"\r\n              title={locales.entries.Lcz_CreateNewBooking}\r\n            >\r\n\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\" class=\"svg-icon\">\r\n                <path\r\n                  fill=\"#6b6f82\"\r\n                  d=\"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z\"\r\n                />\r\n              </svg>\r\n            </div> */}\r\n          </div>\r\n          <div class=\"row justify-content-around no-gutters searchContiner\">\r\n            <fieldset class={`form-group position-relative ${this.searchValue != '' ? 'show' : ''}`}>\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control form-control-sm input-sm\"\r\n                id=\"iconLeft7\"\r\n                value={this.searchValue}\r\n                placeholder={locales.entries.Lcz_FindUnit}\r\n                onInput={event => this.handleFilterRooms(event)}\r\n              />\r\n              {this.searchValue !== '' ? (\r\n                <div\r\n                  class=\"form-control-position pointer\"\r\n                  onClick={() => this.handleClearSearch()}\r\n                  data-toggle=\"tooltip\"\r\n                  data-placement=\"top\"\r\n                  data-original-title=\"Clear Selection\"\r\n                >\r\n                  <i class=\"la la-close font-small-4\"></i>\r\n                </div>\r\n              ) : null}\r\n\r\n              {this.searchList.length ? (\r\n                <div class=\"position-absolute searchListContainer dropdown-menu dropdown-menu-left min-width-full\">\r\n                  {this.searchList.map(room => (\r\n                    <div class=\"searchListItem1 dropdown-item px-1 text-left pointer\" onClick={() => this.handleScrollToRoom(room.id)}>\r\n                      {room.name}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : null}\r\n            </fieldset>\r\n          </div>\r\n        </div>\r\n        <div class=\"stickyCell headersContainer\">\r\n          <div class=\"monthsContainer\">\r\n            {this.calendarData.monthsInfo.map(monthInfo => (\r\n              <div class=\"monthCell\" style={{ width: monthInfo.daysCount * 58 + 'px' }}>\r\n                <div class=\"monthTitle\">{monthInfo.monthName}</div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          {this.calendarData.days.map(dayInfo => (\r\n            <div\r\n              class={`headerCell align-items-center ${'day-' + dayInfo.day} ${dayInfo.day === this.today || dayInfo.day === this.highlightedDate ? 'currentDay' : ''}`}\r\n              data-day={dayInfo.day}\r\n            >\r\n              {!this.calendarData.is_vacation_rental && (\r\n                <div class=\"preventPageScroll\">\r\n                  <span\r\n                    class={`badge badge-${this.unassignedRoomsNumber[dayInfo.day] || dayInfo.unassigned_units_nbr !== 0 ? 'info pointer' : 'light'} badge-pill`}\r\n                    onClick={() => this.showToBeAssigned(dayInfo)}\r\n                  >\r\n                    {this.unassignedRoomsNumber[dayInfo.day] || dayInfo.unassigned_units_nbr}\r\n                  </span>\r\n                </div>\r\n              )}\r\n              <div class=\"dayTitle\">{dayInfo.dayDisplayName}</div>\r\n              <div class=\"dayCapacityPercent\">{dayInfo.occupancy}%</div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n\r\n/* Legend */\r\n\r\n.legendHeader {\r\n  font-weight: 500;\r\n  letter-spacing: 0.05rem;\r\n  font-size: 1.12rem;\r\n  padding-top: 5px;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.legendCloseBtn {\r\n  position: absolute;\r\n  top: 50%;\r\n  right: 0;\r\n  cursor: pointer;\r\n  font-size: 1.75em;\r\n  line-height: 1em;\r\n  padding: 0.4rem;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 3px;\r\n  transform: translateY(-50%);\r\n}\r\n\r\n.legendCloseBtn:hover {\r\n  background-color: #f6f6f6;\r\n}\r\n\r\n.stickyHeader {\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  top: 0;\r\n  background-color: #ffffff;\r\n  z-index: 1;\r\n}\r\n\r\n.legendRow {\r\n  position: relative;\r\n  vertical-align: middle;\r\n  margin-bottom: 0.3rem;\r\n}\r\n\r\n.legendRow div {\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n}\r\n\r\n.legend_skew,\r\n.legend_skew-bordered,\r\n.legend_skewsplit {\r\n  transform: skew(-30deg);\r\n  width: 15px;\r\n  height: 16px;\r\n}\r\n.legend_skew-bordered {\r\n  border: 1px solid black;\r\n}\r\n\r\n.legend_circle {\r\n  border-radius: 100%;\r\n  width: 10px;\r\n  height: 10px;\r\n  margin: 3px 3px 3px 2px;\r\n}\r\n\r\n.legend_skewsplit {\r\n  border-right: 2px solid #000000;\r\n}\r\n.headerCell .blueColor {\r\n  background-color: #31bef1;\r\n}\r\n.greenColor {\r\n  background-color: #45b16d;\r\n}\r\n.yellowColor {\r\n  background-color: #f4d552;\r\n}\r\n.greyColor {\r\n  background-color: #a0a0a0;\r\n}\r\n.redColor {\r\n  background-color: #f34752;\r\n}\r\n.pinkColor {\r\n  background-color: #f9b4b7;\r\n}\r\n\r\n/* Legend Calendar */\r\n\r\n.legendCalendar .legendRow {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.legendCalendar .legendRow:first-child .legendCal {\r\n  background-color: #ececec;\r\n}\r\n\r\n.legendCalendar .legendRow div {\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n.total-availability {\r\n  font-size: 1em !important;\r\n}\r\n.legendCalendar .legendCal {\r\n  width: 80px;\r\n  height: 25px;\r\n  text-align: center;\r\n  display: inline-grid !important;\r\n  align-content: center;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.legendCalendar .legendCal .badge {\r\n  margin-top: 0.2rem;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.legendCalendar .legendCal.legendCal-h2 {\r\n  height: 40px;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.br-t {\r\n  border-top: 1px solid #a0a0a0;\r\n}\r\n.br-s {\r\n  border-left: 1px solid #a0a0a0;\r\n  border-right: 1px solid #a0a0a0;\r\n}\r\n.br-bt {\r\n  border-bottom: 1px solid #a0a0a0;\r\n}\r\n\r\n.highphenLegend {\r\n  font-size: 0.9em;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.highphenLegend::before {\r\n  width: 12px;\r\n  height: 0.5px;\r\n  content: ' ';\r\n  background-color: #000000;\r\n  vertical-align: middle;\r\n  display: inline-block;\r\n  margin-left: 5px;\r\n  margin-right: 5px;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n/* .badge-pill {\r\n  padding: 4px 1.1em;\r\n  font-size: 0.9em;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n} */\r\n.badge-pill {\r\n  padding: 3px 1em;\r\n  font-size: 0.8em;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.headerCell {\r\n  width: 70px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.dayTitle {\r\n  font-size: 0.8em;\r\n  font-weight: 600;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n.dayCapacityPercent {\r\n  font-size: 0.75em;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n","import locales from '@/stores/locales.store';\r\nimport { Component, Event, EventEmitter, Host, Prop, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'igl-legends',\r\n  styleUrl: 'igl-legends.css',\r\n  scoped: true,\r\n})\r\nexport class IglLegends {\r\n  @Event() optionEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Prop() legendData: { [key: string]: any };\r\n  handleOptionEvent(key, data = '') {\r\n    this.optionEvent.emit({ key, data });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host class=\"legendContainer pr-1 text-left\">\r\n        <div class={'w-full'}>\r\n          <div class={'w-full'}>\r\n            <div class=\"stickyHeader pt-1 \">\r\n              <p class=\"legendHeader\">{locales.entries.Lcz_Legend}</p>\r\n              <div class=\"legendCloseBtn\" onClick={() => this.handleOptionEvent('closeSideMenu')}>\r\n                {/* <i class=\"ft-chevrons-left\"></i> */}\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" height={18} width={18}>\r\n                  <path\r\n                    fill=\"#6b6f82\"\r\n                    d=\"M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z\"\r\n                  />\r\n                </svg>\r\n              </div>\r\n              <hr />\r\n            </div>\r\n            <div class=\"mt-2 pl-1\">\r\n              {this.legendData.map(legendInfo => (\r\n                <div class=\"legendRow \">\r\n                  <div class={`legend_${legendInfo.design} mr-1`} style={{ backgroundColor: legendInfo.color }}></div>\r\n                  <span class=\"font-small-3\">{legendInfo.name}</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n            <hr />\r\n            <div class=\"mt-2\">\r\n              <div class=\"legendCalendar\">\r\n                <div class=\"legendRow align-items-center\">\r\n                  <div class=\"legendCal br-t br-s br-bt\">\r\n                    <strong>MAR 2022</strong>\r\n                  </div>\r\n                  <div class=\"highphenLegend\">{locales.entries.Lcz_MonthAndYear}</div>\r\n                </div>\r\n                <div class=\"legendRow\">\r\n                  <div class=\"legendCal headerCell align-items-center br-s\">\r\n                    <span class=\"badge badge-info  badge-pill\">3</span>\r\n                  </div>\r\n                  <div class=\"highphenLegend\">\r\n                    <div>{locales.entries.Lcz_UnassignedUnits}</div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"legendRow\">\r\n                  <div class=\"legendCal dayTitle br-s\">Fri 18</div>\r\n                  <div class=\"highphenLegend\">{locales.entries.Lcz_Date}</div>\r\n                </div>\r\n                <div class=\"legendRow\">\r\n                  <div class=\"legendCal br-s br-bt dayCapacityPercent\">15%</div>\r\n                  <div class=\"highphenLegend\">{locales.entries.Lcz_Occupancy}</div>\r\n                </div>\r\n                <div class=\"legendRow\">\r\n                  <div class=\"legendCal br-s br-bt  font-weight-bold total-availability\">20</div>\r\n                  <div class=\"highphenLegend\">{locales.entries.Lcz_TotalAvailability}</div>\r\n                </div>\r\n                {/* <div class=\"legendRow align-items-center\">\r\n                  <div class=\"legendCal br-s br-bt font-small-2\">15</div>\r\n                  <div class=\"highphenLegend\">\r\n                    <div>{locales.entries.Lcz_OfflineAvailability}</div>\r\n                  </div>\r\n                </div> */}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n.custom-dropdown {\r\n  cursor: pointer;\r\n  padding: 5px 10px;\r\n  width: min-content;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n}\r\n.dropdown-toggle {\r\n  all: unset;\r\n  display: flex;\r\n  width: max-content;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n.close_btn_style {\r\n  padding: 0.4rem;\r\n}\r\n.close_btn_style:hover {\r\n  background-color: #f6f6f6;\r\n}\r\n.dropdown-menu {\r\n  max-height: 250px;\r\n  overflow-y: auto;\r\n}\r\n.tobeAssignedHeader {\r\n  font-weight: 500;\r\n  letter-spacing: 0.05rem;\r\n  font-size: 1.12rem;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n.assignment_header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding-top: 5px;\r\n  margin-bottom: 1rem;\r\n}\r\n.dropdown-toggle::after {\r\n  content: none;\r\n  display: none;\r\n}\r\n.dropdown-toggle .caret-icon {\r\n  transition: transform 0.2s ease;\r\n}\r\n.show .caret-icon {\r\n  transform: rotate(-180deg);\r\n}\r\n.stickyHeader {\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  top: 0;\r\n  background-color: #ffffff;\r\n  z-index: 1;\r\n}\r\n.pointer {\r\n  cursor: pointer;\r\n}\r\n\r\n.dots {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin: 0 3px;\r\n  padding: 0;\r\n}\r\n.dot {\r\n  width: 5px;\r\n  height: 5px;\r\n  margin: 5px 4px 0;\r\n  background-color: #6b6f82;\r\n  border-radius: 50%;\r\n  animation: dotFlashing 1s infinite linear alternate;\r\n}\r\n.dot:nth-child(2) {\r\n  animation-delay: 0.2s;\r\n}\r\n.dot:nth-child(3) {\r\n  animation-delay: 0.4s;\r\n}\r\n\r\n@keyframes dotFlashing {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  50%,\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n","import { Component, Host, h, Prop, Event, EventEmitter, State, Listen, Fragment, Watch } from '@stencil/core';\r\nimport { ToBeAssignedService } from '@/services/toBeAssigned.service';\r\nimport { dateToFormattedString } from '@/utils/utils';\r\nimport moment from 'moment';\r\nimport locales from '@/stores/locales.store';\r\nimport { getUnassignedDates } from '@/stores/unassigned_dates.store';\r\nimport { colorVariants } from '@/components/ui/ir-icons/icons';\r\n//import { updateCategories } from '@/utils/events.utils';\r\n\r\n@Component({\r\n  tag: 'igl-to-be-assigned',\r\n  styleUrl: 'igl-to-be-assigned.css',\r\n  scoped: true,\r\n})\r\nexport class IglToBeAssigned {\r\n  @Prop() unassignedDatesProp: any;\r\n  @Prop() propertyid: number;\r\n  @Prop() from_date: string;\r\n  @Prop() to_date: string;\r\n  @Prop({ mutable: true }) calendarData: { [key: string]: any };\r\n\r\n  @State() loadingMessage: string;\r\n  @State() showDatesList: boolean = false;\r\n  @State() renderAgain: boolean = false;\r\n  @State() orderedDatesList: any[] = [];\r\n  @State() noScroll = false;\r\n\r\n  @Event() optionEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Event({ bubbles: true, composed: true })\r\n  reduceAvailableUnitEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Event() showBookingPopup: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) addToBeAssignedEvent: EventEmitter;\r\n  @Event({ bubbles: true, composed: true })\r\n  highlightToBeAssignedBookingEvent: EventEmitter;\r\n\r\n  private isGotoToBeAssignedDate: boolean = false;\r\n  private isLoading: boolean = true;\r\n  private selectedDate = null;\r\n  private data: { [key: string]: any } = {};\r\n  private today = new Date();\r\n  private categoriesData: { [key: string]: any } = {};\r\n  private toBeAssignedService: ToBeAssignedService = new ToBeAssignedService();\r\n  private unassignedDates: any;\r\n\r\n  componentWillLoad() {\r\n    this.reArrangeData();\r\n    this.loadingMessage = locales.entries.Lcz_FetchingUnAssignedUnits;\r\n  }\r\n\r\n  @Watch('unassignedDatesProp')\r\n  handleUnassignedDatesToBeAssignedChange(newValue: any) {\r\n    const { fromDate, toDate, data } = newValue;\r\n    let dt = new Date(fromDate);\r\n    dt.setHours(0);\r\n    dt.setMinutes(0);\r\n    dt.setSeconds(0);\r\n    let endDate = dt.getTime();\r\n    while (endDate <= new Date(toDate).getTime()) {\r\n      if (data && !data[endDate] && this.unassignedDates.hasOwnProperty(endDate)) {\r\n        delete this.unassignedDates[endDate];\r\n      } else if (data && data[endDate]) {\r\n        this.unassignedDates[endDate] = data[endDate];\r\n      }\r\n      endDate = moment(endDate).add(1, 'days').toDate().getTime();\r\n    }\r\n    this.data = { ...this.unassignedDates };\r\n    this.orderedDatesList = Object.keys(this.data).sort((a, b) => parseInt(a) - parseInt(b));\r\n\r\n    if (this.orderedDatesList.length) {\r\n      if (!this.data.hasOwnProperty(this.selectedDate)) {\r\n        this.selectedDate = this.orderedDatesList.length ? this.orderedDatesList[0] : null;\r\n      }\r\n      this.showForDate(this.selectedDate, false);\r\n      this.renderView();\r\n    } else {\r\n      this.selectedDate = null;\r\n    }\r\n  }\r\n  handleAssignUnit(event: CustomEvent<{ [key: string]: any }>) {\r\n    const opt: { [key: string]: any } = event.detail;\r\n    const data = opt.data;\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n\r\n    if (opt?.key === 'assignUnit' && this.data) {\r\n      // Verify data.selectedDate exists in this.data\r\n      if (data?.selectedDate && this.data[data.selectedDate]) {\r\n        // Check if categories exist and there's only one category\r\n        if (this.data[data.selectedDate]?.categories && Object.keys(this.data[data.selectedDate]?.categories || {})?.length === 1) {\r\n          this.isLoading = true;\r\n          this.noScroll = true;\r\n        }\r\n\r\n        // Make sure all required properties exist before filtering\r\n        if (\r\n          data?.RT_ID &&\r\n          this.data[data.selectedDate]?.categories &&\r\n          this.data[data.selectedDate].categories[data.RT_ID] &&\r\n          Array.isArray(this.data[data.selectedDate].categories[data.RT_ID]) &&\r\n          data?.assignEvent?.ID\r\n        ) {\r\n          this.data[data.selectedDate].categories[data.RT_ID] = this.data[data.selectedDate].categories[data.RT_ID].filter(\r\n            eventData => eventData && eventData.ID !== data.assignEvent.ID,\r\n          );\r\n        }\r\n\r\n        // Only update calendarData if it exists in the data\r\n        if (data?.calendarData) {\r\n          this.calendarData = data.calendarData;\r\n        }\r\n\r\n        this.renderView();\r\n      }\r\n    }\r\n  }\r\n\r\n  async updateCategories(key, calendarData) {\r\n    try {\r\n      //console.log(\"called\")\r\n      let categorisedRooms = {};\r\n      const result = await this.toBeAssignedService.getUnassignedRooms(\r\n        { from_date: calendarData.from_date, to_date: calendarData.to_date },\r\n        this.propertyid,\r\n        dateToFormattedString(new Date(+key)),\r\n        calendarData.roomsInfo,\r\n        calendarData.formattedLegendData,\r\n      );\r\n      result.forEach(room => {\r\n        if (!categorisedRooms.hasOwnProperty(room.RT_ID)) {\r\n          categorisedRooms[room.RT_ID] = [room];\r\n        } else {\r\n          categorisedRooms[room.RT_ID].push(room);\r\n        }\r\n      });\r\n      this.unassignedDates[key].categories = categorisedRooms;\r\n    } catch (error) {\r\n      //  toastr.error(error);\r\n    }\r\n  }\r\n\r\n  async reArrangeData() {\r\n    try {\r\n      this.today.setHours(0, 0, 0, 0);\r\n      this.calendarData.roomsInfo.forEach(category => {\r\n        this.categoriesData[category.id] = {\r\n          name: category.name,\r\n          roomsList: category.physicalrooms,\r\n          roomIds: category.physicalrooms.map(room => {\r\n            return room.id;\r\n          }),\r\n        };\r\n      });\r\n\r\n      this.selectedDate = null;\r\n      //this.unassignedDates = await this.toBeAssignedService.getUnassignedDates(this.propertyid, dateToFormattedString(new Date()), this.to_date);\r\n      this.unassignedDates = getUnassignedDates();\r\n      console.log(this.unassignedDates);\r\n\r\n      this.data = this.unassignedDates;\r\n      this.orderedDatesList = Object.keys(this.data).sort((a, b) => parseInt(a) - parseInt(b));\r\n\r\n      if (!this.selectedDate && this.orderedDatesList.length) {\r\n        this.selectedDate = this.orderedDatesList[0];\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching unassigned dates:', error);\r\n      //  toastr.error(error);\r\n    }\r\n  }\r\n  async componentDidLoad() {\r\n    setTimeout(() => {\r\n      if (!this.isGotoToBeAssignedDate && Object.keys(this.unassignedDates).length > 0) {\r\n        //console.log(this.isGotoToBeAssignedDate);\r\n        const firstKey = Object.keys(this.unassignedDates)[0];\r\n\r\n        this.showForDate(firstKey);\r\n      }\r\n    }, 100);\r\n  }\r\n  @Listen('gotoToBeAssignedDate', { target: 'window' })\r\n  async gotoDate(event: CustomEvent) {\r\n    this.isGotoToBeAssignedDate = true;\r\n    this.showForDate(event.detail.data);\r\n    this.showDatesList = false;\r\n    this.renderView();\r\n  }\r\n  @Listen('highlightToBeAssignedBookingEvent')\r\n  handleToBeAssignedDate(e: CustomEvent) {\r\n    this.showBookingPopup.emit({\r\n      key: 'calendar',\r\n      data: new Date(e.detail.data.fromDate).getTime() - 86400000,\r\n      noScroll: false,\r\n    });\r\n  }\r\n  async showForDate(dateStamp, withLoading = true) {\r\n    try {\r\n      if (withLoading) {\r\n        this.isLoading = true;\r\n      }\r\n      if (this.showDatesList) {\r\n        this.showUnassignedDate();\r\n      }\r\n      await this.updateCategories(dateStamp, this.calendarData);\r\n      this.addToBeAssignedEvent.emit({ key: 'tobeAssignedEvents', data: [] });\r\n      this.showBookingPopup.emit({\r\n        key: 'calendar',\r\n        data: parseInt(dateStamp) - 86400000,\r\n        noScroll: this.noScroll,\r\n      });\r\n      if (this.isGotoToBeAssignedDate) {\r\n        this.isGotoToBeAssignedDate = false;\r\n      }\r\n      this.isLoading = false;\r\n      this.selectedDate = dateStamp;\r\n      this.renderView();\r\n    } catch (error) {\r\n      // toastr.error(error);\r\n    }\r\n  }\r\n\r\n  getDay(dt) {\r\n    const currentDate = new Date(dt);\r\n    const locale = 'default'; //'en-US';\r\n    const dayOfWeek = this.getLocalizedDayOfWeek(currentDate, locale);\r\n    // const monthName = currentDate.toLocaleString(\"default\", { month: 'short' })\r\n    return dayOfWeek + ' ' + currentDate.getDate() + ', ' + currentDate.getFullYear();\r\n  }\r\n\r\n  getLocalizedDayOfWeek(date, locale) {\r\n    const options = { weekday: 'short' };\r\n    return date.toLocaleDateString(locale, options);\r\n  }\r\n\r\n  handleOptionEvent(key, data = '') {\r\n    this.highlightToBeAssignedBookingEvent.emit({\r\n      key: 'highlightBookingId',\r\n      data: { bookingId: '----' },\r\n    });\r\n    this.addToBeAssignedEvent.emit({ key: 'tobeAssignedEvents', data: [] });\r\n    this.optionEvent.emit({ key, data });\r\n  }\r\n\r\n  showUnassignedDate() {\r\n    this.showDatesList = !this.showDatesList;\r\n  }\r\n\r\n  getToBeAssignedEntities() {\r\n    // toBeAssignedEvents\r\n  }\r\n\r\n  getCategoryView() {\r\n    if (this.orderedDatesList.length && this.selectedDate && this.data[this.selectedDate]) {\r\n      return Object.entries(this.data[this.selectedDate].categories).map(([id, eventDatas], ind) => (\r\n        <igl-tba-category-view\r\n          calendarData={this.calendarData}\r\n          selectedDate={this.selectedDate}\r\n          categoryId={id}\r\n          categoryIndex={ind}\r\n          categoriesData={this.categoriesData}\r\n          eventDatas={eventDatas}\r\n          onAssignUnitEvent={evt => this.handleAssignUnit(evt)}\r\n        ></igl-tba-category-view>\r\n      ));\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  renderView() {\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host class=\"tobeAssignedContainer pr-1 text-left\">\r\n        <div>\r\n          <div>\r\n            <div class=\"stickyHeader pt-1\">\r\n              <div class={'assignment_header'}>\r\n                <p class=\"tobeAssignedHeader \">{locales.entries.Lcz_Assignments}</p>\r\n                <ir-button\r\n                  class=\"close_btn\"\r\n                  variant=\"icon\"\r\n                  btn_styles=\"close_btn_style\"\r\n                  icon_name=\"double_caret_left\"\r\n                  style={colorVariants.secondary}\r\n                  onClickHandler={() => this.handleOptionEvent('closeSideMenu')}\r\n                  visibleBackgroundOnHover\r\n                ></ir-button>\r\n              </div>\r\n              <hr />\r\n              {Object.keys(this.data).length === 0 ? (\r\n                <p>{locales.entries.Lcz_AllBookingsAreAssigned}</p>\r\n              ) : this.isLoading ? (\r\n                <p class=\"d-flex align-items-center\">\r\n                  <span class=\"p-0\">{this.loadingMessage}</span>\r\n                  <div class=\"dots\">\r\n                    <div class=\"dot\"></div>\r\n                    <div class=\"dot\"></div>\r\n                    <div class=\"dot\"></div>\r\n                  </div>\r\n                </p>\r\n              ) : (\r\n                <Fragment>\r\n                  {this.orderedDatesList.length ? (\r\n                    <div\r\n                      class={`custom-dropdown border border-light rounded text-center ` + (this.showDatesList ? 'show' : '')}\r\n                      id=\"dropdownMenuButton\"\r\n                      data-toggle=\"dropdown\"\r\n                      aria-haspopup=\"true\"\r\n                      aria-expanded=\"false\"\r\n                    >\r\n                      <div\r\n                        class={'dropdown-toggle'}\r\n                        //onClick={() => this.showUnassignedDate()}\r\n                      >\r\n                        <span class=\"font-weight-bold\">{this.data[this.selectedDate].dateStr}</span>\r\n                        <svg class={'caret-icon'} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\" height={14} width={14}>\r\n                          <path\r\n                            fill=\"#6b6f82\"\r\n                            d=\"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z\"\r\n                          />\r\n                        </svg>\r\n                      </div>\r\n                      <div class=\"dropdown-menu dropdown-menu-right full-width\" aria-labelledby=\"dropdownMenuButton\">\r\n                        {this.orderedDatesList?.map(ordDate => (\r\n                          <div class=\"dropdown-item pointer\" onClick={() => this.showForDate(ordDate)}>\r\n                            {this.data[ordDate].dateStr}\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    locales.entries.Lcz_AllBookingsAreAssigned\r\n                  )}\r\n                </Fragment>\r\n              )}\r\n            </div>\r\n            {!this.isLoading && (\r\n              <div class=\"scrollabledArea\">\r\n                {this.orderedDatesList.length ? (\r\n                  Object.keys(this.data[this.selectedDate].categories).length ? (\r\n                    this.getCategoryView()\r\n                  ) : (\r\n                    <div class=\"mt-1\">{locales.entries.Lcz_AllAssignForThisDay}</div>\r\n                  )\r\n                ) : null}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  box-sizing: border-box;\r\n  margin: 0;\r\n  position: relative;\r\n}\r\n.loading-container {\r\n  position: relative;\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.close-icon {\r\n  position: absolute;\r\n  top: 18px;\r\n  right: 33px;\r\n  outline: none;\r\n}\r\n.close {\r\n  float: right;\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n  line-height: 1;\r\n  color: #000;\r\n  text-shadow: 0 1px 0 #fff;\r\n  opacity: 0.5;\r\n\r\n  padding: 0;\r\n  background-color: transparent;\r\n  border: 0;\r\n  appearance: none;\r\n}\r\n.card {\r\n  top: 0;\r\n  z-index: 1000;\r\n}\r\n.card-title {\r\n  border-bottom: 1px solid #e4e5ec;\r\n  width: 100%;\r\n}\r\n.irfontgreen {\r\n  color: #0e930e;\r\n}\r\n.currency {\r\n  display: block;\r\n  position: absolute;\r\n  margin: 0;\r\n  padding: 0;\r\n  height: auto;\r\n  left: 10px;\r\n}\r\n.rate-input {\r\n  font-size: 14px;\r\n  line-height: 0;\r\n  padding: 0;\r\n  height: 0;\r\n  border-left: 0;\r\n  border-radius: 0.25rem !important;\r\n}\r\n.rate-input-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  box-sizing: border-box;\r\n  flex: 1;\r\n}\r\n.new-currency {\r\n  color: #3b4781;\r\n  border: 1px solid #cacfe7;\r\n  font-size: 0.975rem;\r\n  height: 2rem;\r\n  background: rgb(255, 255, 255);\r\n  padding-right: 0 !important;\r\n  border-right: 0;\r\n  border-top-right-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n  transition: border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n}\r\n.input-group-prepend span[data-state='focus'] {\r\n  border-color: var(--blue);\r\n}\r\n.input-group-prepend span[data-disabled] {\r\n  background-color: #eceff1;\r\n  border-color: rgba(118, 118, 118, 0.3);\r\n}\r\n.rateInputBorder {\r\n  padding-left: 5px !important;\r\n  padding-right: 5px !important;\r\n  border-top-left-radius: 0 !important;\r\n  border-bottom-left-radius: 0 !important;\r\n}\r\n","import { Component, Host, Prop, State, h, Event, EventEmitter, Fragment } from '@stencil/core';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport { convertDatePrice, formatDate, getDaysArray } from '@/utils/utils';\r\nimport { Booking, Day, IUnit, Room } from '@/models/booking.dto';\r\nimport { IRoomNightsDataEventPayload } from '@/models/property-types';\r\nimport moment from 'moment';\r\nimport locales from '@/stores/locales.store';\r\nimport { Variation } from '@/models/property';\r\n\r\n@Component({\r\n  tag: 'ir-room-nights',\r\n  styleUrl: 'ir-room-nights.css',\r\n  scoped: true,\r\n})\r\nexport class IrRoomNights {\r\n  @Prop() bookingNumber: string;\r\n  @Prop() propertyId: number;\r\n  @Prop() language: string;\r\n  @Prop() identifier: string;\r\n  @Prop() toDate: string;\r\n  @Prop() fromDate: string;\r\n  @Prop() pool: string;\r\n  @Prop() ticket: string;\r\n  @Prop() defaultDates: { from_date: string; to_date: string };\r\n\r\n  @State() bookingEvent: Booking;\r\n  @State() selectedRoom: Room;\r\n  @State() rates: Day[] = [];\r\n  @State() isLoading = false;\r\n  @State() initialLoading = false;\r\n  @State() inventory: number | null = null;\r\n  @State() isEndDateBeforeFromDate: boolean = false;\r\n  @State() defaultTotalNights = 0;\r\n  @State() isInputFocused = -1;\r\n  @State() dates: { from_date: Date; to_date: Date } = { from_date: new Date(), to_date: new Date() };\r\n\r\n  @Event() closeRoomNightsDialog: EventEmitter<IRoomNightsDataEventPayload>;\r\n\r\n  private bookingService = new BookingService();\r\n\r\n  componentWillLoad() {\r\n    this.dates = { from_date: new Date(this.fromDate), to_date: new Date(this.toDate) };\r\n    this.init();\r\n  }\r\n\r\n  isButtonDisabled() {\r\n    return this.isLoading || this.rates.some(rate => rate.amount === -1) || this.inventory === 0 || this.inventory === null;\r\n  }\r\n  async init() {\r\n    try {\r\n      const { from_date } = this.defaultDates;\r\n      if (moment(from_date, 'YYYY-MM-DD').isBefore(moment(this.fromDate, 'YYYY-MM-DD'))) {\r\n        this.dates.from_date = new Date(from_date);\r\n      } else {\r\n        this.dates.from_date = new Date(this.fromDate);\r\n      }\r\n      this.dates.to_date = new Date(this.toDate);\r\n      this.bookingEvent = await this.bookingService.getExposedBooking(this.bookingNumber, this.language);\r\n      if (this.bookingEvent) {\r\n        const filteredRooms = this.bookingEvent.rooms.filter(room => room.identifier === this.identifier);\r\n        this.selectedRoom = filteredRooms[0];\r\n        const lastDay = this.selectedRoom?.days[this.selectedRoom.days.length - 1];\r\n        //let first_rate = this.selectedRoom.days[0].amount;\r\n        if (moment(this.toDate).add(-1, 'days').isSame(moment(lastDay.date))) {\r\n          console.log('here1');\r\n          const amount = await this.fetchBookingAvailability(this.fromDate, this.selectedRoom.days[0].date, this.selectedRoom.rateplan.id);\r\n          const newDatesArr = getDaysArray(this.selectedRoom.days[0].date, this.fromDate);\r\n          this.isEndDateBeforeFromDate = true;\r\n          this.rates;\r\n          this.rates = [\r\n            ...newDatesArr.map(day => ({\r\n              amount: amount / newDatesArr.length,\r\n              date: day,\r\n              cost: null,\r\n            })),\r\n            ...this.selectedRoom.days,\r\n          ];\r\n          this.defaultTotalNights = this.rates.length - this.selectedRoom.days.length;\r\n        } else {\r\n          console.log('here2');\r\n          console.log(lastDay);\r\n          const amount = await this.fetchBookingAvailability(this.bookingEvent.to_date, moment(this.toDate, 'YYYY-MM-DD').format('YYYY-MM-DD'), this.selectedRoom.rateplan.id);\r\n          const newDatesArr = getDaysArray(lastDay.date, this.toDate);\r\n          this.rates = [\r\n            ...this.selectedRoom.days,\r\n            ...newDatesArr.map(day => ({\r\n              amount: amount / newDatesArr.length,\r\n              date: day,\r\n              cost: null,\r\n            })),\r\n          ];\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  private handleInput(event: string, index: number) {\r\n    let inputValue = event;\r\n    let days = [...this.rates];\r\n    inputValue = inputValue.replace(/[^0-9.]/g, '');\r\n    if (inputValue === '') {\r\n      days[index].amount = -1;\r\n    } else {\r\n      if (!isNaN(Number(inputValue))) {\r\n        days[index].amount = Number(inputValue);\r\n      }\r\n    }\r\n    this.rates = days;\r\n  }\r\n  async fetchBookingAvailability(from_date: string, to_date: string, rate_plan_id: number) {\r\n    try {\r\n      this.initialLoading = true;\r\n      const bookingAvailability = await this.bookingService.getBookingAvailability({\r\n        from_date,\r\n        to_date,\r\n        propertyid: this.propertyId,\r\n        adultChildCount: {\r\n          adult: this.selectedRoom.rateplan.selected_variation.adult_nbr,\r\n          child: this.selectedRoom.rateplan.selected_variation.child_nbr,\r\n        },\r\n        language: this.language,\r\n        currency: this.bookingEvent.currency,\r\n        room_type_ids: [this.selectedRoom.roomtype.id],\r\n        rate_plan_ids: [rate_plan_id],\r\n      });\r\n      console.log(bookingAvailability[0], rate_plan_id);\r\n      this.inventory = bookingAvailability[0].inventory;\r\n      const rate_plan = bookingAvailability[0].rateplans.find(rate => rate.id === rate_plan_id);\r\n      if (!rate_plan || !rate_plan.variations) {\r\n        this.inventory = null;\r\n        return null;\r\n      }\r\n      const selected_variation: Variation = rate_plan.variations?.find(\r\n        variation =>\r\n          variation.adult_nbr === this.selectedRoom.rateplan.selected_variation.adult_nbr && variation.child_nbr === this.selectedRoom.rateplan.selected_variation.child_nbr,\r\n      );\r\n      if (!selected_variation) {\r\n        return null;\r\n      }\r\n      return selected_variation.discounted_gross_amount;\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      this.initialLoading = false;\r\n    }\r\n  }\r\n\r\n  private renderInputField(index: number, currency_symbol: string, day: Day) {\r\n    return (\r\n      <div class=\"col-3 ml-1 position-relative  m-0 p-0 rate-input-container\">\r\n        <ir-price-input\r\n          value={day.amount > 0 ? day.amount.toString() : ''}\r\n          disabled={this.inventory === 0 || this.inventory === null}\r\n          currency={currency_symbol}\r\n          aria-label=\"rate\"\r\n          aria-describedby=\"rate cost\"\r\n          onTextChange={e => this.handleInput(e.detail, index)}\r\n        ></ir-price-input>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private renderReadOnlyField(currency_symbol: string, day: Day) {\r\n    return <p class=\"col-9 ml-1 m-0 p-0\">{`${currency_symbol}${Number(day.amount).toFixed(2)}`}</p>;\r\n  }\r\n  private renderRateFields(index: number, currency_symbol: string, day: Day) {\r\n    if (this.isEndDateBeforeFromDate) {\r\n      if (index < this.defaultTotalNights) {\r\n        return this.renderInputField(index, currency_symbol, day);\r\n      } else {\r\n        return this.renderReadOnlyField(currency_symbol, day);\r\n      }\r\n    } else {\r\n      return index < this.selectedRoom.days.length ? this.renderReadOnlyField(currency_symbol, day) : this.renderInputField(index, currency_symbol, day);\r\n    }\r\n  }\r\n  renderDates() {\r\n    const currency_symbol = this.bookingEvent.currency.symbol;\r\n    // const currency_symbol = getCurrencySymbol(this.bookingEvent.currency.code);\r\n    return (\r\n      <div class={'mt-2 m-0'}>\r\n        {this.rates?.map((day, index) => (\r\n          <div class={'row m-0 mt-1 align-items-center'}>\r\n            <p class={'col-2 m-0 p-0'}>{convertDatePrice(day.date)}</p>\r\n            {this.renderRateFields(index, currency_symbol, day)}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n  async handleRoomConfirmation() {\r\n    try {\r\n      this.isLoading = true;\r\n      let oldRooms = [...this.bookingEvent.rooms];\r\n      let selectedRoomIndex = oldRooms.findIndex(room => room.identifier === this.identifier);\r\n      if (selectedRoomIndex === -1) {\r\n        throw new Error('Invalid Pool');\r\n      }\r\n      oldRooms[selectedRoomIndex] = {\r\n        ...oldRooms[selectedRoomIndex],\r\n        days: this.rates,\r\n        to_date: moment(this.dates.to_date).format('YYYY-MM-DD'),\r\n        from_date: moment(this.dates.from_date).format('YYYY-MM-DD'),\r\n      };\r\n      const body = {\r\n        assign_units: true,\r\n        check_in: true,\r\n        is_pms: true,\r\n        is_direct: true,\r\n        pickup_info: this.bookingEvent.pickup_info,\r\n        extra_services: this.bookingEvent.extra_services,\r\n        booking: {\r\n          booking_nbr: this.bookingNumber,\r\n          from_date: moment(this.dates.from_date).format('YYYY-MM-DD'),\r\n          to_date: moment(this.dates.to_date).format('YYYY-MM-DD'),\r\n          remark: this.bookingEvent.remark,\r\n          property: this.bookingEvent.property,\r\n          source: this.bookingEvent.source,\r\n          currency: this.bookingEvent.currency,\r\n          arrival: this.bookingEvent.arrival,\r\n          guest: this.bookingEvent.guest,\r\n          rooms: oldRooms,\r\n        },\r\n      };\r\n      await this.bookingService.doReservation(body);\r\n      this.closeRoomNightsDialog.emit({ type: 'confirm', pool: this.pool });\r\n    } catch (error) {\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n  render() {\r\n    if (!this.bookingEvent) {\r\n      return (\r\n        <div class=\"loading-container\">\r\n          <ir-loading-screen></ir-loading-screen>\r\n        </div>\r\n      );\r\n    }\r\n    console.log(this.inventory);\r\n    return (\r\n      <Host>\r\n        <div class=\"card position-sticky mb-0 shadow-none p-0 \">\r\n          <div class=\"d-flex mt-2 align-items-center justify-content-between \">\r\n            <h3 class=\"card-title text-left pb-1 font-medium-2 px-2\">\r\n              {locales.entries.Lcz_AddingRoomNightsTo} {this.selectedRoom?.roomtype?.name} {(this.selectedRoom?.unit as IUnit).name}\r\n            </h3>\r\n            <button type=\"button\" class=\"close close-icon\" onClick={() => this.closeRoomNightsDialog.emit({ type: 'cancel', pool: this.pool })}>\r\n              <ir-icon icon=\"ft-x\" class={'m-0'}></ir-icon>\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <section class={'text-left px-2'}>\r\n          <p class={'font-medium-1'}>\r\n            {`${locales.entries.Lcz_Booking}#`} {this.bookingNumber}\r\n          </p>\r\n          {this.initialLoading ? (\r\n            <p class={'mt-2 text-secondary'}>{locales.entries['Lcz_CheckingRoomAvailability ']}</p>\r\n          ) : (\r\n            <Fragment>\r\n              <p class={'font-weight-bold font-medium-1'}>{`${formatDate(moment(this.dates.from_date).format('YYYY-MM-DD'), 'YYYY-MM-DD')} - ${formatDate(\r\n                moment(this.dates.to_date).format('YYYY-MM-DD'),\r\n                'YYYY-MM-DD',\r\n              )}`}</p>\r\n              <p class={'font-medium-1 mb-0'}>\r\n                {`${this.selectedRoom.rateplan.name}`} {this.selectedRoom.rateplan.is_non_refundable && <span class={'irfontgreen'}>{locales.entries.Lcz_NonRefundable}</span>}\r\n              </p>\r\n              {(this.inventory === 0 || this.inventory === null) && <p class=\"font-medium-1 text danger\">{locales.entries.Lcz_NoAvailabilityForAdditionalNights}</p>}\r\n\r\n              {this.selectedRoom.rateplan.custom_text && <p class={'text-secondary mt-0'}>{this.selectedRoom.rateplan.custom_text}</p>}\r\n              {this.renderDates()}\r\n            </Fragment>\r\n          )}\r\n        </section>\r\n        <section class={'d-flex align-items-center mt-2 px-2'}>\r\n          <ir-button\r\n            btn_color=\"secondary\"\r\n            btn_disabled={this.isLoading}\r\n            text={locales?.entries.Lcz_Cancel}\r\n            class=\"full-width\"\r\n            btn_styles=\"justify-content-center\"\r\n            onClickHandler={() => this.closeRoomNightsDialog.emit({ type: 'cancel', pool: this.pool })}\r\n          ></ir-button>\r\n\r\n          {this.inventory > 0 && this.inventory !== null && (\r\n            <ir-button\r\n              isLoading={this.isLoading}\r\n              text={locales?.entries.Lcz_Confirm}\r\n              btn_disabled={this.isButtonDisabled()}\r\n              class=\"ml-1 full-width\"\r\n              btn_styles=\"justify-content-center\"\r\n              onClickHandler={this.handleRoomConfirmation.bind(this)}\r\n            ></ir-button>\r\n          )}\r\n        </section>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"names":["HouseKeepingService","h","locales","index","calendar_dates","moment","Host","isRequestPending","ToBeAssignedService","handleUnAssignedDatesChange","dateToFormattedString","colorVariants","getUnassignedDates","Fragment","BookingService","getDaysArray","convertDatePrice","formatDate"],"mappings":"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"}