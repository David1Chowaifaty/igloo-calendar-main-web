{"file":"ir-queue-manager.entry.cjs.js","mappings":"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","names":["Token","axios","h","Host"],"sources":["src/components/ir-queue-manager/ir-queue-manager.css?tag=ir-queue-manager&encapsulation=scoped","src/components/ir-queue-manager/ir-queue-manager.tsx"],"sourcesContent":[":host {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n}\n","import Token from '@/models/Token';\nimport { Component, Element, Host, Prop, State, Watch, h } from '@stencil/core';\nimport axios from 'axios';\n\n@Component({\n  tag: 'ir-queue-manager',\n  styleUrl: 'ir-queue-manager.css',\n  scoped: true,\n})\nexport class IrQueueManager {\n  @Element() el: HTMLElement;\n\n  @Prop() ticket: string = '';\n\n  @State() isLoading: boolean = true;\n\n  private tokenService = new Token();\n  @State() data: {\n    pendingRequests: number[];\n    properties: string[];\n    q_name: string;\n    total_pending: number;\n  }[];\n  componentWillLoad() {\n    if (this.ticket) {\n      this.tokenService.setToken(this.ticket);\n      this.init();\n    }\n  }\n  @Watch('ticket')\n  handleTicketChange(newValue: string, oldValue: string) {\n    if (newValue !== oldValue && newValue) {\n      this.tokenService.setToken(this.ticket);\n      this.init();\n    }\n  }\n\n  private async init() {\n    const { data } = await axios.post('/Get_Q_Summary', {});\n    if (data.ExceptionMsg) {\n      return;\n    }\n    this.data = data.My_Result.map(r => {\n      const { pendingRequests, properties } = this.formatResults(r.properties);\n      return {\n        pendingRequests,\n        properties,\n        q_name: r.q_name,\n        total_pending: r.total_pending,\n      };\n    });\n    this.isLoading = false;\n  }\n  private formatResults(data: string): {\n    properties: string[];\n    pendingRequests: number[];\n  } {\n    const properties: string[] = [];\n    const pendingRequests: number[] = [];\n\n    if (!data) {\n      return { properties, pendingRequests };\n    }\n\n    for (const item of data.split(',')) {\n      const [property, pending] = item.split('|').map(v => v.trim());\n\n      if (!property || pending === undefined) continue;\n\n      const pendingNumber = Number(pending);\n      if (Number.isNaN(pendingNumber)) continue;\n\n      properties.push(property);\n      pendingRequests.push(pendingNumber);\n    }\n\n    return {\n      properties,\n      pendingRequests,\n    };\n  }\n  render() {\n    if (this.isLoading) {\n      return <ir-loading-screen></ir-loading-screen>;\n    }\n    return (\n      <Host>\n        <div class=\"ir-page__container\">\n          <h3 class=\"page-title\">Pending Queues</h3>\n\n          {this.data.length === 0 && <ir-empty-state style={{ marginTop: '20vh' }}></ir-empty-state>}\n          {this.data.map(d => (\n            <wa-card>\n              <p slot=\"header\">\n                {d.q_name} ({d.total_pending} total pending)\n              </p>\n              <ir-queue-chart label={d.q_name} labels={d.properties} values={d.pendingRequests}></ir-queue-chart>\n            </wa-card>\n          ))}\n        </div>\n      </Host>\n    );\n  }\n}\n"],"version":3}