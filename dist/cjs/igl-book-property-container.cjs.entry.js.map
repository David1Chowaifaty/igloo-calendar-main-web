{"file":"igl-book-property-container.entry.cjs.js","mappings":";;;;;;;;;;;;;;;AAAA,MAAM,2BAA2B,GAAG,4eAA4e,CAAC;AACjhB,uCAAe,2BAA2B;;MCW7B,wBAAwB;IALrC;;;QAMU,aAAQ,GAAW,EAAE,CAAC;QACtB,WAAM,GAAW,EAAE,CAAC;QAKpB,8BAAyB,GAAY,IAAI,CAAC;QAKzC,iBAAY,GAAQ,EAAE,CAAC;QAIxB,mBAAc,GAAG,IAAIA,8BAAc,EAAE,CAAC;QACtC,gBAAW,GAAG,IAAIC,wBAAW,EAAE,CAAC;QAChC,UAAK,GAAG,IAAIC,WAAK,EAAE,CAAC;KA+G7B;IA7GC,YAAY,CAAC,eAAe;;QAC1B,IAAI,SAAS,GAA6B,IAAI,KAAK,EAAE,CAAC;QACtD,IAAI,MAAA,MAAA,eAAe,CAAC,SAAS,0CAAE,SAAS,0CAAE,MAAM,EAAE;YAChD,SAAS,GAAG,eAAe,CAAC,SAAS,CAAC,SAAS,CAAC;YAChD,eAAe,CAAC,SAAS,CAAC,SAAS,CAAC,OAAO,CAAC,YAAY;gBACtD,YAAY,CAAC,QAAQ,GAAG,IAAI,CAAC;aAC9B,CAAC,CAAC;SACJ;QACD,IAAI,CAAC,YAAY,CAAC,SAAS,GAAG,SAAS,CAAC;KACzC;IACD,MAAM,aAAa;QACjB,IAAI;YACF,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE;gBAC/B,MAAM,IAAI,KAAK,CAAC,qCAAqC,CAAC,CAAC;aACxD;YACD,MAAM,CAAC,YAAY,EAAE,aAAa,EAAE,aAAa,CAAC,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC;gBACrE,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,UAAU,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC,EAAE,CAAC;gBACpG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC;gBAC7C,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC;aAChD,CAAC,CAAC;YACH,IAAI,CAACC,qBAAO,CAAC,OAAO,EAAE;gBACpBA,qBAAO,CAAC,OAAO,GAAG,aAAa,CAAC,OAAO,CAAC;gBACxCA,qBAAO,CAAC,SAAS,GAAG,aAAa,CAAC,SAAS,CAAC;aAC7C;YACD,IAAI,CAAC,SAAS,GAAG,aAAa,CAAC;YAE/B,MAAM,EAAE,uBAAuB,EAAE,cAAc,EAAE,QAAQ,EAAE,uBAAuB,EAAE,uBAAuB,EAAE,gBAAgB,EAAE,GAAG,YAAY,CAAC,WAAW,CAAC,CAAC;YAC5J,IAAI,CAAC,YAAY,GAAG,EAAE,QAAQ,EAAE,uBAAuB,EAAE,uBAAuB,EAAE,UAAU,EAAE,gBAAgB,EAAE,CAAC;YACjH,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC;YAChC,MAAM,kBAAkB,GAAG,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;YAC1C,IAAI,CAAC,kBAAkB,GAAG,cAAc,CAAC,IAAI,CAAC,MAAM,IAAI,kBAAkB,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;SACnG;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,KAAK,CAAC,yBAAyB,EAAE,KAAK,CAAC,CAAC;SACjD;KACF;IACD,iBAAiB;QACf,IAAI,IAAI,CAAC,MAAM,KAAK,EAAE,EAAE;YACtB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACjC,IAAI,CAAC,aAAa,EAAE,CAAC;SACtB;KACF;IAED,aAAa,CAAC,QAAgB,EAAE,QAAgB;QAC9C,IAAI,QAAQ,KAAK,QAAQ,EAAE;YACzB,OAAO;SACR;QACD,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACjC,IAAI,CAAC,aAAa,EAAE,CAAC;KACtB;IACD,wBAAwB;QACtB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;KACzB;IACD,oBAAoB;QAClB,MAAM,QAAQ,GAAG,IAAI,IAAI,EAAE,CAAC;QAC5B,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC;QACxC,IAAI,CAAC,WAAiD,GAAG;YACxD,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,gBAAgB,EAAE;gBAChB,QAAQ,EAAE,IAAI,IAAI,EAAE;gBACpB,WAAW,EAAE,EAAE;gBACf,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE,EAAE;gBACb,cAAc,EAAE,CAAC;gBACjB,OAAO,EAAE,EAAE;aACZ;YACD,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,KAAK,EAAE,EAAE;YACT,UAAU,EAAE,cAAc;YAC1B,EAAE,EAAE,EAAE;YACN,IAAI,EAAE,EAAE;YACR,KAAK,EAAE,EAAE;YACT,cAAc,EAAE,EAAE;YAClB,KAAK,EAAEA,qBAAO,CAAC,OAAO,CAAC,cAAc;SACtC,CAAC;KACH;IACD,MAAM;QACJ,QACEC,QAACC,UAAI,uDACF,IAAI,CAAC,yBAAyB,KAC7BD,QAACE,cAAQ,uDACPF,wEAAqB,EACrBA,8EAAiC,CACxB,CACZ,EAEDA,kEAAK,KAAK,EAAC,gBAAgB,EAAC,OAAO,EAAE,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,IACvEA,mEAAM,IAAI,EAAC,SAAS,GAAQ,CACxB,EACL,IAAI,CAAC,WAAW,KACfA,gFACE,qBAAqB,EAAE,IAAI,CAAC,YAAY,CAAC,uBAAuB,EAChE,qBAAqB,EAAE,IAAI,CAAC,YAAY,CAAC,uBAAuB,EAChE,kBAAkB,EAAE,IAAI,CAAC,kBAAkB,EAC3C,SAAS,EAAE,IAAI,CAAC,SAAS,EACzB,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC,QAAQ,EACpC,QAAQ,EAAE,IAAI,CAAC,QAAQ,EACvB,UAAU,EAAE,IAAI,CAAC,UAAU,EAC3B,WAAW,EAAE,IAAI,CAAC,WAAW,EAC7B,iBAAiB,EAAE,CAAC,CAAc;gBAChC,CAAC,CAAC,wBAAwB,EAAE,CAAC;gBAC7B,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aAClC,EACD,oBAAoB,EAAE,MAAM,IAAI,CAAC,wBAAwB,EAAE,GACxC,CACtB,CACI,EACP;KACH;;;;;;;;;","names":["BookingService","RoomService","Token","locales","h","Host","Fragment"],"sources":["src/components/igl-book-property-container/igl-book-property-container.css?tag=igl-book-property-container&encapsulation=scoped","src/components/igl-book-property-container/igl-book-property-container.tsx"],"sourcesContent":[":host {\n  display: block;\n  margin: 0;\n  padding: 0;\n  letter-spacing: 0px !important;\n  font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;\n  font-size: 1rem !important;\n  font-weight: 400 !important;\n  line-height: 1.45 !important;\n  color: #6b6f82 !important;\n  text-align: left !important;\n}\n.book-container {\n  width: min-content;\n  margin: 0;\n  padding: 0;\n}\nh3 {\n  font-size: 1rem;\n}\n","import { IglBookPropertyPayloadPlusBooking } from '@/models/igl-book-property';\nimport Token from '@/models/Token';\nimport { BookingService } from '@/services/booking.service';\nimport { RoomService } from '@/services/room.service';\nimport locales from '@/stores/locales.store';\nimport { Component, Host, State, h, Prop, Watch, Event, EventEmitter, Fragment } from '@stencil/core';\nimport { ICountry } from '@/models/IBooking';\n@Component({\n  tag: 'igl-book-property-container',\n  styleUrl: 'igl-book-property-container.css',\n  scoped: true,\n})\nexport class IglBookPropertyContainer {\n  @Prop() language: string = '';\n  @Prop() ticket: string = '';\n  @Prop() p: string;\n  @Prop() propertyid: number;\n  @Prop() from_date: string;\n  @Prop() to_date: string;\n  @Prop() withIrToastAndInterceptor: boolean = true;\n\n  @State() bookingItem: IglBookPropertyPayloadPlusBooking | null;\n  @State() showPaymentDetails: any;\n  @State() countries: ICountry[];\n  @State() calendarData: any = {};\n\n  @Event() resetBookingData: EventEmitter<null>;\n\n  private bookingService = new BookingService();\n  private roomService = new RoomService();\n  private token = new Token();\n\n  setRoomsData(roomServiceResp) {\n    let roomsData: { [key: string]: any }[] = new Array();\n    if (roomServiceResp.My_Result?.roomtypes?.length) {\n      roomsData = roomServiceResp.My_Result.roomtypes;\n      roomServiceResp.My_Result.roomtypes.forEach(roomCategory => {\n        roomCategory.expanded = true;\n      });\n    }\n    this.calendarData.roomsInfo = roomsData;\n  }\n  async initializeApp() {\n    try {\n      if (!this.propertyid && !this.p) {\n        throw new Error('Property ID or username is required');\n      }\n      const [roomResponse, languageTexts, countriesList] = await Promise.all([\n        this.roomService.getExposedProperty({ id: this.propertyid, language: this.language, aname: this.p }),\n        this.roomService.fetchLanguage(this.language),\n        this.bookingService.getCountries(this.language),\n      ]);\n      if (!locales.entries) {\n        locales.entries = languageTexts.entries;\n        locales.direction = languageTexts.direction;\n      }\n      this.countries = countriesList;\n\n      const { allowed_payment_methods: paymentMethods, currency, allowed_booking_sources, adult_child_constraints, calendar_legends } = roomResponse['My_Result'];\n      this.calendarData = { currency, allowed_booking_sources, adult_child_constraints, legendData: calendar_legends };\n      this.setRoomsData(roomResponse);\n      const paymentCodesToShow = ['001', '004'];\n      this.showPaymentDetails = paymentMethods.some(method => paymentCodesToShow.includes(method.code));\n    } catch (error) {\n      console.error('Error initializing app:', error);\n    }\n  }\n  componentWillLoad() {\n    if (this.ticket !== '') {\n      this.token.setToken(this.ticket);\n      this.initializeApp();\n    }\n  }\n  @Watch('ticket')\n  ticketChanged(newValue: string, oldValue: string) {\n    if (newValue === oldValue) {\n      return;\n    }\n    this.token.setToken(this.ticket);\n    this.initializeApp();\n  }\n  handleCloseBookingWindow() {\n    this.bookingItem = null;\n  }\n  handleTriggerClicked() {\n    const tomorrow = new Date();\n    tomorrow.setDate(tomorrow.getDate() + 1);\n    (this.bookingItem as IglBookPropertyPayloadPlusBooking) = {\n      FROM_DATE: this.from_date,\n      defaultDateRange: {\n        fromDate: new Date(),\n        fromDateStr: '',\n        toDate: tomorrow,\n        toDateStr: '',\n        dateDifference: 0,\n        message: '',\n      },\n      TO_DATE: this.to_date,\n      EMAIL: '',\n      event_type: 'PLUS_BOOKING',\n      ID: '',\n      NAME: '',\n      PHONE: '',\n      REFERENCE_TYPE: '',\n      TITLE: locales.entries.Lcz_NewBooking,\n    };\n  }\n  render() {\n    return (\n      <Host>\n        {this.withIrToastAndInterceptor && (\n          <Fragment>\n            <ir-toast></ir-toast>\n            <ir-interceptor></ir-interceptor>\n          </Fragment>\n        )}\n\n        <div class=\"book-container\" onClick={this.handleTriggerClicked.bind(this)}>\n          <slot name=\"trigger\"></slot>\n        </div>\n        {this.bookingItem && (\n          <igl-book-property\n            allowedBookingSources={this.calendarData.allowed_booking_sources}\n            adultChildConstraints={this.calendarData.adult_child_constraints}\n            showPaymentDetails={this.showPaymentDetails}\n            countries={this.countries}\n            currency={this.calendarData.currency}\n            language={this.language}\n            propertyid={this.propertyid}\n            bookingData={this.bookingItem}\n            onResetBookingEvt={(e: CustomEvent) => {\n              e.stopImmediatePropagation();\n              e.stopPropagation();\n              this.resetBookingData.emit(null);\n            }}\n            onCloseBookingWindow={() => this.handleCloseBookingWindow()}\n          ></igl-book-property>\n        )}\n      </Host>\n    );\n  }\n}\n"],"version":3}